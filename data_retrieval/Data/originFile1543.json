{"items":[{"tags":["java","xml","dom"],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646326136,"creation_date":1646326136,"answer_id":71340777,"question_id":71339780,"body_markdown":"Once the document is parsed, and the content loaded into a DOM, there are no tags, there are only nodes. You can tell that an element node is empty (by asking whether it has any child nodes), but you can&#39;t tell whether the empty element was originally written as `&lt;myTag/&gt;` or as `&lt;myTag&gt;&lt;/myTag&gt;`. That&#39;s the author&#39;s choice and it should make no difference to the recipient.\r\n\r\nYour question indicates that you are very confused about the difference between the lexical XML (the tags and angle brackets), and the tree model of the XML represented by the DOM.","title":"How to find Self-Closing Tags with org.w3c.dom","body":"<p>Once the document is parsed, and the content loaded into a DOM, there are no tags, there are only nodes. You can tell that an element node is empty (by asking whether it has any child nodes), but you can't tell whether the empty element was originally written as <code>&lt;myTag/&gt;</code> or as <code>&lt;myTag&gt;&lt;/myTag&gt;</code>. That's the author's choice and it should make no difference to the recipient.</p>\n<p>Your question indicates that you are very confused about the difference between the lexical XML (the tags and angle brackets), and the tree model of the XML represented by the DOM.</p>\n"},{"tags":[],"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646341625,"creation_date":1646339708,"answer_id":71343495,"question_id":71339780,"body_markdown":"Self closing tags have no children but so do empty tags.\r\nThat said, XPath could be used to find elements with no children or with attributes\r\n\r\nGiven\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;root&gt;\r\n        &lt;test/&gt;\r\n        &lt;test a=&quot;a&quot;/&gt;\r\n        &lt;empty&gt;&lt;/empty&gt;\r\n        &lt;test&gt;\r\n            &lt;a&gt;a&lt;/a&gt;\r\n        &lt;/test&gt;\r\n        &lt;test&gt;text&lt;/test&gt;\r\n        &lt;deep&gt;\r\n            &lt;some b=&quot;b&quot; /&gt;\r\n        &lt;/deep&gt;\r\n    &lt;/root&gt;\r\n\r\n\r\n\r\nFind elements with no children with `//*[count(./descendant::*) = 0 and count(./text()) = 0]`\r\n\r\n    xmllint --shell test.xml\r\n    &lt;/ cat //*[count(./descendant::*) = 0 and count(./text()) = 0]\r\n    &lt;test/&gt;\r\n     -------\r\n    &lt;test a=&quot;a&quot;/&gt;\r\n     -------\r\n    &lt;empty/&gt;\r\n     -------\r\n    &lt;some b=&quot;b&quot;/&gt;\r\n\r\nFind elements with attributes with xpath `//*[count(./@*)&gt; 0]`\r\n\r\n    / &gt; cat //*[count(./@*)&gt; 0]\r\n     -------\r\n    &lt;test a=&quot;a&quot;/&gt;\r\n     -------\r\n    &lt;some b=&quot;b&quot;/&gt;\r\n\r\n\r\nNote: XPath is language agnostic so it should work in java.","title":"How to find Self-Closing Tags with org.w3c.dom","body":"<p>Self closing tags have no children but so do empty tags.\nThat said, XPath could be used to find elements with no children or with attributes</p>\n<p>Given</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;root&gt;\n    &lt;test/&gt;\n    &lt;test a=&quot;a&quot;/&gt;\n    &lt;empty&gt;&lt;/empty&gt;\n    &lt;test&gt;\n        &lt;a&gt;a&lt;/a&gt;\n    &lt;/test&gt;\n    &lt;test&gt;text&lt;/test&gt;\n    &lt;deep&gt;\n        &lt;some b=&quot;b&quot; /&gt;\n    &lt;/deep&gt;\n&lt;/root&gt;\n</code></pre>\n<p>Find elements with no children with <code>//*[count(./descendant::*) = 0 and count(./text()) = 0]</code></p>\n<pre><code>xmllint --shell test.xml\n&lt;/ cat //*[count(./descendant::*) = 0 and count(./text()) = 0]\n&lt;test/&gt;\n -------\n&lt;test a=&quot;a&quot;/&gt;\n -------\n&lt;empty/&gt;\n -------\n&lt;some b=&quot;b&quot;/&gt;\n</code></pre>\n<p>Find elements with attributes with xpath <code>//*[count(./@*)&gt; 0]</code></p>\n<pre><code>/ &gt; cat //*[count(./@*)&gt; 0]\n -------\n&lt;test a=&quot;a&quot;/&gt;\n -------\n&lt;some b=&quot;b&quot;/&gt;\n</code></pre>\n<p>Note: XPath is language agnostic so it should work in java.</p>\n"}],"owner":{"account_id":4532018,"reputation":379,"user_id":3682179,"display_name":"rchrd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":485,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71343495,"answer_count":2,"score":0,"last_activity_date":1646421147,"creation_date":1646321796,"question_id":71339780,"body_markdown":"Does anybody know, how to find self closing tags of the XML document? &lt;br&gt;\r\nI am able to get all the elements of specific type, but I am unable to find elements, that are self closing and also, I need to find elements, with no attributes.\r\n\r\n\r\n```java\r\nvar dbf = DocumentBuilderFactory.newInstance();\r\ndbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\nvar db = dbf.newDocumentBuilder();\r\n\r\nvar urlToFile = MyClass.class.getClassLoader().getResource(&quot;file.xml&quot;);\r\nvar file = Paths.get(urlToFile .toURI()).toFile();\r\nvar doc = db.parse(file);\r\n\r\ndoc.getDocumentElement().normalize();\r\n\r\nvar list = doc.getElementsByTagName(&quot;myTag&quot;);\r\n\r\nfor (int i = 0; i &lt; list.getLength(); i++) {\r\n\r\n     var node = list.item(i);\r\n\r\n     if (node.getNodeType() == Node.ELEMENT_NODE) {\r\n\r\n          var bits = node.getChildNodes();\r\n\r\n          for (int j = 0; j &lt; bits.getLength(); j++) {\r\n\r\n               if (bits.item(j).hasAttributes()) {\r\n                    // var parrentAttrName = bits.item(j).getNodeName();\r\n                    // getValueFromAttribute is my private method\r\n                    var nameAttrValue = getValueFromAttribute(bits, j, &quot;name&quot;);\r\n                    var stateAttrValue = getValueFromAttribute(bits, j, &quot;state&quot;);\r\n\r\n                    bits.addElementToList(new MyBit(nameAttrValue, stateAttrValue));\r\n                }\r\n\r\n                if(!bit.item(j).hasAttributes()) {\r\n                     // not working \r\n                     System.out.println(bits.item(j));\r\n                }\r\n          }\r\n     }\r\n}\r\n```\r\n\r\nMy XML file has two types of `myTag` tags:\r\n1. Pair tags, that contains another nested child elements `&lt;myTag&gt;&lt;someElementHere /&gt;&lt;/myTag&gt;`\r\n2. Self-closing tags, that are specifying some other behaviour `&lt;myTag/&gt;`\r\n\r\nIs there a mechanism, to find this kind elements? The one possible thing would be, to match the regex of self closing tags, but I was thinking of some other solution possible. \r\n","title":"How to find Self-Closing Tags with org.w3c.dom","body":"<p>Does anybody know, how to find self closing tags of the XML document? <br>\nI am able to get all the elements of specific type, but I am unable to find elements, that are self closing and also, I need to find elements, with no attributes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var dbf = DocumentBuilderFactory.newInstance();\ndbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\nvar db = dbf.newDocumentBuilder();\n\nvar urlToFile = MyClass.class.getClassLoader().getResource(&quot;file.xml&quot;);\nvar file = Paths.get(urlToFile .toURI()).toFile();\nvar doc = db.parse(file);\n\ndoc.getDocumentElement().normalize();\n\nvar list = doc.getElementsByTagName(&quot;myTag&quot;);\n\nfor (int i = 0; i &lt; list.getLength(); i++) {\n\n     var node = list.item(i);\n\n     if (node.getNodeType() == Node.ELEMENT_NODE) {\n\n          var bits = node.getChildNodes();\n\n          for (int j = 0; j &lt; bits.getLength(); j++) {\n\n               if (bits.item(j).hasAttributes()) {\n                    // var parrentAttrName = bits.item(j).getNodeName();\n                    // getValueFromAttribute is my private method\n                    var nameAttrValue = getValueFromAttribute(bits, j, &quot;name&quot;);\n                    var stateAttrValue = getValueFromAttribute(bits, j, &quot;state&quot;);\n\n                    bits.addElementToList(new MyBit(nameAttrValue, stateAttrValue));\n                }\n\n                if(!bit.item(j).hasAttributes()) {\n                     // not working \n                     System.out.println(bits.item(j));\n                }\n          }\n     }\n}\n</code></pre>\n<p>My XML file has two types of <code>myTag</code> tags:</p>\n<ol>\n<li>Pair tags, that contains another nested child elements <code>&lt;myTag&gt;&lt;someElementHere /&gt;&lt;/myTag&gt;</code></li>\n<li>Self-closing tags, that are specifying some other behaviour <code>&lt;myTag/&gt;</code></li>\n</ol>\n<p>Is there a mechanism, to find this kind elements? The one possible thing would be, to match the regex of self closing tags, but I was thinking of some other solution possible.</p>\n"},{"tags":["java","java-stream","java-11"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645037221,"creation_date":1645028858,"answer_id":71145602,"question_id":71145029,"body_markdown":"For that, you need to filter the `Buzz` objects that have a key **&quot;points&quot;**. And because you have that requirement:\r\n\r\n&gt; one and only one Buzz will have a key of &quot;points&quot;, or none will\r\n\r\nThat means that a single result is needed. For that purpose *Stream IPA* provides the `findFirst()` method, which is a *short-circuit* operation (when it encounters the first element it returns it and no more elements from the stream will be processed).\r\n\r\nNote that result may or may not be present in the stream therefore `findFirst()` returns an object of type **Optional**. And `.map(Buzz::getValue)` will be applied on an *Optional result* but not on the element of the stream.\r\n\r\n```\r\n            int pointsSum = fizzes.stream()\r\n                .mapToInt(fizz -&gt; getPoints(fizz))\r\n                .sum();\r\n```\r\n```\r\n    private static int getPoints(Fizz fizz) {\r\n        return fizz.getBuzzes().stream()\r\n                .filter(buzz -&gt; buzz.getKey().equals(&quot;points&quot;))\r\n                .findFirst()\r\n                .map(Buzz::getValue)\r\n                .orElse(0);\r\n    }\r\n```\r\n\r\n**Note:** call of `getPoints()` can be written as a *method reference* in place of *lambda*, but I *don&#39;t* advise you to create a nested stream by putting all the code from this method into `mapToInt()`. Functional programming was introduced in Java, **not** in order to write convoluted implementations but to reduce the complexity of code.\r\n","title":"Java stream to map nested collection values into aggregating function","body":"<p>For that, you need to filter the <code>Buzz</code> objects that have a key <strong>&quot;points&quot;</strong>. And because you have that requirement:</p>\n<blockquote>\n<p>one and only one Buzz will have a key of &quot;points&quot;, or none will</p>\n</blockquote>\n<p>That means that a single result is needed. For that purpose <em>Stream IPA</em> provides the <code>findFirst()</code> method, which is a <em>short-circuit</em> operation (when it encounters the first element it returns it and no more elements from the stream will be processed).</p>\n<p>Note that result may or may not be present in the stream therefore <code>findFirst()</code> returns an object of type <strong>Optional</strong>. And <code>.map(Buzz::getValue)</code> will be applied on an <em>Optional result</em> but not on the element of the stream.</p>\n<pre><code>            int pointsSum = fizzes.stream()\n                .mapToInt(fizz -&gt; getPoints(fizz))\n                .sum();\n</code></pre>\n<pre><code>    private static int getPoints(Fizz fizz) {\n        return fizz.getBuzzes().stream()\n                .filter(buzz -&gt; buzz.getKey().equals(&quot;points&quot;))\n                .findFirst()\n                .map(Buzz::getValue)\n                .orElse(0);\n    }\n</code></pre>\n<p><strong>Note:</strong> call of <code>getPoints()</code> can be written as a <em>method reference</em> in place of <em>lambda</em>, but I <em>don't</em> advise you to create a nested stream by putting all the code from this method into <code>mapToInt()</code>. Functional programming was introduced in Java, <strong>not</strong> in order to write convoluted implementations but to reduce the complexity of code.</p>\n"},{"tags":[],"owner":{"account_id":18102286,"reputation":11,"user_id":13159988,"display_name":"yulinxp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646420637,"creation_date":1646420637,"answer_id":71356136,"question_id":71145029,"body_markdown":"        fizzes.stream().flatMap(t -&gt; t.buzzes.stream())\r\n        .filter(b -&gt; b.getKey().equals(&quot;points&quot;))\r\n        .mapToInt(Buzz::getValue)\r\n        .sum();","title":"Java stream to map nested collection values into aggregating function","body":"<pre><code>    fizzes.stream().flatMap(t -&gt; t.buzzes.stream())\n    .filter(b -&gt; b.getKey().equals(&quot;points&quot;))\n    .mapToInt(Buzz::getValue)\n    .sum();\n</code></pre>\n"}],"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71145602,"answer_count":2,"score":1,"last_activity_date":1646420637,"creation_date":1645026743,"question_id":71145029,"body_markdown":"\r\n```\r\n@Data // lombok\r\npublic class Buzz {\r\n  private String key;\r\n  private Integer value;\r\n  // many other fields\r\n}\r\n\r\n@Data // lombok\r\npublic class Fizz {\r\n  private Long id;\r\n  private String name;\r\n  private List&lt;Buzz&gt; buzzes = Collections.emptyList();\r\n  // many other fields here\r\n}\r\n```\r\n\r\n**This data model is set and cannot be changed.**\r\n\r\nThe application guarantees that each `Fizz` instance has exactly zero (0) or one (1) `Buzz` instance that has a key of &quot;points&quot;. Meaning if a particular `Fizz` instance has 10,000 `Buzz`es in its list, either _one and only one_ `Buzz` will have a key of &quot;points&quot;, or none will. I will never have 2+ `Buzz`es with a key of &quot;points&quot;.\r\n\r\nI want to stream over the list of fizzes and if a `Buzz` has a `key = &quot;points&quot;` then I want to take its points value and sum it with the other &quot;points Buzzes&quot; in the list of Fizzes. If a Buzz key does not have a key of &quot;points&quot; we can default its value to zero (0).\r\n\r\nHence if there are two Fizzes like so:\r\n```\r\nFizz f1 = new Fizz();\r\nFizz f2 = new Fizz();\r\nFizz f3 = new Fizz();\r\n\r\nBuzz b1 = new Buzz();\r\nBuzz b2 = new Buzz();\r\nBuzz b3 = new Buzz();\r\nBuzz b4 = new Buzz();\r\nBuzz b5 = new Buzz();\r\nBuzz b6 = new Buzz();\r\n\r\nb1.setKey(&quot;flim&quot;);\r\nb1.setValue(-1);\r\n\r\nb2.setKey(&quot;flim&quot;);\r\nb2.setValue(25);\r\n\r\nb3.setKey(&quot;points&quot;);\r\nb3.setValue(10);\r\n\r\nb4.setKey(&quot;points&quot;);\r\nb4.setValue(18);\r\n\r\nb5.setKey(&quot;flim&quot;);\r\nb5.setValue(-7);\r\n\r\nb6.setKey(&quot;flim&quot;);\r\nb6.setValue(100);\r\n\r\nf1.setBuzzes(Arrays.asList(b1, b2, b3));\r\nf2.setBuzzes(Arrays.asList(b4, b5));\r\nf3.setBuzzes(Arrays.asList(b6));\r\n\r\nList&lt;Fizz&gt; fizzes = Arrays.asList(f1, f2, f3);\r\n```\r\n\r\nThen I&#39;m looking for a Stream-based solution that tallies up all the &quot;points Buzzes&quot;. In this case the final value would be 28 since there are only 2 Buzzes in the entire list whose key = &quot;points&quot; (`b3` and `b4`) and their collective sum is 10 + 18 = 28.\r\n\r\nMy best attempt thus far:\r\n```\r\nInteger pointsSum = fizzes.stream()\r\n  .map(fizz -&gt; fizz.getBuzzes().howDoItellIfItsBuzzHasAFizzKeyEqualToPoints())\r\n  .reduce(Integer::sum)\r\n  .orElse(0);\r\n```\r\n\r\nMy problem is in crafting the `map(...)` statement. How do I filter to see if the `fizz` we are streaming over has a `Buzz` whose key is equal to &quot;points&quot; so that we can map to its Buzz `value`?\r\n","title":"Java stream to map nested collection values into aggregating function","body":"<pre><code>@Data // lombok\npublic class Buzz {\n  private String key;\n  private Integer value;\n  // many other fields\n}\n\n@Data // lombok\npublic class Fizz {\n  private Long id;\n  private String name;\n  private List&lt;Buzz&gt; buzzes = Collections.emptyList();\n  // many other fields here\n}\n</code></pre>\n<p><strong>This data model is set and cannot be changed.</strong></p>\n<p>The application guarantees that each <code>Fizz</code> instance has exactly zero (0) or one (1) <code>Buzz</code> instance that has a key of &quot;points&quot;. Meaning if a particular <code>Fizz</code> instance has 10,000 <code>Buzz</code>es in its list, either <em>one and only one</em> <code>Buzz</code> will have a key of &quot;points&quot;, or none will. I will never have 2+ <code>Buzz</code>es with a key of &quot;points&quot;.</p>\n<p>I want to stream over the list of fizzes and if a <code>Buzz</code> has a <code>key = &quot;points&quot;</code> then I want to take its points value and sum it with the other &quot;points Buzzes&quot; in the list of Fizzes. If a Buzz key does not have a key of &quot;points&quot; we can default its value to zero (0).</p>\n<p>Hence if there are two Fizzes like so:</p>\n<pre><code>Fizz f1 = new Fizz();\nFizz f2 = new Fizz();\nFizz f3 = new Fizz();\n\nBuzz b1 = new Buzz();\nBuzz b2 = new Buzz();\nBuzz b3 = new Buzz();\nBuzz b4 = new Buzz();\nBuzz b5 = new Buzz();\nBuzz b6 = new Buzz();\n\nb1.setKey(&quot;flim&quot;);\nb1.setValue(-1);\n\nb2.setKey(&quot;flim&quot;);\nb2.setValue(25);\n\nb3.setKey(&quot;points&quot;);\nb3.setValue(10);\n\nb4.setKey(&quot;points&quot;);\nb4.setValue(18);\n\nb5.setKey(&quot;flim&quot;);\nb5.setValue(-7);\n\nb6.setKey(&quot;flim&quot;);\nb6.setValue(100);\n\nf1.setBuzzes(Arrays.asList(b1, b2, b3));\nf2.setBuzzes(Arrays.asList(b4, b5));\nf3.setBuzzes(Arrays.asList(b6));\n\nList&lt;Fizz&gt; fizzes = Arrays.asList(f1, f2, f3);\n</code></pre>\n<p>Then I'm looking for a Stream-based solution that tallies up all the &quot;points Buzzes&quot;. In this case the final value would be 28 since there are only 2 Buzzes in the entire list whose key = &quot;points&quot; (<code>b3</code> and <code>b4</code>) and their collective sum is 10 + 18 = 28.</p>\n<p>My best attempt thus far:</p>\n<pre><code>Integer pointsSum = fizzes.stream()\n  .map(fizz -&gt; fizz.getBuzzes().howDoItellIfItsBuzzHasAFizzKeyEqualToPoints())\n  .reduce(Integer::sum)\n  .orElse(0);\n</code></pre>\n<p>My problem is in crafting the <code>map(...)</code> statement. How do I filter to see if the <code>fizz</code> we are streaming over has a <code>Buzz</code> whose key is equal to &quot;points&quot; so that we can map to its Buzz <code>value</code>?</p>\n"},{"tags":["java","android","camera","android-camerax"],"answers":[{"tags":[],"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1642168433,"creation_date":1642168433,"answer_id":70711657,"question_id":70706754,"body_markdown":"Instead of doing all this you can use [this][1] library. It will do all the task for you. \r\n\r\n## How to implement \r\n---\r\n\r\n    Options options = Options.init()\r\n                    .setRequestCode(100)     \r\n                    .setCount(1)\r\n                    .setFrontfacing(false)\r\n                    .setSpanCount(1)\r\n                    .setMode(Options.Mode.Video)\r\n                    .setScreenOrientation(Options.SCREEN_ORIENTATION_PORTRAIT)    \r\n                    .setPath(&quot;/Chatverse Captures&quot;);\r\n            Pix.start(this, options);\r\n\r\nAdd this where you want to record and when recorded, you can get the file path like this \r\n\r\nPaste this in the `onActivityResult`\r\n\r\n    if (requestCode == 100){\r\n            if (resultCode == Activity.RESULT_OK &amp;&amp; requestCode == 100) {\r\n                String returnValue = data.getStringArrayListExtra(Pix.IMAGE_RESULTS).get(0);\r\n                Toast.makeText(this,returnValue,Toast.LENGHT_SHORT).show();\r\n            }\r\n        }\r\n\r\n\r\n\r\n  [1]: https://github.com/akshay2211/PixImagePicker","title":"CameraX video recording freezes and generates empty video file","body":"<p>Instead of doing all this you can use <a href=\"https://github.com/akshay2211/PixImagePicker\" rel=\"nofollow noreferrer\">this</a> library. It will do all the task for you.</p>\n<h2>How to implement</h2>\n<hr />\n<pre><code>Options options = Options.init()\n                .setRequestCode(100)     \n                .setCount(1)\n                .setFrontfacing(false)\n                .setSpanCount(1)\n                .setMode(Options.Mode.Video)\n                .setScreenOrientation(Options.SCREEN_ORIENTATION_PORTRAIT)    \n                .setPath(&quot;/Chatverse Captures&quot;);\n        Pix.start(this, options);\n</code></pre>\n<p>Add this where you want to record and when recorded, you can get the file path like this</p>\n<p>Paste this in the <code>onActivityResult</code></p>\n<pre><code>if (requestCode == 100){\n        if (resultCode == Activity.RESULT_OK &amp;&amp; requestCode == 100) {\n            String returnValue = data.getStringArrayListExtra(Pix.IMAGE_RESULTS).get(0);\n            Toast.makeText(this,returnValue,Toast.LENGHT_SHORT).show();\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":23936990,"reputation":1,"user_id":17930608,"display_name":"Alex Vizcaino"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1050,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646420603,"creation_date":1642141582,"question_id":70706754,"body_markdown":"I&#39;ve implemented video recording with CameraX using two cases (preview + videoCapture) as follows:\r\n\r\n```\r\n@SuppressLint(&quot;RestrictedApi&quot;)\r\n    @Override\r\n    public android.view.View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        executor = Executors.newSingleThreadExecutor();\r\n        android.view.View rootView = super.onCreateView(inflater, container, savedInstanceState);\r\n        PreviewView previewView = rootView.findViewById(R.id.camera);\r\n        ImageView capture = rootView.findViewById(R.id.capture);\r\n\r\n        ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture =\r\n                ProcessCameraProvider.getInstance(getActivity());\r\n\r\n        cameraProviderFuture.addListener(() -&gt; {\r\n            try {\r\n                // Camera provider is now guaranteed to be available\r\n                ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\r\n\r\n                // Set up the view finder use case to display camera preview\r\n                Preview preview = new Preview.Builder().build();\r\n\r\n                // Set up the capture use case to allow users to take photos\r\n                videoCapture = new VideoCapture.Builder()\r\n                        .setVideoFrameRate(30).setTargetAspectRatio(AspectRatio.RATIO_4_3)\r\n                        .build();\r\n\r\n                // Choose the camera by requiring a lens facing\r\n                CameraSelector cameraSelector = new CameraSelector.Builder()\r\n                        .requireLensFacing(CameraSelector.LENS_FACING_BACK)\r\n                        .build();\r\n\r\n                // Attach use cases to the camera with the same lifecycle owner\r\n                Camera camera = cameraProvider.bindToLifecycle(\r\n                        ((LifecycleOwner) this),\r\n                        cameraSelector,\r\n                        preview,\r\n                        videoCapture);\r\n\r\n                // Connect the preview use case to the previewView\r\n                preview.setSurfaceProvider(\r\n                        previewView.getSurfaceProvider());\r\n\r\n                capture.setOnClickListener(onCaptureClick);\r\n\r\n            } catch (InterruptedException | ExecutionException e) {\r\n                // Currently no exceptions thrown. cameraProviderFuture.get()\r\n                // shouldn&#39;t block since the listener is being called, so no need to\r\n                // handle InterruptedException.\r\n            }\r\n        }, ContextCompat.getMainExecutor(getActivity()));\r\n\r\n        return rootView;\r\n    }\r\n\r\n    private Boolean isRecording = false;\r\n\r\n    private View.OnClickListener onCaptureClick = new View.OnClickListener() {\r\n        @SuppressLint({&quot;RestrictedApi&quot;, &quot;MissingPermission&quot;})\r\n        @Override\r\n        public void onClick(View view) {\r\n            if(!isRecording){\r\n                isRecording = true;\r\n                SimpleDateFormat mDateFormat = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;, Locale.US);\r\n                String timestamp = mDateFormat.format(new Date());\r\n                File mediaFile = new File(GlobalConstants.TEMP_DIR(), &quot;VID_&quot; + timestamp + &quot;.mp4&quot;);// File.createTempFile(&quot;IMG_&quot;, &quot;.jpg&quot;, tempDir);\r\n                VideoCapture.OutputFileOptions outputFileOptions = new VideoCapture.OutputFileOptions.Builder(mediaFile).build();\r\n                videoCapture.startRecording(outputFileOptions, executor, new VideoCapture.OnVideoSavedCallback() {\r\n                    @Override\r\n                    public void onVideoSaved(@NonNull VideoCapture.OutputFileResults outputFileResults) {\r\n                        Log.d(LOG_TAG, &quot;videoSaved&quot;);\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(int videoCaptureError, @NonNull String message, @Nullable Throwable cause) {\r\n                        Log.d(LOG_TAG, &quot;videoError&quot;);\r\n                    }\r\n                });\r\n            } else videoCapture.stopRecording();\r\n        }\r\n    };\r\n```\r\n\r\nPreview use case is working fine but when starting the recording, on some recording sessions works fine but on others the screen freezes and on stopping the recording, the `onVideoSaved` callback is called successfully but the generated video file is empty.\r\n\r\nThe debug console is throwing this:\r\n\r\n```\r\nD/CAMERA::VideoActivity: Initialize VideoActivity\r\nI/MultiWindowDecorSupport: updateCaptionType &gt;&gt; com.android.internal.policy.MultiWindowDecorSupport@19a4248, isFloating: false, isApplication: true, hasWindowDecorCaption: false, hasWindowControllerCallback: true\r\nD/MultiWindowDecorSupport: setCaptionType = 0\r\nD/InputTransport: Input channel constructed: fd=95\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: setView = DecorView@617251c[VideoActivity] TM=true MM=false\r\nI/Choreographer: Skipped 175 frames!  The application may be doing too much work on its main thread.\r\nV/InputMethodManager: Not IME target window, ignoring\r\nD/SurfaceView: onWindowVisibilityChanged(0) true android.widget.VideoView{4d18525 VFE...... .F....I. 0,0-0,0 #7f0901a8 app:id/preview_video} of ViewRootImpl@be5fe8f[VideoActivity]\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x7 surface={true 3367393280} changed=true\r\nD/mali_winsys: EGLint new_window_surface(egl_winsys_display *, void *, EGLSurface, EGLConfig, egl_winsys_surface **, EGLBoolean) returns 0x3000,  [800x1280]-format:1\r\nD/OpenGLRenderer: eglCreateWindowSurface = 0xc314abc0, 0xc8b65808\r\nE/RecyclerView: No adapter attached; skipping layout\r\nD/SurfaceView: show() Surface(name=SurfaceView - cat.gencat.mossos.camera.test/cat.gencat.mossos.camera.ui._template.activities.VideoActivity@4d18525@0[6359])/@0xed542aa android.widget.VideoView{4d18525 VFE...... .F....ID 0,0-800,1160 #7f0901a8 app:id/preview_video}\r\nD/SurfaceView: surfaceCreated 1 #8 android.widget.VideoView{4d18525 VFE...... .F....ID 0,0-800,1160 #7f0901a8 app:id/preview_video}\r\nD/SurfaceView: surfaceChanged (800,1160) 1 #8 android.widget.VideoView{4d18525 VFE...... .F....ID 0,0-800,1160 #7f0901a8 app:id/preview_video}\r\nD/DeferrableSurface: Surface created[total_surfaces=1, used_surfaces=0](androidx.camera.core.SurfaceRequest$2@4dc674e}\r\nI/ACodec:  [] Now uninitialized\r\nI/ACodec: [] onAllocateComponent\r\nI/OMXClient: IOmx service obtained\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded\r\nI/ACodec:  [] Now uninitialized\r\nI/ACodec: [] onAllocateComponent\r\nI/OMXClient: IOmx service obtained\r\nI/ACodec: [OMX.google.aac.encoder] Now Loaded\r\nI/ACodec:  [OMX.Exynos.AVC.Encoder] Now uninitialized\r\n     [] Now kWhatShutdownCompleted event : 8600\r\nI/MediaCodec: Codec shutdown complete\r\nI/ACodec:  [] Now uninitialized\r\nI/ACodec: [] onAllocateComponent\r\nI/OMXClient: IOmx service obtained\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded\r\nI/ACodec: app-pid(6359)\r\nW/OMXUtils: do not know color format 0x7f000011 = 2130706449\r\n    do not know color format 0x10 = 16\r\nW/OMXUtils: do not know color format 0x7f00a000 = 2130747392\r\n    do not know color format 0x7f000789 = 2130708361\r\nI/ACodec: app-name : cat.gencat.mossos.camera.test\r\n    setupAVCEncoderParameters with [profile: Baseline] [level: Level1]\r\n    Enable Perceptual Video Coding\r\n    Success set VideoMinQP(5/5/5) VideoMaxQP(50/50/50)\r\n    SECSetparameters : default\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] cannot encode HDR static metadata. Ignoring.\r\n    setupVideoEncoder succeeded\r\n    [OMX.Exynos.AVC.Encoder] configure, AMessage : AMessage(what = &#39;conf&#39;, target = 21) = {\r\n      int32_t color-format = 2130708361\r\n      int32_t i-frame-interval = 1\r\n      string mime = &quot;video/avc&quot;\r\n      int32_t width = 1440\r\n      int32_t bitrate = 8388608\r\n      int32_t frame-rate = 30\r\n      int32_t height = 1080\r\n      int32_t encoder = 1\r\n    }\r\nW/OMXUtils: do not know color format 0x7f000789 = 2130708361\r\nD/DeferrableSurface: Surface created[total_surfaces=2, used_surfaces=0](androidx.camera.core.impl.ImmediateSurface@3cc7a05}\r\nI/ACodec:  [OMX.google.aac.encoder] Now uninitialized\r\n     [] Now kWhatShutdownCompleted event : 8600\r\nI/MediaCodec: Codec shutdown complete\r\nI/ACodec:  [] Now uninitialized\r\nI/ACodec: [] onAllocateComponent\r\nI/OMXClient: IOmx service obtained\r\nI/ACodec: [OMX.google.aac.encoder] Now Loaded\r\nI/ACodec: app-pid(6359)\r\nI/VideoCapture: source: 1 audioSampleRate: 8000 channelConfig: 16 audioFormat: 2 bufferSize: 640\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 ACTIVE\r\nD/UseCaseAttachState: Active and attached use case: [] for camera: 0\r\nD/CameraOrientationUtil: getRelativeImageRotation: destRotationDegrees=0, sourceRotationDegrees=90, isOppositeFacing=true, result=90\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case Preview:androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634 INACTIVE\r\nD/UseCaseAttachState: Active and attached use case: [] for camera: 0\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 ACTIVE\r\nD/UseCaseAttachState: Active and attached use case: [] for camera: 0\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use cases [Preview:androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634, androidx.camera.core.VideoCapture@e6f7d02] now ATTACHED\r\nD/UseCaseAttachState: All use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\r\nD/Camera2CameraImpl: mMeteringRepeating is ATTACHED, SessionConfig Surfaces: 2, CaptureConfig Surfaces: 1\r\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522] for camera: 0\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Resetting Capture Session\r\nI/Choreographer: Skipped 155 frames!  The application may be doing too much work on its main thread.\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Releasing session in state INITIALIZED\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Attempting to force open the camera.\r\nD/CameraStateRegistry: tryOpenCamera(Camera@8c15fa0[id=0]) [Available Cameras: 1, Already Open: false (Previous state: CLOSED)] --&gt; SUCCESS\r\nD/CameraStateRegistry: Recalculating open cameras:\r\n    Camera                                       State                 \r\n    -------------------------------------------------------------------\r\n    Camera@8c15fa0[id=0]                         OPENING               \r\n    Camera@a436015[id=1]                         UNKNOWN               \r\n    -------------------------------------------------------------------\r\n    Open count: 1 (Max allowed: 1)\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Opening camera.\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x3 surface={true 3367393280} changed=false\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Transitioning camera internal state: INITIALIZED --&gt; OPENING\r\nD/CameraStateMachine: New public camera state CameraState{type=OPENING, error=null} from OPENING and null\r\nD/CameraStateMachine: Publishing new public camera state CameraState{type=OPENING, error=null}\r\nD/UseCaseAttachState: All use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\r\nE/Camera_APM&#160;:: [APM]APM&#39;s Thread is started\r\nE/Camera_APM&#160;:: [APM] This app is forground app\r\nI/CameraManagerGlobal: postSingleUpdate device: camera id 0 status STATUS_NOT_AVAILABLE\r\nI/CameraManagerGlobal: postSingleUpdate device: camera id 0 status STATUS_NOT_AVAILABLE\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: MSG_RESIZED: frame=[0,0][800,1280] ci=[0,32][0,0] vi=[0,32][0,0] or=1\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: MSG_WINDOW_FOCUS_CHANGED 1 1\r\nD/InputMethodManager: prepareNavigationBarInfo() DecorView@617251c[VideoActivity]\r\nD/InputMethodManager: getNavigationBarColor() -855310\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case Preview:androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634 INACTIVE\r\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522] for camera: 0\r\nD/InputMethodManager: prepareNavigationBarInfo() DecorView@617251c[VideoActivity]\r\nD/InputMethodManager: getNavigationBarColor() -855310\r\nV/InputMethodManager: Starting input: tba=cat.gencat.mossos.camera.test ic=null mNaviBarColor -855310 mIsGetNaviBarColorSuccess true , NavVisible : true , NavTrans : false\r\nD/InputMethodManager: startInputInner - Id : 0\r\nI/InputMethodManager: startInputInner - mService.startInputOrWindowGainedFocus\r\nD/InputTransport: Input channel constructed: fd=119\r\nD/InputTransport: Input channel destroyed: fd=92\r\nD/PreviewView: Surface requested by Preview.\r\nD/SurfaceView: onWindowVisibilityChanged(0) true android.view.SurfaceView{a14e4bd V.E...... ......I. 0,0-0,0} of ViewRootImpl@be5fe8f[VideoActivity]\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 ACTIVE\r\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522] for camera: 0\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x1 surface={true 3367393280} changed=false\r\nD/SurfaceView: show() Surface(name=SurfaceView - cat.gencat.mossos.camera.test/cat.gencat.mossos.camera.ui._template.activities.VideoActivity@a14e4bd@0[6359])/@0xdad80 android.view.SurfaceView{a14e4bd V.E...... ......ID 0,0-960,720}\r\nD/SurfaceView: surfaceCreated 1 #8 android.view.SurfaceView{a14e4bd V.E...... ......ID 0,0-960,720}\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case Preview:androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634 ACTIVE\r\nD/SurfaceViewImpl: Surface created.\r\nD/SurfaceView: surfaceChanged (960,720) 1 #8 android.view.SurfaceView{a14e4bd V.E...... ......ID 0,0-960,720}\r\nD/SurfaceViewImpl: Surface changed. Size: 960x720\r\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\r\nW/libEGL: EGLNativeWindowType 0xc8c1e808 disconnect failed\r\nD/OpenGLRenderer: eglDestroySurface = 0xc7e56620, 0xc8c1e800\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} CameraDevice.onOpened()\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Transitioning camera internal state: OPENING --&gt; OPENED\r\nD/CameraStateRegistry: Recalculating open cameras:\r\n    Camera                                       State                 \r\n    -------------------------------------------------------------------\r\n    Camera@8c15fa0[id=0]                         OPEN                  \r\n    Camera@a436015[id=1]                         UNKNOWN               \r\n    -------------------------------------------------------------------\r\n    Open count: 1 (Max allowed: 1)\r\nD/CameraStateMachine: New public camera state CameraState{type=OPEN, error=null} from OPEN and null\r\nD/ViewRootImpl@348be9d[FormActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x5 surface={false 0} changed=true\r\nD/CameraStateMachine: Publishing new public camera state CameraState{type=OPEN, error=null}\r\nD/UseCaseAttachState: All use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\r\nD/PreviewView: Preview transformation info updated. TransformationInfo{cropRect=Rect(0, 0 - 960, 720), rotationDegrees=90, targetRotation=0}\r\nD/PreviewTransform: Transformation info set: TransformationInfo{cropRect=Rect(0, 0 - 960, 720), rotationDegrees=90, targetRotation=0} 960x720 false\r\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\r\nD/SurfaceViewImpl: Surface set on Preview.\r\nD/ViewRootImpl@348be9d[FormActivity]: stopped(true) old=false\r\nD/SyncCaptureSessionBase: [androidx.camera.camera2.internal.SynchronizedCaptureSessionBaseImpl@5854ddc] getSurface...done\r\nD/CaptureSession: Opening capture session.\r\nD/DeferrableSurface: New surface in use[total_surfaces=2, used_surfaces=1](androidx.camera.core.SurfaceRequest$2@4dc674e}\r\nD/DeferrableSurface: use count+1, useCount=1 androidx.camera.core.SurfaceRequest$2@4dc674e\r\nD/DeferrableSurface: New surface in use[total_surfaces=2, used_surfaces=2](androidx.camera.core.impl.ImmediateSurface@3cc7a05}\r\nD/DeferrableSurface: use count+1, useCount=1 androidx.camera.core.impl.ImmediateSurface@3cc7a05\r\nD/CaptureSession: Attempting to send capture request onConfigured\r\nD/CaptureSession: Issuing request for session.\r\nD/CaptureSession: CameraCaptureSession.onConfigured() mState=OPENED\r\nD/CaptureSession: CameraCaptureSession.onReady() OPENED\r\nD/ViewRootImpl@348be9d[FormActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x1 surface={false 0} changed=false\r\nD/StreamStateObserver: Update Preview stream state to STREAMING\r\nW/AMessage: failed to deliver message as target handler 15 is gone.\r\nW/AMessage: failed to deliver message as target handler 18 is gone.\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: ViewPostIme pointer 0\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: ViewPostIme pointer 1\r\nI/VideoCapture: startRecording\r\nI/VideoCapture: videoEncoder start\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded-&gt;Idle\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Idle-&gt;Executing\r\nI/MediaCodec: setCodecState state : 0\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Executing\r\nI/VideoCapture: audioEncoder start\r\nI/ACodec: [OMX.google.aac.encoder] Now Loaded-&gt;Idle\r\nI/ACodec: [OMX.google.aac.encoder] Now Idle-&gt;Executing\r\nI/ACodec: [OMX.google.aac.encoder] Now Executing\r\nD/CameraOrientationUtil: getRelativeImageRotation: destRotationDegrees=0, sourceRotationDegrees=90, isOppositeFacing=true, result=90\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 UPDATED\r\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\r\nW/VideoCapture: Drops frame, current frame&#39;s timestamp 0 is earlier that last frame 0\r\nD/CaptureSession: Attempting to submit CaptureRequest after setting\r\nD/CaptureSession: Issuing request for session.\r\nW/System: A resource failed to call close. \r\nI/MediaCodec: setCodecState state : 0\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: ViewPostIme pointer 0\r\nD/ViewRootImpl@be5fe8f[VideoActivity]: ViewPostIme pointer 1\r\nI/VideoCapture: stopRecording\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 UPDATED\r\nI/VideoCapture: audioRecorder stop\r\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\r\nI/ACodec: [OMX.google.aac.encoder] Now Executing-&gt;Idle\r\nI/ACodec: [OMX.google.aac.encoder] Now Idle-&gt;Loaded\r\n    [OMX.google.aac.encoder] Now Loaded\r\n     [OMX.google.aac.encoder] Now kWhatShutdownCompleted event : 8600\r\nI/VideoCapture: Audio encode thread end\r\nI/MediaCodec: setCodecState state : 1\r\nI/VideoCapture: videoEncoder stop\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Executing-&gt;Idle\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Idle-&gt;Loaded\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded\r\n     [OMX.Exynos.AVC.Encoder] Now kWhatShutdownCompleted event : 8600\r\nD/MPEG4Writer: Audio track stopping. Stop source\r\nE/MPEG4Writer: Stop() called but track is not started\r\nI/VideoCapture: Video encode thread end.\r\nD/CaptureSession: Attempting to submit CaptureRequest after setting\r\nD/CaptureSession: Issuing request for session.\r\nI/MediaCodec: setCodecState state : 0\r\nD/CAMERA::Video: videoSaved\r\nI/ACodec:  [OMX.Exynos.AVC.Encoder] Now uninitialized\r\nI/ACodec:  [] Now kWhatShutdownCompleted event : 8600\r\nI/MediaCodec: Codec shutdown complete\r\nI/ACodec:  [] Now uninitialized\r\nI/ACodec: [] onAllocateComponent\r\nI/OMXClient: IOmx service obtained\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded\r\nI/ACodec: app-pid(6359)\r\nW/OMXUtils: do not know color format 0x7f000011 = 2130706449\r\nW/OMXUtils: do not know color format 0x10 = 16\r\n    do not know color format 0x7f00a000 = 2130747392\r\nW/OMXUtils: do not know color format 0x7f000789 = 2130708361\r\nI/ACodec: app-name : cat.gencat.mossos.camera.test\r\nI/ACodec: setupAVCEncoderParameters with [profile: Baseline] [level: Level1]\r\nI/ACodec: Enable Perceptual Video Coding\r\n    Success set VideoMinQP(5/5/5) VideoMaxQP(50/50/50)\r\nI/ACodec: SECSetparameters : default\r\nI/ACodec: [OMX.Exynos.AVC.Encoder] cannot encode HDR static metadata. Ignoring.\r\n    setupVideoEncoder succeeded\r\n    [OMX.Exynos.AVC.Encoder] configure, AMessage : AMessage(what = &#39;conf&#39;, target = 25) = {\r\n      int32_t color-format = 2130708361\r\n      int32_t i-frame-interval = 1\r\n      string mime = &quot;video/avc&quot;\r\n      int32_t width = 1440\r\n      int32_t bitrate = 8388608\r\n      int32_t frame-rate = 30\r\n      int32_t height = 1080\r\n      int32_t encoder = 1\r\n    }\r\nW/OMXUtils: do not know color format 0x7f000789 = 2130708361\r\nD/DeferrableSurface: surface closed,  useCount=1 closed=true androidx.camera.core.impl.ImmediateSurface@3cc7a05\r\nD/DeferrableSurface: Surface created[total_surfaces=3, used_surfaces=2](androidx.camera.core.impl.ImmediateSurface@a82cb55}\r\nI/ACodec:  [OMX.google.aac.encoder] Now uninitialized\r\n     [] Now kWhatShutdownCompleted event : 8600\r\nI/MediaCodec: Codec shutdown complete\r\nI/ACodec:  [] Now uninitialized\r\nI/ACodec: [] onAllocateComponent\r\nI/OMXClient: IOmx service obtained\r\nI/ACodec: [OMX.google.aac.encoder] Now Loaded\r\nI/ACodec: app-pid(6359)\r\nI/VideoCapture: source: 1 audioSampleRate: 8000 channelConfig: 16 audioFormat: 2 bufferSize: 640\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 RESET\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Resetting Capture Session\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Releasing session in state OPENED\r\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\r\nD/UseCaseAttachState: All use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\r\nD/CaptureSession: onSessionFinished()\r\nD/SyncCaptureSessionBase: [androidx.camera.camera2.internal.SynchronizedCaptureSessionBaseImpl@fce7dd3] getSurface...done\r\nD/CaptureSession: Opening capture session.\r\nD/DeferrableSurface: use count+1, useCount=2 androidx.camera.core.SurfaceRequest$2@4dc674e\r\nD/DeferrableSurface: New surface in use[total_surfaces=3, used_surfaces=3](androidx.camera.core.impl.ImmediateSurface@a82cb55}\r\nD/DeferrableSurface: use count+1, useCount=1 androidx.camera.core.impl.ImmediateSurface@a82cb55\r\nW/AMessage: failed to deliver message as target handler 21 is gone.\r\nW/AMessage: failed to deliver message as target handler 23 is gone.\r\nE/CameraCaptureSession: Session 1: Failed to create capture session; configuration failed\r\nD/DeferrableSurface: use count-1,  useCount=1 closed=false androidx.camera.core.SurfaceRequest$2@4dc674e\r\nD/DeferrableSurface: use count-1,  useCount=0 closed=false androidx.camera.core.impl.ImmediateSurface@a82cb55\r\nD/DeferrableSurface: Surface no longer in use[total_surfaces=3, used_surfaces=2](androidx.camera.core.impl.ImmediateSurface@a82cb55}\r\nD/DeferrableSurface: use count-1,  useCount=0 closed=false androidx.camera.core.SurfaceRequest$2@4dc674e\r\nD/DeferrableSurface: Surface no longer in use[total_surfaces=3, used_surfaces=1](androidx.camera.core.SurfaceRequest$2@4dc674e}\r\nD/DeferrableSurface: use count-1,  useCount=0 closed=true androidx.camera.core.impl.ImmediateSurface@3cc7a05\r\nD/DeferrableSurface: Surface no longer in use[total_surfaces=3, used_surfaces=0](androidx.camera.core.impl.ImmediateSurface@3cc7a05}\r\nD/DeferrableSurface: Surface terminated[total_surfaces=2, used_surfaces=0](androidx.camera.core.impl.ImmediateSurface@3cc7a05}\r\nE/CaptureSession: CameraCaptureSession.onConfigureFailed() RELEASED\r\nD/Camera2CameraImpl: CameraDevice.onError(): 0 failed with ERROR_CAMERA_DEVICE while in OPENED state. Will attempt recovering from error.\r\nD/Camera2CameraImpl: Attempt to reopen camera[0] after error[ERROR_CAMERA_DEVICE]\r\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Transitioning camera internal state: OPENED --&gt; REOPENING\r\n\r\n```\r\n\r\nThe behavior is random since sometimes happens on the second recording and sometimes I was able to execute more than 10 recordings successfully. This works perfectly on a Samsung with Android 5 but is crashing on a Samsung Tab Active2 with Android 9.\r\n\r\n","title":"CameraX video recording freezes and generates empty video file","body":"<p>I've implemented video recording with CameraX using two cases (preview + videoCapture) as follows:</p>\n<pre><code>@SuppressLint(&quot;RestrictedApi&quot;)\n    @Override\n    public android.view.View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        executor = Executors.newSingleThreadExecutor();\n        android.view.View rootView = super.onCreateView(inflater, container, savedInstanceState);\n        PreviewView previewView = rootView.findViewById(R.id.camera);\n        ImageView capture = rootView.findViewById(R.id.capture);\n\n        ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture =\n                ProcessCameraProvider.getInstance(getActivity());\n\n        cameraProviderFuture.addListener(() -&gt; {\n            try {\n                // Camera provider is now guaranteed to be available\n                ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\n\n                // Set up the view finder use case to display camera preview\n                Preview preview = new Preview.Builder().build();\n\n                // Set up the capture use case to allow users to take photos\n                videoCapture = new VideoCapture.Builder()\n                        .setVideoFrameRate(30).setTargetAspectRatio(AspectRatio.RATIO_4_3)\n                        .build();\n\n                // Choose the camera by requiring a lens facing\n                CameraSelector cameraSelector = new CameraSelector.Builder()\n                        .requireLensFacing(CameraSelector.LENS_FACING_BACK)\n                        .build();\n\n                // Attach use cases to the camera with the same lifecycle owner\n                Camera camera = cameraProvider.bindToLifecycle(\n                        ((LifecycleOwner) this),\n                        cameraSelector,\n                        preview,\n                        videoCapture);\n\n                // Connect the preview use case to the previewView\n                preview.setSurfaceProvider(\n                        previewView.getSurfaceProvider());\n\n                capture.setOnClickListener(onCaptureClick);\n\n            } catch (InterruptedException | ExecutionException e) {\n                // Currently no exceptions thrown. cameraProviderFuture.get()\n                // shouldn't block since the listener is being called, so no need to\n                // handle InterruptedException.\n            }\n        }, ContextCompat.getMainExecutor(getActivity()));\n\n        return rootView;\n    }\n\n    private Boolean isRecording = false;\n\n    private View.OnClickListener onCaptureClick = new View.OnClickListener() {\n        @SuppressLint({&quot;RestrictedApi&quot;, &quot;MissingPermission&quot;})\n        @Override\n        public void onClick(View view) {\n            if(!isRecording){\n                isRecording = true;\n                SimpleDateFormat mDateFormat = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;, Locale.US);\n                String timestamp = mDateFormat.format(new Date());\n                File mediaFile = new File(GlobalConstants.TEMP_DIR(), &quot;VID_&quot; + timestamp + &quot;.mp4&quot;);// File.createTempFile(&quot;IMG_&quot;, &quot;.jpg&quot;, tempDir);\n                VideoCapture.OutputFileOptions outputFileOptions = new VideoCapture.OutputFileOptions.Builder(mediaFile).build();\n                videoCapture.startRecording(outputFileOptions, executor, new VideoCapture.OnVideoSavedCallback() {\n                    @Override\n                    public void onVideoSaved(@NonNull VideoCapture.OutputFileResults outputFileResults) {\n                        Log.d(LOG_TAG, &quot;videoSaved&quot;);\n                    }\n\n                    @Override\n                    public void onError(int videoCaptureError, @NonNull String message, @Nullable Throwable cause) {\n                        Log.d(LOG_TAG, &quot;videoError&quot;);\n                    }\n                });\n            } else videoCapture.stopRecording();\n        }\n    };\n</code></pre>\n<p>Preview use case is working fine but when starting the recording, on some recording sessions works fine but on others the screen freezes and on stopping the recording, the <code>onVideoSaved</code> callback is called successfully but the generated video file is empty.</p>\n<p>The debug console is throwing this:</p>\n<pre><code>D/CAMERA::VideoActivity: Initialize VideoActivity\nI/MultiWindowDecorSupport: updateCaptionType &gt;&gt; com.android.internal.policy.MultiWindowDecorSupport@19a4248, isFloating: false, isApplication: true, hasWindowDecorCaption: false, hasWindowControllerCallback: true\nD/MultiWindowDecorSupport: setCaptionType = 0\nD/InputTransport: Input channel constructed: fd=95\nD/ViewRootImpl@be5fe8f[VideoActivity]: setView = DecorView@617251c[VideoActivity] TM=true MM=false\nI/Choreographer: Skipped 175 frames!  The application may be doing too much work on its main thread.\nV/InputMethodManager: Not IME target window, ignoring\nD/SurfaceView: onWindowVisibilityChanged(0) true android.widget.VideoView{4d18525 VFE...... .F....I. 0,0-0,0 #7f0901a8 app:id/preview_video} of ViewRootImpl@be5fe8f[VideoActivity]\nD/ViewRootImpl@be5fe8f[VideoActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x7 surface={true 3367393280} changed=true\nD/mali_winsys: EGLint new_window_surface(egl_winsys_display *, void *, EGLSurface, EGLConfig, egl_winsys_surface **, EGLBoolean) returns 0x3000,  [800x1280]-format:1\nD/OpenGLRenderer: eglCreateWindowSurface = 0xc314abc0, 0xc8b65808\nE/RecyclerView: No adapter attached; skipping layout\nD/SurfaceView: show() Surface(name=SurfaceView - cat.gencat.mossos.camera.test/cat.gencat.mossos.camera.ui._template.activities.VideoActivity@4d18525@0[6359])/@0xed542aa android.widget.VideoView{4d18525 VFE...... .F....ID 0,0-800,1160 #7f0901a8 app:id/preview_video}\nD/SurfaceView: surfaceCreated 1 #8 android.widget.VideoView{4d18525 VFE...... .F....ID 0,0-800,1160 #7f0901a8 app:id/preview_video}\nD/SurfaceView: surfaceChanged (800,1160) 1 #8 android.widget.VideoView{4d18525 VFE...... .F....ID 0,0-800,1160 #7f0901a8 app:id/preview_video}\nD/DeferrableSurface: Surface created[total_surfaces=1, used_surfaces=0](androidx.camera.core.SurfaceRequest$2@4dc674e}\nI/ACodec:  [] Now uninitialized\nI/ACodec: [] onAllocateComponent\nI/OMXClient: IOmx service obtained\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded\nI/ACodec:  [] Now uninitialized\nI/ACodec: [] onAllocateComponent\nI/OMXClient: IOmx service obtained\nI/ACodec: [OMX.google.aac.encoder] Now Loaded\nI/ACodec:  [OMX.Exynos.AVC.Encoder] Now uninitialized\n     [] Now kWhatShutdownCompleted event : 8600\nI/MediaCodec: Codec shutdown complete\nI/ACodec:  [] Now uninitialized\nI/ACodec: [] onAllocateComponent\nI/OMXClient: IOmx service obtained\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded\nI/ACodec: app-pid(6359)\nW/OMXUtils: do not know color format 0x7f000011 = 2130706449\n    do not know color format 0x10 = 16\nW/OMXUtils: do not know color format 0x7f00a000 = 2130747392\n    do not know color format 0x7f000789 = 2130708361\nI/ACodec: app-name : cat.gencat.mossos.camera.test\n    setupAVCEncoderParameters with [profile: Baseline] [level: Level1]\n    Enable Perceptual Video Coding\n    Success set VideoMinQP(5/5/5) VideoMaxQP(50/50/50)\n    SECSetparameters : default\nI/ACodec: [OMX.Exynos.AVC.Encoder] cannot encode HDR static metadata. Ignoring.\n    setupVideoEncoder succeeded\n    [OMX.Exynos.AVC.Encoder] configure, AMessage : AMessage(what = 'conf', target = 21) = {\n      int32_t color-format = 2130708361\n      int32_t i-frame-interval = 1\n      string mime = &quot;video/avc&quot;\n      int32_t width = 1440\n      int32_t bitrate = 8388608\n      int32_t frame-rate = 30\n      int32_t height = 1080\n      int32_t encoder = 1\n    }\nW/OMXUtils: do not know color format 0x7f000789 = 2130708361\nD/DeferrableSurface: Surface created[total_surfaces=2, used_surfaces=0](androidx.camera.core.impl.ImmediateSurface@3cc7a05}\nI/ACodec:  [OMX.google.aac.encoder] Now uninitialized\n     [] Now kWhatShutdownCompleted event : 8600\nI/MediaCodec: Codec shutdown complete\nI/ACodec:  [] Now uninitialized\nI/ACodec: [] onAllocateComponent\nI/OMXClient: IOmx service obtained\nI/ACodec: [OMX.google.aac.encoder] Now Loaded\nI/ACodec: app-pid(6359)\nI/VideoCapture: source: 1 audioSampleRate: 8000 channelConfig: 16 audioFormat: 2 bufferSize: 640\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 ACTIVE\nD/UseCaseAttachState: Active and attached use case: [] for camera: 0\nD/CameraOrientationUtil: getRelativeImageRotation: destRotationDegrees=0, sourceRotationDegrees=90, isOppositeFacing=true, result=90\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case Preview:androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634 INACTIVE\nD/UseCaseAttachState: Active and attached use case: [] for camera: 0\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 ACTIVE\nD/UseCaseAttachState: Active and attached use case: [] for camera: 0\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use cases [Preview:androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634, androidx.camera.core.VideoCapture@e6f7d02] now ATTACHED\nD/UseCaseAttachState: All use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\nD/Camera2CameraImpl: mMeteringRepeating is ATTACHED, SessionConfig Surfaces: 2, CaptureConfig Surfaces: 1\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522] for camera: 0\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Resetting Capture Session\nI/Choreographer: Skipped 155 frames!  The application may be doing too much work on its main thread.\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Releasing session in state INITIALIZED\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Attempting to force open the camera.\nD/CameraStateRegistry: tryOpenCamera(Camera@8c15fa0[id=0]) [Available Cameras: 1, Already Open: false (Previous state: CLOSED)] --&gt; SUCCESS\nD/CameraStateRegistry: Recalculating open cameras:\n    Camera                                       State                 \n    -------------------------------------------------------------------\n    Camera@8c15fa0[id=0]                         OPENING               \n    Camera@a436015[id=1]                         UNKNOWN               \n    -------------------------------------------------------------------\n    Open count: 1 (Max allowed: 1)\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Opening camera.\nD/ViewRootImpl@be5fe8f[VideoActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x3 surface={true 3367393280} changed=false\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Transitioning camera internal state: INITIALIZED --&gt; OPENING\nD/CameraStateMachine: New public camera state CameraState{type=OPENING, error=null} from OPENING and null\nD/CameraStateMachine: Publishing new public camera state CameraState{type=OPENING, error=null}\nD/UseCaseAttachState: All use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\nE/Camera_APM:: [APM]APM's Thread is started\nE/Camera_APM:: [APM] This app is forground app\nI/CameraManagerGlobal: postSingleUpdate device: camera id 0 status STATUS_NOT_AVAILABLE\nI/CameraManagerGlobal: postSingleUpdate device: camera id 0 status STATUS_NOT_AVAILABLE\nD/ViewRootImpl@be5fe8f[VideoActivity]: MSG_RESIZED: frame=[0,0][800,1280] ci=[0,32][0,0] vi=[0,32][0,0] or=1\nD/ViewRootImpl@be5fe8f[VideoActivity]: MSG_WINDOW_FOCUS_CHANGED 1 1\nD/InputMethodManager: prepareNavigationBarInfo() DecorView@617251c[VideoActivity]\nD/InputMethodManager: getNavigationBarColor() -855310\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case Preview:androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634 INACTIVE\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522] for camera: 0\nD/InputMethodManager: prepareNavigationBarInfo() DecorView@617251c[VideoActivity]\nD/InputMethodManager: getNavigationBarColor() -855310\nV/InputMethodManager: Starting input: tba=cat.gencat.mossos.camera.test ic=null mNaviBarColor -855310 mIsGetNaviBarColorSuccess true , NavVisible : true , NavTrans : false\nD/InputMethodManager: startInputInner - Id : 0\nI/InputMethodManager: startInputInner - mService.startInputOrWindowGainedFocus\nD/InputTransport: Input channel constructed: fd=119\nD/InputTransport: Input channel destroyed: fd=92\nD/PreviewView: Surface requested by Preview.\nD/SurfaceView: onWindowVisibilityChanged(0) true android.view.SurfaceView{a14e4bd V.E...... ......I. 0,0-0,0} of ViewRootImpl@be5fe8f[VideoActivity]\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 ACTIVE\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522] for camera: 0\nD/ViewRootImpl@be5fe8f[VideoActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x1 surface={true 3367393280} changed=false\nD/SurfaceView: show() Surface(name=SurfaceView - cat.gencat.mossos.camera.test/cat.gencat.mossos.camera.ui._template.activities.VideoActivity@a14e4bd@0[6359])/@0xdad80 android.view.SurfaceView{a14e4bd V.E...... ......ID 0,0-960,720}\nD/SurfaceView: surfaceCreated 1 #8 android.view.SurfaceView{a14e4bd V.E...... ......ID 0,0-960,720}\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case Preview:androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634 ACTIVE\nD/SurfaceViewImpl: Surface created.\nD/SurfaceView: surfaceChanged (960,720) 1 #8 android.view.SurfaceView{a14e4bd V.E...... ......ID 0,0-960,720}\nD/SurfaceViewImpl: Surface changed. Size: 960x720\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\nW/libEGL: EGLNativeWindowType 0xc8c1e808 disconnect failed\nD/OpenGLRenderer: eglDestroySurface = 0xc7e56620, 0xc8c1e800\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} CameraDevice.onOpened()\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Transitioning camera internal state: OPENING --&gt; OPENED\nD/CameraStateRegistry: Recalculating open cameras:\n    Camera                                       State                 \n    -------------------------------------------------------------------\n    Camera@8c15fa0[id=0]                         OPEN                  \n    Camera@a436015[id=1]                         UNKNOWN               \n    -------------------------------------------------------------------\n    Open count: 1 (Max allowed: 1)\nD/CameraStateMachine: New public camera state CameraState{type=OPEN, error=null} from OPEN and null\nD/ViewRootImpl@348be9d[FormActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x5 surface={false 0} changed=true\nD/CameraStateMachine: Publishing new public camera state CameraState{type=OPEN, error=null}\nD/UseCaseAttachState: All use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\nD/PreviewView: Preview transformation info updated. TransformationInfo{cropRect=Rect(0, 0 - 960, 720), rotationDegrees=90, targetRotation=0}\nD/PreviewTransform: Transformation info set: TransformationInfo{cropRect=Rect(0, 0 - 960, 720), rotationDegrees=90, targetRotation=0} 960x720 false\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\nD/SurfaceViewImpl: Surface set on Preview.\nD/ViewRootImpl@348be9d[FormActivity]: stopped(true) old=false\nD/SyncCaptureSessionBase: [androidx.camera.camera2.internal.SynchronizedCaptureSessionBaseImpl@5854ddc] getSurface...done\nD/CaptureSession: Opening capture session.\nD/DeferrableSurface: New surface in use[total_surfaces=2, used_surfaces=1](androidx.camera.core.SurfaceRequest$2@4dc674e}\nD/DeferrableSurface: use count+1, useCount=1 androidx.camera.core.SurfaceRequest$2@4dc674e\nD/DeferrableSurface: New surface in use[total_surfaces=2, used_surfaces=2](androidx.camera.core.impl.ImmediateSurface@3cc7a05}\nD/DeferrableSurface: use count+1, useCount=1 androidx.camera.core.impl.ImmediateSurface@3cc7a05\nD/CaptureSession: Attempting to send capture request onConfigured\nD/CaptureSession: Issuing request for session.\nD/CaptureSession: CameraCaptureSession.onConfigured() mState=OPENED\nD/CaptureSession: CameraCaptureSession.onReady() OPENED\nD/ViewRootImpl@348be9d[FormActivity]: Relayout returned: old=[0,0][800,1280] new=[0,0][800,1280] result=0x1 surface={false 0} changed=false\nD/StreamStateObserver: Update Preview stream state to STREAMING\nW/AMessage: failed to deliver message as target handler 15 is gone.\nW/AMessage: failed to deliver message as target handler 18 is gone.\nD/ViewRootImpl@be5fe8f[VideoActivity]: ViewPostIme pointer 0\nD/ViewRootImpl@be5fe8f[VideoActivity]: ViewPostIme pointer 1\nI/VideoCapture: startRecording\nI/VideoCapture: videoEncoder start\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded-&gt;Idle\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Idle-&gt;Executing\nI/MediaCodec: setCodecState state : 0\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Executing\nI/VideoCapture: audioEncoder start\nI/ACodec: [OMX.google.aac.encoder] Now Loaded-&gt;Idle\nI/ACodec: [OMX.google.aac.encoder] Now Idle-&gt;Executing\nI/ACodec: [OMX.google.aac.encoder] Now Executing\nD/CameraOrientationUtil: getRelativeImageRotation: destRotationDegrees=0, sourceRotationDegrees=90, isOppositeFacing=true, result=90\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 UPDATED\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\nW/VideoCapture: Drops frame, current frame's timestamp 0 is earlier that last frame 0\nD/CaptureSession: Attempting to submit CaptureRequest after setting\nD/CaptureSession: Issuing request for session.\nW/System: A resource failed to call close. \nI/MediaCodec: setCodecState state : 0\nD/ViewRootImpl@be5fe8f[VideoActivity]: ViewPostIme pointer 0\nD/ViewRootImpl@be5fe8f[VideoActivity]: ViewPostIme pointer 1\nI/VideoCapture: stopRecording\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 UPDATED\nI/VideoCapture: audioRecorder stop\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\nI/ACodec: [OMX.google.aac.encoder] Now Executing-&gt;Idle\nI/ACodec: [OMX.google.aac.encoder] Now Idle-&gt;Loaded\n    [OMX.google.aac.encoder] Now Loaded\n     [OMX.google.aac.encoder] Now kWhatShutdownCompleted event : 8600\nI/VideoCapture: Audio encode thread end\nI/MediaCodec: setCodecState state : 1\nI/VideoCapture: videoEncoder stop\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Executing-&gt;Idle\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Idle-&gt;Loaded\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded\n     [OMX.Exynos.AVC.Encoder] Now kWhatShutdownCompleted event : 8600\nD/MPEG4Writer: Audio track stopping. Stop source\nE/MPEG4Writer: Stop() called but track is not started\nI/VideoCapture: Video encode thread end.\nD/CaptureSession: Attempting to submit CaptureRequest after setting\nD/CaptureSession: Issuing request for session.\nI/MediaCodec: setCodecState state : 0\nD/CAMERA::Video: videoSaved\nI/ACodec:  [OMX.Exynos.AVC.Encoder] Now uninitialized\nI/ACodec:  [] Now kWhatShutdownCompleted event : 8600\nI/MediaCodec: Codec shutdown complete\nI/ACodec:  [] Now uninitialized\nI/ACodec: [] onAllocateComponent\nI/OMXClient: IOmx service obtained\nI/ACodec: [OMX.Exynos.AVC.Encoder] Now Loaded\nI/ACodec: app-pid(6359)\nW/OMXUtils: do not know color format 0x7f000011 = 2130706449\nW/OMXUtils: do not know color format 0x10 = 16\n    do not know color format 0x7f00a000 = 2130747392\nW/OMXUtils: do not know color format 0x7f000789 = 2130708361\nI/ACodec: app-name : cat.gencat.mossos.camera.test\nI/ACodec: setupAVCEncoderParameters with [profile: Baseline] [level: Level1]\nI/ACodec: Enable Perceptual Video Coding\n    Success set VideoMinQP(5/5/5) VideoMaxQP(50/50/50)\nI/ACodec: SECSetparameters : default\nI/ACodec: [OMX.Exynos.AVC.Encoder] cannot encode HDR static metadata. Ignoring.\n    setupVideoEncoder succeeded\n    [OMX.Exynos.AVC.Encoder] configure, AMessage : AMessage(what = 'conf', target = 25) = {\n      int32_t color-format = 2130708361\n      int32_t i-frame-interval = 1\n      string mime = &quot;video/avc&quot;\n      int32_t width = 1440\n      int32_t bitrate = 8388608\n      int32_t frame-rate = 30\n      int32_t height = 1080\n      int32_t encoder = 1\n    }\nW/OMXUtils: do not know color format 0x7f000789 = 2130708361\nD/DeferrableSurface: surface closed,  useCount=1 closed=true androidx.camera.core.impl.ImmediateSurface@3cc7a05\nD/DeferrableSurface: Surface created[total_surfaces=3, used_surfaces=2](androidx.camera.core.impl.ImmediateSurface@a82cb55}\nI/ACodec:  [OMX.google.aac.encoder] Now uninitialized\n     [] Now kWhatShutdownCompleted event : 8600\nI/MediaCodec: Codec shutdown complete\nI/ACodec:  [] Now uninitialized\nI/ACodec: [] onAllocateComponent\nI/OMXClient: IOmx service obtained\nI/ACodec: [OMX.google.aac.encoder] Now Loaded\nI/ACodec: app-pid(6359)\nI/VideoCapture: source: 1 audioSampleRate: 8000 channelConfig: 16 audioFormat: 2 bufferSize: 640\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Use case androidx.camera.core.VideoCapture@e6f7d02 RESET\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Resetting Capture Session\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Releasing session in state OPENED\nD/UseCaseAttachState: Active and attached use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\nD/UseCaseAttachState: All use case: [androidx.camera.core.VideoCapture-40c15101-6bc1-46eb-8990-b6602597b276242187522, androidx.camera.core.Preview-1c59a876-f0e2-41bd-95ee-b14ad005c634145149517] for camera: 0\nD/CaptureSession: onSessionFinished()\nD/SyncCaptureSessionBase: [androidx.camera.camera2.internal.SynchronizedCaptureSessionBaseImpl@fce7dd3] getSurface...done\nD/CaptureSession: Opening capture session.\nD/DeferrableSurface: use count+1, useCount=2 androidx.camera.core.SurfaceRequest$2@4dc674e\nD/DeferrableSurface: New surface in use[total_surfaces=3, used_surfaces=3](androidx.camera.core.impl.ImmediateSurface@a82cb55}\nD/DeferrableSurface: use count+1, useCount=1 androidx.camera.core.impl.ImmediateSurface@a82cb55\nW/AMessage: failed to deliver message as target handler 21 is gone.\nW/AMessage: failed to deliver message as target handler 23 is gone.\nE/CameraCaptureSession: Session 1: Failed to create capture session; configuration failed\nD/DeferrableSurface: use count-1,  useCount=1 closed=false androidx.camera.core.SurfaceRequest$2@4dc674e\nD/DeferrableSurface: use count-1,  useCount=0 closed=false androidx.camera.core.impl.ImmediateSurface@a82cb55\nD/DeferrableSurface: Surface no longer in use[total_surfaces=3, used_surfaces=2](androidx.camera.core.impl.ImmediateSurface@a82cb55}\nD/DeferrableSurface: use count-1,  useCount=0 closed=false androidx.camera.core.SurfaceRequest$2@4dc674e\nD/DeferrableSurface: Surface no longer in use[total_surfaces=3, used_surfaces=1](androidx.camera.core.SurfaceRequest$2@4dc674e}\nD/DeferrableSurface: use count-1,  useCount=0 closed=true androidx.camera.core.impl.ImmediateSurface@3cc7a05\nD/DeferrableSurface: Surface no longer in use[total_surfaces=3, used_surfaces=0](androidx.camera.core.impl.ImmediateSurface@3cc7a05}\nD/DeferrableSurface: Surface terminated[total_surfaces=2, used_surfaces=0](androidx.camera.core.impl.ImmediateSurface@3cc7a05}\nE/CaptureSession: CameraCaptureSession.onConfigureFailed() RELEASED\nD/Camera2CameraImpl: CameraDevice.onError(): 0 failed with ERROR_CAMERA_DEVICE while in OPENED state. Will attempt recovering from error.\nD/Camera2CameraImpl: Attempt to reopen camera[0] after error[ERROR_CAMERA_DEVICE]\nD/Camera2CameraImpl: {Camera@8c15fa0[id=0]} Transitioning camera internal state: OPENED --&gt; REOPENING\n\n</code></pre>\n<p>The behavior is random since sometimes happens on the second recording and sometimes I was able to execute more than 10 recordings successfully. This works perfectly on a Samsung with Android 5 but is crashing on a Samsung Tab Active2 with Android 9.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","thrift"],"answers":[{"tags":[],"owner":{"account_id":1867473,"reputation":3093,"user_id":1690657,"accept_rate":90,"display_name":"Alex P."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646420586,"creation_date":1584625901,"answer_id":60758606,"question_id":55262651,"body_markdown":"I came across this problem, when I was using different protocols to serialize and deserialize.\r\n\r\nThe serializer was usind `ObjectMapper` and the deserializer was using `TDeserializer` with `TBinaryProtocol`. Example:\r\n```\r\n@Test\r\npublic void testSerDe() throws TException, JsonProcessingException {\r\n   final Person person = new Person(&quot;Thomas&quot;, Byte.valueOf(&quot;23&quot;));\r\n   JsonSerializer serializer = new JsonSerializer();\r\n   ObjectMapper mapper = new ObjectMapper();\r\n   byte[] serialized = mapper.writeValueAsString(person).getBytes();\r\n   TDeserializer deserializer = new TDeserializer(TBinaryProtocol::new);\r\n   Person desPerson = new Person();\r\n   deserializer.deserialize(desPerson, serialized);\r\n   assertEquals(person, desPerson);\r\n}\r\n```\r\nThat would throw `org.apache.thrift.protocol.TProtocolException: Unrecognized type 123`\r\n\r\nIt should work if you serialize and deserialize the same way. \r\nHere is an example:\r\n```\r\n@Test\r\npublic void testSerDe() throws TException {\r\n   // Given\r\n   final Person person = new Person(&quot;Thomas&quot;, Byte.valueOf(&quot;23&quot;));\r\n   TSerializer serializer = new TSerializer(TBinaryProtocol::new);\r\n   // When\r\n   byte[] serializedPerson = serializer.serialize(person);\r\n   // Then\r\n   TDeserializer deserializer = new TDeserializer(TBinaryProtocol::new);\r\n   GraphEvent dePerson = new Person();\r\n   deserializer.deserialize(dePerson, serializedPerson);\r\n   assertEquals(person, dePerson);\r\n}\r\n```","title":"Thrift Serialization and Deserialization in Kafka Streaming","body":"<p>I came across this problem, when I was using different protocols to serialize and deserialize.</p>\n<p>The serializer was usind <code>ObjectMapper</code> and the deserializer was using <code>TDeserializer</code> with <code>TBinaryProtocol</code>. Example:</p>\n<pre><code>@Test\npublic void testSerDe() throws TException, JsonProcessingException {\n   final Person person = new Person(&quot;Thomas&quot;, Byte.valueOf(&quot;23&quot;));\n   JsonSerializer serializer = new JsonSerializer();\n   ObjectMapper mapper = new ObjectMapper();\n   byte[] serialized = mapper.writeValueAsString(person).getBytes();\n   TDeserializer deserializer = new TDeserializer(TBinaryProtocol::new);\n   Person desPerson = new Person();\n   deserializer.deserialize(desPerson, serialized);\n   assertEquals(person, desPerson);\n}\n</code></pre>\n<p>That would throw <code>org.apache.thrift.protocol.TProtocolException: Unrecognized type 123</code></p>\n<p>It should work if you serialize and deserialize the same way.\nHere is an example:</p>\n<pre><code>@Test\npublic void testSerDe() throws TException {\n   // Given\n   final Person person = new Person(&quot;Thomas&quot;, Byte.valueOf(&quot;23&quot;));\n   TSerializer serializer = new TSerializer(TBinaryProtocol::new);\n   // When\n   byte[] serializedPerson = serializer.serialize(person);\n   // Then\n   TDeserializer deserializer = new TDeserializer(TBinaryProtocol::new);\n   GraphEvent dePerson = new Person();\n   deserializer.deserialize(dePerson, serializedPerson);\n   assertEquals(person, dePerson);\n}\n</code></pre>\n"}],"owner":{"account_id":15569605,"reputation":1,"user_id":11232408,"display_name":"Jay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2000,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646420586,"creation_date":1553090718,"question_id":55262651,"body_markdown":"I am using thrift just to do serialization and deserialization for performance improvement while streaming byte data from kafka\r\n\r\nWhen I deserialize, I keep getting this error:\r\n&gt;org.apache.thrift.protocol.TProtocolException: Unrecognized type 123\r\n    \r\nMy Code\r\n    \r\n    public void streamMessageByte() {\t\r\n    \tfinal StreamsBuilder builder = new StreamsBuilder();\r\n        KStream&lt;Integer, byte[]&gt; stream = builder.stream(kafka_topic);\r\n        deserializer = new TDeserializer();\r\n        serializer = new TSerializer();\r\n        //Thrift class pojo object is &#39;deser&#39; which matches byte array data format\r\n        stream.map((k,v){\r\n    \r\n            try{\r\n                deserializer.deserialize(deser, v);\r\n            }\r\n    \r\n            catch(TException e){\r\n    \r\n            }\r\n        null;\r\n    });\r\n       ","title":"Thrift Serialization and Deserialization in Kafka Streaming","body":"<p>I am using thrift just to do serialization and deserialization for performance improvement while streaming byte data from kafka</p>\n<p>When I deserialize, I keep getting this error:</p>\n<blockquote>\n<p>org.apache.thrift.protocol.TProtocolException: Unrecognized type 123</p>\n</blockquote>\n<p>My Code</p>\n<pre><code>public void streamMessageByte() {   \n    final StreamsBuilder builder = new StreamsBuilder();\n    KStream&lt;Integer, byte[]&gt; stream = builder.stream(kafka_topic);\n    deserializer = new TDeserializer();\n    serializer = new TSerializer();\n    //Thrift class pojo object is 'deser' which matches byte array data format\n    stream.map((k,v){\n\n        try{\n            deserializer.deserialize(deser, v);\n        }\n\n        catch(TException e){\n\n        }\n    null;\n});\n   \n</code></pre>\n"},{"tags":["java","spring","mongodb"],"answers":[{"tags":[],"owner":{"account_id":10536779,"reputation":23,"user_id":7764407,"display_name":"jamiemcd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646420560,"creation_date":1646420560,"answer_id":71356123,"question_id":71351658,"body_markdown":"My Answer was already in the comments of the question I&#39;d linked to *facepalm*.\r\n\r\nI needed to implement `FieldsExposingAggregationOperation` and `FieldsExposingAggregationOperation.InheritsFieldsAggregationOperation`, and provide an override implementation for `public ExposedFields getFields()`.","title":"Java Spring MongoDB Aggregation custom operation field access","body":"<p>My Answer was already in the comments of the question I'd linked to <em>facepalm</em>.</p>\n<p>I needed to implement <code>FieldsExposingAggregationOperation</code> and <code>FieldsExposingAggregationOperation.InheritsFieldsAggregationOperation</code>, and provide an override implementation for <code>public ExposedFields getFields()</code>.</p>\n"}],"owner":{"account_id":10536779,"reputation":23,"user_id":7764407,"display_name":"jamiemcd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646420560,"creation_date":1646398094,"question_id":71351658,"body_markdown":"I&#39;m using Spring to generate a MongoDB pipeline, but want a $lookup operation with its own pipeline that Spring doesn&#39;t support.  I&#39;ve got a specialisation of AggregationOperation (similar to this https://stackoverflow.com/questions/51107626/spring-data-mongodb-lookup-with-pipeline-aggregation) which works, but if I try and do anything with the array I get from the lookup in a later Spring pipeline operation (e.g. unwind) I get an error when trying to run the aggregation that the field is invalid.  If I write the same operation &#39;manually&#39; as a custom pipeline operation, it works. \r\n\r\nI&#39;ve copied the generated pipeline text for both approaches into Compass and they&#39;re identical, so I&#39;m not just making a typo in the naming.  It&#39;s like the field from the custom step isn&#39;t available to the Spring steps.\r\n\r\nHas anyone come across this access issue before?","title":"Java Spring MongoDB Aggregation custom operation field access","body":"<p>I'm using Spring to generate a MongoDB pipeline, but want a $lookup operation with its own pipeline that Spring doesn't support.  I've got a specialisation of AggregationOperation (similar to this <a href=\"https://stackoverflow.com/questions/51107626/spring-data-mongodb-lookup-with-pipeline-aggregation\">Spring Data MongoDB Lookup with Pipeline Aggregation</a>) which works, but if I try and do anything with the array I get from the lookup in a later Spring pipeline operation (e.g. unwind) I get an error when trying to run the aggregation that the field is invalid.  If I write the same operation 'manually' as a custom pipeline operation, it works.</p>\n<p>I've copied the generated pipeline text for both approaches into Compass and they're identical, so I'm not just making a typo in the naming.  It's like the field from the custom step isn't available to the Spring steps.</p>\n<p>Has anyone come across this access issue before?</p>\n"},{"tags":["java","mysql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1646421138,"post_id":71356104,"comment_id":126127195,"body_markdown":"It isn&#39;t clear what you want. Maybe spell out a bit more detail on what you want to happen and what you are doing exactly. What do you think *should* happen when you try to delete option 1? What happens to the contract java instance which still has a reference to that now deleted Option? \nPS, the cascade option only affect what happens to referenced options when you delete a Contract instance. They do not tell or affect what happens when an option is deleted.","body":"It isn&#39;t clear what you want. Maybe spell out a bit more detail on what you want to happen and what you are doing exactly. What do you think <i>should</i> happen when you try to delete option 1? What happens to the contract java instance which still has a reference to that now deleted Option?  PS, the cascade option only affect what happens to referenced options when you delete a Contract instance. They do not tell or affect what happens when an option is deleted."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1646421299,"post_id":71356104,"comment_id":126127236,"body_markdown":"If all you want is to be able to execute a delete operation and damn the consequences - issue a native query to delete from the relation table all rows referencing option 1 before issuing the deleteOptionById query, in the same transaction. Two separate back to back queries in the same method/operation/transaction. Option knows nothing about the constraints referencing it by your own design, so you must find other ways to clean up any errant pointers.","body":"If all you want is to be able to execute a delete operation and damn the consequences - issue a native query to delete from the relation table all rows referencing option 1 before issuing the deleteOptionById query, in the same transaction. Two separate back to back queries in the same method/operation/transaction. Option knows nothing about the constraints referencing it by your own design, so you must find other ways to clean up any errant pointers."},{"owner":{"account_id":24202428,"reputation":11,"user_id":18376331,"display_name":"lol"},"score":0,"creation_date":1646422040,"post_id":71356104,"comment_id":126127456,"body_markdown":"@Chris yeah u got it right all I want is to set constraint to a foreign key (chosenOption_id -&gt; options(id) ) ON DELETE NO ACTION  but its impossible with hibernate, thanks for info about cascade, I&#39;ll try to write my own queries mb will set to null, if it works it would be great","body":"@Chris yeah u got it right all I want is to set constraint to a foreign key (chosenOption_id -&gt; options(id) ) ON DELETE NO ACTION  but its impossible with hibernate, thanks for info about cascade, I&#39;ll try to write my own queries mb will set to null, if it works it would be great"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1646427530,"post_id":71356104,"comment_id":126128929,"body_markdown":"Hibernate/JPA does not allow specifying the ON DELETE cascade option (which is what you really want) on the FK to the Option in the relation table that is generated for the ManyToMany in the database. That is why you shouldn&#39;t rely entirely on such features - get the script and edit it to match what you really want. Adding it to the DB will avoid the need for the manual query when deleting options. But you still have to deal with the inconsistencies of your Java classes. Contact will have options within its collection that may no longer exist, and will cause problems if you attempt to save.","body":"Hibernate/JPA does not allow specifying the ON DELETE cascade option (which is what you really want) on the FK to the Option in the relation table that is generated for the ManyToMany in the database. That is why you shouldn&#39;t rely entirely on such features - get the script and edit it to match what you really want. Adding it to the DB will avoid the need for the manual query when deleting options. But you still have to deal with the inconsistencies of your Java classes. Contact will have options within its collection that may no longer exist, and will cause problems if you attempt to save."},{"owner":{"account_id":24202428,"reputation":11,"user_id":18376331,"display_name":"lol"},"score":0,"creation_date":1646469992,"post_id":71356104,"comment_id":126135203,"body_markdown":"@Chris, thanks for help, I decided to do it in another way so I don&#39;t have to worry about FK","body":"@Chris, thanks for help, I decided to do it in another way so I don&#39;t have to worry about FK"}],"owner":{"account_id":24202428,"reputation":11,"user_id":18376331,"display_name":"lol"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646420404,"creation_date":1646420404,"question_id":71356104,"body_markdown":"I have a problem deleting an entity\r\nI have tariffs their options and contract that saves info about some chosen options (It means that for example tariff has 3 options and contract has to store first and third options), and I want contract to save options permanently or at least don&#39;t fall when I delete option, I use ManyToMany annotation to create table Contract_Options where I can store chosen ones, but I have already tried @OnDelete() and @Cascade and cascade inside @ManyToMany still get error, I DONT WANT to bidirectional relation I mean I want options not to know anything about contracts, here is the code:\r\n\r\nMy Contract entity:\r\n```\r\n@Entity\r\n@Table(name = &quot;contract&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Contract {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(name = &quot;phone_number&quot;)\r\n    private Long phoneNumber;\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;user_id&quot;)\r\n    private User user;\r\n\r\n    @Cascade({org.hibernate.annotations.CascadeType.DELETE})\r\n    @OnDelete(action = OnDeleteAction.NO_ACTION)\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    private List&lt;Options&gt; chosenOptions;\r\n\r\n    @OneToOne(cascade = {CascadeType.REFRESH},fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;tariff_id&quot;)\r\n    private Tariff tariff;\r\n\r\n}\r\n\r\n```\r\n\r\nMy Option Entity\r\n```\r\n\r\n@Entity\r\n@Table(name = &quot;options&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class Options {\r\n\r\n    public Options(int id, String name, OptionType optionType, Double cost, Tariff tariff) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.optionType = optionType;\r\n        this.cost = cost;\r\n        this.tariff = tariff;\r\n    }\r\n\r\n    public Options(String name, OptionType optionType,Double cost, Tariff tariff) {\r\n        this.name = name;\r\n        this.optionType = optionType;\r\n        this.cost = cost;\r\n        this.tariff = tariff;\r\n    }\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;option_type&quot;)\r\n    @Enumerated(EnumType.STRING)\r\n    private OptionType optionType;\r\n\r\n    @Column(name = &quot;cost&quot;)\r\n    private Double cost;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY) //change LAZY if not works\r\n    @JoinColumn(name = &quot;tariff_id&quot;)\r\n    private Tariff tariff;\r\n}\r\n```\r\n\r\n\r\n\r\nJust a simple code in Main.java\r\n\r\n```\r\n\r\n        User user = new User(&quot;log&quot;,&quot;1&quot;,Role.ADMIN);\r\n        userDao.save(user);\r\n        List&lt;Options&gt; options = new ArrayList&lt;&gt;();\r\n\r\n        Tariff tariff = new Tariff();\r\n        options.add(new Options(&quot;da&quot;,OptionType.INTERNET,1D,tariff));\r\n        options.add(new Options(&quot;net&quot;,OptionType.INTERNET,1D,tariff));\r\n\r\n        tariff.setTitle(&quot;tariff&quot;);\r\n        tariff.setCost(1d);\r\n        tariff.setDescription(&quot;ddd&quot;);\r\n        tariff.setOptions(options);\r\n\r\n        tariffDao.addTariff(tariff);\r\n\r\n\r\n        List&lt;Options&gt; updatedOptions = Collections.singletonList(tariffDao.findTariffById(1).getOptions().get(0));\r\n\r\n        Contract contract= new Contract(1,87770011098L,user, updatedOptions,tariff);\r\n\r\n        contractDao.save(contract);\r\n\r\n        Contract contract2= new Contract(2,87770011098L,user, updatedOptions,tariff);\r\n\r\n        contractDao.save(contract2);\r\n\r\n        optionsDao.deleteOptionById(1); //here I get ERROR\r\n\r\n```\r\n\r\nError:\r\n```\r\nHibernate: delete from options where id=?\r\n2022-03-04 21:42:01 WARN  SqlExceptionHelper:129 - SQL Error: 1451, SQLState: 23000\r\n2022-03-04 21:42:01 ERROR SqlExceptionHelper:131 - Cannot delete or update a parent row: a foreign key constraint fails (`javaschooldb`.`contract_options`, CONSTRAINT `FKp6qx4uaj6ow16cj0h3vnyuc8v` FOREIGN KEY (`chosenOptions_id`) REFERENCES `options` (`id`))\r\n2022-03-04 21:42:01 INFO  AbstractBatchImpl:193 - HHH000010: On release of batch it still contained JDBC statements\r\n2022-03-04 21:42:01 ERROR ExceptionMapperStandardImpl:39 - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]\r\nException in thread &quot;main&quot; javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:147)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1434)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:484)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3190)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2404)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:467)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:146)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$100(JdbcResourceLocalTransactionCoordinatorImpl.java:38)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:220)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:68)\r\n\tat ru.javaSchoolProject.dao.OptionsDao.deleteOptionById(OptionsDao.java:35)\r\n\tat Main.main(Main.java:83)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:97)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:207)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:45)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3313)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3550)\r\n\tat org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:99)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:586)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:460)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1428)\r\n\t... 10 more\r\nCaused by: java.sql.SQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`javaschooldb`.`contract_options`, CONSTRAINT `FKp6qx4uaj6ow16cj0h3vnyuc8v` FOREIGN KEY (`chosenOptions_id`) REFERENCES `options` (`id`))\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:974)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1113)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1381)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1046)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:204)\r\n\t... 19 more\r\n\r\n```\r\n\r\nI use hibernate + spring if it&#39;s necessary\r\n\r\nTo sum up the question is at least hoe to get rid of this error, but the wanted result is not to delete chosen option if the parent option is deleted\r\n\r\n","title":"HIBERNATE Unidirectional ManyToMany delete problem","body":"<p>I have a problem deleting an entity\nI have tariffs their options and contract that saves info about some chosen options (It means that for example tariff has 3 options and contract has to store first and third options), and I want contract to save options permanently or at least don't fall when I delete option, I use ManyToMany annotation to create table Contract_Options where I can store chosen ones, but I have already tried @OnDelete() and @Cascade and cascade inside @ManyToMany still get error, I DONT WANT to bidirectional relation I mean I want options not to know anything about contracts, here is the code:</p>\n<p>My Contract entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;contract&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Contract {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name = &quot;phone_number&quot;)\n    private Long phoneNumber;\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;user_id&quot;)\n    private User user;\n\n    @Cascade({org.hibernate.annotations.CascadeType.DELETE})\n    @OnDelete(action = OnDeleteAction.NO_ACTION)\n    @ManyToMany(cascade = CascadeType.ALL)\n    private List&lt;Options&gt; chosenOptions;\n\n    @OneToOne(cascade = {CascadeType.REFRESH},fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;tariff_id&quot;)\n    private Tariff tariff;\n\n}\n\n</code></pre>\n<p>My Option Entity</p>\n<pre><code>\n@Entity\n@Table(name = &quot;options&quot;)\n@Data\n@NoArgsConstructor\npublic class Options {\n\n    public Options(int id, String name, OptionType optionType, Double cost, Tariff tariff) {\n        this.id = id;\n        this.name = name;\n        this.optionType = optionType;\n        this.cost = cost;\n        this.tariff = tariff;\n    }\n\n    public Options(String name, OptionType optionType,Double cost, Tariff tariff) {\n        this.name = name;\n        this.optionType = optionType;\n        this.cost = cost;\n        this.tariff = tariff;\n    }\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;option_type&quot;)\n    @Enumerated(EnumType.STRING)\n    private OptionType optionType;\n\n    @Column(name = &quot;cost&quot;)\n    private Double cost;\n\n    @ManyToOne(fetch = FetchType.LAZY) //change LAZY if not works\n    @JoinColumn(name = &quot;tariff_id&quot;)\n    private Tariff tariff;\n}\n</code></pre>\n<p>Just a simple code in Main.java</p>\n<pre><code>\n        User user = new User(&quot;log&quot;,&quot;1&quot;,Role.ADMIN);\n        userDao.save(user);\n        List&lt;Options&gt; options = new ArrayList&lt;&gt;();\n\n        Tariff tariff = new Tariff();\n        options.add(new Options(&quot;da&quot;,OptionType.INTERNET,1D,tariff));\n        options.add(new Options(&quot;net&quot;,OptionType.INTERNET,1D,tariff));\n\n        tariff.setTitle(&quot;tariff&quot;);\n        tariff.setCost(1d);\n        tariff.setDescription(&quot;ddd&quot;);\n        tariff.setOptions(options);\n\n        tariffDao.addTariff(tariff);\n\n\n        List&lt;Options&gt; updatedOptions = Collections.singletonList(tariffDao.findTariffById(1).getOptions().get(0));\n\n        Contract contract= new Contract(1,87770011098L,user, updatedOptions,tariff);\n\n        contractDao.save(contract);\n\n        Contract contract2= new Contract(2,87770011098L,user, updatedOptions,tariff);\n\n        contractDao.save(contract2);\n\n        optionsDao.deleteOptionById(1); //here I get ERROR\n\n</code></pre>\n<p>Error:</p>\n<pre><code>Hibernate: delete from options where id=?\n2022-03-04 21:42:01 WARN  SqlExceptionHelper:129 - SQL Error: 1451, SQLState: 23000\n2022-03-04 21:42:01 ERROR SqlExceptionHelper:131 - Cannot delete or update a parent row: a foreign key constraint fails (`javaschooldb`.`contract_options`, CONSTRAINT `FKp6qx4uaj6ow16cj0h3vnyuc8v` FOREIGN KEY (`chosenOptions_id`) REFERENCES `options` (`id`))\n2022-03-04 21:42:01 INFO  AbstractBatchImpl:193 - HHH000010: On release of batch it still contained JDBC statements\n2022-03-04 21:42:01 ERROR ExceptionMapperStandardImpl:39 - HHH000346: Error during managed flush [org.hibernate.exception.ConstraintViolationException: could not execute statement]\nException in thread &quot;main&quot; javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:147)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1434)\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:484)\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3190)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2404)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:467)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:146)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$100(JdbcResourceLocalTransactionCoordinatorImpl.java:38)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:220)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:68)\n    at ru.javaSchoolProject.dao.OptionsDao.deleteOptionById(OptionsDao.java:35)\n    at Main.main(Main.java:83)\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:97)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:207)\n    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:45)\n    at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3313)\n    at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3550)\n    at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:99)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:586)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:460)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1428)\n    ... 10 more\nCaused by: java.sql.SQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`javaschooldb`.`contract_options`, CONSTRAINT `FKp6qx4uaj6ow16cj0h3vnyuc8v` FOREIGN KEY (`chosenOptions_id`) REFERENCES `options` (`id`))\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:974)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1113)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1381)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1046)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:204)\n    ... 19 more\n\n</code></pre>\n<p>I use hibernate + spring if it's necessary</p>\n<p>To sum up the question is at least hoe to get rid of this error, but the wanted result is not to delete chosen option if the parent option is deleted</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646419977,"creation_date":1646419977,"answer_id":71356021,"question_id":71356004,"body_markdown":"&gt; I need to keep the variable contents between executions\r\n\r\nThe way to do this is to save the value in a more permanent location such as a file or database.","title":"How to keep contents in variable between the executions (Mojo)","body":"<blockquote>\n<p>I need to keep the variable contents between executions</p>\n</blockquote>\n<p>The way to do this is to save the value in a more permanent location such as a file or database.</p>\n"}],"owner":{"account_id":7210104,"reputation":11,"user_id":5504500,"display_name":"Carlos H."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646419977,"creation_date":1646419869,"question_id":71356004,"body_markdown":"Need some help!\r\n\r\nI need to keep the variable contents between executions (Mojo). Is this possible?\r\n\r\nThis is the variable that I need to keep the content:\r\n\r\n```\r\n@Mojo (name = &quot;genschema&quot;, defaultPhase = LifecyclePhase.COMPILE)\r\npublic class JsonSchemaGen extends AbstractMojo\r\n{\r\n::\r\n::\r\nprivate static final Map&lt;String, ArrayList&lt;String&gt;&gt; hookingElements = new HashMap&lt;&gt;();\r\n```\r\n\r\nThis example of my pom.xml\r\n```\r\n           &lt;plugin&gt;\r\n                &lt;groupId&gt;com.xxx.yyy&lt;/groupId&gt;\r\n                &lt;artifactId&gt;test&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;schema&gt;test.json&lt;/schemaFile&gt;\r\n                          ::\r\n                          ::\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;schemaFile&gt;teste1.json&lt;/schemaFile&gt;\r\n                          ::\r\n                          ::\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;schemaFile&gt;test2.json&lt;/schemaFile&gt;\r\n                          ::\r\n                          ::\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/configuration&gt;\r\n```\r\n\r\n\r\n","title":"How to keep contents in variable between the executions (Mojo)","body":"<p>Need some help!</p>\n<p>I need to keep the variable contents between executions (Mojo). Is this possible?</p>\n<p>This is the variable that I need to keep the content:</p>\n<pre><code>@Mojo (name = &quot;genschema&quot;, defaultPhase = LifecyclePhase.COMPILE)\npublic class JsonSchemaGen extends AbstractMojo\n{\n::\n::\nprivate static final Map&lt;String, ArrayList&lt;String&gt;&gt; hookingElements = new HashMap&lt;&gt;();\n</code></pre>\n<p>This example of my pom.xml</p>\n<pre><code>           &lt;plugin&gt;\n                &lt;groupId&gt;com.xxx.yyy&lt;/groupId&gt;\n                &lt;artifactId&gt;test&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;schema&gt;test.json&lt;/schemaFile&gt;\n                          ::\n                          ::\n                        &lt;/execution&gt;\n                        &lt;execution&gt;\n                            &lt;schemaFile&gt;teste1.json&lt;/schemaFile&gt;\n                          ::\n                          ::\n                        &lt;/execution&gt;\n                        &lt;execution&gt;\n                            &lt;schemaFile&gt;test2.json&lt;/schemaFile&gt;\n                          ::\n                          ::\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/configuration&gt;\n</code></pre>\n"},{"tags":["java","docker","ssl","apache-kafka","kafka-consumer-api"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1646037145,"post_id":71292314,"comment_id":126016773,"body_markdown":"Well ... `NoSuchFileException: /opt/kafka.server.keystore.jks`","body":"Well ... <code>NoSuchFileException: &#47;opt&#47;kafka.server.keystore.jks</code>"},{"owner":{"account_id":24372886,"reputation":69,"user_id":18305578,"display_name":"iq tech"},"score":0,"creation_date":1646038060,"post_id":71292314,"comment_id":126017055,"body_markdown":"But file is already there in opt folder.","body":"But file is already there in opt folder."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1646050219,"post_id":71292314,"comment_id":126020992,"body_markdown":"Prove it? You&#39;ve never mounted any opt folder into the container. `/home/ubuntu` isn&#39;t in the container, either","body":"Prove it? You&#39;ve never mounted any opt folder into the container. <code>&#47;home&#47;ubuntu</code> isn&#39;t in the container, either"},{"owner":{"account_id":24372886,"reputation":69,"user_id":18305578,"display_name":"iq tech"},"score":0,"creation_date":1646284779,"post_id":71292314,"comment_id":126086610,"body_markdown":"How to mount a folder in the container? I have never done it before.","body":"How to mount a folder in the container? I have never done it before."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1646419957,"post_id":71292314,"comment_id":126126834,"body_markdown":"You already did. See `volumes:` at the end of the file? I was saying that `/opt` is not mounted, only `./server_certs` (of your local computer) is mounted into `/certs` (of the container). In other words, `KAFKA_SSL_KEYSTORE_LOCATION: &#39;/opt/kafka.server.keystore.jks` needs changed","body":"You already did. See <code>volumes:</code> at the end of the file? I was saying that <code>&#47;opt</code> is not mounted, only <code>.&#47;server_certs</code> (of your local computer) is mounted into <code>&#47;certs</code> (of the container). In other words, <code>KAFKA_SSL_KEYSTORE_LOCATION: &#39;&#47;opt&#47;kafka.server.keystore.jks</code> needs changed"}],"answers":[{"tags":[],"owner":{"account_id":22470996,"reputation":86,"user_id":16671436,"display_name":"massimo lauri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646419928,"creation_date":1646039252,"answer_id":71292653,"question_id":71292314,"body_markdown":"Change the variable values to use `/certs`\r\n\r\n```\r\nversion: &#39;3&#39;\r\n\r\nservices:\r\n  zookeeper:\r\n    image: wurstmeister/zookeeper\r\n    container_name: zookeeper\r\n    ports:\r\n      - &quot;2181:2181&quot;\r\n\r\n  kafka:\r\n    image: wurstmeister/kafka\r\n    depends_on:\r\n      - zookeeper\r\n    container_name: kafka\r\n    ports:\r\n      - &quot;9092:9092&quot;\r\n    environment:\r\n      KAFKA_ADVERTISED_LISTENERS: &#39;SSL://localhost:9092&#39;\r\n      KAFKA_LISTENERS: &#39;SSL://localhost:9092&#39;\r\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &#39;true&#39;\r\n      KAFKA_ZOOKEEPER_CONNECT: &#39;zookeeper:2181&#39;\r\n      KAFKA_SSL_KEYSTORE_LOCATION: &#39;/certs/kafka.server.keystore.jks&#39;\r\n      KAFKA_SSL_KEYSTORE_PASSWORD: &#39;changeit&#39;\r\n      KAFKA_SSL_KEY_PASSWORD: &#39;changeit&#39;\r\n      KAFKA_SSL_TRUSTSTORE_LOCATION: &#39;/certs/kafka.server.truststore.jks&#39;\r\n      KAFKA_SSL_TRUSTSTORE_PASSWORD: &#39;changeit&#39;\r\n      KAFKA_SECURITY_INTER_BROKER_PROTOCOL: &#39;SSL&#39;\r\n    volumes:\r\n      - ./server_certs:/certs\r\n```\r\n","title":"Kafka docker - NoSuchFileException: /opt/kafka.server.keystore.jks","body":"<p>Change the variable values to use <code>/certs</code></p>\n<pre><code>version: '3'\n\nservices:\n  zookeeper:\n    image: wurstmeister/zookeeper\n    container_name: zookeeper\n    ports:\n      - &quot;2181:2181&quot;\n\n  kafka:\n    image: wurstmeister/kafka\n    depends_on:\n      - zookeeper\n    container_name: kafka\n    ports:\n      - &quot;9092:9092&quot;\n    environment:\n      KAFKA_ADVERTISED_LISTENERS: 'SSL://localhost:9092'\n      KAFKA_LISTENERS: 'SSL://localhost:9092'\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: 'true'\n      KAFKA_ZOOKEEPER_CONNECT: 'zookeeper:2181'\n      KAFKA_SSL_KEYSTORE_LOCATION: '/certs/kafka.server.keystore.jks'\n      KAFKA_SSL_KEYSTORE_PASSWORD: 'changeit'\n      KAFKA_SSL_KEY_PASSWORD: 'changeit'\n      KAFKA_SSL_TRUSTSTORE_LOCATION: '/certs/kafka.server.truststore.jks'\n      KAFKA_SSL_TRUSTSTORE_PASSWORD: 'changeit'\n      KAFKA_SECURITY_INTER_BROKER_PROTOCOL: 'SSL'\n    volumes:\n      - ./server_certs:/certs\n</code></pre>\n"}],"owner":{"account_id":24372886,"reputation":69,"user_id":18305578,"display_name":"iq tech"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3987,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":71292653,"answer_count":1,"score":0,"last_activity_date":1646419928,"creation_date":1646037018,"question_id":71292314,"body_markdown":"I have installed kafka via docker. \r\nWhen i run the docker-compose up command I face following errors:\r\n\r\n```\r\n [2022-02-28 08:13:24,185] INFO Awaiting socket connections on localhost:9092. (kafka.network.Acceptor)\r\n\r\nkafka        | [2022-02-28 08:13:24,216] ERROR Modification time of key store could not be obtained: /opt/kafka.server.keystore.jks (org.apache.kafka.common.security.ssl.DefaultSslEngineFactory)\r\n\r\nkafka        | java.nio.file.NoSuchFileException: /opt/kafka.server.keystore.jks\r\n\r\nkafka        | \tat sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)\r\n\r\nkafka        | \tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\r\n\r\nkafka        | \tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\r\n\r\nkafka        | \tat sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55)\r\n\r\nkafka        | \tat sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144)\r\n\r\nkafka        | \tat sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)\r\n\r\nkafka        | \tat java.nio.file.Files.readAttributes(Files.java:1737)\r\n\r\nkafka        | \tat java.nio.file.Files.getLastModifiedTime(Files.java:2266)\r\n\r\nkafka        | \tat org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$FileBasedStore.lastModifiedMs(DefaultSslEngineFactory.java:383)\r\n\r\nERROR Modification time of key store could not be obtained: /opt/kafka.server.keystore.jks\r\n\r\nFailed to load SSL keystore /opt/kafka.server.keystore.jks of type JKS\r\n```\r\nBelow is my docker-compose.yml file:\r\n```\r\nversion: &#39;3&#39;\r\n\r\nservices:\r\n  zookeeper:\r\n    image: wurstmeister/zookeeper\r\n    container_name: zookeeper\r\n    ports:\r\n      - &quot;2181:2181&quot;\r\n\r\n  kafka:\r\n    image: wurstmeister/kafka\r\n    depends_on:\r\n      - zookeeper\r\n    container_name: kafka\r\n    ports:\r\n      - &quot;9092:9092&quot;\r\n    environment:\r\n      KAFKA_ADVERTISED_LISTENERS: &#39;SSL://localhost:9092&#39;\r\n      KAFKA_LISTENERS: &#39;SSL://localhost:9092&#39;\r\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &#39;true&#39;\r\n      KAFKA_ZOOKEEPER_CONNECT: &#39;zookeeper:2181&#39;\r\n      KAFKA_SSL_KEYSTORE_LOCATION: &#39;/opt/kafka.server.keystore.jks&#39;\r\n      KAFKA_SSL_KEYSTORE_PASSWORD: &#39;changeit&#39;\r\n      KAFKA_SSL_KEY_PASSWORD: &#39;changeit&#39;\r\n      KAFKA_SSL_TRUSTSTORE_LOCATION: &#39;/home/ubuntu/kafka.server.truststore.jks&#39;\r\n      KAFKA_SSL_TRUSTSTORE_PASSWORD: &#39;changeit&#39;\r\n      KAFKA_SECURITY_INTER_BROKER_PROTOCOL: &#39;SSL&#39;\r\n    volumes:\r\n      - ./server_certs:/certs\r\n","title":"Kafka docker - NoSuchFileException: /opt/kafka.server.keystore.jks","body":"<p>I have installed kafka via docker.\nWhen i run the docker-compose up command I face following errors:</p>\n<pre><code> [2022-02-28 08:13:24,185] INFO Awaiting socket connections on localhost:9092. (kafka.network.Acceptor)\n\nkafka        | [2022-02-28 08:13:24,216] ERROR Modification time of key store could not be obtained: /opt/kafka.server.keystore.jks (org.apache.kafka.common.security.ssl.DefaultSslEngineFactory)\n\nkafka        | java.nio.file.NoSuchFileException: /opt/kafka.server.keystore.jks\n\nkafka        |  at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)\n\nkafka        |  at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\n\nkafka        |  at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\n\nkafka        |  at sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55)\n\nkafka        |  at sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144)\n\nkafka        |  at sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)\n\nkafka        |  at java.nio.file.Files.readAttributes(Files.java:1737)\n\nkafka        |  at java.nio.file.Files.getLastModifiedTime(Files.java:2266)\n\nkafka        |  at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$FileBasedStore.lastModifiedMs(DefaultSslEngineFactory.java:383)\n\nERROR Modification time of key store could not be obtained: /opt/kafka.server.keystore.jks\n\nFailed to load SSL keystore /opt/kafka.server.keystore.jks of type JKS\n</code></pre>\n<p>Below is my docker-compose.yml file:</p>\n<pre><code>version: '3'\n\nservices:\n  zookeeper:\n    image: wurstmeister/zookeeper\n    container_name: zookeeper\n    ports:\n      - &quot;2181:2181&quot;\n\n  kafka:\n    image: wurstmeister/kafka\n    depends_on:\n      - zookeeper\n    container_name: kafka\n    ports:\n      - &quot;9092:9092&quot;\n    environment:\n      KAFKA_ADVERTISED_LISTENERS: 'SSL://localhost:9092'\n      KAFKA_LISTENERS: 'SSL://localhost:9092'\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: 'true'\n      KAFKA_ZOOKEEPER_CONNECT: 'zookeeper:2181'\n      KAFKA_SSL_KEYSTORE_LOCATION: '/opt/kafka.server.keystore.jks'\n      KAFKA_SSL_KEYSTORE_PASSWORD: 'changeit'\n      KAFKA_SSL_KEY_PASSWORD: 'changeit'\n      KAFKA_SSL_TRUSTSTORE_LOCATION: '/home/ubuntu/kafka.server.truststore.jks'\n      KAFKA_SSL_TRUSTSTORE_PASSWORD: 'changeit'\n      KAFKA_SECURITY_INTER_BROKER_PROTOCOL: 'SSL'\n    volumes:\n      - ./server_certs:/certs\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646419546,"creation_date":1646418210,"answer_id":71355721,"question_id":71355631,"body_markdown":"You need to override the `isEmpty` method on the respective sub classes, and then it&#39;s clear to which collection they refer:\r\n\r\n```\r\nclass MyList extends Container {\r\n    public MyList() {\r\n        list = new Object[ORIGINAL_SIZE];\r\n        size = 0; \r\n    }\r\n\r\n    @Override\r\n    public boolean isEmpty() {\r\n        return size &gt; 0;\r\n    }\r\n} \r\n```\r\n\r\nHere you need to maintain the `size` variable each time you modify (add to or remove from) the list.\r\n\r\n(Same for the set implementation, just using `set` instead of `list`.)\r\n\r\nThe whole thing is a bit of a weird class design. The `Container` base class should not have `list` and `set`, these should be in the respective child classes `MyList` and `MySet`, so that everything is defined where it&#39;s used (only).\r\n","title":"How does the method know what array need to be checked?","body":"<p>You need to override the <code>isEmpty</code> method on the respective sub classes, and then it's clear to which collection they refer:</p>\n<pre><code>class MyList extends Container {\n    public MyList() {\n        list = new Object[ORIGINAL_SIZE];\n        size = 0; \n    }\n\n    @Override\n    public boolean isEmpty() {\n        return size &gt; 0;\n    }\n} \n</code></pre>\n<p>Here you need to maintain the <code>size</code> variable each time you modify (add to or remove from) the list.</p>\n<p>(Same for the set implementation, just using <code>set</code> instead of <code>list</code>.)</p>\n<p>The whole thing is a bit of a weird class design. The <code>Container</code> base class should not have <code>list</code> and <code>set</code>, these should be in the respective child classes <code>MyList</code> and <code>MySet</code>, so that everything is defined where it's used (only).</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646419353,"creation_date":1646419353,"answer_id":71355926,"question_id":71355631,"body_markdown":"You don&#39;t need to check either container. Override the `isEmpty()` method in both classes to check the `size` field. As elements are added or removed to either array, increment or decrement the `size` accordingly.","title":"How does the method know what array need to be checked?","body":"<p>You don't need to check either container. Override the <code>isEmpty()</code> method in both classes to check the <code>size</code> field. As elements are added or removed to either array, increment or decrement the <code>size</code> accordingly.</p>\n"}],"owner":{"account_id":21990387,"reputation":7,"user_id":16263896,"display_name":"Patuqueso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1646419546,"creation_date":1646417699,"question_id":71355631,"body_markdown":"If I have 2 classes that extend from this container class, one that can only alter the list container and the other that can only alter the set container. How would the isEmpty() method be able to know which container to check? This is a lab for class so I&#39;m not allowed to change any of the code already given to me.\r\n\r\n    public class Container {\r\n\t    // Do not change the value of the following constants.\r\n\t    protected final int ORIGINAL_SIZE = 10; \r\n\t    protected Object[] list; // is a container that stores the element of MyList\r\n\t    protected Object[] set; // is a container that stores the element of MySet\r\n\t    protected int size; // this variable holds the actual number of elements that are stored in either of the containers (i.e. MyList or MySet).\r\n\r\n\t    /**\r\n\t    * This method returns true if the container is empty.\r\n\t    * @return It returns true if the container is empty, otherwise false.\r\n\t    */\r\n\t    boolean isEmpty() {\r\n\t\t\r\n\t\treturn true;\r\n  \t    }\r\n    }\r\n\r\n\r\n    class MyList extends Container{\r\n\t\r\n\t    public MyList () {\r\n\t\t    list= new Object[ORIGINAL_SIZE];\r\n\t\t    size = 0; \r\n\t    }\r\n    } \r\n\r\n    class MySet extends Container{\r\n\t    \r\n        public MySet() {\r\n\t\t    set = new Object[ORIGINAL_SIZE];\r\n\t\t    size = 0; \r\n\t    }\r\n    }","title":"How does the method know what array need to be checked?","body":"<p>If I have 2 classes that extend from this container class, one that can only alter the list container and the other that can only alter the set container. How would the isEmpty() method be able to know which container to check? This is a lab for class so I'm not allowed to change any of the code already given to me.</p>\n<pre><code>public class Container {\n    // Do not change the value of the following constants.\n    protected final int ORIGINAL_SIZE = 10; \n    protected Object[] list; // is a container that stores the element of MyList\n    protected Object[] set; // is a container that stores the element of MySet\n    protected int size; // this variable holds the actual number of elements that are stored in either of the containers (i.e. MyList or MySet).\n\n    /**\n    * This method returns true if the container is empty.\n    * @return It returns true if the container is empty, otherwise false.\n    */\n    boolean isEmpty() {\n    \n    return true;\n    }\n}\n\n\nclass MyList extends Container{\n\n    public MyList () {\n        list= new Object[ORIGINAL_SIZE];\n        size = 0; \n    }\n} \n\nclass MySet extends Container{\n    \n    public MySet() {\n        set = new Object[ORIGINAL_SIZE];\n        size = 0; \n    }\n}\n</code></pre>\n"},{"tags":["java","random"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1646417964,"post_id":71355649,"comment_id":126126223,"body_markdown":"It&#39;s &quot;approximately uniform&quot; according to the API docs. The best approach would be to test the Java you&#39;re using.","body":"It&#39;s &quot;approximately uniform&quot; according to the API docs. The best approach would be to test the Java you&#39;re using."}],"answers":[{"tags":[],"owner":{"account_id":1394089,"reputation":40460,"user_id":1424875,"accept_rate":86,"display_name":"nanofarad"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1646419331,"creation_date":1646418116,"answer_id":71355703,"question_id":71355649,"body_markdown":"This is documented in the [Java SE API docs](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Math.html#random()):\r\n\r\n&gt; `public static double random()`\r\n&gt;\r\n&gt; Returns a double value with a positive sign, greater than or equal to 0.0 and less than 1.0. Returned values are chosen pseudorandomly with (approximately) uniform distribution from that range.\r\n\r\nThe doc goes on to mention that it uses `java.util.Random` under the hood, presumably nextDouble() (although not explicitly stated).\r\n\r\nThe remarks about nonuniformity in [nextDouble](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Random.html#nextDouble()) are as follows:\r\n\r\n&gt; The method nextDouble is implemented by class Random as if by:\r\n&gt; \r\n&gt; ``` \r\n&gt;  public double nextDouble() {\r\n&gt;    return (((long)next(26) &lt;&lt; 27) + next(27))\r\n&gt;      / (double)(1L &lt;&lt; 53);\r\n&gt;  }\r\n&gt; ```\r\n&gt; \r\n&gt; The hedge &quot;approximately&quot; is used in the foregoing description only because the next method is only approximately an unbiased source of independently chosen bits. If it were a perfect source of randomly chosen bits, then the algorithm shown would choose double values from the stated range with perfect uniformity.\r\n\r\nIt appears that the non-uniformity is only due to the underlying nonuniformity of `next` rather than a significant bias in the nextDouble algorithm itself:\r\n\r\n&gt; [In early versions of Java, the result was incorrectly calculated as:\r\n&gt; \r\n&gt; ```\r\n&gt;   return (((long)next(27) &lt;&lt; 27) + next(27))\r\n&gt;      / (double)(1L &lt;&lt; 54);\r\n&gt; ```\r\n&gt;\r\n&gt; This might seem to be equivalent, if not better, but in fact it \r\n&gt; introduced a large nonuniformity because of the bias in the rounding of floating-point numbers: it was three times as likely that the low-order bit of the significand would be 0 than that it would be 1! This nonuniformity probably doesn&#39;t matter much in practice, but we strive for perfection.]\r\n\r\nNote that this draws uniformly from the interval [0,1] separated into equal steps of 2&lt;sup&gt;-53&lt;/sup&gt;, which is ***not*** the same as drawing uniformly from the set of all `double` values whose values are between 0 and 1. This is a subtle difference:  the set of all `double` values between 0 and 1 is itself not uniformly spaced on the number line as this image shows:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n&lt;sup&gt;image reproduced from [docs.oracle.com](https://docs.oracle.com/cd/E19957-01/806-3568/ncg_math.html)&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kEXj2.png","title":"What is the distribution of math.random in Java?","body":"<p>This is documented in the <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Math.html#random()\" rel=\"noreferrer\">Java SE API docs</a>:</p>\n<blockquote>\n<p><code>public static double random()</code></p>\n<p>Returns a double value with a positive sign, greater than or equal to 0.0 and less than 1.0. Returned values are chosen pseudorandomly with (approximately) uniform distribution from that range.</p>\n</blockquote>\n<p>The doc goes on to mention that it uses <code>java.util.Random</code> under the hood, presumably nextDouble() (although not explicitly stated).</p>\n<p>The remarks about nonuniformity in <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Random.html#nextDouble()\" rel=\"noreferrer\">nextDouble</a> are as follows:</p>\n<blockquote>\n<p>The method nextDouble is implemented by class Random as if by:</p>\n<pre><code> public double nextDouble() {\n   return (((long)next(26) &lt;&lt; 27) + next(27))\n     / (double)(1L &lt;&lt; 53);\n }\n</code></pre>\n<p>The hedge &quot;approximately&quot; is used in the foregoing description only because the next method is only approximately an unbiased source of independently chosen bits. If it were a perfect source of randomly chosen bits, then the algorithm shown would choose double values from the stated range with perfect uniformity.</p>\n</blockquote>\n<p>It appears that the non-uniformity is only due to the underlying nonuniformity of <code>next</code> rather than a significant bias in the nextDouble algorithm itself:</p>\n<blockquote>\n<p>[In early versions of Java, the result was incorrectly calculated as:</p>\n<pre><code>  return (((long)next(27) &lt;&lt; 27) + next(27))\n     / (double)(1L &lt;&lt; 54);\n</code></pre>\n<p>This might seem to be equivalent, if not better, but in fact it\nintroduced a large nonuniformity because of the bias in the rounding of floating-point numbers: it was three times as likely that the low-order bit of the significand would be 0 than that it would be 1! This nonuniformity probably doesn't matter much in practice, but we strive for perfection.]</p>\n</blockquote>\n<p>Note that this draws uniformly from the interval [0,1] separated into equal steps of 2<sup>-53</sup>, which is <em><strong>not</strong></em> the same as drawing uniformly from the set of all <code>double</code> values whose values are between 0 and 1. This is a subtle difference:  the set of all <code>double</code> values between 0 and 1 is itself not uniformly spaced on the number line as this image shows:</p>\n<p><a href=\"https://i.stack.imgur.com/kEXj2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kEXj2.png\" alt=\"enter image description here\" /></a></p>\n<p><sup>image reproduced from <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_math.html\" rel=\"noreferrer\">docs.oracle.com</a></sup></p>\n"}],"owner":{"account_id":222722,"reputation":2329,"user_id":2135941,"accept_rate":75,"display_name":"SanThee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":6,"up_vote_count":3,"accepted_answer_id":71355703,"answer_count":1,"score":-3,"last_activity_date":1646419331,"creation_date":1646417783,"question_id":71355649,"body_markdown":"I want to use math.random() in a Java program.\r\n\r\nWhat is the distribution of this way of getting doubles?","title":"What is the distribution of math.random in Java?","body":"<p>I want to use math.random() in a Java program.</p>\n<p>What is the distribution of this way of getting doubles?</p>\n"},{"tags":["java","spring-boot","spring-boot-devtools"],"answers":[{"tags":[],"owner":{"account_id":11873056,"reputation":306,"user_id":9594085,"display_name":"Fernando Cappi"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1575914439,"creation_date":1528325227,"answer_id":50730655,"question_id":50465170,"body_markdown":"Since they are generated classes you have to exclude them from Spring Devtools &quot;restart&quot; classloader.\r\n\r\n 1. Create a `/src/main/resources/META-INF/spring-devtools.properties` file\r\n 2. Add properties like `restart.exclude.*` to exclude classes from restart classloader (example, you can use `restart.exclude.mygeneratedclasses=/*[generated]*.class` to exclude all classes with `generated` word as part of package or class name)\r\n\r\n 3. Done. Now you can use devtools and have no issues with WS generated classes.\r\n\r\nReference:\r\n\r\n[1] https://github.com/spring-projects/spring-boot/issues/4529\r\n\r\n[2] https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html#using-boot-devtools-customizing-classload","title":"java.lang.IllegalArgumentException referenced from a method is not visible from class loader","body":"<p>Since they are generated classes you have to exclude them from Spring Devtools \"restart\" classloader.</p>\n\n<ol>\n<li>Create a <code>/src/main/resources/META-INF/spring-devtools.properties</code> file</li>\n<li><p>Add properties like <code>restart.exclude.*</code> to exclude classes from restart classloader (example, you can use <code>restart.exclude.mygeneratedclasses=/*[generated]*.class</code> to exclude all classes with <code>generated</code> word as part of package or class name)</p></li>\n<li><p>Done. Now you can use devtools and have no issues with WS generated classes.</p></li>\n</ol>\n\n<p>Reference:</p>\n\n<p>[1] <a href=\"https://github.com/spring-projects/spring-boot/issues/4529\" rel=\"noreferrer\">https://github.com/spring-projects/spring-boot/issues/4529</a></p>\n\n<p>[2] <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html#using-boot-devtools-customizing-classload\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html#using-boot-devtools-customizing-classload</a></p>\n"},{"tags":[],"owner":{"account_id":1125613,"reputation":18964,"user_id":1112963,"accept_rate":59,"display_name":"Zon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1646418984,"creation_date":1646418984,"answer_id":71355858,"question_id":50465170,"body_markdown":"Or simply remove a Spring Dev Tools dependency if this is won&#39;t affect your application:\r\n\r\n    \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"java.lang.IllegalArgumentException referenced from a method is not visible from class loader","body":"<p>Or simply remove a Spring Dev Tools dependency if this is won't affect your application:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n  &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":7195313,"reputation":187,"user_id":5494345,"display_name":" "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13327,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":50730655,"answer_count":2,"score":17,"last_activity_date":1646418984,"creation_date":1526984116,"question_id":50465170,"body_markdown":"I obtained an exception when generated a stub for a WS service by wsimport in /target/class/..... and run a spring boot application with devtools.\r\n\r\n&gt; Caused by: java.lang.IllegalArgumentException: com....Service referenced from a method is not visible from class loader\r\n\r\nI found that an issue with spring devtools class loader, **RestartClassLoader**, because of two different references to a Class (**RestartClassLoader and AppClassLoader**)\r\n\r\n    private static void ensureVisible(ClassLoader ld, Class&lt;?&gt; c) {\r\n        Class&lt;?&gt; type = null;\r\n        try {\r\n            type = Class.forName(c.getName(), false, ld);\r\n        } catch (ClassNotFoundException e) {\r\n            if (type != c) {\r\n                throw new IllegalArgumentException(c.getName() +\r\n                        &quot; referenced from a method is not visible from class loader&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nI was trying to add a reference to a jar file in spring-devtools.properties to restart.include=/.....jar\r\n\r\n&gt; Spring Boot 2.0.0.RELEASE Java 9\r\n ","title":"java.lang.IllegalArgumentException referenced from a method is not visible from class loader","body":"<p>I obtained an exception when generated a stub for a WS service by wsimport in /target/class/..... and run a spring boot application with devtools.</p>\n\n<blockquote>\n  <p>Caused by: java.lang.IllegalArgumentException: com....Service referenced from a method is not visible from class loader</p>\n</blockquote>\n\n<p>I found that an issue with spring devtools class loader, <strong>RestartClassLoader</strong>, because of two different references to a Class (<strong>RestartClassLoader and AppClassLoader</strong>)</p>\n\n<pre><code>private static void ensureVisible(ClassLoader ld, Class&lt;?&gt; c) {\n    Class&lt;?&gt; type = null;\n    try {\n        type = Class.forName(c.getName(), false, ld);\n    } catch (ClassNotFoundException e) {\n        if (type != c) {\n            throw new IllegalArgumentException(c.getName() +\n                    \" referenced from a method is not visible from class loader\");\n        }\n    }\n}\n</code></pre>\n\n<p>I was trying to add a reference to a jar file in spring-devtools.properties to restart.include=/.....jar</p>\n\n<blockquote>\n  <p>Spring Boot 2.0.0.RELEASE Java 9</p>\n</blockquote>\n"},{"tags":["java","arraylist","comparator"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1509208318,"post_id":46991966,"comment_id":80930479,"body_markdown":"`String` **is** an `Object`. What have you tried (exactly)? Let&#39;s see some code.","body":"<code>String</code> <b>is</b> an <code>Object</code>. What have you tried (exactly)? Let&#39;s see some code."},{"owner":{"account_id":12047692,"reputation":43,"user_id":8812038,"display_name":"Mouthful OfTech"},"score":0,"creation_date":1509208780,"post_id":46991966,"comment_id":80930619,"body_markdown":"`private static ArrayList&lt;String&gt; allCodes = new ArrayList&lt;String&gt;();   //add some codes in ....\n private void sortAllCodesNumbers (){\n        Collections.sort(allCodes, allCodes.getCompByNum());\n    } `","body":"<code>private static ArrayList&lt;String&gt; allCodes = new ArrayList&lt;String&gt;();   &#47;&#47;add some codes in ....  private void sortAllCodesNumbers (){         Collections.sort(allCodes, allCodes.getCompByNum());     } </code>"},{"owner":{"account_id":12047692,"reputation":43,"user_id":8812038,"display_name":"Mouthful OfTech"},"score":0,"creation_date":1509208928,"post_id":46991966,"comment_id":80930674,"body_markdown":"`public static Comparator&lt;String&gt; getCompByNum()\n{\n Comparator comp = new Comparator&lt;String&gt;(){\n     @Override\n     public int compare(allBooks b1, allBooks b2)\n     {\n         String IDnumbers1 = b1.substring(AUTHOR_ID_LENGHT+GENRE_LENGTH);\n         int number1 = Integer.parseInt(IDnumbers1);\n\n         String IDnumbers2 = b2.substring(AUTHOR_ID_LENGHT+GENRE_LENGTH);\n         int number2 = Integer.parseInt(IDnumbers1);\n\n         return number1.compareTo(number2);\n     }\n };\n return comp;\n}`","body":"<code>public static Comparator&lt;String&gt; getCompByNum() {  Comparator comp = new Comparator&lt;String&gt;(){      @Override      public int compare(allBooks b1, allBooks b2)      {          String IDnumbers1 = b1.substring(AUTHOR_ID_LENGHT+GENRE_LENGTH);          int number1 = Integer.parseInt(IDnumbers1);           String IDnumbers2 = b2.substring(AUTHOR_ID_LENGHT+GENRE_LENGTH);          int number2 = Integer.parseInt(IDnumbers1);           return number1.compareTo(number2);      }  };  return comp; }</code>"},{"owner":{"account_id":10759610,"reputation":12628,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1509209002,"post_id":46991966,"comment_id":80930693,"body_markdown":"Variant of https://stackoverflow.com/questions/16425127/how-to-use-collections-sort-in-java-specific-situation ?","body":"Variant of <a href=\"https://stackoverflow.com/questions/16425127/how-to-use-collections-sort-in-java-specific-situation\" title=\"how to use collections sort in java specific situation\">stackoverflow.com/questions/16425127/&hellip;</a> ?"},{"owner":{"account_id":3053788,"reputation":3379,"user_id":2587867,"accept_rate":58,"display_name":"ASR"},"score":0,"creation_date":1509209513,"post_id":46991966,"comment_id":80930881,"body_markdown":"check this:List&lt;String&gt; list= new ArrayList&lt;String&gt;();\n\t\tlist.add(&quot;abc456&quot;);\n\t\tlist.add(&quot;abc123&quot;);\n\t\tlist.add(&quot;abc012&quot;);\n\t\tSystem.out.println(list);\n\t\tCollections.sort(list);\n\t\tSystem.out.println(list); output:[abc456, abc123, abc012]\n[abc012, abc123, abc456]","body":"check this:List&lt;String&gt; list= new ArrayList&lt;String&gt;(); \t\tlist.add(&quot;abc456&quot;); \t\tlist.add(&quot;abc123&quot;); \t\tlist.add(&quot;abc012&quot;); \t\tSystem.out.println(list); \t\tCollections.sort(list); \t\tSystem.out.println(list); output:[abc456, abc123, abc012] [abc012, abc123, abc456]"}],"answers":[{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1509210010,"creation_date":1509208586,"answer_id":46992039,"question_id":46991966,"body_markdown":"This is one way to accomplish your task; `sorted` accepts a `Comparator` object.\r\n\r\n    List&lt;String&gt; result = myArrayList.stream().sorted(Comparator.comparingInt(e -&gt; Integer.parseInt(e.substring(5))))\r\n                                              .collect(Collectors.toList());\r\n\r\nor simply:\r\n\r\n    myArrayList.sort(Comparator.comparingInt(e -&gt; Integer.parseInt(e.substring(5))));","title":"Java: ArrayList&lt;String&gt; sorting using comparators (ArrayLists doesn&#39;t store objects)","body":"<p>This is one way to accomplish your task; <code>sorted</code> accepts a <code>Comparator</code> object.</p>\n\n<pre><code>List&lt;String&gt; result = myArrayList.stream().sorted(Comparator.comparingInt(e -&gt; Integer.parseInt(e.substring(5))))\n                                          .collect(Collectors.toList());\n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>myArrayList.sort(Comparator.comparingInt(e -&gt; Integer.parseInt(e.substring(5))));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10759610,"reputation":12628,"user_id":7916438,"display_name":"tevemadar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1509209767,"creation_date":1509209767,"answer_id":46992236,"question_id":46991966,"body_markdown":"Collections.sort can sort you a list with a Comparator. Plus you need String.substring:\r\n\r\n    Collections.sort(list, new Comparator&lt;String&gt;(){\r\n        @Override\r\n        public int compare(String o1, String o2) {\r\n            return o1.substring(5).compareTo(o2.substring(5));\r\n        }\r\n    });\r\n","title":"Java: ArrayList&lt;String&gt; sorting using comparators (ArrayLists doesn&#39;t store objects)","body":"<p>Collections.sort can sort you a list with a Comparator. Plus you need String.substring:</p>\n\n<pre><code>Collections.sort(list, new Comparator&lt;String&gt;(){\n    @Override\n    public int compare(String o1, String o2) {\n        return o1.substring(5).compareTo(o2.substring(5));\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7405841,"reputation":897,"user_id":5634808,"display_name":"Amos Kosgei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646418230,"creation_date":1646418230,"answer_id":71355726,"question_id":46991966,"body_markdown":"    Collections.sort(list, String::compareTo);\r\n\r\nThe above code does the job.\r\n\r\nIf you want more control, you could use/chain with one of the static methods available in the Comparator Interface.\r\n\r\n    Collectios.sort(list, Comparator.comparing(String::CompareTo).thenComparingInt(String::length));","title":"Java: ArrayList&lt;String&gt; sorting using comparators (ArrayLists doesn&#39;t store objects)","body":"<pre><code>Collections.sort(list, String::compareTo);\n</code></pre>\n<p>The above code does the job.</p>\n<p>If you want more control, you could use/chain with one of the static methods available in the Comparator Interface.</p>\n<pre><code>Collectios.sort(list, Comparator.comparing(String::CompareTo).thenComparingInt(String::length));\n</code></pre>\n"}],"owner":{"account_id":12047692,"reputation":43,"user_id":8812038,"display_name":"Mouthful OfTech"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1504,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46992039,"answer_count":3,"score":1,"last_activity_date":1646418230,"creation_date":1509208165,"question_id":46991966,"body_markdown":"I want to sort an ArrayList of type String using a comparator. I have only found examples on how to do it if an ArrayList stores objects.\r\n\r\nI have an ArrayList of strings that have 10 symbols and last 5 of those symbols are digits that form a number. I want to solve an array list in ascending order of those numbers that are at the end of each string. How can I do that?\r\n\r\nThanks! ","title":"Java: ArrayList&lt;String&gt; sorting using comparators (ArrayLists doesn&#39;t store objects)","body":"<p>I want to sort an ArrayList of type String using a comparator. I have only found examples on how to do it if an ArrayList stores objects.</p>\n\n<p>I have an ArrayList of strings that have 10 symbols and last 5 of those symbols are digits that form a number. I want to solve an array list in ascending order of those numbers that are at the end of each string. How can I do that?</p>\n\n<p>Thanks! </p>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1646418656,"post_id":71355550,"comment_id":126126437,"body_markdown":"AFAIK Gradle already does artifact caching and won&#39;t build again if everything is up to date. It already defines compile and probably run steps. If you hook your run task up correctly in the Gradle life cycle, it should work out of the box. What problems are you seeing? Can you include your build script?","body":"AFAIK Gradle already does artifact caching and won&#39;t build again if everything is up to date. It already defines compile and probably run steps. If you hook your run task up correctly in the Gradle life cycle, it should work out of the box. What problems are you seeing? Can you include your build script?"}],"owner":{"account_id":367482,"reputation":2798,"user_id":713711,"accept_rate":31,"display_name":"Pinch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1646417187,"creation_date":1646417187,"question_id":71355550,"body_markdown":"Is it possible to split a &quot;gradle run&quot; task into a compile task and a run task, so that subsequent runs will invoke the same compiled binaries (jar Java) for consistency.","title":"Gradle compile and run","body":"<p>Is it possible to split a &quot;gradle run&quot; task into a compile task and a run task, so that subsequent runs will invoke the same compiled binaries (jar Java) for consistency.</p>\n"},{"tags":["java","file-extension","magic-numbers"],"comments":[{"owner":{"account_id":5863496,"reputation":8458,"user_id":4618331,"display_name":"Sam"},"score":0,"creation_date":1482049434,"post_id":41206540,"comment_id":69612306,"body_markdown":"Could you clarify what you mean by &quot;print the extension files by use in magic number&quot;?","body":"Could you clarify what you mean by &quot;print the extension files by use in magic number&quot;?"},{"owner":{"account_id":996763,"reputation":2058,"user_id":1012506,"accept_rate":82,"display_name":"user1012506"},"score":0,"creation_date":1482049909,"post_id":41206540,"comment_id":69612397,"body_markdown":"I want to control the file types, but I don&#39;t want use mime type, or  getContentType() function, I want  use only magic number (comes from the first bytes of the input stream)","body":"I want to control the file types, but I don&#39;t want use mime type, or  getContentType() function, I want  use only magic number (comes from the first bytes of the input stream)"},{"owner":{"account_id":5863496,"reputation":8458,"user_id":4618331,"display_name":"Sam"},"score":3,"creation_date":1482050226,"post_id":41206540,"comment_id":69612452,"body_markdown":"Possible duplicate of [Getting A File&#39;s Mime Type In Java](http://stackoverflow.com/questions/51438/getting-a-files-mime-type-in-java)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/51438/getting-a-files-mime-type-in-java\">Getting A File&#39;s Mime Type In Java</a>"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1482064837,"post_id":41206540,"comment_id":69615534,"body_markdown":"A lot of file types don&#39;t have a magic number.","body":"A lot of file types don&#39;t have a magic number."},{"owner":{"account_id":996763,"reputation":2058,"user_id":1012506,"accept_rate":82,"display_name":"user1012506"},"score":0,"creation_date":1482131639,"post_id":41206540,"comment_id":69633438,"body_markdown":"Ho, yes? also simple types like JPEG,PNG,GIF ,PDF,XLS?  Have you a goog link for example code? thank a lot","body":"Ho, yes? also simple types like JPEG,PNG,GIF ,PDF,XLS?  Have you a goog link for example code? thank a lot"},{"owner":{"account_id":4037231,"reputation":111,"user_id":3572966,"display_name":"hgregoire"},"score":0,"creation_date":1577776860,"post_id":41206540,"comment_id":105251002,"body_markdown":"Here is a library to determine mime type from magic numbers https://github.com/j256/simplemagic","body":"Here is a library to determine mime type from magic numbers <a href=\"https://github.com/j256/simplemagic\" rel=\"nofollow noreferrer\">github.com/j256/simplemagic</a>"}],"answers":[{"tags":[],"owner":{"account_id":14706917,"reputation":157,"user_id":10621329,"display_name":"Dewa Syahrizal MN"},"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1577779220,"creation_date":1577775486,"answer_id":59540707,"question_id":41206540,"body_markdown":"I know this is an old question, just put my answer here hopefully someone finds it useful when searching for the same solution.\r\n\r\n\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n\r\n    import javax.servlet.ServletContext;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import javax.servlet.http.Part;\r\n\r\n    import javax.servlet.annotation.MultipartConfig;\r\n\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n\r\n    @MultipartConfig(\r\n        fileSizeThreshold = 0,\r\n        maxFileSize = 1024 * 1024 * 50,       // 50MB\r\n        maxRequestSize = 1024 * 1024 * 100)   // 100MB\r\n    public class FileUpload extends HttpServlet {    \r\n        \r\n        private static final Logger logger = LogManager.getLogger(FileUpload.class);\r\n        private byte[] data = new byte[4];\r\n\r\n        public void doPost(HttpServletRequest request, HttpServletResponse response)\r\n            throws IOException, ServletException {\r\n        \r\n            response.setContentType(&quot;text/plain&quot;);\r\n            response.setCharacterEncoding(&quot;UTF-8&quot;);\r\n \r\n            try {\r\n                fileSignature(request\r\n                  .getPart(&quot;image_file&quot;)\r\n                  .getInputStream());\r\n            } catch (IOException | NullPointerException ex) {\r\n                logger.error(ex);\r\n            }\r\n        \r\n            String fileType = getFileType(data);\r\n            \r\n            // return the recognized type \r\n            response.getWriter().write(fileType);\r\n        }\r\n\r\n        /**\r\n         * Get the first 4 byte of a file file signature. \r\n         * \r\n         * @param part File from part.\r\n         */\r\n         private void fileSignature(InputStream is)\r\n                 throws IOException, NullPointerException {\r\n             is.read(data, 0, 4);\r\n         }\r\n\r\n         /**\r\n          * Get the file type based on the file signature.\r\n          * Here restricted to only recognized file type jpeg, jpg, png and\r\n          * pdf where the signature of jpg and jpeg files are the same.\r\n          *\r\n          * @param fileData Byte array of the file.\r\n          * @return String of the file type.\r\n          */\r\n         private String getFileType(byte[] fileData) {\r\n             String type = &quot;undefined&quot;;\r\n             if(Byte.toUnsignedInt(fileData[0]) == 0x89 &amp;&amp; Byte.toUnsignedInt(fileData[1]) == 0x50)\r\n                 type = &quot;png&quot;;\r\n             else if(Byte.toUnsignedInt(fileData[0]) == 0xFF &amp;&amp; Byte.toUnsignedInt(fileData[1]) == 0xD8)\r\n                 type = &quot;jpg&quot;;\r\n             else if(Byte.toUnsignedInt(fileData[0]) == 0x25 &amp;&amp; Byte.toUnsignedInt(fileData[1]) == 0x50)\r\n                 type = &quot;pdf&quot;;\r\n        \r\n            return type;\r\n        }\r\n    }\r\n\r\nReferences for file magic numbers:\r\n\r\n - [filesignatures.net][1]\r\n - [Wikipedia List of file signatures][2]\r\n - [mimesniff][3]\r\n - [GCK&#39;S FILE SIGNATURES TABLE][4]\r\n\r\n\r\n  [1]: https://filesignatures.net/index.php?page=all&amp;order=SIGNATURE&amp;sort=DESC&amp;alpha=All\r\n  [2]: https://en.wikipedia.org/wiki/List_of_file_signatures\r\n  [3]: https://mimesniff.spec.whatwg.org/\r\n  [4]: https://www.garykessler.net/library/file_sigs.html","title":"How to get the magic number from File in java","body":"<p>I know this is an old question, just put my answer here hopefully someone finds it useful when searching for the same solution.</p>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\nimport java.io.InputStream;\n\nimport javax.servlet.ServletContext;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.Part;\n\nimport javax.servlet.annotation.MultipartConfig;\n\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\n@MultipartConfig(\n    fileSizeThreshold = 0,\n    maxFileSize = 1024 * 1024 * 50,       // 50MB\n    maxRequestSize = 1024 * 1024 * 100)   // 100MB\npublic class FileUpload extends HttpServlet {    \n\n    private static final Logger logger = LogManager.getLogger(FileUpload.class);\n    private byte[] data = new byte[4];\n\n    public void doPost(HttpServletRequest request, HttpServletResponse response)\n        throws IOException, ServletException {\n\n        response.setContentType(\"text/plain\");\n        response.setCharacterEncoding(\"UTF-8\");\n\n        try {\n            fileSignature(request\n              .getPart(\"image_file\")\n              .getInputStream());\n        } catch (IOException | NullPointerException ex) {\n            logger.error(ex);\n        }\n\n        String fileType = getFileType(data);\n\n        // return the recognized type \n        response.getWriter().write(fileType);\n    }\n\n    /**\n     * Get the first 4 byte of a file file signature. \n     * \n     * @param part File from part.\n     */\n     private void fileSignature(InputStream is)\n             throws IOException, NullPointerException {\n         is.read(data, 0, 4);\n     }\n\n     /**\n      * Get the file type based on the file signature.\n      * Here restricted to only recognized file type jpeg, jpg, png and\n      * pdf where the signature of jpg and jpeg files are the same.\n      *\n      * @param fileData Byte array of the file.\n      * @return String of the file type.\n      */\n     private String getFileType(byte[] fileData) {\n         String type = \"undefined\";\n         if(Byte.toUnsignedInt(fileData[0]) == 0x89 &amp;&amp; Byte.toUnsignedInt(fileData[1]) == 0x50)\n             type = \"png\";\n         else if(Byte.toUnsignedInt(fileData[0]) == 0xFF &amp;&amp; Byte.toUnsignedInt(fileData[1]) == 0xD8)\n             type = \"jpg\";\n         else if(Byte.toUnsignedInt(fileData[0]) == 0x25 &amp;&amp; Byte.toUnsignedInt(fileData[1]) == 0x50)\n             type = \"pdf\";\n\n        return type;\n    }\n}\n</code></pre>\n\n<p>References for file magic numbers:</p>\n\n<ul>\n<li><a href=\"https://filesignatures.net/index.php?page=all&amp;order=SIGNATURE&amp;sort=DESC&amp;alpha=All\" rel=\"noreferrer\">filesignatures.net</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/List_of_file_signatures\" rel=\"noreferrer\">Wikipedia List of file signatures</a></li>\n<li><a href=\"https://mimesniff.spec.whatwg.org/\" rel=\"noreferrer\">mimesniff</a></li>\n<li><a href=\"https://www.garykessler.net/library/file_sigs.html\" rel=\"noreferrer\">GCK'S FILE SIGNATURES TABLE</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3896812,"reputation":591,"user_id":3225638,"display_name":"Lorenzo"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1646416881,"creation_date":1610370932,"answer_id":65667558,"question_id":41206540,"body_markdown":"I&#39;m putting my solution just in case people want an alternative without java-servlet related code:\r\n\r\n```java\r\npublic enum MagicBytes {\r\n\tPNG(0x89, 0x50),  // Define just like previous answer \r\n\tJPG(0xFF, 0xD8),\r\n\tPDF(0x25, 0x50);\r\n\t\r\n\tprivate final int[] magicBytes;\r\n\t\r\n\tprivate MagicBytes(int...bytes) {\r\n\t\tmagicBytes = bytes;\r\n\t}\r\n\t\r\n\t// Checks if bytes match a specific magic bytes sequence\r\n\tpublic boolean is(byte[] bytes) {\r\n\t\tif (bytes.length != magicBytes.length)\r\n\t\t\tthrow new RuntimeException(&quot;I need the first &quot;+magicBytes.length\r\n\t\t\t\t\t+ &quot; bytes of an input stream.&quot;);\r\n\t\tfor (int i=0; i&lt;bytes.length; i++)\r\n\t\t\tif (Byte.toUnsignedInt(bytes[i]) != magicBytes[i])\r\n\t\t\t\treturn false;\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t// Extracts head bytes from any stream\r\n\tpublic static byte[] extract(InputStream is, int length) throws IOException {\r\n\t\ttry (is) {\t// automatically close stream on return\r\n\t\t\tbyte[] buffer = new byte[length];\r\n\t\t\tis.read(buffer, 0, length);\r\n\t\t\treturn buffer;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/* Convenience methods */\r\n\tpublic boolean is(File file) throws IOException {\r\n\t\treturn is(new FileInputStream(file));\r\n\t}\r\n\t\r\n\tpublic boolean is(InputStream is) throws IOException {\r\n\t\treturn is(extract(is, magicBytes.length));\r\n\t}\r\n}\r\n```\r\n\r\nThen just call like this depending on if you have a file or InputStream :\r\n```java\r\nMagicBytes.PNG.is(new File(&quot;picture.png&quot;))\r\nMagicBytes.PNG.is(new FileInputStream(&quot;picture.png&quot;))\r\n```\r\nBeing an enum also allows us to loop over each format if we need to by using `MagicBytes.values()`.\r\n\r\nEDIT: The previous code i put is a simplified version of the actual enum i&#39;m using for my own lib, but adapted using the previous answer to help people understand faster. However, some file formats might have different kinds of headers, so this class would be more appropriate if that is an issue for your specific use-case: [gist][1]\r\n\r\n\r\n  [1]: https://gist.github.com/54754N4/ce6ddb6332c73503b2be2213a37d963f","title":"How to get the magic number from File in java","body":"<p>I'm putting my solution just in case people want an alternative without java-servlet related code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum MagicBytes {\n    PNG(0x89, 0x50),  // Define just like previous answer \n    JPG(0xFF, 0xD8),\n    PDF(0x25, 0x50);\n    \n    private final int[] magicBytes;\n    \n    private MagicBytes(int...bytes) {\n        magicBytes = bytes;\n    }\n    \n    // Checks if bytes match a specific magic bytes sequence\n    public boolean is(byte[] bytes) {\n        if (bytes.length != magicBytes.length)\n            throw new RuntimeException(&quot;I need the first &quot;+magicBytes.length\n                    + &quot; bytes of an input stream.&quot;);\n        for (int i=0; i&lt;bytes.length; i++)\n            if (Byte.toUnsignedInt(bytes[i]) != magicBytes[i])\n                return false;\n        return true;\n    }\n    \n    // Extracts head bytes from any stream\n    public static byte[] extract(InputStream is, int length) throws IOException {\n        try (is) {  // automatically close stream on return\n            byte[] buffer = new byte[length];\n            is.read(buffer, 0, length);\n            return buffer;\n        }\n    }\n    \n    /* Convenience methods */\n    public boolean is(File file) throws IOException {\n        return is(new FileInputStream(file));\n    }\n    \n    public boolean is(InputStream is) throws IOException {\n        return is(extract(is, magicBytes.length));\n    }\n}\n</code></pre>\n<p>Then just call like this depending on if you have a file or InputStream :</p>\n<pre class=\"lang-java prettyprint-override\"><code>MagicBytes.PNG.is(new File(&quot;picture.png&quot;))\nMagicBytes.PNG.is(new FileInputStream(&quot;picture.png&quot;))\n</code></pre>\n<p>Being an enum also allows us to loop over each format if we need to by using <code>MagicBytes.values()</code>.</p>\n<p>EDIT: The previous code i put is a simplified version of the actual enum i'm using for my own lib, but adapted using the previous answer to help people understand faster. However, some file formats might have different kinds of headers, so this class would be more appropriate if that is an issue for your specific use-case: <a href=\"https://gist.github.com/54754N4/ce6ddb6332c73503b2be2213a37d963f\" rel=\"nofollow noreferrer\">gist</a></p>\n"}],"owner":{"account_id":996763,"reputation":2058,"user_id":1012506,"accept_rate":82,"display_name":"user1012506"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15036,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1646416881,"creation_date":1482048442,"question_id":41206540,"body_markdown":"I have file from UploadedFile button, and I want to print the extension files by use in magic number,\r\n \r\nMy code:\r\n\r\n    UploadedFile file = (UploadedFile)valueChangeEvent.getNewValue();\r\n    byte[] fileByteArray = IOUtils.toByteArray(file.getInputStream());\r\n\r\npay attention: Mime type and content file (from file and from the filename) not same to magic number (magic number comes from the first bytes of the inputStream)\r\n\r\nHow can I do it?\r\n","title":"How to get the magic number from File in java","body":"<p>I have file from UploadedFile button, and I want to print the extension files by use in magic number,</p>\n\n<p>My code:</p>\n\n<pre><code>UploadedFile file = (UploadedFile)valueChangeEvent.getNewValue();\nbyte[] fileByteArray = IOUtils.toByteArray(file.getInputStream());\n</code></pre>\n\n<p>pay attention: Mime type and content file (from file and from the filename) not same to magic number (magic number comes from the first bytes of the inputStream)</p>\n\n<p>How can I do it?</p>\n"},{"tags":["java","math"],"comments":[{"owner":{"account_id":15508885,"reputation":1854,"user_id":11188210,"display_name":"Phaelax z"},"score":5,"creation_date":1646413255,"post_id":71354714,"comment_id":126124611,"body_markdown":"It&#39;s saying if the difference of X and Y are both less or equal to 1 but both cannot equal 1 at the same time","body":"It&#39;s saying if the difference of X and Y are both less or equal to 1 but both cannot equal 1 at the same time"},{"owner":{"account_id":1850393,"reputation":392,"user_id":1677056,"display_name":"mike"},"score":1,"creation_date":1646413657,"post_id":71354714,"comment_id":126124753,"body_markdown":"In addition to @Phaelaxz comment, it means that you can&#39;t move by diagonal","body":"In addition to @Phaelaxz comment, it means that you can&#39;t move by diagonal"}],"answers":[{"tags":[],"owner":{"account_id":7139638,"reputation":123,"user_id":5457840,"display_name":"NRagot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646416120,"creation_date":1646416120,"answer_id":71355352,"question_id":71354714,"body_markdown":"Move the conditional out of the if and it might make more sens :\r\n\r\n    int differenceX = Math.abs(empty1 - move1);\r\n    int differenceY = Math.abs(empty2 - move2);\r\n\r\n    boolean isNearHorizontal = differenceX &lt;= 1;\r\n    boolean isNearVertical = differenceY &lt;= 1;\r\n    boolean isNearDiagonal = differenceX == 1 &amp;&amp; differenceY == 1;\r\n    \r\n    // is near horizontally and vertically and not diagonally !\r\n    if ( isNearHorizontal &amp;&amp; isNearVertical &amp;&amp; !isNearDiagonal )\r\n    {\r\n        return true;\r\n    }\r\n    return false;\r\n\r\nIt does the same thing but might be easier to read to you.\r\n\r\nBy the way, Here is a trick many programmers catch on after a little while to further ease code reading\r\n\r\n    if (statement)\r\n        return true\r\n    return false\r\n\r\nis equivalent to\r\n\r\n    return statement\r\n","title":"What is this java conditional doing?","body":"<p>Move the conditional out of the if and it might make more sens :</p>\n<pre><code>int differenceX = Math.abs(empty1 - move1);\nint differenceY = Math.abs(empty2 - move2);\n\nboolean isNearHorizontal = differenceX &lt;= 1;\nboolean isNearVertical = differenceY &lt;= 1;\nboolean isNearDiagonal = differenceX == 1 &amp;&amp; differenceY == 1;\n\n// is near horizontally and vertically and not diagonally !\nif ( isNearHorizontal &amp;&amp; isNearVertical &amp;&amp; !isNearDiagonal )\n{\n    return true;\n}\nreturn false;\n</code></pre>\n<p>It does the same thing but might be easier to read to you.</p>\n<p>By the way, Here is a trick many programmers catch on after a little while to further ease code reading</p>\n<pre><code>if (statement)\n    return true\nreturn false\n</code></pre>\n<p>is equivalent to</p>\n<pre><code>return statement\n</code></pre>\n"}],"owner":{"account_id":21005591,"reputation":11,"user_id":15435479,"display_name":"sqerl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71355352,"answer_count":1,"score":-1,"last_activity_date":1646416120,"creation_date":1646413093,"question_id":71354714,"body_markdown":"I made a nine game puzzle in Java. The goal is get the numbers back in order. Game board below is stored in a 2d `ArrayList`. The game looks like:\r\n```none\r\n2 5 1\r\n3 6 7\r\n4 8\r\n```\r\nA valid move would 7 or 8, in which case the blank space will swap with the selected number. 6 would not be valid, nor any numbers 1 - 6 in this state. The first way I coded my `isValidMove` function was a nightmare of nested switch &amp; conditionals. I came across somebody else&#39;s code and it works perfectly for me. This is the code that replaced my nested mess:\r\n\r\n   ```java\r\n   int differenceX = Math.abs(empty1 - move1);\r\n   int differenceY = Math.abs(empty2 - move2);\r\n   if (differenceX &lt;= 1 &amp;&amp; differenceY &lt;= 1 &amp;&amp; !(differenceX == 1 &amp;&amp; differenceY == 1))\r\n   {\r\n\t   return true;\r\n   }\r\n   return false;\r\n```\r\n\r\nI understand what&#39;s happening until the `&amp;&amp; !(differenceX == 1 &amp;&amp; differenceY == 1))`.\r\nChecking the absolute value of the difference is 0 or 1 makes sense. It then seems to be also checking that the difference is not equal to 1. I presume this has something to do with ensuring a number like 6 isn&#39;t considered valid. Can someone please explain what is happening here? My brain hurts.","title":"What is this java conditional doing?","body":"<p>I made a nine game puzzle in Java. The goal is get the numbers back in order. Game board below is stored in a 2d <code>ArrayList</code>. The game looks like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2 5 1\n3 6 7\n4 8\n</code></pre>\n<p>A valid move would 7 or 8, in which case the blank space will swap with the selected number. 6 would not be valid, nor any numbers 1 - 6 in this state. The first way I coded my <code>isValidMove</code> function was a nightmare of nested switch &amp; conditionals. I came across somebody else's code and it works perfectly for me. This is the code that replaced my nested mess:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int differenceX = Math.abs(empty1 - move1);\nint differenceY = Math.abs(empty2 - move2);\nif (differenceX &lt;= 1 &amp;&amp; differenceY &lt;= 1 &amp;&amp; !(differenceX == 1 &amp;&amp; differenceY == 1))\n{\n    return true;\n}\nreturn false;\n</code></pre>\n<p>I understand what's happening until the <code>&amp;&amp; !(differenceX == 1 &amp;&amp; differenceY == 1))</code>.\nChecking the absolute value of the difference is 0 or 1 makes sense. It then seems to be also checking that the difference is not equal to 1. I presume this has something to do with ensuring a number like 6 isn't considered valid. Can someone please explain what is happening here? My brain hurts.</p>\n"},{"tags":["java","jfreechart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1646350910,"post_id":71343637,"comment_id":126108224,"body_markdown":"A `MeterPlot` works best with an outline stroke &lt; 10.","body":"A <code>MeterPlot</code> works best with an outline stroke &lt; 10."},{"owner":{"account_id":24432043,"reputation":1,"user_id":18356841,"display_name":"Rosmarys Morao"},"score":0,"creation_date":1646417985,"post_id":71343637,"comment_id":126126231,"body_markdown":"Hello, thanks for answering, yes, but if I place &lt; 10, the color line is very thin and I need it more or less that thickness. @trashgod","body":"Hello, thanks for answering, yes, but if I place &lt; 10, the color line is very thin and I need it more or less that thickness. @trashgod"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1646419587,"post_id":71343637,"comment_id":126126722,"body_markdown":"This [approach](https://stackoverflow.com/q/70692566/230513) is an alternative.","body":"This <a href=\"https://stackoverflow.com/q/70692566/230513\">approach</a> is an alternative."},{"owner":{"account_id":24432043,"reputation":1,"user_id":18356841,"display_name":"Rosmarys Morao"},"score":0,"creation_date":1646658126,"post_id":71343637,"comment_id":126170432,"body_markdown":"Yes that is the approach I am following, but I am not able to reduce the area of the circle so that the sides do not intersect","body":"Yes that is the approach I am following, but I am not able to reduce the area of the circle so that the sides do not intersect"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1646659377,"post_id":71343637,"comment_id":126170932,"body_markdown":"You&#39;ll need either a custom `MeterPlot` or a custom `DialScale`.","body":"You&#39;ll need either a custom <code>MeterPlot</code> or a custom <code>DialScale</code>."},{"owner":{"account_id":24432043,"reputation":1,"user_id":18356841,"display_name":"Rosmarys Morao"},"score":0,"creation_date":1646766143,"post_id":71343637,"comment_id":126203733,"body_markdown":"meterplot works for what I need, what I need is to reduce the area of the circle or if there is a way to enlarge its space so that the circle is not cut","body":"meterplot works for what I need, what I need is to reduce the area of the circle or if there is a way to enlarge its space so that the circle is not cut"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1646769421,"post_id":71343637,"comment_id":126204809,"body_markdown":"You could alter the clip in `MeterPlot::draw` or the stroke in `StandardDialRange::draw`.","body":"You could alter the clip in <code>MeterPlot::draw</code> or the stroke in <code>StandardDialRange::draw</code>."},{"owner":{"account_id":24432043,"reputation":1,"user_id":18356841,"display_name":"Rosmarys Morao"},"score":0,"creation_date":1647538700,"post_id":71343637,"comment_id":126402294,"body_markdown":"I am using the meterplot.draw, but no change occurs","body":"I am using the meterplot.draw, but no change occurs"}],"owner":{"account_id":24432043,"reputation":1,"user_id":18356841,"display_name":"Rosmarys Morao"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646415988,"creation_date":1646340602,"question_id":71343637,"body_markdown":"I&#39;m creating a graph with `MeterPlot` in which I need 6 static values. It turns out that the graph cuts the top part and the part of the sides; how do I reduce that area? I already tried with this:\r\n\r\n```\r\npublic void draw(Graphics2D g2, Rectangle2D chartArea, Point anchor, ChartRenderingInfo info) {\r\n    chartArea.setRect(chartArea.getX(), chartArea.getY(),\r\n        chartArea.getWidth(), chartArea.getHeight() + 50);\r\n    super.draw(g2, chartArea, anchor, info);\r\n} \r\n```\r\n\r\nIt doesn&#39;t work for me. As you can see, the image comes out cut off; I need it to come out central.\r\n\r\n[![image][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/Hj7hx.png","title":"Reduce the area of a MeterPlot chart with JFreeChart","body":"<p>I'm creating a graph with <code>MeterPlot</code> in which I need 6 static values. It turns out that the graph cuts the top part and the part of the sides; how do I reduce that area? I already tried with this:</p>\n<pre><code>public void draw(Graphics2D g2, Rectangle2D chartArea, Point anchor, ChartRenderingInfo info) {\n    chartArea.setRect(chartArea.getX(), chartArea.getY(),\n        chartArea.getWidth(), chartArea.getHeight() + 50);\n    super.draw(g2, chartArea, anchor, info);\n} \n</code></pre>\n<p>It doesn't work for me. As you can see, the image comes out cut off; I need it to come out central.</p>\n<p><a href=\"https://i.stack.imgur.com/Hj7hx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hj7hx.png\" alt=\"image\" /></a></p>\n"},{"tags":["java","arrays","2d"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1646415404,"post_id":71355176,"comment_id":126125366,"body_markdown":"Please don&#39;t post images of code or errors; people need to be able to copy &amp; paste your code and try it. See [ask]. Make sure you include that `display` method, we don&#39;t know what that is doing.","body":"Please don&#39;t post images of code or errors; people need to be able to copy &amp; paste your code and try it. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Make sure you include that <code>display</code> method, we don&#39;t know what that is doing."}],"answers":[{"tags":[],"owner":{"account_id":13287947,"reputation":55,"user_id":15324041,"display_name":"Jeff H"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1646415912,"creation_date":1646415912,"answer_id":71355317,"question_id":71355176,"body_markdown":"You&#39;re using `System.out.print` which doesn&#39;t append a newline to the end of your output, meaning it will just keep printing everything to the same line. \r\n\r\nYou can add the line `System.out.println()` inside your top-level loop, but after your inner loop, and it will log each 2nd-level array to it&#39;s own line. \r\n\r\n","title":"print 2D array and print * for odd numbers","body":"<p>You're using <code>System.out.print</code> which doesn't append a newline to the end of your output, meaning it will just keep printing everything to the same line.</p>\n<p>You can add the line <code>System.out.println()</code> inside your top-level loop, but after your inner loop, and it will log each 2nd-level array to it's own line.</p>\n"}],"owner":{"account_id":24410365,"reputation":1,"user_id":18337909,"display_name":"Erika "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1646415912,"creation_date":1646415229,"question_id":71355176,"body_markdown":"[enter image description here][1]\r\nwhy does the console print my 2D array in a row? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aqgcO.png","title":"print 2D array and print * for odd numbers","body":"<p><a href=\"https://i.stack.imgur.com/aqgcO.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nwhy does the console print my 2D array in a row?</p>\n"},{"tags":["java","java-8","java-11"],"comments":[{"owner":{"display_name":"user6073886"},"score":5,"creation_date":1574419016,"post_id":58992368,"comment_id":104235595,"body_markdown":"You don&#39;t. And this question is off topic.","body":"You don&#39;t. And this question is off topic."},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1574419074,"post_id":58992368,"comment_id":104235621,"body_markdown":"Who is asking you to update? Ask them for the reason.","body":"Who is asking you to update? Ask them for the reason."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":6,"creation_date":1574419458,"post_id":58992368,"comment_id":104235815,"body_markdown":"@OHGODSPIDERS: I disagree. If the software continues to be used, then they&#39;ll have to upgrade eventually. Possibly not right now, but that day is not too far off.","body":"@OHGODSPIDERS: I disagree. If the software continues to be used, then they&#39;ll have to upgrade eventually. Possibly not right now, but that day is not too far off."},{"owner":{"account_id":7799093,"reputation":1830,"user_id":5899172,"accept_rate":71,"display_name":"Yassine Badache"},"score":0,"creation_date":1574431739,"post_id":58992368,"comment_id":104242145,"body_markdown":"The new editing may let this question pass the &#39;opinion-based&#39; threshold ?","body":"The new editing may let this question pass the &#39;opinion-based&#39; threshold ?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1574464256,"post_id":58992368,"comment_id":104256111,"body_markdown":"On a related note, for information on choosing a Java 11 distribution see: [*How to get java 11 run-time environment working since there is no more jre 11 for download?*](https://stackoverflow.com/q/53111921/642706). There I posted some charts with a list of vendors.","body":"On a related note, for information on choosing a Java 11 distribution see: <a href=\"https://stackoverflow.com/q/53111921/642706\"><i>How to get java 11 run-time environment working since there is no more jre 11 for download?</i></a>. There I posted some charts with a list of vendors."},{"owner":{"account_id":7421518,"reputation":861,"user_id":5645646,"accept_rate":17,"display_name":"Spring"},"score":0,"creation_date":1606722982,"post_id":58992368,"comment_id":115036884,"body_markdown":"Joachim Sauer, I agree with your comment. I think @alejandro juarez asked a good question. he deserves my vote up.","body":"Joachim Sauer, I agree with your comment. I think @alejandro juarez asked a good question. he deserves my vote up."}],"answers":[{"tags":[],"owner":{"account_id":1093313,"reputation":989,"user_id":1087447,"accept_rate":67,"display_name":"Jazzschmidt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574419160,"creation_date":1574419081,"answer_id":58992437,"question_id":58992368,"body_markdown":"Security updates for Oracle Java 8 are only provided via enterprise licenses and you could save that amount by using newer stable releases.\r\nApart from that, using newer versions also guarantee better integration with modern JVM tools, like up-to-date build tools.","title":"Is there any valid point upgrading Java 8 to Java 11?","body":"<p>Security updates for Oracle Java 8 are only provided via enterprise licenses and you could save that amount by using newer stable releases.\nApart from that, using newer versions also guarantee better integration with modern JVM tools, like up-to-date build tools.</p>\n"},{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1574429028,"creation_date":1574419182,"answer_id":58992471,"question_id":58992368,"body_markdown":"- old Java version will eventually stop getting new security fixes, which will make your software more vulnerable\r\n- using an old software stack will make it harder to find new developers willing to work on your software. Java 8 probably isn&#39;t too old for that yet, but in a few years that will be similar to finding &quot;Java 1.4 developers&quot; right now.\r\n- using an old software stack can severely limit your selection of useful third-party libraries and/or tools. A given library that you really need might require a more recent Java version or (possibly even worse) a library that you already use increases it&#39;s Java version requirement with a new major release (leaving you stuck with an old Java version **and** an old software version that might be missing important bug fixes).\r\n\r\nThere are several advantages from switching to newer Java versions, which are probably not the main reason to switch, but could be considered additional incentives:\r\n\r\n- newer JDK implementations might have better optimizations (in JIT and Garbage Collection mostly) that might help you get better performance from existing hardware (or reduce your cloud computing costs)\r\n- newer Java versions tend to have support for more modern technology, like the newest TLS versions and cryptographic algorithms which can help you data more secure, if you use them correctly.\r\n- new language features might improve your code style, which makes your developers happier, which means less churn which saves money on hiring new developers.","title":"Is there any valid point upgrading Java 8 to Java 11?","body":"<ul>\n<li>old Java version will eventually stop getting new security fixes, which will make your software more vulnerable</li>\n<li>using an old software stack will make it harder to find new developers willing to work on your software. Java 8 probably isn't too old for that yet, but in a few years that will be similar to finding \"Java 1.4 developers\" right now.</li>\n<li>using an old software stack can severely limit your selection of useful third-party libraries and/or tools. A given library that you really need might require a more recent Java version or (possibly even worse) a library that you already use increases it's Java version requirement with a new major release (leaving you stuck with an old Java version <strong>and</strong> an old software version that might be missing important bug fixes).</li>\n</ul>\n\n<p>There are several advantages from switching to newer Java versions, which are probably not the main reason to switch, but could be considered additional incentives:</p>\n\n<ul>\n<li>newer JDK implementations might have better optimizations (in JIT and Garbage Collection mostly) that might help you get better performance from existing hardware (or reduce your cloud computing costs)</li>\n<li>newer Java versions tend to have support for more modern technology, like the newest TLS versions and cryptographic algorithms which can help you data more secure, if you use them correctly.</li>\n<li>new language features might improve your code style, which makes your developers happier, which means less churn which saves money on hiring new developers.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":14286471,"reputation":141,"user_id":10319718,"display_name":"Vincent Lochen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1646415765,"creation_date":1574419414,"answer_id":58992545,"question_id":58992368,"body_markdown":"The reason to jump from 8 to 11 is the support of Oracle (or other implementation).\r\n\r\nYou can find [the roadmap of Oracle here](https://www.oracle.com/technetwork/java/java-se-support-roadmap.html). For Java8 you are safe up to March 2022 for the premier support and extended support to December 2030. For [Amazon Corretto](https://aws.amazon.com/fr/corretto/faqs/) they will provide free support and updates for version 8 to (at least) June 2026.\r\n\r\nSo the major reason to update your JVM version is support and updates. You still have time to update your version but you also have to wait for you 3rd party library to deliver compatibility with Java 11.\r\n\r\nIf you wonder why from 8 to 11 and not to 9 or 10, the reason is that 9 and 10 are not marked as LTS (Long Time Support) meaning that the different implementation won&#39;t provide any support and updates (or not for long) for those version when the next one is release.","title":"Is there any valid point upgrading Java 8 to Java 11?","body":"<p>The reason to jump from 8 to 11 is the support of Oracle (or other implementation).</p>\n<p>You can find <a href=\"https://www.oracle.com/technetwork/java/java-se-support-roadmap.html\" rel=\"nofollow noreferrer\">the roadmap of Oracle here</a>. For Java8 you are safe up to March 2022 for the premier support and extended support to December 2030. For <a href=\"https://aws.amazon.com/fr/corretto/faqs/\" rel=\"nofollow noreferrer\">Amazon Corretto</a> they will provide free support and updates for version 8 to (at least) June 2026.</p>\n<p>So the major reason to update your JVM version is support and updates. You still have time to update your version but you also have to wait for you 3rd party library to deliver compatibility with Java 11.</p>\n<p>If you wonder why from 8 to 11 and not to 9 or 10, the reason is that 9 and 10 are not marked as LTS (Long Time Support) meaning that the different implementation won't provide any support and updates (or not for long) for those version when the next one is release.</p>\n"}],"owner":{"account_id":14556058,"reputation":143,"user_id":10582300,"display_name":"alejandro juarez"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6791,"favorite_count":0,"down_vote_count":10,"up_vote_count":11,"accepted_answer_id":58992471,"answer_count":3,"score":1,"last_activity_date":1646415765,"creation_date":1574418808,"question_id":58992368,"body_markdown":"I&#39;m working in a company that has many projects in Java 8. Those projects are valued as old, and our team would like to upgrade the version. However, we need valid points in order to unlock the situation.\r\n\r\nThose projects are using Spring and Hibernate (if it&#39;s ever useful).\r\n\r\nWhat **factual** points could we give to our company to upgrade the versions, if any factual points there is ?\r\n\r\n\r\nExamples of useful, valid points would be:\r\n\r\n- Security improvements\r\n- Performances improvements\r\n- New libraries or framework updates which could ease the development process\r\n- New possibilites/features with an upgraded Java Version\r\n- ... \r\n\r\nPossibly, backed up with documentation or links to useful resources.","title":"Is there any valid point upgrading Java 8 to Java 11?","body":"<p>I'm working in a company that has many projects in Java 8. Those projects are valued as old, and our team would like to upgrade the version. However, we need valid points in order to unlock the situation.</p>\n\n<p>Those projects are using Spring and Hibernate (if it's ever useful).</p>\n\n<p>What <strong>factual</strong> points could we give to our company to upgrade the versions, if any factual points there is ?</p>\n\n<p>Examples of useful, valid points would be:</p>\n\n<ul>\n<li>Security improvements</li>\n<li>Performances improvements</li>\n<li>New libraries or framework updates which could ease the development process</li>\n<li>New possibilites/features with an upgraded Java Version</li>\n<li>... </li>\n</ul>\n\n<p>Possibly, backed up with documentation or links to useful resources.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","mapstruct"],"comments":[{"owner":{"account_id":4964297,"reputation":77,"user_id":3994207,"display_name":"David M."},"score":0,"creation_date":1591087320,"post_id":57325214,"comment_id":109915345,"body_markdown":"Hi Armine, did you find any solution for this problem. Having the same issue.","body":"Hi Armine, did you find any solution for this problem. Having the same issue."},{"owner":{"account_id":8363516,"reputation":1695,"user_id":6280998,"accept_rate":78,"display_name":"Armine"},"score":1,"creation_date":1591103898,"post_id":57325214,"comment_id":109923871,"body_markdown":"No, I didn&#39;t find a good solution, I just overcame it: I removed @Context from the formVType() second argument, and after each time when I call toCType() in my dao or wherever, I manually call formVType() by passing appropriate dao object. Not good, but at that time that was the fastest way.","body":"No, I didn&#39;t find a good solution, I just overcame it: I removed @Context from the formVType() second argument, and after each time when I call toCType() in my dao or wherever, I manually call formVType() by passing appropriate dao object. Not good, but at that time that was the fastest way."},{"owner":{"account_id":4964297,"reputation":77,"user_id":3994207,"display_name":"David M."},"score":0,"creation_date":1591104286,"post_id":57325214,"comment_id":109924088,"body_markdown":"kind a expected this kind of answer, will do the same to get a fast result ;)\n\nThx for the reply","body":"kind a expected this kind of answer, will do the same to get a fast result ;)  Thx for the reply"}],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564763246,"creation_date":1564763246,"answer_id":57330365,"question_id":57325214,"body_markdown":"The reason why the qualified `formVType` method is not used is because of the `@Context` attribute. There is no such attribbtute in the originating method so MapStruct will nnot match the method. If you add that to `toCType` then it would be used.\r\n\r\nIn order not to drag the `VTypeDao` I would suggest that you use an `abstract` class and inject it into it.\r\n\r\n\r\nE.g.\r\n\r\n    @Mapper\r\n    public abstract class VCMapper {\r\n    \r\n        protected VTypeDao vTypeDao;\r\n    \r\n        @Mappings({\r\n                @Mapping(target = &quot;cType&quot;, qualifiedByName = &quot;formVType&quot;)\r\n        })\r\n        public abstract CType toCType(CTypeEntity cTypeEntity);\r\n    \r\n        public abstract List&lt;CType&gt; toCTypes(List&lt;CTypeEntity&gt; cTypeEntities);\r\n    \r\n        @Mappings({\r\n                @Mapping(target = &quot;vTypeId&quot;, source = &quot;vType.id&quot;)\r\n        })\r\n        public abstract CTypeEntity fromCType(CType cType);\r\n    \r\n        public abstract List&lt;CTypeEntity&gt; fromCTypeList(List&lt;CType&gt; cTypes);\r\n    \r\n        @Named(&quot;formVType&quot;)\r\n        protected VType formVType(CTypeEntity entity) {\r\n            return vTypeDao.findById(entity.getVId()); \r\n        }\r\n    \r\n        public void setVTypeDao(VTypeDao vTypeDao) {\r\n            this.vTypeDao = vTypeDao\r\n        }\r\n    }\r\n\r\n","title":"The method used in mapstruct with qualified by name isn&#39;t used in autogenerated implementation","body":"<p>The reason why the qualified <code>formVType</code> method is not used is because of the <code>@Context</code> attribute. There is no such attribbtute in the originating method so MapStruct will nnot match the method. If you add that to <code>toCType</code> then it would be used.</p>\n\n<p>In order not to drag the <code>VTypeDao</code> I would suggest that you use an <code>abstract</code> class and inject it into it.</p>\n\n<p>E.g.</p>\n\n<pre><code>@Mapper\npublic abstract class VCMapper {\n\n    protected VTypeDao vTypeDao;\n\n    @Mappings({\n            @Mapping(target = \"cType\", qualifiedByName = \"formVType\")\n    })\n    public abstract CType toCType(CTypeEntity cTypeEntity);\n\n    public abstract List&lt;CType&gt; toCTypes(List&lt;CTypeEntity&gt; cTypeEntities);\n\n    @Mappings({\n            @Mapping(target = \"vTypeId\", source = \"vType.id\")\n    })\n    public abstract CTypeEntity fromCType(CType cType);\n\n    public abstract List&lt;CTypeEntity&gt; fromCTypeList(List&lt;CType&gt; cTypes);\n\n    @Named(\"formVType\")\n    protected VType formVType(CTypeEntity entity) {\n        return vTypeDao.findById(entity.getVId()); \n    }\n\n    public void setVTypeDao(VTypeDao vTypeDao) {\n        this.vTypeDao = vTypeDao\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15043220,"reputation":195,"user_id":10857151,"display_name":"Michael Cauduro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646415448,"creation_date":1646415109,"answer_id":71355149,"question_id":57325214,"body_markdown":"I suggest to create a new class where you can define two methods that:\r\n1) convert a Integer vTypeId into a VType\r\n2) convert a VType vType into an Integer\r\n\r\nThan you can use this class into your mapstruct class by providing that in &quot;uses=&quot; property on the @Mapper annotation.\r\nThan what you need to do is to simply specify in the Object method the @Mapping specification, in your case it would be:\r\n    \r\n    @Mapping(target=&quot;vType&quot;,source=&quot;vTypeId&quot;)\r\n    CType toCType(CTypeEntity cTypeEntity);\r\n\r\n    @Mapping(target=&quot;vTypeId&quot;,source=&quot;vType&quot;)\r\n    CTypeEntity toCTypeEntity(CType cTypeEntity);\r\n\r\nThe custom class to use separately:\r\n\r\n   \r\n    @Component\r\n    public class VtypeResolver{\r\n      @Autowired\r\n      private VTypeDao dao;\r\n\r\n\r\n      public VType toVType(Integer id) {\r\n        if (id != null) {\r\n            return dao.findById(id).orElse(null);\r\n        }\r\n        return null;\r\n      }\r\n\r\n\r\n      public Integer toVtypeId(VType input) {\r\n        return Optional.ofNullable(input)\r\n                .map(VType::getId)\r\n                .orElse(null);\r\n      }\r\n\r\n\r\n     }\r\n\r\nthen use in @Mapper context\r\n\r\n    @Mapper(uses=VTypeResolver.class){\r\n    ....\r\n    }","title":"The method used in mapstruct with qualified by name isn&#39;t used in autogenerated implementation","body":"<p>I suggest to create a new class where you can define two methods that:</p>\n<ol>\n<li>convert a Integer vTypeId into a VType</li>\n<li>convert a VType vType into an Integer</li>\n</ol>\n<p>Than you can use this class into your mapstruct class by providing that in &quot;uses=&quot; property on the @Mapper annotation.\nThan what you need to do is to simply specify in the Object method the @Mapping specification, in your case it would be:</p>\n<pre><code>@Mapping(target=&quot;vType&quot;,source=&quot;vTypeId&quot;)\nCType toCType(CTypeEntity cTypeEntity);\n\n@Mapping(target=&quot;vTypeId&quot;,source=&quot;vType&quot;)\nCTypeEntity toCTypeEntity(CType cTypeEntity);\n</code></pre>\n<p>The custom class to use separately:</p>\n<pre><code>@Component\npublic class VtypeResolver{\n  @Autowired\n  private VTypeDao dao;\n\n\n  public VType toVType(Integer id) {\n    if (id != null) {\n        return dao.findById(id).orElse(null);\n    }\n    return null;\n  }\n\n\n  public Integer toVtypeId(VType input) {\n    return Optional.ofNullable(input)\n            .map(VType::getId)\n            .orElse(null);\n  }\n\n\n }\n</code></pre>\n<p>then use in @Mapper context</p>\n<pre><code>@Mapper(uses=VTypeResolver.class){\n....\n}\n</code></pre>\n"}],"owner":{"account_id":8363516,"reputation":1695,"user_id":6280998,"accept_rate":78,"display_name":"Armine"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9760,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1646415448,"creation_date":1564743783,"question_id":57325214,"body_markdown":"I have the following DTO and Entity classes:\r\n\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class CType {\r\n\r\n        private Integer id;\r\n        // ......\r\n        private VType vType;\r\n    }\r\n\r\n------------------------------------------------------------------------\r\n\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Entity\r\n    @Table(name = &quot;c_types&quot;)\r\n    public class CTypeEntity {\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;, nullable = false, updatable = false)\r\n        private Integer id;\r\n\r\n        // ......\r\n\r\n        @Column(name = &quot;v_type_id&quot;)\r\n        private Integer vTypeId;\r\n    }\r\n\r\nI need to map the objects of these classes with *mapstruct* and this is my *mapstruct*:\r\n\r\n    @Mapper\r\n    public interface VCMapper {\r\n\r\n        @Mappings({\r\n                @Mapping(target = &quot;cType&quot;, qualifiedByName = &quot;formVType&quot;)\r\n        })\r\n        CType toCType(CTypeEntity cTypeEntity);\r\n\r\n        List&lt;CType&gt; toCTypes(List&lt;CTypeEntity&gt; cTypeEntities);\r\n\r\n        @Mappings({\r\n                @Mapping(target = &quot;vTypeId&quot;, source = &quot;vType.id&quot;)\r\n        })\r\n        CTypeEntity fromCType(CType cType);\r\n\r\n        List&lt;CTypeEntity&gt; fromCTypeList(List&lt;CType&gt; cTypes);\r\n\r\n        @Named(&quot;formVType&quot;)\r\n        default VType formVType(CTypeEntity entity, @Context VTypeDao vTypeDao) {\r\n            return vTypeDao.findById(entity.getVId()); \r\n        }\r\n    }\r\n\r\n**Problem:** When I build my application with maven (`mvn clean package`), the implementation of the method `toCType()` in auto-generated `VCMapperImpl` class doesn&#39;t use the qualified `formVType()` default method.\r\n\r\n**Questions:** \r\n\r\n - Why the qualified default method isn&#39;t used in impl class?\r\n - What is wrong with the default method and it&#39;s usage in Mapper interface and how to fix it? ","title":"The method used in mapstruct with qualified by name isn&#39;t used in autogenerated implementation","body":"<p>I have the following DTO and Entity classes:</p>\n\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class CType {\n\n    private Integer id;\n    // ......\n    private VType vType;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = \"c_types\")\npublic class CTypeEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"id\", nullable = false, updatable = false)\n    private Integer id;\n\n    // ......\n\n    @Column(name = \"v_type_id\")\n    private Integer vTypeId;\n}\n</code></pre>\n\n<p>I need to map the objects of these classes with <em>mapstruct</em> and this is my <em>mapstruct</em>:</p>\n\n<pre><code>@Mapper\npublic interface VCMapper {\n\n    @Mappings({\n            @Mapping(target = \"cType\", qualifiedByName = \"formVType\")\n    })\n    CType toCType(CTypeEntity cTypeEntity);\n\n    List&lt;CType&gt; toCTypes(List&lt;CTypeEntity&gt; cTypeEntities);\n\n    @Mappings({\n            @Mapping(target = \"vTypeId\", source = \"vType.id\")\n    })\n    CTypeEntity fromCType(CType cType);\n\n    List&lt;CTypeEntity&gt; fromCTypeList(List&lt;CType&gt; cTypes);\n\n    @Named(\"formVType\")\n    default VType formVType(CTypeEntity entity, @Context VTypeDao vTypeDao) {\n        return vTypeDao.findById(entity.getVId()); \n    }\n}\n</code></pre>\n\n<p><strong>Problem:</strong> When I build my application with maven (<code>mvn clean package</code>), the implementation of the method <code>toCType()</code> in auto-generated <code>VCMapperImpl</code> class doesn't use the qualified <code>formVType()</code> default method.</p>\n\n<p><strong>Questions:</strong> </p>\n\n<ul>\n<li>Why the qualified default method isn't used in impl class?</li>\n<li>What is wrong with the default method and it's usage in Mapper interface and how to fix it? </li>\n</ul>\n"},{"tags":["java","swing"],"comments":[{"owner":{"display_name":"user15314575"},"score":0,"creation_date":1646403181,"post_id":71352339,"comment_id":126120873,"body_markdown":"The error message refers to a function `miseAJourComboBox(JComboBox jcb)`, but I only see a function `miseAJourComboBox(JComboBox&lt;String&gt; jcb)` in your code!","body":"The error message refers to a function <code>miseAJourComboBox(JComboBox jcb)</code>, but I only see a function <code>miseAJourComboBox(JComboBox&lt;String&gt; jcb)</code> in your code!"},{"owner":{"account_id":24451928,"reputation":11,"user_id":18374039,"display_name":"cedric le valegant"},"score":0,"creation_date":1646414679,"post_id":71352339,"comment_id":126125112,"body_markdown":"you are right,  it is a mistake the error message is also with miseAJourComboBox(JComboBox jcb)","body":"you are right,  it is a mistake the error message is also with miseAJourComboBox(JComboBox jcb)"}],"answers":[{"tags":[],"owner":{"account_id":24451928,"reputation":11,"user_id":18374039,"display_name":"cedric le valegant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646415405,"creation_date":1646415179,"answer_id":71355166,"question_id":71352339,"body_markdown":"I have been helped on that. FYI, I missed to import the JComboBox or to add in my parameter the path of JComboBox:\r\n\r\n    public void miseAJourComboBox(javax.swing.JComboBox&lt;String&gt; jcb ,String tableAParcourir, String champRecherche){\r\n\r\ninstead of:\r\n\r\n    public void miseAJourComboBox(JComboBox&lt;String&gt; jcb ,String tableAParcourir, String champRecherche){\r\n\r\nand now it works","title":"how to use a JComboBox object as a parameter of a java method?","body":"<p>I have been helped on that. FYI, I missed to import the JComboBox or to add in my parameter the path of JComboBox:</p>\n<pre><code>public void miseAJourComboBox(javax.swing.JComboBox&lt;String&gt; jcb ,String tableAParcourir, String champRecherche){\n</code></pre>\n<p>instead of:</p>\n<pre><code>public void miseAJourComboBox(JComboBox&lt;String&gt; jcb ,String tableAParcourir, String champRecherche){\n</code></pre>\n<p>and now it works</p>\n"}],"owner":{"account_id":24451928,"reputation":11,"user_id":18374039,"display_name":"cedric le valegant"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646415405,"creation_date":1646401476,"question_id":71352339,"body_markdown":"I get an error message due to the JComboBox parameter I am using in my code. \r\nThe method is:\r\n`public void miseAJourComboBox(JComboBox&lt;String&gt; jcb)`\r\n\r\nThe message is:\r\n\r\n```none\r\nerror: cannot find symbol\r\npublic void miseAJourComboBox(JComboBox&lt;String&gt; jcb){\r\nsymbol: class JComboBox\r\nlocation: class FrameAchat\r\n```\r\n\r\nand the code (simplified) is:\r\n\r\n```\r\npublic class FrameAchat extends javax.swing.JFrame {\r\n \r\n    public ConnectionSQL connectionSQL;\r\n \r\n    /** Creates new form FrameAchat */\r\n    public FrameAchat() {\r\n        connectionSQL = new ConnectionSQL();\r\n        System.out.println(&quot;passe par constructeur de achat&quot;);\r\n        initComponents();\r\n    }\r\n \r\n \r\n    /** This method is called from within the constructor to\r\n     * initialize the form.\r\n     * WARNING: Do NOT modify this code. The content of this method is\r\n     * always regenerated by the Form Editor.\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \r\n    private void initComponents() {\r\n \r\n        jLabelFicheAchat = new javax.swing.JLabel();\r\n        jComboIdPdt = new javax.swing.JComboBox&lt;&gt;();\r\n        jLabelMarque = new javax.swing.JLabel();\r\n        jLabelModele = new javax.swing.JLabel();\r\n        jLabelAnnee = new javax.swing.JLabel();\r\n        jLabelPrix = new javax.swing.JLabel();\r\n        jComboIdFrs = new javax.swing.JComboBox&lt;&gt;();\r\n        jLabelNom = new javax.swing.JLabel();\r\n        jComboQte = new javax.swing.JComboBox&lt;&gt;();\r\n        jLabelQte = new javax.swing.JLabel();\r\n        Achat = new javax.swing.JButton();\r\n \r\n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\r\n \r\n        jLabelFicheAchat.setFont(new java.awt.Font(&quot;Tahoma&quot;, 0, 18)); // NOI18N\r\n        jLabelFicheAchat.setText(&quot;Creation Achat&quot;);\r\n \r\n        jComboIdPdt.setModel(new javax.swing.DefaultComboBoxModel&lt;&gt;(new String[] { &quot;Item 1&quot;, &quot;Item 2&quot;, &quot;Item 3&quot;, &quot;Item 4&quot; }));\r\n \r\n        jLabelMarque.setText(&quot;jLabel1&quot;);\r\n \r\n        jLabelModele.setText(&quot;jLabel1&quot;);\r\n \r\n        jLabelAnnee.setText(&quot;jLabel1&quot;);\r\n \r\n        jLabelPrix.setText(&quot;jLabel1&quot;);\r\n \r\n        jComboIdFrs.setModel(new javax.swing.DefaultComboBoxModel&lt;&gt;(new String[] { &quot;Item 1&quot;, &quot;Item 2&quot;, &quot;Item 3&quot;, &quot;Item 4&quot; }));\r\n \r\n        jLabelNom.setText(&quot;jLabel1&quot;);\r\n \r\n        jComboQte.setModel(new javax.swing.DefaultComboBoxModel&lt;&gt;(new String[] { &quot;Item 1&quot;, &quot;Item 2&quot;, &quot;Item 3&quot;, &quot;Item 4&quot; }));\r\n \r\n        jLabelQte.setText(&quot;Quantit&#233;:&quot;);\r\n \r\n        Achat.setText(&quot;ACHETER&quot;);\r\n \r\n        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());\r\n        getContentPane().setLayout(layout);\r\n        layout.setHorizontalGroup(\r\n            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\r\n            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()\r\n                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                .add(jLabelFicheAchat, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 177, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                .add(91, 91, 91))\r\n            .add(layout.createSequentialGroup()\r\n                .add(24, 24, 24)\r\n                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\r\n                    .add(layout.createSequentialGroup()\r\n                        .add(jComboIdPdt, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                        .add(53, 53, 53)\r\n                        .add(jLabelMarque)\r\n                        .add(18, 18, 18)\r\n                        .add(jLabelModele)\r\n                        .add(28, 28, 28)\r\n                        .add(jLabelAnnee)\r\n                        .add(18, 18, 18)\r\n                        .add(jLabelPrix))\r\n                    .add(layout.createSequentialGroup()\r\n                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\r\n                            .add(jComboIdFrs, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                            .add(jLabelQte))\r\n                        .add(53, 53, 53)\r\n                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\r\n                            .add(jComboQte, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                            .add(jLabelNom)\r\n                            .add(Achat))))\r\n                .addContainerGap(66, Short.MAX_VALUE))\r\n        );\r\n        layout.setVerticalGroup(\r\n            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\r\n            .add(layout.createSequentialGroup()\r\n                .add(21, 21, 21)\r\n                .add(jLabelFicheAchat)\r\n                .add(18, 18, 18)\r\n                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)\r\n                    .add(jComboIdPdt, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                    .add(jLabelMarque)\r\n                    .add(jLabelModele)\r\n                    .add(jLabelAnnee)\r\n                    .add(jLabelPrix))\r\n                .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)\r\n                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)\r\n                    .add(jComboIdFrs, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                    .add(jLabelNom))\r\n                .add(18, 18, 18)\r\n                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)\r\n                    .add(jComboQte, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                    .add(jLabelQte))\r\n                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 76, Short.MAX_VALUE)\r\n                .add(Achat)\r\n                .add(51, 51, 51))\r\n        );\r\n \r\n        pack();\r\n    }// &lt;/editor-fold&gt;                        \r\n \r\n    /**\r\n     * @param args the command line arguments\r\n     */\r\n    public static void main(String args[]) {\r\n        /* Set the Nimbus look and feel */\r\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Look and feel setting code (optional) &quot;&gt;\r\n        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.\r\n         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html \r\n         */\r\n        try {\r\n            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\r\n                if (&quot;Nimbus&quot;.equals(info.getName())) {\r\n                    javax.swing.UIManager.setLookAndFeel(info.getClassName());\r\n                    break;\r\n                }\r\n            }\r\n        } catch (ClassNotFoundException ex) {\r\n            java.util.logging.Logger.getLogger(FrameAchat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        } catch (InstantiationException ex) {\r\n            java.util.logging.Logger.getLogger(FrameAchat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        } catch (IllegalAccessException ex) {\r\n            java.util.logging.Logger.getLogger(FrameAchat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        } catch (javax.swing.UnsupportedLookAndFeelException ex) {\r\n            java.util.logging.Logger.getLogger(FrameAchat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        }\r\n        //&lt;/editor-fold&gt;\r\n \r\n        /* Create and display the form */\r\n        java.awt.EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                new FrameAchat().setVisible(true);\r\n            }\r\n        });\r\n    }\r\n \r\n    // Variables declaration - do not modify                     \r\n    private javax.swing.JButton Achat;\r\n    private javax.swing.JComboBox&lt;String&gt; jComboIdFrs;\r\n    private javax.swing.JComboBox&lt;String&gt; jComboIdPdt;\r\n    private javax.swing.JComboBox&lt;String&gt; jComboQte;\r\n    private javax.swing.JLabel jLabelAnnee;\r\n    private javax.swing.JLabel jLabelFicheAchat;\r\n    private javax.swing.JLabel jLabelMarque;\r\n    private javax.swing.JLabel jLabelModele;\r\n    private javax.swing.JLabel jLabelNom;\r\n    private javax.swing.JLabel jLabelPrix;\r\n    private javax.swing.JLabel jLabelQte;\r\n    // End of variables declaration                   \r\n \r\n    public void miseAJourComboBox(JComboBox&lt;String&gt; jcb){\r\n        System.out.println(&quot;hi&quot;);\r\n    }\r\n \r\n \r\n}\r\n```","title":"how to use a JComboBox object as a parameter of a java method?","body":"<p>I get an error message due to the JComboBox parameter I am using in my code.\nThe method is:\n<code>public void miseAJourComboBox(JComboBox&lt;String&gt; jcb)</code></p>\n<p>The message is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>error: cannot find symbol\npublic void miseAJourComboBox(JComboBox&lt;String&gt; jcb){\nsymbol: class JComboBox\nlocation: class FrameAchat\n</code></pre>\n<p>and the code (simplified) is:</p>\n<pre><code>public class FrameAchat extends javax.swing.JFrame {\n \n    public ConnectionSQL connectionSQL;\n \n    /** Creates new form FrameAchat */\n    public FrameAchat() {\n        connectionSQL = new ConnectionSQL();\n        System.out.println(&quot;passe par constructeur de achat&quot;);\n        initComponents();\n    }\n \n \n    /** This method is called from within the constructor to\n     * initialize the form.\n     * WARNING: Do NOT modify this code. The content of this method is\n     * always regenerated by the Form Editor.\n     */\n    @SuppressWarnings(&quot;unchecked&quot;)\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \n    private void initComponents() {\n \n        jLabelFicheAchat = new javax.swing.JLabel();\n        jComboIdPdt = new javax.swing.JComboBox&lt;&gt;();\n        jLabelMarque = new javax.swing.JLabel();\n        jLabelModele = new javax.swing.JLabel();\n        jLabelAnnee = new javax.swing.JLabel();\n        jLabelPrix = new javax.swing.JLabel();\n        jComboIdFrs = new javax.swing.JComboBox&lt;&gt;();\n        jLabelNom = new javax.swing.JLabel();\n        jComboQte = new javax.swing.JComboBox&lt;&gt;();\n        jLabelQte = new javax.swing.JLabel();\n        Achat = new javax.swing.JButton();\n \n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\n \n        jLabelFicheAchat.setFont(new java.awt.Font(&quot;Tahoma&quot;, 0, 18)); // NOI18N\n        jLabelFicheAchat.setText(&quot;Creation Achat&quot;);\n \n        jComboIdPdt.setModel(new javax.swing.DefaultComboBoxModel&lt;&gt;(new String[] { &quot;Item 1&quot;, &quot;Item 2&quot;, &quot;Item 3&quot;, &quot;Item 4&quot; }));\n \n        jLabelMarque.setText(&quot;jLabel1&quot;);\n \n        jLabelModele.setText(&quot;jLabel1&quot;);\n \n        jLabelAnnee.setText(&quot;jLabel1&quot;);\n \n        jLabelPrix.setText(&quot;jLabel1&quot;);\n \n        jComboIdFrs.setModel(new javax.swing.DefaultComboBoxModel&lt;&gt;(new String[] { &quot;Item 1&quot;, &quot;Item 2&quot;, &quot;Item 3&quot;, &quot;Item 4&quot; }));\n \n        jLabelNom.setText(&quot;jLabel1&quot;);\n \n        jComboQte.setModel(new javax.swing.DefaultComboBoxModel&lt;&gt;(new String[] { &quot;Item 1&quot;, &quot;Item 2&quot;, &quot;Item 3&quot;, &quot;Item 4&quot; }));\n \n        jLabelQte.setText(&quot;Quantit:&quot;);\n \n        Achat.setText(&quot;ACHETER&quot;);\n \n        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());\n        getContentPane().setLayout(layout);\n        layout.setHorizontalGroup(\n            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()\n                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                .add(jLabelFicheAchat, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 177, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n                .add(91, 91, 91))\n            .add(layout.createSequentialGroup()\n                .add(24, 24, 24)\n                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n                    .add(layout.createSequentialGroup()\n                        .add(jComboIdPdt, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n                        .add(53, 53, 53)\n                        .add(jLabelMarque)\n                        .add(18, 18, 18)\n                        .add(jLabelModele)\n                        .add(28, 28, 28)\n                        .add(jLabelAnnee)\n                        .add(18, 18, 18)\n                        .add(jLabelPrix))\n                    .add(layout.createSequentialGroup()\n                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n                            .add(jComboIdFrs, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n                            .add(jLabelQte))\n                        .add(53, 53, 53)\n                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n                            .add(jComboQte, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n                            .add(jLabelNom)\n                            .add(Achat))))\n                .addContainerGap(66, Short.MAX_VALUE))\n        );\n        layout.setVerticalGroup(\n            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n            .add(layout.createSequentialGroup()\n                .add(21, 21, 21)\n                .add(jLabelFicheAchat)\n                .add(18, 18, 18)\n                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)\n                    .add(jComboIdPdt, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n                    .add(jLabelMarque)\n                    .add(jLabelModele)\n                    .add(jLabelAnnee)\n                    .add(jLabelPrix))\n                .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)\n                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)\n                    .add(jComboIdFrs, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n                    .add(jLabelNom))\n                .add(18, 18, 18)\n                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)\n                    .add(jComboQte, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n                    .add(jLabelQte))\n                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 76, Short.MAX_VALUE)\n                .add(Achat)\n                .add(51, 51, 51))\n        );\n \n        pack();\n    }// &lt;/editor-fold&gt;                        \n \n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String args[]) {\n        /* Set the Nimbus look and feel */\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Look and feel setting code (optional) &quot;&gt;\n        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.\n         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html \n         */\n        try {\n            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\n                if (&quot;Nimbus&quot;.equals(info.getName())) {\n                    javax.swing.UIManager.setLookAndFeel(info.getClassName());\n                    break;\n                }\n            }\n        } catch (ClassNotFoundException ex) {\n            java.util.logging.Logger.getLogger(FrameAchat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (InstantiationException ex) {\n            java.util.logging.Logger.getLogger(FrameAchat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (IllegalAccessException ex) {\n            java.util.logging.Logger.getLogger(FrameAchat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (javax.swing.UnsupportedLookAndFeelException ex) {\n            java.util.logging.Logger.getLogger(FrameAchat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        }\n        //&lt;/editor-fold&gt;\n \n        /* Create and display the form */\n        java.awt.EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                new FrameAchat().setVisible(true);\n            }\n        });\n    }\n \n    // Variables declaration - do not modify                     \n    private javax.swing.JButton Achat;\n    private javax.swing.JComboBox&lt;String&gt; jComboIdFrs;\n    private javax.swing.JComboBox&lt;String&gt; jComboIdPdt;\n    private javax.swing.JComboBox&lt;String&gt; jComboQte;\n    private javax.swing.JLabel jLabelAnnee;\n    private javax.swing.JLabel jLabelFicheAchat;\n    private javax.swing.JLabel jLabelMarque;\n    private javax.swing.JLabel jLabelModele;\n    private javax.swing.JLabel jLabelNom;\n    private javax.swing.JLabel jLabelPrix;\n    private javax.swing.JLabel jLabelQte;\n    // End of variables declaration                   \n \n    public void miseAJourComboBox(JComboBox&lt;String&gt; jcb){\n        System.out.println(&quot;hi&quot;);\n    }\n \n \n}\n</code></pre>\n"},{"tags":["java","function","processing"],"comments":[{"owner":{"account_id":2734060,"reputation":263882,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"score":2,"creation_date":1497805206,"post_id":44617413,"comment_id":76220856,"body_markdown":"`if (!whatever)`","body":"<code>if (!whatever)</code>"},{"owner":{"account_id":2130230,"reputation":15498,"user_id":1891219,"display_name":"gaborsch"},"score":0,"creation_date":1497807642,"post_id":44617413,"comment_id":76221487,"body_markdown":"If is called `if(!(` `))` -- no syntactical candy for that, the language is complete and fully understandable without that.","body":"If is called <code>if(!(</code> <code>))</code> -- no syntactical candy for that, the language is complete and fully understandable without that."},{"owner":{"account_id":1313746,"reputation":4358,"user_id":1261166,"accept_rate":87,"display_name":"Viktor Mellgren"},"score":0,"creation_date":1497824291,"post_id":44617413,"comment_id":76225926,"body_markdown":"I guess you come from ruby or something where the unless keyword exists, you have to live without it in java unfortunately, not that hard to read &quot;if amount is not 20&quot;","body":"I guess you come from ruby or something where the unless keyword exists, you have to live without it in java unfortunately, not that hard to read &quot;if amount is not 20&quot;"},{"owner":{"account_id":467643,"reputation":41696,"user_id":873165,"accept_rate":84,"display_name":"Kevin Workman"},"score":0,"creation_date":1497836362,"post_id":44617413,"comment_id":76228239,"body_markdown":"Please see my edited answer.","body":"Please see my edited answer."},{"owner":{"account_id":9335950,"reputation":170,"user_id":6930127,"display_name":"A. Cucci"},"score":0,"creation_date":1497837806,"post_id":44617413,"comment_id":76228542,"body_markdown":"Like what everyone else here is saying, what you&#39;re asking for just seems to be an if/else statement.","body":"Like what everyone else here is saying, what you&#39;re asking for just seems to be an if/else statement."},{"owner":{"account_id":6775970,"reputation":7385,"user_id":5217712,"display_name":"Enzokie"},"score":1,"creation_date":1497837934,"post_id":44617413,"comment_id":76228577,"body_markdown":"[Unless is just a negated if](https://stackoverflow.com/a/4806484/5217712). Java don&#39;t have that but you have if-else.","body":"<a href=\"https://stackoverflow.com/a/4806484/5217712\">Unless is just a negated if</a>. Java don&#39;t have that but you have if-else."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1646415485,"post_id":44617413,"comment_id":126125408,"body_markdown":"If you don&#39;t mean an `if`, you probably mean a `while` or a `break`. Or an `if` nevertheless.","body":"If you don&#39;t mean an <code>if</code>, you probably mean a <code>while</code> or a <code>break</code>. Or an <code>if</code> nevertheless."}],"answers":[{"tags":[],"owner":{"account_id":467643,"reputation":41696,"user_id":873165,"accept_rate":84,"display_name":"Kevin Workman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646415338,"creation_date":1497805363,"answer_id":44617454,"question_id":44617413,"body_markdown":"Couple options:\r\n\r\n    if(thing){\r\n       //do the thing\r\n    }\r\n    else{\r\n       //do the other thing\r\n    }\r\n\r\nThis checks if `thing` is true, and if it is it executes the first block. If it&#39;s not, then it executes the `else` block.\r\n\r\nOr you could use the `!` not operator:\r\n\r\n    if(!thing){\r\n       //do the other thing\r\n    }\r\n\r\nThis uses the `!` not operator, which reverses `thing`. In other words this checks if `thing` is false, and if so it executes the code block.\r\n\r\n**Edit:** Your example would be this:\r\n\r\n    if (amountOfThings != 20){\r\n       System.out.println(i);\r\n    }\r\n\r\nShameless self-promotion: [here](http://happycoding.io/tutorials/processing/if-statements) is a tutorial on `if` statements in Processing.","title":"Is there an &quot;unless&quot; function in java or Processing? Something that runs code unless a certain parameter is met?","body":"<p>Couple options:</p>\n<pre><code>if(thing){\n   //do the thing\n}\nelse{\n   //do the other thing\n}\n</code></pre>\n<p>This checks if <code>thing</code> is true, and if it is it executes the first block. If it's not, then it executes the <code>else</code> block.</p>\n<p>Or you could use the <code>!</code> not operator:</p>\n<pre><code>if(!thing){\n   //do the other thing\n}\n</code></pre>\n<p>This uses the <code>!</code> not operator, which reverses <code>thing</code>. In other words this checks if <code>thing</code> is false, and if so it executes the code block.</p>\n<p><strong>Edit:</strong> Your example would be this:</p>\n<pre><code>if (amountOfThings != 20){\n   System.out.println(i);\n}\n</code></pre>\n<p>Shameless self-promotion: <a href=\"http://happycoding.io/tutorials/processing/if-statements\" rel=\"nofollow noreferrer\">here</a> is a tutorial on <code>if</code> statements in Processing.</p>\n"},{"tags":[],"owner":{"account_id":1012855,"reputation":941,"user_id":1025044,"display_name":"Oron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1514510700,"creation_date":1514510700,"answer_id":48016340,"question_id":44617413,"body_markdown":"No. \r\nYou can also not put the &#39;if&#39; or &#39;unless&#39; condition at the end of the statement.\r\n\r\nIf it helps you feel any better I met many people who complained about the fact that it does exist in Perl.","title":"Is there an &quot;unless&quot; function in java or Processing? Something that runs code unless a certain parameter is met?","body":"<p>No. \nYou can also not put the 'if' or 'unless' condition at the end of the statement.</p>\n\n<p>If it helps you feel any better I met many people who complained about the fact that it does exist in Perl.</p>\n"}],"owner":{"account_id":11144104,"reputation":41,"user_id":8179528,"display_name":"AbandonFandom"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6043,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"answer_count":2,"score":1,"last_activity_date":1646415338,"creation_date":1497805119,"question_id":44617413,"body_markdown":"This might be a stupid thing to ask but is there something that does this:\r\n\r\n\r\n\r\n    unless (boolean==true){\r\n           do aThing;\r\n    } otherwise {\r\n           do somethingElse;\r\n    }\r\n\r\nEDIT: I don&#39;t mean an &quot;if/else&quot; statement. I&#39;m pretty familiar with those.\r\n\r\nHere&#39;s a more accurate example of what I&#39;m talking about:\r\n\r\n    Scanner in = new Scanner(System.in);\r\n    \r\n    int amountOfThings= in.nextInt();\r\n    \r\n    for (int i = 0; i &lt;=amountOfThings;i++){\r\n    \r\n    unless (amountOfThings==20){\r\n    System.out.println(i);\r\n     }\r\n    }\r\n\r\n","title":"Is there an &quot;unless&quot; function in java or Processing? Something that runs code unless a certain parameter is met?","body":"<p>This might be a stupid thing to ask but is there something that does this:</p>\n\n<pre><code>unless (boolean==true){\n       do aThing;\n} otherwise {\n       do somethingElse;\n}\n</code></pre>\n\n<p>EDIT: I don't mean an \"if/else\" statement. I'm pretty familiar with those.</p>\n\n<p>Here's a more accurate example of what I'm talking about:</p>\n\n<pre><code>Scanner in = new Scanner(System.in);\n\nint amountOfThings= in.nextInt();\n\nfor (int i = 0; i &lt;=amountOfThings;i++){\n\nunless (amountOfThings==20){\nSystem.out.println(i);\n }\n}\n</code></pre>\n"},{"tags":["java","hibernate","orm","jpa"],"comments":[{"owner":{"account_id":5448480,"reputation":761,"user_id":4334147,"accept_rate":91,"display_name":"Alex"},"score":0,"creation_date":1658332650,"post_id":4627221,"comment_id":129027357,"body_markdown":"This was very useful for me:  https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/fix-ConcurrentModificationException-java-fail-safe-fast-solve","body":"This was very useful for me:  <a href=\"https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/fix-ConcurrentModificationException-java-fail-safe-fast-solve\" rel=\"nofollow noreferrer\">theserverside.com/blog/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1294417265,"creation_date":1294415146,"answer_id":4627292,"question_id":4627221,"body_markdown":"This problem has nothing to do with the ORM, as far as I can tell. **You cannot use the syntactic-sugar `foreach` construct in Java to remove an element from a collection.**\r\n\r\n&gt; Note that `Iterator.remove` is the _only_ safe way to modify a collection during iteration; the behavior is unspecified if the underlying collection is modified in any other way while the iteration is in progress.\r\n\r\n[Source](http://download.oracle.com/javase/tutorial/collections/interfaces/collection.html)\r\n\r\n_Simplified example of the problematic code:_\r\n\r\n    List&lt;B&gt; bs = a.getBs();\r\n    for (B b : bs)\r\n    {\r\n        if (/* some condition */)\r\n        {\r\n            bs.remove(b); // throws ConcurrentModificationException\r\n        }\r\n    }\r\n\r\nYou **must** use the `Iterator` version to remove elements while iterating. _Correct implementation:_\r\n\r\n    List&lt;B&gt; bs = a.getBs();\r\n    for (Iterator&lt;B&gt; iter = bs.iterator(); iter.hasNext();)\r\n    {\r\n        B b = iter.next();\r\n        if (/* some condition */)\r\n        {\r\n            iter.remove(); // works correctly\r\n        }\r\n    }\r\n\r\n---------------------\r\n\r\n_Edit:_ I think this will work; untested however. If not, you should stop seeing `ConcurrentModificationException`s but instead (I think) you&#39;ll see `ConstraintViolationException`s.\r\n\r\n    void removeA(A a)\r\n    {\r\n        if (a != null)\r\n        {\r\n            a.setBs(new ArrayList&lt;B&gt;()); // wipe out all of a&#39;s Bs\r\n            entityManager.merge(a);      // synchronize the state with the database\r\n            entityManager.remove(a);     // removing should now work without ConstraintViolationExceptions\r\n        }\r\n    }","title":"JPA ManyToMany ConcurrentModificationException issues","body":"<p>This problem has nothing to do with the ORM, as far as I can tell. <strong>You cannot use the syntactic-sugar <code>foreach</code> construct in Java to remove an element from a collection.</strong></p>\n\n<blockquote>\n  <p>Note that <code>Iterator.remove</code> is the <em>only</em> safe way to modify a collection during iteration; the behavior is unspecified if the underlying collection is modified in any other way while the iteration is in progress.</p>\n</blockquote>\n\n<p><a href=\"http://download.oracle.com/javase/tutorial/collections/interfaces/collection.html\" rel=\"nofollow\">Source</a></p>\n\n<p><em>Simplified example of the problematic code:</em></p>\n\n<pre><code>List&lt;B&gt; bs = a.getBs();\nfor (B b : bs)\n{\n    if (/* some condition */)\n    {\n        bs.remove(b); // throws ConcurrentModificationException\n    }\n}\n</code></pre>\n\n<p>You <strong>must</strong> use the <code>Iterator</code> version to remove elements while iterating. <em>Correct implementation:</em></p>\n\n<pre><code>List&lt;B&gt; bs = a.getBs();\nfor (Iterator&lt;B&gt; iter = bs.iterator(); iter.hasNext();)\n{\n    B b = iter.next();\n    if (/* some condition */)\n    {\n        iter.remove(); // works correctly\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><em>Edit:</em> I think this will work; untested however. If not, you should stop seeing <code>ConcurrentModificationException</code>s but instead (I think) you'll see <code>ConstraintViolationException</code>s.</p>\n\n<pre><code>void removeA(A a)\n{\n    if (a != null)\n    {\n        a.setBs(new ArrayList&lt;B&gt;()); // wipe out all of a's Bs\n        entityManager.merge(a);      // synchronize the state with the database\n        entityManager.remove(a);     // removing should now work without ConstraintViolationExceptions\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646415018,"creation_date":1294429304,"answer_id":4629550,"question_id":4627221,"body_markdown":"&gt; If the collection, `a.getBs()` here, contains more than one element, then a `ConcurrentModificationException` is thrown \r\n\r\nThe issue is that the collections inside of A, B, and C are magical Hibernate collections so when you run the following statement:\r\n\r\n    b.getAs().remove( a );\r\n\r\nthis removes a from b&#39;s collection but it *also* removes b from a&#39;s list which happens to be the collection being iterated over in the for loop.  That generates the `ConcurrentModificationException`. \r\n\r\nMatt&#39;s solution should work if you are really removing all elements in the collection.  If you aren&#39;t however another work around is to copy all of the b&#39;s into a collection which removes the magical Hibernate collection from the process.\r\n\r\n    // copy out of the magic hibernate collection to a local collection\r\n    List&lt;B&gt; copy = new ArrayList&lt;&gt;(a.getBs());\r\n    for (B b : copy) {\r\n       b.getAs().remove(a) ;\r\n       entityManager.merge(b);\r\n    }\r\n\r\nThat should get you a little further down the road.","title":"JPA ManyToMany ConcurrentModificationException issues","body":"<blockquote>\n<p>If the collection, <code>a.getBs()</code> here, contains more than one element, then a <code>ConcurrentModificationException</code> is thrown</p>\n</blockquote>\n<p>The issue is that the collections inside of A, B, and C are magical Hibernate collections so when you run the following statement:</p>\n<pre><code>b.getAs().remove( a );\n</code></pre>\n<p>this removes a from b's collection but it <em>also</em> removes b from a's list which happens to be the collection being iterated over in the for loop.  That generates the <code>ConcurrentModificationException</code>.</p>\n<p>Matt's solution should work if you are really removing all elements in the collection.  If you aren't however another work around is to copy all of the b's into a collection which removes the magical Hibernate collection from the process.</p>\n<pre><code>// copy out of the magic hibernate collection to a local collection\nList&lt;B&gt; copy = new ArrayList&lt;&gt;(a.getBs());\nfor (B b : copy) {\n   b.getAs().remove(a) ;\n   entityManager.merge(b);\n}\n</code></pre>\n<p>That should get you a little further down the road.</p>\n"},{"tags":[],"owner":{"account_id":5804027,"reputation":1,"user_id":4577290,"display_name":"Roxanne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424215258,"creation_date":1424210087,"answer_id":28571849,"question_id":4627221,"body_markdown":"Gray&#39;s solution worked! Fortunately for us the JPA people seem to have been trying to implement collections as close to official Sun documentation on the proper use of `List&lt;&gt;` collections has indicated:\r\n\r\n&gt;Note that Iterator.remove is the only safe way to modify a collection during iteration; the behavior is unspecified if the underlying collection is modified in any other way while the iteration is in progress.\r\n\r\nI was all but pulling out my hair over this exception thinking it meant one `@Stateless` method could not call another `@Stateless` method from it&#39;s own class. This I thought odd as I was sure that I read somewhere that nested transactions are allowed. So when I did a search on this very exception, I found this posting and applied Gray&#39;s solution. Only in my case I happened to have two independent collections that had to be handled. As Gray indicated, according the Java spec on the proper way to remove from a member from a Java container, you need to use a copy of the original container to iterate with and then do your `remove()` on the original container which makes a lot of sense. Otherwise, the original container&#39;s link list algorithm gets confused.\r\n\r\n\t\tfor ( Participant p2 : new ArrayList&lt;Participant&gt;( p1.getFollowing() )) {\r\n\t\t\tp1.getFollowing().remove(p2);\r\n\t\t\tgetEm().merge(p1);\r\n\t\t\tp2.getFollowers().remove(p1);\r\n\t\t\tgetEm().merge(p2);\r\n\t\t}\r\n\r\nNotice I only make a copy of the first collection (`p1.getFollowing()`) and not the second collection (`p2.getFollowers()`). That is because I only need to iterate from one collection even though I need to remove associations from both collections.","title":"JPA ManyToMany ConcurrentModificationException issues","body":"<p>Gray's solution worked! Fortunately for us the JPA people seem to have been trying to implement collections as close to official Sun documentation on the proper use of <code>List&lt;&gt;</code> collections has indicated:</p>\n\n<blockquote>\n  <p>Note that Iterator.remove is the only safe way to modify a collection during iteration; the behavior is unspecified if the underlying collection is modified in any other way while the iteration is in progress.</p>\n</blockquote>\n\n<p>I was all but pulling out my hair over this exception thinking it meant one <code>@Stateless</code> method could not call another <code>@Stateless</code> method from it's own class. This I thought odd as I was sure that I read somewhere that nested transactions are allowed. So when I did a search on this very exception, I found this posting and applied Gray's solution. Only in my case I happened to have two independent collections that had to be handled. As Gray indicated, according the Java spec on the proper way to remove from a member from a Java container, you need to use a copy of the original container to iterate with and then do your <code>remove()</code> on the original container which makes a lot of sense. Otherwise, the original container's link list algorithm gets confused.</p>\n\n<pre><code>    for ( Participant p2 : new ArrayList&lt;Participant&gt;( p1.getFollowing() )) {\n        p1.getFollowing().remove(p2);\n        getEm().merge(p1);\n        p2.getFollowers().remove(p1);\n        getEm().merge(p2);\n    }\n</code></pre>\n\n<p>Notice I only make a copy of the first collection (<code>p1.getFollowing()</code>) and not the second collection (<code>p2.getFollowers()</code>). That is because I only need to iterate from one collection even though I need to remove associations from both collections.</p>\n"}],"owner":{"account_id":226552,"reputation":5016,"user_id":487662,"accept_rate":100,"display_name":"Gustav Barkefors"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6667,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":4629550,"answer_count":3,"score":6,"last_activity_date":1646415018,"creation_date":1294414662,"question_id":4627221,"body_markdown":"We have three entities with bidirectional many-to-many mappings in a A &lt;-&gt; B &lt;-&gt; C &quot;hierarchy&quot; like so (simplified, of course):\r\n\r\n    @Entity\r\n    Class A {\r\n      @Id int id;\r\n      @JoinTable(\r\n        name = &quot;a_has_b&quot;,\r\n        joinColumns = {@JoinColumn(name = &quot;a_id&quot;, referencedColumnName = &quot;id&quot;)},\r\n        inverseJoinColumns = {@JoinColumn(name = &quot;b_id&quot;, referencedColumnName = &quot;id&quot;)})\r\n      @ManyToMany\r\n      Collection&lt;B&gt; bs;\r\n    }\r\n\r\n    @Entity\r\n    Class B {\r\n      @Id int id;\r\n      @JoinTable(\r\n        name = &quot;b_has_c&quot;,\r\n        joinColumns = {@JoinColumn(name = &quot;b_id&quot;, referencedColumnName = &quot;id&quot;)},\r\n        inverseJoinColumns = {@JoinColumn(name = &quot;c_id&quot;, referencedColumnName = &quot;id&quot;)})\r\n      @ManyToMany(fetch=FetchType.EAGER,\r\n        cascade=CascadeType.MERGE,CascadeType.PERSIST,CascadeType.REFRESH})\r\n      @org.hibernate.annotations.Fetch(FetchMode.SUBSELECT)\r\n      private Collection&lt;C&gt; cs;\r\n      @ManyToMany(mappedBy = &quot;bs&quot;, fetch=FetchType.EAGER,\r\n        cascade={CascadeType.MERGE,CascadeType.PERSIST,  CascadeType.REFRESH})\r\n      @org.hibernate.annotations.Fetch(FetchMode.SUBSELECT)\r\n      private Collection&lt;A&gt; as;\r\n    }\r\n\r\n    @Entity\r\n    Class C {\r\n      @Id int id;\r\n      @ManyToMany(mappedBy = &quot;cs&quot;, fetch=FetchType.EAGER, \r\n        cascade={CascadeType.MERGE,CascadeType.PERSIST,  CascadeType.REFRESH})\r\n      @org.hibernate.annotations.Fetch(FetchMode.SUBSELECT)\r\n      private Collection&lt;B&gt; bs;\r\n    }\r\n\r\nThere&#39;s no conecpt of an orphan - the entities are &quot;standalone&quot; from the application&#39;s point of view - and most of the time we&#39;re going to have a fistful of A:s, each with a couple of B:s (some may be &quot;shared&quot; among the A:s), and some 1000 C:s, not all of which are always &quot;in use&quot; by any B. We&#39;ve concluded that we need bidirectional relations, since whenever an entity instance is removed, all links (entries in the join tables) have to be removed too. That is done like this:\r\n\r\n    void removeA( A a ) {\r\n      if ( a.getBs != null ) {\r\n        for ( B b : a.getBs() ) {  //&lt;--------- ConcurrentModificationException here\r\n          b.getAs().remove( a ) ;\r\n          entityManager.merge( b );\r\n        }\r\n      }\r\n      entityManager.remove( a );\r\n    }\r\n\r\nIf the collection, `a.getBs()` here, contains more than one element, then a `ConcurrentModificationException` is thrown. I&#39;ve been banging my head for a while now, but can&#39;t think of a reasonable way of removing the links without meddling with the collection, which makes underlying the `Iterator` angry.\r\n\r\nQ1: How am I supposed to do this, given the current ORM setup? (If at all...)\r\n\r\nQ2: Is there a more reasonable way do design the OR-mappings that will let JPA (provided by Hibernate in this case) take care of everything. It&#39;d be just swell if we didn&#39;t have to include those `I&#39;ll be deleted now, so everybody I know, listen carefully: you don&#39;t need to know about this!`-loops, which aren&#39;t working anyway, as it stands...\r\n\r\n","title":"JPA ManyToMany ConcurrentModificationException issues","body":"<p>We have three entities with bidirectional many-to-many mappings in a A &lt;-> B &lt;-> C \"hierarchy\" like so (simplified, of course):</p>\n\n<pre><code>@Entity\nClass A {\n  @Id int id;\n  @JoinTable(\n    name = \"a_has_b\",\n    joinColumns = {@JoinColumn(name = \"a_id\", referencedColumnName = \"id\")},\n    inverseJoinColumns = {@JoinColumn(name = \"b_id\", referencedColumnName = \"id\")})\n  @ManyToMany\n  Collection&lt;B&gt; bs;\n}\n\n@Entity\nClass B {\n  @Id int id;\n  @JoinTable(\n    name = \"b_has_c\",\n    joinColumns = {@JoinColumn(name = \"b_id\", referencedColumnName = \"id\")},\n    inverseJoinColumns = {@JoinColumn(name = \"c_id\", referencedColumnName = \"id\")})\n  @ManyToMany(fetch=FetchType.EAGER,\n    cascade=CascadeType.MERGE,CascadeType.PERSIST,CascadeType.REFRESH})\n  @org.hibernate.annotations.Fetch(FetchMode.SUBSELECT)\n  private Collection&lt;C&gt; cs;\n  @ManyToMany(mappedBy = \"bs\", fetch=FetchType.EAGER,\n    cascade={CascadeType.MERGE,CascadeType.PERSIST,  CascadeType.REFRESH})\n  @org.hibernate.annotations.Fetch(FetchMode.SUBSELECT)\n  private Collection&lt;A&gt; as;\n}\n\n@Entity\nClass C {\n  @Id int id;\n  @ManyToMany(mappedBy = \"cs\", fetch=FetchType.EAGER, \n    cascade={CascadeType.MERGE,CascadeType.PERSIST,  CascadeType.REFRESH})\n  @org.hibernate.annotations.Fetch(FetchMode.SUBSELECT)\n  private Collection&lt;B&gt; bs;\n}\n</code></pre>\n\n<p>There's no conecpt of an orphan - the entities are \"standalone\" from the application's point of view - and most of the time we're going to have a fistful of A:s, each with a couple of B:s (some may be \"shared\" among the A:s), and some 1000 C:s, not all of which are always \"in use\" by any B. We've concluded that we need bidirectional relations, since whenever an entity instance is removed, all links (entries in the join tables) have to be removed too. That is done like this:</p>\n\n<pre><code>void removeA( A a ) {\n  if ( a.getBs != null ) {\n    for ( B b : a.getBs() ) {  //&lt;--------- ConcurrentModificationException here\n      b.getAs().remove( a ) ;\n      entityManager.merge( b );\n    }\n  }\n  entityManager.remove( a );\n}\n</code></pre>\n\n<p>If the collection, <code>a.getBs()</code> here, contains more than one element, then a <code>ConcurrentModificationException</code> is thrown. I've been banging my head for a while now, but can't think of a reasonable way of removing the links without meddling with the collection, which makes underlying the <code>Iterator</code> angry.</p>\n\n<p>Q1: How am I supposed to do this, given the current ORM setup? (If at all...)</p>\n\n<p>Q2: Is there a more reasonable way do design the OR-mappings that will let JPA (provided by Hibernate in this case) take care of everything. It'd be just swell if we didn't have to include those <code>I'll be deleted now, so everybody I know, listen carefully: you don't need to know about this!</code>-loops, which aren't working anyway, as it stands...</p>\n"},{"tags":["java","orika"],"comments":[{"owner":{"account_id":213379,"reputation":9738,"user_id":466738,"accept_rate":94,"display_name":"Adam Michalik"},"score":0,"creation_date":1452956384,"post_id":34819117,"comment_id":57398410,"body_markdown":"What&#39;s wrong with the solution you just posted? Looks like the right way to go.","body":"What&#39;s wrong with the solution you just posted? Looks like the right way to go."},{"owner":{"account_id":2070924,"reputation":4391,"user_id":1845432,"accept_rate":65,"display_name":"Thermech"},"score":0,"creation_date":1453128787,"post_id":34819117,"comment_id":57454457,"body_markdown":"@AdamMichalik MappingContext is abstract and cannot be instantiated. I didn&#39;t find a way to extract the actual mapper context nor to build a new one with a MappingContextFactory","body":"@AdamMichalik MappingContext is abstract and cannot be instantiated. I didn&#39;t find a way to extract the actual mapper context nor to build a new one with a MappingContextFactory"},{"owner":{"account_id":213379,"reputation":9738,"user_id":466738,"accept_rate":94,"display_name":"Adam Michalik"},"score":2,"creation_date":1453129075,"post_id":34819117,"comment_id":57454667,"body_markdown":"[`MappingContext.Factory.getContext()`](http://javadox.com/ma.glasnost.orika/orika-core/1.4.0/ma/glasnost/orika/MappingContext.Factory.html#getContext())? Seems you should call `release()` once you&#39;re done with the context.","body":"<a href=\"http://javadox.com/ma.glasnost.orika/orika-core/1.4.0/ma/glasnost/orika/MappingContext.Factory.html#getContext()\" rel=\"nofollow noreferrer\"><code>MappingContext.Factory.getContext()</code></a>? Seems you should call <code>release()</code> once you&#39;re done with the context."}],"answers":[{"tags":[],"owner":{"account_id":2070924,"reputation":4391,"user_id":1845432,"accept_rate":65,"display_name":"Thermech"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1453922056,"creation_date":1453922056,"answer_id":35046049,"question_id":34819117,"body_markdown":"The solution is simple:\r\n\r\n    MappingContext context = new MappingContext.Factory().getContext();\r\n    context.setProperty(&quot;name&quot;, &quot;value&quot;);\r\n    mapper.map(objA, objB, context);","title":"Add external data to Orika MappingContext while mapping","body":"<p>The solution is simple:</p>\n\n<pre><code>MappingContext context = new MappingContext.Factory().getContext();\ncontext.setProperty(\"name\", \"value\");\nmapper.map(objA, objB, context);\n</code></pre>\n"}],"owner":{"account_id":2070924,"reputation":4391,"user_id":1845432,"accept_rate":65,"display_name":"Thermech"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5013,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":35046049,"answer_count":1,"score":4,"last_activity_date":1646414943,"creation_date":1452888762,"question_id":34819117,"body_markdown":"I want to add some external properties (something not in the object I&#39;m mapping) to the MappingContext.\r\n\r\nHere what I want to accomplish:\r\n\r\n        MapperFactory mapperFactory = new DefaultMapperFactory.Builder().build();\r\n        mapperFactory.classMap(ObjA.class, ObjB.class).customize(new CustomMapper&lt;ObjA, ObjB&gt;() {\r\n            @Override\r\n            public void mapAtoB(ObjA objA, ObjB objB, MappingContext context) {\r\n                objB.setName((String) context.getProperty(&quot;name&quot;));\r\n            }\r\n        }).byDefault().register();\r\n        MapperFacade mapper = mapperFactory.getMapperFacade();\r\n        \r\n        ObjA objA = new ObjA();\r\n        ObjB objB = new ObjB();\r\n        \r\n        MappingContext context = new MappingContext(); //PROBLEME IS HERE: MappingContext is a abstract class\r\n        context.setProperty(&quot;name&quot;, &quot;Some information not in objA nor in objB&quot;);\r\n        mapper.map(objA, objB, context);\r\n\r\nHow can I do that? Can I dynamically add data to the context? Or is it an other way to pass additional data to mapper?","title":"Add external data to Orika MappingContext while mapping","body":"<p>I want to add some external properties (something not in the object I'm mapping) to the MappingContext.</p>\n\n<p>Here what I want to accomplish:</p>\n\n<pre><code>    MapperFactory mapperFactory = new DefaultMapperFactory.Builder().build();\n    mapperFactory.classMap(ObjA.class, ObjB.class).customize(new CustomMapper&lt;ObjA, ObjB&gt;() {\n        @Override\n        public void mapAtoB(ObjA objA, ObjB objB, MappingContext context) {\n            objB.setName((String) context.getProperty(\"name\"));\n        }\n    }).byDefault().register();\n    MapperFacade mapper = mapperFactory.getMapperFacade();\n\n    ObjA objA = new ObjA();\n    ObjB objB = new ObjB();\n\n    MappingContext context = new MappingContext(); //PROBLEME IS HERE: MappingContext is a abstract class\n    context.setProperty(\"name\", \"Some information not in objA nor in objB\");\n    mapper.map(objA, objB, context);\n</code></pre>\n\n<p>How can I do that? Can I dynamically add data to the context? Or is it an other way to pass additional data to mapper?</p>\n"},{"tags":["java","user-interface","swing","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":185700,"reputation":91879,"user_id":422597,"display_name":"Colin Hebert"},"down_vote_count":1,"up_vote_count":40,"is_accepted":true,"score":39,"last_activity_date":1519216847,"creation_date":1286699988,"answer_id":3899609,"question_id":3899525,"body_markdown":"Simply go into the class associated with your form, press &lt;kbd&gt;alt&lt;/kbd&gt; + &lt;kbd&gt;insert&lt;/kbd&gt; and choose &quot;Form main()&quot;.\r\n\r\n---\r\n\r\n**Resources :**\r\n\r\n - [GUI Designer Basics][1]\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/gui-designer-basics.html","title":"How to use GUI form created in IntelliJ IDEA","body":"<p>Simply go into the class associated with your form, press <kbd>alt</kbd> + <kbd>insert</kbd> and choose \"Form main()\".</p>\n\n<hr>\n\n<p><strong>Resources :</strong></p>\n\n<ul>\n<li><a href=\"https://www.jetbrains.com/help/idea/gui-designer-basics.html\" rel=\"noreferrer\">GUI Designer Basics</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1131734,"reputation":1308,"user_id":1117664,"display_name":"rem"},"down_vote_count":0,"up_vote_count":104,"is_accepted":false,"score":104,"last_activity_date":1461662278,"creation_date":1324991003,"answer_id":8644983,"question_id":3899525,"body_markdown":"I was stumped when IntelliJ consistently errored out when choosing `Form main()` from the insert menu, with an error message saying something about an invalid root component.\r\n\r\nIt turns out it means that the `JPanel` that is the main (root) component of your `Form` needs to have a field bound to it, and by default it doesn&#39;t do this.\r\n\r\nSimply select the `JPanel` in the form designer, and give it a name (`field name`) in the property pane.\r\n\r\nAfter this it will generate the `main()` just fine.","title":"How to use GUI form created in IntelliJ IDEA","body":"<p>I was stumped when IntelliJ consistently errored out when choosing <code>Form main()</code> from the insert menu, with an error message saying something about an invalid root component.</p>\n\n<p>It turns out it means that the <code>JPanel</code> that is the main (root) component of your <code>Form</code> needs to have a field bound to it, and by default it doesn't do this.</p>\n\n<p>Simply select the <code>JPanel</code> in the form designer, and give it a name (<code>field name</code>) in the property pane.</p>\n\n<p>After this it will generate the <code>main()</code> just fine.</p>\n"},{"tags":[],"owner":{"account_id":11629757,"reputation":11,"user_id":8518381,"display_name":"CrudeJoe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646414213,"creation_date":1646298526,"answer_id":71334571,"question_id":3899525,"body_markdown":"First add `private JPanel Main;` inside the class. Then, in the form&#39;s panel properties, add `Main` to the field name. Then, go to your class and from the `Alt` + `Insert` menu, select `Main`. \r\n\r\nNow, the error wont come.","title":"How to use GUI form created in IntelliJ IDEA","body":"<p>First add <code>private JPanel Main;</code> inside the class. Then, in the form's panel properties, add <code>Main</code> to the field name. Then, go to your class and from the <code>Alt</code> + <code>Insert</code> menu, select <code>Main</code>.</p>\n<p>Now, the error wont come.</p>\n"}],"owner":{"account_id":801598,"reputation":371,"user_id":471411,"display_name":"Dmitriy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42927,"favorite_count":0,"down_vote_count":1,"up_vote_count":37,"accepted_answer_id":3899609,"answer_count":3,"score":36,"last_activity_date":1646414213,"creation_date":1286698147,"question_id":3899525,"body_markdown":"I&#39;m creating a simple GUI form with one button in IntelliJ IDEA 9. The class which was created with the form is not JFrame or any other swing class. How I can call my form in my source code?","title":"How to use GUI form created in IntelliJ IDEA","body":"<p>I'm creating a simple GUI form with one button in IntelliJ IDEA 9. The class which was created with the form is not JFrame or any other swing class. How I can call my form in my source code?</p>\n"},{"tags":["java","variables","types"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1271762585,"post_id":2674554,"comment_id":2693320,"body_markdown":"Are you really interested in the *type of the variable*? Or do you care about the *type of the value*? Because the type of the variable can&#39;t easily be gotten (in fact it&#39;s not possible at all for local variables and requires reflection for fields).","body":"Are you really interested in the <i>type of the variable</i>? Or do you care about the <i>type of the value</i>? Because the type of the variable can&#39;t easily be gotten (in fact it&#39;s not possible at all for local variables and requires reflection for fields)."},{"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"score":0,"creation_date":1271763116,"post_id":2674554,"comment_id":2693362,"body_markdown":"@Joachim, what exactly is the difference between &quot;type of the variable&quot; and &quot;type of the value&quot;?","body":"@Joachim, what exactly is the difference between &quot;type of the variable&quot; and &quot;type of the value&quot;?"},{"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":9,"creation_date":1271764959,"post_id":2674554,"comment_id":2693573,"body_markdown":"@Paul: Consider `Object o = &quot;o&quot;;` - the type of the variable is Object, the type of the value is String.","body":"@Paul: Consider <code>Object o = &quot;o&quot;;</code> - the type of the variable is Object, the type of the value is String."},{"owner":{"account_id":18056,"reputation":28943,"user_id":41012,"accept_rate":78,"display_name":"Ben Lings"},"score":2,"creation_date":1271765079,"post_id":2674554,"comment_id":2693588,"body_markdown":"@Paul In `List&lt;String&gt; l = new ArrayList&lt;String&gt;();`, the type of the variable is `List&lt;String&gt;`, the type of the value is `ArrayList&lt;String&gt;`.","body":"@Paul In <code>List&lt;String&gt; l = new ArrayList&lt;String&gt;();</code>, the type of the variable is <code>List&lt;String&gt;</code>, the type of the value is <code>ArrayList&lt;String&gt;</code>."},{"owner":{"account_id":463980,"reputation":6162,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"score":1,"creation_date":1381999037,"post_id":2674554,"comment_id":28791959,"body_markdown":"@Ben Lings The type of variable is java.util.ArrayList and the type of value is java.util.ArrayList.","body":"@Ben Lings The type of variable is java.util.ArrayList and the type of value is java.util.ArrayList."},{"owner":{"account_id":18056,"reputation":28943,"user_id":41012,"accept_rate":78,"display_name":"Ben Lings"},"score":2,"creation_date":1382001039,"post_id":2674554,"comment_id":28793104,"body_markdown":"@AjayThakur - it&#39;s the difference between the compile-time (static) type and the runtime (dynamic) type.","body":"@AjayThakur - it&#39;s the difference between the compile-time (static) type and the runtime (dynamic) type."}],"answers":[{"tags":[],"owner":{"account_id":41031,"reputation":37399,"user_id":119159,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":369,"is_accepted":true,"score":369,"last_activity_date":1271762284,"creation_date":1271762284,"answer_id":2674558,"question_id":2674554,"body_markdown":"    a.getClass().getName()","title":"How do you know a variable type in java?","body":"<pre><code>a.getClass().getName()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":103388,"reputation":58275,"user_id":276949,"accept_rate":87,"display_name":"Martin Konecny"},"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1332181131,"creation_date":1271762536,"answer_id":2674579,"question_id":2674554,"body_markdown":"If you want the name, use Martin&#39;s method. If you want to know whether it&#39;s an instance of a certain class:\r\n\r\n`boolean b = a instanceof String`","title":"How do you know a variable type in java?","body":"<p>If you want the name, use Martin's method. If you want to know whether it's an instance of a certain class:</p>\n\n<p><code>boolean b = a instanceof String</code></p>\n"},{"tags":[],"owner":{"account_id":30319,"reputation":90360,"user_id":82609,"accept_rate":84,"display_name":"Sebastien Lorber"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1499711439,"creation_date":1271764066,"answer_id":2674757,"question_id":2674554,"body_markdown":"I agree with what Joachim Sauer said, not possible to know (the variable type! not value type!) unless your variable is a class attribute (and you would have to retrieve class fields, get the right field by name...)\r\n\r\n\r\nActually for me it&#39;s totally impossible that any `a.xxx().yyy()` method give you the right answer since the answer would be different on the exact same object, according to the context in which you call this method...\r\n\r\n\r\n\r\nAs teehoo said, if you know at compile a defined list of types to test you can use instanceof but you will also get subclasses returning true... \r\n\r\n\r\n\r\n\r\nOne possible solution would also be to inspire yourself from the implementation of `java.lang.reflect.Field` and create your own `Field` class, and then declare all your local variables as this custom `Field` implementation... but you&#39;d better find another solution, i really wonder why you need the variable type, and not just the value type?\r\n\r\n","title":"How do you know a variable type in java?","body":"<p>I agree with what Joachim Sauer said, not possible to know (the variable type! not value type!) unless your variable is a class attribute (and you would have to retrieve class fields, get the right field by name...)</p>\n\n<p>Actually for me it's totally impossible that any <code>a.xxx().yyy()</code> method give you the right answer since the answer would be different on the exact same object, according to the context in which you call this method...</p>\n\n<p>As teehoo said, if you know at compile a defined list of types to test you can use instanceof but you will also get subclasses returning true... </p>\n\n<p>One possible solution would also be to inspire yourself from the implementation of <code>java.lang.reflect.Field</code> and create your own <code>Field</code> class, and then declare all your local variables as this custom <code>Field</code> implementation... but you'd better find another solution, i really wonder why you need the variable type, and not just the value type?</p>\n"},{"tags":[],"owner":{"account_id":3968373,"reputation":341,"user_id":3273579,"display_name":"Copy_Paste"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1499711365,"creation_date":1391574287,"answer_id":21568625,"question_id":2674554,"body_markdown":"I learned from the Search Engine(My English is very bad , So code...)\r\nHow to get variable&#39;s type?\r\nUp&#39;s :\r\n\r\n    String str = &quot;test&quot;;\r\n    String type = str.getClass().getName();\r\n    value: type = java.lang.String\r\n\r\nthis method :\r\n\r\n    str.getClass().getSimpleName();\r\n    value:String\r\n\r\nnow example:\r\n\r\n    Object o = 1;\r\n    o.getClass().getSimpleName();\r\n    value:Integer\r\n   ","title":"How do you know a variable type in java?","body":"<p>I learned from the Search Engine(My English is very bad , So code...)\nHow to get variable's type?\nUp's :</p>\n\n<pre><code>String str = \"test\";\nString type = str.getClass().getName();\nvalue: type = java.lang.String\n</code></pre>\n\n<p>this method :</p>\n\n<pre><code>str.getClass().getSimpleName();\nvalue:String\n</code></pre>\n\n<p>now example:</p>\n\n<pre><code>Object o = 1;\no.getClass().getSimpleName();\nvalue:Integer\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4336062,"reputation":1379,"user_id":3540514,"display_name":"Atspulgs"},"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1646413890,"creation_date":1413982618,"answer_id":26507980,"question_id":2674554,"body_markdown":"Expanding on Martin&#39;s answer...\r\n\r\n**Martins Solution**\r\n\r\n    a.getClass().getName()\r\n\r\n**Expanded Solution**\r\n\r\nIf you want it to work with anything you can do this:\r\n\r\n    ((Object) myVar).getClass().getName()\r\n    //OR\r\n    ((Object) myInt).getClass().getSimpleName()\r\n\r\nIn case of a primitive type, it will be wrapped (Autoboxed) in a corresponding Object variant.\r\n\r\n**Example #1 (Regular)**\r\n\r\n    private static String nameOf(Object o) {\r\n        return o.getClass().getSimpleName();\r\n    }\r\n\r\n\r\n**Example #2 (Generics)**\r\n\r\n    public static &lt;T&gt; String nameOf(T o) {\r\n        return o.getClass().getSimpleName();\r\n    }\r\n\r\n---\r\n\r\n**Additional Learning**\r\n\r\n - Material on Java Types, Values and Variables: https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html\r\n - Autoboxing and Unboxing: https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\r\n - Docs on Pattern Matching for instanceof: https://docs.oracle.com/en/java/javase/14/language/pattern-matching-instanceof-operator.html","title":"How do you know a variable type in java?","body":"<p>Expanding on Martin's answer...</p>\n<p><strong>Martins Solution</strong></p>\n<pre><code>a.getClass().getName()\n</code></pre>\n<p><strong>Expanded Solution</strong></p>\n<p>If you want it to work with anything you can do this:</p>\n<pre><code>((Object) myVar).getClass().getName()\n//OR\n((Object) myInt).getClass().getSimpleName()\n</code></pre>\n<p>In case of a primitive type, it will be wrapped (Autoboxed) in a corresponding Object variant.</p>\n<p><strong>Example #1 (Regular)</strong></p>\n<pre><code>private static String nameOf(Object o) {\n    return o.getClass().getSimpleName();\n}\n</code></pre>\n<p><strong>Example #2 (Generics)</strong></p>\n<pre><code>public static &lt;T&gt; String nameOf(T o) {\n    return o.getClass().getSimpleName();\n}\n</code></pre>\n<hr />\n<p><strong>Additional Learning</strong></p>\n<ul>\n<li>Material on Java Types, Values and Variables: <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html</a></li>\n<li>Autoboxing and Unboxing: <a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html</a></li>\n<li>Docs on Pattern Matching for instanceof: <a href=\"https://docs.oracle.com/en/java/javase/14/language/pattern-matching-instanceof-operator.html\" rel=\"noreferrer\">https://docs.oracle.com/en/java/javase/14/language/pattern-matching-instanceof-operator.html</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9258287,"reputation":59,"user_id":6876330,"display_name":"epicwhat001"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1499711477,"creation_date":1474763743,"answer_id":39682303,"question_id":2674554,"body_markdown":"Use operator overloading feature of java\r\n\r\n\r\n    class Test {\r\n        \r\n        void printType(String x) {\r\n            System.out.print(&quot;String&quot;);\r\n        }\r\n    \r\n        void printType(int x) {     \r\n            System.out.print(&quot;Int&quot;);\r\n        }\r\n    \r\n        // same goes on with boolean,double,float,object ...\r\n        \r\n    }","title":"How do you know a variable type in java?","body":"<p>Use operator overloading feature of java</p>\n\n<pre><code>class Test {\n\n    void printType(String x) {\n        System.out.print(\"String\");\n    }\n\n    void printType(int x) {     \n        System.out.print(\"Int\");\n    }\n\n    // same goes on with boolean,double,float,object ...\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":168381,"reputation":5234,"user_id":393809,"accept_rate":57,"display_name":"narancs"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1560260506,"creation_date":1499712264,"answer_id":45019533,"question_id":2674554,"body_markdown":"I think we have multiple solutions here:\r\n\r\n -  **instance of** could be a solution.\r\n\r\nWhy?\r\nIn Java every class is inherited from the Object class itself. So if you have a variable and you would like to know its type. You can use\r\n\r\n - System.out.println(((Object)f).getClass().getName());\r\n\r\nor\r\n\r\n - Integer.class.isInstance(1985); // gives true\r\n\r\nor\r\n\r\n - isPrimitive()\r\n\r\n        public static void main(String[] args) {\r\n\r\n         ClassDemo classOne = new ClassDemo();\r\n         Class classOneClass = classOne();\r\n\r\n         int i = 5;\r\n         Class iClass = int.class;\r\n  \r\n         // checking for primitive type\r\n         boolean retval1 = classOneClass.isPrimitive();\r\n         System.out.println(&quot;classOneClass is primitive type? = &quot; + retval1);\r\n\r\n         // checking for primitive type?\r\n         boolean retval2 = iClass.isPrimitive();\r\n         System.out.println(&quot;iClass is primitive type? = &quot; + retval2);\r\n        }\r\n\r\nThis going to give us:\r\n\r\n 1. FALSE\r\n 2. TRUE\r\n\r\nFind out more here:\r\nhttps://stackoverflow.com/questions/12361492/how-to-determine-the-primitive-type-of-a-primitive-variable\r\n\r\nhttps://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\r\n\r\nhttp://docs.oracle.com/cd/E26806_01/wlp.1034/e14255/com/bea/p13n/expression/operator/Instanceof.html","title":"How do you know a variable type in java?","body":"<p>I think we have multiple solutions here:</p>\n\n<ul>\n<li><strong>instance of</strong> could be a solution.</li>\n</ul>\n\n<p>Why?\nIn Java every class is inherited from the Object class itself. So if you have a variable and you would like to know its type. You can use</p>\n\n<ul>\n<li>System.out.println(((Object)f).getClass().getName());</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>Integer.class.isInstance(1985); // gives true</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li><p>isPrimitive()</p>\n\n<pre><code>public static void main(String[] args) {\n\n ClassDemo classOne = new ClassDemo();\n Class classOneClass = classOne();\n\n int i = 5;\n Class iClass = int.class;\n\n // checking for primitive type\n boolean retval1 = classOneClass.isPrimitive();\n System.out.println(\"classOneClass is primitive type? = \" + retval1);\n\n // checking for primitive type?\n boolean retval2 = iClass.isPrimitive();\n System.out.println(\"iClass is primitive type? = \" + retval2);\n}\n</code></pre></li>\n</ul>\n\n<p>This going to give us:</p>\n\n<ol>\n<li>FALSE</li>\n<li>TRUE</li>\n</ol>\n\n<p>Find out more here:\n<a href=\"https://stackoverflow.com/questions/12361492/how-to-determine-the-primitive-type-of-a-primitive-variable\">How to determine the primitive type of a primitive variable?</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html</a></p>\n\n<p><a href=\"http://docs.oracle.com/cd/E26806_01/wlp.1034/e14255/com/bea/p13n/expression/operator/Instanceof.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/cd/E26806_01/wlp.1034/e14255/com/bea/p13n/expression/operator/Instanceof.html</a></p>\n"}],"owner":{"account_id":125062,"reputation":8067,"user_id":320586,"accept_rate":82,"display_name":"Miguel Ribeiro"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":514894,"favorite_count":0,"down_vote_count":0,"up_vote_count":201,"closed_date":1617437711,"accepted_answer_id":2674558,"answer_count":7,"score":201,"last_activity_date":1646413890,"creation_date":1271762243,"question_id":2674554,"body_markdown":"Let&#39;s say I declare a variable:\r\n\r\n    String a = &quot;test&quot;;\r\n\r\nAnd I want to know what type it is, i.e., the output should be `java.lang.String` How do I do this?\r\n","title":"How do you know a variable type in java?","body":"<p>Let's say I declare a variable:</p>\n\n<pre><code>String a = \"test\";\n</code></pre>\n\n<p>And I want to know what type it is, i.e., the output should be <code>java.lang.String</code> How do I do this?</p>\n"},{"tags":["java","multithreading","matrix","thread-synchronization"],"answers":[{"tags":[],"owner":{"account_id":5445861,"reputation":339,"user_id":4332437,"display_name":"Claudio Corsi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646413460,"creation_date":1417896802,"answer_id":27335991,"question_id":27334005,"body_markdown":"There are several issues with your code.  \r\n\r\nThe t threads assume that only t multiplications are required to produce your result matrix.  This is not to be the case when m != k or t != m or t != k.  The threads are worker threads that will only process your requests.  I would consider making each MatrixMultiplier have access to the mxn, nxk, mxk matrices and a rolcolumn entries container. \r\n\r\n    class MatricMultiplier {\r\n        private double a[][], b[][], results[][];\r\n        private Queue&lt;..&gt; entries;\r\n        ....\r\n    }\r\n\r\nThe run method will then use the entries container to calculate the sum for a given &lt;row,column&gt; entry of the resulting mxk matrix.  The run method could become:\r\n\r\n    run() {\r\n        for (Entry entry = entries.poll(); entry != null; entry = entries.poll()) {\r\n            int row = entry.row;\r\n            int col = entry.col;\r\n            double sum = 0.0;\r\n            for (int i = 0; i &lt; a[row].length; i++) {\r\n                sum += a[row][i] * b[i][col];\r\n            }\r\n            results[row][col] = sum;\r\n        }\r\n    }\r\n\r\nThere are three things to note here that is different than what you have.  \r\n\r\n 1. you are not using a synchronization block\r\n 2. each entry is calculating the answer for a unique row/column of the result matrix\r\n 3. the Multiple class is not required any longer\r\n\r\nYou can then create t threads that process each entry in the entries container and will exit when the entries container is empty.\r\n\r\nNote that the entries container should be one of the concurrent Queue containers available in the java.util.concurrent package.\r\n\r\nThe remaining task is how to create the rowcolumn entries container.  Here is some code that you could use:\r\n\r\n    Queue&lt;..&gt; entries = new Concurrent...&lt;..&gt;();\r\n    int rowSize = a.length;\r\n    int colSize = b[0].length;\r\n    for (int row = 0; row &lt; rowSize; row++) {\r\n        for (int col = 0; col &lt; colSize; col++) {\r\n            entries.add(new RowColumnEntry(row, col));\r\n        }\r\n    }\r\n\r\nNoting that the `a` and `b` are the `m&#215;n` and `n&#215;k` matrices.\r\n\r\nHope this helps.\r\n","title":"Java multi-thread matrix multiplication","body":"<p>There are several issues with your code.</p>\n<p>The t threads assume that only t multiplications are required to produce your result matrix.  This is not to be the case when m != k or t != m or t != k.  The threads are worker threads that will only process your requests.  I would consider making each MatrixMultiplier have access to the mxn, nxk, mxk matrices and a rolcolumn entries container.</p>\n<pre><code>class MatricMultiplier {\n    private double a[][], b[][], results[][];\n    private Queue&lt;..&gt; entries;\n    ....\n}\n</code></pre>\n<p>The run method will then use the entries container to calculate the sum for a given &lt;row,column&gt; entry of the resulting mxk matrix.  The run method could become:</p>\n<pre><code>run() {\n    for (Entry entry = entries.poll(); entry != null; entry = entries.poll()) {\n        int row = entry.row;\n        int col = entry.col;\n        double sum = 0.0;\n        for (int i = 0; i &lt; a[row].length; i++) {\n            sum += a[row][i] * b[i][col];\n        }\n        results[row][col] = sum;\n    }\n}\n</code></pre>\n<p>There are three things to note here that is different than what you have.</p>\n<ol>\n<li>you are not using a synchronization block</li>\n<li>each entry is calculating the answer for a unique row/column of the result matrix</li>\n<li>the Multiple class is not required any longer</li>\n</ol>\n<p>You can then create t threads that process each entry in the entries container and will exit when the entries container is empty.</p>\n<p>Note that the entries container should be one of the concurrent Queue containers available in the java.util.concurrent package.</p>\n<p>The remaining task is how to create the rowcolumn entries container.  Here is some code that you could use:</p>\n<pre><code>Queue&lt;..&gt; entries = new Concurrent...&lt;..&gt;();\nint rowSize = a.length;\nint colSize = b[0].length;\nfor (int row = 0; row &lt; rowSize; row++) {\n    for (int col = 0; col &lt; colSize; col++) {\n        entries.add(new RowColumnEntry(row, col));\n    }\n}\n</code></pre>\n<p>Noting that the <code>a</code> and <code>b</code> are the <code>mn</code> and <code>nk</code> matrices.</p>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":3466437,"reputation":13,"user_id":2901837,"display_name":"Jake"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2011,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646413460,"creation_date":1417884692,"question_id":27334005,"body_markdown":"Trying to get a multi-threaded matrix multiplication to work in Java. It is given a (m x n) matrix, a (n x k) matrix and &#39;t&#39; threads to perform the operation on.\r\n\r\nMy program works when the matrices are square and t == n. When running with t &lt; n, the other threads do not pick up the additional operations, and it returns a partially completed matrix. When the matrices are not square, the additional threads return array out of bounds errors and do not run. I would really appreciate any advice. Here are the relevant code snippets\r\n\r\nBeginning threads. multipliers is an array of MatrixMultiplier, a class defined later.\r\n\r\n\r\n    Multiply multiply = new Multiply(cols_mat, rows_mat2);\r\n\r\n    for (int i = 0; i &lt; threads; i++) {\r\n        multipliers[i] = new MatrixMultiplier(multiply);\r\n    }\r\n\r\n    for (int i = 0; i &lt; threads; i++) {\r\n        my_threads[i] = new Thread(multipliers[i]);\r\n    }\r\n\r\n    for (int i = 0; i &lt; threads; i++) {\r\n        my_threads[i].start();\r\n    }\r\n\r\n    for (int i = 0; i &lt; threads; i++) {\r\n        my_threads[i].join();\r\n    }\r\n\r\nMultiply class which defines the matrix multiplication\r\n\r\n    class Multiply extends MatrixMultiplication {\r\n        private int i;\r\n        private int j;\r\n        private int chance;\r\n\r\n        public Multiply(int i, int j) {\r\n            this.i = i;\r\n            this.j = j;\r\n            chance = 0;\r\n        }\r\n\r\n        public synchronized void multiplyMatrix() {\r\n            int sum = 0;\r\n            int a = 0;\r\n            for (a = 0; a &lt; i; a++) {\r\n                sum = 0;\r\n                for (int b = 0; b &lt; j; b++) {\r\n                    sum = sum + mat[chance][b] * mat2[b][a];\r\n                }\r\n                result[chance][a] = sum;\r\n            }\r\n\r\n            if (chance &gt;= i)\r\n                return;\r\n            chance++;\r\n        }\r\n    }\r\n\r\nAnd the matrix multiplier\r\n\r\n    class MatrixMultiplier implements Runnable {\r\n        private final Multiply mul;\r\n\r\n        public MatrixMultiplier(Multiply mul) {\r\n            this.mul = mul;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            mul.multiplyMatrix();\r\n        }\r\n    }\r\n\r\nWhere I personally think the issue lies is with `if (chance &gt;= i) return;` but I have not found a way to incorporate a thread&#39;s column responsibilities with the program still working. Again, any advice pointing me in the right direction would be greatly appreciated.\r\n","title":"Java multi-thread matrix multiplication","body":"<p>Trying to get a multi-threaded matrix multiplication to work in Java. It is given a (m x n) matrix, a (n x k) matrix and 't' threads to perform the operation on.</p>\n<p>My program works when the matrices are square and t == n. When running with t &lt; n, the other threads do not pick up the additional operations, and it returns a partially completed matrix. When the matrices are not square, the additional threads return array out of bounds errors and do not run. I would really appreciate any advice. Here are the relevant code snippets</p>\n<p>Beginning threads. multipliers is an array of MatrixMultiplier, a class defined later.</p>\n<pre><code>Multiply multiply = new Multiply(cols_mat, rows_mat2);\n\nfor (int i = 0; i &lt; threads; i++) {\n    multipliers[i] = new MatrixMultiplier(multiply);\n}\n\nfor (int i = 0; i &lt; threads; i++) {\n    my_threads[i] = new Thread(multipliers[i]);\n}\n\nfor (int i = 0; i &lt; threads; i++) {\n    my_threads[i].start();\n}\n\nfor (int i = 0; i &lt; threads; i++) {\n    my_threads[i].join();\n}\n</code></pre>\n<p>Multiply class which defines the matrix multiplication</p>\n<pre><code>class Multiply extends MatrixMultiplication {\n    private int i;\n    private int j;\n    private int chance;\n\n    public Multiply(int i, int j) {\n        this.i = i;\n        this.j = j;\n        chance = 0;\n    }\n\n    public synchronized void multiplyMatrix() {\n        int sum = 0;\n        int a = 0;\n        for (a = 0; a &lt; i; a++) {\n            sum = 0;\n            for (int b = 0; b &lt; j; b++) {\n                sum = sum + mat[chance][b] * mat2[b][a];\n            }\n            result[chance][a] = sum;\n        }\n\n        if (chance &gt;= i)\n            return;\n        chance++;\n    }\n}\n</code></pre>\n<p>And the matrix multiplier</p>\n<pre><code>class MatrixMultiplier implements Runnable {\n    private final Multiply mul;\n\n    public MatrixMultiplier(Multiply mul) {\n        this.mul = mul;\n    }\n\n    @Override\n    public void run() {\n        mul.multiplyMatrix();\n    }\n}\n</code></pre>\n<p>Where I personally think the issue lies is with <code>if (chance &gt;= i) return;</code> but I have not found a way to incorporate a thread's column responsibilities with the program still working. Again, any advice pointing me in the right direction would be greatly appreciated.</p>\n"},{"tags":["java","log4j","log4j2","data-masking"],"comments":[{"owner":{"account_id":1337360,"reputation":1556,"user_id":1279761,"accept_rate":50,"display_name":"disklosr"},"score":0,"creation_date":1531242826,"post_id":49143855,"comment_id":89519857,"body_markdown":"I&#39;m interested in this. Did you find a good way to solve your problem?","body":"I&#39;m interested in this. Did you find a good way to solve your problem?"},{"owner":{"account_id":10208055,"reputation":917,"user_id":7697901,"display_name":"Alexandr Kovalenko"},"score":1,"creation_date":1587544249,"post_id":49143855,"comment_id":108549536,"body_markdown":"try this way https://stackoverflow.com/a/61360391/7697901","body":"try this way <a href=\"https://stackoverflow.com/a/61360391/7697901\">stackoverflow.com/a/61360391/7697901</a>"}],"answers":[{"tags":[],"owner":{"account_id":2038464,"reputation":6504,"user_id":1820217,"accept_rate":54,"display_name":"einverne"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1545373674,"creation_date":1545373674,"answer_id":53880152,"question_id":49143855,"body_markdown":"I think there are three ways to solve your problem which you all covered. Most efficient way is to prevent log sensitive data to logger, which you need a bunch of work to do.\r\n\r\nAnd the second way is to modify Appender. By extend log4j Appenders, you modify the LogEvent.\r\n\r\nAnd last way is to modify the PatternLayout. Here is an [example][1].\r\n\r\n    public class CardNumberFilteringLayout extends PatternLayout {\r\n        private static final String MASK = &quot;$1++++++++++++&quot;;\r\n        private static final Pattern PATTERN = Pattern.compile(&quot;([0-9]{4})([0-9]{9,15})&quot;);\r\n    \r\n        @Override\r\n        public String format(LoggingEvent event) {\r\n            if (event.getMessage() instanceof String) {\r\n                String message = event.getRenderedMessage();\r\n                Matcher matcher = PATTERN.matcher(message);\r\n    \r\n                if (matcher.find()) {\r\n                    String maskedMessage = matcher.replaceAll(MASK);\r\n                    @SuppressWarnings({ &quot;ThrowableResultOfMethodCallIgnored&quot; })\r\n                    Throwable throwable = event.getThrowableInformation() != null ? \r\n                            event.getThrowableInformation().getThrowable() : null;\r\n                    LoggingEvent maskedEvent = new LoggingEvent(event.fqnOfCategoryClass,\r\n                            Logger.getLogger(event.getLoggerName()), event.timeStamp, \r\n                            event.getLevel(), maskedMessage, throwable);\r\n    \r\n                    return super.format(maskedEvent);\r\n                }\r\n            }\r\n            return super.format(event);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/2461726/1820217","title":"Masking sensitive data before getting logged - log4j","body":"<p>I think there are three ways to solve your problem which you all covered. Most efficient way is to prevent log sensitive data to logger, which you need a bunch of work to do.</p>\n\n<p>And the second way is to modify Appender. By extend log4j Appenders, you modify the LogEvent.</p>\n\n<p>And last way is to modify the PatternLayout. Here is an <a href=\"https://stackoverflow.com/q/2461726/1820217\">example</a>.</p>\n\n<pre><code>public class CardNumberFilteringLayout extends PatternLayout {\n    private static final String MASK = \"$1++++++++++++\";\n    private static final Pattern PATTERN = Pattern.compile(\"([0-9]{4})([0-9]{9,15})\");\n\n    @Override\n    public String format(LoggingEvent event) {\n        if (event.getMessage() instanceof String) {\n            String message = event.getRenderedMessage();\n            Matcher matcher = PATTERN.matcher(message);\n\n            if (matcher.find()) {\n                String maskedMessage = matcher.replaceAll(MASK);\n                @SuppressWarnings({ \"ThrowableResultOfMethodCallIgnored\" })\n                Throwable throwable = event.getThrowableInformation() != null ? \n                        event.getThrowableInformation().getThrowable() : null;\n                LoggingEvent maskedEvent = new LoggingEvent(event.fqnOfCategoryClass,\n                        Logger.getLogger(event.getLoggerName()), event.timeStamp, \n                        event.getLevel(), maskedMessage, throwable);\n\n                return super.format(maskedEvent);\n            }\n        }\n        return super.format(event);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4821988,"reputation":2025,"user_id":3892439,"accept_rate":55,"display_name":"vigamage"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15523,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1646413435,"creation_date":1520395075,"question_id":49143855,"body_markdown":"For logging purposes, instead of using `toString()` method, Jackson&#39;s `writeValueAsString(object)` method has been used in the project I have been working for.\r\n\r\n    LOGGER.info(mapper.writeValueAsString(object));\r\n\r\nNow, I got the requirement to mask the sensitive information like passwords and credit card numbers in logs. If `toString()` is being used, I could have removed those sensitive data from the `toString()` method. But in my case, I could not find such simple yet correct way of getting my problem solved. I am not in a situation where I can change the entire thing to use `toString()` too.\r\n\r\nI read that by using `%replace` method, I can replace the data which I don&#39;t need to be logged in using a predefined pattern. But all the sensitive data that need to be masked wont follow a single pattern.\r\n\r\nI tried by intercepting the log event, look for the particular information and mask them(Using a class which implements `LogEventFactory`). Even though it is a working solution, I don&#39;t think that it is a good solution since looking for the data in big strings every time is gonna cost. \r\n\r\nIs there any way that I haven&#39;t come across yet to get my problem resolved? Is the approach with `%replace` is the way to go? If so, how? \r\n","title":"Masking sensitive data before getting logged - log4j","body":"<p>For logging purposes, instead of using <code>toString()</code> method, Jackson's <code>writeValueAsString(object)</code> method has been used in the project I have been working for.</p>\n\n<pre><code>LOGGER.info(mapper.writeValueAsString(object));\n</code></pre>\n\n<p>Now, I got the requirement to mask the sensitive information like passwords and credit card numbers in logs. If <code>toString()</code> is being used, I could have removed those sensitive data from the <code>toString()</code> method. But in my case, I could not find such simple yet correct way of getting my problem solved. I am not in a situation where I can change the entire thing to use <code>toString()</code> too.</p>\n\n<p>I read that by using <code>%replace</code> method, I can replace the data which I don't need to be logged in using a predefined pattern. But all the sensitive data that need to be masked wont follow a single pattern.</p>\n\n<p>I tried by intercepting the log event, look for the particular information and mask them(Using a class which implements <code>LogEventFactory</code>). Even though it is a working solution, I don't think that it is a good solution since looking for the data in big strings every time is gonna cost. </p>\n\n<p>Is there any way that I haven't come across yet to get my problem resolved? Is the approach with <code>%replace</code> is the way to go? If so, how? </p>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"score":1,"creation_date":1646367146,"post_id":71346366,"comment_id":126110715,"body_markdown":"Instead of calling repository, you should call it index :)","body":"Instead of calling repository, you should call it index :)"},{"owner":{"account_id":22022326,"reputation":46,"user_id":16290940,"display_name":"Abhinav Batta"},"score":1,"creation_date":1646378169,"post_id":71346366,"comment_id":126112638,"body_markdown":"Sorry, I missed :) thanks for reminding !!","body":"Sorry, I missed :) thanks for reminding !!"}],"answers":[{"tags":[],"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646367067,"creation_date":1646367067,"answer_id":71346525,"question_id":71346366,"body_markdown":"Although Elasticsearch generates the mapping when you don&#39;t define one, and just index the document, but that way Elasticsearch generates the mapping based on the first document data, for example you have `product-id` field in your index, and if you index it without defining explicit mapping, Elasticsearch generates two data-type, one is `text` and another is `keyword` for this field when you index `product-id` as below.\r\n\r\n```\r\n{\r\n&quot;product-id&quot; : &quot;1&quot;\r\n}\r\n```\r\n\r\n\r\nNow, it depends on your use-case, let&#39;s suppose in your case, `product-id` is keyword and fixed, and you just want to use the `exact search` or `aggregation` on the `product-id` field, and don&#39;t want the `full-text search`, than you better go with explicit mapping and define it as in `keyword` field, that way Elasticsearch storage and queries would be optimal. You can refer to this [Stackoverflow comment][1], for more information on it.\r\n\r\n**Bottomline, When you want to have a greater control on how your data should be indexed, It&#39;s always better to define explicit mapping than relaying on default mapping generated by Elasticsearch.**\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/71327447/elastic-search-lowercase-analyser-does-not-return-search-result/71331811#comment126086964_71331811","title":"Why do we create mapping in elasticsearch while setting up repository?","body":"<p>Although Elasticsearch generates the mapping when you don't define one, and just index the document, but that way Elasticsearch generates the mapping based on the first document data, for example you have <code>product-id</code> field in your index, and if you index it without defining explicit mapping, Elasticsearch generates two data-type, one is <code>text</code> and another is <code>keyword</code> for this field when you index <code>product-id</code> as below.</p>\n<pre><code>{\n&quot;product-id&quot; : &quot;1&quot;\n}\n</code></pre>\n<p>Now, it depends on your use-case, let's suppose in your case, <code>product-id</code> is keyword and fixed, and you just want to use the <code>exact search</code> or <code>aggregation</code> on the <code>product-id</code> field, and don't want the <code>full-text search</code>, than you better go with explicit mapping and define it as in <code>keyword</code> field, that way Elasticsearch storage and queries would be optimal. You can refer to this <a href=\"https://stackoverflow.com/questions/71327447/elastic-search-lowercase-analyser-does-not-return-search-result/71331811#comment126086964_71331811\">Stackoverflow comment</a>, for more information on it.</p>\n<p><strong>Bottomline, When you want to have a greater control on how your data should be indexed, It's always better to define explicit mapping than relaying on default mapping generated by Elasticsearch.</strong></p>\n"}],"owner":{"account_id":22022326,"reputation":46,"user_id":16290940,"display_name":"Abhinav Batta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71346525,"answer_count":1,"score":1,"last_activity_date":1646413428,"creation_date":1646365304,"question_id":71346366,"body_markdown":"Okay, I got it [this question][1] that what is the need for mapping.\r\n\r\nNow I am going through a piece of code, what they are doing is that they are generating the mapping while creating the elastic search repository by pushing a dummy object and then deleting it. \r\n\r\nI got it that elastic search can generate mappings, but what is the point of doing so. It does not help with the search queries ( at least the regex one that I have tried unless you explicitly tell in your mapping that this is of type keyword).\r\n\r\nI would be thankful if someone can explain this.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/63261575/why-do-mappings-exist-in-elasticsearch","title":"Why do we create mapping in elasticsearch while setting up repository?","body":"<p>Okay, I got it <a href=\"https://stackoverflow.com/questions/63261575/why-do-mappings-exist-in-elasticsearch\">this question</a> that what is the need for mapping.</p>\n<p>Now I am going through a piece of code, what they are doing is that they are generating the mapping while creating the elastic search repository by pushing a dummy object and then deleting it.</p>\n<p>I got it that elastic search can generate mappings, but what is the point of doing so. It does not help with the search queries ( at least the regex one that I have tried unless you explicitly tell in your mapping that this is of type keyword).</p>\n<p>I would be thankful if someone can explain this.</p>\n"},{"tags":["java","json","rest"],"comments":[{"owner":{"account_id":149941,"reputation":2907,"user_id":362792,"display_name":"Hitobat"},"score":0,"creation_date":1645904737,"post_id":71279745,"comment_id":125994695,"body_markdown":"If you don&#39;t want a null, then you need to put real object instead of null. ie. `mb.setSearch(new JSON());`","body":"If you don&#39;t want a null, then you need to put real object instead of null. ie. <code>mb.setSearch(new JSON());</code>"},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1645904791,"post_id":71279745,"comment_id":125994709,"body_markdown":"Well, presumably, the result says `null` because of `mb.setSearch(null);`. (Rather, it was *already* `null` before that anyway.) Your JSON library gives you JSON objects from Java object instances, right? So you should create some kind of object in Java and assign that, right? Can you think of a way to create an object in Java, such that it would be represented as `{}`? (Hint: How does the library decide on the keys and values to put inside the braces? What should you do in order to make it so that there are none of those?)","body":"Well, presumably, the result says <code>null</code> because of <code>mb.setSearch(null);</code>. (Rather, it was <i>already</i> <code>null</code> before that anyway.) Your JSON library gives you JSON objects from Java object instances, right? So you should create some kind of object in Java and assign that, right? Can you think of a way to create an object in Java, such that it would be represented as <code>{}</code>? (Hint: How does the library decide on the keys and values to put inside the braces? What should you do in order to make it so that there are none of those?)"}],"answers":[{"tags":[],"owner":{"account_id":1294278,"reputation":1043,"user_id":1245752,"display_name":"Frank Riccobono"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1645904593,"creation_date":1645904593,"answer_id":71279776,"question_id":71279745,"body_markdown":"Instead of setting search to null, you need to set it to an empty object.  I&#39;m not sure which JSON library you are using, but there should be an object constructor like `new JsonObject()`.  Depending on what the allowed values for search are, you may also want to consider representing it in your class as `Map&lt;String, String&gt;` or something like that.","title":"Handling empty JSON","body":"<p>Instead of setting search to null, you need to set it to an empty object.  I'm not sure which JSON library you are using, but there should be an object constructor like <code>new JsonObject()</code>.  Depending on what the allowed values for search are, you may also want to consider representing it in your class as <code>Map&lt;String, String&gt;</code> or something like that.</p>\n"},{"tags":[],"owner":{"account_id":24166695,"reputation":51,"user_id":18129429,"display_name":"Vojtch V&#225;chal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645905201,"creation_date":1645905201,"answer_id":71279849,"question_id":71279745,"body_markdown":"I would try something like this:\r\n\r\n\r\n\t\tmb.setSearch(new JSON());\r\n\r\nThis way you create empty object and there should be only {}. It also depends on which JSON library do you use.\r\n","title":"Handling empty JSON","body":"<p>I would try something like this:</p>\n<pre><code>    mb.setSearch(new JSON());\n</code></pre>\n<p>This way you create empty object and there should be only {}. It also depends on which JSON library do you use.</p>\n"},{"tags":[],"owner":{"account_id":23929675,"reputation":13,"user_id":17924359,"display_name":"Swapnil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646413293,"creation_date":1646413293,"answer_id":71354753,"question_id":71279745,"body_markdown":"Issue resolved after using JSONMapper.","title":"Handling empty JSON","body":"<p>Issue resolved after using JSONMapper.</p>\n"}],"owner":{"account_id":23929675,"reputation":13,"user_id":17924359,"display_name":"Swapnil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1217,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1646413293,"creation_date":1645904269,"question_id":71279745,"body_markdown":"I need to send following JSON in API BODY POST request:\r\n\r\n    {\r\n        &quot;name&quot;: &quot;&quot;,\r\n        &quot;type&quot;: &quot;TEMP&quot;,\r\n        &quot;shared&quot;: false,\r\n        &quot;search&quot;: {       \r\n        },\r\n        &quot;order&quot;: [\r\n        ]\r\n    }\r\n\r\nIn my MainBody.java, declared\r\n\r\n    private String name;\r\n    private String type;\r\n    private boolean shared;\r\n    private JSON search;\r\n    private Object order;\r\n\r\n\r\nand defined getters and setters.\r\n\r\n\r\nIn Payload.java,\r\n\r\n\r\n\r\n\t\tMainBody mb = new MainBody();\r\n\t\tmb.setName(&quot;&quot;);\r\n\t\tmb.setType(&quot;TEMP&quot;);\r\n\t\tmb.setShared(false);\r\n\t\tmb.setSearch(null);\r\n\t\tmb.setOrder(new ArrayList&lt;&gt;());\r\n\t\t\r\n\t\tObjectMapper om =  new ObjectMapper();\r\n\t\t\r\n\t\tString myData = om.writerWithDefaultPrettyPrinter().writeValueAsString(mb);\r\n\t\tSystem.out.println(myData);\r\n\r\nresults\r\n\r\n    {\r\n      &quot;name&quot; : &quot;&quot;,\r\n      &quot;type&quot; : &quot;TEMP&quot;,\r\n      &quot;shared&quot; : false,\r\n      &quot;search&quot; : null,\r\n      &quot;order&quot; : [ ]\r\n    }\r\n\r\nPlease assist with how search as { } can be achieved as per expected JSON instead of null.\r\n\r\nTIA.","title":"Handling empty JSON","body":"<p>I need to send following JSON in API BODY POST request:</p>\n<pre><code>{\n    &quot;name&quot;: &quot;&quot;,\n    &quot;type&quot;: &quot;TEMP&quot;,\n    &quot;shared&quot;: false,\n    &quot;search&quot;: {       \n    },\n    &quot;order&quot;: [\n    ]\n}\n</code></pre>\n<p>In my MainBody.java, declared</p>\n<pre><code>private String name;\nprivate String type;\nprivate boolean shared;\nprivate JSON search;\nprivate Object order;\n</code></pre>\n<p>and defined getters and setters.</p>\n<p>In Payload.java,</p>\n<pre><code>    MainBody mb = new MainBody();\n    mb.setName(&quot;&quot;);\n    mb.setType(&quot;TEMP&quot;);\n    mb.setShared(false);\n    mb.setSearch(null);\n    mb.setOrder(new ArrayList&lt;&gt;());\n    \n    ObjectMapper om =  new ObjectMapper();\n    \n    String myData = om.writerWithDefaultPrettyPrinter().writeValueAsString(mb);\n    System.out.println(myData);\n</code></pre>\n<p>results</p>\n<pre><code>{\n  &quot;name&quot; : &quot;&quot;,\n  &quot;type&quot; : &quot;TEMP&quot;,\n  &quot;shared&quot; : false,\n  &quot;search&quot; : null,\n  &quot;order&quot; : [ ]\n}\n</code></pre>\n<p>Please assist with how search as { } can be achieved as per expected JSON instead of null.</p>\n<p>TIA.</p>\n"},{"tags":["java","spring","spring-integration","integration"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1640266301,"post_id":70458037,"comment_id":124556984,"body_markdown":"We probably need to know more about your downstream processing. Perhaps you do some thread shifting over there breaking the mentioned order.","body":"We probably need to know more about your downstream processing. Perhaps you do some thread shifting over there breaking the mentioned order."},{"owner":{"account_id":11760122,"reputation":21,"user_id":8606452,"display_name":"Kshitiz"},"score":0,"creation_date":1640323862,"post_id":70458037,"comment_id":124569759,"body_markdown":"As of now, doing nothing, just printing the filename to check. Also, if I remove the custom ordering, by default as per the Spring Docs, it processes in Natural Ordering of path, which is working perfectly fine. But what I want is file should get process in FIFO order instead of natural ordering of path.","body":"As of now, doing nothing, just printing the filename to check. Also, if I remove the custom ordering, by default as per the Spring Docs, it processes in Natural Ordering of path, which is working perfectly fine. But what I want is file should get process in FIFO order instead of natural ordering of path."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646413283,"creation_date":1646413283,"answer_id":71354750,"question_id":70458037,"body_markdown":"This works for me as expected:\r\n\r\n\t@Bean\r\n\tIntegrationFlow lastModifiedOrderFlow() {\r\n\t\treturn IntegrationFlows.from(\r\n\t\t\t\t\t\tFiles.inboundAdapter(new File(System.getProperty(&quot;user.home&quot;) + &quot;/Downloads&quot;),\r\n\t\t\t\t\t\t\t\tComparator.comparingLong(File::lastModified)),\r\n\t\t\t\t\t\te -&gt; e.poller(p -&gt; p.fixedDelay(1000).maxMessagesPerPoll(-1)))\r\n\t\t\t\t.handle(m -&gt; System.out.println(m.getPayload()))\r\n\t\t\t\t.get();\r\n\t}\r\n\r\nWe probably need to know more about your setup.","title":"Spring Integration custom processing order not working","body":"<p>This works for me as expected:</p>\n<pre><code>@Bean\nIntegrationFlow lastModifiedOrderFlow() {\n    return IntegrationFlows.from(\n                    Files.inboundAdapter(new File(System.getProperty(&quot;user.home&quot;) + &quot;/Downloads&quot;),\n                            Comparator.comparingLong(File::lastModified)),\n                    e -&gt; e.poller(p -&gt; p.fixedDelay(1000).maxMessagesPerPoll(-1)))\n            .handle(m -&gt; System.out.println(m.getPayload()))\n            .get();\n}\n</code></pre>\n<p>We probably need to know more about your setup.</p>\n"}],"owner":{"account_id":11760122,"reputation":21,"user_id":8606452,"display_name":"Kshitiz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1646413283,"creation_date":1640237665,"question_id":70458037,"body_markdown":"I have configured spring integration to poll a directory. I have configured InBoundChannelAdaptor with poller configuration of \r\n\r\n**maxMessagesPerPoll = -1\r\ntrigger = PeriodicTrigger(1000)**\r\n\r\nAlso I have provided custom comparator while creating the FileReadingMessageSource, to process the files based on modification datetime.\r\n\r\n        FileReadingMessageSource source = new FileReadingMessageSource(new Comparator&lt;File&gt;(){\r\n        \r\n        @Override\r\n        public int compare(File a , File b)\r\n        {\r\n                if(a.lastModified() &gt; b.lastModified())\r\n                {\r\n                       return 1;\r\n                }else{\r\n                        return -1;\r\n                }\r\n        }\r\n    \r\n    \r\n    })\r\n\r\n\r\nMy folder is having 2000 files, but files are not processing in the lastModified manner, means the oldest file should process first, but it is not happening.\r\n\r\n\r\n","title":"Spring Integration custom processing order not working","body":"<p>I have configured spring integration to poll a directory. I have configured InBoundChannelAdaptor with poller configuration of</p>\n<p><strong>maxMessagesPerPoll = -1\ntrigger = PeriodicTrigger(1000)</strong></p>\n<p>Also I have provided custom comparator while creating the FileReadingMessageSource, to process the files based on modification datetime.</p>\n<pre><code>    FileReadingMessageSource source = new FileReadingMessageSource(new Comparator&lt;File&gt;(){\n    \n    @Override\n    public int compare(File a , File b)\n    {\n            if(a.lastModified() &gt; b.lastModified())\n            {\n                   return 1;\n            }else{\n                    return -1;\n            }\n    }\n\n\n})\n</code></pre>\n<p>My folder is having 2000 files, but files are not processing in the lastModified manner, means the oldest file should process first, but it is not happening.</p>\n"},{"tags":["java","maven","report","junit5","maven-surefire-plugin"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1646470588,"post_id":71354726,"comment_id":126135303,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":24279012,"reputation":11,"user_id":18225868,"display_name":"axzilla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646413182,"creation_date":1646413182,"question_id":71354726,"body_markdown":"I&#39;m using JUnit 5 to create dynamic test cases in a nested structure. (So test cases are grouped). However when I run &#39;mvn test site&#39; to create the HTML report. It only gives me the display names of the test inside the groups. The Dynamic Container names are nowhere to be found in the reports. Is there a way to configure this in the pom.xml file? or maybe an alternative HTML report plugin that can show me how many test cases fail per Dynamic Container? Thanks!","title":"Is there a way to show Nested Structure of JUnit 5 in Maven Surefire Report? or any other HTML report alternatives?","body":"<p>I'm using JUnit 5 to create dynamic test cases in a nested structure. (So test cases are grouped). However when I run 'mvn test site' to create the HTML report. It only gives me the display names of the test inside the groups. The Dynamic Container names are nowhere to be found in the reports. Is there a way to configure this in the pom.xml file? or maybe an alternative HTML report plugin that can show me how many test cases fail per Dynamic Container? Thanks!</p>\n"},{"tags":["java","awt","rectangles","java-2d"],"comments":[{"owner":{"account_id":6932217,"reputation":4050,"user_id":5321363,"accept_rate":80,"display_name":"Rann Lifshitz"},"score":0,"creation_date":1556339822,"post_id":55877220,"comment_id":98414001,"body_markdown":"The `Rectangle` API does not specifically state inclusion or exclusion, unfortunately`......    https://docs.oracle.com/javase/8/docs/api/java/awt/Rectangle.html#contains-int-int-","body":"The <code>Rectangle</code> API does not specifically state inclusion or exclusion, unfortunately`......    <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/Rectangle.html#contains-int-int-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/awt/&hellip;</a>"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1556344967,"post_id":55877220,"comment_id":98414735,"body_markdown":"Seems like the correct behaviour to me.  These co-ordinates are actual pixels on the screen, not mathematical points.  A rectangle that includes both `(0,0)` and `(100,100)` would have to have a width and height of at least `101` pixels.","body":"Seems like the correct behaviour to me.  These co-ordinates are actual pixels on the screen, not mathematical points.  A rectangle that includes both <code>(0,0)</code> and <code>(100,100)</code> would have to have a width and height of at least <code>101</code> pixels."}],"answers":[{"tags":[],"owner":{"account_id":6932217,"reputation":4050,"user_id":5321363,"accept_rate":80,"display_name":"Rann Lifshitz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1556341168,"creation_date":1556340789,"answer_id":55877358,"question_id":55877220,"body_markdown":"As quoted from the Rectangle API (Java 8): \r\n\r\n&gt; public Rectangle(int x,\r\n&gt;                  int y,\r\n&gt;                  int width,\r\n&gt;                  int height)&lt;br&gt; Constructs a new Rectangle whose upper-left corner is specified as (x,y) and whose width and height are\r\n&gt; specified by the arguments of the same name.\r\n\r\nUsing Width and Height with the starting `Point` of (0,0) means the `Rectangle` has points from (0,0) to (99,99) - 100 pixels of width and 100 pixels of height, based on the given starting pixel of (0,0) which is always included in the `Rectangle`.\r\n\r\nThis means that (100,100) will indeed not be included in the constructed `Rectangle`. Based on the logic above, (100,100) will be contained in the following (verified using an [online java compiler][1]):\r\n\r\n    Rectangle r = new Rectangle(1,1,100,100);\r\n\r\nReferences:\r\n\r\n - [The Rectangle API][2]\r\n\r\n\r\n  [1]: https://www.jdoodle.com/online-java-compiler\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/awt/Rectangle.html","title":"Wrong result from Rectangle.contains() in java","body":"<p>As quoted from the Rectangle API (Java 8): </p>\n\n<blockquote>\n  <p>public Rectangle(int x,\n                   int y,\n                   int width,\n                   int height)<br> Constructs a new Rectangle whose upper-left corner is specified as (x,y) and whose width and height are\n  specified by the arguments of the same name.</p>\n</blockquote>\n\n<p>Using Width and Height with the starting <code>Point</code> of (0,0) means the <code>Rectangle</code> has points from (0,0) to (99,99) - 100 pixels of width and 100 pixels of height, based on the given starting pixel of (0,0) which is always included in the <code>Rectangle</code>.</p>\n\n<p>This means that (100,100) will indeed not be included in the constructed <code>Rectangle</code>. Based on the logic above, (100,100) will be contained in the following (verified using an <a href=\"https://www.jdoodle.com/online-java-compiler\" rel=\"nofollow noreferrer\">online java compiler</a>):</p>\n\n<pre><code>Rectangle r = new Rectangle(1,1,100,100);\n</code></pre>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/Rectangle.html\" rel=\"nofollow noreferrer\">The Rectangle API</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":17859632,"reputation":61,"user_id":12973461,"display_name":"MLRAL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646412656,"creation_date":1646412656,"answer_id":71354613,"question_id":55877220,"body_markdown":"It seems that the API wrongly states that the &quot;upper left corner&quot; is (x,y) when according to the accepted answer and my own experience, (x,y) is the lower left corner.\r\n","title":"Wrong result from Rectangle.contains() in java","body":"<p>It seems that the API wrongly states that the &quot;upper left corner&quot; is (x,y) when according to the accepted answer and my own experience, (x,y) is the lower left corner.</p>\n"}],"owner":{"account_id":15590303,"reputation":133,"user_id":11247589,"display_name":"Maxwell"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":411,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":55877358,"answer_count":2,"score":-1,"last_activity_date":1646412656,"creation_date":1556339036,"question_id":55877220,"body_markdown":"It appears that the `contains()` method in `Rectangle` is not inclusive to the bottom right corner. \r\n\r\nFor example the following code returns &quot;false&quot;;\r\n\r\n     \r\n    Rectangle r = new Rectangle(0,0,100,100);\r\n\tSystem.out.println(r.contains(100, 100));\r\n\r\n\r\n\r\n","title":"Wrong result from Rectangle.contains() in java","body":"<p>It appears that the <code>contains()</code> method in <code>Rectangle</code> is not inclusive to the bottom right corner. </p>\n\n<p>For example the following code returns \"false\";</p>\n\n<pre><code>Rectangle r = new Rectangle(0,0,100,100);\nSystem.out.println(r.contains(100, 100));\n</code></pre>\n"},{"tags":["java","swing","jbutton","jscrollpane","jeditorpane"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1646405198,"post_id":71347174,"comment_id":126121658,"body_markdown":"Use the `BorderLayout`. Add the button to the `BorderLayout.PAGE_END. Add the other components to a JPanel and add the panel to the BorderLayout.CENTER.","body":"Use the <code>BorderLayout</code>. Add the button to the `BorderLayout.PAGE_END. Add the other components to a JPanel and add the panel to the BorderLayout.CENTER."},{"owner":{"account_id":1223005,"reputation":1348,"user_id":1189254,"accept_rate":64,"display_name":"Manish"},"score":0,"creation_date":1646406916,"post_id":71347174,"comment_id":126122264,"body_markdown":"@camickr I tried that but both panels are looking complete separated in the view.I want to show button and html content (Jsrollpane) to look like same page.","body":"@camickr I tried that but both panels are looking complete separated in the view.I want to show button and html content (Jsrollpane) to look like same page."},{"owner":{"account_id":1223005,"reputation":1348,"user_id":1189254,"accept_rate":64,"display_name":"Manish"},"score":0,"creation_date":1646407482,"post_id":71347174,"comment_id":126122473,"body_markdown":"@camickr updated the question with screenshot when I tried changes. I had to remove the setDimension of JscrollPage as it was coming over the Button.","body":"@camickr updated the question with screenshot when I tried changes. I had to remove the setDimension of JscrollPage as it was coming over the Button."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1646410371,"post_id":71347174,"comment_id":126123559,"body_markdown":"*I want to show button and html content (Jsrollpane) to look like same page* - You don&#39;t need all the child panels.  Add the scrollpane to the CENTER and the button to the PAGE_END. Add each component directly to the frame. Read the Swing tutorial on [Layout Managers](https://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html) to understand the rules of the BorderLayout. If you need more help post a proper [mre] demonstrating the problem. The MRE should NOT do I/O since we don&#39;t have access to your file. The MRE will simulate the HTML. you want to use.","body":"<i>I want to show button and html content (Jsrollpane) to look like same page</i> - You don&#39;t need all the child panels.  Add the scrollpane to the CENTER and the button to the PAGE_END. Add each component directly to the frame. Read the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html\" rel=\"nofollow noreferrer\">Layout Managers</a> to understand the rules of the BorderLayout. If you need more help post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. The MRE should NOT do I/O since we don&#39;t have access to your file. The MRE will simulate the HTML. you want to use."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646412614,"creation_date":1646412614,"answer_id":71354603,"question_id":71347174,"body_markdown":"The default layout manager for [the content pane of] `JFrame` is `BorderLayout`. The center component takes up all the remaining space. Hence `BorderLayout` ignores the preferred size of the center component. `FlowLayout`, on the other hand, respects the preferred size of its contained components. Since you have maximized the `JFrame` its center component will take up almost the entire screen so you just need to add the `JScrollPane` to the `BorderLayout` center.\r\n```java\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.EventQueue;\r\n\r\nimport javax.swing.BorderFactory;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JEditorPane;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JScrollPane;\r\n\r\npublic class ForManish {\r\n    private void createAndDisplayGui() {\r\n        JFrame frame = new JFrame();\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setUndecorated(true);\r\n        frame.add(createScrollPane(), BorderLayout.CENTER);\r\n        frame.add(createButtonPanel(), BorderLayout.PAGE_END);\r\n        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    private JScrollPane createScrollPane() {\r\n        JEditorPane editorPane = new JEditorPane(&quot;text/html&quot;, &quot;&lt;h1 align=\\&quot;center\\&quot;&gt;Checkout unavailable&quot;);\r\n        editorPane.setBackground(new Color(1.0f, 1.0f, 1.0f, 0.1f));\r\n        JScrollPane scrollPane = new JScrollPane(editorPane);\r\n        scrollPane.setBorder(BorderFactory.createLineBorder(new Color(1.0f, 1.0f, 1.0f, 0.1f)));\r\n        return scrollPane;\r\n    }\r\n\r\n    private JPanel createButtonPanel() {\r\n        JPanel buttonPanel = new JPanel();\r\n        buttonPanel.setBackground(new Color(1.0f, 1.0f, 1.0f, 0.1f));\r\n        JButton closeButton = new JButton(&quot;Close&quot;);\r\n        buttonPanel.add(closeButton);\r\n        return buttonPanel;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(() -&gt; new ForManish().createAndDisplayGui());\r\n    }\r\n}\r\n```\r\n","title":"How to show the Button in the bottom of the JScrollPane Inside a JFrame","body":"<p>The default layout manager for [the content pane of] <code>JFrame</code> is <code>BorderLayout</code>. The center component takes up all the remaining space. Hence <code>BorderLayout</code> ignores the preferred size of the center component. <code>FlowLayout</code>, on the other hand, respects the preferred size of its contained components. Since you have maximized the <code>JFrame</code> its center component will take up almost the entire screen so you just need to add the <code>JScrollPane</code> to the <code>BorderLayout</code> center.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.EventQueue;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JEditorPane;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\n\npublic class ForManish {\n    private void createAndDisplayGui() {\n        JFrame frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setUndecorated(true);\n        frame.add(createScrollPane(), BorderLayout.CENTER);\n        frame.add(createButtonPanel(), BorderLayout.PAGE_END);\n        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);\n        frame.setVisible(true);\n    }\n\n    private JScrollPane createScrollPane() {\n        JEditorPane editorPane = new JEditorPane(&quot;text/html&quot;, &quot;&lt;h1 align=\\&quot;center\\&quot;&gt;Checkout unavailable&quot;);\n        editorPane.setBackground(new Color(1.0f, 1.0f, 1.0f, 0.1f));\n        JScrollPane scrollPane = new JScrollPane(editorPane);\n        scrollPane.setBorder(BorderFactory.createLineBorder(new Color(1.0f, 1.0f, 1.0f, 0.1f)));\n        return scrollPane;\n    }\n\n    private JPanel createButtonPanel() {\n        JPanel buttonPanel = new JPanel();\n        buttonPanel.setBackground(new Color(1.0f, 1.0f, 1.0f, 0.1f));\n        JButton closeButton = new JButton(&quot;Close&quot;);\n        buttonPanel.add(closeButton);\n        return buttonPanel;\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; new ForManish().createAndDisplayGui());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1223005,"reputation":1348,"user_id":1189254,"accept_rate":64,"display_name":"Manish"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71354603,"answer_count":1,"score":0,"last_activity_date":1646412614,"creation_date":1646373490,"question_id":71347174,"body_markdown":"I am working on an application in which I am trying to show a banner in a JFrame. Inside the JFrame, I using a JScrollbar which is using JEditorPane to display content of a HTML page.\r\n\r\n        public static JFrame ShowBanner() throws IOException {\r\n            int width = 0;\r\n            int height = 0;\r\n            String urlText = null;\r\n            String ScrnResol = getScreenResolution();\r\n            String[] ScreenResolution = ScrnResol.split(&quot;,&quot;);\r\n            try {\r\n                width = Integer.parseInt(ScreenResolution[0]);\r\n                height = Integer.parseInt(ScreenResolution[1]);\r\n            } catch (NumberFormatException nfe) {\r\n                logger.error(&quot;NumberFormatException: &quot; + nfe.getMessage());\r\n            }\r\n            //Creating Frame\r\n            frmOpt = new JFrame(&quot;Banner&quot;);\r\n            frmOpt.setExtendedState(JFrame.MAXIMIZED_BOTH);\r\n            frmOpt.setPreferredSize(new Dimension(width, height));\r\n            frmOpt.setUndecorated(true);\r\n            frmOpt.setBackground(new Color(1.0f, 1.0f, 1.0f, 0.1f));\r\n            frmOpt.setVisible(true);\r\n            frmOpt.setAlwaysOnTop(true);\r\n            frmOpt.setLocationRelativeTo(null);\r\n            //bringToForeground(getHWND(frmOpt));\r\n            JPanel panel = new JPanel();\r\n            LayoutManager layout = new FlowLayout();\r\n            panel.setLayout(layout);\r\n            JEditorPane jEditorPane = new JEditorPane();\r\n            jEditorPane.setEditable(false);\r\n            try {\r\n                \r\n                String urlText=IOUtils.toString(BringUpFrame.class.getClassLoader().getResourceAsStream(&quot;banner.htm&quot;));\r\n                jEditorPane.setContentType(&quot;text/html&quot;);\r\n                jEditorPane.setText(urlText);\r\n            } catch (Exception e) {\r\n                logger.error(&quot;Exception while executing showBanner: {}&quot;, e);\r\n                jEditorPane.setContentType(&quot;text/html&quot;);\r\n                jEditorPane.setText(&quot;&lt;html&gt;Page not found.&lt;/html&gt;&quot;);\r\n            }\r\n            JScrollPane jScrollPane = new JScrollPane(jEditorPane);\r\n            scrollPane.setColumnHeaderView(createButton());\r\n            jScrollPane.setPreferredSize(new Dimension(width, height));\r\n            panel.add(jScrollPane);\r\n            frmOpt.add(panel);\r\n            frmOpt.pack();\r\n            frmOpt.setVisible(true);\r\n            return frmOpt;\r\n    \r\n       }\r\n\r\n       private static JPanel createButton() {\r\n            JPanel panel = new JPanel();\r\n            panel.setBackground(new Color(1.0f, 1.0f, 1.0f, 0.1f));\r\n            JButton button = new JButton(&quot;Close&quot;);\r\n            panel.add(button);\r\n            return panel;\r\n        }\r\n\r\nCurrently the view is looking like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs of Now button is displayed on the Top. What I want to do is to put the button in the bottom of the screen. I have tried some layout (BoxLayout and BorderLayout) but view was as per the expection. I can understand that it will be a small change but I am not having much exp in Swing Programming.\r\n\r\nCan someone please suggest how can I achieve that.\r\n\r\n**Edit**:\r\n\r\nTried suggested changes:\r\n\r\n    JScrollPane jScrollPane = new JScrollPane(jEditorPane);\r\n    panel.add(jScrollPane);\r\n    frmOpt.add(panel,BorderLayout.CENTER);\r\n    frmOpt.add(createButton(),BorderLayout.PAGE_END);\r\n\r\nbut it&#39;s not coming as expected. Button and html page in JscrollPane are displaying completely separated and Page is also not coming over complete screen.\r\n[![enter image description here][2]][2]\r\n\r\n\r\nThanks,\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xYXE3.png\r\n  [2]: https://i.stack.imgur.com/DjtzG.png","title":"How to show the Button in the bottom of the JScrollPane Inside a JFrame","body":"<p>I am working on an application in which I am trying to show a banner in a JFrame. Inside the JFrame, I using a JScrollbar which is using JEditorPane to display content of a HTML page.</p>\n<pre><code>    public static JFrame ShowBanner() throws IOException {\n        int width = 0;\n        int height = 0;\n        String urlText = null;\n        String ScrnResol = getScreenResolution();\n        String[] ScreenResolution = ScrnResol.split(&quot;,&quot;);\n        try {\n            width = Integer.parseInt(ScreenResolution[0]);\n            height = Integer.parseInt(ScreenResolution[1]);\n        } catch (NumberFormatException nfe) {\n            logger.error(&quot;NumberFormatException: &quot; + nfe.getMessage());\n        }\n        //Creating Frame\n        frmOpt = new JFrame(&quot;Banner&quot;);\n        frmOpt.setExtendedState(JFrame.MAXIMIZED_BOTH);\n        frmOpt.setPreferredSize(new Dimension(width, height));\n        frmOpt.setUndecorated(true);\n        frmOpt.setBackground(new Color(1.0f, 1.0f, 1.0f, 0.1f));\n        frmOpt.setVisible(true);\n        frmOpt.setAlwaysOnTop(true);\n        frmOpt.setLocationRelativeTo(null);\n        //bringToForeground(getHWND(frmOpt));\n        JPanel panel = new JPanel();\n        LayoutManager layout = new FlowLayout();\n        panel.setLayout(layout);\n        JEditorPane jEditorPane = new JEditorPane();\n        jEditorPane.setEditable(false);\n        try {\n            \n            String urlText=IOUtils.toString(BringUpFrame.class.getClassLoader().getResourceAsStream(&quot;banner.htm&quot;));\n            jEditorPane.setContentType(&quot;text/html&quot;);\n            jEditorPane.setText(urlText);\n        } catch (Exception e) {\n            logger.error(&quot;Exception while executing showBanner: {}&quot;, e);\n            jEditorPane.setContentType(&quot;text/html&quot;);\n            jEditorPane.setText(&quot;&lt;html&gt;Page not found.&lt;/html&gt;&quot;);\n        }\n        JScrollPane jScrollPane = new JScrollPane(jEditorPane);\n        scrollPane.setColumnHeaderView(createButton());\n        jScrollPane.setPreferredSize(new Dimension(width, height));\n        panel.add(jScrollPane);\n        frmOpt.add(panel);\n        frmOpt.pack();\n        frmOpt.setVisible(true);\n        return frmOpt;\n\n   }\n\n   private static JPanel createButton() {\n        JPanel panel = new JPanel();\n        panel.setBackground(new Color(1.0f, 1.0f, 1.0f, 0.1f));\n        JButton button = new JButton(&quot;Close&quot;);\n        panel.add(button);\n        return panel;\n    }\n</code></pre>\n<p>Currently the view is looking like this:</p>\n<p><a href=\"https://i.stack.imgur.com/xYXE3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xYXE3.png\" alt=\"enter image description here\" /></a></p>\n<p>As of Now button is displayed on the Top. What I want to do is to put the button in the bottom of the screen. I have tried some layout (BoxLayout and BorderLayout) but view was as per the expection. I can understand that it will be a small change but I am not having much exp in Swing Programming.</p>\n<p>Can someone please suggest how can I achieve that.</p>\n<p><strong>Edit</strong>:</p>\n<p>Tried suggested changes:</p>\n<pre><code>JScrollPane jScrollPane = new JScrollPane(jEditorPane);\npanel.add(jScrollPane);\nfrmOpt.add(panel,BorderLayout.CENTER);\nfrmOpt.add(createButton(),BorderLayout.PAGE_END);\n</code></pre>\n<p>but it's not coming as expected. Button and html page in JscrollPane are displaying completely separated and Page is also not coming over complete screen.\n<a href=\"https://i.stack.imgur.com/DjtzG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DjtzG.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks,</p>\n"},{"tags":["java","selenium","docker"],"answers":[{"tags":[],"owner":{"account_id":13585116,"reputation":12147,"user_id":9800042,"display_name":"Sers"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1550763204,"creation_date":1550763204,"answer_id":54810763,"question_id":54810496,"body_markdown":"For `RemoteWebDriver` you have to set file detector `driver.setFileDetector(new LocalFileDetector());`. \r\nYour code:\r\n\r\n    public static void uploadSampleImage(StaticSeleniumDriver driver)\r\n    {\r\n        driver.setFileDetector(new LocalFileDetector());\r\n        File file = new File(System.getProperty(&quot;user.dir&quot;) + &quot;/resources/images/&quot; + SAMPLE_DOCUMENT_FILE_NAME);\r\n        Utils.Log(&quot;file exists: &quot; + file.exists());\r\n    \r\n        String imagePath = file.getAbsolutePath();\r\n        WebElement input = driver.findElement(By.name(&quot;file&quot;));\r\n        input.sendKeys(imagePath);\r\n    }","title":"Selenium upload file: file not found [docker]","body":"<p>For <code>RemoteWebDriver</code> you have to set file detector <code>driver.setFileDetector(new LocalFileDetector());</code>. \nYour code:</p>\n\n<pre><code>public static void uploadSampleImage(StaticSeleniumDriver driver)\n{\n    driver.setFileDetector(new LocalFileDetector());\n    File file = new File(System.getProperty(\"user.dir\") + \"/resources/images/\" + SAMPLE_DOCUMENT_FILE_NAME);\n    Utils.Log(\"file exists: \" + file.exists());\n\n    String imagePath = file.getAbsolutePath();\n    WebElement input = driver.findElement(By.name(\"file\"));\n    input.sendKeys(imagePath);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20893297,"reputation":321,"user_id":15348175,"display_name":"Ayush Choudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646412470,"creation_date":1646412470,"answer_id":71354575,"question_id":54810496,"body_markdown":"Instead of using &#39;/&#39; in your path string, you can use `File.separator` which takes care of the OS level file separator automatically under the hood. Using this, your code becomes independent of any OS, and it lets Java take care of what separator to use as per the OS instead of you worrying about it.\r\n\r\nSo the first line of code becomes:\r\n\r\n    new File(System.getProperty(&quot;user.dir&quot;) + File.separator + &quot;resources&quot; + File.separator + &quot;images&quot; + File.separator + SAMPLE_DOCUMENT_FILE_NAME);\r\nand rest of the line remains same.\r\n\r\n\r\n!! No extra headaches. &#128515;","title":"Selenium upload file: file not found [docker]","body":"<p>Instead of using '/' in your path string, you can use <code>File.separator</code> which takes care of the OS level file separator automatically under the hood. Using this, your code becomes independent of any OS, and it lets Java take care of what separator to use as per the OS instead of you worrying about it.</p>\n<p>So the first line of code becomes:</p>\n<pre><code>new File(System.getProperty(&quot;user.dir&quot;) + File.separator + &quot;resources&quot; + File.separator + &quot;images&quot; + File.separator + SAMPLE_DOCUMENT_FILE_NAME);\n</code></pre>\n<p>and rest of the line remains same.</p>\n<p>!! No extra headaches. </p>\n"}],"owner":{"account_id":1088745,"reputation":1549,"user_id":1083864,"accept_rate":68,"display_name":"Matthewek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6925,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":54810763,"answer_count":2,"score":7,"last_activity_date":1646412470,"creation_date":1550762403,"question_id":54810496,"body_markdown":"I have following method that uploads image using selenium.\r\n\r\n    public static void uploadSampleImage(StaticSeleniumDriver driver)\r\n    {\r\n        File file = new File(System.getProperty(&quot;user.dir&quot;) + &quot;/resources/images/&quot; + SAMPLE_DOCUMENT_FILE_NAME);\r\n        Utils.Log(&quot;file exists: &quot; + file.exists());\r\n    \r\n        String imagePath = file.getAbsolutePath();\r\n        WebElement input = driver.findElement(By.name(&quot;file&quot;));\r\n        input.sendKeys(imagePath);\r\n    }\r\n\r\nThat&#39;s a standard way of feeding file path ([like explained in Guru99 tutorial][1]) to upload file.\r\n\r\n\r\n1. It works fine when testing locally on windows\r\n2. It is NOT working when run inside docker container (linux), getting this error:\r\n\r\n&gt; org.openqa.selenium.InvalidArgumentException: invalid argument: File\r\n&gt; not found : /usr/src/app/resources/images/image2.png\r\n&gt;         (Session info: chrome=72.0.3626.81)\r\n&gt;         (Driver info: chromedriver=2.46.628388 (4a34a70827ac54148e092aafb70504c4ea7ae926),platform=Linux\r\n&gt; 4.9.125-linuxkit x86_64) (WARNING: The server did not provide any stacktrace information)\r\n\r\nWhich is weird because I am sure file exist in given directory (in my method above, I am checking if file exists and log clearly confirms that)\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://www.guru99.com/upload-download-file-selenium-webdriver.html\r\n  [2]: https://i.stack.imgur.com/67XNx.png\r\n\r\nAny suggestions would be welcome, thank you","title":"Selenium upload file: file not found [docker]","body":"<p>I have following method that uploads image using selenium.</p>\n\n<pre><code>public static void uploadSampleImage(StaticSeleniumDriver driver)\n{\n    File file = new File(System.getProperty(\"user.dir\") + \"/resources/images/\" + SAMPLE_DOCUMENT_FILE_NAME);\n    Utils.Log(\"file exists: \" + file.exists());\n\n    String imagePath = file.getAbsolutePath();\n    WebElement input = driver.findElement(By.name(\"file\"));\n    input.sendKeys(imagePath);\n}\n</code></pre>\n\n<p>That's a standard way of feeding file path (<a href=\"https://www.guru99.com/upload-download-file-selenium-webdriver.html\" rel=\"noreferrer\">like explained in Guru99 tutorial</a>) to upload file.</p>\n\n<ol>\n<li>It works fine when testing locally on windows</li>\n<li>It is NOT working when run inside docker container (linux), getting this error:</li>\n</ol>\n\n<blockquote>\n  <p>org.openqa.selenium.InvalidArgumentException: invalid argument: File\n  not found : /usr/src/app/resources/images/image2.png\n          (Session info: chrome=72.0.3626.81)\n          (Driver info: chromedriver=2.46.628388 (4a34a70827ac54148e092aafb70504c4ea7ae926),platform=Linux\n  4.9.125-linuxkit x86_64) (WARNING: The server did not provide any stacktrace information)</p>\n</blockquote>\n\n<p>Which is weird because I am sure file exist in given directory (in my method above, I am checking if file exists and log clearly confirms that)</p>\n\n<p><a href=\"https://i.stack.imgur.com/67XNx.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/67XNx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any suggestions would be welcome, thank you</p>\n"},{"tags":["java","functional-programming"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1646380830,"post_id":71348203,"comment_id":126113370,"body_markdown":"`compose()` returns a lambda that implements `apply()`.","body":"<code>compose()</code> returns a lambda that implements <code>apply()</code>."},{"owner":{"account_id":3653998,"reputation":5437,"user_id":3045483,"accept_rate":86,"display_name":"rajeev pani.."},"score":0,"creation_date":1646380984,"post_id":71348203,"comment_id":126113417,"body_markdown":"@shmosel but here it invoked h.apply(1) and it does not have implementation.","body":"@shmosel but here it invoked h.apply(1) and it does not have implementation."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1646381028,"post_id":71348203,"comment_id":126113431,"body_markdown":"Of course it does. It&#39;s implemented in `compose()`.","body":"Of course it does. It&#39;s implemented in <code>compose()</code>."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1646381743,"post_id":71348203,"comment_id":126113620,"body_markdown":"`f.apply(x)` works kind of like `f(x)`","body":"<code>f.apply(x)</code> works kind of like <code>f(x)</code>"},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1646412443,"post_id":71348203,"comment_id":126124305,"body_markdown":"Incorrect order - g evaluates before f.","body":"Incorrect order - g evaluates before f."}],"answers":[{"tags":[],"owner":{"account_id":165129,"reputation":1388,"user_id":388317,"accept_rate":0,"display_name":"Christian Ullenboom"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1646382000,"creation_date":1646382000,"answer_id":71348423,"question_id":71348203,"body_markdown":"I would suggest to look at the implementation:\r\n\r\n    default &lt;V&gt; Function&lt;V, R&gt; compose(Function&lt;? super V, ? extends T&gt; before) {\r\n        Objects.requireNonNull(before);\r\n        return (V v) -&gt; apply(before.apply(v));\r\n    }\r\n\r\n","title":"How Function&lt;T, R&gt; works internally","body":"<p>I would suggest to look at the implementation:</p>\n<pre><code>default &lt;V&gt; Function&lt;V, R&gt; compose(Function&lt;? super V, ? extends T&gt; before) {\n    Objects.requireNonNull(before);\n    return (V v) -&gt; apply(before.apply(v));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646412327,"creation_date":1646411954,"answer_id":71354462,"question_id":71348203,"body_markdown":"You would have a better understanding with a different choice of functions and test data. \r\n\r\nAs you have it `f(g(n))` equals `g(f(n))` which also equals `n+1` so you don&#39;t see the effect of the combination of the `f.compose(g)` which means definition of h as evaluate g then f. \r\n\r\nTry instead this example which prints 38 not 50:\r\n\r\n    Function&lt;Integer,Integer&gt; f  = x -&gt; x+3;\r\n    Function&lt;Integer,Integer&gt; g  = x -&gt; x*5;\r\n    Function&lt;Integer,Integer&gt; h  = f.compose(g);\r\n    System.out.println(h.apply(7));","title":"How Function&lt;T, R&gt; works internally","body":"<p>You would have a better understanding with a different choice of functions and test data.</p>\n<p>As you have it <code>f(g(n))</code> equals <code>g(f(n))</code> which also equals <code>n+1</code> so you don't see the effect of the combination of the <code>f.compose(g)</code> which means definition of h as evaluate g then f.</p>\n<p>Try instead this example which prints 38 not 50:</p>\n<pre><code>Function&lt;Integer,Integer&gt; f  = x -&gt; x+3;\nFunction&lt;Integer,Integer&gt; g  = x -&gt; x*5;\nFunction&lt;Integer,Integer&gt; h  = f.compose(g);\nSystem.out.println(h.apply(7));\n</code></pre>\n"}],"owner":{"account_id":3653998,"reputation":5437,"user_id":3045483,"accept_rate":86,"display_name":"rajeev pani.."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1646412327,"creation_date":1646380749,"question_id":71348203,"body_markdown":"I am trying to understand how apply() works in this below scenario\r\n\r\n            Function&lt;Integer,Integer&gt; f  = x -&gt; x+1;\r\n            Function&lt;Integer,Integer&gt; g  = x -&gt; x*1;\r\n            Function&lt;Integer,Integer&gt; h  = f.compose(g);\r\n            System.out.println(h.apply(1));\r\n\r\nI know, here first it calculates x+1 which is 1+1 = 2, and after that 2*1 = 2, and the result it prints is 2. but I did not understand how the apply() method works internally. because the Function h does not have implementation for abstract method apply(). It has simply invoked the default method compose(). So my question is, despite not having the implementation for abstract method apply(), how come Function h can invoke apply() method? Correct me If my understanding is wrong \r\n","title":"How Function&lt;T, R&gt; works internally","body":"<p>I am trying to understand how apply() works in this below scenario</p>\n<pre><code>        Function&lt;Integer,Integer&gt; f  = x -&gt; x+1;\n        Function&lt;Integer,Integer&gt; g  = x -&gt; x*1;\n        Function&lt;Integer,Integer&gt; h  = f.compose(g);\n        System.out.println(h.apply(1));\n</code></pre>\n<p>I know, here first it calculates x+1 which is 1+1 = 2, and after that 2*1 = 2, and the result it prints is 2. but I did not understand how the apply() method works internally. because the Function h does not have implementation for abstract method apply(). It has simply invoked the default method compose(). So my question is, despite not having the implementation for abstract method apply(), how come Function h can invoke apply() method? Correct me If my understanding is wrong</p>\n"},{"tags":["java","generics","methods"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1646407476,"post_id":71352500,"comment_id":126122467,"body_markdown":"As an aside, `setArea` on Square and Circle is a terrible idea. The area should be a derived attribute that is calculated off of the side length or radius. With your design I can create a Square of side 4 and then set its area to 100. As long as I call `getArea()` and not `area()` (why have both?), the wrong area will be returned. Also, unless `setSide` and `setRadius` are required, I would get rid of them and make Square and Circle immutable (which is almost always better when possible). Finally, `l` is a terrible name for a variable. `this.side = l` and `this.side = 1` look too similar.","body":"As an aside, <code>setArea</code> on Square and Circle is a terrible idea. The area should be a derived attribute that is calculated off of the side length or radius. With your design I can create a Square of side 4 and then set its area to 100. As long as I call <code>getArea()</code> and not <code>area()</code> (why have both?), the wrong area will be returned. Also, unless <code>setSide</code> and <code>setRadius</code> are required, I would get rid of them and make Square and Circle immutable (which is almost always better when possible). Finally, <code>l</code> is a terrible name for a variable. <code>this.side = l</code> and <code>this.side = 1</code> look too similar."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646402400,"creation_date":1646402400,"answer_id":71352521,"question_id":71352500,"body_markdown":"You need to bound the type variable:\r\n\r\n```\r\npublic &lt;T extends Surface&gt; double calcArea(T[] t) {\r\n```\r\n\r\nor just declare the parameter as an array of `Surface`s:\r\n\r\n```\r\npublic double calcArea(Surface[] t) {\r\n```\r\n\r\nNote that the latter is preferable because generics and arrays don&#39;t play very nicely together. If you were to need to have a type variable for other reasons, it would be advisable to change to a `Collection`, or similar:\r\n\r\n```\r\npublic &lt;T extends Surface&gt; double calcArea(Collection&lt;T&gt; t) {\r\n```\r\n\r\n\r\n(And, as a minor matter of preference, I would use `S` rather than `T` to name a type variable which extends `Surface`)","title":"How can I access a method of a class from a generic method","body":"<p>You need to bound the type variable:</p>\n<pre><code>public &lt;T extends Surface&gt; double calcArea(T[] t) {\n</code></pre>\n<p>or just declare the parameter as an array of <code>Surface</code>s:</p>\n<pre><code>public double calcArea(Surface[] t) {\n</code></pre>\n<p>Note that the latter is preferable because generics and arrays don't play very nicely together. If you were to need to have a type variable for other reasons, it would be advisable to change to a <code>Collection</code>, or similar:</p>\n<pre><code>public &lt;T extends Surface&gt; double calcArea(Collection&lt;T&gt; t) {\n</code></pre>\n<p>(And, as a minor matter of preference, I would use <code>S</code> rather than <code>T</code> to name a type variable which extends <code>Surface</code>)</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646412283,"creation_date":1646405844,"answer_id":71353219,"question_id":71352500,"body_markdown":"Since the problem in regard to generic types is already addressed [by Andy Turner](https://stackoverflow.com/a/71352521/17949945), I just want to add a suggestion related to the **class design**.\r\n\r\nI think there is a bit of redundancy in how these classes were designed. You need to create an instance of `SumArea` in order to do the calculation. And the result of the last of the last `calcArea()` method call will be stored in this object (let&#39;s assume that this calculation is far more *complex* and *CPU-consuming*). \r\n\r\nBut do we really need to store somewhere else the value is already returned by the method? In this case, the idea to cash the history of calculations (as a single variable or as a collection of values) doesn&#39;t seem to be useful because it can&#39;t be reused without knowing *which objects* were involved in the calculation.\r\n\r\nAnd without storing the result this method will not be bound to a state, i.e. it has to be **static**. And since interfaces can have static methods, instead of creating a utility class for that purpose it could be placed in the `Surface` interface. Like that.\r\n\r\n    public interface Surface {\r\n        public double area();\r\n    \r\n        public static &lt;T extends Surface&gt; double calcArea(T[] t) { // generic method that receives Square and Circle arrays\r\n            double arrayArea = 0;\r\n            for (T a : t) {\r\n                arrayArea += a.area();\r\n            }\r\n            return arrayArea;\r\n        }\r\n    }\r\n\r\n**Note** that static behavior declared in interfaces in contrast to classes could be invoked only by using the name of an interface:\r\n\r\n    System.out.println(&quot;Circle&#39;s sum area = &quot; + Surface.calcArea(circ));\r\n\r\nAlso note that it makes sense for both classes to have a field `area` inside the classes `Circle` and `Square` only if other fields will be declared as **final**, i.e. they must be initialed only one during the object construction and setters become unnecessary.\r\n\r\nIn this case (assuming that `radius` has been declared as **final** and is being validated when assigned so that `reduce &gt; 0`) method `area()` will look like this:\r\n\r\n    @Override\r\n    public double area() {\r\n        if (area &gt; 0) { // `0` is a default value for instance variables\r\n            return area; // reusing already calculated value\r\n        }\r\n        return area = radius * radius * Math.PI;\r\n    }\r\n\r\nAnd there mustn&#39;t be two methods `area()` and `getArea()` leave either one or another.","title":"How can I access a method of a class from a generic method","body":"<p>Since the problem in regard to generic types is already addressed <a href=\"https://stackoverflow.com/a/71352521/17949945\">by Andy Turner</a>, I just want to add a suggestion related to the <strong>class design</strong>.</p>\n<p>I think there is a bit of redundancy in how these classes were designed. You need to create an instance of <code>SumArea</code> in order to do the calculation. And the result of the last of the last <code>calcArea()</code> method call will be stored in this object (let's assume that this calculation is far more <em>complex</em> and <em>CPU-consuming</em>).</p>\n<p>But do we really need to store somewhere else the value is already returned by the method? In this case, the idea to cash the history of calculations (as a single variable or as a collection of values) doesn't seem to be useful because it can't be reused without knowing <em>which objects</em> were involved in the calculation.</p>\n<p>And without storing the result this method will not be bound to a state, i.e. it has to be <strong>static</strong>. And since interfaces can have static methods, instead of creating a utility class for that purpose it could be placed in the <code>Surface</code> interface. Like that.</p>\n<pre><code>public interface Surface {\n    public double area();\n\n    public static &lt;T extends Surface&gt; double calcArea(T[] t) { // generic method that receives Square and Circle arrays\n        double arrayArea = 0;\n        for (T a : t) {\n            arrayArea += a.area();\n        }\n        return arrayArea;\n    }\n}\n</code></pre>\n<p><strong>Note</strong> that static behavior declared in interfaces in contrast to classes could be invoked only by using the name of an interface:</p>\n<pre><code>System.out.println(&quot;Circle's sum area = &quot; + Surface.calcArea(circ));\n</code></pre>\n<p>Also note that it makes sense for both classes to have a field <code>area</code> inside the classes <code>Circle</code> and <code>Square</code> only if other fields will be declared as <strong>final</strong>, i.e. they must be initialed only one during the object construction and setters become unnecessary.</p>\n<p>In this case (assuming that <code>radius</code> has been declared as <strong>final</strong> and is being validated when assigned so that <code>reduce &gt; 0</code>) method <code>area()</code> will look like this:</p>\n<pre><code>@Override\npublic double area() {\n    if (area &gt; 0) { // `0` is a default value for instance variables\n        return area; // reusing already calculated value\n    }\n    return area = radius * radius * Math.PI;\n}\n</code></pre>\n<p>And there mustn't be two methods <code>area()</code> and <code>getArea()</code> leave either one or another.</p>\n"}],"owner":{"account_id":19022827,"reputation":13,"user_id":18110258,"display_name":"Pedro Todorovski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71352521,"answer_count":2,"score":1,"last_activity_date":1646412283,"creation_date":1646402243,"question_id":71352500,"body_markdown":"I&#39;m working on a tiny exercise java program that calculates *circle* and *square* (classes) area, that implements *surface* (interface) which has a method called *area()*. A requirement is that I have to implement a class called *SumArea* that has a **generic method called calcArea()** that receives *Circle circ[]* and *Square square[]* arrays and executes area calculation.\r\n&lt;br/&gt;&lt;br/&gt;\r\n**Program structure:**\r\n&lt;br/&gt;&lt;br/&gt;\r\n**-&gt;** UseSumArea.java (main method)&lt;br/&gt;\r\n**-&gt;** Surface.java (interface)&lt;br/&gt;\r\n**-&gt;** Square.java (class that implements Surface.java)&lt;br/&gt;\r\n**-&gt;** Circle.java (class that implements Surface.java)&lt;br/&gt;\r\n**-&gt;** SumArea.java (class that executes calcArea() method)\r\n&lt;br/&gt;&lt;br/&gt;\r\n**UseSumArea.java**\r\n&lt;br/&gt;\r\n\r\n    public class UseSumArea {\r\n        \tpublic static void main(String[] args) {\r\n        \t\tSquare square[] = { new Square(2.0), new Square(5.0) };\r\n        \t\tCircle circ[] = { new Circle(3.0), new Circle(2.0) };\r\n        \t\tSurface surf[] = new Surface[square.length + circ.length];\r\n        \t\tsurf[0] = square[0];\r\n        \t\tsurf[1] = square[1];\r\n        \t\tsurf[2] = circ[0];\r\n        \t\tsurf[3] = circ[1];\r\n        \t\tSumArea sum = new SumArea();\r\n        \t\tSystem.out.println(&quot;Square&#39;s sum area = &quot; + sum.calcArea(square));\r\n        \t\tSystem.out.println(&quot;Circle&#39;s sum area = &quot; + sum.calcArea(circ));\r\n        \t\tSystem.out.println(&quot;Surface&#39;s sum area = &quot; + sum.calcArea(surf));\r\n        \t}\r\n        \r\n        }\r\n\r\n**Surface.java**\r\n&lt;br/&gt;\r\n\r\n    public interface Surface {\r\n    \tpublic double area();\r\n    }\r\n**Square.java**\r\n&lt;br/&gt;\r\n\r\n    public class Square implements Surface {\r\n\r\n\tprivate double area;\r\n\tprivate double side;\r\n\t\r\n\tpublic Square(double l) {\r\n\t\tthis.side = l;\r\n\t\tarea();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic double area() {\r\n\t\treturn this.area = (this.side)*(this.side);\r\n\t}\r\n\r\n\tpublic double getArea() {\r\n\t\treturn area;\r\n\t}\r\n\r\n\tpublic void setArea(double area) {\r\n\t\tthis.area = area;\r\n\t}\r\n\r\n\tpublic double getSide() {\r\n\t\treturn side;\r\n\t}\r\n\r\n\tpublic void setSide(double side) {\r\n\t\tthis.side = side;\r\n\t}\r\n\r\n    }\r\n\r\n**Circle.java**\r\n&lt;br/&gt;\r\n\r\n    \r\n    public class Circle implements Surface {\r\n\r\n\tprivate double area;\r\n\tprivate double radius;\r\n\t\r\n\tpublic Circle (double r) {\r\n\t\tthis.radius = r;\r\n\t\tarea();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic double area() {\r\n\t\treturn area = (((this.radius)*(this.radius))*(Math.PI));\r\n\t}\r\n\r\n\tpublic double getRadius() {\r\n\t\treturn radius;\r\n\t}\r\n\r\n\tpublic void setRadius(double raio) {\r\n\t\tthis.raio = raio;\r\n\t}\r\n\r\n\tpublic double getArea() {\r\n\t\treturn area;\r\n\t}\r\n\r\n\tpublic void setArea(double area) {\r\n\t\tthis.area = area;\r\n\t}\r\n\r\n    }\r\n\r\n**SumArea.java**\r\n&lt;br/&gt;\r\n\r\n    public class SumArea {\r\n\t\r\n\tprivate double area;\r\n\t\r\n\tpublic &lt;T&gt; double calcArea(T[] t) { //generic method that receives Square and Circle arrays\r\n\t\tdouble arrayArea = 0;\r\n\t\tfor (T a : t) {\r\n\t\t\tarrayArea = arrayArea+(a.area()); \r\n\t\t}\r\n\t\treturn this.area = arrayArea;\r\n\t}\r\n    }\r\nMy doubt is over this SumArea&#39;s code snippet:\r\n\r\n&gt; *arrayArea= arrayArea+(**a.area()**);*\r\n\r\n**How can I access the area() method of each Circle and Square objects inside this generic method?**\r\n\r\n","title":"How can I access a method of a class from a generic method","body":"<p>I'm working on a tiny exercise java program that calculates <em>circle</em> and <em>square</em> (classes) area, that implements <em>surface</em> (interface) which has a method called <em>area()</em>. A requirement is that I have to implement a class called <em>SumArea</em> that has a <strong>generic method called calcArea()</strong> that receives <em>Circle circ[]</em> and <em>Square square[]</em> arrays and executes area calculation.\n<br/><br/>\n<strong>Program structure:</strong>\n<br/><br/>\n<strong>-&gt;</strong> UseSumArea.java (main method)<br/>\n<strong>-&gt;</strong> Surface.java (interface)<br/>\n<strong>-&gt;</strong> Square.java (class that implements Surface.java)<br/>\n<strong>-&gt;</strong> Circle.java (class that implements Surface.java)<br/>\n<strong>-&gt;</strong> SumArea.java (class that executes calcArea() method)\n<br/><br/>\n<strong>UseSumArea.java</strong>\n<br/></p>\n<pre><code>public class UseSumArea {\n        public static void main(String[] args) {\n            Square square[] = { new Square(2.0), new Square(5.0) };\n            Circle circ[] = { new Circle(3.0), new Circle(2.0) };\n            Surface surf[] = new Surface[square.length + circ.length];\n            surf[0] = square[0];\n            surf[1] = square[1];\n            surf[2] = circ[0];\n            surf[3] = circ[1];\n            SumArea sum = new SumArea();\n            System.out.println(&quot;Square's sum area = &quot; + sum.calcArea(square));\n            System.out.println(&quot;Circle's sum area = &quot; + sum.calcArea(circ));\n            System.out.println(&quot;Surface's sum area = &quot; + sum.calcArea(surf));\n        }\n    \n    }\n</code></pre>\n<p><strong>Surface.java</strong>\n<br/></p>\n<pre><code>public interface Surface {\n    public double area();\n}\n</code></pre>\n<p><strong>Square.java</strong>\n<br/></p>\n<pre><code>public class Square implements Surface {\n\nprivate double area;\nprivate double side;\n\npublic Square(double l) {\n    this.side = l;\n    area();\n}\n\n@Override\npublic double area() {\n    return this.area = (this.side)*(this.side);\n}\n\npublic double getArea() {\n    return area;\n}\n\npublic void setArea(double area) {\n    this.area = area;\n}\n\npublic double getSide() {\n    return side;\n}\n\npublic void setSide(double side) {\n    this.side = side;\n}\n\n}\n</code></pre>\n<p><strong>Circle.java</strong>\n<br/></p>\n<pre><code>public class Circle implements Surface {\n\nprivate double area;\nprivate double radius;\n\npublic Circle (double r) {\n    this.radius = r;\n    area();\n}\n\n@Override\npublic double area() {\n    return area = (((this.radius)*(this.radius))*(Math.PI));\n}\n\npublic double getRadius() {\n    return radius;\n}\n\npublic void setRadius(double raio) {\n    this.raio = raio;\n}\n\npublic double getArea() {\n    return area;\n}\n\npublic void setArea(double area) {\n    this.area = area;\n}\n\n}\n</code></pre>\n<p><strong>SumArea.java</strong>\n<br/></p>\n<pre><code>public class SumArea {\n\nprivate double area;\n\npublic &lt;T&gt; double calcArea(T[] t) { //generic method that receives Square and Circle arrays\n    double arrayArea = 0;\n    for (T a : t) {\n        arrayArea = arrayArea+(a.area()); \n    }\n    return this.area = arrayArea;\n}\n}\n</code></pre>\n<p>My doubt is over this SumArea's code snippet:</p>\n<blockquote>\n<p><em>arrayArea= arrayArea+(<strong>a.area()</strong>);</em></p>\n</blockquote>\n<p><strong>How can I access the area() method of each Circle and Square objects inside this generic method?</strong></p>\n"},{"tags":["java","collections","jakarta-ee","arraylist"],"answers":[{"tags":[],"owner":{"account_id":85212,"reputation":11234,"user_id":237733,"accept_rate":94,"display_name":"Mark Pope"},"down_vote_count":1,"up_vote_count":134,"is_accepted":true,"score":133,"last_activity_date":1525363500,"creation_date":1268244577,"answer_id":2419365,"question_id":2419353,"body_markdown":"Pass the `ArrayList` into [`Collections.unmodifiableList()`][1]. It returns an unmodifiable view of the specified list. Only use this returned `List`, and never the original `ArrayList`.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableList(java.util.List)","title":"make ArrayList Read only","body":"<p>Pass the <code>ArrayList</code> into <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableList(java.util.List)\" rel=\"noreferrer\"><code>Collections.unmodifiableList()</code></a>. It returns an unmodifiable view of the specified list. Only use this returned <code>List</code>, and never the original <code>ArrayList</code>.</p>\n"},{"tags":[],"owner":{"account_id":59478,"reputation":967,"user_id":177972,"accept_rate":83,"display_name":"Jama22"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1522335464,"creation_date":1268249249,"answer_id":2419883,"question_id":2419353,"body_markdown":"Are you sure you want to use an `ArrayList` in this case?  \r\n\r\nMaybe it would be better to first populate an `ArrayList` with all of your information, and then convert the `ArrayList` into a final array when the Java program initializes.","title":"make ArrayList Read only","body":"<p>Are you sure you want to use an <code>ArrayList</code> in this case?  </p>\n\n<p>Maybe it would be better to first populate an <code>ArrayList</code> with all of your information, and then convert the <code>ArrayList</code> into a final array when the Java program initializes.</p>\n"},{"tags":[],"owner":{"account_id":5519364,"reputation":239,"user_id":4382878,"display_name":"Arunkumar Papena"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1522335413,"creation_date":1435568269,"answer_id":31111560,"question_id":2419353,"body_markdown":"Pass the list object to [`Collections.unmodifiableList()`][1]. See the example below.\r\n        \r\n    import java.util.*;\r\n    \r\n    public class CollDemo\r\n    {\r\n        public static void main(String[] argv) throws Exception\r\n        {\r\n            List stuff = Arrays.asList(new String[] { &quot;a&quot;, &quot;b&quot; });\r\n            List list = new ArrayList(stuff);\r\n            list = Collections.unmodifiableList(list);\r\n            Set set = new HashSet(stuff);\r\n            set = Collections.unmodifiableSet(set);\r\n            Map map = new HashMap();\r\n            map = Collections.unmodifiableMap(map);\r\n            System.out.println(&quot;Collection is read-only now.&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableList-java.util.List-","title":"make ArrayList Read only","body":"<p>Pass the list object to <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableList-java.util.List-\" rel=\"nofollow noreferrer\"><code>Collections.unmodifiableList()</code></a>. See the example below.</p>\n\n<pre><code>import java.util.*;\n\npublic class CollDemo\n{\n    public static void main(String[] argv) throws Exception\n    {\n        List stuff = Arrays.asList(new String[] { \"a\", \"b\" });\n        List list = new ArrayList(stuff);\n        list = Collections.unmodifiableList(list);\n        Set set = new HashSet(stuff);\n        set = Collections.unmodifiableSet(set);\n        Map map = new HashMap();\n        map = Collections.unmodifiableMap(map);\n        System.out.println(\"Collection is read-only now.\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7454108,"reputation":840,"user_id":5667861,"display_name":"Amar Magar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522335354,"creation_date":1457950515,"answer_id":35984730,"question_id":2419353,"body_markdown":"Pass the collection object to its equivalent unmodifiable function of [`Collections`][1] class. The following code shows use of [`unmodifiableList`][2]\r\n\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n\r\n\r\n    public class Temp {\r\n\r\n\t    public static void main(String[] args) {\r\n\r\n\t\t    List&lt;Integer&gt; objList = new ArrayList&lt;Integer&gt;();\r\n\t\t    objList.add(4);\r\n\t\t    objList.add(5);\r\n\t\t    objList.add(6);\r\n\t\t    objList.add(7);\r\n\r\n\t\t    objList = Collections.unmodifiableList(objList);\r\n\t\t    System.out.println(&quot;List contents &quot; + objList);\r\n\r\n\t\t    try {\r\n\t\t\t    objList.add(9);\r\n\t\t    } catch(UnsupportedOperationException e) {\r\n\t\t\t    e.printStackTrace();\r\n\t\t\t    System.out.println(&quot;Exception occured&quot;);\r\n\t\t    }\r\n\t\t    System.out.println(&quot;List contents &quot; + objList);\r\n\t    }\r\n\r\n    }\r\n\r\nsame way you can create other collections unmodifiable as well\r\n\r\n - [`Collections.unmodifiableMap(map)`][3]\r\n - [`Collections.unmodifiableSet(set)`][4]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableList-java.util.List-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableMap-java.util.Map-\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableSet-java.util.Set-","title":"make ArrayList Read only","body":"<p>Pass the collection object to its equivalent unmodifiable function of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html\" rel=\"nofollow noreferrer\"><code>Collections</code></a> class. The following code shows use of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableList-java.util.List-\" rel=\"nofollow noreferrer\"><code>unmodifiableList</code></a></p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\n\npublic class Temp {\n\n    public static void main(String[] args) {\n\n        List&lt;Integer&gt; objList = new ArrayList&lt;Integer&gt;();\n        objList.add(4);\n        objList.add(5);\n        objList.add(6);\n        objList.add(7);\n\n        objList = Collections.unmodifiableList(objList);\n        System.out.println(\"List contents \" + objList);\n\n        try {\n            objList.add(9);\n        } catch(UnsupportedOperationException e) {\n            e.printStackTrace();\n            System.out.println(\"Exception occured\");\n        }\n        System.out.println(\"List contents \" + objList);\n    }\n\n}\n</code></pre>\n\n<p>same way you can create other collections unmodifiable as well</p>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableMap-java.util.Map-\" rel=\"nofollow noreferrer\"><code>Collections.unmodifiableMap(map)</code></a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableSet-java.util.Set-\" rel=\"nofollow noreferrer\"><code>Collections.unmodifiableSet(set)</code></a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4336062,"reputation":1379,"user_id":3540514,"display_name":"Atspulgs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646412210,"creation_date":1646412210,"answer_id":71354518,"question_id":2419353,"body_markdown":"You can use this as a convenient way to initialize your ordered immutable List.\r\n \r\n\r\n    List&lt;Integer&gt; unmodifiableList = List.of(1,2,3,4,5);\r\n\r\n&gt; **Unmodifiable Lists** [Source][1]\r\n&gt; \r\n&gt; The List.of and List.copyOf static factory methods provide a\r\n&gt; convenient way to create unmodifiable lists. The List instances\r\n&gt; created by these methods have the following characteristics:\r\n&gt; \r\n&gt;  - They are unmodifiable. Elements cannot be added, removed, or replaced. Calling any mutator method on the List will always cause\r\n&gt; UnsupportedOperationException to be thrown. However, if the contained\r\n&gt; elements are themselves mutable, this may cause the List&#39;s contents to\r\n&gt; appear to change. \r\n&gt;  - They disallow null elements. Attempts to create them with null elements result in NullPointerException. \r\n&gt;  - They are serializable if all elements are serializable. \r\n&gt;  - The order of elements in the list is the same as the order of the provided arguments, or of the elements in the provided array.\r\n&gt;  - The lists and their subList views implement the RandomAccess interface. \r\n&gt;  - They are value-based. Programmers should treat instances that are equal as interchangeable and should not use them for synchronization,\r\n&gt; or unpredictable behavior may occur. For example, in a future release,\r\n&gt; synchronization may fail. Callers should make no assumptions about the\r\n&gt; identity of the returned instances. Factories are free to create new\r\n&gt; instances or reuse existing ones. \r\n&gt;  - They are serialized as specified on the Serialized Form page.\r\n\r\nNote: Though other answers also work and answer the question, I feel like this tidbit adds value to the overall conversation.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html","title":"make ArrayList Read only","body":"<p>You can use this as a convenient way to initialize your ordered immutable List.</p>\n<pre><code>List&lt;Integer&gt; unmodifiableList = List.of(1,2,3,4,5);\n</code></pre>\n<blockquote>\n<p><strong>Unmodifiable Lists</strong> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\">Source</a></p>\n<p>The List.of and List.copyOf static factory methods provide a\nconvenient way to create unmodifiable lists. The List instances\ncreated by these methods have the following characteristics:</p>\n<ul>\n<li>They are unmodifiable. Elements cannot be added, removed, or replaced. Calling any mutator method on the List will always cause\nUnsupportedOperationException to be thrown. However, if the contained\nelements are themselves mutable, this may cause the List's contents to\nappear to change.</li>\n<li>They disallow null elements. Attempts to create them with null elements result in NullPointerException.</li>\n<li>They are serializable if all elements are serializable.</li>\n<li>The order of elements in the list is the same as the order of the provided arguments, or of the elements in the provided array.</li>\n<li>The lists and their subList views implement the RandomAccess interface.</li>\n<li>They are value-based. Programmers should treat instances that are equal as interchangeable and should not use them for synchronization,\nor unpredictable behavior may occur. For example, in a future release,\nsynchronization may fail. Callers should make no assumptions about the\nidentity of the returned instances. Factories are free to create new\ninstances or reuse existing ones.</li>\n<li>They are serialized as specified on the Serialized Form page.</li>\n</ul>\n</blockquote>\n<p>Note: Though other answers also work and answer the question, I feel like this tidbit adds value to the overall conversation.</p>\n"}],"owner":{"account_id":85376,"reputation":15716,"user_id":238052,"accept_rate":66,"display_name":"gmhk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50240,"favorite_count":0,"down_vote_count":1,"up_vote_count":73,"accepted_answer_id":2419365,"answer_count":5,"score":72,"last_activity_date":1646412210,"creation_date":1268244501,"question_id":2419353,"body_markdown":"In Java, how can you make an `ArrayList` read-only (so that no one can add elements, edit, or delete elements) after initialization?","title":"make ArrayList Read only","body":"<p>In Java, how can you make an <code>ArrayList</code> read-only (so that no one can add elements, edit, or delete elements) after initialization?</p>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":41994,"reputation":20222,"user_id":122207,"display_name":"Tim Bender"},"score":3,"creation_date":1372121720,"post_id":17287478,"comment_id":25064901,"body_markdown":"Yes. Something like that.","body":"Yes. Something like that."},{"owner":{"account_id":76916,"reputation":27556,"user_id":219883,"accept_rate":83,"display_name":"Taryn East"},"score":0,"creation_date":1372143640,"post_id":17287478,"comment_id":25070856,"body_markdown":"What error did you receive when you tried the code above?","body":"What error did you receive when you tried the code above?"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1479337943,"creation_date":1372121755,"answer_id":17287502,"question_id":17287478,"body_markdown":"This sounds like the file is embedded within your application.\r\n\r\nYou should be using `getClass().getResource(&quot;/path/to/your/resource.txt&quot;)`, which returns an `URL` or `getClass().getResourceAsStream(&quot;/path/to/your/resource.txt&quot;);`\r\n\r\nIf it&#39;s not an embedded resource, then you need to know the relative path from your application&#39;s execution context to where your file exists","title":"Get file from project folder using java","body":"<p>This sounds like the file is embedded within your application.</p>\n\n<p>You should be using <code>getClass().getResource(\"/path/to/your/resource.txt\")</code>, which returns an <code>URL</code> or <code>getClass().getResourceAsStream(\"/path/to/your/resource.txt\");</code></p>\n\n<p>If it's not an embedded resource, then you need to know the relative path from your application's execution context to where your file exists</p>\n"},{"tags":[],"owner":{"account_id":2006064,"reputation":7616,"user_id":1795924,"accept_rate":82,"display_name":"Ericson Willians"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1372121764,"creation_date":1372121764,"answer_id":17287506,"question_id":17287478,"body_markdown":"If you don&#39;t specify any path and put just the file (Just like you did), the default directory is always the one of your project (It&#39;s not inside the &quot;src&quot; folder. It&#39;s just inside the folder of your project).","title":"Get file from project folder using java","body":"<p>If you don't specify any path and put just the file (Just like you did), the default directory is always the one of your project (It's not inside the \"src\" folder. It's just inside the folder of your project).</p>\n"},{"tags":[],"owner":{"account_id":552017,"reputation":2595,"user_id":917035,"accept_rate":93,"display_name":"Singular1ty"},"down_vote_count":4,"up_vote_count":40,"is_accepted":true,"score":36,"last_activity_date":1372122413,"creation_date":1372122413,"answer_id":17287584,"question_id":17287478,"body_markdown":"Well, there are many different ways to get a file in Java, but that&#39;s the general gist.\r\n\r\nDon&#39;t forget that you&#39;ll need to wrap that up inside a `try {} catch (Exception e){}` at the very least, because File is part of `java.io` which means it must have try-catch block.\r\n\r\nNot to step on Ericson&#39;s question, but if you are using actual packages, you&#39;ll have issues with locations of files, unless you explicitly use it&#39;s location. Relative pathing gets messed up with Packages.\r\n\r\nie,\r\n\r\n    src/\r\n        main.java\r\n        x.txt\r\n\r\nIn this example, using `File f = new File(&quot;x.txt&quot;);` inside of `main.java` will throw a file-not-found exception.\r\n\r\nHowever, using `File f = new File(&quot;src/x.txt&quot;);` will work.\r\n\r\nHope that helps!","title":"Get file from project folder using java","body":"<p>Well, there are many different ways to get a file in Java, but that's the general gist.</p>\n\n<p>Don't forget that you'll need to wrap that up inside a <code>try {} catch (Exception e){}</code> at the very least, because File is part of <code>java.io</code> which means it must have try-catch block.</p>\n\n<p>Not to step on Ericson's question, but if you are using actual packages, you'll have issues with locations of files, unless you explicitly use it's location. Relative pathing gets messed up with Packages.</p>\n\n<p>ie,</p>\n\n<pre><code>src/\n    main.java\n    x.txt\n</code></pre>\n\n<p>In this example, using <code>File f = new File(\"x.txt\");</code> inside of <code>main.java</code> will throw a file-not-found exception.</p>\n\n<p>However, using <code>File f = new File(\"src/x.txt\");</code> will work.</p>\n\n<p>Hope that helps!</p>\n"},{"tags":[],"owner":{"account_id":5378574,"reputation":51,"user_id":4284592,"display_name":"doketan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1418893987,"creation_date":1418890630,"answer_id":27541937,"question_id":17287478,"body_markdown":"These lines worked in my case,\r\n\r\n    ClassLoader classLoader = getClass().getClassLoader();\r\n    File fi = new File(classLoader.getResource(&quot;test.txt&quot;).getFile());\r\n\r\nprovided test.txt file inside src","title":"Get file from project folder using java","body":"<p>These lines worked in my case,</p>\n\n<pre><code>ClassLoader classLoader = getClass().getClassLoader();\nFile fi = new File(classLoader.getResource(\"test.txt\").getFile());\n</code></pre>\n\n<p>provided test.txt file inside src</p>\n"},{"tags":[],"owner":{"account_id":2406911,"reputation":85,"user_id":2103105,"display_name":"Ehsan Gholami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449159879,"creation_date":1425214156,"answer_id":28793721,"question_id":17287478,"body_markdown":"in javaFx 8 \r\n\r\n    javafx.scene.image.Image img = new javafx.scene.image.Image(&quot;/myPic.jpg&quot;, true);\r\n    \r\n    URL url = new URL(img.impl_getUrl());","title":"Get file from project folder using java","body":"<p>in javaFx 8 </p>\n\n<pre><code>javafx.scene.image.Image img = new javafx.scene.image.Image(\"/myPic.jpg\", true);\n\nURL url = new URL(img.impl_getUrl());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6607153,"reputation":19,"user_id":5103635,"display_name":"Ston"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1436544583,"creation_date":1436544583,"answer_id":31345510,"question_id":17287478,"body_markdown":"Just did a quick google search and found that\r\n\r\n    System.getProperty(&quot;user.dir&quot;);\r\nreturns the current working directory as String. So to get a File out of this, just use\r\n\r\n    File projectDir = new File(System.getProperty(&quot;user.dir&quot;));\r\n","title":"Get file from project folder using java","body":"<p>Just did a quick google search and found that</p>\n\n<pre><code>System.getProperty(\"user.dir\");\n</code></pre>\n\n<p>returns the current working directory as String. So to get a File out of this, just use</p>\n\n<pre><code>File projectDir = new File(System.getProperty(\"user.dir\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4018615,"reputation":2239,"user_id":3309799,"accept_rate":33,"display_name":"Chris Neve"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1553703900,"creation_date":1459930846,"answer_id":36445369,"question_id":17287478,"body_markdown":"If you are trying to load a file which is not in the same directory as your Java class, you&#39;ve got to use the runtime directory structure rather than the one which appears at design time. \r\n\r\nTo find out what the runtime directory structure is, check your {root project dir}/target/classes directory. This directory is accessible via the &quot;.&quot; URL.\r\n\r\nBased on user4284592&#39;s answer, the following worked for me:\r\n\r\n    ClassLoader cl = getClass().getClassLoader();\r\n    File file = new File(cl.getResource(&quot;./docs/doc.pdf&quot;).getFile());\r\n\r\nwith the following directory structure:\r\n\r\n    {root dir}/target/classes/docs/doc.pdf\r\n\r\nHere&#39;s an explanation, so you don&#39;t just blindly copy and paste my code:\r\n\r\n- [java.lang.ClassLoader][1] is an object that is responsible for loading classes. Every Class object contains a reference to the ClassLoader that defined it and can fetch it with [getClassLoader()][2] method.\r\n- ClassLoader&#39;s [getResource][3] method finds the resource with the given name. A resource is some data that can be accessed by class code in a way that is independent of the location of the code. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getClassLoader()\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResource(java.lang.String)","title":"Get file from project folder using java","body":"<p>If you are trying to load a file which is not in the same directory as your Java class, you've got to use the runtime directory structure rather than the one which appears at design time. </p>\n\n<p>To find out what the runtime directory structure is, check your {root project dir}/target/classes directory. This directory is accessible via the \".\" URL.</p>\n\n<p>Based on user4284592's answer, the following worked for me:</p>\n\n<pre><code>ClassLoader cl = getClass().getClassLoader();\nFile file = new File(cl.getResource(\"./docs/doc.pdf\").getFile());\n</code></pre>\n\n<p>with the following directory structure:</p>\n\n<pre><code>{root dir}/target/classes/docs/doc.pdf\n</code></pre>\n\n<p>Here's an explanation, so you don't just blindly copy and paste my code:</p>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html\" rel=\"nofollow noreferrer\">java.lang.ClassLoader</a> is an object that is responsible for loading classes. Every Class object contains a reference to the ClassLoader that defined it and can fetch it with <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getClassLoader()\" rel=\"nofollow noreferrer\">getClassLoader()</a> method.</li>\n<li>ClassLoader's <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\">getResource</a> method finds the resource with the given name. A resource is some data that can be accessed by class code in a way that is independent of the location of the code. </li>\n</ul>\n"},{"tags":[],"owner":{"account_id":192003,"reputation":30422,"user_id":432903,"accept_rate":64,"display_name":"prayagupa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1475806721,"creation_date":1475806721,"answer_id":39908360,"question_id":17287478,"body_markdown":"Given a file `application.yaml` in `test/resources`\r\n\r\n\r\n    ll src/test/resources/\r\n    total 6\r\n    drwxrwx--- 1 root vboxsf 4096 Oct  6 12:23 ./\r\n    drwxrwx--- 1 root vboxsf    0 Sep 29 17:05 ../\r\n    -rwxrwx--- 1 root vboxsf  142 Sep 22 23:59 application.properties*\r\n    -rwxrwx--- 1 root vboxsf   78 Oct  6 12:23 application.yaml*\r\n    -rwxrwx--- 1 root vboxsf    0 Sep 22 17:31 db.properties*\r\n    -rwxrwx--- 1 root vboxsf  618 Sep 22 23:54 log4j2.json*\r\n\r\nFrom the test context, I can get the file with \r\n\r\n    String file = getClass().getClassLoader().getResource(&quot;application.yaml&quot;).getPath(); \r\n\r\nwhich will actually point to the file in `test-classes`\r\n\r\n    ll target/test-classes/\r\n    total 10\r\n    drwxrwx--- 1 root vboxsf 4096 Oct  6 18:49 ./\r\n    drwxrwx--- 1 root vboxsf 4096 Oct  6 18:32 ../\r\n    -rwxrwx--- 1 root vboxsf  142 Oct  6 17:35 application.properties*\r\n    -rwxrwx--- 1 root vboxsf   78 Oct  6 17:35 application.yaml*\r\n    drwxrwx--- 1 root vboxsf    0 Oct  6 18:50 com/\r\n    -rwxrwx--- 1 root vboxsf    0 Oct  6 17:35 db.properties*\r\n    -rwxrwx--- 1 root vboxsf  618 Oct  6 17:35 log4j2.json*\r\n\r\n","title":"Get file from project folder using java","body":"<p>Given a file <code>application.yaml</code> in <code>test/resources</code></p>\n\n<pre><code>ll src/test/resources/\ntotal 6\ndrwxrwx--- 1 root vboxsf 4096 Oct  6 12:23 ./\ndrwxrwx--- 1 root vboxsf    0 Sep 29 17:05 ../\n-rwxrwx--- 1 root vboxsf  142 Sep 22 23:59 application.properties*\n-rwxrwx--- 1 root vboxsf   78 Oct  6 12:23 application.yaml*\n-rwxrwx--- 1 root vboxsf    0 Sep 22 17:31 db.properties*\n-rwxrwx--- 1 root vboxsf  618 Sep 22 23:54 log4j2.json*\n</code></pre>\n\n<p>From the test context, I can get the file with </p>\n\n<pre><code>String file = getClass().getClassLoader().getResource(\"application.yaml\").getPath(); \n</code></pre>\n\n<p>which will actually point to the file in <code>test-classes</code></p>\n\n<pre><code>ll target/test-classes/\ntotal 10\ndrwxrwx--- 1 root vboxsf 4096 Oct  6 18:49 ./\ndrwxrwx--- 1 root vboxsf 4096 Oct  6 18:32 ../\n-rwxrwx--- 1 root vboxsf  142 Oct  6 17:35 application.properties*\n-rwxrwx--- 1 root vboxsf   78 Oct  6 17:35 application.yaml*\ndrwxrwx--- 1 root vboxsf    0 Oct  6 18:50 com/\n-rwxrwx--- 1 root vboxsf    0 Oct  6 17:35 db.properties*\n-rwxrwx--- 1 root vboxsf  618 Oct  6 17:35 log4j2.json*\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6734717,"reputation":85,"user_id":5189901,"display_name":"SSP"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1502640568,"creation_date":1502640568,"answer_id":45662337,"question_id":17287478,"body_markdown":"    String path = System.getProperty(&quot;user.dir&quot;)+&quot;/config.xml&quot;;\r\n    File f=new File(path);","title":"Get file from project folder using java","body":"<pre><code>String path = System.getProperty(\"user.dir\")+\"/config.xml\";\nFile f=new File(path);\n</code></pre>\n"}],"owner":{"account_id":2886814,"reputation":587,"user_id":2476476,"accept_rate":100,"display_name":"Abdullah Alhazmy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209420,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":17287584,"answer_count":9,"score":32,"last_activity_date":1646412113,"creation_date":1372121551,"question_id":17287478,"body_markdown":"I want to get File from project folder by using &quot;File class&quot;, How can I do that?\r\n\r\n    File file=new File(&quot;x1.txt&quot;);","title":"Get file from project folder using java","body":"<p>I want to get File from project folder by using &quot;File class&quot;, How can I do that?</p>\n<pre><code>File file=new File(&quot;x1.txt&quot;);\n</code></pre>\n"},{"tags":["java","git","eclipse","gitlab","jgit"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1592288491,"post_id":62400348,"comment_id":110363567,"body_markdown":"This is not a question, but an answer to the question of what can go wrong using outdated software. You are more than three years and 28(!) releases behind.","body":"This is not a question, but an answer to the question of what can go wrong using outdated software. You are more than three years and 28(!) releases behind."},{"owner":{"account_id":14653040,"reputation":11,"user_id":10582473,"display_name":"developer"},"score":0,"creation_date":1592549824,"post_id":62400348,"comment_id":110470557,"body_markdown":"Hey @howlger I have tried with the latest version of the jgit (5.7.0.202003110725-r).\nWith that version also I&#39;m getting the same error.","body":"Hey @howlger I have tried with the latest version of the jgit (5.7.0.202003110725-r). With that version also I&#39;m getting the same error."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1592554626,"post_id":62400348,"comment_id":110472645,"body_markdown":"How did you pass the Gitlab access token? https://www.eclipse.org/forums/index.php/t/1091325/ By the way, the latest JGit version is 5.8 which has been released two days ago.","body":"How did you pass the Gitlab access token? <a href=\"https://www.eclipse.org/forums/index.php/t/1091325/\" rel=\"nofollow noreferrer\">eclipse.org/forums/index.php/t/1091325</a> By the way, the latest JGit version is 5.8 which has been released two days ago."},{"owner":{"account_id":14653040,"reputation":11,"user_id":10582473,"display_name":"developer"},"score":0,"creation_date":1592568543,"post_id":62400348,"comment_id":110479067,"body_markdown":"Im passing the userName and password as CredentialsProvider credentialProvider = new UsernamePasswordCredentialsProvider(&quot;userName&quot;, &quot;password&quot;);","body":"Im passing the userName and password as CredentialsProvider credentialProvider = new UsernamePasswordCredentialsProvider(&quot;userName&quot;, &quot;password&quot;);"},{"owner":{"account_id":14653040,"reputation":11,"user_id":10582473,"display_name":"developer"},"score":0,"creation_date":1592647374,"post_id":62400348,"comment_id":110503374,"body_markdown":"@howlger I don&#39;t think this is something, which is fixed in jgit 5.8 version. And FYI in maven repository latest version is 5.7","body":"@howlger I don&#39;t think this is something, which is fixed in jgit 5.8 version. And FYI in maven repository latest version is 5.7"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1592651591,"post_id":62400348,"comment_id":110504533,"body_markdown":"JGit is actively developed and used by so many that it is very unlikely that this is a bug of JGit, but rather something on your side: missing permission, problem accessing the remote repository or caused by your code. Therefore show a [minimal example to reproduce the issue](https://stackoverflow.com/help/minimal-reproducible-example). Did it work once before? Does it work without/outside of Docker? Can you fetch from on the command line in Docker?","body":"JGit is actively developed and used by so many that it is very unlikely that this is a bug of JGit, but rather something on your side: missing permission, problem accessing the remote repository or caused by your code. Therefore show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal example to reproduce the issue</a>. Did it work once before? Does it work without/outside of Docker? Can you fetch from on the command line in Docker?"},{"owner":{"account_id":14653040,"reputation":11,"user_id":10582473,"display_name":"developer"},"score":0,"creation_date":1592678091,"post_id":62400348,"comment_id":110513335,"body_markdown":"@howlger added the sample code to replicate the issue. It do work from command line in docker. One strange thing observed is some times it works and sometimes it didn&#39;t work. Checked the same request using curl command with same url and headers, sometimes it is giving 200 and sometimes 403. So Is there anythings to check from the system end. If so what are the things to be checked.","body":"@howlger added the sample code to replicate the issue. It do work from command line in docker. One strange thing observed is some times it works and sometimes it didn&#39;t work. Checked the same request using curl command with same url and headers, sometimes it is giving 200 and sometimes 403. So Is there anythings to check from the system end. If so what are the things to be checked."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1593093234,"post_id":62400348,"comment_id":110663828,"body_markdown":"I have no glue why it does not work in Docker on the command line sometimes (I&#39;m not a Docker expert). Newer version of JGit works either with JSch or Apache MINA as SSH client. Does your Maven dependencies include a `jsch` or `sshd-core` JAR? If not, try to use [`org.eclipse.jgit.ssh.apache`](https://mvnrepository.com/artifact/org.eclipse.jgit/org.eclipse.jgit.ssh.apache) or if this does not work to the old [`org.eclipse.jgit.ssh.jsch`](https://mvnrepository.com/artifact/org.eclipse.jgit/org.eclipse.jgit.ssh.jsch) instead of `org.eclipse.jgit`.","body":"I have no glue why it does not work in Docker on the command line sometimes (I&#39;m not a Docker expert). Newer version of JGit works either with JSch or Apache MINA as SSH client. Does your Maven dependencies include a <code>jsch</code> or <code>sshd-core</code> JAR? If not, try to use <a href=\"https://mvnrepository.com/artifact/org.eclipse.jgit/org.eclipse.jgit.ssh.apache\" rel=\"nofollow noreferrer\"><code>org.eclipse.jgit.ssh.apache</code></a> or if this does not work to the old <a href=\"https://mvnrepository.com/artifact/org.eclipse.jgit/org.eclipse.jgit.ssh.jsch\" rel=\"nofollow noreferrer\"><code>org.eclipse.jgit.ssh.jsch</code></a> instead of <code>org.eclipse.jgit</code>."},{"owner":{"account_id":14653040,"reputation":11,"user_id":10582473,"display_name":"developer"},"score":1,"creation_date":1596525379,"post_id":62400348,"comment_id":111830744,"body_markdown":"Finally found the issue, error is due to the default HttpConnection.  \nUpdated the code to use apache HttpClientConnectionFactory.\n\n`HttpTransport.setConnectionFactory(new HttpClientConnectionFactory());`\n\nThanks @howlger, for your inputs","body":"Finally found the issue, error is due to the default HttpConnection.   Updated the code to use apache HttpClientConnectionFactory.  <code>HttpTransport.setConnectionFactory(new HttpClientConnectionFactory());</code>  Thanks @howlger, for your inputs"}],"answers":[{"tags":[],"owner":{"account_id":1940767,"reputation":17954,"user_id":1747018,"accept_rate":100,"display_name":"Yogesh_D"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592550644,"creation_date":1592550644,"answer_id":62465070,"question_id":62400348,"body_markdown":"The exception message points to that fact that the credentials that you have used do not have the right permissions to &quot;push&quot; to the gitlab repo.\r\nPlease check the credentials you have used.","title":"Transport Error :: Jgit :: git-upload-pack not permitted","body":"<p>The exception message points to that fact that the credentials that you have used do not have the right permissions to \"push\" to the gitlab repo.\nPlease check the credentials you have used.</p>\n"}],"owner":{"account_id":14653040,"reputation":11,"user_id":10582473,"display_name":"developer"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4447,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646411464,"creation_date":1592277186,"question_id":62400348,"body_markdown":"Getting the following error while performing the git operations with jgit library api&#39;s from java applications. This application is running on tomcat inside docker container.\r\n\r\nException stack trace:\r\n\r\n    Caused by: org.eclipse.jgit.api.errors.TransportException: https://gitlab.com/xxxxx/testproject.git: git-upload-pack not permitted on &#39;https://gitlab.com/xxxxx/testproject.git/&#39;\r\n    \tat org.eclipse.jgit.api.LsRemoteCommand.execute(LsRemoteCommand.java:189)\r\n    \tat org.eclipse.jgit.api.LsRemoteCommand.call(LsRemoteCommand.java:128)\r\n    \tat com.test.vcs.JGitUploadPackTest.testRepoUpdate(JGitUploadPackTest.java:35)\r\n    Caused by: org.eclipse.jgit.errors.TransportException: https://gitlab.com/xxxxx/testproject.git: git-upload-pack not permitted on &#39;https://gitlab.com/xxxxx/testproject.git/&#39;\r\n    \tat org.eclipse.jgit.transport.TransportHttp.connect(TransportHttp.java:545)\r\n    \tat org.eclipse.jgit.transport.TransportHttp.openFetch(TransportHttp.java:359)\r\n    \tat org.eclipse.jgit.api.LsRemoteCommand.execute(LsRemoteCommand.java:167)\r\n    \t... 135 common frames omitted\r\n\r\nNote: JGIT dependency version: 5.7.0.202003110725-r\r\n\r\nSteps to reproduce the issue:\r\n```java\r\npublic void getRefBranches() throws IOException, GitAPIException {\r\n        FileRepositoryBuilder builder = new FileRepositoryBuilder();\r\n        Repository repository = builder.readEnvironment().findGitDir(new File(&quot;${projectLocation}&quot;)).build();\r\n        Git git = new Git(repository);\r\n        CredentialsProvider credentialProvider = new UsernamePasswordCredentialsProvider(&quot;userName&quot;, &quot;password&quot;);\r\n\r\n        LsRemoteCommand listRemoteReferences = git.lsRemote();\r\n        listRemoteReferences.setCredentialsProvider(credentialProvider);\r\n        listRemoteReferences.setRemote(&quot;https://gitlab.com/xxxxx/testproject.git/&quot;);\r\n        listRemoteReferences.setHeads(true);\r\n        listRemoteReferences.setTags(false);\r\n        Collection&lt;Ref&gt; remoteBranches = listRemoteReferences.call();\r\n    }\r\n```\r\n","title":"Transport Error :: Jgit :: git-upload-pack not permitted","body":"<p>Getting the following error while performing the git operations with jgit library api's from java applications. This application is running on tomcat inside docker container.</p>\n<p>Exception stack trace:</p>\n<pre><code>Caused by: org.eclipse.jgit.api.errors.TransportException: https://gitlab.com/xxxxx/testproject.git: git-upload-pack not permitted on 'https://gitlab.com/xxxxx/testproject.git/'\n    at org.eclipse.jgit.api.LsRemoteCommand.execute(LsRemoteCommand.java:189)\n    at org.eclipse.jgit.api.LsRemoteCommand.call(LsRemoteCommand.java:128)\n    at com.test.vcs.JGitUploadPackTest.testRepoUpdate(JGitUploadPackTest.java:35)\nCaused by: org.eclipse.jgit.errors.TransportException: https://gitlab.com/xxxxx/testproject.git: git-upload-pack not permitted on 'https://gitlab.com/xxxxx/testproject.git/'\n    at org.eclipse.jgit.transport.TransportHttp.connect(TransportHttp.java:545)\n    at org.eclipse.jgit.transport.TransportHttp.openFetch(TransportHttp.java:359)\n    at org.eclipse.jgit.api.LsRemoteCommand.execute(LsRemoteCommand.java:167)\n    ... 135 common frames omitted\n</code></pre>\n<p>Note: JGIT dependency version: 5.7.0.202003110725-r</p>\n<p>Steps to reproduce the issue:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void getRefBranches() throws IOException, GitAPIException {\n        FileRepositoryBuilder builder = new FileRepositoryBuilder();\n        Repository repository = builder.readEnvironment().findGitDir(new File(&quot;${projectLocation}&quot;)).build();\n        Git git = new Git(repository);\n        CredentialsProvider credentialProvider = new UsernamePasswordCredentialsProvider(&quot;userName&quot;, &quot;password&quot;);\n\n        LsRemoteCommand listRemoteReferences = git.lsRemote();\n        listRemoteReferences.setCredentialsProvider(credentialProvider);\n        listRemoteReferences.setRemote(&quot;https://gitlab.com/xxxxx/testproject.git/&quot;);\n        listRemoteReferences.setHeads(true);\n        listRemoteReferences.setTags(false);\n        Collection&lt;Ref&gt; remoteBranches = listRemoteReferences.call();\n    }\n</code></pre>\n"},{"tags":["java","arrays","scala","arraylist"],"comments":[{"owner":{"account_id":11909868,"reputation":1138,"user_id":8715436,"display_name":"E. Shcherbo"},"score":0,"creation_date":1646403529,"post_id":71352531,"comment_id":126121019,"body_markdown":"I don&#39;t believe this SQL does what you want, for example if there are 3 records and one of them is greater than other twos, the query returns the same record twice. And if, for example, all of the records have the same created date, this query returns nothing I believe.","body":"I don&#39;t believe this SQL does what you want, for example if there are 3 records and one of them is greater than other twos, the query returns the same record twice. And if, for example, all of the records have the same created date, this query returns nothing I believe."}],"answers":[{"tags":[],"owner":{"account_id":2975918,"reputation":755,"user_id":2526969,"display_name":"frascu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646404660,"creation_date":1646404660,"answer_id":71352980,"question_id":71352531,"body_markdown":"You have to use `gropingBy` method using the fields as key.\r\n\r\nThe key can be:\r\n1. a **List**:\r\n```java\r\nMap&lt;List&lt;Object&gt;, Optional&lt;Metric&gt;&gt; map = metrics.stream()\r\n        .collect(Collectors.groupingBy(m -&gt;\r\n                        List.of(m.getResultKeyId(),\r\n                                m.getDatasetType(),\r\n                                m.getDatasetName(),\r\n                                m.getAnalyzerName(),\r\n                                m.getConstraintAlias()),\r\n                Collectors.maxBy(Comparator.comparing(Metric::getCreatedAt))));\r\n```\r\n\r\n2. **an object of type Metric** if you override the method `equals` and `hashCode` based just on the fields you want:\r\n```java\r\nMap&lt;Metric, Optional&lt;Metric&gt;&gt; map = metrics.stream()\r\n        .collect(Collectors.groupingBy(m -&gt; m,\r\n                Collectors.maxBy(Comparator.comparing(Metric::getCreatedAt))));\r\n```\r\n\r\n3. **another object with `equals` and `hascode` overridden** like Quintent of the library [javatuples](https://javadoc.io/doc/org.javatuples/javatuples/latest/org/javatuples/Quintet.html)\r\n```java\r\nMap&lt;Quintet, Optional&lt;Metric&gt;&gt; map = metrics.stream()\r\n        .collect(Collectors.groupingBy(m -&gt;\r\n                        new Quintet(m.getResultKeyId(),\r\n                                m.getDatasetType(),\r\n                                m.getDatasetName(),\r\n                                m.getAnalyzerName(),\r\n                                m.getConstraintAlias()),\r\n                Collectors.maxBy(Comparator.comparing(Metric::getCreatedAt))));\r\n```\r\n","title":"How to do groupBy and filter based on maxDate record in Java List","body":"<p>You have to use <code>gropingBy</code> method using the fields as key.</p>\n<p>The key can be:</p>\n<ol>\n<li>a <strong>List</strong>:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;List&lt;Object&gt;, Optional&lt;Metric&gt;&gt; map = metrics.stream()\n        .collect(Collectors.groupingBy(m -&gt;\n                        List.of(m.getResultKeyId(),\n                                m.getDatasetType(),\n                                m.getDatasetName(),\n                                m.getAnalyzerName(),\n                                m.getConstraintAlias()),\n                Collectors.maxBy(Comparator.comparing(Metric::getCreatedAt))));\n</code></pre>\n<ol start=\"2\">\n<li><strong>an object of type Metric</strong> if you override the method <code>equals</code> and <code>hashCode</code> based just on the fields you want:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Metric, Optional&lt;Metric&gt;&gt; map = metrics.stream()\n        .collect(Collectors.groupingBy(m -&gt; m,\n                Collectors.maxBy(Comparator.comparing(Metric::getCreatedAt))));\n</code></pre>\n<ol start=\"3\">\n<li><strong>another object with <code>equals</code> and <code>hascode</code> overridden</strong> like Quintent of the library <a href=\"https://javadoc.io/doc/org.javatuples/javatuples/latest/org/javatuples/Quintet.html\" rel=\"nofollow noreferrer\">javatuples</a></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Quintet, Optional&lt;Metric&gt;&gt; map = metrics.stream()\n        .collect(Collectors.groupingBy(m -&gt;\n                        new Quintet(m.getResultKeyId(),\n                                m.getDatasetType(),\n                                m.getDatasetName(),\n                                m.getAnalyzerName(),\n                                m.getConstraintAlias()),\n                Collectors.maxBy(Comparator.comparing(Metric::getCreatedAt))));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11909868,"reputation":1138,"user_id":8715436,"display_name":"E. Shcherbo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646411312,"creation_date":1646406460,"answer_id":71353341,"question_id":71352531,"body_markdown":"we can use `Collectors.toMap`, which maps the key represented as a record `MetricKey` (basically this is just a tuple of the fields you need to group by) to a `Metric`. Since `toMap` doesn&#39;t allow duplicates, we also provide the merge function which always keeps metric with a maximum `createdDate` in the map.\r\n\r\nSo I would propose to add the `getKey` method to the `Metric` class so that it returns the key as a record or as a custom class which overrides `equals` and `hashCode`. \r\n```\r\nclass Metric\r\n{\r\n  // ... all your fields\r\n   \r\n  record MetricKey(Long resultKeyId, String analyzerName,\r\n       DatasetType datasetType, String datasetName, String constraintAlias) {  }\r\n   \r\n  public MetricKey getKey() {\r\n    return new MetricKey(resultKeyId, datasetType, datasetName,\r\n       analyzerName, constraintAlias);\r\n  }\r\n\r\n  public LocalDateTime getCreatedAt() {\r\n    return createdAt;\r\n  }\r\n}\r\n```\r\nAnd the data processing pipeline:\r\n```\r\nList&lt;Metric&gt; maximums = new ArrayList&lt;&gt;(metrics.stream().collect(\r\n  Collectors.toMap(\r\n    Metric::getKey,\r\n    Function.identity(),\r\n    (m1, m2) -&gt; m1.createdAt &gt; m2.createdAt ? m1 : m2))\r\n  .values());\r\n```","title":"How to do groupBy and filter based on maxDate record in Java List","body":"<p>we can use <code>Collectors.toMap</code>, which maps the key represented as a record <code>MetricKey</code> (basically this is just a tuple of the fields you need to group by) to a <code>Metric</code>. Since <code>toMap</code> doesn't allow duplicates, we also provide the merge function which always keeps metric with a maximum <code>createdDate</code> in the map.</p>\n<p>So I would propose to add the <code>getKey</code> method to the <code>Metric</code> class so that it returns the key as a record or as a custom class which overrides <code>equals</code> and <code>hashCode</code>.</p>\n<pre><code>class Metric\n{\n  // ... all your fields\n   \n  record MetricKey(Long resultKeyId, String analyzerName,\n       DatasetType datasetType, String datasetName, String constraintAlias) {  }\n   \n  public MetricKey getKey() {\n    return new MetricKey(resultKeyId, datasetType, datasetName,\n       analyzerName, constraintAlias);\n  }\n\n  public LocalDateTime getCreatedAt() {\n    return createdAt;\n  }\n}\n</code></pre>\n<p>And the data processing pipeline:</p>\n<pre><code>List&lt;Metric&gt; maximums = new ArrayList&lt;&gt;(metrics.stream().collect(\n  Collectors.toMap(\n    Metric::getKey,\n    Function.identity(),\n    (m1, m2) -&gt; m1.createdAt &gt; m2.createdAt ? m1 : m2))\n  .values());\n</code></pre>\n"}],"owner":{"account_id":18867887,"reputation":105,"user_id":13763219,"display_name":"Shiv"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":444,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1646411312,"creation_date":1646402452,"question_id":71352531,"body_markdown":"I have a java POJO for collecting metics like below : \r\n\r\n    public class Metric {\r\n    \r\n        Long metricId;\r\n        Long resultKeyId;\r\n        @NonNull DatasetType datasetType;\r\n        @NonNull String datasetName;\r\n        @NonNull String analyzerName;\r\n        @NonNull String constraintAlias;\r\n        @NonNull LocalDateTime entityDate;\r\n        @NonNull long entityDurationSec;\r\n        @NonNull Double metricValue;\r\n        @NonNull String changedBy;\r\n        Long jobId = 0L;\r\n        Long codeArtifactId = 0L;\r\n        LocalDateTime createdAt;\r\n        LocalDateTime lastChanged;\r\n  \r\n    }\r\n\r\n\r\nI have a list of metrics from the above pojo like  `List&lt;Metric&gt; metrics`\r\n\r\nNow this list can have multiple items and i want to select only one record for the same `resultKeyId,datasetType,datasetName,analyzerName,constraintAlias` with the max `createdAt`\r\n\r\n\r\nThe SQL Representation of this would be something like : \r\n\r\n    select a.* from \r\n    dataval_metric a \r\n    join dataval_metric b \r\n    on a.result_key_id=b.result_key_id \r\n    and a.dataset_type=b.dataset_type \r\n    and a.dataset_name=b.dataset_name \r\n    and a.analyzer_name=b.analyzer_name \r\n    and a.constraint_alias=b.constraint_alias  \r\n    where a.result_key_id = 434 \r\n    and a.mysql_row_created_at &gt;= b. mysql_row_created_at;\r\n\r\n\r\nLooking for pointers to understand how this can be done in a performant way in Java","title":"How to do groupBy and filter based on maxDate record in Java List","body":"<p>I have a java POJO for collecting metics like below :</p>\n<pre><code>public class Metric {\n\n    Long metricId;\n    Long resultKeyId;\n    @NonNull DatasetType datasetType;\n    @NonNull String datasetName;\n    @NonNull String analyzerName;\n    @NonNull String constraintAlias;\n    @NonNull LocalDateTime entityDate;\n    @NonNull long entityDurationSec;\n    @NonNull Double metricValue;\n    @NonNull String changedBy;\n    Long jobId = 0L;\n    Long codeArtifactId = 0L;\n    LocalDateTime createdAt;\n    LocalDateTime lastChanged;\n\n}\n</code></pre>\n<p>I have a list of metrics from the above pojo like  <code>List&lt;Metric&gt; metrics</code></p>\n<p>Now this list can have multiple items and i want to select only one record for the same <code>resultKeyId,datasetType,datasetName,analyzerName,constraintAlias</code> with the max <code>createdAt</code></p>\n<p>The SQL Representation of this would be something like :</p>\n<pre><code>select a.* from \ndataval_metric a \njoin dataval_metric b \non a.result_key_id=b.result_key_id \nand a.dataset_type=b.dataset_type \nand a.dataset_name=b.dataset_name \nand a.analyzer_name=b.analyzer_name \nand a.constraint_alias=b.constraint_alias  \nwhere a.result_key_id = 434 \nand a.mysql_row_created_at &gt;= b. mysql_row_created_at;\n</code></pre>\n<p>Looking for pointers to understand how this can be done in a performant way in Java</p>\n"},{"tags":["java","jenkins","ssh"],"answers":[{"tags":[],"owner":{"account_id":14476702,"reputation":46,"user_id":10457172,"display_name":"Mesut"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646410915,"creation_date":1646410915,"answer_id":71354262,"question_id":70579230,"body_markdown":"This is most likely due to incorrect content of the KnownHosts file. Therefore, make sure that the KnownHosts file is correct with the content of id_rsa.pub(public file), if it is incorrect, you will need to add it after Host name or IP address. Such as;\r\n\r\nHOSTNAME ssh-rsa AAAAB3NzaC1yc...\r\n","title":"Connecting jenkins agent: Malformed SSH byte string","body":"<p>This is most likely due to incorrect content of the KnownHosts file. Therefore, make sure that the KnownHosts file is correct with the content of id_rsa.pub(public file), if it is incorrect, you will need to add it after Host name or IP address. Such as;</p>\n<p>HOSTNAME ssh-rsa AAAAB3NzaC1yc...</p>\n"}],"owner":{"account_id":8277193,"reputation":694,"user_id":6222968,"display_name":"Alex Chudinov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":397,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71354262,"answer_count":1,"score":0,"last_activity_date":1646410915,"creation_date":1641301176,"question_id":70579230,"body_markdown":"I encontered this problem when was trying to connect jenkins agent trough the ssh. I&#39;ve passed all the steps as described here: https://acloudguru.com/blog/engineering/adding-a-jenkins-agent-node, except one - instead ```yum install java-1.8.0-openjdk``` I&#39;ve used ```apt install default-jre```, which in the end has gave me ```openjdk 11.0.13 2021-10-19```. After the all trying launch the agent I am getting error:\r\n\r\n    java.io.IOException: Malformed SSH byte string.\r\n    \tat com.trilead.ssh2.packets.TypesReader.readByteString(TypesReader.java:132)\r\n    \tat com.trilead.ssh2.packets.TypesReader.readMPINT(TypesReader.java:117)\r\n    \tat com.trilead.ssh2.signature.RSAKeyAlgorithm.decodePublicKey(RSAKeyAlgorithm.java:113)\r\n    \tat com.trilead.ssh2.signature.RSAKeyAlgorithm.decodePublicKey(RSAKeyAlgorithm.java:28)\r\n    \tat com.trilead.ssh2.KnownHosts.addHostkey(KnownHosts.java:108)\r\n    \tat com.trilead.ssh2.KnownHosts.initialize(KnownHosts.java:410)\r\n    \tat com.trilead.ssh2.KnownHosts.initialize(KnownHosts.java:438)\r\n    \tat com.trilead.ssh2.KnownHosts.&lt;init&gt;(KnownHosts.java:87)\r\n    \tat hudson.plugins.sshslaves.verifiers.KnownHostsFileKeyVerificationStrategy.getPreferredKeyAlgorithms(KnownHostsFileKeyVerificationStrategy.java:108)\r\n    \tat hudson.plugins.sshslaves.SSHLauncher$1.call(SSHLauncher.java:425)\r\n    \tat hudson.plugins.sshslaves.SSHLauncher$1.call(SSHLauncher.java:421)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n    [01/04/22 15:30:12] Launch failed - cleaning up connection\r\n    [01/04/22 15:30:12] [SSH] Connection closed.\r\n\r\nPlease, help me to understand, what happens and how can it be resolved. I am newbuy with jenkins and not familiar with java. Googling of this problem did not supply some sensible result to me.\r\nThank you.\r\n\r\n","title":"Connecting jenkins agent: Malformed SSH byte string","body":"<p>I encontered this problem when was trying to connect jenkins agent trough the ssh. I've passed all the steps as described here: <a href=\"https://acloudguru.com/blog/engineering/adding-a-jenkins-agent-node\" rel=\"nofollow noreferrer\">https://acloudguru.com/blog/engineering/adding-a-jenkins-agent-node</a>, except one - instead <code>yum install java-1.8.0-openjdk</code> I've used <code>apt install default-jre</code>, which in the end has gave me <code>openjdk 11.0.13 2021-10-19</code>. After the all trying launch the agent I am getting error:</p>\n<pre><code>java.io.IOException: Malformed SSH byte string.\n    at com.trilead.ssh2.packets.TypesReader.readByteString(TypesReader.java:132)\n    at com.trilead.ssh2.packets.TypesReader.readMPINT(TypesReader.java:117)\n    at com.trilead.ssh2.signature.RSAKeyAlgorithm.decodePublicKey(RSAKeyAlgorithm.java:113)\n    at com.trilead.ssh2.signature.RSAKeyAlgorithm.decodePublicKey(RSAKeyAlgorithm.java:28)\n    at com.trilead.ssh2.KnownHosts.addHostkey(KnownHosts.java:108)\n    at com.trilead.ssh2.KnownHosts.initialize(KnownHosts.java:410)\n    at com.trilead.ssh2.KnownHosts.initialize(KnownHosts.java:438)\n    at com.trilead.ssh2.KnownHosts.&lt;init&gt;(KnownHosts.java:87)\n    at hudson.plugins.sshslaves.verifiers.KnownHostsFileKeyVerificationStrategy.getPreferredKeyAlgorithms(KnownHostsFileKeyVerificationStrategy.java:108)\n    at hudson.plugins.sshslaves.SSHLauncher$1.call(SSHLauncher.java:425)\n    at hudson.plugins.sshslaves.SSHLauncher$1.call(SSHLauncher.java:421)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n[01/04/22 15:30:12] Launch failed - cleaning up connection\n[01/04/22 15:30:12] [SSH] Connection closed.\n</code></pre>\n<p>Please, help me to understand, what happens and how can it be resolved. I am newbuy with jenkins and not familiar with java. Googling of this problem did not supply some sensible result to me.\nThank you.</p>\n"},{"tags":["java","hibernate","jpa","java-8"],"answers":[{"tags":[],"owner":{"account_id":24450607,"reputation":1,"user_id":18372912,"display_name":"user18372912"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646410902,"creation_date":1646392372,"answer_id":71350604,"question_id":71350330,"body_markdown":"Just use Java **Decimalformat** util class. You should use that pattern: ###.## \r\n\r\nIf you want to round n decimal places then do:\r\n\r\n    String s = &quot;.&quot;;\r\n    for(int i = 0; i&lt;n; i++) {\r\n        s += &quot;#&quot;;\r\n    }\r\n    if(n &lt;= 0) {\r\n        s = &quot;&quot;;\r\n    }\r\n    System.out.println(new DecimalFormat(&quot;###&quot; + s).format(ur number));\r\n    \r\n\r\nidk if it&#39;s right. If a made any misteak then correct me.\r\n    \r\n\r\n","title":"How to round to n decimal places a calculated field in Java using Hibernate","body":"<p>Just use Java <strong>Decimalformat</strong> util class. You should use that pattern: ###.##</p>\n<p>If you want to round n decimal places then do:</p>\n<pre><code>String s = &quot;.&quot;;\nfor(int i = 0; i&lt;n; i++) {\n    s += &quot;#&quot;;\n}\nif(n &lt;= 0) {\n    s = &quot;&quot;;\n}\nSystem.out.println(new DecimalFormat(&quot;###&quot; + s).format(ur number));\n</code></pre>\n<p>idk if it's right. If a made any misteak then correct me.</p>\n"},{"tags":[],"owner":{"account_id":24437820,"reputation":76,"user_id":18361869,"display_name":"Turtleneck Tech"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646410425,"creation_date":1646392404,"answer_id":71350611,"question_id":71350330,"body_markdown":"You could multiply the number with 10 to the power n, round it off to the nearest whole number and then divide it with 10 to the power n again.\r\n\r\n\r\n\r\n    @Column(name = &quot;weight&quot;)\r\n    @Formula(&quot;round(weight/1000)&quot;)\r\n    private Double weight;\r\n    n=5;\t\t\t\t\t\t\t//just for demonstration purposes\r\n    weight *= Math.pow(10,n);\t\t//multiplying it by 10 to the power n\r\n    Math.round(weight);\t\t\t\t//rounding it off\r\n    weight /= Math.pow(10,n);\t\t//getting the rounded off value for weight","title":"How to round to n decimal places a calculated field in Java using Hibernate","body":"<p>You could multiply the number with 10 to the power n, round it off to the nearest whole number and then divide it with 10 to the power n again.</p>\n<pre><code>@Column(name = &quot;weight&quot;)\n@Formula(&quot;round(weight/1000)&quot;)\nprivate Double weight;\nn=5;                            //just for demonstration purposes\nweight *= Math.pow(10,n);       //multiplying it by 10 to the power n\nMath.round(weight);             //rounding it off\nweight /= Math.pow(10,n);       //getting the rounded off value for weight\n</code></pre>\n"}],"owner":{"account_id":23923493,"reputation":77,"user_id":17918927,"display_name":"GoingAround"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1646410902,"creation_date":1646391140,"question_id":71350330,"body_markdown":"How do you round to n decimal places a calculated field using hibernate annotation `@Format`?\r\n\r\n```\r\n@Column(name = &quot;weight&quot;)\r\n@Formula(&quot;round(weight/1000)&quot;)\r\nprivate Double weight;\r\n```","title":"How to round to n decimal places a calculated field in Java using Hibernate","body":"<p>How do you round to n decimal places a calculated field using hibernate annotation <code>@Format</code>?</p>\n<pre><code>@Column(name = &quot;weight&quot;)\n@Formula(&quot;round(weight/1000)&quot;)\nprivate Double weight;\n</code></pre>\n"},{"tags":["java","maven","build","mapstruct"],"comments":[{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1646411836,"post_id":71354114,"comment_id":126124053,"body_markdown":"I provided an answer please consider to accept it as answer if it satisfied the requirement to improve community otherwise feel free to add comment.","body":"I provided an answer please consider to accept it as answer if it satisfied the requirement to improve community otherwise feel free to add comment."}],"answers":[{"tags":[],"owner":{"account_id":24453242,"reputation":1,"user_id":18375183,"display_name":"Leandro Rivarola"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1646410862,"creation_date":1646410862,"answer_id":71354252,"question_id":71354114,"body_markdown":"Set &quot;Build Automatically&quot; on in your IDE. If you&#39;re using Eclipse it&#39;s located at the top in &quot;Project&quot;.","title":"Mapstruct compile only changed files with maven","body":"<p>Set &quot;Build Automatically&quot; on in your IDE. If you're using Eclipse it's located at the top in &quot;Project&quot;.</p>\n"},{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646410872,"creation_date":1646410872,"answer_id":71354255,"question_id":71354114,"body_markdown":"The recompile of the project didn&#39;t run the annotation processor. MapStruct is invoked by the Java compiler and the maven-compiler-plugin is responsible for cleaning up the folder with the generated classes, thus it will go through all mapper interfaces.","title":"Mapstruct compile only changed files with maven","body":"<p>The recompile of the project didn't run the annotation processor. MapStruct is invoked by the Java compiler and the maven-compiler-plugin is responsible for cleaning up the folder with the generated classes, thus it will go through all mapper interfaces.</p>\n"}],"owner":{"account_id":15043220,"reputation":195,"user_id":10857151,"display_name":"Michael Cauduro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":422,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1646410872,"creation_date":1646410163,"question_id":71354114,"body_markdown":"is there a way to clean and compile only changed classes when working with mapstruct and maven?\r\nFor example, in my project I have lots of mapstruct interfaces which, once compiled, generates implementations in the target folder. but I need to avoid re-compiling those classes that i didn&#39;t change to ensure a fastest build.\r\nThanks in advance.","title":"Mapstruct compile only changed files with maven","body":"<p>is there a way to clean and compile only changed classes when working with mapstruct and maven?\nFor example, in my project I have lots of mapstruct interfaces which, once compiled, generates implementations in the target folder. but I need to avoid re-compiling those classes that i didn't change to ensure a fastest build.\nThanks in advance.</p>\n"},{"tags":["java","sql","criteria-api"],"comments":[{"owner":{"account_id":16669822,"reputation":379,"user_id":12047586,"display_name":"Imaguest"},"score":0,"creation_date":1646145167,"post_id":71309461,"comment_id":126047571,"body_markdown":"I think the only way to achieve these customs order by is to use &quot;order by case&quot;. Take a look at [this](https://stackoverflow.com/questions/55807061/my-custom-order-by-in-criteria-query-jpql). Maybe it will help you.","body":"I think the only way to achieve these customs order by is to use &quot;order by case&quot;. Take a look at <a href=\"https://stackoverflow.com/questions/55807061/my-custom-order-by-in-criteria-query-jpql\">this</a>. Maybe it will help you."},{"owner":{"account_id":17459269,"reputation":136,"user_id":12657338,"display_name":"Noel93"},"score":0,"creation_date":1646155657,"post_id":71309461,"comment_id":126051856,"body_markdown":"Thanks, looking promising. I tried it but get a &quot;ORA-00932 inconsistent datatypes: expected number got binary&quot; error. My code looks like that: ```sortExpression = criteriaBuilder.selectCase(data.get(&quot;id&quot;))\n\t\t\t\t\t\t.when(criteriaBuilder.literal(userId), criteriaBuilder.literal(1))\n\t\t\t\t\t\t.when(criteriaBuilder.nullLiteral(Long.class), criteriaBuilder.literal(2))\n\t\t\t\t\t\t.otherwise(criteriaBuilder.literal(3));``` where the ID is of type Long.","body":"Thanks, looking promising. I tried it but get a &quot;ORA-00932 inconsistent datatypes: expected number got binary&quot; error. My code looks like that: <code>sortExpression = criteriaBuilder.selectCase(data.get(&quot;id&quot;)) \t\t\t\t\t\t.when(criteriaBuilder.literal(userId), criteriaBuilder.literal(1)) \t\t\t\t\t\t.when(criteriaBuilder.nullLiteral(Long.class), criteriaBuilder.literal(2)) \t\t\t\t\t\t.otherwise(criteriaBuilder.literal(3));</code> where the ID is of type Long."}],"answers":[{"tags":[],"owner":{"account_id":17459269,"reputation":136,"user_id":12657338,"display_name":"Noel93"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646410728,"creation_date":1646410728,"answer_id":71354228,"question_id":71309461,"body_markdown":"I made it work like this:\r\n\r\n```\r\nExpression&lt;Long&gt; id = data.get(&quot;userId&quot;);\r\nLong userId = // ID of logged in user\r\nExpression&lt;?&gt; sortExpression = criteriaBuilder.selectCase()\r\n                        .when(criteriaBuilder.isNull(id), 1)\r\n\t\t\t\t\t\t.when(criteriaBuilder.equal(id, userId), 2)\r\n                        .otherwise(3);\r\n```","title":"Order query results with Criteria API by something that is NOT a database field","body":"<p>I made it work like this:</p>\n<pre><code>Expression&lt;Long&gt; id = data.get(&quot;userId&quot;);\nLong userId = // ID of logged in user\nExpression&lt;?&gt; sortExpression = criteriaBuilder.selectCase()\n                        .when(criteriaBuilder.isNull(id), 1)\n                        .when(criteriaBuilder.equal(id, userId), 2)\n                        .otherwise(3);\n</code></pre>\n"}],"owner":{"account_id":17459269,"reputation":136,"user_id":12657338,"display_name":"Noel93"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":624,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71354228,"answer_count":1,"score":0,"last_activity_date":1646410728,"creation_date":1646142484,"question_id":71309461,"body_markdown":"I&#39;m using Criteria API to fetch sorted data from my database.\r\nSorting like this works fine:\r\n\r\n```\r\nPath&lt;Data&gt; data = // initialize;\r\nString sortField = // initialize name of field to sort by;\r\nExpression&lt;?&gt; sortExpression = data.get(sortField);\r\ncriteriaQuery.orderBy(criteriaBuilder.desc(sortExpression));\r\n```\r\n\r\nThis way, I can order my results by field content. But how can I order by something else?\r\n\r\nIn my example, I have a database field ```data.user_id``` that contains a (nullable) user ID. While the query will fetch the ID, I want to sort not by the ID itself (the numerical value), but by the three categories &quot;the ID is null&quot;, &quot;the ID is mine&quot;, &quot;the ID is someone elses&quot;. I have access to the ID that is &quot;mine&quot; in my service method, but how can I sort like that?","title":"Order query results with Criteria API by something that is NOT a database field","body":"<p>I'm using Criteria API to fetch sorted data from my database.\nSorting like this works fine:</p>\n<pre><code>Path&lt;Data&gt; data = // initialize;\nString sortField = // initialize name of field to sort by;\nExpression&lt;?&gt; sortExpression = data.get(sortField);\ncriteriaQuery.orderBy(criteriaBuilder.desc(sortExpression));\n</code></pre>\n<p>This way, I can order my results by field content. But how can I order by something else?</p>\n<p>In my example, I have a database field <code>data.user_id</code> that contains a (nullable) user ID. While the query will fetch the ID, I want to sort not by the ID itself (the numerical value), but by the three categories &quot;the ID is null&quot;, &quot;the ID is mine&quot;, &quot;the ID is someone elses&quot;. I have access to the ID that is &quot;mine&quot; in my service method, but how can I sort like that?</p>\n"},{"tags":["java","xml","eclipse","jax-rs","wildfly"],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646410521,"creation_date":1646410521,"answer_id":71354188,"question_id":71352855,"body_markdown":"It&#39;s likely that the tutorial is written to deploy to Tomcat.  Wildfly has everything you need for JaxRS built in.\r\n\r\nTo get started you will need three files.  First, you need a class that extends `javax.ws.rs.core.Application`.  It can be in any package you&#39;d like:\r\n\r\n    import javax.ws.rs.ApplicationPath;\r\n    import javax.ws.rs.core.Application;\r\n    \r\n    @ApplicationPath(&quot;/rest&quot;)\r\n    public class RestApplicationConfig extends Application {\r\n    \t// intentionally empty\r\n    }\r\n\r\nNext, you need your service.  The one you show should work though I&#39;d have my `Path` start with a forward slash like `@Path(&quot;/myresource&quot;)`.  Lastly, you need a `pom.xml` that produces a `war` file.  I haven&#39;t tested yours but I have one that looks like:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;artifactId&gt;jaxrs-simple-sample&lt;/artifactId&gt;\r\n        &lt;groupId&gt;com.hotjoe.jaxrs&lt;/groupId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n                &lt;version&gt;8.0.1&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nThat I just verified works.  Once you have all of this you can produce a war file that can be dropped into `$WILDFLY_HOME/standalone/deployments` and Wildfly will run it.  But you need to watch the URL.  As defined in my `pom.xml` this will create a war file named `jaxrs-simple-sample-1.0-SNAPSHOT.war` and this file name becomes part of the URL.  In this example, the URL to your service would be `http://localhost:8080/jaxrs-simple-sample-1.0-SNAPSHOT/rest/myresource`.  The `rest` part of that comes from the `@ApplicationPath` defined.  But the other part comes from the name of the war.  If you don&#39;t like that, you can add one more Wildfly specific file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;jboss-web&gt;\r\n        &lt;context-root&gt;myapp&lt;/context-root&gt;\r\n    &lt;/jboss-web&gt;\r\n\r\nThis file, in a standard Maven environment, would be named `jboss-web.xml` and would be placed in `src/main/webapp/WEB-INF`.  This would change the above URL to `http://localhost:8080/myapp/rest/myresource`.\r\n\r\n","title":"Wildfly server running, but returning 404 error Not found no matter what I do","body":"<p>It's likely that the tutorial is written to deploy to Tomcat.  Wildfly has everything you need for JaxRS built in.</p>\n<p>To get started you will need three files.  First, you need a class that extends <code>javax.ws.rs.core.Application</code>.  It can be in any package you'd like:</p>\n<pre><code>import javax.ws.rs.ApplicationPath;\nimport javax.ws.rs.core.Application;\n\n@ApplicationPath(&quot;/rest&quot;)\npublic class RestApplicationConfig extends Application {\n    // intentionally empty\n}\n</code></pre>\n<p>Next, you need your service.  The one you show should work though I'd have my <code>Path</code> start with a forward slash like <code>@Path(&quot;/myresource&quot;)</code>.  Lastly, you need a <code>pom.xml</code> that produces a <code>war</code> file.  I haven't tested yours but I have one that looks like:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;artifactId&gt;jaxrs-simple-sample&lt;/artifactId&gt;\n    &lt;groupId&gt;com.hotjoe.jaxrs&lt;/groupId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax&lt;/groupId&gt;\n            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n            &lt;version&gt;8.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>That I just verified works.  Once you have all of this you can produce a war file that can be dropped into <code>$WILDFLY_HOME/standalone/deployments</code> and Wildfly will run it.  But you need to watch the URL.  As defined in my <code>pom.xml</code> this will create a war file named <code>jaxrs-simple-sample-1.0-SNAPSHOT.war</code> and this file name becomes part of the URL.  In this example, the URL to your service would be <code>http://localhost:8080/jaxrs-simple-sample-1.0-SNAPSHOT/rest/myresource</code>.  The <code>rest</code> part of that comes from the <code>@ApplicationPath</code> defined.  But the other part comes from the name of the war.  If you don't like that, you can add one more Wildfly specific file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jboss-web&gt;\n    &lt;context-root&gt;myapp&lt;/context-root&gt;\n&lt;/jboss-web&gt;\n</code></pre>\n<p>This file, in a standard Maven environment, would be named <code>jboss-web.xml</code> and would be placed in <code>src/main/webapp/WEB-INF</code>.  This would change the above URL to <code>http://localhost:8080/myapp/rest/myresource</code>.</p>\n"}],"owner":{"account_id":24452112,"reputation":1,"user_id":18374189,"display_name":"David Grajfoner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2980,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646410521,"creation_date":1646404024,"question_id":71352855,"body_markdown":"I followed a REST API | Web service tutorial on the web and got stuck midway. When I run the server it setups successfully, shows that its running at http://localhost:8080/ as well but as soon as I try to access different servlets, the page reloads and returns with 404 Error Not found. I tried downloading earlier versions of wildfly with no avail. The paths I tried were /demorest, /webapi, /myresources and they were used in conjunction as well.\r\nWhat could be the problem?\r\n\r\n\r\n    package com.david.demorest;\r\n\r\n    import jakarta.ws.rs.GET;\r\n    import jakarta.ws.rs.Path;\r\n    import jakarta.ws.rs.Produces;\r\n    import jakarta.ws.rs.core.MediaType;\r\n\r\n    @Path(&quot;myresource&quot;)\r\n    public class MyResource {\r\n\r\n    @GET\r\n    @Produces(MediaType.TEXT_PLAIN)\r\n    public String getIt() {\r\n        return &quot;Got it!&quot;;\r\n    }\r\n    }\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!-- This web.xml file is not required when using Servlet 3.0 container,\r\n     see implementation details http://jersey.java.net/nonav/documentation/latest/jax-rs.html --&gt;\r\n&lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n            &lt;param-value&gt;com.david.demorest&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    &lt;/servlet&gt;\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/webapi/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n\r\n```\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.david&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demorest&lt;/artifactId&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;demorest&lt;/name&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;demorest&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;inherited&gt;true&lt;/inherited&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;${jersey.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\r\n            &lt;!-- use the following artifactId if you don&#39;t need servlet 2.x compatibility --&gt;\r\n            &lt;!-- artifactId&gt;jersey-container-servlet&lt;/artifactId --&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n       \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-media-json-binding&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n       \r\n    &lt;/dependencies&gt;\r\n    &lt;properties&gt;\r\n        &lt;jersey.version&gt;3.0.4&lt;/jersey.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n","title":"Wildfly server running, but returning 404 error Not found no matter what I do","body":"<p>I followed a REST API | Web service tutorial on the web and got stuck midway. When I run the server it setups successfully, shows that its running at http://localhost:8080/ as well but as soon as I try to access different servlets, the page reloads and returns with 404 Error Not found. I tried downloading earlier versions of wildfly with no avail. The paths I tried were /demorest, /webapi, /myresources and they were used in conjunction as well.\nWhat could be the problem?</p>\n<pre><code>package com.david.demorest;\n\nimport jakarta.ws.rs.GET;\nimport jakarta.ws.rs.Path;\nimport jakarta.ws.rs.Produces;\nimport jakarta.ws.rs.core.MediaType;\n\n@Path(&quot;myresource&quot;)\npublic class MyResource {\n\n@GET\n@Produces(MediaType.TEXT_PLAIN)\npublic String getIt() {\n    return &quot;Got it!&quot;;\n}\n}\n</code></pre>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!-- This web.xml file is not required when using Servlet 3.0 container,\n     see implementation details http://jersey.java.net/nonav/documentation/latest/jax-rs.html --&gt;\n&lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n            &lt;param-value&gt;com.david.demorest&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/webapi/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n\n</code></pre>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.david&lt;/groupId&gt;\n    &lt;artifactId&gt;demorest&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demorest&lt;/name&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;demorest&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;inherited&gt;true&lt;/inherited&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.glassfish.jersey&lt;/groupId&gt;\n                &lt;artifactId&gt;jersey-bom&lt;/artifactId&gt;\n                &lt;version&gt;${jersey.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\n            &lt;!-- use the following artifactId if you don't need servlet 2.x compatibility --&gt;\n            &lt;!-- artifactId&gt;jersey-container-servlet&lt;/artifactId --&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n       \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-media-json-binding&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n       \n    &lt;/dependencies&gt;\n    &lt;properties&gt;\n        &lt;jersey.version&gt;3.0.4&lt;/jersey.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","sockets","http"],"comments":[{"owner":{"account_id":1241587,"reputation":4869,"user_id":1204061,"accept_rate":62,"display_name":"elbuild"},"score":0,"creation_date":1387731041,"post_id":20731621,"comment_id":31061317,"body_markdown":"while ((bytesRead = is.read(buf)) != -1) .... how do you initialize is (the InputStream instance)? Please clarify your code.","body":"while ((bytesRead = is.read(buf)) != -1) .... how do you initialize is (the InputStream instance)? Please clarify your code."},{"owner":{"account_id":2371946,"reputation":1121,"user_id":2076365,"accept_rate":50,"display_name":"Ashish"},"score":0,"creation_date":1387731134,"post_id":20731621,"comment_id":31061347,"body_markdown":"where is int i=0; being used","body":"where is int i=0; being used"}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1387739999,"creation_date":1387739999,"answer_id":20733083,"question_id":20731621,"body_markdown":"This exception usually means that you have written to an connection that had already been loses by the peer. In other words, an application protocol error. There are other causes, but this is the most common.","title":"&quot;java.net.SocketException: Connection reset by peer: socket write error&quot; How can I solve it","body":"<p>This exception usually means that you have written to an connection that had already been loses by the peer. In other words, an application protocol error. There are other causes, but this is the most common.</p>\n"}],"owner":{"account_id":3763063,"reputation":1,"user_id":3127405,"display_name":"user3127405"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1646410555,"answer_count":1,"score":0,"last_activity_date":1646410492,"creation_date":1387730544,"question_id":20731621,"body_markdown":"I have a problem with my senior project. My objective is to read and modify HTTP response packet. I have a problem about `java.net.SocketException`. Could you help me, please?\r\nException at Responsethread\r\n\r\n```none\r\njava.net.SocketException: Connection reset by peer: socket write error\r\n\tat java.net.SocketOutputStream.socketWrite0(Native Method)\r\n\tat java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:113)\r\n\tat java.net.SocketOutputStream.write(SocketOutputStream.java:147)\r\n\tat helper.ResponseThread.run(ResponseThread.java:163)\r\nBUILD STOPPED (total time: 4 minutes 3 seconds)\r\n```\r\n\r\nHere is my code\r\n\r\nHelper.java\r\n\r\n```java\r\npackage helper;\r\n\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\nimport java.net.InetAddress;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\n\r\npublic class Helper {\r\n    public void proc() {\r\n        try {\r\n            \r\n            ServerSocket servsock = new ServerSocket(80);\r\n            String hostname=&quot;www.hungeng.besaba.com&quot;;\r\n            InetAddress ip=InetAddress.getByName(hostname);\r\n            //int serverPort=3456;\r\n            //Socket clientSocket =new Socket(ip,serverPort);\r\n           //String ipAddr=&quot;31.170.164.70&quot;; //http://hungeng.besaba.com/\r\n\r\n            while (true) {\r\n              \r\n                Socket sockC = servsock.accept();\r\n\r\n                //get input stream of the Socket(sockC) from Client \r\n                InputStream inC = sockC.getInputStream();\r\n                //get output stream of the Socket(sockC) to Client\r\n                OutputStream outC = sockC.getOutputStream();\r\n\r\n                //Connect to the specified server(ipAddr) at the 80 port. \r\n                Socket sockS = new Socket(ip, 80);\r\n\r\n                //get input stream of the Socket(sockS) from server(ipAddr)\r\n                InputStream inS = sockS.getInputStream();\r\n                //get output stream of the Socket(sockS) to server(ipAddr)\r\n                OutputStream outS = sockS.getOutputStream();\r\n\r\n                //Create Thread for sending The Request Message from Client \r\n                RequestThread request = new RequestThread();\r\n                //Create Thread for sending The Response Message to Client\r\n                ResponseThread response = new ResponseThread();\r\n\r\n                // match a Request Thread with a Response Thread\r\n                request.server = response;\r\n                response.client = request;\r\n                request.is = inC;\r\n                request.os = outC;\r\n                response.is = inS;\r\n                response.os = outS;\r\n                \r\n                request.start();\r\n                response.start();\r\n            }\r\n        } catch (Exception x) {\r\n            x.printStackTrace();\r\n        }\r\n\r\n    }\r\n    public static void main(String[] args) {\r\n        // TODO code application logic here\r\n         new Helper().proc();\r\n    }\r\n}\r\n```\r\n\r\nRequestThread.java\r\n\r\n```java\r\npackage helper;\r\n\r\nimport java.io.FileOutputStream;\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\n\r\npublic class RequestThread extends Thread {\r\n    InputStream is;\r\n    OutputStream os;\r\n    ResponseThread server;\r\n    byte[] buf = new byte[1024];\r\n    int bytesRead;\r\n\r\n    public void run() {\r\n        try {\r\n           int i=0;\r\n           \r\n           while ((bytesRead = is.read(buf)) !=-1) {\r\n               server.os.write(buf,0,bytesRead);\r\n               server.os.flush();\r\n            }\r\n         \r\n        } catch (Exception x) {\r\n            x.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nResponseThread.java\r\n\r\n```java\r\npackage helper;\r\n\r\nimport java.io.FileOutputStream;\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\n\r\npublic class ResponseThread extends Thread {\r\n    int num;\r\n    String content = &quot;&quot;;\r\n    InputStream is;\r\n    OutputStream os;\r\n    RequestThread client;\r\n    byte[] buf = new byte[20000];\r\n    int bytesRead = 0;\r\n    String endMark = &quot;\\r\\n\\r\\n&quot;;\r\n\r\n    public void run() {\r\n        try {\r\n            String msg = &quot;&quot;;\r\n\r\n            while ((bytesRead = is.read(buf)) != -1) {\r\n\r\n                msg += new String(buf, 0, bytesRead);\r\n              //  System.out.println(&quot;message&quot;);\r\n                //System.out.println(msg);\r\n               // System.out.println(&quot;---------&quot;);\r\n                //client.os.write(buf, 0, bytesRead);\r\n                int eHeader = msg.indexOf(&quot;\\r\\n\\r\\n&quot;);\r\n                String header = msg.substring(0, eHeader + &quot;\\r\\n\\r\\n&quot;.length());\r\n\r\n                // System.out.println(&quot;header&quot;);\r\n                //System.out.println(header);\r\n                //System.out.println(&quot;-----------&quot;);\r\n                int sConLength = header.indexOf(&quot;Content-Length: &quot;);\r\n                if (sConLength != -1) {\r\n                    //have content length  \r\n                    String temp = header.substring(sConLength);\r\n                    int eConLength = temp.indexOf(&quot;\\r\\n&quot;);\r\n                    int cl = Integer.parseInt(temp.substring(&quot;Content-Length: &quot;.length(), eConLength));\r\n                    String uConlen = header.substring(0, sConLength + &quot;Content-Length: &quot;.length());\r\n                    System.out.println(&quot;uconlen &quot;);\r\n                    System.out.println(uConlen);\r\n                    System.out.println(&quot;--------&quot;);\r\n\r\n                    String lConlen = temp.substring(eConLength + &quot;\\r\\n&quot;.length());\r\n                    System.out.println(&quot;lconlen &quot;);\r\n                    System.out.println(lConlen);\r\n                    System.out.println(&quot;-----------------&quot;);\r\n                    int sHtml = msg.toLowerCase().indexOf(&quot;&lt;html&gt;&quot;);\r\n                    int eHtml = msg.toLowerCase().indexOf(&quot;&lt;/html&gt;&quot;);\r\n                    if ((sHtml != -1) &amp;&amp; (eHtml != -1)) {\r\n                        //has Html content\r\n                        System.out.println(&quot;:::Have Html content:::&quot;);\r\n                        int sForm = msg.toLowerCase().indexOf(&quot;&lt;form&quot;);\r\n                        int eForm = msg.toLowerCase().indexOf(&quot;&lt;/form&gt;&quot;);\r\n                        if ((sForm != -1) &amp;&amp; (eForm != -1)) {\r\n                            //have form\r\n                            System.out.println(&quot;:::Have form:::&quot;);\r\n                            String form = msg.substring(sForm, eForm + &quot;&lt;/form&gt;&quot;.length());\r\n                            String uForm = msg.substring(eHeader + &quot;\\r\\n\\r\\n&quot;.length(), sForm);\r\n                            String lForm = msg.substring(eForm + &quot;&lt;/form&gt;&quot;.length());\r\n                            String p = &quot;&lt;p id=\\&quot;demo\\&quot;&gt;&lt;/p&gt;&quot;;\r\n                            String bt = &quot;&lt;button type=\\&quot;button\\&quot; onclick=\\&quot;fill_in(name)\\&quot;&gt;Fill In&lt;/button&gt;\\n&quot;;\r\n                            String[] data = {&quot;Natta santawalim&quot;, &quot;110033333333&quot;, &quot;adressssss&quot;};\r\n                            String sc = &quot;&lt;script&gt;\\n &quot;;\r\n                            sc += &quot;function fill_in(name) \\n&quot;;\r\n                            sc += &quot;{\\n&quot;;\r\n                            sc += &quot;document.getElementById(\\&quot;txtUsername\\&quot;).value=\\&#39;&quot;;\r\n                            sc += data[0];\r\n                            sc += &quot;\\&#39;; \\n&quot;;\r\n                            sc += &quot;document.getElementById(\\&quot;txtPassword\\&quot;).value=\\&#39;&quot;;\r\n                            sc += data[1];\r\n                            sc += &quot;\\&#39;; \\n&quot;;\r\n                            sc += &quot;document.getElementById(\\&quot;txtName\\&quot;).value=\\&#39;&quot;;\r\n                            sc += data[2];\r\n                            sc += &quot;\\&#39;; \\n&quot;;\r\n                            sc += &quot;}\\n&quot;;\r\n                            sc += &quot;&lt;/script&gt;\\n&quot;;\r\n\r\n                            // client.os.write(result.getBytes());\r\n                            cl += bt.length() + p.length() + sc.length();\r\n                            client.os.write(uConlen.getBytes());\r\n                            String l = Integer.toString(cl) + &quot;\\r\\n&quot;;\r\n                            client.os.write(l.getBytes());\r\n                            client.os.write(lConlen.getBytes());\r\n                            client.os.write(uForm.getBytes());\r\n                            client.os.write(form.getBytes());\r\n                            client.os.write(bt.getBytes());\r\n                            client.os.write(sc.getBytes());\r\n                            client.os.write(p.getBytes());\r\n                            client.os.write(lForm.getBytes());\r\n\r\n                            //                       System.out.println(&quot;byte &quot;+);\r\n                            //System.out.println(&quot;numofsent byr&quot;+s);\r\n                        } else {\r\n                            //don&#39;t have form\r\n                            System.out.println(&quot;:::Dont Have form:::&quot;);\r\n                            //client.os.write(buf, 0, bytesRead);\r\n                            String packet = msg.substring(eHeader + &quot;\\r\\n\\r\\n&quot;.length());\r\n                            client.os.write(header.getBytes());\r\n                            client.os.write(packet.getBytes());\r\n\r\n                            client.os.flush();\r\n                        }\r\n\r\n                    } else {\r\n                        // don&#39;t have Html content\r\n                        System.out.println(&quot;:::Dont Have Html content:::&quot;);\r\n                        client.os.write(buf, 0, bytesRead);\r\n                        //client.os.flush();\r\n                        //  num+=bytesRead;\r\n                        //System.out.println(&quot;num &quot;+num);\r\n                    }\r\n                } else {\r\n                    //don&#39;t have content length,transfer-encoding: chunk\r\n                    System.out.println(&quot;chunk&quot;);\r\n                    //client.os.write(buf, 0, bytesRead);\r\n                    // System.out.println(&quot;message&quot;);\r\n                    //System.out.println(msg);\r\n                    int fChunk = header.indexOf(&quot;Transfer-Encoding: chunked&quot;);\r\n                //    String m = msg.substring(eHeader + &quot;\\r\\n\\r\\n&quot;.length());\r\n                    if (fChunk != -1) {\r\n                        //chunk\r\n\r\n                        int sHtml = msg.toLowerCase().indexOf(&quot;&lt;html&gt;&quot;);\r\n                        int eHtml = msg.toLowerCase().indexOf(&quot;&lt;/html&gt;&quot;);\r\n                        if ((sHtml != -1) &amp;&amp; (eHtml != -1)) {\r\n                            //have html\r\n                            String packet = msg.substring(eHeader + &quot;\\r\\n\\r\\n&quot;.length());\r\n                            \r\n                            String[] chunkPt = packet.split(&quot;\\r\\n&quot;);\r\n                            //  System.out.println(&quot;=====chunk=========== &quot;);\r\n                            \r\n                            client.os.write(header.getBytes());\r\n                            for (int i = 0; i &lt; (chunkPt.length - 1); i++) {\r\n                            \r\n                              int fForm=chunkPt[i].toLowerCase().indexOf(&quot;&lt;/form&gt;&quot;);\r\n                              if(fForm!=-1){\r\n                                   String bt = &quot;&lt;button type=\\&quot;button\\&quot; onclick=\\&quot;fill_in(name)\\&quot;&gt;Fill In&lt;/button&gt;\\n&quot;;\r\n                                   int btSizeDec=bt.length();\r\n                                   int cSizeDec=Integer.parseInt(chunkPt[i-1],16);\r\n                                   int totalSizeDec=btSizeDec+cSizeDec;\r\n                                   String totalSizeHex=Integer.toHexString(totalSizeDec);\r\n                                   String h=chunkPt[i].substring(0,fForm);\r\n                                   String t=chunkPt[i].substring(fForm);\r\n                                   chunkPt[i]=h+bt+t;\r\n                                   chunkPt[i-1]=totalSizeHex;\r\n                                   System.out.println(&quot;chunkEmbedded&quot;);\r\n                                   System.out.println(chunkPt[i]);\r\n                                   \r\n                 \r\n                              }\r\n                                client.os.write((chunkPt[i]+&quot;\\r\\n&quot;).getBytes());//Error occured here\r\n                             \r\n\r\n                            }\r\n                            client.os.write((chunkPt[chunkPt.length - 1] + &quot;\\r\\n\\r\\n&quot;).getBytes());\r\n                            \r\n                        } else {\r\n                            System.out.println(&quot;dont hav html&quot;);\r\n                            //dont have html\r\n                        }\r\n\r\n                    } else {\r\n                        //dont chunk\r\n                        System.out.println(&quot;dont chunk&quot;);\r\n                    }\r\n                }\r\n\r\n            }\r\n            client.os.flush();\r\n        } catch (Exception x) {\r\n            x.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"&quot;java.net.SocketException: Connection reset by peer: socket write error&quot; How can I solve it","body":"<p>I have a problem with my senior project. My objective is to read and modify HTTP response packet. I have a problem about <code>java.net.SocketException</code>. Could you help me, please?\nException at Responsethread</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.net.SocketException: Connection reset by peer: socket write error\n    at java.net.SocketOutputStream.socketWrite0(Native Method)\n    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:113)\n    at java.net.SocketOutputStream.write(SocketOutputStream.java:147)\n    at helper.ResponseThread.run(ResponseThread.java:163)\nBUILD STOPPED (total time: 4 minutes 3 seconds)\n</code></pre>\n<p>Here is my code</p>\n<p>Helper.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package helper;\n\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.InetAddress;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class Helper {\n    public void proc() {\n        try {\n            \n            ServerSocket servsock = new ServerSocket(80);\n            String hostname=&quot;www.hungeng.besaba.com&quot;;\n            InetAddress ip=InetAddress.getByName(hostname);\n            //int serverPort=3456;\n            //Socket clientSocket =new Socket(ip,serverPort);\n           //String ipAddr=&quot;31.170.164.70&quot;; //http://hungeng.besaba.com/\n\n            while (true) {\n              \n                Socket sockC = servsock.accept();\n\n                //get input stream of the Socket(sockC) from Client \n                InputStream inC = sockC.getInputStream();\n                //get output stream of the Socket(sockC) to Client\n                OutputStream outC = sockC.getOutputStream();\n\n                //Connect to the specified server(ipAddr) at the 80 port. \n                Socket sockS = new Socket(ip, 80);\n\n                //get input stream of the Socket(sockS) from server(ipAddr)\n                InputStream inS = sockS.getInputStream();\n                //get output stream of the Socket(sockS) to server(ipAddr)\n                OutputStream outS = sockS.getOutputStream();\n\n                //Create Thread for sending The Request Message from Client \n                RequestThread request = new RequestThread();\n                //Create Thread for sending The Response Message to Client\n                ResponseThread response = new ResponseThread();\n\n                // match a Request Thread with a Response Thread\n                request.server = response;\n                response.client = request;\n                request.is = inC;\n                request.os = outC;\n                response.is = inS;\n                response.os = outS;\n                \n                request.start();\n                response.start();\n            }\n        } catch (Exception x) {\n            x.printStackTrace();\n        }\n\n    }\n    public static void main(String[] args) {\n        // TODO code application logic here\n         new Helper().proc();\n    }\n}\n</code></pre>\n<p>RequestThread.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package helper;\n\nimport java.io.FileOutputStream;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\npublic class RequestThread extends Thread {\n    InputStream is;\n    OutputStream os;\n    ResponseThread server;\n    byte[] buf = new byte[1024];\n    int bytesRead;\n\n    public void run() {\n        try {\n           int i=0;\n           \n           while ((bytesRead = is.read(buf)) !=-1) {\n               server.os.write(buf,0,bytesRead);\n               server.os.flush();\n            }\n         \n        } catch (Exception x) {\n            x.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>ResponseThread.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package helper;\n\nimport java.io.FileOutputStream;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\npublic class ResponseThread extends Thread {\n    int num;\n    String content = &quot;&quot;;\n    InputStream is;\n    OutputStream os;\n    RequestThread client;\n    byte[] buf = new byte[20000];\n    int bytesRead = 0;\n    String endMark = &quot;\\r\\n\\r\\n&quot;;\n\n    public void run() {\n        try {\n            String msg = &quot;&quot;;\n\n            while ((bytesRead = is.read(buf)) != -1) {\n\n                msg += new String(buf, 0, bytesRead);\n              //  System.out.println(&quot;message&quot;);\n                //System.out.println(msg);\n               // System.out.println(&quot;---------&quot;);\n                //client.os.write(buf, 0, bytesRead);\n                int eHeader = msg.indexOf(&quot;\\r\\n\\r\\n&quot;);\n                String header = msg.substring(0, eHeader + &quot;\\r\\n\\r\\n&quot;.length());\n\n                // System.out.println(&quot;header&quot;);\n                //System.out.println(header);\n                //System.out.println(&quot;-----------&quot;);\n                int sConLength = header.indexOf(&quot;Content-Length: &quot;);\n                if (sConLength != -1) {\n                    //have content length  \n                    String temp = header.substring(sConLength);\n                    int eConLength = temp.indexOf(&quot;\\r\\n&quot;);\n                    int cl = Integer.parseInt(temp.substring(&quot;Content-Length: &quot;.length(), eConLength));\n                    String uConlen = header.substring(0, sConLength + &quot;Content-Length: &quot;.length());\n                    System.out.println(&quot;uconlen &quot;);\n                    System.out.println(uConlen);\n                    System.out.println(&quot;--------&quot;);\n\n                    String lConlen = temp.substring(eConLength + &quot;\\r\\n&quot;.length());\n                    System.out.println(&quot;lconlen &quot;);\n                    System.out.println(lConlen);\n                    System.out.println(&quot;-----------------&quot;);\n                    int sHtml = msg.toLowerCase().indexOf(&quot;&lt;html&gt;&quot;);\n                    int eHtml = msg.toLowerCase().indexOf(&quot;&lt;/html&gt;&quot;);\n                    if ((sHtml != -1) &amp;&amp; (eHtml != -1)) {\n                        //has Html content\n                        System.out.println(&quot;:::Have Html content:::&quot;);\n                        int sForm = msg.toLowerCase().indexOf(&quot;&lt;form&quot;);\n                        int eForm = msg.toLowerCase().indexOf(&quot;&lt;/form&gt;&quot;);\n                        if ((sForm != -1) &amp;&amp; (eForm != -1)) {\n                            //have form\n                            System.out.println(&quot;:::Have form:::&quot;);\n                            String form = msg.substring(sForm, eForm + &quot;&lt;/form&gt;&quot;.length());\n                            String uForm = msg.substring(eHeader + &quot;\\r\\n\\r\\n&quot;.length(), sForm);\n                            String lForm = msg.substring(eForm + &quot;&lt;/form&gt;&quot;.length());\n                            String p = &quot;&lt;p id=\\&quot;demo\\&quot;&gt;&lt;/p&gt;&quot;;\n                            String bt = &quot;&lt;button type=\\&quot;button\\&quot; onclick=\\&quot;fill_in(name)\\&quot;&gt;Fill In&lt;/button&gt;\\n&quot;;\n                            String[] data = {&quot;Natta santawalim&quot;, &quot;110033333333&quot;, &quot;adressssss&quot;};\n                            String sc = &quot;&lt;script&gt;\\n &quot;;\n                            sc += &quot;function fill_in(name) \\n&quot;;\n                            sc += &quot;{\\n&quot;;\n                            sc += &quot;document.getElementById(\\&quot;txtUsername\\&quot;).value=\\'&quot;;\n                            sc += data[0];\n                            sc += &quot;\\'; \\n&quot;;\n                            sc += &quot;document.getElementById(\\&quot;txtPassword\\&quot;).value=\\'&quot;;\n                            sc += data[1];\n                            sc += &quot;\\'; \\n&quot;;\n                            sc += &quot;document.getElementById(\\&quot;txtName\\&quot;).value=\\'&quot;;\n                            sc += data[2];\n                            sc += &quot;\\'; \\n&quot;;\n                            sc += &quot;}\\n&quot;;\n                            sc += &quot;&lt;/script&gt;\\n&quot;;\n\n                            // client.os.write(result.getBytes());\n                            cl += bt.length() + p.length() + sc.length();\n                            client.os.write(uConlen.getBytes());\n                            String l = Integer.toString(cl) + &quot;\\r\\n&quot;;\n                            client.os.write(l.getBytes());\n                            client.os.write(lConlen.getBytes());\n                            client.os.write(uForm.getBytes());\n                            client.os.write(form.getBytes());\n                            client.os.write(bt.getBytes());\n                            client.os.write(sc.getBytes());\n                            client.os.write(p.getBytes());\n                            client.os.write(lForm.getBytes());\n\n                            //                       System.out.println(&quot;byte &quot;+);\n                            //System.out.println(&quot;numofsent byr&quot;+s);\n                        } else {\n                            //don't have form\n                            System.out.println(&quot;:::Dont Have form:::&quot;);\n                            //client.os.write(buf, 0, bytesRead);\n                            String packet = msg.substring(eHeader + &quot;\\r\\n\\r\\n&quot;.length());\n                            client.os.write(header.getBytes());\n                            client.os.write(packet.getBytes());\n\n                            client.os.flush();\n                        }\n\n                    } else {\n                        // don't have Html content\n                        System.out.println(&quot;:::Dont Have Html content:::&quot;);\n                        client.os.write(buf, 0, bytesRead);\n                        //client.os.flush();\n                        //  num+=bytesRead;\n                        //System.out.println(&quot;num &quot;+num);\n                    }\n                } else {\n                    //don't have content length,transfer-encoding: chunk\n                    System.out.println(&quot;chunk&quot;);\n                    //client.os.write(buf, 0, bytesRead);\n                    // System.out.println(&quot;message&quot;);\n                    //System.out.println(msg);\n                    int fChunk = header.indexOf(&quot;Transfer-Encoding: chunked&quot;);\n                //    String m = msg.substring(eHeader + &quot;\\r\\n\\r\\n&quot;.length());\n                    if (fChunk != -1) {\n                        //chunk\n\n                        int sHtml = msg.toLowerCase().indexOf(&quot;&lt;html&gt;&quot;);\n                        int eHtml = msg.toLowerCase().indexOf(&quot;&lt;/html&gt;&quot;);\n                        if ((sHtml != -1) &amp;&amp; (eHtml != -1)) {\n                            //have html\n                            String packet = msg.substring(eHeader + &quot;\\r\\n\\r\\n&quot;.length());\n                            \n                            String[] chunkPt = packet.split(&quot;\\r\\n&quot;);\n                            //  System.out.println(&quot;=====chunk=========== &quot;);\n                            \n                            client.os.write(header.getBytes());\n                            for (int i = 0; i &lt; (chunkPt.length - 1); i++) {\n                            \n                              int fForm=chunkPt[i].toLowerCase().indexOf(&quot;&lt;/form&gt;&quot;);\n                              if(fForm!=-1){\n                                   String bt = &quot;&lt;button type=\\&quot;button\\&quot; onclick=\\&quot;fill_in(name)\\&quot;&gt;Fill In&lt;/button&gt;\\n&quot;;\n                                   int btSizeDec=bt.length();\n                                   int cSizeDec=Integer.parseInt(chunkPt[i-1],16);\n                                   int totalSizeDec=btSizeDec+cSizeDec;\n                                   String totalSizeHex=Integer.toHexString(totalSizeDec);\n                                   String h=chunkPt[i].substring(0,fForm);\n                                   String t=chunkPt[i].substring(fForm);\n                                   chunkPt[i]=h+bt+t;\n                                   chunkPt[i-1]=totalSizeHex;\n                                   System.out.println(&quot;chunkEmbedded&quot;);\n                                   System.out.println(chunkPt[i]);\n                                   \n                 \n                              }\n                                client.os.write((chunkPt[i]+&quot;\\r\\n&quot;).getBytes());//Error occured here\n                             \n\n                            }\n                            client.os.write((chunkPt[chunkPt.length - 1] + &quot;\\r\\n\\r\\n&quot;).getBytes());\n                            \n                        } else {\n                            System.out.println(&quot;dont hav html&quot;);\n                            //dont have html\n                        }\n\n                    } else {\n                        //dont chunk\n                        System.out.println(&quot;dont chunk&quot;);\n                    }\n                }\n\n            }\n            client.os.flush();\n        } catch (Exception x) {\n            x.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":16234564,"reputation":134,"user_id":11722310,"display_name":"RatzzFatzz"},"score":1,"creation_date":1646398231,"post_id":71351621,"comment_id":126119012,"body_markdown":"You are already doing the right thing with your `checked` array list. Save every node into a list and in the end the list represents the way it went and you can operate with it. In your example it would save `Apple -&gt; Strawberry`, `Strawberry -&gt; Melon`. How you print your path is up to you at that point","body":"You are already doing the right thing with your <code>checked</code> array list. Save every node into a list and in the end the list represents the way it went and you can operate with it. In your example it would save <code>Apple -&gt; Strawberry</code>, <code>Strawberry -&gt; Melon</code>. How you print your path is up to you at that point"}],"answers":[{"tags":[],"owner":{"account_id":24408886,"reputation":86,"user_id":18336654,"display_name":"Nagamura"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646401409,"creation_date":1646401409,"answer_id":71352331,"question_id":71351621,"body_markdown":"You can use many ways to do that.\r\nIn these cases I don&#39;t like to use recursion, but it&#39;s up to you.\r\nFor example you can just use the print statement in your loop to print `first` and `second` strings when the statement `if(first.equals(from))` returns `true`.\r\n\r\nHere is my version of the `testConnection` method using iteration:\r\n\r\n    public static boolean testConnection(String from, String to, List&lt;String&gt; checked) {\r\n        boolean flag = false;\r\n\r\n        for (String con : connections) {\r\n            String[] conSplit = con.split(&quot; -&gt; &quot;);\r\n\r\n            String first = conSplit[0];\r\n            String second = conSplit[1];\r\n\r\n            if (first.equals(from)) {\r\n                checked.add(first);\r\n                checked.add(second);\r\n                from = second;\r\n\r\n                if (second.equals(to)) {\r\n                    flag = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (flag) \r\n            System.out.println(checked);\r\n        return flag;\r\n    }","title":"Follow list path with recursion. [Java]","body":"<p>You can use many ways to do that.\nIn these cases I don't like to use recursion, but it's up to you.\nFor example you can just use the print statement in your loop to print <code>first</code> and <code>second</code> strings when the statement <code>if(first.equals(from))</code> returns <code>true</code>.</p>\n<p>Here is my version of the <code>testConnection</code> method using iteration:</p>\n<pre><code>public static boolean testConnection(String from, String to, List&lt;String&gt; checked) {\n    boolean flag = false;\n\n    for (String con : connections) {\n        String[] conSplit = con.split(&quot; -&gt; &quot;);\n\n        String first = conSplit[0];\n        String second = conSplit[1];\n\n        if (first.equals(from)) {\n            checked.add(first);\n            checked.add(second);\n            from = second;\n\n            if (second.equals(to)) {\n                flag = true;\n                break;\n            }\n        }\n    }\n    if (flag) \n        System.out.println(checked);\n    return flag;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9055663,"reputation":2527,"user_id":6744133,"display_name":"Oli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646410454,"creation_date":1646410454,"answer_id":71354176,"question_id":71351621,"body_markdown":"Looking at the checked list is not sufficient to construct the path, since it will only be the same as the path if no backtracking is used. For example, with the connections:\r\n```\r\nprivate static String[] connections = {\r\n        &quot;Strawberry -&gt; Apple&quot;,\r\n        &quot;Apple -&gt; Pineapple&quot;,\r\n        &quot;Apple -&gt; Strawberry&quot;,\r\n        &quot;Strawberry -&gt; Cherry&quot;,\r\n        &quot;Cherry -&gt; Apple&quot;,\r\n        &quot;Strawberry -&gt; Melon&quot;,\r\n        &quot;Melon -&gt; Strawberry&quot;,\r\n};\r\n```\r\nYou would end up checking `Apple`, `Pineapple`, `Strawberry`, `Cherry` then `Melon`, even though the path is `Apple`, `Strawberry`, `Melon`. A separate list is needed to find the path, e.g.:\r\n\r\n```\r\npublic static boolean testConnection(String from, String to, List&lt;String&gt; checked, Stack&lt;String&gt; path) {\r\n    checked.add(from);\r\n    path.add(from);\r\n    if (from.equals(to)) return true;\r\n\r\n    for (String con : connections) {\r\n        String[] conSplit = con.split(&quot; -&gt; &quot;);\r\n\r\n        String first = conSplit[0];\r\n        String second = conSplit[1];\r\n\r\n        if (first.equals(from)) {\r\n            if (second.equals(to)) {\r\n                path.add(second);\r\n                return true;\r\n            }\r\n\r\n            if (checked.contains(second)) continue;\r\n\r\n\r\n            if (testConnection(second, to, checked, path)) return true;\r\n        }\r\n    }\r\n    path.pop();\r\n    return false;\r\n}\r\n```\r\n\r\nThe key is that if all the connections are checked and no path is found, then the item is removed from the end of the path (`path.pop()`). This means that if a path is explored and then it is found that it doesn&#39;t lead to the destination, it won&#39;t affect the final path.\r\n\r\nThis algorithm is quite inefficient however, since every iteration it loops over every single connection. This can be fixed by building a graph data structure:\r\n```\r\nclass Node {\r\n    String name;\r\n    List&lt;Node&gt; nextNodes;\r\n\r\n    public Node(String name) {\r\n        this.name = name;\r\n        this.nextNodes = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n    public static Map&lt;String, Node&gt; fromConnections(String[] connections) {\r\n        Map&lt;String, Node&gt; nodes = new HashMap&lt;&gt;();\r\n        for (String con :\r\n                connections) {\r\n            String[] conSplit = con.split(&quot; -&gt; &quot;);\r\n\r\n            String first = conSplit[0];\r\n            String second = conSplit[1];\r\n\r\n            Node node = nodes.computeIfAbsent(first, Node::new);\r\n            node.nextNodes.add(nodes.computeIfAbsent(second, Node::new));\r\n        }\r\n        return nodes;\r\n    }\r\n}\r\n```\r\nThis only loops over the entire list once. Now finding the connections that lead from a node only involves looping over those connections, not the entire list. It also separates the parsing stage from the search stage. Lastly, when you are going to do many `checked.contains(second)` checks, it is more efficient to use a `HashSet` rather than a list. Checking if a list contains an element involves looping over the entire list, whereas checking if a hashset contains something takes the same amount of time regardless of the size of the hashset.\r\n\r\nHere is a running example of both versions of the algorithm:\r\n```\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n    static class Node {\r\n        String name;\r\n        List&lt;Node&gt; nextNodes;\r\n\r\n        public Node(String name) {\r\n            this.name = name;\r\n            this.nextNodes = new ArrayList&lt;&gt;();\r\n        }\r\n\r\n        public static Map&lt;String, Node&gt; fromConnections(String[] connections) {\r\n            Map&lt;String, Node&gt; nodes = new HashMap&lt;&gt;();\r\n            for (String con :\r\n                    connections) {\r\n                String[] conSplit = con.split(&quot; -&gt; &quot;);\r\n\r\n                String first = conSplit[0];\r\n                String second = conSplit[1];\r\n\r\n                Node node = nodes.computeIfAbsent(first, Node::new);\r\n                node.nextNodes.add(nodes.computeIfAbsent(second, Node::new));\r\n            }\r\n            return nodes;\r\n        }\r\n    }\r\n\r\n    private static String[] connections = {\r\n            &quot;Strawberry -&gt; Apple&quot;,\r\n            &quot;Apple -&gt; Pineapple&quot;,\r\n            &quot;Apple -&gt; Strawberry&quot;,\r\n            &quot;Strawberry -&gt; Cherry&quot;,\r\n            &quot;Cherry -&gt; Apple&quot;,\r\n            &quot;Strawberry -&gt; Melon&quot;,\r\n            &quot;Melon -&gt; Strawberry&quot;,\r\n    };\r\n\r\n    public static void main(String[] args) {\r\n        Stack&lt;String&gt; path = new Stack&lt;&gt;();\r\n        ArrayList&lt;String&gt; checked = new ArrayList&lt;&gt;();\r\n        System.out.println(testConnection(&quot;Apple&quot;, &quot;Melon&quot;, checked, path));\r\n        System.out.println(path);\r\n        System.out.printf(&quot;checked: %s\\n&quot;, checked);\r\n\r\n        Map&lt;String, Node&gt; graph = Node.fromConnections(connections);\r\n        path = new Stack&lt;&gt;();\r\n        System.out.println(testConnection(graph.get(&quot;Apple&quot;), graph.get(&quot;Melon&quot;), new HashSet&lt;&gt;(), path));\r\n        System.out.println(path);\r\n    }\r\n\r\n\r\n    public static boolean testConnection(String from, String to, List&lt;String&gt; checked, Stack&lt;String&gt; path) {\r\n        checked.add(from);\r\n        path.add(from);\r\n        if (from.equals(to)) return true;\r\n\r\n        for (String con : connections) {\r\n            String[] conSplit = con.split(&quot; -&gt; &quot;);\r\n\r\n            String first = conSplit[0];\r\n            String second = conSplit[1];\r\n\r\n            if (first.equals(from)) {\r\n                if (second.equals(to)) {\r\n                    path.add(second);\r\n                    return true;\r\n                }\r\n\r\n                if (checked.contains(second)) continue;\r\n\r\n\r\n                if (testConnection(second, to, checked, path)) return true;\r\n            }\r\n        }\r\n        path.pop();\r\n        return false;\r\n    }\r\n\r\n    public static boolean testConnection(Node from, Node to, Set&lt;Node&gt; checked, Stack&lt;String&gt; path) {\r\n        checked.add(from);\r\n        path.add(from.name);\r\n        if (from == to) return true;\r\n\r\n        for (Node next : from.nextNodes) {\r\n\r\n            if (checked.contains(next)) continue;\r\n\r\n\r\n            if (testConnection(next, to, checked, path)) return true;\r\n        }\r\n        path.pop();\r\n        return false;\r\n    }\r\n}\r\n```\r\n","title":"Follow list path with recursion. [Java]","body":"<p>Looking at the checked list is not sufficient to construct the path, since it will only be the same as the path if no backtracking is used. For example, with the connections:</p>\n<pre><code>private static String[] connections = {\n        &quot;Strawberry -&gt; Apple&quot;,\n        &quot;Apple -&gt; Pineapple&quot;,\n        &quot;Apple -&gt; Strawberry&quot;,\n        &quot;Strawberry -&gt; Cherry&quot;,\n        &quot;Cherry -&gt; Apple&quot;,\n        &quot;Strawberry -&gt; Melon&quot;,\n        &quot;Melon -&gt; Strawberry&quot;,\n};\n</code></pre>\n<p>You would end up checking <code>Apple</code>, <code>Pineapple</code>, <code>Strawberry</code>, <code>Cherry</code> then <code>Melon</code>, even though the path is <code>Apple</code>, <code>Strawberry</code>, <code>Melon</code>. A separate list is needed to find the path, e.g.:</p>\n<pre><code>public static boolean testConnection(String from, String to, List&lt;String&gt; checked, Stack&lt;String&gt; path) {\n    checked.add(from);\n    path.add(from);\n    if (from.equals(to)) return true;\n\n    for (String con : connections) {\n        String[] conSplit = con.split(&quot; -&gt; &quot;);\n\n        String first = conSplit[0];\n        String second = conSplit[1];\n\n        if (first.equals(from)) {\n            if (second.equals(to)) {\n                path.add(second);\n                return true;\n            }\n\n            if (checked.contains(second)) continue;\n\n\n            if (testConnection(second, to, checked, path)) return true;\n        }\n    }\n    path.pop();\n    return false;\n}\n</code></pre>\n<p>The key is that if all the connections are checked and no path is found, then the item is removed from the end of the path (<code>path.pop()</code>). This means that if a path is explored and then it is found that it doesn't lead to the destination, it won't affect the final path.</p>\n<p>This algorithm is quite inefficient however, since every iteration it loops over every single connection. This can be fixed by building a graph data structure:</p>\n<pre><code>class Node {\n    String name;\n    List&lt;Node&gt; nextNodes;\n\n    public Node(String name) {\n        this.name = name;\n        this.nextNodes = new ArrayList&lt;&gt;();\n    }\n\n    public static Map&lt;String, Node&gt; fromConnections(String[] connections) {\n        Map&lt;String, Node&gt; nodes = new HashMap&lt;&gt;();\n        for (String con :\n                connections) {\n            String[] conSplit = con.split(&quot; -&gt; &quot;);\n\n            String first = conSplit[0];\n            String second = conSplit[1];\n\n            Node node = nodes.computeIfAbsent(first, Node::new);\n            node.nextNodes.add(nodes.computeIfAbsent(second, Node::new));\n        }\n        return nodes;\n    }\n}\n</code></pre>\n<p>This only loops over the entire list once. Now finding the connections that lead from a node only involves looping over those connections, not the entire list. It also separates the parsing stage from the search stage. Lastly, when you are going to do many <code>checked.contains(second)</code> checks, it is more efficient to use a <code>HashSet</code> rather than a list. Checking if a list contains an element involves looping over the entire list, whereas checking if a hashset contains something takes the same amount of time regardless of the size of the hashset.</p>\n<p>Here is a running example of both versions of the algorithm:</p>\n<pre><code>import java.util.*;\n\npublic class Main {\n    static class Node {\n        String name;\n        List&lt;Node&gt; nextNodes;\n\n        public Node(String name) {\n            this.name = name;\n            this.nextNodes = new ArrayList&lt;&gt;();\n        }\n\n        public static Map&lt;String, Node&gt; fromConnections(String[] connections) {\n            Map&lt;String, Node&gt; nodes = new HashMap&lt;&gt;();\n            for (String con :\n                    connections) {\n                String[] conSplit = con.split(&quot; -&gt; &quot;);\n\n                String first = conSplit[0];\n                String second = conSplit[1];\n\n                Node node = nodes.computeIfAbsent(first, Node::new);\n                node.nextNodes.add(nodes.computeIfAbsent(second, Node::new));\n            }\n            return nodes;\n        }\n    }\n\n    private static String[] connections = {\n            &quot;Strawberry -&gt; Apple&quot;,\n            &quot;Apple -&gt; Pineapple&quot;,\n            &quot;Apple -&gt; Strawberry&quot;,\n            &quot;Strawberry -&gt; Cherry&quot;,\n            &quot;Cherry -&gt; Apple&quot;,\n            &quot;Strawberry -&gt; Melon&quot;,\n            &quot;Melon -&gt; Strawberry&quot;,\n    };\n\n    public static void main(String[] args) {\n        Stack&lt;String&gt; path = new Stack&lt;&gt;();\n        ArrayList&lt;String&gt; checked = new ArrayList&lt;&gt;();\n        System.out.println(testConnection(&quot;Apple&quot;, &quot;Melon&quot;, checked, path));\n        System.out.println(path);\n        System.out.printf(&quot;checked: %s\\n&quot;, checked);\n\n        Map&lt;String, Node&gt; graph = Node.fromConnections(connections);\n        path = new Stack&lt;&gt;();\n        System.out.println(testConnection(graph.get(&quot;Apple&quot;), graph.get(&quot;Melon&quot;), new HashSet&lt;&gt;(), path));\n        System.out.println(path);\n    }\n\n\n    public static boolean testConnection(String from, String to, List&lt;String&gt; checked, Stack&lt;String&gt; path) {\n        checked.add(from);\n        path.add(from);\n        if (from.equals(to)) return true;\n\n        for (String con : connections) {\n            String[] conSplit = con.split(&quot; -&gt; &quot;);\n\n            String first = conSplit[0];\n            String second = conSplit[1];\n\n            if (first.equals(from)) {\n                if (second.equals(to)) {\n                    path.add(second);\n                    return true;\n                }\n\n                if (checked.contains(second)) continue;\n\n\n                if (testConnection(second, to, checked, path)) return true;\n            }\n        }\n        path.pop();\n        return false;\n    }\n\n    public static boolean testConnection(Node from, Node to, Set&lt;Node&gt; checked, Stack&lt;String&gt; path) {\n        checked.add(from);\n        path.add(from.name);\n        if (from == to) return true;\n\n        for (Node next : from.nextNodes) {\n\n            if (checked.contains(next)) continue;\n\n\n            if (testConnection(next, to, checked, path)) return true;\n        }\n        path.pop();\n        return false;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17544078,"reputation":3,"user_id":12725736,"display_name":"jarnoboy404"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71352331,"answer_count":2,"score":0,"last_activity_date":1646410454,"creation_date":1646397924,"question_id":71351621,"body_markdown":"Hello i have a list with different connections. I want a function that allows me to give a start and end value. The function needs to figure out if there is a path. And if there&#39;s a path, it needs to be returned. I already created a working program. But the only thing is that i only get if there is a path yes or no. But i want to get the path.\r\n\r\n```java\r\n    private static String[] connections = {\r\n            &quot;Strawberry -&gt; Apple&quot;,\r\n            &quot;Apple -&gt; Strawberry&quot;,\r\n            &quot;Strawberry -&gt; Melon&quot;,\r\n            &quot;Melon -&gt; Strawberry&quot;\r\n    };\r\n\r\n    public static void main(String[] args)  {\r\n        System.out.println(testConnection(&quot;Apple&quot;, &quot;Melon&quot;, new ArrayList&lt;&gt;()));\r\n    }\r\n\r\n    public static boolean testConnection(String from, String to, List&lt;String&gt; checked) {\r\n        if(from.equals(to)) return true;\r\n\r\n        for(String con : connections) {\r\n            String[] conSplit = con.split(&quot; -&gt; &quot;);\r\n\r\n            String first = conSplit[0];\r\n            String second = conSplit[1];\r\n\r\n            if(first.equals(from)) {\r\n                if(second.equals(to)) return true;\r\n\r\n                if(checked.contains(second)) continue;\r\n                checked.add(first);\r\n\r\n                if(testConnection(second, to, checked)) return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n```\r\nAs you see Apple goes to Strawberry, Strawberry goes to Melon.\r\nAnd in my testConnection I said that i need to get the path from Apple to Melon.\r\n","title":"Follow list path with recursion. [Java]","body":"<p>Hello i have a list with different connections. I want a function that allows me to give a start and end value. The function needs to figure out if there is a path. And if there's a path, it needs to be returned. I already created a working program. But the only thing is that i only get if there is a path yes or no. But i want to get the path.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static String[] connections = {\n            &quot;Strawberry -&gt; Apple&quot;,\n            &quot;Apple -&gt; Strawberry&quot;,\n            &quot;Strawberry -&gt; Melon&quot;,\n            &quot;Melon -&gt; Strawberry&quot;\n    };\n\n    public static void main(String[] args)  {\n        System.out.println(testConnection(&quot;Apple&quot;, &quot;Melon&quot;, new ArrayList&lt;&gt;()));\n    }\n\n    public static boolean testConnection(String from, String to, List&lt;String&gt; checked) {\n        if(from.equals(to)) return true;\n\n        for(String con : connections) {\n            String[] conSplit = con.split(&quot; -&gt; &quot;);\n\n            String first = conSplit[0];\n            String second = conSplit[1];\n\n            if(first.equals(from)) {\n                if(second.equals(to)) return true;\n\n                if(checked.contains(second)) continue;\n                checked.add(first);\n\n                if(testConnection(second, to, checked)) return true;\n            }\n        }\n        return false;\n    }\n</code></pre>\n<p>As you see Apple goes to Strawberry, Strawberry goes to Melon.\nAnd in my testConnection I said that i need to get the path from Apple to Melon.</p>\n"},{"tags":["java","ssl","apache-httpclient-4.x","apache-httpclient-5.x"],"answers":[{"tags":[],"owner":{"account_id":24430599,"reputation":91,"user_id":18356893,"display_name":"Ernesto L&#243;pez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646402375,"creation_date":1646402375,"answer_id":71352517,"question_id":71352172,"body_markdown":"I used the solution mentioned in this post:\r\n\r\nhttps://stackoverflow.com/questions/7443235/getting-java-to-accept-all-certs-over-https\r\n\r\nThere, you build a custom TrustManager and HostNameVerifier to accept any certificate and domain:\r\n\r\nCustom implementation of HostNameVerifier:\r\n\r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.SSLSession;\r\n    \r\n    public class TrustAllHostNameVerifier implements HostnameVerifier {\r\n    \r\n        public boolean verify(String hostname, SSLSession session) {\r\n            return true;\r\n        }\r\n    }\r\n\r\nHttps connection creation:\r\n\r\n\t// Create a trust manager that does not validate certificate chains\r\n\tTrustManager[] trustAllCerts = new TrustManager[]{\r\n\t\tnew X509TrustManager() {\r\n\t\t\tpublic java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tpublic void checkClientTrusted(\r\n\t\t\t\tjava.security.cert.X509Certificate[] certs, String authType) {\r\n\t\t\t}\r\n\t\t\tpublic void checkServerTrusted(\r\n\t\t\t\tjava.security.cert.X509Certificate[] certs, String authType) {\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Install the all-trusting trust manager\r\n\ttry {\r\n\t\tSSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n\t\tsc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n\t\tHttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n\t\tHttpsURLConnection.setHostnameVerifier(new TrustAllHostNameVerifier())\r\n\t} catch (Exception e) {\r\n\t  :\r\n\t  :\r\n\t}\r\n\r\nAlthough you clarified that it&#39;s for testing purposes, it&#39;s important to remember that this is an extremely insecure solution where you lose all the protection given by the use of SSL.\r\n","title":"Apache HTTP Client SSL how acccept all certificates for testing purposes","body":"<p>I used the solution mentioned in this post:</p>\n<p><a href=\"https://stackoverflow.com/questions/7443235/getting-java-to-accept-all-certs-over-https\">Getting Java to accept all certs over HTTPS</a></p>\n<p>There, you build a custom TrustManager and HostNameVerifier to accept any certificate and domain:</p>\n<p>Custom implementation of HostNameVerifier:</p>\n<pre><code>import javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.SSLSession;\n\npublic class TrustAllHostNameVerifier implements HostnameVerifier {\n\n    public boolean verify(String hostname, SSLSession session) {\n        return true;\n    }\n}\n</code></pre>\n<p>Https connection creation:</p>\n<pre><code>// Create a trust manager that does not validate certificate chains\nTrustManager[] trustAllCerts = new TrustManager[]{\n    new X509TrustManager() {\n        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n            return null;\n        }\n        public void checkClientTrusted(\n            java.security.cert.X509Certificate[] certs, String authType) {\n        }\n        public void checkServerTrusted(\n            java.security.cert.X509Certificate[] certs, String authType) {\n        }\n    }\n};\n\n// Install the all-trusting trust manager\ntry {\n    SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\n    sc.init(null, trustAllCerts, new java.security.SecureRandom());\n    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n    HttpsURLConnection.setHostnameVerifier(new TrustAllHostNameVerifier())\n} catch (Exception e) {\n  :\n  :\n}\n</code></pre>\n<p>Although you clarified that it's for testing purposes, it's important to remember that this is an extremely insecure solution where you lose all the protection given by the use of SSL.</p>\n"},{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646402539,"creation_date":1646402539,"answer_id":71352551,"question_id":71352172,"body_markdown":"You can do the following if using **HttpClient 4.4** or above (the example was taken from the reference below):\r\n\r\n    TrustStrategy acceptingTrustStrategy = (cert, authType) -&gt; true;\r\n        SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, acceptingTrustStrategy).build();\r\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext, \r\n          NoopHostnameVerifier.INSTANCE);\r\n        \r\n        Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = \r\n          RegistryBuilder.&lt;ConnectionSocketFactory&gt; create()\r\n          .register(&quot;https&quot;, sslsf)\r\n          .register(&quot;http&quot;, new PlainConnectionSocketFactory())\r\n          .build();\r\n    \r\n        BasicHttpClientConnectionManager connectionManager = \r\n          new BasicHttpClientConnectionManager(socketFactoryRegistry);\r\n        CloseableHttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslsf)\r\n          .setConnectionManager(connectionManager).build();\r\n\r\nMore details here: https://www.baeldung.com/httpclient-ssl","title":"Apache HTTP Client SSL how acccept all certificates for testing purposes","body":"<p>You can do the following if using <strong>HttpClient 4.4</strong> or above (the example was taken from the reference below):</p>\n<pre><code>TrustStrategy acceptingTrustStrategy = (cert, authType) -&gt; true;\n    SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, acceptingTrustStrategy).build();\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext, \n      NoopHostnameVerifier.INSTANCE);\n    \n    Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = \n      RegistryBuilder.&lt;ConnectionSocketFactory&gt; create()\n      .register(&quot;https&quot;, sslsf)\n      .register(&quot;http&quot;, new PlainConnectionSocketFactory())\n      .build();\n\n    BasicHttpClientConnectionManager connectionManager = \n      new BasicHttpClientConnectionManager(socketFactoryRegistry);\n    CloseableHttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslsf)\n      .setConnectionManager(connectionManager).build();\n</code></pre>\n<p>More details here: <a href=\"https://www.baeldung.com/httpclient-ssl\" rel=\"nofollow noreferrer\">https://www.baeldung.com/httpclient-ssl</a></p>\n"}],"owner":{"account_id":14733658,"reputation":823,"user_id":10640283,"display_name":"Matt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3331,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1646410347,"creation_date":1646400677,"question_id":71352172,"body_markdown":"I have a java cucumber test automation framework that I am using for testing apis.\r\n\r\nPreviously I was using a tool called Karate that has a simple flag (  karate.configure(&#39;ssl&#39;, { trustAll: true });) that allows you to trust all certificates.\r\n\r\nI was hoping there would be a similar flag for use with Apache HTTP Client...but all my googling leads to long and complicated code.\r\n\r\nThis is the code I have written so far to send the .pfx file to the api \r\n```\r\n        String keyPassphrase = &quot;&quot;;\r\n\r\n        KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n        keyStore.load(new FileInputStream(&quot;src/main/resources/sslCertificates/certificate.pfx&quot;), keyPassphrase.toCharArray());\r\n\r\n        SSLContext sslContext = SSLContexts.custom()\r\n                .loadKeyMaterial(keyStore, null)\r\n                .build();\r\n\r\n\r\n        //This is the httpClient that you will use to send your http request\r\n        CloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\r\n\r\n        //Send the request\r\n        CloseableHttpResponse response = httpClient.execute(request);\r\n```\r\n\r\nbut it gets rejected before it is sent saying\r\n```\r\n &quot;javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target&quot;\r\n```\r\n\r\nHow can I easily accept all certificates to get around this problem? As stated I am just testing so there is no problem with doing this. \r\n\r\nHowever I do have certificate files in .pfx and .crt formats and a client.key file that could potentially be used - but I don&#39;t know how.\r\n","title":"Apache HTTP Client SSL how acccept all certificates for testing purposes","body":"<p>I have a java cucumber test automation framework that I am using for testing apis.</p>\n<p>Previously I was using a tool called Karate that has a simple flag (  karate.configure('ssl', { trustAll: true });) that allows you to trust all certificates.</p>\n<p>I was hoping there would be a similar flag for use with Apache HTTP Client...but all my googling leads to long and complicated code.</p>\n<p>This is the code I have written so far to send the .pfx file to the api</p>\n<pre><code>        String keyPassphrase = &quot;&quot;;\n\n        KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n        keyStore.load(new FileInputStream(&quot;src/main/resources/sslCertificates/certificate.pfx&quot;), keyPassphrase.toCharArray());\n\n        SSLContext sslContext = SSLContexts.custom()\n                .loadKeyMaterial(keyStore, null)\n                .build();\n\n\n        //This is the httpClient that you will use to send your http request\n        CloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\n\n        //Send the request\n        CloseableHttpResponse response = httpClient.execute(request);\n</code></pre>\n<p>but it gets rejected before it is sent saying</p>\n<pre><code> &quot;javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target&quot;\n</code></pre>\n<p>How can I easily accept all certificates to get around this problem? As stated I am just testing so there is no problem with doing this.</p>\n<p>However I do have certificate files in .pfx and .crt formats and a client.key file that could potentially be used - but I don't know how.</p>\n"},{"tags":["java","android","android-intent","android-activity"],"answers":[{"tags":[],"owner":{"account_id":5521804,"reputation":4899,"user_id":4384513,"display_name":"Masum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646410088,"creation_date":1646410088,"answer_id":71354099,"question_id":71354050,"body_markdown":"Parse your Uri by following this way\r\n\r\n    Cursor cursor = getContentResolver().query(uriSound, null, null, null, null);\r\n    int nameIndex = cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);\r\n    int sizeIndex = cursor.getColumnIndex(OpenableColumns.SIZE);\r\n    cursor.moveToFirst();\r\n\r\n    String fileName = cursor.getString(nameIndex);\r\n \r\n\r\n ","title":"How can I get a file name onActivityResult?","body":"<p>Parse your Uri by following this way</p>\n<pre><code>Cursor cursor = getContentResolver().query(uriSound, null, null, null, null);\nint nameIndex = cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);\nint sizeIndex = cursor.getColumnIndex(OpenableColumns.SIZE);\ncursor.moveToFirst();\n\nString fileName = cursor.getString(nameIndex);\n</code></pre>\n"}],"owner":{"account_id":23823403,"reputation":43,"user_id":17830797,"display_name":"Vitaliy Martynyuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1646410088,"creation_date":1646409850,"question_id":71354050,"body_markdown":"I want to take a file name from onActivityResult\r\n\r\nIt is startActivity:\r\n\r\n    Intent intent = new Intent(Intent.ACTION_PICK, \r\n    android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);\r\n                startActivityForResult(intent, 10);\r\n\r\nIt is onActivityResult:\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if(resultCode == RESULT_OK &amp;&amp; requestCode == 10){\r\n            Uri uriSound = data.getData();\r\n            // Here I want to get file name String\r\n        }\r\n    }","title":"How can I get a file name onActivityResult?","body":"<p>I want to take a file name from onActivityResult</p>\n<p>It is startActivity:</p>\n<pre><code>Intent intent = new Intent(Intent.ACTION_PICK, \nandroid.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);\n            startActivityForResult(intent, 10);\n</code></pre>\n<p>It is onActivityResult:</p>\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if(resultCode == RESULT_OK &amp;&amp; requestCode == 10){\n        Uri uriSound = data.getData();\n        // Here I want to get file name String\n    }\n}\n</code></pre>\n"},{"tags":["java","security","hash","passwords","sha512"],"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":2,"creation_date":1444666157,"post_id":33085493,"comment_id":53987531,"body_markdown":"SHA2 is not an encryption technique either. It is a family of cryptographical secure hash functions, it can be used for message digest, not encryption (at least no in normal mode). You need to describe a bit more what you want to do. Other than that yur MD5 code should work with other hash algrithms as well, just exchange the algorithm name. The output of all of them is a binary byte[] array, so you might want to use base64 or binhex to make the result ascii only.","body":"SHA2 is not an encryption technique either. It is a family of cryptographical secure hash functions, it can be used for message digest, not encryption (at least no in normal mode). You need to describe a bit more what you want to do. Other than that yur MD5 code should work with other hash algrithms as well, just exchange the algorithm name. The output of all of them is a binary byte[] array, so you might want to use base64 or binhex to make the result ascii only."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":3,"creation_date":1444666176,"post_id":33085493,"comment_id":53987539,"body_markdown":"SHA-512 is not an encryption algorithm either. Actually, it&#39;s designed specifically to make it impossible to &quot;decrypt&quot; the digest produced by this hashing algorithm. What do you want to achieve?","body":"SHA-512 is not an encryption algorithm either. Actually, it&#39;s designed specifically to make it impossible to &quot;decrypt&quot; the digest produced by this hashing algorithm. What do you want to achieve?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1444666266,"post_id":33085493,"comment_id":53987593,"body_markdown":"A java String contains valid Unicode. Getting the bytes in some charset (like UTF-8) and then encrypting them yields bytes that cannot be correctly translated to a String (for decrypting), certainly not with UTF-8 which requires correct sequences. Hence often Base64 is added to translate encrypted bytes into ASCII.","body":"A java String contains valid Unicode. Getting the bytes in some charset (like UTF-8) and then encrypting them yields bytes that cannot be correctly translated to a String (for decrypting), certainly not with UTF-8 which requires correct sequences. Hence often Base64 is added to translate encrypted bytes into ASCII."},{"owner":{"account_id":5220844,"reputation":2333,"user_id":4240291,"accept_rate":55,"display_name":"stack man"},"score":0,"creation_date":1444666385,"post_id":33085493,"comment_id":53987660,"body_markdown":"@JBNizet question updated with the goal I am trying to achieve. Thank you all for trying to help guys.","body":"@JBNizet question updated with the goal I am trying to achieve. Thank you all for trying to help guys."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":3,"creation_date":1444666683,"post_id":33085493,"comment_id":53987812,"body_markdown":"There is no cryptographic algorithm that allows doing what you want. Either you want encryption (but you shouldn&#39;t if the goal is to store passwords), and you need a key to encrypt/decrypt. Or you want a salt and a digest function (and a hashing function is what you want, although SHA-512 is considered too weak for that usage). The principle of salt + digest is that you can check if a submitted password is correct by resalting and redigesting it, and then check that the result is identical to the one stored in database. But it&#39;s impossible to reverse the result and get the original password.","body":"There is no cryptographic algorithm that allows doing what you want. Either you want encryption (but you shouldn&#39;t if the goal is to store passwords), and you need a key to encrypt/decrypt. Or you want a salt and a digest function (and a hashing function is what you want, although SHA-512 is considered too weak for that usage). The principle of salt + digest is that you can check if a submitted password is correct by resalting and redigesting it, and then check that the result is identical to the one stored in database. But it&#39;s impossible to reverse the result and get the original password."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":3,"creation_date":1444666785,"post_id":33085493,"comment_id":53987876,"body_markdown":"Use PBKDF2WithHmacSHA1 (which comes with the JDK) or BCrypt. But first, learn the principles of crypto.","body":"Use PBKDF2WithHmacSHA1 (which comes with the JDK) or BCrypt. But first, learn the principles of crypto."},{"owner":{"account_id":2033317,"reputation":61286,"user_id":1816580,"display_name":"Artjom B."},"score":1,"creation_date":1444668551,"post_id":33085493,"comment_id":53988784,"body_markdown":"Possible duplicate of [How can I hash a password in Java?](http://stackoverflow.com/questions/2860943/how-can-i-hash-a-password-in-java)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/2860943/how-can-i-hash-a-password-in-java\">How can I hash a password in Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":6668758,"reputation":2676,"user_id":5145530,"accept_rate":54,"display_name":"A. Sinha"},"down_vote_count":8,"up_vote_count":88,"is_accepted":true,"score":80,"last_activity_date":1646410079,"creation_date":1444666403,"answer_id":33085670,"question_id":33085493,"body_markdown":"you can use this for SHA-512 (Not a good choice for password hashing).\r\n    \r\n    import java.nio.charset.StandardCharsets;\r\n    import java.security.MessageDigest;\r\n    import java.security.NoSuchAlgorithmException;\r\n   \r\n    public String get_SHA_512_SecurePassword(String passwordToHash, String salt){\r\n        String generatedPassword = null;\r\n        try {\r\n            MessageDigest md = MessageDigest.getInstance(&quot;SHA-512&quot;);\r\n            md.update(salt.getBytes(StandardCharsets.UTF_8));\r\n            byte[] bytes = md.digest(passwordToHash.getBytes(StandardCharsets.UTF_8));\r\n            StringBuilder sb = new StringBuilder();\r\n            for(int i=0; i&lt; bytes.length ;i++){\r\n                sb.append(Integer.toString((bytes[i] &amp; 0xff) + 0x100, 16).substring(1));\r\n            }\r\n            generatedPassword = sb.toString();\r\n        } catch (NoSuchAlgorithmException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return generatedPassword;\r\n    }\r\n","title":"How to hash a password with SHA-512 in Java?","body":"<p>you can use this for SHA-512 (Not a good choice for password hashing).</p>\n<pre><code>import java.nio.charset.StandardCharsets;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\n\npublic String get_SHA_512_SecurePassword(String passwordToHash, String salt){\n    String generatedPassword = null;\n    try {\n        MessageDigest md = MessageDigest.getInstance(&quot;SHA-512&quot;);\n        md.update(salt.getBytes(StandardCharsets.UTF_8));\n        byte[] bytes = md.digest(passwordToHash.getBytes(StandardCharsets.UTF_8));\n        StringBuilder sb = new StringBuilder();\n        for(int i=0; i&lt; bytes.length ;i++){\n            sb.append(Integer.toString((bytes[i] &amp; 0xff) + 0x100, 16).substring(1));\n        }\n        generatedPassword = sb.toString();\n    } catch (NoSuchAlgorithmException e) {\n        e.printStackTrace();\n    }\n    return generatedPassword;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4727308,"reputation":6439,"user_id":3823831,"display_name":"TheGreatContini"},"down_vote_count":4,"up_vote_count":31,"is_accepted":false,"score":27,"last_activity_date":1444686586,"creation_date":1444686586,"answer_id":33090784,"question_id":33085493,"body_markdown":"Please stop using hash functions to encode passwords!  They do not provide the protection you need.  Instead, you should be using an algorithm like PBKDF2, bcrypt, or scrypt.\r\n\r\nReferences:\r\n\r\n  - http://blog.tjll.net/please-stop-hashing-passwords/\r\n  - http://security.blogoverflow.com/2011/11/why-passwords-should-be-hashed/\r\n  - https://crackstation.net/hashing-security.htm\r\n  - http://www.sitepoint.com/risks-challenges-password-hashing/\r\n  - http://security.blogoverflow.com/2013/09/about-secure-password-hashing/\r\n","title":"How to hash a password with SHA-512 in Java?","body":"<p>Please stop using hash functions to encode passwords!  They do not provide the protection you need.  Instead, you should be using an algorithm like PBKDF2, bcrypt, or scrypt.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"http://blog.tjll.net/please-stop-hashing-passwords/\" rel=\"noreferrer\">http://blog.tjll.net/please-stop-hashing-passwords/</a></li>\n<li><a href=\"http://security.blogoverflow.com/2011/11/why-passwords-should-be-hashed/\" rel=\"noreferrer\">http://security.blogoverflow.com/2011/11/why-passwords-should-be-hashed/</a></li>\n<li><a href=\"https://crackstation.net/hashing-security.htm\" rel=\"noreferrer\">https://crackstation.net/hashing-security.htm</a></li>\n<li><a href=\"http://www.sitepoint.com/risks-challenges-password-hashing/\" rel=\"noreferrer\">http://www.sitepoint.com/risks-challenges-password-hashing/</a></li>\n<li><a href=\"http://security.blogoverflow.com/2013/09/about-secure-password-hashing/\" rel=\"noreferrer\">http://security.blogoverflow.com/2013/09/about-secure-password-hashing/</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1280178,"reputation":3130,"user_id":2356160,"accept_rate":55,"display_name":"lathspell"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1444718323,"creation_date":1444718323,"answer_id":33095793,"question_id":33085493,"body_markdown":"Use Apache Commons Crypt, it features SHA-512 based crypt() functions that generate salted hashes that are even compatible to libc&#39;s crypt and thus usable in PHP/Perl/Python/C and most databases, too.\r\n\r\nhttps://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/digest/Crypt.html#Crypt%28%29","title":"How to hash a password with SHA-512 in Java?","body":"<p>Use Apache Commons Crypt, it features SHA-512 based crypt() functions that generate salted hashes that are even compatible to libc's crypt and thus usable in PHP/Perl/Python/C and most databases, too.</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/digest/Crypt.html#Crypt%28%29\" rel=\"nofollow\">https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/digest/Crypt.html#Crypt%28%29</a></p>\n"},{"tags":[],"owner":{"account_id":11842390,"reputation":29,"user_id":8665890,"display_name":"lolcat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1507499093,"creation_date":1507499093,"answer_id":46636377,"question_id":33085493,"body_markdown":"you could use this to hash a password in java if you want to.\r\n\r\n    public static boolean isHashMatch(String password, // the password you want to check.\r\n\t\t\t\t\t\t\t\t\t  String saltedHash, // the salted hash you want to check your password against.\r\n\t\t\t\t\t\t\t\t\t  String hashAlgorithm, // the algorithm you want to use.\r\n\t\t\t\t\t\t\t\t\t  String delimiter) throws NoSuchAlgorithmException // the delimiter that has been used to delimit the salt and the hash.\r\n\t{\r\n\t\t// get the salt from the salted hash and decode it into a byte[].\r\n\t\tbyte[] salt = Base64.getDecoder()\r\n\t\t\t\t\t\t\t.decode(saltedHash.split(delimiter)[0]);\r\n\t\t// compute a new salted hash based on the provided password and salt.\r\n\t\tString pw_saltedHash = computeSaltedBase64Hash(password, \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   salt,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   hashAlgorithm,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   delimiter);\r\n\t\t// check if the provided salted hash matches the salted hash we computed from the password and salt.\r\n\t\treturn saltedHash.equals(pw_saltedHash);\r\n\t}\r\n\t\r\n\tpublic static String computeSaltedBase64Hash(String password, // the password you want to hash\r\n\t\t\t\t\t\t\t\t\t\t\t\t String hashAlgorithm, // the algorithm you want to use.\r\n\t\t\t\t\t\t\t\t\t\t\t\t String delimiter) throws NoSuchAlgorithmException // the delimiter that will be used to delimit the salt and the hash.\r\n\t{\r\n\t\t// compute the salted hash with a random salt.\r\n\t\treturn computeSaltedBase64Hash(password, null, hashAlgorithm, delimiter);\r\n\t}\r\n\t\r\n\tpublic static String computeSaltedBase64Hash(String password, // the password you want to hash\r\n\t\t\t\t\t\t\t\t\t\t\t\t byte[] salt, // the salt you want to use (uses random salt if null).\r\n\t\t\t\t\t\t\t\t\t\t\t\t String hashAlgorithm, // the algorithm you want to use.\r\n\t\t\t\t\t\t\t\t\t\t\t\t String delimiter) throws NoSuchAlgorithmException // the delimiter that will be used to delimit the salt and the hash.\r\n\t{\r\n\t\t// transform the password string into a byte[]. we have to do this to work with it later.\r\n\t\tbyte[] passwordBytes = password.getBytes();\r\n\t\tbyte[] saltBytes;\r\n\t\t\r\n\t\tif(salt != null)\r\n\t\t{\r\n\t\t\tsaltBytes = salt;\r\n\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// if null has been provided as salt parameter create a new random salt.\r\n\t\t\t\tsaltBytes = new byte[64];\r\n\t\t\t\tSecureRandom secureRandom = new SecureRandom();\r\n\t\t\t\tsecureRandom.nextBytes(saltBytes);\t\t\t\t\r\n\t\t\t}\r\n\t\t\r\n\t\t// MessageDigest converts our password and salt into a hash. \r\n\t\tMessageDigest messageDigest = MessageDigest.getInstance(hashAlgorithm);\r\n\t\t// concatenate the salt byte[] and the password byte[].\r\n\t\tbyte[] saltAndPassword = concatArrays(saltBytes, passwordBytes);\r\n\t\t// create the hash from our concatenated byte[].\r\n\t\tbyte[] saltedHash = messageDigest.digest(saltAndPassword);\r\n\t\t// get java&#39;s base64 encoder for encoding.\r\n\t\tEncoder base64Encoder = Base64.getEncoder();\r\n\t\t// create a StringBuilder to build the result.\r\n\t\tStringBuilder result = new StringBuilder();\r\n\t\t\r\n\t\tresult.append(base64Encoder.encodeToString(saltBytes)) // base64-encode the salt and append it.\r\n\t\t\t  .append(delimiter) // append the delimiter (watch out! don&#39;t use regex expressions as delimiter if you plan to use String.split() to isolate the salt!)\r\n\t\t\t  .append(base64Encoder.encodeToString(saltedHash)); // base64-encode the salted hash and append it.\r\n\t\t\r\n\t\t// return a salt and salted hash combo.\r\n\t\treturn result.toString();\r\n\t}\r\n\t\r\n\tpublic static byte[] concatArrays(byte[]... arrays)\r\n\t{\t\r\n\t\tint concatLength = 0;\r\n\t\t// get the actual length of all arrays and add it so we know how long our concatenated array has to be.\r\n\t\tfor(int i = 0; i&lt; arrays.length; i++)\r\n\t\t{\r\n\t\t\tconcatLength = concatLength + arrays[i].length;\r\n\t\t}\r\n\t\t// prepare our concatenated array which we&#39;re going to return later.\r\n\t\tbyte[] concatArray = new byte[concatLength];\r\n\t\t// this index tells us where we write into our array.\r\n\t\tint index = 0;\r\n\t\t// concatenate the arrays.\r\n\t\tfor(int i = 0; i &lt; arrays.length; i++)\r\n\t\t{\r\n\t\t\tfor(int j = 0; j &lt; arrays[i].length; j++)\r\n\t\t\t{\r\n\t\t\t\tconcatArray[index] = arrays[i][j];\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// return the concatenated arrays.\r\n\t\treturn concatArray;\t\t\r\n\t}","title":"How to hash a password with SHA-512 in Java?","body":"<p>you could use this to hash a password in java if you want to.</p>\n\n<pre><code>public static boolean isHashMatch(String password, // the password you want to check.\n                                  String saltedHash, // the salted hash you want to check your password against.\n                                  String hashAlgorithm, // the algorithm you want to use.\n                                  String delimiter) throws NoSuchAlgorithmException // the delimiter that has been used to delimit the salt and the hash.\n{\n    // get the salt from the salted hash and decode it into a byte[].\n    byte[] salt = Base64.getDecoder()\n                        .decode(saltedHash.split(delimiter)[0]);\n    // compute a new salted hash based on the provided password and salt.\n    String pw_saltedHash = computeSaltedBase64Hash(password, \n                                                   salt,\n                                                   hashAlgorithm,\n                                                   delimiter);\n    // check if the provided salted hash matches the salted hash we computed from the password and salt.\n    return saltedHash.equals(pw_saltedHash);\n}\n\npublic static String computeSaltedBase64Hash(String password, // the password you want to hash\n                                             String hashAlgorithm, // the algorithm you want to use.\n                                             String delimiter) throws NoSuchAlgorithmException // the delimiter that will be used to delimit the salt and the hash.\n{\n    // compute the salted hash with a random salt.\n    return computeSaltedBase64Hash(password, null, hashAlgorithm, delimiter);\n}\n\npublic static String computeSaltedBase64Hash(String password, // the password you want to hash\n                                             byte[] salt, // the salt you want to use (uses random salt if null).\n                                             String hashAlgorithm, // the algorithm you want to use.\n                                             String delimiter) throws NoSuchAlgorithmException // the delimiter that will be used to delimit the salt and the hash.\n{\n    // transform the password string into a byte[]. we have to do this to work with it later.\n    byte[] passwordBytes = password.getBytes();\n    byte[] saltBytes;\n\n    if(salt != null)\n    {\n        saltBytes = salt;\n    }\n        else\n        {\n            // if null has been provided as salt parameter create a new random salt.\n            saltBytes = new byte[64];\n            SecureRandom secureRandom = new SecureRandom();\n            secureRandom.nextBytes(saltBytes);              \n        }\n\n    // MessageDigest converts our password and salt into a hash. \n    MessageDigest messageDigest = MessageDigest.getInstance(hashAlgorithm);\n    // concatenate the salt byte[] and the password byte[].\n    byte[] saltAndPassword = concatArrays(saltBytes, passwordBytes);\n    // create the hash from our concatenated byte[].\n    byte[] saltedHash = messageDigest.digest(saltAndPassword);\n    // get java's base64 encoder for encoding.\n    Encoder base64Encoder = Base64.getEncoder();\n    // create a StringBuilder to build the result.\n    StringBuilder result = new StringBuilder();\n\n    result.append(base64Encoder.encodeToString(saltBytes)) // base64-encode the salt and append it.\n          .append(delimiter) // append the delimiter (watch out! don't use regex expressions as delimiter if you plan to use String.split() to isolate the salt!)\n          .append(base64Encoder.encodeToString(saltedHash)); // base64-encode the salted hash and append it.\n\n    // return a salt and salted hash combo.\n    return result.toString();\n}\n\npublic static byte[] concatArrays(byte[]... arrays)\n{   \n    int concatLength = 0;\n    // get the actual length of all arrays and add it so we know how long our concatenated array has to be.\n    for(int i = 0; i&lt; arrays.length; i++)\n    {\n        concatLength = concatLength + arrays[i].length;\n    }\n    // prepare our concatenated array which we're going to return later.\n    byte[] concatArray = new byte[concatLength];\n    // this index tells us where we write into our array.\n    int index = 0;\n    // concatenate the arrays.\n    for(int i = 0; i &lt; arrays.length; i++)\n    {\n        for(int j = 0; j &lt; arrays[i].length; j++)\n        {\n            concatArray[index] = arrays[i][j];\n            index++;\n        }\n    }\n    // return the concatenated arrays.\n    return concatArray;     \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10164582,"reputation":11,"user_id":7506968,"display_name":"Jasper den Hartog"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1520006605,"creation_date":1518959494,"answer_id":48852059,"question_id":33085493,"body_markdown":"With secure hashing combine 3 salt components (of 150 random characters each) to a individual user salt (user salt from the user database table, general salt in a database table (monthly change with cron job) and hide some salt in the application library). Align the for loop amount of the secure hash to your needs. See answer above for hashing method.\r\n\r\n    private static String generateSalt(int lenght){\r\n        String abcCapitals = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;\r\n        String abcLowerCase = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\r\n        String numbers = &quot;01234567890123456789&quot;;\r\n        String characters = &quot;!@#$%^&amp;*!@#$%%^^&amp;*&quot;;\r\n        \r\n        String total = abcCapitals + abcLowerCase + numbers + characters;\r\n        \r\n        String response = &quot;&quot;;\r\n        \r\n        char letters[] = new char[lenght];\r\n        for (int i=0; i&lt;lenght-1; i++){\r\n            Random r = new Random();\r\n            char letter = total.charAt(r.nextInt(total.length()));\r\n            letters[i] = letter;\r\n        }\r\n        \r\n        response = Arrays.toString(letters).replaceAll(&quot;\\\\s+&quot;,&quot;&quot;);\r\n        response = response.replaceAll(&quot;,&quot;,&quot;&quot;);\r\n        \r\n        return response;\r\n    }\r\n\r\n    private static String getHash(String passwordToHash, String salt){\r\n                String generatedPassword = null;\r\n                try {\r\n                     MessageDigest md = MessageDigest.getInstance(&quot;SHA-512&quot;);\r\n                     md.update(salt.getBytes(StandardCharsets.UTF_8));\r\n                     byte[] bytes = md.digest(passwordToHash.getBytes(StandardCharsets.UTF_8));\r\n                     StringBuilder sb = new StringBuilder();\r\n                     for(int i=0; i&lt; bytes.length ;i++){\r\n                        sb.append(Integer.toString((bytes[i] &amp; 0xff) + 0x100, 16).substring(1));\r\n                     }\r\n                     generatedPassword = sb.toString();\r\n                    } \r\n                   catch (NoSuchAlgorithmException e){\r\n                       System.out.println(e);\r\n                   }\r\n                return generatedPassword;\r\n            }\r\n        \r\n        public static String getSecureHash(String password, String salt){\r\n            String hash = getHash(password, salt);\r\n            for (int i=0; i&lt;20000; i++){\r\n                hash = getHash(password, hash);      \r\n            }\r\n            return hash;\r\n        }\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args) {\r\n            String salt = generateSalt(150);\r\n            String salt2 = generateSalt(150);\r\n            String salt3 = generateSalt(150);\r\n            String someString = &quot;This is some string!&quot;;\r\n    \r\n            String hash = getSecureHash(someString, salt + salt2 + salt3);\r\n            System.out.println(hash);\r\n        }","title":"How to hash a password with SHA-512 in Java?","body":"<p>With secure hashing combine 3 salt components (of 150 random characters each) to a individual user salt (user salt from the user database table, general salt in a database table (monthly change with cron job) and hide some salt in the application library). Align the for loop amount of the secure hash to your needs. See answer above for hashing method.</p>\n\n<pre><code>private static String generateSalt(int lenght){\n    String abcCapitals = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    String abcLowerCase = \"abcdefghijklmnopqrstuvwxyz\";\n    String numbers = \"01234567890123456789\";\n    String characters = \"!@#$%^&amp;*!@#$%%^^&amp;*\";\n\n    String total = abcCapitals + abcLowerCase + numbers + characters;\n\n    String response = \"\";\n\n    char letters[] = new char[lenght];\n    for (int i=0; i&lt;lenght-1; i++){\n        Random r = new Random();\n        char letter = total.charAt(r.nextInt(total.length()));\n        letters[i] = letter;\n    }\n\n    response = Arrays.toString(letters).replaceAll(\"\\\\s+\",\"\");\n    response = response.replaceAll(\",\",\"\");\n\n    return response;\n}\n\nprivate static String getHash(String passwordToHash, String salt){\n            String generatedPassword = null;\n            try {\n                 MessageDigest md = MessageDigest.getInstance(\"SHA-512\");\n                 md.update(salt.getBytes(StandardCharsets.UTF_8));\n                 byte[] bytes = md.digest(passwordToHash.getBytes(StandardCharsets.UTF_8));\n                 StringBuilder sb = new StringBuilder();\n                 for(int i=0; i&lt; bytes.length ;i++){\n                    sb.append(Integer.toString((bytes[i] &amp; 0xff) + 0x100, 16).substring(1));\n                 }\n                 generatedPassword = sb.toString();\n                } \n               catch (NoSuchAlgorithmException e){\n                   System.out.println(e);\n               }\n            return generatedPassword;\n        }\n\n    public static String getSecureHash(String password, String salt){\n        String hash = getHash(password, salt);\n        for (int i=0; i&lt;20000; i++){\n            hash = getHash(password, hash);      \n        }\n        return hash;\n    }\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        String salt = generateSalt(150);\n        String salt2 = generateSalt(150);\n        String salt3 = generateSalt(150);\n        String someString = \"This is some string!\";\n\n        String hash = getSecureHash(someString, salt + salt2 + salt3);\n        System.out.println(hash);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user4374390"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523372433,"creation_date":1523370819,"answer_id":49756348,"question_id":33085493,"body_markdown":"    import java.nio.charset.StandardCharsets;\r\n    import java.security.MessageDigest;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import org.apache.commons.codec.binary.Hex;\r\n    \r\n    public String getHashSHA512(String StringToHash, String salt){\r\n            String generatedPassword = null;\r\n            try {\r\n                MessageDigest md = MessageDigest.getInstance(&quot;SHA-512&quot;);\r\n                md.update(salt.getBytes(StandardCharsets.UTF_8));\r\n                byte[] bytes = md.digest(StringToHash.getBytes(StandardCharsets.UTF_8));\r\n                generatedPassword = Hex.encodeHexString(bytes);\r\n            }\r\n            catch (NoSuchAlgorithmException e){\r\n                e.printStackTrace();\r\n            }\r\n            return generatedPassword;\r\n        }\r\n\r\nIt&#39;s not recommended to use hash functions for passwords though, newer alogrithms like bcrypt, or scrypt exist","title":"How to hash a password with SHA-512 in Java?","body":"<pre><code>import java.nio.charset.StandardCharsets;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport org.apache.commons.codec.binary.Hex;\n\npublic String getHashSHA512(String StringToHash, String salt){\n        String generatedPassword = null;\n        try {\n            MessageDigest md = MessageDigest.getInstance(\"SHA-512\");\n            md.update(salt.getBytes(StandardCharsets.UTF_8));\n            byte[] bytes = md.digest(StringToHash.getBytes(StandardCharsets.UTF_8));\n            generatedPassword = Hex.encodeHexString(bytes);\n        }\n        catch (NoSuchAlgorithmException e){\n            e.printStackTrace();\n        }\n        return generatedPassword;\n    }\n</code></pre>\n\n<p>It's not recommended to use hash functions for passwords though, newer alogrithms like bcrypt, or scrypt exist</p>\n"},{"tags":[],"owner":{"account_id":356896,"reputation":1317,"user_id":696714,"accept_rate":56,"display_name":"TOUDIdel"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1530558983,"creation_date":1530558983,"answer_id":51142475,"question_id":33085493,"body_markdown":"Using [Guava][1]:\r\n\r\n    Hashing.sha512().hashString(s, StandardCharsets.UTF_8).toString()\r\n\r\n\r\n  [1]: https://github.com/google/guava","title":"How to hash a password with SHA-512 in Java?","body":"<p>Using <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a>:</p>\n\n<pre><code>Hashing.sha512().hashString(s, StandardCharsets.UTF_8).toString()\n</code></pre>\n"}],"owner":{"account_id":5220844,"reputation":2333,"user_id":4240291,"accept_rate":55,"display_name":"stack man"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120766,"favorite_count":0,"down_vote_count":1,"up_vote_count":48,"accepted_answer_id":33085670,"answer_count":7,"score":47,"last_activity_date":1646410079,"creation_date":1444665804,"question_id":33085493,"body_markdown":"I&#39;ve been investigating a bit about Java String encryption techniques and unfortunately I haven&#39;t find any good tutorial how to hash String with SHA-512 in Java; I read a few blogs about MD5 and Base64, but they are not as secure as I&#39;d like to (actually, Base64 is not an encryption technique), so I prefer SHA-512. ","title":"How to hash a password with SHA-512 in Java?","body":"<p>I've been investigating a bit about Java String encryption techniques and unfortunately I haven't find any good tutorial how to hash String with SHA-512 in Java; I read a few blogs about MD5 and Base64, but they are not as secure as I'd like to (actually, Base64 is not an encryption technique), so I prefer SHA-512. </p>\n"},{"tags":["java","unit-testing","testing","junit","mockito"],"comments":[{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":0,"creation_date":1646472052,"post_id":71354076,"comment_id":126135538,"body_markdown":"Your best choice is to apply the *Single Responsibility Pattern* and extract your `if/else` block into a separate Method (preferably in a separate class) so you can test it as an *unit in isolation*. This (separate class) would also allow to replace the *condition checker* with a *Mock* when testing the rest of the logic.","body":"Your best choice is to apply the <i>Single Responsibility Pattern</i> and extract your <code>if&#47;else</code> block into a separate Method (preferably in a separate class) so you can test it as an <i>unit in isolation</i>. This (separate class) would also allow to replace the <i>condition checker</i> with a <i>Mock</i> when testing the rest of the logic."},{"owner":{"account_id":19157508,"reputation":387,"user_id":13994040,"display_name":"Enes Uurolu"},"score":0,"creation_date":1646475860,"post_id":71354076,"comment_id":126136169,"body_markdown":"Seems like logical thank you for your suggestion, I will definitely go that way since it is best practice, but may i ask is there any way to do that without changing my code? Even if it is not best practice at all.","body":"Seems like logical thank you for your suggestion, I will definitely go that way since it is best practice, but may i ask is there any way to do that without changing my code? Even if it is not best practice at all."},{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":0,"creation_date":1646488730,"post_id":71354076,"comment_id":126138447,"body_markdown":"*&quot;is there any way to do that without changing my code? Even if it is not best practice at all.&quot;* **--** I don&#39;t see any. After all Java insists in the order of execution...","body":"<i>&quot;is there any way to do that without changing my code? Even if it is not best practice at all.&quot;</i> <b>--</b> I don&#39;t see any. After all Java insists in the order of execution..."}],"owner":{"account_id":19157508,"reputation":387,"user_id":13994040,"display_name":"Enes Uurolu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646409997,"creation_date":1646409997,"question_id":71354076,"body_markdown":"I have java code simply do below steps:\r\n\r\n - Getting json response from url (I would like to skip this and instead use pre defined variable for test purposes)\r\n - Check some conditions (which i would like to perform unit test)\r\n - Execute put method to kill applications using rest-api (I would like to skip this because I do not want to kill any application while testing conditions)\r\n\r\nHere is my method which I would like to perform unit test:\r\n\r\n    public void checkYarnApplications() throws IOException {\r\n\r\n        // Get json object from yarn rest-api\r\n        ObjectMapper mapper = new ObjectMapper();\r\n\r\n        URL getJsonUrl1 = new URL(getUrlAddress());\r\n\r\n        Map&lt;String,Object&gt; map1 = mapper.readValue(getJsonUrl1,Map.class);\r\n\r\n        JSONObject j = new JSONObject(map1);\r\n\r\n        // Initialize stringbuilder to build slack message\r\n        StringBuilder stringBuilder = new StringBuilder();\r\n\r\n        // Iterate through number of existing yarn application\r\n        for (int i = 0; i &lt; j.getJSONObject(&quot;apps&quot;).getJSONArray(&quot;app&quot;).length(); i++){\r\n\r\n            JSONObject name = j.getJSONObject(&quot;apps&quot;)\r\n                    .getJSONArray(&quot;app&quot;)\r\n                    .getJSONObject(i);\r\n\r\n            String state = name.get(&quot;state&quot;).toString();\r\n\r\n            // Check if application is in Running state\r\n            if (state.equals(&quot;RUNNING&quot;)){\r\n\r\n                // Get elapsed time for each running application and convert it to hour\r\n                int elapsed_time = name.getInt(&quot;elapsedTime&quot;)/3600000;\r\n                // Get application name\r\n                String app_name = name.get(&quot;name&quot;).toString();\r\n                // Get application queue_name\r\n                String queue_name = name.get(&quot;queue&quot;).toString();\r\n                // Get application user_name\r\n                String user_name = name.get(&quot;user&quot;).toString();\r\n\r\n                // Check if pyspark applications last longer than specified time in config.properties\r\n                if (app_name.startsWith(&quot;pyspark-shell&quot;) &amp;&amp; elapsed_time &gt; getSparkCheckTime()){\r\n                    String app_id = name.get(&quot;id&quot;).toString();\r\n                    String infoMessageSpark = &quot;pyspark application &quot; + app_id + &quot; has been killed because it takes longer than &quot; + getSparkCheckTime() + &quot; hours&quot;;\r\n                    logger.info(infoMessageSpark);\r\n                    logger.info(name.toString());\r\n                    // Kill yarn application\r\n                    URL url = new URL(String.format(&quot;%s%s/state?user.name=atlasapp&quot;,getUrlAddress(),app_id));\r\n                    HttpURLConnection http = (HttpURLConnection)url.openConnection();\r\n                    http.setRequestMethod(&quot;PUT&quot;);\r\n                    http.setDoOutput(true);\r\n                    http.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n                    String data = &quot;{\\&quot;state\\&quot;: \\&quot;KILLED\\&quot;}&quot;;\r\n\r\n                    byte[] out = data.getBytes(StandardCharsets.UTF_8);\r\n\r\n                    OutputStream stream = http.getOutputStream();\r\n                    stream.write(out);\r\n\r\n                    System.out.println(http.getResponseCode() + &quot; &quot; + http.getResponseMessage());\r\n                    http.disconnect();\r\n                    // Add info message to slackmessage string builder\r\n                    stringBuilder.append(infoMessageSpark);\r\n                    stringBuilder.append(&quot;\\n&quot;);\r\n                }\r\n                // Check if self_bi applications last longer than specified time in config.properties\r\n                else if (!queue_name.equals(&quot;yarn-system&quot;) &amp;&amp; !queue_name.equals(&quot;hudi&quot;) &amp;&amp; !queue_name.equals(&quot;hepsistream&quot;) &amp;&amp;\r\n                        !app_name.equals(&quot;Bzip2Hdfs&quot;) &amp;&amp; !user_name.equals(&quot;spark&quot;) &amp;&amp; !user_name.equals(&quot;yarn-ats&quot;) &amp;&amp;\r\n                        !app_name.startsWith(&quot;pyspark-shell&quot;) &amp;&amp; !queue_name.equals(&quot;llap&quot;) &amp;&amp; elapsed_time &gt; getappCheckTime()){\r\n                    String app_id = name.get(&quot;id&quot;).toString();\r\n                    String infoMessageSb = queue_name + &quot; application, &quot; + app_id + &quot; has been killed because it takes longer than &quot;\r\n                            + getappCheckTime() + &quot; hours. Elapsed Time:&quot; + elapsed_time;\r\n                    logger.info(infoMessageSb);\r\n                    logger.info(name.toString());\r\n                    // Kill yarn application\r\n                    URL url = new URL(String.format(&quot;%s%s/state?user.name=atlasapp&quot;,getUrlAddress(),app_id));\r\n                    HttpURLConnection http = (HttpURLConnection)url.openConnection();\r\n                    http.setRequestMethod(&quot;PUT&quot;);\r\n                    http.setDoOutput(true);\r\n                    http.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n                    String data = &quot;{\\&quot;state\\&quot;: \\&quot;KILLED\\&quot;}&quot;;\r\n\r\n                    byte[] out = data.getBytes(StandardCharsets.UTF_8);\r\n\r\n                    OutputStream stream = http.getOutputStream();\r\n                    stream.write(out);\r\n\r\n                    System.out.println(http.getResponseCode() + &quot; &quot; + http.getResponseMessage());\r\n                    http.disconnect();\r\n                    // Add info message to slackmessage string builder\r\n                    stringBuilder.append(infoMessageSb);\r\n                    stringBuilder.append(&quot;\\n&quot;);\r\n                }\r\n                // Check if any application except hudi, llap last longer than specified time in config.properties and send them to slack channel\r\n                else if (!queue_name.equals(&quot;hudi&quot;) &amp;&amp; !queue_name.equals(&quot;llap&quot;) &amp;&amp; !queue_name.equals(&quot;hepsistream&quot;) &amp;&amp;\r\n                        !queue_name.equals(&quot;yarn-system&quot;) &amp;&amp; !user_name.equals(&quot;yarn-ats&quot;) &amp;&amp;\r\n                        !app_name.startsWith(&quot;pyspark-shell&quot;) &amp;&amp; !app_name.equals(&quot;Bzip2Hdfs&quot;) &amp;&amp; !user_name.equals(&quot;spark&quot;) &amp;&amp;\r\n                        elapsed_time &gt; getCheckTime()){\r\n                    logger.info(&quot;Application_id: &quot; + name.get(&quot;id&quot;).toString() + &quot; is running longer than &quot; +  getCheckTime() + &quot; hours&quot;);\r\n                    String textMessage =&quot;Elapsed time: &quot; + elapsed_time + &quot; hours&quot; + &quot;, &quot; +\r\n                            &quot;Application_Id: &quot; + name.get(&quot;id&quot;).toString() + &quot;, &quot; +\r\n                            &quot;Username: &quot; + name.get(&quot;user&quot;).toString() + &quot;, &quot; +\r\n                            &quot;Queuename:&quot; + name.get(&quot;queue&quot;).toString() + &quot;, &quot; +\r\n                            &quot;Usage:&quot; + name.get(&quot;clusterUsagePercentage&quot;).toString();\r\n                    stringBuilder.append(textMessage);\r\n                    stringBuilder.append(&quot;\\n&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nHere I would like to use some pre defined json string which will be equal to string I receive as a response using http connection. And only would like to check if - else-if conditions if they are working properly. And also would like to skip some line of code to kill some applications if conditions are met. So simply I would like to implement some assertequal method to compare infoMessage strings(which you can see in my code) only.\r\nI found some mockito methods to mock complete method but here I want to skip some line of code inside of method and I couldnt find any example regarding this requirements. Any help and directions will be appreciated.\r\n\r\nThanks.","title":"What is the best practice to write unit test and skip some line of code within method in Java?","body":"<p>I have java code simply do below steps:</p>\n<ul>\n<li>Getting json response from url (I would like to skip this and instead use pre defined variable for test purposes)</li>\n<li>Check some conditions (which i would like to perform unit test)</li>\n<li>Execute put method to kill applications using rest-api (I would like to skip this because I do not want to kill any application while testing conditions)</li>\n</ul>\n<p>Here is my method which I would like to perform unit test:</p>\n<pre><code>public void checkYarnApplications() throws IOException {\n\n    // Get json object from yarn rest-api\n    ObjectMapper mapper = new ObjectMapper();\n\n    URL getJsonUrl1 = new URL(getUrlAddress());\n\n    Map&lt;String,Object&gt; map1 = mapper.readValue(getJsonUrl1,Map.class);\n\n    JSONObject j = new JSONObject(map1);\n\n    // Initialize stringbuilder to build slack message\n    StringBuilder stringBuilder = new StringBuilder();\n\n    // Iterate through number of existing yarn application\n    for (int i = 0; i &lt; j.getJSONObject(&quot;apps&quot;).getJSONArray(&quot;app&quot;).length(); i++){\n\n        JSONObject name = j.getJSONObject(&quot;apps&quot;)\n                .getJSONArray(&quot;app&quot;)\n                .getJSONObject(i);\n\n        String state = name.get(&quot;state&quot;).toString();\n\n        // Check if application is in Running state\n        if (state.equals(&quot;RUNNING&quot;)){\n\n            // Get elapsed time for each running application and convert it to hour\n            int elapsed_time = name.getInt(&quot;elapsedTime&quot;)/3600000;\n            // Get application name\n            String app_name = name.get(&quot;name&quot;).toString();\n            // Get application queue_name\n            String queue_name = name.get(&quot;queue&quot;).toString();\n            // Get application user_name\n            String user_name = name.get(&quot;user&quot;).toString();\n\n            // Check if pyspark applications last longer than specified time in config.properties\n            if (app_name.startsWith(&quot;pyspark-shell&quot;) &amp;&amp; elapsed_time &gt; getSparkCheckTime()){\n                String app_id = name.get(&quot;id&quot;).toString();\n                String infoMessageSpark = &quot;pyspark application &quot; + app_id + &quot; has been killed because it takes longer than &quot; + getSparkCheckTime() + &quot; hours&quot;;\n                logger.info(infoMessageSpark);\n                logger.info(name.toString());\n                // Kill yarn application\n                URL url = new URL(String.format(&quot;%s%s/state?user.name=atlasapp&quot;,getUrlAddress(),app_id));\n                HttpURLConnection http = (HttpURLConnection)url.openConnection();\n                http.setRequestMethod(&quot;PUT&quot;);\n                http.setDoOutput(true);\n                http.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n                String data = &quot;{\\&quot;state\\&quot;: \\&quot;KILLED\\&quot;}&quot;;\n\n                byte[] out = data.getBytes(StandardCharsets.UTF_8);\n\n                OutputStream stream = http.getOutputStream();\n                stream.write(out);\n\n                System.out.println(http.getResponseCode() + &quot; &quot; + http.getResponseMessage());\n                http.disconnect();\n                // Add info message to slackmessage string builder\n                stringBuilder.append(infoMessageSpark);\n                stringBuilder.append(&quot;\\n&quot;);\n            }\n            // Check if self_bi applications last longer than specified time in config.properties\n            else if (!queue_name.equals(&quot;yarn-system&quot;) &amp;&amp; !queue_name.equals(&quot;hudi&quot;) &amp;&amp; !queue_name.equals(&quot;hepsistream&quot;) &amp;&amp;\n                    !app_name.equals(&quot;Bzip2Hdfs&quot;) &amp;&amp; !user_name.equals(&quot;spark&quot;) &amp;&amp; !user_name.equals(&quot;yarn-ats&quot;) &amp;&amp;\n                    !app_name.startsWith(&quot;pyspark-shell&quot;) &amp;&amp; !queue_name.equals(&quot;llap&quot;) &amp;&amp; elapsed_time &gt; getappCheckTime()){\n                String app_id = name.get(&quot;id&quot;).toString();\n                String infoMessageSb = queue_name + &quot; application, &quot; + app_id + &quot; has been killed because it takes longer than &quot;\n                        + getappCheckTime() + &quot; hours. Elapsed Time:&quot; + elapsed_time;\n                logger.info(infoMessageSb);\n                logger.info(name.toString());\n                // Kill yarn application\n                URL url = new URL(String.format(&quot;%s%s/state?user.name=atlasapp&quot;,getUrlAddress(),app_id));\n                HttpURLConnection http = (HttpURLConnection)url.openConnection();\n                http.setRequestMethod(&quot;PUT&quot;);\n                http.setDoOutput(true);\n                http.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n                String data = &quot;{\\&quot;state\\&quot;: \\&quot;KILLED\\&quot;}&quot;;\n\n                byte[] out = data.getBytes(StandardCharsets.UTF_8);\n\n                OutputStream stream = http.getOutputStream();\n                stream.write(out);\n\n                System.out.println(http.getResponseCode() + &quot; &quot; + http.getResponseMessage());\n                http.disconnect();\n                // Add info message to slackmessage string builder\n                stringBuilder.append(infoMessageSb);\n                stringBuilder.append(&quot;\\n&quot;);\n            }\n            // Check if any application except hudi, llap last longer than specified time in config.properties and send them to slack channel\n            else if (!queue_name.equals(&quot;hudi&quot;) &amp;&amp; !queue_name.equals(&quot;llap&quot;) &amp;&amp; !queue_name.equals(&quot;hepsistream&quot;) &amp;&amp;\n                    !queue_name.equals(&quot;yarn-system&quot;) &amp;&amp; !user_name.equals(&quot;yarn-ats&quot;) &amp;&amp;\n                    !app_name.startsWith(&quot;pyspark-shell&quot;) &amp;&amp; !app_name.equals(&quot;Bzip2Hdfs&quot;) &amp;&amp; !user_name.equals(&quot;spark&quot;) &amp;&amp;\n                    elapsed_time &gt; getCheckTime()){\n                logger.info(&quot;Application_id: &quot; + name.get(&quot;id&quot;).toString() + &quot; is running longer than &quot; +  getCheckTime() + &quot; hours&quot;);\n                String textMessage =&quot;Elapsed time: &quot; + elapsed_time + &quot; hours&quot; + &quot;, &quot; +\n                        &quot;Application_Id: &quot; + name.get(&quot;id&quot;).toString() + &quot;, &quot; +\n                        &quot;Username: &quot; + name.get(&quot;user&quot;).toString() + &quot;, &quot; +\n                        &quot;Queuename:&quot; + name.get(&quot;queue&quot;).toString() + &quot;, &quot; +\n                        &quot;Usage:&quot; + name.get(&quot;clusterUsagePercentage&quot;).toString();\n                stringBuilder.append(textMessage);\n                stringBuilder.append(&quot;\\n&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Here I would like to use some pre defined json string which will be equal to string I receive as a response using http connection. And only would like to check if - else-if conditions if they are working properly. And also would like to skip some line of code to kill some applications if conditions are met. So simply I would like to implement some assertequal method to compare infoMessage strings(which you can see in my code) only.\nI found some mockito methods to mock complete method but here I want to skip some line of code inside of method and I couldnt find any example regarding this requirements. Any help and directions will be appreciated.</p>\n<p>Thanks.</p>\n"},{"tags":["java","apache","ms-word","apache-poi"],"comments":[{"owner":{"account_id":4076353,"reputation":2258,"user_id":3347936,"accept_rate":81,"display_name":"Rockstar"},"score":1,"creation_date":1420007466,"post_id":27716957,"comment_id":43846173,"body_markdown":"Did you check this? http://stackoverflow.com/questions/7477335/java-apache-poi-newline-characters-are-ignored-when-writing-to-xwpftable-cell","body":"Did you check this? <a href=\"http://stackoverflow.com/questions/7477335/java-apache-poi-newline-characters-are-ignored-when-writing-to-xwpftable-cell\" title=\"java apache poi newline characters are ignored when writing to xwpftable cell\">stackoverflow.com/questions/7477335/&hellip;</a>"},{"owner":{"account_id":3192629,"reputation":2297,"user_id":2696569,"accept_rate":41,"display_name":"lucifer"},"score":0,"creation_date":1420009009,"post_id":27716957,"comment_id":43846661,"body_markdown":"its not working for me ...","body":"its not working for me ..."},{"owner":{"account_id":4076353,"reputation":2258,"user_id":3347936,"accept_rate":81,"display_name":"Rockstar"},"score":0,"creation_date":1420009481,"post_id":27716957,"comment_id":43846824,"body_markdown":"Are you getting any error?","body":"Are you getting any error?"},{"owner":{"account_id":3192629,"reputation":2297,"user_id":2696569,"accept_rate":41,"display_name":"lucifer"},"score":0,"creation_date":1420011042,"post_id":27716957,"comment_id":43847343,"body_markdown":"no error but it is not coming in new line","body":"no error but it is not coming in new line"},{"owner":{"account_id":3192629,"reputation":2297,"user_id":2696569,"accept_rate":41,"display_name":"lucifer"},"score":0,"creation_date":1420011311,"post_id":27716957,"comment_id":43847416,"body_markdown":"somebody please help","body":"somebody please help"},{"owner":{"account_id":4076353,"reputation":2258,"user_id":3347936,"accept_rate":81,"display_name":"Rockstar"},"score":0,"creation_date":1420026956,"post_id":27716957,"comment_id":43853213,"body_markdown":"hope this will help you. http://poi.apache.org/spreadsheet/quick-guide.html","body":"hope this will help you. <a href=\"http://poi.apache.org/spreadsheet/quick-guide.html\" rel=\"nofollow noreferrer\">poi.apache.org/spreadsheet/quick-guide.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":1781418,"reputation":1399,"user_id":1624052,"accept_rate":92,"display_name":"Dan Torrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1421244854,"creation_date":1421244854,"answer_id":27944998,"question_id":27716957,"body_markdown":"Traditional carriage returns and line breaks are not recognized in Apache POI/OpenXML formats. Instead, the XWPFRun.addCarriageReturn() method needs to be called to create a new line.\r\n\r\nYou are going to need to loop through cell paragraphs and runs, then split the text you want to appear on new lines into new runs, then add a carriage return on all previous runs.\r\n\r\nHere&#39;s some code to get you started. I did not test this, but I should get you going.\r\n\r\n    // Loop through paragraphs in cell.\r\n    for ( XWPFParagraph xwpfParagraph : cell.getParagraphs() ) {\r\n        \r\n        // Loop through runs in paragraph.\r\n        for ( XWPFRun xwpfRun : xwpfParagraph.getRuns() ) {\r\n            \r\n            // Split runs by new line character.\r\n            String textOfRun = xwpfRun.getText( 0 );\r\n            if ( textOfRun.contains( &quot;\\n&quot; ) ) {\r\n                String[] stringsOnNewLines = textOfRun.split( &quot;\\n&quot; );\r\n    \r\n                // For each additional line, create a new run. Add carriage return on previous.\r\n                for ( int i = 0; i &lt; stringsOnNewLines.length; i++ ) {\r\n                    \r\n                    // For every run except last one, add a carriage return.\r\n                    String textForLine = stringsOnNewLines[i];\r\n                    if ( i &lt; stringsOnNewLines.length - 1 ) {\r\n                        xwpfRun.setText(textForLine, 0);\r\n                        xwpfRun.addCarriageReturn();\r\n                    }\r\n                    else {\r\n                        xwpfParagraph.insertNewRun( i );\r\n                        XWPFRun newRun = paragraph.getRuns().get( i );\r\n                        CTRPr rPr = newRun.getCTR().isSetRPr() ? newRun.getCTR().getRPr() : newRun.getCTR().addNewRPr();\r\n                        rPr.set( xwpfRun.getCTR().getRPr() );\r\n                        newRun.setText( textForLine );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }","title":"How to do new line in doc using apache POI","body":"<p>Traditional carriage returns and line breaks are not recognized in Apache POI/OpenXML formats. Instead, the XWPFRun.addCarriageReturn() method needs to be called to create a new line.</p>\n\n<p>You are going to need to loop through cell paragraphs and runs, then split the text you want to appear on new lines into new runs, then add a carriage return on all previous runs.</p>\n\n<p>Here's some code to get you started. I did not test this, but I should get you going.</p>\n\n<pre><code>// Loop through paragraphs in cell.\nfor ( XWPFParagraph xwpfParagraph : cell.getParagraphs() ) {\n\n    // Loop through runs in paragraph.\n    for ( XWPFRun xwpfRun : xwpfParagraph.getRuns() ) {\n\n        // Split runs by new line character.\n        String textOfRun = xwpfRun.getText( 0 );\n        if ( textOfRun.contains( \"\\n\" ) ) {\n            String[] stringsOnNewLines = textOfRun.split( \"\\n\" );\n\n            // For each additional line, create a new run. Add carriage return on previous.\n            for ( int i = 0; i &lt; stringsOnNewLines.length; i++ ) {\n\n                // For every run except last one, add a carriage return.\n                String textForLine = stringsOnNewLines[i];\n                if ( i &lt; stringsOnNewLines.length - 1 ) {\n                    xwpfRun.setText(textForLine, 0);\n                    xwpfRun.addCarriageReturn();\n                }\n                else {\n                    xwpfParagraph.insertNewRun( i );\n                    XWPFRun newRun = paragraph.getRuns().get( i );\n                    CTRPr rPr = newRun.getCTR().isSetRPr() ? newRun.getCTR().getRPr() : newRun.getCTR().addNewRPr();\n                    rPr.set( xwpfRun.getCTR().getRPr() );\n                    newRun.setText( textForLine );\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4837695,"reputation":51,"user_id":3903754,"display_name":"PCGerar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1441831066,"creation_date":1441818314,"answer_id":32485492,"question_id":27716957,"body_markdown":"This code worked for me with some modifications (the loop has some errors finding the last run and forgets to insert the new line on the others paragraphs) (Edited: *and as dellasavia said: a &quot;while&quot; is better than a &quot;for each&quot; to avoid the exception). \r\n\r\n                    // Loop through runs in paragraph.\r\n                    int i_paragraph = 0;\r\n                    //for (XWPFRun xwpfRun : parrafo.getRuns()) { //EXCEPTION UPDATING RUNS IN THE PARAGRAPH\r\n                    while (i_paragraph &lt; parrafo.getRuns().size()) { //BETTER THE WHILE\r\n                        XWPFRun xwpfRun = parrafo.getRuns().get(i_paragraph);\r\n\r\n                        // Split runs by new line character.\r\n                        String textOfRun = xwpfRun.getText(0);\r\n                        if (textOfRun.contains(&quot;\\n&quot;)) {\r\n                            String[] stringsOnNewLines = textOfRun.split(&quot;\\n&quot;);\r\n\r\n                            // For each additional line, create a new run. Add carriage return on previous.\r\n                            for (int i = 0; i &lt; stringsOnNewLines.length; i++) {\r\n\r\n                                // For every run except last one, add a carriage return.\r\n                                String textForLine = stringsOnNewLines[i];\r\n                                if (i == stringsOnNewLines.length - 1) {\r\n                                    xwpfRun.setText(textForLine, 0);\r\n                                    xwpfRun.addCarriageReturn();\r\n                                } else {\r\n                                    parrafo.insertNewRun(i);\r\n                                    XWPFRun newRun = parrafo.getRuns().get(i);\r\n                                    CTRPr rPr = newRun.getCTR().isSetRPr() ? newRun.getCTR().getRPr() : newRun.getCTR().addNewRPr();\r\n                                    rPr.set(xwpfRun.getCTR().getRPr());\r\n                                    newRun.setText(textForLine);\r\n                                    newRun.addCarriageReturn(); //ADD THE NEW LINE\r\n                                }\r\n                            }\r\n                        }\r\n                        i_paragraph++;\r\n                    }","title":"How to do new line in doc using apache POI","body":"<p>This code worked for me with some modifications (the loop has some errors finding the last run and forgets to insert the new line on the others paragraphs) (Edited: *and as dellasavia said: a \"while\" is better than a \"for each\" to avoid the exception). </p>\n\n<pre><code>                // Loop through runs in paragraph.\n                int i_paragraph = 0;\n                //for (XWPFRun xwpfRun : parrafo.getRuns()) { //EXCEPTION UPDATING RUNS IN THE PARAGRAPH\n                while (i_paragraph &lt; parrafo.getRuns().size()) { //BETTER THE WHILE\n                    XWPFRun xwpfRun = parrafo.getRuns().get(i_paragraph);\n\n                    // Split runs by new line character.\n                    String textOfRun = xwpfRun.getText(0);\n                    if (textOfRun.contains(\"\\n\")) {\n                        String[] stringsOnNewLines = textOfRun.split(\"\\n\");\n\n                        // For each additional line, create a new run. Add carriage return on previous.\n                        for (int i = 0; i &lt; stringsOnNewLines.length; i++) {\n\n                            // For every run except last one, add a carriage return.\n                            String textForLine = stringsOnNewLines[i];\n                            if (i == stringsOnNewLines.length - 1) {\n                                xwpfRun.setText(textForLine, 0);\n                                xwpfRun.addCarriageReturn();\n                            } else {\n                                parrafo.insertNewRun(i);\n                                XWPFRun newRun = parrafo.getRuns().get(i);\n                                CTRPr rPr = newRun.getCTR().isSetRPr() ? newRun.getCTR().getRPr() : newRun.getCTR().addNewRPr();\n                                rPr.set(xwpfRun.getCTR().getRPr());\n                                newRun.setText(textForLine);\n                                newRun.addCarriageReturn(); //ADD THE NEW LINE\n                            }\n                        }\n                    }\n                    i_paragraph++;\n                }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6557884,"reputation":261,"user_id":5070033,"display_name":"Abhishek Jaiswal"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1497695280,"creation_date":1497695280,"answer_id":44603481,"question_id":27716957,"body_markdown":"\r\nTo add formating to table cell, create a function which takes paragraph and string as argument. This function will create a run from the para, now you can add your formating to this run.\r\n\r\n\r\n    private static void tableText(List&lt;XWPFParagraph&gt; paragraph, String text) {\r\n\t\tXWPFRun run = paragraph.get(0).createRun();\r\n\t\trun.setFontSize(14);\r\n\t\trun.setFontFamily(&quot;Times New Roman&quot;);\r\n\t\trun.setText(text);\r\n        run.addBreak();\r\n        run.setText(&quot;Next line&quot;);\r\n\t}\r\n\r\nNow use this function to add text to table.\r\n\r\n\r\n    XWPFTableRow tableRow = table.createRow();\r\n    tableText(tableRow.getCell(0).getParagraphs(), &quot; 6 &quot;, true);\r\n\t\t\t\t","title":"How to do new line in doc using apache POI","body":"<p>To add formating to table cell, create a function which takes paragraph and string as argument. This function will create a run from the para, now you can add your formating to this run.</p>\n\n<pre><code>private static void tableText(List&lt;XWPFParagraph&gt; paragraph, String text) {\n    XWPFRun run = paragraph.get(0).createRun();\n    run.setFontSize(14);\n    run.setFontFamily(\"Times New Roman\");\n    run.setText(text);\n    run.addBreak();\n    run.setText(\"Next line\");\n}\n</code></pre>\n\n<p>Now use this function to add text to table.</p>\n\n<pre><code>XWPFTableRow tableRow = table.createRow();\ntableText(tableRow.getCell(0).getParagraphs(), \" 6 \", true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":974204,"reputation":104,"user_id":996026,"display_name":"Denilson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1515617890,"creation_date":1515617890,"answer_id":48195961,"question_id":27716957,"body_markdown":"The POI website lists a technique that works for me.\r\n\r\nhttps://poi.apache.org/spreadsheet/quick-guide.html#Using+newlines+in+cells\r\n\r\n\r\n**Using newlines in cells**\r\n\r\n    Workbook wb = new XSSFWorkbook();   //or new HSSFWorkbook();\r\n    Sheet sheet = wb.createSheet();\r\n\r\n    Row row = sheet.createRow(2);\r\n    Cell cell = row.createCell(2);\r\n    cell.setCellValue(&quot;Use \\n with word wrap on to create a new line&quot;);\r\n\r\n    //to enable newlines you need set a cell styles with wrap=true\r\n    CellStyle cs = wb.createCellStyle();\r\n    cs.setWrapText(true);\r\n    cell.setCellStyle(cs);\r\n\r\n    //increase row height to accomodate two lines of text\r\n    row.setHeightInPoints((2*sheet.getDefaultRowHeightInPoints()));\r\n\r\n    //adjust column width to fit the content\r\n    sheet.autoSizeColumn((short)2);\r\n\r\n    FileOutputStream fileOut = new FileOutputStream(&quot;ooxml-newlines.xlsx&quot;);\r\n    wb.write(fileOut);\r\n    fileOut.close();\r\n                  \r\n","title":"How to do new line in doc using apache POI","body":"<p>The POI website lists a technique that works for me.</p>\n\n<p><a href=\"https://poi.apache.org/spreadsheet/quick-guide.html#Using+newlines+in+cells\" rel=\"nofollow noreferrer\">https://poi.apache.org/spreadsheet/quick-guide.html#Using+newlines+in+cells</a></p>\n\n<p><strong>Using newlines in cells</strong></p>\n\n<pre><code>Workbook wb = new XSSFWorkbook();   //or new HSSFWorkbook();\nSheet sheet = wb.createSheet();\n\nRow row = sheet.createRow(2);\nCell cell = row.createCell(2);\ncell.setCellValue(\"Use \\n with word wrap on to create a new line\");\n\n//to enable newlines you need set a cell styles with wrap=true\nCellStyle cs = wb.createCellStyle();\ncs.setWrapText(true);\ncell.setCellStyle(cs);\n\n//increase row height to accomodate two lines of text\nrow.setHeightInPoints((2*sheet.getDefaultRowHeightInPoints()));\n\n//adjust column width to fit the content\nsheet.autoSizeColumn((short)2);\n\nFileOutputStream fileOut = new FileOutputStream(\"ooxml-newlines.xlsx\");\nwb.write(fileOut);\nfileOut.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2097911,"reputation":117,"user_id":1866285,"accept_rate":75,"display_name":"Nils"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568722403,"creation_date":1568722403,"answer_id":57973974,"question_id":27716957,"body_markdown":"Probably this is a bit late. I have a method where I create the headings of the table (row =0) and each heading has the heading number and then I add another paragraph with parameter text  \r\n\r\n    public  static final String[] headings= {&quot;Title&quot;, &quot;Name&quot;, &quot;Surname&quot;, &quot;Address&quot;, &quot;DOB&quot;,&quot;Notes&quot;};\r\n\r\n     &#39;&#39;&#39;\r\n    XWPFTableRow row = table.getRow(0);\r\n\r\n    for (int pos=0; pos &lt; COLUMN_NUMBER; pos++) {\r\n        addCellHeading(row, pos, headings[pos]);\r\n    }\r\n\r\n    ...\r\n\r\n    private void addCellHeading(XWPFTableRow row, Integer pos, String text){\r\n\r\n        XWPFTableCell cell = row.getCell(pos);\r\n        XWPFParagraph headingNo = cell.addParagraph();\r\n        headingNo.setAlignment(ParagraphAlignment.CENTER);\r\n        XWPFRun run = headingNo.createRun();\r\n        run.setBold(true);\r\n        run.setText(String.valueOf(pos+1) + &quot;. &quot;);\r\n\r\n        XWPFParagraph heading = cell.addParagraph();\r\n        heading.setAlignment(ParagraphAlignment.CENTER);\r\n        run = heading.createRun();\r\n        run.setBold(true);\r\n        run.setText(text);\r\n    }\r\n","title":"How to do new line in doc using apache POI","body":"<p>Probably this is a bit late. I have a method where I create the headings of the table (row =0) and each heading has the heading number and then I add another paragraph with parameter text  </p>\n\n<pre><code>public  static final String[] headings= {\"Title\", \"Name\", \"Surname\", \"Address\", \"DOB\",\"Notes\"};\n\n '''\nXWPFTableRow row = table.getRow(0);\n\nfor (int pos=0; pos &lt; COLUMN_NUMBER; pos++) {\n    addCellHeading(row, pos, headings[pos]);\n}\n\n...\n\nprivate void addCellHeading(XWPFTableRow row, Integer pos, String text){\n\n    XWPFTableCell cell = row.getCell(pos);\n    XWPFParagraph headingNo = cell.addParagraph();\n    headingNo.setAlignment(ParagraphAlignment.CENTER);\n    XWPFRun run = headingNo.createRun();\n    run.setBold(true);\n    run.setText(String.valueOf(pos+1) + \". \");\n\n    XWPFParagraph heading = cell.addParagraph();\n    heading.setAlignment(ParagraphAlignment.CENTER);\n    run = heading.createRun();\n    run.setBold(true);\n    run.setText(text);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9726288,"reputation":3,"user_id":7213123,"display_name":"hardik shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646409907,"creation_date":1646409907,"answer_id":71354058,"question_id":27716957,"body_markdown":"Please check by increasing row height.","title":"How to do new line in doc using apache POI","body":"<p>Please check by increasing row height.</p>\n"}],"owner":{"account_id":3192629,"reputation":2297,"user_id":2696569,"accept_rate":41,"display_name":"lucifer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22937,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":6,"score":5,"last_activity_date":1646409907,"creation_date":1420006323,"question_id":27716957,"body_markdown":"I am creating a table using POI in word the table is created successfully but i want to do a new line between each text  in a cell ,I am not able to do that,here is what i have done so far,\r\n\r\n\t\t\t\t\t\t\t\r\n\r\n    XWPFTable candidateTrackerTable = document.createTable();\r\n    XWPFTableRow canndidateTrackerTableRowOne =  candidateTrackerTable.getRow(0);\r\n    canndidateTrackerTableRowOne.getCell(0).setText(&quot;Presented &quot;);\r\n    canndidateTrackerTableRowOne.addNewTableCell().setText(&quot;Interview &quot;);\r\n    canndidateTrackerTableRowOne.addNewTableCell().setText(&quot;Phone &quot;);\r\n    canndidateTrackerTableRowOne.addNewTableCell().setText(&quot;Final Interview &quot;);\r\n    canndidateTrackerTableRowOne.addNewTableCell().setText(&quot;Offer &quot;);\r\n\r\n    XWPFTableRow canndidateTrackerTableRowTwo = null;\r\n    for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidateName:aMap.entrySet()){\r\n        canndidateTrackerTableRowTwo =  candidateTrackerTable.createRow();\r\n        for(String s:candidateName.getValue()){\r\n            //System.out.println(&quot;------&gt;&gt;&quot;+s);\r\n            canndidateTrackerTableRowTwo.getCell(0).setText(String.valueOf(s)+&quot;\\n&quot;);\r\n        }\r\n        for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidatePhone:bMap.entrySet()){\r\n            for(String s1:candidatePhone.getValue()){\r\n                //System.out.println(&quot;------&gt;&gt;&quot;+s1);\r\n                canndidateTrackerTableRowTwo.getCell(1).setText(String.valueOf(s1));\r\n            }\r\n            for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidateSkyped: cMap.entrySet())\r\n                for(String s2:candidateSkyped.getValue())\r\n                    canndidateTrackerTableRowTwo.getCell(2).setText(String.valueOf(s2));\r\n            for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidateOnsite : dMap.entrySet())\r\n                for(String s3:candidateOnsite.getValue())\r\n                    canndidateTrackerTableRowTwo.getCell(3).setText(String.valueOf(s3));\r\n            for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidateOffered : eMap.entrySet())\r\n                for(String s4:candidateOffered.getValue())\r\n                    canndidateTrackerTableRowTwo.getCell(4).setText(String.valueOf(s4));\r\n        }\r\n    }\t\t\r\n\r\ni want to add new line between each canndidateTrackerTableRowTwo.getCell(0).setText(String.valueOf(s)+&quot;\\n&quot;);","title":"How to do new line in doc using apache POI","body":"<p>I am creating a table using POI in word the table is created successfully but i want to do a new line between each text  in a cell ,I am not able to do that,here is what i have done so far,</p>\n\n<pre><code>XWPFTable candidateTrackerTable = document.createTable();\nXWPFTableRow canndidateTrackerTableRowOne =  candidateTrackerTable.getRow(0);\ncanndidateTrackerTableRowOne.getCell(0).setText(\"Presented \");\ncanndidateTrackerTableRowOne.addNewTableCell().setText(\"Interview \");\ncanndidateTrackerTableRowOne.addNewTableCell().setText(\"Phone \");\ncanndidateTrackerTableRowOne.addNewTableCell().setText(\"Final Interview \");\ncanndidateTrackerTableRowOne.addNewTableCell().setText(\"Offer \");\n\nXWPFTableRow canndidateTrackerTableRowTwo = null;\nfor(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidateName:aMap.entrySet()){\n    canndidateTrackerTableRowTwo =  candidateTrackerTable.createRow();\n    for(String s:candidateName.getValue()){\n        //System.out.println(\"------&gt;&gt;\"+s);\n        canndidateTrackerTableRowTwo.getCell(0).setText(String.valueOf(s)+\"\\n\");\n    }\n    for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidatePhone:bMap.entrySet()){\n        for(String s1:candidatePhone.getValue()){\n            //System.out.println(\"------&gt;&gt;\"+s1);\n            canndidateTrackerTableRowTwo.getCell(1).setText(String.valueOf(s1));\n        }\n        for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidateSkyped: cMap.entrySet())\n            for(String s2:candidateSkyped.getValue())\n                canndidateTrackerTableRowTwo.getCell(2).setText(String.valueOf(s2));\n        for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidateOnsite : dMap.entrySet())\n            for(String s3:candidateOnsite.getValue())\n                canndidateTrackerTableRowTwo.getCell(3).setText(String.valueOf(s3));\n        for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; candidateOffered : eMap.entrySet())\n            for(String s4:candidateOffered.getValue())\n                canndidateTrackerTableRowTwo.getCell(4).setText(String.valueOf(s4));\n    }\n}       \n</code></pre>\n\n<p>i want to add new line between each canndidateTrackerTableRowTwo.getCell(0).setText(String.valueOf(s)+\"\\n\");</p>\n"},{"tags":["java","android","singleton","dagger"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1412830527,"post_id":26270589,"comment_id":41215226,"body_markdown":"I believe the least bad approach uses an [`enum`](http://stackoverflow.com/q/427902/2970947).","body":"I believe the least bad approach uses an <a href=\"http://stackoverflow.com/q/427902/2970947\"><code>enum</code></a>."}],"answers":[{"tags":[],"owner":{"account_id":4877293,"reputation":6902,"user_id":3931985,"accept_rate":82,"display_name":"ekostadinov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412836257,"creation_date":1412836257,"answer_id":26271747,"question_id":26270589,"body_markdown":"This [Java best practices book][1] explains why you should enforce the Singleton property with a private\r\nconstructor or an Enum type. The chapter is quite long, so keeping it summarized:\r\n\r\nMaking a class a Singleton can\r\nmake it difficult to test its clients, as its impossible to substitute a mock implementation\r\nfor a singleton unless it implements an interface that serves as its type.\r\nBefore release 1.5, there were two ways to implement singletons. Both are\r\nbased on keeping the constructor private and exporting a public static member to\r\nprovide access to the sole instance. In one approach, the member is a final field:\r\n\r\n    // Singleton with public final field\r\n    public class Elvis {\r\n    public static final Elvis INSTANCE = new Elvis();\r\n    private Elvis() { ... }\r\n    public void leaveTheBuilding() { ... }\r\n    }\r\n\r\nIn the second approach to implementing singletons, the public member is a\r\nstatic factory method:\r\n\r\n    // Singleton with static factory\r\n    public class Elvis {\r\n    private static final Elvis INSTANCE = new Elvis();\r\n    private Elvis() { ... }\r\n    public static Elvis getInstance() { return INSTANCE; }\r\n    public void leaveTheBuilding() { ... }\r\n    }\r\n\r\nThere is a third approach to implementing Singletons. By simply\r\nmake an enum type with one element:\r\n\r\n    // Enum singleton - the preferred approach\r\n    public enum Elvis {\r\n    INSTANCE;\r\n    public void leaveTheBuilding() { ... }\r\n    }\r\n\r\nThis approach is functionally equivalent to the public field approach, except that it\r\nis more concise, provides the serialization machinery for free, and provides an\r\nironclad guarantee against multiple instantiation, even in the face of sophisticated\r\nserialization or reflection attacks. \r\n\r\n&gt;While this approach has yet to be widely\r\nadopted, a single-element enum type is the best way to implement a singleton.\r\n\r\n  [1]: http://www.amazon.com/Effective-Java-Edition-Joshua-Bloch/dp/0321356683","title":"What is the difference between the implementation of singleton on Dependency Injection frameworks (like Dagger) than the normal static singleton?","body":"<p>This <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321356683\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Java best practices book</a> explains why you should enforce the Singleton property with a private\nconstructor or an Enum type. The chapter is quite long, so keeping it summarized:</p>\n\n<p>Making a class a Singleton can\nmake it difficult to test its clients, as its impossible to substitute a mock implementation\nfor a singleton unless it implements an interface that serves as its type.\nBefore release 1.5, there were two ways to implement singletons. Both are\nbased on keeping the constructor private and exporting a public static member to\nprovide access to the sole instance. In one approach, the member is a final field:</p>\n\n<pre><code>// Singleton with public final field\npublic class Elvis {\npublic static final Elvis INSTANCE = new Elvis();\nprivate Elvis() { ... }\npublic void leaveTheBuilding() { ... }\n}\n</code></pre>\n\n<p>In the second approach to implementing singletons, the public member is a\nstatic factory method:</p>\n\n<pre><code>// Singleton with static factory\npublic class Elvis {\nprivate static final Elvis INSTANCE = new Elvis();\nprivate Elvis() { ... }\npublic static Elvis getInstance() { return INSTANCE; }\npublic void leaveTheBuilding() { ... }\n}\n</code></pre>\n\n<p>There is a third approach to implementing Singletons. By simply\nmake an enum type with one element:</p>\n\n<pre><code>// Enum singleton - the preferred approach\npublic enum Elvis {\nINSTANCE;\npublic void leaveTheBuilding() { ... }\n}\n</code></pre>\n\n<p>This approach is functionally equivalent to the public field approach, except that it\nis more concise, provides the serialization machinery for free, and provides an\nironclad guarantee against multiple instantiation, even in the face of sophisticated\nserialization or reflection attacks. </p>\n\n<blockquote>\n  <p>While this approach has yet to be widely\n  adopted, a single-element enum type is the best way to implement a singleton.</p>\n</blockquote>\n"}],"owner":{"account_id":2204128,"reputation":278,"user_id":1947750,"accept_rate":29,"display_name":"Julious Igmen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":323,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1646409889,"creation_date":1412830409,"question_id":26270589,"body_markdown":"I was just having this small conversation with a buddy and he&#39;s insisting that the singleton used for Dagger is better than making one through old-school-static-private-variables way. Not that I&#39;m sure he&#39;s wrong, I just want to clear up *why* is it better.\r\n\r\nWhat is the difference between these two implementation methods (DI vs normal static)?","title":"What is the difference between the implementation of singleton on Dependency Injection frameworks (like Dagger) than the normal static singleton?","body":"<p>I was just having this small conversation with a buddy and he's insisting that the singleton used for Dagger is better than making one through old-school-static-private-variables way. Not that I'm sure he's wrong, I just want to clear up <em>why</em> is it better.</p>\n<p>What is the difference between these two implementation methods (DI vs normal static)?</p>\n"},{"tags":["java","cryptography","rsa","blind-signature"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1533951652,"post_id":51795597,"comment_id":90548879,"body_markdown":"Your multiplications also need be followed by a `.mod(n)`","body":"Your multiplications also need be followed by a <code>.mod(n)</code>"},{"owner":{"account_id":3461687,"reputation":806,"user_id":2898586,"accept_rate":74,"display_name":"OrangeCalx01"},"score":0,"creation_date":1533953295,"post_id":51795597,"comment_id":90549091,"body_markdown":"I thought modPow already took care of the mod(n) aspect?","body":"I thought modPow already took care of the mod(n) aspect?"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1533955891,"post_id":51795597,"comment_id":90549411,"body_markdown":"No, it only takes care of it for that particular method. Every multiply, addition, etc. also needs to be taken mod n.","body":"No, it only takes care of it for that particular method. Every multiply, addition, etc. also needs to be taken mod n."},{"owner":{"account_id":301110,"reputation":98844,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":1,"creation_date":1533994288,"post_id":51795597,"comment_id":90556675,"body_markdown":"It is not clear what your problem is . What does *&quot;... there&#39;s a difference between...[a] and [b]&quot;* mean? You should clearly state the problem. I believe you are supposed to add the blinding value before the private key operation, and remove it after the private key operation. It is not supposed to persist. You are also missing several important elements to a signature scheme. You should avoid using the code as-is, and probably read [Bernstein&#39;s paper](https://cr.yp.to/sigs/rwsota-20080131.pdf).","body":"It is not clear what your problem is . What does <i>&quot;... there&#39;s a difference between...[a] and [b]&quot;</i> mean? You should clearly state the problem. I believe you are supposed to add the blinding value before the private key operation, and remove it after the private key operation. It is not supposed to persist. You are also missing several important elements to a signature scheme. You should avoid using the code as-is, and probably read <a href=\"https://cr.yp.to/sigs/rwsota-20080131.pdf\" rel=\"nofollow noreferrer\">Bernstein&#39;s paper</a>."},{"owner":{"account_id":3461687,"reputation":806,"user_id":2898586,"accept_rate":74,"display_name":"OrangeCalx01"},"score":0,"creation_date":1534030387,"post_id":51795597,"comment_id":90564976,"body_markdown":"I&#39;m literally taking my info from Wikipedia: https://en.wikipedia.org/wiki/Blind_signature#cite_note-GoldwasserBellare-2 - And what I mean by the difference between [a] and [b] is that the signature as if I signed without a blinding factor is vastly different from the blinded, then unblinded, signature at the bottom of my output listing. Aren&#39;t they supposed to be the same?","body":"I&#39;m literally taking my info from Wikipedia: <a href=\"https://en.wikipedia.org/wiki/Blind_signature#cite_note-GoldwasserBellare-2\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a> - And what I mean by the difference between [a] and [b] is that the signature as if I signed without a blinding factor is vastly different from the blinded, then unblinded, signature at the bottom of my output listing. Aren&#39;t they supposed to be the same?"}],"owner":{"account_id":3461687,"reputation":806,"user_id":2898586,"accept_rate":74,"display_name":"OrangeCalx01"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646409746,"creation_date":1533949383,"question_id":51795597,"body_markdown":"I&#39;m working through the wiki on RSA blind signatures. Here are my methods as I understand them, where r is the blinding factor, m is the message, d is the private key, e is the exponent, and n is public key:\r\n\r\n    public BigInteger sign(BigInteger m, BigInteger d, BigInteger n)\r\n    {\r\n        return m.modPow(d, n); \r\n    }\r\n    \r\n    public BigInteger blindMessage(BigInteger m, BigInteger r, BigInteger e, BigInteger n)\r\n    {\r\n        return m.multiply(r.modPow(e, n));\r\n    }\r\n\r\n    public BigInteger unblindMessage(BigInteger m, BigInteger r, BigInteger n)\r\n    {\r\n        return m.multiply(r.modPow(BigInteger.ONE.negate(), n));  \r\n    }\r\n\r\nI&#39;ve verified my actual RSA implementation works already; however, there&#39;s a difference between the &quot;normal&quot; signature and the blinded signature. I&#39;m worried I didn&#39;t code the equations correctly, because I&#39;ve never worked with BigIntegers before. \r\n\r\nMy demo code is: \r\n\r\n        RSA rsa = new RSA();\r\n        RSAobject alice = rsa.keygen(32);\r\n        RSAobject bank = rsa.keygen(32);;\r\n        BigInteger message = new BigInteger(&quot;123&quot;);\r\n        System.out.println(&quot;Message: &quot; + message.toString());\r\n        BigInteger cyphertext = rsa.encrypt(message, alice.n, alice.e);\r\n        System.out.println(&quot;Cyphertext: &quot; + cyphertext.toString());\r\n        BigInteger decrypted = rsa.decrypt(cyphertext, alice.d, alice.n);\r\n        System.out.println(&quot;Plaintext: &quot; + decrypted.toString());\r\n        BigInteger normalSign = rsa.sign(message, bank.d, bank.n);\r\n        System.out.println(&quot;Normal Signature: &quot; + normalSign.toString());\r\n        BigInteger blindingFactor = rsa.getBlindingFactor(alice.n);\r\n        System.out.println(&quot;Blinding factor: &quot; + blindingFactor.toString());\r\n        BigInteger blindedMessage = rsa.blindMessage(message, blindingFactor, alice.e, alice.n);\r\n        System.out.println(&quot;Blinded Message: &quot; + blindedMessage.toString());\r\n        BigInteger blindedMessageSignature = rsa.sign(blindedMessage, bank.d, bank.n);\r\n        System.out.println(&quot;Blinded Message Signature: &quot; + blindedMessageSignature.toString());\r\n        BigInteger unblindedMessageSignature = rsa.unblindMessage(blindedMessage, blindingFactor, alice.n);\r\n        System.out.println(&quot;Unblinded Message Signature: &quot; + unblindedMessageSignature.toString());\r\n\r\nAnd it outputs the following: \r\n\r\n    Message: 123\r\n    Cyphertext: 22707724\r\n    Plaintext: 123\r\n    Normal Signature: 13584112\r\n    Blinding factor: 14036619\r\n    Blinded Message: 689947713\r\n    Blinded Message Signature: 7031325\r\n    Unblinded Message Signature: 20354580078429051\r\n\r\nAm I doing anything &quot;wrong&quot; here, or is that how they&#39;re supposed to look? ","title":"Is this the correct method to unblind an RSA signature?","body":"<p>I'm working through the wiki on RSA blind signatures. Here are my methods as I understand them, where r is the blinding factor, m is the message, d is the private key, e is the exponent, and n is public key:</p>\n\n<pre><code>public BigInteger sign(BigInteger m, BigInteger d, BigInteger n)\n{\n    return m.modPow(d, n); \n}\n\npublic BigInteger blindMessage(BigInteger m, BigInteger r, BigInteger e, BigInteger n)\n{\n    return m.multiply(r.modPow(e, n));\n}\n\npublic BigInteger unblindMessage(BigInteger m, BigInteger r, BigInteger n)\n{\n    return m.multiply(r.modPow(BigInteger.ONE.negate(), n));  \n}\n</code></pre>\n\n<p>I've verified my actual RSA implementation works already; however, there's a difference between the \"normal\" signature and the blinded signature. I'm worried I didn't code the equations correctly, because I've never worked with BigIntegers before. </p>\n\n<p>My demo code is: </p>\n\n<pre><code>    RSA rsa = new RSA();\n    RSAobject alice = rsa.keygen(32);\n    RSAobject bank = rsa.keygen(32);;\n    BigInteger message = new BigInteger(\"123\");\n    System.out.println(\"Message: \" + message.toString());\n    BigInteger cyphertext = rsa.encrypt(message, alice.n, alice.e);\n    System.out.println(\"Cyphertext: \" + cyphertext.toString());\n    BigInteger decrypted = rsa.decrypt(cyphertext, alice.d, alice.n);\n    System.out.println(\"Plaintext: \" + decrypted.toString());\n    BigInteger normalSign = rsa.sign(message, bank.d, bank.n);\n    System.out.println(\"Normal Signature: \" + normalSign.toString());\n    BigInteger blindingFactor = rsa.getBlindingFactor(alice.n);\n    System.out.println(\"Blinding factor: \" + blindingFactor.toString());\n    BigInteger blindedMessage = rsa.blindMessage(message, blindingFactor, alice.e, alice.n);\n    System.out.println(\"Blinded Message: \" + blindedMessage.toString());\n    BigInteger blindedMessageSignature = rsa.sign(blindedMessage, bank.d, bank.n);\n    System.out.println(\"Blinded Message Signature: \" + blindedMessageSignature.toString());\n    BigInteger unblindedMessageSignature = rsa.unblindMessage(blindedMessage, blindingFactor, alice.n);\n    System.out.println(\"Unblinded Message Signature: \" + unblindedMessageSignature.toString());\n</code></pre>\n\n<p>And it outputs the following: </p>\n\n<pre><code>Message: 123\nCyphertext: 22707724\nPlaintext: 123\nNormal Signature: 13584112\nBlinding factor: 14036619\nBlinded Message: 689947713\nBlinded Message Signature: 7031325\nUnblinded Message Signature: 20354580078429051\n</code></pre>\n\n<p>Am I doing anything \"wrong\" here, or is that how they're supposed to look? </p>\n"},{"tags":["javascript","java","cryptography","bouncycastle","blind-signature"],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639407380,"creation_date":1639390587,"answer_id":70333026,"question_id":70324926,"body_markdown":"The [*blind-signature*][7] library used in the NodeJS code for blind signing implements the process described [here][1]: \r\n- [`BlindSignature.blind()`][2] generates the SHA256 hash of the message and determines the blind message m&#39; = m * r&lt;sup&gt;e&lt;/sup&gt; mod N. \r\n- [`BlindSignature.sign()`][3] calculates the blind signature s&#39; = (m&#39;)&lt;sup&gt;d&lt;/sup&gt; mod N. \r\n- [`BlindSignature.unblind()`][4] determines the unblind signature s = s&#39; * r&lt;sup&gt;-1&lt;/sup&gt; mod N. \r\n- [`BlindSignature.verify()`][5] decrypts the unblind signature (s&lt;sup&gt;e&lt;/sup&gt;) and compares the result with the hashed message. If both are the same, the verification is successful.\r\n\r\nNo padding takes place in this process.\r\n\r\nIn the Java code, the implementation of signing the blind message in `signConcealedMessage()` is functionally identical to `BlindSignature.sign()`.&lt;br&gt;\r\nIn contrast, the verification in the Java code is *incompatible* with the above process because the Java code uses PSS as padding during verification.&lt;br&gt;\r\nA compatible Java code would be for instance:\r\n\r\n```java\r\nRSAEngine engine = new RSAEngine();\r\nengine.init(false, rsaKeyPair.getPublic());\r\nbyte[] signatureDecrypted = engine.processBlock(revealedSignatureBytes, 0, revealedSignatureBytes.length);  // calculates s^e          \r\nbyte[] messageHashed = MessageDigest.getInstance(&quot;SHA-256&quot;).digest(revealedMessageBytes);\r\nSystem.out.println(Arrays.equals(messageHashed, signatureDecrypted)); // verification successfull, if s^e identical with the SHA256 hash of the message\r\n```\r\n\r\nWith this code verification is successful.\r\n\r\n-------------\r\n\r\nThere seems to be an RFC in the pipeline for blinded signing, which indeed uses an extension of PSS, see [draft-irtf-cfrg-rsa-blind-signatures][8].&lt;br&gt;\r\nBouncyCastle also provides an implementation for blind signing, see e.g. [`RSABlindingEngine`][6], which is applied by the [referenced Java library][9].\r\n\r\n[1]: https://en.wikipedia.org/wiki/Blind_signature#Blind_RSA_signatures\r\n[2]: https://github.com/kevinejohn/blind-signatures/blob/master/rsablind.js#L30\r\n[3]: https://github.com/kevinejohn/blind-signatures/blob/master/rsablind.js#L55\r\n[4]: https://github.com/kevinejohn/blind-signatures/blob/master/rsablind.js#L62\r\n[5]: https://github.com/kevinejohn/blind-signatures/blob/master/rsablind.js#L70\r\n[6]: https://www.bouncycastle.org/docs/docs1.5on/org/bouncycastle/crypto/engines/RSABlindingEngine.html\r\n[7]: https://github.com/kevinejohn/blind-signatures\r\n[8]: https://cfrg.github.io/draft-irtf-cfrg-blind-signatures/draft-irtf-cfrg-rsa-blind-signatures.html\r\n[9]: https://gist.github.com/chrishaly/c4ec3d99010c515cbf27cfcdaa86e569\r\n","title":"Chaum blind signature with blinding in JavaScript and verifying in Java","body":"<p>The <a href=\"https://github.com/kevinejohn/blind-signatures\" rel=\"nofollow noreferrer\"><em>blind-signature</em></a> library used in the NodeJS code for blind signing implements the process described <a href=\"https://en.wikipedia.org/wiki/Blind_signature#Blind_RSA_signatures\" rel=\"nofollow noreferrer\">here</a>:</p>\n<ul>\n<li><a href=\"https://github.com/kevinejohn/blind-signatures/blob/master/rsablind.js#L30\" rel=\"nofollow noreferrer\"><code>BlindSignature.blind()</code></a> generates the SHA256 hash of the message and determines the blind message m' = m * r<sup>e</sup> mod N.</li>\n<li><a href=\"https://github.com/kevinejohn/blind-signatures/blob/master/rsablind.js#L55\" rel=\"nofollow noreferrer\"><code>BlindSignature.sign()</code></a> calculates the blind signature s' = (m')<sup>d</sup> mod N.</li>\n<li><a href=\"https://github.com/kevinejohn/blind-signatures/blob/master/rsablind.js#L62\" rel=\"nofollow noreferrer\"><code>BlindSignature.unblind()</code></a> determines the unblind signature s = s' * r<sup>-1</sup> mod N.</li>\n<li><a href=\"https://github.com/kevinejohn/blind-signatures/blob/master/rsablind.js#L70\" rel=\"nofollow noreferrer\"><code>BlindSignature.verify()</code></a> decrypts the unblind signature (s<sup>e</sup>) and compares the result with the hashed message. If both are the same, the verification is successful.</li>\n</ul>\n<p>No padding takes place in this process.</p>\n<p>In the Java code, the implementation of signing the blind message in <code>signConcealedMessage()</code> is functionally identical to <code>BlindSignature.sign()</code>.<br>\nIn contrast, the verification in the Java code is <em>incompatible</em> with the above process because the Java code uses PSS as padding during verification.<br>\nA compatible Java code would be for instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>RSAEngine engine = new RSAEngine();\nengine.init(false, rsaKeyPair.getPublic());\nbyte[] signatureDecrypted = engine.processBlock(revealedSignatureBytes, 0, revealedSignatureBytes.length);  // calculates s^e          \nbyte[] messageHashed = MessageDigest.getInstance(&quot;SHA-256&quot;).digest(revealedMessageBytes);\nSystem.out.println(Arrays.equals(messageHashed, signatureDecrypted)); // verification successfull, if s^e identical with the SHA256 hash of the message\n</code></pre>\n<p>With this code verification is successful.</p>\n<hr />\n<p>There seems to be an RFC in the pipeline for blinded signing, which indeed uses an extension of PSS, see <a href=\"https://cfrg.github.io/draft-irtf-cfrg-blind-signatures/draft-irtf-cfrg-rsa-blind-signatures.html\" rel=\"nofollow noreferrer\">draft-irtf-cfrg-rsa-blind-signatures</a>.<br>\nBouncyCastle also provides an implementation for blind signing, see e.g. <a href=\"https://www.bouncycastle.org/docs/docs1.5on/org/bouncycastle/crypto/engines/RSABlindingEngine.html\" rel=\"nofollow noreferrer\"><code>RSABlindingEngine</code></a>, which is applied by the <a href=\"https://gist.github.com/chrishaly/c4ec3d99010c515cbf27cfcdaa86e569\" rel=\"nofollow noreferrer\">referenced Java library</a>.</p>\n"}],"owner":{"account_id":18099991,"reputation":43,"user_id":13157942,"display_name":"oliverd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70333026,"answer_count":1,"score":4,"last_activity_date":1646409674,"creation_date":1639322724,"question_id":70324926,"body_markdown":"I&#39;m experimenting with Chaum&#39;s blind signature, and what I&#39;m trying to do is have the blinding and un-blinding done in JavaScript, and signing and verifying in Java (with bouncy castle). For the Java side, my source is [this][1], and for JavaScript, I found [blind-signatures][2]. I&#39;ve created two small codes to play with, for the Java side:\r\n\r\n```java\r\npackage crypto;\r\n\r\nimport org.bouncycastle.crypto.AsymmetricCipherKeyPair;\r\nimport org.bouncycastle.crypto.digests.SHA256Digest;\r\nimport org.bouncycastle.crypto.engines.RSAEngine;\r\nimport org.bouncycastle.crypto.generators.RSAKeyPairGenerator;\r\nimport org.bouncycastle.crypto.params.AsymmetricKeyParameter;\r\nimport org.bouncycastle.crypto.params.RSAKeyGenerationParameters;\r\nimport org.bouncycastle.crypto.params.RSAKeyParameters;\r\nimport org.bouncycastle.crypto.signers.PSSSigner;\r\nimport org.bouncycastle.crypto.util.PrivateKeyInfoFactory;\r\nimport org.bouncycastle.crypto.util.SubjectPublicKeyInfoFactory;\r\nimport org.bouncycastle.openssl.jcajce.JcaPEMWriter;\r\nimport org.bouncycastle.util.io.pem.PemObject;\r\n\r\nimport java.io.IOException;\r\nimport java.io.StringWriter;\r\nimport java.math.BigInteger;\r\nimport java.security.SecureRandom;\r\nimport java.util.Base64;\r\nimport java.util.Scanner;\r\n\r\npublic class RsaConcealedMessageTest {\r\n    public static void main(String[] args) {\r\n        AsymmetricCipherKeyPair rsaKeyPair = generateKeyPair();\r\n        Scanner userInput = new Scanner(System.in);\r\n\r\n        try {\r\n            printKeyPairPems(rsaKeyPair);\r\n\r\n            // Producing signature on concealed message\r\n            System.out.print(&quot;Concealed message (in base64)?&quot;);\r\n            String concealedMessageBase64 = userInput.nextLine();\r\n            byte[] concealedMessageBytes = Base64.getDecoder().decode(concealedMessageBase64);\r\n            byte[] signatureOnConcealedMessage = signConcealedMessage(concealedMessageBytes, rsaKeyPair.getPrivate());\r\n            System.out.println(&quot;Signature on concealed message (base64): &quot; + Base64.getEncoder().encodeToString(signatureOnConcealedMessage));\r\n\r\n\r\n            // Verifying revealed signature on revealed message\r\n            System.out.print(&quot;Revealed message (in base64)?&quot;);\r\n            String revealedMessageBase64 = userInput.nextLine();\r\n            System.out.print(&quot;Revealed signature (in base64)?&quot;);\r\n            String revealedSignatureBase64 = userInput.nextLine();\r\n\r\n            byte[] revealedMessageBytes = Base64.getDecoder().decode(revealedMessageBase64);\r\n            System.out.println(&quot;Revealed message is: &quot; + new String(revealedMessageBytes));\r\n            byte[] revealedSignatureBytes = Base64.getDecoder().decode(revealedSignatureBase64);\r\n\r\n            PSSSigner signer = new PSSSigner(new RSAEngine(), new SHA256Digest(), 0);\r\n            signer.init(false, rsaKeyPair.getPublic());\r\n\r\n            signer.update(revealedMessageBytes, 0, revealedMessageBytes.length);\r\n            boolean isVerified = signer.verifySignature(revealedSignatureBytes);\r\n            System.out.println(&quot;Revealed signature is verified on revealed message: &quot; + isVerified);\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static AsymmetricCipherKeyPair generateKeyPair() {\r\n        RSAKeyPairGenerator generator = new RSAKeyPairGenerator();\r\n\r\n        BigInteger publicExponent = new BigInteger(&quot;10001&quot;, 16);\r\n        SecureRandom random = new SecureRandom();\r\n        RSAKeyGenerationParameters keyGenParams = new RSAKeyGenerationParameters(\r\n                publicExponent, random, 4096, 80\r\n        );\r\n\r\n        generator.init(keyGenParams);\r\n        return generator.generateKeyPair();\r\n    }\r\n\r\n    private static void printKeyPairPems(AsymmetricCipherKeyPair keyPair) throws IOException {\r\n        RSAKeyParameters publicKey = (RSAKeyParameters) keyPair.getPublic();\r\n        byte[] publicKeyBytes = SubjectPublicKeyInfoFactory.createSubjectPublicKeyInfo(publicKey).getEncoded();\r\n        printKeyPem(&quot;PUBLIC KEY&quot;, publicKeyBytes);\r\n\r\n        RSAKeyParameters privateKey = (RSAKeyParameters) keyPair.getPrivate();\r\n        byte[] privateKeyBytes = PrivateKeyInfoFactory.createPrivateKeyInfo(privateKey).getEncoded();\r\n        printKeyPem(&quot;PRIVATE KEY&quot;, privateKeyBytes);\r\n    }\r\n\r\n    private static void printKeyPem(String keyType, byte[] keyBytes) throws IOException {\r\n        PemObject pemObject = new PemObject(keyType, keyBytes);\r\n        StringWriter keyStringWriter = new StringWriter();\r\n        JcaPEMWriter pemWriter = new JcaPEMWriter(keyStringWriter);\r\n        pemWriter.writeObject(pemObject);\r\n        pemWriter.close();\r\n\r\n        System.out.println(keyType + &quot;: &quot; + keyStringWriter.toString().replace(&quot;\\n&quot;, &quot;&quot;));\r\n    }\r\n\r\n    private static byte[] signConcealedMessage(byte[] concealedMessage, AsymmetricKeyParameter privateKey) {\r\n        RSAEngine engine = new RSAEngine();\r\n        engine.init(true, privateKey);\r\n\r\n        return engine.processBlock(concealedMessage, 0, concealedMessage.length);\r\n    }\r\n}\r\n```\r\nThe above will generate a keypair, prints the public part to stdout and reads from stdin the blinded message and then the un-blinded message and signature.\r\nAnd for the JavaScript (Node.js) side, I have this:\r\n\r\n```javascript\r\nconst BigInteger = require(&#39;jsbn&#39;).BigInteger;\r\nconst BlindSignature = require(&#39;blind-signatures&#39;);\r\nconst NodeRSA = require(&#39;node-rsa&#39;);\r\nconst prompt = require(&#39;prompt-sync&#39;)();\r\n\r\nconst publicKeyInput = prompt(&quot;Public key in PEM?&quot;);\r\nconst publicKey = new NodeRSA(publicKeyInput);\r\n\r\n// Concealing message\r\nconst message = &quot;The quick brown fox jumps over the lazy dog! Hello World!&quot;;\r\nconst concealingResult = BlindSignature.blind(\r\n    {\r\n        message: message,\r\n        N: publicKey.keyPair.n.toString(),\r\n        E: publicKey.keyPair.e.toString(),\r\n    }\r\n);\r\n\r\nconst blindedHexStr = concealingResult.blinded.toString(16);\r\nconst blindedBuffer = Buffer.from(blindedHexStr, &#39;hex&#39;);\r\n\r\nconsole.log(`\\nConcealed message (base64): ${blindedBuffer.toString(&#39;base64&#39;)}`);\r\nconsole.log(`\\nr: ${concealingResult.r.toString(16)}`);\r\n\r\n// Getting signature on concealed message and producing revealed signature\r\nconst signatureOnConcealedMessageBase64 = prompt(&quot;Signature on concealed message (base64)?&quot;);\r\nconst signatureOnConcealedMessageBuffer = Buffer.from(signatureOnConcealedMessageBase64, &#39;base64&#39;);\r\nconst signatureOnConcealedMessageHex = signatureOnConcealedMessageBuffer.toString(&#39;hex&#39;);\r\nconst signatureOnConcealedMessage = new BigInteger(signatureOnConcealedMessageHex, 16)\r\n\r\nconst signatureOnRevealedMessage = BlindSignature.unblind({\r\n    signed: signatureOnConcealedMessage,\r\n    N: publicKey.keyPair.n.toString(),\r\n    r: concealingResult.r,\r\n});\r\n\r\nconst revealedMessageBuffer = Buffer.from(message, &#39;utf8&#39;);\r\nconst revealedMessageBase64 = revealedMessageBuffer.toString(&#39;base64&#39;);\r\nconsole.log(`\\nRevealed message (base64): ${revealedMessageBase64}`);\r\n\r\nconst signatureOnRevealedMessageHex = signatureOnRevealedMessage.toString(16);\r\nconst signatureOnRevealedMessageBuffer = Buffer.from(signatureOnRevealedMessageHex, &#39;hex&#39;);\r\nconst signatureOnRevealedMessageBase64 = signatureOnRevealedMessageBuffer.toString(&#39;base64&#39;);\r\nconsole.log(`\\nSignature on revealed message (base64): ${signatureOnRevealedMessageBase64}`);\r\n\r\n```\r\nThis reads the public key, generates the blinded message, and does the un-blinding.\r\n\r\nThe verification part of the Java code fails, and don&#39;t really know why. Does anyone have any idea?\r\n\r\n  [1]: https://gist.github.com/chrishaly/c4ec3d99010c515cbf27cfcdaa86e569\r\n  [2]: https://github.com/kevinejohn/blind-signatures","title":"Chaum blind signature with blinding in JavaScript and verifying in Java","body":"<p>I'm experimenting with Chaum's blind signature, and what I'm trying to do is have the blinding and un-blinding done in JavaScript, and signing and verifying in Java (with bouncy castle). For the Java side, my source is <a href=\"https://gist.github.com/chrishaly/c4ec3d99010c515cbf27cfcdaa86e569\" rel=\"nofollow noreferrer\">this</a>, and for JavaScript, I found <a href=\"https://github.com/kevinejohn/blind-signatures\" rel=\"nofollow noreferrer\">blind-signatures</a>. I've created two small codes to play with, for the Java side:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package crypto;\n\nimport org.bouncycastle.crypto.AsymmetricCipherKeyPair;\nimport org.bouncycastle.crypto.digests.SHA256Digest;\nimport org.bouncycastle.crypto.engines.RSAEngine;\nimport org.bouncycastle.crypto.generators.RSAKeyPairGenerator;\nimport org.bouncycastle.crypto.params.AsymmetricKeyParameter;\nimport org.bouncycastle.crypto.params.RSAKeyGenerationParameters;\nimport org.bouncycastle.crypto.params.RSAKeyParameters;\nimport org.bouncycastle.crypto.signers.PSSSigner;\nimport org.bouncycastle.crypto.util.PrivateKeyInfoFactory;\nimport org.bouncycastle.crypto.util.SubjectPublicKeyInfoFactory;\nimport org.bouncycastle.openssl.jcajce.JcaPEMWriter;\nimport org.bouncycastle.util.io.pem.PemObject;\n\nimport java.io.IOException;\nimport java.io.StringWriter;\nimport java.math.BigInteger;\nimport java.security.SecureRandom;\nimport java.util.Base64;\nimport java.util.Scanner;\n\npublic class RsaConcealedMessageTest {\n    public static void main(String[] args) {\n        AsymmetricCipherKeyPair rsaKeyPair = generateKeyPair();\n        Scanner userInput = new Scanner(System.in);\n\n        try {\n            printKeyPairPems(rsaKeyPair);\n\n            // Producing signature on concealed message\n            System.out.print(&quot;Concealed message (in base64)?&quot;);\n            String concealedMessageBase64 = userInput.nextLine();\n            byte[] concealedMessageBytes = Base64.getDecoder().decode(concealedMessageBase64);\n            byte[] signatureOnConcealedMessage = signConcealedMessage(concealedMessageBytes, rsaKeyPair.getPrivate());\n            System.out.println(&quot;Signature on concealed message (base64): &quot; + Base64.getEncoder().encodeToString(signatureOnConcealedMessage));\n\n\n            // Verifying revealed signature on revealed message\n            System.out.print(&quot;Revealed message (in base64)?&quot;);\n            String revealedMessageBase64 = userInput.nextLine();\n            System.out.print(&quot;Revealed signature (in base64)?&quot;);\n            String revealedSignatureBase64 = userInput.nextLine();\n\n            byte[] revealedMessageBytes = Base64.getDecoder().decode(revealedMessageBase64);\n            System.out.println(&quot;Revealed message is: &quot; + new String(revealedMessageBytes));\n            byte[] revealedSignatureBytes = Base64.getDecoder().decode(revealedSignatureBase64);\n\n            PSSSigner signer = new PSSSigner(new RSAEngine(), new SHA256Digest(), 0);\n            signer.init(false, rsaKeyPair.getPublic());\n\n            signer.update(revealedMessageBytes, 0, revealedMessageBytes.length);\n            boolean isVerified = signer.verifySignature(revealedSignatureBytes);\n            System.out.println(&quot;Revealed signature is verified on revealed message: &quot; + isVerified);\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static AsymmetricCipherKeyPair generateKeyPair() {\n        RSAKeyPairGenerator generator = new RSAKeyPairGenerator();\n\n        BigInteger publicExponent = new BigInteger(&quot;10001&quot;, 16);\n        SecureRandom random = new SecureRandom();\n        RSAKeyGenerationParameters keyGenParams = new RSAKeyGenerationParameters(\n                publicExponent, random, 4096, 80\n        );\n\n        generator.init(keyGenParams);\n        return generator.generateKeyPair();\n    }\n\n    private static void printKeyPairPems(AsymmetricCipherKeyPair keyPair) throws IOException {\n        RSAKeyParameters publicKey = (RSAKeyParameters) keyPair.getPublic();\n        byte[] publicKeyBytes = SubjectPublicKeyInfoFactory.createSubjectPublicKeyInfo(publicKey).getEncoded();\n        printKeyPem(&quot;PUBLIC KEY&quot;, publicKeyBytes);\n\n        RSAKeyParameters privateKey = (RSAKeyParameters) keyPair.getPrivate();\n        byte[] privateKeyBytes = PrivateKeyInfoFactory.createPrivateKeyInfo(privateKey).getEncoded();\n        printKeyPem(&quot;PRIVATE KEY&quot;, privateKeyBytes);\n    }\n\n    private static void printKeyPem(String keyType, byte[] keyBytes) throws IOException {\n        PemObject pemObject = new PemObject(keyType, keyBytes);\n        StringWriter keyStringWriter = new StringWriter();\n        JcaPEMWriter pemWriter = new JcaPEMWriter(keyStringWriter);\n        pemWriter.writeObject(pemObject);\n        pemWriter.close();\n\n        System.out.println(keyType + &quot;: &quot; + keyStringWriter.toString().replace(&quot;\\n&quot;, &quot;&quot;));\n    }\n\n    private static byte[] signConcealedMessage(byte[] concealedMessage, AsymmetricKeyParameter privateKey) {\n        RSAEngine engine = new RSAEngine();\n        engine.init(true, privateKey);\n\n        return engine.processBlock(concealedMessage, 0, concealedMessage.length);\n    }\n}\n</code></pre>\n<p>The above will generate a keypair, prints the public part to stdout and reads from stdin the blinded message and then the un-blinded message and signature.\nAnd for the JavaScript (Node.js) side, I have this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const BigInteger = require('jsbn').BigInteger;\nconst BlindSignature = require('blind-signatures');\nconst NodeRSA = require('node-rsa');\nconst prompt = require('prompt-sync')();\n\nconst publicKeyInput = prompt(&quot;Public key in PEM?&quot;);\nconst publicKey = new NodeRSA(publicKeyInput);\n\n// Concealing message\nconst message = &quot;The quick brown fox jumps over the lazy dog! Hello World!&quot;;\nconst concealingResult = BlindSignature.blind(\n    {\n        message: message,\n        N: publicKey.keyPair.n.toString(),\n        E: publicKey.keyPair.e.toString(),\n    }\n);\n\nconst blindedHexStr = concealingResult.blinded.toString(16);\nconst blindedBuffer = Buffer.from(blindedHexStr, 'hex');\n\nconsole.log(`\\nConcealed message (base64): ${blindedBuffer.toString('base64')}`);\nconsole.log(`\\nr: ${concealingResult.r.toString(16)}`);\n\n// Getting signature on concealed message and producing revealed signature\nconst signatureOnConcealedMessageBase64 = prompt(&quot;Signature on concealed message (base64)?&quot;);\nconst signatureOnConcealedMessageBuffer = Buffer.from(signatureOnConcealedMessageBase64, 'base64');\nconst signatureOnConcealedMessageHex = signatureOnConcealedMessageBuffer.toString('hex');\nconst signatureOnConcealedMessage = new BigInteger(signatureOnConcealedMessageHex, 16)\n\nconst signatureOnRevealedMessage = BlindSignature.unblind({\n    signed: signatureOnConcealedMessage,\n    N: publicKey.keyPair.n.toString(),\n    r: concealingResult.r,\n});\n\nconst revealedMessageBuffer = Buffer.from(message, 'utf8');\nconst revealedMessageBase64 = revealedMessageBuffer.toString('base64');\nconsole.log(`\\nRevealed message (base64): ${revealedMessageBase64}`);\n\nconst signatureOnRevealedMessageHex = signatureOnRevealedMessage.toString(16);\nconst signatureOnRevealedMessageBuffer = Buffer.from(signatureOnRevealedMessageHex, 'hex');\nconst signatureOnRevealedMessageBase64 = signatureOnRevealedMessageBuffer.toString('base64');\nconsole.log(`\\nSignature on revealed message (base64): ${signatureOnRevealedMessageBase64}`);\n\n</code></pre>\n<p>This reads the public key, generates the blinded message, and does the un-blinding.</p>\n<p>The verification part of the Java code fails, and don't really know why. Does anyone have any idea?</p>\n"},{"tags":["java","spring-boot","caching","cloud","spring-cache"],"answers":[{"tags":[],"owner":{"account_id":165129,"reputation":1388,"user_id":388317,"accept_rate":0,"display_name":"Christian Ullenboom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646383749,"creation_date":1646383749,"answer_id":71348773,"question_id":71346860,"body_markdown":"You are mixing the same cache with different key types. I would suggest using a key generator, like\r\n\r\n    @Cacheable(cacheNames = &quot;mycache&quot;, key = &quot;#object.id&quot;)\r\n    public Object myMethod( Object object )\r\n\r\nOtherwise, it will not work because the equals-method can never return true for different types, like `CompanyDetails` and `SimpleKey`.","title":"How should I implement caching using Spring Boot for crud operations","body":"<p>You are mixing the same cache with different key types. I would suggest using a key generator, like</p>\n<pre><code>@Cacheable(cacheNames = &quot;mycache&quot;, key = &quot;#object.id&quot;)\npublic Object myMethod( Object object )\n</code></pre>\n<p>Otherwise, it will not work because the equals-method can never return true for different types, like <code>CompanyDetails</code> and <code>SimpleKey</code>.</p>\n"},{"tags":[],"owner":{"account_id":14670261,"reputation":46,"user_id":10594918,"display_name":"Monika Singh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646409640,"creation_date":1646409215,"answer_id":71353923,"question_id":71346860,"body_markdown":"As already mentioned above, you can not use same cacheName for different return type functions.\r\n\r\nYou can define custom cache key to resolve your problem. \r\n\r\nI would suggest something like : \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n      @NotNull\r\n      @Cacheable(cacheNames = {&quot;usersCache&quot;}, key = &quot;{#id}&quot;)\r\n      Optional&lt;User&gt; getUser(@NotNull Long id, @NotNull CompanyDetails companyDetails);\r\n\r\n      @NotNull\r\n      @Cacheable(cacheNames = {&quot;usersCache&quot;}, key = &quot;{#key}&quot;)\r\n      Optional&lt;User&gt; getUser(@NotNull String key, @NotNull CompanyDetails companyDetails);\r\n\r\n      @NotNull\r\n      @Cacheable(cacheNames = {&quot;pageableUsersCache&quot;}, key = &quot;{#companyDetails.id,#offset,#limit}&quot;)\r\n      Pageable&lt;User&gt; getUsers(@NotNull CompanyDetails companyDetails, @NotNull Long offset, @NotNull Long limit);\r\n\r\n      @NotNull\r\n      @Cacheable(cacheNames = {&quot;userListCache&quot;}, key = &quot;{#companyDetails.id}&quot;)\r\n      List&lt;User&gt; getUsers(@NotNull CompanyDetails companyDetails);\r\n\r\n      @NotNull\r\n      Optional&lt;UserDetails&gt; createUser(@NotNull final UserRequest request,      @NotNull CompanyDetails companyDetails);\r\n      \r\n     /**\r\n       * If you want to cache user when it is created then you need to change the signature of your function to \r\n       * return Optional&lt;User&gt;\r\n       */\r\n      @NotNull\r\n      @CachePut(cacheNames = {&quot;usersCache&quot;}, key = &quot;{#request.id}&quot;)\r\n      Optional&lt;User&gt; createUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\r\n\r\n      @NotNull\r\n      // CachePut will update the cache for defined key and you don&#39;t have to manage eviction\r\n      @CachePut(cacheNames = {&quot;usersCache&quot;}, key = &quot;{#request.id}&quot;)\r\n      @CacheEvict(cacheNames = {&quot;userListCache&quot;}, key = &quot;{#companyDetails.id}&quot;)\r\n      Optional&lt;User&gt; updateUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\r\n\r\n      @NotNull\r\n      // This should evict both the caches as listed based on the defined key\r\n      @Caching(evict = {\r\n              @CacheEvict(cacheNames = {&quot;usersCache&quot;}, key = &quot;{#id}&quot;),\r\n              @CacheEvict(cacheNames = {&quot;userListCache&quot;}, key = &quot;{#companyDetails.id}&quot;)})\r\n      Optional&lt;User&gt; deleteUser(@NotNull final Long id, @NotNull CompanyDetails companyDetails);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nFor `pageableUsersCache` it will not be easy to just evict the cache upon user deletion or update as you need to have the knowledge of full key to delete it. Or you can define custom annotation which can delete keys by a pattern like &quot;companyDetails.id*&quot;.\r\nOtherwise, you can delete all cache entries for `pageableUsersCache` by using : \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n      @Caching(evict = {\r\n              @CacheEvict(cacheNames = {&quot;usersCache&quot;}, key = &quot;{#id}&quot;),\r\n              @CacheEvict(cacheNames = {&quot;userListCache&quot;}, key = &quot;{#companyDetails.id}&quot;),\r\n              @CacheEvict(cacheNames = {&quot;pageableUsersCache&quot;}, allEntries = true)})\r\n      Optional&lt;User&gt; deleteUser(@NotNull final Long id, @NotNull CompanyDetails companyDetails);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How should I implement caching using Spring Boot for crud operations","body":"<p>As already mentioned above, you can not use same cacheName for different return type functions.</p>\n<p>You can define custom cache key to resolve your problem.</p>\n<p>I would suggest something like :</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>  @NotNull\n  @Cacheable(cacheNames = {\"usersCache\"}, key = \"{#id}\")\n  Optional&lt;User&gt; getUser(@NotNull Long id, @NotNull CompanyDetails companyDetails);\n\n  @NotNull\n  @Cacheable(cacheNames = {\"usersCache\"}, key = \"{#key}\")\n  Optional&lt;User&gt; getUser(@NotNull String key, @NotNull CompanyDetails companyDetails);\n\n  @NotNull\n  @Cacheable(cacheNames = {\"pageableUsersCache\"}, key = \"{#companyDetails.id,#offset,#limit}\")\n  Pageable&lt;User&gt; getUsers(@NotNull CompanyDetails companyDetails, @NotNull Long offset, @NotNull Long limit);\n\n  @NotNull\n  @Cacheable(cacheNames = {\"userListCache\"}, key = \"{#companyDetails.id}\")\n  List&lt;User&gt; getUsers(@NotNull CompanyDetails companyDetails);\n\n  @NotNull\n  Optional&lt;UserDetails&gt; createUser(@NotNull final UserRequest request,      @NotNull CompanyDetails companyDetails);\n  \n /**\n   * If you want to cache user when it is created then you need to change the signature of your function to \n   * return Optional&lt;User&gt;\n   */\n  @NotNull\n  @CachePut(cacheNames = {\"usersCache\"}, key = \"{#request.id}\")\n  Optional&lt;User&gt; createUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\n\n  @NotNull\n  // CachePut will update the cache for defined key and you don't have to manage eviction\n  @CachePut(cacheNames = {\"usersCache\"}, key = \"{#request.id}\")\n  @CacheEvict(cacheNames = {\"userListCache\"}, key = \"{#companyDetails.id}\")\n  Optional&lt;User&gt; updateUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\n\n  @NotNull\n  // This should evict both the caches as listed based on the defined key\n  @Caching(evict = {\n          @CacheEvict(cacheNames = {\"usersCache\"}, key = \"{#id}\"),\n          @CacheEvict(cacheNames = {\"userListCache\"}, key = \"{#companyDetails.id}\")})\n  Optional&lt;User&gt; deleteUser(@NotNull final Long id, @NotNull CompanyDetails companyDetails);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>For <code>pageableUsersCache</code> it will not be easy to just evict the cache upon user deletion or update as you need to have the knowledge of full key to delete it. Or you can define custom annotation which can delete keys by a pattern like &quot;companyDetails.id*&quot;.\nOtherwise, you can delete all cache entries for <code>pageableUsersCache</code> by using :</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>  @Caching(evict = {\n          @CacheEvict(cacheNames = {\"usersCache\"}, key = \"{#id}\"),\n          @CacheEvict(cacheNames = {\"userListCache\"}, key = \"{#companyDetails.id}\"),\n          @CacheEvict(cacheNames = {\"pageableUsersCache\"}, allEntries = true)})\n  Optional&lt;User&gt; deleteUser(@NotNull final Long id, @NotNull CompanyDetails companyDetails);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":8678409,"reputation":455,"user_id":8231333,"display_name":"arunken"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":763,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71353923,"answer_count":2,"score":0,"last_activity_date":1646409640,"creation_date":1646370639,"question_id":71346860,"body_markdown":"I am new to implementing spring cache and is having trouble choosing the right way to use caching. below are some of the methods in user service as an example : \r\n\r\n  \r\n      @NotNull\r\n      @Cacheable(&quot;usersCache&quot;)\r\n      Optional&lt;User&gt; getUser(@NotNull Long id, @NotNull CompanyDetails companyDetails);\r\n      \r\n      @NotNull\r\n      @Cacheable(&quot;usersCache&quot;)\r\n      Pageable&lt;User&gt; getUsers(@NotNull CompanyDetails companyDetails, @NotNull Long offset, @NotNull Long limit);\r\n\r\n      @NotNull\r\n      @Cacheable(&quot;usersCache&quot;)\r\n      List&lt;User&gt; getUsers(@NotNull CompanyDetails companyDetails);\r\n      \r\n      @NotNull\r\n      @Cacheable(&quot;usersCache&quot;)\r\n      Optional&lt;User&gt; getUser(@NotNull String key, @NotNull CompanyDetails companyDetails);\r\n      \r\n      \r\n      @NotNull\r\n      Optional&lt;UserDetails&gt; createUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\r\n      \r\n      @NotNull\r\n      Optional&lt;User&gt; updateUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\r\n      \r\n      @NotNull\r\n      Optional&lt;User&gt; deleteUser(@NotNull final Long id, @NotNull CompanyDetails companyDetails); \r\n\r\n\r\nSince keys are generated based on the parameters values by default, the `getUser(@NotNull String key)` and `getUser(@NotNull Long id)` will have different entries in cache for the same user. This is one of the hurdles I am facing as this means I can have many duplicate entries due to this.\r\n\r\nThe second concern is that I have two `getUsers` methods to fetch users, one with pagination and the other without. These two method will have their own entry in the cache and this means that there will be a lot of duplicates and to make things worse, for each different offset and limit combinations, there will be an entry in cache, which can create a lot of duplicates.\r\n\r\nNow there are create, update and delete methods. Given the methods update, delete and getUser methods will have id as a parameter value directly or as a field in UserRequest object, shouldn&#39;t I be using this id as a part of the key along with other parameters. \r\n\r\nAlso, please consider the below case :\r\n\r\n    @NotNull\r\n      Optional&lt;UserDetails&gt; createUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\r\n\r\nHere the user is added and whenever a new user is added, should I flush the entire usersCache or should I wait for TTL to clear the cache?\r\n\r\nIs there an effective approach to follow given a lot of duplicates are added in cache for each method because they have different parameters. Should I use the default key generation by spring or should I follow any particular approach in specifying the keys?","title":"How should I implement caching using Spring Boot for crud operations","body":"<p>I am new to implementing spring cache and is having trouble choosing the right way to use caching. below are some of the methods in user service as an example :</p>\n<pre><code>  @NotNull\n  @Cacheable(&quot;usersCache&quot;)\n  Optional&lt;User&gt; getUser(@NotNull Long id, @NotNull CompanyDetails companyDetails);\n  \n  @NotNull\n  @Cacheable(&quot;usersCache&quot;)\n  Pageable&lt;User&gt; getUsers(@NotNull CompanyDetails companyDetails, @NotNull Long offset, @NotNull Long limit);\n\n  @NotNull\n  @Cacheable(&quot;usersCache&quot;)\n  List&lt;User&gt; getUsers(@NotNull CompanyDetails companyDetails);\n  \n  @NotNull\n  @Cacheable(&quot;usersCache&quot;)\n  Optional&lt;User&gt; getUser(@NotNull String key, @NotNull CompanyDetails companyDetails);\n  \n  \n  @NotNull\n  Optional&lt;UserDetails&gt; createUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\n  \n  @NotNull\n  Optional&lt;User&gt; updateUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\n  \n  @NotNull\n  Optional&lt;User&gt; deleteUser(@NotNull final Long id, @NotNull CompanyDetails companyDetails); \n</code></pre>\n<p>Since keys are generated based on the parameters values by default, the <code>getUser(@NotNull String key)</code> and <code>getUser(@NotNull Long id)</code> will have different entries in cache for the same user. This is one of the hurdles I am facing as this means I can have many duplicate entries due to this.</p>\n<p>The second concern is that I have two <code>getUsers</code> methods to fetch users, one with pagination and the other without. These two method will have their own entry in the cache and this means that there will be a lot of duplicates and to make things worse, for each different offset and limit combinations, there will be an entry in cache, which can create a lot of duplicates.</p>\n<p>Now there are create, update and delete methods. Given the methods update, delete and getUser methods will have id as a parameter value directly or as a field in UserRequest object, shouldn't I be using this id as a part of the key along with other parameters.</p>\n<p>Also, please consider the below case :</p>\n<pre><code>@NotNull\n  Optional&lt;UserDetails&gt; createUser(@NotNull final UserRequest request, @NotNull CompanyDetails companyDetails);\n</code></pre>\n<p>Here the user is added and whenever a new user is added, should I flush the entire usersCache or should I wait for TTL to clear the cache?</p>\n<p>Is there an effective approach to follow given a lot of duplicates are added in cache for each method because they have different parameters. Should I use the default key generation by spring or should I follow any particular approach in specifying the keys?</p>\n"},{"tags":["java","libgdx"],"answers":[{"tags":[],"owner":{"account_id":930575,"reputation":24689,"user_id":960524,"accept_rate":89,"display_name":"P.T."},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1403409436,"creation_date":1403409436,"answer_id":24347993,"question_id":24345754,"body_markdown":"The difference is [anti-aliasing](http://en.wikipedia.org/wiki/Anti-aliasing) that Photoshop applies to the image it generates.  If you zoom in on the edges of the two circles, you&#39;ll see the anti-aliased one has some semi-black pixels around the edge, where the `ShapeRenderer` generated circle just shows pixels entirely on or off.\r\n\r\n![anti-aliased image][1]\r\n\r\n![aliased image][2]\r\n\r\nThe Libgdx `ShapeRenderer` was designed for being a quick and simple way to get debugging shapes on the screen, it does not support anti-aliasing.  The easiest way to get consistent anti-aliased rendering it to use a texture.  (Its also possible with an OpenGL shader.)\r\n\r\nThat said, you do not have to create different sprites just to render different colored circles.  Just use a white circle with a transparent background, and then [render it with a color](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/SpriteBatch.html#setColor-com.badlogic.gdx.graphics.Color-).  (Assuming you want a variety of solid-colored circles).\r\n\r\n\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/RWu7t.png\r\n  [2]: http://i.stack.imgur.com/6RsxN.png","title":"ShapeRenderer produces pixelated shapes using LibGDX","body":"<p>The difference is <a href=\"http://en.wikipedia.org/wiki/Anti-aliasing\" rel=\"noreferrer\">anti-aliasing</a> that Photoshop applies to the image it generates.  If you zoom in on the edges of the two circles, you'll see the anti-aliased one has some semi-black pixels around the edge, where the <code>ShapeRenderer</code> generated circle just shows pixels entirely on or off.</p>\n\n<p><img src=\"https://i.stack.imgur.com/RWu7t.png\" alt=\"anti-aliased image\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/6RsxN.png\" alt=\"aliased image\"></p>\n\n<p>The Libgdx <code>ShapeRenderer</code> was designed for being a quick and simple way to get debugging shapes on the screen, it does not support anti-aliasing.  The easiest way to get consistent anti-aliased rendering it to use a texture.  (Its also possible with an OpenGL shader.)</p>\n\n<p>That said, you do not have to create different sprites just to render different colored circles.  Just use a white circle with a transparent background, and then <a href=\"http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/SpriteBatch.html#setColor-com.badlogic.gdx.graphics.Color-\" rel=\"noreferrer\">render it with a color</a>.  (Assuming you want a variety of solid-colored circles).</p>\n"},{"tags":[],"owner":{"account_id":9674161,"reputation":91,"user_id":7178185,"display_name":"Zodo"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1535686714,"creation_date":1479483475,"answer_id":40680901,"question_id":24345754,"body_markdown":"Here is really simple way to achieve smooth &amp; well-looking shapes without using a texture and SpriteBatch.\r\n\r\nAll you have to do is to render couple of shapes with slightly larger size and\r\nlower alpha channel along with the first one.\r\n\r\nThe more passes the better result, but, of course, consider ppi of your screen.\r\n\r\n    ...\r\n    float alphaMultiplier = 0.5f; //you may play with different coefficients\r\n    float radiusStep = radius/200;\r\n    int sampleRate = 3;\r\n    ...\r\n\r\n    //do not forget to enable blending\r\n    Gdx.gl.glEnable(GL20.GL_BLEND);\r\n    Gdx.gl.glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);\r\n\r\n    shapeRenderer.begin(ShapeType.Filled);\r\n    \r\n    //first rendering\r\n    shapeRenderer.setColor(r, g, b, a);\r\n    shapeRenderer.circle(x, y, radius);\r\n    \r\n    //additional renderings\r\n    for(int i=0; i&lt;sampleRate; i++) {\r\n        a *= alphaMultiplier;\r\n        radius += radiusStep;\r\n        shapeRenderer.setColor(r, g, b, a);\r\n        shapeRenderer.circle(x, y, radius);\r\n    }\r\n\r\n    shapeRenderer.end();\r\n    ...\r\n\r\n\r\nHere is a screenshot of what can you achieve.\r\n[![](https://i.stack.imgur.com/4ShnP.png)](https://i.stack.imgur.com/4ShnP.png)","title":"ShapeRenderer produces pixelated shapes using LibGDX","body":"<p>Here is really simple way to achieve smooth &amp; well-looking shapes without using a texture and SpriteBatch.</p>\n\n<p>All you have to do is to render couple of shapes with slightly larger size and\nlower alpha channel along with the first one.</p>\n\n<p>The more passes the better result, but, of course, consider ppi of your screen.</p>\n\n<pre><code>...\nfloat alphaMultiplier = 0.5f; //you may play with different coefficients\nfloat radiusStep = radius/200;\nint sampleRate = 3;\n...\n\n//do not forget to enable blending\nGdx.gl.glEnable(GL20.GL_BLEND);\nGdx.gl.glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);\n\nshapeRenderer.begin(ShapeType.Filled);\n\n//first rendering\nshapeRenderer.setColor(r, g, b, a);\nshapeRenderer.circle(x, y, radius);\n\n//additional renderings\nfor(int i=0; i&lt;sampleRate; i++) {\n    a *= alphaMultiplier;\n    radius += radiusStep;\n    shapeRenderer.setColor(r, g, b, a);\n    shapeRenderer.circle(x, y, radius);\n}\n\nshapeRenderer.end();\n...\n</code></pre>\n\n<p>Here is a screenshot of what can you achieve.\n<a href=\"https://i.stack.imgur.com/4ShnP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4ShnP.png\" alt=\"\"></a></p>\n"},{"tags":[],"owner":{"account_id":7854366,"reputation":646,"user_id":5936778,"accept_rate":100,"display_name":"spacer GIF"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646409612,"creation_date":1646409612,"answer_id":71354002,"question_id":24345754,"body_markdown":"If you&#39;re not teetering on the edge of losing frames, you can enable antialiasing in your launcher. You can increase the sample count for better results, but it&#39;s really diminishing returns.\r\n\r\n```\r\nLWJGL3 : config.setBackBufferConfig(8, 8, 8, 8, 16, 0, 2);\r\nLWJGL2 : config.samples = 2;\r\nGWT    : config.antialiasing = true;\r\nAndroid: config.numSamples = 2;\r\niOS    : config.multisample = GLKViewDrawableMultisample._4X;\r\n```","title":"ShapeRenderer produces pixelated shapes using LibGDX","body":"<p>If you're not teetering on the edge of losing frames, you can enable antialiasing in your launcher. You can increase the sample count for better results, but it's really diminishing returns.</p>\n<pre><code>LWJGL3 : config.setBackBufferConfig(8, 8, 8, 8, 16, 0, 2);\nLWJGL2 : config.samples = 2;\nGWT    : config.antialiasing = true;\nAndroid: config.numSamples = 2;\niOS    : config.multisample = GLKViewDrawableMultisample._4X;\n</code></pre>\n"}],"owner":{"account_id":4064561,"reputation":217,"user_id":3340001,"accept_rate":86,"display_name":"user3340001"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3260,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":24347993,"answer_count":3,"score":4,"last_activity_date":1646409612,"creation_date":1403383933,"question_id":24345754,"body_markdown":"When I use a ShapeRenderer, it always comes out pixelated. But if I draw the shape in photoshop with the same dimensions, it&#39;s very smooth and clean-looking.\r\n\r\nMy method is just as follows:\r\n\r\n    package com.me.actors;\r\n    \r\n    import com.badlogic.gdx.Gdx;\r\n    import com.badlogic.gdx.graphics.Color;\r\n    import com.badlogic.gdx.graphics.Texture;\r\n    import com.badlogic.gdx.graphics.g2d.Sprite;\r\n    import com.badlogic.gdx.graphics.g2d.SpriteBatch;\r\n    import com.badlogic.gdx.graphics.glutils.ShapeRenderer;\r\n    import com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;\r\n    import com.badlogic.gdx.scenes.scene2d.Actor;\r\n    \r\n    public class bub_actors extends Actor {\r\n    \tprivate ShapeRenderer shapes;\r\n    \tprivate Texture text;\r\n    \tprivate Sprite sprite;\r\n    \t\r\n    \tpublic bub_actors(){\r\n    \t\tshapes = new ShapeRenderer();\r\n    \t\ttext = new Texture(Gdx.files.internal(&quot;data/circle.png&quot;));\r\n    \t\tsprite = new Sprite();\r\n    \t\tsprite.setRegion(text);\r\n    \t}\r\n    \t@Override\r\n    \tpublic void draw(SpriteBatch batch, float parentAlpha) {\r\n    \t\t\tbatch.draw(sprite, 200, 200, 64, 64);\r\n    \t\t\tshapes.begin(ShapeType.FilledCircle);\r\n    \t\t\tshapes.filledCircle(50, 50, 32);\r\n    \t\t\tshapes.setColor(Color.BLACK);\r\n    \t\t\tshapes.end();\r\n    \t}\r\n    }\r\n\r\n\r\nHere&#39;s an image of the output:\r\n\r\n![enter image description here][1]\r\n\r\nAny ideas as to why this happens? Is it possible to make the ShapeRenderer look like the image (so I don&#39;t have to create a SpriteBatch of different-colored circles...).\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/sU24l.png","title":"ShapeRenderer produces pixelated shapes using LibGDX","body":"<p>When I use a ShapeRenderer, it always comes out pixelated. But if I draw the shape in photoshop with the same dimensions, it's very smooth and clean-looking.</p>\n\n<p>My method is just as follows:</p>\n\n<pre><code>package com.me.actors;\n\nimport com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.graphics.Color;\nimport com.badlogic.gdx.graphics.Texture;\nimport com.badlogic.gdx.graphics.g2d.Sprite;\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\nimport com.badlogic.gdx.graphics.glutils.ShapeRenderer;\nimport com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;\nimport com.badlogic.gdx.scenes.scene2d.Actor;\n\npublic class bub_actors extends Actor {\n    private ShapeRenderer shapes;\n    private Texture text;\n    private Sprite sprite;\n\n    public bub_actors(){\n        shapes = new ShapeRenderer();\n        text = new Texture(Gdx.files.internal(\"data/circle.png\"));\n        sprite = new Sprite();\n        sprite.setRegion(text);\n    }\n    @Override\n    public void draw(SpriteBatch batch, float parentAlpha) {\n            batch.draw(sprite, 200, 200, 64, 64);\n            shapes.begin(ShapeType.FilledCircle);\n            shapes.filledCircle(50, 50, 32);\n            shapes.setColor(Color.BLACK);\n            shapes.end();\n    }\n}\n</code></pre>\n\n<p>Here's an image of the output:</p>\n\n<p><img src=\"https://i.stack.imgur.com/sU24l.png\" alt=\"enter image description here\"></p>\n\n<p>Any ideas as to why this happens? Is it possible to make the ShapeRenderer look like the image (so I don't have to create a SpriteBatch of different-colored circles...).</p>\n"},{"tags":["java","android","google-play","auto-update"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1646377913,"post_id":71347378,"comment_id":126112568,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646386252,"post_id":71347378,"comment_id":126115083,"body_markdown":"You should know that files in assets are read only. Hence they are not updatable. But of course there is a solution for your problem..","body":"You should know that files in assets are read only. Hence they are not updatable. But of course there is a solution for your problem.."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646386328,"post_id":71347378,"comment_id":126115102,"body_markdown":"`Files sizes are very small not even an Mb` Nice that you consider 1MB small ;-)","body":"<code>Files sizes are very small not even an Mb</code> Nice that you consider 1MB small ;-)"}],"answers":[{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646409344,"creation_date":1646386557,"answer_id":71349343,"question_id":71347378,"body_markdown":"Place the updated files on a server on the internet.\r\n\r\nAt every startup your app checks if there are updated files.\r\n\r\nIf so, the updated files are downloaded\r\n\r\nThe rest i leave to you..","title":"Is there any way to Update My Android app file without the User updating the App?","body":"<p>Place the updated files on a server on the internet.</p>\n<p>At every startup your app checks if there are updated files.</p>\n<p>If so, the updated files are downloaded</p>\n<p>The rest i leave to you..</p>\n"}],"owner":{"account_id":24448117,"reputation":11,"user_id":18370721,"display_name":"Rafay Nauman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71349343,"answer_count":1,"score":1,"last_activity_date":1646409344,"creation_date":1646375231,"question_id":71347378,"body_markdown":"I am making an Android App which needs it&#39;s Assets file to be updated every 2-3 days.\r\n\r\nIs there any way through which I could update the files without having users to update the app twice a week?\r\n\r\nFiles sizes are very small not even an Mb","title":"Is there any way to Update My Android app file without the User updating the App?","body":"<p>I am making an Android App which needs it's Assets file to be updated every 2-3 days.</p>\n<p>Is there any way through which I could update the files without having users to update the app twice a week?</p>\n<p>Files sizes are very small not even an Mb</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","lambda","aws-lambda"],"comments":[{"owner":{"account_id":1303114,"reputation":15287,"user_id":1252647,"accept_rate":76,"display_name":"Noel Llevares"},"score":0,"creation_date":1508319235,"post_id":46805594,"comment_id":80560997,"body_markdown":"Lambda does not need Access Keys to use S3.","body":"Lambda does not need Access Keys to use S3."},{"owner":{"account_id":12020864,"reputation":175,"user_id":8794326,"accept_rate":75,"display_name":"Dwight Schrute"},"score":0,"creation_date":1508319861,"post_id":46805594,"comment_id":80561447,"body_markdown":"@dashmug I figured that. But how do I read the file? Can I get it from `S3Event input`?","body":"@dashmug I figured that. But how do I read the file? Can I get it from <code>S3Event input</code>?"},{"owner":{"account_id":2675298,"reputation":1699,"user_id":2311841,"display_name":"cy3er"},"score":0,"creation_date":1508326054,"post_id":46805594,"comment_id":80565163,"body_markdown":"`s3Client.getObject(new GetObjectRequest(bucket, key));` seems like a good approach. What&#39;s wrong with that?","body":"<code>s3Client.getObject(new GetObjectRequest(bucket, key));</code> seems like a good approach. What&#39;s wrong with that?"},{"owner":{"account_id":12020864,"reputation":175,"user_id":8794326,"accept_rate":75,"display_name":"Dwight Schrute"},"score":0,"creation_date":1508327030,"post_id":46805594,"comment_id":80565748,"body_markdown":"@cy3er The problem is that in order to instantiate an `s3Client`, I need to provide access keys, which is what I want to avoid. Like @dashmug said, the lambda function handler should be able to access the file without access keys.","body":"@cy3er The problem is that in order to instantiate an <code>s3Client</code>, I need to provide access keys, which is what I want to avoid. Like @dashmug said, the lambda function handler should be able to access the file without access keys."},{"owner":{"account_id":5226940,"reputation":6816,"user_id":4191049,"accept_rate":71,"display_name":"krishna_mee2004"},"score":1,"creation_date":1508327554,"post_id":46805594,"comment_id":80566084,"body_markdown":"I have not used java sdk, only python boto3. In python, we use session object to retrieve credentials from the IAM role attached to the Lambda function. You should be able to do something similar in Java too. Python SDK reference: http://boto3.readthedocs.io/en/latest/guide/session.html","body":"I have not used java sdk, only python boto3. In python, we use session object to retrieve credentials from the IAM role attached to the Lambda function. You should be able to do something similar in Java too. Python SDK reference: <a href=\"http://boto3.readthedocs.io/en/latest/guide/session.html\" rel=\"nofollow noreferrer\">boto3.readthedocs.io/en/latest/guide/session.html</a>"},{"owner":{"account_id":1303114,"reputation":15287,"user_id":1252647,"accept_rate":76,"display_name":"Noel Llevares"},"score":0,"creation_date":1508329393,"post_id":46805594,"comment_id":80567292,"body_markdown":"I repeat &quot;Lambda does not need Access Keys to use S3&quot;. `s3Client` does NOT need access keys to use S3. You&#39;re supposed to allow your Lambda execution role to have &quot;s3:getObject&quot; permissions so you don&#39;t have to use access keys in your code.","body":"I repeat &quot;Lambda does not need Access Keys to use S3&quot;. <code>s3Client</code> does NOT need access keys to use S3. You&#39;re supposed to allow your Lambda execution role to have &quot;s3:getObject&quot; permissions so you don&#39;t have to use access keys in your code."},{"owner":{"account_id":12020864,"reputation":175,"user_id":8794326,"accept_rate":75,"display_name":"Dwight Schrute"},"score":0,"creation_date":1508331230,"post_id":46805594,"comment_id":80568419,"body_markdown":"@dashmug Theoretically, conceptually, I know that. I just don&#39;t know what Java code would look like that downloads a file from S3 with a `s3Client` without using access keys. I do not know the syntax, as I cannot find this documented anywhere...","body":"@dashmug Theoretically, conceptually, I know that. I just don&#39;t know what Java code would look like that downloads a file from S3 with a <code>s3Client</code> without using access keys. I do not know the syntax, as I cannot find this documented anywhere..."},{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1508331325,"post_id":46805594,"comment_id":80568476,"body_markdown":"To clarify what @dashmug is saying: yes, your Lambda function needs credentials to access (non-public) S3 objects *but* you don&#39;t have to provide them explicitly in your code. You should configure the Lambda function with an appropriate IAM role that has a policy allowing GetObject against the relevant S3 resource. When the Lambda service executes your function it will assume that role and therefore your function will have access to temporary, rotated credentials allowing you to call GetObject. The SDK that you use, assuming it&#39;s an AWS SDK, will automatically fetch the credentials as needed.","body":"To clarify what @dashmug is saying: yes, your Lambda function needs credentials to access (non-public) S3 objects <i>but</i> you don&#39;t have to provide them explicitly in your code. You should configure the Lambda function with an appropriate IAM role that has a policy allowing GetObject against the relevant S3 resource. When the Lambda service executes your function it will assume that role and therefore your function will have access to temporary, rotated credentials allowing you to call GetObject. The SDK that you use, assuming it&#39;s an AWS SDK, will automatically fetch the credentials as needed."},{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1508331367,"post_id":46805594,"comment_id":80568499,"body_markdown":"Example of code to read S3 object from Lambda: https://stackoverflow.com/questions/30651502/how-to-get-contents-of-a-text-file-from-aws-s3-using-a-lambda-function/30655755#30655755","body":"Example of code to read S3 object from Lambda: <a href=\"https://stackoverflow.com/questions/30651502/how-to-get-contents-of-a-text-file-from-aws-s3-using-a-lambda-function/30655755#30655755\" title=\"how to get contents of a text file from aws s3 using a lambda function\">stackoverflow.com/questions/30651502/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1646409163,"creation_date":1508331754,"answer_id":46810840,"question_id":46805594,"body_markdown":"If your Lambda function is configured with an appropriate IAM role (that allows `s3:GetObject` of the relevant S3 object), then you don&#39;t need to explicitly provide credentials in your code.\r\n\r\nHere&#39;s sample Java code to get a object in response to an object uploaded Lambda event:\r\n    \r\n    public class S3GetTextBody implements RequestHandler&lt;S3Event, String&gt; {\r\n        public String handleRequest(S3Event s3event, Context context) {\r\n            try {\r\n                S3EventNotificationRecord record = s3event.getRecords().get(0);\r\n                // Retrieve the bucket &amp; key for the uploaded S3 object that\r\n                // caused this Lambda function to be triggered\r\n                String bkt = record.getS3().getBucket().getName();\r\n                String key = record.getS3().getObject().getKey().replace(&#39;+&#39;, &#39; &#39;);\r\n                key = URLDecoder.decode(key, &quot;UTF-8&quot;);\r\n                // Read the source file as text\r\n                AmazonS3 s3Client = AmazonS3ClientBuilder.defaultClient();\r\n                String body = s3Client.getObjectAsString(bkt, key);\r\n                System.out.println(&quot;Body: &quot; + body);\r\n                return &quot;ok&quot;;\r\n            } catch (Exception e) {\r\n                System.err.println(&quot;Exception: &quot; + e);\r\n                return &quot;error&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\nImports:\r\n\r\n    import java.net.URLDecoder;    \r\n    import com.amazonaws.services.lambda.runtime.Context;\r\n    import com.amazonaws.services.lambda.runtime.RequestHandler;\r\n    import com.amazonaws.services.lambda.runtime.events.S3Event;\r\n    import com.amazonaws.services.s3.AmazonS3;\r\n    import com.amazonaws.services.s3.AmazonS3ClientBuilder;\r\n    import com.amazonaws.services.s3.event.S3EventNotification.S3EventNotificationRecord;\r\n","title":"How to read uploaded file that triggered lambda execution directly?","body":"<p>If your Lambda function is configured with an appropriate IAM role (that allows <code>s3:GetObject</code> of the relevant S3 object), then you don't need to explicitly provide credentials in your code.</p>\n<p>Here's sample Java code to get a object in response to an object uploaded Lambda event:</p>\n<pre><code>public class S3GetTextBody implements RequestHandler&lt;S3Event, String&gt; {\n    public String handleRequest(S3Event s3event, Context context) {\n        try {\n            S3EventNotificationRecord record = s3event.getRecords().get(0);\n            // Retrieve the bucket &amp; key for the uploaded S3 object that\n            // caused this Lambda function to be triggered\n            String bkt = record.getS3().getBucket().getName();\n            String key = record.getS3().getObject().getKey().replace('+', ' ');\n            key = URLDecoder.decode(key, &quot;UTF-8&quot;);\n            // Read the source file as text\n            AmazonS3 s3Client = AmazonS3ClientBuilder.defaultClient();\n            String body = s3Client.getObjectAsString(bkt, key);\n            System.out.println(&quot;Body: &quot; + body);\n            return &quot;ok&quot;;\n        } catch (Exception e) {\n            System.err.println(&quot;Exception: &quot; + e);\n            return &quot;error&quot;;\n        }\n    }\n}\n</code></pre>\n<p>Imports:</p>\n<pre><code>import java.net.URLDecoder;    \nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.amazonaws.services.lambda.runtime.events.S3Event;\nimport com.amazonaws.services.s3.AmazonS3;\nimport com.amazonaws.services.s3.AmazonS3ClientBuilder;\nimport com.amazonaws.services.s3.event.S3EventNotification.S3EventNotificationRecord;\n</code></pre>\n"}],"owner":{"account_id":12020864,"reputation":175,"user_id":8794326,"accept_rate":75,"display_name":"Dwight Schrute"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3822,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":46810840,"answer_count":1,"score":2,"last_activity_date":1646409163,"creation_date":1508314502,"question_id":46805594,"body_markdown":"My current AWS setup is a lambda function that is being triggered whenever I put an object into a S3 bucket. I implemented the lambda&#39;s handler function in Java. What I want to do is simply accessing the file that was uploaded and triggered the execution of the lambda function. E.g., if I upload `sample.json` to the bucket, I want to access the contents of this file in my handler function.\r\n\r\nI know I can do something like this:\r\n\r\n    public Void handleRequest(S3Event input, Context context) {\r\n      for (S3EventNotificationRecord record : input.getRecords()) {\r\n        String key = record.getS3().getObject().getKey();\r\n        String bucket = record.getS3().getBucket().getName();\r\n        AmazonS3 s3Client = new AmazonS3Client(credentials);\r\n        try {\r\n          S3Object s3Object = s3Client.getObject(new GetObjectRequest(bucket, key));\r\n          InputStream input = s3Object.getObjectContent();\r\n          BufferedReader reader = new BufferedReader(new InputStreamReader(input));\r\n          while (true) {\r\n            String line = reader.readLine();\r\n            if (line == null) break;\r\n            // Do something with line...\r\n          }\r\n    // ...\r\n\r\nThe problem is that I am not allowed to use access keys. Thus, I cannot create an `s3Client` to download the file with. In other words, I have to get the object from the argument that my handler method takes, i.e., `S3Event input`. How would I do that?","title":"How to read uploaded file that triggered lambda execution directly?","body":"<p>My current AWS setup is a lambda function that is being triggered whenever I put an object into a S3 bucket. I implemented the lambda's handler function in Java. What I want to do is simply accessing the file that was uploaded and triggered the execution of the lambda function. E.g., if I upload <code>sample.json</code> to the bucket, I want to access the contents of this file in my handler function.</p>\n\n<p>I know I can do something like this:</p>\n\n<pre><code>public Void handleRequest(S3Event input, Context context) {\n  for (S3EventNotificationRecord record : input.getRecords()) {\n    String key = record.getS3().getObject().getKey();\n    String bucket = record.getS3().getBucket().getName();\n    AmazonS3 s3Client = new AmazonS3Client(credentials);\n    try {\n      S3Object s3Object = s3Client.getObject(new GetObjectRequest(bucket, key));\n      InputStream input = s3Object.getObjectContent();\n      BufferedReader reader = new BufferedReader(new InputStreamReader(input));\n      while (true) {\n        String line = reader.readLine();\n        if (line == null) break;\n        // Do something with line...\n      }\n// ...\n</code></pre>\n\n<p>The problem is that I am not allowed to use access keys. Thus, I cannot create an <code>s3Client</code> to download the file with. In other words, I have to get the object from the argument that my handler method takes, i.e., <code>S3Event input</code>. How would I do that?</p>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1646255585,"post_id":71329021,"comment_id":126081046,"body_markdown":"[this helps?](https://stackoverflow.com/questions/71154180/how-to-inject-spring-application-properties-grouped-by-prefix/71155036#71155036)","body":"<a href=\"https://stackoverflow.com/questions/71154180/how-to-inject-spring-application-properties-grouped-by-prefix/71155036#71155036\">this helps?</a>"},{"owner":{"account_id":10334511,"reputation":175,"user_id":7623165,"display_name":"technoJ"},"score":0,"creation_date":1646290251,"post_id":71329021,"comment_id":126087720,"body_markdown":"@Eugene I am aware of Map&lt;String,String&gt; but couldnt make it work with enums and multikey maps; which is what am looking for. Any clue if this is doable?","body":"@Eugene I am aware of Map&lt;String,String&gt; but couldnt make it work with enums and multikey maps; which is what am looking for. Any clue if this is doable?"}],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646409033,"creation_date":1646409033,"answer_id":71353878,"question_id":71329021,"body_markdown":"If you can slightly change you mappings, like this:\r\n\r\n\r\n    bank:\r\n     map:\r\n      accountType1:\r\n        debit:\r\n         - Product1\r\n         - Product2\r\n        hybrid:\r\n         - ProductX\r\n         - ProductY\r\n\r\nThen below config actually worked for me just fine:\r\n\r\n\r\n    @ConfigurationProperties(prefix = &quot;bank&quot;)\r\n    public class NewProps {\r\n    \r\n        private Map&lt;AccountType, Map&lt;String, List&lt;Product&gt;&gt;&gt; map = new HashMap&lt;&gt;();\r\n    \r\n        public Map&lt;AccountType, Map&lt;String, List&lt;Product&gt;&gt;&gt; getMap() {\r\n            return map;\r\n        }\r\n    \r\n        public void setMap(Map&lt;AccountType, Map&lt;String, List&lt;Product&gt;&gt;&gt; map) {\r\n            this.map = map;\r\n        }\r\n    }","title":"Springboot @ConfigurationProperties to Map of Maps or (Nested Map/MultiKeyMap)","body":"<p>If you can slightly change you mappings, like this:</p>\n<pre><code>bank:\n map:\n  accountType1:\n    debit:\n     - Product1\n     - Product2\n    hybrid:\n     - ProductX\n     - ProductY\n</code></pre>\n<p>Then below config actually worked for me just fine:</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;bank&quot;)\npublic class NewProps {\n\n    private Map&lt;AccountType, Map&lt;String, List&lt;Product&gt;&gt;&gt; map = new HashMap&lt;&gt;();\n\n    public Map&lt;AccountType, Map&lt;String, List&lt;Product&gt;&gt;&gt; getMap() {\n        return map;\n    }\n\n    public void setMap(Map&lt;AccountType, Map&lt;String, List&lt;Product&gt;&gt;&gt; map) {\n        this.map = map;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10334511,"reputation":175,"user_id":7623165,"display_name":"technoJ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1530,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71353878,"answer_count":1,"score":3,"last_activity_date":1646409033,"creation_date":1646254529,"question_id":71329021,"body_markdown":"I&#39;m trying to retain a few business configs on the domain through `yaml` file. \r\n\r\nStructure of `yml` config file:\r\n\r\n  \r\n\r\n    bank:\r\n    \taccountType1:\r\n    \t\tdebit:\r\n    \t\t\t- Product1\r\n    \t\t\t- Product2\r\n    \t\thybrid:\r\n    \t\t\t- ProductX\r\n    \t\t\t- ProductY\r\n    \taccountType2:\r\n    \t\tdebit:\r\n    \t\t\t- Product1\r\n    \t\t\t- Product2\r\n    \t\t\t- Product3\r\n    \t\thybrid:\r\n    \t\t\t- ProductX\r\n    \t\t\t- ProductY\r\n    \t\t\t- ProductZ\r\n\r\nI have the below enums for on the domain.\r\n\r\n    enum AccountType{ ACCOUNT_TYPE1, ACCOUNT_TYPE2}\r\n    enum Feature{ DEBIT, HYBRID}\r\n    enum Products { Product1, Product2, Product3, ProductX, ProductY, ProductZ }\r\n\r\nI would like to seek help to get these business configs as a MultikeyMap, or a nested map, but using enums as keys. For eg: \r\n\r\n    Map&lt;AccountType, Map&lt;Feature, List&lt;Products&gt;&gt;\r\n\r\nBasically I would like the config to perform the following lookup:\r\n\r\n    if AccountType = accountType1 &amp; Feature = debit, then return [Product1,Product2]\r\n\r\nI couldn&#39;t find a way to do this elegantly via config files, as it always initialises to null\r\n\r\n    @ConfigurationProperties(prefix=&quot;bank&quot;)\r\n    public class ProductResolver {\r\n    Map&lt;AccountType, Map&lt;Feature, List&lt;Products&gt;&gt; configMap \r\n      // NestedMap, Apache MultiKeymap or something similar either should be ok for me\r\n    }\r\n\r\n\r\nAny experts, please could you guide me?","title":"Springboot @ConfigurationProperties to Map of Maps or (Nested Map/MultiKeyMap)","body":"<p>I'm trying to retain a few business configs on the domain through <code>yaml</code> file.</p>\n<p>Structure of <code>yml</code> config file:</p>\n<pre><code>bank:\n    accountType1:\n        debit:\n            - Product1\n            - Product2\n        hybrid:\n            - ProductX\n            - ProductY\n    accountType2:\n        debit:\n            - Product1\n            - Product2\n            - Product3\n        hybrid:\n            - ProductX\n            - ProductY\n            - ProductZ\n</code></pre>\n<p>I have the below enums for on the domain.</p>\n<pre><code>enum AccountType{ ACCOUNT_TYPE1, ACCOUNT_TYPE2}\nenum Feature{ DEBIT, HYBRID}\nenum Products { Product1, Product2, Product3, ProductX, ProductY, ProductZ }\n</code></pre>\n<p>I would like to seek help to get these business configs as a MultikeyMap, or a nested map, but using enums as keys. For eg:</p>\n<pre><code>Map&lt;AccountType, Map&lt;Feature, List&lt;Products&gt;&gt;\n</code></pre>\n<p>Basically I would like the config to perform the following lookup:</p>\n<pre><code>if AccountType = accountType1 &amp; Feature = debit, then return [Product1,Product2]\n</code></pre>\n<p>I couldn't find a way to do this elegantly via config files, as it always initialises to null</p>\n<pre><code>@ConfigurationProperties(prefix=&quot;bank&quot;)\npublic class ProductResolver {\nMap&lt;AccountType, Map&lt;Feature, List&lt;Products&gt;&gt; configMap \n  // NestedMap, Apache MultiKeymap or something similar either should be ok for me\n}\n</code></pre>\n<p>Any experts, please could you guide me?</p>\n"},{"tags":["java","json","jackson","deserialization"],"comments":[{"owner":{"account_id":19160885,"reputation":77,"user_id":13996682,"display_name":"karan9nov"},"score":0,"creation_date":1620193577,"post_id":11936620,"comment_id":119124783,"body_markdown":"Can this class, `SomeClass` be made generic and have the same way a list is constructed from JSON?","body":"Can this class, <code>SomeClass</code> be made generic and have the same way a list is constructed from JSON?"}],"answers":[{"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1344965987,"creation_date":1344965987,"answer_id":11957775,"question_id":11936620,"body_markdown":"After constructing `JavaType`, both call same deserialization functionality, so the only difference is the way generic type is handled.\r\n\r\nSecond one is fully static, so type must be known in compile type, and can not vary. So it is similar to using basic Class literal.\r\n\r\nFirst one is dynamic, so it can be used to construct things that vary regarding their parameterization.\r\n\r\nPersonally I prefer first alternative for all cases (it avoids creation of one more anonymous inner classes), but second one may be more readable.\r\n","title":"Jackson - Deserialising JSON string - TypeReference vs TypeFactory.constructCollectionType","body":"<p>After constructing <code>JavaType</code>, both call same deserialization functionality, so the only difference is the way generic type is handled.</p>\n\n<p>Second one is fully static, so type must be known in compile type, and can not vary. So it is similar to using basic Class literal.</p>\n\n<p>First one is dynamic, so it can be used to construct things that vary regarding their parameterization.</p>\n\n<p>Personally I prefer first alternative for all cases (it avoids creation of one more anonymous inner classes), but second one may be more readable.</p>\n"},{"tags":[],"owner":{"account_id":7432454,"reputation":11,"user_id":5652902,"display_name":"Kinghizzzzz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583884148,"creation_date":1583884148,"answer_id":60627438,"question_id":11936620,"body_markdown":"One more way you can achieve this is by :\r\n\r\n`List&lt;SomeClass&gt; list = Arrays.asList(mapper.readValue(jsonString, SomeClass[].class));`\r\n\r\n","title":"Jackson - Deserialising JSON string - TypeReference vs TypeFactory.constructCollectionType","body":"<p>One more way you can achieve this is by :</p>\n\n<p><code>List&lt;SomeClass&gt; list = Arrays.asList(mapper.readValue(jsonString, SomeClass[].class));</code></p>\n"}],"owner":{"account_id":276194,"reputation":1729,"user_id":569494,"accept_rate":91,"display_name":"Arun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31477,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":11957775,"answer_count":2,"score":44,"last_activity_date":1646408621,"creation_date":1344868951,"question_id":11936620,"body_markdown":"To deserialise JSON string to a list of class, different ways listed at [StackOverflow question][1]\r\n\r\nType 1 ([docs link][3]):\r\n\r\n    List&lt;SomeClass&gt; someClassList = mapper.readValue(jsonString, typeFactory.constructCollectionType(List.class, SomeClass.class));\r\n\r\nType 2 ([docs link][2]):\r\n\r\n    List&lt;SomeClass&gt; list = mapper.readValue(jsonString, new TypeReference&lt;List&lt;SomeClass&gt;&gt;() { });\r\n\r\n\r\nThough both 2 types above do the job, what is the difference between these implementations ?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7246157/how-to-parse-a-json-string-to-an-array-using-jackson\r\n  [2]: https://fasterxml.github.io/jackson-databind/javadoc/2.5/com/fasterxml/jackson/databind/type/TypeFactory.html#constructCollectionLikeType(java.lang.Class,%20java.lang.Class)\r\n  [3]: https://fasterxml.github.io/jackson-core/javadoc/2.5/com/fasterxml/jackson/core/type/TypeReference.html","title":"Jackson - Deserialising JSON string - TypeReference vs TypeFactory.constructCollectionType","body":"<p>To deserialise JSON string to a list of class, different ways listed at <a href=\"https://stackoverflow.com/questions/7246157/how-to-parse-a-json-string-to-an-array-using-jackson\">StackOverflow question</a></p>\n<p>Type 1 (<a href=\"https://fasterxml.github.io/jackson-core/javadoc/2.5/com/fasterxml/jackson/core/type/TypeReference.html\" rel=\"nofollow noreferrer\">docs link</a>):</p>\n<pre><code>List&lt;SomeClass&gt; someClassList = mapper.readValue(jsonString, typeFactory.constructCollectionType(List.class, SomeClass.class));\n</code></pre>\n<p>Type 2 (<a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.5/com/fasterxml/jackson/databind/type/TypeFactory.html#constructCollectionLikeType(java.lang.Class,%20java.lang.Class)\" rel=\"nofollow noreferrer\">docs link</a>):</p>\n<pre><code>List&lt;SomeClass&gt; list = mapper.readValue(jsonString, new TypeReference&lt;List&lt;SomeClass&gt;&gt;() { });\n</code></pre>\n<p>Though both 2 types above do the job, what is the difference between these implementations ?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1646406691,"post_id":71353374,"comment_id":126122164,"body_markdown":"You&#39;ll want to look at the [@PathVariable](https://www.baeldung.com/spring-pathvariable) annotation.","body":"You&#39;ll want to look at the <a href=\"https://www.baeldung.com/spring-pathvariable\" rel=\"nofollow noreferrer\">@PathVariable</a> annotation."}],"answers":[{"tags":[],"owner":{"account_id":7187874,"reputation":437,"user_id":5489257,"accept_rate":100,"display_name":"Jaxon Crosmas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646408489,"creation_date":1646407581,"answer_id":71353568,"question_id":71353374,"body_markdown":"The [@PathVariable](https://www.baeldung.com/spring-requestmapping#1-single-pathvariable) spring annotation would help you in this case.\r\n\r\nFor example:\r\n```\r\n@RequestMapping(value = &quot;{team}/{component}&quot;, method = RequestMethod.GET)\r\npublic Team getTeam(@PathVariable String team, @PathVariable int component) {\r\n    //Use team and component here\r\n}\r\n```\r\n\r\nYou can just add some logic into the controller method to throw some exception if either variable is an unexpected value.\r\n\r\nThough depending on what you are trying to achieve, this may be a bad design as this controller method will catch all GET requests that match ```String/int```. You may want to try something like this to make the request mapping more specific:\r\n\r\n```\r\n@RequestMapping(value = &quot;team/{teamLetter}/{component}&quot;, method = RequestMethod.GET)\r\npublic Team getTeam(@PathVariable char teamLetter, @PathVariable int component) {\r\n    //Use team and component here\r\n}\r\n```","title":"Create controller for &quot;generic&quot; path mapping springboot","body":"<p>The <a href=\"https://www.baeldung.com/spring-requestmapping#1-single-pathvariable\" rel=\"nofollow noreferrer\">@PathVariable</a> spring annotation would help you in this case.</p>\n<p>For example:</p>\n<pre><code>@RequestMapping(value = &quot;{team}/{component}&quot;, method = RequestMethod.GET)\npublic Team getTeam(@PathVariable String team, @PathVariable int component) {\n    //Use team and component here\n}\n</code></pre>\n<p>You can just add some logic into the controller method to throw some exception if either variable is an unexpected value.</p>\n<p>Though depending on what you are trying to achieve, this may be a bad design as this controller method will catch all GET requests that match <code>String/int</code>. You may want to try something like this to make the request mapping more specific:</p>\n<pre><code>@RequestMapping(value = &quot;team/{teamLetter}/{component}&quot;, method = RequestMethod.GET)\npublic Team getTeam(@PathVariable char teamLetter, @PathVariable int component) {\n    //Use team and component here\n}\n</code></pre>\n"}],"owner":{"account_id":19002834,"reputation":793,"user_id":13870033,"display_name":"Finley Adams"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":471,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71353568,"answer_count":1,"score":1,"last_activity_date":1646408489,"creation_date":1646406621,"question_id":71353374,"body_markdown":"Let&#39;s assume I have many teams like : &quot;Team A, Team B...Team Z&quot; and each team has at least 5 components.  Now I want to create a generic controller that responds to any request of type `/team/number` so I can be able to get informations about a team member.\r\n\r\nFor example my controller must be able to map this request :\r\n\r\n    @RequestMapping(value = &quot;/Team A/1&quot;, method = RequestMethod.GET) \r\n\r\nTeam class could be :\r\n\r\n    @Entity\r\n    @Table(name = &quot;team&quot;)\r\n    public class Team {\r\n    \r\n        public Team() {}\r\n    \r\n        public String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \t@Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Long id;\r\n        private String name;\r\n        private List&lt;Player&gt; players;\r\n    \r\n    }\r\n\r\nAnd \r\n\r\n    Player :\r\n        @Entity\r\n        @Table(name = &quot;player&quot;)\r\n        public class Player {\r\n        \r\n            public Player() {}\r\n        \r\n            public String getName() {\r\n        \t\treturn name;\r\n        \t}\r\n        \tpublic void setName(String name) {\r\n        \t\tthis.name = name;\r\n        \t}\r\n        \r\n        \t@Id\r\n            @GeneratedValue(strategy = GenerationType.AUTO)\r\n            private Long id;\r\n            private String name;\r\n            private int number;\r\n        \r\n        }\r\n\r\nObviously it can either execute `GET` and `POST`. The point is that I don&#39;t want to specify a controller for each team and each number, I just want one that can respond to `/String/int` . \r\n\r\nI need also to specify which string it can accept and the range of values (max 5 for example).\r\n\r\n\r\n\r\n\r\n\r\n","title":"Create controller for &quot;generic&quot; path mapping springboot","body":"<p>Let's assume I have many teams like : &quot;Team A, Team B...Team Z&quot; and each team has at least 5 components.  Now I want to create a generic controller that responds to any request of type <code>/team/number</code> so I can be able to get informations about a team member.</p>\n<p>For example my controller must be able to map this request :</p>\n<pre><code>@RequestMapping(value = &quot;/Team A/1&quot;, method = RequestMethod.GET) \n</code></pre>\n<p>Team class could be :</p>\n<pre><code>@Entity\n@Table(name = &quot;team&quot;)\npublic class Team {\n\n    public Team() {}\n\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String name;\n    private List&lt;Player&gt; players;\n\n}\n</code></pre>\n<p>And</p>\n<pre><code>Player :\n    @Entity\n    @Table(name = &quot;player&quot;)\n    public class Player {\n    \n        public Player() {}\n    \n        public String getName() {\n            return name;\n        }\n        public void setName(String name) {\n            this.name = name;\n        }\n    \n        @Id\n        @GeneratedValue(strategy = GenerationType.AUTO)\n        private Long id;\n        private String name;\n        private int number;\n    \n    }\n</code></pre>\n<p>Obviously it can either execute <code>GET</code> and <code>POST</code>. The point is that I don't want to specify a controller for each team and each number, I just want one that can respond to <code>/String/int</code> .</p>\n<p>I need also to specify which string it can accept and the range of values (max 5 for example).</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-lambda","sftp"],"answers":[{"tags":[],"owner":{"account_id":14101577,"reputation":9545,"user_id":10186808,"display_name":"Balu Vyamajala"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1646408195,"creation_date":1619004893,"answer_id":67195063,"question_id":67194684,"body_markdown":"Sample event that is sent to Lambda is [here][1].\r\n\r\nWe can use [java-events][2] jar, will give us `S3Event` class with exact schema.\r\n\r\nWe need to loop on records and find `s3.object.key`:\r\n\r\n    package com.test;\r\n    \r\n    import com.amazonaws.services.lambda.runtime.Context;\r\n    import com.amazonaws.services.lambda.runtime.RequestHandler;\r\n    import com.amazonaws.services.lambda.runtime.events.S3Event;\r\n    \r\n    public class MyHandler implements RequestHandler&lt;S3Event, String&gt; {\r\n    \t@Override\r\n    \tpublic String handleRequest(S3Event request, Context context) {\r\n    \t\trequest.getRecords().forEach(record -&gt; {\r\n    \t\t\tSystem.out.println(record.getS3().getObject().getKey());\r\n    \t\t});\r\n    \t\treturn &quot;success&quot;;\r\n    \t}\r\n    }\r\n\r\n  [1]: https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html#test-manual-invoke\r\n  [2]: https://docs.aws.amazon.com/lambda/latest/dg/java-samples.html","title":"how to get name of file that trigger lambda from s3 in java","body":"<p>Sample event that is sent to Lambda is <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html#test-manual-invoke\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>We can use <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/java-samples.html\" rel=\"nofollow noreferrer\">java-events</a> jar, will give us <code>S3Event</code> class with exact schema.</p>\n<p>We need to loop on records and find <code>s3.object.key</code>:</p>\n<pre><code>package com.test;\n\nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.amazonaws.services.lambda.runtime.events.S3Event;\n\npublic class MyHandler implements RequestHandler&lt;S3Event, String&gt; {\n    @Override\n    public String handleRequest(S3Event request, Context context) {\n        request.getRecords().forEach(record -&gt; {\n            System.out.println(record.getS3().getObject().getKey());\n        });\n        return &quot;success&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4905854,"reputation":81,"user_id":3952616,"display_name":"Sasha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1171,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1646408195,"creation_date":1619003402,"question_id":67194684,"body_markdown":"Tell me how can I get the file name that trigger lambda from s3 inside lambda code in java?\r\nMy task is to copy a file from s3 which goes there to my sftp server use lambda. In order for me not to copy every time all the files from the folder, I need to find out which file calling lambda.\r\n\r\nP.S. Thank you in advance","title":"how to get name of file that trigger lambda from s3 in java","body":"<p>Tell me how can I get the file name that trigger lambda from s3 inside lambda code in java?\nMy task is to copy a file from s3 which goes there to my sftp server use lambda. In order for me not to copy every time all the files from the folder, I need to find out which file calling lambda.</p>\n<p>P.S. Thank you in advance</p>\n"},{"tags":["java","multithreading","spring-webflux","project-reactor","vert.x"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1646312866,"post_id":71326490,"comment_id":126095267,"body_markdown":"Your non blocking way is actually sort of blocking. You cant return a string from a function unless you block. Non blocking means you do a call somewhere and instead of returning a string you return a promise that says that there will be a string there eventually. So you need to return a `Mono&lt;String&gt;`","body":"Your non blocking way is actually sort of blocking. You cant return a string from a function unless you block. Non blocking means you do a call somewhere and instead of returning a string you return a promise that says that there will be a string there eventually. So you need to return a <code>Mono&lt;String&gt;</code>"}],"answers":[{"tags":[],"owner":{"account_id":21334358,"reputation":73,"user_id":15705806,"display_name":"fmbordignon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646408076,"creation_date":1646408076,"answer_id":71353684,"question_id":71326490,"body_markdown":"The main point here i think is the way you are organizing the code, it seems to me that you are using a reactive framework, but thinking and coding in an imperative way.\r\n\r\nIf you change the ```generateToken``` and ```doGenerateToken``` to return a Mono&lt;String&gt;, you can do something like the following:\r\n\r\n```\r\n    private Mono&lt;String&gt; generateToken(User user) {\r\n        ArrayList&lt;Long&gt; usr_id = new ArrayList&lt;Long&gt;(Collections.singleton(user.getId()));\r\n        ArrayList&lt;String&gt; usr_name = new ArrayList&lt;String&gt;(Collections.singleton(user.getName()));\r\n        ArrayList&lt;String&gt; usr_lastname = new ArrayList&lt;&gt;(Collections.singleton(user.getLastName()));\r\n\r\n        return myModelRepository.getMyModelInstance()\r\n                .map(modelInstance -&gt; {\r\n                    Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n\r\n                    //put all values you need in claims map...\r\n\r\n                    //update doGenerateToken code to return a Mono&lt;String&gt;\r\n                    return doGenerateToken(claims, user.getUsername());\r\n                });\r\n    }\r\n```","title":"Spring Webflux: Extract a value from a Mono and save it into another variable","body":"<p>The main point here i think is the way you are organizing the code, it seems to me that you are using a reactive framework, but thinking and coding in an imperative way.</p>\n<p>If you change the <code>generateToken</code> and <code>doGenerateToken</code> to return a Mono, you can do something like the following:</p>\n<pre><code>    private Mono&lt;String&gt; generateToken(User user) {\n        ArrayList&lt;Long&gt; usr_id = new ArrayList&lt;Long&gt;(Collections.singleton(user.getId()));\n        ArrayList&lt;String&gt; usr_name = new ArrayList&lt;String&gt;(Collections.singleton(user.getName()));\n        ArrayList&lt;String&gt; usr_lastname = new ArrayList&lt;&gt;(Collections.singleton(user.getLastName()));\n\n        return myModelRepository.getMyModelInstance()\n                .map(modelInstance -&gt; {\n                    Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n\n                    //put all values you need in claims map...\n\n                    //update doGenerateToken code to return a Mono&lt;String&gt;\n                    return doGenerateToken(claims, user.getUsername());\n                });\n    }\n</code></pre>\n"}],"owner":{"account_id":18089880,"reputation":57,"user_id":13149740,"display_name":"xavier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10298,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71353684,"answer_count":1,"score":2,"last_activity_date":1646408076,"creation_date":1646240602,"question_id":71326490,"body_markdown":"The stack used in the API is: Spring-boot, Spring Webflux, Hibernate Reactive 1.1.3 and Postgresql. \r\n\r\nI&#39;d like to extract a  string value from a Mono&lt;MyModel&gt; called desiredField and add it to a hashmap. I&#39;m showing the DB, model, repository and the util module where all this is happening. \r\n\r\nThe JWTUtil is used to generate a JWT token for login purposes in the API. The JWTController is working fine, coming the token in response! The only thing is that a cannot extract de string value from a Mono&lt;MyModel&gt;.\r\n\r\nI&#39;ve tried two approaches. The reactive way, using the subscribe method. And the blocking way using the block method. These two approches are shown below with their own console prints.\r\n\r\n**In the first approach (the reactive way)** I couldn&#39;t extract the desiredField from the Mono&lt;MyModel&gt;. The token comes in the response but without the desiredField in the token claims. The desiredField live only inside de stream *(see console log prints)*, outside is null.\r\n\r\n**In the second approach (blocking way)** there are an infinite loop error without getting the token in the response.\r\n\r\nCould you help me to extract this value from the Mono?\r\n\r\nThanks in advance!\r\n\r\n\r\nPostgres:\r\n```\r\n############\r\n# my_table #\r\n############\r\n\r\nid  |  desired_column\r\n-------------------------------\r\n 1  |  &quot;I am the desired value&quot;\r\n```\r\n\r\nModel:\r\n```\r\n@Data\r\n@Entity(name = &quot;MyModel&quot;)\r\n@Table(name = &quot;my_table&quot;)\r\npublic class MyModel{\r\n    @Id\r\n    @GeneratedValue\r\n    private long id;\r\n\r\n    @Column(name=&quot;desired_column&quot;)\r\n    private String desiredField;\r\n}\r\n```\r\n\r\nRepository:\r\n```\r\n@Slf4j\r\n@Repository\r\npublic class MyModelRepository {\r\n\r\n    public Mono&lt;MyModel&gt; getMyModelInstance() {\r\n        try{\r\n            EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;my-persistance&quot;);\r\n            Mutiny.SessionFactory factory = emf.unwrap(Mutiny.SessionFactory.class);\r\n\r\n            CriteriaBuilder builder = factory.getCriteriaBuilder();\r\n            CriteriaQuery&lt;MyModel&gt; criteria = builder.createQuery(MyModel.class);\r\n            Root&lt;MyModel&gt; root = criteria.from(MyModel.class);\r\n            criteria.where(builder.equal(root.get(&quot;id&quot;), &quot;1&quot;));\r\n\r\n            Uni&lt;MyModel&gt; myModelInstanceUni= factory.withSession(\r\n                    session -&gt; session\r\n                            .createQuery(criteria)\r\n                            .getSingleResult()\r\n            );\r\n\r\n            return myModelInstanceUni\r\n                    .convert()\r\n                    .with(UniReactorConverters.toMono());\r\n\r\n        } catch(Exception ex) {\r\n            log.error(&quot;There is an error: {}&quot;, ex.getMessage());\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n#### WAY 1: REACTIVE WAY\r\nUtil:\r\n```\r\n\r\n@Slf4j\r\n@Component\r\npublic class JWTUtil {\r\n\r\n    @Autowired\r\n    private MyModelRepository myModelRepository;\r\n\r\n    @Value(&quot;${springbootwebfluxjjwt.jjwt.secret}&quot;)\r\n    private String secret;\r\n\r\n    @Value(&quot;${springbootwebfluxjjwt.jjwt.expiration}&quot;)\r\n    private String expirationTime;\r\n\r\n    private Key key;\r\n\r\n\r\n    @PostConstruct\r\n    public void init(){\r\n        this.key = Keys.hmacShaKeyFor(secret.getBytes());\r\n    }\r\n\r\n\r\n    public Claims getAllClaimsFromToken(String token) {\r\n        // Here get token claims\r\n    }\r\n\r\n\r\n    public String getUsernameFromToken(String token) {\r\n        // Here get token username\r\n    }\r\n\r\n\r\n    public Date getExpirationDateFromToken(String token) {\r\n        // Here get expiration date from token;\r\n    }\r\n\r\n\r\n    private Boolean isTokenExpired(String token) {\r\n        // Here validates token\r\n    }\r\n\r\n\r\n    public String generateToken (User user) {\r\n\r\n        ArrayList&lt;Long&gt; usr_id = new ArrayList&lt;Long&gt;(Collections.singleton(user.getId()));\r\n        ArrayList&lt;String&gt; usr_name = new ArrayList&lt;String&gt;(Collections.singleton(user.getName()));\r\n        ArrayList&lt;String&gt; usr_lastname = new ArrayList&lt;&gt;(Collections.singleton(user.getLastName()));\r\n\r\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n        claims.put(&quot;usr_id&quot;, usu_id);\r\n        claims.put(&quot;usr_name&quot;, usu_name);\r\n        claims.put(&quot;usr_lastname&quot;, usu_lastname);\r\n\r\n        String[] desiredValueFromInside= {null};\r\n\r\n        Disposable myInstance= myModelRepository.getMyModelInstance()\r\n                .log()\r\n                .subscribeOn(Schedulers.parallel())\r\n                .subscribe(\r\n                    // On next\r\n                    instance-&gt; {\r\n                        desiredValueFromInside[0] = instance.getDesiredField();\r\n                        claims.put(&quot;desiredField&quot;, instance.getDesiredField());\r\n\r\n                        log.info(&quot;SUBSCRIBING, instance.getDesiredField() IS: {}&quot;, impuesto.getImp_tasa());\r\n                        log.info(&quot;SUBSCRIBING, THE VAR desiredValueFromInsideIS: {}&quot;, impuestoFromInside[0]);\r\n                    },\r\n                    // On error\r\n                    error -&gt; log.error(&quot;THERE S A PROBLEM: {}&quot;, error),\r\n                    // On complete\r\n                    () -&gt; log.info(&quot;WE ARE DONE!&quot;)\r\n                );\r\n\r\n        log.info(&quot;DEBUGGING, FROM OUTSIDE desiredValueFromInside IS: {}&quot;, desiredValueFromInside[0]);\r\n        log.info(&quot;DEBUGGING, FROM OUTSIDE claims.get(\\&quot;desiredField\\&quot;) IS: {}&quot;, claims.get(&quot;desiredField&quot;));\r\n\r\n        return doGenerateToken(claims, user.getUsername());\r\n    }\r\n\r\n\r\n    private String doGenerateToken(Map&lt;String, Object&gt; claims, String username) {\r\n        // Here generate token\r\n    }\r\n\r\n\r\n    public Boolean validateToken(String token) {\r\n        // Here validates token\r\n    }\r\n}\r\n```\r\n\r\nConsole:\r\n```\r\n.\r\n.\r\n.\r\n2022-03-02 11:21:02.485  INFO 44752 --- [ntloop-thread-0] .r.p.i.DefaultSqlClientPoolConfiguration : HR000025: Connection pool size: 100\r\n2022-03-02 11:21:02.500  INFO 44752 --- [ntloop-thread-0] c.a.o.configuration.security.JWTUtil     : DEBUGGING, FROM OUTSIDE desiredValueFromInside IS: null\r\n2022-03-02 11:21:02.500  INFO 44752 --- [ntloop-thread-0] c.a.o.configuration.security.JWTUtil     : DEBUGGING, FROM OUTSIDE claims.get(\\&quot;desiredField\\&quot;) IS: null\r\n2022-03-02 11:21:02.500  INFO 44752 --- [     parallel-2] reactor.Mono.FromPublisher.1             : onSubscribe(MonoNext.NextSubscriber)\r\n2022-03-02 11:21:02.507  INFO 44752 --- [     parallel-2] reactor.Mono.FromPublisher.1             : request(unbounded)\r\n.\r\n.\r\n.\r\n2022-03-02 11:21:03.834  INFO 44752 --- [ntloop-thread-1] reactor.Mono.FromPublisher.1             : onNext(MyModel(id=1, desired_field=&quot;I am the desired value&quot;)\r\n2022-03-02 11:21:03.849  INFO 44752 --- [ntloop-thread-1] c.a.o.configuration.security.JWTUtil     : SUBSCRIBING, instance.getDesiredField() IS: &quot;I am the desired value&quot;\r\n2022-03-02 11:21:03.849  INFO 44752 --- [ntloop-thread-1] c.a.o.configuration.security.JWTUtil     : SUBSCRIBING, THE VAR desiredValueFromInsideIS: &quot;I am the desired value&quot;\r\n2022-03-02 11:21:03.849  INFO 44752 --- [ntloop-thread-1] c.a.o.configuration.security.JWTUtil     : &quot;WE ARE DONE!&quot;\r\n2022-03-02 11:21:03.849  INFO 44752 --- [ntloop-thread-1] reactor.Mono.FromPublisher.1             : onComplete()\r\n```\r\n\r\n#### WAY 2: BLOCKING WAY\r\nUtil:\r\n```\r\n\r\n@Slf4j\r\n@Component\r\npublic class JWTUtil {\r\n\r\n    @Autowired\r\n    private MyModelRepository myModelRepository;\r\n\r\n    @Value(&quot;${springbootwebfluxjjwt.jjwt.secret}&quot;)\r\n    private String secret;\r\n\r\n    @Value(&quot;${springbootwebfluxjjwt.jjwt.expiration}&quot;)\r\n    private String expirationTime;\r\n\r\n    private Key key;\r\n\r\n\r\n    @PostConstruct\r\n    public void init(){\r\n        this.key = Keys.hmacShaKeyFor(secret.getBytes());\r\n    }\r\n\r\n\r\n    public Claims getAllClaimsFromToken(String token) {\r\n        // Here get token claims\r\n    }\r\n\r\n\r\n    public String getUsernameFromToken(String token) {\r\n        // Here get token username\r\n    }\r\n\r\n\r\n    public Date getExpirationDateFromToken(String token) {\r\n        // Here get expiration date from token;\r\n    }\r\n\r\n\r\n    private Boolean isTokenExpired(String token) {\r\n        // Here validates token\r\n    }\r\n\r\n\r\n    public String generateToken (User user) {\r\n\r\n        ArrayList&lt;Long&gt; usr_id = new ArrayList&lt;Long&gt;(Collections.singleton(user.getId()));\r\n        ArrayList&lt;String&gt; usr_name = new ArrayList&lt;String&gt;(Collections.singleton(user.getName()));\r\n        ArrayList&lt;String&gt; usr_lastname = new ArrayList&lt;&gt;(Collections.singleton(user.getLastName()));\r\n\r\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n        claims.put(&quot;usr_id&quot;, usu_id);\r\n        claims.put(&quot;usr_name&quot;, usu_name);\r\n        claims.put(&quot;usr_lastname&quot;, usu_lastname);\r\n\r\n        String[] desiredValueFromInside= {null};\r\n\r\n        String desiredField = myModelRepository.getMyModelInstance()\r\n                .map(MyModel::getDesiredField)\r\n                .share()\r\n                .block();\r\n\r\n        desiredValueFromInside[0] = instance.getDesiredField();\r\n        claims.put(&quot;desiredField&quot;, instance.getDesiredField());\r\n\r\n        log.info(&quot;DEBUGGING, FROM OUTSIDE desiredValueFromInside IS: {}&quot;, desiredValueFromInside[0]);\r\n        log.info(&quot;DEBUGGING, FROM OUTSIDE claims.get(\\&quot;desiredField\\&quot;) IS: {}&quot;, claims.get(&quot;desiredField&quot;));\r\n\r\n        return doGenerateToken(claims, user.getUsername());\r\n    }\r\n\r\n\r\n    private String doGenerateToken(Map&lt;String, Object&gt; claims, String username) {\r\n        // Here generate token\r\n    }\r\n\r\n\r\n    public Boolean validateToken(String token) {\r\n        // Here validates token\r\n    }\r\n}\r\n```\r\n\r\nConsole: There are and infinite loop of this console log.\r\n```\r\n.\r\n.\r\n.\r\n2022-03-02 11:40:58.640  WARN 38436 --- [-thread-checker] io.vertx.core.impl.BlockedThreadChecker  : Thread Thread[vert.x-eventloop-thread-0,5,main] has been blocked for 9212 ms, time limit is 2000 ms\r\n\r\nio.vertx.core.VertxException: Thread blocked\r\n\tat java.base@11.0.12/java.lang.Thread.sleep(Native Method) ~[na:na]\r\n\tat app//reactor.core.publisher.NextProcessor.block(NextProcessor.java:135) ~[reactor-core-3.4.14.jar:3.4.14]\r\n\tat app//reactor.core.publisher.MonoProcessor.block(MonoProcessor.java:116) ~[reactor-core-3.4.14.jar:3.4.14]\r\n.\r\n.\r\n.\r\n```\r\n\r\n","title":"Spring Webflux: Extract a value from a Mono and save it into another variable","body":"<p>The stack used in the API is: Spring-boot, Spring Webflux, Hibernate Reactive 1.1.3 and Postgresql.</p>\n<p>I'd like to extract a  string value from a Mono called desiredField and add it to a hashmap. I'm showing the DB, model, repository and the util module where all this is happening.</p>\n<p>The JWTUtil is used to generate a JWT token for login purposes in the API. The JWTController is working fine, coming the token in response! The only thing is that a cannot extract de string value from a Mono.</p>\n<p>I've tried two approaches. The reactive way, using the subscribe method. And the blocking way using the block method. These two approches are shown below with their own console prints.</p>\n<p><strong>In the first approach (the reactive way)</strong> I couldn't extract the desiredField from the Mono. The token comes in the response but without the desiredField in the token claims. The desiredField live only inside de stream <em>(see console log prints)</em>, outside is null.</p>\n<p><strong>In the second approach (blocking way)</strong> there are an infinite loop error without getting the token in the response.</p>\n<p>Could you help me to extract this value from the Mono?</p>\n<p>Thanks in advance!</p>\n<p>Postgres:</p>\n<pre><code>############\n# my_table #\n############\n\nid  |  desired_column\n-------------------------------\n 1  |  &quot;I am the desired value&quot;\n</code></pre>\n<p>Model:</p>\n<pre><code>@Data\n@Entity(name = &quot;MyModel&quot;)\n@Table(name = &quot;my_table&quot;)\npublic class MyModel{\n    @Id\n    @GeneratedValue\n    private long id;\n\n    @Column(name=&quot;desired_column&quot;)\n    private String desiredField;\n}\n</code></pre>\n<p>Repository:</p>\n<pre><code>@Slf4j\n@Repository\npublic class MyModelRepository {\n\n    public Mono&lt;MyModel&gt; getMyModelInstance() {\n        try{\n            EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;my-persistance&quot;);\n            Mutiny.SessionFactory factory = emf.unwrap(Mutiny.SessionFactory.class);\n\n            CriteriaBuilder builder = factory.getCriteriaBuilder();\n            CriteriaQuery&lt;MyModel&gt; criteria = builder.createQuery(MyModel.class);\n            Root&lt;MyModel&gt; root = criteria.from(MyModel.class);\n            criteria.where(builder.equal(root.get(&quot;id&quot;), &quot;1&quot;));\n\n            Uni&lt;MyModel&gt; myModelInstanceUni= factory.withSession(\n                    session -&gt; session\n                            .createQuery(criteria)\n                            .getSingleResult()\n            );\n\n            return myModelInstanceUni\n                    .convert()\n                    .with(UniReactorConverters.toMono());\n\n        } catch(Exception ex) {\n            log.error(&quot;There is an error: {}&quot;, ex.getMessage());\n            return null;\n        }\n    }\n}\n\n</code></pre>\n<h4>WAY 1: REACTIVE WAY</h4>\n<p>Util:</p>\n<pre><code>\n@Slf4j\n@Component\npublic class JWTUtil {\n\n    @Autowired\n    private MyModelRepository myModelRepository;\n\n    @Value(&quot;${springbootwebfluxjjwt.jjwt.secret}&quot;)\n    private String secret;\n\n    @Value(&quot;${springbootwebfluxjjwt.jjwt.expiration}&quot;)\n    private String expirationTime;\n\n    private Key key;\n\n\n    @PostConstruct\n    public void init(){\n        this.key = Keys.hmacShaKeyFor(secret.getBytes());\n    }\n\n\n    public Claims getAllClaimsFromToken(String token) {\n        // Here get token claims\n    }\n\n\n    public String getUsernameFromToken(String token) {\n        // Here get token username\n    }\n\n\n    public Date getExpirationDateFromToken(String token) {\n        // Here get expiration date from token;\n    }\n\n\n    private Boolean isTokenExpired(String token) {\n        // Here validates token\n    }\n\n\n    public String generateToken (User user) {\n\n        ArrayList&lt;Long&gt; usr_id = new ArrayList&lt;Long&gt;(Collections.singleton(user.getId()));\n        ArrayList&lt;String&gt; usr_name = new ArrayList&lt;String&gt;(Collections.singleton(user.getName()));\n        ArrayList&lt;String&gt; usr_lastname = new ArrayList&lt;&gt;(Collections.singleton(user.getLastName()));\n\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        claims.put(&quot;usr_id&quot;, usu_id);\n        claims.put(&quot;usr_name&quot;, usu_name);\n        claims.put(&quot;usr_lastname&quot;, usu_lastname);\n\n        String[] desiredValueFromInside= {null};\n\n        Disposable myInstance= myModelRepository.getMyModelInstance()\n                .log()\n                .subscribeOn(Schedulers.parallel())\n                .subscribe(\n                    // On next\n                    instance-&gt; {\n                        desiredValueFromInside[0] = instance.getDesiredField();\n                        claims.put(&quot;desiredField&quot;, instance.getDesiredField());\n\n                        log.info(&quot;SUBSCRIBING, instance.getDesiredField() IS: {}&quot;, impuesto.getImp_tasa());\n                        log.info(&quot;SUBSCRIBING, THE VAR desiredValueFromInsideIS: {}&quot;, impuestoFromInside[0]);\n                    },\n                    // On error\n                    error -&gt; log.error(&quot;THERE S A PROBLEM: {}&quot;, error),\n                    // On complete\n                    () -&gt; log.info(&quot;WE ARE DONE!&quot;)\n                );\n\n        log.info(&quot;DEBUGGING, FROM OUTSIDE desiredValueFromInside IS: {}&quot;, desiredValueFromInside[0]);\n        log.info(&quot;DEBUGGING, FROM OUTSIDE claims.get(\\&quot;desiredField\\&quot;) IS: {}&quot;, claims.get(&quot;desiredField&quot;));\n\n        return doGenerateToken(claims, user.getUsername());\n    }\n\n\n    private String doGenerateToken(Map&lt;String, Object&gt; claims, String username) {\n        // Here generate token\n    }\n\n\n    public Boolean validateToken(String token) {\n        // Here validates token\n    }\n}\n</code></pre>\n<p>Console:</p>\n<pre><code>.\n.\n.\n2022-03-02 11:21:02.485  INFO 44752 --- [ntloop-thread-0] .r.p.i.DefaultSqlClientPoolConfiguration : HR000025: Connection pool size: 100\n2022-03-02 11:21:02.500  INFO 44752 --- [ntloop-thread-0] c.a.o.configuration.security.JWTUtil     : DEBUGGING, FROM OUTSIDE desiredValueFromInside IS: null\n2022-03-02 11:21:02.500  INFO 44752 --- [ntloop-thread-0] c.a.o.configuration.security.JWTUtil     : DEBUGGING, FROM OUTSIDE claims.get(\\&quot;desiredField\\&quot;) IS: null\n2022-03-02 11:21:02.500  INFO 44752 --- [     parallel-2] reactor.Mono.FromPublisher.1             : onSubscribe(MonoNext.NextSubscriber)\n2022-03-02 11:21:02.507  INFO 44752 --- [     parallel-2] reactor.Mono.FromPublisher.1             : request(unbounded)\n.\n.\n.\n2022-03-02 11:21:03.834  INFO 44752 --- [ntloop-thread-1] reactor.Mono.FromPublisher.1             : onNext(MyModel(id=1, desired_field=&quot;I am the desired value&quot;)\n2022-03-02 11:21:03.849  INFO 44752 --- [ntloop-thread-1] c.a.o.configuration.security.JWTUtil     : SUBSCRIBING, instance.getDesiredField() IS: &quot;I am the desired value&quot;\n2022-03-02 11:21:03.849  INFO 44752 --- [ntloop-thread-1] c.a.o.configuration.security.JWTUtil     : SUBSCRIBING, THE VAR desiredValueFromInsideIS: &quot;I am the desired value&quot;\n2022-03-02 11:21:03.849  INFO 44752 --- [ntloop-thread-1] c.a.o.configuration.security.JWTUtil     : &quot;WE ARE DONE!&quot;\n2022-03-02 11:21:03.849  INFO 44752 --- [ntloop-thread-1] reactor.Mono.FromPublisher.1             : onComplete()\n</code></pre>\n<h4>WAY 2: BLOCKING WAY</h4>\n<p>Util:</p>\n<pre><code>\n@Slf4j\n@Component\npublic class JWTUtil {\n\n    @Autowired\n    private MyModelRepository myModelRepository;\n\n    @Value(&quot;${springbootwebfluxjjwt.jjwt.secret}&quot;)\n    private String secret;\n\n    @Value(&quot;${springbootwebfluxjjwt.jjwt.expiration}&quot;)\n    private String expirationTime;\n\n    private Key key;\n\n\n    @PostConstruct\n    public void init(){\n        this.key = Keys.hmacShaKeyFor(secret.getBytes());\n    }\n\n\n    public Claims getAllClaimsFromToken(String token) {\n        // Here get token claims\n    }\n\n\n    public String getUsernameFromToken(String token) {\n        // Here get token username\n    }\n\n\n    public Date getExpirationDateFromToken(String token) {\n        // Here get expiration date from token;\n    }\n\n\n    private Boolean isTokenExpired(String token) {\n        // Here validates token\n    }\n\n\n    public String generateToken (User user) {\n\n        ArrayList&lt;Long&gt; usr_id = new ArrayList&lt;Long&gt;(Collections.singleton(user.getId()));\n        ArrayList&lt;String&gt; usr_name = new ArrayList&lt;String&gt;(Collections.singleton(user.getName()));\n        ArrayList&lt;String&gt; usr_lastname = new ArrayList&lt;&gt;(Collections.singleton(user.getLastName()));\n\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        claims.put(&quot;usr_id&quot;, usu_id);\n        claims.put(&quot;usr_name&quot;, usu_name);\n        claims.put(&quot;usr_lastname&quot;, usu_lastname);\n\n        String[] desiredValueFromInside= {null};\n\n        String desiredField = myModelRepository.getMyModelInstance()\n                .map(MyModel::getDesiredField)\n                .share()\n                .block();\n\n        desiredValueFromInside[0] = instance.getDesiredField();\n        claims.put(&quot;desiredField&quot;, instance.getDesiredField());\n\n        log.info(&quot;DEBUGGING, FROM OUTSIDE desiredValueFromInside IS: {}&quot;, desiredValueFromInside[0]);\n        log.info(&quot;DEBUGGING, FROM OUTSIDE claims.get(\\&quot;desiredField\\&quot;) IS: {}&quot;, claims.get(&quot;desiredField&quot;));\n\n        return doGenerateToken(claims, user.getUsername());\n    }\n\n\n    private String doGenerateToken(Map&lt;String, Object&gt; claims, String username) {\n        // Here generate token\n    }\n\n\n    public Boolean validateToken(String token) {\n        // Here validates token\n    }\n}\n</code></pre>\n<p>Console: There are and infinite loop of this console log.</p>\n<pre><code>.\n.\n.\n2022-03-02 11:40:58.640  WARN 38436 --- [-thread-checker] io.vertx.core.impl.BlockedThreadChecker  : Thread Thread[vert.x-eventloop-thread-0,5,main] has been blocked for 9212 ms, time limit is 2000 ms\n\nio.vertx.core.VertxException: Thread blocked\n    at java.base@11.0.12/java.lang.Thread.sleep(Native Method) ~[na:na]\n    at app//reactor.core.publisher.NextProcessor.block(NextProcessor.java:135) ~[reactor-core-3.4.14.jar:3.4.14]\n    at app//reactor.core.publisher.MonoProcessor.block(MonoProcessor.java:116) ~[reactor-core-3.4.14.jar:3.4.14]\n.\n.\n.\n</code></pre>\n"},{"tags":["java","arrays","search","duplicates"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1646157689,"post_id":71312743,"comment_id":126052519,"body_markdown":"When you get a new value from the scanner, you need to check that it&#39;s not already added. How would YOU do this?","body":"When you get a new value from the scanner, you need to check that it&#39;s not already added. How would YOU do this?"},{"owner":{"account_id":16507843,"reputation":772,"user_id":11927434,"display_name":"MarkusAnd"},"score":0,"creation_date":1646158333,"post_id":71312743,"comment_id":126052732,"body_markdown":"Does this answer your question? [How do I determine whether an array contains a particular value in Java?](https://stackoverflow.com/questions/1128723/how-do-i-determine-whether-an-array-contains-a-particular-value-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1128723/how-do-i-determine-whether-an-array-contains-a-particular-value-in-java\">How do I determine whether an array contains a particular value in Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":18753847,"reputation":843,"user_id":13674351,"display_name":"Jacob Steinebronn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646164131,"creation_date":1646164131,"answer_id":71313891,"question_id":71312743,"body_markdown":"You&#39;re looking to use a `HashSet`, which is built-in to Java. This is a datastructure which you can insert elements into, and also check if a certain element exists in constant time. Thus, when you read in an element, first check if the set contains said element; if so, skip it, otherwise, put it in your list of IDs and also insert it into your HashSet. You can see the documentation [here][1] \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html","title":"using one dimension array, how to identify if duplicated or not","body":"<p>You're looking to use a <code>HashSet</code>, which is built-in to Java. This is a datastructure which you can insert elements into, and also check if a certain element exists in constant time. Thus, when you read in an element, first check if the set contains said element; if so, skip it, otherwise, put it in your list of IDs and also insert it into your HashSet. You can see the documentation <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":24414487,"reputation":13,"user_id":18341509,"display_name":"bonjing"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71313891,"answer_count":1,"score":0,"last_activity_date":1646407264,"creation_date":1646157520,"question_id":71312743,"body_markdown":"allows me to enter the Id numbers without fear of duplication. my program should be able to display the list of ID numbers at the end\r\n","title":"using one dimension array, how to identify if duplicated or not","body":"<p>allows me to enter the Id numbers without fear of duplication. my program should be able to display the list of ID numbers at the end</p>\n"},{"tags":["java","quarkus","graalvm-native-image","presto-jdbc","agroal"],"answers":[{"tags":[],"owner":{"account_id":7451612,"reputation":31,"user_id":5666188,"display_name":"ThoSap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646407079,"creation_date":1646407079,"answer_id":71353476,"question_id":71353475,"body_markdown":"To fix the GraalVM native build error add the following properties [quarkus.native.additional-build-args][1] and [quarkus.native.add-all-charsets][2] to `src/main/resources/application.properties` (standard Quarkus properties):\r\n```lang-java\r\nquarkus.native.add-all-charsets=true\r\nquarkus.native.additional-build-args=--initialize-at-run-time=com.facebook.presto.jdbc.PrestoDriver\r\n````\r\nor `src/main/resources/application.yaml` (when extension quarkus-config-yaml is used):\r\n```lang-yaml\r\nquarkus:\r\n  native:\r\n    add-all-charsets: true\r\n    additional-build-args: --initialize-at-run-time=com.facebook.presto.jdbc.PrestoDriver\r\n```\r\n\r\n\r\nTo fix the native mode runtime exceptions add [an empty class annotated with bean @RegisterForReflection][3] (the name of the class does not matter with the following content.&lt;br&gt;\r\nBasically all classes of Presto DB JDBC package `com.facebook.presto.jdbc.internal.client` are using Jackson internally and therefore need to be registered for reflection.\r\n```lang-java\r\npackage com.company.api.graal;\r\n\r\nimport io.quarkus.runtime.annotations.RegisterForReflection;\r\n\r\n/**\r\n * @author ThoSap\r\n */\r\n@RegisterForReflection(targets = {\r\n    com.facebook.presto.jdbc.internal.client.ClientException.class,\r\n    com.facebook.presto.jdbc.internal.client.ClientSession.class,\r\n    com.facebook.presto.jdbc.internal.client.ClientTypeSignature.class,\r\n    com.facebook.presto.jdbc.internal.client.ClientTypeSignatureParameter.class,\r\n    com.facebook.presto.jdbc.internal.client.ClientTypeSignatureParameter.ClientTypeSignatureParameterDeserializer.class,\r\n    com.facebook.presto.jdbc.internal.client.Column.class,\r\n    com.facebook.presto.jdbc.internal.client.ErrorLocation.class,\r\n    com.facebook.presto.jdbc.internal.client.FailureInfo.class,\r\n    com.facebook.presto.jdbc.internal.client.GCSOAuthInterceptor.class,\r\n    com.facebook.presto.jdbc.internal.client.GCSOAuthScope.class,\r\n    com.facebook.presto.jdbc.internal.client.IntervalDayTime.class,\r\n    com.facebook.presto.jdbc.internal.client.IntervalYearMonth.class,\r\n    com.facebook.presto.jdbc.internal.client.JsonResponse.class,\r\n    com.facebook.presto.jdbc.internal.client.KerberosUtil.class,\r\n    com.facebook.presto.jdbc.internal.client.NodeVersion.class,\r\n    com.facebook.presto.jdbc.internal.client.OkHttpUtil.class,\r\n    com.facebook.presto.jdbc.internal.client.OkHttpUtil.NullCallback.class,\r\n    com.facebook.presto.jdbc.internal.client.PrestoHeaders.class,\r\n    com.facebook.presto.jdbc.internal.client.QueryData.class,\r\n    com.facebook.presto.jdbc.internal.client.QueryError.class,\r\n    com.facebook.presto.jdbc.internal.client.QueryResults.class,\r\n    com.facebook.presto.jdbc.internal.client.QueryStatusInfo.class,\r\n    com.facebook.presto.jdbc.internal.client.ServerInfo.class,\r\n    com.facebook.presto.jdbc.internal.client.SocketChannelSocketFactory.class,\r\n    com.facebook.presto.jdbc.internal.client.SpnegoHandler.class,\r\n    com.facebook.presto.jdbc.internal.client.StageStats.class,\r\n    com.facebook.presto.jdbc.internal.client.StageStats.Builder.class,\r\n    com.facebook.presto.jdbc.internal.client.StatementClient.class,\r\n    com.facebook.presto.jdbc.internal.client.StatementClientFactory.class,\r\n    com.facebook.presto.jdbc.internal.client.StatementStats.class,\r\n    com.facebook.presto.jdbc.internal.client.StatementStats.Builder.class\r\n})\r\npublic class PrestoDBReflection {\r\n\r\n}\r\n```\r\n\r\n\r\n  [1]: https://quarkus.io/guides/building-native-image#quarkus-native-pkg-native-config_quarkus.native.additional-build-args\r\n  [2]: https://quarkus.io/guides/building-native-image#quarkus-native-pkg-native-config_quarkus.native.add-all-charsets\r\n  [3]: https://quarkus.io/guides/writing-native-applications-tips#registering-for-reflection","title":"PrestoDB JDBC GraalVM native mode build fails and query throws exception only when run in native mode","body":"<p>To fix the GraalVM native build error add the following properties <a href=\"https://quarkus.io/guides/building-native-image#quarkus-native-pkg-native-config_quarkus.native.additional-build-args\" rel=\"nofollow noreferrer\">quarkus.native.additional-build-args</a> and <a href=\"https://quarkus.io/guides/building-native-image#quarkus-native-pkg-native-config_quarkus.native.add-all-charsets\" rel=\"nofollow noreferrer\">quarkus.native.add-all-charsets</a> to <code>src/main/resources/application.properties</code> (standard Quarkus properties):</p>\n<pre class=\"lang-java prettyprint-override\"><code>quarkus.native.add-all-charsets=true\nquarkus.native.additional-build-args=--initialize-at-run-time=com.facebook.presto.jdbc.PrestoDriver\n</code></pre>\n<p>or <code>src/main/resources/application.yaml</code> (when extension quarkus-config-yaml is used):</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>quarkus:\n  native:\n    add-all-charsets: true\n    additional-build-args: --initialize-at-run-time=com.facebook.presto.jdbc.PrestoDriver\n</code></pre>\n<p>To fix the native mode runtime exceptions add <a href=\"https://quarkus.io/guides/writing-native-applications-tips#registering-for-reflection\" rel=\"nofollow noreferrer\">an empty class annotated with bean @RegisterForReflection</a> (the name of the class does not matter with the following content.<br>\nBasically all classes of Presto DB JDBC package <code>com.facebook.presto.jdbc.internal.client</code> are using Jackson internally and therefore need to be registered for reflection.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.company.api.graal;\n\nimport io.quarkus.runtime.annotations.RegisterForReflection;\n\n/**\n * @author ThoSap\n */\n@RegisterForReflection(targets = {\n    com.facebook.presto.jdbc.internal.client.ClientException.class,\n    com.facebook.presto.jdbc.internal.client.ClientSession.class,\n    com.facebook.presto.jdbc.internal.client.ClientTypeSignature.class,\n    com.facebook.presto.jdbc.internal.client.ClientTypeSignatureParameter.class,\n    com.facebook.presto.jdbc.internal.client.ClientTypeSignatureParameter.ClientTypeSignatureParameterDeserializer.class,\n    com.facebook.presto.jdbc.internal.client.Column.class,\n    com.facebook.presto.jdbc.internal.client.ErrorLocation.class,\n    com.facebook.presto.jdbc.internal.client.FailureInfo.class,\n    com.facebook.presto.jdbc.internal.client.GCSOAuthInterceptor.class,\n    com.facebook.presto.jdbc.internal.client.GCSOAuthScope.class,\n    com.facebook.presto.jdbc.internal.client.IntervalDayTime.class,\n    com.facebook.presto.jdbc.internal.client.IntervalYearMonth.class,\n    com.facebook.presto.jdbc.internal.client.JsonResponse.class,\n    com.facebook.presto.jdbc.internal.client.KerberosUtil.class,\n    com.facebook.presto.jdbc.internal.client.NodeVersion.class,\n    com.facebook.presto.jdbc.internal.client.OkHttpUtil.class,\n    com.facebook.presto.jdbc.internal.client.OkHttpUtil.NullCallback.class,\n    com.facebook.presto.jdbc.internal.client.PrestoHeaders.class,\n    com.facebook.presto.jdbc.internal.client.QueryData.class,\n    com.facebook.presto.jdbc.internal.client.QueryError.class,\n    com.facebook.presto.jdbc.internal.client.QueryResults.class,\n    com.facebook.presto.jdbc.internal.client.QueryStatusInfo.class,\n    com.facebook.presto.jdbc.internal.client.ServerInfo.class,\n    com.facebook.presto.jdbc.internal.client.SocketChannelSocketFactory.class,\n    com.facebook.presto.jdbc.internal.client.SpnegoHandler.class,\n    com.facebook.presto.jdbc.internal.client.StageStats.class,\n    com.facebook.presto.jdbc.internal.client.StageStats.Builder.class,\n    com.facebook.presto.jdbc.internal.client.StatementClient.class,\n    com.facebook.presto.jdbc.internal.client.StatementClientFactory.class,\n    com.facebook.presto.jdbc.internal.client.StatementStats.class,\n    com.facebook.presto.jdbc.internal.client.StatementStats.Builder.class\n})\npublic class PrestoDBReflection {\n\n}\n</code></pre>\n"}],"owner":{"account_id":7451612,"reputation":31,"user_id":5666188,"display_name":"ThoSap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1031,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71353476,"answer_count":1,"score":1,"last_activity_date":1646407079,"creation_date":1646407079,"question_id":71353475,"body_markdown":"if I want to build my [Quarkus 2.7.3.Final][1] application with [GraalVM CE 22.0.0.2][2] in native mode, I get a build error caused by the PrestoDB JDBC driver.\r\n\r\nAlso, I get the following exceptions when I make a SQL query on PrestoDB 0.270 and it only occurs if I run the application in native mode.&lt;br&gt;\r\nWith the Quarkus JVM mode, the query just works fine.\r\n\r\nDocker build image: [quay.io/quarkus/ubi-quarkus-native-image:22.0.0-java17][3]\r\n\r\nI&#39;m using JDBC driver [com.facebook.presto:presto-jdbc:0.270][4] with a [custom agroal connection][5] and driver class `com.facebook.presto.jdbc.PrestoDriver`\r\n\r\n**GraalVM build error:**\r\n```\r\n/opt/graalvm/bin/native-image -J-DCoordinatorEnvironmentBean.transactionStatusManagerEnable=false -J-Dsun.nio.ch.maxUpdateArraySize=100 -J-Djava.util.logging.manager=org.jboss.logmanager.LogManager -J-Dvertx.logger-delegate-factory-class-name=io.quarkus.vertx.core.runtime.VertxLogDelegateFactory -J-Dvertx.disableDnsResolver=true -J-Dio.netty.leakDetection.level=DISABLED -J-Dio.netty.allocator.maxOrder=3 -J-Duser.language=en -J-Duser.country=US -J-Dfile.encoding=UTF-8 -H:-ParseOnce -J--add-exports=java.security.jgss/sun.security.krb5=ALL-UNNAMED -J--add-opens=java.base/java.text=ALL-UNNAMED -J--enable-preview --initialize-at-run-time=oracle.xml.util.UnicodeUtil --trace-object-instantiation=java.security.SecureRandom -H:InitialCollectionPolicy=com.oracle.svm.core.genscavenge.CollectionPolicy\\$BySpaceAndTime -H:+JNI -H:+AllowFoldMethods -J-Djava.awt.headless=true -H:FallbackThreshold=0 --allow-incomplete-classpath -H:+ReportExceptionStackTraces -J-Xmx8g -H:+AddAllCharsets -H:EnableURLProtocols=http,https -H:NativeLinkerOption=-no-pie -H:+AllowVMInspection -H:-UseServiceLoaderFeature -H:+StackTrace -H:DashboardDump=api-4.3.17_dashboard.dump -H:+DashboardAll --exclude-config .*com\\.oracle\\.database\\.jdbc.* /META-INF/native-image/(?:native-image\\.properties|reflect-config\\.json) api-4.3.17-runner -jar api-4.3.17-runner.jar\r\n========================================================================================================================\r\nGraalVM Native Image: Generating &#39;api-4.3.17-runner&#39;...\r\n========================================================================================================================\r\n[1/7] Initializing...                                                                                   (10.7s @ 0.24GB)\r\n# Printing Dashboard BGV dump header to: /code/build/api-4.3.17-native-image-source-jar/api-4.3.17_dashboard.dump.bgv\r\n Version info: &#39;GraalVM 22.0.0.2 Java 17 CE&#39;\r\n 4 user-provided feature(s)\r\n  - com.oracle.svm.thirdparty.gson.GsonFeature\r\n  - io.quarkus.runner.AutoFeature\r\n  - io.quarkus.runtime.graal.ResourcesFeature\r\n  - oracle.nativeimage.NativeImageFeature\r\nThe bundle named: com/sun/rowset/RowSetResourceBundle, has not been found. If the bundle is part of a module, verify the bundle name is a fully qualified class name. Otherwise verify the bundle path is accessible in the classpath.\r\n[2/7] Performing analysis...  [**********]                                                             (159.1s @ 3.41GB)\r\n10:27:46,716 INFO  [org.jbo.threads] JBoss Threads version 3.4.2.Final\r\n  28,036 (96.99%) of 28,905 classes reachable\r\n  45,951 (70.09%) of 65,556 fields reachable\r\n 163,540 (83.39%) of 196,125 methods reachable\r\n     865 classes, 2,527 fields, and 13,784 methods registered for reflection\r\n      71 classes,    98 fields, and    56 methods registered for JNI access\r\n# Printing Dashboard PointsTo analysis BGV dump to: /code/build/api-4.3.17-native-image-source-jar/api-4.3.17_dashboard.dump.bgv\r\nPrint of Dashboard dump output ended.\r\n\r\nError: Detected an instance of Random/SplittableRandom class in the image heap. Instances created during image generation have cached seed values and don&#39;t behave as expected.  Object has been initialized by the com.facebook.presto.jdbc.PrestoDriver class initializer with a trace: \r\n \tat java.security.SecureRandom.&lt;init&gt;(SecureRandom.java:224)\r\n\tat sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:103)\r\n\tat javax.net.ssl.SSLContext.init(SSLContext.java:314)\r\n\tat com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.systemDefaultSslSocketFactory(OkHttpClient.java:299)\r\n\tat com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:253)\r\n\tat com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:919)\r\n\tat com.facebook.presto.jdbc.PrestoDriver.&lt;init&gt;(PrestoDriver.java:48)\r\n\tat com.facebook.presto.jdbc.PrestoDriver.&lt;clinit&gt;(PrestoDriver.java:65)\r\n. Try avoiding to initialize the class that caused initialization of the object. The object was probably created by a class initializer and is reachable from a static field. You can request class initialization at image runtime by using the option --initialize-at-run-time=&lt;class-name&gt;. Or you can write your own initialization methods and call them explicitly from your main entry point.\r\nDetailed message:\r\nTrace: Object was reached by \r\n\treading field sun.security.ssl.SSLContextImpl.secureRandom of\r\n\t\tconstant sun.security.ssl.SSLContextImpl$TLSContext@44080492 reached by \r\n\treading field sun.security.ssl.SSLSocketFactoryImpl.context of\r\n\t\tconstant sun.security.ssl.SSLSocketFactoryImpl@36d3ab49 reached by \r\n\treading field com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.sslSocketFactory of\r\n\t\tconstant com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient@49ecd0c8 reached by \r\n\treading field com.facebook.presto.jdbc.PrestoDriver.httpClient of\r\n\t\tconstant com.facebook.presto.jdbc.PrestoDriver@6d0a2e53 reached by \r\n\treading field java.sql.DriverInfo.driver of\r\n\t\tconstant java.sql.DriverInfo@6fdaa47 reached by \r\n\tindexing into array\r\n\t\tconstant java.lang.Object[]@d8e2fa6 reached by \r\n\treading field java.util.concurrent.CopyOnWriteArrayList.array of\r\n\t\tconstant java.util.concurrent.CopyOnWriteArrayList@7ff98a2e reached by \r\n\tscanning method java.sql.DriverManager.getDriver(DriverManager.java:278)\r\n------------------------------------------------------------------------------------------------------------------------\r\n                       28.5s (13.8% of total time) in 67 GCs | Peak RSS: 6.86GB | CPU load: 3.36\r\n------------------------------------------------------------------------------------------------------------------------\r\nProduced artifacts:\r\n /code/build/api-4.3.17-native-image-source-jar/api-4.3.17-runner.build_artifacts.txt\r\n========================================================================================================================\r\nFailed generating &#39;api-4.3.17-runner&#39; after 3m 25s.\r\nCall path from entry point to java.sql.DriverManager.getDriver(String): \r\n\tat java.sql.DriverManager.getDriver(DriverManager.java:270)\r\n\tat io.agroal.pool.ConnectionFactory.newDriver(ConnectionFactory.java:112)\r\n\tat io.agroal.pool.ConnectionFactory.&lt;init&gt;(ConnectionFactory.java:68)\r\n\tat io.agroal.pool.Poolless.&lt;init&gt;(Poolless.java:86)\r\n\tat io.agroal.pool.DataSource.&lt;init&gt;(DataSource.java:35)\r\n\tat io.quarkus.agroal.runtime.DataSources.doCreateDataSource(DataSources.java:192)\r\n\tat io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:112)\r\n\tat io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:109)\r\n\tat sun.security.ec.ParametersMap$1.get(ParametersMap.java:78)\r\n\tat com.oracle.svm.core.jdk.SystemPropertiesSupport.initializeLazyValue(SystemPropertiesSupport.java:216)\r\n\tat com.oracle.svm.core.jdk.SystemPropertiesSupport.getProperty(SystemPropertiesSupport.java:169)\r\n\tat com.oracle.svm.core.jdk.Target_java_lang_System.getProperty(JavaLangSubstitutions.java:318)\r\n\tat com.oracle.svm.jni.JNIJavaCallWrappers.jniInvoke_VARARGS_System_getProperty_deeeaa72a006d330408a3b7d002c7533e108bc28(generated:0)\r\n\r\ncom.oracle.svm.core.util.UserError$UserException: Detected an instance of Random/SplittableRandom class in the image heap. Instances created during image generation have cached seed values and don&#39;t behave as expected.  Object has been initialized by the com.facebook.presto.jdbc.PrestoDriver class initializer with a trace: \r\n \tat java.security.SecureRandom.&lt;init&gt;(SecureRandom.java:224)\r\n\tat sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:103)\r\n\tat javax.net.ssl.SSLContext.init(SSLContext.java:314)\r\n\tat com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.systemDefaultSslSocketFactory(OkHttpClient.java:299)\r\n\tat com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:253)\r\n\tat com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:919)\r\n\tat com.facebook.presto.jdbc.PrestoDriver.&lt;init&gt;(PrestoDriver.java:48)\r\n\tat com.facebook.presto.jdbc.PrestoDriver.&lt;clinit&gt;(PrestoDriver.java:65)\r\n. Try avoiding to initialize the class that caused initialization of the object. The object was probably created by a class initializer and is reachable from a static field. You can request class initialization at image runtime by using the option --initialize-at-run-time=&lt;class-name&gt;. Or you can write your own initialization methods and call them explicitly from your main entry point.\r\nDetailed message:\r\nTrace: Object was reached by \r\n\treading field sun.security.ssl.SSLContextImpl.secureRandom of\r\n\t\tconstant sun.security.ssl.SSLContextImpl$TLSContext@44080492 reached by \r\n\treading field sun.security.ssl.SSLSocketFactoryImpl.context of\r\n\t\tconstant sun.security.ssl.SSLSocketFactoryImpl@36d3ab49 reached by \r\n\treading field com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.sslSocketFactory of\r\n\t\tconstant com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient@49ecd0c8 reached by \r\n\treading field com.facebook.presto.jdbc.PrestoDriver.httpClient of\r\n\t\tconstant com.facebook.presto.jdbc.PrestoDriver@6d0a2e53 reached by \r\n\treading field java.sql.DriverInfo.driver of\r\n\t\tconstant java.sql.DriverInfo@6fdaa47 reached by \r\n\tindexing into array\r\n\t\tconstant java.lang.Object[]@d8e2fa6 reached by \r\n\treading field java.util.concurrent.CopyOnWriteArrayList.array of\r\n\t\tconstant java.util.concurrent.CopyOnWriteArrayList@7ff98a2e reached by \r\n\tscanning method java.sql.DriverManager.getDriver(DriverManager.java:278)\r\nCall path from entry point to java.sql.DriverManager.getDriver(String): \r\n\tat java.sql.DriverManager.getDriver(DriverManager.java:270)\r\n\tat io.agroal.pool.ConnectionFactory.newDriver(ConnectionFactory.java:112)\r\n\tat io.agroal.pool.ConnectionFactory.&lt;init&gt;(ConnectionFactory.java:68)\r\n\tat io.agroal.pool.Poolless.&lt;init&gt;(Poolless.java:86)\r\n\tat io.agroal.pool.DataSource.&lt;init&gt;(DataSource.java:35)\r\n\tat io.quarkus.agroal.runtime.DataSources.doCreateDataSource(DataSources.java:192)\r\n\tat io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:112)\r\n\tat io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:109)\r\n\tat sun.security.ec.ParametersMap$1.get(ParametersMap.java:78)\r\n\tat com.oracle.svm.core.jdk.SystemPropertiesSupport.initializeLazyValue(SystemPropertiesSupport.java:216)\r\n\tat com.oracle.svm.core.jdk.SystemPropertiesSupport.getProperty(SystemPropertiesSupport.java:169)\r\n\tat com.oracle.svm.core.jdk.Target_java_lang_System.getProperty(JavaLangSubstitutions.java:318)\r\n\tat com.oracle.svm.jni.JNIJavaCallWrappers.jniInvoke_VARARGS_System_getProperty_deeeaa72a006d330408a3b7d002c7533e108bc28(generated:0)\r\n\r\n\tat com.oracle.svm.core.util.UserError.abort(UserError.java:87)\r\n\tat com.oracle.svm.hosted.FallbackFeature.reportAsFallback(FallbackFeature.java:233)\r\n\tat com.oracle.svm.hosted.NativeImageGenerator.runPointsToAnalysis(NativeImageGenerator.java:731)\r\n\tat com.oracle.svm.hosted.NativeImageGenerator.doRun(NativeImageGenerator.java:537)\r\n\tat com.oracle.svm.hosted.NativeImageGenerator.run(NativeImageGenerator.java:494)\r\n\tat com.oracle.svm.hosted.NativeImageGeneratorRunner.buildImage(NativeImageGeneratorRunner.java:426)\r\n\tat com.oracle.svm.hosted.NativeImageGeneratorRunner.build(NativeImageGeneratorRunner.java:587)\r\n\tat com.oracle.svm.hosted.NativeImageGeneratorRunner.main(NativeImageGeneratorRunner.java:126)\r\n\tat com.oracle.svm.hosted.NativeImageGeneratorRunner$JDK9Plus.main(NativeImageGeneratorRunner.java:617)\r\nCaused by: com.oracle.graal.pointsto.constraints.UnsupportedFeatureException: Detected an instance of Random/SplittableRandom class in the image heap. Instances created during image generation have cached seed values and don&#39;t behave as expected.  Object has been initialized by the com.facebook.presto.jdbc.PrestoDriver class initializer with a trace: \r\n \tat java.security.SecureRandom.&lt;init&gt;(SecureRandom.java:224)\r\n\tat sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:103)\r\n\tat javax.net.ssl.SSLContext.init(SSLContext.java:314)\r\n\tat com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.systemDefaultSslSocketFactory(OkHttpClient.java:299)\r\n\tat com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:253)\r\n\tat com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:919)\r\n\tat com.facebook.presto.jdbc.PrestoDriver.&lt;init&gt;(PrestoDriver.java:48)\r\n\tat com.facebook.presto.jdbc.PrestoDriver.&lt;clinit&gt;(PrestoDriver.java:65)\r\n. Try avoiding to initialize the class that caused initialization of the object. The object was probably created by a class initializer and is reachable from a static field. You can request class initialization at image runtime by using the option --initialize-at-run-time=&lt;class-name&gt;. Or you can write your own initialization methods and call them explicitly from your main entry point.\r\nDetailed message:\r\nTrace: Object was reached by \r\n\treading field sun.security.ssl.SSLContextImpl.secureRandom of\r\n\t\tconstant sun.security.ssl.SSLContextImpl$TLSContext@44080492 reached by \r\n\treading field sun.security.ssl.SSLSocketFactoryImpl.context of\r\n\t\tconstant sun.security.ssl.SSLSocketFactoryImpl@36d3ab49 reached by \r\n\treading field com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.sslSocketFactory of\r\n\t\tconstant com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient@49ecd0c8 reached by \r\n\treading field com.facebook.presto.jdbc.PrestoDriver.httpClient of\r\n\t\tconstant com.facebook.presto.jdbc.PrestoDriver@6d0a2e53 reached by \r\n\treading field java.sql.DriverInfo.driver of\r\n\t\tconstant java.sql.DriverInfo@6fdaa47 reached by \r\n\tindexing into array\r\n\t\tconstant java.lang.Object[]@d8e2fa6 reached by \r\n\treading field java.util.concurrent.CopyOnWriteArrayList.array of\r\n\t\tconstant java.util.concurrent.CopyOnWriteArrayList@7ff98a2e reached by \r\n\tscanning method java.sql.DriverManager.getDriver(DriverManager.java:278)\r\nCall path from entry point to java.sql.DriverManager.getDriver(String): \r\n\tat java.sql.DriverManager.getDriver(DriverManager.java:270)\r\n\tat io.agroal.pool.ConnectionFactory.newDriver(ConnectionFactory.java:112)\r\n\tat io.agroal.pool.ConnectionFactory.&lt;init&gt;(ConnectionFactory.java:68)\r\n\tat io.agroal.pool.Poolless.&lt;init&gt;(Poolless.java:86)\r\n\tat io.agroal.pool.DataSource.&lt;init&gt;(DataSource.java:35)\r\n\tat io.quarkus.agroal.runtime.DataSources.doCreateDataSource(DataSources.java:192)\r\n\tat io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:112)\r\n\tat io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:109)\r\n\tat sun.security.ec.ParametersMap$1.get(ParametersMap.java:78)\r\n\tat com.oracle.svm.core.jdk.SystemPropertiesSupport.initializeLazyValue(SystemPropertiesSupport.java:216)\r\n\tat com.oracle.svm.core.jdk.SystemPropertiesSupport.getProperty(SystemPropertiesSupport.java:169)\r\n\tat com.oracle.svm.core.jdk.Target_java_lang_System.getProperty(JavaLangSubstitutions.java:318)\r\n\tat com.oracle.svm.jni.JNIJavaCallWrappers.jniInvoke_VARARGS_System_getProperty_deeeaa72a006d330408a3b7d002c7533e108bc28(generated:0)\r\n\r\n\tat com.oracle.graal.pointsto.constraints.UnsupportedFeatures.report(UnsupportedFeatures.java:126)\r\n\tat com.oracle.svm.hosted.NativeImageGenerator.runPointsToAnalysis(NativeImageGenerator.java:728)\r\n\t... 6 more\r\nError: Image build request failed with exit status 1\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:quarkusBuild&#39;.\r\n&gt; io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n  \t[error]: Build step io.quarkus.deployment.pkg.steps.NativeImageBuildStep#build threw an exception: io.quarkus.deployment.pkg.steps.NativeImageBuildStep$ImageGenerationFailureException: Image generation failed. Exit code: 1\r\n  \tat io.quarkus.deployment.pkg.steps.NativeImageBuildStep.imageGenerationFailed(NativeImageBuildStep.java:397)\r\n  \tat io.quarkus.deployment.pkg.steps.NativeImageBuildStep.build(NativeImageBuildStep.java:238)\r\n  \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n  \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n  \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n  \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n  \tat io.quarkus.deployment.ExtensionLoader$2.execute(ExtensionLoader.java:882)\r\n  \tat io.quarkus.builder.BuildContext.run(BuildContext.java:277)\r\n  \tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n  \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n  \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n  \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n  \tat org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 4m 34s\r\n\r\n&gt; Task :quarkusBuild FAILED\r\nWatching 126 directories to track changes\r\nWatching 127 directories to track changes\r\nWatching 127 directories to track changes\r\n:quarkusBuild (Thread[Execution worker for &#39;:&#39; Thread 3,5,main]) completed. Took 3 mins 34.587 secs.\r\n```\r\n\r\n\r\n**Exception #1:**\r\n```lang-java\r\nCaused by: java.sql.SQLException: Error executing query\r\n        at com.facebook.presto.jdbc.PrestoStatement.internalExecute(PrestoStatement.java:307)\r\n        at com.facebook.presto.jdbc.PrestoStatement.execute(PrestoStatement.java:230)\r\n        at com.facebook.presto.jdbc.PrestoPreparedStatement.&lt;init&gt;(PrestoPreparedStatement.java:84)\r\n        at com.facebook.presto.jdbc.PrestoConnection.prepareStatement(PrestoConnection.java:142)\r\n        at io.agroal.pool.wrapper.ConnectionWrapper.prepareStatement(ConnectionWrapper.java:659)\r\n        at org.jooq.impl.ProviderEnabledConnection.prepareStatement(ProviderEnabledConnection.java:109)\r\n        at org.jooq.impl.SettingsEnabledConnection.prepareStatement(SettingsEnabledConnection.java:82)\r\n        at org.jooq.impl.AbstractResultQuery.prepare(AbstractResultQuery.java:210)\r\n        at org.jooq.impl.AbstractQuery.execute(AbstractQuery.java:307)\r\n        ... 21 more\r\nCaused by: java.lang.RuntimeException: Error starting query at https://presto.company.com/v1/statement returned an invalid response: JsonResponse{statusCode=200, statusMessage=OK, headers={connection=[keep-alive], content-length=[576], content-type=[application/json], date=[Fri, 04 Mar 2022 13:05:20 GMT], strict-transport-security=[max-age=15724800; includeSubDomains], x-content-type-options=[nosniff]}, hasValue=false} [Error: {&quot;id&quot;:&quot;20220304_130520_46663_f6dwy&quot;,&quot;infoUri&quot;:&quot;https://presto.company.com/ui/query.html?20220304_130520_46663_f6dwy&quot;,&quot;nextUri&quot;:&quot;https://presto.company.com/v1/statement/queued/20220304_130520_46663_f6dwy/y10055c8764fa947438d032161e4d18444ee5f009/1&quot;,&quot;stats&quot;:{&quot;state&quot;:&quot;QUEUED&quot;,&quot;queued&quot;:true,&quot;scheduled&quot;:false,&quot;nodes&quot;:0,&quot;totalSplits&quot;:0,&quot;queuedSplits&quot;:0,&quot;runningSplits&quot;:0,&quot;completedSplits&quot;:0,&quot;cpuTimeMillis&quot;:0,&quot;wallTimeMillis&quot;:0,&quot;queuedTimeMillis&quot;:0,&quot;elapsedTimeMillis&quot;:0,&quot;processedRows&quot;:0,&quot;processedBytes&quot;:0,&quot;physicalInputBytes&quot;:0,&quot;peakMemoryBytes&quot;:0,&quot;spilledBytes&quot;:0},&quot;warnings&quot;:[]}\r\n]\r\n        at com.facebook.presto.jdbc.internal.client.StatementClientV1.requestFailedException(StatementClientV1.java:497)\r\n        at com.facebook.presto.jdbc.internal.client.StatementClientV1.&lt;init&gt;(StatementClientV1.java:138)\r\n        at com.facebook.presto.jdbc.internal.client.StatementClientFactory.newStatementClient(StatementClientFactory.java:24)\r\n        at com.facebook.presto.jdbc.QueryExecutor.startQuery(QueryExecutor.java:46)\r\n        at com.facebook.presto.jdbc.PrestoConnection.startQuery(PrestoConnection.java:768)\r\n        at com.facebook.presto.jdbc.PrestoStatement.internalExecute(PrestoStatement.java:263)\r\n        ... 29 more\r\nCaused by: java.lang.IllegalArgumentException: Unable to create class com.facebook.presto.jdbc.internal.client.QueryResults from JSON response:\r\n[{&quot;id&quot;:&quot;20220304_130520_46663_f6dwy&quot;,&quot;infoUri&quot;:&quot;https://presto.company.com/ui/query.html?20220304_130520_46663_f6dwy&quot;,&quot;nextUri&quot;:&quot;https://presto.company.com/v1/statement/queued/20220304_130520_46663_f6dwy/y10055c8764fa947438d032161e4d18444ee5f009/1&quot;,&quot;stats&quot;:{&quot;state&quot;:&quot;QUEUED&quot;,&quot;queued&quot;:true,&quot;scheduled&quot;:false,&quot;nodes&quot;:0,&quot;totalSplits&quot;:0,&quot;queuedSplits&quot;:0,&quot;runningSplits&quot;:0,&quot;completedSplits&quot;:0,&quot;cpuTimeMillis&quot;:0,&quot;wallTimeMillis&quot;:0,&quot;queuedTimeMillis&quot;:0,&quot;elapsedTimeMillis&quot;:0,&quot;processedRows&quot;:0,&quot;processedBytes&quot;:0,&quot;physicalInputBytes&quot;:0,&quot;peakMemoryBytes&quot;:0,&quot;spilledBytes&quot;:0},&quot;warnings&quot;:[]}\r\n]\r\n        at com.facebook.presto.jdbc.internal.client.JsonResponse.&lt;init&gt;(JsonResponse.java:70)\r\n        at com.facebook.presto.jdbc.internal.client.JsonResponse.execute(JsonResponse.java:144)\r\n        at com.facebook.presto.jdbc.internal.client.StatementClientV1.&lt;init&gt;(StatementClientV1.java:135)\r\n        ... 33 more\r\nCaused by: java.lang.IllegalArgumentException: Invalid JSON string for [simple type, class com.facebook.presto.jdbc.internal.client.QueryResults]\r\n        at com.facebook.presto.jdbc.internal.com.facebook.airlift.json.JsonCodec.fromJson(JsonCodec.java:140)\r\n        at com.facebook.presto.jdbc.internal.client.JsonResponse.&lt;init&gt;(JsonResponse.java:67)\r\n        ... 35 more\r\nCaused by: com.facebook.presto.jdbc.internal.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `com.facebook.presto.jdbc.internal.client.QueryResults` (no Creators, like default construct, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n at [Source: (String)&quot;{&quot;id&quot;:&quot;20220304_130520_46663_f6dwy&quot;,&quot;infoUri&quot;:&quot;https://presto.company.com/ui/query.html?20220304_130520_46663_f6dwy&quot;,&quot;nextUri&quot;:&quot;https://presto.company.com/v1/statement/queued/20220304_130520_46663_f6dwy/y10055c8764fa947438d032161e4d18444ee5f009/1&quot;,&quot;stats&quot;:{&quot;state&quot;:&quot;QUEUED&quot;,&quot;queued&quot;:true,&quot;scheduled&quot;:false,&quot;nodes&quot;:0,&quot;totalSplits&quot;:0,&quot;queuedSplits&quot;:0,&quot;runningSplits&quot;:0,&quot;completedSplits&quot;:0,&quot;cpuTimeMillis&quot;:0,&quot;wallTimeMillis&quot;:0,&quot;queuedTimeMillis&quot;:0,&quot;elapsedTimeMillis&quot;:0,&quot;processedRows&quot;:0,&quot;processedBytes&quot;:0,&quot;[truncated 76 chars]; line: 1, column: 2]\r\n        at com.facebook.presto.jdbc.internal.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1589)\r\n        at com.facebook.presto.jdbc.internal.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1055)\r\n        at com.facebook.presto.jdbc.internal.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1297)\r\n        at com.facebook.presto.jdbc.internal.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:326)\r\n        at com.facebook.presto.jdbc.internal.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:159)\r\n        at com.facebook.presto.jdbc.internal.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1719)\r\n        at com.facebook.presto.jdbc.internal.jackson.databind.ObjectReader.readValue(ObjectReader.java:1261)\r\n        at com.facebook.presto.jdbc.internal.com.facebook.airlift.json.JsonCodec.fromJson(JsonCodec.java:137)\r\n        ... 36 more\r\n```\r\n\r\n**Exception #N:**\r\n....\r\n\r\n  [1]: https://github.com/quarkusio/quarkus/releases/tag/2.7.3.Final\r\n  [2]: https://github.com/graalvm/graalvm-ce-builds/releases/tag/vm-22.0.0.2\r\n  [3]: https://quay.io/repository/quarkus/ubi-quarkus-native-image?tab=history&amp;tag=22.0.0-java17\r\n  [4]: https://mvnrepository.com/artifact/com.facebook.presto/presto-jdbc/0.270\r\n  [5]: https://quarkus.io/guides/datasource#other-databases","title":"PrestoDB JDBC GraalVM native mode build fails and query throws exception only when run in native mode","body":"<p>if I want to build my <a href=\"https://github.com/quarkusio/quarkus/releases/tag/2.7.3.Final\" rel=\"nofollow noreferrer\">Quarkus 2.7.3.Final</a> application with <a href=\"https://github.com/graalvm/graalvm-ce-builds/releases/tag/vm-22.0.0.2\" rel=\"nofollow noreferrer\">GraalVM CE 22.0.0.2</a> in native mode, I get a build error caused by the PrestoDB JDBC driver.</p>\n<p>Also, I get the following exceptions when I make a SQL query on PrestoDB 0.270 and it only occurs if I run the application in native mode.<br>\nWith the Quarkus JVM mode, the query just works fine.</p>\n<p>Docker build image: <a href=\"https://quay.io/repository/quarkus/ubi-quarkus-native-image?tab=history&amp;tag=22.0.0-java17\" rel=\"nofollow noreferrer\">quay.io/quarkus/ubi-quarkus-native-image:22.0.0-java17</a></p>\n<p>I'm using JDBC driver <a href=\"https://mvnrepository.com/artifact/com.facebook.presto/presto-jdbc/0.270\" rel=\"nofollow noreferrer\">com.facebook.presto:presto-jdbc:0.270</a> with a <a href=\"https://quarkus.io/guides/datasource#other-databases\" rel=\"nofollow noreferrer\">custom agroal connection</a> and driver class <code>com.facebook.presto.jdbc.PrestoDriver</code></p>\n<p><strong>GraalVM build error:</strong></p>\n<pre><code>/opt/graalvm/bin/native-image -J-DCoordinatorEnvironmentBean.transactionStatusManagerEnable=false -J-Dsun.nio.ch.maxUpdateArraySize=100 -J-Djava.util.logging.manager=org.jboss.logmanager.LogManager -J-Dvertx.logger-delegate-factory-class-name=io.quarkus.vertx.core.runtime.VertxLogDelegateFactory -J-Dvertx.disableDnsResolver=true -J-Dio.netty.leakDetection.level=DISABLED -J-Dio.netty.allocator.maxOrder=3 -J-Duser.language=en -J-Duser.country=US -J-Dfile.encoding=UTF-8 -H:-ParseOnce -J--add-exports=java.security.jgss/sun.security.krb5=ALL-UNNAMED -J--add-opens=java.base/java.text=ALL-UNNAMED -J--enable-preview --initialize-at-run-time=oracle.xml.util.UnicodeUtil --trace-object-instantiation=java.security.SecureRandom -H:InitialCollectionPolicy=com.oracle.svm.core.genscavenge.CollectionPolicy\\$BySpaceAndTime -H:+JNI -H:+AllowFoldMethods -J-Djava.awt.headless=true -H:FallbackThreshold=0 --allow-incomplete-classpath -H:+ReportExceptionStackTraces -J-Xmx8g -H:+AddAllCharsets -H:EnableURLProtocols=http,https -H:NativeLinkerOption=-no-pie -H:+AllowVMInspection -H:-UseServiceLoaderFeature -H:+StackTrace -H:DashboardDump=api-4.3.17_dashboard.dump -H:+DashboardAll --exclude-config .*com\\.oracle\\.database\\.jdbc.* /META-INF/native-image/(?:native-image\\.properties|reflect-config\\.json) api-4.3.17-runner -jar api-4.3.17-runner.jar\n========================================================================================================================\nGraalVM Native Image: Generating 'api-4.3.17-runner'...\n========================================================================================================================\n[1/7] Initializing...                                                                                   (10.7s @ 0.24GB)\n# Printing Dashboard BGV dump header to: /code/build/api-4.3.17-native-image-source-jar/api-4.3.17_dashboard.dump.bgv\n Version info: 'GraalVM 22.0.0.2 Java 17 CE'\n 4 user-provided feature(s)\n  - com.oracle.svm.thirdparty.gson.GsonFeature\n  - io.quarkus.runner.AutoFeature\n  - io.quarkus.runtime.graal.ResourcesFeature\n  - oracle.nativeimage.NativeImageFeature\nThe bundle named: com/sun/rowset/RowSetResourceBundle, has not been found. If the bundle is part of a module, verify the bundle name is a fully qualified class name. Otherwise verify the bundle path is accessible in the classpath.\n[2/7] Performing analysis...  [**********]                                                             (159.1s @ 3.41GB)\n10:27:46,716 INFO  [org.jbo.threads] JBoss Threads version 3.4.2.Final\n  28,036 (96.99%) of 28,905 classes reachable\n  45,951 (70.09%) of 65,556 fields reachable\n 163,540 (83.39%) of 196,125 methods reachable\n     865 classes, 2,527 fields, and 13,784 methods registered for reflection\n      71 classes,    98 fields, and    56 methods registered for JNI access\n# Printing Dashboard PointsTo analysis BGV dump to: /code/build/api-4.3.17-native-image-source-jar/api-4.3.17_dashboard.dump.bgv\nPrint of Dashboard dump output ended.\n\nError: Detected an instance of Random/SplittableRandom class in the image heap. Instances created during image generation have cached seed values and don't behave as expected.  Object has been initialized by the com.facebook.presto.jdbc.PrestoDriver class initializer with a trace: \n    at java.security.SecureRandom.&lt;init&gt;(SecureRandom.java:224)\n    at sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:103)\n    at javax.net.ssl.SSLContext.init(SSLContext.java:314)\n    at com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.systemDefaultSslSocketFactory(OkHttpClient.java:299)\n    at com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:253)\n    at com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:919)\n    at com.facebook.presto.jdbc.PrestoDriver.&lt;init&gt;(PrestoDriver.java:48)\n    at com.facebook.presto.jdbc.PrestoDriver.&lt;clinit&gt;(PrestoDriver.java:65)\n. Try avoiding to initialize the class that caused initialization of the object. The object was probably created by a class initializer and is reachable from a static field. You can request class initialization at image runtime by using the option --initialize-at-run-time=&lt;class-name&gt;. Or you can write your own initialization methods and call them explicitly from your main entry point.\nDetailed message:\nTrace: Object was reached by \n    reading field sun.security.ssl.SSLContextImpl.secureRandom of\n        constant sun.security.ssl.SSLContextImpl$TLSContext@44080492 reached by \n    reading field sun.security.ssl.SSLSocketFactoryImpl.context of\n        constant sun.security.ssl.SSLSocketFactoryImpl@36d3ab49 reached by \n    reading field com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.sslSocketFactory of\n        constant com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient@49ecd0c8 reached by \n    reading field com.facebook.presto.jdbc.PrestoDriver.httpClient of\n        constant com.facebook.presto.jdbc.PrestoDriver@6d0a2e53 reached by \n    reading field java.sql.DriverInfo.driver of\n        constant java.sql.DriverInfo@6fdaa47 reached by \n    indexing into array\n        constant java.lang.Object[]@d8e2fa6 reached by \n    reading field java.util.concurrent.CopyOnWriteArrayList.array of\n        constant java.util.concurrent.CopyOnWriteArrayList@7ff98a2e reached by \n    scanning method java.sql.DriverManager.getDriver(DriverManager.java:278)\n------------------------------------------------------------------------------------------------------------------------\n                       28.5s (13.8% of total time) in 67 GCs | Peak RSS: 6.86GB | CPU load: 3.36\n------------------------------------------------------------------------------------------------------------------------\nProduced artifacts:\n /code/build/api-4.3.17-native-image-source-jar/api-4.3.17-runner.build_artifacts.txt\n========================================================================================================================\nFailed generating 'api-4.3.17-runner' after 3m 25s.\nCall path from entry point to java.sql.DriverManager.getDriver(String): \n    at java.sql.DriverManager.getDriver(DriverManager.java:270)\n    at io.agroal.pool.ConnectionFactory.newDriver(ConnectionFactory.java:112)\n    at io.agroal.pool.ConnectionFactory.&lt;init&gt;(ConnectionFactory.java:68)\n    at io.agroal.pool.Poolless.&lt;init&gt;(Poolless.java:86)\n    at io.agroal.pool.DataSource.&lt;init&gt;(DataSource.java:35)\n    at io.quarkus.agroal.runtime.DataSources.doCreateDataSource(DataSources.java:192)\n    at io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:112)\n    at io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:109)\n    at sun.security.ec.ParametersMap$1.get(ParametersMap.java:78)\n    at com.oracle.svm.core.jdk.SystemPropertiesSupport.initializeLazyValue(SystemPropertiesSupport.java:216)\n    at com.oracle.svm.core.jdk.SystemPropertiesSupport.getProperty(SystemPropertiesSupport.java:169)\n    at com.oracle.svm.core.jdk.Target_java_lang_System.getProperty(JavaLangSubstitutions.java:318)\n    at com.oracle.svm.jni.JNIJavaCallWrappers.jniInvoke_VARARGS_System_getProperty_deeeaa72a006d330408a3b7d002c7533e108bc28(generated:0)\n\ncom.oracle.svm.core.util.UserError$UserException: Detected an instance of Random/SplittableRandom class in the image heap. Instances created during image generation have cached seed values and don't behave as expected.  Object has been initialized by the com.facebook.presto.jdbc.PrestoDriver class initializer with a trace: \n    at java.security.SecureRandom.&lt;init&gt;(SecureRandom.java:224)\n    at sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:103)\n    at javax.net.ssl.SSLContext.init(SSLContext.java:314)\n    at com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.systemDefaultSslSocketFactory(OkHttpClient.java:299)\n    at com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:253)\n    at com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:919)\n    at com.facebook.presto.jdbc.PrestoDriver.&lt;init&gt;(PrestoDriver.java:48)\n    at com.facebook.presto.jdbc.PrestoDriver.&lt;clinit&gt;(PrestoDriver.java:65)\n. Try avoiding to initialize the class that caused initialization of the object. The object was probably created by a class initializer and is reachable from a static field. You can request class initialization at image runtime by using the option --initialize-at-run-time=&lt;class-name&gt;. Or you can write your own initialization methods and call them explicitly from your main entry point.\nDetailed message:\nTrace: Object was reached by \n    reading field sun.security.ssl.SSLContextImpl.secureRandom of\n        constant sun.security.ssl.SSLContextImpl$TLSContext@44080492 reached by \n    reading field sun.security.ssl.SSLSocketFactoryImpl.context of\n        constant sun.security.ssl.SSLSocketFactoryImpl@36d3ab49 reached by \n    reading field com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.sslSocketFactory of\n        constant com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient@49ecd0c8 reached by \n    reading field com.facebook.presto.jdbc.PrestoDriver.httpClient of\n        constant com.facebook.presto.jdbc.PrestoDriver@6d0a2e53 reached by \n    reading field java.sql.DriverInfo.driver of\n        constant java.sql.DriverInfo@6fdaa47 reached by \n    indexing into array\n        constant java.lang.Object[]@d8e2fa6 reached by \n    reading field java.util.concurrent.CopyOnWriteArrayList.array of\n        constant java.util.concurrent.CopyOnWriteArrayList@7ff98a2e reached by \n    scanning method java.sql.DriverManager.getDriver(DriverManager.java:278)\nCall path from entry point to java.sql.DriverManager.getDriver(String): \n    at java.sql.DriverManager.getDriver(DriverManager.java:270)\n    at io.agroal.pool.ConnectionFactory.newDriver(ConnectionFactory.java:112)\n    at io.agroal.pool.ConnectionFactory.&lt;init&gt;(ConnectionFactory.java:68)\n    at io.agroal.pool.Poolless.&lt;init&gt;(Poolless.java:86)\n    at io.agroal.pool.DataSource.&lt;init&gt;(DataSource.java:35)\n    at io.quarkus.agroal.runtime.DataSources.doCreateDataSource(DataSources.java:192)\n    at io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:112)\n    at io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:109)\n    at sun.security.ec.ParametersMap$1.get(ParametersMap.java:78)\n    at com.oracle.svm.core.jdk.SystemPropertiesSupport.initializeLazyValue(SystemPropertiesSupport.java:216)\n    at com.oracle.svm.core.jdk.SystemPropertiesSupport.getProperty(SystemPropertiesSupport.java:169)\n    at com.oracle.svm.core.jdk.Target_java_lang_System.getProperty(JavaLangSubstitutions.java:318)\n    at com.oracle.svm.jni.JNIJavaCallWrappers.jniInvoke_VARARGS_System_getProperty_deeeaa72a006d330408a3b7d002c7533e108bc28(generated:0)\n\n    at com.oracle.svm.core.util.UserError.abort(UserError.java:87)\n    at com.oracle.svm.hosted.FallbackFeature.reportAsFallback(FallbackFeature.java:233)\n    at com.oracle.svm.hosted.NativeImageGenerator.runPointsToAnalysis(NativeImageGenerator.java:731)\n    at com.oracle.svm.hosted.NativeImageGenerator.doRun(NativeImageGenerator.java:537)\n    at com.oracle.svm.hosted.NativeImageGenerator.run(NativeImageGenerator.java:494)\n    at com.oracle.svm.hosted.NativeImageGeneratorRunner.buildImage(NativeImageGeneratorRunner.java:426)\n    at com.oracle.svm.hosted.NativeImageGeneratorRunner.build(NativeImageGeneratorRunner.java:587)\n    at com.oracle.svm.hosted.NativeImageGeneratorRunner.main(NativeImageGeneratorRunner.java:126)\n    at com.oracle.svm.hosted.NativeImageGeneratorRunner$JDK9Plus.main(NativeImageGeneratorRunner.java:617)\nCaused by: com.oracle.graal.pointsto.constraints.UnsupportedFeatureException: Detected an instance of Random/SplittableRandom class in the image heap. Instances created during image generation have cached seed values and don't behave as expected.  Object has been initialized by the com.facebook.presto.jdbc.PrestoDriver class initializer with a trace: \n    at java.security.SecureRandom.&lt;init&gt;(SecureRandom.java:224)\n    at sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:103)\n    at javax.net.ssl.SSLContext.init(SSLContext.java:314)\n    at com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.systemDefaultSslSocketFactory(OkHttpClient.java:299)\n    at com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:253)\n    at com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:919)\n    at com.facebook.presto.jdbc.PrestoDriver.&lt;init&gt;(PrestoDriver.java:48)\n    at com.facebook.presto.jdbc.PrestoDriver.&lt;clinit&gt;(PrestoDriver.java:65)\n. Try avoiding to initialize the class that caused initialization of the object. The object was probably created by a class initializer and is reachable from a static field. You can request class initialization at image runtime by using the option --initialize-at-run-time=&lt;class-name&gt;. Or you can write your own initialization methods and call them explicitly from your main entry point.\nDetailed message:\nTrace: Object was reached by \n    reading field sun.security.ssl.SSLContextImpl.secureRandom of\n        constant sun.security.ssl.SSLContextImpl$TLSContext@44080492 reached by \n    reading field sun.security.ssl.SSLSocketFactoryImpl.context of\n        constant sun.security.ssl.SSLSocketFactoryImpl@36d3ab49 reached by \n    reading field com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient.sslSocketFactory of\n        constant com.facebook.presto.jdbc.internal.okhttp3.OkHttpClient@49ecd0c8 reached by \n    reading field com.facebook.presto.jdbc.PrestoDriver.httpClient of\n        constant com.facebook.presto.jdbc.PrestoDriver@6d0a2e53 reached by \n    reading field java.sql.DriverInfo.driver of\n        constant java.sql.DriverInfo@6fdaa47 reached by \n    indexing into array\n        constant java.lang.Object[]@d8e2fa6 reached by \n    reading field java.util.concurrent.CopyOnWriteArrayList.array of\n        constant java.util.concurrent.CopyOnWriteArrayList@7ff98a2e reached by \n    scanning method java.sql.DriverManager.getDriver(DriverManager.java:278)\nCall path from entry point to java.sql.DriverManager.getDriver(String): \n    at java.sql.DriverManager.getDriver(DriverManager.java:270)\n    at io.agroal.pool.ConnectionFactory.newDriver(ConnectionFactory.java:112)\n    at io.agroal.pool.ConnectionFactory.&lt;init&gt;(ConnectionFactory.java:68)\n    at io.agroal.pool.Poolless.&lt;init&gt;(Poolless.java:86)\n    at io.agroal.pool.DataSource.&lt;init&gt;(DataSource.java:35)\n    at io.quarkus.agroal.runtime.DataSources.doCreateDataSource(DataSources.java:192)\n    at io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:112)\n    at io.quarkus.agroal.runtime.DataSources$1.apply(DataSources.java:109)\n    at sun.security.ec.ParametersMap$1.get(ParametersMap.java:78)\n    at com.oracle.svm.core.jdk.SystemPropertiesSupport.initializeLazyValue(SystemPropertiesSupport.java:216)\n    at com.oracle.svm.core.jdk.SystemPropertiesSupport.getProperty(SystemPropertiesSupport.java:169)\n    at com.oracle.svm.core.jdk.Target_java_lang_System.getProperty(JavaLangSubstitutions.java:318)\n    at com.oracle.svm.jni.JNIJavaCallWrappers.jniInvoke_VARARGS_System_getProperty_deeeaa72a006d330408a3b7d002c7533e108bc28(generated:0)\n\n    at com.oracle.graal.pointsto.constraints.UnsupportedFeatures.report(UnsupportedFeatures.java:126)\n    at com.oracle.svm.hosted.NativeImageGenerator.runPointsToAnalysis(NativeImageGenerator.java:728)\n    ... 6 more\nError: Image build request failed with exit status 1\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':quarkusBuild'.\n&gt; io.quarkus.builder.BuildException: Build failure: Build failed due to errors\n    [error]: Build step io.quarkus.deployment.pkg.steps.NativeImageBuildStep#build threw an exception: io.quarkus.deployment.pkg.steps.NativeImageBuildStep$ImageGenerationFailureException: Image generation failed. Exit code: 1\n    at io.quarkus.deployment.pkg.steps.NativeImageBuildStep.imageGenerationFailed(NativeImageBuildStep.java:397)\n    at io.quarkus.deployment.pkg.steps.NativeImageBuildStep.build(NativeImageBuildStep.java:238)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at io.quarkus.deployment.ExtensionLoader$2.execute(ExtensionLoader.java:882)\n    at io.quarkus.builder.BuildContext.run(BuildContext.java:277)\n    at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n    at org.jboss.threads.JBossThread.run(JBossThread.java:501)\n\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 4m 34s\n\n&gt; Task :quarkusBuild FAILED\nWatching 126 directories to track changes\nWatching 127 directories to track changes\nWatching 127 directories to track changes\n:quarkusBuild (Thread[Execution worker for ':' Thread 3,5,main]) completed. Took 3 mins 34.587 secs.\n</code></pre>\n<p><strong>Exception #1:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>Caused by: java.sql.SQLException: Error executing query\n        at com.facebook.presto.jdbc.PrestoStatement.internalExecute(PrestoStatement.java:307)\n        at com.facebook.presto.jdbc.PrestoStatement.execute(PrestoStatement.java:230)\n        at com.facebook.presto.jdbc.PrestoPreparedStatement.&lt;init&gt;(PrestoPreparedStatement.java:84)\n        at com.facebook.presto.jdbc.PrestoConnection.prepareStatement(PrestoConnection.java:142)\n        at io.agroal.pool.wrapper.ConnectionWrapper.prepareStatement(ConnectionWrapper.java:659)\n        at org.jooq.impl.ProviderEnabledConnection.prepareStatement(ProviderEnabledConnection.java:109)\n        at org.jooq.impl.SettingsEnabledConnection.prepareStatement(SettingsEnabledConnection.java:82)\n        at org.jooq.impl.AbstractResultQuery.prepare(AbstractResultQuery.java:210)\n        at org.jooq.impl.AbstractQuery.execute(AbstractQuery.java:307)\n        ... 21 more\nCaused by: java.lang.RuntimeException: Error starting query at https://presto.company.com/v1/statement returned an invalid response: JsonResponse{statusCode=200, statusMessage=OK, headers={connection=[keep-alive], content-length=[576], content-type=[application/json], date=[Fri, 04 Mar 2022 13:05:20 GMT], strict-transport-security=[max-age=15724800; includeSubDomains], x-content-type-options=[nosniff]}, hasValue=false} [Error: {&quot;id&quot;:&quot;20220304_130520_46663_f6dwy&quot;,&quot;infoUri&quot;:&quot;https://presto.company.com/ui/query.html?20220304_130520_46663_f6dwy&quot;,&quot;nextUri&quot;:&quot;https://presto.company.com/v1/statement/queued/20220304_130520_46663_f6dwy/y10055c8764fa947438d032161e4d18444ee5f009/1&quot;,&quot;stats&quot;:{&quot;state&quot;:&quot;QUEUED&quot;,&quot;queued&quot;:true,&quot;scheduled&quot;:false,&quot;nodes&quot;:0,&quot;totalSplits&quot;:0,&quot;queuedSplits&quot;:0,&quot;runningSplits&quot;:0,&quot;completedSplits&quot;:0,&quot;cpuTimeMillis&quot;:0,&quot;wallTimeMillis&quot;:0,&quot;queuedTimeMillis&quot;:0,&quot;elapsedTimeMillis&quot;:0,&quot;processedRows&quot;:0,&quot;processedBytes&quot;:0,&quot;physicalInputBytes&quot;:0,&quot;peakMemoryBytes&quot;:0,&quot;spilledBytes&quot;:0},&quot;warnings&quot;:[]}\n]\n        at com.facebook.presto.jdbc.internal.client.StatementClientV1.requestFailedException(StatementClientV1.java:497)\n        at com.facebook.presto.jdbc.internal.client.StatementClientV1.&lt;init&gt;(StatementClientV1.java:138)\n        at com.facebook.presto.jdbc.internal.client.StatementClientFactory.newStatementClient(StatementClientFactory.java:24)\n        at com.facebook.presto.jdbc.QueryExecutor.startQuery(QueryExecutor.java:46)\n        at com.facebook.presto.jdbc.PrestoConnection.startQuery(PrestoConnection.java:768)\n        at com.facebook.presto.jdbc.PrestoStatement.internalExecute(PrestoStatement.java:263)\n        ... 29 more\nCaused by: java.lang.IllegalArgumentException: Unable to create class com.facebook.presto.jdbc.internal.client.QueryResults from JSON response:\n[{&quot;id&quot;:&quot;20220304_130520_46663_f6dwy&quot;,&quot;infoUri&quot;:&quot;https://presto.company.com/ui/query.html?20220304_130520_46663_f6dwy&quot;,&quot;nextUri&quot;:&quot;https://presto.company.com/v1/statement/queued/20220304_130520_46663_f6dwy/y10055c8764fa947438d032161e4d18444ee5f009/1&quot;,&quot;stats&quot;:{&quot;state&quot;:&quot;QUEUED&quot;,&quot;queued&quot;:true,&quot;scheduled&quot;:false,&quot;nodes&quot;:0,&quot;totalSplits&quot;:0,&quot;queuedSplits&quot;:0,&quot;runningSplits&quot;:0,&quot;completedSplits&quot;:0,&quot;cpuTimeMillis&quot;:0,&quot;wallTimeMillis&quot;:0,&quot;queuedTimeMillis&quot;:0,&quot;elapsedTimeMillis&quot;:0,&quot;processedRows&quot;:0,&quot;processedBytes&quot;:0,&quot;physicalInputBytes&quot;:0,&quot;peakMemoryBytes&quot;:0,&quot;spilledBytes&quot;:0},&quot;warnings&quot;:[]}\n]\n        at com.facebook.presto.jdbc.internal.client.JsonResponse.&lt;init&gt;(JsonResponse.java:70)\n        at com.facebook.presto.jdbc.internal.client.JsonResponse.execute(JsonResponse.java:144)\n        at com.facebook.presto.jdbc.internal.client.StatementClientV1.&lt;init&gt;(StatementClientV1.java:135)\n        ... 33 more\nCaused by: java.lang.IllegalArgumentException: Invalid JSON string for [simple type, class com.facebook.presto.jdbc.internal.client.QueryResults]\n        at com.facebook.presto.jdbc.internal.com.facebook.airlift.json.JsonCodec.fromJson(JsonCodec.java:140)\n        at com.facebook.presto.jdbc.internal.client.JsonResponse.&lt;init&gt;(JsonResponse.java:67)\n        ... 35 more\nCaused by: com.facebook.presto.jdbc.internal.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `com.facebook.presto.jdbc.internal.client.QueryResults` (no Creators, like default construct, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\n at [Source: (String)&quot;{&quot;id&quot;:&quot;20220304_130520_46663_f6dwy&quot;,&quot;infoUri&quot;:&quot;https://presto.company.com/ui/query.html?20220304_130520_46663_f6dwy&quot;,&quot;nextUri&quot;:&quot;https://presto.company.com/v1/statement/queued/20220304_130520_46663_f6dwy/y10055c8764fa947438d032161e4d18444ee5f009/1&quot;,&quot;stats&quot;:{&quot;state&quot;:&quot;QUEUED&quot;,&quot;queued&quot;:true,&quot;scheduled&quot;:false,&quot;nodes&quot;:0,&quot;totalSplits&quot;:0,&quot;queuedSplits&quot;:0,&quot;runningSplits&quot;:0,&quot;completedSplits&quot;:0,&quot;cpuTimeMillis&quot;:0,&quot;wallTimeMillis&quot;:0,&quot;queuedTimeMillis&quot;:0,&quot;elapsedTimeMillis&quot;:0,&quot;processedRows&quot;:0,&quot;processedBytes&quot;:0,&quot;[truncated 76 chars]; line: 1, column: 2]\n        at com.facebook.presto.jdbc.internal.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1589)\n        at com.facebook.presto.jdbc.internal.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1055)\n        at com.facebook.presto.jdbc.internal.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1297)\n        at com.facebook.presto.jdbc.internal.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:326)\n        at com.facebook.presto.jdbc.internal.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:159)\n        at com.facebook.presto.jdbc.internal.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1719)\n        at com.facebook.presto.jdbc.internal.jackson.databind.ObjectReader.readValue(ObjectReader.java:1261)\n        at com.facebook.presto.jdbc.internal.com.facebook.airlift.json.JsonCodec.fromJson(JsonCodec.java:137)\n        ... 36 more\n</code></pre>\n<p><strong>Exception #N:</strong>\n....</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1598303,"reputation":12302,"user_id":1479895,"accept_rate":78,"display_name":"Anton Belev"},"score":0,"creation_date":1646406665,"post_id":71353336,"comment_id":126122152,"body_markdown":"What do you mean by &quot;clear the value&quot;? Set it to empty string or null before calling the `inpEmail` and `inpPassowrd`?","body":"What do you mean by &quot;clear the value&quot;? Set it to empty string or null before calling the <code>inpEmail</code> and <code>inpPassowrd</code>?"},{"owner":{"account_id":13967861,"reputation":147,"user_id":10087222,"display_name":"Kevin"},"score":0,"creation_date":1646406708,"post_id":71353336,"comment_id":126122171,"body_markdown":"@AntonBelev yup, i want to set it to empty string","body":"@AntonBelev yup, i want to set it to empty string"},{"owner":{"account_id":1598303,"reputation":12302,"user_id":1479895,"accept_rate":78,"display_name":"Anton Belev"},"score":1,"creation_date":1646406774,"post_id":71353336,"comment_id":126122197,"body_markdown":"Strings are immutable in Java, so it makes me question why you have them as arguments in the first place if you want to disregard them? You could just call `inpEmail()` and `inpPassword()` without arguments (but you need to modify their definitions. If that&#39;s not an option then call them with empty string `impEmail(&quot;&quot;);`","body":"Strings are immutable in Java, so it makes me question why you have them as arguments in the first place if you want to disregard them? You could just call <code>inpEmail()</code> and <code>inpPassword()</code> without arguments (but you need to modify their definitions. If that&#39;s not an option then call them with empty string <code>impEmail(&quot;&quot;);</code>"},{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1646406815,"post_id":71353336,"comment_id":126122218,"body_markdown":"Strings are immutable in Java, assign new object in heap with the existing pointer","body":"Strings are immutable in Java, assign new object in heap with the existing pointer"},{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1646406935,"post_id":71353336,"comment_id":126122273,"body_markdown":"Does `mail = null;` and `pwd=null` not work, after passing them to sub functions?","body":"Does <code>mail = null;</code> and <code>pwd=null</code> not work, after passing them to sub functions?"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1646420746,"post_id":71353336,"comment_id":126127081,"body_markdown":"Even if you set them to null or some other string (like the empty string), the password string will still be in memory on the Java heap. Sometimes a char array or a [`GuardedString`](https://docs.oracle.com/en/middleware/idm/identity-governance/12.2.1.4/omicf/org/identityconnectors/common/security/GuardedString.html) is used to avoid this problem. Also, calling `Thread.sleep` in a constructor is borderline madness. Why are you doing that?","body":"Even if you set them to null or some other string (like the empty string), the password string will still be in memory on the Java heap. Sometimes a char array or a <a href=\"https://docs.oracle.com/en/middleware/idm/identity-governance/12.2.1.4/omicf/org/identityconnectors/common/security/GuardedString.html\" rel=\"nofollow noreferrer\"><code>GuardedString</code></a> is used to avoid this problem. Also, calling <code>Thread.sleep</code> in a constructor is borderline madness. Why are you doing that?"}],"owner":{"account_id":13967861,"reputation":147,"user_id":10087222,"display_name":"Kevin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646406754,"creation_date":1646406446,"question_id":71353336,"body_markdown":"    public HomePage Login(String mail, String pwd) throws InterruptedException {\r\n\t\tinpEmail(mail);\r\n\t\tinpPassword(pwd);\r\n\t\tThread.sleep(2000);\r\n\t\treturn clickSignIn();\r\n\t}\r\n\r\nMay I know how do I set the mail and pwd value that obtain from the parameter to empty string?","title":"How to clear the data that obtained from the parameter?","body":"<pre><code>public HomePage Login(String mail, String pwd) throws InterruptedException {\n    inpEmail(mail);\n    inpPassword(pwd);\n    Thread.sleep(2000);\n    return clickSignIn();\n}\n</code></pre>\n<p>May I know how do I set the mail and pwd value that obtain from the parameter to empty string?</p>\n"},{"tags":["java","algorithm","graph-theory"],"answers":[{"tags":[],"owner":{"account_id":1546031,"reputation":1931,"user_id":1439560,"display_name":"Huy Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646406637,"creation_date":1646406637,"answer_id":71353379,"question_id":71353032,"body_markdown":"From your description, the first structure appear in my mind:\r\n\r\n    Map&lt;String,List&lt;String&gt;&gt; mapEmployee = new HashMap&lt;String,List&lt;String&gt;&gt;();\r\n\r\nor\r\n\r\n    Map&lt;String,Set&lt;String&gt;&gt; mapEmployee = new HashMap&lt;String,Set&lt;String&gt;&gt;();\r\n\r\nfirst loop, we iterate the list of input and build the above data structure. Complexity: O(N).\r\n\r\nThen we can access the result by employeeId very quickly, complexity: O(1).\r\n\r\n    List&lt;String&gt; subordinates = mapEmployee.get(employee); O(1)\r\n    int result = subordinates.count(); // O(1)\r\n\r\nPS: Use LinkedList might speed up when you add multiple subordinates.","title":"Given Manager And Employee Find All employees under manager in &lt; O (N) time","body":"<p>From your description, the first structure appear in my mind:</p>\n<pre><code>Map&lt;String,List&lt;String&gt;&gt; mapEmployee = new HashMap&lt;String,List&lt;String&gt;&gt;();\n</code></pre>\n<p>or</p>\n<pre><code>Map&lt;String,Set&lt;String&gt;&gt; mapEmployee = new HashMap&lt;String,Set&lt;String&gt;&gt;();\n</code></pre>\n<p>first loop, we iterate the list of input and build the above data structure. Complexity: O(N).</p>\n<p>Then we can access the result by employeeId very quickly, complexity: O(1).</p>\n<pre><code>List&lt;String&gt; subordinates = mapEmployee.get(employee); O(1)\nint result = subordinates.count(); // O(1)\n</code></pre>\n<p>PS: Use LinkedList might speed up when you add multiple subordinates.</p>\n"}],"owner":{"account_id":1310600,"reputation":3828,"user_id":1258669,"accept_rate":73,"display_name":"OTUser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":412,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646406637,"creation_date":1646404921,"question_id":71353032,"body_markdown":"I was asked this in an interview:\r\n\r\nGiven subordinates and managers, construct a data structure (or use existing one) and then implement method `countReports(employeeId)` such that it prints the total direct and indirect reports.\r\n\r\nI told that I would solve it by building a Graph and then compute the in degree of each vertex, and I told the time complexity as O(V+E). Then I was asked to solve this problem in &lt; O(V) but I couldn&#39;t, am wondering if there is such solution.\r\n\r\n\t/** \r\n\r\n\tsubordinate, manager\r\n\tA, C\r\n\tB, C\r\n\tC, F\r\n\tD, E\r\n\tE, F\r\n\tF, F\r\n\r\n\tcountReports(employeeId) -&gt; num // sum of direct and indirect reports for employee with id=employeeId\r\n\r\n\teg. \r\n\r\n\tA -&gt; 0\r\n\tC -&gt; 2 // A, B\r\n\tF -&gt; 6 // C, E, F, A, B, D\r\n\r\n\tAsk:\r\n\t * implement countReports\r\n\t \r\n\t*/","title":"Given Manager And Employee Find All employees under manager in &lt; O (N) time","body":"<p>I was asked this in an interview:</p>\n<p>Given subordinates and managers, construct a data structure (or use existing one) and then implement method <code>countReports(employeeId)</code> such that it prints the total direct and indirect reports.</p>\n<p>I told that I would solve it by building a Graph and then compute the in degree of each vertex, and I told the time complexity as O(V+E). Then I was asked to solve this problem in &lt; O(V) but I couldn't, am wondering if there is such solution.</p>\n<pre><code>/** \n\nsubordinate, manager\nA, C\nB, C\nC, F\nD, E\nE, F\nF, F\n\ncountReports(employeeId) -&gt; num // sum of direct and indirect reports for employee with id=employeeId\n\neg. \n\nA -&gt; 0\nC -&gt; 2 // A, B\nF -&gt; 6 // C, E, F, A, B, D\n\nAsk:\n * implement countReports\n \n*/\n</code></pre>\n"},{"tags":["java","while-loop"],"answers":[{"tags":[],"owner":{"account_id":3551840,"reputation":527,"user_id":2966528,"accept_rate":75,"display_name":"automaton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646406124,"creation_date":1646406124,"answer_id":71353273,"question_id":71353186,"body_markdown":"You can add a `break` statement, which exits a loop, like so:\r\n\r\n    while (x &lt; 1)\r\n    {  \r\n      x = input.nextInt();\r\n\r\n      if (x &gt;= 1) \r\n      {\r\n         System.out.println(&quot;Mmm, delicious positive numbers&quot;);\r\n         break;\r\n      }\r\n\r\n      System.out.println(&quot;ERROR - number must be positive! Enter another&quot;);\r\n    }\r\n\r\nOr alternatively:\r\n\r\n    while (x &lt; 1)\r\n    {  \r\n      x = input.nextInt();\r\n\r\n      if (x &lt; 1)\r\n      {\r\n         System.out.println(&quot;ERROR - number must be positive! Enter another&quot;);\r\n      }\r\n      else\r\n      {\r\n         System.out.println(&quot;Congratulations, you can read directions!&quot;);\r\n      }\r\n    }","title":"While loop printing error statement after while(true) is broken","body":"<p>You can add a <code>break</code> statement, which exits a loop, like so:</p>\n<pre><code>while (x &lt; 1)\n{  \n  x = input.nextInt();\n\n  if (x &gt;= 1) \n  {\n     System.out.println(&quot;Mmm, delicious positive numbers&quot;);\n     break;\n  }\n\n  System.out.println(&quot;ERROR - number must be positive! Enter another&quot;);\n}\n</code></pre>\n<p>Or alternatively:</p>\n<pre><code>while (x &lt; 1)\n{  \n  x = input.nextInt();\n\n  if (x &lt; 1)\n  {\n     System.out.println(&quot;ERROR - number must be positive! Enter another&quot;);\n  }\n  else\n  {\n     System.out.println(&quot;Congratulations, you can read directions!&quot;);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1646406396,"creation_date":1646406396,"answer_id":71353327,"question_id":71353186,"body_markdown":"Read the initial number unconditionally before the loop. Then inside the loop move the printout above the `nextInt()` call.\r\n\r\n```\r\nSystem.out.println(&quot;Enter number&quot;);\r\nint x = input.nextInt();\r\n\r\nwhile (x &lt; 1)\r\n{  \r\n   System.out.println(&quot;ERROR - number must be positive! Enter another&quot;);\r\n   x = input.nextInt();\r\n}\r\n```","title":"While loop printing error statement after while(true) is broken","body":"<p>Read the initial number unconditionally before the loop. Then inside the loop move the printout above the <code>nextInt()</code> call.</p>\n<pre><code>System.out.println(&quot;Enter number&quot;);\nint x = input.nextInt();\n\nwhile (x &lt; 1)\n{  \n   System.out.println(&quot;ERROR - number must be positive! Enter another&quot;);\n   x = input.nextInt();\n}\n</code></pre>\n"}],"owner":{"display_name":"user18059812"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1646406527,"creation_date":1646405658,"question_id":71353186,"body_markdown":"In the following code, I am trying to prompt a user to enter a number, and if it is less than 1, ask for another positive number.\r\n\r\nIt seems to be working until the positive number is input but the program will print a final error message after the positive number is given.\r\n\r\nHow do I stop this error message from being printed after the positive number is input?\r\n```\r\nSystem.out.println(&quot;Enter number&quot;);\r\nint x = 0;\r\n\r\nwhile (x &lt; 1)\r\n{  \r\n   x = input.nextInt();\r\n   System.out.println(&quot;ERROR - number must be positive! Enter another&quot;);\r\n}","title":"While loop printing error statement after while(true) is broken","body":"<p>In the following code, I am trying to prompt a user to enter a number, and if it is less than 1, ask for another positive number.</p>\n<p>It seems to be working until the positive number is input but the program will print a final error message after the positive number is given.</p>\n<p>How do I stop this error message from being printed after the positive number is input?</p>\n<pre><code>System.out.println(&quot;Enter number&quot;);\nint x = 0;\n\nwhile (x &lt; 1)\n{  \n   x = input.nextInt();\n   System.out.println(&quot;ERROR - number must be positive! Enter another&quot;);\n}\n</code></pre>\n"},{"tags":["java","oop","linked-list"],"comments":[{"owner":{"account_id":3352721,"reputation":1057,"user_id":2816429,"display_name":"HariHaravelan"},"score":1,"creation_date":1646324664,"post_id":71340223,"comment_id":126100266,"body_markdown":"It should `LinkedList&lt;Customer&gt; Q = new LinkedList&lt; Customer&gt;()`\nsince `getNumber` is method `Customer`","body":"It should <code>LinkedList&lt;Customer&gt; Q = new LinkedList&lt; Customer&gt;()</code> since <code>getNumber</code> is method <code>Customer</code>"},{"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"score":1,"creation_date":1646324728,"post_id":71340223,"comment_id":126100299,"body_markdown":"Do you have to use a LinkedList?  If you know each customer will have a unique identifier, I would suggest putting them into a Map&lt;Integer, Customer&gt;, then you can lookup then up by ID and not iterate through a list.","body":"Do you have to use a LinkedList?  If you know each customer will have a unique identifier, I would suggest putting them into a Map&lt;Integer, Customer&gt;, then you can lookup then up by ID and not iterate through a list."},{"owner":{"display_name":"user11582989"},"score":0,"creation_date":1646325779,"post_id":71340223,"comment_id":126100705,"body_markdown":"@Ryan Thanks! I&#39;ll look into using a Map instead.","body":"@Ryan Thanks! I&#39;ll look into using a Map instead."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1646328594,"post_id":71340223,"comment_id":126101821,"body_markdown":"How does the `FIFO` class look like? Is it backed by a `LinkedList`?","body":"How does the <code>FIFO</code> class look like? Is it backed by a <code>LinkedList</code>?"},{"owner":{"display_name":"user11582989"},"score":0,"creation_date":1646328822,"post_id":71340223,"comment_id":126101899,"body_markdown":"@AlexanderIvanchenko the answer AP11 gave answered my question. But what do you mean by backed?","body":"@AlexanderIvanchenko the answer AP11 gave answered my question. But what do you mean by backed?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1646329060,"post_id":71340223,"comment_id":126101983,"body_markdown":"@TheBigChung  So you are not interesting to explore this topic any further? Backed by a LinkedList means built on top of a LinkedList.","body":"@TheBigChung  So you are not interesting to explore this topic any further? Backed by a LinkedList means built on top of a LinkedList."},{"owner":{"display_name":"user11582989"},"score":0,"creation_date":1646399653,"post_id":71340223,"comment_id":126119566,"body_markdown":"@AlexanderIvanchenko The ```LinkedList``` resides in the ```FIFO``` class used to store the customers. Well, my problem was partly solved, but if there is a more effective way to do what I&#39;m trying to accomplish(like using something other than a ```LinkedList```) then I&#39;d be more than happy to know.","body":"@AlexanderIvanchenko The <code>LinkedList</code> resides in the <code>FIFO</code> class used to store the customers. Well, my problem was partly solved, but if there is a more effective way to do what I&#39;m trying to accomplish(like using something other than a <code>LinkedList</code>) then I&#39;d be more than happy to know."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1646401109,"post_id":71340223,"comment_id":126120103,"body_markdown":"@TheBigChung In order to tell which collection is the most appropriate for your purposes, I need to know what operations you want to perform on a collection of customers? For instance, retrieve a customer by id, remove a customer with the given id, etc. For that, it&#39;ll be great to see the code of the `FIFO` class. If it&#39;s not fully implemented yet, then describe **all the cases** of how it is going to be used.","body":"@TheBigChung In order to tell which collection is the most appropriate for your purposes, I need to know what operations you want to perform on a collection of customers? For instance, retrieve a customer by id, remove a customer with the given id, etc. For that, it&#39;ll be great to see the code of the <code>FIFO</code> class. If it&#39;s not fully implemented yet, then describe <b>all the cases</b> of how it is going to be used."},{"owner":{"display_name":"user11582989"},"score":0,"creation_date":1646401591,"post_id":71340223,"comment_id":126120278,"body_markdown":"@AlexanderIvanchenko Oh, must have missed removing it when posting here, it was just a placeholder for another parameter.","body":"@AlexanderIvanchenko Oh, must have missed removing it when posting here, it was just a placeholder for another parameter."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1646402484,"post_id":71340223,"comment_id":126120606,"body_markdown":"@TheBigChung Ok, its not important. Please, look at my message right above yours. In order to give a suggestion, I need to see at least method declarations from the `FIFO` class (or detailed description of these methods).","body":"@TheBigChung Ok, its not important. Please, look at my message right above yours. In order to give a suggestion, I need to see at least method declarations from the <code>FIFO</code> class (or detailed description of these methods)."},{"owner":{"display_name":"user11582989"},"score":0,"creation_date":1646405633,"post_id":71340223,"comment_id":126121816,"body_markdown":"@AlexanderIvanchenko I&#39;ve now added the FIFO class and the methods it has that are being used by the CustomerFactory class.","body":"@AlexanderIvanchenko I&#39;ve now added the FIFO class and the methods it has that are being used by the CustomerFactory class."}],"answers":[{"tags":[],"owner":{"account_id":6589256,"reputation":12808,"user_id":5091073,"display_name":"Nir Levy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646324649,"creation_date":1646324649,"answer_id":71340447,"question_id":71340223,"body_markdown":"Your LinkedList should not be of type `Object`, it should have the generic type of `Customer`\r\n\r\n    LinkedList&lt;Customer&gt; Q = new LinkedList&lt;&gt;();\r\n\r\nI suggest you&#39;d read a bit about generics in Java, it will help you understand how to handle it better","title":"Accessing Objects in an LinkedList","body":"<p>Your LinkedList should not be of type <code>Object</code>, it should have the generic type of <code>Customer</code></p>\n<pre><code>LinkedList&lt;Customer&gt; Q = new LinkedList&lt;&gt;();\n</code></pre>\n<p>I suggest you'd read a bit about generics in Java, it will help you understand how to handle it better</p>\n"},{"tags":[],"owner":{"account_id":12256232,"reputation":617,"user_id":8945198,"display_name":"AP11"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646324950,"creation_date":1646324950,"answer_id":71340513,"question_id":71340223,"body_markdown":"First you are casting the `LinkedList` as a list containing of `Object` not `Customer` (also not sure, why would you use LinkedList, but ok).\r\n\r\n    LinkedList&lt;Customer&gt; Q = new LinkedList&lt;&gt;();\r\n\r\nThen you might be getting `NullPointerException`, because you are trying to access object with index 1 in this list, but the `Customer` you create and add to the list `Q` is on index **0**.\r\n\r\n    public void createCustomer(){\r\n        f.add(new Customer(1, null));\r\n        f.Q.get(0).getNumber();\r\n    }\r\n\r\nAnd last but not least, read about *Encapsulation*, don&#39;t just access other class variables by making them *public*.","title":"Accessing Objects in an LinkedList","body":"<p>First you are casting the <code>LinkedList</code> as a list containing of <code>Object</code> not <code>Customer</code> (also not sure, why would you use LinkedList, but ok).</p>\n<pre><code>LinkedList&lt;Customer&gt; Q = new LinkedList&lt;&gt;();\n</code></pre>\n<p>Then you might be getting <code>NullPointerException</code>, because you are trying to access object with index 1 in this list, but the <code>Customer</code> you create and add to the list <code>Q</code> is on index <strong>0</strong>.</p>\n<pre><code>public void createCustomer(){\n    f.add(new Customer(1, null));\n    f.Q.get(0).getNumber();\n}\n</code></pre>\n<p>And last but not least, read about <em>Encapsulation</em>, don't just access other class variables by making them <em>public</em>.</p>\n"}],"owner":{"display_name":"user11582989"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71340513,"answer_count":2,"score":0,"last_activity_date":1646405580,"creation_date":1646323694,"question_id":71340223,"body_markdown":"Im trying to create a shopping program where customers are ```objects``` assigned with a customer number(given at creation). \r\n\r\n**Class descriptions**.\r\nThe two classes seen bellow are; *Customer* and *CustomerFactory*. The *customer* class, is being used to create customers (```objects```) and assigning them with an individual customer number(*customerNumber*). *CustomerFactory* is responsible for creating the customers and putting them into an Array. \r\n\r\n**The Problem**.\r\nArises when I try retrieving the *customerNumber* from respective customer using the *getNumber* method located in the Customer class. It results in the error: ```Cannot resolve method &#39;getNumber&#39; in &#39;Object&#39;```, on line 7: &quot;.getNumber&quot;. I need to be able to get the customer numbers to, later on, display them as output.\r\n\r\n**The CustomerFactory class:**\r\n\r\n```\r\n1  public class CustomerFactory {\r\n2\r\n3     FIFO f = new FIFO();\r\n4\r\n5     public void createCustomer(){\r\n6        f.add(new Customer(1));\r\n7        f.Q.get(1).getNumber();\r\n8\r\n9     }  \r\n10 }\r\n``` \r\n\r\n**The Customer class:**\r\n\r\n```\r\n1 public class Customer {\r\n2\r\n3    public int customerNumber;\r\n4\r\n5    public Customer(int customerNumber){\r\n6        this.customerNumber = customerNumber;\r\n7\r\n8    }\r\n9\r\n10    public int getNumber(){\r\n11        return this.customerNumber;\r\n12\r\n13    }\r\n14 }\r\n```\r\n\r\n**FIFO class:**\r\n\r\n```\r\npublic class FIFO {\r\n\r\n    LinkedList&lt;Customer&gt; Q = new LinkedList&lt;Customer&gt;();\r\n\r\n    public Object get(int number){\r\n        return Q.get(number);\r\n    }\r\n\r\n    public void add(Customer o){\r\n        Q.add(o);\r\n    }\r\n\r\n}\r\n```\r\n\r\nIf there are any suggestions on how I can make this problem or anything else that you see more efficient, lmk.\r\n\r\nThanks beforehand!","title":"Accessing Objects in an LinkedList","body":"<p>Im trying to create a shopping program where customers are <code>objects</code> assigned with a customer number(given at creation).</p>\n<p><strong>Class descriptions</strong>.\nThe two classes seen bellow are; <em>Customer</em> and <em>CustomerFactory</em>. The <em>customer</em> class, is being used to create customers (<code>objects</code>) and assigning them with an individual customer number(<em>customerNumber</em>). <em>CustomerFactory</em> is responsible for creating the customers and putting them into an Array.</p>\n<p><strong>The Problem</strong>.\nArises when I try retrieving the <em>customerNumber</em> from respective customer using the <em>getNumber</em> method located in the Customer class. It results in the error: <code>Cannot resolve method 'getNumber' in 'Object'</code>, on line 7: &quot;.getNumber&quot;. I need to be able to get the customer numbers to, later on, display them as output.</p>\n<p><strong>The CustomerFactory class:</strong></p>\n<pre><code>1  public class CustomerFactory {\n2\n3     FIFO f = new FIFO();\n4\n5     public void createCustomer(){\n6        f.add(new Customer(1));\n7        f.Q.get(1).getNumber();\n8\n9     }  \n10 }\n</code></pre>\n<p><strong>The Customer class:</strong></p>\n<pre><code>1 public class Customer {\n2\n3    public int customerNumber;\n4\n5    public Customer(int customerNumber){\n6        this.customerNumber = customerNumber;\n7\n8    }\n9\n10    public int getNumber(){\n11        return this.customerNumber;\n12\n13    }\n14 }\n</code></pre>\n<p><strong>FIFO class:</strong></p>\n<pre><code>public class FIFO {\n\n    LinkedList&lt;Customer&gt; Q = new LinkedList&lt;Customer&gt;();\n\n    public Object get(int number){\n        return Q.get(number);\n    }\n\n    public void add(Customer o){\n        Q.add(o);\n    }\n\n}\n</code></pre>\n<p>If there are any suggestions on how I can make this problem or anything else that you see more efficient, lmk.</p>\n<p>Thanks beforehand!</p>\n"},{"tags":["java","maven","gradle"],"comments":[{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1646404033,"post_id":71352783,"comment_id":126121201,"body_markdown":"A side question: What does mean &quot;BOM&quot; here in this context?","body":"A side question: What does mean &quot;BOM&quot; here in this context?"},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1646404966,"post_id":71352783,"comment_id":126121546,"body_markdown":"BOM pom: https://dzone.com/articles/the-bill-of-materials-in-maven","body":"BOM pom: <a href=\"https://dzone.com/articles/the-bill-of-materials-in-maven\" rel=\"nofollow noreferrer\">dzone.com/articles/the-bill-of-materials-in-maven</a>"}],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646404894,"creation_date":1646404894,"answer_id":71353028,"question_id":71352783,"body_markdown":"The `&lt;scope&gt;import&lt;/scope&gt;` mechanism only imports the dependencyManagement, nothing else.","title":"Import POM transitively","body":"<p>The <code>&lt;scope&gt;import&lt;/scope&gt;</code> mechanism only imports the dependencyManagement, nothing else.</p>\n"}],"owner":{"account_id":14751801,"reputation":86,"user_id":10653686,"display_name":"Mikita Karaliou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646404894,"creation_date":1646403637,"question_id":71352783,"body_markdown":"I distribute my libraries using pom file. This pom file imports other poms like this:\r\n\r\n```xml\r\n&lt;dependencyManagement&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aws-java-sdk-bom&lt;/artifactId&gt;\r\n      &lt;version&gt;1.11.1024&lt;/version&gt;\r\n      &lt;scope&gt;import&lt;/scope&gt;\r\n      &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n\r\n```\r\n\r\nI expect this pom to be applied on target project too (transitively), but it doesn&#39;t work like that.\r\n\r\n```gradle\r\ndependencies {\r\n    implementation platform(&#39;com.test:test:2.2&#39;)\r\n    implementation &#39;com.amazonaws:aws-java-sdk-schemas&#39; (unable to resolve)\r\n}\r\n```","title":"Import POM transitively","body":"<p>I distribute my libraries using pom file. This pom file imports other poms like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencyManagement&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n      &lt;artifactId&gt;aws-java-sdk-bom&lt;/artifactId&gt;\n      &lt;version&gt;1.11.1024&lt;/version&gt;\n      &lt;scope&gt;import&lt;/scope&gt;\n      &lt;type&gt;pom&lt;/type&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n</code></pre>\n<p>I expect this pom to be applied on target project too (transitively), but it doesn't work like that.</p>\n<pre><code>dependencies {\n    implementation platform('com.test:test:2.2')\n    implementation 'com.amazonaws:aws-java-sdk-schemas' (unable to resolve)\n}\n</code></pre>\n"},{"tags":["java","json","jackson-databind"],"comments":[{"owner":{"account_id":12425782,"reputation":8911,"user_id":9050514,"display_name":"deadshot"},"score":2,"creation_date":1646404996,"post_id":71353024,"comment_id":126121571,"body_markdown":"Does this answer your question? [Nested Json to Map using Jackson](https://stackoverflow.com/questions/19840818/nested-json-to-map-using-jackson)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/19840818/nested-json-to-map-using-jackson\">Nested Json to Map using Jackson</a>"},{"owner":{"account_id":7730264,"reputation":35,"user_id":5853661,"display_name":"Majobber"},"score":0,"creation_date":1646642212,"post_id":71353024,"comment_id":126165176,"body_markdown":"So the solution in the link is quite close to what I&#39;ve done so far I think.  The problem I think is that the structure I&#39;m using doesn&#39;t properly describe my JSON?  So let&#39;s say I do Map&lt;String, Object&gt; map = mapper.readValue(data, new TypeReference&lt;HashMap&gt;(){});  .  Then for my data, the key is &quot;data-collections&quot; and the value is the rest of my JSON, which leaves me unable to further parse e.g. the array inside &quot;DATA.HELLO&quot;.","body":"So the solution in the link is quite close to what I&#39;ve done so far I think.  The problem I think is that the structure I&#39;m using doesn&#39;t properly describe my JSON?  So let&#39;s say I do Map&lt;String, Object&gt; map = mapper.readValue(data, new TypeReference&lt;HashMap&gt;(){});  .  Then for my data, the key is &quot;data-collections&quot; and the value is the rest of my JSON, which leaves me unable to further parse e.g. the array inside &quot;DATA.HELLO&quot;."}],"owner":{"account_id":7730264,"reputation":35,"user_id":5853661,"display_name":"Majobber"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1052,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646404862,"creation_date":1646404862,"question_id":71353024,"body_markdown":"I&#39;m currently using com.fasterxml.jackson.databind.ObjectMapper to take a JSON string and convert to a map.  I&#39;m struggling though to figure out how to work with my particular JSON input though and then how to Parse the output.  The JSON I&#39;m playing around with looks like this:\r\n\r\n```\r\n{\r\n   &quot;data&quot;:[\r\n      {\r\n         &quot;DATA.HELLO&quot;:[\r\n            {\r\n               &quot;do_something&quot;:&quot;true&quot;\r\n            }\r\n         ],\r\n         &quot;DATA.GOODBYE&quot;:[\r\n            {\r\n               &quot;do_something&quot;:&quot;false&quot;\r\n            }\r\n         ]\r\n      }\r\n   ]\r\n}\r\n```\r\n\r\nBelow is a snippet of my code.  Ultimately I want something like a Map&lt;String, Map&gt; where I can grab &quot;do_something&quot; or whatever other attribute from &quot;data.hello&quot; or &quot;data.goodbye&quot;.\r\n\r\nSo I can do something like map.get(&quot;data&quot;) to get the array, but I&#39;m not sure how to grab - for example - the DATA.HELLO piece.  I&#39;m also not sure if what I&#39;m doing here is the best way to handle this as this is the first time I&#39;ve worked with Jackson and I&#39;m fairly new to Java.  Am I on the completely wrong track here?\r\n\r\n```\r\n        String data = &quot;{\\&quot;data\\&quot;:[{\\&quot;DATA.HELLO\\&quot;:[{\\&quot;do_something\\&quot;:\\&quot;true\\&quot;}],\\&quot;DATA.GOODBYE\\&quot;:[{\\&quot;do_something\\&quot;:\\&quot;true\\&quot;}]}]}&quot;;\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        Map&lt;String, Map&gt; map = mapper.readValue(data, Map.class);\r\n        System.out.println(data);\r\n```","title":"Working with Jackson to convert nested JSON to Map","body":"<p>I'm currently using com.fasterxml.jackson.databind.ObjectMapper to take a JSON string and convert to a map.  I'm struggling though to figure out how to work with my particular JSON input though and then how to Parse the output.  The JSON I'm playing around with looks like this:</p>\n<pre><code>{\n   &quot;data&quot;:[\n      {\n         &quot;DATA.HELLO&quot;:[\n            {\n               &quot;do_something&quot;:&quot;true&quot;\n            }\n         ],\n         &quot;DATA.GOODBYE&quot;:[\n            {\n               &quot;do_something&quot;:&quot;false&quot;\n            }\n         ]\n      }\n   ]\n}\n</code></pre>\n<p>Below is a snippet of my code.  Ultimately I want something like a Map&lt;String, Map&gt; where I can grab &quot;do_something&quot; or whatever other attribute from &quot;data.hello&quot; or &quot;data.goodbye&quot;.</p>\n<p>So I can do something like map.get(&quot;data&quot;) to get the array, but I'm not sure how to grab - for example - the DATA.HELLO piece.  I'm also not sure if what I'm doing here is the best way to handle this as this is the first time I've worked with Jackson and I'm fairly new to Java.  Am I on the completely wrong track here?</p>\n<pre><code>        String data = &quot;{\\&quot;data\\&quot;:[{\\&quot;DATA.HELLO\\&quot;:[{\\&quot;do_something\\&quot;:\\&quot;true\\&quot;}],\\&quot;DATA.GOODBYE\\&quot;:[{\\&quot;do_something\\&quot;:\\&quot;true\\&quot;}]}]}&quot;;\n        ObjectMapper mapper = new ObjectMapper();\n        Map&lt;String, Map&gt; map = mapper.readValue(data, Map.class);\n        System.out.println(data);\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","jdbc"],"comments":[{"owner":{"account_id":5203431,"reputation":973,"user_id":4162134,"accept_rate":57,"display_name":"Irakli"},"score":0,"creation_date":1643893417,"post_id":70931156,"comment_id":125463256,"body_markdown":"I&#39;m having the same problem. I moved from old Spring boot to 2.6.1 version and this problem started. Do you have same spring version?","body":"I&#39;m having the same problem. I moved from old Spring boot to 2.6.1 version and this problem started. Do you have same spring version?"}],"answers":[{"tags":[],"owner":{"account_id":6421992,"reputation":166,"user_id":4978471,"display_name":"spence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646404599,"creation_date":1646404599,"answer_id":71352966,"question_id":70931156,"body_markdown":"We know why the connections where closing.  We took the vendors word on the database wait timeout, which they said was MySQL default (28800 seconds (8 hours)) ... it wasn&#39;t. \r\n\r\nRunning: \r\n\r\n&gt; SHOW VARIABLES LIKE &#39;wait_%&#39;; \r\n\r\nShowed the wait_timeout was set to 30 (30seoncds).\r\n\r\nFor us the fix was to increase the wait_timeout on the db by modifying the config and restarting the db.  \r\n\r\nWe also started to use the hikari keepalivetime.\r\n\r\nhikari:\r\n   keepaliveTime: 30000","title":"Spring boot &amp; mysql - connections closing","body":"<p>We know why the connections where closing.  We took the vendors word on the database wait timeout, which they said was MySQL default (28800 seconds (8 hours)) ... it wasn't.</p>\n<p>Running:</p>\n<blockquote>\n<p>SHOW VARIABLES LIKE 'wait_%';</p>\n</blockquote>\n<p>Showed the wait_timeout was set to 30 (30seoncds).</p>\n<p>For us the fix was to increase the wait_timeout on the db by modifying the config and restarting the db.</p>\n<p>We also started to use the hikari keepalivetime.</p>\n<p>hikari:\nkeepaliveTime: 30000</p>\n"}],"owner":{"account_id":6421992,"reputation":166,"user_id":4978471,"display_name":"spence"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4091,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71352966,"answer_count":1,"score":0,"last_activity_date":1646404599,"creation_date":1643654338,"question_id":70931156,"body_markdown":"We have an application that needs to query 2 MySQL databases (one in each DC).  We have noticed that we are constantly closing and opening connections after we query the databases, this seems to be having a hit on performance.\r\n\r\n```\r\nHikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.connectionImpl@xxxx (no operations allowed after connection closed.).  Possibly consider using a shorter maxLifetime value.\r\nHikariPool-1 - Closing connection com.mysql.cj.jdbc.connectionImpl@xxxx (connection is dead)\r\n...\r\nHikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.connectionImpl@xxxx (no operations allowed after connection closed.).  Possibly consider using a shorter maxLifetime value.\r\nHikariPool-1 - Closing connection com.mysql.cj.jdbc.connectionImpl@xxxx (connection is dead)\r\n...\r\n(repeated per number of connections)\r\n```\r\n\r\nFollowed by connections added again and we can see the pool stats confirming this.\r\n\r\n```\r\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\r\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\r\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\r\nHikariPool-1 - pool stats (total=23, active=0, idle=23, waiting=0)\r\n...\r\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\r\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\r\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\r\nHikariPool-1 - pool stats (total=26, active=0, idle=26, waiting=0)\r\n...\r\nHikariPool-1 - pool stats (total=30, active=0, idle=30, waiting=0)\r\n...\r\netc\r\n\r\n```\r\n\r\nHas anyone seen this before?  I have tried changing the maxLifeTime value and idleTimeout with no effect.  I have also tried adding connectionTestQuery = SELECT 1, but the issue still happens.\r\n\r\nMy config:\r\n\r\napplication-dev.yml\r\n```\r\nspring:\r\n   datasource1:\r\n      driverClassName: com.mysql.jdbc.Driver\r\n      jdbcUrl: XXXX\r\n      password: xxxx\r\n      username: xxxx\r\n\r\n      maximum-pool-size: 40\r\n      test-while-idle: true\r\n      test-on-borrow: false\r\n\r\n      connection-timeout: 5000\r\n      wait-timeout: 5000\r\n   datasource2:\r\n      driverClassName: com.mysql.jdbc.Driver\r\n      jdbcUrl: XXXX\r\n      password: xxxx\r\n      username: xxxx\r\n\r\n      maximum-pool-size: 40\r\n      test-while-idle: true\r\n      test-on-borrow: false\r\n\r\n      connection-timeout: 5000\r\n      wait-timeout: 5000\r\n```","title":"Spring boot &amp; mysql - connections closing","body":"<p>We have an application that needs to query 2 MySQL databases (one in each DC).  We have noticed that we are constantly closing and opening connections after we query the databases, this seems to be having a hit on performance.</p>\n<pre><code>HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.connectionImpl@xxxx (no operations allowed after connection closed.).  Possibly consider using a shorter maxLifetime value.\nHikariPool-1 - Closing connection com.mysql.cj.jdbc.connectionImpl@xxxx (connection is dead)\n...\nHikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.connectionImpl@xxxx (no operations allowed after connection closed.).  Possibly consider using a shorter maxLifetime value.\nHikariPool-1 - Closing connection com.mysql.cj.jdbc.connectionImpl@xxxx (connection is dead)\n...\n(repeated per number of connections)\n</code></pre>\n<p>Followed by connections added again and we can see the pool stats confirming this.</p>\n<pre><code>HikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\nHikariPool-1 - pool stats (total=23, active=0, idle=23, waiting=0)\n...\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\nHikariPool-1 - Added connection com.mysql.cj.jdbc.connectionImpl@xxxx\nHikariPool-1 - pool stats (total=26, active=0, idle=26, waiting=0)\n...\nHikariPool-1 - pool stats (total=30, active=0, idle=30, waiting=0)\n...\netc\n\n</code></pre>\n<p>Has anyone seen this before?  I have tried changing the maxLifeTime value and idleTimeout with no effect.  I have also tried adding connectionTestQuery = SELECT 1, but the issue still happens.</p>\n<p>My config:</p>\n<p>application-dev.yml</p>\n<pre><code>spring:\n   datasource1:\n      driverClassName: com.mysql.jdbc.Driver\n      jdbcUrl: XXXX\n      password: xxxx\n      username: xxxx\n\n      maximum-pool-size: 40\n      test-while-idle: true\n      test-on-borrow: false\n\n      connection-timeout: 5000\n      wait-timeout: 5000\n   datasource2:\n      driverClassName: com.mysql.jdbc.Driver\n      jdbcUrl: XXXX\n      password: xxxx\n      username: xxxx\n\n      maximum-pool-size: 40\n      test-while-idle: true\n      test-on-borrow: false\n\n      connection-timeout: 5000\n      wait-timeout: 5000\n</code></pre>\n"},{"tags":["java","spring-security"],"answers":[{"tags":[],"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646404436,"creation_date":1646393518,"answer_id":71350812,"question_id":71347207,"body_markdown":"So, I think it is because your checked exception in your filter. Returning null is not enough significant.\r\n\r\nIf I were you, I will use a RuntimeException which will stop the workflow at that moment, add these exception inside the webapplication exception handler and make a custom webpage to display a message for these exception or for all requests with 403 http status code (not authorized).\r\n\r\nDid you add your custom interceptor inside your Spring application config ? Inside the main file : `SpringWebapplication.java` as a Bean :\r\n\r\n    @Bean(name=&quot;securityInterceptor&quot;)\r\n    public MyFilterSecurityInterceptor securityInterceptor() {\r\n        return new MyFilterSecurityInterceptor();\r\n    }\r\n\r\nOr inside `WebConfig.java` :\r\n\r\n    private MyFilterSecurityInterceptor securityInterceptor;\r\n    //...\r\n    @Override\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        registry.addInterceptor(securityInterceptor);\r\n        registry.addInterceptor(localeChangeInterceptor);\r\n    }","title":"why does spring security ignore request interception","body":"<p>So, I think it is because your checked exception in your filter. Returning null is not enough significant.</p>\n<p>If I were you, I will use a RuntimeException which will stop the workflow at that moment, add these exception inside the webapplication exception handler and make a custom webpage to display a message for these exception or for all requests with 403 http status code (not authorized).</p>\n<p>Did you add your custom interceptor inside your Spring application config ? Inside the main file : <code>SpringWebapplication.java</code> as a Bean :</p>\n<pre><code>@Bean(name=&quot;securityInterceptor&quot;)\npublic MyFilterSecurityInterceptor securityInterceptor() {\n    return new MyFilterSecurityInterceptor();\n}\n</code></pre>\n<p>Or inside <code>WebConfig.java</code> :</p>\n<pre><code>private MyFilterSecurityInterceptor securityInterceptor;\n//...\n@Override\npublic void addInterceptors(InterceptorRegistry registry) {\n    registry.addInterceptor(securityInterceptor);\n    registry.addInterceptor(localeChangeInterceptor);\n}\n</code></pre>\n"}],"owner":{"account_id":24444358,"reputation":11,"user_id":18367563,"display_name":"conal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":448,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1646404436,"creation_date":1646373800,"question_id":71347207,"body_markdown":"I have a question: Why is it that when `getAttributes()` returns `null`, every subsequent request doesn&#39;t go through the `MyFilterSecurityInterceptor` class and it doesn&#39;t intercept for the next request or every request after that?\r\n\r\nMyFilterSecurityInterceptor\r\n\r\n```\r\n@Service\r\npublic class MyFilterSecurityInterceptor extends AbstractSecurityInterceptor implements Filter {\r\n\r\n    @Autowired\r\n    private FilterInvocationSecurityMetadataSource securityMetadataSource;\r\n\r\n    @Autowired\r\n    public void setMyAccessDecisionManager(MyAccessDecisionManager myAccessDecisionManager) {\r\n        super.setAccessDecisionManager(myAccessDecisionManager);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void init(FilterConfig filterConfig) throws ServletException {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n\r\n        FilterInvocation fi = new FilterInvocation(request, response, chain);\r\n        invoke(fi);\r\n    }\r\n\r\n    public void invoke(FilterInvocation fi) throws IOException, ServletException {\r\n        //There is a blocked url in fi\r\n        //Call the getAttributes(Object object) method of MyInvocationSecurityMetadataSource to get all the permissions corresponding to fi\r\n        //Call the decide method of MyAccessDecisionManager to verify whether the user&#39;s permissions are sufficient\r\n        InterceptorStatusToken token = super.beforeInvocation(fi);\r\n        try {\r\n            //Execute the next interceptor\r\n            fi.getChain().doFilter(fi.getRequest(), fi.getResponse());\r\n        } finally {\r\n            super.afterInvocation(token, null);\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    public void destroy() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;?&gt; getSecureObjectClass() {\r\n        return FilterInvocation.class;\r\n\r\n    }\r\n\r\n    @Override\r\n    public SecurityMetadataSource obtainSecurityMetadataSource() {\r\n        return this.securityMetadataSource;\r\n    }\r\n}\r\n```\r\n\r\nMyFilterSecurityMetadataSource\r\n```\r\npublic class MyFilterSecurityMetadataSource implements FilterInvocationSecurityMetadataSource {\r\n\r\n    @Override\r\n    public List&lt;ConfigAttribute&gt; getAttributes(Object object) {\r\n        FilterInvocation fi = (FilterInvocation) object;\r\n        HttpServletRequest request = fi.getRequest();\r\n        HttpMethod httpMethod = HttpMethod.valueOf(fi.getRequest().getMethod());\r\n\r\n        // Bypassing Security check for /js, /css and /images url\r\n        if (new AntPathRequestMatcher(&quot;/js/**&quot;).matches(request)\r\n                || new AntPathRequestMatcher(&quot;/css/**&quot;).matches(request)\r\n                || new AntPathRequestMatcher(&quot;/images/**&quot;).matches(request)\r\n                || new AntPathRequestMatcher(&quot;/login&quot;).matches(request)\r\n                || new AntPathRequestMatcher(&quot;/&quot;).matches(request)\r\n                || new AntPathRequestMatcher(&quot;/h2/**&quot;).matches(request)) {\r\n            return SecurityConfig.createList(new String[] { &quot;Allow&quot; });\r\n        }\r\n\r\n        try {\r\n            Collection&lt;? extends GrantedAuthority&gt; authorities = SecurityContextHolder.getContext().getAuthentication()\r\n                    .getAuthorities();\r\n            for (GrantedAuthority grantedAuthority : authorities) {\r\n                if(new AntPathRequestMatcher(grantedAuthority.toString()).matches(request)) {\r\n                    return SecurityConfig.createList(new String[] { &quot;Allow&quot; });\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            return SecurityConfig.createList(new String[] { &quot;Deny&quot; });\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    public Collection&lt;ConfigAttribute&gt; getAllConfigAttributes() {\r\n        return null;\r\n    }\r\n\r\n    public boolean supports(Class&lt;?&gt; clazz) {\r\n        return FilterInvocation.class.isAssignableFrom(clazz);\r\n    }\r\n}\r\n```\r\nMyAccessDecisionManager \r\n```\r\npublic class MyAccessDecisionManager implements AccessDecisionManager {\r\n\r\n    @Override\r\n    public void decide(Authentication authentication, Object object, Collection&lt;ConfigAttribute&gt; configAttributes)\r\n            throws AccessDeniedException, InsufficientAuthenticationException {\r\n\r\n        if (configAttributes == null || configAttributes.size() == 0) {\r\n            return;\r\n        }\r\n        Iterator&lt;ConfigAttribute&gt; ite = configAttributes.iterator();\r\n        if(ite.next().toString().equalsIgnoreCase(&quot;Allow&quot;)) {\r\n            return;\r\n        }\r\n        else {\r\n            System.out.println(&quot;Access is denied&quot;);\r\n            throw new AccessDeniedException(&quot;Access is denied&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(ConfigAttribute attribute) {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(Class&lt;?&gt; clazz) {\r\n        return true;\r\n    }\r\n}\r\n```\r\nconfig security\r\n```\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    private MyFilterSecurityInterceptor myFilterSecurityInterceptor;\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/h2/**&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and().httpBasic()\r\n                .and().formLogin()\r\n                .addFilterBefore(myFilterSecurityInterceptor, FilterSecurityInterceptor.class);\r\n    }\r\n}\r\n```\r\n\r\nand I have set a breakpoint in debug to check, it really only stops on the first request, and after return null is returned incoming requests are not stopped\r\n\r\n[![Debug info][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Rdblh.jpg","title":"why does spring security ignore request interception","body":"<p>I have a question: Why is it that when <code>getAttributes()</code> returns <code>null</code>, every subsequent request doesn't go through the <code>MyFilterSecurityInterceptor</code> class and it doesn't intercept for the next request or every request after that?</p>\n<p>MyFilterSecurityInterceptor</p>\n<pre><code>@Service\npublic class MyFilterSecurityInterceptor extends AbstractSecurityInterceptor implements Filter {\n\n    @Autowired\n    private FilterInvocationSecurityMetadataSource securityMetadataSource;\n\n    @Autowired\n    public void setMyAccessDecisionManager(MyAccessDecisionManager myAccessDecisionManager) {\n        super.setAccessDecisionManager(myAccessDecisionManager);\n    }\n\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n\n        FilterInvocation fi = new FilterInvocation(request, response, chain);\n        invoke(fi);\n    }\n\n    public void invoke(FilterInvocation fi) throws IOException, ServletException {\n        //There is a blocked url in fi\n        //Call the getAttributes(Object object) method of MyInvocationSecurityMetadataSource to get all the permissions corresponding to fi\n        //Call the decide method of MyAccessDecisionManager to verify whether the user's permissions are sufficient\n        InterceptorStatusToken token = super.beforeInvocation(fi);\n        try {\n            //Execute the next interceptor\n            fi.getChain().doFilter(fi.getRequest(), fi.getResponse());\n        } finally {\n            super.afterInvocation(token, null);\n        }\n    }\n\n\n    @Override\n    public void destroy() {\n\n    }\n\n    @Override\n    public Class&lt;?&gt; getSecureObjectClass() {\n        return FilterInvocation.class;\n\n    }\n\n    @Override\n    public SecurityMetadataSource obtainSecurityMetadataSource() {\n        return this.securityMetadataSource;\n    }\n}\n</code></pre>\n<p>MyFilterSecurityMetadataSource</p>\n<pre><code>public class MyFilterSecurityMetadataSource implements FilterInvocationSecurityMetadataSource {\n\n    @Override\n    public List&lt;ConfigAttribute&gt; getAttributes(Object object) {\n        FilterInvocation fi = (FilterInvocation) object;\n        HttpServletRequest request = fi.getRequest();\n        HttpMethod httpMethod = HttpMethod.valueOf(fi.getRequest().getMethod());\n\n        // Bypassing Security check for /js, /css and /images url\n        if (new AntPathRequestMatcher(&quot;/js/**&quot;).matches(request)\n                || new AntPathRequestMatcher(&quot;/css/**&quot;).matches(request)\n                || new AntPathRequestMatcher(&quot;/images/**&quot;).matches(request)\n                || new AntPathRequestMatcher(&quot;/login&quot;).matches(request)\n                || new AntPathRequestMatcher(&quot;/&quot;).matches(request)\n                || new AntPathRequestMatcher(&quot;/h2/**&quot;).matches(request)) {\n            return SecurityConfig.createList(new String[] { &quot;Allow&quot; });\n        }\n\n        try {\n            Collection&lt;? extends GrantedAuthority&gt; authorities = SecurityContextHolder.getContext().getAuthentication()\n                    .getAuthorities();\n            for (GrantedAuthority grantedAuthority : authorities) {\n                if(new AntPathRequestMatcher(grantedAuthority.toString()).matches(request)) {\n                    return SecurityConfig.createList(new String[] { &quot;Allow&quot; });\n                }\n            }\n        } catch (Exception e) {\n            return SecurityConfig.createList(new String[] { &quot;Deny&quot; });\n        }\n\n        return null;\n    }\n\n    public Collection&lt;ConfigAttribute&gt; getAllConfigAttributes() {\n        return null;\n    }\n\n    public boolean supports(Class&lt;?&gt; clazz) {\n        return FilterInvocation.class.isAssignableFrom(clazz);\n    }\n}\n</code></pre>\n<p>MyAccessDecisionManager</p>\n<pre><code>public class MyAccessDecisionManager implements AccessDecisionManager {\n\n    @Override\n    public void decide(Authentication authentication, Object object, Collection&lt;ConfigAttribute&gt; configAttributes)\n            throws AccessDeniedException, InsufficientAuthenticationException {\n\n        if (configAttributes == null || configAttributes.size() == 0) {\n            return;\n        }\n        Iterator&lt;ConfigAttribute&gt; ite = configAttributes.iterator();\n        if(ite.next().toString().equalsIgnoreCase(&quot;Allow&quot;)) {\n            return;\n        }\n        else {\n            System.out.println(&quot;Access is denied&quot;);\n            throw new AccessDeniedException(&quot;Access is denied&quot;);\n        }\n    }\n\n    @Override\n    public boolean supports(ConfigAttribute attribute) {\n        return true;\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; clazz) {\n        return true;\n    }\n}\n</code></pre>\n<p>config security</p>\n<pre><code>public class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private MyFilterSecurityInterceptor myFilterSecurityInterceptor;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http.authorizeRequests()\n                .antMatchers(&quot;/h2/**&quot;).permitAll()\n                .anyRequest().authenticated()\n                .and().httpBasic()\n                .and().formLogin()\n                .addFilterBefore(myFilterSecurityInterceptor, FilterSecurityInterceptor.class);\n    }\n}\n</code></pre>\n<p>and I have set a breakpoint in debug to check, it really only stops on the first request, and after return null is returned incoming requests are not stopped</p>\n<p><a href=\"https://i.stack.imgur.com/Rdblh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rdblh.jpg\" alt=\"Debug info\" /></a></p>\n"},{"tags":["java","node.js","angular","jakarta-ee","ocr"],"comments":[{"owner":{"account_id":11364240,"reputation":1069,"user_id":8331603,"display_name":"Thibaud"},"score":0,"creation_date":1646404845,"post_id":71352894,"comment_id":126121496,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":15845648,"reputation":1,"user_id":11433031,"display_name":"Yasminuu"},"score":0,"creation_date":1646405717,"post_id":71352894,"comment_id":126121848,"body_markdown":"i don&#39;t have a specified code because m looking for a way to begin. i used Tesseract but it doesn&#39;t help with the process.","body":"i don&#39;t have a specified code because m looking for a way to begin. i used Tesseract but it doesn&#39;t help with the process."},{"owner":{"account_id":11364240,"reputation":1069,"user_id":8331603,"display_name":"Thibaud"},"score":0,"creation_date":1646411693,"post_id":71352894,"comment_id":126124010,"body_markdown":"Stack overflow is a place where you have to show what you tried and so what you don&#39;t understand. Not a place where developper program for free. More than that there is not only one right way to do things and so we cannot just start a project for you","body":"Stack overflow is a place where you have to show what you tried and so what you don&#39;t understand. Not a place where developper program for free. More than that there is not only one right way to do things and so we cannot just start a project for you"},{"owner":{"account_id":15845648,"reputation":1,"user_id":11433031,"display_name":"Yasminuu"},"score":0,"creation_date":1646499947,"post_id":71352894,"comment_id":126140883,"body_markdown":"i don&#39;t want anyone to start a project for me like i said im looking for a way to do my task since people have experience here m just trying to take notes not asking someone for free projects","body":"i don&#39;t want anyone to start a project for me like i said im looking for a way to do my task since people have experience here m just trying to take notes not asking someone for free projects"}],"owner":{"account_id":15845648,"reputation":1,"user_id":11433031,"display_name":"Yasminuu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646404261,"creation_date":1646404261,"question_id":71352894,"body_markdown":"I want ro extract table from an image (pdf.png....) and insert the infomation in a form that holds the field where every information should be on.\r\nThen inserting it to a database and save the information.\r\nI want to use that with Angular/Java using OCR.\r\n\r\nThank you.","title":"How to extract table of information from an image (pdf.png....) and insert the infomation in a form then to a database using Angular/JEE and the OCR","body":"<p>I want ro extract table from an image (pdf.png....) and insert the infomation in a form that holds the field where every information should be on.\nThen inserting it to a database and save the information.\nI want to use that with Angular/Java using OCR.</p>\n<p>Thank you.</p>\n"},{"tags":["java","bean-validation","hibernate-validator","phone-number"],"answers":[{"tags":[],"owner":{"account_id":15908,"reputation":22122,"user_id":34102,"accept_rate":86,"display_name":"Piotr Kochaski"},"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1337467721,"creation_date":1337465464,"answer_id":10669202,"question_id":10631960,"body_markdown":"`@Size(min=10,max=10)` would do the job if by blank you mean null.\r\n\r\nIf you don&#39;t put `@NotNull` annotation, `null` value would pass validation.\r\n\r\nIf your blank means empty String then you need to use `@Pattern` validator:\r\n\r\n    @Pattern(regexp=&quot;(^$|[0-9]{10})&quot;)\r\n\r\nthis matches either empty string or 10 digits number.\r\n\r\n\r\n\r\n","title":"Validate Mobile Number using Hibernate annotation","body":"<p><code>@Size(min=10,max=10)</code> would do the job if by blank you mean null.</p>\n\n<p>If you don't put <code>@NotNull</code> annotation, <code>null</code> value would pass validation.</p>\n\n<p>If your blank means empty String then you need to use <code>@Pattern</code> validator:</p>\n\n<pre><code>@Pattern(regexp=\"(^$|[0-9]{10})\")\n</code></pre>\n\n<p>this matches either empty string or 10 digits number.</p>\n"},{"tags":[],"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1369211453,"creation_date":1369211453,"answer_id":16687021,"question_id":10631960,"body_markdown":"Maybe you could improve the suggested response with the use of [libphonenumber][1] from Google Code in order to validate your phonenumbers.\r\n\r\n\r\n  [1]: http://code.google.com/p/libphonenumber/","title":"Validate Mobile Number using Hibernate annotation","body":"<p>Maybe you could improve the suggested response with the use of <a href=\"http://code.google.com/p/libphonenumber/\" rel=\"noreferrer\">libphonenumber</a> from Google Code in order to validate your phonenumbers.</p>\n"},{"tags":[],"owner":{"account_id":5227507,"reputation":390,"user_id":4179084,"display_name":"Raj"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1535111802,"creation_date":1535111802,"answer_id":52003976,"question_id":10631960,"body_markdown":"For those who are looking for a custom validator for phone numbers using [libphonenumber][1]\r\n\r\n\r\n  [1]: https://github.com/googlei18n/libphonenumber\r\n\r\nPhoneNumber.java \r\nlibphonenumber requires locale for validation so we need to create a custom class for storing phone and regioncode\r\n\r\n    public class PhoneNumber {\r\n\r\n      @NotEmpty\r\n      private String value;\r\n\r\n      @NotEmpty\r\n      private String locale;\r\n    }\r\n\r\n@Phone Annotation \r\nWill be used to annotate fields for validation\r\n\r\n    \r\n    import javax.validation.Constraint;\r\n    import javax.validation.Payload;\r\n    import java.lang.annotation.*;\r\n\r\n    @Documented\r\n    @Constraint(validatedBy = PhoneNumberValidator.class)\r\n    @Target( { ElementType.METHOD, ElementType.FIELD })\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface Phone {\r\n    String locale() default &quot;&quot;;\r\n\r\n    String message() default &quot;Invalid phone number&quot;;\r\n    Class&lt;?&gt;[] groups() default {};\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\nPhoneNumberValidator.java\r\nIt will check phone&#39;s validity for the provided region code\r\n\r\n    \r\n  \r\n\r\n    import javax.validation.ConstraintValidator;\r\n    import javax.validation.ConstraintValidatorContext;\r\n    \r\n    public class PhoneNumberValidator implements ConstraintValidator&lt;Phone, PhoneNumber&gt; {\r\n    \r\n        @Override\r\n        public void initialize(Phone constraintAnnotation) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public boolean isValid(PhoneNumber phoneNumber, ConstraintValidatorContext context) {\r\n            if(phoneNumber.getLocale()==null || phoneNumber.getValue()==null){\r\n                return false;\r\n            }\r\n            try{\r\n                PhoneNumberUtil phoneNumberUtil = PhoneNumberUtil.getInstance();\r\n                return phoneNumberUtil.isValidNumber(phoneNumberUtil.parse(phoneNumber.getValue(), phoneNumber.getLocale()));\r\n            }\r\n            catch (NumberParseException e){\r\n                return false;\r\n            }\r\n          }\r\n        }\r\n\r\n\r\n\r\nUsage\r\n\r\n    \r\n    @Phone\r\n    private PhoneNumber phone;","title":"Validate Mobile Number using Hibernate annotation","body":"<p>For those who are looking for a custom validator for phone numbers using <a href=\"https://github.com/googlei18n/libphonenumber\" rel=\"noreferrer\">libphonenumber</a></p>\n\n<p>PhoneNumber.java \nlibphonenumber requires locale for validation so we need to create a custom class for storing phone and regioncode</p>\n\n<pre><code>public class PhoneNumber {\n\n  @NotEmpty\n  private String value;\n\n  @NotEmpty\n  private String locale;\n}\n</code></pre>\n\n<p>@Phone Annotation \nWill be used to annotate fields for validation</p>\n\n<pre><code>import javax.validation.Constraint;\nimport javax.validation.Payload;\nimport java.lang.annotation.*;\n\n@Documented\n@Constraint(validatedBy = PhoneNumberValidator.class)\n@Target( { ElementType.METHOD, ElementType.FIELD })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Phone {\nString locale() default \"\";\n\nString message() default \"Invalid phone number\";\nClass&lt;?&gt;[] groups() default {};\nClass&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n\n<p>PhoneNumberValidator.java\nIt will check phone's validity for the provided region code</p>\n\n<pre><code>import javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\n\npublic class PhoneNumberValidator implements ConstraintValidator&lt;Phone, PhoneNumber&gt; {\n\n    @Override\n    public void initialize(Phone constraintAnnotation) {\n\n    }\n\n    @Override\n    public boolean isValid(PhoneNumber phoneNumber, ConstraintValidatorContext context) {\n        if(phoneNumber.getLocale()==null || phoneNumber.getValue()==null){\n            return false;\n        }\n        try{\n            PhoneNumberUtil phoneNumberUtil = PhoneNumberUtil.getInstance();\n            return phoneNumberUtil.isValidNumber(phoneNumberUtil.parse(phoneNumber.getValue(), phoneNumber.getLocale()));\n        }\n        catch (NumberParseException e){\n            return false;\n        }\n      }\n    }\n</code></pre>\n\n<p>Usage</p>\n\n<pre><code>@Phone\nprivate PhoneNumber phone;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5712420,"reputation":21,"user_id":4513927,"display_name":"Sahin Sarkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589620871,"creation_date":1589620871,"answer_id":61834536,"question_id":10631960,"body_markdown":"Maybe it&#39;s too late to answer, but there seems to be an annotation in Hibernate Validator for exactly this purpose. \r\n\r\nIt&#39;s the @Digits(integer=, fraction=) annotation. If you specify the integer attribute to be 10, then the string will have exactly 10 digits. It can be applied to BigInteger (other number types) and also to strings. More about it can be found [here][1].\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/validator/5.1/reference/en-US/html/chapter-bean-constraints.html#validator-defineconstraints-spec","title":"Validate Mobile Number using Hibernate annotation","body":"<p>Maybe it's too late to answer, but there seems to be an annotation in Hibernate Validator for exactly this purpose. </p>\n\n<p>It's the @Digits(integer=, fraction=) annotation. If you specify the integer attribute to be 10, then the string will have exactly 10 digits. It can be applied to BigInteger (other number types) and also to strings. More about it can be found <a href=\"https://docs.jboss.org/hibernate/validator/5.1/reference/en-US/html/chapter-bean-constraints.html#validator-defineconstraints-spec\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":18849477,"reputation":1,"user_id":13748965,"display_name":"Killer Admin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626418613,"creation_date":1626376257,"answer_id":68399595,"question_id":10631960,"body_markdown":"This will work, it supports `BigDecimal`, `BigInteger`, `CharSequence`, `byte`, `short`, `int`, `long` and the respective wrappers of the primitive types.\r\n\r\n    @Range(min = 10,max= 10, message = &quot;phone_no should be exact 10 characters.&quot; )\r\n\r\nIt checks whether the annotated value lies between (inclusive) the specified minimum and maximum.\r\n\r\n","title":"Validate Mobile Number using Hibernate annotation","body":"<p>This will work, it supports <code>BigDecimal</code>, <code>BigInteger</code>, <code>CharSequence</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types.</p>\n<pre><code>@Range(min = 10,max= 10, message = &quot;phone_no should be exact 10 characters.&quot; )\n</code></pre>\n<p>It checks whether the annotated value lies between (inclusive) the specified minimum and maximum.</p>\n"},{"tags":[],"owner":{"account_id":23975853,"reputation":59,"user_id":17963959,"display_name":"Pranav Barot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646404032,"creation_date":1646404032,"answer_id":71352857,"question_id":10631960,"body_markdown":"Maybe it&#39;s too late to answer you can do this thing with Hibernate Annotation.\r\n\r\nYou have to define **@Size** annotation into your model.\r\n\r\n&gt; @Size(min = 10, max = 17, message = &quot;Number should have at least 10 or\r\n&gt; less than 17 digits&quot;)\r\n\r\nI have taken **max 17** digit validation because it also includes international mobile Validation.\r\n\r\nBy using **@Size** you can find an error message from the Annotation if you write less than 10 or greater than 17.","title":"Validate Mobile Number using Hibernate annotation","body":"<p>Maybe it's too late to answer you can do this thing with Hibernate Annotation.</p>\n<p>You have to define <strong>@Size</strong> annotation into your model.</p>\n<blockquote>\n<p>@Size(min = 10, max = 17, message = &quot;Number should have at least 10 or\nless than 17 digits&quot;)</p>\n</blockquote>\n<p>I have taken <strong>max 17</strong> digit validation because it also includes international mobile Validation.</p>\n<p>By using <strong>@Size</strong> you can find an error message from the Annotation if you write less than 10 or greater than 17.</p>\n"}],"owner":{"account_id":1447480,"reputation":1567,"user_id":1365460,"accept_rate":51,"display_name":"Ankur Raiyani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53514,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":10669202,"answer_count":6,"score":20,"last_activity_date":1646404032,"creation_date":1337241978,"question_id":10631960,"body_markdown":"I have a entity called User and I want to validate a mobile number field\r\n\r\nThe mobile number field is not mandatory it can be left blank but it should be **a 10 digit number.** \r\n\r\nIf the user enters any value *less then 10 digits* in length then an error should be thrown.\r\n\r\nBelow is my User class.\r\n\r\n    public class User {\r\n\r\n        @Size(min=0,max=10)\r\n        private String mobileNo;\r\n        \r\n    }\r\n\r\nWhen I used @Sized annotation as mentioned above, I could validate values that were greater than 10 but if the user entered less than 10 digits no error was raised.\r\n\r\nMy requirement is, if user left the mobileNo field blank that is valid but if a value is entered then the validation should ensure that the number entered is 10 digits and 10 digits only.\r\n\r\nWhich annotation I should use for this requirement?\r\n","title":"Validate Mobile Number using Hibernate annotation","body":"<p>I have a entity called User and I want to validate a mobile number field</p>\n\n<p>The mobile number field is not mandatory it can be left blank but it should be <strong>a 10 digit number.</strong> </p>\n\n<p>If the user enters any value <em>less then 10 digits</em> in length then an error should be thrown.</p>\n\n<p>Below is my User class.</p>\n\n<pre><code>public class User {\n\n    @Size(min=0,max=10)\n    private String mobileNo;\n\n}\n</code></pre>\n\n<p>When I used @Sized annotation as mentioned above, I could validate values that were greater than 10 but if the user entered less than 10 digits no error was raised.</p>\n\n<p>My requirement is, if user left the mobileNo field blank that is valid but if a value is entered then the validation should ensure that the number entered is 10 digits and 10 digits only.</p>\n\n<p>Which annotation I should use for this requirement?</p>\n"},{"tags":["java","maven","logging","log4j"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":2,"creation_date":1646403701,"post_id":71352528,"comment_id":126121077,"body_markdown":"You are trying to configure Log4j 2.x using a Log4j 1.x configuration file. It&#39;s possible with the right dependencies, but I doubt that is what you intended.","body":"You are trying to configure Log4j 2.x using a Log4j 1.x configuration file. It&#39;s possible with the right dependencies, but I doubt that is what you intended."},{"owner":{"account_id":15838670,"reputation":222,"user_id":11427796,"display_name":"Simon2215"},"score":0,"creation_date":1646403983,"post_id":71352528,"comment_id":126121185,"body_markdown":"Got it! It work&#39;s now. That was exactly the problem. Thank you :)","body":"Got it! It work&#39;s now. That was exactly the problem. Thank you :)"}],"answers":[{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1646403980,"creation_date":1646403980,"answer_id":71352844,"question_id":71352528,"body_markdown":"The main problem is that you are trying to use l*og4j* (the first one) configurations for **log4j2**.\r\n\r\nIn first place make sure you have the following dependencies:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.17.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.17.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nSecond, have a file named **log4j2.properties** with a content like this:\r\n\r\n    status = warn\r\n\r\n    appender.console.type = Console\r\n    appender.console.name = LogToConsole\r\n    appender.console.layout.type = PatternLayout\r\n    appender.console.layout.pattern = [%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\r\n    \r\n    rootLogger.level = info\r\n    rootLogger.appenderRef.stdout.ref = LogToConsole\r\n\r\nReference: https://mkyong.com/logging/log4j2-properties-example/","title":"Log4j does literally nothing?","body":"<p>The main problem is that you are trying to use l<em>og4j</em> (the first one) configurations for <strong>log4j2</strong>.</p>\n<p>In first place make sure you have the following dependencies:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n  &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n  &lt;version&gt;2.17.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n  &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n  &lt;version&gt;2.17.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Second, have a file named <strong>log4j2.properties</strong> with a content like this:</p>\n<pre><code>status = warn\n\nappender.console.type = Console\nappender.console.name = LogToConsole\nappender.console.layout.type = PatternLayout\nappender.console.layout.pattern = [%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\n\nrootLogger.level = info\nrootLogger.appenderRef.stdout.ref = LogToConsole\n</code></pre>\n<p>Reference: <a href=\"https://mkyong.com/logging/log4j2-properties-example/\" rel=\"nofollow noreferrer\">https://mkyong.com/logging/log4j2-properties-example/</a></p>\n"}],"owner":{"account_id":15838670,"reputation":222,"user_id":11427796,"display_name":"Simon2215"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":402,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71352844,"answer_count":1,"score":0,"last_activity_date":1646403980,"creation_date":1646402446,"question_id":71352528,"body_markdown":"My configuration file is path of the class path. At least I thought it is. I placed the log4j.properties file in the resources folder and log4j does nothing with it. Even if I delete it, no error occurs.\r\n\r\nAs anyone can see I&#39;m using maven\r\n \r\n[![enter image description here][1]][1]\r\n\r\nContent of LoggerTest:\r\n```\r\npackage com.dersimi.stella.logger;\r\n\r\nimport org.apache.logging.log4j.LogManager;\r\nimport org.apache.logging.log4j.Logger;\r\n\r\npublic class LoggerTest {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;xxx&quot;);\r\n        Logger logger = LogManager.getLogger(LoggerTest.class);\r\n        logger.info(&quot;Hello this is an info message&quot;);\r\n        System.out.println(&quot;xxx&quot;);\r\n    }\r\n}\r\n```\r\n\r\nProgram output:\r\n```\r\nxxx\r\n\r\n\r\nxxx\r\n```\r\n\r\nContent of log4j.properties: \r\n```\r\nlog4j.rootLogger=INFO, console\r\nlog4j.appender.console=org.apache.log4j.ConsoleAppender\r\nlog4j.appender.console.Threshold=INFO\r\nlog4j.appender.console.Target=System.out\r\nlog4j.appender.console.layout=org.apache.log4j.PatternLayout\r\nlog4j.appender.console.layout.conversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p - %m%n\r\n```\r\n\r\nIn pom.xml is nothing out of the ordinary, just the dependency org.apache.logging.log4j log4j-core 2.17.2, compiler source target is 16, no plugins\r\n\r\n  [1]: https://i.stack.imgur.com/cz8P8.png","title":"Log4j does literally nothing?","body":"<p>My configuration file is path of the class path. At least I thought it is. I placed the log4j.properties file in the resources folder and log4j does nothing with it. Even if I delete it, no error occurs.</p>\n<p>As anyone can see I'm using maven</p>\n<p><a href=\"https://i.stack.imgur.com/cz8P8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cz8P8.png\" alt=\"enter image description here\" /></a></p>\n<p>Content of LoggerTest:</p>\n<pre><code>package com.dersimi.stella.logger;\n\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\npublic class LoggerTest {\n    public static void main(String[] args) {\n        System.out.println(&quot;xxx&quot;);\n        Logger logger = LogManager.getLogger(LoggerTest.class);\n        logger.info(&quot;Hello this is an info message&quot;);\n        System.out.println(&quot;xxx&quot;);\n    }\n}\n</code></pre>\n<p>Program output:</p>\n<pre><code>xxx\n\n\nxxx\n</code></pre>\n<p>Content of log4j.properties:</p>\n<pre><code>log4j.rootLogger=INFO, console\nlog4j.appender.console=org.apache.log4j.ConsoleAppender\nlog4j.appender.console.Threshold=INFO\nlog4j.appender.console.Target=System.out\nlog4j.appender.console.layout=org.apache.log4j.PatternLayout\nlog4j.appender.console.layout.conversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p - %m%n\n</code></pre>\n<p>In pom.xml is nothing out of the ordinary, just the dependency org.apache.logging.log4j log4j-core 2.17.2, compiler source target is 16, no plugins</p>\n"},{"tags":["java","selenium","maven","pom.xml","maven-plugin"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1646394794,"post_id":71350810,"comment_id":126117932,"body_markdown":"The POM is a maven specific file for describing the project and how it is built. Input to your program on the other hand is a runtime thing, which obviously happens later. So your requirement doesn&#39;t even make sense.","body":"The POM is a maven specific file for describing the project and how it is built. Input to your program on the other hand is a runtime thing, which obviously happens later. So your requirement doesn&#39;t even make sense."},{"owner":{"account_id":22346474,"reputation":1,"user_id":16565392,"display_name":"Mitsuhaki"},"score":0,"creation_date":1646396867,"post_id":71350810,"comment_id":126118564,"body_markdown":"I have a string value which is my outcome. I want to pass this to one of the plugins in maven pom.xml. is there any way to do that","body":"I have a string value which is my outcome. I want to pass this to one of the plugins in maven pom.xml. is there any way to do that"},{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1646408542,"post_id":71350810,"comment_id":126122867,"body_markdown":"You did not understand me. How can you run your program before you have even built it? It is not possible!","body":"You did not understand me. How can you run your program before you have even built it? It is not possible!"},{"owner":{"account_id":22346474,"reputation":1,"user_id":16565392,"display_name":"Mitsuhaki"},"score":0,"creation_date":1646408798,"post_id":71350810,"comment_id":126122963,"body_markdown":"Or I have a value in config.properties file. Store=1234 I want to gethe value of this Store in pom.xml and use it in one plugin. Is it possible to do that","body":"Or I have a value in config.properties file. Store=1234 I want to gethe value of this Store in pom.xml and use it in one plugin. Is it possible to do that"}],"answers":[{"tags":[],"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646398172,"creation_date":1646398172,"answer_id":71351676,"question_id":71350810,"body_markdown":"This *cannot* work. Maven is a build tool so your ```pom``` only is relevant at build time. While the pom is copied to you jar by default, it is not needed at runtime. So altering it after compilation won&#39;t do anything.\r\n\r\nIf you intend to pass the outcome of a java operation to a maven plugin you would have to start a new maven build (for a different programme) from your Java app. That&#39;s possible and you can easily pass your String as a parameter to your build like that:\r\n\r\n    mvn compile -Dyour.string=&quot;whatever&quot;\r\n\r\nand then reference it like that in your pom:\r\n\r\n    ${your.string}\r\n\r\nBut remember this will *only* work if you use it for *another* build. A compiled programme can&#39;t alter its own build.","title":"Pass system.getProperty value or value from config.prop file to pom.xml","body":"<p>This <em>cannot</em> work. Maven is a build tool so your <code>pom</code> only is relevant at build time. While the pom is copied to you jar by default, it is not needed at runtime. So altering it after compilation won't do anything.</p>\n<p>If you intend to pass the outcome of a java operation to a maven plugin you would have to start a new maven build (for a different programme) from your Java app. That's possible and you can easily pass your String as a parameter to your build like that:</p>\n<pre><code>mvn compile -Dyour.string=&quot;whatever&quot;\n</code></pre>\n<p>and then reference it like that in your pom:</p>\n<pre><code>${your.string}\n</code></pre>\n<p>But remember this will <em>only</em> work if you use it for <em>another</em> build. A compiled programme can't alter its own build.</p>\n"}],"owner":{"account_id":22346474,"reputation":1,"user_id":16565392,"display_name":"Mitsuhaki"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":381,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1646403851,"creation_date":1646393515,"question_id":71350810,"body_markdown":"I want to pass one string input from java class to maven pom.xml and im not sure how to do that. I tried storing the string input to properties file, then read it using property plugin in pom.xml and then pass it. but it is not working.\r\n\r\nBelow is the pom structure\r\n       \r\n       \r\n        &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-alpha-2&lt;/version&gt;\r\n        &lt;executions&gt;\r\n        &lt;execution&gt;\r\n        &lt;phase&gt;pre-package&lt;/phase&gt;\r\n        &lt;goals&gt;\r\n        &lt;goal&gt;read-project-properties&lt;/goal&gt;\r\n        &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n        &lt;configuration&gt;\r\n        &lt;files&gt;\r\n        &lt;file&gt;${project.basedir}/src/main/resources/config.properties&lt;/file&gt;\r\n        &lt;/files&gt;\r\n       \r\n        &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n    config.properties has :\r\n    input = QATeam\r\n    I want to pass the value of input to pom.xml. Please help.\r\n    &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    &lt;htmlCode&gt;${input}&lt;/htmlCode&gt;\r\n    &lt;/properties&gt;\r\n    After running properties plugin, have tried using ${htmlCode} in other plugins but the value is not passing to pom.","title":"Pass system.getProperty value or value from config.prop file to pom.xml","body":"<p>I want to pass one string input from java class to maven pom.xml and im not sure how to do that. I tried storing the string input to properties file, then read it using property plugin in pom.xml and then pass it. but it is not working.</p>\n<p>Below is the pom structure</p>\n<pre><code>    &lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.0-alpha-2&lt;/version&gt;\n    &lt;executions&gt;\n    &lt;execution&gt;\n    &lt;phase&gt;pre-package&lt;/phase&gt;\n    &lt;goals&gt;\n    &lt;goal&gt;read-project-properties&lt;/goal&gt;\n    &lt;/goals&gt;\n    &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n    &lt;files&gt;\n    &lt;file&gt;${project.basedir}/src/main/resources/config.properties&lt;/file&gt;\n    &lt;/files&gt;\n   \n    &lt;/configuration&gt;\n    &lt;/plugin&gt;\nconfig.properties has :\ninput = QATeam\nI want to pass the value of input to pom.xml. Please help.\n&lt;properties&gt;\n&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;htmlCode&gt;${input}&lt;/htmlCode&gt;\n&lt;/properties&gt;\nAfter running properties plugin, have tried using ${htmlCode} in other plugins but the value is not passing to pom.\n</code></pre>\n"},{"tags":["java","spring","spring-boot","annotations","spring-restcontroller"],"comments":[{"owner":{"account_id":7767429,"reputation":674,"user_id":5878215,"display_name":"Zorglube"},"score":1,"creation_date":1592925033,"post_id":62537836,"comment_id":110596222,"body_markdown":"`    @Column(unique=true)` that is not an unique contraint checking, it&#39;s an unique contraint BDD d&#233;ploiement. You have to implement the unique contraint into the BDD, or create an constraint validator by implementing `javax.validation.ConstraintValidator`.","body":"`    @Column(unique=true)` that is not an unique contraint checking, it&#39;s an unique contraint BDD d&#233;ploiement. You have to implement the unique contraint into the BDD, or create an constraint validator by implementing <code>javax.validation.ConstraintValidator</code>."},{"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"score":0,"creation_date":1592925955,"post_id":62537836,"comment_id":110596775,"body_markdown":"In your example, did a second row show up in the table with the same email field value?","body":"In your example, did a second row show up in the table with the same email field value?"},{"owner":{"account_id":13034898,"reputation":773,"user_id":9420149,"accept_rate":90,"display_name":"satish"},"score":0,"creation_date":1592937493,"post_id":62537836,"comment_id":110602683,"body_markdown":"@Zorglube, when you write, &quot;you have to implement the unique constraint into the BDD,&quot; how do I do that?","body":"@Zorglube, when you write, &quot;you have to implement the unique constraint into the BDD,&quot; how do I do that?"},{"owner":{"account_id":7767429,"reputation":674,"user_id":5878215,"display_name":"Zorglube"},"score":0,"creation_date":1592939242,"post_id":62537836,"comment_id":110603458,"body_markdown":"`create constraint .... `","body":"<code>create constraint .... </code>"},{"owner":{"account_id":13034898,"reputation":773,"user_id":9420149,"accept_rate":90,"display_name":"satish"},"score":0,"creation_date":1592940288,"post_id":62537836,"comment_id":110603870,"body_markdown":"Is &quot;create constraint ...&quot; meant to be the SQL that I would run?","body":"Is &quot;create constraint ...&quot; meant to be the SQL that I would run?"},{"owner":{"account_id":7767429,"reputation":674,"user_id":5878215,"display_name":"Zorglube"},"score":0,"creation_date":1592993207,"post_id":62537836,"comment_id":110621631,"body_markdown":"How can do you `implement the unique constraint into the BDD` without doing `SQL` ?","body":"How can do you <code>implement the unique constraint into the BDD</code> without doing <code>SQL</code> ?"},{"owner":{"account_id":13034898,"reputation":773,"user_id":9420149,"accept_rate":90,"display_name":"satish"},"score":0,"creation_date":1593110167,"post_id":62537836,"comment_id":110673054,"body_markdown":"What do you mean by &quot;BDD&quot;?  Anyway, on my development machine I have &quot;spring.jpa.hibernate.ddl-auto=update&quot; set in my application.properties to aid in SQL creation.  I would like to avoid having to write SQL as much as possible if I can get the framework to do it for me.","body":"What do you mean by &quot;BDD&quot;?  Anyway, on my development machine I have &quot;spring.jpa.hibernate.ddl-auto=update&quot; set in my application.properties to aid in SQL creation.  I would like to avoid having to write SQL as much as possible if I can get the framework to do it for me."},{"owner":{"account_id":5268074,"reputation":17816,"user_id":4207306,"display_name":"Eklavya"},"score":0,"creation_date":1593868313,"post_id":62537836,"comment_id":110930099,"body_markdown":"Does those answer your question https://stackoverflow.com/questions/4613055/hibernate-unique-key-validation  https://stackoverflow.com/questions/17092601/how-to-validate-unique-username-in-spring  https://stackoverflow.com/questions/3495368/unique-constraint-with-jpa-and-bean-validation?","body":"Does those answer your question <a href=\"https://stackoverflow.com/questions/4613055/hibernate-unique-key-validation\" title=\"hibernate unique key validation\">stackoverflow.com/questions/4613055/&hellip;</a>  <a href=\"https://stackoverflow.com/questions/17092601/how-to-validate-unique-username-in-spring\" title=\"how to validate unique username in spring\">stackoverflow.com/questions/17092601/&hellip;</a>  <a href=\"https://stackoverflow.com/questions/3495368/unique-constraint-with-jpa-and-bean-validation\" title=\"unique constraint with jpa and bean validation\">stackoverflow.com/questions/3495368/&hellip;</a>?"}],"answers":[{"tags":[],"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1593930920,"creation_date":1593489302,"answer_id":62650045,"question_id":62537836,"body_markdown":"You may create a custom annotation to validate the email constrains or may add validation in the service layer manually and can throw the exception.\r\n\r\n\r\n----------\r\n\r\n\r\n**`@Column`**\r\n\r\nFor `@Column`, make sure unique constrain is added for email column in the database. Try to drop and recreate the database using `spring.jpa.hibernate.ddl-auto=create` and check the unique constrain\r\n\r\n    /**\r\n     * (Optional) Whether the column is a unique key.  This is a \r\n     * shortcut for the &lt;code&gt;UniqueConstraint&lt;/code&gt; annotation at the table \r\n     * level and is useful for when the unique key constraint \r\n     * corresponds to only a single column. This constraint applies \r\n     * in addition to any constraint entailed by primary key mapping and \r\n     * to constraints specified at the table level.\r\n     */\r\n    boolean unique() default false;\r\n\r\n\r\n----------\r\n\r\n**`Custom annotation`** \r\n\r\n**UniqueEmail.java**\r\n\r\n    import javax.validation.Constraint;\r\n    import javax.validation.Payload;\r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n\r\n    @Constraint(validatedBy = UniqueEmailValidator.class)\r\n    @Target(ElementType.FIELD)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface UniqueEmail {\r\n        String message() default &quot;Email address is already registered&quot;;\r\n        Class&lt;?&gt;[] groups() default { };\r\n        Class&lt;? extends Payload&gt;[] payload() default { };\r\n    }\r\n\r\n**UniqueEmailValidator.java**\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import javax.validation.ConstraintValidator;\r\n    import javax.validation.ConstraintValidatorContext;\r\n    \r\n    @Component\r\n    public class UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\r\n    \r\n        @Autowired UserRepository userRepository;\r\n    \r\n        @Override\r\n        public boolean isValid(String email, ConstraintValidatorContext context) {\r\n            return !userRepository.existsByEmail(email);\r\n        }\r\n    }\r\n\r\n**User.java**\r\n\r\n    @UniqueEmail\r\n    @NotBlank(message = &quot;Email is mandatory&quot;)\r\n    @Column(unique=true)\r\n    private String email;\r\n\r\n\r\n----------\r\n**UPDATE**\r\n\r\n\r\n**`UniqueEmailValidator`**\r\n\r\nYou have slightly misconfigured isValid method, we should return *true* if the *email does not exist* and *false* for *email is already exists* \r\n\r\nChange \r\n\r\n    return userRepository.findByEmail(email) != null;\r\n\r\nTo\r\n\r\n    return userRepository.findByEmail(email) == null;\r\n\r\n\r\n----------\r\n\r\n\r\n**`Annotation get invoked twice`**\r\n\r\nYou may need to add the property in application.properties (src/main/resources, src/main/test)  \r\n\r\n    spring.jpa.properties.javax.persistence.validation.mode=none\r\n\r\n*validation-mode*\r\n\r\nBy default, Bean Validation (and Hibernate Validator) is activated. When an entity is created, updated (and optionally deleted), it is validated before being sent to the database. The database schema generated by Hibernate also reflects the constraints declared on the entity.\r\n\r\nYou can fine-tune that if needed:\r\n\r\n**`AUTO:`** if Bean Validation is present in the classpath, CALLBACK and DDL are activated.\r\n\r\n**`CALLBACK:`** entities are validated on creation, update and deletion. If no Bean Validation provider is present, an exception is raised at initialization time.\r\n\r\n**`DDL:`** (not standard, see below) database schemas are entities are validated on creation, update and deletion. If no Bean Validation provider is present, an exception is raised at initialization time.\r\n\r\n**`NONE:`** Bean Validation is not used at all\r\n\r\n\r\n----------\r\n\r\n\r\n**`Test`** \r\n\r\nUserControllerIntegrationTest#registerWithNonUniqueEmail\r\nYou may remove `assertEquals(&quot;Failed&quot;, responseEntity.getBody())` as response string be different for bad request.\r\n\r\n ","title":"Can Spring Boot be configured to check unique constraints in my rest controller?","body":"<p>You may create a custom annotation to validate the email constrains or may add validation in the service layer manually and can throw the exception.</p>\n<hr />\n<p><strong><code>@Column</code></strong></p>\n<p>For <code>@Column</code>, make sure unique constrain is added for email column in the database. Try to drop and recreate the database using <code>spring.jpa.hibernate.ddl-auto=create</code> and check the unique constrain</p>\n<pre><code>/**\n * (Optional) Whether the column is a unique key.  This is a \n * shortcut for the &lt;code&gt;UniqueConstraint&lt;/code&gt; annotation at the table \n * level and is useful for when the unique key constraint \n * corresponds to only a single column. This constraint applies \n * in addition to any constraint entailed by primary key mapping and \n * to constraints specified at the table level.\n */\nboolean unique() default false;\n</code></pre>\n<hr />\n<p><strong><code>Custom annotation</code></strong></p>\n<p><strong>UniqueEmail.java</strong></p>\n<pre><code>import javax.validation.Constraint;\nimport javax.validation.Payload;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Constraint(validatedBy = UniqueEmailValidator.class)\n@Target(ElementType.FIELD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface UniqueEmail {\n    String message() default &quot;Email address is already registered&quot;;\n    Class&lt;?&gt;[] groups() default { };\n    Class&lt;? extends Payload&gt;[] payload() default { };\n}\n</code></pre>\n<p><strong>UniqueEmailValidator.java</strong></p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\nimport javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\n\n@Component\npublic class UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\n\n    @Autowired UserRepository userRepository;\n\n    @Override\n    public boolean isValid(String email, ConstraintValidatorContext context) {\n        return !userRepository.existsByEmail(email);\n    }\n}\n</code></pre>\n<p><strong>User.java</strong></p>\n<pre><code>@UniqueEmail\n@NotBlank(message = &quot;Email is mandatory&quot;)\n@Column(unique=true)\nprivate String email;\n</code></pre>\n<hr />\n<p><strong>UPDATE</strong></p>\n<p><strong><code>UniqueEmailValidator</code></strong></p>\n<p>You have slightly misconfigured isValid method, we should return <em>true</em> if the <em>email does not exist</em> and <em>false</em> for <em>email is already exists</em></p>\n<p>Change</p>\n<pre><code>return userRepository.findByEmail(email) != null;\n</code></pre>\n<p>To</p>\n<pre><code>return userRepository.findByEmail(email) == null;\n</code></pre>\n<hr />\n<p><strong><code>Annotation get invoked twice</code></strong></p>\n<p>You may need to add the property in application.properties (src/main/resources, src/main/test)</p>\n<pre><code>spring.jpa.properties.javax.persistence.validation.mode=none\n</code></pre>\n<p><em>validation-mode</em></p>\n<p>By default, Bean Validation (and Hibernate Validator) is activated. When an entity is created, updated (and optionally deleted), it is validated before being sent to the database. The database schema generated by Hibernate also reflects the constraints declared on the entity.</p>\n<p>You can fine-tune that if needed:</p>\n<p><strong><code>AUTO:</code></strong> if Bean Validation is present in the classpath, CALLBACK and DDL are activated.</p>\n<p><strong><code>CALLBACK:</code></strong> entities are validated on creation, update and deletion. If no Bean Validation provider is present, an exception is raised at initialization time.</p>\n<p><strong><code>DDL:</code></strong> (not standard, see below) database schemas are entities are validated on creation, update and deletion. If no Bean Validation provider is present, an exception is raised at initialization time.</p>\n<p><strong><code>NONE:</code></strong> Bean Validation is not used at all</p>\n<hr />\n<p><strong><code>Test</code></strong></p>\n<p>UserControllerIntegrationTest#registerWithNonUniqueEmail\nYou may remove <code>assertEquals(&quot;Failed&quot;, responseEntity.getBody())</code> as response string be different for bad request.</p>\n"},{"tags":[],"owner":{"account_id":23975853,"reputation":59,"user_id":17963959,"display_name":"Pranav Barot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646403400,"creation_date":1646403400,"answer_id":71352743,"question_id":62537836,"body_markdown":"I think the easy way is to use Native Query in the Spring boot **Repository** class.\r\n\r\n&gt; @Query(value = &quot;SELECT * FROM customers_details WHERE email= :email\r\n&gt; , nativeQuery = true) \r\n&gt; public List findEmaiList(@Param(&quot;username&quot;)  String username);\r\n\r\nAnd pass this **findEmaiList()** method in Service class and after pass to the Controller class.\r\n\r\nIn the controller class, you have to create a separate API and pass the validation whatever you want to add\r\nif you have to find the unique mobile number you can do it with the native query.\r\n \r\n\r\n\r\n","title":"Can Spring Boot be configured to check unique constraints in my rest controller?","body":"<p>I think the easy way is to use Native Query in the Spring boot <strong>Repository</strong> class.</p>\n<blockquote>\n<p>@Query(value = &quot;SELECT * FROM customers_details WHERE email= :email\n, nativeQuery = true)\npublic List findEmaiList(@Param(&quot;username&quot;)  String username);</p>\n</blockquote>\n<p>And pass this <strong>findEmaiList()</strong> method in Service class and after pass to the Controller class.</p>\n<p>In the controller class, you have to create a separate API and pass the validation whatever you want to add\nif you have to find the unique mobile number you can do it with the native query.</p>\n"}],"owner":{"account_id":13034898,"reputation":773,"user_id":9420149,"accept_rate":90,"display_name":"satish"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16453,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":62650045,"answer_count":2,"score":3,"last_activity_date":1646403400,"creation_date":1592924415,"question_id":62537836,"body_markdown":"I&#39;m using Spring Boot 2 with Java 11.  I have the below entity ...\r\n\r\n    @Data\r\n    @Entity\r\n    @Table(name = &quot;Users&quot;)\r\n    public class User implements UserDetails {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private UUID id;\r\n        \r\n        \r\n        private String firstName;\r\n        private String lastName;\r\n        \r\n        @NotBlank(message = &quot;Email is mandatory&quot;)\r\n        @Column(unique=true)\r\n        private String email;\r\n        private String password;\r\n        private boolean enabled;\r\n        private boolean tokenExpired;\r\n     \r\n        @ManyToMany\r\n        @JoinTable( \r\n            name = &quot;users_roles&quot;, \r\n            joinColumns = @JoinColumn(\r\n              name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;), \r\n            inverseJoinColumns = @JoinColumn(\r\n              name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;)) \r\n        private Collection&lt;Role&gt; roles;\r\n\r\nNote the unique constraint on the email column.  Is there a way to configure Spring Boot to verify that constraint when I submit a create request?  I have the below rest controller ...\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/user&quot;)\r\n    public class UserController {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserService userService;\r\n    \r\n    \t...\r\n    \t\r\n    \t@PostMapping\r\n    \t@ResponseStatus(code = HttpStatus.CREATED)\r\n        public void create(@Valid @RequestBody User user) {\r\n    \t\tuserService.create(user);\r\n        }\r\n\r\nbut when I submit a request to the endpoint, even though an email already exists in my table, the call succeeds anyway.  What&#39;s the easiest way with Spring Boot to make sure I can reject a request if my bean fails validation (including its unique constraint)?\r\n\r\n&lt;b&gt;Edit:&lt;/b&gt; In response to the answer given, adding the code results in the below error when an email is taken.  When it is not taken I don&#39;t get the error, but the endpoint returns a 400 instead of a 201, as it did before.\r\n\r\n    java.lang.NullPointerException: null\r\n    \tat com.burrobuie.cardmania.validators.UniqueEmailValidator.isValid(UniqueEmailValidator.java:19) ~[classes/:na]\r\n    \tat com.burrobuie.cardmania.validators.UniqueEmailValidator.isValid(UniqueEmailValidator.java:1) ~[classes/:na]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:180) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:518) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:488) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:450) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:400) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:172) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\r\n    \tat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:116) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:80) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.action.internal.EntityInsertAction.preInsert(EntityInsertAction.java:227) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:100) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684) ~[na:na]\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:348) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:102) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1360) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:451) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3210) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2378) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:447) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\r\n    \tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:534) ~[spring-orm-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:632) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:386) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat com.burrobuie.cardmania.service.UserService$$EnhancerBySpringCGLIB$$5adba428.create(&lt;generated&gt;) ~[classes/:na]\r\n    \tat com.burrobuie.cardmania.controller.UserController.create(UserController.java:52) ~[classes/:na]\r\n    \tat com.burrobuie.cardmania.controller.UserController$$FastClassBySpringCGLIB$$2ed27fd.invoke(&lt;generated&gt;) ~[classes/:na]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687) ~[spring-aop-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat com.burrobuie.cardmania.controller.UserController$$EnhancerBySpringCGLIB$$9e761229.create(&lt;generated&gt;) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat com.burrobuie.cardmania.jwt.JwtTokenAuthorizationOncePerRequestFilter.doFilterInternal(JwtTokenAuthorizationOncePerRequestFilter.java:70) ~[classes/:na]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n\r\n\r\n\r\n\r\n","title":"Can Spring Boot be configured to check unique constraints in my rest controller?","body":"<p>I'm using Spring Boot 2 with Java 11.  I have the below entity ...</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;Users&quot;)\npublic class User implements UserDetails {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private UUID id;\n    \n    \n    private String firstName;\n    private String lastName;\n    \n    @NotBlank(message = &quot;Email is mandatory&quot;)\n    @Column(unique=true)\n    private String email;\n    private String password;\n    private boolean enabled;\n    private boolean tokenExpired;\n \n    @ManyToMany\n    @JoinTable( \n        name = &quot;users_roles&quot;, \n        joinColumns = @JoinColumn(\n          name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;), \n        inverseJoinColumns = @JoinColumn(\n          name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;)) \n    private Collection&lt;Role&gt; roles;\n</code></pre>\n<p>Note the unique constraint on the email column.  Is there a way to configure Spring Boot to verify that constraint when I submit a create request?  I have the below rest controller ...</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/user&quot;)\npublic class UserController {\n\n    @Autowired\n    private UserService userService;\n\n    ...\n    \n    @PostMapping\n    @ResponseStatus(code = HttpStatus.CREATED)\n    public void create(@Valid @RequestBody User user) {\n        userService.create(user);\n    }\n</code></pre>\n<p>but when I submit a request to the endpoint, even though an email already exists in my table, the call succeeds anyway.  What's the easiest way with Spring Boot to make sure I can reject a request if my bean fails validation (including its unique constraint)?</p>\n<p><b>Edit:</b> In response to the answer given, adding the code results in the below error when an email is taken.  When it is not taken I don't get the error, but the endpoint returns a 400 instead of a 201, as it did before.</p>\n<pre><code>java.lang.NullPointerException: null\n    at com.burrobuie.cardmania.validators.UniqueEmailValidator.isValid(UniqueEmailValidator.java:19) ~[classes/:na]\n    at com.burrobuie.cardmania.validators.UniqueEmailValidator.isValid(UniqueEmailValidator.java:1) ~[classes/:na]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:180) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:518) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:488) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:450) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:400) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:172) ~[hibernate-validator-6.1.5.Final.jar:6.1.5.Final]\n    at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:116) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:80) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.action.internal.EntityInsertAction.preInsert(EntityInsertAction.java:227) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:100) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684) ~[na:na]\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:348) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:102) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1360) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:451) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3210) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2378) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:447) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.4.17.Final.jar:5.4.17.Final]\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:534) ~[spring-orm-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:632) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:386) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at com.burrobuie.cardmania.service.UserService$$EnhancerBySpringCGLIB$$5adba428.create(&lt;generated&gt;) ~[classes/:na]\n    at com.burrobuie.cardmania.controller.UserController.create(UserController.java:52) ~[classes/:na]\n    at com.burrobuie.cardmania.controller.UserController$$FastClassBySpringCGLIB$$2ed27fd.invoke(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687) ~[spring-aop-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at com.burrobuie.cardmania.controller.UserController$$EnhancerBySpringCGLIB$$9e761229.create(&lt;generated&gt;) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at com.burrobuie.cardmania.jwt.JwtTokenAuthorizationOncePerRequestFilter.doFilterInternal(JwtTokenAuthorizationOncePerRequestFilter.java:70) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.3.3.RELEASE.jar:5.3.3.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.7.RELEASE.jar:5.2.7.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.36.jar:9.0.36]\n    at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\n</code></pre>\n"},{"tags":["java","spring-boot","maven-failsafe-plugin"],"comments":[{"owner":{"account_id":15426288,"reputation":1199,"user_id":11982497,"display_name":"Tarek Oraby"},"score":0,"creation_date":1606809928,"post_id":65073944,"comment_id":115067188,"body_markdown":"On how to debug Maven Failsafe Plugin, it should be doable by adding `-Dmaven.failsafe.debug` to your maven configuration, then configure a remote debugger configuration on localhost and port 5005. This [SO thread](https://stackoverflow.com/a/53803856/11982497) describes how to do it for IntelliJ. A similar approach should be doable in Eclipse by ading a &quot;Remote Java Application&quot; configuration","body":"On how to debug Maven Failsafe Plugin, it should be doable by adding <code>-Dmaven.failsafe.debug</code> to your maven configuration, then configure a remote debugger configuration on localhost and port 5005. This <a href=\"https://stackoverflow.com/a/53803856/11982497\">SO thread</a> describes how to do it for IntelliJ. A similar approach should be doable in Eclipse by ading a &quot;Remote Java Application&quot; configuration"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1606810049,"post_id":65073944,"comment_id":115067240,"body_markdown":"Hi Tarek, By debug I meant to get some information where failsafe is searching for the test classes to see why it doesn&#39;t fine any","body":"Hi Tarek, By debug I meant to get some information where failsafe is searching for the test classes to see why it doesn&#39;t fine any"},{"owner":{"account_id":15426288,"reputation":1199,"user_id":11982497,"display_name":"Tarek Oraby"},"score":0,"creation_date":1606810461,"post_id":65073944,"comment_id":115067384,"body_markdown":"Right, in that case  adding one of the following flags might be helpful -X,--debug,-e,--errors","body":"Right, in that case  adding one of the following flags might be helpful -X,--debug,-e,--errors"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1606813094,"post_id":65073944,"comment_id":115068417,"body_markdown":"I add -X I can see that the testClassesDirectory is correct. But it doesn&#39;t execute anything","body":"I add -X I can see that the testClassesDirectory is correct. But it doesn&#39;t execute anything"}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1606817775,"creation_date":1606817775,"answer_id":65088573,"question_id":65073944,"body_markdown":"The problem was that the ITs are Junit4 tests and Spring Boot 2.4.0 removed the vintage Junit dependency.\r\n\r\nI had to add the following dependency.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;","title":"IT are no longer executed with failsafe plugin after migrating to Spring Boot 2.4.0","body":"<p>The problem was that the ITs are Junit4 tests and Spring Boot 2.4.0 removed the vintage Junit dependency.</p>\n<p>I had to add the following dependency.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n            &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646400738,"creation_date":1643998923,"answer_id":70991122,"question_id":65073944,"body_markdown":"For me I &quot;updated&quot; my IT test so it uses Junit 5 style imports. Also failsafe plugin version -&gt; 3.0.0-M5\r\n\r\nNow they run.  \r\n\r\nInstead of silently not running, yikes.","title":"IT are no longer executed with failsafe plugin after migrating to Spring Boot 2.4.0","body":"<p>For me I &quot;updated&quot; my IT test so it uses Junit 5 style imports. Also failsafe plugin version -&gt; 3.0.0-M5</p>\n<p>Now they run.</p>\n<p>Instead of silently not running, yikes.</p>\n"}],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1558,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":65088573,"answer_count":2,"score":8,"last_activity_date":1646403317,"creation_date":1606740671,"question_id":65073944,"body_markdown":"I have some integration tests that are run with the failsafe plugin.\r\nThis works until Spring Boot 2.3.5.RELEASE, but after migrating to 2.4.0 the ITs are no longer executed.\r\n\r\n1) Does anybody have the same problem?\r\n\r\n2) How can I debug failsafe to find out why the tests are not executed?","title":"IT are no longer executed with failsafe plugin after migrating to Spring Boot 2.4.0","body":"<p>I have some integration tests that are run with the failsafe plugin.\nThis works until Spring Boot 2.3.5.RELEASE, but after migrating to 2.4.0 the ITs are no longer executed.</p>\n<ol>\n<li><p>Does anybody have the same problem?</p>\n</li>\n<li><p>How can I debug failsafe to find out why the tests are not executed?</p>\n</li>\n</ol>\n"},{"tags":["java","linux","ftp-client"],"comments":[{"owner":{"account_id":2437974,"reputation":2113,"user_id":2127354,"accept_rate":88,"display_name":"Jaay"},"score":0,"creation_date":1646404536,"post_id":71352423,"comment_id":126121391,"body_markdown":"Can you explain wich ftp library you are using ? Also please provide the full error log if possible","body":"Can you explain wich ftp library you are using ? Also please provide the full error log if possible"},{"owner":{"account_id":8712514,"reputation":143,"user_id":6518278,"display_name":"Ganesh Kumar"},"score":0,"creation_date":1646632293,"post_id":71352423,"comment_id":126162877,"body_markdown":"commons-net 3.3 is the library, The flow keeps on hanging at listFiles = ftp.listFiles(), basically its timeout error from linux system.","body":"commons-net 3.3 is the library, The flow keeps on hanging at listFiles = ftp.listFiles(), basically its timeout error from linux system."},{"owner":{"account_id":2437974,"reputation":2113,"user_id":2127354,"accept_rate":88,"display_name":"Jaay"},"score":0,"creation_date":1646644952,"post_id":71352423,"comment_id":126165953,"body_markdown":"I suggest you to try the following : disable your linux firewall just for the test : `systemctl stop iptables` or `systemctl stop firewalld` (depends of your distrib). If you are on a graphical environment, try using tierce app like Filezilla to see if this is Java related.","body":"I suggest you to try the following : disable your linux firewall just for the test : <code>systemctl stop iptables</code> or <code>systemctl stop firewalld</code> (depends of your distrib). If you are on a graphical environment, try using tierce app like Filezilla to see if this is Java related."},{"owner":{"account_id":8712514,"reputation":143,"user_id":6518278,"display_name":"Ganesh Kumar"},"score":0,"creation_date":1653566231,"post_id":71352423,"comment_id":127885443,"body_markdown":"ftp.enterLocalPassiveMode() resolved my issue.","body":"ftp.enterLocalPassiveMode() resolved my issue."}],"owner":{"account_id":8712514,"reputation":143,"user_id":6518278,"display_name":"Ganesh Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646403225,"creation_date":1646401873,"question_id":71352423,"body_markdown":"    ftp.connect(host, 21);\r\n    System.out.println(&quot;successfull connected&quot;);\r\n    ftp.login(user, pass);\r\n    ftp.changeWorkingDirectory(dirPath);\r\n    System.out.println(&quot;successfull logged in&quot;);\r\n\r\n    FTPFile[] listFiles =null;\r\n    // listing files from the direcotry\r\n    try {\r\n        System.out.println(&quot;Fetching files from the directory&quot;);\r\n        listFiles = ftp.listFiles();\r\n    }catch(Exception exception) {\r\n        StackTraceElement[] stackTrace = exception.getStackTrace();\r\n        System.out.println(exception.getMessage());\r\n        for(int i=0; i&lt;=stackTrace.length-1; i++) {\r\n                System.out.println(&quot;&quot;+stackTrace[i]);\r\n        }\r\n    }\r\n\r\nI am connecting and logging to FTP server from Windows and Linux machine. On Windows, it&#39;s working well. I am able to list the FTP files. However, from Linux it is hanging at `ftp.listFiles()`, and I&#39;m getting Accept timed out error\r\n\r\nPlease help me out or if any alternative to ftp client is also fine.","title":"Java FTPClient listing or retrieving file is working from Windows not working from Linux - hanging at listFiles()","body":"<pre><code>ftp.connect(host, 21);\nSystem.out.println(&quot;successfull connected&quot;);\nftp.login(user, pass);\nftp.changeWorkingDirectory(dirPath);\nSystem.out.println(&quot;successfull logged in&quot;);\n\nFTPFile[] listFiles =null;\n// listing files from the direcotry\ntry {\n    System.out.println(&quot;Fetching files from the directory&quot;);\n    listFiles = ftp.listFiles();\n}catch(Exception exception) {\n    StackTraceElement[] stackTrace = exception.getStackTrace();\n    System.out.println(exception.getMessage());\n    for(int i=0; i&lt;=stackTrace.length-1; i++) {\n            System.out.println(&quot;&quot;+stackTrace[i]);\n    }\n}\n</code></pre>\n<p>I am connecting and logging to FTP server from Windows and Linux machine. On Windows, it's working well. I am able to list the FTP files. However, from Linux it is hanging at <code>ftp.listFiles()</code>, and I'm getting Accept timed out error</p>\n<p>Please help me out or if any alternative to ftp client is also fine.</p>\n"},{"tags":["java","sql","file","filereader","matcher"],"answers":[{"tags":[],"owner":{"account_id":24408886,"reputation":86,"user_id":18336654,"display_name":"Nagamura"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646403025,"creation_date":1646402724,"answer_id":71352585,"question_id":71350365,"body_markdown":"The problem is that the instruction `line = reader.readLine();` in the while loop, when you arrive at the end of the .sql file returns `null`. \r\nFor this reason you get this compile time error.\r\nJust change the the order of the statement, like this:\r\n\r\n        Set&lt;String&gt; emails = new HashSet&lt;&gt;();\r\n        Pattern patter= Pattern.compile(&quot;regex&quot;);\r\n        Matcher matcher = null;\r\n\r\n        try {\r\n            File file = new File(&quot;sample1.sql&quot; );\r\n            FileReader fr = new FileReader(file);\r\n            BufferedReader reader = new BufferedReader(fr);\r\n            String line = reader.readLine();\r\n\r\n            while (line != null) {\r\n                System.out.println(line);\r\n                matcher = patter.matcher(line); \r\n                while(matcher.find()){\r\n                    emails.add(matcher.group());\r\n                }\r\n                line = reader.readLine();\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        for (String e:emails) {\r\n            System.out.println(e);\r\n        }","title":"How to read local sql file?","body":"<p>The problem is that the instruction <code>line = reader.readLine();</code> in the while loop, when you arrive at the end of the .sql file returns <code>null</code>.\nFor this reason you get this compile time error.\nJust change the the order of the statement, like this:</p>\n<pre><code>    Set&lt;String&gt; emails = new HashSet&lt;&gt;();\n    Pattern patter= Pattern.compile(&quot;regex&quot;);\n    Matcher matcher = null;\n\n    try {\n        File file = new File(&quot;sample1.sql&quot; );\n        FileReader fr = new FileReader(file);\n        BufferedReader reader = new BufferedReader(fr);\n        String line = reader.readLine();\n\n        while (line != null) {\n            System.out.println(line);\n            matcher = patter.matcher(line); \n            while(matcher.find()){\n                emails.add(matcher.group());\n            }\n            line = reader.readLine();\n        }\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    for (String e:emails) {\n        System.out.println(e);\n    }\n</code></pre>\n"}],"owner":{"account_id":22399554,"reputation":1,"user_id":18372779,"display_name":"Fira R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":707,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646403025,"creation_date":1646391295,"question_id":71350365,"body_markdown":"I have downloaded SQL file and I want to read it without using some additional programs, only IDE. I have tried to read it like txt file but it didn&#39;t work.\r\n\r\nWhen I use `System.out.print` to see the line output. it works, but when I try to use `Matcher` i have:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.lang.CharSequence.length()&quot; because &quot;this.text&quot; is null\r\n    \tat java.base/java.util.regex.Matcher.getTextLength(Matcher.java:1769)\r\n    \tat java.base/java.util.regex.Matcher.reset(Matcher.java:415)\r\n    \tat java.base/java.util.regex.Matcher.&lt;init&gt;(Matcher.java:252)\r\n    \tat java.base/java.util.regex.Pattern.matcher(Pattern.java:1134)\r\n    \tat com.teleutsa.Main.main(Main.java:35)\r\n\r\nI suspect the problem is not in the file type but I am not sure. Thanks to anyone who would like to help.\r\n\r\n   \r\n        Set&lt;String&gt; emails = new HashSet&lt;&gt;();\r\n        Pattern patter= Pattern.compile(&quot;regex&quot;);\r\n        Matcher matcher = null;\r\n\r\n        try {\r\n            File file = new File(&quot;d://file.sql&quot; );\r\n            FileReader fr = new FileReader(file);\r\n            BufferedReader reader = new BufferedReader(fr);\r\n            String line = reader.readLine();\r\n\r\n            while (line != null) {\r\n\r\n                System.out.println(line);\r\n                line = reader.readLine();\r\n                matcher = patter.matcher(line);\r\n                while(matcher.find()){\r\n                    emails.add(matcher.group());\r\n\r\n                }\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        for (String e:emails) {\r\n            System.out.println(e);\r\n        }\r\n`","title":"How to read local sql file?","body":"<p>I have downloaded SQL file and I want to read it without using some additional programs, only IDE. I have tried to read it like txt file but it didn't work.</p>\n<p>When I use <code>System.out.print</code> to see the line output. it works, but when I try to use <code>Matcher</code> i have:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.lang.CharSequence.length()&quot; because &quot;this.text&quot; is null\n    at java.base/java.util.regex.Matcher.getTextLength(Matcher.java:1769)\n    at java.base/java.util.regex.Matcher.reset(Matcher.java:415)\n    at java.base/java.util.regex.Matcher.&lt;init&gt;(Matcher.java:252)\n    at java.base/java.util.regex.Pattern.matcher(Pattern.java:1134)\n    at com.teleutsa.Main.main(Main.java:35)\n</code></pre>\n<p>I suspect the problem is not in the file type but I am not sure. Thanks to anyone who would like to help.</p>\n<pre><code>    Set&lt;String&gt; emails = new HashSet&lt;&gt;();\n    Pattern patter= Pattern.compile(&quot;regex&quot;);\n    Matcher matcher = null;\n\n    try {\n        File file = new File(&quot;d://file.sql&quot; );\n        FileReader fr = new FileReader(file);\n        BufferedReader reader = new BufferedReader(fr);\n        String line = reader.readLine();\n\n        while (line != null) {\n\n            System.out.println(line);\n            line = reader.readLine();\n            matcher = patter.matcher(line);\n            while(matcher.find()){\n                emails.add(matcher.group());\n\n            }\n        }\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    for (String e:emails) {\n        System.out.println(e);\n    }\n</code></pre>\n<p>`</p>\n"},{"tags":["java","class","nullpointerexception","processing"],"comments":[{"owner":{"account_id":7717241,"reputation":3149,"user_id":5844572,"display_name":"laancelot"},"score":0,"creation_date":1646422236,"post_id":71352625,"comment_id":126127510,"body_markdown":"Welcome to SO. There seem to be some code missing to let us reproduce the issue. [A minimal example is always better to get help](https://stackoverflow.com/help/minimal-reproducible-example), but if it&#39;s impossible for you to isolate the issue we would at least have a better chance at helping with complete, working code.","body":"Welcome to SO. There seem to be some code missing to let us reproduce the issue. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">A minimal example is always better to get help</a>, but if it&#39;s impossible for you to isolate the issue we would at least have a better chance at helping with complete, working code."},{"owner":{"account_id":24451953,"reputation":1,"user_id":18374059,"display_name":"kimdoege"},"score":0,"creation_date":1646487020,"post_id":71352625,"comment_id":126138148,"body_markdown":"Thank you for your answer laancelot. We found our mistake. We needed a boolean in the class player which then needs to be called in the class game. It works now :)","body":"Thank you for your answer laancelot. We found our mistake. We needed a boolean in the class player which then needs to be called in the class game. It works now :)"},{"owner":{"account_id":7717241,"reputation":3149,"user_id":5844572,"display_name":"laancelot"},"score":0,"creation_date":1646517331,"post_id":71352625,"comment_id":126144277,"body_markdown":"The best course of action here would be to edit your question so it is answerable, then to post the answer yourself. This community works on two fronts: we try to help the person asking the question, and also to write questions and answers so that future users will be able to search and use them to solve their own problems. Not everybody comes back to answer their own questions, but it would be greatly appreciated. btw good job in finding the issue and solving it!","body":"The best course of action here would be to edit your question so it is answerable, then to post the answer yourself. This community works on two fronts: we try to help the person asking the question, and also to write questions and answers so that future users will be able to search and use them to solve their own problems. Not everybody comes back to answer their own questions, but it would be greatly appreciated. btw good job in finding the issue and solving it!"}],"owner":{"account_id":24451953,"reputation":1,"user_id":18374059,"display_name":"kimdoege"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646402848,"creation_date":1646402848,"question_id":71352625,"body_markdown":"We are programming a jump and run game in processing which is java based. We have 12 classes and a main sketch. In the class game we describe the states of the game and what is supposed to happen when that game state happens. There is a problem with our player, in the class player we defined when the player dies and that the state game-state Lose is supposed to happen. But it seems, that the class player can&#39;t reach the definition of that game-state in the class game. \r\n\r\nWe are also getting the error NullPointerException.\r\n\r\n```\r\n-----------------------class Game----------------------\r\n\r\nclass Game\r\n{\r\n  // Eigenschaften\r\n  private Level1 level1;\r\n  private Player p;\r\n  private Level2 level2;\r\n  private Level3 level3;\r\n\r\n  PImage start;\r\n  public String gameState;\r\n\r\n  public boolean left, right, up, down, space;\r\n  public FrameObject camera, gameWorld;\r\n\r\n  public boolean intersectHaus;\r\n\r\n  PImage win;\r\n  PImage gameover;\r\n  public Enemy [] enemies;\r\n  public Blume [] blumen;\r\n\r\n  PImage spring;\r\n\r\n  public int lives;\r\n\r\n  // Konstruktor\r\n  Game()\r\n  {\r\n    size(1400, 750);\r\n    this.p = new Player();\r\n\r\n\r\n    this.start = loadImage(&quot;start.png&quot;);\r\n    this.win = loadImage(&quot;win.png&quot;);\r\n    this.gameover = loadImage(&quot;gameover.png&quot;);\r\n\r\n    this.spring = loadImage (&quot;level2.png&quot;);\r\n\r\n\r\n\r\n    this.gameState = &quot;START&quot;;\r\n    this.level1 = new Level1(this);\r\n    this.level2 = new Level2(this);\r\n    this.level3 = new Level3(this);\r\n\r\n    this.lives = 3;\r\n  }\r\n\r\n\r\n  // Methoden\r\n\r\n  void display()\r\n  {\r\n    this.p.leben();\r\n\r\n    switch(this.gameState)\r\n    {\r\n    case &quot;START&quot;:\r\n    println(&quot;start funktioniert&quot;);\r\n      startGame();\r\n      break;\r\n    case &quot;PLAY1&quot;:\r\n    println(&quot;play1 funktioniert&quot;);\r\n      playGame();\r\n      break;\r\n    case &quot;WIN&quot;:\r\n    println(&quot;win funktioniert&quot;);  \r\n      winGame();\r\n      break;\r\n    case &quot;WIN2&quot;:\r\n      winGame2();\r\n      break;\r\n    case &quot;WIN3&quot;:\r\n      winGame3();\r\n      break;\r\n    case &quot;LOSE&quot;:\r\n    println(&quot;lose hat funktioniert&quot;);\r\n      loseGame();\r\n      break;\r\n    case &quot;PLAY2&quot;:\r\n      playGame2();\r\n      break;\r\n    case &quot;PLAY3&quot;:\r\n      playGame3();\r\n      break;\r\n    }\r\n  }\r\n\r\n\r\n  void startGame()\r\n  {\r\n    image(this.start, 0, 0);\r\n    if (mousePressed == true)\r\n    {\r\n      klick.play();\r\n      gameState = &quot;PLAY1&quot;;\r\n    }\r\n  }\r\n\r\n  void playGame()\r\n  {\r\n    this.level1.display();\r\n  }\r\n\r\n  void playGame2()\r\n  {\r\n    this.level2.display();\r\n  }\r\n\r\n  void playGame3()\r\n  {\r\n    this.level3.display();\r\n  }\r\n\r\n  void winGame2()\r\n  {\r\n    image(this.win, 0, 0);\r\n    if (mousePressed == true)\r\n    {\r\n      klick.play();\r\n\r\n      if (mousePressed == true)\r\n      {\r\n        klick.play();\r\n        gameState = &quot;PLAY3&quot;;\r\n      }\r\n    }\r\n  }\r\n  void winGame3()\r\n  {\r\n    image(this.win, 0, 0);\r\n    if (mousePressed == true)\r\n    {\r\n      klick.play();\r\n      gameState = &quot;START&quot;;\r\n      this.level1.reset();\r\n    }\r\n  }\r\n\r\n  void winGame()\r\n  {\r\n    image(this.win, 0, 0);\r\n    if (mousePressed == true)\r\n    {\r\n      klick.play();\r\n\r\n      if (mousePressed == true)\r\n      {\r\n        klick.play();\r\n        gameState = &quot;PLAY2&quot;;\r\n        this.level2.reset();\r\n      }\r\n    }\r\n  }\r\n\r\n  void loseGame()\r\n  {\r\n    //noLoop();\r\n    \r\n    image(this.gameover, 0, 0);\r\n    if (mousePressed == true)\r\n    {\r\n      klick.play();\r\n      gameState = &quot;START&quot;;\r\n      this.level1.reset();\r\n    }\r\n  }\r\n  \r\n  public void setGameState(String state)\r\n  {\r\n    this.gameState = state;\r\n  }\r\n  \r\n  public Player getPlayer()\r\n  {\r\n    return this.p;\r\n  }\r\n}\r\n\r\n\r\n---------------------class Level3---------------------\r\nclass Level3\r\n{\r\n  private Player p;\r\n  private Blume [] blumen;\r\n  private Wabe [] waben;\r\n  private GiftBlume [] giftBlumen;\r\n  private Haus h;\r\n  private FrameObject camera, gameWorld;\r\n  public ImageObject backImage;\r\n  public ImageObject backImage1;\r\n  public ImageObject backImage2;\r\n  PImage hintergrund;\r\n  PImage background;\r\n  private Game parent;\r\n\r\n  PImage hintergrund1;\r\n  private Enemy [] enemies;\r\n  PImage haus;\r\n\r\n  private int score;\r\n\r\n  //Konstruktor\r\n\r\n  Level3(Game parent)\r\n  {\r\n    size(1400, 750);\r\n    this.parent = parent;\r\n    this.score = 0;\r\n\r\n\r\n    for (int i = 0; i &lt; plattformen.length; i++)\r\n    {\r\n      plattformen[i] = loadImage(&quot;blume&quot;+i+&quot;.png&quot;);\r\n    }\r\n\r\n\r\n    left = false;\r\n    right = false;\r\n    up = false;\r\n    down = false;\r\n    space = false;\r\n\r\n\r\n    this.p = this.parent.getPlayer();\r\n\r\n    this.blumen = new Blume[8];\r\n    this.blumen[0] = new Blume(plattformen[15], 10, 550, 200, 25, &quot;safe&quot;);\r\n    this.blumen[1] = new Blume(plattformen[14], 700, 200, 200, 25, &quot;safe&quot;);\r\n    this.blumen[2] = new Blume(plattformen[13], 1100, 460, 200, 25, &quot;safe&quot;);\r\n    this.blumen[3] = new Blume(plattformen[12], 2000, 240, 170, 25, &quot;safe&quot;);\r\n    this.blumen[4] = new Blume(plattformen[17], 2500, 450, 200, 25, &quot;safe&quot;);\r\n    this.blumen[5] = new Blume(plattformen[15], 3700, 550, 200, 25, &quot;safe&quot;);\r\n    this.blumen[6] = new Blume(plattformen[14], 4000, 200, 200, 25, &quot;safe&quot;);\r\n    this.blumen[7] = new Blume(plattformen[13], 4100, 460, 200, 25, &quot;safe&quot;);\r\n\r\n\r\n\r\n    this.giftBlumen = new GiftBlume[4]; //\r\n    this.giftBlumen [0] = new GiftBlume(1450, 420, 290, 25, &quot;death&quot;);\r\n    this.giftBlumen [1] = new GiftBlume(3000, 420, 290, 25, &quot;death&quot;);\r\n    this.giftBlumen [2] = new GiftBlume(3400, 420, 290, 25, &quot;death&quot;);\r\n    this.giftBlumen [3] = new GiftBlume(4800, 420, 290, 25, &quot;death&quot;);\r\n\r\n\r\n    this.waben = new Wabe[47];\r\n    this.waben[0] = new Wabe(430, 100, 30, 30); //nach Blume 1\r\n    this.waben[1] = new Wabe(430, 150, 30, 30);\r\n    this.waben[2] = new Wabe(430, 200, 30, 30);\r\n    this.waben[3] = new Wabe(430, 250, 30, 30);\r\n    this.waben[4] = new Wabe(430, 300, 30, 30);\r\n\r\n    this.waben[5] = new Wabe(960, 130, 30, 30); // nach Blume 2\r\n    this.waben[6] = new Wabe(990, 160, 30, 30);\r\n    this.waben[7] = new Wabe(1020, 190, 30, 30);\r\n    this.waben[8] = new Wabe(1050, 220, 30, 30);\r\n    this.waben[9] = new Wabe(1080, 250, 30, 30);\r\n    this.waben[10] = new Wabe(1110, 280, 30, 30);\r\n\r\n    this.waben[11] = new Wabe(1540, 160, 30, 30); // Blume 4\r\n    this.waben[12] = new Wabe(1540, 100, 30, 30);\r\n    this.waben[13] = new Wabe(1540, 220, 30, 30);\r\n\r\n    this.waben[14] = new Wabe(2070, 160, 30, 30); // Blume 6\r\n    this.waben[15] = new Wabe(2070, 60, 30, 30);\r\n    this.waben[16] = new Wabe(2040, 110, 30, 30);\r\n    this.waben[17] = new Wabe(2100, 110, 30, 30);\r\n\r\n    this.waben[18] = new Wabe(2770, 300, 30, 30); // nach Blume 6\r\n    this.waben[19] = new Wabe(2820, 300, 30, 30);\r\n    this.waben[20] = new Wabe(2870, 300, 30, 30);\r\n    this.waben[21] = new Wabe(2920, 300, 30, 30);\r\n\r\n    this.waben[22] = new Wabe(3000, 80, 30, 30); // &#252;ber Blume 7 &amp; 8\r\n    this.waben[23] = new Wabe(3050, 80, 30, 30);\r\n    this.waben[24] = new Wabe(3100, 80, 30, 30);\r\n    this.waben[25] = new Wabe(3150, 80, 30, 30);\r\n    this.waben[26] = new Wabe(3200, 80, 30, 30);\r\n    this.waben[27] = new Wabe(3250, 80, 30, 30);\r\n    this.waben[28] = new Wabe(3300, 80, 30, 30);\r\n    this.waben[29] = new Wabe(3350, 80, 30, 30);\r\n    this.waben[30] = new Wabe(3400, 80, 30, 30);\r\n    this.waben[31] = new Wabe(3450, 80, 30, 30);\r\n    this.waben[32] = new Wabe(3500, 80, 30, 30);\r\n    this.waben[33] = new Wabe(3550, 80, 30, 30);\r\n\r\n\r\n    this.waben[34] = new Wabe(3700, 450, 30, 30); // Blume 9\r\n    this.waben[35] = new Wabe(3750, 450, 30, 30);\r\n    this.waben[36] = new Wabe(3800, 450, 30, 30);\r\n    this.waben[37] = new Wabe(3850, 450, 30, 30);\r\n    this.waben[38] = new Wabe(3900, 450, 30, 30);\r\n\r\n\r\n    this.waben[39] = new Wabe(4400, 200, 30, 30); // nach Blume 11\r\n    this.waben[40] = new Wabe(4450, 200, 30, 30);\r\n    this.waben[41] = new Wabe(4500, 200, 30, 30);\r\n    this.waben[42] = new Wabe(4550, 200, 30, 30);\r\n    this.waben[43] = new Wabe(4600, 200, 30, 30);\r\n    this.waben[44] = new Wabe(4650, 200, 30, 30);\r\n    this.waben[45] = new Wabe(4600, 150, 30, 30);\r\n    this.waben[46] = new Wabe(4600, 250, 30, 30);\r\n\r\n\r\n\r\n\r\n\r\n\r\n    hintergrund1 = loadImage(&quot;hintergrund3.png&quot;);\r\n    backImage2 = new ImageObject(0, 0, 1400, 750, hintergrund1);\r\n    gameWorld = new FrameObject(0, 0, backImage2.w*4, backImage2.h);\r\n    camera = new FrameObject(0, 0, width, height);\r\n\r\n    this.h = new Haus();\r\n\r\n\r\n\r\n    this.enemies = new Enemy [this.blumen.length];\r\n    for (int i = 0; i &lt; this.blumen.length; i++) {\r\n      this.enemies[i] = new Enemy (this.blumen[i]);\r\n    }\r\n\r\n    camera.x = (gameWorld.x + gameWorld.w/2) - camera.w/2;\r\n    camera.y = (gameWorld.y + gameWorld.h/2) - camera.h/2;\r\n  }\r\n\r\n\r\n  //Methoden\r\n\r\n\r\n  void display ()\r\n  {\r\n    this.p.update();\r\n\r\n    for (int i = 0; i &lt; this.blumen.length; ++ i) // f&#252;r nicht sichere Plattform\r\n    {\r\n      this.p.collisionSide = rectangleCollisions(this.p, this.blumen[i]);\r\n      if (this.p.collisionSide != &quot;none&quot; &amp;&amp; this.blumen[i].typeof == &quot;death&quot;)\r\n      {\r\n        this.p.leben();\r\n      }\r\n      this.p.checkBlumen();\r\n    }\r\n\r\n    //Kamerabeewgung\r\n    camera.x = floor(p.x + (p.halfWidth) - (camera.w/2));\r\n    camera.y = floor(p.y + (p.halfHeight) - (camera.h/2));\r\n\r\n    if (camera.x &lt; gameWorld.x)\r\n    {\r\n      camera.x = gameWorld.x;\r\n    }\r\n    if (camera.y &lt; gameWorld.y)\r\n    {\r\n      camera.y = gameWorld.y;\r\n    }\r\n\r\n    if (camera.x + camera.w &gt; gameWorld.x + gameWorld.w)\r\n    {\r\n      camera.x = gameWorld.x + gameWorld.w - camera.w;\r\n    }\r\n    if (camera.y + camera.h &gt; gameWorld.h)\r\n    {\r\n      camera.y = gameWorld.h - camera.h;\r\n    }\r\n\r\n    for (int i = 0; i &lt; this.enemies.length; i++) {\r\n      this.enemies[i].update();\r\n      if (rectangleCollisionPvE(this.p, this.enemies[i]) &amp;&amp; !this.enemies[i].dead) {\r\n\r\n        this.enemies[i].deathJump();\r\n      }\r\n    }\r\n\r\n    pushMatrix();\r\n    translate(-camera.x, -camera.y);\r\n\r\n    this.backImage2.display();\r\n    this.p.display();\r\n\r\n    for (int i = 0; i &lt; this.blumen.length; ++i)\r\n    {\r\n      this.blumen[i].display();\r\n    }\r\n\r\n    for (int i = 0; i &lt; this.giftBlumen.length; ++i) //\r\n    {\r\n      this.giftBlumen[i].display();\r\n      if (intersectGiftBlume(this.p, this.giftBlumen[i]) == true)\r\n      {\r\n        this.p.lebenGift();\r\n      }\r\n    }\r\n\r\n    for (int i = 0; i &lt; waben.length; ++i)\r\n    {\r\n      this.waben[i].display();\r\n      if (intersect(this.p, this.waben[i]) == true)\r\n      {\r\n        this.waben[i].caught();\r\n        this.score ++;\r\n      }\r\n    }\r\n\r\n    for (int i = 0; i &lt; this.enemies.length; i++) {\r\n      this.enemies[i].display();\r\n    }\r\n\r\n    for (int i = 0; i &lt; this.haus.width/2; i ++)\r\n      this.h.display();\r\n\r\n    if (intersectHaus(this.p, this.h) == true)\r\n    {\r\n\r\n      image(this.hintergrund, 200, 200);\r\n\r\n\r\n      this.parent.setGameState(&quot;WIN3&quot;);\r\n    }\r\n\r\n\r\n\r\n    popMatrix();\r\n\r\n    fill(255);\r\n    String s = &quot;Score: &quot; + score;\r\n    textSize(20);\r\n    text(s, 1270, 50);\r\n    //textFont(Font1);\r\n    textSize(20);\r\n    text(&quot;Steuerung:&quot;, 60, 50);\r\n    textSize(18);\r\n    text(&quot;space - springen, a - links, d - rechts&quot;, 60, 70);\r\n\r\n    this.p.leben();\r\n  }\r\n\r\n\r\n\r\n  boolean intersect(Player p, Wabe w)\r\n  {\r\n    float distance = dist(p.x, p.y, w.x, w.y);\r\n    if (distance &lt; (p.w/2 + w.w/2))\r\n    {\r\n      return true;\r\n    } else\r\n    {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  boolean intersectGiftBlume(Player p, GiftBlume g) //\r\n  {\r\n    float distance = dist(p.x, p.y, g.x, g.y);\r\n    if (distance &lt; (p.w/2 + g.w/2))\r\n    {\r\n      return true;\r\n    } else\r\n    {\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  boolean intersectHaus(Player p, Haus h)\r\n  {\r\n    float distance = dist(p.x, p.y, h.x, h.y);\r\n    if (distance &lt; (p.w/2 + h.w/2))\r\n    {\r\n      return true;\r\n    } else\r\n    {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  boolean rectangleCollisionPvE (Player r1, Enemy r2) {\r\n    float dx = (r1.x + r1.w/2) - (r2.x + r2.w/2);\r\n    float dy = (r1.y + r1.h/2) - (r2.y + r2.h/2);\r\n\r\n    float combinedHalfWidths = r1.halfWidth + r2.halfWidth;\r\n    float combinedHalfHeights = r1.halfHeight + r2.halfHeight;\r\n\r\n    if (abs(dx)&lt; combinedHalfWidths) {\r\n      if (abs(dy)&lt; combinedHalfHeights) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  String rectangleCollisions(Player r1, Blume r2)\r\n  {\r\n    if (r1.vy &lt; 0) // ausklammern um nicht von unten durch die Blume springen\r\n    {\r\n      return &quot;none&quot;;\r\n    }\r\n\r\n    float dx = (r1.x + r1.w/2) - (r2.x + r2.w/2);\r\n    float dy = (r1.y + r1.h/2) - (r2.y + r2.h/2);\r\n\r\n    float combinedHalfWidths = r1.halfWidth + r2.halfWidth;\r\n    float combinedHalfHeights = r1.halfHeight + r2.halfHeight;\r\n\r\n    if (abs(dx) &lt; combinedHalfWidths)\r\n    {\r\n      if (abs(dy) &lt; combinedHalfHeights)\r\n      {\r\n        float overlapX = combinedHalfWidths - abs(dx);\r\n        float overlapY = combinedHalfHeights - abs(dy);\r\n\r\n        if (overlapX &gt;= overlapY)\r\n        {\r\n          if (dy &gt; 0)\r\n          {\r\n            r1.y += overlapY;\r\n            return &quot;top&quot;;\r\n          } else\r\n          {\r\n            r1.y -= overlapY;\r\n            return &quot;bottom&quot;;\r\n          }\r\n        } else\r\n        {\r\n          if (dx &gt; 0)\r\n          {\r\n            r1.x += overlapX;\r\n            return &quot;left&quot;;\r\n          } else\r\n          {\r\n            r1.x -= overlapX;\r\n            return &quot;right&quot;;\r\n          }\r\n        }\r\n      } else\r\n      {\r\n        return &quot;none&quot;;\r\n      }\r\n    } else\r\n    {\r\n      return &quot;none&quot;;\r\n    }\r\n  }\r\n}\r\n\r\n-------------------------- class Player-----------------------\r\nclass Player\r\n{\r\n  // Eigenschaften\r\n  private float w, h, x, y, vx, vy, accelerationX, accelerationY, speedLimit; // acceleration = Beschleunigung\r\n  private int lives;\r\n\r\n  // world values\r\n  private float friction, bounce, gravity;\r\n\r\n  private boolean isOnGround;\r\n  private float jumpForce;\r\n\r\n  private float halfWidth, halfHeight;\r\n  private String collisionSide;\r\n\r\n  private boolean facingRight;\r\n  public String gameState;\r\n  private PImage player, player2;\r\n\r\n\r\n\r\n\r\n\r\n  // Konstruktor\r\n  Player()\r\n  {\r\n    this.init();\r\n    this.lives = 3;\r\n    this.player = loadImage(&quot;biene.png&quot;);\r\n    this.player2 = loadImage(&quot;biene2.png&quot;);\r\n  }\r\n\r\n  void init()\r\n  {\r\n    this.w = 90; // an Biene anpassen!\r\n    this.h = 65;\r\n    this.x = 50; // - w/2;\r\n    this.y = 10; //(gameWorld.y + gameWorld.h/2) - h/2;\r\n    this.vx = 0;\r\n    this.vy = 0;\r\n    this.accelerationX = 0;\r\n    this.accelerationY = 0;\r\n    this.speedLimit = 15;\r\n    this.isOnGround = false;\r\n    this.jumpForce = -15; //H&#246;he Sprung\r\n\r\n    // world values\r\n    this.friction = 0.96;\r\n    this.bounce = -0.2;\r\n    this.gravity = 0.3;\r\n\r\n    this.halfWidth = w/2;\r\n    this.halfHeight = h/2;\r\n\r\n    this.facingRight = true;\r\n\r\n\r\n    this.collisionSide = &quot;&quot;;\r\n  }\r\n\r\n  // Methoden\r\n  void update()\r\n  {\r\n    //text(&quot;Leben: &quot;+this.lives, 1000, 500);\r\n\r\n    // start all moves off with friction at 1\r\n    if (left &amp;&amp; !right)\r\n    {\r\n      this.accelerationX = -0.2;\r\n      this.friction = 1;\r\n      this.facingRight = false;\r\n    }\r\n    if (right &amp;&amp; !left)\r\n    {\r\n      this.accelerationX = 0.2;\r\n      this.friction = 1;\r\n      this.facingRight = true;\r\n    }\r\n    if (!left &amp;&amp; !right)\r\n    {\r\n      this.accelerationX = 0;\r\n    }\r\n    if (up &amp;&amp; !down &amp;&amp; isOnGround) // &lt;--- im Fall fliegen k&#246;nnen\r\n    {\r\n      this.vy = this.jumpForce;\r\n      this.isOnGround = false;\r\n      this.friction = 1;\r\n    }\r\n    if (down &amp;&amp; !up)\r\n    {\r\n      this.accelerationY = 0.2;\r\n      this.friction = 1;\r\n    }\r\n    if (!up &amp;&amp; !down)\r\n    {\r\n      this.accelerationY = 0;\r\n    }\r\n    // removing impulse reintroduces friction\r\n    if (!up &amp;&amp; !down &amp;&amp; !left &amp;&amp; !right)\r\n    {\r\n      this.friction = 0.96;\r\n      this.gravity = 0.3; // Geschwindigkeit des Fallens\r\n    }\r\n\r\n    this.vx += this.accelerationX;\r\n    this.vy += this.accelerationY;\r\n\r\n    // friction 1 = no friction\r\n    this.vx *= this.friction;\r\n    this.vy *= this.friction;\r\n\r\n    //apply gravity\r\n    this.vy += this.gravity;\r\n\r\n    // correct fpr max. speeds\r\n    if (this.vx &gt; this.speedLimit)\r\n    {\r\n      this.vx = this.speedLimit;\r\n    }\r\n    if (this.vx &lt; -this.speedLimit)\r\n    {\r\n      this.vx = -this.speedLimit;\r\n    }\r\n    // need to let gravity ramp it up\r\n    if (this.vy &gt; 3* this.speedLimit) // Geschwindigkeit des Fallens\r\n    {\r\n      this.vy = 3 * this.speedLimit;\r\n    }\r\n    if (this.vy &lt; -this.speedLimit)\r\n    {\r\n      this.vy = -this.speedLimit;\r\n    }\r\n\r\n    if (abs(vx) &lt; 0.2)\r\n    {\r\n      this.vx = 0;\r\n    }\r\n\r\n    if (abs(vy) &lt; 0.2)\r\n    {\r\n      this.vy = 0;\r\n    }\r\n\r\n    // move player\r\n    this.x += this.vx;\r\n    this.y += this.vy;\r\n\r\n    this.checkBoundaries();\r\n    this.checkBlumen();\r\n\r\n    //x = Math.max(0, Math.min(x + vx, gameWorld.w - w));\r\n    //y = Math.max(0, Math.min(y + vy, gameWorld.h - h));\r\n  } // Update Ende\r\n\r\n  void checkBoundaries()\r\n  {\r\n    // left\r\n    if (this.x &lt; 0)\r\n    {\r\n      this.vx *= this.bounce;\r\n      this.x = 0;\r\n    }\r\n\r\n    if (this.y &lt; 0)\r\n    {\r\n      this.vy *= this.bounce;\r\n      this.y = 0;\r\n    }\r\n  }\r\n\r\n\r\n  void checkBlumen()\r\n  {\r\n    if (this.collisionSide == &quot;bottom&quot; &amp;&amp; this.vy &gt;= 0)\r\n    {\r\n      if (this.vy &lt; 1)\r\n      {\r\n        this.isOnGround = true;\r\n        this.vy = 0;\r\n        println(&quot;top&quot;);\r\n      } else\r\n      {\r\n        this.vy *= this.bounce/2;\r\n      }\r\n    } else if (this.collisionSide == &quot;top&quot; &amp;&amp; this.vy &lt;= 0)\r\n    {\r\n      this.vy = 0;\r\n    } else if (this.collisionSide == &quot;right&quot; &amp;&amp; this.vx &gt;= 0)\r\n    {\r\n      this.vx = 0;\r\n    } else if (this.collisionSide == &quot;left&quot; &amp;&amp; this.vx &lt;= 0)\r\n    {\r\n      this.vx = 0;\r\n    }\r\n    if (this.collisionSide != &quot;bottom&quot; &amp;&amp; this.vy &gt; 0)\r\n    {\r\n      this.isOnGround = false;\r\n    }\r\n  }\r\n\r\n  void lebenGift()\r\n  {\r\n    this.init();\r\n    this.lives --;\r\n    if (this.lives &lt;1)\r\n    {\r\n      gameState = &quot;LOSE&quot;;\r\n    }\r\n  }\r\n\r\n  void leben()\r\n  {\r\n    text(&quot;Leben: &quot;+this.lives, 1270, 100);\r\n    if (this.y + this.h &gt; height)\r\n    {\r\n      this.init();\r\n      this.lives--;\r\n      if (this.lives &lt;1)\r\n      {\r\n        gameState = &quot;LOSE&quot;;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  void display()\r\n  {\r\n    fill(0);\r\n    //rect(x, y, w, h);\r\n    if (facingRight)\r\n    {\r\n      image(this.player, x, y - 40);\r\n    } else\r\n    {\r\n      image(this.player2, x, y - 40);\r\n    }\r\n  }\r\n}\r\n\r\n ","title":"Class in Processing can&#39;t reach another class","body":"<p>We are programming a jump and run game in processing which is java based. We have 12 classes and a main sketch. In the class game we describe the states of the game and what is supposed to happen when that game state happens. There is a problem with our player, in the class player we defined when the player dies and that the state game-state Lose is supposed to happen. But it seems, that the class player can't reach the definition of that game-state in the class game.</p>\n<p>We are also getting the error NullPointerException.</p>\n<pre><code>-----------------------class Game----------------------\n\nclass Game\n{\n  // Eigenschaften\n  private Level1 level1;\n  private Player p;\n  private Level2 level2;\n  private Level3 level3;\n\n  PImage start;\n  public String gameState;\n\n  public boolean left, right, up, down, space;\n  public FrameObject camera, gameWorld;\n\n  public boolean intersectHaus;\n\n  PImage win;\n  PImage gameover;\n  public Enemy [] enemies;\n  public Blume [] blumen;\n\n  PImage spring;\n\n  public int lives;\n\n  // Konstruktor\n  Game()\n  {\n    size(1400, 750);\n    this.p = new Player();\n\n\n    this.start = loadImage(&quot;start.png&quot;);\n    this.win = loadImage(&quot;win.png&quot;);\n    this.gameover = loadImage(&quot;gameover.png&quot;);\n\n    this.spring = loadImage (&quot;level2.png&quot;);\n\n\n\n    this.gameState = &quot;START&quot;;\n    this.level1 = new Level1(this);\n    this.level2 = new Level2(this);\n    this.level3 = new Level3(this);\n\n    this.lives = 3;\n  }\n\n\n  // Methoden\n\n  void display()\n  {\n    this.p.leben();\n\n    switch(this.gameState)\n    {\n    case &quot;START&quot;:\n    println(&quot;start funktioniert&quot;);\n      startGame();\n      break;\n    case &quot;PLAY1&quot;:\n    println(&quot;play1 funktioniert&quot;);\n      playGame();\n      break;\n    case &quot;WIN&quot;:\n    println(&quot;win funktioniert&quot;);  \n      winGame();\n      break;\n    case &quot;WIN2&quot;:\n      winGame2();\n      break;\n    case &quot;WIN3&quot;:\n      winGame3();\n      break;\n    case &quot;LOSE&quot;:\n    println(&quot;lose hat funktioniert&quot;);\n      loseGame();\n      break;\n    case &quot;PLAY2&quot;:\n      playGame2();\n      break;\n    case &quot;PLAY3&quot;:\n      playGame3();\n      break;\n    }\n  }\n\n\n  void startGame()\n  {\n    image(this.start, 0, 0);\n    if (mousePressed == true)\n    {\n      klick.play();\n      gameState = &quot;PLAY1&quot;;\n    }\n  }\n\n  void playGame()\n  {\n    this.level1.display();\n  }\n\n  void playGame2()\n  {\n    this.level2.display();\n  }\n\n  void playGame3()\n  {\n    this.level3.display();\n  }\n\n  void winGame2()\n  {\n    image(this.win, 0, 0);\n    if (mousePressed == true)\n    {\n      klick.play();\n\n      if (mousePressed == true)\n      {\n        klick.play();\n        gameState = &quot;PLAY3&quot;;\n      }\n    }\n  }\n  void winGame3()\n  {\n    image(this.win, 0, 0);\n    if (mousePressed == true)\n    {\n      klick.play();\n      gameState = &quot;START&quot;;\n      this.level1.reset();\n    }\n  }\n\n  void winGame()\n  {\n    image(this.win, 0, 0);\n    if (mousePressed == true)\n    {\n      klick.play();\n\n      if (mousePressed == true)\n      {\n        klick.play();\n        gameState = &quot;PLAY2&quot;;\n        this.level2.reset();\n      }\n    }\n  }\n\n  void loseGame()\n  {\n    //noLoop();\n    \n    image(this.gameover, 0, 0);\n    if (mousePressed == true)\n    {\n      klick.play();\n      gameState = &quot;START&quot;;\n      this.level1.reset();\n    }\n  }\n  \n  public void setGameState(String state)\n  {\n    this.gameState = state;\n  }\n  \n  public Player getPlayer()\n  {\n    return this.p;\n  }\n}\n\n\n---------------------class Level3---------------------\nclass Level3\n{\n  private Player p;\n  private Blume [] blumen;\n  private Wabe [] waben;\n  private GiftBlume [] giftBlumen;\n  private Haus h;\n  private FrameObject camera, gameWorld;\n  public ImageObject backImage;\n  public ImageObject backImage1;\n  public ImageObject backImage2;\n  PImage hintergrund;\n  PImage background;\n  private Game parent;\n\n  PImage hintergrund1;\n  private Enemy [] enemies;\n  PImage haus;\n\n  private int score;\n\n  //Konstruktor\n\n  Level3(Game parent)\n  {\n    size(1400, 750);\n    this.parent = parent;\n    this.score = 0;\n\n\n    for (int i = 0; i &lt; plattformen.length; i++)\n    {\n      plattformen[i] = loadImage(&quot;blume&quot;+i+&quot;.png&quot;);\n    }\n\n\n    left = false;\n    right = false;\n    up = false;\n    down = false;\n    space = false;\n\n\n    this.p = this.parent.getPlayer();\n\n    this.blumen = new Blume[8];\n    this.blumen[0] = new Blume(plattformen[15], 10, 550, 200, 25, &quot;safe&quot;);\n    this.blumen[1] = new Blume(plattformen[14], 700, 200, 200, 25, &quot;safe&quot;);\n    this.blumen[2] = new Blume(plattformen[13], 1100, 460, 200, 25, &quot;safe&quot;);\n    this.blumen[3] = new Blume(plattformen[12], 2000, 240, 170, 25, &quot;safe&quot;);\n    this.blumen[4] = new Blume(plattformen[17], 2500, 450, 200, 25, &quot;safe&quot;);\n    this.blumen[5] = new Blume(plattformen[15], 3700, 550, 200, 25, &quot;safe&quot;);\n    this.blumen[6] = new Blume(plattformen[14], 4000, 200, 200, 25, &quot;safe&quot;);\n    this.blumen[7] = new Blume(plattformen[13], 4100, 460, 200, 25, &quot;safe&quot;);\n\n\n\n    this.giftBlumen = new GiftBlume[4]; //\n    this.giftBlumen [0] = new GiftBlume(1450, 420, 290, 25, &quot;death&quot;);\n    this.giftBlumen [1] = new GiftBlume(3000, 420, 290, 25, &quot;death&quot;);\n    this.giftBlumen [2] = new GiftBlume(3400, 420, 290, 25, &quot;death&quot;);\n    this.giftBlumen [3] = new GiftBlume(4800, 420, 290, 25, &quot;death&quot;);\n\n\n    this.waben = new Wabe[47];\n    this.waben[0] = new Wabe(430, 100, 30, 30); //nach Blume 1\n    this.waben[1] = new Wabe(430, 150, 30, 30);\n    this.waben[2] = new Wabe(430, 200, 30, 30);\n    this.waben[3] = new Wabe(430, 250, 30, 30);\n    this.waben[4] = new Wabe(430, 300, 30, 30);\n\n    this.waben[5] = new Wabe(960, 130, 30, 30); // nach Blume 2\n    this.waben[6] = new Wabe(990, 160, 30, 30);\n    this.waben[7] = new Wabe(1020, 190, 30, 30);\n    this.waben[8] = new Wabe(1050, 220, 30, 30);\n    this.waben[9] = new Wabe(1080, 250, 30, 30);\n    this.waben[10] = new Wabe(1110, 280, 30, 30);\n\n    this.waben[11] = new Wabe(1540, 160, 30, 30); // Blume 4\n    this.waben[12] = new Wabe(1540, 100, 30, 30);\n    this.waben[13] = new Wabe(1540, 220, 30, 30);\n\n    this.waben[14] = new Wabe(2070, 160, 30, 30); // Blume 6\n    this.waben[15] = new Wabe(2070, 60, 30, 30);\n    this.waben[16] = new Wabe(2040, 110, 30, 30);\n    this.waben[17] = new Wabe(2100, 110, 30, 30);\n\n    this.waben[18] = new Wabe(2770, 300, 30, 30); // nach Blume 6\n    this.waben[19] = new Wabe(2820, 300, 30, 30);\n    this.waben[20] = new Wabe(2870, 300, 30, 30);\n    this.waben[21] = new Wabe(2920, 300, 30, 30);\n\n    this.waben[22] = new Wabe(3000, 80, 30, 30); // ber Blume 7 &amp; 8\n    this.waben[23] = new Wabe(3050, 80, 30, 30);\n    this.waben[24] = new Wabe(3100, 80, 30, 30);\n    this.waben[25] = new Wabe(3150, 80, 30, 30);\n    this.waben[26] = new Wabe(3200, 80, 30, 30);\n    this.waben[27] = new Wabe(3250, 80, 30, 30);\n    this.waben[28] = new Wabe(3300, 80, 30, 30);\n    this.waben[29] = new Wabe(3350, 80, 30, 30);\n    this.waben[30] = new Wabe(3400, 80, 30, 30);\n    this.waben[31] = new Wabe(3450, 80, 30, 30);\n    this.waben[32] = new Wabe(3500, 80, 30, 30);\n    this.waben[33] = new Wabe(3550, 80, 30, 30);\n\n\n    this.waben[34] = new Wabe(3700, 450, 30, 30); // Blume 9\n    this.waben[35] = new Wabe(3750, 450, 30, 30);\n    this.waben[36] = new Wabe(3800, 450, 30, 30);\n    this.waben[37] = new Wabe(3850, 450, 30, 30);\n    this.waben[38] = new Wabe(3900, 450, 30, 30);\n\n\n    this.waben[39] = new Wabe(4400, 200, 30, 30); // nach Blume 11\n    this.waben[40] = new Wabe(4450, 200, 30, 30);\n    this.waben[41] = new Wabe(4500, 200, 30, 30);\n    this.waben[42] = new Wabe(4550, 200, 30, 30);\n    this.waben[43] = new Wabe(4600, 200, 30, 30);\n    this.waben[44] = new Wabe(4650, 200, 30, 30);\n    this.waben[45] = new Wabe(4600, 150, 30, 30);\n    this.waben[46] = new Wabe(4600, 250, 30, 30);\n\n\n\n\n\n\n    hintergrund1 = loadImage(&quot;hintergrund3.png&quot;);\n    backImage2 = new ImageObject(0, 0, 1400, 750, hintergrund1);\n    gameWorld = new FrameObject(0, 0, backImage2.w*4, backImage2.h);\n    camera = new FrameObject(0, 0, width, height);\n\n    this.h = new Haus();\n\n\n\n    this.enemies = new Enemy [this.blumen.length];\n    for (int i = 0; i &lt; this.blumen.length; i++) {\n      this.enemies[i] = new Enemy (this.blumen[i]);\n    }\n\n    camera.x = (gameWorld.x + gameWorld.w/2) - camera.w/2;\n    camera.y = (gameWorld.y + gameWorld.h/2) - camera.h/2;\n  }\n\n\n  //Methoden\n\n\n  void display ()\n  {\n    this.p.update();\n\n    for (int i = 0; i &lt; this.blumen.length; ++ i) // fr nicht sichere Plattform\n    {\n      this.p.collisionSide = rectangleCollisions(this.p, this.blumen[i]);\n      if (this.p.collisionSide != &quot;none&quot; &amp;&amp; this.blumen[i].typeof == &quot;death&quot;)\n      {\n        this.p.leben();\n      }\n      this.p.checkBlumen();\n    }\n\n    //Kamerabeewgung\n    camera.x = floor(p.x + (p.halfWidth) - (camera.w/2));\n    camera.y = floor(p.y + (p.halfHeight) - (camera.h/2));\n\n    if (camera.x &lt; gameWorld.x)\n    {\n      camera.x = gameWorld.x;\n    }\n    if (camera.y &lt; gameWorld.y)\n    {\n      camera.y = gameWorld.y;\n    }\n\n    if (camera.x + camera.w &gt; gameWorld.x + gameWorld.w)\n    {\n      camera.x = gameWorld.x + gameWorld.w - camera.w;\n    }\n    if (camera.y + camera.h &gt; gameWorld.h)\n    {\n      camera.y = gameWorld.h - camera.h;\n    }\n\n    for (int i = 0; i &lt; this.enemies.length; i++) {\n      this.enemies[i].update();\n      if (rectangleCollisionPvE(this.p, this.enemies[i]) &amp;&amp; !this.enemies[i].dead) {\n\n        this.enemies[i].deathJump();\n      }\n    }\n\n    pushMatrix();\n    translate(-camera.x, -camera.y);\n\n    this.backImage2.display();\n    this.p.display();\n\n    for (int i = 0; i &lt; this.blumen.length; ++i)\n    {\n      this.blumen[i].display();\n    }\n\n    for (int i = 0; i &lt; this.giftBlumen.length; ++i) //\n    {\n      this.giftBlumen[i].display();\n      if (intersectGiftBlume(this.p, this.giftBlumen[i]) == true)\n      {\n        this.p.lebenGift();\n      }\n    }\n\n    for (int i = 0; i &lt; waben.length; ++i)\n    {\n      this.waben[i].display();\n      if (intersect(this.p, this.waben[i]) == true)\n      {\n        this.waben[i].caught();\n        this.score ++;\n      }\n    }\n\n    for (int i = 0; i &lt; this.enemies.length; i++) {\n      this.enemies[i].display();\n    }\n\n    for (int i = 0; i &lt; this.haus.width/2; i ++)\n      this.h.display();\n\n    if (intersectHaus(this.p, this.h) == true)\n    {\n\n      image(this.hintergrund, 200, 200);\n\n\n      this.parent.setGameState(&quot;WIN3&quot;);\n    }\n\n\n\n    popMatrix();\n\n    fill(255);\n    String s = &quot;Score: &quot; + score;\n    textSize(20);\n    text(s, 1270, 50);\n    //textFont(Font1);\n    textSize(20);\n    text(&quot;Steuerung:&quot;, 60, 50);\n    textSize(18);\n    text(&quot;space - springen, a - links, d - rechts&quot;, 60, 70);\n\n    this.p.leben();\n  }\n\n\n\n  boolean intersect(Player p, Wabe w)\n  {\n    float distance = dist(p.x, p.y, w.x, w.y);\n    if (distance &lt; (p.w/2 + w.w/2))\n    {\n      return true;\n    } else\n    {\n      return false;\n    }\n  }\n\n  boolean intersectGiftBlume(Player p, GiftBlume g) //\n  {\n    float distance = dist(p.x, p.y, g.x, g.y);\n    if (distance &lt; (p.w/2 + g.w/2))\n    {\n      return true;\n    } else\n    {\n      return false;\n    }\n  }\n\n\n  boolean intersectHaus(Player p, Haus h)\n  {\n    float distance = dist(p.x, p.y, h.x, h.y);\n    if (distance &lt; (p.w/2 + h.w/2))\n    {\n      return true;\n    } else\n    {\n      return false;\n    }\n  }\n\n  boolean rectangleCollisionPvE (Player r1, Enemy r2) {\n    float dx = (r1.x + r1.w/2) - (r2.x + r2.w/2);\n    float dy = (r1.y + r1.h/2) - (r2.y + r2.h/2);\n\n    float combinedHalfWidths = r1.halfWidth + r2.halfWidth;\n    float combinedHalfHeights = r1.halfHeight + r2.halfHeight;\n\n    if (abs(dx)&lt; combinedHalfWidths) {\n      if (abs(dy)&lt; combinedHalfHeights) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  String rectangleCollisions(Player r1, Blume r2)\n  {\n    if (r1.vy &lt; 0) // ausklammern um nicht von unten durch die Blume springen\n    {\n      return &quot;none&quot;;\n    }\n\n    float dx = (r1.x + r1.w/2) - (r2.x + r2.w/2);\n    float dy = (r1.y + r1.h/2) - (r2.y + r2.h/2);\n\n    float combinedHalfWidths = r1.halfWidth + r2.halfWidth;\n    float combinedHalfHeights = r1.halfHeight + r2.halfHeight;\n\n    if (abs(dx) &lt; combinedHalfWidths)\n    {\n      if (abs(dy) &lt; combinedHalfHeights)\n      {\n        float overlapX = combinedHalfWidths - abs(dx);\n        float overlapY = combinedHalfHeights - abs(dy);\n\n        if (overlapX &gt;= overlapY)\n        {\n          if (dy &gt; 0)\n          {\n            r1.y += overlapY;\n            return &quot;top&quot;;\n          } else\n          {\n            r1.y -= overlapY;\n            return &quot;bottom&quot;;\n          }\n        } else\n        {\n          if (dx &gt; 0)\n          {\n            r1.x += overlapX;\n            return &quot;left&quot;;\n          } else\n          {\n            r1.x -= overlapX;\n            return &quot;right&quot;;\n          }\n        }\n      } else\n      {\n        return &quot;none&quot;;\n      }\n    } else\n    {\n      return &quot;none&quot;;\n    }\n  }\n}\n\n-------------------------- class Player-----------------------\nclass Player\n{\n  // Eigenschaften\n  private float w, h, x, y, vx, vy, accelerationX, accelerationY, speedLimit; // acceleration = Beschleunigung\n  private int lives;\n\n  // world values\n  private float friction, bounce, gravity;\n\n  private boolean isOnGround;\n  private float jumpForce;\n\n  private float halfWidth, halfHeight;\n  private String collisionSide;\n\n  private boolean facingRight;\n  public String gameState;\n  private PImage player, player2;\n\n\n\n\n\n  // Konstruktor\n  Player()\n  {\n    this.init();\n    this.lives = 3;\n    this.player = loadImage(&quot;biene.png&quot;);\n    this.player2 = loadImage(&quot;biene2.png&quot;);\n  }\n\n  void init()\n  {\n    this.w = 90; // an Biene anpassen!\n    this.h = 65;\n    this.x = 50; // - w/2;\n    this.y = 10; //(gameWorld.y + gameWorld.h/2) - h/2;\n    this.vx = 0;\n    this.vy = 0;\n    this.accelerationX = 0;\n    this.accelerationY = 0;\n    this.speedLimit = 15;\n    this.isOnGround = false;\n    this.jumpForce = -15; //Hhe Sprung\n\n    // world values\n    this.friction = 0.96;\n    this.bounce = -0.2;\n    this.gravity = 0.3;\n\n    this.halfWidth = w/2;\n    this.halfHeight = h/2;\n\n    this.facingRight = true;\n\n\n    this.collisionSide = &quot;&quot;;\n  }\n\n  // Methoden\n  void update()\n  {\n    //text(&quot;Leben: &quot;+this.lives, 1000, 500);\n\n    // start all moves off with friction at 1\n    if (left &amp;&amp; !right)\n    {\n      this.accelerationX = -0.2;\n      this.friction = 1;\n      this.facingRight = false;\n    }\n    if (right &amp;&amp; !left)\n    {\n      this.accelerationX = 0.2;\n      this.friction = 1;\n      this.facingRight = true;\n    }\n    if (!left &amp;&amp; !right)\n    {\n      this.accelerationX = 0;\n    }\n    if (up &amp;&amp; !down &amp;&amp; isOnGround) // &lt;--- im Fall fliegen knnen\n    {\n      this.vy = this.jumpForce;\n      this.isOnGround = false;\n      this.friction = 1;\n    }\n    if (down &amp;&amp; !up)\n    {\n      this.accelerationY = 0.2;\n      this.friction = 1;\n    }\n    if (!up &amp;&amp; !down)\n    {\n      this.accelerationY = 0;\n    }\n    // removing impulse reintroduces friction\n    if (!up &amp;&amp; !down &amp;&amp; !left &amp;&amp; !right)\n    {\n      this.friction = 0.96;\n      this.gravity = 0.3; // Geschwindigkeit des Fallens\n    }\n\n    this.vx += this.accelerationX;\n    this.vy += this.accelerationY;\n\n    // friction 1 = no friction\n    this.vx *= this.friction;\n    this.vy *= this.friction;\n\n    //apply gravity\n    this.vy += this.gravity;\n\n    // correct fpr max. speeds\n    if (this.vx &gt; this.speedLimit)\n    {\n      this.vx = this.speedLimit;\n    }\n    if (this.vx &lt; -this.speedLimit)\n    {\n      this.vx = -this.speedLimit;\n    }\n    // need to let gravity ramp it up\n    if (this.vy &gt; 3* this.speedLimit) // Geschwindigkeit des Fallens\n    {\n      this.vy = 3 * this.speedLimit;\n    }\n    if (this.vy &lt; -this.speedLimit)\n    {\n      this.vy = -this.speedLimit;\n    }\n\n    if (abs(vx) &lt; 0.2)\n    {\n      this.vx = 0;\n    }\n\n    if (abs(vy) &lt; 0.2)\n    {\n      this.vy = 0;\n    }\n\n    // move player\n    this.x += this.vx;\n    this.y += this.vy;\n\n    this.checkBoundaries();\n    this.checkBlumen();\n\n    //x = Math.max(0, Math.min(x + vx, gameWorld.w - w));\n    //y = Math.max(0, Math.min(y + vy, gameWorld.h - h));\n  } // Update Ende\n\n  void checkBoundaries()\n  {\n    // left\n    if (this.x &lt; 0)\n    {\n      this.vx *= this.bounce;\n      this.x = 0;\n    }\n\n    if (this.y &lt; 0)\n    {\n      this.vy *= this.bounce;\n      this.y = 0;\n    }\n  }\n\n\n  void checkBlumen()\n  {\n    if (this.collisionSide == &quot;bottom&quot; &amp;&amp; this.vy &gt;= 0)\n    {\n      if (this.vy &lt; 1)\n      {\n        this.isOnGround = true;\n        this.vy = 0;\n        println(&quot;top&quot;);\n      } else\n      {\n        this.vy *= this.bounce/2;\n      }\n    } else if (this.collisionSide == &quot;top&quot; &amp;&amp; this.vy &lt;= 0)\n    {\n      this.vy = 0;\n    } else if (this.collisionSide == &quot;right&quot; &amp;&amp; this.vx &gt;= 0)\n    {\n      this.vx = 0;\n    } else if (this.collisionSide == &quot;left&quot; &amp;&amp; this.vx &lt;= 0)\n    {\n      this.vx = 0;\n    }\n    if (this.collisionSide != &quot;bottom&quot; &amp;&amp; this.vy &gt; 0)\n    {\n      this.isOnGround = false;\n    }\n  }\n\n  void lebenGift()\n  {\n    this.init();\n    this.lives --;\n    if (this.lives &lt;1)\n    {\n      gameState = &quot;LOSE&quot;;\n    }\n  }\n\n  void leben()\n  {\n    text(&quot;Leben: &quot;+this.lives, 1270, 100);\n    if (this.y + this.h &gt; height)\n    {\n      this.init();\n      this.lives--;\n      if (this.lives &lt;1)\n      {\n        gameState = &quot;LOSE&quot;;\n      }\n    }\n  }\n\n\n  void display()\n  {\n    fill(0);\n    //rect(x, y, w, h);\n    if (facingRight)\n    {\n      image(this.player, x, y - 40);\n    } else\n    {\n      image(this.player2, x, y - 40);\n    }\n  }\n}\n\n \n</code></pre>\n"},{"tags":["java","angular","frontend","java-security"],"comments":[{"owner":{"account_id":16145881,"reputation":441,"user_id":11655642,"display_name":"shockwave"},"score":0,"creation_date":1646399323,"post_id":71351609,"comment_id":126119450,"body_markdown":"I think you are missing Authorization header in your request","body":"I think you are missing Authorization header in your request"},{"owner":{"account_id":23664654,"reputation":1,"user_id":17692286,"display_name":"Sahil Mankani"},"score":0,"creation_date":1646401891,"post_id":71351609,"comment_id":126120392,"body_markdown":"I have a interceptor in my frond-end","body":"I have a interceptor in my frond-end"}],"owner":{"account_id":23664654,"reputation":1,"user_id":17692286,"display_name":"Sahil Mankani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646402732,"creation_date":1646397875,"question_id":71351609,"body_markdown":"I&#39;m trying to get a value from my rest api but for some reason it not letting me get it from an authorize user but when i set it permitAll() it does. I&#39;m receiving a 403 error code.\r\n\r\n**Backend**\r\n```http.csrf().disable();\r\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n        \r\nhttp.authorizeRequests().antMatchers(HttpMethod.GET,&quot;/token/refresh/**&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;);\r\n        http.authorizeRequests().antMatchers(HttpMethod.GET,&quot;/api/user/**&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;);\r\n        http.authorizeRequests().antMatchers(HttpMethod.GET,&quot;/api/user/{username}/**&quot;).hasAnyAuthority(&quot;[ROLE_ADMIN]&quot;);\r\n        http.authorizeRequests().antMatchers(HttpMethod.POST,&quot;/api/user/save/**&quot;).hasAnyAuthority(&quot;ROLE_ADMIN&quot;);\r\n        http.authorizeRequests().antMatchers(&quot;/api/login/**&quot;,&quot;/api/user/save/**&quot;,&quot;/api/role/addtouser/**&quot;).permitAll();\r\n        http.authorizeRequests().anyRequest().authenticated();\r\n        http.addFilter(customAuthenticationFilter);\r\n        http.addFilterBefore(new CustomAuthorizationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n        http.httpBasic();\r\n```\r\n\r\n**Front-End**\r\nhere is the request is being send.\r\n```\r\ngetUserId(username) {\r\n    this.http.get(`http://localhost:8080/api/user/${username}`).subscribe(\r\n      resp=&gt;{\r\n        sessionStorage.setItem(&quot;id&quot;,resp.toString())\r\n      }\r\n    )\r\n  } \r\n```\r\n**Interceptor**\r\nthis is my interceptor i think it&#39;s adding it to the header\r\n```@Injectable()\r\nexport class HttpInterceptorInterceptor implements HttpInterceptor {\r\n\r\n  constructor(private authrnticationService: AuthenticationServiceService, private router:Router) {}\r\n\r\n  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler){\r\n    let httpHeaders = new HttpHeaders();\r\n    \r\n\r\n    let basicAuthHeaderString=this.authrnticationService.getAuthenticatedtoken();\r\n    let username= this.authrnticationService.getEmail();\r\n\r\n    \r\n    if (!req.headers.has(&#39;Content-Type&#39;)) {\r\n        httpHeaders = httpHeaders.append(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;)\r\n      }\r\n\r\n    if (basicAuthHeaderString) {\r\n      httpHeaders = httpHeaders.append(&#39;Authorization&#39;, basicAuthHeaderString)\r\n    }\r\n    \r\n    const xhr=req.clone({\r\n        headers: httpHeaders\r\n    })\r\n\r\n    \r\n    return next.handle(xhr).pipe(tap(() =&gt; {},\r\n      (err: any) =&gt; {\r\n        if (err instanceof HttpErrorResponse) {\r\n          if (err.status !== 401) {\r\n            return;\r\n          }\r\n          sessionStorage.clear()\r\n          this.router.navigate([&#39;login&#39;]);\r\n        }\r\n      }));\r\n  }\r\n}\r\n```\r\n","title":"Java Spring Boot Security authorization","body":"<p>I'm trying to get a value from my rest api but for some reason it not letting me get it from an authorize user but when i set it permitAll() it does. I'm receiving a 403 error code.</p>\n<p><strong>Backend</strong></p>\n<pre><code>        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        \nhttp.authorizeRequests().antMatchers(HttpMethod.GET,&quot;/token/refresh/**&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;);\n        http.authorizeRequests().antMatchers(HttpMethod.GET,&quot;/api/user/**&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;);\n        http.authorizeRequests().antMatchers(HttpMethod.GET,&quot;/api/user/{username}/**&quot;).hasAnyAuthority(&quot;[ROLE_ADMIN]&quot;);\n        http.authorizeRequests().antMatchers(HttpMethod.POST,&quot;/api/user/save/**&quot;).hasAnyAuthority(&quot;ROLE_ADMIN&quot;);\n        http.authorizeRequests().antMatchers(&quot;/api/login/**&quot;,&quot;/api/user/save/**&quot;,&quot;/api/role/addtouser/**&quot;).permitAll();\n        http.authorizeRequests().anyRequest().authenticated();\n        http.addFilter(customAuthenticationFilter);\n        http.addFilterBefore(new CustomAuthorizationFilter(), UsernamePasswordAuthenticationFilter.class);\n        http.httpBasic();\n</code></pre>\n<p><strong>Front-End</strong>\nhere is the request is being send.</p>\n<pre><code>getUserId(username) {\n    this.http.get(`http://localhost:8080/api/user/${username}`).subscribe(\n      resp=&gt;{\n        sessionStorage.setItem(&quot;id&quot;,resp.toString())\n      }\n    )\n  } \n</code></pre>\n<p><strong>Interceptor</strong>\nthis is my interceptor i think it's adding it to the header</p>\n<pre><code>export class HttpInterceptorInterceptor implements HttpInterceptor {\n\n  constructor(private authrnticationService: AuthenticationServiceService, private router:Router) {}\n\n  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler){\n    let httpHeaders = new HttpHeaders();\n    \n\n    let basicAuthHeaderString=this.authrnticationService.getAuthenticatedtoken();\n    let username= this.authrnticationService.getEmail();\n\n    \n    if (!req.headers.has('Content-Type')) {\n        httpHeaders = httpHeaders.append('Content-Type', 'application/x-www-form-urlencoded')\n      }\n\n    if (basicAuthHeaderString) {\n      httpHeaders = httpHeaders.append('Authorization', basicAuthHeaderString)\n    }\n    \n    const xhr=req.clone({\n        headers: httpHeaders\n    })\n\n    \n    return next.handle(xhr).pipe(tap(() =&gt; {},\n      (err: any) =&gt; {\n        if (err instanceof HttpErrorResponse) {\n          if (err.status !== 401) {\n            return;\n          }\n          sessionStorage.clear()\n          this.router.navigate(['login']);\n        }\n      }));\n  }\n}\n</code></pre>\n"},{"tags":["java","predicate","functional-interface"],"answers":[{"tags":[],"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"down_vote_count":1,"up_vote_count":54,"is_accepted":true,"score":53,"last_activity_date":1429044061,"creation_date":1429044061,"answer_id":29637022,"question_id":29636979,"body_markdown":"You&#39;re looking for `BooleanSupplier`.\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/function/BooleanSupplier.html","title":"Java interface like Predicate, but without an argument","body":"<p>You're looking for <code>BooleanSupplier</code>.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/BooleanSupplier.html\">https://docs.oracle.com/javase/8/docs/api/java/util/function/BooleanSupplier.html</a></p>\n"}],"owner":{"account_id":5712391,"reputation":1069,"user_id":4513908,"accept_rate":47,"display_name":"Greg Valvo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7405,"favorite_count":0,"down_vote_count":0,"up_vote_count":53,"accepted_answer_id":29637022,"answer_count":1,"score":53,"last_activity_date":1646402647,"creation_date":1429043912,"question_id":29636979,"body_markdown":"I&#39;m looking for a preexisting functional interface like `Predicate`, but one whose `test` method takes no arguments.","title":"Java interface like Predicate, but without an argument","body":"<p>I'm looking for a preexisting functional interface like <code>Predicate</code>, but one whose <code>test</code> method takes no arguments.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646400559,"post_id":71352094,"comment_id":126119898,"body_markdown":"And what is your code doing? Why did you post that code?","body":"And what is your code doing? Why did you post that code?"},{"owner":{"account_id":24093135,"reputation":1,"user_id":18066113,"display_name":"Channel one"},"score":0,"creation_date":1646410365,"post_id":71352094,"comment_id":126123553,"body_markdown":"this code only fetch audio files from particular folder . I want to fetch audio files from phone storage.","body":"this code only fetch audio files from particular folder . I want to fetch audio files from phone storage."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646411244,"post_id":71352094,"comment_id":126123842,"body_markdown":"From which particular folder?","body":"From which particular folder?"},{"owner":{"account_id":24093135,"reputation":1,"user_id":18066113,"display_name":"Channel one"},"score":0,"creation_date":1646412617,"post_id":71352094,"comment_id":126124364,"body_markdown":"in my phone from &quot;Call&quot; folder I get only folder audio not all audios from my phone , how I get?","body":"in my phone from &quot;Call&quot; folder I get only folder audio not all audios from my phone , how I get?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646413316,"post_id":71352094,"comment_id":126124630,"body_markdown":"I see no Call folder in your code.","body":"I see no Call folder in your code."},{"owner":{"account_id":24093135,"reputation":1,"user_id":18066113,"display_name":"Channel one"},"score":0,"creation_date":1646413813,"post_id":71352094,"comment_id":126124821,"body_markdown":"sorry I take wrong screenshot instead of   String targetpath = Environment.getExternalStorageDirectory().getPath() + &quot;/&quot;  ;          String targetpath = Environment.getExternalStorageDirectory().getPath() + &quot;Call&quot;  ;","body":"sorry I take wrong screenshot instead of   String targetpath = Environment.getExternalStorageDirectory().getPath() + &quot;/&quot;  ;          String targetpath = Environment.getExternalStorageDirectory().getPath() + &quot;Call&quot;  ;"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646414995,"post_id":71352094,"comment_id":126125231,"body_markdown":"If you use it without Call you will get all from external storage","body":"If you use it without Call you will get all from external storage"},{"owner":{"account_id":24093135,"reputation":1,"user_id":18066113,"display_name":"Channel one"},"score":0,"creation_date":1646448474,"post_id":71352094,"comment_id":126132341,"body_markdown":"Yes , you are right , but I want only all audio files.","body":"Yes , you are right , but I want only all audio files."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646460905,"post_id":71352094,"comment_id":126133869,"body_markdown":"I do not understand you.","body":"I do not understand you."}],"owner":{"account_id":24093135,"reputation":1,"user_id":18066113,"display_name":"Channel one"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646402619,"creation_date":1646400194,"question_id":71352094,"body_markdown":"   \r\nHow can I access all audio files from my storage internal as well as external in android studio and how can I get recent audio files on top of my recyclerview? \r\n\r\n\r\n\r\n```    \r\n       public ArrayList&lt;ModelClass&gt; getData() {\r\n\r\n        ModelClass f;\r\n        String targetpath = Environment.getExternalStorageDirectory().getPath() + &quot;/&quot;  ;\r\n        File targetdir = new File(targetpath);\r\n        files = targetdir.listFiles();\r\n        if (files.length != 0) {\r\n            for (int i = files.length -1 ; i &gt; -1; i--) {\r\n                File file = files[i];\r\n                f = new ModelClass();\r\n                f.setUri(Uri.fromFile(file));\r\n                f.setPath(files[i].getAbsolutePath());\r\n                f.setDate((file.lastModified()));\r\n                f.setFilename(file.getName());\r\n                if (!f.getUri().toString().endsWith(&quot;.nomedia&quot;)) {\r\n                    fileslist.add(f);\r\n                }\r\n            }\r\n        } else {\r\n            Toast.makeText(this, &quot;Make dummy call&quot;, Toast.LENGTH_SHORT).show();\r\n            dummyCallAlert();\r\n        }\r\n\r\n        return fileslist;\r\n    }\r\n\r\n```\r\n[image given below][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZmODB.png","title":"how to get all audio files from internal and external storage in android studio","body":"<p>How can I access all audio files from my storage internal as well as external in android studio and how can I get recent audio files on top of my recyclerview?</p>\n<pre><code>       public ArrayList&lt;ModelClass&gt; getData() {\n\n        ModelClass f;\n        String targetpath = Environment.getExternalStorageDirectory().getPath() + &quot;/&quot;  ;\n        File targetdir = new File(targetpath);\n        files = targetdir.listFiles();\n        if (files.length != 0) {\n            for (int i = files.length -1 ; i &gt; -1; i--) {\n                File file = files[i];\n                f = new ModelClass();\n                f.setUri(Uri.fromFile(file));\n                f.setPath(files[i].getAbsolutePath());\n                f.setDate((file.lastModified()));\n                f.setFilename(file.getName());\n                if (!f.getUri().toString().endsWith(&quot;.nomedia&quot;)) {\n                    fileslist.add(f);\n                }\n            }\n        } else {\n            Toast.makeText(this, &quot;Make dummy call&quot;, Toast.LENGTH_SHORT).show();\n            dummyCallAlert();\n        }\n\n        return fileslist;\n    }\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ZmODB.png\" rel=\"nofollow noreferrer\">image given below</a></p>\n"},{"tags":["java","android","multithreading","infinite-loop"],"comments":[{"owner":{"account_id":14423201,"reputation":840,"user_id":10418725,"display_name":"Jorn Rigter"},"score":0,"creation_date":1646388221,"post_id":71347243,"comment_id":126115780,"body_markdown":"Could you post your getFreshRates method?","body":"Could you post your getFreshRates method?"},{"owner":{"account_id":16082511,"reputation":279,"user_id":11608028,"display_name":"casper"},"score":0,"creation_date":1646402688,"post_id":71347243,"comment_id":126120681,"body_markdown":"@JornRigter it just does http request and then updates the ui. I didn&#39;t understand why while loop didn&#39;t work. But using Handler worked","body":"@JornRigter it just does http request and then updates the ui. I didn&#39;t understand why while loop didn&#39;t work. But using Handler worked"}],"answers":[{"tags":[],"owner":{"account_id":16082511,"reputation":279,"user_id":11608028,"display_name":"casper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646402583,"creation_date":1646402583,"answer_id":71352564,"question_id":71347243,"body_markdown":"I&#39;ve managed to solve it by using [Handlers][1] \r\n\r\n    // Create the Handler\r\n    private Handler handler = new Handler();\r\n    \r\n        @Override\r\n    protected void onCreate(Bundle savedInstanceState) {  \r\n        // Start the Runnable immediately\r\n        handler.post(runnable);  \r\n    }   \r\n\r\n    static int i = 0;\r\n    // Define the code block to be executed\r\n    private Runnable runnable = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            Log.d(&quot;statici&quot;, String.valueOf(i));\r\n            getFreshRates(endpoints[i]);\r\n                i++;\r\n                if(i == 3) {\r\n                    i = 0;\r\n                }\r\n            // Repeat every 30 seconds\r\n            handler.postDelayed(runnable, 30000);\r\n        }\r\n    };  \r\n      \r\n\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/os/Handler","title":"Android emulator shows gray screen","body":"<p>I've managed to solve it by using <a href=\"https://developer.android.com/reference/android/os/Handler\" rel=\"nofollow noreferrer\">Handlers</a></p>\n<pre><code>// Create the Handler\nprivate Handler handler = new Handler();\n\n    @Override\nprotected void onCreate(Bundle savedInstanceState) {  \n    // Start the Runnable immediately\n    handler.post(runnable);  \n}   \n\nstatic int i = 0;\n// Define the code block to be executed\nprivate Runnable runnable = new Runnable() {\n    @Override\n    public void run() {\n        Log.d(&quot;statici&quot;, String.valueOf(i));\n        getFreshRates(endpoints[i]);\n            i++;\n            if(i == 3) {\n                i = 0;\n            }\n        // Repeat every 30 seconds\n        handler.postDelayed(runnable, 30000);\n    }\n};  \n  \n</code></pre>\n"}],"owner":{"account_id":16082511,"reputation":279,"user_id":11608028,"display_name":"casper"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71352564,"answer_count":1,"score":0,"last_activity_date":1646402583,"creation_date":1646374137,"question_id":71347243,"body_markdown":"I&#39;m trying to make a function that makes api calls to the server each 30 seconds and updates UI each time with fresh data. I made an infinite loop, where I iterate through array with fixed number of endpoints, and inside this loop I call my function. But when I run the app on emulator, the app shows nothing, just a dark-grey background:  \r\n  \r\n[![emulator][1]][1]  \r\n  \r\nIt also doesn&#39;t logs any error, so I have no clue what can be the issue. Below is the code for infinite loop:  \r\n\r\n    private String [] endpoints = new String[] {&quot;https://server.com/api/update-rates?locale=en&quot;, \r\n                                                &quot;https://server.com/api/update-rates?locale=fr&quot;, \r\n                                                 &quot;https://server.com/api/update-rates?locale=gr&quot;};\r\n        Log.d(&quot;forloop&quot;, &quot;test1&quot;);\r\n        while(true) {\r\n            Log.d(&quot;forloop&quot;, &quot;test2&quot;);\r\n            for (int i = 0; i &lt; endpoints.length; i++) {\r\n                getFreshRates(endpoints[i]);\r\n                Log.d(&quot;forloop&quot;, String.valueOf(i));\r\n                try {\r\n                    TimeUnit.SECONDS.sleep(30);\r\n                } catch (InterruptedException ie) {\r\n                    Thread.currentThread().interrupt();\r\n                }\r\n                if(i == 2) {\r\n                    i = -1;\r\n                }\r\n            }\r\n        }  \r\n  \r\nI guarantee that `getFreshRates` method is works properly (I&#39;ve tested with static url) so the issue might be with this loop or some android specific issue.    \r\n  \r\nThe Log.d output are:  \r\n\r\n    2022-03-04 10:56:15.741 8359-8359/com.example.currencyrates D/forloop: test1\r\n    2022-03-04 10:56:15.741 8359-8359/com.example.currencyrates D/forloop: test2\r\n    2022-03-04 10:56:16.270 8359-8359/com.example.currencyrates D/forloop: 0\r\n    2022-03-04 10:56:46.279 8359-8359/com.example.currencyrates D/forloop: 1\r\n    2022-03-04 10:57:16.281 8359-8359/com.example.currencyrates D/forloop: 2\r\n    2022-03-04 10:57:46.288 8359-8359/com.example.currencyrates D/forloop: 0\r\n    2022-03-04 10:58:16.295 8359-8359/com.example.currencyrates D/forloop: 1\r\n    2022-03-04 10:58:46.304 8359-8359/com.example.currencyrates D/forloop: 2\r\n    2022-03-04 10:59:16.310 8359-8359/com.example.currencyrates D/forloop: 0\r\n    2022-03-04 10:59:46.317 8359-8359/com.example.currencyrates D/forloop: 1\r\n    2022-03-04 11:00:16.320 8359-8359/com.example.currencyrates D/forloop: 2\r\n    2022-03-04 11:00:46.332 8359-8359/com.example.currencyrates D/forloop: 0\r\n    2022-03-04 11:01:16.341 8359-8359/com.example.currencyrates D/forloop: 1  \r\n    .....\r\n    .....\r\n    .....  \r\n    // and so on, so the for loop works as expected too  \r\n  \r\nAs I said, once I remove this `while loop` and call a function with `static url`, everything works perfect, but the thing is I need to infinitely call every 30 seconds with different endpoint. What could be the issue ?\r\n\r\n  \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/V0i2Z.png","title":"Android emulator shows gray screen","body":"<p>I'm trying to make a function that makes api calls to the server each 30 seconds and updates UI each time with fresh data. I made an infinite loop, where I iterate through array with fixed number of endpoints, and inside this loop I call my function. But when I run the app on emulator, the app shows nothing, just a dark-grey background:</p>\n<p><a href=\"https://i.stack.imgur.com/V0i2Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V0i2Z.png\" alt=\"emulator\" /></a></p>\n<p>It also doesn't logs any error, so I have no clue what can be the issue. Below is the code for infinite loop:</p>\n<pre><code>private String [] endpoints = new String[] {&quot;https://server.com/api/update-rates?locale=en&quot;, \n                                            &quot;https://server.com/api/update-rates?locale=fr&quot;, \n                                             &quot;https://server.com/api/update-rates?locale=gr&quot;};\n    Log.d(&quot;forloop&quot;, &quot;test1&quot;);\n    while(true) {\n        Log.d(&quot;forloop&quot;, &quot;test2&quot;);\n        for (int i = 0; i &lt; endpoints.length; i++) {\n            getFreshRates(endpoints[i]);\n            Log.d(&quot;forloop&quot;, String.valueOf(i));\n            try {\n                TimeUnit.SECONDS.sleep(30);\n            } catch (InterruptedException ie) {\n                Thread.currentThread().interrupt();\n            }\n            if(i == 2) {\n                i = -1;\n            }\n        }\n    }  \n</code></pre>\n<p>I guarantee that <code>getFreshRates</code> method is works properly (I've tested with static url) so the issue might be with this loop or some android specific issue.</p>\n<p>The Log.d output are:</p>\n<pre><code>2022-03-04 10:56:15.741 8359-8359/com.example.currencyrates D/forloop: test1\n2022-03-04 10:56:15.741 8359-8359/com.example.currencyrates D/forloop: test2\n2022-03-04 10:56:16.270 8359-8359/com.example.currencyrates D/forloop: 0\n2022-03-04 10:56:46.279 8359-8359/com.example.currencyrates D/forloop: 1\n2022-03-04 10:57:16.281 8359-8359/com.example.currencyrates D/forloop: 2\n2022-03-04 10:57:46.288 8359-8359/com.example.currencyrates D/forloop: 0\n2022-03-04 10:58:16.295 8359-8359/com.example.currencyrates D/forloop: 1\n2022-03-04 10:58:46.304 8359-8359/com.example.currencyrates D/forloop: 2\n2022-03-04 10:59:16.310 8359-8359/com.example.currencyrates D/forloop: 0\n2022-03-04 10:59:46.317 8359-8359/com.example.currencyrates D/forloop: 1\n2022-03-04 11:00:16.320 8359-8359/com.example.currencyrates D/forloop: 2\n2022-03-04 11:00:46.332 8359-8359/com.example.currencyrates D/forloop: 0\n2022-03-04 11:01:16.341 8359-8359/com.example.currencyrates D/forloop: 1  \n.....\n.....\n.....  \n// and so on, so the for loop works as expected too  \n</code></pre>\n<p>As I said, once I remove this <code>while loop</code> and call a function with <code>static url</code>, everything works perfect, but the thing is I need to infinitely call every 30 seconds with different endpoint. What could be the issue ?</p>\n"},{"tags":["java","android","calendarview"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1519419875,"post_id":48956178,"comment_id":84919199,"body_markdown":"With an `if` statement?","body":"With an <code>if</code> statement?"},{"owner":{"account_id":8933747,"reputation":597,"user_id":6665356,"accept_rate":44,"display_name":"matQ"},"score":0,"creation_date":1519420814,"post_id":48956178,"comment_id":84919572,"body_markdown":"Yes, but i think this library has a specific way to enable or disable click listener","body":"Yes, but i think this library has a specific way to enable or disable click listener"},{"owner":{"account_id":4073450,"reputation":1868,"user_id":9130109,"display_name":"EL TEGANI MOHAMED"},"score":0,"creation_date":1519421718,"post_id":48956178,"comment_id":84919940,"body_markdown":"check the selected day if equal the wanted days start the intent you need else msg &quot;selected wrong days&quot;","body":"check the selected day if equal the wanted days start the intent you need else msg &quot;selected wrong days&quot;"}],"answers":[{"tags":[],"owner":{"account_id":24404282,"reputation":236,"user_id":18332645,"display_name":"Istis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646402064,"creation_date":1646402064,"answer_id":71352459,"question_id":48956178,"body_markdown":"CalendarDay has a method `day.getDate().getDayOfWeek()`, you can use that.","title":"Android Material Calendarview setOnDateChangedListener only to specific days","body":"<p>CalendarDay has a method <code>day.getDate().getDayOfWeek()</code>, you can use that.</p>\n"}],"owner":{"account_id":8933747,"reputation":597,"user_id":6665356,"accept_rate":44,"display_name":"matQ"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":720,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646402064,"creation_date":1519419752,"question_id":48956178,"body_markdown":"I am using Material Clanedarview to build a custom calendar, I add decorators to specefic days of the week, for example Saturday and sunday, and it works fine, but I also want to setOndateChangedListener to only this 2 days, so when the user click on other days of the calendar the click did nothing but when the user click on saturday and sunday i want to start another intent.\r\nHow can i set onDateChangedListener to specific days? thanks\r\n\r\n     mcv.addDecorators(new BookingDecorator(myColor,diasFor));\r\n        mcv.setOnDateChangedListener(new OnDateSelectedListener() {\r\n            @Override\r\n            public void onDateSelected(@NonNull MaterialCalendarView widget, @NonNull CalendarDay date, boolean selected) {\r\n                //I WANT TO OPEN INTENT ONLY FOR SPECIFIC DAYS\r\n            }\r\n        });","title":"Android Material Calendarview setOnDateChangedListener only to specific days","body":"<p>I am using Material Clanedarview to build a custom calendar, I add decorators to specefic days of the week, for example Saturday and sunday, and it works fine, but I also want to setOndateChangedListener to only this 2 days, so when the user click on other days of the calendar the click did nothing but when the user click on saturday and sunday i want to start another intent.\nHow can i set onDateChangedListener to specific days? thanks</p>\n\n<pre><code> mcv.addDecorators(new BookingDecorator(myColor,diasFor));\n    mcv.setOnDateChangedListener(new OnDateSelectedListener() {\n        @Override\n        public void onDateSelected(@NonNull MaterialCalendarView widget, @NonNull CalendarDay date, boolean selected) {\n            //I WANT TO OPEN INTENT ONLY FOR SPECIFIC DAYS\n        }\n    });\n</code></pre>\n"},{"tags":["java","logging","liquibase"],"comments":[{"owner":{"account_id":89056,"reputation":8068,"user_id":2684196,"accept_rate":80,"display_name":"Willis Blackburn"},"score":0,"creation_date":1591541745,"post_id":62244070,"comment_id":110089329,"body_markdown":"There are some existing questions about how to control the log level in Liquibase. Did you try any of those solutions?","body":"There are some existing questions about how to control the log level in Liquibase. Did you try any of those solutions?"},{"owner":{"account_id":17553626,"reputation":35,"user_id":12733532,"display_name":"Maksym Ivanov"},"score":0,"creation_date":1591543016,"post_id":62244070,"comment_id":110089824,"body_markdown":"Thanks for the question. I didn&#39;t find an answer to my question on the site","body":"Thanks for the question. I didn&#39;t find an answer to my question on the site"}],"answers":[{"tags":[],"owner":{"account_id":89056,"reputation":8068,"user_id":2684196,"accept_rate":80,"display_name":"Willis Blackburn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646401529,"creation_date":1591544546,"answer_id":62247778,"question_id":62244070,"body_markdown":"\r\nWRONG ANSWER, see UPDATE section below\r\n\r\nI think that you&#39;re trying to configure the Liquibase log level from Java code, as opposed to from Maven or something like that.\r\n\r\nYour code doesn&#39;t work because you&#39;re creating a `DefaultLoggerConfiguration` object and setting a property but not making it available to Liquibase. It&#39;s just a random Java object and will go away as soon as `defaultLoggerConfiguration` goes out of  scope.\r\n\r\nIt looks like the right way to do this is to ask Liquibase to give you a reference to its configuration, then set the log level using that object.\r\n\r\n    LiquibaseConfiguration.getInstance()\r\n        .getConfiguration(DefaultLoggerConfiguration.class)\r\n        .setLogLevel(&quot;off&quot;);\r\n\r\nUPDATE\r\n\r\nOkay looks like that was totally wrong. The Liquibase logger is apparently a red herring. Possibly there was a way to configure it before, but now it just unconditionally delegates to SLF4J, which in your example on GitHub is using Logback as the actual logger.\r\n\r\nBy adding a file `src/main/resources/logback.xml` with the following contents I eliminated all but the info messages from your example.\r\n\r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n        &lt;logger name=&quot;liquibase&quot; level=&quot;info&quot;/&gt;\r\n        &lt;root level=&quot;debug&quot;&gt;\r\n            &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt; \r\n\r\nSee http://logback.qos.ch/ for more information on how to configure Logback. Dropping a `logback.xml` file into the classpath is one way to configure, but you can use other strategies too.","title":"Liquibase log level changing","body":"<p>WRONG ANSWER, see UPDATE section below</p>\n<p>I think that you're trying to configure the Liquibase log level from Java code, as opposed to from Maven or something like that.</p>\n<p>Your code doesn't work because you're creating a <code>DefaultLoggerConfiguration</code> object and setting a property but not making it available to Liquibase. It's just a random Java object and will go away as soon as <code>defaultLoggerConfiguration</code> goes out of  scope.</p>\n<p>It looks like the right way to do this is to ask Liquibase to give you a reference to its configuration, then set the log level using that object.</p>\n<pre><code>LiquibaseConfiguration.getInstance()\n    .getConfiguration(DefaultLoggerConfiguration.class)\n    .setLogLevel(&quot;off&quot;);\n</code></pre>\n<p>UPDATE</p>\n<p>Okay looks like that was totally wrong. The Liquibase logger is apparently a red herring. Possibly there was a way to configure it before, but now it just unconditionally delegates to SLF4J, which in your example on GitHub is using Logback as the actual logger.</p>\n<p>By adding a file <code>src/main/resources/logback.xml</code> with the following contents I eliminated all but the info messages from your example.</p>\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;logger name=&quot;liquibase&quot; level=&quot;info&quot;/&gt;\n    &lt;root level=&quot;debug&quot;&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt; \n</code></pre>\n<p>See <a href=\"http://logback.qos.ch/\" rel=\"nofollow noreferrer\">http://logback.qos.ch/</a> for more information on how to configure Logback. Dropping a <code>logback.xml</code> file into the classpath is one way to configure, but you can use other strategies too.</p>\n"}],"owner":{"account_id":17553626,"reputation":35,"user_id":12733532,"display_name":"Maksym Ivanov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2537,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62247778,"answer_count":1,"score":0,"last_activity_date":1646401529,"creation_date":1591526236,"question_id":62244070,"body_markdown":"I use code from https://www.liquibase.org/blog/3-ways-to-run-liquibase to run updates on DB. It works but produces a lot of logs. I tried to change the log level for Liquibase using \r\n```\r\nDefaultLoggerConfiguration defaultLoggerConfiguration = new DefaultLoggerConfiguration();\r\ndefaultLoggerConfiguration.setLogLevel(&quot;off&quot;);\r\n```\r\n but it doesn&#39;t help.\r\n\r\npom.xml\r\n```\r\n&lt;properties&gt;\r\n        &lt;mockito.version&gt;3.3.3&lt;/mockito.version&gt;\r\n        &lt;junit.version&gt;5.6.2&lt;/junit.version&gt;\r\n        &lt;mysql.connector.version&gt;8.0.20&lt;/mysql.connector.version&gt;\r\n        &lt;liquibase.version&gt;3.9.0&lt;/liquibase.version&gt;\r\n        &lt;snakeyaml.version&gt;1.26&lt;/snakeyaml.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${mockito.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;${mysql.connector.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${liquibase.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.yaml&lt;/groupId&gt;\r\n            &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n            &lt;version&gt;${snakeyaml.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\nMay I reduce logs number without any additional dependencies?\r\n\r\nExample of app https://github.com/Wismut/liquibase_h2_example","title":"Liquibase log level changing","body":"<p>I use code from <a href=\"https://www.liquibase.org/blog/3-ways-to-run-liquibase\" rel=\"nofollow noreferrer\">https://www.liquibase.org/blog/3-ways-to-run-liquibase</a> to run updates on DB. It works but produces a lot of logs. I tried to change the log level for Liquibase using </p>\n\n<pre><code>DefaultLoggerConfiguration defaultLoggerConfiguration = new DefaultLoggerConfiguration();\ndefaultLoggerConfiguration.setLogLevel(\"off\");\n</code></pre>\n\n<p>but it doesn't help.</p>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;properties&gt;\n        &lt;mockito.version&gt;3.3.3&lt;/mockito.version&gt;\n        &lt;junit.version&gt;5.6.2&lt;/junit.version&gt;\n        &lt;mysql.connector.version&gt;8.0.20&lt;/mysql.connector.version&gt;\n        &lt;liquibase.version&gt;3.9.0&lt;/liquibase.version&gt;\n        &lt;snakeyaml.version&gt;1.26&lt;/snakeyaml.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;version&gt;${mockito.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;${mysql.connector.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n            &lt;version&gt;${liquibase.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.yaml&lt;/groupId&gt;\n            &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n            &lt;version&gt;${snakeyaml.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n\n<p>May I reduce logs number without any additional dependencies?</p>\n\n<p>Example of app <a href=\"https://github.com/Wismut/liquibase_h2_example\" rel=\"nofollow noreferrer\">https://github.com/Wismut/liquibase_h2_example</a></p>\n"},{"tags":["java","android","navigation","runtime","android-navigation"],"answers":[{"tags":[],"owner":{"account_id":24404282,"reputation":236,"user_id":18332645,"display_name":"Istis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646401385,"creation_date":1646401385,"answer_id":71352324,"question_id":71352141,"body_markdown":"Did you add a NavHostFragment in your xml file?\r\n\r\n   \r\n\r\n     &lt;fragment\r\n            android:id=&quot;@+id/nav_host_fragment&quot;\r\n            android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:defaultNavHost=&quot;true&quot;\r\n            app:navGraph=&quot;@navigation/nav_graph&quot; /&gt;\r\n\r\n","title":"Runtime error while using bottomnavigation","body":"<p>Did you add a NavHostFragment in your xml file?</p>\n<pre><code> &lt;fragment\n        android:id=&quot;@+id/nav_host_fragment&quot;\n        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:defaultNavHost=&quot;true&quot;\n        app:navGraph=&quot;@navigation/nav_graph&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":16492826,"reputation":11,"user_id":11916126,"display_name":"Subas Adhikari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646401385,"creation_date":1646400521,"question_id":71352141,"body_markdown":"I&#39;m new in android studio. I need to make bottom navigation and different fragemnet working with it. when I run the app the, &#39;app stop responding&#39; message appears. I cannot find the issue.\r\n and i have a runtime error saying this:\r\n```\r\n   \r\n\r\n      E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: np.com.app.journeyjournal, PID: 28863\r\n        java.lang.RuntimeException: Unable to start activity \r\n        ComponentInfo{np.com.app.journeyjournal/np.com.app.journeyjournal.MainActivity}: \r\n        java.lang.IllegalStateException: Activity np.com.app.journeyjournal.MainActivity@33614f5 does \r\n        not have a NavController set on 2131230919\r\n          \r\n\r\n```\r\n\r\n mainactivity.java file is: \r\n\r\n```\r\n\r\n    package np.com.app.journeyjournal;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.navigation.NavController;\r\n    import androidx.navigation.Navigation;\r\n    import androidx.navigation.ui.NavigationUI;\r\n    \r\n    import android.os.Bundle;\r\n    \r\n    import com.google.android.material.bottomnavigation.BottomNavigationView;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n            NavController navController;\r\n            BottomNavigationView bottomNavigationView;\r\n            bottomNavigationView = findViewById(R.id.bottomNavigationView);\r\n            navController = Navigation.findNavController(this,  R.id.fragment);\r\n    \r\n            NavigationUI.setupWithNavController(bottomNavigationView,navController);\r\n    \r\n        }\r\n    }\r\n\r\n```\r\n\r\n","title":"Runtime error while using bottomnavigation","body":"<p>I'm new in android studio. I need to make bottom navigation and different fragemnet working with it. when I run the app the, 'app stop responding' message appears. I cannot find the issue.\nand i have a runtime error saying this:</p>\n<pre><code>   \n\n      E/AndroidRuntime: FATAL EXCEPTION: main\n        Process: np.com.app.journeyjournal, PID: 28863\n        java.lang.RuntimeException: Unable to start activity \n        ComponentInfo{np.com.app.journeyjournal/np.com.app.journeyjournal.MainActivity}: \n        java.lang.IllegalStateException: Activity np.com.app.journeyjournal.MainActivity@33614f5 does \n        not have a NavController set on 2131230919\n          \n\n</code></pre>\n<p>mainactivity.java file is:</p>\n<pre><code>\n    package np.com.app.journeyjournal;\n    import androidx.appcompat.app.AppCompatActivity;\n    import androidx.navigation.NavController;\n    import androidx.navigation.Navigation;\n    import androidx.navigation.ui.NavigationUI;\n    \n    import android.os.Bundle;\n    \n    import com.google.android.material.bottomnavigation.BottomNavigationView;\n    \n    public class MainActivity extends AppCompatActivity {\n    \n    \n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n    \n    \n            NavController navController;\n            BottomNavigationView bottomNavigationView;\n            bottomNavigationView = findViewById(R.id.bottomNavigationView);\n            navController = Navigation.findNavController(this,  R.id.fragment);\n    \n            NavigationUI.setupWithNavController(bottomNavigationView,navController);\n    \n        }\n    }\n\n</code></pre>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver","webdriver-manager"],"answers":[{"tags":[],"owner":{"account_id":9403502,"reputation":46,"user_id":8772927,"display_name":"Fernando Oliveira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630595939,"creation_date":1630595939,"answer_id":69033027,"question_id":69032660,"body_markdown":"Did you try to keep a version of chromedriver already?\r\n\r\nLike this:\r\n\r\n    // version is your stable version\r\n         WebDriverManager.chromedriver().version(version).setup();","title":"chrome binary installed by webdrivermanager is not working","body":"<p>Did you try to keep a version of chromedriver already?</p>\n<p>Like this:</p>\n<pre><code>// version is your stable version\n     WebDriverManager.chromedriver().version(version).setup();\n</code></pre>\n"}],"owner":{"account_id":2869041,"reputation":4363,"user_id":2462759,"accept_rate":52,"display_name":"paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1368,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1646401283,"creation_date":1630594526,"question_id":69032660,"body_markdown":"I see in logs that `webdrivermanager` successfully downloads the chrome binary inside `.m2`. However, it is still getting picked from some other location.\r\n\r\nThe same implementation works locally but not in Azure Pipeline. \r\n\r\n    ---------------- \r\n    TEST STARTED: Verify login\r\n    \r\n    [INFO] Running Verify login\r\n    [main] INFO io.github.bonigarcia.wdm.WebDriverManager - Reading https://chromedriver.storage.googleapis.com/ to seek chromedriver \r\n    [main] INFO io.github.bonigarcia.wdm.Downloader - Downloading https://chromedriver.storage.googleapis.com/92.0.4515.107/chromedriver_win32.zip \r\n    [main] INFO io.github.bonigarcia.wdm.Downloader - Extracting binary from compressed file chromedriver_win32.zip \r\n    [main] INFO io.github.bonigarcia.wdm.WebDriverManager - Exporting webdriver.chrome.driver as C:\\Users\\vstsagent\\.m2\\repository\\webdriver\\chromedriver\\win32\\92.0.4515.107\\chromedriver.exe \r\n    \r\n    Sep 02, 2021 2:38:10 PM org.openqa.selenium.remote.DesiredCapabilities chrome \r\n    INFO: Using `new ChromeOptions()` is preferred to `DesiredCapabilities.chrome()` \r\n    [main] INFO net.serenitybdd.core.webdriver.driverproviders.ProvideNewDriver - Instantiating driver \r\n    [main] INFO net.serenitybdd.core.webdriver.driverproviders.ProvideNewDriver - Driver capabilities: Capabilities {acceptInsecureCerts: false, browserName: chrome, chrome.switches: --incognito, --disable-geol..., goog:chromeOptions: {args: [--incognito, --disable-geolocation, --enable-automation, --test-type], extensions: []}, loggingPrefs: org.openqa.selenium.logging..., platform: ANY, version: } \r\n    \r\n    Starting ChromeDriver 91.0.4472.101 (af52a90bf87030dd1523486a1cd3ae25c5d76c9b-refs/branch-heads/4472@{#1462}) on port 23809 \r\n    Only local connections are allowed. \r\n    Please see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe. \r\n    ChromeDriver was started successfully. \r\n    [main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - \r\n    ---------------- \r\n    - TEST FAILED - \r\n    ---------------- \r\n    \r\n    TEST FAILED WITH ERROR: Verify error icon on missing mandatory fields \r\n    \r\n    --------------------------- \r\n    \r\n    [main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - TEST FAILED AT STEP Given Sample Web page \r\n    \r\n    [main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - Could not instantiate new WebDriver instance of type class org.openqa.selenium.chrome.ChromeDriver (unknown error: cannot find Chrome binary \r\n\r\nFirst para in the logs, you&#39;ll see that chrome 93 is installed in `.m2` folder and last para first line it is still picking chrome 91. I am not getting how. I have already all chrome instances.\r\n\r\nHow can I fix this?","title":"chrome binary installed by webdrivermanager is not working","body":"<p>I see in logs that <code>webdrivermanager</code> successfully downloads the chrome binary inside <code>.m2</code>. However, it is still getting picked from some other location.</p>\n<p>The same implementation works locally but not in Azure Pipeline.</p>\n<pre><code>---------------- \nTEST STARTED: Verify login\n\n[INFO] Running Verify login\n[main] INFO io.github.bonigarcia.wdm.WebDriverManager - Reading https://chromedriver.storage.googleapis.com/ to seek chromedriver \n[main] INFO io.github.bonigarcia.wdm.Downloader - Downloading https://chromedriver.storage.googleapis.com/92.0.4515.107/chromedriver_win32.zip \n[main] INFO io.github.bonigarcia.wdm.Downloader - Extracting binary from compressed file chromedriver_win32.zip \n[main] INFO io.github.bonigarcia.wdm.WebDriverManager - Exporting webdriver.chrome.driver as C:\\Users\\vstsagent\\.m2\\repository\\webdriver\\chromedriver\\win32\\92.0.4515.107\\chromedriver.exe \n\nSep 02, 2021 2:38:10 PM org.openqa.selenium.remote.DesiredCapabilities chrome \nINFO: Using `new ChromeOptions()` is preferred to `DesiredCapabilities.chrome()` \n[main] INFO net.serenitybdd.core.webdriver.driverproviders.ProvideNewDriver - Instantiating driver \n[main] INFO net.serenitybdd.core.webdriver.driverproviders.ProvideNewDriver - Driver capabilities: Capabilities {acceptInsecureCerts: false, browserName: chrome, chrome.switches: --incognito, --disable-geol..., goog:chromeOptions: {args: [--incognito, --disable-geolocation, --enable-automation, --test-type], extensions: []}, loggingPrefs: org.openqa.selenium.logging..., platform: ANY, version: } \n\nStarting ChromeDriver 91.0.4472.101 (af52a90bf87030dd1523486a1cd3ae25c5d76c9b-refs/branch-heads/4472@{#1462}) on port 23809 \nOnly local connections are allowed. \nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe. \nChromeDriver was started successfully. \n[main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - \n---------------- \n- TEST FAILED - \n---------------- \n\nTEST FAILED WITH ERROR: Verify error icon on missing mandatory fields \n\n--------------------------- \n\n[main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - TEST FAILED AT STEP Given Sample Web page \n\n[main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - Could not instantiate new WebDriver instance of type class org.openqa.selenium.chrome.ChromeDriver (unknown error: cannot find Chrome binary \n</code></pre>\n<p>First para in the logs, you'll see that chrome 93 is installed in <code>.m2</code> folder and last para first line it is still picking chrome 91. I am not getting how. I have already all chrome instances.</p>\n<p>How can I fix this?</p>\n"},{"tags":["java","kotlin","arraylist"],"comments":[{"owner":{"account_id":20928711,"reputation":3225,"user_id":15375588,"display_name":"Karsten Gabriel"},"score":0,"creation_date":1646395293,"post_id":71350379,"comment_id":126118117,"body_markdown":"Are you sure your example code is correct? The variable `copy2` has the same type as `master` which is an `ArrayList&lt;Item&gt;`, not an `Item`. So I do not think that it is possible to call `copy2.name`.","body":"Are you sure your example code is correct? The variable <code>copy2</code> has the same type as <code>master</code> which is an <code>ArrayList&lt;Item&gt;</code>, not an <code>Item</code>. So I do not think that it is possible to call <code>copy2.name</code>."},{"owner":{"account_id":403256,"reputation":672,"user_id":770908,"accept_rate":66,"display_name":"KIRAN K J"},"score":1,"creation_date":1646399037,"post_id":71350379,"comment_id":126119328,"body_markdown":"@vincrichaud I already went through these answers. I will agin check and update. Also, if I assign an item from the list to a variable `val item = master.get(0)`. If i changes the item property, it will also affect all three. I need this scenario (single item assignment) too.","body":"@vincrichaud I already went through these answers. I will agin check and update. Also, if I assign an item from the list to a variable <code>val item = master.get(0)</code>. If i changes the item property, it will also affect all three. I need this scenario (single item assignment) too."},{"owner":{"account_id":403256,"reputation":672,"user_id":770908,"accept_rate":66,"display_name":"KIRAN K J"},"score":0,"creation_date":1646399187,"post_id":71350379,"comment_id":126119393,"body_markdown":"@KarstenGabriel Extremely sorry. Updated the question","body":"@KarstenGabriel Extremely sorry. Updated the question"}],"answers":[{"tags":[],"owner":{"account_id":20928711,"reputation":3225,"user_id":15375588,"display_name":"Karsten Gabriel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646401110,"creation_date":1646401110,"answer_id":71352261,"question_id":71350379,"body_markdown":"You can create a copy of your `master` list by copying all contained items:\r\n```\r\nfun List&lt;Item&gt;.copy() = map{ it.copy() }\r\n```\r\nThen, when you write\r\n```\r\nval copy2 = master.copy()\r\n```\r\nYou have a copy of `master` consisting of (shallow) copies of the contained elements in `master`. \r\n\r\n(see [Kotlin documentation on copying data classes](https://kotlinlang.org/docs/data-classes.html#copying))\r\n\r\nNow changing elements in `copy2` does not change the corresponding elements in `master` or `copy1`.","title":"How to prevent edit in copy of arraylist in kotlin","body":"<p>You can create a copy of your <code>master</code> list by copying all contained items:</p>\n<pre><code>fun List&lt;Item&gt;.copy() = map{ it.copy() }\n</code></pre>\n<p>Then, when you write</p>\n<pre><code>val copy2 = master.copy()\n</code></pre>\n<p>You have a copy of <code>master</code> consisting of (shallow) copies of the contained elements in <code>master</code>.</p>\n<p>(see <a href=\"https://kotlinlang.org/docs/data-classes.html#copying\" rel=\"nofollow noreferrer\">Kotlin documentation on copying data classes</a>)</p>\n<p>Now changing elements in <code>copy2</code> does not change the corresponding elements in <code>master</code> or <code>copy1</code>.</p>\n"}],"owner":{"account_id":403256,"reputation":672,"user_id":770908,"accept_rate":66,"display_name":"KIRAN K J"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":325,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1646557412,"answer_count":1,"score":0,"last_activity_date":1646401110,"creation_date":1646391354,"question_id":71350379,"body_markdown":"I have an ArrayList which is assigned to two ArrayList variables. So it assigned the memory location of the primary to the other two. But I need a variable that should not change the parent and another one.\r\n\r\n```kotlin\r\ndata class Item(\r\n    var id: Int,\r\n    var name: String\r\n)\r\n\r\n\r\nval master: Arraylist&lt;Item&gt; = items // from network\r\nval copy1 = master\r\nval copy2 = master\r\n\r\ncopy2[0].name = &quot;new name here&quot;\r\n```\r\n\r\nFrom the above code, we are changing the name of all. But my requirement is to make a copy of the master and change it only in copy2","title":"How to prevent edit in copy of arraylist in kotlin","body":"<p>I have an ArrayList which is assigned to two ArrayList variables. So it assigned the memory location of the primary to the other two. But I need a variable that should not change the parent and another one.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>data class Item(\n    var id: Int,\n    var name: String\n)\n\n\nval master: Arraylist&lt;Item&gt; = items // from network\nval copy1 = master\nval copy2 = master\n\ncopy2[0].name = &quot;new name here&quot;\n</code></pre>\n<p>From the above code, we are changing the name of all. But my requirement is to make a copy of the master and change it only in copy2</p>\n"},{"tags":["java","android","android-studio","bottomnavigationview"],"answers":[{"tags":[],"owner":{"account_id":5784521,"reputation":971,"user_id":4564200,"accept_rate":100,"display_name":"olajide"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523370696,"creation_date":1523368396,"answer_id":49755462,"question_id":49755094,"body_markdown":"Your navigation is returning `false` because you set it to `false`\r\n\r\nKindly check at the end of your navigation and change the return type from `return false;` to `return true;`\r\n\r\n\r\n    private BottomNavigationView.OnNavigationItemSelectedListener mOnNavigationItemSelectedListener\r\n\r\n    = new BottomNavigationView.OnNavigationItemSelectedListener() \r\n\r\n     {\r\n\r\n    @Override\r\n    public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.navigation_to_dos:\r\n                return true;\r\n            case R.id.navigation_categories:\r\n                intent = new Intent(ToDos.this, Categories.class);\r\n                intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);\r\n                startActivity(intent);\r\n                return true;\r\n            case R.id.navigation_account:\r\n                intent = new Intent(ToDos.this, Account.class);\r\n                intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);\r\n                startActivity(intent);\r\n                return true;\r\n        }\r\n        return false; // Here is the problem. Change it from false to true\r\n    }};\r\n\r\nAlso, `BottomNavigationView navigation = (BottomNavigationView) findViewById(R.id.navigation);` ","title":"Android Studio; BottomNavigationView = null","body":"<p>Your navigation is returning <code>false</code> because you set it to <code>false</code></p>\n\n<p>Kindly check at the end of your navigation and change the return type from <code>return false;</code> to <code>return true;</code></p>\n\n<pre><code>private BottomNavigationView.OnNavigationItemSelectedListener mOnNavigationItemSelectedListener\n\n= new BottomNavigationView.OnNavigationItemSelectedListener() \n\n {\n\n@Override\npublic boolean onNavigationItemSelected(@NonNull MenuItem item) {\n    switch (item.getItemId()) {\n        case R.id.navigation_to_dos:\n            return true;\n        case R.id.navigation_categories:\n            intent = new Intent(ToDos.this, Categories.class);\n            intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);\n            startActivity(intent);\n            return true;\n        case R.id.navigation_account:\n            intent = new Intent(ToDos.this, Account.class);\n            intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);\n            startActivity(intent);\n            return true;\n    }\n    return false; // Here is the problem. Change it from false to true\n}};\n</code></pre>\n\n<p>Also, <code>BottomNavigationView navigation = (BottomNavigationView) findViewById(R.id.navigation);</code> </p>\n"},{"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1523371144,"creation_date":1523370452,"answer_id":49756190,"question_id":49755094,"body_markdown":"&gt; Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.support.design.widget.BottomNavigationView.setOnNavigationItemSelectedListener(android.support.design.widget.BottomNavigationView$OnNavigationItemSelectedListener)&#39; on a **null object reference**\r\n\r\nyour `BottomNavigationView` is `null`, thats a fact. this line isn&#39;t fetching your `View`:\r\n\r\n    BottomNavigationView navigation = (BottomNavigationView) findViewById(R.id.navigation);\r\n\r\nare you shure your `BottomNavigationView` belongs to inflated layout? `R.id.navigation` is set properly for `BottomNavigationView`? show some XML and more code from `onCreate` method. maybe inproper order? (e.g. `findViewById` called before `setContentView`)\r\n\r\nedit: ok, `id` is set properly for `View` inside XML, but you posted only small part of it, show also how do you inflate this XML inside `Activity`","title":"Android Studio; BottomNavigationView = null","body":"<blockquote>\n  <p>Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.support.design.widget.BottomNavigationView.setOnNavigationItemSelectedListener(android.support.design.widget.BottomNavigationView$OnNavigationItemSelectedListener)' on a <strong>null object reference</strong></p>\n</blockquote>\n\n<p>your <code>BottomNavigationView</code> is <code>null</code>, thats a fact. this line isn't fetching your <code>View</code>:</p>\n\n<pre><code>BottomNavigationView navigation = (BottomNavigationView) findViewById(R.id.navigation);\n</code></pre>\n\n<p>are you shure your <code>BottomNavigationView</code> belongs to inflated layout? <code>R.id.navigation</code> is set properly for <code>BottomNavigationView</code>? show some XML and more code from <code>onCreate</code> method. maybe inproper order? (e.g. <code>findViewById</code> called before <code>setContentView</code>)</p>\n\n<p>edit: ok, <code>id</code> is set properly for <code>View</code> inside XML, but you posted only small part of it, show also how do you inflate this XML inside <code>Activity</code></p>\n"},{"tags":[],"owner":{"account_id":17090089,"reputation":1,"user_id":12366435,"display_name":"Shahab khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588927603,"creation_date":1588926143,"answer_id":61674990,"question_id":49755094,"body_markdown":"I also faced this problem in my case I solved the problem by replacing right home activity in\r\n \r\n\r\n     @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_seller_home);//here was problem,i was  inflating wrong home activity\r\n       ","title":"Android Studio; BottomNavigationView = null","body":"<p>I also faced this problem in my case I solved the problem by replacing right home activity in</p>\n\n<pre><code> @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_seller_home);//here was problem,i was  inflating wrong home activity\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15175609,"reputation":1,"user_id":10950440,"display_name":"Kalimath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646400938,"creation_date":1646400938,"answer_id":71352223,"question_id":49755094,"body_markdown":"I faced the same issue. I solved it by adding the setContentView method.\r\n\r\n`setContentView(R.layout.activity_manage);`","title":"Android Studio; BottomNavigationView = null","body":"<p>I faced the same issue. I solved it by adding the setContentView method.</p>\n<p><code>setContentView(R.layout.activity_manage);</code></p>\n"}],"owner":{"account_id":13334901,"reputation":13,"user_id":9625066,"display_name":"Lucien Gygli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7318,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49756190,"answer_count":4,"score":1,"last_activity_date":1646400938,"creation_date":1523367370,"question_id":49755094,"body_markdown":"I don&#39;t know why `BottomNavigationView` null. I&#39;m using the Firebase API  and I added some code to add data to JSON file. Now after I did that, one of my Activities just stopped working. It wasn&#39;t even the Activity I was working on. My navigation equals null and I checked the XML files. The names are the same and debugging doesn&#39;t help either, because it shows me that one line of code that sets the `BottomNavigationView` and gives me a NullPointer. \r\n\r\n\r\nThis is the Navigation that is creating this problem:\r\n\r\n    private BottomNavigationView.OnNavigationItemSelectedListener mOnNavigationItemSelectedListener\r\n                                                                                  \r\n        = new BottomNavigationView.OnNavigationItemSelectedListener() \r\n          \r\n      {\r\n\r\n        @Override\r\n        public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n            switch (item.getItemId()) {\r\n                case R.id.navigation_to_dos:\r\n                    return true;\r\n                case R.id.navigation_categories:\r\n                    intent = new Intent(ToDos.this, Categories.class);\r\n                    intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);\r\n                    startActivity(intent);\r\n                    return true;\r\n                case R.id.navigation_account:\r\n                    intent = new Intent(ToDos.this, Account.class);\r\n                    intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);\r\n                    startActivity(intent);\r\n                    return true;\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n\r\nAnd this is the part where I initialize everything concerning the Navigaion in the onCreate() function:\r\n\r\n    BottomNavigationView navigation = (BottomNavigationView) findViewById(R.id.navigation);\r\n            navigation.setOnNavigationItemSelectedListener(mOnNavigationItemSelectedListener);\r\n            navigation.setSelectedItemId(R.id.navigation_to_dos);\r\n\r\nI get this error:\r\n\r\n    E/AndroidRuntime: FATAL EXCEPTION: main\r\n                  Process: lb335.bbbaden.ch.pendenzenverwaltung, PID: 25288\r\n                  java.lang.RuntimeException: Unable to start activity ComponentInfo{lb335.bbbaden.ch.pendenzenverwaltung/lb335.bbbaden.ch.pendenzenverwaltung.ToDos}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.support.design.widget.BottomNavigationView.setOnNavigationItemSelectedListener(android.support.design.widget.BottomNavigationView$OnNavigationItemSelectedListener)&#39; on a null object reference\r\n                      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3184)\r\n                      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3279)\r\n                      at android.app.ActivityThread.-wrap12(Unknown Source:0)\r\n                      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1881)\r\n                      at android.os.Handler.dispatchMessage(Handler.java:108)\r\n                      at android.os.Looper.loop(Looper.java:166)\r\n                      at android.app.ActivityThread.main(ActivityThread.java:7406)\r\n                      at java.lang.reflect.Method.invoke(Native Method)\r\n                      at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245)\r\n                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:926)\r\n                   Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.support.design.widget.BottomNavigationView.setOnNavigationItemSelectedListener(android.support.design.widget.BottomNavigationView$OnNavigationItemSelectedListener)&#39; on a null object reference\r\n                      at lb335.bbbaden.ch.pendenzenverwaltung.ToDos.onCreate(ToDos.java:76)\r\n                      at android.app.Activity.performCreate(Activity.java:7365)\r\n                      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1218)\r\n                      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3137)\r\n                      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3279)&#160;\r\n                      at android.app.ActivityThread.-wrap12(Unknown Source:0)&#160;\r\n                      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1881)&#160;\r\n                      at android.os.Handler.dispatchMessage(Handler.java:108)&#160;\r\n                      at android.os.Looper.loop(Looper.java:166)&#160;\r\n                      at android.app.ActivityThread.main(ActivityThread.java:7406)&#160;\r\n                      at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n                      at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245)&#160;\r\n                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:926)&#160;\r\n\r\nMy Activity XML:\r\n\r\n    &lt;android.support.design.widget.BottomNavigationView\r\n        android:id=&quot;@+id/navigation&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;?android:attr/windowBackground&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n        app:menu=&quot;@menu/navigation&quot; /&gt;\r\n\r\nI&#39;m lost on this one and would really appreciate some help from more experienced Coders.\r\n\r\nEDIT:\r\n\r\nThanks to snachmsm I found out, that I had my order of functions was all messed up. I executed `findViewById()` before I actually set the content. I had to switch that out and now it works.","title":"Android Studio; BottomNavigationView = null","body":"<p>I don't know why <code>BottomNavigationView</code> null. I'm using the Firebase API  and I added some code to add data to JSON file. Now after I did that, one of my Activities just stopped working. It wasn't even the Activity I was working on. My navigation equals null and I checked the XML files. The names are the same and debugging doesn't help either, because it shows me that one line of code that sets the <code>BottomNavigationView</code> and gives me a NullPointer. </p>\n\n<p>This is the Navigation that is creating this problem:</p>\n\n<pre><code>private BottomNavigationView.OnNavigationItemSelectedListener mOnNavigationItemSelectedListener\n\n    = new BottomNavigationView.OnNavigationItemSelectedListener() \n\n  {\n\n    @Override\n    public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n        switch (item.getItemId()) {\n            case R.id.navigation_to_dos:\n                return true;\n            case R.id.navigation_categories:\n                intent = new Intent(ToDos.this, Categories.class);\n                intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);\n                startActivity(intent);\n                return true;\n            case R.id.navigation_account:\n                intent = new Intent(ToDos.this, Account.class);\n                intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);\n                startActivity(intent);\n                return true;\n        }\n        return false;\n    }\n};\n</code></pre>\n\n<p>And this is the part where I initialize everything concerning the Navigaion in the onCreate() function:</p>\n\n<pre><code>BottomNavigationView navigation = (BottomNavigationView) findViewById(R.id.navigation);\n        navigation.setOnNavigationItemSelectedListener(mOnNavigationItemSelectedListener);\n        navigation.setSelectedItemId(R.id.navigation_to_dos);\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n              Process: lb335.bbbaden.ch.pendenzenverwaltung, PID: 25288\n              java.lang.RuntimeException: Unable to start activity ComponentInfo{lb335.bbbaden.ch.pendenzenverwaltung/lb335.bbbaden.ch.pendenzenverwaltung.ToDos}: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.support.design.widget.BottomNavigationView.setOnNavigationItemSelectedListener(android.support.design.widget.BottomNavigationView$OnNavigationItemSelectedListener)' on a null object reference\n                  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3184)\n                  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3279)\n                  at android.app.ActivityThread.-wrap12(Unknown Source:0)\n                  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1881)\n                  at android.os.Handler.dispatchMessage(Handler.java:108)\n                  at android.os.Looper.loop(Looper.java:166)\n                  at android.app.ActivityThread.main(ActivityThread.java:7406)\n                  at java.lang.reflect.Method.invoke(Native Method)\n                  at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245)\n                  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:926)\n               Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.support.design.widget.BottomNavigationView.setOnNavigationItemSelectedListener(android.support.design.widget.BottomNavigationView$OnNavigationItemSelectedListener)' on a null object reference\n                  at lb335.bbbaden.ch.pendenzenverwaltung.ToDos.onCreate(ToDos.java:76)\n                  at android.app.Activity.performCreate(Activity.java:7365)\n                  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1218)\n                  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3137)\n                  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3279)\n                  at android.app.ActivityThread.-wrap12(Unknown Source:0)\n                  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1881)\n                  at android.os.Handler.dispatchMessage(Handler.java:108)\n                  at android.os.Looper.loop(Looper.java:166)\n                  at android.app.ActivityThread.main(ActivityThread.java:7406)\n                  at java.lang.reflect.Method.invoke(Native Method)\n                  at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245)\n                  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:926)\n</code></pre>\n\n<p>My Activity XML:</p>\n\n<pre><code>&lt;android.support.design.widget.BottomNavigationView\n    android:id=\"@+id/navigation\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"?android:attr/windowBackground\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintLeft_toLeftOf=\"parent\"\n    app:layout_constraintRight_toRightOf=\"parent\"\n    app:menu=\"@menu/navigation\" /&gt;\n</code></pre>\n\n<p>I'm lost on this one and would really appreciate some help from more experienced Coders.</p>\n\n<p>EDIT:</p>\n\n<p>Thanks to snachmsm I found out, that I had my order of functions was all messed up. I executed <code>findViewById()</code> before I actually set the content. I had to switch that out and now it works.</p>\n"},{"tags":["java","string","performance","comparison","long-integer"],"comments":[{"owner":{"account_id":129540,"reputation":210847,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":0,"creation_date":1450572673,"post_id":34376955,"comment_id":56495498,"body_markdown":"When it comes to questions about performance, the only real answer is to test it.","body":"When it comes to questions about performance, the only real answer is to test it."},{"owner":{"account_id":255665,"reputation":232816,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1450572750,"post_id":34376955,"comment_id":56495510,"body_markdown":"And if you&#39;re going to test it, be sure to use a good microbenchmarking tool (like, for example [JMH](http://java-performance.info/jmh/)--although there are lots of other good tools out there as well). Note also that these tests are not equivalent. Leading zeroes in the string will yield different results: 1 vs &quot;01&quot;, for example.","body":"And if you&#39;re going to test it, be sure to use a good microbenchmarking tool (like, for example <a href=\"http://java-performance.info/jmh/\" rel=\"nofollow noreferrer\">JMH</a>--although there are lots of other good tools out there as well). Note also that these tests are not equivalent. Leading zeroes in the string will yield different results: 1 vs &quot;01&quot;, for example."},{"owner":{"account_id":2144041,"reputation":1063,"user_id":1902082,"accept_rate":40,"display_name":"scooter me fecit"},"score":0,"creation_date":1450574186,"post_id":34376955,"comment_id":56495726,"body_markdown":"The difference between into and long is almost negligible. You might see a difference on 32-bit platfirms, but, then again, given the overhead of the JVM and JIT code, in general, not worth getting all spun up about.","body":"The difference between into and long is almost negligible. You might see a difference on 32-bit platfirms, but, then again, given the overhead of the JVM and JIT code, in general, not worth getting all spun up about."},{"owner":{"account_id":2144041,"reputation":1063,"user_id":1902082,"accept_rate":40,"display_name":"scooter me fecit"},"score":0,"creation_date":1450574333,"post_id":34376955,"comment_id":56495746,"body_markdown":"String is a sequence of bytes vs a single 32-bit or 64-bit quantity. int and long comparisons should always compare more efficiently than comparing a sequence of bytes or words.","body":"String is a sequence of bytes vs a single 32-bit or 64-bit quantity. int and long comparisons should always compare more efficiently than comparing a sequence of bytes or words."},{"owner":{"account_id":3368068,"reputation":3372,"user_id":2828087,"display_name":"Rahul Raina"},"score":0,"creation_date":1522424161,"post_id":34376955,"comment_id":86162016,"body_markdown":"numerical or boolean data-types are always lot more faster than other user defined data types (including String). However, char data type is also very faster, because it stores int value and returns equivalent ASCII character of that number.","body":"numerical or boolean data-types are always lot more faster than other user defined data types (including String). However, char data type is also very faster, because it stores int value and returns equivalent ASCII character of that number."}],"answers":[{"tags":[],"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1450575565,"creation_date":1450573811,"answer_id":34377063,"question_id":34376955,"body_markdown":"The long is going to be faster -- and on 64-bit platforms, it&#39;ll be about as fast as an int. But unless this is in a very tight loop, it&#39;s probably not going to make any significant difference for your app overall. The first rule of micro-optimizations is: don&#39;t.\r\n\r\nI wrote up a quick JMH benchmark to test int, long, and String comparisons, and here are the results on my laptop:\r\n\r\n    EqualityComparisons.cInt     avgt  100  0.004 &#177;  0.001  us/op\r\n    EqualityComparisons.cLong    avgt  100  0.006 &#177;  0.001  us/op\r\n    EqualityComparisons.cString  avgt  100  0.011 &#177;  0.001  us/op\r\n\r\nThe relevant bit of the benchmark was:\r\n\r\n    @Setup\r\n    public void setup() {\r\n      one = (int) System.nanoTime();\r\n      two = QuickRand.next(one);\r\n      oneS = String.format(&quot;%11d&quot;, one);\r\n      twoS = String.format(&quot;%11d&quot;, two);\r\n      oneL = one;\r\n      twoL = two;\r\n    }\r\n\r\n    @Benchmark\r\n    public boolean cInt() { return one == two; }\r\n\r\n    @Benchmark\r\n    public boolean cLong() { return oneL == twoL; }\r\n\r\n    @Benchmark\r\n    public boolean cString() { return oneS.equals(twoS); }\r\n\r\nA few things to note:\r\n\r\n- long and int are both about as fast -- within the margin of error\r\n- Strings are about 2.75x slower\r\n- even those slow Strings take about 0.011 microseconds per comparison, which means you can do about 100 million of them a second. In other words, it doesn&#39;t really matter.","title":"String vs long performance in Java","body":"<p>The long is going to be faster -- and on 64-bit platforms, it'll be about as fast as an int. But unless this is in a very tight loop, it's probably not going to make any significant difference for your app overall. The first rule of micro-optimizations is: don't.</p>\n\n<p>I wrote up a quick JMH benchmark to test int, long, and String comparisons, and here are the results on my laptop:</p>\n\n<pre><code>EqualityComparisons.cInt     avgt  100  0.004   0.001  us/op\nEqualityComparisons.cLong    avgt  100  0.006   0.001  us/op\nEqualityComparisons.cString  avgt  100  0.011   0.001  us/op\n</code></pre>\n\n<p>The relevant bit of the benchmark was:</p>\n\n<pre><code>@Setup\npublic void setup() {\n  one = (int) System.nanoTime();\n  two = QuickRand.next(one);\n  oneS = String.format(\"%11d\", one);\n  twoS = String.format(\"%11d\", two);\n  oneL = one;\n  twoL = two;\n}\n\n@Benchmark\npublic boolean cInt() { return one == two; }\n\n@Benchmark\npublic boolean cLong() { return oneL == twoL; }\n\n@Benchmark\npublic boolean cString() { return oneS.equals(twoS); }\n</code></pre>\n\n<p>A few things to note:</p>\n\n<ul>\n<li>long and int are both about as fast -- within the margin of error</li>\n<li>Strings are about 2.75x slower</li>\n<li>even those slow Strings take about 0.011 microseconds per comparison, which means you can do about 100 million of them a second. In other words, it doesn't really matter.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1646400693,"creation_date":1450574323,"answer_id":34377099,"question_id":34376955,"body_markdown":"&gt; As I read in another questions, int has a much better performance than a long ...\r\n\r\nWell what you have read is probably wrong.  Or more likely, what you have *understood* from what you have read is wrong.\r\n\r\nIt is true that on some machines an arithmetic operations on a `long` *may* take longer than an analogous `int` operation.  But on a modern machine, there is likely to be no difference (for the arithmetic itself), and even when there is a difference it will be just 1 or 2 clock cycles; i.e. nano-seconds.\r\n\r\nSo &quot;a lot better&quot; is an exaggeration.\r\n\r\n&gt; ...  and a little better performance than a string.\r\n\r\nThat is wrong too.  In fact, operations on `int` values is going to be a LOT faster than operations on `String` object.  For instance, consider\r\n\r\n    String x = &quot;111222333444&quot;;\r\n    String y = &quot;555666777888&quot;;\r\n    if (x.equals(y)) { /*code*/ }\r\n\r\nThe `equals` method will do the following:\r\n\r\n  1. Test if `x == y` and return `true` if it is.\r\n  2. Test if `y` is a String, and return `false` if it isn&#39;t.\r\n  3. Test that the lengths of the 2 strings are the same and return `false` if they aren&#39;t.\r\n  4. Loop over the characters in the string, comparing the characters at the same position, and returning `false` if they aren&#39;t equal.\r\n  5. Return `true` if the loop finishes without finding non-equal characters.\r\n\r\nPlus the overhead of a method call (that is too large to inline).\r\n\r\nWe are talking about (I estimate) a minimum of 20 to 30 machine instructions, and many more if the two strings are equal, or equal at the start.\r\n\r\nBy contrast, `x == y` using `int` or `long` is just one instruction&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\n-------------------------------\r\n\r\nHowever, there is a bigger point here.\r\n\r\nThe chances are that you are actually wasting your time here.  Unless you are doing these operations for *millions* of numbers, the chances are that the difference in performance is not going to be noticeable.\r\n\r\nMy advice is:\r\n\r\n  - Don&#39;t optimize unless you have to.\r\n  - Don&#39;t even *think* about this kind of thing unless you have to.\r\n  - If you do have to (i.e. you have real, hard performance numbers to say that your code is too slow), then do it scientifically.  Write some benchmarks involving running your &gt;&gt;real&lt;&lt; code on &gt;&gt;real&lt;&lt; data, and use a profile to figure out where the code is actually spending most of its time.  Then optimize only those parts of the code.\r\n\r\n------------------\r\n\r\n&lt;sup&gt;1 - I&#39;m no expert on instruction level performance, but [this document][1] seems to be saying that an Intel `CMP` instruction takes 1, 2 or 3 clock cycles.&lt;/sup&gt;\r\n\r\n\r\n  [1]: http://www.agner.org/optimize/instruction_tables.pdf","title":"String vs long performance in Java","body":"<blockquote>\n<p>As I read in another questions, int has a much better performance than a long ...</p>\n</blockquote>\n<p>Well what you have read is probably wrong.  Or more likely, what you have <em>understood</em> from what you have read is wrong.</p>\n<p>It is true that on some machines an arithmetic operations on a <code>long</code> <em>may</em> take longer than an analogous <code>int</code> operation.  But on a modern machine, there is likely to be no difference (for the arithmetic itself), and even when there is a difference it will be just 1 or 2 clock cycles; i.e. nano-seconds.</p>\n<p>So &quot;a lot better&quot; is an exaggeration.</p>\n<blockquote>\n<p>...  and a little better performance than a string.</p>\n</blockquote>\n<p>That is wrong too.  In fact, operations on <code>int</code> values is going to be a LOT faster than operations on <code>String</code> object.  For instance, consider</p>\n<pre><code>String x = &quot;111222333444&quot;;\nString y = &quot;555666777888&quot;;\nif (x.equals(y)) { /*code*/ }\n</code></pre>\n<p>The <code>equals</code> method will do the following:</p>\n<ol>\n<li>Test if <code>x == y</code> and return <code>true</code> if it is.</li>\n<li>Test if <code>y</code> is a String, and return <code>false</code> if it isn't.</li>\n<li>Test that the lengths of the 2 strings are the same and return <code>false</code> if they aren't.</li>\n<li>Loop over the characters in the string, comparing the characters at the same position, and returning <code>false</code> if they aren't equal.</li>\n<li>Return <code>true</code> if the loop finishes without finding non-equal characters.</li>\n</ol>\n<p>Plus the overhead of a method call (that is too large to inline).</p>\n<p>We are talking about (I estimate) a minimum of 20 to 30 machine instructions, and many more if the two strings are equal, or equal at the start.</p>\n<p>By contrast, <code>x == y</code> using <code>int</code> or <code>long</code> is just one instruction<sup>1</sup>.</p>\n<hr />\n<p>However, there is a bigger point here.</p>\n<p>The chances are that you are actually wasting your time here.  Unless you are doing these operations for <em>millions</em> of numbers, the chances are that the difference in performance is not going to be noticeable.</p>\n<p>My advice is:</p>\n<ul>\n<li>Don't optimize unless you have to.</li>\n<li>Don't even <em>think</em> about this kind of thing unless you have to.</li>\n<li>If you do have to (i.e. you have real, hard performance numbers to say that your code is too slow), then do it scientifically.  Write some benchmarks involving running your &gt;&gt;real&lt;&lt; code on &gt;&gt;real&lt;&lt; data, and use a profile to figure out where the code is actually spending most of its time.  Then optimize only those parts of the code.</li>\n</ul>\n<hr />\n<p><sup>1 - I'm no expert on instruction level performance, but <a href=\"http://www.agner.org/optimize/instruction_tables.pdf\" rel=\"nofollow noreferrer\">this document</a> seems to be saying that an Intel <code>CMP</code> instruction takes 1, 2 or 3 clock cycles.</sup></p>\n"}],"owner":{"account_id":5664254,"reputation":3070,"user_id":4480868,"accept_rate":100,"display_name":"Gerard Reches"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11265,"favorite_count":0,"down_vote_count":3,"up_vote_count":7,"accepted_answer_id":34377099,"answer_count":2,"score":4,"last_activity_date":1646400693,"creation_date":1450572577,"question_id":34376955,"body_markdown":"As I read in another questions, int has a much better performance than a long, and a little better performance than a string.\r\n\r\nLet&#39;s say that I have a number greater than an int and I want to use it for comparisons with similar numbers: What type of variable has better performance for such a case? long or string?\r\n\r\nFor example to compare 111.222.333.444 with 555.666.777.888:\r\n\r\n    long x = 111222333444;\r\n    long y = 555666777888;\r\n    if(x == y){ /*code*/ }\r\nVS\r\n\r\n    string x = &quot;111222333444&quot;;\r\n    string y = &quot;555666777888&quot;;\r\n    if(x.equals(y)){ /*code*/ }\r\nWhich case has the best performance? The difference is significant?\r\n\r\n","title":"String vs long performance in Java","body":"<p>As I read in another questions, int has a much better performance than a long, and a little better performance than a string.</p>\n\n<p>Let's say that I have a number greater than an int and I want to use it for comparisons with similar numbers: What type of variable has better performance for such a case? long or string?</p>\n\n<p>For example to compare 111.222.333.444 with 555.666.777.888:</p>\n\n<pre><code>long x = 111222333444;\nlong y = 555666777888;\nif(x == y){ /*code*/ }\n</code></pre>\n\n<p>VS</p>\n\n<pre><code>string x = \"111222333444\";\nstring y = \"555666777888\";\nif(x.equals(y)){ /*code*/ }\n</code></pre>\n\n<p>Which case has the best performance? The difference is significant?</p>\n"},{"tags":["java","json","spring-boot","spring-resttemplate","spring-json"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":2,"creation_date":1646398716,"post_id":71351724,"comment_id":126119204,"body_markdown":"Dont read response string. Read it as POJO, then you can transform one pojo to your required one. No direct json manipulation whatsoever.","body":"Dont read response string. Read it as POJO, then you can transform one pojo to your required one. No direct json manipulation whatsoever."}],"answers":[{"tags":[],"owner":{"account_id":19183815,"reputation":50,"user_id":14015008,"display_name":"GeoMldr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646400428,"creation_date":1646399846,"answer_id":71352027,"question_id":71351724,"body_markdown":"Give it a try to change your class to something like this: \r\n\r\n       public class CoingeckoPriceDTO {\r\n    \r\n            private String coin;\r\n    \r\n            @JsonAlias({&quot;eur&quot;, &quot;dol&quot;, &quot;sek&quot;, &quot;etc&quot;})\r\n            private BigDecimal price;\r\n    \r\n            public String getCoin() {\r\n                return coin;\r\n            }\r\n    \r\n            public void setCoin(String coin) {\r\n                this.coin = coin;\r\n            }\r\n    \r\n            public BigDecimal getPrice() {\r\n                return price;\r\n            }\r\n    \r\n            public void setPrice(BigDecimal price) {\r\n                this.price = price;\r\n            }\r\n        }\r\n\r\nAdd to the @JsonAlias any currencies you intend to include. \r\n\r\nAnd proceed to doing something like this: \r\n\r\n    public CoingeckoPriceDTO getCoinPrice(String coinName, String targetCurrency) throws JsonProcessingException {\r\n        String completeUrl = coinPriceApiUrl.replace(&quot;{coinName}&quot;, coinName).replace(&quot;{targetCurrency}&quot;, targetCurrency);\r\n        String responseStr = this.restTemplate.getForObject(completeUrl, String.class);\r\n        JSONObject jsonObject = new JSONObject(responseStr);\r\n        responseStr = jsonObject.getString(&quot;ethereum&quot;);\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        CoingeckoPriceDTO result = mapper.readValue(responseStr, CoingeckoPriceDTO.class);\r\n\r\n        result.setCoint(targetCurrency);\r\n\r\n        return result;\r\n    }\r\n\r\nI haven&#39;t run the code to see if it actually works, but you may make your adjustments if needed.","title":"How can I manipulate this JSON response obtained by RestTemplate to set a DTO object?","body":"<p>Give it a try to change your class to something like this:</p>\n<pre><code>   public class CoingeckoPriceDTO {\n\n        private String coin;\n\n        @JsonAlias({&quot;eur&quot;, &quot;dol&quot;, &quot;sek&quot;, &quot;etc&quot;})\n        private BigDecimal price;\n\n        public String getCoin() {\n            return coin;\n        }\n\n        public void setCoin(String coin) {\n            this.coin = coin;\n        }\n\n        public BigDecimal getPrice() {\n            return price;\n        }\n\n        public void setPrice(BigDecimal price) {\n            this.price = price;\n        }\n    }\n</code></pre>\n<p>Add to the @JsonAlias any currencies you intend to include.</p>\n<p>And proceed to doing something like this:</p>\n<pre><code>public CoingeckoPriceDTO getCoinPrice(String coinName, String targetCurrency) throws JsonProcessingException {\n    String completeUrl = coinPriceApiUrl.replace(&quot;{coinName}&quot;, coinName).replace(&quot;{targetCurrency}&quot;, targetCurrency);\n    String responseStr = this.restTemplate.getForObject(completeUrl, String.class);\n    JSONObject jsonObject = new JSONObject(responseStr);\n    responseStr = jsonObject.getString(&quot;ethereum&quot;);\n\n    ObjectMapper mapper = new ObjectMapper();\n    CoingeckoPriceDTO result = mapper.readValue(responseStr, CoingeckoPriceDTO.class);\n\n    result.setCoint(targetCurrency);\n\n    return result;\n}\n</code></pre>\n<p>I haven't run the code to see if it actually works, but you may make your adjustments if needed.</p>\n"}],"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646400428,"creation_date":1646398406,"question_id":71351724,"body_markdown":"I am working on a Spring Boot application and I have the following problem. I have to set values of a simple DTO object from the JSON output retrieved from a REST call.\r\n\r\nBasically I am calling this **GET** API: https://api.coingecko.com/api/v3/simple/price?ids=ethereum&amp;vs_currencies=eur\r\n\r\nAs you can see it return a JSON response like this:\r\n\r\n    {\r\n        &quot;ethereum&quot;: {\r\n            &quot;eur&quot;: 2509.13\r\n        }\r\n    }\r\n\r\nSo I have this **CoingeckoPriceDTO** class:\r\n\r\n@Getter\r\n\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class CoingeckoPriceDTO {\r\n    \t\r\n    \tString coin;\r\n    \tBigDecimal price;\r\n    \t\r\n    }\r\n\r\nAnd then I have this service method:\r\n\r\n\t@Service\r\n\t@Log\r\n\tpublic class CoingeckoInfoServiceImpl implements CoingeckoInfoService {\r\n\t\t\r\n\t\t@Autowired\r\n\t\tprivate RestTemplate restTemplate;\r\n\t\t\r\n\t\tString coinPriceApiUrl = &quot;https://api.coingecko.com/api/v3/simple/price?ids={coinName}&amp;vs_currencies={targetCurrency}&quot;;\r\n\t\t\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic CoingeckoPriceDTO getCoinPrice(String coinName, String targetCurrency) {\r\n\t\t\t\r\n\t\t\tCoingeckoPriceDTO result = new CoingeckoPriceDTO();\r\n\t\t\t\r\n\t\t\tString completeUrl = this.coinPriceApiUrl.replace(&quot;{coinName}&quot;, coinName).replace(&quot;{targetCurrency}&quot;, targetCurrency);\r\n\t\t\t\r\n\t\t\tlog.info(&quot;completeUrl: &quot; + completeUrl);\r\n\t\t\t\r\n\t\t\tString responseStr = this.restTemplate.getForObject(completeUrl, String.class);\r\n\t\t\t\r\n\t\t\tlog.info(&quot;responseStr: &quot; + responseStr);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nIt simply perform the call via **REST** template then it print it as a string, and infact it print this string containing the expected JSON response as string:\r\n\r\n    responseStr: {&quot;ethereum&quot;:{&quot;eur&quot;:2499.04}}\r\n\r\nNow my problem is to put these values into the previous **CoingeckoPriceDTO** fields. I think that I need to do some JSON manipulation to do it:\r\n\r\nIn particular I have to set my DTO **String coin** field with the **ethereum** string retrieved by the returned JSON (note that this is not the field value but it is the field name. I have no idea how to keep it and put it into my DTO object field). Then I have to set my DTO **BigDecimal price** field with the **eur** value in the JSON.\r\n\r\nHow can I implement a behavior like this?\r\n","title":"How can I manipulate this JSON response obtained by RestTemplate to set a DTO object?","body":"<p>I am working on a Spring Boot application and I have the following problem. I have to set values of a simple DTO object from the JSON output retrieved from a REST call.</p>\n<p>Basically I am calling this <strong>GET</strong> API: <a href=\"https://api.coingecko.com/api/v3/simple/price?ids=ethereum&amp;vs_currencies=eur\" rel=\"nofollow noreferrer\">https://api.coingecko.com/api/v3/simple/price?ids=ethereum&amp;vs_currencies=eur</a></p>\n<p>As you can see it return a JSON response like this:</p>\n<pre><code>{\n    &quot;ethereum&quot;: {\n        &quot;eur&quot;: 2509.13\n    }\n}\n</code></pre>\n<p>So I have this <strong>CoingeckoPriceDTO</strong> class:</p>\n<p>@Getter</p>\n<pre><code>@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class CoingeckoPriceDTO {\n    \n    String coin;\n    BigDecimal price;\n    \n}\n</code></pre>\n<p>And then I have this service method:</p>\n<pre><code>@Service\n@Log\npublic class CoingeckoInfoServiceImpl implements CoingeckoInfoService {\n    \n    @Autowired\n    private RestTemplate restTemplate;\n    \n    String coinPriceApiUrl = &quot;https://api.coingecko.com/api/v3/simple/price?ids={coinName}&amp;vs_currencies={targetCurrency}&quot;;\n    \n    \n    @Override\n    public CoingeckoPriceDTO getCoinPrice(String coinName, String targetCurrency) {\n        \n        CoingeckoPriceDTO result = new CoingeckoPriceDTO();\n        \n        String completeUrl = this.coinPriceApiUrl.replace(&quot;{coinName}&quot;, coinName).replace(&quot;{targetCurrency}&quot;, targetCurrency);\n        \n        log.info(&quot;completeUrl: &quot; + completeUrl);\n        \n        String responseStr = this.restTemplate.getForObject(completeUrl, String.class);\n        \n        log.info(&quot;responseStr: &quot; + responseStr);\n        \n        \n        return result;\n    }\n    \n}\n</code></pre>\n<p>It simply perform the call via <strong>REST</strong> template then it print it as a string, and infact it print this string containing the expected JSON response as string:</p>\n<pre><code>responseStr: {&quot;ethereum&quot;:{&quot;eur&quot;:2499.04}}\n</code></pre>\n<p>Now my problem is to put these values into the previous <strong>CoingeckoPriceDTO</strong> fields. I think that I need to do some JSON manipulation to do it:</p>\n<p>In particular I have to set my DTO <strong>String coin</strong> field with the <strong>ethereum</strong> string retrieved by the returned JSON (note that this is not the field value but it is the field name. I have no idea how to keep it and put it into my DTO object field). Then I have to set my DTO <strong>BigDecimal price</strong> field with the <strong>eur</strong> value in the JSON.</p>\n<p>How can I implement a behavior like this?</p>\n"},{"tags":["java","selenium","microsoft-edge-chromium"],"answers":[{"tags":[],"owner":{"account_id":24451744,"reputation":1,"user_id":18373875,"display_name":"Theodorus Eric Setiadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646400303,"creation_date":1646400303,"answer_id":71352110,"question_id":66653135,"body_markdown":"The same error happened to me when I had the driver in a shared folder (not in C drive). I moved the driver to C drive and it solved the problem.\r\nIt took too much time to run/execute the driver if it is located in a shared drive, so it caused time out error.  ","title":"WebDriverException: Timed out waiting for driver server to start error with Selenium Edge Chromium through Java","body":"<p>The same error happened to me when I had the driver in a shared folder (not in C drive). I moved the driver to C drive and it solved the problem.\nIt took too much time to run/execute the driver if it is located in a shared drive, so it caused time out error.</p>\n"}],"owner":{"account_id":18805380,"reputation":21,"user_id":13714848,"display_name":"athidhi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646400303,"creation_date":1615889727,"question_id":66653135,"body_markdown":"I am getting the below error while trying to run selenium using java in Edge Chromium browser\r\n\r\norg.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\r\nBuild info: version: &#39;4.0.0-alpha-5&#39;, revision: &#39;b3a0d621cc&#39;\r\nSystem info:  os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_271&#39;\r\nDriver info: driver.version: EdgeDriver\r\n\r\nCode which I am trying\r\n\r\n        String edgeDriverPath = propertiesOperations.getPropertyValues(&quot;edge_driver_path&quot;);\r\n        String path = System.getProperty(&quot;user.dir&quot;);\r\n        System.setProperty(&quot;webdriver.edge.driver&quot;, path + edgeDriverPath);\r\n        EdgeOptions options = new EdgeOptions();\r\n        options.addArguments(&quot;headless&quot;);\r\n        options.addArguments(&quot;disable-gpu&quot;);\r\n        driver = new EdgeDriver(options);","title":"WebDriverException: Timed out waiting for driver server to start error with Selenium Edge Chromium through Java","body":"<p>I am getting the below error while trying to run selenium using java in Edge Chromium browser</p>\n<p>org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.\nBuild info: version: '4.0.0-alpha-5', revision: 'b3a0d621cc'\nSystem info:  os.version: '10.0', java.version: '1.8.0_271'\nDriver info: driver.version: EdgeDriver</p>\n<p>Code which I am trying</p>\n<pre><code>    String edgeDriverPath = propertiesOperations.getPropertyValues(&quot;edge_driver_path&quot;);\n    String path = System.getProperty(&quot;user.dir&quot;);\n    System.setProperty(&quot;webdriver.edge.driver&quot;, path + edgeDriverPath);\n    EdgeOptions options = new EdgeOptions();\n    options.addArguments(&quot;headless&quot;);\n    options.addArguments(&quot;disable-gpu&quot;);\n    driver = new EdgeDriver(options);\n</code></pre>\n"},{"tags":["java","jakarta-ee","apache-tomee"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1646394535,"post_id":71350822,"comment_id":126117846,"body_markdown":"Does the class `Country` use a `Vector`? Maybe show its definition, too ...","body":"Does the class <code>Country</code> use a <code>Vector</code>? Maybe show its definition, too ..."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1646394968,"post_id":71350822,"comment_id":126118004,"body_markdown":"XML needs a single root element. By specifying that the return type is `List&lt;Country&gt;` you would get a root element per list element. Create a wrapper class that contains a `List&lt;Country&gt; countries`, then return that. You can do the wrapping in your `CountryResource`.","body":"XML needs a single root element. By specifying that the return type is <code>List&lt;Country&gt;</code> you would get a root element per list element. Create a wrapper class that contains a <code>List&lt;Country&gt; countries</code>, then return that. You can do the wrapping in your <code>CountryResource</code>."},{"owner":{"account_id":1934567,"reputation":262,"user_id":1916013,"display_name":"Hendr&#233;"},"score":0,"creation_date":1646400169,"post_id":71350822,"comment_id":126119769,"body_markdown":"Thanks! That resolved the issue.","body":"Thanks! That resolved the issue."}],"answers":[{"tags":[],"owner":{"account_id":1934567,"reputation":262,"user_id":1916013,"display_name":"Hendr&#233;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646400133,"creation_date":1646400133,"answer_id":71352079,"question_id":71350822,"body_markdown":"Country needs to be annotated with an XmlRootElement annotation.","title":"SEVERE: No message body writer has been found for class java.util.Vector, ContentType: application/xml","body":"<p>Country needs to be annotated with an XmlRootElement annotation.</p>\n"}],"owner":{"account_id":1934567,"reputation":262,"user_id":1916013,"display_name":"Hendr&#233;"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1424,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71352079,"answer_count":1,"score":0,"last_activity_date":1646400133,"creation_date":1646393587,"question_id":71350822,"body_markdown":"I have a minimal JAX-RS application.  I am trying to produce an XML response, but instead I get the exception below. The resource should return a List of Country objects, but the exception refers to a Vector. I am running TomEE Web Profile 9.0.0-M7 and Jakarta Web Profile 9.1.\r\n\r\n**Exception**\r\n\r\n    Mar 04, 2022 12:33:42 PM org.apache.cxf.jaxrs.utils.JAXRSUtils logMessageHandlerProblem\r\n    SEVERE: No message body writer has been found for class java.util.Vector, ContentType: application/xml\r\n\r\n**Application**\r\n\r\n    import jakarta.ws.rs.ApplicationPath;\r\n    import jakarta.ws.rs.core.Application;\r\n    \r\n    @ApplicationPath(&quot;/api&quot;)\r\n    public class RestApplication extends Application {\r\n    }\r\n\r\n**Country Resource**\r\n    \r\n    @Path(&quot;/country&quot;)\r\n    public class CountryResource {\r\n    \r\n    \t@GET\r\n    \t@Produces(MediaType.APPLICATION_XML)\r\n    \tpublic List&lt;Country&gt; getCountries() {\r\n    \t\treturn Database.get().findCountries();\r\n    \t}\r\n    }\r\n\r\n**Country query**\r\n\r\n    public List&lt;Country&gt; findCountries() {\r\n    \treturn em.createQuery(&quot;SELECT c FROM Country c ORDER BY c.countryName&quot;, Country.class).getResultList();\r\n    }\r\n\r\n\r\n","title":"SEVERE: No message body writer has been found for class java.util.Vector, ContentType: application/xml","body":"<p>I have a minimal JAX-RS application.  I am trying to produce an XML response, but instead I get the exception below. The resource should return a List of Country objects, but the exception refers to a Vector. I am running TomEE Web Profile 9.0.0-M7 and Jakarta Web Profile 9.1.</p>\n<p><strong>Exception</strong></p>\n<pre><code>Mar 04, 2022 12:33:42 PM org.apache.cxf.jaxrs.utils.JAXRSUtils logMessageHandlerProblem\nSEVERE: No message body writer has been found for class java.util.Vector, ContentType: application/xml\n</code></pre>\n<p><strong>Application</strong></p>\n<pre><code>import jakarta.ws.rs.ApplicationPath;\nimport jakarta.ws.rs.core.Application;\n\n@ApplicationPath(&quot;/api&quot;)\npublic class RestApplication extends Application {\n}\n</code></pre>\n<p><strong>Country Resource</strong></p>\n<pre><code>@Path(&quot;/country&quot;)\npublic class CountryResource {\n\n    @GET\n    @Produces(MediaType.APPLICATION_XML)\n    public List&lt;Country&gt; getCountries() {\n        return Database.get().findCountries();\n    }\n}\n</code></pre>\n<p><strong>Country query</strong></p>\n<pre><code>public List&lt;Country&gt; findCountries() {\n    return em.createQuery(&quot;SELECT c FROM Country c ORDER BY c.countryName&quot;, Country.class).getResultList();\n}\n</code></pre>\n"},{"tags":["java","spring","pagination"],"owner":{"account_id":24451658,"reputation":21,"user_id":18373807,"display_name":"Joosep Andrespuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":596,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1646400012,"creation_date":1646400012,"question_id":71352060,"body_markdown":"I have 21 rows in a database and I am using Spring&#39;s Page to get them.\r\n\r\nIf I specify a page size less than 22, it will show totalElements: 3864 and totalPages is also wrong. What could be wrong?\r\n\r\nExample: \r\n`GET myurl.com/foo?size=5`\r\n\r\nyields a result like this\r\n\r\n```\r\n{\r\n   \r\n        &quot;content&quot;: [\r\n            {\r\n               { &quot;pretend_that&quot;: &quot;there are five elements here&quot; }\r\n            }\r\n        ],\r\n        &quot;pageable&quot;: {\r\n            &quot;sort&quot;: {\r\n                &quot;empty&quot;: true,\r\n                &quot;sorted&quot;: false,\r\n                &quot;unsorted&quot;: true\r\n            },\r\n            &quot;offset&quot;: 0,\r\n            &quot;pageNumber&quot;: 0,\r\n            &quot;pageSize&quot;: 5,\r\n            &quot;paged&quot;: true,\r\n            &quot;unpaged&quot;: false\r\n        },\r\n        &quot;last&quot;: false,\r\n        &quot;totalPages&quot;: 773,\r\n        &quot;totalElements&quot;: 3864,\r\n        &quot;size&quot;: 5,\r\n        &quot;number&quot;: 0,\r\n        &quot;sort&quot;: {\r\n            &quot;empty&quot;: true,\r\n            &quot;sorted&quot;: false,\r\n            &quot;unsorted&quot;: true\r\n        },\r\n        &quot;first&quot;: true,\r\n        &quot;numberOfElements&quot;: 5,\r\n        &quot;empty&quot;: false\r\n}\r\n\r\n```\r\n\r\nExample 2:\r\n\r\n```\r\nGET myurl.com/foo?size=50\r\n```\r\n\r\nyields a result like this\r\n\r\n```\r\n{\r\n    \r\n        &quot;content&quot;: [\r\n            {\r\n                { &quot;pretend_that&quot;: &quot;there are 21 elements here&quot; }\r\n            }\r\n        ],\r\n        &quot;pageable&quot;: {\r\n            &quot;sort&quot;: {\r\n                &quot;empty&quot;: true,\r\n                &quot;sorted&quot;: false,\r\n                &quot;unsorted&quot;: true\r\n            },\r\n            &quot;offset&quot;: 0,\r\n            &quot;pageNumber&quot;: 0,\r\n            &quot;pageSize&quot;: 50,\r\n            &quot;paged&quot;: true,\r\n            &quot;unpaged&quot;: false\r\n        },\r\n        &quot;last&quot;: true,\r\n        &quot;totalPages&quot;: 1,\r\n        &quot;totalElements&quot;: 21,\r\n        &quot;size&quot;: 50,\r\n        &quot;number&quot;: 0,\r\n        &quot;sort&quot;: {\r\n            &quot;empty&quot;: true,\r\n            &quot;sorted&quot;: false,\r\n            &quot;unsorted&quot;: true\r\n        },\r\n        &quot;first&quot;: true,\r\n        &quot;numberOfElements&quot;: 21,\r\n        &quot;empty&quot;: false\r\n    \r\n}\r\n```\r\nP.S. if I get the final page, it shows the page and elements count correctly.\r\n\r\nI have tried changing Spring Boot versions and that hasn&#39;t helped.\r\n\r\n\r\n","title":"Incorrect totalElements and totalPages values for Spring Page","body":"<p>I have 21 rows in a database and I am using Spring's Page to get them.</p>\n<p>If I specify a page size less than 22, it will show totalElements: 3864 and totalPages is also wrong. What could be wrong?</p>\n<p>Example:\n<code>GET myurl.com/foo?size=5</code></p>\n<p>yields a result like this</p>\n<pre><code>{\n   \n        &quot;content&quot;: [\n            {\n               { &quot;pretend_that&quot;: &quot;there are five elements here&quot; }\n            }\n        ],\n        &quot;pageable&quot;: {\n            &quot;sort&quot;: {\n                &quot;empty&quot;: true,\n                &quot;sorted&quot;: false,\n                &quot;unsorted&quot;: true\n            },\n            &quot;offset&quot;: 0,\n            &quot;pageNumber&quot;: 0,\n            &quot;pageSize&quot;: 5,\n            &quot;paged&quot;: true,\n            &quot;unpaged&quot;: false\n        },\n        &quot;last&quot;: false,\n        &quot;totalPages&quot;: 773,\n        &quot;totalElements&quot;: 3864,\n        &quot;size&quot;: 5,\n        &quot;number&quot;: 0,\n        &quot;sort&quot;: {\n            &quot;empty&quot;: true,\n            &quot;sorted&quot;: false,\n            &quot;unsorted&quot;: true\n        },\n        &quot;first&quot;: true,\n        &quot;numberOfElements&quot;: 5,\n        &quot;empty&quot;: false\n}\n\n</code></pre>\n<p>Example 2:</p>\n<pre><code>GET myurl.com/foo?size=50\n</code></pre>\n<p>yields a result like this</p>\n<pre><code>{\n    \n        &quot;content&quot;: [\n            {\n                { &quot;pretend_that&quot;: &quot;there are 21 elements here&quot; }\n            }\n        ],\n        &quot;pageable&quot;: {\n            &quot;sort&quot;: {\n                &quot;empty&quot;: true,\n                &quot;sorted&quot;: false,\n                &quot;unsorted&quot;: true\n            },\n            &quot;offset&quot;: 0,\n            &quot;pageNumber&quot;: 0,\n            &quot;pageSize&quot;: 50,\n            &quot;paged&quot;: true,\n            &quot;unpaged&quot;: false\n        },\n        &quot;last&quot;: true,\n        &quot;totalPages&quot;: 1,\n        &quot;totalElements&quot;: 21,\n        &quot;size&quot;: 50,\n        &quot;number&quot;: 0,\n        &quot;sort&quot;: {\n            &quot;empty&quot;: true,\n            &quot;sorted&quot;: false,\n            &quot;unsorted&quot;: true\n        },\n        &quot;first&quot;: true,\n        &quot;numberOfElements&quot;: 21,\n        &quot;empty&quot;: false\n    \n}\n</code></pre>\n<p>P.S. if I get the final page, it shows the page and elements count correctly.</p>\n<p>I have tried changing Spring Boot versions and that hasn't helped.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1646375993,"post_id":71347161,"comment_id":126112138,"body_markdown":"Btw, you shouldnt close scanners tied to System.in. It is not your responsibility (but the JVMs) to close System.in. This can lead to bugs (for example a second scanner not being able to read anymore).","body":"Btw, you shouldnt close scanners tied to System.in. It is not your responsibility (but the JVMs) to close System.in. This can lead to bugs (for example a second scanner not being able to read anymore)."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1646400153,"post_id":71347161,"comment_id":126119762,"body_markdown":"Zabuzard is right. The rule of thumb here is &quot;don&#39;t close what you didn&#39;t open&quot;. The JVM opened stdin, so the JVM should close it (and it does).","body":"Zabuzard is right. The rule of thumb here is &quot;don&#39;t close what you didn&#39;t open&quot;. The JVM opened stdin, so the JVM should close it (and it does)."}],"answers":[{"tags":[],"owner":{"account_id":20321364,"reputation":31,"user_id":15608327,"display_name":" "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646399976,"creation_date":1646374274,"answer_id":71347265,"question_id":71347161,"body_markdown":"You can use one string input. Take this string and split it by whitespace then parse it by int.\r\n\r\n    import java.util.Scanner;\r\n    import java.util.ArrayList;\r\n\r\n    public class Main\r\n    {\r\n\t   public static void main(String[] args) \r\n\t   {\r\n\t    Scanner input = new Scanner(System.in);\r\n        \r\n        var str = input.nextLine();\r\n       \r\n        var delimeter = &quot; &quot;; \r\n        var subStr = str.split(delimeter); \r\n        var nums = new ArrayList&lt;Integer&gt;();\r\n        \r\n        for(int i = 0; i &lt; subStr.length; i++) \r\n        { \r\n            nums.add(Integer.parseInt(subStr[i]));\r\n        }\r\n        \r\n        var sum = nums.get(0) % nums.get(1);\r\n        System.out.println(sum);\r\n        \r\n        input.close();\r\n\t  }\r\n    }","title":"How do I combine two input variables into one line?","body":"<p>You can use one string input. Take this string and split it by whitespace then parse it by int.</p>\n<pre><code>import java.util.Scanner;\nimport java.util.ArrayList;\n\npublic class Main\n{\n   public static void main(String[] args) \n   {\n    Scanner input = new Scanner(System.in);\n    \n    var str = input.nextLine();\n   \n    var delimeter = &quot; &quot;; \n    var subStr = str.split(delimeter); \n    var nums = new ArrayList&lt;Integer&gt;();\n    \n    for(int i = 0; i &lt; subStr.length; i++) \n    { \n        nums.add(Integer.parseInt(subStr[i]));\n    }\n    \n    var sum = nums.get(0) % nums.get(1);\n    System.out.println(sum);\n    \n    input.close();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6586288,"reputation":91,"user_id":5088963,"display_name":"Sathiya prakash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646374378,"creation_date":1646374378,"answer_id":71347281,"question_id":71347161,"body_markdown":"you can use scanner inside another scanner like below and iterate it to get values\r\nTo sum you can you collectors.summingInt()\r\nworking sample:\r\n\r\n```\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\nimport java.util.stream.Collectors;\r\n\r\nclass Summing {\r\n    public static void main(String[] args)\r\n    {\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n \r\n        while (scanner.hasNextLine())\r\n        {\r\n            List&lt;String&gt; tokens = new ArrayList&lt;&gt;();\r\n            Scanner lineScanner = new Scanner(scanner.nextLine());\r\n \r\n            while (lineScanner.hasNext()) {\r\n                tokens.add(lineScanner.next());\r\n            }\r\n \r\n            lineScanner.close();\r\n            \r\n            System.out.println(tokens.stream()\r\n            .map(s -&gt; Integer.parseInt(s))\r\n            .collect(Collectors.summingInt(Integer::intValue)));\r\n        }\r\n \r\n        scanner.close();\r\n    }\r\n}\r\n```","title":"How do I combine two input variables into one line?","body":"<p>you can use scanner inside another scanner like below and iterate it to get values\nTo sum you can you collectors.summingInt()\nworking sample:</p>\n<pre><code>\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Scanner;\nimport java.util.stream.Collectors;\n\nclass Summing {\n    public static void main(String[] args)\n    {\n        Scanner scanner = new Scanner(System.in);\n\n \n        while (scanner.hasNextLine())\n        {\n            List&lt;String&gt; tokens = new ArrayList&lt;&gt;();\n            Scanner lineScanner = new Scanner(scanner.nextLine());\n \n            while (lineScanner.hasNext()) {\n                tokens.add(lineScanner.next());\n            }\n \n            lineScanner.close();\n            \n            System.out.println(tokens.stream()\n            .map(s -&gt; Integer.parseInt(s))\n            .collect(Collectors.summingInt(Integer::intValue)));\n        }\n \n        scanner.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24136810,"reputation":1,"user_id":18103599,"display_name":"Julian Williams"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":441,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1646374639,"answer_count":2,"score":0,"last_activity_date":1646399976,"creation_date":1646373391,"question_id":71347161,"body_markdown":"The given problem is to be able to input 2 digits in one line, instead of:\r\n```\r\nInput:\r\n2\r\n2\r\n\r\nOutput:\r\n1\r\n```\r\nIt should be:\r\n```\r\nInput:\r\n2 2\r\n\r\nOutput:\r\n1\r\n```\r\n\r\nTo make more sense, here is my code:\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass Main\r\n{\r\n  public static void main (String args[])\r\n  {\r\n    Scanner input = new Scanner(System.in);\r\n    \r\n    int a = input.nextInt();\r\n    int b = input.nextInt();\r\n    \r\n    int sum = a % b;\r\n    \r\n    System.out.print(sum);\r\n    \r\n    input.close();\r\n  }\r\n}\r\n```\r\n\r\nI want a code that only requires you to input two digits in one line instead of having to input the 2 digits separately.","title":"How do I combine two input variables into one line?","body":"<p>The given problem is to be able to input 2 digits in one line, instead of:</p>\n<pre><code>Input:\n2\n2\n\nOutput:\n1\n</code></pre>\n<p>It should be:</p>\n<pre><code>Input:\n2 2\n\nOutput:\n1\n</code></pre>\n<p>To make more sense, here is my code:</p>\n<pre><code>import java.util.Scanner;\n\nclass Main\n{\n  public static void main (String args[])\n  {\n    Scanner input = new Scanner(System.in);\n    \n    int a = input.nextInt();\n    int b = input.nextInt();\n    \n    int sum = a % b;\n    \n    System.out.print(sum);\n    \n    input.close();\n  }\n}\n</code></pre>\n<p>I want a code that only requires you to input two digits in one line instead of having to input the 2 digits separately.</p>\n"},{"tags":["java","spring","spring-boot","properties","annotations"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646399233,"creation_date":1646399233,"answer_id":71351906,"question_id":71351514,"body_markdown":"Don&#39;t use `@ConditionalOnProperty`, use `@Conditional` with a custom condition instead. The `ConditionContext` should give you access to this bean. You may need to use `@DependsOn` on to ensure that the class providing the string bean is already initialized.","title":"How to refer String Bean in @ConditionalOnProperty","body":"<p>Don't use <code>@ConditionalOnProperty</code>, use <code>@Conditional</code> with a custom condition instead. The <code>ConditionContext</code> should give you access to this bean. You may need to use <code>@DependsOn</code> on to ensure that the class providing the string bean is already initialized.</p>\n"}],"owner":{"account_id":11760122,"reputation":21,"user_id":8606452,"display_name":"Kshitiz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646399233,"creation_date":1646397371,"question_id":71351514,"body_markdown":"I need to initialize a Configuration based on some other bean value that I am fetching from database,\r\nhow can we refer the bean in @ConditionalOnProperty value attribute ?\r\n\r\nOr is there any other way to achieve the same.\r\n\r\n    // Bean that will query database\r\n    @Bean\r\n    public String checkAndCreate()\r\n    {\r\n           // Logic to Query DB\r\n           return &quot;true&quot;;\r\n    }\r\n\r\n```Want to Refer the bean checkAndCreate in value```\r\n\r\n    @ConditionalOnPropery(value = &quot;&quot;, havingValue = &quot;true&quot;)\r\n    @Configuration\r\n    public class MyConfiguration\r\n    {\r\n          // Some configuration Code\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to refer String Bean in @ConditionalOnProperty","body":"<p>I need to initialize a Configuration based on some other bean value that I am fetching from database,\nhow can we refer the bean in @ConditionalOnProperty value attribute ?</p>\n<p>Or is there any other way to achieve the same.</p>\n<pre><code>// Bean that will query database\n@Bean\npublic String checkAndCreate()\n{\n       // Logic to Query DB\n       return &quot;true&quot;;\n}\n</code></pre>\n<p><code>Want to Refer the bean checkAndCreate in value</code></p>\n<pre><code>@ConditionalOnPropery(value = &quot;&quot;, havingValue = &quot;true&quot;)\n@Configuration\npublic class MyConfiguration\n{\n      // Some configuration Code\n}\n</code></pre>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":8449,"page":1543,"page_size":100}
