{"items":[{"tags":["java","jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694506070,"post_id":77087140,"comment_id":135895974,"body_markdown":"If you want optimized queries, you have to write them manually. May I suggest jOOQ instead of JPA?","body":"If you want optimized queries, you have to write them manually. May I suggest jOOQ instead of JPA?"},{"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"score":0,"creation_date":1694506381,"post_id":77087140,"comment_id":135896033,"body_markdown":"Sadly jOOQ likely is not an option, price-wise (MSSQL and Oracle seem to need the pricey enterprise tier). thanks for the hint anyway!","body":"Sadly jOOQ likely is not an option, price-wise (MSSQL and Oracle seem to need the pricey enterprise tier). thanks for the hint anyway!"}],"answers":[{"comments":[{"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"score":0,"creation_date":1694534287,"post_id":77087675,"comment_id":135902413,"body_markdown":"It&#39;s an Spring Data based application, so Spring and no CDI @Alternative, but an analog approach should work there.","body":"It&#39;s an Spring Data based application, so Spring and no CDI @Alternative, but an analog approach should work there."},{"owner":{"account_id":5310120,"reputation":11,"user_id":4236766,"display_name":"PaMaly"},"score":0,"creation_date":1694621200,"post_id":77087675,"comment_id":135916253,"body_markdown":"Hope i helped you a little bit :)","body":"Hope i helped you a little bit :)"}],"tags":[],"owner":{"account_id":5310120,"reputation":11,"user_id":4236766,"display_name":"PaMaly"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694510026,"creation_date":1694510026,"answer_id":77087675,"question_id":77087140,"body_markdown":"JPA implementations like Hibernate perfectly supports the migration cross vendors. Some aspects to consider are described here: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#portability\r\n\r\nOn the other hand, if you need to have a specific optimization per vendor, i would consider a solution with alternative repositories. \r\n\r\nFor example CDI offers the use of the @Alternative annotation which lets you package multiple beans that match an injection point without ambiguity errors. In other words, you can apply the @Alternative annotation to two or more beans, then, based on your deployment, specify the bean you want to use in CDI&#39;s beans.\r\n\r\n\r\nMore abstract answer is to use a strategy pattern, which lets you to decide during the runtime which repository will be used. \r\n","title":"JPA with multiple provider options","body":"<p>JPA implementations like Hibernate perfectly supports the migration cross vendors. Some aspects to consider are described here: <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#portability\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#portability</a></p>\n<p>On the other hand, if you need to have a specific optimization per vendor, i would consider a solution with alternative repositories.</p>\n<p>For example CDI offers the use of the @Alternative annotation which lets you package multiple beans that match an injection point without ambiguity errors. In other words, you can apply the @Alternative annotation to two or more beans, then, based on your deployment, specify the bean you want to use in CDI's beans.</p>\n<p>More abstract answer is to use a strategy pattern, which lets you to decide during the runtime which repository will be used.</p>\n"}],"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694534438,"creation_date":1694505986,"question_id":77087140,"body_markdown":"I am working in a project that needs to support customers whith different RDBMs (MSSQL and Oracle specifically). At runtime only a single DB needs to be supported, but the customer wants/can choose which DB to actually use.\r\n\r\nThe project uses JPA, but has a fairly complex data model, and there are numerous queries that need to be optimized per RDMS, which currently is implemented by (read-only) entities backed by views (instead of real tables).\r\n\r\nCurrently the project&#39;s focus is on one DB (MSSQL) and optimizations have only been relevant there for now; but now the second DB is getting more important.\r\n\r\nI am now looking for best practices around using JPA with multiple &quot;providers&quot;(?) like this.","title":"JPA with multiple provider options","body":"<p>I am working in a project that needs to support customers whith different RDBMs (MSSQL and Oracle specifically). At runtime only a single DB needs to be supported, but the customer wants/can choose which DB to actually use.</p>\n<p>The project uses JPA, but has a fairly complex data model, and there are numerous queries that need to be optimized per RDMS, which currently is implemented by (read-only) entities backed by views (instead of real tables).</p>\n<p>Currently the project's focus is on one DB (MSSQL) and optimizations have only been relevant there for now; but now the second DB is getting more important.</p>\n<p>I am now looking for best practices around using JPA with multiple &quot;providers&quot;(?) like this.</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1694530306,"post_id":77090292,"comment_id":135901462,"body_markdown":"Could you fix `mymethod`?  There&#39;s no return type.","body":"Could you fix <code>mymethod</code>?  There&#39;s no return type."},{"owner":{"account_id":4292058,"reputation":166,"user_id":3508183,"accept_rate":100,"display_name":"ebarbara"},"score":0,"creation_date":1694530551,"post_id":77090292,"comment_id":135901521,"body_markdown":"Sure, it&#39;s void.","body":"Sure, it&#39;s void."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":2,"creation_date":1694530788,"post_id":77090292,"comment_id":135901586,"body_markdown":"Not possible as is.  Change Class1 to inject a Class2Factory, and use the factory to create an instance of Class2.  The test would inject a Spy&#39;d Factory, and verify it was invoked list.size() times.","body":"Not possible as is.  Change Class1 to inject a Class2Factory, and use the factory to create an instance of Class2.  The test would inject a Spy&#39;d Factory, and verify it was invoked list.size() times."},{"owner":{"account_id":4292058,"reputation":166,"user_id":3508183,"accept_rate":100,"display_name":"ebarbara"},"score":0,"creation_date":1694532121,"post_id":77090292,"comment_id":135901923,"body_markdown":"I don&#39;t understand the proposal. Could you write an example?","body":"I don&#39;t understand the proposal. Could you write an example?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694532737,"post_id":77090292,"comment_id":135902045,"body_markdown":"You don&#39;t have Powermock? You could mock the constructor.","body":"You don&#39;t have Powermock? You could mock the constructor."},{"owner":{"account_id":4292058,"reputation":166,"user_id":3508183,"accept_rate":100,"display_name":"ebarbara"},"score":0,"creation_date":1694533124,"post_id":77090292,"comment_id":135902134,"body_markdown":"No Powermock in the project","body":"No Powermock in the project"}],"answers":[{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694534115,"creation_date":1694534115,"answer_id":77090792,"question_id":77090292,"body_markdown":"Generally there is design issue for mocking construction of object, refactor for testability should be a better solution. (e.g. inject Class2Factory to class as suggested by [Andrew S](https://stackoverflow.com/users/6650475/andrew-s))\r\n\r\nBut if refactoring is not feasible,  \r\nwe can make use of [Mocking Object Construction][1]\r\n```java\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.mockito.Mockito.mockConstruction;\r\nimport static org.mockito.Mockito.verify;\r\nimport static org.mockito.Mockito.when;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.mockito.MockedConstruction;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nclass Class1Test {\r\n    @Test\r\n    void myMethod_createClass2PerItemAndCall_anotherMethod() {\r\n        try (MockedConstruction&lt;Class2&gt; mocked = mockConstruction(Class2.class, (mock, context) -&gt; {\r\n            // simulate the construction, in case you want to verify construction argument\r\n            when(mock.getElement()).thenReturn((String) context.arguments().get(0));\r\n        })) {\r\n            Class1 class1 = new Class1();\r\n            class1.myMethod(Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;));\r\n\r\n            List&lt;Class2&gt; mockedInstances = mocked.constructed();\r\n            assertEquals(3, mockedInstances.size());\r\n            // in case construction argument checking is needed\r\n            assertEquals(&quot;a&quot;, mockedInstances.get(0).getElement());\r\n            assertEquals(&quot;b&quot;, mockedInstances.get(1).getElement());\r\n            assertEquals(&quot;c&quot;, mockedInstances.get(2).getElement());\r\n            verify(mockedInstances.get(0)).anotherMethod();\r\n            verify(mockedInstances.get(1)).anotherMethod();\r\n            verify(mockedInstances.get(2)).anotherMethod();\r\n        }\r\n    }\r\n\r\n}\r\n\r\npublic class Class2 {\r\n    ...\r\n\r\n    // for verify constructor argument\r\n    String getElement() {\r\n        return element;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://javadoc.io/static/org.mockito/mockito-core/3.5.6/org/mockito/Mockito.html#mocked_construction","title":"Verify another class&#39; method inside a mockito spy","body":"<p>Generally there is design issue for mocking construction of object, refactor for testability should be a better solution. (e.g. inject Class2Factory to class as suggested by <a href=\"https://stackoverflow.com/users/6650475/andrew-s\">Andrew S</a>)</p>\n<p>But if refactoring is not feasible,<br />\nwe can make use of <a href=\"https://javadoc.io/static/org.mockito/mockito-core/3.5.6/org/mockito/Mockito.html#mocked_construction\" rel=\"nofollow noreferrer\">Mocking Object Construction</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.Mockito.mockConstruction;\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.MockedConstruction;\n\nimport java.util.Arrays;\nimport java.util.List;\n\nclass Class1Test {\n    @Test\n    void myMethod_createClass2PerItemAndCall_anotherMethod() {\n        try (MockedConstruction&lt;Class2&gt; mocked = mockConstruction(Class2.class, (mock, context) -&gt; {\n            // simulate the construction, in case you want to verify construction argument\n            when(mock.getElement()).thenReturn((String) context.arguments().get(0));\n        })) {\n            Class1 class1 = new Class1();\n            class1.myMethod(Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;));\n\n            List&lt;Class2&gt; mockedInstances = mocked.constructed();\n            assertEquals(3, mockedInstances.size());\n            // in case construction argument checking is needed\n            assertEquals(&quot;a&quot;, mockedInstances.get(0).getElement());\n            assertEquals(&quot;b&quot;, mockedInstances.get(1).getElement());\n            assertEquals(&quot;c&quot;, mockedInstances.get(2).getElement());\n            verify(mockedInstances.get(0)).anotherMethod();\n            verify(mockedInstances.get(1)).anotherMethod();\n            verify(mockedInstances.get(2)).anotherMethod();\n        }\n    }\n\n}\n\npublic class Class2 {\n    ...\n\n    // for verify constructor argument\n    String getElement() {\n        return element;\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":4292058,"reputation":166,"user_id":3508183,"accept_rate":100,"display_name":"ebarbara"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694534115,"creation_date":1694530208,"question_id":77090292,"body_markdown":"I have two classes that works one inside of the other\r\n\r\n    public class Class1 {\r\n        public Class1(){}\r\n    \r\n        public void myMethod(List&lt;String&gt; list){\r\n            for (String element: list){\r\n                Class2 class2 = new Class2(element);\r\n                class2.anotherMethod();\r\n            }\r\n        }\r\n    }\r\n\r\n    public class Class2 {\r\n        private final String element;\r\n\r\n        public Class2(String element) {\r\n            this.element = element;\r\n        }\r\n\r\n        public void anotherMethod(){\r\n            // do stuff\r\n        }\r\n    }\r\n\r\nMy question is how can I spy Class1 and check that when I call class1.myMethod, the class2 object is created *once for each element in the list* and the anotherMethod called in the same block?\r\n\r\nI&#39;m using Java 11 and Mockito 3.5, and can&#39;t change the project&#39;s POM.","title":"Verify another class&#39; method inside a mockito spy","body":"<p>I have two classes that works one inside of the other</p>\n<pre><code>public class Class1 {\n    public Class1(){}\n\n    public void myMethod(List&lt;String&gt; list){\n        for (String element: list){\n            Class2 class2 = new Class2(element);\n            class2.anotherMethod();\n        }\n    }\n}\n\npublic class Class2 {\n    private final String element;\n\n    public Class2(String element) {\n        this.element = element;\n    }\n\n    public void anotherMethod(){\n        // do stuff\n    }\n}\n</code></pre>\n<p>My question is how can I spy Class1 and check that when I call class1.myMethod, the class2 object is created <em>once for each element in the list</em> and the anotherMethod called in the same block?</p>\n<p>I'm using Java 11 and Mockito 3.5, and can't change the project's POM.</p>\n"},{"tags":["java","sql","kotlin","orm","sqldelight"],"comments":[{"owner":{"account_id":459646,"reputation":345,"user_id":860227,"display_name":"jokuskay"},"score":0,"creation_date":1694164634,"post_id":77028786,"comment_id":135858355,"body_markdown":"Consider saving as a file on disk and storing the file&#39;s path in DB. Another idea is to have one more table where you&#39;ll be storing chunks of bytes (no idea how SQLDelight works, hopefully doesn&#39;t get fully loaded into RAM).","body":"Consider saving as a file on disk and storing the file&#39;s path in DB. Another idea is to have one more table where you&#39;ll be storing chunks of bytes (no idea how SQLDelight works, hopefully doesn&#39;t get fully loaded into RAM)."}],"answers":[{"comments":[{"owner":{"account_id":4399745,"reputation":73438,"user_id":3585796,"display_name":"Phil Dukhov"},"score":0,"creation_date":1694402134,"post_id":77066915,"comment_id":135881575,"body_markdown":"Hey Kariem, thanks for your answer. by saying &quot;previously demonstrated&quot; you mean a conversation you had with ChatGPT? could you clarify `openWritableBlob` function? It doesn&#39;t seems to be existing with my setup","body":"Hey Kariem, thanks for your answer. by saying &quot;previously demonstrated&quot; you mean a conversation you had with ChatGPT? could you clarify <code>openWritableBlob</code> function? It doesn&#39;t seems to be existing with my setup"},{"owner":{"account_id":17832790,"reputation":33,"user_id":12952421,"display_name":"Kariem Seiam"},"score":0,"creation_date":1694480341,"post_id":77066915,"comment_id":135893343,"body_markdown":"I&#39;m sorry if it&#39;s confusing. &quot;openWritableBlob&quot; was just an example function I used to explain the idea. In SQLDelight, there isn&#39;t usually a function with that name.","body":"I&#39;m sorry if it&#39;s confusing. &quot;openWritableBlob&quot; was just an example function I used to explain the idea. In SQLDelight, there isn&#39;t usually a function with that name."},{"owner":{"account_id":4399745,"reputation":73438,"user_id":3585796,"display_name":"Phil Dukhov"},"score":0,"creation_date":1694483637,"post_id":77066915,"comment_id":135893588,"body_markdown":"your code should be runnable, without use of non-existing functions. otherwise what&#39;s the point in this answer? the main part of the question if something like `openWritableBlob` exists, since it&#39;s very hard/impossible to write it by own","body":"your code should be runnable, without use of non-existing functions. otherwise what&#39;s the point in this answer? the main part of the question if something like <code>openWritableBlob</code> exists, since it&#39;s very hard/impossible to write it by own"}],"tags":[],"owner":{"account_id":17832790,"reputation":33,"user_id":12952421,"display_name":"Kariem Seiam"},"comment_count":3,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1694176374,"creation_date":1694176374,"answer_id":77066915,"question_id":77028786,"body_markdown":"To insert large binary data into a BLOB column using SQLDelight while efficiently streaming the data:\r\n\r\n1. **SQLDelight Setup**:\r\n   Ensure that your SQLDelight table and queries are set up as previously demonstrated.\r\n\r\n2. **Stream and Insert Data**:\r\n\r\n   ```kotlin\r\n   import java.io.File\r\n   import java.io.FileInputStream\r\n\r\n   fun insertLargeBlobData(database: Database, filePath: String) {\r\n       val queries = database.myTableQueries\r\n       val file = File(filePath)\r\n       val inputStream = FileInputStream(file)\r\n\r\n       database.transaction {\r\n           val buffer = ByteArray(8192) // Adjust buffer size as needed\r\n           val writableBlob = queries.transactionWithResult { transaction -&gt;\r\n               transaction.myTableQueries.openWritableBlob()\r\n           }\r\n\r\n           var bytesRead = inputStream.read(buffer)\r\n           while (bytesRead &gt; 0) {\r\n               writableBlob.write(buffer, 0, bytesRead)\r\n               bytesRead = inputStream.read(buffer)\r\n           }\r\n\r\n           writableBlob.close()\r\n       }\r\n   }\r\n   ```\r\n\r\n\r\n\r\n   - **Buffer Size Guidelines**:\r\n  \r\n     | Data Size                 | Buffer Size Range | Example                  |\r\n     |---------------------------|-------------------|--------------------------|\r\n     | Small Data (&lt; 1 MB)       | 4 KB to 16 KB     | Use 8192 bytes (8 KB) for data up to 1 MB. |\r\n     | Medium Data (1 MB to 100 MB) | 16 KB to 1 MB  | Use 65536 bytes (64 KB) for data in the 1 MB to 100 MB range. |\r\n     | Large Data (100 MB to 1 GB) | 1 MB to 4 MB    | Use 2097152 bytes (2 MB) for data in the 100 MB to 1 GB range. |\r\n     | Very Large Data (&gt; 1 GB)   | 4 MB or more     | For data exceeding 1 GB, consider using 4194304 bytes (4 MB) or more. |\r\n     \r\n3. **Call the Function**:\r\n\r\n   ```kotlin\r\n   val database = Database(driver)\r\n   val filePath = &quot;path_to_your_large_file.bin&quot;\r\n   insertLargeBlobData(database, filePath)\r\n   ```\r\n\r\nThis approach efficiently handles large binary data without loading the entire file into memory at once. You can adjust the buffer size (`ByteArray(8192)`) according to your specific memory requirements, following the buffer size guidelines provided.","title":"SQLDelight: BLOB inserting large binary data","body":"<p>To insert large binary data into a BLOB column using SQLDelight while efficiently streaming the data:</p>\n<ol>\n<li><p><strong>SQLDelight Setup</strong>:\nEnsure that your SQLDelight table and queries are set up as previously demonstrated.</p>\n</li>\n<li><p><strong>Stream and Insert Data</strong>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import java.io.File\nimport java.io.FileInputStream\n\nfun insertLargeBlobData(database: Database, filePath: String) {\n    val queries = database.myTableQueries\n    val file = File(filePath)\n    val inputStream = FileInputStream(file)\n\n    database.transaction {\n        val buffer = ByteArray(8192) // Adjust buffer size as needed\n        val writableBlob = queries.transactionWithResult { transaction -&gt;\n            transaction.myTableQueries.openWritableBlob()\n        }\n\n        var bytesRead = inputStream.read(buffer)\n        while (bytesRead &gt; 0) {\n            writableBlob.write(buffer, 0, bytesRead)\n            bytesRead = inputStream.read(buffer)\n        }\n\n        writableBlob.close()\n    }\n}\n</code></pre>\n<ul>\n<li><p><strong>Buffer Size Guidelines</strong>:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Data Size</th>\n<th>Buffer Size Range</th>\n<th>Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Small Data (&lt; 1 MB)</td>\n<td>4 KB to 16 KB</td>\n<td>Use 8192 bytes (8 KB) for data up to 1 MB.</td>\n</tr>\n<tr>\n<td>Medium Data (1 MB to 100 MB)</td>\n<td>16 KB to 1 MB</td>\n<td>Use 65536 bytes (64 KB) for data in the 1 MB to 100 MB range.</td>\n</tr>\n<tr>\n<td>Large Data (100 MB to 1 GB)</td>\n<td>1 MB to 4 MB</td>\n<td>Use 2097152 bytes (2 MB) for data in the 100 MB to 1 GB range.</td>\n</tr>\n<tr>\n<td>Very Large Data (&gt; 1 GB)</td>\n<td>4 MB or more</td>\n<td>For data exceeding 1 GB, consider using 4194304 bytes (4 MB) or more.</td>\n</tr>\n</tbody>\n</table>\n</div></li>\n</ul>\n</li>\n<li><p><strong>Call the Function</strong>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val database = Database(driver)\nval filePath = &quot;path_to_your_large_file.bin&quot;\ninsertLargeBlobData(database, filePath)\n</code></pre>\n</li>\n</ol>\n<p>This approach efficiently handles large binary data without loading the entire file into memory at once. You can adjust the buffer size (<code>ByteArray(8192)</code>) according to your specific memory requirements, following the buffer size guidelines provided.</p>\n"},{"comments":[{"owner":{"account_id":216810,"reputation":16567,"user_id":472270,"accept_rate":87,"display_name":"Barmaley"},"score":0,"creation_date":1695047601,"post_id":77090791,"comment_id":135968357,"body_markdown":"Answer generated by GPT :) - but it&#39;s incorrect","body":"Answer generated by GPT :) - but it&#39;s incorrect"}],"tags":[],"owner":{"account_id":1380512,"reputation":110,"user_id":7388422,"display_name":"Shant Khayalian"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694534107,"creation_date":1694534107,"answer_id":77090791,"question_id":77028786,"body_markdown":"When working with large binary data in SQLDelight, you can follow a similar approach to what you would do with ordinary JDBC. However, there are a few differences in the syntax and implementation.\r\n\r\nIn SQLDelight, you define your table schema in a separate .sq file. In this file, you specify the table structure, including the BLOB column. For example:\r\n\r\n        CREATE TABLE MyTable (\r\n      myBlob BLOB\r\n    );\r\n\r\nTo insert large binary data into the BLOB column, you need to create an instance of the ByteArray with the appropriate size. You can then pass this ByteArray to the insert method of the generated SQLDelight queries.\r\n\r\nHere&#39;s an example of how you can achieve this:\r\n\r\n    val database = Database(driver)\r\n    val queries = database.myTableQueries\r\n    \r\n    // Create a ByteArray with the appropriate size (e.g., several gigs)\r\n    val bytes = ByteArray(sizeInBytes)\r\n    \r\n    // Populate the ByteArray with your data\r\n    // ...\r\n    \r\n    // Create an instance of the MyTable data class with the ByteArray\r\n    val myRecord = MyTable(bytes)\r\n    \r\n    // Insert the record into the table using the generated insert query\r\n    queries.insert(myRecord)\r\n\r\nIn this example, you first create an instance of the Database using the appropriate driver. Then, you obtain the generated queries for the MyTable table.\r\n\r\nNext, you create a ByteArray with the desired size, representing your large binary data. You can populate this ByteArray with your data before inserting it into the table.\r\n\r\nFinally, you create an instance of the MyTable data class, passing the ByteArray as a parameter. You then use the insert method of the generated queries to insert the record into the table.\r\n\r\nBy following this approach, you should be able to insert large binary data into a BLOB column using SQLDelight.\r\n\r\nHope I was Helpful.\r\n","title":"SQLDelight: BLOB inserting large binary data","body":"<p>When working with large binary data in SQLDelight, you can follow a similar approach to what you would do with ordinary JDBC. However, there are a few differences in the syntax and implementation.</p>\n<p>In SQLDelight, you define your table schema in a separate .sq file. In this file, you specify the table structure, including the BLOB column. For example:</p>\n<pre><code>    CREATE TABLE MyTable (\n  myBlob BLOB\n);\n</code></pre>\n<p>To insert large binary data into the BLOB column, you need to create an instance of the ByteArray with the appropriate size. You can then pass this ByteArray to the insert method of the generated SQLDelight queries.</p>\n<p>Here's an example of how you can achieve this:</p>\n<pre><code>val database = Database(driver)\nval queries = database.myTableQueries\n\n// Create a ByteArray with the appropriate size (e.g., several gigs)\nval bytes = ByteArray(sizeInBytes)\n\n// Populate the ByteArray with your data\n// ...\n\n// Create an instance of the MyTable data class with the ByteArray\nval myRecord = MyTable(bytes)\n\n// Insert the record into the table using the generated insert query\nqueries.insert(myRecord)\n</code></pre>\n<p>In this example, you first create an instance of the Database using the appropriate driver. Then, you obtain the generated queries for the MyTable table.</p>\n<p>Next, you create a ByteArray with the desired size, representing your large binary data. You can populate this ByteArray with your data before inserting it into the table.</p>\n<p>Finally, you create an instance of the MyTable data class, passing the ByteArray as a parameter. You then use the insert method of the generated queries to insert the record into the table.</p>\n<p>By following this approach, you should be able to insert large binary data into a BLOB column using SQLDelight.</p>\n<p>Hope I was Helpful.</p>\n"}],"owner":{"account_id":216810,"reputation":16567,"user_id":472270,"accept_rate":87,"display_name":"Barmaley"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694534107,"creation_date":1693666859,"question_id":77028786,"body_markdown":"I stuck with problem. I need to insert large enough data to BLOB column using SQLDelight...\r\n\r\nIn ordinary JDBC it could be done usually in a way like:\r\n\r\n    val file = File(&quot;your_path&quot;)\r\n    val inputStream = FileInputStream(file)\r\n    val statement = connection.prepareStatement(&quot;INSERT INTO myTable (myBlob) VALUES (?)&quot;)\r\n    statement.setBlob(1, inputStream)\r\n\r\nIn case of SQLDelight I can only do:\r\n\r\nmyTable.sq\r\n----------\r\n\r\n    CREATE TABLE MyTable (\r\n    myBlob BLOB);\r\n\r\n    insert:\r\n    INSERT INTO MyTable VALUES ?;\r\n\r\nSomewhere in Kotlin code:\r\n------------------------\r\n    var bytes: ByteArray\r\n    val database = Database(driver)\r\n    val queries = database.myTableQueries\r\n    //blah-blah\r\n    val myRecord = MyTable(bytes)\r\n    queries.insert(myRecord)\r\n\r\nEverything looks like, ok, but what if I would need to allocate `ByteArray` as several gigs?\r\n\r\nAny ideas?\r\n\r\n\r\n\r\n","title":"SQLDelight: BLOB inserting large binary data","body":"<p>I stuck with problem. I need to insert large enough data to BLOB column using SQLDelight...</p>\n<p>In ordinary JDBC it could be done usually in a way like:</p>\n<pre><code>val file = File(&quot;your_path&quot;)\nval inputStream = FileInputStream(file)\nval statement = connection.prepareStatement(&quot;INSERT INTO myTable (myBlob) VALUES (?)&quot;)\nstatement.setBlob(1, inputStream)\n</code></pre>\n<p>In case of SQLDelight I can only do:</p>\n<h2>myTable.sq</h2>\n<pre><code>CREATE TABLE MyTable (\nmyBlob BLOB);\n\ninsert:\nINSERT INTO MyTable VALUES ?;\n</code></pre>\n<h2>Somewhere in Kotlin code:</h2>\n<pre><code>var bytes: ByteArray\nval database = Database(driver)\nval queries = database.myTableQueries\n//blah-blah\nval myRecord = MyTable(bytes)\nqueries.insert(myRecord)\n</code></pre>\n<p>Everything looks like, ok, but what if I would need to allocate <code>ByteArray</code> as several gigs?</p>\n<p>Any ideas?</p>\n"},{"tags":["java","debugging","intellij-idea","jrebel"],"owner":{"account_id":1073114,"reputation":3335,"user_id":1071914,"accept_rate":86,"display_name":"user1071914"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694534073,"creation_date":1694534073,"question_id":77090785,"body_markdown":"I have a &quot;legacy&quot; Java 8 app that contains 15 years worth of code.    I need to debug using JRebel to shorten the change times as I make modifications.   I am using IntelliJ 23.1.2 and Jrebel 2023.2.2.   \r\n\r\nI have to run this app outside Intellij and debug as a &quot;Remote JVM App&quot; in Intellij to debug it because it will not run directly out of the build directory.    \r\n\r\nThe JRebel instructions say that I should be able to remote-debug this app, but if I run the app in a command window then select my &quot;Debug&quot; configuration to connect to the JVM in IntelliJ the &quot;Jrebel&quot; debug icon is not lit up so I cannot run the Intellij features simultaneously with the Jrebel features (see screenshot).   What am I missing here?   \r\n\r\n[![Intellij options][1]][1]\r\n\r\nHere is my Java run command, I include the Intellij agentlib parameter for remote debugging and the JRebel parameters for JRebel functionality.   \r\n\r\nAny help is appreciated.\r\n    \r\n    java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005  &quot;-agentpath:C:\\jrebel\\lib\\jrebel64.dll&quot; -Drebel.remoting_plugin=true -jar myapp.war \r\n\r\n  [1]: https://i.stack.imgur.com/ZkOpR.png","title":"Use Jrebel to remote debug a spring boot app?","body":"<p>I have a &quot;legacy&quot; Java 8 app that contains 15 years worth of code.    I need to debug using JRebel to shorten the change times as I make modifications.   I am using IntelliJ 23.1.2 and Jrebel 2023.2.2.</p>\n<p>I have to run this app outside Intellij and debug as a &quot;Remote JVM App&quot; in Intellij to debug it because it will not run directly out of the build directory.</p>\n<p>The JRebel instructions say that I should be able to remote-debug this app, but if I run the app in a command window then select my &quot;Debug&quot; configuration to connect to the JVM in IntelliJ the &quot;Jrebel&quot; debug icon is not lit up so I cannot run the Intellij features simultaneously with the Jrebel features (see screenshot).   What am I missing here?</p>\n<p><a href=\"https://i.stack.imgur.com/ZkOpR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZkOpR.png\" alt=\"Intellij options\" /></a></p>\n<p>Here is my Java run command, I include the Intellij agentlib parameter for remote debugging and the JRebel parameters for JRebel functionality.</p>\n<p>Any help is appreciated.</p>\n<pre><code>java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005  &quot;-agentpath:C:\\jrebel\\lib\\jrebel64.dll&quot; -Drebel.remoting_plugin=true -jar myapp.war \n</code></pre>\n"},{"tags":["java","classpath"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1694534136,"post_id":77090720,"comment_id":135902363,"body_markdown":"You&#39;re lacking like a zillion details here.","body":"You&#39;re lacking like a zillion details here."},{"owner":{"account_id":29424070,"reputation":1,"user_id":22545228,"display_name":"bstylee"},"score":0,"creation_date":1694534835,"post_id":77090720,"comment_id":135902555,"body_markdown":"Understood Kayaman and appreciate the response. Since the file structure and java code has not changed in years, didn&#39;t want to overload with details. Was hoping that someone has had a similar experience. But certainly, I can provide any details that you think may be helpful.","body":"Understood Kayaman and appreciate the response. Since the file structure and java code has not changed in years, didn&#39;t want to overload with details. Was hoping that someone has had a similar experience. But certainly, I can provide any details that you think may be helpful."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694562887,"post_id":77090720,"comment_id":135906858,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":29424070,"reputation":1,"user_id":22545228,"display_name":"bstylee"},"score":0,"creation_date":1694606762,"post_id":77090720,"comment_id":135912915,"body_markdown":"We restored the machine to a previous version which removed the JRE updates that were creating our issues. Case closed.","body":"We restored the machine to a previous version which removed the JRE updates that were creating our issues. Case closed."}],"owner":{"account_id":29424070,"reputation":1,"user_id":22545228,"display_name":"bstylee"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694533568,"creation_date":1694533568,"question_id":77090720,"body_markdown":"Working with a legacy Java application in which the user defined packages are no longer visible when compiling classes that are importing.\r\n\r\nCan compile the packages (ie: package test.package;) and the .class files are properly located.\r\n\r\nBut when compiling MyServlet.class - getting &quot;package test.package does not exist&quot; error.\r\n\r\nThe &quot;import test.package;&quot; are declared in MyServlet.class.\r\n\r\nAs mentioned, this is a legacy application (java 1.6) and these classes and packages have not changed location or how they are compiled for years. \r\n\r\nThe user defined packages are compiled fine and are in the proper directory structure, so they exist. But, any servlets importing these packages can&#39;t be compiled.\r\n\r\nIt appears that perhaps the Tomcat, JAVA and/or JDK/JRE have been attempted to be upgraded, thus the CLASSPATH may have been changed. Tried to tweak the CLASSPATH and Environmental Variables. But, still no luck.\r\n\r\nAny insight or suggestions would be much appreciated.\r\n\r\nBest,\r\nMatthew \r\n\r\nWe&#39;ve tried to tweak the CLASSPATH and create new Package locations. But same &quot;package test1.package does not exist&quot;.","title":"User Defined Package Does Not Exist - But it Does","body":"<p>Working with a legacy Java application in which the user defined packages are no longer visible when compiling classes that are importing.</p>\n<p>Can compile the packages (ie: package test.package;) and the .class files are properly located.</p>\n<p>But when compiling MyServlet.class - getting &quot;package test.package does not exist&quot; error.</p>\n<p>The &quot;import test.package;&quot; are declared in MyServlet.class.</p>\n<p>As mentioned, this is a legacy application (java 1.6) and these classes and packages have not changed location or how they are compiled for years.</p>\n<p>The user defined packages are compiled fine and are in the proper directory structure, so they exist. But, any servlets importing these packages can't be compiled.</p>\n<p>It appears that perhaps the Tomcat, JAVA and/or JDK/JRE have been attempted to be upgraded, thus the CLASSPATH may have been changed. Tried to tweak the CLASSPATH and Environmental Variables. But, still no luck.</p>\n<p>Any insight or suggestions would be much appreciated.</p>\n<p>Best,\nMatthew</p>\n<p>We've tried to tweak the CLASSPATH and create new Package locations. But same &quot;package test1.package does not exist&quot;.</p>\n"},{"tags":["java","android","command-line","permissions","adb"],"comments":[{"owner":{"account_id":16565480,"reputation":311,"user_id":11970188,"display_name":"Loc Huynh"},"score":0,"creation_date":1694620541,"post_id":77090575,"comment_id":135916132,"body_markdown":"I suggest you using Shizuku API which enable &quot;adb&quot; command for other android apps.","body":"I suggest you using Shizuku API which enable &quot;adb&quot; command for other android apps."}],"owner":{"account_id":29412634,"reputation":11,"user_id":22536158,"display_name":"Gennadii Ganenko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694532347,"creation_date":1694532295,"question_id":77090575,"body_markdown":"I&#39;m trying to build a simple support app to execute some of adb shell commands like &quot;adb shell wm overscan -35,0,-55,0&quot; to hide Black Bottom Bar. I will run this app as system on rooted device.\r\n\r\nThe problem is that I couldn&#39;t find any working solution in the internet. I already tried next solutions:\r\n\r\nhttps://stackoverflow.com/a/74190894/22536158\r\n\r\nhttps://stackoverflow.com/a/13381888/22536158\r\n\r\nThese do nothing if i write command without adb shell like: &quot;wm overscan -35,0,-55,0&quot; and if I add adb shell then it throws:\r\n\r\n    java.io.IOException: Cannot run program &quot;adb&quot;: error=13, Permission denied\r\n\r\nMoreover, I&#39;ve tried to use ProcessBuilder:\r\n\r\n    ProcessBuilder(&quot;wm overscan -35,0,-55,0&quot;).start()\r\n\r\nand it throws\r\n\r\n    java.io.IOException: Cannot run program &quot;wm overscan -35,0,-55,0&quot;: error=13, Permission denied\r\n\r\nCan someone please explain me what am I doing wrong?\r\n","title":"Run adb shell command programmatically","body":"<p>I'm trying to build a simple support app to execute some of adb shell commands like &quot;adb shell wm overscan -35,0,-55,0&quot; to hide Black Bottom Bar. I will run this app as system on rooted device.</p>\n<p>The problem is that I couldn't find any working solution in the internet. I already tried next solutions:</p>\n<p><a href=\"https://stackoverflow.com/a/74190894/22536158\">https://stackoverflow.com/a/74190894/22536158</a></p>\n<p><a href=\"https://stackoverflow.com/a/13381888/22536158\">https://stackoverflow.com/a/13381888/22536158</a></p>\n<p>These do nothing if i write command without adb shell like: &quot;wm overscan -35,0,-55,0&quot; and if I add adb shell then it throws:</p>\n<pre><code>java.io.IOException: Cannot run program &quot;adb&quot;: error=13, Permission denied\n</code></pre>\n<p>Moreover, I've tried to use ProcessBuilder:</p>\n<pre><code>ProcessBuilder(&quot;wm overscan -35,0,-55,0&quot;).start()\n</code></pre>\n<p>and it throws</p>\n<pre><code>java.io.IOException: Cannot run program &quot;wm overscan -35,0,-55,0&quot;: error=13, Permission denied\n</code></pre>\n<p>Can someone please explain me what am I doing wrong?</p>\n"},{"tags":["java","apache-kafka","quarkus","smallrye","quarkus-reactive"],"answers":[{"comments":[{"owner":{"account_id":6291501,"reputation":1128,"user_id":4889035,"display_name":"Dmytro Chaban"},"score":0,"creation_date":1694010644,"post_id":77050038,"comment_id":135835455,"body_markdown":"works like a charm, thank you!","body":"works like a charm, thank you!"}],"tags":[],"owner":{"account_id":18144706,"reputation":196,"user_id":13198160,"display_name":"Ozan G&#252;nalp"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693987355,"creation_date":1693987355,"answer_id":77050038,"question_id":77049712,"body_markdown":"The `Multi&lt;O&gt; process(Multi&lt;I&gt; messages)` signature does not support automatic metadata propagation, hence the header propagation for Kafka. \r\n\r\nI suggest you use, if it suits your use case, `Multi&lt;String&gt; consume(Bytes message)`. The method will be called for each incoming message and you can produce multiple messages per incoming message using your code `Multi.createFrom().items({parse message into multiple strings});`. \r\nAnd the Kafka header propagation will work expectedly.","title":"Quarkus Kafka: header propagation doesn&#39;t work for Multi","body":"<p>The <code>Multi&lt;O&gt; process(Multi&lt;I&gt; messages)</code> signature does not support automatic metadata propagation, hence the header propagation for Kafka.</p>\n<p>I suggest you use, if it suits your use case, <code>Multi&lt;String&gt; consume(Bytes message)</code>. The method will be called for each incoming message and you can produce multiple messages per incoming message using your code <code>Multi.createFrom().items({parse message into multiple strings});</code>.\nAnd the Kafka header propagation will work expectedly.</p>\n"}],"owner":{"account_id":6291501,"reputation":1128,"user_id":4889035,"display_name":"Dmytro Chaban"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77050038,"answer_count":1,"score":0,"last_activity_date":1694532331,"creation_date":1693984245,"question_id":77049712,"body_markdown":"I have a simple Kafka Multi processing, I&#39;m listening to `Multi&lt;Bytes&gt;`, doing a flatmap and producing multiple messages:\r\n\r\n```java\r\n    @Incoming(&quot;generic-in&quot;)\r\n    @Outgoing(&quot;generic-out&quot;)\r\n    public Multi&lt;String&gt; consume(@NotNull Multi&lt;Bytes&gt; messages) {\r\n        return messages.flatMap((message) -&gt; {\r\n               return Multi.createFrom().items({parse message into multiple strings});\r\n        });\r\n    }\r\n```\r\n\r\nI added the propagate-headers key to the outgoing topic:\r\n\r\n```\r\n      generic-out:\r\n        merge: true\r\n        bootstrap:\r\n          servers: localhost:9092\r\n        topic: &#39;test.test.out&#39;\r\n        key:\r\n          serializer: org.apache.kafka.common.serialization.StringSerializer\r\n        connector: smallrye-kafka\r\n        value:\r\n          serializer: org.apache.kafka.common.serialization.StringSerializer\r\n        propagate-headers: &quot;HEADER1,HEADER2&quot;\r\n```\r\n\r\nStill I&#39;m not getting the headers propagated except the opentelemetry.","title":"Quarkus Kafka: header propagation doesn&#39;t work for Multi","body":"<p>I have a simple Kafka Multi processing, I'm listening to <code>Multi&lt;Bytes&gt;</code>, doing a flatmap and producing multiple messages:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Incoming(&quot;generic-in&quot;)\n    @Outgoing(&quot;generic-out&quot;)\n    public Multi&lt;String&gt; consume(@NotNull Multi&lt;Bytes&gt; messages) {\n        return messages.flatMap((message) -&gt; {\n               return Multi.createFrom().items({parse message into multiple strings});\n        });\n    }\n</code></pre>\n<p>I added the propagate-headers key to the outgoing topic:</p>\n<pre><code>      generic-out:\n        merge: true\n        bootstrap:\n          servers: localhost:9092\n        topic: 'test.test.out'\n        key:\n          serializer: org.apache.kafka.common.serialization.StringSerializer\n        connector: smallrye-kafka\n        value:\n          serializer: org.apache.kafka.common.serialization.StringSerializer\n        propagate-headers: &quot;HEADER1,HEADER2&quot;\n</code></pre>\n<p>Still I'm not getting the headers propagated except the opentelemetry.</p>\n"},{"tags":["java","spring","apache-kafka","apache-kafka-streams","spring-cloud-stream-binder-kafka"],"answers":[{"tags":[],"owner":{"account_id":20087099,"reputation":11,"user_id":14728414,"display_name":"iman soltani"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1694444106,"creation_date":1694444106,"answer_id":77082714,"question_id":77029684,"body_markdown":"Accessing a **GlobalKTable** or any state store created within a Kafka Streams topology from outside (like in a scheduled task) usually involves the **InteractiveQueryService**. This service provides a means to query state stores directly without needing to go through Kafka.\r\n\r\nThe **UnknownStateStoreException** you&#39;re encountering usually happens because the state store is either not yet ready, or Kafka Streams doesn&#39;t know about it yet. This could be due to several reasons:\r\n 1. **Name mismatch**: Ensure that the name you use with **InteractiveQueryService** or **KafkaStreams.store(...)** is the exact name of your store.\r\n 2. **Your application is not yet running**: Ensure that your streams application is in a **RUNNING** state. Before reaching this state, the store may not be query-able.\r\n 3. **Not all instances have the global store**: **GlobalKTable** (or any global store) is, as the name implies, global. That means all instances of your service should have a full copy of it. Ensure that all instances have loaded and processed the store.\r\n\r\nI understand you are looking for a more streamlined approach. for better experience follow these steps:\r\n\r\n 1. **State Stores are ready**: You can listen for the **StreamsBuilderFactoryBean** to ensure the state stores are ready.\r\n```\r\n@Autowired\r\nprivate InteractiveQueryService interactiveQueryService;\r\n\r\n@Scheduled\r\npublic void myTask() {\r\n    try {\r\n        ReadOnlyKeyValueStore&lt;String, MyValue&gt; store = \r\n            interactiveQueryService.getQueryableStore(MY_STORE_NAME, QueryableStoreTypes.keyValueStore());\r\n\r\n        // ... Use the store to fetch values.\r\n    } catch (UnknownStateStoreException e) {\r\n        // Handle or log the exception. You can retry after a delay.\r\n    }\r\n}\r\n```\r\n\r\n 2. **Add StreamListener lifecycle hooks**: You can use the **@StreamListener** lifecycle hooks to know when your streams are ready.\r\n```\r\n@StreamListener(target = Processor.INPUT, condition = &quot;headers[&#39;type&#39;]==&#39;...&#39;&quot;)\r\npublic void input(...) {\r\n    // Your logic ...\r\n}\r\n\r\n@StreamListener(&quot;process-0&quot;)  // This assumes your input channel name is process-0\r\npublic void onEvent(...) {\r\n    // Once this is called, it means your Kafka Streams instance is running and the state stores should be available.\r\n}\r\n```\r\n\r\n 3. **Configuration**: Ensure that you have **spring.cloud.stream.kafka.streams.binder.configuration.application.server** defined. This is needed for **InteractiveQueryService**.\r\n\r\nWith these steps, you should be able to access your **GlobalKTable** with **InteractiveQueryService** without having to directly deal with the **KafkaStreams** object or the **ApplicationContext**. Remember to always handle the **UnknownStateStoreException** exception as the store might not always be immediately available.\r\n","title":"Kafka Streams Binder: Accessing a Global State Store","body":"<p>Accessing a <strong>GlobalKTable</strong> or any state store created within a Kafka Streams topology from outside (like in a scheduled task) usually involves the <strong>InteractiveQueryService</strong>. This service provides a means to query state stores directly without needing to go through Kafka.</p>\n<p>The <strong>UnknownStateStoreException</strong> you're encountering usually happens because the state store is either not yet ready, or Kafka Streams doesn't know about it yet. This could be due to several reasons:</p>\n<ol>\n<li><strong>Name mismatch</strong>: Ensure that the name you use with <strong>InteractiveQueryService</strong> or <strong>KafkaStreams.store(...)</strong> is the exact name of your store.</li>\n<li><strong>Your application is not yet running</strong>: Ensure that your streams application is in a <strong>RUNNING</strong> state. Before reaching this state, the store may not be query-able.</li>\n<li><strong>Not all instances have the global store</strong>: <strong>GlobalKTable</strong> (or any global store) is, as the name implies, global. That means all instances of your service should have a full copy of it. Ensure that all instances have loaded and processed the store.</li>\n</ol>\n<p>I understand you are looking for a more streamlined approach. for better experience follow these steps:</p>\n<ol>\n<li><strong>State Stores are ready</strong>: You can listen for the <strong>StreamsBuilderFactoryBean</strong> to ensure the state stores are ready.</li>\n</ol>\n<pre><code>@Autowired\nprivate InteractiveQueryService interactiveQueryService;\n\n@Scheduled\npublic void myTask() {\n    try {\n        ReadOnlyKeyValueStore&lt;String, MyValue&gt; store = \n            interactiveQueryService.getQueryableStore(MY_STORE_NAME, QueryableStoreTypes.keyValueStore());\n\n        // ... Use the store to fetch values.\n    } catch (UnknownStateStoreException e) {\n        // Handle or log the exception. You can retry after a delay.\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li><strong>Add StreamListener lifecycle hooks</strong>: You can use the <strong>@StreamListener</strong> lifecycle hooks to know when your streams are ready.</li>\n</ol>\n<pre><code>@StreamListener(target = Processor.INPUT, condition = &quot;headers['type']=='...'&quot;)\npublic void input(...) {\n    // Your logic ...\n}\n\n@StreamListener(&quot;process-0&quot;)  // This assumes your input channel name is process-0\npublic void onEvent(...) {\n    // Once this is called, it means your Kafka Streams instance is running and the state stores should be available.\n}\n</code></pre>\n<ol start=\"3\">\n<li><strong>Configuration</strong>: Ensure that you have <strong>spring.cloud.stream.kafka.streams.binder.configuration.application.server</strong> defined. This is needed for <strong>InteractiveQueryService</strong>.</li>\n</ol>\n<p>With these steps, you should be able to access your <strong>GlobalKTable</strong> with <strong>InteractiveQueryService</strong> without having to directly deal with the <strong>KafkaStreams</strong> object or the <strong>ApplicationContext</strong>. Remember to always handle the <strong>UnknownStateStoreException</strong> exception as the store might not always be immediately available.</p>\n"}],"owner":{"account_id":1257958,"reputation":263,"user_id":7382368,"display_name":"user7382368"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694532095,"creation_date":1693681465,"question_id":77029684,"body_markdown":"Related to [this question][1]:\r\nI&#39;m using `spring-boot-starter-parent` version `3.1.2` and `spring-cloud-stream-binder-kafka-streams` version `4.0.3`\r\n\r\nI&#39;ve created a GlobalKTable in with the following code:\r\n\r\n```java\r\n@Bean\r\npublic StreamsBuilderFactoryBeanCustomizer customizer() {\r\n    return fb -&gt; {\r\n        try {\r\n            final StreamsBuilder streamsBuilder = fb.getObject();\r\n            streamsBuilder.addGlobalStore(...);\r\n        }\r\n        catch (Exception e) { ... }\r\n    };\r\n}\r\n```\r\n\r\nHowever I need to access this GKT from a scheduled task (outside of my binder stream functions). Trying to access the store with the InteractiveQueryService throws an `UnknownStateStoreException`.\r\n\r\nThe only way I&#39;ve found to do this is to manually register the KafkaStream object as a Bean :\r\n\r\n```java\r\n@Bean\r\npublic StreamsBuilderFactoryBeanCustomizer customizer(\r\n    GenericApplicationContext applicationContext) {\r\n\r\n    return fb -&gt; {\r\n        try {\r\n            final StreamsBuilder streamsBuilder = fb.getObject();\r\n            streamsBuilder.addGlobalStore(...);\r\n            applicationContext.registerBean(\r\n                MY_BEAN_NAME, KafkaStreams.class, fb::getKafkaStreams);\r\n        }\r\n        catch (Exception e) { ... }\r\n    };\r\n}\r\n```\r\n\r\nAnd then later in my Scheduled task retrieve the KafkaStreams Bean from the ApplicationContext\r\n\r\n```java\r\n@Scheduled\r\npublic void myTask() {\r\n  var ks = ((KafkaStreams) applicationContext.getBean(MY_BEAN_NAME));\r\n    var myGKT =\r\n        ks.store(\r\n            StoreQueryParameters.fromNameAndType(\r\n                MY_STORE_NAME, QueryableStoreTypes.keyValueStore()));\r\n```\r\n\r\nThis seems very round-about. How are you intended to access a GKT in the latest version of Kafka Streams Binder?\r\n\r\n  [1]: https://stackoverflow.com/questions/77019792/globalktable-as-queryablestore-with-kafka-streams-binder","title":"Kafka Streams Binder: Accessing a Global State Store","body":"<p>Related to <a href=\"https://stackoverflow.com/questions/77019792/globalktable-as-queryablestore-with-kafka-streams-binder\">this question</a>:\nI'm using <code>spring-boot-starter-parent</code> version <code>3.1.2</code> and <code>spring-cloud-stream-binder-kafka-streams</code> version <code>4.0.3</code></p>\n<p>I've created a GlobalKTable in with the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic StreamsBuilderFactoryBeanCustomizer customizer() {\n    return fb -&gt; {\n        try {\n            final StreamsBuilder streamsBuilder = fb.getObject();\n            streamsBuilder.addGlobalStore(...);\n        }\n        catch (Exception e) { ... }\n    };\n}\n</code></pre>\n<p>However I need to access this GKT from a scheduled task (outside of my binder stream functions). Trying to access the store with the InteractiveQueryService throws an <code>UnknownStateStoreException</code>.</p>\n<p>The only way I've found to do this is to manually register the KafkaStream object as a Bean :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic StreamsBuilderFactoryBeanCustomizer customizer(\n    GenericApplicationContext applicationContext) {\n\n    return fb -&gt; {\n        try {\n            final StreamsBuilder streamsBuilder = fb.getObject();\n            streamsBuilder.addGlobalStore(...);\n            applicationContext.registerBean(\n                MY_BEAN_NAME, KafkaStreams.class, fb::getKafkaStreams);\n        }\n        catch (Exception e) { ... }\n    };\n}\n</code></pre>\n<p>And then later in my Scheduled task retrieve the KafkaStreams Bean from the ApplicationContext</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Scheduled\npublic void myTask() {\n  var ks = ((KafkaStreams) applicationContext.getBean(MY_BEAN_NAME));\n    var myGKT =\n        ks.store(\n            StoreQueryParameters.fromNameAndType(\n                MY_STORE_NAME, QueryableStoreTypes.keyValueStore()));\n</code></pre>\n<p>This seems very round-about. How are you intended to access a GKT in the latest version of Kafka Streams Binder?</p>\n"},{"tags":["java","maven","spring-mvc","pom.xml","packaging"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":1,"creation_date":1694532213,"post_id":77090539,"comment_id":135901940,"body_markdown":"Please, do not post snapshots of code and read https://stackoverflow.com/help/how-to-ask","body":"Please, do not post snapshots of code and read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"},{"owner":{"account_id":29423965,"reputation":1,"user_id":22545139,"display_name":"Koustav Chakraborty"},"score":0,"creation_date":1694534121,"post_id":77090539,"comment_id":135902357,"body_markdown":"@Pino when adding the code (pom.xml) it was giving error as if it&#39;s a spam.","body":"@Pino when adding the code (pom.xml) it was giving error as if it&#39;s a spam."}],"owner":{"account_id":29423965,"reputation":1,"user_id":22545139,"display_name":"Koustav Chakraborty"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694531958,"creation_date":1694531958,"question_id":77090539,"body_markdown":"I have a Java Spring MVC project. The pom.xml looks like below:\r\n\r\n[pom.xml snapshot](https://i.stack.imgur.com/7ECh8.png)\r\n\r\nIt is giving error at the line: \\&lt;packaging\\&gt;war\\&lt;/packaging\\&gt; as below:\r\n*There are no more files (org.apache.maven.plugins:maven-resources-plugin:2.5:resources:default-resources:process-resources)*\r\n\r\nMay I know how can I fix this error? I have never faced this error before.\r\n\r\n[Error Snapshot](https://i.stack.imgur.com/Hrg0M.png)\r\n\r\nI have tried cleaning, Maven update etc. but with no luck.\r\n\r\nWithout this error fixed, I am unable to build my project.","title":"Why am I getting &quot;There are no more files&quot; error in the line &quot;&lt;packaging&gt;war&lt;/packaging&gt;&quot; of my pom.xml?","body":"<p>I have a Java Spring MVC project. The pom.xml looks like below:</p>\n<p><a href=\"https://i.stack.imgur.com/7ECh8.png\" rel=\"nofollow noreferrer\">pom.xml snapshot</a></p>\n<p>It is giving error at the line: &lt;packaging&gt;war&lt;/packaging&gt; as below:\n<em>There are no more files (org.apache.maven.plugins:maven-resources-plugin:2.5:resources:default-resources:process-resources)</em></p>\n<p>May I know how can I fix this error? I have never faced this error before.</p>\n<p><a href=\"https://i.stack.imgur.com/Hrg0M.png\" rel=\"nofollow noreferrer\">Error Snapshot</a></p>\n<p>I have tried cleaning, Maven update etc. but with no luck.</p>\n<p>Without this error fixed, I am unable to build my project.</p>\n"},{"tags":["java","hibernate","database-migration","liquibase","flyway"],"answers":[{"comments":[{"owner":{"account_id":1327380,"reputation":1768,"user_id":1271937,"accept_rate":75,"display_name":"Oliver Jan Krylow"},"score":0,"creation_date":1509087987,"post_id":46957613,"comment_id":80885931,"body_markdown":"Thank you a lot for taking the time to share your experience!","body":"Thank you a lot for taking the time to share your experience!"},{"owner":{"account_id":1327380,"reputation":1768,"user_id":1271937,"accept_rate":75,"display_name":"Oliver Jan Krylow"},"score":0,"creation_date":1509088701,"post_id":46957613,"comment_id":80886262,"body_markdown":"How do/did you handle more sophisticated data transforms? E.g. transforming table values containing XML or changing data types?\nI am unsure if you understood this correctly; The goal is not to migrate from a legacy SQL Server to some other. But to simultaneously support multiple DBs. Sorry if this was already clear to you.","body":"How do/did you handle more sophisticated data transforms? E.g. transforming table values containing XML or changing data types? I am unsure if you understood this correctly; The goal is not to migrate from a legacy SQL Server to some other. But to simultaneously support multiple DBs. Sorry if this was already clear to you."},{"owner":{"account_id":1291748,"reputation":437,"user_id":1243722,"accept_rate":83,"display_name":"tfecw"},"score":0,"creation_date":1509110236,"post_id":46957613,"comment_id":80899380,"body_markdown":"You&#39;d handle the more sophisticated data transforms in a tool like liquibase or flyway the same way you&#39;d do it in sql.  The core of those tools are just a list of sql migrations run in a specific order.  Changing a datatype might look like \n1. create new column with desired type\n2. migrate data from old column/type into new column\n3. clean up old column","body":"You&#39;d handle the more sophisticated data transforms in a tool like liquibase or flyway the same way you&#39;d do it in sql.  The core of those tools are just a list of sql migrations run in a specific order.  Changing a datatype might look like  1. create new column with desired type 2. migrate data from old column/type into new column 3. clean up old column"},{"owner":{"account_id":1291748,"reputation":437,"user_id":1243722,"accept_rate":83,"display_name":"tfecw"},"score":0,"creation_date":1509110405,"post_id":46957613,"comment_id":80899497,"body_markdown":"As an aside, doing some of this stuff is very complex in a running system.  This [book](https://www.amazon.com/Refactoring-Databases-Evolutionary-paperback-Addison-Wesley/dp/0321774515/ref=sr_1_1?ie=UTF8&amp;qid=1509110193&amp;sr=8-1&amp;keywords=refactoring+databases) may be of use to you","body":"As an aside, doing some of this stuff is very complex in a running system.  This <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321774515\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">book</a> may be of use to you"}],"tags":[],"owner":{"account_id":1291748,"reputation":437,"user_id":1243722,"accept_rate":83,"display_name":"tfecw"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1509029779,"creation_date":1509029779,"answer_id":46957613,"question_id":46956753,"body_markdown":"Let&#39;s break it down a little bit. You&#39;re right in that this is largely opinion based, but here&#39;s what I&#39;ve noticed in my experiences. \r\n\r\n&gt; Liquibase and Flyway are mainly concerned with schema migration and data migration is left as an exercise for the reader?\r\n\r\nYou can do data migration with liquibase and flyway. It&#39;s something I&#39;ve done pretty often.  Take the example where I want to split a User table into User and Address tables. I&#39;d write a migration script, which is basically just a sql file, to create the new Address table and the copy all the relevant data into it.  \r\n\r\n&gt;in order for Flyway to support multiple, different databases, one needs to duplicate the migrations scripts per database?\r\n\r\nPossibly, flyway and liquibase are better thought of as database versioning tools. If my app needs version 10 of the database, these tools would help me get to that point.  Again, the migration scripts are just basic .sql files. If you&#39;re using some mysql specific functions then those will just go in the migration script and they wouldn&#39;t work on a sql server\r\n\r\n&gt; by and large, the problem of database independent data migration remains unresolved in enterprise Java?\r\n\r\nEh, I&#39;m not sure about this one. I agree its a problem, but in practice it&#39;s not a huge one. For the past 8+ years, I&#39;ve only written ansi sql. It should be portable everywhere.  So in theory, we can lift those applications on to a different database.  JPA and the various implementations help with those differences.  Depending on how your project was built, say an application that has all of its business logic in implementation specific sql functions, then it&#39;s going to be a headache.  If you&#39;re using the database for CRUD, and I&#39;d argue that&#39;s all you should be using it for, then it&#39;s not a huge deal. \r\n\r\nSo all that said, I think you might have the wrong idea about flyway and liquibase. Like i said earlier, they aren&#39;t really &#39;migration tools&#39; so much as they are database versioning tools.  With a list of specific sql migration scripts that are ordered, i can guarantee the state of my database at any version.  I&#39;m not sure these are tools that I&#39;d use to &#39;migrate&#39; a legacy SQL Server based application into a PostGres based application.  ","title":"database independent data migration","body":"<p>Let's break it down a little bit. You're right in that this is largely opinion based, but here's what I've noticed in my experiences. </p>\n\n<blockquote>\n  <p>Liquibase and Flyway are mainly concerned with schema migration and data migration is left as an exercise for the reader?</p>\n</blockquote>\n\n<p>You can do data migration with liquibase and flyway. It's something I've done pretty often.  Take the example where I want to split a User table into User and Address tables. I'd write a migration script, which is basically just a sql file, to create the new Address table and the copy all the relevant data into it.  </p>\n\n<blockquote>\n  <p>in order for Flyway to support multiple, different databases, one needs to duplicate the migrations scripts per database?</p>\n</blockquote>\n\n<p>Possibly, flyway and liquibase are better thought of as database versioning tools. If my app needs version 10 of the database, these tools would help me get to that point.  Again, the migration scripts are just basic .sql files. If you're using some mysql specific functions then those will just go in the migration script and they wouldn't work on a sql server</p>\n\n<blockquote>\n  <p>by and large, the problem of database independent data migration remains unresolved in enterprise Java?</p>\n</blockquote>\n\n<p>Eh, I'm not sure about this one. I agree its a problem, but in practice it's not a huge one. For the past 8+ years, I've only written ansi sql. It should be portable everywhere.  So in theory, we can lift those applications on to a different database.  JPA and the various implementations help with those differences.  Depending on how your project was built, say an application that has all of its business logic in implementation specific sql functions, then it's going to be a headache.  If you're using the database for CRUD, and I'd argue that's all you should be using it for, then it's not a huge deal. </p>\n\n<p>So all that said, I think you might have the wrong idea about flyway and liquibase. Like i said earlier, they aren't really 'migration tools' so much as they are database versioning tools.  With a list of specific sql migration scripts that are ordered, i can guarantee the state of my database at any version.  I'm not sure these are tools that I'd use to 'migrate' a legacy SQL Server based application into a PostGres based application.  </p>\n"}],"owner":{"account_id":1327380,"reputation":1768,"user_id":1271937,"accept_rate":75,"display_name":"Oliver Jan Krylow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2566,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"closed_date":1694540092,"answer_count":1,"score":8,"last_activity_date":1694531658,"creation_date":1509027406,"question_id":46956753,"body_markdown":"My goal is to enable schema and data migration for an existing application.\r\n\r\nThis kind of question seems to have been asked many times, however with different requirements and circumstances as mine, I think.\r\n\r\nSince I am inexperienced in this domain, allow me to lay out the architecture of the app and my assumptions first.\r\n\r\n## Architecture\r\n\r\nThe app is a multi-user, enterprise desktop application with a backend server that can persist to any major DB (MySql, Postgresql, SQL Server, Oracle DB, etc). It is assumed the DB is on-premise and maintained by our clients.\r\n\r\nThe tech stack used is a fairly common Hibernate+Spring+RMI/JMS-Combo.\r\n\r\nCurrently, migrations are done by the server in the following way:\r\n\r\n* On server start it checks for the latest expected schema version\r\n* If larger than the current version, start migration to next version until current==latest:\r\n  1. Create new database\r\n  1. Load (whole) latest schema (SQL script with a lot of `CREATE TABLE ...`)\r\n  1. Migrate data (in Java classes using 2 JDBC-Connections to old and new schema)\r\n  1. Load (all) latest constraints (SQL script with a lot of `ALTER TABLE ...`)\r\n  \r\n\r\nThis migration is slow and forward-only. But it is simple. The problem is, that until now the schema scripts and the queries in the data migrations have been using MySQL-syntax and features.\r\n\r\nNote that by __migrate data__ I mean: the backend server copies the data from the old schema to the new one, transforming it if necessary.\r\nAlso, the migration process starts automatically on-premise of our clients. Meaning, we only have control over the JDBC connection, but no direct access to the database nor knowledge about the specific database being used (MySQL, SQL Server,...).\r\n\r\nThe goal is to either replace or augment this migration scheme with a database independent one.\r\n\r\n## Assumptions and research\r\n\r\nStackOverflow [1][1] [2][2] [3][3] [4][4] [5][5] [6][6] [7][7]: Answers state to use Hibernate&#39;s inbuilt feature. However, the docs state that this is not [production ready](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production). Also, AFAICT, all answers are concerned with **schema migration only**.\r\n\r\n[1]: https://stackoverflow.com/questions/24229529/managing-database-schemas-during-the-lifecycle-of-an-application-using-flyway-to\r\n[2]: https://stackoverflow.com/questions/131020/migrations-for-java\r\n[3]: https://stackoverflow.com/questions/10664553/flyway-liquibase-for-database-structure-and-dbunit-for-database-inserts\r\n[4]: https://stackoverflow.com/questions/1142447/db-migrate-hibernate-jpa-hbm2ddl-diff-tools?rq=1\r\n[5]: https://stackoverflow.com/questions/14482644/can-flyway-or-liquibase-generate-an-update-script-instead-of-updating-the-databa?rq=1\r\n[6]: https://stackoverflow.com/questions/37385823/liquibase-vs-flyway-which-one-to-use?rq=1\r\n[7]: https://stackoverflow.com/questions/16721166/how-does-flyway-liquibase-handle-destructive-upgrades-in-service?rq=1\r\n\r\n[Liquibase](http://www.liquibase.org/index.html): Uses a custom DSL (in XML/JSON/YAML/etc) to allow for database independent **schema migration only**.\r\n\r\n[DBUnit](http://dbunit.sourceforge.net/): Uses custom XML-DSL to capture snapshots of states of databases. **Can not recreate a snapshot of schema version 1 to version 2**.\r\n\r\n[flyway](https://flywaydb.org/documentation/): In principle same as Liquibase. But **is not database independent** because SQL-Scripts are used for migrations.\r\n\r\n[JOOQ](http://www.jooq.org/): A database independent Query-DSL in Java on top of JDBC. Comparable to Criteria API but without the drawbacks of JPA. Should in principle allow for database independent data migration, however, does **not** help with **schema migration**.\r\n\r\nJPA-Query languages like HQL, JPQL, Criteria API are not sufficient because\r\n\r\n1. One cannot reference tables not mapped by the entity manager. E.g. join tables, metadata and audit tables.\r\n2. A copy of all versions of the Entity classes needs to be kept around for the mapping.\r\n\r\n## Question\r\n\r\nI realize, that as this question stands now, it will be dismissed as opinion-based.\r\n\r\nHowever, I am not necessarily looking for specific solutions to this problem ( I doubt there exists a clear solution for such a complex problem space ) but rather to validate my assumptions.\r\n\r\nNamely, is it true, that\r\n\r\n* Liquibase and Flyway are mainly concerned with schema migration and data migration is left as an exercise for the reader?\r\n* in order for Flyway to support multiple, different databases, one needs to duplicate the migrations scripts per database?\r\n* by and large, the problem of __database independent data migration__ remains unresolved in enterprise Java?\r\n\r\nEven if I was to combine Liquibase/Flyway with JOOQ, I do not see how to perform a data migration, because Liquibase/Flyway migrate databases __in place__. The old database gets destroyed and with it the opportunity to transform the old data to the new schema.\r\n\r\nThanks for your attention!\r\n","title":"database independent data migration","body":"<p>My goal is to enable schema and data migration for an existing application.</p>\n\n<p>This kind of question seems to have been asked many times, however with different requirements and circumstances as mine, I think.</p>\n\n<p>Since I am inexperienced in this domain, allow me to lay out the architecture of the app and my assumptions first.</p>\n\n<h2>Architecture</h2>\n\n<p>The app is a multi-user, enterprise desktop application with a backend server that can persist to any major DB (MySql, Postgresql, SQL Server, Oracle DB, etc). It is assumed the DB is on-premise and maintained by our clients.</p>\n\n<p>The tech stack used is a fairly common Hibernate+Spring+RMI/JMS-Combo.</p>\n\n<p>Currently, migrations are done by the server in the following way:</p>\n\n<ul>\n<li>On server start it checks for the latest expected schema version</li>\n<li>If larger than the current version, start migration to next version until current==latest:\n\n<ol>\n<li>Create new database</li>\n<li>Load (whole) latest schema (SQL script with a lot of <code>CREATE TABLE ...</code>)</li>\n<li>Migrate data (in Java classes using 2 JDBC-Connections to old and new schema)</li>\n<li>Load (all) latest constraints (SQL script with a lot of <code>ALTER TABLE ...</code>)</li>\n</ol></li>\n</ul>\n\n<p>This migration is slow and forward-only. But it is simple. The problem is, that until now the schema scripts and the queries in the data migrations have been using MySQL-syntax and features.</p>\n\n<p>Note that by <strong>migrate data</strong> I mean: the backend server copies the data from the old schema to the new one, transforming it if necessary.\nAlso, the migration process starts automatically on-premise of our clients. Meaning, we only have control over the JDBC connection, but no direct access to the database nor knowledge about the specific database being used (MySQL, SQL Server,...).</p>\n\n<p>The goal is to either replace or augment this migration scheme with a database independent one.</p>\n\n<h2>Assumptions and research</h2>\n\n<p>StackOverflow <a href=\"https://stackoverflow.com/questions/24229529/managing-database-schemas-during-the-lifecycle-of-an-application-using-flyway-to\">1</a> <a href=\"https://stackoverflow.com/questions/131020/migrations-for-java\">2</a> <a href=\"https://stackoverflow.com/questions/10664553/flyway-liquibase-for-database-structure-and-dbunit-for-database-inserts\">3</a> <a href=\"https://stackoverflow.com/questions/1142447/db-migrate-hibernate-jpa-hbm2ddl-diff-tools?rq=1\">4</a> <a href=\"https://stackoverflow.com/questions/14482644/can-flyway-or-liquibase-generate-an-update-script-instead-of-updating-the-databa?rq=1\">5</a> <a href=\"https://stackoverflow.com/questions/37385823/liquibase-vs-flyway-which-one-to-use?rq=1\">6</a> <a href=\"https://stackoverflow.com/questions/16721166/how-does-flyway-liquibase-handle-destructive-upgrades-in-service?rq=1\">7</a>: Answers state to use Hibernate's inbuilt feature. However, the docs state that this is not <a href=\"https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production\">production ready</a>. Also, AFAICT, all answers are concerned with <strong>schema migration only</strong>.</p>\n\n<p><a href=\"http://www.liquibase.org/index.html\" rel=\"noreferrer\">Liquibase</a>: Uses a custom DSL (in XML/JSON/YAML/etc) to allow for database independent <strong>schema migration only</strong>.</p>\n\n<p><a href=\"http://dbunit.sourceforge.net/\" rel=\"noreferrer\">DBUnit</a>: Uses custom XML-DSL to capture snapshots of states of databases. <strong>Can not recreate a snapshot of schema version 1 to version 2</strong>.</p>\n\n<p><a href=\"https://flywaydb.org/documentation/\" rel=\"noreferrer\">flyway</a>: In principle same as Liquibase. But <strong>is not database independent</strong> because SQL-Scripts are used for migrations.</p>\n\n<p><a href=\"http://www.jooq.org/\" rel=\"noreferrer\">JOOQ</a>: A database independent Query-DSL in Java on top of JDBC. Comparable to Criteria API but without the drawbacks of JPA. Should in principle allow for database independent data migration, however, does <strong>not</strong> help with <strong>schema migration</strong>.</p>\n\n<p>JPA-Query languages like HQL, JPQL, Criteria API are not sufficient because</p>\n\n<ol>\n<li>One cannot reference tables not mapped by the entity manager. E.g. join tables, metadata and audit tables.</li>\n<li>A copy of all versions of the Entity classes needs to be kept around for the mapping.</li>\n</ol>\n\n<h2>Question</h2>\n\n<p>I realize, that as this question stands now, it will be dismissed as opinion-based.</p>\n\n<p>However, I am not necessarily looking for specific solutions to this problem ( I doubt there exists a clear solution for such a complex problem space ) but rather to validate my assumptions.</p>\n\n<p>Namely, is it true, that</p>\n\n<ul>\n<li>Liquibase and Flyway are mainly concerned with schema migration and data migration is left as an exercise for the reader?</li>\n<li>in order for Flyway to support multiple, different databases, one needs to duplicate the migrations scripts per database?</li>\n<li>by and large, the problem of <strong>database independent data migration</strong> remains unresolved in enterprise Java?</li>\n</ul>\n\n<p>Even if I was to combine Liquibase/Flyway with JOOQ, I do not see how to perform a data migration, because Liquibase/Flyway migrate databases <strong>in place</strong>. The old database gets destroyed and with it the opportunity to transform the old data to the new schema.</p>\n\n<p>Thanks for your attention!</p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1694527265,"post_id":77089837,"comment_id":135900718,"body_markdown":"Can&#39;t be done.  You can create a parent project, the same way that spring-boot-starter-parent works, but it&#39;ll still have to bring in all the necessary dependencies.  There is no free lunch here.","body":"Can&#39;t be done.  You can create a parent project, the same way that spring-boot-starter-parent works, but it&#39;ll still have to bring in all the necessary dependencies.  There is no free lunch here."},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694527337,"post_id":77089837,"comment_id":135900740,"body_markdown":"But the 3 projects will still be under this parent and can&#39;t be deployed separately correct?","body":"But the 3 projects will still be under this parent and can&#39;t be deployed separately correct?"},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694527396,"post_id":77089837,"comment_id":135900755,"body_markdown":"The 3 projects are independent and don&#39;t want to put them under one parent project that requires to deploy every time the three modules","body":"The 3 projects are independent and don&#39;t want to put them under one parent project that requires to deploy every time the three modules"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1694527456,"post_id":77089837,"comment_id":135900763,"body_markdown":"No free lunch.  I can&#39;t help you.  Disk storage is cheap and plentiful.  The size of your WAR file shouldn&#39;t be a concern.  You&#39;re obsessed with the wrong problem.","body":"No free lunch.  I can&#39;t help you.  Disk storage is cheap and plentiful.  The size of your WAR file shouldn&#39;t be a concern.  You&#39;re obsessed with the wrong problem."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694530363,"post_id":77089837,"comment_id":135901474,"body_markdown":"Sure you can. If you run all applications on the same Tomcat instance, you can add those libraries to Tomcat itself, and they can be made available to the applications. Other application servers might have similar features.","body":"Sure you can. If you run all applications on the same Tomcat instance, you can add those libraries to Tomcat itself, and they can be made available to the applications. Other application servers might have similar features."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694530957,"post_id":77089837,"comment_id":135901635,"body_markdown":"@Jorn You could indeed add them to the server path introducing a whole new slew of issues with classloaders, class loading, singletons etc. etc. I&#39;m glad we moved away from that era.","body":"@Jorn You could indeed add them to the server path introducing a whole new slew of issues with classloaders, class loading, singletons etc. etc. I&#39;m glad we moved away from that era."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694531028,"post_id":77089837,"comment_id":135901656,"body_markdown":"@M.Deinum I didn&#39;t say it was a good idea. But it&#39;s an answer to the question, and proves that the &quot;no&quot; everyone else is giving just isn&#39;t true.","body":"@M.Deinum I didn&#39;t say it was a good idea. But it&#39;s an answer to the question, and proves that the &quot;no&quot; everyone else is giving just isn&#39;t true."},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694540380,"post_id":77089837,"comment_id":135903608,"body_markdown":"@Jorn what about the build of the project itself? if I remove these dependencies from the project it will have errors and will give errors while trying to generate the war","body":"@Jorn what about the build of the project itself? if I remove these dependencies from the project it will have errors and will give errors while trying to generate the war"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694551796,"post_id":77089837,"comment_id":135905631,"body_markdown":"Correct, you will need those deps while developing. There&#39;s no changing that.","body":"Correct, you will need those deps while developing. There&#39;s no changing that."}],"answers":[{"comments":[{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694528271,"post_id":77089913,"comment_id":135900950,"body_markdown":"you mean the project with the common dependencies make it a JAR and make the projects read it from a path in the server? but what about building the project? it will find the jars missing","body":"you mean the project with the common dependencies make it a JAR and make the projects read it from a path in the server? but what about building the project? it will find the jars missing"},{"owner":{"account_id":183306,"reputation":9436,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"score":0,"creation_date":1694528442,"post_id":77089913,"comment_id":135900985,"body_markdown":"No, you have to put only the common dependencies in a shared folder, then reference them in your classpath.","body":"No, you have to put only the common dependencies in a shared folder, then reference them in your classpath."},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694868859,"post_id":77089913,"comment_id":135949623,"body_markdown":"Do you mean &quot;provided&quot; scope? I make a maven project with the common dependencies and extract it as a library and deploy it on weblogic server. And when I make the scope &quot;provided&quot; in one of the dependency in my project, that is in the created library, it is still not seen by my project, what I am missing?","body":"Do you mean &quot;provided&quot; scope? I make a maven project with the common dependencies and extract it as a library and deploy it on weblogic server. And when I make the scope &quot;provided&quot; in one of the dependency in my project, that is in the created library, it is still not seen by my project, what I am missing?"}],"tags":[],"owner":{"account_id":183306,"reputation":9436,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694528810,"creation_date":1694527696,"answer_id":77089913,"question_id":77089837,"body_markdown":"The only dirty trick that I can guess is:\r\n\r\n1. Encapsulate the common logic into libraries.\r\n2. Put them on a shared server folder.\r\n3. Add that folder to each application classpath (reference them in maven by the `system` scope).\r\n","title":"How to make a common spring boot project has dependencies for other 3 separate spring boot projects?","body":"<p>The only dirty trick that I can guess is:</p>\n<ol>\n<li>Encapsulate the common logic into libraries.</li>\n<li>Put them on a shared server folder.</li>\n<li>Add that folder to each application classpath (reference them in maven by the <code>system</code> scope).</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694647273,"post_id":77090484,"comment_id":135920368,"body_markdown":"I read about it but when I try to deploy the jar (not war as usual which includes all dependencies) on weblogic server it gives error as I think it doesn&#39;t have the WEB-INF folder, so is there something missing?","body":"I read about it but when I try to deploy the jar (not war as usual which includes all dependencies) on weblogic server it gives error as I think it doesn&#39;t have the WEB-INF folder, so is there something missing?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694671785,"post_id":77090484,"comment_id":135922379,"body_markdown":"You cannot use this with a war only an executable jar. If you are on weblogic (first I&#39;m sorry for you) there isn&#39;t much you can do.","body":"You cannot use this with a war only an executable jar. If you are on weblogic (first I&#39;m sorry for you) there isn&#39;t much you can do."},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694694883,"post_id":77090484,"comment_id":135926934,"body_markdown":"so the thin jar can&#39;t be deployed on weblogic server correct?","body":"so the thin jar can&#39;t be deployed on weblogic server correct?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694697690,"post_id":77090484,"comment_id":135927606,"body_markdown":"Correct. As you cannot deploy a jar file.","body":"Correct. As you cannot deploy a jar file."},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694700294,"post_id":77090484,"comment_id":135928259,"body_markdown":"Is a jar file (which is a thin jar in my case) can be deployed on other servers not weblogic?","body":"Is a jar file (which is a thin jar in my case) can be deployed on other servers not weblogic?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694700993,"post_id":77090484,"comment_id":135928433,"body_markdown":"No. Only war and ear. Also why use weblogic instead of just running the jar?","body":"No. Only war and ear. Also why use weblogic instead of just running the jar?"},{"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"score":0,"creation_date":1694706366,"post_id":77090484,"comment_id":135929699,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255275/discussion-between-programmer-and-m-deinum).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255275/discussion-between-programmer-and-m-deinum\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694531523,"creation_date":1694531523,"answer_id":77090484,"question_id":77089837,"body_markdown":"You can use the [Spring Boot Thin Launcher][1]. With it you can create a jar that will only contain your application classes. When started, the first time it will download the needed dependencies into a directory and add them to the classpath. \r\n\r\nNow when you have multiple applications which run on the same server they could re-use the same repository for the jars, which would download them only once. \r\n\r\n**NOTE:** This is an experimental feature so YMMV. \r\n\r\n**NOTE2:** Generally the size of the archive shouldn&#39;t matter, as disk-space is cheap nowadays. Focussing on other parts for optimizing developer experience will have a better ROI then this (probably). \r\n\r\n[1]: https://github.com/spring-projects-experimental/spring-boot-thin-launcher","title":"How to make a common spring boot project has dependencies for other 3 separate spring boot projects?","body":"<p>You can use the <a href=\"https://github.com/spring-projects-experimental/spring-boot-thin-launcher\" rel=\"nofollow noreferrer\">Spring Boot Thin Launcher</a>. With it you can create a jar that will only contain your application classes. When started, the first time it will download the needed dependencies into a directory and add them to the classpath.</p>\n<p>Now when you have multiple applications which run on the same server they could re-use the same repository for the jars, which would download them only once.</p>\n<p><strong>NOTE:</strong> This is an experimental feature so YMMV.</p>\n<p><strong>NOTE2:</strong> Generally the size of the archive shouldn't matter, as disk-space is cheap nowadays. Focussing on other parts for optimizing developer experience will have a better ROI then this (probably).</p>\n"}],"owner":{"account_id":15923587,"reputation":83,"user_id":11489879,"display_name":"Programmer"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694531523,"creation_date":1694527146,"question_id":77089837,"body_markdown":"If I have 3 independent separate spring boot projects and they all have many common dependencies which leads to large size of each war.\r\n\r\nIs there a method to make another separate project that has all these common dependencies and the projects points to this project without making it a jar as this will still make the size large of each war?","title":"How to make a common spring boot project has dependencies for other 3 separate spring boot projects?","body":"<p>If I have 3 independent separate spring boot projects and they all have many common dependencies which leads to large size of each war.</p>\n<p>Is there a method to make another separate project that has all these common dependencies and the projects points to this project without making it a jar as this will still make the size large of each war?</p>\n"},{"tags":["java","intellij-idea","getter-setter"],"answers":[{"comments":[{"owner":{"account_id":15188,"reputation":15038,"user_id":31818,"display_name":"seh"},"score":0,"creation_date":1259003625,"post_id":1785287,"comment_id":1672097,"body_markdown":"Did you try unchecking the related &quot;Line breaks&quot; box in the &quot;Keep When Reformatting&quot; group?","body":"Did you try unchecking the related &quot;Line breaks&quot; box in the &quot;Keep When Reformatting&quot; group?"},{"owner":{"account_id":14448,"reputation":5643,"user_id":29734,"accept_rate":77,"display_name":"Chris Kessel"},"score":4,"creation_date":1259015467,"post_id":1785287,"comment_id":1673417,"body_markdown":"The one-line setting tells IntelliJ to leave it that way on a reformat, but not to create it that way.","body":"The one-line setting tells IntelliJ to leave it that way on a reformat, but not to create it that way."},{"owner":{"account_id":235670,"reputation":1095,"user_id":502648,"display_name":"bowman han"},"score":0,"creation_date":1464926575,"post_id":1785287,"comment_id":62695654,"body_markdown":"is this a programing language? or could you give us some links or references?","body":"is this a programing language? or could you give us some links or references?"}],"tags":[],"owner":{"account_id":69502,"reputation":4999,"user_id":202160,"display_name":"Noel Ang"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1259003207,"creation_date":1259003207,"answer_id":1785287,"question_id":1785244,"body_markdown":"You didn&#39;t mention what version of IDEA you are using, so I assume the recent 8 or 9.\r\n\r\nCheck your Code Style settings, under &quot;Alignment and Braces&quot;. You should find a &quot;Simple methods in one line&quot; option there.","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>You didn't mention what version of IDEA you are using, so I assume the recent 8 or 9.</p>\n\n<p>Check your Code Style settings, under \"Alignment and Braces\". You should find a \"Simple methods in one line\" option there.</p>\n"},{"comments":[{"owner":{"account_id":228100,"reputation":376,"user_id":490189,"display_name":"werner"},"score":7,"creation_date":1470301962,"post_id":1785341,"comment_id":64898041,"body_markdown":"There are now (I use Ultimate 2016) - see answers below","body":"There are now (I use Ultimate 2016) - see answers below"}],"tags":[],"owner":{"account_id":59883,"reputation":9527,"user_id":179057,"accept_rate":100,"display_name":"David Robles"},"comment_count":1,"down_vote_count":2,"up_vote_count":13,"is_accepted":true,"score":11,"last_activity_date":1405681330,"creation_date":1259003835,"answer_id":1785341,"question_id":1785244,"body_markdown":"There are no templates neither for getters nor for equals/hashcode. These are hardcoded in IDEA.\r\n\r\n[Source][1]\r\n\r\nYou can see that in this [IntelliJ Wishlist][2]\r\n\r\n\r\n  [1]: http://www.jetbrains.net/devnet/thread/182697;jsessionid=1FC4A4DFB95610F09D114E0A6F2C5CE5\r\n  [2]: http://plugins.intellij.net/wishlist/show?pr=&amp;wid=99","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>There are no templates neither for getters nor for equals/hashcode. These are hardcoded in IDEA.</p>\n\n<p><a href=\"http://www.jetbrains.net/devnet/thread/182697;jsessionid=1FC4A4DFB95610F09D114E0A6F2C5CE5\" rel=\"nofollow noreferrer\">Source</a></p>\n\n<p>You can see that in this <a href=\"http://plugins.intellij.net/wishlist/show?pr=&amp;wid=99\" rel=\"nofollow noreferrer\">IntelliJ Wishlist</a></p>\n"},{"comments":[{"owner":{"account_id":2313596,"reputation":1534,"user_id":2031150,"accept_rate":92,"display_name":"Jack J"},"score":1,"creation_date":1563850876,"post_id":1887457,"comment_id":100827122,"body_markdown":"As of 2019.1, this feature can be found in Settings -&gt; Editor -&gt; General -&gt; Code Folding.  Simple property accessors is in the third checkbox cluster.","body":"As of 2019.1, this feature can be found in Settings -&gt; Editor -&gt; General -&gt; Code Folding.  Simple property accessors is in the third checkbox cluster."}],"tags":[],"owner":{"account_id":4774,"reputation":26513,"user_id":7345,"accept_rate":81,"display_name":"mindas"},"comment_count":1,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1260531000,"creation_date":1260531000,"answer_id":1887457,"question_id":1785244,"body_markdown":"I don&#39;t know why you want to do this, presumably for saving visual space. If so, just use IntelliJ&#39;s feature to fold trivial getters/setters and forget about how lines does it take.\r\nFolding feature can be found in  \r\n\r\nSettings -&gt; IDE Settings -&gt; Editor -&gt; Code Folding -&gt; Show code folding outline -&gt; Simple property accessors","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>I don't know why you want to do this, presumably for saving visual space. If so, just use IntelliJ's feature to fold trivial getters/setters and forget about how lines does it take.\nFolding feature can be found in  </p>\n\n<p>Settings -> IDE Settings -> Editor -> Code Folding -> Show code folding outline -> Simple property accessors</p>\n"},{"comments":[{"owner":{"account_id":568701,"reputation":1020,"user_id":209858,"accept_rate":20,"display_name":"Gervase"},"score":0,"creation_date":1428676662,"post_id":29373366,"comment_id":47278038,"body_markdown":"This looks promising but I am not seeing a Getter template button  to the top of this dialog. Using 14.0.2.","body":"This looks promising but I am not seeing a Getter template button  to the top of this dialog. Using 14.0.2."},{"owner":{"account_id":24367,"reputation":443,"user_id":61941,"display_name":"Konstantin Savelev"},"score":2,"creation_date":1430120114,"post_id":29373366,"comment_id":47903069,"body_markdown":"Worked for me, but to be precise last part of the template should look like:\n\n    `${name}() {  return $field.name; }`\n\nin one line","body":"Worked for me, but to be precise last part of the template should look like:      <code>${name}() {  return $field.name; }</code>  in one line"},{"owner":{"account_id":228100,"reputation":376,"user_id":490189,"display_name":"werner"},"score":7,"creation_date":1470302088,"post_id":29373366,"comment_id":64898133,"body_markdown":"Make sure to check also Settings/code Style/Java/Simple blocks in one line and Simple Methods in one line. Otherwise, the auto-formatting will put the lines right back in and you don&#39;t see any effect after modifying the template...","body":"Make sure to check also Settings/code Style/Java/Simple blocks in one line and Simple Methods in one line. Otherwise, the auto-formatting will put the lines right back in and you don&#39;t see any effect after modifying the template..."},{"owner":{"display_name":"user810731"},"score":0,"creation_date":1551550313,"post_id":29373366,"comment_id":96684060,"body_markdown":"This applies to Android Studio as well.","body":"This applies to Android Studio as well."}],"tags":[],"owner":{"account_id":360167,"reputation":728,"user_id":702010,"display_name":"Alex G"},"comment_count":4,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1484557240,"creation_date":1427818330,"answer_id":29373366,"question_id":1785244,"body_markdown":"I&#39;m using IntelliJ IDEA 14.1.0 and you can customise this behaviour.\r\n\r\nJust use the &quot;Generate...&quot; option, or use &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Insert&lt;/kbd&gt; shortcut, and select &quot;Getter and Setter&quot;.\r\n\r\nIn the &quot;Select Fields&quot; window that gets opened, you have the &quot;Getter Template&quot; option at the top. Use the &quot;...&quot; button next to the dropdown, to edit the template.\r\n\r\nSelect &quot;IntelliJ Default&quot; and click the &quot;Copy&quot; button to create a new one named &quot;AlwayStartWithGet&quot;, which you can edit.\r\n\r\nJust remove the following section:\r\n\r\n    #if ($field.boolean)\r\n      #if ($StringUtil.startsWithIgnoreCase($name, &#39;is&#39;))\r\n        #set($name = $StringUtil.decapitalize($name))\r\n      #else\r\n        is##\r\n    #end\r\n    #else\r\n      get##\r\n    #end\r\n\r\nAnd replace it with a simple\r\n\r\n    get##\r\n\r\nYou should be left with:\r\n\r\n    public ##\r\n    #if($field.modifierStatic)\r\n      static ##\r\n    #end\r\n    $field.type ##\r\n    #set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\r\n    get##\r\n    ${name}() {\r\n      return $field.name;\r\n    }\r\n\r\nNow you can use the custom template when generating code, by selecting it in the getter template dropdown.","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>I'm using IntelliJ IDEA 14.1.0 and you can customise this behaviour.</p>\n\n<p>Just use the \"Generate...\" option, or use <kbd>Alt</kbd>+<kbd>Insert</kbd> shortcut, and select \"Getter and Setter\".</p>\n\n<p>In the \"Select Fields\" window that gets opened, you have the \"Getter Template\" option at the top. Use the \"...\" button next to the dropdown, to edit the template.</p>\n\n<p>Select \"IntelliJ Default\" and click the \"Copy\" button to create a new one named \"AlwayStartWithGet\", which you can edit.</p>\n\n<p>Just remove the following section:</p>\n\n<pre><code>#if ($field.boolean)\n  #if ($StringUtil.startsWithIgnoreCase($name, 'is'))\n    #set($name = $StringUtil.decapitalize($name))\n  #else\n    is##\n#end\n#else\n  get##\n#end\n</code></pre>\n\n<p>And replace it with a simple</p>\n\n<pre><code>get##\n</code></pre>\n\n<p>You should be left with:</p>\n\n<pre><code>public ##\n#if($field.modifierStatic)\n  static ##\n#end\n$field.type ##\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\nget##\n${name}() {\n  return $field.name;\n}\n</code></pre>\n\n<p>Now you can use the custom template when generating code, by selecting it in the getter template dropdown.</p>\n"},{"comments":[{"owner":{"account_id":2254844,"reputation":604,"user_id":1986241,"accept_rate":50,"display_name":"Attacktive"},"score":0,"creation_date":1527563323,"post_id":44919886,"comment_id":88160650,"body_markdown":"Ah, so `##` here is like ``\\`` in C++, I guess?","body":"Ah, so <code>##</code> here is like <code>\\</code> in C++, I guess?"}],"tags":[],"owner":{"account_id":1360311,"reputation":16577,"user_id":1297812,"display_name":"laffuste"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1510021482,"creation_date":1499240409,"answer_id":44919886,"question_id":1785244,"body_markdown":"For Idea 2016.\r\n\r\n\r\n**Getter template**\r\n\r\nMerge the last 3 lines into a single line:\r\n\r\n    ${name}() { return $field.name; }\r\n\r\n\r\n**Setter template**\r\n\r\nAdd double hash (without a space) at the end of the longest line:\r\n\r\n    [...] ($field.type, $paramName) {##\r\n\r\nMerge the last 2 lines into a single line:\r\n\r\n    $field.name = $paramName; }\r\n\r\n*Note: as commented by @mindas, you will probably want instead the visual auto folding that doesn&#39;t get versioned.*","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>For Idea 2016.</p>\n\n<p><strong>Getter template</strong></p>\n\n<p>Merge the last 3 lines into a single line:</p>\n\n<pre><code>${name}() { return $field.name; }\n</code></pre>\n\n<p><strong>Setter template</strong></p>\n\n<p>Add double hash (without a space) at the end of the longest line:</p>\n\n<pre><code>[...] ($field.type, $paramName) {##\n</code></pre>\n\n<p>Merge the last 2 lines into a single line:</p>\n\n<pre><code>$field.name = $paramName; }\n</code></pre>\n\n<p><em>Note: as commented by @mindas, you will probably want instead the visual auto folding that doesn't get versioned.</em></p>\n"},{"comments":[{"owner":{"account_id":10971167,"reputation":848,"user_id":8062444,"accept_rate":100,"display_name":"TonyStark4ever"},"score":0,"creation_date":1590203871,"post_id":57156375,"comment_id":109599409,"body_markdown":"It appears this is necessary for IntelliJ IDEA 2020.1.","body":"It appears this is necessary for IntelliJ IDEA 2020.1."},{"owner":{"account_id":2313596,"reputation":1534,"user_id":2031150,"accept_rate":92,"display_name":"Jack J"},"score":1,"creation_date":1645467284,"post_id":57156375,"comment_id":125874227,"body_markdown":"When trying to do this again, I had to go over answers provided by Alex G and laffuste.  The two of them combined have a nearly complete answer, but not something I could just copy-paste.  I provided code here hoping it can be pasted in the correct location without tinkering.","body":"When trying to do this again, I had to go over answers provided by Alex G and laffuste.  The two of them combined have a nearly complete answer, but not something I could just copy-paste.  I provided code here hoping it can be pasted in the correct location without tinkering."}],"tags":[],"owner":{"account_id":2313596,"reputation":1534,"user_id":2031150,"accept_rate":92,"display_name":"Jack J"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1645467011,"creation_date":1563853243,"answer_id":57156375,"question_id":1785244,"body_markdown":"Alex G and laffuste provided answers that helped me, but even after you follow these instructions, IntelliJ may still automatically format your code.  To stop this from happening, go to Settings -&gt; Editor -&gt; Code Style -&gt; Java (or other language).  Click on the tab titled &quot;Wrapping and Braces&quot;.  Under the title &quot;Keep when reformatting&quot; click the checkbox next to &quot;Simple methods in one line&quot;.\r\n\r\nFor further brevity, you can eliminate the blank lines between the getter and setter methods.  To do this, click on the tab titled &quot;Blank Lines&quot;.  In the section titled &quot;Minimum Blank Lines&quot;, find the text box next to &quot;Around method&quot;.  Enter 0 in the text box.\r\n\r\n&lt;h3&gt;Get&lt;/h3&gt;\r\n\r\n    public ##\r\n    #if($field.modifierStatic)\r\n    static ##\r\n    #end\r\n    $field.type ##\r\n    #set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\r\n    get##\r\n    ${name}(){ return $field.name; }\r\n&lt;h3&gt;Set&lt;/h3&gt;\r\n\r\n    #set($paramName = $helper.getParamName($field, $project))\r\n    #if($field.modifierStatic)\r\n    static ##\r\n    #end\r\n    void set$StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project)))($field.type $paramName) { ##\r\n    #if ($field.name == $paramName)\r\n        #if (!$field.modifierStatic)\r\n        this.##\r\n        #else\r\n            $classname.##\r\n        #end\r\n    #end\r\n    $field.name = $paramName; }","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>Alex G and laffuste provided answers that helped me, but even after you follow these instructions, IntelliJ may still automatically format your code.  To stop this from happening, go to Settings -&gt; Editor -&gt; Code Style -&gt; Java (or other language).  Click on the tab titled &quot;Wrapping and Braces&quot;.  Under the title &quot;Keep when reformatting&quot; click the checkbox next to &quot;Simple methods in one line&quot;.</p>\n<p>For further brevity, you can eliminate the blank lines between the getter and setter methods.  To do this, click on the tab titled &quot;Blank Lines&quot;.  In the section titled &quot;Minimum Blank Lines&quot;, find the text box next to &quot;Around method&quot;.  Enter 0 in the text box.</p>\n<h3>Get</h3>\n<pre><code>public ##\n#if($field.modifierStatic)\nstatic ##\n#end\n$field.type ##\n#set($name = $StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project))))\nget##\n${name}(){ return $field.name; }\n</code></pre>\n<h3>Set</h3>\n<pre><code>#set($paramName = $helper.getParamName($field, $project))\n#if($field.modifierStatic)\nstatic ##\n#end\nvoid set$StringUtil.capitalizeWithJavaBeanConvention($StringUtil.sanitizeJavaIdentifier($helper.getPropertyName($field, $project)))($field.type $paramName) { ##\n#if ($field.name == $paramName)\n    #if (!$field.modifierStatic)\n    this.##\n    #else\n        $classname.##\n    #end\n#end\n$field.name = $paramName; }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954938,"reputation":491,"user_id":980423,"display_name":"aradil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694531328,"creation_date":1694531328,"answer_id":77090456,"question_id":1785244,"body_markdown":"Update for at least versions as new as 2023.1.2:\r\n\r\nYou&#39;ll need to also make sure that the following setting is also turned on:\r\n\r\n* Preferences &gt; Editor &gt; Code Style &gt; Java &gt; Spaces &gt; Within\r\n \t* Code Braces\r\n\r\nOtherwise the spaces between your curly braces will be formatted away.","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>Update for at least versions as new as 2023.1.2:</p>\n<p>You'll need to also make sure that the following setting is also turned on:</p>\n<ul>\n<li>Preferences &gt; Editor &gt; Code Style &gt; Java &gt; Spaces &gt; Within\n<ul>\n<li>Code Braces</li>\n</ul>\n</li>\n</ul>\n<p>Otherwise the spaces between your curly braces will be formatted away.</p>\n"}],"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21907,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":1785341,"answer_count":7,"score":35,"last_activity_date":1694531328,"creation_date":1259002750,"question_id":1785244,"body_markdown":"How can you get [IntelliJ][1] to generate getter/setters accessor methods on one line like this:\r\n\r\n    public String getAbc() { return abc; }\r\n\r\n… instead of multiple lines like this:\r\n\r\n    public String getAbc() {\r\n       return abc;\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IntelliJ_IDEA","title":"IntelliJ getter/setter format (single-line versus multi-line)","body":"<p>How can you get <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"noreferrer\">IntelliJ</a> to generate getter/setters accessor methods on one line like this:</p>\n\n<pre><code>public String getAbc() { return abc; }\n</code></pre>\n\n<p>… instead of multiple lines like this:</p>\n\n<pre><code>public String getAbc() {\n   return abc;\n}\n</code></pre>\n"},{"tags":["java","osgi","websphere-liberty","osgi-bundle","open-liberty"],"comments":[{"owner":{"account_id":13889153,"reputation":465,"user_id":10027577,"display_name":"KyleAure"},"score":1,"creation_date":1694529601,"post_id":77089936,"comment_id":135901286,"body_markdown":"If your feature is trying to perform a lookup by JNDI name of the DataSource prior to application server start using OSGi I do not think this will work as you cannot guarantee that the JNDI and JDBC features have been fully started.  Internally, Liberty does this by using a ResourceFactory https://github.com/OpenLiberty/open-liberty/blob/integration/dev/com.ibm.ws.resource/src/com/ibm/wsspi/resource/ResourceFactory.java but I don&#39;t know exactly how it works.","body":"If your feature is trying to perform a lookup by JNDI name of the DataSource prior to application server start using OSGi I do not think this will work as you cannot guarantee that the JNDI and JDBC features have been fully started.  Internally, Liberty does this by using a ResourceFactory <a href=\"https://github.com/OpenLiberty/open-liberty/blob/integration/dev/com.ibm.ws.resource/src/com/ibm/wsspi/resource/ResourceFactory.java\" rel=\"nofollow noreferrer\">github.com/OpenLiberty/open-liberty/blob/integration/dev/&hellip;</a> but I don&#39;t know exactly how it works."}],"answers":[{"comments":[{"owner":{"account_id":1073348,"reputation":571,"user_id":1072089,"accept_rate":75,"display_name":"Nikola"},"score":0,"creation_date":1694593111,"post_id":77090454,"comment_id":135910074,"body_markdown":"This is working. Thank you so much.","body":"This is working. Thank you so much."}],"tags":[],"owner":{"account_id":7622322,"reputation":3444,"user_id":5780020,"display_name":"njr"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694531316,"creation_date":1694531316,"answer_id":77090454,"question_id":77089936,"body_markdown":"Yes, it&#39;s possible, but there is some complexity to it. The `dataSource` element isn&#39;t actually a DataSource. It&#39;s a [ResourceFactory][1] for creating a data source based on a resource reference. In Liberty, configuration usually references other configuration by its `id`, so more typical configuration that follows conventions of other config elements would look like this:\r\n\r\n```\r\n&lt;myJdbcRegistry dataSourceRef=&quot;my-dataSource&quot;/&gt;\r\n```\r\n\r\nHere&#39;s an example from Liberty code itself where another configuration element requires a dataSource and references it by id,\r\n\r\n[Metatype:][2]\r\n```\r\n  &lt;AD id=&quot;dataSourceRef&quot;                     type=&quot;String&quot;  default=&quot;DefaultDataSource&quot; ibm:type=&quot;pid&quot; ibm:reference=&quot;com.ibm.ws.jdbc.dataSource&quot; name=&quot;%dataSource&quot; description=&quot;%dataSoure.desc&quot;/&gt;\r\n  &lt;AD id=&quot;DataSourceFactory.target&quot;          type=&quot;String&quot;  default=&quot;(service.pid=${dataSourceRef})&quot; ibm:final=&quot;true&quot; name=&quot;internal&quot; description=&quot;internal use only&quot;/&gt;\r\n```\r\n\r\n[OSGI bind method:][3]\r\n```\r\n    @Reference(target = &quot;(id=unbound)&quot;)\r\n    protected void setDataSourceFactory(ResourceFactory svc) {\r\n```\r\n\r\n[Usage:][4]\r\n```\r\n        ResourceConfig resourceInfo = resourceConfigFactory.createResourceConfig(DataSource.class.getName());\r\n        resourceInfo.setSharingScope(ResourceConfig.SHARING_SCOPE_SHAREABLE);\r\n        resourceInfo.setIsolationLevel(isolationLevel);\r\n        resourceInfo.setResAuthType(ResourceConfig.AUTH_CONTAINER);\r\n        ...\r\n        DataSource dataSource = (DataSource) dataSourceFactory.createResource(resourceInfo);\r\n```\r\n\r\n\r\n  [1]: https://www.ibm.com/docs/en/was-liberty/base?topic=SSEQTP_liberty/com.ibm.websphere.javadoc.liberty.doc/com.ibm.websphere.appserver.spi.containerServices_4.0-javadoc/com/ibm/wsspi/resource/ResourceFactory.htm\r\n  [2]: https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/resources/OSGI-INF/metatype/metatype.xml#L33\r\n  [3]: https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/src/com/ibm/wsspi/persistence/internal/DatabaseStoreImpl.java#L877-L880\r\n  [4]: https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/src/com/ibm/wsspi/persistence/internal/DatabaseStoreImpl.java#L232-L249","title":"OpenLiberty custom feature dataSource","body":"<p>Yes, it's possible, but there is some complexity to it. The <code>dataSource</code> element isn't actually a DataSource. It's a <a href=\"https://www.ibm.com/docs/en/was-liberty/base?topic=SSEQTP_liberty/com.ibm.websphere.javadoc.liberty.doc/com.ibm.websphere.appserver.spi.containerServices_4.0-javadoc/com/ibm/wsspi/resource/ResourceFactory.htm\" rel=\"nofollow noreferrer\">ResourceFactory</a> for creating a data source based on a resource reference. In Liberty, configuration usually references other configuration by its <code>id</code>, so more typical configuration that follows conventions of other config elements would look like this:</p>\n<pre><code>&lt;myJdbcRegistry dataSourceRef=&quot;my-dataSource&quot;/&gt;\n</code></pre>\n<p>Here's an example from Liberty code itself where another configuration element requires a dataSource and references it by id,</p>\n<p><a href=\"https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/resources/OSGI-INF/metatype/metatype.xml#L33\" rel=\"nofollow noreferrer\">Metatype:</a></p>\n<pre><code>  &lt;AD id=&quot;dataSourceRef&quot;                     type=&quot;String&quot;  default=&quot;DefaultDataSource&quot; ibm:type=&quot;pid&quot; ibm:reference=&quot;com.ibm.ws.jdbc.dataSource&quot; name=&quot;%dataSource&quot; description=&quot;%dataSoure.desc&quot;/&gt;\n  &lt;AD id=&quot;DataSourceFactory.target&quot;          type=&quot;String&quot;  default=&quot;(service.pid=${dataSourceRef})&quot; ibm:final=&quot;true&quot; name=&quot;internal&quot; description=&quot;internal use only&quot;/&gt;\n</code></pre>\n<p><a href=\"https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/src/com/ibm/wsspi/persistence/internal/DatabaseStoreImpl.java#L877-L880\" rel=\"nofollow noreferrer\">OSGI bind method:</a></p>\n<pre><code>    @Reference(target = &quot;(id=unbound)&quot;)\n    protected void setDataSourceFactory(ResourceFactory svc) {\n</code></pre>\n<p><a href=\"https://github.com/OpenLiberty/open-liberty/blob/d53070ee25359018ad7056b33f97562741e3452e/dev/com.ibm.ws.persistence/src/com/ibm/wsspi/persistence/internal/DatabaseStoreImpl.java#L232-L249\" rel=\"nofollow noreferrer\">Usage:</a></p>\n<pre><code>        ResourceConfig resourceInfo = resourceConfigFactory.createResourceConfig(DataSource.class.getName());\n        resourceInfo.setSharingScope(ResourceConfig.SHARING_SCOPE_SHAREABLE);\n        resourceInfo.setIsolationLevel(isolationLevel);\n        resourceInfo.setResAuthType(ResourceConfig.AUTH_CONTAINER);\n        ...\n        DataSource dataSource = (DataSource) dataSourceFactory.createResource(resourceInfo);\n</code></pre>\n"}],"owner":{"account_id":1073348,"reputation":571,"user_id":1072089,"accept_rate":75,"display_name":"Nikola"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77090454,"answer_count":1,"score":0,"last_activity_date":1694531316,"creation_date":1694527842,"question_id":77089936,"body_markdown":"I&#39;d like my custom OSGi Liberty feature to inject/lookup JNDI datasource, the one that is already defined &#39;as usual&#39;. Something like this:\r\n\r\n    &lt;server description=&quot;my-server&quot;&gt;\r\n    \r\n\t&lt;!-- I prefer this, not being forced to define url, driver, username and password here as well --&gt;\r\n\t&lt;myJdbcRegistry dataSourceJndiName=&quot;jdbc/myDataSource&quot; /&gt;\r\n\t\r\n\t&lt;!-- This dataSource exists anyway, i do not want to repeat all attributes that are inside properties.oracle --&gt;\r\n\t&lt;dataSource id=&quot;my-dataSource&quot; connectionManagerRef=&quot;connection-manager&quot; jndiName=&quot;jdbc/myDataSource&quot; transactional=&quot;true&quot; type=&quot;javax.sql.DataSource&quot;&gt; \r\n\t\t&lt;jdbcDriver libraryRef=&quot;oracle-ojdbc8-library&quot;/&gt; \r\n\t\t&lt;properties.oracle URL=&quot;${my.db.url}&quot; driverType=&quot;thin&quot; password=&quot;{xor}${my.db.password}&quot; user=&quot;${my.db.user}&quot;/&gt; \r\n\t&lt;/dataSource&gt;\r\n\t\r\n\t&lt;library id=&quot;oracle-ojdbc8-library&quot;&gt; \r\n\t\t&lt;fileset dir=&quot;${shared.resource.dir}/jdbc&quot; includes=&quot;ojdbc8-19.7.0.0.jar&quot;/&gt; \r\n\t&lt;/library&gt;\r\n\t\r\n&lt;/server&gt;\r\n\r\nIs this even possible to do? I tried several approaches without results (different InitialContext lookups, OSGi BundleContext#createFilter, BundleContext#getServiceReferences).","title":"OpenLiberty custom feature dataSource","body":"<p>I'd like my custom OSGi Liberty feature to inject/lookup JNDI datasource, the one that is already defined 'as usual'. Something like this:</p>\n<pre><code>&lt;server description=&quot;my-server&quot;&gt;\n\n&lt;!-- I prefer this, not being forced to define url, driver, username and password here as well --&gt;\n&lt;myJdbcRegistry dataSourceJndiName=&quot;jdbc/myDataSource&quot; /&gt;\n\n&lt;!-- This dataSource exists anyway, i do not want to repeat all attributes that are inside properties.oracle --&gt;\n&lt;dataSource id=&quot;my-dataSource&quot; connectionManagerRef=&quot;connection-manager&quot; jndiName=&quot;jdbc/myDataSource&quot; transactional=&quot;true&quot; type=&quot;javax.sql.DataSource&quot;&gt; \n    &lt;jdbcDriver libraryRef=&quot;oracle-ojdbc8-library&quot;/&gt; \n    &lt;properties.oracle URL=&quot;${my.db.url}&quot; driverType=&quot;thin&quot; password=&quot;{xor}${my.db.password}&quot; user=&quot;${my.db.user}&quot;/&gt; \n&lt;/dataSource&gt;\n\n&lt;library id=&quot;oracle-ojdbc8-library&quot;&gt; \n    &lt;fileset dir=&quot;${shared.resource.dir}/jdbc&quot; includes=&quot;ojdbc8-19.7.0.0.jar&quot;/&gt; \n&lt;/library&gt;\n</code></pre>\n\n<p>Is this even possible to do? I tried several approaches without results (different InitialContext lookups, OSGi BundleContext#createFilter, BundleContext#getServiceReferences).</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":1779372,"reputation":76342,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":0,"creation_date":1510180203,"post_id":47190189,"comment_id":81331041,"body_markdown":"So... you&#39;re asking a PdfBox question, but you&#39;re tagging it as an iText question? Can you explain why you did that?","body":"So... you&#39;re asking a PdfBox question, but you&#39;re tagging it as an iText question? Can you explain why you did that?"},{"owner":{"account_id":1779372,"reputation":76342,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":0,"creation_date":1510207472,"post_id":47190189,"comment_id":81338777,"body_markdown":"If you don&#39;t want to explain, people will make assumptions about your motives. Those assumptions won&#39;t be positive.","body":"If you don&#39;t want to explain, people will make assumptions about your motives. Those assumptions won&#39;t be positive."},{"owner":{"account_id":1779372,"reputation":76342,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":0,"creation_date":1510212956,"post_id":47190189,"comment_id":81341245,"body_markdown":"To clarify: I assume that you&#39;re opposed to free software, and that you only want software that is *for free* because you don&#39;t value developers and their work. You have no idea about [the realities of being a FOSS maintainer](https://caddy.community/t/the-realities-of-being-a-foss-maintainer/2728), because you&#39;re a [software cannibal](http://zguide.zeromq.org/page:chapter6#Eat-Me). That assumption may be wrong, but since you don&#39;t feel like explaining, that&#39;s what I&#39;m guessing.","body":"To clarify: I assume that you&#39;re opposed to free software, and that you only want software that is <i>for free</i> because you don&#39;t value developers and their work. You have no idea about <a href=\"https://caddy.community/t/the-realities-of-being-a-foss-maintainer/2728\" rel=\"nofollow noreferrer\">the realities of being a FOSS maintainer</a>, because you&#39;re a <a href=\"http://zguide.zeromq.org/page:chapter6#Eat-Me\" rel=\"nofollow noreferrer\">software cannibal</a>. That assumption may be wrong, but since you don&#39;t feel like explaining, that&#39;s what I&#39;m guessing."},{"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"score":4,"creation_date":1510216328,"post_id":47190189,"comment_id":81342970,"body_markdown":"If a question is wrongly tagged, it takes less effort to remove the wrong tag than to write 3 comments to complain about it.","body":"If a question is wrongly tagged, it takes less effort to remove the wrong tag than to write 3 comments to complain about it."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1510225997,"post_id":47190189,"comment_id":81349142,"body_markdown":"Do you mean empty signature fields? Can you share the template PDF? PDFBox doesn&#39;t have a method to remove a field from the field tree but it might be possible anyway if the tree structure is simple.","body":"Do you mean empty signature fields? Can you share the template PDF? PDFBox doesn&#39;t have a method to remove a field from the field tree but it might be possible anyway if the tree structure is simple."},{"owner":{"account_id":4829637,"reputation":6153,"user_id":3898122,"accept_rate":40,"display_name":"Renat Gatin"},"score":0,"creation_date":1510272925,"post_id":47190189,"comment_id":81377037,"body_markdown":"Hi, Tilman, my PDfF very simple, all my signatures are as root fields. I was thinking about manipulating tree structure, but I did not go further with that when I saw that getChildren() method in PDFBox is returning new instance of the list, but the actual list: List&lt;PDField&gt; children = new ArrayList&lt;PDField&gt;(); But mkl below went further and extended your idea. Thanks for it!","body":"Hi, Tilman, my PDfF very simple, all my signatures are as root fields. I was thinking about manipulating tree structure, but I did not go further with that when I saw that getChildren() method in PDFBox is returning new instance of the list, but the actual list: List&lt;PDField&gt; children = new ArrayList&lt;PDField&gt;(); But mkl below went further and extended your idea. Thanks for it!"}],"answers":[{"comments":[{"owner":{"account_id":4829637,"reputation":6153,"user_id":3898122,"accept_rate":40,"display_name":"Renat Gatin"},"score":0,"creation_date":1510273054,"post_id":47202560,"comment_id":81377071,"body_markdown":"Thank you very much, mkl! That is awesome idea to reset children! Great implementation.","body":"Thank you very much, mkl! That is awesome idea to reset children! Great implementation."}],"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1510232623,"creation_date":1510232623,"answer_id":47202560,"question_id":47190189,"body_markdown":"As Tilman already mentioned in a comment, *PDFBox doesn&#39;t have a method to remove a field from the field tree.* Nonetheless it has methods to manipulate the underlying PDF structure, so one can write such a method oneself, e.g. like this:\r\n\r\n    PDField removeField(PDDocument document, String fullFieldName) throws IOException {\r\n        PDDocumentCatalog documentCatalog = document.getDocumentCatalog();\r\n        PDAcroForm acroForm = documentCatalog.getAcroForm();\r\n\r\n        if (acroForm == null) {\r\n            System.out.println(&quot;No form defined.&quot;);\r\n            return null;\r\n        }\r\n\r\n        PDField targetField = null;\r\n\r\n        for (PDField field : acroForm.getFieldTree()) {\r\n            if (fullFieldName.equals(field.getFullyQualifiedName())) {\r\n                targetField = field;\r\n                break;\r\n            }\r\n        }\r\n        if (targetField == null) {\r\n            System.out.println(&quot;Form does not contain field with given name.&quot;);\r\n            return null;\r\n        }\r\n\r\n        PDNonTerminalField parentField = targetField.getParent();\r\n        if (parentField != null) {\r\n            List&lt;PDField&gt; childFields = parentField.getChildren();\r\n            boolean removed = false;\r\n            for (PDField field : childFields)\r\n            {\r\n                if (field.getCOSObject().equals(targetField.getCOSObject())) {\r\n                    removed = childFields.remove(field);\r\n                    parentField.setChildren(childFields);\r\n                    break;\r\n                }\r\n            }\r\n            if (!removed)\r\n                System.out.println(&quot;Inconsistent form definition: Parent field does not reference the target field.&quot;);\r\n        } else {\r\n            List&lt;PDField&gt; rootFields = acroForm.getFields();\r\n            boolean removed = false;\r\n            for (PDField field : rootFields)\r\n            {\r\n                if (field.getCOSObject().equals(targetField.getCOSObject())) {\r\n                    removed = rootFields.remove(field);\r\n                    break;\r\n                }\r\n            }\r\n            if (!removed)\r\n                System.out.println(&quot;Inconsistent form definition: Root fields do not include the target field.&quot;);\r\n        }\r\n\r\n        removeWidgets(targetField);\r\n\r\n        return targetField;\r\n    }\r\n\r\n    void removeWidgets(PDField targetField) throws IOException {\r\n        if (targetField instanceof PDTerminalField) {\r\n            List&lt;PDAnnotationWidget&gt; widgets = ((PDTerminalField)targetField).getWidgets();\r\n            for (PDAnnotationWidget widget : widgets) {\r\n                PDPage page = widget.getPage();\r\n                if (page != null) {\r\n                    List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\r\n                    boolean removed = false;\r\n                    for (PDAnnotation annotation : annotations) {\r\n                        if (annotation.getCOSObject().equals(widget.getCOSObject()))\r\n                        {\r\n                            removed = annotations.remove(annotation);\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!removed)\r\n                        System.out.println(&quot;Inconsistent annotation definition: Page annotations do not include the target widget.&quot;);\r\n                } else {\r\n                    System.out.println(&quot;Widget annotation does not have an associated page; cannot remove widget.&quot;);\r\n                    // TODO: In this case iterate all pages and try to find and remove widget in all of them\r\n                }\r\n            }\r\n        } else if (targetField instanceof PDNonTerminalField) {\r\n            List&lt;PDField&gt; childFields = ((PDNonTerminalField)targetField).getChildren();\r\n            for (PDField field : childFields)\r\n                removeWidgets(field);\r\n        } else {\r\n            System.out.println(&quot;Target field is neither terminal nor non-terminal; cannot remove widgets.&quot;);\r\n        }\r\n    }\r\n\r\n*([RemoveField][1] helper methods `removeField` and `removeWidgets`)*\r\n\r\nOne can apply this to a document and field like this:\r\n\r\n    PDDocument document = PDDocument.load(SOURCE_PDF);\r\n\r\n    PDField field = removeField(document, &quot;Signature1&quot;);\r\n    Assert.assertNotNull(&quot;Field not found&quot;, field);\r\n\r\n    document.save(TARGET_PDF);        \r\n    document.close();\r\n\r\n*([RemoveField][2] test `testRemoveInvisibleSignature`)*\r\n\r\n---\r\n\r\n**PS:** I am not sure how much form related information PDFBox actually caches somewhere. Thus, I would propose not to manipulate the form information any further in the same document manipulation session, at least not without tests.\r\n\r\n**PPS:** You find a TODO in the `removeWidgets` helper method. If the method outputs *&quot;Widget annotation does not have an associated page; cannot remove widget&quot;*, you&#39;ll have to add the missing code.\r\n\r\n  [1]: https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/form/RemoveField.java#L172\r\n  [2]: https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/form/RemoveField.java#L160","title":"Does PDFBox allow to remove one field from AcroForm?","body":"<p>As Tilman already mentioned in a comment, <em>PDFBox doesn't have a method to remove a field from the field tree.</em> Nonetheless it has methods to manipulate the underlying PDF structure, so one can write such a method oneself, e.g. like this:</p>\n\n<pre><code>PDField removeField(PDDocument document, String fullFieldName) throws IOException {\n    PDDocumentCatalog documentCatalog = document.getDocumentCatalog();\n    PDAcroForm acroForm = documentCatalog.getAcroForm();\n\n    if (acroForm == null) {\n        System.out.println(\"No form defined.\");\n        return null;\n    }\n\n    PDField targetField = null;\n\n    for (PDField field : acroForm.getFieldTree()) {\n        if (fullFieldName.equals(field.getFullyQualifiedName())) {\n            targetField = field;\n            break;\n        }\n    }\n    if (targetField == null) {\n        System.out.println(\"Form does not contain field with given name.\");\n        return null;\n    }\n\n    PDNonTerminalField parentField = targetField.getParent();\n    if (parentField != null) {\n        List&lt;PDField&gt; childFields = parentField.getChildren();\n        boolean removed = false;\n        for (PDField field : childFields)\n        {\n            if (field.getCOSObject().equals(targetField.getCOSObject())) {\n                removed = childFields.remove(field);\n                parentField.setChildren(childFields);\n                break;\n            }\n        }\n        if (!removed)\n            System.out.println(\"Inconsistent form definition: Parent field does not reference the target field.\");\n    } else {\n        List&lt;PDField&gt; rootFields = acroForm.getFields();\n        boolean removed = false;\n        for (PDField field : rootFields)\n        {\n            if (field.getCOSObject().equals(targetField.getCOSObject())) {\n                removed = rootFields.remove(field);\n                break;\n            }\n        }\n        if (!removed)\n            System.out.println(\"Inconsistent form definition: Root fields do not include the target field.\");\n    }\n\n    removeWidgets(targetField);\n\n    return targetField;\n}\n\nvoid removeWidgets(PDField targetField) throws IOException {\n    if (targetField instanceof PDTerminalField) {\n        List&lt;PDAnnotationWidget&gt; widgets = ((PDTerminalField)targetField).getWidgets();\n        for (PDAnnotationWidget widget : widgets) {\n            PDPage page = widget.getPage();\n            if (page != null) {\n                List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\n                boolean removed = false;\n                for (PDAnnotation annotation : annotations) {\n                    if (annotation.getCOSObject().equals(widget.getCOSObject()))\n                    {\n                        removed = annotations.remove(annotation);\n                        break;\n                    }\n                }\n                if (!removed)\n                    System.out.println(\"Inconsistent annotation definition: Page annotations do not include the target widget.\");\n            } else {\n                System.out.println(\"Widget annotation does not have an associated page; cannot remove widget.\");\n                // TODO: In this case iterate all pages and try to find and remove widget in all of them\n            }\n        }\n    } else if (targetField instanceof PDNonTerminalField) {\n        List&lt;PDField&gt; childFields = ((PDNonTerminalField)targetField).getChildren();\n        for (PDField field : childFields)\n            removeWidgets(field);\n    } else {\n        System.out.println(\"Target field is neither terminal nor non-terminal; cannot remove widgets.\");\n    }\n}\n</code></pre>\n\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/form/RemoveField.java#L172\" rel=\"noreferrer\">RemoveField</a> helper methods <code>removeField</code> and <code>removeWidgets</code>)</em></p>\n\n<p>One can apply this to a document and field like this:</p>\n\n<pre><code>PDDocument document = PDDocument.load(SOURCE_PDF);\n\nPDField field = removeField(document, \"Signature1\");\nAssert.assertNotNull(\"Field not found\", field);\n\ndocument.save(TARGET_PDF);        \ndocument.close();\n</code></pre>\n\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/form/RemoveField.java#L160\" rel=\"noreferrer\">RemoveField</a> test <code>testRemoveInvisibleSignature</code>)</em></p>\n\n<hr>\n\n<p><strong>PS:</strong> I am not sure how much form related information PDFBox actually caches somewhere. Thus, I would propose not to manipulate the form information any further in the same document manipulation session, at least not without tests.</p>\n\n<p><strong>PPS:</strong> You find a TODO in the <code>removeWidgets</code> helper method. If the method outputs <em>\"Widget annotation does not have an associated page; cannot remove widget\"</em>, you'll have to add the missing code.</p>\n"},{"comments":[{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1685469917,"post_id":71681206,"comment_id":134663604,"body_markdown":"Note that this might run into trouble if the fields are arranged in a tree structure; `getFields()` returns a flattened view, and you&#39;re setting the flattened/filtered view as the new value.","body":"Note that this might run into trouble if the fields are arranged in a tree structure; <code>getFields()</code> returns a flattened view, and you&#39;re setting the flattened/filtered view as the new value."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1694667033,"post_id":71681206,"comment_id":135921897,"body_markdown":"`widget.setNoView(true)` only hides the widget for purposes of on-screen display and user interaction. It does not remove it, though. Depending on a PDF processor&#39;s approach to finding fields, therefore, such a processor may run into issues with your file, finding widgets of form fields which are not reachable from the document form definition.","body":"<code>widget.setNoView(true)</code> only hides the widget for purposes of on-screen display and user interaction. It does not remove it, though. Depending on a PDF processor&#39;s approach to finding fields, therefore, such a processor may run into issues with your file, finding widgets of form fields which are not reachable from the document form definition."}],"tags":[],"owner":{"account_id":14810132,"reputation":21,"user_id":10696039,"display_name":"Luis Avellaneda"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648659271,"creation_date":1648659271,"answer_id":71681206,"question_id":47190189,"body_markdown":"Thanks to @mkl, I managed to do so with a shorter implementation using version pdfbox-3.0.0-RC1. in this case, to hide a button (check):\r\n\r\n            var check = (PDPushButton) pdAcroForm.getField(name);\r\n        List&lt;PDField&gt; fields = pdAcroForm.getFields();\r\n        fields.removeIf(x -&gt; x.getCOSObject().equals(check.getCOSObject()));\r\n        pdAcroForm.setFields(fields);\r\n        check.getWidgets().forEach(widget -&gt; widget.setNoView(true));\r\n\r\n\r\n ","title":"Does PDFBox allow to remove one field from AcroForm?","body":"<p>Thanks to @mkl, I managed to do so with a shorter implementation using version pdfbox-3.0.0-RC1. in this case, to hide a button (check):</p>\n<pre><code>        var check = (PDPushButton) pdAcroForm.getField(name);\n    List&lt;PDField&gt; fields = pdAcroForm.getFields();\n    fields.removeIf(x -&gt; x.getCOSObject().equals(check.getCOSObject()));\n    pdAcroForm.setFields(fields);\n    check.getWidgets().forEach(widget -&gt; widget.setNoView(true));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1694553107,"post_id":77090406,"comment_id":135905818,"body_markdown":"Setting `it.isNoView = true` only hides the widget for purposes of on-screen display and user interaction. It does _not_ remove it, though. Depending on a PDF processor&#39;s approach to finding fields, therefore, such a processor may run into issues with your file, finding widgets of form fields which are not reachable from the document form definition.","body":"Setting <code>it.isNoView = true</code> only hides the widget for purposes of on-screen display and user interaction. It does <i>not</i> remove it, though. Depending on a PDF processor&#39;s approach to finding fields, therefore, such a processor may run into issues with your file, finding widgets of form fields which are not reachable from the document form definition."},{"owner":{"account_id":20070912,"reputation":23,"user_id":14715699,"display_name":"IvarAlek"},"score":0,"creation_date":1694647151,"post_id":77090406,"comment_id":135920363,"body_markdown":"Thank you for clarifying! Honestly, that approach was just copied from the other post here, so it wasn&#39;t really thought through on my part. Do you know how I could solve it instead?","body":"Thank you for clarifying! Honestly, that approach was just copied from the other post here, so it wasn&#39;t really thought through on my part. Do you know how I could solve it instead?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1694666834,"post_id":77090406,"comment_id":135921883,"body_markdown":"Well, have a look at my old answer here which in `removeWidgets` removes the widget annotation from the annotation array of the associated page. But even there is a ToDo left open for cases in which the page information is missing. In that case you have to iterate over all pages and remove.","body":"Well, have a look at my old answer here which in <code>removeWidgets</code> removes the widget annotation from the annotation array of the associated page. But even there is a ToDo left open for cases in which the page information is missing. In that case you have to iterate over all pages and remove."}],"tags":[],"owner":{"account_id":20070912,"reputation":23,"user_id":14715699,"display_name":"IvarAlek"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694530907,"creation_date":1694530907,"answer_id":77090406,"question_id":47190189,"body_markdown":"My Kotlin/PDFBox 3.0.0 solution, fwiw: \r\n\r\n    fun removeField(field: PDField) {\r\n        field.parent?.run {\r\n            this.children = children.withoutField(field)\r\n        }\r\n        field.takeIf { it.parent == null }?.run {\r\n            acroForm.fields = acroForm.fields.withoutField(field)\r\n        }\r\n        field.widgets.forEach { it.isNoView = true }\r\n    }\r\n\r\n    private fun MutableList&lt;PDField&gt;.withoutField(field: PDField): MutableList&lt;PDField&gt; {\r\n        removeIf { it.cosObject == field.cosObject &amp;&amp; it.fullyQualifiedName == field.fullyQualifiedName }\r\n        return this\r\n    }\r\n\r\n\r\nProbably not necessary to check both cosObject and fullyQualifiedName for equality I guess. ","title":"Does PDFBox allow to remove one field from AcroForm?","body":"<p>My Kotlin/PDFBox 3.0.0 solution, fwiw:</p>\n<pre><code>fun removeField(field: PDField) {\n    field.parent?.run {\n        this.children = children.withoutField(field)\n    }\n    field.takeIf { it.parent == null }?.run {\n        acroForm.fields = acroForm.fields.withoutField(field)\n    }\n    field.widgets.forEach { it.isNoView = true }\n}\n\nprivate fun MutableList&lt;PDField&gt;.withoutField(field: PDField): MutableList&lt;PDField&gt; {\n    removeIf { it.cosObject == field.cosObject &amp;&amp; it.fullyQualifiedName == field.fullyQualifiedName }\n    return this\n}\n</code></pre>\n<p>Probably not necessary to check both cosObject and fullyQualifiedName for equality I guess.</p>\n"}],"owner":{"account_id":4829637,"reputation":6153,"user_id":3898122,"accept_rate":40,"display_name":"Renat Gatin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4126,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":47202560,"answer_count":3,"score":2,"last_activity_date":1694530907,"creation_date":1510177357,"question_id":47190189,"body_markdown":"I am using Apache [PDFBox 2.0.8][1]  and trying to remove one field. But can not find the way to do it, like I can do with iText:     `PdfStamper.getAcroFields().removeField(&quot;signature3&quot;)`.\r\n\r\nWhat I am tying to do. Initially I have template PDF with 3 Digital Signatures. In some cases I need just 2 signatures, so it this case I need to remove 3rd signature from the template. And seems like I can&#39;t do it with PDFBox, close thing I found is flattening this field, but that problem is if a flatten particular PDField (not whole form, but just one field) - all other signatures are loosing their functionality, looks like they are getting flattened as well.\r\nHere is code that does it:\r\n\r\n    PDDocument document = PDDocument.load(file);\r\n    PDDocumentCatalog documentCatalog = document.getDocumentCatalog();\r\n    PDAcroForm acroForm = documentCatalog.getAcroForm();\r\n        \t\t\r\n    List&lt;PDField&gt; flattenList = new ArrayList&lt;&gt;();\r\n    for (PDField field : acroForm.getFieldTree()) {\r\n    \tif (field instanceof PDSignatureField &amp;&amp; &quot;signature3&quot;.equals(field.getFullyQualifiedName())) {\r\n    \t\tflattenList.add(field);\r\n    \t}\r\n    }\r\n    \r\n    acroForm.flatten(flattenList, true);\r\n    document.save(dest);\t\t\r\n    document.close();\r\n\r\n\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.apache.pdfbox/pdfbox/2.0.8\r\n","title":"Does PDFBox allow to remove one field from AcroForm?","body":"<p>I am using Apache <a href=\"https://mvnrepository.com/artifact/org.apache.pdfbox/pdfbox/2.0.8\" rel=\"nofollow noreferrer\">PDFBox 2.0.8</a>  and trying to remove one field. But can not find the way to do it, like I can do with iText:     <code>PdfStamper.getAcroFields().removeField(\"signature3\")</code>.</p>\n\n<p>What I am tying to do. Initially I have template PDF with 3 Digital Signatures. In some cases I need just 2 signatures, so it this case I need to remove 3rd signature from the template. And seems like I can't do it with PDFBox, close thing I found is flattening this field, but that problem is if a flatten particular PDField (not whole form, but just one field) - all other signatures are loosing their functionality, looks like they are getting flattened as well.\nHere is code that does it:</p>\n\n<pre><code>PDDocument document = PDDocument.load(file);\nPDDocumentCatalog documentCatalog = document.getDocumentCatalog();\nPDAcroForm acroForm = documentCatalog.getAcroForm();\n\nList&lt;PDField&gt; flattenList = new ArrayList&lt;&gt;();\nfor (PDField field : acroForm.getFieldTree()) {\n    if (field instanceof PDSignatureField &amp;&amp; \"signature3\".equals(field.getFullyQualifiedName())) {\n        flattenList.add(field);\n    }\n}\n\nacroForm.flatten(flattenList, true);\ndocument.save(dest);        \ndocument.close();\n</code></pre>\n"},{"tags":["java","spring-boot","maven-2"],"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694530038,"creation_date":1694521510,"question_id":77089082,"body_markdown":"I am attempting to add instrumentation to my Java application. I have successfully created agent code that I attach to my application via the &quot;static&quot; technique (e.g. https://www.baeldung.com/java-instrumentation). When I launch the application, the agent `premain` method is called and then the application executes. Unfortuanetly, `premain` is unable to find the target application class.\r\n\r\nMy application uses Spring Boot. I am suspecting that this may have something to do with the agent&#39;s inability to find the target class, but do not know.\r\n\r\nI am not sure what I should provide as far as code, configuration, etc., to illustrate the state of the application. Please let me know what I should include to help.\r\n\r\nHere is the exception that occurs when the agent attempts to find and transform the target class:\r\n\r\n\t[INFO ] 2023-09-11 14:33:11.900 [main] com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:28) - [Agent] In premain method\r\n\t[INFO ] 2023-09-11 14:33:11.903 [main] com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:29) - [Agent] args: com.beastcode.devops.prometheus.MetricsCollector:collect\r\n\t[INFO ] 2023-09-11 14:33:11.904 [main] com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:48) - [Agent] Transforming class com/beastcode/devops/prometheus/MetricsCollector\r\n\t[ERROR] 2023-09-11 14:33:11.908 [main] com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:77) - Exception\r\n\tjavassist.NotFoundException: com.beastcode.devops.prometheus.MetricsCollector\r\n\t\tat javassist.ClassPool.get(ClassPool.java:436) ~[agent-1.0.0.jar:?]\r\n\t\tat com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:57) ~[agent-1.0.0.jar:?]\r\n\t\tat java.lang.instrument.ClassFileTransformer.transform(ClassFileTransformer.java:246) ~[?:?]\r\n\t\tat sun.instrument.TransformerManager.transform(TransformerManager.java:188) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:563) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.retransformClasses0(Native Method) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167) ~[?:?]\r\n\t\tat com.beastcode.devops.prometheus.InstrumentationAgent.transform(InstrumentationAgent.java:82) ~[agent-1.0.0.jar:?]\r\n\t\tat com.beastcode.devops.prometheus.InstrumentationAgent.transformClass(InstrumentationAgent.java:57) ~[agent-1.0.0.jar:?]\r\n\t\tat com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:35) ~[agent-1.0.0.jar:?]\r\n\t\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\t\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\t\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:513) ~[?:?]\r\n\t\tat sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525) ~[?:?]\r\n\t...\r\n\r\n`com.beastcode.devops.prometheus.MetricsCollector` is the target class and it certainly exists as this is the &quot;main&quot; application code that is started by Spring Boot. This can be seen later in the console log:\r\n\r\n\t...\r\n\t[INFO ] 2023-09-11 14:33:14.508 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:58) - Metrics information collected\r\n\t[INFO ] 2023-09-11 14:33:14.508 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:59) - Querying and writing data ...\r\n\t[INFO ] 2023-09-11 14:33:20.847 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:80) - Done\r\n\r\nMy pom.xml file uses the `spring-boot-maven-plugin` to handle building and packaging the application. I&#39;m wondering if the class is not visible because perhaps I&#39;m missing an option.\r\n\r\nHere is the application pom.xml:\r\n\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t  \r\n\t  &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.11&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t  &lt;/parent&gt;\r\n\t  \r\n\t  &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;prometheus-metrics-sampler&lt;/artifactId&gt;\r\n\t  &lt;version&gt;1.1.2&lt;/version&gt;\r\n\t  \r\n\t  &lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t\r\n\t\t&lt;slf4j.version&gt;1.7.36&lt;/slf4j.version&gt;\r\n\t\t&lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\r\n\t\t\r\n\t\t&lt;prometheus-common.version&gt;1.2.2&lt;/prometheus-common.version&gt;\r\n\r\n\t\t&lt;gitlab-url&gt;https://gitlab.phactory.beast-code.com&lt;/gitlab-url&gt;\r\n\t\t&lt;gitlab-project-id&gt;863&lt;/gitlab-project-id&gt;\r\n\t  &lt;/properties&gt;\r\n\r\n\t  &lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t  &lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t  &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t  &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t  &lt;snapshots&gt;\r\n\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t  &lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t\r\n\t\t&lt;repository&gt;\r\n\t\t  &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t  &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t  &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t  &lt;releases&gt;\r\n\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t  &lt;/releases&gt;\r\n\t\t&lt;/repository&gt;\r\n\r\n\t\t&lt;repository&gt;\r\n\t\t  &lt;id&gt;phactory-gitlab-maven&lt;/id&gt;\r\n\t\t  &lt;url&gt;${gitlab-url}/api/v4/projects/${gitlab-project-id}/packages/maven&lt;/url&gt;\r\n\t\t&lt;/repository&gt;\r\n\t  &lt;/repositories&gt;\r\n\t  \r\n\t  &lt;pluginRepositories&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t  &lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t  &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t  &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t  &lt;snapshots&gt;\r\n\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t  &lt;/snapshots&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t  &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t  &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t  &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t  &lt;releases&gt;\r\n\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t  &lt;/releases&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t  &lt;/pluginRepositories&gt;\r\n\r\n\t  &lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t  \r\n\t\t  &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;prometheus-common&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${prometheus-common.version}&lt;/version&gt;\r\n\t\t  &lt;/dependency&gt;\r\n\r\n\t\t&lt;/dependencies&gt;\r\n\t  &lt;/dependencyManagement&gt;\r\n\r\n\t  &lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t  &lt;exclusions&gt;\r\n\t\t\t&lt;exclusion&gt;\r\n\t\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t  &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t&lt;/exclusion&gt;\r\n\t\t  &lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t  &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;prometheus-common&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t  &lt;/dependencies&gt;\r\n\t  \r\n\t  &lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t  &lt;plugin&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t  &lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t  &lt;/build&gt;\r\n\r\n\t&lt;/project&gt;\r\n\r\nHere is the agent class:\r\n\r\n    package com.beastcode.devops.prometheus;\r\n    \r\n    import java.lang.instrument.Instrumentation;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    public class InstrumentationAgent {\r\n    \r\n      private static Logger logger = LoggerFactory.getLogger(InstrumentationAgent.class);\r\n    \r\n      public static void premain(String agentArgs, Instrumentation instrumentation) {\r\n        logger.info(&quot;[Agent] In premain method&quot;);\r\n        logger.info(&quot;[Agent] args: {}&quot;, agentArgs);\r\n    \r\n        String[] args = agentArgs.split(&quot;:&quot;);\r\n        String className = args[0];\r\n        String methodName = args[1];\r\n    \r\n        transformClass(className, methodName, instrumentation);\r\n      }\r\n    \r\n      public static void agentmain(String agentArgs, Instrumentation instrumentation) {\r\n        logger.info(&quot;[Agent] In agentmain method&quot;);\r\n        logger.info(&quot;[Agent] args: {}&quot;, agentArgs);\r\n    \r\n        String[] args = agentArgs.split(&quot;:&quot;);\r\n        String className = args[0];\r\n        String methodName = args[1];\r\n    \r\n        transformClass(className, methodName, instrumentation);\r\n      }\r\n    \r\n      private static void transformClass(String className, String methodName, Instrumentation instrumentation) {\r\n        Class&lt;?&gt; targetCls = null;\r\n        ClassLoader targetClassLoader = null;\r\n    \r\n        // See if we can get the class using forName.\r\n        try {\r\n          targetCls = Class.forName(className);\r\n          targetClassLoader = targetCls.getClassLoader();\r\n          transform(targetCls, targetClassLoader, methodName, instrumentation);\r\n          return;\r\n        } catch (Exception e) {\r\n          logger.error(&quot;Class [{}] not found with Class.forName&quot;);\r\n        }\r\n    \r\n        // Otherwise, iterate all loaded classes and find what we want.\r\n        for (Class&lt;?&gt; clazz : instrumentation.getAllLoadedClasses()) {\r\n          if (clazz.getName().equals(className)) {\r\n            targetCls = clazz;\r\n            targetClassLoader = targetCls.getClassLoader();\r\n            transform(targetCls, targetClassLoader, methodName, instrumentation);\r\n            return;\r\n          }\r\n        }\r\n    \r\n        throw new RuntimeException(&quot;Failed to find class [&quot; + className + &quot;]&quot;);\r\n      }\r\n    \r\n      private static void transform(Class&lt;?&gt; clazz, ClassLoader classLoader, String methodName,\r\n          Instrumentation instrumentation) {\r\n        Transformer transformer = new Transformer(clazz.getName(), classLoader, methodName);\r\n        instrumentation.addTransformer(transformer, true);\r\n    \r\n        try {\r\n          instrumentation.retransformClasses(clazz);\r\n        } catch (Exception e) {\r\n          throw new RuntimeException(&quot;Transform failed for class: [&quot; + clazz.getName() + &quot;]&quot;, e);\r\n        }\r\n      }\r\n    \r\n    }\r\n\r\n\r\nHere is the transformer class:\r\n\r\n    package com.beastcode.devops.prometheus;\r\n    \r\n    import java.io.IOException;\r\n    import java.lang.instrument.ClassFileTransformer;\r\n    import java.lang.instrument.IllegalClassFormatException;\r\n    import java.security.ProtectionDomain;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    import javassist.CannotCompileException;\r\n    import javassist.ClassPool;\r\n    import javassist.CtClass;\r\n    import javassist.CtMethod;\r\n    import javassist.NotFoundException;\r\n    \r\n    public class Transformer implements ClassFileTransformer {\r\n    \r\n      private static Logger     logger = LoggerFactory.getLogger(Transformer.class);\r\n    \r\n      // The internal form class name of the class to transform.\r\n      private final String      targetClassName;\r\n      // The class loader of the class we want to transform.\r\n      private final ClassLoader targetClassLoader;\r\n    \r\n      private final String      methodName;\r\n    \r\n      public Transformer(String targetClassName, ClassLoader targetClassLoader, String methodName) {\r\n        this.targetClassName = targetClassName;\r\n        this.targetClassLoader = targetClassLoader;\r\n        this.methodName = methodName;\r\n      }\r\n    \r\n      @Override\r\n      public byte[] transform(ClassLoader loader, String className, Class&lt;?&gt; classBeingRedefined,\r\n          ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException {\r\n        byte[] byteCode = classfileBuffer;\r\n    \r\n        // Replace slashes (/) in target class name with periods (.) to construct a\r\n        // proper Java class name.\r\n        String finalTargetClassName = this.targetClassName.replaceAll(&quot;\\\\.&quot;, &quot;/&quot;);\r\n    \r\n        if (!className.equals(finalTargetClassName)) {\r\n          return byteCode;\r\n        }\r\n    \r\n        if (className.equals(finalTargetClassName) &amp;&amp; loader.equals(targetClassLoader)) {\r\n          logger.info(&quot;[Agent] Transforming class &quot; + finalTargetClassName);\r\n    \r\n          /*\r\n           * TODO This is logic specific to what you are trying to instrument into the\r\n           * class and method of interest.\r\n           */\r\n    \r\n          try {\r\n            ClassPool cp = ClassPool.getDefault();\r\n            CtClass cc = cp.get(targetClassName);\r\n            CtMethod mtd = cc.getDeclaredMethod(methodName);\r\n    \r\n            mtd.addLocalVariable(&quot;startTime&quot;, CtClass.longType);\r\n            mtd.insertBefore(&quot;startTime = System.currentTimeMillis();&quot;);\r\n    \r\n            StringBuilder endBlock = new StringBuilder();\r\n    \r\n            mtd.addLocalVariable(&quot;endTime&quot;, CtClass.longType);\r\n            mtd.addLocalVariable(&quot;opTime&quot;, CtClass.longType);\r\n            endBlock.append(&quot;endTime = System.currentTimeMillis();&quot;);\r\n            endBlock.append(&quot;opTime = (endTime-startTime)/1000;&quot;);\r\n    \r\n            endBlock.append(&quot;logger.info(\\&quot;[Application] Operation completed in:\\&quot; + opTime + \\&quot; seconds!\\&quot;);&quot;);\r\n    \r\n            mtd.insertAfter(endBlock.toString());\r\n    \r\n            byteCode = cc.toBytecode();\r\n            cc.detach();\r\n          } catch (NotFoundException | CannotCompileException | IOException e) {\r\n            logger.error(&quot;Exception&quot;, e);\r\n          }\r\n        }\r\n    \r\n        return byteCode;\r\n      }\r\n    \r\n    }\r\n\r\n\r\n","title":"Java agent cannot find target class","body":"<p>I am attempting to add instrumentation to my Java application. I have successfully created agent code that I attach to my application via the &quot;static&quot; technique (e.g. <a href=\"https://www.baeldung.com/java-instrumentation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-instrumentation</a>). When I launch the application, the agent <code>premain</code> method is called and then the application executes. Unfortuanetly, <code>premain</code> is unable to find the target application class.</p>\n<p>My application uses Spring Boot. I am suspecting that this may have something to do with the agent's inability to find the target class, but do not know.</p>\n<p>I am not sure what I should provide as far as code, configuration, etc., to illustrate the state of the application. Please let me know what I should include to help.</p>\n<p>Here is the exception that occurs when the agent attempts to find and transform the target class:</p>\n<pre><code>[INFO ] 2023-09-11 14:33:11.900 [main] com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:28) - [Agent] In premain method\n[INFO ] 2023-09-11 14:33:11.903 [main] com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:29) - [Agent] args: com.beastcode.devops.prometheus.MetricsCollector:collect\n[INFO ] 2023-09-11 14:33:11.904 [main] com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:48) - [Agent] Transforming class com/beastcode/devops/prometheus/MetricsCollector\n[ERROR] 2023-09-11 14:33:11.908 [main] com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:77) - Exception\njavassist.NotFoundException: com.beastcode.devops.prometheus.MetricsCollector\n    at javassist.ClassPool.get(ClassPool.java:436) ~[agent-1.0.0.jar:?]\n    at com.beastcode.devops.prometheus.Transformer.transform(Transformer.java:57) ~[agent-1.0.0.jar:?]\n    at java.lang.instrument.ClassFileTransformer.transform(ClassFileTransformer.java:246) ~[?:?]\n    at sun.instrument.TransformerManager.transform(TransformerManager.java:188) ~[?:?]\n    at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:563) ~[?:?]\n    at sun.instrument.InstrumentationImpl.retransformClasses0(Native Method) ~[?:?]\n    at sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167) ~[?:?]\n    at com.beastcode.devops.prometheus.InstrumentationAgent.transform(InstrumentationAgent.java:82) ~[agent-1.0.0.jar:?]\n    at com.beastcode.devops.prometheus.InstrumentationAgent.transformClass(InstrumentationAgent.java:57) ~[agent-1.0.0.jar:?]\n    at com.beastcode.devops.prometheus.InstrumentationAgent.premain(InstrumentationAgent.java:35) ~[agent-1.0.0.jar:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:513) ~[?:?]\n    at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525) ~[?:?]\n...\n</code></pre>\n<p><code>com.beastcode.devops.prometheus.MetricsCollector</code> is the target class and it certainly exists as this is the &quot;main&quot; application code that is started by Spring Boot. This can be seen later in the console log:</p>\n<pre><code>...\n[INFO ] 2023-09-11 14:33:14.508 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:58) - Metrics information collected\n[INFO ] 2023-09-11 14:33:14.508 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:59) - Querying and writing data ...\n[INFO ] 2023-09-11 14:33:20.847 [main] com.beastcode.devops.prometheus.MetricsCollector.collectInstantHits(MetricsCollector.java:80) - Done\n</code></pre>\n<p>My pom.xml file uses the <code>spring-boot-maven-plugin</code> to handle building and packaging the application. I'm wondering if the class is not visible because perhaps I'm missing an option.</p>\n<p>Here is the application pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  \n  &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.11&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n  &lt;/parent&gt;\n  \n  &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\n  &lt;artifactId&gt;prometheus-metrics-sampler&lt;/artifactId&gt;\n  &lt;version&gt;1.1.2&lt;/version&gt;\n  \n  &lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    \n    &lt;slf4j.version&gt;1.7.36&lt;/slf4j.version&gt;\n    &lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\n    \n    &lt;prometheus-common.version&gt;1.2.2&lt;/prometheus-common.version&gt;\n\n    &lt;gitlab-url&gt;https://gitlab.phactory.beast-code.com&lt;/gitlab-url&gt;\n    &lt;gitlab-project-id&gt;863&lt;/gitlab-project-id&gt;\n  &lt;/properties&gt;\n\n  &lt;repositories&gt;\n    &lt;repository&gt;\n      &lt;id&gt;spring-milestones&lt;/id&gt;\n      &lt;name&gt;Spring Milestones&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n    &lt;/repository&gt;\n    \n    &lt;repository&gt;\n      &lt;id&gt;spring-snapshots&lt;/id&gt;\n      &lt;name&gt;Spring Snapshots&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n      &lt;releases&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/releases&gt;\n    &lt;/repository&gt;\n\n    &lt;repository&gt;\n      &lt;id&gt;phactory-gitlab-maven&lt;/id&gt;\n      &lt;url&gt;${gitlab-url}/api/v4/projects/${gitlab-project-id}/packages/maven&lt;/url&gt;\n    &lt;/repository&gt;\n  &lt;/repositories&gt;\n  \n  &lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n      &lt;id&gt;spring-milestones&lt;/id&gt;\n      &lt;name&gt;Spring Milestones&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n    &lt;/pluginRepository&gt;\n    \n    &lt;pluginRepository&gt;\n      &lt;id&gt;spring-snapshots&lt;/id&gt;\n      &lt;name&gt;Spring Snapshots&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n      &lt;releases&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/releases&gt;\n    &lt;/pluginRepository&gt;\n  &lt;/pluginRepositories&gt;\n\n  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      \n      &lt;dependency&gt;\n        &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\n        &lt;artifactId&gt;prometheus-common&lt;/artifactId&gt;\n        &lt;version&gt;${prometheus-common.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n\n  &lt;dependencies&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.beast-code.devops&lt;/groupId&gt;\n      &lt;artifactId&gt;prometheus-common&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  \n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Here is the agent class:</p>\n<pre><code>package com.beastcode.devops.prometheus;\n\nimport java.lang.instrument.Instrumentation;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class InstrumentationAgent {\n\n  private static Logger logger = LoggerFactory.getLogger(InstrumentationAgent.class);\n\n  public static void premain(String agentArgs, Instrumentation instrumentation) {\n    logger.info(&quot;[Agent] In premain method&quot;);\n    logger.info(&quot;[Agent] args: {}&quot;, agentArgs);\n\n    String[] args = agentArgs.split(&quot;:&quot;);\n    String className = args[0];\n    String methodName = args[1];\n\n    transformClass(className, methodName, instrumentation);\n  }\n\n  public static void agentmain(String agentArgs, Instrumentation instrumentation) {\n    logger.info(&quot;[Agent] In agentmain method&quot;);\n    logger.info(&quot;[Agent] args: {}&quot;, agentArgs);\n\n    String[] args = agentArgs.split(&quot;:&quot;);\n    String className = args[0];\n    String methodName = args[1];\n\n    transformClass(className, methodName, instrumentation);\n  }\n\n  private static void transformClass(String className, String methodName, Instrumentation instrumentation) {\n    Class&lt;?&gt; targetCls = null;\n    ClassLoader targetClassLoader = null;\n\n    // See if we can get the class using forName.\n    try {\n      targetCls = Class.forName(className);\n      targetClassLoader = targetCls.getClassLoader();\n      transform(targetCls, targetClassLoader, methodName, instrumentation);\n      return;\n    } catch (Exception e) {\n      logger.error(&quot;Class [{}] not found with Class.forName&quot;);\n    }\n\n    // Otherwise, iterate all loaded classes and find what we want.\n    for (Class&lt;?&gt; clazz : instrumentation.getAllLoadedClasses()) {\n      if (clazz.getName().equals(className)) {\n        targetCls = clazz;\n        targetClassLoader = targetCls.getClassLoader();\n        transform(targetCls, targetClassLoader, methodName, instrumentation);\n        return;\n      }\n    }\n\n    throw new RuntimeException(&quot;Failed to find class [&quot; + className + &quot;]&quot;);\n  }\n\n  private static void transform(Class&lt;?&gt; clazz, ClassLoader classLoader, String methodName,\n      Instrumentation instrumentation) {\n    Transformer transformer = new Transformer(clazz.getName(), classLoader, methodName);\n    instrumentation.addTransformer(transformer, true);\n\n    try {\n      instrumentation.retransformClasses(clazz);\n    } catch (Exception e) {\n      throw new RuntimeException(&quot;Transform failed for class: [&quot; + clazz.getName() + &quot;]&quot;, e);\n    }\n  }\n\n}\n</code></pre>\n<p>Here is the transformer class:</p>\n<pre><code>package com.beastcode.devops.prometheus;\n\nimport java.io.IOException;\nimport java.lang.instrument.ClassFileTransformer;\nimport java.lang.instrument.IllegalClassFormatException;\nimport java.security.ProtectionDomain;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport javassist.CannotCompileException;\nimport javassist.ClassPool;\nimport javassist.CtClass;\nimport javassist.CtMethod;\nimport javassist.NotFoundException;\n\npublic class Transformer implements ClassFileTransformer {\n\n  private static Logger     logger = LoggerFactory.getLogger(Transformer.class);\n\n  // The internal form class name of the class to transform.\n  private final String      targetClassName;\n  // The class loader of the class we want to transform.\n  private final ClassLoader targetClassLoader;\n\n  private final String      methodName;\n\n  public Transformer(String targetClassName, ClassLoader targetClassLoader, String methodName) {\n    this.targetClassName = targetClassName;\n    this.targetClassLoader = targetClassLoader;\n    this.methodName = methodName;\n  }\n\n  @Override\n  public byte[] transform(ClassLoader loader, String className, Class&lt;?&gt; classBeingRedefined,\n      ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException {\n    byte[] byteCode = classfileBuffer;\n\n    // Replace slashes (/) in target class name with periods (.) to construct a\n    // proper Java class name.\n    String finalTargetClassName = this.targetClassName.replaceAll(&quot;\\\\.&quot;, &quot;/&quot;);\n\n    if (!className.equals(finalTargetClassName)) {\n      return byteCode;\n    }\n\n    if (className.equals(finalTargetClassName) &amp;&amp; loader.equals(targetClassLoader)) {\n      logger.info(&quot;[Agent] Transforming class &quot; + finalTargetClassName);\n\n      /*\n       * TODO This is logic specific to what you are trying to instrument into the\n       * class and method of interest.\n       */\n\n      try {\n        ClassPool cp = ClassPool.getDefault();\n        CtClass cc = cp.get(targetClassName);\n        CtMethod mtd = cc.getDeclaredMethod(methodName);\n\n        mtd.addLocalVariable(&quot;startTime&quot;, CtClass.longType);\n        mtd.insertBefore(&quot;startTime = System.currentTimeMillis();&quot;);\n\n        StringBuilder endBlock = new StringBuilder();\n\n        mtd.addLocalVariable(&quot;endTime&quot;, CtClass.longType);\n        mtd.addLocalVariable(&quot;opTime&quot;, CtClass.longType);\n        endBlock.append(&quot;endTime = System.currentTimeMillis();&quot;);\n        endBlock.append(&quot;opTime = (endTime-startTime)/1000;&quot;);\n\n        endBlock.append(&quot;logger.info(\\&quot;[Application] Operation completed in:\\&quot; + opTime + \\&quot; seconds!\\&quot;);&quot;);\n\n        mtd.insertAfter(endBlock.toString());\n\n        byteCode = cc.toBytecode();\n        cc.detach();\n      } catch (NotFoundException | CannotCompileException | IOException e) {\n        logger.error(&quot;Exception&quot;, e);\n      }\n    }\n\n    return byteCode;\n  }\n\n}\n</code></pre>\n"},{"tags":["java","html","pdf","sendgrid","teneo"],"owner":{"account_id":1549807,"reputation":1,"user_id":1442479,"display_name":"RobFalla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694529984,"creation_date":1694529984,"question_id":77090261,"body_markdown":"I&#39;ve successfully created a template used by sendgrid to send an html formatted email to customer service at the end of an AI conversation. I discovered that when viewed in outlook the style elements were not being applied as expected (does not look the same in outlook as in a webmail client like gmail).\r\n\r\nI tried to transform the html output to a pdf document, hoping the look and feel issues would be resolved with a true representation of the html, but it was not. SendGrid only supports inline css and there are several further restrictions on what you can do with html, so I used tables to handle positioning. Unfortunately the H4 heading I inserted in the table, while looking fine in webmail, does not carry background colour into the pdf.\r\n\r\n```\r\n// ******************** reportNice ******************* //\r\nString reportNice = &quot;&lt;div style=&#39;padding:10px; margin:1px; color:white; font-family:Calibri, sans-serif; background-color:#305496;border-radius:8px;&#39;&gt;&lt;h2&gt;Automated Triage Response - ID: &quot; + caseID + &quot;&lt;/h2&gt;&quot;;\r\n// ******************** reportedBy ******************* //\r\nreportNice = reportNice + &quot;&lt;h3&gt;Summary:&lt;/h3&gt; &lt;table style=&#39;color:#565867; background-color:rgb(237,237,237);border-radius:10px;width:99%;&#39;&gt;\t&lt;tr&gt;&lt;td style=&#39;vertical-align:top; border-right:white solid thin;padding-right:10px;margin-right:10px;&#39;&gt;&lt;h4 style=&#39;background-color:rgba(48,84,150,.7);border:1px solid #ddd;color:#fff;padding-left:10px;border-radius:10px;&#39;&gt;Reporter Details&lt;/h4&gt;&quot;;\r\n// ******************** reportedBy ********************* //\r\nString reportedBy = &quot;&lt;p&gt;Reported by: [ &quot; + howKnown + &quot; ]&quot;;\r\nif(howKnown!=&quot;anonymous&quot;) {\r\nreportedBy = reportedBy + Lib_sUserFirstName + &quot; &quot; + Lib_sUserSurname;\r\n}\r\nreportedBy = reportedBy + &quot;&lt;/p&gt;&quot;;\r\nreportedBy = reportedBy + &quot;&lt;ul&gt;&lt;li&gt;Contact email: &lt;b style=&#39;color:black;&#39;&gt;&quot;;\r\nif(email!=&quot;&quot;) {\r\nreportedBy = reportedBy + email + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\r\n}\r\nif(phone!=&quot;&quot;) {\r\nreportedBy = reportedBy + &quot;&lt;li&gt;Contact phone: &lt;b style=&#39;color:black;&#39;&gt;&quot; + phone + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\r\n}\r\nif(commMethod!=&quot;&quot;) {\r\nreportedBy = reportedBy + &quot;&lt;li&gt;Preferred contact method: &lt;b style=&#39;color:black;&#39;&gt;&quot; + commMethod + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\r\n}\r\nreportedBy = reportedBy + &quot;&lt;/ul&gt;&lt;/td&gt;&quot;;\r\n...\r\n\r\n```\r\nSendGrid transforms the user response to html and it looks fine, but when the html is transformed to pdf the background-color on the h4 is lost:\r\n`&lt;h4 style=&#39;background-color:rgba(48,84,150,.7);border:1px solid #ddd;color:#fff;padding-left:10px;border-radius:10px;&#39;&gt;`\r\nIf anyone here has experience with Teneo, Java, HTML, PDF, SendGrid and has made it work I would appreciate some ponters.","title":"Convert a Teneo HTML report to PDF while maintaining the style","body":"<p>I've successfully created a template used by sendgrid to send an html formatted email to customer service at the end of an AI conversation. I discovered that when viewed in outlook the style elements were not being applied as expected (does not look the same in outlook as in a webmail client like gmail).</p>\n<p>I tried to transform the html output to a pdf document, hoping the look and feel issues would be resolved with a true representation of the html, but it was not. SendGrid only supports inline css and there are several further restrictions on what you can do with html, so I used tables to handle positioning. Unfortunately the H4 heading I inserted in the table, while looking fine in webmail, does not carry background colour into the pdf.</p>\n<pre><code>// ******************** reportNice ******************* //\nString reportNice = &quot;&lt;div style='padding:10px; margin:1px; color:white; font-family:Calibri, sans-serif; background-color:#305496;border-radius:8px;'&gt;&lt;h2&gt;Automated Triage Response - ID: &quot; + caseID + &quot;&lt;/h2&gt;&quot;;\n// ******************** reportedBy ******************* //\nreportNice = reportNice + &quot;&lt;h3&gt;Summary:&lt;/h3&gt; &lt;table style='color:#565867; background-color:rgb(237,237,237);border-radius:10px;width:99%;'&gt; &lt;tr&gt;&lt;td style='vertical-align:top; border-right:white solid thin;padding-right:10px;margin-right:10px;'&gt;&lt;h4 style='background-color:rgba(48,84,150,.7);border:1px solid #ddd;color:#fff;padding-left:10px;border-radius:10px;'&gt;Reporter Details&lt;/h4&gt;&quot;;\n// ******************** reportedBy ********************* //\nString reportedBy = &quot;&lt;p&gt;Reported by: [ &quot; + howKnown + &quot; ]&quot;;\nif(howKnown!=&quot;anonymous&quot;) {\nreportedBy = reportedBy + Lib_sUserFirstName + &quot; &quot; + Lib_sUserSurname;\n}\nreportedBy = reportedBy + &quot;&lt;/p&gt;&quot;;\nreportedBy = reportedBy + &quot;&lt;ul&gt;&lt;li&gt;Contact email: &lt;b style='color:black;'&gt;&quot;;\nif(email!=&quot;&quot;) {\nreportedBy = reportedBy + email + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\n}\nif(phone!=&quot;&quot;) {\nreportedBy = reportedBy + &quot;&lt;li&gt;Contact phone: &lt;b style='color:black;'&gt;&quot; + phone + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\n}\nif(commMethod!=&quot;&quot;) {\nreportedBy = reportedBy + &quot;&lt;li&gt;Preferred contact method: &lt;b style='color:black;'&gt;&quot; + commMethod + &quot;&lt;/b&gt;&lt;/li&gt;&quot;;\n}\nreportedBy = reportedBy + &quot;&lt;/ul&gt;&lt;/td&gt;&quot;;\n...\n\n</code></pre>\n<p>SendGrid transforms the user response to html and it looks fine, but when the html is transformed to pdf the background-color on the h4 is lost:\n<code>&lt;h4 style='background-color:rgba(48,84,150,.7);border:1px solid #ddd;color:#fff;padding-left:10px;border-radius:10px;'&gt;</code>\nIf anyone here has experience with Teneo, Java, HTML, PDF, SendGrid and has made it work I would appreciate some ponters.</p>\n"},{"tags":["java","google-api","google-analytics-api","google-api-java-client","google-analytics-4"],"comments":[{"owner":{"account_id":1593537,"reputation":1348,"user_id":1476321,"accept_rate":41,"display_name":"Chris Harrington"},"score":0,"creation_date":1692127796,"post_id":76906201,"comment_id":135581524,"body_markdown":"I would suggest having Fiddler or equivalent capture the traffic so you can see what API calls are being made. Is generally a useful thing to do with APIs - especially if you&#39;re using a client library instead of making HTTP calls directly.","body":"I would suggest having Fiddler or equivalent capture the traffic so you can see what API calls are being made. Is generally a useful thing to do with APIs - especially if you&#39;re using a client library instead of making HTTP calls directly."},{"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1692782063,"post_id":76906201,"comment_id":135669943,"body_markdown":"please edit your question and include [example] there is not enough code here to recreate the issue.   I have used multiple addDimensions and it works fine.","body":"please edit your question and include <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> there is not enough code here to recreate the issue.   I have used multiple addDimensions and it works fine."}],"answers":[{"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694529792,"creation_date":1694529792,"answer_id":77090243,"question_id":76906201,"body_markdown":"This is a java and / or filter for what I created,Remember filtering of events and dimensions should be in a compatible way. Log in [Here][1] and play with your events, dimensions and metrics to find out.\r\n\r\nof course, you can change date range as well.\r\n\r\n \r\n\r\n    `GoogleCredentials credentials =\r\n    \t\t\t\t\tGoogleCredentials.fromStream(new FileInputStream(credentialsJsonPath));\r\n    \r\n    \t\t\tBetaAnalyticsDataSettings betaAnalyticsDataSettings =\r\n    \t\t\t\t\tBetaAnalyticsDataSettings.newBuilder()\r\n    \t\t\t\t\t.setCredentialsProvider(FixedCredentialsProvider.create(credentials))\r\n    \t\t\t\t\t.build();    \r\n    \r\n    \t\t\ttry (BetaAnalyticsDataClient analyticsData =\r\n    \t\t\t\t\tBetaAnalyticsDataClient.create(betaAnalyticsDataSettings)) {\r\n    \r\n    \r\n    \r\n    \t\t\t\tRunReportRequest request =\r\n    \t\t\t\t\t\tRunReportRequest.newBuilder()\r\n    \t\t\t\t\t\t.setProperty(&quot;properties/&quot; + your propertyId)\r\n    \t\t\t\t\t\t.addDateRanges(DateRange.newBuilder().setStartDate(&quot;365daysAgo&quot;).setEndDate(&quot;yesterday&quot;))\r\n    \t\t\t\t\t\t \r\n    \r\n    \r\n    \t\t\t\t\t\t.addDimensions(Dimension.newBuilder().setName(&quot;date&quot;)) \r\n    \t\t\t\t\t\t.addDimensions(Dimension.newBuilder().setName(&quot;eventName&quot;))\r\n    \t\t\t\t\t\t.addDimensions(Dimension.newBuilder().setName(&quot;customEvent:XXXXX&quot;)) // instead of XXXXX write your custom dimension\r\n    \t\t\t\t\t\t.addDimensions(Dimension.newBuilder().setName(&quot;fullPageUrl&quot;)) // this is not a customised dimension\r\n    \r\n    \r\n    \r\n    \t\t\t\t\t\t.addMetrics(Metric.newBuilder().setName(&quot;eventCount&quot;))\r\n    \t\t\t\t\t\t.addMetrics(Metric.newBuilder().setName(&quot;eventsPerSession&quot;))\r\n    \t\t\t\t\t\t.addMetrics(Metric.newBuilder().setName(&quot;eventValue&quot;))\r\n    \r\n    \r\n    \t\t\t\t\t\t.setDimensionFilter(FilterExpression.newBuilder()\r\n    \t\t\t\t\t\t\t\t.setOrGroup(FilterExpressionList.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t.addExpressions(FilterExpression.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.setFilter(Filter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setFieldName(&quot;eventName&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setStringFilter(Filter.StringFilter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setMatchType(Filter.StringFilter.MatchType.EXACT)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setValue(&quot;your 1st event to filter&quot;))))  // for example page_view\r\n    \t\t\t\t\t\t\t\t\t\t.addExpressions(FilterExpression.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.setFilter(Filter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setFieldName(&quot;eventName&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setStringFilter(Filter.StringFilter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setMatchType(Filter.StringFilter.MatchType.EXACT)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setValue(&quot;your 2nd event&quot;)))))\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t.setAndGroup(FilterExpressionList.newBuilder().addExpressions(FilterExpression.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.setFilter(Filter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setFieldName(&quot;eventName&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setStringFilter(Filter.StringFilter.newBuilder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setMatchType(Filter.StringFilter.MatchType.EXACT)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.setValue(&quot;your 3rd event&quot;))))))\r\n    \r\n    \t\t\t\t\t\t.setLimit(100000)\r\n    \t\t\t\t\t\t.build();\r\n    \r\n    \t\t\t\t \r\n    \t\t\t\tRunReportResponse response = analyticsData.runReport(request);`\r\n\r\n\r\n  [1]: https://ga-dev-tools.google/ga4/dimensions-metrics-explorer/\r\n\r\n\r\nThe Request Body as an example could be like this:\r\n\r\n    \r\n    property: &quot;properties/write your propertId&quot;\r\n    dimensions {\r\n      name: &quot;date&quot;\r\n    }\r\n    dimensions {\r\n      name: &quot;eventName&quot;\r\n    }\r\n    dimensions {\r\n      name: &quot;customEvent:category&quot; // my custom dimensions is category that should be written after &quot;customEvent:&quot; \r\n    }\r\n    dimensions {\r\n      name: &quot;customEvent:action&quot; // my custom dimensions is action that should be written after &quot;customEvent:&quot; \r\n    }\r\n    dimensions {\r\n      name: &quot;customEvent:label&quot; // my custom dimensions is label that should be written after &quot;customEvent:&quot; \r\n    }\r\n    metrics {\r\n      name: &quot;eventCount&quot;\r\n    }\r\n    metrics {\r\n      name: &quot;eventsPerSession&quot;\r\n    }\r\n    metrics {\r\n      name: &quot;eventValue&quot;\r\n    }\r\n    date_ranges {\r\n      start_date: &quot;2023-05-22&quot; \r\n      end_date: &quot;2023-05-23&quot;\r\n    }\r\n    dimension_filter {\r\n      or_group {\r\n        expressions {\r\n          filter {\r\n            field_name: &quot;eventName&quot;\r\n            string_filter {\r\n              match_type: EXACT\r\n              value: &quot;Something&quot;  \r\n            }\r\n          }\r\n        }\r\n        expressions {\r\n          filter {\r\n            field_name: &quot;eventName&quot;\r\n            string_filter {\r\n              match_type: EXACT\r\n              value: &quot;myCustomEventName &quot; // as an example I wrote my customised event name\r\n            }\r\n          }\r\n        }\r\n        expressions {\r\n          and_group {\r\n            expressions {\r\n              filter {\r\n                field_name: &quot;eventName&quot;\r\n                string_filter {\r\n                  match_type: EXACT\r\n                  value: &quot;SOMETHING&quot;   \r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n","title":"GA4 Data API - How to set multiple dimensions and metrics","body":"<p>This is a java and / or filter for what I created,Remember filtering of events and dimensions should be in a compatible way. Log in <a href=\"https://ga-dev-tools.google/ga4/dimensions-metrics-explorer/\" rel=\"nofollow noreferrer\">Here</a> and play with your events, dimensions and metrics to find out.</p>\n<p>of course, you can change date range as well.</p>\n<pre><code>`GoogleCredentials credentials =\n                    GoogleCredentials.fromStream(new FileInputStream(credentialsJsonPath));\n\n            BetaAnalyticsDataSettings betaAnalyticsDataSettings =\n                    BetaAnalyticsDataSettings.newBuilder()\n                    .setCredentialsProvider(FixedCredentialsProvider.create(credentials))\n                    .build();    \n\n            try (BetaAnalyticsDataClient analyticsData =\n                    BetaAnalyticsDataClient.create(betaAnalyticsDataSettings)) {\n\n\n\n                RunReportRequest request =\n                        RunReportRequest.newBuilder()\n                        .setProperty(&quot;properties/&quot; + your propertyId)\n                        .addDateRanges(DateRange.newBuilder().setStartDate(&quot;365daysAgo&quot;).setEndDate(&quot;yesterday&quot;))\n                         \n\n\n                        .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;)) \n                        .addDimensions(Dimension.newBuilder().setName(&quot;eventName&quot;))\n                        .addDimensions(Dimension.newBuilder().setName(&quot;customEvent:XXXXX&quot;)) // instead of XXXXX write your custom dimension\n                        .addDimensions(Dimension.newBuilder().setName(&quot;fullPageUrl&quot;)) // this is not a customised dimension\n\n\n\n                        .addMetrics(Metric.newBuilder().setName(&quot;eventCount&quot;))\n                        .addMetrics(Metric.newBuilder().setName(&quot;eventsPerSession&quot;))\n                        .addMetrics(Metric.newBuilder().setName(&quot;eventValue&quot;))\n\n\n                        .setDimensionFilter(FilterExpression.newBuilder()\n                                .setOrGroup(FilterExpressionList.newBuilder()\n                                        .addExpressions(FilterExpression.newBuilder()\n                                                .setFilter(Filter.newBuilder()\n                                                        .setFieldName(&quot;eventName&quot;)\n                                                        .setStringFilter(Filter.StringFilter.newBuilder()\n                                                                .setMatchType(Filter.StringFilter.MatchType.EXACT)\n                                                                .setValue(&quot;your 1st event to filter&quot;))))  // for example page_view\n                                        .addExpressions(FilterExpression.newBuilder()\n                                                .setFilter(Filter.newBuilder()\n                                                        .setFieldName(&quot;eventName&quot;)\n                                                        .setStringFilter(Filter.StringFilter.newBuilder()\n                                                                .setMatchType(Filter.StringFilter.MatchType.EXACT)\n                                                                .setValue(&quot;your 2nd event&quot;)))))\n                                \n                                \n                                \n                                \n                                .setAndGroup(FilterExpressionList.newBuilder().addExpressions(FilterExpression.newBuilder()\n                                                .setFilter(Filter.newBuilder()\n                                                        .setFieldName(&quot;eventName&quot;)\n                                                        .setStringFilter(Filter.StringFilter.newBuilder()\n                                                                .setMatchType(Filter.StringFilter.MatchType.EXACT)\n                                                                .setValue(&quot;your 3rd event&quot;))))))\n\n                        .setLimit(100000)\n                        .build();\n\n                 \n                RunReportResponse response = analyticsData.runReport(request);`\n</code></pre>\n<p>The Request Body as an example could be like this:</p>\n<pre><code>property: &quot;properties/write your propertId&quot;\ndimensions {\n  name: &quot;date&quot;\n}\ndimensions {\n  name: &quot;eventName&quot;\n}\ndimensions {\n  name: &quot;customEvent:category&quot; // my custom dimensions is category that should be written after &quot;customEvent:&quot; \n}\ndimensions {\n  name: &quot;customEvent:action&quot; // my custom dimensions is action that should be written after &quot;customEvent:&quot; \n}\ndimensions {\n  name: &quot;customEvent:label&quot; // my custom dimensions is label that should be written after &quot;customEvent:&quot; \n}\nmetrics {\n  name: &quot;eventCount&quot;\n}\nmetrics {\n  name: &quot;eventsPerSession&quot;\n}\nmetrics {\n  name: &quot;eventValue&quot;\n}\ndate_ranges {\n  start_date: &quot;2023-05-22&quot; \n  end_date: &quot;2023-05-23&quot;\n}\ndimension_filter {\n  or_group {\n    expressions {\n      filter {\n        field_name: &quot;eventName&quot;\n        string_filter {\n          match_type: EXACT\n          value: &quot;Something&quot;  \n        }\n      }\n    }\n    expressions {\n      filter {\n        field_name: &quot;eventName&quot;\n        string_filter {\n          match_type: EXACT\n          value: &quot;myCustomEventName &quot; // as an example I wrote my customised event name\n        }\n      }\n    }\n    expressions {\n      and_group {\n        expressions {\n          filter {\n            field_name: &quot;eventName&quot;\n            string_filter {\n              match_type: EXACT\n              value: &quot;SOMETHING&quot;   \n            }\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":16886280,"reputation":11,"user_id":12211014,"display_name":"Denizcan Yılmaz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":305,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694529792,"creation_date":1692104812,"question_id":76906201,"body_markdown":"I am trying to generate a report using the Data API of GA4. However, I could not manage to add multiple metrics or dimensions to my report builder. \r\n\r\nThis is how I try to achieve this functionality:\r\n\r\n``` \r\n           RunReportRequest request =\r\n                RunReportRequest.newBuilder()\r\n                .setProperty(&quot;properties/&quot; + propertyId)\r\n                .addAllDimensions(new ArrayList&lt;Dimension&gt;(Arrays.asList(Dimension.newBuilder().setName(&quot;date&quot;).build(), Dimension.newBuilder().setName(&quot;day&quot;).build())))\r\n//                .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;))\r\n//                .addMetrics(Metric.newBuilder().setName(&quot;totalUsers&quot;).setName(&quot;screenPageViews&quot;))\r\n                .addAllMetrics(new ArrayList&lt;Metric&gt;(Arrays.asList(Metric.newBuilder().setName(&quot;totalUsers&quot;).build(), Metric.newBuilder().setName(&quot;screenPageViews&quot;).build())))\r\n                .addDateRanges(DateRange.newBuilder().setStartDate(&quot;yesterday&quot;).setEndDate(&quot;today&quot;))\r\n                .build();\r\n```\r\nAny help is appreciated.\r\n\r\n\r\nI tried to get my report with 2 dimensions and 2 metrics, but instead got it with 1 dimension and 1 metric, which is the first one in both cases.","title":"GA4 Data API - How to set multiple dimensions and metrics","body":"<p>I am trying to generate a report using the Data API of GA4. However, I could not manage to add multiple metrics or dimensions to my report builder.</p>\n<p>This is how I try to achieve this functionality:</p>\n<pre><code>           RunReportRequest request =\n                RunReportRequest.newBuilder()\n                .setProperty(&quot;properties/&quot; + propertyId)\n                .addAllDimensions(new ArrayList&lt;Dimension&gt;(Arrays.asList(Dimension.newBuilder().setName(&quot;date&quot;).build(), Dimension.newBuilder().setName(&quot;day&quot;).build())))\n//                .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;))\n//                .addMetrics(Metric.newBuilder().setName(&quot;totalUsers&quot;).setName(&quot;screenPageViews&quot;))\n                .addAllMetrics(new ArrayList&lt;Metric&gt;(Arrays.asList(Metric.newBuilder().setName(&quot;totalUsers&quot;).build(), Metric.newBuilder().setName(&quot;screenPageViews&quot;).build())))\n                .addDateRanges(DateRange.newBuilder().setStartDate(&quot;yesterday&quot;).setEndDate(&quot;today&quot;))\n                .build();\n</code></pre>\n<p>Any help is appreciated.</p>\n<p>I tried to get my report with 2 dimensions and 2 metrics, but instead got it with 1 dimension and 1 metric, which is the first one in both cases.</p>\n"},{"tags":["java","spring-boot","parameters","nativequery"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694531696,"post_id":77090227,"comment_id":135901818,"body_markdown":"This has nothing to do with Spring Boot 3 but rather Hibernate fixing things (as it worked by change not design). If you want to pass entities write a JPQL which actually holds the mapping information.","body":"This has nothing to do with Spring Boot 3 but rather Hibernate fixing things (as it worked by change not design). If you want to pass entities write a JPQL which actually holds the mapping information."},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1694536088,"post_id":77090227,"comment_id":135902802,"body_markdown":"BTW &#39;changing the call of the method to send these types&#39; can be easily avoided, just keep the original version of the method as a default interface method that will delegate to the new method","body":"BTW &#39;changing the call of the method to send these types&#39; can be easily avoided, just keep the original version of the method as a default interface method that will delegate to the new method"},{"owner":{"account_id":3795035,"reputation":331,"user_id":3150408,"display_name":"maccer"},"score":0,"creation_date":1694600237,"post_id":77090227,"comment_id":135911561,"body_markdown":"Thanks. @m-deinum – do you know if there is any Hibernate documentation to read about this change and the reasons for it, as it came as a surprise for me?","body":"Thanks. @m-deinum – do you know if there is any Hibernate documentation to read about this change and the reasons for it, as it came as a surprise for me?"},{"owner":{"account_id":3795035,"reputation":331,"user_id":3150408,"display_name":"maccer"},"score":0,"creation_date":1694600342,"post_id":77090227,"comment_id":135911576,"body_markdown":"Thanks @crizzis, if there is no other option where I can avoid null-checks or using JPA queries, I guess using default interface methods (a new concept to me, just tried it out and it works) is a viable option. But I still need to do the null checks in that method. Also, the interface method that is changed to user Integers can&#39;t be made private, so I will then expose both methods to the callers which could be confusing.","body":"Thanks @crizzis, if there is no other option where I can avoid null-checks or using JPA queries, I guess using default interface methods (a new concept to me, just tried it out and it works) is a viable option. But I still need to do the null checks in that method. Also, the interface method that is changed to user Integers can&#39;t be made private, so I will then expose both methods to the callers which could be confusing."},{"owner":{"account_id":1806969,"reputation":102,"user_id":1643891,"display_name":"Sup19"},"score":0,"creation_date":1702038599,"post_id":77090227,"comment_id":136851662,"body_markdown":"@maccer Stumbled on the same issue just now. Did you happened to find any supporting documentation by hibernate? Also, what approach did you take to fix this?","body":"@maccer Stumbled on the same issue just now. Did you happened to find any supporting documentation by hibernate? Also, what approach did you take to fix this?"}],"owner":{"account_id":3795035,"reputation":331,"user_id":3150408,"display_name":"maccer"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694529678,"creation_date":1694529678,"question_id":77090227,"body_markdown":"Can entity classes be used as parameters for repository method calls for native queries in Spring Boot 3?\r\n\r\nI have some native queries that I have defined in a Spring CrudRepository:\r\n\r\n    @Repository\r\n    interface DataValueRepository extends CrudRepository&lt;DataValue, Long&gt; {\r\n    \r\n    \r\n    @Query(value=&quot;&quot;&quot;&quot;\r\n    select .......\r\n    from data_value dv\r\n                where\r\n                    (:neighborhood is null or neighborhood_id = :neighborhood) and\r\n                    (:property is null or property_id = :property) and\r\n                    (:building is null or building_id = :building) and\r\n                    (:household is null or household_id = :household) and\r\n                    datetime_local &gt;= :dateLocalFrom and\r\n                    datetime_local &lt; :dateLocalToExclusive and\r\n                    type in (:types) and\r\n                    level = :level\r\n    &quot;&quot;&quot;\r\n    , nativeQuery = true)\r\n    List&lt;Object[]&gt; getAggregatedDataValuesWithoutTime(Neighborhood neighborhood, Property property, Building building, Household household, List&lt;String&gt; types, String level, LocalDate dateLocalFrom, LocalDate dateLocalToExclusive);\r\n    \r\n    }\r\n\r\nIn Spring Boot 2.7, I can send in entity objects such as Neighborhood neighborhood as above, and the :neighborhood in the native query will be substituted by the neighborhood id – or null if the entity is null. \r\n\r\nI *used* to be able to call the repository method like so, where neighborhood, property, building, household are entity objects:\r\n\r\n    dataValueRepository.getAggregatedDataValuesWithoutTime(neighborhood, property, building, household, dataValueTypes.stream().map(DataValueType::name).toList(), level.name(), period.name(), dateLocalFrom, dateLocalToExclusive);\r\n\r\n\r\n**After upgrading to Spring Boot 3, this no longer works**. I get an error\r\n\r\n    Could not resolve NativeQuery parameter type : `org.hibernate.query.internal.QueryParameterNamedImpl@aaba12d3`\r\n\r\nI found a workaround in this post that says that it no longer works to pass entities into the repository methods: \r\n[https://stackoverflow.com/a/76522587/3150408][1]\r\n\r\nSo rewriting the repository method to use Integer / Long instead of the entity classes...\r\n\r\n    List&lt;Object[]&gt; getAggregatedDataValuesWithoutTime(Integer neighborhood, Integer property, Integer building, Long household, List&lt;String&gt; types, String level, String targetPeriod, LocalDate dateLocalFrom, LocalDate dateLocalToExclusive);\r\n\r\n...and changing the call of the method to send these types...\r\n\r\n    dataValueRepository.getAggregatedDataValuesWithoutTime(neighborhood != null ? neighborhood.getId() : null, property != null ? property.getId() : null, building != null ? building.getId() : null, household != null ? household.getId() : null, dataValueTypes.stream().map(DataValueType::name).toList(), level.name(), period.name(), dateLocalFrom, dateLocalToExclusive);\r\n\r\n...makes the error go away. \r\n\r\nBut I think it is quite cumbersome to having to write all the null checks on the entity objects. Is this really the only way of calling these methods in Spring Boot 3? Is there no way to use entities with native queries as before? I can&#39;t find any details in any upgrade guides about this change.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76522587/3150408","title":"Can entity classes be used as parameters for CrudRepository native queries in Spring Boot 3?","body":"<p>Can entity classes be used as parameters for repository method calls for native queries in Spring Boot 3?</p>\n<p>I have some native queries that I have defined in a Spring CrudRepository:</p>\n<pre><code>@Repository\ninterface DataValueRepository extends CrudRepository&lt;DataValue, Long&gt; {\n\n\n@Query(value=&quot;&quot;&quot;&quot;\nselect .......\nfrom data_value dv\n            where\n                (:neighborhood is null or neighborhood_id = :neighborhood) and\n                (:property is null or property_id = :property) and\n                (:building is null or building_id = :building) and\n                (:household is null or household_id = :household) and\n                datetime_local &gt;= :dateLocalFrom and\n                datetime_local &lt; :dateLocalToExclusive and\n                type in (:types) and\n                level = :level\n&quot;&quot;&quot;\n, nativeQuery = true)\nList&lt;Object[]&gt; getAggregatedDataValuesWithoutTime(Neighborhood neighborhood, Property property, Building building, Household household, List&lt;String&gt; types, String level, LocalDate dateLocalFrom, LocalDate dateLocalToExclusive);\n\n}\n</code></pre>\n<p>In Spring Boot 2.7, I can send in entity objects such as Neighborhood neighborhood as above, and the :neighborhood in the native query will be substituted by the neighborhood id – or null if the entity is null.</p>\n<p>I <em>used</em> to be able to call the repository method like so, where neighborhood, property, building, household are entity objects:</p>\n<pre><code>dataValueRepository.getAggregatedDataValuesWithoutTime(neighborhood, property, building, household, dataValueTypes.stream().map(DataValueType::name).toList(), level.name(), period.name(), dateLocalFrom, dateLocalToExclusive);\n</code></pre>\n<p><strong>After upgrading to Spring Boot 3, this no longer works</strong>. I get an error</p>\n<pre><code>Could not resolve NativeQuery parameter type : `org.hibernate.query.internal.QueryParameterNamedImpl@aaba12d3`\n</code></pre>\n<p>I found a workaround in this post that says that it no longer works to pass entities into the repository methods:\n<a href=\"https://stackoverflow.com/a/76522587/3150408\">https://stackoverflow.com/a/76522587/3150408</a></p>\n<p>So rewriting the repository method to use Integer / Long instead of the entity classes...</p>\n<pre><code>List&lt;Object[]&gt; getAggregatedDataValuesWithoutTime(Integer neighborhood, Integer property, Integer building, Long household, List&lt;String&gt; types, String level, String targetPeriod, LocalDate dateLocalFrom, LocalDate dateLocalToExclusive);\n</code></pre>\n<p>...and changing the call of the method to send these types...</p>\n<pre><code>dataValueRepository.getAggregatedDataValuesWithoutTime(neighborhood != null ? neighborhood.getId() : null, property != null ? property.getId() : null, building != null ? building.getId() : null, household != null ? household.getId() : null, dataValueTypes.stream().map(DataValueType::name).toList(), level.name(), period.name(), dateLocalFrom, dateLocalToExclusive);\n</code></pre>\n<p>...makes the error go away.</p>\n<p>But I think it is quite cumbersome to having to write all the null checks on the entity objects. Is this really the only way of calling these methods in Spring Boot 3? Is there no way to use entities with native queries as before? I can't find any details in any upgrade guides about this change.</p>\n"},{"tags":["java","xtext","language-server-protocol"],"comments":[{"owner":{"account_id":11293739,"reputation":3639,"user_id":8281848,"display_name":"MSpiller"},"score":0,"creation_date":1694176730,"post_id":77063252,"comment_id":135860671,"body_markdown":"Are you talking about the commands that are part of the [LSP protocol](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#command) or do you want to extend the LSP protocol itself?","body":"Are you talking about the commands that are part of the <a href=\"https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#command\" rel=\"nofollow noreferrer\">LSP protocol</a> or do you want to extend the LSP protocol itself?"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694183292,"post_id":77063252,"comment_id":135862090,"body_markdown":"I want to extend the protocol. Pass custom commands that are not part of the LSP.","body":"I want to extend the protocol. Pass custom commands that are not part of the LSP."},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694183359,"post_id":77063252,"comment_id":135862104,"body_markdown":"I have seen some examples on how to write a server from scratch in nodejs and java, but not getting a simple enough example to extend an existing server impl.","body":"I have seen some examples on how to write a server from scratch in nodejs and java, but not getting a simple enough example to extend an existing server impl."},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694183546,"post_id":77063252,"comment_id":135862131,"body_markdown":"Here the methods defined from ILanguageServerExtension gets added to the map: https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132","body":"Here the methods defined from ILanguageServerExtension gets added to the map: <a href=\"https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132\" rel=\"nofollow noreferrer\">github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694236352,"post_id":77063252,"comment_id":135868055,"body_markdown":"are you aware of the server module. this is the one contructing the LanguageServerImpl","body":"are you aware of the server module. this is the one contructing the LanguageServerImpl"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694260470,"post_id":77063252,"comment_id":135869883,"body_markdown":"I have added the code above where I bind MyLanguageServerExtension in MyIdeModule using bindILanguageServerExtension","body":"I have added the code above where I bind MyLanguageServerExtension in MyIdeModule using bindILanguageServerExtension"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694260505,"post_id":77063252,"comment_id":135869885,"body_markdown":"@ChristianDietrich please check my edit 2","body":"@ChristianDietrich please check my edit 2"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694265399,"post_id":77063252,"comment_id":135870395,"body_markdown":"again Server Module = Server in general. Ide Module = Language Specific.\n=&gt; where did you bind your LanguageServer Subclass","body":"again Server Module = Server in general. Ide Module = Language Specific. =&gt; where did you bind your LanguageServer Subclass"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694326926,"post_id":77063252,"comment_id":135874947,"body_markdown":"I am using the existing SocketServerLauncher and LanguageServerImpl. I thought if you are using ILanguageServerExtension, you don&#39;t need to write your own LanguageServer. Maybe I have misunderstood the purpose of ILanguageServerExtension in that case","body":"I am using the existing SocketServerLauncher and LanguageServerImpl. I thought if you are using ILanguageServerExtension, you don&#39;t need to write your own LanguageServer. Maybe I have misunderstood the purpose of ILanguageServerExtension in that case"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694327059,"post_id":77063252,"comment_id":135874955,"body_markdown":"what do I need to implement in my LanguageServer subclass?","body":"what do I need to implement in my LanguageServer subclass?"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694496837,"post_id":77063252,"comment_id":135894560,"body_markdown":"beside that it would be really helpful to have a reproducing sample and unit test.","body":"beside that it would be really helpful to have a reproducing sample and unit test."},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694496981,"post_id":77063252,"comment_id":135894573,"body_markdown":"you might also have a look at org.eclipse.xtext.ide.tests.testlanguage.ide.TestLangLSPExtension in Xtext codebase","body":"you might also have a look at org.eclipse.xtext.ide.tests.testlanguage.ide.TestLangLSPExte&zwnj;&#8203;nsion in Xtext codebase"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694497073,"post_id":77063252,"comment_id":135894589,"body_markdown":"if you want to subclass language server you need to create your own launcher class / servermodule subclass","body":"if you want to subclass language server you need to create your own launcher class / servermodule subclass"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694502753,"post_id":77063252,"comment_id":135895378,"body_markdown":"@ChristianDietrich I have based my code on TestLangLSPExtension, and ideally I would not want to implement my own LanguageServer. I have used the existing SocketServerLauncher and LanguageServerImpl, and implemented  MyLanguageServerExtension, which I have shown above.","body":"@ChristianDietrich I have based my code on TestLangLSPExtension, and ideally I would not want to implement my own LanguageServer. I have used the existing SocketServerLauncher and LanguageServerImpl, and implemented  MyLanguageServerExtension, which I have shown above."},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694502816,"post_id":77063252,"comment_id":135895395,"body_markdown":"I am skeptical of what JSON message does `client.sendRequest` actually sends. Maybe that&#39;s the culprit -- will debug it and get back","body":"I am skeptical of what JSON message does <code>client.sendRequest</code> actually sends. Maybe that&#39;s the culprit -- will debug it and get back"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694518361,"post_id":77063252,"comment_id":135898503,"body_markdown":"maybe the problem is also the simple param.\nto my knowledge all parameters in the protocol are wrapped into params objects","body":"maybe the problem is also the simple param. to my knowledge all parameters in the protocol are wrapped into params objects"}],"answers":[{"comments":[{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694520972,"post_id":77088922,"comment_id":135899089,"body_markdown":"That&#39;s good news! So does that confirm that `client.sendRequest` is not written the right way? Here is how parameters are supposed to be created: https://www.jsonrpc.org/specification#parameter_structures","body":"That&#39;s good news! So does that confirm that <code>client.sendRequest</code> is not written the right way? Here is how parameters are supposed to be created: <a href=\"https://www.jsonrpc.org/specification#parameter_structures\" rel=\"nofollow noreferrer\">jsonrpc.org/specification#parameter_structures</a>"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694521457,"post_id":77088922,"comment_id":135899214,"body_markdown":"does the test work for you too? did you remote debug the server? what does extensionproviders contain? what does supportedMethods method see from your extension? does it go into any of the log error cases?","body":"does the test work for you too? did you remote debug the server? what does extensionproviders contain? what does supportedMethods method see from your extension? does it go into any of the log error cases?"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694521903,"post_id":77088922,"comment_id":135899324,"body_markdown":"I have added the output of supportedMethods in the last part of &quot;Edit 2&quot;","body":"I have added the output of supportedMethods in the last part of &quot;Edit 2&quot;"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694521924,"post_id":77088922,"comment_id":135899328,"body_markdown":"I will try out the test and get back","body":"I will try out the test and get back"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1694529452,"post_id":77088922,"comment_id":135901239,"body_markdown":"could you please give me some details on how you ran the above test? I have added the failure trace above as edit 3","body":"could you please give me some details on how you ran the above test? I have added the failure trace above as edit 3"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694530570,"post_id":77088922,"comment_id":135901527,"body_markdown":"added missing dependencies like junit4 (the `@Test` is from junit4), lsp4j, lsp4j.jsonrpc, gson, aopalliance and co to the deps of the tests project. in the tests launch config select junit4","body":"added missing dependencies like junit4 (the <code>@Test</code> is from junit4), lsp4j, lsp4j.jsonrpc, gson, aopalliance and co to the deps of the tests project. in the tests launch config select junit4"}],"tags":[],"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694520164,"creation_date":1694520164,"answer_id":77088922,"question_id":77063252,"body_markdown":"i gave it a quick try with this test and it works fine\r\n\r\n\tpublic class DullyTest extends AbstractLanguageServerTest {\r\n\r\n\t\tpublic DullyTest() {\r\n\t\t\tsuper(&quot;mydsl&quot;);\r\n\t\t}\r\n\r\n\r\n\t\t@Test\r\n\t\tpublic void testit() throws InterruptedException, ExecutionException {\r\n\t\t\tinitialize( (e) -&gt; {});\r\n\r\n\t\t\tMessageConsumer consumer = new MessageConsumer() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void consume(Message message) throws MessageIssueException, JsonRpcException {\r\n\t\t\t\t\tSystem.out.println(message);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t// languageServer.supportedMethods();\r\n\t\t\tRemoteEndpoint endpoint = new RemoteEndpoint(consumer , languageServer);\r\n\t\t\tendpoint.consume(init(new RequestMessage(), it -&gt; {\r\n\t\t\t\tit.setId(&quot;1&quot;);\r\n\t\t\t\tit.setMethod(&quot;custom/data&quot;);\r\n\t\t\t\tit.setParams(&quot;myparam&quot;);\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tstatic &lt;T&gt; T init(T value, Consumer&lt;T&gt; initializer) {\r\n\t\t\tinitializer.accept(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t}","title":"Custom messages in xtext based language server","body":"<p>i gave it a quick try with this test and it works fine</p>\n<pre><code>public class DullyTest extends AbstractLanguageServerTest {\n\n    public DullyTest() {\n        super(&quot;mydsl&quot;);\n    }\n\n\n    @Test\n    public void testit() throws InterruptedException, ExecutionException {\n        initialize( (e) -&gt; {});\n\n        MessageConsumer consumer = new MessageConsumer() {\n            @Override\n            public void consume(Message message) throws MessageIssueException, JsonRpcException {\n                System.out.println(message);\n            }\n        };\n        // languageServer.supportedMethods();\n        RemoteEndpoint endpoint = new RemoteEndpoint(consumer , languageServer);\n        endpoint.consume(init(new RequestMessage(), it -&gt; {\n            it.setId(&quot;1&quot;);\n            it.setMethod(&quot;custom/data&quot;);\n            it.setParams(&quot;myparam&quot;);\n        }));\n    }\n\n    static &lt;T&gt; T init(T value, Consumer&lt;T&gt; initializer) {\n        initializer.accept(value);\n        return value;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694529553,"creation_date":1694126899,"question_id":77063252,"body_markdown":"I am trying to extend my language server to handle custom commands from VS Code client. To debug, I am using `SocketLanguageServer`. I send a custom command from the client:\r\n```js\r\nclient.sendRequest(&quot;custom/data&quot;, &quot;foo&quot;).then(data =&gt; console.log(data));\r\n```\r\nSince the server is not aware of this command, as expected, I get\r\n```bash\r\norg.eclipse.lsp4j.jsonrpc.RemoteEndpoint fallbackResponseError\r\nSEVERE: Internal error: The json request &#39;custom/data&#39; is unknown.\r\njava.lang.UnsupportedOperationException: The json request &#39;custom/data&#39; is unknown.\r\n\tat org.eclipse.xtext.ide.server.LanguageServerImpl.request(LanguageServerImpl.java:1039)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.GenericEndpoint.request(GenericEndpoint.java:127)\r\n\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.handleRequest(RemoteEndpoint.java:261)\r\n\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.consume(RemoteEndpoint.java:190)\r\n\tat org.eclipse.lsp4j.jsonrpc.validation.ReflectiveMessageValidator.consume(ReflectiveMessageValidator.java:68)\r\n\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.handleMessage(StreamMessageProducer.java:194)\r\n\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:94)\r\n\tat org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:113)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\nJust by implementing `ILanguageServerExtension` (leaving it empty as below)\r\n```java\r\n@JsonSegment(&quot;custom&quot;)\r\npublic class MyLanguageServerExtension implements ILanguageServerExtension {\r\n\r\n\t@Override\r\n\tpublic void initialize(ILanguageServerAccess access) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t}\r\n}\r\n```\r\nand binding it in `MyIdeModule`\r\n```java\r\npublic class MyIdeModule extends AbstractKinematicsIdeModule {\r\n\r\n\tpublic Class&lt;? extends ILanguageServerExtension&gt; bindILanguageServerExtension() {\r\n\t\treturn MyLanguageServerExtension.class;\r\n\t}\r\n}\r\n\r\n```\r\nI don&#39;t get the error anymore, but the client still complains of the promise not accepted\r\n```\r\nstack trace: Error: Internal error.\r\n\tat handleResponse (./node_modules/vscode-jsonrpc/lib/common/connection.js:477:48)\r\n\tat processMessageQueue (./node_modules/vscode-jsonrpc/lib/common/connection.js:292:17)\r\n\tat Immediate.&lt;anonymous&gt; (./node_modules/vscode-jsonrpc/lib/common/connection.js:276:13)\r\n\tat process.processImmediate (node:internal/timers:466:21)\r\n\tat process.callbackTrampoline (node:internal/async_hooks:130:17)\r\n/usr/share/code/resources/app/out/vs/workbench/api/node/out-vscode/vs/workbench/api/node/file:/mnt/vss/_work/1/s/src/vs/workbench/api/node/extHostConsoleForwarder.ts:31\r\nrejected promise not handled within 1 second: Error [ERR_STREAM_DESTROYED]: Cannot call write after a stream was destroyed\r\n```\r\nThere aren&#39;t many examples out there on how to use `ILanguageServerExtension`, and the ones which are available (e.g. sprotty) are way too complex. What is the minimal steps to make `MyLanguageServerExtension` aware of these custom commands? \r\n\r\n**Edit 1:** I implemented the following function in `MyLanguageServerExtension`, but same behaviour\r\n```java\r\n\t@JsonNotification\r\n\tCompletableFuture &lt;String&gt;  data(String message) {\r\n\t\tSystem.out.println(message);\r\n\t\tCompletableFuture&lt;String&gt; completableFuture = new CompletableFuture&lt;&gt;();\r\n\t\tcompletableFuture.complete(message + &quot; Hello from server!&quot;);\r\n\t\treturn completableFuture;\r\n\t}\r\n```\r\n**Edit 2:** based on the code here: https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132 and the example here https://github.com/eclipse/xtext/blob/94c00e3ea5a6f952806a9e1a94b2325481e4eca4/org.eclipse.xtext.ide.tests/testlang-src/org/eclipse/xtext/ide/tests/testlanguage/ide/TestLangLSPExtension.java, I updated the code as follows\r\n```java\r\n@JsonSegment(&quot;custom&quot;)\r\npublic class MyLanguageServerExtension implements JsonRpcMethodProvider, ILanguageServerExtension {\r\n\r\n\t\r\n\tprivate ILanguageServerAccess access;\r\n\r\n\r\n\t@Override\r\n\tpublic void initialize(ILanguageServerAccess access) {\r\n\t\tthis.access = access;\r\n\t}\r\n\r\n\t@Override\r\n    public Map&lt;String, JsonRpcMethod&gt; supportedMethods() {\r\n\t\t// Define the supported methods and their corresponding JSON-RPC handlers here\r\n        Map&lt;String, JsonRpcMethod&gt; methods = new HashMap&lt;&gt;();\r\n        methods.putAll(ServiceEndpoints.getSupportedMethods(getClass()));\r\n        return methods;\r\n\t}\r\n\t\r\n\t@JsonRequest\r\n\tCompletableFuture &lt;String&gt;  data(String message) {\r\n\t\tSystem.out.println(message);\r\n\t\treturn CompletableFuture.completedFuture(message + &quot; Hello from server!&quot;);\r\n\t}\r\n}\r\n```\r\nBut still the method doesn&#39;t get called. The `supportedMethods()` gets called though. This is the print of `methods`\r\n```\r\n{custom/data=JsonRpcMethod (request) {\r\n\tmethodName: custom/data\r\n\tparameterTypes: [Ljava.lang.reflect.Type;@56a4479a\r\n\treturnType: class java.lang.String\r\n}}\r\n\r\n```\r\n**Edit 3:** failure trace of the test shown below\r\n```\r\njava.lang.TypeNotPresentException: Type [unknown] not present\r\n\tat java.base/sun.reflect.annotation.TypeNotPresentExceptionProxy.generateException(TypeNotPresentExceptionProxy.java:47)\r\n\tat java.base/sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:88)\r\n\tat com.sun.proxy.$Proxy28.value(Unknown Source)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.lambda$getSupportedMethods$0(ServiceEndpoints.java:102)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:66)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:60)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.getSupportedMethods(ServiceEndpoints.java:90)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.getSupportedMethods(ServiceEndpoints.java:82)\r\n\tat org.eclipse.xtext.ide.server.LanguageServerImpl.supportedMethods(LanguageServerImpl.java:1060)\r\n\tat org.eclipse.xtext.testing.AbstractLanguageServerTest.setup(AbstractLanguageServerTest.java:252)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeEachMethod(TimeoutExtension.java:76)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:490)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeBeforeEachMethodAdapter$19(ClassBasedTestDescriptor.java:475)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachMethods$2(TestMethodTestDescriptor.java:167)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$5(TestMethodTestDescriptor.java:195)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:195)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachMethods(TestMethodTestDescriptor.java:164)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n\tSuppressed: java.lang.NullPointerException: Cannot invoke &quot;java.io.File.exists()&quot; because &quot;this.root&quot; is null\r\n\t\tat org.eclipse.xtext.testing.AbstractLanguageServerTest.cleanup(AbstractLanguageServerTest.java:262)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\t\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\t\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\t\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\t\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\r\n\t\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptAfterEachMethod(TimeoutExtension.java:108)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\t\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:490)\r\n\t\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeAfterEachMethodAdapter$20(ClassBasedTestDescriptor.java:480)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachMethods$9(TestMethodTestDescriptor.java:236)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$12(TestMethodTestDescriptor.java:269)\r\n\t\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:269)\r\n\t\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:268)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachMethods(TestMethodTestDescriptor.java:234)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\t\t... 47 more\r\nCaused by: java.lang.NoClassDefFoundError: com/google/gson/TypeAdapterFactory\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\r\n\tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:151)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:821)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:719)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:642)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:600)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:427)\r\n\tat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)\r\n\tat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)\r\n\tat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseSig(AnnotationParser.java:440)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseClassValue(AnnotationParser.java:421)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:350)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:287)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:121)\r\n\tat java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:73)\r\n\tat java.base/java.lang.reflect.Executable.declaredAnnotations(Executable.java:614)\r\n\tat java.base/java.lang.reflect.Executable.declaredAnnotations(Executable.java:612)\r\n\tat java.base/java.lang.reflect.Executable.getAnnotation(Executable.java:582)\r\n\tat java.base/java.lang.reflect.Method.getAnnotation(Method.java:693)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.createMethodInfo(AnnotationUtil.java:78)\r\n\tat org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:64)\r\n\t... 78 more\r\nCaused by: java.lang.ClassNotFoundException: com.google.gson.TypeAdapterFactory\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\t... 104 more\r\n```\r\n","title":"Custom messages in xtext based language server","body":"<p>I am trying to extend my language server to handle custom commands from VS Code client. To debug, I am using <code>SocketLanguageServer</code>. I send a custom command from the client:</p>\n<pre class=\"lang-js prettyprint-override\"><code>client.sendRequest(&quot;custom/data&quot;, &quot;foo&quot;).then(data =&gt; console.log(data));\n</code></pre>\n<p>Since the server is not aware of this command, as expected, I get</p>\n<pre class=\"lang-bash prettyprint-override\"><code>org.eclipse.lsp4j.jsonrpc.RemoteEndpoint fallbackResponseError\nSEVERE: Internal error: The json request 'custom/data' is unknown.\njava.lang.UnsupportedOperationException: The json request 'custom/data' is unknown.\n    at org.eclipse.xtext.ide.server.LanguageServerImpl.request(LanguageServerImpl.java:1039)\n    at org.eclipse.lsp4j.jsonrpc.services.GenericEndpoint.request(GenericEndpoint.java:127)\n    at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.handleRequest(RemoteEndpoint.java:261)\n    at org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.consume(RemoteEndpoint.java:190)\n    at org.eclipse.lsp4j.jsonrpc.validation.ReflectiveMessageValidator.consume(ReflectiveMessageValidator.java:68)\n    at org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.handleMessage(StreamMessageProducer.java:194)\n    at org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:94)\n    at org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:113)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>Just by implementing <code>ILanguageServerExtension</code> (leaving it empty as below)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonSegment(&quot;custom&quot;)\npublic class MyLanguageServerExtension implements ILanguageServerExtension {\n\n    @Override\n    public void initialize(ILanguageServerAccess access) {\n        // TODO Auto-generated method stub\n        \n    }\n}\n</code></pre>\n<p>and binding it in <code>MyIdeModule</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyIdeModule extends AbstractKinematicsIdeModule {\n\n    public Class&lt;? extends ILanguageServerExtension&gt; bindILanguageServerExtension() {\n        return MyLanguageServerExtension.class;\n    }\n}\n\n</code></pre>\n<p>I don't get the error anymore, but the client still complains of the promise not accepted</p>\n<pre><code>stack trace: Error: Internal error.\n    at handleResponse (./node_modules/vscode-jsonrpc/lib/common/connection.js:477:48)\n    at processMessageQueue (./node_modules/vscode-jsonrpc/lib/common/connection.js:292:17)\n    at Immediate.&lt;anonymous&gt; (./node_modules/vscode-jsonrpc/lib/common/connection.js:276:13)\n    at process.processImmediate (node:internal/timers:466:21)\n    at process.callbackTrampoline (node:internal/async_hooks:130:17)\n/usr/share/code/resources/app/out/vs/workbench/api/node/out-vscode/vs/workbench/api/node/file:/mnt/vss/_work/1/s/src/vs/workbench/api/node/extHostConsoleForwarder.ts:31\nrejected promise not handled within 1 second: Error [ERR_STREAM_DESTROYED]: Cannot call write after a stream was destroyed\n</code></pre>\n<p>There aren't many examples out there on how to use <code>ILanguageServerExtension</code>, and the ones which are available (e.g. sprotty) are way too complex. What is the minimal steps to make <code>MyLanguageServerExtension</code> aware of these custom commands?</p>\n<p><strong>Edit 1:</strong> I implemented the following function in <code>MyLanguageServerExtension</code>, but same behaviour</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @JsonNotification\n    CompletableFuture &lt;String&gt;  data(String message) {\n        System.out.println(message);\n        CompletableFuture&lt;String&gt; completableFuture = new CompletableFuture&lt;&gt;();\n        completableFuture.complete(message + &quot; Hello from server!&quot;);\n        return completableFuture;\n    }\n</code></pre>\n<p><strong>Edit 2:</strong> based on the code here: <a href=\"https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132\" rel=\"nofollow noreferrer\">https://github.com/eclipse/xtext/blob/main/org.eclipse.xtext.ide/src/org/eclipse/xtext/ide/server/LanguageServerImpl.java#L1108-L1132</a> and the example here <a href=\"https://github.com/eclipse/xtext/blob/94c00e3ea5a6f952806a9e1a94b2325481e4eca4/org.eclipse.xtext.ide.tests/testlang-src/org/eclipse/xtext/ide/tests/testlanguage/ide/TestLangLSPExtension.java\" rel=\"nofollow noreferrer\">https://github.com/eclipse/xtext/blob/94c00e3ea5a6f952806a9e1a94b2325481e4eca4/org.eclipse.xtext.ide.tests/testlang-src/org/eclipse/xtext/ide/tests/testlanguage/ide/TestLangLSPExtension.java</a>, I updated the code as follows</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonSegment(&quot;custom&quot;)\npublic class MyLanguageServerExtension implements JsonRpcMethodProvider, ILanguageServerExtension {\n\n    \n    private ILanguageServerAccess access;\n\n\n    @Override\n    public void initialize(ILanguageServerAccess access) {\n        this.access = access;\n    }\n\n    @Override\n    public Map&lt;String, JsonRpcMethod&gt; supportedMethods() {\n        // Define the supported methods and their corresponding JSON-RPC handlers here\n        Map&lt;String, JsonRpcMethod&gt; methods = new HashMap&lt;&gt;();\n        methods.putAll(ServiceEndpoints.getSupportedMethods(getClass()));\n        return methods;\n    }\n    \n    @JsonRequest\n    CompletableFuture &lt;String&gt;  data(String message) {\n        System.out.println(message);\n        return CompletableFuture.completedFuture(message + &quot; Hello from server!&quot;);\n    }\n}\n</code></pre>\n<p>But still the method doesn't get called. The <code>supportedMethods()</code> gets called though. This is the print of <code>methods</code></p>\n<pre><code>{custom/data=JsonRpcMethod (request) {\n    methodName: custom/data\n    parameterTypes: [Ljava.lang.reflect.Type;@56a4479a\n    returnType: class java.lang.String\n}}\n\n</code></pre>\n<p><strong>Edit 3:</strong> failure trace of the test shown below</p>\n<pre><code>java.lang.TypeNotPresentException: Type [unknown] not present\n    at java.base/sun.reflect.annotation.TypeNotPresentExceptionProxy.generateException(TypeNotPresentExceptionProxy.java:47)\n    at java.base/sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:88)\n    at com.sun.proxy.$Proxy28.value(Unknown Source)\n    at org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.lambda$getSupportedMethods$0(ServiceEndpoints.java:102)\n    at org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:66)\n    at org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:60)\n    at org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.getSupportedMethods(ServiceEndpoints.java:90)\n    at org.eclipse.lsp4j.jsonrpc.services.ServiceEndpoints.getSupportedMethods(ServiceEndpoints.java:82)\n    at org.eclipse.xtext.ide.server.LanguageServerImpl.supportedMethods(LanguageServerImpl.java:1060)\n    at org.eclipse.xtext.testing.AbstractLanguageServerTest.setup(AbstractLanguageServerTest.java:252)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeEachMethod(TimeoutExtension.java:76)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:490)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeBeforeEachMethodAdapter$19(ClassBasedTestDescriptor.java:475)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachMethods$2(TestMethodTestDescriptor.java:167)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$5(TestMethodTestDescriptor.java:195)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:195)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachMethods(TestMethodTestDescriptor.java:164)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\n    at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n    Suppressed: java.lang.NullPointerException: Cannot invoke &quot;java.io.File.exists()&quot; because &quot;this.root&quot; is null\n        at org.eclipse.xtext.testing.AbstractLanguageServerTest.cleanup(AbstractLanguageServerTest.java:262)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n        at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\n        at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n        at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n        at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\n        at org.junit.jupiter.engine.extension.TimeoutExtension.interceptAfterEachMethod(TimeoutExtension.java:108)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:490)\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeAfterEachMethodAdapter$20(ClassBasedTestDescriptor.java:480)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachMethods$9(TestMethodTestDescriptor.java:236)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$12(TestMethodTestDescriptor.java:269)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:269)\n        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:268)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachMethods(TestMethodTestDescriptor.java:234)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n        ... 47 more\nCaused by: java.lang.NoClassDefFoundError: com/google/gson/TypeAdapterFactory\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:151)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:821)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:719)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:642)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:600)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:427)\n    at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)\n    at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)\n    at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseSig(AnnotationParser.java:440)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseClassValue(AnnotationParser.java:421)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:350)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:287)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:121)\n    at java.base/sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:73)\n    at java.base/java.lang.reflect.Executable.declaredAnnotations(Executable.java:614)\n    at java.base/java.lang.reflect.Executable.declaredAnnotations(Executable.java:612)\n    at java.base/java.lang.reflect.Executable.getAnnotation(Executable.java:582)\n    at java.base/java.lang.reflect.Method.getAnnotation(Method.java:693)\n    at org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.createMethodInfo(AnnotationUtil.java:78)\n    at org.eclipse.lsp4j.jsonrpc.services.AnnotationUtil.findRpcMethods(AnnotationUtil.java:64)\n    ... 78 more\nCaused by: java.lang.ClassNotFoundException: com.google.gson.TypeAdapterFactory\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n    ... 104 more\n</code></pre>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":1450087,"reputation":11188,"user_id":1409374,"display_name":"rickhg12hs"},"score":1,"creation_date":1694517339,"post_id":77088079,"comment_id":135898290,"body_markdown":"You can _&quot;update fields in a MongoDB collection object based on their old values&quot;_ by using a [pipeline in the update](https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/).","body":"You can <i>&quot;update fields in a MongoDB collection object based on their old values&quot;</i> by using a <a href=\"https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/\" rel=\"nofollow noreferrer\">pipeline in the update</a>."}],"owner":{"account_id":13747822,"reputation":19,"user_id":22492868,"display_name":"Nikilai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694529502,"creation_date":1694512985,"question_id":77088079,"body_markdown":"I need to update fields in a MongoDB collection object based on their old values. My task involves encoding certain fields in all MongoDB documents from a specific collection. I&#39;m wondering if there&#39;s a way to update a field based on its old value, perhaps using a callback API or a similar approach. My project is written in Java.\r\n\r\nI&#39;ve attempted to update the collection as follows: I first retrieve all documents from the collection and then iterate over each document, using updateOne based on the document ID.\r\n\r\nThank you in advance!","title":"Update field in mongodb collection object based on old value","body":"<p>I need to update fields in a MongoDB collection object based on their old values. My task involves encoding certain fields in all MongoDB documents from a specific collection. I'm wondering if there's a way to update a field based on its old value, perhaps using a callback API or a similar approach. My project is written in Java.</p>\n<p>I've attempted to update the collection as follows: I first retrieve all documents from the collection and then iterate over each document, using updateOne based on the document ID.</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","multithreading","parallel-processing"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694529335,"post_id":77090117,"comment_id":135901202,"body_markdown":"&quot;I think there are not any bugs on it&quot; but can you guarantee it?","body":"&quot;I think there are not any bugs on it&quot; but can you guarantee it?"},{"owner":{"account_id":23028733,"reputation":1,"user_id":17148547,"display_name":"Yuqi LU"},"score":0,"creation_date":1694530172,"post_id":77090117,"comment_id":135901428,"body_markdown":"Yes, I can guarantee it.","body":"Yes, I can guarantee it."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694532044,"post_id":77090117,"comment_id":135901915,"body_markdown":"I like your moxy, but if I remember my half-assed CS courses correctly, you can&#39;t prove that there is no bug in a piece of code. It&#39;s called the Faulting Problem.","body":"I like your moxy, but if I remember my half-assed CS courses correctly, you can&#39;t prove that there is no bug in a piece of code. It&#39;s called the Faulting Problem."},{"owner":{"account_id":23028733,"reputation":1,"user_id":17148547,"display_name":"Yuqi LU"},"score":0,"creation_date":1694532337,"post_id":77090117,"comment_id":135901970,"body_markdown":"That is not the main point. For the first MergeSortTask, I can compare it with the ground truth, and I have done it on my own computer but did not include it due to decreasing the complexity of the code. And I have tried many times and the problem is not on that part. That is why I said it has no bug.","body":"That is not the main point. For the first MergeSortTask, I can compare it with the ground truth, and I have done it on my own computer but did not include it due to decreasing the complexity of the code. And I have tried many times and the problem is not on that part. That is why I said it has no bug."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694532513,"post_id":77090117,"comment_id":135902006,"body_markdown":"`Arrays.parallelSort()` is at least not documented to be stable, do you know if it is?","body":"<code>Arrays.parallelSort()</code> is at least not documented to be stable, do you know if it is?"}],"owner":{"account_id":23028733,"reputation":1,"user_id":17148547,"display_name":"Yuqi LU"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694529114,"creation_date":1694529005,"question_id":77090117,"body_markdown":"Here is the code.\r\n\r\nI use parallel computing to build the merge sort and the MergeSortTask class creates multiple threads to divide the array into some sub-array and use merge sort to sort it. The MergeTask is the thread to merge two sorted arrays into one sorted array. For generating array is in the getArray function, and I add a seed on this generating part.\r\nFor the MergeSortTask part, I think there are not any bugs on it. So the problem is on the MergeTask part.\r\nFor the two input arrays a,b. I try to get the rank(a) and rank(b), of each element using binary search which means the position in arrays a and b if I put the element into that array. And the default data is Long.MIN_VALUE in the result array, and if \r\n\r\n    result[rank(a)+rank(b)].equal(Long.MIN_VALUE) \r\n\r\nI may assign that element into that position, if not just use open addressing.\r\n\r\n    import java.util.*;\r\n    public class TotalParallelMergeSort {\r\n        static Long[] arr;\r\n        static Long[] checking;\r\n        static int pnum = 10;\r\n    \r\n        static Long[] result;\r\n    \r\n        static int size=100000;\r\n    \r\n        static int beginning=0;\r\n    \r\n        static Queue&lt;Long[]&gt; que= new LinkedList&lt;&gt;();\r\n        static Long[] a;\r\n        static Long[] b;\r\n        \r\n        private static class MergeTask extends Thread {\r\n            int[] Class;\r\n            int[] rank;\r\n            public MergeTask(int[] Class, int[] rank) {\r\n                this.Class=Class;\r\n                this.rank=rank;\r\n            }\r\n    \r\n            public void run() {\r\n                int lastFind = 0;\r\n                for (int i = 0; i &lt; this.Class.length; i++) {\r\n                    if (i &gt; 0 &amp;&amp; this.Class[i] == this.Class[i - 1] &amp;&amp;\r\n                            ((this.Class[i] == 0 &amp;&amp; a[rank[i]].equals(a[rank[i] - 1]) ) ||\r\n                                    (this.Class[i] == 1 &amp;&amp; b[rank[i]].equals(b[rank[i] - 1])))) {\r\n                        boolean tmp = true;\r\n                        while (lastFind &lt; result.length &amp;&amp; tmp) {\r\n                            synchronized (result[lastFind]) {\r\n                                if (result[lastFind] != Long.MIN_VALUE) {lastFind++;}\r\n                                  else {\r\n                                    result[lastFind] = this.Class[i] == 0 ? a[rank[i]] : b[rank[i]];\r\n                                    tmp = false;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (this.Class[i] == 0) {\r\n                        int left = 0;\r\n                        int right = b.length - 1;\r\n                        while (right &gt; left) {\r\n                            int mid = (right + left) / 2;\r\n                            if (a[rank[i]] &lt;= b[mid]) {\r\n                                right = mid - 1;\r\n                            } else if (a[rank[i]] &gt; b[mid]) {\r\n                                left = mid + 1;\r\n                            }\r\n                        }\r\n                        while (left &lt; b.length &amp;&amp; a[rank[i]] &gt; b[left]) left++;\r\n                        boolean tmp = true;\r\n                        while (tmp) {\r\n                            synchronized (result[rank[i] + left]) {\r\n                                if (result[rank[i] + left] != Long.MIN_VALUE) {\r\n                                    left++;\r\n                                } else {\r\n                                    tmp = false;\r\n                                }\r\n                            }\r\n                        }\r\n                        result[rank[i] + left] = a[rank[i]];\r\n                        lastFind = rank[i] + left;\r\n                    }\r\n                    else if (this.Class[i] == 1) {\r\n                        int left = 0;\r\n                        int right = a.length - 1;\r\n                        while (right &gt; left) {\r\n                            int mid = (right + left) / 2;\r\n                            if (b[rank[i]] &lt;= a[mid]) {\r\n                                right = mid - 1;\r\n                            } else if (b[rank[i]] &gt; a[mid]) {\r\n                                left = mid + 1;\r\n                            }\r\n                        }\r\n                        while (left &lt; a.length &amp;&amp; b[rank[i]] &gt; a[left]) left++;\r\n                        boolean tmp = true;\r\n                        while (tmp) {\r\n                            synchronized (result[rank[i] + left]) {\r\n                                if ( result[rank[i] + left] != Long.MIN_VALUE) {\r\n                                    left++;\r\n                                } else {\r\n                                    tmp = false;\r\n                                }\r\n                            }\r\n                        }\r\n                        result[rank[i] + left] = b[rank[i]];\r\n                        lastFind = rank[i] + left;\r\n                    }\r\n                }\r\n            }\r\n    \r\n        }\r\n        private static class MergeSortTask extends Thread {\r\n            private long left;\r\n            private long right;\r\n            private  Long[] result;\r\n    \r\n            public MergeSortTask(long left, long right) {\r\n                this.left = left;\r\n                this.right = right;\r\n                this.result = new Long[(int) (right-left)];\r\n                for(int i= 0;i&lt;(right-left);i++){\r\n                    this.result[i]=arr[(int) (i+left)];\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public void run() {\r\n                mergeSort(this.result, (int) (right-left));\r\n            }\r\n    \r\n        }\r\n    \r\n        public static void mergeSort(Long[] a, int n) {\r\n            if(n&lt;2)\r\n                return;\r\n            int mid = n / 2;\r\n            Long[] l = new Long[mid];\r\n            Long[] r = new Long[n - mid];\r\n    \r\n            for (int i = 0; i &lt; mid; i++) {\r\n                l[i] = a[i];\r\n            }\r\n            for (int i = mid; i &lt; n; i++) {\r\n                r[i - mid] = a[i];\r\n            }\r\n            mergeSort(l, mid);\r\n            mergeSort(r, n - mid);\r\n    \r\n            merge(a, l, r, mid, n - mid);\r\n        }\r\n    \r\n        public static void  merge(Long[] a, Long[] l, Long[] r, int left, int right) {\r\n            int i = 0, j = 0, k = 0;\r\n            while (i &lt; left &amp;&amp; j &lt; right) {\r\n                if (l[i] &lt;= r[j]) {\r\n                    a[k++] = l[i++];\r\n                }\r\n                else {\r\n                    a[k++] = r[j++];\r\n                }\r\n            }\r\n            while (i &lt; left) {\r\n                a[k++] = l[i++];\r\n            }\r\n            while (j &lt; right) {\r\n                a[k++] = r[j++];\r\n            }\r\n        }\r\n    \r\n        static public Long[] getArray(int beginning, int length) {\r\n            Long[] num = new Long[length];\r\n            num[0] = (long) beginning;\r\n            Random r = new Random(1);\r\n            for (int i = 1; i &lt; length; i++) {\r\n                int tmp = r.nextInt(10);\r\n                if (tmp &lt; 7 ) num[i] = num[i - 1];\r\n                else num[i] = num[i - 1] + r.nextInt(4);\r\n            }\r\n            Long[] randomPosition=new Long[length];\r\n            Arrays.fill(randomPosition,Long.MIN_VALUE);\r\n            for(int i=0;i&lt;length;i++){\r\n                int tmp=0;\r\n                while(randomPosition[tmp]!=Long.MIN_VALUE){ tmp = r.nextInt(length);}\r\n                randomPosition[tmp]=num[i];\r\n            }\r\n            return randomPosition;\r\n        }\r\n        static public void check(Long[] result){\r\n            boolean check = true;\r\n            if(result.length!=checking.length){\r\n                System.out.println(&quot;length do mot match&quot;);\r\n            }\r\n            for (int i = 0; i &lt; checking.length; i++) {\r\n                if (!result[i].equals(checking[i])) {\r\n                    check = false;\r\n                    System.out.println(i + &quot; &quot; + result[i] + &quot; &quot; + checking[i]);\r\n                }\r\n            }\r\n            if (check)\r\n                System.out.println(&quot;checked&quot;);\r\n            else\r\n                System.out.println(&quot;unchecked&quot;);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            MergeSortTask[] tasks = new MergeSortTask[pnum];\r\n    \r\n            arr=getArray(beginning,size);\r\n    \r\n            checking = new Long[size];\r\n            System.arraycopy(arr, 0, checking, 0, size);\r\n            long start = System.currentTimeMillis();\r\n            Arrays.parallelSort(checking);\r\n            long end = System.currentTimeMillis();\r\n            System.out.println(&quot;Build in parallel sort cost &quot;+(end-start)+&quot; Millis.&quot;);\r\n    \r\n            start = System.currentTimeMillis();\r\n    \r\n            int left=0;\r\n            int right=size/pnum;\r\n            int last=size%pnum;\r\n            for (int i = 0; i &lt; pnum; i++) {\r\n                if (last &gt; 0) {\r\n                    right++;\r\n                    last--;\r\n                }\r\n                tasks[i] = new MergeSortTask(left, right);\r\n                left = right;\r\n                right += size / pnum;\r\n                tasks[i].start();\r\n            }\r\n            try {\r\n                for (int i = 0; i &lt; pnum; i++) {\r\n                    tasks[i].join();\r\n                }\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Error &quot; + e);\r\n            }\r\n    \r\n            end = System.currentTimeMillis();\r\n            System.out.println(&quot;distribute into &quot;+pnum+&quot; sub tasks and get &quot;+pnum+&quot; sorted array cost &quot;+(end-start)+&quot; Millis.&quot;);\r\n            start = System.currentTimeMillis();\r\n            for(int i=0;i&lt;pnum;i++){\r\n                que.offer(tasks[i].result);\r\n            }\r\n            while(que.size()&gt;1){\r\n                a=que.poll();\r\n                b=que.poll();\r\n                int lengthA=a.length, lengthB=b.length;\r\n                result=new Long[lengthA+lengthB];\r\n                Arrays.fill(result, Long.MIN_VALUE);\r\n                int size=lengthA+lengthB;\r\n                MergeTask[] mergeTasks = new MergeTask[pnum];\r\n                right = size / pnum;\r\n                last = size % pnum;\r\n                int aleft = lengthA, bleft = lengthB;\r\n                for (int i = 0; i &lt; pnum; i++) {\r\n                    if (last &gt; 0) {\r\n                        right++;\r\n                        last--;\r\n                    }\r\n                    int[] classes = new int[right];\r\n                    int[] ranks = new int[right];\r\n                    if (aleft &gt;= right) {\r\n                        Arrays.fill(classes, 0);\r\n                        for (int j = 0; j &lt; right; j++) {\r\n                            ranks[j] = lengthA - aleft;\r\n                            aleft--;\r\n                        }\r\n                    } else {\r\n                        if (aleft == 0) {\r\n                            Arrays.fill(classes, 1);\r\n                            for (int j = 0; j &lt; right; j++) {\r\n                                ranks[j] = lengthB - bleft;\r\n                                bleft--;\r\n                            }\r\n                        } else {\r\n                            int tmp = aleft;\r\n                            for (int j = 0; j &lt; tmp; j++) {\r\n                                classes[j] = 0;\r\n                                ranks[j] = lengthA - aleft;\r\n                                aleft--;\r\n                            }\r\n                            for (int j = tmp; j &lt; right; j++) {\r\n                                classes[j] = 1;\r\n                                ranks[j] = lengthB - bleft;\r\n                                bleft--;\r\n                            }\r\n                        }\r\n                    }\r\n                    mergeTasks[i] = new MergeTask(classes, ranks);\r\n                    right = size / pnum;\r\n                    mergeTasks[i].start();\r\n                }\r\n    \r\n                try {\r\n                    for (int i = 0; i &lt; pnum; i++) {\r\n                        mergeTasks[i].join();\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(&quot;Error &quot; + e);\r\n                }\r\n                que.offer(result);\r\n    \r\n            }\r\n    \r\n            result=que.peek();\r\n    \r\n            end=System.currentTimeMillis();\r\n    \r\n            System.out.println(&quot;finish parallel merge in &quot;+(end-start)+&quot; Millis&quot;);\r\n    \r\n            check(result);\r\n        }\r\n    }\r\n\r\n\r\nAnd here is the question. I have a checking function, which I first use a built-in parallel sort function to get the ground truth and check whether the sorted array I got is right. Output the different values. As I assigned the seed, so the input should always be the same. But sometimes my own merging works, sometimes it does not. Moreover, when is does not work, the output result is also different.\r\n\r\n   85679 -9223372036854775808 38679\r\n\r\nor\r\n    50110 -9223372036854775808 22694\r\n\r\netc.\r\n\r\nAnd I do not know why. Is it about the multiple threads I used?\r\nThanks a lot","title":"Result not stable for parallel merge sort in java, for the same input, sometimes it works, sometimes not","body":"<p>Here is the code.</p>\n<p>I use parallel computing to build the merge sort and the MergeSortTask class creates multiple threads to divide the array into some sub-array and use merge sort to sort it. The MergeTask is the thread to merge two sorted arrays into one sorted array. For generating array is in the getArray function, and I add a seed on this generating part.\nFor the MergeSortTask part, I think there are not any bugs on it. So the problem is on the MergeTask part.\nFor the two input arrays a,b. I try to get the rank(a) and rank(b), of each element using binary search which means the position in arrays a and b if I put the element into that array. And the default data is Long.MIN_VALUE in the result array, and if</p>\n<pre><code>result[rank(a)+rank(b)].equal(Long.MIN_VALUE) \n</code></pre>\n<p>I may assign that element into that position, if not just use open addressing.</p>\n<pre><code>import java.util.*;\npublic class TotalParallelMergeSort {\n    static Long[] arr;\n    static Long[] checking;\n    static int pnum = 10;\n\n    static Long[] result;\n\n    static int size=100000;\n\n    static int beginning=0;\n\n    static Queue&lt;Long[]&gt; que= new LinkedList&lt;&gt;();\n    static Long[] a;\n    static Long[] b;\n    \n    private static class MergeTask extends Thread {\n        int[] Class;\n        int[] rank;\n        public MergeTask(int[] Class, int[] rank) {\n            this.Class=Class;\n            this.rank=rank;\n        }\n\n        public void run() {\n            int lastFind = 0;\n            for (int i = 0; i &lt; this.Class.length; i++) {\n                if (i &gt; 0 &amp;&amp; this.Class[i] == this.Class[i - 1] &amp;&amp;\n                        ((this.Class[i] == 0 &amp;&amp; a[rank[i]].equals(a[rank[i] - 1]) ) ||\n                                (this.Class[i] == 1 &amp;&amp; b[rank[i]].equals(b[rank[i] - 1])))) {\n                    boolean tmp = true;\n                    while (lastFind &lt; result.length &amp;&amp; tmp) {\n                        synchronized (result[lastFind]) {\n                            if (result[lastFind] != Long.MIN_VALUE) {lastFind++;}\n                              else {\n                                result[lastFind] = this.Class[i] == 0 ? a[rank[i]] : b[rank[i]];\n                                tmp = false;\n                            }\n                        }\n                    }\n                }\n                else if (this.Class[i] == 0) {\n                    int left = 0;\n                    int right = b.length - 1;\n                    while (right &gt; left) {\n                        int mid = (right + left) / 2;\n                        if (a[rank[i]] &lt;= b[mid]) {\n                            right = mid - 1;\n                        } else if (a[rank[i]] &gt; b[mid]) {\n                            left = mid + 1;\n                        }\n                    }\n                    while (left &lt; b.length &amp;&amp; a[rank[i]] &gt; b[left]) left++;\n                    boolean tmp = true;\n                    while (tmp) {\n                        synchronized (result[rank[i] + left]) {\n                            if (result[rank[i] + left] != Long.MIN_VALUE) {\n                                left++;\n                            } else {\n                                tmp = false;\n                            }\n                        }\n                    }\n                    result[rank[i] + left] = a[rank[i]];\n                    lastFind = rank[i] + left;\n                }\n                else if (this.Class[i] == 1) {\n                    int left = 0;\n                    int right = a.length - 1;\n                    while (right &gt; left) {\n                        int mid = (right + left) / 2;\n                        if (b[rank[i]] &lt;= a[mid]) {\n                            right = mid - 1;\n                        } else if (b[rank[i]] &gt; a[mid]) {\n                            left = mid + 1;\n                        }\n                    }\n                    while (left &lt; a.length &amp;&amp; b[rank[i]] &gt; a[left]) left++;\n                    boolean tmp = true;\n                    while (tmp) {\n                        synchronized (result[rank[i] + left]) {\n                            if ( result[rank[i] + left] != Long.MIN_VALUE) {\n                                left++;\n                            } else {\n                                tmp = false;\n                            }\n                        }\n                    }\n                    result[rank[i] + left] = b[rank[i]];\n                    lastFind = rank[i] + left;\n                }\n            }\n        }\n\n    }\n    private static class MergeSortTask extends Thread {\n        private long left;\n        private long right;\n        private  Long[] result;\n\n        public MergeSortTask(long left, long right) {\n            this.left = left;\n            this.right = right;\n            this.result = new Long[(int) (right-left)];\n            for(int i= 0;i&lt;(right-left);i++){\n                this.result[i]=arr[(int) (i+left)];\n            }\n        }\n\n        @Override\n        public void run() {\n            mergeSort(this.result, (int) (right-left));\n        }\n\n    }\n\n    public static void mergeSort(Long[] a, int n) {\n        if(n&lt;2)\n            return;\n        int mid = n / 2;\n        Long[] l = new Long[mid];\n        Long[] r = new Long[n - mid];\n\n        for (int i = 0; i &lt; mid; i++) {\n            l[i] = a[i];\n        }\n        for (int i = mid; i &lt; n; i++) {\n            r[i - mid] = a[i];\n        }\n        mergeSort(l, mid);\n        mergeSort(r, n - mid);\n\n        merge(a, l, r, mid, n - mid);\n    }\n\n    public static void  merge(Long[] a, Long[] l, Long[] r, int left, int right) {\n        int i = 0, j = 0, k = 0;\n        while (i &lt; left &amp;&amp; j &lt; right) {\n            if (l[i] &lt;= r[j]) {\n                a[k++] = l[i++];\n            }\n            else {\n                a[k++] = r[j++];\n            }\n        }\n        while (i &lt; left) {\n            a[k++] = l[i++];\n        }\n        while (j &lt; right) {\n            a[k++] = r[j++];\n        }\n    }\n\n    static public Long[] getArray(int beginning, int length) {\n        Long[] num = new Long[length];\n        num[0] = (long) beginning;\n        Random r = new Random(1);\n        for (int i = 1; i &lt; length; i++) {\n            int tmp = r.nextInt(10);\n            if (tmp &lt; 7 ) num[i] = num[i - 1];\n            else num[i] = num[i - 1] + r.nextInt(4);\n        }\n        Long[] randomPosition=new Long[length];\n        Arrays.fill(randomPosition,Long.MIN_VALUE);\n        for(int i=0;i&lt;length;i++){\n            int tmp=0;\n            while(randomPosition[tmp]!=Long.MIN_VALUE){ tmp = r.nextInt(length);}\n            randomPosition[tmp]=num[i];\n        }\n        return randomPosition;\n    }\n    static public void check(Long[] result){\n        boolean check = true;\n        if(result.length!=checking.length){\n            System.out.println(&quot;length do mot match&quot;);\n        }\n        for (int i = 0; i &lt; checking.length; i++) {\n            if (!result[i].equals(checking[i])) {\n                check = false;\n                System.out.println(i + &quot; &quot; + result[i] + &quot; &quot; + checking[i]);\n            }\n        }\n        if (check)\n            System.out.println(&quot;checked&quot;);\n        else\n            System.out.println(&quot;unchecked&quot;);\n    }\n\n    public static void main(String[] args) {\n\n        MergeSortTask[] tasks = new MergeSortTask[pnum];\n\n        arr=getArray(beginning,size);\n\n        checking = new Long[size];\n        System.arraycopy(arr, 0, checking, 0, size);\n        long start = System.currentTimeMillis();\n        Arrays.parallelSort(checking);\n        long end = System.currentTimeMillis();\n        System.out.println(&quot;Build in parallel sort cost &quot;+(end-start)+&quot; Millis.&quot;);\n\n        start = System.currentTimeMillis();\n\n        int left=0;\n        int right=size/pnum;\n        int last=size%pnum;\n        for (int i = 0; i &lt; pnum; i++) {\n            if (last &gt; 0) {\n                right++;\n                last--;\n            }\n            tasks[i] = new MergeSortTask(left, right);\n            left = right;\n            right += size / pnum;\n            tasks[i].start();\n        }\n        try {\n            for (int i = 0; i &lt; pnum; i++) {\n                tasks[i].join();\n            }\n        } catch (Exception e) {\n            System.out.println(&quot;Error &quot; + e);\n        }\n\n        end = System.currentTimeMillis();\n        System.out.println(&quot;distribute into &quot;+pnum+&quot; sub tasks and get &quot;+pnum+&quot; sorted array cost &quot;+(end-start)+&quot; Millis.&quot;);\n        start = System.currentTimeMillis();\n        for(int i=0;i&lt;pnum;i++){\n            que.offer(tasks[i].result);\n        }\n        while(que.size()&gt;1){\n            a=que.poll();\n            b=que.poll();\n            int lengthA=a.length, lengthB=b.length;\n            result=new Long[lengthA+lengthB];\n            Arrays.fill(result, Long.MIN_VALUE);\n            int size=lengthA+lengthB;\n            MergeTask[] mergeTasks = new MergeTask[pnum];\n            right = size / pnum;\n            last = size % pnum;\n            int aleft = lengthA, bleft = lengthB;\n            for (int i = 0; i &lt; pnum; i++) {\n                if (last &gt; 0) {\n                    right++;\n                    last--;\n                }\n                int[] classes = new int[right];\n                int[] ranks = new int[right];\n                if (aleft &gt;= right) {\n                    Arrays.fill(classes, 0);\n                    for (int j = 0; j &lt; right; j++) {\n                        ranks[j] = lengthA - aleft;\n                        aleft--;\n                    }\n                } else {\n                    if (aleft == 0) {\n                        Arrays.fill(classes, 1);\n                        for (int j = 0; j &lt; right; j++) {\n                            ranks[j] = lengthB - bleft;\n                            bleft--;\n                        }\n                    } else {\n                        int tmp = aleft;\n                        for (int j = 0; j &lt; tmp; j++) {\n                            classes[j] = 0;\n                            ranks[j] = lengthA - aleft;\n                            aleft--;\n                        }\n                        for (int j = tmp; j &lt; right; j++) {\n                            classes[j] = 1;\n                            ranks[j] = lengthB - bleft;\n                            bleft--;\n                        }\n                    }\n                }\n                mergeTasks[i] = new MergeTask(classes, ranks);\n                right = size / pnum;\n                mergeTasks[i].start();\n            }\n\n            try {\n                for (int i = 0; i &lt; pnum; i++) {\n                    mergeTasks[i].join();\n                }\n            } catch (Exception e) {\n                System.out.println(&quot;Error &quot; + e);\n            }\n            que.offer(result);\n\n        }\n\n        result=que.peek();\n\n        end=System.currentTimeMillis();\n\n        System.out.println(&quot;finish parallel merge in &quot;+(end-start)+&quot; Millis&quot;);\n\n        check(result);\n    }\n}\n</code></pre>\n<p>And here is the question. I have a checking function, which I first use a built-in parallel sort function to get the ground truth and check whether the sorted array I got is right. Output the different values. As I assigned the seed, so the input should always be the same. But sometimes my own merging works, sometimes it does not. Moreover, when is does not work, the output result is also different.</p>\n<p>85679 -9223372036854775808 38679</p>\n<p>or\n50110 -9223372036854775808 22694</p>\n<p>etc.</p>\n<p>And I do not know why. Is it about the multiple threads I used?\nThanks a lot</p>\n"},{"tags":["java","criteria"],"answers":[{"tags":[],"owner":{"account_id":29423644,"reputation":1,"user_id":22544879,"display_name":"Buzanov Vladislav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694529111,"creation_date":1694529111,"answer_id":77090126,"question_id":74154703,"body_markdown":"You can do something like this:\r\n\r\n        CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\n        CriteriaQuery&lt;Appointment&gt; criteriaQuery = criteriaBuilder.createQuery(Appointment.class);\r\n        Root&lt;Appointmet&gt; itemRoot = criteriaQuery.from(Appointmet.class);\r\n        criteriaQuery.where(\r\n                criteriaBuilder.greaterThan(\r\n                        criteriaBuilder.function(&quot;sql&quot;, Date.class, &quot;? + INTERVAL &#39;2 days&#39;&quot;, itemRoot.get(&quot;date&quot;)),\r\n                        criteriaBuilder.literal(new Date(2022, Calendar.NOVEMBER, 21)))\r\n        );\r\n\r\n        TypedQuery&lt;Apppointment&gt; query = entityManager.createQuery(criteriaQuery);\r\n        return query.getResultList();\r\n","title":"Arithmetic date operations with Criteria API","body":"<p>You can do something like this:</p>\n<pre><code>    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\n    CriteriaQuery&lt;Appointment&gt; criteriaQuery = criteriaBuilder.createQuery(Appointment.class);\n    Root&lt;Appointmet&gt; itemRoot = criteriaQuery.from(Appointmet.class);\n    criteriaQuery.where(\n            criteriaBuilder.greaterThan(\n                    criteriaBuilder.function(&quot;sql&quot;, Date.class, &quot;? + INTERVAL '2 days'&quot;, itemRoot.get(&quot;date&quot;)),\n                    criteriaBuilder.literal(new Date(2022, Calendar.NOVEMBER, 21)))\n    );\n\n    TypedQuery&lt;Apppointment&gt; query = entityManager.createQuery(criteriaQuery);\n    return query.getResultList();\n</code></pre>\n"}],"owner":{"account_id":410510,"reputation":2319,"user_id":782392,"accept_rate":67,"display_name":"T3rm1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694529111,"creation_date":1666360409,"question_id":74154703,"body_markdown":"I want to do [date arithmetic operations][1] using the Criteria API. For example, in Postgres I can write a query like this:\r\n\r\n`select * from appointment a where a.date + interval &#39;2 days&#39; &gt; &#39;2022-10-21&#39;;`\r\n\r\nHow can I achieve this syntax with Criteria? Do I have to write my own Expression class or is there anything built in that I can use?\r\n\r\nI tried it like this but that didn&#39;t work:\r\n\r\n```java\r\nprivate class DateArithmetricExpression&lt;T extends Date&gt; extends ExpressionImpl&lt;T&gt; {\r\n\r\n\t\tprivate final int value;\r\n\t\tprivate final ChronoUnit unit;\r\n\t\tprivate final BinaryArithmeticOperation.Operation operator;\r\n\t\tprivate final Expression&lt;T&gt; date;\r\n\r\n\t\tpublic DateArithmetricExpression(CriteriaBuilderImpl cb, Class&lt;T&gt; clazz, Expression&lt;T&gt; date, BinaryArithmeticOperation.Operation operator, int value, ChronoUnit unit) {\r\n\t\t\tsuper(cb, clazz);\r\n\t\t\tthis.value = value;\r\n\t\t\tthis.unit = unit;\r\n\t\t\tthis.operator = operator;\r\n\t\t\tthis.date = date;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void registerParameters(ParameterRegistry registry) {\r\n\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic String render(RenderingContext renderingContext) {\r\n\t\t\tString op = switch (operator) {\r\n\t\t\t\tcase ADD -&gt; &quot;+&quot;;\r\n\t\t\t\tcase SUBTRACT -&gt; &quot;-&quot;;\r\n\t\t\t\tdefault -&gt; throw new UnsupportedOperationException();\r\n\t\t\t};\r\n\t\t\tString renderedDateExpr = ((Renderable) this.date).render(renderingContext);\r\n\t\t\treturn &quot;%s %s interval &#39;%d %s&#39;&quot;.formatted(renderedDateExpr, op, value, unit.toString());\r\n\t\t}\r\n\t}\r\n```\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/current/functions-datetime.html#OPERATORS-DATETIME-TABLE","title":"Arithmetic date operations with Criteria API","body":"<p>I want to do <a href=\"https://www.postgresql.org/docs/current/functions-datetime.html#OPERATORS-DATETIME-TABLE\" rel=\"nofollow noreferrer\">date arithmetic operations</a> using the Criteria API. For example, in Postgres I can write a query like this:</p>\n<p><code>select * from appointment a where a.date + interval '2 days' &gt; '2022-10-21';</code></p>\n<p>How can I achieve this syntax with Criteria? Do I have to write my own Expression class or is there anything built in that I can use?</p>\n<p>I tried it like this but that didn't work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private class DateArithmetricExpression&lt;T extends Date&gt; extends ExpressionImpl&lt;T&gt; {\n\n        private final int value;\n        private final ChronoUnit unit;\n        private final BinaryArithmeticOperation.Operation operator;\n        private final Expression&lt;T&gt; date;\n\n        public DateArithmetricExpression(CriteriaBuilderImpl cb, Class&lt;T&gt; clazz, Expression&lt;T&gt; date, BinaryArithmeticOperation.Operation operator, int value, ChronoUnit unit) {\n            super(cb, clazz);\n            this.value = value;\n            this.unit = unit;\n            this.operator = operator;\n            this.date = date;\n        }\n\n        @Override\n        public void registerParameters(ParameterRegistry registry) {\n\n        }\n\n        @Override\n        public String render(RenderingContext renderingContext) {\n            String op = switch (operator) {\n                case ADD -&gt; &quot;+&quot;;\n                case SUBTRACT -&gt; &quot;-&quot;;\n                default -&gt; throw new UnsupportedOperationException();\n            };\n            String renderedDateExpr = ((Renderable) this.date).render(renderingContext);\n            return &quot;%s %s interval '%d %s'&quot;.formatted(renderedDateExpr, op, value, unit.toString());\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","annotations"],"answers":[{"tags":[],"owner":{"account_id":21921969,"reputation":56,"user_id":16205098,"display_name":"Vasyl Ivanochko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694525551,"creation_date":1694474975,"answer_id":77085286,"question_id":77085112,"body_markdown":"You can find out the way to implement it by [`ReflectionUtils`][1].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ReflectionUtils.html","title":"Is there a way to call a method via Spring annotation?","body":"<p>You can find out the way to implement it by <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ReflectionUtils.html\" rel=\"nofollow noreferrer\"><code>ReflectionUtils</code></a>.</p>\n"}],"owner":{"account_id":6021831,"reputation":163,"user_id":4728677,"display_name":"count_campeador"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694528836,"creation_date":1694471724,"question_id":77085112,"body_markdown":"I am new to Spring Boot, I am curious about if we can call a method via some annotation?\r\n\r\nClasses have @Component(&quot;somevalue&quot;) annotation, is there a similar annotation (or create a custom annotation) for methods and call them (by this value String?).\r\n\r\nI mean, if something like this is possible:\r\n\r\nIn class A\r\n\r\n    @CustomAnnotation(&quot;m1&quot;)\r\n    public void method1(){\r\n    }\r\n    \r\n    @CustomAnnotation(&quot;m2&quot;)\r\n    public void method2(){\r\n    }\r\n\r\nIn class B\r\n\r\n    String identifier = &quot;m2&quot;;\r\n    (magic here).call(A, identifier);\r\n\r\n","title":"Is there a way to call a method via Spring annotation?","body":"<p>I am new to Spring Boot, I am curious about if we can call a method via some annotation?</p>\n<p>Classes have @Component(&quot;somevalue&quot;) annotation, is there a similar annotation (or create a custom annotation) for methods and call them (by this value String?).</p>\n<p>I mean, if something like this is possible:</p>\n<p>In class A</p>\n<pre><code>@CustomAnnotation(&quot;m1&quot;)\npublic void method1(){\n}\n\n@CustomAnnotation(&quot;m2&quot;)\npublic void method2(){\n}\n</code></pre>\n<p>In class B</p>\n<pre><code>String identifier = &quot;m2&quot;;\n(magic here).call(A, identifier);\n</code></pre>\n"},{"tags":["java","acm.graphics"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":1,"creation_date":1694508042,"post_id":77087204,"comment_id":135896324,"body_markdown":"Not related to the solution, but while working with floating type values (float or double), as far as possible, don&#39;t use exact comparisons like `i != -180`.  Instead, use `i &gt;= -180`.","body":"Not related to the solution, but while working with floating type values (float or double), as far as possible, don&#39;t use exact comparisons like <code>i != -180</code>.  Instead, use <code>i &gt;= -180</code>."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694508228,"post_id":77087204,"comment_id":135896356,"body_markdown":"Because there can be some randomly small values like 0.50000001 or something like that? Or it&#39;s simply more readable?","body":"Because there can be some randomly small values like 0.50000001 or something like that? Or it&#39;s simply more readable?"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694508351,"post_id":77087204,"comment_id":135896382,"body_markdown":"Yes, that exact reason..  `i` may never be exactly equal to `-180`, but `-179.999999....` or `-180.00000....`, and may never break out from the loop. Not saying that it would definitely be like this, but usually have to take care of this with floating point variables.","body":"Yes, that exact reason..  <code>i</code> may never be exactly equal to <code>-180</code>, but <code>-179.999999....</code> or <code>-180.00000....</code>, and may never break out from the loop. Not saying that it would definitely be like this, but usually have to take care of this with floating point variables."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694508467,"post_id":77087204,"comment_id":135896405,"body_markdown":"Also looking at https://cs.stanford.edu/people/eroberts/jtf/javadoc/student/acm/graphics/GObject.html#movePolar(double,%20double), it seems the 2nd parameter is theta - the angle.  So, 2nd code piece that has `i--` that is 1 degree of movement should be faster as compared to the 1st code piece that has `i -= 0.5` - half a degree per iteration of the loop.","body":"Also looking at <a href=\"https://cs.stanford.edu/people/eroberts/jtf/javadoc/student/acm/graphics/GObject.html#movePolar(double,%20double)\" rel=\"nofollow noreferrer\">cs.stanford.edu/people/eroberts/jtf/javadoc/student/acm/&hellip;</a>, it seems the 2nd parameter is theta - the angle.  So, 2nd code piece that has <code>i--</code> that is 1 degree of movement should be faster as compared to the 1st code piece that has <code>i -= 0.5</code> - half a degree per iteration of the loop."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694508825,"post_id":77087204,"comment_id":135896466,"body_markdown":"Yes, it is faster, but i want different speed for each planet, but if I do cycles like above, all of them move with equal velocity. I was thinking about one cycle, where angle changes on 1 degree each iteration for earth, and another one in which delta is 2 deegres per iteration, but I don&#39;t know how to implement all of this conditions in one cycle.","body":"Yes, it is faster, but i want different speed for each planet, but if I do cycles like above, all of them move with equal velocity. I was thinking about one cycle, where angle changes on 1 degree each iteration for earth, and another one in which delta is 2 deegres per iteration, but I don&#39;t know how to implement all of this conditions in one cycle."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694508837,"post_id":77087204,"comment_id":135896471,"body_markdown":"Looking closer at the JavaDoc, it seems this movePolar is not for an orbital movement but just to move an object from its current location to `r` distance and at `theta` degree.  And to move at different speeds, you have to change the `r` for each planet.","body":"Looking closer at the JavaDoc, it seems this movePolar is not for an orbital movement but just to move an object from its current location to <code>r</code> distance and at <code>theta</code> degree.  And to move at different speeds, you have to change the <code>r</code> for each planet."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694508965,"post_id":77087204,"comment_id":135896491,"body_markdown":"In your case `r` is same for both the planets.  If a planet is moving faster, then `r` should be higher for that. I.e. in the same time period, how much it would travel in the orbit around the Sun.","body":"In your case <code>r</code> is same for both the planets.  If a planet is moving faster, then <code>r</code> should be higher for that. I.e. in the same time period, how much it would travel in the orbit around the Sun."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694509104,"post_id":77087204,"comment_id":135896523,"body_markdown":"Oh, I just miss-typed, ORBITAL_DIAMETER should be multiplied by (numberPlanetInArray+1).","body":"Oh, I just miss-typed, ORBITAL_DIAMETER should be multiplied by (numberPlanetInArray+1)."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694509349,"post_id":77087204,"comment_id":135896575,"body_markdown":"So (Math.PI * ORBITAL_DIAMETER) is the length of orbit for the 1st planet, and (Math.PI * ORBITAL_DIAMETER * 2) is the length of orbit for the 2nd planet. Radius of first orbit is half of radius of the second one.","body":"So (Math.PI * ORBITAL_DIAMETER) is the length of orbit for the 1st planet, and (Math.PI * ORBITAL_DIAMETER * 2) is the length of orbit for the 2nd planet. Radius of first orbit is half of radius of the second one."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694509764,"post_id":77087204,"comment_id":135896679,"body_markdown":"I am not a scientist, but I love astronomy.  My suggestion is check this - https://nssdc.gsfc.nasa.gov/planetary/factsheet/.  Here, each planet has Orbital Period (days). E.g. Earth&#39;s is 365.2. So, in a day 360 degrees/365.2 = 0.98576 degrees per day. You can find this at any interval, an hour also if needed. Then using trigo, at this angle (keep angle changing differently per planet), at r distance (each planet at a different distance), what would be its (x,y) co-ordinates - calculate that and move object there.","body":"I am not a scientist, but I love astronomy.  My suggestion is check this - <a href=\"https://nssdc.gsfc.nasa.gov/planetary/factsheet/\" rel=\"nofollow noreferrer\">nssdc.gsfc.nasa.gov/planetary/factsheet</a>.  Here, each planet has Orbital Period (days). E.g. Earth&#39;s is 365.2. So, in a day 360 degrees/365.2 = 0.98576 degrees per day. You can find this at any interval, an hour also if needed. Then using trigo, at this angle (keep angle changing differently per planet), at r distance (each planet at a different distance), what would be its (x,y) co-ordinates - calculate that and move object there."},{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694510463,"post_id":77087204,"comment_id":135896822,"body_markdown":"Thanks a lot, will think about how to get this done in one cycle.","body":"Thanks a lot, will think about how to get this done in one cycle."}],"answers":[{"comments":[{"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"score":0,"creation_date":1694511281,"post_id":77087728,"comment_id":135896991,"body_markdown":"So you suggest using simple move() method?","body":"So you suggest using simple move() method?"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694511320,"post_id":77087728,"comment_id":135897002,"body_markdown":"Yes, I think so...","body":"Yes, I think so..."}],"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694528752,"creation_date":1694510475,"answer_id":77087728,"question_id":77087204,"body_markdown":"As given in the comment, adding an answer so that I can paste an image.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nKeep different r = radius of the planet&#39;s orbit, and keep theta changing differently per unit of time.\r\nAnd calculate x &amp; y co-ordinates of each planet based on their own r &amp; theta.\r\nSet the exact co-ordinates of each planet using this.\r\n\r\nRemember to add (cx,cy), the co-ordinates of the sun to the calculated x &amp; y of each planet to make it orbit around the sun.\r\n\r\nSomething like this - Not tried in Java, you may need to adjust/correct. But something like this:\r\n\r\n```\r\nfor(time = 0; time &lt; numberOfTimeIterations; time++) {  // Or while(true) if you want it to keep going\r\n    for(i = 0;i &lt; numberOfPlanets;i++) {\r\n        currentAngle[i] -= angleMovement[i];\r\n        if(currentAngle[i] &lt; 0) currentAngle[i] += 360;\r\n        double radians = Math.toRadians(currentAngle[i]);\r\n        double x = sunx + radius[i] * Math.cos(radians);\r\n        double y = suny + radius[i] * Math.sin(radians);\r\n        planet[i].move(x,y)\r\n    }\r\n}\r\n```\r\n\r\n```\r\nangleMovement[i] = calculated per same time interval angular movement of each planet\r\ncurrentAngle[i] = Keeps increasing based on planet&#39;s angular movement each time interval\r\nradius[i] = Radius of each planet&#39;s orbit\r\nsunx, suny = x-y co-ordinates of the Sun\r\n```\r\n\r\nPlanet orbit radius and orbital movement can be found at - https://nssdc.gsfc.nasa.gov/planetary/factsheet/\r\n\r\nTotal 360 degrees / Orbital Period (days) = degrees per day\r\n\r\nE.g. for earth\r\n\r\n360/365.2 = 0.98576 degrees per day.\r\n\r\nIf the animation is to be done per hour, then 0.98576/24 = 0.041073 degrees per hour.\r\n\r\nSimilarly calculate and initialize for each planet.\r\n\r\nRadius of the orbit is given in that fact sheet as &quot;Distance from Sun (10&lt;sup&gt;6&lt;/sup&gt; km)&quot;\r\n\r\nThis calculation works. Built a small swing app...\r\n\r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\nS is the Sun in the centre.\r\n0 to 8 planets, Mercury to Pluto.\r\nZoom-in &amp; Zoom-out - zoom factor changed in 3rd image to show all 9\r\nTime delay is milliseconds to sleep before the next iteration. Faster or Slower animation.\r\n\r\nBut, the calculation works!!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GJU3w.png\r\n  [2]: https://i.stack.imgur.com/K7grq.png\r\n  [3]: https://i.stack.imgur.com/odD3x.png\r\n  [4]: https://i.stack.imgur.com/vtMcL.png","title":"I am creating simple animation of Solar System using acm.graphics.movePolar() and i don&#39;t know how can I change velocity of planets","body":"<p>As given in the comment, adding an answer so that I can paste an image.</p>\n<p><a href=\"https://i.stack.imgur.com/GJU3w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GJU3w.png\" alt=\"enter image description here\" /></a></p>\n<p>Keep different r = radius of the planet's orbit, and keep theta changing differently per unit of time.\nAnd calculate x &amp; y co-ordinates of each planet based on their own r &amp; theta.\nSet the exact co-ordinates of each planet using this.</p>\n<p>Remember to add (cx,cy), the co-ordinates of the sun to the calculated x &amp; y of each planet to make it orbit around the sun.</p>\n<p>Something like this - Not tried in Java, you may need to adjust/correct. But something like this:</p>\n<pre><code>for(time = 0; time &lt; numberOfTimeIterations; time++) {  // Or while(true) if you want it to keep going\n    for(i = 0;i &lt; numberOfPlanets;i++) {\n        currentAngle[i] -= angleMovement[i];\n        if(currentAngle[i] &lt; 0) currentAngle[i] += 360;\n        double radians = Math.toRadians(currentAngle[i]);\n        double x = sunx + radius[i] * Math.cos(radians);\n        double y = suny + radius[i] * Math.sin(radians);\n        planet[i].move(x,y)\n    }\n}\n</code></pre>\n<pre><code>angleMovement[i] = calculated per same time interval angular movement of each planet\ncurrentAngle[i] = Keeps increasing based on planet's angular movement each time interval\nradius[i] = Radius of each planet's orbit\nsunx, suny = x-y co-ordinates of the Sun\n</code></pre>\n<p>Planet orbit radius and orbital movement can be found at - <a href=\"https://nssdc.gsfc.nasa.gov/planetary/factsheet/\" rel=\"nofollow noreferrer\">https://nssdc.gsfc.nasa.gov/planetary/factsheet/</a></p>\n<p>Total 360 degrees / Orbital Period (days) = degrees per day</p>\n<p>E.g. for earth</p>\n<p>360/365.2 = 0.98576 degrees per day.</p>\n<p>If the animation is to be done per hour, then 0.98576/24 = 0.041073 degrees per hour.</p>\n<p>Similarly calculate and initialize for each planet.</p>\n<p>Radius of the orbit is given in that fact sheet as &quot;Distance from Sun (10<sup>6</sup> km)&quot;</p>\n<p>This calculation works. Built a small swing app...</p>\n<p><a href=\"https://i.stack.imgur.com/K7grq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K7grq.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/odD3x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/odD3x.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/vtMcL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vtMcL.png\" alt=\"enter image description here\" /></a></p>\n<p>S is the Sun in the centre.\n0 to 8 planets, Mercury to Pluto.\nZoom-in &amp; Zoom-out - zoom factor changed in 3rd image to show all 9\nTime delay is milliseconds to sleep before the next iteration. Faster or Slower animation.</p>\n<p>But, the calculation works!!</p>\n"}],"owner":{"account_id":29420570,"reputation":1,"user_id":22542382,"display_name":"mykh"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694528752,"creation_date":1694506467,"question_id":77087204,"body_markdown":"I was trying to change velocity by changing value of degree, which changes on each iteration.\r\nBut if I have all planets in the same cycle, they anyway move synchronically.\r\n \r\n    \r\n    for (double i = 180; i != -180; i-=0.5) { \r\n        planetList[0].movePolar((Math.PI * ORBITAL_DIAMETER) / 720.0,I); \r\n        planetList[1].movePolar((Math.PI * ORBITAL_DIAMETER * 2) / 720.0, i); \r\n    }\r\n\r\n    for (double i = 180; i != -180; i--) {\r\n        planetList[0].movePolar((Math.PI * ORBITAL_DIAMETER) / 360.0, i);\r\n        planetList[1].movePolar((Math.PI * ORBITAL_DIAMETER * 2) / 360.0, i);       \r\n    }\r\n\r\nI tried diffrent variations of cycles, and adding coefficients in movePolar(COEFFICIENT * double r, double theta * COEFFICIENT). \r\n\r\nSo, I understood that problem can be solved by creating several cycles, but then one planet will move, second will stay till first won&#39;t finish. \r\n\r\nIs there any chance to add some coefficient in order to increase speed of rotation?\r\n\r\n\r\n","title":"I am creating simple animation of Solar System using acm.graphics.movePolar() and i don&#39;t know how can I change velocity of planets","body":"<p>I was trying to change velocity by changing value of degree, which changes on each iteration.\nBut if I have all planets in the same cycle, they anyway move synchronically.</p>\n<pre><code>for (double i = 180; i != -180; i-=0.5) { \n    planetList[0].movePolar((Math.PI * ORBITAL_DIAMETER) / 720.0,I); \n    planetList[1].movePolar((Math.PI * ORBITAL_DIAMETER * 2) / 720.0, i); \n}\n\nfor (double i = 180; i != -180; i--) {\n    planetList[0].movePolar((Math.PI * ORBITAL_DIAMETER) / 360.0, i);\n    planetList[1].movePolar((Math.PI * ORBITAL_DIAMETER * 2) / 360.0, i);       \n}\n</code></pre>\n<p>I tried diffrent variations of cycles, and adding coefficients in movePolar(COEFFICIENT * double r, double theta * COEFFICIENT).</p>\n<p>So, I understood that problem can be solved by creating several cycles, but then one planet will move, second will stay till first won't finish.</p>\n<p>Is there any chance to add some coefficient in order to increase speed of rotation?</p>\n"},{"tags":["java","quartz-scheduler"],"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694528748,"creation_date":1694528748,"question_id":77090071,"body_markdown":"We have a noticed a few of our triggered jobs go into ERROR state from time to time.\r\n[![enter image description here][1]][1]\r\nWhile in this state `execute` is no longer called!  **Is there any configuration on quartz to control this behavior?  I would prefer for it to just keep retrying/triggering the job**.  \r\n\r\nWe are still unsure what initially causes the ERROR state.  [This post][2] seems to imply it is because the pod assigned to the job is lost/deleted/etc; however I don&#39;t think that&#39;s how triggers work, that seems to be more affiliated with scheduling jobs.  To troubleshoot we have implemented the trigger listener:\r\n\r\n    public class QuartzJobListener implements TriggerListener {\r\n    \tprivate static final Logger LOGGER = LoggerFactory.getLogger(QuartzJobListener.class);\r\n    \r\n    \t@Override\r\n    \tpublic void triggerFired(Trigger trigger, JobExecutionContext context) {\r\n    \t\tLOGGER.info(&quot;Job executing via trigger: &quot; + trigger.getJobKey());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean vetoJobExecution(Trigger trigger, JobExecutionContext context) {\r\n    \t\tLOGGER.info(&quot;Job execution vetoed: &quot; + trigger.getJobKey());\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void triggerMisfired(Trigger trigger) {\r\n    \t\tLOGGER.info(&quot;Job trigger misfired: &quot; + trigger.getJobKey());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void triggerComplete(Trigger trigger, JobExecutionContext context, CompletedExecutionInstruction triggerInstructionCode) {\r\n    \t\tLOGGER.info(&quot;Job trigger completed: &quot; + trigger.getJobKey());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String getName() {\r\n    \t\treturn &quot;QuartzJobListener&quot;;\r\n    \t}\r\n    }\r\n\r\nBut there is no error case here making it even harder to detect when we initially get into ERROR state and why.\r\n\r\nHere is how we create our triggered jobs:\r\n\t\r\n\r\n    @Bean\r\n    \t@ConditionalOnProperty(prefix = &quot;tickets.background.job&quot;, name = &quot;deliver-tickets.enabled&quot;, havingValue = &quot;true&quot;)\r\n    \tJobDescription deliverTicketsJobDescription() {\r\n    \t\tfinal long now = metrics ? System.currentTimeMillis() : 0;\r\n    \t\tJobDescription jobDescription =  JobDescriptionBuilder.builder()\r\n    \t\t\t\t.triggerType(TriggerType.CRON)\r\n    \t\t\t\t.jobClass(DeliverTicketsJob.class)\r\n    \t\t\t\t.cronExpression(deliverTicketsCron)\r\n    \t\t\t\t.jobGroupId(jobGroupId)\r\n    \t\t\t\t.jobId(&quot;deliverTickets&quot;)\r\n    \t\t\t\t.build();\r\n    \t\tif (metrics) {\r\n    \t\t\tLOGGER.debug(&quot;METRIC: deliverTicketsJobDescription ~ duration: &quot; + (System.currentTimeMillis() - now) + &quot;ms&quot;);\r\n    \t\t}\r\n    \t\treturn jobDescription;\r\n    \t}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/atTRv.png\r\n  [2]: https://stackoverflow.com/a/66799452/530933","title":"Quartz triggered jobs in ERROR state no longer calls execute","body":"<p>We have a noticed a few of our triggered jobs go into ERROR state from time to time.\n<a href=\"https://i.stack.imgur.com/atTRv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/atTRv.png\" alt=\"enter image description here\" /></a>\nWhile in this state <code>execute</code> is no longer called!  <strong>Is there any configuration on quartz to control this behavior?  I would prefer for it to just keep retrying/triggering the job</strong>.</p>\n<p>We are still unsure what initially causes the ERROR state.  <a href=\"https://stackoverflow.com/a/66799452/530933\">This post</a> seems to imply it is because the pod assigned to the job is lost/deleted/etc; however I don't think that's how triggers work, that seems to be more affiliated with scheduling jobs.  To troubleshoot we have implemented the trigger listener:</p>\n<pre><code>public class QuartzJobListener implements TriggerListener {\n    private static final Logger LOGGER = LoggerFactory.getLogger(QuartzJobListener.class);\n\n    @Override\n    public void triggerFired(Trigger trigger, JobExecutionContext context) {\n        LOGGER.info(&quot;Job executing via trigger: &quot; + trigger.getJobKey());\n    }\n\n    @Override\n    public boolean vetoJobExecution(Trigger trigger, JobExecutionContext context) {\n        LOGGER.info(&quot;Job execution vetoed: &quot; + trigger.getJobKey());\n        return false;\n    }\n\n    @Override\n    public void triggerMisfired(Trigger trigger) {\n        LOGGER.info(&quot;Job trigger misfired: &quot; + trigger.getJobKey());\n    }\n\n    @Override\n    public void triggerComplete(Trigger trigger, JobExecutionContext context, CompletedExecutionInstruction triggerInstructionCode) {\n        LOGGER.info(&quot;Job trigger completed: &quot; + trigger.getJobKey());\n    }\n\n    @Override\n    public String getName() {\n        return &quot;QuartzJobListener&quot;;\n    }\n}\n</code></pre>\n<p>But there is no error case here making it even harder to detect when we initially get into ERROR state and why.</p>\n<p>Here is how we create our triggered jobs:</p>\n<pre><code>@Bean\n    @ConditionalOnProperty(prefix = &quot;tickets.background.job&quot;, name = &quot;deliver-tickets.enabled&quot;, havingValue = &quot;true&quot;)\n    JobDescription deliverTicketsJobDescription() {\n        final long now = metrics ? System.currentTimeMillis() : 0;\n        JobDescription jobDescription =  JobDescriptionBuilder.builder()\n                .triggerType(TriggerType.CRON)\n                .jobClass(DeliverTicketsJob.class)\n                .cronExpression(deliverTicketsCron)\n                .jobGroupId(jobGroupId)\n                .jobId(&quot;deliverTickets&quot;)\n                .build();\n        if (metrics) {\n            LOGGER.debug(&quot;METRIC: deliverTicketsJobDescription ~ duration: &quot; + (System.currentTimeMillis() - now) + &quot;ms&quot;);\n        }\n        return jobDescription;\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-test-mvc"],"comments":[{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1694519533,"post_id":77088183,"comment_id":135898761,"body_markdown":"Why not just return the Flux? Doesn&#39;t seem like you need `SseEmitter` at all. But that could just be the result of simplification/anonymization of the code.","body":"Why not just return the Flux? Doesn&#39;t seem like you need <code>SseEmitter</code> at all. But that could just be the result of simplification/anonymization of the code."},{"owner":{"account_id":2443152,"reputation":384,"user_id":2131117,"display_name":"flywell"},"score":0,"creation_date":1694533056,"post_id":77088183,"comment_id":135902119,"body_markdown":"I get the same error with Flux @kaqqao","body":"I get the same error with Flux @kaqqao"},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1694595712,"post_id":77088183,"comment_id":135910667,"body_markdown":"I quickly tested this in a real web environment both with `SseEmitter` and `Flux` and it worked fine, so I suspect it&#39;s something with the test setup that&#39;s not acting right.","body":"I quickly tested this in a real web environment both with <code>SseEmitter</code> and <code>Flux</code> and it worked fine, so I suspect it&#39;s something with the test setup that&#39;s not acting right."},{"owner":{"account_id":2443152,"reputation":384,"user_id":2131117,"display_name":"flywell"},"score":0,"creation_date":1694599787,"post_id":77088183,"comment_id":135911485,"body_markdown":"Yes, it works fine for me too in a real wen environment :)","body":"Yes, it works fine for me too in a real wen environment :)"}],"owner":{"account_id":2443152,"reputation":384,"user_id":2131117,"display_name":"flywell"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694528734,"creation_date":1694513802,"question_id":77088183,"body_markdown":"I&#39;m trying to test my SSE endpoint which uses `SseEmitter`: \r\n\r\n```java\r\n@GetMapping(&quot;/subscribe&quot;)\r\npublic SseEmitter subscribe() {\r\n    SseEmitter sseEmitter = new SseEmitter(4000L);\r\n\r\n    Disposable disposable = Flux.interval(Duration.ZERO, Duration.of(1, ChronoUnit.SECONDS))\r\n            .map(e -&gt; event().data(&quot;data&quot; + e))\r\n            .log()\r\n            .subscribe(unchecked(sseEmitter::send));\r\n\r\n    sseEmitter.onError(e -&gt; log.error(&quot;SSE ERROR&quot;, e));\r\n\r\n    sseEmitter.onTimeout(unchecked(() -&gt; {\r\n        log.info(&quot;SSE Timeout&quot;);\r\n        sseEmitter.complete();\r\n    }));\r\n\r\n    sseEmitter.onCompletion(() -&gt; {\r\n        log.info(&quot;SSE COMPLETED&quot;);\r\n        disposable.dispose();\r\n    });\r\n\r\n    return sseEmitter;\r\n}\r\n```\r\n\r\nThe test: \r\n\r\n```\r\n@ActiveProfiles(&quot;test&quot;)\r\n@WebMvcTest(\r\n        controllers = SseEmitterController.class\r\n)\r\n@AutoConfigureWebTestClient(timeout = &quot;36000&quot;)\r\nclass SimpleSseTest {\r\n    \r\n    @Autowired\r\n    private WebTestClient webTestClient;\r\n\r\n    @Test\r\n    void test() {\r\n\r\n        FluxExchangeResult&lt;String&gt; result = webTestClient.get()\r\n                .uri(&quot;/subscribe&quot;)\r\n                .exchange()\r\n                .expectStatus().isOk()\r\n                .expectHeader().contentType(&quot;text/event-stream&quot;)\r\n                .returnResult(String.class);\r\n\r\n        StepVerifier.create(result.getResponseBody())\r\n                .expectNextCount(2)\r\n                .thenCancel()\r\n                .verify();\r\n    }\r\n}\r\n```\r\n\r\nBut the test fails with this error:\r\n\r\n&gt;org.springframework.web.reactive.function.client.WebClientRequestException: Async result for handler [SseEmitterController#subscribe()] was not set during the specified timeToWait=4000; nested exception is java.lang.IllegalStateException: Async result for handler [SseEmitterController#subscribe()] was not set during the specified timeToWait=4000\r\n\r\nDoes anyone know how do I to get rid of this error?\r\n\r\n***I&#39;m using spring-boot 2.6.8***","title":"Testing SseEmitter ends with timeToWait error","body":"<p>I'm trying to test my SSE endpoint which uses <code>SseEmitter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/subscribe&quot;)\npublic SseEmitter subscribe() {\n    SseEmitter sseEmitter = new SseEmitter(4000L);\n\n    Disposable disposable = Flux.interval(Duration.ZERO, Duration.of(1, ChronoUnit.SECONDS))\n            .map(e -&gt; event().data(&quot;data&quot; + e))\n            .log()\n            .subscribe(unchecked(sseEmitter::send));\n\n    sseEmitter.onError(e -&gt; log.error(&quot;SSE ERROR&quot;, e));\n\n    sseEmitter.onTimeout(unchecked(() -&gt; {\n        log.info(&quot;SSE Timeout&quot;);\n        sseEmitter.complete();\n    }));\n\n    sseEmitter.onCompletion(() -&gt; {\n        log.info(&quot;SSE COMPLETED&quot;);\n        disposable.dispose();\n    });\n\n    return sseEmitter;\n}\n</code></pre>\n<p>The test:</p>\n<pre><code>@ActiveProfiles(&quot;test&quot;)\n@WebMvcTest(\n        controllers = SseEmitterController.class\n)\n@AutoConfigureWebTestClient(timeout = &quot;36000&quot;)\nclass SimpleSseTest {\n    \n    @Autowired\n    private WebTestClient webTestClient;\n\n    @Test\n    void test() {\n\n        FluxExchangeResult&lt;String&gt; result = webTestClient.get()\n                .uri(&quot;/subscribe&quot;)\n                .exchange()\n                .expectStatus().isOk()\n                .expectHeader().contentType(&quot;text/event-stream&quot;)\n                .returnResult(String.class);\n\n        StepVerifier.create(result.getResponseBody())\n                .expectNextCount(2)\n                .thenCancel()\n                .verify();\n    }\n}\n</code></pre>\n<p>But the test fails with this error:</p>\n<blockquote>\n<p>org.springframework.web.reactive.function.client.WebClientRequestException: Async result for handler [SseEmitterController#subscribe()] was not set during the specified timeToWait=4000; nested exception is java.lang.IllegalStateException: Async result for handler [SseEmitterController#subscribe()] was not set during the specified timeToWait=4000</p>\n</blockquote>\n<p>Does anyone know how do I to get rid of this error?</p>\n<p><em><strong>I'm using spring-boot 2.6.8</strong></em></p>\n"},{"tags":["java","grpc","netty","graalvm-native-image"],"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1688063074,"post_id":76581684,"comment_id":135027096,"body_markdown":"That is way too many questions.","body":"That is way too many questions."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1688063443,"post_id":76581684,"comment_id":135027173,"body_markdown":"Possibly related: *[What is a shaded JAR file? And what is the difference/similarities between an uber JAR and shaded JAR?](https://stackoverflow.com/questions/49810578/what-is-a-shaded-jar-and-what-is-the-difference-similarities-between-uber-jar-a)*","body":"Possibly related: <i><a href=\"https://stackoverflow.com/questions/49810578/what-is-a-shaded-jar-and-what-is-the-difference-similarities-between-uber-jar-a\">What is a shaded JAR file? And what is the difference/similarities between an uber JAR and shaded JAR?</a></i>"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1688063920,"post_id":76581684,"comment_id":135027264,"body_markdown":"What is *&quot;the shaded plugin&quot;*? The [Apache Maven Shade Plugin](https://maven.apache.org/plugins/maven-shade-plugin/)? Or something else?","body":"What is <i>&quot;the shaded plugin&quot;</i>? The <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">Apache Maven Shade Plugin</a>? Or something else?"},{"owner":{"account_id":28919271,"reputation":1,"user_id":22150605,"display_name":"yswdqz"},"score":0,"creation_date":1688092535,"post_id":76581684,"comment_id":135030668,"body_markdown":"Apologies for my lack of clarity, I was indeed referring to the Apache Maven Shade Plugin.","body":"Apologies for my lack of clarity, I was indeed referring to the Apache Maven Shade Plugin."}],"answers":[{"tags":[],"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688054303,"creation_date":1688054303,"answer_id":76582751,"question_id":76581684,"body_markdown":"Yes, shading can cause a lot of breakages for native-image.\r\n\r\nnative-image is not something that gRPC regularly tests. But it &quot;has worked for someone before.&quot; I could believe there is a regression occasionally, but I wouldn&#39;t expect there to be lots of issues.\r\n\r\ngRPC and some of its dependencies include native-image configuration in the JARs. That information is broken if you relocate the class files without rewriting the configuration. grpc-netty-shaded shades Netty, so gRPC has [custom code to rewrite native-image configuration](https://github.com/grpc/grpc-java/blob/f902e16d3d01e87350574fd3f1f59cd3a6ab29cc/netty/shaded/build.gradle#L136-L169). Thus, if you are shading, I&#39;d expect that to cause problems.","title":"What steps should I take before compiling my gRPC code with native-image？","body":"<p>Yes, shading can cause a lot of breakages for native-image.</p>\n<p>native-image is not something that gRPC regularly tests. But it &quot;has worked for someone before.&quot; I could believe there is a regression occasionally, but I wouldn't expect there to be lots of issues.</p>\n<p>gRPC and some of its dependencies include native-image configuration in the JARs. That information is broken if you relocate the class files without rewriting the configuration. grpc-netty-shaded shades Netty, so gRPC has <a href=\"https://github.com/grpc/grpc-java/blob/f902e16d3d01e87350574fd3f1f59cd3a6ab29cc/netty/shaded/build.gradle#L136-L169\" rel=\"nofollow noreferrer\">custom code to rewrite native-image configuration</a>. Thus, if you are shading, I'd expect that to cause problems.</p>\n"}],"owner":{"account_id":28919271,"reputation":1,"user_id":22150605,"display_name":"yswdqz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694528220,"creation_date":1688046672,"question_id":76581684,"body_markdown":"I&#39;m working on a project that uses gRPC and I want to compile it with GraalVM&#39;s native-image for better performance and smaller memory footprint. \r\n\r\nI have tried to use native-image directly, but there are a lot of problems with class initialisation. I understand that there might be some specific configurations or steps that I need to take before I can successfully compile my gRPC code with native-image. \r\n\r\nHere are some specific areas where I&#39;m looking for guidance:\r\n\r\n1. Are there any specific gRPC features or APIs that are not compatible with native-image?\r\n2. Do I need to provide any additional configuration files (like reflection configuration) for native-image (Also, I used the shaded plugin to change the location of the grpc package. Might this have an effect on the configuration?)\r\n3. Are there any known issues or limitations that I should be aware of when using gRPC with native-image?\r\n4. Are there any best practices or tips？\r\n\r\nWhat are the relevant resources?\r\n\r\n\r\n","title":"What steps should I take before compiling my gRPC code with native-image？","body":"<p>I'm working on a project that uses gRPC and I want to compile it with GraalVM's native-image for better performance and smaller memory footprint.</p>\n<p>I have tried to use native-image directly, but there are a lot of problems with class initialisation. I understand that there might be some specific configurations or steps that I need to take before I can successfully compile my gRPC code with native-image.</p>\n<p>Here are some specific areas where I'm looking for guidance:</p>\n<ol>\n<li>Are there any specific gRPC features or APIs that are not compatible with native-image?</li>\n<li>Do I need to provide any additional configuration files (like reflection configuration) for native-image (Also, I used the shaded plugin to change the location of the grpc package. Might this have an effect on the configuration?)</li>\n<li>Are there any known issues or limitations that I should be aware of when using gRPC with native-image?</li>\n<li>Are there any best practices or tips？</li>\n</ol>\n<p>What are the relevant resources?</p>\n"},{"tags":["java","spring","spring-mvc","tomcat","spring-boot"],"comments":[{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":9,"creation_date":1493005541,"post_id":43579432,"comment_id":74208474,"body_markdown":"Post the *entire* stack trace. There&#39;s an additional line in there directly from Tomcat, probably saying that you already have something open on the port.","body":"Post the <i>entire</i> stack trace. There&#39;s an additional line in there directly from Tomcat, probably saying that you already have something open on the port."}],"answers":[{"comments":[{"owner":{"account_id":10410881,"reputation":451,"user_id":7676307,"display_name":"amar"},"score":0,"creation_date":1493045512,"post_id":43582727,"comment_id":74232200,"body_markdown":"I can&#39;t find this directory which IDE are you referring to?\nHowever when I set this port programatically it&#39;s working although I have to change the port on every run .. please suggest how to fix this.\n`System.getProperties().put( &quot;server.port&quot;, 130 );`","body":"I can&#39;t find this directory which IDE are you referring to? However when I set this port programatically it&#39;s working although I have to change the port on every run .. please suggest how to fix this. <code>System.getProperties().put( &quot;server.port&quot;, 130 );</code>"},{"owner":{"account_id":5096971,"reputation":951,"user_id":5910325,"accept_rate":100,"display_name":"Aziz"},"score":0,"creation_date":1493071968,"post_id":43582727,"comment_id":74247293,"body_markdown":"Check this out: https://github.com/khoubyari/spring-boot-rest-example/blob/master/src/main/resources/application.yml","body":"Check this out: <a href=\"https://github.com/khoubyari/spring-boot-rest-example/blob/master/src/main/resources/application.yml\" rel=\"nofollow noreferrer\">github.com/khoubyari/spring-boot-rest-example/blob/master/sr&zwnj;&#8203;c/&hellip;</a>"},{"owner":{"account_id":4174557,"reputation":1654,"user_id":3421482,"display_name":"Josiah DeWitt"},"score":0,"creation_date":1574448209,"post_id":43582727,"comment_id":104250397,"body_markdown":"..although my application did not have this configuration file.  The TCP port conflict was the problem, so this post was still very helpful.  The key errors were: Failed to start end point associated with ProtocolHandler and java.net.BindException: Address already in use","body":"..although my application did not have this configuration file.  The TCP port conflict was the problem, so this post was still very helpful.  The key errors were: Failed to start end point associated with ProtocolHandler and java.net.BindException: Address already in use"}],"tags":[],"owner":{"account_id":5096971,"reputation":951,"user_id":5910325,"accept_rate":100,"display_name":"Aziz"},"comment_count":3,"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1493020787,"creation_date":1493020787,"answer_id":43582727,"question_id":43579432,"body_markdown":"Try to change the port number in `application.yaml` (or `application.properties`) to something else.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>Try to change the port number in <code>application.yaml</code> (or <code>application.properties</code>) to something else.</p>\n"},{"comments":[{"owner":{"account_id":1807526,"reputation":3107,"user_id":1644320,"accept_rate":47,"display_name":"Pablo Pazos"},"score":2,"creation_date":1589313559,"post_id":43585142,"comment_id":109243457,"body_markdown":"I have this dependency, still getting the exception org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat","body":"I have this dependency, still getting the exception org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat"}],"tags":[],"owner":{"account_id":3275313,"reputation":5882,"user_id":2757561,"accept_rate":71,"display_name":"cralfaro"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1539512468,"creation_date":1493028086,"answer_id":43585142,"question_id":43579432,"body_markdown":"You need to add the tomcat dependency in your pom\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>You need to add the tomcat dependency in your pom</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4069052,"reputation":2822,"user_id":3342866,"display_name":"CGS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512030193,"creation_date":1512030193,"answer_id":47568843,"question_id":43579432,"body_markdown":"You need to Tomcat Dependency and also extend your Application Class from extends SpringBootServletInitializer \r\n\r\n    @SpringBootApplication  \r\n    public class App extend SpringBootServletInitializer\r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n            SpringApplication.run(App.class, &quot;hello&quot;);\r\n        }\r\n    }","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>You need to Tomcat Dependency and also extend your Application Class from extends SpringBootServletInitializer </p>\n\n<pre><code>@SpringBootApplication  \npublic class App extend SpringBootServletInitializer\n{\n    public static void main( String[] args )\n    {\n        SpringApplication.run(App.class, \"hello\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6691627,"reputation":145,"user_id":5160957,"display_name":"Norman Bai"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1520571564,"creation_date":1520567687,"answer_id":49186361,"question_id":43579432,"body_markdown":"In my condition when I got an exception &quot; Unable to start embedded Tomcat servlet container&quot;,\r\n\r\nI opened the debug mode of spring boot by adding `debug=true` in the application.properties,\r\n\r\nand then rerun the code ,and it told me that `java.lang.NoSuchMethodError: javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String`\r\n\r\nThus, we know that probably I&#39;m using a servlet API of lower version, and it conflicts with spring boot version.\r\n\r\nI went to my pom.xml, and found one of my dependencies is using servlet2.5,\r\nand I excluded it.\r\n\r\nNow it works. Hope it helps.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>In my condition when I got an exception \" Unable to start embedded Tomcat servlet container\",</p>\n\n<p>I opened the debug mode of spring boot by adding <code>debug=true</code> in the application.properties,</p>\n\n<p>and then rerun the code ,and it told me that <code>java.lang.NoSuchMethodError: javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String</code></p>\n\n<p>Thus, we know that probably I'm using a servlet API of lower version, and it conflicts with spring boot version.</p>\n\n<p>I went to my pom.xml, and found one of my dependencies is using servlet2.5,\nand I excluded it.</p>\n\n<p>Now it works. Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":3372982,"reputation":156,"user_id":9495552,"display_name":"Jawad Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1536213386,"creation_date":1536213386,"answer_id":52197368,"question_id":43579432,"body_markdown":"For me, I just had to put a -X flag with `mvn`. Look at the debug log; there was an issue with Spring while locating the .properties file.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>For me, I just had to put a -X flag with <code>mvn</code>. Look at the debug log; there was an issue with Spring while locating the .properties file.</p>\n"},{"tags":[],"owner":{"account_id":7405841,"reputation":897,"user_id":5634808,"display_name":"Amos Kosgei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537048818,"creation_date":1537047895,"answer_id":52349144,"question_id":43579432,"body_markdown":"Simple way to handle this is to include this in your application.properties or .yml file:\r\n`server.port=0` for application.properties and `server.port: 0` for application.yml files. Of course need to be aware these may change depending on the springboot version you are using.\r\nThese will allow your machine to dynamically allocate any free port available for use.\r\nTo statically assign a port change the above to `server.port = someportnumber`. If running unix based OS you may want to check for zombie activities on the port in question and if possible kill it using `fuser -k {theport}/tcp`.\r\nYour .yml or .properties should look like this.\r\n`\r\nserver:\r\n  port: 8089\r\n  servlet:\r\n    context-path: /somecontextpath `\r\n\r\n","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>Simple way to handle this is to include this in your application.properties or .yml file:\n<code>server.port=0</code> for application.properties and <code>server.port: 0</code> for application.yml files. Of course need to be aware these may change depending on the springboot version you are using.\nThese will allow your machine to dynamically allocate any free port available for use.\nTo statically assign a port change the above to <code>server.port = someportnumber</code>. If running unix based OS you may want to check for zombie activities on the port in question and if possible kill it using <code>fuser -k {theport}/tcp</code>.\nYour .yml or .properties should look like this.\n<code>\nserver:\n  port: 8089\n  servlet:\n    context-path: /somecontextpath</code></p>\n"},{"tags":[],"owner":{"account_id":17252923,"reputation":216,"user_id":12492680,"display_name":"Andrej"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592729831,"creation_date":1592729831,"answer_id":62496448,"question_id":43579432,"body_markdown":"For me, the problem was in XML migrations. I deleted all tables and sequences and it works on next bootRun","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>For me, the problem was in XML migrations. I deleted all tables and sequences and it works on next bootRun</p>\n"},{"tags":[],"owner":{"account_id":4116834,"reputation":401,"user_id":3378192,"display_name":"Kıvılcım"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1599641710,"creation_date":1599641710,"answer_id":63808154,"question_id":43579432,"body_markdown":"If you are running on a linux environment, basically your app does not have rights for the default port.\r\n\r\nTry 8181 by giving the following option on VM.\r\n\r\n``` -Dserver.port=8181 ```","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>If you are running on a linux environment, basically your app does not have rights for the default port.</p>\n<p>Try 8181 by giving the following option on VM.</p>\n<p><code>-Dserver.port=8181</code></p>\n"},{"tags":[],"owner":{"account_id":11697339,"reputation":1663,"user_id":8563654,"display_name":"Senthuran"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1613114532,"creation_date":1613114532,"answer_id":66167754,"question_id":43579432,"body_markdown":"This could happen due to the change in java version of the project.Say for example if the project is build in java 8 and if we change the java version to 11 then there can be such issue. In intellij idea go to the **File-&gt;Project Structure** then change the **Project SDK Version**. ","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>This could happen due to the change in java version of the project.Say for example if the project is build in java 8 and if we change the java version to 11 then there can be such issue. In intellij idea go to the <strong>File-&gt;Project Structure</strong> then change the <strong>Project SDK Version</strong>.</p>\n"},{"tags":[],"owner":{"account_id":17951171,"reputation":9,"user_id":13044257,"display_name":"Andrei Hryshanovich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631177130,"creation_date":1631177130,"answer_id":69115006,"question_id":43579432,"body_markdown":"As said above, if you are running on a Linux, your app does not have access to 80 port. There are two ways to solve this issue:\r\n\r\n 1. Run your application with root previlegies - good idea only for local\r\n    testing, not for any production.\r\n    \r\n 2.  Run app at port 8081 for example, setup reverse-proxy with nginx, and redirect requests from 80 to 8081.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>As said above, if you are running on a Linux, your app does not have access to 80 port. There are two ways to solve this issue:</p>\n<ol>\n<li><p>Run your application with root previlegies - good idea only for local\ntesting, not for any production.</p>\n</li>\n<li><p>Run app at port 8081 for example, setup reverse-proxy with nginx, and redirect requests from 80 to 8081.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20317337,"reputation":51,"user_id":14902908,"display_name":"Dionizij Malacko"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1649025208,"creation_date":1649025208,"answer_id":71730347,"question_id":43579432,"body_markdown":"In my case, I had multiple errors where the first one was: ,,Unable to start embedded Tomcat servlet container&quot;. I tried to solve the first one multiple times, but the real problem was in the rest of them. Turns out I had two different imports of the Logger, so when I tried to initialize it there wasn&#39;t a compile problem but it was a runtime error. \r\n\r\nMy advice: check all the error you have, maybe the problem is not in the first one as I initially thought. So maybe solution to this problem is in the next displayed error. \r\n\r\nIf this is the only error you have, the solution is probably on of the above answers.\r\n","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>In my case, I had multiple errors where the first one was: ,,Unable to start embedded Tomcat servlet container&quot;. I tried to solve the first one multiple times, but the real problem was in the rest of them. Turns out I had two different imports of the Logger, so when I tried to initialize it there wasn't a compile problem but it was a runtime error.</p>\n<p>My advice: check all the error you have, maybe the problem is not in the first one as I initially thought. So maybe solution to this problem is in the next displayed error.</p>\n<p>If this is the only error you have, the solution is probably on of the above answers.</p>\n"},{"tags":[],"owner":{"account_id":18304375,"reputation":11,"user_id":13328487,"display_name":"Sendi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676961365,"creation_date":1676961365,"answer_id":75517006,"question_id":43579432,"body_markdown":"It seems that you might have used Mapping incorrectly one of your, if not more, entities. Fix that. And the error should go away.\r\n\r\nIn my case, I forgot that I mapped two entities and left one of them with an object annotated with @OneToMany. I commented out and I am now rid of that error.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>It seems that you might have used Mapping incorrectly one of your, if not more, entities. Fix that. And the error should go away.</p>\n<p>In my case, I forgot that I mapped two entities and left one of them with an object annotated with @OneToMany. I commented out and I am now rid of that error.</p>\n"},{"tags":[],"owner":{"account_id":1612919,"reputation":1711,"user_id":1491384,"accept_rate":83,"display_name":"Taylor Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694527341,"creation_date":1694527341,"answer_id":77089861,"question_id":43579432,"body_markdown":"Though may not be OP&#39;s solution, my search brought me here, and then I figured out what my issue was causing this same error message.\r\n\r\nMy application-beta.yml was named properly to match my run configuration &gt; active profile setting (my IDE = intelliJ). However, I missed one spot in the yml file where a property needed to be set:\r\n\r\n    spring:\r\n      profiles: betarclocal\r\n\r\nneeded to be changed to match the &quot;beta&quot; active profile:\r\n\r\n    spring:\r\n      profiles: beta\r\n\r\nSimply overlooked this and all the properties in the yml config under this were being ignored... And one of the properties were needed for the tomcat server.\r\n\r\nLong story shory: make sure your active profiles, spring profiles, and application-[activeprofile].yml are all named uniformly.","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>Though may not be OP's solution, my search brought me here, and then I figured out what my issue was causing this same error message.</p>\n<p>My application-beta.yml was named properly to match my run configuration &gt; active profile setting (my IDE = intelliJ). However, I missed one spot in the yml file where a property needed to be set:</p>\n<pre><code>spring:\n  profiles: betarclocal\n</code></pre>\n<p>needed to be changed to match the &quot;beta&quot; active profile:</p>\n<pre><code>spring:\n  profiles: beta\n</code></pre>\n<p>Simply overlooked this and all the properties in the yml config under this were being ignored... And one of the properties were needed for the tomcat server.</p>\n<p>Long story shory: make sure your active profiles, spring profiles, and application-[activeprofile].yml are all named uniformly.</p>\n"}],"owner":{"account_id":10410881,"reputation":451,"user_id":7676307,"display_name":"amar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":313490,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":43582727,"answer_count":13,"score":44,"last_activity_date":1694527341,"creation_date":1493005279,"question_id":43579432,"body_markdown":"I&#39;m new to Spring Boot and having with error while running my application.\r\nI&#39;m following a tutorial and I believe I&#39;m having proper parent and dependencies with POM, please help me \r\n\r\nmain class:\r\n\r\n    package com.boot;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    /**\r\n     * Hello world!\r\n     *\r\n     */\r\n    \r\n    @SpringBootApplication\r\n    public class App \r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n            SpringApplication.run(App.class, &quot;hello&quot;);\r\n        }\r\n    }\r\n\r\nerror is:\r\n \r\n\r\n       org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat servlet container\r\n        \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.start(TomcatEmbeddedServletContainer.java:165) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.startEmbeddedServletContainer(EmbeddedWebApplicationContext.java:293) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.finishRefresh(EmbeddedWebApplicationContext.java:141) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n        \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:764) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.doRun(SpringApplication.java:357) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:305) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1124) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1113) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \tat com.boot.App.main(App.java:18) [classes/:na]Caused by: java.lang.IllegalStateException: Tomcat connector in failed state\r\n        \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.start(TomcatEmbeddedServletContainer.java:159) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n        \t... 10 common frames omitted\r\n\r\nPOM :\r\n\r\n    \r\n\r\n        &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n          xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n          &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;com.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;das-boot&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.1.RELEASE&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n      &lt;name&gt;das-boot&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n","title":"Spring boot: Unable to start embedded Tomcat servlet container","body":"<p>I'm new to Spring Boot and having with error while running my application.\nI'm following a tutorial and I believe I'm having proper parent and dependencies with POM, please help me </p>\n\n<p>main class:</p>\n\n<pre><code>package com.boot;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n/**\n * Hello world!\n *\n */\n\n@SpringBootApplication\npublic class App \n{\n    public static void main( String[] args )\n    {\n        SpringApplication.run(App.class, \"hello\");\n    }\n}\n</code></pre>\n\n<p>error is:</p>\n\n<pre><code>   org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat servlet container\n        at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.start(TomcatEmbeddedServletContainer.java:165) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.startEmbeddedServletContainer(EmbeddedWebApplicationContext.java:293) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.finishRefresh(EmbeddedWebApplicationContext.java:141) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:764) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.doRun(SpringApplication.java:357) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:305) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1124) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1113) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        at com.boot.App.main(App.java:18) [classes/:na]Caused by: java.lang.IllegalStateException: Tomcat connector in failed state\n        at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.start(TomcatEmbeddedServletContainer.java:159) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n        ... 10 common frames omitted\n</code></pre>\n\n<p>POM :</p>\n\n<pre><code>    &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;das-boot&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n  &lt;name&gt;das-boot&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n  &lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","jpa","eclipselink","jpql","apache-ranger"],"answers":[{"comments":[{"owner":{"account_id":5356532,"reputation":1515,"user_id":4269054,"accept_rate":100,"display_name":"NikhilP"},"score":0,"creation_date":1694607730,"post_id":77089839,"comment_id":135913115,"body_markdown":"but when I upgrade my eclipselink version,  I see other errors like class does not implement the requested interface.                                                                                   found.[ERROR ] [main] org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:313): Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;defaultEntityManagerFactory&#39; defined in ServletContext resource","body":"but when I upgrade my eclipselink version,  I see other errors like class does not implement the requested interface.                                                                                   found.[ERROR ] [main] org.springframework.web.context.ContextLoader.initWebApplica&zwnj;&#8203;tionContext(ContextL&zwnj;&#8203;oader.java:313): Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;defaultEntityManagerFactory&#39; defined in ServletContext resource"},{"owner":{"account_id":5356532,"reputation":1515,"user_id":4269054,"accept_rate":100,"display_name":"NikhilP"},"score":0,"creation_date":1694607893,"post_id":77089839,"comment_id":135913149,"body_markdown":"[/META-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Class org.eclipse.persistence.jpa.PersistenceProvider does not implement the requested interface javax.persistence.spi.PersistenceProvider","body":"[/META-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Class org.eclipse.persistence.jpa.PersistenceProvider does not implement the requested interface javax.persistence.spi.PersistenceProvider"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1694614973,"post_id":77089839,"comment_id":135914871,"body_markdown":"Try using the latest 2.7.x releases then - they may work but are just not certified to. EclipseLink 3.0 supports Jakarta persistence libraries (JPA 3.0) which replace Java Persistence (JPA 2.2?) so will require some package renaming and supported containers (Spring?) - it isn&#39;t just a library switch.","body":"Try using the latest 2.7.x releases then - they may work but are just not certified to. EclipseLink 3.0 supports Jakarta persistence libraries (JPA 3.0) which replace Java Persistence (JPA 2.2?) so will require some package renaming and supported containers (Spring?) - it isn&#39;t just a library switch."},{"owner":{"account_id":5356532,"reputation":1515,"user_id":4269054,"accept_rate":100,"display_name":"NikhilP"},"score":0,"creation_date":1694630329,"post_id":77089839,"comment_id":135917916,"body_markdown":"Thanks so much @Chris , latest 2.7.6  EclipseLink jar did help with java 11.","body":"Thanks so much @Chris , latest 2.7.6  EclipseLink jar did help with java 11."}],"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1694527154,"creation_date":1694527154,"answer_id":77089839,"question_id":77089302,"body_markdown":"You need [EclipseLink version &gt; 3][1] for JDK 11 support\r\n\r\n\r\n  [1]: https://eclipse.dev/eclipselink/releases/3.0.php","title":"My JPA named Query is failing to compile when I upgrade to java 11","body":"<p>You need <a href=\"https://eclipse.dev/eclipselink/releases/3.0.php\" rel=\"nofollow noreferrer\">EclipseLink version &gt; 3</a> for JDK 11 support</p>\n"}],"owner":{"account_id":5356532,"reputation":1515,"user_id":4269054,"accept_rate":100,"display_name":"NikhilP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694527154,"creation_date":1694523123,"question_id":77089302,"body_markdown":"My same JPQL query was working on java 8, when I upgraded to java 11 it stopped working.\r\nI am using eclipselink implementation.\r\nquery\r\n\r\n    &lt;named-query name=&quot;XXDataHist.findLatestByObjectClassTypeAndObjectIdAndEventTime&quot;&gt;\r\n\r\n\t\t&lt;query&gt;select obj from XXDataHist obj WHERE obj.objectId = :objectId AND\r\n\t\tobj.objectClassType = :classType AND\r\n\t\tobj.createTime &amp;lt;= :createTime ORDER BY obj.id DESC&lt;/query&gt;\r\n\t&lt;/named-query&gt;\r\n\r\nand it fails with below error,\r\n\r\n```\r\norg.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is \r\njavax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): \r\norg.eclipse.persistence.exceptions.EntityManagerSetupException|\r\nException Description: Deployment of PersistenceUnit [defaultPU] failed.\r\nClose all factories for this PersistenceUnit.|\r\nInternal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.JPQLException|\r\nException Description: Problem compiling [select obj from XXDataHist obj where \r\nobj.objectId = :objectId and |             obj.objectClassType = :classType and |  \r\nobj.createTime &lt;= :createTime ORDER BY obj.id DESC]. |[16, 26] \r\nThe abstract schema type &#39;XXDataHist&#39; is unknown.\r\n|[37, 49] The state field path &#39;obj.objectId&#39; cannot be resolved to a valid type.\r\n|[66, 85] The state field path &#39;obj.objectClassType&#39; cannot be resolved to a valid type.\r\n|[103, 117] The state field path &#39;obj.createTime&#39; cannot be resolved to a valid type.\r\n|[142, 148] The state field path &#39;obj.id&#39; cannot be resolved to a valid type.\r\n```\r\n\r\nEntity class :\r\n\r\n```\r\n@Entity\r\n@Cacheable\r\n@XmlRootElement\r\n@Table(name = &quot;x_data_hist&quot;)\r\npublic class XXDataHist implements java.io.Serializable {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n\t@SequenceGenerator(name = &quot;x_data_hist_SEQ&quot;, sequenceName = &quot;x_data_hist_SEQ&quot;, allocationSize = 1)\r\n\t@GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;x_data_hist_SEQ&quot;)\r\n\t@Column(name = &quot;id&quot;)\r\n\tprotected Long id;\r\n\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n\t@Column(name = &quot;CREATE_TIME&quot;)\r\n\tprotected Date createTime = DateUtil.getUTCDate();\r\n\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n\t@Column(name = &quot;UPDATE_TIME&quot;)\r\n\tprotected Date updateTime = DateUtil.getUTCDate();\r\n\r\n    @Column(name = &quot;version&quot;)\r\n\tprotected Long version;\r\n\r\n    @Column(name = &quot;obj_guid&quot;)\r\n\tprotected String objectGuid;\r\n\r\n    @Column(name = &quot;obj_class_type&quot;)\r\n\tprotected Integer objectClassType;\r\n\r\n    @Column(name = &quot;obj_id&quot;)\r\n\tprotected Long objectId;\r\n\r\n    @Column(name = &quot;obj_name&quot;)\r\n\tprotected String objectName;\r\n\r\n\t\r\n\t@Column(name = &quot;action&quot;)\r\n\tprotected String action;\r\n\r\n\t\r\n\t@Temporal(TemporalType.TIMESTAMP)\r\n\t@Column(name = &quot;from_time&quot;)\r\n\tprotected Date fromTime;\r\n\r\n\t\r\n\t@Temporal(TemporalType.TIMESTAMP)\r\n\t@Column(name = &quot;to_time&quot;)\r\n\tprotected Date toTime;\r\n\r\n\t\r\n\t@Column(name = &quot;content&quot;)\r\n\tprotected String content;\r\n\r\n//constructor equals toString , getters and setters \r\n}\r\n```\r\nI am just wondering why is it working properly with java 8 and fails with java 11, I need to fix this query If it has any issue which was allowed in java 8 but not in java 11.","title":"My JPA named Query is failing to compile when I upgrade to java 11","body":"<p>My same JPQL query was working on java 8, when I upgraded to java 11 it stopped working.\nI am using eclipselink implementation.\nquery</p>\n<pre><code>&lt;named-query name=&quot;XXDataHist.findLatestByObjectClassTypeAndObjectIdAndEventTime&quot;&gt;\n\n    &lt;query&gt;select obj from XXDataHist obj WHERE obj.objectId = :objectId AND\n    obj.objectClassType = :classType AND\n    obj.createTime &amp;lt;= :createTime ORDER BY obj.id DESC&lt;/query&gt;\n&lt;/named-query&gt;\n</code></pre>\n<p>and it fails with below error,</p>\n<pre><code>org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is \njavax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): \norg.eclipse.persistence.exceptions.EntityManagerSetupException|\nException Description: Deployment of PersistenceUnit [defaultPU] failed.\nClose all factories for this PersistenceUnit.|\nInternal Exception: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.5.2.v20140319-9ad6abd): org.eclipse.persistence.exceptions.JPQLException|\nException Description: Problem compiling [select obj from XXDataHist obj where \nobj.objectId = :objectId and |             obj.objectClassType = :classType and |  \nobj.createTime &lt;= :createTime ORDER BY obj.id DESC]. |[16, 26] \nThe abstract schema type 'XXDataHist' is unknown.\n|[37, 49] The state field path 'obj.objectId' cannot be resolved to a valid type.\n|[66, 85] The state field path 'obj.objectClassType' cannot be resolved to a valid type.\n|[103, 117] The state field path 'obj.createTime' cannot be resolved to a valid type.\n|[142, 148] The state field path 'obj.id' cannot be resolved to a valid type.\n</code></pre>\n<p>Entity class :</p>\n<pre><code>@Entity\n@Cacheable\n@XmlRootElement\n@Table(name = &quot;x_data_hist&quot;)\npublic class XXDataHist implements java.io.Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @SequenceGenerator(name = &quot;x_data_hist_SEQ&quot;, sequenceName = &quot;x_data_hist_SEQ&quot;, allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;x_data_hist_SEQ&quot;)\n    @Column(name = &quot;id&quot;)\n    protected Long id;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;CREATE_TIME&quot;)\n    protected Date createTime = DateUtil.getUTCDate();\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;UPDATE_TIME&quot;)\n    protected Date updateTime = DateUtil.getUTCDate();\n\n    @Column(name = &quot;version&quot;)\n    protected Long version;\n\n    @Column(name = &quot;obj_guid&quot;)\n    protected String objectGuid;\n\n    @Column(name = &quot;obj_class_type&quot;)\n    protected Integer objectClassType;\n\n    @Column(name = &quot;obj_id&quot;)\n    protected Long objectId;\n\n    @Column(name = &quot;obj_name&quot;)\n    protected String objectName;\n\n    \n    @Column(name = &quot;action&quot;)\n    protected String action;\n\n    \n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;from_time&quot;)\n    protected Date fromTime;\n\n    \n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;to_time&quot;)\n    protected Date toTime;\n\n    \n    @Column(name = &quot;content&quot;)\n    protected String content;\n\n//constructor equals toString , getters and setters \n}\n</code></pre>\n<p>I am just wondering why is it working properly with java 8 and fails with java 11, I need to fix this query If it has any issue which was allowed in java 8 but not in java 11.</p>\n"},{"tags":["java","gatling"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694519407,"post_id":77088809,"comment_id":135898724,"body_markdown":"When you say &quot;The ${out} statement doesn&#39;t work.&quot;, what *specifically* happens? Error message? Unexpected value? Something else?","body":"When you say &quot;The ${out} statement doesn&#39;t work.&quot;, what <i>specifically</i> happens? Error message? Unexpected value? Something else?"},{"owner":{"account_id":7630069,"reputation":170,"user_id":5785421,"display_name":"mbanchero"},"score":0,"creation_date":1694521322,"post_id":77088809,"comment_id":135899176,"body_markdown":"@Jorn I&#39;m getting a &quot;jsonPath($.result).find.is(${out}), but actually found pong&quot; (added to the original post)","body":"@Jorn I&#39;m getting a &quot;jsonPath($.result).find.is(${out}), but actually found pong&quot; (added to the original post)"},{"owner":{"account_id":7630069,"reputation":170,"user_id":5785421,"display_name":"mbanchero"},"score":0,"creation_date":1694521597,"post_id":77088809,"comment_id":135899244,"body_markdown":"If I use a &quot;.check(substring(&quot;${out}&quot;).exists())&quot; then it works. But this is not what I want. So it seems that the &quot;${out}&quot; doesn&#39;t work in a &quot;is()&quot; statement","body":"If I use a &quot;.check(substring(&quot;${out}&quot;).exists())&quot; then it works. But this is not what I want. So it seems that the &quot;${out}&quot; doesn&#39;t work in a &quot;is()&quot; statement"}],"answers":[{"tags":[],"owner":{"account_id":7630069,"reputation":170,"user_id":5785421,"display_name":"mbanchero"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694527057,"creation_date":1694523685,"answer_id":77089370,"question_id":77088809,"body_markdown":"What I was doing wrong was to call the `is()` function and not the `isEL()` instead.\r\n\r\nThis is because of how the 2 functions work. Check the code and documentation to know more about it.\r\n\r\nSo the change needed to make my previous code work is to change `is(&quot;${out}&quot;)` to `isEL(&quot;${out}&quot;)`","title":"Check gatling test response body with a json feeder","body":"<p>What I was doing wrong was to call the <code>is()</code> function and not the <code>isEL()</code> instead.</p>\n<p>This is because of how the 2 functions work. Check the code and documentation to know more about it.</p>\n<p>So the change needed to make my previous code work is to change <code>is(&quot;${out}&quot;)</code> to <code>isEL(&quot;${out}&quot;)</code></p>\n"}],"owner":{"account_id":7630069,"reputation":170,"user_id":5785421,"display_name":"mbanchero"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":1,"score":1,"last_activity_date":1694527057,"creation_date":1694519289,"question_id":77088809,"body_markdown":"I&#39;m trying to check the body responses of a service call in a Gatling test. However, I want to have a JSON file to check the expected responses. To do so, I&#39;m using a Feeder and trying to evaluate the actual response with values get from the Feeder. Here is what I have:\r\n\r\ndata.json:\r\n\r\n    [\r\n      {&quot;out&quot;: &quot;pong&quot;}\r\n    ]\r\n\r\nSmallTest.java:\r\n\r\n    public class SmallTest extends Simulation {\r\n    \r\n        public SmallTest() {\r\n    \r\n            final HttpProtocolBuilder httpProtocol = http\r\n                    .baseUrl(&quot;https://example.com&quot;);\r\n    \r\n            final FeederBuilder&lt;Object&gt; feeder = jsonFile(&quot;data.json&quot;);\r\n    \r\n            final ChainBuilder call = exec(http(&quot;Api Response&quot;)\r\n                    .post(&quot;/ping&quot;)\r\n                    .check(status().is(200))\r\n                    .check(jsonPath(&quot;$.result&quot;).is(&quot;${out}&quot;)));\r\n    \r\n            final ScenarioBuilder scenario = scenario(&quot;Response Test&quot;)\r\n                    .feed(feeder)\r\n                    .exec(call);\r\n    \r\n            setUp(scenario\r\n                    .injectOpen(atOnceUsers(1))\r\n            ).protocols(httpProtocol);\r\n        }\r\n    \r\n    }\r\n\r\nThe `${out}` statement doesn&#39;t work. I get an error saying:\r\n\r\n&gt; jsonPath($.result).find.is(${out}), but\r\n&gt; actually found pong\r\n\r\nThe result of calling http://example.com/ping is the following json response:\r\n\r\n    {\r\n       &quot;result&quot;: &quot;pong&quot;\r\n    }\r\n\r\nSide note:\r\n\r\nI tried to use `.check(substring(&quot;${out}&quot;).exists())` and it worked. But this is not what I want. It seems that the `${out}` doesn&#39;t work inside a `is()` statement","title":"Check gatling test response body with a json feeder","body":"<p>I'm trying to check the body responses of a service call in a Gatling test. However, I want to have a JSON file to check the expected responses. To do so, I'm using a Feeder and trying to evaluate the actual response with values get from the Feeder. Here is what I have:</p>\n<p>data.json:</p>\n<pre><code>[\n  {&quot;out&quot;: &quot;pong&quot;}\n]\n</code></pre>\n<p>SmallTest.java:</p>\n<pre><code>public class SmallTest extends Simulation {\n\n    public SmallTest() {\n\n        final HttpProtocolBuilder httpProtocol = http\n                .baseUrl(&quot;https://example.com&quot;);\n\n        final FeederBuilder&lt;Object&gt; feeder = jsonFile(&quot;data.json&quot;);\n\n        final ChainBuilder call = exec(http(&quot;Api Response&quot;)\n                .post(&quot;/ping&quot;)\n                .check(status().is(200))\n                .check(jsonPath(&quot;$.result&quot;).is(&quot;${out}&quot;)));\n\n        final ScenarioBuilder scenario = scenario(&quot;Response Test&quot;)\n                .feed(feeder)\n                .exec(call);\n\n        setUp(scenario\n                .injectOpen(atOnceUsers(1))\n        ).protocols(httpProtocol);\n    }\n\n}\n</code></pre>\n<p>The <code>${out}</code> statement doesn't work. I get an error saying:</p>\n<blockquote>\n<p>jsonPath($.result).find.is(${out}), but\nactually found pong</p>\n</blockquote>\n<p>The result of calling <a href=\"http://example.com/ping\" rel=\"nofollow noreferrer\">http://example.com/ping</a> is the following json response:</p>\n<pre><code>{\n   &quot;result&quot;: &quot;pong&quot;\n}\n</code></pre>\n<p>Side note:</p>\n<p>I tried to use <code>.check(substring(&quot;${out}&quot;).exists())</code> and it worked. But this is not what I want. It seems that the <code>${out}</code> doesn't work inside a <code>is()</code> statement</p>\n"},{"tags":["java","android","navigation","material-design-3"],"owner":{"account_id":27914983,"reputation":216,"user_id":21316322,"display_name":"Paul Martin Cuba N&#250;&#241;ez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694526699,"creation_date":1694526699,"question_id":77089781,"body_markdown":"&quot;Greetings everyone! Today, I am excited to share my exciting personal journey. While starting my app project, I ran into challenges while trying to create a Badge in Android Studio with Material Design 3. At first, it seemed like a complicated path, but In the end, I managed to overcome all the obstacles. I&#39;m here to share with you how I did it!&quot;\r\nexamples:\r\n[enter image description here](https://i.stack.imgur.com/UkxmC.jpg)\r\n\r\n```\r\n// This is the onStart method.\r\n// It&#39;s used in the lifecycle of an activity to perform setups and preparations\r\n// before the activity becomes visible to the user.\r\n@Override\r\nprotected void onStart() {\r\n    super.onStart();\r\n\r\n    // Set up navigation and other UI elements here\r\n    // This is done before the activity is fully visible to the user\r\n    // to ensure everything is ready when it&#39;s displayed on the screen.\r\n    \r\n    // You can set up event listeners, start services, etc.\r\n    \r\n    // This is useful when you need certain actions to be performed before\r\n    // the user can interact with the activity.\r\n}\r\n\r\n// This is the onCreate method, which is called after onStart.\r\n// Here, the initial setup of the activity is done, like configuring the UI and preparing data.\r\n@Override\r\nprotected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    setContentView(R.layout.activity_main);\r\n    \r\n    // Other initial configurations can be done here.\r\n}\r\n```\r\n\r\n&gt; complete code\r\n\r\n```\r\n`@Override\r\nprotected void onStart() {\r\n    super.onStart();\r\n\r\n    // Set up navigation controller for the bottom navigation view\r\n    NavController navController = Navigation.findNavController(this, R.id.fragmentContainerView);\r\n    NavigationUI.setupWithNavController(bottomNavigationView, navController, false);\r\n\r\n    // Set up navigation controller for the navigation drawer\r\n    NavController navControllerDrawer = Navigation.findNavController(this, R.id.fragmentContainerView);\r\n    NavigationUI.setupWithNavController(navigationView, navControllerDrawer, false);\r\n\r\n    // Handle item selection in the bottom navigation view\r\n    bottomNavigationView.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {\r\n        @SuppressLint(&quot;NonConstantResourceId&quot;)\r\n        @Override\r\n        public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n            switch (item.getItemId()) {\r\n                case R.id.nav_inicio_op:\r\n                    navController.navigate(R.id.nav_inicio_op);\r\n                    break;\r\n                case R.id.nav_observacion_op:\r\n                    navController.navigate(R.id.nav_observacion_op);\r\n                    break;\r\n                case R.id.nav_trabajadores_op:\r\n                    // Create and configure a badge for the &quot;nav_trabajadores_op&quot; item\r\n                    BadgeDrawable badgeDrawable = bottomNavigationView.getOrCreateBadge(R.id.nav_trabajadores_op);\r\n                    badgeDrawable.clearNumber();\r\n                    badgeDrawable.setVisible(false);\r\n                    // Navigate to the &quot;nav_trabajadores_op&quot; destination\r\n                    navController.navigate(R.id.nav_trabajadores_op);\r\n                    break;\r\n                case R.id.nav_usuario_op:\r\n                    navController.navigate(R.id.nav_usuario_op);\r\n                    break;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n\r\n    // Create and configure a counter view in the navigation drawer\r\n    LayoutInflater li = LayoutInflater.from(getApplicationContext());\r\n    tv_gallery_cunter = (TextView) li.inflate(R.layout.counter_gallery, null);\r\n    navigationView.getMenu().findItem(R.id.nav_observacion_op).setActionView(tv_gallery_cunter);\r\n    // Show the counter with a specific count number\r\n    Show_Counter(gallery_count_number);\r\n}\r\n\r\n    // Crear y configurar una vista de contador en el men&#250; desplegable de navegaci&#243;n (navigationView)\r\n    LayoutInflater li = LayoutInflater.from(getApplicationContext());\r\n    tv_gallery_cunter = (TextView) li.inflate(R.layout.counter_gallery, null);\r\n    navigationView.getMenu().findItem(R.id.nav_observacion_op).setActionView(tv_gallery_cunter);\r\n    // Mostrar el contador con un n&#250;mero espec&#237;fico\r\n    Show_Counter(gallery_count_number);\r\n}`\r\n```","title":"Creating Badge in Android Studio 2022.1.1 Patch 2 with Bottom Navigation Bar and etpack navigation component using Material Design 3","body":"<p>&quot;Greetings everyone! Today, I am excited to share my exciting personal journey. While starting my app project, I ran into challenges while trying to create a Badge in Android Studio with Material Design 3. At first, it seemed like a complicated path, but In the end, I managed to overcome all the obstacles. I'm here to share with you how I did it!&quot;\nexamples:\n<a href=\"https://i.stack.imgur.com/UkxmC.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>// This is the onStart method.\n// It's used in the lifecycle of an activity to perform setups and preparations\n// before the activity becomes visible to the user.\n@Override\nprotected void onStart() {\n    super.onStart();\n\n    // Set up navigation and other UI elements here\n    // This is done before the activity is fully visible to the user\n    // to ensure everything is ready when it's displayed on the screen.\n    \n    // You can set up event listeners, start services, etc.\n    \n    // This is useful when you need certain actions to be performed before\n    // the user can interact with the activity.\n}\n\n// This is the onCreate method, which is called after onStart.\n// Here, the initial setup of the activity is done, like configuring the UI and preparing data.\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    \n    // Other initial configurations can be done here.\n}\n</code></pre>\n<blockquote>\n<p>complete code</p>\n</blockquote>\n<pre><code>`@Override\nprotected void onStart() {\n    super.onStart();\n\n    // Set up navigation controller for the bottom navigation view\n    NavController navController = Navigation.findNavController(this, R.id.fragmentContainerView);\n    NavigationUI.setupWithNavController(bottomNavigationView, navController, false);\n\n    // Set up navigation controller for the navigation drawer\n    NavController navControllerDrawer = Navigation.findNavController(this, R.id.fragmentContainerView);\n    NavigationUI.setupWithNavController(navigationView, navControllerDrawer, false);\n\n    // Handle item selection in the bottom navigation view\n    bottomNavigationView.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {\n        @SuppressLint(&quot;NonConstantResourceId&quot;)\n        @Override\n        public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n            switch (item.getItemId()) {\n                case R.id.nav_inicio_op:\n                    navController.navigate(R.id.nav_inicio_op);\n                    break;\n                case R.id.nav_observacion_op:\n                    navController.navigate(R.id.nav_observacion_op);\n                    break;\n                case R.id.nav_trabajadores_op:\n                    // Create and configure a badge for the &quot;nav_trabajadores_op&quot; item\n                    BadgeDrawable badgeDrawable = bottomNavigationView.getOrCreateBadge(R.id.nav_trabajadores_op);\n                    badgeDrawable.clearNumber();\n                    badgeDrawable.setVisible(false);\n                    // Navigate to the &quot;nav_trabajadores_op&quot; destination\n                    navController.navigate(R.id.nav_trabajadores_op);\n                    break;\n                case R.id.nav_usuario_op:\n                    navController.navigate(R.id.nav_usuario_op);\n                    break;\n            }\n\n            return false;\n        }\n    });\n\n    // Create and configure a counter view in the navigation drawer\n    LayoutInflater li = LayoutInflater.from(getApplicationContext());\n    tv_gallery_cunter = (TextView) li.inflate(R.layout.counter_gallery, null);\n    navigationView.getMenu().findItem(R.id.nav_observacion_op).setActionView(tv_gallery_cunter);\n    // Show the counter with a specific count number\n    Show_Counter(gallery_count_number);\n}\n\n    // Crear y configurar una vista de contador en el menú desplegable de navegación (navigationView)\n    LayoutInflater li = LayoutInflater.from(getApplicationContext());\n    tv_gallery_cunter = (TextView) li.inflate(R.layout.counter_gallery, null);\n    navigationView.getMenu().findItem(R.id.nav_observacion_op).setActionView(tv_gallery_cunter);\n    // Mostrar el contador con un número específico\n    Show_Counter(gallery_count_number);\n}`\n</code></pre>\n"},{"tags":["java","authentication","keycloak"],"owner":{"account_id":29422878,"reputation":1,"user_id":22544245,"display_name":"KiTTeNqz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694526510,"creation_date":1694526421,"question_id":77089741,"body_markdown":"I&#39;ve got custom auth flow with my auth provider. This provider also has its own custom form. After Username password login, i create my first form where user has to enter secret code(it&#39;s constant due to tests). After successful enter, i want to draw another form with just login, secret code and a button &quot;Next&quot;, which will finish auth process.\r\n\r\nThe problem is, i don&#39;t know how to pass my secret code to the new form, and, more importantly, i don&#39;t know how to get it in my custom form.\r\n\r\n```java\r\n\r\npublic class SecretCodeAuth implements Authenticator {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(SecretCodeAuth.class);\r\n    @Override\r\n    public void authenticate(AuthenticationFlowContext context) {\r\n        Response challenge = context.form().createForm(&quot;seccode.ftl&quot;);\r\n        context.challenge(challenge);\r\n    }\r\n\r\n    @Override\r\n    public void action(AuthenticationFlowContext context) {\r\n        String secretCode = context.getHttpRequest().getDecodedFormParameters().getFirst(&quot;seccode&quot;);\r\n        String expectedCode = &quot;555&quot;;\r\n\r\n        if(secretCode==null||!secretCode.equals(expectedCode)){\r\n            Response response = context.form()\r\n                            .setError(&quot;badCode&quot;)\r\n                                    .createForm(&quot;seccode.ftl&quot;);\r\n            context.failureChallenge(AuthenticationFlowError.INVALID_CREDENTIALS, response);\r\n            return;\r\n        }\r\n\r\n        context.getAuthenticationSession().setUserSessionNote(&quot;seccode&quot;, secretCode);\r\n        Response challenge = context\r\n                .form()\r\n                .createForm(&quot;gonext.ftl&quot;);\r\n        context.challenge(challenge);\r\n\r\n        if(&quot;true&quot;.equals(context.getHttpRequest().getDecodedFormParameters().getFirst(&quot;confirmation&quot;)))\r\n            context.success();\r\n    }\r\n}\r\n```\r\n\r\nAnd this is the second form code.\r\n\r\n```ftl\r\n&lt;#import &quot;template.ftl&quot; as layout&gt;\r\n&lt;@layout.registrationLayout displayMessage=false; section&gt;\r\n    &lt;#if section = &quot;title&quot;&gt;\r\n        ${msg(&quot;loginTitle&quot;,realm.name)}\r\n    &lt;#elseif section = &quot;header&quot;&gt;\r\n        Enter your secret code\r\n    &lt;#elseif section = &quot;form&quot;&gt;\r\n        &lt;form id=&quot;kc-totp-login-form&quot; class=&quot;${properties.kcFormClass!}&quot; action=&quot;${url.loginAction}&quot; method=&quot;post&quot;&gt;\r\n            &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\r\n                &lt;div class=&quot;${properties.kcLabelWrapperClass!}&quot;&gt;\r\n                    &lt;label for=&quot;totp&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;Your secret code is:&lt;/label&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;${properties.kcLabelWrapperClass!}&quot;&gt;\r\n                    &lt;label for=&quot;totp&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;${user}&lt;/label&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;${properties.kcInputWrapperClass!}&quot;&gt;\r\n                    &lt;input id=&quot;totp&quot; name=&quot;confirmation&quot; type=&quot;hidden&quot; class=&quot;${properties.kcInputClass!}&quot; value=&quot;true&quot; /&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n\r\n            &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\r\n                &lt;div id=&quot;kc-form-options&quot; class=&quot;${properties.kcFormOptionsClass!}&quot;&gt;\r\n                    &lt;div class=&quot;${properties.kcFormOptionsWrapperClass!}&quot;&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div id=&quot;kc-form-buttons&quot; class=&quot;${properties.kcFormButtonsClass!}&quot;&gt;\r\n                    &lt;div class=&quot;${properties.kcFormButtonsWrapperClass!}&quot;&gt;\r\n                        &lt;input class=&quot;${properties.kcButtonClass!} ${properties.kcButtonPrimaryClass!} ${properties.kcButtonLargeClass!}&quot; name=&quot;login&quot; id=&quot;kc-login&quot; type=&quot;submit&quot; value=&quot;Next&quot; /&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n        &lt;/form&gt;\r\n    &lt;/#if&gt;\r\n&lt;/@layout.registrationLayout&gt;\r\n```","title":"Transfer data between ftl forms keycloak","body":"<p>I've got custom auth flow with my auth provider. This provider also has its own custom form. After Username password login, i create my first form where user has to enter secret code(it's constant due to tests). After successful enter, i want to draw another form with just login, secret code and a button &quot;Next&quot;, which will finish auth process.</p>\n<p>The problem is, i don't know how to pass my secret code to the new form, and, more importantly, i don't know how to get it in my custom form.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class SecretCodeAuth implements Authenticator {\n\n    private static final Logger log = LoggerFactory.getLogger(SecretCodeAuth.class);\n    @Override\n    public void authenticate(AuthenticationFlowContext context) {\n        Response challenge = context.form().createForm(&quot;seccode.ftl&quot;);\n        context.challenge(challenge);\n    }\n\n    @Override\n    public void action(AuthenticationFlowContext context) {\n        String secretCode = context.getHttpRequest().getDecodedFormParameters().getFirst(&quot;seccode&quot;);\n        String expectedCode = &quot;555&quot;;\n\n        if(secretCode==null||!secretCode.equals(expectedCode)){\n            Response response = context.form()\n                            .setError(&quot;badCode&quot;)\n                                    .createForm(&quot;seccode.ftl&quot;);\n            context.failureChallenge(AuthenticationFlowError.INVALID_CREDENTIALS, response);\n            return;\n        }\n\n        context.getAuthenticationSession().setUserSessionNote(&quot;seccode&quot;, secretCode);\n        Response challenge = context\n                .form()\n                .createForm(&quot;gonext.ftl&quot;);\n        context.challenge(challenge);\n\n        if(&quot;true&quot;.equals(context.getHttpRequest().getDecodedFormParameters().getFirst(&quot;confirmation&quot;)))\n            context.success();\n    }\n}\n</code></pre>\n<p>And this is the second form code.</p>\n<pre><code>&lt;#import &quot;template.ftl&quot; as layout&gt;\n&lt;@layout.registrationLayout displayMessage=false; section&gt;\n    &lt;#if section = &quot;title&quot;&gt;\n        ${msg(&quot;loginTitle&quot;,realm.name)}\n    &lt;#elseif section = &quot;header&quot;&gt;\n        Enter your secret code\n    &lt;#elseif section = &quot;form&quot;&gt;\n        &lt;form id=&quot;kc-totp-login-form&quot; class=&quot;${properties.kcFormClass!}&quot; action=&quot;${url.loginAction}&quot; method=&quot;post&quot;&gt;\n            &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\n                &lt;div class=&quot;${properties.kcLabelWrapperClass!}&quot;&gt;\n                    &lt;label for=&quot;totp&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;Your secret code is:&lt;/label&gt;\n                &lt;/div&gt;\n\n                &lt;div class=&quot;${properties.kcLabelWrapperClass!}&quot;&gt;\n                    &lt;label for=&quot;totp&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;${user}&lt;/label&gt;\n                &lt;/div&gt;\n\n                &lt;div class=&quot;${properties.kcInputWrapperClass!}&quot;&gt;\n                    &lt;input id=&quot;totp&quot; name=&quot;confirmation&quot; type=&quot;hidden&quot; class=&quot;${properties.kcInputClass!}&quot; value=&quot;true&quot; /&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n            &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\n                &lt;div id=&quot;kc-form-options&quot; class=&quot;${properties.kcFormOptionsClass!}&quot;&gt;\n                    &lt;div class=&quot;${properties.kcFormOptionsWrapperClass!}&quot;&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div id=&quot;kc-form-buttons&quot; class=&quot;${properties.kcFormButtonsClass!}&quot;&gt;\n                    &lt;div class=&quot;${properties.kcFormButtonsWrapperClass!}&quot;&gt;\n                        &lt;input class=&quot;${properties.kcButtonClass!} ${properties.kcButtonPrimaryClass!} ${properties.kcButtonLargeClass!}&quot; name=&quot;login&quot; id=&quot;kc-login&quot; type=&quot;submit&quot; value=&quot;Next&quot; /&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/#if&gt;\n&lt;/@layout.registrationLayout&gt;\n</code></pre>\n"},{"tags":["java","unit-testing","junit","mockito","powermock"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1694526238,"post_id":77089479,"comment_id":135900423,"body_markdown":"That doesn&#39;t sound like a type you _should_ mock.  Make a real one and validate its values.","body":"That doesn&#39;t sound like a type you <i>should</i> mock.  Make a real one and validate its values."}],"answers":[{"tags":[],"owner":{"account_id":11706383,"reputation":119,"user_id":8569812,"display_name":"Gustavo Rey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694526499,"creation_date":1694526499,"answer_id":77089751,"question_id":77089479,"body_markdown":"I figured out how to solve this issue using PowerMockito following the code below:\r\n\r\n```\r\nimport org.powermock.api.mockito.PowerMockito;\r\nimport org.powermock.core.classloader.annotations.PrepareForTest;\r\nimport org.powermock.modules.junit4.PowerMockRunner;\r\n\r\n@RunWith(PowerMockRunner.class)\r\n@PrepareForTest({TargetDeliveryRequestBuilder.class, TargetDeliveryRequest.class})\r\npublic class MyTest {\r\n\r\n    private TargetDeliveryRequestBuilder targetDeliveryRequestBuilder;\r\n    \r\n    @Before\r\n    public void setUp() {\r\n       targetDeliveryRequestBuilder = PowerMockito.mock(TargetDeliveryRequestBuilder.class);\r\n    }\r\n\r\n    @Test\r\n    public void test() {\r\n        PowerMockito.mockStatic(TargetDeliveryRequest.class);\r\n        PowerMockito.when(TargetDeliveryRequest.builder()).thenReturn(targetDeliveryRequestBuilder);\r\n    }\r\n\r\n}\r\n```","title":"Mockito is not mocking a final class method","body":"<p>I figured out how to solve this issue using PowerMockito following the code below:</p>\n<pre><code>import org.powermock.api.mockito.PowerMockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest({TargetDeliveryRequestBuilder.class, TargetDeliveryRequest.class})\npublic class MyTest {\n\n    private TargetDeliveryRequestBuilder targetDeliveryRequestBuilder;\n    \n    @Before\n    public void setUp() {\n       targetDeliveryRequestBuilder = PowerMockito.mock(TargetDeliveryRequestBuilder.class);\n    }\n\n    @Test\n    public void test() {\n        PowerMockito.mockStatic(TargetDeliveryRequest.class);\n        PowerMockito.when(TargetDeliveryRequest.builder()).thenReturn(targetDeliveryRequestBuilder);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":11706383,"reputation":119,"user_id":8569812,"display_name":"Gustavo Rey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694526499,"creation_date":1694524470,"question_id":77089479,"body_markdown":"I have this code in my service and I&#39;m trying to mock this execute(), context() and build():\r\n\r\n\r\n```\r\nAttributes attributes = targetClient.getAttributes(\r\n                    TargetDeliveryRequest.builder()\r\n                            .execute(new ExecuteRequest().mboxes(Collections.singletonList(mboxRequest)))\r\n                            .context(new Context().channel(ChannelType.WEB)).build());\r\n```\r\n\r\nThis TargetDeliveryRequest third-party library, so I can&#39;t change anything there...\r\n```\r\npublic class TargetDeliveryRequest {\r\n    ....\r\n    public static TargetDeliveryRequestBuilder builder() {\r\n        return new TargetDeliveryRequestBuilder();\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;m trying to mock this execute(), context() and build():\r\n\r\n```\r\nTargetDeliveryRequestBuilder targetDeliveryRequestBuilder = mock(TargetDeliveryRequestBuilder.class);\r\n```\r\n\r\n**However, this TargetDeliveryRequestBuilder is a final class, because of this I&#39;m getting this error in the test execution:**\r\n\r\n\r\n&gt; org.mockito.exceptions.base.MockitoException: \r\nCannot mock/spy class com.adobe.target.edge.client.model.TargetDeliveryRequestBuilder\r\nMockito cannot mock/spy because : - final class\r\n\r\n```\r\npublic final class TargetDeliveryRequestBuilder {\r\n    ...\r\n    TargetDeliveryRequestBuilder() {\r\n    }\r\n    ...\r\n    public TargetDeliveryRequestBuilder context(Context context) {\r\n        this.request.context(context);\r\n        return this;\r\n    }\r\n\r\n    public TargetDeliveryRequestBuilder execute(ExecuteRequest execute) {\r\n        this.request.execute(execute);\r\n        return this;\r\n    }\r\n    ...\r\n    public TargetDeliveryRequest build() {\r\n        this.setTargetValues();\r\n        this.setVisitorValues();\r\n        this.createVisitorId();\r\n        this.setExperienceCloudValues();\r\n        TargetDeliveryRequest targetDeliveryRequest = TargetDeliveryRequest.fromRequest(this.request);\r\n        targetDeliveryRequest.setLocationHint(this.locationHint);\r\n        targetDeliveryRequest.setSessionId(this.sessionId);\r\n        targetDeliveryRequest.setVisitor(this.visitor);\r\n        targetDeliveryRequest.setDecisioningMethod(this.decisioningMethod);\r\n        return targetDeliveryRequest;\r\n    }\r\n    ...\r\n}\r\n```\r\n\r\nThe only way I discovered in the other questions here on Stackover was to add mockito-inline (&#39;org.mockito:mockito-inline:3.12.4&#39;), this makes my test work well, however, as my project is old, the moment I add mockito-inline, it breaks a lot of other tests. In other words, this is not an option for me.\r\n\r\nSimiliar issues:\r\nhttps://stackoverflow.com/questions/14292863/how-to-mock-a-final-class-with-mockito\r\nhttps://stackoverflow.com/questions/68840524/mockito-cannot-mock-spy-because-final-class\r\n\r\nDoes someone know how to mock this code? Thank you.\r\n\r\nVersions:\r\nJava: 8\r\nmockito-core: 3.12.4\r\npowermock-module-junit: 2.0.9\r\npowermock-api-mockito2: 2.0.9\r\n\r\n","title":"Mockito is not mocking a final class method","body":"<p>I have this code in my service and I'm trying to mock this execute(), context() and build():</p>\n<pre><code>Attributes attributes = targetClient.getAttributes(\n                    TargetDeliveryRequest.builder()\n                            .execute(new ExecuteRequest().mboxes(Collections.singletonList(mboxRequest)))\n                            .context(new Context().channel(ChannelType.WEB)).build());\n</code></pre>\n<p>This TargetDeliveryRequest third-party library, so I can't change anything there...</p>\n<pre><code>public class TargetDeliveryRequest {\n    ....\n    public static TargetDeliveryRequestBuilder builder() {\n        return new TargetDeliveryRequestBuilder();\n    }\n\n}\n</code></pre>\n<p>I'm trying to mock this execute(), context() and build():</p>\n<pre><code>TargetDeliveryRequestBuilder targetDeliveryRequestBuilder = mock(TargetDeliveryRequestBuilder.class);\n</code></pre>\n<p><strong>However, this TargetDeliveryRequestBuilder is a final class, because of this I'm getting this error in the test execution:</strong></p>\n<blockquote>\n<p>org.mockito.exceptions.base.MockitoException:\nCannot mock/spy class com.adobe.target.edge.client.model.TargetDeliveryRequestBuilder\nMockito cannot mock/spy because : - final class</p>\n</blockquote>\n<pre><code>public final class TargetDeliveryRequestBuilder {\n    ...\n    TargetDeliveryRequestBuilder() {\n    }\n    ...\n    public TargetDeliveryRequestBuilder context(Context context) {\n        this.request.context(context);\n        return this;\n    }\n\n    public TargetDeliveryRequestBuilder execute(ExecuteRequest execute) {\n        this.request.execute(execute);\n        return this;\n    }\n    ...\n    public TargetDeliveryRequest build() {\n        this.setTargetValues();\n        this.setVisitorValues();\n        this.createVisitorId();\n        this.setExperienceCloudValues();\n        TargetDeliveryRequest targetDeliveryRequest = TargetDeliveryRequest.fromRequest(this.request);\n        targetDeliveryRequest.setLocationHint(this.locationHint);\n        targetDeliveryRequest.setSessionId(this.sessionId);\n        targetDeliveryRequest.setVisitor(this.visitor);\n        targetDeliveryRequest.setDecisioningMethod(this.decisioningMethod);\n        return targetDeliveryRequest;\n    }\n    ...\n}\n</code></pre>\n<p>The only way I discovered in the other questions here on Stackover was to add mockito-inline ('org.mockito:mockito-inline:3.12.4'), this makes my test work well, however, as my project is old, the moment I add mockito-inline, it breaks a lot of other tests. In other words, this is not an option for me.</p>\n<p>Similiar issues:\n<a href=\"https://stackoverflow.com/questions/14292863/how-to-mock-a-final-class-with-mockito\">How to mock a final class with mockito</a>\n<a href=\"https://stackoverflow.com/questions/68840524/mockito-cannot-mock-spy-because-final-class\">Mockito cannot mock/spy because : - final class</a></p>\n<p>Does someone know how to mock this code? Thank you.</p>\n<p>Versions:\nJava: 8\nmockito-core: 3.12.4\npowermock-module-junit: 2.0.9\npowermock-api-mockito2: 2.0.9</p>\n"},{"tags":["java","spring-boot","logback","slf4j"],"comments":[{"owner":{"account_id":8513835,"reputation":143,"user_id":6383037,"display_name":"Maximilian Wiedemann"},"score":2,"creation_date":1667914123,"post_id":74286717,"comment_id":131277343,"body_markdown":"Are you using Wiremock 2.34.0 by any chance? Then upgrade to 2.35.0. We had the same issue and updated to 2.34.0 just a day before 2.35.0 was released. Reason: wiremock-jre8-standalone:2.34.0 includes version 2.x of slf4j-api in their jar, so it doesn&#39;t show up in any dependency tree. See https://github.com/wiremock/wiremock/issues/1964","body":"Are you using Wiremock 2.34.0 by any chance? Then upgrade to 2.35.0. We had the same issue and updated to 2.34.0 just a day before 2.35.0 was released. Reason: wiremock-jre8-standalone:2.34.0 includes version 2.x of slf4j-api in their jar, so it doesn&#39;t show up in any dependency tree. See <a href=\"https://github.com/wiremock/wiremock/issues/1964\" rel=\"nofollow noreferrer\">github.com/wiremock/wiremock/issues/1964</a>"},{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1668165779,"post_id":74286717,"comment_id":131345050,"body_markdown":"You are a life saver! Can you please add this as an answer so I can upvote it please?","body":"You are a life saver! Can you please add this as an answer so I can upvote it please?"}],"answers":[{"tags":[],"owner":{"account_id":11270646,"reputation":405,"user_id":8266206,"display_name":"Charden Daxicen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694526323,"creation_date":1694526323,"answer_id":77089731,"question_id":74286717,"body_markdown":"If you are using gradle, add this dependency\r\n\r\n    implementation &#39;org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0&#39;\r\n\r\n","title":"SLF4J no providers were found when running integration-tests","body":"<p>If you are using gradle, add this dependency</p>\n<pre><code>implementation 'org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0'\n</code></pre>\n"}],"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":811,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694526323,"creation_date":1667380033,"question_id":74286717,"body_markdown":"I have project using Spring boot and having three distinct sourceSets (main, test and integration test). The integration-test source set is defined that way in the respective Gradle file:\r\n\r\n```\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDir &quot;$buildDir/generated/server/src/main/java&quot;\r\n        }\r\n    }\r\n    integrationTest {\r\n        java {\r\n            compileClasspath += main.output + test.output\r\n            runtimeClasspath += main.output + test.output\r\n            srcDir &#39;src/integration-test/java&#39;\r\n        }\r\n        resources.srcDir &#39;src/integration-test/resources&#39;\r\n    }\r\n}\r\n```\r\n\r\nThe problem that I am facing is that when I run the integration-tests suite, the application starts but nothing gets logged. In fact I am getting the following warning:\r\n\r\n```\r\nSLF4J: No SLF4J providers were found.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\nSLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.\r\nSLF4J: Ignoring binding found at [jar:file:/Users/akourtesas/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.\r\n```\r\n\r\nI have tried debugging this but I have no idea what&#39;s happening. I have printed the classpaths for both the `main` and `integrationTest` source sets and I can for sure say that the SLF4J version is 1.7.36 and my Logback version is 1.2.11. I have no custom configuration or anyting weird in place so it seems all the more weird that this works fine in all cases except the integration tests. For reference my Spring Boot version is 2.7.5.\r\n\r\nHas anyone encountered this in the past? If yes what needs to be done in order to resolve this? ","title":"SLF4J no providers were found when running integration-tests","body":"<p>I have project using Spring boot and having three distinct sourceSets (main, test and integration test). The integration-test source set is defined that way in the respective Gradle file:</p>\n<pre><code>sourceSets {\n    main {\n        java {\n            srcDir &quot;$buildDir/generated/server/src/main/java&quot;\n        }\n    }\n    integrationTest {\n        java {\n            compileClasspath += main.output + test.output\n            runtimeClasspath += main.output + test.output\n            srcDir 'src/integration-test/java'\n        }\n        resources.srcDir 'src/integration-test/resources'\n    }\n}\n</code></pre>\n<p>The problem that I am facing is that when I run the integration-tests suite, the application starts but nothing gets logged. In fact I am getting the following warning:</p>\n<pre><code>SLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nSLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.\nSLF4J: Ignoring binding found at [jar:file:/Users/akourtesas/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.\n</code></pre>\n<p>I have tried debugging this but I have no idea what's happening. I have printed the classpaths for both the <code>main</code> and <code>integrationTest</code> source sets and I can for sure say that the SLF4J version is 1.7.36 and my Logback version is 1.2.11. I have no custom configuration or anyting weird in place so it seems all the more weird that this works fine in all cases except the integration tests. For reference my Spring Boot version is 2.7.5.</p>\n<p>Has anyone encountered this in the past? If yes what needs to be done in order to resolve this?</p>\n"},{"tags":["java","gradle","build","integration-testing","source-sets"],"answers":[{"comments":[{"owner":{"account_id":31011,"reputation":122006,"user_id":84889,"display_name":"Peter Niederwieser"},"score":7,"creation_date":1342796985,"post_id":11581420,"comment_id":15324533,"body_markdown":"You&#39;ll still need to declare and configure an integration test task. In terms of documentation, there is a `java/withIntegrationTests` sample in the full Gradle distribution.","body":"You&#39;ll still need to declare and configure an integration test task. In terms of documentation, there is a <code>java&#47;withIntegrationTests</code> sample in the full Gradle distribution."},{"owner":{"account_id":56959,"reputation":9026,"user_id":170587,"accept_rate":79,"display_name":"Spina"},"score":0,"creation_date":1343051103,"post_id":11581420,"comment_id":15376371,"body_markdown":"Thanks @PeterNiederwieser I&#39;ve corrected my sample build script.","body":"Thanks @PeterNiederwieser I&#39;ve corrected my sample build script."},{"owner":{"account_id":17533,"reputation":5283,"user_id":39334,"accept_rate":81,"display_name":"stolsvik"},"score":0,"creation_date":1389776776,"post_id":11581420,"comment_id":31802031,"body_markdown":"@PeterNiederwieser Thanks - could you please link it up? I also find this exact situation severely lacking in docs: It is all well and good defining a new sourceSet, but no info about &quot;hooking this into&quot; the actual compile, jar, test and whatnot targets - as this example does (except for adding into the jar, or making a new jar, out of that sourceSet).","body":"@PeterNiederwieser Thanks - could you please link it up? I also find this exact situation severely lacking in docs: It is all well and good defining a new sourceSet, but no info about &quot;hooking this into&quot; the actual compile, jar, test and whatnot targets - as this example does (except for adding into the jar, or making a new jar, out of that sourceSet)."},{"owner":{"account_id":159083,"reputation":15549,"user_id":378151,"accept_rate":74,"display_name":"Snekse"},"score":0,"creation_date":1416849860,"post_id":11581420,"comment_id":42723973,"body_markdown":"On line 6, I get &quot;Cannot resolve symbol &#39;java&#39;&quot; when using IntelliJ.  Any thoughts on why?","body":"On line 6, I get &quot;Cannot resolve symbol &#39;java&#39;&quot; when using IntelliJ.  Any thoughts on why?"},{"owner":{"account_id":56959,"reputation":9026,"user_id":170587,"accept_rate":79,"display_name":"Spina"},"score":0,"creation_date":1416933670,"post_id":11581420,"comment_id":42763013,"body_markdown":"I would expect the java symbol to be defined in line 1. Is that present? If you&#39;re using a newer version of Gradle they may have change the implementation of sourceSets. If so, you&#39;ll need to check the appropriate docs.","body":"I would expect the java symbol to be defined in line 1. Is that present? If you&#39;re using a newer version of Gradle they may have change the implementation of sourceSets. If so, you&#39;ll need to check the appropriate docs."},{"owner":{"account_id":405939,"reputation":11839,"user_id":775138,"accept_rate":66,"display_name":"herman"},"score":0,"creation_date":1483957665,"post_id":11581420,"comment_id":70296223,"body_markdown":"@stolsvik https://github.com/gradle/gradle/tree/master/subprojects/docs/src/samples/java/withIntegrationTests","body":"@stolsvik <a href=\"https://github.com/gradle/gradle/tree/master/subprojects/docs/src/samples/java/withIntegrationTests\" rel=\"nofollow noreferrer\">github.com/gradle/gradle/tree/master/subprojects/docs/src/&hellip;</a>"},{"owner":{"account_id":252146,"reputation":4740,"user_id":529977,"accept_rate":62,"display_name":"childno͡.de"},"score":0,"creation_date":1551164892,"post_id":11581420,"comment_id":96529355,"body_markdown":"I see only one difference to the doc https://docs.gradle.org/4.10.2/userguide/java_testing.html#sec:configuring_java_integration_tests at the configurations block, any reason why?\n\n@herman interesting enough this samples doesn&#39;t match the documentation ;(","body":"I see only one difference to the doc <a href=\"https://docs.gradle.org/4.10.2/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"nofollow noreferrer\">docs.gradle.org/4.10.2/userguide/&hellip;</a> at the configurations block, any reason why?  @herman interesting enough this samples doesn&#39;t match the documentation ;("}],"tags":[],"owner":{"account_id":56959,"reputation":9026,"user_id":170587,"accept_rate":79,"display_name":"Spina"},"comment_count":7,"down_vote_count":0,"up_vote_count":136,"is_accepted":true,"score":136,"last_activity_date":1610597822,"creation_date":1342794647,"answer_id":11581420,"question_id":11581419,"body_markdown":"**Update for 2021:** \r\n\r\nA lot has changed in 8ish years. Gradle continues to be a great tool. Now there&#39;s a whole section in the docs dedicated to configuring Integration Tests. I recommend you [read the docs](https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests) now.\r\n\r\n**Original Answer:**\r\n\r\nThis took me a while to figure out and the online resources weren&#39;t great. So I wanted to document my solution.\r\n\r\nThis is a simple gradle build script that has an intTest source set in addition to the main and test source sets:\r\n\r\n    apply plugin: &quot;java&quot;\r\n\r\n    sourceSets {\r\n        // Note that just declaring this sourceset creates two configurations.\r\n\t    intTest {\r\n\t\t    java {\r\n\t    \t\tcompileClasspath += main.output\r\n                runtimeClasspath += main.output\r\n\t\t    }\r\n\t    }\r\n    }\r\n\r\n    configurations {\r\n\t    intTestCompile.extendsFrom testCompile\r\n\t    intTestRuntime.extendsFrom testRuntime\r\n    }\r\n\r\n    task intTest(type:Test){\r\n    \tdescription = &quot;Run integration tests (located in src/intTest/...).&quot;\r\n    \ttestClassesDir = project.sourceSets.intTest.output.classesDir\r\n    \tclasspath = project.sourceSets.intTest.runtimeClasspath\r\n    }","title":"How do I add a new sourceset to Gradle?","body":"<p><strong>Update for 2021:</strong></p>\n<p>A lot has changed in 8ish years. Gradle continues to be a great tool. Now there's a whole section in the docs dedicated to configuring Integration Tests. I recommend you <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"noreferrer\">read the docs</a> now.</p>\n<p><strong>Original Answer:</strong></p>\n<p>This took me a while to figure out and the online resources weren't great. So I wanted to document my solution.</p>\n<p>This is a simple gradle build script that has an intTest source set in addition to the main and test source sets:</p>\n<pre><code>apply plugin: &quot;java&quot;\n\nsourceSets {\n    // Note that just declaring this sourceset creates two configurations.\n    intTest {\n        java {\n            compileClasspath += main.output\n            runtimeClasspath += main.output\n        }\n    }\n}\n\nconfigurations {\n    intTestCompile.extendsFrom testCompile\n    intTestRuntime.extendsFrom testRuntime\n}\n\ntask intTest(type:Test){\n    description = &quot;Run integration tests (located in src/intTest/...).&quot;\n    testClassesDir = project.sourceSets.intTest.output.classesDir\n    classpath = project.sourceSets.intTest.runtimeClasspath\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":252146,"reputation":4740,"user_id":529977,"accept_rate":62,"display_name":"childno͡.de"},"score":1,"creation_date":1466149182,"post_id":16819429,"comment_id":63207035,"body_markdown":"while `java {\n            srcDir &#39;src/integrationtest/java&#39;\n        }\n        resources {\n            srcDir &#39;src/integrationtest/resources&#39;\n        }` is not relevant since it just redeclares `src/&lt;sourceSetName&gt;/...` to `src/integrationtest/...`: here: change the capital T to a lower t","body":"while <code>java {             srcDir &#39;src&#47;integrationtest&#47;java&#39;         }         resources {             srcDir &#39;src&#47;integrationtest&#47;resources&#39;         }</code> is not relevant since it just redeclares <code>src&#47;&lt;sourceSetName&gt;&#47;...</code> to <code>src&#47;integrationtest&#47;...</code>: here: change the capital T to a lower t"},{"owner":{"account_id":1226246,"reputation":5613,"user_id":1191727,"display_name":"chalimartines"},"score":0,"creation_date":1582076761,"post_id":16819429,"comment_id":106649477,"body_markdown":"Beware of this approach. `compileClasspath += sourceSets.main.runtimeClasspath` is combining two sets of files. There is no usual conflict resolution for dependencies. You can end up with two versions of the same library. Extending configurations will help with that.","body":"Beware of this approach. <code>compileClasspath += sourceSets.main.runtimeClasspath</code> is combining two sets of files. There is no usual conflict resolution for dependencies. You can end up with two versions of the same library. Extending configurations will help with that."}],"tags":[],"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"comment_count":2,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1369845283,"creation_date":1369845283,"answer_id":16819429,"question_id":11581419,"body_markdown":"Here is how I achieved this without using `configurations{ }`.\r\n\r\n\r\n    apply plugin: &#39;java&#39;\r\n\r\n    sourceCompatibility = JavaVersion.VERSION_1_6\r\n\r\n    sourceSets {\r\n        integrationTest {\r\n            java {\r\n                srcDir &#39;src/integrationtest/java&#39;\r\n            }\r\n            resources {\r\n                srcDir &#39;src/integrationtest/resources&#39;\r\n            }\r\n            compileClasspath += sourceSets.main.runtimeClasspath\r\n        }\r\n    }\r\n\r\n    task integrationTest(type: Test) {\r\n        description = &quot;Runs Integration Tests&quot;\r\n        testClassesDir = sourceSets.integrationTest.output.classesDir\r\n        classpath += sourceSets.integrationTest.runtimeClasspath\r\n    }\r\n\r\n***Tested using:** Gradle 1.4 and Gradle 1.6*","title":"How do I add a new sourceset to Gradle?","body":"<p>Here is how I achieved this without using <code>configurations{ }</code>.</p>\n\n<pre><code>apply plugin: 'java'\n\nsourceCompatibility = JavaVersion.VERSION_1_6\n\nsourceSets {\n    integrationTest {\n        java {\n            srcDir 'src/integrationtest/java'\n        }\n        resources {\n            srcDir 'src/integrationtest/resources'\n        }\n        compileClasspath += sourceSets.main.runtimeClasspath\n    }\n}\n\ntask integrationTest(type: Test) {\n    description = \"Runs Integration Tests\"\n    testClassesDir = sourceSets.integrationTest.output.classesDir\n    classpath += sourceSets.integrationTest.runtimeClasspath\n}\n</code></pre>\n\n<p><em><strong>Tested using:</strong> Gradle 1.4 and Gradle 1.6</em></p>\n"},{"comments":[{"owner":{"account_id":252146,"reputation":4740,"user_id":529977,"accept_rate":62,"display_name":"childno͡.de"},"score":1,"creation_date":1470057602,"post_id":37882006,"comment_id":64777750,"body_markdown":"(!) as it turns out, the single use of sourceSet enhancements without configurations or output results in a make error in idea after initally opening a project. the build dependency (here: test) for the new &quot;module&quot; (here: integrationTest) isn&#39;t available upon first `compileTestJava`","body":"(!) as it turns out, the single use of sourceSet enhancements without configurations or output results in a make error in idea after initally opening a project. the build dependency (here: test) for the new &quot;module&quot; (here: integrationTest) isn&#39;t available upon first <code>compileTestJava</code>"},{"owner":{"account_id":3568486,"reputation":4276,"user_id":2979435,"accept_rate":42,"display_name":"deFreitas"},"score":2,"creation_date":1551037315,"post_id":37882006,"comment_id":96483072,"body_markdown":"`classesDir` was migrated to `classesDirs` on gradle 5","body":"<code>classesDir</code> was migrated to <code>classesDirs</code> on gradle 5"},{"owner":{"account_id":252146,"reputation":4740,"user_id":529977,"accept_rate":62,"display_name":"childno͡.de"},"score":0,"creation_date":1551165869,"post_id":37882006,"comment_id":96529777,"body_markdown":"thanks for the hint @deFreitas, I marked the answer as outdated","body":"thanks for the hint @deFreitas, I marked the answer as outdated"}],"tags":[],"owner":{"account_id":252146,"reputation":4740,"user_id":529977,"accept_rate":62,"display_name":"childno͡.de"},"comment_count":3,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1551165838,"creation_date":1466167793,"answer_id":37882006,"question_id":11581419,"body_markdown":"&gt; This was **once written for Gradle 2.x / 3.x in 2016 and is far outdated**!!\r\n&gt; Please have a look [at the documented solutions in Gradle 4 and up](/a/54695537/529977)\r\n\r\n----\r\n\r\nTo sum up both old answers (get best and minimum viable of both worlds):\r\n\r\nsome warm words first:\r\n\r\n&lt;!-- language-all: lang-groovy --&gt;\r\n\r\n1. first, we need to define the `sourceSet`:\r\n\r\n        sourceSets {\r\n            integrationTest\r\n        }\r\n\r\n\r\n2. next we expand the `sourceSet` from `test`, therefor we use the `test.runtimeClasspath` (which includes all dependenciess from `test` AND `test` itself) as classpath for the derived `sourceSet`:\r\n\r\n        sourceSets {\r\n            integrationTest {\r\n                compileClasspath += sourceSets.test.runtimeClasspath\r\n                runtimeClasspath += sourceSets.test.runtimeClasspath // ***)\r\n            }\r\n        }\r\n\r\n* **note**) somehow this redeclaration / extend for `sourceSets.integrationTest.runtimeClasspath` is needed, but should be irrelevant since `runtimeClasspath` always expands `output + runtimeSourceSet`, don&#39;t get it\r\n\r\n3. we define a dedicated task for just running integration tests:\r\n\r\n        task integrationTest(type: Test) {\r\n        }\r\n\r\n4. Configure the `integrationTest` test classes and classpaths use. The defaults from the `java` plugin use the `test` `sourceSet`\r\n\r\n        task integrationTest(type: Test) {\r\n            testClassesDir = sourceSets.integrationTest.output.classesDir\r\n            classpath = sourceSets.integrationTest.runtimeClasspath\r\n        }\r\n\r\n5. *(optional)* auto run after *test* &lt;pre&gt;\r\nintegrationTest.dependsOn test\r\n&lt;/pre&gt;\r\n\r\n6. *(optional)* add dependency from `check` (so it always runs when `build` or `check` are executed)\r\n\r\n        tasks.check.dependsOn(tasks.integrationTest)\r\n\r\n7. *(optional)* add java,resources to the `sourceSet` to support auto-detection and create these &quot;partials&quot; in your IDE. i.e. IntelliJ IDEA will auto create `sourceSet` directories java and resources for each set if it doesn&#39;t exist:\r\n\r\n        sourceSets {\r\n             integrationTest {\r\n                 java\r\n                 resources\r\n             }\r\n        }\r\n\r\n***tl;dr***\r\n\r\n\r\n    apply plugin: &#39;java&#39;\r\n    \r\n    // apply the runtimeClasspath from &quot;test&quot; sourceSet to the new one\r\n    // to include any needed assets: test, main, test-dependencies and main-dependencies\r\n    sourceSets {\r\n        integrationTest {\r\n            // not necessary but nice for IDEa&#39;s\r\n            java\r\n            resources\r\n\r\n            compileClasspath += sourceSets.test.runtimeClasspath\r\n            // somehow this redeclaration is needed, but should be irrelevant\r\n            // since runtimeClasspath always expands compileClasspath\r\n            runtimeClasspath += sourceSets.test.runtimeClasspath\r\n        }\r\n    }\r\n\r\n    // define custom test task for running integration tests\r\n    task integrationTest(type: Test) {\r\n        testClassesDir = sourceSets.integrationTest.output.classesDir\r\n        classpath = sourceSets.integrationTest.runtimeClasspath\r\n    }\r\n    tasks.integrationTest.dependsOn(tasks.test)\r\n\r\n\r\nreferring to:\r\n\r\n* [gradle java chapter 45.7.1. Source set properties](https://docs.gradle.org/current/userguide/java_plugin.html#N1569A)\r\n* [gradle java chapter 45.7.3. Some source set examples](https://docs.gradle.org/current/userguide/java_plugin.html#N1582C)\r\n\r\nUnfortunatly, the example code on [github.com/gradle/gradle/subprojects/docs/src/samples/java/customizedLayout/build.gradle](https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/customizedLayout/build.gradle) or […/gradle/…/withIntegrationTests/build.gradle](https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/withIntegrationTests/build.gradle) seems not to handle this or has a different / more complex / for me no clearer solution anyway! ","title":"How do I add a new sourceset to Gradle?","body":"<blockquote>\n  <p>This was <strong>once written for Gradle 2.x / 3.x in 2016 and is far outdated</strong>!!\n  Please have a look <a href=\"/a/54695537/529977\">at the documented solutions in Gradle 4 and up</a></p>\n</blockquote>\n\n<hr>\n\n<p>To sum up both old answers (get best and minimum viable of both worlds):</p>\n\n<p>some warm words first:</p>\n\n\n\n<ol>\n<li><p>first, we need to define the <code>sourceSet</code>:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>sourceSets {\n    integrationTest\n}\n</code></pre></li>\n<li><p>next we expand the <code>sourceSet</code> from <code>test</code>, therefor we use the <code>test.runtimeClasspath</code> (which includes all dependenciess from <code>test</code> AND <code>test</code> itself) as classpath for the derived <code>sourceSet</code>:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>sourceSets {\n    integrationTest {\n        compileClasspath += sourceSets.test.runtimeClasspath\n        runtimeClasspath += sourceSets.test.runtimeClasspath // ***)\n    }\n}\n</code></pre>\n\n<ul>\n<li><strong>note</strong>) somehow this redeclaration / extend for <code>sourceSets.integrationTest.runtimeClasspath</code> is needed, but should be irrelevant since <code>runtimeClasspath</code> always expands <code>output + runtimeSourceSet</code>, don't get it</li>\n</ul></li>\n<li><p>we define a dedicated task for just running integration tests:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>task integrationTest(type: Test) {\n}\n</code></pre></li>\n<li><p>Configure the <code>integrationTest</code> test classes and classpaths use. The defaults from the <code>java</code> plugin use the <code>test</code> <code>sourceSet</code></p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>task integrationTest(type: Test) {\n    testClassesDir = sourceSets.integrationTest.output.classesDir\n    classpath = sourceSets.integrationTest.runtimeClasspath\n}\n</code></pre></li>\n<li><p><em>(optional)</em> auto run after <em>test</em> <pre>\nintegrationTest.dependsOn test\n</pre></p></li>\n<li><p><em>(optional)</em> add dependency from <code>check</code> (so it always runs when <code>build</code> or <code>check</code> are executed)</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>tasks.check.dependsOn(tasks.integrationTest)\n</code></pre></li>\n<li><p><em>(optional)</em> add java,resources to the <code>sourceSet</code> to support auto-detection and create these \"partials\" in your IDE. i.e. IntelliJ IDEA will auto create <code>sourceSet</code> directories java and resources for each set if it doesn't exist:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>sourceSets {\n     integrationTest {\n         java\n         resources\n     }\n}\n</code></pre></li>\n</ol>\n\n<p><strong><em>tl;dr</em></strong></p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>apply plugin: 'java'\n\n// apply the runtimeClasspath from \"test\" sourceSet to the new one\n// to include any needed assets: test, main, test-dependencies and main-dependencies\nsourceSets {\n    integrationTest {\n        // not necessary but nice for IDEa's\n        java\n        resources\n\n        compileClasspath += sourceSets.test.runtimeClasspath\n        // somehow this redeclaration is needed, but should be irrelevant\n        // since runtimeClasspath always expands compileClasspath\n        runtimeClasspath += sourceSets.test.runtimeClasspath\n    }\n}\n\n// define custom test task for running integration tests\ntask integrationTest(type: Test) {\n    testClassesDir = sourceSets.integrationTest.output.classesDir\n    classpath = sourceSets.integrationTest.runtimeClasspath\n}\ntasks.integrationTest.dependsOn(tasks.test)\n</code></pre>\n\n<p>referring to:</p>\n\n<ul>\n<li><a href=\"https://docs.gradle.org/current/userguide/java_plugin.html#N1569A\" rel=\"noreferrer\">gradle java chapter 45.7.1. Source set properties</a></li>\n<li><a href=\"https://docs.gradle.org/current/userguide/java_plugin.html#N1582C\" rel=\"noreferrer\">gradle java chapter 45.7.3. Some source set examples</a></li>\n</ul>\n\n<p>Unfortunatly, the example code on <a href=\"https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/customizedLayout/build.gradle\" rel=\"noreferrer\">github.com/gradle/gradle/subprojects/docs/src/samples/java/customizedLayout/build.gradle</a> or <a href=\"https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/withIntegrationTests/build.gradle\" rel=\"noreferrer\">…/gradle/…/withIntegrationTests/build.gradle</a> seems not to handle this or has a different / more complex / for me no clearer solution anyway! </p>\n"},{"tags":[],"owner":{"account_id":240022,"reputation":27037,"user_id":510017,"accept_rate":88,"display_name":"Jonathan Schneider"},"comment_count":0,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1470950271,"creation_date":1470765826,"answer_id":38857580,"question_id":11581419,"body_markdown":"The [nebula-facet][1] plugin eliminates the boilerplate:\r\n\r\n    apply plugin: &#39;nebula.facet&#39;\r\n    facets {\r\n        integrationTest {\r\n            parentSourceSet = &#39;test&#39;\r\n        }\r\n    }\r\n\r\nFor integration tests specifically, even [this is done for you][2], just apply:\r\n\r\n    apply plugin: &#39;nebula.integtest&#39;\r\n\r\nThe Gradle plugin portal links for each are:\r\n\r\n1. [nebula.facet][3]\r\n2. [nebula.integtest][4]\r\n\r\n\r\n  [1]: https://github.com/nebula-plugins/nebula-project-plugin#nebula-facet-plugin\r\n  [2]: https://github.com/nebula-plugins/nebula-project-plugin#nebula-integtest-plugin\r\n  [3]: https://plugins.gradle.org/plugin/nebula.facet\r\n  [4]: https://plugins.gradle.org/plugin/nebula.integtest","title":"How do I add a new sourceset to Gradle?","body":"<p>The <a href=\"https://github.com/nebula-plugins/nebula-project-plugin#nebula-facet-plugin\" rel=\"noreferrer\">nebula-facet</a> plugin eliminates the boilerplate:</p>\n\n<pre><code>apply plugin: 'nebula.facet'\nfacets {\n    integrationTest {\n        parentSourceSet = 'test'\n    }\n}\n</code></pre>\n\n<p>For integration tests specifically, even <a href=\"https://github.com/nebula-plugins/nebula-project-plugin#nebula-integtest-plugin\" rel=\"noreferrer\">this is done for you</a>, just apply:</p>\n\n<pre><code>apply plugin: 'nebula.integtest'\n</code></pre>\n\n<p>The Gradle plugin portal links for each are:</p>\n\n<ol>\n<li><a href=\"https://plugins.gradle.org/plugin/nebula.facet\" rel=\"noreferrer\">nebula.facet</a></li>\n<li><a href=\"https://plugins.gradle.org/plugin/nebula.integtest\" rel=\"noreferrer\">nebula.integtest</a></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1719341,"reputation":1451,"user_id":1575673,"accept_rate":87,"display_name":"Merk"},"score":0,"creation_date":1549299879,"post_id":45465101,"comment_id":95844646,"body_markdown":"switch to &lt;hmm&gt; ?? Your before and after are the same.","body":"switch to &lt;hmm&gt; ?? Your before and after are the same."}],"tags":[],"owner":{"account_id":217857,"reputation":294,"user_id":1429373,"display_name":"Ryan Sobol"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1501688971,"creation_date":1501687894,"answer_id":45465101,"question_id":11581419,"body_markdown":"Here&#39;s what works for me as of Gradle 4.0.\r\n\r\n    sourceSets {\r\n      integrationTest {\r\n        compileClasspath += sourceSets.test.compileClasspath\r\n        runtimeClasspath += sourceSets.test.runtimeClasspath\r\n      }\r\n    }\r\n    \r\n    task integrationTest(type: Test) {\r\n      description = &quot;Runs the integration tests.&quot;\r\n      group = &#39;verification&#39;\r\n      testClassesDirs = sourceSets.integrationTest.output.classesDirs\r\n      classpath = sourceSets.integrationTest.runtimeClasspath\r\n    }\r\n\r\nAs of version 4.0, Gradle now uses separate classes directories for each language in a source set. So if your build script uses `sourceSets.integrationTest.output.classesDir`, you&#39;ll see the following deprecation warning.\r\n\r\n&gt; Gradle now uses separate output directories for each JVM language, but this build assumes a single directory for all classes from a source set. This behaviour has been deprecated and is scheduled to be removed in Gradle 5.0\r\n\r\n\r\nTo get rid of this warning, just switch to `sourceSets.integrationTest.output.classesDirs` instead. For more information, see the [Gradle 4.0 release notes][1].\r\n\r\n\r\n  [1]: https://docs.gradle.org/4.0/release-notes.html#detecting-test-classes-for-custom-test-tasks","title":"How do I add a new sourceset to Gradle?","body":"<p>Here's what works for me as of Gradle 4.0.</p>\n\n<pre><code>sourceSets {\n  integrationTest {\n    compileClasspath += sourceSets.test.compileClasspath\n    runtimeClasspath += sourceSets.test.runtimeClasspath\n  }\n}\n\ntask integrationTest(type: Test) {\n  description = \"Runs the integration tests.\"\n  group = 'verification'\n  testClassesDirs = sourceSets.integrationTest.output.classesDirs\n  classpath = sourceSets.integrationTest.runtimeClasspath\n}\n</code></pre>\n\n<p>As of version 4.0, Gradle now uses separate classes directories for each language in a source set. So if your build script uses <code>sourceSets.integrationTest.output.classesDir</code>, you'll see the following deprecation warning.</p>\n\n<blockquote>\n  <p>Gradle now uses separate output directories for each JVM language, but this build assumes a single directory for all classes from a source set. This behaviour has been deprecated and is scheduled to be removed in Gradle 5.0</p>\n</blockquote>\n\n<p>To get rid of this warning, just switch to <code>sourceSets.integrationTest.output.classesDirs</code> instead. For more information, see the <a href=\"https://docs.gradle.org/4.0/release-notes.html#detecting-test-classes-for-custom-test-tasks\" rel=\"nofollow noreferrer\">Gradle 4.0 release notes</a>.</p>\n"},{"tags":[],"owner":{"account_id":85254,"reputation":1589,"user_id":237814,"accept_rate":89,"display_name":"jenglert"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1551165454,"creation_date":1550163739,"answer_id":54695537,"question_id":11581419,"body_markdown":"If you&#39;re using \r\n\r\n* Gradle 5.x, have a look at [Documentation Section &quot;Testing Java &gt; Configuring integration tests][1]\r\nExample 14 and 15 for details (both for Groovy and Kotlin DSL, either which one you prefer)&lt;br/&gt;\r\n * alt: &quot;current&quot; Gradle doc link at [2], but might defer in future, you should have a look at if examples changes)\r\n* for Gradle 4 have a look at ancient version [3] which is close near to what [@Spina posted in 2012][4]\r\n\r\nTo get IntelliJ to recognize custom sourceset as test sources root:\r\n\r\n    plugin {\r\n        idea\r\n    }\r\n    \r\n    idea {\r\n        module {\r\n            testSourceDirs = testSourceDirs + sourceSets[&quot;intTest&quot;].allJava.srcDirs\r\n            testResourceDirs = testResourceDirs + sourceSets[&quot;intTest&quot;].resources.srcDirs\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://docs.gradle.org/5.2.1/userguide/java_testing.html#sec:configuring_java_integration_tests\r\n  [2]: https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\r\n  [3]: https://docs.gradle.org/4.10.2/userguide/java_testing.html#sec:configuring_java_integration_tests\r\n  [4]: /questions/11581419/11581420#11581420","title":"How do I add a new sourceset to Gradle?","body":"<p>If you're using </p>\n\n<ul>\n<li>Gradle 5.x, have a look at <a href=\"https://docs.gradle.org/5.2.1/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"noreferrer\">Documentation Section \"Testing Java > Configuring integration tests</a>\nExample 14 and 15 for details (both for Groovy and Kotlin DSL, either which one you prefer)<br/>\n\n<ul>\n<li>alt: \"current\" Gradle doc link at <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"noreferrer\">2</a>, but might defer in future, you should have a look at if examples changes)</li>\n</ul></li>\n<li>for Gradle 4 have a look at ancient version <a href=\"https://docs.gradle.org/4.10.2/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"noreferrer\">3</a> which is close near to what <a href=\"/questions/11581419/11581420#11581420\">@Spina posted in 2012</a></li>\n</ul>\n\n<p>To get IntelliJ to recognize custom sourceset as test sources root:</p>\n\n<pre><code>plugin {\n    idea\n}\n\nidea {\n    module {\n        testSourceDirs = testSourceDirs + sourceSets[\"intTest\"].allJava.srcDirs\n        testResourceDirs = testResourceDirs + sourceSets[\"intTest\"].resources.srcDirs\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9022797,"reputation":2681,"user_id":6723250,"accept_rate":62,"display_name":"xeruf"},"score":0,"creation_date":1606238556,"post_id":59458709,"comment_id":114900999,"body_markdown":"idk why this  answer is displayed first for me. Sorry, but you haven&#39;t added any new sourcesets and thus missed the question.","body":"idk why this  answer is displayed first for me. Sorry, but you haven&#39;t added any new sourcesets and thus missed the question."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1614668928,"post_id":59458709,"comment_id":117448139,"body_markdown":"But then your answer solved **my** problem ;-)","body":"But then your answer solved <b>my</b> problem ;-)"}],"tags":[],"owner":{"account_id":2194580,"reputation":71,"user_id":1940627,"display_name":"hoopyfrood"},"comment_count":2,"down_vote_count":4,"up_vote_count":3,"is_accepted":false,"score":-1,"last_activity_date":1577119581,"creation_date":1577119581,"answer_id":59458709,"question_id":11581419,"body_markdown":"I&#39;m new to Gradle, using Gradle 6.0.1 JUnit 4.12. Here&#39;s what I came up with to solve this problem.\r\n\r\n    apply plugin: &#39;java&#39;\r\n    repositories { jcenter() }\r\n\r\n    dependencies {\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n    }\r\n\r\n    sourceSets {\r\n      main {\r\n        java {\r\n           srcDirs = [&#39;src&#39;]\r\n        }\r\n      }\r\n      test {\r\n        java {\r\n          srcDirs = [&#39;tests&#39;]\r\n        }\r\n      }\r\n    }\r\n\r\nNotice that the main source and test source is referenced separately, one under `main` and one under `test`.\r\n\r\nThe `testImplementation` item under `dependencies` is only used for compiling the source in `test`. If your main code actually had a dependency on JUnit, then you would also specify `implementation` under `dependencies`.\r\n\r\nI had to specify the `repositories` section to get this to work, I doubt that is the best/only way.","title":"How do I add a new sourceset to Gradle?","body":"<p>I'm new to Gradle, using Gradle 6.0.1 JUnit 4.12. Here's what I came up with to solve this problem.</p>\n\n<pre><code>apply plugin: 'java'\nrepositories { jcenter() }\n\ndependencies {\n    testImplementation 'junit:junit:4.12'\n}\n\nsourceSets {\n  main {\n    java {\n       srcDirs = ['src']\n    }\n  }\n  test {\n    java {\n      srcDirs = ['tests']\n    }\n  }\n}\n</code></pre>\n\n<p>Notice that the main source and test source is referenced separately, one under <code>main</code> and one under <code>test</code>.</p>\n\n<p>The <code>testImplementation</code> item under <code>dependencies</code> is only used for compiling the source in <code>test</code>. If your main code actually had a dependency on JUnit, then you would also specify <code>implementation</code> under <code>dependencies</code>.</p>\n\n<p>I had to specify the <code>repositories</code> section to get this to work, I doubt that is the best/only way.</p>\n"},{"tags":[],"owner":{"account_id":44158,"reputation":1152,"user_id":129437,"accept_rate":57,"display_name":"Gus"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609154371,"creation_date":1609154371,"answer_id":65476796,"question_id":11581419,"body_markdown":"I gather the documentation wasn&#39;t great back in 2012 when this question was asked, but for anyone reading this in 2020+: There&#39;s now a whole section in the docs about [how to add a source set for integration tests][1]. You really should read it instead of copy/pasting code snippets here and banging your head against the wall trying to figure out why an answer from 2012-2016 doesn&#39;t quite work.\r\n\r\nThe answer is most likely simple but more nuanced than you may think, and the exact code you&#39;ll need is likely to be different from the code I&#39;ll need. For example, do you want your integration tests to use the same dependencies as your unit tests?\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests","title":"How do I add a new sourceset to Gradle?","body":"<p>I gather the documentation wasn't great back in 2012 when this question was asked, but for anyone reading this in 2020+: There's now a whole section in the docs about <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"nofollow noreferrer\">how to add a source set for integration tests</a>. You really should read it instead of copy/pasting code snippets here and banging your head against the wall trying to figure out why an answer from 2012-2016 doesn't quite work.</p>\n<p>The answer is most likely simple but more nuanced than you may think, and the exact code you'll need is likely to be different from the code I'll need. For example, do you want your integration tests to use the same dependencies as your unit tests?</p>\n"},{"tags":[],"owner":{"account_id":1118781,"reputation":1756,"user_id":1107537,"accept_rate":56,"display_name":"mdarwin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670519334,"creation_date":1670519334,"answer_id":74733908,"question_id":11581419,"body_markdown":"You might also want to configure your tests to run with jUnit:\r\n\r\n    task integrationTest(type: Test) {\r\n       ...\r\n       useJunitPlatform()\r\n    }","title":"How do I add a new sourceset to Gradle?","body":"<p>You might also want to configure your tests to run with jUnit:</p>\n<pre><code>task integrationTest(type: Test) {\n   ...\n   useJunitPlatform()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694526080,"creation_date":1694526080,"answer_id":77089693,"question_id":11581419,"body_markdown":"Here is the solution for Kotlin (build.gradle.**kts**):\r\n\r\n```kotlin\r\nsourceSets {\r\n    create(&quot;uiTest&quot;) {\r\n        // Adds files from the main source set to the compilation and runtime classpaths of this new source set\r\n        // sourceSets.main.output is a collection of all the directories containing compiled main classes and resources\r\n        compileClasspath += sourceSets.main.get().output\r\n        runtimeClasspath += sourceSets.main.get().output\r\n    }\r\n}\r\n\r\n// Makes the uiTestImplementation configuration extend from testImplementaion,\r\n// which means that all the declared dependencies of the test code (and transitively the main as well)\r\n// also become dependencies of this new source set\r\nval uiTestImplementation by configurations.getting {\r\n    extendsFrom(configurations.testImplementation.get())\r\n}\r\nval uiTestRuntimeOnly by configurations.getting {\r\n    extendsFrom(configurations.testRuntimeOnly.get())\r\n}\r\n\r\n```\r\n\r\nBonus:\r\n```kotlin\r\nval uiTest = task&lt;Test&gt;(&quot;uiTest&quot;) {\r\n    description = &quot;Runs UI tests.&quot;\r\n    group = &quot;verification&quot;\r\n\r\n    testClassesDirs = sourceSets[&quot;uiTest&quot;].output.classesDirs\r\n    classpath = sourceSets[&quot;uiTest&quot;].runtimeClasspath\r\n\r\n    testLogging {\r\n        events(TestLogEvent.PASSED)\r\n    }\r\n}\r\n\r\ntasks.check { dependsOn(uiTest) }\r\n```","title":"How do I add a new sourceset to Gradle?","body":"<p>Here is the solution for Kotlin (build.gradle.<strong>kts</strong>):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>sourceSets {\n    create(&quot;uiTest&quot;) {\n        // Adds files from the main source set to the compilation and runtime classpaths of this new source set\n        // sourceSets.main.output is a collection of all the directories containing compiled main classes and resources\n        compileClasspath += sourceSets.main.get().output\n        runtimeClasspath += sourceSets.main.get().output\n    }\n}\n\n// Makes the uiTestImplementation configuration extend from testImplementaion,\n// which means that all the declared dependencies of the test code (and transitively the main as well)\n// also become dependencies of this new source set\nval uiTestImplementation by configurations.getting {\n    extendsFrom(configurations.testImplementation.get())\n}\nval uiTestRuntimeOnly by configurations.getting {\n    extendsFrom(configurations.testRuntimeOnly.get())\n}\n\n</code></pre>\n<p>Bonus:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val uiTest = task&lt;Test&gt;(&quot;uiTest&quot;) {\n    description = &quot;Runs UI tests.&quot;\n    group = &quot;verification&quot;\n\n    testClassesDirs = sourceSets[&quot;uiTest&quot;].output.classesDirs\n    classpath = sourceSets[&quot;uiTest&quot;].runtimeClasspath\n\n    testLogging {\n        events(TestLogEvent.PASSED)\n    }\n}\n\ntasks.check { dependsOn(uiTest) }\n</code></pre>\n"}],"owner":{"account_id":56959,"reputation":9026,"user_id":170587,"accept_rate":79,"display_name":"Spina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144944,"favorite_count":0,"down_vote_count":0,"up_vote_count":120,"accepted_answer_id":11581420,"answer_count":10,"score":120,"last_activity_date":1694526080,"creation_date":1342794647,"question_id":11581419,"body_markdown":"I want to add integration tests to my Gradle build (Version 1.0). They should run separately from my normal tests because they require a webapp to be deployed to localhost (they test that webapp). The tests should be able to use classes defined in my main source set. How do I make this happen?","title":"How do I add a new sourceset to Gradle?","body":"<p>I want to add integration tests to my Gradle build (Version 1.0). They should run separately from my normal tests because they require a webapp to be deployed to localhost (they test that webapp). The tests should be able to use classes defined in my main source set. How do I make this happen?</p>\n"},{"tags":["java","spring-boot","couchbase","spring-boot-testcontainers"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694526644,"post_id":77089667,"comment_id":135900544,"body_markdown":"i think the relevant topic for the problem is here [multiple buckets in Couchbase initialization](https://github.com/testcontainers/testcontainers-java/issues/1022), can you have a look there and retry ?","body":"i think the relevant topic for the problem is here <a href=\"https://github.com/testcontainers/testcontainers-java/issues/1022\" rel=\"nofollow noreferrer\">multiple buckets in Couchbase initialization</a>, can you have a look there and retry ?"},{"owner":{"account_id":9021494,"reputation":361,"user_id":6722442,"accept_rate":78,"display_name":"Srikar"},"score":1,"creation_date":1694527287,"post_id":77089667,"comment_id":135900721,"body_markdown":"Thanks for sharing the relevant topic, I have created the couchbase container similar to what was mentioned in the topic, I have issues with executing the .n1ql files as we use them for creating the different collections we use, issue is with couchmove bean and I am not sure why its having issues there as the 2nd container is getting created properly.","body":"Thanks for sharing the relevant topic, I have created the couchbase container similar to what was mentioned in the topic, I have issues with executing the .n1ql files as we use them for creating the different collections we use, issue is with couchmove bean and I am not sure why its having issues there as the 2nd container is getting created properly."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694530398,"post_id":77089667,"comment_id":135901482,"body_markdown":"ok, if you will try to create it without `.n1ql` file, i mean just create the container without anythink.  it is going to work ?","body":"ok, if you will try to create it without <code>.n1ql</code> file, i mean just create the container without anythink.  it is going to work ?"},{"owner":{"account_id":9021494,"reputation":361,"user_id":6722442,"accept_rate":78,"display_name":"Srikar"},"score":1,"creation_date":1694537462,"post_id":77089667,"comment_id":135903078,"body_markdown":"Yes, it works. I could see 2 buckets getting created in the test container. Just that my issue is related to it running .n1ql files as well with the 2 buckets","body":"Yes, it works. I could see 2 buckets getting created in the test container. Just that my issue is related to it running .n1ql files as well with the 2 buckets"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694545062,"post_id":77089667,"comment_id":135904470,"body_markdown":"Ok, I am sure if you will have just one bucket all will be executed as expected, just confirm it please with the same ‘.n1ql’ file","body":"Ok, I am sure if you will have just one bucket all will be executed as expected, just confirm it please with the same ‘.n1ql’ file"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694545884,"post_id":77089667,"comment_id":135904589,"body_markdown":"Because i think it is a bug at `Couchmove` if it work for one bucket of course if it is so  you should open a ticket on there GitHub repo.","body":"Because i think it is a bug at <code>Couchmove</code> if it work for one bucket of course if it is so  you should open a ticket on there GitHub repo."},{"owner":{"account_id":9021494,"reputation":361,"user_id":6722442,"accept_rate":78,"display_name":"Srikar"},"score":1,"creation_date":1694582749,"post_id":77089667,"comment_id":135908434,"body_markdown":"Yes, for 1 bucket everything is working as expected, when I tried to add new bucket then I&#39;m getting the errors, there must be a way to do it but I couldn&#39;t find it yet. Will try few things today and If I couldn&#39;t figure it out then will raise a ticket. Thank you","body":"Yes, for 1 bucket everything is working as expected, when I tried to add new bucket then I&#39;m getting the errors, there must be a way to do it but I couldn&#39;t find it yet. Will try few things today and If I couldn&#39;t figure it out then will raise a ticket. Thank you"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1694582997,"post_id":77089667,"comment_id":135908469,"body_markdown":"You are welcome, i also didn&#39;t know  about this case, maybe the guys who work on it can help you, just open a ticket and that is all","body":"You are welcome, i also didn&#39;t know  about this case, maybe the guys who work on it can help you, just open a ticket and that is all"}],"owner":{"account_id":9021494,"reputation":361,"user_id":6722442,"accept_rate":78,"display_name":"Srikar"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694525933,"creation_date":1694525933,"question_id":77089667,"body_markdown":"We are trying to write integration tests for our usecase where we have 2 buckets in couchbase database and I am trying to create test container with those 2 buckets. I have something like \r\n\r\n```\r\nnew CouchbaseContainer(dockerImage)\r\n                    .withBucket(new BucketDefinition(getBucketName()))\r\n                    .withBucket(new BucketDefinition(getNewBucketName()))\r\n                    .withCredentials(&quot;admin&quot;, &quot;password123&quot;)\r\n                    .withServiceQuota(CouchbaseService.SEARCH, 1024)\r\n                    .withStartupTimeout(Duration.ofMinutes(15));\r\n            \r\n```\r\n\r\nHere I am using .**withBucket()** to create buckets, for single bucket it is working but when I try to create a new bucket it is throwing errors when executing .n1ql files which we are using for creating the base configuration to the first bucket.\r\n\r\nIt is throwing errors like\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;couchmove&#39; defined in class path resource [DatabaseConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.github.couchmove.Couchmove]: Factory method &#39;couchmove&#39; threw exception; nested exception is com.github.couchmove.exception.CouchmoveException: Unable to migrate\r\n\r\nIs using .**withBucket()** the right way to create 2nd bucket?\r\n","title":"Using 2 buckets inside test container for couchbase in spring boot application","body":"<p>We are trying to write integration tests for our usecase where we have 2 buckets in couchbase database and I am trying to create test container with those 2 buckets. I have something like</p>\n<pre><code>new CouchbaseContainer(dockerImage)\n                    .withBucket(new BucketDefinition(getBucketName()))\n                    .withBucket(new BucketDefinition(getNewBucketName()))\n                    .withCredentials(&quot;admin&quot;, &quot;password123&quot;)\n                    .withServiceQuota(CouchbaseService.SEARCH, 1024)\n                    .withStartupTimeout(Duration.ofMinutes(15));\n            \n</code></pre>\n<p>Here I am using .<strong>withBucket()</strong> to create buckets, for single bucket it is working but when I try to create a new bucket it is throwing errors when executing .n1ql files which we are using for creating the base configuration to the first bucket.</p>\n<p>It is throwing errors like</p>\n<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'couchmove' defined in class path resource [DatabaseConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.github.couchmove.Couchmove]: Factory method 'couchmove' threw exception; nested exception is com.github.couchmove.exception.CouchmoveException: Unable to migrate</p>\n<p>Is using .<strong>withBucket()</strong> the right way to create 2nd bucket?</p>\n"},{"tags":["java","image","frame","bufferedimage","javacv"],"comments":[{"owner":{"account_id":248409,"reputation":4974,"user_id":523744,"display_name":"Samuel Audet"},"score":0,"creation_date":1694823340,"post_id":77089565,"comment_id":135946402,"body_markdown":"That just means you don&#39;t have an image in that frame. Try with the next frame.","body":"That just means you don&#39;t have an image in that frame. Try with the next frame."}],"owner":{"account_id":29423108,"reputation":1,"user_id":22544440,"display_name":"user22544440"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694525121,"creation_date":1694525121,"question_id":77089565,"body_markdown":"so I have a Frame from a video:\r\n```\r\nFFmpegFrameGrabber grabber = new FFmpegFrameGrabber(videoFilePath);\r\ngrabber.start();\r\n\r\ngrabber.setFrameNumber(frameNumber);\r\nFrame frame = grabber.grab();\r\n```\r\n\r\nand I want to convert it to a BufferedImage so currently I am using this:\r\n\r\n```\r\nJava2DFrameConverter c = new Java2DFrameConverter();\r\nBufferedImage image = c.convert(frame);\r\n```\r\n\r\nBut when I am trying to save the .png file like that\r\n\r\n```\r\nImageIO.write(image, &quot;png&quot;, outputFrameFile);\r\n```\r\n\r\nBut I am getting the error &quot;image == null&quot; idk why\r\n\r\n\r\n\r\nI tried to look for answers but nothing helped.","title":"Convert Frame to BufferedImage using JavaCV","body":"<p>so I have a Frame from a video:</p>\n<pre><code>FFmpegFrameGrabber grabber = new FFmpegFrameGrabber(videoFilePath);\ngrabber.start();\n\ngrabber.setFrameNumber(frameNumber);\nFrame frame = grabber.grab();\n</code></pre>\n<p>and I want to convert it to a BufferedImage so currently I am using this:</p>\n<pre><code>Java2DFrameConverter c = new Java2DFrameConverter();\nBufferedImage image = c.convert(frame);\n</code></pre>\n<p>But when I am trying to save the .png file like that</p>\n<pre><code>ImageIO.write(image, &quot;png&quot;, outputFrameFile);\n</code></pre>\n<p>But I am getting the error &quot;image == null&quot; idk why</p>\n<p>I tried to look for answers but nothing helped.</p>\n"},{"tags":["java","android","debugging"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694584870,"post_id":77089540,"comment_id":135908714,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":26189898,"reputation":3,"user_id":19871906,"display_name":"Yyyyyyyyyy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694524971,"creation_date":1694524971,"question_id":77089540,"body_markdown":"I downloaded the latest version of Android Studio Giraffe and used the debugger when debugging the application, but it does not show what the problem is, as it did before. \r\nNow I only receive this message:\r\n(Connected to the target VM, address: &#39;localhost:56713&#39;, transport: &#39;socket&#39;\r\nDisconnected from the target VM, address: &#39;localhost:56713&#39;, transport: &#39;socket&#39;)\r\n[enter image description here](https://i.stack.imgur.com/Tmg8a.png)\r\n\r\n\r\nalthough before, for example, he described the error more precisely:\r\n[enter image description here](https://i.stack.imgur.com/61a5M.png)\r\nI&#39;m not very well versed in Android Studio and could have made a mistake myself somewhere.","title":"Debugger does not show an error when running the application","body":"<p>I downloaded the latest version of Android Studio Giraffe and used the debugger when debugging the application, but it does not show what the problem is, as it did before.\nNow I only receive this message:\n(Connected to the target VM, address: 'localhost:56713', transport: 'socket'\nDisconnected from the target VM, address: 'localhost:56713', transport: 'socket')\n<a href=\"https://i.stack.imgur.com/Tmg8a.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>although before, for example, he described the error more precisely:\n<a href=\"https://i.stack.imgur.com/61a5M.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nI'm not very well versed in Android Studio and could have made a mistake myself somewhere.</p>\n"},{"tags":["java","jackson","pom.xml","java-17","jackson-modules"],"answers":[{"tags":[],"owner":{"account_id":25536085,"reputation":11,"user_id":19323132,"display_name":"Ruslan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694524945,"creation_date":1694524945,"answer_id":77089537,"question_id":76592226,"body_markdown":"I had a problem like this. You could try Jackson version 2.13.5. In my case it works well.","title":"java.lang.NoClassDefFoundError: com/fasterxml/jackson/module/blackbird/ser/ToBooleanFunction","body":"<p>I had a problem like this. You could try Jackson version 2.13.5. In my case it works well.</p>\n"}],"owner":{"account_id":7785038,"reputation":205,"user_id":5890223,"display_name":"Bee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694524945,"creation_date":1688159384,"question_id":76592226,"body_markdown":"I am getting this error trying to upgrade from Java 11 to 17.\r\n\r\nI confirmed that the ToBooleanFunction exists in the 2.15.2 version, as well as some other versions I&#39;ve tried. I also confirmed that the library is in the class path. \r\n\r\nHere are the relevant parts of my pom file. Appreciate any input.\r\n\r\n\r\n```\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-module-parameter-names&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-module-blackbird&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-datatype-guava&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-datatype-joda&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-module-jaxb-annotations&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-jaxrs-base&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\r\n               &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\r\n               &lt;version&gt;2.15.2&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n```","title":"java.lang.NoClassDefFoundError: com/fasterxml/jackson/module/blackbird/ser/ToBooleanFunction","body":"<p>I am getting this error trying to upgrade from Java 11 to 17.</p>\n<p>I confirmed that the ToBooleanFunction exists in the 2.15.2 version, as well as some other versions I've tried. I also confirmed that the library is in the class path.</p>\n<p>Here are the relevant parts of my pom file. Appreciate any input.</p>\n<pre><code>           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-module-parameter-names&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-module-blackbird&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-datatype-guava&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-datatype-joda&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-module-jaxb-annotations&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-jaxrs-base&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n               &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\n               &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\n               &lt;version&gt;2.15.2&lt;/version&gt;\n           &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","spring-data","spring-data-mongodb"],"answers":[{"tags":[],"owner":{"account_id":17092302,"reputation":9084,"user_id":12368154,"display_name":"Charchit Kapoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694524676,"creation_date":1694524183,"answer_id":77089429,"question_id":77050125,"body_markdown":"Your query seems fine. Try this as well:\r\n\r\n    MatchOperation matchOperation = Aggregation.match(\r\n              new Criteria(&quot;zip&quot;).is(zipCode).and(&quot;city&quot;).is(cityName));\r\n    GroupOperation groupOperation = Aggregation.group(&quot;userId&quot;, &quot;user&quot;);\r\n    ProjectionOperation projectionOperation = Aggregation.project().andExpression(&quot;_id.userId&quot;).as(&quot;userId&quot;).andExpression(&quot;_id.user&quot;).as(&quot;user&quot;);\r\n    Aggregation  aggregation = Aggregation.newAggregation(matchOperation, groupOperation, projectionOperation);\r\n    AggregationResults&lt;UserDTO&gt; result = mongoTemplate.aggregate(aggregation, UserDetails.class, UserDTO.class);\r\n\r\nAlso check, what is the value of `result.getUniqueMappedResult()` or `result.getMappedResults()`.","title":"Distinct on multiple columns in MongoDb using Spring data Mongo aggregation API","body":"<p>Your query seems fine. Try this as well:</p>\n<pre><code>MatchOperation matchOperation = Aggregation.match(\n          new Criteria(&quot;zip&quot;).is(zipCode).and(&quot;city&quot;).is(cityName));\nGroupOperation groupOperation = Aggregation.group(&quot;userId&quot;, &quot;user&quot;);\nProjectionOperation projectionOperation = Aggregation.project().andExpression(&quot;_id.userId&quot;).as(&quot;userId&quot;).andExpression(&quot;_id.user&quot;).as(&quot;user&quot;);\nAggregation  aggregation = Aggregation.newAggregation(matchOperation, groupOperation, projectionOperation);\nAggregationResults&lt;UserDTO&gt; result = mongoTemplate.aggregate(aggregation, UserDetails.class, UserDTO.class);\n</code></pre>\n<p>Also check, what is the value of <code>result.getUniqueMappedResult()</code> or <code>result.getMappedResults()</code>.</p>\n"}],"owner":{"account_id":2361709,"reputation":373,"user_id":2068260,"accept_rate":14,"display_name":"user2068260"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694524676,"creation_date":1693988066,"question_id":77050125,"body_markdown":"I am new to Mongo db and aggregation query. I want to perform distinct on 2 fields i.e.  userId and user in mongo db collection with name &quot;userDetails&quot;. I am able to execute below query and get the distinct documents from Mongo db using Robo 3T. But, I am trying to execute the same query using spring data MongoTemplate but getting empty result object in java. Need help to translate the below query in Java using Mongo template.\r\n\r\n      db.userDetails.aggregate([\r\n        {&quot;$match&quot; : {zip:&quot;52034&quot;, city:&quot;Delhi&quot;}}, \r\n        // group by userId, userName to get distinct document\r\n        {&quot;$group&quot; : {_id : {userId:&quot;$userId&quot;, user:&quot;$user&quot;}}}, \r\n        // Clean up the output\r\n        {&quot;$project&quot; : {_id:0, userId:&quot;$_id.userId&quot;, user:&quot;$_id.user&quot;}}\r\n    ])\r\n    \r\n\r\nBelow is the java code for above query using Spring data MongoTemplate, but the result object is empty during execution. UserDetails model class represent the Mongo document and UserDTO is the final response that need to be returned.\r\n\r\n    \r\n\tMatchOperation matchOperation = Aggregation.match(\r\n              new Criteria(&quot;zip&quot;).is(zipCode).and(&quot;city&quot;).is(cityName));\r\n    GroupOperation groupOperation = new GroupOperation(Fields.fields(&quot;userId&quot;, &quot;user&quot;));\r\n    ProjectionOperation projectionOperation = Aggregation.project().andExclude(&quot;_id&quot;).and(&quot;userId&quot;).nested(\r\n\t\t\tFields.fields(&quot;_id.userId&quot;))\r\n\t\t    .and(&quot;user&quot;).nested(Fields.fields(&quot;_id.user&quot;));\r\n    Aggregation  aggregation = Aggregation.newAggregation(matchOperation, groupOperation, projectionOperation);\r\n    AggregationResults&lt;UserDTO&gt; result = mongoTemplate.aggregate(aggregation, UserDetails.class, UserDTO.class);\r\n\r\n\r\nSpring data mongodb - 3.0.7\r\nDriver  4.0.4\r\n\r\n","title":"Distinct on multiple columns in MongoDb using Spring data Mongo aggregation API","body":"<p>I am new to Mongo db and aggregation query. I want to perform distinct on 2 fields i.e.  userId and user in mongo db collection with name &quot;userDetails&quot;. I am able to execute below query and get the distinct documents from Mongo db using Robo 3T. But, I am trying to execute the same query using spring data MongoTemplate but getting empty result object in java. Need help to translate the below query in Java using Mongo template.</p>\n<pre><code>  db.userDetails.aggregate([\n    {&quot;$match&quot; : {zip:&quot;52034&quot;, city:&quot;Delhi&quot;}}, \n    // group by userId, userName to get distinct document\n    {&quot;$group&quot; : {_id : {userId:&quot;$userId&quot;, user:&quot;$user&quot;}}}, \n    // Clean up the output\n    {&quot;$project&quot; : {_id:0, userId:&quot;$_id.userId&quot;, user:&quot;$_id.user&quot;}}\n])\n</code></pre>\n<p>Below is the java code for above query using Spring data MongoTemplate, but the result object is empty during execution. UserDetails model class represent the Mongo document and UserDTO is the final response that need to be returned.</p>\n<pre><code>MatchOperation matchOperation = Aggregation.match(\n          new Criteria(&quot;zip&quot;).is(zipCode).and(&quot;city&quot;).is(cityName));\nGroupOperation groupOperation = new GroupOperation(Fields.fields(&quot;userId&quot;, &quot;user&quot;));\nProjectionOperation projectionOperation = Aggregation.project().andExclude(&quot;_id&quot;).and(&quot;userId&quot;).nested(\n        Fields.fields(&quot;_id.userId&quot;))\n        .and(&quot;user&quot;).nested(Fields.fields(&quot;_id.user&quot;));\nAggregation  aggregation = Aggregation.newAggregation(matchOperation, groupOperation, projectionOperation);\nAggregationResults&lt;UserDTO&gt; result = mongoTemplate.aggregate(aggregation, UserDetails.class, UserDTO.class);\n</code></pre>\n<p>Spring data mongodb - 3.0.7\nDriver  4.0.4</p>\n"},{"tags":["java","netbeans","build","ant"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1694432115,"post_id":77081251,"comment_id":135885739,"body_markdown":"There is no information in the build output that helps use understand what is going wrong, because there is no error or other diagnostic information. What I do find suspicious is the nesting of your directories (i.e. `NetBeansProjects` in `cmp_netbeens` in `NetBeansProjects`), but I&#39;m not sure how that would cause a problem (except maybe exceeding some path length limitation somewhere).","body":"There is no information in the build output that helps use understand what is going wrong, because there is no error or other diagnostic information. What I do find suspicious is the nesting of your directories (i.e. <code>NetBeansProjects</code> in <code>cmp_netbeens</code> in <code>NetBeansProjects</code>), but I&#39;m not sure how that would cause a problem (except maybe exceeding some path length limitation somewhere)."},{"owner":{"account_id":29152982,"reputation":1,"user_id":22333430,"display_name":"computer files"},"score":0,"creation_date":1694432229,"post_id":77081251,"comment_id":135885766,"body_markdown":"I am also worry about the same thing that nothing else is in output window .","body":"I am also worry about the same thing that nothing else is in output window ."},{"owner":{"account_id":4076597,"reputation":4537,"user_id":3348112,"accept_rate":75,"display_name":"CAustin"},"score":0,"creation_date":1694503228,"post_id":77081251,"comment_id":135895471,"body_markdown":"Usually when Ant fails it specifies the line in the script that caused the failure. Could you update your question to include this, along with the contents of your build script?","body":"Usually when Ant fails it specifies the line in the script that caused the failure. Could you update your question to include this, along with the contents of your build script?"}],"answers":[{"comments":[{"owner":{"account_id":29152982,"reputation":1,"user_id":22333430,"display_name":"computer files"},"score":0,"creation_date":1694432453,"post_id":77081274,"comment_id":135885808,"body_markdown":"oh yess its in google drive","body":"oh yess its in google drive"},{"owner":{"account_id":29152982,"reputation":1,"user_id":22333430,"display_name":"computer files"},"score":1,"creation_date":1694434866,"post_id":77081274,"comment_id":135886243,"body_markdown":"no this error is coming again even its in my local drive","body":"no this error is coming again even its in my local drive"}],"tags":[],"owner":{"account_id":26449096,"reputation":1,"user_id":20092545,"display_name":"andeteika"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694432136,"creation_date":1694432136,"answer_id":77081274,"question_id":77081251,"body_markdown":"I’m not positive this is the reason but try to create or move the project in a local directory. The current project is on One Drive, which might affect the building process.","title":"Why I am getting build fail in my NetBeans project when I tried to build my project?","body":"<p>I’m not positive this is the reason but try to create or move the project in a local directory. The current project is on One Drive, which might affect the building process.</p>\n"},{"comments":[{"owner":{"account_id":29152982,"reputation":1,"user_id":22333430,"display_name":"computer files"},"score":0,"creation_date":1694452368,"post_id":77082251,"comment_id":135889891,"body_markdown":"No sorry, I can&#39;t find any thing like verbosity any where in IDE. Good news is that I had found a small hint about the problem that when ever I tried to go to the main class and tried to compile it, same output is given, and when I uncheck compile on save and then just save and run the program it gives same Build Failed output but when again checked the box of compile on save and then save and run the program it runs smoothly with output of Build Successfully. I think that if IDE automatically compile it compiles, but when we try to compile manually it makes disturbance. If this is the problem","body":"No sorry, I can&#39;t find any thing like verbosity any where in IDE. Good news is that I had found a small hint about the problem that when ever I tried to go to the main class and tried to compile it, same output is given, and when I uncheck compile on save and then just save and run the program it gives same Build Failed output but when again checked the box of compile on save and then save and run the program it runs smoothly with output of Build Successfully. I think that if IDE automatically compile it compiles, but when we try to compile manually it makes disturbance. If this is the problem"}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694524662,"creation_date":1694440476,"answer_id":77082251,"question_id":77081251,"body_markdown":"You do not know what is going on, and noone else can help you just because there is not enough information emitted from the build tool. Try to fix that first.\r\n\r\nFrom the menu choose Tools/Options, choose the Java tab. On the subtab Ant you can see a combo box labelled Verbosity Level. Set it to verbose, or even debug and rerun your build.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2HCUL.png","title":"Why I am getting build fail in my NetBeans project when I tried to build my project?","body":"<p>You do not know what is going on, and noone else can help you just because there is not enough information emitted from the build tool. Try to fix that first.</p>\n<p>From the menu choose Tools/Options, choose the Java tab. On the subtab Ant you can see a combo box labelled Verbosity Level. Set it to verbose, or even debug and rerun your build.</p>\n<p><a href=\"https://i.stack.imgur.com/2HCUL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2HCUL.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29152982,"reputation":1,"user_id":22333430,"display_name":"computer files"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694524662,"creation_date":1694431894,"question_id":77081251,"body_markdown":"I started clean and build my NetBeans project, but it gives me this output that it can&#39;t build. My library JAR files are OK and I have checked all my connections.\r\n\r\n\r\nHere is the output window text\r\n```none\r\nant -f &quot;G:\\\\My Drive\\\\newwwwwwww\\\\NetBeansProjects\\\\cmp_netbeens\\\\NetBeansProjects\\\\flatlaf-dashboard-main&quot; -Dnb.internal.action.name=rebuild clean jar\r\ninit:\r\ndeps-clean:\r\nUpdating property file: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\built-clean.properties\r\nDeleting directory G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\r\nclean:\r\ninit:\r\ndeps-jar:\r\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\r\nUpdating property file: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\built-jar.properties\r\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\classes\r\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\empty\r\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\generated-sources\\ap-source-output\r\nBUILD FAILED (total time: 2 seconds)\r\n```\r\n\r\nWhy does this fail?","title":"Why I am getting build fail in my NetBeans project when I tried to build my project?","body":"<p>I started clean and build my NetBeans project, but it gives me this output that it can't build. My library JAR files are OK and I have checked all my connections.</p>\n<p>Here is the output window text</p>\n<pre class=\"lang-none prettyprint-override\"><code>ant -f &quot;G:\\\\My Drive\\\\newwwwwwww\\\\NetBeansProjects\\\\cmp_netbeens\\\\NetBeansProjects\\\\flatlaf-dashboard-main&quot; -Dnb.internal.action.name=rebuild clean jar\ninit:\ndeps-clean:\nUpdating property file: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\built-clean.properties\nDeleting directory G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\nclean:\ninit:\ndeps-jar:\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\nUpdating property file: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\built-jar.properties\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\classes\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\empty\nCreated dir: G:\\My Drive\\newwwwwwww\\NetBeansProjects\\cmp_netbeens\\NetBeansProjects\\flatlaf-dashboard-main\\build\\generated-sources\\ap-source-output\nBUILD FAILED (total time: 2 seconds)\n</code></pre>\n<p>Why does this fail?</p>\n"},{"tags":["java","spring-boot","mockito","junit5"],"comments":[{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1694455271,"post_id":77083808,"comment_id":135890413,"body_markdown":"Are you trying to verify that your method throws an exception? Perhaps you&#39;re looking for something like `assertThatThrownBy`?","body":"Are you trying to verify that your method throws an exception? Perhaps you&#39;re looking for something like <code>assertThatThrownBy</code>?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1694499341,"post_id":77083808,"comment_id":135894860,"body_markdown":"Why are all your test fields called `*Mock`? If you only have mocks, you are not testing anything. Hint: `@InjectMocks` does not create a mock, but a real instance; with other mocks injected as needed. Since `syndromeTypeServiceMock` is not a mock (but a real instance), you cannot stub its methods with `given().thenReturn()`. `SyndromeType synTypeMock` ← not a mock either","body":"Why are all your test fields called <code>*Mock</code>? If you only have mocks, you are not testing anything. Hint: <code>@InjectMocks</code> does not create a mock, but a real instance; with other mocks injected as needed. Since <code>syndromeTypeServiceMock</code> is not a mock (but a real instance), you cannot stub its methods with <code>given().thenReturn()</code>. <code>SyndromeType synTypeMock</code> ← not a mock either"},{"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"score":0,"creation_date":1694505002,"post_id":77083808,"comment_id":135895789,"body_markdown":"@voidvoid checking the exception would be another test. What I&#39;m trying to test is to return the registry to be modified","body":"@voidvoid checking the exception would be another test. What I&#39;m trying to test is to return the registry to be modified"},{"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"score":0,"creation_date":1694505233,"post_id":77083808,"comment_id":135895850,"body_markdown":"@knittl It may be the confusion of so many tutorials that I have seen on how to validate the service layer and I have mixed some concepts. --&gt;","body":"@knittl It may be the confusion of so many tutorials that I have seen on how to validate the service layer and I have mixed some concepts. --&gt;"},{"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"score":0,"creation_date":1694505344,"post_id":77083808,"comment_id":135895871,"body_markdown":"I understand that @InjectMocks injects the real instance, SyndromeType objects synTypeMock understood that they are Mock since they are not real in the DB because of the Mock suffix","body":"I understand that @InjectMocks injects the real instance, SyndromeType objects synTypeMock understood that they are Mock since they are not real in the DB because of the Mock suffix"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694514889,"post_id":77083808,"comment_id":135897772,"body_markdown":"Your service isn&#39;t a mock but you are registering behavior on it, this will not work nor is the way to do it. You should register behavior on the mocks.","body":"Your service isn&#39;t a mock but you are registering behavior on it, this will not work nor is the way to do it. You should register behavior on the mocks."}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694514739,"creation_date":1694514739,"answer_id":77088301,"question_id":77083808,"body_markdown":"Mockito mock ojects (created with `Mockito.mock` or `@Mock`) by default always return `null` or empty collections. If you require them to return a different value, you have to stub the methods.\r\n\r\n`@InjectMocks` on the other hand creates a _real_ instance of your interface/class and injects the mock objects as dependencies. A real instance&#39;s methods cannot be stubbed – and it wouldn&#39;t make sense really, because this is the class that you usually want to exercise in your test.\r\n\r\nThis means that if you want to test your service, you need to make sure that you are calling the real service and that any methods it calls return a useful value.\r\n\r\nThe following block calls `findById` on the _repository_ (not the service), for which you have created a mock object, but never stubbed any methods.\r\n\r\n```\r\nif(null != synType.getSynTypeTransId()) {\r\n   synTypeEtt = syndromeTypeTransRepository.findById(synType.getSynTypeTransId()); \r\n}\r\n```\r\n\r\nThe repository&#39;s method can be stubbed as follows in your test:\r\n\r\n```\r\nwhen(syndromeTypeTransRepository.findById(10)) // the id passed to the service\r\n    .thenReturn(Optional.of(...)); // a value that makes sense for your test\r\n```\r\n\r\nThe second call to the repository must be stubbed as well:\r\n\r\n```\r\nsynTypeTrans = syndromeTypeTransRepository.save(synTypeTrans);\r\n```\r\n\r\nA sufficient stub implementation is probably to simply return the argument itself:\r\n\r\n```\r\nwhen(syndromeTypeTransRepository.save(any()))\r\n    .thenReturn(AdditionalAnswers.returnsFirstArg());\r\n```\r\n\r\nAfter you have set up the stubbed calls in your test method, you must then call the _real_ method of your class (if you are not calling the real method, then what are you testing!?)\r\n\r\n```\r\nfinal SyndromeType actualType = syndromeTypeServiceMock.modifySyndromeType(synType);\r\n```\r\n\r\nAnd then assert the correct value being returned:\r\n\r\n```\r\nassertEquals(expectedType, actualType); // if SynType implement equals()\r\n```\r\n\r\nor\r\n\r\n```\r\n// without equals() properties need to be compared manually\r\nassertEquals(10, actualType.getSynTypeTransId());\r\nassertEquals(10, actualType.getSynTypeId());\r\nassertEquals(&quot;Musculoesquel&#233;tico.&quot;, actualType.getSynTypeName());\r\n```\r\n","title":"How to test update method with junit 5 and mockito with exception handling in the service layer","body":"<p>Mockito mock ojects (created with <code>Mockito.mock</code> or <code>@Mock</code>) by default always return <code>null</code> or empty collections. If you require them to return a different value, you have to stub the methods.</p>\n<p><code>@InjectMocks</code> on the other hand creates a <em>real</em> instance of your interface/class and injects the mock objects as dependencies. A real instance's methods cannot be stubbed – and it wouldn't make sense really, because this is the class that you usually want to exercise in your test.</p>\n<p>This means that if you want to test your service, you need to make sure that you are calling the real service and that any methods it calls return a useful value.</p>\n<p>The following block calls <code>findById</code> on the <em>repository</em> (not the service), for which you have created a mock object, but never stubbed any methods.</p>\n<pre><code>if(null != synType.getSynTypeTransId()) {\n   synTypeEtt = syndromeTypeTransRepository.findById(synType.getSynTypeTransId()); \n}\n</code></pre>\n<p>The repository's method can be stubbed as follows in your test:</p>\n<pre><code>when(syndromeTypeTransRepository.findById(10)) // the id passed to the service\n    .thenReturn(Optional.of(...)); // a value that makes sense for your test\n</code></pre>\n<p>The second call to the repository must be stubbed as well:</p>\n<pre><code>synTypeTrans = syndromeTypeTransRepository.save(synTypeTrans);\n</code></pre>\n<p>A sufficient stub implementation is probably to simply return the argument itself:</p>\n<pre><code>when(syndromeTypeTransRepository.save(any()))\n    .thenReturn(AdditionalAnswers.returnsFirstArg());\n</code></pre>\n<p>After you have set up the stubbed calls in your test method, you must then call the <em>real</em> method of your class (if you are not calling the real method, then what are you testing!?)</p>\n<pre><code>final SyndromeType actualType = syndromeTypeServiceMock.modifySyndromeType(synType);\n</code></pre>\n<p>And then assert the correct value being returned:</p>\n<pre><code>assertEquals(expectedType, actualType); // if SynType implement equals()\n</code></pre>\n<p>or</p>\n<pre><code>// without equals() properties need to be compared manually\nassertEquals(10, actualType.getSynTypeTransId());\nassertEquals(10, actualType.getSynTypeId());\nassertEquals(&quot;Musculoesquelético.&quot;, actualType.getSynTypeName());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694524161,"creation_date":1694524161,"answer_id":77089427,"question_id":77083808,"body_markdown":"Thanks to @knittle, he has been able to correct the test and the most important thing is that for each action in the method to be tested, a mock must be performed. This is the modification of the test.\r\n\r\n    @Test\r\n    public void test_modify_SyndromeType_when_synTransId_exist() throws PersistenceException {\r\n    \tLOGGER.info(&quot;test_modify_SyndromeType_when_synTransId_exist &gt;&gt;&quot;);\r\n    \t\r\n    \tSyndromeTypeTransEntity synTypeTrans = SyndromeTypeTransEntity.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.synTypeTransId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.synTypeName(&quot;Musculoesquel&#233;tico.&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.lanCodeEtt(LanguageEntity.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .lanCode(&quot;es&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .lanName(&quot;Espa&#241;ol&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .build())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.synTypeEtt(SyndromeTypeEntity.builder().synTypeId(10).build())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n    \t\r\n    \t\r\n    \twhen(syndromeTypeTransRepository.findById(10)) // the id passed to the service\r\n    \t\t\t\t\t\t\t\t\t.thenReturn(Optional.of(synTypeTrans)); // a value that makes sense for your test\r\n    \t\r\n    \twhen(syndromeTypeTransRepository.save(any())) \r\n    \t\t\t\t\t\t\t\t\t.thenReturn(synTypeTrans); \r\n    \r\n    \tSyndromeType synType = SyndromeType.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t.synTypeId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t.synTypeName(&quot;Musculoesquel&#233;tico.&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t.lanCode(&quot;es&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t.synTypeTransId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t.build();\r\n    \r\n    \tfinal SyndromeType actualSynType = syndromeTypeService.modifySyndromeType(synType);\r\n    \r\n    \tassertEquals(10, actualSynType.getSynTypeTransId());\r\n    \tassertEquals(10, actualSynType.getSynTypeId());\r\n    \tassertEquals(&quot;Musculoesquel&#233;tico.&quot;, actualSynType.getSynTypeName());\r\n    \r\n    \tLOGGER.info(&quot;&lt;&lt; test_modify_SyndromeType_when_synTransId_exist&quot;);\r\n    \t\r\n    }\r\n\r\n","title":"How to test update method with junit 5 and mockito with exception handling in the service layer","body":"<p>Thanks to @knittle, he has been able to correct the test and the most important thing is that for each action in the method to be tested, a mock must be performed. This is the modification of the test.</p>\n<pre><code>@Test\npublic void test_modify_SyndromeType_when_synTransId_exist() throws PersistenceException {\n    LOGGER.info(&quot;test_modify_SyndromeType_when_synTransId_exist &gt;&gt;&quot;);\n    \n    SyndromeTypeTransEntity synTypeTrans = SyndromeTypeTransEntity.builder()\n                                                        .synTypeTransId(10)\n                                                        .synTypeName(&quot;Musculoesquelético.&quot;)\n                                                        .lanCodeEtt(LanguageEntity.builder()\n                                                                         .lanCode(&quot;es&quot;)\n                                                                         .lanName(&quot;Español&quot;)\n                                                                         .build())\n                                                        .synTypeEtt(SyndromeTypeEntity.builder().synTypeId(10).build())\n                                                        .build();\n    \n    \n    when(syndromeTypeTransRepository.findById(10)) // the id passed to the service\n                                    .thenReturn(Optional.of(synTypeTrans)); // a value that makes sense for your test\n    \n    when(syndromeTypeTransRepository.save(any())) \n                                    .thenReturn(synTypeTrans); \n\n    SyndromeType synType = SyndromeType.builder()\n                                            .synTypeId(10)\n                                            .synTypeName(&quot;Musculoesquelético.&quot;)\n                                            .lanCode(&quot;es&quot;)\n                                            .synTypeTransId(10)\n                                            .build();\n\n    final SyndromeType actualSynType = syndromeTypeService.modifySyndromeType(synType);\n\n    assertEquals(10, actualSynType.getSynTypeTransId());\n    assertEquals(10, actualSynType.getSynTypeId());\n    assertEquals(&quot;Musculoesquelético.&quot;, actualSynType.getSynTypeName());\n\n    LOGGER.info(&quot;&lt;&lt; test_modify_SyndromeType_when_synTransId_exist&quot;);\n    \n}\n</code></pre>\n"}],"owner":{"account_id":5219847,"reputation":103,"user_id":4173645,"accept_rate":0,"display_name":"Marco Osorio"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77088301,"answer_count":2,"score":0,"last_activity_date":1694524161,"creation_date":1694454484,"question_id":77083808,"body_markdown":"I am starting with Mockito to do unit tests.\r\nI have seen several examples of how a unit test can be carried out but it does not work for me since when I pass the object to search to check if it exists and modify it, the exception is thrown and the test is interrupted.\r\n\r\nWhen this line is executed:\r\n**BDDMockito.given(syndromeTypeServiceMock.modifySyndromeType(synTypeMock)).willReturn(synTypeMockEspect)**;\r\nIt enters the method in the Service and when validating with the mock, by not going to the database to look for the record, it returns null or empty and the following validation raises the exception.\r\nHow can I validate this exception with Mockito so that it passes the test?\r\n\r\nThansk in advance!\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class SyndromeTypeServiceTest {\r\n    \r\n    \tLogger LOGGER = LoggerFactory.getLogger(getClass());\r\n    \t\r\n    \t@Mock\r\n    \tSyndromeTypeRepository syndromeTypeRepository;\r\n    \t@Mock\r\n    \tSyndromeTypeTransRepository syndromeTypeTransRepository;\r\n    \t@InjectMocks\r\n    \tSyndromeTypeServiceImpl\tsyndromeTypeServiceMock;\r\n    \t\r\n        @Test\r\n        public void test_modify_SyndromeType_when_synTransId_exist() throws PersistenceException {\r\n        \tLOGGER.info(&quot;test_modify_SyndromeType_when_synTransId_exist &gt;&gt;&quot;);\r\n        \t\r\n    \r\n        \tSyndromeType synTypeMock = SyndromeType.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeName(&quot;Musculoesquel&#233;tico.&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.lanCode(&quot;es&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeTransId(10)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n        \t\r\n        \tSyndromeType synTypeMockEspect = SyndromeType.builder()\r\n    \t\t\t\t\t\t\t\t    \t\t\t.synTypeId(10)\r\n    \t\t\t\t\t\t\t\t    \t\t\t.synTypeName(&quot;Musculoesquel&#233;tico.&quot;)\r\n    \t\t\t\t\t\t\t\t    \t\t\t.lanCode(&quot;es&quot;)\r\n    \t\t\t\t\t\t\t\t    \t\t\t.synTypeTransId(10)\r\n    \t\t\t\t\t\t\t\t    \t\t\t.build();\r\n    \r\n        \tBDDMockito.given(syndromeTypeServiceMock.modifySyndromeType(synTypeMock)).willReturn(synTypeMockEspect);\r\n    \r\n        \tassertEquals(synTypeMock.getSynTypeTransId(), synTypeMockEspect.getSynTypeTransId());\r\n        \tassertEquals(synTypeMock.getSynTypeId(), synTypeMockEspect.getSynTypeId());\r\n        \tassertEquals(synTypeMock.getSynTypeName(), synTypeMockEspect.getSynTypeName());\r\n    \r\n        \tLOGGER.info(&quot;&lt;&lt; test_modify_SyndromeType_when_synTransId_exist&quot;);\r\n        \t\r\n        }\r\n    \t\r\n    }\r\n\r\nService layer\r\n\r\n    @Service\r\n    @Transactional\r\n    public class SyndromeTypeServiceImpl implements SyndromeTypeService {\r\n    \r\n    \tLogger LOGGER = LoggerFactory.getLogger(getClass());\r\n    \t\r\n    \tfinal SyndromeTypeRepository syndromeTypeRepository;\r\n    \tfinal SyndromeTypeTransRepository syndromeTypeTransRepository;\r\n    \t\r\n    \tpublic SyndromeTypeServiceImpl(SyndromeTypeRepository syndromeTypeRepository,\r\n    \t\t\tSyndromeTypeTransRepository syndromeTypeTransRepository) {\r\n    \t\tthis.syndromeTypeRepository = syndromeTypeRepository;\r\n    \t\tthis.syndromeTypeTransRepository = syndromeTypeTransRepository;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic List&lt;SyndromeType&gt; renderSyndromeTypes(List&lt;SyndromeTypeTransEntity&gt; synTypesEtts){\r\n    \t\tLOGGER.info(&quot;Rendering SyndromeTypeEntity results&quot;);\r\n    \t\tList&lt;SyndromeType&gt; synTypes = new ArrayList&lt;SyndromeType&gt;(0);\r\n    \r\n    \t\tif(null != synTypesEtts) {\r\n    \t\t\tsynTypesEtts.stream()\r\n    \t\t\t\t.forEach(\r\n    \t\t\t\t\ts -&gt; {\r\n    \t\t\t\t\t\t\tsynTypes.add(\r\n    \t\t\t\t\t\t\t\t\tSyndromeType.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeId(s.getSynTypeEtt().getSynTypeId())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeName(s.getSynTypeName())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.lanCode(s.getLanCodeEtt().getLanCode())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.synTypeTransId(s.getSynTypeTransId())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.build()\r\n    \t\t\t\t\t\t\t\t\t);\r\n    \t\t\t\t});\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn synTypes;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic SyndromeType modifySyndromeType(SyndromeType synType) throws PersistenceException {\r\n    \t\tLOGGER.info(&quot;modifySyndromeType &gt;&gt;&quot;);\r\n    \t\t\r\n    \t\tOptional&lt;SyndromeTypeTransEntity&gt; synTypeEtt = java.util.Optional.empty();\r\n    \t\t\r\n    \t\tif(null != synType.getSynTypeTransId()) {\r\n    \t\t\tsynTypeEtt = syndromeTypeTransRepository.findById(synType.getSynTypeTransId()); \r\n    \t\t}\r\n    \r\n    \t\tif(!synTypeEtt.isPresent() || synTypeEtt.isEmpty()) {\r\n    \t\t\tthrow new PersistenceException(ErrorMessage.RECORD_NOT_EXIST.name());\r\n    \t\t}\r\n    \t\t\r\n    \t\tSyndromeTypeTransEntity synTypeTrans = SyndromeTypeTransEntity.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.lanCodeEtt(LanguageEntity.builder()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .lanCode(synType.getLanCode())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .build())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.synTypeName(synType.getSynTypeName())\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n    \t\t\r\n    \t\tsynTypeTrans = syndromeTypeTransRepository.save(synTypeTrans);\r\n    \t\t\r\n    \t\tList&lt;SyndromeType&gt; synTypesTO = this.renderSyndromeTypes(List.of(synTypeTrans));\r\n    \t\t\r\n    \t\tSyndromeType synTypeTO = synTypesTO.isEmpty() ? null : synTypesTO.get(0);\r\n    \t\t\r\n    \t\tLOGGER.info(&quot;&lt;&lt; modifySyndromeType&quot;);\r\n    \t\treturn synTypeTO;\r\n    \t}\r\n    }\r\n\r\n","title":"How to test update method with junit 5 and mockito with exception handling in the service layer","body":"<p>I am starting with Mockito to do unit tests.\nI have seen several examples of how a unit test can be carried out but it does not work for me since when I pass the object to search to check if it exists and modify it, the exception is thrown and the test is interrupted.</p>\n<p>When this line is executed:\n<strong>BDDMockito.given(syndromeTypeServiceMock.modifySyndromeType(synTypeMock)).willReturn(synTypeMockEspect)</strong>;\nIt enters the method in the Service and when validating with the mock, by not going to the database to look for the record, it returns null or empty and the following validation raises the exception.\nHow can I validate this exception with Mockito so that it passes the test?</p>\n<p>Thansk in advance!</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class SyndromeTypeServiceTest {\n\n    Logger LOGGER = LoggerFactory.getLogger(getClass());\n    \n    @Mock\n    SyndromeTypeRepository syndromeTypeRepository;\n    @Mock\n    SyndromeTypeTransRepository syndromeTypeTransRepository;\n    @InjectMocks\n    SyndromeTypeServiceImpl syndromeTypeServiceMock;\n    \n    @Test\n    public void test_modify_SyndromeType_when_synTransId_exist() throws PersistenceException {\n        LOGGER.info(&quot;test_modify_SyndromeType_when_synTransId_exist &gt;&gt;&quot;);\n        \n\n        SyndromeType synTypeMock = SyndromeType.builder()\n                                                .synTypeId(10)\n                                                .synTypeName(&quot;Musculoesquelético.&quot;)\n                                                .lanCode(&quot;es&quot;)\n                                                .synTypeTransId(10)\n                                                .build();\n        \n        SyndromeType synTypeMockEspect = SyndromeType.builder()\n                                                .synTypeId(10)\n                                                .synTypeName(&quot;Musculoesquelético.&quot;)\n                                                .lanCode(&quot;es&quot;)\n                                                .synTypeTransId(10)\n                                                .build();\n\n        BDDMockito.given(syndromeTypeServiceMock.modifySyndromeType(synTypeMock)).willReturn(synTypeMockEspect);\n\n        assertEquals(synTypeMock.getSynTypeTransId(), synTypeMockEspect.getSynTypeTransId());\n        assertEquals(synTypeMock.getSynTypeId(), synTypeMockEspect.getSynTypeId());\n        assertEquals(synTypeMock.getSynTypeName(), synTypeMockEspect.getSynTypeName());\n\n        LOGGER.info(&quot;&lt;&lt; test_modify_SyndromeType_when_synTransId_exist&quot;);\n        \n    }\n    \n}\n</code></pre>\n<p>Service layer</p>\n<pre><code>@Service\n@Transactional\npublic class SyndromeTypeServiceImpl implements SyndromeTypeService {\n\n    Logger LOGGER = LoggerFactory.getLogger(getClass());\n    \n    final SyndromeTypeRepository syndromeTypeRepository;\n    final SyndromeTypeTransRepository syndromeTypeTransRepository;\n    \n    public SyndromeTypeServiceImpl(SyndromeTypeRepository syndromeTypeRepository,\n            SyndromeTypeTransRepository syndromeTypeTransRepository) {\n        this.syndromeTypeRepository = syndromeTypeRepository;\n        this.syndromeTypeTransRepository = syndromeTypeTransRepository;\n    }\n\n    @Override\n    public List&lt;SyndromeType&gt; renderSyndromeTypes(List&lt;SyndromeTypeTransEntity&gt; synTypesEtts){\n        LOGGER.info(&quot;Rendering SyndromeTypeEntity results&quot;);\n        List&lt;SyndromeType&gt; synTypes = new ArrayList&lt;SyndromeType&gt;(0);\n\n        if(null != synTypesEtts) {\n            synTypesEtts.stream()\n                .forEach(\n                    s -&gt; {\n                            synTypes.add(\n                                    SyndromeType.builder()\n                                                .synTypeId(s.getSynTypeEtt().getSynTypeId())\n                                                .synTypeName(s.getSynTypeName())\n                                                .lanCode(s.getLanCodeEtt().getLanCode())\n                                                .synTypeTransId(s.getSynTypeTransId())\n                                                .build()\n                                    );\n                });\n            \n        }\n        \n        return synTypes;\n    }\n\n    @Override\n    public SyndromeType modifySyndromeType(SyndromeType synType) throws PersistenceException {\n        LOGGER.info(&quot;modifySyndromeType &gt;&gt;&quot;);\n        \n        Optional&lt;SyndromeTypeTransEntity&gt; synTypeEtt = java.util.Optional.empty();\n        \n        if(null != synType.getSynTypeTransId()) {\n            synTypeEtt = syndromeTypeTransRepository.findById(synType.getSynTypeTransId()); \n        }\n\n        if(!synTypeEtt.isPresent() || synTypeEtt.isEmpty()) {\n            throw new PersistenceException(ErrorMessage.RECORD_NOT_EXIST.name());\n        }\n        \n        SyndromeTypeTransEntity synTypeTrans = SyndromeTypeTransEntity.builder()\n                                                        .lanCodeEtt(LanguageEntity.builder()\n                                                                         .lanCode(synType.getLanCode())\n                                                                         .build())\n                                                        .synTypeName(synType.getSynTypeName())\n                                                        .build();\n        \n        synTypeTrans = syndromeTypeTransRepository.save(synTypeTrans);\n        \n        List&lt;SyndromeType&gt; synTypesTO = this.renderSyndromeTypes(List.of(synTypeTrans));\n        \n        SyndromeType synTypeTO = synTypesTO.isEmpty() ? null : synTypesTO.get(0);\n        \n        LOGGER.info(&quot;&lt;&lt; modifySyndromeType&quot;);\n        return synTypeTO;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","docker","testcontainers"],"answers":[{"tags":[],"owner":{"account_id":21331390,"reputation":21,"user_id":15703151,"display_name":"kirill"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694435858,"creation_date":1694435858,"answer_id":77081692,"question_id":77081390,"body_markdown":"Found it. It is org.rnotrth.ducttape library. To exclude its debug messages from logs just use:\r\n```\r\nlogging:\r\n  level:\r\n    org.rnorth: WARN\r\n```","title":"Exclude from logs in Java - DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire","body":"<p>Found it. It is org.rnotrth.ducttape library. To exclude its debug messages from logs just use:</p>\n<pre><code>logging:\n  level:\n    org.rnorth: WARN\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21331390,"reputation":21,"user_id":15703151,"display_name":"kirill"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694523510,"creation_date":1694523510,"answer_id":77089350,"question_id":77081390,"body_markdown":"The lines come from `HttpClient`. Here is the discussion on how to turn it off:\r\nhttps://stackoverflow.com/questions/4915414/disable-httpclient-logging\r\n\r\nIn my case helped adding logback.xml file with the following content:\r\n```\r\n&lt;configuration debug=&quot;false&quot;&gt;\r\n    &lt;!-- definition of appender STDOUT --&gt;\r\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg %n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;INFO&quot;&gt;\r\n        &lt;!-- appender referenced after it is defined --&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```","title":"Exclude from logs in Java - DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire","body":"<p>The lines come from <code>HttpClient</code>. Here is the discussion on how to turn it off:\n<a href=\"https://stackoverflow.com/questions/4915414/disable-httpclient-logging\">Disable HttpClient logging</a></p>\n<p>In my case helped adding logback.xml file with the following content:</p>\n<pre><code>&lt;configuration debug=&quot;false&quot;&gt;\n    &lt;!-- definition of appender STDOUT --&gt;\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg %n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;root level=&quot;INFO&quot;&gt;\n        &lt;!-- appender referenced after it is defined --&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":21331390,"reputation":21,"user_id":15703151,"display_name":"kirill"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694523510,"creation_date":1694433122,"question_id":77081390,"body_markdown":"Have a Spring Boot project and while running integration tests I get plenty of these debug messages. Which library is generating them and how to exclude them properly? \r\n```\r\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;accept: application/json[\\r][\\n]&quot;                                                              \r\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;x-tc-sid: 0c130805-5b48-4da1-acf4-45a0a4833e0f[\\r][\\n]\r\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;User-Agent: tc-java/1.19.0[\\r][\\n]&quot;\r\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Accept-Encoding: gzip, x-gzip, deflate[\\r][\\n]\r\n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Host: localhost:2375[\\r][\\n]                                                                                       \r\n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Connection: keep-alive[\\r][\\n]                                                                                     \r\n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;[\\r][\\n]&quot;                                                                                                          \r\n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]                                                                                            \r\n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;Api-Version: 1.41[\\r][\\n]                                                                                          \r\n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;Content-Type: application/json[\\r][\\n]&quot;   \r\n```\r\n\r\n\r\nTried adding to the application.yml file:\r\n```\r\nlogging:\r\n  level:\r\n    org.springframework: INFO\r\n    org.hibernate: WARN\r\n    com.github: WARN\r\n    org.apache.http: WARN\r\n    org.testcontainers: WARN\r\n    org.postgresql: WARN\r\n```","title":"Exclude from logs in Java - DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire","body":"<p>Have a Spring Boot project and while running integration tests I get plenty of these debug messages. Which library is generating them and how to exclude them properly?</p>\n<pre><code>13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;accept: application/json[\\r][\\n]&quot;                                                              \n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;x-tc-sid: 0c130805-5b48-4da1-acf4-45a0a4833e0f[\\r][\\n]\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;User-Agent: tc-java/1.19.0[\\r][\\n]&quot;\n13:41:03.966 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Accept-Encoding: gzip, x-gzip, deflate[\\r][\\n]\n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Host: localhost:2375[\\r][\\n]                                                                                       \n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;Connection: keep-alive[\\r][\\n]                                                                                     \n13:41:03.967 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &gt;&gt; &quot;[\\r][\\n]&quot;                                                                                                          \n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]                                                                                            \n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;Api-Version: 1.41[\\r][\\n]                                                                                          \n13:41:03.969 [ducttape-1] DEBUG com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.wire - http-outgoing-3 &lt;&lt; &quot;Content-Type: application/json[\\r][\\n]&quot;   \n</code></pre>\n<p>Tried adding to the application.yml file:</p>\n<pre><code>logging:\n  level:\n    org.springframework: INFO\n    org.hibernate: WARN\n    com.github: WARN\n    org.apache.http: WARN\n    org.testcontainers: WARN\n    org.postgresql: WARN\n</code></pre>\n"},{"tags":["java","mockito"],"answers":[{"tags":[],"owner":{"account_id":5745621,"reputation":699,"user_id":4536931,"display_name":"Vincent C."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664296008,"creation_date":1664296008,"answer_id":73870870,"question_id":67397029,"body_markdown":"Be very careful, what you are doing using `times(0)` does not work as you expect.\r\nIndeed, one can try this piece of code to notice that the timeout is not actually reached, and as soon as the first valid Mockito evaluation passes, the `verify` assertions passes.\r\n\r\n```java\r\n  private static class TestAsync {\r\n    void test() {\r\n      System.out.println(&quot;test&quot;);\r\n    }\r\n  }\r\n\r\n  @Test\r\n  void testAsyncWaitZeroTimes() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 1000);\r\n\r\n    verify(testAsync, timeout(2000).times(0)).test();\r\n\r\n  }\r\n\r\n  @Test\r\n  void testAsyncWaitOnce() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 1000);\r\n\r\n    verify(testAsync, timeout(2000).times(1)).test();\r\n\r\n  }\r\n\r\n  @Test\r\n  void testAsyncWaitReachingTimeout() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 2000);\r\n\r\n    verify(testAsync, timeout(1000).times(1)).test();\r\n\r\n  }\r\n```\r\n\r\nYou will notice that the `test` is printed only in the `testAsyncWaitOnce` test.\r\n\r\nWhat I am doing is using a third-party library called [`awaitility`](https://github.com/awaitility/awaitility), and allow to do something like:\r\n\r\n```java\r\n  @Test\r\n  void testAsyncWaitUsingAwaitilityShouldNotBeCalled() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 5000);\r\n\r\n    await().during(2, TimeUnit.SECONDS)\r\n           .until(() -&gt; Try.run(() -&gt; verify(testAsync, never()).test())\r\n                           .isSuccess());\r\n\r\n  }\r\n\r\n  @Test\r\n  void testAsyncWaitUsingAwaitilityShouldBeCalledOnce() {\r\n\r\n    var testAsync = Mockito.mock(TestAsync.class);\r\n    doCallRealMethod().when(testAsync).test();\r\n\r\n    new Timer().schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        testAsync.test();\r\n      }\r\n    }, 1000);\r\n\r\n    await().timeout(2, TimeUnit.SECONDS)\r\n           .until(() -&gt; Try.run(() -&gt; verify(testAsync, times(1)).test())\r\n                           .isSuccess());\r\n\r\n  }\r\n```\r\n\r\nThis way we can see the time is correctly awaited and no interactions have happened in the past.","title":"Is there a way to combine verifyNoInteractions with timeout","body":"<p>Be very careful, what you are doing using <code>times(0)</code> does not work as you expect.\nIndeed, one can try this piece of code to notice that the timeout is not actually reached, and as soon as the first valid Mockito evaluation passes, the <code>verify</code> assertions passes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private static class TestAsync {\n    void test() {\n      System.out.println(&quot;test&quot;);\n    }\n  }\n\n  @Test\n  void testAsyncWaitZeroTimes() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 1000);\n\n    verify(testAsync, timeout(2000).times(0)).test();\n\n  }\n\n  @Test\n  void testAsyncWaitOnce() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 1000);\n\n    verify(testAsync, timeout(2000).times(1)).test();\n\n  }\n\n  @Test\n  void testAsyncWaitReachingTimeout() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 2000);\n\n    verify(testAsync, timeout(1000).times(1)).test();\n\n  }\n</code></pre>\n<p>You will notice that the <code>test</code> is printed only in the <code>testAsyncWaitOnce</code> test.</p>\n<p>What I am doing is using a third-party library called <a href=\"https://github.com/awaitility/awaitility\" rel=\"nofollow noreferrer\"><code>awaitility</code></a>, and allow to do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Test\n  void testAsyncWaitUsingAwaitilityShouldNotBeCalled() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 5000);\n\n    await().during(2, TimeUnit.SECONDS)\n           .until(() -&gt; Try.run(() -&gt; verify(testAsync, never()).test())\n                           .isSuccess());\n\n  }\n\n  @Test\n  void testAsyncWaitUsingAwaitilityShouldBeCalledOnce() {\n\n    var testAsync = Mockito.mock(TestAsync.class);\n    doCallRealMethod().when(testAsync).test();\n\n    new Timer().schedule(new TimerTask() {\n      @Override\n      public void run() {\n        testAsync.test();\n      }\n    }, 1000);\n\n    await().timeout(2, TimeUnit.SECONDS)\n           .until(() -&gt; Try.run(() -&gt; verify(testAsync, times(1)).test())\n                           .isSuccess());\n\n  }\n</code></pre>\n<p>This way we can see the time is correctly awaited and no interactions have happened in the past.</p>\n"},{"tags":[],"owner":{"account_id":3248402,"reputation":2386,"user_id":2739334,"accept_rate":64,"display_name":"Pwnstar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694523444,"creation_date":1694523444,"answer_id":77089341,"question_id":67397029,"body_markdown":"Combine Timeout with How often it should appear\r\n\r\n    import static org.mockito.Mockito.timeout;\r\n    \r\n    ...\r\n    \r\n    verify(spy, timeout(5000).times(1)).doWhatever(comparedArgument);\r\n\r\nWait for `5000` milliseconds to execute `doWhatever` exactly `1` times and check that the argument equals `comparedArgument`","title":"Is there a way to combine verifyNoInteractions with timeout","body":"<p>Combine Timeout with How often it should appear</p>\n<pre><code>import static org.mockito.Mockito.timeout;\n\n...\n\nverify(spy, timeout(5000).times(1)).doWhatever(comparedArgument);\n</code></pre>\n<p>Wait for <code>5000</code> milliseconds to execute <code>doWhatever</code> exactly <code>1</code> times and check that the argument equals <code>comparedArgument</code></p>\n"}],"owner":{"account_id":10164387,"reputation":4961,"user_id":7506820,"display_name":"Nico Van Belle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":445,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1694523444,"creation_date":1620200413,"question_id":67397029,"body_markdown":"I have a piece of java code that runs in a CompletableFuture#runAsync block and I want to verify that in this block, a specific service is never called.\r\n\r\nNormally to verify that it is actually called, I can use the `timeout` VerificationMode to assert when the runAsync is likely completed\r\n\r\n```\r\nverify(myService, timeout(500)).methodX(param);\r\n```\r\n\r\nBut in my case I want to check if the service had no interactions. Normally this is done with `verifyNoInteractions(myService);` but this fires immediately and has a high chance for false positives.\r\n\r\nThe workaround is that, for every method in the service, I type use the `times(0)` VerificationMode e.g.\r\n\r\n```\r\nverify(myService, timeout(500).times(0)).methodX(param);\r\nverify(myService, timeout(500).times(0)).methodY(param);\r\nverify(myService, timeout(500).times(0)).methodZ(param);\r\n```\r\n\r\nBut this is an awful idea for all obvious reasons.\r\n\r\nI know another possibility would be adding `Thread.sleep(500);`, but I want to use the Mockito API if possible. I just have not seen it done elsewhere.","title":"Is there a way to combine verifyNoInteractions with timeout","body":"<p>I have a piece of java code that runs in a CompletableFuture#runAsync block and I want to verify that in this block, a specific service is never called.</p>\n<p>Normally to verify that it is actually called, I can use the <code>timeout</code> VerificationMode to assert when the runAsync is likely completed</p>\n<pre><code>verify(myService, timeout(500)).methodX(param);\n</code></pre>\n<p>But in my case I want to check if the service had no interactions. Normally this is done with <code>verifyNoInteractions(myService);</code> but this fires immediately and has a high chance for false positives.</p>\n<p>The workaround is that, for every method in the service, I type use the <code>times(0)</code> VerificationMode e.g.</p>\n<pre><code>verify(myService, timeout(500).times(0)).methodX(param);\nverify(myService, timeout(500).times(0)).methodY(param);\nverify(myService, timeout(500).times(0)).methodZ(param);\n</code></pre>\n<p>But this is an awful idea for all obvious reasons.</p>\n<p>I know another possibility would be adding <code>Thread.sleep(500);</code>, but I want to use the Mockito API if possible. I just have not seen it done elsewhere.</p>\n"},{"tags":["java","file-io"],"comments":[{"owner":{"account_id":36493,"reputation":11667,"user_id":104117,"accept_rate":89,"display_name":"Valentin Rocher"},"score":1,"creation_date":1263304993,"post_id":2049380,"comment_id":1976327,"body_markdown":"Please be more specific in your question, what exactly do you wanna do with each line ?","body":"Please be more specific in your question, what exactly do you wanna do with each line ?"},{"owner":{"account_id":9757,"reputation":45128,"user_id":18154,"accept_rate":100,"display_name":"Fabian Steeg"},"score":0,"creation_date":1263305119,"post_id":2049380,"comment_id":1976352,"body_markdown":"This question should help you: http://stackoverflow.com/questions/224952","body":"This question should help you: <a href=\"http://stackoverflow.com/questions/224952\">stackoverflow.com/questions/224952</a>"},{"owner":{"account_id":8732,"reputation":87908,"user_id":15880,"accept_rate":75,"display_name":"Powerlord"},"score":0,"creation_date":1263305799,"post_id":2049380,"comment_id":1976455,"body_markdown":"@Fabian Steeg: The question you linked to doesn&#39;t address dealing with different data types like this one does.","body":"@Fabian Steeg: The question you linked to doesn&#39;t address dealing with different data types like this one does."},{"owner":{"account_id":9757,"reputation":45128,"user_id":18154,"accept_rate":100,"display_name":"Fabian Steeg"},"score":0,"creation_date":1263306475,"post_id":2049380,"comment_id":1976558,"body_markdown":"@Bemrose, I&#39;m not exactly sure what the author of the question means, but I understand it as *where every line can contain different kinds and amounts of numbers*. But yeah, I don&#39;t know.","body":"@Bemrose, I&#39;m not exactly sure what the author of the question means, but I understand it as <i>where every line can contain different kinds and amounts of numbers</i>. But yeah, I don&#39;t know."}],"answers":[{"tags":[],"owner":{"account_id":36493,"reputation":11667,"user_id":104117,"accept_rate":89,"display_name":"Valentin Rocher"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1263305185,"creation_date":1263305185,"answer_id":2049449,"question_id":2049380,"body_markdown":"Your question is not very clear, so I&#39;ll only answer for the &quot;read&quot; part :\r\n\r\n    List&lt;String&gt; lines = new ArrayList&lt;String&gt;();\r\n    BufferedReader br = new BufferedReader(new FileReader(&quot;fileName&quot;));\r\n    String line = br.readLine();\r\n    while (line != null)\r\n    {\r\n        lines.add(line);\r\n        line = br.readLine();\r\n    }","title":"Reading a text file in java","body":"<p>Your question is not very clear, so I'll only answer for the \"read\" part :</p>\n\n<pre><code>List&lt;String&gt; lines = new ArrayList&lt;String&gt;();\nBufferedReader br = new BufferedReader(new FileReader(\"fileName\"));\nString line = br.readLine();\nwhile (line != null)\n{\n    lines.add(line);\n    line = br.readLine();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1161345,"reputation":1837,"user_id":1140783,"accept_rate":67,"display_name":"Syed Ali"},"score":1,"creation_date":1334572728,"post_id":2049472,"comment_id":13052193,"body_markdown":"&quot;No one knows about Scanner&quot;. atleast held true for me. The scanner can also be used as:      Scanner sc = new Scanner(new File(&quot;fileName&quot;));    //any idea why not to use it this way?","body":"&quot;No one knows about Scanner&quot;. atleast held true for me. The scanner can also be used as:      Scanner sc = new Scanner(new File(&quot;fileName&quot;));    //any idea why not to use it this way?"},{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1444289796,"post_id":2049472,"comment_id":53842740,"body_markdown":"@sttaq: Because that uses the default encoding. Never use the default encoding when reading data. Always find out what the input is or specify what encoding your code accepts; in either way, nail it down to something specific.","body":"@sttaq: Because that uses the default encoding. Never use the default encoding when reading data. Always find out what the input is or specify what encoding your code accepts; in either way, nail it down to something specific."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1683534337,"post_id":2049472,"comment_id":134375884,"body_markdown":"&#39;No-one knows about it&#39; is sheer nonsense, as is &#39;can do almost anything with text&#39;. Don&#39;t make pointless and extravagant claims.","body":"&#39;No-one knows about it&#39; is sheer nonsense, as is &#39;can do almost anything with text&#39;. Don&#39;t make pointless and extravagant claims."}],"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":3,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1263305341,"creation_date":1263305341,"answer_id":2049472,"question_id":2049380,"body_markdown":"Try the [`Scanner`][1] class which no one knows about but can do almost anything with text.\r\n\r\nTo get a reader for a file, use\r\n\r\n    File file = new File (&quot;...path...&quot;);\r\n    String encoding = &quot;....&quot;; // Encoding of your file\r\n    Reader reader = new BufferedReader (new InputStreamReader (\r\n        new FileInputStream (file), encoding));\r\n\r\n    ... use reader ...\r\n\r\n    reader.close ();\r\n\r\nYou should really specify the encoding or else you will get strange results when you encounter umlauts, Unicode and the like.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/Scanner.html","title":"Reading a text file in java","body":"<p>Try the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Scanner.html\" rel=\"noreferrer\"><code>Scanner</code></a> class which no one knows about but can do almost anything with text.</p>\n\n<p>To get a reader for a file, use</p>\n\n<pre><code>File file = new File (\"...path...\");\nString encoding = \"....\"; // Encoding of your file\nReader reader = new BufferedReader (new InputStreamReader (\n    new FileInputStream (file), encoding));\n\n... use reader ...\n\nreader.close ();\n</code></pre>\n\n<p>You should really specify the encoding or else you will get strange results when you encounter umlauts, Unicode and the like.</p>\n"},{"comments":[{"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"score":0,"creation_date":1649280307,"post_id":2049677,"comment_id":126839135,"body_markdown":"This method appears to now be deprecated. Specifying a charset is preferred.","body":"This method appears to now be deprecated. Specifying a charset is preferred."}],"tags":[],"owner":{"account_id":90350,"reputation":250,"user_id":248787,"display_name":"Alasdair"},"comment_count":1,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1263307048,"creation_date":1263307048,"answer_id":2049677,"question_id":2049380,"body_markdown":"Easiest option is to simply use the [Apache Commons IO][1] JAR and import the org.apache.commons.io.FileUtils class. There are many possibilities when using this class, but the most obvious would be as follows;\r\n\r\n    List&lt;String&gt; lines = FileUtils.readLines(new File(&quot;untitled.txt&quot;));\r\n\r\nIt&#39;s that easy.\r\n\r\n&gt; &quot;Don&#39;t reinvent the wheel.&quot;\r\n\r\n  [1]: http://commons.apache.org/io/","title":"Reading a text file in java","body":"<p>Easiest option is to simply use the <a href=\"http://commons.apache.org/io/\" rel=\"noreferrer\">Apache Commons IO</a> JAR and import the org.apache.commons.io.FileUtils class. There are many possibilities when using this class, but the most obvious would be as follows;</p>\n\n<pre><code>List&lt;String&gt; lines = FileUtils.readLines(new File(\"untitled.txt\"));\n</code></pre>\n\n<p>It's that easy.</p>\n\n<blockquote>\n  <p>\"Don't reinvent the wheel.\"</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":786530,"reputation":523,"user_id":859809,"accept_rate":91,"display_name":"Unnikrishnan"},"score":0,"creation_date":1578749120,"post_id":15372641,"comment_id":105544607,"body_markdown":"@Kamil After adding java import.io.* to the top and including the class, this worked fine for me except that the output to the cmd window has a space between each alphabet. How to avoid the spaces in the output.","body":"@Kamil After adding java import.io.* to the top and including the class, this worked fine for me except that the output to the cmd window has a space between each alphabet. How to avoid the spaces in the output."}],"tags":[],"owner":{"account_id":2484168,"reputation":39,"user_id":2162977,"display_name":"Kamil"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1363124295,"creation_date":1363124170,"answer_id":15372641,"question_id":2049380,"body_markdown":"Common used:\r\n\r\n        String line = null;\r\n        File file = new File( &quot;readme.txt&quot; );\r\n   \r\n        FileReader fr = null;\r\n        try\r\n        {\r\n            fr = new FileReader( file );\r\n        } \r\n        catch (FileNotFoundException e) \r\n        {  \r\n            System.out.println( &quot;File doesn&#39;t exists&quot; );\r\n            e.printStackTrace();\r\n        }\r\n        BufferedReader br = new BufferedReader( fr );\r\n   \r\n        try\r\n        {\r\n            while( (line = br.readLine()) != null )\r\n        {\r\n            System.out.println( line );\r\n        }\r\n\r\n\r\n","title":"Reading a text file in java","body":"<p>Common used:</p>\n\n<pre><code>    String line = null;\n    File file = new File( \"readme.txt\" );\n\n    FileReader fr = null;\n    try\n    {\n        fr = new FileReader( file );\n    } \n    catch (FileNotFoundException e) \n    {  \n        System.out.println( \"File doesn't exists\" );\n        e.printStackTrace();\n    }\n    BufferedReader br = new BufferedReader( fr );\n\n    try\n    {\n        while( (line = br.readLine()) != null )\n    {\n        System.out.println( line );\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1683534399,"post_id":34649320,"comment_id":134375897,"body_markdown":"You cannot &#39;store anything in a String array&#39;. You can only store Strings.","body":"You cannot &#39;store anything in a String array&#39;. You can only store Strings."}],"tags":[],"owner":{"account_id":5356532,"reputation":1515,"user_id":4269054,"accept_rate":100,"display_name":"NikhilP"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1694523368,"creation_date":1452150854,"answer_id":34649320,"question_id":2049380,"body_markdown":"@user248921 first of all, you can store any text in string array , so you can make string array and store a line in array and use value in code whenever you want. you can use the below code to store heterogeneous(containing string, int, boolean,etc) lines in array.\r\n\r\n    public class user {\r\n     public static void main(String x[]) throws IOException{\r\n      BufferedReader b=new BufferedReader(new FileReader(&quot;&lt;path to file&gt;&quot;));\r\n      String[] user=new String[500];\r\n      String line=&quot;&quot;;\r\n      while ((line = b.readLine()) != null) {\r\n       user[i]=line; \r\n       System.out.println(user[1]);\r\n       i++;  \r\n       }\r\n    \r\n     }\r\n    }","title":"Reading a text file in java","body":"<p>@user248921 first of all, you can store any text in string array , so you can make string array and store a line in array and use value in code whenever you want. you can use the below code to store heterogeneous(containing string, int, boolean,etc) lines in array.</p>\n<pre><code>public class user {\n public static void main(String x[]) throws IOException{\n  BufferedReader b=new BufferedReader(new FileReader(&quot;&lt;path to file&gt;&quot;));\n  String[] user=new String[500];\n  String line=&quot;&quot;;\n  while ((line = b.readLine()) != null) {\n   user[i]=line; \n   System.out.println(user[1]);\n   i++;  \n   }\n\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14577797,"reputation":182,"user_id":10529201,"display_name":"Babofett"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1548421674,"creation_date":1548421674,"answer_id":54365951,"question_id":2049380,"body_markdown":"This is a nice way to work with Streams and Collectors.\r\n\r\n    List&lt;String&gt; myList;\r\n    try(BufferedReader reader = new BufferedReader(new FileReader(&quot;yourpath&quot;))){\r\n        myList = reader.lines() // This will return a Stream&lt;String&gt;\r\n                     .collect(Collectors.toList());\r\n    }catch(Exception e){\r\n        e.printStackTrace();\r\n    }\r\n\r\nWhen working with Streams you have also multiple methods to filter, manipulate or reduce your input.","title":"Reading a text file in java","body":"<p>This is a nice way to work with Streams and Collectors.</p>\n\n<pre><code>List&lt;String&gt; myList;\ntry(BufferedReader reader = new BufferedReader(new FileReader(\"yourpath\"))){\n    myList = reader.lines() // This will return a Stream&lt;String&gt;\n                 .collect(Collectors.toList());\n}catch(Exception e){\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>When working with Streams you have also multiple methods to filter, manipulate or reduce your input.</p>\n"},{"tags":[],"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1556055157,"creation_date":1556055157,"answer_id":55819708,"question_id":2049380,"body_markdown":"The best approach to read a file in `Java` is to open in, read line by line and process it and close the strea\r\n\r\n    // Open the file\r\n    FileInputStream fstream = new FileInputStream(&quot;textfile.txt&quot;);\r\n    BufferedReader br = new BufferedReader(new InputStreamReader(fstream));\r\n    \r\n    String strLine;\r\n    \r\n    //Read File Line By Line\r\n    while ((strLine = br.readLine()) != null)   {\r\n      // Print the content on the console - do what you want to do\r\n      System.out.println (strLine);\r\n    }\r\n    \r\n    //Close the input stream\r\n    fstream.close();\r\n\r\nTo learn more about how to read file in Java, [check out the article][1].\r\n\r\n\r\n  [1]: https://javatutorial.net/java-read-file-example","title":"Reading a text file in java","body":"<p>The best approach to read a file in <code>Java</code> is to open in, read line by line and process it and close the strea</p>\n\n<pre><code>// Open the file\nFileInputStream fstream = new FileInputStream(\"textfile.txt\");\nBufferedReader br = new BufferedReader(new InputStreamReader(fstream));\n\nString strLine;\n\n//Read File Line By Line\nwhile ((strLine = br.readLine()) != null)   {\n  // Print the content on the console - do what you want to do\n  System.out.println (strLine);\n}\n\n//Close the input stream\nfstream.close();\n</code></pre>\n\n<p>To learn more about how to read file in Java, <a href=\"https://javatutorial.net/java-read-file-example\" rel=\"nofollow noreferrer\">check out the article</a>.</p>\n"},{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1616700488,"creation_date":1616655117,"answer_id":66794456,"question_id":2049380,"body_markdown":"For **Java 11** you could use the next short approach:\r\n\r\n      Path path = Path.of(&quot;file.txt&quot;);\r\n      try (var reader = Files.newBufferedReader(path)) {\r\n          String line;\r\n          while ((line = reader.readLine()) != null) {\r\n              System.out.println(line);\r\n          }\r\n      }\r\n\r\nOr:\r\n\r\n    var path = Path.of(&quot;file.txt&quot;);\r\n    List&lt;String&gt; lines = Files.readAllLines(path);\r\n    lines.forEach(System.out::println);\r\n\r\nOr:\r\n\r\n    Files.lines(Path.of(&quot;file.txt&quot;)).forEach(System.out::println);\r\n\r\n","title":"Reading a text file in java","body":"<p>For <strong>Java 11</strong> you could use the next short approach:</p>\n<pre><code>  Path path = Path.of(&quot;file.txt&quot;);\n  try (var reader = Files.newBufferedReader(path)) {\n      String line;\n      while ((line = reader.readLine()) != null) {\n          System.out.println(line);\n      }\n  }\n</code></pre>\n<p>Or:</p>\n<pre><code>var path = Path.of(&quot;file.txt&quot;);\nList&lt;String&gt; lines = Files.readAllLines(path);\nlines.forEach(System.out::println);\n</code></pre>\n<p>Or:</p>\n<pre><code>Files.lines(Path.of(&quot;file.txt&quot;)).forEach(System.out::println);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1683538781,"post_id":76198617,"comment_id":134376778,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76198617/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28544196,"reputation":1,"user_id":21849857,"display_name":"Jakov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683533489,"creation_date":1683533489,"answer_id":76198617,"question_id":2049380,"body_markdown":"```\r\nimport java.io.BufferedReader;\r\nimport java.io.FileReader;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class PredmetTest {\r\n\r\n    public static void main(String[] args) {\r\n        // Define the file path to read the subject names and grades from\r\n        String filePath = &quot;path_to_your_file.txt&quot;;\r\n\r\n        // Create a list to store the subjects\r\n        List&lt;Predmet&gt; predmeti = new ArrayList&lt;&gt;();\r\n\r\n        // Read the file and populate the predmeti list\r\n        try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                String[] parts = line.split(&quot; &quot;);\r\n                String subjectName = parts[0];\r\n\r\n                // Parse the grades for the subject\r\n                List&lt;Integer&gt; grades = new ArrayList&lt;&gt;();\r\n                for (int i = 1; i &lt; parts.length; i++) {\r\n                    grades.add(Integer.parseInt(parts[i]));\r\n                }\r\n\r\n                // Create a new Predmet object with the subject name and grades\r\n                Predmet predmet = new Predmet(subjectName, grades);\r\n\r\n                // Add the Predmet object to the list\r\n                predmeti.add(predmet);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Calculate and display the average grade for each subject\r\n        double highestAverage = -1;\r\n        Predmet predmetWithHighestAverage = null;\r\n\r\n        for (Predmet predmet : predmeti) {\r\n            // Calculate the average grade for the subject\r\n            double average = predmet.calculateAverage();\r\n\r\n            // Update the subject with the highest average if necessary\r\n            if (average &gt; highestAverage) {\r\n                highestAverage = average;\r\n                predmetWithHighestAverage = predmet;\r\n            }\r\n\r\n            // Display the subject and its average grade\r\n            System.out.println(&quot;Subject: &quot; + predmet.getSubjectName());\r\n            System.out.println(&quot;Average grade: &quot; + average);\r\n            System.out.println();\r\n        }\r\n\r\n        // Display the subject with the highest average grade\r\n        if (predmetWithHighestAverage != null) {\r\n            System.out.println(&quot;Subject with the highest average grade: &quot; + predmetWithHighestAverage.getSubjectName());\r\n        }\r\n    }\r\n}\r\n\r\npublic class Predmet {\r\n    private String subjectName;\r\n    private List&lt;Integer&gt; grades;\r\n\r\n    public Predmet(String subjectName, List&lt;Integer&gt; grades) {\r\n        this.subjectName = subjectName;\r\n        this.grades = grades;\r\n    }\r\n\r\n    public String getSubjectName() {\r\n        return subjectName;\r\n    }\r\n\r\n    public List&lt;Integer&gt; getGrades() {\r\n        return grades;\r\n    }\r\n\r\n    public double calculateAverage() {\r\n        int sum = 0;\r\n        for (int grade : grades) {\r\n            sum += grade;\r\n        }\r\n        return (double) sum / grades.size();\r\n    }\r\n}\r\n```","title":"Reading a text file in java","body":"<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class PredmetTest {\n\n    public static void main(String[] args) {\n        // Define the file path to read the subject names and grades from\n        String filePath = &quot;path_to_your_file.txt&quot;;\n\n        // Create a list to store the subjects\n        List&lt;Predmet&gt; predmeti = new ArrayList&lt;&gt;();\n\n        // Read the file and populate the predmeti list\n        try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                String[] parts = line.split(&quot; &quot;);\n                String subjectName = parts[0];\n\n                // Parse the grades for the subject\n                List&lt;Integer&gt; grades = new ArrayList&lt;&gt;();\n                for (int i = 1; i &lt; parts.length; i++) {\n                    grades.add(Integer.parseInt(parts[i]));\n                }\n\n                // Create a new Predmet object with the subject name and grades\n                Predmet predmet = new Predmet(subjectName, grades);\n\n                // Add the Predmet object to the list\n                predmeti.add(predmet);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        // Calculate and display the average grade for each subject\n        double highestAverage = -1;\n        Predmet predmetWithHighestAverage = null;\n\n        for (Predmet predmet : predmeti) {\n            // Calculate the average grade for the subject\n            double average = predmet.calculateAverage();\n\n            // Update the subject with the highest average if necessary\n            if (average &gt; highestAverage) {\n                highestAverage = average;\n                predmetWithHighestAverage = predmet;\n            }\n\n            // Display the subject and its average grade\n            System.out.println(&quot;Subject: &quot; + predmet.getSubjectName());\n            System.out.println(&quot;Average grade: &quot; + average);\n            System.out.println();\n        }\n\n        // Display the subject with the highest average grade\n        if (predmetWithHighestAverage != null) {\n            System.out.println(&quot;Subject with the highest average grade: &quot; + predmetWithHighestAverage.getSubjectName());\n        }\n    }\n}\n\npublic class Predmet {\n    private String subjectName;\n    private List&lt;Integer&gt; grades;\n\n    public Predmet(String subjectName, List&lt;Integer&gt; grades) {\n        this.subjectName = subjectName;\n        this.grades = grades;\n    }\n\n    public String getSubjectName() {\n        return subjectName;\n    }\n\n    public List&lt;Integer&gt; getGrades() {\n        return grades;\n    }\n\n    public double calculateAverage() {\n        int sum = 0;\n        for (int grade : grades) {\n            sum += grade;\n        }\n        return (double) sum / grades.size();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1683538790,"post_id":76199267,"comment_id":134376780,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76199267/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28544164,"reputation":1,"user_id":21849828,"display_name":"bozo2"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683538431,"creation_date":1683538431,"answer_id":76199267,"question_id":2049380,"body_markdown":"```\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\n\r\npublic class Predmet {\r\n    String naziv;\r\n    float ocjena;\r\n\r\n    public Predmet(String naziv, float ocjena) {\r\n        this.naziv = naziv;\r\n        this.ocjena = ocjena;\r\n    }\r\n}\r\n\r\npublic class PredmetTest {\r\n    public static void main(String[] args) {\r\n        List&lt;Predmet&gt; predmeti = new ArrayList&lt;&gt;();\r\n\r\n        // Učitavanje predmeta iz datoteke\r\n        try {\r\n            File file = new File(&quot;predmeti.txt&quot;);\r\n            Scanner scanner = new Scanner(file);\r\n\r\n            while (scanner.hasNextLine()) {\r\n                String line = scanner.nextLine();\r\n                String[] parts = line.split(&quot; &quot;);\r\n                String naziv = parts[0];\r\n                float ocjena = Float.parseFloat(parts[1]);\r\n                Predmet predmet = new Predmet(naziv, ocjena);\r\n                predmeti.add(predmet);\r\n            }\r\n\r\n            scanner.close();\r\n        } catch (FileNotFoundException e) {\r\n            System.out.println(&quot;Datoteka nije pronađena.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Ispisivanje predmeta i zaključne ocjene\r\n        float najveciProsjek = 0;\r\n        Predmet predmetSaNajvecimProsjekom = null;\r\n\r\n        for (Predmet predmet : predmeti) {\r\n            System.out.println(&quot;Predmet: &quot; + predmet.naziv);\r\n            System.out.println(&quot;Zaključna ocjena: &quot; + predmet.ocjena);\r\n            System.out.println();\r\n\r\n            if (predmet.ocjena &gt; najveciProsjek) {\r\n                najveciProsjek = predmet.ocjena;\r\n                predmetSaNajvecimProsjekom = predmet;\r\n            }\r\n        }\r\n\r\n        // Ispisivanje predmeta s najvišim prosjekom\r\n        if (predmetSaNajvecimProsjekom != null) {\r\n            System.out.println(&quot;Predmet s najvišim prosjekom: &quot; + predmetSaNajvecimProsjekom.naziv);\r\n            System.out.println(&quot;Prosjek ocjena: &quot; + predmetSaNajvecimProsjekom.ocjena);\r\n        }\r\n    }\r\n}\r\n```","title":"Reading a text file in java","body":"<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Scanner;\n\npublic class Predmet {\n    String naziv;\n    float ocjena;\n\n    public Predmet(String naziv, float ocjena) {\n        this.naziv = naziv;\n        this.ocjena = ocjena;\n    }\n}\n\npublic class PredmetTest {\n    public static void main(String[] args) {\n        List&lt;Predmet&gt; predmeti = new ArrayList&lt;&gt;();\n\n        // Učitavanje predmeta iz datoteke\n        try {\n            File file = new File(&quot;predmeti.txt&quot;);\n            Scanner scanner = new Scanner(file);\n\n            while (scanner.hasNextLine()) {\n                String line = scanner.nextLine();\n                String[] parts = line.split(&quot; &quot;);\n                String naziv = parts[0];\n                float ocjena = Float.parseFloat(parts[1]);\n                Predmet predmet = new Predmet(naziv, ocjena);\n                predmeti.add(predmet);\n            }\n\n            scanner.close();\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;Datoteka nije pronađena.&quot;);\n            e.printStackTrace();\n        }\n\n        // Ispisivanje predmeta i zaključne ocjene\n        float najveciProsjek = 0;\n        Predmet predmetSaNajvecimProsjekom = null;\n\n        for (Predmet predmet : predmeti) {\n            System.out.println(&quot;Predmet: &quot; + predmet.naziv);\n            System.out.println(&quot;Zaključna ocjena: &quot; + predmet.ocjena);\n            System.out.println();\n\n            if (predmet.ocjena &gt; najveciProsjek) {\n                najveciProsjek = predmet.ocjena;\n                predmetSaNajvecimProsjekom = predmet;\n            }\n        }\n\n        // Ispisivanje predmeta s najvišim prosjekom\n        if (predmetSaNajvecimProsjekom != null) {\n            System.out.println(&quot;Predmet s najvišim prosjekom: &quot; + predmetSaNajvecimProsjekom.naziv);\n            System.out.println(&quot;Prosjek ocjena: &quot; + predmetSaNajvecimProsjekom.ocjena);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user248921"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43953,"favorite_count":0,"down_vote_count":4,"up_vote_count":6,"closed_date":1683573775,"answer_count":10,"score":2,"last_activity_date":1694523368,"creation_date":1263304588,"question_id":2049380,"body_markdown":"How would I read a .txt file in Java and put every line in an array when every lines contains integers, strings, and doubles? And every line has different amounts of words/numbers.\r\n","title":"Reading a text file in java","body":"<p>How would I read a .txt file in Java and put every line in an array when every lines contains integers, strings, and doubles? And every line has different amounts of words/numbers.</p>\n"},{"tags":["java","selenium-webdriver","automated-tests"],"answers":[{"comments":[{"owner":{"account_id":29422570,"reputation":1,"user_id":22543992,"display_name":"Papykay"},"score":0,"creation_date":1694536898,"post_id":77089225,"comment_id":135902976,"body_markdown":"Big thanks for your help","body":"Big thanks for your help"},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1694538059,"post_id":77089225,"comment_id":135903199,"body_markdown":"Glad it helped. Accept the answer if it has resolved your issue.","body":"Glad it helped. Accept the answer if it has resolved your issue."}],"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694522924,"creation_date":1694522474,"answer_id":77089225,"question_id":77089089,"body_markdown":"Refer the below working code with explanation:\r\n````\r\nWebDriver driver = new ChromeDriver();\r\ndriver.get(&quot;https://www.screwfix.com/&quot;);\r\ndriver.manage().window().maximize();\r\n// below line will create an object of WebDriverWait\r\nWebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(15)); \r\n\r\n// below line will wait and switch into the desired iframe\t\t\r\nwait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.xpath(&quot;//iframe[@name=&#39;trustarc_cm&#39;]&quot;)));\r\n// below line eill wait and click on Accept Cookie button\r\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[text()=&#39;Accept Cookies&#39;]&quot;))).click();\r\n// below line will come out of iframe\r\ndriver.switchTo().defaultContent();\r\n````\r\n\r\nImports:\r\n````\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\n````","title":"How to find Element hidden in Cross-Origin Iframe","body":"<p>Refer the below working code with explanation:</p>\n<pre><code>WebDriver driver = new ChromeDriver();\ndriver.get(&quot;https://www.screwfix.com/&quot;);\ndriver.manage().window().maximize();\n// below line will create an object of WebDriverWait\nWebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(15)); \n\n// below line will wait and switch into the desired iframe      \nwait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.xpath(&quot;//iframe[@name='trustarc_cm']&quot;)));\n// below line eill wait and click on Accept Cookie button\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[text()='Accept Cookies']&quot;))).click();\n// below line will come out of iframe\ndriver.switchTo().defaultContent();\n</code></pre>\n<p>Imports:</p>\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n</code></pre>\n"}],"owner":{"account_id":29422570,"reputation":1,"user_id":22543992,"display_name":"Papykay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694522924,"creation_date":1694521539,"question_id":77089089,"body_markdown":"Please, I need help to click on the &lt;kbd&gt;Accept cookies&lt;/kbd&gt; of https://www.screwfix.com that appeared on the launch of Chrome browser. I discovered through the Selector hub that the element is inside a cross-origin `iframe`. I watched Sanjay Kumar&#39;s Selector Hub method of dealing with cross-origin `iframe` on YouTube. The result I am getting is `org.openqa.selenium.NoSuchFrameException`. Please I need your help\r\n\r\n````\r\npublic class Framework {\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\t\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/Users/User/eclipse-workspace/Julius 2023 workspace/Laptop123/PassDriver/chromedriver.exe&quot;);\r\n\t\t\r\n\t\tChromeOptions option=new ChromeOptions();\r\n\t\toption.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\t\t \r\n\t\tWebDriver driver= new ChromeDriver(option);\r\n\t\tdriver.get(&quot;https://www.screwfix.com&quot;);\r\n\t\t\r\n\t\t\r\n\t\t\r\n        Thread.sleep(5000);\r\n\t   driver.switchTo().frame(&quot;thirdPartyCheckerFrame&quot;);\r\n\t   driver.findElement(By.xpath(&quot;//a[normalize-space()=&#39;Accept Cookies&#39;]&quot;)).click();\r\n\t   driver.switchTo().defaultContent();  \r\n}\r\n````\r\nRESULT: Below is the exception, I have tried different method, I cannot click on &quot;Accept cookies&quot; to allow me to proceed.\r\n````\r\nException in thread &quot;main&quot; org.openqa.selenium.NoSuchFrameException: No frame element found by name or id thirdPartyCheckerFrame\r\nBuild info: version: &#39;4.7.2&#39;, revision: &#39;4d4020c3b7&#39;\r\nSystem info: os.name: &#39;Windows 11&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;11.0.17&#39;\r\n````","title":"How to find Element hidden in Cross-Origin Iframe","body":"<p>Please, I need help to click on the <kbd>Accept cookies</kbd> of <a href=\"https://www.screwfix.com\" rel=\"nofollow noreferrer\">https://www.screwfix.com</a> that appeared on the launch of Chrome browser. I discovered through the Selector hub that the element is inside a cross-origin <code>iframe</code>. I watched Sanjay Kumar's Selector Hub method of dealing with cross-origin <code>iframe</code> on YouTube. The result I am getting is <code>org.openqa.selenium.NoSuchFrameException</code>. Please I need your help</p>\n<pre><code>public class Framework {\n\n    public static void main(String[] args) throws InterruptedException {\n        \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/Users/User/eclipse-workspace/Julius 2023 workspace/Laptop123/PassDriver/chromedriver.exe&quot;);\n        \n        ChromeOptions option=new ChromeOptions();\n        option.addArguments(&quot;--remote-allow-origins=*&quot;);\n         \n        WebDriver driver= new ChromeDriver(option);\n        driver.get(&quot;https://www.screwfix.com&quot;);\n        \n        \n        \n        Thread.sleep(5000);\n       driver.switchTo().frame(&quot;thirdPartyCheckerFrame&quot;);\n       driver.findElement(By.xpath(&quot;//a[normalize-space()='Accept Cookies']&quot;)).click();\n       driver.switchTo().defaultContent();  \n}\n</code></pre>\n<p>RESULT: Below is the exception, I have tried different method, I cannot click on &quot;Accept cookies&quot; to allow me to proceed.</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.NoSuchFrameException: No frame element found by name or id thirdPartyCheckerFrame\nBuild info: version: '4.7.2', revision: '4d4020c3b7'\nSystem info: os.name: 'Windows 11', os.arch: 'amd64', os.version: '10.0', java.version: '11.0.17'\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1694512352,"post_id":77085537,"comment_id":135897244,"body_markdown":"May i ask, if you are new to spring security why did you first thing try to build a custom security solution instead of trying out to implement something that already exists in spring security like basic login or formlogin? As laid out in the official documentation on spring securitys homepage","body":"May i ask, if you are new to spring security why did you first thing try to build a custom security solution instead of trying out to implement something that already exists in spring security like basic login or formlogin? As laid out in the official documentation on spring securitys homepage"},{"owner":{"account_id":25415383,"reputation":67,"user_id":19222404,"display_name":"Batuhan"},"score":0,"creation_date":1694522167,"post_id":77085537,"comment_id":135899379,"body_markdown":"because I am developing an application and I needed to use jwt tokens in this application, but I understood why the problem was caused, basically when I examined the process, everything became clearer.","body":"because I am developing an application and I needed to use jwt tokens in this application, but I understood why the problem was caused, basically when I examined the process, everything became clearer."},{"owner":{"account_id":25415383,"reputation":67,"user_id":19222404,"display_name":"Batuhan"},"score":0,"creation_date":1694522914,"post_id":77085537,"comment_id":135899571,"body_markdown":"Also, sending authentication data through the header seems a bit odd to me.","body":"Also, sending authentication data through the header seems a bit odd to me."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694535065,"post_id":77085537,"comment_id":135902594,"body_markdown":"jwt were never designed to be handed out to browsers, thats why there is no implementation for it in spring security. So what you are building has several security flaws and has some vulnerabilities. JWTs where meant to be used between microservices inside of corporate networks.","body":"jwt were never designed to be handed out to browsers, thats why there is no implementation for it in spring security. So what you are building has several security flaws and has some vulnerabilities. JWTs where meant to be used between microservices inside of corporate networks."},{"owner":{"account_id":25415383,"reputation":67,"user_id":19222404,"display_name":"Batuhan"},"score":0,"creation_date":1694540021,"post_id":77085537,"comment_id":135903552,"body_markdown":"so how can I send the login data to the filters in the request body or is this possible?","body":"so how can I send the login data to the filters in the request body or is this possible?"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694545588,"post_id":77085537,"comment_id":135904542,"body_markdown":"tbh, if you want to get good at Spring Security, i suggest you read https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html and first try to implement FormLogin https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html and look at their example https://github.com/spring-projects/spring-security-samples/blob/main/servlet/spring-boot/java/hello-security-explicit/src/main/java/example/SecurityConfiguration.java i cant teach you spring sec in comments.","body":"tbh, if you want to get good at Spring Security, i suggest you read <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/authenticat&zwnj;&#8203;ion/&hellip;</a> and first try to implement FormLogin <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/authenticat&zwnj;&#8203;ion/&hellip;</a> and look at their example <a href=\"https://github.com/spring-projects/spring-security-samples/blob/main/servlet/spring-boot/java/hello-security-explicit/src/main/java/example/SecurityConfiguration.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security-samples/blob/main&zwnj;&#8203;/&hellip;</a> i cant teach you spring sec in comments."}],"owner":{"account_id":25415383,"reputation":67,"user_id":19222404,"display_name":"Batuhan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694522800,"creation_date":1694480751,"question_id":77085537,"body_markdown":"I&#39;m new to Spring Boot so please forgive me if I use something wrong or a wrong term.\r\n\r\nThe jwt generator filter defines Authentication authentication = SecurityContextHolder.getContext().getAuthentication() as null, which is really starting to confuse me a lot.\r\n\r\nWhen I examined the BasicAuthentication filter, I saw that it gave null when converting the incoming request value to authentication in the BasicAuthentication filter, I could not fully understand what my mistake was here.\r\n\r\nThe reason why I write /login as a separate endpoint is that I don&#39;t get a 401 error when I send a request to the default login endpoint in spring security. In general, I have two questions, how can I use this data in BasicAuthenticationFilter and save it in SecurityContextHolder and secondly how can I send a request to the default login endpoint Thank you in advance for your answers\r\n\r\n\r\n**I have a jwt generator filter like this**\r\n\r\n```\r\npublic class JwtGeneratorFilter extends OncePerRequestFilter {\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n        if (authentication != null) {\r\n            SecretKey secretKey = Keys.hmacShaKeyFor(SecurityConstants.JWT_KEY.getBytes(StandardCharsets.UTF_8));\r\n            String jwt = Jwts.builder().setIssuer(&quot;Demo App&quot;).setSubject(&quot;Jwt token&quot;).claim(&quot;userName&quot;, authentication.getName()).setIssuedAt(new Date()).setExpiration(new Date((new Date().getTime() + 30000000))).signWith(secretKey).compact();\r\n            response.setHeader(SecurityConstants.JWT_HEADER, jwt);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n\r\n```\r\n**and I have a security config file like this**\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\npublic class SecurityConfig {\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration configuration) throws Exception {\r\n        return configuration.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration config = new CorsConfiguration();\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        config.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:4200&quot;));\r\n        config.setAllowedMethods(Collections.singletonList(&quot;*&quot;));\r\n        config.setAllowCredentials(true);\r\n        config.setAllowedHeaders(Collections.singletonList(&quot;*&quot;));\r\n        config.setExposedHeaders(Arrays.asList(&quot;Authorization&quot;));\r\n        config.setMaxAge(3600L);\r\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n        return source;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.cors(cors -&gt; cors.configurationSource(corsConfigurationSource()));\r\n        http.csrf(csrf -&gt; csrf.disable()).sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS)).authorizeHttpRequests(req -&gt; req.requestMatchers(&quot;/auth/**&quot;).permitAll().anyRequest().authenticated());\r\n        http.formLogin(Customizer.withDefaults())\r\n                .httpBasic(Customizer.withDefaults());\r\n\r\n        http.addFilterAfter(new JwtGeneratorFilter(), BasicAuthenticationFilter.class);\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n}\r\n```\r\n**and I also have a login api like this**\r\n\r\n```\r\n@PostMapping(&quot;/login&quot;)\r\n    public String login(@RequestBody User user) {\r\n        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(user.getEmail(), user.getPassword()));\r\n        return user.toString();\r\n\r\n    }\r\n```\r\n\r\n***authenticated value in the authentication object returns true but does not generate my jwt token***\r\n\r\n\r\n**My Solution**\r\n\r\nWhen I examined the BasicAuthentication filter, I saw that it receives authentication in the **header of the request** and **I realized that it has no effect on the filtering process because it is a manual authentication I did here**. If you are a beginner like me, I realized we should send this data (login information) in the header as the default Authentication filter. As far as I understand, for a custom login process, for example, you may be getting too much information, you can write a separate method to determine the login ID and authenticate it through the authentication manager, and if the authentication object received from here is authenticated, it can create a jwt token and return a response back to the end user in this way.\r\n\r\nAs I said, I just started writing Spring Boot, I apologize if I have any mistakes or mistakes, I stated my own observations and opinions here","title":"spring security securitycotextholder cannot save authentication to securitycotextholder","body":"<p>I'm new to Spring Boot so please forgive me if I use something wrong or a wrong term.</p>\n<p>The jwt generator filter defines Authentication authentication = SecurityContextHolder.getContext().getAuthentication() as null, which is really starting to confuse me a lot.</p>\n<p>When I examined the BasicAuthentication filter, I saw that it gave null when converting the incoming request value to authentication in the BasicAuthentication filter, I could not fully understand what my mistake was here.</p>\n<p>The reason why I write /login as a separate endpoint is that I don't get a 401 error when I send a request to the default login endpoint in spring security. In general, I have two questions, how can I use this data in BasicAuthenticationFilter and save it in SecurityContextHolder and secondly how can I send a request to the default login endpoint Thank you in advance for your answers</p>\n<p><strong>I have a jwt generator filter like this</strong></p>\n<pre><code>public class JwtGeneratorFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        if (authentication != null) {\n            SecretKey secretKey = Keys.hmacShaKeyFor(SecurityConstants.JWT_KEY.getBytes(StandardCharsets.UTF_8));\n            String jwt = Jwts.builder().setIssuer(&quot;Demo App&quot;).setSubject(&quot;Jwt token&quot;).claim(&quot;userName&quot;, authentication.getName()).setIssuedAt(new Date()).setExpiration(new Date((new Date().getTime() + 30000000))).signWith(secretKey).compact();\n            response.setHeader(SecurityConstants.JWT_HEADER, jwt);\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n\n</code></pre>\n<p><strong>and I have a security config file like this</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\npublic class SecurityConfig {\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration configuration) throws Exception {\n        return configuration.getAuthenticationManager();\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration config = new CorsConfiguration();\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        config.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:4200&quot;));\n        config.setAllowedMethods(Collections.singletonList(&quot;*&quot;));\n        config.setAllowCredentials(true);\n        config.setAllowedHeaders(Collections.singletonList(&quot;*&quot;));\n        config.setExposedHeaders(Arrays.asList(&quot;Authorization&quot;));\n        config.setMaxAge(3600L);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        return source;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.cors(cors -&gt; cors.configurationSource(corsConfigurationSource()));\n        http.csrf(csrf -&gt; csrf.disable()).sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS)).authorizeHttpRequests(req -&gt; req.requestMatchers(&quot;/auth/**&quot;).permitAll().anyRequest().authenticated());\n        http.formLogin(Customizer.withDefaults())\n                .httpBasic(Customizer.withDefaults());\n\n        http.addFilterAfter(new JwtGeneratorFilter(), BasicAuthenticationFilter.class);\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n}\n</code></pre>\n<p><strong>and I also have a login api like this</strong></p>\n<pre><code>@PostMapping(&quot;/login&quot;)\n    public String login(@RequestBody User user) {\n        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(user.getEmail(), user.getPassword()));\n        return user.toString();\n\n    }\n</code></pre>\n<p><em><strong>authenticated value in the authentication object returns true but does not generate my jwt token</strong></em></p>\n<p><strong>My Solution</strong></p>\n<p>When I examined the BasicAuthentication filter, I saw that it receives authentication in the <strong>header of the request</strong> and <strong>I realized that it has no effect on the filtering process because it is a manual authentication I did here</strong>. If you are a beginner like me, I realized we should send this data (login information) in the header as the default Authentication filter. As far as I understand, for a custom login process, for example, you may be getting too much information, you can write a separate method to determine the login ID and authenticate it through the authentication manager, and if the authentication object received from here is authenticated, it can create a jwt token and return a response back to the end user in this way.</p>\n<p>As I said, I just started writing Spring Boot, I apologize if I have any mistakes or mistakes, I stated my own observations and opinions here</p>\n"},{"tags":["java","jms","ibm-mq","messaging"],"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1694518957,"post_id":33637289,"comment_id":135898634,"body_markdown":"It is incomprehensible near *&quot;if we have a failover, that controls the queue will no longer be accessible&quot;*. Can you [fix it](https://stackoverflow.com/posts/33637289/edit)? But *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***[without](https://meta.stackexchange.com/a/131011)*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the question should appear as if it was written today.","body":"It is incomprehensible near <i>&quot;if we have a failover, that controls the queue will no longer be accessible&quot;</i>. Can you <a href=\"https://stackoverflow.com/posts/33637289/edit\">fix it</a>? But *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** <b><i><a href=\"https://meta.stackexchange.com/a/131011\">without</a></i></b> *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the question should appear as if it was written today."}],"answers":[{"tags":[],"owner":{"account_id":10874,"reputation":13103,"user_id":20734,"display_name":"John M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694519071,"creation_date":1447867765,"answer_id":33786532,"question_id":33637289,"body_markdown":"On your high availability question...\r\n\r\nIf you&#39;ve got two queue receivers reading from a single queue, I don&#39;t know any natural way to avoid parallelism between them.\r\n\r\nMaybe some vendor-specific feature, but it seems like an odd thing and I wouldn&#39;t have any high expectations.\r\n","title":"How do JMS transactions work with concurrent consumers?","body":"<p>On your high availability question...</p>\n<p>If you've got two queue receivers reading from a single queue, I don't know any natural way to avoid parallelism between them.</p>\n<p>Maybe some vendor-specific feature, but it seems like an odd thing and I wouldn't have any high expectations.</p>\n"},{"comments":[{"owner":{"account_id":3444195,"reputation":863,"user_id":2885370,"accept_rate":76,"display_name":"alokraop"},"score":0,"creation_date":1447946883,"post_id":33807626,"comment_id":55381187,"body_markdown":"Yeah i did try the non shareable option, but once one of the listeners hooks on, the other listeners won&#39;t be able to right? I don&#39;t really want the second listener to keep erroring out and trying to latch itself onto the queue in a loop. If the first listener goes down, there&#39;s no real way for me to notify the second listener so it can go start listening either.","body":"Yeah i did try the non shareable option, but once one of the listeners hooks on, the other listeners won&#39;t be able to right? I don&#39;t really want the second listener to keep erroring out and trying to latch itself onto the queue in a loop. If the first listener goes down, there&#39;s no real way for me to notify the second listener so it can go start listening either."},{"owner":{"account_id":5230400,"reputation":1818,"user_id":4180950,"display_name":"Attila Repasi"},"score":0,"creation_date":1447951839,"post_id":33807626,"comment_id":55384887,"body_markdown":"What is the argument against having the 2nd listener erroring and retrying?","body":"What is the argument against having the 2nd listener erroring and retrying?"},{"owner":{"account_id":3444195,"reputation":863,"user_id":2885370,"accept_rate":76,"display_name":"alokraop"},"score":0,"creation_date":1448045146,"post_id":33807626,"comment_id":55432938,"body_markdown":"Well it&#39;s not very clean right? The very idea of an &quot;exception&quot; is that something has gone wrong. But here, it&#39;s the exact opposite. Until the 2nd listener keeps getting exceptions, the system is in normal ops (nothing wrong) . When the exception stops, it means we&#39;re in failover (something&#39;s wrong). Even from a pure performance perspective, it&#39;s taking up lots of memory. I have this other component on the same WAS that actually puts the messages into these queues. I noticed a considerable performance dip if one of the listeners was constantly trying attach and failing.","body":"Well it&#39;s not very clean right? The very idea of an &quot;exception&quot; is that something has gone wrong. But here, it&#39;s the exact opposite. Until the 2nd listener keeps getting exceptions, the system is in normal ops (nothing wrong) . When the exception stops, it means we&#39;re in failover (something&#39;s wrong). Even from a pure performance perspective, it&#39;s taking up lots of memory. I have this other component on the same WAS that actually puts the messages into these queues. I noticed a considerable performance dip if one of the listeners was constantly trying attach and failing."},{"owner":{"account_id":3444195,"reputation":863,"user_id":2885370,"accept_rate":76,"display_name":"alokraop"},"score":0,"creation_date":1448045314,"post_id":33807626,"comment_id":55433041,"body_markdown":"I dunno if there&#39;s any way to periodically try to latch onto a queue, but even if there was, that would mean it&#39;s no better than a poller really. We need to be kinda consistent with our SLA. Saying that message processing might be slower on failover would mean we&#39;re not consistent. :(","body":"I dunno if there&#39;s any way to periodically try to latch onto a queue, but even if there was, that would mean it&#39;s no better than a poller really. We need to be kinda consistent with our SLA. Saying that message processing might be slower on failover would mean we&#39;re not consistent. :("},{"owner":{"account_id":5230400,"reputation":1818,"user_id":4180950,"display_name":"Attila Repasi"},"score":0,"creation_date":1448047236,"post_id":33807626,"comment_id":55434105,"body_markdown":"Using the given architecture and restrictions I cannot see any other solution. I think you will need some way to send heartbeats between your consumer applications or some other way to keep 1 and only 1 instance up, MQ alone cannot really solve this.","body":"Using the given architecture and restrictions I cannot see any other solution. I think you will need some way to send heartbeats between your consumer applications or some other way to keep 1 and only 1 instance up, MQ alone cannot really solve this."}],"tags":[],"owner":{"account_id":5230400,"reputation":1818,"user_id":4180950,"display_name":"Attila Repasi"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447945972,"creation_date":1447945972,"answer_id":33807626,"question_id":33637289,"body_markdown":"If you process the messages under syncpoint, it is true that you can roll back the transactions so putting the processed message back to the input queue in case an error occurs.\r\nIf the program ends abnormally, an implicit backout occurs.\r\n\r\nhttp://www-01.ibm.com/support/knowledgecenter/SSFKSJ_7.5.0/com.ibm.mq.dev.doc/q026800_.htm?lang=en\r\n\r\nTransactional processing of messages doesn&#39;t prevent two separate consumers from reading messages at the same time.\r\nThere is a property on the queues called Shareability, which can be set to Not Shareable so preventing the queue to be opened by separate consumers at the same time.\r\nYou should use this option and prepare your application to retry opening the queue so when the first instance fails, the second instance will open the queue.","title":"How do JMS transactions work with concurrent consumers?","body":"<p>If you process the messages under syncpoint, it is true that you can roll back the transactions so putting the processed message back to the input queue in case an error occurs.\nIf the program ends abnormally, an implicit backout occurs.</p>\n\n<p><a href=\"http://www-01.ibm.com/support/knowledgecenter/SSFKSJ_7.5.0/com.ibm.mq.dev.doc/q026800_.htm?lang=en\" rel=\"nofollow\">http://www-01.ibm.com/support/knowledgecenter/SSFKSJ_7.5.0/com.ibm.mq.dev.doc/q026800_.htm?lang=en</a></p>\n\n<p>Transactional processing of messages doesn't prevent two separate consumers from reading messages at the same time.\nThere is a property on the queues called Shareability, which can be set to Not Shareable so preventing the queue to be opened by separate consumers at the same time.\nYou should use this option and prepare your application to retry opening the queue so when the first instance fails, the second instance will open the queue.</p>\n"},{"comments":[{"owner":{"account_id":3444195,"reputation":863,"user_id":2885370,"accept_rate":76,"display_name":"alokraop"},"score":0,"creation_date":1448564226,"post_id":33945224,"comment_id":55649777,"body_markdown":"Hey so the token is kinda used to lock any other concurrent consumers from accessing the actual &quot;data&quot; queue when another instance is feeding off of it right? I saw your answer in http://stackoverflow.com/a/18902573/2885370 and that&#39;s what we&#39;re more or less going for (a little extra tweak of using an Initiation queue instead of this control queue was applied) , but there are a few other problems. I&#39;ll edit my question with details.","body":"Hey so the token is kinda used to lock any other concurrent consumers from accessing the actual &quot;data&quot; queue when another instance is feeding off of it right? I saw your answer in <a href=\"http://stackoverflow.com/a/18902573/2885370\">stackoverflow.com/a/18902573/2885370</a> and that&#39;s what we&#39;re more or less going for (a little extra tweak of using an Initiation queue instead of this control queue was applied) , but there are a few other problems. I&#39;ll edit my question with details."},{"owner":{"account_id":74767,"reputation":31622,"user_id":214668,"accept_rate":100,"display_name":"T.Rob"},"score":0,"creation_date":1448575840,"post_id":33945224,"comment_id":55654245,"body_markdown":"I&#39;m trying to wrap my head around mixing triggering with this approach. I can&#39;t imagine how or why an initiation queue would be used for this. Part of the problem is alluded to in your comments about the producer/consumer rendezvous. It sounds like you are mixing topology solutions with serialization solutions and these overlap a bit but are generally separate issues.  Many of my clients are using tokens for serialization with great success. None have mixed it with triggering to my knowledge.","body":"I&#39;m trying to wrap my head around mixing triggering with this approach. I can&#39;t imagine how or why an initiation queue would be used for this. Part of the problem is alluded to in your comments about the producer/consumer rendezvous. It sounds like you are mixing topology solutions with serialization solutions and these overlap a bit but are generally separate issues.  Many of my clients are using tokens for serialization with great success. None have mixed it with triggering to my knowledge."},{"owner":{"account_id":3444195,"reputation":863,"user_id":2885370,"accept_rate":76,"display_name":"alokraop"},"score":0,"creation_date":1448602829,"post_id":33945224,"comment_id":55660189,"body_markdown":"Ooh so one instance gets the token and does a receive without timing out at all. I didn&#39;t get that the first time. Awesome thanks. The producer notifying the listener is something we&#39;re doing coz I had no idea how to get the listeners to switch from one queue to the other. I&#39;ll try to understand all the other stuff you&#39;ve said and come back with any clarifications. Thanks a lot. :-)","body":"Ooh so one instance gets the token and does a receive without timing out at all. I didn&#39;t get that the first time. Awesome thanks. The producer notifying the listener is something we&#39;re doing coz I had no idea how to get the listeners to switch from one queue to the other. I&#39;ll try to understand all the other stuff you&#39;ve said and come back with any clarifications. Thanks a lot. :-)"},{"owner":{"account_id":3444195,"reputation":863,"user_id":2885370,"accept_rate":76,"display_name":"alokraop"},"score":0,"creation_date":1448603272,"post_id":33945224,"comment_id":55660313,"body_markdown":"With triggering what we&#39;re doing is setting it up so that the Initiation queue gets a message when a first message lands on the data queue. One of the competing consumers takes it and processes the data queue till it&#39;s empty. I&#39;m still using the producers to notify me about a queue manager being down, and when it does the listeners are unhooked from the primary Initiation queue and hooked onto the secondary which uses the same trigger mechanism. (I&#39;m using a control bus to achieve this programmatically. I&#39;ll have to check out the reconnectable clients. I&#39;m like a total noob to MQ)","body":"With triggering what we&#39;re doing is setting it up so that the Initiation queue gets a message when a first message lands on the data queue. One of the competing consumers takes it and processes the data queue till it&#39;s empty. I&#39;m still using the producers to notify me about a queue manager being down, and when it does the listeners are unhooked from the primary Initiation queue and hooked onto the secondary which uses the same trigger mechanism. (I&#39;m using a control bus to achieve this programmatically. I&#39;ll have to check out the reconnectable clients. I&#39;m like a total noob to MQ)"},{"owner":{"account_id":74767,"reputation":31622,"user_id":214668,"accept_rate":100,"display_name":"T.Rob"},"score":0,"creation_date":1448604336,"post_id":33945224,"comment_id":55660612,"body_markdown":"Good luck! Be sure to click the [tag:websphere-mq] tag and check out the &quot;getting started&quot; resources. I try to keep an eye on the tag here but if a question goes unanswered feel free to ping me. Contact info is in the profile.","body":"Good luck! Be sure to click the <a href=\"https://stackoverflow.com/questions/tagged/websphere-mq\">websphere-mq</a> tag and check out the &quot;getting started&quot; resources. I try to keep an eye on the tag here but if a question goes unanswered feel free to ping me. Contact info is in the profile."},{"owner":{"account_id":3444195,"reputation":863,"user_id":2885370,"accept_rate":76,"display_name":"alokraop"},"score":0,"creation_date":1448604954,"post_id":33945224,"comment_id":55660815,"body_markdown":"Will do thanks. Oh and in your original answer, putting the token message back would be like the final step right? Not right after we pick the token message? We get the message off of the application queue and then put the token back? Or will the new token not be available to the other listener instances till the commit happens, which means it can be put back any time after the initial retrieval?","body":"Will do thanks. Oh and in your original answer, putting the token message back would be like the final step right? Not right after we pick the token message? We get the message off of the application queue and then put the token back? Or will the new token not be available to the other listener instances till the commit happens, which means it can be put back any time after the initial retrieval?"},{"owner":{"account_id":74767,"reputation":31622,"user_id":214668,"accept_rate":100,"display_name":"T.Rob"},"score":0,"creation_date":1448605592,"post_id":33945224,"comment_id":55661037,"body_markdown":"It&#39;s all under the same UOW so the token won&#39;t be available to the next app until the `COMMIT` regardless of when it is put. There are lots of good reasons to put the token message immediately but the top ones are that doing so keeps the queue depth at 1 most of the time. Doing at after the app message is processed makes the token queue look empty most of the time. Another reason is that is all token operations happen at the same time it can be contained in an include file. This ensures all apps using the technique use the same logic and avoid deadly embraces.","body":"It&#39;s all under the same UOW so the token won&#39;t be available to the next app until the <code>COMMIT</code> regardless of when it is put. There are lots of good reasons to put the token message immediately but the top ones are that doing so keeps the queue depth at 1 most of the time. Doing at after the app message is processed makes the token queue look empty most of the time. Another reason is that is all token operations happen at the same time it can be contained in an include file. This ensures all apps using the technique use the same logic and avoid deadly embraces."}],"tags":[],"owner":{"account_id":74767,"reputation":31622,"user_id":214668,"accept_rate":100,"display_name":"T.Rob"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694522715,"creation_date":1448563278,"answer_id":33945224,"question_id":33637289,"body_markdown":"You need to be passing tokens.  Here&#39;s how that works:\r\n\r\nFirst, create a second queue and place a single message into it.  Now start up each program with the following logic.\r\n\r\n 1. Get the token message off the token queue under syncpoint using an unlimited or long wait interval and the `FAIL_IF_QUIESCING` option.\r\n 2. Put the token message back on the token queue in the same [UOW][1].\r\n 3. Get the next message off of the application queue under the same UOW.\r\n 4. Process the application&#39;s message normally.\r\n 5. Commit the UOW.\r\n\r\nYou can use as many application instances as you want.  You will see one input handle on each of the two queues for each application instance.  No application instance will have to handle errors due to exclusive use of a queue.\r\n\r\nSince there is only one token message and only one application can hold it under syncpoint at a time, only one of the applications can be actively processing an application message.  Since the `GET` off the application queue is dependent on a successful `GET` off the token queue, all application messages are processed in strict sequence.\r\n\r\n*Note: The application will process the application messages with as many concurrent threads as there are token messages on the token queue.  If anyone ever adds another token message to the token queue, strict sequence processing is lost.  For this reason read/write access to that queue must *not* be granted to anyone other than the application service account.  Also, it is common for that token message to be structured so that the application can recognize it.  If a stray unrelated message lands there the application should ignore it and throw a warning.*\r\n\r\nYou will see a fairly even distribution of messages between the two applications.  If you use more than two applications you might see a wildly *un*even distribution because queue handles are managed in a stack. As an instance commits its UOW the next instance&#39;s handle is at the top of the stack so it gets the next message.  While it is handling that message the instance that just committed will have it&#39;s `GET` placed on top of the stack.  If you have 3 or more listening instances chances are only the first two will see any traffic.\r\n\r\nThis assures that messages are processed off the queue one at a time.  It does ***not*** assure that you won&#39;t get dupes.\r\n\r\nIf you do everything under syncpoint, no messages will ever be lost.  However there&#39;s a scenario in which a message is retrieved and processed, then the `COMMIT` call fails.  In that case the transaction is rolled back and the same message becomes available again.  If you are using 1-phase commits and not [XA][2], the processing for that message will not be rolled back.\r\n\r\nThe nice thing is that the token message will be under syncpoint too and that fixes the issue in which an orphaned client channel takes a while to release the transaction.  A new connection will get messages which are older than the message held under syncpoint by the orphan transaction.  Eventually the channel agent times out releasing the message back to the queue but effectively changing its position to be *behind* any messages that were processed while it was sequestered.\r\n\r\nIn this scenario the token message is also sequestered so after this type of connection loss message processing temporarily stops and waits for the channel agent to time out.  If that were ever to happen, just issue a `STOP CHANNEL` command on the instance with the UOW.\r\n\r\n\r\n----------\r\n\r\n\r\n\r\n***Update based on additional question details specific to this answer***\r\n\r\n&gt; The queue which holds this token has to be part of some queue manager.\r\n&gt; Now if we have a failover, that control queue will no longer be\r\n&gt; accessible. Which kinda means that that we need another control queue\r\n&gt; ready in case of a failover.\r\n\r\nThe token queue is as available or as unavailable as the application queue. Only one is needed.  If the application requires high availability (HA), then a Multi-Instance QMgr or a hardware high availability cluster should be used.  These share disk so the QMgr that comes up in the failover is the same one the application has been connected to, just at a different physical location.\r\n\r\nIf the application needs [DR][3], it&#39;s possible to replicate the disk under the QMgr&#39;s logs and data directories to a DR site.  However, nothing should be listening on those instances while processing is going on in the primary data center.\r\n\r\n&gt; The listener instances should know that a failover has initiated so\r\n&gt; that it can stop listening to the control queue during normal ops and\r\n&gt; switch over to the secondary. I can&#39;t do this using the listener\r\n&gt; instance alone.\r\n\r\nWhy not? WebSphere MQ has had reconnectable clients for a really long time and the multi-instance features in v7.0.1 made reconnecting drop-dead simple.  As an administrator, your job is to make sure that no more than one instance of the application and token (not trigger!) queue are available.  During an outage, the client goes into retry without requiring any application code to drive it.  It finds whichever of the instances is up and connects.\r\n\r\n&gt; The actual producer which puts messages into the queue will have to\r\n&gt; notify the listener instances to stop listening to the normal ops\r\n&gt; control queue and switch over to the secondary.\r\n\r\nThe question was about serialization with concurrent consumers.  This is about a design in which producers and consumers have to rendezvous at a common location. Different problem that happens to overlap this one only in that it is complicated somewhat by serialization. Ask a different question if you need to explore topologies.\r\n\r\n&gt; This token system is not really\r\n&gt; reactive right? It&#39;s more of periodic thing. So let&#39;s say we don&#39;t get\r\n&gt; any messages for a few hours. The listeners will still be constantly\r\n&gt; checking the queue coz the token message keeps triggering one instance\r\n&gt; after another.\r\n\r\nThis does not use triggering. It uses a token (not trigger!) message the way a filesystem or database uses a lock in order to facilitate serialization. Whichever listener gets the token message then does a get with unlimited wait on the application queue.  The other listeners have a get with unlimited wait on the token (not trigger!) queue. Basically, they sit around idle until a message arrives.  Zero reconnections, zero polls, zero CPU cycles.  If you need to know they are alive, let them time out on the application queue once in a while.  This rolls back their UOW on the token queue which passes the token to another listener.\r\n\r\n&gt; Third would really be the question of inserting the token message.\r\n&gt; During first install or during a failback, we&#39;ll have that extra\r\n&gt; manual step of manually inserting this token (since the token would be\r\n&gt; lost in failover sometimes).\r\n\r\nWhy? Do you experience MQ losing persistent messages under syncpoint often? If so you are doing it wrong. ;-) In a situation with strict serialization requirements there can be only one active instance of a queue. If for some reason there are other instances of the application queue pre-defined other than through disk replication there would be one instance of the token (not trigger!) queue also predefined alongside it and one token (not trigger!) message waiting in each queue. Surely nobody would do such a thing in the face of strict message order requirements, but if they did those queues would surely be get-disabled while not in use.\r\n\r\n&gt; We can&#39;t really make one of the listener\r\n&gt; instances do it since if a listener instance doesn&#39;t find the message\r\n&gt; it kinda means that some other listener instance has the token.\r\n\r\nCorrect. The listeners *could* check queue depth, transactions, input handles, etc, but it is generally wise to avoid mixing application logic with control logic.\r\n\r\n&gt; So\r\n&gt; this logic has to be separate. And if we actually put some meaningful\r\n&gt; info into this token message, it has to be a utility that has to be\r\n&gt; triggered rather than an insertion through the UI.\r\n\r\nWhy? Your coders handle structured data in application messages, right? If this is perceived to be significantly more difficult, someone&#39;s doing it wrong. ;-)  Write an instance of a formatted token (not trigger!) message to a queue, then offload that to a file. When you need to reinitialize the queue, use Q or QLoad to first clear the queue, then load the file into it. **That** utility would be the one to open the queue for exclusive use, check for depth, check for handles, etc. prior to performing its magic.  When I do this for consulting clients I typically define a service that initializes the queue on MQ startup *and* also provide a feature in the application GUI for the operations and support staff.  So long as the application managing the token (not trigger) queue gets it for exclusive access during these operations it really doesn&#39;t matter how it&#39;s done or by how many instances of the control application.\r\n\r\nAs a rule I also use the structure in the message to send commands to the listeners.  There&#39;s the real token message, and then there&#39;s messages that command the application instances to do things. For example, it&#39;s really nice to have a non-transactional &quot;ping&quot; capability. I if I drop more ping messages on the token (not trigger!) queue in a single UOW than I have application instances listening, I am guaranteed to contact all of them. In this way I can detect zombies.  Depending on how much instrumentation is required the listeners can react to the ping by providing a status (uptime, messages processed, etc.) in the log, to the console, to an event queue, etc.\r\n\r\n&gt; I guess the first and third aren&#39;t really problems, but just extra\r\n&gt; overhead which wouldn&#39;t be needed if we went for a poller\r\n&gt; implementation.\r\n\r\nThat&#39;s good because this is all pretty standard stuff. The problem lies mainly with the requirements for serialization conflicting with those for HA/DR. What you are looking for is global transactional atomicity to implement a single logical queue across multiple physical locations.  IBM MQ has never attempted to provide that, although the [WebSphere Application Server][4] (WAS) Messaging Engine has.  The closest IBM MQ comes is to use two IBM MQ appliances with memory-to-memory replication of message and transaction data but that is good to only a few miles before light-speed latency begins to significantly impact throughput. It doesn&#39;t handle your DR needs.  In fact, *nothing* short of synchronous replication does that if you want a zero recovery point at the DR datacenter.\r\n\r\n  [1]: https://www.ibm.com/docs/en/was/8.5.5?topic=SSEQTP_8.5.5/com.ibm.websphere.javadoc.doc/web/spidocs/com/ibm/wsspi/uow/UOWManager.html\r\n  [2]: https://www.ibm.com/docs/en/ibm-mq/9.1?topic=registration-summarizing-xa-calls\r\n  [3]: https://en.wikipedia.org/wiki/Disaster_recovery\r\n  [4]: https://en.wikipedia.org/wiki/IBM_WebSphere_Application_Server\r\n","title":"How do JMS transactions work with concurrent consumers?","body":"<p>You need to be passing tokens.  Here's how that works:</p>\n<p>First, create a second queue and place a single message into it.  Now start up each program with the following logic.</p>\n<ol>\n<li>Get the token message off the token queue under syncpoint using an unlimited or long wait interval and the <code>FAIL_IF_QUIESCING</code> option.</li>\n<li>Put the token message back on the token queue in the same <a href=\"https://www.ibm.com/docs/en/was/8.5.5?topic=SSEQTP_8.5.5/com.ibm.websphere.javadoc.doc/web/spidocs/com/ibm/wsspi/uow/UOWManager.html\" rel=\"nofollow noreferrer\">UOW</a>.</li>\n<li>Get the next message off of the application queue under the same UOW.</li>\n<li>Process the application's message normally.</li>\n<li>Commit the UOW.</li>\n</ol>\n<p>You can use as many application instances as you want.  You will see one input handle on each of the two queues for each application instance.  No application instance will have to handle errors due to exclusive use of a queue.</p>\n<p>Since there is only one token message and only one application can hold it under syncpoint at a time, only one of the applications can be actively processing an application message.  Since the <code>GET</code> off the application queue is dependent on a successful <code>GET</code> off the token queue, all application messages are processed in strict sequence.</p>\n<p><em>Note: The application will process the application messages with as many concurrent threads as there are token messages on the token queue.  If anyone ever adds another token message to the token queue, strict sequence processing is lost.  For this reason read/write access to that queue must <em>not</em> be granted to anyone other than the application service account.  Also, it is common for that token message to be structured so that the application can recognize it.  If a stray unrelated message lands there the application should ignore it and throw a warning.</em></p>\n<p>You will see a fairly even distribution of messages between the two applications.  If you use more than two applications you might see a wildly <em>un</em>even distribution because queue handles are managed in a stack. As an instance commits its UOW the next instance's handle is at the top of the stack so it gets the next message.  While it is handling that message the instance that just committed will have it's <code>GET</code> placed on top of the stack.  If you have 3 or more listening instances chances are only the first two will see any traffic.</p>\n<p>This assures that messages are processed off the queue one at a time.  It does <em><strong>not</strong></em> assure that you won't get dupes.</p>\n<p>If you do everything under syncpoint, no messages will ever be lost.  However there's a scenario in which a message is retrieved and processed, then the <code>COMMIT</code> call fails.  In that case the transaction is rolled back and the same message becomes available again.  If you are using 1-phase commits and not <a href=\"https://www.ibm.com/docs/en/ibm-mq/9.1?topic=registration-summarizing-xa-calls\" rel=\"nofollow noreferrer\">XA</a>, the processing for that message will not be rolled back.</p>\n<p>The nice thing is that the token message will be under syncpoint too and that fixes the issue in which an orphaned client channel takes a while to release the transaction.  A new connection will get messages which are older than the message held under syncpoint by the orphan transaction.  Eventually the channel agent times out releasing the message back to the queue but effectively changing its position to be <em>behind</em> any messages that were processed while it was sequestered.</p>\n<p>In this scenario the token message is also sequestered so after this type of connection loss message processing temporarily stops and waits for the channel agent to time out.  If that were ever to happen, just issue a <code>STOP CHANNEL</code> command on the instance with the UOW.</p>\n<hr />\n<p><em><strong>Update based on additional question details specific to this answer</strong></em></p>\n<blockquote>\n<p>The queue which holds this token has to be part of some queue manager.\nNow if we have a failover, that control queue will no longer be\naccessible. Which kinda means that that we need another control queue\nready in case of a failover.</p>\n</blockquote>\n<p>The token queue is as available or as unavailable as the application queue. Only one is needed.  If the application requires high availability (HA), then a Multi-Instance QMgr or a hardware high availability cluster should be used.  These share disk so the QMgr that comes up in the failover is the same one the application has been connected to, just at a different physical location.</p>\n<p>If the application needs <a href=\"https://en.wikipedia.org/wiki/Disaster_recovery\" rel=\"nofollow noreferrer\">DR</a>, it's possible to replicate the disk under the QMgr's logs and data directories to a DR site.  However, nothing should be listening on those instances while processing is going on in the primary data center.</p>\n<blockquote>\n<p>The listener instances should know that a failover has initiated so\nthat it can stop listening to the control queue during normal ops and\nswitch over to the secondary. I can't do this using the listener\ninstance alone.</p>\n</blockquote>\n<p>Why not? WebSphere MQ has had reconnectable clients for a really long time and the multi-instance features in v7.0.1 made reconnecting drop-dead simple.  As an administrator, your job is to make sure that no more than one instance of the application and token (not trigger!) queue are available.  During an outage, the client goes into retry without requiring any application code to drive it.  It finds whichever of the instances is up and connects.</p>\n<blockquote>\n<p>The actual producer which puts messages into the queue will have to\nnotify the listener instances to stop listening to the normal ops\ncontrol queue and switch over to the secondary.</p>\n</blockquote>\n<p>The question was about serialization with concurrent consumers.  This is about a design in which producers and consumers have to rendezvous at a common location. Different problem that happens to overlap this one only in that it is complicated somewhat by serialization. Ask a different question if you need to explore topologies.</p>\n<blockquote>\n<p>This token system is not really\nreactive right? It's more of periodic thing. So let's say we don't get\nany messages for a few hours. The listeners will still be constantly\nchecking the queue coz the token message keeps triggering one instance\nafter another.</p>\n</blockquote>\n<p>This does not use triggering. It uses a token (not trigger!) message the way a filesystem or database uses a lock in order to facilitate serialization. Whichever listener gets the token message then does a get with unlimited wait on the application queue.  The other listeners have a get with unlimited wait on the token (not trigger!) queue. Basically, they sit around idle until a message arrives.  Zero reconnections, zero polls, zero CPU cycles.  If you need to know they are alive, let them time out on the application queue once in a while.  This rolls back their UOW on the token queue which passes the token to another listener.</p>\n<blockquote>\n<p>Third would really be the question of inserting the token message.\nDuring first install or during a failback, we'll have that extra\nmanual step of manually inserting this token (since the token would be\nlost in failover sometimes).</p>\n</blockquote>\n<p>Why? Do you experience MQ losing persistent messages under syncpoint often? If so you are doing it wrong. ;-) In a situation with strict serialization requirements there can be only one active instance of a queue. If for some reason there are other instances of the application queue pre-defined other than through disk replication there would be one instance of the token (not trigger!) queue also predefined alongside it and one token (not trigger!) message waiting in each queue. Surely nobody would do such a thing in the face of strict message order requirements, but if they did those queues would surely be get-disabled while not in use.</p>\n<blockquote>\n<p>We can't really make one of the listener\ninstances do it since if a listener instance doesn't find the message\nit kinda means that some other listener instance has the token.</p>\n</blockquote>\n<p>Correct. The listeners <em>could</em> check queue depth, transactions, input handles, etc, but it is generally wise to avoid mixing application logic with control logic.</p>\n<blockquote>\n<p>So\nthis logic has to be separate. And if we actually put some meaningful\ninfo into this token message, it has to be a utility that has to be\ntriggered rather than an insertion through the UI.</p>\n</blockquote>\n<p>Why? Your coders handle structured data in application messages, right? If this is perceived to be significantly more difficult, someone's doing it wrong. ;-)  Write an instance of a formatted token (not trigger!) message to a queue, then offload that to a file. When you need to reinitialize the queue, use Q or QLoad to first clear the queue, then load the file into it. <strong>That</strong> utility would be the one to open the queue for exclusive use, check for depth, check for handles, etc. prior to performing its magic.  When I do this for consulting clients I typically define a service that initializes the queue on MQ startup <em>and</em> also provide a feature in the application GUI for the operations and support staff.  So long as the application managing the token (not trigger) queue gets it for exclusive access during these operations it really doesn't matter how it's done or by how many instances of the control application.</p>\n<p>As a rule I also use the structure in the message to send commands to the listeners.  There's the real token message, and then there's messages that command the application instances to do things. For example, it's really nice to have a non-transactional &quot;ping&quot; capability. I if I drop more ping messages on the token (not trigger!) queue in a single UOW than I have application instances listening, I am guaranteed to contact all of them. In this way I can detect zombies.  Depending on how much instrumentation is required the listeners can react to the ping by providing a status (uptime, messages processed, etc.) in the log, to the console, to an event queue, etc.</p>\n<blockquote>\n<p>I guess the first and third aren't really problems, but just extra\noverhead which wouldn't be needed if we went for a poller\nimplementation.</p>\n</blockquote>\n<p>That's good because this is all pretty standard stuff. The problem lies mainly with the requirements for serialization conflicting with those for HA/DR. What you are looking for is global transactional atomicity to implement a single logical queue across multiple physical locations.  IBM MQ has never attempted to provide that, although the <a href=\"https://en.wikipedia.org/wiki/IBM_WebSphere_Application_Server\" rel=\"nofollow noreferrer\">WebSphere Application Server</a> (WAS) Messaging Engine has.  The closest IBM MQ comes is to use two IBM MQ appliances with memory-to-memory replication of message and transaction data but that is good to only a few miles before light-speed latency begins to significantly impact throughput. It doesn't handle your DR needs.  In fact, <em>nothing</em> short of synchronous replication does that if you want a zero recovery point at the DR datacenter.</p>\n"}],"owner":{"account_id":3444195,"reputation":863,"user_id":2885370,"accept_rate":76,"display_name":"alokraop"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2813,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":33945224,"answer_count":3,"score":3,"last_activity_date":1694522715,"creation_date":1447181283,"question_id":33637289,"body_markdown":"I have a queue of messages which need sequential processing. Now this processing involves calling a Web service (which might be down sometimes) so I have to make the message retrieval transactional. As far as I know, when there&#39;s any exception midway, the whole transaction rolls back and the message isn&#39;t lost right?\r\n\r\nBut what&#39;s also needed is high availability (HA) on the message consumer, so I have two instances of the listener listening in on my queue. Now will the transaction ensure that a second message isn&#39;t retrieved by the other instance of the listener until the first one is completely done processing the first message? Or will I have to do something more to make sure that no message is sent out of the queue until the one before that is fully done processing.\r\n\r\nIf any additional configuration is needed, would it be in the MQ or on the listener?\r\n\r\n&lt;hr/&gt;\r\n\r\nI&#39;m using [WebSphere MQ][1] as the message broker and [Spring][2] integration for retrieving the messages.\r\n\r\nWith the token thing, the first concern would be high availability on the queue manager itself. The queue which holds this token has to be part of some queue manager. Now, if we have a failover, that controls the queue will no longer be accessible. Which kind of means that that we need another control queue ready in case of a failover.\r\n\r\nWe can&#39;t have listeners listening in on that DR control queue during normal operations though. (Let&#39;s say we have a mechanism to actually make sure that the &quot;data&quot; queue is perfectly replicated). The listener instances should know that a failover has been initiated, so that it can stop listening to the control queue during normal operations and switch over to the secondary. I can&#39;t do this using the listener instance alone. The actual producer which puts messages into the queue will have to notify the listener instances to stop listening to the normal operations control queue and switch over to the secondary.\r\n\r\nThis would be kind of tricky if there&#39;s any intermediate connection problem (and the normal operations queue manager isn&#39;t really down), but that&#39;s too much of a corner case.\r\n\r\nWith high availability of the control queue taken care of, we kind of have the same problem as the nonsharable setting during low load scenarios. Now we have occasional spikes in load, but there are slump periods (during the night and stuff). This token system is not really reactive, right? It&#39;s more of periodic thing. So let&#39;s say we don&#39;t get any messages for a few hours. The listeners will still be constantly checking the queue because the token message keeps triggering one instance after another. Which more or less makes it a poller, really. I might as well have multiple listener instances each polling at like different times of the hour, right? It&#39;s not really event driven per se.\r\n\r\nThird would really be the question of inserting the token message. During first install or during a failback, we&#39;ll have that extra manual step of manually inserting this token (since the token would be lost in failover sometimes). We can&#39;t really make one of the listener instances do it since if a listener instance doesn&#39;t find the message it kind of means that some other listener instance has the token. So this logic has to be separate. And if we actually put some meaningful information into this token message, it has to be a utility that has to be triggered rather than an insertion through the UI.\r\n\r\nI guess the first and third aren&#39;t really problems, but just extra overhead which wouldn&#39;t be needed if we went for a poller implementation. The second one is what&#39;s bothering me most.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IBM_MQ\r\n  [2]: https://en.wikipedia.org/wiki/Spring_Framework\r\n","title":"How do JMS transactions work with concurrent consumers?","body":"<p>I have a queue of messages which need sequential processing. Now this processing involves calling a Web service (which might be down sometimes) so I have to make the message retrieval transactional. As far as I know, when there's any exception midway, the whole transaction rolls back and the message isn't lost right?</p>\n<p>But what's also needed is high availability (HA) on the message consumer, so I have two instances of the listener listening in on my queue. Now will the transaction ensure that a second message isn't retrieved by the other instance of the listener until the first one is completely done processing the first message? Or will I have to do something more to make sure that no message is sent out of the queue until the one before that is fully done processing.</p>\n<p>If any additional configuration is needed, would it be in the MQ or on the listener?</p>\n<hr/>\n<p>I'm using <a href=\"https://en.wikipedia.org/wiki/IBM_MQ\" rel=\"nofollow noreferrer\">WebSphere MQ</a> as the message broker and <a href=\"https://en.wikipedia.org/wiki/Spring_Framework\" rel=\"nofollow noreferrer\">Spring</a> integration for retrieving the messages.</p>\n<p>With the token thing, the first concern would be high availability on the queue manager itself. The queue which holds this token has to be part of some queue manager. Now, if we have a failover, that controls the queue will no longer be accessible. Which kind of means that that we need another control queue ready in case of a failover.</p>\n<p>We can't have listeners listening in on that DR control queue during normal operations though. (Let's say we have a mechanism to actually make sure that the &quot;data&quot; queue is perfectly replicated). The listener instances should know that a failover has been initiated, so that it can stop listening to the control queue during normal operations and switch over to the secondary. I can't do this using the listener instance alone. The actual producer which puts messages into the queue will have to notify the listener instances to stop listening to the normal operations control queue and switch over to the secondary.</p>\n<p>This would be kind of tricky if there's any intermediate connection problem (and the normal operations queue manager isn't really down), but that's too much of a corner case.</p>\n<p>With high availability of the control queue taken care of, we kind of have the same problem as the nonsharable setting during low load scenarios. Now we have occasional spikes in load, but there are slump periods (during the night and stuff). This token system is not really reactive, right? It's more of periodic thing. So let's say we don't get any messages for a few hours. The listeners will still be constantly checking the queue because the token message keeps triggering one instance after another. Which more or less makes it a poller, really. I might as well have multiple listener instances each polling at like different times of the hour, right? It's not really event driven per se.</p>\n<p>Third would really be the question of inserting the token message. During first install or during a failback, we'll have that extra manual step of manually inserting this token (since the token would be lost in failover sometimes). We can't really make one of the listener instances do it since if a listener instance doesn't find the message it kind of means that some other listener instance has the token. So this logic has to be separate. And if we actually put some meaningful information into this token message, it has to be a utility that has to be triggered rather than an insertion through the UI.</p>\n<p>I guess the first and third aren't really problems, but just extra overhead which wouldn't be needed if we went for a poller implementation. The second one is what's bothering me most.</p>\n"},{"tags":["java","functional-interface"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1694522306,"post_id":77089153,"comment_id":135899415,"body_markdown":"Are all the getters strings?  Your functional interface is not a bad solution, but it sounds like you should be writing `Function&lt;MyInterface, String&gt;` everywhere instead of `Function`.","body":"Are all the getters strings?  Your functional interface is not a bad solution, but it sounds like you should be writing <code>Function&lt;MyInterface, String&gt;</code> everywhere instead of <code>Function</code>."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694522605,"post_id":77089153,"comment_id":135899489,"body_markdown":"&quot;I also do not want to do Reflections&quot;. Good call. Never use reflection if you don&#39;t have to.","body":"&quot;I also do not want to do Reflections&quot;. Good call. Never use reflection if you don&#39;t have to."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694523522,"post_id":77089153,"comment_id":135899725,"body_markdown":"The real problem here is the raw `Function` types. Add the correct type parameters (`&lt;MyInterface, String&gt;`) and you should be fine.","body":"The real problem here is the raw <code>Function</code> types. Add the correct type parameters (<code>&lt;MyInterface, String&gt;</code>) and you should be fine."}],"answers":[{"comments":[{"owner":{"account_id":5991462,"reputation":13,"user_id":4707454,"display_name":"MathiS"},"score":0,"creation_date":1694522643,"post_id":77089233,"comment_id":135899499,"body_markdown":"There are just too many getters, about 30 of them. A list seemed appropriate.","body":"There are just too many getters, about 30 of them. A list seemed appropriate."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694522685,"post_id":77089233,"comment_id":135899512,"body_markdown":"But if you&#39;re hardcoding them anyway, it doesn&#39;t matter if you put them in a list or in a method call. Either way, you&#39;re hardcoding 30 getter calls.","body":"But if you&#39;re hardcoding them anyway, it doesn&#39;t matter if you put them in a list or in a method call. Either way, you&#39;re hardcoding 30 getter calls."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694522520,"creation_date":1694522520,"answer_id":77089233,"question_id":77089153,"body_markdown":"Why put all the getters in a list? If you&#39;re hardcoding them anyway, might as well write out the checks:\r\n\r\n```\r\ncheck(MyInterface::getA, obj1, obj2)\r\ncheck(MyInterface::getB, obj1, obj2)\r\n\r\nvoid &lt;T&gt; check(Function&lt;MyInterface, T&gt; getter, MyInterface obj1, MyInterface obj2) {\r\n  if (getter.apply(obj1).equals(getter.apply(obj2)) {\r\n    // ...\r\n  }\r\n}\r\n```","title":"How to call a list of pre-defined interface methods on objects in Java?","body":"<p>Why put all the getters in a list? If you're hardcoding them anyway, might as well write out the checks:</p>\n<pre><code>check(MyInterface::getA, obj1, obj2)\ncheck(MyInterface::getB, obj1, obj2)\n\nvoid &lt;T&gt; check(Function&lt;MyInterface, T&gt; getter, MyInterface obj1, MyInterface obj2) {\n  if (getter.apply(obj1).equals(getter.apply(obj2)) {\n    // ...\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":5991462,"reputation":13,"user_id":4707454,"display_name":"MathiS"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77089233,"answer_count":1,"score":1,"last_activity_date":1694522520,"creation_date":1694521973,"question_id":77089153,"body_markdown":"Here&#39;s my problem. I have an interface with several getter methods and an implementation class.\r\n\r\n```\r\nClass MyInterface {\r\n    String getA();\r\n    String getB();\r\n    ...\r\n}\r\n\r\nClass MyClass implements MyInterface {\r\n}\r\n```\r\n\r\nI need to write some logic this to compare the values of the get methods between two objects of MyClass.\r\n\r\n```\r\nstatic List&lt;Function&gt; getters = List.of(MyInterface::getA, MyInterface::getB, ...); //this is hard-coded\r\n\r\nfor(Function getter : getters) {\r\n    if(getter.apply(obj1).equals(getter.apply(obj2))\r\n        //do something\r\n}\r\n```\r\n\r\nHowever I try, I cant seem to get the syntax correct, and satisfy the &quot;type&quot; Gods. Please help.\r\n\r\nWith a @FunctionalInterface, I was able to get the List defined, although as a member variable and not static, like so.\r\n\r\n```\r\n@FunctionalInterface\r\ninterface GetterFunction {\r\n    String get();\r\n}\r\n\r\nList&lt;GetterFunction&gt; allGetters = List.of(this::getA, this::getB, ...)\r\n```\r\n\r\nBut this seems ugly and feels like there is a better way.\r\n\r\nI also do not want to do Reflections.","title":"How to call a list of pre-defined interface methods on objects in Java?","body":"<p>Here's my problem. I have an interface with several getter methods and an implementation class.</p>\n<pre><code>Class MyInterface {\n    String getA();\n    String getB();\n    ...\n}\n\nClass MyClass implements MyInterface {\n}\n</code></pre>\n<p>I need to write some logic this to compare the values of the get methods between two objects of MyClass.</p>\n<pre><code>static List&lt;Function&gt; getters = List.of(MyInterface::getA, MyInterface::getB, ...); //this is hard-coded\n\nfor(Function getter : getters) {\n    if(getter.apply(obj1).equals(getter.apply(obj2))\n        //do something\n}\n</code></pre>\n<p>However I try, I cant seem to get the syntax correct, and satisfy the &quot;type&quot; Gods. Please help.</p>\n<p>With a @FunctionalInterface, I was able to get the List defined, although as a member variable and not static, like so.</p>\n<pre><code>@FunctionalInterface\ninterface GetterFunction {\n    String get();\n}\n\nList&lt;GetterFunction&gt; allGetters = List.of(this::getA, this::getB, ...)\n</code></pre>\n<p>But this seems ugly and feels like there is a better way.</p>\n<p>I also do not want to do Reflections.</p>\n"},{"tags":["java","primefaces","java-ee-8"],"comments":[{"owner":{"account_id":4166540,"reputation":2310,"user_id":3415398,"display_name":"tandraschko"},"score":0,"creation_date":1694587833,"post_id":77089215,"comment_id":135909167,"body_markdown":"It seems you miss the &quot;Update&quot; attribute on p:ajax.","body":"It seems you miss the &quot;Update&quot; attribute on p:ajax."},{"owner":{"account_id":4166540,"reputation":2310,"user_id":3415398,"display_name":"tandraschko"},"score":0,"creation_date":1694595810,"post_id":77089215,"comment_id":135910687,"body_markdown":"Also your inputText has no parent form","body":"Also your inputText has no parent form"}],"owner":{"account_id":9848356,"reputation":23,"user_id":7295149,"display_name":"audacity363"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694522432,"creation_date":1694522432,"question_id":77089215,"body_markdown":"I am currently trying to get familiar with Java Faces (or the hole Java EE universe in general) and wrote a small example with the PrimeFaces tree and dialog components.\r\nBasically I want to select a entry of the displayed tree and show the details of the underlying data object in a dialog. \r\n\r\nThe tree gets displayed, I can select an entry, the onSelect handler in my bean gets executed via a Ajax call and the dialog shows up. Unfortunately the inputText components, in the dialog, are empty although the connected object on the server side is valid and it&#39;s attributes are filled with the selected tree entry, which I have verified via a simple `System.out.println`. \r\n\r\nI would have expected that the roudtrip to the server, via the ajax call, sends the changed values (on the server side) back to the client, which apparently is not the case according to the network tab in the developer tools of the browser.\r\n\r\n\r\nTestClass.java:\r\n```\r\npublic class TestClass {\r\n\tprivate String name;\r\n\tprivate String otherAttribute;\r\n\t\r\n\tpublic TestClass(String name, String otherAttribute) {\r\n\t\tthis.name = name;\r\n\t\tthis.otherAttribute = otherAttribute;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic String getOtherAttribute() {\r\n\t\treturn otherAttribute;\r\n\t}\r\n\r\n\tpublic void setOtherAttribute(String otherAttribute) {\r\n\t\tthis.otherAttribute = otherAttribute;\r\n\t}\r\n\t\r\n\tpublic String toString() {\r\n\t\treturn new String(&quot;TestClass(name=&quot; + this.name + &quot;, otherAttribute=&quot; + this.otherAttribute + &quot;)&quot;);\r\n\t}\r\n}\r\n```\r\n\r\nTestService.java:\r\n```\r\n@Named\r\n@ApplicationScoped\r\npublic class TestService {\r\n\tpublic TreeNode&lt;TestClass&gt; createTestTree() {\r\n\t\tTreeNode&lt;TestClass&gt; root = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;root&quot;, null), null);\r\n\t\t\r\n\t\tTreeNode&lt;TestClass&gt; entry1 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry1&quot;, &quot;attribute of entry1&quot;), root);\r\n\t\tTreeNode&lt;TestClass&gt; entry2 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry2&quot;, &quot;attribute of entry2&quot;), root);\r\n\t\tTreeNode&lt;TestClass&gt; entry3 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry3&quot;, &quot;attribute of entry3&quot;), root);\r\n\t\t\r\n\t\tTreeNode&lt;TestClass&gt; subentry11 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry11&quot;, &quot;subentry 1 attribute of entry1&quot;), entry1);\r\n\t\tTreeNode&lt;TestClass&gt; subentry12 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry12&quot;, &quot;subentry 2 attribute of entry1&quot;), entry1);\r\n\t\tTreeNode&lt;TestClass&gt; subentry13 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry13&quot;, &quot;subentry 3 attribute of entry1&quot;), entry1);\r\n\t\t\r\n\t\tTreeNode&lt;TestClass&gt; subentry21 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry21&quot;, &quot;subentry 1 attribute of entry2&quot;), entry2);\r\n\t\tTreeNode&lt;TestClass&gt; subentry22 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry22&quot;, &quot;subentry 2 attribute of entry2&quot;), entry2);\r\n\t\t\r\n\t\tTreeNode&lt;TestClass&gt; subentry31 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry31&quot;, &quot;subentry 1 attribute of entry3&quot;), entry3);\r\n\t\t\r\n\t\treturn root;\r\n\t}\r\n}\r\n```\r\n\r\nTestBean.java:\r\n```\r\n@Named(&quot;testBean&quot;)\r\n@ViewScoped\r\npublic class TestBean implements Serializable {\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = -4448740441931801702L;\r\n\r\n\t@Inject\r\n\tTestService treeService;\r\n\t\r\n\tprivate TreeNode&lt;TestClass&gt; root;\r\n\tprivate TestClass selectedNode;\r\n\t\r\n\t@PostConstruct\r\n\tprivate void init() {\r\n\t\tthis.root = this.treeService.createTestTree();\r\n\t}\r\n\r\n\tpublic void onTreeNodeSelect(NodeSelectEvent event) {\r\n\t\tSystem.out.println(&quot;NodeSelectEvent: &quot; + event);\r\n\t\tthis.selectedNode = (TestClass)event.getTreeNode().getData();\r\n\t\tSystem.out.println(&quot;Selected Node&quot; + this.selectedNode);\r\n\t\tSystem.out.println(&quot;Showing dialog&quot;);\r\n\t\tPrimeFaces.current().executeScript(&quot;PF(&#39;treeNodeEditor&#39;).show()&quot;);\r\n\t}\r\n\r\n\tpublic TreeNode&lt;TestClass&gt; getRoot() {\r\n\t\treturn root;\r\n\t}\r\n\r\n\tpublic void setRoot(TreeNode&lt;TestClass&gt; root) {\r\n\t\tthis.root = root;\r\n\t}\r\n\r\n\tpublic TestClass getSelectedNode() {\r\n\t\treturn selectedNode;\r\n\t}\r\n\r\n\tpublic void setSelectedNode(TestClass selectedNode) {\r\n\t\tthis.selectedNode = selectedNode;\r\n\t}\r\n}\r\n```\r\n\r\nindex.xhtml:\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n    \t\t\txmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;\r\n    \t\t\txmlns:h=&quot;http://xmlns.jcp.org/jsf/html&quot;\r\n    \t\t\txmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\r\n    \t\t\txmlns:c=&quot;http://xmlns.jcp.org/jsp/jstl/core&quot;\r\n    \t\t\txmlns:p=&quot;http://primefaces.org/ui&quot;&gt;\r\n\t&lt;h:head&gt;\r\n\t\t&lt;title&gt;Tree test&lt;/title&gt;\r\n\t&lt;/h:head&gt;\r\n\t&lt;h:body&gt;\r\n\t\t&lt;div class=&quot;grid&quot;&gt;\r\n\t\t\t&lt;div class=&quot;col-12&quot;&gt;\r\n\t\t\t\t&lt;h:form&gt;\t\r\n\t\t\t\t\t&lt;p:tree value=&quot;#{testBean.root}&quot; var=&quot;node&quot; selectionMode=&quot;single&quot;&gt;\r\n\t\t\t\t\t\t&lt;p:ajax event=&quot;select&quot; listener=&quot;#{testBean.onTreeNodeSelect}&quot;&gt;&lt;/p:ajax&gt;\r\n\t\t\t\t\t\t&lt;p:treeNode&gt;\r\n\t\t\t\t\t\t\t&lt;h:outputText value=&quot;#{node.name}&quot;&gt;&lt;/h:outputText&gt;\r\n\t\t\t\t\t\t&lt;/p:treeNode&gt;\r\n\t\t\t\t\t&lt;/p:tree&gt;\r\n\t\t\t\t&lt;/h:form&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/div&gt;\r\n\t\t&lt;p:dialog widgetVar=&quot;treeNodeEditor&quot;&gt;\r\n\t\t\t&lt;div class=&quot;grid&quot;&gt;\r\n\t\t\t\t&lt;div class=&quot;col-6&quot;&gt;\r\n\t\t\t\t\t&lt;p:outputLabel for=&quot;@next&quot; value=&quot;Name&quot;&gt;&lt;/p:outputLabel&gt;\r\n\t\t\t\t\t&lt;p:inputText style=&quot;width: 100%&quot; value=&quot;#{testBean.selectedNode.name}&quot;&gt;&lt;/p:inputText&gt;\r\n\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t&lt;div class=&quot;col-6&quot;&gt;\r\n\t\t\t\t\t&lt;p:outputLabel for=&quot;@next&quot; value=&quot;Attribute&quot;&gt;&lt;/p:outputLabel&gt;\r\n\t\t\t\t\t&lt;p:inputText style=&quot;width: 100%&quot; value=&quot;#{testBean.selectedNode.otherAttribute}&quot;&gt;&lt;/p:inputText&gt;\r\n\t\t\t\t&lt;/div&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/p:dialog&gt;\r\n\t&lt;/h:body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n","title":"Java Faces - Value expressions is empty","body":"<p>I am currently trying to get familiar with Java Faces (or the hole Java EE universe in general) and wrote a small example with the PrimeFaces tree and dialog components.\nBasically I want to select a entry of the displayed tree and show the details of the underlying data object in a dialog.</p>\n<p>The tree gets displayed, I can select an entry, the onSelect handler in my bean gets executed via a Ajax call and the dialog shows up. Unfortunately the inputText components, in the dialog, are empty although the connected object on the server side is valid and it's attributes are filled with the selected tree entry, which I have verified via a simple <code>System.out.println</code>.</p>\n<p>I would have expected that the roudtrip to the server, via the ajax call, sends the changed values (on the server side) back to the client, which apparently is not the case according to the network tab in the developer tools of the browser.</p>\n<p>TestClass.java:</p>\n<pre><code>public class TestClass {\n    private String name;\n    private String otherAttribute;\n    \n    public TestClass(String name, String otherAttribute) {\n        this.name = name;\n        this.otherAttribute = otherAttribute;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getOtherAttribute() {\n        return otherAttribute;\n    }\n\n    public void setOtherAttribute(String otherAttribute) {\n        this.otherAttribute = otherAttribute;\n    }\n    \n    public String toString() {\n        return new String(&quot;TestClass(name=&quot; + this.name + &quot;, otherAttribute=&quot; + this.otherAttribute + &quot;)&quot;);\n    }\n}\n</code></pre>\n<p>TestService.java:</p>\n<pre><code>@Named\n@ApplicationScoped\npublic class TestService {\n    public TreeNode&lt;TestClass&gt; createTestTree() {\n        TreeNode&lt;TestClass&gt; root = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;root&quot;, null), null);\n        \n        TreeNode&lt;TestClass&gt; entry1 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry1&quot;, &quot;attribute of entry1&quot;), root);\n        TreeNode&lt;TestClass&gt; entry2 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry2&quot;, &quot;attribute of entry2&quot;), root);\n        TreeNode&lt;TestClass&gt; entry3 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;entry3&quot;, &quot;attribute of entry3&quot;), root);\n        \n        TreeNode&lt;TestClass&gt; subentry11 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry11&quot;, &quot;subentry 1 attribute of entry1&quot;), entry1);\n        TreeNode&lt;TestClass&gt; subentry12 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry12&quot;, &quot;subentry 2 attribute of entry1&quot;), entry1);\n        TreeNode&lt;TestClass&gt; subentry13 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry13&quot;, &quot;subentry 3 attribute of entry1&quot;), entry1);\n        \n        TreeNode&lt;TestClass&gt; subentry21 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry21&quot;, &quot;subentry 1 attribute of entry2&quot;), entry2);\n        TreeNode&lt;TestClass&gt; subentry22 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry22&quot;, &quot;subentry 2 attribute of entry2&quot;), entry2);\n        \n        TreeNode&lt;TestClass&gt; subentry31 = new DefaultTreeNode&lt;TestClass&gt;(new TestClass(&quot;subentry31&quot;, &quot;subentry 1 attribute of entry3&quot;), entry3);\n        \n        return root;\n    }\n}\n</code></pre>\n<p>TestBean.java:</p>\n<pre><code>@Named(&quot;testBean&quot;)\n@ViewScoped\npublic class TestBean implements Serializable {\n    \n    /**\n     * \n     */\n    private static final long serialVersionUID = -4448740441931801702L;\n\n    @Inject\n    TestService treeService;\n    \n    private TreeNode&lt;TestClass&gt; root;\n    private TestClass selectedNode;\n    \n    @PostConstruct\n    private void init() {\n        this.root = this.treeService.createTestTree();\n    }\n\n    public void onTreeNodeSelect(NodeSelectEvent event) {\n        System.out.println(&quot;NodeSelectEvent: &quot; + event);\n        this.selectedNode = (TestClass)event.getTreeNode().getData();\n        System.out.println(&quot;Selected Node&quot; + this.selectedNode);\n        System.out.println(&quot;Showing dialog&quot;);\n        PrimeFaces.current().executeScript(&quot;PF('treeNodeEditor').show()&quot;);\n    }\n\n    public TreeNode&lt;TestClass&gt; getRoot() {\n        return root;\n    }\n\n    public void setRoot(TreeNode&lt;TestClass&gt; root) {\n        this.root = root;\n    }\n\n    public TestClass getSelectedNode() {\n        return selectedNode;\n    }\n\n    public void setSelectedNode(TestClass selectedNode) {\n        this.selectedNode = selectedNode;\n    }\n}\n</code></pre>\n<p>index.xhtml:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n                xmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;\n                xmlns:h=&quot;http://xmlns.jcp.org/jsf/html&quot;\n                xmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\n                xmlns:c=&quot;http://xmlns.jcp.org/jsp/jstl/core&quot;\n                xmlns:p=&quot;http://primefaces.org/ui&quot;&gt;\n    &lt;h:head&gt;\n        &lt;title&gt;Tree test&lt;/title&gt;\n    &lt;/h:head&gt;\n    &lt;h:body&gt;\n        &lt;div class=&quot;grid&quot;&gt;\n            &lt;div class=&quot;col-12&quot;&gt;\n                &lt;h:form&gt;    \n                    &lt;p:tree value=&quot;#{testBean.root}&quot; var=&quot;node&quot; selectionMode=&quot;single&quot;&gt;\n                        &lt;p:ajax event=&quot;select&quot; listener=&quot;#{testBean.onTreeNodeSelect}&quot;&gt;&lt;/p:ajax&gt;\n                        &lt;p:treeNode&gt;\n                            &lt;h:outputText value=&quot;#{node.name}&quot;&gt;&lt;/h:outputText&gt;\n                        &lt;/p:treeNode&gt;\n                    &lt;/p:tree&gt;\n                &lt;/h:form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;p:dialog widgetVar=&quot;treeNodeEditor&quot;&gt;\n            &lt;div class=&quot;grid&quot;&gt;\n                &lt;div class=&quot;col-6&quot;&gt;\n                    &lt;p:outputLabel for=&quot;@next&quot; value=&quot;Name&quot;&gt;&lt;/p:outputLabel&gt;\n                    &lt;p:inputText style=&quot;width: 100%&quot; value=&quot;#{testBean.selectedNode.name}&quot;&gt;&lt;/p:inputText&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;col-6&quot;&gt;\n                    &lt;p:outputLabel for=&quot;@next&quot; value=&quot;Attribute&quot;&gt;&lt;/p:outputLabel&gt;\n                    &lt;p:inputText style=&quot;width: 100%&quot; value=&quot;#{testBean.selectedNode.otherAttribute}&quot;&gt;&lt;/p:inputText&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/p:dialog&gt;\n    &lt;/h:body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","cloning"],"answers":[{"comments":[{"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"score":2,"creation_date":1492755303,"post_id":43534353,"comment_id":74122425,"body_markdown":"the assignment `course2 = course1` is no shallow copy, it&#39;s just reference. shallow or deep refers to the way that the object properties of a copied object are managed","body":"the assignment <code>course2 = course1</code> is no shallow copy, it&#39;s just reference. shallow or deep refers to the way that the object properties of a copied object are managed"}],"tags":[],"owner":{"account_id":9950285,"reputation":1410,"user_id":7363235,"display_name":"D M"},"comment_count":1,"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1492751187,"creation_date":1492751187,"answer_id":43534353,"question_id":43534163,"body_markdown":"To do a shallow copy, you just set one variable equal to another.  A shallow copy means that the original and the copy are really the same object.  If you have:\r\n\r\n    course2 = course1;\r\n    course2.name = &quot;math&quot;;\r\n\r\nthen `course1`&#39;s name will also change to &quot;math&quot;, because course1 and course2 are the same object.\r\n\r\nTo do a deep clone, you must copy everything in the object, instead of the object itself.  \r\n\r\n    course2 = new Course();\r\n    course2.name = course1.name;\r\n    //... \r\n    course2.name = &quot;math&quot;;\r\n\r\nIn this case, course1&#39;s name will not change, because `course2` itself was made as a new object, and was not set to `course1`.\r\n","title":"How to shallow clone and deep clone in java?","body":"<p>To do a shallow copy, you just set one variable equal to another.  A shallow copy means that the original and the copy are really the same object.  If you have:</p>\n\n<pre><code>course2 = course1;\ncourse2.name = \"math\";\n</code></pre>\n\n<p>then <code>course1</code>'s name will also change to \"math\", because course1 and course2 are the same object.</p>\n\n<p>To do a deep clone, you must copy everything in the object, instead of the object itself.  </p>\n\n<pre><code>course2 = new Course();\ncourse2.name = course1.name;\n//... \ncourse2.name = \"math\";\n</code></pre>\n\n<p>In this case, course1's name will not change, because <code>course2</code> itself was made as a new object, and was not set to <code>course1</code>.</p>\n"},{"tags":[],"owner":{"account_id":4999380,"reputation":197,"user_id":4018868,"display_name":"puneet_0303"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1492751850,"creation_date":1492751850,"answer_id":43534459,"question_id":43534163,"body_markdown":"ShallowCopy:\r\nThe shallow copy of an object will have exact copy of all the fields of original object. If original object has any references to other objects as fields, then only references of those objects are copied into clone object, copy of those objects are not created.\r\n\r\nDeep Copy:\r\nDeep copy of an object will have exact copy of all the fields of original object just like shallow copy. But in additional, if original object has any references to other objects as fields, then copy of those objects are also created by calling clone() method on them\r\n\r\nAs the course entity does not have any object refrences therefore its cloning down using defalut clone method.\r\nStudent Entity as the refrences to Date , Course  , Address we need to override clone method.\r\nBelow is the sample code:-\r\n\r\n\tpublic static class Address implements Cloneable{\r\n\t    public String town = null;\r\n\t    public String street = null;\r\n\t    public int postCode = 0;\r\n\t    public int houseNumber = 0;\r\n\t    \r\n\t    public Address(String town , String street ,int postCode , int houseNumber){\r\n\t    \tthis.town = town;\r\n\t    \tthis.street = street;\r\n\t    \tthis.postCode = postCode;\r\n\t    \tthis.houseNumber = houseNumber;\r\n\t    }\r\n\t    public Address(){\r\n\t    }\r\n\t    \r\n\t    //Default version of clone() method. It creates shallow copy of an object.\r\n\t    \r\n\t    protected Object clone() throws CloneNotSupportedException\r\n\t    {\r\n\t        return super.clone();\r\n\t    }\r\n\t}\r\n\t\r\n\tpublic static class Course implements Cloneable{\r\n\t    public String number;\r\n\t    public String name;\r\n\r\n\t    public Course(){\r\n\t        number = null;\r\n\t        name = null;\r\n\t    }\r\n\t    \r\n\t    public Course(String number , String name){\r\n\t        this.number = number;\r\n\t        this.name = name;\r\n\t    }\r\n\t    \r\n\t  //Default version of clone() method. It creates shallow copy of an object.\r\n\t    \r\n\t    protected Object clone() throws CloneNotSupportedException\r\n\t    {\r\n\t        return super.clone();\r\n\t    }\r\n\t    \r\n\t} \r\n\t\r\n\t public static class Student implements Cloneable{\r\n\t        public Date dob;\r\n\t        public Course course = new Course();\r\n\t        public Address address = new Address();\r\n\t        \r\n\r\n\r\n\t        public Student(){\r\n\t            dob = null;\r\n\t            course.name = null;\r\n\t            course.number = null;\r\n\t            address.town = null;\r\n\t            address.street = null;\r\n\t            address.postCode = 0;\r\n\t            address.houseNumber = 0;\r\n\r\n\t        }\r\n\t        \r\n\t        public Student(Date dob , Course course , Address address){\r\n\t            this.dob = dob;\r\n\t            this.course = course;\r\n\t            this.address = address;\r\n\t        }\r\n\t        \r\n\t        protected Object clone() throws CloneNotSupportedException\r\n\t        {\r\n\t            Student student = (Student) super.clone();\r\n\t     \r\n\t            student.course = (Course) course.clone();\r\n\t            student.address = (Address) address.clone();\r\n\t            student.dob = (Date) dob.clone();\r\n\t     \r\n\t            return student;\r\n\t        }\r\n\t    }\r\n\r\n\r\n","title":"How to shallow clone and deep clone in java?","body":"<p>ShallowCopy:\nThe shallow copy of an object will have exact copy of all the fields of original object. If original object has any references to other objects as fields, then only references of those objects are copied into clone object, copy of those objects are not created.</p>\n\n<p>Deep Copy:\nDeep copy of an object will have exact copy of all the fields of original object just like shallow copy. But in additional, if original object has any references to other objects as fields, then copy of those objects are also created by calling clone() method on them</p>\n\n<p>As the course entity does not have any object refrences therefore its cloning down using defalut clone method.\nStudent Entity as the refrences to Date , Course  , Address we need to override clone method.\nBelow is the sample code:-</p>\n\n<pre><code>public static class Address implements Cloneable{\n    public String town = null;\n    public String street = null;\n    public int postCode = 0;\n    public int houseNumber = 0;\n\n    public Address(String town , String street ,int postCode , int houseNumber){\n        this.town = town;\n        this.street = street;\n        this.postCode = postCode;\n        this.houseNumber = houseNumber;\n    }\n    public Address(){\n    }\n\n    //Default version of clone() method. It creates shallow copy of an object.\n\n    protected Object clone() throws CloneNotSupportedException\n    {\n        return super.clone();\n    }\n}\n\npublic static class Course implements Cloneable{\n    public String number;\n    public String name;\n\n    public Course(){\n        number = null;\n        name = null;\n    }\n\n    public Course(String number , String name){\n        this.number = number;\n        this.name = name;\n    }\n\n  //Default version of clone() method. It creates shallow copy of an object.\n\n    protected Object clone() throws CloneNotSupportedException\n    {\n        return super.clone();\n    }\n\n} \n\n public static class Student implements Cloneable{\n        public Date dob;\n        public Course course = new Course();\n        public Address address = new Address();\n\n\n\n        public Student(){\n            dob = null;\n            course.name = null;\n            course.number = null;\n            address.town = null;\n            address.street = null;\n            address.postCode = 0;\n            address.houseNumber = 0;\n\n        }\n\n        public Student(Date dob , Course course , Address address){\n            this.dob = dob;\n            this.course = course;\n            this.address = address;\n        }\n\n        protected Object clone() throws CloneNotSupportedException\n        {\n            Student student = (Student) super.clone();\n\n            student.course = (Course) course.clone();\n            student.address = (Address) address.clone();\n            student.dob = (Date) dob.clone();\n\n            return student;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2418909,"reputation":2174,"user_id":2112382,"accept_rate":67,"display_name":"vijayraj34"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492752456,"creation_date":1492752456,"answer_id":43534568,"question_id":43534163,"body_markdown":"In **ShallowCopy** only reference value is copied, so if you make any changes to it will directly affect the original copy of that object. &lt;br&gt;&lt;br&gt;\nBut in **DeepCopy** you have to create a new instance of that object and initialize it with the values of the original object and return the newly initialized object.\n\nYou have to do this inside the clone method. So that when clone is called deepcopy is performed.","title":"How to shallow clone and deep clone in java?","body":"<p>In <strong>ShallowCopy</strong> only reference value is copied, so if you make any changes to it will directly affect the original copy of that object. <br><br>\nBut in <strong>DeepCopy</strong> you have to create a new instance of that object and initialize it with the values of the original object and return the newly initialized object.</p>\n\n<p>You have to do this inside the clone method. So that when clone is called deepcopy is performed.</p>\n"},{"tags":[],"owner":{"account_id":29315054,"reputation":21,"user_id":22460001,"display_name":"rizkovs1149"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694522122,"creation_date":1694522122,"answer_id":77089170,"question_id":43534163,"body_markdown":"Take a look to [sugar-cubes-cloner](https://github.com/sugar-cubes/sugar-cubes-cloner) library. It is very fast and well documented. It also allows the developer to configure the cloning process very flexible on the level of classes, fields and objects.\r\n\r\nIn your case:\r\n```java\r\nCloner cloner = Cloners.builder()\r\n  .shallow(Course.class)\r\n  .build();\r\nStudent clone = cloner.clone(student);\r\n```","title":"How to shallow clone and deep clone in java?","body":"<p>Take a look to <a href=\"https://github.com/sugar-cubes/sugar-cubes-cloner\" rel=\"nofollow noreferrer\">sugar-cubes-cloner</a> library. It is very fast and well documented. It also allows the developer to configure the cloning process very flexible on the level of classes, fields and objects.</p>\n<p>In your case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Cloner cloner = Cloners.builder()\n  .shallow(Course.class)\n  .build();\nStudent clone = cloner.clone(student);\n</code></pre>\n"}],"owner":{"account_id":7988931,"reputation":811,"user_id":6027397,"accept_rate":61,"display_name":"oneman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3435,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1694522122,"creation_date":1492750200,"question_id":43534163,"body_markdown":"I have three classes inside a package `pack1`. The three classes are `classA`  `classB` and `classC`.\r\n\r\n`classA`\r\n\r\n    public class Address {\r\n    \tpublic String town = null;\r\n    \tpublic String street = null;\r\n    \tpublic int postCode = 0;\r\n    \tpublic int houseNumber = 0;\r\n    }\r\n\r\n\r\n\r\n`classB`\r\n\r\n    public class Course {\r\n    \tpublic String number;\r\n    \tpublic String name;\r\n    \t\r\n    \tpublic Course(){\r\n    \t\tnumber = null;\r\n    \t\tname = null;\r\n    \t}\r\n\r\n`classC`\r\n\r\n    public class Student {\r\n    \tpublic Date dob;\r\n    \tpublic Course course = new Course();\r\n    \tpublic Address address = new Address();\r\n    \t\r\n    \t\r\n    \tpublic Student(){\r\n    \t\tdob = null;\r\n    \t\tcourse.name = null;\r\n    \t\tcourse.number = null;\r\n    \t\taddress.town = null;\r\n    \t\taddress.street = null;\r\n    \t\taddress.postCode = 0;\r\n    \t\taddress.houseNumber = 0;\r\n            course.name = null;\r\n            course.number = null;\r\n    \t\t\r\n    \t}\r\n\r\nI&#39;m wanting to know how I deep clone address and dob and the shallow clone course? I don&#39;t know how to do the combos of cloning yet\r\n\r\n","title":"How to shallow clone and deep clone in java?","body":"<p>I have three classes inside a package <code>pack1</code>. The three classes are <code>classA</code>  <code>classB</code> and <code>classC</code>.</p>\n\n<p><code>classA</code></p>\n\n<pre><code>public class Address {\n    public String town = null;\n    public String street = null;\n    public int postCode = 0;\n    public int houseNumber = 0;\n}\n</code></pre>\n\n<p><code>classB</code></p>\n\n<pre><code>public class Course {\n    public String number;\n    public String name;\n\n    public Course(){\n        number = null;\n        name = null;\n    }\n</code></pre>\n\n<p><code>classC</code></p>\n\n<pre><code>public class Student {\n    public Date dob;\n    public Course course = new Course();\n    public Address address = new Address();\n\n\n    public Student(){\n        dob = null;\n        course.name = null;\n        course.number = null;\n        address.town = null;\n        address.street = null;\n        address.postCode = 0;\n        address.houseNumber = 0;\n        course.name = null;\n        course.number = null;\n\n    }\n</code></pre>\n\n<p>I'm wanting to know how I deep clone address and dob and the shallow clone course? I don't know how to do the combos of cloning yet</p>\n"},{"tags":["java","spring-boot","integration-testing","spring-test-mvc"],"answers":[{"comments":[{"owner":{"account_id":3174880,"reputation":3187,"user_id":2683000,"accept_rate":38,"display_name":"psv"},"score":9,"creation_date":1521127843,"post_id":47412829,"comment_id":85608827,"body_markdown":"What I finally done is add a `@Profile(&quot;!test&quot;)` on my AsyncConfiguration class. Thanks","body":"What I finally done is add a <code>@Profile(&quot;!test&quot;)</code> on my AsyncConfiguration class. Thanks"},{"owner":{"account_id":109778,"reputation":625,"user_id":290744,"accept_rate":50,"display_name":"qtips"},"score":0,"creation_date":1672154908,"post_id":47412829,"comment_id":132231407,"body_markdown":"This will only override the async task executor bean definition IF they have the same bean name `taskExecutor`. `@Primary` is not used here. `@Primary` does not work when overriding bean definitions, but is meant for when there are multiple beans with same qualifiers. Also, overriding will only work if this bean definition is processed by Spring after the main bean, which is often the case for inner `@TestConfiguration` class.","body":"This will only override the async task executor bean definition IF they have the same bean name <code>taskExecutor</code>. <code>@Primary</code> is not used here. <code>@Primary</code> does not work when overriding bean definitions, but is meant for when there are multiple beans with same qualifiers. Also, overriding will only work if this bean definition is processed by Spring after the main bean, which is often the case for inner <code>@TestConfiguration</code> class."},{"owner":{"account_id":1022492,"reputation":1055,"user_id":1032484,"display_name":"andy"},"score":0,"creation_date":1678169927,"post_id":47412829,"comment_id":133476640,"body_markdown":"Made my day! I have got a `@SpringBootTest` with `@Transactional` and some `@Async` stuff happening deep in the background somewhere, which wasn’t aware of the db setup stuff in my `@BeforeEach` method, because of thread-bound transactions. D‘oh!","body":"Made my day! I have got a <code>@SpringBootTest</code> with <code>@Transactional</code> and some <code>@Async</code> stuff happening deep in the background somewhere, which wasn’t aware of the db setup stuff in my <code>@BeforeEach</code> method, because of thread-bound transactions. D‘oh!"}],"tags":[],"owner":{"account_id":6505000,"reputation":1823,"user_id":5034289,"display_name":"Ilya Novoseltsev"},"comment_count":3,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1511281489,"creation_date":1511266238,"answer_id":47412829,"question_id":47411267,"body_markdown":"The topic you linked does offer a good solution.\r\n\r\nTo create a `SyncTaskExecutor` for tests, make sure you actually have a test configuration class for spring context. Please, refer to Spring docs for that:\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html\r\n\r\nIn this configuration class add a new bean:\r\n\r\n    @Bean\r\n    @Primary\r\n    public TaskExecutor taskExecutor() {\r\n        return new SyncTaskExecutor();\r\n    }\r\n\r\nThat should do it!\r\n\r\nTake care not to create this bean in your live config!","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>The topic you linked does offer a good solution.</p>\n\n<p>To create a <code>SyncTaskExecutor</code> for tests, make sure you actually have a test configuration class for spring context. Please, refer to Spring docs for that:\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html</a></p>\n\n<p>In this configuration class add a new bean:</p>\n\n<pre><code>@Bean\n@Primary\npublic TaskExecutor taskExecutor() {\n    return new SyncTaskExecutor();\n}\n</code></pre>\n\n<p>That should do it!</p>\n\n<p>Take care not to create this bean in your live config!</p>\n"},{"comments":[{"owner":{"account_id":14453570,"reputation":724,"user_id":10440388,"display_name":"Tyulpan Tyulpan"},"score":1,"creation_date":1626977180,"post_id":54651407,"comment_id":121042002,"body_markdown":"You should not change production code just for tests","body":"You should not change production code just for tests"},{"owner":{"account_id":4969836,"reputation":50,"user_id":3998017,"display_name":"Felipe Moraes"},"score":0,"creation_date":1639059832,"post_id":54651407,"comment_id":124255868,"body_markdown":"You are just by passing the framework tooling here in my point of view. One could also instead of returning void, return a `CompletableFuture` and during tests force a `CompletableFuture.completedFuture()` with a proper value. In the end you need to make sure your business logic works, not the framework you are using.","body":"You are just by passing the framework tooling here in my point of view. One could also instead of returning void, return a <code>CompletableFuture</code> and during tests force a <code>CompletableFuture.completedFuture()</code> with a proper value. In the end you need to make sure your business logic works, not the framework you are using."}],"tags":[],"owner":{"account_id":4969836,"reputation":50,"user_id":3998017,"display_name":"Felipe Moraes"},"comment_count":2,"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1549978783,"creation_date":1549978783,"answer_id":54651407,"question_id":47411267,"body_markdown":"You can also create two methods in your class, one that has the `@Async` annotation in it, and a second one that will have all the logic that you need to test without this annotation and make the first method call the second. Then in your tests you call the second method that will have `package-private` visibility.\r\n\r\nEx:\r\n\r\n```\r\n@Async\r\npublic void methodAsync() {\r\n    this.method();\r\n}\r\n\r\nvoid method() {\r\n   // Your business logic here!\r\n}\r\n```","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>You can also create two methods in your class, one that has the <code>@Async</code> annotation in it, and a second one that will have all the logic that you need to test without this annotation and make the first method call the second. Then in your tests you call the second method that will have <code>package-private</code> visibility.</p>\n\n<p>Ex:</p>\n\n<pre><code>@Async\npublic void methodAsync() {\n    this.method();\n}\n\nvoid method() {\n   // Your business logic here!\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14453570,"reputation":724,"user_id":10440388,"display_name":"Tyulpan Tyulpan"},"score":0,"creation_date":1626977301,"post_id":62011372,"comment_id":121042039,"body_markdown":"Production config should not contain such logic","body":"Production config should not contain such logic"}],"tags":[],"owner":{"account_id":163820,"reputation":11607,"user_id":386201,"accept_rate":75,"display_name":"Stuck"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1590443724,"creation_date":1590443724,"answer_id":62011372,"question_id":47411267,"body_markdown":"We ended up using a prop `yourcompany.someExecutor.async` that we default to `true` (so it does **not** show up in the `application.yml`) and in a test we set it to `false` using [`TestPropertySource`][1]. Based on that prop we either initialize a `SyncTaskExecutor` or some async version (e.g. `ThreadPoolTaskExecutor`).\r\n\r\nNote that this also enables to use multiple props so it is easy to disable a specific executor per prop. In our case we have several async executers depending on the context.\r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)\r\n@TestPropertySource(properties = {\r\n        &quot;yourcompany.someExecutor.async=false&quot;,\r\n})\r\npublic class SomeIntegrationTest {\r\n  // ... tests requiring async disabled\r\n}\r\n```\r\n\r\n\r\n```\r\n@Configuration\r\npublic class SomeConfig {\r\n    // ...\r\n    @Value(&quot;${yourcompany.someExecutor.async:true}&quot;)\r\n    private boolean asyncEnabled;\r\n\r\n    @Bean(&quot;someExecutor&quot;) // specific executor\r\n    public Executor algoExecutor() {\r\n        if (!asyncEnabled) {\r\n            return new SyncTaskExecutor();\r\n        }\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(THREAD_COUNT);\r\n        executor.setMaxPoolSize(THREAD_COUNT);\r\n        executor.setQueueCapacity(QUEUE_CAPACITY);\r\n        executor.setThreadNamePrefix(&quot;Some-&quot;);\r\n        executor.initialize();\r\n        return executor;\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/context/TestPropertySource.html","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>We ended up using a prop <code>yourcompany.someExecutor.async</code> that we default to <code>true</code> (so it does <strong>not</strong> show up in the <code>application.yml</code>) and in a test we set it to <code>false</code> using <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/context/TestPropertySource.html\" rel=\"nofollow noreferrer\"><code>TestPropertySource</code></a>. Based on that prop we either initialize a <code>SyncTaskExecutor</code> or some async version (e.g. <code>ThreadPoolTaskExecutor</code>).</p>\n\n<p>Note that this also enables to use multiple props so it is easy to disable a specific executor per prop. In our case we have several async executers depending on the context.</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)\n@TestPropertySource(properties = {\n        \"yourcompany.someExecutor.async=false\",\n})\npublic class SomeIntegrationTest {\n  // ... tests requiring async disabled\n}\n</code></pre>\n\n<pre><code>@Configuration\npublic class SomeConfig {\n    // ...\n    @Value(\"${yourcompany.someExecutor.async:true}\")\n    private boolean asyncEnabled;\n\n    @Bean(\"someExecutor\") // specific executor\n    public Executor algoExecutor() {\n        if (!asyncEnabled) {\n            return new SyncTaskExecutor();\n        }\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(THREAD_COUNT);\n        executor.setMaxPoolSize(THREAD_COUNT);\n        executor.setQueueCapacity(QUEUE_CAPACITY);\n        executor.setThreadNamePrefix(\"Some-\");\n        executor.initialize();\n        return executor;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1968038,"reputation":317,"user_id":1767739,"display_name":"Oleg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641461812,"creation_date":1641461812,"answer_id":70605066,"question_id":47411267,"body_markdown":"You can overwrite the main task executor by creating the following class in test folder: \r\n\r\n    @TestConfiguration\r\n    public class TestAsyncConfig {\r\n        // create this bean if you have a custom executor you want to overwrite\r\n        @Bean(name = &quot;xxxxxxx&quot;) \r\n        public Executor xxxxxxx() {\r\n            return new SyncTaskExecutor();\r\n        }\r\n    \r\n        // this will overwrite the default executor\r\n        @Bean\r\n        public Executor taskExecutor() { \r\n            return new SyncTaskExecutor();\r\n        }\r\n    }\r\n\r\nThen add the following to annotations on your integration test:\r\n\r\n    @ContextConfiguration(classes = TestAsyncConfig.class)\r\n\r\n","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>You can overwrite the main task executor by creating the following class in test folder:</p>\n<pre><code>@TestConfiguration\npublic class TestAsyncConfig {\n    // create this bean if you have a custom executor you want to overwrite\n    @Bean(name = &quot;xxxxxxx&quot;) \n    public Executor xxxxxxx() {\n        return new SyncTaskExecutor();\n    }\n\n    // this will overwrite the default executor\n    @Bean\n    public Executor taskExecutor() { \n        return new SyncTaskExecutor();\n    }\n}\n</code></pre>\n<p>Then add the following to annotations on your integration test:</p>\n<pre><code>@ContextConfiguration(classes = TestAsyncConfig.class)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2287224,"reputation":295,"user_id":2010957,"display_name":"Nitin Jain"},"score":0,"creation_date":1691771688,"post_id":71065098,"comment_id":135541575,"body_markdown":"Much Simpler solution than implementing Awaitility or overriding taskExecutor","body":"Much Simpler solution than implementing Awaitility or overriding taskExecutor"}],"tags":[],"owner":{"account_id":1921,"reputation":185682,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1644496035,"creation_date":1644496035,"answer_id":71065098,"question_id":47411267,"body_markdown":"If a unique profile name is used when the tests are run (e.g. &quot;test&quot;), then the easiest way to disable async when running tests is with\r\n\r\n```java\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.Profile;\r\nimport org.springframework.scheduling.annotation.EnableAsync;\r\n\r\n\r\n@Profile(&quot;!test&quot;)\r\n@Configuration\r\n@EnableAsync\r\npublic class AsyncConfiguration {\r\n\r\n}\r\n```\r\n\r\nIn my case I had to add the following to `src/test/resources/application.yml` to ensure tests are run under a profile named &quot;test&quot;\r\n\r\n```yml\r\nspring:\r\n  profiles:\r\n    active: test\r\n```","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>If a unique profile name is used when the tests are run (e.g. &quot;test&quot;), then the easiest way to disable async when running tests is with</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Profile;\nimport org.springframework.scheduling.annotation.EnableAsync;\n\n\n@Profile(&quot;!test&quot;)\n@Configuration\n@EnableAsync\npublic class AsyncConfiguration {\n\n}\n</code></pre>\n<p>In my case I had to add the following to <code>src/test/resources/application.yml</code> to ensure tests are run under a profile named &quot;test&quot;</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  profiles:\n    active: test\n</code></pre>\n"},{"tags":[],"owner":{"account_id":451083,"reputation":1157,"user_id":846769,"accept_rate":50,"display_name":"i000174"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694522026,"creation_date":1694517586,"answer_id":77088625,"question_id":47411267,"body_markdown":"You can achieve it by defining a new configuration file (create a new java file DisableAsyncConfiguration in the package folder of your test) with the following content.\r\n\r\n    @Configuration\r\n    @Profile(&quot;disable-async&quot;)\r\n    public class DisableAsyncConfiguration {\r\n    \r\n        @Bean\r\n        Executor asyncExecutor() {\r\n            return new SyncTaskExecutor();\r\n        }\r\n    \r\n    }\r\n\r\nThen use it in your test class\r\n\r\n    @SpringBootTest\r\n    @@ActiveProfiles(profiles = {&quot;test&quot;, &quot;disable-async&quot;})\r\n    public class MyTestThatUsesAsyncAnnotatedBeans {\r\n       ...\r\n    }\r\n\r\n\r\nAs a result the methods annotated with @Async will be executed synchronously in your test only. \r\n\r\nExplanation: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html\r\n","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>You can achieve it by defining a new configuration file (create a new java file DisableAsyncConfiguration in the package folder of your test) with the following content.</p>\n<pre><code>@Configuration\n@Profile(&quot;disable-async&quot;)\npublic class DisableAsyncConfiguration {\n\n    @Bean\n    Executor asyncExecutor() {\n        return new SyncTaskExecutor();\n    }\n\n}\n</code></pre>\n<p>Then use it in your test class</p>\n<pre><code>@SpringBootTest\n@@ActiveProfiles(profiles = {&quot;test&quot;, &quot;disable-async&quot;})\npublic class MyTestThatUsesAsyncAnnotatedBeans {\n   ...\n}\n</code></pre>\n<p>As a result the methods annotated with @Async will be executed synchronously in your test only.</p>\n<p>Explanation: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html</a></p>\n"}],"owner":{"account_id":3174880,"reputation":3187,"user_id":2683000,"accept_rate":38,"display_name":"psv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15804,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"answer_count":6,"score":24,"last_activity_date":1694522026,"creation_date":1511261470,"question_id":47411267,"body_markdown":"I would like to disable `@EnableAsync` when I run my integration tests.\r\n\r\nI tried to override the configuration file which is annotated with `@EnableAsync` with a class with the same name in my test package but it does not work.\r\n\r\nIn this topic: https://stackoverflow.com/questions/42134750/is-it-possible-to-disable-springs-async-during-integration-test\r\n\r\nI have seen that:\r\n\r\n&gt; You can... Create a test configuration or simply override the task executor with a SyncTaskExecutor\r\n\r\nbut I do not understand how to do.\r\n\r\nAny advice ? Thanks","title":"Spring boot disable @EnableAsync for integration tests","body":"<p>I would like to disable <code>@EnableAsync</code> when I run my integration tests.</p>\n\n<p>I tried to override the configuration file which is annotated with <code>@EnableAsync</code> with a class with the same name in my test package but it does not work.</p>\n\n<p>In this topic: <a href=\"https://stackoverflow.com/questions/42134750/is-it-possible-to-disable-springs-async-during-integration-test\">Is it possible to disable Spring&#39;s @Async during integration test?</a></p>\n\n<p>I have seen that:</p>\n\n<blockquote>\n  <p>You can... Create a test configuration or simply override the task executor with a SyncTaskExecutor</p>\n</blockquote>\n\n<p>but I do not understand how to do.</p>\n\n<p>Any advice ? Thanks</p>\n"},{"tags":["java","gradle","cucumber","testng","allure"],"answers":[{"tags":[],"owner":{"account_id":11303221,"reputation":1,"user_id":8288567,"display_name":"Natalia Josse"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694521963,"creation_date":1694521963,"answer_id":77089151,"question_id":75811867,"body_markdown":"Maybe because of a typo in &quot;mathedStatuses&quot;? You should use:\r\n\r\n```\r\n[ \r\n   { \r\n     &quot;name&quot;: &quot;List of all tests&quot;, \r\n     &quot;matchedStatuses&quot;: [&quot;broken&quot;, &quot;failed&quot;, &quot;skipped&quot;, &quot;passed&quot;] \r\n   } \r\n] \r\n```","title":"Allure report: list of tests without grouping","body":"<p>Maybe because of a typo in &quot;mathedStatuses&quot;? You should use:</p>\n<pre><code>[ \n   { \n     &quot;name&quot;: &quot;List of all tests&quot;, \n     &quot;matchedStatuses&quot;: [&quot;broken&quot;, &quot;failed&quot;, &quot;skipped&quot;, &quot;passed&quot;] \n   } \n] \n</code></pre>\n"}],"owner":{"account_id":2024644,"reputation":1,"user_id":9268136,"display_name":"SergT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694521963,"creation_date":1679485690,"question_id":75811867,"body_markdown":"I need to have a list of all tests in Allure report without grouping by error message, suites, packages, etc. Like this:\r\n\r\n[nice to see](https://i.stack.imgur.com/pYeDC.png)\r\n\r\nTried to use categories.json in allure-results folder:\r\n\r\n\r\n```\r\n[ \r\n   { \r\n     &quot;name&quot;: &quot;List of all tests&quot;, \r\n     &quot;mathedStatuses&quot;: [&quot;broken&quot;, &quot;failed&quot;, &quot;skipped&quot;, &quot;passed&quot;] \r\n   } \r\n] \r\n```\r\n\r\nbut Allure groups tests by error:\r\n\r\n[Allure&#39;s grouping](https://i.stack.imgur.com/RaUQe.png)\r\n\r\nEnv: java11, gradle, testNg, Allure 2.20.1\r\n\r\nThanks in advance!\r\n\r\nps: chatGpt is NOT helpful at all))","title":"Allure report: list of tests without grouping","body":"<p>I need to have a list of all tests in Allure report without grouping by error message, suites, packages, etc. Like this:</p>\n<p><a href=\"https://i.stack.imgur.com/pYeDC.png\" rel=\"nofollow noreferrer\">nice to see</a></p>\n<p>Tried to use categories.json in allure-results folder:</p>\n<pre><code>[ \n   { \n     &quot;name&quot;: &quot;List of all tests&quot;, \n     &quot;mathedStatuses&quot;: [&quot;broken&quot;, &quot;failed&quot;, &quot;skipped&quot;, &quot;passed&quot;] \n   } \n] \n</code></pre>\n<p>but Allure groups tests by error:</p>\n<p><a href=\"https://i.stack.imgur.com/RaUQe.png\" rel=\"nofollow noreferrer\">Allure's grouping</a></p>\n<p>Env: java11, gradle, testNg, Allure 2.20.1</p>\n<p>Thanks in advance!</p>\n<p>ps: chatGpt is NOT helpful at all))</p>\n"},{"tags":["java","selenium-webdriver"],"owner":{"account_id":29422720,"reputation":1,"user_id":22544108,"display_name":"kavinilavu sekar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694521703,"creation_date":1694521703,"question_id":77089111,"body_markdown":"Help me with no such window exception, target window is already closed.i have to switch to new popup window which closed automatically, again I have open new window, by clicking button in main window and I m not able to switch into the main window . What I have to do\r\n\r\nI need to open second window. By clicking on button in main window ","title":"My new window closed automatically, and it&#39;s not switching to main window getting no such window exception target window is closed in selenium java","body":"<p>Help me with no such window exception, target window is already closed.i have to switch to new popup window which closed automatically, again I have open new window, by clicking button in main window and I m not able to switch into the main window . What I have to do</p>\n<p>I need to open second window. By clicking on button in main window</p>\n"},{"tags":["java","sockets","jvm","jstack"],"answers":[{"comments":[{"owner":{"account_id":6843932,"reputation":35,"user_id":5263329,"display_name":"dongdong"},"score":0,"creation_date":1440560199,"post_id":32201012,"comment_id":52318614,"body_markdown":"Thanks you! we just want to get dump info. I check the &quot;Dynamic Attach&quot;, and found the &quot;sendQuitTo&quot;. this is very helpful!. We can use &quot;kill -3&quot; to get the info, which get rid of socket file.","body":"Thanks you! we just want to get dump info. I check the &quot;Dynamic Attach&quot;, and found the &quot;sendQuitTo&quot;. this is very helpful!. We can use &quot;kill -3&quot; to get the info, which get rid of socket file."}],"tags":[],"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694521554,"creation_date":1440496860,"answer_id":32201012,"question_id":32198820,"body_markdown":"`/tmp/.java_pid` socket is used by HotSpot [Dynamic Attach](http://openjdk.java.net/groups/hotspot/docs/Serviceability.html#battach) mechanism. It is the way how `jstack` and other utilities communicate with JVM.\r\n\r\nYou cannot change the path - it is hardcoded in JVM source code. Neither you can force JVM to regenerate it, because the Attach Listener is initialized only once in HotSpot lifetime.\r\n\r\n`jstack -F` works in a [quite different way](https://stackoverflow.com/a/30682087/3448419).\r\n\r\nIn order to check whether Java process works fine, I suggest using [JMX remote](http://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html).\r\n\r\n**UPDATE:** as a result of [JDK-8225690](https://bugs.openjdk.org/browse/JDK-8225690) fix, starting from JDK 14 / 11.0.13 / 8u332, JVM automatically re-creates .java_pid attach socket if has been deleted.","title":"why jstack not working when the /tmp/.java_pid&lt;num&gt; socket file has been deleted","body":"<p><code>/tmp/.java_pid</code> socket is used by HotSpot <a href=\"http://openjdk.java.net/groups/hotspot/docs/Serviceability.html#battach\" rel=\"nofollow noreferrer\">Dynamic Attach</a> mechanism. It is the way how <code>jstack</code> and other utilities communicate with JVM.</p>\n<p>You cannot change the path - it is hardcoded in JVM source code. Neither you can force JVM to regenerate it, because the Attach Listener is initialized only once in HotSpot lifetime.</p>\n<p><code>jstack -F</code> works in a <a href=\"https://stackoverflow.com/a/30682087/3448419\">quite different way</a>.</p>\n<p>In order to check whether Java process works fine, I suggest using <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html\" rel=\"nofollow noreferrer\">JMX remote</a>.</p>\n<p><strong>UPDATE:</strong> as a result of <a href=\"https://bugs.openjdk.org/browse/JDK-8225690\" rel=\"nofollow noreferrer\">JDK-8225690</a> fix, starting from JDK 14 / 11.0.13 / 8u332, JVM automatically re-creates .java_pid attach socket if has been deleted.</p>\n"}],"owner":{"account_id":6843932,"reputation":35,"user_id":5263329,"display_name":"dongdong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3925,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":32201012,"answer_count":1,"score":1,"last_activity_date":1694521554,"creation_date":1440490420,"question_id":32198820,"body_markdown":"Usually, I use jstack to check if the java process is working normally. While i found, when the `/tmp/java_pid&lt;num&gt;` (the num is pid of java process) socket file has been deleted, jstack will not work. like this:\r\n\r\n    [xxx]$ jstack -l 5509\r\n\r\n    5509: Unable to open socket file: target process not responding or HotSpot VM not loaded\r\n    The -F option can be used when the target process is not responding\r\n\r\n(PS. I didn&#39;t want to use the &quot;-F&quot;, there may be other problems)\r\n\r\nIs there any way to change the socket file location(not /tmp)? or to generate the socket file again when found not existed? Now what i did is to restart the java process again, a very bad solution.\r\n\r\nThanks!\r\n","title":"why jstack not working when the /tmp/.java_pid&lt;num&gt; socket file has been deleted","body":"<p>Usually, I use jstack to check if the java process is working normally. While i found, when the <code>/tmp/java_pid&lt;num&gt;</code> (the num is pid of java process) socket file has been deleted, jstack will not work. like this:</p>\n\n<pre><code>[xxx]$ jstack -l 5509\n\n5509: Unable to open socket file: target process not responding or HotSpot VM not loaded\nThe -F option can be used when the target process is not responding\n</code></pre>\n\n<p>(PS. I didn't want to use the \"-F\", there may be other problems)</p>\n\n<p>Is there any way to change the socket file location(not /tmp)? or to generate the socket file again when found not existed? Now what i did is to restart the java process again, a very bad solution.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","drools","rules","rule-engine"],"comments":[{"owner":{"account_id":6836734,"reputation":53,"user_id":5258392,"display_name":"ArjunPunnam"},"score":0,"creation_date":1697163533,"post_id":77088833,"comment_id":136248365,"body_markdown":"If you want to precompile the rules beforehand then executable model might be an option with Drools 8.x","body":"If you want to precompile the rules beforehand then executable model might be an option with Drools 8.x"}],"answers":[{"tags":[],"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694521318,"creation_date":1694521318,"answer_id":77089061,"question_id":77088833,"body_markdown":"The `KieBase` is not serializable anymore in Drools 8.x.  This is an [explicit decision][1] of Drools&#39; authors.  If you really need the serialization you should consider downgrading to the latest 7.x release (actually [7.74.1.Final][2]).  Also note that versions from 7.45.0.Final to 7.66.0.Final have a [serialization-related bug][3].\r\n\r\n\r\n  [1]: https://github.com/kiegroup/drools/pull/3929\r\n  [2]: https://mvnrepository.com/artifact/org.drools/drools-bom\r\n  [3]: https://issues.redhat.com/browse/DROOLS-6850","title":"How to serialize kiebase in drools-engine 8.43.0.Final","body":"<p>The <code>KieBase</code> is not serializable anymore in Drools 8.x.  This is an <a href=\"https://github.com/kiegroup/drools/pull/3929\" rel=\"nofollow noreferrer\">explicit decision</a> of Drools' authors.  If you really need the serialization you should consider downgrading to the latest 7.x release (actually <a href=\"https://mvnrepository.com/artifact/org.drools/drools-bom\" rel=\"nofollow noreferrer\">7.74.1.Final</a>).  Also note that versions from 7.45.0.Final to 7.66.0.Final have a <a href=\"https://issues.redhat.com/browse/DROOLS-6850\" rel=\"nofollow noreferrer\">serialization-related bug</a>.</p>\n"}],"owner":{"account_id":29345146,"reputation":11,"user_id":22483710,"display_name":"Tamil Prabhu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694521318,"creation_date":1694519465,"question_id":77088833,"body_markdown":"Since the SessionsAwareKnowledgeBase implements KieBase which can&#39;t be serializable.\r\n \r\nUsecase: Need to serialize the kiebase and store into the cache (redis). At runtime i have to deserialize the kiebase.\r\n\r\n\r\nKindly help me out on this.\r\n\r\nTried with Marshalling kiesessions and save it in the cache, But when pulling out from the cache we need even kiebase to unmarshall.","title":"How to serialize kiebase in drools-engine 8.43.0.Final","body":"<p>Since the SessionsAwareKnowledgeBase implements KieBase which can't be serializable.</p>\n<p>Usecase: Need to serialize the kiebase and store into the cache (redis). At runtime i have to deserialize the kiebase.</p>\n<p>Kindly help me out on this.</p>\n<p>Tried with Marshalling kiesessions and save it in the cache, But when pulling out from the cache we need even kiebase to unmarshall.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":1,"creation_date":1694496727,"post_id":77086121,"comment_id":135894548,"body_markdown":"Please change your code: `public class AbstractClass` -&gt; `public abstract class AbstractClass`","body":"Please change your code: <code>public class AbstractClass</code> -&gt; <code>public abstract class AbstractClass</code>"}],"answers":[{"comments":[{"owner":{"account_id":21116160,"reputation":143,"user_id":15523210,"display_name":"p23he"},"score":0,"creation_date":1694540540,"post_id":77086314,"comment_id":135903635,"body_markdown":"Thanks, this worked for all the DAO classes that were structured as above (except I used `@Autowire Environment env` instead). I&#39;m running into issues with one last class that extends from the abstract class but is a little different.\n\nSpecifically, it overrides the abstract method the same as above, but it instantiates itself: `private static final ThisClass INSTANCE = new ThisClass();`. In this class, in order to get the env, I tried a ctor injection and then changed the line as such: `... new ThisClass(env);`. This results in a NPE - instantiation occurs before injection. Any suggestions?","body":"Thanks, this worked for all the DAO classes that were structured as above (except I used <code>@Autowire Environment env</code> instead). I&#39;m running into issues with one last class that extends from the abstract class but is a little different.  Specifically, it overrides the abstract method the same as above, but it instantiates itself: <code>private static final ThisClass INSTANCE = new ThisClass();</code>. In this class, in order to get the env, I tried a ctor injection and then changed the line as such: <code>... new ThisClass(env);</code>. This results in a NPE - instantiation occurs before injection. Any suggestions?"},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1694545984,"post_id":77086314,"comment_id":135904606,"body_markdown":"@p23he, sorry but I don&#39;t understand completely your problem. I think it will be great to create another question for your problem. Let me know","body":"@p23he, sorry but I don&#39;t understand completely your problem. I think it will be great to create another question for your problem. Let me know"},{"owner":{"account_id":21116160,"reputation":143,"user_id":15523210,"display_name":"p23he"},"score":1,"creation_date":1694547041,"post_id":77086314,"comment_id":135904783,"body_markdown":"Thanks for the offer, but I managed to resolve my problem simply by adding the @Configurable annotation to that particular class. I&#39;m not entirely sure about SO etiquette but I think I&#39;m satisfied with not creating another question. If you&#39;re still curious, I&#39;d be glad to share my initial problem and it was solved, however.","body":"Thanks for the offer, but I managed to resolve my problem simply by adding the @Configurable annotation to that particular class. I&#39;m not entirely sure about SO etiquette but I think I&#39;m satisfied with not creating another question. If you&#39;re still curious, I&#39;d be glad to share my initial problem and it was solved, however."}],"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694507438,"creation_date":1694496662,"answer_id":77086314,"question_id":77086121,"body_markdown":"You cannot use Spring in the usual way for abstract classes (i.e. using the `@Component` and the other annotations) because an abstract class cannot be instantiated in Java.\r\n\r\nBut you can do the following:\r\n\r\n```java\r\n@Configuration\r\npublic class MyConfig {\r\n    private static final String PROPERTY_NAME = &quot;property_name_1&quot;;\r\n\r\n    @Value(&quot;${spring.profiles.active}&quot;)\r\n    private String activeProfile;\r\n\r\n    @Bean\r\n    public AbstractClass abstractClass() {\r\n        return new AbstractClass(activeProfile) {\r\n\r\n            @Override\r\n            protected String abstractMethod() {\r\n                return PROPERTY_NAME;\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n\r\nWith this approach, you manually configure `AbstractClass` as a Spring bean. But inside `AbstractClass` you still won&#39;t be able to use any Spring annotations, instead you can pass those through the constructor.\r\n\r\nAnd after that, `AbstractClass` can be injected anywhere.\r\n\r\n```java\r\n@Component\r\npublic class SomeClass {\r\n\r\n    @Autowired\r\n    private AbstractClass abstracClass;\r\n\r\n    // ...\r\n}\r\n```\r\n\r\nI guess the only way to do what you want is above.","title":"Injecting instead of instantiating abstract class in Java Spring Boot","body":"<p>You cannot use Spring in the usual way for abstract classes (i.e. using the <code>@Component</code> and the other annotations) because an abstract class cannot be instantiated in Java.</p>\n<p>But you can do the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MyConfig {\n    private static final String PROPERTY_NAME = &quot;property_name_1&quot;;\n\n    @Value(&quot;${spring.profiles.active}&quot;)\n    private String activeProfile;\n\n    @Bean\n    public AbstractClass abstractClass() {\n        return new AbstractClass(activeProfile) {\n\n            @Override\n            protected String abstractMethod() {\n                return PROPERTY_NAME;\n            }\n        };\n    }\n}\n</code></pre>\n<p>With this approach, you manually configure <code>AbstractClass</code> as a Spring bean. But inside <code>AbstractClass</code> you still won't be able to use any Spring annotations, instead you can pass those through the constructor.</p>\n<p>And after that, <code>AbstractClass</code> can be injected anywhere.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SomeClass {\n\n    @Autowired\n    private AbstractClass abstracClass;\n\n    // ...\n}\n</code></pre>\n<p>I guess the only way to do what you want is above.</p>\n"}],"owner":{"account_id":21116160,"reputation":143,"user_id":15523210,"display_name":"p23he"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77086314,"answer_count":1,"score":1,"last_activity_date":1694521244,"creation_date":1694492866,"question_id":77086121,"body_markdown":"I admit I&#39;m quite new to Spring. I&#39;m working in a Spring Boot application where I&#39;m working with some old code. There are a lot of DAO classes in which the constructor would instantiate an abstract class by overriding the abstract method, like so\r\n\r\n```\r\n@Component(&quot;exampleDAO_1&quot;) // the DAO classes are already managed by Spring\r\npublic class ExampleDAO_1 implements IExampleDAO_1 {\r\n...\r\n    private static final String PROPERTY_NAME = &quot;property_name_1&quot;;\r\n    AbstractClass property;\r\n\r\n\tpublic ExampleDAO_1() {\r\n\t\tproperty = new AbstractClass() {\r\n\r\n\t\t\t@Override\r\n\t\t\tprotected String abstractMethod() {\r\n\t\t\t\treturn PROPERTY_NAME;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t}\r\n...\r\n}\r\n```\r\nand the abstract class would look something like this\r\n```\r\npublic abstract class AbstractClass {\r\n    @Value(&quot;${spring.profiles.active}&quot;) // Ultimately I want the class managed by Spring so I can access this value properly\r\n    private String activeProfile;\r\n\r\n    protected AbstractClass() {\r\n        this(true);\r\n    }\r\n\r\n    protected AbstractClass(boolean withEnvironment) {\r\n        ...\r\n        // use abstractMethod() here to further set some other fields in the class\r\n        ...\r\n    }\r\n\r\n    protected abstract String abstractMethod();\r\n\r\n}\r\n```\r\n\r\nI want to inject the abstract class instead of instantiating it via the usual `new` keyword and overriding the abstract method, so I can have object Spring managed. What is the best way to go about this? \r\n\r\nI&#39;ve tried making the class concrete to begin with and then passing in the property name into a constructor, then saving the value as a new field in the class, but I&#39;m not sure where to go from there, or if that is even the correct way to start. Apologies if what I&#39;m asking or saying does not make sense.","title":"Injecting instead of instantiating abstract class in Java Spring Boot","body":"<p>I admit I'm quite new to Spring. I'm working in a Spring Boot application where I'm working with some old code. There are a lot of DAO classes in which the constructor would instantiate an abstract class by overriding the abstract method, like so</p>\n<pre><code>@Component(&quot;exampleDAO_1&quot;) // the DAO classes are already managed by Spring\npublic class ExampleDAO_1 implements IExampleDAO_1 {\n...\n    private static final String PROPERTY_NAME = &quot;property_name_1&quot;;\n    AbstractClass property;\n\n    public ExampleDAO_1() {\n        property = new AbstractClass() {\n\n            @Override\n            protected String abstractMethod() {\n                return PROPERTY_NAME;\n            }\n\n        };\n    }\n...\n}\n</code></pre>\n<p>and the abstract class would look something like this</p>\n<pre><code>public abstract class AbstractClass {\n    @Value(&quot;${spring.profiles.active}&quot;) // Ultimately I want the class managed by Spring so I can access this value properly\n    private String activeProfile;\n\n    protected AbstractClass() {\n        this(true);\n    }\n\n    protected AbstractClass(boolean withEnvironment) {\n        ...\n        // use abstractMethod() here to further set some other fields in the class\n        ...\n    }\n\n    protected abstract String abstractMethod();\n\n}\n</code></pre>\n<p>I want to inject the abstract class instead of instantiating it via the usual <code>new</code> keyword and overriding the abstract method, so I can have object Spring managed. What is the best way to go about this?</p>\n<p>I've tried making the class concrete to begin with and then passing in the property name into a constructor, then saving the value as a new field in the class, but I'm not sure where to go from there, or if that is even the correct way to start. Apologies if what I'm asking or saying does not make sense.</p>\n"},{"tags":["java","graph","planar-graph"],"answers":[{"tags":[],"owner":{"account_id":16762345,"reputation":127,"user_id":14872220,"display_name":"licheng"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694521025,"creation_date":1694521025,"answer_id":77089027,"question_id":17325377,"body_markdown":"I recommend [IGraph/M][1], which is a Mathematica package for use in complex networks and graph theory research. \r\n```\r\n    Needs[&quot;IGraphM`&quot;]\r\n    s = &lt;|1 -&gt; {11, 12, 13}, 2 -&gt; {3, 20, 8}, 3 -&gt; {2, 4, 42}, \r\n       4 -&gt; {3, 5, 28}, 5 -&gt; {4, 6, 34}, 6 -&gt; {5, 7, 46}, \r\n       7 -&gt; {6, 10, 30}, 8 -&gt; {2, 22, 9}, 9 -&gt; {8, 23, 10}, \r\n       10 -&gt; {9, 25, 7}, 11 -&gt; {1, 15, 14}, 12 -&gt; {1, 27, 29}, \r\n       13 -&gt; {1, 32, 31}, 14 -&gt; {11, 16, 22}, 15 -&gt; {11, 19, 16}, \r\n       16 -&gt; {15, 17, 14}, 17 -&gt; {16, 18, 21}, 18 -&gt; {17, 19, 24}, \r\n       19 -&gt; {18, 15, 25}, 20 -&gt; {2, 41, 26}, 21 -&gt; {17, 23, 22}, \r\n       22 -&gt; {21, 8, 14}, 23 -&gt; {21, 24, 9}, 24 -&gt; {23, 18, 25}, \r\n       25 -&gt; {24, 19, 10}, 26 -&gt; {20, 39, 27}, 27 -&gt; {26, 35, 12}, \r\n       28 -&gt; {4, 29, 40}, 29 -&gt; {28, 12, 35}, 30 -&gt; {7, 31, 45}, \r\n       31 -&gt; {30, 13, 36}, 32 -&gt; {13, 33, 36}, 33 -&gt; {32, 34, 43}, \r\n       34 -&gt; {33, 5, 44}, 35 -&gt; {29, 27, 37}, 36 -&gt; {32, 38, 31}, \r\n       37 -&gt; {35, 39, 40}, 38 -&gt; {36, 43, 45}, 39 -&gt; {37, 26, 41}, \r\n       40 -&gt; {37, 42, 28}, 41 -&gt; {39, 20, 42}, 42 -&gt; {41, 3, 40}, \r\n       43 -&gt; {38, 33, 44}, 44 -&gt; {43, 34, 46}, 45 -&gt; {38, 46, 30}, \r\n       46 -&gt; {45, 44, 6}|&gt;;(*combinatorial embedding*)\r\n      g = IGAdjacencyGraph[s] (*generate the graph)\r\n Graph[g, VertexCoordinates -&gt; IGEmbeddingToCoordinates[s], \r\n VertexLabels -&gt; Placed[Automatic, Center], VertexSize -&gt; 0.5, \r\n VertexLabelStyle -&gt; 6, ImageSize -&gt; Large, \r\n VertexStyle -&gt; ColorData[&quot;Legacy&quot;, &quot;LemonChiffon&quot;], \r\n EdgeStyle -&gt; Darker@ColorData[&quot;Legacy&quot;, &quot;IndianRed&quot;]\r\n ]\r\n```\r\n [![enter image description here][2]][2]\r\n\r\nAs for which algorithm to use, I recommend contacting developer Szabolcs Horv&#225;t.\r\n\r\n  [1]: http://szhorvat.net/pelican/igraphm-a-mathematica-interface-for-igraph.html\r\n  [2]: https://i.stack.imgur.com/VyoCi.jpg","title":"Draw the combinatorial embedding of a generic planar graph","body":"<p>I recommend <a href=\"http://szhorvat.net/pelican/igraphm-a-mathematica-interface-for-igraph.html\" rel=\"nofollow noreferrer\">IGraph/M</a>, which is a Mathematica package for use in complex networks and graph theory research.</p>\n<pre><code>    Needs[&quot;IGraphM`&quot;]\n    s = &lt;|1 -&gt; {11, 12, 13}, 2 -&gt; {3, 20, 8}, 3 -&gt; {2, 4, 42}, \n       4 -&gt; {3, 5, 28}, 5 -&gt; {4, 6, 34}, 6 -&gt; {5, 7, 46}, \n       7 -&gt; {6, 10, 30}, 8 -&gt; {2, 22, 9}, 9 -&gt; {8, 23, 10}, \n       10 -&gt; {9, 25, 7}, 11 -&gt; {1, 15, 14}, 12 -&gt; {1, 27, 29}, \n       13 -&gt; {1, 32, 31}, 14 -&gt; {11, 16, 22}, 15 -&gt; {11, 19, 16}, \n       16 -&gt; {15, 17, 14}, 17 -&gt; {16, 18, 21}, 18 -&gt; {17, 19, 24}, \n       19 -&gt; {18, 15, 25}, 20 -&gt; {2, 41, 26}, 21 -&gt; {17, 23, 22}, \n       22 -&gt; {21, 8, 14}, 23 -&gt; {21, 24, 9}, 24 -&gt; {23, 18, 25}, \n       25 -&gt; {24, 19, 10}, 26 -&gt; {20, 39, 27}, 27 -&gt; {26, 35, 12}, \n       28 -&gt; {4, 29, 40}, 29 -&gt; {28, 12, 35}, 30 -&gt; {7, 31, 45}, \n       31 -&gt; {30, 13, 36}, 32 -&gt; {13, 33, 36}, 33 -&gt; {32, 34, 43}, \n       34 -&gt; {33, 5, 44}, 35 -&gt; {29, 27, 37}, 36 -&gt; {32, 38, 31}, \n       37 -&gt; {35, 39, 40}, 38 -&gt; {36, 43, 45}, 39 -&gt; {37, 26, 41}, \n       40 -&gt; {37, 42, 28}, 41 -&gt; {39, 20, 42}, 42 -&gt; {41, 3, 40}, \n       43 -&gt; {38, 33, 44}, 44 -&gt; {43, 34, 46}, 45 -&gt; {38, 46, 30}, \n       46 -&gt; {45, 44, 6}|&gt;;(*combinatorial embedding*)\n      g = IGAdjacencyGraph[s] (*generate the graph)\n Graph[g, VertexCoordinates -&gt; IGEmbeddingToCoordinates[s], \n VertexLabels -&gt; Placed[Automatic, Center], VertexSize -&gt; 0.5, \n VertexLabelStyle -&gt; 6, ImageSize -&gt; Large, \n VertexStyle -&gt; ColorData[&quot;Legacy&quot;, &quot;LemonChiffon&quot;], \n EdgeStyle -&gt; Darker@ColorData[&quot;Legacy&quot;, &quot;IndianRed&quot;]\n ]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/VyoCi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VyoCi.jpg\" alt=\"enter image description here\" /></a></p>\n<p>As for which algorithm to use, I recommend contacting developer Szabolcs Horvát.</p>\n"}],"owner":{"account_id":1885868,"reputation":361,"user_id":2267134,"display_name":"user2267134"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1694521025,"creation_date":1372263433,"question_id":17325377,"body_markdown":"I have the combinatorial embedding of a generic planar graph (vertices, edges, the cyclic ordering of edges around vertices and the external face) and I need to draw it.\r\n\r\nThe vertices must be adimensional and the drawing must comply with the defined cyclic ordering of edges around vertices (and with the external face), even if the input graph is not 3-connected or maximal planar.\r\n\r\nIt would be better if the drawing algorithm was already implemented (perhaps in a Java library), but a paper with the algorithm explanation is still sufficient.","title":"Draw the combinatorial embedding of a generic planar graph","body":"<p>I have the combinatorial embedding of a generic planar graph (vertices, edges, the cyclic ordering of edges around vertices and the external face) and I need to draw it.</p>\n\n<p>The vertices must be adimensional and the drawing must comply with the defined cyclic ordering of edges around vertices (and with the external face), even if the input graph is not 3-connected or maximal planar.</p>\n\n<p>It would be better if the drawing algorithm was already implemented (perhaps in a Java library), but a paper with the algorithm explanation is still sufficient.</p>\n"},{"tags":["java","opensearch","elasticsearch-rest-client"],"answers":[{"tags":[],"owner":{"account_id":13121556,"reputation":747,"user_id":9478795,"display_name":"Nexonus"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694520923,"creation_date":1638542976,"answer_id":70216177,"question_id":70216176,"body_markdown":"As it turns out the version of the `Elasticsearch-Rest-High-Level-Client` was too new. We used the client version `7.15.0` with OpenSearch `1.0`. We downgraded the client to `7.10.2` and it worked again.\r\n\r\nAlso using the `OpenSearch-Rest-High-Level-Client` in version `1.0` worked, too.","title":"elasticsearch.ElasticsearchException: Invalid or missing tagline (OpenSearch)","body":"<p>As it turns out the version of the <code>Elasticsearch-Rest-High-Level-Client</code> was too new. We used the client version <code>7.15.0</code> with OpenSearch <code>1.0</code>. We downgraded the client to <code>7.10.2</code> and it worked again.</p>\n<p>Also using the <code>OpenSearch-Rest-High-Level-Client</code> in version <code>1.0</code> worked, too.</p>\n"},{"tags":[],"owner":{"account_id":26613352,"reputation":11,"user_id":20233210,"display_name":"Anju"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665679642,"creation_date":1665679642,"answer_id":74059243,"question_id":70216176,"body_markdown":"I was facing same issue. \r\nDowngrading version of Elasticsearch-Rest-High-Level-Client to 7.10.2 worked for me.","title":"elasticsearch.ElasticsearchException: Invalid or missing tagline (OpenSearch)","body":"<p>I was facing same issue.\nDowngrading version of Elasticsearch-Rest-High-Level-Client to 7.10.2 worked for me.</p>\n"}],"owner":{"account_id":13121556,"reputation":747,"user_id":9478795,"display_name":"Nexonus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2211,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70216177,"answer_count":2,"score":4,"last_activity_date":1694520923,"creation_date":1638542976,"question_id":70216176,"body_markdown":"After migrating to AWS OpenSearch from Elasticsearch we get the following error when calling OpenSearch via the `Elasticsearch-Rest-High-Level-Client`:\r\n\r\n```\r\nelasticsearch.ElasticsearchException: Invalid or missing tagline [The OpenSearch Project: https://opensearch.org/]\r\n```","title":"elasticsearch.ElasticsearchException: Invalid or missing tagline (OpenSearch)","body":"<p>After migrating to AWS OpenSearch from Elasticsearch we get the following error when calling OpenSearch via the <code>Elasticsearch-Rest-High-Level-Client</code>:</p>\n<pre><code>elasticsearch.ElasticsearchException: Invalid or missing tagline [The OpenSearch Project: https://opensearch.org/]\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":91374,"reputation":1806,"user_id":250917,"accept_rate":82,"display_name":"slugmandrew"},"score":1,"creation_date":1395140303,"post_id":22477273,"comment_id":34191562,"body_markdown":"You have written both with underscores. And you need to provide more information if you want help. Is this in s JSP?","body":"You have written both with underscores. And you need to provide more information if you want help. Is this in s JSP?"},{"owner":{"account_id":91374,"reputation":1806,"user_id":250917,"accept_rate":82,"display_name":"slugmandrew"},"score":0,"creation_date":1395140397,"post_id":22477273,"comment_id":34191619,"body_markdown":"You seem to be appending `.pdf` to the filename when it isn&#39;t needed.","body":"You seem to be appending <code>.pdf</code> to the filename when it isn&#39;t needed."},{"owner":{"account_id":3905065,"reputation":171,"user_id":3231973,"accept_rate":83,"display_name":"AKST"},"score":0,"creation_date":1395141785,"post_id":22477273,"comment_id":34192450,"body_markdown":"I agree but why is it getting appended by underscore (_) in Firefox and chrome. whereas in IE, its working fine with the name downloadPdfFrominvDmsViewLibraryLink.pdf","body":"I agree but why is it getting appended by underscore (_) in Firefox and chrome. whereas in IE, its working fine with the name downloadPdfFrominvDmsViewLibraryLink.pdf"},{"owner":{"account_id":91374,"reputation":1806,"user_id":250917,"accept_rate":82,"display_name":"slugmandrew"},"score":0,"creation_date":1395143857,"post_id":22477273,"comment_id":34193874,"body_markdown":"Are the backslashes escaping the double quotes that follow them? Try: `&quot;inline;filename=&quot; + fileName;` maybe?","body":"Are the backslashes escaping the double quotes that follow them? Try: <code>&quot;inline;filename=&quot; + fileName;</code> maybe?"},{"owner":{"account_id":3905065,"reputation":171,"user_id":3231973,"accept_rate":83,"display_name":"AKST"},"score":0,"creation_date":1395148262,"post_id":22477273,"comment_id":34196832,"body_markdown":"response.setContentType(&quot;application/pdf&quot;);\n\tresponse.setHeader(&quot;Content-Disposition&quot;, &quot;inline;filename=\\\\&quot; + fileName + &quot;.pdf\\\\&quot;);           i have added the above code still facing the same issue. Kindly reply.","body":"response.setContentType(&quot;application/pdf&quot;); \tresponse.setHeader(&quot;Content-Disposition&quot;, &quot;inline;filename=\\\\&quot; + fileName + &quot;.pdf\\\\&quot;);           i have added the above code still facing the same issue. Kindly reply."},{"owner":{"account_id":2390577,"reputation":738,"user_id":2090496,"accept_rate":0,"display_name":"Hriju"},"score":0,"creation_date":1563106455,"post_id":22477273,"comment_id":100583854,"body_markdown":"Check if there is space at the beginning of the filename. I think this is because of the space at the beginning of the filename. If there is a space at the beginning then browser tries to append an underscore with the filename. I faced similar kind of issue while exporting to pdf from data table.","body":"Check if there is space at the beginning of the filename. I think this is because of the space at the beginning of the filename. If there is a space at the beginning then browser tries to append an underscore with the filename. I faced similar kind of issue while exporting to pdf from data table."}],"answers":[{"tags":[],"owner":{"account_id":328112,"reputation":2274,"user_id":650881,"accept_rate":100,"display_name":"user650881"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1518602633,"creation_date":1518602633,"answer_id":48784365,"question_id":22477273,"body_markdown":"I resolved a similar issue by removing the quotes from the filename value (which in my case were not required).\r\n\r\nI note that [rfc6266](https://www.rfc-editor.org/rfc/rfc6266) says a quoted-string for the filename value should be acceptable.  At this point I have not investigated further.","title":"Firefox and Chrome appending underscore before and after file name while Internet Explorer is working fine","body":"<p>I resolved a similar issue by removing the quotes from the filename value (which in my case were not required).</p>\n<p>I note that <a href=\"https://www.rfc-editor.org/rfc/rfc6266\" rel=\"noreferrer\">rfc6266</a> says a quoted-string for the filename value should be acceptable.  At this point I have not investigated further.</p>\n"},{"comments":[{"owner":{"account_id":10027205,"reputation":128,"user_id":10585586,"display_name":"Rik D"},"score":1,"creation_date":1563264273,"post_id":50329022,"comment_id":100631694,"body_markdown":"Weird, I fixed this issue with the complete opposite. I changed response.AddHeader(&quot;content-disposition&quot;, $&quot;attachment; filename=\\&quot;{ FileHelper.GetValidFileName(fileName) }\\&quot;&quot;); to response.AddHeader(&quot;content-disposition&quot;, $&quot;attachment; filename={ FileHelper.GetValidFileName(fileName) }&quot;);","body":"Weird, I fixed this issue with the complete opposite. I changed response.AddHeader(&quot;content-disposition&quot;, $&quot;attachment; filename=\\&quot;{ FileHelper.GetValidFileName(fileName) }\\&quot;&quot;); to response.AddHeader(&quot;content-disposition&quot;, $&quot;attachment; filename={ FileHelper.GetValidFileName(fileName) }&quot;);"}],"tags":[],"owner":{"account_id":4522672,"reputation":195,"user_id":3675376,"display_name":"Isidro.rn"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1526296755,"creation_date":1526296755,"answer_id":50329022,"question_id":22477273,"body_markdown":"I&#39;ve just faced the same problem and solved it thanks to user650881&#39;s reply.\r\n\r\nThe problem was I had this: \r\n\r\n    response.addHeader(&quot;Content-Disposition&quot;,&quot;attachment; filename=&quot; + filename + &quot;\\&quot;&quot;);\r\n\r\nAnd worked when I changed it to this: \r\n\r\n    response.addHeader(&quot;Content-Disposition&quot;,&quot;attachment; filename=\\&quot;&quot; + filename + &quot;\\&quot;&quot;);\r\n\r\nNote the \\&quot;&quot; after filename=\r\n\r\nHope it helps ","title":"Firefox and Chrome appending underscore before and after file name while Internet Explorer is working fine","body":"<p>I've just faced the same problem and solved it thanks to user650881's reply.</p>\n\n<p>The problem was I had this: </p>\n\n<pre><code>response.addHeader(\"Content-Disposition\",\"attachment; filename=\" + filename + \"\\\"\");\n</code></pre>\n\n<p>And worked when I changed it to this: </p>\n\n<pre><code>response.addHeader(\"Content-Disposition\",\"attachment; filename=\\\"\" + filename + \"\\\"\");\n</code></pre>\n\n<p>Note the \\\"\" after filename=</p>\n\n<p>Hope it helps </p>\n"},{"tags":[],"owner":{"account_id":7625569,"reputation":555,"user_id":5782155,"accept_rate":75,"display_name":"trajekolus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643111487,"creation_date":1643111487,"answer_id":70848169,"question_id":22477273,"body_markdown":"This happens when there are characters that are invalid for a file name.   \r\nC#&#39;s [Path.GetInvalidFileNameChars method][1] lists most.\r\n\r\nRound, curly and square brackets may be legal in a file name (it is on Windows), but files with them will also get the underscores added by browsers.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/dotnet/api/system.io.path.getinvalidfilenamechars?view=net-6.0","title":"Firefox and Chrome appending underscore before and after file name while Internet Explorer is working fine","body":"<p>This happens when there are characters that are invalid for a file name.<br />\nC#'s <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.io.path.getinvalidfilenamechars?view=net-6.0\" rel=\"nofollow noreferrer\">Path.GetInvalidFileNameChars method</a> lists most.</p>\n<p>Round, curly and square brackets may be legal in a file name (it is on Windows), but files with them will also get the underscores added by browsers.</p>\n"},{"tags":[],"owner":{"account_id":5087185,"reputation":1521,"user_id":4081368,"accept_rate":71,"display_name":"Axel Stone"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674570927,"creation_date":1674570927,"answer_id":75223017,"question_id":22477273,"body_markdown":"I&#39;ve got the same issue and I thought that **user650881**&#39;s answer is the solution, but in my case problem was I was parsing the file name from `Content-Disposition` wrongly, that is I kept the last quote `&quot;` char from `attachment; filename=&quot;filename.ext&quot;` string in the filename (`filename.ext&quot;`) which was automatically transformed to `_` when downloading the file like this:\r\n\r\n      const link = document.createElement(&#39;a&#39;);\r\n\r\n      link.href = window.URL.createObjectURL(blob);\r\n      // Contains &#39;filename.ext&quot;&#39; string which is replaced by &#39;filename.ext_`\r\n      link.download = fileName; \r\n      document.body.appendChild(link);\r\n      link.click();\r\n\r\n ","title":"Firefox and Chrome appending underscore before and after file name while Internet Explorer is working fine","body":"<p>I've got the same issue and I thought that <strong>user650881</strong>'s answer is the solution, but in my case problem was I was parsing the file name from <code>Content-Disposition</code> wrongly, that is I kept the last quote <code>&quot;</code> char from <code>attachment; filename=&quot;filename.ext&quot;</code> string in the filename (<code>filename.ext&quot;</code>) which was automatically transformed to <code>_</code> when downloading the file like this:</p>\n<pre><code>  const link = document.createElement('a');\n\n  link.href = window.URL.createObjectURL(blob);\n  // Contains 'filename.ext&quot;' string which is replaced by 'filename.ext_`\n  link.download = fileName; \n  document.body.appendChild(link);\n  link.click();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1543050,"reputation":695,"user_id":1437236,"display_name":"Pramod Lawate"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694520790,"creation_date":1694520790,"answer_id":77089001,"question_id":22477273,"body_markdown":"Try this one\r\n\r\n\r\n    context.Response.AddHeader(&quot;content-disposition&quot;, &quot;attachment;filename=\\&quot;&quot; + request.Filename + &quot;\\&quot;;&quot;);","title":"Firefox and Chrome appending underscore before and after file name while Internet Explorer is working fine","body":"<p>Try this one</p>\n<pre><code>context.Response.AddHeader(&quot;content-disposition&quot;, &quot;attachment;filename=\\&quot;&quot; + request.Filename + &quot;\\&quot;;&quot;);\n</code></pre>\n"}],"owner":{"account_id":3905065,"reputation":171,"user_id":3231973,"accept_rate":83,"display_name":"AKST"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8002,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":5,"score":11,"last_activity_date":1694520790,"creation_date":1395140206,"question_id":22477273,"body_markdown":"Firefox and Chrome are appending underscores before and after the file name while Internet Explorer is working fine.\r\n\r\nFirefox and Chrome give: `_Warrant_Amendment_5485_14_March_2014.pdf.pdf_`\r\n\r\nIE gives: `Warrant_Amendment_5485_14_March_2014.pdf.pdf`\r\n\r\nBelow is the code\r\n\r\n```\r\nresponse.setContentType(&quot;application/pdf&quot;);\r\nresponse.setHeader(&quot;Content-Disposition&quot;, &quot;inline;filename=\\&quot; + fileName + &quot;.pdf\\&quot;);\r\n```","title":"Firefox and Chrome appending underscore before and after file name while Internet Explorer is working fine","body":"<p>Firefox and Chrome are appending underscores before and after the file name while Internet Explorer is working fine.</p>\n<p>Firefox and Chrome give: <code>_Warrant_Amendment_5485_14_March_2014.pdf.pdf_</code></p>\n<p>IE gives: <code>Warrant_Amendment_5485_14_March_2014.pdf.pdf</code></p>\n<p>Below is the code</p>\n<pre><code>response.setContentType(&quot;application/pdf&quot;);\nresponse.setHeader(&quot;Content-Disposition&quot;, &quot;inline;filename=\\&quot; + fileName + &quot;.pdf\\&quot;);\n</code></pre>\n"},{"tags":["java","spring","telegram-bot"],"answers":[{"tags":[],"owner":{"account_id":24823918,"reputation":36,"user_id":18703950,"display_name":"Kyrillos Ntronov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1652861765,"creation_date":1652861765,"answer_id":72285494,"question_id":72284869,"body_markdown":"I think you should inject the Repository into the Bot.class via the constructor.\r\n\r\nIn order to do that you could retrieve a bean from SpringContext in your main:\r\n\r\n    ...\r\n    ConfigurableApplicationContext appContext = SpringApplication.run(Application.class, args);\r\n    BondsRepo repo = appContext.getBean(BondsRepo.class);\r\n    Bot bot = new Bot(repo);\r\n    ...\r\n    telegramBotsApi.registerBot(bot);\r\n    ...\r\n\r\n   ","title":"How to wire Spring Bean and Telegram Bot common java class?","body":"<p>I think you should inject the Repository into the Bot.class via the constructor.</p>\n<p>In order to do that you could retrieve a bean from SpringContext in your main:</p>\n<pre><code>...\nConfigurableApplicationContext appContext = SpringApplication.run(Application.class, args);\nBondsRepo repo = appContext.getBean(BondsRepo.class);\nBot bot = new Bot(repo);\n...\ntelegramBotsApi.registerBot(bot);\n...\n</code></pre>\n"}],"owner":{"account_id":8188385,"reputation":345,"user_id":6163475,"accept_rate":0,"display_name":"Anton Romanov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72285494,"answer_count":1,"score":0,"last_activity_date":1694520466,"creation_date":1652859025,"question_id":72284869,"body_markdown":"I have a standard TelegramBot realization like:\r\n\r\n    @SpringBootApplication\r\n    public class Application {\r\n    \r\n        public static void main(String[] args) {\r\n         ...\r\n         TelegramBotsApi telegramBotsApi = new TelegramBotsApi(DefaultBotSession.class);\r\n         telegramBotsApi.registerBot(new Bot());\r\n         ...\r\n\r\nAnd Bot class:\r\n\r\n    public class Bot extends TelegramLongPollingBot {\r\n    \r\n        @Override\r\n        public void onUpdateReceived(Update update) {\r\n            Message inMessage = getMessage(update);\r\n            fireMessage(inMessage.getChatId(), &quot;TEST&quot;);\r\n        }\r\n     ....\r\n\r\nAnd I have JPA Repository like \r\n\r\n    @Repository\r\n    public interface BondsRepo extends JpaRepository&lt;Bond, Long&gt;{\r\n    \tList&lt;Bond&gt; findAllByUser(ArNoteUser user);\r\n    }\r\n\r\nthat I use in my controller without any problem:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/investing&quot;)\r\n    public class InvestController {\r\n        private final BondsRepo bondsRepo;  \r\n        public InvestController(BondsRepo bondsRepo) {\r\n            this.bondsRepo = bondsRepo;\r\n        }\r\n    ...\r\n\r\nBut when I use that repo in Bot class I naturally get NPE, because Bot.class is a common Java class, but BondsRepo is Spring Bean and it does not accessible outside Spring Context.\r\n\r\nWhat is right way to access data by using JPA Repo in my Bot class? ","title":"How to wire Spring Bean and Telegram Bot common java class?","body":"<p>I have a standard TelegramBot realization like:</p>\n<pre><code>@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n     ...\n     TelegramBotsApi telegramBotsApi = new TelegramBotsApi(DefaultBotSession.class);\n     telegramBotsApi.registerBot(new Bot());\n     ...\n</code></pre>\n<p>And Bot class:</p>\n<pre><code>public class Bot extends TelegramLongPollingBot {\n\n    @Override\n    public void onUpdateReceived(Update update) {\n        Message inMessage = getMessage(update);\n        fireMessage(inMessage.getChatId(), &quot;TEST&quot;);\n    }\n ....\n</code></pre>\n<p>And I have JPA Repository like</p>\n<pre><code>@Repository\npublic interface BondsRepo extends JpaRepository&lt;Bond, Long&gt;{\n    List&lt;Bond&gt; findAllByUser(ArNoteUser user);\n}\n</code></pre>\n<p>that I use in my controller without any problem:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/investing&quot;)\npublic class InvestController {\n    private final BondsRepo bondsRepo;  \n    public InvestController(BondsRepo bondsRepo) {\n        this.bondsRepo = bondsRepo;\n    }\n...\n</code></pre>\n<p>But when I use that repo in Bot class I naturally get NPE, because Bot.class is a common Java class, but BondsRepo is Spring Bean and it does not accessible outside Spring Context.</p>\n<p>What is right way to access data by using JPA Repo in my Bot class?</p>\n"},{"tags":["java","elasticsearch"],"answers":[{"comments":[{"owner":{"account_id":6929813,"reputation":560,"user_id":5319625,"accept_rate":69,"display_name":"Oleg Gritsak"},"score":1,"creation_date":1685690661,"post_id":76387723,"comment_id":134699064,"body_markdown":"This code is for deprecated api (Elastic 7.x )","body":"This code is for deprecated api (Elastic 7.x )"},{"owner":{"account_id":13055830,"reputation":173,"user_id":9434729,"display_name":"Jelmen"},"score":0,"creation_date":1685691126,"post_id":76387723,"comment_id":134699143,"body_markdown":"@OlegGritsak thanks for your comment - you are right. If a look in the docs I only can find, the `searchAfter` solution","body":"@OlegGritsak thanks for your comment - you are right. If a look in the docs I only can find, the <code>searchAfter</code> solution"}],"tags":[],"owner":{"account_id":13055830,"reputation":173,"user_id":9434729,"display_name":"Jelmen"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685690800,"creation_date":1685688125,"answer_id":76387723,"question_id":76387505,"body_markdown":"**EDIT: this code uses the deprecated API for Elastic 7.x**\r\n\r\nYou can try to use the `SearchRequest` class:\r\n\r\n```java\r\n    var searchRequest = new SearchRequest(&quot;addressbook&quot;);\r\n    searchRequest.scroll(TimeValue.timeValueMinutes(1L));\r\n    searchRequest.source(new SearchSourceBuilder().size(100)); // Adjust the size according to your requirements\r\n    \r\n    SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);\r\n    String scrollId = searchResponse.getScrollId();\r\n    \r\n    while (true) {\r\n        SearchScrollRequest scrollRequest = new SearchScrollRequest(scrollId);\r\n        scrollRequest.scroll(TimeValue.timeValueMinutes(1L));\r\n    \r\n        SearchResponse scrollResponse = client.scroll(scrollRequest, RequestOptions.DEFAULT);\r\n        SearchHits hits = scrollResponse.getHits();\r\n    \r\n        // Process the documents in the hits\r\n        for (SearchHit hit : hits) {\r\n            // Process the individual document\r\n            String sourceAsString = hit.getSourceAsString();\r\n            // Perform your action here\r\n        }\r\n    \r\n        // Clear the scroll if no more hits are returned\r\n        if (hits.getHits().length == 0) {\r\n            ClearScrollRequest clearScrollRequest = new ClearScrollRequest();\r\n            clearScrollRequest.addScrollId(scrollId);\r\n            client.clearScroll(clearScrollRequest, RequestOptions.DEFAULT);\r\n            break;\r\n        }\r\n    \r\n        // Update the scrollId for the next iteration\r\n        scrollId = scrollResponse.getScrollId();\r\n    }\r\n```\r\n","title":"How to use scrolling in ElasticSearch with Java API Client (Elastic 8.x)","body":"<p><strong>EDIT: this code uses the deprecated API for Elastic 7.x</strong></p>\n<p>You can try to use the <code>SearchRequest</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    var searchRequest = new SearchRequest(&quot;addressbook&quot;);\n    searchRequest.scroll(TimeValue.timeValueMinutes(1L));\n    searchRequest.source(new SearchSourceBuilder().size(100)); // Adjust the size according to your requirements\n    \n    SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);\n    String scrollId = searchResponse.getScrollId();\n    \n    while (true) {\n        SearchScrollRequest scrollRequest = new SearchScrollRequest(scrollId);\n        scrollRequest.scroll(TimeValue.timeValueMinutes(1L));\n    \n        SearchResponse scrollResponse = client.scroll(scrollRequest, RequestOptions.DEFAULT);\n        SearchHits hits = scrollResponse.getHits();\n    \n        // Process the documents in the hits\n        for (SearchHit hit : hits) {\n            // Process the individual document\n            String sourceAsString = hit.getSourceAsString();\n            // Perform your action here\n        }\n    \n        // Clear the scroll if no more hits are returned\n        if (hits.getHits().length == 0) {\n            ClearScrollRequest clearScrollRequest = new ClearScrollRequest();\n            clearScrollRequest.addScrollId(scrollId);\n            client.clearScroll(clearScrollRequest, RequestOptions.DEFAULT);\n            break;\n        }\n    \n        // Update the scrollId for the next iteration\n        scrollId = scrollResponse.getScrollId();\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10707196,"reputation":369,"user_id":7880595,"accept_rate":86,"display_name":"Phreneticus"},"score":0,"creation_date":1694088430,"post_id":76424790,"comment_id":135846900,"body_markdown":"Can you guide me to any documentation on this ? Unfortunately, the official Elastic doc on the Java API Client seems rather poor to me...","body":"Can you guide me to any documentation on this ? Unfortunately, the official Elastic doc on the Java API Client seems rather poor to me..."}],"tags":[],"owner":{"account_id":18868507,"reputation":980,"user_id":13763713,"display_name":"oliver_t"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686151021,"creation_date":1686151021,"answer_id":76424790,"question_id":76387505,"body_markdown":"Whether you like it or not, but scrolling over large result sets is [not recommended in Elastic 8][1], so [search-after together with point-in-time][2] is the way to go: \r\n\r\n```java\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\n\r\nimport java.io.IOException;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\n\r\nimport co.elastic.clients.elasticsearch.ElasticsearchClient;\r\nimport co.elastic.clients.elasticsearch._types.FieldValue;\r\nimport co.elastic.clients.elasticsearch._types.Time;\r\nimport co.elastic.clients.elasticsearch._types.query_dsl.Query;\r\nimport co.elastic.clients.elasticsearch._types.query_dsl.QueryBuilders;\r\nimport co.elastic.clients.elasticsearch.core.ClosePointInTimeResponse;\r\nimport co.elastic.clients.elasticsearch.core.OpenPointInTimeResponse;\r\nimport co.elastic.clients.elasticsearch.core.SearchRequest;\r\nimport co.elastic.clients.elasticsearch.core.SearchResponse;\r\nimport co.elastic.clients.elasticsearch.core.search.Hit;\r\nimport co.elastic.clients.elasticsearch.core.search.HitsMetadata;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport lombok.ToString;\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\n@Slf4j\r\n@SpringBootTest\r\npublic class PagingTest {\r\n\r\n\t@Autowired\r\n\tprivate ElasticsearchClient elasticsearchClient;\r\n\r\n\t@Test\r\n\tpublic void testPointInTime() throws IOException {\r\n\r\n\t\t// Open a point-in-time\r\n\t\tfinal Time keepAlive = new Time.Builder().time(&quot;1m&quot;).build();\r\n\t\tfinal OpenPointInTimeResponse pitResp = elasticsearchClient.openPointInTime(req -&gt; req.index(&quot;books&quot;).keepAlive(keepAlive));\r\n\t\tfinal String pitId = pitResp.id();\r\n\r\n\t\tfinal Query query = QueryBuilders.match().field(&quot;author&quot;).query(&quot;Shakespeare&quot;).build()._toQuery();\r\n\r\n\t\t// Run your paginated queries\r\n\t\tString lastId = null;\r\n\t\tfor (int i = 0; i &lt; 3; i++) {\r\n\t\t\tSearchRequest.Builder searchRequest = new SearchRequest.Builder()\r\n\t\t\t\t\t.pit(pit -&gt; pit.id(pitId).keepAlive(keepAlive)) // It would be better to use the pit from the last result\r\n\t\t\t\t\t.size(100)\r\n\t\t\t\t\t.query(query)\r\n\t\t\t\t\t.source(source -&gt; source.filter(filter -&gt; filter.includes(&quot;id&quot;, &quot;title&quot;)))\r\n\t\t\t\t\t.sort(sort -&gt; sort.field(field -&gt; field.field(&quot;id&quot;))).timeout(&quot;10s&quot;);\r\n\r\n\t\t\t// Continue after last id\t\t\r\n\t\t\tif (lastId != null) {\r\n\t\t\t\tsearchRequest = searchRequest.searchAfter(FieldValue.of(lastId));\r\n\t\t\t}\r\n\r\n\t\t\tfinal SearchResponse&lt;Book&gt; searchResponse = elasticsearchClient.search(searchRequest.build(), Book.class);\r\n\t\t\tfinal HitsMetadata&lt;Book&gt; hitsMetadata = searchResponse.hits();\r\n\t\t\tassertThat(hitsMetadata.hits()).isNotEmpty();\r\n\r\n\t\t\tfor (Hit&lt;Book&gt; hit : hitsMetadata.hits()) {\r\n\t\t\t\tfinal Book book = hit.source();\r\n\t\t\t\tlog.info(&quot;{} | {} &quot;, i, book);\r\n\r\n\t\t\t\tlastId = book.getId(); // remember the last retrieved id\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Close your point-in-time to save resources\r\n\t\tfinal ClosePointInTimeResponse pitCloseResp = elasticsearchClient.closePointInTime(req -&gt; req.id(pitId));\r\n\t\tassertThat(pitCloseResp.succeeded()).isTrue();\r\n\t}\r\n\r\n\t@Getter\r\n\t@Setter\r\n\t@AllArgsConstructor\r\n\t@NoArgsConstructor\r\n\t@ToString\r\n\tprivate static class Book {\r\n\r\n\t\tprivate String id;\r\n\t\tprivate String title;\r\n\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/current/scroll-api.html\r\n  [2]: https://www.elastic.co/guide/en/elasticsearch/reference/current/paginate-search-results.html#search-after","title":"How to use scrolling in ElasticSearch with Java API Client (Elastic 8.x)","body":"<p>Whether you like it or not, but scrolling over large result sets is <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/scroll-api.html\" rel=\"nofollow noreferrer\">not recommended in Elastic 8</a>, so <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/paginate-search-results.html#search-after\" rel=\"nofollow noreferrer\">search-after together with point-in-time</a> is the way to go:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.assertj.core.api.Assertions.assertThat;\n\nimport java.io.IOException;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport co.elastic.clients.elasticsearch.ElasticsearchClient;\nimport co.elastic.clients.elasticsearch._types.FieldValue;\nimport co.elastic.clients.elasticsearch._types.Time;\nimport co.elastic.clients.elasticsearch._types.query_dsl.Query;\nimport co.elastic.clients.elasticsearch._types.query_dsl.QueryBuilders;\nimport co.elastic.clients.elasticsearch.core.ClosePointInTimeResponse;\nimport co.elastic.clients.elasticsearch.core.OpenPointInTimeResponse;\nimport co.elastic.clients.elasticsearch.core.SearchRequest;\nimport co.elastic.clients.elasticsearch.core.SearchResponse;\nimport co.elastic.clients.elasticsearch.core.search.Hit;\nimport co.elastic.clients.elasticsearch.core.search.HitsMetadata;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport lombok.ToString;\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\n@SpringBootTest\npublic class PagingTest {\n\n    @Autowired\n    private ElasticsearchClient elasticsearchClient;\n\n    @Test\n    public void testPointInTime() throws IOException {\n\n        // Open a point-in-time\n        final Time keepAlive = new Time.Builder().time(&quot;1m&quot;).build();\n        final OpenPointInTimeResponse pitResp = elasticsearchClient.openPointInTime(req -&gt; req.index(&quot;books&quot;).keepAlive(keepAlive));\n        final String pitId = pitResp.id();\n\n        final Query query = QueryBuilders.match().field(&quot;author&quot;).query(&quot;Shakespeare&quot;).build()._toQuery();\n\n        // Run your paginated queries\n        String lastId = null;\n        for (int i = 0; i &lt; 3; i++) {\n            SearchRequest.Builder searchRequest = new SearchRequest.Builder()\n                    .pit(pit -&gt; pit.id(pitId).keepAlive(keepAlive)) // It would be better to use the pit from the last result\n                    .size(100)\n                    .query(query)\n                    .source(source -&gt; source.filter(filter -&gt; filter.includes(&quot;id&quot;, &quot;title&quot;)))\n                    .sort(sort -&gt; sort.field(field -&gt; field.field(&quot;id&quot;))).timeout(&quot;10s&quot;);\n\n            // Continue after last id       \n            if (lastId != null) {\n                searchRequest = searchRequest.searchAfter(FieldValue.of(lastId));\n            }\n\n            final SearchResponse&lt;Book&gt; searchResponse = elasticsearchClient.search(searchRequest.build(), Book.class);\n            final HitsMetadata&lt;Book&gt; hitsMetadata = searchResponse.hits();\n            assertThat(hitsMetadata.hits()).isNotEmpty();\n\n            for (Hit&lt;Book&gt; hit : hitsMetadata.hits()) {\n                final Book book = hit.source();\n                log.info(&quot;{} | {} &quot;, i, book);\n\n                lastId = book.getId(); // remember the last retrieved id\n            }\n        }\n\n        // Close your point-in-time to save resources\n        final ClosePointInTimeResponse pitCloseResp = elasticsearchClient.closePointInTime(req -&gt; req.id(pitId));\n        assertThat(pitCloseResp.succeeded()).isTrue();\n    }\n\n    @Getter\n    @Setter\n    @AllArgsConstructor\n    @NoArgsConstructor\n    @ToString\n    private static class Book {\n\n        private String id;\n        private String title;\n\n    }\n}\n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6929813,"reputation":560,"user_id":5319625,"accept_rate":69,"display_name":"Oleg Gritsak"},"score":1,"creation_date":1686642609,"post_id":76449083,"comment_id":134823231,"body_markdown":"Looks like  ES 7.x api again","body":"Looks like  ES 7.x api again"}],"tags":[],"owner":{"account_id":25039438,"reputation":1,"user_id":18896474,"display_name":"Revant Soddi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686570377,"creation_date":1686460071,"answer_id":76449083,"question_id":76387505,"body_markdown":"    var searchRequest = new SearchRequest(&quot;addressbook&quot;);\r\n    searchRequest.scroll(TimeValue.timeValueMinutes(1L));\r\n    searchRequest.source(new SearchSourceBuilder().size(100)); // Adjust the size according to your requirements\r\n    \r\n    SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);\r\n    String scrollId = searchResponse.getScrollId();\r\n    \r\n    while (true) {\r\n        SearchScrollRequest scrollRequest = new SearchScrollRequest(scrollId);\r\n        scrollRequest.scroll(TimeValue.timeValueMinutes(1L));\r\n    \r\n        SearchResponse scrollResponse = client.scroll(scrollRequest, RequestOptions.DEFAULT);\r\n        SearchHits hits = scrollResponse.getHits();\r\n    \r\n        // Process the documents in the hits\r\n        for (SearchHit hit : hits) {\r\n            // Process the individual document\r\n            String sourceAsString = hit.getSourceAsString();\r\n            // Perform your action here\r\n        }\r\n    \r\n        // Clear the scroll if no more hits are returned\r\n        if (hits.getHits().length == 0) {\r\n            ClearScrollRequest clearScrollRequest = new ClearScrollRequest();\r\n            clearScrollRequest.addScrollId(scrollId);\r\n            client.clearScroll(clearScrollRequest, RequestOptions.DEFAULT);\r\n            break;\r\n        }\r\n    \r\n        // Update the scrollId for the next iteration\r\n        scrollId = scrollResponse.getScrollId();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\ntry to use `SearchRequest` class","title":"How to use scrolling in ElasticSearch with Java API Client (Elastic 8.x)","body":"<pre><code>var searchRequest = new SearchRequest(&quot;addressbook&quot;);\nsearchRequest.scroll(TimeValue.timeValueMinutes(1L));\nsearchRequest.source(new SearchSourceBuilder().size(100)); // Adjust the size according to your requirements\n\nSearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);\nString scrollId = searchResponse.getScrollId();\n\nwhile (true) {\n    SearchScrollRequest scrollRequest = new SearchScrollRequest(scrollId);\n    scrollRequest.scroll(TimeValue.timeValueMinutes(1L));\n\n    SearchResponse scrollResponse = client.scroll(scrollRequest, RequestOptions.DEFAULT);\n    SearchHits hits = scrollResponse.getHits();\n\n    // Process the documents in the hits\n    for (SearchHit hit : hits) {\n        // Process the individual document\n        String sourceAsString = hit.getSourceAsString();\n        // Perform your action here\n    }\n\n    // Clear the scroll if no more hits are returned\n    if (hits.getHits().length == 0) {\n        ClearScrollRequest clearScrollRequest = new ClearScrollRequest();\n        clearScrollRequest.addScrollId(scrollId);\n        client.clearScroll(clearScrollRequest, RequestOptions.DEFAULT);\n        break;\n    }\n\n    // Update the scrollId for the next iteration\n    scrollId = scrollResponse.getScrollId();\n}\n</code></pre>\n<p>try to use <code>SearchRequest</code> class</p>\n"}],"owner":{"account_id":6929813,"reputation":560,"user_id":5319625,"accept_rate":69,"display_name":"Oleg Gritsak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":749,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1694520363,"creation_date":1685685781,"question_id":76387505,"body_markdown":"I need to process whole collection in Elasticsearch 8, atomicity is not required, so, please do not suggest &quot;search after&quot;.\r\n\r\nI used scrolls before, but struggle to properly construct code for latest Java client.\r\n\r\n\r\n            var search = client.search(q -&gt; q.index(&quot;addressbook&quot;)\r\n                    .scroll(Time.of(t -&gt; t.time(&quot;1m&quot;))), AddressBookRecord.class);\r\n            String scrollId = search.scrollId();\r\n\r\n            ScrollResponse scroll = null;\r\n\r\n            do {\r\n\r\n                scroll = client.scroll(q -&gt; q.scrollId(scrollId), AddressBookRecord.class);\r\n\r\n                System.out.println(scroll.hits().total().value());\r\n                System.out.println(scroll.hits().hits().size());\r\n\r\n            } while (scroll.hits().total().value() &gt; 0L);\r\n\r\n`scroll.hits().hits()` is always empty, even on first call.\r\n\r\nAt the same time `scroll.hits().hits().size()` contains right number of documents.\r\n\r\nAlso, I cannot process documents, because `.hits()` is empty.\r\n","title":"How to use scrolling in ElasticSearch with Java API Client (Elastic 8.x)","body":"<p>I need to process whole collection in Elasticsearch 8, atomicity is not required, so, please do not suggest &quot;search after&quot;.</p>\n<p>I used scrolls before, but struggle to properly construct code for latest Java client.</p>\n<pre><code>        var search = client.search(q -&gt; q.index(&quot;addressbook&quot;)\n                .scroll(Time.of(t -&gt; t.time(&quot;1m&quot;))), AddressBookRecord.class);\n        String scrollId = search.scrollId();\n\n        ScrollResponse scroll = null;\n\n        do {\n\n            scroll = client.scroll(q -&gt; q.scrollId(scrollId), AddressBookRecord.class);\n\n            System.out.println(scroll.hits().total().value());\n            System.out.println(scroll.hits().hits().size());\n\n        } while (scroll.hits().total().value() &gt; 0L);\n</code></pre>\n<p><code>scroll.hits().hits()</code> is always empty, even on first call.</p>\n<p>At the same time <code>scroll.hits().hits().size()</code> contains right number of documents.</p>\n<p>Also, I cannot process documents, because <code>.hits()</code> is empty.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":419218,"reputation":2794,"user_id":796259,"display_name":"Friedrich"},"score":0,"creation_date":1694520259,"post_id":77087343,"comment_id":135898940,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29040199,"reputation":3,"user_id":22245209,"display_name":"IS THIS TWITTER"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694520228,"creation_date":1694507647,"question_id":77087343,"body_markdown":"Hi guys i&#39;m trying to learn how OOP works and i just get a bit confused how my program&#39;s working \r\n\r\nso my program is asking to input attributes like *price* and *material* to a &quot;part&quot; class then storing them in an array called &quot;Part_Array&quot; then i tried playing with inheritance and inherited a &quot;SRC&quot; class from the &quot;part&quot; class. \r\n\r\nthen what i plan to do is in another class called &quot; SortedArray&quot; i&#39;m going to loop through the elements of the &quot;partArray&quot; class and determine if the &quot;SRC&quot; is compatible with a certain element of the &quot;part_Array&quot; class. \r\n\r\nand if the element is compatible it&#39;s going to store the &quot;compatible&quot; parts onto a different array in a different class \r\n\r\ni tried doing a SortedArray Class but the logic is just messing me up. \r\n\r\ni&#39;m going to add a lot more conditions to it i&#39;m just building like the basic outline of the process. \r\n\r\n\r\n```\r\nimport java.text.DecimalFormat;\r\n\r\npublic class part {\r\n\r\n\tprivate String name; // a private string attribute of the name of the class\r\n\tprivate int price; //  a private integer attribute of the price of the part class\r\n\tprivate String make; // a private attribute of the material of the class\r\n\tprivate boolean recommended=false; // a private boolean attribute that makes the part class either recommended true or false \r\n\t\r\n\t\r\n\tpublic part(String name, int price , String material){ // satisfying the CONSTRUCTOR method requirement\r\n\t\t\r\n\t\tthis.name=name;\r\n\t\tthis.make=material;\r\n\t\tthis.price=price; \r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void recommended() {\r\n\t\t\r\n\t\t setRecommended(true);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic String getMaterial() { // method 2 gets the material of the part class\r\n\t\t\r\n\t\treturn make; \r\n\t}\r\n\t    \r\n    public int getPrice() {// method 3 gets the price of the part class\r\n    \t\r\n    \treturn price;\r\n    }\r\n\t\t\t\t\r\n\tpublic String toString() {\r\n\t\tDecimalFormat decimalFormat = new DecimalFormat(&quot;#,###.00&quot;);\r\n        String FormattedPrice = decimalFormat.format(price);\r\n\t\treturn  &quot;Part Name: &quot; + name +&quot;\\n&quot;+ &quot;Price: &quot; + FormattedPrice +&quot;\\n&quot;+ &quot;Part is made of: &quot; + make+ &quot;\\n&quot;; \r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\tpublic boolean isRecommended() {\r\n\t\treturn recommended;\r\n\t}\r\n\r\n\tpublic boolean setRecommended(boolean recommended) {\r\n\t\tthis.recommended = recommended;\r\n\t\treturn recommended;\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\npublic class Part_Array {\r\n\t  private part[] parts; // Array to store part objects\r\n\t    private int numberOfParts;// Counter to keep track of the number of parts\r\n\t    \t  \t\r\n\t    public Part_Array() {\r\n\t        parts = new part[100]; // Initialize the array with a size of 100\r\n\t        numberOfParts = 0;// Initialize the counter to 0   \r\n\t        \r\n\t    }\t    \r\n\t    // Method to add a new part to the array\r\n\t    public void addPart(part newPart) {\r\n\t        if (numberOfParts &lt; 100) {\r\n\t            parts[numberOfParts] = newPart;\r\n\t            numberOfParts++;\r\n\t        } else {\r\n\t            System.out.println(&quot;Cannot add more parts. The array is full.&quot;);\r\n\t        }\r\n\t    }\r\n\r\n\t    // Method to retrieve a part by its index in the array\r\n\t    public part getPart(int index) {\r\n\t        if (index &gt;= 0 &amp;&amp; index &lt; numberOfParts) {\r\n\t            return parts[index];\r\n\t        } else {\r\n\t            System.out.println(&quot;Invalid index.&quot;);\r\n\t            return null;\r\n\t        }\r\n\t    }\r\n\r\n\t    // Method to get the total number of parts in the array\r\n\t    public int getAllParts() {\r\n\t        return numberOfParts;\r\n\t    }\r\n\t    public void PrintList() {\r\n\t    \tfor (int i = 0; i &lt; getAllParts(); i++) {\r\n\t    \t\tSystem.out.println(parts[i].toString());\r\n\t    \t\t\r\n\t    \t}\r\n\t    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n```\r\nimport java.util.List;\r\n\r\npublic class SortedArray {\r\n    public void sort(){\r\n        Part_Array rcmd = new Part_Array();\r\n        Part_Array other = new Part_Array();\r\n\r\n        for (int i = 0; i &lt; manager.getAllParts(); i++) {\r\n            part retrievedPart = manager.getPart(i);\r\n            if (retrievedPart != null) {\r\n                if (retrievedPart.getPrice() &lt; srcInstance.getPrice()) {\r\n                    retrievedPart.recommended();\r\n                    rcmd.addPart(retrievedPart);\r\n                } else {\r\n                    other.addPart(retrievedPart);\r\n                }\r\n            }\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    public void printRecommendedParts(List&lt;part&gt; rcmdList) {\r\n        System.out.println(&quot;Recommended Parts:&quot;);\r\n        for (part p : rcmdList) {\r\n            if (p.isRecommended()) {\r\n                System.out.println(p.toString());\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nThis is the SRC class that i intend to build an object from to serve as the basis of comparison for the elements inside the &quot;part_Array&quot; Class\r\n\r\n\r\n```\r\npublic class SRC extends part {\r\n\r\n\tpublic SRC(String name, int price, String material) {\r\n\t\tsuper(name, price, material);\t\r\n\t\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to compare the elements inside of the array, which is an instance of a class then storing them in another array in another class","body":"<p>Hi guys i'm trying to learn how OOP works and i just get a bit confused how my program's working</p>\n<p>so my program is asking to input attributes like <em>price</em> and <em>material</em> to a &quot;part&quot; class then storing them in an array called &quot;Part_Array&quot; then i tried playing with inheritance and inherited a &quot;SRC&quot; class from the &quot;part&quot; class.</p>\n<p>then what i plan to do is in another class called &quot; SortedArray&quot; i'm going to loop through the elements of the &quot;partArray&quot; class and determine if the &quot;SRC&quot; is compatible with a certain element of the &quot;part_Array&quot; class.</p>\n<p>and if the element is compatible it's going to store the &quot;compatible&quot; parts onto a different array in a different class</p>\n<p>i tried doing a SortedArray Class but the logic is just messing me up.</p>\n<p>i'm going to add a lot more conditions to it i'm just building like the basic outline of the process.</p>\n<pre><code>import java.text.DecimalFormat;\n\npublic class part {\n\n    private String name; // a private string attribute of the name of the class\n    private int price; //  a private integer attribute of the price of the part class\n    private String make; // a private attribute of the material of the class\n    private boolean recommended=false; // a private boolean attribute that makes the part class either recommended true or false \n    \n    \n    public part(String name, int price , String material){ // satisfying the CONSTRUCTOR method requirement\n        \n        this.name=name;\n        this.make=material;\n        this.price=price; \n        \n    }\n    \n    public void recommended() {\n        \n         setRecommended(true);\n        \n    }\n    \n    \n    public String getMaterial() { // method 2 gets the material of the part class\n        \n        return make; \n    }\n        \n    public int getPrice() {// method 3 gets the price of the part class\n        \n        return price;\n    }\n                \n    public String toString() {\n        DecimalFormat decimalFormat = new DecimalFormat(&quot;#,###.00&quot;);\n        String FormattedPrice = decimalFormat.format(price);\n        return  &quot;Part Name: &quot; + name +&quot;\\n&quot;+ &quot;Price: &quot; + FormattedPrice +&quot;\\n&quot;+ &quot;Part is made of: &quot; + make+ &quot;\\n&quot;; \n        \n        \n    }\n\n    public boolean isRecommended() {\n        return recommended;\n    }\n\n    public boolean setRecommended(boolean recommended) {\n        this.recommended = recommended;\n        return recommended;\n    }\n    \n}\n\n</code></pre>\n<pre><code>public class Part_Array {\n      private part[] parts; // Array to store part objects\n        private int numberOfParts;// Counter to keep track of the number of parts\n                \n        public Part_Array() {\n            parts = new part[100]; // Initialize the array with a size of 100\n            numberOfParts = 0;// Initialize the counter to 0   \n            \n        }       \n        // Method to add a new part to the array\n        public void addPart(part newPart) {\n            if (numberOfParts &lt; 100) {\n                parts[numberOfParts] = newPart;\n                numberOfParts++;\n            } else {\n                System.out.println(&quot;Cannot add more parts. The array is full.&quot;);\n            }\n        }\n\n        // Method to retrieve a part by its index in the array\n        public part getPart(int index) {\n            if (index &gt;= 0 &amp;&amp; index &lt; numberOfParts) {\n                return parts[index];\n            } else {\n                System.out.println(&quot;Invalid index.&quot;);\n                return null;\n            }\n        }\n\n        // Method to get the total number of parts in the array\n        public int getAllParts() {\n            return numberOfParts;\n        }\n        public void PrintList() {\n            for (int i = 0; i &lt; getAllParts(); i++) {\n                System.out.println(parts[i].toString());\n                \n            }\n        }\n}\n\n</code></pre>\n<pre><code>import java.util.List;\n\npublic class SortedArray {\n    public void sort(){\n        Part_Array rcmd = new Part_Array();\n        Part_Array other = new Part_Array();\n\n        for (int i = 0; i &lt; manager.getAllParts(); i++) {\n            part retrievedPart = manager.getPart(i);\n            if (retrievedPart != null) {\n                if (retrievedPart.getPrice() &lt; srcInstance.getPrice()) {\n                    retrievedPart.recommended();\n                    rcmd.addPart(retrievedPart);\n                } else {\n                    other.addPart(retrievedPart);\n                }\n            }\n        }\n\n        \n    }\n\n    public void printRecommendedParts(List&lt;part&gt; rcmdList) {\n        System.out.println(&quot;Recommended Parts:&quot;);\n        for (part p : rcmdList) {\n            if (p.isRecommended()) {\n                System.out.println(p.toString());\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>This is the SRC class that i intend to build an object from to serve as the basis of comparison for the elements inside the &quot;part_Array&quot; Class</p>\n<pre><code>public class SRC extends part {\n\n    public SRC(String name, int price, String material) {\n        super(name, price, material);   \n        \n    }\n\n}\n</code></pre>\n"},{"tags":["java","azure","docker","powershell","azure-cli"],"comments":[{"owner":{"account_id":18506400,"reputation":13,"user_id":13482598,"display_name":"Dev Monsters"},"score":0,"creation_date":1650009583,"post_id":71881393,"comment_id":127021325,"body_markdown":"@Tuupertunut , can suggest a solution?","body":"@Tuupertunut , can suggest a solution?"}],"answers":[{"tags":[],"owner":{"account_id":21681667,"reputation":4284,"user_id":15997690,"display_name":"Delliganesh Sevanesan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650605340,"creation_date":1650605340,"answer_id":71963840,"question_id":71881393,"body_markdown":"&gt;Fetching in a docker container it&#39;s providing an invalid access token (binary content instead of JSON)\r\n\r\nThe error shows that you are **not converting the JSON** while getting the **Access Token**.\r\n\r\n### 1. Using AZ-CLI\r\n**you can convert the Access token from JSON.**\r\n~~~powershell\r\n# Get Access Token\r\naz  account  get-access-token  --resource  ms-graph  |  ConvertFrom-Json\r\n~~~\r\n\r\n### 2. Using PowerShell\r\nYou can use the **Get-AzAccessToken** to get the Access Token of ms-graph\r\n~~~powershell\r\n# Get Access Token\r\n$graphToken =Get-AzAccessToken -ResourceTypeName MSGraph\r\n~~~\r\n\r\n### Reference\r\n[Compare](https://scomnewbie.github.io/posts/clivspowershellaccesstoken/) **get-access-token** and **Get-AzAccessToken**","title":"PowerShellLibJava is fetching invalid JSON token from java code in docker container","body":"<blockquote>\n<p>Fetching in a docker container it's providing an invalid access token (binary content instead of JSON)</p>\n</blockquote>\n<p>The error shows that you are <strong>not converting the JSON</strong> while getting the <strong>Access Token</strong>.</p>\n<h3>1. Using AZ-CLI</h3>\n<p><strong>you can convert the Access token from JSON.</strong></p>\n<pre><code># Get Access Token\naz  account  get-access-token  --resource  ms-graph  |  ConvertFrom-Json\n</code></pre>\n<h3>2. Using PowerShell</h3>\n<p>You can use the <strong>Get-AzAccessToken</strong> to get the Access Token of ms-graph</p>\n<pre><code># Get Access Token\n$graphToken =Get-AzAccessToken -ResourceTypeName MSGraph\n</code></pre>\n<h3>Reference</h3>\n<p><a href=\"https://scomnewbie.github.io/posts/clivspowershellaccesstoken/\" rel=\"nofollow noreferrer\">Compare</a> <strong>get-access-token</strong> and <strong>Get-AzAccessToken</strong></p>\n"},{"tags":[],"owner":{"account_id":18506400,"reputation":13,"user_id":13482598,"display_name":"Dev Monsters"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694519913,"creation_date":1694519913,"answer_id":77088887,"question_id":71881393,"body_markdown":"After deep investigation, I found that command response start with a utf8 BOM which was making JSON response invalid in the program code. Where as Windows PowerShell does handle BOM itself.","title":"PowerShellLibJava is fetching invalid JSON token from java code in docker container","body":"<p>After deep investigation, I found that command response start with a utf8 BOM which was making JSON response invalid in the program code. Where as Windows PowerShell does handle BOM itself.</p>\n"}],"owner":{"account_id":18506400,"reputation":13,"user_id":13482598,"display_name":"Dev Monsters"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694519913,"creation_date":1650008863,"question_id":71881393,"body_markdown":"I am using PowerShellLibJava ([https://github.com/Tuupertunut/PowerShellLibJava][1]) in java code to fetch access token from azure.\r\nEarlier it was working fine in docker container.\r\nOn windows machine, its working fine but when fetching in docker container it&#39;s providing invalid access token (binary content instead of JSON)  \r\n\r\nTo login using command\r\n\r\n    az login --allow-no-subscriptions -u &lt;emailAddress&gt; -p &lt;password&gt;\r\n\r\nlogin successfully.\r\n\r\nusing this command through &quot;executeCommands&quot; to fetch token\r\n\r\n    az account get-access-token --resource-type ms-graph\r\n\r\ngroovy script and shell both are able to fetch valid access token in container but java code is failing to fetch the token.\r\n\r\n\r\n  [1]: https://github.com/Tuupertunut/PowerShellLibJava","title":"PowerShellLibJava is fetching invalid JSON token from java code in docker container","body":"<p>I am using PowerShellLibJava (<a href=\"https://github.com/Tuupertunut/PowerShellLibJava\" rel=\"nofollow noreferrer\">https://github.com/Tuupertunut/PowerShellLibJava</a>) in java code to fetch access token from azure.\nEarlier it was working fine in docker container.\nOn windows machine, its working fine but when fetching in docker container it's providing invalid access token (binary content instead of JSON)</p>\n<p>To login using command</p>\n<pre><code>az login --allow-no-subscriptions -u &lt;emailAddress&gt; -p &lt;password&gt;\n</code></pre>\n<p>login successfully.</p>\n<p>using this command through &quot;executeCommands&quot; to fetch token</p>\n<pre><code>az account get-access-token --resource-type ms-graph\n</code></pre>\n<p>groovy script and shell both are able to fetch valid access token in container but java code is failing to fetch the token.</p>\n"},{"tags":["java","spring","spring-boot","tomcat","spring-thymeleaf"],"comments":[{"owner":{"account_id":309603,"reputation":2817,"user_id":622145,"accept_rate":95,"display_name":"Twistleton"},"score":0,"creation_date":1694509072,"post_id":77087487,"comment_id":135896513,"body_markdown":"Have you ever set the Caches to invalid? Intellij IDEA: FILE | INVALIDATE CACHES  ...","body":"Have you ever set the Caches to invalid? Intellij IDEA: FILE | INVALIDATE CACHES  ..."}],"answers":[{"comments":[{"owner":{"account_id":29420939,"reputation":11,"user_id":22542681,"display_name":"AlexJP"},"score":1,"creation_date":1694519564,"post_id":77088236,"comment_id":135898768,"body_markdown":"Thanks for reply!\nNope, my project isn&#39;t running. I always manually stops servers. I reloaded my project, reloaded IDE, reloaded PC. Nothing helps.\nWhen I insert `server.port=8081` in `application.properties` I have the same result. If I desable whitelabel error by adding `server.error.whitelabel.enabled=false` into my `application.properties` I have standart tomcat 404 Not Found Page.\nPS Eddited my post.","body":"Thanks for reply! Nope, my project isn&#39;t running. I always manually stops servers. I reloaded my project, reloaded IDE, reloaded PC. Nothing helps. When I insert <code>server.port=8081</code> in <code>application.properties</code> I have the same result. If I desable whitelabel error by adding <code>server.error.whitelabel.enabled=false</code> into my <code>application.properties</code> I have standart tomcat 404 Not Found Page. PS Eddited my post."},{"owner":{"account_id":29322938,"reputation":1,"user_id":22466107,"display_name":"Nguyễn Quốc Thịnh"},"score":0,"creation_date":1694572555,"post_id":77088236,"comment_id":135907639,"body_markdown":"Have you fixed it yet? If not, You can send me your github repo to know more about the problem","body":"Have you fixed it yet? If not, You can send me your github repo to know more about the problem"}],"tags":[],"owner":{"account_id":29322938,"reputation":1,"user_id":22466107,"display_name":"Nguyễn Quốc Thịnh"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694514281,"creation_date":1694514160,"answer_id":77088236,"question_id":77087487,"body_markdown":"I think your project you were work on before is running. \r\n\r\nYou can try stop old project and start new project.\r\n\r\nOr you can change running `port`.\r\nInsert `server.port=8081` in your `application.properties`. your application will be run at `http://localhost:8081`","title":"After swithing from one project to another programm stop working","body":"<p>I think your project you were work on before is running.</p>\n<p>You can try stop old project and start new project.</p>\n<p>Or you can change running <code>port</code>.\nInsert <code>server.port=8081</code> in your <code>application.properties</code>. your application will be run at <code>http://localhost:8081</code></p>\n"}],"owner":{"account_id":29420939,"reputation":11,"user_id":22542681,"display_name":"AlexJP"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694519835,"creation_date":1694508758,"question_id":77087487,"body_markdown":"After swithing from my project to another (for testing purpose) and returing back to my project it stopped work. \r\nI use IDEA IDE, project - Java/Spring/Tomcat/Thymeleaf, browser - Firefox (but the same with Chrome).\r\nSo after writing my code I closed my project and opened another one. \r\nAfter testing it I opened my project and it starting get me an error:\r\n\r\n\r\n```\r\nWhitelabel Error Page\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\r\nMon Sep 11 12:31:59 EEST 2023\r\nThere was an unexpected error (type=Not Found, status=404).\r\n```\r\n\r\nBut I changed nothing in code!\r\nI turned back to another project and it works.\r\nTurns back to my code - that nasty error.(\r\n\r\nI read about that error but nothing helps.\r\nI didn&#39;t find the same problem&#39;s solution.\r\nI really didn&#39;t change any symbol in my code.\r\nJust swithed from one project to another.\r\nAnd now my project doesn&#39;t works.\r\n\r\nAlso I&#39;ve checked that two of my projects isn&#39;t running together. I always manually stops servers. I reloaded my project, reloaded IDE, reloaded PC. Nothing helps.\r\nChanging port also gave nothing.\r\n\r\nIf I desable whitelabel error by adding `server.error.whitelabel.enabled=false` into my `application.properties` I have standart Tomcat 404 Not Found Page.\r\n\r\nThis is the controller class:\r\n\r\n\r\n```\r\n@Controller\r\npublic class MainController {\r\n\r\n    @RequestMapping(&quot;/home&quot;)\r\n    public String home(Model model){\r\n        model.addAttribute(&quot;username&quot;, &quot;Kate&quot;);\r\n        model.addAttribute(&quot;color&quot;, &quot;red&quot;);\r\n        return &quot;home.html&quot;;\r\n    }\r\n}\r\n```\r\n\r\nAnd this is html code:\r\n\r\n\r\n```\r\n&lt;body&gt;\r\n    &lt;h1&gt;Welcome home!\r\n\r\n        &lt;span th:style=&quot;&#39;color:&#39; + ${color}&quot;\r\n              th:text=&quot;${username}&quot;&gt;\r\n        &lt;/span&gt;\r\n    &lt;/h1&gt;\r\n&lt;/body&gt;\r\n```\r\n\r\nAs I mentioned earlier before switching to another project this code worked perfectly.\r\nBut now it doesn&#39;t.","title":"After swithing from one project to another programm stop working","body":"<p>After swithing from my project to another (for testing purpose) and returing back to my project it stopped work.\nI use IDEA IDE, project - Java/Spring/Tomcat/Thymeleaf, browser - Firefox (but the same with Chrome).\nSo after writing my code I closed my project and opened another one.\nAfter testing it I opened my project and it starting get me an error:</p>\n<pre><code>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\nMon Sep 11 12:31:59 EEST 2023\nThere was an unexpected error (type=Not Found, status=404).\n</code></pre>\n<p>But I changed nothing in code!\nI turned back to another project and it works.\nTurns back to my code - that nasty error.(</p>\n<p>I read about that error but nothing helps.\nI didn't find the same problem's solution.\nI really didn't change any symbol in my code.\nJust swithed from one project to another.\nAnd now my project doesn't works.</p>\n<p>Also I've checked that two of my projects isn't running together. I always manually stops servers. I reloaded my project, reloaded IDE, reloaded PC. Nothing helps.\nChanging port also gave nothing.</p>\n<p>If I desable whitelabel error by adding <code>server.error.whitelabel.enabled=false</code> into my <code>application.properties</code> I have standart Tomcat 404 Not Found Page.</p>\n<p>This is the controller class:</p>\n<pre><code>@Controller\npublic class MainController {\n\n    @RequestMapping(&quot;/home&quot;)\n    public String home(Model model){\n        model.addAttribute(&quot;username&quot;, &quot;Kate&quot;);\n        model.addAttribute(&quot;color&quot;, &quot;red&quot;);\n        return &quot;home.html&quot;;\n    }\n}\n</code></pre>\n<p>And this is html code:</p>\n<pre><code>&lt;body&gt;\n    &lt;h1&gt;Welcome home!\n\n        &lt;span th:style=&quot;'color:' + ${color}&quot;\n              th:text=&quot;${username}&quot;&gt;\n        &lt;/span&gt;\n    &lt;/h1&gt;\n&lt;/body&gt;\n</code></pre>\n<p>As I mentioned earlier before switching to another project this code worked perfectly.\nBut now it doesn't.</p>\n"},{"tags":["java","netbeans","netbeans-8"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":1,"creation_date":1642414047,"post_id":70739230,"comment_id":125055578,"body_markdown":"`Strangely I don&#39;t have the same problem with regular Java file choosers which I use in my projects.` Well, what file chooser are you using that creates this specific problem or are you talking about NetBeans itself? Maybe it needs more permissions to access the file system on the network.","body":"<code>Strangely I don&#39;t have the same problem with regular Java file choosers which I use in my projects.</code> Well, what file chooser are you using that creates this specific problem or are you talking about NetBeans itself? Maybe it needs more permissions to access the file system on the network."},{"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"score":0,"creation_date":1642455866,"post_id":70739230,"comment_id":125070868,"body_markdown":"I updated the question as of your proposal :)","body":"I updated the question as of your proposal :)"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1642491541,"post_id":70739230,"comment_id":125077617,"body_markdown":"Some basic things to check while the file navigation is slow: [1] In Windows Task Manager verify that there is no abnormal use of memory, CPU or I/O. [2] Verify that there is plenty of free space on your hard drives, especially the C: drive. [3] Use the Windows Event Viewer app to check the System and Application Event logs for unusual errors/activity. [4] Review the NetBeans log file (View &gt; IDE Log) for errors and stack traces. [5] In NetBeans go to the Services panel, select Maven Repositories &gt; Local, right click and select Update Index from the context menu. Does it complete quickly?","body":"Some basic things to check while the file navigation is slow: [1] In Windows Task Manager verify that there is no abnormal use of memory, CPU or I/O. [2] Verify that there is plenty of free space on your hard drives, especially the C: drive. [3] Use the Windows Event Viewer app to check the System and Application Event logs for unusual errors/activity. [4] Review the NetBeans log file (View &gt; IDE Log) for errors and stack traces. [5] In NetBeans go to the Services panel, select Maven Repositories &gt; Local, right click and select Update Index from the context menu. Does it complete quickly?"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1642492423,"post_id":70739230,"comment_id":125077921,"body_markdown":"Also: [1] The fact that you are having problems on releases 8.2 and 12 of NetBeans suggests that this might be an environment issue rather than a NetBeans problem. [2] No release of NetBeans 12 supports Java 12! Instead, all NetBeans 12.x releases support the LTS versions JDK 8 and JDK 11, plus whatever JDK is current when NetBeans 12.x is released. [3] Which specific version of NetBeans 12 are you running? If it is 12.0 then you should use JDK 11 or JDK 14 rather than JDK 12.","body":"Also: [1] The fact that you are having problems on releases 8.2 and 12 of NetBeans suggests that this might be an environment issue rather than a NetBeans problem. [2] No release of NetBeans 12 supports Java 12! Instead, all NetBeans 12.x releases support the LTS versions JDK 8 and JDK 11, plus whatever JDK is current when NetBeans 12.x is released. [3] Which specific version of NetBeans 12 are you running? If it is 12.0 then you should use JDK 11 or JDK 14 rather than JDK 12."},{"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"score":0,"creation_date":1642495812,"post_id":70739230,"comment_id":125079223,"body_markdown":"Sorry it was a typo I didn&#39;t see, I&#39;m using JDK 17.0.1 with Netbeans 12.0. Should I try JDK 14 instead for my tests?","body":"Sorry it was a typo I didn&#39;t see, I&#39;m using JDK 17.0.1 with Netbeans 12.0. Should I try JDK 14 instead for my tests?"},{"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"score":0,"creation_date":1642496576,"post_id":70739230,"comment_id":125079514,"body_markdown":"Update index is immediate for Maven","body":"Update index is immediate for Maven"},{"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"score":0,"creation_date":1642496959,"post_id":70739230,"comment_id":125079658,"body_markdown":"But I&#39;m not able to see anything concerning Netbeans in the event viewer, I will look closer this afternoon.","body":"But I&#39;m not able to see anything concerning Netbeans in the event viewer, I will look closer this afternoon."},{"owner":{"account_id":1402825,"reputation":647,"user_id":1331274,"accept_rate":67,"display_name":"Zbyszek"},"score":0,"creation_date":1645464048,"post_id":70739230,"comment_id":125873105,"body_markdown":"The same behavior for NetBeans 12.4 and 12.5","body":"The same behavior for NetBeans 12.4 and 12.5"}],"answers":[{"comments":[{"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"score":0,"creation_date":1643572306,"post_id":70907371,"comment_id":125370431,"body_markdown":"Thanks!! I will do that!!","body":"Thanks!! I will do that!!"},{"owner":{"account_id":1402825,"reputation":647,"user_id":1331274,"accept_rate":67,"display_name":"Zbyszek"},"score":1,"creation_date":1645464290,"post_id":70907371,"comment_id":125873203,"body_markdown":"Tried. Don&#39;t see a difference. Don&#39;t know where to set &quot;default location for the open file dialog&quot;","body":"Tried. Don&#39;t see a difference. Don&#39;t know where to set &quot;default location for the open file dialog&quot;"}],"tags":[],"owner":{"account_id":24074554,"reputation":41,"user_id":18050076,"display_name":"Chris Master"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660645518,"creation_date":1643473170,"answer_id":70907371,"question_id":70739230,"body_markdown":"There is a bug in netbeans with links from the desktop, that behaves like you described. Try to remove all links from the desktop and default location for the open file dialog.\r\n\r\n[issues.apache.org/jira/browse/NETBEANS-1537][1]\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/NETBEANS-1537","title":"Navigating the file system with netbeans is VERY slow","body":"<p>There is a bug in netbeans with links from the desktop, that behaves like you described. Try to remove all links from the desktop and default location for the open file dialog.</p>\n<p><a href=\"https://issues.apache.org/jira/browse/NETBEANS-1537\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/NETBEANS-1537</a></p>\n"},{"comments":[{"owner":{"account_id":1490341,"reputation":1391,"user_id":1397564,"accept_rate":73,"display_name":"Lalith J."},"score":1,"creation_date":1689166865,"post_id":71823282,"comment_id":135174750,"body_markdown":"I had the same issue . I moved all files from the desktop to another folder to check and Netbeans (Netbeans 18) started to working fine. Reference\nhttps://github.com/apache/netbeans/issues/4673#issuecomment-1255106193","body":"I had the same issue . I moved all files from the desktop to another folder to check and Netbeans (Netbeans 18) started to working fine. Reference <a href=\"https://github.com/apache/netbeans/issues/4673#issuecomment-1255106193\" rel=\"nofollow noreferrer\">github.com/apache/netbeans/issues/4673#issuecomment-12551061&zwnj;&#8203;93</a>"}],"tags":[],"owner":{"account_id":1402825,"reputation":647,"user_id":1331274,"accept_rate":67,"display_name":"Zbyszek"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649657044,"creation_date":1649657044,"answer_id":71823282,"question_id":70739230,"body_markdown":"It was a BROKEN PATH in a link on the desktop in Windows 10, in my case.\r\n\r\nNetBeans 12.5 -&gt; Creating a new project dialog, than &quot;Browse&quot; to choose appropriate directory took a very long time. I tried to test links on my desktop. I found one old &quot;broken link&quot;. Broken in terms - it pointed out to non existent path. I corrected this path in this link and... voil&#224;, magically NetBeans is working correctly.","title":"Navigating the file system with netbeans is VERY slow","body":"<p>It was a BROKEN PATH in a link on the desktop in Windows 10, in my case.</p>\n<p>NetBeans 12.5 -&gt; Creating a new project dialog, than &quot;Browse&quot; to choose appropriate directory took a very long time. I tried to test links on my desktop. I found one old &quot;broken link&quot;. Broken in terms - it pointed out to non existent path. I corrected this path in this link and... voilà, magically NetBeans is working correctly.</p>\n"},{"tags":[],"owner":{"account_id":12896543,"reputation":75,"user_id":9326717,"display_name":"Erik Jur&#237;ček"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660237137,"creation_date":1660237137,"answer_id":73324412,"question_id":70739230,"body_markdown":"I had the same problem. As they wrote here, it is necessary to check the links on the desktop. Removing bad links helped me.","title":"Navigating the file system with netbeans is VERY slow","body":"<p>I had the same problem. As they wrote here, it is necessary to check the links on the desktop. Removing bad links helped me.</p>\n"},{"tags":[],"owner":{"account_id":23020147,"reputation":1,"user_id":17141319,"display_name":"Pascal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661970314,"creation_date":1661505439,"answer_id":73498743,"question_id":70739230,"body_markdown":"I find that this happens when I run Netbeans without administrator rights.\r\nWith admin rights it works fine.","title":"Navigating the file system with netbeans is VERY slow","body":"<p>I find that this happens when I run Netbeans without administrator rights.\nWith admin rights it works fine.</p>\n"},{"comments":[{"owner":{"account_id":6655393,"reputation":2561,"user_id":5136131,"display_name":"Positive Navid"},"score":1,"creation_date":1668933674,"post_id":74475937,"comment_id":131522900,"body_markdown":"please modify or remove your answer. Thanks in advance","body":"please modify or remove your answer. Thanks in advance"}],"tags":[],"owner":{"account_id":26962866,"reputation":21,"user_id":20530259,"display_name":"Matt Mercer"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1668690148,"creation_date":1668690148,"answer_id":74475937,"question_id":70739230,"body_markdown":"Had this issue with Netbeans 15. Resolved it by removing a broken shortcut from my desktop.","title":"Navigating the file system with netbeans is VERY slow","body":"<p>Had this issue with Netbeans 15. Resolved it by removing a broken shortcut from my desktop.</p>\n"},{"comments":[{"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"score":0,"creation_date":1669219362,"post_id":74548915,"comment_id":131596151,"body_markdown":"impressive!!! And you are right, so strange!","body":"impressive!!! And you are right, so strange!"}],"tags":[],"owner":{"account_id":333630,"reputation":21,"user_id":8800472,"display_name":"Stratcat"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669215827,"creation_date":1669215827,"answer_id":74548915,"question_id":70739230,"body_markdown":"Ok -- this is crazy -- but after trying everything listed, here is what finally worked for me.\r\nI created a Batch file on the desktop to point to the netbeans64.exe app.  the secret for me was to *NOT* do a cd to the netbeans location.. but to call the app in using the full path. Here is what my batch file looks like \r\n\r\n&quot;C:\\Program Files\\NetBeans-15\\netbeans\\bin\\netbeans64.exe&quot; \r\n\r\nI know it seems way too easy.. but it works for me.  As Sam Snead said about the latest golf gear back in the 60&#39;s  &quot;I ain&#39;t no scientist. just a believer..&quot; LOL!!!","title":"Navigating the file system with netbeans is VERY slow","body":"<p>Ok -- this is crazy -- but after trying everything listed, here is what finally worked for me.\nI created a Batch file on the desktop to point to the netbeans64.exe app.  the secret for me was to <em>NOT</em> do a cd to the netbeans location.. but to call the app in using the full path. Here is what my batch file looks like</p>\n<p>&quot;C:\\Program Files\\NetBeans-15\\netbeans\\bin\\netbeans64.exe&quot;</p>\n<p>I know it seems way too easy.. but it works for me.  As Sam Snead said about the latest golf gear back in the 60's  &quot;I ain't no scientist. just a believer..&quot; LOL!!!</p>\n"},{"tags":[],"owner":{"account_id":24474096,"reputation":31,"user_id":18393390,"display_name":"ΔΕΙΜΟΣ"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1676151935,"creation_date":1676151935,"answer_id":75423500,"question_id":70739230,"body_markdown":"I had the same issue on Windows, thanks to you guys I solved it by removing the symbolic links (shortcuts) from the desktop, **but not from any desktop**, I mean that this method didn&#39;t work for me when I removed them from the user desktop &quot;**C:\\Users\\user\\Desktop**&quot;, it only worked when I removed them from the public desktop, which is located at &quot;**C:\\Users\\Public\\Desktop**&quot;.\r\n\r\n*I hope this clarification helps and sorry I don&#39;t have enough reputation here on StackOverflow to comment, so I had to post this as an answer....*","title":"Navigating the file system with netbeans is VERY slow","body":"<p>I had the same issue on Windows, thanks to you guys I solved it by removing the symbolic links (shortcuts) from the desktop, <strong>but not from any desktop</strong>, I mean that this method didn't work for me when I removed them from the user desktop &quot;<strong>C:\\Users\\user\\Desktop</strong>&quot;, it only worked when I removed them from the public desktop, which is located at &quot;<strong>C:\\Users\\Public\\Desktop</strong>&quot;.</p>\n<p><em>I hope this clarification helps and sorry I don't have enough reputation here on StackOverflow to comment, so I had to post this as an answer....</em></p>\n"},{"tags":[],"owner":{"account_id":4792834,"reputation":682,"user_id":3871504,"display_name":"Vindic"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694518787,"creation_date":1694518787,"answer_id":77088747,"question_id":70739230,"body_markdown":"In my case the guilty one was my enterprise AntiVirus (Trend Micro Apex).\r\n\r\nUnloading it, ended the slowness immediately.\r\n\r\nFor the record I was Using Netbeans 19 with the JVM 17.08 on Windows 11.","title":"Navigating the file system with netbeans is VERY slow","body":"<p>In my case the guilty one was my enterprise AntiVirus (Trend Micro Apex).</p>\n<p>Unloading it, ended the slowness immediately.</p>\n<p>For the record I was Using Netbeans 19 with the JVM 17.08 on Windows 11.</p>\n"}],"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3132,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":77088747,"answer_count":8,"score":5,"last_activity_date":1694518787,"creation_date":1642412358,"question_id":70739230,"body_markdown":"Since a few days, navigating the file system with Netbeans is VERY slow (more than two minutes to access a file, and if you have to navigate a file system, it is true every time. I have exactly the same problem after clearing the cache, and with Netbeans 8.2 and Netbeans 12 (Netbeans 8 with Java 8, and Netbeans 12 with Java 17 in my tests).\r\n\r\nStrangely I don&#39;t have the same problem with regular Java file choosers which I use in my projects. For example, if I click on &quot;Open Project&quot;, the IDE is frozen for sometimes 2 or 3 minutes before I can see the file navigator.\r\n\r\nWhen I am looking in the task manager while trying to open a project for example, it appear that Network usage is very low (1% to 0%), CPU also very low (less than 2%) \r\n\r\nI am talking about Netbeans itself, for example if I want to open an existing project, or adding a jar file to the list of Jar libraries for an existing project\r\n\r\nThe standard Swing JFileChooser works correctly. With this example code the navigation is immediate (as expected): \r\n\r\n    JFileChooser chooser = new JFileChooser();            \r\n    chooser.setDialogType(JFileChooser.OPEN_DIALOG);         \r\n    chooser.setDialogTitle(&quot;Test FileChooser&quot;);  \r\n    chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);         \r\n    int ret = chooser.showOpenDialog(null);         \r\n    if (ret == JFileChooser.APPROVE_OPTION{ \r\n       System.out.println(chooser.getSelectedFile().getAbsolutePath());        \r\n    }\r\n\r\nI am on Windows, on my workplace network (I am working on local files on my PC, but there are two remote drives which are accessible on the network). I only have problems with Netbeans, other apps have no problem with the file system.\r\n\r\nMy problem is with Netbeans itself navigating the file system (for example opening an existing project, or adding a jar file as a library for a project)\r\n\r\nThis looks to behave exactly as this bug: https://bz.apache.org/netbeans/show_bug.cgi?id=42079, except that it does not happen with the Swing `JFileChooser` as shown above.\r\n\r\nIs it a known problem, and if it is, is there a mean to fix it? I was thinking for example about a setting on the command line used to start Netbeans.","title":"Navigating the file system with netbeans is VERY slow","body":"<p>Since a few days, navigating the file system with Netbeans is VERY slow (more than two minutes to access a file, and if you have to navigate a file system, it is true every time. I have exactly the same problem after clearing the cache, and with Netbeans 8.2 and Netbeans 12 (Netbeans 8 with Java 8, and Netbeans 12 with Java 17 in my tests).</p>\n<p>Strangely I don't have the same problem with regular Java file choosers which I use in my projects. For example, if I click on &quot;Open Project&quot;, the IDE is frozen for sometimes 2 or 3 minutes before I can see the file navigator.</p>\n<p>When I am looking in the task manager while trying to open a project for example, it appear that Network usage is very low (1% to 0%), CPU also very low (less than 2%)</p>\n<p>I am talking about Netbeans itself, for example if I want to open an existing project, or adding a jar file to the list of Jar libraries for an existing project</p>\n<p>The standard Swing JFileChooser works correctly. With this example code the navigation is immediate (as expected):</p>\n<pre><code>JFileChooser chooser = new JFileChooser();            \nchooser.setDialogType(JFileChooser.OPEN_DIALOG);         \nchooser.setDialogTitle(&quot;Test FileChooser&quot;);  \nchooser.setFileSelectionMode(JFileChooser.FILES_ONLY);         \nint ret = chooser.showOpenDialog(null);         \nif (ret == JFileChooser.APPROVE_OPTION{ \n   System.out.println(chooser.getSelectedFile().getAbsolutePath());        \n}\n</code></pre>\n<p>I am on Windows, on my workplace network (I am working on local files on my PC, but there are two remote drives which are accessible on the network). I only have problems with Netbeans, other apps have no problem with the file system.</p>\n<p>My problem is with Netbeans itself navigating the file system (for example opening an existing project, or adding a jar file as a library for a project)</p>\n<p>This looks to behave exactly as this bug: <a href=\"https://bz.apache.org/netbeans/show_bug.cgi?id=42079\" rel=\"noreferrer\">https://bz.apache.org/netbeans/show_bug.cgi?id=42079</a>, except that it does not happen with the Swing <code>JFileChooser</code> as shown above.</p>\n<p>Is it a known problem, and if it is, is there a mean to fix it? I was thinking for example about a setting on the command line used to start Netbeans.</p>\n"},{"tags":["java","performance","performance-testing","jfr","java-mission-control"],"answers":[{"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694518361,"post_id":77085858,"comment_id":135898502,"body_markdown":"You have just described to me my current situation and my failed attempts. It is doing exactly what you described that prompted to me to ask my question. I want to be able to record the FULL application&#39;s lifetime, and have the recording automatically close once the application does. I&#39;ll edit the question to be more clear.","body":"You have just described to me my current situation and my failed attempts. It is doing exactly what you described that prompted to me to ask my question. I want to be able to record the FULL application&#39;s lifetime, and have the recording automatically close once the application does. I&#39;ll edit the question to be more clear."},{"owner":{"account_id":9827,"reputation":6784,"user_id":2049208,"display_name":"Kire Haglin"},"score":0,"creation_date":1694560707,"post_id":77085858,"comment_id":135906683,"body_markdown":"It&#39;s not possible. Once the application exits, the connection to JMC is dropped, and the file can&#39;t be retrieved.","body":"It&#39;s not possible. Once the application exits, the connection to JMC is dropped, and the file can&#39;t be retrieved."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694561377,"post_id":77085858,"comment_id":135906736,"body_markdown":"To confirm, are you telling me that it&#39;s not possible to do in JMC ***at all***? If so, can you point me to some documentation saying that, or are you getting that from the lack of options in JMC? Either way, if it really is true that JMC is able to do what I described, I&#39;ll award you the bounty. But I&#39;m going to wait the full duration to make absolutely sure. That said, could you edit your answer to reflect this new information? If we&#39;re going to say it is not possible, let&#39;s lead with that, and then the rest of your original answer will be a good workaround for that lack of functionality.","body":"To confirm, are you telling me that it&#39;s not possible to do in JMC <b><i>at all</i></b>? If so, can you point me to some documentation saying that, or are you getting that from the lack of options in JMC? Either way, if it really is true that JMC is able to do what I described, I&#39;ll award you the bounty. But I&#39;m going to wait the full duration to make absolutely sure. That said, could you edit your answer to reflect this new information? If we&#39;re going to say it is not possible, let&#39;s lead with that, and then the rest of your original answer will be a good workaround for that lack of functionality."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694561447,"post_id":77085858,"comment_id":135906739,"body_markdown":"Especially that &quot;start the recording from the command line and open the file&quot;, that&#39;s definitely the best of your list of options. I&#39;d appreciate it if you could start your answer with that suggestion after mentioning that it is not possible to do in JMC alone.","body":"Especially that &quot;start the recording from the command line and open the file&quot;, that&#39;s definitely the best of your list of options. I&#39;d appreciate it if you could start your answer with that suggestion after mentioning that it is not possible to do in JMC alone."},{"owner":{"account_id":9827,"reputation":6784,"user_id":2049208,"display_name":"Kire Haglin"},"score":1,"creation_date":1694563478,"post_id":77085858,"comment_id":135906913,"body_markdown":"When the process is dead, the Java class implementing the FlightRecorderMXBean can&#39;t execute. It&#39;s no different than you can&#39;t transfer a HTML page after a web server has exited.","body":"When the process is dead, the Java class implementing the FlightRecorderMXBean can&#39;t execute. It&#39;s no different than you can&#39;t transfer a HTML page after a web server has exited."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694563599,"post_id":77085858,"comment_id":135906923,"body_markdown":"Makes a lot of sense, ty vm. I&#39;ll still wait the time, in case someone knows of some plugin that you can add to it to make it work as desired, but you have convinced me.","body":"Makes a lot of sense, ty vm. I&#39;ll still wait the time, in case someone knows of some plugin that you can add to it to make it work as desired, but you have convinced me."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694567891,"post_id":77085858,"comment_id":135907301,"body_markdown":"Lol, I see now that you are someone who helped build JFR. In that case, I&#39;ll award the bounty now and accept the answer. Apologies.","body":"Lol, I see now that you are someone who helped build JFR. In that case, I&#39;ll award the bounty now and accept the answer. Apologies."}],"tags":[],"owner":{"account_id":9827,"reputation":6784,"user_id":2049208,"display_name":"Kire Haglin"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694488120,"creation_date":1694488120,"answer_id":77085858,"question_id":77052179,"body_markdown":"Right-click in the JVM Browser and select &quot;Start Flight Recording ...&quot;, specify the amount of time you want the recording to be, for example 10 minutes. When the recording is finished, recording data is transferred and displayed in JMC.\r\n\r\nIf the application exits before the specified time, the recording will be lost. You will have to make sure the application doesn&#39;t exit, or specify a shorter recording time, or start the recording from command line and open the file.\r\n","title":"How to end and save Java Flight Recorder recording in Java Mission Control when application ends?","body":"<p>Right-click in the JVM Browser and select &quot;Start Flight Recording ...&quot;, specify the amount of time you want the recording to be, for example 10 minutes. When the recording is finished, recording data is transferred and displayed in JMC.</p>\n<p>If the application exits before the specified time, the recording will be lost. You will have to make sure the application doesn't exit, or specify a shorter recording time, or start the recording from command line and open the file.</p>\n"}],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77085858,"answer_count":1,"score":1,"last_activity_date":1694518430,"creation_date":1694005447,"question_id":77052179,"body_markdown":"I am currently using Java Mission Control (JMC) to profile my application&#39;s performance with the Java Flight Recorder (JFR) plugin.\r\n\r\nI know how to set up JFR on the command line to record from the beginning to the end of the application duration. However, I do not know how to do it when using the JFR plugin in JMC. Is this something that is possible in JMC? Or am I only able to do this on the command line?\r\n\r\nAnd to better describe the current dilemma, when my application ends, JMC pops up a warning dialog saying that the JVM ended unexpectedly, and then from there, I lose my recording.\r\n\r\n[![A screenshot of the warning dialog that says &quot;Problem while monitoring recording My Recording on [21] ConnectFour.Main (27280). The monitored JVM might have been terminated.&quot; -- further down on the dialog is a checked checkbox that says &quot;Show warnings for problems that occur while monitoring flight recordings.&quot;][1]][1]\r\n\r\nI&#39;m sure the answer to this is relatively simple, but I don&#39;t see any easily accessible resources that provide the answer.\r\n\r\n**EDIT** - I am aware of how to start a recording on JMC using JFR, that&#39;s not my question here. My question is how do I get the command line benefits (record the whole application&#39;s life time, and then save the recording upon application close) on JMC?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LxzrH.png","title":"How to end and save Java Flight Recorder recording in Java Mission Control when application ends?","body":"<p>I am currently using Java Mission Control (JMC) to profile my application's performance with the Java Flight Recorder (JFR) plugin.</p>\n<p>I know how to set up JFR on the command line to record from the beginning to the end of the application duration. However, I do not know how to do it when using the JFR plugin in JMC. Is this something that is possible in JMC? Or am I only able to do this on the command line?</p>\n<p>And to better describe the current dilemma, when my application ends, JMC pops up a warning dialog saying that the JVM ended unexpectedly, and then from there, I lose my recording.</p>\n<p><a href=\"https://i.stack.imgur.com/LxzrH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LxzrH.png\" alt=\"A screenshot of the warning dialog that says &quot;Problem while monitoring recording My Recording on [21] ConnectFour.Main (27280). The monitored JVM might have been terminated.&quot; -- further down on the dialog is a checked checkbox that says &quot;Show warnings for problems that occur while monitoring flight recordings.&quot;\" /></a></p>\n<p>I'm sure the answer to this is relatively simple, but I don't see any easily accessible resources that provide the answer.</p>\n<p><strong>EDIT</strong> - I am aware of how to start a recording on JMC using JFR, that's not my question here. My question is how do I get the command line benefits (record the whole application's life time, and then save the recording upon application close) on JMC?</p>\n"},{"tags":["java","maven","openapi-generator","openapi-generator-maven-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1694614710,"post_id":77088690,"comment_id":135914801,"body_markdown":"First I recommend to upgrade your used openapi-generator-maven-plugin (https://central.sonatype.com/artifact/org.openapitools/openapi-generator-maven-plugin/versions) also the question do you already use Java EE Jakarta etc.","body":"First I recommend to upgrade your used openapi-generator-maven-plugin (<a href=\"https://central.sonatype.com/artifact/org.openapitools/openapi-generator-maven-plugin/versions\" rel=\"nofollow noreferrer\">central.sonatype.com/artifact/org.openapitools/&hellip;</a>) also the question do you already use Java EE Jakarta etc."},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1694671154,"post_id":77088690,"comment_id":135922300,"body_markdown":"I am not using Jakarta EE and it&#39;s legacy code so maybe upgrade to EAP 7 is not possible, it&#39;s EAP 6.","body":"I am not using Jakarta EE and it&#39;s legacy code so maybe upgrade to EAP 7 is not possible, it&#39;s EAP 6."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1694675573,"post_id":77088690,"comment_id":135922979,"body_markdown":"If you&#39;re using EAP 6, perhaps you can use RESTEasy client (https://www.baeldung.com/resteasy-client-tutorial). That will allow you to work with the interfaces without having any implementation of your own - the RESTEasy client will create that for you. Within EAP you probably don&#39;t even need to bundle it in your application, and can mark the dependency as provided.","body":"If you&#39;re using EAP 6, perhaps you can use RESTEasy client (<a href=\"https://www.baeldung.com/resteasy-client-tutorial\" rel=\"nofollow noreferrer\">baeldung.com/resteasy-client-tutorial</a>). That will allow you to work with the interfaces without having any implementation of your own - the RESTEasy client will create that for you. Within EAP you probably don&#39;t even need to bundle it in your application, and can mark the dependency as provided."},{"owner":{"account_id":1806113,"reputation":625,"user_id":1643179,"display_name":"gebi"},"score":1,"creation_date":1697487630,"post_id":77088690,"comment_id":136283621,"body_markdown":"&quot;Which ones are server and which are clients?&quot; --&gt; https://openapi-generator.tech/docs/generators/ distinguishes the available generators by type.","body":"&quot;Which ones are server and which are clients?&quot; --&gt; <a href=\"https://openapi-generator.tech/docs/generators/\" rel=\"nofollow noreferrer\">openapi-generator.tech/docs/generators</a> distinguishes the available generators by type."}],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694518208,"creation_date":1694518208,"question_id":77088690,"body_markdown":"Now I know all the possible values:\r\n\r\n```\r\n[INFO] --- openapi-generator-maven-plugin:4.3.1:generate (generate-api) @ my-app ---\r\n[WARNING] /home/me/code/myapp/target/META-INF/openapi.yaml [0:0]: unexpected error in Open-API generation\r\norg.openapitools.codegen.GeneratorNotFoundException: Can&#39;t load config class with name &#39;jaxrs&#39;\r\nAvailable:\r\nada\r\nada-server\r\nandroid\r\n....\r\n```\r\n\r\nAmong the Java ones: \r\n\r\n```\r\njava\r\njaxrs-cxf-client\r\njava-inflector\r\njava-msf4j\r\njava-pkmst\r\njava-play-framework\r\njava-undertow-server\r\njava-vertx\r\njava-vertx-web\r\njaxrs-cxf\r\njaxrs-cxf-extended\r\njaxrs-cxf-cdi\r\njaxrs-jersey\r\njaxrs-resteasy\r\njaxrs-resteasy-eap\r\njaxrs-spec\r\n```\r\n\r\nWhich ones are server and which are clients? What if I want to generate code to call an external API, not only API? I am in a JavaEE EAP application. I was using `javars-spec` but it only generates the API interface. I need implementations. \r\n\r\nIf there&#39;s none, then how is the Java 8 preferred way to implement it? It&#39;s EAP, not Spring. \r\n\r\nAnd about the missing dependencies, I know that with `&lt;generateSupportingFiles&gt;true&lt;/generateSupportingFiles&gt;` I can generate a POM in the targets dir and check what are the dependencies to pull in and I need to put them back to my project&#39;s pom.xml, even it seems strange for me but anyway. \r\n\r\n","title":"OpenAPI generator Maven plugin: what generator to choose if I want to generate an API client with implementation code? Java EE EAP","body":"<p>Now I know all the possible values:</p>\n<pre><code>[INFO] --- openapi-generator-maven-plugin:4.3.1:generate (generate-api) @ my-app ---\n[WARNING] /home/me/code/myapp/target/META-INF/openapi.yaml [0:0]: unexpected error in Open-API generation\norg.openapitools.codegen.GeneratorNotFoundException: Can't load config class with name 'jaxrs'\nAvailable:\nada\nada-server\nandroid\n....\n</code></pre>\n<p>Among the Java ones:</p>\n<pre><code>java\njaxrs-cxf-client\njava-inflector\njava-msf4j\njava-pkmst\njava-play-framework\njava-undertow-server\njava-vertx\njava-vertx-web\njaxrs-cxf\njaxrs-cxf-extended\njaxrs-cxf-cdi\njaxrs-jersey\njaxrs-resteasy\njaxrs-resteasy-eap\njaxrs-spec\n</code></pre>\n<p>Which ones are server and which are clients? What if I want to generate code to call an external API, not only API? I am in a JavaEE EAP application. I was using <code>javars-spec</code> but it only generates the API interface. I need implementations.</p>\n<p>If there's none, then how is the Java 8 preferred way to implement it? It's EAP, not Spring.</p>\n<p>And about the missing dependencies, I know that with <code>&lt;generateSupportingFiles&gt;true&lt;/generateSupportingFiles&gt;</code> I can generate a POM in the targets dir and check what are the dependencies to pull in and I need to put them back to my project's pom.xml, even it seems strange for me but anyway.</p>\n"},{"tags":["java","reference","phantom-reference"],"comments":[{"owner":{"account_id":2734060,"reputation":263892,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"score":0,"creation_date":1694226922,"post_id":77070263,"comment_id":135867534,"body_markdown":"The (language-level) answer to your example situation isn&#39;t screwing with phantom references. The answer is getting rid of finalizers. They were a mistake, they are deprecated, and the `finalize` method will be removed in a future Java version.","body":"The (language-level) answer to your example situation isn&#39;t screwing with phantom references. The answer is getting rid of finalizers. They were a mistake, they are deprecated, and the <code>finalize</code> method will be removed in a future Java version."},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694254211,"post_id":77070263,"comment_id":135869297,"body_markdown":"Yes, I that would definitely be the ideal solution - but in an ideal world where finalizers don&#39;t exist, we wouldn&#39;t need PhantomRefs anyway, right? Then, they would be equivalent to WeakRefs (except not supporting get), or did I miss something?","body":"Yes, I that would definitely be the ideal solution - but in an ideal world where finalizers don&#39;t exist, we wouldn&#39;t need PhantomRefs anyway, right? Then, they would be equivalent to WeakRefs (except not supporting get), or did I miss something?"},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694254577,"post_id":77070263,"comment_id":135869324,"body_markdown":"So, there would be no reason for the language designers to introduce PhantomRefs __except__ to work around finalizers. Or is the intention here that if the finalizer doesn&#39;t make the object reachable, no one can?","body":"So, there would be no reason for the language designers to introduce PhantomRefs <b>except</b> to work around finalizers. Or is the intention here that if the finalizer doesn&#39;t make the object reachable, no one can?"},{"owner":{"account_id":2734060,"reputation":263892,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"score":0,"creation_date":1694270322,"post_id":77070263,"comment_id":135870871,"body_markdown":"Probably to enable more efficient collection strategies, and because getting the referent isn&#39;t useful for the job PhantomReference was designed for. PhantomReference is designed to enable post-mortem cleanup, not to do anything with the referent itself.","body":"Probably to enable more efficient collection strategies, and because getting the referent isn&#39;t useful for the job PhantomReference was designed for. PhantomReference is designed to enable post-mortem cleanup, not to do anything with the referent itself."},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694273485,"post_id":77070263,"comment_id":135871195,"body_markdown":"How does this enable more efficient collection strategies? And why can&#39;t WeakReferences be used for post-mortem cleanup without the presence of finalizers? In the presence of finalizers, sure, WeakRefs aren&#39;t enough to ensure the object has &quot;died&quot; - but then my example shows that get() on PhantomRefs would have a sensible use.","body":"How does this enable more efficient collection strategies? And why can&#39;t WeakReferences be used for post-mortem cleanup without the presence of finalizers? In the presence of finalizers, sure, WeakRefs aren&#39;t enough to ensure the object has &quot;died&quot; - but then my example shows that get() on PhantomRefs would have a sensible use."},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694273694,"post_id":77070263,"comment_id":135871210,"body_markdown":"It seems to me the existence of PhantomRefs is justified by saying &quot;we need to handle the presence of finalizers, so WeakRef isn&#39;t enough for cleanups&quot;, but get() working on PhantomRefs is regarded as unjustified by saying that &quot;we don&#39;t need to handle the presence of finalizers because are deprecated, so just use a WeakRef&quot; - which seems paradoxical.","body":"It seems to me the existence of PhantomRefs is justified by saying &quot;we need to handle the presence of finalizers, so WeakRef isn&#39;t enough for cleanups&quot;, but get() working on PhantomRefs is regarded as unjustified by saying that &quot;we don&#39;t need to handle the presence of finalizers because are deprecated, so just use a WeakRef&quot; - which seems paradoxical."}],"answers":[{"comments":[{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694219634,"post_id":77070385,"comment_id":135867090,"body_markdown":"Doesn&#39;t the same argument of practicality apply to the get method of any Reference? For example, if get is called on any weak reference, &quot;whatever process which scanned to figure out the object is weakly reachable needs to rescan&quot; analogously. Also, yes, if an application repeatedly calls get on a PhantomReference to make the referent strongly reachable again, we would have an &quot;endless loop&quot; - basically, the object would never be thrown away. But if the application does make a previously phantom reachable object reachable again, this behaviour is intended by the application (or a memory leak).","body":"Doesn&#39;t the same argument of practicality apply to the get method of any Reference? For example, if get is called on any weak reference, &quot;whatever process which scanned to figure out the object is weakly reachable needs to rescan&quot; analogously. Also, yes, if an application repeatedly calls get on a PhantomReference to make the referent strongly reachable again, we would have an &quot;endless loop&quot; - basically, the object would never be thrown away. But if the application does make a previously phantom reachable object reachable again, this behaviour is intended by the application (or a memory leak)."},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694219936,"post_id":77070385,"comment_id":135867105,"body_markdown":"Reformulating the second part in other words: It is not a bad thing that get on a PhantomReference makes the object strongly reachable again - because that&#39;s precisely what the semantics of that method would be. It is up to the application (or, rather, its programmer) to decide whether this is intended or not.","body":"Reformulating the second part in other words: It is not a bad thing that get on a PhantomReference makes the object strongly reachable again - because that&#39;s precisely what the semantics of that method would be. It is up to the application (or, rather, its programmer) to decide whether this is intended or not."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1694219963,"post_id":77070385,"comment_id":135867110,"body_markdown":"a WeakRef hasn&#39;t hit the phase of &#39;okay it is _definitely_ going to be collected now&#39; quite yet. There needs to be a time where the GC system says: I&#39;m not going to consider this object as ever possibly being live again from here on out. If you want to be capable of re-living it, just use a WeakRef. That&#39;s what it is for.","body":"a WeakRef hasn&#39;t hit the phase of &#39;okay it is <i>definitely</i> going to be collected now&#39; quite yet. There needs to be a time where the GC system says: I&#39;m not going to consider this object as ever possibly being live again from here on out. If you want to be capable of re-living it, just use a WeakRef. That&#39;s what it is for."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1694220044,"post_id":77070385,"comment_id":135867112,"body_markdown":"You&#39;ve sort of made your own argument here - &#39;hey, being able to deref the object that is about to get collected can be useful and if the app wants to re-live it, it should be able to&#39;. Note that a WeakRef does not in any way imply an object has been selected for GCing. It simply implies the existence of the WeakRef has no effect on GCing it (i.e. its existence doesn&#39;t prevent the referent from being collected).","body":"You&#39;ve sort of made your own argument here - &#39;hey, being able to deref the object that is about to get collected can be useful and if the app wants to re-live it, it should be able to&#39;. Note that a WeakRef does not in any way imply an object has been selected for GCing. It simply implies the existence of the WeakRef has no effect on GCing it (i.e. its existence doesn&#39;t prevent the referent from being collected)."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1694220203,"post_id":77070385,"comment_id":135867117,"body_markdown":"The docs spell this out: PhantomRefs can refer to things _even if_ they have been marked as &#39;reclaimable&#39;. The JVM does not have a system to remove that mark (or rather, it doesn&#39;t want to, as that would make the GC system orders of magnitude more complicated), so it __must remain reclaimable__. Letting you get the object ref would mean it&#39;d have to be turned un-reclaimable. No can do. And there&#39;s no need to build it for some exotic use cases, because those use cases can simply use WeakRef instead.","body":"The docs spell this out: PhantomRefs can refer to things <i>even if</i> they have been marked as &#39;reclaimable&#39;. The JVM does not have a system to remove that mark (or rather, it doesn&#39;t want to, as that would make the GC system orders of magnitude more complicated), so it <b>must remain reclaimable</b>. Letting you get the object ref would mean it&#39;d have to be turned un-reclaimable. No can do. And there&#39;s no need to build it for some exotic use cases, because those use cases can simply use WeakRef instead."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1694220257,"post_id":77070385,"comment_id":135867122,"body_markdown":"The one time where this may come up is that you _specifically_ want the ability to get a ping that an object is marked as reclaimable, and that you want to now check that object for some stats and have the option to go: &quot;NO! WAIT! DO NOT DO THAT!&quot;. The JVM does not offer such a mechanism, refqueues aren&#39;t designed for you to have such an ability, and giving it to you would be performance-wise disastrous.","body":"The one time where this may come up is that you <i>specifically</i> want the ability to get a ping that an object is marked as reclaimable, and that you want to now check that object for some stats and have the option to go: &quot;NO! WAIT! DO NOT DO THAT!&quot;. The JVM does not offer such a mechanism, refqueues aren&#39;t designed for you to have such an ability, and giving it to you would be performance-wise disastrous."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1694220324,"post_id":77070385,"comment_id":135867127,"body_markdown":"Perhaps we are talking past each other. In that case I suggest you edit this question, or probably ask a new one, and take a step back. You have a problem X (which you did not state) and you went: I know! I&#39;ll use PhantomRefs so I can fix my problem X! Oh, wait, phantomrefs always return `null`, that&#39;s weird. Let me ask an SO question about this. The better option is to just state X and ask how to solve it. Because that &#39;I know! PhantomReference!&#39; - that was wrong.","body":"Perhaps we are talking past each other. In that case I suggest you edit this question, or probably ask a new one, and take a step back. You have a problem X (which you did not state) and you went: I know! I&#39;ll use PhantomRefs so I can fix my problem X! Oh, wait, phantomrefs always return <code>null</code>, that&#39;s weird. Let me ask an SO question about this. The better option is to just state X and ask how to solve it. Because that &#39;I know! PhantomReference!&#39; - that was wrong."},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694220366,"post_id":77070385,"comment_id":135867134,"body_markdown":"The phase &quot;the object is definitely collectable now&quot; starts _after_ the PhantomRefs are cleared (before that, finalizers can of course make the object reachable again). I don&#39;t see a reason in your argument why the application shouldn&#39;t be allowed to get() the object before this point is reached. Also, a WeakRef being cleared kind of does imply that the GC is involved with that object - not that it&#39;s about to reclaim the object, sure, but that finalizers are run. Also, I do see a use case not covered by WeakRefs - I&#39;ll edit the question to include it.","body":"The phase &quot;the object is definitely collectable now&quot; starts <i>after</i> the PhantomRefs are cleared (before that, finalizers can of course make the object reachable again). I don&#39;t see a reason in your argument why the application shouldn&#39;t be allowed to get() the object before this point is reached. Also, a WeakRef being cleared kind of does imply that the GC is involved with that object - not that it&#39;s about to reclaim the object, sure, but that finalizers are run. Also, I do see a use case not covered by WeakRefs - I&#39;ll edit the question to include it."},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694220528,"post_id":77070385,"comment_id":135867147,"body_markdown":"As a side note: The assumption that I have a problem X, for which I thought that PhantomRefs are the solution, is incorrect; I stumbled upon this while writing my Master&#39;s thesis, where the various Reference types are relevant. So, I want to describe them correctly, including the reasoning behind the design choices. Moreover, I&#39;m just genuinely interested in the reasoning behind this - even without having a concrete problem for which I think this is the answer.","body":"As a side note: The assumption that I have a problem X, for which I thought that PhantomRefs are the solution, is incorrect; I stumbled upon this while writing my Master&#39;s thesis, where the various Reference types are relevant. So, I want to describe them correctly, including the reasoning behind the design choices. Moreover, I&#39;m just genuinely interested in the reasoning behind this - even without having a concrete problem for which I think this is the answer."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1694220893,"post_id":77070385,"comment_id":135867162,"body_markdown":"SO isn&#39;t the right place to ask &#39;what was the reasoning&#39; - you&#39;d have to ask the designers and scour the relevant mailing lists. However, from what I recall from those mailing lists, this is the reason. Im very very short SO is not the place to hold a debate about the intelligence of the choices that were made. There are mailing lists for that run by the OpenJDK project.","body":"SO isn&#39;t the right place to ask &#39;what was the reasoning&#39; - you&#39;d have to ask the designers and scour the relevant mailing lists. However, from what I recall from those mailing lists, this is the reason. Im very very short SO is not the place to hold a debate about the intelligence of the choices that were made. There are mailing lists for that run by the OpenJDK project."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1694220980,"post_id":77070385,"comment_id":135867167,"body_markdown":"If it&#39;s specifically about &#39;sooo, if I have a PhantomRef and the object hasn&#39;t yet reached the phase, why can&#39;t `.get()` returns the value until we get to that phase?&#39; - eh, OpenJDK tends to design conservatively: If the use cases that the PhantomRef feature are designed for do not appear to need it, why offer it? OpenJDK has to support it __forever__ if they make it work that way. This is simpler to support. Sometimes there isn&#39;t a complicated scheme behind it all. Just &#39;this is simpler and offering it doesn&#39;t add any meaningful usecases we can think of right now, so.. let&#39;s not&#39;.","body":"If it&#39;s specifically about &#39;sooo, if I have a PhantomRef and the object hasn&#39;t yet reached the phase, why can&#39;t <code>.get()</code> returns the value until we get to that phase?&#39; - eh, OpenJDK tends to design conservatively: If the use cases that the PhantomRef feature are designed for do not appear to need it, why offer it? OpenJDK has to support it <b>forever</b> if they make it work that way. This is simpler to support. Sometimes there isn&#39;t a complicated scheme behind it all. Just &#39;this is simpler and offering it doesn&#39;t add any meaningful usecases we can think of right now, so.. let&#39;s not&#39;."},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694223763,"post_id":77070385,"comment_id":135867337,"body_markdown":"I have now added an example where a WeakRef does not solve the problem, but a PhantomRef with get() does. I guess I just don&#39;t understand the asymmetry between the different refs - why get is provided on some, but not on others. I don&#39;t see why implementing get on one of the types would be harder than on others.","body":"I have now added an example where a WeakRef does not solve the problem, but a PhantomRef with get() does. I guess I just don&#39;t understand the asymmetry between the different refs - why get is provided on some, but not on others. I don&#39;t see why implementing get on one of the types would be harder than on others."},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694225568,"post_id":77070385,"comment_id":135867444,"body_markdown":"I just re-read the comment thread and noticed that you say that, effectively, implementing get on PhantomReferences &quot;would make the GC system orders of magnitude more complicated&quot;. Can you edit your answer and elaborate on why this is the case? This would be an understandable, satisfying reason for me why get isn&#39;t implemented.","body":"I just re-read the comment thread and noticed that you say that, effectively, implementing get on PhantomReferences &quot;would make the GC system orders of magnitude more complicated&quot;. Can you edit your answer and elaborate on why this is the case? This would be an understandable, satisfying reason for me why get isn&#39;t implemented."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1694253202,"post_id":77070385,"comment_id":135869204,"body_markdown":"The answer already mentions why: Because it would require the GC system to have to support the notion that an object considered &#39;reclaimable&#39; can still be referenced later on (and thus, should no longer be reclaimed). It&#39;s... obvious how that would make things very complicated. I wouldn&#39;t know how to explain that any further beyond writing it in all caps, I guess.","body":"The answer already mentions why: Because it would require the GC system to have to support the notion that an object considered &#39;reclaimable&#39; can still be referenced later on (and thus, should no longer be reclaimed). It&#39;s... obvious how that would make things very complicated. I wouldn&#39;t know how to explain that any further beyond writing it in all caps, I guess."},{"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"score":0,"creation_date":1694253852,"post_id":77070385,"comment_id":135869267,"body_markdown":"I don&#39;t think that part of your answer is correct. The documentation of java.lang.ref states: &quot;Finally, an object is unreachable, and therefore eligible for reclamation, when it is not reachable in any of the above ways&quot;, where &quot;any of the above ways&quot; includes phantom references. So, an object is not reclaimable while phantom rechable - making your points about making a reclaimable object rechable again invalid. If I&#39;m mistaken in this argumentation, please explain where that mistake is.","body":"I don&#39;t think that part of your answer is correct. The documentation of java.lang.ref states: &quot;Finally, an object is unreachable, and therefore eligible for reclamation, when it is not reachable in any of the above ways&quot;, where &quot;any of the above ways&quot; includes phantom references. So, an object is not reclaimable while phantom rechable - making your points about making a reclaimable object rechable again invalid. If I&#39;m mistaken in this argumentation, please explain where that mistake is."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694518939,"post_id":77070385,"comment_id":135898628,"body_markdown":"The garbage collector doesn’t mark objects as “reclaimable”. It does the opposite, it marks objects as “still reachable”. So when encountering special references, like weak, soft, or phantom, it has to decide whether to clear them (atomically, as the documentation says) or to treat them as reachable and traverse them. This even applied to the pre-Java&#160;9 behavior where phantom references were not cleared. Despite the `get()` method always returned `null`, the garbage collector had to treat the non-cleared references like reachable and traverse them, reducing performance but staying unbreakable.","body":"The garbage collector doesn’t mark objects as “reclaimable”. It does the opposite, it marks objects as “still reachable”. So when encountering special references, like weak, soft, or phantom, it has to decide whether to clear them (atomically, as the documentation says) or to treat them as reachable and traverse them. This even applied to the pre-Java 9 behavior where phantom references were not cleared. Despite the <code>get()</code> method always returned <code>null</code>, the garbage collector had to treat the non-cleared references like reachable and traverse them, reducing performance but staying unbreakable."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":16,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694218107,"creation_date":1694218107,"answer_id":77070385,"question_id":77070263,"body_markdown":"If `.get()` worked, you could simply do:\r\n\r\n```\r\nsomeField = phantomRef.get();\r\n```\r\n\r\nAnd all of a sudden the object that was in the process of being collected, now no longer collectable. After all, you assigned it to a field - it is reachable again. If it is collected soon after you have a field referencing a garbage collected object and that&#39;s one of those 100% most definitely cannot possibly ever happen ever ever ever red line you can&#39;t cross in JVM feature designs.\r\n\r\nIf it&#39;s _not_ collected, i.e. that act &#39;cancels&#39; the garbage collection, you have 2 problems:\r\n\r\n1. Whatever process &#39;scanned&#39; to figure out the object is collectable needs to re-scan because it cannot know that the result of `.get()` was used to re-live the object. Thus, any call to `.get()` at any time by anything means the object needs to be re-scanned. At which point... allow all phantom refs to do it again? Then we&#39;d have an endless loop.\r\n\r\n2. Alternatively, `.get()` needs to flag the JVM to run this thread in some sort of &#39;slow bookkeeping mode&#39; where any `.get()` calls are tracked just to check if you are reliving them. Also, even if you don&#39;t assign it to any field, as long as whatever method called `get` hasn&#39;t completed, it&#39;s still a live object.\r\n\r\nNone of this is in any way practical. Returning `null` on `.get()` and specifying that this is what happens to phantom refs solves all problems.\r\n","title":"Why does PhantomReference.get() always return null?","body":"<p>If <code>.get()</code> worked, you could simply do:</p>\n<pre><code>someField = phantomRef.get();\n</code></pre>\n<p>And all of a sudden the object that was in the process of being collected, now no longer collectable. After all, you assigned it to a field - it is reachable again. If it is collected soon after you have a field referencing a garbage collected object and that's one of those 100% most definitely cannot possibly ever happen ever ever ever red line you can't cross in JVM feature designs.</p>\n<p>If it's <em>not</em> collected, i.e. that act 'cancels' the garbage collection, you have 2 problems:</p>\n<ol>\n<li><p>Whatever process 'scanned' to figure out the object is collectable needs to re-scan because it cannot know that the result of <code>.get()</code> was used to re-live the object. Thus, any call to <code>.get()</code> at any time by anything means the object needs to be re-scanned. At which point... allow all phantom refs to do it again? Then we'd have an endless loop.</p>\n</li>\n<li><p>Alternatively, <code>.get()</code> needs to flag the JVM to run this thread in some sort of 'slow bookkeeping mode' where any <code>.get()</code> calls are tracked just to check if you are reliving them. Also, even if you don't assign it to any field, as long as whatever method called <code>get</code> hasn't completed, it's still a live object.</p>\n</li>\n</ol>\n<p>None of this is in any way practical. Returning <code>null</code> on <code>.get()</code> and specifying that this is what happens to phantom refs solves all problems.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694518097,"creation_date":1694518097,"answer_id":77088680,"question_id":77070263,"body_markdown":"You are referring to the Java&#160;20 API. But in this case, it’s useful to know the history.\r\n\r\nHave a look at [Java&#160;8’s `PhantomReference` documentation from 2022][1]\r\n\r\n&gt; Unlike soft and weak references, phantom references are not automatically cleared by the garbage collector as they are enqueued. An object that is reachable via phantom references will remain so until all such references are cleared or themselves become unreachable.\r\n\r\nDon’t ask why keeping an object phantom reachable ever was a goal. [That has] [been asked] [before] and never got a satisfying answer. That’s part of the reason why this rule has been removed in Java&#160;9 and as it seems, [also in the latest Java&#160;8 updates][2].\r\n\r\nBut when an enqueued `PhantomReference` is not cleared, it’s obviously needed to prevent the retrieval via the `get()` method, to prevent resurrection of reclaimable objects. Granted, deep reflection still worked back in the days, which is another indicator that this part of the API wasn’t well thought.\r\n\r\n---\r\n\r\nThe current state of affairs is that phantom reference are cleared when enqueued and hence, nothing prevents the reclamation of the object while the post-mortem cleanup is running.\r\n\r\nSo, the original problem is gone. Allowing `get()` to return the referent would not affect the way, garbage collection works. It would become possible to retrieve the object while finalization is in progress, but this would only be a semantic problem, but not affect the logic of phantom references, as they are only enqueued when the object became unreachable (again) after finalization completed.\r\n\r\nHowever, there is no reason to change the contract. Getting the object back is not necessary for the purpose of phantom references. That’s what weak references are for and since finalization [has been marked “deprecated, for removal”][3], any problems related to finalization will vanish anyway.\r\n\r\n---\r\n\r\nIt’s true that while finalization still exists, the scenario of resurrection exist when using weak references. However, if someone tries that hard to break your program, nothing will stop them anyway. Don’t let such people contribute to your code base. Java’s language mechanisms are not real security measures. They make it harder to write bad code, but can’t prevent people from deliberately breaking things.\r\n\r\nThat said, the entire idea to use garbage collection to release non-memory resources in the way you described, is flawed. There is no guaranty about when or whether at all the object will get collected, hence in your scenario this cleanup feature is not worth the development effort. But in the worst case, it will [break horribly].\r\n\r\n[1]: https://web.archive.org/web/20221016015442/https://docs.oracle.com/javase/8/docs/api/java/lang/ref/PhantomReference.html\r\n[2]: https://docs.oracle.com/javase/8/docs/api/java/lang/ref/PhantomReference.html\r\n[3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#finalize()\r\n[That has]: https://stackoverflow.com/q/7048767/2711488\r\n[been asked]: https://stackoverflow.com/q/57439236/2711488\r\n[before]: https://stackoverflow.com/questions/41396051/phantomreference-with-null-queue/41987600#41987600:~:text=The%20question%2C%20even,is%20why%20a%20PhantomReference%20isn%E2%80%99t%20automatically%20cleared.\r\n[break horribly]: https://stackoverflow.com/q/26642153/2711488","title":"Why does PhantomReference.get() always return null?","body":"<p>You are referring to the Java 20 API. But in this case, it’s useful to know the history.</p>\n<p>Have a look at <a href=\"https://web.archive.org/web/20221016015442/https://docs.oracle.com/javase/8/docs/api/java/lang/ref/PhantomReference.html\" rel=\"nofollow noreferrer\">Java 8’s <code>PhantomReference</code> documentation from 2022</a></p>\n<blockquote>\n<p>Unlike soft and weak references, phantom references are not automatically cleared by the garbage collector as they are enqueued. An object that is reachable via phantom references will remain so until all such references are cleared or themselves become unreachable.</p>\n</blockquote>\n<p>Don’t ask why keeping an object phantom reachable ever was a goal. <a href=\"https://stackoverflow.com/q/7048767/2711488\">That has</a> <a href=\"https://stackoverflow.com/q/57439236/2711488\">been asked</a> <a href=\"https://stackoverflow.com/questions/41396051/phantomreference-with-null-queue/41987600#41987600:%7E:text=The%20question%2C%20even,is%20why%20a%20PhantomReference%20isn%E2%80%99t%20automatically%20cleared.\">before</a> and never got a satisfying answer. That’s part of the reason why this rule has been removed in Java 9 and as it seems, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ref/PhantomReference.html\" rel=\"nofollow noreferrer\">also in the latest Java 8 updates</a>.</p>\n<p>But when an enqueued <code>PhantomReference</code> is not cleared, it’s obviously needed to prevent the retrieval via the <code>get()</code> method, to prevent resurrection of reclaimable objects. Granted, deep reflection still worked back in the days, which is another indicator that this part of the API wasn’t well thought.</p>\n<hr />\n<p>The current state of affairs is that phantom reference are cleared when enqueued and hence, nothing prevents the reclamation of the object while the post-mortem cleanup is running.</p>\n<p>So, the original problem is gone. Allowing <code>get()</code> to return the referent would not affect the way, garbage collection works. It would become possible to retrieve the object while finalization is in progress, but this would only be a semantic problem, but not affect the logic of phantom references, as they are only enqueued when the object became unreachable (again) after finalization completed.</p>\n<p>However, there is no reason to change the contract. Getting the object back is not necessary for the purpose of phantom references. That’s what weak references are for and since finalization <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#finalize()\" rel=\"nofollow noreferrer\">has been marked “deprecated, for removal”</a>, any problems related to finalization will vanish anyway.</p>\n<hr />\n<p>It’s true that while finalization still exists, the scenario of resurrection exist when using weak references. However, if someone tries that hard to break your program, nothing will stop them anyway. Don’t let such people contribute to your code base. Java’s language mechanisms are not real security measures. They make it harder to write bad code, but can’t prevent people from deliberately breaking things.</p>\n<p>That said, the entire idea to use garbage collection to release non-memory resources in the way you described, is flawed. There is no guaranty about when or whether at all the object will get collected, hence in your scenario this cleanup feature is not worth the development effort. But in the worst case, it will <a href=\"https://stackoverflow.com/q/26642153/2711488\">break horribly</a>.</p>\n"}],"owner":{"account_id":24281733,"reputation":150,"user_id":22485901,"display_name":"Haspamelodica"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":77088680,"answer_count":2,"score":4,"last_activity_date":1694518097,"creation_date":1694214807,"question_id":77070263,"body_markdown":"I know the different kinds of references, and reachability, and how the garbage collector works in general - I have also used the different types of `Reference`s in some of my personal projects. However, there is one design choice I don&#39;t understand: Why the `get`  method of `PhantomReference`s always returns `null`.\r\n\r\n`PhantomReference`s are mostly (only?) used for cleanup actions after the object has &quot;died&quot;. So, the usual answer to my question is &quot;to ensure that the object can&#39;t get (strongly) reachable again after the cleanup has started&quot; - or, as [the documentation of PhantomReference](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ref/PhantomReference.html) puts it:\r\n&gt; In order to ensure that a reclaimable object remains so, the referent of a phantom reference may not be retrieved: The get method of a phantom reference always returns null.\r\n\r\nBut as far as I understand, &quot;ensuring that a reclaimable object remains so&quot; doesn&#39;t imply that `get()` must always return `null`: As long as a phantom reference isn&#39;t cleared, its referent isn&#39;t reclaimable and also won&#39;t be enqueued, and thus the cleanup action won&#39;t have been started - meaning that `get()` could &quot;safely&quot; give access to the referent. It only becomes reclaimable if the reference is cleared, so `get()` would from then on return `null` either way. There&#39;s also no possibility of race conditions (example: two PhantomRefs to one object; one gets cleared and enqueued, then the object is made accessible again through the other&#39;s `get` method), because the documentation states that all clearing happens atomically (emphasis mine):\r\n&gt; At that time it will **atomically** clear **all** phantom references to that object and all phantom references to any other phantom-reachable objects from which that object is reachable.\r\n\r\n---\r\nBecause the question came up in comments: I&#39;m asking this not because I have a concrete problem for which I think this would be the solution. Instead, I need to describe the various `Reference` types in my Master&#39;s thesis, where they are relevant, and I want to describe them correctly - including the reasoning behind the design choices.\r\n\r\nHowever, I can still think of a concrete situation which would explicitly not be covered by using a `WeakReference`:\r\n\r\nSuppose you were writing a library which provided some service to its users. Let&#39;s assume the library wants to ensure that only one instance of this service exists at a time - that it is a &quot;singleton&quot;, so to speak - so let&#39;s call the class `PublicSingletonService`. However, let&#39;s assume the service needs many resources to exist - so, the library wants to throw it away once it&#39;s not needed anymore, and recreate it once it&#39;s needed again. I think this is a reasonable scenario.\r\n\r\nSo, the library holds a `WeakReference` to its singleton, and uses a `ReferenceQueue` to detect if the singleton is not needed anymore and to clean up. When the user requests the service, the library calls `get()` on the `WeakReference`, and if the result is non-`null`, returns that, and if it is `null`, it (re-)creates the service.\r\n\r\nBut now, the application using that library does the following:\r\n 1. It requests the service singleton\r\n 2. It creates an object (the &quot;holder&quot;), which refers to the service singleton and has a finalizer which will make the object (and thus the service singleton) reachable again.\r\n 3. It clears all remaining references to the service singleton and the holder, such that it is only weakly reachable (through the library&#39;s weak reference)\r\n 4. It uses much memory (or calls `System.gc()`, such that the GC clears the weak ref and starts the holder&#39;s finalization\r\n 5. The following three things happen in any order:\r\n   - the holder&#39;s finalizer &quot;resurrects&quot; the service singleton\r\n   - The library cleans up after the singleton\r\n   - The application requests another service singleton - this will be newly created.\r\nNow, the application has two singleton instances, despite the library not having any problematic finalizers!\r\n\r\nThe library could partially guard against this by keeping a `PhantomReference` in addition to the `WeakReference`, and only cleaning up or creating a second instance if the `PhantomReference` is cleared. However, this has a problem: If the `WeakReference` is cleared, but the `PhantomReference` is not, and the application asks the library to give it an instance of the service, the library can neither access the old instance nor create a new one.\r\n\r\nIf `PhantomReference.get()` did not always return `null`, this would be solvable: just let the library use a `PhantomReference` instead of a `WeakReference`, and use `PhantomReference.get()`.\r\n\r\nHere is an example program demonstrating this:\r\n\r\n``` lang-java\r\npackage weirdjava;\r\n\r\nimport java.lang.ref.Reference;\r\nimport java.lang.ref.ReferenceQueue;\r\nimport java.lang.ref.WeakReference;\r\nimport java.util.concurrent.Semaphore;\r\n\r\nimport weirdjava.StronglyReachableAfterWeakReferenceCleared.Library.PublicSingletonService;\r\n\r\npublic class StronglyReachableAfterWeakReferenceCleared\r\n{\r\n\tpublic static void main(String[] args) throws InterruptedException\r\n\t{\r\n\t\tApplication.run();\r\n\t}\r\n\r\n\tpublic static class Application\r\n\t{\r\n\t\tpublic static void run() throws InterruptedException\r\n\t\t{\r\n\t\t\t// Application code initializes the library\r\n\t\t\tLibrary library = new Library();\r\n\t\t\t// &quot;Library&quot; creates the singleton of the public service and tries to detect once it is _definitely_ unreachable.\r\n\t\t\tPublicSingletonService singleton = library.getSingleton();\r\n\r\n\t\t\t// The application code then does weird stuff with the singleton (maliciously, bad programming, or convoluted interactions):\r\n\t\t\t// make holder\r\n\t\t\tApplicationHolder holder = new ApplicationHolder(singleton);\r\n\t\t\t// clear the last remaining strong ref to the singleton\r\n\t\t\tsingleton = null;\r\n\t\t\t// make sure the libraries&#39; weakref is actually cleared - simulates the application using much memory.\r\n\t\t\tSystem.gc();\r\n\r\n\t\t\t// The &quot;library&quot; tries to detect whether the object was cleared, and clean up if it is.\r\n\t\t\t// In this example, we made sure that it is.\r\n\t\t\tlibrary.doCleanupIfNecessary();\r\n\r\n\t\t\t// The application asks the library for the singleton again - because it has been cleared, the library recreates the singleton.\r\n\t\t\tPublicSingletonService secondSingleton = library.getSingleton();\r\n\r\n\t\t\t// Now, the application magically resurrects the first singleton\r\n\t\t\tPublicSingletonService resurrectedSingleton = holder.getReferent();\r\n\t\t\tif(resurrectedSingleton == null)\r\n\t\t\t\tthrow new IllegalStateException(&quot;example failed&quot;);\r\n\r\n\t\t\tSystem.out.println(&quot;Resurrection successful! resurrected: &quot; + resurrectedSingleton);\r\n\r\n\t\t\t// At this point, the weak references to the object have been cleared,\r\n\t\t\t// but the object is still strongly reachable -\r\n\t\t\t// and that without the libraries&#39; class having any finalizer.\r\n\t\t\tSystem.out.println(&quot;Application now has two singletons: &quot; + resurrectedSingleton + &quot;, &quot; + secondSingleton);\r\n\t\t}\r\n\t\tprivate static class ApplicationHolder\r\n\t\t{\r\n\t\t\tprivate final Semaphore\t\treferrerFinalizationComplete;\r\n\t\t\tprivate FinalizableReferrer\treferrerAfterFinalization;\r\n\r\n\t\t\tpublic ApplicationHolder(PublicSingletonService referent)\r\n\t\t\t{\r\n\t\t\t\treferrerFinalizationComplete = new Semaphore(0);\r\n\t\t\t\t// explicitly don&#39;t keep a reference to this, to let it be able to be reclaimed\r\n\t\t\t\tnew FinalizableReferrer(this, referent);\r\n\t\t\t}\r\n\r\n\t\t\tpublic PublicSingletonService getReferent() throws InterruptedException\r\n\t\t\t{\r\n\t\t\t\treferrerFinalizationComplete.acquire();\r\n\t\t\t\treturn referrerAfterFinalization.getReferent();\r\n\t\t\t}\r\n\r\n\t\t\tprivate static class FinalizableReferrer\r\n\t\t\t{\r\n\t\t\t\tprivate final ApplicationHolder\treferrer;\r\n\t\t\t\tprivate final PublicSingletonService\treferent;\r\n\r\n\t\t\t\tpublic FinalizableReferrer(ApplicationHolder referrer, PublicSingletonService referent)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.referrer = referrer;\r\n\t\t\t\t\tthis.referent = referent;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tprotected void finalize()\r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;Finalizer making referent reachable again&quot;);\r\n\t\t\t\t\treferrer.referrerAfterFinalization = this;\r\n\t\t\t\t\treferrer.referrerFinalizationComplete.release();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic PublicSingletonService getReferent()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn referent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static class Library\r\n\t{\r\n\t\t// just for demonstration; in reality, this would have to be thread-safe and whatnot\r\n\t\tprivate int instanceCounter = 0;\r\n\r\n\t\tprivate final ReferenceQueue&lt;PublicSingletonService&gt;\trefqueue;\r\n\t\tprivate WeakReference&lt;PublicSingletonService&gt;\t\tpublicSingletonObjectRef;\r\n\r\n\t\tpublic Library()\r\n\t\t{\r\n\t\t\tthis.refqueue = new ReferenceQueue&lt;&gt;();\r\n\t\t}\r\n\r\n\t\tpublic void doCleanupIfNecessary() throws InterruptedException\r\n\t\t{\r\n\t\t\t// In practice, this would be poll(), not remove() - however, in this example,\r\n\t\t\t// even though we called System.gc() the enqueueing doesn&#39;t happen fast enough.\r\n\t\t\tReference&lt;? extends PublicSingletonService&gt; poll = refqueue.remove();\r\n\t\t\tif(poll != null)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(&quot;Reference to referent was cleared; weakRef.get() is &quot; + publicSingletonObjectRef.get()); // is null\r\n\t\t\t\t// The library cleans up what it needs to clean up\r\n\t\t\t\tSystem.out.println(&quot;Library \\&quot;cleans up\\&quot;&quot;);\r\n\t\t\t} else\r\n\t\t\t\t// In practice, the library would do nothing here.\r\n\t\t\t\tthrow new IllegalStateException(&quot;example failed&quot;);\r\n\t\t}\r\n\r\n\t\tpublic PublicSingletonService getSingleton()\r\n\t\t{\r\n\t\t\tif(publicSingletonObjectRef != null)\r\n\t\t\t{\r\n\t\t\t\t// This is the call to get() which would not be possible with a phantom reference\r\n\t\t\t\tPublicSingletonService previousInstance = publicSingletonObjectRef.get();\r\n\t\t\t\tif(previousInstance != null)\r\n\t\t\t\t\treturn previousInstance;\r\n\t\t\t}\r\n\r\n\t\t\tPublicSingletonService publicSingletonObjectInstance = new PublicSingletonService(&quot;Instance #&quot; + instanceCounter ++);\r\n\t\t\tpublicSingletonObjectRef = new WeakReference&lt;&gt;(publicSingletonObjectInstance, refqueue);\r\n\t\t\treturn publicSingletonObjectInstance;\r\n\t\t}\r\n\r\n\t\tpublic static class PublicSingletonService\r\n\t\t{\r\n\t\t\tprivate final String value;\r\n\r\n\t\t\tpublic PublicSingletonService(String value)\r\n\t\t\t{\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tSystem.out.println(&quot;Creating singleton object: &quot; + value);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic String toString()\r\n\t\t\t{\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n","title":"Why does PhantomReference.get() always return null?","body":"<p>I know the different kinds of references, and reachability, and how the garbage collector works in general - I have also used the different types of <code>Reference</code>s in some of my personal projects. However, there is one design choice I don't understand: Why the <code>get</code>  method of <code>PhantomReference</code>s always returns <code>null</code>.</p>\n<p><code>PhantomReference</code>s are mostly (only?) used for cleanup actions after the object has &quot;died&quot;. So, the usual answer to my question is &quot;to ensure that the object can't get (strongly) reachable again after the cleanup has started&quot; - or, as <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ref/PhantomReference.html\" rel=\"nofollow noreferrer\">the documentation of PhantomReference</a> puts it:</p>\n<blockquote>\n<p>In order to ensure that a reclaimable object remains so, the referent of a phantom reference may not be retrieved: The get method of a phantom reference always returns null.</p>\n</blockquote>\n<p>But as far as I understand, &quot;ensuring that a reclaimable object remains so&quot; doesn't imply that <code>get()</code> must always return <code>null</code>: As long as a phantom reference isn't cleared, its referent isn't reclaimable and also won't be enqueued, and thus the cleanup action won't have been started - meaning that <code>get()</code> could &quot;safely&quot; give access to the referent. It only becomes reclaimable if the reference is cleared, so <code>get()</code> would from then on return <code>null</code> either way. There's also no possibility of race conditions (example: two PhantomRefs to one object; one gets cleared and enqueued, then the object is made accessible again through the other's <code>get</code> method), because the documentation states that all clearing happens atomically (emphasis mine):</p>\n<blockquote>\n<p>At that time it will <strong>atomically</strong> clear <strong>all</strong> phantom references to that object and all phantom references to any other phantom-reachable objects from which that object is reachable.</p>\n</blockquote>\n<hr />\n<p>Because the question came up in comments: I'm asking this not because I have a concrete problem for which I think this would be the solution. Instead, I need to describe the various <code>Reference</code> types in my Master's thesis, where they are relevant, and I want to describe them correctly - including the reasoning behind the design choices.</p>\n<p>However, I can still think of a concrete situation which would explicitly not be covered by using a <code>WeakReference</code>:</p>\n<p>Suppose you were writing a library which provided some service to its users. Let's assume the library wants to ensure that only one instance of this service exists at a time - that it is a &quot;singleton&quot;, so to speak - so let's call the class <code>PublicSingletonService</code>. However, let's assume the service needs many resources to exist - so, the library wants to throw it away once it's not needed anymore, and recreate it once it's needed again. I think this is a reasonable scenario.</p>\n<p>So, the library holds a <code>WeakReference</code> to its singleton, and uses a <code>ReferenceQueue</code> to detect if the singleton is not needed anymore and to clean up. When the user requests the service, the library calls <code>get()</code> on the <code>WeakReference</code>, and if the result is non-<code>null</code>, returns that, and if it is <code>null</code>, it (re-)creates the service.</p>\n<p>But now, the application using that library does the following:</p>\n<ol>\n<li>It requests the service singleton</li>\n<li>It creates an object (the &quot;holder&quot;), which refers to the service singleton and has a finalizer which will make the object (and thus the service singleton) reachable again.</li>\n<li>It clears all remaining references to the service singleton and the holder, such that it is only weakly reachable (through the library's weak reference)</li>\n<li>It uses much memory (or calls <code>System.gc()</code>, such that the GC clears the weak ref and starts the holder's finalization</li>\n<li>The following three things happen in any order:</li>\n</ol>\n<ul>\n<li>the holder's finalizer &quot;resurrects&quot; the service singleton</li>\n<li>The library cleans up after the singleton</li>\n<li>The application requests another service singleton - this will be newly created.\nNow, the application has two singleton instances, despite the library not having any problematic finalizers!</li>\n</ul>\n<p>The library could partially guard against this by keeping a <code>PhantomReference</code> in addition to the <code>WeakReference</code>, and only cleaning up or creating a second instance if the <code>PhantomReference</code> is cleared. However, this has a problem: If the <code>WeakReference</code> is cleared, but the <code>PhantomReference</code> is not, and the application asks the library to give it an instance of the service, the library can neither access the old instance nor create a new one.</p>\n<p>If <code>PhantomReference.get()</code> did not always return <code>null</code>, this would be solvable: just let the library use a <code>PhantomReference</code> instead of a <code>WeakReference</code>, and use <code>PhantomReference.get()</code>.</p>\n<p>Here is an example program demonstrating this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package weirdjava;\n\nimport java.lang.ref.Reference;\nimport java.lang.ref.ReferenceQueue;\nimport java.lang.ref.WeakReference;\nimport java.util.concurrent.Semaphore;\n\nimport weirdjava.StronglyReachableAfterWeakReferenceCleared.Library.PublicSingletonService;\n\npublic class StronglyReachableAfterWeakReferenceCleared\n{\n    public static void main(String[] args) throws InterruptedException\n    {\n        Application.run();\n    }\n\n    public static class Application\n    {\n        public static void run() throws InterruptedException\n        {\n            // Application code initializes the library\n            Library library = new Library();\n            // &quot;Library&quot; creates the singleton of the public service and tries to detect once it is _definitely_ unreachable.\n            PublicSingletonService singleton = library.getSingleton();\n\n            // The application code then does weird stuff with the singleton (maliciously, bad programming, or convoluted interactions):\n            // make holder\n            ApplicationHolder holder = new ApplicationHolder(singleton);\n            // clear the last remaining strong ref to the singleton\n            singleton = null;\n            // make sure the libraries' weakref is actually cleared - simulates the application using much memory.\n            System.gc();\n\n            // The &quot;library&quot; tries to detect whether the object was cleared, and clean up if it is.\n            // In this example, we made sure that it is.\n            library.doCleanupIfNecessary();\n\n            // The application asks the library for the singleton again - because it has been cleared, the library recreates the singleton.\n            PublicSingletonService secondSingleton = library.getSingleton();\n\n            // Now, the application magically resurrects the first singleton\n            PublicSingletonService resurrectedSingleton = holder.getReferent();\n            if(resurrectedSingleton == null)\n                throw new IllegalStateException(&quot;example failed&quot;);\n\n            System.out.println(&quot;Resurrection successful! resurrected: &quot; + resurrectedSingleton);\n\n            // At this point, the weak references to the object have been cleared,\n            // but the object is still strongly reachable -\n            // and that without the libraries' class having any finalizer.\n            System.out.println(&quot;Application now has two singletons: &quot; + resurrectedSingleton + &quot;, &quot; + secondSingleton);\n        }\n        private static class ApplicationHolder\n        {\n            private final Semaphore     referrerFinalizationComplete;\n            private FinalizableReferrer referrerAfterFinalization;\n\n            public ApplicationHolder(PublicSingletonService referent)\n            {\n                referrerFinalizationComplete = new Semaphore(0);\n                // explicitly don't keep a reference to this, to let it be able to be reclaimed\n                new FinalizableReferrer(this, referent);\n            }\n\n            public PublicSingletonService getReferent() throws InterruptedException\n            {\n                referrerFinalizationComplete.acquire();\n                return referrerAfterFinalization.getReferent();\n            }\n\n            private static class FinalizableReferrer\n            {\n                private final ApplicationHolder referrer;\n                private final PublicSingletonService    referent;\n\n                public FinalizableReferrer(ApplicationHolder referrer, PublicSingletonService referent)\n                {\n                    this.referrer = referrer;\n                    this.referent = referent;\n                }\n\n                @Override\n                protected void finalize()\n                {\n                    System.out.println(&quot;Finalizer making referent reachable again&quot;);\n                    referrer.referrerAfterFinalization = this;\n                    referrer.referrerFinalizationComplete.release();\n                }\n\n                public PublicSingletonService getReferent()\n                {\n                    return referent;\n                }\n            }\n        }\n    }\n\n    public static class Library\n    {\n        // just for demonstration; in reality, this would have to be thread-safe and whatnot\n        private int instanceCounter = 0;\n\n        private final ReferenceQueue&lt;PublicSingletonService&gt;    refqueue;\n        private WeakReference&lt;PublicSingletonService&gt;       publicSingletonObjectRef;\n\n        public Library()\n        {\n            this.refqueue = new ReferenceQueue&lt;&gt;();\n        }\n\n        public void doCleanupIfNecessary() throws InterruptedException\n        {\n            // In practice, this would be poll(), not remove() - however, in this example,\n            // even though we called System.gc() the enqueueing doesn't happen fast enough.\n            Reference&lt;? extends PublicSingletonService&gt; poll = refqueue.remove();\n            if(poll != null)\n            {\n                System.out.println(&quot;Reference to referent was cleared; weakRef.get() is &quot; + publicSingletonObjectRef.get()); // is null\n                // The library cleans up what it needs to clean up\n                System.out.println(&quot;Library \\&quot;cleans up\\&quot;&quot;);\n            } else\n                // In practice, the library would do nothing here.\n                throw new IllegalStateException(&quot;example failed&quot;);\n        }\n\n        public PublicSingletonService getSingleton()\n        {\n            if(publicSingletonObjectRef != null)\n            {\n                // This is the call to get() which would not be possible with a phantom reference\n                PublicSingletonService previousInstance = publicSingletonObjectRef.get();\n                if(previousInstance != null)\n                    return previousInstance;\n            }\n\n            PublicSingletonService publicSingletonObjectInstance = new PublicSingletonService(&quot;Instance #&quot; + instanceCounter ++);\n            publicSingletonObjectRef = new WeakReference&lt;&gt;(publicSingletonObjectInstance, refqueue);\n            return publicSingletonObjectInstance;\n        }\n\n        public static class PublicSingletonService\n        {\n            private final String value;\n\n            public PublicSingletonService(String value)\n            {\n                this.value = value;\n                System.out.println(&quot;Creating singleton object: &quot; + value);\n            }\n\n            @Override\n            public String toString()\n            {\n                return value;\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1548952115,"post_id":54464978,"comment_id":95738108,"body_markdown":"This seems to be an [XY-Problem](https://en.m.wikipedia.org/wiki/XY_problem). What is your use case?","body":"This seems to be an <a href=\"https://en.m.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY-Problem</a>. What is your use case?"},{"owner":{"account_id":1887647,"reputation":5271,"user_id":1706545,"accept_rate":89,"display_name":"Daniel Taub"},"score":0,"creation_date":1548952237,"post_id":54464978,"comment_id":95738175,"body_markdown":"I need to validate my schema every 10 minutes @Turing85","body":"I need to validate my schema every 10 minutes @Turing85"},{"owner":{"account_id":6365827,"reputation":3652,"user_id":4939853,"accept_rate":69,"display_name":"Oreste Viron"},"score":1,"creation_date":1548952462,"post_id":54464978,"comment_id":95738310,"body_markdown":"I think Turing85 wanted to know why you need to validate your schema every 10 minutes.","body":"I think Turing85 wanted to know why you need to validate your schema every 10 minutes."},{"owner":{"account_id":1887647,"reputation":5271,"user_id":1706545,"accept_rate":89,"display_name":"Daniel Taub"},"score":0,"creation_date":1548952562,"post_id":54464978,"comment_id":95738351,"body_markdown":"oh, its a something in our architecture... @OresteViron","body":"oh, its a something in our architecture... @OresteViron"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1548953264,"post_id":54464978,"comment_id":95738796,"body_markdown":"Possible duplicate of [How to validate database schema programmatically in hibernate with annotations?](https://stackoverflow.com/questions/2327423/how-to-validate-database-schema-programmatically-in-hibernate-with-annotations)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/2327423/how-to-validate-database-schema-programmatically-in-hibernate-with-annotations\">How to validate database schema programmatically in hibernate with annotations?</a>"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1548953279,"post_id":54464978,"comment_id":95738803,"body_markdown":"If you google for it you will find https://stackoverflow.com/questions/2327423/how-to-validate-database-schema-programmatically-in-hibernate-with-annotations","body":"If you google for it you will find <a href=\"https://stackoverflow.com/questions/2327423/how-to-validate-database-schema-programmatically-in-hibernate-with-annotations\" title=\"how to validate database schema programmatically in hibernate with annotations\">stackoverflow.com/questions/2327423/&hellip;</a>"},{"owner":{"account_id":1887647,"reputation":5271,"user_id":1706545,"accept_rate":89,"display_name":"Daniel Taub"},"score":0,"creation_date":1548958149,"post_id":54464978,"comment_id":95741434,"body_markdown":"I have update my question @SimonMartinelli","body":"I have update my question @SimonMartinelli"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1549141264,"post_id":54464978,"comment_id":95800176,"body_markdown":"@DanielTaub &quot;*oh, its a something in our architecture... @OresteViron*&quot; - Could you elaborate? I get the feeling that a SQL database might be the wrong solution for your problem.","body":"@DanielTaub &quot;<i>oh, its a something in our architecture... @OresteViron</i>&quot; - Could you elaborate? I get the feeling that a SQL database might be the wrong solution for your problem."}],"answers":[{"comments":[{"owner":{"account_id":4723263,"reputation":167,"user_id":3820633,"accept_rate":17,"display_name":"robynico"},"score":0,"creation_date":1637054114,"post_id":54498154,"comment_id":123716257,"body_markdown":"Great job ! schema-validator properties could be build directly from spring.datasource and spring.jpa.database-platform properties in order to avoid duplicates.","body":"Great job ! schema-validator properties could be build directly from spring.datasource and spring.jpa.database-platform properties in order to avoid duplicates."}],"tags":[],"owner":{"account_id":3345492,"reputation":4077,"user_id":2810730,"display_name":"Oleksii Zghurskyi"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1549407632,"creation_date":1549146671,"answer_id":54498154,"question_id":54464978,"body_markdown":"This is solution, if your use case requires:\r\n\r\n - granular &amp; explicit control of which part of the schema should be\r\n   validated\r\n - the need is to validate multiple schemas\r\n - the need is to validate schema that is not used by the service, on which scheduled validator is running\r\n - db connections used by application should not be influenced by validation in any way (meaning, you don&#39;t want to borrow connection from main connections pool)\r\n\r\n\r\nIf above applies for your needs, than this is **example of how to do scheduled schema validation**:\r\n\r\n 1. **Sources**\r\n\r\n```\r\n@SpringBootApplication\r\n@EnableScheduling\r\n@EnableConfigurationProperties(ScheamValidatorProperties.class)\r\npublic class SchemaValidatorApplication {\r\n     public static void main(String[] args) {\r\n       SpringApplication.run(SchemaValidatorApplication.class, args);\r\n    }\r\n}\r\n\r\n@ConfigurationProperties(&quot;schema-validator&quot;)\r\nclass ScheamValidatorProperties {\r\n    public Map&lt;String, String&gt; settings = new HashMap&lt;&gt;();\r\n\r\n    public ScheamValidatorProperties() {\r\n    }\r\n\r\n    public Map&lt;String, String&gt; getSettings() { \r\n        return this.settings;\r\n    }\r\n\r\n    public void setSome(Map&lt;String, String&gt; settings) { \r\n        this.settings = settings;\r\n    }\r\n}\r\n\r\n@Component\r\nclass ScheduledSchemaValidator {\r\n    \r\n    private ScheamValidatorProperties props;\r\n    \r\n    public ScheduledSchemaValidator(ScheamValidatorProperties props) {\r\n        this.props = props;\r\n    }\r\n\r\n    @Scheduled(cron = &quot;0 0/1 * * * ?&quot;)\r\n    public void validateSchema() {\r\n        StandardServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder()\r\n            .applySettings(props.getSettings())\r\n            .build();\r\n\r\n        Metadata metadata = new MetadataSources(serviceRegistry)\r\n            .addAnnotatedClass(Entity1.class)\r\n            .addAnnotatedClass(Entity2.class)\r\n            .buildMetadata();\r\n\r\n        try {\r\n            new SchemaValidator().validate(metadata, serviceRegistry);\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Validation failed: &quot; + e.getMessage());\r\n        } finally {\r\n            StandardServiceRegistryBuilder.destroy(serviceRegistry);\r\n        }\r\n    }\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;table1&quot;)\r\nclass Entity1 {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    Entity1() {}\r\n    \r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;table2&quot;)\r\nclass Entity2 {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    Entity2() {}\r\n    \r\n    public Long getId() {\r\n        return id;\r\n    }\r\n}\r\n```\r\n\r\n 2. **schema.sql**\r\n```\r\nCREATE DATABASE IF NOT EXISTS testdb;\r\n\r\nCREATE TABLE IF NOT EXISTS `table1` (\r\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\r\n  PRIMARY KEY (`id`)\r\n);\r\n\r\nCREATE TABLE IF NOT EXISTS `table2` (\r\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\r\n  PRIMARY KEY (`id`)\r\n);\r\n\r\n```\r\n 3. **application.yml**\r\n```\r\nspring:\r\n  cache:\r\n    type: none\r\n  datasource:\r\n    driver-class-name: com.mysql.cj.jdbc.Driver\r\n    url: jdbc:mysql://localhost:3309/testdb?useSSL=false&amp;nullNamePatternMatchesAll=true&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true\r\n    username: test_user\r\n    password: test_password\r\n    testWhileIdle: true\r\n    validationQuery: SELECT 1\r\n  jpa:\r\n    show-sql: false\r\n    database-platform: org.hibernate.dialect.MySQL8Dialect\r\n    hibernate:\r\n      ddl-auto: none\r\n      naming:\r\n        physical-strategy: org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy\r\n        implicit-strategy: org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy\r\n    properties:\r\n      hibernate.dialect: org.hibernate.dialect.MySQL8Dialect\r\n      hibernate.cache.use_second_level_cache: false\r\n      hibernate.cache.use_query_cache: false\r\n      hibernate.generate_statistics: false\r\n      hibernate.hbm2ddl.auto: validate\r\n\r\nschema-validator:\r\n    settings:\r\n        connection.driver_class: com.mysql.cj.jdbc.Driver\r\n        hibernate.dialect: org.hibernate.dialect.MySQL8Dialect\r\n        hibernate.connection.url: jdbc:mysql://localhost:3309/testdb?autoReconnect=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true\r\n        hibernate.connection.username: test_user\r\n        hibernate.connection.password: test_password\r\n        hibernate.default_schema: testdb\r\n\r\n```\r\n\r\n 4. **docker-compose.yml**\r\n```\r\nversion: &#39;3.0&#39;\r\n\r\nservices:\r\n  db:\r\n    image: mysql:8.0.14\r\n    restart: always\r\n    ports:\r\n     - 3309:3306\r\n    environment:\r\n      MYSQL_ROOT_PASSWORD: test_password\r\n      MYSQL_DATABASE: testdb\r\n      MYSQL_USER: test_user\r\n      MYSQL_PASSWORD: test_password\r\n```","title":"Validate schema programmatically using hibernate","body":"<p>This is solution, if your use case requires:</p>\n\n<ul>\n<li>granular &amp; explicit control of which part of the schema should be\nvalidated</li>\n<li>the need is to validate multiple schemas</li>\n<li>the need is to validate schema that is not used by the service, on which scheduled validator is running</li>\n<li>db connections used by application should not be influenced by validation in any way (meaning, you don't want to borrow connection from main connections pool)</li>\n</ul>\n\n<p>If above applies for your needs, than this is <strong>example of how to do scheduled schema validation</strong>:</p>\n\n<ol>\n<li><strong>Sources</strong></li>\n</ol>\n\n<pre><code>@SpringBootApplication\n@EnableScheduling\n@EnableConfigurationProperties(ScheamValidatorProperties.class)\npublic class SchemaValidatorApplication {\n     public static void main(String[] args) {\n       SpringApplication.run(SchemaValidatorApplication.class, args);\n    }\n}\n\n@ConfigurationProperties(\"schema-validator\")\nclass ScheamValidatorProperties {\n    public Map&lt;String, String&gt; settings = new HashMap&lt;&gt;();\n\n    public ScheamValidatorProperties() {\n    }\n\n    public Map&lt;String, String&gt; getSettings() { \n        return this.settings;\n    }\n\n    public void setSome(Map&lt;String, String&gt; settings) { \n        this.settings = settings;\n    }\n}\n\n@Component\nclass ScheduledSchemaValidator {\n\n    private ScheamValidatorProperties props;\n\n    public ScheduledSchemaValidator(ScheamValidatorProperties props) {\n        this.props = props;\n    }\n\n    @Scheduled(cron = \"0 0/1 * * * ?\")\n    public void validateSchema() {\n        StandardServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder()\n            .applySettings(props.getSettings())\n            .build();\n\n        Metadata metadata = new MetadataSources(serviceRegistry)\n            .addAnnotatedClass(Entity1.class)\n            .addAnnotatedClass(Entity2.class)\n            .buildMetadata();\n\n        try {\n            new SchemaValidator().validate(metadata, serviceRegistry);\n        } catch (Exception e) {\n            System.out.println(\"Validation failed: \" + e.getMessage());\n        } finally {\n            StandardServiceRegistryBuilder.destroy(serviceRegistry);\n        }\n    }\n}\n\n@Entity\n@Table(name = \"table1\")\nclass Entity1 {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    Entity1() {}\n\n    public Long getId() {\n        return id;\n    }\n\n}\n\n@Entity\n@Table(name = \"table2\")\nclass Entity2 {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    Entity2() {}\n\n    public Long getId() {\n        return id;\n    }\n}\n</code></pre>\n\n<ol start=\"2\">\n<li><strong>schema.sql</strong></li>\n</ol>\n\n<pre><code>CREATE DATABASE IF NOT EXISTS testdb;\n\nCREATE TABLE IF NOT EXISTS `table1` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `table2` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id`)\n);\n\n</code></pre>\n\n<ol start=\"3\">\n<li><strong>application.yml</strong></li>\n</ol>\n\n<pre><code>spring:\n  cache:\n    type: none\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3309/testdb?useSSL=false&amp;nullNamePatternMatchesAll=true&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true\n    username: test_user\n    password: test_password\n    testWhileIdle: true\n    validationQuery: SELECT 1\n  jpa:\n    show-sql: false\n    database-platform: org.hibernate.dialect.MySQL8Dialect\n    hibernate:\n      ddl-auto: none\n      naming:\n        physical-strategy: org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy\n        implicit-strategy: org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy\n    properties:\n      hibernate.dialect: org.hibernate.dialect.MySQL8Dialect\n      hibernate.cache.use_second_level_cache: false\n      hibernate.cache.use_query_cache: false\n      hibernate.generate_statistics: false\n      hibernate.hbm2ddl.auto: validate\n\nschema-validator:\n    settings:\n        connection.driver_class: com.mysql.cj.jdbc.Driver\n        hibernate.dialect: org.hibernate.dialect.MySQL8Dialect\n        hibernate.connection.url: jdbc:mysql://localhost:3309/testdb?autoReconnect=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true\n        hibernate.connection.username: test_user\n        hibernate.connection.password: test_password\n        hibernate.default_schema: testdb\n\n</code></pre>\n\n<ol start=\"4\">\n<li><strong>docker-compose.yml</strong></li>\n</ol>\n\n<pre><code>version: '3.0'\n\nservices:\n  db:\n    image: mysql:8.0.14\n    restart: always\n    ports:\n     - 3309:3306\n    environment:\n      MYSQL_ROOT_PASSWORD: test_password\n      MYSQL_DATABASE: testdb\n      MYSQL_USER: test_user\n      MYSQL_PASSWORD: test_password\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1887647,"reputation":5271,"user_id":1706545,"accept_rate":89,"display_name":"Daniel Taub"},"score":0,"creation_date":1549369996,"post_id":54509954,"comment_id":95870450,"body_markdown":"I want to get the metadata with my own configurations, but when I&#39;m creating my own one I&#39;m getting: more then one table found in namespace","body":"I want to get the metadata with my own configurations, but when I&#39;m creating my own one I&#39;m getting: more then one table found in namespace"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1549372146,"post_id":54509954,"comment_id":95871813,"body_markdown":"You mean you want to create `Metadata` again by yourself rather than reuse the existing one that is already built by hibernate ?","body":"You mean you want to create <code>Metadata</code> again by yourself rather than reuse the existing one that is already built by hibernate ?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1549373084,"post_id":54509954,"comment_id":95872405,"body_markdown":"Any concerns that you cannot configure your own packages that you want to validate as the usual hibernate entities package such that hibernate already built that metadata for you ? If you want to built the metadata by yourself , you should refer to other &#39;s proposed solutions. The spirit of this solution is to propose something that that are different from the already proposed ,  so it is not intended to fiddle with the  Metadata by ourself .","body":"Any concerns that you cannot configure your own packages that you want to validate as the usual hibernate entities package such that hibernate already built that metadata for you ? If you want to built the metadata by yourself , you should refer to other &#39;s proposed solutions. The spirit of this solution is to propose something that that are different from the already proposed ,  so it is not intended to fiddle with the  Metadata by ourself ."}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1549252459,"creation_date":1549252459,"answer_id":54509954,"question_id":54464978,"body_markdown":"If you want to let the `SchemaValidator` to reuse the connection configuration and the mapping information that are already configured in the project rather then defining them once again for schema validation,  you should consider my solution such that you are DRY and don&#39;t need to maintain these configurations in two separate places.\r\n\r\nActually , what  `SchemaValidator` requires is the `Metadata` instance which is only available during bootstrapping Hibernate . But we can use Hibernate Integrator API (as described in [here][1]) to capture it such that we can validate them later.\r\n\r\n(1) Create `SchemaValidateService` which implements Hibernate Integrator API to capture `Metadata`. Also setup a `@Scheduled` method to validate the schema at desired time.\r\n\r\n\r\n    @Component\r\n    public class SchemaValidateService implements Integrator {\r\n    \r\n        private Metadata metadata;\r\n    \r\n        @Override\r\n        public void integrate(Metadata metadata, SessionFactoryImplementor sessionFactory,\r\n                SessionFactoryServiceRegistry serviceRegistry) {\r\n            this.metadata = metadata;\r\n        }\r\n    \r\n        @Override\r\n        public void disintegrate(SessionFactoryImplementor sessionFactory, SessionFactoryServiceRegistry serviceRegistry) {\r\n        }\r\n    \r\n        //Adjust the scheduled time here\r\n        @Scheduled(cron = &quot;0 0/1 * * * ?&quot;)\r\n        public void validate() {\r\n            try {\r\n                System.out.println(&quot;Start validating schema&quot;);\r\n                new SchemaValidator().validate(metadata);\r\n            } catch (Exception e) {\r\n                //log the validation error here.\r\n            }\r\n            System.out.println(&quot;Finish validating schema....&quot;);\r\n        }\r\n    }\r\n\r\n(2) Register `SchemaValidateService` to Hibernate\r\n\r\n\r\n    @SpringBootApplication\r\n    @EnableScheduling\r\n    public class App {\r\n    \r\n    \t@Bean\r\n        public HibernatePropertiesCustomizer hibernatePropertiesCustomizer(SchemaValidateService schemaValidateService) {\r\n            return (prop -&gt; {\r\n                List&lt;Integrator&gt; integrators = new ArrayList&lt;&gt;();\r\n                integrators.add(schemaValidateService);\r\n                prop.put(&quot;hibernate.integrator_provider&quot;, (IntegratorProvider) () -&gt; integrators);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\nAlso, this solution should has better performance as it does not need to create a new database connection for validating schema each time as it can just grab the connection from the existing connection pool.\r\n\r\n\r\n  [1]: https://vladmihalcea.com/how-to-get-access-to-database-table-metadata-with-hibernate-5/\r\n","title":"Validate schema programmatically using hibernate","body":"<p>If you want to let the <code>SchemaValidator</code> to reuse the connection configuration and the mapping information that are already configured in the project rather then defining them once again for schema validation,  you should consider my solution such that you are DRY and don't need to maintain these configurations in two separate places.</p>\n\n<p>Actually , what  <code>SchemaValidator</code> requires is the <code>Metadata</code> instance which is only available during bootstrapping Hibernate . But we can use Hibernate Integrator API (as described in <a href=\"https://vladmihalcea.com/how-to-get-access-to-database-table-metadata-with-hibernate-5/\" rel=\"nofollow noreferrer\">here</a>) to capture it such that we can validate them later.</p>\n\n<p>(1) Create <code>SchemaValidateService</code> which implements Hibernate Integrator API to capture <code>Metadata</code>. Also setup a <code>@Scheduled</code> method to validate the schema at desired time.</p>\n\n<pre><code>@Component\npublic class SchemaValidateService implements Integrator {\n\n    private Metadata metadata;\n\n    @Override\n    public void integrate(Metadata metadata, SessionFactoryImplementor sessionFactory,\n            SessionFactoryServiceRegistry serviceRegistry) {\n        this.metadata = metadata;\n    }\n\n    @Override\n    public void disintegrate(SessionFactoryImplementor sessionFactory, SessionFactoryServiceRegistry serviceRegistry) {\n    }\n\n    //Adjust the scheduled time here\n    @Scheduled(cron = \"0 0/1 * * * ?\")\n    public void validate() {\n        try {\n            System.out.println(\"Start validating schema\");\n            new SchemaValidator().validate(metadata);\n        } catch (Exception e) {\n            //log the validation error here.\n        }\n        System.out.println(\"Finish validating schema....\");\n    }\n}\n</code></pre>\n\n<p>(2) Register <code>SchemaValidateService</code> to Hibernate</p>\n\n<pre><code>@SpringBootApplication\n@EnableScheduling\npublic class App {\n\n    @Bean\n    public HibernatePropertiesCustomizer hibernatePropertiesCustomizer(SchemaValidateService schemaValidateService) {\n        return (prop -&gt; {\n            List&lt;Integrator&gt; integrators = new ArrayList&lt;&gt;();\n            integrators.add(schemaValidateService);\n            prop.put(\"hibernate.integrator_provider\", (IntegratorProvider) () -&gt; integrators);\n        });\n    }\n}\n</code></pre>\n\n<p>Also, this solution should has better performance as it does not need to create a new database connection for validating schema each time as it can just grab the connection from the existing connection pool.</p>\n"},{"tags":[],"owner":{"account_id":7200190,"reputation":175,"user_id":5497653,"display_name":"Geert Graat"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694518024,"creation_date":1694518024,"answer_id":77088672,"question_id":54464978,"body_markdown":"I came across this post when I needed to find a way to validate the schema by Hibernate in a testcase. Reason for this is that the schema is created in the test using database scripts. When I set the following property\r\n\r\n    hibernate.hbm2ddl.auto=validate\r\n\r\nHibernate will immediately report the tables are not there, before the create scripts are executed.\r\n\r\nSo I needed a way to validate the schema after it has been created. I found that in Hibernate 6.2 the [`SchemaManager`][1] interface was introduced, which you can obtain via the `SessionFactory`, which is exactly suited for this task.\r\n\r\nUsing the following code you can easily validate the current schema in a testcase:\r\n\r\n    @Autowired\r\n    SessionFactory sessionFactory;\r\n       \r\n    @Test\r\n    void validateSchema() {\r\n      sessionFactory.getSchemaManager().validateMappedObjects();\r\n    }\r\n\r\n \r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/6.2/javadocs/org/hibernate/relational/SchemaManager.html\r\n\r\n","title":"Validate schema programmatically using hibernate","body":"<p>I came across this post when I needed to find a way to validate the schema by Hibernate in a testcase. Reason for this is that the schema is created in the test using database scripts. When I set the following property</p>\n<pre><code>hibernate.hbm2ddl.auto=validate\n</code></pre>\n<p>Hibernate will immediately report the tables are not there, before the create scripts are executed.</p>\n<p>So I needed a way to validate the schema after it has been created. I found that in Hibernate 6.2 the <a href=\"https://docs.jboss.org/hibernate/orm/6.2/javadocs/org/hibernate/relational/SchemaManager.html\" rel=\"nofollow noreferrer\"><code>SchemaManager</code></a> interface was introduced, which you can obtain via the <code>SessionFactory</code>, which is exactly suited for this task.</p>\n<p>Using the following code you can easily validate the current schema in a testcase:</p>\n<pre><code>@Autowired\nSessionFactory sessionFactory;\n   \n@Test\nvoid validateSchema() {\n  sessionFactory.getSchemaManager().validateMappedObjects();\n}\n</code></pre>\n"}],"owner":{"account_id":1887647,"reputation":5271,"user_id":1706545,"accept_rate":89,"display_name":"Daniel Taub"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10383,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":54498154,"answer_count":3,"score":7,"last_activity_date":1694518024,"creation_date":1548951867,"question_id":54464978,"body_markdown":"In mose projects the way to run your `java app` with schema validation is with that configuration (when using spring):\r\n\r\n    spring.jpa.hibernate.ddl-auto=validate\r\nI ran into a problem that I need to validate my schema at a specific times during running, is there any way to implement that?\r\n\r\nI saw that hibernate managed it with the [`AbstractSchemaValidator`][1],\r\nI&#39;m using spring with hibernate, and I didn&#39;t found any information how to deal with it,&lt;br&gt; the only thing I found is [How to validate database schema programmatically in hibernate with annotations?\r\n][2], but it was removed in  the older versions of `spring-boot`&lt;br&gt; \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nany ideas?\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/tool/schema/internal/AbstractSchemaValidator.html#validateTable-org.hibernate.mapping.Table-org.hibernate.tool.schema.extract.spi.TableInformation-org.hibernate.boot.Metadata-org.hibernate.tool.schema.spi.ExecutionOptions-org.hibernate.dialect.Dialect-\r\n  [2]: https://stackoverflow.com/questions/2327423/how-to-validate-database-schema-programmatically-in-hibernate-with-annotations\r\n","title":"Validate schema programmatically using hibernate","body":"<p>In mose projects the way to run your <code>java app</code> with schema validation is with that configuration (when using spring):</p>\n\n<pre><code>spring.jpa.hibernate.ddl-auto=validate\n</code></pre>\n\n<p>I ran into a problem that I need to validate my schema at a specific times during running, is there any way to implement that?</p>\n\n<p>I saw that hibernate managed it with the <a href=\"https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/tool/schema/internal/AbstractSchemaValidator.html#validateTable-org.hibernate.mapping.Table-org.hibernate.tool.schema.extract.spi.TableInformation-org.hibernate.boot.Metadata-org.hibernate.tool.schema.spi.ExecutionOptions-org.hibernate.dialect.Dialect-\" rel=\"noreferrer\"><code>AbstractSchemaValidator</code></a>,\nI'm using spring with hibernate, and I didn't found any information how to deal with it,<br> the only thing I found is <a href=\"https://stackoverflow.com/questions/2327423/how-to-validate-database-schema-programmatically-in-hibernate-with-annotations\">How to validate database schema programmatically in hibernate with annotations?\n</a>, but it was removed in  the older versions of <code>spring-boot</code><br> </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n    &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>any ideas?</p>\n"},{"tags":["java","spring","spring-boot","telegram-bot"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1694527232,"post_id":76532601,"comment_id":135900704,"body_markdown":"Why did you create the default constructor for the `Bot` class? I mean this: `public Bot(){}`","body":"Why did you create the default constructor for the <code>Bot</code> class? I mean this: <code>public Bot(){}</code>"}],"owner":{"account_id":28670222,"reputation":1,"user_id":21953433,"display_name":"Nihat Pehlivanoglu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694517520,"creation_date":1687441613,"question_id":76532601,"body_markdown":"It&#39;s my service class.\r\n```\r\n\r\nimport dto.NewUser;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\n@Service\r\n@Transactional(readOnly = true)\r\npublic class UserService {\r\n    private final UserRepository userRepository;\r\n\r\n    public UserService(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Transactional\r\n    public long create(NewUser user) {\r\n        return userRepository.create(new User(user.telegramUserId(),user.firstname(),user.lastname()));\r\n    }\r\n}\r\n\r\n```\r\nand this is my telegram bot class.\r\n\r\n```\r\npackage be.robaws.brootjesbot.bot;\r\n\r\nimport be.robaws.brootjesbot.services.UserService;\r\nimport dto.NewUser;\r\nimport jakarta.annotation.Resource;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.stereotype.Service;\r\nimport org.telegram.telegrambots.bots.TelegramLongPollingBot;\r\nimport org.telegram.telegrambots.meta.api.methods.send.SendMessage;\r\nimport org.telegram.telegrambots.meta.api.objects.Update;\r\nimport org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;\r\nimport org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardRow;\r\nimport org.telegram.telegrambots.meta.exceptions.TelegramApiException;\r\n\r\nimport java.time.*;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Component\r\npublic class Bot extends TelegramLongPollingBot {\r\n    @Autowired\r\n    private   UserService userService;\r\n\r\n    public Bot(UserService userService) {\r\n        this.userService = userService;\r\n    }\r\n\r\n    public Bot(){}\r\n    @Override\r\n    public String getBotUsername() {\r\n        return &quot;myUserName&quot;;\r\n    }\r\n\r\n    @Override\r\n    public String getBotToken() {\r\n        return &quot;mytoken&quot;;\r\n    }\r\n\r\n    @Override\r\n    public void onUpdateReceived(Update update) {\r\n        var user = update.getMessage().getFrom();\r\n        var id = user.getId();\r\n        var msg = update.getMessage();\r\n\r\n        Instant instant = Instant.ofEpochSecond(update.getMessage().getDate());\r\n        ZoneId belgiumZone = ZoneId.of(&quot;Europe/Brussels&quot;);\r\n        LocalDateTime date = LocalDateTime.ofInstant(instant, belgiumZone);\r\n        System.out.println(id + &quot;, &quot; + date + &quot;: &quot; + user.getFirstName() + &quot; &quot; + user.getLastName() + &quot;: &quot; + msg.getText());\r\n\r\n        if (msg.isCommand()) {\r\n            if (msg.getText().equals(&quot;/menu&quot;)) {\r\n                try {\r\n                    sendInitialKeyboard(id);\r\n                } catch (TelegramApiException ex) {\r\n                    System.err.println(ex);\r\n                }\r\n\r\n            } **else if (msg.getText().equals(&quot;/schrijf_me_in&quot;)) {\r\n                NewUser newUser = new NewUser(id, user.getFirstName(), user.getLastName());\r\n                long userId = userService.create(newUser);\r\n            }**\r\n        }\r\n\r\n    }\r\n\r\n    private void sendInitialKeyboard(Long chatId) throws TelegramApiException {\r\n        ReplyKeyboardMarkup keyboard = new ReplyKeyboardMarkup();\r\n        keyboard.setResizeKeyboard(true);\r\n        keyboard.setOneTimeKeyboard(true);\r\n        keyboard.setSelective(true);\r\n\r\n        List&lt;KeyboardRow&gt; keyboardRows = new ArrayList&lt;&gt;();\r\n        KeyboardRow row1 = new KeyboardRow();\r\n        row1.add(&quot;\\uD83E\\uDD56 Kies om een broodje te bestellen&quot;);\r\n        KeyboardRow row2 = new KeyboardRow();\r\n        row2.add(&quot;\\uD83D\\uDD04 Kies om een bestaande bestelling te vervangen&quot;);\r\n        KeyboardRow row3 = new KeyboardRow();\r\n        row3.add(&quot;\\u274C Kies om een bestaande bestelling te annuleren&quot;);\r\n        KeyboardRow row4 = new KeyboardRow();\r\n        row4.add(&quot;\\uD83D\\uDC41️ Kies om uw bestelling te zien&quot;);\r\n        KeyboardRow row5 = new KeyboardRow();\r\n        row5.add(&quot;\\uD83D\\uDC41️ Kies om vorige bestellingen te zien&quot;);\r\n\r\n        keyboardRows.add(row1);\r\n        keyboardRows.add(row2);\r\n        keyboardRows.add(row3);\r\n        keyboardRows.add(row4);\r\n        keyboardRows.add(row5);\r\n\r\n        keyboard.setKeyboard(keyboardRows);\r\n        keyboard.setInputFieldPlaceholder(&quot;Kies een optie: &quot;);\r\n\r\n\r\n        SendMessage message = new SendMessage();\r\n        message.setChatId(chatId.toString());\r\n        message.setText(&quot;Kies een optie: &quot;);\r\n        message.setReplyMarkup(keyboard);\r\n\r\n\r\n        execute(message);\r\n    }\r\n\r\n\r\n    public void sendText(Long who, String what) {\r\n        SendMessage sm = SendMessage.builder()\r\n                .chatId(who.toString()) //Who are we sending a message to\r\n                .text(what).build();    //Message content\r\n        try {\r\n            execute(sm);                        //Actually sending the message\r\n        } catch (TelegramApiException e) {\r\n            throw new RuntimeException(e);      //Any error will be printed here\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n\r\nIn my telegramBot class i want to call service.createUser method but if i try that i recieve this fault; \r\n\r\n2023-06-22T15:37:37.793+02:00 ERROR 9440 --- [legram Executor] o.t.t.u.DefaultBotSession                : Cannot invoke &quot;be.robaws.brootjesbot.services.UserService.create(dto.NewUser)&quot; because &quot;this.userService&quot; is null\r\n\r\njava.lang.NullPointerException: Cannot invoke &quot;be.robaws.brootjesbot.services.UserService.create(dto.NewUser)&quot; because &quot;this.userService&quot; is null\r\n\tat be.robaws.brootjesbot.bot.Bot.onUpdateReceived(Bot.java:61) ~[classes/:na]\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\r\n\tat org.telegram.telegrambots.meta.generics.LongPollingBot.onUpdatesReceived(LongPollingBot.java:27) ~[telegrambots-meta-6.0.1.jar:na]\r\n\tat org.telegram.telegrambots.updatesreceivers.DefaultBotSession$HandlerThread.run(DefaultBotSession.java:317) ~[telegrambots-6.0.1.jar:na]\r\n\r\nI tried almost everything but i can not create a bean for service. How can i fix it ? \r\n\r\n\r\nHow can i use a spring boot service function in a telegram bot class ? ","title":"How can i call a spring boot service function in a telegram bot class","body":"<p>It's my service class.</p>\n<pre><code>\nimport dto.NewUser;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Service\n@Transactional(readOnly = true)\npublic class UserService {\n    private final UserRepository userRepository;\n\n    public UserService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Transactional\n    public long create(NewUser user) {\n        return userRepository.create(new User(user.telegramUserId(),user.firstname(),user.lastname()));\n    }\n}\n\n</code></pre>\n<p>and this is my telegram bot class.</p>\n<pre><code>package be.robaws.brootjesbot.bot;\n\nimport be.robaws.brootjesbot.services.UserService;\nimport dto.NewUser;\nimport jakarta.annotation.Resource;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\nimport org.springframework.stereotype.Service;\nimport org.telegram.telegrambots.bots.TelegramLongPollingBot;\nimport org.telegram.telegrambots.meta.api.methods.send.SendMessage;\nimport org.telegram.telegrambots.meta.api.objects.Update;\nimport org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;\nimport org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardRow;\nimport org.telegram.telegrambots.meta.exceptions.TelegramApiException;\n\nimport java.time.*;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Component\npublic class Bot extends TelegramLongPollingBot {\n    @Autowired\n    private   UserService userService;\n\n    public Bot(UserService userService) {\n        this.userService = userService;\n    }\n\n    public Bot(){}\n    @Override\n    public String getBotUsername() {\n        return &quot;myUserName&quot;;\n    }\n\n    @Override\n    public String getBotToken() {\n        return &quot;mytoken&quot;;\n    }\n\n    @Override\n    public void onUpdateReceived(Update update) {\n        var user = update.getMessage().getFrom();\n        var id = user.getId();\n        var msg = update.getMessage();\n\n        Instant instant = Instant.ofEpochSecond(update.getMessage().getDate());\n        ZoneId belgiumZone = ZoneId.of(&quot;Europe/Brussels&quot;);\n        LocalDateTime date = LocalDateTime.ofInstant(instant, belgiumZone);\n        System.out.println(id + &quot;, &quot; + date + &quot;: &quot; + user.getFirstName() + &quot; &quot; + user.getLastName() + &quot;: &quot; + msg.getText());\n\n        if (msg.isCommand()) {\n            if (msg.getText().equals(&quot;/menu&quot;)) {\n                try {\n                    sendInitialKeyboard(id);\n                } catch (TelegramApiException ex) {\n                    System.err.println(ex);\n                }\n\n            } **else if (msg.getText().equals(&quot;/schrijf_me_in&quot;)) {\n                NewUser newUser = new NewUser(id, user.getFirstName(), user.getLastName());\n                long userId = userService.create(newUser);\n            }**\n        }\n\n    }\n\n    private void sendInitialKeyboard(Long chatId) throws TelegramApiException {\n        ReplyKeyboardMarkup keyboard = new ReplyKeyboardMarkup();\n        keyboard.setResizeKeyboard(true);\n        keyboard.setOneTimeKeyboard(true);\n        keyboard.setSelective(true);\n\n        List&lt;KeyboardRow&gt; keyboardRows = new ArrayList&lt;&gt;();\n        KeyboardRow row1 = new KeyboardRow();\n        row1.add(&quot;\\uD83E\\uDD56 Kies om een broodje te bestellen&quot;);\n        KeyboardRow row2 = new KeyboardRow();\n        row2.add(&quot;\\uD83D\\uDD04 Kies om een bestaande bestelling te vervangen&quot;);\n        KeyboardRow row3 = new KeyboardRow();\n        row3.add(&quot;\\u274C Kies om een bestaande bestelling te annuleren&quot;);\n        KeyboardRow row4 = new KeyboardRow();\n        row4.add(&quot;\\uD83D\\uDC41️ Kies om uw bestelling te zien&quot;);\n        KeyboardRow row5 = new KeyboardRow();\n        row5.add(&quot;\\uD83D\\uDC41️ Kies om vorige bestellingen te zien&quot;);\n\n        keyboardRows.add(row1);\n        keyboardRows.add(row2);\n        keyboardRows.add(row3);\n        keyboardRows.add(row4);\n        keyboardRows.add(row5);\n\n        keyboard.setKeyboard(keyboardRows);\n        keyboard.setInputFieldPlaceholder(&quot;Kies een optie: &quot;);\n\n\n        SendMessage message = new SendMessage();\n        message.setChatId(chatId.toString());\n        message.setText(&quot;Kies een optie: &quot;);\n        message.setReplyMarkup(keyboard);\n\n\n        execute(message);\n    }\n\n\n    public void sendText(Long who, String what) {\n        SendMessage sm = SendMessage.builder()\n                .chatId(who.toString()) //Who are we sending a message to\n                .text(what).build();    //Message content\n        try {\n            execute(sm);                        //Actually sending the message\n        } catch (TelegramApiException e) {\n            throw new RuntimeException(e);      //Any error will be printed here\n        }\n    }\n\n\n}\n\n</code></pre>\n<p>In my telegramBot class i want to call service.createUser method but if i try that i recieve this fault;</p>\n<p>2023-06-22T15:37:37.793+02:00 ERROR 9440 --- [legram Executor] o.t.t.u.DefaultBotSession                : Cannot invoke &quot;be.robaws.brootjesbot.services.UserService.create(dto.NewUser)&quot; because &quot;this.userService&quot; is null</p>\n<p>java.lang.NullPointerException: Cannot invoke &quot;be.robaws.brootjesbot.services.UserService.create(dto.NewUser)&quot; because &quot;this.userService&quot; is null\nat be.robaws.brootjesbot.bot.Bot.onUpdateReceived(Bot.java:61) ~[classes/:na]\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\nat org.telegram.telegrambots.meta.generics.LongPollingBot.onUpdatesReceived(LongPollingBot.java:27) ~[telegrambots-meta-6.0.1.jar:na]\nat org.telegram.telegrambots.updatesreceivers.DefaultBotSession$HandlerThread.run(DefaultBotSession.java:317) ~[telegrambots-6.0.1.jar:na]</p>\n<p>I tried almost everything but i can not create a bean for service. How can i fix it ?</p>\n<p>How can i use a spring boot service function in a telegram bot class ?</p>\n"},{"tags":["java","azure","azure-active-directory"],"comments":[{"owner":{"account_id":4081176,"reputation":56,"user_id":3351631,"display_name":"lukasinko"},"score":1,"creation_date":1674203528,"post_id":73984493,"comment_id":132667895,"body_markdown":"Hi, we are having the same error. Have you found solution for it ? We have noticed, that it is connected to one specific Azure instance, because the same code works with different account. Maybe some Locale/Region settings - but haven&#39;t found the resolution for it.","body":"Hi, we are having the same error. Have you found solution for it ? We have noticed, that it is connected to one specific Azure instance, because the same code works with different account. Maybe some Locale/Region settings - but haven&#39;t found the resolution for it."}],"answers":[{"tags":[],"owner":{"account_id":11777559,"reputation":1172,"user_id":8627215,"display_name":"James Netherton"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675694164,"creation_date":1675694164,"answer_id":75362707,"question_id":73984493,"body_markdown":"I observed a similar problem.\r\n\r\nOn the Azure storage account, you must enable the hierarchical namespace. Otherwise you&#39;re likely to encounter errors.\r\n\r\nhttps://learn.microsoft.com/en-us/azure/storage/blobs/create-data-lake-storage-account#enable-the-hierarchical-namespace\r\n","title":"NumberFormatException - Azure Blob Listing","body":"<p>I observed a similar problem.</p>\n<p>On the Azure storage account, you must enable the hierarchical namespace. Otherwise you're likely to encounter errors.</p>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/storage/blobs/create-data-lake-storage-account#enable-the-hierarchical-namespace\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/storage/blobs/create-data-lake-storage-account#enable-the-hierarchical-namespace</a></p>\n"},{"tags":[],"owner":{"account_id":9702279,"reputation":11,"user_id":10395510,"display_name":"Arv93"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694517488,"creation_date":1694517313,"answer_id":77088593,"question_id":73984493,"body_markdown":"I&#39;ve also faced a similar issue. As James mentioned above, it is due to using APIs that work against ADLS gen2 only.\r\nIf you&#39;re setting up a new storage account, you can create an account with Gen2 storage directly as mentioned above:\r\nhttps://learn.microsoft.com/en-us/azure/storage/blobs/create-data-lake-storage-account#enable-the-hierarchical-namespace\r\n\r\nIn case, you&#39;ve already setup an account, you can upgrade it to use ADLS gen2 as well. The only caveat is that all the containers in this account will be inaccessible during the upgrade, including UI access and any other hooks that you might have attached to these containers.\r\nHere&#39;s how to go ahead with the upgrade.\r\n\r\nhttps://learn.microsoft.com/en-us/azure/storage/blobs/upgrade-to-data-lake-storage-gen2-how-to?tabs=azure-portal\r\n\r\nThanks a lot for the help \r\n[@James][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/8627215/james-netherton!!","title":"NumberFormatException - Azure Blob Listing","body":"<p>I've also faced a similar issue. As James mentioned above, it is due to using APIs that work against ADLS gen2 only.\nIf you're setting up a new storage account, you can create an account with Gen2 storage directly as mentioned above:\n<a href=\"https://learn.microsoft.com/en-us/azure/storage/blobs/create-data-lake-storage-account#enable-the-hierarchical-namespace\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/storage/blobs/create-data-lake-storage-account#enable-the-hierarchical-namespace</a></p>\n<p>In case, you've already setup an account, you can upgrade it to use ADLS gen2 as well. The only caveat is that all the containers in this account will be inaccessible during the upgrade, including UI access and any other hooks that you might have attached to these containers.\nHere's how to go ahead with the upgrade.</p>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/storage/blobs/upgrade-to-data-lake-storage-gen2-how-to?tabs=azure-portal\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/storage/blobs/upgrade-to-data-lake-storage-gen2-how-to?tabs=azure-portal</a></p>\n<p>Thanks a lot for the help\n<a href=\"https://stackoverflow.com/users/8627215/james-netherton!!\">@James</a></p>\n"}],"owner":{"account_id":17924121,"reputation":95,"user_id":13023168,"display_name":"SMValiAli"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":213,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1694517488,"creation_date":1665131690,"question_id":73984493,"body_markdown":"I am trying to list the blobs from directory with azure file directory system.\r\n\r\nBut I am getting number format exception , please help me .\r\n\r\n    &#39;&#39;&#39;Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;Wed, 24 Aug 2022 15:06:25 GMT&quot;\r\n    \tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n    \tat java.lang.Long.parseLong(Long.java:589)\r\n    \tat java.lang.Long.parseLong(Long.java:631)\r\n    \tat com.azure.storage.file.datalake.Transforms.toPathItem(Transforms.java:351)\r\n    \tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n    \tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1384)\r\n    \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n    \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n    \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n    \tat com.azure.storage.file.datalake.DataLakeFileSystemAsyncClient.lambda$listPathsWithOptionalTimeout$3(DataLakeFileSystemAsyncClient.java:708)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)\r\n    \tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\r\n    \tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n    \tat reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:191)\r\n    \tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2398)\r\n    \tat reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.request(FluxHandleFuseable.java:257)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\r\n    \tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2194)\r\n    \tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2068)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\r\n    \tat reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onSubscribe(FluxHandleFuseable.java:161)\r\n    \tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\r\n    \tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\r\n    \tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\r\n    \tat reactor.core.publisher.FluxDoOnEach$DoOnEachSubscriber.onNext(FluxDoOnEach.java:173)\r\n    \tat reactor.core.publisher.FluxDoOnEach$DoOnEachFuseableSubscriber.onNext(FluxDoOnEach.java:281)\r\n    \tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n    \tat reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:137)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n    \tat reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:137)\r\n    \tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n    \tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\r\n    \tat reactor.core.publisher.FluxDelaySubscription$DelaySubscriptionMainSubscriber.onNext(FluxDelaySubscription.java:189)\r\n    \tat reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\r\n    \tat reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\r\n    \tat reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:180)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n    \tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\r\n    \tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\r\n    \tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n    \tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\r\n    \tat reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\r\n    \tat reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.onNext(FluxRetryWhen.java:174)\r\n    \tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n    \tat reactor.core.publisher.Operators$MonoInnerProducerBase.complete(Operators.java:2664)\r\n    \tat reactor.core.publisher.MonoSingle$SingleSubscriber.onComplete(MonoSingle.java:180)\r\n    \tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:260)\r\n    \tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n    \tat reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152)\r\n    \tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1817)\r\n    \tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:160)\r\n    \tat reactor.core.publisher.FluxHandle$HandleSubscriber.onComplete(FluxHandle.java:220)\r\n    \tat reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275)\r\n    \tat reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:400)\r\n    \tat reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:419)\r\n    \tat reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:473)\r\n    \tat reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:703)\r\n    \tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:93)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:327)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:299)\r\n    \tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1373)\r\n    \tat io.netty.handler.ssl.SslHandler.decodeNonJdkCompatible(SslHandler.java:1247)\r\n    \tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1287)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:510)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:449)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:279)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:722)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    \tSuppressed: java.lang.Exception: #block terminated with an error\r\n    \t\tat reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99)\r\n    \t\tat reactor.core.publisher.Flux.blockLast(Flux.java:2645)\r\n    \t\tat com.azure.core.util.paging.ContinuablePagedByIteratorBase.requestPage(ContinuablePagedByIteratorBase.java:102)\r\n    \t\tat com.azure.core.util.paging.ContinuablePagedByItemIterable$ContinuablePagedByItemIterator.&lt;init&gt;(ContinuablePagedByItemIterable.java:75)\r\n    \t\tat com.azure.core.util.paging.ContinuablePagedByItemIterable.iterator(ContinuablePagedByItemIterable.java:55)\r\n    \t\tat com.azure.core.util.paging.ContinuablePagedIterable.iterator(ContinuablePagedIterable.java:141)\r\n    \t\tat adlsconnection.ADLSConnection.listFilesInDirectory(&#39;&#39;&#39;\r\n\r\nFollowing is the code that I am using\r\n\r\n```public void ListFilesInDirectory(DataLakeFileSystemClient fileSystemClient){\r\n    \r\n    ListPathsOptions options = new ListPathsOptions();\r\n    options.setPath(&quot;my-directory&quot;);\r\n \r\n    PagedIterable&lt;PathItem&gt; pagedIterable = \r\n    fileSystemClient.listPaths(options, null);\r\n\r\n    java.util.Iterator&lt;PathItem&gt; iterator = pagedIterable.iterator();\r\n\r\n   \r\n    PathItem item = iterator.next();\r\n\r\n    while (item != null)\r\n    {\r\n        System.out.println(item.getName());\r\n\r\n\r\n        if (!iterator.hasNext())\r\n        {\r\n            break;\r\n        }\r\n        \r\n        item = iterator.next();\r\n    }\r\n\r\n}","title":"NumberFormatException - Azure Blob Listing","body":"<p>I am trying to list the blobs from directory with azure file directory system.</p>\n<p>But I am getting number format exception , please help me .</p>\n<pre><code>'''Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;Wed, 24 Aug 2022 15:06:25 GMT&quot;\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Long.parseLong(Long.java:589)\n    at java.lang.Long.parseLong(Long.java:631)\n    at com.azure.storage.file.datalake.Transforms.toPathItem(Transforms.java:351)\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1384)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n    at com.azure.storage.file.datalake.DataLakeFileSystemAsyncClient.lambda$listPathsWithOptionalTimeout$3(DataLakeFileSystemAsyncClient.java:708)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\n    at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:191)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2398)\n    at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.request(FluxHandleFuseable.java:257)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2194)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2068)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onSubscribe(FluxHandleFuseable.java:161)\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\n    at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\n    at reactor.core.publisher.FluxDoOnEach$DoOnEachSubscriber.onNext(FluxDoOnEach.java:173)\n    at reactor.core.publisher.FluxDoOnEach$DoOnEachFuseableSubscriber.onNext(FluxDoOnEach.java:281)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:137)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:137)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\n    at reactor.core.publisher.FluxDelaySubscription$DelaySubscriptionMainSubscriber.onNext(FluxDelaySubscription.java:189)\n    at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\n    at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\n    at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:180)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\n    at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\n    at reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.onNext(FluxRetryWhen.java:174)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.Operators$MonoInnerProducerBase.complete(Operators.java:2664)\n    at reactor.core.publisher.MonoSingle$SingleSubscriber.onComplete(MonoSingle.java:180)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:260)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152)\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1817)\n    at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:160)\n    at reactor.core.publisher.FluxHandle$HandleSubscriber.onComplete(FluxHandle.java:220)\n    at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275)\n    at reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:400)\n    at reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:419)\n    at reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:473)\n    at reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:703)\n    at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:93)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:327)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:299)\n    at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1373)\n    at io.netty.handler.ssl.SslHandler.decodeNonJdkCompatible(SslHandler.java:1247)\n    at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1287)\n    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:510)\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:449)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:279)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:722)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.lang.Thread.run(Thread.java:748)\n    Suppressed: java.lang.Exception: #block terminated with an error\n        at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99)\n        at reactor.core.publisher.Flux.blockLast(Flux.java:2645)\n        at com.azure.core.util.paging.ContinuablePagedByIteratorBase.requestPage(ContinuablePagedByIteratorBase.java:102)\n        at com.azure.core.util.paging.ContinuablePagedByItemIterable$ContinuablePagedByItemIterator.&lt;init&gt;(ContinuablePagedByItemIterable.java:75)\n        at com.azure.core.util.paging.ContinuablePagedByItemIterable.iterator(ContinuablePagedByItemIterable.java:55)\n        at com.azure.core.util.paging.ContinuablePagedIterable.iterator(ContinuablePagedIterable.java:141)\n        at adlsconnection.ADLSConnection.listFilesInDirectory('''\n</code></pre>\n<p>Following is the code that I am using</p>\n<pre><code>    \n    ListPathsOptions options = new ListPathsOptions();\n    options.setPath(&quot;my-directory&quot;);\n \n    PagedIterable&lt;PathItem&gt; pagedIterable = \n    fileSystemClient.listPaths(options, null);\n\n    java.util.Iterator&lt;PathItem&gt; iterator = pagedIterable.iterator();\n\n   \n    PathItem item = iterator.next();\n\n    while (item != null)\n    {\n        System.out.println(item.getName());\n\n\n        if (!iterator.hasNext())\n        {\n            break;\n        }\n        \n        item = iterator.next();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":15987967,"reputation":420,"user_id":11537839,"display_name":"ProGamer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694265581,"creation_date":1694265581,"answer_id":77072450,"question_id":77072148,"body_markdown":"Looks like you need to check if there were any change between previous object and current object.\r\nYou may first convert objects to json and compare.\r\n```\r\npublic static boolean compare(Object obj1, Object obj2) {\r\n    return new Gson().toJson(obj1).equals(new Gson().toJson(obj2));\r\n}\r\ncompare(update,existsChart);\r\n```\r\n\r\nOr you may use Java Map to check for changes : \r\n\r\n```\r\nObjectMapper objectMapper = new ObjectMapper();\r\nMap&lt;String, Object&gt; aMap =  objectMapper.convertValue(update, Map.class);\r\nMap&lt;String, Object&gt; bMap =  objectMapper.convertValue(existsChart, Map.class);\r\n\r\naMap.equals(bMap);\r\n\r\n```","title":"Spring Boot Update","body":"<p>Looks like you need to check if there were any change between previous object and current object.\nYou may first convert objects to json and compare.</p>\n<pre><code>public static boolean compare(Object obj1, Object obj2) {\n    return new Gson().toJson(obj1).equals(new Gson().toJson(obj2));\n}\ncompare(update,existsChart);\n</code></pre>\n<p>Or you may use Java Map to check for changes :</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nMap&lt;String, Object&gt; aMap =  objectMapper.convertValue(update, Map.class);\nMap&lt;String, Object&gt; bMap =  objectMapper.convertValue(existsChart, Map.class);\n\naMap.equals(bMap);\n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22789620,"reputation":7,"user_id":16944175,"display_name":"haider fadel"},"score":0,"creation_date":1694537515,"post_id":77075840,"comment_id":135903089,"body_markdown":"first of all thank you for help. i have tried this before but it not the right way and it will cose so meny issue so asked here to fine another way. thank you again","body":"first of all thank you for help. i have tried this before but it not the right way and it will cose so meny issue so asked here to fine another way. thank you again"}],"tags":[],"owner":{"account_id":2261604,"reputation":72,"user_id":1991545,"display_name":"abhi_88"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694344047,"creation_date":1694344047,"answer_id":77075840,"question_id":77072148,"body_markdown":"You can use Hibernate @DynamicUpdate annotation with the entity. In this case, hibernate will fire an update query only for the field that we want to update. \r\n\r\n\r\n    \r\n    @Entity\r\n    @DynamicUpdate\r\n    public class MyEntity implements Serializable {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Long id;\r\n\r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n        //\r\n    }\r\n\r\n\r\n    \r\n\r\n\r\n\r\nYou can check more details about @DynamicUpdate example [here][1].\r\n\r\n\r\n  [1]: https://javatute.com/hibernate/hibernate-dynamicupdate-example/\r\n\r\nIf you want to get stuck with your approach you might consider using reflection to compare the values.\r\nHere is the sample code.\r\n\r\n    @Transactional\r\n    public Student save(Student student) {\r\n        Student createResponse = null;\r\n        createResponse = studentRepository.save(student);\r\n        return createResponse;\r\n    }\r\n\r\n    @Transactional\r\n    public Student update(Student student) {\r\n\r\n        Optional&lt;Student&gt; response = studentRepository.findById(student.getId());\r\n        Student fromDb = response.get();\r\n        boolean changes = false;\r\n        if (fromDb != null) {\r\n\r\n            // Use reflection to get and compare the values of all fields\r\n            Field[] fields = Student.class.getDeclaredFields();\r\n            for (Field field : fields) {\r\n                field.setAccessible(true);\r\n                try {\r\n                    Object existingValue = field.get(fromDb);\r\n                    Object entityNeedsToUpdate = field.get(student);\r\n\r\n                    if (!Objects.equals(existingValue, entityNeedsToUpdate)) {\r\n                        field.set(fromDb, entityNeedsToUpdate);\r\n                        changes = true;\r\n\r\n                    }\r\n                } catch (IllegalAccessException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n            if (changes) {\r\n                return studentRepository.save(fromDb);\r\n            }else{\r\n                return student;\r\n            }\r\n\r\n\r\n        }\r\n        return student;\r\n    }\r\n\r\n","title":"Spring Boot Update","body":"<p>You can use Hibernate @DynamicUpdate annotation with the entity. In this case, hibernate will fire an update query only for the field that we want to update.</p>\n<pre><code>@Entity\n@DynamicUpdate\npublic class MyEntity implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n    //\n}\n</code></pre>\n<p>You can check more details about @DynamicUpdate example <a href=\"https://javatute.com/hibernate/hibernate-dynamicupdate-example/\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>If you want to get stuck with your approach you might consider using reflection to compare the values.\nHere is the sample code.</p>\n<pre><code>@Transactional\npublic Student save(Student student) {\n    Student createResponse = null;\n    createResponse = studentRepository.save(student);\n    return createResponse;\n}\n\n@Transactional\npublic Student update(Student student) {\n\n    Optional&lt;Student&gt; response = studentRepository.findById(student.getId());\n    Student fromDb = response.get();\n    boolean changes = false;\n    if (fromDb != null) {\n\n        // Use reflection to get and compare the values of all fields\n        Field[] fields = Student.class.getDeclaredFields();\n        for (Field field : fields) {\n            field.setAccessible(true);\n            try {\n                Object existingValue = field.get(fromDb);\n                Object entityNeedsToUpdate = field.get(student);\n\n                if (!Objects.equals(existingValue, entityNeedsToUpdate)) {\n                    field.set(fromDb, entityNeedsToUpdate);\n                    changes = true;\n\n                }\n            } catch (IllegalAccessException e) {\n                throw new RuntimeException(e);\n            }\n        }\n        if (changes) {\n            return studentRepository.save(fromDb);\n        }else{\n            return student;\n        }\n\n\n    }\n    return student;\n}\n</code></pre>\n"}],"owner":{"account_id":22789620,"reputation":7,"user_id":16944175,"display_name":"haider fadel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1694517315,"creation_date":1694261456,"question_id":77072148,"body_markdown":"I have spring boot application and i&#39;m working on update request so my enitity is so big and have nested object and classes so how can i update this entity with more professtional way so i dont have to check on every properties if null or empty\r\n\r\n\r\nI tried to check with if else condtions but it so complex and the code will be so bad\r\n\r\nspecial when I have getLevelOfConsciousness have multi properties to check \r\n\r\n```java\r\nboolean changes = false;\r\n        if(update.getLevelOfConsciousness() != null &amp;&amp; !update.getLevelOfConsciousness().equals(existsChart.getLevelOfConsciousness())) {\r\n            existsChart.setLevelOfConsciousness(update.getLevelOfConsciousness());\r\n            changes = true;\r\n        }if(update.getOrientation() != null &amp;&amp; !update.getOrientation().equals(existsChart.getOrientation())){\r\n            existsChart.setOrientation(update.getOrientation());\r\n            changes = true;\r\n        }if(update.getMentalState() != null &amp;&amp; !update.getMentalState().equals(existsChart.getMentalState())){\r\n            existsChart.setMentalState(update.getMentalState());\r\n            changes = true;\r\n        }if(update.getEyes() != null &amp;&amp; !update.getEyes().equals(existsChart.getEyes())){\r\n            existsChart.setEyes(update.getEyes());\r\n            changes = true;\r\n        }if(update.getEars() != null &amp;&amp; !update.getEars().equals(existsChart.getEars())){\r\n            existsChart.setEars(update.getEars());\r\n            changes = true;\r\n        }if(update.getMouth() != null &amp;&amp; !update.getMouth().equals(existsChart.getMouth())){\r\n            existsChart.setMouth(update.getMouth());\r\n            changes = true;\r\n        }if(update.getNose() != null &amp;&amp; !update.getNose().equals(existsChart.getNose())){\r\n            existsChart.setNose(update.getNose());\r\n            changes = true;\r\n        }if(update.getHair() != null &amp;&amp; !update.getHair().equals(existsChart.getHair())){\r\n            existsChart.setHair(update.getHair());\r\n            changes = true;\r\n        }if(update.getNeck() != null &amp;&amp; !update.getNeck().equals(existsChart.getNeck())){\r\n            existsChart.setNeck(update.getNeck());\r\n            changes = true;\r\n        }if(update.getSkin() != null &amp;&amp; !update.getSkin().equals(existsChart.getSkin())){\r\n            existsChart.setSkin(update.getSkin());\r\n            changes = true;\r\n        }if(update.getChest() != null &amp;&amp; !update.getChest().equals(existsChart.getChest())){\r\n            existsChart.setChest(update.getChest());\r\n            changes = true;\r\n        }if(update.getAbdomen() != null &amp;&amp; !update.getAbdomen().equals(existsChart.getAbdomen())){\r\n            existsChart.setAbdomen(update.getAbdomen());\r\n            changes = true;\r\n        }if(update.getUpperExtremities() != null &amp;&amp; !update.getUpperExtremities().equals(existsChart.getUpperExtremities())){\r\n            existsChart.setUpperExtremities(update.getUpperExtremities());\r\n            changes = true;\r\n        }if(update.getLowerExtremities() != null &amp;&amp; !update.getLowerExtremities().equals(existsChart.getLowerExtremities())){\r\n            existsChart.setLowerExtremities(update.getLowerExtremities());\r\n            changes = true;\r\n        }if(update.getVitalSign() != null &amp;&amp; !update.getVitalSign().equals(existsChart.getVitalSign())){\r\n            existsChart.setVitalSign(update.getVitalSign());\r\n            changes = true;\r\n        }if(update.getNote() != null &amp;&amp; !update.getNote().equals(existsChart.getNote())){\r\n            existsChart.setNote(update.getNote());\r\n            changes = true;\r\n        }\r\n        if (!changes){\r\n            throw new BadRequestException(&quot;No changes found&quot;);\r\n        }\r\n```","title":"Spring Boot Update","body":"<p>I have spring boot application and i'm working on update request so my enitity is so big and have nested object and classes so how can i update this entity with more professtional way so i dont have to check on every properties if null or empty</p>\n<p>I tried to check with if else condtions but it so complex and the code will be so bad</p>\n<p>special when I have getLevelOfConsciousness have multi properties to check</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean changes = false;\n        if(update.getLevelOfConsciousness() != null &amp;&amp; !update.getLevelOfConsciousness().equals(existsChart.getLevelOfConsciousness())) {\n            existsChart.setLevelOfConsciousness(update.getLevelOfConsciousness());\n            changes = true;\n        }if(update.getOrientation() != null &amp;&amp; !update.getOrientation().equals(existsChart.getOrientation())){\n            existsChart.setOrientation(update.getOrientation());\n            changes = true;\n        }if(update.getMentalState() != null &amp;&amp; !update.getMentalState().equals(existsChart.getMentalState())){\n            existsChart.setMentalState(update.getMentalState());\n            changes = true;\n        }if(update.getEyes() != null &amp;&amp; !update.getEyes().equals(existsChart.getEyes())){\n            existsChart.setEyes(update.getEyes());\n            changes = true;\n        }if(update.getEars() != null &amp;&amp; !update.getEars().equals(existsChart.getEars())){\n            existsChart.setEars(update.getEars());\n            changes = true;\n        }if(update.getMouth() != null &amp;&amp; !update.getMouth().equals(existsChart.getMouth())){\n            existsChart.setMouth(update.getMouth());\n            changes = true;\n        }if(update.getNose() != null &amp;&amp; !update.getNose().equals(existsChart.getNose())){\n            existsChart.setNose(update.getNose());\n            changes = true;\n        }if(update.getHair() != null &amp;&amp; !update.getHair().equals(existsChart.getHair())){\n            existsChart.setHair(update.getHair());\n            changes = true;\n        }if(update.getNeck() != null &amp;&amp; !update.getNeck().equals(existsChart.getNeck())){\n            existsChart.setNeck(update.getNeck());\n            changes = true;\n        }if(update.getSkin() != null &amp;&amp; !update.getSkin().equals(existsChart.getSkin())){\n            existsChart.setSkin(update.getSkin());\n            changes = true;\n        }if(update.getChest() != null &amp;&amp; !update.getChest().equals(existsChart.getChest())){\n            existsChart.setChest(update.getChest());\n            changes = true;\n        }if(update.getAbdomen() != null &amp;&amp; !update.getAbdomen().equals(existsChart.getAbdomen())){\n            existsChart.setAbdomen(update.getAbdomen());\n            changes = true;\n        }if(update.getUpperExtremities() != null &amp;&amp; !update.getUpperExtremities().equals(existsChart.getUpperExtremities())){\n            existsChart.setUpperExtremities(update.getUpperExtremities());\n            changes = true;\n        }if(update.getLowerExtremities() != null &amp;&amp; !update.getLowerExtremities().equals(existsChart.getLowerExtremities())){\n            existsChart.setLowerExtremities(update.getLowerExtremities());\n            changes = true;\n        }if(update.getVitalSign() != null &amp;&amp; !update.getVitalSign().equals(existsChart.getVitalSign())){\n            existsChart.setVitalSign(update.getVitalSign());\n            changes = true;\n        }if(update.getNote() != null &amp;&amp; !update.getNote().equals(existsChart.getNote())){\n            existsChart.setNote(update.getNote());\n            changes = true;\n        }\n        if (!changes){\n            throw new BadRequestException(&quot;No changes found&quot;);\n        }\n</code></pre>\n"},{"tags":["java","okhttp"],"answers":[{"comments":[{"owner":{"account_id":2142244,"reputation":2287,"user_id":1900620,"accept_rate":41,"display_name":"Thiago Say&#227;o"},"score":0,"creation_date":1694514061,"post_id":77085708,"comment_id":135897598,"body_markdown":"Yes, but the documentation does not give details to clarify if I just let it alone or on which scenarios should I configure it. Does `new OkHttpClient.Builder()` creates a new pool? Or does OkHttp have a global pool?","body":"Yes, but the documentation does not give details to clarify if I just let it alone or on which scenarios should I configure it. Does <code>new OkHttpClient.Builder()</code> creates a new pool? Or does OkHttp have a global pool?"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694517318,"post_id":77085708,"comment_id":135898286,"body_markdown":"I focused and improved the question.","body":"I focused and improved the question."},{"owner":{"account_id":2142244,"reputation":2287,"user_id":1900620,"accept_rate":41,"display_name":"Thiago Say&#227;o"},"score":0,"creation_date":1694982660,"post_id":77085708,"comment_id":135959846,"body_markdown":"Thanks. I&#39;m still unsure about the warning `new OkHttpClient.Builder().connectionPool(connectionPool)` being kotlin internal.","body":"Thanks. I&#39;m still unsure about the warning <code>new OkHttpClient.Builder().connectionPool(connectionPool)</code> being kotlin internal."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1695038312,"post_id":77085708,"comment_id":135966295,"body_markdown":"What&#39;s exactly the warning?","body":"What&#39;s exactly the warning?"},{"owner":{"account_id":2142244,"reputation":2287,"user_id":1900620,"accept_rate":41,"display_name":"Thiago Say&#227;o"},"score":0,"creation_date":1695119032,"post_id":77085708,"comment_id":135978538,"body_markdown":"Usage of Kotlin internal declaration from different module. It&#39;s an intellij idea warning, but inspecting the code `.connectionPool` is declared as internal.","body":"Usage of Kotlin internal declaration from different module. It&#39;s an intellij idea warning, but inspecting the code <code>.connectionPool</code> is declared as internal."},{"owner":{"account_id":2142244,"reputation":2287,"user_id":1900620,"accept_rate":41,"display_name":"Thiago Say&#227;o"},"score":1,"creation_date":1695119341,"post_id":77085708,"comment_id":135978593,"body_markdown":"weird, it seems a bogus warning, since there&#39;s a non internal function with the same name.","body":"weird, it seems a bogus warning, since there&#39;s a non internal function with the same name."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1695124518,"post_id":77085708,"comment_id":135979472,"body_markdown":"Probably, the confusion is because of [`connectionPool` internal var](https://github.com/square/okhttp/blob/d602ba275e93c22c512847765e303d8c6c3b3c10/okhttp/src/jvmMain/kotlin/okhttp3/OkHttpClient.kt#L512). But you&#39;re right, seems like a *bogus warning*.","body":"Probably, the confusion is because of <a href=\"https://github.com/square/okhttp/blob/d602ba275e93c22c512847765e303d8c6c3b3c10/okhttp/src/jvmMain/kotlin/okhttp3/OkHttpClient.kt#L512\" rel=\"nofollow noreferrer\"><code>connectionPool</code> internal var</a>. But you&#39;re right, seems like a <i>bogus warning</i>."}],"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694517277,"creation_date":1694484789,"answer_id":77085708,"question_id":77085371,"body_markdown":"From [documentation][1]:\r\n\r\n&gt; OkHttp performs best when you create a single OkHttpClient instance\r\n&gt; and reuse it for all of your HTTP calls. **This is because each client\r\n&gt; holds its own connection pool and thread pools**. Reusing connections\r\n&gt; and threads reduces latency and saves memory. Conversely, creating a\r\n&gt; client for each request wastes resources on idle pools.\r\n\r\nSo, yes, **each client will have it&#39;s own pool**.\r\n\r\n  [1]: https://square.github.io/okhttp/4.x/okhttp/okhttp3/-ok-http-client/","title":"Should I worry about OkHttp 4 Connection Pools?","body":"<p>From <a href=\"https://square.github.io/okhttp/4.x/okhttp/okhttp3/-ok-http-client/\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>OkHttp performs best when you create a single OkHttpClient instance\nand reuse it for all of your HTTP calls. <strong>This is because each client\nholds its own connection pool and thread pools</strong>. Reusing connections\nand threads reduces latency and saves memory. Conversely, creating a\nclient for each request wastes resources on idle pools.</p>\n</blockquote>\n<p>So, yes, <strong>each client will have it's own pool</strong>.</p>\n"}],"owner":{"account_id":2142244,"reputation":2287,"user_id":1900620,"accept_rate":41,"display_name":"Thiago Say&#227;o"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77085708,"answer_count":1,"score":0,"last_activity_date":1694517277,"creation_date":1694476610,"question_id":77085371,"body_markdown":"I used to create OkHttp Clients like this:\r\n\r\n    new OkHttpClient.Builder().connectionPool(connectionPool)\r\n                                     .readTimeout(Duration.ofSeconds(timeout))\r\n                                     .connectTimeout(Duration.ofMillis(timeout))\r\n                                     .addInterceptor(logging)\r\n                                     .build();\r\n\r\nBut now I&#39;m getting a warning about `connectionPool` being kotlin internal (I&#39;m using it from java).\r\n\r\nIt seems related to upgrading to OkHttp 4.\r\n\r\nShould I forget about pools and let OkHttp handle it?\r\n\r\nIf I create many OkHttpClients within my application. If I don&#39;t configure the pool, will they use the same pool, or each client will have it&#39;s own pool? I have one application with many different HTTP connection usage scenarios.\r\n","title":"Should I worry about OkHttp 4 Connection Pools?","body":"<p>I used to create OkHttp Clients like this:</p>\n<pre><code>new OkHttpClient.Builder().connectionPool(connectionPool)\n                                 .readTimeout(Duration.ofSeconds(timeout))\n                                 .connectTimeout(Duration.ofMillis(timeout))\n                                 .addInterceptor(logging)\n                                 .build();\n</code></pre>\n<p>But now I'm getting a warning about <code>connectionPool</code> being kotlin internal (I'm using it from java).</p>\n<p>It seems related to upgrading to OkHttp 4.</p>\n<p>Should I forget about pools and let OkHttp handle it?</p>\n<p>If I create many OkHttpClients within my application. If I don't configure the pool, will they use the same pool, or each client will have it's own pool? I have one application with many different HTTP connection usage scenarios.</p>\n"},{"tags":["java","geoserver","geotools"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694503671,"post_id":77086826,"comment_id":135895546,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694516190,"creation_date":1694516190,"answer_id":77088476,"question_id":77086826,"body_markdown":"You should add a new factory to GeoServer rather than try to modify the existing one. \r\n\r\nThere is a [Factory tutorial for GeoTools][1] (which is what does the work in GeoServer) which will show the basic principal for creating a factory and using the SPI system to register it with GeoTools applications like GeoServer. \r\n\r\nOnce you have written your new factory which can either extend [`ShapeMarkFactory`][2] or implement [`MarkFactory`][3] if you want a different prefix to trigger it. You&#39;ll need a file called `META-INF/services/org.geotools.renderer.style.MarkFactory` (in the resources folder of your project) that file should contain a line with the fully qualified name of your factory. \r\n\r\nThen you can use `mvn` to compile the project into a jar file or a zip including any necessary external jars. You can then add those jars to the `WEB-INF/lib` folder of your GeoServer install and restart it. \r\n\r\n\r\n  [1]: https://docs.geotools.org/latest/userguide/tutorial/factory.html\r\n  [2]: https://github.com/geotools/geotools/blob/main/modules/library/render/src/main/java/org/geotools/renderer/style/ShapeMarkFactory.java\r\n  [3]: https://github.com/geotools/geotools/blob/main/modules/library/render/src/main/java/org/geotools/renderer/style/MarkFactory.java#L25","title":"How to overwriter ShapeMarkerFactory In GeoServer?","body":"<p>You should add a new factory to GeoServer rather than try to modify the existing one.</p>\n<p>There is a <a href=\"https://docs.geotools.org/latest/userguide/tutorial/factory.html\" rel=\"nofollow noreferrer\">Factory tutorial for GeoTools</a> (which is what does the work in GeoServer) which will show the basic principal for creating a factory and using the SPI system to register it with GeoTools applications like GeoServer.</p>\n<p>Once you have written your new factory which can either extend <a href=\"https://github.com/geotools/geotools/blob/main/modules/library/render/src/main/java/org/geotools/renderer/style/ShapeMarkFactory.java\" rel=\"nofollow noreferrer\"><code>ShapeMarkFactory</code></a> or implement <a href=\"https://github.com/geotools/geotools/blob/main/modules/library/render/src/main/java/org/geotools/renderer/style/MarkFactory.java#L25\" rel=\"nofollow noreferrer\"><code>MarkFactory</code></a> if you want a different prefix to trigger it. You'll need a file called <code>META-INF/services/org.geotools.renderer.style.MarkFactory</code> (in the resources folder of your project) that file should contain a line with the fully qualified name of your factory.</p>\n<p>Then you can use <code>mvn</code> to compile the project into a jar file or a zip including any necessary external jars. You can then add those jars to the <code>WEB-INF/lib</code> folder of your GeoServer install and restart it.</p>\n"}],"owner":{"account_id":29420432,"reputation":23,"user_id":22542272,"display_name":"Glad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694516190,"creation_date":1694503067,"question_id":77086826,"body_markdown":"I want to create a new Mark in GeoServer&#39;s SLD style, but I can&#39;t find MarkFactory interface in GeoServer sources code, and I can&#39;t find the ShapeMarkFactory class in these code. I don&#39;t know where can I add the Geotool class in GeoServer&#39;s source code and make it work, or where I can overwriter the ShapeMarkFactory class to add a new WellKnowName Mark In Mark.","title":"How to overwriter ShapeMarkerFactory In GeoServer?","body":"<p>I want to create a new Mark in GeoServer's SLD style, but I can't find MarkFactory interface in GeoServer sources code, and I can't find the ShapeMarkFactory class in these code. I don't know where can I add the Geotool class in GeoServer's source code and make it work, or where I can overwriter the ShapeMarkFactory class to add a new WellKnowName Mark In Mark.</p>\n"},{"tags":["java","android","kotlin","random"],"comments":[{"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"score":1,"creation_date":1629976456,"post_id":6029495,"comment_id":121832557,"body_markdown":"With [Kotlin](https://stackoverflow.com/a/45687695/8583692) you can do this: `val r = (0..10).random()`","body":"With <a href=\"https://stackoverflow.com/a/45687695/8583692\">Kotlin</a> you can do this: <code>val r = (0..10).random()</code>"},{"owner":{"account_id":7223715,"reputation":1665,"user_id":6427595,"display_name":"arjun"},"score":0,"creation_date":1686736126,"post_id":6029495,"comment_id":134838964,"body_markdown":"You can write `val randomNumber = (min..max).random()` where `min` and `max` are the edges of the specified range. Refer [Kotlin – Generate a Random Number in specific Range](https://kotlinandroid.org/kotlin/kotlin-generate-a-random-number-in-specific-range/)","body":"You can write <code>val randomNumber = (min..max).random()</code> where <code>min</code> and <code>max</code> are the edges of the specified range. Refer <a href=\"https://kotlinandroid.org/kotlin/kotlin-generate-a-random-number-in-specific-range/\" rel=\"nofollow noreferrer\">Kotlin – Generate a Random Number in specific Range</a>"}],"answers":[{"tags":[],"owner":{"account_id":187974,"reputation":20625,"user_id":426412,"display_name":"Vivien Barousse"},"comment_count":0,"down_vote_count":0,"up_vote_count":308,"is_accepted":false,"score":308,"last_activity_date":1450480256,"creation_date":1305628175,"answer_id":6029518,"question_id":6029495,"body_markdown":"    int min = 65;\r\n    int max = 80;\r\n\r\n    Random r = new Random();\r\n    int i1 = r.nextInt(max - min + 1) + min;\r\n\r\nNote that `nextInt(int max)` returns an `int` between 0 inclusive and max exclusive. Hence the ``+1``.","title":"How can I generate random number in specific range in Android?","body":"<pre><code>int min = 65;\nint max = 80;\n\nRandom r = new Random();\nint i1 = r.nextInt(max - min + 1) + min;\n</code></pre>\n\n<p>Note that <code>nextInt(int max)</code> returns an <code>int</code> between 0 inclusive and max exclusive. Hence the <code>+1</code>.</p>\n"},{"comments":[{"owner":{"account_id":1227466,"reputation":10105,"user_id":1192761,"accept_rate":57,"display_name":"Kirill Kulakov"},"score":3,"creation_date":1370640104,"post_id":6029519,"comment_id":24550893,"body_markdown":"it won&#39;t work for negative numbers","body":"it won&#39;t work for negative numbers"},{"owner":{"account_id":1194198,"reputation":2253,"user_id":1166266,"accept_rate":100,"display_name":"Allison"},"score":7,"creation_date":1388878614,"post_id":6029519,"comment_id":31424084,"body_markdown":"If you need a negative number, use this and multiply by -1. You need a float, I think.","body":"If you need a negative number, use this and multiply by -1. You need a float, I think."},{"owner":{"account_id":3009569,"reputation":451,"user_id":2553372,"display_name":"TomeeNS"},"score":0,"creation_date":1443044921,"post_id":6029519,"comment_id":53340746,"body_markdown":"@Sirens: He could even generate two more numbers, then count differente between them (it can be negative or positive number ;)), and finaly multiply the original random number ;)","body":"@Sirens: He could even generate two more numbers, then count differente between them (it can be negative or positive number ;)), and finaly multiply the original random number ;)"},{"owner":{"account_id":3433236,"reputation":2920,"user_id":2877004,"display_name":"Alecs"},"score":2,"creation_date":1452510871,"post_id":6029519,"comment_id":57185848,"body_markdown":"simpler as possible: int myRandomInt = new Random().nextInt(80 - 65) + 65;","body":"simpler as possible: int myRandomInt = new Random().nextInt(80 - 65) + 65;"},{"owner":{"account_id":6969151,"reputation":500,"user_id":5346097,"display_name":"Saik Caskey"},"score":8,"creation_date":1497863842,"post_id":6029519,"comment_id":76238817,"body_markdown":"I&#39;ve been writing Java in one way or another for about 8 years and I still copy and paste this code whenever I need it, cheers &#128077;","body":"I&#39;ve been writing Java in one way or another for about 8 years and I still copy and paste this code whenever I need it, cheers 👍"},{"owner":{"account_id":379304,"reputation":4485,"user_id":732570,"accept_rate":83,"display_name":"roberto tom&#225;s"},"score":0,"creation_date":1502028341,"post_id":6029519,"comment_id":78025554,"body_markdown":"@TomeeNS that would weaken the randomness .. these arent actual random numbers, dont forget.","body":"@TomeeNS that would weaken the randomness .. these arent actual random numbers, dont forget."},{"owner":{"account_id":8160089,"reputation":2919,"user_id":6144372,"accept_rate":47,"display_name":"Hammad Nasir"},"score":0,"creation_date":1507551348,"post_id":6029519,"comment_id":80241388,"body_markdown":"can you help with this answer here: https://stackoverflow.com/q/46638945/6144372 I tried to use your code but failed.","body":"can you help with this answer here: <a href=\"https://stackoverflow.com/q/46638945/6144372\">stackoverflow.com/q/46638945/6144372</a> I tried to use your code but failed."},{"owner":{"account_id":7799666,"reputation":2135,"user_id":5899585,"display_name":"larsaars"},"score":0,"creation_date":1591734168,"post_id":6029519,"comment_id":110167802,"body_markdown":"this is just pseudo-random!","body":"this is just pseudo-random!"}],"tags":[],"owner":{"account_id":134312,"reputation":11572,"user_id":336355,"display_name":"Ishtar"},"comment_count":8,"down_vote_count":2,"up_vote_count":525,"is_accepted":true,"score":523,"last_activity_date":1392344530,"creation_date":1305628180,"answer_id":6029519,"question_id":6029495,"body_markdown":"    Random r = new Random();\r\n    int i1 = r.nextInt(80 - 65) + 65;\r\n\r\nThis gives a random integer between 65 (inclusive) and 80 (exclusive), one of `65,66,...,78,79`.","title":"How can I generate random number in specific range in Android?","body":"<pre><code>Random r = new Random();\nint i1 = r.nextInt(80 - 65) + 65;\n</code></pre>\n\n<p>This gives a random integer between 65 (inclusive) and 80 (exclusive), one of <code>65,66,...,78,79</code>.</p>\n"}],"owner":{"account_id":260754,"reputation":15424,"user_id":544512,"accept_rate":62,"display_name":"Mohit Kanada"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":482425,"favorite_count":0,"down_vote_count":3,"up_vote_count":291,"closed_date":1580453460,"accepted_answer_id":6029519,"answer_count":2,"score":288,"last_activity_date":1694515498,"creation_date":1305628075,"question_id":6029495,"body_markdown":"I want to generate random number in a specific range. (Ex. Range Between 65 to 80)\r\n\r\nI try as per below code, but it is not very use full. It also returns the value greater then max. value(greater then 80). \r\n\r\n    Random r = new Random();\r\n    int i1 = (r.nextInt(80) + 65);\r\n\r\nHow can I generate random number between a range?\r\n","title":"How can I generate random number in specific range in Android?","body":"<p>I want to generate random number in a specific range. (Ex. Range Between 65 to 80)</p>\n<p>I try as per below code, but it is not very use full. It also returns the value greater then max. value(greater then 80).</p>\n<pre><code>Random r = new Random();\nint i1 = (r.nextInt(80) + 65);\n</code></pre>\n<p>How can I generate random number between a range?</p>\n"},{"tags":["java","android","http","https","urlconnection"],"comments":[{"owner":{"account_id":32045,"reputation":26603,"user_id":88442,"accept_rate":54,"display_name":"J-16 SDiZ"},"score":0,"creation_date":1340223864,"post_id":11127578,"comment_id":14582389,"body_markdown":"It is a `HttpURLConnection`, you can&#39;t cast it to `HttpsURLConnection`. This is the same as the question you linked. You just using another incorrect class","body":"It is a <code>HttpURLConnection</code>, you can&#39;t cast it to <code>HttpsURLConnection</code>. This is the same as the question you linked. You just using another incorrect class"}],"answers":[{"comments":[{"owner":{"account_id":1934327,"reputation":8960,"user_id":1742973,"accept_rate":58,"display_name":"Matias Elorriaga"},"score":3,"creation_date":1438192808,"post_id":11127629,"comment_id":51353855,"body_markdown":"as a comment, if your urlString starts with http://, changing HttpsURLConnection for HttpURLConnection solved the error :)","body":"as a comment, if your urlString starts with http://, changing HttpsURLConnection for HttpURLConnection solved the error :)"},{"owner":{"account_id":2104019,"reputation":1407,"user_id":1870830,"accept_rate":46,"display_name":"offset"},"score":0,"creation_date":1446463862,"post_id":11127629,"comment_id":54738173,"body_markdown":"@MatiasElorriaga- your comment is more useful from the answer... thanks.","body":"@MatiasElorriaga- your comment is more useful from the answer... thanks."},{"owner":{"account_id":5942587,"reputation":3088,"user_id":4673240,"display_name":"Praveen Kumar Verma"},"score":0,"creation_date":1488792563,"post_id":11127629,"comment_id":72372196,"body_markdown":"I have used java.net.HttpURLConnection for unscured URLs but Google would not accept HttpURLConnection implementation during publish application on play store. Alert message by Play store - &quot;Your app(s) are using an unsafe implementation of the HostnameVerifier interface. &quot; Please provide any solution ?","body":"I have used java.net.HttpURLConnection for unscured URLs but Google would not accept HttpURLConnection implementation during publish application on play store. Alert message by Play store - &quot;Your app(s) are using an unsafe implementation of the HostnameVerifier interface. &quot; Please provide any solution ?"}],"tags":[],"owner":{"account_id":1238284,"reputation":3771,"user_id":1201423,"accept_rate":75,"display_name":"cklab"},"comment_count":3,"down_vote_count":2,"up_vote_count":90,"is_accepted":true,"score":88,"last_activity_date":1565962264,"creation_date":1340223941,"answer_id":11127629,"question_id":11127578,"body_markdown":"**Method 1:**\r\nYour `urlString` must begin with `https://` and not `http://` for you to be able to cast it to a `HttpsURLConnection`.\r\n\r\n**Method 2:**\r\nif your urlString starts with `http://`, changing `HttpsURLConnection` to `HttpURLConnection` should work","title":"java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection","body":"<p><strong>Method 1:</strong>\nYour <code>urlString</code> must begin with <code>https://</code> and not <code>http://</code> for you to be able to cast it to a <code>HttpsURLConnection</code>.</p>\n\n<p><strong>Method 2:</strong>\nif your urlString starts with <code>http://</code>, changing <code>HttpsURLConnection</code> to <code>HttpURLConnection</code> should work</p>\n"},{"tags":[],"owner":{"account_id":218123,"reputation":15258,"user_id":474287,"accept_rate":100,"display_name":"Morfic"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1340223957,"creation_date":1340223957,"answer_id":11127637,"question_id":11127578,"body_markdown":"`url.openConnection();` seems to be returning an object of type `libcore.net.http.HttpURLConnectionImpl` while you have declared your &quot;conn&quot; object as being of type `import javax.net.ssl.HttpsURLConnection;`. You need to sort up your imports and used objects. Maybe you missed something in the tutorial you were following.","title":"java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection","body":"<p><code>url.openConnection();</code> seems to be returning an object of type <code>libcore.net.http.HttpURLConnectionImpl</code> while you have declared your \"conn\" object as being of type <code>import javax.net.ssl.HttpsURLConnection;</code>. You need to sort up your imports and used objects. Maybe you missed something in the tutorial you were following.</p>\n"},{"tags":[],"owner":{"account_id":6195261,"reputation":271,"user_id":4826748,"accept_rate":0,"display_name":"Mediasoft"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446611275,"creation_date":1446609985,"answer_id":33513478,"question_id":11127578,"body_markdown":"Simple remove `urlConnection.setDoOutput(true);`\r\n\r\nit will work fine.","title":"java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection","body":"<p>Simple remove <code>urlConnection.setDoOutput(true);</code></p>\n\n<p>it will work fine.</p>\n"},{"tags":[],"owner":{"account_id":7147888,"reputation":3217,"user_id":5462988,"display_name":"anoopknr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1532501848,"creation_date":1532501848,"answer_id":51512617,"question_id":11127578,"body_markdown":"I had same Exception `java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection`\r\n\r\n    uri = new URL(&quot;http://www.google.com&quot;);\r\n    HttpsURLConnection connection = (HttpsURLConnection) uri.openConnection(); // Exception\r\n\r\nI changed \r\n\r\n    uri = new URL(&quot;http://www.google.com&quot;);\r\nto\r\n\r\n    uri = new URL(&quot;https://www.google.com&quot;);\r\nNow it is working perfectly.\r\n","title":"java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection","body":"<p>I had same Exception <code>java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection</code></p>\n\n<pre><code>uri = new URL(\"http://www.google.com\");\nHttpsURLConnection connection = (HttpsURLConnection) uri.openConnection(); // Exception\n</code></pre>\n\n<p>I changed </p>\n\n<pre><code>uri = new URL(\"http://www.google.com\");\n</code></pre>\n\n<p>to</p>\n\n<pre><code>uri = new URL(\"https://www.google.com\");\n</code></pre>\n\n<p>Now it is working perfectly.</p>\n"},{"tags":[],"owner":{"account_id":252402,"reputation":4873,"user_id":530424,"accept_rate":17,"display_name":"elhadi dp ıpɐɥןǝ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694515467,"creation_date":1694515467,"answer_id":77088383,"question_id":11127578,"body_markdown":"*url.openConnection()* returns HttpURLConnection if your url is an HTTP request, it returns HttpsURLConnection if your url is an HTTPS request.\r\n\r\n - you can cast HttpsURLConnection to HttpURLConnection, but the inverse can lead to an exception if your url is an HTTP url, which you have seen.\r\n\r\n - so, to use *HttpsURLConnection*, you should always cast your url.openConnection() to *HttpURLConnection*, if you have tasks with *HttpsURLConnection*, example use your own *X509TrustManager*, you should check first if your URL is an HTTPS.\r\n\r\n herein a sample code:\r\n\r\n     HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n\r\n     if (url.get_protocol().equals(&quot;https&quot;)) {\r\n          HttpsURLConnection sconn = (HttpsURLConnection)conn;\r\n\r\n          /* do tasks with https connection */\r\n     }\r\n\r\n","title":"java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection","body":"<p><em>url.openConnection()</em> returns HttpURLConnection if your url is an HTTP request, it returns HttpsURLConnection if your url is an HTTPS request.</p>\n<ul>\n<li><p>you can cast HttpsURLConnection to HttpURLConnection, but the inverse can lead to an exception if your url is an HTTP url, which you have seen.</p>\n</li>\n<li><p>so, to use <em>HttpsURLConnection</em>, you should always cast your url.openConnection() to <em>HttpURLConnection</em>, if you have tasks with <em>HttpsURLConnection</em>, example use your own <em>X509TrustManager</em>, you should check first if your URL is an HTTPS.</p>\n</li>\n</ul>\n<p>herein a sample code:</p>\n<pre><code> HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n\n if (url.get_protocol().equals(&quot;https&quot;)) {\n      HttpsURLConnection sconn = (HttpsURLConnection)conn;\n\n      /* do tasks with https connection */\n }\n</code></pre>\n"}],"owner":{"account_id":120711,"reputation":1996,"user_id":313299,"accept_rate":80,"display_name":"Teddy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30339,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":11127629,"answer_count":5,"score":21,"last_activity_date":1694515467,"creation_date":1340223719,"question_id":11127578,"body_markdown":"I&#39;m writing a bit of code to upload a file from the device to the cloud over HTTPS.\r\n\r\nRelevant snippet:\r\n\r\n    HttpsURLConnection conn = null; \r\n    URL url = new URL(urlstring);\r\n    conn = (HttpsURLConnection) url.openConnection(); // exception here.\r\n\r\nBut the cast won&#39;t compile:\r\n    \r\n    06-20 15:58:05.311: E/FNF(30286): java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection\r\n\r\n\r\nI found this similar question: https://stackoverflow.com/questions/3038026/using-java-class-httpsurlconnection, but I am not importing anything from the sun package.\r\n\r\nMy imports:\r\n\r\n    import java.io.DataOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.net.URL;\r\n    import android.net.Uri;\r\n    import javax.net.ssl.HttpsURLConnection;\r\n    import android.util.Log;\r\n    import edu.mit.media.funf.storage.RemoteFileArchive;\r\n    import edu.mit.media.funf.util.LogUtil;\r\n\r\nI&#39;ve been scratching my head about this one for a while now, any suggestions?","title":"java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection","body":"<p>I'm writing a bit of code to upload a file from the device to the cloud over HTTPS.</p>\n\n<p>Relevant snippet:</p>\n\n<pre><code>HttpsURLConnection conn = null; \nURL url = new URL(urlstring);\nconn = (HttpsURLConnection) url.openConnection(); // exception here.\n</code></pre>\n\n<p>But the cast won't compile:</p>\n\n<pre><code>06-20 15:58:05.311: E/FNF(30286): java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to javax.net.ssl.HttpsURLConnection\n</code></pre>\n\n<p>I found this similar question: <a href=\"https://stackoverflow.com/questions/3038026/using-java-class-httpsurlconnection\">Using java class HttpsURLConnection</a>, but I am not importing anything from the sun package.</p>\n\n<p>My imports:</p>\n\n<pre><code>import java.io.DataOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.net.URL;\nimport android.net.Uri;\nimport javax.net.ssl.HttpsURLConnection;\nimport android.util.Log;\nimport edu.mit.media.funf.storage.RemoteFileArchive;\nimport edu.mit.media.funf.util.LogUtil;\n</code></pre>\n\n<p>I've been scratching my head about this one for a while now, any suggestions?</p>\n"},{"tags":["java","eclipse","weblogic","spring-tool-suite"],"owner":{"account_id":5888090,"reputation":197,"user_id":4635456,"accept_rate":33,"display_name":"theCoder379"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694514606,"creation_date":1690971656,"question_id":76818926,"body_markdown":"I am trying to remote debug java application hosted in Weblogic 12c locally using Spring Tool Suite. But when I tried to debug from STS I am getting `Failed to connect to remote VM. Connection refused. Connection refused: connect` error message. \r\nI tried debugging my local server from outside PC in same network and got success. So I am thinking my STS or PC has some issue on accessing the port.\r\nWhat I noticed is at the time I start Weblogic I can get `TcpTestSucceeded : True` to the debug port using PowerShell `Test-NetConnection -ComputerName &lt;IP&gt; -Port &lt;port&gt;` command. But once I debug Remote Application using STS I will get `TcpTestSucceeded : False` for above command in PowerShell. Can help me to get understand why STS debug disable the port?","title":"Spring Tool Suite Remote Debug will disable the TCP to the port","body":"<p>I am trying to remote debug java application hosted in Weblogic 12c locally using Spring Tool Suite. But when I tried to debug from STS I am getting <code>Failed to connect to remote VM. Connection refused. Connection refused: connect</code> error message.\nI tried debugging my local server from outside PC in same network and got success. So I am thinking my STS or PC has some issue on accessing the port.\nWhat I noticed is at the time I start Weblogic I can get <code>TcpTestSucceeded : True</code> to the debug port using PowerShell <code>Test-NetConnection -ComputerName &lt;IP&gt; -Port &lt;port&gt;</code> command. But once I debug Remote Application using STS I will get <code>TcpTestSucceeded : False</code> for above command in PowerShell. Can help me to get understand why STS debug disable the port?</p>\n"},{"tags":["java","maven","spring-tool-suite"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1692976342,"post_id":76978358,"comment_id":135702903,"body_markdown":"See https://bugs.eclipse.org/bugs/show_bug.cgi?id=582041","body":"See <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=582041\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=582041</a>"}],"owner":{"account_id":29146482,"reputation":1,"user_id":22328291,"display_name":"Niranjan Verma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694514537,"creation_date":1692975623,"question_id":76978358,"body_markdown":"While updating my Maven project on Spring STS 4.4.19 I am getting this error:\r\n\r\n![1]\r\n\r\n    An internal error occurred during: &quot;Updating Maven Project&quot;.\r\n    Version 8 of project facet java does not exist.\r\n\r\nI am using Java 11.  I want to fix this error.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GTcYl.png","title":"An internal error occurred during: &quot;Updating Maven Project&quot;. Version 8 of project facet java does not exist","body":"<p>While updating my Maven project on Spring STS 4.4.19 I am getting this error:</p>\n<p><img src=\"https://i.stack.imgur.com/GTcYl.png\" alt=\"1\" /></p>\n<pre><code>An internal error occurred during: &quot;Updating Maven Project&quot;.\nVersion 8 of project facet java does not exist.\n</code></pre>\n<p>I am using Java 11.  I want to fix this error.</p>\n"},{"tags":["java","testing","junit","junit5"],"comments":[{"owner":{"account_id":13715480,"reputation":377,"user_id":9896706,"display_name":"Remco Buddelmeijer"},"score":0,"creation_date":1570102144,"post_id":58218168,"comment_id":102812300,"body_markdown":"Possible duplicate of [Changing names of parameterized tests](https://stackoverflow.com/questions/650894/changing-names-of-parameterized-tests)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/650894/changing-names-of-parameterized-tests\">Changing names of parameterized tests</a>"},{"owner":{"account_id":13715480,"reputation":377,"user_id":9896706,"display_name":"Remco Buddelmeijer"},"score":0,"creation_date":1570102184,"post_id":58218168,"comment_id":102812321,"body_markdown":"If you are using JUnit 4, please take a look at the duplicate post, otherwise if you are using JUnit 5 take a look at: https://www.baeldung.com/parameterized-tests-junit-5","body":"If you are using JUnit 4, please take a look at the duplicate post, otherwise if you are using JUnit 5 take a look at: <a href=\"https://www.baeldung.com/parameterized-tests-junit-5\" rel=\"nofollow noreferrer\">baeldung.com/parameterized-tests-junit-5</a>"},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1570116281,"post_id":58218168,"comment_id":102820096,"body_markdown":"@MedAmine, What version of JUnit you&#39;re using? Where do you want your parameters to come from?","body":"@MedAmine, What version of JUnit you&#39;re using? Where do you want your parameters to come from?"}],"answers":[{"tags":[],"owner":{"account_id":15632436,"reputation":58,"user_id":11278368,"display_name":"QuestionOverflow"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1570104983,"creation_date":1570104983,"answer_id":58218935,"question_id":58218168,"body_markdown":"You can create a Java method that runs the code, if not in your JUnit test case then in the Java file you import. Then for each of the tests you want, you just call it repeatedly with different input arguments and different parameters. See the links you&#39;ve been given: https://www.baeldung.com/parameterized-tests-junit-5","title":"Run one junit test multiple times with different parameters","body":"<p>You can create a Java method that runs the code, if not in your JUnit test case then in the Java file you import. Then for each of the tests you want, you just call it repeatedly with different input arguments and different parameters. See the links you've been given: <a href=\"https://www.baeldung.com/parameterized-tests-junit-5\" rel=\"nofollow noreferrer\">https://www.baeldung.com/parameterized-tests-junit-5</a></p>\n"}],"owner":{"account_id":16817438,"reputation":33,"user_id":12158867,"display_name":"Med Amine"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4058,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58218935,"answer_count":1,"score":0,"last_activity_date":1694514426,"creation_date":1570101944,"question_id":58218168,"body_markdown":"How can I run a test multiple times with different parameters and have them displayed as separate tests (with different names) in the Junit report?","title":"Run one junit test multiple times with different parameters","body":"<p>How can I run a test multiple times with different parameters and have them displayed as separate tests (with different names) in the Junit report?</p>\n"},{"tags":["java","eclipse","spring-tool-suite","java-17"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1694499636,"post_id":77086493,"comment_id":135894892,"body_markdown":"Try to run eclipse from the command line, and see if you get additional info . Also this seems related : https://stackoverflow.com/questions/30594269/eclipse-exits-automatically-exit-code-127","body":"Try to run eclipse from the command line, and see if you get additional info . Also this seems related : <a href=\"https://stackoverflow.com/questions/30594269/eclipse-exits-automatically-exit-code-127\" title=\"eclipse exits automatically exit code 127\">stackoverflow.com/questions/30594269/&hellip;</a>"},{"owner":{"account_id":6751113,"reputation":13,"user_id":5201078,"display_name":"Tejas Shah"},"score":0,"creation_date":1694501416,"post_id":77086493,"comment_id":135895163,"body_markdown":"@Arnaud not working this solution for me. Its eclipse close automatically issue. In my case i am starting fresh sts","body":"@Arnaud not working this solution for me. Its eclipse close automatically issue. In my case i am starting fresh sts"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1694503960,"post_id":77086493,"comment_id":135895616,"body_markdown":"The Java VM crashed. Why you run STS with Java installed on your system (`/opt/jdk-17.0.5/bin/java`) instead of the Java included in STS? How did you install STS (there are different ways)? What does `/opt/jdk-17.0.5/bin/java -version` print? Which GTK version do you have?","body":"The Java VM crashed. Why you run STS with Java installed on your system (<code>&#47;opt&#47;jdk-17.0.5&#47;bin&#47;java</code>) instead of the Java included in STS? How did you install STS (there are different ways)? What does <code>&#47;opt&#47;jdk-17.0.5&#47;bin&#47;java -version</code> print? Which GTK version do you have?"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1694517671,"post_id":77086493,"comment_id":135898360,"body_markdown":"Don&#39;t use images for text information.","body":"Don&#39;t use images for text information."}],"owner":{"account_id":6751113,"reputation":13,"user_id":5201078,"display_name":"Tejas Shah"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694514395,"creation_date":1694499324,"question_id":77086493,"body_markdown":"I updated CentOS 7 with jdk-17.0.5 and for java 17 support I also downloaded latest sts-4.19.1. When I open STS, it shows the error in the  screenshot below.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/eVGwI.png)](https://i.stack.imgur.com/eVGwI.png)\r\n\r\nThe latest version of STS should run on CentOS 7 with Java 17.\r\n","title":"JVM terminated. Exit code=127","body":"<p>I updated CentOS 7 with jdk-17.0.5 and for java 17 support I also downloaded latest sts-4.19.1. When I open STS, it shows the error in the  screenshot below.</p>\n<p><a href=\"https://i.stack.imgur.com/eVGwI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eVGwI.png\" alt=\"enter image description here\" /></a></p>\n<p>The latest version of STS should run on CentOS 7 with Java 17.</p>\n"},{"tags":["java","classpath"],"comments":[{"owner":{"account_id":8633322,"reputation":218443,"user_id":6464308,"display_name":"Laurenz Albe"},"score":2,"creation_date":1694501511,"post_id":77086624,"comment_id":135895168,"body_markdown":"Put both the JDBC driver JAR and the directory what contains `Main.class` on your class path, separated by a colon (`:`).","body":"Put both the JDBC driver JAR and the directory what contains <code>Main.class</code> on your class path, separated by a colon (<code>:</code>)."}],"answers":[{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1694514234,"post_id":77087892,"comment_id":135897638,"body_markdown":"Addendum: For Windows, the separator is `;` instead of `:`","body":"Addendum: For Windows, the separator is <code>;</code> instead of <code>:</code>"}],"tags":[],"owner":{"account_id":28999910,"reputation":1011,"user_id":22213656,"display_name":"Maimoona Abid"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694514210,"creation_date":1694511496,"answer_id":77087892,"question_id":77086624,"body_markdown":"To specify the classpath, including the current directory (.) and the location of the PostgreSQL JDBC driver JAR file, use the -cp option with the java command. Execute the command as follows:\r\n\r\n    java -cp .:postgresql-42.6.0.jar Main\r\n\r\n\r\n","title":"Could not find or load main class Main using java -cp","body":"<p>To specify the classpath, including the current directory (.) and the location of the PostgreSQL JDBC driver JAR file, use the -cp option with the java command. Execute the command as follows:</p>\n<pre><code>java -cp .:postgresql-42.6.0.jar Main\n</code></pre>\n"}],"owner":{"account_id":22649518,"reputation":13,"user_id":16824403,"display_name":"Ubuntu Learner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1694514198,"accepted_answer_id":77087892,"answer_count":1,"score":0,"last_activity_date":1694514294,"creation_date":1694500933,"question_id":77086624,"body_markdown":"I have a simple Java program\r\n```\r\nimport java.sql.*;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n\r\n        String SQL_SELECT = &quot;select * from accesspoint&quot;;\r\n        try {\r\n            Connection conn = DriverManager.getConnection(\r\n                    &quot;jdbc:postgresql://192.168.1.2:19000/database&quot;,\r\n                    &quot;user&quot;,\r\n                    &quot;pass&quot;);\r\n            PreparedStatement preparedStatement = conn.prepareStatement(SQL_SELECT);\r\n            ResultSet resultSet = preparedStatement.executeQuery();\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n    }\r\n}\r\n```\r\nand I build it using ```javac Main.java```.\r\nWhen I try to run it with ```java Main``` I get an obvious exception \r\n```\r\nException in thread &quot;main&quot; java.lang.RuntimeException: \r\njava.sql.SQLException: No suitable driver found for \r\njdbc:postgresql://192.168.1.2:19000/database\r\n```\r\nThe question is how to fix it? I have postgresql-42.6.0.jar in the same directory, so I tried using java -cp but got an error:\r\n```\r\n$ java -cp &quot;/home/mst/test_conn/postgresql-42.6.0.jar&quot; Main\r\nError: Could not find or load main class Main\r\n```\r\nAlso, I tried to set up the CLASSPATH variable and got the same error as above.\r\nWhat am I doing wrong?","title":"Could not find or load main class Main using java -cp","body":"<p>I have a simple Java program</p>\n<pre><code>import java.sql.*;\n\npublic class Main {\n    public static void main(String[] args) {\n\n        String SQL_SELECT = &quot;select * from accesspoint&quot;;\n        try {\n            Connection conn = DriverManager.getConnection(\n                    &quot;jdbc:postgresql://192.168.1.2:19000/database&quot;,\n                    &quot;user&quot;,\n                    &quot;pass&quot;);\n            PreparedStatement preparedStatement = conn.prepareStatement(SQL_SELECT);\n            ResultSet resultSet = preparedStatement.executeQuery();\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n\n    }\n}\n</code></pre>\n<p>and I build it using <code>javac Main.java</code>.\nWhen I try to run it with <code>java Main</code> I get an obvious exception</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: \njava.sql.SQLException: No suitable driver found for \njdbc:postgresql://192.168.1.2:19000/database\n</code></pre>\n<p>The question is how to fix it? I have postgresql-42.6.0.jar in the same directory, so I tried using java -cp but got an error:</p>\n<pre><code>$ java -cp &quot;/home/mst/test_conn/postgresql-42.6.0.jar&quot; Main\nError: Could not find or load main class Main\n</code></pre>\n<p>Also, I tried to set up the CLASSPATH variable and got the same error as above.\nWhat am I doing wrong?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":185558,"reputation":7305,"user_id":422353,"display_name":"madth3"},"score":1,"creation_date":1360717675,"post_id":14844793,"comment_id":20804098,"body_markdown":"A `char` is a primitive. `null` is reserved for unasigned references.","body":"A <code>char</code> is a primitive. <code>null</code> is reserved for unasigned references."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":3,"creation_date":1360717758,"post_id":14844793,"comment_id":20804121,"body_markdown":"Is `s` String? If so `s.charAt` will return primitive type `char`, not object `Character` so it can&#39;t be null. Default values of `char` array are `&#39;\\u0000&#39;` or simpler `&#39;\\0&#39;`. You could even use `s.charAt(j) == 0`","body":"Is <code>s</code> String? If so <code>s.charAt</code> will return primitive type <code>char</code>, not object <code>Character</code> so it can&#39;t be null. Default values of <code>char</code> array are <code>&#39;\\u0000&#39;</code> or simpler <code>&#39;\\0&#39;</code>. You could even use <code>s.charAt(j) == 0</code>"},{"owner":{"account_id":185558,"reputation":7305,"user_id":422353,"display_name":"madth3"},"score":0,"creation_date":1360717904,"post_id":14844793,"comment_id":20804157,"body_markdown":"Are you trying to check for the end of the String as in C?","body":"Are you trying to check for the end of the String as in C?"}],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1360718675,"creation_date":1360717752,"answer_id":14844836,"question_id":14844793,"body_markdown":"Check that the `String` `s` is not `null` before doing any character checks. The characters returned by `String#charAt` are primitive `char` types and will never be `null`:\r\n\r\n    if (s != null) {\r\n      ...\r\n\r\nIf you&#39;re trying to process characters from `String` one at a time, you can use:\r\n\r\n    for (char c: s.toCharArray()) {\r\n       // do stuff with char c\t\r\n    }\r\n\r\n(Unlike `C`, `NULL` terminator checking is not done in Java.)","title":"How do I compare a character to check if it is null?","body":"<p>Check that the <code>String</code> <code>s</code> is not <code>null</code> before doing any character checks. The characters returned by <code>String#charAt</code> are primitive <code>char</code> types and will never be <code>null</code>:</p>\n\n<pre><code>if (s != null) {\n  ...\n</code></pre>\n\n<p>If you're trying to process characters from <code>String</code> one at a time, you can use:</p>\n\n<pre><code>for (char c: s.toCharArray()) {\n   // do stuff with char c  \n}\n</code></pre>\n\n<p>(Unlike <code>C</code>, <code>NULL</code> terminator checking is not done in Java.)</p>\n"},{"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1436707900,"post_id":31368262,"comment_id":50716069,"body_markdown":"Besides that the question is 2.5 yrs old, I find it *highly* unlikely that they&#39;re looking for a space.","body":"Besides that the question is 2.5 yrs old, I find it <i>highly</i> unlikely that they&#39;re looking for a space."}],"tags":[],"owner":{"account_id":6614087,"reputation":9,"user_id":5108026,"display_name":"Harpreet"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1436708840,"creation_date":1436707622,"answer_id":31368262,"question_id":14844793,"body_markdown":"If `s` is a string and is not null, then you must be trying to compare &quot;space&quot; with char. You think &quot;space&quot; is not a character and space is just `null`, but truth is that space is a character. Therefore instead of `null`, use ` ` (which is a space) to compare to character.","title":"How do I compare a character to check if it is null?","body":"<p>If <code>s</code> is a string and is not null, then you must be trying to compare \"space\" with char. You think \"space\" is not a character and space is just <code>null</code>, but truth is that space is a character. Therefore instead of <code>null</code>, use <code></code> (which is a space) to compare to character.</p>\n"},{"tags":[],"owner":{"account_id":1890047,"reputation":2191,"user_id":1708390,"accept_rate":79,"display_name":"Bugs Happen"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1444417013,"creation_date":1444417013,"answer_id":33045336,"question_id":14844793,"body_markdown":"Correct way of checking `char` is actually described [here](https://stackoverflow.com/a/21502884/1708390).\r\n\r\nIt states:\r\n\r\n&gt;Change it to: `if(position[i][j] == 0)`\r\nEach `char` can be compared with an `int`.\r\nThe default value is `&#39;\\u0000&#39;` i.e. 0 for a `char` array element.\r\nAnd that&#39;s exactly what you meant by empty cell, I assume. ","title":"How do I compare a character to check if it is null?","body":"<p>Correct way of checking <code>char</code> is actually described <a href=\"https://stackoverflow.com/a/21502884/1708390\">here</a>.</p>\n\n<p>It states:</p>\n\n<blockquote>\n  <p>Change it to: <code>if(position[i][j] == 0)</code>\n  Each <code>char</code> can be compared with an <code>int</code>.\n  The default value is <code>'\\u0000'</code> i.e. 0 for a <code>char</code> array element.\n  And that's exactly what you meant by empty cell, I assume. </p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":6014409,"reputation":15634,"user_id":4723795,"accept_rate":82,"display_name":"xenteros"},"score":1,"creation_date":1506671158,"post_id":39391055,"comment_id":79922529,"body_markdown":"`char` cannot be null because it&#39;s not a reference type. It&#39;s a primitive.","body":"<code>char</code> cannot be null because it&#39;s not a reference type. It&#39;s a primitive."}],"tags":[],"owner":{"account_id":7398732,"reputation":157,"user_id":5629830,"display_name":"Rashmi singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1473338518,"creation_date":1473338031,"answer_id":39391055,"question_id":14844793,"body_markdown":"Default value to char primitives is 0 , as its ascii value. \r\nyou can check char if it is null. for eg:\r\n\r\n    char ch[] = new char[20]; //here the whole array will be initialized with &#39;\\u0000&#39; i.e. 0\r\n\t\tif((int)ch[0]==0){\r\n\t\t\tSystem.out.println(&quot;char is null&quot;);\r\n\t\t}\r\n\r\n","title":"How do I compare a character to check if it is null?","body":"<p>Default value to char primitives is 0 , as its ascii value. \nyou can check char if it is null. for eg:</p>\n\n<pre><code>char ch[] = new char[20]; //here the whole array will be initialized with '\\u0000' i.e. 0\n    if((int)ch[0]==0){\n        System.out.println(\"char is null\");\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16794791,"reputation":91,"user_id":12141464,"display_name":"Mayank Soni"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1597921952,"creation_date":1597832084,"answer_id":63484807,"question_id":14844793,"body_markdown":"You can use the null character (`&#39;\\0&#39;`):\r\n\r\n    while((s.charAt(j)==&#39;\\0&#39;)","title":"How do I compare a character to check if it is null?","body":"<p>You can use the null character (<code>'\\0'</code>):</p>\n<pre><code>while((s.charAt(j)=='\\0')\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2472572,"reputation":196,"user_id":2154038,"display_name":"tapavko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649095655,"creation_date":1649095655,"answer_id":71741861,"question_id":14844793,"body_markdown":"I actually came here from reading a book &quot;Java: A Beginner&#39;s Guide&quot; because they used this solution to compare char to null:\r\n\r\n    (char) 0\r\n\r\nBecause in ASCII table, null is at the position of 0 in decimal.\r\n\r\nSo, solution to OP&#39;s problem would be:\r\n\r\n    while((s.charAt(j) == (char) 0)\r\n\r\nI also tried out the already offered solution of:\r\n\r\n    while((s.charAt(j)==&#39;\\0&#39;)\r\n\r\nAnd it also worked. \r\n\r\nBut just wanted to add this one too, since no one mentioned it.","title":"How do I compare a character to check if it is null?","body":"<p>I actually came here from reading a book &quot;Java: A Beginner's Guide&quot; because they used this solution to compare char to null:</p>\n<pre><code>(char) 0\n</code></pre>\n<p>Because in ASCII table, null is at the position of 0 in decimal.</p>\n<p>So, solution to OP's problem would be:</p>\n<pre><code>while((s.charAt(j) == (char) 0)\n</code></pre>\n<p>I also tried out the already offered solution of:</p>\n<pre><code>while((s.charAt(j)=='\\0')\n</code></pre>\n<p>And it also worked.</p>\n<p>But just wanted to add this one too, since no one mentioned it.</p>\n"},{"tags":[],"owner":{"account_id":27669870,"reputation":1,"user_id":22208854,"display_name":"Евклид Анатольевич"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694514276,"creation_date":1694514276,"answer_id":77088244,"question_id":14844793,"body_markdown":"You can compare with default char value    \r\n\r\n    while((s.charAt(j) != &#39;\\u0000&#39;) ","title":"How do I compare a character to check if it is null?","body":"<p>You can compare with default char value</p>\n<pre><code>while((s.charAt(j) != '\\u0000') \n</code></pre>\n"}],"owner":{"account_id":2354155,"reputation":1423,"user_id":2062360,"accept_rate":57,"display_name":"user2062360"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93514,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":14844836,"answer_count":7,"score":10,"last_activity_date":1694514276,"creation_date":1360717519,"question_id":14844793,"body_markdown":"I tried the below, but Eclipse throws an error for this.\r\n\r\n    while((s.charAt(j)== null)\r\n\r\nWhat&#39;s the correct way of checking whether a character is `null`?","title":"How do I compare a character to check if it is null?","body":"<p>I tried the below, but Eclipse throws an error for this.</p>\n\n<pre><code>while((s.charAt(j)== null)\n</code></pre>\n\n<p>What's the correct way of checking whether a character is <code>null</code>?</p>\n"},{"tags":["java","swing","colors","jtable","tablecellrenderer"],"comments":[{"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"score":0,"creation_date":1694502340,"post_id":77086666,"comment_id":135895308,"body_markdown":"I would suggest to tag your question additionally with `swing` and `java` to help attract more attention.","body":"I would suggest to tag your question additionally with <code>swing</code> and <code>java</code> to help attract more attention."},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1694505103,"post_id":77086666,"comment_id":135895816,"body_markdown":"Implement  a TableCellRenderer. There&#39;s lots of examples if you search the web.","body":"Implement  a TableCellRenderer. There&#39;s lots of examples if you search the web."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1694527807,"post_id":77086666,"comment_id":135900840,"body_markdown":"See: https://stackoverflow.com/a/72237036/131872 for an approach that allows you to split the text into multiple components. Each components can have a different color.","body":"See: <a href=\"https://stackoverflow.com/a/72237036/131872\">stackoverflow.com/a/72237036/131872</a> for an approach that allows you to split the text into multiple components. Each components can have a different color."}],"answers":[{"tags":[],"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694511090,"creation_date":1694511090,"answer_id":77087833,"question_id":77086666,"body_markdown":"A [TableCellRenderer](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/table/TableCellRenderer.html) may return any AWT [Component](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Component.html), so you could subclass [JComponent](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JComponent.html) and overwrite [paintComponent](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JComponent.html#paintComponent(java.awt.Graphics)) to tokenize your text and paint each token in an appropriate color. And indeed, this might be the most efficient way to solve your problem.\r\n\r\nA less involved solution would be leveraging [JLabel](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JLabel.html)&#39;s support for rendering HTML-formatted text. Again, the idea would be tokenizing your text and coloring the tokens as appropriate. E.g.\r\n```\r\nclass MarkupRenderer implements TableCellRenderer {\r\n  private final DefaultTableCellRenderer dtcr;\r\n  private final Pattern digits;\r\n\r\n  MarkupRenderer() {\r\n    dtcr = new DefaultTableCellRenderer();\r\n    digits = Pattern.compile(&quot;\\\\d+&quot;);\r\n  }\r\n\r\n  @Override\r\n  public Component getTableCellRendererComponent(\r\n    JTable table,\r\n    Object value,\r\n    boolean isSelected,\r\n    boolean hasFocus,\r\n    int row,\r\n    int column\r\n  ) {\r\n    return dtcr.getTableCellRendererComponent(\r\n      table, format((String)value), isSelected, hasFocus, row, column);\r\n  }\r\n\r\n  private String format( String s ) {\r\n    final StringBuilder sb = new StringBuilder();\r\n    sb.append(&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&quot;);\r\n\r\n    int lastIdx = 0;\r\n    final Matcher m = digits.matcher(s);\r\n    while (m.find()) {\r\n      final int idx1 = m.start();\r\n      final int idx2 = m.end();\r\n      sb.append(s, lastIdx, idx1);\r\n      sb.append(&quot;&lt;span style=\\&quot;color: #0000ff;\\&quot;&gt;&quot;);\r\n      sb.append(s, idx1, idx2);\r\n      sb.append(&quot;&lt;/span&gt;&quot;);\r\n\r\n      lastIdx = idx2;\r\n    }\r\n    if (lastIdx &lt; s.length()) {\r\n      sb.append(s.substring(lastIdx));\r\n    }\r\n\r\n    sb.append(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);\r\n    return sb.toString();\r\n  }\r\n}\r\n\r\n```\r\nThe above assumes that your numbers are always non-negative integral numbers. If you need to support negative numbers or decimal numbers as well, you need to adjust the tokenizing logic in `format` accordingly.","title":"TablecellRenderer setForeground only on certain characters in cell","body":"<p>A <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/table/TableCellRenderer.html\" rel=\"nofollow noreferrer\">TableCellRenderer</a> may return any AWT <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Component.html\" rel=\"nofollow noreferrer\">Component</a>, so you could subclass <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JComponent.html\" rel=\"nofollow noreferrer\">JComponent</a> and overwrite <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JComponent.html#paintComponent(java.awt.Graphics)\" rel=\"nofollow noreferrer\">paintComponent</a> to tokenize your text and paint each token in an appropriate color. And indeed, this might be the most efficient way to solve your problem.</p>\n<p>A less involved solution would be leveraging <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JLabel.html\" rel=\"nofollow noreferrer\">JLabel</a>'s support for rendering HTML-formatted text. Again, the idea would be tokenizing your text and coloring the tokens as appropriate. E.g.</p>\n<pre><code>class MarkupRenderer implements TableCellRenderer {\n  private final DefaultTableCellRenderer dtcr;\n  private final Pattern digits;\n\n  MarkupRenderer() {\n    dtcr = new DefaultTableCellRenderer();\n    digits = Pattern.compile(&quot;\\\\d+&quot;);\n  }\n\n  @Override\n  public Component getTableCellRendererComponent(\n    JTable table,\n    Object value,\n    boolean isSelected,\n    boolean hasFocus,\n    int row,\n    int column\n  ) {\n    return dtcr.getTableCellRendererComponent(\n      table, format((String)value), isSelected, hasFocus, row, column);\n  }\n\n  private String format( String s ) {\n    final StringBuilder sb = new StringBuilder();\n    sb.append(&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&quot;);\n\n    int lastIdx = 0;\n    final Matcher m = digits.matcher(s);\n    while (m.find()) {\n      final int idx1 = m.start();\n      final int idx2 = m.end();\n      sb.append(s, lastIdx, idx1);\n      sb.append(&quot;&lt;span style=\\&quot;color: #0000ff;\\&quot;&gt;&quot;);\n      sb.append(s, idx1, idx2);\n      sb.append(&quot;&lt;/span&gt;&quot;);\n\n      lastIdx = idx2;\n    }\n    if (lastIdx &lt; s.length()) {\n      sb.append(s.substring(lastIdx));\n    }\n\n    sb.append(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);\n    return sb.toString();\n  }\n}\n\n</code></pre>\n<p>The above assumes that your numbers are always non-negative integral numbers. If you need to support negative numbers or decimal numbers as well, you need to adjust the tokenizing logic in <code>format</code> accordingly.</p>\n"}],"owner":{"account_id":23976641,"reputation":3,"user_id":17964652,"display_name":"charly"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77087833,"answer_count":1,"score":0,"last_activity_date":1694514144,"creation_date":1694501443,"question_id":77086666,"body_markdown":"I&#39;m trying to create a JTable where in one column certain characters have a different color than the rest.\r\n\r\nText1test\r\n\r\nText2test\r\n\r\nText4test\r\n\r\nIn this example, I want the numbers to be blue, the rest black (the lines represent the cells of the column). Is this possible? I only found answers how to color the complete text of a cell with TableCellRenderer.\r\n","title":"TablecellRenderer setForeground only on certain characters in cell","body":"<p>I'm trying to create a JTable where in one column certain characters have a different color than the rest.</p>\n<p>Text1test</p>\n<p>Text2test</p>\n<p>Text4test</p>\n<p>In this example, I want the numbers to be blue, the rest black (the lines represent the cells of the column). Is this possible? I only found answers how to color the complete text of a cell with TableCellRenderer.</p>\n"},{"tags":["java","json","spring-boot","jackson"],"comments":[{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1694458945,"post_id":77084076,"comment_id":135891010,"body_markdown":"Can you link to a repo with a minimal reproducible example?","body":"Can you link to a repo with a minimal reproducible example?"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1694497004,"post_id":77084076,"comment_id":135894576,"body_markdown":"I created a branch. Removed all the other classes and left the one trouble entity (relationships removed) and the controller as shown above and it works. The trouble I think is on the entity properties that have relationships....will update when I know more","body":"I created a branch. Removed all the other classes and left the one trouble entity (relationships removed) and the controller as shown above and it works. The trouble I think is on the entity properties that have relationships....will update when I know more"},{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1694505554,"post_id":77084076,"comment_id":135895901,"body_markdown":"You didn&#39;t post a link to your repository.","body":"You didn&#39;t post a link to your repository."},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1694509006,"post_id":77084076,"comment_id":135896502,"body_markdown":"Very similar to https://stackoverflow.com/questions/75069899/content-type-application-jsoncharset-utf-8-is-not-supported-springboot-rest","body":"Very similar to <a href=\"https://stackoverflow.com/questions/75069899/content-type-application-jsoncharset-utf-8-is-not-supported-springboot-rest\" title=\"content type application jsoncharset utf 8 is not supported springboot rest\">stackoverflow.com/questions/75069899/&hellip;</a>"},{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1694511501,"post_id":77084076,"comment_id":135897051,"body_markdown":"I&#39;ll try to analyze it tonight, I suspect that the error message is misleading.","body":"I&#39;ll try to analyze it tonight, I suspect that the error message is misleading."},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1694511958,"post_id":77084076,"comment_id":135897158,"body_markdown":"I fixed it. Will post solution later but it is all to do the `JsonManagedReference` and `JsonBackReference`","body":"I fixed it. Will post solution later but it is all to do the <code>JsonManagedReference</code> and <code>JsonBackReference</code>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694513445,"post_id":77084076,"comment_id":135897474,"body_markdown":"Remove the `produces` and `consumes` as it doesn&#39;t do what you think it does. It is used for mapping and `application/json` != `application/json;charset=UTF8` hence it will not call this method as the content types don&#39;t match. Another, unrelated thing, don&#39;t use `@Data` and `@ToString` for entities as it will generate the wrong `equals`/`hashCode` and `toString` for use with JPA. (See https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/ for more info).","body":"Remove the <code>produces</code> and <code>consumes</code> as it doesn&#39;t do what you think it does. It is used for mapping and <code>application&#47;json</code> != <code>application&#47;json;charset=UTF8</code> hence it will not call this method as the content types don&#39;t match. Another, unrelated thing, don&#39;t use <code>@Data</code> and <code>@ToString</code> for entities as it will generate the wrong <code>equals</code>/<code>hashCode</code> and <code>toString</code> for use with JPA. (See <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities</a> for more info)."},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1694514451,"post_id":77084076,"comment_id":135897686,"body_markdown":"@M.Deinum excellent post on your site - and nice tip on `@Data` and `ToString` - thank you.","body":"@M.Deinum excellent post on your site - and nice tip on <code>@Data</code> and <code>ToString</code> - thank you."}],"answers":[{"comments":[{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1694458493,"post_id":77084112,"comment_id":135890925,"body_markdown":"tried both `MediaType.APPLICATION_JSON_VALUE` and `MediaType.APPLICATION_JSON` - same errors and tried without","body":"tried both <code>MediaType.APPLICATION_JSON_VALUE</code> and <code>MediaType.APPLICATION_JSON</code> - same errors and tried without"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694458899,"post_id":77084112,"comment_id":135891004,"body_markdown":"I just did an update to answer","body":"I just did an update to answer"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694458966,"post_id":77084112,"comment_id":135891015,"body_markdown":"First of all try with curl without it, to see if it work great","body":"First of all try with curl without it, to see if it work great"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1694459285,"post_id":77084112,"comment_id":135891078,"body_markdown":"Never tried with `charset=UTF-8` - that the controller works with a different entity makes me suspicious of entity class","body":"Never tried with <code>charset=UTF-8</code> - that the controller works with a different entity makes me suspicious of entity class"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694500745,"post_id":77084112,"comment_id":135895058,"body_markdown":"i see it on example of curl request on point 6 of `Steps Taken So Far`","body":"i see it on example of curl request on point 6 of <code>Steps Taken So Far</code>"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694500908,"post_id":77084112,"comment_id":135895084,"body_markdown":"i just updated answer, you have in entity 2 fields with the same mapped name in database, can you change one and set another name ?","body":"i just updated answer, you have in entity 2 fields with the same mapped name in database, can you change one and set another name ?"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1694501919,"post_id":77084112,"comment_id":135895226,"body_markdown":"Its to do with HealthCheck class - the error is reproduceable if I try a POST on the HealthCheck controller.","body":"Its to do with HealthCheck class - the error is reproduceable if I try a POST on the HealthCheck controller."}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694500874,"creation_date":1694458161,"answer_id":77084112,"question_id":77084076,"body_markdown":"Remove all `MediaType.APPLICATION_JSON_VALUE` because it is a A String equivalent of `APPLICATION_JSON`, according to [documentation][1] or if you dont want to remove it just replace it to `MediaType.APPLICATION_JSON`. Why so ? because i can see in postman you do request to controller with json object not json as string\r\n\r\n\r\nAnd also be sure that you dont do request with `Content-Type &#39;application/json;charset=UTF-8` just do it without `utf-8`\r\n\r\n\r\nAlso update i see that you also have in one entity `mappedBy = &quot;bird&quot;` two time on different fields, can you change one with another name something like `mappedBy = &quot;secondBird&quot;`\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/MediaType.html","title":"Type Error Application/JSON in Spring Boot 3.1 controller","body":"<p>Remove all <code>MediaType.APPLICATION_JSON_VALUE</code> because it is a A String equivalent of <code>APPLICATION_JSON</code>, according to <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/MediaType.html\" rel=\"nofollow noreferrer\">documentation</a> or if you dont want to remove it just replace it to <code>MediaType.APPLICATION_JSON</code>. Why so ? because i can see in postman you do request to controller with json object not json as string</p>\n<p>And also be sure that you dont do request with <code>Content-Type 'application/json;charset=UTF-8</code> just do it without <code>utf-8</code></p>\n<p>Also update i see that you also have in one entity <code>mappedBy = &quot;bird&quot;</code> two time on different fields, can you change one with another name something like <code>mappedBy = &quot;secondBird&quot;</code></p>\n"},{"comments":[{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1694510388,"post_id":77087709,"comment_id":135896800,"body_markdown":"It does, it has the  `@NoArgsConstructor`  annotation.","body":"It does, it has the  <code>@NoArgsConstructor</code>  annotation."},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1694510708,"post_id":77087709,"comment_id":135896870,"body_markdown":"Yes, I see it now. Well, I don&#39;t like lombok (personal bias), may be try to remove the annotation and add it manually. I would try on a side to try to deserialize the JSON into a class using ObjectMapper, to rule the problem out","body":"Yes, I see it now. Well, I don&#39;t like lombok (personal bias), may be try to remove the annotation and add it manually. I would try on a side to try to deserialize the JSON into a class using ObjectMapper, to rule the problem out"}],"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694510296,"creation_date":1694510296,"answer_id":77087709,"question_id":77084076,"body_markdown":"Your `Bird` class doesn&#39;t have default constructor without parameters. I think Sprig has trouble deserializing your JSON to `Bird` class because of it. It is a guess, but worth trying. Add \r\n\r\n    public Bird() {\r\n    }\r\nTo your class `Bird` or just remove your constructor \r\n\r\n        public Bird(String name) {\r\n        this.name = name;\r\n    }","title":"Type Error Application/JSON in Spring Boot 3.1 controller","body":"<p>Your <code>Bird</code> class doesn't have default constructor without parameters. I think Sprig has trouble deserializing your JSON to <code>Bird</code> class because of it. It is a guess, but worth trying. Add</p>\n<pre><code>public Bird() {\n}\n</code></pre>\n<p>To your class <code>Bird</code> or just remove your constructor</p>\n<pre><code>    public Bird(String name) {\n    this.name = name;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694514130,"creation_date":1694514130,"answer_id":77088230,"question_id":77084076,"body_markdown":"The answer in this case was to do with related/nested entities and the annotations on them for serialization/deserialization (Jackson).\r\n\r\nOn the bird class there was:\r\n\r\n    @JsonBackReference\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\r\n    private List&lt;ChickTimer&gt; listChickTimer = new ArrayList&lt;&gt;();\r\n\r\n    @JsonBackReference\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\r\n    private List&lt;Otherclass&gt; listOtherclass = new ArrayList&lt;&gt;();\r\n\r\nIn order to fix two properties with @JsonBackReference I named them:\r\n\r\n    @JsonBackReference(value = &quot;bird-chicktimer&quot;)\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\r\n    private List&lt;ChickTimer&gt; listChickTimer = new ArrayList&lt;&gt;();\r\n\r\n    @JsonBackReference(value = &quot;bird-otherclass&quot;)\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\r\n    private List&lt;Otherclass&gt; listOtherclass = new ArrayList&lt;&gt;();\r\n\r\nI also had a `BackReference` on the Many side on one of the classes which I changed to `@JsonManagedReference`.\r\n\r\nThe `application/json` error message was a red herring.\r\n\r\n","title":"Type Error Application/JSON in Spring Boot 3.1 controller","body":"<p>The answer in this case was to do with related/nested entities and the annotations on them for serialization/deserialization (Jackson).</p>\n<p>On the bird class there was:</p>\n<pre><code>@JsonBackReference\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\nprivate List&lt;ChickTimer&gt; listChickTimer = new ArrayList&lt;&gt;();\n\n@JsonBackReference\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\nprivate List&lt;Otherclass&gt; listOtherclass = new ArrayList&lt;&gt;();\n</code></pre>\n<p>In order to fix two properties with @JsonBackReference I named them:</p>\n<pre><code>@JsonBackReference(value = &quot;bird-chicktimer&quot;)\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\nprivate List&lt;ChickTimer&gt; listChickTimer = new ArrayList&lt;&gt;();\n\n@JsonBackReference(value = &quot;bird-otherclass&quot;)\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\nprivate List&lt;Otherclass&gt; listOtherclass = new ArrayList&lt;&gt;();\n</code></pre>\n<p>I also had a <code>BackReference</code> on the Many side on one of the classes which I changed to <code>@JsonManagedReference</code>.</p>\n<p>The <code>application/json</code> error message was a red herring.</p>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":487,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1694514130,"creation_date":1694457596,"question_id":77084076,"body_markdown":"I am getting a type error on a POST controller when I try to send data to it. The error seems to be clear but the solution is escaping me:\r\n\r\n**Enviroment**\r\n\r\nSpring Boot 3.1\r\nJava 18\r\nMySQL8\r\n\r\n**Entity**\r\n\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @Entity\r\n    @SequenceGenerator(name = &quot;bird_seq&quot;, sequenceName = &quot;BIRD_SEQ&quot;, initialValue = 100, allocationSize = 50)\r\n    @Table(name = &quot;bird&quot;)\r\n    public class Bird {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = SEQUENCE, generator = &quot;bird_seq&quot;)\r\n    private Long id;\r\n    @Column(unique = true)\r\n    @NotEmpty\r\n    private String name;\r\n    @Enumerated(EnumType.STRING)\r\n    private Sex sex;\r\n\r\n    @OneToOne(optional = true)\r\n    @Fetch(FetchMode.JOIN)\r\n    @JoinColumn(name = &quot;current_transmitter_id&quot;, nullable = true)\r\n    private Transmitter currentTransmitter;\r\n\r\n    @JsonBackReference\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\r\n    private List&lt;ChickTimer&gt; listChickTimer = new ArrayList&lt;&gt;();\r\n\r\n    // other fields trimmed\r\n    \r\n    // single property constructor to support testing \r\n\r\n        public Bird(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n**Controller**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/birds&quot;)\r\n    @RequiredArgsConstructor\r\n    public class KiwiController {\r\n\r\n        @Autowired\r\n        private final BirdServiceImpl birdService;\r\n    \r\n        // tried with and without the consumes/produces\r\n        // also tried consumes = &quot;application/json&quot;\r\n        @PostMapping(value = &quot;/testpost/&quot;, consumes = (MediaType.APPLICATION_JSON_VALUE), produces = (MediaType.APPLICATION_JSON_VALUE) )\r\n        ResponseEntity&lt;Bird&gt; BirdCreate(@RequestBody Bird newBird) {\r\n        Bird bird = birdService.save(newBird);\r\n        return new ResponseEntity&lt;&gt;(bird, HttpStatus.CREATED);\r\n    }\r\n\r\n**Unsupported Media Type - Error**\r\n\r\n    {\r\n    &quot;timestamp&quot;: &quot;2023-09-11T18:29:23.830+00:00&quot;,\r\n    &quot;status&quot;: 415,\r\n    &quot;error&quot;: &quot;Unsupported Media Type&quot;,\r\n    &quot;trace&quot;: &quot;org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type &#39;application/json;charset=UTF-8&#39; is not supported\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:209)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:163)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:136)\\r\\n\\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\\r\\n\\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)\\r\\n\\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\\r\\n\\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\\r\\n\\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\\r\\n\\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\\r\\n\\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\\r\\n\\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\\r\\n\\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\\r\\n\\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\\r\\n\\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\\r\\n\\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)\\r\\n\\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\\r\\n\\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)\\r\\n&quot;,\r\n    &quot;message&quot;: &quot;Content-Type &#39;application/json;charset=UTF-8&#39; is not supported.&quot;,\r\n    &quot;path&quot;: &quot;/birds/testpost/&quot;\r\n}\r\n\r\n**Postman**\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**Steps Taken So Far**\r\n\r\n 1. I have another controller on same project working fine (it doesnt even specify media type)\r\n 2. Tried with `@PostMapping(value = &quot;/testpost/&quot;, consumes = (MediaType.APPLICATION_JSON_VALUE), produces = (MediaType.APPLICATION_JSON_VALUE) )` and `consumes = &quot;application/json&quot;`\r\n 3. Changed the controller to use another Class I have for Testing - it worked with the test Class\r\n 4. Tried to set a breakpoint on the controller on this line `Bird bird = birdService.save(newBird);` but it never gets reached\r\n 5. Tried manually addding &quot;Accept&quot;:&quot;application/json&quot; to postman instead of `*/*`\r\n\r\n 6. Tried curl : \r\n\r\n    curl -X POST http://localhost:8080/birds/testpost/ --header &quot;Content-Type:application/json&quot; -d &#39;{&quot;name&quot;:&quot;bob&quot;}&#39;\r\n    {&quot;timestamp&quot;:&quot;2023-09-11T09:58:02.903+00:00&quot;,&quot;status&quot;:415,&quot;error&quot;:&quot;Unsupported Media Type&quot;,&quot;trace&quot;:&quot;org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type &#39;application/json;charset=UTF-8&#39; is not supported\r\n\r\nThe controller that does work is as simple as:\r\n\r\n        @PostMapping(value = &quot;/&quot;)\r\n    ResponseEntity&lt;Pit&gt; newPIT(@RequestBody PitDto pitDto) {\r\n        Pit createdPit = pitMapper.toEntity(pitDto);\r\n         // some service layer stuff\r\n        Pit savedPit = pitService.savePIT(createdPit);\r\n        return ResponseEntity.ok().body(savedPit);\r\n    }\r\n\r\nI don&#39;t even set the application type in that controller (however it does use Dto).\r\n\r\nI am out of idea&#39;s but suspect something on the entity since the test entity works in that controller.\r\n\r\n**Update**\r\n\r\nAfter creating a new branch to create a Minimal, Reproducible Example the controller worked. So I changed back to master, last commit, and began to remove the properties. \r\n\r\nThe field causing a issue is `HealthCheck` - here is that class:\r\n\r\n    @NoArgsConstructor\r\n    @ToString\r\n    @Entity\r\n    @Data\r\n    @JsonIgnoreProperties({&quot;hibernateLazyInitalizer&quot;, &quot;handler&quot;})\r\n    @SequenceGenerator(name = &quot;health_check_seq&quot;, sequenceName = &quot;HEALTH_CHECK_SEQ&quot;, initialValue = 100, allocationSize = 50)\r\n    @Table(name = &quot;health_check&quot;)\r\n    public class HealthCheck {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = SEQUENCE, generator = &quot;health_check_seq&quot;)\r\n    private Long id;\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\r\n    @JoinColumn(name = &quot;bird_id&quot;)\r\n    private Bird bird;\r\n\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm&quot;)\r\n    private LocalDateTime catchDateTime;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/x17TF.png\r\n  [2]: https://i.stack.imgur.com/3R44t.png","title":"Type Error Application/JSON in Spring Boot 3.1 controller","body":"<p>I am getting a type error on a POST controller when I try to send data to it. The error seems to be clear but the solution is escaping me:</p>\n<p><strong>Enviroment</strong></p>\n<p>Spring Boot 3.1\nJava 18\nMySQL8</p>\n<p><strong>Entity</strong></p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\n@Entity\n@SequenceGenerator(name = &quot;bird_seq&quot;, sequenceName = &quot;BIRD_SEQ&quot;, initialValue = 100, allocationSize = 50)\n@Table(name = &quot;bird&quot;)\npublic class Bird {\n\n@Id\n@GeneratedValue(strategy = SEQUENCE, generator = &quot;bird_seq&quot;)\nprivate Long id;\n@Column(unique = true)\n@NotEmpty\nprivate String name;\n@Enumerated(EnumType.STRING)\nprivate Sex sex;\n\n@OneToOne(optional = true)\n@Fetch(FetchMode.JOIN)\n@JoinColumn(name = &quot;current_transmitter_id&quot;, nullable = true)\nprivate Transmitter currentTransmitter;\n\n@JsonBackReference\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\nprivate List&lt;ChickTimer&gt; listChickTimer = new ArrayList&lt;&gt;();\n\n// other fields trimmed\n\n// single property constructor to support testing \n\n    public Bird(String name) {\n    this.name = name;\n}\n</code></pre>\n<p><strong>Controller</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/birds&quot;)\n@RequiredArgsConstructor\npublic class KiwiController {\n\n    @Autowired\n    private final BirdServiceImpl birdService;\n\n    // tried with and without the consumes/produces\n    // also tried consumes = &quot;application/json&quot;\n    @PostMapping(value = &quot;/testpost/&quot;, consumes = (MediaType.APPLICATION_JSON_VALUE), produces = (MediaType.APPLICATION_JSON_VALUE) )\n    ResponseEntity&lt;Bird&gt; BirdCreate(@RequestBody Bird newBird) {\n    Bird bird = birdService.save(newBird);\n    return new ResponseEntity&lt;&gt;(bird, HttpStatus.CREATED);\n}\n</code></pre>\n<p><strong>Unsupported Media Type - Error</strong></p>\n<pre><code>{\n&quot;timestamp&quot;: &quot;2023-09-11T18:29:23.830+00:00&quot;,\n&quot;status&quot;: 415,\n&quot;error&quot;: &quot;Unsupported Media Type&quot;,\n&quot;trace&quot;: &quot;org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type 'application/json;charset=UTF-8' is not supported\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:209)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:163)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:136)\\r\\n\\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\\r\\n\\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)\\r\\n\\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\\r\\n\\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\\r\\n\\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\\r\\n\\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\\r\\n\\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\\r\\n\\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\\r\\n\\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\\r\\n\\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\\r\\n\\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\\r\\n\\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)\\r\\n\\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\\r\\n\\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)\\r\\n&quot;,\n&quot;message&quot;: &quot;Content-Type 'application/json;charset=UTF-8' is not supported.&quot;,\n&quot;path&quot;: &quot;/birds/testpost/&quot;\n</code></pre>\n<p>}</p>\n<p><strong>Postman</strong></p>\n<p><a href=\"https://i.stack.imgur.com/x17TF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x17TF.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/3R44t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3R44t.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Steps Taken So Far</strong></p>\n<ol>\n<li><p>I have another controller on same project working fine (it doesnt even specify media type)</p>\n</li>\n<li><p>Tried with <code>@PostMapping(value = &quot;/testpost/&quot;, consumes = (MediaType.APPLICATION_JSON_VALUE), produces = (MediaType.APPLICATION_JSON_VALUE) )</code> and <code>consumes = &quot;application/json&quot;</code></p>\n</li>\n<li><p>Changed the controller to use another Class I have for Testing - it worked with the test Class</p>\n</li>\n<li><p>Tried to set a breakpoint on the controller on this line <code>Bird bird = birdService.save(newBird);</code> but it never gets reached</p>\n</li>\n<li><p>Tried manually addding &quot;Accept&quot;:&quot;application/json&quot; to postman instead of <code>*/*</code></p>\n</li>\n<li><p>Tried curl :</p>\n<p>curl -X POST http://localhost:8080/birds/testpost/ --header &quot;Content-Type:application/json&quot; -d '{&quot;name&quot;:&quot;bob&quot;}'\n{&quot;timestamp&quot;:&quot;2023-09-11T09:58:02.903+00:00&quot;,&quot;status&quot;:415,&quot;error&quot;:&quot;Unsupported Media Type&quot;,&quot;trace&quot;:&quot;org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type 'application/json;charset=UTF-8' is not supported</p>\n</li>\n</ol>\n<p>The controller that does work is as simple as:</p>\n<pre><code>    @PostMapping(value = &quot;/&quot;)\nResponseEntity&lt;Pit&gt; newPIT(@RequestBody PitDto pitDto) {\n    Pit createdPit = pitMapper.toEntity(pitDto);\n     // some service layer stuff\n    Pit savedPit = pitService.savePIT(createdPit);\n    return ResponseEntity.ok().body(savedPit);\n}\n</code></pre>\n<p>I don't even set the application type in that controller (however it does use Dto).</p>\n<p>I am out of idea's but suspect something on the entity since the test entity works in that controller.</p>\n<p><strong>Update</strong></p>\n<p>After creating a new branch to create a Minimal, Reproducible Example the controller worked. So I changed back to master, last commit, and began to remove the properties.</p>\n<p>The field causing a issue is <code>HealthCheck</code> - here is that class:</p>\n<pre><code>@NoArgsConstructor\n@ToString\n@Entity\n@Data\n@JsonIgnoreProperties({&quot;hibernateLazyInitalizer&quot;, &quot;handler&quot;})\n@SequenceGenerator(name = &quot;health_check_seq&quot;, sequenceName = &quot;HEALTH_CHECK_SEQ&quot;, initialValue = 100, allocationSize = 50)\n@Table(name = &quot;health_check&quot;)\npublic class HealthCheck {\n\n@Id\n@GeneratedValue(strategy = SEQUENCE, generator = &quot;health_check_seq&quot;)\nprivate Long id;\n\n@ManyToOne(fetch = FetchType.EAGER, optional = false)\n@JoinColumn(name = &quot;bird_id&quot;)\nprivate Bird bird;\n\n@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm&quot;)\nprivate LocalDateTime catchDateTime;\n</code></pre>\n"},{"tags":["java","android","okhttp"],"comments":[{"owner":{"account_id":12804526,"reputation":1368,"user_id":9264713,"display_name":"Bahij.Mik"},"score":0,"creation_date":1694510286,"post_id":77087236,"comment_id":135896782,"body_markdown":"Your code is working fine for me, make sure you have the correct URL.","body":"Your code is working fine for me, make sure you have the correct URL."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1694513720,"post_id":77087236,"comment_id":135897536,"body_markdown":"Make those inner classes static nested classes instead.","body":"Make those inner classes static nested classes instead."},{"owner":{"account_id":18902552,"reputation":37,"user_id":13790258,"display_name":"avcismail"},"score":0,"creation_date":1694514605,"post_id":77087236,"comment_id":135897716,"body_markdown":"I tried it, it didn&#39;t work.","body":"I tried it, it didn&#39;t work."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1694751799,"post_id":77087236,"comment_id":135935176,"body_markdown":"Please add the complete stack trace of the exception to your question.","body":"Please add the complete stack trace of the exception to your question."}],"answers":[{"comments":[{"owner":{"account_id":18902552,"reputation":37,"user_id":13790258,"display_name":"avcismail"},"score":0,"creation_date":1694507291,"post_id":77087269,"comment_id":135896191,"body_markdown":"it&#39;s not working.","body":"it&#39;s not working."},{"owner":{"account_id":13680665,"reputation":735,"user_id":9871101,"display_name":"Dinh Lam"},"score":0,"creation_date":1694512886,"post_id":77087269,"comment_id":135897356,"body_markdown":"what is the error?","body":"what is the error?"},{"owner":{"account_id":18902552,"reputation":37,"user_id":13790258,"display_name":"avcismail"},"score":0,"creation_date":1694514857,"post_id":77087269,"comment_id":135897767,"body_markdown":"`java.lang.NullPointerException: Attempt to invoke interface method &#39;java.util.Iterator java.util.List.iterator()&#39; on a null object reference`","body":"<code>java.lang.NullPointerException: Attempt to invoke interface method &#39;java.util.Iterator java.util.List.iterator()&#39; on a null object reference</code>"}],"tags":[],"owner":{"account_id":13173045,"reputation":24,"user_id":9514691,"display_name":"shengdoushi"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694507006,"creation_date":1694507006,"answer_id":77087269,"question_id":77087236,"body_markdown":"you should  mark the product class to Static,like:\r\n\r\n```\r\npublic static class Product\r\n```\r\n","title":"How can I get API data with models on OkHttpClient","body":"<p>you should  mark the product class to Static,like:</p>\n<pre><code>public static class Product\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18902552,"reputation":37,"user_id":13790258,"display_name":"avcismail"},"score":0,"creation_date":1694507738,"post_id":77087289,"comment_id":135896267,"body_markdown":"Hi Sarah, thank you for answer. I tryed but it&#39;s not worked.","body":"Hi Sarah, thank you for answer. I tryed but it&#39;s not worked."}],"tags":[],"owner":{"account_id":29004116,"reputation":337,"user_id":22217083,"display_name":"Sarah"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694507169,"creation_date":1694507169,"answer_id":77087289,"question_id":77087236,"body_markdown":"I think there&#39;s an issue with the JSON structure and how you&#39;re trying to parse it with Gson.\r\n\r\nIn the JSON, the outer object has a field named &quot;products,&quot; which contains an array of product objects. However, your TestModel.ProductList class doesn&#39;t have a corresponding field for &quot;products.&quot; Instead, it has fields like &quot;total,&quot; &quot;skip,&quot; and &quot;limit.&quot;\r\n\r\nTo fix this issue, you need to modify your model classes to match the JSON structure. Here&#39;s how you can do it:\r\n\r\n    public class TestModel {\r\n        public static class ProductList {\r\n            private List&lt;Product&gt; products;\r\n    \r\n            public List&lt;Product&gt; getProducts() {\r\n                return products;\r\n            }\r\n        }\r\n    \r\n        public static class Product {\r\n            private int id;\r\n            private String title;\r\n            private String description;\r\n            private double price;\r\n            private double discountPercentage;\r\n            private double rating;\r\n            private int stock;\r\n            private String brand;\r\n            private String category;\r\n            private String thumbnail;\r\n            private List&lt;String&gt; images;\r\n    \r\n            // Add getter and setter methods for the fields here\r\n        }\r\n    }\r\n\r\nI&#39;ve removed the &quot;total,&quot; &quot;skip,&quot; and &quot;limit&quot; fields from the ProductList class because they don&#39;t exist in your JSON data. You can add getter and setter methods for the fields in the Product class as needed.\r\n\r\nWith these modifications, this Gson parsing code should work as expected:\r\n\r\n    Gson gson = new Gson();\r\n    TestModel.ProductList productList = gson.fromJson(json, TestModel.ProductList.class);\r\n    \r\n    List&lt;TestModel.Product&gt; products = productList.getProducts();\r\n    for (TestModel.Product product : products) {\r\n        System.out.println(&quot;Product Title: &quot; + product.getTitle());\r\n        System.out.println(&quot;Description: &quot; + product.getDescription());\r\n        // Print other product details as needed\r\n    }\r\n\r\nPlease update the model class as above and make sure that the JSON response in the API matches the structure you want to parse.\r\n\r\nGood luck.","title":"How can I get API data with models on OkHttpClient","body":"<p>I think there's an issue with the JSON structure and how you're trying to parse it with Gson.</p>\n<p>In the JSON, the outer object has a field named &quot;products,&quot; which contains an array of product objects. However, your TestModel.ProductList class doesn't have a corresponding field for &quot;products.&quot; Instead, it has fields like &quot;total,&quot; &quot;skip,&quot; and &quot;limit.&quot;</p>\n<p>To fix this issue, you need to modify your model classes to match the JSON structure. Here's how you can do it:</p>\n<pre><code>public class TestModel {\n    public static class ProductList {\n        private List&lt;Product&gt; products;\n\n        public List&lt;Product&gt; getProducts() {\n            return products;\n        }\n    }\n\n    public static class Product {\n        private int id;\n        private String title;\n        private String description;\n        private double price;\n        private double discountPercentage;\n        private double rating;\n        private int stock;\n        private String brand;\n        private String category;\n        private String thumbnail;\n        private List&lt;String&gt; images;\n\n        // Add getter and setter methods for the fields here\n    }\n}\n</code></pre>\n<p>I've removed the &quot;total,&quot; &quot;skip,&quot; and &quot;limit&quot; fields from the ProductList class because they don't exist in your JSON data. You can add getter and setter methods for the fields in the Product class as needed.</p>\n<p>With these modifications, this Gson parsing code should work as expected:</p>\n<pre><code>Gson gson = new Gson();\nTestModel.ProductList productList = gson.fromJson(json, TestModel.ProductList.class);\n\nList&lt;TestModel.Product&gt; products = productList.getProducts();\nfor (TestModel.Product product : products) {\n    System.out.println(&quot;Product Title: &quot; + product.getTitle());\n    System.out.println(&quot;Description: &quot; + product.getDescription());\n    // Print other product details as needed\n}\n</code></pre>\n<p>Please update the model class as above and make sure that the JSON response in the API matches the structure you want to parse.</p>\n<p>Good luck.</p>\n"},{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1694513775,"post_id":77087689,"comment_id":135897547,"body_markdown":"The most important change in your answer is probably the introduction of static on those nested classes.","body":"The most important change in your answer is probably the introduction of static on those nested classes."},{"owner":{"account_id":18902552,"reputation":37,"user_id":13790258,"display_name":"avcismail"},"score":0,"creation_date":1694514839,"post_id":77087689,"comment_id":135897762,"body_markdown":"I tried it, it didn&#39;t work. Logcat error: `java.lang.NullPointerException: Attempt to invoke interface method &#39;java.util.Iterator java.util.List.iterator()&#39; on a null object reference`.","body":"I tried it, it didn&#39;t work. Logcat error: <code>java.lang.NullPointerException: Attempt to invoke interface method &#39;java.util.Iterator java.util.List.iterator()&#39; on a null object reference</code>."},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":1,"creation_date":1694517984,"post_id":77087689,"comment_id":135898416,"body_markdown":"@avcismail relevant logs - not necessary exceptions - could be earlier in logcat. For me those changes work, take a look at my test project on github: https://github.com/luskan/SoTest1 in logcat I can see products printed","body":"@avcismail relevant logs - not necessary exceptions - could be earlier in logcat. For me those changes work, take a look at my test project on github: <a href=\"https://github.com/luskan/SoTest1\" rel=\"nofollow noreferrer\">github.com/luskan/SoTest1</a> in logcat I can see products printed"},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":1,"creation_date":1694518068,"post_id":77087689,"comment_id":135898439,"body_markdown":"if it still wont work, copy paste more logcat and paste to question - make it include the NPE excpeption and few seconds of logs before it","body":"if it still wont work, copy paste more logcat and paste to question - make it include the NPE excpeption and few seconds of logs before it"},{"owner":{"account_id":18902552,"reputation":37,"user_id":13790258,"display_name":"avcismail"},"score":1,"creation_date":1694519791,"post_id":77087689,"comment_id":135898825,"body_markdown":"@marcinj yes, it&#39;s worked. Thank you. My mistake, I sent the parameter as products/1. I had to send it as products and get all the data.","body":"@marcinj yes, it&#39;s worked. Thank you. My mistake, I sent the parameter as products/1. I had to send it as products and get all the data."}],"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694510190,"creation_date":1694510190,"answer_id":77087689,"question_id":77087236,"body_markdown":"Make sure you added to manifest internet permission use:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n\r\nMake sure you call your method with correct argument:\r\n\r\n        try {\r\n            GetFromServer(&quot;products&quot;);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\nbaseUrl should be:\r\n\r\n    String baseUrl = &quot;https://dummyjson.com&quot;;\r\n\r\nYour testModel class lacks gett-er methods, also make the inner classes static:\r\n\r\n    public class TestModel {\r\n        public static class ProductList {\r\n            private List&lt;Product&gt; products;\r\n            private int total;\r\n            private int skip;\r\n            private int limit;\r\n    \r\n            public List&lt;Product&gt; getProducts() {\r\n                return products;\r\n            }\r\n        }\r\n        public static class Product {\r\n            private int id;\r\n            private String title;\r\n            private String description;\r\n            private double price;\r\n            private double discountPercentage;\r\n            private double rating;\r\n            private int stock;\r\n            private String brand;\r\n            private String category;\r\n            private String thumbnail;\r\n            private List&lt;String&gt; images;\r\n    \r\n            public String getTitle() {\r\n                return title;\r\n            }\r\n    \r\n            public String getDescription() {\r\n                return description;\r\n            }\r\n        }\r\n    }\r\n\r\nCarefully analyze logcat for any errors.","title":"How can I get API data with models on OkHttpClient","body":"<p>Make sure you added to manifest internet permission use:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n</code></pre>\n<p>Make sure you call your method with correct argument:</p>\n<pre><code>    try {\n        GetFromServer(&quot;products&quot;);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n</code></pre>\n<p>baseUrl should be:</p>\n<pre><code>String baseUrl = &quot;https://dummyjson.com&quot;;\n</code></pre>\n<p>Your testModel class lacks gett-er methods, also make the inner classes static:</p>\n<pre><code>public class TestModel {\n    public static class ProductList {\n        private List&lt;Product&gt; products;\n        private int total;\n        private int skip;\n        private int limit;\n\n        public List&lt;Product&gt; getProducts() {\n            return products;\n        }\n    }\n    public static class Product {\n        private int id;\n        private String title;\n        private String description;\n        private double price;\n        private double discountPercentage;\n        private double rating;\n        private int stock;\n        private String brand;\n        private String category;\n        private String thumbnail;\n        private List&lt;String&gt; images;\n\n        public String getTitle() {\n            return title;\n        }\n\n        public String getDescription() {\n            return description;\n        }\n    }\n}\n</code></pre>\n<p>Carefully analyze logcat for any errors.</p>\n"}],"owner":{"account_id":18902552,"reputation":37,"user_id":13790258,"display_name":"avcismail"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77087689,"answer_count":3,"score":0,"last_activity_date":1694513696,"creation_date":1694506709,"question_id":77087236,"body_markdown":"I want to pull data from api with OkHttpClient. Sample data I want to pull: &lt;https://dummyjson.com/products&gt;\r\n\r\nI created two models. I think I created the models correctly. What do you think I did wrong? I created getter and setter methods for model fields. I didn&#39;t add it here.\r\n```\r\npublic class TestModel {\r\n\r\n    public class ProductList {\r\n        private List&lt;Product&gt; products;\r\n        private int total;\r\n        private int skip;\r\n        private int limit;\r\n    }\r\n\r\n    public class Product {\r\n        private int id;\r\n        private String title;\r\n        private String description;\r\n        private double price;\r\n        private double discountPercentage;\r\n        private double rating;\r\n        private int stock;\r\n        private String brand;\r\n        private String category;\r\n        private String thumbnail;\r\n        private List&lt;String&gt; images;\r\n    }\r\n}\r\n```\r\n\r\nWhen I write the code below with OkHttpClient, I get a null error. I don&#39;t think data is null.\r\n\r\n```\r\nprivate final OkHttpClient client = new OkHttpClient();\r\n\r\npublic void GetFromServer(String _serviceUrl) throws Exception {\r\n    String absoluteUrl = baseUrl + &quot;/&quot; + _serviceUrl;\r\n    Request request = new Request.Builder()\r\n            .url(absoluteUrl)\r\n            .build();\r\n\r\n    client.newCall(request).enqueue(new Callback() {\r\n        @Override public void onFailure(Call call, IOException e) {\r\n            Logging.Error(&quot;GetFromServer is Failure. Endpoint : &quot; + absoluteUrl + &quot; Error Message : &quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n        @Override public void onResponse(Call call, Response response) throws IOException {\r\n            try (ResponseBody responseBody = response.body()) {\r\n                if (response.isSuccessful()) {\r\n                    String json = response.body().string();\r\n\r\n                    Gson gson = new Gson();\r\n                    TestModel.ProductList productList = gson.fromJson(json, TestModel.ProductList.class);\r\n\r\n                    List&lt;TestModel.Product&gt; products = productList.getProducts();\r\n                    for (TestModel.Product product : products) {\r\n                        System.out.println(&quot;Product Title: &quot; + product.getTitle());\r\n                        System.out.println(&quot;Description: &quot; + product.getDescription());\r\n                       \r\n                    }\r\n                }\r\n                else {\r\n                    throw new IOException(&quot;Unexpected code &quot; + response);\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n```","title":"How can I get API data with models on OkHttpClient","body":"<p>I want to pull data from api with OkHttpClient. Sample data I want to pull: <a href=\"https://dummyjson.com/products\" rel=\"nofollow noreferrer\">https://dummyjson.com/products</a></p>\n<p>I created two models. I think I created the models correctly. What do you think I did wrong? I created getter and setter methods for model fields. I didn't add it here.</p>\n<pre><code>public class TestModel {\n\n    public class ProductList {\n        private List&lt;Product&gt; products;\n        private int total;\n        private int skip;\n        private int limit;\n    }\n\n    public class Product {\n        private int id;\n        private String title;\n        private String description;\n        private double price;\n        private double discountPercentage;\n        private double rating;\n        private int stock;\n        private String brand;\n        private String category;\n        private String thumbnail;\n        private List&lt;String&gt; images;\n    }\n}\n</code></pre>\n<p>When I write the code below with OkHttpClient, I get a null error. I don't think data is null.</p>\n<pre><code>private final OkHttpClient client = new OkHttpClient();\n\npublic void GetFromServer(String _serviceUrl) throws Exception {\n    String absoluteUrl = baseUrl + &quot;/&quot; + _serviceUrl;\n    Request request = new Request.Builder()\n            .url(absoluteUrl)\n            .build();\n\n    client.newCall(request).enqueue(new Callback() {\n        @Override public void onFailure(Call call, IOException e) {\n            Logging.Error(&quot;GetFromServer is Failure. Endpoint : &quot; + absoluteUrl + &quot; Error Message : &quot; + e.getMessage());\n            e.printStackTrace();\n        }\n        @Override public void onResponse(Call call, Response response) throws IOException {\n            try (ResponseBody responseBody = response.body()) {\n                if (response.isSuccessful()) {\n                    String json = response.body().string();\n\n                    Gson gson = new Gson();\n                    TestModel.ProductList productList = gson.fromJson(json, TestModel.ProductList.class);\n\n                    List&lt;TestModel.Product&gt; products = productList.getProducts();\n                    for (TestModel.Product product : products) {\n                        System.out.println(&quot;Product Title: &quot; + product.getTitle());\n                        System.out.println(&quot;Description: &quot; + product.getDescription());\n                       \n                    }\n                }\n                else {\n                    throw new IOException(&quot;Unexpected code &quot; + response);\n                }\n            }\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","maven","apache-poi","docx"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1694002104,"post_id":77050264,"comment_id":135833296,"body_markdown":"Did you try with Apache Tika?","body":"Did you try with Apache Tika?"},{"owner":{"account_id":25192215,"reputation":184,"user_id":19032274,"display_name":"Lako12"},"score":0,"creation_date":1694513565,"post_id":77050264,"comment_id":135897497,"body_markdown":"works! Thank you","body":"works! Thank you"}],"answers":[{"tags":[],"owner":{"account_id":25192215,"reputation":184,"user_id":19032274,"display_name":"Lako12"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694513681,"creation_date":1694513681,"answer_id":77088165,"question_id":77050264,"body_markdown":"I solved my problemu by using Apache Tika.\r\n\r\n    AutoDetectParser parser = new AutoDetectParser();\r\n    BodyContentHandler handler = new BodyContentHandler(-1);\r\n    Metadata metadata = new Metadata();\r\n    parser.parse(inputStream, handler, metadata);\r\n    return handler.toString();","title":"Problem extracting text with XWPFWordExtractor","body":"<p>I solved my problemu by using Apache Tika.</p>\n<pre><code>AutoDetectParser parser = new AutoDetectParser();\nBodyContentHandler handler = new BodyContentHandler(-1);\nMetadata metadata = new Metadata();\nparser.parse(inputStream, handler, metadata);\nreturn handler.toString();\n</code></pre>\n"}],"owner":{"account_id":25192215,"reputation":184,"user_id":19032274,"display_name":"Lako12"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77088165,"answer_count":1,"score":0,"last_activity_date":1694513681,"creation_date":1693989326,"question_id":77050264,"body_markdown":"I have a Java application with this dependency\r\n\r\n     &lt;dependency&gt;\r\n         &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n         &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n         &lt;version&gt;5.2.3&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n\r\nand this piece of code\r\n\r\n     XWPFWordExtractor extractor = new XWPFWordExtractor(new XWPFDocument(inputStream));\r\n     return extractor.getText();\r\n\r\nI&#39;m trying to extract from a word document (.docx) all the text inside.\r\nThe text is extracted, but if for example there is a text box inside the document, this is ignored and therefore also the text inside.\r\n\r\nHow can I do to extract the entire text? Including text boxes and if so other possible elements that can contain text?","title":"Problem extracting text with XWPFWordExtractor","body":"<p>I have a Java application with this dependency</p>\n<pre><code> &lt;dependency&gt;\n     &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n     &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n     &lt;version&gt;5.2.3&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>and this piece of code</p>\n<pre><code> XWPFWordExtractor extractor = new XWPFWordExtractor(new XWPFDocument(inputStream));\n return extractor.getText();\n</code></pre>\n<p>I'm trying to extract from a word document (.docx) all the text inside.\nThe text is extracted, but if for example there is a text box inside the document, this is ignored and therefore also the text inside.</p>\n<p>How can I do to extract the entire text? Including text boxes and if so other possible elements that can contain text?</p>\n"},{"tags":["java","mysql","jdbc","resultset"],"comments":[{"owner":{"account_id":1169767,"reputation":3461,"user_id":1147197,"accept_rate":83,"display_name":"Murali N"},"score":0,"creation_date":1355131033,"post_id":13797942,"comment_id":18983922,"body_markdown":"returns the number of rows affected","body":"returns the number of rows affected"},{"owner":{"account_id":2130141,"reputation":43,"user_id":1891149,"display_name":"Malxaz Jayeli"},"score":0,"creation_date":1355131308,"post_id":13797942,"comment_id":18983923,"body_markdown":"but what if the query went wrong? i mean how can i fetch true or false like in php?","body":"but what if the query went wrong? i mean how can i fetch true or false like in php?"},{"owner":{"account_id":1169767,"reputation":3461,"user_id":1147197,"accept_rate":83,"display_name":"Murali N"},"score":0,"creation_date":1355131390,"post_id":13797942,"comment_id":18983924,"body_markdown":"0 for SQL statements that return nothing","body":"0 for SQL statements that return nothing"},{"owner":{"account_id":1711471,"reputation":1102,"user_id":1569443,"accept_rate":100,"display_name":"Abhishekkumar"},"score":0,"creation_date":1355131884,"post_id":13797942,"comment_id":18983921,"body_markdown":"Returns the number of rows affected if query is ok if it is wrong it will return -1.","body":"Returns the number of rows affected if query is ok if it is wrong it will return -1."}],"answers":[{"comments":[{"owner":{"account_id":12031,"reputation":2177,"user_id":23486,"accept_rate":88,"display_name":"acostache"},"score":2,"creation_date":1355131266,"post_id":13797964,"comment_id":18978612,"body_markdown":"only answer backed up with reference, up to now ;)","body":"only answer backed up with reference, up to now ;)"}],"tags":[],"owner":{"account_id":324278,"reputation":4581,"user_id":644766,"display_name":"melihcelik"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1355138471,"creation_date":1355131024,"answer_id":13797964,"question_id":13797942,"body_markdown":"It returns:\r\n\r\n 1. The number of affected rows in the resultset if the query is a DML query (insert, update, delete)\r\n 2. 0, if the query is a DDL (create, alter, etc.)\r\n\r\nSee the javadoc for more details: [Execute Update Javadoc][1]\r\n\r\nAnd I strongly advise you to read the related section in [JDBC Tutorial][2], read the section titled: Return Values for the executeUpdate Method\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29\r\n  [2]: http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html","title":"What does java return in resultset in case of mysql update query","body":"<p>It returns:</p>\n\n<ol>\n<li>The number of affected rows in the resultset if the query is a DML query (insert, update, delete)</li>\n<li>0, if the query is a DDL (create, alter, etc.)</li>\n</ol>\n\n<p>See the javadoc for more details: <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29\" rel=\"noreferrer\">Execute Update Javadoc</a></p>\n\n<p>And I strongly advise you to read the related section in <a href=\"http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html\" rel=\"noreferrer\">JDBC Tutorial</a>, read the section titled: Return Values for the executeUpdate Method</p>\n"},{"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694512997,"creation_date":1355136684,"answer_id":13799467,"question_id":13797942,"body_markdown":"When you execute an `UPDATE`, you should not use `executeQuery`, as an update does not produce a resultset. In general you should use [`executeUpdate`][1] for `UPDATE`, `INSERT` and `DELETE`. This method returns an update count.\r\n\r\nIf the query fails (that is: if an error occurs), then the JDBC driver will throw an `SQLException`. If the query ran, but didn&#39;t update any rows that doesn&#39;t mean it failed, there simply weren&#39;t any rows to update, so the update count will be 0.\r\n\r\nAlso I&#39;d advise you to follow the [JDBC Basics Tutorial][2] and check the Javadocs of the classes in the [package `java.sql`][3].\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/PreparedStatement.html#executeUpdate()\r\n  [2]: https://docs.oracle.com/javase/tutorial/jdbc/basics/index.html\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/package-summary.html","title":"What does java return in resultset in case of mysql update query","body":"<p>When you execute an <code>UPDATE</code>, you should not use <code>executeQuery</code>, as an update does not produce a resultset. In general you should use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/PreparedStatement.html#executeUpdate()\" rel=\"nofollow noreferrer\"><code>executeUpdate</code></a> for <code>UPDATE</code>, <code>INSERT</code> and <code>DELETE</code>. This method returns an update count.</p>\n<p>If the query fails (that is: if an error occurs), then the JDBC driver will throw an <code>SQLException</code>. If the query ran, but didn't update any rows that doesn't mean it failed, there simply weren't any rows to update, so the update count will be 0.</p>\n<p>Also I'd advise you to follow the <a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/index.html\" rel=\"nofollow noreferrer\">JDBC Basics Tutorial</a> and check the Javadocs of the classes in the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/package-summary.html\" rel=\"nofollow noreferrer\">package <code>java.sql</code></a>.</p>\n"}],"owner":{"account_id":2130141,"reputation":43,"user_id":1891149,"display_name":"Malxaz Jayeli"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10940,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":13797964,"answer_count":2,"score":3,"last_activity_date":1694512997,"creation_date":1355130912,"question_id":13797942,"body_markdown":"I need to know did the update query go wrong or right, i know how to do it in PHP, but have no idea in java (I&#39;m new to java).","title":"What does java return in resultset in case of mysql update query","body":"<p>I need to know did the update query go wrong or right, i know how to do it in PHP, but have no idea in java (I'm new to java).</p>\n"},{"tags":["java","security","continuous-integration","owasp","suppression"],"answers":[{"comments":[{"owner":{"account_id":6320331,"reputation":814,"user_id":4908657,"accept_rate":57,"display_name":"Johnny Alpha"},"score":0,"creation_date":1633339442,"post_id":69420289,"comment_id":122724059,"body_markdown":"The failure can also be suppressed by adding the failing test name to .trivyignore eg/CVE-2021-37136","body":"The failure can also be suppressed by adding the failing test name to .trivyignore eg/CVE-2021-37136"}],"tags":[],"owner":{"account_id":6320331,"reputation":814,"user_id":4908657,"accept_rate":57,"display_name":"Johnny Alpha"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1633209018,"creation_date":1633209018,"answer_id":69420289,"question_id":69404705,"body_markdown":"#1 Click on the &#39;artifacts&#39; tab on the OWASP dependency check task in CI and the html report is there.\r\n\r\n#2 &#39;File&#39; in this context means the file inside the jar that is warranting the dependency issue. It will be given to you in the html report. ","title":"OWASP Dependency check, how to use suppressions","body":"<p>#1 Click on the 'artifacts' tab on the OWASP dependency check task in CI and the html report is there.</p>\n<p>#2 'File' in this context means the file inside the jar that is warranting the dependency issue. It will be given to you in the html report.</p>\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1678891719,"creation_date":1678891719,"answer_id":75746352,"question_id":69404705,"body_markdown":"Below answer is based on gradle OWASP plugin version 7.4.4.\r\n\r\nBelow in my build.gradle\r\n\r\n    id &quot;org.owasp.dependencycheck&quot; version &quot;7.4.4&quot;\r\n\r\nAnd below is the task configuration\r\n\r\n    dependencyCheck {\r\n        formats = [&#39;xml&#39;,&#39;json&#39;]\r\n        failBuildOnCVSS = 8\r\n        failOnError = true\r\n        suppressionFile = &#39;config/dependency-check/suppressions.xml&#39;\r\n        check.dependsOn(dependencyCheckAnalyze)\r\n    }\r\n\r\nAnd as you see we have provided a path to suppressionFile where we can define the suppression for vulnerabilities.\r\n\r\nSo, in my case our sonar build was failing due to \r\n\r\n    Filename: spring-security-oauth2-client-5.6.3.jar | Reference: CVE-2022-22978 | CVSS Score: 9.8\r\n    \r\n    Filename: snakeyaml-1.33.jar | Reference: CVE-2022-1471 | CVSS Score: 9.8\r\n\r\n  \r\nSo, I have added them in Suppression.xml and my file looks like below\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;suppressions xmlns=&quot;https://jeremylong.github.io/DependencyCheck/dependency-suppression.1.3.xsd&quot;&gt;\r\n        &lt;suppress until=&quot;2023-06-01Z&quot;&gt;\r\n            &lt;notes&gt;&lt;![CDATA[\r\n            This suppresses a CVE from SnakeYaml as it needs to wait until SpringBoot 3 upgrade\r\n            ]]&gt;&lt;/notes&gt;\r\n            &lt;packageUrl regex=&quot;true&quot;&gt;^pkg:maven/org\\.yaml/snakeyaml@.*$&lt;/packageUrl&gt;\r\n            &lt;vulnerabilityName&gt;CVE-2022-1471&lt;/vulnerabilityName&gt;\r\n        &lt;/suppress&gt;\r\n        &lt;suppress until=&quot;2023-06-01Z&quot;&gt;\r\n            &lt;notes&gt;&lt;![CDATA[\r\n            This suppresses a CVE from OAuth Client as it needs to wait until SpringBoot 3 upgrade\r\n            ]]&gt;&lt;/notes&gt;\r\n            &lt;packageUrl regex=&quot;true&quot;&gt;^pkg:maven/org\\.springframework\\.security/spring\\-security\\-oauth2\\-client@.*$&lt;/packageUrl&gt;\r\n            &lt;vulnerabilityName&gt;CVE-2022-22978&lt;/vulnerabilityName&gt;\r\n        &lt;/suppress&gt;\r\n    &lt;/suppressions&gt;\r\n\r\n\r\nI recommend to use `until=&quot;2023-06-01Z&quot;` so you don&#39;t suppress them forever.\r\n\r\nVulnerabilities can be suppressed in number of different combinations. So, please refer https://jeremylong.github.io/DependencyCheck/general/suppression.html and decide which option suits your requirement.\r\n","title":"OWASP Dependency check, how to use suppressions","body":"<p>Below answer is based on gradle OWASP plugin version 7.4.4.</p>\n<p>Below in my build.gradle</p>\n<pre><code>id &quot;org.owasp.dependencycheck&quot; version &quot;7.4.4&quot;\n</code></pre>\n<p>And below is the task configuration</p>\n<pre><code>dependencyCheck {\n    formats = ['xml','json']\n    failBuildOnCVSS = 8\n    failOnError = true\n    suppressionFile = 'config/dependency-check/suppressions.xml'\n    check.dependsOn(dependencyCheckAnalyze)\n}\n</code></pre>\n<p>And as you see we have provided a path to suppressionFile where we can define the suppression for vulnerabilities.</p>\n<p>So, in my case our sonar build was failing due to</p>\n<pre><code>Filename: spring-security-oauth2-client-5.6.3.jar | Reference: CVE-2022-22978 | CVSS Score: 9.8\n\nFilename: snakeyaml-1.33.jar | Reference: CVE-2022-1471 | CVSS Score: 9.8\n</code></pre>\n<p>So, I have added them in Suppression.xml and my file looks like below</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;suppressions xmlns=&quot;https://jeremylong.github.io/DependencyCheck/dependency-suppression.1.3.xsd&quot;&gt;\n    &lt;suppress until=&quot;2023-06-01Z&quot;&gt;\n        &lt;notes&gt;&lt;![CDATA[\n        This suppresses a CVE from SnakeYaml as it needs to wait until SpringBoot 3 upgrade\n        ]]&gt;&lt;/notes&gt;\n        &lt;packageUrl regex=&quot;true&quot;&gt;^pkg:maven/org\\.yaml/snakeyaml@.*$&lt;/packageUrl&gt;\n        &lt;vulnerabilityName&gt;CVE-2022-1471&lt;/vulnerabilityName&gt;\n    &lt;/suppress&gt;\n    &lt;suppress until=&quot;2023-06-01Z&quot;&gt;\n        &lt;notes&gt;&lt;![CDATA[\n        This suppresses a CVE from OAuth Client as it needs to wait until SpringBoot 3 upgrade\n        ]]&gt;&lt;/notes&gt;\n        &lt;packageUrl regex=&quot;true&quot;&gt;^pkg:maven/org\\.springframework\\.security/spring\\-security\\-oauth2\\-client@.*$&lt;/packageUrl&gt;\n        &lt;vulnerabilityName&gt;CVE-2022-22978&lt;/vulnerabilityName&gt;\n    &lt;/suppress&gt;\n&lt;/suppressions&gt;\n</code></pre>\n<p>I recommend to use <code>until=&quot;2023-06-01Z&quot;</code> so you don't suppress them forever.</p>\n<p>Vulnerabilities can be suppressed in number of different combinations. So, please refer <a href=\"https://jeremylong.github.io/DependencyCheck/general/suppression.html\" rel=\"nofollow noreferrer\">https://jeremylong.github.io/DependencyCheck/general/suppression.html</a> and decide which option suits your requirement.</p>\n"},{"tags":[],"owner":{"account_id":103435,"reputation":13736,"user_id":277042,"accept_rate":57,"display_name":"Lukas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684768363,"creation_date":1684768363,"answer_id":76307596,"question_id":69404705,"body_markdown":"You can use [Dependency Shield][1] that streamlines management of the false positives.\r\n\r\n\r\n  [1]: https://www.dependencyshield.com/","title":"OWASP Dependency check, how to use suppressions","body":"<p>You can use <a href=\"https://www.dependencyshield.com/\" rel=\"nofollow noreferrer\">Dependency Shield</a> that streamlines management of the false positives.</p>\n"},{"tags":[],"owner":{"account_id":2758034,"reputation":111,"user_id":2375553,"display_name":"Davy Jones"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694512983,"creation_date":1694512983,"answer_id":77088078,"question_id":69404705,"body_markdown":"If you are looking for how to suppress from Jenkins job using the dependency check plug in, use `--suppression &lt;path to suppression file&gt;` in `additionalArguments`along with the dependencycheck script.\r\n\r\n   \r\n\r\n    steps{\r\n           dependencycheck additionalArguments: &quot;--suppression owasp-suppression.xml --noupdate  --disableAssembly --disableRetireJS --scan ./target/*.jar&quot;, odcInstallation: &#39;slave&#39;\r\n         }","title":"OWASP Dependency check, how to use suppressions","body":"<p>If you are looking for how to suppress from Jenkins job using the dependency check plug in, use <code>--suppression &lt;path to suppression file&gt;</code> in <code>additionalArguments</code>along with the dependencycheck script.</p>\n<pre><code>steps{\n       dependencycheck additionalArguments: &quot;--suppression owasp-suppression.xml --noupdate  --disableAssembly --disableRetireJS --scan ./target/*.jar&quot;, odcInstallation: 'slave'\n     }\n</code></pre>\n"}],"owner":{"account_id":6320331,"reputation":814,"user_id":4908657,"accept_rate":57,"display_name":"Johnny Alpha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15357,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":75746352,"answer_count":4,"score":6,"last_activity_date":1694512983,"creation_date":1633085688,"question_id":69404705,"body_markdown":"I have a build in CI failing on a the OWASP dependency check.\r\nFor example \r\n\r\n    [HIGH] CVE-2021-37136 - io.netty:netty-codec-4.1.66.Final\r\n\r\nI understand I can add a suppression in `owaspDependencyCheckSuppressions.xml` to fix this.\r\n\r\nIt&#39;s something I haven&#39;t done before, but there is a guide here -\r\nhttps://jeremylong.github.io/DependencyCheck/general/suppression.html \r\nwhich says ...\r\n\r\n&gt; &quot;Suppressing these false positives is fairly easy using the HTML\r\n&gt; report.  In the report next to each CPE identified (and on CVE\r\n&gt; entries) there is a suppress button.  Clicking the suppression button\r\n&gt; will create a dialogue box which you can simple hit Control-C to copy\r\n&gt; the XML that you would place into a suppression XML file&quot;\r\n\r\nI have 2 questions\r\n\r\n#1 Do you know where I can find this HTML report? I thought it might be linked in CI (I&#39;m using Circle CI), but I can&#39;t spot it there :(\r\n\r\n#2 An example suppression is given in the guide\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;suppressions xmlns=&quot;https://jeremylong.github.io/DependencyCheck/dependency-suppression.1.3.xsd&quot;&gt;\r\n       &lt;suppress&gt;\r\n          &lt;notes&gt;&lt;![CDATA[\r\n          file name: some.jar\r\n          ]]&gt;&lt;/notes&gt;\r\n          &lt;sha1&gt;66734244CE86857018B023A8C56AE0635C56B6A1&lt;/sha1&gt;\r\n          &lt;cpe&gt;cpe:/a:apache:struts:2.0.0&lt;/cpe&gt;\r\n       &lt;/suppress&gt;\r\n    &lt;/suppressions&gt;\r\n\r\nThe guide goes on to say\r\n\r\n&gt;  &quot;The above XML file will suppress the cpe:/a:apache:struts:2.0.0 from\r\n&gt; any file with the a matching SHA1 hash.&quot;\r\n\r\nWhat is meant by &quot;any file&quot;? Does this mean any Java class which uses the dependency?\r\n\r\nThanks :) ","title":"OWASP Dependency check, how to use suppressions","body":"<p>I have a build in CI failing on a the OWASP dependency check.\nFor example</p>\n<pre><code>[HIGH] CVE-2021-37136 - io.netty:netty-codec-4.1.66.Final\n</code></pre>\n<p>I understand I can add a suppression in <code>owaspDependencyCheckSuppressions.xml</code> to fix this.</p>\n<p>It's something I haven't done before, but there is a guide here -\n<a href=\"https://jeremylong.github.io/DependencyCheck/general/suppression.html\" rel=\"noreferrer\">https://jeremylong.github.io/DependencyCheck/general/suppression.html</a>\nwhich says ...</p>\n<blockquote>\n<p>&quot;Suppressing these false positives is fairly easy using the HTML\nreport.  In the report next to each CPE identified (and on CVE\nentries) there is a suppress button.  Clicking the suppression button\nwill create a dialogue box which you can simple hit Control-C to copy\nthe XML that you would place into a suppression XML file&quot;</p>\n</blockquote>\n<p>I have 2 questions</p>\n<p>#1 Do you know where I can find this HTML report? I thought it might be linked in CI (I'm using Circle CI), but I can't spot it there :(</p>\n<p>#2 An example suppression is given in the guide</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;suppressions xmlns=&quot;https://jeremylong.github.io/DependencyCheck/dependency-suppression.1.3.xsd&quot;&gt;\n   &lt;suppress&gt;\n      &lt;notes&gt;&lt;![CDATA[\n      file name: some.jar\n      ]]&gt;&lt;/notes&gt;\n      &lt;sha1&gt;66734244CE86857018B023A8C56AE0635C56B6A1&lt;/sha1&gt;\n      &lt;cpe&gt;cpe:/a:apache:struts:2.0.0&lt;/cpe&gt;\n   &lt;/suppress&gt;\n&lt;/suppressions&gt;\n</code></pre>\n<p>The guide goes on to say</p>\n<blockquote>\n<p>&quot;The above XML file will suppress the cpe:/a:apache:struts:2.0.0 from\nany file with the a matching SHA1 hash.&quot;</p>\n</blockquote>\n<p>What is meant by &quot;any file&quot;? Does this mean any Java class which uses the dependency?</p>\n<p>Thanks :)</p>\n"},{"tags":["java","spring-boot","maven","artifact"],"answers":[{"comments":[{"owner":{"account_id":61305,"reputation":1668,"user_id":182774,"accept_rate":100,"display_name":"Jeff Walker"},"score":4,"creation_date":1632321332,"post_id":65694931,"comment_id":122461309,"body_markdown":"I&#39;m not sure how this fixes the problem. Did you have something weird in your `settings.xml` file and changing to the default one got rid of it?","body":"I&#39;m not sure how this fixes the problem. Did you have something weird in your <code>settings.xml</code> file and changing to the default one got rid of it?"},{"owner":{"account_id":10034700,"reputation":133,"user_id":7419841,"display_name":"Teabx"},"score":1,"creation_date":1640776221,"post_id":65694931,"comment_id":124655085,"body_markdown":"For me it was a proxy issue. If your network is setup to go through a proxy server, then you have to let maven know about that proxy on the user&#39;s settings.xml","body":"For me it was a proxy issue. If your network is setup to go through a proxy server, then you have to let maven know about that proxy on the user&#39;s settings.xml"},{"owner":{"account_id":2576749,"reputation":2384,"user_id":2234250,"accept_rate":65,"display_name":"Tung Vo"},"score":0,"creation_date":1657520191,"post_id":65694931,"comment_id":128820236,"body_markdown":"@JeffWalker, sure. I have a proxy configure in file settings.xml","body":"@JeffWalker, sure. I have a proxy configure in file settings.xml"}],"tags":[],"owner":{"account_id":2576749,"reputation":2384,"user_id":2234250,"accept_rate":65,"display_name":"Tung Vo"},"comment_count":3,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1694512465,"creation_date":1610505557,"answer_id":65694931,"question_id":65677156,"body_markdown":"**Solution 1**: I have fixed this issue, in menu choose File -&gt; Setting -&gt; Build, Execution, Deployment -&gt;Build Tools -&gt; Maven.\r\nIn section User setting file stick Override and browse to `settings.xml` of Maven (in my case the `settings.xml` file in directory ..\\apache-maven-3.6.3\\conf . \r\n\r\n[![enter image description here][1]][1]\r\n\r\nI have proxy configuration in `settings.xml`)\r\n[![enter image description here][2]][2]\r\n\r\n\r\n\r\n\r\n**Solution 2**: \r\n\r\nIn my case I have problem with `com/jolira/hickory/1.0.0/hickory-1.0.0.pom`\r\n\r\n**Similar your case with **another library****\r\n\r\nI go to repository of `hickory` on [https://mvnrepository.com][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\nI download .jar file and .pom file from maven page\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\nGo to {your .m2 directory home}\\.m2\\repository\\com\\jolira\\hickory\\1.0.0  and paste the `hickory-1.0.0.jar` and the `hickory-1.0.0.pom` to there\r\n\r\n[![enter image description here][6]][6]\r\n  \r\n\r\n\r\nopen command line and run `mvn clean install` again. It should sucessful\r\n\r\n**Solution 3**\r\n\r\nGo to your Maven directory in local machine computer. Inside directory ..\\apache-maven-(version)\\conf (in my case `E:\\soft\\apache-maven-3.8.4\\conf`), open `settings.xml` and add proxy configuration to this file. Back to your project directory, open command line `cmd` and run `mvn clean install`. Back to IntelliJ and reload.\r\n\r\n\r\n[![enter image description here][7]][7]\r\n\r\n\r\n\r\n**Solution 4**\r\n\r\nIn IntelliJ, choose File-&gt;Setting, search Proxy. Choose Proxy tab and enter proxy information from there.\r\n\r\n[![enter image description here][8]][8]\r\n\r\n[![enter image description here][9]][9]\r\n\r\n\r\nEnter proxy information, press `Apply` button and press `OK`\r\nClick on Maven panel on the right side of IntelliJ and choose icon reload\r\n\r\n[![enter image description here][10]][10]\r\n\r\n\r\n[![enter image description here][11]][11]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NCpGE.png\r\n  [2]: https://i.stack.imgur.com/78qh3.png\r\n  [3]: https://mvnrepository.com\r\n  [4]: https://i.stack.imgur.com/6nM9b.png\r\n  [5]: https://i.stack.imgur.com/T5IqH.png\r\n  [6]: https://i.stack.imgur.com/gBJ5P.png\r\n  [7]: https://i.stack.imgur.com/ytlaf.png\r\n  [8]: https://i.stack.imgur.com/qoWdz.png\r\n  [9]: https://i.stack.imgur.com/pcb3L.png\r\n  [10]: https://i.stack.imgur.com/rjZoO.png\r\n  [11]: https://i.stack.imgur.com/osnlc.png","title":"Could not transfer artifact from/to central IntelliJ","body":"<p><strong>Solution 1</strong>: I have fixed this issue, in menu choose File -&gt; Setting -&gt; Build, Execution, Deployment -&gt;Build Tools -&gt; Maven.\nIn section User setting file stick Override and browse to <code>settings.xml</code> of Maven (in my case the <code>settings.xml</code> file in directory ..\\apache-maven-3.6.3\\conf .</p>\n<p><a href=\"https://i.stack.imgur.com/NCpGE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NCpGE.png\" alt=\"enter image description here\" /></a></p>\n<p>I have proxy configuration in <code>settings.xml</code>)\n<a href=\"https://i.stack.imgur.com/78qh3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/78qh3.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Solution 2</strong>:</p>\n<p>In my case I have problem with <code>com/jolira/hickory/1.0.0/hickory-1.0.0.pom</code></p>\n<p><strong>Similar your case with <strong>another library</strong></strong></p>\n<p>I go to repository of <code>hickory</code> on <a href=\"https://mvnrepository.com\" rel=\"nofollow noreferrer\">https://mvnrepository.com</a></p>\n<p><a href=\"https://i.stack.imgur.com/6nM9b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6nM9b.png\" alt=\"enter image description here\" /></a></p>\n<p>I download .jar file and .pom file from maven page</p>\n<p><a href=\"https://i.stack.imgur.com/T5IqH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T5IqH.png\" alt=\"enter image description here\" /></a></p>\n<p>Go to {your .m2 directory home}.m2\\repository\\com\\jolira\\hickory\\1.0.0  and paste the <code>hickory-1.0.0.jar</code> and the <code>hickory-1.0.0.pom</code> to there</p>\n<p><a href=\"https://i.stack.imgur.com/gBJ5P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gBJ5P.png\" alt=\"enter image description here\" /></a></p>\n<p>open command line and run <code>mvn clean install</code> again. It should sucessful</p>\n<p><strong>Solution 3</strong></p>\n<p>Go to your Maven directory in local machine computer. Inside directory ..\\apache-maven-(version)\\conf (in my case <code>E:\\soft\\apache-maven-3.8.4\\conf</code>), open <code>settings.xml</code> and add proxy configuration to this file. Back to your project directory, open command line <code>cmd</code> and run <code>mvn clean install</code>. Back to IntelliJ and reload.</p>\n<p><a href=\"https://i.stack.imgur.com/ytlaf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ytlaf.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Solution 4</strong></p>\n<p>In IntelliJ, choose File-&gt;Setting, search Proxy. Choose Proxy tab and enter proxy information from there.</p>\n<p><a href=\"https://i.stack.imgur.com/qoWdz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qoWdz.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/pcb3L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pcb3L.png\" alt=\"enter image description here\" /></a></p>\n<p>Enter proxy information, press <code>Apply</code> button and press <code>OK</code>\nClick on Maven panel on the right side of IntelliJ and choose icon reload</p>\n<p><a href=\"https://i.stack.imgur.com/rjZoO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rjZoO.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/osnlc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/osnlc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":3549768,"reputation":1538,"user_id":2964911,"display_name":"Iraj Hedayati"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1639539497,"creation_date":1638933237,"answer_id":70269486,"question_id":65677156,"body_markdown":"I had this problem too.\r\n\r\nYou can try \r\n\r\n1. From IntelliJ Idea, File &gt; Invalidate caches... and then restart\r\n2. Delete your ~/.m2/repositories directory \r\n\r\nThen try again.\r\n\r\nIf that didn&#39;t help, it could be related to [IDEA-274458][1] bug. A workaround is to run `mvn clean compile` which takes care of downloading artifacts from your command line and then &quot;re-import&quot; the project in IDE.\r\n\r\n\r\n  [1]: https://youtrack.jetbrains.com/issue/IDEA-274458?_ga=2.62773932.1292290141.1638932761-796816436.1635278519","title":"Could not transfer artifact from/to central IntelliJ","body":"<p>I had this problem too.</p>\n<p>You can try</p>\n<ol>\n<li>From IntelliJ Idea, File &gt; Invalidate caches... and then restart</li>\n<li>Delete your ~/.m2/repositories directory</li>\n</ol>\n<p>Then try again.</p>\n<p>If that didn't help, it could be related to <a href=\"https://youtrack.jetbrains.com/issue/IDEA-274458?_ga=2.62773932.1292290141.1638932761-796816436.1635278519\" rel=\"nofollow noreferrer\">IDEA-274458</a> bug. A workaround is to run <code>mvn clean compile</code> which takes care of downloading artifacts from your command line and then &quot;re-import&quot; the project in IDE.</p>\n"},{"tags":[],"owner":{"account_id":540110,"reputation":957,"user_id":268764,"display_name":"Makatun"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1640042473,"creation_date":1640042473,"answer_id":70429075,"question_id":65677156,"body_markdown":"Make sure Java version is set correctly for Maven:\r\nFile &gt; Settings &gt; Build Execution Deployment &gt; Build Tools &gt; Maven &gt; Importing &gt; JDK for importer:","title":"Could not transfer artifact from/to central IntelliJ","body":"<p>Make sure Java version is set correctly for Maven:\nFile &gt; Settings &gt; Build Execution Deployment &gt; Build Tools &gt; Maven &gt; Importing &gt; JDK for importer:</p>\n"},{"tags":[],"owner":{"account_id":6672550,"reputation":334,"user_id":5148256,"display_name":"Sajjad Serajzadeh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1645606974,"creation_date":1645606974,"answer_id":71234005,"question_id":65677156,"body_markdown":"This error in Intellij usually comes from bundled maven in the IntelliJ.\r\nif you want to use the maven inside the ide (either you can use it in the terminal) its better to force the IntelliJ use the installed maven instead of the bundled one.\r\nfor this you should go to:\r\n\r\n menu choose File -&gt; Setting -&gt; Build, Execution, Deployment -&gt;Build Tools -&gt; Maven.\r\n\r\nand change the &quot;maven home path:&quot; from &quot;bundled&quot; to the filepath of installed maven in this case for me is the: &quot;C:/Program Files (x86)/apache-maven-3.6.3&quot;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BESoC.png","title":"Could not transfer artifact from/to central IntelliJ","body":"<p>This error in Intellij usually comes from bundled maven in the IntelliJ.\nif you want to use the maven inside the ide (either you can use it in the terminal) its better to force the IntelliJ use the installed maven instead of the bundled one.\nfor this you should go to:</p>\n<p>menu choose File -&gt; Setting -&gt; Build, Execution, Deployment -&gt;Build Tools -&gt; Maven.</p>\n<p>and change the &quot;maven home path:&quot; from &quot;bundled&quot; to the filepath of installed maven in this case for me is the: &quot;C:/Program Files (x86)/apache-maven-3.6.3&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/BESoC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BESoC.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":48928,"reputation":9763,"user_id":145499,"accept_rate":88,"display_name":"inanutshellus"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654188827,"creation_date":1654188827,"answer_id":72479724,"question_id":65677156,"body_markdown":"I was getting the &quot;Could not transfer artifact [thing] from/to [repo] Transfer failed&quot; error too, and it turned out that I hadn&#39;t added my truststore config into IntelliJ&#39;s Maven config.\r\n\r\nSettings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Maven &gt; Runner \r\n\r\nUnder &quot;VM Options&quot; add:\r\n\r\n    -Djavax.net.ssl.trustStore=/path/to/your/truststore.jks","title":"Could not transfer artifact from/to central IntelliJ","body":"<p>I was getting the &quot;Could not transfer artifact [thing] from/to [repo] Transfer failed&quot; error too, and it turned out that I hadn't added my truststore config into IntelliJ's Maven config.</p>\n<p>Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Maven &gt; Runner</p>\n<p>Under &quot;VM Options&quot; add:</p>\n<pre><code>-Djavax.net.ssl.trustStore=/path/to/your/truststore.jks\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9491636,"reputation":160,"user_id":7056207,"display_name":"Amulya Koppula"},"score":0,"creation_date":1688729173,"post_id":72515159,"comment_id":135116282,"body_markdown":"I have added maven-compiler-plugin in my pom and issue resolved for me. Thanks","body":"I have added maven-compiler-plugin in my pom and issue resolved for me. Thanks"}],"tags":[],"owner":{"account_id":24525953,"reputation":11,"user_id":18438404,"display_name":"Unknown"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654505359,"creation_date":1654505222,"answer_id":72515159,"question_id":65677156,"body_markdown":"I was facing the same problem later I got to know that I have selected wrong version of maven, maven 3 was selected in setting-build  execution deployment- build tool- maven- maven home path. Then I selected maven 3.8 and my problem resolved. ","title":"Could not transfer artifact from/to central IntelliJ","body":"<p>I was facing the same problem later I got to know that I have selected wrong version of maven, maven 3 was selected in setting-build  execution deployment- build tool- maven- maven home path. Then I selected maven 3.8 and my problem resolved.</p>\n"},{"tags":[],"owner":{"account_id":18366375,"reputation":1,"user_id":13377316,"display_name":"Harpreet Siddhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655153013,"creation_date":1655153013,"answer_id":72608813,"question_id":65677156,"body_markdown":"Make sure you have the correct Java version selected here - For me, it was using the internal Java version and as soon as I selected the correct version(set as JAVA_HOME, it worked) \r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Um88g.png","title":"Could not transfer artifact from/to central IntelliJ","body":"<p>Make sure you have the correct Java version selected here - For me, it was using the internal Java version and as soon as I selected the correct version(set as JAVA_HOME, it worked)\n<a href=\"https://i.stack.imgur.com/Um88g.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":26152999,"reputation":11,"user_id":19840654,"display_name":"Denis Milovanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678760261,"creation_date":1678760261,"answer_id":75728549,"question_id":65677156,"body_markdown":"This link helped me:\r\nhttps://intellij-support.jetbrains.com/hc/en-us/community/posts/115000759324-Maven-SSL-switch-off\r\n\r\nthe trick was to add VM options: \r\n\r\n    -Dmaven.wagon.http.ssl.insecure=true\r\n    -Dmaven.wagon.http.ssl.allowall=true\r\n    -Dmaven.wagon.http.ssl.ignore.validity.dates=true\r\n\r\nThere are two places where you can add them, second place fixed the issue for me.\r\n\r\n    1. Settings -&gt; Maven -&gt; Runner -&gt; VM options   \r\n    2. Settings -&gt; Maven -&gt; Importing -&gt; VM options for importer","title":"Could not transfer artifact from/to central IntelliJ","body":"<p>This link helped me:\n<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000759324-Maven-SSL-switch-off\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000759324-Maven-SSL-switch-off</a></p>\n<p>the trick was to add VM options:</p>\n<pre><code>-Dmaven.wagon.http.ssl.insecure=true\n-Dmaven.wagon.http.ssl.allowall=true\n-Dmaven.wagon.http.ssl.ignore.validity.dates=true\n</code></pre>\n<p>There are two places where you can add them, second place fixed the issue for me.</p>\n<pre><code>1. Settings -&gt; Maven -&gt; Runner -&gt; VM options   \n2. Settings -&gt; Maven -&gt; Importing -&gt; VM options for importer\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1681754865,"post_id":75944951,"comment_id":134104901,"body_markdown":"mvn is available and working, evidenced by a dependency not being found.","body":"mvn is available and working, evidenced by a dependency not being found."}],"tags":[],"owner":{"account_id":27606647,"reputation":1,"user_id":21070618,"display_name":"Salman Mohamed"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1680741280,"creation_date":1680741280,"answer_id":75944951,"question_id":65677156,"body_markdown":"First check whether maven is installed by \r\n\r\n&gt; mvn -version\r\n\r\nIf it is not showing the version, please install and add the environment variables for maven.","title":"Could not transfer artifact from/to central IntelliJ","body":"<p>First check whether maven is installed by</p>\n<blockquote>\n<p>mvn -version</p>\n</blockquote>\n<p>If it is not showing the version, please install and add the environment variables for maven.</p>\n"}],"owner":{"account_id":2576749,"reputation":2384,"user_id":2234250,"accept_rate":65,"display_name":"Tung Vo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96136,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"accepted_answer_id":65694931,"answer_count":9,"score":13,"last_activity_date":1694512465,"creation_date":1610417836,"question_id":65677156,"body_markdown":"My Spring boot project using Maven.  \r\n\r\nWhen I build it using IntelliJ Community, I get the error: \r\n\r\n&gt; Could not transfer artifact com.jolira:hickory:pom:1.0.0 from/to central (https://repo.maven.apache.org/maven2): Transfer failed for https://repo.maven.apache.org/maven2/com/jolira/hickory/1.0.0/hickory-1.0.0.pom\r\n\r\nI can build this project success using cmd command line.\r\n\r\nMy IntelliJ Community version is:\r\n\r\n&gt; IntelliJ IDEA 2020.3.1 (Community Edition)  \r\n&gt; Build #IC-203.6682.168, built on December 29, 2020  \r\n&gt; Runtime version: 11.0.9.1+11-b1145.63 amd64  \r\n&gt; VM: OpenJDK 64-Bit Server VM by JetBrains s.r.o. Windows 10 10.0  \r\n&gt; GC: ParNew, ConcurrentMarkSweep  \r\n&gt; Memory: 1945M  \r\n&gt; Cores: 8  \r\n\r\nMy pom.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.3.5.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.super.banana&lt;/groupId&gt;\r\n    \r\n    \t&lt;!-- Always write artifactId with underscore _ --&gt;\r\n    \t&lt;artifactId&gt;banana_parent&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.0.0&lt;/version&gt;\r\n    \t&lt;packaging&gt;pom&lt;/packaging&gt;\r\n    \t&lt;name&gt;bananas_parent&lt;/name&gt;\r\n    \t&lt;description&gt;banana Parent&lt;/description&gt;\r\n    \t&lt;modules&gt;\r\n    \t\t&lt;module&gt;bananas-mt&lt;/module&gt;\r\n    \t\t&lt;module&gt;bananas-web&lt;/module&gt;\r\n    \t&lt;/modules&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;commons-io.version&gt;2.6&lt;/commons-io.version&gt;\r\n    \t\t&lt;commons-lang.version&gt;3.10&lt;/commons-lang.version&gt;\r\n    \t\t&lt;org.mapstruct.version&gt;1.3.1.Final&lt;/org.mapstruct.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t&lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\nHow do I fix this issue?","title":"Could not transfer artifact from/to central IntelliJ","body":"<p>My Spring boot project using Maven.</p>\n<p>When I build it using IntelliJ Community, I get the error:</p>\n<blockquote>\n<p>Could not transfer artifact com.jolira:hickory:pom:1.0.0 from/to central (<a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a>): Transfer failed for <a href=\"https://repo.maven.apache.org/maven2/com/jolira/hickory/1.0.0/hickory-1.0.0.pom\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2/com/jolira/hickory/1.0.0/hickory-1.0.0.pom</a></p>\n</blockquote>\n<p>I can build this project success using cmd command line.</p>\n<p>My IntelliJ Community version is:</p>\n<blockquote>\n<p>IntelliJ IDEA 2020.3.1 (Community Edition)<br />\nBuild #IC-203.6682.168, built on December 29, 2020<br />\nRuntime version: 11.0.9.1+11-b1145.63 amd64<br />\nVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o. Windows 10 10.0<br />\nGC: ParNew, ConcurrentMarkSweep<br />\nMemory: 1945M<br />\nCores: 8</p>\n</blockquote>\n<p>My pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.3.5.RELEASE&lt;/version&gt;\n        &lt;relativePath /&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.super.banana&lt;/groupId&gt;\n\n    &lt;!-- Always write artifactId with underscore _ --&gt;\n    &lt;artifactId&gt;banana_parent&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;name&gt;bananas_parent&lt;/name&gt;\n    &lt;description&gt;banana Parent&lt;/description&gt;\n    &lt;modules&gt;\n        &lt;module&gt;bananas-mt&lt;/module&gt;\n        &lt;module&gt;bananas-web&lt;/module&gt;\n    &lt;/modules&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;commons-io.version&gt;2.6&lt;/commons-io.version&gt;\n        &lt;commons-lang.version&gt;3.10&lt;/commons-lang.version&gt;\n        &lt;org.mapstruct.version&gt;1.3.1.Final&lt;/org.mapstruct.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>How do I fix this issue?</p>\n"},{"tags":["java","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694511895,"creation_date":1694511895,"answer_id":77087933,"question_id":77087745,"body_markdown":"According to [documentation][1]\r\n\r\nYou should do something like this: \r\n\r\n      @Bean\r\n      public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    \r\n           ...\r\n            IpAddressMatcher hasIpAddress = new IpAddressMatcher(&quot;127.0.0.1&quot;);\r\n            \r\n            request.authorizeHttpRequests(requestMatcherRegistry -&gt; {\r\n              requestMatcherRegistry.requestMatchers(&quot;/path/**&quot;).access(((authentication, object) -&gt;\r\n                  new AuthorizationDecision(hasIpAddress.matches(object.getRequest()))\r\n              ));\r\n              requestMatcherRegistry.anyRequest().denyAll();\r\n            });\r\n        ...\r\n        return request.build();\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/5.8/migration/servlet/authorization.html","title":"Allow only from localhost with Spring Boot 3","body":"<p>According to <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/authorization.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>You should do something like this:</p>\n<pre><code>  @Bean\n  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n\n       ...\n        IpAddressMatcher hasIpAddress = new IpAddressMatcher(&quot;127.0.0.1&quot;);\n        \n        request.authorizeHttpRequests(requestMatcherRegistry -&gt; {\n          requestMatcherRegistry.requestMatchers(&quot;/path/**&quot;).access(((authentication, object) -&gt;\n              new AuthorizationDecision(hasIpAddress.matches(object.getRequest()))\n          ));\n          requestMatcherRegistry.anyRequest().denyAll();\n        });\n    ...\n    return request.build();\n</code></pre>\n"}],"owner":{"account_id":7172249,"reputation":8197,"user_id":5479362,"accept_rate":48,"display_name":"9ilsdx 9rvj 0lo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77087933,"answer_count":1,"score":3,"last_activity_date":1694511895,"creation_date":1694510545,"question_id":77087745,"body_markdown":"I&#39;ve found a [cookbook][1] for allowing requests in Spring Boot 2:\r\n\r\n    @Override\r\n    public void configure(HttpSecurity http) throws Exception {\r\n            http.authorizeRequests()\r\n                .antMatchers(&quot;/**&quot;)\r\n                .access(&quot;hasIpAddress(&#39;127.0.0.1&#39;) or hasIpAddress(&#39;::1&#39;) or isAuthenticated()&quot;)  // 127.0.0.1 and localhost do not need to authenticate on any url\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .formLogin()\r\n                .permitAll();\r\n    }\r\n\r\nHowever, I&#39;m unable to find how to make it with Spring Boot 3, where there no `access` method that takes String, neither have I found corresponding `AuthorizationManager` implementation that could do what I need.\r\n\r\nHow do I allow localhost only in Spring Boot 3?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/65958780/spring-boot-security-how-to-skip-login-for-localhost","title":"Allow only from localhost with Spring Boot 3","body":"<p>I've found a <a href=\"https://stackoverflow.com/questions/65958780/spring-boot-security-how-to-skip-login-for-localhost\">cookbook</a> for allowing requests in Spring Boot 2:</p>\n<pre><code>@Override\npublic void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            .antMatchers(&quot;/**&quot;)\n            .access(&quot;hasIpAddress('127.0.0.1') or hasIpAddress('::1') or isAuthenticated()&quot;)  // 127.0.0.1 and localhost do not need to authenticate on any url\n            .anyRequest().authenticated()\n            .and()\n            .formLogin()\n            .permitAll();\n}\n</code></pre>\n<p>However, I'm unable to find how to make it with Spring Boot 3, where there no <code>access</code> method that takes String, neither have I found corresponding <code>AuthorizationManager</code> implementation that could do what I need.</p>\n<p>How do I allow localhost only in Spring Boot 3?</p>\n"},{"tags":["java","android","eclipse"],"comments":[{"owner":{"account_id":1914082,"reputation":20095,"user_id":1727092,"accept_rate":100,"display_name":"Pragnani"},"score":0,"creation_date":1363282290,"post_id":15416186,"comment_id":21798695,"body_markdown":"Check the compiler compliance for the library project","body":"Check the compiler compliance for the library project"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1363282349,"post_id":15416186,"comment_id":21798728,"body_markdown":"Should it read `import java.io.*;` ?","body":"Should it read <code>import java.io.*;</code> ?"},{"owner":{"account_id":1001196,"reputation":3907,"user_id":1016002,"accept_rate":56,"display_name":"IronBlossom"},"score":2,"creation_date":1386744307,"post_id":15416186,"comment_id":30664868,"body_markdown":"Just restarting Eclipse helped me! :P","body":"Just restarting Eclipse helped me! :P"}],"answers":[{"comments":[{"owner":{"account_id":302835,"reputation":2633,"user_id":611421,"accept_rate":70,"display_name":"Wouter"},"score":0,"creation_date":1363283022,"post_id":15416256,"comment_id":21799138,"body_markdown":"Thanks. That solved part of the problem - no idea why I have to add it, as other projects in the same workspace don&#39;t have it explicitly added and still work. Next problem is now the Google API which is explicitly present in other projects, not here, and I have some resolve problems there too.","body":"Thanks. That solved part of the problem - no idea why I have to add it, as other projects in the same workspace don&#39;t have it explicitly added and still work. Next problem is now the Google API which is explicitly present in other projects, not here, and I have some resolve problems there too."},{"owner":{"account_id":302835,"reputation":2633,"user_id":611421,"accept_rate":70,"display_name":"Wouter"},"score":1,"creation_date":1363283141,"post_id":15416256,"comment_id":21799205,"body_markdown":"OK that part solved too: Add Library; Android Classpath Container; select itself; OK. Bizarre.","body":"OK that part solved too: Add Library; Android Classpath Container; select itself; OK. Bizarre."},{"owner":{"account_id":6197504,"reputation":1160,"user_id":4828387,"display_name":"Anitha Manikandan"},"score":0,"creation_date":1443077601,"post_id":15416256,"comment_id":53349937,"body_markdown":"Thanks a lot. I was went mad in searching for this answer.","body":"Thanks a lot. I was went mad in searching for this answer."},{"owner":{"account_id":14995018,"reputation":5809,"user_id":10824697,"display_name":"Sandeep Amarnath"},"score":1,"creation_date":1583858951,"post_id":15416256,"comment_id":107251602,"body_markdown":"Also, it worked for me only after restarting the eclipse. So try that too after trying this if it doesn&#39;t work instantly. Thanks for the help though.","body":"Also, it worked for me only after restarting the eclipse. So try that too after trying this if it doesn&#39;t work instantly. Thanks for the help though."}],"tags":[],"owner":{"account_id":1260595,"reputation":7659,"user_id":1218985,"display_name":"1218985"},"comment_count":4,"down_vote_count":0,"up_vote_count":90,"is_accepted":true,"score":90,"last_activity_date":1525196475,"creation_date":1363282387,"answer_id":15416256,"question_id":15416186,"body_markdown":"Check two things\r\n\r\n**Eclipse preferences**\r\n\r\n 1. Check your Eclipse preferences: `Java` -&gt; `Installed JREs`\r\n 2. The one that you&#39;re using should be marked and it should be a JDK not just a JRE. \r\n\r\n**Project build path**\r\n\r\n 1. Also check your project&#39;s build path: Right click on the project -&gt; `Properties` -&gt; `Java Build Path`\r\n 2. Check in the `libraries` folder whether the JRE System Library is present and ...\r\n 3. If not add it using `Add library` -&gt; `JRE System Library` and then\r\n    select the correct one (from an installed JDK).","title":"Eclipse: &quot;The import java.io cannot be resolved&quot;","body":"<p>Check two things</p>\n\n<p><strong>Eclipse preferences</strong></p>\n\n<ol>\n<li>Check your Eclipse preferences: <code>Java</code> -> <code>Installed JREs</code></li>\n<li>The one that you're using should be marked and it should be a JDK not just a JRE. </li>\n</ol>\n\n<p><strong>Project build path</strong></p>\n\n<ol>\n<li>Also check your project's build path: Right click on the project -> <code>Properties</code> -> <code>Java Build Path</code></li>\n<li>Check in the <code>libraries</code> folder whether the JRE System Library is present and ...</li>\n<li>If not add it using <code>Add library</code> -> <code>JRE System Library</code> and then\nselect the correct one (from an installed JDK).</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1535921,"reputation":3060,"user_id":1431979,"display_name":"Pierre C"},"score":0,"creation_date":1616766438,"post_id":48460948,"comment_id":118113097,"body_markdown":"I am working on a complex open source project with multiple maven modules and closing and reopening them all  worked for me. Thanks.","body":"I am working on a complex open source project with multiple maven modules and closing and reopening them all  worked for me. Thanks."}],"tags":[],"owner":{"account_id":9560352,"reputation":199,"user_id":7101423,"display_name":"G. Werner"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1516967907,"creation_date":1516967907,"answer_id":48460948,"question_id":15416186,"body_markdown":"The following worked for me:\r\n\r\n-  Close the project and reopen it.\r\n\r\nOR\r\n\r\n-  Clean the project ( = rebuilds the buildpath and thereby reconfigures the JDK libraries).","title":"Eclipse: &quot;The import java.io cannot be resolved&quot;","body":"<p>The following worked for me:</p>\n\n<ul>\n<li>Close the project and reopen it.</li>\n</ul>\n\n<p>OR</p>\n\n<ul>\n<li>Clean the project ( = rebuilds the buildpath and thereby reconfigures the JDK libraries).</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":14725244,"reputation":482,"user_id":10634487,"display_name":"Bill Naylor"},"score":0,"creation_date":1637662967,"post_id":52495660,"comment_id":123880626,"body_markdown":"The *Force update of Snapshots/Releases* was what I was missing ... took ages to do update though!","body":"The <i>Force update of Snapshots/Releases</i> was what I was missing ... took ages to do update though!"}],"tags":[],"owner":{"account_id":10360329,"reputation":618,"user_id":7641017,"display_name":"Swastik Raj Ghosh"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1537870293,"creation_date":1537870293,"answer_id":52495660,"question_id":15416186,"body_markdown":"I am using Maven an this is what I did to re-solve --&gt;\r\n\r\n1. Right click on project\r\n2. Maven -&gt; Update Project. Make sure you choose &#39;Force update of Snapshots/Releases&#39;.\r\n3. Also check the &#39;clean project&#39;, &#39;update project conf from pom&#39; and &#39;refresh workspace resource options&#39; and click ok.","title":"Eclipse: &quot;The import java.io cannot be resolved&quot;","body":"<p>I am using Maven an this is what I did to re-solve --></p>\n\n<ol>\n<li>Right click on project</li>\n<li>Maven -> Update Project. Make sure you choose 'Force update of Snapshots/Releases'.</li>\n<li>Also check the 'clean project', 'update project conf from pom' and 'refresh workspace resource options' and click ok.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8497820,"reputation":71,"user_id":6371876,"display_name":"Venkat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549300353,"creation_date":1549300353,"answer_id":54521105,"question_id":15416186,"body_markdown":"I was missing the JRE Systems Library in my Project Tree.\r\nAnd navigating to Projects&#39; Build Path and &#39;Add(ing) Library&#39; worked!","title":"Eclipse: &quot;The import java.io cannot be resolved&quot;","body":"<p>I was missing the JRE Systems Library in my Project Tree.\nAnd navigating to Projects' Build Path and 'Add(ing) Library' worked!</p>\n"},{"tags":[],"owner":{"account_id":20561213,"reputation":160,"user_id":15091679,"display_name":"Tim Lammarsch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662222201,"creation_date":1662222201,"answer_id":73593771,"question_id":15416186,"body_markdown":"I just ran into this problem with Eclipse 2022-6 and java-17-openjdk-amd64. I just appeared during editing in another file, the same code had worked before.\r\n\r\nFor me, all settings were correct and none of the above tricks worked. What I then did was completely removing the import command `import java.io.Closeable;`, saving the file, adding the same import command back at the same place, and saving again. The error disappeared.","title":"Eclipse: &quot;The import java.io cannot be resolved&quot;","body":"<p>I just ran into this problem with Eclipse 2022-6 and java-17-openjdk-amd64. I just appeared during editing in another file, the same code had worked before.</p>\n<p>For me, all settings were correct and none of the above tricks worked. What I then did was completely removing the import command <code>import java.io.Closeable;</code>, saving the file, adding the same import command back at the same place, and saving again. The error disappeared.</p>\n"}],"owner":{"account_id":302835,"reputation":2633,"user_id":611421,"accept_rate":70,"display_name":"Wouter"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120220,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":15416256,"answer_count":5,"score":35,"last_activity_date":1694511742,"creation_date":1363282207,"question_id":15416186,"body_markdown":"I have several Android projects in Eclipse, and all is fine, except one (a library) that can not resolve any imports.\r\n\r\nThe java.io imports do resolve fine in other Android projects in the same workspace, and previously (I haven&#39;t used it for over a year) this library worked fine, too. \r\n\r\nAny ideas?","title":"Eclipse: &quot;The import java.io cannot be resolved&quot;","body":"<p>I have several Android projects in Eclipse, and all is fine, except one (a library) that can not resolve any imports.</p>\n\n<p>The java.io imports do resolve fine in other Android projects in the same workspace, and previously (I haven't used it for over a year) this library worked fine, too. </p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","maven","selenium-webdriver","cucumber","cucumber-jvm"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":1,"creation_date":1694731401,"post_id":77081479,"comment_id":135933742,"body_markdown":"Short answer: No, it is not possible.","body":"Short answer: No, it is not possible."},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":1,"creation_date":1694767701,"post_id":77081479,"comment_id":135937398,"body_markdown":"No option for now. You may try like this, generate json reports and club them after run then convert them into HTML.","body":"No option for now. You may try like this, generate json reports and club them after run then convert them into HTML."}],"owner":{"account_id":24894125,"reputation":27,"user_id":18765607,"display_name":"Jano Marek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694511677,"creation_date":1694433983,"question_id":77081479,"body_markdown":"I&#39;m a beginner in test automation, and I have a question. Is it possible to rerun a test, for example, 2 times right after it fails? I want to have just one report. I tried using a rerun plugin, but I needed to configure it with 2 test runners, and then there were 2 separate sets of results. Another thing I tried was adding &lt;rerunFailingTestsCount&gt;2&lt;/rerunFailingTestsCount&gt; in the pom.xml build, but once again, there were only 2 reports via 2 profiles, or if I did it in 1 profile, it would overwrite the old results. So my question is, is there any correct approach to merge these results together or just rerun it right after a failure and then continue?\r\nStack: Selenium,Java,Cucumber,Maven\r\nIm using basic testRunner:\r\n\r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(\r\n            features = &quot;src/test/resources/features&quot;,\r\n            glue = &quot;stepDefinitions&quot;,\r\n            monochrome = true,\r\n            tags =&quot;@cronjob-version&quot;,\r\n            plugin = {\r\n                    &quot;pretty&quot;,\r\n                    &quot;json:target/CucumberTestReports/CucumberTestReport.json&quot;,\r\n                    &quot;html:target/CucumberTestReports/CucumberTestReport.html&quot;,\r\n                    &quot;junit:target/CucumberTestReports/CucumberTestReport.xml&quot;,\r\n                    &quot;rerun:target/failedrun.txt&quot;\r\n    \r\n            }\r\n    \r\n    )\r\n    public class testRunner {\r\n    \r\n    \r\n    \r\n    }\r\n\r\nBuild: \r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.2&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n        &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n        &lt;includes&gt;\r\n            &lt;include&gt;testRunners/testRunner.java&lt;/include&gt;\r\n        &lt;/includes&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Is it possible to rerun CucumberJVM test right after fail?","body":"<p>I'm a beginner in test automation, and I have a question. Is it possible to rerun a test, for example, 2 times right after it fails? I want to have just one report. I tried using a rerun plugin, but I needed to configure it with 2 test runners, and then there were 2 separate sets of results. Another thing I tried was adding 2 in the pom.xml build, but once again, there were only 2 reports via 2 profiles, or if I did it in 1 profile, it would overwrite the old results. So my question is, is there any correct approach to merge these results together or just rerun it right after a failure and then continue?\nStack: Selenium,Java,Cucumber,Maven\nIm using basic testRunner:</p>\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(\n        features = &quot;src/test/resources/features&quot;,\n        glue = &quot;stepDefinitions&quot;,\n        monochrome = true,\n        tags =&quot;@cronjob-version&quot;,\n        plugin = {\n                &quot;pretty&quot;,\n                &quot;json:target/CucumberTestReports/CucumberTestReport.json&quot;,\n                &quot;html:target/CucumberTestReports/CucumberTestReport.html&quot;,\n                &quot;junit:target/CucumberTestReports/CucumberTestReport.xml&quot;,\n                &quot;rerun:target/failedrun.txt&quot;\n\n        }\n\n)\npublic class testRunner {\n\n\n\n}\n</code></pre>\n<p>Build:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.1.2&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n        &lt;includes&gt;\n            &lt;include&gt;testRunners/testRunner.java&lt;/include&gt;\n        &lt;/includes&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":1,"creation_date":1693831221,"post_id":77037404,"comment_id":135808006,"body_markdown":"I know opencv has such a function - its called Canny: https://docs.opencv.org/4.x/da/d5c/tutorial_canny_detector.html","body":"I know opencv has such a function - its called Canny: <a href=\"https://docs.opencv.org/4.x/da/d5c/tutorial_canny_detector.html\" rel=\"nofollow noreferrer\">docs.opencv.org/4.x/da/d5c/tutorial_canny_detector.html</a>"},{"owner":{"account_id":26267089,"reputation":49,"user_id":19937474,"display_name":"viswareddy"},"score":0,"creation_date":1693841168,"post_id":77037404,"comment_id":135809986,"body_markdown":"can we without using OpenCV?","body":"can we without using OpenCV?"},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":2,"creation_date":1693851383,"post_id":77037404,"comment_id":135811628,"body_markdown":"If you want to write it entirely by yourself then it might be too broad question to ask here. If you want to use specific API then I suggest you add appropriate tag to your question.","body":"If you want to write it entirely by yourself then it might be too broad question to ask here. If you want to use specific API then I suggest you add appropriate tag to your question."}],"owner":{"account_id":26267089,"reputation":49,"user_id":19937474,"display_name":"viswareddy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694511558,"creation_date":1693827593,"question_id":77037404,"body_markdown":"I want to create outline sketch of the person like this. Is there any API? \r\n\r\n[![enter image description here](https://i.stack.imgur.com/aIxjq.jpg)](https://i.stack.imgur.com/aIxjq.jpg)\r\n\r\n\r\nI&#39;m detecting a person and cropping only the person and also getting foreground but I do not have idea how to draw that person&#39;s outline like the shown image anyone have idea how to do it?\r\n\r\n\r\n\r\n    private void createImageTransactor(Bitmap image) {\r\n        MLImageSegmentationSetting setting = new MLImageSegmentationSetting.Factory().setAnalyzerType(MLImageSegmentationSetting.BODY_SEG).create();\r\n        this.analyzer = MLAnalyzerFactory.getInstance().getImageSegmentationAnalyzer(setting);\r\n        if (this.isChosen(image)) {\r\n            MLFrame mlFrame = new MLFrame.Creator().setBitmap(image).create();\r\n            Task&lt;MLImageSegmentation&gt; task = this.analyzer.asyncAnalyseFrame(mlFrame);\r\n            task.addOnSuccessListener(new OnSuccessListener&lt;MLImageSegmentation&gt;() {\r\n                @Override\r\n                public void onSuccess(MLImageSegmentation mlImageSegmentationResults) {\r\n\r\n                    if (mlImageSegmentationResults != null) {\r\n                        try {\r\n                            cutImage = mlImageSegmentationResults.getForeground();\r\n\r\n                           \r\n                        }catch (Exception e){\r\n\r\n                        }\r\n\r\n                    } else {\r\n                        Toast.makeText(getContext() ,getResources().getString(R.string.Fail), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(Exception e) {\r\n                    Toast.makeText(getContext() ,getResources().getString(R.string.Fail), Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n        } else {\r\n            Toast.makeText(getContext(), R.string.txt_not_detect_human, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n\r\n\r\n ","title":"How to draw person outline sketch java android","body":"<p>I want to create outline sketch of the person like this. Is there any API?</p>\n<p><a href=\"https://i.stack.imgur.com/aIxjq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aIxjq.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I'm detecting a person and cropping only the person and also getting foreground but I do not have idea how to draw that person's outline like the shown image anyone have idea how to do it?</p>\n<pre><code>private void createImageTransactor(Bitmap image) {\n    MLImageSegmentationSetting setting = new MLImageSegmentationSetting.Factory().setAnalyzerType(MLImageSegmentationSetting.BODY_SEG).create();\n    this.analyzer = MLAnalyzerFactory.getInstance().getImageSegmentationAnalyzer(setting);\n    if (this.isChosen(image)) {\n        MLFrame mlFrame = new MLFrame.Creator().setBitmap(image).create();\n        Task&lt;MLImageSegmentation&gt; task = this.analyzer.asyncAnalyseFrame(mlFrame);\n        task.addOnSuccessListener(new OnSuccessListener&lt;MLImageSegmentation&gt;() {\n            @Override\n            public void onSuccess(MLImageSegmentation mlImageSegmentationResults) {\n\n                if (mlImageSegmentationResults != null) {\n                    try {\n                        cutImage = mlImageSegmentationResults.getForeground();\n\n                       \n                    }catch (Exception e){\n\n                    }\n\n                } else {\n                    Toast.makeText(getContext() ,getResources().getString(R.string.Fail), Toast.LENGTH_SHORT).show();\n                }\n            }\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(Exception e) {\n                Toast.makeText(getContext() ,getResources().getString(R.string.Fail), Toast.LENGTH_SHORT).show();\n            }\n        });\n    } else {\n        Toast.makeText(getContext(), R.string.txt_not_detect_human, Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n"},{"tags":["java","jstl"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1511914277,"post_id":47542811,"comment_id":82043115,"body_markdown":"Have you studied the other [similar Questions](https://duckduckgo.com/?q=function+compareTo+must+be+used+with+a+prefix+when+a+default+namespace+is+not+specified.++&amp;t=ffip&amp;ia=qa)?","body":"Have you studied the other <a href=\"https://duckduckgo.com/?q=function+compareTo+must+be+used+with+a+prefix+when+a+default+namespace+is+not+specified.++&amp;t=ffip&amp;ia=qa\" rel=\"nofollow noreferrer\">similar Questions</a>?"},{"owner":{"account_id":1714518,"reputation":1611,"user_id":1571903,"accept_rate":72,"display_name":"Ryan Griffith"},"score":0,"creation_date":1511915955,"post_id":47542811,"comment_id":82043547,"body_markdown":"@BasilBourque, Extensively. None of the examples work for me without giving me the exception message that I&#39;ve listed.","body":"@BasilBourque, Extensively. None of the examples work for me without giving me the exception message that I&#39;ve listed."}],"answers":[{"tags":[],"owner":{"account_id":3899224,"reputation":425,"user_id":3227457,"display_name":"Gerrit Griebel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694510958,"creation_date":1694510958,"answer_id":77087812,"question_id":47542811,"body_markdown":"Works for me, but does not feel right:\r\n\r\n    &lt;c:if test=&quot;${total eq &#39;0.0&#39;}&quot;&gt;","title":"Comparing BigDecimal to 0 in JSTL","body":"<p>Works for me, but does not feel right:</p>\n<pre><code>&lt;c:if test=&quot;${total eq '0.0'}&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":1714518,"reputation":1611,"user_id":1571903,"accept_rate":72,"display_name":"Ryan Griffith"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694510958,"creation_date":1511912676,"question_id":47542811,"body_markdown":"Excuse the basic question, I&#39;m crash-coursing myself on Java/JSTL to fix an issue for a client and have not been able to quickly find the answer to something I&#39;m dealing with....\r\n\r\nI have a JSP page which uses the `&lt;c:if&gt;` tag to compare a variable to the constant value of `0`. This is always returning `False` for me. I.e.\r\n\r\n    &lt;c:set var=&quot;total&quot; value=&quot;0&quot; /&gt;\r\n\t&lt;c:forEach items=&quot;${parentItem.children}&quot; var=&quot;child&quot;&gt;\r\n\t\t&lt;c:set var=&quot;total&quot; value=&quot;${total+child.revenue}&quot; /&gt;\r\n\t\t&lt;c:if test=&quot;${total == 0}&quot;&gt;\r\n\t\t\tIt is zero.\r\n\t\t&lt;/c:if&gt;\r\n\t&lt;/c:forEach&gt;\r\n\r\nFrom my understanding, I have to explicitly compare like-types, however when attempting to do something like this, I get an error:\r\n\r\n    &lt;c:if test=&quot;${total.compareTo(BigDecimal.ZERO) == 0}&quot;&gt;\r\n        -\r\n    &lt;/c:if&gt;\r\n\r\nThe error is: `The function compareTo must be used with a prefix when a default namespace is not specified`.\r\n\r\nI&#39;m using JSTL 1.2.","title":"Comparing BigDecimal to 0 in JSTL","body":"<p>Excuse the basic question, I'm crash-coursing myself on Java/JSTL to fix an issue for a client and have not been able to quickly find the answer to something I'm dealing with....</p>\n\n<p>I have a JSP page which uses the <code>&lt;c:if&gt;</code> tag to compare a variable to the constant value of <code>0</code>. This is always returning <code>False</code> for me. I.e.</p>\n\n<pre><code>&lt;c:set var=\"total\" value=\"0\" /&gt;\n&lt;c:forEach items=\"${parentItem.children}\" var=\"child\"&gt;\n    &lt;c:set var=\"total\" value=\"${total+child.revenue}\" /&gt;\n    &lt;c:if test=\"${total == 0}\"&gt;\n        It is zero.\n    &lt;/c:if&gt;\n&lt;/c:forEach&gt;\n</code></pre>\n\n<p>From my understanding, I have to explicitly compare like-types, however when attempting to do something like this, I get an error:</p>\n\n<pre><code>&lt;c:if test=\"${total.compareTo(BigDecimal.ZERO) == 0}\"&gt;\n    -\n&lt;/c:if&gt;\n</code></pre>\n\n<p>The error is: <code>The function compareTo must be used with a prefix when a default namespace is not specified</code>.</p>\n\n<p>I'm using JSTL 1.2.</p>\n"},{"tags":["java","spring","x509certificate","boot"],"owner":{"account_id":28633110,"reputation":11,"user_id":21923718,"display_name":"Rocken"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694510927,"creation_date":1694510927,"question_id":77087807,"body_markdown":"I&#39;m developing a Spring Boot project in which someone could sign in using it&#39;s certificate. Most of the tutorials and posts I&#39;ve read and followed talk about client-authentication in the whole site while I only want authentication to happen when accessing secured resources (whose URLs are `secure/**`). There are some posts similar to my topic but haven&#39;t guided me in the right direction yet.\r\n\r\nI have already setted up SSL on the server and works fine. Client auth also works as expected but on every page.\r\n\r\nIs it possible to run client-auth on just some pages but not on others? I want the user to be autheticated using it&#39;s certificate on certain pages while others doesn&#39;t need any kind of client authentication.\r\n\r\nThis is the application.properties for my project:\r\n\r\n```\r\nserver.ssl.enabled=true\r\n\r\nserver.ssl.key-store=classpath:****\r\nserver.ssl.key-store-password=****\r\nserver.ssl.key-password=****\r\nserver.ssl.key-alias=localhost\r\n\r\n\r\nserver.ssl.trust-store=****\r\nserver.ssl.trust-store-password=****\r\n\r\nserver.ssl.client-auth=want\r\n\r\nserver.port=8443\r\n```\r\n\r\nAlso, this is the config I used for authentication:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfig {\r\n\t\t\r\n\t@Bean\r\n\tpublic SecurityFilterChain certificateFilterChain(HttpSecurity http) throws Exception{\r\n\t\t\r\n        http\r\n        \t.authorizeRequests()\r\n        \t\t.antMatchers(&quot;/user/**&quot;)\r\n        \t\t\t.permitAll()\r\n        \t\t.antMatchers(&quot;/seguro/**&quot;)\r\n        \t\t\t.authenticated()\r\n        \t\t.and()\r\n        \t\t.x509()\r\n        \t\t\t.subjectPrincipalRegex(&quot;CN=(.*?)(?:,|$)&quot;)\r\n        \t\t\t.userDetailsService(userDetailsService());\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic UserDetailsService userDetailsService() {\r\n\t\treturn new UserDetailsService() {\r\n\t\t\t@Override\r\n\t\t\tpublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n\t\t\t\tSystem.out.println(&quot;USERNAME -&gt; &quot; + username);\r\n\t\t\t\tif (username.contains(&quot;Bob&quot;)) {\r\n\t\t\t\t\treturn new User(username, &quot;&quot;, AuthorityUtils.commaSeparatedStringToAuthorityList(&quot;ROLE_USER&quot;));\r\n\t\t\t\t}\r\n\t\t\t\tthrow new UsernameNotFoundException(&quot;User not found!&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n}\r\n```\r\n\r\n","title":"Excluding x509 authentication from specific URLs","body":"<p>I'm developing a Spring Boot project in which someone could sign in using it's certificate. Most of the tutorials and posts I've read and followed talk about client-authentication in the whole site while I only want authentication to happen when accessing secured resources (whose URLs are <code>secure/**</code>). There are some posts similar to my topic but haven't guided me in the right direction yet.</p>\n<p>I have already setted up SSL on the server and works fine. Client auth also works as expected but on every page.</p>\n<p>Is it possible to run client-auth on just some pages but not on others? I want the user to be autheticated using it's certificate on certain pages while others doesn't need any kind of client authentication.</p>\n<p>This is the application.properties for my project:</p>\n<pre><code>server.ssl.enabled=true\n\nserver.ssl.key-store=classpath:****\nserver.ssl.key-store-password=****\nserver.ssl.key-password=****\nserver.ssl.key-alias=localhost\n\n\nserver.ssl.trust-store=****\nserver.ssl.trust-store-password=****\n\nserver.ssl.client-auth=want\n\nserver.port=8443\n</code></pre>\n<p>Also, this is the config I used for authentication:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfig {\n        \n    @Bean\n    public SecurityFilterChain certificateFilterChain(HttpSecurity http) throws Exception{\n        \n        http\n            .authorizeRequests()\n                .antMatchers(&quot;/user/**&quot;)\n                    .permitAll()\n                .antMatchers(&quot;/seguro/**&quot;)\n                    .authenticated()\n                .and()\n                .x509()\n                    .subjectPrincipalRegex(&quot;CN=(.*?)(?:,|$)&quot;)\n                    .userDetailsService(userDetailsService());\n        return http.build();\n    }\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return new UserDetailsService() {\n            @Override\n            public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n                System.out.println(&quot;USERNAME -&gt; &quot; + username);\n                if (username.contains(&quot;Bob&quot;)) {\n                    return new User(username, &quot;&quot;, AuthorityUtils.commaSeparatedStringToAuthorityList(&quot;ROLE_USER&quot;));\n                }\n                throw new UsernameNotFoundException(&quot;User not found!&quot;);\n            }\n        };\n    }\n\n}\n</code></pre>\n"},{"tags":["java","docker","kubernetes","apache-flink"],"comments":[{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1694475398,"post_id":77084892,"comment_id":135893047,"body_markdown":"It seems like that entrypoint script also requires a Dockerfile `CMD`.  It looks like you might be overriding the `args:` in your Deployment spec (consider [edit]ing the question to replace the `kubectl describe` output with the YAML input) but I might guess the first word of that command is being lost when you `shift` it away.","body":"It seems like that entrypoint script also requires a Dockerfile <code>CMD</code>.  It looks like you might be overriding the <code>args:</code> in your Deployment spec (consider <a href=\"https://stackoverflow.com/posts/77084892/edit\">edit</a>ing the question to replace the <code>kubectl describe</code> output with the YAML input) but I might guess the first word of that command is being lost when you <code>shift</code> it away."},{"owner":{"account_id":15106683,"reputation":143,"user_id":10902172,"display_name":"yokus"},"score":0,"creation_date":1694498725,"post_id":77084892,"comment_id":135894799,"body_markdown":"Thank you for your comment, added yaml file. I&#39;m not familiar with the `shift` away term.","body":"Thank you for your comment, added yaml file. I&#39;m not familiar with the <code>shift</code> away term."},{"owner":{"account_id":15106683,"reputation":143,"user_id":10902172,"display_name":"yokus"},"score":0,"creation_date":1694510648,"post_id":77084892,"comment_id":135896858,"body_markdown":"Thank you for your time David, solved it and added solution as answer below.","body":"Thank you for your time David, solved it and added solution as answer below."}],"answers":[{"tags":[],"owner":{"account_id":15106683,"reputation":143,"user_id":10902172,"display_name":"yokus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694510619,"creation_date":1694510619,"answer_id":77087755,"question_id":77084892,"body_markdown":"Problem has few layers into it:\r\n\r\nFirst, we simply don&#39;t use any custom docker entrypoint sh script to not override the default one in flink:1.17 image.\r\n\r\nSecond, to not face any exception such as below:\r\n`org.apache.flink.util.FlinkException: Could not load the provided entrypoint class` make sure you copy your jar file to a valid location in the image directory structure.\r\n\r\nThird, we follow [this](https://blogmilind.wordpress.com/2018/01/30/running-local-docker-images-in-kubernetes/) tutorial if we want to use kubernetes with local docker images (assuming we use minikube).\r\n\r\nHere are the final configs we use:\r\n\r\n```Dockerfile\r\nFROM openjdk:11 AS job-build\r\nWORKDIR /home/gradle/app/\r\n\r\nCOPY build.gradle settings.gradle ./\r\nCOPY gradlew ./\r\nCOPY gradle gradle\r\n# To cause download and cache of verifyGoogleJavaFormat dependency\r\nRUN echo &quot;class Dummy {}&quot; &gt; Dummy.java\r\n# download dependencies\r\nRUN ./gradlew build\r\nCOPY . .\r\nRUN rm Dummy.java\r\nRUN ./gradlew build\r\nRUN mv /home/gradle/app/build/libs/relynk-rule-calculation_v1*-deploy.jar /home/gradle/app/build/libs/relynk-rule-calculation_v1-deploy.jar\r\n\r\nnotes/flink-1.15/#jdk-upgrade\r\nFROM flink:1.17\r\n\r\nCOPY --from=job-build /home/gradle/app/build/libs/relynk-rule-calculation_v1-deploy.jar /opt/flink/job.jar\r\n\r\nUSER flink\r\nEXPOSE 8081 6123\r\n```\r\n\r\n```yaml\r\n\r\napiVersion: flink.apache.org/v1beta1\r\nkind: FlinkDeployment\r\nmetadata:\r\n  name: basic-example-w-file-path\r\nspec:\r\n  image: rule-calculation:v2\r\n  imagePullPolicy: Never\r\n  \r\n  flinkVersion: v1_17\r\n  flinkConfiguration:\r\n    taskmanager.numberOfTaskSlots: &quot;2&quot;\r\n\r\n  serviceAccount: flink\r\n  jobManager:\r\n    resource:\r\n      memory: &quot;2048m&quot;\r\n      cpu: 1\r\n  taskManager:\r\n    resource:\r\n      memory: &quot;2048m&quot;\r\n      cpu: 1\r\n  job:\r\n    jarURI: local:///opt/flink/job.jar\r\n    parallelism: 2\r\n    upgradeMode: stateless\r\n    state: running\r\n\r\n```\r\n","title":"flink kubernetes operator /docker-entrypoint default command","body":"<p>Problem has few layers into it:</p>\n<p>First, we simply don't use any custom docker entrypoint sh script to not override the default one in flink:1.17 image.</p>\n<p>Second, to not face any exception such as below:\n<code>org.apache.flink.util.FlinkException: Could not load the provided entrypoint class</code> make sure you copy your jar file to a valid location in the image directory structure.</p>\n<p>Third, we follow <a href=\"https://blogmilind.wordpress.com/2018/01/30/running-local-docker-images-in-kubernetes/\" rel=\"nofollow noreferrer\">this</a> tutorial if we want to use kubernetes with local docker images (assuming we use minikube).</p>\n<p>Here are the final configs we use:</p>\n<pre><code>FROM openjdk:11 AS job-build\nWORKDIR /home/gradle/app/\n\nCOPY build.gradle settings.gradle ./\nCOPY gradlew ./\nCOPY gradle gradle\n# To cause download and cache of verifyGoogleJavaFormat dependency\nRUN echo &quot;class Dummy {}&quot; &gt; Dummy.java\n# download dependencies\nRUN ./gradlew build\nCOPY . .\nRUN rm Dummy.java\nRUN ./gradlew build\nRUN mv /home/gradle/app/build/libs/relynk-rule-calculation_v1*-deploy.jar /home/gradle/app/build/libs/relynk-rule-calculation_v1-deploy.jar\n\nnotes/flink-1.15/#jdk-upgrade\nFROM flink:1.17\n\nCOPY --from=job-build /home/gradle/app/build/libs/relynk-rule-calculation_v1-deploy.jar /opt/flink/job.jar\n\nUSER flink\nEXPOSE 8081 6123\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>\napiVersion: flink.apache.org/v1beta1\nkind: FlinkDeployment\nmetadata:\n  name: basic-example-w-file-path\nspec:\n  image: rule-calculation:v2\n  imagePullPolicy: Never\n  \n  flinkVersion: v1_17\n  flinkConfiguration:\n    taskmanager.numberOfTaskSlots: &quot;2&quot;\n\n  serviceAccount: flink\n  jobManager:\n    resource:\n      memory: &quot;2048m&quot;\n      cpu: 1\n  taskManager:\n    resource:\n      memory: &quot;2048m&quot;\n      cpu: 1\n  job:\n    jarURI: local:///opt/flink/job.jar\n    parallelism: 2\n    upgradeMode: stateless\n    state: running\n\n</code></pre>\n"}],"owner":{"account_id":15106683,"reputation":143,"user_id":10902172,"display_name":"yokus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694510797,"creation_date":1694467939,"question_id":77084892,"body_markdown":"I am trying to do simple flink deployment using flink kubernetes operator but default or docker-entrypoint.sh I use returns following error:\r\n\r\nHere is YAML file I use:\r\n```yaml\r\napiVersion: flink.apache.org/v1beta1\r\nkind: FlinkDeployment\r\nmetadata:\r\n  name: basic-example-w-file-path\r\nspec:\r\n  image: flink-job-fraud-demo:latest\r\n\r\n  flinkVersion: v1_17\r\n  flinkConfiguration:\r\n    taskmanager.numberOfTaskSlots: &quot;2&quot;\r\n    # kubernetes.entry.path: &quot;/docker-entrypoint.sh&quot;\r\n\r\n  serviceAccount: flink\r\n  jobManager:\r\n    resource:\r\n      memory: &quot;2048m&quot;\r\n      cpu: 1\r\n  taskManager:\r\n    resource:\r\n      memory: &quot;2048m&quot;\r\n      cpu: 1\r\n  job:\r\n    jarURI: local:///home/gradle/app/lib/job.jar\r\n    parallelism: 2\r\n    upgradeMode: stateless\r\n    state: running\r\n```\r\n\r\n\r\n```bash\r\nkubectl logs -f pod/basic-example-w-file-path-6d48fdc87b-xlbcm\r\n\r\noutput:\r\n\r\n/docker-entrypoint.sh: line 27: exec: kubernetes-jobmanager.sh kubernetes-application : not found\r\n\r\n\r\nkubectl get all\r\n\r\noutput:\r\n\r\nNAME                                             READY   STATUS             RESTARTS        AGE\r\npod/basic-example-w-file-path-6d48fdc87b-xlbcm   0/1     CrashLoopBackOff   1 (2s ago)      4s\r\npod/flink-kubernetes-operator-55f4bd64-55hd4     2/2     Running            4 (5h28m ago)   10h\r\n\r\n......\r\n\r\n```\r\n\r\n\r\nBy following [this](https://stackoverflow.com/questions/73607675/apache-flink-kubernetes-operator-how-to-override-the-docker-entrypoint) question and its accepted answer, I overwrite [kubernetes entrypath](https://nightlies.apache.org/flink/flink-docs-master/docs/deployment/config/#kubernetes-entry-path). \r\n\r\nHowever, this time I get following from kubectl describe:\r\n\r\n```kubectl describe pod basic-example-w-file```\r\n```\r\nContainers:\r\n  flink-main-container:\r\n    Container ID:  docker://47698da60bfdfd93c82e4677ae87121abb90b5cfeaeb2d9aa0acd078a7d39c50\r\n    Image:         flink-job-fraud-demo:latest\r\n    Image ID:      docker://sha256:57fdf7e046939c42e978b16f7fb85855fd431fc8d02f99c29a0b4e14587233d8\r\n    Ports:         8081/TCP, 6123/TCP, 6124/TCP\r\n    Host Ports:    0/TCP, 0/TCP, 0/TCP\r\n    Command:\r\n      /custom-docker-entrypoint.sh\r\n    Args:\r\n      bash\r\n      -c\r\n      kubernetes-jobmanager.sh kubernetes-application\r\n    State:          Waiting\r\n      Reason:       CrashLoopBackOff\r\n    Last State:     Terminated\r\n      Reason:       ContainerCannotRun\r\n      Message:      failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: exec: &quot;/custom-docker-entrypoint.sh&quot;: stat /custom-docker-entrypoint.sh: no such file or directory: unknown\r\n      Exit Code:    127\r\n```\r\n\r\nDockerfile I use:\r\n```\r\nFROM openjdk:11 AS job-build\r\nWORKDIR /home/gradle/app/\r\n\r\nCOPY build.gradle settings.gradle ./\r\nCOPY gradlew ./\r\nCOPY gradle gradle\r\n# To cause download and cache of verifyGoogleJavaFormat dependency\r\nRUN echo &quot;class Dummy {}&quot; &gt; Dummy.java\r\n# download dependencies\r\nRUN ./gradlew build\r\nCOPY . .\r\nRUN rm Dummy.java\r\nRUN ./gradlew build\r\nRUN mv /home/gradle/app/build/libs/rrr-rule-calculation_v1*-deploy.jar /home/gradle/app/build/libs/rrr-rule-calculation_v1-deploy.jar\r\n\r\n\r\n/release-notes/flink-1.15/#jdk-upgrade\r\nFROM flink:1.17\r\n\r\nCOPY --from=job-build /home/gradle/app/build/libs/rrr-rule-calculation_v1-deploy.jar lib/job.jar\r\nCOPY custom-docker-entrypoint.sh /\r\n\r\nUSER flink\r\nEXPOSE 8081 6123\r\nENTRYPOINT [&quot;/custom-docker-entrypoint.sh&quot;]\r\n```\r\n\r\n\r\nand custom-docker-entrypoint.sh (docker-entrypoint.sh for the first case) I use:\r\n```\r\n#!/bin/bash\r\n\r\n# Ported from Apache Flink project\r\n\r\n### If unspecified, the hostname of the container is taken as the JobManager address\r\nFLINK_HOME=${FLINK_HOME:-&quot;/opt/flink/bin&quot;}\r\n\r\nJOB_CLUSTER=&quot;job-cluster&quot;\r\nTASK_MANAGER=&quot;task-manager&quot;\r\n\r\nCMD=&quot;$1&quot;\r\nshift;\r\n\r\nif [ &quot;${CMD}&quot; == &quot;--help&quot; -o &quot;${CMD}&quot; == &quot;-h&quot; ]; then\r\n    echo &quot;Usage: $(basename $0) (${JOB_CLUSTER}|${TASK_MANAGER})&quot;\r\n    exit 0\r\nelif [ &quot;${CMD}&quot; == &quot;${JOB_CLUSTER}&quot; -o &quot;${CMD}&quot; == &quot;${TASK_MANAGER}&quot; ]; then\r\n    echo &quot;Starting the ${CMD}&quot;\r\n\r\n    if [ &quot;${CMD}&quot; == &quot;${TASK_MANAGER}&quot; ]; then\r\n        exec $FLINK_HOME/bin/taskmanager.sh start-foreground &quot;$@&quot;\r\n    else\r\n        exec $FLINK_HOME/bin/standalone-job.sh start-foreground &quot;$@&quot;\r\n    fi\r\nfi\r\n\r\nexec &quot;$@&quot;                 # --------------------  LINE 27\r\n```\r\n\r\nWhile using Minikube I do `eval $(minikube docker-env)` to use local docker image.","title":"flink kubernetes operator /docker-entrypoint default command","body":"<p>I am trying to do simple flink deployment using flink kubernetes operator but default or docker-entrypoint.sh I use returns following error:</p>\n<p>Here is YAML file I use:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>apiVersion: flink.apache.org/v1beta1\nkind: FlinkDeployment\nmetadata:\n  name: basic-example-w-file-path\nspec:\n  image: flink-job-fraud-demo:latest\n\n  flinkVersion: v1_17\n  flinkConfiguration:\n    taskmanager.numberOfTaskSlots: &quot;2&quot;\n    # kubernetes.entry.path: &quot;/docker-entrypoint.sh&quot;\n\n  serviceAccount: flink\n  jobManager:\n    resource:\n      memory: &quot;2048m&quot;\n      cpu: 1\n  taskManager:\n    resource:\n      memory: &quot;2048m&quot;\n      cpu: 1\n  job:\n    jarURI: local:///home/gradle/app/lib/job.jar\n    parallelism: 2\n    upgradeMode: stateless\n    state: running\n</code></pre>\n<pre class=\"lang-bash prettyprint-override\"><code>kubectl logs -f pod/basic-example-w-file-path-6d48fdc87b-xlbcm\n\noutput:\n\n/docker-entrypoint.sh: line 27: exec: kubernetes-jobmanager.sh kubernetes-application : not found\n\n\nkubectl get all\n\noutput:\n\nNAME                                             READY   STATUS             RESTARTS        AGE\npod/basic-example-w-file-path-6d48fdc87b-xlbcm   0/1     CrashLoopBackOff   1 (2s ago)      4s\npod/flink-kubernetes-operator-55f4bd64-55hd4     2/2     Running            4 (5h28m ago)   10h\n\n......\n\n</code></pre>\n<p>By following <a href=\"https://stackoverflow.com/questions/73607675/apache-flink-kubernetes-operator-how-to-override-the-docker-entrypoint\">this</a> question and its accepted answer, I overwrite <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/deployment/config/#kubernetes-entry-path\" rel=\"nofollow noreferrer\">kubernetes entrypath</a>.</p>\n<p>However, this time I get following from kubectl describe:</p>\n<p><code>kubectl describe pod basic-example-w-file</code></p>\n<pre><code>Containers:\n  flink-main-container:\n    Container ID:  docker://47698da60bfdfd93c82e4677ae87121abb90b5cfeaeb2d9aa0acd078a7d39c50\n    Image:         flink-job-fraud-demo:latest\n    Image ID:      docker://sha256:57fdf7e046939c42e978b16f7fb85855fd431fc8d02f99c29a0b4e14587233d8\n    Ports:         8081/TCP, 6123/TCP, 6124/TCP\n    Host Ports:    0/TCP, 0/TCP, 0/TCP\n    Command:\n      /custom-docker-entrypoint.sh\n    Args:\n      bash\n      -c\n      kubernetes-jobmanager.sh kubernetes-application\n    State:          Waiting\n      Reason:       CrashLoopBackOff\n    Last State:     Terminated\n      Reason:       ContainerCannotRun\n      Message:      failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: exec: &quot;/custom-docker-entrypoint.sh&quot;: stat /custom-docker-entrypoint.sh: no such file or directory: unknown\n      Exit Code:    127\n</code></pre>\n<p>Dockerfile I use:</p>\n<pre><code>FROM openjdk:11 AS job-build\nWORKDIR /home/gradle/app/\n\nCOPY build.gradle settings.gradle ./\nCOPY gradlew ./\nCOPY gradle gradle\n# To cause download and cache of verifyGoogleJavaFormat dependency\nRUN echo &quot;class Dummy {}&quot; &gt; Dummy.java\n# download dependencies\nRUN ./gradlew build\nCOPY . .\nRUN rm Dummy.java\nRUN ./gradlew build\nRUN mv /home/gradle/app/build/libs/rrr-rule-calculation_v1*-deploy.jar /home/gradle/app/build/libs/rrr-rule-calculation_v1-deploy.jar\n\n\n/release-notes/flink-1.15/#jdk-upgrade\nFROM flink:1.17\n\nCOPY --from=job-build /home/gradle/app/build/libs/rrr-rule-calculation_v1-deploy.jar lib/job.jar\nCOPY custom-docker-entrypoint.sh /\n\nUSER flink\nEXPOSE 8081 6123\nENTRYPOINT [&quot;/custom-docker-entrypoint.sh&quot;]\n</code></pre>\n<p>and custom-docker-entrypoint.sh (docker-entrypoint.sh for the first case) I use:</p>\n<pre><code>#!/bin/bash\n\n# Ported from Apache Flink project\n\n### If unspecified, the hostname of the container is taken as the JobManager address\nFLINK_HOME=${FLINK_HOME:-&quot;/opt/flink/bin&quot;}\n\nJOB_CLUSTER=&quot;job-cluster&quot;\nTASK_MANAGER=&quot;task-manager&quot;\n\nCMD=&quot;$1&quot;\nshift;\n\nif [ &quot;${CMD}&quot; == &quot;--help&quot; -o &quot;${CMD}&quot; == &quot;-h&quot; ]; then\n    echo &quot;Usage: $(basename $0) (${JOB_CLUSTER}|${TASK_MANAGER})&quot;\n    exit 0\nelif [ &quot;${CMD}&quot; == &quot;${JOB_CLUSTER}&quot; -o &quot;${CMD}&quot; == &quot;${TASK_MANAGER}&quot; ]; then\n    echo &quot;Starting the ${CMD}&quot;\n\n    if [ &quot;${CMD}&quot; == &quot;${TASK_MANAGER}&quot; ]; then\n        exec $FLINK_HOME/bin/taskmanager.sh start-foreground &quot;$@&quot;\n    else\n        exec $FLINK_HOME/bin/standalone-job.sh start-foreground &quot;$@&quot;\n    fi\nfi\n\nexec &quot;$@&quot;                 # --------------------  LINE 27\n</code></pre>\n<p>While using Minikube I do <code>eval $(minikube docker-env)</code> to use local docker image.</p>\n"},{"tags":["java","cpu-architecture","atomic","benchmarking","jmh"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1694498125,"post_id":77085043,"comment_id":135894728,"body_markdown":"Performance will vary widely between machines, but those numbers seem entirely reasonable.  Why would you expect these things to take longer than a few nanoseconds?","body":"Performance will vary widely between machines, but those numbers seem entirely reasonable.  Why would you expect these things to take longer than a few nanoseconds?"},{"owner":{"account_id":29418060,"reputation":13,"user_id":22540423,"display_name":"Kurkazawar"},"score":0,"creation_date":1694527347,"post_id":77085043,"comment_id":135900742,"body_markdown":"Thank u! I am a newbie in such questions, so i wasnt able to check this results for rightness by myself and my purpose was to approve that iam doing right","body":"Thank u! I am a newbie in such questions, so i wasnt able to check this results for rightness by myself and my purpose was to approve that iam doing right"},{"owner":{"account_id":16547,"reputation":2370,"user_id":36174,"accept_rate":87,"display_name":"actual"},"score":0,"creation_date":1700989171,"post_id":77085043,"comment_id":136717556,"body_markdown":"There are similar numbers for `AtomicInteger` in [here](https://javaperf.com), so your numbers look correct. But be careful, the performance quickly degrades to 30-40Mop/s as you add more threads.","body":"There are similar numbers for <code>AtomicInteger</code> in <a href=\"https://javaperf.com\" rel=\"nofollow noreferrer\">here</a>, so your numbers look correct. But be careful, the performance quickly degrades to 30-40Mop/s as you add more threads."}],"answers":[{"comments":[{"owner":{"account_id":29418060,"reputation":13,"user_id":22540423,"display_name":"Kurkazawar"},"score":0,"creation_date":1694526814,"post_id":77087680,"comment_id":135900588,"body_markdown":"Peter, thank u so much for such a extended answer. I wondered by your knowlange and its a good motivation for me to strive to reach that level of knowlange how things such this work. Sure i forgot to say that my PC is Apple M1 Pro MacBook","body":"Peter, thank u so much for such a extended answer. I wondered by your knowlange and its a good motivation for me to strive to reach that level of knowlange how things such this work. Sure i forgot to say that my PC is Apple M1 Pro MacBook"},{"owner":{"account_id":29418060,"reputation":13,"user_id":22540423,"display_name":"Kurkazawar"},"score":0,"creation_date":1694527256,"post_id":77087680,"comment_id":135900712,"body_markdown":"Wouldn&#39;t it make you difficult to share some resources/books or smth where can i learn about this more, it will be very greatfull for me","body":"Wouldn&#39;t it make you difficult to share some resources/books or smth where can i learn about this more, it will be very greatfull for me"},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1694532901,"post_id":77087680,"comment_id":135902084,"body_markdown":"@Kurkazawar: [What considerations go into predicting latency for operations on modern superscalar processors and how can I calculate them by hand?](https://stackoverflow.com/q/51607391) which I linked in this answer already links a bunch of resources about learning about CPU microarchitectures. \n https://agner.org/optimize/ has some great info for x86 microarchitectures, presented in a way I found easy to understand, especially the microarch guide.  AArch64 is easier to decode so a lot of the front-end limitations on older x86 CPUs wouldn&#39;t be relevant to understanding it, but the out-of-order","body":"@Kurkazawar: <a href=\"https://stackoverflow.com/q/51607391\">What considerations go into predicting latency for operations on modern superscalar processors and how can I calculate them by hand?</a> which I linked in this answer already links a bunch of resources about learning about CPU microarchitectures.   <a href=\"https://agner.org/optimize/\" rel=\"nofollow noreferrer\">agner.org/optimize</a> has some great info for x86 microarchitectures, presented in a way I found easy to understand, especially the microarch guide.  AArch64 is easier to decode so a lot of the front-end limitations on older x86 CPUs wouldn&#39;t be relevant to understanding it, but the out-of-order"},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1694533108,"post_id":77087680,"comment_id":135902129,"body_markdown":"@Kurkazawar: In terms of where to start, https://www.lighterra.com/papers/modernmicroprocessors/ is essential reading. \n And some deep-dives on specific CPUs are often very informative, especially how they compare design choices to other CPUs that did things differently.  e.g. https://www.realworldtech.com/sandy-bridge/.    https://chipsandcheese.com/ has some good articles with deep dives on more recent CPU microarchitectures.  Maybe not Apple&#39;s M1, though.","body":"@Kurkazawar: In terms of where to start, <a href=\"https://www.lighterra.com/papers/modernmicroprocessors/\" rel=\"nofollow noreferrer\">lighterra.com/papers/modernmicroprocessors</a> is essential reading.   And some deep-dives on specific CPUs are often very informative, especially how they compare design choices to other CPUs that did things differently.  e.g. <a href=\"https://www.realworldtech.com/sandy-bridge/\" rel=\"nofollow noreferrer\">realworldtech.com/sandy-bridge</a>.    <a href=\"https://chipsandcheese.com/\" rel=\"nofollow noreferrer\">chipsandcheese.com</a> has some good articles with deep dives on more recent CPU microarchitectures.  Maybe not Apple&#39;s M1, though."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1694533156,"post_id":77087680,"comment_id":135902140,"body_markdown":"@Kurkazawar: In terms of how assembly language works and how higher-level languages compile to it, see Matt Godbolt&#39;s CppCon2017 talk “[What Has My Compiler Done for Me Lately? Unbolting the Compiler&#39;s Lid](https://youtu.be/bSkpMdDe4g4)”","body":"@Kurkazawar: In terms of how assembly language works and how higher-level languages compile to it, see Matt Godbolt&#39;s CppCon2017 talk “<a href=\"https://youtu.be/bSkpMdDe4g4\" rel=\"nofollow noreferrer\">What Has My Compiler Done for Me Lately? Unbolting the Compiler&#39;s Lid</a>”"},{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":1,"creation_date":1694841616,"post_id":77087680,"comment_id":135947353,"body_markdown":"@PeterCordes &quot;Maybe the JIT can see there&#39;s only one thread and avoid doing actual locking with an atomic RMW?&quot; The JIT uses biased locking for uncontended locks. Once the lock is biased towards a thread, that thread only need to perform a a read and no need for a cas. Unfortunately, biased locking will be removed in the near future.","body":"@PeterCordes &quot;Maybe the JIT can see there&#39;s only one thread and avoid doing actual locking with an atomic RMW?&quot; The JIT uses biased locking for uncontended locks. Once the lock is biased towards a thread, that thread only need to perform a a read and no need for a cas. Unfortunately, biased locking will be removed in the near future."}],"tags":[],"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694510045,"creation_date":1694510045,"answer_id":77087680,"question_id":77085043,"body_markdown":"You only have one thread so there&#39;s no contention for the lock, and not even any time for the cache line to bounce around from the previous owner to the current core doing an RMW because it&#39;s always the same core.\r\n\r\n**Uncontended atomic increments (that hit in L1d cache) can run about 1 per 8 or 18 cycles on a current AMD or Intel CPU, respectively.**   `145.125 Mops / sec * (18 cycles/op)` ~= 2612 Mcycles / sec, **so a 2.6 GHz Intel Xeon core could do this**.  I haven&#39;t looked for atomic RMW latency / throughput numbers for any ARM cores, but they&#39;re probably also pretty good.\r\n\r\nYou didn&#39;t say what CPU you tested on; I&#39;m just guessing an Intel from the last 8 years because that leads to a reasonable CPU frequency for a server core; low for a desktop or recent laptop.  (Or actual frequency could be higher if my estimate of cycles / iteration is low due to some extra overhead.)\r\n\r\n(You [can&#39;t add up cycle costs across operations in general][1], but your loops only involve the one significant operation which alone will be the bottleneck.  A `volatile` increment should JIT to the same asm as AtomicInteger, but you also use `synchronized`.  So IDK why it&#39;s not twice as slow. Maybe the JIT can see there&#39;s only one thread and avoid doing actual locking with an atomic RMW?  Or there&#39;s some other overhead in the function, perhaps some stores due to the black-hole, so adding another atomic RMW on a different location (the lock that `synchronized` uses) wouldn&#39;t be twice as slow?  In that case my CPU frequency estimate is wrong.)\r\n\r\nMy source for the 8 and 18 cycle numbers is https://uops.info/.  Look for `lock add` or `lock xadd` in the table.  The table shows latency, throughput, and micro-op (uop) counts.  Latency is complicated because the operation has 3 inputs: an address, a register input, an output in FLAGS (and also register for `xadd`), and the contents of memory.  uops.info attempts to measure latency from each input to each output with different microbenchmarks, because those can all be different, especially for multi-uop instructions.\r\n\r\nSpecifically `XADD_LOCK (M32, R32)` or `ADD_LOCK (M32, I8)` since you&#39;re using 32-bit integers.  (XADD produces the previous value of the memory location, like fetch_add needs.  Plain ADD doesn&#39;t, just the FLAGS result of whether it was zero or not, and so on.  Since you&#39;re using `blackhole.consume` on the increment result, the JIT optimizer will have to use something like `mov eax, 1` / `lock xadd  [rdi], eax` instead of `lock add dword ptr [rdi], 1`)\r\n\r\n**The relevant bottleneck in this case is latency from memory to memory since you&#39;re doing increments on the same object.**  e.g. https://uops.info/html-lat/ZEN4/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem shows Zen 4&#39;s `Latency operand 1 → 1 (memory): 8` result: 8 cycles for back-to-back increments on the same memory location.  (Zen 3 has the same performance for that).\r\n\r\n(The throughput of a thread doing multiple independent atomic RMWs on different memory locations is surprisingly slightly better than that, despite `lock`ed instructions being full memory barriers.  But there&#39;s not much pipelining so the throughput numbers directly visible in the main table are very close.  However, the latency numbers for mem-&gt;mem are whole numbers like we&#39;d expect.  Intel numbers came out as I&#39;d expect, with throughput exactly equal to latency due to the full memory barrier.)\r\n\r\nNumbers from recent mainstream x86 CPUs for mem-&gt;mem latency for `lock xadd [mem], r32`, which will also be the cycles / iteration for a loop that does an atomic increment on an object with no other memory operations, just some register loop-counter stuff:\r\n\r\n* [Skylake][2] / Cascade Lake / Ice Lake / [Alder Lake P-cores][3] and Sapphire Rapids: 18.  Also Alder Lake E-cores.\r\n* [Zen 1][4]: 8 cycles, but only as part of a chain of operations that isn&#39;t just atomic RMWs, because atomic RMW throughput is lower, [like 28.4 cycles][5] in a microbenchmark loop that does exactly what you&#39;re doing, incrementing the same location in a loop.\r\n* [Zen 2][6]: 15 cycles, but again back-to-back increments of the same location are limited by [atomic RMW throughput of 17.7 cycles][7]\r\n* [Zen 3][8]: 8 cycles, with actual increments of a single location in a loop [able to match that][9], no extra bottlenecks to RMW throughput.\r\n* [Zen 4][10]: 8 cycles, and again a microbenchmark of just [incrementing the same location in a loop][11] confirms that really can sustain 8 cycles per increment.\r\n\r\n(When I started writing this answer, I wasn&#39;t expecting the Zen 1/2 effect of latency being better than throughput. That&#39;s interesting.  But https://uops.info/ shows the instruction sequences they microbenchmarked with, and the testing is automated and reliable, and reports actual &quot;APERF&quot; cycle counts for each individual test, so the raw data is there.  Anyway, not relevant to your test even if you were using an early Ryzen, since the only significant thing in your loop should be the atomic RMW; out-of-order exec of the register operations to keep track of the loop counter isn&#39;t part of the bottleneck.)\r\n\r\n  [1]: https://stackoverflow.com/questions/51607391/what-considerations-go-into-predicting-latency-for-operations-on-modern-supersca\r\n  [2]: https://uops.info/html-lat/SKX/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\r\n  [3]: https://uops.info/html-lat/ADL-P/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\r\n  [4]: https://uops.info/html-lat/ZEN+/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\r\n  [5]: https://uops.info/html-tp/ZEN+/XADD_LOCK_M32_R32-Measurements.html\r\n  [6]: https://uops.info/html-lat/ZEN2/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\r\n  [7]: https://uops.info/html-tp/ZEN2/XADD_LOCK_M32_R32-Measurements.html\r\n  [8]: https://uops.info/html-lat/ZEN3/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\r\n  [9]: https://uops.info/html-tp/ZEN3/XADD_LOCK_M32_R32-Measurements.html\r\n  [10]: https://uops.info/html-lat/ZEN4/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\r\n  [11]: https://uops.info/html-tp/ZEN4/XADD_LOCK_M32_R32-Measurements.html","title":"Do i really well interpret JMH results for synchronized counter and AtomicInteger","body":"<p>You only have one thread so there's no contention for the lock, and not even any time for the cache line to bounce around from the previous owner to the current core doing an RMW because it's always the same core.</p>\n<p><strong>Uncontended atomic increments (that hit in L1d cache) can run about 1 per 8 or 18 cycles on a current AMD or Intel CPU, respectively.</strong>   <code>145.125 Mops / sec * (18 cycles/op)</code> ~= 2612 Mcycles / sec, <strong>so a 2.6 GHz Intel Xeon core could do this</strong>.  I haven't looked for atomic RMW latency / throughput numbers for any ARM cores, but they're probably also pretty good.</p>\n<p>You didn't say what CPU you tested on; I'm just guessing an Intel from the last 8 years because that leads to a reasonable CPU frequency for a server core; low for a desktop or recent laptop.  (Or actual frequency could be higher if my estimate of cycles / iteration is low due to some extra overhead.)</p>\n<p>(You <a href=\"https://stackoverflow.com/questions/51607391/what-considerations-go-into-predicting-latency-for-operations-on-modern-supersca\">can't add up cycle costs across operations in general</a>, but your loops only involve the one significant operation which alone will be the bottleneck.  A <code>volatile</code> increment should JIT to the same asm as AtomicInteger, but you also use <code>synchronized</code>.  So IDK why it's not twice as slow. Maybe the JIT can see there's only one thread and avoid doing actual locking with an atomic RMW?  Or there's some other overhead in the function, perhaps some stores due to the black-hole, so adding another atomic RMW on a different location (the lock that <code>synchronized</code> uses) wouldn't be twice as slow?  In that case my CPU frequency estimate is wrong.)</p>\n<p>My source for the 8 and 18 cycle numbers is <a href=\"https://uops.info/\" rel=\"nofollow noreferrer\">https://uops.info/</a>.  Look for <code>lock add</code> or <code>lock xadd</code> in the table.  The table shows latency, throughput, and micro-op (uop) counts.  Latency is complicated because the operation has 3 inputs: an address, a register input, an output in FLAGS (and also register for <code>xadd</code>), and the contents of memory.  uops.info attempts to measure latency from each input to each output with different microbenchmarks, because those can all be different, especially for multi-uop instructions.</p>\n<p>Specifically <code>XADD_LOCK (M32, R32)</code> or <code>ADD_LOCK (M32, I8)</code> since you're using 32-bit integers.  (XADD produces the previous value of the memory location, like fetch_add needs.  Plain ADD doesn't, just the FLAGS result of whether it was zero or not, and so on.  Since you're using <code>blackhole.consume</code> on the increment result, the JIT optimizer will have to use something like <code>mov eax, 1</code> / <code>lock xadd  [rdi], eax</code> instead of <code>lock add dword ptr [rdi], 1</code>)</p>\n<p><strong>The relevant bottleneck in this case is latency from memory to memory since you're doing increments on the same object.</strong>  e.g. <a href=\"https://uops.info/html-lat/ZEN4/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\" rel=\"nofollow noreferrer\">https://uops.info/html-lat/ZEN4/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem</a> shows Zen 4's <code>Latency operand 1 → 1 (memory): 8</code> result: 8 cycles for back-to-back increments on the same memory location.  (Zen 3 has the same performance for that).</p>\n<p>(The throughput of a thread doing multiple independent atomic RMWs on different memory locations is surprisingly slightly better than that, despite <code>lock</code>ed instructions being full memory barriers.  But there's not much pipelining so the throughput numbers directly visible in the main table are very close.  However, the latency numbers for mem-&gt;mem are whole numbers like we'd expect.  Intel numbers came out as I'd expect, with throughput exactly equal to latency due to the full memory barrier.)</p>\n<p>Numbers from recent mainstream x86 CPUs for mem-&gt;mem latency for <code>lock xadd [mem], r32</code>, which will also be the cycles / iteration for a loop that does an atomic increment on an object with no other memory operations, just some register loop-counter stuff:</p>\n<ul>\n<li><a href=\"https://uops.info/html-lat/SKX/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\" rel=\"nofollow noreferrer\">Skylake</a> / Cascade Lake / Ice Lake / <a href=\"https://uops.info/html-lat/ADL-P/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\" rel=\"nofollow noreferrer\">Alder Lake P-cores</a> and Sapphire Rapids: 18.  Also Alder Lake E-cores.</li>\n<li><a href=\"https://uops.info/html-lat/ZEN+/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\" rel=\"nofollow noreferrer\">Zen 1</a>: 8 cycles, but only as part of a chain of operations that isn't just atomic RMWs, because atomic RMW throughput is lower, <a href=\"https://uops.info/html-tp/ZEN+/XADD_LOCK_M32_R32-Measurements.html\" rel=\"nofollow noreferrer\">like 28.4 cycles</a> in a microbenchmark loop that does exactly what you're doing, incrementing the same location in a loop.</li>\n<li><a href=\"https://uops.info/html-lat/ZEN2/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\" rel=\"nofollow noreferrer\">Zen 2</a>: 15 cycles, but again back-to-back increments of the same location are limited by <a href=\"https://uops.info/html-tp/ZEN2/XADD_LOCK_M32_R32-Measurements.html\" rel=\"nofollow noreferrer\">atomic RMW throughput of 17.7 cycles</a></li>\n<li><a href=\"https://uops.info/html-lat/ZEN3/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\" rel=\"nofollow noreferrer\">Zen 3</a>: 8 cycles, with actual increments of a single location in a loop <a href=\"https://uops.info/html-tp/ZEN3/XADD_LOCK_M32_R32-Measurements.html\" rel=\"nofollow noreferrer\">able to match that</a>, no extra bottlenecks to RMW throughput.</li>\n<li><a href=\"https://uops.info/html-lat/ZEN4/XADD_LOCK_M32_R32-Measurements.html#lat1-%3E1_mem\" rel=\"nofollow noreferrer\">Zen 4</a>: 8 cycles, and again a microbenchmark of just <a href=\"https://uops.info/html-tp/ZEN4/XADD_LOCK_M32_R32-Measurements.html\" rel=\"nofollow noreferrer\">incrementing the same location in a loop</a> confirms that really can sustain 8 cycles per increment.</li>\n</ul>\n<p>(When I started writing this answer, I wasn't expecting the Zen 1/2 effect of latency being better than throughput. That's interesting.  But <a href=\"https://uops.info/\" rel=\"nofollow noreferrer\">https://uops.info/</a> shows the instruction sequences they microbenchmarked with, and the testing is automated and reliable, and reports actual &quot;APERF&quot; cycle counts for each individual test, so the raw data is there.  Anyway, not relevant to your test even if you were using an early Ryzen, since the only significant thing in your loop should be the atomic RMW; out-of-order exec of the register operations to keep track of the loop counter isn't part of the bottleneck.)</p>\n"}],"owner":{"account_id":29418060,"reputation":13,"user_id":22540423,"display_name":"Kurkazawar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77087680,"answer_count":1,"score":1,"last_activity_date":1694510045,"creation_date":1694470454,"question_id":77085043,"body_markdown":"I wondered how much AtomicInteger is more performat then synchronized volatile increment in single-threaded environment, and write such a JMH Benchmarks:\r\n\r\n\r\n```\r\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\r\npublic class CounterBenchmark {\r\n\r\n    @State(Scope.Benchmark)\r\n    public static class ThreadState {\r\n\r\n        public final AtomicInteger atomicInteger = new AtomicInteger();\r\n        public final SynchronizedCounter synchronizedCounter = new SynchronizedCounter();\r\n    }\r\n\r\n    public static class SynchronizedCounter {\r\n        private volatile int counter = 0;\r\n\r\n        public synchronized int incrementAndGet() {\r\n            return counter++;\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void atomicCounter(ThreadState state, Blackhole blackhole) {\r\n        blackhole.consume(state.atomicInteger.incrementAndGet());\r\n    }\r\n\r\n    @Benchmark\r\n    public void syncCounter(ThreadState state, Blackhole blackhole) {\r\n        blackhole.consume(state.synchronizedCounter.incrementAndGet());\r\n    }\r\n\r\n\r\n    public static void main(String... args) throws Exception {\r\n\r\n        Options options = new OptionsBuilder()\r\n                .include(CounterBenchmark.class.getSimpleName())\r\n                .forks(1)\r\n                .threads(1)\r\n                .warmupTime(TimeValue.seconds(1))\r\n                .warmupIterations(5)\r\n                .measurementTime(TimeValue.seconds(1))\r\n                .measurementIterations(5)\r\n                .mode(Mode.Throughput)\r\n                .build();\r\n\r\n        new Runner(options).run();\r\n    }\r\n}\r\n```\r\n\r\n\r\nAnd got such output:\r\n\r\n`\r\nBenchmark                                Mode  Cnt       Score      Error   Units\r\nMySerializationBenchmark.atomicCounter  thrpt    5  145125.272 &#177; 2064.673  ops/ms\r\nMySerializationBenchmark.syncCounter    thrpt    5  105763.168 &#177; 1794.680  ops/ms\r\n`\r\n\r\nAnd results seems to fast. 145k operations per 1ms (145kk per second) for AtomicInteger and 100kk for synchronized. \r\nAm i doing things wrong, or this is real performance.\r\n`\r\n\r\nI have googled things as &quot;common java latency numbers&quot; and so on, but decided to do benchmarks by me","title":"Do i really well interpret JMH results for synchronized counter and AtomicInteger","body":"<p>I wondered how much AtomicInteger is more performat then synchronized volatile increment in single-threaded environment, and write such a JMH Benchmarks:</p>\n<pre><code>@OutputTimeUnit(TimeUnit.MILLISECONDS)\npublic class CounterBenchmark {\n\n    @State(Scope.Benchmark)\n    public static class ThreadState {\n\n        public final AtomicInteger atomicInteger = new AtomicInteger();\n        public final SynchronizedCounter synchronizedCounter = new SynchronizedCounter();\n    }\n\n    public static class SynchronizedCounter {\n        private volatile int counter = 0;\n\n        public synchronized int incrementAndGet() {\n            return counter++;\n        }\n    }\n\n    @Benchmark\n    public void atomicCounter(ThreadState state, Blackhole blackhole) {\n        blackhole.consume(state.atomicInteger.incrementAndGet());\n    }\n\n    @Benchmark\n    public void syncCounter(ThreadState state, Blackhole blackhole) {\n        blackhole.consume(state.synchronizedCounter.incrementAndGet());\n    }\n\n\n    public static void main(String... args) throws Exception {\n\n        Options options = new OptionsBuilder()\n                .include(CounterBenchmark.class.getSimpleName())\n                .forks(1)\n                .threads(1)\n                .warmupTime(TimeValue.seconds(1))\n                .warmupIterations(5)\n                .measurementTime(TimeValue.seconds(1))\n                .measurementIterations(5)\n                .mode(Mode.Throughput)\n                .build();\n\n        new Runner(options).run();\n    }\n}\n</code></pre>\n<p>And got such output:</p>\n<p><code>Benchmark                                Mode  Cnt       Score      Error   Units MySerializationBenchmark.atomicCounter  thrpt    5  145125.272 ± 2064.673  ops/ms MySerializationBenchmark.syncCounter    thrpt    5  105763.168 ± 1794.680  ops/ms</code></p>\n<p>And results seems to fast. 145k operations per 1ms (145kk per second) for AtomicInteger and 100kk for synchronized.\nAm i doing things wrong, or this is real performance.\n`</p>\n<p>I have googled things as &quot;common java latency numbers&quot; and so on, but decided to do benchmarks by me</p>\n"},{"tags":["java","java-11","byte-code-enhancement"],"owner":{"account_id":12854191,"reputation":1,"user_id":9298044,"display_name":"Guntupalli Dheeraj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694510040,"creation_date":1694484553,"question_id":77085701,"body_markdown":"We are using a maven project that has the below dependencies\r\n\r\n```    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;net.tascalate.javaflow&lt;/groupId&gt;\r\n                &lt;artifactId&gt;net.tascalate.javaflow.api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.7.5&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;net.tascalate.javaflow&lt;/groupId&gt;\r\n                &lt;artifactId&gt;net.tascalate.javaflow.extras&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;11&lt;/source&gt;\r\n                        &lt;target&gt;11&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;net.tascalate.javaflow&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;net.tascalate.javaflow.tools.maven&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.7.5&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;javaflow-enhance-main-classes&lt;/id&gt;\r\n                            &lt;phase&gt;process-classes&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;javaflow-enhance&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n    \r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n```\r\nWe are using net.tascalate.javaflow maven plugin to enhance byte code, till jdk8 it is working fine and the build is successful.\r\nOnce we have upgraded the compiler to java 11 version we are getting the below error when running the maven install.\r\n\r\nThis is the error that was thrown when trying to install the maven project    \r\n```\r\n    [ERROR] net.tascalate.asmx.tree.analysis.AnalyzerException: Error at instruction 238: null\r\n    java.lang.RuntimeException: net.tascalate.asmx.tree.analysis.AnalyzerException: Error at instruction 238: null\r\n        at org.apache.commons.javaflow.providers.core.ContinuableMethodNode.visitEnd (ContinuableMethodNode.java:163)\r\n        at net.tascalate.asmx.ClassReader.readMethod (ClassReader.java:1518)\r\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:744)\r\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:424)\r\n        at org.apache.commons.javaflow.providers.core.ContinuableClassTransformer.transform (ContinuableClassTransformer.java:64)\r\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils$2.transform (RewritingUtils.java:230)\r\n        at org.apache.commons.javaflow.spi.AbstractResourceTransformer.transform (AbstractResourceTransformer.java:25)\r\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils.rewriteClassFile (RewritingUtils.java:73)\r\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.transformFiles (ContinuableClassesInstrumentationMojo.java:149)\r\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.execute (ContinuableClassesInstrumentationMojo.java:109)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\r\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\n    Caused by: net.tascalate.asmx.tree.analysis.AnalyzerException: Error at instruction 238: null\r\n        at net.tascalate.asmx.tree.analysis.Analyzer.analyze (Analyzer.java:273)\r\n        at org.apache.commons.javaflow.providers.core.ContinuableMethodNode.visitEnd (ContinuableMethodNode.java:159)\r\n        at net.tascalate.asmx.ClassReader.readMethod (ClassReader.java:1518)\r\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:744)\r\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:424)\r\n        at org.apache.commons.javaflow.providers.core.ContinuableClassTransformer.transform (ContinuableClassTransformer.java:64)\r\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils$2.transform (RewritingUtils.java:230)\r\n        at org.apache.commons.javaflow.spi.AbstractResourceTransformer.transform (AbstractResourceTransformer.java:25)\r\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils.rewriteClassFile (RewritingUtils.java:73)\r\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.transformFiles (ContinuableClassesInstrumentationMojo.java:149)\r\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.execute (ContinuableClassesInstrumentationMojo.java:109)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\r\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\n    Caused by: java.lang.UnsupportedOperationException\r\n        at org.apache.commons.javaflow.providers.core.FastClassVerifier.getClass (FastClassVerifier.java:109)\r\n        at net.tascalate.asmx.tree.analysis.SimpleVerifier.isSubTypeOf (SimpleVerifier.java:214)\r\n        at net.tascalate.asmx.tree.analysis.BasicVerifier.naryOperation (BasicVerifier.java:400)\r\n        at net.tascalate.asmx.tree.analysis.BasicVerifier.naryOperation (BasicVerifier.java:44)\r\n        at net.tascalate.asmx.tree.analysis.Frame.executeInvokeInsn (Frame.java:684)\r\n        at net.tascalate.asmx.tree.analysis.Frame.execute (Frame.java:612)\r\n        at org.apache.commons.javaflow.providers.core.MonitoringFrame.execute (MonitoringFrame.java:72)\r\n        at net.tascalate.asmx.tree.analysis.Analyzer.analyze (Analyzer.java:165)\r\n        at org.apache.commons.javaflow.providers.core.ContinuableMethodNode.visitEnd (ContinuableMethodNode.java:159)\r\n        at net.tascalate.asmx.ClassReader.readMethod (ClassReader.java:1518)\r\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:744)\r\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:424)\r\n        at org.apache.commons.javaflow.providers.core.ContinuableClassTransformer.transform (ContinuableClassTransformer.java:64)\r\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils$2.transform (RewritingUtils.java:230)\r\n        at org.apache.commons.javaflow.spi.AbstractResourceTransformer.transform (AbstractResourceTransformer.java:25)\r\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils.rewriteClassFile (RewritingUtils.java:73)\r\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.transformFiles (ContinuableClassesInstrumentationMojo.java:149)\r\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.execute (ContinuableClassesInstrumentationMojo.java:109)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\r\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n```\r\n    \r\nI have tried reverting the versions of the artifacts net.tascalate.javaflow.api to 2.6.0,           net.tascalate.javaflow.tools.maven to 2.4.1 but still there is same issue.\r\n    \r\nBut when I changed the maven compiler level to jdk 8 the project is building successfully.\r\n    \r\nAny help would be appreciated.","title":"Unable to Build maven project after upgrading to java11","body":"<p>We are using a maven project that has the below dependencies</p>\n<pre><code>            &lt;dependency&gt;\n                &lt;groupId&gt;net.tascalate.javaflow&lt;/groupId&gt;\n                &lt;artifactId&gt;net.tascalate.javaflow.api&lt;/artifactId&gt;\n                &lt;version&gt;2.7.5&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;net.tascalate.javaflow&lt;/groupId&gt;\n                &lt;artifactId&gt;net.tascalate.javaflow.extras&lt;/artifactId&gt;\n                &lt;version&gt;2.4.3&lt;/version&gt;\n            &lt;/dependency&gt;\n    \n        &lt;build&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.8.1&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;source&gt;11&lt;/source&gt;\n                        &lt;target&gt;11&lt;/target&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;net.tascalate.javaflow&lt;/groupId&gt;\n                    &lt;artifactId&gt;net.tascalate.javaflow.tools.maven&lt;/artifactId&gt;\n                    &lt;version&gt;2.7.5&lt;/version&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;javaflow-enhance-main-classes&lt;/id&gt;\n                            &lt;phase&gt;process-classes&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;javaflow-enhance&lt;/goal&gt;\n                            &lt;/goals&gt;\n                        &lt;/execution&gt;\n    \n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\n                    &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/build&gt;\n</code></pre>\n<p>We are using net.tascalate.javaflow maven plugin to enhance byte code, till jdk8 it is working fine and the build is successful.\nOnce we have upgraded the compiler to java 11 version we are getting the below error when running the maven install.</p>\n<p>This is the error that was thrown when trying to install the maven project</p>\n<pre><code>    [ERROR] net.tascalate.asmx.tree.analysis.AnalyzerException: Error at instruction 238: null\n    java.lang.RuntimeException: net.tascalate.asmx.tree.analysis.AnalyzerException: Error at instruction 238: null\n        at org.apache.commons.javaflow.providers.core.ContinuableMethodNode.visitEnd (ContinuableMethodNode.java:163)\n        at net.tascalate.asmx.ClassReader.readMethod (ClassReader.java:1518)\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:744)\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:424)\n        at org.apache.commons.javaflow.providers.core.ContinuableClassTransformer.transform (ContinuableClassTransformer.java:64)\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils$2.transform (RewritingUtils.java:230)\n        at org.apache.commons.javaflow.spi.AbstractResourceTransformer.transform (AbstractResourceTransformer.java:25)\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils.rewriteClassFile (RewritingUtils.java:73)\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.transformFiles (ContinuableClassesInstrumentationMojo.java:149)\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.execute (ContinuableClassesInstrumentationMojo.java:109)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke (Method.java:566)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\n    Caused by: net.tascalate.asmx.tree.analysis.AnalyzerException: Error at instruction 238: null\n        at net.tascalate.asmx.tree.analysis.Analyzer.analyze (Analyzer.java:273)\n        at org.apache.commons.javaflow.providers.core.ContinuableMethodNode.visitEnd (ContinuableMethodNode.java:159)\n        at net.tascalate.asmx.ClassReader.readMethod (ClassReader.java:1518)\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:744)\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:424)\n        at org.apache.commons.javaflow.providers.core.ContinuableClassTransformer.transform (ContinuableClassTransformer.java:64)\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils$2.transform (RewritingUtils.java:230)\n        at org.apache.commons.javaflow.spi.AbstractResourceTransformer.transform (AbstractResourceTransformer.java:25)\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils.rewriteClassFile (RewritingUtils.java:73)\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.transformFiles (ContinuableClassesInstrumentationMojo.java:149)\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.execute (ContinuableClassesInstrumentationMojo.java:109)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke (Method.java:566)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\n    Caused by: java.lang.UnsupportedOperationException\n        at org.apache.commons.javaflow.providers.core.FastClassVerifier.getClass (FastClassVerifier.java:109)\n        at net.tascalate.asmx.tree.analysis.SimpleVerifier.isSubTypeOf (SimpleVerifier.java:214)\n        at net.tascalate.asmx.tree.analysis.BasicVerifier.naryOperation (BasicVerifier.java:400)\n        at net.tascalate.asmx.tree.analysis.BasicVerifier.naryOperation (BasicVerifier.java:44)\n        at net.tascalate.asmx.tree.analysis.Frame.executeInvokeInsn (Frame.java:684)\n        at net.tascalate.asmx.tree.analysis.Frame.execute (Frame.java:612)\n        at org.apache.commons.javaflow.providers.core.MonitoringFrame.execute (MonitoringFrame.java:72)\n        at net.tascalate.asmx.tree.analysis.Analyzer.analyze (Analyzer.java:165)\n        at org.apache.commons.javaflow.providers.core.ContinuableMethodNode.visitEnd (ContinuableMethodNode.java:159)\n        at net.tascalate.asmx.ClassReader.readMethod (ClassReader.java:1518)\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:744)\n        at net.tascalate.asmx.ClassReader.accept (ClassReader.java:424)\n        at org.apache.commons.javaflow.providers.core.ContinuableClassTransformer.transform (ContinuableClassTransformer.java:64)\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils$2.transform (RewritingUtils.java:230)\n        at org.apache.commons.javaflow.spi.AbstractResourceTransformer.transform (AbstractResourceTransformer.java:25)\n        at org.apache.commons.javaflow.tools.jar.RewritingUtils.rewriteClassFile (RewritingUtils.java:73)\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.transformFiles (ContinuableClassesInstrumentationMojo.java:149)\n        at org.apache.commons.javaflow.tools.maven.ContinuableClassesInstrumentationMojo.execute (ContinuableClassesInstrumentationMojo.java:109)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke (Method.java:566)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\n    [INFO] ------------------------------------------------------------------------\n    [INFO] BUILD FAILURE\n    [INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>I have tried reverting the versions of the artifacts net.tascalate.javaflow.api to 2.6.0,           net.tascalate.javaflow.tools.maven to 2.4.1 but still there is same issue.</p>\n<p>But when I changed the maven compiler level to jdk 8 the project is building successfully.</p>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","jruby"],"answers":[{"tags":[],"owner":{"account_id":2186012,"reputation":20371,"user_id":1934428,"accept_rate":86,"display_name":"user1934428"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694510012,"creation_date":1694510012,"answer_id":77087673,"question_id":77087511,"body_markdown":"I found, that the problem is on the Java side:\r\n\r\nFirst, the class `T` needs to be declared _public_. I don&#39;t know why I can create an instance of a non-public class, but can&#39;t call instance methods of it. This seems to be a Java-restriction.\r\n\r\nSecond, after renaming, the Java compiler insists that I also rename the file from `t.java` to `T.java`. The file name must match the class name.\r\n\r\nAfter these changes, the example works.","title":"JRuby can not call Java method","body":"<p>I found, that the problem is on the Java side:</p>\n<p>First, the class <code>T</code> needs to be declared <em>public</em>. I don't know why I can create an instance of a non-public class, but can't call instance methods of it. This seems to be a Java-restriction.</p>\n<p>Second, after renaming, the Java compiler insists that I also rename the file from <code>t.java</code> to <code>T.java</code>. The file name must match the class name.</p>\n<p>After these changes, the example works.</p>\n"}],"owner":{"account_id":2186012,"reputation":20371,"user_id":1934428,"accept_rate":86,"display_name":"user1934428"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77087673,"answer_count":1,"score":0,"last_activity_date":1694510012,"creation_date":1694508898,"question_id":77087511,"body_markdown":"I tried to create a small example, where I invoke a method on a Java object, but I JRuby can&#39;t find the method. \r\n\r\nI have the following file:\r\n\r\nFile t.java with content\r\n\r\n    class T {\r\n      public T() {}\r\n      public String f() {\r\n        return &quot;abc&quot;;\r\n      }\r\n    }\r\n\r\nI then do (inside the directory of t.java):\r\n\r\n    javac t.java # Produces a file T.class\r\n    jruby -e &#39;java_import &quot;T&quot;; r=T.new; puts(r.f)&#39;\r\n\r\nthis produces the error message\r\n\r\n_NoMethodError: undefined method `f&#39; for #&lt;Java::Default::T:0x38cee291&gt;_\r\n\r\nInterestingly, the constructor (`T.new`) seems to have succeeded. Why can&#39;t I call the instance method `f`?\r\n\r\nPlatform:\r\n \r\nMacOS 12.6.5\r\n\r\njruby 9.4.3.0 (3.1.4) 2023-06-07 3086960792 Java HotSpot(TM) 64-Bit Server VM 25.341-b10 on 1.8.0_341-b10 +jit [x86_64-darwin]\r\n","title":"JRuby can not call Java method","body":"<p>I tried to create a small example, where I invoke a method on a Java object, but I JRuby can't find the method.</p>\n<p>I have the following file:</p>\n<p>File t.java with content</p>\n<pre><code>class T {\n  public T() {}\n  public String f() {\n    return &quot;abc&quot;;\n  }\n}\n</code></pre>\n<p>I then do (inside the directory of t.java):</p>\n<pre><code>javac t.java # Produces a file T.class\njruby -e 'java_import &quot;T&quot;; r=T.new; puts(r.f)'\n</code></pre>\n<p>this produces the error message</p>\n<p><em>NoMethodError: undefined method `f' for #Java::Default::T:0x38cee291</em></p>\n<p>Interestingly, the constructor (<code>T.new</code>) seems to have succeeded. Why can't I call the instance method <code>f</code>?</p>\n<p>Platform:</p>\n<p>MacOS 12.6.5</p>\n<p>jruby 9.4.3.0 (3.1.4) 2023-06-07 3086960792 Java HotSpot(TM) 64-Bit Server VM 25.341-b10 on 1.8.0_341-b10 +jit [x86_64-darwin]</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9944,"page":190,"page_size":100}
