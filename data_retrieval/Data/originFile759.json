{"items":[{"tags":["java","mysql","hibernate","jpql"],"comments":[{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":1,"creation_date":1598092888,"post_id":63535148,"comment_id":112349198,"body_markdown":"mysql doesn&#39;t know FETCH, also you are missing for every JOIN an USING or ON clause","body":"mysql doesn&#39;t know FETCH, also you are missing for every JOIN an USING or ON clause"},{"owner":{"account_id":9330948,"reputation":2699,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"score":0,"creation_date":1598093064,"post_id":63535148,"comment_id":112349230,"body_markdown":"can you correct my query pls. I do not understand what do you mean. Thanks","body":"can you correct my query pls. I do not understand what do you mean. Thanks"},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1598093286,"post_id":63535148,"comment_id":112349287,"body_markdown":"the query should look like SELECT post \nFROM post.Post post \n    LEFT JOIN  post.author author ON post.id = author.id\n    LEFT JOIN  post.postComments postComments ON post.id = postComments.id\nWHERE author.id = &#39;:authorId&#39;","body":"the query should look like SELECT post  FROM post.Post post      LEFT JOIN  post.author author ON post.id = author.id     LEFT JOIN  post.postComments postComments ON post.id = postComments.id WHERE author.id = &#39;:authorId&#39;"},{"owner":{"account_id":9330948,"reputation":2699,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"score":0,"creation_date":1598094141,"post_id":63535148,"comment_id":112349472,"body_markdown":"Yes, your query will work. But postComments have lazy fetch. I want to get them with one query.Without FETCH there will be extra call to db when I call post.getPostComments()","body":"Yes, your query will work. But postComments have lazy fetch. I want to get them with one query.Without FETCH there will be extra call to db when I call post.getPostComments()"},{"owner":{"account_id":1658164,"reputation":3247,"user_id":1527103,"accept_rate":89,"display_name":"Gokhan Oner"},"score":1,"creation_date":1610747311,"post_id":63535148,"comment_id":116239492,"body_markdown":"@MaksymPecheniukare you using cursorFetch &amp; streaming result set? I hit the same error when using these, I believe it has something to do with this combination","body":"@MaksymPecheniukare you using cursorFetch &amp; streaming result set? I hit the same error when using these, I believe it has something to do with this combination"}],"answers":[{"tags":[],"owner":{"account_id":9330948,"reputation":2699,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672773971,"creation_date":1672773971,"answer_id":74997845,"question_id":63535148,"body_markdown":"The problem was in streaming result set. In order to fix it need to replace this code:\r\n\r\n    return query.getResultStream().collect(Collectors.toSet());\r\n\r\nwith such code:\r\n\r\n    return new HashSet&lt;&gt;(query.getResultList());\r\n\r\n","title":"org.hibernate.exception.GenericJDBCException: could not perform sequential read of results (forward)","body":"<p>The problem was in streaming result set. In order to fix it need to replace this code:</p>\n<pre><code>return query.getResultStream().collect(Collectors.toSet());\n</code></pre>\n<p>with such code:</p>\n<pre><code>return new HashSet&lt;&gt;(query.getResultList());\n</code></pre>\n"}],"owner":{"account_id":9330948,"reputation":2699,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":381,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74997845,"answer_count":1,"score":0,"last_activity_date":1672773971,"creation_date":1598092416,"question_id":63535148,"body_markdown":"I am using Hibernate version - **5.4.12.Final** and mysql-connector-java driver version - **8.0.18**. &lt;br&gt;\r\nMy entities:&lt;br&gt;\r\n\r\n    @Entity\r\n    public class Author {\r\n    \t\r\n    \t@Id\r\n    \tprivate long id;\r\n    \t\r\n    \t@OneToMany(mappedBy = &quot;author&quot;, fetch = FetchType.LAZY)\r\n        private Set&lt;Post&gt; posts = new HashSet&lt;&gt;();\r\n    \t\r\n    \t//Getters and setters...\r\n    }\r\n    \r\n    @Entity\r\n    public class Post {\r\n    \t\r\n    \t@Id\r\n    \tprivate long id;\r\n    \t\r\n        @ManyToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST}, fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;author_id&quot;)\r\n        private Author author;\r\n    \t\r\n    \t@OneToMany(mappedBy = &quot;post&quot;, fetch = FetchType.LAZY, cascade = {CascadeType.REMOVE, CascadeType.REFRESH, CascadeType.DETACH}, orphanRemoval = true)\r\n        private List&lt;PostComment&gt; postComments = new ArrayList&lt;&gt;();\r\n    \t\r\n    \t\r\n    \t//Getters and setters...\r\n    \t\r\n    }\r\n    \r\n    @Entity\r\n    public class PostComment {\r\n    \t\r\n    \t@Id\r\n    \tprivate long id;\r\n    \t\r\n    \t@ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;post_id&quot;)\r\n        private Post post;\r\n    \t\r\n    \t\r\n    \t//Getters and setters...\r\n    \t\r\n    }\r\n\r\nWhen I run this JPQL query:&lt;br&gt;\r\n\r\n    SELECT post FROM Post post \r\n    \tLEFT JOIN FETCH post.author author \r\n    \tLEFT JOIN FETCH post.postComments postComments \r\n    WHERE author.id = :authorId\r\n\r\nThen this error appears:\r\n\r\n    org.hibernate.exception.GenericJDBCException: could not perform sequential read of results (forward)\r\n    \r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n    \tat org.hibernate.loader.Loader.loadSequentialRowsForward(Loader.java:544)\r\n    \tat org.hibernate.internal.FetchingScrollableResultsImpl.next(FetchingScrollableResultsImpl.java:71)\r\n    \tat org.hibernate.query.internal.ScrollableResultsIterator.hasNext(ScrollableResultsIterator.java:33)\r\n    \tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:132)\r\n    \tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n    \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n    \tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\r\n    \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\r\n    \tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\r\n    \tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\t\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:62)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\r\n    \tat no.vergemal.service.aop.ExecutionTimeAspect.logExecutionTime(ExecutionTimeAspect.java:37)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\r\n    \tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\r\n    \tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:56)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:367)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\r\n    \tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\r\n    \tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\t\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n    \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)\r\n    \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\r\n    \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\r\n    \tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n    \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\r\n    \tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n    Caused by: java.sql.SQLException: Before start of result set\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\r\n    \tat com.mysql.cj.jdbc.result.ResultSetImpl.checkRowPos(ResultSetImpl.java:484)\r\n    \tat com.mysql.cj.jdbc.result.ResultSetImpl.getObject(ResultSetImpl.java:1288)\r\n    \tat com.mysql.cj.jdbc.result.ResultSetImpl.getLong(ResultSetImpl.java:812)\r\n    \tat com.mysql.cj.jdbc.result.ResultSetImpl.getLong(ResultSetImpl.java:818)\r\n    \tat org.apache.commons.dbcp2.DelegatingResultSet.getLong(DelegatingResultSet.java:653)\r\n    \tat org.apache.commons.dbcp2.DelegatingResultSet.getLong(DelegatingResultSet.java:653)\r\n    \tat org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$2.doExtract(BigIntTypeDescriptor.java:63)\r\n    \tat org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:47)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:243)\r\n    \tat org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1512)\r\n    \tat org.hibernate.loader.Loader.loadSequentialRowsForward(Loader.java:533)\r\n    \t... 112 more\r\nBut when I run this query then there is no errors:\r\n\r\n    SELECT post FROM Post post \r\n        LEFT JOIN FETCH post.author author \r\n        LEFT JOIN post.postComments postComments \r\n    WHERE author.id = :authorId\r\n\r\n**Questions:**&lt;br&gt;\r\nWhy am I not able to use FETCH JOIN?&lt;br&gt;\r\nWhy does this error appear here?&lt;br&gt;\r\nHow can I fix it?&lt;br&gt;\r\n","title":"org.hibernate.exception.GenericJDBCException: could not perform sequential read of results (forward)","body":"<p>I am using Hibernate version - <strong>5.4.12.Final</strong> and mysql-connector-java driver version - <strong>8.0.18</strong>. <br>\nMy entities:<br></p>\n<pre><code>@Entity\npublic class Author {\n    \n    @Id\n    private long id;\n    \n    @OneToMany(mappedBy = &quot;author&quot;, fetch = FetchType.LAZY)\n    private Set&lt;Post&gt; posts = new HashSet&lt;&gt;();\n    \n    //Getters and setters...\n}\n\n@Entity\npublic class Post {\n    \n    @Id\n    private long id;\n    \n    @ManyToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST}, fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;author_id&quot;)\n    private Author author;\n    \n    @OneToMany(mappedBy = &quot;post&quot;, fetch = FetchType.LAZY, cascade = {CascadeType.REMOVE, CascadeType.REFRESH, CascadeType.DETACH}, orphanRemoval = true)\n    private List&lt;PostComment&gt; postComments = new ArrayList&lt;&gt;();\n    \n    \n    //Getters and setters...\n    \n}\n\n@Entity\npublic class PostComment {\n    \n    @Id\n    private long id;\n    \n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;post_id&quot;)\n    private Post post;\n    \n    \n    //Getters and setters...\n    \n}\n</code></pre>\n<p>When I run this JPQL query:<br></p>\n<pre><code>SELECT post FROM Post post \n    LEFT JOIN FETCH post.author author \n    LEFT JOIN FETCH post.postComments postComments \nWHERE author.id = :authorId\n</code></pre>\n<p>Then this error appears:</p>\n<pre><code>org.hibernate.exception.GenericJDBCException: could not perform sequential read of results (forward)\n\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.loader.Loader.loadSequentialRowsForward(Loader.java:544)\n    at org.hibernate.internal.FetchingScrollableResultsImpl.next(FetchingScrollableResultsImpl.java:71)\n    at org.hibernate.query.internal.ScrollableResultsIterator.hasNext(ScrollableResultsIterator.java:33)\n    at java.base/java.util.Iterator.forEachRemaining(Iterator.java:132)\n    at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)  \n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:62)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\n    at no.vergemal.service.aop.ExecutionTimeAspect.logExecutionTime(ExecutionTimeAspect.java:37)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:56)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:367)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)  \n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)\n    at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\n    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\nCaused by: java.sql.SQLException: Before start of result set\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\n    at com.mysql.cj.jdbc.result.ResultSetImpl.checkRowPos(ResultSetImpl.java:484)\n    at com.mysql.cj.jdbc.result.ResultSetImpl.getObject(ResultSetImpl.java:1288)\n    at com.mysql.cj.jdbc.result.ResultSetImpl.getLong(ResultSetImpl.java:812)\n    at com.mysql.cj.jdbc.result.ResultSetImpl.getLong(ResultSetImpl.java:818)\n    at org.apache.commons.dbcp2.DelegatingResultSet.getLong(DelegatingResultSet.java:653)\n    at org.apache.commons.dbcp2.DelegatingResultSet.getLong(DelegatingResultSet.java:653)\n    at org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$2.doExtract(BigIntTypeDescriptor.java:63)\n    at org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:47)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:243)\n    at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1512)\n    at org.hibernate.loader.Loader.loadSequentialRowsForward(Loader.java:533)\n    ... 112 more\n</code></pre>\n<p>But when I run this query then there is no errors:</p>\n<pre><code>SELECT post FROM Post post \n    LEFT JOIN FETCH post.author author \n    LEFT JOIN post.postComments postComments \nWHERE author.id = :authorId\n</code></pre>\n<p><strong>Questions:</strong><br>\nWhy am I not able to use FETCH JOIN?<br>\nWhy does this error appear here?<br>\nHow can I fix it?<br></p>\n"},{"tags":["java","jar","command-line-arguments"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672767900,"post_id":74996830,"comment_id":132346927,"body_markdown":"Just include all jars in the classpath at the command line - not a problem","body":"Just include all jars in the classpath at the command line - not a problem"},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672768213,"post_id":74996830,"comment_id":132347035,"body_markdown":"@g00se how do I do that?","body":"@g00se how do I do that?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672768763,"post_id":74996830,"comment_id":132347207,"body_markdown":"Which OS are you using?","body":"Which OS are you using?"},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672768792,"post_id":74996830,"comment_id":132347210,"body_markdown":"@g00se Ubuntu 22.10","body":"@g00se Ubuntu 22.10"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672768863,"post_id":74996830,"comment_id":132347231,"body_markdown":"`java -cp x.jar:y.jar:z.jar foo.bar.X`","body":"<code>java -cp x.jar:y.jar:z.jar foo.bar.X</code>"},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672768866,"post_id":74996830,"comment_id":132347232,"body_markdown":"@g00se I just updated the question. could you please review it","body":"@g00se I just updated the question. could you please review it"},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672768973,"post_id":74996830,"comment_id":132347259,"body_markdown":"what do you mean by foo.bar.x?","body":"what do you mean by foo.bar.x?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672769014,"post_id":74996830,"comment_id":132347276,"body_markdown":"You can&#39;t really recurse-compile like you&#39;re doing there. If you want to use the command line (I do) then really you need to be using a build tool like Maven","body":"You can&#39;t really recurse-compile like you&#39;re doing there. If you want to use the command line (I do) then really you need to be using a build tool like Maven"},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672769119,"post_id":74996830,"comment_id":132347318,"body_markdown":"@g00se could you share a source mentioning that. As earlier I did it using gradle and can run it but the employ want it running without gradle and if I need him to understand the thing to use maven or gradle, I need to give him a doc mentioning this.","body":"@g00se could you share a source mentioning that. As earlier I did it using gradle and can run it but the employ want it running without gradle and if I need him to understand the thing to use maven or gradle, I need to give him a doc mentioning this."},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672769330,"post_id":74996830,"comment_id":132347389,"body_markdown":"i am not good at compiling java using commands as I have always been doing it using IDE or using Gradle or mvn","body":"i am not good at compiling java using commands as I have always been doing it using IDE or using Gradle or mvn"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672769336,"post_id":74996830,"comment_id":132347391,"body_markdown":"Running is different from compiling. You just showed a *compiling* command line. Your employer is absolutely right about it needing to *run* without build tool assistance. Compiling without build tools is not really practicable unless the codebase is very small","body":"Running is different from compiling. You just showed a <i>compiling</i> command line. Your employer is absolutely right about it needing to <i>run</i> without build tool assistance. Compiling without build tools is not really practicable unless the codebase is very small"},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672769466,"post_id":74996830,"comment_id":132347429,"body_markdown":"I have just a few classes there. I just want to run the code using those libraries included as dependencies. I am not finding a way to do it using command line.","body":"I have just a few classes there. I just want to run the code using those libraries included as dependencies. I am not finding a way to do it using command line."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672769582,"post_id":74996830,"comment_id":132347464,"body_markdown":"I posted an example command to do that. You just need to get the jar paths right and use the correct name for your main class","body":"I posted an example command to do that. You just need to get the jar paths right and use the correct name for your main class"},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672769727,"post_id":74996830,"comment_id":132347506,"body_markdown":"@g00se i used this command ` java -cp lib/gson-2.10.jar:lib/okhttp-3.4.1.jar:lib/okio-3.2.0.jar:lib/slf4j-api-2.0.6.jar  src/Main.java\n` but the compilation error is there.","body":"@g00se i used this command ` java -cp lib/gson-2.10.jar:lib/okhttp-3.4.1.jar:lib/okio-3.2.0.jar:li&zwnj;&#8203;b/slf4j-api-2.0.6.ja&zwnj;&#8203;r  src/Main.java ` but the compilation error is there."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672774327,"post_id":74996830,"comment_id":132348732,"body_markdown":"*... but the compilation error is there* But that has nothing to do with compilation. As I mentioned, compilation is hard without a build tool","body":"<i>... but the compilation error is there</i> But that has nothing to do with compilation. As I mentioned, compilation is hard without a build tool"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672774631,"post_id":74996830,"comment_id":132348834,"body_markdown":"`find src -type f -name \\*.jar -exec javac -d mybin -classpath mybin:lib/*.jar &#39;{}&#39; \\;` might do it for you, putting classes into ./mybin but I don&#39;t recommend it","body":"<code>find src -type f -name \\*.jar -exec javac -d mybin -classpath mybin:lib&#47;*.jar &#39;{}&#39; \\;</code> might do it for you, putting classes into ./mybin but I don&#39;t recommend it"},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672805060,"post_id":74996830,"comment_id":132354250,"body_markdown":"@g00se so you recommend using an IDE for this","body":"@g00se so you recommend using an IDE for this"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672825880,"post_id":74996830,"comment_id":132358500,"body_markdown":"Not an ide necessarily but a build tool to compile . Your boss is talking about *running* the application.","body":"Not an ide necessarily but a build tool to compile . Your boss is talking about <i>running</i> the application."},{"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"score":0,"creation_date":1672830504,"post_id":74996830,"comment_id":132359943,"body_markdown":"yeah. he is talking about running the application. I have compiled a JAR file with Libraries and it is working now. Hope it goes that way or otherwise I will look for some other solution","body":"yeah. he is talking about running the application. I have compiled a JAR file with Libraries and it is working now. Hope it goes that way or otherwise I will look for some other solution"}],"owner":{"account_id":10150295,"reputation":1257,"user_id":7497127,"accept_rate":67,"display_name":"JAMSHAID"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672773581,"creation_date":1672767712,"question_id":74996830,"body_markdown":"I have a program running in Intellij Idea. It has the following dependencies added as a jar file\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI want to run it using the command line and want it to detect the jar files automatically as dependencies. Is there any way to achieve that without using Gradle or Maven? Or I could pass the dependencies as command-line arguments?\r\n\r\nI have tried this command but it throws an error:\r\n\r\n     javac -classpath lib/*.jar -sourcepath src/*\r\n\r\nError:\r\n \r\n    error: invalid flag: lib/okhttp-3.4.1.jar\r\n\r\nUsing java -cp says this:   \r\n\r\n     java -cp lib/* -sourcepath src/*\r\nerror\r\n    \r\n    Error: Could not find or load main class lib.okhttp-3.4.1.jar\r\n    Caused by: java.lang.ClassNotFoundException: lib.okhttp-3.4.1.jar\r\n\r\nUsed the suggested command and it says:\r\n\r\n     java -cp lib/gson-2.10.jar:lib/okhttp-3.4.1.jar:lib/okio-3.2.0.jar:lib/slf4j-api-2.0.6.jar  src/Main.java\r\n    \r\n[![enter image description here][2]][2]\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lqX9y.png\r\n  [2]: https://i.stack.imgur.com/UwRTp.png","title":"Passing JAR files as CMD arguments that are required as dependencies","body":"<p>I have a program running in Intellij Idea. It has the following dependencies added as a jar file</p>\n<p><a href=\"https://i.stack.imgur.com/lqX9y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lqX9y.png\" alt=\"enter image description here\" /></a></p>\n<p>I want to run it using the command line and want it to detect the jar files automatically as dependencies. Is there any way to achieve that without using Gradle or Maven? Or I could pass the dependencies as command-line arguments?</p>\n<p>I have tried this command but it throws an error:</p>\n<pre><code> javac -classpath lib/*.jar -sourcepath src/*\n</code></pre>\n<p>Error:</p>\n<pre><code>error: invalid flag: lib/okhttp-3.4.1.jar\n</code></pre>\n<p>Using java -cp says this:</p>\n<pre><code> java -cp lib/* -sourcepath src/*\n</code></pre>\n<p>error</p>\n<pre><code>Error: Could not find or load main class lib.okhttp-3.4.1.jar\nCaused by: java.lang.ClassNotFoundException: lib.okhttp-3.4.1.jar\n</code></pre>\n<p>Used the suggested command and it says:</p>\n<pre><code> java -cp lib/gson-2.10.jar:lib/okhttp-3.4.1.jar:lib/okio-3.2.0.jar:lib/slf4j-api-2.0.6.jar  src/Main.java\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UwRTp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UwRTp.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","junit","jdbctemplate"],"comments":[{"owner":{"account_id":7458473,"reputation":1057,"user_id":5670909,"display_name":"Melchizedek"},"score":0,"creation_date":1672789720,"post_id":74997674,"comment_id":132352280,"body_markdown":"Have you tried using any mocking framework? like [Mockito](https://site.mockito.org/)","body":"Have you tried using any mocking framework? like <a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">Mockito</a>"}],"owner":{"account_id":27423886,"reputation":1,"user_id":20921772,"display_name":"Bilal Sherifi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672772780,"creation_date":1672772780,"question_id":74997674,"body_markdown":"I have code which reads from json files and adds values to a list of pojos, this list is then used to batch insert into sql table. I am trying to write a unit test in Java to check wheather the values of a list of Pojos are null when when creating a Prepared statement as this uses setString and setLong which will throw NPE if value is null. \r\n\r\n\r\nPojo Class\r\n\r\n```\r\npublic class Customer{\r\nLong: id;\r\nString Name;\r\n}\r\n```\r\n\r\nDao Class\r\n\r\n```\r\npublic class CustomerDao{\r\n@Autowired\r\nJdbcTemplate jdbcTemplate;\r\n\r\npublic int[] batchInsert(List&lt;Customer&gt; customers) {\r\n\r\nreturn this.jdbcTemplate.batchUpdate(&quot;INSERT into CUSTOMER_TBL (ID, NAME) values (?,?)&quot;, new BatchPreparedStatementSetter(){\r\npublic void setValues(PreparedStatement ps, int i) throws SQLException {\r\n\r\nps.setLong(1, customers.get(i).getId());\r\nps.setString(2, customers.get(i).getName());\r\n}\r\npublic int getBatchSize(){ return customers.size();}\r\n})\r\n\r\n}\r\n\r\n}\r\n```\r\n\r\n\r\nService class\r\n\r\nIn this class I am creating a List of Customers and populating the values of name and id from json  then calling the batchInsert method of Dao class with that List.\r\n\r\n\r\n\r\n```\r\npublic class CustomerService(){\r\n\r\n@Autowired\r\nJdbcTemplate jdbcTemplate;\r\n\r\n@Autowired\r\nCustomerDao customerDao;\r\n\r\nList&lt;Customer&gt; customerList = new LinkedList&lt;&gt;();\r\n\r\n// populating list\r\n...\r\n\r\n\r\n// calling batchInsert with list of Custoemrs \r\n\r\ncustomerDao.batchInsert(customerList)\r\n\r\n}\r\n\r\n```\r\n\r\nNow I want to write a unit test to verify that  the values of name and id in customerList are not null when setting the values of prepared statement in CustomerDao class.\r\n\r\n```\r\n ps.setLong(1, customers.get(i).getId());\r\nps.setString(2, customers.get(i).getName());\r\n```\r\n\r\n\r\nI have tried something like code below but the setValues method is not being called in the DaoClass due to jdbcTemplate null pointer. Is there a better way to test this kind of functionality?\r\n\r\n\r\n```\r\npublic class DaoTest {\r\n    @Mock\r\n    private JdbcTemplate jdbcTemplate;\r\n\r\n    @InjectMocks\r\n    private CustomerDao dao;\r\n\r\n    @Test\r\n    public void testBatchInsert() {\r\n\r\n        Customer customer = new Customer();\r\ncustomer.setId(1L);\r\ncustomer.setName(null);\r\n        List&lt;Customer&gt; customerList = new LinkedList&lt;&gt;();\r\ncustomerList.add(customer);\r\n\r\n        PreparedStatement ps = mock(PreparedStatement.class);\r\n\r\n        \r\n        int[] result = dao.batchInsert(customerList);\r\n\r\n         assertEquals(0, result.length)\r\n\r\n    }\r\n}\r\n```\r\n\r\nThanks in advance\r\n\r\n\r\n","title":"Test PreparedStatement values are not null when passed to the jdbcTemplate.batchUpdate(&quot;sql&quot;, new BatchPreparedStatementSetter()))","body":"<p>I have code which reads from json files and adds values to a list of pojos, this list is then used to batch insert into sql table. I am trying to write a unit test in Java to check wheather the values of a list of Pojos are null when when creating a Prepared statement as this uses setString and setLong which will throw NPE if value is null.</p>\n<p>Pojo Class</p>\n<pre><code>public class Customer{\nLong: id;\nString Name;\n}\n</code></pre>\n<p>Dao Class</p>\n<pre><code>public class CustomerDao{\n@Autowired\nJdbcTemplate jdbcTemplate;\n\npublic int[] batchInsert(List&lt;Customer&gt; customers) {\n\nreturn this.jdbcTemplate.batchUpdate(&quot;INSERT into CUSTOMER_TBL (ID, NAME) values (?,?)&quot;, new BatchPreparedStatementSetter(){\npublic void setValues(PreparedStatement ps, int i) throws SQLException {\n\nps.setLong(1, customers.get(i).getId());\nps.setString(2, customers.get(i).getName());\n}\npublic int getBatchSize(){ return customers.size();}\n})\n\n}\n\n}\n</code></pre>\n<p>Service class</p>\n<p>In this class I am creating a List of Customers and populating the values of name and id from json  then calling the batchInsert method of Dao class with that List.</p>\n<pre><code>public class CustomerService(){\n\n@Autowired\nJdbcTemplate jdbcTemplate;\n\n@Autowired\nCustomerDao customerDao;\n\nList&lt;Customer&gt; customerList = new LinkedList&lt;&gt;();\n\n// populating list\n...\n\n\n// calling batchInsert with list of Custoemrs \n\ncustomerDao.batchInsert(customerList)\n\n}\n\n</code></pre>\n<p>Now I want to write a unit test to verify that  the values of name and id in customerList are not null when setting the values of prepared statement in CustomerDao class.</p>\n<pre><code> ps.setLong(1, customers.get(i).getId());\nps.setString(2, customers.get(i).getName());\n</code></pre>\n<p>I have tried something like code below but the setValues method is not being called in the DaoClass due to jdbcTemplate null pointer. Is there a better way to test this kind of functionality?</p>\n<pre><code>public class DaoTest {\n    @Mock\n    private JdbcTemplate jdbcTemplate;\n\n    @InjectMocks\n    private CustomerDao dao;\n\n    @Test\n    public void testBatchInsert() {\n\n        Customer customer = new Customer();\ncustomer.setId(1L);\ncustomer.setName(null);\n        List&lt;Customer&gt; customerList = new LinkedList&lt;&gt;();\ncustomerList.add(customer);\n\n        PreparedStatement ps = mock(PreparedStatement.class);\n\n        \n        int[] result = dao.batchInsert(customerList);\n\n         assertEquals(0, result.length)\n\n    }\n}\n</code></pre>\n<p>Thanks in advance</p>\n"},{"tags":["java","android","download","crash"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1672736683,"post_id":74990806,"comment_id":132336747,"body_markdown":"`dir.mkdirs();` Replace by: if(!dir.exists()) if (!dir.mkdirs()) return; Display also a Toast() to inform the user.","body":"<code>dir.mkdirs();</code> Replace by: if(!dir.exists()) if (!dir.mkdirs()) return; Display also a Toast() to inform the user."},{"owner":{"account_id":15714451,"reputation":184,"user_id":20839582,"display_name":"sajidjuneja"},"score":0,"creation_date":1672736730,"post_id":74990806,"comment_id":132336764,"body_markdown":"try this ````if(!dir.exists()) {dir.mkdirs()}````","body":"try this <code>if(!dir.exists()) {dir.mkdirs()}</code>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1672736777,"post_id":74990806,"comment_id":132336781,"body_markdown":"`catch (Exception e){\n        e.printStackTrace();\n    }` Even if there is an exception you continue with compressing as if nothing had happened. Instead display a Toast() and stop.","body":"<code>catch (Exception e){         e.printStackTrace();     }</code> Even if there is an exception you continue with compressing as if nothing had happened. Instead display a Toast() and stop."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1672736942,"post_id":74990806,"comment_id":132336840,"body_markdown":"There is nothing in your code that downloads anything.","body":"There is nothing in your code that downloads anything."}],"answers":[{"tags":[],"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672772550,"creation_date":1672772550,"answer_id":74997639,"question_id":74990806,"body_markdown":"````\r\nException java.lang.NullPointerException:\r\n  at android.graphics.Bitmap.compress (Bitmap.java:1434)\r\n  at com.$$$$$$.fieldforce.adapter.InstallDocAdapter.saveToGallery (InstallDocAdapter.java:123)\r\n````\r\n\r\nYou&#39;re getting this because `saveToGallery` calls `Bitmap.compress` at *line 123* and passes *null* as a parameter that shouldn&#39;t be null. I&#39;m assuming it&#39;s this line:\r\n\r\n````\r\nbitmap.compress(Bitmap.CompressFormat.PNG,100,outputStream);\r\n````\r\n\r\nThe first two parameters are fine so it&#39;ll be `outputStream` that&#39;s null. Which means this:\r\n\r\n````\r\ntry{\r\n    outputStream = new FileOutputStream(outFile);\r\n}catch (Exception e){\r\n    e.printStackTrace();\r\n}\r\n````\r\n\r\nis failing because an exception is being thrown, so `outputStream` (which is initialised as *null*) isn&#39;t being assigned.\r\n\r\n[The docs for `FileOutputStream`][1] explain which exceptions are thrown under what circumstances, and you&#39;re printing the stacktrace to your logs in the catch block, so find out why it&#39;s failing. If you&#39;ve made a mistake, fix it - if it&#39;s a valid scenario that *can happen*, then you need to handle that possibility in your code.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/java/io/FileOutputStream#FileOutputStream(java.io.File)","title":"App crashing on downloading the Image from it","body":"<pre><code>Exception java.lang.NullPointerException:\n  at android.graphics.Bitmap.compress (Bitmap.java:1434)\n  at com.$$$$$$.fieldforce.adapter.InstallDocAdapter.saveToGallery (InstallDocAdapter.java:123)\n</code></pre>\n<p>You're getting this because <code>saveToGallery</code> calls <code>Bitmap.compress</code> at <em>line 123</em> and passes <em>null</em> as a parameter that shouldn't be null. I'm assuming it's this line:</p>\n<pre><code>bitmap.compress(Bitmap.CompressFormat.PNG,100,outputStream);\n</code></pre>\n<p>The first two parameters are fine so it'll be <code>outputStream</code> that's null. Which means this:</p>\n<pre><code>try{\n    outputStream = new FileOutputStream(outFile);\n}catch (Exception e){\n    e.printStackTrace();\n}\n</code></pre>\n<p>is failing because an exception is being thrown, so <code>outputStream</code> (which is initialised as <em>null</em>) isn't being assigned.</p>\n<p><a href=\"https://developer.android.com/reference/java/io/FileOutputStream#FileOutputStream(java.io.File)\" rel=\"nofollow noreferrer\">The docs for <code>FileOutputStream</code></a> explain which exceptions are thrown under what circumstances, and you're printing the stacktrace to your logs in the catch block, so find out why it's failing. If you've made a mistake, fix it - if it's a valid scenario that <em>can happen</em>, then you need to handle that possibility in your code.</p>\n"}],"owner":{"account_id":26264663,"reputation":1,"user_id":19935418,"display_name":"Rookie"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672772584,"creation_date":1672734814,"question_id":74990806,"body_markdown":"While Clicking on download button app is crashing and showing java.lang.NullPointerException\r\n\r\nat com.$$$$$$.fieldforce.adapter.InstallDocAdapter.saveToGallery\r\n\r\nHere is the logcat\r\n\r\n```\r\nException java.lang.NullPointerException:\r\n  at android.graphics.Bitmap.compress (Bitmap.java:1434)\r\n  at com.$$$$$$.fieldforce.adapter.InstallDocAdapter.saveToGallery (InstallDocAdapter.java:123)\r\n  at com.$$$$$$.fieldforce.adapter.InstallDocAdapter.access$100 (InstallDocAdapter.java:40)\r\n  at com.$$$$$$.fieldforce.adapter.InstallDocAdapter$1.onClick (InstallDocAdapter.java:75)\r\n  at android.view.View.performClick (View.java:7488)\r\n  at android.view.View.performClickInternal (View.java:7464)\r\n  at android.view.View.access$3700 (View.java:841)\r\n  at android.view.View$PerformClick.run (View.java:28911)\r\n  at android.os.Handler.handleCallback (Handler.java:938)\r\n  at android.os.Handler.dispatchMessage (Handler.java:99)\r\n  at android.os.Looper.loopOnce (Looper.java:233)\r\n  at android.os.Looper.loop (Looper.java:344)\r\n  at android.app.ActivityThread.main (ActivityThread.java:8212)\r\n  at java.lang.reflect.Method.invoke\r\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:584)\r\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1034)\r\n```\r\n\r\nHere is the function used in it\r\n\r\n\r\n\r\n\r\n\r\n```\r\nprivate void saveToGallery(String attachment){\r\n    byte [] encodeByte = Base64.decode(attachment,Base64.DEFAULT);\r\n    Bitmap bitmap = BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);\r\n\r\n    FileOutputStream outputStream = null;\r\n    File file = Environment.getExternalStorageDirectory();\r\n    File dir = new File(file.getAbsolutePath() + &quot;/$$$$$$ Downloads&quot;);\r\n    dir.mkdirs();\r\n\r\n    String filename = String.format(&quot;%d.png&quot;,System.currentTimeMillis());\r\n    File outFile = new File(dir,filename);\r\n    try{\r\n        outputStream = new FileOutputStream(outFile);\r\n    }catch (Exception e){\r\n        e.printStackTrace();\r\n    }\r\n    bitmap.compress(Bitmap.CompressFormat.PNG,100,outputStream);\r\n    try{\r\n        outputStream.flush();\r\n    }catch (Exception e){\r\n        e.printStackTrace();\r\n    }\r\n    try{\r\n        outputStream.close();\r\n        Toast.makeText(context,&quot;Downloaded image ....&quot;,Toast.LENGTH_LONG).show();\r\n    }\r\n    catch (Exception e){\r\n        e.printStackTrace();\r\n    }\r\n}\r\n\r\n```\r\n[Here is the screenshot of the above code](https://i.stack.imgur.com/42J9p.png)","title":"App crashing on downloading the Image from it","body":"<p>While Clicking on download button app is crashing and showing java.lang.NullPointerException</p>\n<p>at com.$$$$$$.fieldforce.adapter.InstallDocAdapter.saveToGallery</p>\n<p>Here is the logcat</p>\n<pre><code>Exception java.lang.NullPointerException:\n  at android.graphics.Bitmap.compress (Bitmap.java:1434)\n  at com.$$$$$$.fieldforce.adapter.InstallDocAdapter.saveToGallery (InstallDocAdapter.java:123)\n  at com.$$$$$$.fieldforce.adapter.InstallDocAdapter.access$100 (InstallDocAdapter.java:40)\n  at com.$$$$$$.fieldforce.adapter.InstallDocAdapter$1.onClick (InstallDocAdapter.java:75)\n  at android.view.View.performClick (View.java:7488)\n  at android.view.View.performClickInternal (View.java:7464)\n  at android.view.View.access$3700 (View.java:841)\n  at android.view.View$PerformClick.run (View.java:28911)\n  at android.os.Handler.handleCallback (Handler.java:938)\n  at android.os.Handler.dispatchMessage (Handler.java:99)\n  at android.os.Looper.loopOnce (Looper.java:233)\n  at android.os.Looper.loop (Looper.java:344)\n  at android.app.ActivityThread.main (ActivityThread.java:8212)\n  at java.lang.reflect.Method.invoke\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:584)\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1034)\n</code></pre>\n<p>Here is the function used in it</p>\n<pre><code>private void saveToGallery(String attachment){\n    byte [] encodeByte = Base64.decode(attachment,Base64.DEFAULT);\n    Bitmap bitmap = BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);\n\n    FileOutputStream outputStream = null;\n    File file = Environment.getExternalStorageDirectory();\n    File dir = new File(file.getAbsolutePath() + &quot;/$$$$$$ Downloads&quot;);\n    dir.mkdirs();\n\n    String filename = String.format(&quot;%d.png&quot;,System.currentTimeMillis());\n    File outFile = new File(dir,filename);\n    try{\n        outputStream = new FileOutputStream(outFile);\n    }catch (Exception e){\n        e.printStackTrace();\n    }\n    bitmap.compress(Bitmap.CompressFormat.PNG,100,outputStream);\n    try{\n        outputStream.flush();\n    }catch (Exception e){\n        e.printStackTrace();\n    }\n    try{\n        outputStream.close();\n        Toast.makeText(context,&quot;Downloaded image ....&quot;,Toast.LENGTH_LONG).show();\n    }\n    catch (Exception e){\n        e.printStackTrace();\n    }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/42J9p.png\" rel=\"nofollow noreferrer\">Here is the screenshot of the above code</a></p>\n"},{"tags":["java","garbage-collection","reference-counting"],"answers":[{"tags":[],"owner":{"account_id":145646,"reputation":31284,"user_id":355583,"accept_rate":100,"display_name":"Steve"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1326058177,"creation_date":1326057866,"answer_id":8781463,"question_id":8781444,"body_markdown":"Because it doesn&#39;t work strictly based on reference counting.\r\n\r\nConsider circular references which are no longer reachable from the &quot;root&quot; of the application. \r\n\r\nFor example: \r\n\r\n`APP` has a reference to `SOME_SCREEN`\r\n\r\n`SOME_SCREEN` has a reference to `SOME_CHILD`\r\n\r\n`SOME_CHILD` has a reference to `SOME_SCREEN`\r\n\r\nnow, `APP` drops it&#39;s reference to `SOME_SCREEN`.\r\n\r\nIn this case, `SOME_SCREEN` still has a reference to `SOME_CHILD`, and `SOME_CHILD` still has a reference to `SOME_SCREEN` - so, in this case, your example doesn&#39;t work. \r\n\r\nNow, others (Apple with ARC, Microsoft with COM, many others) have solutions for this and work more similarly to how you describe it. \r\n\r\nWith ARC you have to annotate your references with keywords like `strong` and `weak` to let ARC know how to deal with these references (and avoid circular references)... (don&#39;t read too far into my specific example with ARC because ARC handles these things ahead-of-time during the compilation process and doesn&#39;t require a specific runtime per-se) so it can definitely be done similarly to how you describe it, but it&#39;s just not workable with some of the features of Java. I also believe COM works more similarly to how you describe... but again, that&#39;s not free of some amount of consideration on the developer&#39;s part.\r\n\r\nIn fact, no &quot;simple&quot; reference counting scheme would ever be workable without some amount of thought by the application developer (to avoid circular references, etc)","title":"Why doesn&#39;t the JVM destroy a resource as soon as its reference count hits 0?","body":"<p>Because it doesn't work strictly based on reference counting.</p>\n\n<p>Consider circular references which are no longer reachable from the \"root\" of the application. </p>\n\n<p>For example: </p>\n\n<p><code>APP</code> has a reference to <code>SOME_SCREEN</code></p>\n\n<p><code>SOME_SCREEN</code> has a reference to <code>SOME_CHILD</code></p>\n\n<p><code>SOME_CHILD</code> has a reference to <code>SOME_SCREEN</code></p>\n\n<p>now, <code>APP</code> drops it's reference to <code>SOME_SCREEN</code>.</p>\n\n<p>In this case, <code>SOME_SCREEN</code> still has a reference to <code>SOME_CHILD</code>, and <code>SOME_CHILD</code> still has a reference to <code>SOME_SCREEN</code> - so, in this case, your example doesn't work. </p>\n\n<p>Now, others (Apple with ARC, Microsoft with COM, many others) have solutions for this and work more similarly to how you describe it. </p>\n\n<p>With ARC you have to annotate your references with keywords like <code>strong</code> and <code>weak</code> to let ARC know how to deal with these references (and avoid circular references)... (don't read too far into my specific example with ARC because ARC handles these things ahead-of-time during the compilation process and doesn't require a specific runtime per-se) so it can definitely be done similarly to how you describe it, but it's just not workable with some of the features of Java. I also believe COM works more similarly to how you describe... but again, that's not free of some amount of consideration on the developer's part.</p>\n\n<p>In fact, no \"simple\" reference counting scheme would ever be workable without some amount of thought by the application developer (to avoid circular references, etc)</p>\n"},{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1326057874,"creation_date":1326057874,"answer_id":8781467,"question_id":8781444,"body_markdown":"Because the garbage collector in modern JVMs is no longer tracking references count. This algorithm is used to teach how GC works, but it was both resource-consuming and error-prone (e.g. cyclic dependencies).","title":"Why doesn&#39;t the JVM destroy a resource as soon as its reference count hits 0?","body":"<p>Because the garbage collector in modern JVMs is no longer tracking references count. This algorithm is used to teach how GC works, but it was both resource-consuming and error-prone (e.g. cyclic dependencies).</p>\n"},{"tags":[],"owner":{"account_id":43980,"reputation":22154,"user_id":128812,"display_name":"gpeche"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1326057927,"creation_date":1326057927,"answer_id":8781476,"question_id":8781444,"body_markdown":"Reference counting has the following limitations:\r\n\r\n- It is **VERY** bad for multithreading performance (basically, every assignment of an object reference must be protected).\r\n- You cannot free cycles automatically\r\n\r\n","title":"Why doesn&#39;t the JVM destroy a resource as soon as its reference count hits 0?","body":"<p>Reference counting has the following limitations:</p>\n\n<ul>\n<li>It is <strong>VERY</strong> bad for multithreading performance (basically, every assignment of an object reference must be protected).</li>\n<li>You cannot free cycles automatically</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1672772347,"creation_date":1326057977,"answer_id":8781490,"question_id":8781444,"body_markdown":"Each JVM is different, but the HotSpot JVM does not primarily rely on reference counting as a means for garbage collection.  Reference counting has the advantage of being simple to implement, but it is inherently error-prone.  In particular, if you have a reference cycle (a set of objects that all refer to one another in a cycle), then reference counting will not correctly reclaim those objects because they all have nonzero reference count.  This forces you to use an auxiliary garbage collector from time to time, which tends to be slower (Mozilla Firefox had this exact problem, and IIRC their solution was to add in a garbage collector on top of reference counting).  This is why, for example, languages like C++ tend to have a combination of `shared_ptr`s that use reference counting and `weak_ptr`s that don&#39;t use reference cycles.\r\n\r\nAdditionally, associating a reference count with each object makes the cost of assigning a reference greater than normal, because of the extra bookkeeping involved of adjusting the reference count (which only gets worse in the presence of multithreading).  Furthermore, using reference counting precludes the use of certain types fast of memory allocators, which can be a problem.  It also tends to lead to heap fragmentation in its naive form, since objects are scattered through memory rather than tightly-packed, decreasing allocation times and causing poor locality.\r\n\r\nThe HotSpot JVM uses a variety of different techniques to do garbage collection, but its primary garbage collector is called a stop-and-copy collector.  This collector works by allocating objects contiguously in memory next to one another, and allows for extremely fast (one or two assembly instructions) allocation of new objects.  When space runs out, all of the new objects are GC&#39;ed simultaneously, which usually kills off most of the new objects that were constructed.  As a result, the GC is much faster than a typically reference-counting implementation, and ends up having better locality and better performance.\r\n\r\nFor a comparison of techniques in garbage collecting, along with a quick overview of how the GC in HotSpot works, you may want to check out **[these lecture slides][1]** from a compilers course that I taught last summer.  You may also want to look at **[the HotSpot garbage collection white paper][2]** that goes into much more detail about how the garbage collector works, including ways of tuning the collector on an application-by-application basis.\r\n\r\nHope this helps!\r\n\r\n\r\n  [1]: http://www.keithschwarz.com/cs143/WWW/sum2011/lectures/180_Garbage_Collection.pdf\r\n  [2]: http://java.sun.com/j2se/reference/whitepapers/memorymanagement_whitepaper.pdf","title":"Why doesn&#39;t the JVM destroy a resource as soon as its reference count hits 0?","body":"<p>Each JVM is different, but the HotSpot JVM does not primarily rely on reference counting as a means for garbage collection.  Reference counting has the advantage of being simple to implement, but it is inherently error-prone.  In particular, if you have a reference cycle (a set of objects that all refer to one another in a cycle), then reference counting will not correctly reclaim those objects because they all have nonzero reference count.  This forces you to use an auxiliary garbage collector from time to time, which tends to be slower (Mozilla Firefox had this exact problem, and IIRC their solution was to add in a garbage collector on top of reference counting).  This is why, for example, languages like C++ tend to have a combination of <code>shared_ptr</code>s that use reference counting and <code>weak_ptr</code>s that don't use reference cycles.</p>\n<p>Additionally, associating a reference count with each object makes the cost of assigning a reference greater than normal, because of the extra bookkeeping involved of adjusting the reference count (which only gets worse in the presence of multithreading).  Furthermore, using reference counting precludes the use of certain types fast of memory allocators, which can be a problem.  It also tends to lead to heap fragmentation in its naive form, since objects are scattered through memory rather than tightly-packed, decreasing allocation times and causing poor locality.</p>\n<p>The HotSpot JVM uses a variety of different techniques to do garbage collection, but its primary garbage collector is called a stop-and-copy collector.  This collector works by allocating objects contiguously in memory next to one another, and allows for extremely fast (one or two assembly instructions) allocation of new objects.  When space runs out, all of the new objects are GC'ed simultaneously, which usually kills off most of the new objects that were constructed.  As a result, the GC is much faster than a typically reference-counting implementation, and ends up having better locality and better performance.</p>\n<p>For a comparison of techniques in garbage collecting, along with a quick overview of how the GC in HotSpot works, you may want to check out <strong><a href=\"http://www.keithschwarz.com/cs143/WWW/sum2011/lectures/180_Garbage_Collection.pdf\" rel=\"nofollow noreferrer\">these lecture slides</a></strong> from a compilers course that I taught last summer.  You may also want to look at <strong><a href=\"http://java.sun.com/j2se/reference/whitepapers/memorymanagement_whitepaper.pdf\" rel=\"nofollow noreferrer\">the HotSpot garbage collection white paper</a></strong> that goes into much more detail about how the garbage collector works, including ways of tuning the collector on an application-by-application basis.</p>\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1326057984,"creation_date":1326057984,"answer_id":8781493,"question_id":8781444,"body_markdown":"because the garbage collector in java is based on `copying collector` for &#39;youg generation&#39; objects, and \r\n`mark and sweep` for `tenure generations&#39; objects.\r\n\r\nResources from: http://java.sun.com/docs/hotspot/gc1.4.2/faq.html","title":"Why doesn&#39;t the JVM destroy a resource as soon as its reference count hits 0?","body":"<p>because the garbage collector in java is based on <code>copying collector</code> for 'youg generation' objects, and \n<code>mark and sweep</code> for `tenure generations' objects.</p>\n\n<p>Resources from: <a href=\"http://java.sun.com/docs/hotspot/gc1.4.2/faq.html\" rel=\"nofollow\">http://java.sun.com/docs/hotspot/gc1.4.2/faq.html</a></p>\n"}],"owner":{"account_id":49316,"reputation":53059,"user_id":146780,"accept_rate":100,"display_name":"jmasterx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2720,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":8781490,"answer_count":5,"score":13,"last_activity_date":1672772347,"creation_date":1326057696,"question_id":8781444,"body_markdown":"I have always wondered why the garbage collector in Java activates whenever it feels like it rather than do:\r\n\r\n    if(obj.refCount == 0)\r\n    {\r\n       delete  obj;\r\n    }\r\n\r\nAre there any big advantages to how Java does it that I overlooked?\r\n\r\nThanks","title":"Why doesn&#39;t the JVM destroy a resource as soon as its reference count hits 0?","body":"<p>I have always wondered why the garbage collector in Java activates whenever it feels like it rather than do:</p>\n\n<pre><code>if(obj.refCount == 0)\n{\n   delete  obj;\n}\n</code></pre>\n\n<p>Are there any big advantages to how Java does it that I overlooked?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","migration","hazelcast"],"answers":[{"tags":[],"owner":{"account_id":17127425,"reputation":256,"user_id":12394291,"display_name":"mdumandag"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671819187,"creation_date":1671819187,"answer_id":74902786,"question_id":74902533,"body_markdown":"The group config is replaced with the simple cluster name as shown here\r\n\r\nhttps://docs.hazelcast.com/hazelcast/5.2/migrate/upgrading-from-imdg-3#replacing-group-by-simple-cluster-name-configuration\r\n\r\nBasically, the group name is now the cluster name, and the deprecated password is removed altogether, as it was providing false sense of security.","title":"hazelcast migration from 3.x.x to 5.x.x using javaclient","body":"<p>The group config is replaced with the simple cluster name as shown here</p>\n<p><a href=\"https://docs.hazelcast.com/hazelcast/5.2/migrate/upgrading-from-imdg-3#replacing-group-by-simple-cluster-name-configuration\" rel=\"nofollow noreferrer\">https://docs.hazelcast.com/hazelcast/5.2/migrate/upgrading-from-imdg-3#replacing-group-by-simple-cluster-name-configuration</a></p>\n<p>Basically, the group name is now the cluster name, and the deprecated password is removed altogether, as it was providing false sense of security.</p>\n"}],"owner":{"account_id":27337922,"reputation":11,"user_id":20849054,"display_name":"Deepak_M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":453,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1672325126,"accepted_answer_id":74902786,"answer_count":1,"score":-1,"last_activity_date":1672772041,"creation_date":1671817331,"question_id":74902533,"body_markdown":"what is the alternate of the given below code while migrating it from 3.x.x to 5.x.x using java client\r\n\r\n    hz.getGroupConfig().setName(HZ_USER);\r\n    hz.getGroupConfig().setPassword(HZ_PASSWORD);\r\n\r\n\r\n\r\nsolution of the above question please some-one help me in this\r\n","title":"hazelcast migration from 3.x.x to 5.x.x using javaclient","body":"<p>what is the alternate of the given below code while migrating it from 3.x.x to 5.x.x using java client</p>\n<pre><code>hz.getGroupConfig().setName(HZ_USER);\nhz.getGroupConfig().setPassword(HZ_PASSWORD);\n</code></pre>\n<p>solution of the above question please some-one help me in this</p>\n"},{"tags":["java","android","date","calendar"],"comments":[{"owner":{"account_id":1133296,"reputation":2292,"user_id":1118878,"accept_rate":52,"display_name":"drodil"},"score":0,"creation_date":1334730390,"post_id":10203924,"comment_id":13103226,"body_markdown":"Maybe Place = &quot;0&quot; + month would work as it is stored then as a String?","body":"Maybe Place = &quot;0&quot; + month would work as it is stored then as a String?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1522265849,"post_id":10203924,"comment_id":86093125,"body_markdown":"FYI, the troublesome old date-time classes such as `java.util.Date`, `java.util.Calendar`, and `java.text.SimpleDateFormat` are now legacy, supplanted by the [*java.time*](https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html) classes. Much of the *java.time*&#160;functionality is back-ported to Java 6 &amp; Java 7 in the [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) project. Further adapted for earlier Android in the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project. See [*How to use ThreeTenABP*](http://stackoverflow.com/q/38922754/642706).","body":"FYI, the troublesome old date-time classes such as <code>java.util.Date</code>, <code>java.util.Calendar</code>, and <code>java.text.SimpleDateFormat</code> are now legacy, supplanted by the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><i>java.time</i></a> classes. Much of the <i>java.time</i> functionality is back-ported to Java 6 &amp; Java 7 in the <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><b><i>ThreeTen-Backport</i></b></a> project. Further adapted for earlier Android in the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><b><i>ThreeTenABP</i></b></a> project. See <a href=\"http://stackoverflow.com/q/38922754/642706\"><i>How to use ThreeTenABP</i></a>."}],"answers":[{"tags":[],"owner":{"account_id":383425,"reputation":41761,"user_id":739270,"accept_rate":68,"display_name":"Mohammed Azharuddin Shaikh"},"down_vote_count":2,"up_vote_count":56,"is_accepted":true,"score":54,"last_activity_date":1334732824,"creation_date":1334730408,"answer_id":10203963,"question_id":10203924,"body_markdown":"    DecimalFormat mFormat= new DecimalFormat(&quot;00&quot;);\r\n    mFormat.format(Double.valueOf(year));\r\n\r\nin your case:\r\n\r\n     mFormat.setRoundingMode(RoundingMode.DOWN);\r\n     String Dates =  mFormat.format(Double.valueOf(year)) + &quot;-&quot; +  mFormat.format(Double.valueOf(Place)) + &quot;-&quot; +  mFormat.format(Double.valueOf(day));\r\n\r\n","title":"Displaying date in a double digit format","body":"<pre><code>DecimalFormat mFormat= new DecimalFormat(\"00\");\nmFormat.format(Double.valueOf(year));\n</code></pre>\n\n<p>in your case:</p>\n\n<pre><code> mFormat.setRoundingMode(RoundingMode.DOWN);\n String Dates =  mFormat.format(Double.valueOf(year)) + \"-\" +  mFormat.format(Double.valueOf(Place)) + \"-\" +  mFormat.format(Double.valueOf(day));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":940429,"reputation":3071,"user_id":968589,"accept_rate":80,"display_name":"drulabs"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1334730451,"creation_date":1334730451,"answer_id":10203975,"question_id":10203924,"body_markdown":"    if ((month+1)&lt;10){\r\n        place = &quot;0&quot;+(String) (month+1)\r\n    }\r\n\r\ndo the same for day and you are good to go.\r\n\r\n+1 in month because it starts with 0.","title":"Displaying date in a double digit format","body":"<pre><code>if ((month+1)&lt;10){\n    place = \"0\"+(String) (month+1)\n}\n</code></pre>\n\n<p>do the same for day and you are good to go.</p>\n\n<p>+1 in month because it starts with 0.</p>\n"},{"tags":[],"owner":{"account_id":388024,"reputation":13478,"user_id":746710,"accept_rate":88,"display_name":"ngesh"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1334730888,"creation_date":1334730463,"answer_id":10203978,"question_id":10203924,"body_markdown":"Use [SimpleDateFormat][1] class.. There are a lot of ways to do it..\r\n\r\nsomething like this..\r\n\r\n     SimpleDateFormat sdfSource = new SimpleDateFormat(&quot;dd/MM/yy&quot;); // you can add any format..\r\n         \r\n    \r\n          Date date = sdfSource.parse(strDate);\r\n\r\n\r\n  [1]: http://developer.android.com/reference/java/text/SimpleDateFormat.html","title":"Displaying date in a double digit format","body":"<p>Use <a href=\"http://developer.android.com/reference/java/text/SimpleDateFormat.html\" rel=\"nofollow\">SimpleDateFormat</a> class.. There are a lot of ways to do it..</p>\n\n<p>something like this..</p>\n\n<pre><code> SimpleDateFormat sdfSource = new SimpleDateFormat(\"dd/MM/yy\"); // you can add any format..\n\n\n      Date date = sdfSource.parse(strDate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1414174,"reputation":437,"user_id":1340160,"display_name":"Aung Thaw Aye"},"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1334730613,"creation_date":1334730613,"answer_id":10204009,"question_id":10203924,"body_markdown":"Please use SimpleDateFormat\r\n\r\n    SimpleDateFormat sd1 = new SimpleDateFormat(&quot;dd-MMM-yyyy&quot;);\r\n    System.out.println(&quot;Date : &quot; + sd1.format(new Date(c.getTimeInMillis()));\r\n\r\nOutput\r\n\r\n    Date : 18-Apr-2012\r\n","title":"Displaying date in a double digit format","body":"<p>Please use SimpleDateFormat</p>\n\n<pre><code>SimpleDateFormat sd1 = new SimpleDateFormat(\"dd-MMM-yyyy\");\nSystem.out.println(\"Date : \" + sd1.format(new Date(c.getTimeInMillis()));\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Date : 18-Apr-2012\n</code></pre>\n"},{"tags":[],"owner":{"account_id":928350,"reputation":9520,"user_id":958670,"accept_rate":80,"display_name":"V.J."},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1334730663,"creation_date":1334730663,"answer_id":10204023,"question_id":10203924,"body_markdown":"    Calendar c = Calendar.getInstance();\r\n    int year = c.get(Calendar.YEAR);\r\n    int day = c.get(Calendar.DAY_OF_MONTH);\r\n    int month = c.get(Calendar.MONTH)+1;\r\n        \r\n    String Dates = year + &quot;-&quot; +(month&lt;10?(&quot;0&quot;+month):(month)) + &quot;-&quot; + day;\r\n    Date.setText((Dates));","title":"Displaying date in a double digit format","body":"<pre><code>Calendar c = Calendar.getInstance();\nint year = c.get(Calendar.YEAR);\nint day = c.get(Calendar.DAY_OF_MONTH);\nint month = c.get(Calendar.MONTH)+1;\n\nString Dates = year + \"-\" +(month&lt;10?(\"0\"+month):(month)) + \"-\" + day;\nDate.setText((Dates));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6050338,"reputation":2018,"user_id":4732473,"display_name":"Ness Tyagi"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1462526368,"creation_date":1462520546,"answer_id":37066988,"question_id":10203924,"body_markdown":"    if (dayOfMonth &lt; 10) {\r\n        NumberFormat f = new DecimalFormat(&quot;00&quot;);\r\n        Sting date = String.valueOf(f.format(dayOfMonth));\r\n    }","title":"Displaying date in a double digit format","body":"<pre><code>if (dayOfMonth &lt; 10) {\n    NumberFormat f = new DecimalFormat(\"00\");\n    Sting date = String.valueOf(f.format(dayOfMonth));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1519857869,"creation_date":1462560781,"answer_id":37079498,"question_id":10203924,"body_markdown":"# tl;dr\r\n\r\n    LocalDate.now()\r\n             .toString()\r\n\r\n&gt;2016-01-07\r\n\r\nBetter to always specify your desired/expected time zone explicitly.\r\n\r\n    LocalDate.now( ZoneId.of( &quot;America/Montreal&quot; ) )\r\n             .toString()\r\n\r\n# Avoid old date-time classes\r\n\r\nThe java.util.Calendar class you are using is now legacy. Avoid this class, along with java.util.Date and such. These have proven to be poorly designed, confusing, and troublesome.\r\n\r\n# java.time\r\n\r\nThe old date-time classes have been supplanted by the [java.time][1] framework built into Java 8 and later. Much of the functionality has been back-ported to Java 6 &amp; 7 in the [ThreeTen-Backport][2] project, and further adapted to Android in [ThreeTenABP][3].\r\n\r\nThese modern classes can accomplish your goal in a single line of code, as seen below.\r\n\r\n# Date-time formatting features\r\n\r\nBoth the old outmoded date-time classes as well as java.time classes offer formatting features. No need for you to be writing your own formatting code.\r\n\r\n# Time Zone\r\n\r\nTime zone is crucial to determine the date. The date varies around the world by time zone as a new day dawns earlier in the east. This issue was ignored in the Question and other Answers. If omitted, the JVMs current default time zone is implicitly applied. Better to explicitly specify your desired/expected time zone.\r\n\r\n# `LocalDate`\r\n\r\nFor a date-only value without time-of-day and without time zone, use the [`LocalDate`][4]. While no time zone is stored within the `LocalDate`, a time zone determines today.\r\n\r\n    ZoneId zoneId = ZoneId.of( &quot;America/Montreal&quot; );\r\n    LocalDate today = LocalDate.now( zoneId );\r\n\r\n# ISO 8601\r\n\r\nYour desired format of YYYY-MM-DD with double digits happens to comply with the [ISO 8601][5] standard defining sensible formats for textual representations of date-time values. This standard is used by default in java.time classes for parsing/generating strings.\r\n\r\n    String output = today.toString();\r\n\r\nThats all, 3 lines of code. You could even combine them.\r\n\r\n    String output = LocalDate.now( ZoneId.of( &quot;America/Montreal&quot; ) ).toString();\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/javase/9/docs/api/java/util/Date.html), [`Calendar`](https://docs.oracle.com/javase/9/docs/api/java/util/Calendar.html), &amp; [`SimpleDateFormat`](http://docs.oracle.com/javase/9/docs/api/java/text/SimpleDateFormat.html).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html) classes.\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes.\r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), and later\r\n  - Built-in. \r\n  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Much of the java.time functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - Later versions of Android bundle implementations of the java.time classes.\r\n  - For earlier Android, the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts *ThreeTen-Backport* (mentioned above). See [*How to use ThreeTenABP*](http://stackoverflow.com/q/38922754/642706).\r\n\r\nThe [**ThreeTen-Extra**](http://www.threeten.org/threeten-extra/) project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as [`Interval`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html), [`YearWeek`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html), [`YearQuarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html), and [more](http://www.threeten.org/threeten-extra/apidocs/index.html).\r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [2]: http://www.threeten.org/threetenbp/\r\n  [3]: https://github.com/JakeWharton/ThreeTenABP\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [5]: https://en.wikipedia.org/wiki/ISO_8601","title":"Displaying date in a double digit format","body":"<h1>tl;dr</h1>\n\n<pre><code>LocalDate.now()\n         .toString()\n</code></pre>\n\n<blockquote>\n  <p>2016-01-07</p>\n</blockquote>\n\n<p>Better to always specify your desired/expected time zone explicitly.</p>\n\n<pre><code>LocalDate.now( ZoneId.of( \"America/Montreal\" ) )\n         .toString()\n</code></pre>\n\n<h1>Avoid old date-time classes</h1>\n\n<p>The java.util.Calendar class you are using is now legacy. Avoid this class, along with java.util.Date and such. These have proven to be poorly designed, confusing, and troublesome.</p>\n\n<h1>java.time</h1>\n\n<p>The old date-time classes have been supplanted by the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> framework built into Java 8 and later. Much of the functionality has been back-ported to Java 6 &amp; 7 in the <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen-Backport</a> project, and further adapted to Android in <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>.</p>\n\n<p>These modern classes can accomplish your goal in a single line of code, as seen below.</p>\n\n<h1>Date-time formatting features</h1>\n\n<p>Both the old outmoded date-time classes as well as java.time classes offer formatting features. No need for you to be writing your own formatting code.</p>\n\n<h1>Time Zone</h1>\n\n<p>Time zone is crucial to determine the date. The date varies around the world by time zone as a new day dawns earlier in the east. This issue was ignored in the Question and other Answers. If omitted, the JVMs current default time zone is implicitly applied. Better to explicitly specify your desired/expected time zone.</p>\n\n<h1><code>LocalDate</code></h1>\n\n<p>For a date-only value without time-of-day and without time zone, use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>LocalDate</code></a>. While no time zone is stored within the <code>LocalDate</code>, a time zone determines today.</p>\n\n<pre><code>ZoneId zoneId = ZoneId.of( \"America/Montreal\" );\nLocalDate today = LocalDate.now( zoneId );\n</code></pre>\n\n<h1>ISO 8601</h1>\n\n<p>Your desired format of YYYY-MM-DD with double digits happens to comply with the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard defining sensible formats for textual representations of date-time values. This standard is used by default in java.time classes for parsing/generating strings.</p>\n\n<pre><code>String output = today.toString();\n</code></pre>\n\n<p>Thats all, 3 lines of code. You could even combine them.</p>\n\n<pre><code>String output = LocalDate.now( ZoneId.of( \"America/Montreal\" ) ).toString();\n</code></pre>\n\n<hr>\n\n<h1>About <em>java.time</em></h1>\n\n<p>The <a href=\"http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Calendar.html\" rel=\"nofollow noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"http://docs.oracle.com/javase/9/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance mode</a>, advises migration to the <a href=\"http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes.</p>\n\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR 310</a>.</p>\n\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"nofollow noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"nofollow noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes.</p>\n\n<p>Where to obtain the java.time classes? </p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"nofollow noreferrer\"><strong>Java SE 9</strong></a>, and later\n\n<ul>\n<li>Built-in. </li>\n<li>Part of the standard Java API with a bundled implementation.</li>\n<li>Java 9 adds some minor features and fixes.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"nofollow noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"nofollow noreferrer\"><strong>Java SE 7</strong></a>\n\n<ul>\n<li>Much of the java.time functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><strong><em>ThreeTen-Backport</em></strong></a>.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"nofollow noreferrer\"><strong>Android</strong></a>\n\n<ul>\n<li>Later versions of Android bundle implementations of the java.time classes.</li>\n<li>For earlier Android, the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><strong><em>ThreeTenABP</em></strong></a> project adapts <em>ThreeTen-Backport</em> (mentioned above). See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP</em></a>.</li>\n</ul></li>\n</ul>\n\n<p>The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><strong>ThreeTen-Extra</strong></a> project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html\" rel=\"nofollow noreferrer\"><code>Interval</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html\" rel=\"nofollow noreferrer\"><code>YearWeek</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html\" rel=\"nofollow noreferrer\"><code>YearQuarter</code></a>, and <a href=\"http://www.threeten.org/threeten-extra/apidocs/index.html\" rel=\"nofollow noreferrer\">more</a>.</p>\n"},{"tags":[],"owner":{"account_id":4539223,"reputation":1311,"user_id":3687575,"accept_rate":78,"display_name":"Lucas Pires"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1497038671,"creation_date":1488398831,"answer_id":42541048,"question_id":10203924,"body_markdown":"# Joda-Time\n\nUsing the [Joda-Time][1] library, specifically the [`org.joda.time.DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html) class.\r\n\r\n    DateTime datetime = new DateTime(new Date());\r\n    String month = datetime.toString(&quot;MM&quot;);\r\n\r\nresult will be 2 digits\r\n\r\nIf you need for example a year you can use:\r\n\r\n    String year = datetime.toString(&quot;YYYY&quot;);\r\n\r\nresult will be 4 digits of the year.\n\n\n  [1]: http://www.joda.org/joda-time/","title":"Displaying date in a double digit format","body":"<h1>Joda-Time</h1>\n\n<p>Using the <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda-Time</a> library, specifically the <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html\" rel=\"nofollow noreferrer\"><code>org.joda.time.DateTime</code></a> class.</p>\n\n<pre><code>DateTime datetime = new DateTime(new Date());\nString month = datetime.toString(\"MM\");\n</code></pre>\n\n<p>result will be 2 digits</p>\n\n<p>If you need for example a year you can use:</p>\n\n<pre><code>String year = datetime.toString(\"YYYY\");\n</code></pre>\n\n<p>result will be 4 digits of the year.</p>\n"},{"tags":[],"owner":{"account_id":3673303,"reputation":1737,"user_id":3059941,"display_name":"srsajid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1497255859,"creation_date":1497255859,"answer_id":44494657,"question_id":10203924,"body_markdown":"You can use SimpleDateFormat class\r\n\r\n    String dates = new java.text.SimpleDateFormat(&quot;dd-MM-YYYY&quot;).format(new Date())\r\n\r\n\r\nfor more information \r\nhttps://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html\r\n","title":"Displaying date in a double digit format","body":"<p>You can use SimpleDateFormat class</p>\n\n<pre><code>String dates = new java.text.SimpleDateFormat(\"dd-MM-YYYY\").format(new Date())\n</code></pre>\n\n<p>for more information \n<a href=\"https://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html</a></p>\n"},{"tags":[],"owner":{"account_id":7059097,"reputation":85,"user_id":5405183,"display_name":"Muhammad Baqir"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1512065140,"creation_date":1512065140,"answer_id":47579908,"question_id":10203924,"body_markdown":"you can use String.format() method.\r\n\r\nexample :\r\n\r\n    String.format(&quot;%02d&quot;, month);\r\n\r\nso they would add &quot;0&quot; in front of month if the chosen month less than 10.","title":"Displaying date in a double digit format","body":"<p>you can use String.format() method.</p>\n\n<p>example :</p>\n\n<pre><code>String.format(\"%02d\", month);\n</code></pre>\n\n<p>so they would add \"0\" in front of month if the chosen month less than 10.</p>\n"},{"tags":[],"owner":{"account_id":5136764,"reputation":1350,"user_id":4115275,"accept_rate":83,"display_name":"Zee"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522259728,"creation_date":1522244658,"answer_id":49536221,"question_id":10203924,"body_markdown":"Purely using the Java 8 Time library:\r\n\r\n    String date = LocalDate.now().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;));","title":"Displaying date in a double digit format","body":"<p>Purely using the Java 8 Time library:</p>\n\n<pre><code>String date = LocalDate.now().format(DateTimeFormatter.ofPattern(\"yyyy-MM-dd\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14542256,"reputation":348,"user_id":10503567,"display_name":"Maruf Alam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672772033,"creation_date":1672772033,"answer_id":74997564,"question_id":10203924,"body_markdown":"    binding.datePicker.setOnClickListener {\r\n    \r\n                val mCurrentDate: Calendar = Calendar.getInstance()\r\n                val mYear: Int = mCurrentDate.get(Calendar.YEAR)\r\n                val mMonth: Int = mCurrentDate.get(Calendar.MONTH)\r\n                val mDay: Int = mCurrentDate.get(Calendar.DAY_OF_MONTH)\r\n    \r\n                val mDatePicker = DatePickerDialog(\r\n                    requireActivity(), R.style.DialogTheme,\r\n                    { datepicker, selectedyear, selectedmonth, selectedday -&gt;\r\n                        val selectedmonth = selectedmonth + 1\r\n    \r\n                        val mFormat = DecimalFormat(&quot;00&quot;)\r\n                        mFormat.roundingMode = RoundingMode.DOWN\r\n                        val date: String =\r\n                            mFormat.format((selectedyear)) + &quot;-&quot; + mFormat.format((selectedmonth)\r\n                            ) + &quot;-&quot; + mFormat.format((selectedday))\r\n    \r\n                        binding.edtDob.setText(date)\r\n    \r\n                    }, mYear - 18, mMonth, mDay - 1\r\n                )\r\n                // set maximum date to be selected as today\r\n                // age more then 18+\r\n                mCurrentDate.add(Calendar.YEAR, -18);\r\n                mCurrentDate.add(Calendar.DAY_OF_MONTH, -1)\r\n                mDatePicker.datePicker.maxDate = mCurrentDate.timeInMillis\r\n                mDatePicker.show()\r\n                \r\n            }\r\n\r\n&gt; **However, you only require this part.**\r\n\r\n     val mFormat = DecimalFormat(&quot;00&quot;)\r\n     mFormat.roundingMode = RoundingMode.DOWN\r\n     val date: String = mFormat.format((selectedyear)) + &quot;-&quot; + mFormat.format((selectedmonth)) + &quot;-&quot; + mFormat.format((selectedday))\r\n      binding.edtDob.setText(date)","title":"Displaying date in a double digit format","body":"<pre><code>binding.datePicker.setOnClickListener {\n\n            val mCurrentDate: Calendar = Calendar.getInstance()\n            val mYear: Int = mCurrentDate.get(Calendar.YEAR)\n            val mMonth: Int = mCurrentDate.get(Calendar.MONTH)\n            val mDay: Int = mCurrentDate.get(Calendar.DAY_OF_MONTH)\n\n            val mDatePicker = DatePickerDialog(\n                requireActivity(), R.style.DialogTheme,\n                { datepicker, selectedyear, selectedmonth, selectedday -&gt;\n                    val selectedmonth = selectedmonth + 1\n\n                    val mFormat = DecimalFormat(&quot;00&quot;)\n                    mFormat.roundingMode = RoundingMode.DOWN\n                    val date: String =\n                        mFormat.format((selectedyear)) + &quot;-&quot; + mFormat.format((selectedmonth)\n                        ) + &quot;-&quot; + mFormat.format((selectedday))\n\n                    binding.edtDob.setText(date)\n\n                }, mYear - 18, mMonth, mDay - 1\n            )\n            // set maximum date to be selected as today\n            // age more then 18+\n            mCurrentDate.add(Calendar.YEAR, -18);\n            mCurrentDate.add(Calendar.DAY_OF_MONTH, -1)\n            mDatePicker.datePicker.maxDate = mCurrentDate.timeInMillis\n            mDatePicker.show()\n            \n        }\n</code></pre>\n<blockquote>\n<p><strong>However, you only require this part.</strong></p>\n</blockquote>\n<pre><code> val mFormat = DecimalFormat(&quot;00&quot;)\n mFormat.roundingMode = RoundingMode.DOWN\n val date: String = mFormat.format((selectedyear)) + &quot;-&quot; + mFormat.format((selectedmonth)) + &quot;-&quot; + mFormat.format((selectedday))\n  binding.edtDob.setText(date)\n</code></pre>\n"}],"owner":{"account_id":1113260,"reputation":1564,"user_id":1103263,"accept_rate":86,"display_name":"The Tokenizer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72552,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":10203963,"answer_count":12,"score":26,"last_activity_date":1672772033,"creation_date":1334730246,"question_id":10203924,"body_markdown":"I am having trouble displaying the date in a double digit format.  I want it to be so that when the day or the month is a single digit example: 4  It would display 04.  I&#39;m having trouble coming up with the logic for it, if somebody can help me I would be really grateful.  \r\n\t\t\r\n\r\n    Calendar c = Calendar.getInstance();\r\n    \t\tint year = c.get(Calendar.YEAR);\r\n    \t\tint day = c.get(Calendar.DAY_OF_MONTH);\r\n    \t\tint month = c.get(Calendar.MONTH);\r\n    \r\n    \t\tif (month % 10 == 0) {\r\n    \r\n    \t\t\tPlace = 0 + month;\r\n    \t\t}\r\n    \t\tString Dates = year + &quot;-&quot; + Place + &quot;-&quot; + day;\r\n    \t\tDate.setText((Dates));","title":"Displaying date in a double digit format","body":"<p>I am having trouble displaying the date in a double digit format.  I want it to be so that when the day or the month is a single digit example: 4  It would display 04.  I'm having trouble coming up with the logic for it, if somebody can help me I would be really grateful.  </p>\n\n<pre><code>Calendar c = Calendar.getInstance();\n        int year = c.get(Calendar.YEAR);\n        int day = c.get(Calendar.DAY_OF_MONTH);\n        int month = c.get(Calendar.MONTH);\n\n        if (month % 10 == 0) {\n\n            Place = 0 + month;\n        }\n        String Dates = year + \"-\" + Place + \"-\" + day;\n        Date.setText((Dates));\n</code></pre>\n"},{"tags":["java","google-oauth","openid-connect","google-oauth-java-client"],"answers":[{"tags":[],"owner":{"account_id":2066403,"reputation":109410,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1672771393,"creation_date":1672425702,"answer_id":74964818,"question_id":74877755,"body_markdown":"The scopes \r\n\r\n- OpenID email\r\n- profile email\r\n- OpenID profile email\r\n\r\nAll result in the same default message from googles authorization server.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI can verify that `OpenId email` scopes do not appear to give you access to user profile data.  \r\n\r\nThis is just that a default message.   If its something that really bothers you i would be happy to send a message off to the team.  They mentioned a few months back they were tuning the messages this may be one of the ones that was changed.\r\n\r\n\r\n# Update from google \r\n\r\nThis is a synopsis of what i got back from google\r\n\r\n\r\n&gt;The text you are seeing is actually working as intended.\r\n\r\n&gt;An application granted access to either of the three scopes (email, openid, profile) is able to perform a new OAuth request with any of the other scopes without triggering a new prompt (you can test it by getting a token with email scope, and then requesting a new one with openid scope, for instance). It is currently not possible to grant an application access to just email address without profile picture, or just name without email address, etc.\r\n\r\n  [1]: https://i.stack.imgur.com/GhXi5.png","title":"Google OAuth consent screen mentions data that my app did not request","body":"<p>The scopes</p>\n<ul>\n<li>OpenID email</li>\n<li>profile email</li>\n<li>OpenID profile email</li>\n</ul>\n<p>All result in the same default message from googles authorization server.</p>\n<p><a href=\"https://i.stack.imgur.com/GhXi5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GhXi5.png\" alt=\"enter image description here\" /></a></p>\n<p>I can verify that <code>OpenId email</code> scopes do not appear to give you access to user profile data.</p>\n<p>This is just that a default message.   If its something that really bothers you i would be happy to send a message off to the team.  They mentioned a few months back they were tuning the messages this may be one of the ones that was changed.</p>\n<h1>Update from google</h1>\n<p>This is a synopsis of what i got back from google</p>\n<blockquote>\n<p>The text you are seeing is actually working as intended.</p>\n</blockquote>\n<blockquote>\n<p>An application granted access to either of the three scopes (email, openid, profile) is able to perform a new OAuth request with any of the other scopes without triggering a new prompt (you can test it by getting a token with email scope, and then requesting a new one with openid scope, for instance). It is currently not possible to grant an application access to just email address without profile picture, or just name without email address, etc.</p>\n</blockquote>\n"}],"owner":{"account_id":4922,"reputation":4885,"user_id":7641,"accept_rate":83,"display_name":"Jens Bannmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":684,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":74964818,"answer_count":1,"score":6,"last_activity_date":1672771393,"creation_date":1671633917,"question_id":74877755,"body_markdown":"My webapp uses &quot;Sign In with Google for Web&quot; (`https://accounts.google.com/gsi/client` script). For various reasons, I now want to get rid of the JS library and implement the required steps using only [Google OAuth Client Library for Java](https://developers.google.com/api-client-library/java/google-oauth-java-client), version 1.34.1.\r\n\r\nWhile the process itself works, I&#39;m annoyed by the fact that despite my app only asking for `openid email` scopes, Google displays the following message at the bottom of the consent (account chooser) dialog:\r\n\r\n&gt; To continue, Google will share your name, email address, language preference, and profile picture with APPNAME.\r\n\r\nThis message is highly misleading for my users because despite this message, the tokens do not include any scopes that would allow my app to read the full name, profile picture or other details - only `openid https://www.googleapis.com/auth/userinfo.email` (equivalent to `openid email`) just as I asked. I intentionally did not include `profile` in the scopes list because my app only needs the account ID (for matching the app account) and the email address.\r\n\r\nWhy does that happen? Am I doing something wrong? When I used the Google Identity client library, no such message appeared. From the [documentation](https://developers.google.com/identity/openid-connect/openid-connect#authenticationuriparameters), there seems to be no way to influence that behavior.\r\n\r\nHere is the URL I redirect to (with added newlines for readability). It was built using [AuthorizationCodeFlow](https://cloud.google.com/java/docs/reference/google-oauth-client/latest/com.google.api.client.auth.oauth2.AuthorizationCodeFlow).\r\n\r\n```\r\nhttps://accounts.google.com/o/oauth2/auth\r\n?access_type=offline\r\n&amp;client_id=MYID.apps.googleusercontent.com\r\n&amp;redirect_uri=MYURL\r\n&amp;response_type=code\r\n&amp;scope=openid%20email\r\n&amp;state=MYSTATE\r\n&amp;nonce=MYNONCE\r\n```\r\n\r\n### Update 1 ###\r\n\r\nThe same thing happens when using the [Google OAuth 2.0 Playground](https://developers.google.com/oauthplayground/) and entering `openid email`. It redirects to [this URL](https://accounts.google.com/o/oauth2/v2/auth/oauthchooseaccount?redirect_uri=https%3A%2F%2Fdevelopers.google.com%2Foauthplayground&amp;prompt=consent&amp;response_type=code&amp;client_id=407408718192.apps.googleusercontent.com&amp;scope=openid%20email&amp;access_type=offline&amp;service=lso&amp;o2v=2&amp;flowName=GeneralOAuthFlow):\r\n\r\n```\r\nhttps://accounts.google.com/o/oauth2/v2/auth/oauthchooseaccount\r\n?redirect_uri=https%3A%2F%2Fdevelopers.google.com%2Foauthplayground\r\n&amp;prompt=consent\r\n&amp;response_type=code\r\n&amp;client_id=407408718192.apps.googleusercontent.com\r\n&amp;scope=openid%20email\r\n&amp;access_type=offline\r\n&amp;service=lso\r\n&amp;o2v=2\r\n&amp;flowName=GeneralOAuthFlow\r\n```\r\n\r\n[![Screenshot of Google consent screen with the text &quot;To continue, Google will share your name, email address, language preference, and profile picture with Google OAuth 2.0 Playground.&quot; at the bottom. The words &quot;your name&quot;, &quot;language preference, and and profile picture&quot; are highlighted in yellow.][1]][1]\r\n\r\n### Update 2 ###\r\n\r\nFor comparison, this is how the consent screen of a competitor looks like when asking for `openid email`:\r\n\r\n[![Screenshot of Microsoft consent screen with the text &quot;REDACTED will be able to sign you in, and assign a unique and anonymous ID to your account. REDACTED will be able to read your primary email address.&quot;][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JMQj3.png\r\n  [2]: https://i.stack.imgur.com/58TRR.png","title":"Google OAuth consent screen mentions data that my app did not request","body":"<p>My webapp uses &quot;Sign In with Google for Web&quot; (<code>https://accounts.google.com/gsi/client</code> script). For various reasons, I now want to get rid of the JS library and implement the required steps using only <a href=\"https://developers.google.com/api-client-library/java/google-oauth-java-client\" rel=\"nofollow noreferrer\">Google OAuth Client Library for Java</a>, version 1.34.1.</p>\n<p>While the process itself works, I'm annoyed by the fact that despite my app only asking for <code>openid email</code> scopes, Google displays the following message at the bottom of the consent (account chooser) dialog:</p>\n<blockquote>\n<p>To continue, Google will share your name, email address, language preference, and profile picture with APPNAME.</p>\n</blockquote>\n<p>This message is highly misleading for my users because despite this message, the tokens do not include any scopes that would allow my app to read the full name, profile picture or other details - only <code>openid https://www.googleapis.com/auth/userinfo.email</code> (equivalent to <code>openid email</code>) just as I asked. I intentionally did not include <code>profile</code> in the scopes list because my app only needs the account ID (for matching the app account) and the email address.</p>\n<p>Why does that happen? Am I doing something wrong? When I used the Google Identity client library, no such message appeared. From the <a href=\"https://developers.google.com/identity/openid-connect/openid-connect#authenticationuriparameters\" rel=\"nofollow noreferrer\">documentation</a>, there seems to be no way to influence that behavior.</p>\n<p>Here is the URL I redirect to (with added newlines for readability). It was built using <a href=\"https://cloud.google.com/java/docs/reference/google-oauth-client/latest/com.google.api.client.auth.oauth2.AuthorizationCodeFlow\" rel=\"nofollow noreferrer\">AuthorizationCodeFlow</a>.</p>\n<pre><code>https://accounts.google.com/o/oauth2/auth\n?access_type=offline\n&amp;client_id=MYID.apps.googleusercontent.com\n&amp;redirect_uri=MYURL\n&amp;response_type=code\n&amp;scope=openid%20email\n&amp;state=MYSTATE\n&amp;nonce=MYNONCE\n</code></pre>\n<h3>Update 1</h3>\n<p>The same thing happens when using the <a href=\"https://developers.google.com/oauthplayground/\" rel=\"nofollow noreferrer\">Google OAuth 2.0 Playground</a> and entering <code>openid email</code>. It redirects to <a href=\"https://accounts.google.com/o/oauth2/v2/auth/oauthchooseaccount?redirect_uri=https%3A%2F%2Fdevelopers.google.com%2Foauthplayground&amp;prompt=consent&amp;response_type=code&amp;client_id=407408718192.apps.googleusercontent.com&amp;scope=openid%20email&amp;access_type=offline&amp;service=lso&amp;o2v=2&amp;flowName=GeneralOAuthFlow\" rel=\"nofollow noreferrer\">this URL</a>:</p>\n<pre><code>https://accounts.google.com/o/oauth2/v2/auth/oauthchooseaccount\n?redirect_uri=https%3A%2F%2Fdevelopers.google.com%2Foauthplayground\n&amp;prompt=consent\n&amp;response_type=code\n&amp;client_id=407408718192.apps.googleusercontent.com\n&amp;scope=openid%20email\n&amp;access_type=offline\n&amp;service=lso\n&amp;o2v=2\n&amp;flowName=GeneralOAuthFlow\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/JMQj3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JMQj3.png\" alt=\"Screenshot of Google consent screen with the text &quot;To continue, Google will share your name, email address, language preference, and profile picture with Google OAuth 2.0 Playground.&quot; at the bottom. The words &quot;your name&quot;, &quot;language preference, and and profile picture&quot; are highlighted in yellow.\" /></a></p>\n<h3>Update 2</h3>\n<p>For comparison, this is how the consent screen of a competitor looks like when asking for <code>openid email</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/58TRR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/58TRR.png\" alt=\"Screenshot of Microsoft consent screen with the text &quot;REDACTED will be able to sign you in, and assign a unique and anonymous ID to your account. REDACTED will be able to read your primary email address.&quot;\" /></a></p>\n"},{"tags":["java","flutter","spring-boot","websocket"],"owner":{"account_id":13287766,"reputation":332,"user_id":9593286,"display_name":"KijeviGombooc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672771201,"creation_date":1672771201,"question_id":74997419,"body_markdown":"I have tried many combinations of the values below, I have no idea why it isn&#39;t working. I don&#39;t even know if the problem is with frontend or backend setup. I pasted the relevant code parts below.\r\n\r\nFLutter says the following when I try to connect (MYIPADDRESS is a valid IP address, the IP address of the pc):\r\n```\r\nWebSocketChannelException: WebSocketChannelException: WebSocketException: Connection to &#39;http://MYIPADDRESS:8080/topic/greetings#&#39; was not upgraded to websocket\r\n```\r\nHere is the backend/spring-boot controller part:\r\n```\r\n@MessageMapping(&quot;/hello&quot;)\r\n@SendTo(&quot;/topic/greetings&quot;)\r\npublic String send(final String message) throws Exception {\r\n    return message;\r\n}\r\n```\r\n\r\nHere is the backend/spring-boot configuration part:\r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n    @Override\r\n    public void configureMessageBroker(MessageBrokerRegistry config) {\r\n        config.enableSimpleBroker(&quot;/topic&quot;);\r\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n         registry.addEndpoint(&quot;/websocket&quot;).withSockJS();\r\n    }\r\n}\r\n```\r\nHere is the frontend/flutter part:\r\n```\r\nfinal channel = IOWebSocketChannel.connect(\r\n  Uri(\r\n    scheme: &quot;ws&quot;,\r\n    host: &quot;MYIPADDRESS&quot;,\r\n    port: 8080,\r\n    path: &quot;/topic/greetings&quot;,\r\n  ),\r\n);\r\n```","title":"How to get Flutter WebSocket working with spring-boot backend?","body":"<p>I have tried many combinations of the values below, I have no idea why it isn't working. I don't even know if the problem is with frontend or backend setup. I pasted the relevant code parts below.</p>\n<p>FLutter says the following when I try to connect (MYIPADDRESS is a valid IP address, the IP address of the pc):</p>\n<pre><code>WebSocketChannelException: WebSocketChannelException: WebSocketException: Connection to 'http://MYIPADDRESS:8080/topic/greetings#' was not upgraded to websocket\n</code></pre>\n<p>Here is the backend/spring-boot controller part:</p>\n<pre><code>@MessageMapping(&quot;/hello&quot;)\n@SendTo(&quot;/topic/greetings&quot;)\npublic String send(final String message) throws Exception {\n    return message;\n}\n</code></pre>\n<p>Here is the backend/spring-boot configuration part:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config) {\n        config.enableSimpleBroker(&quot;/topic&quot;);\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n         registry.addEndpoint(&quot;/websocket&quot;).withSockJS();\n    }\n}\n</code></pre>\n<p>Here is the frontend/flutter part:</p>\n<pre><code>final channel = IOWebSocketChannel.connect(\n  Uri(\n    scheme: &quot;ws&quot;,\n    host: &quot;MYIPADDRESS&quot;,\n    port: 8080,\n    path: &quot;/topic/greetings&quot;,\n  ),\n);\n</code></pre>\n"},{"tags":["java","spring","hibernate","spring-boot"],"comments":[{"owner":{"account_id":9706811,"reputation":2870,"user_id":7200018,"display_name":"GnanaJeyam"},"score":0,"creation_date":1575049346,"post_id":59108626,"comment_id":104449647,"body_markdown":"The issue is you are setting null created_at. It&#39;s not null constraint.","body":"The issue is you are setting null created_at. It&#39;s not null constraint."},{"owner":{"account_id":7426112,"reputation":1103,"user_id":5648526,"display_name":"Vinaya Nayak"},"score":0,"creation_date":1575061186,"post_id":59108626,"comment_id":104452962,"body_markdown":"Actually i am not setting it. The code is automatically doing it. It should automatically update it right?","body":"Actually i am not setting it. The code is automatically doing it. It should automatically update it right?"},{"owner":{"account_id":1894993,"reputation":1129,"user_id":1712172,"display_name":"code_mechanic"},"score":0,"creation_date":1599763481,"post_id":59108626,"comment_id":112882641,"body_markdown":"@VinayaNayak How can you be so sure that code is setting `created_at`?","body":"@VinayaNayak How can you be so sure that code is setting <code>created_at</code>?"}],"answers":[{"tags":[],"owner":{"account_id":11294036,"reputation":21,"user_id":8282054,"display_name":"gentisylejmani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575051093,"creation_date":1575051093,"answer_id":59109428,"question_id":59108626,"body_markdown":"give a default timestamp value when creating the table like \r\n\r\n    created_at timestamp without time zone default CURRENT_TIMESTAMP NOT NULL\r\n\r\nor set the columnDefinition property for @Column annotation specific to database provider and use @Temporal.  ex psql:\r\n\r\n    @Column(columnDefinition = &quot;TIMESTAMP DEFAULT CURRENT_TIMESTAMP&quot;, nullable = false)\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    private java.util.Date createdAt","title":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL","body":"<p>give a default timestamp value when creating the table like </p>\n\n<pre><code>created_at timestamp without time zone default CURRENT_TIMESTAMP NOT NULL\n</code></pre>\n\n<p>or set the columnDefinition property for @Column annotation specific to database provider and use @Temporal.  ex psql:</p>\n\n<pre><code>@Column(columnDefinition = \"TIMESTAMP DEFAULT CURRENT_TIMESTAMP\", nullable = false)\n@Temporal(TemporalType.TIMESTAMP)\nprivate java.util.Date createdAt\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13993168,"reputation":1,"user_id":10106681,"display_name":"Jhonnatan Yontonel Sotelo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1672770558,"creation_date":1670518730,"answer_id":74733785,"question_id":59108626,"body_markdown":"That&#39;s a SQL syntax problem. Review your model class configuration or if data is ok about the database. ","title":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL","body":"<p>That's a SQL syntax problem. Review your model class configuration or if data is ok about the database.</p>\n"},{"tags":[],"owner":{"account_id":22908132,"reputation":31,"user_id":17045864,"display_name":"Adarsh Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670840082,"creation_date":1670840082,"answer_id":74769543,"question_id":59108626,"body_markdown":"I was facing this same DataIntegerityVoilation error because I was violating length property of a column in Entity.\r\n\r\n    @Column(name= &quot;trade_id&quot;, length = 20, nullable = false)\r\n    private tradeId;\r\n\r\nSo, you cannot enter tradeId of length more than 20.\r\n\r\n","title":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL","body":"<p>I was facing this same DataIntegerityVoilation error because I was violating length property of a column in Entity.</p>\n<pre><code>@Column(name= &quot;trade_id&quot;, length = 20, nullable = false)\nprivate tradeId;\n</code></pre>\n<p>So, you cannot enter tradeId of length more than 20.</p>\n"}],"owner":{"account_id":7426112,"reputation":1103,"user_id":5648526,"display_name":"Vinaya Nayak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1672770558,"creation_date":1575046555,"question_id":59108626,"body_markdown":"**This is my entity class**\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;sofort_payment&quot;)\r\n@Data\r\n@EqualsAndHashCode(callSuper = true)\r\n@Accessors(chain = true)\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\n@ToString\r\npublic class SofortPaymentEntity extends BasicEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(generator = &quot;UUID&quot;)\r\n    @GenericGenerator(name = &quot;UUID&quot;, strategy = &quot;org.hibernate.id.UUIDGenerator&quot;)\r\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\r\n    private UUID id;\r\n    @Column(name = &quot;referenced_transaction&quot;)\r\n    private UUID referencedTransaction;\r\n    @Column(name = &quot;status&quot;)\r\n    private String status;\r\n    @Column(name = &quot;reason&quot;)\r\n    private String reason;\r\n    @Column(name = &quot;external_payment_id&quot;)\r\n    private String externalPaymentId;\r\n    @Column(name = &quot;currency&quot;)\r\n    private String currency;\r\n    @Column(name = &quot;amount&quot;)\r\n    private BigDecimal amount;\r\n    @Column(name = &quot;iban&quot;)\r\n    private String iban;\r\n    @Column(name = &quot;back_name&quot;)\r\n    private String bankName;\r\n    @Column(name = &quot;sender_holder&quot;)\r\n    private String senderHolder;\r\n    @Column(name = &quot;bic&quot;)\r\n    private String bic;\r\n    @Column(name = &quot;bank_code&quot;)\r\n    private String bankCode;\r\n    @Column(name = &quot;country_code&quot;)\r\n    private String countryCode;\r\n\r\n}\r\n```\r\n**My basic Entity class**\r\n```\r\n@MappedSuperclass\r\n@Data\r\n@Accessors(chain = true)\r\npublic abstract class BasicEntity {\r\n  @Column(name = &quot;created_at&quot;)\r\n  @CreationTimestamp\r\n  private LocalDateTime createdAt;\r\n  @Column(name = &quot;updated_at&quot;)\r\n  @UpdateTimestamp\r\n  private LocalDateTime updatedAt;\r\n}\r\n\r\n```\r\n\r\n**My table structure :**\r\n```\r\ncreate table sofort_payment\r\n(\r\n    id                          UUID         NOT NULL\r\n        constraint sofort_payment_pkey primary key,\r\n    referenced_transaction      UUID references transaction(id) NOT NULL,\r\n    status                      varchar(255) NOT NULL,\r\n\t  reason                      text,\r\n    external_payment_id         varchar(255) NOT NULL,\r\n    currency                    varchar(255) NOT NULL,\r\n    amount                      numeric(19, 2) NOT NULL,\r\n\t  iban                        varchar(255) NOT NULL,\r\n\t  back_name                   varchar(255) NOT NULL,\r\n    sender_holder               varchar(255) NOT NULL,\r\n    bic                         varchar(255) NOT NULL,\r\n    bank_code                   varchar(255) NOT NULL,\r\n    country_code                varchar(255) NOT NULL,\r\n    created_at                  timestamp without time zone NOT NULL,\r\n    updated_at                  timestamp without time zone NOT NULL\r\n);\r\n\r\n```\r\n\r\nbut when I try to print the SofortPaymentEntity it does not print the crated_dt and update_dt and when I try to update it throws the following exception. This table already has the entry which means that it is created first and now I am trying to update it\r\n\r\n```\r\nsofortPaymentRepository.save(sofortPaymentEntity.builder()\r\n                                                 .id(sofortPaymentEntity.getId())\r\n                                                 .referencedTransaction(sofortPaymentEntity.getReferencedTransaction())\r\n                                                 .externalPaymentId(statusNotification.getTransId())\r\n                                                 .amount(BigDecimal.valueOf(paymentTransactionDetails.getAmount()))\r\n                                                 .currency(paymentTransactionDetails.getCurrencyCode())\r\n                                                 .reason(paymentTransactionDetails.getStatusReason().toString())\r\n                                                 .bankCode(paymentTransactionDetails.getSender().getBankCode())\r\n                                                 .bankName(paymentTransactionDetails.getSender().getBankName())\r\n                                                 .bic(paymentTransactionDetails.getSender().getBic())\r\n                                                 .iban(paymentTransactionDetails.getSender().getIban())\r\n                                                 .countryCode(paymentTransactionDetails.getSender().getCountryCode())\r\n                                                 .senderHolder(paymentTransactionDetails.getSender().getHolder())\r\n                                                 .status(paymentTransactionDetails.getStatus().toString()).build());\r\n```\r\n**ERROR**: \r\n\r\n\r\n    null value in column &quot;created_at&quot; violates not-null constraint\r\n\r\n\r\n**Generic exception caught**: \r\n\r\n    org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; \r\n    constraint [created_at]; \r\n    nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:296)\r\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:253)\r\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:536)\r\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746)\r\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714)\r\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:534)\r\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:305)\r\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:138)\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    at org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61)\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)","title":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL","body":"<p><strong>This is my entity class</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;sofort_payment&quot;)\n@Data\n@EqualsAndHashCode(callSuper = true)\n@Accessors(chain = true)\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@ToString\npublic class SofortPaymentEntity extends BasicEntity {\n\n    @Id\n    @GeneratedValue(generator = &quot;UUID&quot;)\n    @GenericGenerator(name = &quot;UUID&quot;, strategy = &quot;org.hibernate.id.UUIDGenerator&quot;)\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\n    private UUID id;\n    @Column(name = &quot;referenced_transaction&quot;)\n    private UUID referencedTransaction;\n    @Column(name = &quot;status&quot;)\n    private String status;\n    @Column(name = &quot;reason&quot;)\n    private String reason;\n    @Column(name = &quot;external_payment_id&quot;)\n    private String externalPaymentId;\n    @Column(name = &quot;currency&quot;)\n    private String currency;\n    @Column(name = &quot;amount&quot;)\n    private BigDecimal amount;\n    @Column(name = &quot;iban&quot;)\n    private String iban;\n    @Column(name = &quot;back_name&quot;)\n    private String bankName;\n    @Column(name = &quot;sender_holder&quot;)\n    private String senderHolder;\n    @Column(name = &quot;bic&quot;)\n    private String bic;\n    @Column(name = &quot;bank_code&quot;)\n    private String bankCode;\n    @Column(name = &quot;country_code&quot;)\n    private String countryCode;\n\n}\n</code></pre>\n<p><strong>My basic Entity class</strong></p>\n<pre><code>@MappedSuperclass\n@Data\n@Accessors(chain = true)\npublic abstract class BasicEntity {\n  @Column(name = &quot;created_at&quot;)\n  @CreationTimestamp\n  private LocalDateTime createdAt;\n  @Column(name = &quot;updated_at&quot;)\n  @UpdateTimestamp\n  private LocalDateTime updatedAt;\n}\n\n</code></pre>\n<p><strong>My table structure :</strong></p>\n<pre><code>create table sofort_payment\n(\n    id                          UUID         NOT NULL\n        constraint sofort_payment_pkey primary key,\n    referenced_transaction      UUID references transaction(id) NOT NULL,\n    status                      varchar(255) NOT NULL,\n      reason                      text,\n    external_payment_id         varchar(255) NOT NULL,\n    currency                    varchar(255) NOT NULL,\n    amount                      numeric(19, 2) NOT NULL,\n      iban                        varchar(255) NOT NULL,\n      back_name                   varchar(255) NOT NULL,\n    sender_holder               varchar(255) NOT NULL,\n    bic                         varchar(255) NOT NULL,\n    bank_code                   varchar(255) NOT NULL,\n    country_code                varchar(255) NOT NULL,\n    created_at                  timestamp without time zone NOT NULL,\n    updated_at                  timestamp without time zone NOT NULL\n);\n\n</code></pre>\n<p>but when I try to print the SofortPaymentEntity it does not print the crated_dt and update_dt and when I try to update it throws the following exception. This table already has the entry which means that it is created first and now I am trying to update it</p>\n<pre><code>sofortPaymentRepository.save(sofortPaymentEntity.builder()\n                                                 .id(sofortPaymentEntity.getId())\n                                                 .referencedTransaction(sofortPaymentEntity.getReferencedTransaction())\n                                                 .externalPaymentId(statusNotification.getTransId())\n                                                 .amount(BigDecimal.valueOf(paymentTransactionDetails.getAmount()))\n                                                 .currency(paymentTransactionDetails.getCurrencyCode())\n                                                 .reason(paymentTransactionDetails.getStatusReason().toString())\n                                                 .bankCode(paymentTransactionDetails.getSender().getBankCode())\n                                                 .bankName(paymentTransactionDetails.getSender().getBankName())\n                                                 .bic(paymentTransactionDetails.getSender().getBic())\n                                                 .iban(paymentTransactionDetails.getSender().getIban())\n                                                 .countryCode(paymentTransactionDetails.getSender().getCountryCode())\n                                                 .senderHolder(paymentTransactionDetails.getSender().getHolder())\n                                                 .status(paymentTransactionDetails.getStatus().toString()).build());\n</code></pre>\n<p><strong>ERROR</strong>:</p>\n<pre><code>null value in column &quot;created_at&quot; violates not-null constraint\n</code></pre>\n<p><strong>Generic exception caught</strong>:</p>\n<pre><code>org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; \nconstraint [created_at]; \nnested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\nat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:296)\nat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:253)\nat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:536)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714)\nat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:534)\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:305)\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:138)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n</code></pre>\n"},{"tags":["java","excel","pivot","field"],"answers":[{"tags":[],"owner":{"account_id":4153548,"reputation":1826,"user_id":3405358,"display_name":"Amjad Sahi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672769965,"creation_date":1672769965,"answer_id":74997213,"question_id":74954836,"body_markdown":"Aspose.Cells for Java can serve your needs. You may add conditional formattings to pivot table fields (row, column, data, etc.). \r\n\r\nThere are relevant APIs (method overloads, etc.) for the purpose:\r\n\r\n - PivotFormatCondition.addDataAreaCondition(string fieldName) method\r\n   which adds PivotTable conditional format limit in the data fields.\r\n   \r\n - PivotFormatCondition.addDataAreaCondition(PivotField dataField)\r\n   method which adds PivotTable conditional format limit in the data\r\n   fields.\r\n   \r\n - PivotFormatCondition.addRowAreaCondition(string fieldName) method\r\n   which adds PivotTable conditional format range limit in the row\r\n   fields.\r\n   \r\n - PivotFormatCondition.addRowAreaCondition(PivotField rowField) method\r\n   which adds PivotTable conditional format range limit in the row\r\n   fields.\r\n   \r\n - PivotFormatCondition.addColumnAreaCondition(string fieldName) method\r\n   which adds PivotTable conditional format range limit in the column\r\n   fields.\r\n   \r\n - PivotFormatCondition.addColumnAreaCondition(PivotField columnField)\r\n   method which adds PivotTable conditional format range limit in the\r\n   column fields.\r\n   \r\n - PivotFormatCondition.setConditionalAreas() method which sets\r\n   conditional areas of PivotFormatCondition object.\r\n\r\ne.g.\r\n\r\n**Sample code:**\r\n```java\r\n        String filePath = &quot;........&quot;;\r\n        Workbook workbook = new Workbook(filePath + &quot;Book1.xlsx&quot;);\r\n        //Get the first pivot table in the first worksheet.\r\n        PivotTable pivot = workbook.getWorksheets().get(0).getPivotTables().get(0);\r\n\r\n        PivotFormatConditionCollection pfcs = pivot.getPivotFormatConditions();\r\n        //clear all the current conditional formats (if required).\r\n        pfcs.clear();\r\n        workbook.getWorksheets().get(0).getConditionalFormattings().clear();\r\n\r\n        //Add new conditional formatting\r\n        int pIndex = pfcs.add();\r\n        PivotFormatCondition pfc = pfcs.get(pIndex);\r\n        pfc.setScopeType(PivotConditionFormatScopeType.FIELD);\r\n\r\n        //Sample code 1:\r\n        pfc.addDataAreaCondition(&quot;myDataField1&quot;);\r\n        pfc.addRowAreaCondition(&quot;myRowField&quot;);\r\n        //Or\r\n        //Sample code 2:\r\n        // pfc.addDataAreaCondition(pivot.DataFields[2]);\r\n        // pfc.addRowAreaCondition(pivot.RowFields[0]);\r\n\r\n        pfc.setConditionalAreas();\r\n\r\n        FormatConditionCollection fcc = pfc.getFormatConditions();\r\n        int idx = fcc.addCondition(FormatConditionType.CELL_VALUE);\r\n        FormatCondition fc = fcc.get(idx);\r\n        fc.setFormula1(&quot;0.4&quot;);\r\n        fc.setOperator(OperatorType.GREATER_OR_EQUAL);\r\n        fc.getStyle().setBackgroundColor(com.aspose.cells.Color.getRed());\r\n\r\n        workbook.save(filePath + &quot;out.xlsx&quot;);\r\n        workbook.save(filePath + &quot;out.pdf&quot;);\r\n```\r\n\r\nYou may also post your queries or comments in other [forums][1]. \r\n\r\nPS. I am working as Support developer/ Evangelist at Aspose.\r\n\r\n\r\n  [1]: https://forum.aspose.com/c/cells/9","title":"Java Excel Pivot Table Field Conditional Formatting","body":"<p>Aspose.Cells for Java can serve your needs. You may add conditional formattings to pivot table fields (row, column, data, etc.).</p>\n<p>There are relevant APIs (method overloads, etc.) for the purpose:</p>\n<ul>\n<li><p>PivotFormatCondition.addDataAreaCondition(string fieldName) method\nwhich adds PivotTable conditional format limit in the data fields.</p>\n</li>\n<li><p>PivotFormatCondition.addDataAreaCondition(PivotField dataField)\nmethod which adds PivotTable conditional format limit in the data\nfields.</p>\n</li>\n<li><p>PivotFormatCondition.addRowAreaCondition(string fieldName) method\nwhich adds PivotTable conditional format range limit in the row\nfields.</p>\n</li>\n<li><p>PivotFormatCondition.addRowAreaCondition(PivotField rowField) method\nwhich adds PivotTable conditional format range limit in the row\nfields.</p>\n</li>\n<li><p>PivotFormatCondition.addColumnAreaCondition(string fieldName) method\nwhich adds PivotTable conditional format range limit in the column\nfields.</p>\n</li>\n<li><p>PivotFormatCondition.addColumnAreaCondition(PivotField columnField)\nmethod which adds PivotTable conditional format range limit in the\ncolumn fields.</p>\n</li>\n<li><p>PivotFormatCondition.setConditionalAreas() method which sets\nconditional areas of PivotFormatCondition object.</p>\n</li>\n</ul>\n<p>e.g.</p>\n<p><strong>Sample code:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>        String filePath = &quot;........&quot;;\n        Workbook workbook = new Workbook(filePath + &quot;Book1.xlsx&quot;);\n        //Get the first pivot table in the first worksheet.\n        PivotTable pivot = workbook.getWorksheets().get(0).getPivotTables().get(0);\n\n        PivotFormatConditionCollection pfcs = pivot.getPivotFormatConditions();\n        //clear all the current conditional formats (if required).\n        pfcs.clear();\n        workbook.getWorksheets().get(0).getConditionalFormattings().clear();\n\n        //Add new conditional formatting\n        int pIndex = pfcs.add();\n        PivotFormatCondition pfc = pfcs.get(pIndex);\n        pfc.setScopeType(PivotConditionFormatScopeType.FIELD);\n\n        //Sample code 1:\n        pfc.addDataAreaCondition(&quot;myDataField1&quot;);\n        pfc.addRowAreaCondition(&quot;myRowField&quot;);\n        //Or\n        //Sample code 2:\n        // pfc.addDataAreaCondition(pivot.DataFields[2]);\n        // pfc.addRowAreaCondition(pivot.RowFields[0]);\n\n        pfc.setConditionalAreas();\n\n        FormatConditionCollection fcc = pfc.getFormatConditions();\n        int idx = fcc.addCondition(FormatConditionType.CELL_VALUE);\n        FormatCondition fc = fcc.get(idx);\n        fc.setFormula1(&quot;0.4&quot;);\n        fc.setOperator(OperatorType.GREATER_OR_EQUAL);\n        fc.getStyle().setBackgroundColor(com.aspose.cells.Color.getRed());\n\n        workbook.save(filePath + &quot;out.xlsx&quot;);\n        workbook.save(filePath + &quot;out.pdf&quot;);\n</code></pre>\n<p>You may also post your queries or comments in other <a href=\"https://forum.aspose.com/c/cells/9\" rel=\"nofollow noreferrer\">forums</a>.</p>\n<p>PS. I am working as Support developer/ Evangelist at Aspose.</p>\n"}],"owner":{"account_id":5917684,"reputation":59,"user_id":4655974,"display_name":"Miroslav Kovarik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672769965,"creation_date":1672338701,"question_id":74954836,"body_markdown":"Please, could you advise, how to set up a Conditional formatting related to the MS Excel Pivot Table Data Field (not to the Excel sheet cell !).  The Excel pivot table is created via Java Apache Poi. I need a pure Java solution either via the Apache Poi library or via Spire.XLS or Aspose library. I prefer open source solution but if there is no other option I would welcome paid library if the solution works well. I failed searching this via Google Worldwide. Thank you very much. Miroslav","title":"Java Excel Pivot Table Field Conditional Formatting","body":"<p>Please, could you advise, how to set up a Conditional formatting related to the MS Excel Pivot Table Data Field (not to the Excel sheet cell !).  The Excel pivot table is created via Java Apache Poi. I need a pure Java solution either via the Apache Poi library or via Spire.XLS or Aspose library. I prefer open source solution but if there is no other option I would welcome paid library if the solution works well. I failed searching this via Google Worldwide. Thank you very much. Miroslav</p>\n"},{"tags":["java","spring","spring-boot","formatting","freemarker"],"comments":[{"owner":{"account_id":12051589,"reputation":1279,"user_id":8814332,"display_name":"Risalat Zaman"},"score":0,"creation_date":1672765188,"post_id":74996318,"comment_id":132346059,"body_markdown":"Does this answer your question? [How to capitalize the first letter of word in a string using Java?](https://stackoverflow.com/questions/5725892/how-to-capitalize-the-first-letter-of-word-in-a-string-using-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5725892/how-to-capitalize-the-first-letter-of-word-in-a-string-using-java\">How to capitalize the first letter of word in a string using Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":18532310,"reputation":11,"user_id":13502779,"display_name":"Manuel Motta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672768034,"creation_date":1672765924,"answer_id":74996517,"question_id":74996318,"body_markdown":"You can create a method that formats the word you want. In the example my method `format` enters a String which no matter how it is structured, it returns it with the first one in uppercase and the others in lowercase. You can see that I enter the word &quot;ANIMAL&quot; and it would return &quot;Animal&quot;. It doesn&#39;t matter if the word is &quot;aNiMaL&quot;, it always returns the same.\r\n```java\r\npublic class Main {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tString str = &quot;ANIMAL&quot;;\r\n\t\tSystem.out.println(format(str)); // result: Animal\r\n\t}\r\n\t\r\n\tpublic static String format(String input) {\r\n\t\treturn input.substring(0, 1).toUpperCase() + input.substring(1).toLowerCase();\r\n\t}\r\n}\r\n```\r\nFor use in FreeMarker:\r\nModify the getters in the attributes where you want to format the String.\r\n\r\n```java\r\npublic class entity {\r\n    private String a;\r\n    public String getA() {\r\n        return format(this.a);\r\n    }\r\n}\r\n```","title":"Text formatting (first letter uppercase, rest lowercase) in Apache FreeMarker","body":"<p>You can create a method that formats the word you want. In the example my method <code>format</code> enters a String which no matter how it is structured, it returns it with the first one in uppercase and the others in lowercase. You can see that I enter the word &quot;ANIMAL&quot; and it would return &quot;Animal&quot;. It doesn't matter if the word is &quot;aNiMaL&quot;, it always returns the same.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n    public static void main(String[] args) {\n        String str = &quot;ANIMAL&quot;;\n        System.out.println(format(str)); // result: Animal\n    }\n    \n    public static String format(String input) {\n        return input.substring(0, 1).toUpperCase() + input.substring(1).toLowerCase();\n    }\n}\n</code></pre>\n<p>For use in FreeMarker:\nModify the getters in the attributes where you want to format the String.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class entity {\n    private String a;\n    public String getA() {\n        return format(this.a);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":472248,"reputation":19503,"user_id":880619,"accept_rate":100,"display_name":"Jasper de Vries"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672769848,"creation_date":1672769848,"answer_id":74997195,"question_id":74996318,"body_markdown":"You could combine [`?lower_case`](https://freemarker.apache.org/docs/ref_builtins_string.html#ref_builtin_lower_case) and [`?cap_first`](https://freemarker.apache.org/docs/ref_builtins_string.html#ref_builtin_cap_first):\r\n\r\n```\r\n${&quot;ANIMAL&quot;?lower_case?cap_first}\r\n```\r\n\r\nResults in:\r\n\r\n```\r\nAnimal\r\n```\r\n","title":"Text formatting (first letter uppercase, rest lowercase) in Apache FreeMarker","body":"<p>You could combine <a href=\"https://freemarker.apache.org/docs/ref_builtins_string.html#ref_builtin_lower_case\" rel=\"nofollow noreferrer\"><code>?lower_case</code></a> and <a href=\"https://freemarker.apache.org/docs/ref_builtins_string.html#ref_builtin_cap_first\" rel=\"nofollow noreferrer\"><code>?cap_first</code></a>:</p>\n<pre><code>${&quot;ANIMAL&quot;?lower_case?cap_first}\n</code></pre>\n<p>Results in:</p>\n<pre><code>Animal\n</code></pre>\n"}],"owner":{"account_id":27275565,"reputation":89,"user_id":20796242,"display_name":"diho472"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":854,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1672769848,"creation_date":1672764877,"question_id":74996318,"body_markdown":"How do I format text in **Apache FreeMarker**?\r\n\r\nI would like to add a new formatter that would format the value (taken from json). For example, the text `ANIMAL`would be formatted to `Animal`(ideally it would also work if the word `animal`was lowercase and it would format it to `Animal`).\r\n\r\nI checked the available built-in functions for strings, but I can&#39;t find this particular one. https://freemarker.apache.org/docs/ref_builtins_string.html","title":"Text formatting (first letter uppercase, rest lowercase) in Apache FreeMarker","body":"<p>How do I format text in <strong>Apache FreeMarker</strong>?</p>\n<p>I would like to add a new formatter that would format the value (taken from json). For example, the text <code>ANIMAL</code>would be formatted to <code>Animal</code>(ideally it would also work if the word <code>animal</code>was lowercase and it would format it to <code>Animal</code>).</p>\n<p>I checked the available built-in functions for strings, but I can't find this particular one. <a href=\"https://freemarker.apache.org/docs/ref_builtins_string.html\" rel=\"nofollow noreferrer\">https://freemarker.apache.org/docs/ref_builtins_string.html</a></p>\n"},{"tags":["java","spring","azure","azure-blob-storage","shared-access-signatures"],"answers":[{"tags":[],"owner":{"account_id":63568,"reputation":129737,"user_id":188096,"accept_rate":93,"display_name":"Gaurav Mantri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672769707,"creation_date":1672769707,"answer_id":74997172,"question_id":74996898,"body_markdown":"If you have SAS URL for both source and destination blobs, then you would do a `PUT` operation using the destination blob SAS URL. \r\n\r\nYou don&#39;t need `Authorization` header as the destination blob URL already has the authorization information (in the SAS URL).\r\n\r\nYou would need to specify source blob SAS URL for `x-ms-copy-source`.\r\n\r\nYou need not specify `x-ms-copy-source-authorization` as the source blob URL already has the authorization information (in the SAS URL).\r\n\r\nYou need not specify `x-ms-date` and `x-ms-version`.\r\n\r\nTo summarize, your request should look something like:\r\n\r\n```\r\nPUT on  [destination blob SAS URL]\r\n\r\nx-ms-copy-source: &quot;[source blob SAS URL]&quot;\r\nx-ms-requires-sync: &quot;true&quot;\r\nempty body\r\n``` ","title":"Azure Blob Copy from presigned to presigned url","body":"<p>If you have SAS URL for both source and destination blobs, then you would do a <code>PUT</code> operation using the destination blob SAS URL.</p>\n<p>You don't need <code>Authorization</code> header as the destination blob URL already has the authorization information (in the SAS URL).</p>\n<p>You would need to specify source blob SAS URL for <code>x-ms-copy-source</code>.</p>\n<p>You need not specify <code>x-ms-copy-source-authorization</code> as the source blob URL already has the authorization information (in the SAS URL).</p>\n<p>You need not specify <code>x-ms-date</code> and <code>x-ms-version</code>.</p>\n<p>To summarize, your request should look something like:</p>\n<pre><code>PUT on  [destination blob SAS URL]\n\nx-ms-copy-source: &quot;[source blob SAS URL]&quot;\nx-ms-requires-sync: &quot;true&quot;\nempty body\n</code></pre>\n"}],"owner":{"account_id":21170955,"reputation":11,"user_id":15567279,"display_name":"giangig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672769707,"creation_date":1672768156,"question_id":74996898,"body_markdown":"I&#39;m trying to copy an azure blob from one account to another.\r\nI have a destination and a source url with their shared access key.\r\n\r\nthe request that i&#39;ve done are:\r\n\r\n```\r\nPUT on  [url with and without sastoken]\r\n\r\nAuthorization: &quot;SharedAccessSignature [sas token encoded and decoded]&quot;\r\nx-ms-copy-source: &quot;[sourceUri with and without sastoken]&quot;\r\nx-ms-copy-source-authorization: &quot;SharedAccessSignature [sas token encoded and decoded]&quot;\r\nx-ms-requires-sync: &quot;true&quot;\r\nx-ms-date: [example: 2023-01-03T17:27:02Z]\r\nx-ms-version: [taken from destination sastoken]\r\n\r\nempty body\r\n```\r\n\r\nIn the documentations is not specified the content of the authorization header i&#39;ve found it on internet.\r\ni&#39;ve tried with and without x-ms-copy-source-authorization header that is reported in the documentation for copy from url but not in copy documentation\r\ni&#39;m sure that source url is valid why befor these request i put a file on this blob.\r\ndestination url is retrieved from an external service and i have no resolution from my machine i can test only after deploy.\r\n\r\nif you have any ideas, you are welcome!","title":"Azure Blob Copy from presigned to presigned url","body":"<p>I'm trying to copy an azure blob from one account to another.\nI have a destination and a source url with their shared access key.</p>\n<p>the request that i've done are:</p>\n<pre><code>PUT on  [url with and without sastoken]\n\nAuthorization: &quot;SharedAccessSignature [sas token encoded and decoded]&quot;\nx-ms-copy-source: &quot;[sourceUri with and without sastoken]&quot;\nx-ms-copy-source-authorization: &quot;SharedAccessSignature [sas token encoded and decoded]&quot;\nx-ms-requires-sync: &quot;true&quot;\nx-ms-date: [example: 2023-01-03T17:27:02Z]\nx-ms-version: [taken from destination sastoken]\n\nempty body\n</code></pre>\n<p>In the documentations is not specified the content of the authorization header i've found it on internet.\ni've tried with and without x-ms-copy-source-authorization header that is reported in the documentation for copy from url but not in copy documentation\ni'm sure that source url is valid why befor these request i put a file on this blob.\ndestination url is retrieved from an external service and i have no resolution from my machine i can test only after deploy.</p>\n<p>if you have any ideas, you are welcome!</p>\n"},{"tags":["java","batch-file"],"comments":[{"owner":{"account_id":5198511,"reputation":13393,"user_id":4158862,"display_name":"SomethingDark"},"score":0,"creation_date":1434894226,"post_id":30964950,"comment_id":49962125,"body_markdown":"Without seeing the code that outputs to the text file, I can&#39;t say for certain, but when you find the computer name you&#39;re looking for, you could store it to a variable and then send that variable to the text file after the entire search is complete.","body":"Without seeing the code that outputs to the text file, I can&#39;t say for certain, but when you find the computer name you&#39;re looking for, you could store it to a variable and then send that variable to the text file after the entire search is complete."},{"owner":{"account_id":4868831,"reputation":93,"user_id":4350389,"accept_rate":45,"display_name":"user6680"},"score":0,"creation_date":1434898155,"post_id":30964950,"comment_id":49963248,"body_markdown":"Do you mean storing it to a cmd prompt variable or java variable?","body":"Do you mean storing it to a cmd prompt variable or java variable?"},{"owner":{"account_id":5198511,"reputation":13393,"user_id":4158862,"display_name":"SomethingDark"},"score":0,"creation_date":1434898403,"post_id":30964950,"comment_id":49963346,"body_markdown":"Again, I haven&#39;t seen your code, but I was imagining a Java variable (admittedly, I&#39;m only seeing this question because of the batch-file tag; I haven&#39;t touched Java in about five years).","body":"Again, I haven&#39;t seen your code, but I was imagining a Java variable (admittedly, I&#39;m only seeing this question because of the batch-file tag; I haven&#39;t touched Java in about five years)."},{"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"score":0,"creation_date":1434900083,"post_id":30964950,"comment_id":49963858,"body_markdown":"Why do you need the delay ? Do you monitor the file for existance ? If yes: dsquery &gt; first, and in the next line copy first monitorme","body":"Why do you need the delay ? Do you monitor the file for existance ? If yes: dsquery &gt; first, and in the next line copy first monitorme"},{"owner":{"account_id":4868831,"reputation":93,"user_id":4350389,"accept_rate":45,"display_name":"user6680"},"score":0,"creation_date":1434901133,"post_id":30964950,"comment_id":49964169,"body_markdown":"I want the output of the text file to only show the computer that was found. If you look at the cmd prompt pic you will see the correct computer name, but the text file I&#39;m guessing is outputting every single computer name it had to go through in order to find the correct one. I want notepad to only show the correct computer name. So the txt file should only have one line outputted to it just like command prompt is doing. Also I&#39;m a little confused by what you mean Marged? Do you mean to write  @dsquery computer -name *%1 &gt; first  Next Line: first monitorme? Is that what I need to write?","body":"I want the output of the text file to only show the computer that was found. If you look at the cmd prompt pic you will see the correct computer name, but the text file I&#39;m guessing is outputting every single computer name it had to go through in order to find the correct one. I want notepad to only show the correct computer name. So the txt file should only have one line outputted to it just like command prompt is doing. Also I&#39;m a little confused by what you mean Marged? Do you mean to write  @dsquery computer -name *%1 &gt; first  Next Line: first monitorme? Is that what I need to write?"},{"owner":{"account_id":4868831,"reputation":93,"user_id":4350389,"accept_rate":45,"display_name":"user6680"},"score":0,"creation_date":1434903533,"post_id":30964950,"comment_id":49964828,"body_markdown":"I just got it to work. Thanks anyway","body":"I just got it to work. Thanks anyway"}],"answers":[{"tags":[],"owner":{"account_id":26356769,"reputation":1,"user_id":20013645,"display_name":"Max"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672769446,"creation_date":1672769446,"answer_id":74997129,"question_id":30964950,"body_markdown":"its been 8 years, but..\r\nto delay the result writing to a batch file you should add\r\ntimeout then the delay in seconds\r\nfor example timeout 5 will delay the result for 5 seconds.\r\nHave a good day!","title":"Delay writing to txt file a batch file&#39;s output","body":"<p>its been 8 years, but..\nto delay the result writing to a batch file you should add\ntimeout then the delay in seconds\nfor example timeout 5 will delay the result for 5 seconds.\nHave a good day!</p>\n"}],"owner":{"account_id":4868831,"reputation":93,"user_id":4350389,"accept_rate":45,"display_name":"user6680"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":236,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672769446,"creation_date":1434892755,"question_id":30964950,"body_markdown":"I have some java code that runs a batch file on jButton click.\r\n\r\n    Batch file content: @dsquery computer -name *%1\r\n\r\nThis batch file is supposed to search the active directory for the full computer name when I enter a partial part of the computer name into a jtextfield. When I click the jButton to submit, it works fine. I get the full computer name in cmd prompt, but the txt file outputs every computer it went through to find the correct computer. I need the txt file to only output the computer name I&#39;m searching for. Is there a way to delay writing to txt file until the name is found and then write to the text file? Or perhaps maybe another way? ![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/29gv2.png","title":"Delay writing to txt file a batch file&#39;s output","body":"<p>I have some java code that runs a batch file on jButton click.</p>\n\n<pre><code>Batch file content: @dsquery computer -name *%1\n</code></pre>\n\n<p>This batch file is supposed to search the active directory for the full computer name when I enter a partial part of the computer name into a jtextfield. When I click the jButton to submit, it works fine. I get the full computer name in cmd prompt, but the txt file outputs every computer it went through to find the correct computer. I need the txt file to only output the computer name I'm searching for. Is there a way to delay writing to txt file until the name is found and then write to the text file? Or perhaps maybe another way? <img src=\"https://i.stack.imgur.com/29gv2.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","html","dom","tags","jsoup"],"answers":[{"tags":[],"owner":{"account_id":33672,"reputation":323,"user_id":94424,"accept_rate":68,"display_name":"shake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1317123651,"creation_date":1317123651,"answer_id":7568508,"question_id":7568433,"body_markdown":"You can then parse string that you get.\r\n\r\n\r\n    String str[] = contentString.split(&quot; &quot;);\r\n\r\nThen you can construct the string you want like this:\r\n\r\n    String str = str[1] + &quot; &quot; + str[2] + &quot; - &quot; + str[4];\r\n\r\nThis will extract you the string you need.","title":"How to get text between two Elements in DOM object?","body":"<p>You can then parse string that you get.</p>\n\n<pre><code>String str[] = contentString.split(\" \");\n</code></pre>\n\n<p>Then you can construct the string you want like this:</p>\n\n<pre><code>String str = str[1] + \" \" + str[2] + \" - \" + str[4];\n</code></pre>\n\n<p>This will extract you the string you need.</p>\n"},{"tags":[],"owner":{"account_id":100718,"reputation":43156,"user_id":271357,"accept_rate":83,"display_name":"dacwe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1317124855,"creation_date":1317124855,"answer_id":7568754,"question_id":7568433,"body_markdown":"You can always **remove** the `user` and the `website` elements like this (you can clone your `submitted` element if you do not want the remove actions to &quot;damage&quot; your document):\r\n\r\n    public static void main(String[] args) throws Exception {\r\n \r\n        Document content = Jsoup.parse(\r\n          &quot;&lt;div class=\\&quot;submitted\\&quot;&gt;&quot; +\r\n          &quot;  &lt;strong&gt;&lt;a title=\\&quot;View user profile.\\&quot; href=\\&quot;/user/1\\&quot;&gt;user1&lt;/a&gt;&lt;/strong&gt;&quot; +\r\n          &quot;  on 27/09/2011 - 15:17 &quot; + \r\n          &quot;  &lt;span class=\\&quot;via\\&quot;&gt;&lt;a href=\\&quot;/goto/002\\&quot;&gt;www.google.com&lt;/a&gt;&lt;/span&gt;&quot; +\r\n          &quot;&lt;/div&gt; &quot;);\r\n        \r\n        // create a clone of the element so we do not destroy the original\r\n        Element submitted = content.getElementsByClass(&quot;submitted&quot;).first().clone();\r\n\r\n        // remove the elements that you do not need \r\n        submitted.getElementsByTag(&quot;strong&quot;).remove();\r\n        submitted.getElementsByClass(&quot;via&quot;).remove();\r\n        \r\n        // print the result (demo)\r\n        System.out.println(submitted.text());\r\n    }\r\n\r\n**Outputs:**\r\n\r\n    on 27/09/2011 - 15:17\r\n\r\n","title":"How to get text between two Elements in DOM object?","body":"<p>You can always <strong>remove</strong> the <code>user</code> and the <code>website</code> elements like this (you can clone your <code>submitted</code> element if you do not want the remove actions to \"damage\" your document):</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n\n    Document content = Jsoup.parse(\n      \"&lt;div class=\\\"submitted\\\"&gt;\" +\n      \"  &lt;strong&gt;&lt;a title=\\\"View user profile.\\\" href=\\\"/user/1\\\"&gt;user1&lt;/a&gt;&lt;/strong&gt;\" +\n      \"  on 27/09/2011 - 15:17 \" + \n      \"  &lt;span class=\\\"via\\\"&gt;&lt;a href=\\\"/goto/002\\\"&gt;www.google.com&lt;/a&gt;&lt;/span&gt;\" +\n      \"&lt;/div&gt; \");\n\n    // create a clone of the element so we do not destroy the original\n    Element submitted = content.getElementsByClass(\"submitted\").first().clone();\n\n    // remove the elements that you do not need \n    submitted.getElementsByTag(\"strong\").remove();\n    submitted.getElementsByClass(\"via\").remove();\n\n    // print the result (demo)\n    System.out.println(submitted.text());\n}\n</code></pre>\n\n<p><strong>Outputs:</strong></p>\n\n<pre><code>on 27/09/2011 - 15:17\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4440133,"reputation":13373,"user_id":3614835,"accept_rate":67,"display_name":"Jeffrey Bosboom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1404791633,"creation_date":1404791633,"answer_id":24623415,"question_id":7568433,"body_markdown":"Select the element before the text you wish to grab, then get its next sibling _node_ (not element), which is a text node:\r\n\r\n    Document doc = Jsoup.parse(&quot;&lt;div class=\\&quot;submitted\\&quot;&gt;&quot; +\r\n      &quot;  &lt;strong&gt;&lt;a title=\\&quot;View user profile.\\&quot; href=\\&quot;/user/1\\&quot;&gt;user1&lt;/a&gt;&lt;/strong&gt;&quot; +\r\n      &quot;  on 27/09/2011 - 15:17 &quot; +\r\n      &quot;  &lt;span class=\\&quot;via\\&quot;&gt;&lt;a href=\\&quot;/goto/002\\&quot;&gt;www.google.com&lt;/a&gt;&lt;/span&gt;&quot; +\r\n      &quot;&lt;/div&gt; &quot;);\r\n\tString str = doc.select(&quot;strong&quot;).first().nextSibling().toString().trim();\r\n\tSystem.out.println(str);\r\n\r\nYou can also ask an element for its child text nodes and index directly (though referencing the nodes by sibling is usually more robust than indexing):\r\n\r\n    Document doc = Jsoup.parse(\r\n\t\t\t\t&quot;&lt;div class=\\&quot;submitted\\&quot;&gt;&quot; +\r\n      &quot;  &lt;strong&gt;&lt;a title=\\&quot;View user profile.\\&quot; href=\\&quot;/user/1\\&quot;&gt;user1&lt;/a&gt;&lt;/strong&gt;&quot; +\r\n      &quot;  on 27/09/2011 - 15:17 &quot; +\r\n      &quot;  &lt;span class=\\&quot;via\\&quot;&gt;&lt;a href=\\&quot;/goto/002\\&quot;&gt;www.google.com&lt;/a&gt;&lt;/span&gt;&quot; +\r\n      &quot;&lt;/div&gt; &quot;);\r\n\tString str = doc.select(&quot;div&quot;).first().textNodes().get(1).text().trim();\r\n\tSystem.out.println(str);","title":"How to get text between two Elements in DOM object?","body":"<p>Select the element before the text you wish to grab, then get its next sibling <em>node</em> (not element), which is a text node:</p>\n\n<pre><code>Document doc = Jsoup.parse(\"&lt;div class=\\\"submitted\\\"&gt;\" +\n  \"  &lt;strong&gt;&lt;a title=\\\"View user profile.\\\" href=\\\"/user/1\\\"&gt;user1&lt;/a&gt;&lt;/strong&gt;\" +\n  \"  on 27/09/2011 - 15:17 \" +\n  \"  &lt;span class=\\\"via\\\"&gt;&lt;a href=\\\"/goto/002\\\"&gt;www.google.com&lt;/a&gt;&lt;/span&gt;\" +\n  \"&lt;/div&gt; \");\nString str = doc.select(\"strong\").first().nextSibling().toString().trim();\nSystem.out.println(str);\n</code></pre>\n\n<p>You can also ask an element for its child text nodes and index directly (though referencing the nodes by sibling is usually more robust than indexing):</p>\n\n<pre><code>Document doc = Jsoup.parse(\n            \"&lt;div class=\\\"submitted\\\"&gt;\" +\n  \"  &lt;strong&gt;&lt;a title=\\\"View user profile.\\\" href=\\\"/user/1\\\"&gt;user1&lt;/a&gt;&lt;/strong&gt;\" +\n  \"  on 27/09/2011 - 15:17 \" +\n  \"  &lt;span class=\\\"via\\\"&gt;&lt;a href=\\\"/goto/002\\\"&gt;www.google.com&lt;/a&gt;&lt;/span&gt;\" +\n  \"&lt;/div&gt; \");\nString str = doc.select(\"div\").first().textNodes().get(1).text().trim();\nSystem.out.println(str);\n</code></pre>\n"}],"owner":{"account_id":204263,"reputation":1023,"user_id":452364,"accept_rate":83,"display_name":"markbse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1683,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":7568754,"answer_count":3,"score":2,"last_activity_date":1672768422,"creation_date":1317123296,"question_id":7568433,"body_markdown":"I&#39;m using JSoup to parse this HTML content:\r\n\r\n    &lt;div class=&quot;submitted&quot;&gt;\r\n        &lt;strong&gt;&lt;a title=&quot;View user profile.&quot; href=&quot;/user/1&quot;&gt;user1&lt;/a&gt;&lt;/strong&gt; \r\n        on 27/09/2011 - 15:17 \r\n        &lt;span class=&quot;via&quot;&gt;&lt;a href=&quot;/goto/002&quot;&gt;www.google.com&lt;/a&gt;&lt;/span&gt;\r\n    &lt;/div&gt; \r\n\r\nWhich looks like this in web browser: \r\n\r\n    user1 on 27/09/2011 - 15:17 www.google.com\r\n\r\nThe username and the website can be parsed into variables using this:\r\n\r\n    String user    = content.getElementsByClass(&quot;submitted&quot;).first().getElementsByTag(&quot;strong&quot;).first().text(); \r\n    String website = content.getElementsByClass(&quot;submitted&quot;).first().getElementsByClass(&quot;via&quot;).first().text();\r\n\r\nBut I&#39;m unsure of how to get the &quot;on 27/09/2011 -15:17&quot; into a variable, if I use\r\n\r\n    String date = content.getElementsByClass(&quot;submitted&quot;).first().text();\r\n\r\nIt also contains username and the website???\r\n","title":"How to get text between two Elements in DOM object?","body":"<p>I'm using JSoup to parse this HTML content:</p>\n<pre><code>&lt;div class=&quot;submitted&quot;&gt;\n    &lt;strong&gt;&lt;a title=&quot;View user profile.&quot; href=&quot;/user/1&quot;&gt;user1&lt;/a&gt;&lt;/strong&gt; \n    on 27/09/2011 - 15:17 \n    &lt;span class=&quot;via&quot;&gt;&lt;a href=&quot;/goto/002&quot;&gt;www.google.com&lt;/a&gt;&lt;/span&gt;\n&lt;/div&gt; \n</code></pre>\n<p>Which looks like this in web browser:</p>\n<pre><code>user1 on 27/09/2011 - 15:17 www.google.com\n</code></pre>\n<p>The username and the website can be parsed into variables using this:</p>\n<pre><code>String user    = content.getElementsByClass(&quot;submitted&quot;).first().getElementsByTag(&quot;strong&quot;).first().text(); \nString website = content.getElementsByClass(&quot;submitted&quot;).first().getElementsByClass(&quot;via&quot;).first().text();\n</code></pre>\n<p>But I'm unsure of how to get the &quot;on 27/09/2011 -15:17&quot; into a variable, if I use</p>\n<pre><code>String date = content.getElementsByClass(&quot;submitted&quot;).first().text();\n</code></pre>\n<p>It also contains username and the website???</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":4073057,"reputation":3037,"user_id":3441063,"display_name":"Vlad Bochenin"},"score":0,"creation_date":1529051783,"post_id":50871757,"comment_id":88745326,"body_markdown":"Property in xml example is named like test in annotation you are using name value please double check property names.","body":"Property in xml example is named like test in annotation you are using name value please double check property names."},{"owner":{"display_name":"user9945564"},"score":0,"creation_date":1529051877,"post_id":50871757,"comment_id":88745372,"body_markdown":"Edited, it was a little mistake, in my source code it&#39;s okey","body":"Edited, it was a little mistake, in my source code it&#39;s okey"},{"owner":{"account_id":3708341,"reputation":4302,"user_id":3086289,"accept_rate":100,"display_name":"Sangam Belose"},"score":0,"creation_date":1529053027,"post_id":50871757,"comment_id":88745934,"body_markdown":"show us the customClass code","body":"show us the customClass code"}],"answers":[{"tags":[],"owner":{"account_id":339155,"reputation":8863,"user_id":668455,"accept_rate":80,"display_name":"Tristan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529052062,"creation_date":1529051582,"answer_id":50871830,"question_id":50871757,"body_markdown":"You need to declare your .properties file using @PropertySource. Not sure it&#39;s doable using xml config.\r\n\r\nAlso, are you sure about this &quot;$&quot;, it&#39;s &quot;#&quot; in this example :\r\nhttp://forum.spring.io/forum/spring-projects/container/61645-value-and-propertyplaceholderconfigurer\r\n","title":"Spring @Value is always null","body":"<p>You need to declare your .properties file using @PropertySource. Not sure it's doable using xml config.</p>\n\n<p>Also, are you sure about this \"$\", it's \"#\" in this example :\n<a href=\"http://forum.spring.io/forum/spring-projects/container/61645-value-and-propertyplaceholderconfigurer\" rel=\"nofollow noreferrer\">http://forum.spring.io/forum/spring-projects/container/61645-value-and-propertyplaceholderconfigurer</a></p>\n"},{"tags":[],"owner":{"account_id":8151750,"reputation":309,"user_id":6138508,"display_name":"FunkyMan"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1529051926,"creation_date":1529051926,"answer_id":50871923,"question_id":50871757,"body_markdown":"Remember, your class need a stereotype annotation like `@Component` or `@Service`","title":"Spring @Value is always null","body":"<p>Remember, your class need a stereotype annotation like <code>@Component</code> or <code>@Service</code></p>\n"},{"tags":[],"owner":{"display_name":"user9945564"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1529058321,"creation_date":1529058321,"answer_id":50873683,"question_id":50871757,"body_markdown":"Solve, you need to enable annotation config in configuration file: `&lt;context:annotation-config/&gt;`","title":"Spring @Value is always null","body":"<p>Solve, you need to enable annotation config in configuration file: <code>&lt;context:annotation-config/&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":6062917,"reputation":209,"user_id":4734187,"display_name":"AlYosha"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1529063306,"creation_date":1529063306,"answer_id":50874993,"question_id":50871757,"body_markdown":"If you are creating spring boot application and your goal is to provide configuration parameter(s) via (application).properties there is a way to do it without explicit @Value declaration.\r\n\r\nCreate YourClassProperties with annotation @ConfigurationProperties(&quot;some.prefix&quot;):\r\n\r\n    @ConfigurationProperties(&quot;my.example&quot;)\r\n    public class MyClassProperties {\r\n\t    private String foo;\r\n\t\r\n\t    public String getFoo() {\r\n\t\t    return foo;\r\n\t    }\r\n\t\r\n\t    public void setFoo(String foo) {\r\n\t\t    this.foo = foo;\r\n\t    }\r\n    }\r\n\r\nAdd defined properties to (application).properties:\r\n\r\n    my.example.foo=bar\r\n\r\nAnd then, in your application you can autowire needed properties...\r\n\r\n    @Autowired\r\n    private MyClassProperties myClassProperties;\r\n\r\n... and use them as you would any other properties:\r\n\r\n    LOG.info(&quot;Value of the foo: {}&quot;, myClassProperties.getFoo());\r\n\r\n   \r\n\r\n\r\n\r\n","title":"Spring @Value is always null","body":"<p>If you are creating spring boot application and your goal is to provide configuration parameter(s) via (application).properties there is a way to do it without explicit @Value declaration.</p>\n\n<p>Create YourClassProperties with annotation @ConfigurationProperties(\"some.prefix\"):</p>\n\n<pre><code>@ConfigurationProperties(\"my.example\")\npublic class MyClassProperties {\n    private String foo;\n\n    public String getFoo() {\n        return foo;\n    }\n\n    public void setFoo(String foo) {\n        this.foo = foo;\n    }\n}\n</code></pre>\n\n<p>Add defined properties to (application).properties:</p>\n\n<pre><code>my.example.foo=bar\n</code></pre>\n\n<p>And then, in your application you can autowire needed properties...</p>\n\n<pre><code>@Autowired\nprivate MyClassProperties myClassProperties;\n</code></pre>\n\n<p>... and use them as you would any other properties:</p>\n\n<pre><code>LOG.info(\"Value of the foo: {}\", myClassProperties.getFoo());\n</code></pre>\n"}],"owner":{"display_name":"user9945564"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20102,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":50873683,"answer_count":4,"score":5,"last_activity_date":1672768318,"creation_date":1529051280,"question_id":50871757,"body_markdown":"I&#39;m using spring in my app and I have a .properties file which has some values defined.\r\n\r\nIn a java class there is a String value:\r\n\r\n    @Value(&quot;${test}&quot;)\r\n    public String value;\r\n\r\nThe point is that if I inject this value in beans definition:\r\n\r\n    &lt;bean id=&quot;customClass&quot; class=&quot;package.customClass.CustomClassImpl&quot;&gt;\r\n        &lt;property name=&quot;value&quot; value=&quot;${test}&quot;&gt;&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\nIt works fine, but if I use `@Value`, there is always a `null`... Why is that happening?\r\n\r\nAnd no, I&#39;m not doing any &quot;`new`&quot; no instantiate &quot;`customClass`&quot;, I get it with `context.getBean(&quot;customClass)`.\r\n\r\n\r\n**EDIT:** I have configured a property placeholder in the context:\r\n\r\n    &lt;bean id=&quot;properties&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n    \t\t&lt;property name=&quot;locations&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;value&gt;classpath:config.properties&lt;/value&gt;\r\n                    &lt;value&gt;classpath:constants.properties&lt;/value&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n\r\nThanks in advance.","title":"Spring @Value is always null","body":"<p>I'm using spring in my app and I have a .properties file which has some values defined.</p>\n<p>In a java class there is a String value:</p>\n<pre><code>@Value(&quot;${test}&quot;)\npublic String value;\n</code></pre>\n<p>The point is that if I inject this value in beans definition:</p>\n<pre><code>&lt;bean id=&quot;customClass&quot; class=&quot;package.customClass.CustomClassImpl&quot;&gt;\n    &lt;property name=&quot;value&quot; value=&quot;${test}&quot;&gt;&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>It works fine, but if I use <code>@Value</code>, there is always a <code>null</code>... Why is that happening?</p>\n<p>And no, I'm not doing any &quot;<code>new</code>&quot; no instantiate &quot;<code>customClass</code>&quot;, I get it with <code>context.getBean(&quot;customClass)</code>.</p>\n<p><strong>EDIT:</strong> I have configured a property placeholder in the context:</p>\n<pre><code>&lt;bean id=&quot;properties&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\n        &lt;property name=&quot;locations&quot;&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:config.properties&lt;/value&gt;\n                &lt;value&gt;classpath:constants.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","hibernate","rest","jersey"],"comments":[{"owner":{"account_id":4454424,"reputation":7384,"user_id":3625215,"accept_rate":47,"display_name":"MyTwoCents"},"score":0,"creation_date":1529061348,"post_id":50874231,"comment_id":88750280,"body_markdown":"Can u add HibernateUtil as well...","body":"Can u add HibernateUtil as well..."},{"owner":{"account_id":11915685,"reputation":1432,"user_id":8719655,"display_name":"Carlos L&#243;pez Mar&#237;"},"score":0,"creation_date":1529061463,"post_id":50874231,"comment_id":88750337,"body_markdown":"@Ashish451 Of course","body":"@Ashish451 Of course"},{"owner":{"account_id":4454424,"reputation":7384,"user_id":3625215,"accept_rate":47,"display_name":"MyTwoCents"},"score":0,"creation_date":1529063086,"post_id":50874231,"comment_id":88751256,"body_markdown":"I have added solution.. you can try","body":"I have added solution.. you can try"}],"answers":[{"tags":[],"owner":{"account_id":4284874,"reputation":835,"user_id":3503018,"accept_rate":38,"display_name":"soufrk"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1529061888,"creation_date":1529061888,"answer_id":50874640,"question_id":50874231,"body_markdown":"Try re-writing the code as \r\n\r\n    public class HibernateSession {\r\n    \r\n        public Session session;\r\n        int id;\r\n    \tTransaction t = null;\r\n    \r\n        public void createTransaction() {\r\n            session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n            t = session.beginTransaction();\r\n        }\r\n    \r\n        public void commitclose() {\r\n            t.commit();\r\n            session.close();\r\n        }\r\n    \r\n        public void rollbackclose() {\r\n    \r\n            try {\r\n                t.rollback();\r\n                session.close();\r\n            } catch (Exception hibernateexception) {\r\n                hibernateexception.printStackTrace();\r\n            }\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nOff course null-checks are required for every reference of `t`.","title":"Hibernate: Two or more transactions at the same time: Transaction already active","body":"<p>Try re-writing the code as </p>\n\n<pre><code>public class HibernateSession {\n\n    public Session session;\n    int id;\n    Transaction t = null;\n\n    public void createTransaction() {\n        session = HibernateUtil.getSessionFactory().getCurrentSession();\n        t = session.beginTransaction();\n    }\n\n    public void commitclose() {\n        t.commit();\n        session.close();\n    }\n\n    public void rollbackclose() {\n\n        try {\n            t.rollback();\n            session.close();\n        } catch (Exception hibernateexception) {\n            hibernateexception.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Off course null-checks are required for every reference of <code>t</code>.</p>\n"},{"tags":[],"owner":{"account_id":4454424,"reputation":7384,"user_id":3625215,"accept_rate":47,"display_name":"MyTwoCents"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1529062668,"creation_date":1529062668,"answer_id":50874837,"question_id":50874231,"body_markdown":"\r\nAs per your `createTransaction` logic, you are getting current session from `SessionFactory` and starting a transaction from it.\r\n\r\n*Here is the problem.* \r\n\r\nLets assume you have created `HibernateSession` object and started transaction but it is still in progress. So you haven&#39;t close transaction yet.\r\n\r\nNow you created another `HibernateSession` and try to start transaction, doing this will throw exception. \r\n\r\nSo your this code \r\n\r\n    public void createTransaction() {\r\n        session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        session.beginTransaction();\r\n    }\r\n\r\n\r\nhas to be this \r\n\r\n    public void createTransaction() {\r\n        session = HibernateUtil.getSessionFactory().openSession();\r\n        session.beginTransaction();\r\n    }\r\n\r\n\r\n\r\n**getSessionFactory().openSession()** always opens a new session that you have to close once you are done with the operations.\r\n\r\n \r\n**getSessionFactory().getCurrentSession()** returns a session bound to a context - you don&#39;t need to close this.\r\n\r\n\r\n","title":"Hibernate: Two or more transactions at the same time: Transaction already active","body":"<p>As per your <code>createTransaction</code> logic, you are getting current session from <code>SessionFactory</code> and starting a transaction from it.</p>\n\n<p><em>Here is the problem.</em> </p>\n\n<p>Lets assume you have created <code>HibernateSession</code> object and started transaction but it is still in progress. So you haven't close transaction yet.</p>\n\n<p>Now you created another <code>HibernateSession</code> and try to start transaction, doing this will throw exception. </p>\n\n<p>So your this code </p>\n\n<pre><code>public void createTransaction() {\n    session = HibernateUtil.getSessionFactory().getCurrentSession();\n    session.beginTransaction();\n}\n</code></pre>\n\n<p>has to be this </p>\n\n<pre><code>public void createTransaction() {\n    session = HibernateUtil.getSessionFactory().openSession();\n    session.beginTransaction();\n}\n</code></pre>\n\n<p><strong>getSessionFactory().openSession()</strong> always opens a new session that you have to close once you are done with the operations.</p>\n\n<p><strong>getSessionFactory().getCurrentSession()</strong> returns a session bound to a context - you don't need to close this.</p>\n"},{"tags":[],"owner":{"account_id":4514344,"reputation":31626,"user_id":3669624,"accept_rate":100,"display_name":"cdk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1529063201,"creation_date":1529062808,"answer_id":50874875,"question_id":50874231,"body_markdown":"Actually there are many drawbacks in your actual code:\r\n\r\n - You are creating a new instance of your `HibernateSession` class each time you call your code, so you will have many instances of it, trying to access the same session.\r\n - Each of this instances of `HibernateSession`, will try to create a new transaction when you call `hs.createTransaction();`, and that&#39;s why you are getting the Exception at this line, because there are already open transactions and you are trying to open a new one, beacuse you are calling `session.beginTransaction();` each time without calling `transaction.close();`.\r\n\r\n\r\nWhat you can do here is to make your `HibernateSession`class singleton, so only one instance is available, you can check this [**Singleton Pattern implementation**](https://www.tutorialspoint.com/design_pattern/singleton_pattern.htm) for further details on how to implement it.\r\n\r\nAnd in the `createTransaction` method, wich should be better named `getTransaction` instead of just calling `session.beginTransaction();` you need to get the current transaction if it exists you can check it using `session.getTransaction()` method and make sure you wrap your code in a `try ...catch` block, you can check this [**Hibernate session** tutorial](https://www.tutorialspoint.com/hibernate/hibernate_sessions.htm) for further details.\r\n\r\n\r\n\r\n","title":"Hibernate: Two or more transactions at the same time: Transaction already active","body":"<p>Actually there are many drawbacks in your actual code:</p>\n\n<ul>\n<li>You are creating a new instance of your <code>HibernateSession</code> class each time you call your code, so you will have many instances of it, trying to access the same session.</li>\n<li>Each of this instances of <code>HibernateSession</code>, will try to create a new transaction when you call <code>hs.createTransaction();</code>, and that's why you are getting the Exception at this line, because there are already open transactions and you are trying to open a new one, beacuse you are calling <code>session.beginTransaction();</code> each time without calling <code>transaction.close();</code>.</li>\n</ul>\n\n<p>What you can do here is to make your <code>HibernateSession</code>class singleton, so only one instance is available, you can check this <a href=\"https://www.tutorialspoint.com/design_pattern/singleton_pattern.htm\" rel=\"nofollow noreferrer\"><strong>Singleton Pattern implementation</strong></a> for further details on how to implement it.</p>\n\n<p>And in the <code>createTransaction</code> method, wich should be better named <code>getTransaction</code> instead of just calling <code>session.beginTransaction();</code> you need to get the current transaction if it exists you can check it using <code>session.getTransaction()</code> method and make sure you wrap your code in a <code>try ...catch</code> block, you can check this <a href=\"https://www.tutorialspoint.com/hibernate/hibernate_sessions.htm\" rel=\"nofollow noreferrer\"><strong>Hibernate session</strong> tutorial</a> for further details.</p>\n"},{"tags":[],"owner":{"account_id":3985474,"reputation":237,"user_id":3286178,"display_name":"rwenz3l"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1529062814,"creation_date":1529062814,"answer_id":50874877,"question_id":50874231,"body_markdown":"You have a few design related flaws:\r\n\r\n1. You should not use `getCurrentSession()`\r\n\r\nAs Stated in the jboss [documentation](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html), you should use the following idiom:\r\n\r\n     Session sess = factory.openSession();\r\n     Transaction tx;\r\n     try {\r\n         tx = sess.beginTransaction();\r\n         //do some work\r\n         ...\r\n         tx.commit();\r\n     }\r\n     catch (Exception e) {\r\n         if (tx!=null) tx.rollback();\r\n         throw e;\r\n     }\r\n     finally {\r\n         sess.close();\r\n     }\r\n\r\n 2. You should follow the CRUD pattern\r\n\r\nFor each Operation (Create, Read, Update, Delete) create a method in your class. Each Method shall creates it&#39;s **own** session and transaction to work with, because as stated in [this answer][1]: \r\n\r\n&gt; session is not a thread safe object - cannot be shared by multiple\r\n&gt; threads. You should always use &quot;one session per request&quot; or &quot;one\r\n&gt; session per transaction&quot;\r\n\r\nYour methods are somewhat valid, but also have a look at the DAO Objects created in [this tutorial][2]\r\n\r\n**Solution:**\r\n\r\nThe reason your code is failing is simply because the Transaction is still in progress from your previous interaction with the database. That is why you do a `finally{ session.close() }` - to make **sure** that the session is closed when leavin the method. I assume that at some point your `commit()` was not successfull and left your hibernate in a Transaction/Session that has not been closed since.\r\n\r\nTo fix that, you should insert a session.close() once in your code, execute it and then implement my suggested try-catch-finally block to make sure it is closed in the future.\r\n\r\n  [1]: https://stackoverflow.com/a/8049227/3286178\r\n  [2]: https://examples.javacodegeeks.com/enterprise-java/hibernate/hibernate-jpa-dao-example/","title":"Hibernate: Two or more transactions at the same time: Transaction already active","body":"<p>You have a few design related flaws:</p>\n\n<ol>\n<li>You should not use <code>getCurrentSession()</code></li>\n</ol>\n\n<p>As Stated in the jboss <a href=\"https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html\" rel=\"nofollow noreferrer\">documentation</a>, you should use the following idiom:</p>\n\n<pre><code> Session sess = factory.openSession();\n Transaction tx;\n try {\n     tx = sess.beginTransaction();\n     //do some work\n     ...\n     tx.commit();\n }\n catch (Exception e) {\n     if (tx!=null) tx.rollback();\n     throw e;\n }\n finally {\n     sess.close();\n }\n</code></pre>\n\n<ol start=\"2\">\n<li>You should follow the CRUD pattern</li>\n</ol>\n\n<p>For each Operation (Create, Read, Update, Delete) create a method in your class. Each Method shall creates it's <strong>own</strong> session and transaction to work with, because as stated in <a href=\"https://stackoverflow.com/a/8049227/3286178\">this answer</a>: </p>\n\n<blockquote>\n  <p>session is not a thread safe object - cannot be shared by multiple\n  threads. You should always use \"one session per request\" or \"one\n  session per transaction\"</p>\n</blockquote>\n\n<p>Your methods are somewhat valid, but also have a look at the DAO Objects created in <a href=\"https://examples.javacodegeeks.com/enterprise-java/hibernate/hibernate-jpa-dao-example/\" rel=\"nofollow noreferrer\">this tutorial</a></p>\n\n<p><strong>Solution:</strong></p>\n\n<p>The reason your code is failing is simply because the Transaction is still in progress from your previous interaction with the database. That is why you do a <code>finally{ session.close() }</code> - to make <strong>sure</strong> that the session is closed when leavin the method. I assume that at some point your <code>commit()</code> was not successfull and left your hibernate in a Transaction/Session that has not been closed since.</p>\n\n<p>To fix that, you should insert a session.close() once in your code, execute it and then implement my suggested try-catch-finally block to make sure it is closed in the future.</p>\n"},{"tags":[],"owner":{"account_id":11915685,"reputation":1432,"user_id":8719655,"display_name":"Carlos L&#243;pez Mar&#237;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1529064001,"creation_date":1529064001,"answer_id":50875174,"question_id":50874231,"body_markdown":"I just changed \r\n\r\n    session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n\r\nwith\r\n\r\n    session = HibernateUtil.getSessionFactory().openSession();\r\n\r\nI was accessing the session of the Factory alredy opened.","title":"Hibernate: Two or more transactions at the same time: Transaction already active","body":"<p>I just changed </p>\n\n<pre><code>session = HibernateUtil.getSessionFactory().getCurrentSession();\n</code></pre>\n\n<p>with</p>\n\n<pre><code>session = HibernateUtil.getSessionFactory().openSession();\n</code></pre>\n\n<p>I was accessing the session of the Factory alredy opened.</p>\n"},{"tags":[],"owner":{"account_id":18684513,"reputation":21,"user_id":13620344,"display_name":"Paolo Guagliumi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661942407,"creation_date":1661942407,"answer_id":73554668,"question_id":50874231,"body_markdown":"I got the same error. In my case after the session was created, I had forgotten the instruction:\r\n\r\n    session.beginTransaction();","title":"Hibernate: Two or more transactions at the same time: Transaction already active","body":"<p>I got the same error. In my case after the session was created, I had forgotten the instruction:</p>\n<pre><code>session.beginTransaction();\n</code></pre>\n"}],"owner":{"account_id":11915685,"reputation":1432,"user_id":8719655,"display_name":"Carlos L&#243;pez Mar&#237;"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15588,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":50874837,"answer_count":6,"score":6,"last_activity_date":1672768217,"creation_date":1529060425,"question_id":50874231,"body_markdown":"I have a REST API and when I make a POST and a GET nearly the same time I get this exception:\r\n\r\n     SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container\r\n    java.lang.IllegalStateException: Transaction already active\r\n    \tat org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:52)\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.beginTransaction(AbstractSharedSessionContract.java:409)\r\n    \tat sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:355)\r\n    \tat com.sun.proxy.$Proxy58.beginTransaction(Unknown Source)\r\n    \tat utils.HibernateSession.createTransaction(HibernateSession.java:15)\r\n    \tat api.ConversationsREST.getMessages(ConversationsREST.java:128)\r\n\r\nThey are on different classes so no global attributes implied.\r\n\r\nThe line which fails is this one:\r\n\r\n    HibernateSession hs = new HibernateSession();\r\n    hs.createTransaction(); // Crash\r\n\r\nWhich refers to my class HibernateSession:\r\n\r\n    public class HibernateSession {\r\n    \r\n    \tpublic Session session;\r\n    \r\n    \tpublic void createTransaction() {\r\n    \r\n    \t\tsession = HibernateUtil.getSessionFactory().getCurrentSession(); //THIS WAS WRONG\r\n     //EDIT:session = HibernateUtil.getSessionFactory().openSession(); //THIS IS RIGHT\r\n    \t\tsession.beginTransaction();\r\n    \t}\r\n    \r\n    \tpublic void commitclose() {\r\n    \r\n    \t\tsession.getTransaction().commit();\r\n    \t\tsession.close();\r\n    \r\n    \t}\r\n    \r\n    \tpublic void rollbackclose() {\r\n    \r\n    \t\ttry {\r\n    \t\t\tsession.getTransaction().rollback();\r\n    \t\t\tsession.close();\r\n    \t\t} catch (Exception hibernateexception) {\r\n    \t\t\thibernateexception.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nThe exception is actually on the line `session.beginTransaction()`\r\n\r\nI always make a hs.commitclose() and in the catch() blocks and the 404s I always make a rollbackclose();\r\n\r\nThe problem is that when I make a POST messages like this:\r\n\r\n\r\n    HibernateSession hs = new HibernateSession();\r\n    hs.createTransaction();\r\n    hs.session.save(whatever);\r\n    hs.commitclose();\r\n\r\nReturns 200 and it&#39;s ok but then the GET may crash with the exception above.\r\nAs I am making a **new** instance of HibernateSession, why Hibernate seems to be trying to share that transaction?\r\n\r\nThis only happens when I make both queries in a very short time (I guess starting a transaction between the beginning and the commit of another one). So I guess Hibernate is thinking that session attribute is static or something like that...\r\n\r\nThank you in advance for your help!\r\n----------------------------------------------\r\n**EDIT:** As requested, `HibernateUtil.java` (the problem must not be here but may help to understand):\r\n\r\n    package utils;\r\n    \r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    \r\n    public class HibernateUtil {\r\n    \r\n    \tprivate static SessionFactory sessionFactory;\r\n    \r\n    \tpublic static SessionFactory getSessionFactory() {\r\n    \r\n    \t\tif (sessionFactory == null) {\r\n    \r\n    \t\t\tsessionFactory = build();\r\n    \r\n    \t\t}\r\n    \t\treturn sessionFactory;\r\n    \r\n    \t}\r\n    \r\n    \tprivate static SessionFactory build() {\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\treturn new Configuration().configure().buildSessionFactory();\r\n    \r\n    \t\t} catch (Throwable ex) {\r\n    \r\n    \t\t\tSystem.err.println(&quot;Initial SessionFactory creation failed: &quot; + ex);\r\n    \t\t\tthrow new ExceptionInInitializerError(ex);\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }","title":"Hibernate: Two or more transactions at the same time: Transaction already active","body":"<p>I have a REST API and when I make a POST and a GET nearly the same time I get this exception:</p>\n<pre><code> SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container\njava.lang.IllegalStateException: Transaction already active\n    at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:52)\n    at org.hibernate.internal.AbstractSharedSessionContract.beginTransaction(AbstractSharedSessionContract.java:409)\n    at sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:355)\n    at com.sun.proxy.$Proxy58.beginTransaction(Unknown Source)\n    at utils.HibernateSession.createTransaction(HibernateSession.java:15)\n    at api.ConversationsREST.getMessages(ConversationsREST.java:128)\n</code></pre>\n<p>They are on different classes so no global attributes implied.</p>\n<p>The line which fails is this one:</p>\n<pre><code>HibernateSession hs = new HibernateSession();\nhs.createTransaction(); // Crash\n</code></pre>\n<p>Which refers to my class HibernateSession:</p>\n<pre><code>public class HibernateSession {\n\n    public Session session;\n\n    public void createTransaction() {\n\n        session = HibernateUtil.getSessionFactory().getCurrentSession(); //THIS WAS WRONG\n //EDIT:session = HibernateUtil.getSessionFactory().openSession(); //THIS IS RIGHT\n        session.beginTransaction();\n    }\n\n    public void commitclose() {\n\n        session.getTransaction().commit();\n        session.close();\n\n    }\n\n    public void rollbackclose() {\n\n        try {\n            session.getTransaction().rollback();\n            session.close();\n        } catch (Exception hibernateexception) {\n            hibernateexception.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n<p>The exception is actually on the line <code>session.beginTransaction()</code></p>\n<p>I always make a hs.commitclose() and in the catch() blocks and the 404s I always make a rollbackclose();</p>\n<p>The problem is that when I make a POST messages like this:</p>\n<pre><code>HibernateSession hs = new HibernateSession();\nhs.createTransaction();\nhs.session.save(whatever);\nhs.commitclose();\n</code></pre>\n<p>Returns 200 and it's ok but then the GET may crash with the exception above.\nAs I am making a <strong>new</strong> instance of HibernateSession, why Hibernate seems to be trying to share that transaction?</p>\n<p>This only happens when I make both queries in a very short time (I guess starting a transaction between the beginning and the commit of another one). So I guess Hibernate is thinking that session attribute is static or something like that...</p>\n<h2>Thank you in advance for your help!</h2>\n<p><strong>EDIT:</strong> As requested, <code>HibernateUtil.java</code> (the problem must not be here but may help to understand):</p>\n<pre><code>package utils;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\npublic class HibernateUtil {\n\n    private static SessionFactory sessionFactory;\n\n    public static SessionFactory getSessionFactory() {\n\n        if (sessionFactory == null) {\n\n            sessionFactory = build();\n\n        }\n        return sessionFactory;\n\n    }\n\n    private static SessionFactory build() {\n\n        try {\n\n            return new Configuration().configure().buildSessionFactory();\n\n        } catch (Throwable ex) {\n\n            System.err.println(&quot;Initial SessionFactory creation failed: &quot; + ex);\n            throw new ExceptionInInitializerError(ex);\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","selenium","testing"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1672752677,"post_id":74993955,"comment_id":132341846,"body_markdown":"You&#39;re not using that type, which is why it&#39;s grey. Your IDE is telling you that you don&#39;t need it. You only need to import a type if you declare something of that type, and you don&#39;t, otherwise &quot;JavascriptExecutor&quot; would appear somewhere other than the import. It&#39;s unclear from your question, but are you implying `driver` is of type `JavascriptExecutor`? I suppose that comes from the base class? You don&#39;t need to import a type if you&#39;re only referencing a field that&#39;s declared in another class.","body":"You&#39;re not using that type, which is why it&#39;s grey. Your IDE is telling you that you don&#39;t need it. You only need to import a type if you declare something of that type, and you don&#39;t, otherwise &quot;JavascriptExecutor&quot; would appear somewhere other than the import. It&#39;s unclear from your question, but are you implying <code>driver</code> is of type <code>JavascriptExecutor</code>? I suppose that comes from the base class? You don&#39;t need to import a type if you&#39;re only referencing a field that&#39;s declared in another class."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1672752855,"post_id":74993955,"comment_id":132341909,"body_markdown":"[2/2] Imports are basically nothing more than a means of disambiguation. You&#39;re telling the compiler *&quot;when I say &#39;Foo&#39;, what I mean is &#39;com.bar.Foo&#39;&quot;*. If a field is declared in another class, it&#39;s already been disambiguated. What imports are **not** is an exhaustive list of a class&#39;s dependencies.","body":"[2/2] Imports are basically nothing more than a means of disambiguation. You&#39;re telling the compiler <i>&quot;when I say &#39;Foo&#39;, what I mean is &#39;com.bar.Foo&#39;&quot;</i>. If a field is declared in another class, it&#39;s already been disambiguated. What imports are <b>not</b> is an exhaustive list of a class&#39;s dependencies."}],"answers":[{"tags":[],"owner":{"account_id":26681923,"reputation":23,"user_id":20291753,"display_name":"Chaffe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672767986,"creation_date":1672767986,"answer_id":74996874,"question_id":74993955,"body_markdown":"Invalidating cache and restarting resolved. Also changed the code slightly.\r\n```\r\n((JavascriptExecutor) driver).executeScript(&quot;sauce:job-result=passed&quot;);\r\n```\r\n\r\nThis resolved my issue","title":"Import greyed out in Java","body":"<p>Invalidating cache and restarting resolved. Also changed the code slightly.</p>\n<pre><code>((JavascriptExecutor) driver).executeScript(&quot;sauce:job-result=passed&quot;);\n</code></pre>\n<p>This resolved my issue</p>\n"}],"owner":{"account_id":26681923,"reputation":23,"user_id":20291753,"display_name":"Chaffe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74996874,"answer_count":1,"score":0,"last_activity_date":1672767986,"creation_date":1672752196,"question_id":74993955,"body_markdown":"I&#39;ve just started using Java today and have created some tests but I want to use JavascriptExecutor to be able to report tests passing or failing to Sauce Labs. I&#39;ve imported the library I believe I need but it doesn&#39;t recognise the import either way. I believe I am doing it correctly but evidently I&#39;m not and would like some help to understand where I&#39;m going wrong.\r\n\r\nMy code looks like this:\r\n```\r\npackage tests;\r\n\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.junit.jupiter.api.extension.ExtensionContext;\r\nimport org.junit.jupiter.api.extension.RegisterExtension;\r\nimport pageobjects.Login;\r\nimport org.junit.jupiter.api.extension.TestWatcher;\r\nimport org.openqa.selenium.JavascriptExecutor;\r\nimport static org.junit.Assert.assertFalse;\r\nimport static org.junit.Assert.assertTrue;\r\n\r\npublic class TestLogin extends BaseTest {\r\n    private Login login;\r\n\r\n    @RegisterExtension\r\n    public SauceTestWatcher watcher = new SauceTestWatcher();\r\n\r\n    @Before\r\n    public void setUp() {\r\n        login = new Login(driver);\r\n    }\r\n\r\n    @Test\r\n    public void succeeded() {\r\n        login.with(&quot;tomsmith&quot;, &quot;SuperSecretPassword!&quot;);\r\n        assertTrue(&quot;success message not present&quot;,\r\n                login.successMessagePresent());\r\n    }\r\n    @Test\r\n    public void failed() {\r\n        login.with(&quot;tomsmith&quot;, &quot;bad password&quot;);\r\n        assertTrue(&quot;failure message wasn&#39;t present after providing bogus credentials&quot;,\r\n                login.failureMessagePresent());\r\n    }\r\n\r\n    @Test\r\n    public void failed2() {\r\n        login.with(&quot;tomsmith&quot;, &quot;bad password&quot;);\r\n        assertFalse(&quot;success message was present after providing bogus credentials&quot;,\r\n                login.successMessagePresent());\r\n    }\r\n    public class SauceTestWatcher implements TestWatcher {\r\n        @Override\r\n        public void testSuccessful(ExtensionContext context) {\r\n            driver.executeScript(&quot;sauce:job-result=passed&quot;);\r\n            driver.quit();\r\n        }\r\n        @Override\r\n        public void testFailed(ExtensionContext context, Throwable cause) {\r\n            driver.executeScript(&quot;sauce:job-result=failed&quot;);\r\n            driver.quit();\r\n        }\r\n    }\r\n}\r\n```\r\nI use import org.openqa.selenium.JavascriptExecutor; to get and I&#39;m referencing it at the bottom: driver.executeScript(&quot;sauce:job-result=failed&quot;); or the passed just above it.\r\n[![error - resolve method][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CZRJz.png","title":"Import greyed out in Java","body":"<p>I've just started using Java today and have created some tests but I want to use JavascriptExecutor to be able to report tests passing or failing to Sauce Labs. I've imported the library I believe I need but it doesn't recognise the import either way. I believe I am doing it correctly but evidently I'm not and would like some help to understand where I'm going wrong.</p>\n<p>My code looks like this:</p>\n<pre><code>package tests;\n\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.jupiter.api.extension.ExtensionContext;\nimport org.junit.jupiter.api.extension.RegisterExtension;\nimport pageobjects.Login;\nimport org.junit.jupiter.api.extension.TestWatcher;\nimport org.openqa.selenium.JavascriptExecutor;\nimport static org.junit.Assert.assertFalse;\nimport static org.junit.Assert.assertTrue;\n\npublic class TestLogin extends BaseTest {\n    private Login login;\n\n    @RegisterExtension\n    public SauceTestWatcher watcher = new SauceTestWatcher();\n\n    @Before\n    public void setUp() {\n        login = new Login(driver);\n    }\n\n    @Test\n    public void succeeded() {\n        login.with(&quot;tomsmith&quot;, &quot;SuperSecretPassword!&quot;);\n        assertTrue(&quot;success message not present&quot;,\n                login.successMessagePresent());\n    }\n    @Test\n    public void failed() {\n        login.with(&quot;tomsmith&quot;, &quot;bad password&quot;);\n        assertTrue(&quot;failure message wasn't present after providing bogus credentials&quot;,\n                login.failureMessagePresent());\n    }\n\n    @Test\n    public void failed2() {\n        login.with(&quot;tomsmith&quot;, &quot;bad password&quot;);\n        assertFalse(&quot;success message was present after providing bogus credentials&quot;,\n                login.successMessagePresent());\n    }\n    public class SauceTestWatcher implements TestWatcher {\n        @Override\n        public void testSuccessful(ExtensionContext context) {\n            driver.executeScript(&quot;sauce:job-result=passed&quot;);\n            driver.quit();\n        }\n        @Override\n        public void testFailed(ExtensionContext context, Throwable cause) {\n            driver.executeScript(&quot;sauce:job-result=failed&quot;);\n            driver.quit();\n        }\n    }\n}\n</code></pre>\n<p>I use import org.openqa.selenium.JavascriptExecutor; to get and I'm referencing it at the bottom: driver.executeScript(&quot;sauce:job-result=failed&quot;); or the passed just above it.\n<a href=\"https://i.stack.imgur.com/CZRJz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CZRJz.png\" alt=\"error - resolve method\" /></a></p>\n"},{"tags":["java","hibernate","caching","second-level-cache"],"comments":[{"owner":{"account_id":77350,"reputation":40747,"user_id":220834,"accept_rate":50,"display_name":"Don Roby"},"score":0,"creation_date":1313347676,"post_id":7058843,"comment_id":8442071,"body_markdown":"possible duplicate of [What is second level cache in hibernate?](http://stackoverflow.com/questions/2825436/what-is-second-level-cache-in-hibernate)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2825436/what-is-second-level-cache-in-hibernate\">What is second level cache in hibernate?</a>"}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1313348351,"creation_date":1313347974,"answer_id":7058936,"question_id":7058843,"body_markdown":"- the 2nd level cache is a key-value store. It only works if you get your entities by id\r\n- the 2nd level cache is invalidated / updated per entity when an entity is updated/deleted via hibernate. It is not invalidated if the database is updated in a different way.\r\n- for queries (e.g. list of customers) use the query cache.\r\n\r\nIn reality it is useful to have a key-value distributed cache - that&#39;s what memcached is, and it powers facebook, twitter and many more. But if you don&#39;t have lookups by id, then it won&#39;t be very useful.","title":"When and how to use hibernate second level cache?","body":"<ul>\n<li>the 2nd level cache is a key-value store. It only works if you get your entities by id</li>\n<li>the 2nd level cache is invalidated / updated per entity when an entity is updated/deleted via hibernate. It is not invalidated if the database is updated in a different way.</li>\n<li>for queries (e.g. list of customers) use the query cache.</li>\n</ul>\n\n<p>In reality it is useful to have a key-value distributed cache - that's what memcached is, and it powers facebook, twitter and many more. But if you don't have lookups by id, then it won't be very useful.</p>\n"},{"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"down_vote_count":0,"up_vote_count":110,"is_accepted":true,"score":110,"last_activity_date":1476469247,"creation_date":1313357002,"answer_id":7059822,"question_id":7058843,"body_markdown":"First of all, let&#39;s talk about process level cache (or 2nd level cache as they call it in Hibernate). To make it work, you should\r\n\r\n 1. configure cache provider\r\n 2. tell hibernate what entities to cache (right in hbm.xml file if you use this kind of mapping). \r\n\r\nYou tell to the cache provider how many objects it should store and when/why they should be invalidated. So let&#39;s say you have a Book and an Author entities, each time you&#39;re getting them from the DB, only those that are not in cache will be selected from actually DB. This increases performance significantly. It&#39;s useful when:\r\n\r\n - You write to the database only via Hibernate (because it needs a way to know when to change or invalidate entities in the cache)\r\n - You read objects often\r\n - You have a single node, and you don&#39;t have replication. Otherwise you&#39;ll need to replicate the cache itself (use distributed caches like JGroups) which adds more complexity, and it doesn&#39;t scale as good as share-nothing apps.\r\n\r\nSo when does cache work?\r\n\r\n - When you `session.get()` or `session.load()` the object that was previously selected and resides in cache. Cache is a storage where ID is the key and the properties are the values. So only when there is a possibility to search by ID you could eliminate hitting the DB.\r\n - When your associations are lazy-loaded (or eager-loaded with selects instead of joins)\r\n\r\nBut it doesn&#39;t work when:\r\n\r\n - If you don&#39;t select by ID. Again - 2nd level cache stores a map of entities&#39; IDs to other properties (it doesn&#39;t actually store objects, but the data itself), so if your lookup looks like this: `from Authors where name = :name`, then you don&#39;t hit cache.\r\n - When you use HQL (even if you use `where id = ?`). \r\n - If in your mapping you set `fetch=&quot;join&quot;`, this means that to load associations joins will be used everywhere instead of separate select statements. Process level cache works on children objects only if `fetch=&quot;select&quot;` is used.\r\n - Even if you have `fetch=&quot;select&quot;` but then in HQL you use joins to select associations - those joins will be issued right away and they will overwrite whatever you specified in hbm.xml or annotations.\r\n\r\nNow, about Query Cache. You should note that it&#39;s not a separate cache, it&#39;s an addition to the process level cache. Let&#39;s say you have a Country entity. It&#39;s static, so you know that each time there will be the same result set when you say `from Country`. This is a perfect candidate for query cache, it will store a list of *IDs* in itself and when you next time select all countries, it will return this list to the process level cache and the latter, in turn, will return objects for each ID as these objects are stored already in the 2nd level cache.\r\nQuery cache is invalidated each time anything related to the entity changes. So let&#39;s say you configured `from Authors` to be placed into a Query Cache. It won&#39;t be effective as Author changes often. So you should use Query Cache only for more or less static data.","title":"When and how to use hibernate second level cache?","body":"<p>First of all, let's talk about process level cache (or 2nd level cache as they call it in Hibernate). To make it work, you should</p>\n\n<ol>\n<li>configure cache provider</li>\n<li>tell hibernate what entities to cache (right in hbm.xml file if you use this kind of mapping). </li>\n</ol>\n\n<p>You tell to the cache provider how many objects it should store and when/why they should be invalidated. So let's say you have a Book and an Author entities, each time you're getting them from the DB, only those that are not in cache will be selected from actually DB. This increases performance significantly. It's useful when:</p>\n\n<ul>\n<li>You write to the database only via Hibernate (because it needs a way to know when to change or invalidate entities in the cache)</li>\n<li>You read objects often</li>\n<li>You have a single node, and you don't have replication. Otherwise you'll need to replicate the cache itself (use distributed caches like JGroups) which adds more complexity, and it doesn't scale as good as share-nothing apps.</li>\n</ul>\n\n<p>So when does cache work?</p>\n\n<ul>\n<li>When you <code>session.get()</code> or <code>session.load()</code> the object that was previously selected and resides in cache. Cache is a storage where ID is the key and the properties are the values. So only when there is a possibility to search by ID you could eliminate hitting the DB.</li>\n<li>When your associations are lazy-loaded (or eager-loaded with selects instead of joins)</li>\n</ul>\n\n<p>But it doesn't work when:</p>\n\n<ul>\n<li>If you don't select by ID. Again - 2nd level cache stores a map of entities' IDs to other properties (it doesn't actually store objects, but the data itself), so if your lookup looks like this: <code>from Authors where name = :name</code>, then you don't hit cache.</li>\n<li>When you use HQL (even if you use <code>where id = ?</code>). </li>\n<li>If in your mapping you set <code>fetch=\"join\"</code>, this means that to load associations joins will be used everywhere instead of separate select statements. Process level cache works on children objects only if <code>fetch=\"select\"</code> is used.</li>\n<li>Even if you have <code>fetch=\"select\"</code> but then in HQL you use joins to select associations - those joins will be issued right away and they will overwrite whatever you specified in hbm.xml or annotations.</li>\n</ul>\n\n<p>Now, about Query Cache. You should note that it's not a separate cache, it's an addition to the process level cache. Let's say you have a Country entity. It's static, so you know that each time there will be the same result set when you say <code>from Country</code>. This is a perfect candidate for query cache, it will store a list of <em>IDs</em> in itself and when you next time select all countries, it will return this list to the process level cache and the latter, in turn, will return objects for each ID as these objects are stored already in the 2nd level cache.\nQuery cache is invalidated each time anything related to the entity changes. So let's say you configured <code>from Authors</code> to be placed into a Query Cache. It won't be effective as Author changes often. So you should use Query Cache only for more or less static data.</p>\n"},{"tags":[],"owner":{"account_id":150816,"reputation":6752,"user_id":364274,"accept_rate":90,"display_name":"Basit Anwer"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1451296123,"creation_date":1450346368,"answer_id":34331631,"question_id":7058843,"body_markdown":"Late to the party but wanted to systematically answer these question which many developers ask.\r\n\r\nTaking your question one by one here is my answer.\r\n\r\n&gt; Q. When does hibernate hit this cache?\r\n\r\nA. **First Level cache** is associated with the **Session object**. The **Second Level Cache** is associated with the **Session Factory object**. If object is not found in the first, then the second level is checked.\r\n\r\n&gt; Q. Let&#39;s say I&#39;ve set up the second level cache but not the query caching. I want to cache my customers, there&#39;s 50000 of them. In what ways can I retrieve the customers from the cache?\r\n\r\nA. You got that answered in your update. Also the query cache stores just the list of IDs of the object and those Objects w.r.t their IDs are stored in the *same* second level cache. So if you enable query cache, you&#39;ll utilize the same resource. Neat right ?\r\n\r\n&gt; Q. I assume I can get them by id from cache. That would be easy but also not worthy of caching. But what if I want to do some calculation with all my customers. Let&#39;s say I want to show a list of the customers then how would I access them?\r\n\r\nA. Answered above.\r\n\r\n&gt; Q. How would I get all my customers if query caching is disabled?\r\n\r\nA. Answered above.\r\n\r\n&gt; Q. What would happen if someone updated one of the customers? Would that customer get invalidated in the cache or would all customers get invalidated?\r\n\r\nA. Hibernate has no idea but you could use other third party IMDG / distributed caches to be implemented as [hibernate second level cache][1] and get them invalidated. e.g. [TayzGrid][2] is one such product and there are more i guess.\r\n\r\n\r\n  [1]: http://www.alachisoft.com/tayzgrid/hibernate-second-level-cache.html\r\n  [2]: http://www.alachisoft.com/tayzgrid/","title":"When and how to use hibernate second level cache?","body":"<p>Late to the party but wanted to systematically answer these question which many developers ask.</p>\n\n<p>Taking your question one by one here is my answer.</p>\n\n<blockquote>\n  <p>Q. When does hibernate hit this cache?</p>\n</blockquote>\n\n<p>A. <strong>First Level cache</strong> is associated with the <strong>Session object</strong>. The <strong>Second Level Cache</strong> is associated with the <strong>Session Factory object</strong>. If object is not found in the first, then the second level is checked.</p>\n\n<blockquote>\n  <p>Q. Let's say I've set up the second level cache but not the query caching. I want to cache my customers, there's 50000 of them. In what ways can I retrieve the customers from the cache?</p>\n</blockquote>\n\n<p>A. You got that answered in your update. Also the query cache stores just the list of IDs of the object and those Objects w.r.t their IDs are stored in the <em>same</em> second level cache. So if you enable query cache, you'll utilize the same resource. Neat right ?</p>\n\n<blockquote>\n  <p>Q. I assume I can get them by id from cache. That would be easy but also not worthy of caching. But what if I want to do some calculation with all my customers. Let's say I want to show a list of the customers then how would I access them?</p>\n</blockquote>\n\n<p>A. Answered above.</p>\n\n<blockquote>\n  <p>Q. How would I get all my customers if query caching is disabled?</p>\n</blockquote>\n\n<p>A. Answered above.</p>\n\n<blockquote>\n  <p>Q. What would happen if someone updated one of the customers? Would that customer get invalidated in the cache or would all customers get invalidated?</p>\n</blockquote>\n\n<p>A. Hibernate has no idea but you could use other third party IMDG / distributed caches to be implemented as <a href=\"http://www.alachisoft.com/tayzgrid/hibernate-second-level-cache.html\">hibernate second level cache</a> and get them invalidated. e.g. <a href=\"http://www.alachisoft.com/tayzgrid/\">TayzGrid</a> is one such product and there are more i guess.</p>\n"},{"tags":[],"owner":{"account_id":399098,"reputation":10373,"user_id":764206,"display_name":"Nikita Koksharov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589191594,"creation_date":1589191594,"answer_id":61727141,"question_id":7058843,"body_markdown":"The Hibernate second-level cache is a little tricky to understand and implement. Heres what we can say based on your questions:\r\n\r\n&gt; When does Hibernate hit this cache?\r\n\r\nAs you suggest, the Hibernate L2 cache (if enabled; its not turned on by default) is queried only after the L1 cache. This is a key-value cache whose data is preserved across multiple sessions. \r\n\r\n&gt; Let&#39;s say I&#39;ve set up the second level cache but not the query caching. I want to cache my customers, there&#39;s 50000 of them. In what ways can I retrieve the customers from the cache?\r\n\r\nQuery caching would be best for this use case, since the customer data is static and retrieved from a relational database.\r\n\r\n&gt; What would happen if someone updated one of the customers? Would that customer get invalidated in the cache or would all customers get invalidated?\r\n\r\nIt depends on the specific Hibernate cache strategy youre using. Hibernate actually has four different cache strategies:\r\n\r\n**READ_ONLY**: Objects dont change once inside the cache.  \r\n\r\n**NONSTRICT_READ_WRITE**: Objects change (eventually) after the corresponding database entry is updated; this guarantees eventual consistency.  \r\n\r\n**READ_WRITE**: Objects change (immediately) after the corresponding database entry is updated; this guarantees strong consistency by using &quot;soft&quot; locks.  \r\n\r\n**TRANSACTIONAL**: Objects change using distributed XA transactions, ensuring data integrity; this guarantees either total success or rolling back all changes.\r\nIn all four of these cases, though, updating a single database entry would not invalidate the entire list of customers in the cache. Hibernate is a little smarter than that :)\r\n\r\nTo learn more about how L2 caching works in Hibernate, you can check out the article What is the Hibernate L2 cache, or the in-depth article [Caching in Hibernate with Redis](https://dzone.com/articles/caching-in-hibernate-with-redis)","title":"When and how to use hibernate second level cache?","body":"<p>The Hibernate second-level cache is a little tricky to understand and implement. Heres what we can say based on your questions:</p>\n\n<blockquote>\n  <p>When does Hibernate hit this cache?</p>\n</blockquote>\n\n<p>As you suggest, the Hibernate L2 cache (if enabled; its not turned on by default) is queried only after the L1 cache. This is a key-value cache whose data is preserved across multiple sessions. </p>\n\n<blockquote>\n  <p>Let's say I've set up the second level cache but not the query caching. I want to cache my customers, there's 50000 of them. In what ways can I retrieve the customers from the cache?</p>\n</blockquote>\n\n<p>Query caching would be best for this use case, since the customer data is static and retrieved from a relational database.</p>\n\n<blockquote>\n  <p>What would happen if someone updated one of the customers? Would that customer get invalidated in the cache or would all customers get invalidated?</p>\n</blockquote>\n\n<p>It depends on the specific Hibernate cache strategy youre using. Hibernate actually has four different cache strategies:</p>\n\n<p><strong>READ_ONLY</strong>: Objects dont change once inside the cache.  </p>\n\n<p><strong>NONSTRICT_READ_WRITE</strong>: Objects change (eventually) after the corresponding database entry is updated; this guarantees eventual consistency.  </p>\n\n<p><strong>READ_WRITE</strong>: Objects change (immediately) after the corresponding database entry is updated; this guarantees strong consistency by using \"soft\" locks.  </p>\n\n<p><strong>TRANSACTIONAL</strong>: Objects change using distributed XA transactions, ensuring data integrity; this guarantees either total success or rolling back all changes.\nIn all four of these cases, though, updating a single database entry would not invalidate the entire list of customers in the cache. Hibernate is a little smarter than that :)</p>\n\n<p>To learn more about how L2 caching works in Hibernate, you can check out the article What is the Hibernate L2 cache, or the in-depth article <a href=\"https://dzone.com/articles/caching-in-hibernate-with-redis\" rel=\"nofollow noreferrer\">Caching in Hibernate with Redis</a></p>\n"},{"tags":[],"owner":{"account_id":7718945,"reputation":709,"user_id":5845739,"display_name":"Pratik Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672767985,"creation_date":1672767985,"answer_id":74996873,"question_id":7058843,"body_markdown":"**My working second-level cache code.**\r\n\r\n*hibernate.cfg.xml*\r\n```\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/practice&lt;/property&gt;\r\n        &lt;property name=&quot;connection.user&quot;&gt;root&lt;/property&gt;\r\n        &lt;property name=&quot;connection.password&quot;&gt;Welcome123#&lt;/property&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n\r\n        &lt;property name=&quot;cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.EhCacheRegionFactory&lt;/property&gt;\r\n        &lt;property name=&quot;cache.ehcache.missing_cache_strategy&quot;&gt;create&lt;/property&gt;\r\n\r\n        &lt;mapping class=&quot;com.oracle.dto.BankAccount&quot;/&gt;\r\n        &lt;mapping class=&quot;com.oracle.dto.Citizen&quot;/&gt;\r\n\r\n\r\n\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\n*Bean*\r\n```\r\npackage com.oracle.dto;\r\n\r\nimport lombok.AccessLevel;\r\nimport lombok.Data;\r\nimport lombok.Setter;\r\nimport org.hibernate.annotations.CacheConcurrencyStrategy;\r\n\r\nimport javax.persistence.*;\r\nimport java.util.Date;\r\n\r\n@Entity\r\n@Data\r\n@Cacheable\r\n@org.hibernate.annotations.Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\r\npublic class BankAccount {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO,generator = &quot;bid&quot;)\r\n    @SequenceGenerator(name = &quot;bid&quot;,sequenceName = &quot;b_id&quot;,initialValue = 2000,allocationSize = 1)\r\n    @Setter(AccessLevel.NONE)\r\n    @Column(name=&quot;bank_id&quot;,updatable = false,nullable = false)\r\n    private Long bId;\r\n    private Integer branchCode;\r\n    private Double accountBalance;\r\n    @Temporal(TemporalType.DATE)\r\n    @Column(name=&quot;account_opening_date&quot;,updatable = false,nullable = false)\r\n    private Date accountOpeningDate;\r\n}\r\n\r\n```\r\n\r\n*Main Class*\r\n```\r\npackage com.oracle.main;\r\n\r\nimport com.oracle.dto.BankAccount;\r\nimport org.hibernate.Session;\r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.cfg.Configuration;\r\n\r\npublic class CacheDriver {\r\n    public static void main(String[] args) {\r\n        SessionFactory sf=new Configuration().configure().buildSessionFactory();\r\n        Session session1 = sf.openSession();\r\n        BankAccount account1 = session1.get(BankAccount.class,2000l);\r\n        System.out.println(account1);\r\n        session1.close();\r\n        Session session2 = sf.openSession();\r\n        BankAccount account2 = session2.get(BankAccount.class,2000l);\r\n        System.out.println(account2);\r\n        session1.close();\r\n        sf.close();\r\n    }\r\n}\r\n\r\n```","title":"When and how to use hibernate second level cache?","body":"<p><strong>My working second-level cache code.</strong></p>\n<p><em>hibernate.cfg.xml</em></p>\n<pre><code>&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/practice&lt;/property&gt;\n        &lt;property name=&quot;connection.user&quot;&gt;root&lt;/property&gt;\n        &lt;property name=&quot;connection.password&quot;&gt;Welcome123#&lt;/property&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n\n        &lt;property name=&quot;cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.EhCacheRegionFactory&lt;/property&gt;\n        &lt;property name=&quot;cache.ehcache.missing_cache_strategy&quot;&gt;create&lt;/property&gt;\n\n        &lt;mapping class=&quot;com.oracle.dto.BankAccount&quot;/&gt;\n        &lt;mapping class=&quot;com.oracle.dto.Citizen&quot;/&gt;\n\n\n\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p><em>Bean</em></p>\n<pre><code>package com.oracle.dto;\n\nimport lombok.AccessLevel;\nimport lombok.Data;\nimport lombok.Setter;\nimport org.hibernate.annotations.CacheConcurrencyStrategy;\n\nimport javax.persistence.*;\nimport java.util.Date;\n\n@Entity\n@Data\n@Cacheable\n@org.hibernate.annotations.Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\npublic class BankAccount {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO,generator = &quot;bid&quot;)\n    @SequenceGenerator(name = &quot;bid&quot;,sequenceName = &quot;b_id&quot;,initialValue = 2000,allocationSize = 1)\n    @Setter(AccessLevel.NONE)\n    @Column(name=&quot;bank_id&quot;,updatable = false,nullable = false)\n    private Long bId;\n    private Integer branchCode;\n    private Double accountBalance;\n    @Temporal(TemporalType.DATE)\n    @Column(name=&quot;account_opening_date&quot;,updatable = false,nullable = false)\n    private Date accountOpeningDate;\n}\n\n</code></pre>\n<p><em>Main Class</em></p>\n<pre><code>package com.oracle.main;\n\nimport com.oracle.dto.BankAccount;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\npublic class CacheDriver {\n    public static void main(String[] args) {\n        SessionFactory sf=new Configuration().configure().buildSessionFactory();\n        Session session1 = sf.openSession();\n        BankAccount account1 = session1.get(BankAccount.class,2000l);\n        System.out.println(account1);\n        session1.close();\n        Session session2 = sf.openSession();\n        BankAccount account2 = session2.get(BankAccount.class,2000l);\n        System.out.println(account2);\n        session1.close();\n        sf.close();\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":127863,"reputation":3533,"user_id":325324,"accept_rate":93,"display_name":"palto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60545,"favorite_count":0,"down_vote_count":0,"up_vote_count":95,"accepted_answer_id":7059822,"answer_count":5,"score":95,"last_activity_date":1672767985,"creation_date":1313346892,"question_id":7058843,"body_markdown":"I have trouble understanding when hibernate hits the second level cache and when does it invalidate the cache.\r\n\r\nThis is what I currently understand:\r\n\r\n - Second level cache stores entities between sessions, scope is the SessionFactory\r\n - You have to tell which entities to cache, no entity will get cached by default\r\n - Query cache stores results of queries in the cache.\r\n\r\nWhat I don&#39;t understand is \r\n \r\n- When does hibernate hit this cache? \r\n- Let&#39;s say I&#39;ve set up the second level cache but not the query caching. I want to cache my customers, there&#39;s 50000 of them. In what ways can I retrieve the customers from the cache? \r\n- I assume I can get them by id from cache. That would be easy but also not worthy of caching. But what if I want to do some calculation with all my customers. Let&#39;s say I want to show a list of the customers then how would I access them? \r\n- How would I get all my customers if query caching is disabled? \r\n- What would happen if someone updated one of the customers? \r\n - Would that customer get invalidated in the cache or would all customers get invalidated? \r\n\r\nOr am I thinking caching totally wrong? What would be more appropriate uses of second level cache in that case? The hibernate documentation is not at all clear how the cache works in reality. There are only instructions on how to get it set up.\r\n\r\n**Update:**\r\nSo I&#39;ve come to understand that second level cache(without query cache) would be good for loading data by id&#39;s. For example I have user object that I want to check for permissions in every request in a web application. Would this be a good case to reduce database access by caching the user in the second level cache? Like I would store the user id in the session or wherever and when I need to check for permissions I would load the user by it&#39;s id and check permissions.\r\n\r\n","title":"When and how to use hibernate second level cache?","body":"<p>I have trouble understanding when hibernate hits the second level cache and when does it invalidate the cache.</p>\n\n<p>This is what I currently understand:</p>\n\n<ul>\n<li>Second level cache stores entities between sessions, scope is the SessionFactory</li>\n<li>You have to tell which entities to cache, no entity will get cached by default</li>\n<li>Query cache stores results of queries in the cache.</li>\n</ul>\n\n<p>What I don't understand is </p>\n\n<ul>\n<li>When does hibernate hit this cache? </li>\n<li>Let's say I've set up the second level cache but not the query caching. I want to cache my customers, there's 50000 of them. In what ways can I retrieve the customers from the cache? </li>\n<li>I assume I can get them by id from cache. That would be easy but also not worthy of caching. But what if I want to do some calculation with all my customers. Let's say I want to show a list of the customers then how would I access them? </li>\n<li>How would I get all my customers if query caching is disabled? </li>\n<li>What would happen if someone updated one of the customers? \n\n<ul>\n<li>Would that customer get invalidated in the cache or would all customers get invalidated? </li>\n</ul></li>\n</ul>\n\n<p>Or am I thinking caching totally wrong? What would be more appropriate uses of second level cache in that case? The hibernate documentation is not at all clear how the cache works in reality. There are only instructions on how to get it set up.</p>\n\n<p><strong>Update:</strong>\nSo I've come to understand that second level cache(without query cache) would be good for loading data by id's. For example I have user object that I want to check for permissions in every request in a web application. Would this be a good case to reduce database access by caching the user in the second level cache? Like I would store the user id in the session or wherever and when I need to check for permissions I would load the user by it's id and check permissions.</p>\n"},{"tags":["java","spring","hibernate","caching","ehcache"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624280904,"creation_date":1624280904,"answer_id":68068523,"question_id":67993442,"body_markdown":"Here is a pretty good explanation for this: https://www.ehcache.org/documentation/2.8/integrations/hibernate.html#configure-\r\n\r\nIf you want these warnings to go away, you can define the caches explicitly in the ehcache.xml or you use the `create` configuration value as the warning logs.","title":"HHH90001006: Missing cache[default-update-timestamps-region] was created on-the-fly","body":"<p>Here is a pretty good explanation for this: <a href=\"https://www.ehcache.org/documentation/2.8/integrations/hibernate.html#configure-\" rel=\"nofollow noreferrer\">https://www.ehcache.org/documentation/2.8/integrations/hibernate.html#configure-</a></p>\n<p>If you want these warnings to go away, you can define the caches explicitly in the ehcache.xml or you use the <code>create</code> configuration value as the warning logs.</p>\n"},{"tags":[],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1624294385,"creation_date":1624294385,"answer_id":68071852,"question_id":67993442,"body_markdown":"[Disable expiration on the `default-update-timestamps-region` cache as recommended by Hibernate](https://github.com/hibernate/hibernate-orm/blob/main/documentation/src/main/asciidoc/userguide/chapters/caching/Caching.adoc#query-cache-regions):\r\n\r\n```\r\n@Configuration @EnableCaching\r\npublic class ApplicationConfiguration {\r\n\t@Bean\r\n\tpublic CacheManager ehCacheManager() {\r\n\t\tCacheManager cacheManager = Caching.getCachingProvider().getCacheManager();\r\n\r\n\t\thibernateDefaultUpdateTimestampsRegionConfiguration(cacheManager);\r\n\t\thibernateDefaultQueryResultsRegion(cacheManager);\r\n\r\n\t\treturn cacheManager;\r\n\t}\r\n\r\n\t/**\r\n\t * Create Hibernate&#39;s default-update-timestamps-region cache. No expiration per Hibernate recommendation:\r\n\t * https://github.com/hibernate/hibernate-orm/blob/main/documentation/src/main/asciidoc/userguide/chapters/caching/Caching.adoc#query-cache-regions\r\n\t *\r\n\t * @param cacheManager\r\n\t */\r\n\tprivate void hibernateDefaultUpdateTimestampsRegionConfiguration(CacheManager cacheManager) {\r\n\t\tCacheConfigurationBuilder&lt;Object, Object&gt; builder = CacheConfigurationBuilder\r\n\t\t\t\t.newCacheConfigurationBuilder(Object.class, Object.class,\r\n\t\t\t\t\t\tResourcePoolsBuilder.newResourcePoolsBuilder().offheap(1, MemoryUnit.MB));\r\n\r\n\t\tjavax.cache.configuration.Configuration&lt;Object, Object&gt; cache = Eh107Configuration.fromEhcacheCacheConfiguration(builder);\r\n\r\n\t\tcacheManager.createCache(&quot;default-update-timestamps-region&quot;, cache);\r\n\r\n\t\t//cacheManager.createCache(&quot;default-update-timestamps-region&quot;, new MutableConfiguration&lt;&gt;());\r\n\t}\r\n\r\n\t/**\r\n\t * Create Hibernate&#39;s default-query-results-region cache.\r\n\t * https://github.com/hibernate/hibernate-orm/blob/main/documentation/src/main/asciidoc/userguide/chapters/caching/Caching.adoc#query-cache-regions\r\n\t *\r\n\t * @param cacheManager\r\n\t */\r\n\tprivate void hibernateDefaultQueryResultsRegion(CacheManager cacheManager) {\r\n\t\tCacheConfigurationBuilder&lt;Object, Object&gt; builder = CacheConfigurationBuilder\r\n\t\t\t\t.newCacheConfigurationBuilder(Object.class, Object.class,\r\n\t\t\t\t\t\tResourcePoolsBuilder.newResourcePoolsBuilder().offheap(1, MemoryUnit.MB));\r\n\r\n\t\tjavax.cache.configuration.Configuration&lt;Object, Object&gt; cache = Eh107Configuration.fromEhcacheCacheConfiguration(builder);\r\n\r\n\t\tcacheManager.createCache(&quot;default-query-results-region&quot;, cache);\r\n\r\n\t\t//cacheManager.createCache(&quot;default-query-results-region&quot;, new MutableConfiguration&lt;&gt;());\r\n\t}\r\n\r\n}\r\n\r\n```","title":"HHH90001006: Missing cache[default-update-timestamps-region] was created on-the-fly","body":"<p><a href=\"https://github.com/hibernate/hibernate-orm/blob/main/documentation/src/main/asciidoc/userguide/chapters/caching/Caching.adoc#query-cache-regions\" rel=\"nofollow noreferrer\">Disable expiration on the <code>default-update-timestamps-region</code> cache as recommended by Hibernate</a>:</p>\n<pre><code>@Configuration @EnableCaching\npublic class ApplicationConfiguration {\n    @Bean\n    public CacheManager ehCacheManager() {\n        CacheManager cacheManager = Caching.getCachingProvider().getCacheManager();\n\n        hibernateDefaultUpdateTimestampsRegionConfiguration(cacheManager);\n        hibernateDefaultQueryResultsRegion(cacheManager);\n\n        return cacheManager;\n    }\n\n    /**\n     * Create Hibernate's default-update-timestamps-region cache. No expiration per Hibernate recommendation:\n     * https://github.com/hibernate/hibernate-orm/blob/main/documentation/src/main/asciidoc/userguide/chapters/caching/Caching.adoc#query-cache-regions\n     *\n     * @param cacheManager\n     */\n    private void hibernateDefaultUpdateTimestampsRegionConfiguration(CacheManager cacheManager) {\n        CacheConfigurationBuilder&lt;Object, Object&gt; builder = CacheConfigurationBuilder\n                .newCacheConfigurationBuilder(Object.class, Object.class,\n                        ResourcePoolsBuilder.newResourcePoolsBuilder().offheap(1, MemoryUnit.MB));\n\n        javax.cache.configuration.Configuration&lt;Object, Object&gt; cache = Eh107Configuration.fromEhcacheCacheConfiguration(builder);\n\n        cacheManager.createCache(&quot;default-update-timestamps-region&quot;, cache);\n\n        //cacheManager.createCache(&quot;default-update-timestamps-region&quot;, new MutableConfiguration&lt;&gt;());\n    }\n\n    /**\n     * Create Hibernate's default-query-results-region cache.\n     * https://github.com/hibernate/hibernate-orm/blob/main/documentation/src/main/asciidoc/userguide/chapters/caching/Caching.adoc#query-cache-regions\n     *\n     * @param cacheManager\n     */\n    private void hibernateDefaultQueryResultsRegion(CacheManager cacheManager) {\n        CacheConfigurationBuilder&lt;Object, Object&gt; builder = CacheConfigurationBuilder\n                .newCacheConfigurationBuilder(Object.class, Object.class,\n                        ResourcePoolsBuilder.newResourcePoolsBuilder().offheap(1, MemoryUnit.MB));\n\n        javax.cache.configuration.Configuration&lt;Object, Object&gt; cache = Eh107Configuration.fromEhcacheCacheConfiguration(builder);\n\n        cacheManager.createCache(&quot;default-query-results-region&quot;, cache);\n\n        //cacheManager.createCache(&quot;default-query-results-region&quot;, new MutableConfiguration&lt;&gt;());\n    }\n\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658390935,"creation_date":1658389205,"answer_id":73062378,"question_id":67993442,"body_markdown":"I find it easier to configure it in **ehcache.xml**:\r\n\r\n    &lt;cache-template name=&quot;default&quot;&gt;\r\n        &lt;expiry&gt;&lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;&lt;/expiry&gt;\r\n        &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;\r\n    &lt;/cache-template&gt;\r\n\r\n    &lt;cache alias=&quot;default-query-results-region&quot;&gt;\r\n        &lt;expiry&gt;&lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;&lt;/expiry&gt;\r\n        &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;\r\n    &lt;/cache&gt;\r\n        \r\n    &lt;cache alias=&quot;default-update-timestamps-region&quot;&gt;\r\n        &lt;expiry&gt;&lt;none/&gt;&lt;/expiry&gt;\r\n        &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;\r\n    &lt;/cache&gt;\r\n\r\nIMPORTANT: Align the query results expiration with the expiration of the entities returned by the query. Further reading [here](https://dzone.com/articles/pitfalls-hibernate-second-0) and [here](https://thorben-janssen.com/hibernate-ehcache/).","title":"HHH90001006: Missing cache[default-update-timestamps-region] was created on-the-fly","body":"<p>I find it easier to configure it in <strong>ehcache.xml</strong>:</p>\n<pre><code>&lt;cache-template name=&quot;default&quot;&gt;\n    &lt;expiry&gt;&lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;&lt;/expiry&gt;\n    &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;\n&lt;/cache-template&gt;\n\n&lt;cache alias=&quot;default-query-results-region&quot;&gt;\n    &lt;expiry&gt;&lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;&lt;/expiry&gt;\n    &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;\n&lt;/cache&gt;\n    \n&lt;cache alias=&quot;default-update-timestamps-region&quot;&gt;\n    &lt;expiry&gt;&lt;none/&gt;&lt;/expiry&gt;\n    &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;\n&lt;/cache&gt;\n</code></pre>\n<p>IMPORTANT: Align the query results expiration with the expiration of the entities returned by the query. Further reading <a href=\"https://dzone.com/articles/pitfalls-hibernate-second-0\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://thorben-janssen.com/hibernate-ehcache/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":7718945,"reputation":709,"user_id":5845739,"display_name":"Pratik Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672767867,"creation_date":1672767867,"answer_id":74996856,"question_id":67993442,"body_markdown":"***I&#39;m sharing my complete example of Second-Level Caching.***\r\n\r\n\r\n\r\nhibernate.cfg.xml\r\n```\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/practice&lt;/property&gt;\r\n        &lt;property name=&quot;connection.user&quot;&gt;root&lt;/property&gt;\r\n        &lt;property name=&quot;connection.password&quot;&gt;Welcome123#&lt;/property&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n\r\n        &lt;property name=&quot;cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.EhCacheRegionFactory&lt;/property&gt;\r\n        &lt;property name=&quot;cache.ehcache.missing_cache_strategy&quot;&gt;create&lt;/property&gt;\r\n\r\n        &lt;mapping class=&quot;com.oracle.dto.BankAccount&quot;/&gt;\r\n        &lt;mapping class=&quot;com.oracle.dto.Citizen&quot;/&gt;\r\n\r\n\r\n\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\nBean\r\n```\r\npackage com.oracle.dto;\r\n\r\nimport lombok.AccessLevel;\r\nimport lombok.Data;\r\nimport lombok.Setter;\r\nimport org.hibernate.annotations.CacheConcurrencyStrategy;\r\n\r\nimport javax.persistence.*;\r\nimport java.util.Date;\r\n\r\n@Entity\r\n@Data\r\n@Cacheable\r\n@org.hibernate.annotations.Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\r\npublic class BankAccount {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO,generator = &quot;bid&quot;)\r\n    @SequenceGenerator(name = &quot;bid&quot;,sequenceName = &quot;b_id&quot;,initialValue = 2000,allocationSize = 1)\r\n    @Setter(AccessLevel.NONE)\r\n    @Column(name=&quot;bank_id&quot;,updatable = false,nullable = false)\r\n    private Long bId;\r\n    private Integer branchCode;\r\n    private Double accountBalance;\r\n    @Temporal(TemporalType.DATE)\r\n    @Column(name=&quot;account_opening_date&quot;,updatable = false,nullable = false)\r\n    private Date accountOpeningDate;\r\n}\r\n\r\n```\r\n\r\nMain Class\r\n```\r\npackage com.oracle.main;\r\n\r\nimport com.oracle.dto.BankAccount;\r\nimport org.hibernate.Session;\r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.cfg.Configuration;\r\n\r\npublic class CacheDriver {\r\n    public static void main(String[] args) {\r\n        SessionFactory sf=new Configuration().configure().buildSessionFactory();\r\n        Session session1 = sf.openSession();\r\n        BankAccount account1 = session1.get(BankAccount.class,2000l);\r\n        System.out.println(account1);\r\n        session1.close();\r\n        Session session2 = sf.openSession();\r\n        BankAccount account2 = session2.get(BankAccount.class,2000l);\r\n        System.out.println(account2);\r\n        session1.close();\r\n        sf.close();\r\n    }\r\n}\r\n\r\n```","title":"HHH90001006: Missing cache[default-update-timestamps-region] was created on-the-fly","body":"<p><em><strong>I'm sharing my complete example of Second-Level Caching.</strong></em></p>\n<p>hibernate.cfg.xml</p>\n<pre><code>&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/practice&lt;/property&gt;\n        &lt;property name=&quot;connection.user&quot;&gt;root&lt;/property&gt;\n        &lt;property name=&quot;connection.password&quot;&gt;Welcome123#&lt;/property&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n\n        &lt;property name=&quot;cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.EhCacheRegionFactory&lt;/property&gt;\n        &lt;property name=&quot;cache.ehcache.missing_cache_strategy&quot;&gt;create&lt;/property&gt;\n\n        &lt;mapping class=&quot;com.oracle.dto.BankAccount&quot;/&gt;\n        &lt;mapping class=&quot;com.oracle.dto.Citizen&quot;/&gt;\n\n\n\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>Bean</p>\n<pre><code>package com.oracle.dto;\n\nimport lombok.AccessLevel;\nimport lombok.Data;\nimport lombok.Setter;\nimport org.hibernate.annotations.CacheConcurrencyStrategy;\n\nimport javax.persistence.*;\nimport java.util.Date;\n\n@Entity\n@Data\n@Cacheable\n@org.hibernate.annotations.Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\npublic class BankAccount {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO,generator = &quot;bid&quot;)\n    @SequenceGenerator(name = &quot;bid&quot;,sequenceName = &quot;b_id&quot;,initialValue = 2000,allocationSize = 1)\n    @Setter(AccessLevel.NONE)\n    @Column(name=&quot;bank_id&quot;,updatable = false,nullable = false)\n    private Long bId;\n    private Integer branchCode;\n    private Double accountBalance;\n    @Temporal(TemporalType.DATE)\n    @Column(name=&quot;account_opening_date&quot;,updatable = false,nullable = false)\n    private Date accountOpeningDate;\n}\n\n</code></pre>\n<p>Main Class</p>\n<pre><code>package com.oracle.main;\n\nimport com.oracle.dto.BankAccount;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\npublic class CacheDriver {\n    public static void main(String[] args) {\n        SessionFactory sf=new Configuration().configure().buildSessionFactory();\n        Session session1 = sf.openSession();\n        BankAccount account1 = session1.get(BankAccount.class,2000l);\n        System.out.println(account1);\n        session1.close();\n        Session session2 = sf.openSession();\n        BankAccount account2 = session2.get(BankAccount.class,2000l);\n        System.out.println(account2);\n        session1.close();\n        sf.close();\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5399,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":68071852,"answer_count":4,"score":2,"last_activity_date":1672767867,"creation_date":1623790774,"question_id":67993442,"body_markdown":"A trivial [Spring Boot 2.5 application](https://github.com/JanStureNielsen/so-cache-demo) with Spring Data JPA with EhCache 3 and Hibernate 5 with Query and Second Level Caches enabled:\r\n\r\n```\r\nspring.jpa.properties.hibernate.cache.use_query_cache=true\r\nspring.jpa.properties.hibernate.cache.use_second_level_cache=true\r\n```\r\n\r\ngenerates a warning from Hibernate and an information message from EhCache for each cache on startup:\r\n\r\n```\r\nWARN org.hibernate.orm.cache          HHH90001006: Missing cache[default-update-timestamps-region] was created on-the-fly. The created cache will use a provider-specific default configuration: make sure you defined one. You can disable this warning by setting &#39;hibernate.javax.cache.missing_cache_strategy&#39; to &#39;create&#39;.\r\nINFO org.ehcache.core.EhcacheManager  Cache &#39;default-update-timestamps-region&#39; created in EhcacheManager.\r\n```\r\n\r\nand\r\n\r\n```\r\nWARN org.hibernate.orm.cache          HHH90001006: Missing cache[default-query-results-region] was created on-the-fly. The created cache will use a provider-specific default configuration: make sure you defined one. You can disable this warning by setting &#39;hibernate.javax.cache.missing_cache_strategy&#39; to &#39;create&#39;.\r\nINFO org.ehcache.core.EhcacheManager  Cache &#39;default-query-results-region&#39; created in EhcacheManager.\r\n```\r\n\r\nWhat&#39;s the proper EhCache configuration for these Hibernate caches?","title":"HHH90001006: Missing cache[default-update-timestamps-region] was created on-the-fly","body":"<p>A trivial <a href=\"https://github.com/JanStureNielsen/so-cache-demo\" rel=\"nofollow noreferrer\">Spring Boot 2.5 application</a> with Spring Data JPA with EhCache 3 and Hibernate 5 with Query and Second Level Caches enabled:</p>\n<pre><code>spring.jpa.properties.hibernate.cache.use_query_cache=true\nspring.jpa.properties.hibernate.cache.use_second_level_cache=true\n</code></pre>\n<p>generates a warning from Hibernate and an information message from EhCache for each cache on startup:</p>\n<pre><code>WARN org.hibernate.orm.cache          HHH90001006: Missing cache[default-update-timestamps-region] was created on-the-fly. The created cache will use a provider-specific default configuration: make sure you defined one. You can disable this warning by setting 'hibernate.javax.cache.missing_cache_strategy' to 'create'.\nINFO org.ehcache.core.EhcacheManager  Cache 'default-update-timestamps-region' created in EhcacheManager.\n</code></pre>\n<p>and</p>\n<pre><code>WARN org.hibernate.orm.cache          HHH90001006: Missing cache[default-query-results-region] was created on-the-fly. The created cache will use a provider-specific default configuration: make sure you defined one. You can disable this warning by setting 'hibernate.javax.cache.missing_cache_strategy' to 'create'.\nINFO org.ehcache.core.EhcacheManager  Cache 'default-query-results-region' created in EhcacheManager.\n</code></pre>\n<p>What's the proper EhCache configuration for these Hibernate caches?</p>\n"},{"tags":["java","swing"],"owner":{"account_id":26048869,"reputation":59,"user_id":19752467,"display_name":"Gareth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672767857,"creation_date":1672760192,"question_id":74995460,"body_markdown":"I am trying to get the window of my program to resize and reposition when it is dragged to a different monitor. The current code I have achieves this but doesn&#39;t work 100% as intended. When the window is dragged to another screen the JFrame is resized but it only gets set to the new location if the user releases the mouse immediately after entering the new window. Is there a way to execute this so the users mouse drag doesn&#39;t override the setLocation()?\r\n\r\nExample:\r\n\r\n    import javax.swing.*;\r\n    import java.awt.event.*;\r\n    import java.awt.*;\r\n    \r\n    public class FrameTest extends JFrame\r\n    {\r\n       JPanel pnl;\r\n       JLabel lbl;\r\n       GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();\r\n       GraphicsDevice[] gs = ge.getScreenDevices();\r\n       GraphicsConfiguration gsx = FrameTest.this.getGraphicsConfiguration();\r\n       \r\n       String OriginScreen = String.valueOf(gsx);\r\n       String CurrentScreen = String.valueOf(gsx);\r\n       \r\n       public FrameTest()\r\n       {\r\n          setSize(1100,800); \r\n          setLocationRelativeTo(null);\r\n          setTitle(&quot;Frame Test&quot;);\r\n          setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                \r\n          pnl = new JPanel();\r\n          lbl = new JLabel(&quot;This is my Frame&quot;);\r\n          \r\n          add(pnl);\r\n          pnl.add(lbl);\r\n          \r\n          setVisible(true);\r\n          FrameTest.this.addComponentListener(new CL());  \r\n        \r\n       }\r\n       \r\n       public class CL implements ComponentListener \r\n       {\r\n    \r\n        @Override \r\n        public void componentShown(ComponentEvent evt) \r\n        {\r\n        }\r\n    \r\n        @Override\r\n        public void componentResized(ComponentEvent e) \r\n        {\r\n        }\r\n    \r\n        @Override\r\n        public void componentMoved(ComponentEvent e) \r\n        {\r\n             gsx = FrameTest.this.getGraphicsConfiguration();\r\n             CurrentScreen = String.valueOf(gsx);\r\n             System.out.println(&quot;Origin Screen: &quot; + OriginScreen);\r\n             System.out.println(&quot;Current Screen: &quot; + CurrentScreen);\r\n             if(!OriginScreen.equals(CurrentScreen))\r\n             {\r\n                int X = (int)Math.round(FrameTest.this.getGraphicsConfiguration().getBounds().getX());\r\n                FrameTest.this.setLocation(X,0);\r\n                OriginScreen = String.valueOf(gsx);\r\n                System.out.println(&quot;Screen Switch Detected&quot;);\r\n                int iW = (int)Math.round(FrameTest.this.getGraphicsConfiguration().getBounds().getWidth());\r\n                int iH = (int)Math.round(FrameTest.this.getGraphicsConfiguration().getBounds().getHeight());\r\n                iW = iW - 10;\r\n                iH = iH - 10;\r\n                FrameTest.this.setSize(iW,iH);\r\n                \r\n             }   \r\n             System.out.println(&quot;Frame Moved&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void componentHidden(ComponentEvent e) \r\n        {\r\n        }  \r\n       } \r\n       public static void main( String[] args ) \r\n       {\r\n          new FrameTest();\r\n       }\r\n    }","title":"Dragging window by title bar overrides ComponentListener setLocation()","body":"<p>I am trying to get the window of my program to resize and reposition when it is dragged to a different monitor. The current code I have achieves this but doesn't work 100% as intended. When the window is dragged to another screen the JFrame is resized but it only gets set to the new location if the user releases the mouse immediately after entering the new window. Is there a way to execute this so the users mouse drag doesn't override the setLocation()?</p>\n<p>Example:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.event.*;\nimport java.awt.*;\n\npublic class FrameTest extends JFrame\n{\n   JPanel pnl;\n   JLabel lbl;\n   GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();\n   GraphicsDevice[] gs = ge.getScreenDevices();\n   GraphicsConfiguration gsx = FrameTest.this.getGraphicsConfiguration();\n   \n   String OriginScreen = String.valueOf(gsx);\n   String CurrentScreen = String.valueOf(gsx);\n   \n   public FrameTest()\n   {\n      setSize(1100,800); \n      setLocationRelativeTo(null);\n      setTitle(&quot;Frame Test&quot;);\n      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            \n      pnl = new JPanel();\n      lbl = new JLabel(&quot;This is my Frame&quot;);\n      \n      add(pnl);\n      pnl.add(lbl);\n      \n      setVisible(true);\n      FrameTest.this.addComponentListener(new CL());  \n    \n   }\n   \n   public class CL implements ComponentListener \n   {\n\n    @Override \n    public void componentShown(ComponentEvent evt) \n    {\n    }\n\n    @Override\n    public void componentResized(ComponentEvent e) \n    {\n    }\n\n    @Override\n    public void componentMoved(ComponentEvent e) \n    {\n         gsx = FrameTest.this.getGraphicsConfiguration();\n         CurrentScreen = String.valueOf(gsx);\n         System.out.println(&quot;Origin Screen: &quot; + OriginScreen);\n         System.out.println(&quot;Current Screen: &quot; + CurrentScreen);\n         if(!OriginScreen.equals(CurrentScreen))\n         {\n            int X = (int)Math.round(FrameTest.this.getGraphicsConfiguration().getBounds().getX());\n            FrameTest.this.setLocation(X,0);\n            OriginScreen = String.valueOf(gsx);\n            System.out.println(&quot;Screen Switch Detected&quot;);\n            int iW = (int)Math.round(FrameTest.this.getGraphicsConfiguration().getBounds().getWidth());\n            int iH = (int)Math.round(FrameTest.this.getGraphicsConfiguration().getBounds().getHeight());\n            iW = iW - 10;\n            iH = iH - 10;\n            FrameTest.this.setSize(iW,iH);\n            \n         }   \n         System.out.println(&quot;Frame Moved&quot;);\n    }\n\n    @Override\n    public void componentHidden(ComponentEvent e) \n    {\n    }  \n   } \n   public static void main( String[] args ) \n   {\n      new FrameTest();\n   }\n}\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1672767987,"post_id":74996847,"comment_id":132346955,"body_markdown":"I don&#39;t recommend that. The code is much easier to maintain and extend if the expressions are *separate*","body":"I don&#39;t recommend that. The code is much easier to maintain and extend if the expressions are <i>separate</i>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1672768156,"post_id":74996847,"comment_id":132347013,"body_markdown":"&quot;return true has at least 2 numbers&quot; your expression here checks for 2 _consecutive_ numbers, that&#39;s not quite the same thing.","body":"&quot;return true has at least 2 numbers&quot; your expression here checks for 2 <i>consecutive</i> numbers, that&#39;s not quite the same thing."}],"owner":{"account_id":22483008,"reputation":11,"user_id":20921286,"display_name":"Daniel RT"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1672768332,"answer_count":0,"score":0,"last_activity_date":1672767829,"creation_date":1672767829,"question_id":74996847,"body_markdown":"recently they sent me an exercise to check a password with regular expressions, which would have to have a capital letter, lower case letters, and two numbers, since I have no experience with regex I created a class to experiment with, what happened was that I found the solution, but for separate expressions and coincidentally joining them in a single expression returns false. Could someone please help me with this?\r\n`\r\n```\r\npublic class main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n&#160;\r\n\r\n        String cadena=&quot;12Aaniel&quot;;\r\n\r\n        //return true 8 characters minimum\r\n\r\n        System.out.println(&quot;ejemplo10: &quot;+cadena.matches(&quot;.{8,}&quot;));\r\n\r\n        //return true has at least one capital letter\r\n\r\n        System.out.println(&quot;ejemplo10: &quot;+cadena.matches(&quot;(.*[A-Z]+.*)&quot;));\r\n\r\n        //return true has at least 2 numbers\r\n\r\n        System.out.println(&quot;ejemplo10: &quot;+cadena.matches(&quot;(.*[0-9]{2,}.*)&quot;));\r\n\r\n        //return false all together\r\n\r\n        System.out.println(&quot;ejemplo10: &quot;+cadena.matches(&quot;.{8,}(.*[A-Z]+.*)(.*[0-9]{2,}.*)&quot;));\r\n\r\n&#160;\r\n\r\n    }\r\n\r\n}\r\n```\r\n`\r\n\r\nI need all in one expresion","title":"Regex for password","body":"<p>recently they sent me an exercise to check a password with regular expressions, which would have to have a capital letter, lower case letters, and two numbers, since I have no experience with regex I created a class to experiment with, what happened was that I found the solution, but for separate expressions and coincidentally joining them in a single expression returns false. Could someone please help me with this?\n`</p>\n<pre><code>public class main {\n\n    public static void main(String[] args) {\n\n\n\n        String cadena=&quot;12Aaniel&quot;;\n\n        //return true 8 characters minimum\n\n        System.out.println(&quot;ejemplo10: &quot;+cadena.matches(&quot;.{8,}&quot;));\n\n        //return true has at least one capital letter\n\n        System.out.println(&quot;ejemplo10: &quot;+cadena.matches(&quot;(.*[A-Z]+.*)&quot;));\n\n        //return true has at least 2 numbers\n\n        System.out.println(&quot;ejemplo10: &quot;+cadena.matches(&quot;(.*[0-9]{2,}.*)&quot;));\n\n        //return false all together\n\n        System.out.println(&quot;ejemplo10: &quot;+cadena.matches(&quot;.{8,}(.*[A-Z]+.*)(.*[0-9]{2,}.*)&quot;));\n\n\n\n    }\n\n}\n</code></pre>\n<p>`</p>\n<p>I need all in one expresion</p>\n"},{"tags":["java","xml","jar","classpath","manifest"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672767733,"post_id":74996817,"comment_id":132346881,"body_markdown":"Although it&#39;s possible to add a classpath *into* a jar file, I wouldn&#39;t recommend it as it can be a source of errors and obviously it needs to be manually updated to edit it. Use a command line &#39;one-time&#39; classpath. e.g. `java -cp /some/classes:xyz.jar foo.bar.Tester`","body":"Although it&#39;s possible to add a classpath <i>into</i> a jar file, I wouldn&#39;t recommend it as it can be a source of errors and obviously it needs to be manually updated to edit it. Use a command line &#39;one-time&#39; classpath. e.g. <code>java -cp &#47;some&#47;classes:xyz.jar foo.bar.Tester</code>"},{"owner":{"account_id":22969859,"reputation":11,"user_id":17098400,"display_name":"Lucky"},"score":0,"creation_date":1672775014,"post_id":74996817,"comment_id":132348945,"body_markdown":"I do not think that this would work because I do not know where the Jar file will be when we run it. so I need a whey to tell it that when I run you and give you the name of the test class it will be in the same directory as you are in when you run.","body":"I do not think that this would work because I do not know where the Jar file will be when we run it. so I need a whey to tell it that when I run you and give you the name of the test class it will be in the same directory as you are in when you run."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672775995,"post_id":74996817,"comment_id":132349194,"body_markdown":"Creating a jar file is yet another thing to issue a command for. I really don&#39;t know why you&#39;re not using a build tool to do that as well","body":"Creating a jar file is yet another thing to issue a command for. I really don&#39;t know why you&#39;re not using a build tool to do that as well"}],"owner":{"account_id":22969859,"reputation":11,"user_id":17098400,"display_name":"Lucky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672767619,"creation_date":1672767619,"question_id":74996817,"body_markdown":"I got a tester program that will run from a jar file the jar file needs to include a classpath to be able to fined the tests classes in the same directory where the jar file is. The test class will not be in the jar file but will be in the same folder as the the jar file\r\n\r\nI searched and fined some usage of a manifest.txt file or a xml file with the classpath in but never knew how to add it to my jar file when I build it.","title":"Adding a class path to jar file","body":"<p>I got a tester program that will run from a jar file the jar file needs to include a classpath to be able to fined the tests classes in the same directory where the jar file is. The test class will not be in the jar file but will be in the same folder as the the jar file</p>\n<p>I searched and fined some usage of a manifest.txt file or a xml file with the classpath in but never knew how to add it to my jar file when I build it.</p>\n"},{"tags":["java","build.gradle","gradlew","jcenter"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1672767188,"post_id":74994432,"comment_id":132346701,"body_markdown":"https://blog.gradle.org/jcenter-shutdown","body":"<a href=\"https://blog.gradle.org/jcenter-shutdown\" rel=\"nofollow noreferrer\">blog.gradle.org/jcenter-shutdown</a>"}],"owner":{"account_id":27421468,"reputation":1,"user_id":20919833,"display_name":"Ragaei MOHAMED"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672767139,"creation_date":1672754657,"question_id":74994432,"body_markdown":"I found a problem while importing project in castle eclipse enviroment\r\n```\r\n&gt; Task :compileJava FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:compileJava&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:compileClasspath&#39;.\r\n   &gt; Could not download systems-common-java8.jar (systems.uom:systems-common-java8:1.0)\r\n      &gt; Could not get resource &#39;https://jcenter.bintray.com/systems/uom/systems-common-java8/1.0/systems-common-java8-1.0.jar&#39;.\r\n         &gt; Could not HEAD &#39;https://jcenter.bintray.com/systems/uom/systems-common-java8/1.0/systems-common-java8-1.0.jar&#39;.\r\n            &gt; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n   &gt; Could not download si-units-java8.jar (si.uom:si-units-java8:1.2)\r\n      &gt; Could not get resource &#39;https://jcenter.bintray.com/si/uom/si-units-java8/1.2/si-units-java8-1.2.jar&#39;.\r\n```    \r\n\r\n[the error while build the project using command gradlew build](https://i.stack.imgur.com/D8gvb.png)","title":"I am facing a problem while importing and build base project in eclipse for castle enviroment","body":"<p>I found a problem while importing project in castle eclipse enviroment</p>\n<pre><code>&gt; Task :compileJava FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':compileJava'.\n&gt; Could not resolve all files for configuration ':compileClasspath'.\n   &gt; Could not download systems-common-java8.jar (systems.uom:systems-common-java8:1.0)\n      &gt; Could not get resource 'https://jcenter.bintray.com/systems/uom/systems-common-java8/1.0/systems-common-java8-1.0.jar'.\n         &gt; Could not HEAD 'https://jcenter.bintray.com/systems/uom/systems-common-java8/1.0/systems-common-java8-1.0.jar'.\n            &gt; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n   &gt; Could not download si-units-java8.jar (si.uom:si-units-java8:1.2)\n      &gt; Could not get resource 'https://jcenter.bintray.com/si/uom/si-units-java8/1.2/si-units-java8-1.2.jar'.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/D8gvb.png\" rel=\"nofollow noreferrer\">the error while build the project using command gradlew build</a></p>\n"},{"tags":["java","scala","generics","design-patterns","finagle"],"comments":[{"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"score":0,"creation_date":1672769847,"post_id":74996720,"comment_id":132347548,"body_markdown":"I am afraid this might not work because of the type erasure and you would need to use reflection","body":"I am afraid this might not work because of the type erasure and you would need to use reflection"},{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1672770812,"post_id":74996720,"comment_id":132347805,"body_markdown":"Is this a single id or a list of IDs as input parameter? Anyway you can probably achieve what you wrote with a `ClassTag` but you&#39;ll need to define 3 types for the 3 IDs and wrap/unwrap them, I don&#39;t think you can achieve it with `A` being a subtype of `UUID`.","body":"Is this a single id or a list of IDs as input parameter? Anyway you can probably achieve what you wrote with a <code>ClassTag</code> but you&#39;ll need to define 3 types for the 3 IDs and wrap/unwrap them, I don&#39;t think you can achieve it with <code>A</code> being a subtype of <code>UUID</code>."},{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1672770892,"post_id":74996720,"comment_id":132347829,"body_markdown":"You could also just go with an enum (sealed trait or similar) not related to UUID at all and pass it as a second parameter with the list of IDs.","body":"You could also just go with an enum (sealed trait or similar) not related to UUID at all and pass it as a second parameter with the list of IDs."},{"owner":{"account_id":5038321,"reputation":729,"user_id":4046516,"accept_rate":82,"display_name":"CodeSsscala"},"score":0,"creation_date":1672778590,"post_id":74996720,"comment_id":132349853,"body_markdown":"Yeah the inputs is a list of Ids. So the sealed trait would be an identifier for what type of ID it is? Not sure what the standard pattern is in the industry for these types of endpoints","body":"Yeah the inputs is a list of Ids. So the sealed trait would be an identifier for what type of ID it is? Not sure what the standard pattern is in the industry for these types of endpoints"},{"owner":{"account_id":5335286,"reputation":39826,"user_id":4254517,"accept_rate":48,"display_name":"Dima"},"score":1,"creation_date":1672780282,"post_id":74996720,"comment_id":132350282,"body_markdown":"Yeah, make an enum ... or pass a `ClassTag`. Either way works. I also don&#39;t see what your &quot;coordinator serivice&quot; helps: if you still three endpoints and three database side functions, how is this reducing any repetition. I would just combine the tree DB-functions into one, that takes an enum parameter, and uses it to derive the where clause.","body":"Yeah, make an enum ... or pass a <code>ClassTag</code>. Either way works. I also don&#39;t see what your &quot;coordinator serivice&quot; helps: if you still three endpoints and three database side functions, how is this reducing any repetition. I would just combine the tree DB-functions into one, that takes an enum parameter, and uses it to derive the where clause."}],"owner":{"account_id":5038321,"reputation":729,"user_id":4046516,"accept_rate":82,"display_name":"CodeSsscala"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1672767118,"creation_date":1672767118,"question_id":74996720,"body_markdown":"I&#39;m designing a Scala service which has 3 endpoints which are very similar -\r\na. `getUserByUserID(userIds: List[UserID]): List[User]`\r\nb. `getUserByEmployeeID(employeeIDs: List[EmployeeID]): List[User]`\r\nc. `getUserByDepartmentID(departmentIDs: List[DepartmentID]): List[User]`\r\n\r\nThink of User as a case class having many fields but 3 of them for the above endpoints are:\r\n```\r\ncase class User(\r\n  userId: UserID,\r\n  employeeID: EmployeeID,\r\n  departmentID: DepartmentID,\r\n)\r\n```\r\nAll these IDs are of type `java.util.UUID`. \r\n\r\nAll 3 endpoints return the `User` object as a list where the appropriate IDs match.\r\n\r\nMy concern is that there&#39;s a lot of repetitive work in this. Only difference is that the `WHERE` clause in the query changes to one of `userID`, `employeeID`, `departmentID`.\r\n\r\n\r\nI want to minimize this duplication. Is Scala generics a way to do that?\r\n\r\nI was thinking of creating a coordinator service that takes in any form of ID and returns the `List[User]` from it\r\n\r\nso something like\r\n\r\nendpoint1, endpoint2, endpoint3 -&gt; call CoordinatorService --&gt; call Database service\r\n\r\nCoordinator service only has 1 method\r\n`def getUserFromAnyID[A &lt;: UUID](id: A): List[User]`\r\n\r\nand somehow match the generic `A` to ID to call appropriate database service. At a high level it would look like:\r\n\r\n```\r\ndef getUserFromAnyID[A &lt;: UUID](id: A): List[User] = {\r\n  // A is a list\r\n  A match {\r\n    case Nil =&gt; List.empty()\r\n    case someList =&gt;\r\n     // How to match the type of the object in someList?? It can be any of userId, employeeID, departmentID\r\n     // After matching, it will call the database service:\r\n     &lt;type of list object&gt; match {\r\n        case userID: UserID =&gt; databaseService.getUsersByUserID(&lt;pass list of userIds)\r\n        case employeeIds: EmployeeID =&gt; databaseService.getUsersByEmployeeIDs(&lt;pass list of employee IDs)\r\n       .\r\n       .\r\n       .\r\n     }  \r\n  }\r\n}\r\n\r\n```\r\n\r\nIs there an efficient pattern to achieve this?\r\n\r\n\r\n\r\n\r\n\r\n","title":"Scala Design Question - Unify 3 similar endpoints to retrieve from database","body":"<p>I'm designing a Scala service which has 3 endpoints which are very similar -\na. <code>getUserByUserID(userIds: List[UserID]): List[User]</code>\nb. <code>getUserByEmployeeID(employeeIDs: List[EmployeeID]): List[User]</code>\nc. <code>getUserByDepartmentID(departmentIDs: List[DepartmentID]): List[User]</code></p>\n<p>Think of User as a case class having many fields but 3 of them for the above endpoints are:</p>\n<pre><code>case class User(\n  userId: UserID,\n  employeeID: EmployeeID,\n  departmentID: DepartmentID,\n)\n</code></pre>\n<p>All these IDs are of type <code>java.util.UUID</code>.</p>\n<p>All 3 endpoints return the <code>User</code> object as a list where the appropriate IDs match.</p>\n<p>My concern is that there's a lot of repetitive work in this. Only difference is that the <code>WHERE</code> clause in the query changes to one of <code>userID</code>, <code>employeeID</code>, <code>departmentID</code>.</p>\n<p>I want to minimize this duplication. Is Scala generics a way to do that?</p>\n<p>I was thinking of creating a coordinator service that takes in any form of ID and returns the <code>List[User]</code> from it</p>\n<p>so something like</p>\n<p>endpoint1, endpoint2, endpoint3 -&gt; call CoordinatorService --&gt; call Database service</p>\n<p>Coordinator service only has 1 method\n<code>def getUserFromAnyID[A &lt;: UUID](id: A): List[User]</code></p>\n<p>and somehow match the generic <code>A</code> to ID to call appropriate database service. At a high level it would look like:</p>\n<pre><code>def getUserFromAnyID[A &lt;: UUID](id: A): List[User] = {\n  // A is a list\n  A match {\n    case Nil =&gt; List.empty()\n    case someList =&gt;\n     // How to match the type of the object in someList?? It can be any of userId, employeeID, departmentID\n     // After matching, it will call the database service:\n     &lt;type of list object&gt; match {\n        case userID: UserID =&gt; databaseService.getUsersByUserID(&lt;pass list of userIds)\n        case employeeIds: EmployeeID =&gt; databaseService.getUsersByEmployeeIDs(&lt;pass list of employee IDs)\n       .\n       .\n       .\n     }  \n  }\n}\n\n</code></pre>\n<p>Is there an efficient pattern to achieve this?</p>\n"},{"tags":["java","spring","soap","ws"],"answers":[{"tags":[],"owner":{"account_id":6369472,"reputation":517,"user_id":4942371,"display_name":"mareck_ste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672766918,"creation_date":1672766918,"answer_id":74996686,"question_id":74994482,"body_markdown":"After hours I managed to workaround this issue following wsdl definition and implemented custom exception classes wrapping the wsdl generated fault details:\r\n\r\n    @WebFault(name = &quot;getCFUSubscriberStateFaultBusiness&quot;, targetNamespace = &quot;example.system.ot.managepcccfu.v2.datatypes&quot;)\r\n    public class GetCFUSubscriberStateFaultBusinessMessage extends Exception {\r\n    \r\n        private GetCFUSubscriberStateFaultBusiness getCFUSubscriberStateFaultBusiness;\r\n    \r\n        public GetCFUSubscriberStateFaultBusinessMessage() {\r\n            super();\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultBusinessMessage(String message) {\r\n            super(message);\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultBusinessMessage(String message, java.lang.Throwable cause) {\r\n            super(message, cause);\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultBusinessMessage(String message, GetCFUSubscriberStateFaultBusiness getCFUSubscriberStateFaultBusiness) {\r\n            super(message);\r\n            this.getCFUSubscriberStateFaultBusiness = getCFUSubscriberStateFaultBusiness;\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultBusinessMessage(String message, GetCFUSubscriberStateFaultBusiness getCFUSubscriberStateFaultBusiness, java.lang.Throwable cause) {\r\n            super(message, cause);\r\n            this.getCFUSubscriberStateFaultBusiness = getCFUSubscriberStateFaultBusiness;\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultBusiness getFaultInfo() {\r\n            return this.getCFUSubscriberStateFaultBusiness;\r\n        }\r\n    }\r\n    \r\n    @WebFault(name = &quot;getCFUSubscriberStateFaultSystem&quot;, targetNamespace = &quot;example.system.ot.managepcccfu.v2.datatypes&quot;)\r\n    public class GetCFUSubscriberStateFaultSystemMessage extends Exception {\r\n    \r\n        private GetCFUSubscriberStateFaultSystem getCFUSubscriberStateFaultSystem;\r\n    \r\n        public GetCFUSubscriberStateFaultSystemMessage() {\r\n            super();\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultSystemMessage(String message) {\r\n            super(message);\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultSystemMessage(String message, java.lang.Throwable cause) {\r\n            super(message, cause);\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultSystemMessage(String message, GetCFUSubscriberStateFaultSystem getCFUSubscriberStateFaultSystem) {\r\n            super(message);\r\n            this.getCFUSubscriberStateFaultSystem = getCFUSubscriberStateFaultSystem;\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultSystemMessage(String message, GetCFUSubscriberStateFaultSystem getCFUSubscriberStateFaultSystem, java.lang.Throwable cause) {\r\n            super(message, cause);\r\n            this.getCFUSubscriberStateFaultSystem = getCFUSubscriberStateFaultSystem;\r\n        }\r\n    \r\n        public GetCFUSubscriberStateFaultSystem getFaultInfo() {\r\n            return this.getCFUSubscriberStateFaultSystem;\r\n        }\r\n    } \r\n\r\nI filled the received soap fault detail into exception placeholder upon SoapFaultClientException based on type of detail:\r\n\r\n    public class CFUSoapClient extends WebServiceGatewaySupport {\r\n            public GetCFUSubscriberStateResponse getCFUSubscriberStateResponse(GetCFUSubscriberState request) throws GetCFUSubscriberStateFaultBusinessMessage, IOException, GetCFUSubscriberStateFaultSystemMessage {\r\n                try {\r\n                    return (GetCFUSubscriberStateResponse) getWebServiceTemplate().marshalSendAndReceive(request);\r\n                } catch (SoapFaultClientException e) {\r\n                    final Iterator&lt;SoapFaultDetailElement&gt; detailEntries = e.getSoapFault().getFaultDetail().getDetailEntries();\r\n        \r\n                    if (detailEntries.hasNext()) {\r\n                        final SoapFaultDetailElement next = detailEntries.next();\r\n                        final Source source = next.getSource();\r\n        \r\n                        final Object faultDetail = getWebServiceTemplate().getUnmarshaller().unmarshal(source);\r\n                        if (faultDetail instanceof GetCFUSubscriberStateFaultBusiness) {\r\n                            throw new GetCFUSubscriberStateFaultBusinessMessage(e.getSoapFault().getFaultStringOrReason(), (GetCFUSubscriberStateFaultBusiness) faultDetail, e.getCause());\r\n                        } else if (faultDetail instanceof GetCFUSubscriberStateFaultSystem) {\r\n                            throw new GetCFUSubscriberStateFaultSystemMessage(e.getSoapFault().getFaultStringOrReason(), (GetCFUSubscriberStateFaultSystem) faultDetail, e.getCause());\r\n                        }\r\n                    }\r\n        \r\n                    throw new RuntimeException(&quot;Unexpected error&quot;, e);\r\n                }\r\n            }\r\n        }\r\n\r\nEventually, I marshalled the details in the resolver class:\r\n\r\n    @Component\r\n    public class Resolver extends AbstractEndpointExceptionResolver {\r\n        private final Jaxb2Marshaller marshaller;\r\n    \r\n        @Autowired\r\n        public Resolver(Jaxb2Marshaller marshaller) {\r\n            this.marshaller = marshaller;\r\n        }\r\n    \r\n        @Override\r\n        protected boolean resolveExceptionInternal(MessageContext messageContext, Object endpoint, Exception e) {\r\n            if (e instanceof GetCFUSubscriberStateFaultBusinessMessage) {\r\n                final GetCFUSubscriberStateFaultBusinessMessage getCFUSubscriberStateFaultBusinessMessage = (GetCFUSubscriberStateFaultBusinessMessage) e;\r\n                final GetCFUSubscriberStateFaultBusiness faultInfo = getCFUSubscriberStateFaultBusinessMessage.getFaultInfo();\r\n                final Result result = createFaultDetailResult(messageContext, getCFUSubscriberStateFaultBusinessMessage);\r\n    \r\n                marshaller.marshal(faultInfo, result);\r\n                return true;\r\n    \r\n            } else if (e instanceof GetCFUSubscriberStateFaultSystemMessage) {\r\n                final GetCFUSubscriberStateFaultSystemMessage getCFUSubscriberStateFaultSystemMessage = (GetCFUSubscriberStateFaultSystemMessage) e;\r\n                final GetCFUSubscriberStateFaultSystem faultInfo = getCFUSubscriberStateFaultSystemMessage.getFaultInfo();\r\n                final Result result = createFaultDetailResult(messageContext, getCFUSubscriberStateFaultSystemMessage);\r\n    \r\n                marshaller.marshal(faultInfo, result);\r\n                return true;\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    \r\n        private Result createFaultDetailResult(MessageContext messageContext, Exception exception) {\r\n            final SoapMessage response = (SoapMessage) messageContext.getResponse();\r\n            final SoapBody soapBody = response.getSoapBody();\r\n            final SoapFault soapFault = soapBody.addServerOrReceiverFault(exception.getMessage(), Locale.ENGLISH);\r\n            final SoapFaultDetail faultDetail = soapFault.addFaultDetail();\r\n    \r\n            return faultDetail.getResult();\r\n        }\r\n    }\r\n    ","title":"Spring ws SOAP endpoint responds with missing fault details","body":"<p>After hours I managed to workaround this issue following wsdl definition and implemented custom exception classes wrapping the wsdl generated fault details:</p>\n<pre><code>@WebFault(name = &quot;getCFUSubscriberStateFaultBusiness&quot;, targetNamespace = &quot;example.system.ot.managepcccfu.v2.datatypes&quot;)\npublic class GetCFUSubscriberStateFaultBusinessMessage extends Exception {\n\n    private GetCFUSubscriberStateFaultBusiness getCFUSubscriberStateFaultBusiness;\n\n    public GetCFUSubscriberStateFaultBusinessMessage() {\n        super();\n    }\n\n    public GetCFUSubscriberStateFaultBusinessMessage(String message) {\n        super(message);\n    }\n\n    public GetCFUSubscriberStateFaultBusinessMessage(String message, java.lang.Throwable cause) {\n        super(message, cause);\n    }\n\n    public GetCFUSubscriberStateFaultBusinessMessage(String message, GetCFUSubscriberStateFaultBusiness getCFUSubscriberStateFaultBusiness) {\n        super(message);\n        this.getCFUSubscriberStateFaultBusiness = getCFUSubscriberStateFaultBusiness;\n    }\n\n    public GetCFUSubscriberStateFaultBusinessMessage(String message, GetCFUSubscriberStateFaultBusiness getCFUSubscriberStateFaultBusiness, java.lang.Throwable cause) {\n        super(message, cause);\n        this.getCFUSubscriberStateFaultBusiness = getCFUSubscriberStateFaultBusiness;\n    }\n\n    public GetCFUSubscriberStateFaultBusiness getFaultInfo() {\n        return this.getCFUSubscriberStateFaultBusiness;\n    }\n}\n\n@WebFault(name = &quot;getCFUSubscriberStateFaultSystem&quot;, targetNamespace = &quot;example.system.ot.managepcccfu.v2.datatypes&quot;)\npublic class GetCFUSubscriberStateFaultSystemMessage extends Exception {\n\n    private GetCFUSubscriberStateFaultSystem getCFUSubscriberStateFaultSystem;\n\n    public GetCFUSubscriberStateFaultSystemMessage() {\n        super();\n    }\n\n    public GetCFUSubscriberStateFaultSystemMessage(String message) {\n        super(message);\n    }\n\n    public GetCFUSubscriberStateFaultSystemMessage(String message, java.lang.Throwable cause) {\n        super(message, cause);\n    }\n\n    public GetCFUSubscriberStateFaultSystemMessage(String message, GetCFUSubscriberStateFaultSystem getCFUSubscriberStateFaultSystem) {\n        super(message);\n        this.getCFUSubscriberStateFaultSystem = getCFUSubscriberStateFaultSystem;\n    }\n\n    public GetCFUSubscriberStateFaultSystemMessage(String message, GetCFUSubscriberStateFaultSystem getCFUSubscriberStateFaultSystem, java.lang.Throwable cause) {\n        super(message, cause);\n        this.getCFUSubscriberStateFaultSystem = getCFUSubscriberStateFaultSystem;\n    }\n\n    public GetCFUSubscriberStateFaultSystem getFaultInfo() {\n        return this.getCFUSubscriberStateFaultSystem;\n    }\n} \n</code></pre>\n<p>I filled the received soap fault detail into exception placeholder upon SoapFaultClientException based on type of detail:</p>\n<pre><code>public class CFUSoapClient extends WebServiceGatewaySupport {\n        public GetCFUSubscriberStateResponse getCFUSubscriberStateResponse(GetCFUSubscriberState request) throws GetCFUSubscriberStateFaultBusinessMessage, IOException, GetCFUSubscriberStateFaultSystemMessage {\n            try {\n                return (GetCFUSubscriberStateResponse) getWebServiceTemplate().marshalSendAndReceive(request);\n            } catch (SoapFaultClientException e) {\n                final Iterator&lt;SoapFaultDetailElement&gt; detailEntries = e.getSoapFault().getFaultDetail().getDetailEntries();\n    \n                if (detailEntries.hasNext()) {\n                    final SoapFaultDetailElement next = detailEntries.next();\n                    final Source source = next.getSource();\n    \n                    final Object faultDetail = getWebServiceTemplate().getUnmarshaller().unmarshal(source);\n                    if (faultDetail instanceof GetCFUSubscriberStateFaultBusiness) {\n                        throw new GetCFUSubscriberStateFaultBusinessMessage(e.getSoapFault().getFaultStringOrReason(), (GetCFUSubscriberStateFaultBusiness) faultDetail, e.getCause());\n                    } else if (faultDetail instanceof GetCFUSubscriberStateFaultSystem) {\n                        throw new GetCFUSubscriberStateFaultSystemMessage(e.getSoapFault().getFaultStringOrReason(), (GetCFUSubscriberStateFaultSystem) faultDetail, e.getCause());\n                    }\n                }\n    \n                throw new RuntimeException(&quot;Unexpected error&quot;, e);\n            }\n        }\n    }\n</code></pre>\n<p>Eventually, I marshalled the details in the resolver class:</p>\n<pre><code>@Component\npublic class Resolver extends AbstractEndpointExceptionResolver {\n    private final Jaxb2Marshaller marshaller;\n\n    @Autowired\n    public Resolver(Jaxb2Marshaller marshaller) {\n        this.marshaller = marshaller;\n    }\n\n    @Override\n    protected boolean resolveExceptionInternal(MessageContext messageContext, Object endpoint, Exception e) {\n        if (e instanceof GetCFUSubscriberStateFaultBusinessMessage) {\n            final GetCFUSubscriberStateFaultBusinessMessage getCFUSubscriberStateFaultBusinessMessage = (GetCFUSubscriberStateFaultBusinessMessage) e;\n            final GetCFUSubscriberStateFaultBusiness faultInfo = getCFUSubscriberStateFaultBusinessMessage.getFaultInfo();\n            final Result result = createFaultDetailResult(messageContext, getCFUSubscriberStateFaultBusinessMessage);\n\n            marshaller.marshal(faultInfo, result);\n            return true;\n\n        } else if (e instanceof GetCFUSubscriberStateFaultSystemMessage) {\n            final GetCFUSubscriberStateFaultSystemMessage getCFUSubscriberStateFaultSystemMessage = (GetCFUSubscriberStateFaultSystemMessage) e;\n            final GetCFUSubscriberStateFaultSystem faultInfo = getCFUSubscriberStateFaultSystemMessage.getFaultInfo();\n            final Result result = createFaultDetailResult(messageContext, getCFUSubscriberStateFaultSystemMessage);\n\n            marshaller.marshal(faultInfo, result);\n            return true;\n        }\n\n        return false;\n    }\n\n    private Result createFaultDetailResult(MessageContext messageContext, Exception exception) {\n        final SoapMessage response = (SoapMessage) messageContext.getResponse();\n        final SoapBody soapBody = response.getSoapBody();\n        final SoapFault soapFault = soapBody.addServerOrReceiverFault(exception.getMessage(), Locale.ENGLISH);\n        final SoapFaultDetail faultDetail = soapFault.addFaultDetail();\n\n        return faultDetail.getResult();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6369472,"reputation":517,"user_id":4942371,"display_name":"mareck_ste"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":508,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74996686,"answer_count":1,"score":0,"last_activity_date":1672766918,"creation_date":1672755004,"question_id":74994482,"body_markdown":"I have soap-to-soap proxy server in spring using `org.springframework.ws.*` Both sides have identical wsdls. \r\n\r\nI am able to pass the success response from external service to proxy consumer however there&#39;s a problem when fault message from external service gets returned. \r\n\r\n***The problem is my proxy server removes soap detail from the original response*** (I have no idea why). My goal is to pass the response from external service just as it is to proxy client without shortening. Anyone could help how to avoid fault detail being deleted ? Thank you in advance.\r\n\r\nExternal Server response:\r\n\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n\t&lt;soap:Body&gt;\r\n\t\t&lt;soap:Fault&gt;\r\n\t\t\t&lt;faultcode&gt;soap:Server&lt;/faultcode&gt;\r\n\t\t\t&lt;faultstring&gt;Fault occurred while processing.&lt;/faultstring&gt;\r\n\t\t\t&lt;detail&gt;\r\n\t\t\t\t&lt;ns2:getCFUSubscriberStateFaultBusiness xmlns=&quot;example.system.messaging.common.v1.datatypes&quot; xmlns:ns2=&quot;example.system.ot.managepcccfu.v2.datatypes&quot;&gt;\r\n\t\t\t\t\t&lt;ns2:messageContext&gt;\r\n\t\t\t\t\t\t&lt;requestId&gt;273140800423344000&lt;/requestId&gt;\r\n\t\t\t\t\t\t&lt;transactionId&gt;8200&lt;/transactionId&gt;\r\n\t\t\t\t\t\t&lt;timeLeft&gt;10000&lt;/timeLeft&gt;\r\n\t\t\t\t\t\t&lt;timestamp&gt;2022-09-30T14:08:00&lt;/timestamp&gt;\r\n\t\t\t\t\t\t&lt;user&gt;x_turan&lt;/user&gt;\r\n\t\t\t\t\t\t&lt;consumingComponent&gt;urn:example.business.intr:SELFCARE3.&lt;/consumingComponent&gt;\r\n\t\t\t\t\t\t&lt;providingService&gt;urn:example.system.ot.managepccprovisioning.v1.service:ManagePccProvisioning&lt;/providingService&gt;\r\n\t\t\t\t\t\t&lt;providingOperation&gt;modifycontroffer&lt;/providingOperation&gt;\r\n\t\t\t\t\t&lt;/ns2:messageContext&gt;\r\n\t\t\t\t\t&lt;ns2:messageDataBusinessException&gt;\r\n\t\t\t\t\t\t&lt;errorCode&gt;3001&lt;/errorCode&gt;\r\n\t\t\t\t\t\t&lt;errorMessage&gt;ESE Problem&lt;/errorMessage&gt;\r\n\t\t\t\t\t&lt;/ns2:messageDataBusinessException&gt;\r\n\t\t\t\t&lt;/ns2:getCFUSubscriberStateFaultBusiness&gt;\r\n\t\t\t&lt;/detail&gt;\r\n\t\t&lt;/soap:Fault&gt;\r\n\t&lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;\r\n\r\nProxy Client Receives:\r\n\r\n    &lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n       &lt;SOAP-ENV:Header/&gt;\r\n       &lt;SOAP-ENV:Body&gt;\r\n          &lt;SOAP-ENV:Fault&gt;\r\n             &lt;faultcode&gt;SOAP-ENV:Server&lt;/faultcode&gt;\r\n             &lt;faultstring xml:lang=&quot;en&quot;&gt;Fault occurred while processing.&lt;/faultstring&gt;\r\n          &lt;/SOAP-ENV:Fault&gt;\r\n       &lt;/SOAP-ENV:Body&gt;\r\n    &lt;/SOAP-ENV:Envelope&gt;\r\n\r\n Endpoint:\r\n\r\n    @Endpoint\r\n    public class ServiceEndpoint {\r\n        public static final String NAMESPACE_URI=&quot;example.system.ot.managepcccfu.v2.datatypes&quot;;\r\n    \r\n        @Autowired\r\n        CFUSoapClient soapClient;\r\n    \r\n        @PayloadRoot(namespace = NAMESPACE_URI, localPart = &quot;getCFUSubscriberState&quot; )\r\n        @ResponsePayload\r\n        public GetCFUSubscriberStateResponse getCFUSubscriberState(@RequestPayload GetCFUSubscriberState request) throws GetCFUSubscriberStateFaultBusinessMessage, GetCFUSubscriberStateFaultSystemMessage {\r\n            final GetCFUSubscriberStateResponse response = soapClient.getCFUSubscriberStateResponse(request);\r\n            return response;\r\n        }\r\n    }\r\n\r\nSoap Client:\r\n\r\n    public class CFUSoapClient extends WebServiceGatewaySupport {\r\n        public GetCFUSubscriberStateResponse getCFUSubscriberStateResponse(GetCFUSubscriberState request) throws GetCFUSubscriberStateFaultBusinessMessage {\r\n            Object response = getWebServiceTemplate().marshalSendAndReceive(request);\r\n            return (GetCFUSubscriberStateResponse) response;\r\n        }\r\n    }\r\n\r\nConfig:\r\n\r\n    @Configuration\r\n    @EnableWs\r\n    public class Config extends WsConfigurerAdapter {\r\n        @Bean\r\n        public ServletRegistrationBean messageDispatcherServlet(ApplicationContext applicationContext) {\r\n            MessageDispatcherServlet servlet = new MessageDispatcherServlet();\r\n            servlet.setApplicationContext(applicationContext);\r\n            return new ServletRegistrationBean(servlet, &quot;/ws/CFU/*&quot;);\r\n        }\r\n    \r\n        @Bean(name=&quot;CFU&quot;)\r\n        public Wsdl11Definition defaultWsdl11Definition() {\r\n            SimpleWsdl11Definition wsdl11Definition = new SimpleWsdl11Definition();\r\n            wsdl11Definition.setWsdl(new ClassPathResource(&quot;/wsdl/CFU.wsdl&quot;));\r\n            return wsdl11Definition;\r\n        }\r\n    \r\n        @Bean(name = &quot;cfuDatatypesV2&quot;)\r\n        public XsdSchema cfuDatatypesV2() {\r\n            return new SimpleXsdSchema(\r\n                    new ClassPathResource(&quot;wsdl/cfuDatatypesV2.xsd&quot;));\r\n        }\r\n    \r\n        @Bean(name = &quot;common&quot;)\r\n        public XsdSchema common() {\r\n            return new SimpleXsdSchema(\r\n                    new ClassPathResource(&quot;wsdl/common.xsd&quot;));\r\n        }\r\n    \r\n        @Bean\r\n        public Jaxb2Marshaller marshaller() {\r\n            Jaxb2Marshaller jaxb2Marshaller = new Jaxb2Marshaller();\r\n            jaxb2Marshaller.setContextPath(&quot;com.ot.cfu&quot;);\r\n            return jaxb2Marshaller;\r\n        }\r\n        @Bean\r\n        public CFUSoapClient soapClient() {\r\n            CFUSoapClient client = new CFUSoapClient();\r\n            client.setDefaultUri(&quot;http://localhost:41420/CFU&quot;);\r\n            client.setMarshaller(marshaller());\r\n            client.setUnmarshaller(marshaller());\r\n    //        ClientInterceptor [] interceptors = new ClientInterceptor[]{new SoapClientInterceptor()};\r\n    //        client.setInterceptors(interceptors);\r\n            return client;\r\n        }\r\n    }","title":"Spring ws SOAP endpoint responds with missing fault details","body":"<p>I have soap-to-soap proxy server in spring using <code>org.springframework.ws.*</code> Both sides have identical wsdls.</p>\n<p>I am able to pass the success response from external service to proxy consumer however there's a problem when fault message from external service gets returned.</p>\n<p><em><strong>The problem is my proxy server removes soap detail from the original response</strong></em> (I have no idea why). My goal is to pass the response from external service just as it is to proxy client without shortening. Anyone could help how to avoid fault detail being deleted ? Thank you in advance.</p>\n<p>External Server response:</p>\n<pre><code>&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n&lt;soap:Body&gt;\n    &lt;soap:Fault&gt;\n        &lt;faultcode&gt;soap:Server&lt;/faultcode&gt;\n        &lt;faultstring&gt;Fault occurred while processing.&lt;/faultstring&gt;\n        &lt;detail&gt;\n            &lt;ns2:getCFUSubscriberStateFaultBusiness xmlns=&quot;example.system.messaging.common.v1.datatypes&quot; xmlns:ns2=&quot;example.system.ot.managepcccfu.v2.datatypes&quot;&gt;\n                &lt;ns2:messageContext&gt;\n                    &lt;requestId&gt;273140800423344000&lt;/requestId&gt;\n                    &lt;transactionId&gt;8200&lt;/transactionId&gt;\n                    &lt;timeLeft&gt;10000&lt;/timeLeft&gt;\n                    &lt;timestamp&gt;2022-09-30T14:08:00&lt;/timestamp&gt;\n                    &lt;user&gt;x_turan&lt;/user&gt;\n                    &lt;consumingComponent&gt;urn:example.business.intr:SELFCARE3.&lt;/consumingComponent&gt;\n                    &lt;providingService&gt;urn:example.system.ot.managepccprovisioning.v1.service:ManagePccProvisioning&lt;/providingService&gt;\n                    &lt;providingOperation&gt;modifycontroffer&lt;/providingOperation&gt;\n                &lt;/ns2:messageContext&gt;\n                &lt;ns2:messageDataBusinessException&gt;\n                    &lt;errorCode&gt;3001&lt;/errorCode&gt;\n                    &lt;errorMessage&gt;ESE Problem&lt;/errorMessage&gt;\n                &lt;/ns2:messageDataBusinessException&gt;\n            &lt;/ns2:getCFUSubscriberStateFaultBusiness&gt;\n        &lt;/detail&gt;\n    &lt;/soap:Fault&gt;\n&lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<p>Proxy Client Receives:</p>\n<pre><code>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n   &lt;SOAP-ENV:Header/&gt;\n   &lt;SOAP-ENV:Body&gt;\n      &lt;SOAP-ENV:Fault&gt;\n         &lt;faultcode&gt;SOAP-ENV:Server&lt;/faultcode&gt;\n         &lt;faultstring xml:lang=&quot;en&quot;&gt;Fault occurred while processing.&lt;/faultstring&gt;\n      &lt;/SOAP-ENV:Fault&gt;\n   &lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n<p>Endpoint:</p>\n<pre><code>@Endpoint\npublic class ServiceEndpoint {\n    public static final String NAMESPACE_URI=&quot;example.system.ot.managepcccfu.v2.datatypes&quot;;\n\n    @Autowired\n    CFUSoapClient soapClient;\n\n    @PayloadRoot(namespace = NAMESPACE_URI, localPart = &quot;getCFUSubscriberState&quot; )\n    @ResponsePayload\n    public GetCFUSubscriberStateResponse getCFUSubscriberState(@RequestPayload GetCFUSubscriberState request) throws GetCFUSubscriberStateFaultBusinessMessage, GetCFUSubscriberStateFaultSystemMessage {\n        final GetCFUSubscriberStateResponse response = soapClient.getCFUSubscriberStateResponse(request);\n        return response;\n    }\n}\n</code></pre>\n<p>Soap Client:</p>\n<pre><code>public class CFUSoapClient extends WebServiceGatewaySupport {\n    public GetCFUSubscriberStateResponse getCFUSubscriberStateResponse(GetCFUSubscriberState request) throws GetCFUSubscriberStateFaultBusinessMessage {\n        Object response = getWebServiceTemplate().marshalSendAndReceive(request);\n        return (GetCFUSubscriberStateResponse) response;\n    }\n}\n</code></pre>\n<p>Config:</p>\n<pre><code>@Configuration\n@EnableWs\npublic class Config extends WsConfigurerAdapter {\n    @Bean\n    public ServletRegistrationBean messageDispatcherServlet(ApplicationContext applicationContext) {\n        MessageDispatcherServlet servlet = new MessageDispatcherServlet();\n        servlet.setApplicationContext(applicationContext);\n        return new ServletRegistrationBean(servlet, &quot;/ws/CFU/*&quot;);\n    }\n\n    @Bean(name=&quot;CFU&quot;)\n    public Wsdl11Definition defaultWsdl11Definition() {\n        SimpleWsdl11Definition wsdl11Definition = new SimpleWsdl11Definition();\n        wsdl11Definition.setWsdl(new ClassPathResource(&quot;/wsdl/CFU.wsdl&quot;));\n        return wsdl11Definition;\n    }\n\n    @Bean(name = &quot;cfuDatatypesV2&quot;)\n    public XsdSchema cfuDatatypesV2() {\n        return new SimpleXsdSchema(\n                new ClassPathResource(&quot;wsdl/cfuDatatypesV2.xsd&quot;));\n    }\n\n    @Bean(name = &quot;common&quot;)\n    public XsdSchema common() {\n        return new SimpleXsdSchema(\n                new ClassPathResource(&quot;wsdl/common.xsd&quot;));\n    }\n\n    @Bean\n    public Jaxb2Marshaller marshaller() {\n        Jaxb2Marshaller jaxb2Marshaller = new Jaxb2Marshaller();\n        jaxb2Marshaller.setContextPath(&quot;com.ot.cfu&quot;);\n        return jaxb2Marshaller;\n    }\n    @Bean\n    public CFUSoapClient soapClient() {\n        CFUSoapClient client = new CFUSoapClient();\n        client.setDefaultUri(&quot;http://localhost:41420/CFU&quot;);\n        client.setMarshaller(marshaller());\n        client.setUnmarshaller(marshaller());\n//        ClientInterceptor [] interceptors = new ClientInterceptor[]{new SoapClientInterceptor()};\n//        client.setInterceptors(interceptors);\n        return client;\n    }\n}\n</code></pre>\n"},{"tags":["java","c#","audio","microphone","voice"],"owner":{"account_id":20510463,"reputation":11,"user_id":15052363,"display_name":"Finn Lukas B."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672766772,"creation_date":1672766772,"question_id":74996661,"body_markdown":"I&#39;m actually trying to make my own VoiceChat for game. So I decided to try first to get audio data from microphone and play it directly to the speakers.\r\nI&#39;ve done it in Java and C# but in both languages, in both after starting the record there is a dropout after about 0.5 seconds for about 0.25 seconds, after that dropout the audio works normally.\r\n\r\nI&#39;m using this code in C#, have I done something wrong?\r\n\r\n\r\n```\r\nusing System;\r\nusing NAudio.Wave;\r\n\r\nnamespace VoiceChat\r\n{\r\n    internal class Program\r\n    {\r\n        public static void Main(string[] args)\r\n        {\r\n            var mic = false;\r\n            \r\n            var recorder = new WaveInEvent\r\n            {\r\n                WaveFormat = new WaveFormat(96000, 2),\r\n                BufferMilliseconds = 10,\r\n                NumberOfBuffers = 10\r\n            };\r\n            var sound = new BufferedWaveProvider(recorder.WaveFormat);\r\n            var playback = new WaveOutEvent();\r\n\r\n            recorder.StartRecording();\r\n            playback.Init(sound);\r\n            playback.Play();\r\n            \r\n            recorder.DataAvailable += (sender, eventArgs) =&gt;\r\n            {\r\n                if (mic)\r\n                {\r\n                    sound.AddSamples(eventArgs.Buffer, 0, eventArgs.BytesRecorded);\r\n                }\r\n            };\r\n\r\n            while (true)\r\n            {\r\n                var key = Console.ReadKey();\r\n                if (key.Key.Equals(ConsoleKey.A))\r\n                {\r\n                    mic = !mic;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n(I&#39;ve added a switch to it and everytime I turn on the audio with this switch the same as described happens)\r\n\r\nThanks!","title":"Short dropouts while playing audio from microphone","body":"<p>I'm actually trying to make my own VoiceChat for game. So I decided to try first to get audio data from microphone and play it directly to the speakers.\nI've done it in Java and C# but in both languages, in both after starting the record there is a dropout after about 0.5 seconds for about 0.25 seconds, after that dropout the audio works normally.</p>\n<p>I'm using this code in C#, have I done something wrong?</p>\n<pre><code>using System;\nusing NAudio.Wave;\n\nnamespace VoiceChat\n{\n    internal class Program\n    {\n        public static void Main(string[] args)\n        {\n            var mic = false;\n            \n            var recorder = new WaveInEvent\n            {\n                WaveFormat = new WaveFormat(96000, 2),\n                BufferMilliseconds = 10,\n                NumberOfBuffers = 10\n            };\n            var sound = new BufferedWaveProvider(recorder.WaveFormat);\n            var playback = new WaveOutEvent();\n\n            recorder.StartRecording();\n            playback.Init(sound);\n            playback.Play();\n            \n            recorder.DataAvailable += (sender, eventArgs) =&gt;\n            {\n                if (mic)\n                {\n                    sound.AddSamples(eventArgs.Buffer, 0, eventArgs.BytesRecorded);\n                }\n            };\n\n            while (true)\n            {\n                var key = Console.ReadKey();\n                if (key.Key.Equals(ConsoleKey.A))\n                {\n                    mic = !mic;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>(I've added a switch to it and everytime I turn on the audio with this switch the same as described happens)</p>\n<p>Thanks!</p>\n"},{"tags":["java","logging","reflection","properties-file"],"comments":[{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":0,"creation_date":1672767016,"post_id":74996657,"comment_id":132346649,"body_markdown":"&quot;I do not like my code.&quot; I don&#39;t blame you.  That is tough code to maintain in the long run.  When you have a moment, could you give a little background on your problem and what you&#39;re trying to solve with your solution?  It might give us a better chance of helping you out.","body":"&quot;I do not like my code.&quot; I don&#39;t blame you.  That is tough code to maintain in the long run.  When you have a moment, could you give a little background on your problem and what you&#39;re trying to solve with your solution?  It might give us a better chance of helping you out."},{"owner":{"account_id":22805628,"reputation":13,"user_id":16957716,"display_name":"Stefano"},"score":0,"creation_date":1672824950,"post_id":74996657,"comment_id":132358203,"body_markdown":"I simply have the first five lines of the above code about reading a properties file for logging purpose and I was wondering: if I were to replace the `Handler` type in the properties file with my own `Handler` but which has only one constructor with parameters, the following code would no longer make sense `logger.addHandler((Handler)Class.forName(handlerClass).getDeclaredConstructor().newInstance());`. So if i change something in the properties files I have to fix my code. That&#39;s not the purpose of using reflection.","body":"I simply have the first five lines of the above code about reading a properties file for logging purpose and I was wondering: if I were to replace the <code>Handler</code> type in the properties file with my own <code>Handler</code> but which has only one constructor with parameters, the following code would no longer make sense <code>logger.addHandler((Handler)Class.forName(handlerClass).getDe&zwnj;&#8203;claredConstructor().&zwnj;&#8203;newInstance());</code>. So if i change something in the properties files I have to fix my code. That&#39;s not the purpose of using reflection."},{"owner":{"account_id":22805628,"reputation":13,"user_id":16957716,"display_name":"Stefano"},"score":0,"creation_date":1672913158,"post_id":74996657,"comment_id":132381608,"body_markdown":"I do not know what to do. Using reflection seems not the correct way if I can have different classes (Handlers in my case) with different constructors to be read from the properties file. But if I do not use reflection I have to directly create the classes after reading the class name from the properties file. And if I can have different classes to be read, I do not find any other way to do it without my hashmap solution. I am stuck.","body":"I do not know what to do. Using reflection seems not the correct way if I can have different classes (Handlers in my case) with different constructors to be read from the properties file. But if I do not use reflection I have to directly create the classes after reading the class name from the properties file. And if I can have different classes to be read, I do not find any other way to do it without my hashmap solution. I am stuck."},{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":0,"creation_date":1672932775,"post_id":74996657,"comment_id":132388660,"body_markdown":"logging in java is unfortunately a difficult thing to setup properly.  It looks like you&#39;re using Java&#39;s Logging framework.  Generally speaking you do not have to programmatically configure your logging at all.  You should just be able to read a configuration file when you start your application up via VM Parameters.  In the case of Java Logging the file is in properties file style, but you don&#39;t have to read it yourself as a properties file.  This is common across all the well known Java logging frameworks: SLF4J, Logback, Apache Commons, Log4J2.","body":"logging in java is unfortunately a difficult thing to setup properly.  It looks like you&#39;re using Java&#39;s Logging framework.  Generally speaking you do not have to programmatically configure your logging at all.  You should just be able to read a configuration file when you start your application up via VM Parameters.  In the case of Java Logging the file is in properties file style, but you don&#39;t have to read it yourself as a properties file.  This is common across all the well known Java logging frameworks: SLF4J, Logback, Apache Commons, Log4J2."},{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":0,"creation_date":1672933073,"post_id":74996657,"comment_id":132388793,"body_markdown":"When you have a moment, I would urge you to read [Introduction to Java Logging](https://www.baeldung.com/java-logging-intro) and try setting up your logging based on one of the methods based in that article.","body":"When you have a moment, I would urge you to read <a href=\"https://www.baeldung.com/java-logging-intro\" rel=\"nofollow noreferrer\">Introduction to Java Logging</a> and try setting up your logging based on one of the methods based in that article."},{"owner":{"account_id":22805628,"reputation":13,"user_id":16957716,"display_name":"Stefano"},"score":0,"creation_date":1673003870,"post_id":74996657,"comment_id":132405149,"body_markdown":"I read it. But my problem reagards how to correctly read name classes and build these classes. it doesn&#39;t necessarily have to be a `Logger`. Lets say I want to create a `JComponent`, in my properties file I will have a line like &quot;jComponentClassName=jComponentClassPath&quot; but &quot;jComponentClassPath&quot; can be every `JComponent`, like a `JDialog` or a `JPanel`. So if want to create a `JDialog` using the constructor with `Frame` and `String` as parameters my code cannot have a line like this `logger.addHandler((Handler)Class.forName(handlerClass).getDeclaredConstructor().newInstance());`. [continue]","body":"I read it. But my problem reagards how to correctly read name classes and build these classes. it doesn&#39;t necessarily have to be a <code>Logger</code>. Lets say I want to create a <code>JComponent</code>, in my properties file I will have a line like &quot;jComponentClassName=jComponentClassPath&quot; but &quot;jComponentClassPath&quot; can be every <code>JComponent</code>, like a <code>JDialog</code> or a <code>JPanel</code>. So if want to create a <code>JDialog</code> using the constructor with <code>Frame</code> and <code>String</code> as parameters my code cannot have a line like this <code>logger.addHandler((Handler)Class.forName(handlerClass).getDe&zwnj;&#8203;claredConstructor().&zwnj;&#8203;newInstance());</code>. [continue]"},{"owner":{"account_id":22805628,"reputation":13,"user_id":16957716,"display_name":"Stefano"},"score":0,"creation_date":1673003930,"post_id":74996657,"comment_id":132405174,"body_markdown":"[continue] But if i write this code `logger.addHandler((Handler)Class.forName(handlerClass).getDeclaredConstructor(Frame.class, String.class).newInstance(frame, str));` and suddenly i change the line in properties file so that not a `JDialog` but a `JPanel` must be created, the line of code above is no good. I do not know if I made my self clear. I want a correct way to read from properties file, but reflection does not seems the correct way.","body":"[continue] But if i write this code <code>logger.addHandler((Handler)Class.forName(handlerClass).getDe&zwnj;&#8203;claredConstructor(Fr&zwnj;&#8203;ame.class, String.class).newInstance(frame, str));</code> and suddenly i change the line in properties file so that not a <code>JDialog</code> but a <code>JPanel</code> must be created, the line of code above is no good. I do not know if I made my self clear. I want a correct way to read from properties file, but reflection does not seems the correct way."},{"owner":{"account_id":22805628,"reputation":13,"user_id":16957716,"display_name":"Stefano"},"score":0,"creation_date":1673004465,"post_id":74996657,"comment_id":132405329,"body_markdown":"I forgot to edit the code to make sense with JComponents. My code will be like this: `JComponent jc = (JComponent)Class.forName(jComponentClassName).getDeclaredConstructor(Frame.class, String.class).newInstance(frame, str);`","body":"I forgot to edit the code to make sense with JComponents. My code will be like this: <code>JComponent jc = (JComponent)Class.forName(jComponentClassName).getDeclaredCo&zwnj;&#8203;nstructor(Frame.clas&zwnj;&#8203;s, String.class).newInstance(frame, str);</code>"},{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":0,"creation_date":1673020871,"post_id":74996657,"comment_id":132410477,"body_markdown":"Your original post was about logging and really didn&#39;t indicate that you wanted to build all your objects via properties files.  Basically what you&#39;re trying to build is a Dependency Injection Framework (via properties files).  Which, is difficult.  Perhaps you would use one that is already built?  [Spring Dependency Injection](https://www.baeldung.com/spring-dependency-injection).  What you&#39;re trying to do is terribly difficult.  While your goal is laudably I would urge you to lean on already existing frameworks for that type of coding.","body":"Your original post was about logging and really didn&#39;t indicate that you wanted to build all your objects via properties files.  Basically what you&#39;re trying to build is a Dependency Injection Framework (via properties files).  Which, is difficult.  Perhaps you would use one that is already built?  <a href=\"https://www.baeldung.com/spring-dependency-injection\" rel=\"nofollow noreferrer\">Spring Dependency Injection</a>.  What you&#39;re trying to do is terribly difficult.  While your goal is laudably I would urge you to lean on already existing frameworks for that type of coding."},{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":0,"creation_date":1673020925,"post_id":74996657,"comment_id":132410503,"body_markdown":"Specifically I would recommend looking into Spring&#39;s Dependency Injection via XML.","body":"Specifically I would recommend looking into Spring&#39;s Dependency Injection via XML."},{"owner":{"account_id":22805628,"reputation":13,"user_id":16957716,"display_name":"Stefano"},"score":1,"creation_date":1673084238,"post_id":74996657,"comment_id":132421504,"body_markdown":"Thank you for your patience. Now I undertand a lot. Again, thank you.","body":"Thank you for your patience. Now I undertand a lot. Again, thank you."}],"owner":{"account_id":22805628,"reputation":13,"user_id":16957716,"display_name":"Stefano"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672766743,"creation_date":1672766743,"question_id":74996657,"body_markdown":"I am trying to use a properties file, named logging.properties, to instantiate an `Handler` while using `java.util.logging` libraries. In the logging.properties file i have the line &quot;handlers=java.util.logging.FileHandler&quot;. So my code is like this:\r\n    \r\n    Logger logger = Logger.getLogger(ErrorLogger.class.getName());\t\r\n    Properties prop = new Properties();\r\n    prop.load(new FileInputStream(&quot;C:\\\\Users\\\\user\\\\...\\\\logging.properties&quot;));\r\n    String handlerClass = prop.getProperty(&quot;handlers&quot;);\r\n    logger.addHandler((Handler)Class.forName(handlerClass).getDeclaredConstructor().newInstance());\r\n\r\n`FileHandler` has a no-parameters constructor, but what happens if i change the properties file with some other handlers which classes does not have a no-parameters constructors? To me it seems that the reflection becomes useless. So i changed the code like this:\r\n\r\n    HashMap&lt;String, Callable&lt;Handler&gt;&gt; hm = new HashMap&lt;&gt;();\r\n    String firstClass = &quot;FileHandler&quot;;\r\n    Callable&lt;Handler&gt; firstCall = () -&gt; { return new FileHandler(&quot;C:\\\\Users\\\\sgate\\\\OneDrive\\\\Programmazione\\\\PetriNetsStudio\\\\log.log&quot;, true);\r\n    };\r\n    hm.put(firstClass, firstCall);\r\n    Logger logger = Logger.getLogger(ErrorLogger.class.getName());\r\n    Properties prop = new Properties();\r\n    prop.load(new FileInputStream(&quot;C:\\\\Users\\\\user\\\\...\\\\logging.properties&quot;));\r\n    String handlerClass = prop.getProperty(&quot;handlers&quot;);\r\n    Handler handler = hm.get(handlerClass).call();\r\n    logger.addHandler(handler);\r\n\r\nwith the properties file containing the line &quot;handlers=FileHandler&quot;. So if the `Handler` change in the properties files i need to add to the `HashMap` a new `String` and a new `Callable`. Is this a good way to read properties from a properties file that can have the &quot;handlers&quot; line changed with other classes with parameters and no-parameters constructors? I do not like my code.\r\n","title":"How to use Reflection when reading properties file","body":"<p>I am trying to use a properties file, named logging.properties, to instantiate an <code>Handler</code> while using <code>java.util.logging</code> libraries. In the logging.properties file i have the line &quot;handlers=java.util.logging.FileHandler&quot;. So my code is like this:</p>\n<pre><code>Logger logger = Logger.getLogger(ErrorLogger.class.getName());  \nProperties prop = new Properties();\nprop.load(new FileInputStream(&quot;C:\\\\Users\\\\user\\\\...\\\\logging.properties&quot;));\nString handlerClass = prop.getProperty(&quot;handlers&quot;);\nlogger.addHandler((Handler)Class.forName(handlerClass).getDeclaredConstructor().newInstance());\n</code></pre>\n<p><code>FileHandler</code> has a no-parameters constructor, but what happens if i change the properties file with some other handlers which classes does not have a no-parameters constructors? To me it seems that the reflection becomes useless. So i changed the code like this:</p>\n<pre><code>HashMap&lt;String, Callable&lt;Handler&gt;&gt; hm = new HashMap&lt;&gt;();\nString firstClass = &quot;FileHandler&quot;;\nCallable&lt;Handler&gt; firstCall = () -&gt; { return new FileHandler(&quot;C:\\\\Users\\\\sgate\\\\OneDrive\\\\Programmazione\\\\PetriNetsStudio\\\\log.log&quot;, true);\n};\nhm.put(firstClass, firstCall);\nLogger logger = Logger.getLogger(ErrorLogger.class.getName());\nProperties prop = new Properties();\nprop.load(new FileInputStream(&quot;C:\\\\Users\\\\user\\\\...\\\\logging.properties&quot;));\nString handlerClass = prop.getProperty(&quot;handlers&quot;);\nHandler handler = hm.get(handlerClass).call();\nlogger.addHandler(handler);\n</code></pre>\n<p>with the properties file containing the line &quot;handlers=FileHandler&quot;. So if the <code>Handler</code> change in the properties files i need to add to the <code>HashMap</code> a new <code>String</code> and a new <code>Callable</code>. Is this a good way to read properties from a properties file that can have the &quot;handlers&quot; line changed with other classes with parameters and no-parameters constructors? I do not like my code.</p>\n"},{"tags":["java","docusignapi"],"answers":[{"tags":[],"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672766582,"creation_date":1672766582,"answer_id":74996620,"question_id":74990446,"body_markdown":"My guess is that the issue is with the private key bytes.\r\nNote the simple code to read it from file:\r\n\r\n     byte[] privateKeyBytes = Files.readAllBytes(Paths.get(prop.getProperty(&quot;rsaKeyFile&quot;)));\r\n\r\nYou did mention that JWT code you downloaded worked, so I suggest you use that first and modify it for your needs and each modification - test to ensure it didn&#39;t break it.\r\n\r\nAlso, please confirm `private.key` was not modified in any way from the original that was downloaded for you.","title":"Rewrite Docusign methods in Springboot raised javax.ws.rs.ProcessingException","body":"<p>My guess is that the issue is with the private key bytes.\nNote the simple code to read it from file:</p>\n<pre><code> byte[] privateKeyBytes = Files.readAllBytes(Paths.get(prop.getProperty(&quot;rsaKeyFile&quot;)));\n</code></pre>\n<p>You did mention that JWT code you downloaded worked, so I suggest you use that first and modify it for your needs and each modification - test to ensure it didn't break it.</p>\n<p>Also, please confirm <code>private.key</code> was not modified in any way from the original that was downloaded for you.</p>\n"}],"owner":{"account_id":2113840,"reputation":13,"user_id":1878540,"accept_rate":0,"display_name":"GuoJing"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672766582,"creation_date":1672732572,"question_id":74990446,"body_markdown":"I downloaded the example code and write docusign utils myself, but it gets exception. I searched code but cannot find out why.\r\n\r\nI want to write a test() method let others use this method in our system, they can get token by using this method. Then they could call api themselves. This is a just util method.\r\n\r\nHere is my code.\r\n\r\n```\r\npublic void test() throws IOException, ApiException {\r\n    ApiClient apiClient = new ApiClient();\r\n    List&lt;String&gt; scopes = new ArrayList&lt;&gt;();\r\n    scopes.add(&quot;signature&quot;);\r\n    byte[] privateKeyBytes;\r\n    FileSystemResource rsaPrivateKey = new FileSystemResource(&quot;src/main/resources/private.key&quot;);\r\n    privateKeyBytes = FileCopyUtils.copyToByteArray(rsaPrivateKey.getInputStream());\r\n\r\n    String baseUrl = &quot;account-d.docusign.com&quot;;\r\n    String clientId = &quot;my-client-key&quot;;\r\n    String guId = &quot;my-guId&quot;;\r\n    apiClient.setOAuthBasePath(baseUrl);\r\n    OAuthToken oAuthToken;\r\n    try {\r\n        oAuthToken = apiClient.requestJWTUserToken(\r\n                clientId,\r\n                guId,\r\n                scopes,\r\n                privateKeyBytes,\r\n                TOKEN_EXPIRATION_IN_SECONDS);\r\n    } catch (IOException | ApiException e) {\r\n// Special handling for consent_required\r\n        String message = e.getMessage();\r\n        String consent_url = &quot;&quot;;\r\n        String consent_scopes = String.join(&quot;%20&quot;, scopes) + &quot;%20impersonation&quot;;\r\n        if (message != null &amp;&amp; message.contains(&quot;consent_required&quot;)) {\r\n            consent_url = String.format(&quot;https://%s/oauth/auth?prompt=login&amp;response_type=code&amp;scope=%s&quot; +\r\n                            &quot;&amp;client_id=%s&quot; +\r\n                            &quot;&amp;redirect_uri=%s&quot;,\r\n                    baseUrl,\r\n                    consent_scopes,\r\n                    clientId,\r\n                    &quot;http://localhost:8080/login%26type%3Djwt&quot;);\r\n            System.err.println(&quot;\\nC O N S E N T   R E Q U I R E D&quot; +\r\n                    &quot;\\nAsk the user who will be impersonated to run the following URL: &quot; +\r\n                    &quot;\\n&quot; + consent_url +\r\n                    &quot;\\n\\nIt will ask the user to login and to approve access by your application.&quot; +\r\n                    &quot;\\nAlternatively, an Administrator can use Organization Administration to&quot; +\r\n                    &quot;\\npre-approve one or more users.&quot;);\r\n\r\n            throw new BadRequestException(&quot;consent_required&quot;);\r\n        }\r\n\r\n        throw new BadRequestException(&quot;consent_required&quot;);\r\n\r\n    }\r\n    apiClient.setAccessToken(oAuthToken.getAccessToken(), oAuthToken.getExpiresIn());\r\n}\r\n```\r\n\r\nAnd, in *apiClient.requestJWTUserToken* method, it raised the exceptions below:\r\n\r\n```\r\njavax.ws.rs.ProcessingException: javax.ws.rs.core.Response$Status$Family.familyOf(I)Ljavax/ws/rs/core/Response$Status$Family;\r\n\r\n\tat org.glassfish.jersey.client.ClientRuntime.invoke(ClientRuntime.java:305)\r\n\tat org.glassfish.jersey.client.JerseyInvocation.lambda$invoke$0(JerseyInvocation.java:609)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:292)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:274)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:205)\r\n\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:390)\r\n\tat org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:608)\r\n\tat org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:421)\r\n\tat org.glassfish.jersey.client.JerseyInvocation$Builder.post(JerseyInvocation.java:327)\r\n\tat com.docusign.esign.client.ApiClient.requestJWTUserToken(ApiClient.java:916)\r\n    ....\r\n```","title":"Rewrite Docusign methods in Springboot raised javax.ws.rs.ProcessingException","body":"<p>I downloaded the example code and write docusign utils myself, but it gets exception. I searched code but cannot find out why.</p>\n<p>I want to write a test() method let others use this method in our system, they can get token by using this method. Then they could call api themselves. This is a just util method.</p>\n<p>Here is my code.</p>\n<pre><code>public void test() throws IOException, ApiException {\n    ApiClient apiClient = new ApiClient();\n    List&lt;String&gt; scopes = new ArrayList&lt;&gt;();\n    scopes.add(&quot;signature&quot;);\n    byte[] privateKeyBytes;\n    FileSystemResource rsaPrivateKey = new FileSystemResource(&quot;src/main/resources/private.key&quot;);\n    privateKeyBytes = FileCopyUtils.copyToByteArray(rsaPrivateKey.getInputStream());\n\n    String baseUrl = &quot;account-d.docusign.com&quot;;\n    String clientId = &quot;my-client-key&quot;;\n    String guId = &quot;my-guId&quot;;\n    apiClient.setOAuthBasePath(baseUrl);\n    OAuthToken oAuthToken;\n    try {\n        oAuthToken = apiClient.requestJWTUserToken(\n                clientId,\n                guId,\n                scopes,\n                privateKeyBytes,\n                TOKEN_EXPIRATION_IN_SECONDS);\n    } catch (IOException | ApiException e) {\n// Special handling for consent_required\n        String message = e.getMessage();\n        String consent_url = &quot;&quot;;\n        String consent_scopes = String.join(&quot;%20&quot;, scopes) + &quot;%20impersonation&quot;;\n        if (message != null &amp;&amp; message.contains(&quot;consent_required&quot;)) {\n            consent_url = String.format(&quot;https://%s/oauth/auth?prompt=login&amp;response_type=code&amp;scope=%s&quot; +\n                            &quot;&amp;client_id=%s&quot; +\n                            &quot;&amp;redirect_uri=%s&quot;,\n                    baseUrl,\n                    consent_scopes,\n                    clientId,\n                    &quot;http://localhost:8080/login%26type%3Djwt&quot;);\n            System.err.println(&quot;\\nC O N S E N T   R E Q U I R E D&quot; +\n                    &quot;\\nAsk the user who will be impersonated to run the following URL: &quot; +\n                    &quot;\\n&quot; + consent_url +\n                    &quot;\\n\\nIt will ask the user to login and to approve access by your application.&quot; +\n                    &quot;\\nAlternatively, an Administrator can use Organization Administration to&quot; +\n                    &quot;\\npre-approve one or more users.&quot;);\n\n            throw new BadRequestException(&quot;consent_required&quot;);\n        }\n\n        throw new BadRequestException(&quot;consent_required&quot;);\n\n    }\n    apiClient.setAccessToken(oAuthToken.getAccessToken(), oAuthToken.getExpiresIn());\n}\n</code></pre>\n<p>And, in <em>apiClient.requestJWTUserToken</em> method, it raised the exceptions below:</p>\n<pre><code>javax.ws.rs.ProcessingException: javax.ws.rs.core.Response$Status$Family.familyOf(I)Ljavax/ws/rs/core/Response$Status$Family;\n\n    at org.glassfish.jersey.client.ClientRuntime.invoke(ClientRuntime.java:305)\n    at org.glassfish.jersey.client.JerseyInvocation.lambda$invoke$0(JerseyInvocation.java:609)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:292)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:274)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:205)\n    at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:390)\n    at org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:608)\n    at org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:421)\n    at org.glassfish.jersey.client.JerseyInvocation$Builder.post(JerseyInvocation.java:327)\n    at com.docusign.esign.client.ApiClient.requestJWTUserToken(ApiClient.java:916)\n    ....\n</code></pre>\n"},{"tags":["java","date","date-formatting","localdate"],"comments":[{"owner":{"account_id":19372,"reputation":2711,"user_id":45364,"accept_rate":60,"display_name":"Sean"},"score":0,"creation_date":1672759590,"post_id":74995307,"comment_id":132344195,"body_markdown":"My idea is to use `DateTimeFormatBuilder.getLocalizedDateTimePattern(FormatStyle.FULL, ...)`, parse that string use the results containing E, d, and L.","body":"My idea is to use <code>DateTimeFormatBuilder.getLocalizedDateTimePattern(FormatStyl&zwnj;&#8203;e.FULL, ...)</code>, parse that string use the results containing E, d, and L."},{"owner":{"account_id":19372,"reputation":2711,"user_id":45364,"accept_rate":60,"display_name":"Sean"},"score":0,"creation_date":1672760315,"post_id":74995307,"comment_id":132344464,"body_markdown":"I&#39;m not trying to parse a date. I have a `LocalDate` that I&#39;m attempting to display according to rules of the user&#39;s locale. I&#39;m sorry that that wasn&#39;t obvious in my question. Do you think there&#39;s a better way for me to word this?","body":"I&#39;m not trying to parse a date. I have a <code>LocalDate</code> that I&#39;m attempting to display according to rules of the user&#39;s locale. I&#39;m sorry that that wasn&#39;t obvious in my question. Do you think there&#39;s a better way for me to word this?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1672762416,"post_id":74995307,"comment_id":132345141,"body_markdown":"It seems to me that `DateTimeFormatter.ofLocalizedDate()` will give you what you want. Or close enough that you and your users can live with it.","body":"It seems to me that <code>DateTimeFormatter.ofLocalizedDate()</code> will give you what you want. Or close enough that you and your users can live with it."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1672764152,"post_id":74995307,"comment_id":132345736,"body_markdown":"I dont see any French example on the page you are linking to. I could suspect that you are inventing a requirement that doesnt agree with what your French-speaking users want? Javas localized formats are based on a much more thorough research than you will ever be able to carry out.","body":"I dont see any French example on the page you are linking to. I could suspect that you are inventing a requirement that doesnt agree with what your French-speaking users want? Javas localized formats are based on a much more thorough research than you will ever be able to carry out."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1672760812,"creation_date":1672760812,"answer_id":74995567,"question_id":74995307,"body_markdown":"Not as a pattern, no. A pattern encodes order, for example - it is not possible to have one pattern such that &#39;in french&#39; it&#39;ll stick the month _after_ the date-of-month, and &#39;in english&#39; it&#39;ll be reversed. At best, the localization of a _single pattern_ translates names; a single pattern can produce both `Tue, Jan 3` as well as `Mar., janv. 3`. Which isn&#39;t what you want.\r\n\r\nThe method you&#39;re looking for is [`ofLocalizedDate(dateStyle)`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ofLocalizedDate-java.time.format.FormatStyle-). This produces a DTF instance that is &#39;lazy&#39; - it doesn&#39;t _have_ a pattern, it simply knows &#39;I need whatever passes for &#39;medium standard format&#39; in locale X&#39; where X is the locale of the DTF.\r\n\r\nThere is no pattern that encodes this behaviour.\r\n\r\n```\r\nfor (var locale : List.of(Locale.ENGLISH, Locale.FRENCH)) {\r\n  for (var style : FormatStyle.values()) {\r\n    var dtf = DateTimeFormatter.ofLocalizedDate(style).withLocale(locale);\r\n    System.out.printf(&quot;%s %s: %s\\n&quot;, locale, style, dtf.format(LocalDate.of(2023, 1, 3)));\r\n  }\r\n}\r\n```\r\n\r\nends up printing:\r\n\r\n```\r\nen FULL: Tuesday, January 3, 2023\r\nen LONG: January 3, 2023\r\nen MEDIUM: Jan 3, 2023\r\nen SHORT: 1/3/23\r\nfr FULL: mardi 3 janvier 2023\r\nfr LONG: 3 janvier 2023\r\nfr MEDIUM: 3 janv. 2023\r\nfr SHORT: 03/01/2023\r\n```\r\n\r\nWhich shows the dynamic nature of this `ofLocalizedDate` variant of DTF.\r\n\r\nA thing to keep in mind that DateTimeFormatter is not __necessarily__ a pattern-based concept. Patterns are merely one way to make them. That way does not allow you to change what they look like by calling `.withLocale`. Other ways of making DTFs, such as `.ofLocalizedDate`, _do_ allow it.\r\n\r\nIf you&#39;re storing a thing in a database or asking the user for something, then you&#39;d have to make a divergent option: The user first picks if they want &#39;pattern&#39; or &#39;style&#39;, so you store this (an enum col in your DB, or a radiobutton set in your UI), and then depending on what they picked, either store a style value (FULL, LONG, MEDIUM, or SHORT) - again a radio buttonset in a UI or again an enum in a db col, or, you store the pattern (string/VARCHAR/TEXT/JTextField, something along those lines). Depending on the &#39;style&#39; you construct a DTF instance from such stored preferences by checking for the &#39;variant&#39; option (style or pattern) and invoking either `.ofPattern` or `.ofLocalizedDate`. While you&#39;re at it, you might want that original radiobutton set (&#39;pattern&#39; or &#39;style&#39;) to also include ISO8601 style.\r\n\r\nNB: There is a reason the DTF class does _not_ have a `.getPattern()` method; that&#39;s because not all DTF instances have one.","title":"Is it possible write a custom date format in a way that works for all locales in Java?","body":"<p>Not as a pattern, no. A pattern encodes order, for example - it is not possible to have one pattern such that 'in french' it'll stick the month <em>after</em> the date-of-month, and 'in english' it'll be reversed. At best, the localization of a <em>single pattern</em> translates names; a single pattern can produce both <code>Tue, Jan 3</code> as well as <code>Mar., janv. 3</code>. Which isn't what you want.</p>\n<p>The method you're looking for is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ofLocalizedDate-java.time.format.FormatStyle-\" rel=\"nofollow noreferrer\"><code>ofLocalizedDate(dateStyle)</code></a>. This produces a DTF instance that is 'lazy' - it doesn't <em>have</em> a pattern, it simply knows 'I need whatever passes for 'medium standard format' in locale X' where X is the locale of the DTF.</p>\n<p>There is no pattern that encodes this behaviour.</p>\n<pre><code>for (var locale : List.of(Locale.ENGLISH, Locale.FRENCH)) {\n  for (var style : FormatStyle.values()) {\n    var dtf = DateTimeFormatter.ofLocalizedDate(style).withLocale(locale);\n    System.out.printf(&quot;%s %s: %s\\n&quot;, locale, style, dtf.format(LocalDate.of(2023, 1, 3)));\n  }\n}\n</code></pre>\n<p>ends up printing:</p>\n<pre><code>en FULL: Tuesday, January 3, 2023\nen LONG: January 3, 2023\nen MEDIUM: Jan 3, 2023\nen SHORT: 1/3/23\nfr FULL: mardi 3 janvier 2023\nfr LONG: 3 janvier 2023\nfr MEDIUM: 3 janv. 2023\nfr SHORT: 03/01/2023\n</code></pre>\n<p>Which shows the dynamic nature of this <code>ofLocalizedDate</code> variant of DTF.</p>\n<p>A thing to keep in mind that DateTimeFormatter is not <strong>necessarily</strong> a pattern-based concept. Patterns are merely one way to make them. That way does not allow you to change what they look like by calling <code>.withLocale</code>. Other ways of making DTFs, such as <code>.ofLocalizedDate</code>, <em>do</em> allow it.</p>\n<p>If you're storing a thing in a database or asking the user for something, then you'd have to make a divergent option: The user first picks if they want 'pattern' or 'style', so you store this (an enum col in your DB, or a radiobutton set in your UI), and then depending on what they picked, either store a style value (FULL, LONG, MEDIUM, or SHORT) - again a radio buttonset in a UI or again an enum in a db col, or, you store the pattern (string/VARCHAR/TEXT/JTextField, something along those lines). Depending on the 'style' you construct a DTF instance from such stored preferences by checking for the 'variant' option (style or pattern) and invoking either <code>.ofPattern</code> or <code>.ofLocalizedDate</code>. While you're at it, you might want that original radiobutton set ('pattern' or 'style') to also include ISO8601 style.</p>\n<p>NB: There is a reason the DTF class does <em>not</em> have a <code>.getPattern()</code> method; that's because not all DTF instances have one.</p>\n"},{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1672762922,"creation_date":1672762922,"answer_id":74995941,"question_id":74995307,"body_markdown":"I think it&#39;s very difficult without manually enumerating them. The JDK uses Locale data from Unicode, so it&#39;s limited by which formats are in its source data, for example these: https://github.com/openjdk/jdk/blob/master/make/data/cldr/common/main/en_GB.xml#L144 \r\n\r\n```xml\r\n&lt;dateFormats&gt;\r\n\t&lt;dateFormatLength type=&quot;full&quot;&gt;\r\n\t\t&lt;dateFormat&gt;\r\n\t\t\t&lt;pattern&gt;EEEE, MMMM d, y G&lt;/pattern&gt;\r\n\t\t\t&lt;datetimeSkeleton&gt;GyMMMMEEEEd&lt;/datetimeSkeleton&gt;\r\n\t\t&lt;/dateFormat&gt;\r\n\t&lt;/dateFormatLength&gt;\r\n\t&lt;dateFormatLength type=&quot;long&quot;&gt;\r\n\t\t&lt;dateFormat&gt;\r\n\t\t\t&lt;pattern&gt;MMMM d, y G&lt;/pattern&gt;\r\n\t\t\t&lt;datetimeSkeleton&gt;GyMMMMd&lt;/datetimeSkeleton&gt;\r\n\t\t&lt;/dateFormat&gt;\r\n\t&lt;/dateFormatLength&gt;\r\n\t&lt;dateFormatLength type=&quot;medium&quot;&gt;\r\n\t\t&lt;dateFormat&gt;\r\n\t\t\t&lt;pattern&gt;MMM d, y G&lt;/pattern&gt;\r\n\t\t\t&lt;datetimeSkeleton&gt;GyMMMd&lt;/datetimeSkeleton&gt;\r\n\t\t&lt;/dateFormat&gt;\r\n\t&lt;/dateFormatLength&gt;\r\n\t&lt;dateFormatLength type=&quot;short&quot;&gt;\r\n\t\t&lt;dateFormat&gt;\r\n\t\t\t&lt;pattern&gt;M/d/y GGGGG&lt;/pattern&gt;\r\n\t\t\t&lt;datetimeSkeleton&gt;GGGGGyMd&lt;/datetimeSkeleton&gt;\r\n\t\t&lt;/dateFormat&gt;\r\n\t&lt;/dateFormatLength&gt;\r\n&lt;/dateFormats&gt;\r\n```\r\n\r\nThe only date format which includes day-of-week at all is the so-called &quot;full&quot; format, and that uses the entire word, not an abbreviation for the word.\r\n\r\nWith that in mind, here&#39;s a horrendously hacky solution that works for your 2 examples, and probably fails for lots of others. If you want to use it, I&#39;d suggest unit testing it with a bunch of common Locales.\r\n\r\nIt works by getting the &quot;full&quot; pattern and manipulating it a bit.\r\n\r\n    private static DateTimeFormatter getLocalDayMonthFormatter(Locale locale) {\r\n        String localizedDateTimePattern = DateTimeFormatterBuilder.getLocalizedDateTimePattern(\r\n            FormatStyle.FULL, null, Chronology.ofLocale(locale), locale\r\n        );\r\n        String pattern = localizedDateTimePattern\r\n            .replaceAll(&quot;[^MdE\\\\s,.]&quot;, &quot; &quot;)    // Remove anything except month, days, spaces, commas and periods\r\n            .replaceAll(&quot;(.)\\\\1{3}&quot;, &quot;$1$1$1&quot;) // Replace any char that occurs 4 times with 3 of them\r\n            .replaceAll(&quot;\\\\s+&quot;, &quot; &quot;)           // Conflate spaces\r\n            .trim()\r\n            .replaceAll(&quot;,$&quot;, &quot;&quot;);             // If there&#39;s a trailing comma, e.g. because of removal of the year, delete it\r\n        return DateTimeFormatter.ofPattern(pattern, locale);\r\n    }\r\n\r\nSample usage:\r\n\r\n    DateTimeFormatter formatter = getLocalDayMonthFormatter(Locale.US);\r\n    System.out.println(formatter.format(LocalDate.now()));","title":"Is it possible write a custom date format in a way that works for all locales in Java?","body":"<p>I think it's very difficult without manually enumerating them. The JDK uses Locale data from Unicode, so it's limited by which formats are in its source data, for example these: <a href=\"https://github.com/openjdk/jdk/blob/master/make/data/cldr/common/main/en_GB.xml#L144\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/blob/master/make/data/cldr/common/main/en_GB.xml#L144</a></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dateFormats&gt;\n    &lt;dateFormatLength type=&quot;full&quot;&gt;\n        &lt;dateFormat&gt;\n            &lt;pattern&gt;EEEE, MMMM d, y G&lt;/pattern&gt;\n            &lt;datetimeSkeleton&gt;GyMMMMEEEEd&lt;/datetimeSkeleton&gt;\n        &lt;/dateFormat&gt;\n    &lt;/dateFormatLength&gt;\n    &lt;dateFormatLength type=&quot;long&quot;&gt;\n        &lt;dateFormat&gt;\n            &lt;pattern&gt;MMMM d, y G&lt;/pattern&gt;\n            &lt;datetimeSkeleton&gt;GyMMMMd&lt;/datetimeSkeleton&gt;\n        &lt;/dateFormat&gt;\n    &lt;/dateFormatLength&gt;\n    &lt;dateFormatLength type=&quot;medium&quot;&gt;\n        &lt;dateFormat&gt;\n            &lt;pattern&gt;MMM d, y G&lt;/pattern&gt;\n            &lt;datetimeSkeleton&gt;GyMMMd&lt;/datetimeSkeleton&gt;\n        &lt;/dateFormat&gt;\n    &lt;/dateFormatLength&gt;\n    &lt;dateFormatLength type=&quot;short&quot;&gt;\n        &lt;dateFormat&gt;\n            &lt;pattern&gt;M/d/y GGGGG&lt;/pattern&gt;\n            &lt;datetimeSkeleton&gt;GGGGGyMd&lt;/datetimeSkeleton&gt;\n        &lt;/dateFormat&gt;\n    &lt;/dateFormatLength&gt;\n&lt;/dateFormats&gt;\n</code></pre>\n<p>The only date format which includes day-of-week at all is the so-called &quot;full&quot; format, and that uses the entire word, not an abbreviation for the word.</p>\n<p>With that in mind, here's a horrendously hacky solution that works for your 2 examples, and probably fails for lots of others. If you want to use it, I'd suggest unit testing it with a bunch of common Locales.</p>\n<p>It works by getting the &quot;full&quot; pattern and manipulating it a bit.</p>\n<pre><code>private static DateTimeFormatter getLocalDayMonthFormatter(Locale locale) {\n    String localizedDateTimePattern = DateTimeFormatterBuilder.getLocalizedDateTimePattern(\n        FormatStyle.FULL, null, Chronology.ofLocale(locale), locale\n    );\n    String pattern = localizedDateTimePattern\n        .replaceAll(&quot;[^MdE\\\\s,.]&quot;, &quot; &quot;)    // Remove anything except month, days, spaces, commas and periods\n        .replaceAll(&quot;(.)\\\\1{3}&quot;, &quot;$1$1$1&quot;) // Replace any char that occurs 4 times with 3 of them\n        .replaceAll(&quot;\\\\s+&quot;, &quot; &quot;)           // Conflate spaces\n        .trim()\n        .replaceAll(&quot;,$&quot;, &quot;&quot;);             // If there's a trailing comma, e.g. because of removal of the year, delete it\n    return DateTimeFormatter.ofPattern(pattern, locale);\n}\n</code></pre>\n<p>Sample usage:</p>\n<pre><code>DateTimeFormatter formatter = getLocalDayMonthFormatter(Locale.US);\nSystem.out.println(formatter.format(LocalDate.now()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672766575,"creation_date":1672766575,"answer_id":74996618,"question_id":74995307,"body_markdown":"If you have an internationalized application, just have an internationalized version of your date pattern. Depending on the configured locale the right formatting would be pulled and used to format your date.\r\n\r\nIn case of an internationalized application you are doing this for all the strings the UI would display anyway, so it is a piece of cake.","title":"Is it possible write a custom date format in a way that works for all locales in Java?","body":"<p>If you have an internationalized application, just have an internationalized version of your date pattern. Depending on the configured locale the right formatting would be pulled and used to format your date.</p>\n<p>In case of an internationalized application you are doing this for all the strings the UI would display anyway, so it is a piece of cake.</p>\n"}],"owner":{"account_id":19372,"reputation":2711,"user_id":45364,"accept_rate":60,"display_name":"Sean"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":3,"score":2,"last_activity_date":1672766575,"creation_date":1672759371,"question_id":74995307,"body_markdown":"My goal is to display a date in a format like:\r\n\r\n| Country | example      | pattern    |\r\n| ------- | ------------ | ---------- |\r\n| US      | Tue, Jan 3   | EEE, LLL d |\r\n| France  | mar. 3 janv. | EEE d LLL  |\r\n\r\nI&#39;m using `DateTimeFormatter.ofPattern` to format my dates.\r\n\r\nIs there a way to implement this without writing the pattern for every locale?\r\n\r\nEdit:  I&#39;ll be very specific with my use case: I&#39;m trying to format a `LocalDate` to implement this date picker: [m3.material.io/components/date-pickers/ ](https://m3.material.io/components/date-pickers/specs#84872587-cdca-4d06-9906-ed2dc2b35b99)\r\n","title":"Is it possible write a custom date format in a way that works for all locales in Java?","body":"<p>My goal is to display a date in a format like:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Country</th>\n<th>example</th>\n<th>pattern</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>US</td>\n<td>Tue, Jan 3</td>\n<td>EEE, LLL d</td>\n</tr>\n<tr>\n<td>France</td>\n<td>mar. 3 janv.</td>\n<td>EEE d LLL</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I'm using <code>DateTimeFormatter.ofPattern</code> to format my dates.</p>\n<p>Is there a way to implement this without writing the pattern for every locale?</p>\n<p>Edit:  I'll be very specific with my use case: I'm trying to format a <code>LocalDate</code> to implement this date picker: <a href=\"https://m3.material.io/components/date-pickers/specs#84872587-cdca-4d06-9906-ed2dc2b35b99\" rel=\"nofollow noreferrer\">m3.material.io/components/date-pickers/ </a></p>\n"},{"tags":["java","spring","request"],"comments":[{"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"score":0,"creation_date":1672708267,"post_id":74988221,"comment_id":132332196,"body_markdown":"like this [\n    1,\n    3,\n    4,\n    5\n]   you just put this as the body for the RequestBody","body":"like this [     1,     3,     4,     5 ]   you just put this as the body for the RequestBody"},{"owner":{"account_id":4487116,"reputation":429,"user_id":3649352,"accept_rate":67,"display_name":"Kunal Varpe"},"score":0,"creation_date":1672729388,"post_id":74988221,"comment_id":132334928,"body_markdown":"@Anon I think requirement here is to pass it though request param not through request body.","body":"@Anon I think requirement here is to pass it though request param not through request body."},{"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"score":1,"creation_date":1672730916,"post_id":74988221,"comment_id":132335242,"body_markdown":"@KunalVarpe he as RequestParam in code but he wants to change it to RequestBody just read the second paragraph","body":"@KunalVarpe he as RequestParam in code but he wants to change it to RequestBody just read the second paragraph"}],"answers":[{"tags":[],"owner":{"account_id":24400981,"reputation":11,"user_id":18329733,"display_name":"Nithish Subramaniyan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672748256,"creation_date":1672717870,"answer_id":74988891,"question_id":74988221,"body_markdown":"You can pass an array by specifying the same key multiple times in `Body` &gt; `form-data` like in this screenshot:\r\n[![Postman Screenshot][1]][1]\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XnZKe.png","title":"How to pass an array of primitives as Request in Postman","body":"<p>You can pass an array by specifying the same key multiple times in <code>Body</code> &gt; <code>form-data</code> like in this screenshot:\n<a href=\"https://i.stack.imgur.com/XnZKe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XnZKe.png\" alt=\"Postman Screenshot\" /></a></p>\n"},{"tags":[],"owner":{"account_id":4487116,"reputation":429,"user_id":3649352,"accept_rate":67,"display_name":"Kunal Varpe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672739146,"creation_date":1672738693,"answer_id":74991480,"question_id":74988221,"body_markdown":"You can achieve that by passing the multiple arguments as query params like show in below. The controller is taking array as input and sum the elements and returns that. That is why for [1,2,3] it outputs 6.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[1]: https://i.stack.imgur.com/5uHru.png\r\n\r\nTo send it as request body you can just follow below code.\r\n\r\n```java\r\n@PostMapping\r\n\tpublic int acceptArray(@RequestBody InputArrayRequest request) {\r\n\r\n\t\tif (request.getArray() == null || request.getArray().length == 0) {\r\n\t\t\tthrow new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;You entered an empty array()&quot;);\r\n\t\t}\r\n\r\n\t\treturn arraySolver.arraySolver(array);\r\n\t}\r\n\r\nclass InputArrayRequest {\r\n\tprivate int[] array;\r\n\r\n\tpublic int[] getArray() {\r\n\t\treturn array;\r\n\t}\r\n}\r\n```","title":"How to pass an array of primitives as Request in Postman","body":"<p>You can achieve that by passing the multiple arguments as query params like show in below. The controller is taking array as input and sum the elements and returns that. That is why for [1,2,3] it outputs 6.</p>\n<p><a href=\"https://i.stack.imgur.com/5uHru.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5uHru.png\" alt=\"enter image description here\" /></a></p>\n<p>To send it as request body you can just follow below code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping\n    public int acceptArray(@RequestBody InputArrayRequest request) {\n\n        if (request.getArray() == null || request.getArray().length == 0) {\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;You entered an empty array()&quot;);\n        }\n\n        return arraySolver.arraySolver(array);\n    }\n\nclass InputArrayRequest {\n    private int[] array;\n\n    public int[] getArray() {\n        return array;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672766547,"creation_date":1672766547,"answer_id":74996610,"question_id":74988221,"body_markdown":"if you want an array of ints from a RequestBody \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IXlZU.png\r\n\r\n\r\n    @PostMapping\r\n    public int acceptArray(@RequestBody int[] array) {\r\n        if (array == null || array.length == 0) {\r\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;You entered an empty array()&quot;);\r\n        }\r\n        return Arrays.stream(array).sum();\r\n    }","title":"How to pass an array of primitives as Request in Postman","body":"<p>if you want an array of ints from a RequestBody</p>\n<p><a href=\"https://i.stack.imgur.com/IXlZU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IXlZU.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>@PostMapping\npublic int acceptArray(@RequestBody int[] array) {\n    if (array == null || array.length == 0) {\n        throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;You entered an empty array()&quot;);\n    }\n    return Arrays.stream(array).sum();\n}\n</code></pre>\n"}],"owner":{"account_id":27039049,"reputation":13,"user_id":20594147,"display_name":"tzvezdov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74991480,"answer_count":3,"score":0,"last_activity_date":1672766547,"creation_date":1672706965,"question_id":74988221,"body_markdown":"I was wondering what is the best way to pass a simple int[] array to a Spring Controller?\r\n\r\n\r\n\r\nAs of now it only worked when I am passing the values as a @RequestParam in the URL, however I would like to send them for example as a @RequestBody. How could I do that? \r\n\r\n`\r\n```\r\n@PostMapping\r\npublic int acceptArray(@RequestParam int[] array) {\r\n\r\n    if (array == null || array.length == 0) {\r\n        throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;You entered an empty array&quot;);\r\n    }\r\n\r\n    return arraySolver.arraySolver(array);\r\n}\r\n```\r\n`\r\n\r\nSince I am kinda new a more detailed explanation would be appreciated :)\r\n\r\nThank you in advance for the help.\r\n","title":"How to pass an array of primitives as Request in Postman","body":"<p>I was wondering what is the best way to pass a simple int[] array to a Spring Controller?</p>\n<p>As of now it only worked when I am passing the values as a @RequestParam in the URL, however I would like to send them for example as a @RequestBody. How could I do that?</p>\n<p>`</p>\n<pre><code>@PostMapping\npublic int acceptArray(@RequestParam int[] array) {\n\n    if (array == null || array.length == 0) {\n        throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;You entered an empty array&quot;);\n    }\n\n    return arraySolver.arraySolver(array);\n}\n</code></pre>\n<p>`</p>\n<p>Since I am kinda new a more detailed explanation would be appreciated :)</p>\n<p>Thank you in advance for the help.</p>\n"},{"tags":["java","game-development"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1672759295,"post_id":74994875,"comment_id":132344071,"body_markdown":"For game development, I would recommend (J)OGL (Open GL for Java) over Swing. The other thing I would advise is to learn about the `Model View Controller` pattern. Under MVC, I would recommend that you not move your ActionListeners to another class, but instead implement them as one line methods that call methods in the Controller (which may be the same as the Model and the View) and do modularity that way","body":"For game development, I would recommend (J)OGL (Open GL for Java) over Swing. The other thing I would advise is to learn about the <code>Model View Controller</code> pattern. Under MVC, I would recommend that you not move your ActionListeners to another class, but instead implement them as one line methods that call methods in the Controller (which may be the same as the Model and the View) and do modularity that way"},{"owner":{"account_id":27421714,"reputation":1,"user_id":20920039,"display_name":"Beginner Programmer"},"score":0,"creation_date":1672764071,"post_id":74994875,"comment_id":132345712,"body_markdown":"Will try that next time my deadline is near","body":"Will try that next time my deadline is near"}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672765925,"creation_date":1672757189,"answer_id":74994912,"question_id":74994875,"body_markdown":"All methods in Java need to be associated with a class.  You cannot move methods from listeners into separate files.\r\n\r\nYou can create separate listener implementations that include these action methods.  If you refactor that way you&#39;ll give instances of those listener implementations to your Swing frame and call them instead of keeping them in one big Swing class.\r\n\r\nI think this is a good idea.  You would change implementations by injecting new classes instead of modifying the frame code.\r\n\r\nEach of those `addActionListener` lambdas would become part of separate classes.\r\n\r\nSwing UI code tends to turn into walls of code if you&#39;re not careful.  I have never seen a well decomposed Swing UI application posted here.  ","title":"Moving and organizing Java codes on another files","body":"<p>All methods in Java need to be associated with a class.  You cannot move methods from listeners into separate files.</p>\n<p>You can create separate listener implementations that include these action methods.  If you refactor that way you'll give instances of those listener implementations to your Swing frame and call them instead of keeping them in one big Swing class.</p>\n<p>I think this is a good idea.  You would change implementations by injecting new classes instead of modifying the frame code.</p>\n<p>Each of those <code>addActionListener</code> lambdas would become part of separate classes.</p>\n<p>Swing UI code tends to turn into walls of code if you're not careful.  I have never seen a well decomposed Swing UI application posted here.</p>\n"}],"owner":{"account_id":27421714,"reputation":1,"user_id":20920039,"display_name":"Beginner Programmer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1672765925,"creation_date":1672756966,"question_id":74994875,"body_markdown":"I would like to create a new file and put this block of action buttons codes to be organized on the other files i dont know how i would be able to move it.\r\n\r\nIam making this code and its a little bit disorganized and im having a hard time on what is their purpose.\r\n\r\nIs there any other easier method to create a actionlistener codes?\r\n\r\n&gt; \r\n```\r\npublic void buttonAction (){\r\n        \r\n        \r\n        bgButton[0].addActionListener(e -&gt; {\r\n            \r\n            bgPanel[0].setVisible(false);\r\n            bgPanel[0].remove(bgButton[0]);\r\n            bgPanel[1].setVisible(true);\r\n            \r\n        });\r\n        \r\n        \r\n        \r\n        \r\n            \r\n        for (int a = 3,c=0 ; a &lt;12; a++, c++){\r\n            \r\n            final int b=c;\r\n            final int d=a;\r\n        bgButton[a].addActionListener(e -&gt; {\r\n            \r\n            \r\n            if (input&gt;=0&amp;&amp;input &lt;=9&amp;&amp;Num[b]!=0){\r\n            input = Num[b]*10;\r\n            \r\n                if(input!=0)\r\n                    \r\n                    createObject(1,12,283,245,85,61,numFile[b]);//12\r\n                    bgButton[d].setEnabled(false);\r\n                    Number[b]=-1;\r\n            } else if (input &gt;9&amp;&amp;input&lt;100&amp;&amp;input%10==0&amp;&amp;Num[b]!=0&amp;&amp;buttonClicked){\r\n                input += Num[b];\r\n                buttonClicked = !buttonClicked;\r\n                createObject(1,13,432,245,85,61,numFile[b]);//13\r\n                bgButton[d].setEnabled(false);\r\n                    Number[b]=-1;\r\n                    \r\n            }else if (Num[b]==0&amp;&amp;buttonClicked){\r\n                \r\n                input += Num[b];\r\n                createObject(1,13,432,245,85,61,numFile[b]);//13\r\n                bgButton[d].setEnabled(false);\r\n                buttonClicked = !buttonClicked;\r\n                Number[b]=-1;\r\n                \r\n            }\r\n            \r\n            System.err.println(&quot;total  &quot; + input);\r\n            bgPanel[1].revalidate();\r\n            bgPanel[1].repaint();\r\n                    });\r\n        \r\n        }\r\n        \r\n        \r\n        \r\n        bgButton[14].addActionListener(e -&gt; {\r\n            \r\n            for (int c =0 ,a=3; c &lt;9; a++,c++){\r\n                final int b = a;\r\n                final int d=c;\r\n                \r\n                int firstNum = input/10;\r\n                int secondNum=input%10;\r\n                \r\n                \r\n                if (Number[c]==-1&amp;&amp;bgButton[13]!=null){\r\n                    \r\n                    attack = input;\r\n                    \r\n                    generateSoloNum(d);\r\n                    bgButton[b].setEnabled(true);\r\n                    updateButtonIcon(b,64,48,numFile[d]);\r\n                    bgPanel[1].remove(bgButton[12]);\r\n                    \r\n                    bgPanel[1].remove(bgButton[13]);\r\n                    bgPanel[1].revalidate();\r\n                    bgPanel[1].repaint();\r\n                    \r\n                    Number [c]=0;\r\n                    \r\n                    input =0;\r\n                    \r\n                }\r\n                \r\n                \r\n                \r\n            }\r\n            buttonClicked = true;\r\n            bgButton[13]=null;\r\n        });\r\n        \r\n        \r\n        createObject(1,15,149,244,50,38,&quot;res/imageAssets/x.png&quot;);//15\r\n        \r\n        bgButton[15].addActionListener(e -&gt; {\r\n            input = 0;\r\n            bgPanel[1].remove(bgButton[12]);\r\n            bgPanel[1].remove(bgButton[13]);\r\n            bgPanel[1].revalidate();\r\n            bgPanel[1].repaint();\r\n            buttonClicked = true;\r\n            for (int a = 3,c=0; a&lt;12;a++,c++){\r\n                bgButton[a].setEnabled(true);\r\n                Number [c]=0;\r\n            }\r\n        });\r\n        \r\n    }\r\n```\r\n\r\n\r\nI tried import Main.UI; and import Main.Action;\r\n\r\nAction is the new file that i want to move it into.\r\n\r\ntried using chat gpt but it makes no sense","title":"Moving and organizing Java codes on another files","body":"<p>I would like to create a new file and put this block of action buttons codes to be organized on the other files i dont know how i would be able to move it.</p>\n<p>Iam making this code and its a little bit disorganized and im having a hard time on what is their purpose.</p>\n<p>Is there any other easier method to create a actionlistener codes?</p>\n<blockquote>\n</blockquote>\n<pre><code>public void buttonAction (){\n        \n        \n        bgButton[0].addActionListener(e -&gt; {\n            \n            bgPanel[0].setVisible(false);\n            bgPanel[0].remove(bgButton[0]);\n            bgPanel[1].setVisible(true);\n            \n        });\n        \n        \n        \n        \n            \n        for (int a = 3,c=0 ; a &lt;12; a++, c++){\n            \n            final int b=c;\n            final int d=a;\n        bgButton[a].addActionListener(e -&gt; {\n            \n            \n            if (input&gt;=0&amp;&amp;input &lt;=9&amp;&amp;Num[b]!=0){\n            input = Num[b]*10;\n            \n                if(input!=0)\n                    \n                    createObject(1,12,283,245,85,61,numFile[b]);//12\n                    bgButton[d].setEnabled(false);\n                    Number[b]=-1;\n            } else if (input &gt;9&amp;&amp;input&lt;100&amp;&amp;input%10==0&amp;&amp;Num[b]!=0&amp;&amp;buttonClicked){\n                input += Num[b];\n                buttonClicked = !buttonClicked;\n                createObject(1,13,432,245,85,61,numFile[b]);//13\n                bgButton[d].setEnabled(false);\n                    Number[b]=-1;\n                    \n            }else if (Num[b]==0&amp;&amp;buttonClicked){\n                \n                input += Num[b];\n                createObject(1,13,432,245,85,61,numFile[b]);//13\n                bgButton[d].setEnabled(false);\n                buttonClicked = !buttonClicked;\n                Number[b]=-1;\n                \n            }\n            \n            System.err.println(&quot;total  &quot; + input);\n            bgPanel[1].revalidate();\n            bgPanel[1].repaint();\n                    });\n        \n        }\n        \n        \n        \n        bgButton[14].addActionListener(e -&gt; {\n            \n            for (int c =0 ,a=3; c &lt;9; a++,c++){\n                final int b = a;\n                final int d=c;\n                \n                int firstNum = input/10;\n                int secondNum=input%10;\n                \n                \n                if (Number[c]==-1&amp;&amp;bgButton[13]!=null){\n                    \n                    attack = input;\n                    \n                    generateSoloNum(d);\n                    bgButton[b].setEnabled(true);\n                    updateButtonIcon(b,64,48,numFile[d]);\n                    bgPanel[1].remove(bgButton[12]);\n                    \n                    bgPanel[1].remove(bgButton[13]);\n                    bgPanel[1].revalidate();\n                    bgPanel[1].repaint();\n                    \n                    Number [c]=0;\n                    \n                    input =0;\n                    \n                }\n                \n                \n                \n            }\n            buttonClicked = true;\n            bgButton[13]=null;\n        });\n        \n        \n        createObject(1,15,149,244,50,38,&quot;res/imageAssets/x.png&quot;);//15\n        \n        bgButton[15].addActionListener(e -&gt; {\n            input = 0;\n            bgPanel[1].remove(bgButton[12]);\n            bgPanel[1].remove(bgButton[13]);\n            bgPanel[1].revalidate();\n            bgPanel[1].repaint();\n            buttonClicked = true;\n            for (int a = 3,c=0; a&lt;12;a++,c++){\n                bgButton[a].setEnabled(true);\n                Number [c]=0;\n            }\n        });\n        \n    }\n</code></pre>\n<p>I tried import Main.UI; and import Main.Action;</p>\n<p>Action is the new file that i want to move it into.</p>\n<p>tried using chat gpt but it makes no sense</p>\n"},{"tags":["java","plugins","minecraft","bukkit","spigot"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":1,"creation_date":1672671004,"post_id":74981585,"comment_id":132324008,"body_markdown":"Did you tried forcing maven to clean cache ?","body":"Did you tried forcing maven to clean cache ?"},{"owner":{"account_id":27317972,"reputation":3,"user_id":20832188,"display_name":"Sus Amongus"},"score":0,"creation_date":1672737946,"post_id":74981585,"comment_id":132337128,"body_markdown":"@Elikill58 if you mean deleting the `.m2` folder - that doesn&#39;t work either...","body":"@Elikill58 if you mean deleting the <code>.m2</code> folder - that doesn&#39;t work either..."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1672750090,"post_id":74981585,"comment_id":132341039,"body_markdown":"No, I mean use `mvn clean install` for example","body":"No, I mean use <code>mvn clean install</code> for example"},{"owner":{"account_id":27317972,"reputation":3,"user_id":20832188,"display_name":"Sus Amongus"},"score":0,"creation_date":1672764566,"post_id":74981585,"comment_id":132345875,"body_markdown":"@Elikill58 that does the same thing as `clean package` I&#39;m currently using...","body":"@Elikill58 that does the same thing as <code>clean package</code> I&#39;m currently using..."}],"owner":{"account_id":27317972,"reputation":3,"user_id":20832188,"display_name":"Sus Amongus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672765878,"creation_date":1672657274,"question_id":74981585,"body_markdown":"I&#39;m making a spigot plugin just for my minecraft server. Until now everything was OK and worked perfectly. Then I added some code and it just won&#39;t build...\r\nHere is the maven output:\r\n\r\nhttps://pastebin.com/fftMVJth\r\n\r\nAnd here is the code I added:\r\n\r\n```java\r\n@EventHandler\r\npublic void onPlayerAdvancement(@NotNull PlayerAdvancementDoneEvent _event) {\r\n    AdvancementDisplay $display = Objects.requireNonNull(_event.getAdvancement().getDisplay());\r\n    String $message = &quot;&quot;;\r\n    \r\n    switch ($display.getType()) {\r\n        case TASK -&gt; $message =\r\n                &quot;&quot;&quot;\r\n                [&quot;&quot;,&quot;&lt;Name&gt; has made the advancement &quot;,{&quot;text&quot;:&quot;[&lt;AName&gt;]&quot;,&quot;color&quot;:&quot;green&quot;,&quot;hoverEvent&quot;:{&quot;action&quot;:&quot;show_text&quot;,&quot;contents&quot;:[{&quot;text&quot;:&quot;&lt;AName&gt;\\\\n&quot;,&quot;color&quot;:&quot;green&quot;},{&quot;text&quot;:&quot;&lt;ADescription&gt;&quot;,&quot;color&quot;:&quot;green&quot;}]}}]\r\n                &quot;&quot;&quot;;\r\n        case GOAL -&gt; $message =\r\n                &quot;&quot;&quot;\r\n                [&quot;&quot;,&quot;&lt;Name&gt; has reached the goal &quot;,{&quot;text&quot;:&quot;[&lt;AName&gt;]&quot;,&quot;color&quot;:&quot;green&quot;,&quot;hoverEvent&quot;:{&quot;action&quot;:&quot;show_text&quot;,&quot;contents&quot;:[{&quot;text&quot;:&quot;&lt;AName&gt;\\\\n&quot;,&quot;color&quot;:&quot;green&quot;},{&quot;text&quot;:&quot;&lt;ADescription&gt;&quot;,&quot;color&quot;:&quot;green&quot;}]}}]\r\n                &quot;&quot;&quot;;\r\n        case CHALLENGE -&gt; $message =\r\n                &quot;&quot;&quot;\r\n                [&quot;&quot;,&quot;&lt;Name&gt; has completed the challenge &quot;,{&quot;text&quot;:&quot;[&lt;AName&gt;]&quot;,&quot;color&quot;:&quot;dark_purple&quot;,&quot;hoverEvent&quot;:{&quot;action&quot;:&quot;show_text&quot;,&quot;contents&quot;:[{&quot;text&quot;:&quot;&lt;AName&gt;\\\\n&quot;,&quot;color&quot;:&quot;dark_purple&quot;},{&quot;text&quot;:&quot;&lt;ADescription&gt;&quot;,&quot;color&quot;:&quot;dark_purple&quot;}]}}]\r\n                &quot;&quot;&quot;;\r\n    }\r\n    \r\n    String final$message = $message;\r\n    getServer().getOnlinePlayers().forEach(_player -&gt; _player.sendRawMessage(final$message\r\n            .replaceAll(&quot;&lt;Name&gt;&quot;, _event.getPlayer().getName())\r\n            .replaceAll(&quot;&lt;AName&gt;&quot;, $display.getTitle())\r\n            .replaceAll(&quot;&lt;ADescription&gt;&quot;, $display.getDescription())));\r\n}\r\n```\r\n\r\n\r\nI don&#39;t think the error is in my code, it is probably in something else...\r\nSo here is my `pom.xml`:\r\n\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;codes.rorak&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.16-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;spigot-repo&lt;/id&gt;\r\n            &lt;url&gt;https://hub.spigotmc.org/nexus/content/repositories/snapshots/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.spigotmc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spigot-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.19.3-R0.1-SNAPSHOT&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;RELEASE&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nI tried to bring the version in pom.xml down to 8, but then my code doesn&#39;t work, because I use string blocks, switch expressions and parametrized `instanceof` operators... But I don&#39;t think that would work then, because in the error message, some of the errors are from code that was there from start and worked perfectly before...\r\n\r\nEDIT: I event tried to edit my code so it works on Java 8 (and bringing it down to that level too ofc), but the error is still there...\r\n\r\nThanks for help!","title":"Why does my spigot plugin maven build fail - cannot access org.bukkit.advancement.AdvancementDisplayType?","body":"<p>I'm making a spigot plugin just for my minecraft server. Until now everything was OK and worked perfectly. Then I added some code and it just won't build...\nHere is the maven output:</p>\n<p><a href=\"https://pastebin.com/fftMVJth\" rel=\"nofollow noreferrer\">https://pastebin.com/fftMVJth</a></p>\n<p>And here is the code I added:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EventHandler\npublic void onPlayerAdvancement(@NotNull PlayerAdvancementDoneEvent _event) {\n    AdvancementDisplay $display = Objects.requireNonNull(_event.getAdvancement().getDisplay());\n    String $message = &quot;&quot;;\n    \n    switch ($display.getType()) {\n        case TASK -&gt; $message =\n                &quot;&quot;&quot;\n                [&quot;&quot;,&quot;&lt;Name&gt; has made the advancement &quot;,{&quot;text&quot;:&quot;[&lt;AName&gt;]&quot;,&quot;color&quot;:&quot;green&quot;,&quot;hoverEvent&quot;:{&quot;action&quot;:&quot;show_text&quot;,&quot;contents&quot;:[{&quot;text&quot;:&quot;&lt;AName&gt;\\\\n&quot;,&quot;color&quot;:&quot;green&quot;},{&quot;text&quot;:&quot;&lt;ADescription&gt;&quot;,&quot;color&quot;:&quot;green&quot;}]}}]\n                &quot;&quot;&quot;;\n        case GOAL -&gt; $message =\n                &quot;&quot;&quot;\n                [&quot;&quot;,&quot;&lt;Name&gt; has reached the goal &quot;,{&quot;text&quot;:&quot;[&lt;AName&gt;]&quot;,&quot;color&quot;:&quot;green&quot;,&quot;hoverEvent&quot;:{&quot;action&quot;:&quot;show_text&quot;,&quot;contents&quot;:[{&quot;text&quot;:&quot;&lt;AName&gt;\\\\n&quot;,&quot;color&quot;:&quot;green&quot;},{&quot;text&quot;:&quot;&lt;ADescription&gt;&quot;,&quot;color&quot;:&quot;green&quot;}]}}]\n                &quot;&quot;&quot;;\n        case CHALLENGE -&gt; $message =\n                &quot;&quot;&quot;\n                [&quot;&quot;,&quot;&lt;Name&gt; has completed the challenge &quot;,{&quot;text&quot;:&quot;[&lt;AName&gt;]&quot;,&quot;color&quot;:&quot;dark_purple&quot;,&quot;hoverEvent&quot;:{&quot;action&quot;:&quot;show_text&quot;,&quot;contents&quot;:[{&quot;text&quot;:&quot;&lt;AName&gt;\\\\n&quot;,&quot;color&quot;:&quot;dark_purple&quot;},{&quot;text&quot;:&quot;&lt;ADescription&gt;&quot;,&quot;color&quot;:&quot;dark_purple&quot;}]}}]\n                &quot;&quot;&quot;;\n    }\n    \n    String final$message = $message;\n    getServer().getOnlinePlayers().forEach(_player -&gt; _player.sendRawMessage(final$message\n            .replaceAll(&quot;&lt;Name&gt;&quot;, _event.getPlayer().getName())\n            .replaceAll(&quot;&lt;AName&gt;&quot;, $display.getTitle())\n            .replaceAll(&quot;&lt;ADescription&gt;&quot;, $display.getDescription())));\n}\n</code></pre>\n<p>I don't think the error is in my code, it is probably in something else...\nSo here is my <code>pom.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;codes.rorak&lt;/groupId&gt;\n    &lt;artifactId&gt;Plugin&lt;/artifactId&gt;\n    &lt;version&gt;0.0.16-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spigot-repo&lt;/id&gt;\n            &lt;url&gt;https://hub.spigotmc.org/nexus/content/repositories/snapshots/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.spigotmc&lt;/groupId&gt;\n            &lt;artifactId&gt;spigot-api&lt;/artifactId&gt;\n            &lt;version&gt;1.19.3-R0.1-SNAPSHOT&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n            &lt;version&gt;RELEASE&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I tried to bring the version in pom.xml down to 8, but then my code doesn't work, because I use string blocks, switch expressions and parametrized <code>instanceof</code> operators... But I don't think that would work then, because in the error message, some of the errors are from code that was there from start and worked perfectly before...</p>\n<p>EDIT: I event tried to edit my code so it works on Java 8 (and bringing it down to that level too ofc), but the error is still there...</p>\n<p>Thanks for help!</p>\n"},{"tags":["java","spring-boot","querydsl"],"owner":{"account_id":23540382,"reputation":1,"user_id":17584666,"display_name":"ExiledMC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":407,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672765648,"creation_date":1672765282,"question_id":74996385,"body_markdown":"I have a DB with 40 columns, and a REST API in Spring Boot that can be used to query the DB with any combination of parameters, which necessitates the use of dynamic query creation, which is why I have chosen to use QueryDSL.\r\n\r\nBefore making the query, I convert the query params to the Entity object using an ObjectMapper, then do a count using something like:\r\n ```\r\nqueryFactory.select(qTableRequest.rowId.count()).from(qTableRequest).where(qTableRequest.eq(TableRequest))\r\n``` \r\nwhich works fine when the @Id column of the Entity is not null, but fails with \r\n```\r\nTransientObjectException: object references an unsaved transient instance - save the transient instance before flushing\r\n``` \r\nwhen it&#39;s null. \r\n\r\nSide note: I can&#39;t use Spring&#39;s Query by Example because there are cases where I need non-singular matching.\r\n\r\nI tried to extract the non-null fields of the entity and construct the query using .and(), .or() etc. as a BooleanExpression and it works, but it requires a lot of boilerplate code and it would be nice to have a simple solution to query for the Entity directly.\r\n\r\nMy question is: is it possible to use an Entity in the query without an Id?\r\n\r\nEntity:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;table&quot;, schema = &quot;schema&quot;)\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\npublic class TableRequest {\r\n\r\n    @Id\r\n    @Column(name = &quot;row_id&quot;)\r\n    public String rowId;\r\n\r\n    @Column(name = &quot;order_id&quot;)\r\n    public String orderId;\r\n    ... // 38 more rows\r\n}\r\n```\r\n\r\nQuery:\r\n\r\n```\r\nprivate BooleanExpression constructQuery(SearchRequest searchRequest) {\r\n    TableRequest searchRequestToEntity = objectMapper.convertValue(SearchRequest, TableRequest.class);\r\n\r\n    BooleanExpression queryParameters = qTableRequest.eq(searchRequestToEntity);\r\n    ...\r\n}\r\n\r\npublic SearchResponse search(SearchRequest searchRequest) {\r\n    BooleanExpression queryParameters = constructQuery(searchRequest);\r\n\r\n    long rowCount = queryFactory.select(qTableRequest.rowId.count())\r\n            .from(qTableRequest).where(queryParameters).fetchFirst();\r\n    ...\r\n}\r\n```\r\n\r\n","title":"QueryDSL query failing when querying with entity with null ID","body":"<p>I have a DB with 40 columns, and a REST API in Spring Boot that can be used to query the DB with any combination of parameters, which necessitates the use of dynamic query creation, which is why I have chosen to use QueryDSL.</p>\n<p>Before making the query, I convert the query params to the Entity object using an ObjectMapper, then do a count using something like:</p>\n<pre><code>queryFactory.select(qTableRequest.rowId.count()).from(qTableRequest).where(qTableRequest.eq(TableRequest))\n</code></pre>\n<p>which works fine when the @Id column of the Entity is not null, but fails with</p>\n<pre><code>TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing\n</code></pre>\n<p>when it's null.</p>\n<p>Side note: I can't use Spring's Query by Example because there are cases where I need non-singular matching.</p>\n<p>I tried to extract the non-null fields of the entity and construct the query using .and(), .or() etc. as a BooleanExpression and it works, but it requires a lot of boilerplate code and it would be nice to have a simple solution to query for the Entity directly.</p>\n<p>My question is: is it possible to use an Entity in the query without an Id?</p>\n<p>Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;table&quot;, schema = &quot;schema&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\npublic class TableRequest {\n\n    @Id\n    @Column(name = &quot;row_id&quot;)\n    public String rowId;\n\n    @Column(name = &quot;order_id&quot;)\n    public String orderId;\n    ... // 38 more rows\n}\n</code></pre>\n<p>Query:</p>\n<pre><code>private BooleanExpression constructQuery(SearchRequest searchRequest) {\n    TableRequest searchRequestToEntity = objectMapper.convertValue(SearchRequest, TableRequest.class);\n\n    BooleanExpression queryParameters = qTableRequest.eq(searchRequestToEntity);\n    ...\n}\n\npublic SearchResponse search(SearchRequest searchRequest) {\n    BooleanExpression queryParameters = constructQuery(searchRequest);\n\n    long rowCount = queryFactory.select(qTableRequest.rowId.count())\n            .from(qTableRequest).where(queryParameters).fetchFirst();\n    ...\n}\n</code></pre>\n"},{"tags":["java","file-upload","ftps"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672094700,"post_id":74924431,"comment_id":132220845,"body_markdown":"501 is [Syntax error in parameters or arguments](https://en.wikipedia.org/wiki/List_of_FTP_server_return_codes)","body":"501 is <a href=\"https://en.wikipedia.org/wiki/List_of_FTP_server_return_codes\" rel=\"nofollow noreferrer\">Syntax error in parameters or arguments</a>"},{"owner":{"account_id":14006484,"reputation":1,"user_id":11453169,"display_name":"Oscar Mauricio Gomez Acevedo"},"score":0,"creation_date":1672265142,"post_id":74924431,"comment_id":132256080,"body_markdown":"mmm ok, but when I try upload file, using a outputStream, creates the empty file, but does not allow to write it. After the response is java.net.SocketException: &quot;Broken pipe (Write failed)&quot;. The file that I try upload Is a zip.","body":"mmm ok, but when I try upload file, using a outputStream, creates the empty file, but does not allow to write it. After the response is java.net.SocketException: &quot;Broken pipe (Write failed)&quot;. The file that I try upload Is a zip."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672268149,"post_id":74924431,"comment_id":132256629,"body_markdown":"First try uploading a zip with a different command line client from the same box","body":"First try uploading a zip with a different command line client from the same box"},{"owner":{"account_id":14006484,"reputation":1,"user_id":11453169,"display_name":"Oscar Mauricio Gomez Acevedo"},"score":0,"creation_date":1672413356,"post_id":74924431,"comment_id":132285940,"body_markdown":"I don&#39;t understand your idea, I&#39;ll tell you what I tried: I tried the transfer with FileZilla and it worked. I managed with the same code to create a new file (e.g. text) on the server and overwrite it without problems. So I don&#39;t understand why the process from my java application s not successful when I transfer the zip file.","body":"I don&#39;t understand your idea, I&#39;ll tell you what I tried: I tried the transfer with FileZilla and it worked. I managed with the same code to create a new file (e.g. text) on the server and overwrite it without problems. So I don&#39;t understand why the process from my java application s not successful when I transfer the zip file."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672413601,"post_id":74924431,"comment_id":132286008,"body_markdown":"Probably need to see the full `storeFile` code","body":"Probably need to see the full <code>storeFile</code> code"},{"owner":{"account_id":14006484,"reputation":1,"user_id":11453169,"display_name":"Oscar Mauricio Gomez Acevedo"},"score":0,"creation_date":1672765636,"post_id":74924431,"comment_id":132346214,"body_markdown":"Happy New Year, I updated the post with a code snippet, please check.","body":"Happy New Year, I updated the post with a code snippet, please check."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672766099,"post_id":74924431,"comment_id":132346348,"body_markdown":"*This return false and the message: 501 Server cannot accept argument.* Please post the full error as text, formatted as code. I don&#39;t know where that is coming from as &quot;cannot accept&quot; is not a string that appears in the Commons Net source","body":"<i>This return false and the message: 501 Server cannot accept argument.</i> Please post the full error as text, formatted as code. I don&#39;t know where that is coming from as &quot;cannot accept&quot; is not a string that appears in the Commons Net source"},{"owner":{"account_id":14006484,"reputation":1,"user_id":11453169,"display_name":"Oscar Mauricio Gomez Acevedo"},"score":0,"creation_date":1672787538,"post_id":74924431,"comment_id":132351894,"body_markdown":"220 Microsoft FTP Service\n    USER *******\n    331 Password required\n    PASS *******\n    230 User logged in.\n    CWD /\n    250 CWD command successful.\n    TYPE I\n    200 Type set to I.\n    PORT 192,168,31,210,216,149\n    501 Server cannot accept argument.","body":"220 Microsoft FTP Service     USER *******     331 Password required     PASS *******     230 User logged in.     CWD /     250 CWD command successful.     TYPE I     200 Type set to I.     PORT 192,168,31,210,216,149     501 Server cannot accept argument."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672787746,"post_id":74924431,"comment_id":132351932,"body_markdown":"Formatted as code in the question please","body":"Formatted as code in the question please"}],"owner":{"account_id":14006484,"reputation":1,"user_id":11453169,"display_name":"Oscar Mauricio Gomez Acevedo"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672765509,"creation_date":1672093859,"question_id":74924431,"body_markdown":"I&#39;m try to upload file using FTPS. \r\n\r\nCurrently I use the library `org.apache.commons.net.ftp.FTPSClient;`\r\n\r\nThis is part of code that I use:\r\n\r\n`FTPSClient ftpClient = new FTPSClient(&quot;SSL&quot;, true);\r\n ftpClient.connect(host, port);\r\n ftpClient.login(user, password); \r\n`\r\nAnd I check the connection using:\r\n`ftpClient.isConnected()`\r\n\r\nThis return a boolean value, when is ok return: true\r\n\r\nThe problem is when try to upload a file, for this I Use:\r\n\r\n`ftpClient.storeFile(file.getName(), fis);`\r\n\r\nThis return false and the message: `501 Server cannot accept argument.`\r\n\r\n\r\nI am grateful for any support that the community can give me with this issue.\r\n\r\nThanks\r\n\r\n&lt;b&gt;This is the Code snippet that I use:&lt;/b&gt;\r\n\r\n    \r\n    FTPSClient ftpClient = new FTPSClient(&quot;SSL&quot;,true);`\r\n    try {\r\n      FTPClientConfig  conf=newFTPClientConfig(FTPClientConfig.SYST_NT);  \r\n      ftpClient.configure(conf); \r\n      ftpClient.connect(host,port); \r\n      ftpClient.login(user, pass); \r\n      System.out.println(&quot;Connected?: &quot;+ftpClient.isConnected());\r\n      ftpClient.enterLocalPassiveMode();\r\n      String path = carpetaLocal;\r\n      File directorio = new File(path);\r\n      File[] ficheros = directorio.listFiles();\r\n    for (int i = 0; i &lt; ficheros.length; i++) {\r\n      File file = (ficheros[i]);\r\n      FileInputStream fis = new FileInputStream(file);\r\n      Client.setFileType(FTPClient.BINARY_FILE_TYPE);\r\n      ftpClient.enterLocalActiveMode();\r\n      boolean res = ftpClient.storeFile(file.getName(), fis);\r\n      System.out.println(&quot;File Upload Successful?: &quot; + res);\r\n     }\r\n     ftpClient.disconnect();\r\n     System.out.println(&quot;Connected?: &quot; +ftpClient.isConnected());     \r\n    } catch (IOException ex) {\r\n        ex.printStackTrace();\r\n        System.exit(1);\r\n      }\r\n     \r\n\r\n\r\n\r\n","title":"Problem Uploading File Using FTPS Protocol","body":"<p>I'm try to upload file using FTPS.</p>\n<p>Currently I use the library <code>org.apache.commons.net.ftp.FTPSClient;</code></p>\n<p>This is part of code that I use:</p>\n<p><code>FTPSClient ftpClient = new FTPSClient(&quot;SSL&quot;, true); ftpClient.connect(host, port); ftpClient.login(user, password);  </code>\nAnd I check the connection using:\n<code>ftpClient.isConnected()</code></p>\n<p>This return a boolean value, when is ok return: true</p>\n<p>The problem is when try to upload a file, for this I Use:</p>\n<p><code>ftpClient.storeFile(file.getName(), fis);</code></p>\n<p>This return false and the message: <code>501 Server cannot accept argument.</code></p>\n<p>I am grateful for any support that the community can give me with this issue.</p>\n<p>Thanks</p>\n<p><b>This is the Code snippet that I use:</b></p>\n<pre><code>FTPSClient ftpClient = new FTPSClient(&quot;SSL&quot;,true);`\ntry {\n  FTPClientConfig  conf=newFTPClientConfig(FTPClientConfig.SYST_NT);  \n  ftpClient.configure(conf); \n  ftpClient.connect(host,port); \n  ftpClient.login(user, pass); \n  System.out.println(&quot;Connected?: &quot;+ftpClient.isConnected());\n  ftpClient.enterLocalPassiveMode();\n  String path = carpetaLocal;\n  File directorio = new File(path);\n  File[] ficheros = directorio.listFiles();\nfor (int i = 0; i &lt; ficheros.length; i++) {\n  File file = (ficheros[i]);\n  FileInputStream fis = new FileInputStream(file);\n  Client.setFileType(FTPClient.BINARY_FILE_TYPE);\n  ftpClient.enterLocalActiveMode();\n  boolean res = ftpClient.storeFile(file.getName(), fis);\n  System.out.println(&quot;File Upload Successful?: &quot; + res);\n }\n ftpClient.disconnect();\n System.out.println(&quot;Connected?: &quot; +ftpClient.isConnected());     \n} catch (IOException ex) {\n    ex.printStackTrace();\n    System.exit(1);\n  }\n \n</code></pre>\n"},{"tags":["java","tomcat","servlets","servlet-3.0","security-constraint"],"comments":[{"owner":{"account_id":2793174,"reputation":3237,"user_id":2403000,"accept_rate":74,"display_name":"Peter"},"score":0,"creation_date":1672920865,"post_id":74996426,"comment_id":132384135,"body_markdown":"What have you tried already?","body":"What have you tried already?"},{"owner":{"account_id":27423117,"reputation":1,"user_id":20921161,"display_name":"Domenico Russo"},"score":0,"creation_date":1673256992,"post_id":74996426,"comment_id":132449264,"body_markdown":"I tried to follow the answers of the question mentioned above and also to include various undertow libraries in the pom.xml but since Tomcat is my application server I only got an error","body":"I tried to follow the answers of the question mentioned above and also to include various undertow libraries in the pom.xml but since Tomcat is my application server I only got an error"}],"owner":{"account_id":27423117,"reputation":1,"user_id":20921161,"display_name":"Domenico Russo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672765463,"creation_date":1672765463,"question_id":74996426,"body_markdown":"I ask help for a question similar to &quot;UPDATE&quot; section in this question https://stackoverflow.com/questions/19297796/how-to-programmatically-setup-a-security-constraint-in-servlets-3-x ...\r\n\r\nI want to set programmatically, in a java class, some web.xml tags. In particular i have to define this snippt in a separate java class:\r\n\r\n\r\n```\r\n\t&lt;security-constraint&gt;\r\n\t\t&lt;web-resource-collection&gt;\r\n\t\t\t&lt;web-resource-name&gt;Application detail&lt;/web-resource-name&gt;\r\n\t\t\t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n\t\t&lt;/web-resource-collection&gt;\r\n\t\t&lt;auth-constraint&gt;\r\n\t\t\t&lt;role-name&gt;*&lt;/role-name&gt;\r\n\t\t&lt;/auth-constraint&gt;\r\n\t&lt;/security-constraint&gt;\r\n\t&lt;security-role&gt;\r\n\t\t&lt;role-name&gt;*&lt;/role-name&gt;\r\n\t&lt;/security-role&gt;\r\n\t&lt;login-config&gt;\r\n\t\t&lt;auth-method&gt;OIDC&lt;/auth-method&gt;\r\n\t&lt;/login-config&gt;\r\n```\r\n\r\n\r\nThank you!\r\n\r\n------------------------------------------------------","title":"&lt;security-constraint&gt; programmatically Tomcat","body":"<p>I ask help for a question similar to &quot;UPDATE&quot; section in this question <a href=\"https://stackoverflow.com/questions/19297796/how-to-programmatically-setup-a-security-constraint-in-servlets-3-x\">How to programmatically setup a &lt;security-constraint&gt; in Servlets 3.x?</a> ...</p>\n<p>I want to set programmatically, in a java class, some web.xml tags. In particular i have to define this snippt in a separate java class:</p>\n<pre><code>    &lt;security-constraint&gt;\n        &lt;web-resource-collection&gt;\n            &lt;web-resource-name&gt;Application detail&lt;/web-resource-name&gt;\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n        &lt;/web-resource-collection&gt;\n        &lt;auth-constraint&gt;\n            &lt;role-name&gt;*&lt;/role-name&gt;\n        &lt;/auth-constraint&gt;\n    &lt;/security-constraint&gt;\n    &lt;security-role&gt;\n        &lt;role-name&gt;*&lt;/role-name&gt;\n    &lt;/security-role&gt;\n    &lt;login-config&gt;\n        &lt;auth-method&gt;OIDC&lt;/auth-method&gt;\n    &lt;/login-config&gt;\n</code></pre>\n<p>Thank you!</p>\n<hr />\n"},{"tags":["java","selenium-webdriver"],"owner":{"account_id":27421834,"reputation":1,"user_id":20920135,"display_name":"Kanchan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672765129,"creation_date":1672757398,"question_id":74994949,"body_markdown":"I am using selenium 3, for testing purpose i want ID which will display in. &#39;Response&#39; tab under network in developer tool,\r\nI am not getting any code to perform this action.\r\n\r\n[Image response tab][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/shp6W.jpg","title":"I want java selenium code to get the value from response tab under network in dev tools","body":"<p>I am using selenium 3, for testing purpose i want ID which will display in. 'Response' tab under network in developer tool,\nI am not getting any code to perform this action.</p>\n<p><a href=\"https://i.stack.imgur.com/shp6W.jpg\" rel=\"nofollow noreferrer\">Image response tab</a></p>\n"},{"tags":["java","spring-boot","quartz-scheduler"],"answers":[{"tags":[],"owner":{"account_id":13325595,"reputation":146,"user_id":9618632,"display_name":"sdman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672764988,"creation_date":1672764988,"answer_id":74996337,"question_id":74761362,"body_markdown":"You are setting trigger&#39;s expire time correctly using `TriggerBuilder.endAt()`\r\n\r\n&gt; And I shutdown the application right after it creates job and trigger.\r\n&gt; But when I startup again it runs expired trigger, even if the time has\r\n&gt; passed in table qrtz_triggers.end_time.\r\n\r\nThis happens because on restart quartz checks for misfired triggers and try to rerun those based on the configured mirefire instruction which in your case is `withMisfireHandlingInstructionFireNow`. Now the thing is that this particluar instruction does not consider the trigger&#39;s endAt() time and always set a new `nextFireTime` and rerun it.\r\n\r\nFor your case, there are other misfire instructions that you may want to consider like `withMisfireHandlingInstructionNowWithExistingCount` ","title":"How to configure trigger&#39;s expiration date","body":"<p>You are setting trigger's expire time correctly using <code>TriggerBuilder.endAt()</code></p>\n<blockquote>\n<p>And I shutdown the application right after it creates job and trigger.\nBut when I startup again it runs expired trigger, even if the time has\npassed in table qrtz_triggers.end_time.</p>\n</blockquote>\n<p>This happens because on restart quartz checks for misfired triggers and try to rerun those based on the configured mirefire instruction which in your case is <code>withMisfireHandlingInstructionFireNow</code>. Now the thing is that this particluar instruction does not consider the trigger's endAt() time and always set a new <code>nextFireTime</code> and rerun it.</p>\n<p>For your case, there are other misfire instructions that you may want to consider like <code>withMisfireHandlingInstructionNowWithExistingCount</code></p>\n"}],"owner":{"account_id":15846752,"reputation":41,"user_id":11433847,"display_name":"Almat Rakhmetolla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672764988,"creation_date":1670766366,"question_id":74761362,"body_markdown":"I have next JobSchedulerService:\r\n    \r\n    @Slf4j\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class QuartzServiceImpl implements JobSchedulerService {\r\n    \r\n        private final SchedulerFactoryBean schedulerFactoryBean;\r\n    \r\n        @Override\r\n        public void scheduleJob(LocalDateTime date, Class jobClass, boolean repeatUntilManuallyStopped, Map&lt;String, Object&gt; jobDataMap) {\r\n            String expirationDate = date.toString();\r\n            String name = jobClass.getName() + &quot;_&quot;;;\r\n            JobDetail jobDetail = JobBuilder.newJob(jobClass).withIdentity(name + expirationDate)\r\n                    .storeDurably().build();\r\n    \r\n            if(jobDataMap != null){\r\n                jobDetail.getJobDataMap().putAll(jobDataMap);\r\n            }\r\n            jobDetail.getJobDataMap().put(&quot;expirationDate&quot;, expirationDate);\r\n    \r\n            ZonedDateTime zonedDateTime = date.atZone(ZoneId.systemDefault());\r\n            SimpleTrigger trigger = TriggerBuilder.newTrigger().withIdentity(name + expirationDate)\r\n                    .startAt(Date.from(zonedDateTime.toInstant()))\r\n                    .endAt(Date.from(zonedDateTime.plusMinutes(2).toInstant()))\r\n                    .withSchedule(repeatUntilManuallyStopped ?\r\n                            SimpleScheduleBuilder.repeatMinutelyForever().withMisfireHandlingInstructionFireNow() : SimpleScheduleBuilder.simpleSchedule().withMisfireHandlingInstructionFireNow())\r\n                    .build();\r\n            \r\n            schedule(jobDetail, trigger, false);\r\n        }\r\n    \r\n        @Override\r\n        public void scheduleJob(LocalDateTime date, int intervalInMinutes, int count, Class jobClass,  Map&lt;String, Object&gt; jobDataMap) {\r\n            String expirationDate = date.toString();\r\n            String name = jobClass.getName() + &quot;_&quot;;\r\n            JobDetail jobDetail = JobBuilder.newJob(jobClass).withIdentity(name + expirationDate)\r\n                    .storeDurably().build();\r\n    \r\n            jobDetail.getJobDataMap().putAll(jobDataMap);\r\n            jobDetail.getJobDataMap().put(&quot;expirationDate&quot;, expirationDate);\r\n    \r\n            LocalDateTime currentTime = LocalDateTime.now();\r\n            LocalDateTime startDateTime = date;\r\n    \r\n            int decrement = count;\r\n    \r\n            while (decrement != 0) {\r\n                startDateTime = startDateTime.minusMinutes(intervalInMinutes);\r\n                decrement --;\r\n                if(currentTime.compareTo(startDateTime) &gt;= 0) {\r\n                    startDateTime = currentTime;\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            SimpleTrigger trigger = TriggerBuilder.newTrigger().withIdentity(name + expirationDate)\r\n                    .startAt(Date.from(startDateTime.atZone(ZoneId.systemDefault()).toInstant()))\r\n                    .withSchedule(SimpleScheduleBuilder.repeatMinutelyForTotalCount(count - decrement, intervalInMinutes)\r\n                            .withMisfireHandlingInstructionFireNow())\r\n                    .build();\r\n    \r\n            schedule(jobDetail, trigger, false);\r\n        }\r\n    \r\n        public Date schedule(JobDetail jobDetail, SimpleTrigger trigger, boolean isUnique) {\r\n            Scheduler scheduler = schedulerFactoryBean.getScheduler();\r\n    \r\n            try {\r\n                boolean alreadyExists = scheduler.checkExists(jobDetail.getKey());\r\n    \r\n                if(isUnique &amp;&amp; alreadyExists) {\r\n                    throw new ApiException(ApiError.RESOURCE_EXISTS);\r\n                } else if(!alreadyExists){\r\n                    Date date = scheduler.scheduleJob(jobDetail, trigger);\r\n                    scheduler.start();\r\n                    return date;\r\n                } else {\r\n                    return trigger.getStartTime();\r\n                }\r\n            } catch (ObjectAlreadyExistsException e) {\r\n                if(isUnique) {\r\n                    ExceptionTracker.captureException(e);\r\n                    log.error(&quot;Could not schedule job with key {} and description {}. Job already exists&quot;, jobDetail.getKey().getName(), jobDetail.getDescription());\r\n                    throw new ApiException(ApiError.INTERNAL_SERVER_ERROR);\r\n                } else {\r\n                    return trigger.getStartTime();\r\n                }\r\n            } catch (Exception e){\r\n                ExceptionTracker.captureException(e);\r\n                log.error(&quot;Could not schedule job with key {} and description {}. Localized message =&gt; {}&quot;, jobDetail.getKey().getName(), jobDetail.getDescription(), e.getLocalizedMessage());\r\n                throw new ApiException(ApiError.INTERNAL_SERVER_ERROR);\r\n            }\r\n        }\r\n    }\r\n\r\nHere I am setting time for expiration after 2 minutes\r\n\r\n&gt; .endAt(Date.from(zonedDateTime.plusMinutes(2).toInstant()))\r\n\r\nAnd I shutdown the application right after it creates job and trigger. But when I startup again it runs expired trigger, even if the time has passed in table *qrtz_triggers.end_time*.\r\n\r\nMy properties file for Quartz:\r\n\r\n    org.quartz.scheduler.instanceName=PostcreditService\r\n    org.quartz.scheduler.instanceId=AUTO\r\n    org.quartz.threadPool.threadCount=5\r\n    org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTX\r\n    org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\r\n    org.quartz.jobStore.useProperties=true\r\n    org.quartz.jobStore.misfireThreshold=60000\r\n    org.quartz.jobStore.tablePrefix=postcredit.qrtz_\r\n    org.quartz.jobStore.isClustered=true\r\n    org.quartz.plugin.shutdownHook.class=org.quartz.plugins.management.ShutdownHookPlugin\r\n    org.quartz.plugin.shutdownHook.cleanShutdown=TRUE\r\n\r\nConfigs:\r\n    \r\n    @Configuration\r\n    public class QuartzConfig {\r\n    \r\n        @Autowired\r\n        private ApplicationContext applicationContext;\r\n    \r\n        @Autowired\r\n        private DataSource dataSource;\r\n    \r\n        @Bean\r\n        public JobFactory jobFactory() {\r\n            AutowiringSpringBeanJobFactory jobFactory = new AutowiringSpringBeanJobFactory();\r\n            jobFactory.setApplicationContext(applicationContext);\r\n            return jobFactory;\r\n        }\r\n    \r\n        @Bean\r\n        public SchedulerFactoryBean schedulerFactoryBean() throws IOException {\r\n    \r\n            SchedulerFactoryBean schedulerFactory = new SchedulerFactoryBean();\r\n            schedulerFactory.setQuartzProperties(quartzProperties());\r\n            schedulerFactory.setWaitForJobsToCompleteOnShutdown(true);\r\n            schedulerFactory.setAutoStartup(true);\r\n            schedulerFactory.setJobFactory(jobFactory());\r\n            schedulerFactory.setDataSource(dataSource);\r\n            return schedulerFactory;\r\n        }\r\n    \r\n        public Properties quartzProperties() throws IOException {\r\n            PropertiesFactoryBean propertiesFactoryBean = new PropertiesFactoryBean();\r\n            propertiesFactoryBean.setLocation(new ClassPathResource(&quot;/quartz.properties&quot;));\r\n            propertiesFactoryBean.afterPropertiesSet();\r\n            return propertiesFactoryBean.getObject();\r\n        }\r\n    \r\n    }\r\n\r\nPlease, help!","title":"How to configure trigger&#39;s expiration date","body":"<p>I have next JobSchedulerService:</p>\n<pre><code>@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class QuartzServiceImpl implements JobSchedulerService {\n\n    private final SchedulerFactoryBean schedulerFactoryBean;\n\n    @Override\n    public void scheduleJob(LocalDateTime date, Class jobClass, boolean repeatUntilManuallyStopped, Map&lt;String, Object&gt; jobDataMap) {\n        String expirationDate = date.toString();\n        String name = jobClass.getName() + &quot;_&quot;;;\n        JobDetail jobDetail = JobBuilder.newJob(jobClass).withIdentity(name + expirationDate)\n                .storeDurably().build();\n\n        if(jobDataMap != null){\n            jobDetail.getJobDataMap().putAll(jobDataMap);\n        }\n        jobDetail.getJobDataMap().put(&quot;expirationDate&quot;, expirationDate);\n\n        ZonedDateTime zonedDateTime = date.atZone(ZoneId.systemDefault());\n        SimpleTrigger trigger = TriggerBuilder.newTrigger().withIdentity(name + expirationDate)\n                .startAt(Date.from(zonedDateTime.toInstant()))\n                .endAt(Date.from(zonedDateTime.plusMinutes(2).toInstant()))\n                .withSchedule(repeatUntilManuallyStopped ?\n                        SimpleScheduleBuilder.repeatMinutelyForever().withMisfireHandlingInstructionFireNow() : SimpleScheduleBuilder.simpleSchedule().withMisfireHandlingInstructionFireNow())\n                .build();\n        \n        schedule(jobDetail, trigger, false);\n    }\n\n    @Override\n    public void scheduleJob(LocalDateTime date, int intervalInMinutes, int count, Class jobClass,  Map&lt;String, Object&gt; jobDataMap) {\n        String expirationDate = date.toString();\n        String name = jobClass.getName() + &quot;_&quot;;\n        JobDetail jobDetail = JobBuilder.newJob(jobClass).withIdentity(name + expirationDate)\n                .storeDurably().build();\n\n        jobDetail.getJobDataMap().putAll(jobDataMap);\n        jobDetail.getJobDataMap().put(&quot;expirationDate&quot;, expirationDate);\n\n        LocalDateTime currentTime = LocalDateTime.now();\n        LocalDateTime startDateTime = date;\n\n        int decrement = count;\n\n        while (decrement != 0) {\n            startDateTime = startDateTime.minusMinutes(intervalInMinutes);\n            decrement --;\n            if(currentTime.compareTo(startDateTime) &gt;= 0) {\n                startDateTime = currentTime;\n                break;\n            }\n        }\n\n        SimpleTrigger trigger = TriggerBuilder.newTrigger().withIdentity(name + expirationDate)\n                .startAt(Date.from(startDateTime.atZone(ZoneId.systemDefault()).toInstant()))\n                .withSchedule(SimpleScheduleBuilder.repeatMinutelyForTotalCount(count - decrement, intervalInMinutes)\n                        .withMisfireHandlingInstructionFireNow())\n                .build();\n\n        schedule(jobDetail, trigger, false);\n    }\n\n    public Date schedule(JobDetail jobDetail, SimpleTrigger trigger, boolean isUnique) {\n        Scheduler scheduler = schedulerFactoryBean.getScheduler();\n\n        try {\n            boolean alreadyExists = scheduler.checkExists(jobDetail.getKey());\n\n            if(isUnique &amp;&amp; alreadyExists) {\n                throw new ApiException(ApiError.RESOURCE_EXISTS);\n            } else if(!alreadyExists){\n                Date date = scheduler.scheduleJob(jobDetail, trigger);\n                scheduler.start();\n                return date;\n            } else {\n                return trigger.getStartTime();\n            }\n        } catch (ObjectAlreadyExistsException e) {\n            if(isUnique) {\n                ExceptionTracker.captureException(e);\n                log.error(&quot;Could not schedule job with key {} and description {}. Job already exists&quot;, jobDetail.getKey().getName(), jobDetail.getDescription());\n                throw new ApiException(ApiError.INTERNAL_SERVER_ERROR);\n            } else {\n                return trigger.getStartTime();\n            }\n        } catch (Exception e){\n            ExceptionTracker.captureException(e);\n            log.error(&quot;Could not schedule job with key {} and description {}. Localized message =&gt; {}&quot;, jobDetail.getKey().getName(), jobDetail.getDescription(), e.getLocalizedMessage());\n            throw new ApiException(ApiError.INTERNAL_SERVER_ERROR);\n        }\n    }\n}\n</code></pre>\n<p>Here I am setting time for expiration after 2 minutes</p>\n<blockquote>\n<p>.endAt(Date.from(zonedDateTime.plusMinutes(2).toInstant()))</p>\n</blockquote>\n<p>And I shutdown the application right after it creates job and trigger. But when I startup again it runs expired trigger, even if the time has passed in table <em>qrtz_triggers.end_time</em>.</p>\n<p>My properties file for Quartz:</p>\n<pre><code>org.quartz.scheduler.instanceName=PostcreditService\norg.quartz.scheduler.instanceId=AUTO\norg.quartz.threadPool.threadCount=5\norg.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTX\norg.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\norg.quartz.jobStore.useProperties=true\norg.quartz.jobStore.misfireThreshold=60000\norg.quartz.jobStore.tablePrefix=postcredit.qrtz_\norg.quartz.jobStore.isClustered=true\norg.quartz.plugin.shutdownHook.class=org.quartz.plugins.management.ShutdownHookPlugin\norg.quartz.plugin.shutdownHook.cleanShutdown=TRUE\n</code></pre>\n<p>Configs:</p>\n<pre><code>@Configuration\npublic class QuartzConfig {\n\n    @Autowired\n    private ApplicationContext applicationContext;\n\n    @Autowired\n    private DataSource dataSource;\n\n    @Bean\n    public JobFactory jobFactory() {\n        AutowiringSpringBeanJobFactory jobFactory = new AutowiringSpringBeanJobFactory();\n        jobFactory.setApplicationContext(applicationContext);\n        return jobFactory;\n    }\n\n    @Bean\n    public SchedulerFactoryBean schedulerFactoryBean() throws IOException {\n\n        SchedulerFactoryBean schedulerFactory = new SchedulerFactoryBean();\n        schedulerFactory.setQuartzProperties(quartzProperties());\n        schedulerFactory.setWaitForJobsToCompleteOnShutdown(true);\n        schedulerFactory.setAutoStartup(true);\n        schedulerFactory.setJobFactory(jobFactory());\n        schedulerFactory.setDataSource(dataSource);\n        return schedulerFactory;\n    }\n\n    public Properties quartzProperties() throws IOException {\n        PropertiesFactoryBean propertiesFactoryBean = new PropertiesFactoryBean();\n        propertiesFactoryBean.setLocation(new ClassPathResource(&quot;/quartz.properties&quot;));\n        propertiesFactoryBean.afterPropertiesSet();\n        return propertiesFactoryBean.getObject();\n    }\n\n}\n</code></pre>\n<p>Please, help!</p>\n"},{"tags":["java","eclipse","maven","intellij-idea"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1643210521,"post_id":70865584,"comment_id":125279589,"body_markdown":"As far as I know. No. The question is why does Maven needs a truststore explicit?","body":"As far as I know. No. The question is why does Maven needs a truststore explicit?"},{"owner":{"account_id":5758031,"reputation":93,"user_id":4545277,"display_name":"Alfira"},"score":0,"creation_date":1643211041,"post_id":70865584,"comment_id":125279820,"body_markdown":"@khmarbaise if I understand you correctly, in our infrastructure we have our own Nexus repository with ssl. By default the jdk doesn&#39;t trust it, so we need to provide this certificate to the jdk somehow. Certificate import into cacert of jdk works fine. But this requires administrator rights, which are limited. So I can&#39;t install the jdk and I can&#39;t import the certificate. I can only manage my env as a disenfranchised user.","body":"@khmarbaise if I understand you correctly, in our infrastructure we have our own Nexus repository with ssl. By default the jdk doesn&#39;t trust it, so we need to provide this certificate to the jdk somehow. Certificate import into cacert of jdk works fine. But this requires administrator rights, which are limited. So I can&#39;t install the jdk and I can&#39;t import the certificate. I can only manage my env as a disenfranchised user."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1643212079,"post_id":70865584,"comment_id":125280308,"body_markdown":"Hm..sounds strange. Don&#39;t getting a working access to your repository.. makes no sense. If you need a special certificate it should be offered by the it department to get you on working...I could understand having credentials for a repository manager but using a different certificate ... Hm.. yes I know TLS but that can be handled different but a different story. I would let that done once by an admin ...","body":"Hm..sounds strange. Don&#39;t getting a working access to your repository.. makes no sense. If you need a special certificate it should be offered by the it department to get you on working...I could understand having credentials for a repository manager but using a different certificate ... Hm.. yes I know TLS but that can be handled different but a different story. I would let that done once by an admin ..."},{"owner":{"account_id":5758031,"reputation":93,"user_id":4545277,"display_name":"Alfira"},"score":1,"creation_date":1643212450,"post_id":70865584,"comment_id":125280510,"body_markdown":"Thank you. That was the last option which I was going to try. Seems now it&#39;s right time to talk to DevOps.","body":"Thank you. That was the last option which I was going to try. Seems now it&#39;s right time to talk to DevOps."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1643212708,"post_id":70865584,"comment_id":125280638,"body_markdown":"Yes I would do so..otherwise your life becomes not easy... That should be done once.. afterwards you can remove those supplemental configurations.","body":"Yes I would do so..otherwise your life becomes not easy... That should be done once.. afterwards you can remove those supplemental configurations."}],"answers":[{"tags":[],"owner":{"account_id":95465,"reputation":1155,"user_id":259988,"display_name":"Francois Marot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672764575,"creation_date":1672764575,"answer_id":74996262,"question_id":70865584,"body_markdown":"It may help you despite not answering the question directly: if your IT has distributed the certificates on your windows computer but Java does not see them and forces you to use a specific jks file, an alternative may be to define this env variable:\r\n\r\n    JAVA_TOOL_OPTIONS=-Djavax.net.ssl.trustStoreType=Windows-ROOT\r\n\r\nif your windows is configured with the certs, it will allow Java to access it without a specific aditional file.\r\n","title":"Does Eclipse IDE support Maven configs from .mvn folder like jvm.config per project?","body":"<p>It may help you despite not answering the question directly: if your IT has distributed the certificates on your windows computer but Java does not see them and forces you to use a specific jks file, an alternative may be to define this env variable:</p>\n<pre><code>JAVA_TOOL_OPTIONS=-Djavax.net.ssl.trustStoreType=Windows-ROOT\n</code></pre>\n<p>if your windows is configured with the certs, it will allow Java to access it without a specific aditional file.</p>\n"}],"owner":{"account_id":5758031,"reputation":93,"user_id":4545277,"display_name":"Alfira"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672764575,"creation_date":1643209426,"question_id":70865584,"body_markdown":"I have a Maven project in Eclipse IDE. In the root of this maven project there is `.mvn` folder with `jvm.config` file (supported in Maven 3.3.1+). This file contains SSL truststore and password\r\n```\r\n-Djavax.net.ssl.trustStore=&quot;C:/certificates/cert.jks&quot;\r\n-Djavax.net.ssl.trustStorePassword=***\r\n```\r\nCertificate exists in the mentioned directory. I have settings.xml file in my `userhome/.m2` folder. Eclipse configured to use external Maven installation (excluding dependency resolution, because Eclipse IDE uses embedded Maven for that forcibly). Everything has been configured properly.\r\n\r\n1. When I run `mvn clean package` from command line, then it works fine - all dependencies are downloaded from company Nexus repo and remote repositories.\r\n2. If I import certificate into the installed JDK, then again it works. (assume `.mvn` is missing in the project root)\r\n3. If I import certificate into Eclipse JDK plugin, then it works. (assume `.mvn` is missing in the project root)\r\n3. If I provide `trustStore` and password in command line like below, then again it works. (assume `.mvn` is missing in the project root)\r\n\r\n```\r\nmvn -Djavax.net.ssl.trustStore=&quot;C:/certificates/cert.jks -Djavax.net.ssl.trustStorePassword=*** clean package\r\n```\r\n4. If I import this Maven project into IntelliJ IDEA, then again it works. (with `.mvn` folder and `jvm.config` file)\r\n\r\nI have many workarounds, but want to know exactly about `.mvn` with nested configs. How to configure Eclipse IDE (or Eclipse Maven plugin) to use that `.mvn` folder with all nested configs  for successful dependency resolution?\r\n\r\nTested this with\r\n- Eclipse IDE for Java Developers (includes Incubating components); Version: 2021-09 (4.21.0); Build id: 20210910-1417.\r\n- IntelliJ IDEA 2021.3.1 (Community Edition); Build #IC-213.6461.79, built on December 28, 2021; Runtime version: 11.0.13+7-b1751.21 amd64; VM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\r\n- jdk8u312-b07 (from Eclipse Temurin)\r\n- jdk-17.0.1 (from Oracle)\r\n- apache-maven-3.8.3\r\n- apache-maven-3.8.1\r\n- Window 10, x64","title":"Does Eclipse IDE support Maven configs from .mvn folder like jvm.config per project?","body":"<p>I have a Maven project in Eclipse IDE. In the root of this maven project there is <code>.mvn</code> folder with <code>jvm.config</code> file (supported in Maven 3.3.1+). This file contains SSL truststore and password</p>\n<pre><code>-Djavax.net.ssl.trustStore=&quot;C:/certificates/cert.jks&quot;\n-Djavax.net.ssl.trustStorePassword=***\n</code></pre>\n<p>Certificate exists in the mentioned directory. I have settings.xml file in my <code>userhome/.m2</code> folder. Eclipse configured to use external Maven installation (excluding dependency resolution, because Eclipse IDE uses embedded Maven for that forcibly). Everything has been configured properly.</p>\n<ol>\n<li>When I run <code>mvn clean package</code> from command line, then it works fine - all dependencies are downloaded from company Nexus repo and remote repositories.</li>\n<li>If I import certificate into the installed JDK, then again it works. (assume <code>.mvn</code> is missing in the project root)</li>\n<li>If I import certificate into Eclipse JDK plugin, then it works. (assume <code>.mvn</code> is missing in the project root)</li>\n<li>If I provide <code>trustStore</code> and password in command line like below, then again it works. (assume <code>.mvn</code> is missing in the project root)</li>\n</ol>\n<pre><code>mvn -Djavax.net.ssl.trustStore=&quot;C:/certificates/cert.jks -Djavax.net.ssl.trustStorePassword=*** clean package\n</code></pre>\n<ol start=\"4\">\n<li>If I import this Maven project into IntelliJ IDEA, then again it works. (with <code>.mvn</code> folder and <code>jvm.config</code> file)</li>\n</ol>\n<p>I have many workarounds, but want to know exactly about <code>.mvn</code> with nested configs. How to configure Eclipse IDE (or Eclipse Maven plugin) to use that <code>.mvn</code> folder with all nested configs  for successful dependency resolution?</p>\n<p>Tested this with</p>\n<ul>\n<li>Eclipse IDE for Java Developers (includes Incubating components); Version: 2021-09 (4.21.0); Build id: 20210910-1417.</li>\n<li>IntelliJ IDEA 2021.3.1 (Community Edition); Build #IC-213.6461.79, built on December 28, 2021; Runtime version: 11.0.13+7-b1751.21 amd64; VM: OpenJDK 64-Bit Server VM by JetBrains s.r.o</li>\n<li>jdk8u312-b07 (from Eclipse Temurin)</li>\n<li>jdk-17.0.1 (from Oracle)</li>\n<li>apache-maven-3.8.3</li>\n<li>apache-maven-3.8.1</li>\n<li>Window 10, x64</li>\n</ul>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":18207211,"reputation":134,"user_id":13250408,"display_name":"Ledrake"},"score":0,"creation_date":1672756351,"post_id":74994647,"comment_id":132343089,"body_markdown":"still bad credentials","body":"still bad credentials"},{"owner":{"account_id":18207211,"reputation":134,"user_id":13250408,"display_name":"Ledrake"},"score":0,"creation_date":1672757217,"post_id":74994647,"comment_id":132343380,"body_markdown":"i tried it with a user without any whitespaces , same problem , also the spring security debug just show the request headers , not a username sent or password, so how can it be if use?","body":"i tried it with a user without any whitespaces , same problem , also the spring security debug just show the request headers , not a username sent or password, so how can it be if use?"},{"owner":{"account_id":4343264,"reputation":286,"user_id":3545990,"display_name":"Herman Komashko"},"score":0,"creation_date":1672759488,"post_id":74994647,"comment_id":132344150,"body_markdown":"Have you tried removing password encoding and checking if the originally encoded password version actually equals the encoded password you entered in the UI?","body":"Have you tried removing password encoding and checking if the originally encoded password version actually equals the encoded password you entered in the UI?"},{"owner":{"account_id":1074107,"reputation":238,"user_id":1072625,"display_name":"Neeraj"},"score":0,"creation_date":1672765564,"post_id":74994647,"comment_id":132346186,"body_markdown":"In your above set up there are no authorities defined for the user, spring security treats a user with no authority as not found.. see the snippet from spring security class JdbcDaoImpl -     \n\naddCustomAuthorities(user.getUsername(), dbAuths);\n\t\tif (dbAuths.size() == 0) {\n\t\t\tthis.logger.debug(&quot;User &#39;&quot; + username + &quot;&#39; has no authorities and will be treated as &#39;not found&#39;&quot;);\n\t\t\tthrow new UsernameNotFoundException(this.messages.getMessage(&quot;JdbcDaoImpl.noAuthority&quot;,new Object[] { username }, &quot;User {0} has no GrantedAuthority&quot;));\n\t\t}","body":"In your above set up there are no authorities defined for the user, spring security treats a user with no authority as not found.. see the snippet from spring security class JdbcDaoImpl -       addCustomAuthorities(user.getUsername(), dbAuths); \t\tif (dbAuths.size() == 0) { \t\t\tthis.logger.debug(&quot;User &#39;&quot; + username + &quot;&#39; has no authorities and will be treated as &#39;not found&#39;&quot;); \t\t\tthrow new UsernameNotFoundException(this.messages.getMessage(&quot;JdbcDaoI&zwnj;&#8203;mpl.noAuthority&quot;,new Object[] { username }, &quot;User {0} has no GrantedAuthority&quot;)); \t\t}"}],"answers":[{"tags":[],"owner":{"account_id":18207211,"reputation":134,"user_id":13250408,"display_name":"Ledrake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672764405,"creation_date":1672764405,"answer_id":74996225,"question_id":74994647,"body_markdown":"I fixed the problem by making a custom userdetails \r\n\r\n```java\r\npublic class CustomUserDetails implements UserDetails\r\n{\r\n    private User user;\r\n    \r\n    public CustomUserDetails(User user)\r\n    {\r\n        this.user = user;\r\n    }\r\n    \r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities()\r\n    {\r\n        return null;\r\n    }\r\n    \r\n    @Override\r\n    public String getPassword()\r\n    {\r\n        return user.getPassword();\r\n    }\r\n    \r\n    @Override\r\n    public String getUsername()\r\n    {\r\n        return user.getUsername();\r\n    }\r\n    \r\n    @Override\r\n    public boolean isAccountNonExpired()\r\n    {\r\n        return true;\r\n    }\r\n    \r\n    @Override\r\n    public boolean isAccountNonLocked()\r\n    {\r\n        return true;\r\n    }\r\n    \r\n    @Override\r\n    public boolean isCredentialsNonExpired()\r\n    {\r\n        return true;\r\n    }\r\n    \r\n    @Override\r\n    public boolean isEnabled()\r\n    {\r\n        return true;\r\n    }\r\n}\r\n\r\n```\r\n\r\nand a userdetailservice\r\n\r\n```java\r\n\r\n@Service\r\npublic class UserDetailsService implements org.springframework.security.core.userdetails.UserDetailsService\r\n{\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    \r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException\r\n    {\r\n        User user =  userRepository.findByUsername(username);\r\n        if (user == null)\r\n        {\r\n            throw new UsernameNotFoundException(&quot;Could not find user&quot;);\r\n        }\r\n        \r\n        return new CustomUserDetails(user);\r\n    }\r\n}\r\n```\r\n\r\nand adding it to the securityfilterchain with `.and().userDetailsService(CustomUserDetailService)`","title":"Spring Boot Security Bad Credentials even though credentials are correct","body":"<p>I fixed the problem by making a custom userdetails</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomUserDetails implements UserDetails\n{\n    private User user;\n    \n    public CustomUserDetails(User user)\n    {\n        this.user = user;\n    }\n    \n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities()\n    {\n        return null;\n    }\n    \n    @Override\n    public String getPassword()\n    {\n        return user.getPassword();\n    }\n    \n    @Override\n    public String getUsername()\n    {\n        return user.getUsername();\n    }\n    \n    @Override\n    public boolean isAccountNonExpired()\n    {\n        return true;\n    }\n    \n    @Override\n    public boolean isAccountNonLocked()\n    {\n        return true;\n    }\n    \n    @Override\n    public boolean isCredentialsNonExpired()\n    {\n        return true;\n    }\n    \n    @Override\n    public boolean isEnabled()\n    {\n        return true;\n    }\n}\n\n</code></pre>\n<p>and a userdetailservice</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Service\npublic class UserDetailsService implements org.springframework.security.core.userdetails.UserDetailsService\n{\n    @Autowired\n    private UserRepository userRepository;\n    \n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException\n    {\n        User user =  userRepository.findByUsername(username);\n        if (user == null)\n        {\n            throw new UsernameNotFoundException(&quot;Could not find user&quot;);\n        }\n        \n        return new CustomUserDetails(user);\n    }\n}\n</code></pre>\n<p>and adding it to the securityfilterchain with <code>.and().userDetailsService(CustomUserDetailService)</code></p>\n"}],"owner":{"account_id":18207211,"reputation":134,"user_id":13250408,"display_name":"Ledrake"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":658,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672764405,"creation_date":1672755804,"question_id":74994647,"body_markdown":"I have a spring boot app with a custom user and a MySQL database, i make a post request to the user controller to add a new user with the username and password the user gets put into the database with the password encrypted just fine. But when i enter the credentials into the login form the login form returns Bad Credentials.\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig\r\n{\r\n    \r\n    @Bean\r\n    public UserDetailsService userDetailsService(DataSource dataSource)\r\n    {\r\n        return new JdbcUserDetailsManager(dataSource);\r\n    }\r\n    @Bean\r\n    SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception\r\n    {\r\n        http.authorizeHttpRequests()\r\n//                .requestMatchers(&quot;/**&quot;).permitAll()\r\n                .requestMatchers(HttpMethod.POST, &quot;/api/users&quot;).permitAll()\r\n                .and().formLogin().permitAll()\r\n                .and().logout().permitAll()\r\n                .and().cors().and().csrf().disable()\r\n                .httpBasic();\r\n        \r\n        \r\n        return http.build();\r\n    }\r\n    \r\n    @Bean\r\n    public PasswordEncoder passwordEncoder()\r\n    {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/api/users&quot;)\r\npublic class UserController\r\n{\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    \r\n    @Autowired\r\n    private PasswordEncoder passwordEncoder;\r\n    \r\n    \r\n @PostMapping()\r\n    public User insertUser(@RequestBody User user)\r\n    {\r\n        if (user.getId() != 0)\r\n        {\r\n            return null;\r\n        }\r\n        \r\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\r\n        return userRepository.save(user);\r\n    }\r\n}\r\n```\r\nalso user class for reference :\r\n```java\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User\r\n{\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n    \r\n    @NotEmpty\r\n    @Column(name = &quot;username&quot;,nullable = false,unique = true)\r\n    private String username;\r\n    \r\n    @NotEmpty\r\n    @Column(name = &quot;password&quot;,nullable = false)\r\n    private String password;\r\n    \r\n    private boolean enabled = true;\r\n    \r\n    @Column(name = &quot;email&quot;)\r\n    @Email(message = &quot;Email should be valid&quot;)\r\n    private String email;\r\n    \r\n    @Column(name = &quot;address&quot;)\r\n    private String address;\r\n    \r\n    @Column(name = &quot;AFM&quot;)\r\n    private Long AFM;\r\n    \r\n    @Column(name = &quot;phone_number&quot;)\r\n    private Long phone_number;\r\n\r\n    public User()\r\n    {\r\n    \r\n    }\r\n    \r\n    public User(String name, String email, String address, Long AFM, Long phone_number)\r\n    {\r\n        this.username = name;\r\n        this.email    = email;\r\n        this.address = address;\r\n        this.AFM = AFM;\r\n        this.phone_number = phone_number;\r\n\r\n    }\r\n    \r\n\r\n   //Getters Setters\r\n\r\n```\r\n\r\nI do a post request on /api/users with body of :\r\n```json\r\n{\r\n    &quot;username&quot;:&quot;nikos gourn&quot;,\r\n    &quot;email&quot;:&quot;nikos@gmail.com&quot;,\r\n    &quot;address&quot;:&quot;kapio allo meros&quot;,\r\n    &quot;afm&quot;:98776,\r\n    &quot;phone_number&quot;:2109017131,\r\n    &quot;password&quot;:&quot;123&quot;\r\n}\r\n```\r\nand the user is inserted into the database\r\n[![enter image description here][1]][1]\r\n\r\n\r\nnow if i go to `http://localhost:7979/login`\r\nand type in `nikos gourn` as the username and `123` as the password it gives me bad credential.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAm i doing something wrong, and who can i debug this process?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7hmQl.png\r\n  [2]: https://i.stack.imgur.com/QFZqV.png","title":"Spring Boot Security Bad Credentials even though credentials are correct","body":"<p>I have a spring boot app with a custom user and a MySQL database, i make a post request to the user controller to add a new user with the username and password the user gets put into the database with the password encrypted just fine. But when i enter the credentials into the login form the login form returns Bad Credentials.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig\n{\n    \n    @Bean\n    public UserDetailsService userDetailsService(DataSource dataSource)\n    {\n        return new JdbcUserDetailsManager(dataSource);\n    }\n    @Bean\n    SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception\n    {\n        http.authorizeHttpRequests()\n//                .requestMatchers(&quot;/**&quot;).permitAll()\n                .requestMatchers(HttpMethod.POST, &quot;/api/users&quot;).permitAll()\n                .and().formLogin().permitAll()\n                .and().logout().permitAll()\n                .and().cors().and().csrf().disable()\n                .httpBasic();\n        \n        \n        return http.build();\n    }\n    \n    @Bean\n    public PasswordEncoder passwordEncoder()\n    {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/api/users&quot;)\npublic class UserController\n{\n    @Autowired\n    private UserRepository userRepository;\n    \n    @Autowired\n    private PasswordEncoder passwordEncoder;\n    \n    \n @PostMapping()\n    public User insertUser(@RequestBody User user)\n    {\n        if (user.getId() != 0)\n        {\n            return null;\n        }\n        \n        user.setPassword(passwordEncoder.encode(user.getPassword()));\n        return userRepository.save(user);\n    }\n}\n</code></pre>\n<p>also user class for reference :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User\n{\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    \n    @NotEmpty\n    @Column(name = &quot;username&quot;,nullable = false,unique = true)\n    private String username;\n    \n    @NotEmpty\n    @Column(name = &quot;password&quot;,nullable = false)\n    private String password;\n    \n    private boolean enabled = true;\n    \n    @Column(name = &quot;email&quot;)\n    @Email(message = &quot;Email should be valid&quot;)\n    private String email;\n    \n    @Column(name = &quot;address&quot;)\n    private String address;\n    \n    @Column(name = &quot;AFM&quot;)\n    private Long AFM;\n    \n    @Column(name = &quot;phone_number&quot;)\n    private Long phone_number;\n\n    public User()\n    {\n    \n    }\n    \n    public User(String name, String email, String address, Long AFM, Long phone_number)\n    {\n        this.username = name;\n        this.email    = email;\n        this.address = address;\n        this.AFM = AFM;\n        this.phone_number = phone_number;\n\n    }\n    \n\n   //Getters Setters\n\n</code></pre>\n<p>I do a post request on /api/users with body of :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;username&quot;:&quot;nikos gourn&quot;,\n    &quot;email&quot;:&quot;nikos@gmail.com&quot;,\n    &quot;address&quot;:&quot;kapio allo meros&quot;,\n    &quot;afm&quot;:98776,\n    &quot;phone_number&quot;:2109017131,\n    &quot;password&quot;:&quot;123&quot;\n}\n</code></pre>\n<p>and the user is inserted into the database\n<a href=\"https://i.stack.imgur.com/7hmQl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7hmQl.png\" alt=\"enter image description here\" /></a></p>\n<p>now if i go to <code>http://localhost:7979/login</code>\nand type in <code>nikos gourn</code> as the username and <code>123</code> as the password it gives me bad credential.</p>\n<p><a href=\"https://i.stack.imgur.com/QFZqV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QFZqV.png\" alt=\"enter image description here\" /></a></p>\n<p>Am i doing something wrong, and who can i debug this process?</p>\n"},{"tags":["java","android","mockito","robolectric"],"answers":[{"tags":[],"owner":{"account_id":1326770,"reputation":16013,"user_id":1271435,"accept_rate":90,"display_name":"Andy Res"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1425289399,"creation_date":1425289399,"answer_id":28806607,"question_id":28806538,"body_markdown":"&gt; Can any one tell what is the difference between the two?\r\n\r\nNot sure if this is the problem, but in the first declaration you have `yesListener` and `noListener`:\r\n\r\n    alert.setPositiveButton(R.string.ok, yesListener);\r\n    alert.setNegativeButton(R.string.cancel, noListener);\r\n\r\nwhile the click listener is named `driverOkClickListener`, which appears to be unused:\r\n\r\n    private DialogInterface.OnClickListener driverOkClickListener = new DialogInterface.OnClickListener() {\r\n        public void onClick(DialogInterface dialog, int i) {\r\n            startAsyncTask();\r\n        }\r\n    };\r\n\r\nParhaps you wanted `driverOkClickListener` instead of `yesListener`?","title":"Android testing: verify onClickListener using private anonymous class","body":"<blockquote>\n  <p>Can any one tell what is the difference between the two?</p>\n</blockquote>\n\n<p>Not sure if this is the problem, but in the first declaration you have <code>yesListener</code> and <code>noListener</code>:</p>\n\n<pre><code>alert.setPositiveButton(R.string.ok, yesListener);\nalert.setNegativeButton(R.string.cancel, noListener);\n</code></pre>\n\n<p>while the click listener is named <code>driverOkClickListener</code>, which appears to be unused:</p>\n\n<pre><code>private DialogInterface.OnClickListener driverOkClickListener = new DialogInterface.OnClickListener() {\n    public void onClick(DialogInterface dialog, int i) {\n        startAsyncTask();\n    }\n};\n</code></pre>\n\n<p>Parhaps you wanted <code>driverOkClickListener</code> instead of <code>yesListener</code>?</p>\n"},{"tags":[],"owner":{"account_id":3930856,"reputation":43670,"user_id":3249477,"accept_rate":86,"display_name":"Simas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425289435,"creation_date":1425289435,"answer_id":28806623,"question_id":28806538,"body_markdown":"In your first example you don&#39;t `set` the listener to your dialog:\r\n\r\n\t\tAlertDialog.Builder alert = new AlertDialog.Builder(mContext);\r\n\t\talert.setTitle(R.string.warning_text);\r\n\t\talert.setMessage(message);\r\n\t\talert.setPositiveButton(R.string.ok, driverOkClickListener);\r\n\t\talert.setNegativeButton(R.string.cancel, driverOkClickListener);\r\n\t\talert.show();\r\n\r\n    ...\r\n\r\n\tprivate DialogInterface.OnClickListener driverOkClickListener = new DialogInterface.OnClickListener() {\r\n\t\t@Override\r\n\t\tpublic void onClick(DialogInterface dialog, int which) {\r\n\t\t\tif (which == DialogInterface.BUTTON_POSITIVE) {\r\n\t\t\t\tstartAsyncTask();\r\n\t\t\t} else {\r\n                dialogInterface.dismiss();\r\n            }\r\n\t\t}\r\n\t};","title":"Android testing: verify onClickListener using private anonymous class","body":"<p>In your first example you don't <code>set</code> the listener to your dialog:</p>\n\n<pre><code>    AlertDialog.Builder alert = new AlertDialog.Builder(mContext);\n    alert.setTitle(R.string.warning_text);\n    alert.setMessage(message);\n    alert.setPositiveButton(R.string.ok, driverOkClickListener);\n    alert.setNegativeButton(R.string.cancel, driverOkClickListener);\n    alert.show();\n\n...\n\nprivate DialogInterface.OnClickListener driverOkClickListener = new DialogInterface.OnClickListener() {\n    @Override\n    public void onClick(DialogInterface dialog, int which) {\n        if (which == DialogInterface.BUTTON_POSITIVE) {\n            startAsyncTask();\n        } else {\n            dialogInterface.dismiss();\n        }\n    }\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1108135,"reputation":1968,"user_id":1099093,"accept_rate":75,"display_name":"Sterling Duchess"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672764405,"creation_date":1672759721,"answer_id":74995379,"question_id":28806538,"body_markdown":"**Found the solution!**\r\n\r\nIn your Robolectric tests you need to call the following method after `performClick` or `callOnClick`.\r\n\r\nExample:\r\n\r\n    alertDialog.getButton(AlertDialog.BUTTON_POSITIVE).performClick()\r\n    ShadowLooper.runUiThreadTasks()\r\n\r\nAfter this the contents of the `onClickListener` on Positive and Negative buttons are executed.\r\n","title":"Android testing: verify onClickListener using private anonymous class","body":"<p><strong>Found the solution!</strong></p>\n<p>In your Robolectric tests you need to call the following method after <code>performClick</code> or <code>callOnClick</code>.</p>\n<p>Example:</p>\n<pre><code>alertDialog.getButton(AlertDialog.BUTTON_POSITIVE).performClick()\nShadowLooper.runUiThreadTasks()\n</code></pre>\n<p>After this the contents of the <code>onClickListener</code> on Positive and Negative buttons are executed.</p>\n"}],"owner":{"account_id":198369,"reputation":193,"user_id":442988,"accept_rate":43,"display_name":"Umair Khan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1314,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1672764405,"creation_date":1425289157,"question_id":28806538,"body_markdown":"I am using Robolectric and Mockito and want to verify that async task is started or not.\r\nHere is my code:\r\n\r\n        AlertDialog.Builder alert = new AlertDialog.Builder(mContext);\r\n        alert.setTitle(R.string.warning_text);\r\n        alert.setMessage(message);\r\n        alert.setPositiveButton(R.string.ok, yesListener);\r\n        alert.setNegativeButton(R.string.cancel, noListener);\r\n        alert.show();\r\n\r\n    private DialogInterface.OnClickListener yesListener = new DialogInterface.OnClickListener() {\r\n        public void onClick(DialogInterface dialog, int i) {\r\n            startAsyncTask();\r\n        }\r\n    };\r\n\r\nHere is my test case\r\n\r\n    AlertDialog warningDialog = ShadowAlertDialog.getLatestAlertDialog();\r\n    Assert.assertTrue(warningDialog.isShowing());\r\n    warningDialog.getButton(DialogInterface.BUTTON_POSITIVE).performClick();\r\n    verify(mySpy).startAsyncTask();\r\n\r\nThe test fails at verify and getting &quot;Wanted but not invoked&quot; error. However onClick method does fire.\r\n\r\nBut when defining the listener in line like below, it works\r\n\r\n    AlertDialog.Builder alert = new AlertDialog.Builder(mContext);\r\n    alert.setTitle(R.string.warning_text);\r\n    alert.setMessage(message);\r\n    alert.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {\r\n        public void onClick(DialogInterface dialogInterface, int i){\r\n            startAsyncTask();\r\n        }\r\n    });\r\n    \r\n    alert.setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {\r\n        public void onClick(DialogInterface dialogInterface, int i){\r\n            dialogInterface.dismiss();\r\n        }\r\n    });\r\n    alert.show();\r\n\r\nCan any one tell what is the difference between the two?","title":"Android testing: verify onClickListener using private anonymous class","body":"<p>I am using Robolectric and Mockito and want to verify that async task is started or not.\nHere is my code:</p>\n\n<pre><code>    AlertDialog.Builder alert = new AlertDialog.Builder(mContext);\n    alert.setTitle(R.string.warning_text);\n    alert.setMessage(message);\n    alert.setPositiveButton(R.string.ok, yesListener);\n    alert.setNegativeButton(R.string.cancel, noListener);\n    alert.show();\n\nprivate DialogInterface.OnClickListener yesListener = new DialogInterface.OnClickListener() {\n    public void onClick(DialogInterface dialog, int i) {\n        startAsyncTask();\n    }\n};\n</code></pre>\n\n<p>Here is my test case</p>\n\n<pre><code>AlertDialog warningDialog = ShadowAlertDialog.getLatestAlertDialog();\nAssert.assertTrue(warningDialog.isShowing());\nwarningDialog.getButton(DialogInterface.BUTTON_POSITIVE).performClick();\nverify(mySpy).startAsyncTask();\n</code></pre>\n\n<p>The test fails at verify and getting \"Wanted but not invoked\" error. However onClick method does fire.</p>\n\n<p>But when defining the listener in line like below, it works</p>\n\n<pre><code>AlertDialog.Builder alert = new AlertDialog.Builder(mContext);\nalert.setTitle(R.string.warning_text);\nalert.setMessage(message);\nalert.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {\n    public void onClick(DialogInterface dialogInterface, int i){\n        startAsyncTask();\n    }\n});\n\nalert.setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {\n    public void onClick(DialogInterface dialogInterface, int i){\n        dialogInterface.dismiss();\n    }\n});\nalert.show();\n</code></pre>\n\n<p>Can any one tell what is the difference between the two?</p>\n"},{"tags":["java","oop","design-patterns","interface"],"comments":[{"owner":{"account_id":295795,"reputation":5373,"user_id":600379,"display_name":"Dakshinamurthy Karra"},"score":0,"creation_date":1438087709,"post_id":31676736,"comment_id":51295449,"body_markdown":"For (1) - Yes. I do not understand (2). Can you make the question a bit more clearer please?","body":"For (1) - Yes. I do not understand (2). Can you make the question a bit more clearer please?"}],"answers":[{"tags":[],"owner":{"account_id":253003,"reputation":10963,"user_id":531398,"accept_rate":93,"display_name":"William Morrison"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1438091992,"creation_date":1438087750,"answer_id":31676824,"question_id":31676736,"body_markdown":" 1. Yes. That one method will be called when the class is accessed as an instance of `IOne`, or `ITwo`.\n \n 3. No.  A method&#39;s name, return type, and arguments define a method&#39;s signature, and two methods within the same class cannot have the same signature. Doing so results in a compile time error.\n\n     One solution I suggest is to use different method names for IOne.method and ITwo.method, thereby making each method&#39;s signature unique.  This would allow you to define two unique methods in a single class.","title":"Two Interface with Same Method Name - Implementation of Methods","body":"<ol>\n<li><p>Yes. That one method will be called when the class is accessed as an instance of <code>IOne</code>, or <code>ITwo</code>.</p>\n</li>\n<li><p>No.  A method's name, return type, and arguments define a method's signature, and two methods within the same class cannot have the same signature. Doing so results in a compile time error.</p>\n<p>One solution I suggest is to use different method names for IOne.method and ITwo.method, thereby making each method's signature unique.  This would allow you to define two unique methods in a single class.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1438087768,"creation_date":1438087768,"answer_id":31676829,"question_id":31676736,"body_markdown":"&gt; Does the single implementation of method() one suffice for both interface IOne and ITwo?\r\n\r\nYes. The implementation is the same for both `abstract` methods.\r\n\r\n&gt; If the answer of 1 is yes, is there any way to get both the method in a single class?\r\n\r\nNo.\r\n\r\n","title":"Two Interface with Same Method Name - Implementation of Methods","body":"<blockquote>\n  <p>Does the single implementation of method() one suffice for both interface IOne and ITwo?</p>\n</blockquote>\n\n<p>Yes. The implementation is the same for both <code>abstract</code> methods.</p>\n\n<blockquote>\n  <p>If the answer of 1 is yes, is there any way to get both the method in a single class?</p>\n</blockquote>\n\n<p>No.</p>\n"},{"tags":[],"owner":{"account_id":4744570,"reputation":41644,"user_id":3836229,"display_name":"TimoStaudinger"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1438087776,"creation_date":1438087776,"answer_id":31676832,"question_id":31676736,"body_markdown":"If both methods have the same signature, as it is the case in your example, **only one implementation is possible**. In this case, there is no way to implement two versions of the method for the two interfaces. So yes, the example will suffice.\r\n\r\nIf the signature is the same for the two methods, but they have different return types, this will result in a compilation error.\r\n\r\nIf the two methods have different signatures, there can and have to be two different implementations.","title":"Two Interface with Same Method Name - Implementation of Methods","body":"<p>If both methods have the same signature, as it is the case in your example, <strong>only one implementation is possible</strong>. In this case, there is no way to implement two versions of the method for the two interfaces. So yes, the example will suffice.</p>\n\n<p>If the signature is the same for the two methods, but they have different return types, this will result in a compilation error.</p>\n\n<p>If the two methods have different signatures, there can and have to be two different implementations.</p>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1672764112,"creation_date":1438094780,"answer_id":31679742,"question_id":31676736,"body_markdown":"For 1, the answer is **yes**. It&#39;s enough to provide one implementation for the method in the class for both interfaces to be automatically implemented.\r\n\r\nFor 2, if you need to have both methods, then your class should not implement both interfaces. However, there&#39;s a trick you can use:\r\n\r\n    interface IOne {\r\n\r\n        void method();\r\n    }\r\n\r\n    interface ITwo {\r\n\r\n        void method();\r\n    }\r\n\r\n    public class A\r\n        implements IOne, ITwo {\r\n\r\n        // Anonymous inner class that implements only IOne\r\n        private final IOne one = new IOne() {\r\n\r\n            @Override\r\n            public void method() {\r\n                System.out.println(&quot;IOne&quot;);\r\n            }\r\n        };\r\n\r\n        // Anonymous inner class that implements only ITwo\r\n        private final ITwo two = new ITwo() {\r\n\r\n            @Override\r\n            public void method() {\r\n                System.out.println(&quot;ITwo&quot;);\r\n            }\r\n        };\r\n\r\n        @Override\r\n        public void method() {\r\n            System.out.println(&quot;A&quot;);\r\n        }\r\n\r\n        // Method that delegates to IOne\r\n        public void methodIOne() {\r\n            this.one.method();\r\n        }\r\n\r\n        // Method that delegates to ITwo\r\n        public void methodITwo() {\r\n            this.two.method();\r\n        }\r\n    }\r\n\r\nTesting code:\r\n\r\n    A a = new A();\r\n    a.method(); // A\r\n    a.methodIOne(); // IOne\r\n    a.methodITwo(); // ITwo\r\n\r\nClass `A` doesn&#39;t need to implement both interfaces. In that case, just don&#39;t implement `method()` on `A` and keep only the anonymous inner classes.\r\n","title":"Two Interface with Same Method Name - Implementation of Methods","body":"<p>For 1, the answer is <strong>yes</strong>. It's enough to provide one implementation for the method in the class for both interfaces to be automatically implemented.</p>\n<p>For 2, if you need to have both methods, then your class should not implement both interfaces. However, there's a trick you can use:</p>\n<pre><code>interface IOne {\n\n    void method();\n}\n\ninterface ITwo {\n\n    void method();\n}\n\npublic class A\n    implements IOne, ITwo {\n\n    // Anonymous inner class that implements only IOne\n    private final IOne one = new IOne() {\n\n        @Override\n        public void method() {\n            System.out.println(&quot;IOne&quot;);\n        }\n    };\n\n    // Anonymous inner class that implements only ITwo\n    private final ITwo two = new ITwo() {\n\n        @Override\n        public void method() {\n            System.out.println(&quot;ITwo&quot;);\n        }\n    };\n\n    @Override\n    public void method() {\n        System.out.println(&quot;A&quot;);\n    }\n\n    // Method that delegates to IOne\n    public void methodIOne() {\n        this.one.method();\n    }\n\n    // Method that delegates to ITwo\n    public void methodITwo() {\n        this.two.method();\n    }\n}\n</code></pre>\n<p>Testing code:</p>\n<pre><code>A a = new A();\na.method(); // A\na.methodIOne(); // IOne\na.methodITwo(); // ITwo\n</code></pre>\n<p>Class <code>A</code> doesn't need to implement both interfaces. In that case, just don't implement <code>method()</code> on <code>A</code> and keep only the anonymous inner classes.</p>\n"}],"owner":{"account_id":3577678,"reputation":11003,"user_id":2986537,"accept_rate":100,"display_name":"Razib"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6113,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"closed_date":1542648721,"accepted_answer_id":31679742,"answer_count":4,"score":13,"last_activity_date":1672764112,"creation_date":1438087535,"question_id":31676736,"body_markdown":"Suppose I have two interfaces: \r\n\r\n    interface IOne {\r\n    \r\n        public void method();\r\n\r\n    }\r\n\r\nand  \r\n\r\n    interface ITwo {\r\n        \r\n        public void method();\r\n\r\n    }\r\n\r\n\r\nA concrete class implements both of the interfaces:\r\n\r\n    public class A implements IOne, ITwo {\r\n       \r\n        public void method(){\r\n           //some implementation\r\n        }\r\n    }\r\n\r\nMy questions are:\r\n\r\n 1. Does the single implementation of `method()` suffice for both interfaces IOne and ITwo?\r\n 2. If the answer of **1** is yes, is there any way to get both the methods in a single class? In this case it is not necessary we have to implement both interfaces in a single class.","title":"Two Interface with Same Method Name - Implementation of Methods","body":"<p>Suppose I have two interfaces: </p>\n\n<pre><code>interface IOne {\n\n    public void method();\n\n}\n</code></pre>\n\n<p>and  </p>\n\n<pre><code>interface ITwo {\n\n    public void method();\n\n}\n</code></pre>\n\n<p>A concrete class implements both of the interfaces:</p>\n\n<pre><code>public class A implements IOne, ITwo {\n\n    public void method(){\n       //some implementation\n    }\n}\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Does the single implementation of <code>method()</code> suffice for both interfaces IOne and ITwo?</li>\n<li>If the answer of <strong>1</strong> is yes, is there any way to get both the methods in a single class? In this case it is not necessary we have to implement both interfaces in a single class.</li>\n</ol>\n"},{"tags":["java","arrays","linked-list","iterator"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1672764435,"post_id":74996169,"comment_id":132345833,"body_markdown":"You shouldn&#39;t get an empty list just by not adding a `return` statement - unless I missed something. Are you sure you&#39;re not rather running into some endless loop, e.g. by constantly calling `next()` and `previous()`, and thus nothing is printed? In general it is good practice to leave a method once it&#39;s done (i.e. in your case once the element has been added or a duplicate has been found) so the `return;` isn&#39;t that bad.","body":"You shouldn&#39;t get an empty list just by not adding a <code>return</code> statement - unless I missed something. Are you sure you&#39;re not rather running into some endless loop, e.g. by constantly calling <code>next()</code> and <code>previous()</code>, and thus nothing is printed? In general it is good practice to leave a method once it&#39;s done (i.e. in your case once the element has been added or a duplicate has been found) so the <code>return;</code> isn&#39;t that bad."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1672764536,"post_id":74996169,"comment_id":132345862,"body_markdown":"Btw, I assume you have `iterator.add(element);` twice to catch the special case of the element being added to the end (or an empty list) in which case having `return` after adding the element in other places is necessary as not to add the element twice.","body":"Btw, I assume you have <code>iterator.add(element);</code> twice to catch the special case of the element being added to the end (or an empty list) in which case having <code>return</code> after adding the element in other places is necessary as not to add the element twice."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1672764580,"post_id":74996169,"comment_id":132345880,"body_markdown":"@OldDogProgrammer there&#39;s `System.out.println(list);` in the main method :)","body":"@OldDogProgrammer there&#39;s <code>System.out.println(list);</code> in the main method :)"},{"owner":{"account_id":26059360,"reputation":1,"user_id":19760965,"display_name":"Marko Vasiljevic"},"score":0,"creation_date":1672764649,"post_id":74996169,"comment_id":132345908,"body_markdown":"@OldDogProgrammer I am printing it in the main method","body":"@OldDogProgrammer I am printing it in the main method"},{"owner":{"account_id":26059360,"reputation":1,"user_id":19760965,"display_name":"Marko Vasiljevic"},"score":0,"creation_date":1672764698,"post_id":74996169,"comment_id":132345927,"body_markdown":"But still, without return keyword list is empty and program is not looping forever...so why isn&#39;t it working?","body":"But still, without return keyword list is empty and program is not looping forever...so why isn&#39;t it working?"},{"owner":{"account_id":26059360,"reputation":1,"user_id":19760965,"display_name":"Marko Vasiljevic"},"score":0,"creation_date":1672764897,"post_id":74996169,"comment_id":132345978,"body_markdown":"@Thomas thank you but still I don&#39;t know why isn&#39;t it working.","body":"@Thomas thank you but still I don&#39;t know why isn&#39;t it working."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1672765283,"post_id":74996169,"comment_id":132346095,"body_markdown":"If what you&#39;re executing is the code you&#39;ve posted the list should at least have element &quot;a&quot; since in that case `iterator.hasNext()` should return `false` and thus `iterator.add(element);` would be called. Did you try with only adding &quot;a&quot;? If that works the other calls should at least keep the &quot;a&quot; in the list as there&#39;s no code that would remove anything from the list. If that doesn&#39;t work I&#39;d suspect one of 2 things: 1) this isn&#39;t the code you&#39;re running or 2) you get an endless loop without realizing it.","body":"If what you&#39;re executing is the code you&#39;ve posted the list should at least have element &quot;a&quot; since in that case <code>iterator.hasNext()</code> should return <code>false</code> and thus <code>iterator.add(element);</code> would be called. Did you try with only adding &quot;a&quot;? If that works the other calls should at least keep the &quot;a&quot; in the list as there&#39;s no code that would remove anything from the list. If that doesn&#39;t work I&#39;d suspect one of 2 things: 1) this isn&#39;t the code you&#39;re running or 2) you get an endless loop without realizing it."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1672765614,"post_id":74996169,"comment_id":132346205,"body_markdown":"Reasoning through the code I&#39;d say it runs fine until you&#39;re trying to add &quot;d&quot;. Eventually `next()` returns &quot;f&quot; and thus you&#39;re calling `previous()` and `add()`. `previous()` sets the iterator&#39;s cursor back to between &quot;f&quot; and &quot;c&quot; and thus `next()` would return &quot;f&quot; again. Now you&#39;re adding &quot;d&quot; but this doesn&#39;t change the result of `next()` (see JavaDoc on `add()`) and thus you get &quot;f&quot; again, call `previous()` again, add &quot;d&quot; again etc. etc. - here&#39;s the endless loop which you basically get out of with the `return` after adding &quot;d&quot; the first time. - Update: tested and confirmed the endless loop.","body":"Reasoning through the code I&#39;d say it runs fine until you&#39;re trying to add &quot;d&quot;. Eventually <code>next()</code> returns &quot;f&quot; and thus you&#39;re calling <code>previous()</code> and <code>add()</code>. <code>previous()</code> sets the iterator&#39;s cursor back to between &quot;f&quot; and &quot;c&quot; and thus <code>next()</code> would return &quot;f&quot; again. Now you&#39;re adding &quot;d&quot; but this doesn&#39;t change the result of <code>next()</code> (see JavaDoc on <code>add()</code>) and thus you get &quot;f&quot; again, call <code>previous()</code> again, add &quot;d&quot; again etc. etc. - here&#39;s the endless loop which you basically get out of with the <code>return</code> after adding &quot;d&quot; the first time. - Update: tested and confirmed the endless loop."},{"owner":{"account_id":26059360,"reputation":1,"user_id":19760965,"display_name":"Marko Vasiljevic"},"score":0,"creation_date":1672765890,"post_id":74996169,"comment_id":132346295,"body_markdown":"@Thomas you were right. It is an endless loop without return statement.","body":"@Thomas you were right. It is an endless loop without return statement."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1672823462,"post_id":74996169,"comment_id":132357784,"body_markdown":"As a side note, you should simply call [`compareToIgnoreCase`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#compareToIgnoreCase(java.lang.String)) instead of converting every string to a lowercase string before comparing. Not only will this handle special Unicode scenarios correctly, its far more efficient (a comparison stops at the first mismatching character, while a to-lowercase conversion processes the entire string even before the comparison started).","body":"As a side note, you should simply call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#compareToIgnoreCase(java.lang.String)\" rel=\"nofollow noreferrer\"><code>compareToIgnoreCase</code></a> instead of converting every string to a lowercase string before comparing. Not only will this handle special Unicode scenarios correctly, its far more efficient (a comparison stops at the first mismatching character, while a to-lowercase conversion processes the entire string even before the comparison started)."}],"owner":{"account_id":26059360,"reputation":1,"user_id":19760965,"display_name":"Marko Vasiljevic"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672764033,"creation_date":1672764033,"question_id":74996169,"body_markdown":"Here I have the code that contains only one method that has 2 parameters. First one is of type linkedlist and second one is of type String. The idea here is that I call this function from the main method several time and each new item that gets added should be sorted from A-Z. But for some reason if I don&#39;t add return in the function (\r\n```\r\n else if(compareResult&gt;0) {\r\n                iterator.previous();\r\n                iterator.add(element);\r\n                return;\r\n            }\r\n```\r\n)\r\n\r\nthen I get empty list printed out. Why is that?\r\n\r\n\r\n\r\n````\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        LinkedList&lt;String&gt; list=new LinkedList&lt;&gt;();\r\n\r\n            addAndSortElements(list,&quot;a&quot;);\r\n        addAndSortElements(list,&quot;b&quot;);\r\n        addAndSortElements(list,&quot;c&quot;);\r\n        addAndSortElements(list,&quot;f&quot;);\r\n        addAndSortElements(list,&quot;d&quot;);\r\n        System.out.println(list);\r\n    }\r\n\r\n    private static void addAndSortElements(LinkedList&lt;String&gt; linkedList, String element) {\r\n\r\n        var iterator= linkedList.listIterator();\r\n\r\n        while (iterator.hasNext()) {\r\n\r\n            String editedElement=element.toLowerCase();\r\n            int compareResult=iterator.next().toLowerCase().compareTo(editedElement);\r\n\r\n            if(compareResult==0) {\r\n                System.out.println(&quot;Element is already on the list&quot;);\r\n                ***return;***\r\n            }\r\n            else if(compareResult&gt;0) {\r\n                iterator.previous();\r\n                iterator.add(element);\r\n                return;\r\n            }\r\n            else {\r\n\r\n            }\r\n        }\r\n        iterator.add(element);\r\n    }\r\n}\r\n\r\n```\r\n`\r\n\r\nI have tried everything I said above.","title":"Using LinkedList iterator not working in this case","body":"<p>Here I have the code that contains only one method that has 2 parameters. First one is of type linkedlist and second one is of type String. The idea here is that I call this function from the main method several time and each new item that gets added should be sorted from A-Z. But for some reason if I don't add return in the function (</p>\n<pre><code> else if(compareResult&gt;0) {\n                iterator.previous();\n                iterator.add(element);\n                return;\n            }\n</code></pre>\n<p>)</p>\n<p>then I get empty list printed out. Why is that?</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n\n        LinkedList&lt;String&gt; list=new LinkedList&lt;&gt;();\n\n            addAndSortElements(list,&quot;a&quot;);\n        addAndSortElements(list,&quot;b&quot;);\n        addAndSortElements(list,&quot;c&quot;);\n        addAndSortElements(list,&quot;f&quot;);\n        addAndSortElements(list,&quot;d&quot;);\n        System.out.println(list);\n    }\n\n    private static void addAndSortElements(LinkedList&lt;String&gt; linkedList, String element) {\n\n        var iterator= linkedList.listIterator();\n\n        while (iterator.hasNext()) {\n\n            String editedElement=element.toLowerCase();\n            int compareResult=iterator.next().toLowerCase().compareTo(editedElement);\n\n            if(compareResult==0) {\n                System.out.println(&quot;Element is already on the list&quot;);\n                ***return;***\n            }\n            else if(compareResult&gt;0) {\n                iterator.previous();\n                iterator.add(element);\n                return;\n            }\n            else {\n\n            }\n        }\n        iterator.add(element);\n    }\n}\n\n```\n`\n\nI have tried everything I said above.\n</code></pre>\n"},{"tags":["java","spring","database","hibernate","jpa"],"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672763890,"creation_date":1672763890,"question_id":74996149,"body_markdown":"I&#39;m developing a Java-Spring application that has 2 modules, with a database schema for each one, and I&#39;m using Hibernate.\r\n\r\nLet&#39;s say I have one entity in schema named A which looks like this:\r\n\r\n```\r\n@Entity\r\npublic class entityInSchemaA {\r\n\r\n    private String field1;\r\n\r\n    private boolean boolean1;\r\n\r\n    private Integer integer1;\r\n\r\n    ...Other fields specific to this class...\r\n\r\n}\r\n```\r\nAnd another entity in schema named B, that shares just some fields with the entity above, and it looks like this:\r\n\r\n```\r\n@Entity\r\npublic class entityInSchemaB {\r\n\r\n    private String field1;\r\n\r\n    private boolean boolean1;\r\n\r\n    private Integer integer1;\r\n\r\n    ...Other fields specific to this class...\r\n\r\n}\r\n```\r\n\r\nI was wondering if there is a conventional/correct/clean way to do something like: \r\n\r\nFrom the application module related to schema B, from entityInSchemaBRepository, query schema A and fill the attributes in entityInSchemaB that are also in entityInSchemaA (In this case: field1, boolean1 and integer1).\r\n\r\nIf I wasn&#39;t clear on something, or if information is missing, please ask me, I know it&#39;s a bit confusing.\r\n\r\nThanks in advance","title":"Query similar entity on different DB schema JpaRepository","body":"<p>I'm developing a Java-Spring application that has 2 modules, with a database schema for each one, and I'm using Hibernate.</p>\n<p>Let's say I have one entity in schema named A which looks like this:</p>\n<pre><code>@Entity\npublic class entityInSchemaA {\n\n    private String field1;\n\n    private boolean boolean1;\n\n    private Integer integer1;\n\n    ...Other fields specific to this class...\n\n}\n</code></pre>\n<p>And another entity in schema named B, that shares just some fields with the entity above, and it looks like this:</p>\n<pre><code>@Entity\npublic class entityInSchemaB {\n\n    private String field1;\n\n    private boolean boolean1;\n\n    private Integer integer1;\n\n    ...Other fields specific to this class...\n\n}\n</code></pre>\n<p>I was wondering if there is a conventional/correct/clean way to do something like:</p>\n<p>From the application module related to schema B, from entityInSchemaBRepository, query schema A and fill the attributes in entityInSchemaB that are also in entityInSchemaA (In this case: field1, boolean1 and integer1).</p>\n<p>If I wasn't clear on something, or if information is missing, please ask me, I know it's a bit confusing.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672763569,"creation_date":1672763569,"answer_id":74996090,"question_id":74993660,"body_markdown":"The headers function receives the current consumer record and the exception.\r\n\r\nHowever, removing the header in that function will have no effect.\r\n\r\nPlease open a new feature suggestion.","title":"Adding custom header only to DLT topic, when using non-blocking retries","body":"<p>The headers function receives the current consumer record and the exception.</p>\n<p>However, removing the header in that function will have no effect.</p>\n<p>Please open a new feature suggestion.</p>\n"}],"owner":{"account_id":22619843,"reputation":39,"user_id":16798827,"display_name":"cloud_7"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74996090,"answer_count":1,"score":0,"last_activity_date":1672763569,"creation_date":1672750533,"question_id":74993660,"body_markdown":"I have added the following logic to add custom header in events that are sent to retry and dlt topics.\r\n\r\n```\r\n@Bean(RetryTopicInternalBeanNames.DEAD_LETTER_PUBLISHING_RECOVERER_FACTORY_BEAN_NAME)\r\npublic DeadLetterPublishingRecovererFactory factory(DestinationTopicResolver destinationTopicResolver) {\r\n    DeadLetterPublishingRecovererFactory factory = new DeadLetterPublishingRecovererFactory(destinationTopicResolver);\r\n    factory.setDeadLetterPublishingRecovererCustomizer(dlpr -&gt; dlpr.addHeadersFunction((consumerRecord, exception) -&gt; {\r\n     \r\nreturn new RecordHeaders().add(EXTERNAL_SYSTEM_EXCEPTION_MESSAGE_HEADER, exc.getMessage().getBytes(StandardCharsets.UTF_8));\r\n\r\n    ));\r\n    return factory;\r\n}\r\n```\r\n\r\nUnfortunately the following header is passed to another topic. I&#39;ll give you an example: I have 2 retry topics and dlt. The exception is thrown and the header is added at main topic, then at retry-0 I receive the event, where that header is already there and then I added it again. So at retry-1 I have 2 same headers. It ends in dlt topic, where are 3 headers with the same name. It happens, because &quot;Apache Kafka supports multiple headers with the same name&quot; as it is written here: https://docs.spring.io/spring-kafka/reference/html/#dlpr-headers\r\n\r\nI think of two solutions and I&#39;m not sure how to achieve them:\r\n1) The header can be added at each level, but before addition, it should be checked, if it exists. If yes than should be removed and then added.\r\n2) The header should be added only to DLT topic.\r\n\r\nDo you know if any of them is possible? I use spring-kafa 2.8.8.\r\n\r\nThanks.","title":"Adding custom header only to DLT topic, when using non-blocking retries","body":"<p>I have added the following logic to add custom header in events that are sent to retry and dlt topics.</p>\n<pre><code>@Bean(RetryTopicInternalBeanNames.DEAD_LETTER_PUBLISHING_RECOVERER_FACTORY_BEAN_NAME)\npublic DeadLetterPublishingRecovererFactory factory(DestinationTopicResolver destinationTopicResolver) {\n    DeadLetterPublishingRecovererFactory factory = new DeadLetterPublishingRecovererFactory(destinationTopicResolver);\n    factory.setDeadLetterPublishingRecovererCustomizer(dlpr -&gt; dlpr.addHeadersFunction((consumerRecord, exception) -&gt; {\n     \nreturn new RecordHeaders().add(EXTERNAL_SYSTEM_EXCEPTION_MESSAGE_HEADER, exc.getMessage().getBytes(StandardCharsets.UTF_8));\n\n    ));\n    return factory;\n}\n</code></pre>\n<p>Unfortunately the following header is passed to another topic. I'll give you an example: I have 2 retry topics and dlt. The exception is thrown and the header is added at main topic, then at retry-0 I receive the event, where that header is already there and then I added it again. So at retry-1 I have 2 same headers. It ends in dlt topic, where are 3 headers with the same name. It happens, because &quot;Apache Kafka supports multiple headers with the same name&quot; as it is written here: <a href=\"https://docs.spring.io/spring-kafka/reference/html/#dlpr-headers\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/reference/html/#dlpr-headers</a></p>\n<p>I think of two solutions and I'm not sure how to achieve them:</p>\n<ol>\n<li>The header can be added at each level, but before addition, it should be checked, if it exists. If yes than should be removed and then added.</li>\n<li>The header should be added only to DLT topic.</li>\n</ol>\n<p>Do you know if any of them is possible? I use spring-kafa 2.8.8.</p>\n<p>Thanks.</p>\n"},{"tags":["java","android","android-asynctask","android-networking"],"comments":[{"owner":{"account_id":1359980,"reputation":17363,"user_id":1680919,"accept_rate":60,"display_name":"Levite"},"score":7,"creation_date":1417771759,"post_id":1560788,"comment_id":43085713,"body_markdown":"To check for an internet connection, probably the most reliable way would be to ping one of the major name servers, this could be done for example with `if(Runtime.getRuntime().exec(&quot;/system/bin/ping -c 1 8.8.8.8&quot;).waitFor()==0) ...`. See [my answer](http://stackoverflow.com/a/27312494/1680919) for a nicer implementation of this. Btw the accepted answer (and many others here) just check for a **network connection**, not the internet.","body":"To check for an internet connection, probably the most reliable way would be to ping one of the major name servers, this could be done for example with <code>if(Runtime.getRuntime().exec(&quot;&#47;system&#47;bin&#47;ping -c 1 8.8.8.8&quot;).waitFor()==0) ...</code>. See <a href=\"http://stackoverflow.com/a/27312494/1680919\">my answer</a> for a nicer implementation of this. Btw the accepted answer (and many others here) just check for a <b>network connection</b>, not the internet."},{"owner":{"account_id":2032285,"reputation":2727,"user_id":1815624,"accept_rate":71,"display_name":"CrandellWS"},"score":0,"creation_date":1454181059,"post_id":1560788,"comment_id":57932681,"body_markdown":"see-&gt; http://stackoverflow.com/a/4239019/1815624","body":"see-&gt; <a href=\"http://stackoverflow.com/a/4239019/1815624\">stackoverflow.com/a/4239019/1815624</a>"},{"owner":{"account_id":1354875,"reputation":3006,"user_id":1293492,"accept_rate":63,"display_name":"Tam&#225;s Bolv&#225;ri"},"score":4,"creation_date":1465140162,"post_id":1560788,"comment_id":62766876,"body_markdown":"Do not use the ping method, use a HTTP check instead. ICMP is blocked on some networks, so ping will not work. E.g.: it works perfectly on my home wifi, but it does not when I am using mobile data on Vodafone&#39;s network (in Hungary). Or combine the 2 methods as a fallback, but be careful because waitFor() will wait about 20 seconds even if -w or -W is used.","body":"Do not use the ping method, use a HTTP check instead. ICMP is blocked on some networks, so ping will not work. E.g.: it works perfectly on my home wifi, but it does not when I am using mobile data on Vodafone&#39;s network (in Hungary). Or combine the 2 methods as a fallback, but be careful because waitFor() will wait about 20 seconds even if -w or -W is used."},{"owner":{"account_id":10396927,"reputation":68267,"user_id":7666442,"display_name":"AskNilesh"},"score":0,"creation_date":1569573284,"post_id":1560788,"comment_id":102648533,"body_markdown":"[`getAllNetworkInfo()` is deprecated in API level 29](https://stackoverflow.com/a/53532456/7666442)","body":"<a href=\"https://stackoverflow.com/a/53532456/7666442\"><code>getAllNetworkInfo()</code> is deprecated in API level 29</a>"},{"owner":{"account_id":14722688,"reputation":494,"user_id":10632772,"display_name":"Asfar Hussain Siddiqui"},"score":0,"creation_date":1670581492,"post_id":1560788,"comment_id":131912174,"body_markdown":"check https://stackoverflow.com/a/54957599/10632772","body":"check <a href=\"https://stackoverflow.com/a/54957599/10632772\">stackoverflow.com/a/54957599/10632772</a>"}],"answers":[{"tags":[],"owner":{"account_id":49912,"reputation":63499,"user_id":148765,"accept_rate":87,"display_name":"Chinmay Kanchi"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1351864014,"creation_date":1255448327,"answer_id":1561056,"question_id":1560788,"body_markdown":"Take a look at the ConnectivityManager class. You can use this class to get information on the active connections on a host. http://developer.android.com/reference/android/net/ConnectivityManager.html\r\n\r\nEDIT: You can use     \r\n\r\n    Context.getSystemService(Context.CONNECTIVITY_SERVICE)\r\n        .getNetworkInfo(ConnectivityManager.TYPE_MOBILE) \r\n\r\nor\r\n\r\n    Context.getSystemService(Context.CONNECTIVITY_SERVICE)\r\n        .getNetworkInfo(ConnectivityManager.TYPE_WIFI) \r\n\r\nand parse the DetailedState enum of the returned NetworkInfo object\r\n\r\nEDIT EDIT: To find out whether you can access a host, you can use \r\n\r\n    Context.getSystemService(Context.CONNECTIVITY_SERVICE)\r\n        .requestRouteToHost(TYPE_WIFI, int hostAddress)\r\n\r\nObviously, I&#39;m using Context.getSystemService(Context.CONNECTIVITY_SERVICE) as a proxy to say\r\n\r\n    ConnectivityManager cm = Context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    cm.yourMethodCallHere();","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Take a look at the ConnectivityManager class. You can use this class to get information on the active connections on a host. <a href=\"http://developer.android.com/reference/android/net/ConnectivityManager.html\" rel=\"noreferrer\">http://developer.android.com/reference/android/net/ConnectivityManager.html</a></p>\n\n<p>EDIT: You can use     </p>\n\n<pre><code>Context.getSystemService(Context.CONNECTIVITY_SERVICE)\n    .getNetworkInfo(ConnectivityManager.TYPE_MOBILE) \n</code></pre>\n\n<p>or</p>\n\n<pre><code>Context.getSystemService(Context.CONNECTIVITY_SERVICE)\n    .getNetworkInfo(ConnectivityManager.TYPE_WIFI) \n</code></pre>\n\n<p>and parse the DetailedState enum of the returned NetworkInfo object</p>\n\n<p>EDIT EDIT: To find out whether you can access a host, you can use </p>\n\n<pre><code>Context.getSystemService(Context.CONNECTIVITY_SERVICE)\n    .requestRouteToHost(TYPE_WIFI, int hostAddress)\n</code></pre>\n\n<p>Obviously, I'm using Context.getSystemService(Context.CONNECTIVITY_SERVICE) as a proxy to say</p>\n\n<pre><code>ConnectivityManager cm = Context.getSystemService(Context.CONNECTIVITY_SERVICE);\ncm.yourMethodCallHere();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45425,"reputation":42744,"user_id":133858,"accept_rate":81,"display_name":"Vidar Vestnes"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1255450126,"creation_date":1255450126,"answer_id":1561241,"question_id":1560788,"body_markdown":"\r\n\r\nIm using this code instead of the InetAddress :\r\n\r\n\r\n\r\n\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tURL url\t= new URL(&quot;http://&quot;+params[0]);\r\n\r\n\t    \tHttpURLConnection urlc = (HttpURLConnection) url.openConnection();\r\n\t    \turlc.setRequestProperty(&quot;User-Agent&quot;, &quot;Android Application:&quot;+Z.APP_VERSION);\r\n\t    \turlc.setRequestProperty(&quot;Connection&quot;, &quot;close&quot;);\r\n\t    \turlc.setConnectTimeout(1000 * 30); // mTimeout is in seconds\r\n\t\t\turlc.connect();\r\n\t    \tif (urlc.getResponseCode() == 200) {\r\n\t            Main.Log(&quot;getResponseCode == 200&quot;);\r\n\t    \t\treturn new Boolean(true);\r\n\t    \t}\r\n\t\t} catch (MalformedURLException e1) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te1.printStackTrace();\r\n    \t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Im using this code instead of the InetAddress :</p>\n\n<pre><code>    try {\n\n        URL url = new URL(\"http://\"+params[0]);\n\n        HttpURLConnection urlc = (HttpURLConnection) url.openConnection();\n        urlc.setRequestProperty(\"User-Agent\", \"Android Application:\"+Z.APP_VERSION);\n        urlc.setRequestProperty(\"Connection\", \"close\");\n        urlc.setConnectTimeout(1000 * 30); // mTimeout is in seconds\n        urlc.connect();\n        if (urlc.getResponseCode() == 200) {\n            Main.Log(\"getResponseCode == 200\");\n            return new Boolean(true);\n        }\n    } catch (MalformedURLException e1) {\n        // TODO Auto-generated catch block\n        e1.printStackTrace();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":30392,"reputation":9804,"user_id":82880,"accept_rate":62,"display_name":"Eddie"},"down_vote_count":4,"up_vote_count":301,"is_accepted":false,"score":297,"last_activity_date":1338050335,"creation_date":1262635307,"answer_id":2001824,"question_id":1560788,"body_markdown":"No need to be complex. The simplest and framework manner is to use `ACCESS_NETWORK_STATE` permission and just make a connected method\r\n\r\n    public boolean isOnline() {\r\n        ConnectivityManager cm =\r\n            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n        return cm.getActiveNetworkInfo() != null &amp;&amp; \r\n           cm.getActiveNetworkInfo().isConnectedOrConnecting();\r\n    }\r\n\r\nYou can also use `requestRouteToHost` if you have a particualr host and connection type (wifi/mobile) in mind.\r\n\r\nYou will also need:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nin your android manifest.\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>No need to be complex. The simplest and framework manner is to use <code>ACCESS_NETWORK_STATE</code> permission and just make a connected method</p>\n\n<pre><code>public boolean isOnline() {\n    ConnectivityManager cm =\n        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    return cm.getActiveNetworkInfo() != null &amp;&amp; \n       cm.getActiveNetworkInfo().isConnectedOrConnecting();\n}\n</code></pre>\n\n<p>You can also use <code>requestRouteToHost</code> if you have a particualr host and connection type (wifi/mobile) in mind.</p>\n\n<p>You will also need:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>in your android manifest.</p>\n"},{"tags":[],"owner":{"account_id":145948,"reputation":2509,"user_id":356097,"accept_rate":17,"display_name":"azelez"},"down_vote_count":2,"up_vote_count":65,"is_accepted":false,"score":63,"last_activity_date":1338050500,"creation_date":1285581954,"answer_id":3802783,"question_id":1560788,"body_markdown":"To get `getActiveNetworkInfo()` to work you need to add the following to the manifest.\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;","title":"How to check internet access on Android? InetAddress never times out","body":"<p>To get <code>getActiveNetworkInfo()</code> to work you need to add the following to the manifest.</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":225292,"reputation":14280,"user_id":485695,"display_name":"gar"},"down_vote_count":16,"up_vote_count":1063,"is_accepted":false,"score":1047,"last_activity_date":1535845784,"creation_date":1287937734,"answer_id":4009133,"question_id":1560788,"body_markdown":"If the device is in airplane mode (or presumably in other situations where there&#39;s no available network), `cm.getActiveNetworkInfo()` will be `null`, so you need to add a `null` check.\r\n\r\nModified ([Eddie&#39;s solution][1]) below:\r\n\r\n    public boolean isOnline() {\r\n        ConnectivityManager cm =\r\n            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo netInfo = cm.getActiveNetworkInfo();\r\n        return netInfo != null &amp;&amp; netInfo.isConnectedOrConnecting();\r\n    }\r\nAlso add the following permission to the `AndroidManifest.xml`:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nOne other small point, if you absolutely need a network connection at the given point in time, then it might be better to use `netInfo.isConnected()` rather than `netInfo.isConnectedOrConnecting`.  I guess this is up to the individual use-case however.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/2001824/194894","title":"How to check internet access on Android? InetAddress never times out","body":"<p>If the device is in airplane mode (or presumably in other situations where there's no available network), <code>cm.getActiveNetworkInfo()</code> will be <code>null</code>, so you need to add a <code>null</code> check.</p>\n\n<p>Modified (<a href=\"https://stackoverflow.com/a/2001824/194894\">Eddie's solution</a>) below:</p>\n\n<pre><code>public boolean isOnline() {\n    ConnectivityManager cm =\n        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo netInfo = cm.getActiveNetworkInfo();\n    return netInfo != null &amp;&amp; netInfo.isConnectedOrConnecting();\n}\n</code></pre>\n\n<p>Also add the following permission to the <code>AndroidManifest.xml</code>:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>One other small point, if you absolutely need a network connection at the given point in time, then it might be better to use <code>netInfo.isConnected()</code> rather than <code>netInfo.isConnectedOrConnecting</code>.  I guess this is up to the individual use-case however.</p>\n"},{"tags":[],"owner":{"account_id":697516,"reputation":271,"user_id":571119,"display_name":"Ajhar"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1297358705,"creation_date":1294741741,"answer_id":4656606,"question_id":1560788,"body_markdown":"Found at and modified (!) from this [link][1] :\r\n\r\nIn your manifest file add at least:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nYou probably already have the INTERNET permission if you are accessing it. Then a boolean function that allows to test for connectivity is:\r\n\r\n    private boolean checkInternetConnection() {\r\n\t\tConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\t// test for connection\r\n\t\tif (cm.getActiveNetworkInfo() != null\r\n\t\t\t\t&amp;&amp; cm.getActiveNetworkInfo().isAvailable()\r\n\t\t\t\t&amp;&amp; cm.getActiveNetworkInfo().isConnected()) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tLog.v(TAG, &quot;Internet Connection Not Present&quot;);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n  [1]: http://blogingtutorials.blogspot.com/2011/01/check-internet-connection-in-android.html","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Found at and modified (!) from this <a href=\"http://blogingtutorials.blogspot.com/2011/01/check-internet-connection-in-android.html\" rel=\"noreferrer\">link</a> :</p>\n\n<p>In your manifest file add at least:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>You probably already have the INTERNET permission if you are accessing it. Then a boolean function that allows to test for connectivity is:</p>\n\n<pre><code>private boolean checkInternetConnection() {\n    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n    // test for connection\n    if (cm.getActiveNetworkInfo() != null\n            &amp;&amp; cm.getActiveNetworkInfo().isAvailable()\n            &amp;&amp; cm.getActiveNetworkInfo().isConnected()) {\n        return true;\n    } else {\n        Log.v(TAG, \"Internet Connection Not Present\");\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":253424,"reputation":5254,"user_id":532116,"accept_rate":45,"display_name":"Gilbou"},"down_vote_count":3,"up_vote_count":50,"is_accepted":false,"score":47,"last_activity_date":1390992413,"creation_date":1303904487,"answer_id":5803489,"question_id":1560788,"body_markdown":"check this code... it worked for me :)\r\n\r\n    public static void isNetworkAvailable(final Handler handler, final int timeout) {\r\n        // ask fo message &#39;0&#39; (not connected) or &#39;1&#39; (connected) on &#39;handler&#39;\r\n        // the answer must be send before before within the &#39;timeout&#39; (in milliseconds)\r\n    \t\t\r\n        new Thread() {\r\n            private boolean responded = false;   \r\n            @Override\r\n            public void run() {\t\r\n                // set &#39;responded&#39; to TRUE if is able to connect with google mobile (responds fast)\t\r\n                new Thread() {\t\t\r\n                    @Override\r\n                    public void run() {\r\n                        HttpGet requestForTest = new HttpGet(&quot;http://m.google.com&quot;);\r\n                        try {\r\n                            new DefaultHttpClient().execute(requestForTest); // can last...\r\n                            responded = true;\r\n                        } \r\n                        catch (Exception e) {\r\n                        }\r\n                    } \r\n                }.start();\r\n    \t        \t\r\n                try {\r\n                    int waited = 0;\r\n                    while(!responded &amp;&amp; (waited &lt; timeout)) {\r\n                        sleep(100);\r\n                        if(!responded ) { \r\n                            waited += 100;\r\n                        }\r\n                    }\r\n                } \r\n                catch(InterruptedException e) {} // do nothing \r\n                finally { \r\n                    if (!responded) { handler.sendEmptyMessage(0); } \r\n                    else { handler.sendEmptyMessage(1); }\r\n                }\r\n            }\r\n        }.start();\r\n    }\r\n\r\nThen, I define the handler:\r\n\r\n    Handler h = new Handler() {\r\n        @Override\r\n        public void handleMessage(Message msg) {\r\n    \t\t\r\n            if (msg.what != 1) { // code if not connected\r\n    \t\t\t\r\n            } else { // code if connected\r\n    \t    \t\r\n            }\t\r\n        }\r\n    };\r\n    \r\n...and launch the test:\r\n\r\n    isNetworkAvailable(h,2000); // get the answser within 2000 ms","title":"How to check internet access on Android? InetAddress never times out","body":"<p>check this code... it worked for me :)</p>\n\n<pre><code>public static void isNetworkAvailable(final Handler handler, final int timeout) {\n    // ask fo message '0' (not connected) or '1' (connected) on 'handler'\n    // the answer must be send before before within the 'timeout' (in milliseconds)\n\n    new Thread() {\n        private boolean responded = false;   \n        @Override\n        public void run() { \n            // set 'responded' to TRUE if is able to connect with google mobile (responds fast) \n            new Thread() {      \n                @Override\n                public void run() {\n                    HttpGet requestForTest = new HttpGet(\"http://m.google.com\");\n                    try {\n                        new DefaultHttpClient().execute(requestForTest); // can last...\n                        responded = true;\n                    } \n                    catch (Exception e) {\n                    }\n                } \n            }.start();\n\n            try {\n                int waited = 0;\n                while(!responded &amp;&amp; (waited &lt; timeout)) {\n                    sleep(100);\n                    if(!responded ) { \n                        waited += 100;\n                    }\n                }\n            } \n            catch(InterruptedException e) {} // do nothing \n            finally { \n                if (!responded) { handler.sendEmptyMessage(0); } \n                else { handler.sendEmptyMessage(1); }\n            }\n        }\n    }.start();\n}\n</code></pre>\n\n<p>Then, I define the handler:</p>\n\n<pre><code>Handler h = new Handler() {\n    @Override\n    public void handleMessage(Message msg) {\n\n        if (msg.what != 1) { // code if not connected\n\n        } else { // code if connected\n\n        }   \n    }\n};\n</code></pre>\n\n<p>...and launch the test:</p>\n\n<pre><code>isNetworkAvailable(h,2000); // get the answser within 2000 ms\n</code></pre>\n"},{"tags":[],"owner":{"account_id":231311,"reputation":682,"user_id":495466,"accept_rate":80,"display_name":"InsaurraldeAP"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1321671929,"creation_date":1321671861,"answer_id":8191568,"question_id":1560788,"body_markdown":"    public boolean isOnline() {\r\n    \tboolean var = false;\r\n    \tConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \tif ( cm.getActiveNetworkInfo() != null ) {\r\n    \t\tvar = true;\r\n    \t}\r\n    \treturn var;\r\n    } \r\n\r\nI have done it this way.\r\nA little bit shorter and more readable I guess.\r\n\r\nCheers!\r\n\r\nSaiyan","title":"How to check internet access on Android? InetAddress never times out","body":"<pre><code>public boolean isOnline() {\n    boolean var = false;\n    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n    if ( cm.getActiveNetworkInfo() != null ) {\n        var = true;\n    }\n    return var;\n} \n</code></pre>\n\n<p>I have done it this way.\nA little bit shorter and more readable I guess.</p>\n\n<p>Cheers!</p>\n\n<p>Saiyan</p>\n"},{"tags":[],"owner":{"account_id":77295,"reputation":10156,"user_id":220726,"accept_rate":70,"display_name":"Emre Yazici"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1329118441,"creation_date":1329118441,"answer_id":9256972,"question_id":1560788,"body_markdown":"You can iterate over all network connections and chek whether there is at least one available connection:\r\n\r\n    public boolean isConnected() {\r\n        boolean connected = false;\r\n    \r\n        ConnectivityManager cm = \r\n            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \r\n        if (cm != null) {\r\n            NetworkInfo[] netInfo = cm.getAllNetworkInfo();\r\n    \r\n            for (NetworkInfo ni : netInfo) {\r\n                if ((ni.getTypeName().equalsIgnoreCase(&quot;WIFI&quot;)\r\n                        || ni.getTypeName().equalsIgnoreCase(&quot;MOBILE&quot;))\r\n                        &amp;&amp; ni.isConnected() &amp;&amp; ni.isAvailable()) {\r\n                    connected = true;\r\n                }\r\n    \r\n            }\r\n        }\r\n    \r\n        return connected;\r\n    }","title":"How to check internet access on Android? InetAddress never times out","body":"<p>You can iterate over all network connections and chek whether there is at least one available connection:</p>\n\n<pre><code>public boolean isConnected() {\n    boolean connected = false;\n\n    ConnectivityManager cm = \n        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    if (cm != null) {\n        NetworkInfo[] netInfo = cm.getAllNetworkInfo();\n\n        for (NetworkInfo ni : netInfo) {\n            if ((ni.getTypeName().equalsIgnoreCase(\"WIFI\")\n                    || ni.getTypeName().equalsIgnoreCase(\"MOBILE\"))\n                    &amp;&amp; ni.isConnected() &amp;&amp; ni.isAvailable()) {\n                connected = true;\n            }\n\n        }\n    }\n\n    return connected;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1668702,"reputation":51,"user_id":1535596,"display_name":"JSupport"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1342649874,"creation_date":1342631165,"answer_id":11546687,"question_id":1560788,"body_markdown":"It is not complex to check Android network / internet connectivity status. The below `DetectConnection` class will help you to check this status:\r\n\r\n\r\n    import android.content.Context;\r\n    import android.net.ConnectivityManager;\r\n    \r\n    public class DetectConnection {\r\n        public static boolean checkInternetConnection(Context context) {\r\n            ConnectivityManager con_manager = (ConnectivityManager) context\r\n                                    .getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n            if (con_manager.getActiveNetworkInfo() != null\r\n                &amp;&amp; con_manager.getActiveNetworkInfo().isAvailable()\r\n                &amp;&amp; con_manager.getActiveNetworkInfo().isConnected()) {\r\n                    return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\nFor more details visit \r\n[How to Check Android Network / Internet Connectivity Status][1]\r\n\r\n\r\n  [1]: http://javasrilankansupport.blogspot.com/2012/07/how-to-check-android-network-internet.html","title":"How to check internet access on Android? InetAddress never times out","body":"<p>It is not complex to check Android network / internet connectivity status. The below <code>DetectConnection</code> class will help you to check this status:</p>\n\n<pre><code>import android.content.Context;\nimport android.net.ConnectivityManager;\n\npublic class DetectConnection {\n    public static boolean checkInternetConnection(Context context) {\n        ConnectivityManager con_manager = (ConnectivityManager) context\n                                .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n        if (con_manager.getActiveNetworkInfo() != null\n            &amp;&amp; con_manager.getActiveNetworkInfo().isAvailable()\n            &amp;&amp; con_manager.getActiveNetworkInfo().isConnected()) {\n                return true;\n        } else {\n            return false;\n        }\n    }\n}\n</code></pre>\n\n<p>For more details visit \n<a href=\"http://javasrilankansupport.blogspot.com/2012/07/how-to-check-android-network-internet.html\">How to Check Android Network / Internet Connectivity Status</a></p>\n"},{"tags":[],"owner":{"account_id":1549173,"reputation":197,"user_id":1441971,"display_name":"Android.Thirio.nl"},"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1365673061,"creation_date":1342704425,"answer_id":11561895,"question_id":1560788,"body_markdown":"I made this code, it is the simplest and it is just a boolean.\r\nby asking `if(isOnline()){`\r\n\r\nYou get if there is a connection and if it can connect to a page the status code `200` (stable connection).    \r\n\r\nMake sure to add the correct `INTERNET` and `ACCESS_NETWORK_STATE` permissions.\r\n\r\n    public boolean isOnline() {\r\n        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo netInfo = cm.getActiveNetworkInfo();\r\n        if (netInfo != null &amp;&amp; netInfo.isConnected()) {\r\n            try {\r\n                URL url = new URL(&quot;http://www.google.com&quot;);\r\n                HttpURLConnection urlc = (HttpURLConnection) url.openConnection();\r\n                urlc.setConnectTimeout(3000);\r\n                urlc.connect();\r\n                if (urlc.getResponseCode() == 200) {\r\n                    return new Boolean(true);\r\n                }\r\n            } catch (MalformedURLException e1) {\r\n                // TODO Auto-generated catch block\r\n                e1.printStackTrace();\r\n            } catch (IOException e) {\r\n                // TODO Auto-generated catch block\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        return false;\r\n    }","title":"How to check internet access on Android? InetAddress never times out","body":"<p>I made this code, it is the simplest and it is just a boolean.\nby asking <code>if(isOnline()){</code></p>\n\n<p>You get if there is a connection and if it can connect to a page the status code <code>200</code> (stable connection).    </p>\n\n<p>Make sure to add the correct <code>INTERNET</code> and <code>ACCESS_NETWORK_STATE</code> permissions.</p>\n\n<pre><code>public boolean isOnline() {\n    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo netInfo = cm.getActiveNetworkInfo();\n    if (netInfo != null &amp;&amp; netInfo.isConnected()) {\n        try {\n            URL url = new URL(\"http://www.google.com\");\n            HttpURLConnection urlc = (HttpURLConnection) url.openConnection();\n            urlc.setConnectTimeout(3000);\n            urlc.connect();\n            if (urlc.getResponseCode() == 200) {\n                return new Boolean(true);\n            }\n        } catch (MalformedURLException e1) {\n            // TODO Auto-generated catch block\n            e1.printStackTrace();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1515614,"reputation":4147,"user_id":1522593,"accept_rate":43,"display_name":"selva_pollachi"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1371653207,"creation_date":1343188569,"answer_id":11642475,"question_id":1560788,"body_markdown":"It&#39;s works for me. Try it out.\r\n\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.main);\r\n        try {\r\n            URL url = new URL(&quot;http://stackoverflow.com/posts/11642475/edit&quot; );\r\n            //URL url = new URL(&quot;http://www.nofoundwebsite.com/&quot; );\r\n            executeReq(url);\r\n            Toast.makeText(getApplicationContext(), &quot;Webpage is available!&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        catch(Exception e) {\r\n            Toast.makeText(getApplicationContext(), &quot;oops! webpage is not available!&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n   \r\n    private void executeReq(URL urlObject) throws IOException\r\n    {\r\n        HttpURLConnection conn = null;\r\n        conn = (HttpURLConnection) urlObject.openConnection();\r\n        conn.setReadTimeout(30000);//milliseconds\r\n        conn.setConnectTimeout(3500);//milliseconds\r\n        conn.setRequestMethod(&quot;GET&quot;);\r\n        conn.setDoInput(true);\r\n\r\n        // Start connect\r\n        conn.connect();\r\n        InputStream response =conn.getInputStream();\r\n        Log.d(&quot;Response:&quot;, response.toString());\r\n    }}\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>It's works for me. Try it out.</p>\n\n<pre><code>public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.main);\n    try {\n        URL url = new URL(\"http://stackoverflow.com/posts/11642475/edit\" );\n        //URL url = new URL(\"http://www.nofoundwebsite.com/\" );\n        executeReq(url);\n        Toast.makeText(getApplicationContext(), \"Webpage is available!\", Toast.LENGTH_SHORT).show();\n    }\n    catch(Exception e) {\n        Toast.makeText(getApplicationContext(), \"oops! webpage is not available!\", Toast.LENGTH_SHORT).show();\n    }\n}\n\nprivate void executeReq(URL urlObject) throws IOException\n{\n    HttpURLConnection conn = null;\n    conn = (HttpURLConnection) urlObject.openConnection();\n    conn.setReadTimeout(30000);//milliseconds\n    conn.setConnectTimeout(3500);//milliseconds\n    conn.setRequestMethod(\"GET\");\n    conn.setDoInput(true);\n\n    // Start connect\n    conn.connect();\n    InputStream response =conn.getInputStream();\n    Log.d(\"Response:\", response.toString());\n}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1203143,"reputation":4795,"user_id":1173391,"accept_rate":65,"display_name":"Nickolaus"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1348042748,"creation_date":1348042253,"answer_id":12490784,"question_id":1560788,"body_markdown":"Of everything I have seen so far shortest and cleanest way should be:\r\n\r\n    public final static boolean isConnected( Context context )\r\n    {   \r\n       final ConnectivityManager connectivityManager = \r\n             (ConnectivityManager) context.getSystemService( Context.CONNECTIVITY_SERVICE );  \r\n       final NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();    \r\n       return networkInfo != null &amp;&amp; networkInfo.isConnected();\r\n    }\r\n\r\nPS: This does not ping any host, it just checks the connectionstatus, so if your router has no internet connection and your device is connected to it this method would return **true** although you have no internet.&lt;br /&gt;\r\nFor an actual test I would recommend execuding a HttpHead request *(e.g. to www.google.com)* and check the status, if its **200 OK** everything is fine and your device has an internet connection.","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Of everything I have seen so far shortest and cleanest way should be:</p>\n\n<pre><code>public final static boolean isConnected( Context context )\n{   \n   final ConnectivityManager connectivityManager = \n         (ConnectivityManager) context.getSystemService( Context.CONNECTIVITY_SERVICE );  \n   final NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();    \n   return networkInfo != null &amp;&amp; networkInfo.isConnected();\n}\n</code></pre>\n\n<p>PS: This does not ping any host, it just checks the connectionstatus, so if your router has no internet connection and your device is connected to it this method would return <strong>true</strong> although you have no internet.<br />\nFor an actual test I would recommend execuding a HttpHead request <em>(e.g. to www.google.com)</em> and check the status, if its <strong>200 OK</strong> everything is fine and your device has an internet connection.</p>\n"},{"tags":[],"owner":{"account_id":1416962,"reputation":3409,"user_id":1342413,"accept_rate":64,"display_name":"laplasz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1353847162,"creation_date":1353844743,"answer_id":13550792,"question_id":1560788,"body_markdown":"For me it was not a good practice to check the connection state in the Activity class, because \r\n\r\n    ConnectivityManager cm =\r\n        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\nshould be called there, or you need to push down your Activity instance (context) to the connection handler class to able to check the connection state there\r\nWhen no available connection (wifi, network) I catch the **UnknownHostException** exception:\r\n\r\n    JSONObject jObj = null;\r\n    Boolean responded = false;\r\n    HttpGet requestForTest = new HttpGet(&quot;http://myserver.com&quot;);\r\n    try {\r\n        new DefaultHttpClient().execute(requestForTest);\r\n        responded = true;\r\n    } catch (UnknownHostException e) {\r\n        jObj = new JSONObject();\r\n        try {\r\n            jObj.put(&quot;answer_code&quot;, 1);\r\n            jObj.put(&quot;answer_text&quot;, &quot;No available connection&quot;);\r\n        } catch (Exception e1) {}\r\n        return jObj;\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\nIn this way I can handle this case along with the other cases in the same class (my server always response back with a json string)","title":"How to check internet access on Android? InetAddress never times out","body":"<p>For me it was not a good practice to check the connection state in the Activity class, because </p>\n\n<pre><code>ConnectivityManager cm =\n    (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n</code></pre>\n\n<p>should be called there, or you need to push down your Activity instance (context) to the connection handler class to able to check the connection state there\nWhen no available connection (wifi, network) I catch the <strong>UnknownHostException</strong> exception:</p>\n\n<pre><code>JSONObject jObj = null;\nBoolean responded = false;\nHttpGet requestForTest = new HttpGet(\"http://myserver.com\");\ntry {\n    new DefaultHttpClient().execute(requestForTest);\n    responded = true;\n} catch (UnknownHostException e) {\n    jObj = new JSONObject();\n    try {\n        jObj.put(\"answer_code\", 1);\n        jObj.put(\"answer_text\", \"No available connection\");\n    } catch (Exception e1) {}\n    return jObj;\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>In this way I can handle this case along with the other cases in the same class (my server always response back with a json string)</p>\n"},{"tags":[],"owner":{"account_id":1730715,"reputation":1315,"user_id":1584388,"display_name":"Lo Juego"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1359285156,"creation_date":1359285156,"answer_id":14546768,"question_id":1560788,"body_markdown":"Best approach:\r\n\r\n\tpublic static boolean isOnline() {\r\n\t\ttry {\r\n\t\tInetAddress.getByName(&quot;google.com&quot;).isReachable(3);\r\n\r\n\t\treturn true;\r\n\t\t} catch (UnknownHostException e){\r\n\t\treturn false;\r\n\t\t} catch (IOException e){\r\n\t\treturn false;\r\n\t\t}\r\n\t\t}","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Best approach:</p>\n\n<pre><code>public static boolean isOnline() {\n    try {\n    InetAddress.getByName(\"google.com\").isReachable(3);\n\n    return true;\n    } catch (UnknownHostException e){\n    return false;\n    } catch (IOException e){\n    return false;\n    }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":271507,"reputation":13000,"user_id":562073,"accept_rate":76,"display_name":"Mahendra Liya"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1370942556,"creation_date":1370942556,"answer_id":17040627,"question_id":1560788,"body_markdown":"Following is the code from my `Utils` class:\r\n\r\n    public static boolean isNetworkAvailable(Context context) {\r\n    \t    ConnectivityManager connectivityManager \r\n    \t          = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \t    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();\r\n    \t    return activeNetworkInfo != null &amp;&amp; activeNetworkInfo.isConnected();\r\n    }","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Following is the code from my <code>Utils</code> class:</p>\n\n<pre><code>public static boolean isNetworkAvailable(Context context) {\n        ConnectivityManager connectivityManager \n              = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();\n        return activeNetworkInfo != null &amp;&amp; activeNetworkInfo.isConnected();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1660028,"reputation":441,"user_id":1528493,"display_name":"user1528493"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1371141414,"creation_date":1371141414,"answer_id":17092484,"question_id":1560788,"body_markdown":"One important use case on mobile devices to it ensure an actual connection exists. This is a common problem when a mobile user enters a Wifi network with a &quot;Captive Portal&quot;, in which they need to sign in. I use this blocking function in the background to ensure a connection exists.\r\n\r\n    /*\r\n\t * Not Thread safe. Blocking thread. Returns true if it\r\n\t * can connect to URL, false and exception is logged.\r\n\t */\r\n\tpublic boolean checkConnectionHttps(String url){\r\n\t\tboolean responded = false;\r\n\t\tHttpGet requestTest = new HttpGet(url);\r\n\t\tHttpParams params = new BasicHttpParams();\r\n\t\tHttpConnectionParams.setConnectionTimeout(params, 3000);\r\n\t\tHttpConnectionParams.setSoTimeout(params, 5000);\r\n\t\tDefaultHttpClient client = new DefaultHttpClient(params);\r\n\t\ttry {\r\n\t\t\tclient.execute(requestTest);\r\n\t\t\tresponded = true;\r\n\t\t} catch (ClientProtocolException e) {\r\n\t\t\tLog.w(MainActivity.TAG,&quot;Unable to connect to &quot; + url + &quot; &quot; + e.toString());\r\n\t\t} catch (IOException e) {\r\n\t\t\tLog.w(MainActivity.TAG,&quot;Unable to connect to &quot; + url + &quot; &quot; + e.toString());\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn responded;\r\n\t}","title":"How to check internet access on Android? InetAddress never times out","body":"<p>One important use case on mobile devices to it ensure an actual connection exists. This is a common problem when a mobile user enters a Wifi network with a \"Captive Portal\", in which they need to sign in. I use this blocking function in the background to ensure a connection exists.</p>\n\n<pre><code>/*\n * Not Thread safe. Blocking thread. Returns true if it\n * can connect to URL, false and exception is logged.\n */\npublic boolean checkConnectionHttps(String url){\n    boolean responded = false;\n    HttpGet requestTest = new HttpGet(url);\n    HttpParams params = new BasicHttpParams();\n    HttpConnectionParams.setConnectionTimeout(params, 3000);\n    HttpConnectionParams.setSoTimeout(params, 5000);\n    DefaultHttpClient client = new DefaultHttpClient(params);\n    try {\n        client.execute(requestTest);\n        responded = true;\n    } catch (ClientProtocolException e) {\n        Log.w(MainActivity.TAG,\"Unable to connect to \" + url + \" \" + e.toString());\n    } catch (IOException e) {\n        Log.w(MainActivity.TAG,\"Unable to connect to \" + url + \" \" + e.toString());\n        e.printStackTrace();\n    }\n    return responded;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1465540471,"creation_date":1373503850,"answer_id":17583324,"question_id":1560788,"body_markdown":"Here is the method I use:\r\n\r\n\tpublic boolean isNetworkAvailable(final Context context) {\r\n\t\treturn ((ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo() != null;\r\n\t}\r\n\r\nEven better, check to make sure it is &quot;connected&quot;:\r\n\r\n    public boolean isNetworkAvailable(final Context context) {\r\n        final ConnectivityManager connectivityManager = ((ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE));\r\n        return connectivityManager.getActiveNetworkInfo() != null &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected();\r\n    }\r\n\r\nHere is how to use the method:\r\n\r\n    if (isNetworkAvailable(context)) {\r\n        // code here\r\n    } else {\r\n        // code\r\n    }\r\n\r\nPermission needed:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nhttps://stackoverflow.com/a/16124915/950427","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Here is the method I use:</p>\n\n<pre><code>public boolean isNetworkAvailable(final Context context) {\n    return ((ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo() != null;\n}\n</code></pre>\n\n<p>Even better, check to make sure it is \"connected\":</p>\n\n<pre><code>public boolean isNetworkAvailable(final Context context) {\n    final ConnectivityManager connectivityManager = ((ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE));\n    return connectivityManager.getActiveNetworkInfo() != null &amp;&amp; connectivityManager.getActiveNetworkInfo().isConnected();\n}\n</code></pre>\n\n<p>Here is how to use the method:</p>\n\n<pre><code>if (isNetworkAvailable(context)) {\n    // code here\n} else {\n    // code\n}\n</code></pre>\n\n<p>Permission needed:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/16124915/950427\">https://stackoverflow.com/a/16124915/950427</a></p>\n"},{"tags":[],"owner":{"account_id":3300202,"reputation":33,"user_id":2776554,"display_name":"geekdev786"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1380795777,"creation_date":1380795777,"answer_id":19156687,"question_id":1560788,"body_markdown":"    public static boolean isNetworkAvailable(Context ctx) {\r\n\tConnectivityManager connMgr = (ConnectivityManager)ctx.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\tif(connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnected() ||\r\n\t\tconnMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnected()){\r\n\t\t\treturn true;\r\n\t}\r\n\t\t\r\n\treturn false;\r\n     } \r\n\r\nuser this ","title":"How to check internet access on Android? InetAddress never times out","body":"<pre><code>public static boolean isNetworkAvailable(Context ctx) {\nConnectivityManager connMgr = (ConnectivityManager)ctx.getSystemService(Context.CONNECTIVITY_SERVICE);\nif(connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnected() ||\n    connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnected()){\n        return true;\n}\n\nreturn false;\n } \n</code></pre>\n\n<p>user this </p>\n"},{"tags":[],"owner":{"account_id":3480782,"reputation":182,"user_id":2912903,"display_name":"user2912903"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1382629864,"creation_date":1382629347,"answer_id":19570488,"question_id":1560788,"body_markdown":"    public class Network {\r\n\t\r\n\tContext context;\r\n\t\r\n\tpublic Network(Context context){\r\n\t\tthis.context = context;\r\n\t}\r\n\t\r\n\tpublic boolean isOnline() {\r\n\t\tConnectivityManager cm =\r\n\t\t        (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\t \r\n\t\tNetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n\t\treturn activeNetwork != null &amp;&amp;\r\n\t\t                      activeNetwork.isConnectedOrConnecting();\r\n\t}\r\n\r\n    }","title":"How to check internet access on Android? InetAddress never times out","body":"<pre><code>public class Network {\n\nContext context;\n\npublic Network(Context context){\n    this.context = context;\n}\n\npublic boolean isOnline() {\n    ConnectivityManager cm =\n            (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\n    return activeNetwork != null &amp;&amp;\n                          activeNetwork.isConnectedOrConnecting();\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1713018,"reputation":4082,"user_id":1570662,"accept_rate":100,"display_name":"Has AlTaiar"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1435577117,"creation_date":1388986261,"answer_id":20943594,"question_id":1560788,"body_markdown":"**Update 29/06/2015**\r\nIf you are using Xamarin.Android and want to check for connectivity, you can use a Nuget package that would give you this functionality on multiple platforms. Good candidates are [here][1] and [here][2]. \r\n[End of Update]\r\n\r\nThe Answers above are quite good, but they are all in Java, and almost all of them check for a connectivity. In my case, I needed to have connectivity with a specific type of connection and I am developing on Xamarin.Android. Moreover, I do not pass a reference to my activities Context in the Hardware layer, I use the Application Context. So here is my solution, in case somebody comes here with similar requirements. I have not done full testing though, will update the answer once I am done with my testing\r\n\r\n\r\n    using Android.App;\r\n    using Android.Content;\r\n    using Android.Net;\r\n    \r\n    namespace Leopard.Mobile.Hal.Android\r\n    {\r\n    \tpublic class AndroidNetworkHelper\r\n    \t{\r\n    \t\tpublic static AndroidNetworkStatus GetWifiConnectivityStatus()\r\n    \t\t{\r\n    \t\t\treturn GetConnectivityStatus(ConnectivityType.Wifi);\r\n    \t\t}\r\n    \r\n    \t\tpublic static AndroidNetworkStatus GetMobileConnectivityStatus()\r\n    \t\t{\r\n    \t\t\treturn GetConnectivityStatus(ConnectivityType.Mobile);\r\n    \t\t}\r\n    \r\n    \t\t#region Implementation\r\n    \t\t\r\n    \t\tprivate static AndroidNetworkStatus GetConnectivityStatus(ConnectivityType connectivityType)\r\n    \t\t{\r\n    \t\t\tvar connectivityManager = (ConnectivityManager)Application.Context.GetSystemService(Context.ConnectivityService);\r\n    \t\t\tvar wifiNetworkInfo = connectivityManager.GetNetworkInfo(connectivityType);\r\n    \t\t\tvar result = GetNetworkStatus(wifiNetworkInfo);\r\n    \t\t\treturn result;\r\n    \t\t}\r\n    \r\n    \t\tprivate static AndroidNetworkStatus GetNetworkStatus(NetworkInfo wifiNetworkInfo)\r\n    \t\t{\r\n    \t\t\tvar result = AndroidNetworkStatus.Unknown;\r\n    \t\t\tif (wifiNetworkInfo != null)\r\n    \t\t\t{\r\n    \t\t\t\tif (wifiNetworkInfo.IsAvailable &amp;&amp; wifiNetworkInfo.IsConnected)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tresult = AndroidNetworkStatus.Connected;\r\n    \t\t\t\t}\r\n    \t\t\t\telse\r\n    \t\t\t\t{\r\n    \t\t\t\t\tresult = AndroidNetworkStatus.Disconnected;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\treturn result;\r\n    \t\t} \r\n    \r\n    \t\t#endregion\r\n    \t}\r\n    \r\n    \tpublic enum AndroidNetworkStatus\r\n    \t{\r\n    \t\tConnected,\r\n    \t\tDisconnected,\r\n    \t\tUnknown\r\n    \t}\r\n\r\n\r\n  [1]: http://www.hasaltaiar.com.au/reachability-net-a-unified-api-for-reachability-network-connectivity-on-xamarin-android-and-ios/\r\n  [2]: https://www.nuget.org/packages/Xam.Plugin.Connectivity","title":"How to check internet access on Android? InetAddress never times out","body":"<p><strong>Update 29/06/2015</strong>\nIf you are using Xamarin.Android and want to check for connectivity, you can use a Nuget package that would give you this functionality on multiple platforms. Good candidates are <a href=\"http://www.hasaltaiar.com.au/reachability-net-a-unified-api-for-reachability-network-connectivity-on-xamarin-android-and-ios/\" rel=\"nofollow\">here</a> and <a href=\"https://www.nuget.org/packages/Xam.Plugin.Connectivity\" rel=\"nofollow\">here</a>. \n[End of Update]</p>\n\n<p>The Answers above are quite good, but they are all in Java, and almost all of them check for a connectivity. In my case, I needed to have connectivity with a specific type of connection and I am developing on Xamarin.Android. Moreover, I do not pass a reference to my activities Context in the Hardware layer, I use the Application Context. So here is my solution, in case somebody comes here with similar requirements. I have not done full testing though, will update the answer once I am done with my testing</p>\n\n<pre><code>using Android.App;\nusing Android.Content;\nusing Android.Net;\n\nnamespace Leopard.Mobile.Hal.Android\n{\n    public class AndroidNetworkHelper\n    {\n        public static AndroidNetworkStatus GetWifiConnectivityStatus()\n        {\n            return GetConnectivityStatus(ConnectivityType.Wifi);\n        }\n\n        public static AndroidNetworkStatus GetMobileConnectivityStatus()\n        {\n            return GetConnectivityStatus(ConnectivityType.Mobile);\n        }\n\n        #region Implementation\n\n        private static AndroidNetworkStatus GetConnectivityStatus(ConnectivityType connectivityType)\n        {\n            var connectivityManager = (ConnectivityManager)Application.Context.GetSystemService(Context.ConnectivityService);\n            var wifiNetworkInfo = connectivityManager.GetNetworkInfo(connectivityType);\n            var result = GetNetworkStatus(wifiNetworkInfo);\n            return result;\n        }\n\n        private static AndroidNetworkStatus GetNetworkStatus(NetworkInfo wifiNetworkInfo)\n        {\n            var result = AndroidNetworkStatus.Unknown;\n            if (wifiNetworkInfo != null)\n            {\n                if (wifiNetworkInfo.IsAvailable &amp;&amp; wifiNetworkInfo.IsConnected)\n                {\n                    result = AndroidNetworkStatus.Connected;\n                }\n                else\n                {\n                    result = AndroidNetworkStatus.Disconnected;\n                }\n            }\n            return result;\n        } \n\n        #endregion\n    }\n\n    public enum AndroidNetworkStatus\n    {\n        Connected,\n        Disconnected,\n        Unknown\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6524,"reputation":16314,"user_id":11015,"accept_rate":67,"display_name":"miguel"},"down_vote_count":3,"up_vote_count":7,"is_accepted":false,"score":4,"last_activity_date":1435602411,"creation_date":1391136927,"answer_id":21471645,"question_id":1560788,"body_markdown":"The other answers that use ConnectivityManager are wrong because having a network connection doesn&#39;t mean you have internet access. For example, the user might be connected to a coffee shop&#39;s WiFi portal but can&#39;t get to the internet. To check that the internet is accessible you have to try to connect to an actual server. Normally when you want to do this you have a specific server in mind that you want to connect to, so go ahead and check if you can connect to that server. Here&#39;s a simple method for checking connectivity to a server.\r\n\r\n\tprivate boolean isOnTheInternet() {\r\n\t\ttry {\r\n\t\t\tURLConnection urlConnection = new URL(&quot;http://yourserver&quot;).openConnection();\r\n\t\t\turlConnection.setConnectTimeout(400);\r\n\t\t\turlConnection.connect();\r\n\t\t\treturn true;\r\n\t\t} catch (Exception e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\nThe reason for setting the ConnectTimeout is that otherwise it defaults to the TCP timeout which can be many seconds long. \r\n\r\nNote also that Android won&#39;t let you run this on your main thread. ","title":"How to check internet access on Android? InetAddress never times out","body":"<p>The other answers that use ConnectivityManager are wrong because having a network connection doesn't mean you have internet access. For example, the user might be connected to a coffee shop's WiFi portal but can't get to the internet. To check that the internet is accessible you have to try to connect to an actual server. Normally when you want to do this you have a specific server in mind that you want to connect to, so go ahead and check if you can connect to that server. Here's a simple method for checking connectivity to a server.</p>\n\n<pre><code>private boolean isOnTheInternet() {\n    try {\n        URLConnection urlConnection = new URL(\"http://yourserver\").openConnection();\n        urlConnection.setConnectTimeout(400);\n        urlConnection.connect();\n        return true;\n    } catch (Exception e) {\n        return false;\n    }\n}\n</code></pre>\n\n<p>The reason for setting the ConnectTimeout is that otherwise it defaults to the TCP timeout which can be many seconds long. </p>\n\n<p>Note also that Android won't let you run this on your main thread. </p>\n"},{"tags":[],"owner":{"account_id":1327335,"reputation":8597,"user_id":1271898,"accept_rate":80,"display_name":"WonderWorker"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1439457234,"creation_date":1394037866,"answer_id":22203871,"question_id":1560788,"body_markdown":"This method gives you the option for a really fast method (for real time feedback) or a slower method (for one off checks that require reliability)\r\n\r\n    public boolean isNetworkAvailable(bool SlowButMoreReliable) {\r\n        bool Result = false; \r\n        try {\r\n    \t    if(SlowButMoreReliable){\r\n    \t\t    ConnectivityManager MyConnectivityManager = null;\r\n    \t        MyConnectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \t\r\n    \t        NetworkInfo MyNetworkInfo = null;\r\n    \t        MyNetworkInfo = MyConnectivityManager.getActiveNetworkInfo();\r\n    \t\r\n    \t        Result = MyNetworkInfo != null &amp;&amp; MyNetworkInfo.isConnected();\r\n    \t        \r\n    \t    } else\r\n    \t    {\r\n    \t\t\tRuntime runtime = Runtime.getRuntime();\r\n    \t        Process ipProcess = runtime.exec(&quot;/system/bin/ping -c 1 8.8.8.8&quot;);\r\n    \t        \r\n    \t        int i = ipProcess.waitFor();\r\n    \t        \r\n    \t        Result = i== 0;\r\n    \r\n            }\r\n            \r\n        } catch(Exception ex)\r\n        {\r\n            //Common.Exception(ex); //This method is one you should have that displays exceptions in your log\r\n        }\r\n        return Result;\r\n    }\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>This method gives you the option for a really fast method (for real time feedback) or a slower method (for one off checks that require reliability)</p>\n\n<pre><code>public boolean isNetworkAvailable(bool SlowButMoreReliable) {\n    bool Result = false; \n    try {\n        if(SlowButMoreReliable){\n            ConnectivityManager MyConnectivityManager = null;\n            MyConnectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n\n            NetworkInfo MyNetworkInfo = null;\n            MyNetworkInfo = MyConnectivityManager.getActiveNetworkInfo();\n\n            Result = MyNetworkInfo != null &amp;&amp; MyNetworkInfo.isConnected();\n\n        } else\n        {\n            Runtime runtime = Runtime.getRuntime();\n            Process ipProcess = runtime.exec(\"/system/bin/ping -c 1 8.8.8.8\");\n\n            int i = ipProcess.waitFor();\n\n            Result = i== 0;\n\n        }\n\n    } catch(Exception ex)\n    {\n        //Common.Exception(ex); //This method is one you should have that displays exceptions in your log\n    }\n    return Result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1305612,"reputation":934,"user_id":1254672,"display_name":"Musculaa"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1394213967,"creation_date":1394211473,"answer_id":22256082,"question_id":1560788,"body_markdown":"It does works for me:\r\n\r\nTo verify network availability:\r\n\r\n    private Boolean isNetworkAvailable() {\r\n    ConnectivityManager connectivityManager \r\n          = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();\r\n    return activeNetworkInfo != null &amp;&amp; activeNetworkInfo.isConnectedOrConnecting();}\r\n\r\n\r\nTo verify internet access:\r\n\r\n    public Boolean isOnline() {\r\n\t\ttry {\r\n\t\t\tProcess p1 = java.lang.Runtime.getRuntime().exec(&quot;ping -c 1 www.google.com&quot;);\r\n\t\t\tint returnVal = p1.waitFor();\r\n\t\t\tboolean reachable = (returnVal==0);\r\n\t\t\treturn reachable;\r\n\t\t} catch (Exception e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>It does works for me:</p>\n\n<p>To verify network availability:</p>\n\n<pre><code>private Boolean isNetworkAvailable() {\nConnectivityManager connectivityManager \n      = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\nNetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();\nreturn activeNetworkInfo != null &amp;&amp; activeNetworkInfo.isConnectedOrConnecting();}\n</code></pre>\n\n<p>To verify internet access:</p>\n\n<pre><code>public Boolean isOnline() {\n    try {\n        Process p1 = java.lang.Runtime.getRuntime().exec(\"ping -c 1 www.google.com\");\n        int returnVal = p1.waitFor();\n        boolean reachable = (returnVal==0);\n        return reachable;\n    } catch (Exception e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4483347,"reputation":126,"user_id":3790025,"accept_rate":71,"display_name":"Peter Gruppelaar"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1404127402,"creation_date":1404127402,"answer_id":24489017,"question_id":1560788,"body_markdown":"Its so great to have more then one way to code.\r\nHere is my example.\r\n\r\n    ConnectivityManager icheck = getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \r\n    TextView tv = findViewById(R.id.textView1);\r\n    \r\n    boolean wifi = icheck.getActiveNetworkInfo() != null;\r\n            if(wifi) {\r\n            tv.setText(&quot;Internet is on.&quot;);\t\r\n            } else {\r\n            \t tv.setText(&quot;Internet is off.&quot;);\t\r\n            }\r\n        \r\n\r\nGood luck.\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Its so great to have more then one way to code.\nHere is my example.</p>\n\n<pre><code>ConnectivityManager icheck = getSystemService(Context.CONNECTIVITY_SERVICE);\n\nTextView tv = findViewById(R.id.textView1);\n\nboolean wifi = icheck.getActiveNetworkInfo() != null;\n        if(wifi) {\n        tv.setText(\"Internet is on.\");  \n        } else {\n             tv.setText(\"Internet is off.\");    \n        }\n</code></pre>\n\n<p>Good luck.</p>\n"},{"tags":[],"owner":{"account_id":1129864,"reputation":6795,"user_id":1116216,"accept_rate":100,"display_name":"Michele La Ferla"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1409831471,"creation_date":1409831471,"answer_id":25664759,"question_id":1560788,"body_markdown":"Just create the following class which checks for an internet connection:\r\n\r\n    public class ConnectionStatus {\r\n    \r\n    \tprivate Context _context;\r\n    \r\n    \tpublic ConnectionStatus(Context context) {\r\n    \t\tthis._context = context;\r\n    \t}\r\n    \r\n    \tpublic boolean isConnectionAvailable() {\r\n    \t\tConnectivityManager connectivity = (ConnectivityManager) _context\r\n    \t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \t\tif (connectivity != null) {\r\n    \t\t\tNetworkInfo[] info = connectivity.getAllNetworkInfo();\r\n    \t\t\tif (info != null)\r\n    \t\t\t\tfor (int i = 0; i &lt; info.length; i++)\r\n    \t\t\t\t\tif (info[i].getState() == NetworkInfo.State.CONNECTED) {\r\n    \t\t\t\t\t\treturn true;\r\n    \t\t\t\t\t}\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t}\r\n    }\r\n\r\nThis class simply contains a method which returns the boolean value of the connection status. Therefore in simple terms, if the method finds a valid connection to the Internet, the return value is `true`, otherwise `false` if no valid connection is found.\r\n\r\nThe following method in the MainActivity then calls the result from the method previously described, and prompts the user to act accordingly:\r\n\r\n    public void addListenerOnWifiButton() {\r\n            Button btnWifi = (Button)findViewById(R.id.btnWifi);\r\n            \r\n            iia = new ConnectionStatus(getApplicationContext());\r\n    \r\n            isConnected = iia.isConnectionAvailable();\r\n            if (!isConnected) {\r\n                btnWifi.setOnClickListener(new View.OnClickListener() {\r\n    \r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        startActivity(new Intent(Settings.ACTION_WIFI_SETTINGS));\r\n                        Toast.makeText(getBaseContext(), &quot;Please connect to a hotspot&quot;,\r\n                                Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                btnWifi.setVisibility(4);\r\n                warning.setText(&quot;This app may use your mobile data to update events and get their details.&quot;);\r\n            }\r\n        }\r\n\r\nIn the above code, if the result is false, (therefore there is no internet connection, the user is taken to the Android wi-fi panel, where he is prompted to connect to a wi-fi hotspot.","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Just create the following class which checks for an internet connection:</p>\n\n<pre><code>public class ConnectionStatus {\n\n    private Context _context;\n\n    public ConnectionStatus(Context context) {\n        this._context = context;\n    }\n\n    public boolean isConnectionAvailable() {\n        ConnectivityManager connectivity = (ConnectivityManager) _context\n                .getSystemService(Context.CONNECTIVITY_SERVICE);\n        if (connectivity != null) {\n            NetworkInfo[] info = connectivity.getAllNetworkInfo();\n            if (info != null)\n                for (int i = 0; i &lt; info.length; i++)\n                    if (info[i].getState() == NetworkInfo.State.CONNECTED) {\n                        return true;\n                    }\n        }\n        return false;\n    }\n}\n</code></pre>\n\n<p>This class simply contains a method which returns the boolean value of the connection status. Therefore in simple terms, if the method finds a valid connection to the Internet, the return value is <code>true</code>, otherwise <code>false</code> if no valid connection is found.</p>\n\n<p>The following method in the MainActivity then calls the result from the method previously described, and prompts the user to act accordingly:</p>\n\n<pre><code>public void addListenerOnWifiButton() {\n        Button btnWifi = (Button)findViewById(R.id.btnWifi);\n\n        iia = new ConnectionStatus(getApplicationContext());\n\n        isConnected = iia.isConnectionAvailable();\n        if (!isConnected) {\n            btnWifi.setOnClickListener(new View.OnClickListener() {\n\n                @Override\n                public void onClick(View v) {\n                    startActivity(new Intent(Settings.ACTION_WIFI_SETTINGS));\n                    Toast.makeText(getBaseContext(), \"Please connect to a hotspot\",\n                            Toast.LENGTH_SHORT).show();\n                }\n            });\n        }\n        else {\n            btnWifi.setVisibility(4);\n            warning.setText(\"This app may use your mobile data to update events and get their details.\");\n        }\n    }\n</code></pre>\n\n<p>In the above code, if the result is false, (therefore there is no internet connection, the user is taken to the Android wi-fi panel, where he is prompted to connect to a wi-fi hotspot.</p>\n"},{"tags":[],"owner":{"account_id":1359980,"reputation":17363,"user_id":1680919,"accept_rate":60,"display_name":"Levite"},"down_vote_count":5,"up_vote_count":685,"is_accepted":true,"score":680,"last_activity_date":1613638788,"creation_date":1417771221,"answer_id":27312494,"question_id":1560788,"body_markdown":"# Network connection / Internet access\r\n\r\n - `isConnectedOrConnecting()` (used in most answers) checks for any **network** connection\r\n - To know whether any of those networks have **internet** access, use one of the following\r\n\r\n### A) Ping a Server (easy) ###\r\n\r\n    // ICMP \r\n    public boolean isOnline() {\r\n        Runtime runtime = Runtime.getRuntime();\r\n        try {\r\n            Process ipProcess = runtime.exec(&quot;/system/bin/ping -c 1 8.8.8.8&quot;);\r\n            int     exitValue = ipProcess.waitFor();\r\n            return (exitValue == 0);\r\n        }\r\n        catch (IOException e)          { e.printStackTrace(); }\r\n        catch (InterruptedException e) { e.printStackTrace(); }\r\n\r\n        return false;\r\n    }\r\n\r\n`+` could run on main thread\r\n\r\n`-` does not work on some old devices (Galays S3, etc.), it blocks a while if no internet is available.\r\n \r\n### B) Connect to a Socket on the Internet (advanced) ###\r\n\r\n    // TCP/HTTP/DNS (depending on the port, 53=DNS, 80=HTTP, etc.)\r\n    public boolean isOnline() {\r\n        try {\r\n            int timeoutMs = 1500;\r\n            Socket sock = new Socket();\r\n            SocketAddress sockaddr = new InetSocketAddress(&quot;8.8.8.8&quot;, 53);\r\n\r\n            sock.connect(sockaddr, timeoutMs);\r\n            sock.close();\r\n\r\n            return true;\r\n        } catch (IOException e) { return false; }\r\n    }\r\n\r\n`+` very fast (either way), works on all devices, *very* reliable\r\n\r\n`-` can&#39;t run on the UI thread\r\n\r\n   This works very reliably, on every device, and is very fast. It needs to run in a separate task though (e.g. `ScheduledExecutorService` or `AsyncTask`).\r\n\r\n\r\n### Possible Questions\r\n\r\n  - Is it really fast enough?\r\n\r\n    *Yes, very fast ;-)*\r\n\r\n  - Is there no reliable way to check internet, other than testing something on the internet?\r\n\r\n    *Not as far as I know, but let me know, and I will edit my answer.*\r\n\r\n\r\n  - What if the DNS is down?\r\n      \r\n    *Google DNS (e.g. `8.8.8.8`) is the largest public DNS in the world. As of 2018 it handled over a trillion queries a day [[1]]. Let &#39;s just say, your app would probably not be the talk of the day.*\r\n\r\n\r\n  - Which permissions are required?\r\n\r\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n    *Just internet access - surprise ^^ (Btw have you ever thought about, how some of the methods suggested here could even have a remote glue about internet access, without this permission?)*\r\n\r\n&amp;nbsp;\r\n\r\n### Extra: One-shot `RxJava/RxAndroid` Example (Kotlin)\r\n\r\n    fun hasInternetConnection(): Single&lt;Boolean&gt; {\r\n      return Single.fromCallable {\r\n        try {\r\n          // Connect to Google DNS to check for connection\r\n          val timeoutMs = 1500\r\n          val socket = Socket()\r\n          val socketAddress = InetSocketAddress(&quot;8.8.8.8&quot;, 53)\r\n        \r\n          socket.connect(socketAddress, timeoutMs)\r\n          socket.close()\r\n      \r\n          true\r\n        } catch (e: IOException) {\r\n          false\r\n        }\r\n      }\r\n      .subscribeOn(Schedulers.io())\r\n      .observeOn(AndroidSchedulers.mainThread())\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////\r\n    // Usage\r\n\r\n        hasInternetConnection().subscribe { hasInternet -&gt; /* do something */}\r\n\r\n\r\n\r\n### Extra: One-shot `RxJava/RxAndroid` Example (Java)\r\n    public static Single&lt;Boolean&gt; hasInternetConnection() {\r\n        return Single.fromCallable(() -&gt; {\r\n            try {\r\n                // Connect to Google DNS to check for connection\r\n                int timeoutMs = 1500;\r\n                Socket socket = new Socket();\r\n                InetSocketAddress socketAddress = new InetSocketAddress(&quot;8.8.8.8&quot;, 53);\r\n\r\n                socket.connect(socketAddress, timeoutMs);\r\n                socket.close();\r\n\r\n                return true;\r\n            } catch (IOException e) {\r\n                return false;\r\n            }\r\n        }).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread());\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////\r\n    // Usage\r\n\r\n        hasInternetConnection().subscribe((hasInternet) -&gt; {\r\n            if(hasInternet) {\r\n\r\n            }else {\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n### Extra: One-shot `AsyncTask` Example\r\n\r\n*Caution:* This shows another example of how to do the request. However, since `AsyncTask` is deprecated, it should be replaced by your App&#39;s thread scheduling,  Kotlin Coroutines, Rx, ...\r\n\r\n    class InternetCheck extends AsyncTask&lt;Void,Void,Boolean&gt; {\r\n    \r\n        private Consumer mConsumer;\r\n        public  interface Consumer { void accept(Boolean internet); }\r\n    \r\n        public  InternetCheck(Consumer consumer) { mConsumer = consumer; execute(); }\r\n    \r\n        @Override protected Boolean doInBackground(Void... voids) { try {\r\n            Socket sock = new Socket();\r\n            sock.connect(new InetSocketAddress(&quot;8.8.8.8&quot;, 53), 1500);\r\n            sock.close();\r\n            return true;\r\n        } catch (IOException e) { return false; } }\r\n    \r\n        @Override protected void onPostExecute(Boolean internet) { mConsumer.accept(internet); }\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////\r\n    // Usage\r\n\r\n        new InternetCheck(internet -&gt; { /* do something with boolean response */ });\r\n\r\n\r\n  [1]: https://security.googleblog.com/2018/08/google-public-dns-turns-8888-years-old.html\r\n  [10]: http://stackoverflow.com/a/16458623/1680919\r\n  ","title":"How to check internet access on Android? InetAddress never times out","body":"<h1>Network connection / Internet access</h1>\n<ul>\n<li><code>isConnectedOrConnecting()</code> (used in most answers) checks for any <strong>network</strong> connection</li>\n<li>To know whether any of those networks have <strong>internet</strong> access, use one of the following</li>\n</ul>\n<h3>A) Ping a Server (easy)</h3>\n<pre><code>// ICMP \npublic boolean isOnline() {\n    Runtime runtime = Runtime.getRuntime();\n    try {\n        Process ipProcess = runtime.exec(&quot;/system/bin/ping -c 1 8.8.8.8&quot;);\n        int     exitValue = ipProcess.waitFor();\n        return (exitValue == 0);\n    }\n    catch (IOException e)          { e.printStackTrace(); }\n    catch (InterruptedException e) { e.printStackTrace(); }\n\n    return false;\n}\n</code></pre>\n<p><code>+</code> could run on main thread</p>\n<p><code>-</code> does not work on some old devices (Galays S3, etc.), it blocks a while if no internet is available.</p>\n<h3>B) Connect to a Socket on the Internet (advanced)</h3>\n<pre><code>// TCP/HTTP/DNS (depending on the port, 53=DNS, 80=HTTP, etc.)\npublic boolean isOnline() {\n    try {\n        int timeoutMs = 1500;\n        Socket sock = new Socket();\n        SocketAddress sockaddr = new InetSocketAddress(&quot;8.8.8.8&quot;, 53);\n\n        sock.connect(sockaddr, timeoutMs);\n        sock.close();\n\n        return true;\n    } catch (IOException e) { return false; }\n}\n</code></pre>\n<p><code>+</code> very fast (either way), works on all devices, <em>very</em> reliable</p>\n<p><code>-</code> can't run on the UI thread</p>\n<p>This works very reliably, on every device, and is very fast. It needs to run in a separate task though (e.g. <code>ScheduledExecutorService</code> or <code>AsyncTask</code>).</p>\n<h3>Possible Questions</h3>\n<ul>\n<li><p>Is it really fast enough?</p>\n<p><em>Yes, very fast ;-)</em></p>\n</li>\n<li><p>Is there no reliable way to check internet, other than testing something on the internet?</p>\n<p><em>Not as far as I know, but let me know, and I will edit my answer.</em></p>\n</li>\n<li><p>What if the DNS is down?</p>\n<p><em>Google DNS (e.g. <code>8.8.8.8</code>) is the largest public DNS in the world. As of 2018 it handled over a trillion queries a day [<a href=\"https://security.googleblog.com/2018/08/google-public-dns-turns-8888-years-old.html\" rel=\"noreferrer\">1</a>]. Let 's just say, your app would probably not be the talk of the day.</em></p>\n</li>\n<li><p>Which permissions are required?</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n</code></pre>\n<p><em>Just internet access - surprise ^^ (Btw have you ever thought about, how some of the methods suggested here could even have a remote glue about internet access, without this permission?)</em></p>\n</li>\n</ul>\n<p></p>\n<h3>Extra: One-shot <code>RxJava/RxAndroid</code> Example (Kotlin)</h3>\n<pre><code>fun hasInternetConnection(): Single&lt;Boolean&gt; {\n  return Single.fromCallable {\n    try {\n      // Connect to Google DNS to check for connection\n      val timeoutMs = 1500\n      val socket = Socket()\n      val socketAddress = InetSocketAddress(&quot;8.8.8.8&quot;, 53)\n    \n      socket.connect(socketAddress, timeoutMs)\n      socket.close()\n  \n      true\n    } catch (e: IOException) {\n      false\n    }\n  }\n  .subscribeOn(Schedulers.io())\n  .observeOn(AndroidSchedulers.mainThread())\n}\n\n///////////////////////////////////////////////////////////////////////////////////\n// Usage\n\n    hasInternetConnection().subscribe { hasInternet -&gt; /* do something */}\n</code></pre>\n<h3>Extra: One-shot <code>RxJava/RxAndroid</code> Example (Java)</h3>\n<pre><code>public static Single&lt;Boolean&gt; hasInternetConnection() {\n    return Single.fromCallable(() -&gt; {\n        try {\n            // Connect to Google DNS to check for connection\n            int timeoutMs = 1500;\n            Socket socket = new Socket();\n            InetSocketAddress socketAddress = new InetSocketAddress(&quot;8.8.8.8&quot;, 53);\n\n            socket.connect(socketAddress, timeoutMs);\n            socket.close();\n\n            return true;\n        } catch (IOException e) {\n            return false;\n        }\n    }).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread());\n}\n\n///////////////////////////////////////////////////////////////////////////////////\n// Usage\n\n    hasInternetConnection().subscribe((hasInternet) -&gt; {\n        if(hasInternet) {\n\n        }else {\n\n        }\n    });\n</code></pre>\n<h3>Extra: One-shot <code>AsyncTask</code> Example</h3>\n<p><em>Caution:</em> This shows another example of how to do the request. However, since <code>AsyncTask</code> is deprecated, it should be replaced by your App's thread scheduling,  Kotlin Coroutines, Rx, ...</p>\n<pre><code>class InternetCheck extends AsyncTask&lt;Void,Void,Boolean&gt; {\n\n    private Consumer mConsumer;\n    public  interface Consumer { void accept(Boolean internet); }\n\n    public  InternetCheck(Consumer consumer) { mConsumer = consumer; execute(); }\n\n    @Override protected Boolean doInBackground(Void... voids) { try {\n        Socket sock = new Socket();\n        sock.connect(new InetSocketAddress(&quot;8.8.8.8&quot;, 53), 1500);\n        sock.close();\n        return true;\n    } catch (IOException e) { return false; } }\n\n    @Override protected void onPostExecute(Boolean internet) { mConsumer.accept(internet); }\n}\n\n///////////////////////////////////////////////////////////////////////////////////\n// Usage\n\n    new InternetCheck(internet -&gt; { /* do something with boolean response */ });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3349484,"reputation":3748,"user_id":2813804,"accept_rate":100,"display_name":"Akshay Paliwal"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1423038091,"creation_date":1423038091,"answer_id":28316631,"question_id":1560788,"body_markdown":"You can use this method to detect network availability-\r\n\r\n  \r\n\r\n    public static boolean isDeviceOnline(Context context) {\r\n    \t\tboolean isConnectionAvail = false;\r\n    \t\ttry {\r\n    \t\t\tConnectivityManager cm = (ConnectivityManager) context\r\n    \t\t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \t\t\tNetworkInfo netInfo = cm.getActiveNetworkInfo();\r\n    \t\t\treturn netInfo.isConnected();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn isConnectionAvail;\r\n    \t}","title":"How to check internet access on Android? InetAddress never times out","body":"<p>You can use this method to detect network availability-</p>\n\n<pre><code>public static boolean isDeviceOnline(Context context) {\n        boolean isConnectionAvail = false;\n        try {\n            ConnectivityManager cm = (ConnectivityManager) context\n                    .getSystemService(Context.CONNECTIVITY_SERVICE);\n            NetworkInfo netInfo = cm.getActiveNetworkInfo();\n            return netInfo.isConnected();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return isConnectionAvail;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":290585,"reputation":6089,"user_id":592217,"display_name":"k4dima"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1445177475,"creation_date":1426520552,"answer_id":29081007,"question_id":1560788,"body_markdown":"This is covered in android docs\r\nhttp://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html","title":"How to check internet access on Android? InetAddress never times out","body":"<p>This is covered in android docs\n<a href=\"http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html\" rel=\"nofollow\">http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html</a></p>\n"},{"tags":[],"owner":{"account_id":5342004,"reputation":139,"user_id":4258750,"display_name":"Amareshwar Bhat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447737936,"creation_date":1447737936,"answer_id":33749769,"question_id":1560788,"body_markdown":"    if(isConnected()){\r\n                    Toast.makeText(getApplication(),&quot;Thank you&quot;,Toast.LENGTH_SHORT).show();\r\n            }\r\n            else{\r\n    \r\n                AlertDialog.Builder builder =\r\n                        new AlertDialog.Builder(this, R.style.AppCompatAlertDialogStyle);\r\n                builder.setTitle(&quot;Amar Bhat&quot;);\r\n                builder.setMessage(&quot;Oops...You are not connected to Internet!!!&quot;);\r\n                builder.setPositiveButton(&quot;OK&quot;, null);\r\n                builder.setNegativeButton(&quot;Cancel&quot;, null);\r\n                builder.show();\r\n                //Toast.makeText(getApplication(),&quot;You are not connected&quot;,Toast.LENGTH_SHORT).show();\r\n            }\r\n    \r\n    \r\n    \r\n    \r\n    //And outside the class define isConnected()\r\n    \r\n     public boolean isConnected(){\r\n            ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Activity.CONNECTIVITY_SERVICE);\r\n            NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();\r\n            if (networkInfo != null &amp;&amp; networkInfo.isConnected())\r\n                return true;\r\n            else\r\n                return false;\r\n        }\r\n    \r\n    // In minifest add these permission\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;","title":"How to check internet access on Android? InetAddress never times out","body":"<pre><code>if(isConnected()){\n                Toast.makeText(getApplication(),\"Thank you\",Toast.LENGTH_SHORT).show();\n        }\n        else{\n\n            AlertDialog.Builder builder =\n                    new AlertDialog.Builder(this, R.style.AppCompatAlertDialogStyle);\n            builder.setTitle(\"Amar Bhat\");\n            builder.setMessage(\"Oops...You are not connected to Internet!!!\");\n            builder.setPositiveButton(\"OK\", null);\n            builder.setNegativeButton(\"Cancel\", null);\n            builder.show();\n            //Toast.makeText(getApplication(),\"You are not connected\",Toast.LENGTH_SHORT).show();\n        }\n\n\n\n\n//And outside the class define isConnected()\n\n public boolean isConnected(){\n        ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Activity.CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();\n        if (networkInfo != null &amp;&amp; networkInfo.isConnected())\n            return true;\n        else\n            return false;\n    }\n\n// In minifest add these permission\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n\n    &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3696314,"reputation":1873,"user_id":3077569,"display_name":"Context"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447771199,"creation_date":1447771199,"answer_id":33759679,"question_id":1560788,"body_markdown":"Don&#39;t forget to add this permissions to your manifest :\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Don't forget to add this permissions to your manifest :</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7018461,"reputation":239,"user_id":5378877,"accept_rate":20,"display_name":"Vishnu M A"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1461350144,"creation_date":1457413348,"answer_id":35859366,"question_id":1560788,"body_markdown":"This code will help you find the internet is on or not.\r\n\r\n    public final boolean isInternetOn() {\r\n    \t\tConnectivityManager conMgr = (ConnectivityManager) this.con\r\n    \t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \t\tNetworkInfo info = conMgr.getActiveNetworkInfo();\r\n    \t\treturn (info != null &amp;&amp; info.isConnected());\r\n    }\r\n\r\nAlso, you should provide the following permissions\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>This code will help you find the internet is on or not.</p>\n\n<pre><code>public final boolean isInternetOn() {\n        ConnectivityManager conMgr = (ConnectivityManager) this.con\n                .getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo info = conMgr.getActiveNetworkInfo();\n        return (info != null &amp;&amp; info.isConnected());\n}\n</code></pre>\n\n<p>Also, you should provide the following permissions</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1210558,"reputation":1722,"user_id":1179181,"accept_rate":33,"display_name":"D.Snap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470130446,"creation_date":1470129268,"answer_id":38716340,"question_id":1560788,"body_markdown":"Most of the answers in this thread only check if there is a connection available but do not check if that connection work, others answers are not device wide, my solution should work on every device.\r\n\r\nYou can drop my code in your main activity before launching the app, it will quickly determine if there is an actual internet connectivity, if there is the dialog will be immediately dropped and the app will be launched, if not an alert will pop up saying the app needs internet connectivity to work.\r\n\r\n    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();\r\n            alertDialog.setTitle(&quot;Checking Connection&quot;);\r\n            alertDialog.setMessage(&quot;Checking...&quot;);\r\n            alertDialog.show();\r\n            new CountDownTimer(5000, 1000) {\r\n                @Override\r\n                public void onTick(long millisUntilFinished) {\r\n    \r\n                    new Thread(new Runnable() {\r\n                        public void run() {\r\n                            try {\r\n                                URL url = new URL(&quot;http://web.mit.edu/&quot;);\r\n                                HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n                                connection.setRequestMethod(&quot;GET&quot;);\r\n                                connection.setConnectTimeout(5000);\r\n                                isConnected = connection.getResponseCode() == HttpURLConnection.HTTP_OK;\r\n                            } catch (Exception e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                    }).start();\r\n    \r\n                    if (isConnected == false){\r\n                        alertDialog.setMessage(&quot;Try &quot; +  (5 - millisUntilFinished/1000) + &quot; of 5.&quot;);\r\n                    } else {\r\n                        alertDialog.dismiss();\r\n                    }\r\n                }\r\n                @Override\r\n                public void onFinish() {\r\n                    if (isConnected == false) {\r\n                        alertDialog.dismiss();\r\n                        new AlertDialog.Builder(activity)\r\n                                .setTitle(&quot;No Internet&quot;)\r\n                                .setMessage(&quot;Please connect to Internet first.&quot;)\r\n                                .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {\r\n                                    public void onClick(DialogInterface dialog, int which) {\r\n                                        // kill the app?\r\n                                    }\r\n                                })\r\n                                .setIcon(android.R.drawable.ic_dialog_alert)\r\n                                .show();\r\n                    } else {\r\n                        // Launch the app\r\n                    }\r\n                }\r\n            }.start();","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Most of the answers in this thread only check if there is a connection available but do not check if that connection work, others answers are not device wide, my solution should work on every device.</p>\n\n<p>You can drop my code in your main activity before launching the app, it will quickly determine if there is an actual internet connectivity, if there is the dialog will be immediately dropped and the app will be launched, if not an alert will pop up saying the app needs internet connectivity to work.</p>\n\n<pre><code>final AlertDialog alertDialog = new AlertDialog.Builder(this).create();\n        alertDialog.setTitle(\"Checking Connection\");\n        alertDialog.setMessage(\"Checking...\");\n        alertDialog.show();\n        new CountDownTimer(5000, 1000) {\n            @Override\n            public void onTick(long millisUntilFinished) {\n\n                new Thread(new Runnable() {\n                    public void run() {\n                        try {\n                            URL url = new URL(\"http://web.mit.edu/\");\n                            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n                            connection.setRequestMethod(\"GET\");\n                            connection.setConnectTimeout(5000);\n                            isConnected = connection.getResponseCode() == HttpURLConnection.HTTP_OK;\n                        } catch (Exception e) {\n                            e.printStackTrace();\n                        }\n                    }\n                }).start();\n\n                if (isConnected == false){\n                    alertDialog.setMessage(\"Try \" +  (5 - millisUntilFinished/1000) + \" of 5.\");\n                } else {\n                    alertDialog.dismiss();\n                }\n            }\n            @Override\n            public void onFinish() {\n                if (isConnected == false) {\n                    alertDialog.dismiss();\n                    new AlertDialog.Builder(activity)\n                            .setTitle(\"No Internet\")\n                            .setMessage(\"Please connect to Internet first.\")\n                            .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {\n                                public void onClick(DialogInterface dialog, int which) {\n                                    // kill the app?\n                                }\n                            })\n                            .setIcon(android.R.drawable.ic_dialog_alert)\n                            .show();\n                } else {\n                    // Launch the app\n                }\n            }\n        }.start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4930051,"reputation":1712,"user_id":3970128,"accept_rate":100,"display_name":"alireza amini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471442202,"creation_date":1471442202,"answer_id":38998759,"question_id":1560788,"body_markdown":"    public boolean isNetworkAvailable(Context context) {\r\n        ConnectivityManager connectivityManager\r\n                = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();\r\n        return activeNetworkInfo != null &amp;&amp; activeNetworkInfo.isConnected();\r\n    }\r\n\r\nHere is the permission that you need :\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<pre><code>public boolean isNetworkAvailable(Context context) {\n    ConnectivityManager connectivityManager\n            = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();\n    return activeNetworkInfo != null &amp;&amp; activeNetworkInfo.isConnected();\n}\n</code></pre>\n\n<p>Here is the permission that you need :</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2873223,"reputation":1679,"user_id":2466041,"display_name":"ViramP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471442417,"creation_date":1471442417,"answer_id":38998843,"question_id":1560788,"body_markdown":"You can check internet with below code as well:\r\n\r\n  \r\n\r\n     public class CheckInternetConnection {\r\n        \tpublic Context context = null;\r\n        \r\n        \tpublic CheckInternetConnection(Context ctx) {\r\n        \t\tthis.context = ctx;\r\n        \t}\r\n        \r\n        \tpublic boolean CheckInternet() {\r\n        \t\treturn isOnline();\r\n        \t}\r\n        \tpublic Boolean isOnline() \r\n        \t{\r\n        \t\ttry {\r\n        \t\t\tif(isNetAvailable(context))\r\n        \t\t\t\treturn true;\r\n        \t\t\telse\r\n        \t\t\t{\r\n        \t\t\t\ttry {\r\n        \t\t\t\t\tURL url = new URL(&quot;http://www.google.com&quot;);\r\n        \t\t\t\t\tHttpURLConnection urlc = (HttpURLConnection) url\r\n        \t\t\t\t\t\t\t.openConnection();\r\n        \t\t\t\t\turlc.setRequestProperty(&quot;User-Agent&quot;, &quot;Test&quot;);\r\n        \t\t\t\t\turlc.setRequestProperty(&quot;Connection&quot;, &quot;close&quot;);\r\n        \t\t\t\t\turlc.setConnectTimeout(3000); // This is time limit if the\r\n        \t\t\t\t\t// connection time limit\r\n        \t\t\t\t\ttry {\r\n        \t\t\t\t\t\turlc.connect();\r\n        \t\t\t\t\t\tLog.e(&quot;TAG&quot;, &quot; urlc ----------&quot; + urlc.getResponseCode());\r\n        \t\t\t\t\t\tif (urlc.getResponseCode() == 200) {\r\n        \t\t\t\t\t\t\treturn true;\r\n        \t\t\t\t\t\t}\r\n        \t\t\t\t\t}catch (Exception e){\r\n        \t\t\t\t\t\te.printStackTrace();\r\n        \t\t\t\t\t}\r\n        \t\t\t\t} catch (MalformedURLException e1) {\r\n        \t\t\t\t\te1.printStackTrace();\r\n        \t\t\t\t} catch (IOException e) {\r\n        \t\t\t\t\te.printStackTrace();\r\n        \t\t\t\t}\r\n        \t\t\t}\r\n        \t\t}catch (Exception e){\r\n        \t\t\te.printStackTrace();\r\n        \t\t}\r\n        \r\n        \t    return false;\t\t \r\n        \t}\r\n        \r\n        \t public synchronized static boolean isNetAvailable(Context context){\r\n        \r\n        \t\t try{\r\n                 boolean isNetAvailable=false;\r\n                 if ( context != null )\r\n                 {\r\n                     ConnectivityManager mgr = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n                     if ( mgr != null )\r\n                     {\r\n                         boolean mobileNetwork = false;\r\n                         boolean wifiNetwork = false;\r\n                         boolean wiMaxNetwork = false;\r\n        \r\n                         boolean mobileNetworkConnecetd = false;\r\n                         boolean wifiNetworkConnecetd = false;\r\n                         boolean wiMaxNetworkConnected = false;\r\n        \r\n                         NetworkInfo mobileInfo = mgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\r\n                         NetworkInfo wifiInfo = mgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\r\n                         NetworkInfo wiMaxInfo = mgr.getNetworkInfo(ConnectivityManager.TYPE_WIMAX);\r\n        \r\n                         if ( mobileInfo != null )\r\n                             mobileNetwork = mobileInfo.isAvailable();                   \r\n        \r\n                         if ( wifiInfo != null )\r\n                             wifiNetwork = wifiInfo.isAvailable();\r\n        \r\n                         if(wiMaxInfo != null)\r\n                             wiMaxNetwork = wiMaxInfo.isAvailable();\r\n        \r\n                         if(wifiNetwork == true)\r\n                        \t wifiNetworkConnecetd = wifiInfo.isConnectedOrConnecting();\r\n                         if(mobileNetwork == true)\r\n                        \t mobileNetworkConnecetd = mobileInfo.isConnectedOrConnecting();\r\n                         if(wiMaxNetwork == true)\r\n                             wiMaxNetworkConnected = wiMaxInfo.isConnectedOrConnecting();\r\n                         \r\n                         isNetAvailable = ( mobileNetworkConnecetd || wifiNetworkConnecetd || wiMaxNetworkConnected );\r\n                     }\r\n                 }\r\n                 return isNetAvailable;\r\n        \t\t }catch(NullPointerException e)\r\n        \t\t {\r\n        \t\t\t return false;\r\n        \t\t }catch(Exception e)\r\n        \t\t {\r\n        \t\t\t return false;\r\n        \t\t }\r\n             }\r\n        \r\n        \t\r\n        }","title":"How to check internet access on Android? InetAddress never times out","body":"<p>You can check internet with below code as well:</p>\n\n<pre><code> public class CheckInternetConnection {\n        public Context context = null;\n\n        public CheckInternetConnection(Context ctx) {\n            this.context = ctx;\n        }\n\n        public boolean CheckInternet() {\n            return isOnline();\n        }\n        public Boolean isOnline() \n        {\n            try {\n                if(isNetAvailable(context))\n                    return true;\n                else\n                {\n                    try {\n                        URL url = new URL(\"http://www.google.com\");\n                        HttpURLConnection urlc = (HttpURLConnection) url\n                                .openConnection();\n                        urlc.setRequestProperty(\"User-Agent\", \"Test\");\n                        urlc.setRequestProperty(\"Connection\", \"close\");\n                        urlc.setConnectTimeout(3000); // This is time limit if the\n                        // connection time limit\n                        try {\n                            urlc.connect();\n                            Log.e(\"TAG\", \" urlc ----------\" + urlc.getResponseCode());\n                            if (urlc.getResponseCode() == 200) {\n                                return true;\n                            }\n                        }catch (Exception e){\n                            e.printStackTrace();\n                        }\n                    } catch (MalformedURLException e1) {\n                        e1.printStackTrace();\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }catch (Exception e){\n                e.printStackTrace();\n            }\n\n            return false;        \n        }\n\n         public synchronized static boolean isNetAvailable(Context context){\n\n             try{\n             boolean isNetAvailable=false;\n             if ( context != null )\n             {\n                 ConnectivityManager mgr = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n                 if ( mgr != null )\n                 {\n                     boolean mobileNetwork = false;\n                     boolean wifiNetwork = false;\n                     boolean wiMaxNetwork = false;\n\n                     boolean mobileNetworkConnecetd = false;\n                     boolean wifiNetworkConnecetd = false;\n                     boolean wiMaxNetworkConnected = false;\n\n                     NetworkInfo mobileInfo = mgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n                     NetworkInfo wifiInfo = mgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n                     NetworkInfo wiMaxInfo = mgr.getNetworkInfo(ConnectivityManager.TYPE_WIMAX);\n\n                     if ( mobileInfo != null )\n                         mobileNetwork = mobileInfo.isAvailable();                   \n\n                     if ( wifiInfo != null )\n                         wifiNetwork = wifiInfo.isAvailable();\n\n                     if(wiMaxInfo != null)\n                         wiMaxNetwork = wiMaxInfo.isAvailable();\n\n                     if(wifiNetwork == true)\n                         wifiNetworkConnecetd = wifiInfo.isConnectedOrConnecting();\n                     if(mobileNetwork == true)\n                         mobileNetworkConnecetd = mobileInfo.isConnectedOrConnecting();\n                     if(wiMaxNetwork == true)\n                         wiMaxNetworkConnected = wiMaxInfo.isConnectedOrConnecting();\n\n                     isNetAvailable = ( mobileNetworkConnecetd || wifiNetworkConnecetd || wiMaxNetworkConnected );\n                 }\n             }\n             return isNetAvailable;\n             }catch(NullPointerException e)\n             {\n                 return false;\n             }catch(Exception e)\n             {\n                 return false;\n             }\n         }\n\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4560329,"reputation":12811,"user_id":3702862,"accept_rate":84,"display_name":"Rajesh Jadav"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1473158869,"creation_date":1473158869,"answer_id":39347145,"question_id":1560788,"body_markdown":"I have gone through all the answers and i come up with my own answer which first check whether Internet is available and if Internet is available then it check whether it is active or not.\r\n\r\nI have included all necessary method and classes to check for active Internet connection.\r\n\r\n**NetworkUtils.class**\r\n\r\n    public class NetworkUtils {\r\n    \r\n        public static final int STATUS_CONNECTED = 0 ;\r\n    \r\n        public static boolean isInternetAvailable(Context ctx){\r\n            ConnectivityManager cm = (ConnectivityManager)ctx.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n            return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\r\n        }\r\n    \r\n        public static int isInternetActiveWithPing() {\r\n            try {\r\n                Runtime runtime = Runtime.getRuntime();\r\n                Process process = runtime.exec(&quot;/system/bin/ping -c 1 8.8.8.8&quot;);\r\n                int exitValue = process.waitFor();\r\n                return exitValue;\r\n            } catch (Exception ex) {\r\n                return -1;\r\n            }\r\n        }\r\n    \r\n        public static boolean isInternetActiveWithInetAddress() {\r\n            try {\r\n                InetAddress inetAddress = InetAddress.getByName(&quot;www.google.com&quot;);\r\n                return inetAddress != null &amp;&amp; !inetAddress.toString().equals(&quot;&quot;);\r\n            } catch (Exception ex) {\r\n                return false;\r\n            }\r\n        }\r\n    \r\n        public static void displayInternetConnectionMessage(Context ctx){\r\n            Toast.makeText(ctx, &quot;Check Internet Connection&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\nYou can check whether Internet is active using below code:\r\n\r\n     private void checkInternetConnection() {\r\n            if (NetworkUtils.isInternetAvailable(this)) {\r\n                new Thread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        if (NetworkUtils.isInternetActiveWithPing() == NetworkUtils.STATUS_CONNECTED) {\r\n                            performNetworkingOperations();\r\n                        } else {\r\n                            if (NetworkUtils.isInternetActiveWithInetAddress()) {\r\n                                performNetworkingOperations();\r\n                            } else {\r\n                                displayConnectionMessage();\r\n                            }\r\n                        }\r\n                    }\r\n                }).start();\r\n    \r\n            } else {\r\n                displayConnectionMessage();\r\n            }\r\n        }\r\n        \r\n        private void performNetworkingOperations() {\r\n            runOnUiThread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    Toast.makeText(MainActivity.this, &quot;Internet is Available&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void displayConnectionMessage() {\r\n            runOnUiThread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    NetworkUtils.displayInternetConnectionMessage(MainActivity.this);\r\n                }\r\n            });\r\n        }","title":"How to check internet access on Android? InetAddress never times out","body":"<p>I have gone through all the answers and i come up with my own answer which first check whether Internet is available and if Internet is available then it check whether it is active or not.</p>\n\n<p>I have included all necessary method and classes to check for active Internet connection.</p>\n\n<p><strong>NetworkUtils.class</strong></p>\n\n<pre><code>public class NetworkUtils {\n\n    public static final int STATUS_CONNECTED = 0 ;\n\n    public static boolean isInternetAvailable(Context ctx){\n        ConnectivityManager cm = (ConnectivityManager)ctx.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\n        return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\n    }\n\n    public static int isInternetActiveWithPing() {\n        try {\n            Runtime runtime = Runtime.getRuntime();\n            Process process = runtime.exec(\"/system/bin/ping -c 1 8.8.8.8\");\n            int exitValue = process.waitFor();\n            return exitValue;\n        } catch (Exception ex) {\n            return -1;\n        }\n    }\n\n    public static boolean isInternetActiveWithInetAddress() {\n        try {\n            InetAddress inetAddress = InetAddress.getByName(\"www.google.com\");\n            return inetAddress != null &amp;&amp; !inetAddress.toString().equals(\"\");\n        } catch (Exception ex) {\n            return false;\n        }\n    }\n\n    public static void displayInternetConnectionMessage(Context ctx){\n        Toast.makeText(ctx, \"Check Internet Connection\", Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n\n<p>You can check whether Internet is active using below code:</p>\n\n<pre><code> private void checkInternetConnection() {\n        if (NetworkUtils.isInternetAvailable(this)) {\n            new Thread(new Runnable() {\n                @Override\n                public void run() {\n                    if (NetworkUtils.isInternetActiveWithPing() == NetworkUtils.STATUS_CONNECTED) {\n                        performNetworkingOperations();\n                    } else {\n                        if (NetworkUtils.isInternetActiveWithInetAddress()) {\n                            performNetworkingOperations();\n                        } else {\n                            displayConnectionMessage();\n                        }\n                    }\n                }\n            }).start();\n\n        } else {\n            displayConnectionMessage();\n        }\n    }\n\n    private void performNetworkingOperations() {\n        runOnUiThread(new Runnable() {\n            @Override\n            public void run() {\n                Toast.makeText(MainActivity.this, \"Internet is Available\", Toast.LENGTH_SHORT).show();\n            }\n        });\n    }\n\n    private void displayConnectionMessage() {\n        runOnUiThread(new Runnable() {\n            @Override\n            public void run() {\n                NetworkUtils.displayInternetConnectionMessage(MainActivity.this);\n            }\n        });\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4703500,"reputation":18590,"user_id":3806413,"accept_rate":0,"display_name":"0xAliHn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1475141236,"creation_date":1475141236,"answer_id":39766506,"question_id":1560788,"body_markdown":"I have tried with almost 5+ different android approaches and found this is the best solution provided by google especially for android:\r\n\r\n      try {\r\n      HttpURLConnection urlConnection = (HttpURLConnection)\r\n      (new URL(&quot;http://clients3.google.com/generate_204&quot;)\r\n      .openConnection());\r\n      urlConnection.setRequestProperty(&quot;User-Agent&quot;, &quot;Android&quot;);\r\n      urlConnection.setRequestProperty(&quot;Connection&quot;, &quot;close&quot;);\r\n      urlConnection.setConnectTimeout(1500);\r\n      urlConnection.connect();\r\n      if (urlConnection.getResponseCode() == 204 &amp;&amp;\r\n      urlConnection.getContentLength() == 0) {\r\n      Log.d(&quot;Network Checker&quot;, &quot;Successfully connected to internet&quot;);\r\n      return true;\r\n      }\r\n      } catch (IOException e) {\r\n      Log.e(&quot;Network Checker&quot;, &quot;Error checking internet connection&quot;, e);\r\n      }\r\n\r\nIt&#39;s `faster` , `efficient` and `accurate` than any other available solution.","title":"How to check internet access on Android? InetAddress never times out","body":"<p>I have tried with almost 5+ different android approaches and found this is the best solution provided by google especially for android:</p>\n\n<pre><code>  try {\n  HttpURLConnection urlConnection = (HttpURLConnection)\n  (new URL(\"http://clients3.google.com/generate_204\")\n  .openConnection());\n  urlConnection.setRequestProperty(\"User-Agent\", \"Android\");\n  urlConnection.setRequestProperty(\"Connection\", \"close\");\n  urlConnection.setConnectTimeout(1500);\n  urlConnection.connect();\n  if (urlConnection.getResponseCode() == 204 &amp;&amp;\n  urlConnection.getContentLength() == 0) {\n  Log.d(\"Network Checker\", \"Successfully connected to internet\");\n  return true;\n  }\n  } catch (IOException e) {\n  Log.e(\"Network Checker\", \"Error checking internet connection\", e);\n  }\n</code></pre>\n\n<p>It's <code>faster</code> , <code>efficient</code> and <code>accurate</code> than any other available solution.</p>\n"},{"tags":[],"owner":{"account_id":76976,"reputation":18271,"user_id":220005,"accept_rate":78,"display_name":"jenson-button-event"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1479064676,"creation_date":1479064676,"answer_id":40577827,"question_id":1560788,"body_markdown":"Here is some modern code that uses an `AsynTask` to get around an issue where android crashes when you try and connect on the main thread and introduces an alert with a rinse and repeat option for the user.\r\n\r\n    class TestInternet extends AsyncTask&lt;Void, Void, Boolean&gt; {\r\n        @Override\r\n        protected Boolean doInBackground(Void... params) {\r\n            try {\r\n                URL url = new URL(&quot;http://www.google.com&quot;);\r\n                HttpURLConnection urlc = (HttpURLConnection) url.openConnection();\r\n                urlc.setConnectTimeout(3000);\r\n                urlc.connect();\r\n                if (urlc.getResponseCode() == 200) {\r\n                    return true;\r\n                }\r\n            } catch (MalformedURLException e1) {\r\n                // TODO Auto-generated catch block\r\n                e1.printStackTrace();\r\n                return false;\r\n            } catch (IOException e) {\r\n                // TODO Auto-generated catch block\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        @Override\r\n        protected void onPostExecute(Boolean result) {\r\n            if (!result) { // code if not connected\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);\r\n                builder.setMessage(&quot;An internet connection is required.&quot;);\r\n                builder.setCancelable(false);\r\n    \r\n                builder.setPositiveButton(\r\n                        &quot;TRY AGAIN&quot;,\r\n                        new DialogInterface.OnClickListener() {\r\n                            public void onClick(DialogInterface dialog, int id) {\r\n                                dialog.cancel();\r\n                                new TestInternet().execute();\r\n                            }\r\n                        });\r\n    \r\n    \r\n                AlertDialog alert11 = builder.create();\r\n                alert11.show();\r\n            } else { // code if connected\r\n                doMyStuff();\r\n            }\r\n        }\r\n    }\r\n\r\n...\r\n\r\n    new TestInternet().execute();","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Here is some modern code that uses an <code>AsynTask</code> to get around an issue where android crashes when you try and connect on the main thread and introduces an alert with a rinse and repeat option for the user.</p>\n\n<pre><code>class TestInternet extends AsyncTask&lt;Void, Void, Boolean&gt; {\n    @Override\n    protected Boolean doInBackground(Void... params) {\n        try {\n            URL url = new URL(\"http://www.google.com\");\n            HttpURLConnection urlc = (HttpURLConnection) url.openConnection();\n            urlc.setConnectTimeout(3000);\n            urlc.connect();\n            if (urlc.getResponseCode() == 200) {\n                return true;\n            }\n        } catch (MalformedURLException e1) {\n            // TODO Auto-generated catch block\n            e1.printStackTrace();\n            return false;\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n            return false;\n        }\n        return false;\n    }\n\n    @Override\n    protected void onPostExecute(Boolean result) {\n        if (!result) { // code if not connected\n            AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);\n            builder.setMessage(\"An internet connection is required.\");\n            builder.setCancelable(false);\n\n            builder.setPositiveButton(\n                    \"TRY AGAIN\",\n                    new DialogInterface.OnClickListener() {\n                        public void onClick(DialogInterface dialog, int id) {\n                            dialog.cancel();\n                            new TestInternet().execute();\n                        }\n                    });\n\n\n            AlertDialog alert11 = builder.create();\n            alert11.show();\n        } else { // code if connected\n            doMyStuff();\n        }\n    }\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>new TestInternet().execute();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":91056,"reputation":124854,"user_id":250260,"accept_rate":80,"display_name":"Jorgesys"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1483382027,"creation_date":1483381398,"answer_id":41431609,"question_id":1560788,"body_markdown":"Very important to check if we have connectivity with [**isAvailable()**][1] and if is possible to establish a connection with [**isConnected()**][2]\r\n\r\n    private static ConnectivityManager manager;\r\n    \r\n\tpublic static boolean isOnline(Context context) {\r\n\t\tConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\tNetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n\t\treturn networkInfo != null &amp;&amp; networkInfo.isAvailable() &amp;&amp; networkInfo.isConnected();\r\n\t}\r\n    \r\n    \r\n\r\nand you can derterminate the type of network active [WiFi][3] :\r\n\r\n\tpublic static boolean isConnectedWifi(Context context) {\r\n\t\tConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\tNetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n\t\treturn networkInfo != null &amp;&amp; networkInfo.getType() == ConnectivityManager.TYPE_WIFI;\r\n\t}\r\n\r\nor mobile [M&#243;vil][4] :\r\n\r\n\tpublic static boolean isConnectedMobile(Context context) {\r\n\t\tConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\tNetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n\t\treturn networkInfo != null &amp;&amp; networkInfo.getType() == ConnectivityManager.TYPE_MOBILE;\r\n\t}\r\n\r\n\r\ndon&#180;t forget the permissions:\r\n\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n       &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n\r\n  [1]: http://developer.android.com/intl/es/reference/android/net/NetworkInfo.html#isAvailable()\r\n  [2]: http://developer.android.com/intl/es/reference/android/net/NetworkInfo.html#isConnected()\r\n  [3]: http://developer.android.com/intl/es/reference/android/net/ConnectivityManager.html#TYPE_WIFI\r\n  [4]: http://developer.android.com/intl/es/reference/android/net/ConnectivityManager.html#TYPE_MOBILE\r\n  [5]: https://developer.android.com/reference/android/net/ConnectivityManager.html#getActiveNetworkInfo()\r\n\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Very important to check if we have connectivity with <a href=\"http://developer.android.com/intl/es/reference/android/net/NetworkInfo.html#isAvailable()\" rel=\"noreferrer\"><strong>isAvailable()</strong></a> and if is possible to establish a connection with <a href=\"http://developer.android.com/intl/es/reference/android/net/NetworkInfo.html#isConnected()\" rel=\"noreferrer\"><strong>isConnected()</strong></a></p>\n\n<pre><code>private static ConnectivityManager manager;\n\npublic static boolean isOnline(Context context) {\n    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n    return networkInfo != null &amp;&amp; networkInfo.isAvailable() &amp;&amp; networkInfo.isConnected();\n}\n</code></pre>\n\n<p>and you can derterminate the type of network active <a href=\"http://developer.android.com/intl/es/reference/android/net/ConnectivityManager.html#TYPE_WIFI\" rel=\"noreferrer\">WiFi</a> :</p>\n\n<pre><code>public static boolean isConnectedWifi(Context context) {\n    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n    return networkInfo != null &amp;&amp; networkInfo.getType() == ConnectivityManager.TYPE_WIFI;\n}\n</code></pre>\n\n<p>or mobile <a href=\"http://developer.android.com/intl/es/reference/android/net/ConnectivityManager.html#TYPE_MOBILE\" rel=\"noreferrer\">Mvil</a> :</p>\n\n<pre><code>public static boolean isConnectedMobile(Context context) {\n    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n    return networkInfo != null &amp;&amp; networkInfo.getType() == ConnectivityManager.TYPE_MOBILE;\n}\n</code></pre>\n\n<p>dont forget the permissions:</p>\n\n<pre><code>    &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n   &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2606720,"reputation":2806,"user_id":2257754,"display_name":"Jaymin Panchal"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1483945031,"creation_date":1483945031,"answer_id":41542528,"question_id":1560788,"body_markdown":"I have applied the solution provided by @Levit and created function that will not call the extra Http Request.\r\n\r\nIt will solve the error `Unable to Resolve Host`\r\n\r\n\r\n\r\n    public static boolean isInternetAvailable(Context context) {\r\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n        if (activeNetwork == null) return false;\r\n\r\n        switch (activeNetwork.getType()) {\r\n            case ConnectivityManager.TYPE_WIFI:\r\n                if ((activeNetwork.getState() == NetworkInfo.State.CONNECTED ||\r\n                        activeNetwork.getState() == NetworkInfo.State.CONNECTING) &amp;&amp;\r\n                        isInternet())\r\n                    return true;\r\n                break;\r\n            case ConnectivityManager.TYPE_MOBILE:\r\n                if ((activeNetwork.getState() == NetworkInfo.State.CONNECTED ||\r\n                        activeNetwork.getState() == NetworkInfo.State.CONNECTING) &amp;&amp;\r\n                        isInternet())\r\n                    return true;\r\n                break;\r\n            default:\r\n                return false;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private static boolean isInternet() {\r\n\r\n        Runtime runtime = Runtime.getRuntime();\r\n        try {\r\n            Process ipProcess = runtime.exec(&quot;/system/bin/ping -c 1 8.8.8.8&quot;);\r\n            int exitValue = ipProcess.waitFor();\r\n            Debug.i(exitValue + &quot;&quot;);\r\n            return (exitValue == 0);\r\n        } catch (IOException | InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\nNow call it like,\r\n\r\n    if (!isInternetAvailable(getActivity())) {\r\n         //Show message\r\n    } else {\r\n         //Perfoem the api request\r\n    }","title":"How to check internet access on Android? InetAddress never times out","body":"<p>I have applied the solution provided by @Levit and created function that will not call the extra Http Request.</p>\n\n<p>It will solve the error <code>Unable to Resolve Host</code></p>\n\n<pre><code>public static boolean isInternetAvailable(Context context) {\n    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\n    if (activeNetwork == null) return false;\n\n    switch (activeNetwork.getType()) {\n        case ConnectivityManager.TYPE_WIFI:\n            if ((activeNetwork.getState() == NetworkInfo.State.CONNECTED ||\n                    activeNetwork.getState() == NetworkInfo.State.CONNECTING) &amp;&amp;\n                    isInternet())\n                return true;\n            break;\n        case ConnectivityManager.TYPE_MOBILE:\n            if ((activeNetwork.getState() == NetworkInfo.State.CONNECTED ||\n                    activeNetwork.getState() == NetworkInfo.State.CONNECTING) &amp;&amp;\n                    isInternet())\n                return true;\n            break;\n        default:\n            return false;\n    }\n    return false;\n}\n\nprivate static boolean isInternet() {\n\n    Runtime runtime = Runtime.getRuntime();\n    try {\n        Process ipProcess = runtime.exec(\"/system/bin/ping -c 1 8.8.8.8\");\n        int exitValue = ipProcess.waitFor();\n        Debug.i(exitValue + \"\");\n        return (exitValue == 0);\n    } catch (IOException | InterruptedException e) {\n        e.printStackTrace();\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>Now call it like,</p>\n\n<pre><code>if (!isInternetAvailable(getActivity())) {\n     //Show message\n} else {\n     //Perfoem the api request\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3082434,"reputation":233,"user_id":2610373,"display_name":"Ragu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487678061,"creation_date":1487678061,"answer_id":42366607,"question_id":1560788,"body_markdown":"Instead of checking WIFI connection or Mobile data connection, try hitting any hosted domain. So that, you can check whether the WIFI/Mobile connection has ability to connect public Internet.\r\n  \r\nThe below will return if your mobile device is able to connect with the public domain provided.\r\n\r\n  \r\n\r\n    boolean isReachable()\r\n            {\r\n                boolean connected = false;\r\n                String instanceURL = &quot;Your trusted domain name&quot;;\r\n                Socket socket;\r\n                try {\r\n                    socket = new Socket();\r\n                    SocketAddress socketAddress = new InetSocketAddress(instanceURL, 80);\r\n                    socket.connect(socketAddress, 5000);\r\n                    if (socket.isConnected()) {\r\n                        connected = true;\r\n                        socket.close();\r\n                    }\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                } finally {\r\n                    socket = null;\r\n                }\r\n                return connected;\r\n            }\r\n\r\nHope it will be helpful..","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Instead of checking WIFI connection or Mobile data connection, try hitting any hosted domain. So that, you can check whether the WIFI/Mobile connection has ability to connect public Internet.</p>\n\n<p>The below will return if your mobile device is able to connect with the public domain provided.</p>\n\n<pre><code>boolean isReachable()\n        {\n            boolean connected = false;\n            String instanceURL = \"Your trusted domain name\";\n            Socket socket;\n            try {\n                socket = new Socket();\n                SocketAddress socketAddress = new InetSocketAddress(instanceURL, 80);\n                socket.connect(socketAddress, 5000);\n                if (socket.isConnected()) {\n                    connected = true;\n                    socket.close();\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            } finally {\n                socket = null;\n            }\n            return connected;\n        }\n</code></pre>\n\n<p>Hope it will be helpful..</p>\n"},{"tags":[],"owner":{"account_id":2967644,"reputation":459,"user_id":2520469,"display_name":"Keeeeeenw"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1492214970,"creation_date":1492214970,"answer_id":43420776,"question_id":1560788,"body_markdown":"If you are using API 23 or above, you can now check whether or not internet is active using [NetworkCapabilities.NET_CAPABILITY_VALIDATED][1], which is backed by Google&#39;s own ping service.\r\n\r\n    ConnectivityManager.NetworkCallback networkCallback = new ConnectivityManager.NetworkCallback() {\r\n        @Override\r\n        public void onLost(Network network) {\r\n            // handle network lost\r\n        }\r\n\r\n        @Override\r\n        public void onAvailable(Network network) {\r\n            ConnectivityManager cm = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo info = cm.getNetworkInfo(network);\r\n            boolean isConnected = (info != null &amp;&amp; info.isConnectedOrConnecting());\r\n\r\n            if (isConnected) {\r\n                NetworkCapabilities nc = cm.getNetworkCapabilities(network);\r\n                if (nc != null) {\r\n                    boolean isInternetValid = nc.hasCapability(NetworkCapabilities.NET_CAPABILITY_VALIDATED);\r\n                    if (isInternetValid) {\r\n                        // internet is valid\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    NetworkRequest request = new NetworkRequest.Builder().addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET).build();\r\n    ConnectivityManager connectivityManager = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    connectivityManager.registerNetworkCallback(request, networkCallback);\r\n\r\n  [1]: https://developer.android.com/reference/android/net/NetworkCapabilities.html#NET_CAPABILITY_VALIDATED","title":"How to check internet access on Android? InetAddress never times out","body":"<p>If you are using API 23 or above, you can now check whether or not internet is active using <a href=\"https://developer.android.com/reference/android/net/NetworkCapabilities.html#NET_CAPABILITY_VALIDATED\" rel=\"nofollow noreferrer\">NetworkCapabilities.NET_CAPABILITY_VALIDATED</a>, which is backed by Google's own ping service.</p>\n\n<pre><code>ConnectivityManager.NetworkCallback networkCallback = new ConnectivityManager.NetworkCallback() {\n    @Override\n    public void onLost(Network network) {\n        // handle network lost\n    }\n\n    @Override\n    public void onAvailable(Network network) {\n        ConnectivityManager cm = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo info = cm.getNetworkInfo(network);\n        boolean isConnected = (info != null &amp;&amp; info.isConnectedOrConnecting());\n\n        if (isConnected) {\n            NetworkCapabilities nc = cm.getNetworkCapabilities(network);\n            if (nc != null) {\n                boolean isInternetValid = nc.hasCapability(NetworkCapabilities.NET_CAPABILITY_VALIDATED);\n                if (isInternetValid) {\n                    // internet is valid\n                }\n            }\n        }\n    }\n};\n\nNetworkRequest request = new NetworkRequest.Builder().addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET).build();\nConnectivityManager connectivityManager = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\nconnectivityManager.registerNetworkCallback(request, networkCallback);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4032562,"reputation":450,"user_id":3318140,"display_name":"lalit vasan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494410763,"creation_date":1494410763,"answer_id":43889342,"question_id":1560788,"body_markdown":"Android provides ConnectivityManager class to know about the internet connection status. The following method will be very useful to know internet connection state.\r\n\r\nFirst add the *INTERNET* and *ACCESS_NETWORK_STATE* permission to **AndroidManifest.xml**\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\n \r\nThen use the below method to check if the device is connected to internet or not. This method will return true if the device is connected to internet.\r\n\r\n    public boolean isInternetAvailable(Context context) {\r\n        ConnectivityManager connectivityManager = (ConnectivityManager) \r\n        context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo activeNetwork = connectivityManager.getActiveNetworkInfo();\r\n        return activeNetwork != null\r\n                &amp;&amp; activeNetwork.isConnectedOrConnecting();\r\n    }\r\n\r\nReference Link :- http://www.androidtutorialshub.com/android-check-internet-connection-status/","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Android provides ConnectivityManager class to know about the internet connection status. The following method will be very useful to know internet connection state.</p>\n\n<p>First add the <em>INTERNET</em> and <em>ACCESS_NETWORK_STATE</em> permission to <strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>Then use the below method to check if the device is connected to internet or not. This method will return true if the device is connected to internet.</p>\n\n<pre><code>public boolean isInternetAvailable(Context context) {\n    ConnectivityManager connectivityManager = (ConnectivityManager) \n    context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo activeNetwork = connectivityManager.getActiveNetworkInfo();\n    return activeNetwork != null\n            &amp;&amp; activeNetwork.isConnectedOrConnecting();\n}\n</code></pre>\n\n<p>Reference Link :- <a href=\"http://www.androidtutorialshub.com/android-check-internet-connection-status/\" rel=\"nofollow noreferrer\">http://www.androidtutorialshub.com/android-check-internet-connection-status/</a></p>\n"},{"tags":[],"owner":{"account_id":9317472,"reputation":927,"user_id":6917362,"accept_rate":80,"display_name":"E J Chathuranga"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505985579,"creation_date":1505985579,"answer_id":46340058,"question_id":1560788,"body_markdown":"If you need to check for the internet connection, use this method using ping to the server:\r\n\r\n    public boolean checkIntCON() {\r\n        try {\r\n            Process ipProcess = Runtime.getRuntime().exec(&quot;/system/bin/ping -c 1 8.8.8.8&quot;);\r\n            return (ipProcess.waitFor() == 0);\r\n        }\r\n        catch (IOException e)          { e.printStackTrace(); }\r\n        catch (InterruptedException e) { e.printStackTrace(); }\r\n        return false;\r\n    }\r\n\r\nEither you can use check through using port\r\n\r\n    public boolean checkIntCON() {\r\n        try {\r\n            Socket sock = new Socket();\r\n            SocketAddress sockaddr = new InetSocketAddress(&quot;8.8.8.8&quot;, 80); \r\n            // port will change according to protocols\r\n    \r\n            sock.connect(sockaddr, 1250);\r\n            sock.close();\r\n    \r\n            return true;\r\n        } catch (IOException e) { return false; }\r\n    }","title":"How to check internet access on Android? InetAddress never times out","body":"<p>If you need to check for the internet connection, use this method using ping to the server:</p>\n\n<pre><code>public boolean checkIntCON() {\n    try {\n        Process ipProcess = Runtime.getRuntime().exec(\"/system/bin/ping -c 1 8.8.8.8\");\n        return (ipProcess.waitFor() == 0);\n    }\n    catch (IOException e)          { e.printStackTrace(); }\n    catch (InterruptedException e) { e.printStackTrace(); }\n    return false;\n}\n</code></pre>\n\n<p>Either you can use check through using port</p>\n\n<pre><code>public boolean checkIntCON() {\n    try {\n        Socket sock = new Socket();\n        SocketAddress sockaddr = new InetSocketAddress(\"8.8.8.8\", 80); \n        // port will change according to protocols\n\n        sock.connect(sockaddr, 1250);\n        sock.close();\n\n        return true;\n    } catch (IOException e) { return false; }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10256372,"reputation":970,"user_id":7569106,"display_name":"Mohamed Embaby"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1514249512,"creation_date":1514249512,"answer_id":47973013,"question_id":1560788,"body_markdown":"There&#39;s more than one way\r\n\r\n\r\nFirst, shortest but Inefficient way\r\n\r\nNetwork State Permission only needed\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nThen this method,\r\n\r\n     public boolean activeNetwork () {\r\n            ConnectivityManager cm =\r\n                    (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \r\n            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n            boolean isConnected = activeNetwork != null &amp;&amp;\r\n                    activeNetwork.isConnected();\r\n    \r\n            return isConnected;\r\n    \r\n        }\r\n\r\n\r\nAs seen in answers `ConnectivityManager` is a solution, I just added it within a method this is a simplified method all use  \r\n`ConnectivityManager` returns true if there is a network access not Internet access, means if your WiFi is connected to a router but the router has no internet it returns true, it check connection availability\r\n\r\n\r\nSecond, Efficient way\r\n\r\n   \r\nNetwork State and Internet Permissions needed\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\nThen this class,\r\n\r\n     public class CheckInternetAsyncTask extends AsyncTask&lt;Void, Integer, Boolean&gt; {\r\n        \r\n            private Context context;\r\n        \r\n            public CheckInternetAsyncTask(Context context) {\r\n                this.context = context;\r\n            }\r\n        \r\n            @Override\r\n            protected Boolean doInBackground(Void... params) {\r\n        \r\n                ConnectivityManager cm =\r\n                        (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        \r\n                assert cm != null;\r\n                NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n                boolean isConnected = activeNetwork != null &amp;&amp;\r\n                        activeNetwork.isConnected();\r\n        \r\n        \r\n                if (isConnected) {\r\n                    try {\r\n                        HttpURLConnection urlc = (HttpURLConnection)\r\n                                (new URL(&quot;http://clients3.google.com/generate_204&quot;)\r\n                                        .openConnection());\r\n                        urlc.setRequestProperty(&quot;User-Agent&quot;, &quot;Android&quot;);\r\n                        urlc.setRequestProperty(&quot;Connection&quot;, &quot;close&quot;);\r\n                        urlc.setConnectTimeout(1500);\r\n                        urlc.connect();\r\n                        if (urlc.getResponseCode() == 204 &amp;&amp;\r\n                                urlc.getContentLength() == 0)\r\n                            return true;\r\n        \r\n                    } catch (IOException e) {\r\n                        Log.e(&quot;TAG&quot;, &quot;Error checking internet connection&quot;, e);\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    Log.d(&quot;TAG&quot;, &quot;No network available!&quot;);\r\n                    return false;\r\n                }\r\n        \r\n        \r\n                return null;\r\n            }\r\n        \r\n            @Override\r\n            protected void onPostExecute(Boolean result) {\r\n                super.onPostExecute(result);\r\n                Log.d(&quot;TAG&quot;, &quot;result&quot; + result);\r\n        \r\n                if(result){\r\n                    // do ur code\r\n                }\r\n                \r\n            }\r\n        \r\n        \r\n        }\r\n\r\nCall `CheckInternetAsyncTask`\r\n\r\n    new CheckInternetAsyncTask(getApplicationContext()).execute();\r\n\r\nSome Explanations :- \r\n\r\n* you have to check Internet on `AsyncTask`, otherwise it can throw `android.os.NetworkOnMainThreadException` in some cases\r\n\r\n* `ConnectivityManager` used to check the network access if true sends request (Ping)\r\n\r\n* Request send to `http://clients3.google.com/generate_204`, This well-known URL is known to return an empty page with an HTTP status 204 this is faster and more efficient than `http://www.google.com` , read [this][1]. if you have website it&#39;s preferred to put you website instead of google, only if you use it within the app\r\n\r\n* Timeout can be changed range (20ms -&gt; 2000ms), 1500ms is commonly used\r\n\r\n\r\n  [1]: https://www.chromium.org/chromium-os/chromiumos-design-docs/network-portal-detection\r\n\r\n\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>There's more than one way</p>\n\n<p>First, shortest but Inefficient way</p>\n\n<p>Network State Permission only needed</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>Then this method,</p>\n\n<pre><code> public boolean activeNetwork () {\n        ConnectivityManager cm =\n                (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);\n\n        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\n        boolean isConnected = activeNetwork != null &amp;&amp;\n                activeNetwork.isConnected();\n\n        return isConnected;\n\n    }\n</code></pre>\n\n<p>As seen in answers <code>ConnectivityManager</code> is a solution, I just added it within a method this is a simplified method all use<br>\n<code>ConnectivityManager</code> returns true if there is a network access not Internet access, means if your WiFi is connected to a router but the router has no internet it returns true, it check connection availability</p>\n\n<p>Second, Efficient way</p>\n\n<p>Network State and Internet Permissions needed</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n\n<p>Then this class,</p>\n\n<pre><code> public class CheckInternetAsyncTask extends AsyncTask&lt;Void, Integer, Boolean&gt; {\n\n        private Context context;\n\n        public CheckInternetAsyncTask(Context context) {\n            this.context = context;\n        }\n\n        @Override\n        protected Boolean doInBackground(Void... params) {\n\n            ConnectivityManager cm =\n                    (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);\n\n            assert cm != null;\n            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\n            boolean isConnected = activeNetwork != null &amp;&amp;\n                    activeNetwork.isConnected();\n\n\n            if (isConnected) {\n                try {\n                    HttpURLConnection urlc = (HttpURLConnection)\n                            (new URL(\"http://clients3.google.com/generate_204\")\n                                    .openConnection());\n                    urlc.setRequestProperty(\"User-Agent\", \"Android\");\n                    urlc.setRequestProperty(\"Connection\", \"close\");\n                    urlc.setConnectTimeout(1500);\n                    urlc.connect();\n                    if (urlc.getResponseCode() == 204 &amp;&amp;\n                            urlc.getContentLength() == 0)\n                        return true;\n\n                } catch (IOException e) {\n                    Log.e(\"TAG\", \"Error checking internet connection\", e);\n                    return false;\n                }\n            } else {\n                Log.d(\"TAG\", \"No network available!\");\n                return false;\n            }\n\n\n            return null;\n        }\n\n        @Override\n        protected void onPostExecute(Boolean result) {\n            super.onPostExecute(result);\n            Log.d(\"TAG\", \"result\" + result);\n\n            if(result){\n                // do ur code\n            }\n\n        }\n\n\n    }\n</code></pre>\n\n<p>Call <code>CheckInternetAsyncTask</code></p>\n\n<pre><code>new CheckInternetAsyncTask(getApplicationContext()).execute();\n</code></pre>\n\n<p>Some Explanations :- </p>\n\n<ul>\n<li><p>you have to check Internet on <code>AsyncTask</code>, otherwise it can throw <code>android.os.NetworkOnMainThreadException</code> in some cases</p></li>\n<li><p><code>ConnectivityManager</code> used to check the network access if true sends request (Ping)</p></li>\n<li><p>Request send to <code>http://clients3.google.com/generate_204</code>, This well-known URL is known to return an empty page with an HTTP status 204 this is faster and more efficient than <code>http://www.google.com</code> , read <a href=\"https://www.chromium.org/chromium-os/chromiumos-design-docs/network-portal-detection\" rel=\"noreferrer\">this</a>. if you have website it's preferred to put you website instead of google, only if you use it within the app</p></li>\n<li><p>Timeout can be changed range (20ms -> 2000ms), 1500ms is commonly used</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7367657,"reputation":205,"user_id":5608931,"display_name":"Faizal Abbas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522066442,"creation_date":1522066442,"answer_id":49491231,"question_id":1560788,"body_markdown":" This is simplest and easy way to check internet connection for wifi and mobile data.\r\n    \r\n    \r\n    public static boolean isConnected(Activity _context) {\r\n            if (_context != null) {\r\n                ConnectivityManager connMgr = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n                NetworkInfo activeInfo = connMgr.getActiveNetworkInfo();\r\n                if (activeInfo != null &amp;&amp; activeInfo.isConnected()) {\r\n                    boolean wifiConnected = activeInfo.getType() == ConnectivityManager.TYPE_WIFI;\r\n                    boolean mobileConnected = activeInfo.getType() == ConnectivityManager.TYPE_MOBILE;\r\n    \r\n                    if (wifiConnected || mobileConnected) {\r\n                        Log.d(TAG, &quot;Wifi Connected &quot;);\r\n                        return true;\r\n                    } else {\r\n                        showAlert(_context,_context.getString(R.string.err_no_internet));\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    showAlert(_context,_context.getString(R.string.err_no_internet));\r\n                    return false;\r\n                }\r\n            } else {\r\n                Log.e(TAG, &quot;networkConnectivity: Context NULL&quot;);\r\n    \r\n            }\r\n            return false;\r\n        }","title":"How to check internet access on Android? InetAddress never times out","body":"<p>This is simplest and easy way to check internet connection for wifi and mobile data.</p>\n\n<pre><code>public static boolean isConnected(Activity _context) {\n        if (_context != null) {\n            ConnectivityManager connMgr = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);\n            NetworkInfo activeInfo = connMgr.getActiveNetworkInfo();\n            if (activeInfo != null &amp;&amp; activeInfo.isConnected()) {\n                boolean wifiConnected = activeInfo.getType() == ConnectivityManager.TYPE_WIFI;\n                boolean mobileConnected = activeInfo.getType() == ConnectivityManager.TYPE_MOBILE;\n\n                if (wifiConnected || mobileConnected) {\n                    Log.d(TAG, \"Wifi Connected \");\n                    return true;\n                } else {\n                    showAlert(_context,_context.getString(R.string.err_no_internet));\n                    return false;\n                }\n            } else {\n                showAlert(_context,_context.getString(R.string.err_no_internet));\n                return false;\n            }\n        } else {\n            Log.e(TAG, \"networkConnectivity: Context NULL\");\n\n        }\n        return false;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6677034,"reputation":1028,"user_id":5151336,"display_name":"vishnu benny"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1527226419,"creation_date":1527226419,"answer_id":50522131,"question_id":1560788,"body_markdown":"**In kotlin:**\r\n\r\n    class UtilityMethods {\r\n    companion object {\r\n        fun isConnected(activity: Activity): Boolean {\r\n            val connectivityManager: ConnectivityManager =\r\n                    activity.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\r\n            return null != connectivityManager.activeNetworkInfo\r\n        }\r\n    }}\r\n\r\nInvoke isConnected inside Activity class as:\r\n\r\n    UtilityMethods.isConnected(this)\r\n\r\nInside fragment class as:\r\n\r\n    UtilityMethods.isConnected(activity)","title":"How to check internet access on Android? InetAddress never times out","body":"<p><strong>In kotlin:</strong></p>\n\n<pre><code>class UtilityMethods {\ncompanion object {\n    fun isConnected(activity: Activity): Boolean {\n        val connectivityManager: ConnectivityManager =\n                activity.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\n        return null != connectivityManager.activeNetworkInfo\n    }\n}}\n</code></pre>\n\n<p>Invoke isConnected inside Activity class as:</p>\n\n<pre><code>UtilityMethods.isConnected(this)\n</code></pre>\n\n<p>Inside fragment class as:</p>\n\n<pre><code>UtilityMethods.isConnected(activity)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12989701,"reputation":1145,"user_id":9389285,"display_name":"Gautam Surani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534520899,"creation_date":1529563799,"answer_id":50962092,"question_id":1560788,"body_markdown":"     public static boolean isNetworkAvailable(Context context) {\r\n        boolean flag = checkNetworkAvailable(context);\r\n\r\n        if (!flag) {\r\n            Log.d(&quot;&quot;, &quot;No network available!&quot;);\r\n        } \r\n        return flag;\r\n    }\r\n\r\n\r\n    private static boolean checkNetworkAvailable(Context context) {\r\n        ConnectivityManager connectivityManager\r\n                = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();\r\n        return activeNetworkInfo != null;\r\n    }","title":"How to check internet access on Android? InetAddress never times out","body":"<pre><code> public static boolean isNetworkAvailable(Context context) {\n    boolean flag = checkNetworkAvailable(context);\n\n    if (!flag) {\n        Log.d(\"\", \"No network available!\");\n    } \n    return flag;\n}\n\n\nprivate static boolean checkNetworkAvailable(Context context) {\n    ConnectivityManager connectivityManager\n            = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();\n    return activeNetworkInfo != null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4759281,"reputation":7678,"user_id":3847117,"accept_rate":65,"display_name":"Foobar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531188088,"creation_date":1531186948,"answer_id":51256160,"question_id":1560788,"body_markdown":"Here is the optimal method for checking internet connection. What this method does is perform a series of checks &quot;is the phone not in airplane mode, is the phone connected to a network, etc&quot;. If all the checks return true, the method will then *download a file from the internet* and see if the contents matches an expected value.\r\n\r\nThe benefits of this method compared to other methods that ping a server to check for internet connection are:\r\n\r\n1. The Android runtime varies on different phones - so you may not always be able to execute those commands, as shown here: https://stackoverflow.com/questions/32749462/why-does-ping-works-on-some-devices-and-not-others\r\n\r\n2. Pinging a server doesn&#39;t always work because of login pages/re-directs on wifi networks which can give the false impression of a connection.\r\n\r\nThis answer is written in Kotlin and uses the [Fuel][1] library to download a file from the internet with the method`fetchUrlAsString`, but any library can be substituted as long as you make sure your HTTP request is not cached. Think of `showConnectionWarning()` and `hideConnectionWarning()` as equivalent to `internet connection status = false` and `internet connection status = true` respectively. \r\n\r\n    private val networkReceiver = object : BroadcastReceiver() {\r\n\r\n        override fun onReceive(context: Context?, intent: Intent?) {\r\n\r\n            val activeNetworkInfo = (context?.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).activeNetworkInfo\r\n             \r\n            if (activeNetworkInfo != null) {\r\n                if (activeNetworkInfo.isConnectedOrConnecting) {\r\n                    //Launches a coroutine to fetch file asynchronously \r\n                    launch {\r\n                        try {\r\n                            //Downloads file from url on the internet - use any library you want here.  \r\n                            val connectionStatus = fetchUrlAsString(&lt;url_for_file_on_internet&gt;)\r\n                            //check if the contents of the file is as expected\r\n                            if (connectionStatus == &quot;Connected To Database&quot;) {\r\n                                hideConnectionWarning()\r\n                            } else {\r\n                                showConnectionWarning()\r\n                            }\r\n                        } catch (e: Exception) {\r\n                            //Catches an exception - fetchUrlAsString only throws an exception if there is no internet \r\n                            showConnectionWarning()\r\n                        }\r\n                    }\r\n                } else {\r\n                    showConnectionWarning()\r\n                }\r\n            } else {\r\n                showConnectionWarning()\r\n            }\r\n        }\r\n    }\r\n\r\n    private suspend fun fetchUrlAsString(url: String): String = suspendCoroutine { cont -&gt;\r\n        url.httpGet().header(Pair(&quot;pragma&quot;, &quot;no-cache&quot;), Pair(&quot;cache-control&quot;, &quot;no-cache&quot;)).responseString { _, _, result -&gt;\r\n\r\n            when (result) {\r\n                is Result.Failure -&gt; {\r\n                    cont.resumeWithException(result.getException())\r\n                }\r\n                is Result.Success -&gt; {\r\n                    cont.resume(result.value)\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\nYou will need the following permissions:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n  [1]: https://github.com/kittinunf/Fuel","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Here is the optimal method for checking internet connection. What this method does is perform a series of checks \"is the phone not in airplane mode, is the phone connected to a network, etc\". If all the checks return true, the method will then <em>download a file from the internet</em> and see if the contents matches an expected value.</p>\n\n<p>The benefits of this method compared to other methods that ping a server to check for internet connection are:</p>\n\n<ol>\n<li><p>The Android runtime varies on different phones - so you may not always be able to execute those commands, as shown here: <a href=\"https://stackoverflow.com/questions/32749462/why-does-ping-works-on-some-devices-and-not-others\">Why does ping works on some devices and not others?</a></p></li>\n<li><p>Pinging a server doesn't always work because of login pages/re-directs on wifi networks which can give the false impression of a connection.</p></li>\n</ol>\n\n<p>This answer is written in Kotlin and uses the <a href=\"https://github.com/kittinunf/Fuel\" rel=\"nofollow noreferrer\">Fuel</a> library to download a file from the internet with the method<code>fetchUrlAsString</code>, but any library can be substituted as long as you make sure your HTTP request is not cached. Think of <code>showConnectionWarning()</code> and <code>hideConnectionWarning()</code> as equivalent to <code>internet connection status = false</code> and <code>internet connection status = true</code> respectively. </p>\n\n<pre><code>private val networkReceiver = object : BroadcastReceiver() {\n\n    override fun onReceive(context: Context?, intent: Intent?) {\n\n        val activeNetworkInfo = (context?.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).activeNetworkInfo\n\n        if (activeNetworkInfo != null) {\n            if (activeNetworkInfo.isConnectedOrConnecting) {\n                //Launches a coroutine to fetch file asynchronously \n                launch {\n                    try {\n                        //Downloads file from url on the internet - use any library you want here.  \n                        val connectionStatus = fetchUrlAsString(&lt;url_for_file_on_internet&gt;)\n                        //check if the contents of the file is as expected\n                        if (connectionStatus == \"Connected To Database\") {\n                            hideConnectionWarning()\n                        } else {\n                            showConnectionWarning()\n                        }\n                    } catch (e: Exception) {\n                        //Catches an exception - fetchUrlAsString only throws an exception if there is no internet \n                        showConnectionWarning()\n                    }\n                }\n            } else {\n                showConnectionWarning()\n            }\n        } else {\n            showConnectionWarning()\n        }\n    }\n}\n\nprivate suspend fun fetchUrlAsString(url: String): String = suspendCoroutine { cont -&gt;\n    url.httpGet().header(Pair(\"pragma\", \"no-cache\"), Pair(\"cache-control\", \"no-cache\")).responseString { _, _, result -&gt;\n\n        when (result) {\n            is Result.Failure -&gt; {\n                cont.resumeWithException(result.getException())\n            }\n            is Result.Success -&gt; {\n                cont.resume(result.value)\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>You will need the following permissions:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2227924,"reputation":6845,"user_id":1966247,"accept_rate":50,"display_name":"Muhammad"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1553882069,"creation_date":1553882069,"answer_id":55423087,"question_id":1560788,"body_markdown":"The most Simplest solution would be\r\n====================================\r\n\r\nIn most cases one will only check internet connection if he/she wants to connect to the remote server so the simple and best solution would be pinging your server as following.\r\n\r\n    public boolean isConnected() {\r\n        final String command = &quot;ping -c 1 yourExmapleDomain.com&quot;;\r\n        boolean isConnected = false;\r\n        try {\r\n            isConnected = Runtime.getRuntime().exec(command).waitFor() == 0;\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return isConnected;\r\n    }","title":"How to check internet access on Android? InetAddress never times out","body":"<h1>The most Simplest solution would be</h1>\n\n<p>In most cases one will only check internet connection if he/she wants to connect to the remote server so the simple and best solution would be pinging your server as following.</p>\n\n<pre><code>public boolean isConnected() {\n    final String command = \"ping -c 1 yourExmapleDomain.com\";\n    boolean isConnected = false;\n    try {\n        isConnected = Runtime.getRuntime().exec(command).waitFor() == 0;\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return isConnected;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1089130,"reputation":38492,"user_id":1084174,"accept_rate":89,"display_name":"Sazzad Hissain Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562045241,"creation_date":1562045241,"answer_id":56845865,"question_id":1560788,"body_markdown":"Here is the **Kotlin** version I use for reachability checking,\r\n\r\n###Kotlin MyReachability\r\n    object MyReachability {\r\n\r\n        private val REACHABILITY_SERVER = &quot;http://google.com&quot; // can be any URL you want\r\n\r\n        private fun hasNetworkAvailable(context: Context): Boolean {\r\n            val service = Context.CONNECTIVITY_SERVICE\r\n            val manager = context.getSystemService(service) as ConnectivityManager?\r\n            val network = manager?.activeNetworkInfo\r\n            Log.d(classTag, &quot;hasNetworkAvailable: ${(network != null)}&quot;)\r\n            return (network != null)\r\n        }\r\n    \r\n        fun hasInternetConnected(context: Context): Boolean {\r\n            if (hasNetworkAvailable(context)) {\r\n                try {\r\n                    val connection = URL(REACHABILITY_SERVER).openConnection() as HttpURLConnection\r\n                    connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Test&quot;)\r\n                    connection.setRequestProperty(&quot;Connection&quot;, &quot;close&quot;)\r\n                    connection.connectTimeout = 1500\r\n                    connection.connect()\r\n                    Log.d(classTag, &quot;hasInternetConnected: ${(connection.responseCode == 200)}&quot;)\r\n                    return (connection.responseCode == 200)\r\n                } catch (e: IOException) {\r\n                    Log.e(classTag, &quot;Error checking internet connection&quot;, e)\r\n                }\r\n            } else {\r\n                Log.w(classTag, &quot;No network available!&quot;)\r\n            }\r\n            Log.d(classTag, &quot;hasInternetConnected: false&quot;)\r\n            return false\r\n        }\r\n    }\r\n\r\nYou can even pass the `REACHABILITY_SERVER` as param based on policy and restrictions, for example when you are in china you can check [https://baidu.com][1] rather [https://google.com][2].\r\n\r\n###Calling example,\r\n\r\n    val webLoaderThread = Thread {\r\n       if (MyReachability.hasInternetConnected(this)){\r\n           runOnUiThread {\r\n               //mWebView.loadUrl(LANDING_SERVER) // connected\r\n           }\r\n       } else {\r\n           runOnUiThread {\r\n               //showDialogNoNetwork() // not connected\r\n           }\r\n       }\r\n    }\r\n    webLoaderThread.start()\r\n\r\n###Android permissions\r\nDont forget to add these below permissions to your `AndroidManifest.xml`\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n\r\n  [1]: https://baidu.com\r\n  [2]: https://google.com","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Here is the <strong>Kotlin</strong> version I use for reachability checking,</p>\n\n<h3>Kotlin MyReachability</h3>\n\n<pre><code>object MyReachability {\n\n    private val REACHABILITY_SERVER = \"http://google.com\" // can be any URL you want\n\n    private fun hasNetworkAvailable(context: Context): Boolean {\n        val service = Context.CONNECTIVITY_SERVICE\n        val manager = context.getSystemService(service) as ConnectivityManager?\n        val network = manager?.activeNetworkInfo\n        Log.d(classTag, \"hasNetworkAvailable: ${(network != null)}\")\n        return (network != null)\n    }\n\n    fun hasInternetConnected(context: Context): Boolean {\n        if (hasNetworkAvailable(context)) {\n            try {\n                val connection = URL(REACHABILITY_SERVER).openConnection() as HttpURLConnection\n                connection.setRequestProperty(\"User-Agent\", \"Test\")\n                connection.setRequestProperty(\"Connection\", \"close\")\n                connection.connectTimeout = 1500\n                connection.connect()\n                Log.d(classTag, \"hasInternetConnected: ${(connection.responseCode == 200)}\")\n                return (connection.responseCode == 200)\n            } catch (e: IOException) {\n                Log.e(classTag, \"Error checking internet connection\", e)\n            }\n        } else {\n            Log.w(classTag, \"No network available!\")\n        }\n        Log.d(classTag, \"hasInternetConnected: false\")\n        return false\n    }\n}\n</code></pre>\n\n<p>You can even pass the <code>REACHABILITY_SERVER</code> as param based on policy and restrictions, for example when you are in china you can check <a href=\"https://baidu.com\" rel=\"nofollow noreferrer\">https://baidu.com</a> rather <a href=\"https://google.com\" rel=\"nofollow noreferrer\">https://google.com</a>.</p>\n\n<h3>Calling example,</h3>\n\n<pre><code>val webLoaderThread = Thread {\n   if (MyReachability.hasInternetConnected(this)){\n       runOnUiThread {\n           //mWebView.loadUrl(LANDING_SERVER) // connected\n       }\n   } else {\n       runOnUiThread {\n           //showDialogNoNetwork() // not connected\n       }\n   }\n}\nwebLoaderThread.start()\n</code></pre>\n\n<h3>Android permissions</h3>\n\n<p>Dont forget to add these below permissions to your <code>AndroidManifest.xml</code></p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3505519,"reputation":2446,"user_id":2931124,"accept_rate":0,"display_name":"ked"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575633766,"creation_date":1575633766,"answer_id":59212801,"question_id":1560788,"body_markdown":"Using the following method to check internet connectivity, also ConnectivityManager.getActiveNetworkInfo() is deprecated in API 28 \r\n```\r\n@Suppress(&quot;DEPRECATION&quot;)\r\nfun isNetworkConnected(context: Context): Boolean {\r\n    val cm = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager?\r\n    return cm?.run {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            cm.getNetworkCapabilities(cm.activeNetwork)?.run {\r\n                when {\r\n                    hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; true\r\n                    hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; true\r\n                    hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET) -&gt; true\r\n                    else -&gt; false\r\n                }\r\n            }\r\n        } else {\r\n            cm.activeNetworkInfo?.run {\r\n                when (type) {\r\n                    ConnectivityManager.TYPE_WIFI -&gt; true\r\n                    ConnectivityManager.TYPE_MOBILE -&gt; true\r\n                    else -&gt; false\r\n                }\r\n            }\r\n        }\r\n    } ?: false\r\n\r\n}\r\n```\r\nAlso add the following permission to the manifest\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n```\r\nhasTransport(NetworkCapabilities.TRANSPORT_ETHERNET) is used for apps developed for Android TV where TV can be directly connected to Ethernet","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Using the following method to check internet connectivity, also ConnectivityManager.getActiveNetworkInfo() is deprecated in API 28 </p>\n\n<pre><code>@Suppress(\"DEPRECATION\")\nfun isNetworkConnected(context: Context): Boolean {\n    val cm = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager?\n    return cm?.run {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            cm.getNetworkCapabilities(cm.activeNetwork)?.run {\n                when {\n                    hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; true\n                    hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; true\n                    hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET) -&gt; true\n                    else -&gt; false\n                }\n            }\n        } else {\n            cm.activeNetworkInfo?.run {\n                when (type) {\n                    ConnectivityManager.TYPE_WIFI -&gt; true\n                    ConnectivityManager.TYPE_MOBILE -&gt; true\n                    else -&gt; false\n                }\n            }\n        }\n    } ?: false\n\n}\n</code></pre>\n\n<p>Also add the following permission to the manifest</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET) is used for apps developed for Android TV where TV can be directly connected to Ethernet</p>\n"},{"tags":[],"owner":{"account_id":3529602,"reputation":24852,"user_id":2949612,"accept_rate":76,"display_name":"pRaNaY"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576559958,"creation_date":1576559958,"answer_id":59368019,"question_id":1560788,"body_markdown":"As Android doc suggest, after\r\n&gt; [getActiveNetworkInfo()](https://developer.android.com/reference/android/net/ConnectivityManager#getActiveNetworkInfo()) was deprecated in Android 10. Use\r\n&gt; [NetworkCallbacks](https://developer.android.com/reference/android/net/ConnectivityManager.NetworkCallback) instead for apps that target Android 10 (API level\r\n&gt; 29) and higher.\r\n\r\nSo below is the way which we are using to check network connection **Currently**:\r\n\r\n    val cm = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\r\n    val activeNetwork: NetworkInfo? = cm.activeNetworkInfo\r\n    val isConnected: Boolean = activeNetwork?.isConnectedOrConnecting == true\r\n\r\nThe new way for checking internet connection using [NetworkCallbacks](https://developer.android.com/reference/android/net/ConnectivityManager.NetworkCallback)\r\n\r\n**Step 1:**\r\n\r\n        private lateinit var connectivityManager:ConnectivityManager\r\n\r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            ...\r\n            connectivityManager = getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\r\n        }\r\n\r\n**Step 2**: Create Callback:\r\n\r\n    private val callback = object : ConnectivityManager.NetworkCallback() {\r\n        override fun onAvailable(network: Network) {\r\n            super.onAvailable(network)\r\n            Timber.e(&quot;Network:onAvailable&quot;)\r\n        }\r\n\r\n        override fun onLost(network: Network) {\r\n            super.onLost(network)\r\n            Timber.e(&quot;Network:onLost&quot;)\r\n        }\r\n\r\n    }\r\n\r\n**Step 3:** Register and UnRegister CallBack:\r\n\r\n    private fun registerNetworkCallback() {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n            connectivityManager.registerDefaultNetworkCallback(callback)\r\n        } else {\r\n            // Old way to check network connection\r\n        }\r\n    }\r\n\r\n    override fun onStop() {\r\n        unRegisterNetworkCallback()\r\n        super.onStop()\r\n    }\r\n\r\n    private fun unRegisterNetworkCallback() {\r\n        connectivityManager.unregisterNetworkCallback(callback)\r\n    }\r\n\r\nCheckout update details on below link:\r\n\r\nhttps://developer.android.com/training/monitoring-device-state/connectivity-status-type","title":"How to check internet access on Android? InetAddress never times out","body":"<p>As Android doc suggest, after</p>\n\n<blockquote>\n  <p><a href=\"https://developer.android.com/reference/android/net/ConnectivityManager#getActiveNetworkInfo()\" rel=\"nofollow noreferrer\">getActiveNetworkInfo()</a> was deprecated in Android 10. Use\n  <a href=\"https://developer.android.com/reference/android/net/ConnectivityManager.NetworkCallback\" rel=\"nofollow noreferrer\">NetworkCallbacks</a> instead for apps that target Android 10 (API level\n  29) and higher.</p>\n</blockquote>\n\n<p>So below is the way which we are using to check network connection <strong>Currently</strong>:</p>\n\n<pre><code>val cm = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\nval activeNetwork: NetworkInfo? = cm.activeNetworkInfo\nval isConnected: Boolean = activeNetwork?.isConnectedOrConnecting == true\n</code></pre>\n\n<p>The new way for checking internet connection using <a href=\"https://developer.android.com/reference/android/net/ConnectivityManager.NetworkCallback\" rel=\"nofollow noreferrer\">NetworkCallbacks</a></p>\n\n<p><strong>Step 1:</strong></p>\n\n<pre><code>    private lateinit var connectivityManager:ConnectivityManager\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        ...\n        connectivityManager = getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\n    }\n</code></pre>\n\n<p><strong>Step 2</strong>: Create Callback:</p>\n\n<pre><code>private val callback = object : ConnectivityManager.NetworkCallback() {\n    override fun onAvailable(network: Network) {\n        super.onAvailable(network)\n        Timber.e(\"Network:onAvailable\")\n    }\n\n    override fun onLost(network: Network) {\n        super.onLost(network)\n        Timber.e(\"Network:onLost\")\n    }\n\n}\n</code></pre>\n\n<p><strong>Step 3:</strong> Register and UnRegister CallBack:</p>\n\n<pre><code>private fun registerNetworkCallback() {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n        connectivityManager.registerDefaultNetworkCallback(callback)\n    } else {\n        // Old way to check network connection\n    }\n}\n\noverride fun onStop() {\n    unRegisterNetworkCallback()\n    super.onStop()\n}\n\nprivate fun unRegisterNetworkCallback() {\n    connectivityManager.unregisterNetworkCallback(callback)\n}\n</code></pre>\n\n<p>Checkout update details on below link:</p>\n\n<p><a href=\"https://developer.android.com/training/monitoring-device-state/connectivity-status-type\" rel=\"nofollow noreferrer\">https://developer.android.com/training/monitoring-device-state/connectivity-status-type</a></p>\n"},{"tags":[],"owner":{"account_id":2301616,"reputation":6714,"user_id":2021812,"accept_rate":52,"display_name":"Malwinder Singh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1577283282,"creation_date":1577283282,"answer_id":59479216,"question_id":1560788,"body_markdown":"Use this Kotlin Extension:\r\n\r\n    /**\r\n     * Check whether network is available\r\n     *\r\n     * @param context\r\n     * @return Whether device is connected to Network.\r\n     */\r\n    fun Context.isNetworkAvailable(): Boolean {\r\n        with(getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager) {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                //Device is running on Marshmallow or later Android OS.\r\n                with(getNetworkCapabilities(activeNetwork)) {\r\n                    return hasTransport(NetworkCapabilities.TRANSPORT_WIFI) || hasTransport(\r\n                        NetworkCapabilities.TRANSPORT_CELLULAR\r\n                    )\r\n                }\r\n            } else {\r\n                activeNetworkInfo?.let {\r\n                    // connected to the internet\r\n                    @Suppress(&quot;DEPRECATION&quot;)\r\n                    return listOf(ConnectivityManager.TYPE_WIFI, ConnectivityManager.TYPE_MOBILE).contains(it.type)\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Use this Kotlin Extension:</p>\n\n<pre><code>/**\n * Check whether network is available\n *\n * @param context\n * @return Whether device is connected to Network.\n */\nfun Context.isNetworkAvailable(): Boolean {\n    with(getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager) {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            //Device is running on Marshmallow or later Android OS.\n            with(getNetworkCapabilities(activeNetwork)) {\n                return hasTransport(NetworkCapabilities.TRANSPORT_WIFI) || hasTransport(\n                    NetworkCapabilities.TRANSPORT_CELLULAR\n                )\n            }\n        } else {\n            activeNetworkInfo?.let {\n                // connected to the internet\n                @Suppress(\"DEPRECATION\")\n                return listOf(ConnectivityManager.TYPE_WIFI, ConnectivityManager.TYPE_MOBILE).contains(it.type)\n            }\n        }\n    }\n    return false\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7602691,"reputation":1439,"user_id":5766670,"display_name":"Anand Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1577649327,"creation_date":1577649327,"answer_id":59522801,"question_id":1560788,"body_markdown":"Use method:\r\n\r\n    private fun isInternetAvailable(context: Context): Boolean {\r\n        (context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).run {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                return this.getNetworkCapabilities(this.activeNetwork)?.hasCapability(\r\n                    NetworkCapabilities.NET_CAPABILITY_INTERNET\r\n                ) ?: false\r\n            } else {\r\n                (@Suppress(&quot;DEPRECATION&quot;)\r\n                return this.activeNetworkInfo?.isConnected ?: false)\r\n            }\r\n        }\r\n    }\r\n\r\nAnd permissions required:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Use method:</p>\n\n<pre><code>private fun isInternetAvailable(context: Context): Boolean {\n    (context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).run {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            return this.getNetworkCapabilities(this.activeNetwork)?.hasCapability(\n                NetworkCapabilities.NET_CAPABILITY_INTERNET\n            ) ?: false\n        } else {\n            (@Suppress(\"DEPRECATION\")\n            return this.activeNetworkInfo?.isConnected ?: false)\n        }\n    }\n}\n</code></pre>\n\n<p>And permissions required:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13476330,"reputation":1002,"user_id":9723204,"display_name":"Hawklike"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1607808580,"creation_date":1585679700,"answer_id":60957561,"question_id":1560788,"body_markdown":"&lt;h1&gt; Kotlin and coroutines &lt;/h1&gt;\r\n\r\nI have placed the function in a `ViewModel`, which has the `viewModelScope`. Using an observable `LiveData` I inform an activity about the connection.\r\n\r\n**ViewModel**\r\n\r\n``` Kotlin\r\n fun checkInternetConnection(timeoutMs: Int) {\r\n        viewModelScope.launch(Dispatchers.IO) {\r\n            try {\r\n                val socket = Socket()\r\n                val socketAddress = InetSocketAddress(&quot;8.8.8.8&quot;, 53)\r\n\r\n                socket.connect(socketAddress, timeoutMs)\r\n                socket.close()\r\n\r\n                _connection.postValue(true)\r\n            }\r\n            catch(ex: IOException) {\r\n                _connection.postValue(false)\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n```Kotlin\r\n private val _connection = MutableLiveData&lt;Boolean&gt;()\r\n val connection: LiveData&lt;Boolean&gt; = _connection\r\n```\r\n\r\n**Activity**\r\n```Kotlin\r\n private fun checkInternetConnection() {\r\n     viewModel.connection.observe(this) { hasInternet -&gt;\r\n         if(!hasInternet) {\r\n             //hasn&#39;t connection\r\n         }\r\n         else {\r\n            //has connection\r\n         }\r\n     }\r\n  }\r\n```","title":"How to check internet access on Android? InetAddress never times out","body":"<h1> Kotlin and coroutines </h1>\n<p>I have placed the function in a <code>ViewModel</code>, which has the <code>viewModelScope</code>. Using an observable <code>LiveData</code> I inform an activity about the connection.</p>\n<p><strong>ViewModel</strong></p>\n<pre><code> fun checkInternetConnection(timeoutMs: Int) {\n        viewModelScope.launch(Dispatchers.IO) {\n            try {\n                val socket = Socket()\n                val socketAddress = InetSocketAddress(&quot;8.8.8.8&quot;, 53)\n\n                socket.connect(socketAddress, timeoutMs)\n                socket.close()\n\n                _connection.postValue(true)\n            }\n            catch(ex: IOException) {\n                _connection.postValue(false)\n            }\n        }\n    }\n</code></pre>\n<pre><code> private val _connection = MutableLiveData&lt;Boolean&gt;()\n val connection: LiveData&lt;Boolean&gt; = _connection\n</code></pre>\n<p><strong>Activity</strong></p>\n<pre><code> private fun checkInternetConnection() {\n     viewModel.connection.observe(this) { hasInternet -&gt;\n         if(!hasInternet) {\n             //hasn't connection\n         }\n         else {\n            //has connection\n         }\n     }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10932052,"reputation":12327,"user_id":8034839,"display_name":"shizhen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598235471,"creation_date":1598235471,"answer_id":63553939,"question_id":1560788,"body_markdown":"## Kotlin implementation\r\n\r\n```kotlin\r\n/**\r\n* Function that uses ping, takes server name or ip as argument.\r\n*\r\n* @return [Double.MAX_VALUE] if server is not reachable. Average RTT if the server is reachable.\r\n*\r\n* Success output example\r\n*\r\n* PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.\r\n* 64 bytes from 8.8.8.8: icmp_seq=1 ttl=254 time=172 ms\r\n* 64 bytes from 8.8.8.8: icmp_seq=2 ttl=254 time=166 ms\r\n* 64 bytes from 8.8.8.8: icmp_seq=3 ttl=254 time=167 ms\r\n* 64 bytes from 8.8.8.8: icmp_seq=4 ttl=254 time=172 ms\r\n* 64 bytes from 8.8.8.8: icmp_seq=5 ttl=254 time=167 ms\r\n\r\n* --- 8.8.8.8 ping statistics ---\r\n* 5 packets transmitted, 5 received, 0% packet loss, time 4011ms\r\n* rtt min/avg/max/mdev = 166.470/169.313/172.322/2.539 ms\r\n*          |________________________|\r\n* value to parse using it.split(&#39;=&#39;)[1].trim().split(&#39; &#39;)[0].trim().split(&#39;/&#39;)[1].toDouble()\r\n*/\r\n@ExperimentalStdlibApi\r\nfun pingServerAverageRtt(host: String): Double {\r\n\r\n    var aveRtt: Double = Double.MAX_VALUE\r\n\r\n    try {\r\n        // execute the command on the environment interface, timeout is set as 0.2 to get response faster.\r\n        val pingProcess: Process = Runtime.getRuntime().exec(&quot;/system/bin/ping -i 0.2 -c 5 $host&quot;)\r\n        // gets the input stream to get the output of the executed command\r\n        val bufferedReader = BufferedReader(InputStreamReader(pingProcess.inputStream))\r\n\r\n        bufferedReader.forEachLine {\r\n            if (it.isNotEmpty() &amp;&amp; it.contains(&quot;min/avg/max/mdev&quot;)) {  // when we get to the last line of executed ping command\r\n                aveRtt = it.split(&#39;=&#39;)[1].trim()\r\n                        .split(&#39; &#39;)[0].trim()\r\n                        .split(&#39;/&#39;)[1].toDouble()\r\n            }\r\n        }\r\n    } catch (e: IOException) {\r\n        e.printStackTrace()\r\n    }\r\n\r\n    return aveRtt\r\n}\r\n\r\n```\r\n\r\n## Usage example\r\n\r\n```kotlin\r\n\r\nval latency = pingServerAverageRtt(ipString)\r\nif (latency != Double.MAX_VALUE) { \r\n    //server reachable\r\n} else {\r\n    //server not reachable\r\n}\r\n```","title":"How to check internet access on Android? InetAddress never times out","body":"<h2>Kotlin implementation</h2>\n<pre class=\"lang-kotlin prettyprint-override\"><code>/**\n* Function that uses ping, takes server name or ip as argument.\n*\n* @return [Double.MAX_VALUE] if server is not reachable. Average RTT if the server is reachable.\n*\n* Success output example\n*\n* PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.\n* 64 bytes from 8.8.8.8: icmp_seq=1 ttl=254 time=172 ms\n* 64 bytes from 8.8.8.8: icmp_seq=2 ttl=254 time=166 ms\n* 64 bytes from 8.8.8.8: icmp_seq=3 ttl=254 time=167 ms\n* 64 bytes from 8.8.8.8: icmp_seq=4 ttl=254 time=172 ms\n* 64 bytes from 8.8.8.8: icmp_seq=5 ttl=254 time=167 ms\n\n* --- 8.8.8.8 ping statistics ---\n* 5 packets transmitted, 5 received, 0% packet loss, time 4011ms\n* rtt min/avg/max/mdev = 166.470/169.313/172.322/2.539 ms\n*          |________________________|\n* value to parse using it.split('=')[1].trim().split(' ')[0].trim().split('/')[1].toDouble()\n*/\n@ExperimentalStdlibApi\nfun pingServerAverageRtt(host: String): Double {\n\n    var aveRtt: Double = Double.MAX_VALUE\n\n    try {\n        // execute the command on the environment interface, timeout is set as 0.2 to get response faster.\n        val pingProcess: Process = Runtime.getRuntime().exec(&quot;/system/bin/ping -i 0.2 -c 5 $host&quot;)\n        // gets the input stream to get the output of the executed command\n        val bufferedReader = BufferedReader(InputStreamReader(pingProcess.inputStream))\n\n        bufferedReader.forEachLine {\n            if (it.isNotEmpty() &amp;&amp; it.contains(&quot;min/avg/max/mdev&quot;)) {  // when we get to the last line of executed ping command\n                aveRtt = it.split('=')[1].trim()\n                        .split(' ')[0].trim()\n                        .split('/')[1].toDouble()\n            }\n        }\n    } catch (e: IOException) {\n        e.printStackTrace()\n    }\n\n    return aveRtt\n}\n\n</code></pre>\n<h2>Usage example</h2>\n<pre class=\"lang-kotlin prettyprint-override\"><code>\nval latency = pingServerAverageRtt(ipString)\nif (latency != Double.MAX_VALUE) { \n    //server reachable\n} else {\n    //server not reachable\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17307904,"reputation":31,"user_id":12536231,"display_name":"Wadelzubair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599574158,"creation_date":1599574158,"answer_id":63795709,"question_id":1560788,"body_markdown":"This my workaround to solve this problem and check the valid internet connection because as they said that Network info class cannot give you the expected result and it may return true when network connected but no internet.\r\n\r\nSo this my **COMPLETE WORKAROUND** based on @Levite Answer:\r\n\r\nFirst you must have AsynckTask for checking Network availability and this is mine:\r\n\r\n    public class Connectivity {\r\n     private static final String TAG = &quot;Connectivity&quot;;\r\n    private static boolean hasConnected = false, hasChecked = false;\r\n    private InternetListener internetListener;\r\n    private Activity activity;\r\n\r\n    public Connectivity(InternetListener internetListener, Activity activity) {\r\n        this.internetListener = internetListener;\r\n        this.activity = activity;\r\n    }\r\n\r\n    public void startInternetListener() {\r\n\r\n\r\n        CheckURL checkURL = new CheckURL(activity);\r\n\r\n        checkURL.execute();\r\n\r\n        long startTime = System.currentTimeMillis();\r\n\r\n        while (true) {\r\n            if (hasChecked &amp;&amp; hasConnected) {\r\n                activity.runOnUiThread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        internetListener.onConnected();\r\n                    }\r\n                });\r\n\r\n                checkURL.cancel(true);\r\n                return;\r\n            }\r\n\r\n            // check if time\r\n            if (System.currentTimeMillis() - startTime &gt;= 1000) {\r\n                activity.runOnUiThread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        internetListener.onDisconnected();\r\n                    }\r\n                });\r\n\r\n\r\n                checkURL.cancel(true);\r\n                return;\r\n            }\r\n        }\r\n\r\n        //return hasConnected;\r\n    }\r\n\r\n\r\n    class CheckURL extends AsyncTask&lt;Void, Void, Boolean&gt; {\r\n\r\n        private Activity activity;\r\n\r\n        public CheckURL(Activity activity) {\r\n            this.activity = activity;\r\n        }\r\n\r\n        @Override\r\n        protected Boolean doInBackground(Void... params) {\r\n            if (!isNetWorkAvailable(activity)) {\r\n                Log.i(TAG, &quot;Internet not available!&quot;);\r\n                return false;\r\n            }\r\n\r\n            int timeoutMs = 3000;\r\n\r\n            try {\r\n                Socket sock = new Socket();\r\n                SocketAddress sockaddr = new InetSocketAddress(&quot;8.8.8.8&quot;, 53);\r\n                sock.connect(sockaddr, timeoutMs);\r\n                sock.close();\r\n                Log.i(TAG, &quot;Internet available :)&quot;);\r\n                return true;\r\n\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(Boolean result) {\r\n            hasChecked = true;\r\n            hasConnected = result;\r\n            super.onPostExecute(result);}}\r\n         \r\n\r\n    private static final String TAG = &quot;Connectivity&quot;;\r\n\r\n\r\n    private static boolean isNetWorkAvailable(Activity activity) {\r\n\r\n        ConnectivityManager connectivityManager =\r\n                (ConnectivityManager) \r\n       activity.getSystemService(Activity.CONNECTIVITY_SERVICE);\r\n        NetworkInfo networkInfo =\r\n                null;\r\n        if (connectivityManager != null) {\r\n            networkInfo = \r\n       connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\r\n        }\r\n        boolean isConnected;\r\n        boolean isWifiAvailable = false;\r\n        if (networkInfo != null) {\r\n            isWifiAvailable = networkInfo.isAvailable();\r\n        }\r\n        boolean isWifiConnected = false;\r\n        if (networkInfo != null) {\r\n            isWifiConnected = networkInfo.isConnected();\r\n        }\r\n        if (connectivityManager != null) {\r\n            networkInfo =\r\n                    connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\r\n        }\r\n        boolean isMobileAvailable = false;\r\n        if (networkInfo != null) {\r\n            isMobileAvailable = networkInfo.isAvailable();\r\n        }\r\n        boolean isMobileConnected = false;\r\n        if (networkInfo != null) {\r\n            isMobileConnected = networkInfo.isConnected();\r\n        }\r\n        isConnected = (isMobileAvailable &amp;&amp; isMobileConnected) ||\r\n                (isWifiAvailable &amp;&amp; isWifiConnected);\r\n        return (isConnected);}\r\n        }}\r\n\r\n   \r\n\r\n    private static boolean isNetWorkAvailable(Context context) {\r\n\r\n        ConnectivityManager connectivityManager =\r\n                (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo networkInfo =\r\n                null;\r\n        if (connectivityManager != null) {\r\n            networkInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\r\n        }\r\n        boolean isConnected;\r\n        boolean isWifiAvailable = false;\r\n        if (networkInfo != null) {\r\n            isWifiAvailable = networkInfo.isAvailable();\r\n        }\r\n        boolean isWifiConnected = false;\r\n        if (networkInfo != null) {\r\n            isWifiConnected = networkInfo.isConnected();\r\n        }\r\n        if (connectivityManager != null) {\r\n            networkInfo =\r\n                    connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\r\n        }\r\n        boolean isMobileAvailable = false;\r\n        if (networkInfo != null) {\r\n            isMobileAvailable = networkInfo.isAvailable();\r\n        }\r\n        boolean isMobileConnected = false;\r\n        if (networkInfo != null) {\r\n            isMobileConnected = networkInfo.isConnected();\r\n        }\r\n        isConnected = (isMobileAvailable &amp;&amp; isMobileConnected) ||\r\n                (isWifiAvailable &amp;&amp; isWifiConnected);\r\n        return (isConnected);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nAfter that you should create another thread to start AscnkTask And listen for result with the InternetListener.\r\n\r\n\r\n    public interface InternetListener {\r\n    void onConnected();\r\n    void onDisconnected();\r\n    }\r\n\r\nAnd the Thread that is waiting for AsynckTask result you can put it in Utility class:\r\n\r\n     private static Thread thread;\r\n\r\n    public static void startNetworkListener(Context context, InternetListener \r\n        internetListener) {\r\n\r\n        if (thread == null){\r\n            thread = new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    Looper.prepare();\r\n                    new Connectivity(internetListener,context).startInternetListener();\r\n                }\r\n            });\r\n        }\r\n\r\n        thread.start();\r\n     }\r\n\r\nFinally call the startNetworkListener() method and listen for result.\r\n\r\nexample in activity from My Utils.java class :\r\n\r\n         Utils.startNetworkListener(this, new InternetListener() {\r\n            @Override\r\n            public void onConnected() {\r\n               // do your work when internet available. \r\n            }\r\n\r\n            @Override\r\n            public void onDisconnected() {\r\n              // do your work when no internet available. \r\n            }\r\n        });\r\n\r\nHappy Coding :).","title":"How to check internet access on Android? InetAddress never times out","body":"<p>This my workaround to solve this problem and check the valid internet connection because as they said that Network info class cannot give you the expected result and it may return true when network connected but no internet.</p>\n<p>So this my <strong>COMPLETE WORKAROUND</strong> based on @Levite Answer:</p>\n<p>First you must have AsynckTask for checking Network availability and this is mine:</p>\n<pre><code>public class Connectivity {\n private static final String TAG = &quot;Connectivity&quot;;\nprivate static boolean hasConnected = false, hasChecked = false;\nprivate InternetListener internetListener;\nprivate Activity activity;\n\npublic Connectivity(InternetListener internetListener, Activity activity) {\n    this.internetListener = internetListener;\n    this.activity = activity;\n}\n\npublic void startInternetListener() {\n\n\n    CheckURL checkURL = new CheckURL(activity);\n\n    checkURL.execute();\n\n    long startTime = System.currentTimeMillis();\n\n    while (true) {\n        if (hasChecked &amp;&amp; hasConnected) {\n            activity.runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    internetListener.onConnected();\n                }\n            });\n\n            checkURL.cancel(true);\n            return;\n        }\n\n        // check if time\n        if (System.currentTimeMillis() - startTime &gt;= 1000) {\n            activity.runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    internetListener.onDisconnected();\n                }\n            });\n\n\n            checkURL.cancel(true);\n            return;\n        }\n    }\n\n    //return hasConnected;\n}\n\n\nclass CheckURL extends AsyncTask&lt;Void, Void, Boolean&gt; {\n\n    private Activity activity;\n\n    public CheckURL(Activity activity) {\n        this.activity = activity;\n    }\n\n    @Override\n    protected Boolean doInBackground(Void... params) {\n        if (!isNetWorkAvailable(activity)) {\n            Log.i(TAG, &quot;Internet not available!&quot;);\n            return false;\n        }\n\n        int timeoutMs = 3000;\n\n        try {\n            Socket sock = new Socket();\n            SocketAddress sockaddr = new InetSocketAddress(&quot;8.8.8.8&quot;, 53);\n            sock.connect(sockaddr, timeoutMs);\n            sock.close();\n            Log.i(TAG, &quot;Internet available :)&quot;);\n            return true;\n\n        } catch (IOException e) {\n            e.printStackTrace();\n            return false;\n        }\n\n    }\n\n    @Override\n    protected void onPostExecute(Boolean result) {\n        hasChecked = true;\n        hasConnected = result;\n        super.onPostExecute(result);}}\n     \n\nprivate static final String TAG = &quot;Connectivity&quot;;\n\n\nprivate static boolean isNetWorkAvailable(Activity activity) {\n\n    ConnectivityManager connectivityManager =\n            (ConnectivityManager) \n   activity.getSystemService(Activity.CONNECTIVITY_SERVICE);\n    NetworkInfo networkInfo =\n            null;\n    if (connectivityManager != null) {\n        networkInfo = \n   connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n    }\n    boolean isConnected;\n    boolean isWifiAvailable = false;\n    if (networkInfo != null) {\n        isWifiAvailable = networkInfo.isAvailable();\n    }\n    boolean isWifiConnected = false;\n    if (networkInfo != null) {\n        isWifiConnected = networkInfo.isConnected();\n    }\n    if (connectivityManager != null) {\n        networkInfo =\n                connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n    }\n    boolean isMobileAvailable = false;\n    if (networkInfo != null) {\n        isMobileAvailable = networkInfo.isAvailable();\n    }\n    boolean isMobileConnected = false;\n    if (networkInfo != null) {\n        isMobileConnected = networkInfo.isConnected();\n    }\n    isConnected = (isMobileAvailable &amp;&amp; isMobileConnected) ||\n            (isWifiAvailable &amp;&amp; isWifiConnected);\n    return (isConnected);}\n    }}\n\n\n\nprivate static boolean isNetWorkAvailable(Context context) {\n\n    ConnectivityManager connectivityManager =\n            (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo networkInfo =\n            null;\n    if (connectivityManager != null) {\n        networkInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n    }\n    boolean isConnected;\n    boolean isWifiAvailable = false;\n    if (networkInfo != null) {\n        isWifiAvailable = networkInfo.isAvailable();\n    }\n    boolean isWifiConnected = false;\n    if (networkInfo != null) {\n        isWifiConnected = networkInfo.isConnected();\n    }\n    if (connectivityManager != null) {\n        networkInfo =\n                connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n    }\n    boolean isMobileAvailable = false;\n    if (networkInfo != null) {\n        isMobileAvailable = networkInfo.isAvailable();\n    }\n    boolean isMobileConnected = false;\n    if (networkInfo != null) {\n        isMobileConnected = networkInfo.isConnected();\n    }\n    isConnected = (isMobileAvailable &amp;&amp; isMobileConnected) ||\n            (isWifiAvailable &amp;&amp; isWifiConnected);\n    return (isConnected);\n\n}\n</code></pre>\n<p>}</p>\n<p>After that you should create another thread to start AscnkTask And listen for result with the InternetListener.</p>\n<pre><code>public interface InternetListener {\nvoid onConnected();\nvoid onDisconnected();\n}\n</code></pre>\n<p>And the Thread that is waiting for AsynckTask result you can put it in Utility class:</p>\n<pre><code> private static Thread thread;\n\npublic static void startNetworkListener(Context context, InternetListener \n    internetListener) {\n\n    if (thread == null){\n        thread = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                Looper.prepare();\n                new Connectivity(internetListener,context).startInternetListener();\n            }\n        });\n    }\n\n    thread.start();\n }\n</code></pre>\n<p>Finally call the startNetworkListener() method and listen for result.</p>\n<p>example in activity from My Utils.java class :</p>\n<pre><code>     Utils.startNetworkListener(this, new InternetListener() {\n        @Override\n        public void onConnected() {\n           // do your work when internet available. \n        }\n\n        @Override\n        public void onDisconnected() {\n          // do your work when no internet available. \n        }\n    });\n</code></pre>\n<p>Happy Coding :).</p>\n"},{"tags":[],"owner":{"account_id":13454565,"reputation":3196,"user_id":9708440,"display_name":"Lakpriya Senevirathna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615124717,"creation_date":1615124717,"answer_id":66517177,"question_id":1560788,"body_markdown":"If you want to show an alert when connection lost. You can use below method. \r\n\r\nThis method use to check connection one time. First you have to create this one in your class.\r\n\r\n    private boolean isNetworkConnected() {\r\n            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            if(!(cm.getActiveNetworkInfo() != null &amp;&amp; cm.getActiveNetworkInfo().isConnected())){\r\n                showNetworkDialog();\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n\r\nCreate this method in your class as connection listener. \r\n\r\n    private void ConnectionCheck(){\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n                ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n                NetworkRequest networkRequest = new NetworkRequest.Builder().build();\r\n                connectivityManager.registerNetworkCallback(networkRequest, new ConnectivityManager.NetworkCallback() {\r\n                    @Override\r\n                    public void onAvailable(Network network) {\r\n                        super.onAvailable(network);\r\n                        Log.i(&quot;Tag&quot;, &quot;active connection&quot;);\r\n                    }\r\n    \r\n                    @Override\r\n                    public void onLost(Network network) {\r\n                        super.onLost(network);\r\n                        Log.i(&quot;Tag&quot;, &quot;losing active connection&quot;);\r\n                        isNetworkConnected();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\nFor showing dialog, you may create showDialog() method.\r\n\r\n    private void showNetworkDialog(){\r\n        new AlertDialog.Builder(MainActivity.this)\r\n                .setIcon(android.R.drawable.ic_dialog_alert)\r\n                .setTitle(&quot;Connection lost?&quot;)\r\n                .setMessage(&quot;Please check your internet connection!&quot;)\r\n                .setCancelable(false)\r\n                .setPositiveButton(&quot;Exit&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        finish();\r\n                    }\r\n                })\r\n                .setNegativeButton(&quot;Retry&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        isNetworkConnected();\r\n                    }\r\n                })\r\n                .show();\r\n    }\r\n\r\nFinally you can call this method in onCreate() method.\r\n\r\n    if(isNetworkConnected()){\r\n                ConnectionCheck();\r\n            }\r\nin Manifest file you have to mention permission.\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\n \r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>If you want to show an alert when connection lost. You can use below method.</p>\n<p>This method use to check connection one time. First you have to create this one in your class.</p>\n<pre><code>private boolean isNetworkConnected() {\n        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n        if(!(cm.getActiveNetworkInfo() != null &amp;&amp; cm.getActiveNetworkInfo().isConnected())){\n            showNetworkDialog();\n            return false;\n        }\n        return true;\n    }\n</code></pre>\n<p>Create this method in your class as connection listener.</p>\n<pre><code>private void ConnectionCheck(){\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n            NetworkRequest networkRequest = new NetworkRequest.Builder().build();\n            connectivityManager.registerNetworkCallback(networkRequest, new ConnectivityManager.NetworkCallback() {\n                @Override\n                public void onAvailable(Network network) {\n                    super.onAvailable(network);\n                    Log.i(&quot;Tag&quot;, &quot;active connection&quot;);\n                }\n\n                @Override\n                public void onLost(Network network) {\n                    super.onLost(network);\n                    Log.i(&quot;Tag&quot;, &quot;losing active connection&quot;);\n                    isNetworkConnected();\n                }\n            });\n        }\n    }\n</code></pre>\n<p>For showing dialog, you may create showDialog() method.</p>\n<pre><code>private void showNetworkDialog(){\n    new AlertDialog.Builder(MainActivity.this)\n            .setIcon(android.R.drawable.ic_dialog_alert)\n            .setTitle(&quot;Connection lost?&quot;)\n            .setMessage(&quot;Please check your internet connection!&quot;)\n            .setCancelable(false)\n            .setPositiveButton(&quot;Exit&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialog, int which) {\n                    finish();\n                }\n            })\n            .setNegativeButton(&quot;Retry&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialog, int which) {\n                    isNetworkConnected();\n                }\n            })\n            .show();\n}\n</code></pre>\n<p>Finally you can call this method in onCreate() method.</p>\n<pre><code>if(isNetworkConnected()){\n            ConnectionCheck();\n        }\n</code></pre>\n<p>in Manifest file you have to mention permission.</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18561436,"reputation":99,"user_id":13525359,"display_name":"Sumanth Perambuduri"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1622542101,"creation_date":1622542101,"answer_id":67786860,"question_id":1560788,"body_markdown":"Code :\r\n\r\n        fun isInternetConnection(): Boolean {\r\n        var returnVal = false\r\n        thread {\r\n            returnVal = try {\r\n                khttp.get(&quot;https://www.google.com/&quot;)\r\n                true\r\n            }catch (e:Exception){\r\n                false\r\n            }\r\n        }.join()\r\n        return returnVal\r\n    }\r\nGradle:\r\n\r\n    implementation &#39;io.karn:khttp-android:0.1.0&#39;\r\n\r\nI use [khttp][1] because it&#39;s so easy to use.\r\n\r\nSo here in the above code if it successfully connects to google.com, it returns true else false. It&#39;s so simple. I don&#39;t understand why everyone has to code like lengthy lines of code even for a simple thing like this. \r\n\r\n  [1]: https://khttp.readthedocs.io/en/latest/","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Code :</p>\n<pre><code>    fun isInternetConnection(): Boolean {\n    var returnVal = false\n    thread {\n        returnVal = try {\n            khttp.get(&quot;https://www.google.com/&quot;)\n            true\n        }catch (e:Exception){\n            false\n        }\n    }.join()\n    return returnVal\n}\n</code></pre>\n<p>Gradle:</p>\n<pre><code>implementation 'io.karn:khttp-android:0.1.0'\n</code></pre>\n<p>I use <a href=\"https://khttp.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">khttp</a> because it's so easy to use.</p>\n<p>So here in the above code if it successfully connects to google.com, it returns true else false. It's so simple. I don't understand why everyone has to code like lengthy lines of code even for a simple thing like this.</p>\n"},{"tags":[],"owner":{"account_id":13010862,"reputation":874,"user_id":9403953,"display_name":"John T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638235300,"creation_date":1638235300,"answer_id":70163190,"question_id":1560788,"body_markdown":"If you&#39;re using Firebase you could use [this][1].\r\n\r\nJava:\r\n\r\n    DatabaseReference connectedRef = FirebaseDatabase.getInstance().getReference(&quot;.info/connected&quot;);\r\n    connectedRef.addValueEventListener(new ValueEventListener() {\r\n        @Override\r\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n            boolean connected = snapshot.getValue(Boolean.class);\r\n            if (connected) {\r\n                Log.d(TAG, &quot;connected&quot;);\r\n            } else {\r\n                Log.d(TAG, &quot;not connected&quot;);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onCancelled(@NonNull DatabaseError error) {\r\n            Log.w(TAG, &quot;Listener was cancelled&quot;);\r\n        }\r\n    });\r\n\r\nKotlin:\r\n\r\n    val connectedRef = Firebase.database.getReference(&quot;.info/connected&quot;)\r\n    connectedRef.addValueEventListener(object : ValueEventListener {\r\n        override fun onDataChange(snapshot: DataSnapshot) {\r\n            val connected = snapshot.getValue(Boolean::class.java) ?: false\r\n            if (connected) {\r\n                Log.d(TAG, &quot;connected&quot;)\r\n            } else {\r\n                Log.d(TAG, &quot;not connected&quot;)\r\n            }\r\n        }\r\n    \r\n        override fun onCancelled(error: DatabaseError) {\r\n            Log.w(TAG, &quot;Listener was cancelled&quot;)\r\n        }\r\n    })\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/database/android/offline-capabilities#section-connection-state","title":"How to check internet access on Android? InetAddress never times out","body":"<p>If you're using Firebase you could use <a href=\"https://firebase.google.com/docs/database/android/offline-capabilities#section-connection-state\" rel=\"nofollow noreferrer\">this</a>.</p>\n<p>Java:</p>\n<pre><code>DatabaseReference connectedRef = FirebaseDatabase.getInstance().getReference(&quot;.info/connected&quot;);\nconnectedRef.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        boolean connected = snapshot.getValue(Boolean.class);\n        if (connected) {\n            Log.d(TAG, &quot;connected&quot;);\n        } else {\n            Log.d(TAG, &quot;not connected&quot;);\n        }\n    }\n\n    @Override\n    public void onCancelled(@NonNull DatabaseError error) {\n        Log.w(TAG, &quot;Listener was cancelled&quot;);\n    }\n});\n</code></pre>\n<p>Kotlin:</p>\n<pre><code>val connectedRef = Firebase.database.getReference(&quot;.info/connected&quot;)\nconnectedRef.addValueEventListener(object : ValueEventListener {\n    override fun onDataChange(snapshot: DataSnapshot) {\n        val connected = snapshot.getValue(Boolean::class.java) ?: false\n        if (connected) {\n            Log.d(TAG, &quot;connected&quot;)\n        } else {\n            Log.d(TAG, &quot;not connected&quot;)\n        }\n    }\n\n    override fun onCancelled(error: DatabaseError) {\n        Log.w(TAG, &quot;Listener was cancelled&quot;)\n    }\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2362295,"reputation":4187,"user_id":2068732,"accept_rate":67,"display_name":"matdev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664443102,"creation_date":1664443102,"answer_id":73893122,"question_id":1560788,"body_markdown":"Here is a simple solution to ensure your app has internet access:\r\n\r\n    static final String CHECK_INTERNET_ACCESS_URL = &quot;https://www.google.com&quot;;\r\n\r\n    public static void isInternetAccessWorking(Context context) {\r\n    \r\n        StringRequest stringRequest = new StringRequest(Request.Method.GET, CHECK_INTERNET_ACCESS_URL,\r\n                new Response.Listener&lt;String&gt;() {\r\n                    @Override\r\n                    public void onResponse(String response) {\r\n                        // Internet access is OK\r\n                    }\r\n                }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                // NO internet access\r\n            }\r\n        });\r\n    \r\n        Volley.newRequestQueue(context).add(stringRequest);\r\n    }\r\n\r\nThis solution uses Android&#39;s Volley lib, which must be declared in `build.gradle`:\r\n\r\n    implementation &#39;com.android.volley:volley:1.1.1&#39;\r\n\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>Here is a simple solution to ensure your app has internet access:</p>\n<pre><code>static final String CHECK_INTERNET_ACCESS_URL = &quot;https://www.google.com&quot;;\n\npublic static void isInternetAccessWorking(Context context) {\n\n    StringRequest stringRequest = new StringRequest(Request.Method.GET, CHECK_INTERNET_ACCESS_URL,\n            new Response.Listener&lt;String&gt;() {\n                @Override\n                public void onResponse(String response) {\n                    // Internet access is OK\n                }\n            }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            // NO internet access\n        }\n    });\n\n    Volley.newRequestQueue(context).add(stringRequest);\n}\n</code></pre>\n<p>This solution uses Android's Volley lib, which must be declared in <code>build.gradle</code>:</p>\n<pre><code>implementation 'com.android.volley:volley:1.1.1'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5055881,"reputation":3266,"user_id":15055605,"display_name":"YaMiN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668105996,"creation_date":1668105996,"answer_id":74393945,"question_id":1560788,"body_markdown":"**Jetpack Compose/Kotlin**  \r\n\r\nBased on [Levite&#39;s][1] [answer][2] one could use this `Composable` in Jetpack Compose:  \r\n\r\n```kotlin\r\nval DNS_SERVERS = listOf(&quot;8.8.8.8&quot;, &quot;1.1.1.1&quot;, &quot;4.2.2.4&quot;)\r\nconst val INTERNET_CHECK_DELAY = 3000L\r\n@Composable\r\nfun InternetAwareComposable(\r\n    dnsServers: List&lt;String&gt; = DNS_SERVERS,\r\n    delay: Long = INTERNET_CHECK_DELAY,\r\n    successContent: (@Composable () -&gt; Unit)? = null,\r\n    errorContent: (@Composable () -&gt; Unit)? = null,\r\n    onlineChanged: ((Boolean) -&gt; Unit)? = null\r\n) {\r\n    suspend fun dnsAccessible(\r\n        dnsServer: String\r\n    ) = try {\r\n        withContext(Dispatchers.IO) {\r\n            Runtime.getRuntime().exec(&quot;/system/bin/ping -c 1 $dnsServer&quot;).waitFor()\r\n        } == 0\r\n    } catch (e: Exception) {\r\n        false\r\n    }\r\n\r\n    var isOnline by remember { mutableStateOf(false) }\r\n    LaunchedEffect(Unit) {\r\n        while (true) {\r\n            isOnline = dnsServers.any { dnsAccessible(it) }\r\n            onlineChanged?.invoke(isOnline)\r\n            delay(delay)\r\n        }\r\n    }\r\n    if (isOnline) successContent?.invoke()\r\n    else errorContent?.invoke()\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/1680919/levite\r\n  [2]: https://stackoverflow.com/a/27312494/15055605","title":"How to check internet access on Android? InetAddress never times out","body":"<p><strong>Jetpack Compose/Kotlin</strong></p>\n<p>Based on <a href=\"https://stackoverflow.com/users/1680919/levite\">Levite's</a> <a href=\"https://stackoverflow.com/a/27312494/15055605\">answer</a> one could use this <code>Composable</code> in Jetpack Compose:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val DNS_SERVERS = listOf(&quot;8.8.8.8&quot;, &quot;1.1.1.1&quot;, &quot;4.2.2.4&quot;)\nconst val INTERNET_CHECK_DELAY = 3000L\n@Composable\nfun InternetAwareComposable(\n    dnsServers: List&lt;String&gt; = DNS_SERVERS,\n    delay: Long = INTERNET_CHECK_DELAY,\n    successContent: (@Composable () -&gt; Unit)? = null,\n    errorContent: (@Composable () -&gt; Unit)? = null,\n    onlineChanged: ((Boolean) -&gt; Unit)? = null\n) {\n    suspend fun dnsAccessible(\n        dnsServer: String\n    ) = try {\n        withContext(Dispatchers.IO) {\n            Runtime.getRuntime().exec(&quot;/system/bin/ping -c 1 $dnsServer&quot;).waitFor()\n        } == 0\n    } catch (e: Exception) {\n        false\n    }\n\n    var isOnline by remember { mutableStateOf(false) }\n    LaunchedEffect(Unit) {\n        while (true) {\n            isOnline = dnsServers.any { dnsAccessible(it) }\n            onlineChanged?.invoke(isOnline)\n            delay(delay)\n        }\n    }\n    if (isOnline) successContent?.invoke()\n    else errorContent?.invoke()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2978244,"reputation":1562,"user_id":2528840,"accept_rate":92,"display_name":"Schadenfreude"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672763345,"creation_date":1671467042,"answer_id":74853250,"question_id":1560788,"body_markdown":"I see a lot of outdated answers here, so I decided to add mine to the mix.\r\n\r\nAs of **Android 10 (API level 29**) `getActiveNetworkInfo()` was deprecated and Google recommends that we use `NetworkCallbacks` instead for apps that target  **Android 10** and higher.\r\n\r\nThe [documentation][1] on **Reading network state** gives some info on how to use the `NetworkCallback` but I didn&#39;t manage to find a good code example with the whole thing working, so here&#39;s the code I came up with, that we use in our app:\r\n\r\n```\r\nimport android.content.Context\r\nimport android.net.ConnectivityManager\r\nimport android.net.LinkProperties\r\nimport android.net.Network\r\nimport android.net.NetworkCapabilities\r\nimport com.fieldontrack.kmm.common.network.ConnectivityMonitor\r\nimport com.fieldontrack.kmm.entities.connectivity.NetworkType\r\nimport kotlinx.coroutines.flow.MutableStateFlow\r\nimport kotlinx.coroutines.flow.StateFlow\r\n\r\nclass ConnectivityMonitorImpl(appContext: Context) : ConnectivityMonitor {\r\n    private val connectivityManager = appContext.getSystemService(ConnectivityManager::class.java)\r\n    private val networkCallback = object : ConnectivityManager.NetworkCallback() {\r\n        override fun onAvailable(network: Network) =\r\n            connectivityManager.getNetworkCapabilities(network)?.let { networkCapabilities -&gt;\r\n                updateConnectionStatus(networkCapabilities = networkCapabilities)\r\n                updateNetworkType(networkCapabilities = networkCapabilities)\r\n            } ?: run {\r\n                _isConnectedState.value = true\r\n            }\r\n\r\n        override fun onLost(network: Network) {\r\n            // Do not check for NetworkCapabilities here, as they might be wrong.\r\n            // If we get this callback, we&#39;re certain that we&#39;ve lost connection.\r\n            _isConnectedState.value = false\r\n            _networkTypeState.value = NetworkType.Unknown\r\n        }\r\n\r\n        override fun onCapabilitiesChanged(\r\n            network: Network,\r\n            networkCapabilities: NetworkCapabilities\r\n        ) {\r\n            updateConnectionStatus(networkCapabilities = networkCapabilities)\r\n            updateNetworkType(networkCapabilities = networkCapabilities)\r\n        }\r\n\r\n        override fun onLinkPropertiesChanged(\r\n            network: Network,\r\n            linkProperties: LinkProperties\r\n        ) = Unit\r\n    }\r\n    private val _isConnectedState = MutableStateFlow(false)\r\n    private val _networkTypeState = MutableStateFlow(NetworkType.Unknown)\r\n\r\n    override val isConnectedState: StateFlow&lt;Boolean&gt; = _isConnectedState\r\n    override val networkTypeState: StateFlow&lt;NetworkType&gt; = _networkTypeState\r\n\r\n    override val isConnected: Boolean\r\n        get() = _isConnectedState.value\r\n\r\n    override val networkType: NetworkType\r\n        get() = _networkTypeState.value\r\n\r\n    init {\r\n        startMonitoring()\r\n    }\r\n\r\n    override fun startMonitoring() =\r\n        connectivityManager.registerDefaultNetworkCallback(networkCallback)\r\n\r\n    override fun stopMonitoring() =\r\n        connectivityManager.unregisterNetworkCallback(networkCallback)\r\n\r\n    private fun updateConnectionStatus(networkCapabilities: NetworkCapabilities) {\r\n        val isConnected =\r\n            networkCapabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\r\n\r\n        _isConnectedState.value = isConnected\r\n    }\r\n\r\n    private fun updateNetworkType(networkCapabilities: NetworkCapabilities) {\r\n        val networkType = when {\r\n            networkCapabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; NetworkType.WiFi\r\n            networkCapabilities.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; NetworkType.Cellular\r\n            else -&gt; NetworkType.Unknown\r\n        }\r\n\r\n        _networkTypeState.value = networkType\r\n    }\r\n}\r\n```\r\n\r\nThe `ConnectivityMonitor` interface is pretty simple:\r\n```\r\ninterface ConnectivityMonitor {\r\n    val isConnected: Boolean\r\n    val networkType: NetworkType\r\n\r\n    val isConnectedState: StateFlow&lt;Boolean&gt;\r\n    val networkTypeState: StateFlow&lt;NetworkType&gt;\r\n    \r\n    fun startMonitoring()\r\n    fun stopMonitoring()\r\n}\r\n```\r\n\r\nAnd `NetworkType` is just a simple enum:\r\n```\r\nenum class NetworkType { Unknown, Cellular, WiFi }\r\n```\r\n\r\nAs far as I&#39;ve tested this works whether the App is in background or foreground.\r\n\r\n  [1]: https://developer.android.com/training/basics/network-ops/reading-network-state#listening-events","title":"How to check internet access on Android? InetAddress never times out","body":"<p>I see a lot of outdated answers here, so I decided to add mine to the mix.</p>\n<p>As of <strong>Android 10 (API level 29</strong>) <code>getActiveNetworkInfo()</code> was deprecated and Google recommends that we use <code>NetworkCallbacks</code> instead for apps that target  <strong>Android 10</strong> and higher.</p>\n<p>The <a href=\"https://developer.android.com/training/basics/network-ops/reading-network-state#listening-events\" rel=\"nofollow noreferrer\">documentation</a> on <strong>Reading network state</strong> gives some info on how to use the <code>NetworkCallback</code> but I didn't manage to find a good code example with the whole thing working, so here's the code I came up with, that we use in our app:</p>\n<pre><code>import android.content.Context\nimport android.net.ConnectivityManager\nimport android.net.LinkProperties\nimport android.net.Network\nimport android.net.NetworkCapabilities\nimport com.fieldontrack.kmm.common.network.ConnectivityMonitor\nimport com.fieldontrack.kmm.entities.connectivity.NetworkType\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.StateFlow\n\nclass ConnectivityMonitorImpl(appContext: Context) : ConnectivityMonitor {\n    private val connectivityManager = appContext.getSystemService(ConnectivityManager::class.java)\n    private val networkCallback = object : ConnectivityManager.NetworkCallback() {\n        override fun onAvailable(network: Network) =\n            connectivityManager.getNetworkCapabilities(network)?.let { networkCapabilities -&gt;\n                updateConnectionStatus(networkCapabilities = networkCapabilities)\n                updateNetworkType(networkCapabilities = networkCapabilities)\n            } ?: run {\n                _isConnectedState.value = true\n            }\n\n        override fun onLost(network: Network) {\n            // Do not check for NetworkCapabilities here, as they might be wrong.\n            // If we get this callback, we're certain that we've lost connection.\n            _isConnectedState.value = false\n            _networkTypeState.value = NetworkType.Unknown\n        }\n\n        override fun onCapabilitiesChanged(\n            network: Network,\n            networkCapabilities: NetworkCapabilities\n        ) {\n            updateConnectionStatus(networkCapabilities = networkCapabilities)\n            updateNetworkType(networkCapabilities = networkCapabilities)\n        }\n\n        override fun onLinkPropertiesChanged(\n            network: Network,\n            linkProperties: LinkProperties\n        ) = Unit\n    }\n    private val _isConnectedState = MutableStateFlow(false)\n    private val _networkTypeState = MutableStateFlow(NetworkType.Unknown)\n\n    override val isConnectedState: StateFlow&lt;Boolean&gt; = _isConnectedState\n    override val networkTypeState: StateFlow&lt;NetworkType&gt; = _networkTypeState\n\n    override val isConnected: Boolean\n        get() = _isConnectedState.value\n\n    override val networkType: NetworkType\n        get() = _networkTypeState.value\n\n    init {\n        startMonitoring()\n    }\n\n    override fun startMonitoring() =\n        connectivityManager.registerDefaultNetworkCallback(networkCallback)\n\n    override fun stopMonitoring() =\n        connectivityManager.unregisterNetworkCallback(networkCallback)\n\n    private fun updateConnectionStatus(networkCapabilities: NetworkCapabilities) {\n        val isConnected =\n            networkCapabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\n\n        _isConnectedState.value = isConnected\n    }\n\n    private fun updateNetworkType(networkCapabilities: NetworkCapabilities) {\n        val networkType = when {\n            networkCapabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; NetworkType.WiFi\n            networkCapabilities.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; NetworkType.Cellular\n            else -&gt; NetworkType.Unknown\n        }\n\n        _networkTypeState.value = networkType\n    }\n}\n</code></pre>\n<p>The <code>ConnectivityMonitor</code> interface is pretty simple:</p>\n<pre><code>interface ConnectivityMonitor {\n    val isConnected: Boolean\n    val networkType: NetworkType\n\n    val isConnectedState: StateFlow&lt;Boolean&gt;\n    val networkTypeState: StateFlow&lt;NetworkType&gt;\n    \n    fun startMonitoring()\n    fun stopMonitoring()\n}\n</code></pre>\n<p>And <code>NetworkType</code> is just a simple enum:</p>\n<pre><code>enum class NetworkType { Unknown, Cellular, WiFi }\n</code></pre>\n<p>As far as I've tested this works whether the App is in background or foreground.</p>\n"}],"owner":{"account_id":45425,"reputation":42744,"user_id":133858,"accept_rate":81,"display_name":"Vidar Vestnes"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":516099,"favorite_count":0,"down_vote_count":2,"up_vote_count":723,"accepted_answer_id":27312494,"answer_count":64,"score":721,"last_activity_date":1672763345,"creation_date":1255445991,"question_id":1560788,"body_markdown":"I got a `AsyncTask` that is supposed to check the network access to a host name. But the `doInBackground()` is never timed out. Anyone have a clue?\r\n\r\n    public class HostAvailabilityTask extends AsyncTask&lt;String, Void, Boolean&gt; {\r\n\r\n\t    private Main main;\r\n\t\r\n    \tpublic HostAvailabilityTask(Main main) {\r\n    \t\tthis.main = main;\r\n    \t}\r\n    \r\n    \tprotected Boolean doInBackground(String... params) {\r\n            Main.Log(&quot;doInBackground() isHostAvailable():&quot;+params[0]);\r\n        \r\n\t    \ttry {\r\n\t    \t\treturn InetAddress.getByName(params[0]).isReachable(30); \r\n\t    \t} catch (UnknownHostException e) {\r\n\t    \t\te.printStackTrace();\r\n\t    \t} catch (IOException e) {\r\n\t    \t\te.printStackTrace();\r\n\t    \t}\r\n\t    \treturn false;\t\t\r\n\t    }\r\n\r\n\t    protected void onPostExecute(Boolean... result) {\r\n            Main.Log(&quot;onPostExecute()&quot;);\r\n        \r\n            if(result[0] == false) {\r\n\t\t\t    main.setContentView(R.layout.splash);\r\n\t\t\t    return;\r\n            }\r\n        \r\n            main.continueAfterHostCheck();\r\n\t    }\t\r\n    }\r\n","title":"How to check internet access on Android? InetAddress never times out","body":"<p>I got a <code>AsyncTask</code> that is supposed to check the network access to a host name. But the <code>doInBackground()</code> is never timed out. Anyone have a clue?</p>\n\n<pre><code>public class HostAvailabilityTask extends AsyncTask&lt;String, Void, Boolean&gt; {\n\n    private Main main;\n\n    public HostAvailabilityTask(Main main) {\n        this.main = main;\n    }\n\n    protected Boolean doInBackground(String... params) {\n        Main.Log(\"doInBackground() isHostAvailable():\"+params[0]);\n\n        try {\n            return InetAddress.getByName(params[0]).isReachable(30); \n        } catch (UnknownHostException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return false;       \n    }\n\n    protected void onPostExecute(Boolean... result) {\n        Main.Log(\"onPostExecute()\");\n\n        if(result[0] == false) {\n            main.setContentView(R.layout.splash);\n            return;\n        }\n\n        main.continueAfterHostCheck();\n    }   \n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":15714451,"reputation":184,"user_id":20839582,"display_name":"sajidjuneja"},"score":0,"creation_date":1672660699,"post_id":74982003,"comment_id":132321225,"body_markdown":"Why don&#39;t you use intent bundle for this? send a boolean value when you want to change and receive that value and call your function.","body":"Why don&#39;t you use intent bundle for this? send a boolean value when you want to change and receive that value and call your function."},{"owner":{"account_id":27410989,"reputation":9,"user_id":20910914,"display_name":"Stalin1897"},"score":0,"creation_date":1672662727,"post_id":74982003,"comment_id":132321651,"body_markdown":"I don&#39;t quite understand what you&#39;re talking about, I just started learning android development","body":"I don&#39;t quite understand what you&#39;re talking about, I just started learning android development"},{"owner":{"account_id":15714451,"reputation":184,"user_id":20839582,"display_name":"sajidjuneja"},"score":0,"creation_date":1672662983,"post_id":74982003,"comment_id":132321717,"body_markdown":"Let me show you how you can achieve this. ````public void openExamLight(View view) {\n    MagneticActivity mag = new MagneticActivity();\n    Intent intent = new Intent(this, MagneticActivity.class);\n    intent.putExtra(&quot;yourBoolName&quot;, true);\n    startActivity(intent);\n}````\nand in your MagneticActivity onCreate function \n````@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    Boolean yourBool = getIntent().getExtras().getBoolean(&quot;yourBoolName&quot;);\n   if(yourBool) {\n   changePicture();\n}\n}\n````","body":"Let me show you how you can achieve this. <code>public void openExamLight(View view) {     MagneticActivity mag = new MagneticActivity();     Intent intent = new Intent(this, MagneticActivity.class);     intent.putExtra(&quot;yourBoolName&quot;, true);     startActivity(intent); }</code> and in your MagneticActivity onCreate function  <code>@Override protected void onCreate(Bundle savedInstanceState) {     Boolean yourBool = getIntent().getExtras().getBoolean(&quot;yourBoolName&quot;);    if(yourBool) {    changePicture(); } } </code>"},{"owner":{"account_id":27410989,"reputation":9,"user_id":20910914,"display_name":"Stalin1897"},"score":0,"creation_date":1672664232,"post_id":74982003,"comment_id":132322058,"body_markdown":"this didn&#39;t help either, the app crashes,\nin debug outputs this:\nProcess: com.example.microgadgets, PID: 10370\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.microgadgets/com.example.microgadgets.MagneticActivity}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;boolean android.os.Bundle.getBoolean(java.lang.String)&#39; on a null object reference","body":"this didn&#39;t help either, the app crashes, in debug outputs this: Process: com.example.microgadgets, PID: 10370     java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.microgadgets/com.example.microgadg&zwnj;&#8203;ets.MagneticActivity&zwnj;&#8203;}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;boolean android.os.Bundle.getBoolean(java.lang.String)&#39; on a null object reference"}],"answers":[{"tags":[],"owner":{"account_id":27410989,"reputation":9,"user_id":20910914,"display_name":"Stalin1897"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672664730,"creation_date":1672664730,"answer_id":74982778,"question_id":74982003,"body_markdown":"I solved the problem, I had to do a type conversion in the changePicture method\r\n\r\n    public void changePicture() {\r\n    ImageView img = (ImageView)findViewById(R.id.magneticImgBox);\r\n    img.setImageResource(R.drawable.magneticimg);\r\n    }","title":"Changing the picture when calling a new activity","body":"<p>I solved the problem, I had to do a type conversion in the changePicture method</p>\n<pre><code>public void changePicture() {\nImageView img = (ImageView)findViewById(R.id.magneticImgBox);\nimg.setImageResource(R.drawable.magneticimg);\n}\n</code></pre>\n"}],"owner":{"account_id":27410989,"reputation":9,"user_id":20910914,"display_name":"Stalin1897"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672763186,"creation_date":1672659797,"question_id":74982003,"body_markdown":"I want to set an image to `ImageView` as soon as I call a new activity. But for some reason, I can&#39;t do it, although seems to be alright\r\n\r\nHere is an XML snippet\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                                                   xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n                                                   android:layout_width=&quot;match_parent&quot;\r\n                                                   android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;ImageView\r\n            android:id=&quot;@+id/magneticImgBox&quot;\r\n            android:layout_width=&quot;327dp&quot;\r\n            android:layout_height=&quot;211dp&quot;\r\n            android:src=&quot;@drawable/magneticimg&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\r\n\r\n    &lt;TextView\r\n            android:id=&quot;@+id/magneticNameBox&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/magneticImgBox&quot;\r\n            android:text=&quot; Magnetic&quot;\r\n            android:textSize=&quot;35sp&quot;/&gt;\r\n\r\n    &lt;TextView\r\n            android:id=&quot;@+id/boxDiscrition&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/magneticNameBox&quot;\r\n            android:text=&quot; ,    -  ,            .\r\n            \\n\\n :\\n- \\n-   \\n- -\\n-   - 2.\\n-  &quot;/&gt;\r\n\r\n    &lt;VideoView\r\n            android:id=&quot;@+id/magneticVideoPlayerBox&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;450dp&quot;\r\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/boxDiscrition&quot;/&gt;\r\n\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nHere is a Java snippet\r\n\r\n```\r\npublic void openExamLight(View view) {\r\n    MagneticActivity mag = new MagneticActivity();\r\n    Intent intent = new Intent(this, MagneticActivity.class);\r\n    startActivity(intent);\r\n    mag.changePicture();\r\n}\r\n```\r\n\r\n```\r\npublic void changePicture() {\r\n    ImageView img = findViewById(R.id.magneticImgBox);\r\n    img.setImageResource(R.drawable.magneticimg);\r\n}\r\n```\r\nHere I showed the method of clicking in which I call a new activity (open Magnetic) and the method in which I try to change the picture (changePicture, yes, I know that it could not be taken out in a separate method, it&#39;s just an attempt to fix everything)\r\n","title":"Changing the picture when calling a new activity","body":"<p>I want to set an image to <code>ImageView</code> as soon as I call a new activity. But for some reason, I can't do it, although seems to be alright</p>\n<p>Here is an XML snippet</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n                                                   xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n                                                   android:layout_width=&quot;match_parent&quot;\n                                                   android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;ImageView\n            android:id=&quot;@+id/magneticImgBox&quot;\n            android:layout_width=&quot;327dp&quot;\n            android:layout_height=&quot;211dp&quot;\n            android:src=&quot;@drawable/magneticimg&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\n\n    &lt;TextView\n            android:id=&quot;@+id/magneticNameBox&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\n            app:layout_constraintTop_toBottomOf=&quot;@id/magneticImgBox&quot;\n            android:text=&quot; Magnetic&quot;\n            android:textSize=&quot;35sp&quot;/&gt;\n\n    &lt;TextView\n            android:id=&quot;@+id/boxDiscrition&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\n            app:layout_constraintTop_toBottomOf=&quot;@id/magneticNameBox&quot;\n            android:text=&quot; ,    -  ,            .\n            \\n\\n :\\n- \\n-   \\n- -\\n-   - 2.\\n-  &quot;/&gt;\n\n    &lt;VideoView\n            android:id=&quot;@+id/magneticVideoPlayerBox&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;450dp&quot;\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\n            app:layout_constraintTop_toBottomOf=&quot;@id/boxDiscrition&quot;/&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Here is a Java snippet</p>\n<pre><code>public void openExamLight(View view) {\n    MagneticActivity mag = new MagneticActivity();\n    Intent intent = new Intent(this, MagneticActivity.class);\n    startActivity(intent);\n    mag.changePicture();\n}\n</code></pre>\n<pre><code>public void changePicture() {\n    ImageView img = findViewById(R.id.magneticImgBox);\n    img.setImageResource(R.drawable.magneticimg);\n}\n</code></pre>\n<p>Here I showed the method of clicking in which I call a new activity (open Magnetic) and the method in which I try to change the picture (changePicture, yes, I know that it could not be taken out in a separate method, it's just an attempt to fix everything)</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1672757750,"post_id":74994948,"comment_id":132343539,"body_markdown":"&quot;but got an integer overflow&quot; do you mean a _stack_ overflow? Java doesn&#39;t generate errors on integer overflow.","body":"&quot;but got an integer overflow&quot; do you mean a <i>stack</i> overflow? Java doesn&#39;t generate errors on integer overflow."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1672757839,"post_id":74994948,"comment_id":132343566,"body_markdown":"You get a stack overflow because your termination condition is that `k &lt;= 0`; but (assuming `k` is initially `&gt; 0`), you are making `k` bigger and bigger.","body":"You get a stack overflow because your termination condition is that <code>k &lt;= 0</code>; but (assuming <code>k</code> is initially <code>&gt; 0</code>), you are making <code>k</code> bigger and bigger."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672758112,"post_id":74994948,"comment_id":132343663,"body_markdown":"Are you sure the iterative version is correct? In particular, are you sure that the loop condition `i&lt;=k` is correct? --- Some remarks: we normally surround binary operators with blanks (`i&lt;=k` -&gt; `i &lt;= k`, `o(k+1+k)` -&gt; `o(k + 1 + k)`) --- Even if possible, we should not skip the optional `{` and `}` on one-liner bodies of `if`-, `else`-, `for`-, `wihle`-constructs. --- We should choose meaningful names for methods and parameters: `o` and `k` are very non-descriptive.","body":"Are you sure the iterative version is correct? In particular, are you sure that the loop condition <code>i&lt;=k</code> is correct? --- Some remarks: we normally surround binary operators with blanks (<code>i&lt;=k</code> -&gt; <code>i &lt;= k</code>, <code>o(k+1+k)</code> -&gt; <code>o(k + 1 + k)</code>) --- Even if possible, we should not skip the optional <code>{</code> and <code>}</code> on one-liner bodies of <code>if</code>-, <code>else</code>-, <code>for</code>-, <code>wihle</code>-constructs. --- We should choose meaningful names for methods and parameters: <code>o</code> and <code>k</code> are very non-descriptive."}],"answers":[{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672763174,"creation_date":1672763174,"answer_id":74995996,"question_id":74994948,"body_markdown":"Here&#39;s an example showing you the &quot;stack trace&quot; in both the iterative and recursive versions:\r\n\r\n      public static void main(String[] args) {\r\n        int k = 7;\r\n    \r\n        int b = 1;\r\n        System.out.println(&quot;Starting Conditons:&quot;);\r\n        System.out.println(&quot;b: &quot; + b + &quot;, k: &quot; + k);\r\n        System.out.println(&quot;Iterative trace:&quot;);\r\n        for(int i=0;i&lt;=k;i++){      \r\n          b=b+1+b;  \r\n          System.out.println(&quot;i: &quot; + i + &quot;, b: &quot; + b);\r\n        }\r\n        System.out.println(&quot;Iterative: b = &quot; + b);\r\n    \r\n        b = 1;\r\n        System.out.println();\r\n        System.out.println(&quot;Starting Conditons:&quot;);\r\n        System.out.println(&quot;b: &quot; + b + &quot;, k: &quot; + k);\r\n        System.out.println(&quot;Recursive trace:&quot;);    \r\n        b = foo(0, k, b);\r\n        System.out.println(&quot;Recursive: b = &quot; + b);\r\n      }\r\n    \r\n      public static int foo(int i, int k, int b) {    \r\n        System.out.println(&quot;i: &quot; + i + &quot;, b: &quot; + b);\r\n        if (i &gt; k) {\r\n          return b;\r\n        }\r\n        else {      \r\n          return foo(i+1, k, b+1+b);\r\n        }\r\n      }\r\n\r\nOutput:\r\n\r\n    Starting Conditons:\r\n    b: 1, k: 7\r\n    Iterative trace:\r\n    i: 0, b: 3\r\n    i: 1, b: 7\r\n    i: 2, b: 15\r\n    i: 3, b: 31\r\n    i: 4, b: 63\r\n    i: 5, b: 127\r\n    i: 6, b: 255\r\n    i: 7, b: 511\r\n    Iterative: b = 511\r\n    \r\n    Starting Conditons:\r\n    b: 1, k: 7\r\n    Recursive trace:\r\n    i: 0, b: 1\r\n    i: 1, b: 3\r\n    i: 2, b: 7\r\n    i: 3, b: 15\r\n    i: 4, b: 31\r\n    i: 5, b: 63\r\n    i: 6, b: 127\r\n    i: 7, b: 255\r\n    i: 8, b: 511\r\n    Recursive: b = 511\r\n\r\n","title":"Converting an iterativ function to a recursive one","body":"<p>Here's an example showing you the &quot;stack trace&quot; in both the iterative and recursive versions:</p>\n<pre><code>  public static void main(String[] args) {\n    int k = 7;\n\n    int b = 1;\n    System.out.println(&quot;Starting Conditons:&quot;);\n    System.out.println(&quot;b: &quot; + b + &quot;, k: &quot; + k);\n    System.out.println(&quot;Iterative trace:&quot;);\n    for(int i=0;i&lt;=k;i++){      \n      b=b+1+b;  \n      System.out.println(&quot;i: &quot; + i + &quot;, b: &quot; + b);\n    }\n    System.out.println(&quot;Iterative: b = &quot; + b);\n\n    b = 1;\n    System.out.println();\n    System.out.println(&quot;Starting Conditons:&quot;);\n    System.out.println(&quot;b: &quot; + b + &quot;, k: &quot; + k);\n    System.out.println(&quot;Recursive trace:&quot;);    \n    b = foo(0, k, b);\n    System.out.println(&quot;Recursive: b = &quot; + b);\n  }\n\n  public static int foo(int i, int k, int b) {    \n    System.out.println(&quot;i: &quot; + i + &quot;, b: &quot; + b);\n    if (i &gt; k) {\n      return b;\n    }\n    else {      \n      return foo(i+1, k, b+1+b);\n    }\n  }\n</code></pre>\n<p>Output:</p>\n<pre><code>Starting Conditons:\nb: 1, k: 7\nIterative trace:\ni: 0, b: 3\ni: 1, b: 7\ni: 2, b: 15\ni: 3, b: 31\ni: 4, b: 63\ni: 5, b: 127\ni: 6, b: 255\ni: 7, b: 511\nIterative: b = 511\n\nStarting Conditons:\nb: 1, k: 7\nRecursive trace:\ni: 0, b: 1\ni: 1, b: 3\ni: 2, b: 7\ni: 3, b: 15\ni: 4, b: 31\ni: 5, b: 63\ni: 6, b: 127\ni: 7, b: 255\ni: 8, b: 511\nRecursive: b = 511\n</code></pre>\n"}],"owner":{"account_id":26841833,"reputation":3,"user_id":20920138,"display_name":"LinkMuffin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74995996,"answer_count":1,"score":0,"last_activity_date":1672763174,"creation_date":1672757392,"question_id":74994948,"body_markdown":"Can anybody convert this iterative function to a recursive one? thanks\r\n\r\n    int b = 1; //what should be converted from\r\n    for(int i=0;i&lt;=k;i++){\r\n      b=b+1+b;  \r\n    }\r\n\r\ntried this, but got an integer overflow, so I&#39;m obviously doing something wrong\r\n\r\n    public static int o(int k){ //recursive try\r\n      if(k&lt;0) return -1;\r\n      else{\r\n        if(k==0) return 1;\r\n        else return o(k+1+k);  \r\n      }  \r\n    }\r\n\r\nCan anybody convert this iterative function to a recursive one? thanks","title":"Converting an iterativ function to a recursive one","body":"<p>Can anybody convert this iterative function to a recursive one? thanks</p>\n<pre><code>int b = 1; //what should be converted from\nfor(int i=0;i&lt;=k;i++){\n  b=b+1+b;  \n}\n</code></pre>\n<p>tried this, but got an integer overflow, so I'm obviously doing something wrong</p>\n<pre><code>public static int o(int k){ //recursive try\n  if(k&lt;0) return -1;\n  else{\n    if(k==0) return 1;\n    else return o(k+1+k);  \n  }  \n}\n</code></pre>\n<p>Can anybody convert this iterative function to a recursive one? thanks</p>\n"},{"tags":["java","xsd","jaxb","xjc"],"answers":[{"tags":[],"owner":{"account_id":162425,"reputation":148009,"user_id":383861,"display_name":"bdoughan"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1378393825,"creation_date":1378393825,"answer_id":18639981,"question_id":18619463,"body_markdown":"**binding.xml**\r\n\r\nYou can use the following external binding file to generate the type of property you are looking for:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;bindings xmlns=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n              version=&quot;2.1&quot;&gt;\r\n        &lt;globalBindings choiceContentProperty=&quot;true&quot;/&gt;\r\n    &lt;/bindings&gt; \r\n\r\n**XJC Call**\r\n\r\nThe binding file is referenced using the `-b` flag.\r\n\r\n    xjc -b binding.xml schema.xsd\r\n\r\n**Generated Property**\r\n\r\nNow the following property will be generated:\r\n\r\n    @XmlElements({\r\n        @XmlElement(name = &quot;path&quot;, type = String.class),\r\n        @XmlElement(name = &quot;file&quot;, type = byte[].class)\r\n    })\r\n    protected Object pathOrFile;\r\n\r\n**For More Information**\r\n\r\n  - http://blog.bdoughan.com/2011/04/xml-schema-to-java-xsd-choice.html","title":"xjc and XSD choice","body":"<p><strong>binding.xml</strong></p>\n\n<p>You can use the following external binding file to generate the type of property you are looking for:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;bindings xmlns=\"http://java.sun.com/xml/ns/jaxb\"\n          version=\"2.1\"&gt;\n    &lt;globalBindings choiceContentProperty=\"true\"/&gt;\n&lt;/bindings&gt; \n</code></pre>\n\n<p><strong>XJC Call</strong></p>\n\n<p>The binding file is referenced using the <code>-b</code> flag.</p>\n\n<pre><code>xjc -b binding.xml schema.xsd\n</code></pre>\n\n<p><strong>Generated Property</strong></p>\n\n<p>Now the following property will be generated:</p>\n\n<pre><code>@XmlElements({\n    @XmlElement(name = \"path\", type = String.class),\n    @XmlElement(name = \"file\", type = byte[].class)\n})\nprotected Object pathOrFile;\n</code></pre>\n\n<p><strong>For More Information</strong></p>\n\n<ul>\n<li><a href=\"http://blog.bdoughan.com/2011/04/xml-schema-to-java-xsd-choice.html\" rel=\"noreferrer\">http://blog.bdoughan.com/2011/04/xml-schema-to-java-xsd-choice.html</a></li>\n</ul>\n"}],"owner":{"account_id":3104878,"reputation":377,"user_id":2627992,"accept_rate":100,"display_name":"blueimpb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7625,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":18639981,"answer_count":1,"score":6,"last_activity_date":1672762967,"creation_date":1378312992,"question_id":18619463,"body_markdown":"When I run xjc to generate a Java type representing this XSD snippet:\r\n\r\n      &lt;xs:complexType name=&quot;fileUploadRequest&quot;&gt;\r\n        &lt;xs:choice&gt;\r\n          &lt;xs:element name=&quot;path&quot; type=&quot;xs:string&quot;/&gt;\r\n          &lt;xs:element name=&quot;file&quot; type=&quot;xs:base64Binary&quot;/&gt;\r\n        &lt;/xs:choice&gt;\r\n      &lt;/xs:complexType&gt;\r\n\r\nI get a class that&#39;s indistinguishable from what it would have been if I&#39;d specified a `sequence` with optional elements instead.  \r\n\r\nI want a type with a little bit of intelligence, that&#39;ll let me have at most 1 element of my choice at a time.  If I invoke the generated `setFile` method for example, it should make the path null.  Is there some plugin I can use for what seems like an obvious requirement of a code generator?","title":"xjc and XSD choice","body":"<p>When I run xjc to generate a Java type representing this XSD snippet:</p>\n\n<pre><code>  &lt;xs:complexType name=\"fileUploadRequest\"&gt;\n    &lt;xs:choice&gt;\n      &lt;xs:element name=\"path\" type=\"xs:string\"/&gt;\n      &lt;xs:element name=\"file\" type=\"xs:base64Binary\"/&gt;\n    &lt;/xs:choice&gt;\n  &lt;/xs:complexType&gt;\n</code></pre>\n\n<p>I get a class that's indistinguishable from what it would have been if I'd specified a <code>sequence</code> with optional elements instead.  </p>\n\n<p>I want a type with a little bit of intelligence, that'll let me have at most 1 element of my choice at a time.  If I invoke the generated <code>setFile</code> method for example, it should make the path null.  Is there some plugin I can use for what seems like an obvious requirement of a code generator?</p>\n"},{"tags":["python","java","windows","powershell","taskmanager"],"comments":[{"owner":{"account_id":12551057,"reputation":15383,"user_id":9132707,"display_name":"postanote"},"score":0,"creation_date":1672719001,"post_id":74988936,"comment_id":132333427,"body_markdown":"Getting the PID(s)/Name(s) for a process is a regular question here, and you can search for those using the SO search box above. As well as the plethora of samples all over the web.","body":"Getting the PID(s)/Name(s) for a process is a regular question here, and you can search for those using the SO search box above. As well as the plethora of samples all over the web."},{"owner":{"account_id":20515661,"reputation":1,"user_id":15056395,"display_name":"JJG"},"score":0,"creation_date":1672719541,"post_id":74988936,"comment_id":132333489,"body_markdown":"I know how to get the pid(s)/name(s), but I don&#39;t know how to group them by the apps name like the screenshot of task manager shows, for example, it shows the app name &quot;Visual Studio Code&quot;, all the processes that opened by vscode will display after expanding the list. I want to know how to get the app name, or how to group them by the app that runs all these processes.","body":"I know how to get the pid(s)/name(s), but I don&#39;t know how to group them by the apps name like the screenshot of task manager shows, for example, it shows the app name &quot;Visual Studio Code&quot;, all the processes that opened by vscode will display after expanding the list. I want to know how to get the app name, or how to group them by the app that runs all these processes."}],"answers":[{"tags":[],"owner":{"account_id":12551057,"reputation":15383,"user_id":9132707,"display_name":"postanote"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672736867,"creation_date":1672719547,"answer_id":74989006,"question_id":74988936,"body_markdown":"Is PS, you can just do this.\r\n\r\n    Clear-Host\r\n    Get-Process | \r\n    Where-Object {$PSItem.ProcessName -eq &#39;Code&#39;} |\r\n    Select-Object -Property Id, Name, ProcessName\r\n\r\n***Update***\r\n\r\nGrouping\r\n\r\n    Clear-Host\r\n    Get-Process | \r\n    Select-Object -Property Id, Name, ProcessName | \r\n    Group-Object -Property ProcessName\r\n\r\n***Update***\r\n\r\nProcess details\r\n\r\n    Clear-Host\r\n    Get-Process | \r\n    Where-Object {$PSItem.ProcessName -eq &#39;Code&#39;} |\r\n    Select-Object -Property &#39;*&#39; -First 1\r\n    # Results\r\n    &lt;#\r\n    Name                       : Code\r\n    Id                         : 6228\r\n    PriorityClass              : Normal\r\n    FileVersion                : 1.72.2\r\n    HandleCount                : 196\r\n    WorkingSet                 : 82386944\r\n    PagedMemorySize            : 25554944\r\n    PrivateMemorySize          : 25554944\r\n    VirtualMemorySize          : 532230144\r\n    TotalProcessorTime         : 00:00:00.5312500\r\n    SI                         : 1\r\n    Handles                    : 196\r\n    VM                         : 2225325289472\r\n    WS                         : 82386944\r\n    PM                         : 25554944\r\n    NPM                        : 14048\r\n    Path                       : C:\\Users\\Daniel\\AppData\\Local\\Programs\\Microsoft VS Code\\Code.exe\r\n    Company                    : Microsoft Corporation\r\n    CPU                        : 0.53125\r\n    ProductVersion             : 1.72.2\r\n    Description                : Visual Studio Code\r\n    Product                    : Visual Studio Code\r\n    __NounName                 : Process\r\n    BasePriority               : 8\r\n    ExitCode                   : \r\n    HasExited                  : False\r\n    ExitTime                   : \r\n    Handle                     : 3940\r\n    SafeHandle                 : Microsoft.Win32.SafeHandles.SafeProcessHandle\r\n    MachineName                : .\r\n    MainWindowHandle           : 0\r\n    MainWindowTitle            : \r\n    MainModule                 : System.Diagnostics.ProcessModule (Code.exe)\r\n    MaxWorkingSet              : 1413120\r\n    MinWorkingSet              : 204800\r\n    Modules                    : {System.Diagnostics.ProcessModule (Code.exe),...\r\n    NonpagedSystemMemorySize64 : 14048\r\n    PagedMemorySize64          : 25554944\r\n    PagedSystemMemorySize      : 490896\r\n    PagedSystemMemorySize64    : 490896\r\n    PeakPagedMemorySize        : 34410496\r\n    PeakPagedMemorySize64      : 34410496\r\n    PeakWorkingSet             : 87883776\r\n    PeakWorkingSet64           : 87883776\r\n    PeakVirtualMemorySize      : 637603840\r\n    PeakVirtualMemorySize64    : 2225430663168\r\n    PriorityBoostEnabled       : True\r\n    PrivateMemorySize64        : 25554944\r\n    PrivilegedProcessorTime    : 00:00:00.0625000\r\n    ProcessName                : Code\r\n    ProcessorAffinity          : 255\r\n    Responding                 : True\r\n    SessionId                  : 1\r\n    StartInfo                  : System.Diagnostics.ProcessStartInfo\r\n    StartTime                  : 02-Jan-23 20:11:26\r\n    SynchronizingObject        : \r\n    Threads                    : {11556, 21344, 18128, 21444, 14468, 9144, 18068, 17528, 20796, 13064, 17536, 18828, 19724, 18900}\r\n    UserProcessorTime          : 00:00:00.4687500\r\n    VirtualMemorySize64        : 2225325289472\r\n    EnableRaisingEvents        : False\r\n    StandardInput              : \r\n    StandardOutput             : \r\n    StandardError              : \r\n    WorkingSet64               : 82386944\r\n    Site                       : \r\n    Container                  : \r\n    #&gt;\r\n\r\n***Update***\r\n\r\n    Clear-Host\r\n    Get-Process | \r\n    Where-Object {$PSItem.ProcessName -eq &#39;Code&#39;} |\r\n    Select-Object -Property Id, Name, ProcessName, Description, Product\r\n    # Results\r\n    &lt;#\r\n    Id          : 6228\r\n    Name        : Code\r\n    ProcessName : Code\r\n    Description : Visual Studio Code\r\n    Product     : Visual Studio Code\r\n    ...\r\n    #&gt;\r\n\r\nGroup data and details.\r\n\r\n    Clear-Host\r\n    Get-Process | \r\n    Select-Object -Property Id, Name, ProcessName, Description, Product | \r\n    Group-Object -Property ProcessName\r\n    # Results\r\n    &lt;#\r\n    Count Name                      Group\r\n    ----- ----                      -----\r\n    ...\r\n       12 Code                      {@{Id=6228; Name=Code; ProcessName=Code; Description=Visual Studio Code; Product=Visual Studio Code}, @{Id=9308; Name=Code; ProcessName=Code; Descri...\r\n    ...\r\n    #&gt;\r\n    \r\n    \r\n    Clear-Host\r\n    (\r\n        Get-Process | \r\n        Select-Object -Property Id, Name, ProcessName, Description, Product | \r\n        Group-Object -Property ProcessName\r\n    ).Group\r\n    # Results\r\n    &lt;#\r\n    ...\r\n    \r\n    Id          : 6228\r\n    Name        : Code\r\n    ProcessName : Code\r\n    Description : Visual Studio Code\r\n    Product     : Visual Studio Code\r\n    \r\n    Id          : 9308\r\n    Name        : Code\r\n    ProcessName : Code\r\n    Description : Visual Studio Code\r\n    Product     : Visual Studio Code\r\n    \r\n    Id          : 9448\r\n    Name        : Code\r\n    ProcessName : Code\r\n    Description : Visual Studio Code\r\n    Product     : Visual Studio Code\r\n    \r\n    ...\r\n    #&gt;\r\n\r\n***Update as per my comment about the child-parent resolution approach.***\r\n\r\n    Clear-host\r\n    # The environment this code is being executed from \r\n    Get-Process -Name powershell_ise\r\n    \r\n    # Some external command thing\r\n    $PingCommand = cmd.exe /c where ping \r\n    \r\n    &#39;https://stackoverflow.com/&#39;, &#39;www.google.com&#39;, &#39;www.yahoo.com&#39; | \r\n    ForEach-Object {Start-Process -FilePath $PingCommand $PSItem}\r\n    \r\n    # Get parent and child details\r\n    Get-CimInstance -Class Win32_Process -Filter &quot;name =&#39;ping.exe&#39;&quot; | \r\n    Select-Object -Property @{\r\n        Name       = &#39;ParentProcessName&#39;\r\n        Expression = {(Get-Process -Id $($PSItem.ParentProcessId)).Description}\r\n    }, ParentProcessId, ProcessName, ProcessId, CommandLine\r\n    \r\n    # Results\r\n    &lt;#\r\n    Handles  NPM(K)    PM(K)      WS(K)     CPU(s)     Id  SI ProcessName\r\n    -------  ------    -----      -----     ------     --  -- -----------\r\n       1008      70   308036     366812     294.80  19824   1 powershell_ise\r\n    \r\n    ParentProcessName : Windows PowerShell ISE\r\n    ParentProcessId   : 19824\r\n    ProcessName       : PING.EXE\r\n    ProcessId         : 18248\r\n    CommandLine       : &quot;C:\\Windows\\System32\\PING.EXE&quot; www.google.com \r\n    \r\n    \r\n    ParentProcessName : Windows PowerShell ISE\r\n    ParentProcessId   : 19824\r\n    ProcessName       : PING.EXE\r\n    ProcessId         : 5824\r\n    CommandLine       : &quot;C:\\Windows\\System32\\PING.EXE&quot; www.yahoo.com \r\n    #&gt;\r\n\r\nOr even this way.\r\n\r\n    ($Process = Get-Process powershell_ise)\r\n    Start-Process &#39;cmd&#39; &#39;/C notepad.exe&#39;\r\n    \r\n    Get-CimInstance win32_process -Filter &quot;ParentProcessId = $($Process.id)&quot; | \r\n    Select-Object -Property @{\r\n        Name       = &#39;ParentProcessName&#39;\r\n        Expression = {(Get-Process -Id $($PSItem.ParentProcessId)).Description}\r\n    }, ParentProcessId, ProcessName, ProcessId, CommandLine\r\n    # Results\r\n    &lt;#\r\n    Handles  NPM(K)    PM(K)      WS(K)     CPU(s)     Id  SI ProcessName\r\n    -------  ------    -----      -----     ------     --  -- -----------\r\n        975      71   324604     385188     397.77  19824   1 powershell_ise\r\n    \r\n    ParentProcessName : Windows PowerShell ISE\r\n    ParentProcessId   : 19824\r\n    ProcessName       : conhost.exe\r\n    ProcessId         : 4888\r\n    CommandLine       : \\??\\C:\\Windows\\system32\\conhost.exe 0x4\r\n    \r\n    \r\n    ParentProcessName : Windows PowerShell ISE\r\n    ParentProcessId   : 19824\r\n    ProcessName       : cmd.exe\r\n    ProcessId         : 17180\r\n    CommandLine       : &quot;C:\\Windows\\system32\\cmd.exe&quot; /C notepad.exe \r\n    #&gt;\r\n\r\nThen of course use the ```Group-Object``` cmdlet already shown earlier.\r\n","title":"How to get the processes name with the apps name on windows?","body":"<p>Is PS, you can just do this.</p>\n<pre><code>Clear-Host\nGet-Process | \nWhere-Object {$PSItem.ProcessName -eq 'Code'} |\nSelect-Object -Property Id, Name, ProcessName\n</code></pre>\n<p><em><strong>Update</strong></em></p>\n<p>Grouping</p>\n<pre><code>Clear-Host\nGet-Process | \nSelect-Object -Property Id, Name, ProcessName | \nGroup-Object -Property ProcessName\n</code></pre>\n<p><em><strong>Update</strong></em></p>\n<p>Process details</p>\n<pre><code>Clear-Host\nGet-Process | \nWhere-Object {$PSItem.ProcessName -eq 'Code'} |\nSelect-Object -Property '*' -First 1\n# Results\n&lt;#\nName                       : Code\nId                         : 6228\nPriorityClass              : Normal\nFileVersion                : 1.72.2\nHandleCount                : 196\nWorkingSet                 : 82386944\nPagedMemorySize            : 25554944\nPrivateMemorySize          : 25554944\nVirtualMemorySize          : 532230144\nTotalProcessorTime         : 00:00:00.5312500\nSI                         : 1\nHandles                    : 196\nVM                         : 2225325289472\nWS                         : 82386944\nPM                         : 25554944\nNPM                        : 14048\nPath                       : C:\\Users\\Daniel\\AppData\\Local\\Programs\\Microsoft VS Code\\Code.exe\nCompany                    : Microsoft Corporation\nCPU                        : 0.53125\nProductVersion             : 1.72.2\nDescription                : Visual Studio Code\nProduct                    : Visual Studio Code\n__NounName                 : Process\nBasePriority               : 8\nExitCode                   : \nHasExited                  : False\nExitTime                   : \nHandle                     : 3940\nSafeHandle                 : Microsoft.Win32.SafeHandles.SafeProcessHandle\nMachineName                : .\nMainWindowHandle           : 0\nMainWindowTitle            : \nMainModule                 : System.Diagnostics.ProcessModule (Code.exe)\nMaxWorkingSet              : 1413120\nMinWorkingSet              : 204800\nModules                    : {System.Diagnostics.ProcessModule (Code.exe),...\nNonpagedSystemMemorySize64 : 14048\nPagedMemorySize64          : 25554944\nPagedSystemMemorySize      : 490896\nPagedSystemMemorySize64    : 490896\nPeakPagedMemorySize        : 34410496\nPeakPagedMemorySize64      : 34410496\nPeakWorkingSet             : 87883776\nPeakWorkingSet64           : 87883776\nPeakVirtualMemorySize      : 637603840\nPeakVirtualMemorySize64    : 2225430663168\nPriorityBoostEnabled       : True\nPrivateMemorySize64        : 25554944\nPrivilegedProcessorTime    : 00:00:00.0625000\nProcessName                : Code\nProcessorAffinity          : 255\nResponding                 : True\nSessionId                  : 1\nStartInfo                  : System.Diagnostics.ProcessStartInfo\nStartTime                  : 02-Jan-23 20:11:26\nSynchronizingObject        : \nThreads                    : {11556, 21344, 18128, 21444, 14468, 9144, 18068, 17528, 20796, 13064, 17536, 18828, 19724, 18900}\nUserProcessorTime          : 00:00:00.4687500\nVirtualMemorySize64        : 2225325289472\nEnableRaisingEvents        : False\nStandardInput              : \nStandardOutput             : \nStandardError              : \nWorkingSet64               : 82386944\nSite                       : \nContainer                  : \n#&gt;\n</code></pre>\n<p><em><strong>Update</strong></em></p>\n<pre><code>Clear-Host\nGet-Process | \nWhere-Object {$PSItem.ProcessName -eq 'Code'} |\nSelect-Object -Property Id, Name, ProcessName, Description, Product\n# Results\n&lt;#\nId          : 6228\nName        : Code\nProcessName : Code\nDescription : Visual Studio Code\nProduct     : Visual Studio Code\n...\n#&gt;\n</code></pre>\n<p>Group data and details.</p>\n<pre><code>Clear-Host\nGet-Process | \nSelect-Object -Property Id, Name, ProcessName, Description, Product | \nGroup-Object -Property ProcessName\n# Results\n&lt;#\nCount Name                      Group\n----- ----                      -----\n...\n   12 Code                      {@{Id=6228; Name=Code; ProcessName=Code; Description=Visual Studio Code; Product=Visual Studio Code}, @{Id=9308; Name=Code; ProcessName=Code; Descri...\n...\n#&gt;\n\n\nClear-Host\n(\n    Get-Process | \n    Select-Object -Property Id, Name, ProcessName, Description, Product | \n    Group-Object -Property ProcessName\n).Group\n# Results\n&lt;#\n...\n\nId          : 6228\nName        : Code\nProcessName : Code\nDescription : Visual Studio Code\nProduct     : Visual Studio Code\n\nId          : 9308\nName        : Code\nProcessName : Code\nDescription : Visual Studio Code\nProduct     : Visual Studio Code\n\nId          : 9448\nName        : Code\nProcessName : Code\nDescription : Visual Studio Code\nProduct     : Visual Studio Code\n\n...\n#&gt;\n</code></pre>\n<p><em><strong>Update as per my comment about the child-parent resolution approach.</strong></em></p>\n<pre><code>Clear-host\n# The environment this code is being executed from \nGet-Process -Name powershell_ise\n\n# Some external command thing\n$PingCommand = cmd.exe /c where ping \n\n'https://stackoverflow.com/', 'www.google.com', 'www.yahoo.com' | \nForEach-Object {Start-Process -FilePath $PingCommand $PSItem}\n\n# Get parent and child details\nGet-CimInstance -Class Win32_Process -Filter &quot;name ='ping.exe'&quot; | \nSelect-Object -Property @{\n    Name       = 'ParentProcessName'\n    Expression = {(Get-Process -Id $($PSItem.ParentProcessId)).Description}\n}, ParentProcessId, ProcessName, ProcessId, CommandLine\n\n# Results\n&lt;#\nHandles  NPM(K)    PM(K)      WS(K)     CPU(s)     Id  SI ProcessName\n-------  ------    -----      -----     ------     --  -- -----------\n   1008      70   308036     366812     294.80  19824   1 powershell_ise\n\nParentProcessName : Windows PowerShell ISE\nParentProcessId   : 19824\nProcessName       : PING.EXE\nProcessId         : 18248\nCommandLine       : &quot;C:\\Windows\\System32\\PING.EXE&quot; www.google.com \n\n\nParentProcessName : Windows PowerShell ISE\nParentProcessId   : 19824\nProcessName       : PING.EXE\nProcessId         : 5824\nCommandLine       : &quot;C:\\Windows\\System32\\PING.EXE&quot; www.yahoo.com \n#&gt;\n</code></pre>\n<p>Or even this way.</p>\n<pre><code>($Process = Get-Process powershell_ise)\nStart-Process 'cmd' '/C notepad.exe'\n\nGet-CimInstance win32_process -Filter &quot;ParentProcessId = $($Process.id)&quot; | \nSelect-Object -Property @{\n    Name       = 'ParentProcessName'\n    Expression = {(Get-Process -Id $($PSItem.ParentProcessId)).Description}\n}, ParentProcessId, ProcessName, ProcessId, CommandLine\n# Results\n&lt;#\nHandles  NPM(K)    PM(K)      WS(K)     CPU(s)     Id  SI ProcessName\n-------  ------    -----      -----     ------     --  -- -----------\n    975      71   324604     385188     397.77  19824   1 powershell_ise\n\nParentProcessName : Windows PowerShell ISE\nParentProcessId   : 19824\nProcessName       : conhost.exe\nProcessId         : 4888\nCommandLine       : \\??\\C:\\Windows\\system32\\conhost.exe 0x4\n\n\nParentProcessName : Windows PowerShell ISE\nParentProcessId   : 19824\nProcessName       : cmd.exe\nProcessId         : 17180\nCommandLine       : &quot;C:\\Windows\\system32\\cmd.exe&quot; /C notepad.exe \n#&gt;\n</code></pre>\n<p>Then of course use the <code>Group-Object</code> cmdlet already shown earlier.</p>\n"},{"tags":[],"owner":{"account_id":20515661,"reputation":1,"user_id":15056395,"display_name":"JJG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672762887,"creation_date":1672762887,"answer_id":74995932,"question_id":74988936,"body_markdown":"I find out 2 solution so far:\r\n\r\n[Solution Result 1][1]\r\n\r\nWe can use `pslist64.exe -t` from [Sysinternals][2].\r\n\r\n[Solution Result 2 - powershell][3]\r\n\r\n```PowerShell\r\nfunction Get-ProcessAndChildProcesses($Level, $Process) {\r\n    &quot;{0}[{1,-5}] [{2}]&quot; -f (&quot;  &quot; * $Level), $Process.ProcessId, $Process.Name\r\n    $Children = $Global:Processes | where-object {$_.ParentProcessId -eq $Process.ProcessId -and $_.CreationDate -ge $Process.CreationDate}\r\n    if ($Children -ne $null) {\r\n      foreach ($Child in $Children) {\r\n        Get-ProcessAndChildProcesses ($Level + 1) $Child\r\n      }\r\n    }\r\n  }\r\n  $Global:Processes = Get-WMIObject -Class Win32_Process\r\n  $RootProcesses = @()\r\n  # Process &quot;System Idle Process&quot; is processed differently, as ProcessId and ParentProcessId are 0\r\n  # $Global:Processes is sliced from index 1 to the end of the array\r\n  foreach ($Process in $Global:Processes[1..($Global:Processes.length-1)]) {\r\n    $Parent = $global:Processes | where-object {$_.ProcessId -eq $Process.ParentProcessId -and $_.CreationDate -lt $Process.CreationDate}\r\n    if ($Parent -eq $null) {\r\n      $RootProcesses += $Process\r\n    }\r\n  }\r\n  #Process the &quot;System Idle process&quot; separately\r\n  &quot;[{0,-5}] [{1}]&quot; -f $Global:Processes[0].ProcessId, $Global:Processes[0].Name\r\n  foreach ($Process in $RootProcesses) {\r\n    Get-ProcessAndChildProcesses 0 $Process\r\n}\r\n```\r\n\r\nSolution Result 2 - powershell\r\n\r\n```\r\n[25488] [Code.exe]\r\n    [15040] [Code.exe]\r\n    [23652] [Code.exe]\r\n    [13024] [Code.exe]\r\n    [3800 ] [Code.exe]\r\n    [29312] [Code.exe]\r\n    [24024] [Code.exe]\r\n    [20220] [Code.exe]\r\n    [3888 ] [Code.exe]\r\n      [31408] [Code.exe]\r\n      [3976 ] [Code.exe]\r\n      [1348 ] [TabNine.exe]\r\n        [39240] [conhost.exe]\r\n        [30688] [TabNine.exe]\r\n          [41152] [TabNine-deep-local.exe]\r\n    [23768] [Code.exe]\r\n      [31400] [Code.exe]\r\n      [33528] [Code.exe]\r\n      [7504 ] [TabNine.exe]\r\n        [11088] [conhost.exe]\r\n        [38000] [TabNine.exe]\r\n        [3892 ] [WD-TabNine.exe]\r\n    [28860] [Code.exe]\r\n      [32068] [Code.exe]\r\n      [32316] [Code.exe]\r\n        [33768] [Code.exe]\r\n      [33124] [Code.exe]\r\n      [33160] [Code.exe]\r\n      [33708] [Code.exe]\r\n      [37204] [Code.exe]\r\n      [30968] [TabNine.exe]\r\n        [28224] [conhost.exe]\r\n        [40740] [TabNine.exe]\r\n    [24716] [Code.exe]\r\n      [32776] [Code.exe]\r\n      [32740] [Code.exe]\r\n      [32132] [python.exe]\r\n        [37124] [conhost.exe]\r\n      [33344] [Code.exe]\r\n      [36212] [Code.exe]\r\n      [1100 ] [TabNine.exe]\r\n        [38124] [conhost.exe]\r\n        [28104] [TabNine.exe]\r\n    [27296] [Code.exe]\r\n      [30732] [Code.exe]\r\n        [27844] [conhost.exe]\r\n        [32736] [powershell.exe]\r\n        [28736] [conhost.exe]\r\n        [36304] [powershell.exe]\r\n        [30308] [conhost.exe]\r\n        [37160] [powershell.exe]\r\n        [11316] [conhost.exe]\r\n        [39156] [powershell.exe]\r\n      [31036] [Code.exe]\r\n      [31056] [Code.exe]\r\n      [31184] [Code.exe]\r\n      [31272] [Code.exe]\r\n    [38408] [CodeSetup-stable-e8a3071ea4344d9d48ef8a4df2c097372b0c5161.exe]\r\n      [38552] [CodeSetup-stable-e8a3071ea4344d9d48ef8a4df2c097372b0c5161.tmp]\r\n```\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fNUeO.png\r\n  [2]: https://learn.microsoft.com/en-us/sysinternals/\r\n  [3]: https://i.stack.imgur.com/Qbmfo.png","title":"How to get the processes name with the apps name on windows?","body":"<p>I find out 2 solution so far:</p>\n<p><a href=\"https://i.stack.imgur.com/fNUeO.png\" rel=\"nofollow noreferrer\">Solution Result 1</a></p>\n<p>We can use <code>pslist64.exe -t</code> from <a href=\"https://learn.microsoft.com/en-us/sysinternals/\" rel=\"nofollow noreferrer\">Sysinternals</a>.</p>\n<p><a href=\"https://i.stack.imgur.com/Qbmfo.png\" rel=\"nofollow noreferrer\">Solution Result 2 - powershell</a></p>\n<pre><code>function Get-ProcessAndChildProcesses($Level, $Process) {\n    &quot;{0}[{1,-5}] [{2}]&quot; -f (&quot;  &quot; * $Level), $Process.ProcessId, $Process.Name\n    $Children = $Global:Processes | where-object {$_.ParentProcessId -eq $Process.ProcessId -and $_.CreationDate -ge $Process.CreationDate}\n    if ($Children -ne $null) {\n      foreach ($Child in $Children) {\n        Get-ProcessAndChildProcesses ($Level + 1) $Child\n      }\n    }\n  }\n  $Global:Processes = Get-WMIObject -Class Win32_Process\n  $RootProcesses = @()\n  # Process &quot;System Idle Process&quot; is processed differently, as ProcessId and ParentProcessId are 0\n  # $Global:Processes is sliced from index 1 to the end of the array\n  foreach ($Process in $Global:Processes[1..($Global:Processes.length-1)]) {\n    $Parent = $global:Processes | where-object {$_.ProcessId -eq $Process.ParentProcessId -and $_.CreationDate -lt $Process.CreationDate}\n    if ($Parent -eq $null) {\n      $RootProcesses += $Process\n    }\n  }\n  #Process the &quot;System Idle process&quot; separately\n  &quot;[{0,-5}] [{1}]&quot; -f $Global:Processes[0].ProcessId, $Global:Processes[0].Name\n  foreach ($Process in $RootProcesses) {\n    Get-ProcessAndChildProcesses 0 $Process\n}\n</code></pre>\n<p>Solution Result 2 - powershell</p>\n<pre><code>[25488] [Code.exe]\n    [15040] [Code.exe]\n    [23652] [Code.exe]\n    [13024] [Code.exe]\n    [3800 ] [Code.exe]\n    [29312] [Code.exe]\n    [24024] [Code.exe]\n    [20220] [Code.exe]\n    [3888 ] [Code.exe]\n      [31408] [Code.exe]\n      [3976 ] [Code.exe]\n      [1348 ] [TabNine.exe]\n        [39240] [conhost.exe]\n        [30688] [TabNine.exe]\n          [41152] [TabNine-deep-local.exe]\n    [23768] [Code.exe]\n      [31400] [Code.exe]\n      [33528] [Code.exe]\n      [7504 ] [TabNine.exe]\n        [11088] [conhost.exe]\n        [38000] [TabNine.exe]\n        [3892 ] [WD-TabNine.exe]\n    [28860] [Code.exe]\n      [32068] [Code.exe]\n      [32316] [Code.exe]\n        [33768] [Code.exe]\n      [33124] [Code.exe]\n      [33160] [Code.exe]\n      [33708] [Code.exe]\n      [37204] [Code.exe]\n      [30968] [TabNine.exe]\n        [28224] [conhost.exe]\n        [40740] [TabNine.exe]\n    [24716] [Code.exe]\n      [32776] [Code.exe]\n      [32740] [Code.exe]\n      [32132] [python.exe]\n        [37124] [conhost.exe]\n      [33344] [Code.exe]\n      [36212] [Code.exe]\n      [1100 ] [TabNine.exe]\n        [38124] [conhost.exe]\n        [28104] [TabNine.exe]\n    [27296] [Code.exe]\n      [30732] [Code.exe]\n        [27844] [conhost.exe]\n        [32736] [powershell.exe]\n        [28736] [conhost.exe]\n        [36304] [powershell.exe]\n        [30308] [conhost.exe]\n        [37160] [powershell.exe]\n        [11316] [conhost.exe]\n        [39156] [powershell.exe]\n      [31036] [Code.exe]\n      [31056] [Code.exe]\n      [31184] [Code.exe]\n      [31272] [Code.exe]\n    [38408] [CodeSetup-stable-e8a3071ea4344d9d48ef8a4df2c097372b0c5161.exe]\n      [38552] [CodeSetup-stable-e8a3071ea4344d9d48ef8a4df2c097372b0c5161.tmp]\n</code></pre>\n"}],"owner":{"account_id":20515661,"reputation":1,"user_id":15056395,"display_name":"JJG"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":356,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672762887,"creation_date":1672718485,"question_id":74988936,"body_markdown":"Could anyone helps me to fetch the Apps name and all the Processes opened by the App? Just like the Task Manager shows. \r\n\r\n[Screenshot of task manager](https://i.stack.imgur.com/dxP3b.png)\r\n\r\n[Screenshot of task manager 2][1]\r\n\r\nCan you give me an example in Java, Python or Powershell? I have tried the ways from internet, but I can only fetch the processes name, I also want to get the apps name as well.\r\n\r\nThese are what I tried:\r\n\r\n1. Powershell: Get-Process\r\n\r\n[Powershell](https://i.stack.imgur.com/w6ORv.png)\r\n\r\n2. Python: \r\n\r\n```python\r\nimport psutil\r\n\r\n# Define the app group name\r\napp_group = &#39;Visual Studio Code&#39;\r\n\r\n# Get a list of all running processes\r\nprocesses = psutil.process_iter()\r\n\r\nfor process in processes:\r\n    print(f&#39;Process ID: {process.pid}&#39;)\r\n    print(f&#39;Process Name: {process.name()}&#39;)\r\n```\r\n\r\n[Python](https://i.stack.imgur.com/g0viL.png)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6GeE6.png","title":"How to get the processes name with the apps name on windows?","body":"<p>Could anyone helps me to fetch the Apps name and all the Processes opened by the App? Just like the Task Manager shows.</p>\n<p><a href=\"https://i.stack.imgur.com/dxP3b.png\" rel=\"nofollow noreferrer\">Screenshot of task manager</a></p>\n<p><a href=\"https://i.stack.imgur.com/6GeE6.png\" rel=\"nofollow noreferrer\">Screenshot of task manager 2</a></p>\n<p>Can you give me an example in Java, Python or Powershell? I have tried the ways from internet, but I can only fetch the processes name, I also want to get the apps name as well.</p>\n<p>These are what I tried:</p>\n<ol>\n<li>Powershell: Get-Process</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/w6ORv.png\" rel=\"nofollow noreferrer\">Powershell</a></p>\n<ol start=\"2\">\n<li>Python:</li>\n</ol>\n<pre class=\"lang-py prettyprint-override\"><code>import psutil\n\n# Define the app group name\napp_group = 'Visual Studio Code'\n\n# Get a list of all running processes\nprocesses = psutil.process_iter()\n\nfor process in processes:\n    print(f'Process ID: {process.pid}')\n    print(f'Process Name: {process.name()}')\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/g0viL.png\" rel=\"nofollow noreferrer\">Python</a></p>\n"},{"tags":["java","routes","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":3708059,"reputation":1086,"user_id":3086057,"display_name":"bgossit"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1387408224,"creation_date":1387408224,"answer_id":20670407,"question_id":20669070,"body_markdown":"A `&lt;choice`&gt; is either one or the other, so in your example you can only reach one destination URI. Therefore you may need to add a `&lt;split&gt;` before the `&lt;choice&gt;` so that you have two separate messages being evaluated.\r\n\r\nSee [splitter](http://camel.apache.org/splitter.html) for your options there, for example you may want to create your own POJO with a method that returns a list of two ValidatedWitches objects - one with the &quot;goodWitches&quot; collection populated only and one with the &quot;badWitches&quot; collection populated only.\r\n\r\nThere are many [predicate](http://camel.apache.org/predicate.html) options available, but an easy one would be to check if each array was empty.\r\n\r\nThen your route could look something like this:\r\n\r\n    &lt;to uri=&quot;bean:witchValidator?method=process&quot; /&gt;\r\n    &lt;split&gt;\r\n        &lt;method beanType=&quot;SPLITTER_CLASS_NAME&quot; method=&quot;SPLITTER_METHOD&quot; /&gt;\r\n        &lt;choice&gt;\r\n            &lt;when&gt;\r\n                &lt;simple&gt;${body.goodWitches.size} &gt; 0&lt;/simple&gt;\r\n                &lt;to uri=&quot;direct:goodWitches&quot; /&gt;\r\n            &lt;/when&gt;\r\n            &lt;when&gt;\r\n                &lt;simple&gt;${body.badWitches.size} &gt; 0&lt;/simple&gt;\r\n                &lt;to uri=&quot;direct:badWitches&quot; /&gt;\r\n            &lt;/when&gt;\r\n        &lt;/choice&gt;\r\n    &lt;/split&gt;\r\n\r\nKey points:\r\n\r\n - Splitter should return a collection of two or more objects\r\n - Choice needs to be able to distinguish between the split objects","title":"Camel Choice by Example","body":"<p>A <code>&lt;choice</code>> is either one or the other, so in your example you can only reach one destination URI. Therefore you may need to add a <code>&lt;split&gt;</code> before the <code>&lt;choice&gt;</code> so that you have two separate messages being evaluated.</p>\n\n<p>See <a href=\"http://camel.apache.org/splitter.html\" rel=\"noreferrer\">splitter</a> for your options there, for example you may want to create your own POJO with a method that returns a list of two ValidatedWitches objects - one with the \"goodWitches\" collection populated only and one with the \"badWitches\" collection populated only.</p>\n\n<p>There are many <a href=\"http://camel.apache.org/predicate.html\" rel=\"noreferrer\">predicate</a> options available, but an easy one would be to check if each array was empty.</p>\n\n<p>Then your route could look something like this:</p>\n\n<pre><code>&lt;to uri=\"bean:witchValidator?method=process\" /&gt;\n&lt;split&gt;\n    &lt;method beanType=\"SPLITTER_CLASS_NAME\" method=\"SPLITTER_METHOD\" /&gt;\n    &lt;choice&gt;\n        &lt;when&gt;\n            &lt;simple&gt;${body.goodWitches.size} &gt; 0&lt;/simple&gt;\n            &lt;to uri=\"direct:goodWitches\" /&gt;\n        &lt;/when&gt;\n        &lt;when&gt;\n            &lt;simple&gt;${body.badWitches.size} &gt; 0&lt;/simple&gt;\n            &lt;to uri=\"direct:badWitches\" /&gt;\n        &lt;/when&gt;\n    &lt;/choice&gt;\n&lt;/split&gt;\n</code></pre>\n\n<p>Key points:</p>\n\n<ul>\n<li>Splitter should return a collection of two or more objects</li>\n<li>Choice needs to be able to distinguish between the split objects</li>\n</ul>\n"}],"owner":{"account_id":490670,"reputation":55804,"user_id":892029,"accept_rate":84,"display_name":"IAmYourFaja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23305,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":20670407,"answer_count":1,"score":6,"last_activity_date":1672762876,"creation_date":1387403074,"question_id":20669070,"body_markdown":"I have 2 POJOs:\r\n\r\n    public class Witch {\r\n        private Broom broom;\r\n        private List&lt;Spell&gt; spells;\r\n\r\n        // constructors, getters/setters, etc.\r\n    }\r\n\r\n    public class ValidatedWitches {\r\n        private List&lt;Witch&gt; goodWitches\r\n        private List&lt;Witch&gt; badWitches;\r\n\r\n        // constructors, getters/setters, etc.\r\n    }\r\n\r\nI have a Camel processor I wrote that will produce a `ValidatedWitches` instance (which again, consists of 2 `List&lt;Witch&gt;`):\r\n\r\n    public class WitchValidator implements Processor {\r\n        @Override\r\n        public void process(Exchange exchange) {\r\n            List&lt;Witch&gt; witchesToValidate = (List&lt;Witch&gt;)exchange.getIn().getBody();\r\n\r\n            ValidatedWitches validated = validate(witchesToValidate);\r\n\r\n            exchange.getOut().setBody(validated);\r\n        }\r\n\r\n        private ValidatedWitches validate(List&lt;Witch&gt; toValidate) {\r\n            // For each witch, determines if it is a good witch, or a bad witch,\r\n            // and places it on an appropriate list.\r\n            List&lt;Witch&gt; good = new ArrayList&lt;Witch&gt;();\r\n            List&lt;Witch&gt; bad = new ArrayList&lt;Witch&gt;();\r\n\r\n            // etc...\r\n\r\n            return new ValidatedWitches(good, bad);\r\n        }\r\n    }\r\n\r\nI now want to **route** my list of good witches 1 way, and my list of bad witches another way:\r\n\r\n    &lt;route id=&quot;witch-route&quot;&gt;\r\n        &lt;!-- Everything before my WitchValidator component... --&gt;\r\n\r\n        &lt;to uri=&quot;bean:witchValidator?method=process&quot; /&gt;\r\n\r\n        &lt;choice&gt;\r\n            &lt;when&gt;\r\n                &lt;simple&gt;???&lt;/simple&gt;\r\n                &lt;to uri=&quot;direct:goodWitches&quot; /&gt;\r\n            &lt;/when&gt;\r\n            &lt;when&gt;\r\n                &lt;simple&gt;???&lt;/simple&gt;\r\n                &lt;to uri=&quot;direct:badWitches&quot; /&gt;\r\n            &lt;/when&gt;\r\n        &lt;/choice&gt;\r\n    &lt;/route&gt;\r\n\r\nWhat can I put inside my `&lt;choice&gt;` to take the `ValidatedWitches.getGoodWitches()` and route them to `direct:goodWitches`, and to take the `ValidatedWitches.getBadWitches()` and route them to `direct:badWitches`?\r\n","title":"Camel Choice by Example","body":"<p>I have 2 POJOs:</p>\n\n<pre><code>public class Witch {\n    private Broom broom;\n    private List&lt;Spell&gt; spells;\n\n    // constructors, getters/setters, etc.\n}\n\npublic class ValidatedWitches {\n    private List&lt;Witch&gt; goodWitches\n    private List&lt;Witch&gt; badWitches;\n\n    // constructors, getters/setters, etc.\n}\n</code></pre>\n\n<p>I have a Camel processor I wrote that will produce a <code>ValidatedWitches</code> instance (which again, consists of 2 <code>List&lt;Witch&gt;</code>):</p>\n\n<pre><code>public class WitchValidator implements Processor {\n    @Override\n    public void process(Exchange exchange) {\n        List&lt;Witch&gt; witchesToValidate = (List&lt;Witch&gt;)exchange.getIn().getBody();\n\n        ValidatedWitches validated = validate(witchesToValidate);\n\n        exchange.getOut().setBody(validated);\n    }\n\n    private ValidatedWitches validate(List&lt;Witch&gt; toValidate) {\n        // For each witch, determines if it is a good witch, or a bad witch,\n        // and places it on an appropriate list.\n        List&lt;Witch&gt; good = new ArrayList&lt;Witch&gt;();\n        List&lt;Witch&gt; bad = new ArrayList&lt;Witch&gt;();\n\n        // etc...\n\n        return new ValidatedWitches(good, bad);\n    }\n}\n</code></pre>\n\n<p>I now want to <strong>route</strong> my list of good witches 1 way, and my list of bad witches another way:</p>\n\n<pre><code>&lt;route id=\"witch-route\"&gt;\n    &lt;!-- Everything before my WitchValidator component... --&gt;\n\n    &lt;to uri=\"bean:witchValidator?method=process\" /&gt;\n\n    &lt;choice&gt;\n        &lt;when&gt;\n            &lt;simple&gt;???&lt;/simple&gt;\n            &lt;to uri=\"direct:goodWitches\" /&gt;\n        &lt;/when&gt;\n        &lt;when&gt;\n            &lt;simple&gt;???&lt;/simple&gt;\n            &lt;to uri=\"direct:badWitches\" /&gt;\n        &lt;/when&gt;\n    &lt;/choice&gt;\n&lt;/route&gt;\n</code></pre>\n\n<p>What can I put inside my <code>&lt;choice&gt;</code> to take the <code>ValidatedWitches.getGoodWitches()</code> and route them to <code>direct:goodWitches</code>, and to take the <code>ValidatedWitches.getBadWitches()</code> and route them to <code>direct:badWitches</code>?</p>\n"},{"tags":["java","properties","message"],"comments":[{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1346055029,"post_id":12138279,"comment_id":16236817,"body_markdown":"http://docs.oracle.com/javase/tutorial/i18n/format/choiceFormat.html (not an answer)","body":"<a href=\"http://docs.oracle.com/javase/tutorial/i18n/format/choiceFormat.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/i18n/format/choiceFormat.htm&zwnj;&#8203;l</a> (not an answer)"},{"owner":{"account_id":141852,"reputation":4322,"user_id":349169,"accept_rate":78,"display_name":"Chris"},"score":3,"creation_date":1361958947,"post_id":12138279,"comment_id":21258689,"body_markdown":"The link above doesn&#39;t address the issue. The following one seems closer to me: http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html","body":"The link above doesn&#39;t address the issue. The following one seems closer to me: <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.5.0/docs/api/java/text/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":355628,"reputation":1042,"user_id":694677,"accept_rate":74,"display_name":"DominikM"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1347261136,"creation_date":1347261136,"answer_id":12346857,"question_id":12138279,"body_markdown":"I found an answer. It seems that choice statement in properties file works properly only if more than one choice is specified. So you have to specify at least one &quot;else branch&quot; \r\nIf i rewrite my example:\r\n\r\n    xxx.yyy.plural={0,choice,2#testy|2&lt;test}\r\n\r\n","title":"Choice pattern in properties file","body":"<p>I found an answer. It seems that choice statement in properties file works properly only if more than one choice is specified. So you have to specify at least one \"else branch\" \nIf i rewrite my example:</p>\n\n<pre><code>xxx.yyy.plural={0,choice,2#testy|2&lt;test}\n</code></pre>\n"}],"owner":{"account_id":355628,"reputation":1042,"user_id":694677,"accept_rate":74,"display_name":"DominikM"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4423,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":12346857,"answer_count":1,"score":8,"last_activity_date":1672762836,"creation_date":1346054731,"question_id":12138279,"body_markdown":"I have a properties file with messages and I want to handle some special cases of plural. Now I use:\r\n\r\n    xxx.yyy.plural=test{0,choice,2#y}\r\n\r\nbut it formats 12 as &#39;testy&#39; also. How can I specify 2 as exact match?","title":"Choice pattern in properties file","body":"<p>I have a properties file with messages and I want to handle some special cases of plural. Now I use:</p>\n\n<pre><code>xxx.yyy.plural=test{0,choice,2#y}\n</code></pre>\n\n<p>but it formats 12 as 'testy' also. How can I specify 2 as exact match?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":5221034,"reputation":218,"user_id":4867727,"display_name":"GiantTree"},"score":0,"creation_date":1433254212,"post_id":30598440,"comment_id":49265467,"body_markdown":"Take the total size, subtract the already downloaded amount of data, divide it by the average download speed (you need to capture the time and progress for that). You are left with the amount of time (in seconds) you need to download that file, given that the speed is constant.","body":"Take the total size, subtract the already downloaded amount of data, divide it by the average download speed (you need to capture the time and progress for that). You are left with the amount of time (in seconds) you need to download that file, given that the speed is constant."},{"owner":{"account_id":3716518,"reputation":1000,"user_id":3547126,"accept_rate":81,"display_name":"goncalotomas"},"score":0,"creation_date":1433254298,"post_id":30598440,"comment_id":49265549,"body_markdown":"You need to calculate the current download speed by getting a timestamp every few seconds. Think like this: if 10 seconds have passed and I downloaded 50% of the file, how many seconds is it going to take if the speed does not change?","body":"You need to calculate the current download speed by getting a timestamp every few seconds. Think like this: if 10 seconds have passed and I downloaded 50% of the file, how many seconds is it going to take if the speed does not change?"},{"owner":{"account_id":1301014,"reputation":8110,"user_id":1250929,"accept_rate":72,"display_name":"Kristy Welsh"},"score":0,"creation_date":1433254321,"post_id":30598440,"comment_id":49265573,"body_markdown":"@GiantTree you should really make this an answer.  Just sayin&#39;.","body":"@GiantTree you should really make this an answer.  Just sayin&#39;."},{"owner":{"account_id":3242958,"reputation":6768,"user_id":2735471,"display_name":"Neerajlal K"},"score":0,"creation_date":1433254327,"post_id":30598440,"comment_id":49265579,"body_markdown":"http://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog","body":"<a href=\"http://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog\" title=\"download a file with android and showing the progress in a progressdialog\">stackoverflow.com/questions/3028306/&hellip;</a>"},{"owner":{"account_id":3016236,"reputation":15507,"user_id":4969827,"display_name":"Sergey Shustikov"},"score":0,"creation_date":1433254374,"post_id":30598440,"comment_id":49265619,"body_markdown":"@KNeerajLal you don&#39;t understand an answer. Read again.","body":"@KNeerajLal you don&#39;t understand an answer. Read again."},{"owner":{"account_id":3242958,"reputation":6768,"user_id":2735471,"display_name":"Neerajlal K"},"score":0,"creation_date":1433254507,"post_id":30598440,"comment_id":49265733,"body_markdown":"Ok my bad. You need the reverse of this right?","body":"Ok my bad. You need the reverse of this right?"},{"owner":{"account_id":5221034,"reputation":218,"user_id":4867727,"display_name":"GiantTree"},"score":0,"creation_date":1433254827,"post_id":30598440,"comment_id":49266004,"body_markdown":"I think this answer gives you the right algorithm: http://stackoverflow.com/a/799061/4867727. You just need to implement it correctly (use an `AsyncTask`, a simple loop etc.).","body":"I think this answer gives you the right algorithm: <a href=\"http://stackoverflow.com/a/799061/4867727\">stackoverflow.com/a/799061/4867727</a>. You just need to implement it correctly (use an <code>AsyncTask</code>, a simple loop etc.)."},{"owner":{"account_id":5520300,"reputation":195,"user_id":4383500,"display_name":"Robbe Roels"},"score":1,"creation_date":1433254960,"post_id":30598440,"comment_id":49266105,"body_markdown":"@GiantTree is correct, (And so is @Kristy-Welsh) you&#39;ll need to get your `System.nanoTime()` at specific intervals in your `onProgress()` to calculate the time remaining (as explained by @GiantTree) and report it back to your UI","body":"@GiantTree is correct, (And so is @Kristy-Welsh) you&#39;ll need to get your <code>System.nanoTime()</code> at specific intervals in your <code>onProgress()</code> to calculate the time remaining (as explained by @GiantTree) and report it back to your UI"},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1433255082,"post_id":30598440,"comment_id":49266221,"body_markdown":"@SergeyShustikov: are you asking how to do a rule of 3?","body":"@SergeyShustikov: are you asking how to do a rule of 3?"}],"answers":[{"tags":[],"owner":{"account_id":3016236,"reputation":15507,"user_id":4969827,"display_name":"Sergey Shustikov"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1672684390,"creation_date":1433255681,"answer_id":30599099,"question_id":30598440,"body_markdown":"When you start downloading save timestamp :\r\n\r\n    Long startTime = System.nanoTime();\r\n\r\nto calculate average remaining speed :\r\n\r\n     Long elapsedTime = System.nanoTime() - startTime;\r\n     Long allTimeForDownloading = (elapsedTime * allBytes / downloadedBytes);\r\n     Long remainingTime = allTimeForDownloading - elapsedTime;","title":"Calculate estimated remaining download time","body":"<p>When you start downloading save timestamp :</p>\n<pre><code>Long startTime = System.nanoTime();\n</code></pre>\n<p>to calculate average remaining speed :</p>\n<pre><code> Long elapsedTime = System.nanoTime() - startTime;\n Long allTimeForDownloading = (elapsedTime * allBytes / downloadedBytes);\n Long remainingTime = allTimeForDownloading - elapsedTime;\n</code></pre>\n"}],"owner":{"account_id":3016236,"reputation":15507,"user_id":4969827,"display_name":"Sergey Shustikov"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6744,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":30599099,"answer_count":1,"score":8,"last_activity_date":1672762374,"creation_date":1433254070,"question_id":30598440,"body_markdown":"I have a code that download file from URL.&lt;br&gt;\r\nI have two parameters that are calculated all time for downloading :\r\n\r\n    Long start = System.nanoTime();\r\n    // downloading...\r\n    Long end = System.nanoTime();\r\n\r\nI need to measure the estimated remaining time to the end of downloading. How I can do that?&lt;br&gt;\r\n\r\nThis question (https://stackoverflow.com/questions/7312227/can-java-be-used-to-determine-a-duration-of-a-download) didn&#39;t actually cover what I&#39;m asking - I wanna know the remaining time, not the duration of downloading.","title":"Calculate estimated remaining download time","body":"<p>I have a code that download file from URL.<br>\nI have two parameters that are calculated all time for downloading :</p>\n<pre><code>Long start = System.nanoTime();\n// downloading...\nLong end = System.nanoTime();\n</code></pre>\n<p>I need to measure the estimated remaining time to the end of downloading. How I can do that?<br></p>\n<p>This question (<a href=\"https://stackoverflow.com/questions/7312227/can-java-be-used-to-determine-a-duration-of-a-download\">Can Java be used to determine a duration of a download?</a>) didn't actually cover what I'm asking - I wanna know the remaining time, not the duration of downloading.</p>\n"},{"tags":["java","performance","apache-kafka","jmeter"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672080040,"creation_date":1672080040,"answer_id":74923106,"question_id":74919069,"body_markdown":"Make sure that your `b-1..amazonaws.com:9096` host and port combination is reachable from JMeter load generator(s)\r\n\r\n 1. Kafka broker is running\r\n 2. Port 9096 is open in operating system [firewall][1]\r\n 3. Port 9096 is open in [AWS security groups][2]\r\n 4. If any VPN or proxy is needed to reach the Kafka broker - make sure to connect to the VPN or [make JMeter aware of the proxy server][3] \r\n\r\n\r\nMore information: [How to Do Kafka Testing With JMeter][4]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Firewall_(computing)\r\n  [2]: https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html\r\n  [3]: https://jmeter.apache.org/usermanual/get-started.html#proxy_server\r\n  [4]: https://www.blazemeter.com/blog/kafka-testing","title":"Working on Kafka load testing with jmeter and getting unable to connect kafka and timeout issues","body":"<p>Make sure that your <code>b-1..amazonaws.com:9096</code> host and port combination is reachable from JMeter load generator(s)</p>\n<ol>\n<li>Kafka broker is running</li>\n<li>Port 9096 is open in operating system <a href=\"https://en.wikipedia.org/wiki/Firewall_(computing)\" rel=\"nofollow noreferrer\">firewall</a></li>\n<li>Port 9096 is open in <a href=\"https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html\" rel=\"nofollow noreferrer\">AWS security groups</a></li>\n<li>If any VPN or proxy is needed to reach the Kafka broker - make sure to connect to the VPN or <a href=\"https://jmeter.apache.org/usermanual/get-started.html#proxy_server\" rel=\"nofollow noreferrer\">make JMeter aware of the proxy server</a></li>\n</ol>\n<p>More information: <a href=\"https://www.blazemeter.com/blog/kafka-testing\" rel=\"nofollow noreferrer\">How to Do Kafka Testing With JMeter</a></p>\n"}],"owner":{"account_id":27354877,"reputation":1,"user_id":20863456,"display_name":"Neelam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":483,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1672762189,"creation_date":1672047787,"question_id":74919069,"body_markdown":"   Created basic script for kafka with javarequest and JSR223 sampler. During script execution getting below error .\r\n\r\nSample script : \r\n```\r\nimport org.apache.kafka.clients.producer.KafkaProducer;\r\nimport org.apache.kafka.common.serialization.StringSerializer;\r\nimport org.apache.kafka.clients.producer.ProducerRecord;\r\nimport org.apache.kafka.clients.producer.ProducerConfig;\r\nimport org.apache.kafka.common.header.Header;\r\nimport org.apache.kafka.common.header.internals.RecordHeader;\r\nimport org.apache.kafka.common.header.Headers;\r\nimport org.apache.kafka.common.header.internals.RecordHeaders;\r\n\r\nProperties props = new Properties();\r\nprops.put(&quot;zookeeper.connect&quot;, &quot;Zookeper:2181&quot;);\r\nprops.put(&quot;bootstrap.servers&quot;, &quot;b-1..amazonaws.com:9096&quot;);\r\nprops.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\nprops.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\nprops.put(&quot;compression.type&quot;, &quot;none&quot;);\r\nprops.put(&quot;batch.size&quot;, &quot;16384&quot;);\r\nprops.put(&quot;linger.ms&quot;, &quot;0&quot;);\r\nprops.put(&quot;buffer.memory&quot;, &quot;33554432&quot;);\r\nprops.put(&quot;acks&quot;, &quot;1&quot;);\r\nprops.put(&quot;send.buffer.bytes&quot;, &quot;131072&quot;);\r\nprops.put(&quot;receive.buffer.bytes&quot;, &quot;32768&quot;);\r\nprops.put(&quot;security.protocol&quot;, &quot;SASL SSL&quot;);\r\nprops.put(&quot;sasl.kerberos.service.name&quot;, &quot;kafka&quot;);\r\nprops.put(&quot;sasl.mechanism&quot;, &quot;SCRAM-SHA-512&quot;);\r\n\r\n//System.setProperty(&quot;java.security.auth.login.config&quot;,&quot;C:/kafka/JAAS.conf&quot;);\r\n\r\nprops.put(&quot;java.security.auth.login.config&quot;, &quot;C:/kafka/JAAS.conf&quot;);\r\n\r\nKafkaProducer\\&lt;String, String\\&gt; producer = new KafkaProducer\\&lt;String, String\\&gt;(props);\r\n```\r\nErrors:\r\n\r\n```\r\n\\[1:38 PM\\] veerajah, neelam (contracted)\r\n\r\n2022-12-26 08:07:47,302 INFO o.a.k.c.p.KafkaProducer: \\[Producer clientId=JMeterKafkaBackendListener\\] Closing the Kafka producer with timeoutMillis = 0 ms.\r\n\r\n\\[1:39 PM\\] veerajah, neelam (contracted)\r\n\r\nCaused by: org.apache.kafka.common.KafkaException: Failed to construct kafka producer\r\n\r\n\\[1:40 PM\\] veerajah, neelam (contracted)\r\n\r\nCaused by: org.apache.kafka.common.config.ConfigException: No resolvable bootstrap urls given in bootstrap.servers\r\n```","title":"Working on Kafka load testing with jmeter and getting unable to connect kafka and timeout issues","body":"<p>Created basic script for kafka with javarequest and JSR223 sampler. During script execution getting below error .</p>\n<p>Sample script :</p>\n<pre><code>import org.apache.kafka.clients.producer.KafkaProducer;\nimport org.apache.kafka.common.serialization.StringSerializer;\nimport org.apache.kafka.clients.producer.ProducerRecord;\nimport org.apache.kafka.clients.producer.ProducerConfig;\nimport org.apache.kafka.common.header.Header;\nimport org.apache.kafka.common.header.internals.RecordHeader;\nimport org.apache.kafka.common.header.Headers;\nimport org.apache.kafka.common.header.internals.RecordHeaders;\n\nProperties props = new Properties();\nprops.put(&quot;zookeeper.connect&quot;, &quot;Zookeper:2181&quot;);\nprops.put(&quot;bootstrap.servers&quot;, &quot;b-1..amazonaws.com:9096&quot;);\nprops.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\nprops.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\nprops.put(&quot;compression.type&quot;, &quot;none&quot;);\nprops.put(&quot;batch.size&quot;, &quot;16384&quot;);\nprops.put(&quot;linger.ms&quot;, &quot;0&quot;);\nprops.put(&quot;buffer.memory&quot;, &quot;33554432&quot;);\nprops.put(&quot;acks&quot;, &quot;1&quot;);\nprops.put(&quot;send.buffer.bytes&quot;, &quot;131072&quot;);\nprops.put(&quot;receive.buffer.bytes&quot;, &quot;32768&quot;);\nprops.put(&quot;security.protocol&quot;, &quot;SASL SSL&quot;);\nprops.put(&quot;sasl.kerberos.service.name&quot;, &quot;kafka&quot;);\nprops.put(&quot;sasl.mechanism&quot;, &quot;SCRAM-SHA-512&quot;);\n\n//System.setProperty(&quot;java.security.auth.login.config&quot;,&quot;C:/kafka/JAAS.conf&quot;);\n\nprops.put(&quot;java.security.auth.login.config&quot;, &quot;C:/kafka/JAAS.conf&quot;);\n\nKafkaProducer\\&lt;String, String\\&gt; producer = new KafkaProducer\\&lt;String, String\\&gt;(props);\n</code></pre>\n<p>Errors:</p>\n<pre><code>\\[1:38 PM\\] veerajah, neelam (contracted)\n\n2022-12-26 08:07:47,302 INFO o.a.k.c.p.KafkaProducer: \\[Producer clientId=JMeterKafkaBackendListener\\] Closing the Kafka producer with timeoutMillis = 0 ms.\n\n\\[1:39 PM\\] veerajah, neelam (contracted)\n\nCaused by: org.apache.kafka.common.KafkaException: Failed to construct kafka producer\n\n\\[1:40 PM\\] veerajah, neelam (contracted)\n\nCaused by: org.apache.kafka.common.config.ConfigException: No resolvable bootstrap urls given in bootstrap.servers\n</code></pre>\n"},{"tags":["java","git","javadoc"],"comments":[{"owner":{"account_id":62041,"reputation":23930,"user_id":184546,"accept_rate":78,"display_name":"TTT"},"score":0,"creation_date":1672765679,"post_id":74995768,"comment_id":132346227,"body_markdown":"You could try staging hunks, and maybe automate it based on your comment patterns, [like this](https://stackoverflow.com/q/36932309/184546).","body":"You could try staging hunks, and maybe automate it based on your comment patterns, <a href=\"https://stackoverflow.com/q/36932309/184546\">like this</a>."},{"owner":{"account_id":1850679,"reputation":3607,"user_id":1677285,"accept_rate":57,"display_name":"realbart"},"score":0,"creation_date":1672959714,"post_id":74995768,"comment_id":132397019,"body_markdown":"So your approach would be to take the diffs and grep the files starting with + /* or with + *?","body":"So your approach would be to take the diffs and grep the files starting with + /* or with + *?"}],"owner":{"account_id":1850679,"reputation":3607,"user_id":1677285,"accept_rate":57,"display_name":"realbart"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672761917,"creation_date":1672761917,"question_id":74995768,"body_markdown":"I have a new branch in my code, where a lot of jdoc-comments. were added. However, the code was *also* automatically reformatted and imports were rearranged.\r\n\r\nI&#39;d like to have the documentation in a seperate branch / pull request.\r\n\r\nIs there a way to export the jdoc from the solution and then re-apply the exported jdocs to the original code? Or is there another way to achieve this?\r\n\r\n\r\n*original:*\r\n```\r\n    protected static Random r = new Random();\r\n    private static final String WACHTWOORD_PATTERN = PropertiesFileLoader.getInstance().getProperty(&quot;pwd.pattern&quot;, &quot;aaaaaann&quot;);\r\n    private static final boolean ENKEL_HOOFDLETTERS_TOEGESTAAN = Boolean.parseBoolean(PropertiesFileLoader.getInstance().getProperty(&quot;pwd.allUppercaseAllowed&quot;, &quot;false&quot;));\r\n    private static final boolean ENKEL_KLEINELETTERS_TOEGESTAAN = Boolean.parseBoolean(PropertiesFileLoader.getInstance().getProperty(&quot;pwd.allLowercaseAllowed&quot;, &quot;false&quot;));\r\n    private static Integer[] LETTERS_INDICES = null;\r\n    private static final Map&lt;String, String[]&gt; TEKENS_MAP = new HashMap&lt;String, String[]&gt;();\r\n\r\n    public static String volgendWachtwoord() {\r\n        String wachtwoord = &quot;&quot;;\r\n        for (int i = 0; i &lt; WACHTWOORD_PATTERN.length(); ++i) {\r\n            wachtwoord = wachtwoord + TEKENS_MAP.get(WACHTWOORD_PATTERN.substring(i, i + 1))[r.nextInt(TEKENS_MAP.get(WACHTWOORD_PATTERN.substring(i, i + 1)).length)];\r\n        }\r\n        if (null != LETTERS_INDICES &amp;&amp; LETTERS_INDICES.length &gt; 0) {\r\n            if (!ENKEL_HOOFDLETTERS_TOEGESTAAN &amp;&amp; wachtwoord.toUpperCase().equals(wachtwoord)) {\r\n                int kleineLetterIndex = r.nextInt(LETTERS_INDICES.length);\r\n                wachtwoord = wachtwoord.substring(0, kleineLetterIndex) + wachtwoord.substring(kleineLetterIndex, kleineLetterIndex + 1).toLowerCase() + (kleineLetterIndex == LETTERS_INDICES.length - 1 ? &quot;&quot; : wachtwoord.substring(kleineLetterIndex + 1));\r\n            }\r\n            if (!ENKEL_KLEINELETTERS_TOEGESTAAN &amp;&amp; wachtwoord.toLowerCase().equals(wachtwoord)) {\r\n                int groteLetterIndex = r.nextInt(LETTERS_INDICES.length);\r\n                wachtwoord = wachtwoord.substring(0, groteLetterIndex) + wachtwoord.substring(groteLetterIndex, groteLetterIndex + 1).toUpperCase() + (groteLetterIndex == LETTERS_INDICES.length - 1 ? &quot;&quot; : wachtwoord.substring(groteLetterIndex + 1));\r\n        ...\r\n```\r\n\r\n*changed:*\r\n```\r\n    protected static     Random                r                              = new Random();\r\n    private static final String                WACHTWOORD_PATTERN             = PropertiesFileLoader.getInstance().getProperty(&quot;pwd.pattern&quot;, &quot;aaaaaann&quot;);\r\n    private static final boolean               ENKEL_HOOFDLETTERS_TOEGESTAAN  = Boolean.parseBoolean(\r\n            PropertiesFileLoader.getInstance().getProperty(&quot;pwd.allUppercaseAllowed&quot;, &quot;false&quot;));\r\n    private static final boolean               ENKEL_KLEINELETTERS_TOEGESTAAN = Boolean.parseBoolean(\r\n            PropertiesFileLoader.getInstance().getProperty(&quot;pwd.allLowercaseAllowed&quot;, &quot;false&quot;));\r\n    private static       Integer[]             LETTERS_INDICES                = null;\r\n    private static final Map&lt;String, String[]&gt; TEKENS_MAP                     = new HashMap&lt;String, String[]&gt;();\r\n    /**\r\n     * It generates a random password based on the pattern and the tokens map\r\n     *\r\n     * @return A random password\r\n     */\r\n    public static String volgendWachtwoord() {\r\n        String wachtwoord = &quot;&quot;;\r\n        for (int i = 0; i &lt; WACHTWOORD_PATTERN.length(); ++i) {\r\n            wachtwoord = wachtwoord + TEKENS_MAP.get(WACHTWOORD_PATTERN.substring(i, i + 1))[r.nextInt(TEKENS_MAP.get(WACHTWOORD_PATTERN.substring(i, i + 1)).length)];\r\n        }\r\n        if (null != LETTERS_INDICES &amp;&amp; LETTERS_INDICES.length &gt; 0) {\r\n            if (!ENKEL_HOOFDLETTERS_TOEGESTAAN &amp;&amp; wachtwoord.toUpperCase().equals(wachtwoord)) {\r\n                int kleineLetterIndex = r.nextInt(LETTERS_INDICES.length);\r\n                wachtwoord = wachtwoord.substring(0, kleineLetterIndex) + wachtwoord.substring(kleineLetterIndex, kleineLetterIndex + 1).toLowerCase() + (\r\n                        kleineLetterIndex == LETTERS_INDICES.length - 1 ? &quot;&quot; : wachtwoord.substring(kleineLetterIndex + 1));\r\n            }\r\n            if (!ENKEL_KLEINELETTERS_TOEGESTAAN &amp;&amp; wachtwoord.toLowerCase().equals(wachtwoord)) {\r\n                int groteLetterIndex = r.nextInt(LETTERS_INDICES.length);\r\n                wachtwoord = wachtwoord.substring(0, groteLetterIndex) + wachtwoord.substring(groteLetterIndex, groteLetterIndex + 1).toUpperCase() + (\r\n                        groteLetterIndex == LETTERS_INDICES.length - 1 ? &quot;&quot; : wachtwoord.substring(groteLetterIndex + 1));\r\n        ...\r\n```","title":"Apply jdoc documentation to different branch (or: revert code changes but keep jdoc)","body":"<p>I have a new branch in my code, where a lot of jdoc-comments. were added. However, the code was <em>also</em> automatically reformatted and imports were rearranged.</p>\n<p>I'd like to have the documentation in a seperate branch / pull request.</p>\n<p>Is there a way to export the jdoc from the solution and then re-apply the exported jdocs to the original code? Or is there another way to achieve this?</p>\n<p><em>original:</em></p>\n<pre><code>    protected static Random r = new Random();\n    private static final String WACHTWOORD_PATTERN = PropertiesFileLoader.getInstance().getProperty(&quot;pwd.pattern&quot;, &quot;aaaaaann&quot;);\n    private static final boolean ENKEL_HOOFDLETTERS_TOEGESTAAN = Boolean.parseBoolean(PropertiesFileLoader.getInstance().getProperty(&quot;pwd.allUppercaseAllowed&quot;, &quot;false&quot;));\n    private static final boolean ENKEL_KLEINELETTERS_TOEGESTAAN = Boolean.parseBoolean(PropertiesFileLoader.getInstance().getProperty(&quot;pwd.allLowercaseAllowed&quot;, &quot;false&quot;));\n    private static Integer[] LETTERS_INDICES = null;\n    private static final Map&lt;String, String[]&gt; TEKENS_MAP = new HashMap&lt;String, String[]&gt;();\n\n    public static String volgendWachtwoord() {\n        String wachtwoord = &quot;&quot;;\n        for (int i = 0; i &lt; WACHTWOORD_PATTERN.length(); ++i) {\n            wachtwoord = wachtwoord + TEKENS_MAP.get(WACHTWOORD_PATTERN.substring(i, i + 1))[r.nextInt(TEKENS_MAP.get(WACHTWOORD_PATTERN.substring(i, i + 1)).length)];\n        }\n        if (null != LETTERS_INDICES &amp;&amp; LETTERS_INDICES.length &gt; 0) {\n            if (!ENKEL_HOOFDLETTERS_TOEGESTAAN &amp;&amp; wachtwoord.toUpperCase().equals(wachtwoord)) {\n                int kleineLetterIndex = r.nextInt(LETTERS_INDICES.length);\n                wachtwoord = wachtwoord.substring(0, kleineLetterIndex) + wachtwoord.substring(kleineLetterIndex, kleineLetterIndex + 1).toLowerCase() + (kleineLetterIndex == LETTERS_INDICES.length - 1 ? &quot;&quot; : wachtwoord.substring(kleineLetterIndex + 1));\n            }\n            if (!ENKEL_KLEINELETTERS_TOEGESTAAN &amp;&amp; wachtwoord.toLowerCase().equals(wachtwoord)) {\n                int groteLetterIndex = r.nextInt(LETTERS_INDICES.length);\n                wachtwoord = wachtwoord.substring(0, groteLetterIndex) + wachtwoord.substring(groteLetterIndex, groteLetterIndex + 1).toUpperCase() + (groteLetterIndex == LETTERS_INDICES.length - 1 ? &quot;&quot; : wachtwoord.substring(groteLetterIndex + 1));\n        ...\n</code></pre>\n<p><em>changed:</em></p>\n<pre><code>    protected static     Random                r                              = new Random();\n    private static final String                WACHTWOORD_PATTERN             = PropertiesFileLoader.getInstance().getProperty(&quot;pwd.pattern&quot;, &quot;aaaaaann&quot;);\n    private static final boolean               ENKEL_HOOFDLETTERS_TOEGESTAAN  = Boolean.parseBoolean(\n            PropertiesFileLoader.getInstance().getProperty(&quot;pwd.allUppercaseAllowed&quot;, &quot;false&quot;));\n    private static final boolean               ENKEL_KLEINELETTERS_TOEGESTAAN = Boolean.parseBoolean(\n            PropertiesFileLoader.getInstance().getProperty(&quot;pwd.allLowercaseAllowed&quot;, &quot;false&quot;));\n    private static       Integer[]             LETTERS_INDICES                = null;\n    private static final Map&lt;String, String[]&gt; TEKENS_MAP                     = new HashMap&lt;String, String[]&gt;();\n    /**\n     * It generates a random password based on the pattern and the tokens map\n     *\n     * @return A random password\n     */\n    public static String volgendWachtwoord() {\n        String wachtwoord = &quot;&quot;;\n        for (int i = 0; i &lt; WACHTWOORD_PATTERN.length(); ++i) {\n            wachtwoord = wachtwoord + TEKENS_MAP.get(WACHTWOORD_PATTERN.substring(i, i + 1))[r.nextInt(TEKENS_MAP.get(WACHTWOORD_PATTERN.substring(i, i + 1)).length)];\n        }\n        if (null != LETTERS_INDICES &amp;&amp; LETTERS_INDICES.length &gt; 0) {\n            if (!ENKEL_HOOFDLETTERS_TOEGESTAAN &amp;&amp; wachtwoord.toUpperCase().equals(wachtwoord)) {\n                int kleineLetterIndex = r.nextInt(LETTERS_INDICES.length);\n                wachtwoord = wachtwoord.substring(0, kleineLetterIndex) + wachtwoord.substring(kleineLetterIndex, kleineLetterIndex + 1).toLowerCase() + (\n                        kleineLetterIndex == LETTERS_INDICES.length - 1 ? &quot;&quot; : wachtwoord.substring(kleineLetterIndex + 1));\n            }\n            if (!ENKEL_KLEINELETTERS_TOEGESTAAN &amp;&amp; wachtwoord.toLowerCase().equals(wachtwoord)) {\n                int groteLetterIndex = r.nextInt(LETTERS_INDICES.length);\n                wachtwoord = wachtwoord.substring(0, groteLetterIndex) + wachtwoord.substring(groteLetterIndex, groteLetterIndex + 1).toUpperCase() + (\n                        groteLetterIndex == LETTERS_INDICES.length - 1 ? &quot;&quot; : wachtwoord.substring(groteLetterIndex + 1));\n        ...\n</code></pre>\n"},{"tags":["java","spring-cloud-stream"],"comments":[{"owner":{"account_id":8405500,"reputation":430,"user_id":6309111,"display_name":"Dev-vruper"},"score":0,"creation_date":1672310885,"post_id":74949902,"comment_id":132263978,"body_markdown":"You could try using a place holder eg : @Value(&quot;${idleBetweenPolls}&quot;) int idleBetweenPolls","body":"You could try using a place holder eg : @Value(&quot;${idleBetweenPolls}&quot;) int idleBetweenPolls"},{"owner":{"account_id":4351708,"reputation":129,"user_id":3551820,"display_name":"Lucas"},"score":0,"creation_date":1672313309,"post_id":74949902,"comment_id":132264684,"body_markdown":"Hi @Dev-vruper, that&#39;s correct. But what I&#39;m trying to achieve is moving the bean to the YML file directly, not needing any code.","body":"Hi @Dev-vruper, that&#39;s correct. But what I&#39;m trying to achieve is moving the bean to the YML file directly, not needing any code."},{"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1672761581,"post_id":74949902,"comment_id":132344873,"body_markdown":"Boot does not support all container properties in yml, just some of the common ones; your current solution is correct.","body":"Boot does not support all container properties in yml, just some of the common ones; your current solution is correct."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672761573,"creation_date":1672761573,"answer_id":74995703,"question_id":74949902,"body_markdown":"Boot does not support all container properties in yml, just some of the common ones; your current solution is correct.\r\n\r\nYou could open a new feature suggestion against Boot.","title":"How to set Spring Container properties at yml level?","body":"<p>Boot does not support all container properties in yml, just some of the common ones; your current solution is correct.</p>\n<p>You could open a new feature suggestion against Boot.</p>\n"}],"owner":{"account_id":4351708,"reputation":129,"user_id":3551820,"display_name":"Lucas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74995703,"answer_count":1,"score":0,"last_activity_date":1672761573,"creation_date":1672309479,"question_id":74949902,"body_markdown":"I&#39;m struggling to find in google/spring docs any way to make the Spring Container properties set in the yml file instead of programatically.\r\n\r\nI want to set the property &quot;idleBetweenPolls&quot; for one specific topic + consumer.\r\n\r\nI&#39;ve achieved it programatically (it is currently applying to all topics/consumers, I&#39;d need to add some conditions there).\r\n\r\n    @Bean\r\n    public ListenerContainerCustomizer&lt;AbstractMessageListenerContainer&lt;?, ?&gt;&gt; customizer() {\r\n        return (container, dest, group) -&gt; {\r\n            log.info(&quot;Container : {}, dest: {}, group: {}&quot;, container, dest, group);\r\n            container.getContainerProperties().setIdleBetweenPolls(15000);\r\n        };\r\n\r\n    }\r\n\r\nHow can I set that at yml level? I tried the config below with no success:\r\n\r\n    spring.cloud.stream:\r\n      kafka:\r\n        binder:\r\n          autoCreateTopics: true\r\n          autoAddPartitions: true\r\n          healthTimeout: 10\r\n          requiredAcks: 1\r\n          minPartitionCount: 1\r\n          replicationFactor: 1\r\n          headerMapperBeanName: customHeaderMapper\r\n        bindings:\r\n          command-my-setup-input-channel:\r\n            consumer:\r\n              autoCommitOffset: false\r\n              batch-mode: true\r\n              startOffset: earliest\r\n              resetOffsets: true\r\n              converter-bean-name: batchConverter\r\n              ackMode: manual\r\n              idleBetweenPolls: 90000 # not working\r\n              configuration:\r\n                heartbeat.interval.ms: 1000\r\n                max.poll.records: 2\r\n                max.poll.interval.ms: 890000\r\n                value.deserializer: com.xpto.MySetupDTODeserializer\r\n      bindings:\r\n        command-my-setup-input-channel:\r\n          destination: command.my.setup\r\n          content-type: application/json\r\n          binder: kafka\r\n          configuration:\r\n            value:\r\n              deserializer: com.xpto.MySetupDTODeserializer\r\n          consumer:\r\n            batch-mode: true\r\n            startOffset: earliest\r\n            resetOffsets: true\r\n**Version:** spring-cloud-stream 3.0.12.RELEASE\r\n\r\n","title":"How to set Spring Container properties at yml level?","body":"<p>I'm struggling to find in google/spring docs any way to make the Spring Container properties set in the yml file instead of programatically.</p>\n<p>I want to set the property &quot;idleBetweenPolls&quot; for one specific topic + consumer.</p>\n<p>I've achieved it programatically (it is currently applying to all topics/consumers, I'd need to add some conditions there).</p>\n<pre><code>@Bean\npublic ListenerContainerCustomizer&lt;AbstractMessageListenerContainer&lt;?, ?&gt;&gt; customizer() {\n    return (container, dest, group) -&gt; {\n        log.info(&quot;Container : {}, dest: {}, group: {}&quot;, container, dest, group);\n        container.getContainerProperties().setIdleBetweenPolls(15000);\n    };\n\n}\n</code></pre>\n<p>How can I set that at yml level? I tried the config below with no success:</p>\n<pre><code>spring.cloud.stream:\n  kafka:\n    binder:\n      autoCreateTopics: true\n      autoAddPartitions: true\n      healthTimeout: 10\n      requiredAcks: 1\n      minPartitionCount: 1\n      replicationFactor: 1\n      headerMapperBeanName: customHeaderMapper\n    bindings:\n      command-my-setup-input-channel:\n        consumer:\n          autoCommitOffset: false\n          batch-mode: true\n          startOffset: earliest\n          resetOffsets: true\n          converter-bean-name: batchConverter\n          ackMode: manual\n          idleBetweenPolls: 90000 # not working\n          configuration:\n            heartbeat.interval.ms: 1000\n            max.poll.records: 2\n            max.poll.interval.ms: 890000\n            value.deserializer: com.xpto.MySetupDTODeserializer\n  bindings:\n    command-my-setup-input-channel:\n      destination: command.my.setup\n      content-type: application/json\n      binder: kafka\n      configuration:\n        value:\n          deserializer: com.xpto.MySetupDTODeserializer\n      consumer:\n        batch-mode: true\n        startOffset: earliest\n        resetOffsets: true\n</code></pre>\n<p><strong>Version:</strong> spring-cloud-stream 3.0.12.RELEASE</p>\n"},{"tags":["java","parallel-processing"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1672749071,"post_id":74993372,"comment_id":132340696,"body_markdown":"&quot;It&#39;s just too slow and I don&#39;t know what to do&quot; just do it in a single thread.","body":"&quot;It&#39;s just too slow and I don&#39;t know what to do&quot; just do it in a single thread."},{"owner":{"account_id":27420572,"reputation":3,"user_id":20919078,"display_name":"Anonymous Student"},"score":0,"creation_date":1672749140,"post_id":74993372,"comment_id":132340718,"body_markdown":"The point of my implementation is to showcase efficiency increases in parallel processing. I&#39;m sure this can be made faster than sequential processing, i&#39;m just stuck in the implementation, and im missing the mistake.","body":"The point of my implementation is to showcase efficiency increases in parallel processing. I&#39;m sure this can be made faster than sequential processing, i&#39;m just stuck in the implementation, and im missing the mistake."},{"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"score":0,"creation_date":1672749181,"post_id":74993372,"comment_id":132340729,"body_markdown":"Why would you implement converting the matrix to a String in a Thread?","body":"Why would you implement converting the matrix to a String in a Thread?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1672749224,"post_id":74993372,"comment_id":132340750,"body_markdown":"&quot;to showcase efficiency increases in parallel processing&quot; perhaps this shows that such a conclusion is incorrect?","body":"&quot;to showcase efficiency increases in parallel processing&quot; perhaps this shows that such a conclusion is incorrect?"},{"owner":{"account_id":27420572,"reputation":3,"user_id":20919078,"display_name":"Anonymous Student"},"score":0,"creation_date":1672749279,"post_id":74993372,"comment_id":132340770,"body_markdown":"Why not? I can split the matrix into blocks, each can be converted to a string in parallel, i can get the string faster.","body":"Why not? I can split the matrix into blocks, each can be converted to a string in parallel, i can get the string faster."},{"owner":{"account_id":27420572,"reputation":3,"user_id":20919078,"display_name":"Anonymous Student"},"score":0,"creation_date":1672749305,"post_id":74993372,"comment_id":132340776,"body_markdown":"@AndyTurner either you&#39;re correct or my implementation has a mistake :) im not sure which","body":"@AndyTurner either you&#39;re correct or my implementation has a mistake :) im not sure which"},{"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"score":1,"creation_date":1672749329,"post_id":74993372,"comment_id":132340782,"body_markdown":"&quot;Why not&quot; is a silly answer, because, as you saw yourself, it does not get faster.","body":"&quot;Why not&quot; is a silly answer, because, as you saw yourself, it does not get faster."},{"owner":{"account_id":27420572,"reputation":3,"user_id":20919078,"display_name":"Anonymous Student"},"score":0,"creation_date":1672749370,"post_id":74993372,"comment_id":132340799,"body_markdown":"I understand it&#39;s not faster, i&#39;m just not sure if that is because it cannot be made faster, or i am making a mistake in the logic of the code, hence me coming here to ask.","body":"I understand it&#39;s not faster, i&#39;m just not sure if that is because it cannot be made faster, or i am making a mistake in the logic of the code, hence me coming here to ask."},{"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"score":0,"creation_date":1672749386,"post_id":74993372,"comment_id":132340803,"body_markdown":"Did you measure where, in the single threaded version, the cpu / io / memory bottleneck is? You can&#39;t make something faster if you don&#39;t understand what it is that makes it &#39;slow&#39;","body":"Did you measure where, in the single threaded version, the cpu / io / memory bottleneck is? You can&#39;t make something faster if you don&#39;t understand what it is that makes it &#39;slow&#39;"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1672749492,"post_id":74993372,"comment_id":132340846,"body_markdown":"@AnonymousStudent &quot;*i&#39;m just not sure if that is because it cannot be made faster or...*&quot; You literally said before &quot;*I&#39;m sure this can be made faster*&quot;.","body":"@AnonymousStudent &quot;<i>i&#39;m just not sure if that is because it cannot be made faster or...</i>&quot; You literally said before &quot;<i>I&#39;m sure this can be made faster</i>&quot;."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1672749595,"post_id":74993372,"comment_id":132340879,"body_markdown":"All of this latching stuff seems wildly complicated. _Assuming some threading is needed_, I would just use an `ExecutorService`, create a bunch of `Callable&lt;String&gt;`s and submit, wait for all of them all to be done, then concatenate. But it seems like a totally trivial thing that is best done in a single thread, and multithreading is just sledgehammer/walnut.","body":"All of this latching stuff seems wildly complicated. <i>Assuming some threading is needed</i>, I would just use an <code>ExecutorService</code>, create a bunch of <code>Callable&lt;String&gt;</code>s and submit, wait for all of them all to be done, then concatenate. But it seems like a totally trivial thing that is best done in a single thread, and multithreading is just sledgehammer/walnut."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1672750563,"post_id":74993372,"comment_id":132341177,"body_markdown":"As Andy already suggested you could try to do the concatenation in the end, especially since order matters. That means you shouldn&#39;t have all threads wait until it&#39;s their turn but rather return the blocks along with their index and concatenate them in the main thread. This is very similar to having an ordered collector on a parallel stream instead of trying to have a synchronized reduce operation, in fact you could try to express your operation that way.","body":"As Andy already suggested you could try to do the concatenation in the end, especially since order matters. That means you shouldn&#39;t have all threads wait until it&#39;s their turn but rather return the blocks along with their index and concatenate them in the main thread. This is very similar to having an ordered collector on a parallel stream instead of trying to have a synchronized reduce operation, in fact you could try to express your operation that way."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1672754760,"post_id":74993372,"comment_id":132342519,"body_markdown":"One more thing on your tests: at a certain point printing to the console might outweigh the conversion code so no matter your approach you might not be seeing much difference. On the other hand, smaller matrices would lead to less room for optimization so less difference there as well (or as was commented thread overhead might even worsen it). So try to do the comparisons without the printing.","body":"One more thing on your tests: at a certain point printing to the console might outweigh the conversion code so no matter your approach you might not be seeing much difference. On the other hand, smaller matrices would lead to less room for optimization so less difference there as well (or as was commented thread overhead might even worsen it). So try to do the comparisons without the printing."},{"owner":{"account_id":27420572,"reputation":3,"user_id":20919078,"display_name":"Anonymous Student"},"score":0,"creation_date":1672755772,"post_id":74993372,"comment_id":132342872,"body_markdown":"The comparisons without the printing are much improved with parallel implementation. However, i found that concatinating a string and than printing only that is faster than continually printing, hence ,im just trying to improve the concatenation as much as possible now. I will try both the callable method and the answer by alex r and get back with the results.","body":"The comparisons without the printing are much improved with parallel implementation. However, i found that concatinating a string and than printing only that is faster than continually printing, hence ,im just trying to improve the concatenation as much as possible now. I will try both the callable method and the answer by alex r and get back with the results."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1672763974,"post_id":74993372,"comment_id":132345673,"body_markdown":"Polling `getCount()` is perverting the purpose of a `CountDownLatch`. Note further that `mainStringBuilder.append(tempStringBuilder.toString());` copies the entire builder contents into a new `String` before appending it to the target builder, copying the contents again doubling the work. Use `mainStringBuilder.append(tempStringBuilder);` instead, without `.toString()`.","body":"Polling <code>getCount()</code> is perverting the purpose of a <code>CountDownLatch</code>. Note further that <code>mainStringBuilder.append(tempStringBuilder.toString());</code> copies the entire builder contents into a new <code>String</code> before appending it to the target builder, copying the contents again doubling the work. Use <code>mainStringBuilder.append(tempStringBuilder);</code> instead, without <code>.toString()</code>."}],"answers":[{"tags":[],"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672750814,"creation_date":1672750814,"answer_id":74993702,"question_id":74993372,"body_markdown":"You really shouldn&#39;t expect to see a performance increase for small matrices. There is some overhead involved by using threads and you should have some proper benchmarks to measure any performance changes.\r\n\r\nIn any case, if you want to try parallelizing your operations, you can try out parallel streams to map your `int[]` rows to strings. According to the [package summary](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/package-summary.html) and the specification of [Stream#collect](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.stream.Collector)) that should not change the result as the Collector returned by `Collectors.joining` is not concurrent.\r\n\r\n&gt; Except for operations identified as explicitly nondeterministic, such as findAny(), whether a stream executes sequentially or in parallel should not change the result of the computation. \r\n\r\n&gt; If the stream is parallel, and the Collector is concurrent, and either the stream is unordered or the collector is unordered, then a concurrent reduction will be performed (see Collector for details on concurrent reduction.)\r\n\r\n```java\r\nfinal int[][] matrix = {\r\n        {1, 0, 1, 0},\r\n        {0, 0, 0, 1}\r\n};\r\n\r\nString collect = Arrays.stream(matrix).parallel()\r\n        .map(ints -&gt; Arrays.stream(ints)\r\n                .mapToObj(value -&gt; value == 1 ? &quot;*&quot; : &quot;.&quot;)\r\n                .collect(Collectors.joining(&quot; &quot;, &quot;|&quot;, &quot;|&quot;))\r\n        )\r\n        .collect(Collectors.joining(&quot;\\n&quot;));\r\nSystem.out.println(collect);\r\n```\r\n\r\n**OUTPUT:**\r\n\r\n```text\r\n|* . * .|\r\n|. . . *|\r\n```","title":"Parallel, ordered stringbuilding in Java is being less efficient than sequential implementation","body":"<p>You really shouldn't expect to see a performance increase for small matrices. There is some overhead involved by using threads and you should have some proper benchmarks to measure any performance changes.</p>\n<p>In any case, if you want to try parallelizing your operations, you can try out parallel streams to map your <code>int[]</code> rows to strings. According to the <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\">package summary</a> and the specification of <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.stream.Collector)\" rel=\"nofollow noreferrer\">Stream#collect</a> that should not change the result as the Collector returned by <code>Collectors.joining</code> is not concurrent.</p>\n<blockquote>\n<p>Except for operations identified as explicitly nondeterministic, such as findAny(), whether a stream executes sequentially or in parallel should not change the result of the computation.</p>\n</blockquote>\n<blockquote>\n<p>If the stream is parallel, and the Collector is concurrent, and either the stream is unordered or the collector is unordered, then a concurrent reduction will be performed (see Collector for details on concurrent reduction.)</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>final int[][] matrix = {\n        {1, 0, 1, 0},\n        {0, 0, 0, 1}\n};\n\nString collect = Arrays.stream(matrix).parallel()\n        .map(ints -&gt; Arrays.stream(ints)\n                .mapToObj(value -&gt; value == 1 ? &quot;*&quot; : &quot;.&quot;)\n                .collect(Collectors.joining(&quot; &quot;, &quot;|&quot;, &quot;|&quot;))\n        )\n        .collect(Collectors.joining(&quot;\\n&quot;));\nSystem.out.println(collect);\n</code></pre>\n<p><strong>OUTPUT:</strong></p>\n<pre><code>|* . * .|\n|. . . *|\n</code></pre>\n"}],"owner":{"account_id":27420572,"reputation":3,"user_id":20919078,"display_name":"Anonymous Student"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74993702,"answer_count":1,"score":0,"last_activity_date":1672761523,"creation_date":1672748886,"question_id":74993372,"body_markdown":"I have an int[][] matrix which updates continually in a while{} loop. After each iteration, I want to print the new values of the matrix to the CLI. I&#39;m writing a parallel version of this loop, so I need to print somehow in parallel. Obviously the order of printing matters... But I&#39;m having issues in testing with the current implementation.It&#39;s just too slow and I don&#39;t know what to do.\r\n\r\nThe while loop:\r\n```\r\nint numbOfBlocks = Runtime.getRuntime().availableProcessors();\r\nint blockSize = matrix.length/numbOfBlocks;\r\nint endRow;\r\n\r\nwhile(true) {\r\n   // print matrix to CLI\r\n\r\n   StringBuilder stringBuilder = new StringBuilder();\r\n   CountDownLatch stringBuilderLatch = new CountDownLatch(numbOfBlocks);\r\n\r\n   for (int i = 0; i &lt; numbOfBlocks; i++) {\r\n      endRow = (i == numbOfBlocks - 1) ? rows : (i+1) * blockSize;\r\n      StringBuilderThread stringBuilderThread =\r\n            new StringBuilderThread(matrix, i*blockSize, endRow, stringBuilderLatch, stringBuilder, i, numbOfBlocks);\r\n      executor.execute(stringBuilderThread);\r\n   }\r\n   stringBuilderLatch.await();\r\n\r\n   stringBuilder.append(&quot;___&quot;);\r\n   System.out.println(stringBuilder.toString());\r\n}\r\n```\r\n\r\nThe StringBuilderThread:\r\n\r\n```\r\nimport java.util.concurrent.CountDownLatch;\r\n\r\npublic class StringBuilderThread implements Runnable {\r\n\r\n    private int[][] matrixUpd;\r\n    private int startRow;\r\n    private int endRow;\r\n    private CountDownLatch latch;\r\n    private StringBuilder mainStringBuilder;\r\n    private int order;\r\n    private int numbOfBlocks;\r\n\r\n    public StringBuilderThread(int[][] matrixUpd,\r\n                               int startRow,\r\n                               int endRow,\r\n                               CountDownLatch latch,\r\n                               StringBuilder mainStringBuilder,\r\n                               int order,\r\n                               int numbOfBlocks) {\r\n        this.matrixUpd = matrixUpd;\r\n        this.startRow = startRow;\r\n        this.endRow = endRow;\r\n        this.latch = latch;\r\n        this.mainStringBuilder = mainStringBuilder;\r\n        this.order = order;\r\n        this.numbOfBlocks = numbOfBlocks;\r\n    }\r\n    @Override\r\n    public void run() {\r\n        StringBuilder tempStringBuilder = new StringBuilder();\r\n        int cols = matrixUpd[0].length;\r\n        for (int i = startRow; i &lt; endRow; i++) {\r\n            tempStringBuilder.append(&quot;|&quot;);\r\n            for (int j = 0; j &lt; cols; j++) {\r\n                if(matrixUpd[i][j] == 1) {\r\n                    tempStringBuilder.append(&quot;*  &quot;);\r\n                } else {\r\n                    tempStringBuilder.append(&quot;.  &quot;);\r\n                }\r\n            }\r\n            tempStringBuilder.append(&quot;|\\n&quot;);\r\n        }\r\n        tempStringBuilder.append(&quot; &quot;);\r\n\r\n        // order synchronization, so that threads write to stringbuilders in correct order\r\n        long latchCount = latch.getCount();\r\n        while (!(numbOfBlocks-latchCount == order)) {\r\n            latchCount = latch.getCount();\r\n        }\r\n        mainStringBuilder.append(tempStringBuilder.toString());\r\n        latch.countDown();\r\n    }\r\n}\r\n```\r\nThe issue is, this implementation is actually slower than just printing to CLI sequentially. I suspect the latch is the issue, as multiple threads keep trying to access it, so the threads that actually need it have to wait. \r\n\r\nEverything else in my program runs 2x-3x faster in parallel, except this, and it bottlenecking my program.\r\n\r\nEDIT:\r\n\r\nI tested 3 solutions:\r\n 1. Sequential printing\r\n 2. Parallel stringbuilding with Callables, then printing the string\r\n 3. Parallel stringbuilding with array streams, as suggested by the accepted answer\r\n\r\nThe results were tested using matrices of dimentions:\r\n 1. 200x200, for 100 iterations\r\n 2. 1000x1000, for 100 iterations\r\n 3. 2000x2000, for 200 iterations\r\n 4. 4000x4000, for 200 iterations\r\n\r\nArray parallel streams had the best performance in every test and were the simplest to implement.\r\n\r\nThank you for your help.\r\n\r\n","title":"Parallel, ordered stringbuilding in Java is being less efficient than sequential implementation","body":"<p>I have an int[][] matrix which updates continually in a while{} loop. After each iteration, I want to print the new values of the matrix to the CLI. I'm writing a parallel version of this loop, so I need to print somehow in parallel. Obviously the order of printing matters... But I'm having issues in testing with the current implementation.It's just too slow and I don't know what to do.</p>\n<p>The while loop:</p>\n<pre><code>int numbOfBlocks = Runtime.getRuntime().availableProcessors();\nint blockSize = matrix.length/numbOfBlocks;\nint endRow;\n\nwhile(true) {\n   // print matrix to CLI\n\n   StringBuilder stringBuilder = new StringBuilder();\n   CountDownLatch stringBuilderLatch = new CountDownLatch(numbOfBlocks);\n\n   for (int i = 0; i &lt; numbOfBlocks; i++) {\n      endRow = (i == numbOfBlocks - 1) ? rows : (i+1) * blockSize;\n      StringBuilderThread stringBuilderThread =\n            new StringBuilderThread(matrix, i*blockSize, endRow, stringBuilderLatch, stringBuilder, i, numbOfBlocks);\n      executor.execute(stringBuilderThread);\n   }\n   stringBuilderLatch.await();\n\n   stringBuilder.append(&quot;___&quot;);\n   System.out.println(stringBuilder.toString());\n}\n</code></pre>\n<p>The StringBuilderThread:</p>\n<pre><code>import java.util.concurrent.CountDownLatch;\n\npublic class StringBuilderThread implements Runnable {\n\n    private int[][] matrixUpd;\n    private int startRow;\n    private int endRow;\n    private CountDownLatch latch;\n    private StringBuilder mainStringBuilder;\n    private int order;\n    private int numbOfBlocks;\n\n    public StringBuilderThread(int[][] matrixUpd,\n                               int startRow,\n                               int endRow,\n                               CountDownLatch latch,\n                               StringBuilder mainStringBuilder,\n                               int order,\n                               int numbOfBlocks) {\n        this.matrixUpd = matrixUpd;\n        this.startRow = startRow;\n        this.endRow = endRow;\n        this.latch = latch;\n        this.mainStringBuilder = mainStringBuilder;\n        this.order = order;\n        this.numbOfBlocks = numbOfBlocks;\n    }\n    @Override\n    public void run() {\n        StringBuilder tempStringBuilder = new StringBuilder();\n        int cols = matrixUpd[0].length;\n        for (int i = startRow; i &lt; endRow; i++) {\n            tempStringBuilder.append(&quot;|&quot;);\n            for (int j = 0; j &lt; cols; j++) {\n                if(matrixUpd[i][j] == 1) {\n                    tempStringBuilder.append(&quot;*  &quot;);\n                } else {\n                    tempStringBuilder.append(&quot;.  &quot;);\n                }\n            }\n            tempStringBuilder.append(&quot;|\\n&quot;);\n        }\n        tempStringBuilder.append(&quot; &quot;);\n\n        // order synchronization, so that threads write to stringbuilders in correct order\n        long latchCount = latch.getCount();\n        while (!(numbOfBlocks-latchCount == order)) {\n            latchCount = latch.getCount();\n        }\n        mainStringBuilder.append(tempStringBuilder.toString());\n        latch.countDown();\n    }\n}\n</code></pre>\n<p>The issue is, this implementation is actually slower than just printing to CLI sequentially. I suspect the latch is the issue, as multiple threads keep trying to access it, so the threads that actually need it have to wait.</p>\n<p>Everything else in my program runs 2x-3x faster in parallel, except this, and it bottlenecking my program.</p>\n<p>EDIT:</p>\n<p>I tested 3 solutions:</p>\n<ol>\n<li>Sequential printing</li>\n<li>Parallel stringbuilding with Callables, then printing the string</li>\n<li>Parallel stringbuilding with array streams, as suggested by the accepted answer</li>\n</ol>\n<p>The results were tested using matrices of dimentions:</p>\n<ol>\n<li>200x200, for 100 iterations</li>\n<li>1000x1000, for 100 iterations</li>\n<li>2000x2000, for 200 iterations</li>\n<li>4000x4000, for 200 iterations</li>\n</ol>\n<p>Array parallel streams had the best performance in every test and were the simplest to implement.</p>\n<p>Thank you for your help.</p>\n"},{"tags":["java","spring-boot","unit-testing","junit","h2"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1672436800,"post_id":74965883,"comment_id":132291307,"body_markdown":"To my eyes dialect looks fishy. You are using AutoConfigureTestDatabase (DataJpaTest pulls it in as well), hence you are using h2 with default mode, but you pick postgres dialect.","body":"To my eyes dialect looks fishy. You are using AutoConfigureTestDatabase (DataJpaTest pulls it in as well), hence you are using h2 with default mode, but you pick postgres dialect."},{"owner":{"account_id":22458949,"reputation":23,"user_id":16661219,"display_name":"Matthew Lindow"},"score":0,"creation_date":1672437292,"post_id":74965883,"comment_id":132291397,"body_markdown":"I did not know I could do that. How do I do that? @Lesiak","body":"I did not know I could do that. How do I do that? @Lesiak"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1672437894,"post_id":74965883,"comment_id":132291501,"body_markdown":"Sorry mate, I dont get your question. Do what? I was referring to `spring.jpa.properties.hibernate.dialect` property - have you tried with h2 dialect?","body":"Sorry mate, I dont get your question. Do what? I was referring to <code>spring.jpa.properties.hibernate.dialect</code> property - have you tried with h2 dialect?"},{"owner":{"account_id":22458949,"reputation":23,"user_id":16661219,"display_name":"Matthew Lindow"},"score":0,"creation_date":1672438837,"post_id":74965883,"comment_id":132291665,"body_markdown":"I haven&#39;t, I don&#39;t know how.","body":"I haven&#39;t, I don&#39;t know how."},{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1672487479,"post_id":74965883,"comment_id":132297268,"body_markdown":"Can you please share Employee entity class as well?","body":"Can you please share Employee entity class as well?"}],"answers":[{"tags":[],"owner":{"account_id":22458949,"reputation":23,"user_id":16661219,"display_name":"Matthew Lindow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672760945,"creation_date":1672760945,"answer_id":74995597,"question_id":74965883,"body_markdown":"I resolved this issue by fixing an error in my `application-test`.\r\n```\r\n##### Database #####\r\nspring.datasource.url=jdbc:h2://mem:db;DB_CLOSE_DELAY=-1\r\nspring.datasource.username=sa\r\nspring.datasource.password=sa\r\nspring.datasource.driver-class-name=org.h2.Driver\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect\r\n```\r\nThe `spring.jpa.properties.hibernate.dialect` needed to be set to the H2Dialect rather than the PostgreSQLDialect. \r\nThis was as @Lesiak suspected.","title":"org.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet;","body":"<p>I resolved this issue by fixing an error in my <code>application-test</code>.</p>\n<pre><code>##### Database #####\nspring.datasource.url=jdbc:h2://mem:db;DB_CLOSE_DELAY=-1\nspring.datasource.username=sa\nspring.datasource.password=sa\nspring.datasource.driver-class-name=org.h2.Driver\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect\n</code></pre>\n<p>The <code>spring.jpa.properties.hibernate.dialect</code> needed to be set to the H2Dialect rather than the PostgreSQLDialect.\nThis was as @Lesiak suspected.</p>\n"}],"owner":{"account_id":22458949,"reputation":23,"user_id":16661219,"display_name":"Matthew Lindow"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":533,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672760945,"creation_date":1672435252,"question_id":74965883,"body_markdown":"I am writing a unit test for a custom query in my repository in Spring. I am using an h2 in-memory database to create an employee and perform an assertion on that employee which should be returned from the custom query. \r\nWhen I call the save method from my repository the following error is thrown:\r\n\r\n```\r\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n```\r\n\r\nI will include my pom.xml as well as the code for my repository and test. \r\n\r\nUnit Test\r\n```\r\npackage com.stg.mlindow.javabootrestcert.stgbootrestcert.employee;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.test.context.ActiveProfiles;\r\nimport org.springframework.test.context.TestPropertySource;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static org.junit.jupiter.api.Assertions.*;\r\n\r\n\r\n@AutoConfigureTestDatabase\r\n@ActiveProfiles(&quot;test&quot;)\r\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\n@DataJpaTest\r\nclass EmployeeRepositoryTest {\r\n\r\n    @Autowired\r\n    private EmployeeRepository employeeRepository;\r\n\r\n    @Test\r\n    void findAllByBossId() {\r\n        Employee employee = new Employee(\r\n                &quot;CEO&quot;,\r\n                &quot;Bruce&quot;,\r\n                &quot;Wayne&quot;,\r\n                null\r\n        );\r\n        employeeRepository.save(employee);\r\n\r\n        List&lt;Employee&gt; employees = employeeRepository.findAllByBossId(null);\r\n        List&lt;Employee&gt; expected = new ArrayList&lt;Employee&gt;() {\r\n            {\r\n                add(employee);\r\n            }\r\n        };\r\n\r\n        assertIterableEquals(expected, employees);\r\n    }\r\n}\r\n```\r\nPom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n   &lt;parent&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n      &lt;version&gt;2.7.7&lt;/version&gt;\r\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n   &lt;/parent&gt;\r\n   &lt;groupId&gt;com.stg.mlindow.javabootrestcert&lt;/groupId&gt;\r\n   &lt;artifactId&gt;stg-boot-rest-cert&lt;/artifactId&gt;\r\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n   &lt;name&gt;stg-boot-rest-cert&lt;/name&gt;\r\n   &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n   &lt;properties&gt;\r\n      &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n   &lt;/properties&gt;\r\n   &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n         &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n         &lt;scope&gt;runtime&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n         &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n         &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n         &lt;version&gt;2.3.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n         &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n         &lt;version&gt;0.9.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n         &lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n         &lt;version&gt;23.1.0&lt;/version&gt;\r\n         &lt;scope&gt;compile&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n\r\n   &lt;build&gt;\r\n      &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n         &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n   &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\napplication-test.properties\r\n\r\n```\r\n##### Database #####\r\nspring.datasource.url=jdbc:h2://mem:db;DB_CLOSE_DELAY=-1\r\nspring.datasource.username=sa\r\nspring.datasource.password=sa\r\nspring.datasource.driver-class-name=org.h2.Driver\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL81Dialect\r\n```\r\nRepository\r\n\r\n```\r\npackage com.stg.mlindow.javabootrestcert.stgbootrestcert.employee;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.repository.PagingAndSortingRepository;\r\nimport org.springframework.stereotype.Repository;\r\nimport java.math.BigInteger;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\n@Repository\r\npublic interface EmployeeRepository extends JpaRepository&lt;Employee, BigInteger&gt;,\r\n        PagingAndSortingRepository&lt;Employee, BigInteger&gt; {\r\n    List&lt;Employee&gt; findAllByBossId(BigInteger bossId);\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nI have tried the suggestion in [this question](https://stackoverflow.com/questions/43952590/org-springframework-dao-invaliddataaccessresourceusageexception-could-not-extra) but it did not fix my problem. I was expecting the test to create an Employee and then try to retrieve that newly created employee from the h2 database by boss id. Then it would assert that the 2 lists are equal.","title":"org.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet;","body":"<p>I am writing a unit test for a custom query in my repository in Spring. I am using an h2 in-memory database to create an employee and perform an assertion on that employee which should be returned from the custom query.\nWhen I call the save method from my repository the following error is thrown:</p>\n<pre><code>org.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n</code></pre>\n<p>I will include my pom.xml as well as the code for my repository and test.</p>\n<p>Unit Test</p>\n<pre><code>package com.stg.mlindow.javabootrestcert.stgbootrestcert.employee;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.test.context.TestPropertySource;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\n\n@AutoConfigureTestDatabase\n@ActiveProfiles(&quot;test&quot;)\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\n@DataJpaTest\nclass EmployeeRepositoryTest {\n\n    @Autowired\n    private EmployeeRepository employeeRepository;\n\n    @Test\n    void findAllByBossId() {\n        Employee employee = new Employee(\n                &quot;CEO&quot;,\n                &quot;Bruce&quot;,\n                &quot;Wayne&quot;,\n                null\n        );\n        employeeRepository.save(employee);\n\n        List&lt;Employee&gt; employees = employeeRepository.findAllByBossId(null);\n        List&lt;Employee&gt; expected = new ArrayList&lt;Employee&gt;() {\n            {\n                add(employee);\n            }\n        };\n\n        assertIterableEquals(expected, employees);\n    }\n}\n</code></pre>\n<p>Pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;parent&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n      &lt;version&gt;2.7.7&lt;/version&gt;\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n   &lt;/parent&gt;\n   &lt;groupId&gt;com.stg.mlindow.javabootrestcert&lt;/groupId&gt;\n   &lt;artifactId&gt;stg-boot-rest-cert&lt;/artifactId&gt;\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n   &lt;name&gt;stg-boot-rest-cert&lt;/name&gt;\n   &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n   &lt;properties&gt;\n      &lt;java.version&gt;1.8&lt;/java.version&gt;\n   &lt;/properties&gt;\n   &lt;dependencies&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n         &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n         &lt;scope&gt;runtime&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n         &lt;artifactId&gt;h2&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n         &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n         &lt;version&gt;2.3.1&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n         &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n         &lt;version&gt;0.9.1&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n         &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n         &lt;version&gt;23.1.0&lt;/version&gt;\n         &lt;scope&gt;compile&lt;/scope&gt;\n      &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n\n   &lt;build&gt;\n      &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n         &lt;/plugin&gt;\n      &lt;/plugins&gt;\n   &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>application-test.properties</p>\n<pre><code>##### Database #####\nspring.datasource.url=jdbc:h2://mem:db;DB_CLOSE_DELAY=-1\nspring.datasource.username=sa\nspring.datasource.password=sa\nspring.datasource.driver-class-name=org.h2.Driver\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL81Dialect\n</code></pre>\n<p>Repository</p>\n<pre><code>package com.stg.mlindow.javabootrestcert.stgbootrestcert.employee;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.repository.PagingAndSortingRepository;\nimport org.springframework.stereotype.Repository;\nimport java.math.BigInteger;\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\npublic interface EmployeeRepository extends JpaRepository&lt;Employee, BigInteger&gt;,\n        PagingAndSortingRepository&lt;Employee, BigInteger&gt; {\n    List&lt;Employee&gt; findAllByBossId(BigInteger bossId);\n}\n\n</code></pre>\n<p>I have tried the suggestion in <a href=\"https://stackoverflow.com/questions/43952590/org-springframework-dao-invaliddataaccessresourceusageexception-could-not-extra\">this question</a> but it did not fix my problem. I was expecting the test to create an Employee and then try to retrieve that newly created employee from the h2 database by boss id. Then it would assert that the 2 lists are equal.</p>\n"},{"tags":["java","apache-camel","prometheus","metrics","micrometer"],"owner":{"account_id":25080079,"reputation":27,"user_id":18932947,"display_name":"Alexxxx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672760437,"creation_date":1672760437,"question_id":74995507,"body_markdown":"I have a Camel Springboot application that makes rest request with a Camel route like this:\r\n\r\n    from(&quot;direct:rest-request&quot;)\r\n        .routeId(&quot;rest-get-route&quot;)\r\n        .log(&quot;calling the rest service&quot;)\r\n        .to(&quot;rest:post:localhost:8081&quot;)\r\n\r\nIn the pom.xml there are all the dependencies:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;camel-http-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;${camel.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;camel-servlet-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;${camel.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;camel-rest-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;${camel.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;camel-metrics-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;${camel.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;camel-micrometer-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;${camel.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand in the application.yml there are these properties:\r\n\r\n    camel:\r\n      component:\r\n        metrics:\r\n          enabled: true\r\n          metric-registry: prometheusMeterRegistry\r\n\r\n    management:\r\n      endpoint:\r\n        health:\r\n          show-details: ALWAYS\r\n      endpoints:\r\n        web:\r\n          exposure:\r\n            include: &#39;health,prometheus&#39;\r\n      metrics:\r\n        web:\r\n          client:\r\n            request:\r\n              autotime:\r\n                enabled: true\r\n\r\nDo somebody know why I can&#39;t see the metrics **http_client_requests_second** with a get request to http://localhost:8080/actuator/prometheus but i get only the **http_server_requests_second**?","title":"Prometheus http_client_requests_second in Apache Camel Springboot Application","body":"<p>I have a Camel Springboot application that makes rest request with a Camel route like this:</p>\n<pre><code>from(&quot;direct:rest-request&quot;)\n    .routeId(&quot;rest-get-route&quot;)\n    .log(&quot;calling the rest service&quot;)\n    .to(&quot;rest:post:localhost:8081&quot;)\n</code></pre>\n<p>In the pom.xml there are all the dependencies:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n    &lt;artifactId&gt;camel-http-starter&lt;/artifactId&gt;\n    &lt;version&gt;${camel.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n    &lt;artifactId&gt;camel-servlet-starter&lt;/artifactId&gt;\n    &lt;version&gt;${camel.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n    &lt;artifactId&gt;camel-rest-starter&lt;/artifactId&gt;\n    &lt;version&gt;${camel.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n    &lt;artifactId&gt;camel-metrics-starter&lt;/artifactId&gt;\n    &lt;version&gt;${camel.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n    &lt;artifactId&gt;camel-micrometer-starter&lt;/artifactId&gt;\n    &lt;version&gt;${camel.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and in the application.yml there are these properties:</p>\n<pre><code>camel:\n  component:\n    metrics:\n      enabled: true\n      metric-registry: prometheusMeterRegistry\n\nmanagement:\n  endpoint:\n    health:\n      show-details: ALWAYS\n  endpoints:\n    web:\n      exposure:\n        include: 'health,prometheus'\n  metrics:\n    web:\n      client:\n        request:\n          autotime:\n            enabled: true\n</code></pre>\n<p>Do somebody know why I can't see the metrics <strong>http_client_requests_second</strong> with a get request to http://localhost:8080/actuator/prometheus but i get only the <strong>http_server_requests_second</strong>?</p>\n"},{"tags":["java","arrays","json","parsing"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1672433401,"post_id":74965664,"comment_id":132290721,"body_markdown":"You should read the object first and check its type. E.g. if its an instance of `Map` or `JSONObject`, then it&#39;s a json object `{ ... }`. If it&#39;s a type of `List` / `JSONArray`, then it&#39;s a json series `[ ... ]`. If you want to handle both cases, then you&#39;ll need to explicitly do so in your code (and not just cast right away).","body":"You should read the object first and check its type. E.g. if its an instance of <code>Map</code> or <code>JSONObject</code>, then it&#39;s a json object <code>{ ... }</code>. If it&#39;s a type of <code>List</code> / <code>JSONArray</code>, then it&#39;s a json series <code>[ ... ]</code>. If you want to handle both cases, then you&#39;ll need to explicitly do so in your code (and not just cast right away)."},{"owner":{"account_id":10808339,"reputation":1271,"user_id":7949704,"display_name":"Alejandro Gonzalez"},"score":0,"creation_date":1672433559,"post_id":74965664,"comment_id":132290755,"body_markdown":"you can use google json, do you know as working it ?","body":"you can use google json, do you know as working it ?"}],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672510199,"creation_date":1672510199,"answer_id":74971327,"question_id":74965664,"body_markdown":"If you don&#39;t want to hardcode for different JSON structure, the solution is to use JSON query library.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n__Deserialize Array__\r\n\r\n    Josson array = Josson.fromJsonString(\r\n        &quot;[&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;id\\&quot;: \\&quot;0001\\&quot;,&quot; +\r\n        &quot;        \\&quot;type\\&quot;: \\&quot;donut\\&quot;,&quot; +\r\n        &quot;        \\&quot;name\\&quot;: \\&quot;Cake\\&quot;,&quot; +\r\n        &quot;        \\&quot;ppu\\&quot;: 0.55,&quot; +\r\n        &quot;        \\&quot;days\\&quot;: {&quot; +\r\n        &quot;            \\&quot;weekdays\\&quot;: \\&quot;Friday\\&quot;,&quot; +\r\n        &quot;            \\&quot;weekends\\&quot;: \\&quot;Sunday\\&quot;&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        \\&quot;batters\\&quot;: {&quot; +\r\n        &quot;            \\&quot;batter\\&quot;: [&quot; +\r\n        &quot;                {&quot; +\r\n        &quot;                    \\&quot;id\\&quot;: \\&quot;1001\\&quot;,&quot; +\r\n        &quot;                    \\&quot;type\\&quot;: \\&quot;Regular\\&quot;&quot; +\r\n        &quot;                },&quot; +\r\n        &quot;                {&quot; +\r\n        &quot;                    \\&quot;id\\&quot;: \\&quot;1002\\&quot;,&quot; +\r\n        &quot;                    \\&quot;type\\&quot;: \\&quot;Chocolate\\&quot;&quot; +\r\n        &quot;                }&quot; +\r\n        &quot;            ]&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        \\&quot;topping\\&quot;: [&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;id\\&quot;: \\&quot;5001\\&quot;,&quot; +\r\n        &quot;                \\&quot;type\\&quot;: \\&quot;None\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;id\\&quot;: \\&quot;5002\\&quot;,&quot; +\r\n        &quot;                \\&quot;type\\&quot;: \\&quot;Glazed\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        ]&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;        \\&quot;batters\\&quot;: {&quot; +\r\n        &quot;            \\&quot;batter\\&quot;: [&quot; +\r\n        &quot;                {&quot; +\r\n        &quot;                    \\&quot;id\\&quot;: \\&quot;1003\\&quot;,&quot; +\r\n        &quot;                    \\&quot;type\\&quot;: \\&quot;Special\\&quot;&quot; +\r\n        &quot;                },&quot; +\r\n        &quot;                {&quot; +\r\n        &quot;                    \\&quot;id\\&quot;: \\&quot;1004\\&quot;,&quot; +\r\n        &quot;                    \\&quot;type\\&quot;: \\&quot;DarkChocolate\\&quot;&quot; +\r\n        &quot;                }&quot; +\r\n        &quot;            ]&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;]&quot;);\r\n\r\n__Deserialize Object__\r\n\r\n    Josson object = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;id\\&quot;: \\&quot;0001\\&quot;,&quot; +\r\n        &quot;    \\&quot;type\\&quot;: \\&quot;donut\\&quot;,&quot; +\r\n        &quot;    \\&quot;name\\&quot;: \\&quot;Cake\\&quot;,&quot; +\r\n        &quot;    \\&quot;ppu\\&quot;: 0.55,&quot; +\r\n        &quot;    \\&quot;days\\&quot;: {&quot; +\r\n        &quot;        \\&quot;weekdays\\&quot;: \\&quot;Friday\\&quot;,&quot; +\r\n        &quot;        \\&quot;weekends\\&quot;: \\&quot;Sunday\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    \\&quot;batters\\&quot;: {&quot; +\r\n        &quot;        \\&quot;batter\\&quot;: [&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;id\\&quot;: \\&quot;1001\\&quot;,&quot; +\r\n        &quot;                \\&quot;type\\&quot;: \\&quot;Regular\\&quot;&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            {&quot; +\r\n        &quot;                \\&quot;id\\&quot;: \\&quot;1002\\&quot;,&quot; +\r\n        &quot;                \\&quot;type\\&quot;: \\&quot;Chocolate\\&quot;&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        ]&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    \\&quot;topping\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: \\&quot;5001\\&quot;,&quot; +\r\n        &quot;            \\&quot;type\\&quot;: \\&quot;None\\&quot;&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;id\\&quot;: \\&quot;5002\\&quot;,&quot; +\r\n        &quot;            \\&quot;type\\&quot;: \\&quot;Glazed\\&quot;&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    ]&quot; +\r\n        &quot;}&quot;);\r\n\r\n__Query__\r\n\r\n    System.out.println(array.getString(&quot;batters.batter[0].id&quot;));       // 1001\r\n    System.out.println(object.getString(&quot;batters.batter[0].id&quot;));      // 1001\r\n    System.out.println(array.getString(&quot;batters.batter[1].type&quot;));     // Chocolate\r\n    System.out.println(object.getString(&quot;batters.batter[1].type&quot;));    // Chocolate\r\n    System.out.println(array.getString(&quot;[0].batters.batter[1].id&quot;));   // 1002\r\n    System.out.println(array.getString(&quot;[1].batters.batter[1].type&quot;)); // DarkChocolate\r\n    System.out.println(array.getString(&quot;batters.batter[3].type&quot;));     // DarkChocolate","title":"Read JSON Key Values at run time by passing keys in Java","body":"<p>If you don't want to hardcode for different JSON structure, the solution is to use JSON query library.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Deserialize Array</strong></p>\n<pre><code>Josson array = Josson.fromJsonString(\n    &quot;[&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;id\\&quot;: \\&quot;0001\\&quot;,&quot; +\n    &quot;        \\&quot;type\\&quot;: \\&quot;donut\\&quot;,&quot; +\n    &quot;        \\&quot;name\\&quot;: \\&quot;Cake\\&quot;,&quot; +\n    &quot;        \\&quot;ppu\\&quot;: 0.55,&quot; +\n    &quot;        \\&quot;days\\&quot;: {&quot; +\n    &quot;            \\&quot;weekdays\\&quot;: \\&quot;Friday\\&quot;,&quot; +\n    &quot;            \\&quot;weekends\\&quot;: \\&quot;Sunday\\&quot;&quot; +\n    &quot;        },&quot; +\n    &quot;        \\&quot;batters\\&quot;: {&quot; +\n    &quot;            \\&quot;batter\\&quot;: [&quot; +\n    &quot;                {&quot; +\n    &quot;                    \\&quot;id\\&quot;: \\&quot;1001\\&quot;,&quot; +\n    &quot;                    \\&quot;type\\&quot;: \\&quot;Regular\\&quot;&quot; +\n    &quot;                },&quot; +\n    &quot;                {&quot; +\n    &quot;                    \\&quot;id\\&quot;: \\&quot;1002\\&quot;,&quot; +\n    &quot;                    \\&quot;type\\&quot;: \\&quot;Chocolate\\&quot;&quot; +\n    &quot;                }&quot; +\n    &quot;            ]&quot; +\n    &quot;        },&quot; +\n    &quot;        \\&quot;topping\\&quot;: [&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;id\\&quot;: \\&quot;5001\\&quot;,&quot; +\n    &quot;                \\&quot;type\\&quot;: \\&quot;None\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;id\\&quot;: \\&quot;5002\\&quot;,&quot; +\n    &quot;                \\&quot;type\\&quot;: \\&quot;Glazed\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;        ]&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;        \\&quot;batters\\&quot;: {&quot; +\n    &quot;            \\&quot;batter\\&quot;: [&quot; +\n    &quot;                {&quot; +\n    &quot;                    \\&quot;id\\&quot;: \\&quot;1003\\&quot;,&quot; +\n    &quot;                    \\&quot;type\\&quot;: \\&quot;Special\\&quot;&quot; +\n    &quot;                },&quot; +\n    &quot;                {&quot; +\n    &quot;                    \\&quot;id\\&quot;: \\&quot;1004\\&quot;,&quot; +\n    &quot;                    \\&quot;type\\&quot;: \\&quot;DarkChocolate\\&quot;&quot; +\n    &quot;                }&quot; +\n    &quot;            ]&quot; +\n    &quot;        }&quot; +\n    &quot;    }&quot; +\n    &quot;]&quot;);\n</code></pre>\n<p><strong>Deserialize Object</strong></p>\n<pre><code>Josson object = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;id\\&quot;: \\&quot;0001\\&quot;,&quot; +\n    &quot;    \\&quot;type\\&quot;: \\&quot;donut\\&quot;,&quot; +\n    &quot;    \\&quot;name\\&quot;: \\&quot;Cake\\&quot;,&quot; +\n    &quot;    \\&quot;ppu\\&quot;: 0.55,&quot; +\n    &quot;    \\&quot;days\\&quot;: {&quot; +\n    &quot;        \\&quot;weekdays\\&quot;: \\&quot;Friday\\&quot;,&quot; +\n    &quot;        \\&quot;weekends\\&quot;: \\&quot;Sunday\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    \\&quot;batters\\&quot;: {&quot; +\n    &quot;        \\&quot;batter\\&quot;: [&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;id\\&quot;: \\&quot;1001\\&quot;,&quot; +\n    &quot;                \\&quot;type\\&quot;: \\&quot;Regular\\&quot;&quot; +\n    &quot;            },&quot; +\n    &quot;            {&quot; +\n    &quot;                \\&quot;id\\&quot;: \\&quot;1002\\&quot;,&quot; +\n    &quot;                \\&quot;type\\&quot;: \\&quot;Chocolate\\&quot;&quot; +\n    &quot;            }&quot; +\n    &quot;        ]&quot; +\n    &quot;    },&quot; +\n    &quot;    \\&quot;topping\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;id\\&quot;: \\&quot;5001\\&quot;,&quot; +\n    &quot;            \\&quot;type\\&quot;: \\&quot;None\\&quot;&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;id\\&quot;: \\&quot;5002\\&quot;,&quot; +\n    &quot;            \\&quot;type\\&quot;: \\&quot;Glazed\\&quot;&quot; +\n    &quot;        }&quot; +\n    &quot;    ]&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><strong>Query</strong></p>\n<pre><code>System.out.println(array.getString(&quot;batters.batter[0].id&quot;));       // 1001\nSystem.out.println(object.getString(&quot;batters.batter[0].id&quot;));      // 1001\nSystem.out.println(array.getString(&quot;batters.batter[1].type&quot;));     // Chocolate\nSystem.out.println(object.getString(&quot;batters.batter[1].type&quot;));    // Chocolate\nSystem.out.println(array.getString(&quot;[0].batters.batter[1].id&quot;));   // 1002\nSystem.out.println(array.getString(&quot;[1].batters.batter[1].type&quot;)); // DarkChocolate\nSystem.out.println(array.getString(&quot;batters.batter[3].type&quot;));     // DarkChocolate\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27320686,"reputation":1,"user_id":20834445,"display_name":"SKC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672760416,"creation_date":1672760416,"answer_id":74995499,"question_id":74965664,"body_markdown":"i found easy way for this question.\r\nusing com.fasterxml.jackson , we can pull any any value from JSON ,\r\n\r\n\r\n\r\n    enter code here\r\n     filepath= place where file stored\r\n     nodepath= path of node \r\n        File File = new File(filePath);\r\n\t\tObjectMapper objectMapper = new ObjectMapper();\r\n\t\tJsonNode jsonTree = objectMapper.readTree(File);\r\n\t\tString value = jsonTree.at(nodepath).asText();\r\n\t\treturn value;\r\n\r\n","title":"Read JSON Key Values at run time by passing keys in Java","body":"<p>i found easy way for this question.\nusing com.fasterxml.jackson , we can pull any any value from JSON ,</p>\n<pre><code>enter code here\n filepath= place where file stored\n nodepath= path of node \n    File File = new File(filePath);\n    ObjectMapper objectMapper = new ObjectMapper();\n    JsonNode jsonTree = objectMapper.readTree(File);\n    String value = jsonTree.at(nodepath).asText();\n    return value;\n</code></pre>\n"}],"owner":{"account_id":27320686,"reputation":1,"user_id":20834445,"display_name":"SKC"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":395,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672760416,"creation_date":1672433157,"question_id":74965664,"body_markdown":"I am trying to PARSE Json and pull values based on input key. JSON structure is not same every time \r\nbelow is sample JSON structure and JSON starts and ends with [] and some time {}\r\n```\r\n[\r\n\t{\r\n\t\t&quot;id&quot;: &quot;0001&quot;,\r\n\t\t&quot;type&quot;: &quot;donut&quot;,\r\n\t\t&quot;name&quot;: &quot;Cake&quot;,\r\n\t\t&quot;ppu&quot;: 0.55,\r\n\t\t&quot;days&quot;: {\r\n\t\t\t&quot;weekdays&quot;: &quot;Friday&quot;,\r\n\t\t\t&quot;weekends&quot;: &quot;Sunday&quot;,\r\n\t\t},\r\n\t\t&quot;batters&quot;: {\r\n\t\t\t&quot;batter&quot;: [\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;id&quot;: &quot;1001&quot;,\r\n\t\t\t\t\t&quot;type&quot;: &quot;Regular&quot;\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;id&quot;: &quot;1002&quot;,\r\n\t\t\t\t\t&quot;type&quot;: &quot;Chocolate&quot;\r\n\t\t\t\t},\r\n\t\t\t]\r\n\t\t},\r\n\t\t&quot;topping&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;id&quot;: &quot;5001&quot;,\r\n\t\t\t\t&quot;type&quot;: &quot;None&quot;\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t&quot;id&quot;: &quot;5002&quot;,\r\n\t\t\t\t&quot;type&quot;: &quot;Glazed&quot;\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n]\r\n```\r\n\r\n```\r\n{\r\n\t\t&quot;id&quot;: &quot;0001&quot;,\r\n\t\t&quot;type&quot;: &quot;donut&quot;,\r\n\t\t&quot;name&quot;: &quot;Cake&quot;,\r\n\t\t&quot;ppu&quot;: 0.55,\r\n\t\t&quot;days&quot;: {\r\n\t\t\t&quot;weekdays&quot;: &quot;Friday&quot;,\r\n\t\t\t&quot;weekends&quot;: &quot;Sunday&quot;,\r\n\t\t},\r\n\t\t&quot;batters&quot;: {\r\n\t\t\t&quot;batter&quot;: [\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;id&quot;: &quot;1001&quot;,\r\n\t\t\t\t\t&quot;type&quot;: &quot;Regular&quot;\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;id&quot;: &quot;1002&quot;,\r\n\t\t\t\t\t&quot;type&quot;: &quot;Chocolate&quot;\r\n\t\t\t\t},\r\n\t\t\t]\r\n\t\t},\r\n\t\t&quot;topping&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;id&quot;: &quot;5001&quot;,\r\n\t\t\t\t&quot;type&quot;: &quot;None&quot;\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t&quot;id&quot;: &quot;5002&quot;,\r\n\t\t\t\t&quot;type&quot;: &quot;Glazed&quot;\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n```\r\n\r\ni tried below code\r\n\r\n```\r\nimport org.json.simple.*;\r\nimport org.json.simple.parser.JSONParser;\r\nimport org.json.simple.parser.ParseException;\r\n\r\n\tpublic static void main(String[] args) throws IOException, Exception {\r\n\r\n\t\tFile InputFolder = new File(System.getProperty(&quot;user.dir&quot;) + &quot;//Files//new.json&quot;);\r\n\r\n\t\tJsonElementFromFile(InputFolder,&quot;name&quot;);\t\t\r\n\t}\r\n\r\npublic static void JsonElementFromFile(File FilePath, String key) throws IOException, Exception {\r\n  \r\n   JSONParser parser = new JSONParser();\r\n   FileReader reader = new FileReader(FilePath);\r\n   JSONArray obj = (JSONArray) parser.parse(reader);  \r\n   for (Object o : obj) { \r\n\t  JSONObject json = (JSONObject) o; \r\n\t  String jsonKeyValue = (String)json.get(key).toString(); \r\n\t  System.out.println(key + &quot; : &quot; + jsonKeyValue); }\r\n  \r\n  }\r\n```\r\n\r\n\r\n1. above code works when JSON data start with &quot;[&quot; but not working  if it start with &quot;{&quot; , irrespective of any structure I should be able to get value \r\n2. i am able to pull only value from first object keys &quot;id&quot;,&quot;type&quot;,&quot;name&quot;,&quot;ppu&quot; but when i pass key as &quot;days.weekdays&quot; it is not pulling. even if i have more arrays and objectsi should be able to pull just by passing path of key, ex: &quot;batters.batter[0].id&quot; or &quot;batters.batter[1].type&quot;**\r\n3. basically i am looking for reusable code to pull values based on keys passed, dont want to hardcode any values from JSON.\r\n\r\nthank you \r\n","title":"Read JSON Key Values at run time by passing keys in Java","body":"<p>I am trying to PARSE Json and pull values based on input key. JSON structure is not same every time\nbelow is sample JSON structure and JSON starts and ends with [] and some time {}</p>\n<pre><code>[\n    {\n        &quot;id&quot;: &quot;0001&quot;,\n        &quot;type&quot;: &quot;donut&quot;,\n        &quot;name&quot;: &quot;Cake&quot;,\n        &quot;ppu&quot;: 0.55,\n        &quot;days&quot;: {\n            &quot;weekdays&quot;: &quot;Friday&quot;,\n            &quot;weekends&quot;: &quot;Sunday&quot;,\n        },\n        &quot;batters&quot;: {\n            &quot;batter&quot;: [\n                {\n                    &quot;id&quot;: &quot;1001&quot;,\n                    &quot;type&quot;: &quot;Regular&quot;\n                },\n                {\n                    &quot;id&quot;: &quot;1002&quot;,\n                    &quot;type&quot;: &quot;Chocolate&quot;\n                },\n            ]\n        },\n        &quot;topping&quot;: [\n            {\n                &quot;id&quot;: &quot;5001&quot;,\n                &quot;type&quot;: &quot;None&quot;\n            },\n            {\n                &quot;id&quot;: &quot;5002&quot;,\n                &quot;type&quot;: &quot;Glazed&quot;\n            },\n        ]\n    }\n]\n</code></pre>\n<pre><code>{\n        &quot;id&quot;: &quot;0001&quot;,\n        &quot;type&quot;: &quot;donut&quot;,\n        &quot;name&quot;: &quot;Cake&quot;,\n        &quot;ppu&quot;: 0.55,\n        &quot;days&quot;: {\n            &quot;weekdays&quot;: &quot;Friday&quot;,\n            &quot;weekends&quot;: &quot;Sunday&quot;,\n        },\n        &quot;batters&quot;: {\n            &quot;batter&quot;: [\n                {\n                    &quot;id&quot;: &quot;1001&quot;,\n                    &quot;type&quot;: &quot;Regular&quot;\n                },\n                {\n                    &quot;id&quot;: &quot;1002&quot;,\n                    &quot;type&quot;: &quot;Chocolate&quot;\n                },\n            ]\n        },\n        &quot;topping&quot;: [\n            {\n                &quot;id&quot;: &quot;5001&quot;,\n                &quot;type&quot;: &quot;None&quot;\n            },\n            {\n                &quot;id&quot;: &quot;5002&quot;,\n                &quot;type&quot;: &quot;Glazed&quot;\n            },\n        ]\n    }\n</code></pre>\n<p>i tried below code</p>\n<pre><code>import org.json.simple.*;\nimport org.json.simple.parser.JSONParser;\nimport org.json.simple.parser.ParseException;\n\n    public static void main(String[] args) throws IOException, Exception {\n\n        File InputFolder = new File(System.getProperty(&quot;user.dir&quot;) + &quot;//Files//new.json&quot;);\n\n        JsonElementFromFile(InputFolder,&quot;name&quot;);        \n    }\n\npublic static void JsonElementFromFile(File FilePath, String key) throws IOException, Exception {\n  \n   JSONParser parser = new JSONParser();\n   FileReader reader = new FileReader(FilePath);\n   JSONArray obj = (JSONArray) parser.parse(reader);  \n   for (Object o : obj) { \n      JSONObject json = (JSONObject) o; \n      String jsonKeyValue = (String)json.get(key).toString(); \n      System.out.println(key + &quot; : &quot; + jsonKeyValue); }\n  \n  }\n</code></pre>\n<ol>\n<li>above code works when JSON data start with &quot;[&quot; but not working  if it start with &quot;{&quot; , irrespective of any structure I should be able to get value</li>\n<li>i am able to pull only value from first object keys &quot;id&quot;,&quot;type&quot;,&quot;name&quot;,&quot;ppu&quot; but when i pass key as &quot;days.weekdays&quot; it is not pulling. even if i have more arrays and objectsi should be able to pull just by passing path of key, ex: &quot;batters.batter[0].id&quot; or &quot;batters.batter[1].type&quot;**</li>\n<li>basically i am looking for reusable code to pull values based on keys passed, dont want to hardcode any values from JSON.</li>\n</ol>\n<p>thank you</p>\n"},{"tags":["java","selenium","cucumber","selenium-extent-report"],"comments":[{"owner":{"account_id":5700778,"reputation":8968,"user_id":4512398,"display_name":"Grasshopper"},"score":0,"creation_date":1672821157,"post_id":74995487,"comment_id":132357153,"body_markdown":"Use `basefolder.name=target/reports`. There is no basefolder.dir setting, remove it.","body":"Use <code>basefolder.name=target&#47;reports</code>. There is no basefolder.dir setting, remove it."}],"owner":{"account_id":27420771,"reputation":1,"user_id":20919240,"display_name":"Facundo Fernandez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":543,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672760339,"creation_date":1672760339,"question_id":74995487,"body_markdown":"I am using the extent-report-adapter for cucumber7 in my project. Everything is fine, the reports are generated correctly. The problem is that they are generated in my root directory and I need them to be generated in a folder called target that is already created in my root directory, this would help me not to accumulate the reports in my directory and not have to delete them by hand, honestly I have looked everywhere and tried several things but I can not find the solution.\r\n\r\nI leave here the configuration files that I am using.\r\n\r\nextent.properties\r\n\r\n```\r\nextent.reporter.spark.start=true\r\nextent.reporter.spark.out=report/automation-testing-report.html\r\nextent.reporter.spark.config=src/test/resources/spark-config.xml\r\n\r\n#test,exception,category,device,author,log,dashboard - default order\r\nextent.reporter.spark.vieworder=dashboard,test,exception,category,device,author\r\n\r\n#Status filter\r\n#extent.reporter.statusfilter=Fail\r\n\r\n#embed image as base64 string src. Default is false\r\n#extent.reporter.spark.base64imagesrc=true\r\n\r\n#enable device &amp; author. Default is false\r\nextent.reporter.spark.enable.device=true\r\nextent.reporter.spark.enable.author=true\r\n\r\n\r\n#prefix for device &amp; author. Default is &#39;@dev_&#39; and &#39;@aut_&#39;, case ignored\r\n#only considered if &#39;enabledevice&#39; &amp; &#39;enableauthor&#39; are set to true\r\n#extent.reporter.spark.prefix.device=@device_\r\n#extent.reporter.spark.prefix.author=@author_\r\n\r\nscreenshot.dir=test-output/screenshots/\r\nscreenshot.rel.path=../screenshots/\r\n\r\n#time format 29-Feb-20 14-14-14&#39;\r\nbasefolder.dir=target\r\nbasefolder.name=reports\r\nbasefolder.datetimepattern=d-MMM-YY HH-mm-ss\r\n\r\n```\r\n\r\nspark-config.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;extentreports&gt;\r\n    &lt;configuration&gt;\r\n\r\n        &lt;!-- report theme --&gt;\r\n        &lt;!-- STANDARD, DARK --&gt;\r\n        &lt;theme&gt;STANDARD&lt;/theme&gt;\r\n\r\n        &lt;!-- document encoding --&gt;\r\n        &lt;!-- defaults to UTF-8 --&gt;\r\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n\r\n        &lt;!-- protocol for script and stylesheets --&gt;\r\n        &lt;!-- defaults to https --&gt;\r\n        &lt;!-- HTTP, HTTPS --&gt;\r\n        &lt;protocol&gt;HTTPS&lt;/protocol&gt;\r\n\r\n        &lt;!-- offline report --&gt;\r\n        &lt;timelineEnabled&gt;true&lt;/timelineEnabled&gt;\r\n\r\n        &lt;!-- offline report --&gt;\r\n        &lt;enableOfflineMode&gt;false&lt;/enableOfflineMode&gt;\r\n\r\n        &lt;!-- use thumbnails for base64 images --&gt;\r\n        &lt;!-- this may slowdown viewing tests --&gt;\r\n        &lt;thumbnailForBase64&gt;false&lt;/thumbnailForBase64&gt;\r\n\r\n        &lt;!-- title of the document --&gt;\r\n        &lt;documentTitle&gt;Omnex4 Automation Reports&lt;/documentTitle&gt;\r\n\r\n        &lt;!-- report name - displayed at top-nav --&gt;\r\n        &lt;reportName&gt;Regression suite result&lt;/reportName&gt;\r\n\r\n        &lt;!-- timestamp format --&gt;\r\n        &lt;timeStampFormat&gt;MMM dd, yyyy HH:mm:ss&lt;/timeStampFormat&gt;\r\n\r\n        &lt;output-directory&gt;target&lt;/output-directory&gt;\r\n\r\n        &lt;!-- custom javascript --&gt;\r\n        &lt;scripts&gt;\r\n            &lt;![CDATA[\r\n        $(document).ready(function() {\r\n\r\n        });\r\n      ]]&gt;\r\n        &lt;/scripts&gt;\r\n\r\n        &lt;!-- custom styles --&gt;\r\n        &lt;styles&gt;\r\n            &lt;![CDATA[\r\n\r\n      ]]&gt;\r\n        &lt;/styles&gt;\r\n\r\n    &lt;/configuration&gt;\r\n&lt;/extentreports&gt;\r\n```\r\n\r\n\r\n\r\n\r\nI have tried to change the path in my extent.properties but I only manage to add an extra folder to the reports that are generated in the root.","title":"Change Report creation directory (Extent Report)","body":"<p>I am using the extent-report-adapter for cucumber7 in my project. Everything is fine, the reports are generated correctly. The problem is that they are generated in my root directory and I need them to be generated in a folder called target that is already created in my root directory, this would help me not to accumulate the reports in my directory and not have to delete them by hand, honestly I have looked everywhere and tried several things but I can not find the solution.</p>\n<p>I leave here the configuration files that I am using.</p>\n<p>extent.properties</p>\n<pre><code>extent.reporter.spark.start=true\nextent.reporter.spark.out=report/automation-testing-report.html\nextent.reporter.spark.config=src/test/resources/spark-config.xml\n\n#test,exception,category,device,author,log,dashboard - default order\nextent.reporter.spark.vieworder=dashboard,test,exception,category,device,author\n\n#Status filter\n#extent.reporter.statusfilter=Fail\n\n#embed image as base64 string src. Default is false\n#extent.reporter.spark.base64imagesrc=true\n\n#enable device &amp; author. Default is false\nextent.reporter.spark.enable.device=true\nextent.reporter.spark.enable.author=true\n\n\n#prefix for device &amp; author. Default is '@dev_' and '@aut_', case ignored\n#only considered if 'enabledevice' &amp; 'enableauthor' are set to true\n#extent.reporter.spark.prefix.device=@device_\n#extent.reporter.spark.prefix.author=@author_\n\nscreenshot.dir=test-output/screenshots/\nscreenshot.rel.path=../screenshots/\n\n#time format 29-Feb-20 14-14-14'\nbasefolder.dir=target\nbasefolder.name=reports\nbasefolder.datetimepattern=d-MMM-YY HH-mm-ss\n\n</code></pre>\n<p>spark-config.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;extentreports&gt;\n    &lt;configuration&gt;\n\n        &lt;!-- report theme --&gt;\n        &lt;!-- STANDARD, DARK --&gt;\n        &lt;theme&gt;STANDARD&lt;/theme&gt;\n\n        &lt;!-- document encoding --&gt;\n        &lt;!-- defaults to UTF-8 --&gt;\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n\n        &lt;!-- protocol for script and stylesheets --&gt;\n        &lt;!-- defaults to https --&gt;\n        &lt;!-- HTTP, HTTPS --&gt;\n        &lt;protocol&gt;HTTPS&lt;/protocol&gt;\n\n        &lt;!-- offline report --&gt;\n        &lt;timelineEnabled&gt;true&lt;/timelineEnabled&gt;\n\n        &lt;!-- offline report --&gt;\n        &lt;enableOfflineMode&gt;false&lt;/enableOfflineMode&gt;\n\n        &lt;!-- use thumbnails for base64 images --&gt;\n        &lt;!-- this may slowdown viewing tests --&gt;\n        &lt;thumbnailForBase64&gt;false&lt;/thumbnailForBase64&gt;\n\n        &lt;!-- title of the document --&gt;\n        &lt;documentTitle&gt;Omnex4 Automation Reports&lt;/documentTitle&gt;\n\n        &lt;!-- report name - displayed at top-nav --&gt;\n        &lt;reportName&gt;Regression suite result&lt;/reportName&gt;\n\n        &lt;!-- timestamp format --&gt;\n        &lt;timeStampFormat&gt;MMM dd, yyyy HH:mm:ss&lt;/timeStampFormat&gt;\n\n        &lt;output-directory&gt;target&lt;/output-directory&gt;\n\n        &lt;!-- custom javascript --&gt;\n        &lt;scripts&gt;\n            &lt;![CDATA[\n        $(document).ready(function() {\n\n        });\n      ]]&gt;\n        &lt;/scripts&gt;\n\n        &lt;!-- custom styles --&gt;\n        &lt;styles&gt;\n            &lt;![CDATA[\n\n      ]]&gt;\n        &lt;/styles&gt;\n\n    &lt;/configuration&gt;\n&lt;/extentreports&gt;\n</code></pre>\n<p>I have tried to change the path in my extent.properties but I only manage to add an extra folder to the reports that are generated in the root.</p>\n"},{"tags":["java","sql-server","spring-boot","spring-data-jpa","transactional-database"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672759853,"post_id":74995370,"comment_id":132344305,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672760133,"post_id":74995370,"comment_id":132344402,"body_markdown":"And please also add the method annotated with `@Transactional`.","body":"And please also add the method annotated with <code>@Transactional</code>."},{"owner":{"account_id":27422128,"reputation":1,"user_id":20920367,"display_name":"Natan Cabral"},"score":0,"creation_date":1672766703,"post_id":74995370,"comment_id":132346555,"body_markdown":"My @Transactional method included.","body":"My @Transactional method included."}],"owner":{"account_id":27422128,"reputation":1,"user_id":20920367,"display_name":"Natan Cabral"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672760314,"creation_date":1672759686,"question_id":74995370,"body_markdown":"I have a spring boot application that connects on two databases (oracle and sql server), but my @Transactional method commits the transaction before returning to the caller. I launch my app in debug mode and realized that just after calling the .save() method, the SQLServer table already had populated.\r\n\r\nThis only happen with SQLServer tables, with oracle the tables are filled after @Transactional method returning to the caller.\r\n\r\nI have the following configuration classes:\r\n\r\n```\r\n\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(\r\n  basePackages = &quot;br.com.getnet.consumerformalizada.repository.mssql&quot;,\r\n  entityManagerFactoryRef = &quot;mssqlEntityManagerFactory&quot;,\r\n  transactionManagerRef = &quot;mssqlTransactionManager&quot; \r\n)\r\npublic class MsSqlDataSourceConfiguration {\r\n\t\r\n\t@Bean\r\n\t@ConfigurationProperties(&quot;spring.datasource.mssql&quot;)\r\n\tpublic DataSourceProperties mssqlDataSourceProperties() {\r\n\t\treturn new DataSourceProperties();\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic DataSource mssqlDataSource() {\r\n\t\treturn mssqlDataSourceProperties()\r\n\t\t\t\t.initializeDataSourceBuilder()\r\n\t\t\t\t.build();\r\n\t}\t\r\n\t\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean mssqlEntityManagerFactory(\r\n      @Qualifier(&quot;mssqlDataSource&quot;) DataSource dataSource,\r\n      EntityManagerFactoryBuilder builder) {\r\n        return builder\r\n          .dataSource(dataSource)\r\n          .packages(&quot;br.com.getnet.consumerformalizada.model.mssql&quot;)\r\n          .build();\r\n    }\r\n\r\n    @Bean\r\n    public PlatformTransactionManager mssqlTransactionManager(\r\n      @Qualifier(&quot;mssqlEntityManagerFactory&quot;) \r\n      LocalContainerEntityManagerFactoryBean mssqlEntityManagerFactory) {\r\n        return new JpaTransactionManager(\r\n        \t\tObjects.requireNonNull(mssqlEntityManagerFactory.getObject()));\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\n\r\n\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(\r\n  basePackages = {&quot;br.com.getnet.consumerformalizada.repository.oracle&quot;},\r\n  entityManagerFactoryRef = &quot;oracleEntityManagerFactory&quot;,\r\n  transactionManagerRef = &quot;oracleTransactionManager&quot;\r\n)\r\npublic class OracleDataSourceConfiguration {\r\n\t\r\n\t@Bean\r\n\t@Primary\r\n\t@ConfigurationProperties(&quot;spring.datasource.oracle&quot;)\r\n\tpublic DataSourceProperties oracleDataSourceProperties() {\r\n\t\treturn new DataSourceProperties();\r\n\t}\r\n\t\r\n\t@Bean\r\n\t@Primary\r\n\tpublic DataSource oracleDataSource() {\r\n\t\treturn oracleDataSourceProperties()\r\n\t\t       .initializeDataSourceBuilder().build();\t\t\t\t\r\n\t}\r\n\t\r\n    @Bean\r\n    @Primary\r\n    public LocalContainerEntityManagerFactoryBean oracleEntityManagerFactory(\r\n      @Qualifier(&quot;oracleDataSource&quot;) DataSource dataSource,\r\n      EntityManagerFactoryBuilder builder) {\r\n        return builder\r\n          .dataSource(dataSource)\r\n          .packages(&quot;br.com.getnet.consumerformalizada.model.oracle&quot;)\r\n          .build();\r\n    }\r\n\r\n    @Bean\r\n    @Primary\r\n    public PlatformTransactionManager oracleTransactionManager(\r\n      @Qualifier(&quot;oracleEntityManagerFactory&quot;) \r\n      LocalContainerEntityManagerFactoryBean oracleEntityManagerFactory) {\r\n        return new JpaTransactionManager(\r\n        \t\tObjects.requireNonNull(oracleEntityManagerFactory.getObject()));\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nThis is my @Transaction method:\r\n\r\n```\r\n\r\n\t@Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = Exception.class)\r\n\tpublic void iniciarInclusao(OpeInclusaoInput message) throws Exception {\r\n\t\t\r\n\t\tString idOpeRgsr = message.getIdOpeRgsr();\r\n\t\tint qtdUrs = message.getOperacao().getUrs().size();\r\n\t\t\r\n\t    OperacaoSantanderEntityBuilder builder = null;\t\r\n\t    //Validar se a mensagem j&#225; existe na base azure\r\n\t    PnrOpeSantanderEntity cttoAplicado = fmzInputService.findContratoAplicado(idOpeRgsr);\r\n\t    //Se n&#227;o existir nenhum registro ou n&#227;o estiver com a flag de aplicado, seguir com a inclus&#227;o\r\n\t    if (cttoAplicado == null || cttoAplicado.contratoNaoAplicado()) {\r\n\t\r\n\t        log.info(&quot;Iniciando inclus&#227;o do contrato {} com {} UR(S).&quot;, idOpeRgsr, qtdUrs);\r\n\t\r\n\t        //Salvar informa&#231;&#245;es na base da azure\r\n\t        //Aplica os logs iniciais na base Azure\r\n\t        builder = new OperacaoSantanderEntityBuilder(message);\r\n\t        Long idOpe = fmzInputService.aplicarContrato(builder.build());\r\n\t\r\n\t        if (idOpe == null || idOpe.equals(Long.valueOf(0)))\r\n\t            throw new Exception(&quot;Erro ao realizar inclus&#227;o do contrato via Input Service. IdOpe: &quot; + idOpe);\r\n\t\r\n\t        aplicarContratoPnr(message, null);\r\n\t\r\n\t        builder.updateSucessStatus();\r\n\t\r\n\t        log.info(&quot;Contrato {} inclu&#237;do com sucesso.&quot;, idOpeRgsr);\r\n\t    }\r\n\t    //Se j&#225; existir registro e estiver aplicado, aborta\r\n\t    else {\r\n\t        //N&#227;o faz nada\r\n\t        log.info(&quot;Contrato {} j&#225; aplicado. Status {}, ser&#225; ignorado.&quot;, idOpeRgsr, cttoAplicado.getStatus());\r\n\t\r\n\t        builder = new OperacaoSantanderEntityBuilder(message, cttoAplicado);\r\n\t        builder.updateIgnoredStatus();\r\n\t    }\r\n\t    //Atualiza os dados na base azure\r\n\t    this.fmzInputService.aplicarContrato(builder.build());    \r\n\t}\r\n\r\n\r\n```\r\n\r\nI tried to search on the web, but don&#39;t find a compatible solution.","title":"Spring boot @Transactional annotation commits before method ends, only with Sql Server","body":"<p>I have a spring boot application that connects on two databases (oracle and sql server), but my @Transactional method commits the transaction before returning to the caller. I launch my app in debug mode and realized that just after calling the .save() method, the SQLServer table already had populated.</p>\n<p>This only happen with SQLServer tables, with oracle the tables are filled after @Transactional method returning to the caller.</p>\n<p>I have the following configuration classes:</p>\n<pre><code>\n@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(\n  basePackages = &quot;br.com.getnet.consumerformalizada.repository.mssql&quot;,\n  entityManagerFactoryRef = &quot;mssqlEntityManagerFactory&quot;,\n  transactionManagerRef = &quot;mssqlTransactionManager&quot; \n)\npublic class MsSqlDataSourceConfiguration {\n    \n    @Bean\n    @ConfigurationProperties(&quot;spring.datasource.mssql&quot;)\n    public DataSourceProperties mssqlDataSourceProperties() {\n        return new DataSourceProperties();\n    }\n    \n    @Bean\n    public DataSource mssqlDataSource() {\n        return mssqlDataSourceProperties()\n                .initializeDataSourceBuilder()\n                .build();\n    }   \n    \n    @Bean\n    public LocalContainerEntityManagerFactoryBean mssqlEntityManagerFactory(\n      @Qualifier(&quot;mssqlDataSource&quot;) DataSource dataSource,\n      EntityManagerFactoryBuilder builder) {\n        return builder\n          .dataSource(dataSource)\n          .packages(&quot;br.com.getnet.consumerformalizada.model.mssql&quot;)\n          .build();\n    }\n\n    @Bean\n    public PlatformTransactionManager mssqlTransactionManager(\n      @Qualifier(&quot;mssqlEntityManagerFactory&quot;) \n      LocalContainerEntityManagerFactoryBean mssqlEntityManagerFactory) {\n        return new JpaTransactionManager(\n                Objects.requireNonNull(mssqlEntityManagerFactory.getObject()));\n    }\n\n}\n\n</code></pre>\n<pre><code>\n\n@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(\n  basePackages = {&quot;br.com.getnet.consumerformalizada.repository.oracle&quot;},\n  entityManagerFactoryRef = &quot;oracleEntityManagerFactory&quot;,\n  transactionManagerRef = &quot;oracleTransactionManager&quot;\n)\npublic class OracleDataSourceConfiguration {\n    \n    @Bean\n    @Primary\n    @ConfigurationProperties(&quot;spring.datasource.oracle&quot;)\n    public DataSourceProperties oracleDataSourceProperties() {\n        return new DataSourceProperties();\n    }\n    \n    @Bean\n    @Primary\n    public DataSource oracleDataSource() {\n        return oracleDataSourceProperties()\n               .initializeDataSourceBuilder().build();              \n    }\n    \n    @Bean\n    @Primary\n    public LocalContainerEntityManagerFactoryBean oracleEntityManagerFactory(\n      @Qualifier(&quot;oracleDataSource&quot;) DataSource dataSource,\n      EntityManagerFactoryBuilder builder) {\n        return builder\n          .dataSource(dataSource)\n          .packages(&quot;br.com.getnet.consumerformalizada.model.oracle&quot;)\n          .build();\n    }\n\n    @Bean\n    @Primary\n    public PlatformTransactionManager oracleTransactionManager(\n      @Qualifier(&quot;oracleEntityManagerFactory&quot;) \n      LocalContainerEntityManagerFactoryBean oracleEntityManagerFactory) {\n        return new JpaTransactionManager(\n                Objects.requireNonNull(oracleEntityManagerFactory.getObject()));\n    }\n\n}\n\n</code></pre>\n<p>This is my @Transaction method:</p>\n<pre><code>\n    @Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = Exception.class)\n    public void iniciarInclusao(OpeInclusaoInput message) throws Exception {\n        \n        String idOpeRgsr = message.getIdOpeRgsr();\n        int qtdUrs = message.getOperacao().getUrs().size();\n        \n        OperacaoSantanderEntityBuilder builder = null;  \n        //Validar se a mensagem j existe na base azure\n        PnrOpeSantanderEntity cttoAplicado = fmzInputService.findContratoAplicado(idOpeRgsr);\n        //Se no existir nenhum registro ou no estiver com a flag de aplicado, seguir com a incluso\n        if (cttoAplicado == null || cttoAplicado.contratoNaoAplicado()) {\n    \n            log.info(&quot;Iniciando incluso do contrato {} com {} UR(S).&quot;, idOpeRgsr, qtdUrs);\n    \n            //Salvar informaes na base da azure\n            //Aplica os logs iniciais na base Azure\n            builder = new OperacaoSantanderEntityBuilder(message);\n            Long idOpe = fmzInputService.aplicarContrato(builder.build());\n    \n            if (idOpe == null || idOpe.equals(Long.valueOf(0)))\n                throw new Exception(&quot;Erro ao realizar incluso do contrato via Input Service. IdOpe: &quot; + idOpe);\n    \n            aplicarContratoPnr(message, null);\n    \n            builder.updateSucessStatus();\n    \n            log.info(&quot;Contrato {} includo com sucesso.&quot;, idOpeRgsr);\n        }\n        //Se j existir registro e estiver aplicado, aborta\n        else {\n            //No faz nada\n            log.info(&quot;Contrato {} j aplicado. Status {}, ser ignorado.&quot;, idOpeRgsr, cttoAplicado.getStatus());\n    \n            builder = new OperacaoSantanderEntityBuilder(message, cttoAplicado);\n            builder.updateIgnoredStatus();\n        }\n        //Atualiza os dados na base azure\n        this.fmzInputService.aplicarContrato(builder.build());    \n    }\n\n\n</code></pre>\n<p>I tried to search on the web, but don't find a compatible solution.</p>\n"},{"tags":["java","https","certificate","keystore"],"answers":[{"tags":[],"owner":{"account_id":2014187,"reputation":161,"user_id":1801882,"display_name":"bkuberek"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1544634982,"creation_date":1544458866,"answer_id":53709621,"question_id":53709608,"body_markdown":"In order to load your certificates into your application your will need to package them into a truststore.\r\n\r\n**Creating a truststore**\r\n\r\ngiven the 3 files:\r\n\r\n- `client-cert.pem`\r\n- `client-key.pem`\r\n- `root.pem`\r\n\r\nRun the following commands in your terminal. Replace `PASSWORD` with your desired password.\r\n\r\n1. Package your client key and certificate into a keystore. This will create a PKCS12 keystore file.\r\n\r\n        openssl pkcs12 -export \\\r\n            -inkey client-key.pem -in client-cert.pem \\\r\n            -out client.pfx -passout pass:PASSWORD \\\r\n            -name qlikClient\r\n\r\n2. Add the keystore to your truststore. It will create a truststore if the destination doesn&#39;t exit. This will create a `PKCS12` truststore file. By default it creates a `JKS` file which is a proprietary format. By specifying `-deststoretype PKCS12` you will create a file which is in an industry standard format.\r\n\r\n        keytool -importkeystore \\\r\n            -destkeystore truststore.pfx -deststoretype PKCS12 -deststorepass PASSWORD \\\r\n            -srckeystore client.pfx -srcstorepass PASSWORD -srcstoretype PKCS12 \\\r\n            -alias qlikClient\r\n\r\n3. Add your root CA to the truststore\r\n\r\n        keytool -importcert \\\r\n            -keystore truststore.pfx -storepass PASSWORD \\\r\n            -file root.pem -noprompt \\\r\n            -alias qlikServerCACert\r\n\r\n*Note that in the above commands we use the same `PASSWORD` for both the keystore and the truststore. You could alternatively use different passwords. Also note that you have to specify an alias for each item you add to the truststore.* \r\n\r\nIf you want your truststore to trust all cacerts available in your system add `-trustcacerts` option to step 2 or 3.\r\n\r\nYou can use the following command to list the contents of your truststore\r\n\r\n    keytool -list -keystore truststore.pfx -storepass PASSWORD\r\n\r\n**Using the truststore in you application**\r\n\r\nOnce you have your truststore you need to load it into your application. Assuming you have a constant `KEYSTORE_PATH` holding the path to your truststore and `keyStorePass` holding the password, read the truststore file into a `KeyStore`\r\n\r\n    private KeyStore readStore() {\r\n      try (InputStream keyStoreStream = new FileInputStream(KEYSTORE_PATH)) {\r\n        KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;); // or &quot;JKS&quot;\r\n        keyStore.load(keyStoreStream, keyStorePass.toCharArray());\r\n        return keyStore;\r\n      } catch (KeyStoreException | CertificateException | NoSuchAlgorithmException e) {\r\n        throw new RuntimeException(e);\r\n      }\r\n    }\r\n\r\nCreate a custom `SSLContext` and a custom `HttpClient`,\r\n\r\n    final KeyStore truststore = readStore();\r\n\r\n    final SSLContext sslContext;\r\n    try {\r\n      sslContext = SSLContexts.custom()\r\n          .loadTrustMaterial(truststore, new TrustAllStrategy())\r\n          .loadKeyMaterial(truststore, keyStorePass.toCharArray(), (aliases, socket) -&gt; &quot;qlikClient&quot;)\r\n          .build();\r\n    } catch (NoSuchAlgorithmException | KeyStoreException | KeyManagementException | UnrecoverableKeyException e) {\r\n      throw new RuntimeException(&quot;Failed to read keystore&quot;, e);\r\n    }\r\n    final CloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\r\n\r\nYou can now use this `HttpClient` to make requests to your API.\r\n\r\n    HttpResponse response = httpClient.execute(new HttpGet(&quot;https://sense-gcp-central1eu.net:4242/qrs/app/full&quot;));\r\n\r\nOr, if you are using the [OpenUnirest/unirest-java][1] library, you can configure Unirest to use your custom `HttpClient`\r\n\r\n    Unirest.config().httpClient(httpClient);\r\n    HttpResponse&lt;JsonNode&gt; response = Unirest.get(&quot;https://sense-gcp-central1eu.net:4242/qrs/app/full&quot;).asJson();\r\n\r\n**References**\r\n\r\n- https://alvinalexander.com/java/java-keytool-keystore-certificate-tutorials\r\n- https://stackoverflow.com/questions/21223084/how-do-i-use-an-ssl-client-certificate-with-apache-httpclient\r\n\r\n  [1]: https://github.com/OpenUnirest/unirest-java","title":"How do I use client certificates in a client java application?","body":"<p>In order to load your certificates into your application your will need to package them into a truststore.</p>\n\n<p><strong>Creating a truststore</strong></p>\n\n<p>given the 3 files:</p>\n\n<ul>\n<li><code>client-cert.pem</code></li>\n<li><code>client-key.pem</code></li>\n<li><code>root.pem</code></li>\n</ul>\n\n<p>Run the following commands in your terminal. Replace <code>PASSWORD</code> with your desired password.</p>\n\n<ol>\n<li><p>Package your client key and certificate into a keystore. This will create a PKCS12 keystore file.</p>\n\n<pre><code>openssl pkcs12 -export \\\n    -inkey client-key.pem -in client-cert.pem \\\n    -out client.pfx -passout pass:PASSWORD \\\n    -name qlikClient\n</code></pre></li>\n<li><p>Add the keystore to your truststore. It will create a truststore if the destination doesn't exit. This will create a <code>PKCS12</code> truststore file. By default it creates a <code>JKS</code> file which is a proprietary format. By specifying <code>-deststoretype PKCS12</code> you will create a file which is in an industry standard format.</p>\n\n<pre><code>keytool -importkeystore \\\n    -destkeystore truststore.pfx -deststoretype PKCS12 -deststorepass PASSWORD \\\n    -srckeystore client.pfx -srcstorepass PASSWORD -srcstoretype PKCS12 \\\n    -alias qlikClient\n</code></pre></li>\n<li><p>Add your root CA to the truststore</p>\n\n<pre><code>keytool -importcert \\\n    -keystore truststore.pfx -storepass PASSWORD \\\n    -file root.pem -noprompt \\\n    -alias qlikServerCACert\n</code></pre></li>\n</ol>\n\n<p><em>Note that in the above commands we use the same <code>PASSWORD</code> for both the keystore and the truststore. You could alternatively use different passwords. Also note that you have to specify an alias for each item you add to the truststore.</em> </p>\n\n<p>If you want your truststore to trust all cacerts available in your system add <code>-trustcacerts</code> option to step 2 or 3.</p>\n\n<p>You can use the following command to list the contents of your truststore</p>\n\n<pre><code>keytool -list -keystore truststore.pfx -storepass PASSWORD\n</code></pre>\n\n<p><strong>Using the truststore in you application</strong></p>\n\n<p>Once you have your truststore you need to load it into your application. Assuming you have a constant <code>KEYSTORE_PATH</code> holding the path to your truststore and <code>keyStorePass</code> holding the password, read the truststore file into a <code>KeyStore</code></p>\n\n<pre><code>private KeyStore readStore() {\n  try (InputStream keyStoreStream = new FileInputStream(KEYSTORE_PATH)) {\n    KeyStore keyStore = KeyStore.getInstance(\"PKCS12\"); // or \"JKS\"\n    keyStore.load(keyStoreStream, keyStorePass.toCharArray());\n    return keyStore;\n  } catch (KeyStoreException | CertificateException | NoSuchAlgorithmException e) {\n    throw new RuntimeException(e);\n  }\n}\n</code></pre>\n\n<p>Create a custom <code>SSLContext</code> and a custom <code>HttpClient</code>,</p>\n\n<pre><code>final KeyStore truststore = readStore();\n\nfinal SSLContext sslContext;\ntry {\n  sslContext = SSLContexts.custom()\n      .loadTrustMaterial(truststore, new TrustAllStrategy())\n      .loadKeyMaterial(truststore, keyStorePass.toCharArray(), (aliases, socket) -&gt; \"qlikClient\")\n      .build();\n} catch (NoSuchAlgorithmException | KeyStoreException | KeyManagementException | UnrecoverableKeyException e) {\n  throw new RuntimeException(\"Failed to read keystore\", e);\n}\nfinal CloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\n</code></pre>\n\n<p>You can now use this <code>HttpClient</code> to make requests to your API.</p>\n\n<pre><code>HttpResponse response = httpClient.execute(new HttpGet(\"https://sense-gcp-central1eu.net:4242/qrs/app/full\"));\n</code></pre>\n\n<p>Or, if you are using the <a href=\"https://github.com/OpenUnirest/unirest-java\" rel=\"noreferrer\">OpenUnirest/unirest-java</a> library, you can configure Unirest to use your custom <code>HttpClient</code></p>\n\n<pre><code>Unirest.config().httpClient(httpClient);\nHttpResponse&lt;JsonNode&gt; response = Unirest.get(\"https://sense-gcp-central1eu.net:4242/qrs/app/full\").asJson();\n</code></pre>\n\n<p><strong>References</strong></p>\n\n<ul>\n<li><a href=\"https://alvinalexander.com/java/java-keytool-keystore-certificate-tutorials\" rel=\"noreferrer\">https://alvinalexander.com/java/java-keytool-keystore-certificate-tutorials</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21223084/how-do-i-use-an-ssl-client-certificate-with-apache-httpclient\">How do I use an SSL client certificate with Apache HttpClient?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1743298,"reputation":347,"user_id":1594088,"display_name":"&#214;zg&#252;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672760285,"creation_date":1672760285,"answer_id":74995478,"question_id":53709608,"body_markdown":"I know it is an old question, but I figured out something wrong in your question.  \r\nThe truststore is used by your client to list the remote server to which it can trust.  \r\nIf the certificate/key you have and would like to use, is for your own java client, you should include them in your keystore, not truststore.  \r\nThis is the store your client will use in case the remote server asks your client to authenticate itself.\r\n\r\nOn top of the already given answers, if you are using spring boot and resttemplate as http client implementation, you can use the keystore you created by doing so in your application properties:\r\n```\r\nserver:\r\n  ssl:\r\n    enabled: true\r\n    key-alias: &lt;&lt;app-client-alias&gt;&gt;\r\n    key-store: &lt;&lt;path_to_your_keystore&gt;&gt;\r\n    key-store-password: &lt;&lt;PASSWORD&gt;&gt;\r\n```","title":"How do I use client certificates in a client java application?","body":"<p>I know it is an old question, but I figured out something wrong in your question.<br />\nThe truststore is used by your client to list the remote server to which it can trust.<br />\nIf the certificate/key you have and would like to use, is for your own java client, you should include them in your keystore, not truststore.<br />\nThis is the store your client will use in case the remote server asks your client to authenticate itself.</p>\n<p>On top of the already given answers, if you are using spring boot and resttemplate as http client implementation, you can use the keystore you created by doing so in your application properties:</p>\n<pre><code>server:\n  ssl:\n    enabled: true\n    key-alias: &lt;&lt;app-client-alias&gt;&gt;\n    key-store: &lt;&lt;path_to_your_keystore&gt;&gt;\n    key-store-password: &lt;&lt;PASSWORD&gt;&gt;\n</code></pre>\n"}],"owner":{"account_id":2014187,"reputation":161,"user_id":1801882,"display_name":"bkuberek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12850,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":53709621,"answer_count":2,"score":4,"last_activity_date":1672760285,"creation_date":1544458821,"question_id":53709608,"body_markdown":"This is a topic that has taken me quite some time to figure out. There are bits and pieces of information scattered and one has to put everything together. I was hoping that with this post I could help others quickly assemble a working solution.\r\n\r\n----------\r\n\r\nI have a `client-cert.pem`, `client-key.pem` and a `root.pem` files and I need to used them in my Java client to access a remote REST API.\r\n\r\nHow do I package them into a truststore and use them to make API calls?","title":"How do I use client certificates in a client java application?","body":"<p>This is a topic that has taken me quite some time to figure out. There are bits and pieces of information scattered and one has to put everything together. I was hoping that with this post I could help others quickly assemble a working solution.</p>\n\n<hr>\n\n<p>I have a <code>client-cert.pem</code>, <code>client-key.pem</code> and a <code>root.pem</code> files and I need to used them in my Java client to access a remote REST API.</p>\n\n<p>How do I package them into a truststore and use them to make API calls?</p>\n"},{"tags":["java","spring","openapi","openapi-generator","spring-hateoas"],"answers":[{"tags":[],"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672760044,"creation_date":1672760044,"answer_id":74995430,"question_id":74975999,"body_markdown":"hateoas is a [configurable option/feature](https://openapi-generator.tech/docs/generators/spring/#:~:text=org.openapitools-,hateoas,-Use%20Spring%20HATEOAS) in the spring generator.\r\n\r\nAdd this config option to your `openApiGenerate` task and it will automatically add the `RepresentationModel` to your generated models.\r\n\r\n```maven\r\n&lt;configOptions&gt;\r\n  &lt;hateoas&gt;true&lt;/hateoas&gt;\r\n&lt;/configOptions&gt;\r\n```","title":"Is it possible to generate Spring hateoas entities with openapi","body":"<p>hateoas is a <a href=\"https://openapi-generator.tech/docs/generators/spring/#:%7E:text=org.openapitools-,hateoas,-Use%20Spring%20HATEOAS\" rel=\"nofollow noreferrer\">configurable option/feature</a> in the spring generator.</p>\n<p>Add this config option to your <code>openApiGenerate</code> task and it will automatically add the <code>RepresentationModel</code> to your generated models.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configOptions&gt;\n  &lt;hateoas&gt;true&lt;/hateoas&gt;\n&lt;/configOptions&gt;\n</code></pre>\n"}],"owner":{"account_id":15264195,"reputation":59,"user_id":11013341,"display_name":"MSmith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":582,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74995430,"answer_count":1,"score":0,"last_activity_date":1672760044,"creation_date":1672592246,"question_id":74975999,"body_markdown":"I&#39;m trying to use openapi to generate an enitity that uses the spring-hateoas RepresentationModel class.\r\n\r\nExample:\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport jakarta.persistence.*;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport lombok.ToString;\r\nimport org.springframework.hateoas.RepresentationModel;\r\n\r\n\r\nimport java.util.Date;\r\n\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@Table(name = &quot;User&quot;)\r\n@ToString\r\npublic class User extends RepresentationModel&lt;User&gt; {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;age&quot;)\r\n    private Integer age;\r\n\r\n    @Column(name = &quot;date&quot;)\r\n    private Date joinedDate;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JsonIgnore\r\n    @ToString.Exclude\r\n    private Chat Chat;\r\n}\r\n```\r\n\r\nI can&#39;t find any examples on how to generate an entity like this and for it to extend the  RepresentationModel class with type User.\r\n\r\nIs this type of generation possible? If so how?\r\n\r\nI&#39;m using:\r\n```\r\n&lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n&lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n&lt;version&gt;6.2.1&lt;/version&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;parent&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t&lt;relativePath/&gt; \r\n&lt;/parent&gt;\r\n```","title":"Is it possible to generate Spring hateoas entities with openapi","body":"<p>I'm trying to use openapi to generate an enitity that uses the spring-hateoas RepresentationModel class.</p>\n<p>Example:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport jakarta.persistence.*;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport lombok.ToString;\nimport org.springframework.hateoas.RepresentationModel;\n\n\nimport java.util.Date;\n\n@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@Table(name = &quot;User&quot;)\n@ToString\npublic class User extends RepresentationModel&lt;User&gt; {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;age&quot;)\n    private Integer age;\n\n    @Column(name = &quot;date&quot;)\n    private Date joinedDate;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JsonIgnore\n    @ToString.Exclude\n    private Chat Chat;\n}\n</code></pre>\n<p>I can't find any examples on how to generate an entity like this and for it to extend the  RepresentationModel class with type User.</p>\n<p>Is this type of generation possible? If so how?</p>\n<p>I'm using:</p>\n<pre><code>&lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n&lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;6.2.1&lt;/version&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;relativePath/&gt; \n&lt;/parent&gt;\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-authentication"],"comments":[{"owner":{"account_id":15483805,"reputation":242,"user_id":11170352,"display_name":"Mokhtar Abdelhalim"},"score":1,"creation_date":1672741338,"post_id":74991741,"comment_id":132338272,"body_markdown":"Can you post the error ?","body":"Can you post the error ?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1672743795,"post_id":74991741,"comment_id":132339073,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1672757153,"post_id":74991741,"comment_id":132343350,"body_markdown":"Unused imports can be fixed by removing the unused imports.","body":"Unused imports can be fixed by removing the unused imports."}],"owner":{"account_id":27419313,"reputation":1,"user_id":20918015,"display_name":"trina"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672759920,"creation_date":1672740068,"question_id":74991741,"body_markdown":"```\r\npackage com.dataflair.fooddeliveryapp.Activities;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport com.dataflair.fooddeliveryapp.MainActivity;\r\nimport com.dataflair.fooddeliveryapp.R;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.SignInButton;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.database.annotations.NotNull;\r\n\r\nimport java.util.HashMap;\r\n\r\npublic class LoginActivity extends AppCompatActivity {\r\n\r\n    GoogleSignInClient mSignInClient;\r\n    FirebaseAuth firebaseAuth;\r\n    ProgressDialog progressBar;\r\n    Button signInButton;\r\n    EditText phoneNumberEditTxt, addressEditTxt, cityNameEditTxt, pinCodeEdittxt;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n\r\n        //Firebase Authentication\r\n        firebaseAuth = FirebaseAuth.getInstance();\r\n\r\n        //Progress bar\r\n        progressBar = new ProgressDialog(this);\r\n        progressBar.setTitle(&quot;Please Wait...&quot;);\r\n        progressBar.setMessage(&quot;We are setting Everything for you...&quot;);\r\n        progressBar.setProgressStyle(ProgressDialog.STYLE_SPINNER);\r\n\r\n\r\n        //Assigning the address of the android materials\r\n        cityNameEditTxt = (EditText) findViewById(R.id.CityEditText);\r\n        phoneNumberEditTxt = (EditText) findViewById(R.id.PhoneNumberEditText);\r\n        pinCodeEdittxt = (EditText) findViewById(R.id.PinCodeExitText);\r\n        addressEditTxt = (EditText) findViewById(R.id.AddressEditText);\r\n        signInButton = (Button) findViewById(R.id.GoogleSignInBtn);\r\n\r\n\r\n        //Google Signin Options to get gmail and performed gmail login\r\n        GoogleSignInOptions googleSignInOptions = new GoogleSignInOptions\r\n                .Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(&quot;319466083877-4cdnl01r8q8p84nqgtcp42tv8cn0dq12.apps.googleusercontent.com&quot;)\r\n                .requestEmail()\r\n                .build();\r\n\r\n        mSignInClient = GoogleSignIn.getClient(getApplicationContext(), googleSignInOptions);\r\n\r\n\r\n        //Implementing OnClickListener to perform Login action\r\n        signInButton.setOnClickListener(view -&gt; {\r\n\r\n            //Getting user details from the edit text\r\n            String phoneNumber = phoneNumberEditTxt.getText().toString();\r\n            String cityName = cityNameEditTxt.getText().toString();\r\n            String pinCode = pinCodeEdittxt.getText().toString();\r\n            String address = addressEditTxt.getText().toString();\r\n\r\n            //Checking all the fields are filled or not\r\n            if (phoneNumber.isEmpty() || cityName.isEmpty() || pinCode.isEmpty() || address.isEmpty()) {\r\n                Toast.makeText(getApplicationContext(), &quot;Please,Fill Details&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                //Showing all Gmails\r\n                Intent intent = mSignInClient.getSignInIntent();\r\n                startActivityForResult(intent, 100);\r\n            }\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == 100) {\r\n            Task&lt;GoogleSignInAccount&gt; googleSignInAccountTask = GoogleSignIn\r\n                    .getSignedInAccountFromIntent(data);\r\n\r\n            if (googleSignInAccountTask.isSuccessful()) {\r\n                progressBar.show();\r\n                try {\r\n                    GoogleSignInAccount googleSignInAccount = googleSignInAccountTask.getResult(ApiException.class);\r\n\r\n                    if (googleSignInAccount != null) {\r\n                        AuthCredential authCredential = GoogleAuthProvider\r\n                                .getCredential(googleSignInAccount.getIdToken(), null);\r\n\r\n                        firebaseAuth.signInWithCredential(authCredential).addOnCompleteListener(this, task -&gt; {\r\n                            if (task.isSuccessful()) {\r\n                                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                                DatabaseReference myRef = database.getReference().child(&quot;users&quot;);\r\n\r\n                                //Hashmap to store the userdetails and setting it to fireabse\r\n                                HashMap&lt;String, Object&gt; user_details = new HashMap&lt;&gt;();\r\n\r\n                                //Accessing the user details from gmail\r\n                                String id = googleSignInAccount.getId().toString();\r\n                                String name = googleSignInAccount.getDisplayName().toString();\r\n                                String mail = googleSignInAccount.getEmail().toString();\r\n                                String pic = googleSignInAccount.getPhotoUrl().toString();\r\n\r\n\r\n                                String phoneNumber = phoneNumberEditTxt.getText().toString();\r\n                                String cityName = cityNameEditTxt.getText().toString();\r\n                                String pinCode = pinCodeEdittxt.getText().toString();\r\n                                String address = addressEditTxt.getText().toString();\r\n\r\n\r\n                                user_details.put(&quot;id&quot;, id);\r\n                                user_details.put(&quot;name&quot;, name);\r\n                                user_details.put(&quot;mail&quot;, mail);\r\n                                user_details.put(&quot;profilepic&quot;, pic);\r\n                                user_details.put(&quot;role&quot;, &quot;empty&quot;);\r\n                                user_details.put(&quot;phoneNumber&quot;, phoneNumber);\r\n                                user_details.put(&quot;cityName&quot;, cityName);\r\n                                user_details.put(&quot;pinCode&quot;, pinCode);\r\n                                user_details.put(&quot;address&quot;, address);\r\n\r\n                                //updating the user details in firebase\r\n                                myRef.child(id).updateChildren(user_details).addOnCompleteListener(task1 -&gt; {\r\n                                    if (task1.isSuccessful()) {\r\n                                        progressBar.cancel();\r\n\r\n                                        //navigating to the main activity after user successfully registers\r\n                                        Intent intent = new Intent(getApplicationContext(), UserRoleActivity.class);\r\n                                        //Clears older activities and tasks\r\n                                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n                                        startActivity(intent);\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                } catch (ApiException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI am making a food delivery app where user need to login first which is not working. It is showing that few of the imports are unused. I am not sure of how to solve this problem, as My sign in button not working, the whole project is not working. MainActivity, SignInButton import is also gray.  I want to know how to solve this problem. ","title":"My Sign in button not working, and also I have few unused import statement but it is for firebase","body":"<pre><code>package com.dataflair.fooddeliveryapp.Activities;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.app.ProgressDialog;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport com.dataflair.fooddeliveryapp.MainActivity;\nimport com.dataflair.fooddeliveryapp.R;\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\nimport com.google.android.gms.common.SignInButton;\nimport com.google.android.gms.common.api.ApiException;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.auth.AuthCredential;\nimport com.google.firebase.auth.AuthResult;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.FirebaseUser;\nimport com.google.firebase.auth.GoogleAuthProvider;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\nimport com.google.firebase.database.annotations.NotNull;\n\nimport java.util.HashMap;\n\npublic class LoginActivity extends AppCompatActivity {\n\n    GoogleSignInClient mSignInClient;\n    FirebaseAuth firebaseAuth;\n    ProgressDialog progressBar;\n    Button signInButton;\n    EditText phoneNumberEditTxt, addressEditTxt, cityNameEditTxt, pinCodeEdittxt;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login);\n\n        //Firebase Authentication\n        firebaseAuth = FirebaseAuth.getInstance();\n\n        //Progress bar\n        progressBar = new ProgressDialog(this);\n        progressBar.setTitle(&quot;Please Wait...&quot;);\n        progressBar.setMessage(&quot;We are setting Everything for you...&quot;);\n        progressBar.setProgressStyle(ProgressDialog.STYLE_SPINNER);\n\n\n        //Assigning the address of the android materials\n        cityNameEditTxt = (EditText) findViewById(R.id.CityEditText);\n        phoneNumberEditTxt = (EditText) findViewById(R.id.PhoneNumberEditText);\n        pinCodeEdittxt = (EditText) findViewById(R.id.PinCodeExitText);\n        addressEditTxt = (EditText) findViewById(R.id.AddressEditText);\n        signInButton = (Button) findViewById(R.id.GoogleSignInBtn);\n\n\n        //Google Signin Options to get gmail and performed gmail login\n        GoogleSignInOptions googleSignInOptions = new GoogleSignInOptions\n                .Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\n                .requestIdToken(&quot;319466083877-4cdnl01r8q8p84nqgtcp42tv8cn0dq12.apps.googleusercontent.com&quot;)\n                .requestEmail()\n                .build();\n\n        mSignInClient = GoogleSignIn.getClient(getApplicationContext(), googleSignInOptions);\n\n\n        //Implementing OnClickListener to perform Login action\n        signInButton.setOnClickListener(view -&gt; {\n\n            //Getting user details from the edit text\n            String phoneNumber = phoneNumberEditTxt.getText().toString();\n            String cityName = cityNameEditTxt.getText().toString();\n            String pinCode = pinCodeEdittxt.getText().toString();\n            String address = addressEditTxt.getText().toString();\n\n            //Checking all the fields are filled or not\n            if (phoneNumber.isEmpty() || cityName.isEmpty() || pinCode.isEmpty() || address.isEmpty()) {\n                Toast.makeText(getApplicationContext(), &quot;Please,Fill Details&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                //Showing all Gmails\n                Intent intent = mSignInClient.getSignInIntent();\n                startActivityForResult(intent, 100);\n            }\n\n        });\n\n\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if (requestCode == 100) {\n            Task&lt;GoogleSignInAccount&gt; googleSignInAccountTask = GoogleSignIn\n                    .getSignedInAccountFromIntent(data);\n\n            if (googleSignInAccountTask.isSuccessful()) {\n                progressBar.show();\n                try {\n                    GoogleSignInAccount googleSignInAccount = googleSignInAccountTask.getResult(ApiException.class);\n\n                    if (googleSignInAccount != null) {\n                        AuthCredential authCredential = GoogleAuthProvider\n                                .getCredential(googleSignInAccount.getIdToken(), null);\n\n                        firebaseAuth.signInWithCredential(authCredential).addOnCompleteListener(this, task -&gt; {\n                            if (task.isSuccessful()) {\n                                FirebaseDatabase database = FirebaseDatabase.getInstance();\n                                DatabaseReference myRef = database.getReference().child(&quot;users&quot;);\n\n                                //Hashmap to store the userdetails and setting it to fireabse\n                                HashMap&lt;String, Object&gt; user_details = new HashMap&lt;&gt;();\n\n                                //Accessing the user details from gmail\n                                String id = googleSignInAccount.getId().toString();\n                                String name = googleSignInAccount.getDisplayName().toString();\n                                String mail = googleSignInAccount.getEmail().toString();\n                                String pic = googleSignInAccount.getPhotoUrl().toString();\n\n\n                                String phoneNumber = phoneNumberEditTxt.getText().toString();\n                                String cityName = cityNameEditTxt.getText().toString();\n                                String pinCode = pinCodeEdittxt.getText().toString();\n                                String address = addressEditTxt.getText().toString();\n\n\n                                user_details.put(&quot;id&quot;, id);\n                                user_details.put(&quot;name&quot;, name);\n                                user_details.put(&quot;mail&quot;, mail);\n                                user_details.put(&quot;profilepic&quot;, pic);\n                                user_details.put(&quot;role&quot;, &quot;empty&quot;);\n                                user_details.put(&quot;phoneNumber&quot;, phoneNumber);\n                                user_details.put(&quot;cityName&quot;, cityName);\n                                user_details.put(&quot;pinCode&quot;, pinCode);\n                                user_details.put(&quot;address&quot;, address);\n\n                                //updating the user details in firebase\n                                myRef.child(id).updateChildren(user_details).addOnCompleteListener(task1 -&gt; {\n                                    if (task1.isSuccessful()) {\n                                        progressBar.cancel();\n\n                                        //navigating to the main activity after user successfully registers\n                                        Intent intent = new Intent(getApplicationContext(), UserRoleActivity.class);\n                                        //Clears older activities and tasks\n                                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n                                        startActivity(intent);\n                                    }\n                                });\n\n                            }\n                        });\n                    }\n\n                } catch (ApiException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>I am making a food delivery app where user need to login first which is not working. It is showing that few of the imports are unused. I am not sure of how to solve this problem, as My sign in button not working, the whole project is not working. MainActivity, SignInButton import is also gray.  I want to know how to solve this problem.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":2599844,"reputation":8426,"user_id":2252572,"accept_rate":63,"display_name":"Bacteria"},"score":3,"creation_date":1457546023,"post_id":35898991,"comment_id":59458522,"body_markdown":"I don&#39;t know how this question can be answered without just doing it for u. Have u tried anything urself?","body":"I don&#39;t know how this question can be answered without just doing it for u. Have u tried anything urself?"},{"owner":{"account_id":4166965,"reputation":329,"user_id":3415734,"accept_rate":43,"display_name":"William Roberts"},"score":0,"creation_date":1457546222,"post_id":35898991,"comment_id":59458664,"body_markdown":"I looked for regular expressions to feed into a class called simpledateformat, but I didn&#39;t see anything matching having six digits after a second with a T in the middle","body":"I looked for regular expressions to feed into a class called simpledateformat, but I didn&#39;t see anything matching having six digits after a second with a T in the middle"},{"owner":{"account_id":957044,"reputation":47672,"user_id":982161,"accept_rate":63,"display_name":"Xoc  epe&#250;pa "},"score":0,"creation_date":1457546347,"post_id":35898991,"comment_id":59458745,"body_markdown":"what is this 12:07:11.002061??, Hours , minutes, seconds, millis and???","body":"what is this 12:07:11.002061??, Hours , minutes, seconds, millis and???"},{"owner":{"account_id":4166965,"reputation":329,"user_id":3415734,"accept_rate":43,"display_name":"William Roberts"},"score":1,"creation_date":1457546433,"post_id":35898991,"comment_id":59458791,"body_markdown":"I&#39;m assuming microseconds I guess?","body":"I&#39;m assuming microseconds I guess?"},{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1457547063,"post_id":35898991,"comment_id":59459161,"body_markdown":"The last three digits of the microseconds won&#39;t be very useful :-) Just discovered that only SSS works. Use SSS000 - no system will give you the last three accurately.","body":"The last three digits of the microseconds won&#39;t be very useful :-) Just discovered that only SSS works. Use SSS000 - no system will give you the last three accurately."}],"answers":[{"tags":[],"owner":{"account_id":957044,"reputation":47672,"user_id":982161,"accept_rate":63,"display_name":"Xoc  epe&#250;pa "},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1457546967,"creation_date":1457546749,"answer_id":35899246,"question_id":35898991,"body_markdown":"You question can be solver without joda or 3rd libs..\n\n    String pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSSSS&quot;;\n    System.out.println(new SimpleDateFormat(pattern).format(new Date()));\n\nthis will print...\n\n&gt; 2016-03-09T19:04:53.000707\n&gt;\n&gt; 2016-03-09T19:04:53.000707\n&gt;\n&gt; 2016-03-09T19:04:53.000708","title":"How do I produce a timestamp/datetime string of a certain format in Java","body":"<p>You question can be solver without joda or 3rd libs..</p>\n<pre><code>String pattern = &quot;yyyy-MM-dd'T'HH:mm:ss.SSSSSS&quot;;\nSystem.out.println(new SimpleDateFormat(pattern).format(new Date()));\n</code></pre>\n<p>this will print...</p>\n<blockquote>\n<p>2016-03-09T19:04:53.000707</p>\n<p>2016-03-09T19:04:53.000707</p>\n<p>2016-03-09T19:04:53.000708</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457548091,"creation_date":1457548091,"answer_id":35899686,"question_id":35898991,"body_markdown":"Java 1.8 has the full range of formatting capabilities. This doesn&#39;t mean that micro- and nanoseconds are real.\r\n\r\n    import java.time.LocalDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    String pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSSSS&quot;;\r\n    System.out.println(DateTimeFormatter.ofPattern(pattern).format(LocalDateTime.now()));","title":"How do I produce a timestamp/datetime string of a certain format in Java","body":"<p>Java 1.8 has the full range of formatting capabilities. This doesn't mean that micro- and nanoseconds are real.</p>\n\n<pre><code>import java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nString pattern = \"yyyy-MM-dd'T'HH:mm:ss.SSSSSS\";\nSystem.out.println(DateTimeFormatter.ofPattern(pattern).format(LocalDateTime.now()));\n</code></pre>\n"}],"owner":{"account_id":4166965,"reputation":329,"user_id":3415734,"accept_rate":43,"display_name":"William Roberts"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1236,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"answer_count":2,"score":-6,"last_activity_date":1672759758,"creation_date":1457545979,"question_id":35898991,"body_markdown":"I&#39;m writing a Java program where I want to produce a timestamp/datetime string reflecting the current time of this format: &quot;**2015-02-07T12:07:11.002061**&quot;. How exactly would I do that?","title":"How do I produce a timestamp/datetime string of a certain format in Java","body":"<p>I'm writing a Java program where I want to produce a timestamp/datetime string reflecting the current time of this format: \"<strong>2015-02-07T12:07:11.002061</strong>\". How exactly would I do that?</p>\n"},{"tags":["java","spring-boot","rabbitmq","spring-amqp","spring-rabbit"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672759462,"creation_date":1672759462,"answer_id":74995326,"question_id":74920174,"body_markdown":"The issue was due to the `@Primary` template being injected as the listener (because it implements `ChannelAwareMessageListener`).\r\n\r\nThe solution was to narrow the type of the dependency, from \r\n\r\n```java\r\n@Bean\r\npublic MessageListenerAdapter listenerMessageQueueAdapter(ChannelAwareMessageListener messageBrokerReceiver) {\r\n    return new MessageListenerAdapter(messageBrokerReceiver);\r\n}\r\n```\r\n\r\n```java\r\n@Bean\r\npublic MessageListenerAdapter listenerMessageQueueAdapter(MessageBrokerReceiver messageBrokerReceiver) {\r\n    return new MessageListenerAdapter(messageBrokerReceiver);\r\n}\r\n```\r\n\r\nFurthermore, the adapter is unnecessary because `messageBrokerReceiver` implements `ChannelAwareMessageListener` so no adaptation is needed. The adapter is intended to invoke a POJO listener.","title":"Caused by: org.springframework.amqp.AmqpRejectAndDontRequeueException: No correlation header in reply","body":"<p>The issue was due to the <code>@Primary</code> template being injected as the listener (because it implements <code>ChannelAwareMessageListener</code>).</p>\n<p>The solution was to narrow the type of the dependency, from</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic MessageListenerAdapter listenerMessageQueueAdapter(ChannelAwareMessageListener messageBrokerReceiver) {\n    return new MessageListenerAdapter(messageBrokerReceiver);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic MessageListenerAdapter listenerMessageQueueAdapter(MessageBrokerReceiver messageBrokerReceiver) {\n    return new MessageListenerAdapter(messageBrokerReceiver);\n}\n</code></pre>\n<p>Furthermore, the adapter is unnecessary because <code>messageBrokerReceiver</code> implements <code>ChannelAwareMessageListener</code> so no adaptation is needed. The adapter is intended to invoke a POJO listener.</p>\n"}],"owner":{"account_id":12256914,"reputation":59,"user_id":8945727,"display_name":"Marcos Stefani Rosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":407,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74995326,"answer_count":1,"score":0,"last_activity_date":1672759462,"creation_date":1672056802,"question_id":74920174,"body_markdown":"I&#39;m trying to migrate the spring boot parent and I had the displeasure of starting to receive an error message when trying to consume the messages. The error is the title, and this occurred when trying to update the spring parent. \r\n\r\n*obs. Service queues are not request reply queues*\r\n\r\nPrevious: \r\n - org.springframework.boot:spring-boot-starter-web:jar:2.4.3\r\n - org.springframework.boot:spring-boot-starter-amqp:jar:2.4.3\r\n\r\nAfter with problem: \r\n - org.springframework.boot:spring-boot-starter-web:jar:2.7.5\r\n - org.springframework.boot:spring-boot-starter-amqp:jar:2.7.5\r\n\r\nError:\r\n```\r\n2022-12-26 11:28:12.175 [notificationsContainer-1] WARN  o.s.a.r.l.ConditionalRejectingErrorHandler - Execution of Rabbit message listener failed.\r\norg.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener threw exception\r\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.wrapToListenerExecutionFailedExceptionIfNeeded(AbstractMessageListenerContainer.java:1771) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1661) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1576) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1564) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1555) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1499) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:992) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:939) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:84) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1316) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1222) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nCaused by: org.springframework.amqp.AmqpRejectAndDontRequeueException: No correlation header in reply\r\n\tat org.springframework.amqp.rabbit.core.RabbitTemplate.onMessage(RabbitTemplate.java:2663) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.adapter.MessageListenerAdapter.onMessage(MessageListenerAdapter.java:273) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1657) ~[spring-rabbit-2.4.5.jar:2.4.5]\r\n\t... 10 common frames omitted\r\n```\r\n\r\nHere&#39;s how I&#39;m configuring it.\r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class MessageQueueConfiguration {\r\n    private static final String BROKER_NOTIFICATIONS = &quot;notifications&quot;;\r\n    private static final String BROKER_USERS = &quot;users&quot;;\r\n    private static final String BROKER_ADMIN = &quot;admin&quot;;\r\n    private static final String BROKER_REPORTS = &quot;reports&quot;;\r\n\r\n    private final MessageQueueProperties messageQueueProperties;\r\n    private final BrokerProperties brokerProperties;\r\n    private final ObjectMapper objectMapper;\r\n\r\n    @Bean\r\n    public AmqpAdmin brokerUsersAmqpAdmin(@Qualifier(&quot;brokerUsersConnectionFactory&quot;) ConnectionFactory brokerUsersConnectionFactory) {\r\n        return getAmqpAdmin(brokerUsersConnectionFactory);\r\n    }\r\n\r\n    @Bean\r\n    public AmqpAdmin brokerAdminAmqpAdmin(@Qualifier(&quot;brokerAdminConnectionFactory&quot;) ConnectionFactory brokerAdminConnectionFactory) {\r\n        return getAmqpAdmin(brokerAdminConnectionFactory);\r\n    }\r\n\r\n    @Bean\r\n    public AmqpAdmin brokerNotificationsAmqpAdmin(@Qualifier(&quot;brokerNotificationsConnectionFactory&quot;) ConnectionFactory brokerNotificationsConnectionFactory) {\r\n        return getAmqpAdmin(brokerNotificationsConnectionFactory);\r\n    }\r\n\r\n    @Bean\r\n    public AmqpAdmin brokerReportsAmqpAdmin(@Qualifier(&quot;brokerReportsConnectionFactory&quot;) ConnectionFactory brokerReportsConnectionFactory) {\r\n        return getAmqpAdmin(brokerReportsConnectionFactory);\r\n    }\r\n\r\n    @Bean\r\n    public MessageListenerAdapter listenerMessageQueueAdapter(ChannelAwareMessageListener messageBrokerReceiver) {\r\n        return new MessageListenerAdapter(messageBrokerReceiver);\r\n    }\r\n\r\n    @Bean\r\n    public CachingConnectionFactory brokerNotificationsConnectionFactory() {\r\n        return createCachingConnectionFactory(BROKER_NOTIFICATIONS);\r\n    }\r\n\r\n    @Bean\r\n    public CachingConnectionFactory brokerUsersConnectionFactory() {\r\n        return createCachingConnectionFactory(BROKER_USERS);\r\n    }\r\n\r\n    @Bean\r\n    public CachingConnectionFactory brokerAdminConnectionFactory() {\r\n        return createCachingConnectionFactory(BROKER_ADMIN);\r\n    }\r\n\r\n    @Bean\r\n    public CachingConnectionFactory brokerReportsConnectionFactory() {\r\n        return createCachingConnectionFactory(BROKER_REPORTS);\r\n    }\r\n\r\n    @Bean\r\n    public SimpleMessageListenerContainer notificationsContainer(@Qualifier(&quot;brokerNotificationsConnectionFactory&quot;) ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter) {\r\n        return createMessageListenerContainer(connectionFactory, messageListenerAdapter);\r\n    }\r\n\r\n    @Bean\r\n    public SimpleMessageListenerContainer usersContainer(@Qualifier(&quot;brokerUsersConnectionFactory&quot;) ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter) {\r\n        return createMessageListenerContainer(connectionFactory, messageListenerAdapter);\r\n    }\r\n\r\n    @Bean\r\n    public SimpleMessageListenerContainer adminContainer(@Qualifier(&quot;brokerAdminConnectionFactory&quot;) ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter) {\r\n        return createMessageListenerContainer(connectionFactory, messageListenerAdapter);\r\n    }\r\n\r\n    @Bean\r\n    public SimpleMessageListenerContainer reportsContainer(@Qualifier(&quot;brokerReportsConnectionFactory&quot;) ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter) {\r\n        return createMessageListenerContainer(connectionFactory, messageListenerAdapter);\r\n    }\r\n\r\n    private SimpleMessageListenerContainer createMessageListenerContainer(ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter){\r\n        SimpleMessageListenerContainer container = new SimpleMessageListenerContainer();\r\n\r\n        container.setConnectionFactory(connectionFactory);\r\n        container.setQueueNames(\r\n                messageQueueProperties.getQueue1(),\r\n                messageQueueProperties.getQueue2(),\r\n                messageQueueProperties.getQueue3(),\r\n                messageQueueProperties.getQueue4(),\r\n                messageQueueProperties.getQueue5(),\r\n                messageQueueProperties.getQueue6(),\r\n                messageQueueProperties.getQueue7()\r\n        );\r\n        container.setMessageListener(messageListenerAdapter);\r\n        container.setMaxConcurrentConsumers(50);\r\n        container.setAcknowledgeMode(AcknowledgeMode.MANUAL);\r\n        container.setMissingQueuesFatal(false);\r\n        container.setFailedDeclarationRetryInterval(60000);\r\n\r\n        return container;\r\n    }\r\n\r\n    private CachingConnectionFactory createCachingConnectionFactory(String brokerName) {\r\n        CachingConnectionFactory cachingConnectionFactory = new CachingConnectionFactory(\r\n                brokerProperties.getBrokers().get(brokerName).getHost(),\r\n                brokerProperties.getBrokers().get(brokerName).getPort());\r\n        cachingConnectionFactory.setUsername(brokerProperties.getBrokers().get(brokerName).getUsername());\r\n        cachingConnectionFactory.setPassword(brokerProperties.getBrokers().get(brokerName).getPassword());\r\n        cachingConnectionFactory.setConnectionTimeout(brokerProperties.getBrokers().get(brokerName).getTimeout());\r\n        return cachingConnectionFactory;\r\n    }\r\n\r\n    private Queue queue1() {\r\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\r\n        return new Queue(messageQueueProperties.getEmailQueueName(), true, false, false, queueArguments);\r\n    }\r\n\r\n    private Queue queue2() {\r\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\r\n        return new Queue(messageQueueProperties.getIosPushQueueName(), true, false, false, queueArguments);\r\n    }\r\n\r\n    private Queue queue3() {\r\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\r\n        return new Queue(messageQueueProperties.getContentCardQueueName(), true, false, false, queueArguments);\r\n    }\r\n\r\n    private Queue queue4() {\r\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\r\n        return new Queue(messageQueueProperties.getCanvasQueueName(), true, false, false, queueArguments);\r\n    }\r\n\r\n    private Queue queue5() {\r\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\r\n        return new Queue(messageQueueProperties.getCampaignQueueName(), true, false, false, queueArguments);\r\n    }\r\n\r\n    private Queue queue6() {\r\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\r\n        return new Queue(messageQueueProperties.getPushBrazeQueueName(), true, false, false, queueArguments);\r\n    }\r\n\r\n    private Queue queue7() {\r\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\r\n        return new Queue(messageQueueProperties.getEmailBouncedStatusName(), true, false, false, queueArguments);\r\n    }\r\n\r\n    @Bean\r\n    public FanoutExchange exchange() {\r\n        return new FanoutExchange(messageQueueProperties.getPushNotificationExchangeName());\r\n    }\r\n\r\n    @Bean\r\n    public Binding binding(Queue queue, FanoutExchange exchange) {\r\n        return BindingBuilder.bind(queue).to(exchange);\r\n    }\r\n\r\n\r\n    private AmqpAdmin getAmqpAdmin(ConnectionFactory connectionFactory){\r\n        AmqpAdmin amqpAdmin = new RabbitAdmin(connectionFactory);\r\n        amqpAdmin.declareQueue(queue1());\r\n        amqpAdmin.declareQueue(queue2());\r\n        amqpAdmin.declareQueue(queue4());\r\n        amqpAdmin.declareQueue(queue3());\r\n        amqpAdmin.declareQueue(queue5());\r\n        amqpAdmin.declareQueue(queue6());\r\n        amqpAdmin.declareQueue(queue7());\r\n\r\n        amqpAdmin.declareExchange(exchange());\r\n        amqpAdmin.declareBinding(binding(queue6(), exchange()));\r\n\r\n        return amqpAdmin;\r\n    }\r\n\r\n    @Bean\r\n    public Jackson2JsonMessageConverter jackson2JsonMessageConverter(ObjectMapper objectMapper) {\r\n        objectMapper.setDefaultPropertyInclusion(\r\n                JsonInclude.Value.construct(JsonInclude.Include.ALWAYS, JsonInclude.Include.NON_NULL));\r\n        return new Jackson2JsonMessageConverter(objectMapper);\r\n    }\r\n\r\n    private RabbitTemplate buildTemplate() {\r\n        RabbitTemplate rabbitTemplate = new RabbitTemplate(createCachingConnectionFactory(BROKER_NOTIFICATIONS));\r\n        rabbitTemplate.setMessageConverter(jackson2JsonMessageConverter(objectMapper));\r\n        return rabbitTemplate;\r\n    }\r\n\r\n    @Bean\r\n    public RabbitTemplate eventsTemplate() {\r\n        RabbitTemplate rabbitTemplate = buildTemplate();\r\n        rabbitTemplate.setRoutingKey(messageQueueProperties.getCampaignQueueName());\r\n        return buildTemplate();\r\n    }\r\n\r\n    @Bean\r\n    @Primary\r\n    public RabbitTemplate defaultRabbitTemplate() {\r\n        return buildTemplate();\r\n    }\r\n}\r\n```","title":"Caused by: org.springframework.amqp.AmqpRejectAndDontRequeueException: No correlation header in reply","body":"<p>I'm trying to migrate the spring boot parent and I had the displeasure of starting to receive an error message when trying to consume the messages. The error is the title, and this occurred when trying to update the spring parent.</p>\n<p><em>obs. Service queues are not request reply queues</em></p>\n<p>Previous:</p>\n<ul>\n<li>org.springframework.boot:spring-boot-starter-web:jar:2.4.3</li>\n<li>org.springframework.boot:spring-boot-starter-amqp:jar:2.4.3</li>\n</ul>\n<p>After with problem:</p>\n<ul>\n<li>org.springframework.boot:spring-boot-starter-web:jar:2.7.5</li>\n<li>org.springframework.boot:spring-boot-starter-amqp:jar:2.7.5</li>\n</ul>\n<p>Error:</p>\n<pre><code>2022-12-26 11:28:12.175 [notificationsContainer-1] WARN  o.s.a.r.l.ConditionalRejectingErrorHandler - Execution of Rabbit message listener failed.\norg.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener threw exception\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.wrapToListenerExecutionFailedExceptionIfNeeded(AbstractMessageListenerContainer.java:1771) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1661) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1576) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1564) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1555) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1499) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:992) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:939) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:84) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1316) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1222) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: org.springframework.amqp.AmqpRejectAndDontRequeueException: No correlation header in reply\n    at org.springframework.amqp.rabbit.core.RabbitTemplate.onMessage(RabbitTemplate.java:2663) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.adapter.MessageListenerAdapter.onMessage(MessageListenerAdapter.java:273) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1657) ~[spring-rabbit-2.4.5.jar:2.4.5]\n    ... 10 common frames omitted\n</code></pre>\n<p>Here's how I'm configuring it.</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class MessageQueueConfiguration {\n    private static final String BROKER_NOTIFICATIONS = &quot;notifications&quot;;\n    private static final String BROKER_USERS = &quot;users&quot;;\n    private static final String BROKER_ADMIN = &quot;admin&quot;;\n    private static final String BROKER_REPORTS = &quot;reports&quot;;\n\n    private final MessageQueueProperties messageQueueProperties;\n    private final BrokerProperties brokerProperties;\n    private final ObjectMapper objectMapper;\n\n    @Bean\n    public AmqpAdmin brokerUsersAmqpAdmin(@Qualifier(&quot;brokerUsersConnectionFactory&quot;) ConnectionFactory brokerUsersConnectionFactory) {\n        return getAmqpAdmin(brokerUsersConnectionFactory);\n    }\n\n    @Bean\n    public AmqpAdmin brokerAdminAmqpAdmin(@Qualifier(&quot;brokerAdminConnectionFactory&quot;) ConnectionFactory brokerAdminConnectionFactory) {\n        return getAmqpAdmin(brokerAdminConnectionFactory);\n    }\n\n    @Bean\n    public AmqpAdmin brokerNotificationsAmqpAdmin(@Qualifier(&quot;brokerNotificationsConnectionFactory&quot;) ConnectionFactory brokerNotificationsConnectionFactory) {\n        return getAmqpAdmin(brokerNotificationsConnectionFactory);\n    }\n\n    @Bean\n    public AmqpAdmin brokerReportsAmqpAdmin(@Qualifier(&quot;brokerReportsConnectionFactory&quot;) ConnectionFactory brokerReportsConnectionFactory) {\n        return getAmqpAdmin(brokerReportsConnectionFactory);\n    }\n\n    @Bean\n    public MessageListenerAdapter listenerMessageQueueAdapter(ChannelAwareMessageListener messageBrokerReceiver) {\n        return new MessageListenerAdapter(messageBrokerReceiver);\n    }\n\n    @Bean\n    public CachingConnectionFactory brokerNotificationsConnectionFactory() {\n        return createCachingConnectionFactory(BROKER_NOTIFICATIONS);\n    }\n\n    @Bean\n    public CachingConnectionFactory brokerUsersConnectionFactory() {\n        return createCachingConnectionFactory(BROKER_USERS);\n    }\n\n    @Bean\n    public CachingConnectionFactory brokerAdminConnectionFactory() {\n        return createCachingConnectionFactory(BROKER_ADMIN);\n    }\n\n    @Bean\n    public CachingConnectionFactory brokerReportsConnectionFactory() {\n        return createCachingConnectionFactory(BROKER_REPORTS);\n    }\n\n    @Bean\n    public SimpleMessageListenerContainer notificationsContainer(@Qualifier(&quot;brokerNotificationsConnectionFactory&quot;) ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter) {\n        return createMessageListenerContainer(connectionFactory, messageListenerAdapter);\n    }\n\n    @Bean\n    public SimpleMessageListenerContainer usersContainer(@Qualifier(&quot;brokerUsersConnectionFactory&quot;) ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter) {\n        return createMessageListenerContainer(connectionFactory, messageListenerAdapter);\n    }\n\n    @Bean\n    public SimpleMessageListenerContainer adminContainer(@Qualifier(&quot;brokerAdminConnectionFactory&quot;) ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter) {\n        return createMessageListenerContainer(connectionFactory, messageListenerAdapter);\n    }\n\n    @Bean\n    public SimpleMessageListenerContainer reportsContainer(@Qualifier(&quot;brokerReportsConnectionFactory&quot;) ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter) {\n        return createMessageListenerContainer(connectionFactory, messageListenerAdapter);\n    }\n\n    private SimpleMessageListenerContainer createMessageListenerContainer(ConnectionFactory connectionFactory, MessageListenerAdapter messageListenerAdapter){\n        SimpleMessageListenerContainer container = new SimpleMessageListenerContainer();\n\n        container.setConnectionFactory(connectionFactory);\n        container.setQueueNames(\n                messageQueueProperties.getQueue1(),\n                messageQueueProperties.getQueue2(),\n                messageQueueProperties.getQueue3(),\n                messageQueueProperties.getQueue4(),\n                messageQueueProperties.getQueue5(),\n                messageQueueProperties.getQueue6(),\n                messageQueueProperties.getQueue7()\n        );\n        container.setMessageListener(messageListenerAdapter);\n        container.setMaxConcurrentConsumers(50);\n        container.setAcknowledgeMode(AcknowledgeMode.MANUAL);\n        container.setMissingQueuesFatal(false);\n        container.setFailedDeclarationRetryInterval(60000);\n\n        return container;\n    }\n\n    private CachingConnectionFactory createCachingConnectionFactory(String brokerName) {\n        CachingConnectionFactory cachingConnectionFactory = new CachingConnectionFactory(\n                brokerProperties.getBrokers().get(brokerName).getHost(),\n                brokerProperties.getBrokers().get(brokerName).getPort());\n        cachingConnectionFactory.setUsername(brokerProperties.getBrokers().get(brokerName).getUsername());\n        cachingConnectionFactory.setPassword(brokerProperties.getBrokers().get(brokerName).getPassword());\n        cachingConnectionFactory.setConnectionTimeout(brokerProperties.getBrokers().get(brokerName).getTimeout());\n        return cachingConnectionFactory;\n    }\n\n    private Queue queue1() {\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\n        return new Queue(messageQueueProperties.getEmailQueueName(), true, false, false, queueArguments);\n    }\n\n    private Queue queue2() {\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\n        return new Queue(messageQueueProperties.getIosPushQueueName(), true, false, false, queueArguments);\n    }\n\n    private Queue queue3() {\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\n        return new Queue(messageQueueProperties.getContentCardQueueName(), true, false, false, queueArguments);\n    }\n\n    private Queue queue4() {\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\n        return new Queue(messageQueueProperties.getCanvasQueueName(), true, false, false, queueArguments);\n    }\n\n    private Queue queue5() {\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\n        return new Queue(messageQueueProperties.getCampaignQueueName(), true, false, false, queueArguments);\n    }\n\n    private Queue queue6() {\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\n        return new Queue(messageQueueProperties.getPushBrazeQueueName(), true, false, false, queueArguments);\n    }\n\n    private Queue queue7() {\n        Map&lt;String, Object&gt; queueArguments = new HashMap&lt;&gt;();\n        return new Queue(messageQueueProperties.getEmailBouncedStatusName(), true, false, false, queueArguments);\n    }\n\n    @Bean\n    public FanoutExchange exchange() {\n        return new FanoutExchange(messageQueueProperties.getPushNotificationExchangeName());\n    }\n\n    @Bean\n    public Binding binding(Queue queue, FanoutExchange exchange) {\n        return BindingBuilder.bind(queue).to(exchange);\n    }\n\n\n    private AmqpAdmin getAmqpAdmin(ConnectionFactory connectionFactory){\n        AmqpAdmin amqpAdmin = new RabbitAdmin(connectionFactory);\n        amqpAdmin.declareQueue(queue1());\n        amqpAdmin.declareQueue(queue2());\n        amqpAdmin.declareQueue(queue4());\n        amqpAdmin.declareQueue(queue3());\n        amqpAdmin.declareQueue(queue5());\n        amqpAdmin.declareQueue(queue6());\n        amqpAdmin.declareQueue(queue7());\n\n        amqpAdmin.declareExchange(exchange());\n        amqpAdmin.declareBinding(binding(queue6(), exchange()));\n\n        return amqpAdmin;\n    }\n\n    @Bean\n    public Jackson2JsonMessageConverter jackson2JsonMessageConverter(ObjectMapper objectMapper) {\n        objectMapper.setDefaultPropertyInclusion(\n                JsonInclude.Value.construct(JsonInclude.Include.ALWAYS, JsonInclude.Include.NON_NULL));\n        return new Jackson2JsonMessageConverter(objectMapper);\n    }\n\n    private RabbitTemplate buildTemplate() {\n        RabbitTemplate rabbitTemplate = new RabbitTemplate(createCachingConnectionFactory(BROKER_NOTIFICATIONS));\n        rabbitTemplate.setMessageConverter(jackson2JsonMessageConverter(objectMapper));\n        return rabbitTemplate;\n    }\n\n    @Bean\n    public RabbitTemplate eventsTemplate() {\n        RabbitTemplate rabbitTemplate = buildTemplate();\n        rabbitTemplate.setRoutingKey(messageQueueProperties.getCampaignQueueName());\n        return buildTemplate();\n    }\n\n    @Bean\n    @Primary\n    public RabbitTemplate defaultRabbitTemplate() {\n        return buildTemplate();\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","prometheus","kafka-consumer-api","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1672759406,"post_id":74994720,"comment_id":132344114,"body_markdown":"How are you querying Prometheus server to compare? Perhaps you should plot the data over time instead of point-in-time queries?","body":"How are you querying Prometheus server to compare? Perhaps you should plot the data over time instead of point-in-time queries?"},{"owner":{"account_id":9212208,"reputation":1425,"user_id":6844910,"display_name":"Dushan"},"score":0,"creation_date":1672796156,"post_id":74994720,"comment_id":132353112,"body_markdown":"@OneCricketeer I have plot the data over time using promql and i found few messages were missing. that why i checked by calling the `mydomain/prometheus` endpoint and calculated the the container wise consumed messages. Still i can see few messages were missing.","body":"@OneCricketeer I have plot the data over time using promql and i found few messages were missing. that why i checked by calling the <code>mydomain&#47;prometheus</code> endpoint and calculated the the container wise consumed messages. Still i can see few messages were missing."}],"owner":{"account_id":9212208,"reputation":1425,"user_id":6844910,"display_name":"Dushan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672759312,"creation_date":1672756208,"question_id":74994720,"body_markdown":"i have a kafka consumer and i&#39;m using spring-kafka 2.8.6. I consume batch wise and my consumer looks like below.\r\n\r\n \r\n\r\n     @KafkaListener(topics = &quot;mytopic&quot;, groupId = &quot;mygroup&quot;,\r\n              autoStartup = &quot;true&quot;, concurrency = &quot;3&quot;, id = &quot;my-listener&quot;,\r\n              containerFactory = &quot;KafkaListenerContainerFactory&quot;)\r\n      public void consume(List&lt;ConsumerRecord&gt; records) {\r\n    \r\n        // process messages\r\n    \r\n      }\r\n\r\n\r\nFor consumer i wrote a load test and i checked the metrics using defauls spring-kafka metrics. I kept a variable and got the number of messages consumed from the consumer and i checked the consumed count from the spring-kafka defauls metrics using prometheus endpoint. \r\nI was able to find the correct metric under the name of `spring.kafka.listener` . \r\n\r\nBut when o compared the number of consumed messages from the consumer and compared it with the prometheus count, there is a small mismatch (for 3000 consumed messages, 70-100 messages were missing). \r\n\r\nI checked the dlt topics and nothing has gone to dlt. Even if it has gone to dlt, i could have seen it in the prometheus metrics.\r\n\r\nIs this a known issue or am i missing something ? \r\n\r\nbtw my application properties file for prometheus looks like below\r\n\r\n    management:\r\n      endpoints:\r\n        web:\r\n          exposure:\r\n            include: health,prometheus,env\r\n          base-path: /\r\n      endpoint:\r\n        health:\r\n          show-details: always\r\n      metrics:\r\n        web:\r\n          server:\r\n            request:\r\n              autotime:\r\n                enabled: true\r\n                percentiles-histogram: true\r\n        distribution:\r\n          sla:\r\n            http:\r\n              server:\r\n                requests: 300ms,500ms\r\n\r\nand part of my prometheus endpoint metric looks like below\r\n\r\n    spring_kafka_listener_seconds Kafka Listener Timer\r\n    spring_kafka_listener_seconds summary\r\n    spring_kafka_listener_seconds_count{exception=&quot;none&quot;,name=&quot;my-listener-1&quot;,result=&quot;success&quot;,} 4730.0\r\n    spring_kafka_listener_seconds_sum{exception=&quot;none&quot;,name=&quot;my-listener-1&quot;,result=&quot;success&quot;,} 2.941328279\r\n\r\n\r\nI use below dependencies \r\n\r\n \r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n                &lt;version&gt;2.7.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n                &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n                &lt;version&gt;1.9.3&lt;/version&gt;\r\n            &lt;/dependency&gt;","title":"spring kafka metrics value mismatch","body":"<p>i have a kafka consumer and i'm using spring-kafka 2.8.6. I consume batch wise and my consumer looks like below.</p>\n<pre><code> @KafkaListener(topics = &quot;mytopic&quot;, groupId = &quot;mygroup&quot;,\n          autoStartup = &quot;true&quot;, concurrency = &quot;3&quot;, id = &quot;my-listener&quot;,\n          containerFactory = &quot;KafkaListenerContainerFactory&quot;)\n  public void consume(List&lt;ConsumerRecord&gt; records) {\n\n    // process messages\n\n  }\n</code></pre>\n<p>For consumer i wrote a load test and i checked the metrics using defauls spring-kafka metrics. I kept a variable and got the number of messages consumed from the consumer and i checked the consumed count from the spring-kafka defauls metrics using prometheus endpoint.\nI was able to find the correct metric under the name of <code>spring.kafka.listener</code> .</p>\n<p>But when o compared the number of consumed messages from the consumer and compared it with the prometheus count, there is a small mismatch (for 3000 consumed messages, 70-100 messages were missing).</p>\n<p>I checked the dlt topics and nothing has gone to dlt. Even if it has gone to dlt, i could have seen it in the prometheus metrics.</p>\n<p>Is this a known issue or am i missing something ?</p>\n<p>btw my application properties file for prometheus looks like below</p>\n<pre><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: health,prometheus,env\n      base-path: /\n  endpoint:\n    health:\n      show-details: always\n  metrics:\n    web:\n      server:\n        request:\n          autotime:\n            enabled: true\n            percentiles-histogram: true\n    distribution:\n      sla:\n        http:\n          server:\n            requests: 300ms,500ms\n</code></pre>\n<p>and part of my prometheus endpoint metric looks like below</p>\n<pre><code>spring_kafka_listener_seconds Kafka Listener Timer\nspring_kafka_listener_seconds summary\nspring_kafka_listener_seconds_count{exception=&quot;none&quot;,name=&quot;my-listener-1&quot;,result=&quot;success&quot;,} 4730.0\nspring_kafka_listener_seconds_sum{exception=&quot;none&quot;,name=&quot;my-listener-1&quot;,result=&quot;success&quot;,} 2.941328279\n</code></pre>\n<p>I use below dependencies</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;version&gt;2.7.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n            &lt;version&gt;1.9.3&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1409669001,"post_id":25626100,"comment_id":40036386,"body_markdown":"So what&#39;s the problem? I can see one potential one: for invoking an _instance_ method of a class you need ... well ... an instance of that class.","body":"So what&#39;s the problem? I can see one potential one: for invoking an <i>instance</i> method of a class you need ... well ... an instance of that class."}],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1672759278,"creation_date":1409669123,"answer_id":25626199,"question_id":25626100,"body_markdown":"There are two problems in your code\r\n\r\n- you are using `getMethod` which can only return `public` methods, to get private ones use `getDeclaredMethod` on type which *declares* it.\r\n- you are invoking your method on `&quot;method&quot;` String literal instead of instance of `A` class (String doesn&#39;t have this method, so you can&#39;t invoke it on its instance. For now your code is equivalent to something like `&quot;method&quot;.method(yourList)` which is not correct).\r\n\r\nYour code should look like \r\n\r\n```java\r\nClass&lt;A&gt; clazz = A.class;\r\nMethod met = clazz.getDeclaredMethod(&quot;method&quot;, List.class);\r\n//                    ^^^^^^^^\r\nmet.setAccessible(true);\r\nString res = (String) met.invoke(new A(), new ArrayList&lt;Integer&gt;());\r\n//                               ^^^^^^^ \r\n\r\n//OR pass already existing instance of A class\r\nA someA = new A(); // instance of A on which you want to call the method\r\n// \r\nString res = (String) met.invoke(someA, new ArrayList&lt;Integer&gt;());\r\n\r\nSystem.out.println(res);\r\n```","title":"How to invoke private method via Reflection when parameter of method is List?","body":"<p>There are two problems in your code</p>\n<ul>\n<li>you are using <code>getMethod</code> which can only return <code>public</code> methods, to get private ones use <code>getDeclaredMethod</code> on type which <em>declares</em> it.</li>\n<li>you are invoking your method on <code>&quot;method&quot;</code> String literal instead of instance of <code>A</code> class (String doesn't have this method, so you can't invoke it on its instance. For now your code is equivalent to something like <code>&quot;method&quot;.method(yourList)</code> which is not correct).</li>\n</ul>\n<p>Your code should look like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class&lt;A&gt; clazz = A.class;\nMethod met = clazz.getDeclaredMethod(&quot;method&quot;, List.class);\n//                    ^^^^^^^^\nmet.setAccessible(true);\nString res = (String) met.invoke(new A(), new ArrayList&lt;Integer&gt;());\n//                               ^^^^^^^ \n\n//OR pass already existing instance of A class\nA someA = new A(); // instance of A on which you want to call the method\n// \nString res = (String) met.invoke(someA, new ArrayList&lt;Integer&gt;());\n\nSystem.out.println(res);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6135552,"reputation":2268,"user_id":4784537,"display_name":"Ahmad Al-Kurdi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1577376232,"creation_date":1577376232,"answer_id":59490734,"question_id":25626100,"body_markdown":"You can do it in this way if you need to create an Instance of the `A` by reflection too \r\n\r\n     public static void main(String[] args) throws Exception {\r\n        Class&lt;?&gt; aClass = A.class;\r\n        Constructor&lt;?&gt; constructor = aClass.getConstructors()[0];\r\n        Object a = constructor.newInstance(); // create instance of a by reflection\r\n        Method method = a.getClass().getDeclaredMethod(&quot;method&quot;, List.class); // getDeclaredMethod for private\r\n        method.setAccessible(true); // to enable accessing private method\r\n        String result = (String) method.invoke(a, new ArrayList&lt;Integer&gt;());\r\n        System.out.println(result);\r\n      }","title":"How to invoke private method via Reflection when parameter of method is List?","body":"<p>You can do it in this way if you need to create an Instance of the <code>A</code> by reflection too </p>\n\n<pre><code> public static void main(String[] args) throws Exception {\n    Class&lt;?&gt; aClass = A.class;\n    Constructor&lt;?&gt; constructor = aClass.getConstructors()[0];\n    Object a = constructor.newInstance(); // create instance of a by reflection\n    Method method = a.getClass().getDeclaredMethod(\"method\", List.class); // getDeclaredMethod for private\n    method.setAccessible(true); // to enable accessing private method\n    String result = (String) method.invoke(a, new ArrayList&lt;Integer&gt;());\n    System.out.println(result);\n  }\n</code></pre>\n"}],"owner":{"account_id":3137721,"reputation":2091,"user_id":2653877,"accept_rate":56,"display_name":"Alex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13800,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":25626199,"answer_count":2,"score":8,"last_activity_date":1672759278,"creation_date":1409668871,"question_id":25626100,"body_markdown":"How can I invoke private method via Reflection API?\r\n\r\nMy code\r\n\r\n    public class A {\r\n        private String method(List&lt;Integer&gt; params){\r\n            return &quot;abc&quot;;\r\n        }\r\n    }\r\n\r\nAnd test\r\n\r\n    public class B {\r\n        public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {\r\n            Class&lt;A&gt; clazz = A.class;\r\n            Method met = clazz.getMethod(&quot;method&quot;, List.class);\r\n            met.setAccessible(true);\r\n            String res = (String) met.invoke(&quot;method&quot;, new ArrayList&lt;Integer&gt;());\r\n            System.out.println(res);\r\n        }\r\n    }\r\n","title":"How to invoke private method via Reflection when parameter of method is List?","body":"<p>How can I invoke private method via Reflection API?</p>\n\n<p>My code</p>\n\n<pre><code>public class A {\n    private String method(List&lt;Integer&gt; params){\n        return \"abc\";\n    }\n}\n</code></pre>\n\n<p>And test</p>\n\n<pre><code>public class B {\n    public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {\n        Class&lt;A&gt; clazz = A.class;\n        Method met = clazz.getMethod(\"method\", List.class);\n        met.setAccessible(true);\n        String res = (String) met.invoke(\"method\", new ArrayList&lt;Integer&gt;());\n        System.out.println(res);\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1672758896,"post_id":74987820,"comment_id":132343929,"body_markdown":"Why not create `@Bean NewTopic`, as documented in Spring-kafka docs?","body":"Why not create <code>@Bean NewTopic</code>, as documented in Spring-kafka docs?"},{"owner":{"account_id":9824794,"reputation":83,"user_id":7278153,"display_name":"Garrs"},"score":0,"creation_date":1672826259,"post_id":74987820,"comment_id":132358619,"body_markdown":"@OneCricketeer Because topics will be created in runtime.","body":"@OneCricketeer Because topics will be created in runtime."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672759084,"creation_date":1672759084,"answer_id":74995257,"question_id":74987820,"body_markdown":"If you want to improve this solution for hundreds of topics, as it is written, then `admin.createTopics` takes a whole collection, so don&#39;t use a singleton list.\r\n\r\nAlso, `admin.listTopics()` result can be cached so that you don&#39;t query all topics every time you create one more topic.\r\n\r\nOtherwise, I personally would use alternative solutions like Terraform rather than Spring. Since topics aren&#39;t going to need to be recreated very often (in the same Kafka cluster, at least), so your code might only be ran a handful of times, but you&#39;re needlessly increasing the size of your Spring app by dragging that TopicFactory class around. ","title":"Kafka AdminClient performance considerations","body":"<p>If you want to improve this solution for hundreds of topics, as it is written, then <code>admin.createTopics</code> takes a whole collection, so don't use a singleton list.</p>\n<p>Also, <code>admin.listTopics()</code> result can be cached so that you don't query all topics every time you create one more topic.</p>\n<p>Otherwise, I personally would use alternative solutions like Terraform rather than Spring. Since topics aren't going to need to be recreated very often (in the same Kafka cluster, at least), so your code might only be ran a handful of times, but you're needlessly increasing the size of your Spring app by dragging that TopicFactory class around.</p>\n"}],"owner":{"account_id":9824794,"reputation":83,"user_id":7278153,"display_name":"Garrs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672759264,"creation_date":1672701338,"question_id":74987820,"body_markdown":"I would like to dynamically create Kafka topics. In my case, there can be up to several hundred topics in the application. There can be multiple concurrent calls to this method for each topic during system startup. \r\n\r\nThe AdminClient object has local scope, so it will be created every time. I suspect that a socket and a connection to the Kafka broker are opened underneath, so this solution is not optimal in terms of performance, as there may be several hundred connections open in memory at any one time.\r\n\r\n```\r\nimport java.util.Collections;\r\nimport java.util.Properties;\r\nimport java.util.Set;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\nimport java.util.concurrent.ExecutionException;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.apache.kafka.clients.admin.Admin;\r\nimport org.apache.kafka.clients.admin.AdminClientConfig;\r\nimport org.apache.kafka.clients.admin.CreateTopicsResult;\r\nimport org.apache.kafka.clients.admin.NewTopic;\r\nimport org.apache.kafka.common.KafkaFuture;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\n@RequiredArgsConstructor\r\nclass TopicFactory {\r\n\r\n   private final Logger log = LoggerFactory.getLogger(TopicFactory.class);\r\n\r\n   private final Set&lt;String&gt; topics = ConcurrentHashMap.newKeySet();\r\n\r\n   @Value(&quot;${kafka.bootstrap.servers}&quot;)\r\n   private final String bootstrapServers;\r\n\r\n   @Value(&quot;${kafka.topic.replication.factor}&quot;)\r\n   private final String replicationFactor;\r\n   \r\n   void createTopicIfNotExists(String topicName, int partitionCount) {\r\n      if (topics.contains(topicName)) {\r\n         return;\r\n      }\r\n      Properties properties = new Properties();\r\n      properties.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n      try (Admin admin = Admin.create(properties)) {\r\n         if (isTopicExists(admin, topicName)) {\r\n            topics.add(topicName);\r\n            return;\r\n         }\r\n         NewTopic newTopic = new NewTopic(topicName, partitionCount, Short.parseShort(replicationFactor));\r\n         CreateTopicsResult result = admin.createTopics(Collections.singleton(newTopic));\r\n         KafkaFuture&lt;Void&gt; future = result.values().get(topicName);\r\n         try {\r\n            future.get();\r\n            topics.add(topicName);\r\n         } catch (InterruptedException e) {\r\n            Thread.currentThread().interrupt();\r\n            log.error(&quot;Interrupted exception occurred during topic creation&quot;, e);\r\n         } catch (ExecutionException e) {\r\n            log.error(&quot;Execution exception occurred during topic creation&quot;, e);\r\n         }\r\n      }\r\n   }\r\n\r\n   private boolean isTopicExists(Admin admin, String topicName) {\r\n      try {\r\n         return admin.listTopics().names().get().contains(topicName);\r\n      } catch (InterruptedException e) {\r\n         Thread.currentThread().interrupt();\r\n         log.error(&quot;Interrupted exception occurred during topic creation&quot;, e);\r\n         return false;\r\n      } catch (ExecutionException e) {\r\n         log.error(&quot;Execution exception occurred during topic creation&quot;, e);\r\n         return false;\r\n      }\r\n   }\r\n}\r\n```\r\n\r\n\r\nHow to improve the performance of this solution? Is connection caching a good idea? If so, in what way? As an initialized field in a class or maybe using e.g. Guava cache or `Suppliers.memoize(...)`? However, then the connection with the broker would have to be maintained all the time.","title":"Kafka AdminClient performance considerations","body":"<p>I would like to dynamically create Kafka topics. In my case, there can be up to several hundred topics in the application. There can be multiple concurrent calls to this method for each topic during system startup.</p>\n<p>The AdminClient object has local scope, so it will be created every time. I suspect that a socket and a connection to the Kafka broker are opened underneath, so this solution is not optimal in terms of performance, as there may be several hundred connections open in memory at any one time.</p>\n<pre><code>import java.util.Collections;\nimport java.util.Properties;\nimport java.util.Set;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.ExecutionException;\nimport lombok.RequiredArgsConstructor;\nimport org.apache.kafka.clients.admin.Admin;\nimport org.apache.kafka.clients.admin.AdminClientConfig;\nimport org.apache.kafka.clients.admin.CreateTopicsResult;\nimport org.apache.kafka.clients.admin.NewTopic;\nimport org.apache.kafka.common.KafkaFuture;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Service;\n\n@Service\n@RequiredArgsConstructor\nclass TopicFactory {\n\n   private final Logger log = LoggerFactory.getLogger(TopicFactory.class);\n\n   private final Set&lt;String&gt; topics = ConcurrentHashMap.newKeySet();\n\n   @Value(&quot;${kafka.bootstrap.servers}&quot;)\n   private final String bootstrapServers;\n\n   @Value(&quot;${kafka.topic.replication.factor}&quot;)\n   private final String replicationFactor;\n   \n   void createTopicIfNotExists(String topicName, int partitionCount) {\n      if (topics.contains(topicName)) {\n         return;\n      }\n      Properties properties = new Properties();\n      properties.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n      try (Admin admin = Admin.create(properties)) {\n         if (isTopicExists(admin, topicName)) {\n            topics.add(topicName);\n            return;\n         }\n         NewTopic newTopic = new NewTopic(topicName, partitionCount, Short.parseShort(replicationFactor));\n         CreateTopicsResult result = admin.createTopics(Collections.singleton(newTopic));\n         KafkaFuture&lt;Void&gt; future = result.values().get(topicName);\n         try {\n            future.get();\n            topics.add(topicName);\n         } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n            log.error(&quot;Interrupted exception occurred during topic creation&quot;, e);\n         } catch (ExecutionException e) {\n            log.error(&quot;Execution exception occurred during topic creation&quot;, e);\n         }\n      }\n   }\n\n   private boolean isTopicExists(Admin admin, String topicName) {\n      try {\n         return admin.listTopics().names().get().contains(topicName);\n      } catch (InterruptedException e) {\n         Thread.currentThread().interrupt();\n         log.error(&quot;Interrupted exception occurred during topic creation&quot;, e);\n         return false;\n      } catch (ExecutionException e) {\n         log.error(&quot;Execution exception occurred during topic creation&quot;, e);\n         return false;\n      }\n   }\n}\n</code></pre>\n<p>How to improve the performance of this solution? Is connection caching a good idea? If so, in what way? As an initialized field in a class or maybe using e.g. Guava cache or <code>Suppliers.memoize(...)</code>? However, then the connection with the broker would have to be maintained all the time.</p>\n"},{"tags":["java","spring","spring-boot","unit-testing","junit"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":0,"creation_date":1672750621,"post_id":74993640,"comment_id":132341201,"body_markdown":"Does this answer your question? [Reading custom annotation for JUNIT](https://stackoverflow.com/questions/70726617/reading-custom-annotation-for-junit)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70726617/reading-custom-annotation-for-junit\">Reading custom annotation for JUNIT</a>"},{"owner":{"account_id":12561566,"reputation":325,"user_id":9505054,"display_name":"Yarik Soltys"},"score":0,"creation_date":1672751108,"post_id":74993640,"comment_id":132341338,"body_markdown":"I think no, I mean I don&#39;t need to scan all method annotated by @Test manually. As I understand when test methods will be launched it should create a new object internally of class FraemworkMethod or smth like that. I need to get metadata of the method already runnable by JUnit context.","body":"I think no, I mean I don&#39;t need to scan all method annotated by @Test manually. As I understand when test methods will be launched it should create a new object internally of class FraemworkMethod or smth like that. I need to get metadata of the method already runnable by JUnit context."}],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672751113,"creation_date":1672751113,"answer_id":74993753,"question_id":74993640,"body_markdown":"You could define a method in your parent class and override it when desired in your child class.\r\n## `ContractTestRunner`:\r\n```java\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest\r\npublic class ContractTestRunner {\r\n        \r\n    @MockBean\r\n    MessageRepository messageRepository;\r\n             \r\n    @Before\r\n    public void setUp() {\r\n        System.out.println(getTestMetadata()); // or whatever you want to do with it\r\n                 .....\r\n    \r\n        }\r\n\r\n        // New methods\r\n        protected Map&lt;String, String&gt; getTestMetadata() {\r\n            return Map.of();\r\n        }\r\n\r\n}\r\n```\r\n\r\n## `ContractTestRunner`:\r\n```java\r\npublic class MessageTests extends ContractTestRunner {\r\n\r\n    @Override\r\n    protected Map&lt;String, String&gt; getTestMetadata() {\r\n        return Map.of(&quot;something&quot;, &quot;special&quot;);\r\n    }\r\n       \r\n}\r\n```\r\n\r\nIf you want to force all child classes to override the method, you could also mark the parent class and the method as `abstract`.","title":"Get a test method metadata within parent test class in JUnit","body":"<p>You could define a method in your parent class and override it when desired in your child class.</p>\n<h2><code>ContractTestRunner</code>:</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class ContractTestRunner {\n        \n    @MockBean\n    MessageRepository messageRepository;\n             \n    @Before\n    public void setUp() {\n        System.out.println(getTestMetadata()); // or whatever you want to do with it\n                 .....\n    \n        }\n\n        // New methods\n        protected Map&lt;String, String&gt; getTestMetadata() {\n            return Map.of();\n        }\n\n}\n</code></pre>\n<h2><code>ContractTestRunner</code>:</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class MessageTests extends ContractTestRunner {\n\n    @Override\n    protected Map&lt;String, String&gt; getTestMetadata() {\n        return Map.of(&quot;something&quot;, &quot;special&quot;);\n    }\n       \n}\n</code></pre>\n<p>If you want to force all child classes to override the method, you could also mark the parent class and the method as <code>abstract</code>.</p>\n"}],"owner":{"account_id":12561566,"reputation":325,"user_id":9505054,"display_name":"Yarik Soltys"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672758299,"creation_date":1672750376,"question_id":74993640,"body_markdown":"Given the following test classes:\r\n\r\n - In the `ContractTestRunner` described common configs for all test   \r\n   methods;\r\n   \r\n  -  The `MessageTests` class `extends ContractTestRunner` and    defines\r\n   test methods;\r\n\r\nI would like to get metadata of the runnable method (name of the method) inside `setUp()` to then implement specific logic specific for each method because in my case it&#39;s impossible to add this logic directly in each method. \r\n\r\nCould somebody prompt me whether it is even possible to get it at this stage? Maybe It&#39;s somehow possible to retrieve it from `SpringTestContext`? \r\n\r\n```java\r\n        @RunWith(SpringRunner.class)\r\n        @SpringBootTest\r\n        public class ContractTestRunner {\r\n        \r\n             @MockBean\r\n             MessageRepository messageRepository;\r\n             \r\n             @Before\r\n             public void setUp() {\r\n    \r\n                 // Here I want to get metadata of a runnable method\r\n                 .....\r\n    \r\n                  // some logic here\r\n                  ......\r\n                  given(messageRepository.findAll(....)).willReturn(...) \r\n                  given(messageRepository.findAll(any(Pageable.classs))).willReturn(...)\r\n                  ........\r\n             }\r\n    \r\n        }\r\n\r\n        public class MessageTests extends ContractTestRunner {\r\n         \r\n              whenPageable_isNotNull_shouldReturnList() { .... }\r\n              whenPageable_isNull_shouldThrowException() { .... }\r\n\r\n        }\r\n``` \r\n\r\nP.S.  In my project `MessageTests` are not located in the source of the project but are generated at the stage of compilation automatically. I don&#39;t want to overhead my question with additional unrelated information not to confuse people. I am interested in whether it is possible to do exactly how I have described it just in parent class without touching the child class with methods.","title":"Get a test method metadata within parent test class in JUnit","body":"<p>Given the following test classes:</p>\n<ul>\n<li><p>In the <code>ContractTestRunner</code> described common configs for all test<br />\nmethods;</p>\n</li>\n<li><p>The <code>MessageTests</code> class <code>extends ContractTestRunner</code> and    defines\ntest methods;</p>\n</li>\n</ul>\n<p>I would like to get metadata of the runnable method (name of the method) inside <code>setUp()</code> to then implement specific logic specific for each method because in my case it's impossible to add this logic directly in each method.</p>\n<p>Could somebody prompt me whether it is even possible to get it at this stage? Maybe It's somehow possible to retrieve it from <code>SpringTestContext</code>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>        @RunWith(SpringRunner.class)\n        @SpringBootTest\n        public class ContractTestRunner {\n        \n             @MockBean\n             MessageRepository messageRepository;\n             \n             @Before\n             public void setUp() {\n    \n                 // Here I want to get metadata of a runnable method\n                 .....\n    \n                  // some logic here\n                  ......\n                  given(messageRepository.findAll(....)).willReturn(...) \n                  given(messageRepository.findAll(any(Pageable.classs))).willReturn(...)\n                  ........\n             }\n    \n        }\n\n        public class MessageTests extends ContractTestRunner {\n         \n              whenPageable_isNotNull_shouldReturnList() { .... }\n              whenPageable_isNull_shouldThrowException() { .... }\n\n        }\n</code></pre>\n<p>P.S.  In my project <code>MessageTests</code> are not located in the source of the project but are generated at the stage of compilation automatically. I don't want to overhead my question with additional unrelated information not to confuse people. I am interested in whether it is possible to do exactly how I have described it just in parent class without touching the child class with methods.</p>\n"},{"tags":["java","spring-boot","jodatime","java-time"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1672754999,"post_id":74994050,"comment_id":132342585,"body_markdown":"Do I understand correctly that you need a java.time *datetime object* that *represents* `2022-10-01T00:00:00.000Z`? Or are you needing a *string* with this exact content? Please distinguish between the data itself and the format of the string representation of the data.","body":"Do I understand correctly that you need a java.time <i>datetime object</i> that <i>represents</i> <code>2022-10-01T00:00:00.000Z</code>? Or are you needing a <i>string</i> with this exact content? Please distinguish between the data itself and the format of the string representation of the data."},{"owner":{"account_id":25387243,"reputation":75,"user_id":19198847,"display_name":"Umang Pachaury"},"score":0,"creation_date":1672755718,"post_id":74994050,"comment_id":132342857,"body_markdown":"Yes, I need a java.time datetime object that represents the format not a String. Thanks for correcting me appreciate it.\nThanks and Regards","body":"Yes, I need a java.time datetime object that represents the format not a String. Thanks for correcting me appreciate it. Thanks and Regards"}],"answers":[{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1672757895,"creation_date":1672753494,"answer_id":74994213,"question_id":74994050,"body_markdown":"The `String` `&quot;2022-10-01T00:00:00.000&quot;` can be parsed to a `LocalDateTime` because it only consists of year, month of year, day of month, hour of day, minute of hour, second of minute and fractions of second.\r\n\r\nYour desired output `String` `&quot;2022-10-01T00:00:00.000Z&quot;` represents the same values plus an offset, the `Z` for *Zulu* time, which basically means UTC.\r\n\r\nIf you want to *add* an offset to the input `String` with `java.time`, you can parse it to a `LocalDateTime` and then append the desired offset, which results in an `OffsetDateTime`. You can print that in a desired format using a `DateTimeFormatter`, either use a prebuilt one or define one yourself.\r\n\r\nHere&#39;s a small example:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n\t// input value\r\n\tString dateTime = &quot;2022-10-01T00:00:00.000&quot;;\r\n\t// parse it and append an offset\r\n\tOffsetDateTime odt = LocalDateTime.parse(dateTime).atOffset(ZoneOffset.UTC);\r\n\t// define a formatter that formats as desired\r\n\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ss.SSSX&quot;);\r\n\t// and print the OffsetDateTime using that formatter\r\n\tSystem.out.println(odt.format(dtf));\r\n}\r\n```\r\n\r\nOutput:\r\n```none\r\n2022-10-01T00:00:00.000Z\r\n```\r\n\r\n---\r\n\r\n### Clarification update:\r\nThere is just a single instance `OffsetDateTime` in my example with the following values:\r\n\r\n - year (2022)\r\n - month of year (10)\r\n - day of month (1)\r\n - hour of day (0)\r\n - minute of hour (0)\r\n - second of minute (0)\r\n - franctions of second (0)\r\n - offset (UTC / +00:00)\r\n\r\nThis instance of `OffsetDateTime` can be used for calculations (e.g. add/subtract days, months or other units) and it can be formatted as `String`. It also has a `toString()` method we don&#39;t have under control, but is used if you don&#39;t explicitly format it.\r\n\r\nThe following lines (first one is the last of my example above) show some different usages:\r\n\r\n```Java\r\n// print formatted by the DateTimeFormatter from the above example\r\nSystem.out.println(odt.format(dtf));\r\n// print the object directly, implicitly using its toString()\r\nSystem.out.println(odt);\r\n// print formatted by a prebuilt DateTimeFormatter (several are available)\r\nSystem.out.println(odt.format(DateTimeFormatter.ISO_OFFSET_DATE_TIME));\r\n// print with a formatter that uses locale dependant expressions like month names\r\nSystem.out.println(odt.format(\r\n\t\t\t\tDateTimeFormatter.ofPattern(&quot;EEEE, MMM dd HH:mm:ss xxx&quot;,\r\n\t\t\t\t\t\t\t\t\t\t\tLocale.ENGLISH)));\r\n```\r\n\r\nthe last one also uses a different representation for UTC: instead of `Z` it shows the offset in hours and minutes.\r\n\r\nOutput:\r\n\r\n```none\r\n2022-10-01T00:00:00.000Z\r\n2022-10-01T00:00Z\r\n2022-10-01T00:00:00Z\r\nSaturday, Oct 01 00:00:00 +00:00\r\n```","title":"Converting Joda DateTime to JavaTime","body":"<p>The <code>String</code> <code>&quot;2022-10-01T00:00:00.000&quot;</code> can be parsed to a <code>LocalDateTime</code> because it only consists of year, month of year, day of month, hour of day, minute of hour, second of minute and fractions of second.</p>\n<p>Your desired output <code>String</code> <code>&quot;2022-10-01T00:00:00.000Z&quot;</code> represents the same values plus an offset, the <code>Z</code> for <em>Zulu</em> time, which basically means UTC.</p>\n<p>If you want to <em>add</em> an offset to the input <code>String</code> with <code>java.time</code>, you can parse it to a <code>LocalDateTime</code> and then append the desired offset, which results in an <code>OffsetDateTime</code>. You can print that in a desired format using a <code>DateTimeFormatter</code>, either use a prebuilt one or define one yourself.</p>\n<p>Here's a small example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    // input value\n    String dateTime = &quot;2022-10-01T00:00:00.000&quot;;\n    // parse it and append an offset\n    OffsetDateTime odt = LocalDateTime.parse(dateTime).atOffset(ZoneOffset.UTC);\n    // define a formatter that formats as desired\n    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd'T'HH:mm:ss.SSSX&quot;);\n    // and print the OffsetDateTime using that formatter\n    System.out.println(odt.format(dtf));\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2022-10-01T00:00:00.000Z\n</code></pre>\n<hr />\n<h3>Clarification update:</h3>\n<p>There is just a single instance <code>OffsetDateTime</code> in my example with the following values:</p>\n<ul>\n<li>year (2022)</li>\n<li>month of year (10)</li>\n<li>day of month (1)</li>\n<li>hour of day (0)</li>\n<li>minute of hour (0)</li>\n<li>second of minute (0)</li>\n<li>franctions of second (0)</li>\n<li>offset (UTC / +00:00)</li>\n</ul>\n<p>This instance of <code>OffsetDateTime</code> can be used for calculations (e.g. add/subtract days, months or other units) and it can be formatted as <code>String</code>. It also has a <code>toString()</code> method we don't have under control, but is used if you don't explicitly format it.</p>\n<p>The following lines (first one is the last of my example above) show some different usages:</p>\n<pre><code>// print formatted by the DateTimeFormatter from the above example\nSystem.out.println(odt.format(dtf));\n// print the object directly, implicitly using its toString()\nSystem.out.println(odt);\n// print formatted by a prebuilt DateTimeFormatter (several are available)\nSystem.out.println(odt.format(DateTimeFormatter.ISO_OFFSET_DATE_TIME));\n// print with a formatter that uses locale dependant expressions like month names\nSystem.out.println(odt.format(\n                DateTimeFormatter.ofPattern(&quot;EEEE, MMM dd HH:mm:ss xxx&quot;,\n                                            Locale.ENGLISH)));\n</code></pre>\n<p>the last one also uses a different representation for UTC: instead of <code>Z</code> it shows the offset in hours and minutes.</p>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2022-10-01T00:00:00.000Z\n2022-10-01T00:00Z\n2022-10-01T00:00:00Z\nSaturday, Oct 01 00:00:00 +00:00\n</code></pre>\n"}],"owner":{"account_id":25387243,"reputation":75,"user_id":19198847,"display_name":"Umang Pachaury"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74994213,"answer_count":1,"score":3,"last_activity_date":1672757895,"creation_date":1672752696,"question_id":74994050,"body_markdown":"I am trying to update my existing elasticsearch springboot project and as the source code is fairly old it still uses joda time. Now I have to upgrade all the functions of Joda time to java time. Now in the project We use Date Time of Joda Time\r\n\r\nCode Sample for Joda Time\r\n\r\n    DateTime target = new DateTime(String targetDate, UTC);\r\n\r\nWe use this function currently in our code to convert a String to Date.\r\nUsing this function the String \r\n\r\n`2022-10-01T00:00:00.000`\r\n\r\n gets converted to \r\n\r\n`2022-10-01T00:00:00.000Z`\r\n\r\nI am trying to replicate the same in java time.\r\n\r\nI tried to parse the `targetDate` using `OffsetDateTime` and `ZonedDateTime` but both gave me errors.\r\n\r\n&gt; Text &#39;2022-10-01T00:00:00.0000&#39; could not be parsed at index 24\r\n\r\nAfter some attempts I was able to move forward by using `LocalDateTime` \r\n\r\n    LocalDateTime target = LocalDateTime.parse(String targetDate);\r\n\r\nWhich was able to parse the String but the format was not correct the format I got was \r\n\r\n`2022-10-01T00:00Z`\r\n\r\nI also tried using the formatter with LocalDateTime\r\n\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSS&#39;Z&#39;&quot;);\r\n    LocalDateTime target= LocalDateTime.parse(targetDate,formatter);\r\n\r\nBut This Still gave me the Error\r\n\r\n&gt; Text &#39;2022-10-01T00:00:00.0000&#39; could not be parsed at index 24\r\n\r\nNow I am a bit confused regarding this.\r\n\r\nAny help is appreciated.\r\nAnd Please correct me if my way of asking question or formatting is wrong at any point still new to this.\r\n\r\nRegards.\r\n\r\nEDIT: Sorry for the confusion but as pointed out I should have mentioned that I want the returned value as the *java.time datetime* object and not a *String* so that I can further perform some logic on it. Sorry for this.\r\n\r\nThanks and Regards\r\n ","title":"Converting Joda DateTime to JavaTime","body":"<p>I am trying to update my existing elasticsearch springboot project and as the source code is fairly old it still uses joda time. Now I have to upgrade all the functions of Joda time to java time. Now in the project We use Date Time of Joda Time</p>\n<p>Code Sample for Joda Time</p>\n<pre><code>DateTime target = new DateTime(String targetDate, UTC);\n</code></pre>\n<p>We use this function currently in our code to convert a String to Date.\nUsing this function the String</p>\n<p><code>2022-10-01T00:00:00.000</code></p>\n<p>gets converted to</p>\n<p><code>2022-10-01T00:00:00.000Z</code></p>\n<p>I am trying to replicate the same in java time.</p>\n<p>I tried to parse the <code>targetDate</code> using <code>OffsetDateTime</code> and <code>ZonedDateTime</code> but both gave me errors.</p>\n<blockquote>\n<p>Text '2022-10-01T00:00:00.0000' could not be parsed at index 24</p>\n</blockquote>\n<p>After some attempts I was able to move forward by using <code>LocalDateTime</code></p>\n<pre><code>LocalDateTime target = LocalDateTime.parse(String targetDate);\n</code></pre>\n<p>Which was able to parse the String but the format was not correct the format I got was</p>\n<p><code>2022-10-01T00:00Z</code></p>\n<p>I also tried using the formatter with LocalDateTime</p>\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSS'Z'&quot;);\nLocalDateTime target= LocalDateTime.parse(targetDate,formatter);\n</code></pre>\n<p>But This Still gave me the Error</p>\n<blockquote>\n<p>Text '2022-10-01T00:00:00.0000' could not be parsed at index 24</p>\n</blockquote>\n<p>Now I am a bit confused regarding this.</p>\n<p>Any help is appreciated.\nAnd Please correct me if my way of asking question or formatting is wrong at any point still new to this.</p>\n<p>Regards.</p>\n<p>EDIT: Sorry for the confusion but as pointed out I should have mentioned that I want the returned value as the <em>java.time datetime</em> object and not a <em>String</em> so that I can further perform some logic on it. Sorry for this.</p>\n<p>Thanks and Regards</p>\n"},{"tags":["java","spring","spring-boot","modelmapper"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1672755866,"post_id":74994573,"comment_id":132342902,"body_markdown":"first: I hope you understand this code is pointless: if (address == null)\n        userDTO.setAddress(null); secondly: what is the code of your mapper?","body":"first: I hope you understand this code is pointless: if (address == null)         userDTO.setAddress(null); secondly: what is the code of your mapper?"},{"owner":{"account_id":4487116,"reputation":429,"user_id":3649352,"accept_rate":67,"display_name":"Kunal Varpe"},"score":0,"creation_date":1672756944,"post_id":74994573,"comment_id":132343300,"body_markdown":"Are you using the mapper from `org.modelmapper`? Can you provide the bean definition of the `userMapper` injected within this classes.","body":"Are you using the mapper from <code>org.modelmapper</code>? Can you provide the bean definition of the <code>userMapper</code> injected within this classes."},{"owner":{"account_id":18640836,"reputation":1,"user_id":13586613,"display_name":"Casolite"},"score":0,"creation_date":1672757895,"post_id":74994573,"comment_id":132343588,"body_markdown":"I have just updated my question, and described my abstract class that include some generic methods that I used","body":"I have just updated my question, and described my abstract class that include some generic methods that I used"}],"owner":{"account_id":18640836,"reputation":1,"user_id":13586613,"display_name":"Casolite"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":495,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672757809,"creation_date":1672755410,"question_id":74994573,"body_markdown":"Here is the class that I want to map to a DTO class using modelMapper. UserDTO class has property AddressDTO \r\n```\r\npublic class UserDTO {\r\n    @NotNull\r\n    private Long id;\r\n\r\n    @NotNull\r\n    private String username;\r\n\r\n    @NotNull\r\n    private String email;\r\n\r\n    @NotNull\r\n    private Boolean isActive;\r\n\r\n    private AddressDTO address;\r\n}\r\n```\r\n\r\n```\r\npublic class AddressDTO {\r\n\r\n    public Long addressId;\r\n\r\n    public String homeNumber;\r\n\r\n    private City city;\r\n\r\n    private District district;\r\n\r\n    private Ward ward;\r\n}\r\n```\r\n\r\nPlease note that each user will have 0 or 1 address so that AdressDTO can be null. But when I use ModelMapper, it turns out to be null for all Users.\r\n\r\nAt first, I use constructor to map DTO manually.\r\n\r\n```\r\nprivate UserDTO mapToUserDTO(User user){\r\n    UserDTO userDTO = new UserDTO();\r\n\r\n    userDTO.setId(user.getId());\r\n    userDTO.setUsername(user.getUsername());\r\n    userDTO.setEmail(user.getEmail());\r\n    userDTO.setIsActive(user.getIsActive());\r\n\r\n    Address address = addressRepository.findAddressByUser(user);\r\n    if (address == null)\r\n        userDTO.setAddress(null);\r\n    else {\r\n        AddressDTO addressDTO = mapper.mapToDTO(address, AddressDTO.class);\r\n        userDTO.setAddress(addressDTO);\r\n    }\r\n    return userDTO;\r\n}\r\n```\r\n\r\nThe second time, I try fully with ModelMapper:\r\n\r\n```\r\npublic DataResponse&lt;List&lt;UserDTO&gt;&gt; getAll() {\r\n    List&lt;User&gt; users = userRepository.findAll();\r\n    List&lt;UserDTO&gt; userDTOs = userMapper.mapToDTOList(users, UserDTO.class);\r\n\r\n    return new DataResponse&lt;&gt;(userDTOs);\r\n}\r\n```\r\n\r\nSo this time I try with ModelMapper and the AddressDTO appears to be null as I said before. Can anyone show me the way to fix it?\r\n\r\n[Edited 1]\r\nHere is the abstract class I create generic functions to mapToDTO\r\n```\r\npublic class AbstractModelMapper &lt;E,D&gt;{\r\n    @Autowired\r\n    ModelMapper mapper;\r\n\r\n    public D mapToDTO(E e, Class&lt;D&gt; d){ return e != null ? mapper.map(e,d) : null;}\r\n\r\n    public E mapToEntity(D d, Class&lt;E&gt; e){ return d!= null ? mapper.map(d, e) : null;}\r\n\r\n    public List&lt;D&gt; mapToDTOList(List&lt;E&gt; eList, Class&lt;D&gt; d){\r\n        return eList != null ? eList.stream().map(e -&gt; mapper.map(e,d)).collect(Collectors.toList()) : null;\r\n    }\r\n}\r\n```\r\nThen I create Component Class for each entity. Example:\r\n```\r\n@Component\r\npublic class UserMapper extends AbstractModelMapper&lt;User, UserDTO&gt; {\r\n}\r\n```\r\n\r\nLastly, I use it by using DI technique:\r\n```\r\n  @Autowired\r\n    UserMapper userMapper;\r\n```\r\n\r\nI am wondering whether create another configuration class for a specific situation like this.","title":"How to use modelMapper to map to a nested DTO class","body":"<p>Here is the class that I want to map to a DTO class using modelMapper. UserDTO class has property AddressDTO</p>\n<pre><code>public class UserDTO {\n    @NotNull\n    private Long id;\n\n    @NotNull\n    private String username;\n\n    @NotNull\n    private String email;\n\n    @NotNull\n    private Boolean isActive;\n\n    private AddressDTO address;\n}\n</code></pre>\n<pre><code>public class AddressDTO {\n\n    public Long addressId;\n\n    public String homeNumber;\n\n    private City city;\n\n    private District district;\n\n    private Ward ward;\n}\n</code></pre>\n<p>Please note that each user will have 0 or 1 address so that AdressDTO can be null. But when I use ModelMapper, it turns out to be null for all Users.</p>\n<p>At first, I use constructor to map DTO manually.</p>\n<pre><code>private UserDTO mapToUserDTO(User user){\n    UserDTO userDTO = new UserDTO();\n\n    userDTO.setId(user.getId());\n    userDTO.setUsername(user.getUsername());\n    userDTO.setEmail(user.getEmail());\n    userDTO.setIsActive(user.getIsActive());\n\n    Address address = addressRepository.findAddressByUser(user);\n    if (address == null)\n        userDTO.setAddress(null);\n    else {\n        AddressDTO addressDTO = mapper.mapToDTO(address, AddressDTO.class);\n        userDTO.setAddress(addressDTO);\n    }\n    return userDTO;\n}\n</code></pre>\n<p>The second time, I try fully with ModelMapper:</p>\n<pre><code>public DataResponse&lt;List&lt;UserDTO&gt;&gt; getAll() {\n    List&lt;User&gt; users = userRepository.findAll();\n    List&lt;UserDTO&gt; userDTOs = userMapper.mapToDTOList(users, UserDTO.class);\n\n    return new DataResponse&lt;&gt;(userDTOs);\n}\n</code></pre>\n<p>So this time I try with ModelMapper and the AddressDTO appears to be null as I said before. Can anyone show me the way to fix it?</p>\n<p>[Edited 1]\nHere is the abstract class I create generic functions to mapToDTO</p>\n<pre><code>public class AbstractModelMapper &lt;E,D&gt;{\n    @Autowired\n    ModelMapper mapper;\n\n    public D mapToDTO(E e, Class&lt;D&gt; d){ return e != null ? mapper.map(e,d) : null;}\n\n    public E mapToEntity(D d, Class&lt;E&gt; e){ return d!= null ? mapper.map(d, e) : null;}\n\n    public List&lt;D&gt; mapToDTOList(List&lt;E&gt; eList, Class&lt;D&gt; d){\n        return eList != null ? eList.stream().map(e -&gt; mapper.map(e,d)).collect(Collectors.toList()) : null;\n    }\n}\n</code></pre>\n<p>Then I create Component Class for each entity. Example:</p>\n<pre><code>@Component\npublic class UserMapper extends AbstractModelMapper&lt;User, UserDTO&gt; {\n}\n</code></pre>\n<p>Lastly, I use it by using DI technique:</p>\n<pre><code>  @Autowired\n    UserMapper userMapper;\n</code></pre>\n<p>I am wondering whether create another configuration class for a specific situation like this.</p>\n"},{"tags":["java","docx","docx4j"],"answers":[{"tags":[],"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649399089,"creation_date":1649399089,"answer_id":71792509,"question_id":71780058,"body_markdown":"Word adds the caption as a sibling w:p following the one containing the image, using w:fldSimple for the numbering:\r\n\r\n    &lt;w:p&gt;\r\n      &lt;w:r&gt;\r\n        &lt;w:drawing&gt;\r\n          &lt;wp:inline distT=&quot;0&quot; distB=&quot;0&quot; distL=&quot;0&quot; distR=&quot;0&quot; wp14:anchorId=&quot;27B5888C&quot; wp14:editId=&quot;054E2550&quot;&gt;\r\n            &lt;wp:extent cx=&quot;6010910&quot; cy=&quot;2385060&quot;/&gt;\r\n            &lt;wp:effectExtent l=&quot;0&quot; t=&quot;0&quot; r=&quot;8890&quot; b=&quot;0&quot;/&gt;\r\n            &lt;wp:docPr id=&quot;1&quot; name=&quot;Picture 1&quot; descr=&quot;Graphical user interface, text&amp;#xA;&amp;#xA;Description automatically generated&quot;/&gt;\r\n            &lt;wp:cNvGraphicFramePr&gt;\r\n              &lt;a:graphicFrameLocks xmlns:a=&quot;http://schemas.openxmlformats.org/drawingml/2006/main&quot; noChangeAspect=&quot;1&quot;/&gt;\r\n            &lt;/wp:cNvGraphicFramePr&gt;\r\n            &lt;a:graphic xmlns:a=&quot;http://schemas.openxmlformats.org/drawingml/2006/main&quot;&gt;\r\n              &lt;a:graphicData uri=&quot;http://schemas.openxmlformats.org/drawingml/2006/picture&quot;&gt;\r\n                &lt;pic:pic xmlns:pic=&quot;http://schemas.openxmlformats.org/drawingml/2006/picture&quot;&gt;\r\n                  &lt;pic:nvPicPr&gt;\r\n                    &lt;pic:cNvPr id=&quot;1&quot; name=&quot;Picture 1&quot; descr=&quot;Graphical user interface, text&amp;#xA;&amp;#xA;Description automatically generated&quot;/&gt;\r\n                    &lt;pic:cNvPicPr/&gt;\r\n                  &lt;/pic:nvPicPr&gt;\r\n                  &lt;pic:blipFill&gt;\r\n                    &lt;a:blip r:embed=&quot;rId4&quot;/&gt;\r\n                    &lt;a:stretch&gt;\r\n                      &lt;a:fillRect/&gt;\r\n                    &lt;/a:stretch&gt;\r\n                  &lt;/pic:blipFill&gt;\r\n                  &lt;pic:spPr&gt;\r\n                    &lt;a:xfrm&gt;\r\n                      &lt;a:off x=&quot;0&quot; y=&quot;0&quot;/&gt;\r\n                      &lt;a:ext cx=&quot;6010910&quot; cy=&quot;2385060&quot;/&gt;\r\n                    &lt;/a:xfrm&gt;\r\n                    &lt;a:prstGeom prst=&quot;rect&quot;&gt;\r\n                      &lt;a:avLst/&gt;\r\n                    &lt;/a:prstGeom&gt;\r\n                  &lt;/pic:spPr&gt;\r\n                &lt;/pic:pic&gt;\r\n              &lt;/a:graphicData&gt;\r\n            &lt;/a:graphic&gt;\r\n          &lt;/wp:inline&gt;\r\n        &lt;/w:drawing&gt;\r\n      &lt;/w:r&gt;\r\n    &lt;/w:p&gt;\r\n    &lt;w:p&gt;\r\n      &lt;w:pPr&gt;\r\n        &lt;w:pStyle w:val=&quot;Caption&quot;/&gt;\r\n      &lt;/w:pPr&gt;\r\n      &lt;w:r&gt;\r\n        &lt;w:t xml:space=&quot;preserve&quot;&gt;Figure &lt;/w:t&gt;\r\n      &lt;/w:r&gt;\r\n      &lt;w:fldSimple w:instr=&quot; SEQ Figure \\* ARABIC &quot;&gt;\r\n        &lt;w:r&gt;\r\n          &lt;w:rPr&gt;\r\n            &lt;w:noProof/&gt;\r\n          &lt;/w:rPr&gt;\r\n          &lt;w:t&gt;1&lt;/w:t&gt;\r\n        &lt;/w:r&gt;\r\n      &lt;/w:fldSimple&gt;\r\n      &lt;w:r&gt;\r\n        &lt;w:t&gt;YOUR CAPTION HERE&lt;/w:t&gt;\r\n      &lt;/w:r&gt;\r\n    &lt;/w:p&gt;\r\n\r\nIndicative Java code for that w:p\r\n\r\n        // Create object for p\r\n        P p4 = wmlObjectFactory.createP(); \r\n        body.getContent().add( p4); \r\n            // Create object for r\r\n            R r4 = wmlObjectFactory.createR(); \r\n            p4.getContent().add( r4); \r\n                // Create object for t (wrapped in JAXBElement) \r\n                Text text3 = wmlObjectFactory.createText(); \r\n                JAXBElement&lt;org.docx4j.wml.Text&gt; textWrapped3 = wmlObjectFactory.createRT(text3); \r\n                r4.getContent().add( textWrapped3); \r\n                    text3.setValue( &quot;Figure &quot;); \r\n                    text3.setSpace( &quot;preserve&quot;); \r\n            // Create object for r\r\n            R r5 = wmlObjectFactory.createR(); \r\n            p4.getContent().add( r5); \r\n                // Create object for fldChar (wrapped in JAXBElement) \r\n                FldChar fldchar = wmlObjectFactory.createFldChar(); \r\n                JAXBElement&lt;org.docx4j.wml.FldChar&gt; fldcharWrapped = wmlObjectFactory.createRFldChar(fldchar); \r\n                r5.getContent().add( fldcharWrapped); \r\n                    fldchar.setFldCharType(org.docx4j.wml.STFldCharType.BEGIN);\r\n            // Create object for r\r\n            R r6 = wmlObjectFactory.createR(); \r\n            p4.getContent().add( r6); \r\n                // Create object for instrText (wrapped in JAXBElement) \r\n                Text text4 = wmlObjectFactory.createText(); \r\n                JAXBElement&lt;org.docx4j.wml.Text&gt; textWrapped4 = wmlObjectFactory.createRInstrText(text4); \r\n                r6.getContent().add( textWrapped4); \r\n                    text4.setValue( &quot; SEQ Figure \\\\* ARABIC &quot;); \r\n                    text4.setSpace( &quot;preserve&quot;); \r\n            // Create object for r\r\n            R r7 = wmlObjectFactory.createR(); \r\n            p4.getContent().add( r7); \r\n                // Create object for fldChar (wrapped in JAXBElement) \r\n                FldChar fldchar2 = wmlObjectFactory.createFldChar(); \r\n                JAXBElement&lt;org.docx4j.wml.FldChar&gt; fldcharWrapped2 = wmlObjectFactory.createRFldChar(fldchar2); \r\n                r7.getContent().add( fldcharWrapped2); \r\n                    fldchar2.setFldCharType(org.docx4j.wml.STFldCharType.SEPARATE);\r\n            // Create object for r\r\n            R r8 = wmlObjectFactory.createR(); \r\n            p4.getContent().add( r8); \r\n                // Create object for t (wrapped in JAXBElement) \r\n                Text text5 = wmlObjectFactory.createText(); \r\n                JAXBElement&lt;org.docx4j.wml.Text&gt; textWrapped5 = wmlObjectFactory.createRT(text5); \r\n                r8.getContent().add( textWrapped5); \r\n                    text5.setValue( &quot;1&quot;); \r\n                // Create object for rPr\r\n                RPr rpr3 = wmlObjectFactory.createRPr(); \r\n                r8.setRPr(rpr3); \r\n                    // Create object for noProof\r\n                    BooleanDefaultTrue booleandefaulttrue3 = wmlObjectFactory.createBooleanDefaultTrue(); \r\n                    rpr3.setNoProof(booleandefaulttrue3); \r\n            // Create object for r\r\n            R r9 = wmlObjectFactory.createR(); \r\n            p4.getContent().add( r9); \r\n                // Create object for fldChar (wrapped in JAXBElement) \r\n                FldChar fldchar3 = wmlObjectFactory.createFldChar(); \r\n                JAXBElement&lt;org.docx4j.wml.FldChar&gt; fldcharWrapped3 = wmlObjectFactory.createRFldChar(fldchar3); \r\n                r9.getContent().add( fldcharWrapped3); \r\n                    fldchar3.setFldCharType(org.docx4j.wml.STFldCharType.END);\r\n                // Create object for rPr\r\n                RPr rpr4 = wmlObjectFactory.createRPr(); \r\n                r9.setRPr(rpr4); \r\n                    // Create object for noProof\r\n                    BooleanDefaultTrue booleandefaulttrue4 = wmlObjectFactory.createBooleanDefaultTrue(); \r\n                    rpr4.setNoProof(booleandefaulttrue4); \r\n            // Create object for r\r\n            R r10 = wmlObjectFactory.createR(); \r\n            p4.getContent().add( r10); \r\n                // Create object for t (wrapped in JAXBElement) \r\n                Text text6 = wmlObjectFactory.createText(); \r\n                JAXBElement&lt;org.docx4j.wml.Text&gt; textWrapped6 = wmlObjectFactory.createRT(text6); \r\n                r10.getContent().add( textWrapped6); \r\n                    text6.setValue( &quot;YOUR CAPTION HERE&quot;); \r\n            // Create object for pPr\r\n            PPr ppr2 = wmlObjectFactory.createPPr(); \r\n            p4.setPPr(ppr2); \r\n                // Create object for pStyle\r\n                PPrBase.PStyle pprbasepstyle = wmlObjectFactory.createPPrBasePStyle(); \r\n                ppr2.setPStyle(pprbasepstyle); \r\n                    pprbasepstyle.setVal( &quot;Caption&quot;); \r\n\r\n","title":"Add a caption to an image with docx4j","body":"<p>Word adds the caption as a sibling w:p following the one containing the image, using w:fldSimple for the numbering:</p>\n<pre><code>&lt;w:p&gt;\n  &lt;w:r&gt;\n    &lt;w:drawing&gt;\n      &lt;wp:inline distT=&quot;0&quot; distB=&quot;0&quot; distL=&quot;0&quot; distR=&quot;0&quot; wp14:anchorId=&quot;27B5888C&quot; wp14:editId=&quot;054E2550&quot;&gt;\n        &lt;wp:extent cx=&quot;6010910&quot; cy=&quot;2385060&quot;/&gt;\n        &lt;wp:effectExtent l=&quot;0&quot; t=&quot;0&quot; r=&quot;8890&quot; b=&quot;0&quot;/&gt;\n        &lt;wp:docPr id=&quot;1&quot; name=&quot;Picture 1&quot; descr=&quot;Graphical user interface, text&amp;#xA;&amp;#xA;Description automatically generated&quot;/&gt;\n        &lt;wp:cNvGraphicFramePr&gt;\n          &lt;a:graphicFrameLocks xmlns:a=&quot;http://schemas.openxmlformats.org/drawingml/2006/main&quot; noChangeAspect=&quot;1&quot;/&gt;\n        &lt;/wp:cNvGraphicFramePr&gt;\n        &lt;a:graphic xmlns:a=&quot;http://schemas.openxmlformats.org/drawingml/2006/main&quot;&gt;\n          &lt;a:graphicData uri=&quot;http://schemas.openxmlformats.org/drawingml/2006/picture&quot;&gt;\n            &lt;pic:pic xmlns:pic=&quot;http://schemas.openxmlformats.org/drawingml/2006/picture&quot;&gt;\n              &lt;pic:nvPicPr&gt;\n                &lt;pic:cNvPr id=&quot;1&quot; name=&quot;Picture 1&quot; descr=&quot;Graphical user interface, text&amp;#xA;&amp;#xA;Description automatically generated&quot;/&gt;\n                &lt;pic:cNvPicPr/&gt;\n              &lt;/pic:nvPicPr&gt;\n              &lt;pic:blipFill&gt;\n                &lt;a:blip r:embed=&quot;rId4&quot;/&gt;\n                &lt;a:stretch&gt;\n                  &lt;a:fillRect/&gt;\n                &lt;/a:stretch&gt;\n              &lt;/pic:blipFill&gt;\n              &lt;pic:spPr&gt;\n                &lt;a:xfrm&gt;\n                  &lt;a:off x=&quot;0&quot; y=&quot;0&quot;/&gt;\n                  &lt;a:ext cx=&quot;6010910&quot; cy=&quot;2385060&quot;/&gt;\n                &lt;/a:xfrm&gt;\n                &lt;a:prstGeom prst=&quot;rect&quot;&gt;\n                  &lt;a:avLst/&gt;\n                &lt;/a:prstGeom&gt;\n              &lt;/pic:spPr&gt;\n            &lt;/pic:pic&gt;\n          &lt;/a:graphicData&gt;\n        &lt;/a:graphic&gt;\n      &lt;/wp:inline&gt;\n    &lt;/w:drawing&gt;\n  &lt;/w:r&gt;\n&lt;/w:p&gt;\n&lt;w:p&gt;\n  &lt;w:pPr&gt;\n    &lt;w:pStyle w:val=&quot;Caption&quot;/&gt;\n  &lt;/w:pPr&gt;\n  &lt;w:r&gt;\n    &lt;w:t xml:space=&quot;preserve&quot;&gt;Figure &lt;/w:t&gt;\n  &lt;/w:r&gt;\n  &lt;w:fldSimple w:instr=&quot; SEQ Figure \\* ARABIC &quot;&gt;\n    &lt;w:r&gt;\n      &lt;w:rPr&gt;\n        &lt;w:noProof/&gt;\n      &lt;/w:rPr&gt;\n      &lt;w:t&gt;1&lt;/w:t&gt;\n    &lt;/w:r&gt;\n  &lt;/w:fldSimple&gt;\n  &lt;w:r&gt;\n    &lt;w:t&gt;YOUR CAPTION HERE&lt;/w:t&gt;\n  &lt;/w:r&gt;\n&lt;/w:p&gt;\n</code></pre>\n<p>Indicative Java code for that w:p</p>\n<pre><code>    // Create object for p\n    P p4 = wmlObjectFactory.createP(); \n    body.getContent().add( p4); \n        // Create object for r\n        R r4 = wmlObjectFactory.createR(); \n        p4.getContent().add( r4); \n            // Create object for t (wrapped in JAXBElement) \n            Text text3 = wmlObjectFactory.createText(); \n            JAXBElement&lt;org.docx4j.wml.Text&gt; textWrapped3 = wmlObjectFactory.createRT(text3); \n            r4.getContent().add( textWrapped3); \n                text3.setValue( &quot;Figure &quot;); \n                text3.setSpace( &quot;preserve&quot;); \n        // Create object for r\n        R r5 = wmlObjectFactory.createR(); \n        p4.getContent().add( r5); \n            // Create object for fldChar (wrapped in JAXBElement) \n            FldChar fldchar = wmlObjectFactory.createFldChar(); \n            JAXBElement&lt;org.docx4j.wml.FldChar&gt; fldcharWrapped = wmlObjectFactory.createRFldChar(fldchar); \n            r5.getContent().add( fldcharWrapped); \n                fldchar.setFldCharType(org.docx4j.wml.STFldCharType.BEGIN);\n        // Create object for r\n        R r6 = wmlObjectFactory.createR(); \n        p4.getContent().add( r6); \n            // Create object for instrText (wrapped in JAXBElement) \n            Text text4 = wmlObjectFactory.createText(); \n            JAXBElement&lt;org.docx4j.wml.Text&gt; textWrapped4 = wmlObjectFactory.createRInstrText(text4); \n            r6.getContent().add( textWrapped4); \n                text4.setValue( &quot; SEQ Figure \\\\* ARABIC &quot;); \n                text4.setSpace( &quot;preserve&quot;); \n        // Create object for r\n        R r7 = wmlObjectFactory.createR(); \n        p4.getContent().add( r7); \n            // Create object for fldChar (wrapped in JAXBElement) \n            FldChar fldchar2 = wmlObjectFactory.createFldChar(); \n            JAXBElement&lt;org.docx4j.wml.FldChar&gt; fldcharWrapped2 = wmlObjectFactory.createRFldChar(fldchar2); \n            r7.getContent().add( fldcharWrapped2); \n                fldchar2.setFldCharType(org.docx4j.wml.STFldCharType.SEPARATE);\n        // Create object for r\n        R r8 = wmlObjectFactory.createR(); \n        p4.getContent().add( r8); \n            // Create object for t (wrapped in JAXBElement) \n            Text text5 = wmlObjectFactory.createText(); \n            JAXBElement&lt;org.docx4j.wml.Text&gt; textWrapped5 = wmlObjectFactory.createRT(text5); \n            r8.getContent().add( textWrapped5); \n                text5.setValue( &quot;1&quot;); \n            // Create object for rPr\n            RPr rpr3 = wmlObjectFactory.createRPr(); \n            r8.setRPr(rpr3); \n                // Create object for noProof\n                BooleanDefaultTrue booleandefaulttrue3 = wmlObjectFactory.createBooleanDefaultTrue(); \n                rpr3.setNoProof(booleandefaulttrue3); \n        // Create object for r\n        R r9 = wmlObjectFactory.createR(); \n        p4.getContent().add( r9); \n            // Create object for fldChar (wrapped in JAXBElement) \n            FldChar fldchar3 = wmlObjectFactory.createFldChar(); \n            JAXBElement&lt;org.docx4j.wml.FldChar&gt; fldcharWrapped3 = wmlObjectFactory.createRFldChar(fldchar3); \n            r9.getContent().add( fldcharWrapped3); \n                fldchar3.setFldCharType(org.docx4j.wml.STFldCharType.END);\n            // Create object for rPr\n            RPr rpr4 = wmlObjectFactory.createRPr(); \n            r9.setRPr(rpr4); \n                // Create object for noProof\n                BooleanDefaultTrue booleandefaulttrue4 = wmlObjectFactory.createBooleanDefaultTrue(); \n                rpr4.setNoProof(booleandefaulttrue4); \n        // Create object for r\n        R r10 = wmlObjectFactory.createR(); \n        p4.getContent().add( r10); \n            // Create object for t (wrapped in JAXBElement) \n            Text text6 = wmlObjectFactory.createText(); \n            JAXBElement&lt;org.docx4j.wml.Text&gt; textWrapped6 = wmlObjectFactory.createRT(text6); \n            r10.getContent().add( textWrapped6); \n                text6.setValue( &quot;YOUR CAPTION HERE&quot;); \n        // Create object for pPr\n        PPr ppr2 = wmlObjectFactory.createPPr(); \n        p4.setPPr(ppr2); \n            // Create object for pStyle\n            PPrBase.PStyle pprbasepstyle = wmlObjectFactory.createPPrBasePStyle(); \n            ppr2.setPStyle(pprbasepstyle); \n                pprbasepstyle.setVal( &quot;Caption&quot;); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10981782,"reputation":1,"user_id":8068649,"display_name":"rmalired"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1672757736,"creation_date":1672757736,"answer_id":74995017,"question_id":71780058,"body_markdown":"How does the table number can be dynamic, if the above code is created as a re-usable method and called for each table that got created how does the text5.setValue() can be a sequence","title":"Add a caption to an image with docx4j","body":"<p>How does the table number can be dynamic, if the above code is created as a re-usable method and called for each table that got created how does the text5.setValue() can be a sequence</p>\n"}],"owner":{"account_id":18452630,"reputation":3,"user_id":13442313,"display_name":"Vassili Durand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71792509,"answer_count":2,"score":0,"last_activity_date":1672757736,"creation_date":1649325467,"question_id":71780058,"body_markdown":"i would like to link a caption to an image using docx4j.\r\n\r\n    BinaryPartAbstractImage imagePart;\r\n    imagePart = BinaryPartAbstractImage.createImagePart(wordMLPackage, bytes);\r\n    Inline inline = imagePart.createImageInline(filenameHint, altText, id1, id2, false);\r\n\r\n    ObjectFactory factory = new ObjectFactory();\r\n    P imageParagraph = factory.createP();\r\n    R run = factory.createR();\r\n    imageParagraph.getContent().add(run);\r\n    Drawing drawing = factory.createDrawing();\r\n    run.getContent().add(drawing);\r\n    drawing.getAnchorOrInline().add(inline);   \r\n\r\n\r\nI have seen something link CTCaption but i don&#39;t know how to link it.","title":"Add a caption to an image with docx4j","body":"<p>i would like to link a caption to an image using docx4j.</p>\n<pre><code>BinaryPartAbstractImage imagePart;\nimagePart = BinaryPartAbstractImage.createImagePart(wordMLPackage, bytes);\nInline inline = imagePart.createImageInline(filenameHint, altText, id1, id2, false);\n\nObjectFactory factory = new ObjectFactory();\nP imageParagraph = factory.createP();\nR run = factory.createR();\nimageParagraph.getContent().add(run);\nDrawing drawing = factory.createDrawing();\nrun.getContent().add(drawing);\ndrawing.getAnchorOrInline().add(inline);   \n</code></pre>\n<p>I have seen something link CTCaption but i don't know how to link it.</p>\n"},{"tags":["java","clojure","smile"],"comments":[{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":3,"creation_date":1672750923,"post_id":74992253,"comment_id":132341299,"body_markdown":"It might be a version dependency conflict. E.g. the `pow2` function was called `sqr` before: https://github.com/haifengl/smile/commit/e81f2309ea7d653a7587808744c8b7a4b8886a3a Make sure you are using the right version of the library.","body":"It might be a version dependency conflict. E.g. the <code>pow2</code> function was called <code>sqr</code> before: <a href=\"https://github.com/haifengl/smile/commit/e81f2309ea7d653a7587808744c8b7a4b8886a3a\" rel=\"nofollow noreferrer\">github.com/haifengl/smile/commit/&hellip;</a> Make sure you are using the right version of the library."}],"answers":[{"tags":[],"owner":{"account_id":1039002,"reputation":3189,"user_id":1045479,"accept_rate":70,"display_name":"alex314159"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672757391,"creation_date":1672757391,"answer_id":74994947,"question_id":74992253,"body_markdown":"As Juraj was hinting it was a dependency conflict - I was also using `tech.ml.dataset` in my project, version 6, which was using an older version of `smile`. Moving `tech.ml.dataset` to version 7, which doesn&#39;t include `smile` by default, sorted the issue.\r\n\r\nThanks!","title":"Clojure: unable to import specific methods from java class","body":"<p>As Juraj was hinting it was a dependency conflict - I was also using <code>tech.ml.dataset</code> in my project, version 6, which was using an older version of <code>smile</code>. Moving <code>tech.ml.dataset</code> to version 7, which doesn't include <code>smile</code> by default, sorted the issue.</p>\n<p>Thanks!</p>\n"}],"owner":{"account_id":1039002,"reputation":3189,"user_id":1045479,"accept_rate":70,"display_name":"alex314159"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74994947,"answer_count":1,"score":0,"last_activity_date":1672757391,"creation_date":1672742619,"question_id":74992253,"body_markdown":"Possible linked to https://stackoverflow.com/questions/58968216/cannot-call-particular-java-method-from-clojure\r\n\r\nUsing the smile package, I&#39;ve upgraded to 3.0.0 and failing to call some methods. My Leiningen project.clj has the following import `[com.github.haifengl/smile-core &quot;3.0.0&quot;]`\r\n\r\nNow in the REPL:\r\n```\r\n\r\n(import smile.math.MathEx)\r\n\r\n(MathEx/log2 5.)\r\n=&gt; 2.321928094887362\r\n(MathEx/pow2 5.)\r\nSyntax error (IllegalArgumentException) compiling . at (C:\\Users\\AAlmosni\\AppData\\Local\\Temp\\1\\form-init13649993705313983821.clj:1:1).\r\nNo matching method pow2 found taking 1 args for class smile.math.MathEx\r\n(MathEx/sigmoid 5.)\r\nSyntax error (IllegalArgumentException) compiling . at (C:\\Users\\AAlmosni\\AppData\\Local\\Temp\\1\\form-init13649993705313983821.clj:1:1).\r\nNo matching method sigmoid found taking 1 args for class smile.math.MathEx\r\n(MathEx/isPower2 32)\r\n=&gt; true\r\n```\r\n\r\nThis is very confusing to me - some methods work fine, some don&#39;t. Here&#39;s an extract from MathEx.class:\r\n```\r\n    public static double log2(double x) {\r\n        return Math.log(x) / LOG2;\r\n    }\r\n\r\n    public static double log(double x) {\r\n        double y = -690.7755D;\r\n        if (x &gt; 1.0E-300D) {\r\n            y = Math.log(x);\r\n        }\r\n\r\n        return y;\r\n    }\r\n\r\n    public static double log1pe(double x) {\r\n        double y = x;\r\n        if (x &lt;= 15.0D) {\r\n            y = Math.log1p(Math.exp(x));\r\n        }\r\n\r\n        return y;\r\n    }\r\n\r\n    public static boolean isInt(float x) {\r\n        return x == (float)Math.floor((double)x) &amp;&amp; !Float.isInfinite(x);\r\n    }\r\n\r\n    public static boolean isInt(double x) {\r\n        return x == Math.floor(x) &amp;&amp; !Double.isInfinite(x);\r\n    }\r\n\r\n    public static boolean equals(double a, double b) {\r\n        if (a == b) {\r\n            return true;\r\n        } else {\r\n            double absa = Math.abs(a);\r\n            double absb = Math.abs(b);\r\n            return Math.abs(a - b) &lt;= Math.min(absa, absb) * 2.220446049250313E-16D;\r\n        }\r\n    }\r\n\r\n    public static double sigmoid(double x) {\r\n        x = Math.max(-36.0D, Math.min(x, 36.0D));\r\n        return 1.0D / (1.0D + Math.exp(-x));\r\n    }\r\n\r\n    public static double pow2(double x) {\r\n        return x * x;\r\n    }\r\n\r\n    public static boolean isPower2(int x) {\r\n        return x &gt; 0 &amp;&amp; (x &amp; x - 1) == 0;\r\n    }\r\n```\r\n\r\nAny idea what is causing the failed imports?\r\n\r\nThanks,","title":"Clojure: unable to import specific methods from java class","body":"<p>Possible linked to <a href=\"https://stackoverflow.com/questions/58968216/cannot-call-particular-java-method-from-clojure\">Cannot call particular java method from Clojure</a></p>\n<p>Using the smile package, I've upgraded to 3.0.0 and failing to call some methods. My Leiningen project.clj has the following import <code>[com.github.haifengl/smile-core &quot;3.0.0&quot;]</code></p>\n<p>Now in the REPL:</p>\n<pre><code>\n(import smile.math.MathEx)\n\n(MathEx/log2 5.)\n=&gt; 2.321928094887362\n(MathEx/pow2 5.)\nSyntax error (IllegalArgumentException) compiling . at (C:\\Users\\AAlmosni\\AppData\\Local\\Temp\\1\\form-init13649993705313983821.clj:1:1).\nNo matching method pow2 found taking 1 args for class smile.math.MathEx\n(MathEx/sigmoid 5.)\nSyntax error (IllegalArgumentException) compiling . at (C:\\Users\\AAlmosni\\AppData\\Local\\Temp\\1\\form-init13649993705313983821.clj:1:1).\nNo matching method sigmoid found taking 1 args for class smile.math.MathEx\n(MathEx/isPower2 32)\n=&gt; true\n</code></pre>\n<p>This is very confusing to me - some methods work fine, some don't. Here's an extract from MathEx.class:</p>\n<pre><code>    public static double log2(double x) {\n        return Math.log(x) / LOG2;\n    }\n\n    public static double log(double x) {\n        double y = -690.7755D;\n        if (x &gt; 1.0E-300D) {\n            y = Math.log(x);\n        }\n\n        return y;\n    }\n\n    public static double log1pe(double x) {\n        double y = x;\n        if (x &lt;= 15.0D) {\n            y = Math.log1p(Math.exp(x));\n        }\n\n        return y;\n    }\n\n    public static boolean isInt(float x) {\n        return x == (float)Math.floor((double)x) &amp;&amp; !Float.isInfinite(x);\n    }\n\n    public static boolean isInt(double x) {\n        return x == Math.floor(x) &amp;&amp; !Double.isInfinite(x);\n    }\n\n    public static boolean equals(double a, double b) {\n        if (a == b) {\n            return true;\n        } else {\n            double absa = Math.abs(a);\n            double absb = Math.abs(b);\n            return Math.abs(a - b) &lt;= Math.min(absa, absb) * 2.220446049250313E-16D;\n        }\n    }\n\n    public static double sigmoid(double x) {\n        x = Math.max(-36.0D, Math.min(x, 36.0D));\n        return 1.0D / (1.0D + Math.exp(-x));\n    }\n\n    public static double pow2(double x) {\n        return x * x;\n    }\n\n    public static boolean isPower2(int x) {\n        return x &gt; 0 &amp;&amp; (x &amp; x - 1) == 0;\n    }\n</code></pre>\n<p>Any idea what is causing the failed imports?</p>\n<p>Thanks,</p>\n"},{"tags":["java","spring","spring-boot","rest","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1672757577,"post_id":74994937,"comment_id":132343488,"body_markdown":"Does validation work at all? I doubt it and I suspect you only have the validation API on your class path and not an implementation. Did you include `spring-boot-starter-validation` as your dependency, if not add it and remove what you have now.","body":"Does validation work at all? I doubt it and I suspect you only have the validation API on your class path and not an implementation. Did you include <code>spring-boot-starter-validation</code> as your dependency, if not add it and remove what you have now."},{"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1672766282,"post_id":74994937,"comment_id":132346413,"body_markdown":"Does this answer your question? [How to validate an method argument with @Validated annotation based on group](https://stackoverflow.com/questions/31826981/how-to-validate-an-method-argument-with-validated-annotation-based-on-group)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/31826981/how-to-validate-an-method-argument-with-validated-annotation-based-on-group\">How to validate an method argument with @Validated annotation based on group</a>"}],"owner":{"account_id":22575789,"reputation":11,"user_id":16761299,"display_name":"Shravana More"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672757349,"creation_date":1672757349,"question_id":74994937,"body_markdown":"I have a DTO, which will be used by 2 endpoints.\r\n\r\nThe two endpoints -\r\n1. /groupA\r\n2. /groupB\r\n\r\nConsider the DTO with two fields, say fieldA and fieldB.\r\n\r\nFor /groupA, fieldA shouldn&#39;t be blank and fieldB can be blank\r\nFor /groupB, fieldB shouldn&#39;t be blank and fieldA can be blank\r\n\r\nI understand that this can be achieved by validation groups. I created two interfaces GroupA and GroupB.\r\n\r\n    public interface GroupA {\r\n    }\r\n\r\n    public interface GroupB {\r\n    }\r\n\r\n    public class RequestDto {\r\n      @NotBlank(groups = GroupA.class)\r\n      private String fieldA;\r\n    \r\n      @NotBlank(groups = GroupB.class)\r\n      private String fieldB;\r\n    }\r\n\r\nIn the controller, I used @Validated annotation:\r\n\r\n    public ResponseEntity&lt;ResponseDto&gt; getResult(@Validated(GroupA.class                             @RequestBody @Validated RequestDto request)) {\r\n    \r\n    ...\r\n    \r\n    }\r\n\r\nIf I do not pass fieldA in request body, I expect the endpoint to give 400 BAD REQUEST. However, it is not functioning as expected. It is returning 200 OK response.\r\n\r\nWhat am I missing ? This is the first time I&#39;m using validation groups, so might have missed something.\r\n\r\nI appreciate all the help!","title":"How to use validation groups in Spring MVC","body":"<p>I have a DTO, which will be used by 2 endpoints.</p>\n<p>The two endpoints -</p>\n<ol>\n<li>/groupA</li>\n<li>/groupB</li>\n</ol>\n<p>Consider the DTO with two fields, say fieldA and fieldB.</p>\n<p>For /groupA, fieldA shouldn't be blank and fieldB can be blank\nFor /groupB, fieldB shouldn't be blank and fieldA can be blank</p>\n<p>I understand that this can be achieved by validation groups. I created two interfaces GroupA and GroupB.</p>\n<pre><code>public interface GroupA {\n}\n\npublic interface GroupB {\n}\n\npublic class RequestDto {\n  @NotBlank(groups = GroupA.class)\n  private String fieldA;\n\n  @NotBlank(groups = GroupB.class)\n  private String fieldB;\n}\n</code></pre>\n<p>In the controller, I used @Validated annotation:</p>\n<pre><code>public ResponseEntity&lt;ResponseDto&gt; getResult(@Validated(GroupA.class                             @RequestBody @Validated RequestDto request)) {\n\n...\n\n}\n</code></pre>\n<p>If I do not pass fieldA in request body, I expect the endpoint to give 400 BAD REQUEST. However, it is not functioning as expected. It is returning 200 OK response.</p>\n<p>What am I missing ? This is the first time I'm using validation groups, so might have missed something.</p>\n<p>I appreciate all the help!</p>\n"},{"tags":["java","spring","spring-boot","log4j","log4j2"],"comments":[{"owner":{"account_id":2872454,"reputation":431,"user_id":2465467,"display_name":"Ashim"},"score":0,"creation_date":1672757355,"post_id":74994852,"comment_id":132343431,"body_markdown":"JSON files are not appropriate for placing env variables, you can use log4j.properties file instead.\nhttps://stackoverflow.com/questions/29225777/log4j-properties-in-spring-boot","body":"JSON files are not appropriate for placing env variables, you can use log4j.properties file instead. <a href=\"https://stackoverflow.com/questions/29225777/log4j-properties-in-spring-boot\" title=\"log4j properties in spring boot\">stackoverflow.com/questions/29225777/&hellip;</a>"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1672784457,"post_id":74994852,"comment_id":132351249,"body_markdown":"Did you try the [Spring Lookup](https://logging.apache.org/log4j/2.x/log4j-spring-boot/index.html)?","body":"Did you try the <a href=\"https://logging.apache.org/log4j/2.x/log4j-spring-boot/index.html\" rel=\"nofollow noreferrer\">Spring Lookup</a>?"}],"owner":{"account_id":21425714,"reputation":1,"user_id":15783067,"display_name":"James"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672756837,"creation_date":1672756837,"question_id":74994852,"body_markdown":"I have an application built using the **Spring Framework** and written in **Java**.\r\n\r\nI am using the &#39;`log4j`&#39; library for logging and have already defined a property, `fr.xyz.pathLog = mypath`, in my &#39;dev.properties&#39; file that specifies the file path for my log files. \r\n\r\nI would like to use this property in my &#39;`log4j2.json`&#39; configuration file to specify the file path for my log files. \r\n\r\nHowever, when I try to use the property in the &#39;`log4j2.json`&#39;, it does not seem to be recognized. \r\n\r\nIs there a way to use properties defined in my &#39;`dev.properties`&#39; file in my &#39;`log4j2.json`&#39; configuration file ? \r\n\r\nI tried using the &#39;`${fr.xyz.path}`&#39; syntax in the &#39;`log4j2.json`&#39; to specify the file path for my log files, but the property was not recognized when I ran the application. \r\n\r\nI expected the property to be recognized and used in the configuration, but this did not happen.","title":"How can I use a property defined in a &quot;.properties&quot; file in my &quot;log4j2.json&quot;?","body":"<p>I have an application built using the <strong>Spring Framework</strong> and written in <strong>Java</strong>.</p>\n<p>I am using the '<code>log4j</code>' library for logging and have already defined a property, <code>fr.xyz.pathLog = mypath</code>, in my 'dev.properties' file that specifies the file path for my log files.</p>\n<p>I would like to use this property in my '<code>log4j2.json</code>' configuration file to specify the file path for my log files.</p>\n<p>However, when I try to use the property in the '<code>log4j2.json</code>', it does not seem to be recognized.</p>\n<p>Is there a way to use properties defined in my '<code>dev.properties</code>' file in my '<code>log4j2.json</code>' configuration file ?</p>\n<p>I tried using the '<code>${fr.xyz.path}</code>' syntax in the '<code>log4j2.json</code>' to specify the file path for my log files, but the property was not recognized when I ran the application.</p>\n<p>I expected the property to be recognized and used in the configuration, but this did not happen.</p>\n"},{"tags":["java","swing","user-interface","awt"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1672687587,"post_id":74986245,"comment_id":132328364,"body_markdown":"Try nesting a `GridLayout` in `BorderLayout.CENTER`.","body":"Try nesting a <code>GridLayout</code> in <code>BorderLayout.CENTER</code>."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1672894836,"post_id":74986245,"comment_id":132377290,"body_markdown":"https://docs.oracle.com/javase/tutorial/uiswing/layout/","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/layout</a>"}],"answers":[{"tags":[],"owner":{"account_id":23629573,"reputation":36,"user_id":17661513,"display_name":"ya22y"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672689461,"creation_date":1672689156,"answer_id":74986506,"question_id":74986245,"body_markdown":"To get the output as shown in the diagram you can try the following\r\n```\r\n Calculator(){\r\n        this.setSize(400, 400);\r\n        this.setTitle(&quot;this&quot;);\r\n        //create first panel with BorderLayout as layout\r\n        JPanel firstPanel=new JPanel(new BorderLayout());\r\n        //Create second Panel with GrdiLayout as layout\r\n        JPanel secondPanel= new JPanel(new GridLayout(2,2));\r\n        //add 4 Buttons to second Panel\r\n        for(Integer i=0;i&lt;4;i++){\r\n            secondPanel.add(new JButton(&quot;Button&quot;+i.toString()));\r\n        }\r\n        //Add wnorth,south,west,east buttons to first panel\r\n        firstPanel.add(new JButton(&quot;north&quot;),BorderLayout.NORTH);\r\n        firstPanel.add(new JButton(&quot;south&quot;),BorderLayout.SOUTH);\r\n        firstPanel.add(new JButton(&quot;west&quot;),BorderLayout.WEST);\r\n        firstPanel.add(new JButton(&quot;east&quot;),BorderLayout.EAST);\r\n        //add the second panel (containing 4 buttons) to first panel\r\n        firstPanel.add(secondPanel,BorderLayout.CENTER);\r\n        //add first panel to the frame\r\n        this.add(firstPanel);\r\n        \r\n    }\r\n```\r\nIn main\r\n```\r\npublic static void main (String args[]){\r\n\r\n new Calculator().setVisible(true);\r\n\r\n}\r\n```\r\nOutput:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/j1Vtq.png","title":"I want to make a UI as per diagram. I have to set JButtons in a JFrame, but I don&#39;t get the output as shown in the diagram. I tied. What should I do?","body":"<p>To get the output as shown in the diagram you can try the following</p>\n<pre><code> Calculator(){\n        this.setSize(400, 400);\n        this.setTitle(&quot;this&quot;);\n        //create first panel with BorderLayout as layout\n        JPanel firstPanel=new JPanel(new BorderLayout());\n        //Create second Panel with GrdiLayout as layout\n        JPanel secondPanel= new JPanel(new GridLayout(2,2));\n        //add 4 Buttons to second Panel\n        for(Integer i=0;i&lt;4;i++){\n            secondPanel.add(new JButton(&quot;Button&quot;+i.toString()));\n        }\n        //Add wnorth,south,west,east buttons to first panel\n        firstPanel.add(new JButton(&quot;north&quot;),BorderLayout.NORTH);\n        firstPanel.add(new JButton(&quot;south&quot;),BorderLayout.SOUTH);\n        firstPanel.add(new JButton(&quot;west&quot;),BorderLayout.WEST);\n        firstPanel.add(new JButton(&quot;east&quot;),BorderLayout.EAST);\n        //add the second panel (containing 4 buttons) to first panel\n        firstPanel.add(secondPanel,BorderLayout.CENTER);\n        //add first panel to the frame\n        this.add(firstPanel);\n        \n    }\n</code></pre>\n<p>In main</p>\n<pre><code>public static void main (String args[]){\n\n new Calculator().setVisible(true);\n\n}\n</code></pre>\n<p>Output:</p>\n<p><a href=\"https://i.stack.imgur.com/j1Vtq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j1Vtq.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":26479658,"reputation":21,"user_id":20119095,"display_name":"IROSH LASHAN"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"closed_date":1672894764,"accepted_answer_id":74986506,"answer_count":1,"score":-1,"last_activity_date":1672756396,"creation_date":1672687109,"question_id":74986245,"body_markdown":"![UI is here ....](https://i.stack.imgur.com/ocC0l.png)\r\n\r\nI tried like this...\r\n\r\n    class Calculator extends JFrame{\r\n    \t// Here are the attributes\r\n    \tCalculator(){\r\n    \t// Here are the frame\r\n    \t\r\n    \t// here are the assign JPanels\r\n    \r\n    \tfirstPanel.add(buttons[0]);\r\n    \tsecondPanel.add(buttons[1]);\r\n    \t\t\r\n    \tfor (int i = 2; i &lt; 6; i++){\r\n    \t\tthirdPanel.add(buttons[i]);\r\n    \t}\r\n    \t\t\r\n    \tfourthPanel.add(buttons[6]);\r\n    \tfifthPanel.add(buttons[7]);\r\n    \t\t\t\r\n    \tadd(firstPanel,BorderLayout.PAGE_START);\r\n    \tadd(secondPanel,BorderLayout.LINE_START);\r\n    \tadd(thirdPanel,BorderLayout.CENTER);\r\n    \tadd(fourthPanel,BorderLayout.LINE_END);\r\n    \tadd(fifthPanel,BorderLayout.PAGE_END);\t`\r\n    \t}\r\n    \t\r\n    \t\r\n    }\r\n\r\n","title":"I want to make a UI as per diagram. I have to set JButtons in a JFrame, but I don&#39;t get the output as shown in the diagram. I tied. What should I do?","body":"<p><img src=\"https://i.stack.imgur.com/ocC0l.png\" alt=\"UI is here ....\" /></p>\n<p>I tried like this...</p>\n<pre><code>class Calculator extends JFrame{\n    // Here are the attributes\n    Calculator(){\n    // Here are the frame\n    \n    // here are the assign JPanels\n\n    firstPanel.add(buttons[0]);\n    secondPanel.add(buttons[1]);\n        \n    for (int i = 2; i &lt; 6; i++){\n        thirdPanel.add(buttons[i]);\n    }\n        \n    fourthPanel.add(buttons[6]);\n    fifthPanel.add(buttons[7]);\n            \n    add(firstPanel,BorderLayout.PAGE_START);\n    add(secondPanel,BorderLayout.LINE_START);\n    add(thirdPanel,BorderLayout.CENTER);\n    add(fourthPanel,BorderLayout.LINE_END);\n    add(fifthPanel,BorderLayout.PAGE_END);  `\n    }\n    \n    \n}\n</code></pre>\n"},{"tags":["java","vert.x","vertx-verticle","vertx-httpclient"],"answers":[{"tags":[],"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672756300,"creation_date":1672756300,"answer_id":74994741,"question_id":74955895,"body_markdown":"You can get a reference to the Vert.x tracer object like this:\r\n\r\n    VertxTracer&lt;Span, Span&gt; tracer = ((VertxInternal) vertx).tracer();\r\n\r\nThen you can use the tracer `receiveRequest()` / `sendResponse()` methods at the beginning / end of the process.","title":"How to create OpenTelemetry Traces in a Vertx Verticle","body":"<p>You can get a reference to the Vert.x tracer object like this:</p>\n<pre><code>VertxTracer&lt;Span, Span&gt; tracer = ((VertxInternal) vertx).tracer();\n</code></pre>\n<p>Then you can use the tracer <code>receiveRequest()</code> / <code>sendResponse()</code> methods at the beginning / end of the process.</p>\n"}],"owner":{"account_id":2139574,"reputation":2002,"user_id":2474098,"accept_rate":69,"display_name":"alknows"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":542,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672756300,"creation_date":1672346659,"question_id":74955895,"body_markdown":"What is the best way to get a handle of an OpenTelemetry object in a Verticle and how to effectively use it? The official examples are unfortunately not very helpful. It is shown how to set it up but not how to get a handle of it for manual instrumentation.\r\n\r\n    SdkTracerProvider sdkTracerProvider = SdkTracerProvider.builder().build();\r\n      OpenTelemetry openTelemetry = OpenTelemetrySdk.builder()\r\n         .setTracerProvider(sdkTracerProvider)\r\n         .setPropagators(ContextPropagators.create(W3CTraceContextPropagator.getInstance()))\r\n         .buildAndRegisterGlobal();\r\n\r\n      VertxOptions vertxOptions = new VertxOptions();\r\n      vertxOptions.setTracingOptions(new OpenTelemetryOptions(openTelemetry));\r\n\r\n      Vertx vertx = Vertx.vertx(vertxOptions);\r\n\r\nI would like to do something like this:\r\n\r\n     router.route(HttpMethod.GET, &quot;/stats/system/time&quot;).handler(ctx -&gt; {\r\n         Tracer tracer = ...vertext.please.getTracer...get(&quot;Test&quot;);\r\n         SpanBuilder spanBuilder = tracer.spanBuilder(&quot;testSpan&quot;).setAttribute(&quot;task&quot;, &quot;json-generation&quot;);\r\n         Span span = spanBuilder.startSpan();\r\n         ctx.json(new JsonObject().put(&quot;systemTime&quot;, LocalDateTime.now()));\r\n         span.end();\r\n      });\r\n\r\n\r\n ","title":"How to create OpenTelemetry Traces in a Vertx Verticle","body":"<p>What is the best way to get a handle of an OpenTelemetry object in a Verticle and how to effectively use it? The official examples are unfortunately not very helpful. It is shown how to set it up but not how to get a handle of it for manual instrumentation.</p>\n<pre><code>SdkTracerProvider sdkTracerProvider = SdkTracerProvider.builder().build();\n  OpenTelemetry openTelemetry = OpenTelemetrySdk.builder()\n     .setTracerProvider(sdkTracerProvider)\n     .setPropagators(ContextPropagators.create(W3CTraceContextPropagator.getInstance()))\n     .buildAndRegisterGlobal();\n\n  VertxOptions vertxOptions = new VertxOptions();\n  vertxOptions.setTracingOptions(new OpenTelemetryOptions(openTelemetry));\n\n  Vertx vertx = Vertx.vertx(vertxOptions);\n</code></pre>\n<p>I would like to do something like this:</p>\n<pre><code> router.route(HttpMethod.GET, &quot;/stats/system/time&quot;).handler(ctx -&gt; {\n     Tracer tracer = ...vertext.please.getTracer...get(&quot;Test&quot;);\n     SpanBuilder spanBuilder = tracer.spanBuilder(&quot;testSpan&quot;).setAttribute(&quot;task&quot;, &quot;json-generation&quot;);\n     Span span = spanBuilder.startSpan();\n     ctx.json(new JsonObject().put(&quot;systemTime&quot;, LocalDateTime.now()));\n     span.end();\n  });\n</code></pre>\n"},{"tags":["java","android","firebase-cloud-messaging","sharedpreferences"],"comments":[{"owner":{"account_id":11764846,"reputation":165,"user_id":8609783,"display_name":"Gregory Nowik"},"score":1,"creation_date":1672742004,"post_id":74991922,"comment_id":132338484,"body_markdown":"Why not use the intent extras ?","body":"Why not use the intent extras ?"}],"owner":{"account_id":27228455,"reputation":11,"user_id":20756574,"display_name":"Aniket Dhanrao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672756179,"creation_date":1672741040,"question_id":74991922,"body_markdown":"I am trying to insert a notification type in `SharedPreferences` which I receive in `onMessageReceived` as a body part when it gets a notification. And I fetch the value of the notification type on the splash screen after tapping the notification. But I am not able to get it, as the value is always empty.\r\n\r\n```\r\nSharedPreferences preferences = getSharedPreferences(Constants.Preferences.PreferencesName, Context.MODE_PRIVATE);\r\nSharedPreferences.Editor editor = preferences.edit();\r\n\r\nif (notificationType != null &amp;&amp; notificationType.equalsIgnoreCase(&quot;chatmessage&quot;)) {\r\n    Log.d(TAG, &quot;sendNotification: &quot; + notificationType);\r\n    Intent intent = new Intent(this, SplashScreenActivity.class);\r\n    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n    editor.putString(&quot;notificationType&quot;, notificationType);\r\n\r\n    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0 /* Request code */, intent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n    String title = messageBody.get(&quot;title&quot;);\r\n    String message = messageBody.get(&quot;message&quot;);\r\n    String channelId = &quot;patient_channel&quot;;\r\n\r\n    Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\r\n    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this, channelId)\r\n            .setSmallIcon(R.mipmap.ic_patient_logo)\r\n            .setContentTitle(title)\r\n            .setContentText(message)\r\n            .setAutoCancel(true)\r\n            .setSound(defaultSoundUri)\r\n            .setContentIntent(pendingIntent);\r\n\r\n    NotificationCompat.BigTextStyle bigTextStyle = new NotificationCompat.BigTextStyle();\r\n    // bigTextStyle.setBigContentTitle(title);\r\n    bigTextStyle.bigText(message);\r\n\r\n    notificationBuilder.setStyle(bigTextStyle);\r\n\r\n    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n    notificationManager.notify(0, notificationBuilder.build());\r\n}\r\n\r\neditor.apply();\r\n```","title":"Not getting the value from shared preference","body":"<p>I am trying to insert a notification type in <code>SharedPreferences</code> which I receive in <code>onMessageReceived</code> as a body part when it gets a notification. And I fetch the value of the notification type on the splash screen after tapping the notification. But I am not able to get it, as the value is always empty.</p>\n<pre><code>SharedPreferences preferences = getSharedPreferences(Constants.Preferences.PreferencesName, Context.MODE_PRIVATE);\nSharedPreferences.Editor editor = preferences.edit();\n\nif (notificationType != null &amp;&amp; notificationType.equalsIgnoreCase(&quot;chatmessage&quot;)) {\n    Log.d(TAG, &quot;sendNotification: &quot; + notificationType);\n    Intent intent = new Intent(this, SplashScreenActivity.class);\n    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n    editor.putString(&quot;notificationType&quot;, notificationType);\n\n    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0 /* Request code */, intent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n    String title = messageBody.get(&quot;title&quot;);\n    String message = messageBody.get(&quot;message&quot;);\n    String channelId = &quot;patient_channel&quot;;\n\n    Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\n    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this, channelId)\n            .setSmallIcon(R.mipmap.ic_patient_logo)\n            .setContentTitle(title)\n            .setContentText(message)\n            .setAutoCancel(true)\n            .setSound(defaultSoundUri)\n            .setContentIntent(pendingIntent);\n\n    NotificationCompat.BigTextStyle bigTextStyle = new NotificationCompat.BigTextStyle();\n    // bigTextStyle.setBigContentTitle(title);\n    bigTextStyle.bigText(message);\n\n    notificationBuilder.setStyle(bigTextStyle);\n\n    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n    notificationManager.notify(0, notificationBuilder.build());\n}\n\neditor.apply();\n</code></pre>\n"},{"tags":["java","maven","multi-module"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1672755126,"post_id":74994414,"comment_id":132342642,"body_markdown":"Try `mvn spring-boot:run` , if it is a Spring Boot and Maven Project","body":"Try <code>mvn spring-boot:run</code> , if it is a Spring Boot and Maven Project"},{"owner":{"account_id":22053969,"reputation":137,"user_id":16317812,"display_name":"PumpingSalad"},"score":1,"creation_date":1672755680,"post_id":74994414,"comment_id":132342839,"body_markdown":"By doing so i get `Unable to find a suitable main class, please add a &#39;mainClass&#39; property`. Do I need to add one by chance?","body":"By doing so i get <code>Unable to find a suitable main class, please add a &#39;mainClass&#39; property</code>. Do I need to add one by chance?"},{"owner":{"account_id":22053969,"reputation":137,"user_id":16317812,"display_name":"PumpingSalad"},"score":0,"creation_date":1672756062,"post_id":74994414,"comment_id":132342982,"body_markdown":"Just tried that, does not work","body":"Just tried that, does not work"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1672757308,"post_id":74994414,"comment_id":132343412,"body_markdown":"Spring Boot Application is like this : `@SpringBootApplication\npublic class DemoApplication {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(DemoApplication.class, args);\n\t}\n\n}`","body":"Spring Boot Application is like this : <code>@SpringBootApplication public class DemoApplication {  \tpublic static void main(String[] args) { \t\tSpringApplication.run(DemoApplication.class, args); \t}  }</code>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1672757534,"post_id":74994414,"comment_id":132343479,"body_markdown":"`Building Java Projects with Maven` (https://spring.io/guides/gs/maven/)","body":"<code>Building Java Projects with Maven</code> (<a href=\"https://spring.io/guides/gs/maven/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/maven</a>)"}],"owner":{"account_id":22053969,"reputation":137,"user_id":16317812,"display_name":"PumpingSalad"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672756051,"creation_date":1672754568,"question_id":74994414,"body_markdown":"I have a mulit-module Maven Project (with SpringBoot) where one submodule contains a Main class and the others do not.\r\nNow, when I attempt to start the application I keep getting a `Could not find or load main class Main.class` error.\r\n\r\nMy folder looks as following:\r\n\r\n    root\r\n    \\-- Submodule-1\r\n       \\-- src\r\n         \\-- main\r\n           \\-- java\r\n             \\-- com.company.package.blabla\r\n               \\-- Main.java\r\n    \\-- Submodule-2\r\n    \\-- Submodule-3\r\n\r\n    \r\nThe error appears by using the following command in the `root` directory: `$java com.company.package.blabla.Main` (I also tried it with backslashes instead of fullstops)\r\n\r\nFunnily, this command works (while in the root directory): `$java /Users/username/IdeaProjects/Work/projectName/Submodule-1/src/main/java/com/company/package/blabla/Main.java`\r\n\r\nWhat am I missing here?","title":"Could not find or load main class Main.class in Multi Module Maven Project","body":"<p>I have a mulit-module Maven Project (with SpringBoot) where one submodule contains a Main class and the others do not.\nNow, when I attempt to start the application I keep getting a <code>Could not find or load main class Main.class</code> error.</p>\n<p>My folder looks as following:</p>\n<pre><code>root\n\\-- Submodule-1\n   \\-- src\n     \\-- main\n       \\-- java\n         \\-- com.company.package.blabla\n           \\-- Main.java\n\\-- Submodule-2\n\\-- Submodule-3\n</code></pre>\n<p>The error appears by using the following command in the <code>root</code> directory: <code>$java com.company.package.blabla.Main</code> (I also tried it with backslashes instead of fullstops)</p>\n<p>Funnily, this command works (while in the root directory): <code>$java /Users/username/IdeaProjects/Work/projectName/Submodule-1/src/main/java/com/company/package/blabla/Main.java</code></p>\n<p>What am I missing here?</p>\n"},{"tags":["java","haskell","typeclass"],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":1,"up_vote_count":64,"is_accepted":false,"score":63,"last_activity_date":1533699201,"creation_date":1533699201,"answer_id":51738257,"question_id":51738158,"body_markdown":"Actually, yes. Not directly, but you can do it. Simply include a generic parameter and then derive from the generic type.\r\n\r\n    public interface Negatable&lt;T&gt; {\r\n        T negate();\r\n    }\r\n\r\n    public static &lt;T extends Negatable&lt;T&gt;&gt; T normalize(T a) {\r\n        return a.negate().negate();\r\n    }\r\n\r\nYou would implement this interface like so\r\n\r\n    public static class MyBoolean implements Negatable&lt;MyBoolean&gt; {\r\n        public boolean a;\r\n\r\n        public MyBoolean(boolean a) {\r\n            this.a = a;\r\n        }\r\n\r\n        @Override\r\n        public MyBoolean negate() {\r\n            return new MyBoolean(!this.a);\r\n        }\r\n\r\n    }\r\n\r\nIn fact, the Java standard library uses this exact trick to implement `Comparable`.\r\n\r\n    public interface Comparable&lt;T&gt; {\r\n        int compareTo(T o);\r\n    }","title":"Can I define the Negatable interface in Java?","body":"<p>Actually, yes. Not directly, but you can do it. Simply include a generic parameter and then derive from the generic type.</p>\n\n<pre><code>public interface Negatable&lt;T&gt; {\n    T negate();\n}\n\npublic static &lt;T extends Negatable&lt;T&gt;&gt; T normalize(T a) {\n    return a.negate().negate();\n}\n</code></pre>\n\n<p>You would implement this interface like so</p>\n\n<pre><code>public static class MyBoolean implements Negatable&lt;MyBoolean&gt; {\n    public boolean a;\n\n    public MyBoolean(boolean a) {\n        this.a = a;\n    }\n\n    @Override\n    public MyBoolean negate() {\n        return new MyBoolean(!this.a);\n    }\n\n}\n</code></pre>\n\n<p>In fact, the Java standard library uses this exact trick to implement <code>Comparable</code>.</p>\n\n<pre><code>public interface Comparable&lt;T&gt; {\n    int compareTo(T o);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1672755876,"creation_date":1533699676,"answer_id":51738308,"question_id":51738158,"body_markdown":"You&#39;re looking for generics, plus self typing.  Self typing is the notion of generic placeholder that equates to the class of the instance.\r\n\r\nHowever, self typing doesn&#39;t exist in java.\r\n\r\nYou can get close with generics, but it&#39;s clunky:\r\n\r\n    public interface Negatable&lt;T&gt; {\r\n        public T negate();\r\n    }\r\n\r\nThen\r\n\r\n    public class MyBoolean implements Negatable&lt;MyBoolean&gt;{\r\n\r\n        @Override\r\n\t\tpublic MyBoolean negate() {\r\n\t\t\t//your impl\r\n\t\t}\r\n\t\t\r\n\t}\r\n    \r\nSome implications for implementers:\r\n\r\n- They must specify themselves when they implement the interface, e.g. `MyBoolean implements Negatable&lt;MyBoolean&gt;`\r\n- Extending `MyBoolean` would require one to override the `negate` method again.","title":"Can I define the Negatable interface in Java?","body":"<p>You're looking for generics, plus self typing.  Self typing is the notion of generic placeholder that equates to the class of the instance.</p>\n<p>However, self typing doesn't exist in java.</p>\n<p>You can get close with generics, but it's clunky:</p>\n<pre><code>public interface Negatable&lt;T&gt; {\n    public T negate();\n}\n</code></pre>\n<p>Then</p>\n<pre><code>public class MyBoolean implements Negatable&lt;MyBoolean&gt;{\n\n    @Override\n    public MyBoolean negate() {\n        //your impl\n    }\n    \n}\n</code></pre>\n<p>Some implications for implementers:</p>\n<ul>\n<li>They must specify themselves when they implement the interface, e.g. <code>MyBoolean implements Negatable&lt;MyBoolean&gt;</code></li>\n<li>Extending <code>MyBoolean</code> would require one to override the <code>negate</code> method again.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1533764529,"creation_date":1533739735,"answer_id":51749646,"question_id":51738158,"body_markdown":"In general, no.\r\n\r\nYou *can* use tricks (as suggested in the other answers) that will make this work, but they do not provide all of the same guarantees that the Haskell typeclass does.  Specifically, in Haskell, I could define a function like this:\r\n\r\n    doublyNegate :: Negatable t =&gt; t -&gt; t\r\n    doublyNegate v = negate (negate v)\r\n\r\nIt is now known that the argument and return value of `doublyNegate` are both `t`.  But the Java equivalent:\r\n\r\n    public &lt;T extends Negatable&lt;T&gt;&gt; T doublyNegate (Negatable&lt;T&gt; v)\r\n    {\r\n        return v.negate().negate();\r\n    }\r\n\r\ndoesn&#39;t, because `Negatable&lt;T&gt;` could be implemented by another type:\r\n\r\n    public class X implements Negatable&lt;SomeNegatableClass&gt; {\r\n        public SomeNegatableClass negate () { return new SomeNegatableClass(); }\r\n        public static void main (String[] args) { \r\n           new X().negate().negate();   // results in a SomeNegatableClass, not an X\r\n    }\r\n\r\nThis isn&#39;t particularly serious for this application, but does cause trouble for other Haskell typeclasses, e.g. `Equatable`.  There is no way of implementing a Java `Equatable` typeclass without using an additional object and sending an instance of that object around wherever we send values that need comparing, (e.g: \r\n\r\n    public interface Equatable&lt;T&gt; {\r\n        boolean equal (T a, T b);\r\n    }\r\n    public class MyClass\r\n    {\r\n        String str;\r\n\r\n        public static class MyClassEquatable implements Equatable&lt;MyClass&gt; \r\n        { \r\n             public boolean equal (MyClass a, MyClass b) { \r\n                 return a.str.equals(b.str);\r\n             } \r\n        }\r\n    }\r\n    ...\r\n    public &lt;T&gt; methodThatNeedsToEquateThings (T a, T b, Equatable&lt;T&gt; eq)\r\n    {\r\n        if (eq.equal (a, b)) { System.out.println (&quot;they&#39;re equal!&quot;); }\r\n    }  \r\n\r\n(In fact, this is exactly how Haskell implements type classes, but it hides the parameter passing from you so you don&#39;t need to figure out which implementation to send where)\r\n\r\nTrying to do this with just plain Java interfaces leads to some counterintuitive results:\r\n\r\n    public interface Equatable&lt;T extends Equatable&lt;T&gt;&gt;\r\n    {\r\n        boolean equalTo (T other);\r\n    }\r\n    public MyClass implements Equatable&lt;MyClass&gt;\r\n    {\r\n        String str;\r\n        public boolean equalTo (MyClass other) \r\n        {\r\n            return str.equals(other.str);\r\n        }\r\n    }\r\n    public Another implements Equatable&lt;MyClass&gt;\r\n    {\r\n        public boolean equalTo (MyClass other)\r\n        {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    ....\r\n    MyClass a = ....;\r\n    Another b = ....;\r\n\r\n    if (b.equalTo(a))\r\n        assertTrue (a.equalTo(b));\r\n    ....\r\n\r\nYou&#39;d expect, due to the fact that `equalTo` really ought to be defined symmetrically, that if the `if` statement there compiles, the assertion would also compile, but it doesn&#39;t, because `MyClass` isn&#39;t equatable with `Another` even though the other way around is true.  But with a Haskell `Equatable` type class, we know that if `areEqual a b` works, then `areEqual b a` is also valid.  [1]\r\n\r\nAnother limitation of interfaces versus type classes is that a type class can provide a means of creating a value which implements the type class without having an existing value (e.g. the `return` operator for `Monad`), whereas for an interface you must already have an object of the type in order to be able to invoke its methods.\r\n \r\nYou ask whether there is a name for this limitation, but I&#39;m not aware of one.  It&#39;s simply because type classes are actually different to object-oriented interfaces, despite their similarities, because they are implemented in this fundamentally different way: an object is a subtype of its interface, thus carries around a copy of the interface&#39;s methods directly without modifying their definition, while a type class is a separate list of functions each of which is customised by substituting type variables.  There is no subtype relationship between a type and a type class that has an instance for the type (a Haskell `Integer` isn&#39;t a subtype of `Comparable`, for example: there simply exists a `Comparable` instance that can be passed around whenever a function needs to be able to compare its parameters and those parameters happen to be Integers).\r\n\r\n[1]: The Haskell `==` operator is actually implemented using a type class, `Eq` ... I haven&#39;t used this because operator overloading in Haskell can be confusing to people not familiar with reading Haskell code.","title":"Can I define the Negatable interface in Java?","body":"<p>In general, no.</p>\n\n<p>You <em>can</em> use tricks (as suggested in the other answers) that will make this work, but they do not provide all of the same guarantees that the Haskell typeclass does.  Specifically, in Haskell, I could define a function like this:</p>\n\n<pre><code>doublyNegate :: Negatable t =&gt; t -&gt; t\ndoublyNegate v = negate (negate v)\n</code></pre>\n\n<p>It is now known that the argument and return value of <code>doublyNegate</code> are both <code>t</code>.  But the Java equivalent:</p>\n\n<pre><code>public &lt;T extends Negatable&lt;T&gt;&gt; T doublyNegate (Negatable&lt;T&gt; v)\n{\n    return v.negate().negate();\n}\n</code></pre>\n\n<p>doesn't, because <code>Negatable&lt;T&gt;</code> could be implemented by another type:</p>\n\n<pre><code>public class X implements Negatable&lt;SomeNegatableClass&gt; {\n    public SomeNegatableClass negate () { return new SomeNegatableClass(); }\n    public static void main (String[] args) { \n       new X().negate().negate();   // results in a SomeNegatableClass, not an X\n}\n</code></pre>\n\n<p>This isn't particularly serious for this application, but does cause trouble for other Haskell typeclasses, e.g. <code>Equatable</code>.  There is no way of implementing a Java <code>Equatable</code> typeclass without using an additional object and sending an instance of that object around wherever we send values that need comparing, (e.g: </p>\n\n<pre><code>public interface Equatable&lt;T&gt; {\n    boolean equal (T a, T b);\n}\npublic class MyClass\n{\n    String str;\n\n    public static class MyClassEquatable implements Equatable&lt;MyClass&gt; \n    { \n         public boolean equal (MyClass a, MyClass b) { \n             return a.str.equals(b.str);\n         } \n    }\n}\n...\npublic &lt;T&gt; methodThatNeedsToEquateThings (T a, T b, Equatable&lt;T&gt; eq)\n{\n    if (eq.equal (a, b)) { System.out.println (\"they're equal!\"); }\n}  \n</code></pre>\n\n<p>(In fact, this is exactly how Haskell implements type classes, but it hides the parameter passing from you so you don't need to figure out which implementation to send where)</p>\n\n<p>Trying to do this with just plain Java interfaces leads to some counterintuitive results:</p>\n\n<pre><code>public interface Equatable&lt;T extends Equatable&lt;T&gt;&gt;\n{\n    boolean equalTo (T other);\n}\npublic MyClass implements Equatable&lt;MyClass&gt;\n{\n    String str;\n    public boolean equalTo (MyClass other) \n    {\n        return str.equals(other.str);\n    }\n}\npublic Another implements Equatable&lt;MyClass&gt;\n{\n    public boolean equalTo (MyClass other)\n    {\n        return true;\n    }\n}\n\n....\nMyClass a = ....;\nAnother b = ....;\n\nif (b.equalTo(a))\n    assertTrue (a.equalTo(b));\n....\n</code></pre>\n\n<p>You'd expect, due to the fact that <code>equalTo</code> really ought to be defined symmetrically, that if the <code>if</code> statement there compiles, the assertion would also compile, but it doesn't, because <code>MyClass</code> isn't equatable with <code>Another</code> even though the other way around is true.  But with a Haskell <code>Equatable</code> type class, we know that if <code>areEqual a b</code> works, then <code>areEqual b a</code> is also valid.  [1]</p>\n\n<p>Another limitation of interfaces versus type classes is that a type class can provide a means of creating a value which implements the type class without having an existing value (e.g. the <code>return</code> operator for <code>Monad</code>), whereas for an interface you must already have an object of the type in order to be able to invoke its methods.</p>\n\n<p>You ask whether there is a name for this limitation, but I'm not aware of one.  It's simply because type classes are actually different to object-oriented interfaces, despite their similarities, because they are implemented in this fundamentally different way: an object is a subtype of its interface, thus carries around a copy of the interface's methods directly without modifying their definition, while a type class is a separate list of functions each of which is customised by substituting type variables.  There is no subtype relationship between a type and a type class that has an instance for the type (a Haskell <code>Integer</code> isn't a subtype of <code>Comparable</code>, for example: there simply exists a <code>Comparable</code> instance that can be passed around whenever a function needs to be able to compare its parameters and those parameters happen to be Integers).</p>\n\n<p>[1]: The Haskell <code>==</code> operator is actually implemented using a type class, <code>Eq</code> ... I haven't used this because operator overloading in Haskell can be confusing to people not familiar with reading Haskell code.</p>\n"},{"tags":[],"owner":{"account_id":3206885,"reputation":44070,"user_id":2707792,"accept_rate":100,"display_name":"Andrey Tyukin"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1533780292,"creation_date":1533762622,"answer_id":51755695,"question_id":51738158,"body_markdown":"I interpret the question as\n\n### How can we implement ad-hoc polymorphism using typeclasses in Java?\n\nYou *can* do something very similar in Java, but without the type safety guarantees of Haskell - the solution presented below can throw errors at runtime.\n\nHere is how you can do it:\n\n 1. Define interface that represents the typeclass\n\n        interface Negatable&lt;T&gt; {\n          T negate(T t);\n        }\n\n 2. Implement some mechanism that allows you to *register instances* of the typeclass for various types. Here, a static `HashMap` will do:\n\n        static HashMap&lt;Class&lt;?&gt;, Negatable&lt;?&gt;&gt; instances = new HashMap&lt;&gt;();\n        static &lt;T&gt; void registerInstance(Class&lt;T&gt; clazz, Negatable&lt;T&gt; inst) {\n          instances.put(clazz, inst);\n        }\n        @SuppressWarnings(&quot;unchecked&quot;)\n        static &lt;T&gt; Negatable&lt;T&gt; getInstance(Class&lt;?&gt; clazz) {\n          return (Negatable&lt;T&gt;)instances.get(clazz);\n        }\n    \n 3. Define the `normalize` method that uses the above mechanism to get the appropriate instance based on the runtime class of the passed object:\n\n\n          public static &lt;T&gt; T normalize(T t) {\n            Negatable&lt;T&gt; inst = Negatable.&lt;T&gt;getInstance(t.getClass());\n            return inst.negate(inst.negate(t));\n          }\n\n 4. Register actual instances for various classes:\n\n        Negatable.registerInstance(Boolean.class, new Negatable&lt;Boolean&gt;() {\n          public Boolean negate(Boolean b) {\n            return !b;\n          }\n        });\n      \n        Negatable.registerInstance(Integer.class, new Negatable&lt;Integer&gt;() {\n          public Integer negate(Integer i) {\n            return -i;\n          }\n        });\n    \n 5. Use it!\n\n        System.out.println(normalize(false)); // Boolean `false`\n        System.out.println(normalize(42));    // Integer `42`\n\nThe main drawback is that, as already mentioned, the typeclass instance lookup can fail at runtime, not at compile-time (as in Haskell). Using a static hash map is suboptimal too, because it brings all the problems of a shared global variable, this could be mitigated with more sophisticated dependency injection mechanisms. Automatically generating typeclass instances from other typeclass instances, would require even more infrastructure (could be done in a library). But in principle, it implements ad-hoc polymorphism using typeclasses in Java.\n\nFull code:\n\n    import java.util.HashMap;\n    \n    class TypeclassInJava {\n      \n      static interface Negatable&lt;T&gt; {\n        T negate(T t);\n    \n        static HashMap&lt;Class&lt;?&gt;, Negatable&lt;?&gt;&gt; instances = new HashMap&lt;&gt;();\n        static &lt;T&gt; void registerInstance(Class&lt;T&gt; clazz, Negatable&lt;T&gt; inst) {\n          instances.put(clazz, inst);\n        }\n        @SuppressWarnings(&quot;unchecked&quot;)\n        static &lt;T&gt; Negatable&lt;T&gt; getInstance(Class&lt;?&gt; clazz) {\n          return (Negatable&lt;T&gt;)instances.get(clazz);\n        }\n      }\n    \n      public static &lt;T&gt; T normalize(T t) {\n        Negatable&lt;T&gt; inst = Negatable.&lt;T&gt;getInstance(t.getClass());\n        return inst.negate(inst.negate(t));\n      }\n    \n      static {\n        Negatable.registerInstance(Boolean.class, new Negatable&lt;Boolean&gt;() {\n          public Boolean negate(Boolean b) {\n            return !b;\n          }\n        });\n      \n        Negatable.registerInstance(Integer.class, new Negatable&lt;Integer&gt;() {\n          public Integer negate(Integer i) {\n            return -i;\n          }\n        });\n      }\n    \n      public static void main(String[] args) {\n        System.out.println(normalize(false));\n        System.out.println(normalize(42));\n      }\n    }\n","title":"Can I define the Negatable interface in Java?","body":"<p>I interpret the question as</p>\n<h3>How can we implement ad-hoc polymorphism using typeclasses in Java?</h3>\n<p>You <em>can</em> do something very similar in Java, but without the type safety guarantees of Haskell - the solution presented below can throw errors at runtime.</p>\n<p>Here is how you can do it:</p>\n<ol>\n<li><p>Define interface that represents the typeclass</p>\n<pre><code>interface Negatable&lt;T&gt; {\n  T negate(T t);\n}\n</code></pre>\n</li>\n<li><p>Implement some mechanism that allows you to <em>register instances</em> of the typeclass for various types. Here, a static <code>HashMap</code> will do:</p>\n<pre><code>static HashMap&lt;Class&lt;?&gt;, Negatable&lt;?&gt;&gt; instances = new HashMap&lt;&gt;();\nstatic &lt;T&gt; void registerInstance(Class&lt;T&gt; clazz, Negatable&lt;T&gt; inst) {\n  instances.put(clazz, inst);\n}\n@SuppressWarnings(&quot;unchecked&quot;)\nstatic &lt;T&gt; Negatable&lt;T&gt; getInstance(Class&lt;?&gt; clazz) {\n  return (Negatable&lt;T&gt;)instances.get(clazz);\n}\n</code></pre>\n</li>\n<li><p>Define the <code>normalize</code> method that uses the above mechanism to get the appropriate instance based on the runtime class of the passed object:</p>\n<pre><code>  public static &lt;T&gt; T normalize(T t) {\n    Negatable&lt;T&gt; inst = Negatable.&lt;T&gt;getInstance(t.getClass());\n    return inst.negate(inst.negate(t));\n  }\n</code></pre>\n</li>\n<li><p>Register actual instances for various classes:</p>\n<pre><code>Negatable.registerInstance(Boolean.class, new Negatable&lt;Boolean&gt;() {\n  public Boolean negate(Boolean b) {\n    return !b;\n  }\n});\n\nNegatable.registerInstance(Integer.class, new Negatable&lt;Integer&gt;() {\n  public Integer negate(Integer i) {\n    return -i;\n  }\n});\n</code></pre>\n</li>\n<li><p>Use it!</p>\n<pre><code>System.out.println(normalize(false)); // Boolean `false`\nSystem.out.println(normalize(42));    // Integer `42`\n</code></pre>\n</li>\n</ol>\n<p>The main drawback is that, as already mentioned, the typeclass instance lookup can fail at runtime, not at compile-time (as in Haskell). Using a static hash map is suboptimal too, because it brings all the problems of a shared global variable, this could be mitigated with more sophisticated dependency injection mechanisms. Automatically generating typeclass instances from other typeclass instances, would require even more infrastructure (could be done in a library). But in principle, it implements ad-hoc polymorphism using typeclasses in Java.</p>\n<p>Full code:</p>\n<pre><code>import java.util.HashMap;\n\nclass TypeclassInJava {\n  \n  static interface Negatable&lt;T&gt; {\n    T negate(T t);\n\n    static HashMap&lt;Class&lt;?&gt;, Negatable&lt;?&gt;&gt; instances = new HashMap&lt;&gt;();\n    static &lt;T&gt; void registerInstance(Class&lt;T&gt; clazz, Negatable&lt;T&gt; inst) {\n      instances.put(clazz, inst);\n    }\n    @SuppressWarnings(&quot;unchecked&quot;)\n    static &lt;T&gt; Negatable&lt;T&gt; getInstance(Class&lt;?&gt; clazz) {\n      return (Negatable&lt;T&gt;)instances.get(clazz);\n    }\n  }\n\n  public static &lt;T&gt; T normalize(T t) {\n    Negatable&lt;T&gt; inst = Negatable.&lt;T&gt;getInstance(t.getClass());\n    return inst.negate(inst.negate(t));\n  }\n\n  static {\n    Negatable.registerInstance(Boolean.class, new Negatable&lt;Boolean&gt;() {\n      public Boolean negate(Boolean b) {\n        return !b;\n      }\n    });\n  \n    Negatable.registerInstance(Integer.class, new Negatable&lt;Integer&gt;() {\n      public Integer negate(Integer i) {\n        return -i;\n      }\n    });\n  }\n\n  public static void main(String[] args) {\n    System.out.println(normalize(false));\n    System.out.println(normalize(42));\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":5327646,"reputation":1258,"user_id":5259805,"accept_rate":100,"display_name":"zale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3389,"favorite_count":0,"down_vote_count":1,"up_vote_count":53,"accepted_answer_id":51749646,"answer_count":4,"score":52,"last_activity_date":1672755876,"creation_date":1533698235,"question_id":51738158,"body_markdown":"Asking this question to clarify my understanding of type classes and higher kinded types, I&#39;m not looking for workarounds in Java.\r\n\r\n---\r\n\r\nIn Haskell, I could write something like\r\n\r\n&lt;!-- language: haskell --&gt;\r\n\r\n    class Negatable t where\r\n        negate :: t -&gt; t\r\n\r\n    normalize :: (Negatable t) =&gt; t -&gt; t\r\n    normalize x = negate (negate x)\r\n\r\nThen assuming `Bool` has an instance of `Negatable`, \r\n\r\n&lt;!-- language: haskell --&gt;\r\n\r\n    v :: Bool\r\n    v = normalize True\r\n\r\nAnd everything works fine.\r\n\r\n---\r\n\r\nIn Java, it does not seem possible to declare a proper `Negatable` interface. We could write:\r\n\r\n    interface Negatable {\r\n        Negatable negate();\r\n    }\r\n\r\n    Negatable normalize(Negatable a) {\r\n        a.negate().negate();\r\n    }\r\n\r\nBut then, unlike in Haskell, the following would not compile without a cast (assume `MyBoolean` implements `Negatable`):\r\n\r\n    MyBoolean val = normalize(new MyBoolean()); // does not compile; val is a Negatable, not a MyBoolean\r\n\r\n**Is there a way to refer to the implementing type in a Java interface, or is this a fundamental limitation of the Java type system?** If it is a limitation, is it related to higher-kinded type support? I think not: it looks like this is another sort of limitation. If so, does it have a name?\r\n\r\nThanks, and please let me know if the question is unclear!","title":"Can I define the Negatable interface in Java?","body":"<p>Asking this question to clarify my understanding of type classes and higher kinded types, I'm not looking for workarounds in Java.</p>\n\n<hr>\n\n<p>In Haskell, I could write something like</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>class Negatable t where\n    negate :: t -&gt; t\n\nnormalize :: (Negatable t) =&gt; t -&gt; t\nnormalize x = negate (negate x)\n</code></pre>\n\n<p>Then assuming <code>Bool</code> has an instance of <code>Negatable</code>, </p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>v :: Bool\nv = normalize True\n</code></pre>\n\n<p>And everything works fine.</p>\n\n<hr>\n\n<p>In Java, it does not seem possible to declare a proper <code>Negatable</code> interface. We could write:</p>\n\n<pre><code>interface Negatable {\n    Negatable negate();\n}\n\nNegatable normalize(Negatable a) {\n    a.negate().negate();\n}\n</code></pre>\n\n<p>But then, unlike in Haskell, the following would not compile without a cast (assume <code>MyBoolean</code> implements <code>Negatable</code>):</p>\n\n<pre><code>MyBoolean val = normalize(new MyBoolean()); // does not compile; val is a Negatable, not a MyBoolean\n</code></pre>\n\n<p><strong>Is there a way to refer to the implementing type in a Java interface, or is this a fundamental limitation of the Java type system?</strong> If it is a limitation, is it related to higher-kinded type support? I think not: it looks like this is another sort of limitation. If so, does it have a name?</p>\n\n<p>Thanks, and please let me know if the question is unclear!</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1672679242,"post_id":74984773,"comment_id":132326267,"body_markdown":"Its not really clear what you mean here. What you say is the custom control is an fxml file which defines an `AnchorPane` and its child nodes. I dont see the method you are trying to call defined anywhere. Is there a `GuitarSpecTableController` defined anywhere?","body":"Its not really clear what you mean here. What you say is the custom control is an fxml file which defines an <code>AnchorPane</code> and its child nodes. I dont see the method you are trying to call defined anywhere. Is there a <code>GuitarSpecTableController</code> defined anywhere?"},{"owner":{"account_id":23873119,"reputation":29,"user_id":17874578,"display_name":"Tobs"},"score":0,"creation_date":1672680909,"post_id":74984773,"comment_id":132326723,"body_markdown":"@James_D the ```GuitarSpecTableController``` is the controller of the fxml file. The method I&#39;d like to call is the ```ini``` method which is part of the ```GuitarSpecTableController```.","body":"@James_D the <code>GuitarSpecTableController</code> is the controller of the fxml file. The method I&#39;d like to call is the <code>ini</code> method which is part of the <code>GuitarSpecTableController</code>."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1672682457,"post_id":74984773,"comment_id":132327132,"body_markdown":"Provide the FXML for the `HomeController`.  It should import `GuitarSpecTableController` and use that instead of `AnchorPane`.  See: [Example 4-8 Using an Instance of the CustomControl Class in Markup](https://docs.oracle.com/javase/8/javafx/fxml-tutorial/custom_control.htm#BABDAAHE).","body":"Provide the FXML for the <code>HomeController</code>.  It should import <code>GuitarSpecTableController</code> and use that instead of <code>AnchorPane</code>.  See: <a href=\"https://docs.oracle.com/javase/8/javafx/fxml-tutorial/custom_control.htm#BABDAAHE\" rel=\"nofollow noreferrer\">Example 4-8 Using an Instance of the CustomControl Class in Markup</a>."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1672682891,"post_id":74984773,"comment_id":132327278,"body_markdown":"I dont understand how you are using `setRoot()` without `&lt;fx:root &gt;` as the root element of the FXML. Doesnt that produce a runtime exception? Create and post a [mre] (write a new project from scratch that has just enough to reproduce the issue - including a custom control with a method you want to call - and no more, and post the entire new project here, instead of portions of your actual project).","body":"I dont understand how you are using <code>setRoot()</code> without <code>&lt;fx:root &gt;</code> as the root element of the FXML. Doesnt that produce a runtime exception? Create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (write a new project from scratch that has just enough to reproduce the issue - including a custom control with a method you want to call - and no more, and post the entire new project here, instead of portions of your actual project)."},{"owner":{"account_id":23873119,"reputation":29,"user_id":17874578,"display_name":"Tobs"},"score":1,"creation_date":1672688494,"post_id":74984773,"comment_id":132328589,"body_markdown":"@James_D okey, so I made a minimal example like you said. I wanted to thank you for being so patient &#128522;","body":"@James_D okey, so I made a minimal example like you said. I wanted to thank you for being so patient "},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1672691583,"post_id":74984773,"comment_id":132329306,"body_markdown":"Instead of `&lt;fx:include&gt;` you should just use `&lt;custom_control/&gt;`. You should, and may actually need to in this context, use proper naming conventions. I think the `FXMLLoader` can only recognize you are referring to a class if the capitalization is correct. (Youll also need the import in the FXML file.)","body":"Instead of <code>&lt;fx:include&gt;</code> you should just use <code>&lt;custom_control&#47;&gt;</code>. You should, and may actually need to in this context, use proper naming conventions. I think the <code>FXMLLoader</code> can only recognize you are referring to a class if the capitalization is correct. (Youll also need the import in the FXML file.)"},{"owner":{"account_id":23873119,"reputation":29,"user_id":17874578,"display_name":"Tobs"},"score":0,"creation_date":1672754867,"post_id":74984773,"comment_id":132342547,"body_markdown":"@James_D I finally made it work, thank you so so much. Hope you have a great day &#128522;","body":"@James_D I finally made it work, thank you so so much. Hope you have a great day "}],"answers":[{"tags":[],"owner":{"account_id":23873119,"reputation":29,"user_id":17874578,"display_name":"Tobs"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672755138,"creation_date":1672755138,"answer_id":74994517,"question_id":74984773,"body_markdown":"Okey so I figured out why I didn&#39;t work so I though I&#39;d share what problems I had.\r\n\r\n1. the name&#39;s of the packages have to start with a lower case letter not upper case\r\n2. The names of the Classes as well as the views (FXML files) have to start with a upper case letter.\r\n3. instead of `&lt;fx:include&gt;` you should use the actual tag of the control (in my case `&lt;CustomControl&gt;`) and import the FXML file\r\n\r\nWhen doing all that it finally worked.","title":"JavaFX custom control use method","body":"<p>Okey so I figured out why I didn't work so I though I'd share what problems I had.</p>\n<ol>\n<li>the name's of the packages have to start with a lower case letter not upper case</li>\n<li>The names of the Classes as well as the views (FXML files) have to start with a upper case letter.</li>\n<li>instead of <code>&lt;fx:include&gt;</code> you should use the actual tag of the control (in my case <code>&lt;CustomControl&gt;</code>) and import the FXML file</li>\n</ol>\n<p>When doing all that it finally worked.</p>\n"}],"owner":{"account_id":23873119,"reputation":29,"user_id":17874578,"display_name":"Tobs"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1672755284,"creation_date":1672676600,"question_id":74984773,"body_markdown":"I made a custom control `CustomControl` in JavaFX. \r\n\r\nThe `CustomControl` is basically just a button and a text field. It is made of a `CustomControl.fxml` and a controller `CustomControl.java`.\r\n\r\nI also have a view `TestView.fxml` which includes the `CustomControl` with a controller `TestController.java`. The `TestView.fxml` has a button. When that button is pressed it calls the method &#39;OnButtonPress&#39; from the `TestController.java`. Now in that method I would like to call the method `setText` from the controller `CustomControl.java`.\r\n\r\nNow I&#39;m facing two problems.\r\nFirst: I&#39;m getting the exception &#39;Root hasn&#39;t been set. Use method setRoot() before load.&#39;\r\n\r\nSecond: I don&#39;t know how to call the method `setText` from my custom control.\r\n\r\nHere&#39;s the code:\r\n\r\nTestView.fxml:\r\n```java\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.control.Button?&gt;\r\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n\r\n&lt;AnchorPane fx:controller=&quot;controller.TestController&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;&gt;\r\n    &lt;children&gt;\r\n        &lt;fx:include source=&quot;../custom_control.fxml&quot; fx:id=&quot;custom_control&quot;/&gt;\r\n      &lt;Button onAction=&quot;#OnButtonPress&quot; fx:id=&quot;button&quot; layoutX=&quot;148.0&quot; layoutY=&quot;117.0&quot; mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\r\n    &lt;/children&gt;\r\n&lt;/AnchorPane&gt;\r\n```\r\n\r\nTestController.java:\r\n```java\r\npackage controller;\r\n\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.layout.VBox;\r\n\r\npublic class TestController {\r\n\r\n    @FXML\r\n    private Button button;\r\n\r\n    @FXML\r\n    private VBox custom_control;\r\n\r\n    public TestController() {\r\n    }\r\n\r\n    @FXML\r\n    private void OnButtonPress() {\r\n        // that is the method I would like to call\r\n        custom_control.setText(&quot;This is the new text&quot;);\r\n    }\r\n}\r\n```\r\n\r\nCustomControl.java:\r\n```java\r\nimport java.io.IOException;\r\n\r\nimport javafx.fxml.FXML;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.scene.layout.VBox;\r\n\r\npublic class CustomControl extends VBox {\r\n    @FXML private TextField textField;\r\n\r\n    public CustomControl() {\r\n        FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;custom_control.fxml&quot;));\r\n        fxmlLoader.setRoot(this);\r\n        fxmlLoader.setController(this);\r\n        \r\n        try {\r\n            fxmlLoader.load();            \r\n        } catch (IOException exception) {\r\n            throw new RuntimeException(exception);\r\n        }\r\n    }\r\n\r\n    public void setText(String text){\r\n        textField.textProperty().set(text);\r\n    }\r\n        \r\n    @FXML\r\n    protected void doSomething() {\r\n        textField.textProperty().set(&quot;The button was clicked&quot;);\r\n    }\r\n}\r\n```\r\n\r\nCustomControl.fxml:\r\n```java\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; \r\n&lt;?import javafx.scene.*?&gt;\r\n&lt;?import javafx.scene.control.*?&gt;\r\n&lt;?import javafx.scene.layout.*?&gt;\r\n\r\n&lt;fx:root type=&quot;javafx.scene.layout.VBox&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;&gt; \r\n    &lt;TextField fx:id=&quot;textField&quot;/&gt;\r\n    &lt;Button text=&quot;Click Me&quot; onAction=&quot;#doSomething&quot;/&gt;\r\n&lt;/fx:root&gt;\r\n```","title":"JavaFX custom control use method","body":"<p>I made a custom control <code>CustomControl</code> in JavaFX.</p>\n<p>The <code>CustomControl</code> is basically just a button and a text field. It is made of a <code>CustomControl.fxml</code> and a controller <code>CustomControl.java</code>.</p>\n<p>I also have a view <code>TestView.fxml</code> which includes the <code>CustomControl</code> with a controller <code>TestController.java</code>. The <code>TestView.fxml</code> has a button. When that button is pressed it calls the method 'OnButtonPress' from the <code>TestController.java</code>. Now in that method I would like to call the method <code>setText</code> from the controller <code>CustomControl.java</code>.</p>\n<p>Now I'm facing two problems.\nFirst: I'm getting the exception 'Root hasn't been set. Use method setRoot() before load.'</p>\n<p>Second: I don't know how to call the method <code>setText</code> from my custom control.</p>\n<p>Here's the code:</p>\n<p>TestView.fxml:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n\n&lt;AnchorPane fx:controller=&quot;controller.TestController&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;&gt;\n    &lt;children&gt;\n        &lt;fx:include source=&quot;../custom_control.fxml&quot; fx:id=&quot;custom_control&quot;/&gt;\n      &lt;Button onAction=&quot;#OnButtonPress&quot; fx:id=&quot;button&quot; layoutX=&quot;148.0&quot; layoutY=&quot;117.0&quot; mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\n    &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>TestController.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package controller;\n\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class TestController {\n\n    @FXML\n    private Button button;\n\n    @FXML\n    private VBox custom_control;\n\n    public TestController() {\n    }\n\n    @FXML\n    private void OnButtonPress() {\n        // that is the method I would like to call\n        custom_control.setText(&quot;This is the new text&quot;);\n    }\n}\n</code></pre>\n<p>CustomControl.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\n\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.VBox;\n\npublic class CustomControl extends VBox {\n    @FXML private TextField textField;\n\n    public CustomControl() {\n        FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;custom_control.fxml&quot;));\n        fxmlLoader.setRoot(this);\n        fxmlLoader.setController(this);\n        \n        try {\n            fxmlLoader.load();            \n        } catch (IOException exception) {\n            throw new RuntimeException(exception);\n        }\n    }\n\n    public void setText(String text){\n        textField.textProperty().set(text);\n    }\n        \n    @FXML\n    protected void doSomething() {\n        textField.textProperty().set(&quot;The button was clicked&quot;);\n    }\n}\n</code></pre>\n<p>CustomControl.fxml:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; \n&lt;?import javafx.scene.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;fx:root type=&quot;javafx.scene.layout.VBox&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;&gt; \n    &lt;TextField fx:id=&quot;textField&quot;/&gt;\n    &lt;Button text=&quot;Click Me&quot; onAction=&quot;#doSomething&quot;/&gt;\n&lt;/fx:root&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-rest"],"comments":[{"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"score":0,"creation_date":1672818161,"post_id":74994460,"comment_id":132356409,"body_markdown":"`sort=book_title,asc` should actually work, could you append the exception from this usage?","body":"<code>sort=book_title,asc</code> should actually work, could you append the exception from this usage?"}],"owner":{"account_id":23895192,"reputation":76,"user_id":17894287,"display_name":"Stefan Garlonta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672755234,"creation_date":1672754892,"question_id":74994460,"body_markdown":"I am trying to sort my API result by a nested entity field.\r\n\r\nMy Entities look like that:\r\n\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;book_item&quot;)\r\npublic class BookItem {\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private UUID id;\r\n\r\n    @ManyToOne\r\n    @NotNull\r\n    private Book book;\r\n\r\n    ...\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;book&quot;)\r\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\r\npublic class Book {\r\n\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;sequenceGenerator&quot;)\r\n    @SequenceGenerator(name = &quot;sequenceGenerator&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;title&quot;, nullable = false)\r\n    private String title;\r\n\r\n    private String subtitle;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER, cascade = { CascadeType.PERSIST, CascadeType.MERGE })\r\n    @JoinTable(name = &quot;rel_book_author&quot;, joinColumns = @JoinColumn(name = &quot;book_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;author_id&quot;))\r\n    @Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\r\n    @JsonIgnoreProperties(value = { &quot;books&quot; }, allowSetters = true)\r\n    private Set&lt;Author&gt; authors = new HashSet&lt;&gt;();\r\n\r\n    @Column(name = &quot;isbn&quot;, nullable = false)\r\n    private String isbn;\r\n\r\n    @Column(name = &quot;pages&quot;, nullable = false)\r\n    private Integer pages;\r\n    ...\r\n}\r\n```\r\nNow I want to query all BookItems sorted by the Book titles.\r\n\r\nMy repository lloks like that:\r\n\r\n\r\n```java\r\npublic interface BookItemRepository extends JpaRepository&lt;BookItem, UUID&gt; {\r\n    @Query(\r\n        &quot;select distinct b from BookItem b left join b.book.authors authors where (upper(authors.name) like upper(concat(&#39;%&#39;, ?2, &#39;%&#39;)) or authors is NULL ) and upper(b.book.title) like upper(concat(&#39;%&#39;, ?1, &#39;%&#39;))&quot;\r\n    )\r\n    Page&lt;BookItem&gt; findAllByTitleAndAuthor(String title, String name, Pageable pageable);\r\n}\r\n```\r\n\r\n\r\n\r\nI&#39;ve implemented an Angular component which does the following request:\r\n\r\n```http\r\nGET http://localhost:9000/api/book/items?size=5&amp;sort=title,asc\r\n```\r\nI get a 500 error code:\r\n\r\n```\r\norg.hibernate.QueryException: could not resolve property: title of: org.pickwicksoft.libraary.domain.BookItem [select distinct b from org.pickwicksoft.libraary.domain.BookItem b left join b.book.authors authors where (upper(authors.name) like upper(concat(&#39;%&#39;, ?2, &#39;%&#39;)) or authors is NULL ) and upper(b.book.title) like upper(concat(&#39;%&#39;, ?1, &#39;%&#39;)) order by b.title asc, b.id asc]; nested exception is java.lang.IllegalArgumentException\r\n```\r\n\r\nI also tried the following and it also does not work:\r\n\r\n```http\r\nGET http://localhost:9000/api/book/items?size=5&amp;sort=book_title,asc\r\n```\r\n\r\nHow can I solve this problem?\r\n","title":"Spring Boot sort by nested Entity","body":"<p>I am trying to sort my API result by a nested entity field.</p>\n<p>My Entities look like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;book_item&quot;)\npublic class BookItem {\n\n    @Id\n    @Column(name = &quot;id&quot;, nullable = false)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private UUID id;\n\n    @ManyToOne\n    @NotNull\n    private Book book;\n\n    ...\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;book&quot;)\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\npublic class Book {\n\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;sequenceGenerator&quot;)\n    @SequenceGenerator(name = &quot;sequenceGenerator&quot;)\n    private Long id;\n\n    @Column(name = &quot;title&quot;, nullable = false)\n    private String title;\n\n    private String subtitle;\n\n    @ManyToMany(fetch = FetchType.EAGER, cascade = { CascadeType.PERSIST, CascadeType.MERGE })\n    @JoinTable(name = &quot;rel_book_author&quot;, joinColumns = @JoinColumn(name = &quot;book_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;author_id&quot;))\n    @Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\n    @JsonIgnoreProperties(value = { &quot;books&quot; }, allowSetters = true)\n    private Set&lt;Author&gt; authors = new HashSet&lt;&gt;();\n\n    @Column(name = &quot;isbn&quot;, nullable = false)\n    private String isbn;\n\n    @Column(name = &quot;pages&quot;, nullable = false)\n    private Integer pages;\n    ...\n}\n</code></pre>\n<p>Now I want to query all BookItems sorted by the Book titles.</p>\n<p>My repository lloks like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface BookItemRepository extends JpaRepository&lt;BookItem, UUID&gt; {\n    @Query(\n        &quot;select distinct b from BookItem b left join b.book.authors authors where (upper(authors.name) like upper(concat('%', ?2, '%')) or authors is NULL ) and upper(b.book.title) like upper(concat('%', ?1, '%'))&quot;\n    )\n    Page&lt;BookItem&gt; findAllByTitleAndAuthor(String title, String name, Pageable pageable);\n}\n</code></pre>\n<p>I've implemented an Angular component which does the following request:</p>\n<pre class=\"lang-http prettyprint-override\"><code>GET http://localhost:9000/api/book/items?size=5&amp;sort=title,asc\n</code></pre>\n<p>I get a 500 error code:</p>\n<pre><code>org.hibernate.QueryException: could not resolve property: title of: org.pickwicksoft.libraary.domain.BookItem [select distinct b from org.pickwicksoft.libraary.domain.BookItem b left join b.book.authors authors where (upper(authors.name) like upper(concat('%', ?2, '%')) or authors is NULL ) and upper(b.book.title) like upper(concat('%', ?1, '%')) order by b.title asc, b.id asc]; nested exception is java.lang.IllegalArgumentException\n</code></pre>\n<p>I also tried the following and it also does not work:</p>\n<pre class=\"lang-http prettyprint-override\"><code>GET http://localhost:9000/api/book/items?size=5&amp;sort=book_title,asc\n</code></pre>\n<p>How can I solve this problem?</p>\n"},{"tags":["java","javascript","rhino"],"comments":[{"owner":{"account_id":2365504,"reputation":1312,"user_id":2071253,"accept_rate":62,"display_name":"Julien"},"score":0,"creation_date":1365023246,"post_id":15798070,"comment_id":22464728,"body_markdown":"Is it a requirement to use Rhino ? There are others way to interact with JS in Java that are more stable than Rhino.","body":"Is it a requirement to use Rhino ? There are others way to interact with JS in Java that are more stable than Rhino."},{"owner":{"account_id":367804,"reputation":10671,"user_id":714211,"accept_rate":72,"display_name":"Doua Beri"},"score":0,"creation_date":1365033131,"post_id":15798070,"comment_id":22468647,"body_markdown":"@JulienS. can you give me more detales?","body":"@JulienS. can you give me more detales?"}],"answers":[{"tags":[],"owner":{"account_id":61252,"reputation":407488,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672755144,"creation_date":1365023115,"answer_id":15798106,"question_id":15798070,"body_markdown":"My original answer (below) is incorrect. &quot;Native&quot; here means &quot;native JavaScript array&quot;. Why `.add()` is not implemented, given that the implementation extends the `List` interface, I can&#39;t say. It is possible however to use the JavaScript means for extending the array (`.push()` etc).\r\n\r\n&lt;hr&gt;\r\n\r\nIt doesn&#39;t make sense to implement `.add()` for a native array. They&#39;re fixed-length arrays, and the length is constant.\r\n\r\nNote that `.add()` is marked as an &quot;optional operation&quot; in the `java.util.Collection` interface.\r\n","title":"Mozilla Rhino NativeArray.add() is throwing an error - always","body":"<p>My original answer (below) is incorrect. &quot;Native&quot; here means &quot;native JavaScript array&quot;. Why <code>.add()</code> is not implemented, given that the implementation extends the <code>List</code> interface, I can't say. It is possible however to use the JavaScript means for extending the array (<code>.push()</code> etc).</p>\n<hr>\n<p>It doesn't make sense to implement <code>.add()</code> for a native array. They're fixed-length arrays, and the length is constant.</p>\n<p>Note that <code>.add()</code> is marked as an &quot;optional operation&quot; in the <code>java.util.Collection</code> interface.</p>\n"},{"tags":[],"owner":{"account_id":4330743,"reputation":36,"user_id":3536354,"display_name":"vansante"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397571367,"creation_date":1397571367,"answer_id":23086384,"question_id":15798070,"body_markdown":"You can use the following code instead of add():\r\n\r\n    NativeArray array;\r\n    array.put(array.size(), array, result);","title":"Mozilla Rhino NativeArray.add() is throwing an error - always","body":"<p>You can use the following code instead of add():</p>\n\n<pre><code>NativeArray array;\narray.put(array.size(), array, result);\n</code></pre>\n"}],"owner":{"account_id":367804,"reputation":10671,"user_id":714211,"accept_rate":72,"display_name":"Doua Beri"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1326,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1672755144,"creation_date":1365022956,"question_id":15798070,"body_markdown":"I&#39;m looking for build a javascript array in java using mozilla rhino `NativeArray` class,\r\nhowever when I try to add elements to `NativeArray` a `java.lang.UnsupportedOperationException` is thrown.\r\n\r\nhere is my code:\r\n\r\n\tNativeArray array=new NativeArray(1);\r\n\tarray.add(&quot;cccc&quot;);\r\n\r\nand here is the error I&#39;m receiving:\r\n\r\n    Caused by: java.lang.UnsupportedOperationException\r\n    \tat org.mozilla.javascript.NativeArray.add(NativeArray.java:1826)\r\n\r\nIf I create the NativeArray with a java array from the begining everything is working great. \r\n\r\n\tString[] str=new String[2];\r\n\tstr[0]=&quot;aaaa&quot;;\r\n\tstr[1]=&quot;bbbb&quot;;\r\n\tNativeArray array=new NativeArray(str);\r\n\r\n\r\nI was looking through NativeArray source code and I was surprised to see that the add method always throws an error\r\nhere is the source code: http://grepcode.com/file/repo1.maven.org/maven2/org.mozilla/rhino/1.7R4/org/mozilla/javascript/NativeArray.java#1825\r\n\r\n**Note: I&#39;m using mozilla rhino 1.7R4 which is the latest version so far**\r\n\r\nIt this a bug from mozilla rhino or am I doing something wrong?\r\n\r\nThanks","title":"Mozilla Rhino NativeArray.add() is throwing an error - always","body":"<p>I'm looking for build a javascript array in java using mozilla rhino <code>NativeArray</code> class,\nhowever when I try to add elements to <code>NativeArray</code> a <code>java.lang.UnsupportedOperationException</code> is thrown.</p>\n\n<p>here is my code:</p>\n\n<pre><code>NativeArray array=new NativeArray(1);\narray.add(\"cccc\");\n</code></pre>\n\n<p>and here is the error I'm receiving:</p>\n\n<pre><code>Caused by: java.lang.UnsupportedOperationException\n    at org.mozilla.javascript.NativeArray.add(NativeArray.java:1826)\n</code></pre>\n\n<p>If I create the NativeArray with a java array from the begining everything is working great. </p>\n\n<pre><code>String[] str=new String[2];\nstr[0]=\"aaaa\";\nstr[1]=\"bbbb\";\nNativeArray array=new NativeArray(str);\n</code></pre>\n\n<p>I was looking through NativeArray source code and I was surprised to see that the add method always throws an error\nhere is the source code: <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.mozilla/rhino/1.7R4/org/mozilla/javascript/NativeArray.java#1825\" rel=\"nofollow\">http://grepcode.com/file/repo1.maven.org/maven2/org.mozilla/rhino/1.7R4/org/mozilla/javascript/NativeArray.java#1825</a></p>\n\n<p><strong>Note: I'm using mozilla rhino 1.7R4 which is the latest version so far</strong></p>\n\n<p>It this a bug from mozilla rhino or am I doing something wrong?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","graphql-java"],"owner":{"account_id":193872,"reputation":349,"user_id":435860,"accept_rate":100,"display_name":"Oskar Lund"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672754690,"creation_date":1672754690,"question_id":74994441,"body_markdown":"#### The issue\r\n\r\nI&#39;m implementing a GraphQL api and have ran into the issue that whenever I&#39;m using any java type not defined in the local source code as part of the response then the whole response gets serialized as a String instead of as the proper json object I&#39;m expecting. I see this same issue using two different java server/grapql implementations (OpenLiberty/Microprofile &amp; KumuluzEE). This leads me to think that there is some key reason for this that I just fail to understand. Would greatly appreciate some enlightenment on this.\r\n\r\n#### In more detail\r\n\r\nLet&#39;s say I have a class `User` that looks like this:\r\n```\r\n{\r\n    String id;\r\n    String name;\r\n}\r\n```\r\nIf I define this in the source of the project that has the graphql api impl the response gets serialized properly to something like this:\r\n```\r\n{\r\n  &quot;data&quot;: {\r\n    &quot;getUser&quot;: {\r\n      &quot;id&quot;: &quot;12345&quot;,\r\n      &quot;name&quot;: &quot;John Doe&quot;\r\n    }\r\n  }\r\n}\r\n```\r\nBut if I pull in User as a dependency to my api impl project then the response will instead be something like this:\r\n```\r\n{\r\n  &quot;data&quot;: {\r\n    &quot;getUser&quot;: &quot;{\\&quot;id\\&quot;:\\&quot;12345\\&quot;, \\&quot;name\\&quot;:\\&quot;John Doe\\&quot;}&quot;\r\n  }\r\n}\r\n```\r\nEssentially useless. This leads to having to duplicate a bunch of types across microservices in the namespace. Any explanation for this behaviour or way around it would be very helpful. As mentioned at first I just guessed it was some limitation in the particular graphql impl I was using (OpenLiberty/Microprofile) but I&#39;ve now seen the same issue manifest with a different one also.\r\n\r\nMany thanks.","title":"Response objects get serialized as Strings if I use 3rd party response types","body":"<h4>The issue</h4>\n<p>I'm implementing a GraphQL api and have ran into the issue that whenever I'm using any java type not defined in the local source code as part of the response then the whole response gets serialized as a String instead of as the proper json object I'm expecting. I see this same issue using two different java server/grapql implementations (OpenLiberty/Microprofile &amp; KumuluzEE). This leads me to think that there is some key reason for this that I just fail to understand. Would greatly appreciate some enlightenment on this.</p>\n<h4>In more detail</h4>\n<p>Let's say I have a class <code>User</code> that looks like this:</p>\n<pre><code>{\n    String id;\n    String name;\n}\n</code></pre>\n<p>If I define this in the source of the project that has the graphql api impl the response gets serialized properly to something like this:</p>\n<pre><code>{\n  &quot;data&quot;: {\n    &quot;getUser&quot;: {\n      &quot;id&quot;: &quot;12345&quot;,\n      &quot;name&quot;: &quot;John Doe&quot;\n    }\n  }\n}\n</code></pre>\n<p>But if I pull in User as a dependency to my api impl project then the response will instead be something like this:</p>\n<pre><code>{\n  &quot;data&quot;: {\n    &quot;getUser&quot;: &quot;{\\&quot;id\\&quot;:\\&quot;12345\\&quot;, \\&quot;name\\&quot;:\\&quot;John Doe\\&quot;}&quot;\n  }\n}\n</code></pre>\n<p>Essentially useless. This leads to having to duplicate a bunch of types across microservices in the namespace. Any explanation for this behaviour or way around it would be very helpful. As mentioned at first I just guessed it was some limitation in the particular graphql impl I was using (OpenLiberty/Microprofile) but I've now seen the same issue manifest with a different one also.</p>\n<p>Many thanks.</p>\n"},{"tags":["java","mongodb","aws-lambda"],"answers":[{"tags":[],"owner":{"account_id":10749774,"reputation":14475,"user_id":7909676,"display_name":"Leeroy Hannigan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672754345,"creation_date":1672754345,"answer_id":74994377,"question_id":74994262,"body_markdown":"This is likely not a permission issue but more of a network access issue. \r\n\r\n1. If your Lambda is within a VPC then ensure it is allowed access to the MongoDB Atlas, subnets and ACL&#39;s should permit access.\r\n2. If Lambda is not within a VPC, then ensure your cluster has access to the public internet `0.0.0.0/0`\r\n\r\nhttps://www.mongodb.com/docs/atlas/manage-connections-aws-lambda/","title":"AWS Lambda and MongoDB Atlas Connectivity Issue","body":"<p>This is likely not a permission issue but more of a network access issue.</p>\n<ol>\n<li>If your Lambda is within a VPC then ensure it is allowed access to the MongoDB Atlas, subnets and ACL's should permit access.</li>\n<li>If Lambda is not within a VPC, then ensure your cluster has access to the public internet <code>0.0.0.0/0</code></li>\n</ol>\n<p><a href=\"https://www.mongodb.com/docs/atlas/manage-connections-aws-lambda/\" rel=\"nofollow noreferrer\">https://www.mongodb.com/docs/atlas/manage-connections-aws-lambda/</a></p>\n"}],"owner":{"account_id":5659321,"reputation":1,"user_id":20919625,"display_name":"Jacob Jeremiah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672754345,"creation_date":1672753745,"question_id":74994262,"body_markdown":"I want to create a connection to MongoDB Atlas from an AWS Lambda function. The AWS Lambda function I created is not able to connect to MongoDB Atlas using an IAM connection.\r\n\r\nThe following Java exception is thrown after attempting to connect to MongoDB Atlas.\r\n\r\n```\r\ncom.mongodb.MongoSocketOpenException: Exception opening socket\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:73) ~[mongodb-driver-core-4.8.1.jar:?]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:183) ~[mongodb-driver-core-4.8.1.jar:?]\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:198) [mongodb-driver-core-4.8.1.jar:?]\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:158) [mongodb-driver-core-4.8.1.jar:?]\r\n\tat java.lang.Thread.run(Unknown Source) [?:?]\r\nCaused by: java.net.SocketTimeoutException: connect timed out\r\n\tat java.net.PlainSocketImpl.socketConnect(Native Method) ~[?:?]\r\n\tat java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) ~[?:?]\r\n\tat java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) ~[?:?]\r\n\tat java.net.AbstractPlainSocketImpl.connect(Unknown Source) ~[?:?]\r\n\tat java.net.SocksSocketImpl.connect(Unknown Source) ~[?:?]\r\n\tat java.net.Socket.connect(Unknown Source) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketImpl.connect(Unknown Source) ~[?:?]\r\n\tat com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.8.1.jar:?]\r\n\tat com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:82) ~[mongodb-driver-core-4.8.1.jar:?]\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:68) ~[mongodb-driver-core-4.8.1.jar:?]\r\n\t... 4 more\r\n```\r\n\r\n\r\n\r\nHere&#39;s my Java code that I currently use to establish a connection to MongoDB Atlas\r\n\r\n\r\n```java    \r\n\r\n    final String accessKeyId = System.getenv(&quot;AWS_ACCESS_KEY_ID&quot;);\r\n    final String secretAccessKey = System.getenv(&quot;AWS_SECRET_ACCESS_KEY&quot;);\r\n    final Regions region = Regions.US_EAST_1;\r\n    final BasicAWSCredentials credentials = new BasicAWSCredentials(accessKeyId, secretAccessKey);\r\n\r\n    final AWSSecurityTokenService stsClient = AWSSecurityTokenServiceClientBuilder.standard()\r\n      .withCredentials(new AWSStaticCredentialsProvider(credentials))\r\n      .withRegion(region)\r\n      .build();\r\n\r\n    final AssumeRoleRequest roleRequest = new AssumeRoleRequest()\r\n      .withRoleArn(&quot;&lt;Role ARN&gt;&quot;)\r\n      .withRoleSessionName(&quot;my-session&quot;);\r\n    final AssumeRoleResult roleResponse = stsClient.assumeRole(roleRequest);\r\n    final Credentials sessionCredentials = roleResponse.getCredentials();\r\n    final ConnectionString connectionString\r\n      = new ConnectionString(&quot;mongodb+srv://&quot; + accessKeyId + &quot;:&quot; + secretAccessKey\r\n      + &quot;@cluster.e.mongodb.net/?authSource=%24external&amp;authMechanism=MONGODB-AWS&amp;retryWrites=true&amp;w=majority&amp;authMechanismProperties=AWS_SESSION_TOKEN:&quot;\r\n      + stsClient.getSessionToken().getCredentials().getSessionToken());\r\n    final MongoClientSettings settings = MongoClientSettings.builder()\r\n      .applyConnectionString(connectionString)\r\n      .serverApi(ServerApi.builder()\r\n        .version(ServerApiVersion.V1)\r\n        .build())\r\n      .build();\r\n    return MongoClients.create(settings);\r\n\r\n```\r\n\r\nHere&#39;s the IAM policy that is being used:\r\n\r\n```json\r\n{\r\n    &quot;Version&quot;: &quot;2012-10-17&quot;,\r\n    &quot;Statement&quot;: [\r\n        {\r\n            &quot;Effect&quot;: &quot;Allow&quot;,\r\n            &quot;Action&quot;: [\r\n                &quot;sts:*&quot;,\r\n                &quot;logs:CreateLogGroup&quot;\r\n            ],\r\n            &quot;Resource&quot;: [\r\n                &quot;arn:aws:logs:***:kuungana-fn-api-log:*&quot;,\r\n                &quot;arn:aws:iam::***:role/KuunganaApiRole&quot;,\r\n                &quot;arn:aws:iam::***:user/user1&quot;\r\n            ]\r\n        },\r\n        {\r\n            &quot;Effect&quot;: &quot;Allow&quot;,\r\n            &quot;Action&quot;: [\r\n                &quot;logs:CreateLogStream&quot;,\r\n                &quot;logs:PutLogEvents&quot;\r\n            ],\r\n            &quot;Resource&quot;: &quot;arn:aws:logs:***:log-group:/aws/lambda/events_get:*&quot;\r\n        },\r\n        {\r\n            &quot;Effect&quot;: &quot;Allow&quot;,\r\n            &quot;Action&quot;: [\r\n                &quot;sts:GetSessionToken&quot;,\r\n                &quot;sts:DecodeAuthorizationMessage&quot;,\r\n                &quot;sts:GetAccessKeyInfo&quot;,\r\n                &quot;sts:GetCallerIdentity&quot;,\r\n                &quot;sts:GetServiceBearerToken&quot;,\r\n                &quot;sts:GetSessionToken&quot;\r\n            ],\r\n            &quot;Resource&quot;: &quot;*&quot;\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nHere&#39;s the trust relationships for KuunganaApiRole:\r\n\r\n\r\n```json\r\n{\r\n    &quot;Version&quot;: &quot;2012-10-17&quot;,\r\n    &quot;Statement&quot;: [\r\n        {\r\n            &quot;Effect&quot;: &quot;Allow&quot;,\r\n            &quot;Principal&quot;: {\r\n                &quot;Service&quot;: &quot;lambda.amazonaws.com&quot;\r\n            },\r\n            &quot;Action&quot;: &quot;sts:AssumeRole&quot;\r\n        },\r\n        {\r\n            &quot;Effect&quot;: &quot;Allow&quot;,\r\n            &quot;Principal&quot;: {\r\n                &quot;AWS&quot;: &quot;arn:aws:iam::***:user/user1&quot;\r\n            },\r\n            &quot;Action&quot;: &quot;sts:AssumeRole&quot;\r\n        },\r\n        {\r\n            &quot;Effect&quot;: &quot;Allow&quot;,\r\n            &quot;Principal&quot;: {\r\n                &quot;AWS&quot;: &quot;arn:aws:sts::***:assumed-role/KuunganaApiRole/events_create&quot;\r\n            },\r\n            &quot;Action&quot;: &quot;sts:AssumeRole&quot;\r\n        }\r\n    ]\r\n}\r\n\r\n```\r\n","title":"AWS Lambda and MongoDB Atlas Connectivity Issue","body":"<p>I want to create a connection to MongoDB Atlas from an AWS Lambda function. The AWS Lambda function I created is not able to connect to MongoDB Atlas using an IAM connection.</p>\n<p>The following Java exception is thrown after attempting to connect to MongoDB Atlas.</p>\n<pre><code>com.mongodb.MongoSocketOpenException: Exception opening socket\n    at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:73) ~[mongodb-driver-core-4.8.1.jar:?]\n    at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:183) ~[mongodb-driver-core-4.8.1.jar:?]\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:198) [mongodb-driver-core-4.8.1.jar:?]\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:158) [mongodb-driver-core-4.8.1.jar:?]\n    at java.lang.Thread.run(Unknown Source) [?:?]\nCaused by: java.net.SocketTimeoutException: connect timed out\n    at java.net.PlainSocketImpl.socketConnect(Native Method) ~[?:?]\n    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) ~[?:?]\n    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) ~[?:?]\n    at java.net.AbstractPlainSocketImpl.connect(Unknown Source) ~[?:?]\n    at java.net.SocksSocketImpl.connect(Unknown Source) ~[?:?]\n    at java.net.Socket.connect(Unknown Source) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl.connect(Unknown Source) ~[?:?]\n    at com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.8.1.jar:?]\n    at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:82) ~[mongodb-driver-core-4.8.1.jar:?]\n    at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:68) ~[mongodb-driver-core-4.8.1.jar:?]\n    ... 4 more\n</code></pre>\n<p>Here's my Java code that I currently use to establish a connection to MongoDB Atlas</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    final String accessKeyId = System.getenv(&quot;AWS_ACCESS_KEY_ID&quot;);\n    final String secretAccessKey = System.getenv(&quot;AWS_SECRET_ACCESS_KEY&quot;);\n    final Regions region = Regions.US_EAST_1;\n    final BasicAWSCredentials credentials = new BasicAWSCredentials(accessKeyId, secretAccessKey);\n\n    final AWSSecurityTokenService stsClient = AWSSecurityTokenServiceClientBuilder.standard()\n      .withCredentials(new AWSStaticCredentialsProvider(credentials))\n      .withRegion(region)\n      .build();\n\n    final AssumeRoleRequest roleRequest = new AssumeRoleRequest()\n      .withRoleArn(&quot;&lt;Role ARN&gt;&quot;)\n      .withRoleSessionName(&quot;my-session&quot;);\n    final AssumeRoleResult roleResponse = stsClient.assumeRole(roleRequest);\n    final Credentials sessionCredentials = roleResponse.getCredentials();\n    final ConnectionString connectionString\n      = new ConnectionString(&quot;mongodb+srv://&quot; + accessKeyId + &quot;:&quot; + secretAccessKey\n      + &quot;@cluster.e.mongodb.net/?authSource=%24external&amp;authMechanism=MONGODB-AWS&amp;retryWrites=true&amp;w=majority&amp;authMechanismProperties=AWS_SESSION_TOKEN:&quot;\n      + stsClient.getSessionToken().getCredentials().getSessionToken());\n    final MongoClientSettings settings = MongoClientSettings.builder()\n      .applyConnectionString(connectionString)\n      .serverApi(ServerApi.builder()\n        .version(ServerApiVersion.V1)\n        .build())\n      .build();\n    return MongoClients.create(settings);\n\n</code></pre>\n<p>Here's the IAM policy that is being used:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;Version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;sts:*&quot;,\n                &quot;logs:CreateLogGroup&quot;\n            ],\n            &quot;Resource&quot;: [\n                &quot;arn:aws:logs:***:kuungana-fn-api-log:*&quot;,\n                &quot;arn:aws:iam::***:role/KuunganaApiRole&quot;,\n                &quot;arn:aws:iam::***:user/user1&quot;\n            ]\n        },\n        {\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;logs:CreateLogStream&quot;,\n                &quot;logs:PutLogEvents&quot;\n            ],\n            &quot;Resource&quot;: &quot;arn:aws:logs:***:log-group:/aws/lambda/events_get:*&quot;\n        },\n        {\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;sts:GetSessionToken&quot;,\n                &quot;sts:DecodeAuthorizationMessage&quot;,\n                &quot;sts:GetAccessKeyInfo&quot;,\n                &quot;sts:GetCallerIdentity&quot;,\n                &quot;sts:GetServiceBearerToken&quot;,\n                &quot;sts:GetSessionToken&quot;\n            ],\n            &quot;Resource&quot;: &quot;*&quot;\n        }\n    ]\n}\n</code></pre>\n<p>Here's the trust relationships for KuunganaApiRole:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;Version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Principal&quot;: {\n                &quot;Service&quot;: &quot;lambda.amazonaws.com&quot;\n            },\n            &quot;Action&quot;: &quot;sts:AssumeRole&quot;\n        },\n        {\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Principal&quot;: {\n                &quot;AWS&quot;: &quot;arn:aws:iam::***:user/user1&quot;\n            },\n            &quot;Action&quot;: &quot;sts:AssumeRole&quot;\n        },\n        {\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Principal&quot;: {\n                &quot;AWS&quot;: &quot;arn:aws:sts::***:assumed-role/KuunganaApiRole/events_create&quot;\n            },\n            &quot;Action&quot;: &quot;sts:AssumeRole&quot;\n        }\n    ]\n}\n\n</code></pre>\n"},{"tags":["java","swing","arraylist","panel","game-development"],"comments":[{"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"score":0,"creation_date":1672749668,"post_id":74993371,"comment_id":132340902,"body_markdown":"The stacktrace suggests your problem is in the `updateGameState()` method.. :)","body":"The stacktrace suggests your problem is in the <code>updateGameState()</code> method.. :)"}],"answers":[{"tags":[],"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672749739,"creation_date":1672749739,"answer_id":74993518,"question_id":74993371,"body_markdown":"This is the problem: you iterate a list and modify it at the same time..\r\n\r\n     for (Asteroid asteroid : asteroids) {\r\n                asteroid.move();\r\n                if (asteroid.isOutOfBounds()) {\r\n                    asteroids.remove(asteroid);\r\n\r\nSee here: https://stackoverflow.com/questions/20639098/in-java-can-you-modify-a-list-while-iterating-through-it","title":"Space Invaders generate initial Asteroids Java Failure","body":"<p>This is the problem: you iterate a list and modify it at the same time..</p>\n<pre><code> for (Asteroid asteroid : asteroids) {\n            asteroid.move();\n            if (asteroid.isOutOfBounds()) {\n                asteroids.remove(asteroid);\n</code></pre>\n<p>See here: <a href=\"https://stackoverflow.com/questions/20639098/in-java-can-you-modify-a-list-while-iterating-through-it\">In Java, can you modify a List while iterating through it?</a></p>\n"},{"tags":[],"owner":{"account_id":22995104,"reputation":9,"user_id":17120013,"display_name":"kiwY12"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672754214,"creation_date":1672754214,"answer_id":74994355,"question_id":74993371,"body_markdown":"Changing the asteroid checking `for` loop, to a default `for(int i = 0; i &lt; asteroids.size(); i++)` has fixed it.\r\n\r\nI have also moved the generation of new asteroids into the `updateGameState` method.\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.io.*;\r\nimport java.awt.Graphics;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.event.KeyEvent;\r\nimport java.awt.event.KeyListener;\r\nimport java.util.ArrayList;\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\n\r\nimport javax.sound.sampled.AudioInputStream;\r\nimport javax.sound.sampled.AudioSystem;\r\nimport javax.sound.sampled.Clip;\r\nimport javax.sound.sampled.LineUnavailableException;\r\nimport javax.sound.sampled.UnsupportedAudioFileException;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.Timer;\r\n\r\npublic class GamePanel extends JPanel implements KeyListener {\r\n\tprivate static final long serialVersionUID = -1036125108881682872L;\r\n\tprivate List&lt;Asteroid&gt; asteroids;\r\n\tprivate List&lt;Projectile&gt; projectiles;\r\n\tprivate RocketShip rocketShip;\r\n\tprivate Timer timer;\r\n\r\n\tprivate int end; // 0 - the game is still in progress\r\n\t\t\t\t\t\t// 1 - the game has ended\r\n\r\n\tpublic GamePanel() {\r\n\t\tsetBackground(Color.BLACK);\r\n\r\n\t\tasteroids = new ArrayList&lt;&gt;();\r\n\t\tprojectiles = new ArrayList&lt;&gt;();\r\n\t\trocketShip = new RocketShip(Globals.WINDOW_WIDTH / 2, Globals.SHIP_HEIGHT);\r\n\r\n\t\tthis.end = 0;\r\n\r\n\t\taddKeyListener(this);\r\n\t\tsetFocusable(true);\r\n\r\n\t\ttimer = new Timer(10, new ActionListener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\tupdateGameState(&quot;&quot;);\r\n\t\t\t\trepaint();\r\n\t\t\t}\r\n\t\t});\r\n\t\ttimer.start();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\trocketShip.paintComponent(g);\r\n\t\tfor (Asteroid asteroid : asteroids) {\r\n\t\t\tasteroid.paintComponent(g);\r\n\t\t}\r\n\t\tfor (Projectile projectile : projectiles) {\r\n\t\t\tprojectile.paintComponent(g);\r\n\t\t}\r\n\t\t// start and end screen, also score\r\n\t}\r\n\r\n\tpublic void updateGameState(String direction) {\r\n\t\trocketShip.move(direction);\r\n\t\trocketShip.move(direction);\r\n\t\twhile (asteroids.size() &lt; Globals.NUM_OF_ASTEROIDS) {\r\n\t\t\tasteroids.add(new Asteroid());\r\n\t\t\t//System.out.println(&quot;asteroid added\\n&quot;);\r\n\t\t}\r\n\r\n\t\tfor (int i = 0; i &lt; asteroids.size(); i++) {\r\n\t\t\tAsteroid asteroid = asteroids.get(i);\r\n\t\t\tasteroid.move();\r\n\t\t\tif (asteroid.isOutOfBounds()) {\r\n\t\t\t\tasteroids.remove(i);\r\n\t\t\t\tasteroids.add(new Asteroid());\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (Projectile projectile : projectiles) {\r\n\t\t\tprojectile.move();\r\n\t\t\t// projectile is out of bounds\r\n\t\t\tif (projectile.getX() - (projectile.getHeight() / 2) &gt; Globals.WINDOW_HEIGHT) {\r\n\t\t\t\tprojectiles.remove(projectile);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// check for collisions\r\n\t\t// asteoids with projectiles\r\n\t\tfor (Asteroid asteroid : asteroids) {\r\n\t\t\tfor (Projectile projectile : projectiles) {\r\n\t\t\t\tif (projectile.getX() + projectile.getWidth() &gt; asteroid.getX()\r\n\t\t\t\t\t\t&amp;&amp; projectile.getX() &lt; asteroid.getX() + asteroid.getWidth()\r\n\t\t\t\t\t\t&amp;&amp; projectile.getY() + projectile.getHeight() &gt; asteroid.getY()\r\n\t\t\t\t\t\t&amp;&amp; projectile.getY() &lt; asteroid.getY() + asteroid.getHeight()) {\r\n\t\t\t\t\tplayAsteroidDestroyedSound();\r\n\t\t\t\t\tasteroids.remove(asteroid);\r\n\t\t\t\t\tprojectiles.remove(projectile);\r\n\t\t\t\t\t// add a new asteroid\r\n\t\t\t\t\tasteroids.add(new Asteroid());\r\n\t\t\t\t\t// score increase\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// asteroids with rocketship\r\n\t\tfor (Asteroid asteroid : asteroids) {\r\n\t\t\tif (rocketShip.getX() + rocketShip.getWidth() &gt; asteroid.getX()\r\n\t\t\t\t\t&amp;&amp; rocketShip.getX() &lt; asteroid.getX() + asteroid.getWidth()\r\n\t\t\t\t\t&amp;&amp; rocketShip.getY() + rocketShip.getHeight() &gt; asteroid.getY()\r\n\t\t\t\t\t&amp;&amp; rocketShip.getY() &lt; asteroid.getY() + asteroid.getHeight()) {\r\n\t\t\t\t// rocketShip and asteroid have collided\r\n\t\t\t\tasteroids.remove(asteroid);\r\n\t\t\t\t// game over logic\r\n\t\t\t\tthis.end = 1;\r\n\t\t\t\ttimer.stop();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic void playShootingSound() {\r\n\t\ttry {\r\n\t\t\tAudioInputStream in = AudioSystem.getAudioInputStream(new File(&quot;audio/shooting.wav&quot;));\r\n\t\t\tClip clip = AudioSystem.getClip();\r\n\t\t\tclip.open(in);\r\n\t\t\tclip.start();\r\n\t\t} catch (UnsupportedAudioFileException | LineUnavailableException | IOException e) {\r\n\t\t\tSystem.out.println(&quot;ERROR: playShootingSound&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void playAsteroidDestroyedSound() {\r\n\t\ttry {\r\n\t\t\tAudioInputStream in = AudioSystem.getAudioInputStream(new File(&quot;audio/asterDestroid.wav&quot;));\r\n\t\t\tClip clip = AudioSystem.getClip();\r\n\t\t\tclip.open(in);\r\n\t\t\tclip.start();\r\n\t\t} catch (UnsupportedAudioFileException | LineUnavailableException | IOException e) {\r\n\t\t\tSystem.out.println(&quot;ERROR: playAsterDestroSound&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void keyTyped(KeyEvent e) {\r\n\t\tif (e.getKeyChar() == &#39; &#39;) {\r\n\t\t\tplayShootingSound();\r\n\t\t\tProjectile projectile = new Projectile(rocketShip.getX() + rocketShip.getWidth() / 2, rocketShip.getY());\r\n\t\t\tprojectiles.add(projectile);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void keyPressed(KeyEvent e) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tint keyCode = e.getKeyCode();\r\n\r\n\t\tif (keyCode == KeyEvent.VK_RIGHT) {\r\n\t\t\tupdateGameState(&quot;right&quot;);\r\n\t\t}\r\n\t\tif (keyCode == KeyEvent.VK_LEFT) {\r\n\t\t\tupdateGameState(&quot;left&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void keyReleased(KeyEvent e) {\r\n\t}\r\n\r\n}\r\n```","title":"Space Invaders generate initial Asteroids Java Failure","body":"<p>Changing the asteroid checking <code>for</code> loop, to a default <code>for(int i = 0; i &lt; asteroids.size(); i++)</code> has fixed it.</p>\n<p>I have also moved the generation of new asteroids into the <code>updateGameState</code> method.</p>\n<pre><code>import java.awt.Color;\nimport java.io.*;\nimport java.awt.Graphics;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.KeyEvent;\nimport java.awt.event.KeyListener;\nimport java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\n\nimport javax.sound.sampled.AudioInputStream;\nimport javax.sound.sampled.AudioSystem;\nimport javax.sound.sampled.Clip;\nimport javax.sound.sampled.LineUnavailableException;\nimport javax.sound.sampled.UnsupportedAudioFileException;\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\n\npublic class GamePanel extends JPanel implements KeyListener {\n    private static final long serialVersionUID = -1036125108881682872L;\n    private List&lt;Asteroid&gt; asteroids;\n    private List&lt;Projectile&gt; projectiles;\n    private RocketShip rocketShip;\n    private Timer timer;\n\n    private int end; // 0 - the game is still in progress\n                        // 1 - the game has ended\n\n    public GamePanel() {\n        setBackground(Color.BLACK);\n\n        asteroids = new ArrayList&lt;&gt;();\n        projectiles = new ArrayList&lt;&gt;();\n        rocketShip = new RocketShip(Globals.WINDOW_WIDTH / 2, Globals.SHIP_HEIGHT);\n\n        this.end = 0;\n\n        addKeyListener(this);\n        setFocusable(true);\n\n        timer = new Timer(10, new ActionListener() {\n\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                updateGameState(&quot;&quot;);\n                repaint();\n            }\n        });\n        timer.start();\n    }\n\n    @Override\n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        rocketShip.paintComponent(g);\n        for (Asteroid asteroid : asteroids) {\n            asteroid.paintComponent(g);\n        }\n        for (Projectile projectile : projectiles) {\n            projectile.paintComponent(g);\n        }\n        // start and end screen, also score\n    }\n\n    public void updateGameState(String direction) {\n        rocketShip.move(direction);\n        rocketShip.move(direction);\n        while (asteroids.size() &lt; Globals.NUM_OF_ASTEROIDS) {\n            asteroids.add(new Asteroid());\n            //System.out.println(&quot;asteroid added\\n&quot;);\n        }\n\n        for (int i = 0; i &lt; asteroids.size(); i++) {\n            Asteroid asteroid = asteroids.get(i);\n            asteroid.move();\n            if (asteroid.isOutOfBounds()) {\n                asteroids.remove(i);\n                asteroids.add(new Asteroid());\n                i--;\n            }\n        }\n\n        for (Projectile projectile : projectiles) {\n            projectile.move();\n            // projectile is out of bounds\n            if (projectile.getX() - (projectile.getHeight() / 2) &gt; Globals.WINDOW_HEIGHT) {\n                projectiles.remove(projectile);\n            }\n        }\n        // check for collisions\n        // asteoids with projectiles\n        for (Asteroid asteroid : asteroids) {\n            for (Projectile projectile : projectiles) {\n                if (projectile.getX() + projectile.getWidth() &gt; asteroid.getX()\n                        &amp;&amp; projectile.getX() &lt; asteroid.getX() + asteroid.getWidth()\n                        &amp;&amp; projectile.getY() + projectile.getHeight() &gt; asteroid.getY()\n                        &amp;&amp; projectile.getY() &lt; asteroid.getY() + asteroid.getHeight()) {\n                    playAsteroidDestroyedSound();\n                    asteroids.remove(asteroid);\n                    projectiles.remove(projectile);\n                    // add a new asteroid\n                    asteroids.add(new Asteroid());\n                    // score increase\n                }\n            }\n        }\n\n        // asteroids with rocketship\n        for (Asteroid asteroid : asteroids) {\n            if (rocketShip.getX() + rocketShip.getWidth() &gt; asteroid.getX()\n                    &amp;&amp; rocketShip.getX() &lt; asteroid.getX() + asteroid.getWidth()\n                    &amp;&amp; rocketShip.getY() + rocketShip.getHeight() &gt; asteroid.getY()\n                    &amp;&amp; rocketShip.getY() &lt; asteroid.getY() + asteroid.getHeight()) {\n                // rocketShip and asteroid have collided\n                asteroids.remove(asteroid);\n                // game over logic\n                this.end = 1;\n                timer.stop();\n            }\n        }\n\n    }\n\n    public void playShootingSound() {\n        try {\n            AudioInputStream in = AudioSystem.getAudioInputStream(new File(&quot;audio/shooting.wav&quot;));\n            Clip clip = AudioSystem.getClip();\n            clip.open(in);\n            clip.start();\n        } catch (UnsupportedAudioFileException | LineUnavailableException | IOException e) {\n            System.out.println(&quot;ERROR: playShootingSound&quot;);\n        }\n    }\n\n    public void playAsteroidDestroyedSound() {\n        try {\n            AudioInputStream in = AudioSystem.getAudioInputStream(new File(&quot;audio/asterDestroid.wav&quot;));\n            Clip clip = AudioSystem.getClip();\n            clip.open(in);\n            clip.start();\n        } catch (UnsupportedAudioFileException | LineUnavailableException | IOException e) {\n            System.out.println(&quot;ERROR: playAsterDestroSound&quot;);\n        }\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e) {\n        if (e.getKeyChar() == ' ') {\n            playShootingSound();\n            Projectile projectile = new Projectile(rocketShip.getX() + rocketShip.getWidth() / 2, rocketShip.getY());\n            projectiles.add(projectile);\n        }\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e) {\n        // TODO Auto-generated method stub\n        int keyCode = e.getKeyCode();\n\n        if (keyCode == KeyEvent.VK_RIGHT) {\n            updateGameState(&quot;right&quot;);\n        }\n        if (keyCode == KeyEvent.VK_LEFT) {\n            updateGameState(&quot;left&quot;);\n        }\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e) {\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":22995104,"reputation":9,"user_id":17120013,"display_name":"kiwY12"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74994355,"answer_count":2,"score":-1,"last_activity_date":1672754214,"creation_date":1672748885,"question_id":74993371,"body_markdown":"I have written a Space Invaders-like game, which has a rocketShip and some Asteroid objects falling, and the objective of the game is to survive and shoot as many Asteroids as possible.\r\n\r\nI am having some trouble generating the Asteroids when the game starts.\r\nMy thought process was, that in the `GamePanel` constructor, before starting an `ActionListener` `Timer`, I generate a fixed `Globals.NUM_OF_ASTEROIDS` number of Asteroids, and whenever one gets destroyed in the `updateGameState` method, a new one gets added to the `ArrayList` of `asteroids`.\r\n\r\nI have tried a simple `for` loop to generate all asteroids, and then starting a timer. I have also tried generating the asteroids in the `timer` itself. Both solutions produce a bunch of errors:\r\n\r\n```\r\nException in thread &quot;AWT-EventQueue-0&quot; java.util.ConcurrentModificationException\r\n\tat java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)\r\n\tat java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)\r\n\tat GamePanel.updateGameState(GamePanel.java:65)\r\n\tat GamePanel$1.actionPerformed(GamePanel.java:42)\r\n\tat java.desktop/javax.swing.Timer.fireActionPerformed(Timer.java:311)\r\n\tat java.desktop/javax.swing.Timer$DoPostEvent.run(Timer.java:243)\r\n\tat java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n\r\n```\r\n\r\nI am also going to attach the source code to my `GamePanel` class. Please note, that this still is an unfinished project.\r\n**I have boxed in the troubling section, which can be found in the constructor.**\r\n\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Graphics;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.event.KeyEvent;\r\nimport java.awt.event.KeyListener;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport javax.swing.JPanel;\r\nimport javax.swing.Timer;\r\n\r\npublic class GamePanel extends JPanel implements KeyListener {\r\n\tprivate static final long serialVersionUID = -1036125108881682872L;\r\n\tprivate List&lt;Asteroid&gt; asteroids;\r\n\tprivate List&lt;Projectile&gt; projectiles;\r\n\tprivate RocketShip rocketShip;\r\n\tprivate Timer timer;\r\n\r\n\tprivate int end;\t//0 - the game is still in progress\r\n\t\t\t\t\t\t//1\t- the game has ended\r\n\t\r\n\tpublic GamePanel() {\r\n\t\tsetBackground(Color.BLACK);\r\n\t\tasteroids = new ArrayList&lt;&gt;();\r\n\t\tprojectiles = new ArrayList&lt;&gt;();\r\n\t\trocketShip = new RocketShip(Globals.WINDOW_WIDTH / 2, Globals.SHIP_HEIGHT);\r\n\r\n\t\tthis.end = 0;\r\n\t\t\r\n\t\taddKeyListener(this);\r\n\t\tsetFocusable(true);\r\n\t\t\r\n\t\t/////////////////////////////////////////////////////////\r\n\t\t//this loop is causing the errors.\t\t\t\t\t/////\r\n\t\tfor(int i = 0; i &lt; Globals.NUM_OF_ASTEROIDS; i++) {\t/////\r\n\t\t\tasteroids.add(new Asteroid());\t\t\t\t\t/////\r\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t/////\r\n\t\t/////////////////////////////////////////////////////////\r\n\t\t\r\n\t\ttimer = new Timer(10, new ActionListener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\tupdateGameState(&quot;&quot;);\r\n\t\t\t\trepaint();\r\n\t\t\t}\r\n\t\t});\r\n\t\ttimer.start();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\trocketShip.paintComponent(g);\r\n\t\tfor (Asteroid asteroid : asteroids) {\r\n\t\t\tasteroid.paintComponent(g);\r\n\t\t}\r\n\t\tfor (Projectile projectile : projectiles) {\r\n\t\t\tprojectile.paintComponent(g);\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\t\r\n\tpublic void updateGameState(String direction) {\r\n\t\trocketShip.move(direction);\r\n\t\tfor (Asteroid asteroid : asteroids) {\r\n\t\t\tasteroid.move();\r\n\t\t\tif (asteroid.isOutOfBounds()) {\r\n\t\t\t\tasteroids.remove(asteroid);\r\n\t\t\t\tasteroids.add(new Asteroid());\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (Projectile projectile : projectiles) {\r\n\t\t\tprojectile.move();\r\n\t\t\t// projectile is out of bounds\r\n\t\t\tif (projectile.getX() - (projectile.getHeight() / 2) &gt; Globals.WINDOW_HEIGHT) {\r\n\t\t\t\tprojectiles.remove(projectile);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// check for collisions\r\n\t\t//asteoids with projectiles\r\n\t\tfor (Asteroid asteroid : asteroids) {\r\n\t\t\tfor (Projectile projectile : projectiles) {\r\n\t\t\t\tif (projectile.getX() + projectile.getWidth() &gt; asteroid.getX()\r\n\t\t\t\t\t\t&amp;&amp; projectile.getX() &lt; asteroid.getX() + asteroid.getWidth()\r\n\t\t\t\t\t\t&amp;&amp; projectile.getY() + projectile.getHeight() &gt; asteroid.getY()\r\n\t\t\t\t\t\t&amp;&amp; projectile.getY() &lt; asteroid.getY() + asteroid.getHeight()) {\r\n\t\t\t\t\tasteroids.remove(asteroid);\r\n\t\t\t\t\tprojectiles.remove(projectile);\r\n\t\t\t\t\t//add a new asteroid\r\n\t\t\t\t\tasteroids.add(new Asteroid());\r\n\t\t\t\t\t//score increase\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// asteroids with rocketship\r\n\t\tfor (Asteroid asteroid : asteroids) {\r\n\t\t\tif (rocketShip.getX() + rocketShip.getWidth() &gt; asteroid.getX()\r\n\t\t\t\t\t&amp;&amp; rocketShip.getX() &lt; asteroid.getX() + asteroid.getWidth()\r\n\t\t\t\t\t&amp;&amp; rocketShip.getY() + rocketShip.getHeight() &gt; asteroid.getY()\r\n\t\t\t\t\t&amp;&amp; rocketShip.getY() &lt; asteroid.getY() + asteroid.getHeight()) {\r\n\t\t\t\t// rocketShip and asteroid have collided\r\n\t\t\t\tasteroids.remove(asteroid);\r\n\t\t\t\t// game over logic\r\n\t\t\t\tthis.end = 1;\r\n\t\t\t\ttimer.stop();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void keyTyped(KeyEvent e) {\r\n\t\tif (e.getKeyChar() == &#39; &#39;) {\r\n\t\t\tProjectile projectile = new Projectile(rocketShip.getX() + rocketShip.getWidth() / 2, rocketShip.getY());\r\n\t\t\tprojectiles.add(projectile);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void keyPressed(KeyEvent e) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tint keyCode = e.getKeyCode();\r\n\t\t\r\n\t\tif(keyCode == KeyEvent.VK_RIGHT) {\r\n\t\t\tupdateGameState(&quot;right&quot;);\r\n\t\t}\r\n\t\tif(keyCode == KeyEvent.VK_LEFT) {\r\n\t\t\tupdateGameState(&quot;left&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void keyReleased(KeyEvent e) {\r\n\t}\r\n\r\n}\r\n\r\n```\r\nedit: If I remove the said section, the game will run without a problem, the moving and shooting mechanism is working correctly, but there are no asteroids spawned.\r\n\r\nAny help is vastly appreciated! Thank you for spending your time and reading my query. &lt;3\r\n","title":"Space Invaders generate initial Asteroids Java Failure","body":"<p>I have written a Space Invaders-like game, which has a rocketShip and some Asteroid objects falling, and the objective of the game is to survive and shoot as many Asteroids as possible.</p>\n<p>I am having some trouble generating the Asteroids when the game starts.\nMy thought process was, that in the <code>GamePanel</code> constructor, before starting an <code>ActionListener</code> <code>Timer</code>, I generate a fixed <code>Globals.NUM_OF_ASTEROIDS</code> number of Asteroids, and whenever one gets destroyed in the <code>updateGameState</code> method, a new one gets added to the <code>ArrayList</code> of <code>asteroids</code>.</p>\n<p>I have tried a simple <code>for</code> loop to generate all asteroids, and then starting a timer. I have also tried generating the asteroids in the <code>timer</code> itself. Both solutions produce a bunch of errors:</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.util.ConcurrentModificationException\n    at java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)\n    at java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)\n    at GamePanel.updateGameState(GamePanel.java:65)\n    at GamePanel$1.actionPerformed(GamePanel.java:42)\n    at java.desktop/javax.swing.Timer.fireActionPerformed(Timer.java:311)\n    at java.desktop/javax.swing.Timer$DoPostEvent.run(Timer.java:243)\n    at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n\n</code></pre>\n<p>I am also going to attach the source code to my <code>GamePanel</code> class. Please note, that this still is an unfinished project.\n<strong>I have boxed in the troubling section, which can be found in the constructor.</strong></p>\n<pre><code>import java.awt.Color;\nimport java.awt.Graphics;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.KeyEvent;\nimport java.awt.event.KeyListener;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\n\npublic class GamePanel extends JPanel implements KeyListener {\n    private static final long serialVersionUID = -1036125108881682872L;\n    private List&lt;Asteroid&gt; asteroids;\n    private List&lt;Projectile&gt; projectiles;\n    private RocketShip rocketShip;\n    private Timer timer;\n\n    private int end;    //0 - the game is still in progress\n                        //1 - the game has ended\n    \n    public GamePanel() {\n        setBackground(Color.BLACK);\n        asteroids = new ArrayList&lt;&gt;();\n        projectiles = new ArrayList&lt;&gt;();\n        rocketShip = new RocketShip(Globals.WINDOW_WIDTH / 2, Globals.SHIP_HEIGHT);\n\n        this.end = 0;\n        \n        addKeyListener(this);\n        setFocusable(true);\n        \n        /////////////////////////////////////////////////////////\n        //this loop is causing the errors.                  /////\n        for(int i = 0; i &lt; Globals.NUM_OF_ASTEROIDS; i++) { /////\n            asteroids.add(new Asteroid());                  /////\n        }                                                   /////\n        /////////////////////////////////////////////////////////\n        \n        timer = new Timer(10, new ActionListener() {\n\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                updateGameState(&quot;&quot;);\n                repaint();\n            }\n        });\n        timer.start();\n    }\n\n    @Override\n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        rocketShip.paintComponent(g);\n        for (Asteroid asteroid : asteroids) {\n            asteroid.paintComponent(g);\n        }\n        for (Projectile projectile : projectiles) {\n            projectile.paintComponent(g);\n        }\n    }\n\n    \n    \n    public void updateGameState(String direction) {\n        rocketShip.move(direction);\n        for (Asteroid asteroid : asteroids) {\n            asteroid.move();\n            if (asteroid.isOutOfBounds()) {\n                asteroids.remove(asteroid);\n                asteroids.add(new Asteroid());\n            }\n        }\n        for (Projectile projectile : projectiles) {\n            projectile.move();\n            // projectile is out of bounds\n            if (projectile.getX() - (projectile.getHeight() / 2) &gt; Globals.WINDOW_HEIGHT) {\n                projectiles.remove(projectile);\n            }\n        }\n        // check for collisions\n        //asteoids with projectiles\n        for (Asteroid asteroid : asteroids) {\n            for (Projectile projectile : projectiles) {\n                if (projectile.getX() + projectile.getWidth() &gt; asteroid.getX()\n                        &amp;&amp; projectile.getX() &lt; asteroid.getX() + asteroid.getWidth()\n                        &amp;&amp; projectile.getY() + projectile.getHeight() &gt; asteroid.getY()\n                        &amp;&amp; projectile.getY() &lt; asteroid.getY() + asteroid.getHeight()) {\n                    asteroids.remove(asteroid);\n                    projectiles.remove(projectile);\n                    //add a new asteroid\n                    asteroids.add(new Asteroid());\n                    //score increase\n                }\n            }\n        }\n\n        // asteroids with rocketship\n        for (Asteroid asteroid : asteroids) {\n            if (rocketShip.getX() + rocketShip.getWidth() &gt; asteroid.getX()\n                    &amp;&amp; rocketShip.getX() &lt; asteroid.getX() + asteroid.getWidth()\n                    &amp;&amp; rocketShip.getY() + rocketShip.getHeight() &gt; asteroid.getY()\n                    &amp;&amp; rocketShip.getY() &lt; asteroid.getY() + asteroid.getHeight()) {\n                // rocketShip and asteroid have collided\n                asteroids.remove(asteroid);\n                // game over logic\n                this.end = 1;\n                timer.stop();\n            }\n        }\n\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e) {\n        if (e.getKeyChar() == ' ') {\n            Projectile projectile = new Projectile(rocketShip.getX() + rocketShip.getWidth() / 2, rocketShip.getY());\n            projectiles.add(projectile);\n        }\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e) {\n        // TODO Auto-generated method stub\n        int keyCode = e.getKeyCode();\n        \n        if(keyCode == KeyEvent.VK_RIGHT) {\n            updateGameState(&quot;right&quot;);\n        }\n        if(keyCode == KeyEvent.VK_LEFT) {\n            updateGameState(&quot;left&quot;);\n        }\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e) {\n    }\n\n}\n\n</code></pre>\n<p>edit: If I remove the said section, the game will run without a problem, the moving and shooting mechanism is working correctly, but there are no asteroids spawned.</p>\n<p>Any help is vastly appreciated! Thank you for spending your time and reading my query. &lt;3</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":4571130,"reputation":4198,"user_id":3710800,"accept_rate":100,"display_name":"Guillaume Barr&#233;"},"score":0,"creation_date":1462519287,"post_id":37066506,"comment_id":61678694,"body_markdown":"Possible duplicate of [How can I find all unused methods of my project in the Android Studio IDEA?](http://stackoverflow.com/questions/33674592/how-can-i-find-all-unused-methods-of-my-project-in-the-android-studio-idea)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/33674592/how-can-i-find-all-unused-methods-of-my-project-in-the-android-studio-idea\">How can I find all unused methods of my project in the Android Studio IDEA?</a>"},{"owner":{"account_id":1880927,"reputation":2243,"user_id":1701154,"accept_rate":0,"display_name":"bilal"},"score":0,"creation_date":1462519639,"post_id":37066506,"comment_id":61678878,"body_markdown":"@Nirekin My question is to &quot;Remove Unused classes and methods&quot; not &quot;find unused methods&quot;","body":"@Nirekin My question is to &quot;Remove Unused classes and methods&quot; not &quot;find unused methods&quot;"},{"owner":{"account_id":261539,"reputation":19938,"user_id":981715,"accept_rate":74,"display_name":"Eugen Martynov"},"score":0,"creation_date":1462522005,"post_id":37066506,"comment_id":61680134,"body_markdown":"I believe it is not automated. you have to do it by hands","body":"I believe it is not automated. you have to do it by hands"}],"answers":[{"tags":[],"owner":{"display_name":"user4918296"},"down_vote_count":6,"up_vote_count":14,"is_accepted":false,"score":8,"last_activity_date":1572921887,"creation_date":1462522003,"answer_id":37067344,"question_id":37066506,"body_markdown":"Android ships with ProGuard and can do what you want. If you are using Gradle as build system then you can add the following lines in your `build.gradle` file:\r\n\r\n    android {\r\n\r\n        // ... other configurations\r\n\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;)\r\n                signingConfig signingConfigs.release\r\n            }\r\n            debug {\r\n    \t\t    minifyEnabled true\r\n         \t\tproguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;),\r\n                    &#39;proguard-rules-debug.pro&#39;\r\n    \t    }\r\n        }\r\n    }\r\n\r\nYour `proguard-rules-debug.pro` file only needs to contain one line\r\n\r\n    -dontobfuscate\r\n\r\nWith this additions your release build will get shrunk and obfuscated, your debug build, however, will get only shrunk, i.e, unnecessary code is removed.\r\n Note, that ProGuard operates on the build and not the source code.\r\n\r\nThe [ProGuard FAQ][1] has some more information of what it can do.\r\n\r\n\r\n  [1]: http://proguard.sourceforge.net/FAQ.html#shrinking","title":"Remove all unused classes,methods from Android Studio project","body":"<p>Android ships with ProGuard and can do what you want. If you are using Gradle as build system then you can add the following lines in your <code>build.gradle</code> file:</p>\n\n<pre><code>android {\n\n    // ... other configurations\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt')\n            signingConfig signingConfigs.release\n        }\n        debug {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'),\n                'proguard-rules-debug.pro'\n        }\n    }\n}\n</code></pre>\n\n<p>Your <code>proguard-rules-debug.pro</code> file only needs to contain one line</p>\n\n<pre><code>-dontobfuscate\n</code></pre>\n\n<p>With this additions your release build will get shrunk and obfuscated, your debug build, however, will get only shrunk, i.e, unnecessary code is removed.\n Note, that ProGuard operates on the build and not the source code.</p>\n\n<p>The <a href=\"http://proguard.sourceforge.net/FAQ.html#shrinking\" rel=\"nofollow noreferrer\">ProGuard FAQ</a> has some more information of what it can do.</p>\n"},{"tags":[],"owner":{"account_id":3588643,"reputation":1615,"user_id":2995178,"display_name":"KursoR"},"down_vote_count":0,"up_vote_count":79,"is_accepted":false,"score":79,"last_activity_date":1672754040,"creation_date":1524378847,"answer_id":49963225,"question_id":37066506,"body_markdown":"This can be achieved by using the built-in inspection `Java | Declaration redundancy | Unused declaration`.\r\n\r\nTo run it on whole project go to `Code -&gt; Analyze -&gt; Run inspection by name...`, type `Unused declaration` and select desired scope.\r\nThen carefully check output and mark some classes as entry points if needed.\r\n\r\nNow you can select `Unused declaration` node in list and perform `Safe delete` action on all unused declarations at once.\r\n\r\n[![Inspection result][1]][1]\r\n\r\nFor Kotlin there is similar inspection `Kotlin | Redundant constructs | Unused symbol`.\r\n\r\n  [1]: https://i.stack.imgur.com/bpyEa.png","title":"Remove all unused classes,methods from Android Studio project","body":"<p>This can be achieved by using the built-in inspection <code>Java | Declaration redundancy | Unused declaration</code>.</p>\n<p>To run it on whole project go to <code>Code -&gt; Analyze -&gt; Run inspection by name...</code>, type <code>Unused declaration</code> and select desired scope.\nThen carefully check output and mark some classes as entry points if needed.</p>\n<p>Now you can select <code>Unused declaration</code> node in list and perform <code>Safe delete</code> action on all unused declarations at once.</p>\n<p><a href=\"https://i.stack.imgur.com/bpyEa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bpyEa.png\" alt=\"Inspection result\" /></a></p>\n<p>For Kotlin there is similar inspection <code>Kotlin | Redundant constructs | Unused symbol</code>.</p>\n"},{"tags":[],"owner":{"account_id":259035,"reputation":12666,"user_id":541624,"accept_rate":64,"display_name":"ericn"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1636638094,"creation_date":1608067344,"answer_id":65313898,"question_id":37066506,"body_markdown":"Step 1\r\n\r\nGenerate usage.txt and mapping.txt with Proguard or R8\r\n\r\n - Add `-printusage` to your proguard.pro file Run\r\n\r\n - `./gradlew app:minifyReleaseWithProguard` or `./gradlew app:minifyReleaseWithR8`\r\n\r\nStep 2\r\n\r\nFind class name records that is in usage.txt but **not** in mapping.txt, those are the unused classes that are removed by Proguard/ R8\r\nIt&#39;s not hard to write such algorithm but you can consider using HashTable or Binary Tree.\r\n\r\nI&#39;ve elaborated more [here][1]\r\n\r\n\r\n  [1]: https://ericntd.medium.com/find-unused-classes-in-android-codebase-c3c9fc686f4b","title":"Remove all unused classes,methods from Android Studio project","body":"<p>Step 1</p>\n<p>Generate usage.txt and mapping.txt with Proguard or R8</p>\n<ul>\n<li><p>Add <code>-printusage</code> to your proguard.pro file Run</p>\n</li>\n<li><p><code>./gradlew app:minifyReleaseWithProguard</code> or <code>./gradlew app:minifyReleaseWithR8</code></p>\n</li>\n</ul>\n<p>Step 2</p>\n<p>Find class name records that is in usage.txt but <strong>not</strong> in mapping.txt, those are the unused classes that are removed by Proguard/ R8\nIt's not hard to write such algorithm but you can consider using HashTable or Binary Tree.</p>\n<p>I've elaborated more <a href=\"https://ericntd.medium.com/find-unused-classes-in-android-codebase-c3c9fc686f4b\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":1880927,"reputation":2243,"user_id":1701154,"accept_rate":0,"display_name":"bilal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47096,"favorite_count":0,"down_vote_count":1,"up_vote_count":61,"answer_count":3,"score":60,"last_activity_date":1672754040,"creation_date":1462519031,"question_id":37066506,"body_markdown":"I have used the lint(**Analyze-&gt;Inspect** Code...) and find out unused methods and resources. All the unused resources removed by **Refractor-&gt;Remove unused Resources** but not found any option like this to remove java classes and methods. \r\nIs there any feature in the android studio or any Plugin which can remove all the java classes, the methods which are not used in code to save manual refracting?","title":"Remove all unused classes,methods from Android Studio project","body":"<p>I have used the lint(<strong>Analyze->Inspect</strong> Code...) and find out unused methods and resources. All the unused resources removed by <strong>Refractor->Remove unused Resources</strong> but not found any option like this to remove java classes and methods. \nIs there any feature in the android studio or any Plugin which can remove all the java classes, the methods which are not used in code to save manual refracting?</p>\n"},{"tags":["java","rest","spring-mvc","resttemplate"],"comments":[{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":2,"creation_date":1672753057,"post_id":74994057,"comment_id":132341962,"body_markdown":"Provide the code that&#39;s giving you an exception rather than just stating it... `401 Unauthorized` occurs when you have something wrong with the security token or  authorization header","body":"Provide the code that&#39;s giving you an exception rather than just stating it... <code>401 Unauthorized</code> occurs when you have something wrong with the security token or  authorization header"},{"owner":{"account_id":14615721,"reputation":26,"user_id":10555874,"display_name":"Majid Khakwani"},"score":0,"creation_date":1672753652,"post_id":74994057,"comment_id":132342152,"body_markdown":"@Ryednap code sample updated","body":"@Ryednap code sample updated"},{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":0,"creation_date":1672755453,"post_id":74994057,"comment_id":132342750,"body_markdown":"does the error occurs while creating a request at `/uploadPEFile` endpoint or does the error occurs during the execution of this statement `String response = restTemplate.postForObject(requestUrl, requestEntity, String.class);` Anyways it&#39;s hard to track `401 Unauthorized` like this. If the error occurs during `/uploadPeFile` then you should be having spring security declining authorization at this endpoint, and if the error occurs during the execution of `RestTemplate` this means that the post request requires auth header","body":"does the error occurs while creating a request at <code>&#47;uploadPEFile</code> endpoint or does the error occurs during the execution of this statement <code>String response = restTemplate.postForObject(requestUrl, requestEntity, String.class);</code> Anyways it&#39;s hard to track <code>401 Unauthorized</code> like this. If the error occurs during <code>&#47;uploadPeFile</code> then you should be having spring security declining authorization at this endpoint, and if the error occurs during the execution of <code>RestTemplate</code> this means that the post request requires auth header"},{"owner":{"account_id":14615721,"reputation":26,"user_id":10555874,"display_name":"Majid Khakwani"},"score":0,"creation_date":1672757803,"post_id":74994057,"comment_id":132343555,"body_markdown":"error occurs during the execution of this statement\nString response = restTemplate.postForObject(requestUrl, requestEntity, String.class);\n@Ryednap","body":"error occurs during the execution of this statement String response = restTemplate.postForObject(requestUrl, requestEntity, String.class); @Ryednap"},{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":0,"creation_date":1672758595,"post_id":74994057,"comment_id":132343833,"body_markdown":"Then the request `requestUrl` requires some authorization. It seems you need to provide auth header in the request of your `RestTemplate`. Kindly check and confirm first if you have access to the server handling the request at the `requestURl` endpoint.","body":"Then the request <code>requestUrl</code> requires some authorization. It seems you need to provide auth header in the request of your <code>RestTemplate</code>. Kindly check and confirm first if you have access to the server handling the request at the <code>requestURl</code> endpoint."},{"owner":{"account_id":14615721,"reputation":26,"user_id":10555874,"display_name":"Majid Khakwani"},"score":0,"creation_date":1672760123,"post_id":74994057,"comment_id":132344398,"body_markdown":"@Ryednap I have accessed this service from postman without authorization.","body":"@Ryednap I have accessed this service from postman without authorization."},{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":0,"creation_date":1672761964,"post_id":74994057,"comment_id":132345001,"body_markdown":"Can you check if there&#39;s any authorization on the `Authorization` tab of the postman? Look `401 Unauthorized` doesn&#39;t occur by any other means. It&#39;s not like `400` or `500` error.","body":"Can you check if there&#39;s any authorization on the <code>Authorization</code> tab of the postman? Look <code>401 Unauthorized</code> doesn&#39;t occur by any other means. It&#39;s not like <code>400</code> or <code>500</code> error."},{"owner":{"account_id":14615721,"reputation":26,"user_id":10555874,"display_name":"Majid Khakwani"},"score":0,"creation_date":1672762247,"post_id":74994057,"comment_id":132345089,"body_markdown":"@Ryednap no there is no Authorization header or any authorization on the postman. I have checked. one more thing this endpoint I am accessing is written in PHP this might be the reason.","body":"@Ryednap no there is no Authorization header or any authorization on the postman. I have checked. one more thing this endpoint I am accessing is written in PHP this might be the reason."},{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":0,"creation_date":1672762814,"post_id":74994057,"comment_id":132345284,"body_markdown":"I don&#39;t know I am out of ideas now. Just looking at the information you have provided it&#39;s hard to know about the bug.","body":"I don&#39;t know I am out of ideas now. Just looking at the information you have provided it&#39;s hard to know about the bug."}],"owner":{"account_id":14615721,"reputation":26,"user_id":10555874,"display_name":"Majid Khakwani"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672754020,"creation_date":1672752737,"question_id":74994057,"body_markdown":"I need to upload a file through the spring MVC rest template for the below params shown in the image.\r\n[![Request Details][1]][1]\r\n\r\nI have tried different approaches but it&#39;s not working giving exception 401 Unauthorized.\r\nI need code that uploads files through spring MVC RestTemplate.\r\nI have shared my code below which is not working.I have tried different ways to attach file but they are not working please check my code.\r\n\r\n**My Code Sample:**\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    \t@RequestMapping(value = &quot;/uploadPEFile&quot;, method = { RequestMethod.POST}, \r\n    \t\t\t\tproduces = &quot;application/json&quot;)\r\n    \t\t@ResponseBody\r\n    \t\tpublic String uploadPEFile(@RequestParam(value = &quot;file&quot;, required = false) MultipartFile file,\r\n    \t\t\t\tHttpServletRequest request, HttpServletResponse httpResponse) {\r\n    \t\t\tJsonResponse objResponse = null;\r\n    \t\t\tString enterpriseId = &quot;&quot;;\r\n    \t\t\tString enterpriseName = &quot;&quot;;\r\n    \t\t\tString type = &quot;&quot;;\r\n    \t\t\tString productId = &quot;&quot;;\r\n    \t\t\tString userIds = &quot;&quot;;\r\n    \t\t\tString title = &quot;&quot;;\r\n    \t\t\tString description = &quot;&quot;;\r\n    \t\t\tString date = &quot;&quot;;\r\n    \t\t\tString externalUrl = &quot;&quot;;\r\n    \t\t\tString presenterName = &quot;&quot;;\r\n    \t\t\ttry {\r\n\r\n    \t\t\t\tenterpriseId = request.getParameter(&quot;enterpriseId&quot;);\r\n    \t\t\t\tenterpriseName = request.getParameter(&quot;enterpriseName&quot;);\r\n    \t\t\t\ttype = request.getParameter(&quot;type&quot;);\r\n    \t\t\t\tproductId = request.getParameter(&quot;productId&quot;);\r\n    \t\t\t\tuserIds = request.getParameter(&quot;userIds&quot;);\r\n    \t\t\t\ttitle = request.getParameter(&quot;title&quot;);\r\n    \t\t\t\tdescription = request.getParameter(&quot;description&quot;);\r\n    \t\t\t\tdate = request.getParameter(&quot;date&quot;);\r\n    \t\t\t\tif(date != null &amp;&amp; !date.isEmpty())\r\n    \t\t\t\t{\r\n    \t\t\t\t\tString [] dateArray = date.split(&quot; &quot;);\r\n    \t\t\t\t\tdate = dateArray[2]+&quot; &quot;+getMonth(dateArray[1])+&quot;, &quot;+dateArray[3];\r\n    \t\t\t\t}\r\n    \t\t\t\texternalUrl = request.getParameter(&quot;externalURL&quot;);\r\n    \t\t\t\tpresenterName = request.getParameter(&quot;presenterName&quot;);\r\n    \t\t\t\tJsonObject jsonBody = new JsonObject();\r\n    \t\t\t\tjsonBody.addProperty(&quot;title&quot;, title);\r\n    \t\t\t\tjsonBody.addProperty(&quot;description&quot;, description);\r\n    \t\t\t\tjsonBody.addProperty(&quot;date&quot;, date);\r\n    \t\t\t\tjsonBody.addProperty(&quot;external_url&quot;, externalUrl);\r\n    \t\t\t\tjsonBody.addProperty(&quot;presenter_name&quot;, presenterName);\r\n    \t\t\t\tString cmsDeviceId = PortalUtil.getPropertyValue(&quot;cms.device.id&quot;);\r\n    \t\t\t\r\n    \t\t\t\t\t\tif (file != null) {\r\n    \t\t\t\t\tfinal String filename = file.getOriginalFilename();\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tByteArrayResource fileAsResource = new ByteArrayResource(file.getBytes()) {\r\n    \t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\tpublic String getFilename() {\r\n    \t\t\t\t\t\t\treturn filename;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t};\r\n    \t\t\t\t\tString filePath = &quot;/persivia edge/&quot;+type+&quot;/&quot;+filename;\r\n    \t\t\t\t\tFile userFile = new File(System.getProperty(PortalConstants.cdnPath) + filePath);\r\n    \t\t\t\t\tif(!userFile.exists()) {\r\n    \t\t\t\t\t\tuserFile.mkdirs();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tfile.transferTo(userFile);\r\n    \t\t\t\t\tHttpHeaders headers = new HttpHeaders();\r\n    \t\t\t\t\theaders.setContentType(MediaType.MULTIPART_FORM_DATA);\r\n    \t\t\t\t\tMultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\r\n    \t\t\t\t\tbody.add(&quot;device_id&quot;,cmsDeviceId);\r\n    //\t\t\t\t\tbody.add(&quot;attachment&quot;,fileAsResource);\r\n    //\t\t\t\t\tbody.add(&quot;attachment&quot;,new MultipartInputStreamFileResource(file.getInputStream(), file.getOriginalFilename()));\r\n    \t\t\t\t\tbody.add(&quot;attachment&quot;,new FileSystemResource(filePath));\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tbody.add(&quot;source&quot;, &quot;web&quot;);\r\n    \t\t\t\t\tbody.add(&quot;filename&quot;, filename);\r\n    \t\t\t\t\tbody.add(&quot;enterprise_id&quot;, enterpriseId);\r\n    \t\t\t\t\tbody.add(&quot;enterpriseName&quot;, enterpriseName);\r\n    \t\t\t\t\tbody.add(&quot;type&quot;, type);\r\n    \t\t\t\t\tbody.add(&quot;product_id&quot;,productId);\r\n    \t\t\t\t\tbody.add(&quot;userIds&quot;,userIds);\r\n    \t\t\t\t\tbody.add(&quot;body&quot;, jsonBody.toString());\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tHttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\r\n    \t\t\t\t\tRestTemplate restTemplate = new RestTemplate();\r\n    \t\t\t\t\tString requestUrl = PortalUtil.getPropertyValue(&quot;cms.api.url&quot;)+&quot;wp-json/wp/v2/upload_content&quot;;\r\n    \t\t\t\t\tString response = restTemplate.postForObject(requestUrl, requestEntity, String.class);\r\n    \t\t\t\t\thttpResponse.setStatus(HttpServletResponse.SC_OK);\r\n    \t\t\t\t\tJsonObject data = new JsonObject();\r\n    \t\t\t\t\tobjResponse = JsonResponse.build(ResponseStatus.status200, ResponseStatus.message200,\r\n    \t\t\t\t\t\t\t&quot;Logo info updated successfully&quot;, data);\r\n    \t\t\t\t}\r\n\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t\tlogger.error(e.getMessage(), e.getCause());\r\n\r\n    \t\t\t\tobjResponse = JsonResponse.build(ResponseStatus.status500, ResponseStatus.message500,\r\n    \t\t\t\t\t\te.getMessage(), null);\r\n\r\n    \t\t\t\thttpResponse.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\r\n    \t\t\t}\r\n    \t\t\treturn new Gson().toJson(objResponse);\r\n    \t\t}\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Pqecq.png","title":"Java Upload file Rest Template","body":"<p>I need to upload a file through the spring MVC rest template for the below params shown in the image.\n<a href=\"https://i.stack.imgur.com/Pqecq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pqecq.png\" alt=\"Request Details\" /></a></p>\n<p>I have tried different approaches but it's not working giving exception 401 Unauthorized.\nI need code that uploads files through spring MVC RestTemplate.\nI have shared my code below which is not working.I have tried different ways to attach file but they are not working please check my code.</p>\n<p><strong>My Code Sample:</strong></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    @RequestMapping(value = \"/uploadPEFile\", method = { RequestMethod.POST}, \n                produces = \"application/json\")\n        @ResponseBody\n        public String uploadPEFile(@RequestParam(value = \"file\", required = false) MultipartFile file,\n                HttpServletRequest request, HttpServletResponse httpResponse) {\n            JsonResponse objResponse = null;\n            String enterpriseId = \"\";\n            String enterpriseName = \"\";\n            String type = \"\";\n            String productId = \"\";\n            String userIds = \"\";\n            String title = \"\";\n            String description = \"\";\n            String date = \"\";\n            String externalUrl = \"\";\n            String presenterName = \"\";\n            try {\n\n                enterpriseId = request.getParameter(\"enterpriseId\");\n                enterpriseName = request.getParameter(\"enterpriseName\");\n                type = request.getParameter(\"type\");\n                productId = request.getParameter(\"productId\");\n                userIds = request.getParameter(\"userIds\");\n                title = request.getParameter(\"title\");\n                description = request.getParameter(\"description\");\n                date = request.getParameter(\"date\");\n                if(date != null &amp;&amp; !date.isEmpty())\n                {\n                    String [] dateArray = date.split(\" \");\n                    date = dateArray[2]+\" \"+getMonth(dateArray[1])+\", \"+dateArray[3];\n                }\n                externalUrl = request.getParameter(\"externalURL\");\n                presenterName = request.getParameter(\"presenterName\");\n                JsonObject jsonBody = new JsonObject();\n                jsonBody.addProperty(\"title\", title);\n                jsonBody.addProperty(\"description\", description);\n                jsonBody.addProperty(\"date\", date);\n                jsonBody.addProperty(\"external_url\", externalUrl);\n                jsonBody.addProperty(\"presenter_name\", presenterName);\n                String cmsDeviceId = PortalUtil.getPropertyValue(\"cms.device.id\");\n            \n                        if (file != null) {\n                    final String filename = file.getOriginalFilename();\n                    \n                    ByteArrayResource fileAsResource = new ByteArrayResource(file.getBytes()) {\n                        @Override\n                        public String getFilename() {\n                            return filename;\n                        }\n                    };\n                    String filePath = \"/persivia edge/\"+type+\"/\"+filename;\n                    File userFile = new File(System.getProperty(PortalConstants.cdnPath) + filePath);\n                    if(!userFile.exists()) {\n                        userFile.mkdirs();\n                    }\n                    file.transferTo(userFile);\n                    HttpHeaders headers = new HttpHeaders();\n                    headers.setContentType(MediaType.MULTIPART_FORM_DATA);\n                    MultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\n                    body.add(\"device_id\",cmsDeviceId);\n//                  body.add(\"attachment\",fileAsResource);\n//                  body.add(\"attachment\",new MultipartInputStreamFileResource(file.getInputStream(), file.getOriginalFilename()));\n                    body.add(\"attachment\",new FileSystemResource(filePath));\n                    \n                    body.add(\"source\", \"web\");\n                    body.add(\"filename\", filename);\n                    body.add(\"enterprise_id\", enterpriseId);\n                    body.add(\"enterpriseName\", enterpriseName);\n                    body.add(\"type\", type);\n                    body.add(\"product_id\",productId);\n                    body.add(\"userIds\",userIds);\n                    body.add(\"body\", jsonBody.toString());\n                    \n                    HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\n                    RestTemplate restTemplate = new RestTemplate();\n                    String requestUrl = PortalUtil.getPropertyValue(\"cms.api.url\")+\"wp-json/wp/v2/upload_content\";\n                    String response = restTemplate.postForObject(requestUrl, requestEntity, String.class);\n                    httpResponse.setStatus(HttpServletResponse.SC_OK);\n                    JsonObject data = new JsonObject();\n                    objResponse = JsonResponse.build(ResponseStatus.status200, ResponseStatus.message200,\n                            \"Logo info updated successfully\", data);\n                }\n\n            } catch (Exception e) {\n                e.printStackTrace();\n                logger.error(e.getMessage(), e.getCause());\n\n                objResponse = JsonResponse.build(ResponseStatus.status500, ResponseStatus.message500,\n                        e.getMessage(), null);\n\n                httpResponse.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\n            }\n            return new Gson().toJson(objResponse);\n        }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","loops","for-loop","while-loop","do-while"],"comments":[{"owner":{"account_id":1083854,"reputation":13775,"user_id":1080064,"accept_rate":43,"display_name":"tkausl"},"score":0,"creation_date":1648083028,"post_id":71595781,"comment_id":126537262,"body_markdown":"Show your attempts.","body":"Show your attempts."},{"owner":{"account_id":3354520,"reputation":5062,"user_id":2817802,"accept_rate":100,"display_name":"Baby"},"score":0,"creation_date":1648083318,"post_id":71595781,"comment_id":126537320,"body_markdown":"in your while loop, just swap the number 10 and 1 and replace `i--` with `i++`","body":"in your while loop, just swap the number 10 and 1 and replace <code>i--</code> with <code>i++</code>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1648083324,"post_id":71595781,"comment_id":126537322,"body_markdown":"`while (i++ &lt; 20) System.out.println(i - 9);`","body":"<code>while (i++ &lt; 20) System.out.println(i - 9);</code>"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648084465,"creation_date":1648084139,"answer_id":71595892,"question_id":71595781,"body_markdown":"Assuming you must use `i` with an initial value of `10`.\r\n```\r\nfor(int i = 10; i &gt; 0; i--) {\r\n\tSystem.out.println(11-i);\r\n}\r\n\r\n// or using a while loop\r\nint i = 10;\r\nwhile(i &gt; 0) {\r\n    System.out.println(11-i--);\r\n}","title":"How to print number 1 to 10(in that sequence only)using loops(java) if int i = 10","body":"<p>Assuming you must use <code>i</code> with an initial value of <code>10</code>.</p>\n<pre><code>for(int i = 10; i &gt; 0; i--) {\n    System.out.println(11-i);\n}\n\n// or using a while loop\nint i = 10;\nwhile(i &gt; 0) {\n    System.out.println(11-i--);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27419893,"reputation":11,"user_id":20918521,"display_name":"Atul Kale"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672753543,"creation_date":1672743668,"answer_id":74992440,"question_id":71595781,"body_markdown":"With Java 8 you can do this in one line.\r\n\r\n`IntStream.range(1, 11).forEach(number -&gt; System.out.println(number));`","title":"How to print number 1 to 10(in that sequence only)using loops(java) if int i = 10","body":"<p>With Java 8 you can do this in one line.</p>\n<p><code>IntStream.range(1, 11).forEach(number -&gt; System.out.println(number));</code></p>\n"}],"owner":{"display_name":"user18562767"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1065,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"accepted_answer_id":71595892,"answer_count":2,"score":-3,"last_activity_date":1672753543,"creation_date":1648082970,"question_id":71595781,"body_markdown":"Output must be \r\n1 \r\n2\r\n3\r\n4\r\n5\r\n6\r\n7\r\n8\r\n9\r\n10\r\n\r\nI have tried \r\nWhile loop but it prints from 10 to 1","title":"How to print number 1 to 10(in that sequence only)using loops(java) if int i = 10","body":"<p>Output must be\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10</p>\n<p>I have tried\nWhile loop but it prints from 10 to 1</p>\n"},{"tags":["java","sql","postgresql","spring-boot","prepared-statement"],"owner":{"account_id":10942565,"reputation":1473,"user_id":8041854,"accept_rate":50,"display_name":"Gvtha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672753493,"creation_date":1672747477,"question_id":74993130,"body_markdown":"How to get the final batch SQL query from Spring boot SQL statement. I am connecting to PostgreSQL database with Java 8 and spring boot.\r\n\r\n```java\r\nString sqlQuery = &quot;insert into table1 (id, name) values (?, ?)&quot;;\r\n    \r\nPreparedStatement pstmt = connection.prepareStatement(sqlQuery);\r\npstmt.setInt(1, 1);\r\npstmt.setString(2, &quot;name1&quot;);\r\npstmt.addBatch();\r\n    \r\npstmt.setInt(1, 2);\r\npstmt.setString(2, &quot;name2&quot;);\r\npstmt.addBatch();\r\n    \r\npstmt.executeBatch();\r\n    \r\nSystem.out.println(pstmt);\r\n```\r\n\r\n**Output:**\r\n\r\n```sql\r\ninsert into table1 (id, name) values (2, name2)\r\n```\r\n\r\n**Expected Output:**\r\n\r\n```sql\r\ninsert into table1 (id, name) values (1, name1), (2, name2) \r\n```\r\nI am getting the last SQL query instead of the batch SQL query.","title":"Get final query from executeBatch()","body":"<p>How to get the final batch SQL query from Spring boot SQL statement. I am connecting to PostgreSQL database with Java 8 and spring boot.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String sqlQuery = &quot;insert into table1 (id, name) values (?, ?)&quot;;\n    \nPreparedStatement pstmt = connection.prepareStatement(sqlQuery);\npstmt.setInt(1, 1);\npstmt.setString(2, &quot;name1&quot;);\npstmt.addBatch();\n    \npstmt.setInt(1, 2);\npstmt.setString(2, &quot;name2&quot;);\npstmt.addBatch();\n    \npstmt.executeBatch();\n    \nSystem.out.println(pstmt);\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>insert into table1 (id, name) values (2, name2)\n</code></pre>\n<p><strong>Expected Output:</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>insert into table1 (id, name) values (1, name1), (2, name2) \n</code></pre>\n<p>I am getting the last SQL query instead of the batch SQL query.</p>\n"},{"tags":["java","file"],"answers":[{"tags":[],"owner":{"account_id":1233203,"reputation":4084,"user_id":1197359,"accept_rate":99,"display_name":"Stanley Mungai"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1409584193,"creation_date":1409583825,"answer_id":25608650,"question_id":25608614,"body_markdown":"You need to close or flush the Writer after writing;\r\n\r\ntry:\r\n\r\n       \r\n\r\n \r\n\r\n    System.out.println(&quot;Enter &#39;q&#39; for quit!!&quot;);\r\n            str=br.readLine();\r\n            FileWriter fw=new FileWriter(file,true);\r\n            bw=new BufferedWriter(fw);\r\n            bw.write(str);\r\n            bw.flush();//You are Missing this\r\n            System.out.println(str);\r\n**Edit: Ok I did flush as per suggestion.**\r\n\r\nBut you will still need to call `bw.close();` after you are done with the writer. Closing the Writer will automatically flush it.","title":"how to write input text in file using java","body":"<p>You need to close or flush the Writer after writing;</p>\n\n<p>try:</p>\n\n<pre><code>System.out.println(\"Enter 'q' for quit!!\");\n        str=br.readLine();\n        FileWriter fw=new FileWriter(file,true);\n        bw=new BufferedWriter(fw);\n        bw.write(str);\n        bw.flush();//You are Missing this\n        System.out.println(str);\n</code></pre>\n\n<p><strong>Edit: Ok I did flush as per suggestion.</strong></p>\n\n<p>But you will still need to call <code>bw.close();</code> after you are done with the writer. Closing the Writer will automatically flush it.</p>\n"},{"tags":[],"owner":{"account_id":505874,"reputation":8230,"user_id":1757964,"accept_rate":86,"display_name":"APerson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1409583852,"creation_date":1409583852,"answer_id":25608657,"question_id":25608614,"body_markdown":"It doesn&#39;t look like you&#39;re flushing your BufferedWriter, which may be an issue.\n\nYou also never close the BufferedWriter, which also helps since the BufferedWriter flushes itself during the close process.","title":"how to write input text in file using java","body":"<p>It doesn't look like you're flushing your BufferedWriter, which may be an issue.</p>\n\n<p>You also never close the BufferedWriter, which also helps since the BufferedWriter flushes itself during the close process.</p>\n"},{"tags":[],"owner":{"account_id":4539652,"reputation":163,"user_id":3687895,"display_name":"user3687895"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1409585601,"creation_date":1409585032,"answer_id":25608968,"question_id":25608614,"body_markdown":"You need to `flush()` and `close()` the `FileWriter` (closing it will also flush it).\r\n\r\nTry this :\r\n\r\n    do {\r\n    \tSystem.out.println(&quot;Enter &#39;q&#39; for quit!!&quot;);\r\n    \tstr=br.readLine();\r\n    \tFileWriter fw=new FileWriter(file,true);\r\n    \tbw=new BufferedWriter(fw);\r\n    \tbw.write(str);\r\n    \tbw.flush();    //do this , you missed it\r\n    \tSystem.out.println(str);\r\n    }\r\n    while(!(str.equalsIgnoreCase(&quot;q&quot;)));\r\n    \r\n    bw.close();     //do this , you missed it","title":"how to write input text in file using java","body":"<p>You need to <code>flush()</code> and <code>close()</code> the <code>FileWriter</code> (closing it will also flush it).</p>\n\n<p>Try this :</p>\n\n<pre><code>do {\n    System.out.println(\"Enter 'q' for quit!!\");\n    str=br.readLine();\n    FileWriter fw=new FileWriter(file,true);\n    bw=new BufferedWriter(fw);\n    bw.write(str);\n    bw.flush();    //do this , you missed it\n    System.out.println(str);\n}\nwhile(!(str.equalsIgnoreCase(\"q\")));\n\nbw.close();     //do this , you missed it\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2123179,"reputation":10922,"user_id":1886012,"display_name":"bowmore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1409639891,"creation_date":1409612163,"answer_id":25613760,"question_id":25608614,"body_markdown":"A `BufferedWriter` buffers the output in a character buffer, instead of immediately sending the characters to the underlying `Writer` (a `FileWriter` in this case). This is a good practice as it reduces the number of possibly costly writes. The characters are sent to the underlying Writer when the buffer is full, or when an explicit call to `flush()` is made.\r\n\r\nSecondly a `Writer` should always be closed, so that any used resources can be freed up again.  The `close()` operation will automatically flush any characters remaining in the buffer before closing. (note that for Writers that do not buffer the `flush()` method usually does nothing)\r\n\r\nThis is basically what goes wrong in your code : since you don&#39;t flush or close the `BufferedWriter`, and likely write fewer characters to the file than the buffer size, your output simply remains in the buffer.\r\n\r\nSome other things seem to be wrong in your code (that do not immediately cause the problem you report)\r\n\r\n - you create a new `FileWriter` for each string to write. Normally you&#39;d use only one `FileWriter` declared before the loop. Since you create the `Writer` in overwrite mode, each `String` will simply overwrite the previous.\r\n - if the file test1.txt does not exist, this code will throw a `FileNotFoundException` when trying to create the `FileWriter`.\r\n - You use the String &quot;q&quot; as a marker to stop adding to the file, yet you write &quot;q&quot; to the file prior to checking the termination condition. I guess that&#39;s not the intent.","title":"how to write input text in file using java","body":"<p>A <code>BufferedWriter</code> buffers the output in a character buffer, instead of immediately sending the characters to the underlying <code>Writer</code> (a <code>FileWriter</code> in this case). This is a good practice as it reduces the number of possibly costly writes. The characters are sent to the underlying Writer when the buffer is full, or when an explicit call to <code>flush()</code> is made.</p>\n\n<p>Secondly a <code>Writer</code> should always be closed, so that any used resources can be freed up again.  The <code>close()</code> operation will automatically flush any characters remaining in the buffer before closing. (note that for Writers that do not buffer the <code>flush()</code> method usually does nothing)</p>\n\n<p>This is basically what goes wrong in your code : since you don't flush or close the <code>BufferedWriter</code>, and likely write fewer characters to the file than the buffer size, your output simply remains in the buffer.</p>\n\n<p>Some other things seem to be wrong in your code (that do not immediately cause the problem you report)</p>\n\n<ul>\n<li>you create a new <code>FileWriter</code> for each string to write. Normally you'd use only one <code>FileWriter</code> declared before the loop. Since you create the <code>Writer</code> in overwrite mode, each <code>String</code> will simply overwrite the previous.</li>\n<li>if the file test1.txt does not exist, this code will throw a <code>FileNotFoundException</code> when trying to create the <code>FileWriter</code>.</li>\n<li>You use the String \"q\" as a marker to stop adding to the file, yet you write \"q\" to the file prior to checking the termination condition. I guess that's not the intent.</li>\n</ul>\n"}],"owner":{"account_id":2379550,"reputation":1785,"user_id":2081867,"accept_rate":83,"display_name":"mahbub_siddique"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":25608968,"answer_count":4,"score":1,"last_activity_date":1672753323,"creation_date":1409583701,"question_id":25608614,"body_markdown":"I am trying to write a code for getting input from the console &amp; the input text will be saved in a particular file. My code gets console input perfectly &amp; create a file as well, but the console input doesn&#39;t save to the file.\r\n\r\nHere is my code:\r\n\r\n```java\r\npackage com.mahbub.file_object;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.BufferedWriter;\r\nimport java.io.File;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.Reader;\r\nimport java.util.Scanner;\r\n\r\npublic class ConsoleInput {\r\n\r\n\tpublic static void main (String [] args) throws IOException{\r\n\t\tBufferedReader br=null;\r\n\t\tBufferedWriter bw=null;\r\n\t\t\r\n\t\tFile file=new File(&quot;D:/test1.txt&quot;);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tReader reader=new InputStreamReader(System.in);\r\n\t\tbr =new BufferedReader(reader);\r\n\t\tString str=null;\r\n\t\t\r\n\t\tdo{\r\n\t\t\tSystem.out.println(&quot;Enter &#39;q&#39; for quit!!&quot;);\r\n\t\t\tstr=br.readLine();\r\n\t\t\tFileWriter fw=new FileWriter(file,true);\r\n\t\t\tbw=new BufferedWriter(fw);\r\n\t\t\tbw.write(str);\r\n\t\t\tSystem.out.println(str);\r\n\t\t}while(!(str.equalsIgnoreCase(&quot;q&quot;)));\r\n\t\t\r\n\t}\r\n}\r\n```\r\n\r\nAnyone has any idea to solve this problem ?","title":"how to write input text in file using java","body":"<p>I am trying to write a code for getting input from the console &amp; the input text will be saved in a particular file. My code gets console input perfectly &amp; create a file as well, but the console input doesn't save to the file.</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.mahbub.file_object;\n\nimport java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.Reader;\nimport java.util.Scanner;\n\npublic class ConsoleInput {\n\n    public static void main (String [] args) throws IOException{\n        BufferedReader br=null;\n        BufferedWriter bw=null;\n        \n        File file=new File(&quot;D:/test1.txt&quot;);\n        \n        \n        \n        Reader reader=new InputStreamReader(System.in);\n        br =new BufferedReader(reader);\n        String str=null;\n        \n        do{\n            System.out.println(&quot;Enter 'q' for quit!!&quot;);\n            str=br.readLine();\n            FileWriter fw=new FileWriter(file,true);\n            bw=new BufferedWriter(fw);\n            bw.write(str);\n            System.out.println(str);\n        }while(!(str.equalsIgnoreCase(&quot;q&quot;)));\n        \n    }\n}\n</code></pre>\n<p>Anyone has any idea to solve this problem ?</p>\n"},{"tags":["java","mysql","spring","spring-boot","api"],"comments":[{"owner":{"account_id":15450914,"reputation":308,"user_id":11146314,"display_name":"Santi Wagner"},"score":0,"creation_date":1611174901,"post_id":65817073,"comment_id":116369857,"body_markdown":"The seemingly infinite json is due to the circular reference between Todos and User. Take a look at the accepted answer of this post: https://stackoverflow.com/questions/17393812/json-and-java-circular-reference","body":"The seemingly infinite json is due to the circular reference between Todos and User. Take a look at the accepted answer of this post: <a href=\"https://stackoverflow.com/questions/17393812/json-and-java-circular-reference\" title=\"json and java circular reference\">stackoverflow.com/questions/17393812/&hellip;</a>"},{"owner":{"account_id":15450914,"reputation":308,"user_id":11146314,"display_name":"Santi Wagner"},"score":0,"creation_date":1611175668,"post_id":65817073,"comment_id":116370170,"body_markdown":"Glad yo hear that! Take care","body":"Glad yo hear that! Take care"}],"answers":[{"tags":[],"owner":{"account_id":2075808,"reputation":2132,"user_id":1849188,"display_name":"Jcov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611179916,"creation_date":1611179916,"answer_id":65818289,"question_id":65817073,"body_markdown":"Essentially, when Spring forms the response, it is doing a &quot;.toString()&quot; like method to map the entity in to a JSON object to pass to the front end.\r\n\r\nYou have a `bidirectional` association between your entities, so when the mapper goes in to the `user` it maps all the `todos` and because those `todos` all have a relationship with the `user` it then gets the `user`...and again...and again and loop of overflow death.\r\n\r\nThe &quot;best&quot; way and is common is you should make a DTO class which you construct.\r\n\r\n`UserTodoDTO`:\r\n\r\n```java\r\n\r\n//Lombok Getter/Setter/ToString and All Args Constructor.\r\n@ToString\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\npublic class UserTodoDTO {\r\n\r\n    private long id;\r\n    @JsonProperty(&quot;name&quot;)\r\n    private String username;\r\n    private List&lt;TodoItem&gt; todoItems;\r\n\r\n}\r\n\r\n```\r\n\r\n```java\r\n\r\n//Pretend this is full of your &#39;users&#39;.\r\nList&lt;User&gt; usersFromDatabaseAsEntity = new ArrayList&lt;&gt;();\r\n\r\n//Return these and the serialisation will not occur.\r\nfinal List&lt;UserTodoDTO&gt; viewsOfUser = usersFromDatabaseAsEntity\r\n\t\t.stream()\r\n\t\t.map(entity -&gt; new UserTodoDTO(entity.getId(), entity.getName(), entity.getTodos()))\r\n\t\t.collect(Collectors.toList());\r\n\r\n```\r\n\r\nJust be aware, if you do `log.info(user)` it will do the same thing.\r\nThe way to avoid this (there are others) is to add a `@JsonIgnore` to one side of the relationship (like on the @ManyToOne-Users on the Todos) or override the toString() for the Todo.\r\n\r\nChanges to `TodoItem`\r\n```java\r\n\r\n    //Will not be mapped to JSON so stops the loop of death.\r\n    @JsonIgnore\r\n    //Lombok can make the toString() for you but need to\r\n    // tell it to ignore this field to stop loop of death.\r\n    @ToString.Exclude\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot;)\r\n    private User user;\r\n    \r\n    //If not using lombok and you are doing TodoItem.toString() somewhere...\r\n    //Remove the user from toString().\r\n    @Override\r\n    public String toString() {\r\n        return &quot;TodoItem{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, todo=&#39;&quot; + todo + &#39;\\&#39;&#39; +\r\n                &quot;, completed=&quot; + completed +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n```","title":"Spring Boot API response returns repeating nested JSON","body":"<p>Essentially, when Spring forms the response, it is doing a &quot;.toString()&quot; like method to map the entity in to a JSON object to pass to the front end.</p>\n<p>You have a <code>bidirectional</code> association between your entities, so when the mapper goes in to the <code>user</code> it maps all the <code>todos</code> and because those <code>todos</code> all have a relationship with the <code>user</code> it then gets the <code>user</code>...and again...and again and loop of overflow death.</p>\n<p>The &quot;best&quot; way and is common is you should make a DTO class which you construct.</p>\n<p><code>UserTodoDTO</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n//Lombok Getter/Setter/ToString and All Args Constructor.\n@ToString\n@Getter\n@Setter\n@AllArgsConstructor\npublic class UserTodoDTO {\n\n    private long id;\n    @JsonProperty(&quot;name&quot;)\n    private String username;\n    private List&lt;TodoItem&gt; todoItems;\n\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>\n//Pretend this is full of your 'users'.\nList&lt;User&gt; usersFromDatabaseAsEntity = new ArrayList&lt;&gt;();\n\n//Return these and the serialisation will not occur.\nfinal List&lt;UserTodoDTO&gt; viewsOfUser = usersFromDatabaseAsEntity\n        .stream()\n        .map(entity -&gt; new UserTodoDTO(entity.getId(), entity.getName(), entity.getTodos()))\n        .collect(Collectors.toList());\n\n</code></pre>\n<p>Just be aware, if you do <code>log.info(user)</code> it will do the same thing.\nThe way to avoid this (there are others) is to add a <code>@JsonIgnore</code> to one side of the relationship (like on the @ManyToOne-Users on the Todos) or override the toString() for the Todo.</p>\n<p>Changes to <code>TodoItem</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    //Will not be mapped to JSON so stops the loop of death.\n    @JsonIgnore\n    //Lombok can make the toString() for you but need to\n    // tell it to ignore this field to stop loop of death.\n    @ToString.Exclude\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;)\n    private User user;\n    \n    //If not using lombok and you are doing TodoItem.toString() somewhere...\n    //Remove the user from toString().\n    @Override\n    public String toString() {\n        return &quot;TodoItem{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, todo='&quot; + todo + '\\'' +\n                &quot;, completed=&quot; + completed +\n                '}';\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10100092,"reputation":166,"user_id":7464200,"display_name":"danyPasillas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1611183510,"creation_date":1611180412,"answer_id":65818385,"question_id":65817073,"body_markdown":"In your TodoItem.java, remove the getter for the User property.\r\n\r\nMake sure that you only have the setter for user property in your TodoItem.java.\r\n\r\n\r\n","title":"Spring Boot API response returns repeating nested JSON","body":"<p>In your TodoItem.java, remove the getter for the User property.</p>\n<p>Make sure that you only have the setter for user property in your TodoItem.java.</p>\n"},{"tags":[],"owner":{"account_id":17925856,"reputation":1,"user_id":13024526,"display_name":"Abbhilash R"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1672753262,"creation_date":1672753262,"answer_id":74994168,"question_id":65817073,"body_markdown":"The answer is you have mapped each other entity class ,so when you get Todoitem entity and User gets pickedup and again the Todoitem and it goes on.You don&#39;t have to map each and every entities. ","title":"Spring Boot API response returns repeating nested JSON","body":"<p>The answer is you have mapped each other entity class ,so when you get Todoitem entity and User gets pickedup and again the Todoitem and it goes on.You don't have to map each and every entities.</p>\n"}],"owner":{"account_id":13490009,"reputation":35,"user_id":12462185,"display_name":"Jakkie Chan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2317,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65818385,"answer_count":3,"score":1,"last_activity_date":1672753262,"creation_date":1611174152,"question_id":65817073,"body_markdown":"I have a `User` model and a `TodoItem` model where the `TodoItem` model has a primary key to the `User` model with a `user_id` @joincolumn. My issue is the response I get from the `getUsers` API after I add an item. It creates this super long nested JSON where it repeats itself over and over again. I feel like I&#39;m not handling the primary key case properly.\r\n\r\n**TodoController.java**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class TodoController {\r\n\r\n    @Autowired\r\n    private TodoRepository todoRepository;\r\n\r\n    @PostMapping(&quot;/addItem&quot;)\r\n    public TodoItem addTodoItem(@RequestBody TodoItem todoItem) {\r\n        return todoRepository.save(todoItem);\r\n    }\r\n\r\n**User.java**\r\n\r\n    @Entity\r\n    @Table(name = &quot;users&quot;)\r\n    public class User {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate long id;\r\n\r\n\t@Column(name = &quot;name&quot;)\r\n\tprivate String name;\r\n\r\n\t@Column(name = &quot;password&quot;)\r\n\tprivate String password;\r\n\r\n\t@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;user&quot;)\r\n\tprivate List&lt;TodoItem&gt; todos;\r\n\r\n\tpublic User() {\r\n\t}\r\n\r\n\tpublic User(String name, String password, List&lt;TodoItem&gt; todos) {\r\n\t\tthis.name = name;\r\n\t\tthis.password = password;\r\n\t\tthis.todos = todos;\r\n\t}\r\n    // setter and getters\r\n\r\n\r\n**TodoItem.java**\r\n\r\n    @Entity\r\n    @Table(name = &quot;todo_item&quot;)\r\n    public class TodoItem {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long id;\r\n\r\n    @Column(name = &quot;todo&quot;)\r\n    private String todo;\r\n\r\n    @Column(name = &quot;completed&quot;)\r\n    private boolean completed;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot;)\r\n    private User user;\r\n\r\n    public TodoItem() {\r\n    }\r\n\r\n    public TodoItem(String todo, boolean completed) {\r\n        this.todo = todo;\r\n        this.completed = completed;\r\n    }\r\n    // setters and getters\r\n\r\n*Add Item Request*\r\n\r\n    {\r\n      &quot;todo&quot;: &quot;blahblah&quot;,\r\n      &quot;completed&quot;: false,\r\n      &quot;user&quot;: {\r\n          &quot;id&quot;: 6\r\n      }\r\n    }\r\n\r\n*Add Item Response*\r\n\r\n    {\r\n      &quot;id&quot;: 26,\r\n      &quot;todo&quot;: &quot;blahblah&quot;,\r\n      &quot;completed&quot;: false,\r\n      &quot;user&quot;: {\r\n          &quot;id&quot;: 6,\r\n          &quot;name&quot;: null,\r\n          &quot;password&quot;: null,\r\n          &quot;todos&quot;: null\r\n      }\r\n  }\r\n\r\nSo already I don&#39;t like the way the response is given, why is name, pass, and todos null when the user with id 6 exists, also I just passed it a todoitem, so why is todo null. The database populates properly, it&#39;s just that the response seems wrong. And then I think it ties into the main problem I have which is here; this is after I add item to a user:\r\n\r\n*Get Users Response*\r\n\r\n    [\r\n    {\r\n        &quot;id&quot;: 6,\r\n        &quot;name&quot;: &quot;joe&quot;,\r\n        &quot;password&quot;: &quot;pass&quot;,\r\n        &quot;todos&quot;: [\r\n            {\r\n                &quot;id&quot;: 26,\r\n                &quot;todo&quot;: &quot;blahblah&quot;,\r\n                &quot;completed&quot;: false,\r\n                &quot;user&quot;: {\r\n                    &quot;id&quot;: 6,\r\n                    &quot;name&quot;: &quot;joe&quot;,\r\n                    &quot;password&quot;: &quot;pass&quot;,\r\n                    &quot;todos&quot;: [\r\n                        {\r\n                            &quot;id&quot;: 26,\r\n                            &quot;todo&quot;: &quot;blahblah&quot;,\r\n                            &quot;completed&quot;: false,\r\n                            &quot;user&quot;: {\r\n                                &quot;id&quot;: 6,\r\n                                &quot;name&quot;: &quot;joe&quot;,\r\n                                &quot;password&quot;: &quot;pass&quot;,\r\n                                &quot;todos&quot;: [\r\n                                    {\r\n                                        &quot;id&quot;: 26,\r\n                                        &quot;todo&quot;: &quot;blahblah&quot;,\r\n                                        &quot;completed&quot;: false,\r\n                                        &quot;user&quot;: {\r\n                                            &quot;id&quot;: 6,\r\n                                            &quot;name&quot;: &quot;joe&quot;,\r\n                                            &quot;password&quot;: &quot;pass&quot;,\r\n                                            &quot;todos&quot;: [\r\n                                                {\r\n                                                    &quot;id&quot;: 26,\r\n                                                    &quot;todo&quot;: &quot;blahblah&quot;,\r\n                                                    &quot;completed&quot;: false,\r\n                                                    &quot;user&quot;: {\r\n                                                        &quot;id&quot;: 6,\r\n                                                        &quot;name&quot;: &quot;joe&quot;,\r\n                                                        &quot;password&quot;: &quot;pass&quot;,\r\n                                                        &quot;todos&quot;: [\r\n                                                            {\r\n                                                                &quot;id&quot;: 26,\r\n                                                                &quot;todo&quot;: &quot;blahblah&quot;,\r\n\r\nAnd it just continues like that for literally thousands of lines. Even though the response is crazy, the database updates properly, but the API calls can take a while due to this issue\r\n\r\n","title":"Spring Boot API response returns repeating nested JSON","body":"<p>I have a <code>User</code> model and a <code>TodoItem</code> model where the <code>TodoItem</code> model has a primary key to the <code>User</code> model with a <code>user_id</code> @joincolumn. My issue is the response I get from the <code>getUsers</code> API after I add an item. It creates this super long nested JSON where it repeats itself over and over again. I feel like I'm not handling the primary key case properly.</p>\n<p><strong>TodoController.java</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class TodoController {\n\n@Autowired\nprivate TodoRepository todoRepository;\n\n@PostMapping(&quot;/addItem&quot;)\npublic TodoItem addTodoItem(@RequestBody TodoItem todoItem) {\n    return todoRepository.save(todoItem);\n}\n</code></pre>\n<p><strong>User.java</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate long id;\n\n@Column(name = &quot;name&quot;)\nprivate String name;\n\n@Column(name = &quot;password&quot;)\nprivate String password;\n\n@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;user&quot;)\nprivate List&lt;TodoItem&gt; todos;\n\npublic User() {\n}\n\npublic User(String name, String password, List&lt;TodoItem&gt; todos) {\n    this.name = name;\n    this.password = password;\n    this.todos = todos;\n}\n// setter and getters\n</code></pre>\n<p><strong>TodoItem.java</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;todo_item&quot;)\npublic class TodoItem {\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate long id;\n\n@Column(name = &quot;todo&quot;)\nprivate String todo;\n\n@Column(name = &quot;completed&quot;)\nprivate boolean completed;\n\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;user_id&quot;)\nprivate User user;\n\npublic TodoItem() {\n}\n\npublic TodoItem(String todo, boolean completed) {\n    this.todo = todo;\n    this.completed = completed;\n}\n// setters and getters\n</code></pre>\n<p><em>Add Item Request</em></p>\n<pre><code>{\n  &quot;todo&quot;: &quot;blahblah&quot;,\n  &quot;completed&quot;: false,\n  &quot;user&quot;: {\n      &quot;id&quot;: 6\n  }\n}\n</code></pre>\n<p><em>Add Item Response</em></p>\n<pre><code>{\n  &quot;id&quot;: 26,\n  &quot;todo&quot;: &quot;blahblah&quot;,\n  &quot;completed&quot;: false,\n  &quot;user&quot;: {\n      &quot;id&quot;: 6,\n      &quot;name&quot;: null,\n      &quot;password&quot;: null,\n      &quot;todos&quot;: null\n  }\n</code></pre>\n<p>}</p>\n<p>So already I don't like the way the response is given, why is name, pass, and todos null when the user with id 6 exists, also I just passed it a todoitem, so why is todo null. The database populates properly, it's just that the response seems wrong. And then I think it ties into the main problem I have which is here; this is after I add item to a user:</p>\n<p><em>Get Users Response</em></p>\n<pre><code>[\n{\n    &quot;id&quot;: 6,\n    &quot;name&quot;: &quot;joe&quot;,\n    &quot;password&quot;: &quot;pass&quot;,\n    &quot;todos&quot;: [\n        {\n            &quot;id&quot;: 26,\n            &quot;todo&quot;: &quot;blahblah&quot;,\n            &quot;completed&quot;: false,\n            &quot;user&quot;: {\n                &quot;id&quot;: 6,\n                &quot;name&quot;: &quot;joe&quot;,\n                &quot;password&quot;: &quot;pass&quot;,\n                &quot;todos&quot;: [\n                    {\n                        &quot;id&quot;: 26,\n                        &quot;todo&quot;: &quot;blahblah&quot;,\n                        &quot;completed&quot;: false,\n                        &quot;user&quot;: {\n                            &quot;id&quot;: 6,\n                            &quot;name&quot;: &quot;joe&quot;,\n                            &quot;password&quot;: &quot;pass&quot;,\n                            &quot;todos&quot;: [\n                                {\n                                    &quot;id&quot;: 26,\n                                    &quot;todo&quot;: &quot;blahblah&quot;,\n                                    &quot;completed&quot;: false,\n                                    &quot;user&quot;: {\n                                        &quot;id&quot;: 6,\n                                        &quot;name&quot;: &quot;joe&quot;,\n                                        &quot;password&quot;: &quot;pass&quot;,\n                                        &quot;todos&quot;: [\n                                            {\n                                                &quot;id&quot;: 26,\n                                                &quot;todo&quot;: &quot;blahblah&quot;,\n                                                &quot;completed&quot;: false,\n                                                &quot;user&quot;: {\n                                                    &quot;id&quot;: 6,\n                                                    &quot;name&quot;: &quot;joe&quot;,\n                                                    &quot;password&quot;: &quot;pass&quot;,\n                                                    &quot;todos&quot;: [\n                                                        {\n                                                            &quot;id&quot;: 26,\n                                                            &quot;todo&quot;: &quot;blahblah&quot;,\n</code></pre>\n<p>And it just continues like that for literally thousands of lines. Even though the response is crazy, the database updates properly, but the API calls can take a while due to this issue</p>\n"},{"tags":["java","gradle","gradle-kotlin-dsl"],"answers":[{"tags":[],"owner":{"account_id":13355621,"reputation":1,"user_id":9639274,"display_name":"Tangtang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625561558,"creation_date":1625561558,"answer_id":68267409,"question_id":68267303,"body_markdown":"try &lt;exclusions&gt; in your &lt;dependency&gt;\r\nexamples:\r\n\r\n      &lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;xxxx&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;xxxx&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.0.9-SNAPSHOT&lt;/version&gt;\r\n\t\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;com.commons-lang&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;XXX&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;/exclusions&gt;\r\n\t\t\t&lt;/dependency&gt;","title":"Exclude specific directory/path in gradle dependency","body":"<p>try  in your \nexamples:</p>\n<pre><code>  &lt;dependency&gt;\n            &lt;groupId&gt;xxxx&lt;/groupId&gt;\n            &lt;artifactId&gt;xxxx&lt;/artifactId&gt;\n            &lt;version&gt;1.0.9-SNAPSHOT&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.commons-lang&lt;/groupId&gt;\n                    &lt;artifactId&gt;XXX&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13950153,"reputation":27,"user_id":10073858,"display_name":"Harsh_Jani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672752940,"creation_date":1672739760,"answer_id":74991676,"question_id":68267303,"body_markdown":" - You can check the dependency tree by using `mvn dependency:tree` to check where commons-lang is coming from and then you can exclude from the parent dependency.\r\n\r\n- Also, Please try with providing as an external dependency of commons-lang with your newer version above its parent dependency.\r\n\r\nExample :\r\n\r\n```xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;or.apache.xxx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-lang.xxx&lt;/artifactId&gt;\r\n        &lt;version&gt;newer.version&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;parent.dependency.of.commons.lang&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent.dependency.of.commons.lang&lt;/artifactId&gt;\r\n        &lt;version&gt;specified.version&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```","title":"Exclude specific directory/path in gradle dependency","body":"<ul>\n<li><p>You can check the dependency tree by using <code>mvn dependency:tree</code> to check where commons-lang is coming from and then you can exclude from the parent dependency.</p>\n</li>\n<li><p>Also, Please try with providing as an external dependency of commons-lang with your newer version above its parent dependency.</p>\n</li>\n</ul>\n<p>Example :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;or.apache.xxx&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-lang.xxx&lt;/artifactId&gt;\n        &lt;version&gt;newer.version&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;parent.dependency.of.commons.lang&lt;/groupId&gt;\n        &lt;artifactId&gt;parent.dependency.of.commons.lang&lt;/artifactId&gt;\n        &lt;version&gt;specified.version&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":21512101,"reputation":11,"user_id":15854664,"display_name":"thamid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672752940,"creation_date":1625561036,"question_id":68267303,"body_markdown":"I have an `implementation` dependency in my dependencies. The dependency has an old version of the apache commons-lang 3 dependency shaded. It is not listed as a transitive dependency of the dependency, it is just shaded. However, I require the apache commons-lang 3 dependency as well, and I need a newer version. I do not think I can just exclude the commons-lang 3 dependency as it is not transitive. Is there another way to filter out the dependency?\r\n\r\nusing gradle 7.1","title":"Exclude specific directory/path in gradle dependency","body":"<p>I have an <code>implementation</code> dependency in my dependencies. The dependency has an old version of the apache commons-lang 3 dependency shaded. It is not listed as a transitive dependency of the dependency, it is just shaded. However, I require the apache commons-lang 3 dependency as well, and I need a newer version. I do not think I can just exclude the commons-lang 3 dependency as it is not transitive. Is there another way to filter out the dependency?</p>\n<p>using gradle 7.1</p>\n"},{"tags":["java","gradle","aop"],"comments":[{"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"score":0,"creation_date":1672394030,"post_id":74958316,"comment_id":132281198,"body_markdown":"Hi, please update your question to include the Gradle build scripts, and any error messages or console logs about the problem you are trying to resolve.","body":"Hi, please update your question to include the Gradle build scripts, and any error messages or console logs about the problem you are trying to resolve."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1672397543,"post_id":74958316,"comment_id":132281989,"body_markdown":"Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). Thank you.","body":"Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Thank you."},{"owner":{"account_id":12682886,"reputation":11,"user_id":9215881,"display_name":"hema"},"score":0,"creation_date":1672720683,"post_id":74958316,"comment_id":132333658,"body_markdown":"Edited with build script snippet and error","body":"Edited with build script snippet and error"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672752867,"creation_date":1672752867,"answer_id":74994081,"question_id":74958316,"body_markdown":"&gt; ```java\r\n&gt; plugins {\r\n&gt;   id &#39;org.aspectj.aspectj&#39; version &#39;1.9.5&#39;\r\n&gt; }\r\n&gt; ```\r\n\r\nWell, you cannot simply invent non-existent Gradle plugin names and expect them to magically work. The error message explains that, too.\r\n\r\nHow about using the [Freefair AspectJ](https://docs.freefair.io/gradle-plugins/current/reference/#_aspectj_plugins) plugin collection instead?","title":"AspectJ Gradle plugin issue","body":"<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>plugins {\n  id 'org.aspectj.aspectj' version '1.9.5'\n}\n</code></pre>\n</blockquote>\n<p>Well, you cannot simply invent non-existent Gradle plugin names and expect them to magically work. The error message explains that, too.</p>\n<p>How about using the <a href=\"https://docs.freefair.io/gradle-plugins/current/reference/#_aspectj_plugins\" rel=\"nofollow noreferrer\">Freefair AspectJ</a> plugin collection instead?</p>\n"}],"owner":{"account_id":12682886,"reputation":11,"user_id":9215881,"display_name":"hema"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672752921,"creation_date":1672377058,"question_id":74958316,"body_markdown":"I have project A which uses aspectj (without spring) and I need to add project A dependency in project B(which is gradle based).\r\n\r\nFor maven based project, I am able make aspects work by adding project A dependency and aspectj-maven-plugin\r\n\r\nBut for gradle based project B, aspects are not working by adding project A dependency.\r\n\r\nCan anyone help me with this? \r\n\r\nI am using Gradle 7.4.2 version\r\n\r\nI tried with org.aspectj.aspectj plugin but getting below error\r\n\r\n```none\r\nPlugin [id: &#39;org.aspectj.aspectj&#39;, version: &#39;1.9.5&#39;] was not found in any of the following sources:\r\n\r\n- Gradle Core Plugins (plugin is not in &#39;org.gradle&#39; namespace)\r\n- Plugin Repositories (could not resolve plugin artifact &#39;org.aspectj.aspectj:org.aspectj.aspectj.gradle.plugin:1.9.5&#39;)\r\n  Searched in the following repositories:\r\n    Gradle Central Plugin Repository\r\n    Google\r\n    MavenRepo\r\n```\r\n\r\n```java\r\nmaven {\r\n    url &quot;https://plugins.gradle.org/m2/&quot;\r\n}\r\n```\r\nI don&#39;t see org.aspectj.aspectj in gradle repository, but still same\r\n\r\nEdit:\r\n\r\nGradle \r\n```java\r\nplugins {\r\n  id &#39;org.aspectj.aspectj&#39; version &#39;1.9.5&#39;\r\n}\r\n\r\naspectj {\r\n  aspectPath = sourceSets.main.compileClasspath\r\n  sourceCompatibility = JavaVersion.VERSION_1_8\r\n  targetCompatibility = JavaVersion.VERSION_1_8\r\n}\r\n\r\n// adding project A as a dependency\r\n\r\ndependencies {\r\n  implementation project(&#39;:projectA&#39;)\r\n}\r\n\r\ndependencies {\r\n  runtime &#39;org.aspectj:aspectjrt:1.9.5&#39;\r\n}\r\n```\r\n","title":"AspectJ Gradle plugin issue","body":"<p>I have project A which uses aspectj (without spring) and I need to add project A dependency in project B(which is gradle based).</p>\n<p>For maven based project, I am able make aspects work by adding project A dependency and aspectj-maven-plugin</p>\n<p>But for gradle based project B, aspects are not working by adding project A dependency.</p>\n<p>Can anyone help me with this?</p>\n<p>I am using Gradle 7.4.2 version</p>\n<p>I tried with org.aspectj.aspectj plugin but getting below error</p>\n<pre class=\"lang-none prettyprint-override\"><code>Plugin [id: 'org.aspectj.aspectj', version: '1.9.5'] was not found in any of the following sources:\n\n- Gradle Core Plugins (plugin is not in 'org.gradle' namespace)\n- Plugin Repositories (could not resolve plugin artifact 'org.aspectj.aspectj:org.aspectj.aspectj.gradle.plugin:1.9.5')\n  Searched in the following repositories:\n    Gradle Central Plugin Repository\n    Google\n    MavenRepo\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>maven {\n    url &quot;https://plugins.gradle.org/m2/&quot;\n}\n</code></pre>\n<p>I don't see org.aspectj.aspectj in gradle repository, but still same</p>\n<p>Edit:</p>\n<p>Gradle</p>\n<pre class=\"lang-java prettyprint-override\"><code>plugins {\n  id 'org.aspectj.aspectj' version '1.9.5'\n}\n\naspectj {\n  aspectPath = sourceSets.main.compileClasspath\n  sourceCompatibility = JavaVersion.VERSION_1_8\n  targetCompatibility = JavaVersion.VERSION_1_8\n}\n\n// adding project A as a dependency\n\ndependencies {\n  implementation project(':projectA')\n}\n\ndependencies {\n  runtime 'org.aspectj:aspectjrt:1.9.5'\n}\n</code></pre>\n"},{"tags":["java","swing","icons","jframe","imageicon"],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1383271121,"creation_date":1383271121,"answer_id":19719665,"question_id":19719590,"body_markdown":"[`ImageIcon(String)`][1] expects a file reference, if the icon is an embedded resource, you will need to supply a `URL`\r\n\r\nSomething like...\r\n\r\n    private static ImageIcon ICON = new ImageIcon(RType.class.getResource(&quot;/craft.png&quot;));\r\n\r\nAssuming that `craft.png` is in the default directory and not some sub directory\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.lang.String%29","title":"JFrame.setIconImage() not working","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.lang.String%29\" rel=\"nofollow\"><code>ImageIcon(String)</code></a> expects a file reference, if the icon is an embedded resource, you will need to supply a <code>URL</code></p>\n\n<p>Something like...</p>\n\n<pre><code>private static ImageIcon ICON = new ImageIcon(RType.class.getResource(\"/craft.png\"));\n</code></pre>\n\n<p>Assuming that <code>craft.png</code> is in the default directory and not some sub directory</p>\n"},{"tags":[],"owner":{"account_id":20882148,"reputation":3,"user_id":15339608,"display_name":"Eirals"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1656248757,"creation_date":1656191781,"answer_id":72757406,"question_id":19719590,"body_markdown":"--Deprecated--\r\n\r\nIntelliJ IDEA sometimes does not recognizes paths from the `src` folder, it does from the `out` folder though, so I suggest to compile your progect and get the path from there.\r\n\r\nExample:\r\n\r\n    String iconPath = &quot;out/production/projectName/com/media/icon.png&quot;;\r\n    jframe.setIconImage(new ImageIcon(iconPath).getImage());\r\n\r\nHope this will still help someone.","title":"JFrame.setIconImage() not working","body":"<p>--Deprecated--</p>\n<p>IntelliJ IDEA sometimes does not recognizes paths from the <code>src</code> folder, it does from the <code>out</code> folder though, so I suggest to compile your progect and get the path from there.</p>\n<p>Example:</p>\n<pre><code>String iconPath = &quot;out/production/projectName/com/media/icon.png&quot;;\njframe.setIconImage(new ImageIcon(iconPath).getImage());\n</code></pre>\n<p>Hope this will still help someone.</p>\n"},{"tags":[],"owner":{"account_id":1219227,"reputation":21,"user_id":1186211,"display_name":"user1186211"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662674321,"creation_date":1662674321,"answer_id":73655429,"question_id":19719590,"body_markdown":"Although I tried a number of approaches and was never able to get the icon correctly set in the ULHC of the JFrame, I was able to get a full-sized icon (194 &#215; 177 pixels) to show in the Task Bar, which for this project, is enough.\r\n\r\nThis is what worked for me:\r\n\r\n        String sImageFileName = &quot;/lb/icons/favicon.png&quot;;\r\n        URL urlImageFileName = getClass().getResource(sImageFileName);\r\n\r\n        if (urlImageFileName == null)\r\n            System.out.println( &quot;urlImageFileName: &quot; + urlImageFileName + &quot; Not Found.&quot; );\r\n        else {\r\n            ImageIcon oImageIcon = new ImageIcon(getClass().getResource(sImageFileName));\r\n            setIconImage(oImageIcon.getImage());\r\n        }  // end else\r\n\r\n/lb is the root of your pkg as it appears in the current jar.\r\n\r\nHope this helps.","title":"JFrame.setIconImage() not working","body":"<p>Although I tried a number of approaches and was never able to get the icon correctly set in the ULHC of the JFrame, I was able to get a full-sized icon (194  177 pixels) to show in the Task Bar, which for this project, is enough.</p>\n<p>This is what worked for me:</p>\n<pre><code>    String sImageFileName = &quot;/lb/icons/favicon.png&quot;;\n    URL urlImageFileName = getClass().getResource(sImageFileName);\n\n    if (urlImageFileName == null)\n        System.out.println( &quot;urlImageFileName: &quot; + urlImageFileName + &quot; Not Found.&quot; );\n    else {\n        ImageIcon oImageIcon = new ImageIcon(getClass().getResource(sImageFileName));\n        setIconImage(oImageIcon.getImage());\n    }  // end else\n</code></pre>\n<p>/lb is the root of your pkg as it appears in the current jar.</p>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":3135161,"reputation":1524,"user_id":2651804,"accept_rate":80,"display_name":"user2651804"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5946,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":19719665,"answer_count":3,"score":1,"last_activity_date":1672752542,"creation_date":1383270541,"question_id":19719590,"body_markdown":"    public class RType extends JFrame {\r\n\r\n\tprivate static ImageIcon ICON = new ImageIcon(&quot;craft.png&quot;);\r\n\t\r\n    public RType() {\r\n\r\n        add(new Board());\r\n\t\tsetIconImage(ICON.getImage());\r\n\t\t\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        setSize(400, 300);\r\n        setLocationRelativeTo(null);\r\n        setTitle(&quot;R - Type&quot;);\r\n        setResizable(false);\r\n        setVisible(true);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new RType();\r\n    }\r\n    }\r\n\r\nThis code still works fine and compiles after I attempt to set an icon image for the JFrame, but there is no difference. I still see the default java-icon. Can someone detect the problem? &quot;craft.png&quot; is 20x20 pixels. It is correctly placed within the ressource folder (no ClassLoader-exceptions and no other compile-time errors).","title":"JFrame.setIconImage() not working","body":"<pre><code>public class RType extends JFrame {\n\nprivate static ImageIcon ICON = new ImageIcon(\"craft.png\");\n\npublic RType() {\n\n    add(new Board());\n    setIconImage(ICON.getImage());\n\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    setSize(400, 300);\n    setLocationRelativeTo(null);\n    setTitle(\"R - Type\");\n    setResizable(false);\n    setVisible(true);\n}\n\npublic static void main(String[] args) {\n    new RType();\n}\n}\n</code></pre>\n\n<p>This code still works fine and compiles after I attempt to set an icon image for the JFrame, but there is no difference. I still see the default java-icon. Can someone detect the problem? \"craft.png\" is 20x20 pixels. It is correctly placed within the ressource folder (no ClassLoader-exceptions and no other compile-time errors).</p>\n"},{"tags":["java","android","kotlin","encryption","android-ksoap2"],"answers":[{"tags":[],"owner":{"account_id":27360805,"reputation":87,"user_id":20868442,"display_name":"Lian Xucan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672744069,"creation_date":1672744069,"answer_id":74992512,"question_id":74979278,"body_markdown":"I write some code for you, and you can see the complete code at [https://github.com/XSComSoft/stack-overflow][1]\r\n\r\nIn the main and two copies of the test code package `org.exmaple.Stack74979278` respectively containing the client code and the server code\r\n\r\nYou can simple run test at class `org.example.stack74979278.Main` if you open this with `idea` as maven project\r\n\r\nCommunication only needs to rely on `java jws`\r\n\r\n\r\n  [1]: https://github.com/XSComSoft/stack-overflow\r\n\r\nHere are some code snippets\r\n\r\n**KeyService.java**\r\n\r\n    @WebService\r\n    @SOAPBinding(style = SOAPBinding.Style.RPC)\r\n    public interface KeyService {\r\n    @WebMethod\r\n    @WebResult(name = &quot;get&quot;)\r\n    byte[] getPublicKey();\r\n  \r\n    @WebMethod\r\n    @WebResult(name = &quot;get&quot;)\r\n    String getDecodeByPrivateKey(String base64) throws Exception;\r\n  \r\n    }\r\n\r\n**KeyServiceImpl.java**\r\n\r\n    @WebService(endpointInterface = &quot;org.example.stack74979278.KeyService&quot;)\r\n    public class KeyServiceImpl implements KeyService{\r\n    \r\n        private RSAPublicKey puk;\r\n        private RSAPrivateKey prk;\r\n    \r\n        public byte[] getPublicKey() {\r\n            return puk.getEncoded();\r\n        }\r\n    \r\n        @Override\r\n        public String getDecodeByPrivateKey(String base64) throws Exception {\r\n            return RSAUtils.decryptByPrivateKey(base64, prk);\r\n        }\r\n    \r\n        public KeyServiceImpl() throws Exception {\r\n            //        List&lt;Key&gt; keyList = RSAUtils.getRSAKeyObject(1024);\r\n            //        puk = (RSAPublicKey) keyList.get(0);\r\n            //        prk = (RSAPrivateKey) keyList.get(1);\r\n            Properties properties = new Properties();\r\n            properties.load(KeyServiceImpl.class.getResourceAsStream(&quot;/stack74979278/keys.properties&quot;));\r\n    \r\n            puk = RSAUtils.getPublicKey(properties.getProperty(&quot;public&quot;));\r\n            prk = RSAUtils.getPrivateKey(properties.getProperty(&quot;private&quot;));\r\n    \r\n            String publicKey = Base64.getEncoder().encodeToString(puk.getEncoded());\r\n            String privateKey = Base64.getEncoder().encodeToString(prk.getEncoded());\r\n            System.out.println(&quot;publicKey&quot;);\r\n            System.out.println(publicKey);\r\n    \r\n            System.out.println(&quot;privateKey&quot;);\r\n            System.out.println(privateKey);\r\n        }\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            Endpoint.publish(&quot;http://localhost/test&quot;, new KeyServiceImpl());\r\n        }\r\n    }\r\n\r\n**RSAUtil.java**\r\n\r\n    public class  RSAUtils {\r\n     \r\n        // \r\n        private final static String ALGORITHM_RSA = &quot;RSA&quot;;\r\n     \r\n        /**\r\n         * \r\n         *\r\n         * @param modulus\r\n         *\r\n         * @throws NoSuchAlgorithmException\r\n         *\r\n         */\r\n        public static List&lt;Key&gt; getRSAKeyObject(int modulus) throws NoSuchAlgorithmException{\r\n     \r\n            List&lt;Key&gt; keyList = new ArrayList&lt;&gt;(2);\r\n            // RSA\r\n            KeyPairGenerator keyPairGen = KeyPairGenerator.getInstance(ALGORITHM_RSA);\r\n            // RSA = \r\n            keyPairGen.initialize(modulus);\r\n            KeyPair keyPair = keyPairGen.generateKeyPair();\r\n            // keyPair.getPublic() RSAPublic\r\n            keyList.add(keyPair.getPublic());\r\n            // keyPair.getPrivate() RSAPrivateKey\r\n            keyList.add(keyPair.getPrivate());\r\n            return keyList;\r\n        }\r\n     \r\n        /**\r\n         * \r\n         * \r\n         *\r\n         * @param modulus \r\n         * @return\r\n         * @throws NoSuchAlgorithmException\r\n         */\r\n        public static List&lt;String&gt; getRSAKeyString(int modulus) throws NoSuchAlgorithmException{\r\n     \r\n            List&lt;String&gt; keyList = new ArrayList&lt;&gt;(2);\r\n            KeyPairGenerator keyPairGen = KeyPairGenerator.getInstance(ALGORITHM_RSA);\r\n            keyPairGen.initialize(modulus);\r\n            KeyPair keyPair = keyPairGen.generateKeyPair();\r\n            String publicKey = Base64.getEncoder().encodeToString(keyPair.getPublic().getEncoded());\r\n            String privateKey = Base64.getEncoder().encodeToString(keyPair.getPrivate().getEncoded());\r\n            keyList.add(publicKey);\r\n            keyList.add(privateKey);\r\n            return keyList;\r\n        }\r\n    \r\n        public static RSAPublicKey getPublicKey(String publicKey) throws Exception {\r\n            byte[] keyBytes = Base64.getDecoder().decode(publicKey);\r\n            KeyFactory keyFactory = KeyFactory.getInstance(ALGORITHM_RSA);\r\n            X509EncodedKeySpec spec = new X509EncodedKeySpec(keyBytes);\r\n            return (RSAPublicKey) keyFactory.generatePublic(spec);\r\n        }\r\n    \r\n        public static RSAPublicKey getPublicKey(byte[] keyBytes) throws Exception {\r\n            RSAPublicKey publicKey =\r\n                    (RSAPublicKey) KeyFactory.getInstance(&quot;RSA&quot;).generatePublic(new X509EncodedKeySpec(keyBytes));\r\n            return publicKey;\r\n        }\r\n    \r\n        public static RSAPrivateKey getPrivateKey(String privateKey) throws Exception {\r\n            byte[] keyBytes = Base64.getDecoder().decode(privateKey);\r\n            return getPrivateKey(keyBytes);\r\n        }\r\n    \r\n        public static RSAPrivateKey getPrivateKey(byte[] keyBytes) throws Exception {\r\n            KeyFactory keyFactory = KeyFactory.getInstance(ALGORITHM_RSA);\r\n            PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);\r\n            return (RSAPrivateKey) keyFactory.generatePrivate(spec);\r\n        }\r\n     \r\n        /**\r\n         * \r\n         *\r\n         * @param data\r\n         * @param publicKey\r\n         * @return\r\n         * @throws Exception\r\n         */\r\n        public static String encryptByPublicKey(String data, RSAPublicKey publicKey)\r\n                throws Exception {\r\n            Cipher cipher = Cipher.getInstance(ALGORITHM_RSA);\r\n            cipher.init(Cipher.ENCRYPT_MODE, publicKey);\r\n            // n\r\n            int modulusSize = publicKey.getModulus().bitLength() / 8;\r\n            // PKCS Padding11 - 11byte\r\n            int maxSingleSize = modulusSize - 11;\r\n            // maxSingleSize\r\n            byte[][] dataArray = splitArray(data.getBytes(), maxSingleSize);\r\n            ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n            // \r\n            for (byte[] s : dataArray) {\r\n                out.write(cipher.doFinal(s));\r\n            }\r\n            // Base64String\r\n            return Base64.getEncoder().encodeToString(out.toByteArray());\r\n        }\r\n     \r\n        /**\r\n         * \r\n         *\r\n         * @param data\r\n         * @param privateKey\r\n         * @return\r\n         * @throws Exception\r\n         */\r\n        public static String decryptByPrivateKey(String data, RSAPrivateKey privateKey)\r\n                throws Exception {\r\n            Cipher cipher = Cipher.getInstance(ALGORITHM_RSA);\r\n            cipher.init(Cipher.DECRYPT_MODE, privateKey);\r\n            // RSA n\r\n            int modulusSize = privateKey.getModulus().bitLength() / 8;\r\n            byte[] dataBytes = data.getBytes();\r\n            // Base64\r\n            byte[] decodeData = Base64.getDecoder().decode(dataBytes);\r\n            // modulusSize\r\n            byte[][] splitArrays = splitArray(decodeData, modulusSize);\r\n            ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n            for(byte[] arr : splitArrays){\r\n                out.write(cipher.doFinal(arr));\r\n            }\r\n            return new String(out.toByteArray());\r\n        }\r\n     \r\n        /**\r\n         * \r\n         *\r\n         * @param data\r\n         * @param len \r\n         * @return\r\n         */\r\n        private static byte[][] splitArray(byte[] data,int len){\r\n     \r\n            int dataLen = data.length;\r\n            if (dataLen &lt;= len) {\r\n                return new byte[][]{data};\r\n            }\r\n            byte[][] result = new byte[(dataLen-1)/len + 1][];\r\n            int resultLen = result.length;\r\n            for (int i = 0; i &lt; resultLen; i++) {\r\n                if (i == resultLen - 1) {\r\n                    int slen = dataLen - len * i;\r\n                    byte[] single = new byte[slen];\r\n                    System.arraycopy(data, len * i, single, 0, slen);\r\n                    result[i] = single;\r\n                    break;\r\n                }\r\n                byte[] single = new byte[len];\r\n                System.arraycopy(data, len * i, single, 0, len);\r\n                result[i] = single;\r\n            }\r\n            return result;\r\n        }\r\n     \r\n     \r\n    }\r\n\r\nand the client generator by cmd`wsimport -keep -p org.example.stack74979278 http://localhost/test?wsdl`, see detail a\r\n\r\n**the client test class** \r\n\r\n    @Log\r\n    public class Main {\r\n    \r\n        @Test\r\n        public void getPublicKey(){\r\n            byte[] bytes = new KeyServiceImplService().getKeyServiceImplPort().getPublicKey();\r\n            System.out.println(bytes);\r\n        }\r\n    \r\n        @Test\r\n        public void getDecode() throws Exception {\r\n            KeyService keyService = new KeyServiceImplService().getKeyServiceImplPort();\r\n            byte[] bytes = keyService.getPublicKey();\r\n            RSAPublicKey publicKey = RSAUtils.getPublicKey(bytes);\r\n            String encrypt = &quot;The message encrypt&quot;;\r\n            String str = keyService.getDecodeByPrivateKey(RSAUtils.encryptByPublicKey(encrypt, publicKey));\r\n            log.info(str);\r\n        }\r\n    \r\n    }\r\n\r\nNow you can get the `public key byte` for android client and send server the `encrypted base64 string`","title":"Receive byte array from server in ksoap2 Android client","body":"<p>I write some code for you, and you can see the complete code at <a href=\"https://github.com/XSComSoft/stack-overflow\" rel=\"nofollow noreferrer\">https://github.com/XSComSoft/stack-overflow</a></p>\n<p>In the main and two copies of the test code package <code>org.exmaple.Stack74979278</code> respectively containing the client code and the server code</p>\n<p>You can simple run test at class <code>org.example.stack74979278.Main</code> if you open this with <code>idea</code> as maven project</p>\n<p>Communication only needs to rely on <code>java jws</code></p>\n<p>Here are some code snippets</p>\n<p><strong>KeyService.java</strong></p>\n<pre><code>@WebService\n@SOAPBinding(style = SOAPBinding.Style.RPC)\npublic interface KeyService {\n@WebMethod\n@WebResult(name = &quot;get&quot;)\nbyte[] getPublicKey();\n\n@WebMethod\n@WebResult(name = &quot;get&quot;)\nString getDecodeByPrivateKey(String base64) throws Exception;\n\n}\n</code></pre>\n<p><strong>KeyServiceImpl.java</strong></p>\n<pre><code>@WebService(endpointInterface = &quot;org.example.stack74979278.KeyService&quot;)\npublic class KeyServiceImpl implements KeyService{\n\n    private RSAPublicKey puk;\n    private RSAPrivateKey prk;\n\n    public byte[] getPublicKey() {\n        return puk.getEncoded();\n    }\n\n    @Override\n    public String getDecodeByPrivateKey(String base64) throws Exception {\n        return RSAUtils.decryptByPrivateKey(base64, prk);\n    }\n\n    public KeyServiceImpl() throws Exception {\n        //        List&lt;Key&gt; keyList = RSAUtils.getRSAKeyObject(1024);\n        //        puk = (RSAPublicKey) keyList.get(0);\n        //        prk = (RSAPrivateKey) keyList.get(1);\n        Properties properties = new Properties();\n        properties.load(KeyServiceImpl.class.getResourceAsStream(&quot;/stack74979278/keys.properties&quot;));\n\n        puk = RSAUtils.getPublicKey(properties.getProperty(&quot;public&quot;));\n        prk = RSAUtils.getPrivateKey(properties.getProperty(&quot;private&quot;));\n\n        String publicKey = Base64.getEncoder().encodeToString(puk.getEncoded());\n        String privateKey = Base64.getEncoder().encodeToString(prk.getEncoded());\n        System.out.println(&quot;publicKey&quot;);\n        System.out.println(publicKey);\n\n        System.out.println(&quot;privateKey&quot;);\n        System.out.println(privateKey);\n    }\n\n    public static void main(String[] args) throws Exception {\n        Endpoint.publish(&quot;http://localhost/test&quot;, new KeyServiceImpl());\n    }\n}\n</code></pre>\n<p><strong>RSAUtil.java</strong></p>\n<pre><code>public class  RSAUtils {\n \n    // \n    private final static String ALGORITHM_RSA = &quot;RSA&quot;;\n \n    /**\n     * \n     *\n     * @param modulus\n     *\n     * @throws NoSuchAlgorithmException\n     *\n     */\n    public static List&lt;Key&gt; getRSAKeyObject(int modulus) throws NoSuchAlgorithmException{\n \n        List&lt;Key&gt; keyList = new ArrayList&lt;&gt;(2);\n        // RSA\n        KeyPairGenerator keyPairGen = KeyPairGenerator.getInstance(ALGORITHM_RSA);\n        // RSA = \n        keyPairGen.initialize(modulus);\n        KeyPair keyPair = keyPairGen.generateKeyPair();\n        // keyPair.getPublic() RSAPublic\n        keyList.add(keyPair.getPublic());\n        // keyPair.getPrivate() RSAPrivateKey\n        keyList.add(keyPair.getPrivate());\n        return keyList;\n    }\n \n    /**\n     * \n     * \n     *\n     * @param modulus \n     * @return\n     * @throws NoSuchAlgorithmException\n     */\n    public static List&lt;String&gt; getRSAKeyString(int modulus) throws NoSuchAlgorithmException{\n \n        List&lt;String&gt; keyList = new ArrayList&lt;&gt;(2);\n        KeyPairGenerator keyPairGen = KeyPairGenerator.getInstance(ALGORITHM_RSA);\n        keyPairGen.initialize(modulus);\n        KeyPair keyPair = keyPairGen.generateKeyPair();\n        String publicKey = Base64.getEncoder().encodeToString(keyPair.getPublic().getEncoded());\n        String privateKey = Base64.getEncoder().encodeToString(keyPair.getPrivate().getEncoded());\n        keyList.add(publicKey);\n        keyList.add(privateKey);\n        return keyList;\n    }\n\n    public static RSAPublicKey getPublicKey(String publicKey) throws Exception {\n        byte[] keyBytes = Base64.getDecoder().decode(publicKey);\n        KeyFactory keyFactory = KeyFactory.getInstance(ALGORITHM_RSA);\n        X509EncodedKeySpec spec = new X509EncodedKeySpec(keyBytes);\n        return (RSAPublicKey) keyFactory.generatePublic(spec);\n    }\n\n    public static RSAPublicKey getPublicKey(byte[] keyBytes) throws Exception {\n        RSAPublicKey publicKey =\n                (RSAPublicKey) KeyFactory.getInstance(&quot;RSA&quot;).generatePublic(new X509EncodedKeySpec(keyBytes));\n        return publicKey;\n    }\n\n    public static RSAPrivateKey getPrivateKey(String privateKey) throws Exception {\n        byte[] keyBytes = Base64.getDecoder().decode(privateKey);\n        return getPrivateKey(keyBytes);\n    }\n\n    public static RSAPrivateKey getPrivateKey(byte[] keyBytes) throws Exception {\n        KeyFactory keyFactory = KeyFactory.getInstance(ALGORITHM_RSA);\n        PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);\n        return (RSAPrivateKey) keyFactory.generatePrivate(spec);\n    }\n \n    /**\n     * \n     *\n     * @param data\n     * @param publicKey\n     * @return\n     * @throws Exception\n     */\n    public static String encryptByPublicKey(String data, RSAPublicKey publicKey)\n            throws Exception {\n        Cipher cipher = Cipher.getInstance(ALGORITHM_RSA);\n        cipher.init(Cipher.ENCRYPT_MODE, publicKey);\n        // n\n        int modulusSize = publicKey.getModulus().bitLength() / 8;\n        // PKCS Padding11 - 11byte\n        int maxSingleSize = modulusSize - 11;\n        // maxSingleSize\n        byte[][] dataArray = splitArray(data.getBytes(), maxSingleSize);\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        // \n        for (byte[] s : dataArray) {\n            out.write(cipher.doFinal(s));\n        }\n        // Base64String\n        return Base64.getEncoder().encodeToString(out.toByteArray());\n    }\n \n    /**\n     * \n     *\n     * @param data\n     * @param privateKey\n     * @return\n     * @throws Exception\n     */\n    public static String decryptByPrivateKey(String data, RSAPrivateKey privateKey)\n            throws Exception {\n        Cipher cipher = Cipher.getInstance(ALGORITHM_RSA);\n        cipher.init(Cipher.DECRYPT_MODE, privateKey);\n        // RSA n\n        int modulusSize = privateKey.getModulus().bitLength() / 8;\n        byte[] dataBytes = data.getBytes();\n        // Base64\n        byte[] decodeData = Base64.getDecoder().decode(dataBytes);\n        // modulusSize\n        byte[][] splitArrays = splitArray(decodeData, modulusSize);\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        for(byte[] arr : splitArrays){\n            out.write(cipher.doFinal(arr));\n        }\n        return new String(out.toByteArray());\n    }\n \n    /**\n     * \n     *\n     * @param data\n     * @param len \n     * @return\n     */\n    private static byte[][] splitArray(byte[] data,int len){\n \n        int dataLen = data.length;\n        if (dataLen &lt;= len) {\n            return new byte[][]{data};\n        }\n        byte[][] result = new byte[(dataLen-1)/len + 1][];\n        int resultLen = result.length;\n        for (int i = 0; i &lt; resultLen; i++) {\n            if (i == resultLen - 1) {\n                int slen = dataLen - len * i;\n                byte[] single = new byte[slen];\n                System.arraycopy(data, len * i, single, 0, slen);\n                result[i] = single;\n                break;\n            }\n            byte[] single = new byte[len];\n            System.arraycopy(data, len * i, single, 0, len);\n            result[i] = single;\n        }\n        return result;\n    }\n \n \n}\n</code></pre>\n<p>and the client generator by cmd<code>wsimport -keep -p org.example.stack74979278 http://localhost/test?wsdl</code>, see detail a</p>\n<p><strong>the client test class</strong></p>\n<pre><code>@Log\npublic class Main {\n\n    @Test\n    public void getPublicKey(){\n        byte[] bytes = new KeyServiceImplService().getKeyServiceImplPort().getPublicKey();\n        System.out.println(bytes);\n    }\n\n    @Test\n    public void getDecode() throws Exception {\n        KeyService keyService = new KeyServiceImplService().getKeyServiceImplPort();\n        byte[] bytes = keyService.getPublicKey();\n        RSAPublicKey publicKey = RSAUtils.getPublicKey(bytes);\n        String encrypt = &quot;The message encrypt&quot;;\n        String str = keyService.getDecodeByPrivateKey(RSAUtils.encryptByPublicKey(encrypt, publicKey));\n        log.info(str);\n    }\n\n}\n</code></pre>\n<p>Now you can get the <code>public key byte</code> for android client and send server the <code>encrypted base64 string</code></p>\n"},{"tags":[],"owner":{"account_id":6597362,"reputation":385,"user_id":5096681,"accept_rate":52,"display_name":"TwoDent"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672751611,"creation_date":1672751243,"answer_id":74993774,"question_id":74979278,"body_markdown":"Well I don&#39;t know how to start this. Apparently, the way to receive an array of bytes as I was doing right now, **is the right one**.\r\n\r\nWith **ksoap2** you get the response string, and then decode the String to get your array of bytes.\r\n\r\n      private fun makeKey(encodedString : String) : Boolean {\r\n        return try {\r\n            val byteArr = Base64.decode(encodedString, Base64.DEFAULT) &lt;--- OK\r\n            val specifications = X509EncodedKeySpec(byteArr)\r\n            val factory: KeyFactory = KeyFactory.getInstance(&quot;RSA&quot;)\r\n            publicKey = factory.generatePublic(specifications)\r\n            true\r\n        } catch (e : Exception) {\r\n            e.printStackTrace()\r\n            false\r\n        }\r\n      }\r\n\r\nHow come I&#180;m so sure of this? Well, is because what was killing me had nothing to do with encoding. It was how I was initializing the **Cipher**. As I said before, with Java applications, everything was working correctly, but when using the same implementation in android applications (Java Application &lt;=&gt; Android Application), the decryption failed.\r\n\r\nHow I was initializing the Cipher was like this:\r\n\r\n    Cipher.getInstance(&quot;RSA&quot;)\r\n\r\nAccording with a comment of this [question][1] If you initialize it this way, what will happen is that both, the Android App and the Server will use their independent implementations. This is why it was always failing at the moment of decryption.\r\n\r\n**To make all things clear:**\r\n\r\nIf you are trying to do the same as me, try to initialize all Cipher with **RSA/ECB/PKCS1Padding** in both sides (Server and App)\r\n\r\n    Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;)\r\n\r\nOther things like KeyFactory and KeyPairGenerator has to be initialized only with &quot;RSA&quot;.\r\n\r\n    KeyPairGenerator.getInstance(&quot;RSA&quot;)\r\n\r\n    KeyFactory.getInstance(&quot;RSA&quot;)\r\n\r\nP.D: I NEVER encoded the array of bytes of the key to Base64 in my SOAP Service... Which makes me think that base64 encoding is done by default at some point\r\n\r\n  [1]: https://stackoverflow.com/questions/31359694/asymmetric-encryption-discrepancy-android-vs-java","title":"Receive byte array from server in ksoap2 Android client","body":"<p>Well I don't know how to start this. Apparently, the way to receive an array of bytes as I was doing right now, <strong>is the right one</strong>.</p>\n<p>With <strong>ksoap2</strong> you get the response string, and then decode the String to get your array of bytes.</p>\n<pre><code>  private fun makeKey(encodedString : String) : Boolean {\n    return try {\n        val byteArr = Base64.decode(encodedString, Base64.DEFAULT) &lt;--- OK\n        val specifications = X509EncodedKeySpec(byteArr)\n        val factory: KeyFactory = KeyFactory.getInstance(&quot;RSA&quot;)\n        publicKey = factory.generatePublic(specifications)\n        true\n    } catch (e : Exception) {\n        e.printStackTrace()\n        false\n    }\n  }\n</code></pre>\n<p>How come Im so sure of this? Well, is because what was killing me had nothing to do with encoding. It was how I was initializing the <strong>Cipher</strong>. As I said before, with Java applications, everything was working correctly, but when using the same implementation in android applications (Java Application &lt;=&gt; Android Application), the decryption failed.</p>\n<p>How I was initializing the Cipher was like this:</p>\n<pre><code>Cipher.getInstance(&quot;RSA&quot;)\n</code></pre>\n<p>According with a comment of this <a href=\"https://stackoverflow.com/questions/31359694/asymmetric-encryption-discrepancy-android-vs-java\">question</a> If you initialize it this way, what will happen is that both, the Android App and the Server will use their independent implementations. This is why it was always failing at the moment of decryption.</p>\n<p><strong>To make all things clear:</strong></p>\n<p>If you are trying to do the same as me, try to initialize all Cipher with <strong>RSA/ECB/PKCS1Padding</strong> in both sides (Server and App)</p>\n<pre><code>Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;)\n</code></pre>\n<p>Other things like KeyFactory and KeyPairGenerator has to be initialized only with &quot;RSA&quot;.</p>\n<pre><code>KeyPairGenerator.getInstance(&quot;RSA&quot;)\n\nKeyFactory.getInstance(&quot;RSA&quot;)\n</code></pre>\n<p>P.D: I NEVER encoded the array of bytes of the key to Base64 in my SOAP Service... Which makes me think that base64 encoding is done by default at some point</p>\n"}],"owner":{"account_id":6597362,"reputation":385,"user_id":5096681,"accept_rate":52,"display_name":"TwoDent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74993774,"answer_count":2,"score":1,"last_activity_date":1672751611,"creation_date":1672638022,"question_id":74979278,"body_markdown":"Good day.\r\n\r\nI&#39;m trying to implement RSA encryption between server and Android app. My goal is:\r\n\r\n1. Share the public key with the app.\r\n2. The application performs encryption and sends the encrypted text to the server.\r\n3. The server decrypts the text with the private key.\r\n\r\nBefore the Android app, I did the same steps but with a Java Application, and it worked like a charm. But the thing is how the client was made in that application... On the server side, I did a Soap web service that returns the array of bytes of the public key:\r\n\r\n    @WebMethod(operationName = &quot;getKey&quot;)\r\n\tpublic byte[] getPublicKey() {\r\n\t\ttry {\r\n\t\t\t// Message Context\r\n\t\t\tMessageContext mctx = wsctx.getMessageContext();\r\n\t\t\t// Getting parameter services\r\n\t\t\tParameterServices params = ParameterServices.NewParameterServices(getHttpServletRequestFromMsgContext(mctx), &quot;Dumb Payload&quot;);\r\n\t\t\t// Initializing KEYGEN Object\r\n\t\t\tinitKeyGen(params);\r\n\t\t\t// Checking if there are no keys created\r\n\t\t\tKEYGEN.updateKeys();\r\n\t\t\t// Creating and sending public key\r\n\t\t\treturn KEYGEN.generatePublicKey();\r\n\t\t} catch (Throwable e) {\r\n\t\t\tLOGGER.error(&quot;Exception in KeyService&quot;, e);\r\n\t\t\treturn new byte[0];\r\n\t\t}\r\n\t}\r\n\r\nIn the Java Application, I created the client Interface with javax.jws like this:\r\n\r\n    @WebService(targetNamespace = &quot;http://my.targetname.value/&quot;)\r\n    @SOAPBinding(style = SOAPBinding.Style.RPC)\r\n    public interface KeyService {\r\n      @WebMethod\r\n      byte[] getPublicKey();\r\n    }\r\n\r\nAnd this is the part where I&#39;m pretty sure that is the problem. How I retrieve the array of bytes to make the public key it&#180;s something like this:\r\n\r\n    try {\r\n          URL url = new URL(WSDLURL);\r\n          QName qname = \r\n            new QName(TARGETNAMESPACE, SERVICENAME);\r\n          Service service = Service.create(url, qname);\r\n          KeyService keyserv = service.&lt;KeyService&gt;getPort(KeyService.class);\r\n          byte[] key = keyserv.getPublicKey();\r\n          X509EncodedKeySpec spec = new X509EncodedKeySpec(key);\r\n          KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\r\n          publicKey = kf.generatePublic(spec);\r\n          return true;\r\n        } catch (MalformedURLException|java.security.NoSuchAlgorithmException|java.security.spec.InvalidKeySpecException e) {\r\n          e.printStackTrace();\r\n          return false;\r\n        } \r\n\r\nThis line:\r\n\r\n&gt; byte[] key = keyserv.getPublicKey();\r\n\r\nI&#39;m not doing anything with the bytes, I&#39;m just fetching it and done, whatever is throwing the method **java.security.Key.getEncoded()** from the server.\r\n\r\n**ANDROID KOTLIN VERSION**\r\n\r\nFirst of all, I tried to import JAXB to android, and I died during the attempt. Later I found the android library **ksoap2** from this [question][1]. The implementation&#39;s almost the same, also the dependencies (**ksoap2-android-2.5.2**, **kxml2-2.2.1**...)\r\n\r\n    class KeyServiceKSoap {\r\n    \r\n        val NAMESPACE = &quot;http://my.targetname.value/&quot;\r\n        val URL = &quot;http://192.168.0.11:8080/RSATest/keyService?wsdl&quot;\r\n        val METHOD_NAME = &quot;obtainKey&quot;\r\n        val SOAP_ACTION = &quot;http://my.targetname.value/RSATest/obtainKeyRequest&quot;\r\n    \r\n        private var thread: Thread? = null\r\n    \r\n        fun fetchByteArray(getKey : MutableLiveData&lt;String&gt;) {\r\n            thread = object : Thread() {\r\n                override fun run() {\r\n                    try {\r\n                        Log.d(&quot;KeyService&quot;, &quot;Starting...&quot;)\r\n                        val request = SoapObject(NAMESPACE, METHOD_NAME)\r\n                        val envelope = SoapSerializationEnvelope(\r\n                            SoapEnvelope.VER12\r\n                        )\r\n                        envelope.env = &quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\n                        envelope.setOutputSoapObject(request)\r\n                        envelope.headerOut = Array(1) { buildAuthHeaders() }\r\n                        val androidHttpTransport = HttpTransportSE(\r\n                            URL,\r\n                            30000\r\n                        )\r\n                        androidHttpTransport.call(SOAP_ACTION, envelope)\r\n                        val objectResult: SoapObject = envelope.bodyIn as SoapObject\r\n                        getKey.postValue(objectResult.getProperty(&quot;return&quot;).toString())\r\n                    } catch (sp: SoapFault) {\r\n                        sp.printStackTrace()\r\n                        getKey.postValue(&quot;FAILURE&quot;)\r\n                    } catch (e: Exception) {\r\n                        e.printStackTrace()\r\n                        getKey.postValue(&quot;FAILURE&quot;)\r\n                    }\r\n                }\r\n            }\r\n            thread!!.start()\r\n        }\r\n    \r\n        private fun buildAuthHeaders() : Element {\r\n            val authorization = Element().createElement(NAMESPACE, &quot;Authorization&quot;)\r\n            authorization.addChild(Node.TEXT, &quot;BEARER&quot;)\r\n            return authorization\r\n        }\r\n    }\r\n\r\n**THE PROBLEM**\r\n\r\nMy problem here is that the response I&#39;m getting it as a String, as you can see in this line:\r\n\r\n&gt; objectResult.getProperty(&quot;return&quot;).toString()\r\n\r\nIf you check the Java Application client, I&#39;m getting the array value directly, and not as a String. The issue here is that I don&#39;t know what kind of encoding is doing the method **java.security.Key.getEncoded()**. I mean, If I know for example that this method is returning a Base64 encoded byte array, in the android application I just need to decode like this and done:\r\n\r\n    private fun makeKey(encodedString : String) : Boolean {\r\n        return try {\r\n            val byteArr = Base64.decode(encodedString, Base64.DEFAULT);\r\n            val specifications = X509EncodedKeySpec(byteArr)\r\n            val factory: KeyFactory = KeyFactory.getInstance(&quot;RSA&quot;)\r\n            publicKey = factory.generatePublic(specifications)\r\n            true\r\n        } catch (e : Exception) {\r\n            e.printStackTrace()\r\n            false\r\n        }\r\n    }\r\n\r\n**BUT OBVIOUSLY IS NOT LIKE THIS**, if I encrypt and send the encoded string to the server, and the server tries to decrypt this string, I will get **javax.crypto.BadPaddingException: Decryption error**, since the array of bytes was not encoded with Base64...\r\n\r\nIs there a way to receive the byte array in **ksoap2 Android** like the interface created in the Java Application?\r\n\r\nIf there is no choice and I have to decode the String (to make the RSA public key in the android app)... what would be the right way to do it?\r\n\r\n  [1]: https://stackoverflow.com/questions/21979805/calling-asmx-from-android/22402261#22402261","title":"Receive byte array from server in ksoap2 Android client","body":"<p>Good day.</p>\n<p>I'm trying to implement RSA encryption between server and Android app. My goal is:</p>\n<ol>\n<li>Share the public key with the app.</li>\n<li>The application performs encryption and sends the encrypted text to the server.</li>\n<li>The server decrypts the text with the private key.</li>\n</ol>\n<p>Before the Android app, I did the same steps but with a Java Application, and it worked like a charm. But the thing is how the client was made in that application... On the server side, I did a Soap web service that returns the array of bytes of the public key:</p>\n<pre><code>@WebMethod(operationName = &quot;getKey&quot;)\npublic byte[] getPublicKey() {\n    try {\n        // Message Context\n        MessageContext mctx = wsctx.getMessageContext();\n        // Getting parameter services\n        ParameterServices params = ParameterServices.NewParameterServices(getHttpServletRequestFromMsgContext(mctx), &quot;Dumb Payload&quot;);\n        // Initializing KEYGEN Object\n        initKeyGen(params);\n        // Checking if there are no keys created\n        KEYGEN.updateKeys();\n        // Creating and sending public key\n        return KEYGEN.generatePublicKey();\n    } catch (Throwable e) {\n        LOGGER.error(&quot;Exception in KeyService&quot;, e);\n        return new byte[0];\n    }\n}\n</code></pre>\n<p>In the Java Application, I created the client Interface with javax.jws like this:</p>\n<pre><code>@WebService(targetNamespace = &quot;http://my.targetname.value/&quot;)\n@SOAPBinding(style = SOAPBinding.Style.RPC)\npublic interface KeyService {\n  @WebMethod\n  byte[] getPublicKey();\n}\n</code></pre>\n<p>And this is the part where I'm pretty sure that is the problem. How I retrieve the array of bytes to make the public key its something like this:</p>\n<pre><code>try {\n      URL url = new URL(WSDLURL);\n      QName qname = \n        new QName(TARGETNAMESPACE, SERVICENAME);\n      Service service = Service.create(url, qname);\n      KeyService keyserv = service.&lt;KeyService&gt;getPort(KeyService.class);\n      byte[] key = keyserv.getPublicKey();\n      X509EncodedKeySpec spec = new X509EncodedKeySpec(key);\n      KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\n      publicKey = kf.generatePublic(spec);\n      return true;\n    } catch (MalformedURLException|java.security.NoSuchAlgorithmException|java.security.spec.InvalidKeySpecException e) {\n      e.printStackTrace();\n      return false;\n    } \n</code></pre>\n<p>This line:</p>\n<blockquote>\n<p>byte[] key = keyserv.getPublicKey();</p>\n</blockquote>\n<p>I'm not doing anything with the bytes, I'm just fetching it and done, whatever is throwing the method <strong>java.security.Key.getEncoded()</strong> from the server.</p>\n<p><strong>ANDROID KOTLIN VERSION</strong></p>\n<p>First of all, I tried to import JAXB to android, and I died during the attempt. Later I found the android library <strong>ksoap2</strong> from this <a href=\"https://stackoverflow.com/questions/21979805/calling-asmx-from-android/22402261#22402261\">question</a>. The implementation's almost the same, also the dependencies (<strong>ksoap2-android-2.5.2</strong>, <strong>kxml2-2.2.1</strong>...)</p>\n<pre><code>class KeyServiceKSoap {\n\n    val NAMESPACE = &quot;http://my.targetname.value/&quot;\n    val URL = &quot;http://192.168.0.11:8080/RSATest/keyService?wsdl&quot;\n    val METHOD_NAME = &quot;obtainKey&quot;\n    val SOAP_ACTION = &quot;http://my.targetname.value/RSATest/obtainKeyRequest&quot;\n\n    private var thread: Thread? = null\n\n    fun fetchByteArray(getKey : MutableLiveData&lt;String&gt;) {\n        thread = object : Thread() {\n            override fun run() {\n                try {\n                    Log.d(&quot;KeyService&quot;, &quot;Starting...&quot;)\n                    val request = SoapObject(NAMESPACE, METHOD_NAME)\n                    val envelope = SoapSerializationEnvelope(\n                        SoapEnvelope.VER12\n                    )\n                    envelope.env = &quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\n                    envelope.setOutputSoapObject(request)\n                    envelope.headerOut = Array(1) { buildAuthHeaders() }\n                    val androidHttpTransport = HttpTransportSE(\n                        URL,\n                        30000\n                    )\n                    androidHttpTransport.call(SOAP_ACTION, envelope)\n                    val objectResult: SoapObject = envelope.bodyIn as SoapObject\n                    getKey.postValue(objectResult.getProperty(&quot;return&quot;).toString())\n                } catch (sp: SoapFault) {\n                    sp.printStackTrace()\n                    getKey.postValue(&quot;FAILURE&quot;)\n                } catch (e: Exception) {\n                    e.printStackTrace()\n                    getKey.postValue(&quot;FAILURE&quot;)\n                }\n            }\n        }\n        thread!!.start()\n    }\n\n    private fun buildAuthHeaders() : Element {\n        val authorization = Element().createElement(NAMESPACE, &quot;Authorization&quot;)\n        authorization.addChild(Node.TEXT, &quot;BEARER&quot;)\n        return authorization\n    }\n}\n</code></pre>\n<p><strong>THE PROBLEM</strong></p>\n<p>My problem here is that the response I'm getting it as a String, as you can see in this line:</p>\n<blockquote>\n<p>objectResult.getProperty(&quot;return&quot;).toString()</p>\n</blockquote>\n<p>If you check the Java Application client, I'm getting the array value directly, and not as a String. The issue here is that I don't know what kind of encoding is doing the method <strong>java.security.Key.getEncoded()</strong>. I mean, If I know for example that this method is returning a Base64 encoded byte array, in the android application I just need to decode like this and done:</p>\n<pre><code>private fun makeKey(encodedString : String) : Boolean {\n    return try {\n        val byteArr = Base64.decode(encodedString, Base64.DEFAULT);\n        val specifications = X509EncodedKeySpec(byteArr)\n        val factory: KeyFactory = KeyFactory.getInstance(&quot;RSA&quot;)\n        publicKey = factory.generatePublic(specifications)\n        true\n    } catch (e : Exception) {\n        e.printStackTrace()\n        false\n    }\n}\n</code></pre>\n<p><strong>BUT OBVIOUSLY IS NOT LIKE THIS</strong>, if I encrypt and send the encoded string to the server, and the server tries to decrypt this string, I will get <strong>javax.crypto.BadPaddingException: Decryption error</strong>, since the array of bytes was not encoded with Base64...</p>\n<p>Is there a way to receive the byte array in <strong>ksoap2 Android</strong> like the interface created in the Java Application?</p>\n<p>If there is no choice and I have to decode the String (to make the RSA public key in the android app)... what would be the right way to do it?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1672733769,"post_id":74990010,"comment_id":132335974,"body_markdown":"What about `\\&quot;[^\\\\s]\\&quot;` instead of `\\&quot;.*\\&quot;`?","body":"What about <code>\\&quot;[^\\\\s]\\&quot;</code> instead of <code>\\&quot;.*\\&quot;</code>?"},{"owner":{"account_id":3325662,"reputation":359,"user_id":2795805,"display_name":"Rajesh2389"},"score":0,"creation_date":1672733840,"post_id":74990010,"comment_id":132335998,"body_markdown":"one more Space can present inside the text field","body":"one more Space can present inside the text field"},{"owner":{"account_id":3325662,"reputation":359,"user_id":2795805,"display_name":"Rajesh2389"},"score":0,"creation_date":1672734046,"post_id":74990010,"comment_id":132336050,"body_markdown":"@Wiktor Stribizew, I&#39;m adding the PatternMatching tag as I&#39;m looking for certain patterns in the Line of String using Java Pattern class.","body":"@Wiktor Stribizew, I&#39;m adding the PatternMatching tag as I&#39;m looking for certain patterns in the Line of String using Java Pattern class."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1672734134,"post_id":74990010,"comment_id":132336075,"body_markdown":"My fault. I meant `\\&quot;[^\\&quot;]\\&quot;`.","body":"My fault. I meant <code>\\&quot;[^\\&quot;]\\&quot;</code>."},{"owner":{"account_id":4739783,"reputation":612575,"user_id":3832970,"display_name":"Wiktor Stribiew"},"score":1,"creation_date":1672734280,"post_id":74990010,"comment_id":132336110,"body_markdown":"Regex is what you are looking for, not pattern matching. See tag description where it is written that you should not use it if regex is what you mean.","body":"Regex is what you are looking for, not pattern matching. See tag description where it is written that you should not use it if regex is what you mean."},{"owner":{"account_id":3325662,"reputation":359,"user_id":2795805,"display_name":"Rajesh2389"},"score":0,"creation_date":1672734413,"post_id":74990010,"comment_id":132336147,"body_markdown":"dan1st but that doesn&#39;t solve the digit problem I have mentioned. If the third subfield is digit still it is flagging as invalid","body":"dan1st but that doesn&#39;t solve the digit problem I have mentioned. If the third subfield is digit still it is flagging as invalid"}],"answers":[{"tags":[],"owner":{"account_id":4739783,"reputation":612575,"user_id":3832970,"display_name":"Wiktor Stribiew"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672750940,"creation_date":1672750940,"answer_id":74993731,"question_id":74990010,"body_markdown":"You can use\r\n```none\r\n^(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+)(?:\\s(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+))*$\r\n```\r\nIf you are using it to extract lines from a multiline document:\r\n```none\r\n(?m)^(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\d+)(?:\\h(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\d+))*\\r?$\r\n```\r\nSee the [regex demo][1].\r\n\r\n*Details*:\r\n\r\n - `^` - start of a string (line, if you use `(?m)` or `Pattern.MULTILINE`)\r\n - `(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+)` - either `&quot;` + zero or more chars other than `&quot;` + `&quot;`, or one or more digits\r\n - `(?:\\s(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+))*` - zero or more sequences of \r\n   - `\\s` - a single whitespace\r\n   - `(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+)` - either `&quot;` + zero or more chars other than `&quot;` + `&quot;`, or one or more digits\r\n - `$` - end of string\r\n\r\nThe second pattern contains `\\h` instead of `\\s` to only match horizontal whitespaces, `[^\\&quot;\\n\\r]` matches any char other than `&quot;`, line feed and carriage return.\r\n\r\nIn Java:\r\n```java\r\nString pattern = &quot;^(?:\\&quot;[^\\&quot;]*\\&quot;|\\\\d+)(?:\\\\s(?:\\&quot;[^\\&quot;]*\\&quot;|\\\\d+))*$&quot;;\r\nString pattern = &quot;(?m)^(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\\\d+)(?:\\\\h(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\\\d+))*\\r?$&quot;;\r\n```\r\n\r\n  [1]: https://regex101.com/r/8CtMBZ/1","title":"Pattern Matching to find trailing spaces outside of text fields in a line","body":"<p>You can use</p>\n<pre class=\"lang-none prettyprint-override\"><code>^(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+)(?:\\s(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+))*$\n</code></pre>\n<p>If you are using it to extract lines from a multiline document:</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?m)^(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\d+)(?:\\h(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\d+))*\\r?$\n</code></pre>\n<p>See the <a href=\"https://regex101.com/r/8CtMBZ/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n<p><em>Details</em>:</p>\n<ul>\n<li><code>^</code> - start of a string (line, if you use <code>(?m)</code> or <code>Pattern.MULTILINE</code>)</li>\n<li><code>(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+)</code> - either <code>&quot;</code> + zero or more chars other than <code>&quot;</code> + <code>&quot;</code>, or one or more digits</li>\n<li><code>(?:\\s(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+))*</code> - zero or more sequences of\n<ul>\n<li><code>\\s</code> - a single whitespace</li>\n<li><code>(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+)</code> - either <code>&quot;</code> + zero or more chars other than <code>&quot;</code> + <code>&quot;</code>, or one or more digits</li>\n</ul>\n</li>\n<li><code>$</code> - end of string</li>\n</ul>\n<p>The second pattern contains <code>\\h</code> instead of <code>\\s</code> to only match horizontal whitespaces, <code>[^\\&quot;\\n\\r]</code> matches any char other than <code>&quot;</code>, line feed and carriage return.</p>\n<p>In Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String pattern = &quot;^(?:\\&quot;[^\\&quot;]*\\&quot;|\\\\d+)(?:\\\\s(?:\\&quot;[^\\&quot;]*\\&quot;|\\\\d+))*$&quot;;\nString pattern = &quot;(?m)^(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\\\d+)(?:\\\\h(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\\\d+))*\\r?$&quot;;\n</code></pre>\n"}],"owner":{"account_id":3325662,"reputation":359,"user_id":2795805,"display_name":"Rajesh2389"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74993731,"answer_count":1,"score":3,"last_activity_date":1672750940,"creation_date":1672729558,"question_id":74990010,"body_markdown":"I have to validate the lines from a text file. The line would be something like below.\r\n\r\n```&quot;Field1&quot; &quot;Field2&quot; &quot;Field3 Field_3.1 Field3.2&quot; 23 3445 &quot;Field5&quot;.```\r\n\r\nThe delimiter here is a single Space(\\\\s). If more than one space present outside of text fields, then the line should be rejected. For example,\r\n\r\n\r\n**Note :** \\\\s would be present as literal space and not as \\\\s in the line. For easy reading I mentioned space as \\\\s\r\n\r\n**Invalid:**\r\n```&quot;Field1&quot;\\\\s\\\\s&quot;Field2&quot; &quot;Field3 Field_3.1 Field3.2&quot; 23\\\\s\\\\s3445 &quot;Field5&quot;.``` //two or more spaces between &quot;Field1&quot; and &quot;Field2&quot; or numeric fields 23  3445. \\\\s would be present as literal space and not as \\\\s\r\n\r\n**Valid**\r\n```&quot;Field1\\\\s\\\\s&quot; &quot;\\\\s\\\\sField2&quot; &quot;Field3\\\\s\\\\sField_3.1\\\\s\\\\sField3.2&quot; 23 3445 &quot;Field5&quot;.``` //two or more spaces within third field &quot;Field3  Field_3.1  Field3.2&quot; or at the end/beginning of any field as in first two fields. \r\n\r\nI created a Pattern as below to validate the Spaces in between. But it&#39;s not working as expected when there&#39;re more than two Strings and a numeric  present inside a Field wrapped by Double quotes like ```&quot;Field3  Field_3.1  123&quot;```\r\n```\r\npublic class SpaceValidation\r\n{\r\n   public static void main(String ar[])\r\n   {\r\n       String spacePattern_1 = &quot;[\\&quot;^\\\\n]\\\\s{2,}?(\\&quot;.*\\&quot;)|\\\\s\\\\s\\\\d|\\\\d\\\\s\\\\s&quot;;\r\nString line1 = &quot;Field3  Field_3.1  &quot;; // valid and pattern doesn&#39;t find it as invalid - Works as expected\r\nString line2 = &quot;Field3  Field_3.1  123&quot;;//Valid and but pattern find it as invalid - Not working as expected.\r\n      Pattern pattern = Pattern.compile(spacePattern_1);\r\n      Matcher matLine1 = pattern.matcher(line1);\r\n      Matcher matLine2 = pattern.matcher(line2);\r\n      if(matLine1.find())\r\n      {\r\n        sysout(&quot;Invalid Line1&quot;);\r\n      }\r\n\r\n      if(matLine2.find())\r\n      {\r\n        sysout(&quot;Invalid Line2&quot;);\r\n      }\r\n}\r\n```\r\nI have tried another pattern given below. But due to backtracking issues reported I have to avoid the below pattern, Even this one is not working when there are more than two subfields present two or more spaces in a line. \r\n\r\n```\r\n(\\&quot;.*\\&quot;)\\\\s{2,}?(\\&quot;.*\\&quot;)|\\\\s\\\\s\\\\d|\\\\d\\\\s\\\\s\r\n\r\n // * or . shouldn&#39;t be present more than once in the same condition to prevent backtracking, hence I have to use negation of \\\\n in the above code\r\n```\r\n\r\nKindly let me know how I could resolve this using pattern for fields such as ```&quot;field3  field3.1  123&quot;```, which is a valid field. Thanks in advance.\r\n\r\n**EDIT:**\r\nAfter little bit tinkering, I narrowed down the issue to digit. The lines becomes invalid only if the third subfield is numeric (```&quot;Field 3  Field3.1  123&quot;```). For alphabets its working fine.\r\n\r\nHere in the pattern ``` \\\\s\\\\s\\\\d ``` seems to be the culprit. It&#39;s that condition that flags the third subfield as invalid(numeric subfield 123). But I need that to validate numeric fields present outside of the DoubleQuotes.","title":"Pattern Matching to find trailing spaces outside of text fields in a line","body":"<p>I have to validate the lines from a text file. The line would be something like below.</p>\n<p><code>&quot;Field1&quot; &quot;Field2&quot; &quot;Field3 Field_3.1 Field3.2&quot; 23 3445 &quot;Field5&quot;.</code></p>\n<p>The delimiter here is a single Space(\\s). If more than one space present outside of text fields, then the line should be rejected. For example,</p>\n<p><strong>Note :</strong> \\s would be present as literal space and not as \\s in the line. For easy reading I mentioned space as \\s</p>\n<p><strong>Invalid:</strong>\n<code>&quot;Field1&quot;\\\\s\\\\s&quot;Field2&quot; &quot;Field3 Field_3.1 Field3.2&quot; 23\\\\s\\\\s3445 &quot;Field5&quot;.</code> //two or more spaces between &quot;Field1&quot; and &quot;Field2&quot; or numeric fields 23  3445. \\s would be present as literal space and not as \\s</p>\n<p><strong>Valid</strong>\n<code>&quot;Field1\\\\s\\\\s&quot; &quot;\\\\s\\\\sField2&quot; &quot;Field3\\\\s\\\\sField_3.1\\\\s\\\\sField3.2&quot; 23 3445 &quot;Field5&quot;.</code> //two or more spaces within third field &quot;Field3  Field_3.1  Field3.2&quot; or at the end/beginning of any field as in first two fields.</p>\n<p>I created a Pattern as below to validate the Spaces in between. But it's not working as expected when there're more than two Strings and a numeric  present inside a Field wrapped by Double quotes like <code>&quot;Field3  Field_3.1  123&quot;</code></p>\n<pre><code>public class SpaceValidation\n{\n   public static void main(String ar[])\n   {\n       String spacePattern_1 = &quot;[\\&quot;^\\\\n]\\\\s{2,}?(\\&quot;.*\\&quot;)|\\\\s\\\\s\\\\d|\\\\d\\\\s\\\\s&quot;;\nString line1 = &quot;Field3  Field_3.1  &quot;; // valid and pattern doesn't find it as invalid - Works as expected\nString line2 = &quot;Field3  Field_3.1  123&quot;;//Valid and but pattern find it as invalid - Not working as expected.\n      Pattern pattern = Pattern.compile(spacePattern_1);\n      Matcher matLine1 = pattern.matcher(line1);\n      Matcher matLine2 = pattern.matcher(line2);\n      if(matLine1.find())\n      {\n        sysout(&quot;Invalid Line1&quot;);\n      }\n\n      if(matLine2.find())\n      {\n        sysout(&quot;Invalid Line2&quot;);\n      }\n}\n</code></pre>\n<p>I have tried another pattern given below. But due to backtracking issues reported I have to avoid the below pattern, Even this one is not working when there are more than two subfields present two or more spaces in a line.</p>\n<pre><code>(\\&quot;.*\\&quot;)\\\\s{2,}?(\\&quot;.*\\&quot;)|\\\\s\\\\s\\\\d|\\\\d\\\\s\\\\s\n\n // * or . shouldn't be present more than once in the same condition to prevent backtracking, hence I have to use negation of \\\\n in the above code\n</code></pre>\n<p>Kindly let me know how I could resolve this using pattern for fields such as <code>&quot;field3  field3.1  123&quot;</code>, which is a valid field. Thanks in advance.</p>\n<p><strong>EDIT:</strong>\nAfter little bit tinkering, I narrowed down the issue to digit. The lines becomes invalid only if the third subfield is numeric (<code>&quot;Field 3  Field3.1  123&quot;</code>). For alphabets its working fine.</p>\n<p>Here in the pattern <code>\\\\s\\\\s\\\\d</code> seems to be the culprit. It's that condition that flags the third subfield as invalid(numeric subfield 123). But I need that to validate numeric fields present outside of the DoubleQuotes.</p>\n"},{"tags":["java","debugging","intellij-idea","instrumentation","byte-buddy"],"answers":[{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672750807,"creation_date":1672750807,"answer_id":74993701,"question_id":74981954,"body_markdown":"Byte Buddy inlines advice code, meaning that your code is never executed, it only serves as a copy-paste template. You can set the `delegate` property in the enter and exit annotations to true if you wanted to invoke the advice methods instead.","title":"Breakpoint in ByteBuddy advice class with IntelliJ IDEA","body":"<p>Byte Buddy inlines advice code, meaning that your code is never executed, it only serves as a copy-paste template. You can set the <code>delegate</code> property in the enter and exit annotations to true if you wanted to invoke the advice methods instead.</p>\n"}],"owner":{"account_id":10134422,"reputation":40,"user_id":7486525,"display_name":"Meir Benayoun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":204,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74993701,"answer_count":1,"score":1,"last_activity_date":1672750807,"creation_date":1672659557,"question_id":74981954,"body_markdown":"I am looking for a way to debug an advice class within IntelliJ.\r\n\r\nIn the following code sample, ByteBuddy is replacing the constructor of `FileInputStream`.\r\nThe method `FileInputStreamCtorString.onEnter` is being called as expected, right before the call to the constructor.\r\nHowever, there is a problem during the execution of the `onEnter` method, apparently related to calling some static method and setting static field.\r\n\r\nI would like to put a breakpoint inside the `onEnter` method for further investigation.\r\nHow should I configure IntelliJ to make the breakpoint stop as expected?\r\n\r\n\r\n```\r\npackage com.example.javaagent.instrumentation;\r\n\r\nimport net.bytebuddy.agent.ByteBuddyAgent;\r\nimport net.bytebuddy.agent.builder.AgentBuilder;\r\nimport net.bytebuddy.asm.Advice;\r\nimport net.bytebuddy.description.type.TypeDescription;\r\nimport net.bytebuddy.matcher.ElementMatcher;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.lang.instrument.Instrumentation;\r\nimport java.util.*;\r\nimport java.util.logging.Logger;\r\n\r\nimport static java.util.logging.Level.FINE;\r\nimport static net.bytebuddy.matcher.ElementMatchers.*;\r\n\r\n\r\n\r\npublic class FileInputStreamConstructorInstrumentationTests2 {\r\n\r\n    @Test\r\n    public void testByteBuddyfileInputStreamConstructor() {\r\n        ByteBuddyAgent.install();\r\n\r\n        AgentBuilder.Identified.Extendable extendableAgentBuilder = new AgentBuilder.Default()\r\n                .with(AgentBuilder.RedefinitionStrategy.RETRANSFORMATION)\r\n                .with(AgentBuilder.RedefinitionStrategy.Listener.StreamWriting.toSystemError())\r\n                .with(AgentBuilder.Listener.StreamWriting.toSystemError().withTransformationsOnly())\r\n                .with(AgentBuilder.InstallationListener.StreamWriting.toSystemError())\r\n                .ignore(none())\r\n                .type(named(&quot;java.io.FileInputStream&quot;))\r\n                .transform(new AgentBuilder.Transformer.ForAdvice());\r\n\r\n        extendableAgentBuilder = extendableAgentBuilder.transform(\r\n                new AgentBuilder.Transformer.ForAdvice()\r\n                        .include(Thread.currentThread().getContextClassLoader())\r\n                        .advice(\r\n                                isConstructor().and(takesArguments(1)).and(takesArgument(0, String.class)),\r\n                                this.getClass().getName() + &quot;$FileInputStreamCtorString&quot;));\r\n\r\n        extendableAgentBuilder.installOnByteBuddyAgent();\r\n\r\n        String filename = &quot;example.txt&quot;;\r\n        createFile(filename);\r\n        try {\r\n            FileInputStream inputStream = new FileInputStream(filename);\r\n            int data = inputStream.read();\r\n            while (data != -1) {\r\n                System.out.print((char) data);\r\n                data = inputStream.read();\r\n            }\r\n            inputStream.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        deleteFile(filename);\r\n    }\r\n\r\n    public static class FileInputStreamCtorString {\r\n        public static boolean iveBeenHere = false;\r\n\r\n        @Advice.OnMethodEnter(suppress = Throwable.class)\r\n        public static void onEnter(@Advice.Argument(0) String name) {\r\n            System.out.println(&quot;FileInputStreamCtorString: entered with param &quot;+ name);\r\n            System.out.println(&quot;FileInputStreamCtorString: second log line&quot;);\r\n            JustPrint.sayHello();\r\n            System.out.println(&quot;FileInputStreamCtorString: after calling static method&quot;);\r\n            iveBeenHere = true;\r\n            System.out.println(&quot;FileInputStreamCtorString: after setting static field&quot;);\r\n        }\r\n    }\r\n\r\n    public static class JustPrint{\r\n        public static void sayHello(){\r\n            System.out.println(&quot;Did I say &#39;hello&#39;?&quot;);\r\n        }\r\n    }\r\n\r\n    private static void deleteFile(String filename) {\r\n        File file = new File(filename);\r\n        // Check if the file exists\r\n        if (file.exists()) {\r\n            // If the file exists, delete it\r\n            if (file.delete()) {\r\n                System.out.println(&quot;File deleted successfully&quot;);\r\n            } else {\r\n                System.out.println(&quot;Failed to delete file&quot;);\r\n            }\r\n        } else {\r\n            System.out.println(&quot;File does not exist&quot;);\r\n        }\r\n    }\r\n\r\n    private static void createFile(String filename) {\r\n        File file = new File(filename);\r\n        // Check if the file already exists\r\n        if (!file.exists()) {\r\n            // If the file does not exist, create a new file\r\n            try {\r\n                file.createNewFile();\r\n                System.out.println(&quot;File created successfully&quot;);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        } else {\r\n            System.out.println(&quot;File already exists&quot;);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\nWhen running the test `testByteBuddyfileInputStreamConstructor`, I get the following output:\r\n\r\n```\r\n[Byte Buddy] BEFORE_INSTALL net.bytebuddy.agent.builder.AgentBuilder$Default$ExecutingTransformer$ByteBuddy$ModuleSupport@f9879ac on sun.instrument.InstrumentationImpl@37f21974\r\n[Byte Buddy] REDEFINE BATCH #0 [1 of 1 type(s)]\r\n[Byte Buddy] TRANSFORM java.io.FileInputStream [null, module java.base, Thread[Test worker,5,main], loaded=true]\r\n[Byte Buddy] REDEFINE COMPLETE 1 batch(es) containing 1 types [0 failed batch(es)]\r\n[Byte Buddy] INSTALL net.bytebuddy.agent.builder.AgentBuilder$Default$ExecutingTransformer$ByteBuddy$ModuleSupport@f9879ac on sun.instrument.InstrumentationImpl@37f21974\r\nFile created successfully\r\nFileInputStreamCtorString: entered with param example.txt\r\nFileInputStreamCtorString: second log line\r\nFile deleted successfully\r\n```\r\n\r\nSo, I&#39;m sure that the following source line is reached and I would like the debugger to stop there:\r\n\r\n```\r\nSystem.out.println(&quot;FileInputStreamCtorString: entered with param &quot;+ name);\r\n\r\n```\r\n","title":"Breakpoint in ByteBuddy advice class with IntelliJ IDEA","body":"<p>I am looking for a way to debug an advice class within IntelliJ.</p>\n<p>In the following code sample, ByteBuddy is replacing the constructor of <code>FileInputStream</code>.\nThe method <code>FileInputStreamCtorString.onEnter</code> is being called as expected, right before the call to the constructor.\nHowever, there is a problem during the execution of the <code>onEnter</code> method, apparently related to calling some static method and setting static field.</p>\n<p>I would like to put a breakpoint inside the <code>onEnter</code> method for further investigation.\nHow should I configure IntelliJ to make the breakpoint stop as expected?</p>\n<pre><code>package com.example.javaagent.instrumentation;\n\nimport net.bytebuddy.agent.ByteBuddyAgent;\nimport net.bytebuddy.agent.builder.AgentBuilder;\nimport net.bytebuddy.asm.Advice;\nimport net.bytebuddy.description.type.TypeDescription;\nimport net.bytebuddy.matcher.ElementMatcher;\nimport org.junit.jupiter.api.Test;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.lang.instrument.Instrumentation;\nimport java.util.*;\nimport java.util.logging.Logger;\n\nimport static java.util.logging.Level.FINE;\nimport static net.bytebuddy.matcher.ElementMatchers.*;\n\n\n\npublic class FileInputStreamConstructorInstrumentationTests2 {\n\n    @Test\n    public void testByteBuddyfileInputStreamConstructor() {\n        ByteBuddyAgent.install();\n\n        AgentBuilder.Identified.Extendable extendableAgentBuilder = new AgentBuilder.Default()\n                .with(AgentBuilder.RedefinitionStrategy.RETRANSFORMATION)\n                .with(AgentBuilder.RedefinitionStrategy.Listener.StreamWriting.toSystemError())\n                .with(AgentBuilder.Listener.StreamWriting.toSystemError().withTransformationsOnly())\n                .with(AgentBuilder.InstallationListener.StreamWriting.toSystemError())\n                .ignore(none())\n                .type(named(&quot;java.io.FileInputStream&quot;))\n                .transform(new AgentBuilder.Transformer.ForAdvice());\n\n        extendableAgentBuilder = extendableAgentBuilder.transform(\n                new AgentBuilder.Transformer.ForAdvice()\n                        .include(Thread.currentThread().getContextClassLoader())\n                        .advice(\n                                isConstructor().and(takesArguments(1)).and(takesArgument(0, String.class)),\n                                this.getClass().getName() + &quot;$FileInputStreamCtorString&quot;));\n\n        extendableAgentBuilder.installOnByteBuddyAgent();\n\n        String filename = &quot;example.txt&quot;;\n        createFile(filename);\n        try {\n            FileInputStream inputStream = new FileInputStream(filename);\n            int data = inputStream.read();\n            while (data != -1) {\n                System.out.print((char) data);\n                data = inputStream.read();\n            }\n            inputStream.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        deleteFile(filename);\n    }\n\n    public static class FileInputStreamCtorString {\n        public static boolean iveBeenHere = false;\n\n        @Advice.OnMethodEnter(suppress = Throwable.class)\n        public static void onEnter(@Advice.Argument(0) String name) {\n            System.out.println(&quot;FileInputStreamCtorString: entered with param &quot;+ name);\n            System.out.println(&quot;FileInputStreamCtorString: second log line&quot;);\n            JustPrint.sayHello();\n            System.out.println(&quot;FileInputStreamCtorString: after calling static method&quot;);\n            iveBeenHere = true;\n            System.out.println(&quot;FileInputStreamCtorString: after setting static field&quot;);\n        }\n    }\n\n    public static class JustPrint{\n        public static void sayHello(){\n            System.out.println(&quot;Did I say 'hello'?&quot;);\n        }\n    }\n\n    private static void deleteFile(String filename) {\n        File file = new File(filename);\n        // Check if the file exists\n        if (file.exists()) {\n            // If the file exists, delete it\n            if (file.delete()) {\n                System.out.println(&quot;File deleted successfully&quot;);\n            } else {\n                System.out.println(&quot;Failed to delete file&quot;);\n            }\n        } else {\n            System.out.println(&quot;File does not exist&quot;);\n        }\n    }\n\n    private static void createFile(String filename) {\n        File file = new File(filename);\n        // Check if the file already exists\n        if (!file.exists()) {\n            // If the file does not exist, create a new file\n            try {\n                file.createNewFile();\n                System.out.println(&quot;File created successfully&quot;);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        } else {\n            System.out.println(&quot;File already exists&quot;);\n        }\n    }\n}\n\n\n</code></pre>\n<p>When running the test <code>testByteBuddyfileInputStreamConstructor</code>, I get the following output:</p>\n<pre><code>[Byte Buddy] BEFORE_INSTALL net.bytebuddy.agent.builder.AgentBuilder$Default$ExecutingTransformer$ByteBuddy$ModuleSupport@f9879ac on sun.instrument.InstrumentationImpl@37f21974\n[Byte Buddy] REDEFINE BATCH #0 [1 of 1 type(s)]\n[Byte Buddy] TRANSFORM java.io.FileInputStream [null, module java.base, Thread[Test worker,5,main], loaded=true]\n[Byte Buddy] REDEFINE COMPLETE 1 batch(es) containing 1 types [0 failed batch(es)]\n[Byte Buddy] INSTALL net.bytebuddy.agent.builder.AgentBuilder$Default$ExecutingTransformer$ByteBuddy$ModuleSupport@f9879ac on sun.instrument.InstrumentationImpl@37f21974\nFile created successfully\nFileInputStreamCtorString: entered with param example.txt\nFileInputStreamCtorString: second log line\nFile deleted successfully\n</code></pre>\n<p>So, I'm sure that the following source line is reached and I would like the debugger to stop there:</p>\n<pre><code>System.out.println(&quot;FileInputStreamCtorString: entered with param &quot;+ name);\n\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9233,"page":759,"page_size":100}
