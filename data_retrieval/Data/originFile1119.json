{"items":[{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1660159001,"post_id":73311379,"comment_id":129469620,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":16266080,"reputation":56,"user_id":16564712,"display_name":"Gaya Touak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660165550,"creation_date":1660165550,"answer_id":73312712,"question_id":73311379,"body_markdown":"In your button&#39;s onClick methode : \r\n\r\n     Intent intent = new Intent(getActivity(),Activity2.class);\r\n     startActivity(intent);\r\n","title":"How do I open Activity2 from Fragment1 button? Considering Fragment1 belongs to Activity1","body":"<p>In your button's onClick methode :</p>\n<pre><code> Intent intent = new Intent(getActivity(),Activity2.class);\n startActivity(intent);\n</code></pre>\n"}],"owner":{"account_id":21822864,"reputation":1,"user_id":16118829,"display_name":"&#214;da LoV&#235;rs Ronewa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660165550,"creation_date":1660157721,"question_id":73311379,"body_markdown":"How do I open Activity2 from Fragment1 button? Considering Fragment1 belongs  to Activity1 ","title":"How do I open Activity2 from Fragment1 button? Considering Fragment1 belongs to Activity1","body":"<p>How do I open Activity2 from Fragment1 button? Considering Fragment1 belongs  to Activity1</p>\n"},{"tags":["java","groovy","rabbitmq"],"answers":[{"tags":[],"owner":{"account_id":4129849,"reputation":3184,"user_id":3388069,"display_name":"Sascha Frinken"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660165214,"creation_date":1660165214,"answer_id":73312673,"question_id":73310268,"body_markdown":"The [documentation](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/messaging/MessageHeaders.html) says:\r\n\r\n&gt; IMPORTANT: This class is immutable. Any mutating operation such as put(..), putAll(..) and others will throw UnsupportedOperationException.\r\n\r\nThe solution is to recreate the message:\r\n\r\n```groovy\r\nstatic MessagePostProcessor withDelay(Integer milliSeconds) {\r\n    return new MessagePostProcessor() {\r\n        @Override\r\n        Message postProcessMessage(Message message) {\r\n            return org.springframework.messaging.support.MessageBuilder\r\n                .fromMessage(message)\r\n                .setHeader(&quot;x-delay&quot;, milliseconds)\r\n                .build()\r\n        }\r\n    }\r\n}\r\n```","title":"How to add x-delay header on RabbitMQ message?","body":"<p>The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/messaging/MessageHeaders.html\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n<blockquote>\n<p>IMPORTANT: This class is immutable. Any mutating operation such as put(..), putAll(..) and others will throw UnsupportedOperationException.</p>\n</blockquote>\n<p>The solution is to recreate the message:</p>\n<pre><code>static MessagePostProcessor withDelay(Integer milliSeconds) {\n    return new MessagePostProcessor() {\n        @Override\n        Message postProcessMessage(Message message) {\n            return org.springframework.messaging.support.MessageBuilder\n                .fromMessage(message)\n                .setHeader(&quot;x-delay&quot;, milliseconds)\n                .build()\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2706605,"reputation":552,"user_id":2336081,"display_name":"Rafa Acioly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":354,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73312673,"answer_count":1,"score":1,"last_activity_date":1660165214,"creation_date":1660151554,"question_id":73310268,"body_markdown":"I&#39;m trying to add a header `x-delay` on my messages using a instance of `MessagePostProcessor` but it gives me an exception saying:\r\n\r\n&gt; java.lang.UnsupportedOperationException: MessageHeaders is immutable\r\n\r\n\r\n```\r\nimport org.springframework.messaging.Message\r\nimport org.springframework.messaging.core.MessagePostProcessor\r\nimport org.springframework.stereotype.Component\r\n\r\n@Component\r\nclass AmpqRoutingKeyStrategy {\r\n\r\n    private static CUSTOM_DELAY = 120000\r\n\r\n    MessagePostProcessor get() {\r\n        return withDelay(CUSTOM_DELAY)\r\n    }\r\n\r\n    static MessagePostProcessor withDelay(Integer milliSeconds) {\r\n        return new MessagePostProcessor() {\r\n            @Override\r\n            Message postProcessMessage(Message message) {\r\n                message.getHeaders().put(&#39;x-delay&#39;, milliSeconds)\r\n                return message\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe example above is used in many articles about this topic, I know that we have the option to add the `x-delay` header but how can I do it without raising this exception?","title":"How to add x-delay header on RabbitMQ message?","body":"<p>I'm trying to add a header <code>x-delay</code> on my messages using a instance of <code>MessagePostProcessor</code> but it gives me an exception saying:</p>\n<blockquote>\n<p>java.lang.UnsupportedOperationException: MessageHeaders is immutable</p>\n</blockquote>\n<pre><code>import org.springframework.messaging.Message\nimport org.springframework.messaging.core.MessagePostProcessor\nimport org.springframework.stereotype.Component\n\n@Component\nclass AmpqRoutingKeyStrategy {\n\n    private static CUSTOM_DELAY = 120000\n\n    MessagePostProcessor get() {\n        return withDelay(CUSTOM_DELAY)\n    }\n\n    static MessagePostProcessor withDelay(Integer milliSeconds) {\n        return new MessagePostProcessor() {\n            @Override\n            Message postProcessMessage(Message message) {\n                message.getHeaders().put('x-delay', milliSeconds)\n                return message\n            }\n        }\n    }\n}\n</code></pre>\n<p>The example above is used in many articles about this topic, I know that we have the option to add the <code>x-delay</code> header but how can I do it without raising this exception?</p>\n"},{"tags":["java","jersey","mdc"],"comments":[{"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1660045610,"post_id":73287960,"comment_id":129435047,"body_markdown":"Have you thought about using a Filter to populate (and clear) the MDC instead of doing it in every Request Handler mehtod? - Or it this not possible because the mdc paramter is not the same for all requests?","body":"Have you thought about using a Filter to populate (and clear) the MDC instead of doing it in every Request Handler mehtod? - Or it this not possible because the mdc paramter is not the same for all requests?"},{"owner":{"account_id":5123837,"reputation":2156,"user_id":4106624,"accept_rate":100,"display_name":"user007"},"score":0,"creation_date":1660116564,"post_id":73287960,"comment_id":129453856,"body_markdown":"@Ralph Yes, these parameters are not same for all requests.","body":"@Ralph Yes, these parameters are not same for all requests."},{"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1660219877,"post_id":73287960,"comment_id":129484291,"body_markdown":"One workarround is to have a global request interceptor / filter that add and clear MDC parameter (lets call it &quot;request-number&quot;) with an unique id. -- Then all log statments to within the exection of this request can be grouped by this MDC-parameter. - pro very easy, con - it is just an artificial ID without any meaning, you will still need to search for the log statement that write your specific request ID and the one that log some other event.","body":"One workarround is to have a global request interceptor / filter that add and clear MDC parameter (lets call it &quot;request-number&quot;) with an unique id. -- Then all log statments to within the exection of this request can be grouped by this MDC-parameter. - pro very easy, con - it is just an artificial ID without any meaning, you will still need to search for the log statement that write your specific request ID and the one that log some other event."}],"owner":{"account_id":5123837,"reputation":2156,"user_id":4106624,"accept_rate":100,"display_name":"user007"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660165016,"creation_date":1660029993,"question_id":73287960,"body_markdown":"I&#39;m building a Java back-end using Spring with Jersey, where I want to send a multipart response to the client.\r\n\r\nI have a GET call that looks something like this:\r\n\r\n    @Path(&quot;/status/{requestID}&quot;)\r\n    @GET\r\n    public Response getStatus(@PathParam(&quot;requestID&quot;) String requestId) {\r\n        MDC.put(&quot;myRequestID&quot;, requestId);\r\n        // Do some processing\r\n        return response;\r\n    }\r\n\r\nI use MDC to add request ID and other information that I need in my logs. Now the response that I create is Multipart, and since Jersey internally converts this Multipart response to HTTP response, during this processing I have certain callbacks which logs messages and I want the MDC to be populated at that time, with whatever was put in my `getStatus` call.\r\n\r\nNow, usually I would call `MDC.clear()` before returning status in my `getStatus` call. But, now that I want to wait for Jersey to complete processing, I cannot do that.\r\n\r\nIs there any callback that Jersey provides once the HTTP response processing is complete, where I can do this cleanup?","title":"Clearing MDC when HTTP response is sent by Jersey","body":"<p>I'm building a Java back-end using Spring with Jersey, where I want to send a multipart response to the client.</p>\n<p>I have a GET call that looks something like this:</p>\n<pre><code>@Path(&quot;/status/{requestID}&quot;)\n@GET\npublic Response getStatus(@PathParam(&quot;requestID&quot;) String requestId) {\n    MDC.put(&quot;myRequestID&quot;, requestId);\n    // Do some processing\n    return response;\n}\n</code></pre>\n<p>I use MDC to add request ID and other information that I need in my logs. Now the response that I create is Multipart, and since Jersey internally converts this Multipart response to HTTP response, during this processing I have certain callbacks which logs messages and I want the MDC to be populated at that time, with whatever was put in my <code>getStatus</code> call.</p>\n<p>Now, usually I would call <code>MDC.clear()</code> before returning status in my <code>getStatus</code> call. But, now that I want to wait for Jersey to complete processing, I cannot do that.</p>\n<p>Is there any callback that Jersey provides once the HTTP response processing is complete, where I can do this cleanup?</p>\n"},{"tags":["java","sorting","linked-list"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1660150738,"post_id":73310100,"comment_id":129467055,"body_markdown":"&quot;I haven&#39;t studied sorting and searching yet&quot; you should, the answer lies in those two topics :)","body":"&quot;I haven&#39;t studied sorting and searching yet&quot; you should, the answer lies in those two topics :)"},{"owner":{"account_id":9071789,"reputation":4069,"user_id":6754706,"accept_rate":38,"display_name":"RAZ_Muh_Taz"},"score":1,"creation_date":1660150823,"post_id":73310100,"comment_id":129467082,"body_markdown":"it can depend on what you are doing more off and how often.","body":"it can depend on what you are doing more off and how often."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1660150964,"post_id":73310100,"comment_id":129467138,"body_markdown":"By the way take a look [here](https://stackoverflow.com/a/28164763/133203).","body":"By the way take a look <a href=\"https://stackoverflow.com/a/28164763/133203\">here</a>."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1660151807,"post_id":73310100,"comment_id":129467393,"body_markdown":"If you really care about performance, then you probably shouldn&#39;t be using a LinkedList in the first place.  But note that adding elements to the middle of a LinkedList is itself pretty expensive.","body":"If you really care about performance, then you probably shouldn&#39;t be using a LinkedList in the first place.  But note that adding elements to the middle of a LinkedList is itself pretty expensive."}],"answers":[{"tags":[],"owner":{"account_id":25719055,"reputation":56,"user_id":19476291,"display_name":"Hossein Hedayati"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660156132,"creation_date":1660156132,"answer_id":73311093,"question_id":73310100,"body_markdown":"In general, using a linked list has many difficulties and is very expensive . \r\n\r\ni)In the usual case, if you want to add values to the sorted linked list, you must go through the following steps:\r\n\r\n1) If Linked list is empty then make the node as head and return it.\r\n2) If the value of the node to be inserted is smaller than the value of the head node, then insert the node at the start and make it head.\r\n3) In a loop, find the appropriate node after \r\n   which the input node is to be inserted. \r\n   To find the appropriate node start from the head, \r\n   keep moving until you reach a node GN who&#39;s value is greater than \r\n   the input node. The node just before GN is the appropriate node .\r\n4) Insert the node after the appropriate node found in step 3.\r\nthe Time Complexity in this case is O(n). ( for each element ) \r\nbut don&#39;t forget to sort the linked list before adding other elements in a sorted manner ; This means you have to pay extra cost to sort the linked list.\r\n\r\nii ) but if you want to add elements to the end of the linked list and then sort them the situation depends on the way of sorting ! for example you can use merge sort that has O(n*log n) time complexity ! and even you can use insertion sort with O(n^2) time complexity .\r\nnote : How to sort is a separate issue .\r\n\r\nAs you have already noticed! It is not easy to talk about which method is faster and it depends on the conditions of the problem, such as the number of elements of the link list and the elements needed to be added, or whether the cost of initial sorting is considered or not!\r\n","title":"Given a LinkedList, is it better to add elements to the end and then sort, or add the elements in a sorted manner directly?","body":"<p>In general, using a linked list has many difficulties and is very expensive .</p>\n<p>i)In the usual case, if you want to add values to the sorted linked list, you must go through the following steps:</p>\n<ol>\n<li>If Linked list is empty then make the node as head and return it.</li>\n<li>If the value of the node to be inserted is smaller than the value of the head node, then insert the node at the start and make it head.</li>\n<li>In a loop, find the appropriate node after\nwhich the input node is to be inserted.\nTo find the appropriate node start from the head,\nkeep moving until you reach a node GN who's value is greater than\nthe input node. The node just before GN is the appropriate node .</li>\n<li>Insert the node after the appropriate node found in step 3.\nthe Time Complexity in this case is O(n). ( for each element )\nbut don't forget to sort the linked list before adding other elements in a sorted manner ; This means you have to pay extra cost to sort the linked list.</li>\n</ol>\n<p>ii ) but if you want to add elements to the end of the linked list and then sort them the situation depends on the way of sorting ! for example you can use merge sort that has O(n*log n) time complexity ! and even you can use insertion sort with O(n^2) time complexity .\nnote : How to sort is a separate issue .</p>\n<p>As you have already noticed! It is not easy to talk about which method is faster and it depends on the conditions of the problem, such as the number of elements of the link list and the elements needed to be added, or whether the cost of initial sorting is considered or not!</p>\n"},{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660164702,"creation_date":1660164702,"answer_id":73312591,"question_id":73310100,"body_markdown":"You have presented two options:\r\n\r\n1. Keep the linked list sorted by inserting each new node at its sorted location.\r\n\r\n2. Insert each new node at the end (or start) of the linked list and when all nodes have been added, sort the linked list\r\n\r\nThe worst case time complexity for the first option occurs when the list has each time to be traversed completely to find the position where a new node is to be inserted. In that case the time complexity is O(1+2+3+...+n) = O(n&#178;)\r\n\r\nThe worst time complexity for the second option is O(n) for inserting *n* elements and then O(nlogn) for sorting the linked list with a good sorting algorithm. So in total the sorting algorithm determines the overall worst time complexity, i.e. O(nlogn).\r\n\r\nSo the second option has the better time complexity.\r\n\r\nMerge sort has a complexity of O(nlogn) and is suitable for linked list.\r\n\r\nIf your data has a limited range, you can use radix sort and achieve O(kn) complexity, where *k* is log(range size).\r\n\r\nIn practice it is better to insert elements in a vector (dynamic array), then sort the array, and finally turn the array into a list. This will almost certainly give better running times.","title":"Given a LinkedList, is it better to add elements to the end and then sort, or add the elements in a sorted manner directly?","body":"<p>You have presented two options:</p>\n<ol>\n<li><p>Keep the linked list sorted by inserting each new node at its sorted location.</p>\n</li>\n<li><p>Insert each new node at the end (or start) of the linked list and when all nodes have been added, sort the linked list</p>\n</li>\n</ol>\n<p>The worst case time complexity for the first option occurs when the list has each time to be traversed completely to find the position where a new node is to be inserted. In that case the time complexity is O(1+2+3+...+n) = O(n²)</p>\n<p>The worst time complexity for the second option is O(n) for inserting <em>n</em> elements and then O(nlogn) for sorting the linked list with a good sorting algorithm. So in total the sorting algorithm determines the overall worst time complexity, i.e. O(nlogn).</p>\n<p>So the second option has the better time complexity.</p>\n<p>Merge sort has a complexity of O(nlogn) and is suitable for linked list.</p>\n<p>If your data has a limited range, you can use radix sort and achieve O(kn) complexity, where <em>k</em> is log(range size).</p>\n<p>In practice it is better to insert elements in a vector (dynamic array), then sort the array, and finally turn the array into a list. This will almost certainly give better running times.</p>\n"}],"owner":{"account_id":22940649,"reputation":1,"user_id":19737240,"display_name":"Alex Albors"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1660164702,"creation_date":1660150637,"question_id":73310100,"body_markdown":"Which would be faster when using a LinkedList? I haven&#39;t studied sorting and searching yet. I was thinking adding them directly in a sorted manner would be faster, as manipulating the nodes and pointers afterward intuitively seems to be very expensive. Thanks.","title":"Given a LinkedList, is it better to add elements to the end and then sort, or add the elements in a sorted manner directly?","body":"<p>Which would be faster when using a LinkedList? I haven't studied sorting and searching yet. I was thinking adding them directly in a sorted manner would be faster, as manipulating the nodes and pointers afterward intuitively seems to be very expensive. Thanks.</p>\n"},{"tags":["java","arrays","matrix","split","sub-array"],"answers":[{"tags":[],"owner":{"account_id":8396800,"reputation":3955,"user_id":6303579,"display_name":"QuickSilver"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1588192248,"creation_date":1588192248,"answer_id":61511123,"question_id":61510935,"body_markdown":"Better to create a `Map&lt;Integer, List&lt;String&gt;&gt;` where key is length of the string and value is the list of similair sized strings.\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class SimpleArray {\r\n\r\n    public static void main(String[] args) {\r\n        String[] array = new String[]{&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;ab&quot;,&quot;cd&quot;,&quot;abc&quot;,&quot;abcde&quot;,&quot;fghij&quot;,&quot;klmno&quot;};\r\n\r\n        Map&lt;Integer, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; array.length; i++) {\r\n            List&lt; String&gt; temp = map.getOrDefault(array[i].length(),new ArrayList&lt;&gt;());\r\n            temp.add(array[i]);\r\n            map.put(array[i].length(),temp);\r\n        }\r\n        System.out.println(map);\r\n\r\n    }\r\n}\r\n\r\n```","title":"Java: Split array of strings sorted by string length into several arrays by string length","body":"<p>Better to create a <code>Map&lt;Integer, List&lt;String&gt;&gt;</code> where key is length of the string and value is the list of similair sized strings.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class SimpleArray {\n\n    public static void main(String[] args) {\n        String[] array = new String[]{\"a\",\"b\",\"c\",\"ab\",\"cd\",\"abc\",\"abcde\",\"fghij\",\"klmno\"};\n\n        Map&lt;Integer, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n\n        for (int i = 0; i &lt; array.length; i++) {\n            List&lt; String&gt; temp = map.getOrDefault(array[i].length(),new ArrayList&lt;&gt;());\n            temp.add(array[i]);\n            map.put(array[i].length(),temp);\n        }\n        System.out.println(map);\n\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11502933,"reputation":5909,"user_id":8430155,"display_name":"Harshal Parekh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588193425,"creation_date":1588193425,"answer_id":61511418,"question_id":61510935,"body_markdown":"For quick access, you can also use a list of lists.\r\n\r\n    String[] array = new String[]{&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;ab&quot;,&quot;cd&quot;,&quot;abc&quot;,&quot;abcde&quot;,&quot;fghij&quot;,&quot;klmno&quot;};\r\n    List&lt;List&lt;String&gt;&gt; lists = new LinkedList&lt;&gt;();\r\n\r\n    // you will have to update this number based on the maximum length of string you are expecting\r\n    for (int i = 0; i &lt; 6; i++) {\r\n        lists.add(new LinkedList&lt;&gt;());\r\n    }\r\n\r\n    for (String a: array) {\r\n        lists.get(a.length()).add(a);\r\n    }\r\n\r\n    System.out.println(lists);\r\n\r\nHere, the first list is for the size and the inner list is for the actual strings.\r\n\r\nNote: this is only for smaller strings. If you have strings of length 1, 2, 100. You should probably go with HashMaps because you will have a lot of memory wasted in this approach.\r\n\r\n----------\r\n\r\nUsing Java8:\r\n\r\n    String[] array = new String[]{&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;ab&quot;,&quot;cd&quot;,&quot;abc&quot;,&quot;abcde&quot;,&quot;fghij&quot;,&quot;klmno&quot;};\r\n\r\n    List&lt;List&lt;String&gt;&gt; lists = IntStream.range(0, 6).&lt;List&lt;String&gt;&gt;mapToObj(\r\n        i -&gt; new LinkedList&lt;&gt;()).collect(Collectors.toCollection(LinkedList::new));\r\n\r\n    Arrays.stream(array).forEach(a -&gt; lists.get(a.length()).add(a));\r\n\r\n    System.out.println(lists);","title":"Java: Split array of strings sorted by string length into several arrays by string length","body":"<p>For quick access, you can also use a list of lists.</p>\n\n<pre><code>String[] array = new String[]{\"a\",\"b\",\"c\",\"ab\",\"cd\",\"abc\",\"abcde\",\"fghij\",\"klmno\"};\nList&lt;List&lt;String&gt;&gt; lists = new LinkedList&lt;&gt;();\n\n// you will have to update this number based on the maximum length of string you are expecting\nfor (int i = 0; i &lt; 6; i++) {\n    lists.add(new LinkedList&lt;&gt;());\n}\n\nfor (String a: array) {\n    lists.get(a.length()).add(a);\n}\n\nSystem.out.println(lists);\n</code></pre>\n\n<p>Here, the first list is for the size and the inner list is for the actual strings.</p>\n\n<p>Note: this is only for smaller strings. If you have strings of length 1, 2, 100. You should probably go with HashMaps because you will have a lot of memory wasted in this approach.</p>\n\n<hr>\n\n<p>Using Java8:</p>\n\n<pre><code>String[] array = new String[]{\"a\",\"b\",\"c\",\"ab\",\"cd\",\"abc\",\"abcde\",\"fghij\",\"klmno\"};\n\nList&lt;List&lt;String&gt;&gt; lists = IntStream.range(0, 6).&lt;List&lt;String&gt;&gt;mapToObj(\n    i -&gt; new LinkedList&lt;&gt;()).collect(Collectors.toCollection(LinkedList::new));\n\nArrays.stream(array).forEach(a -&gt; lists.get(a.length()).add(a));\n\nSystem.out.println(lists);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17211024,"reputation":366,"user_id":12460366,"display_name":"Alberto Ursino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588194560,"creation_date":1588194560,"answer_id":61511740,"question_id":61510935,"body_markdown":"My **solution** is the **same as @QuickSilver&#39;s only that much less clear**.\r\nNow that I&#39;m here, I place mine as well because I have dedicated time to it, but I repeat, I recommend following his.\r\n\r\nCODE\r\n-\r\n\r\n    public static void main(String[] args) {\r\n            String[] array = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;ab&quot;, &quot;cd&quot;, &quot;abc&quot;, &quot;abcde&quot;, &quot;fghij&quot;, &quot;klmdfwetdfgdfgdfgdg&quot;};\r\n            HashMap&lt;Integer, List&lt;String&gt;&gt; hashMap = new HashMap&lt;&gt;();\r\n            int strLength = array[0].length();\r\n    \r\n            for (String s : array) {\r\n                while (true) {\r\n                    if (s.length() == strLength) {\r\n                        if (hashMap.get(strLength) != null) {\r\n                            List&lt;String&gt; temp = hashMap.get(strLength);\r\n                            temp.add(s);\r\n                            hashMap.put(strLength, temp);\r\n                        } else {\r\n                            List&lt;String&gt; strings = new LinkedList&lt;&gt;();\r\n                            strings.add(s);\r\n                            hashMap.put(strLength, strings);\r\n                        }\r\n                        break;\r\n                    } else\r\n                        strLength = s.length();\r\n                }\r\n            }\r\n            System.out.println(hashMap);\r\n        }","title":"Java: Split array of strings sorted by string length into several arrays by string length","body":"<p>My <strong>solution</strong> is the <strong>same as @QuickSilver's only that much less clear</strong>.\nNow that I'm here, I place mine as well because I have dedicated time to it, but I repeat, I recommend following his.</p>\n\n<h2>CODE</h2>\n\n<pre><code>public static void main(String[] args) {\n        String[] array = {\"a\", \"b\", \"c\", \"ab\", \"cd\", \"abc\", \"abcde\", \"fghij\", \"klmdfwetdfgdfgdfgdg\"};\n        HashMap&lt;Integer, List&lt;String&gt;&gt; hashMap = new HashMap&lt;&gt;();\n        int strLength = array[0].length();\n\n        for (String s : array) {\n            while (true) {\n                if (s.length() == strLength) {\n                    if (hashMap.get(strLength) != null) {\n                        List&lt;String&gt; temp = hashMap.get(strLength);\n                        temp.add(s);\n                        hashMap.put(strLength, temp);\n                    } else {\n                        List&lt;String&gt; strings = new LinkedList&lt;&gt;();\n                        strings.add(s);\n                        hashMap.put(strLength, strings);\n                    }\n                    break;\n                } else\n                    strLength = s.length();\n            }\n        }\n        System.out.println(hashMap);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588198760,"creation_date":1588195765,"answer_id":61512029,"question_id":61510935,"body_markdown":"Use [System:arraycopy][1]\r\n===\r\n\r\n**Solution using arrays only:**\r\n\r\n    import java.util.Arrays;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString[][] arraysList = new String[1][];\r\n    \t\tString[] array = { &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;ab&quot;, &quot;cd&quot;, &quot;abc&quot;, &quot;abcde&quot;, &quot;fghij&quot;, &quot;klmno&quot; };\r\n    \t\tint srcPos, row = 0;\r\n    \t\tfor (int i = 0; i &lt; array.length; i++) {\r\n    \t\t\tsrcPos = i;\r\n    \t\t\twhile (i &lt; array.length - 1 &amp;&amp; array[i].length() == array[i + 1].length()) {\r\n    \t\t\t\ti++;\r\n    \t\t\t}\r\n    \t\t\t// Create a new array to store the current set of strings of equal length\r\n    \t\t\tString[] subarray = new String[i - srcPos + 1];\r\n    \r\n    \t\t\t// Copy the current set of strings of equal length from array to subarray[]\r\n    \t\t\tSystem.arraycopy(array, srcPos, subarray, 0, subarray.length);\r\n    \r\n    \t\t\t// Assign subarray[] to arraysList[][]\r\n    \t\t\tarraysList[row++] = subarray;\r\n    \r\n    \t\t\t// Copy arraysList[][] to temp [][], increase size of arraysList[][] and restore\r\n    \t\t\t// arrays from temp [][] to arraysList[][]\r\n    \t\t\tString[][] temp = arraysList;\r\n    \t\t\tarraysList = new String[row + 1][subarray.length];\r\n    \t\t\tfor (int j = 0; j &lt; temp.length; j++) {\r\n    \t\t\t\tarraysList[j] = temp[j];\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\t// Drop the last row which was created to store a new subarray but there was no\r\n    \t\t// more subarrays to store and therefore it is empty.\r\n    \t\tarraysList = Arrays.copyOf(arraysList, arraysList.length - 1);\r\n    \r\n    \t\t// Display the subarrays\r\n    \t\tfor (String[] arr : arraysList) {\r\n    \t\t\tSystem.out.println(Arrays.toString(arr));\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    [a, b, c]\r\n    [ab, cd]\r\n    [abc]\r\n    [abcde, fghij, klmno]\r\n\r\n**Solution using `List` and array:**\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tList&lt;String[]&gt; list = new ArrayList&lt;String[]&gt;();\r\n    \t\tString[] array = { &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;ab&quot;, &quot;cd&quot;, &quot;abc&quot;, &quot;abcde&quot;, &quot;fghij&quot;, &quot;klmno&quot; };\r\n    \t\tint srcPos;\r\n    \t\tfor (int i = 0; i &lt; array.length; i++) {\r\n    \t\t\tsrcPos = i;\r\n    \t\t\twhile (i &lt; array.length - 1 &amp;&amp; array[i].length() == array[i + 1].length()) {\r\n    \t\t\t\ti++;\r\n    \t\t\t}\r\n    \t\t\tString[] subarray = new String[i - srcPos + 1];\r\n    \t\t\tSystem.arraycopy(array, srcPos, subarray, 0, subarray.length);\r\n    \t\t\tlist.add(subarray);\r\n    \t\t}\r\n    \r\n    \t\t// Display the subarrays\r\n    \t\tfor (String[] arr : list) {\r\n    \t\t\tSystem.out.println(Arrays.toString(arr));\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    [a, b, c]\r\n    [ab, cd]\r\n    [abc]\r\n    [abcde, fghij, klmno]\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy(java.lang.Object,%20int,%20java.lang.Object,%20int,%20int)\r\n","title":"Java: Split array of strings sorted by string length into several arrays by string length","body":"<h1>Use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy(java.lang.Object,%20int,%20java.lang.Object,%20int,%20int)\" rel=\"nofollow noreferrer\">System:arraycopy</a></h1>\n\n<p><strong>Solution using arrays only:</strong></p>\n\n<pre><code>import java.util.Arrays;\n\npublic class Main {\n    public static void main(String[] args) {\n        String[][] arraysList = new String[1][];\n        String[] array = { \"a\", \"b\", \"c\", \"ab\", \"cd\", \"abc\", \"abcde\", \"fghij\", \"klmno\" };\n        int srcPos, row = 0;\n        for (int i = 0; i &lt; array.length; i++) {\n            srcPos = i;\n            while (i &lt; array.length - 1 &amp;&amp; array[i].length() == array[i + 1].length()) {\n                i++;\n            }\n            // Create a new array to store the current set of strings of equal length\n            String[] subarray = new String[i - srcPos + 1];\n\n            // Copy the current set of strings of equal length from array to subarray[]\n            System.arraycopy(array, srcPos, subarray, 0, subarray.length);\n\n            // Assign subarray[] to arraysList[][]\n            arraysList[row++] = subarray;\n\n            // Copy arraysList[][] to temp [][], increase size of arraysList[][] and restore\n            // arrays from temp [][] to arraysList[][]\n            String[][] temp = arraysList;\n            arraysList = new String[row + 1][subarray.length];\n            for (int j = 0; j &lt; temp.length; j++) {\n                arraysList[j] = temp[j];\n            }\n        }\n\n        // Drop the last row which was created to store a new subarray but there was no\n        // more subarrays to store and therefore it is empty.\n        arraysList = Arrays.copyOf(arraysList, arraysList.length - 1);\n\n        // Display the subarrays\n        for (String[] arr : arraysList) {\n            System.out.println(Arrays.toString(arr));\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[a, b, c]\n[ab, cd]\n[abc]\n[abcde, fghij, klmno]\n</code></pre>\n\n<p><strong>Solution using <code>List</code> and array:</strong></p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class Main {\n    public static void main(String[] args) {\n        List&lt;String[]&gt; list = new ArrayList&lt;String[]&gt;();\n        String[] array = { \"a\", \"b\", \"c\", \"ab\", \"cd\", \"abc\", \"abcde\", \"fghij\", \"klmno\" };\n        int srcPos;\n        for (int i = 0; i &lt; array.length; i++) {\n            srcPos = i;\n            while (i &lt; array.length - 1 &amp;&amp; array[i].length() == array[i + 1].length()) {\n                i++;\n            }\n            String[] subarray = new String[i - srcPos + 1];\n            System.arraycopy(array, srcPos, subarray, 0, subarray.length);\n            list.add(subarray);\n        }\n\n        // Display the subarrays\n        for (String[] arr : list) {\n            System.out.println(Arrays.toString(arr));\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[a, b, c]\n[ab, cd]\n[abc]\n[abcde, fghij, klmno]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8595751,"reputation":5395,"user_id":6438819,"display_name":"RaffleBuffle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588198189,"creation_date":1588198189,"answer_id":61512601,"question_id":61510935,"body_markdown":"You can use a `Map` to associate string lengths to the sub-array of strings of that length:\r\n\r\n    String[] array = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;ab&quot;, &quot;cd&quot;, &quot;abc&quot;, &quot;abcde&quot;, &quot;fghij&quot;, &quot;klmno&quot;};\r\n    \r\n    Map&lt;Integer, String[]&gt; map = new HashMap&lt;&gt;();\r\n    \r\n    for(int j=0, i=1; i&lt;=array.length; i++)\r\n    {\r\n    \tif(i == array.length || array[i].length() &gt; array[j].length())\r\n    \t{\r\n    \t\tmap.put(array[j].length(), Arrays.copyOfRange(array, j, i))\t;\r\n    \t\tj = i;\r\n    \t}\r\n    }\r\n    \r\n    for(Integer len: map.keySet())\r\n    \tSystem.out.format(&quot;%d : %s%n&quot;, len, Arrays.toString(map.get(len)));\r\n\r\nOutput:\r\n\r\n    1 : [a, b, c]\r\n    2 : [ab, cd]\r\n    3 : [abc]\r\n    5 : [abcde, fghij, klmno]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/61511123/6438819","title":"Java: Split array of strings sorted by string length into several arrays by string length","body":"<p>You can use a <code>Map</code> to associate string lengths to the sub-array of strings of that length:</p>\n\n<pre><code>String[] array = {\"a\", \"b\", \"c\", \"ab\", \"cd\", \"abc\", \"abcde\", \"fghij\", \"klmno\"};\n\nMap&lt;Integer, String[]&gt; map = new HashMap&lt;&gt;();\n\nfor(int j=0, i=1; i&lt;=array.length; i++)\n{\n    if(i == array.length || array[i].length() &gt; array[j].length())\n    {\n        map.put(array[j].length(), Arrays.copyOfRange(array, j, i)) ;\n        j = i;\n    }\n}\n\nfor(Integer len: map.keySet())\n    System.out.format(\"%d : %s%n\", len, Arrays.toString(map.get(len)));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 : [a, b, c]\n2 : [ab, cd]\n3 : [abc]\n5 : [abcde, fghij, klmno]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21675058,"reputation":19,"user_id":15992163,"display_name":"Morgan Wolf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660164660,"creation_date":1660164660,"answer_id":73312580,"question_id":61510935,"body_markdown":"You can also use a list:\r\n\r\n    List&lt;String&gt; originalList = Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;ab&quot;,&quot;cd&quot;,&quot;abc&quot;,&quot;abcde&quot;,&quot;fghij&quot;,&quot;klmno&quot;);\r\n\r\n    Map&lt;?,?&gt; m = originalList.stream().collect(Collectors.groupingBy(String::length));","title":"Java: Split array of strings sorted by string length into several arrays by string length","body":"<p>You can also use a list:</p>\n<pre><code>List&lt;String&gt; originalList = Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;ab&quot;,&quot;cd&quot;,&quot;abc&quot;,&quot;abcde&quot;,&quot;fghij&quot;,&quot;klmno&quot;);\n\nMap&lt;?,?&gt; m = originalList.stream().collect(Collectors.groupingBy(String::length));\n</code></pre>\n"}],"owner":{"account_id":18444066,"reputation":23,"user_id":13435900,"display_name":"timhoangt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":61511123,"answer_count":6,"score":2,"last_activity_date":1660164660,"creation_date":1588191542,"question_id":61510935,"body_markdown":"I currently have an array of strings that is sorted by string length for example:\r\n```\r\nString[] array = [a,b,c,ab,cd,abc,abcde,fghij,klmno]\r\n```\r\nHow would turn this array into several arrays depending on string size while keeping track of what the string size for each array is? What I want is:\r\n```\r\nString[] array1 = [a,b,c]\r\nString[] array2 = [ab,cd]\r\nString[] array3 = [abc]\r\nString[] array5 = [abcde,fghij,klmno]\r\n```\r\nI was maybe thinking of using a matrix for this but have no idea of going about doing this.","title":"Java: Split array of strings sorted by string length into several arrays by string length","body":"<p>I currently have an array of strings that is sorted by string length for example:</p>\n\n<pre><code>String[] array = [a,b,c,ab,cd,abc,abcde,fghij,klmno]\n</code></pre>\n\n<p>How would turn this array into several arrays depending on string size while keeping track of what the string size for each array is? What I want is:</p>\n\n<pre><code>String[] array1 = [a,b,c]\nString[] array2 = [ab,cd]\nString[] array3 = [abc]\nString[] array5 = [abcde,fghij,klmno]\n</code></pre>\n\n<p>I was maybe thinking of using a matrix for this but have no idea of going about doing this.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":9774,"reputation":3303,"user_id":18187,"accept_rate":83,"display_name":"ddimitrov"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1475353163,"creation_date":1224260152,"answer_id":212816,"question_id":212805,"body_markdown":"[http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Class.html#getComponentType()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getComponentType()):\r\n&gt; \r\n    public Class&lt;?&gt; getComponentType()\r\n&gt; \r\nReturns the `Class` representing the component type of an array. If this class does not represent an array class this method returns null... ","title":"In Java, how do I dynamically determine the type of an array?","body":"<p><a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getComponentType()\" rel=\"noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Class.html#getComponentType()</a>:</p>\n\n<blockquote>\n<pre><code>public Class&lt;?&gt; getComponentType()\n</code></pre>\n  \n  <p>Returns the <code>Class</code> representing the component type of an array. If this class does not represent an array class this method returns null... </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":14170,"reputation":4301,"user_id":28921,"accept_rate":86,"display_name":"sakana"},"down_vote_count":1,"up_vote_count":89,"is_accepted":true,"score":88,"last_activity_date":1498926293,"creation_date":1224260164,"answer_id":212817,"question_id":212805,"body_markdown":"Just write \r\n\r\n    Class ofArray = o.getClass().getComponentType();\r\n\r\nFrom [the JavaDoc](http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getComponentType--):\r\n\r\n&gt; `public Class&lt;?&gt; getComponentType()`\r\n&gt;\r\n&gt; Returns the `Class` representing the component type of an array. If this class does not represent an array class this method returns `null`.\r\n","title":"In Java, how do I dynamically determine the type of an array?","body":"<p>Just write </p>\n\n<pre><code>Class ofArray = o.getClass().getComponentType();\n</code></pre>\n\n<p>From <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getComponentType--\" rel=\"noreferrer\">the JavaDoc</a>:</p>\n\n<blockquote>\n  <p><code>public Class&lt;?&gt; getComponentType()</code></p>\n  \n  <p>Returns the <code>Class</code> representing the component type of an array. If this class does not represent an array class this method returns <code>null</code>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5947,"reputation":54623,"user_id":9815,"accept_rate":100,"display_name":"Daniel Spiewak"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1224260754,"creation_date":1224260754,"answer_id":212855,"question_id":212805,"body_markdown":"@ddimitrov is the correct answer.  Put into code it looks like this:\r\n\r\n    public &lt;T&gt; Class&lt;T&gt; testArray(T[] array) {\r\n        return array.getClass().getComponentType();\r\n    }\r\n\r\nEven more generally, we can test first to see if the type represents an array, and *then* get its component:\r\n\r\n    Object maybeArray = ...\r\n    Class&lt;?&gt; clazz = maybeArray.getClass();\r\n    if (clazz.isArray()) {\r\n        System.out.printf(&quot;Array of type %s&quot;, clazz.getComponentType());\r\n    } else {\r\n        System.out.println(&quot;Not an array&quot;);\r\n    }\r\n\r\nA specific example would be applying this method to an array for which the component type is already known:\r\n\r\n    String[] arr = {&quot;Daniel&quot;, &quot;Chris&quot;, &quot;Joseph&quot;};\r\n    arr.getClass().getComponentType();              // =&gt; java.lang.String\r\n\r\nPretty straightforward!","title":"In Java, how do I dynamically determine the type of an array?","body":"<p>@ddimitrov is the correct answer.  Put into code it looks like this:</p>\n\n<pre><code>public &lt;T&gt; Class&lt;T&gt; testArray(T[] array) {\n    return array.getClass().getComponentType();\n}\n</code></pre>\n\n<p>Even more generally, we can test first to see if the type represents an array, and <em>then</em> get its component:</p>\n\n<pre><code>Object maybeArray = ...\nClass&lt;?&gt; clazz = maybeArray.getClass();\nif (clazz.isArray()) {\n    System.out.printf(\"Array of type %s\", clazz.getComponentType());\n} else {\n    System.out.println(\"Not an array\");\n}\n</code></pre>\n\n<p>A specific example would be applying this method to an array for which the component type is already known:</p>\n\n<pre><code>String[] arr = {\"Daniel\", \"Chris\", \"Joseph\"};\narr.getClass().getComponentType();              // =&gt; java.lang.String\n</code></pre>\n\n<p>Pretty straightforward!</p>\n"}],"owner":{"account_id":4399,"reputation":9568,"user_id":6580,"accept_rate":83,"display_name":"Bob Herrmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35779,"favorite_count":0,"down_vote_count":1,"up_vote_count":48,"accepted_answer_id":212817,"answer_count":3,"score":47,"last_activity_date":1660164413,"creation_date":1224259953,"question_id":212805,"body_markdown":"    Object o = new Long[0]\r\n    System.out.println( o.getClass().isArray() )\r\n    System.out.println( o.getClass().getName() )\r\n    Class ofArray = ???\r\n\r\nRunning the first 3 lines emits;\r\n\r\n    true\r\n    [Ljava.lang.Long;\r\n\r\n\r\nHow do I get ??? to be type long?   I could parse the string and do a Class.forname(), but thats grotty.   What&#39;s the easy way?\r\n\r\n","title":"In Java, how do I dynamically determine the type of an array?","body":"<pre><code>Object o = new Long[0]\nSystem.out.println( o.getClass().isArray() )\nSystem.out.println( o.getClass().getName() )\nClass ofArray = ???\n</code></pre>\n\n<p>Running the first 3 lines emits;</p>\n\n<pre><code>true\n[Ljava.lang.Long;\n</code></pre>\n\n<p>How do I get ??? to be type long?   I could parse the string and do a Class.forname(), but thats grotty.   What's the easy way?</p>\n"},{"tags":["java","mysql","phpmyadmin"],"comments":[{"owner":{"account_id":1854334,"reputation":5145,"user_id":1680256,"accept_rate":88,"display_name":"Bhavik Shah"},"score":0,"creation_date":1355503886,"post_id":13882920,"comment_id":19122766,"body_markdown":"are you using preparedStatement? a part of your code will help","body":"are you using preparedStatement? a part of your code will help"},{"owner":{"account_id":1906460,"reputation":285,"user_id":1721234,"accept_rate":43,"display_name":"Steven Mclaren"},"score":0,"creation_date":1355504075,"post_id":13882920,"comment_id":19122857,"body_markdown":"My SQL statement in Java is a string. Which is then sent via : st.executeUpdate(query);","body":"My SQL statement in Java is a string. Which is then sent via : st.executeUpdate(query);"},{"owner":{"account_id":1854334,"reputation":5145,"user_id":1680256,"accept_rate":88,"display_name":"Bhavik Shah"},"score":0,"creation_date":1355504127,"post_id":13882920,"comment_id":19122886,"body_markdown":"can you post your code here?","body":"can you post your code here?"},{"owner":{"account_id":1668402,"reputation":891,"user_id":1535358,"accept_rate":93,"display_name":"Codeguy007"},"score":0,"creation_date":1355504288,"post_id":13882920,"comment_id":19122951,"body_markdown":"BTW `/` is a forward slash. You may have to escape those before inserting them into MySQL. Backslashes do for sure, not as sure with forward slashes. Either way you would escape the slash with a backslash `\\\\`","body":"BTW <code>&#47;</code> is a forward slash. You may have to escape those before inserting them into MySQL. Backslashes do for sure, not as sure with forward slashes. Either way you would escape the slash with a backslash `\\`"},{"owner":{"account_id":1668402,"reputation":891,"user_id":1535358,"accept_rate":93,"display_name":"Codeguy007"},"score":0,"creation_date":1355504414,"post_id":13882920,"comment_id":19123008,"body_markdown":"If you use Prepared Statements, they might handle the escaping for you.","body":"If you use Prepared Statements, they might handle the escaping for you."},{"owner":{"account_id":1854334,"reputation":5145,"user_id":1680256,"accept_rate":88,"display_name":"Bhavik Shah"},"score":0,"creation_date":1355504416,"post_id":13882920,"comment_id":19123009,"body_markdown":"@StevenMclaren : well my point is if you use a prepared statement you don&#39;t need to worry about escaping slashes","body":"@StevenMclaren : well my point is if you use a prepared statement you don&#39;t need to worry about escaping slashes"},{"owner":{"account_id":1906460,"reputation":285,"user_id":1721234,"accept_rate":43,"display_name":"Steven Mclaren"},"score":0,"creation_date":1355504433,"post_id":13882920,"comment_id":19123017,"body_markdown":"My mistake Codeguy, I meant &quot;\\&quot;. What do you mean &quot;escape the backslash&quot;. Orginal post edited @BhavikShah","body":"My mistake Codeguy, I meant &quot;\\&quot;. What do you mean &quot;escape the backslash&quot;. Orginal post edited @BhavikShah"},{"owner":{"account_id":1668402,"reputation":891,"user_id":1535358,"accept_rate":93,"display_name":"Codeguy007"},"score":0,"creation_date":1355504559,"post_id":13882920,"comment_id":19123079,"body_markdown":"\\ is the special character and needs to be escaped to be placed in a MySQL varchar or text field. In fact it is the escape character. So you need to double up the backslashes \\\\ to insert them.","body":"\\ is the special character and needs to be escaped to be placed in a MySQL varchar or text field. In fact it is the escape character. So you need to double up the backslashes \\\\ to insert them."},{"owner":{"account_id":1906460,"reputation":285,"user_id":1721234,"accept_rate":43,"display_name":"Steven Mclaren"},"score":0,"creation_date":1355504627,"post_id":13882920,"comment_id":19123102,"body_markdown":"Very good point. Never thought of that CodeGuy, Thanks! Do you have any suggestions how I would do that as its .getText() and isn&#39;t a string as of yet. Could I do: String editedPath = pathField.getText(); then do a replace &quot;\\&quot; with &quot;\\\\&quot;","body":"Very good point. Never thought of that CodeGuy, Thanks! Do you have any suggestions how I would do that as its .getText() and isn&#39;t a string as of yet. Could I do: String editedPath = pathField.getText(); then do a replace &quot;\\&quot; with &quot;\\\\&quot;"},{"owner":{"account_id":1668402,"reputation":891,"user_id":1535358,"accept_rate":93,"display_name":"Codeguy007"},"score":0,"creation_date":1355504702,"post_id":13882920,"comment_id":19123137,"body_markdown":"Bhavik is right though you should be using Prepared Statements as they handle processing of strings for invalid characters and prevent sql injection.","body":"Bhavik is right though you should be using Prepared Statements as they handle processing of strings for invalid characters and prevent sql injection."},{"owner":{"account_id":1906460,"reputation":285,"user_id":1721234,"accept_rate":43,"display_name":"Steven Mclaren"},"score":0,"creation_date":1355504854,"post_id":13882920,"comment_id":19123193,"body_markdown":"Thanks @BhavikShah - I&#39;ll look into prepared statements.","body":"Thanks @BhavikShah - I&#39;ll look into prepared statements."}],"answers":[{"tags":[],"owner":{"account_id":1854334,"reputation":5145,"user_id":1680256,"accept_rate":88,"display_name":"Bhavik Shah"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1355506470,"creation_date":1355504742,"answer_id":13883168,"question_id":13882920,"body_markdown":"you should use prepared statement to avoid this kind of errors\r\n\r\n    public static void main(String args[]) {\r\n    \r\n      Connection con = null;\r\n      PreparedStatement pst = null;\r\n      ResultSet rs = null;\r\n    \r\n      try {\r\n    \r\n      Class.forName(driver);\r\n      con = DriverManager.getConnection(connection);\r\n    \r\n      String sql =\r\n      &quot;select * from Employees where FirstName &quot; + &quot;in(?,?,?)&quot;;\r\n      pst = con.prepareStatement(sql);\r\n    \r\n      pst.setString(1, &quot;komal&quot;);\r\n      pst.setString(2, &quot;ajay&quot;);\r\n      pst.setString(3, &quot;santosh&quot;);\r\n    \r\n      rs = pst.executeQuery();\r\n      System.out.println(&quot;EmployeeID\\tFirstName&quot;);\r\n      while (rs.next()) {\r\n      System.out.print(&quot;  &quot;+rs.getString(1));\r\n      System.out.print(&quot;\\t\\t&quot;+rs.getString(2));\r\n      System.out.println(&quot;\\t\\t&quot;+rs.getString(3));\r\n      }\r\n      \r\n      } catch (Exception e) {\r\n      System.out.println(e);\r\n      }\r\n      }\r\n    } \r\n\r\nso in your case\r\n\r\n    String query_to_update = &quot;INSERT INTO `evidence_db`.`mcases` (&quot;\r\n                        + &quot;`PID`,&quot;\r\n                        + &quot; `FilePath`) &quot;\r\n                        + &quot;VALUES (?,?);&quot;;\r\n    \r\n    PreparedStatement pst=coneection.prepareStatement(query_to_update);\r\n    pst.setString(1,&quot;DEFAULT&quot;);\r\n    pst.setString(2,pathField.getText());\r\n    pst.executeUpdate();","title":"Inserting files file path in MySQL via Java","body":"<p>you should use prepared statement to avoid this kind of errors</p>\n\n<pre><code>public static void main(String args[]) {\n\n  Connection con = null;\n  PreparedStatement pst = null;\n  ResultSet rs = null;\n\n  try {\n\n  Class.forName(driver);\n  con = DriverManager.getConnection(connection);\n\n  String sql =\n  \"select * from Employees where FirstName \" + \"in(?,?,?)\";\n  pst = con.prepareStatement(sql);\n\n  pst.setString(1, \"komal\");\n  pst.setString(2, \"ajay\");\n  pst.setString(3, \"santosh\");\n\n  rs = pst.executeQuery();\n  System.out.println(\"EmployeeID\\tFirstName\");\n  while (rs.next()) {\n  System.out.print(\"  \"+rs.getString(1));\n  System.out.print(\"\\t\\t\"+rs.getString(2));\n  System.out.println(\"\\t\\t\"+rs.getString(3));\n  }\n\n  } catch (Exception e) {\n  System.out.println(e);\n  }\n  }\n} \n</code></pre>\n\n<p>so in your case</p>\n\n<pre><code>String query_to_update = \"INSERT INTO `evidence_db`.`mcases` (\"\n                    + \"`PID`,\"\n                    + \" `FilePath`) \"\n                    + \"VALUES (?,?);\";\n\nPreparedStatement pst=coneection.prepareStatement(query_to_update);\npst.setString(1,\"DEFAULT\");\npst.setString(2,pathField.getText());\npst.executeUpdate();\n</code></pre>\n"}],"owner":{"account_id":1906460,"reputation":285,"user_id":1721234,"accept_rate":43,"display_name":"Steven Mclaren"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2612,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":13883168,"answer_count":1,"score":1,"last_activity_date":1660163673,"creation_date":1355503788,"question_id":13882920,"body_markdown":"My java program collects a file path from a text field:\r\n\r\n    pathField.getText();\r\n\r\nAnd inserts the results to my database (phpMyAdmin). However, it doesn&#39;t seem to include the backslashes(\\).\r\nEG - C:UsersSteveDesktop\r\n\r\nThe FilePath field in the database is set to &quot;Text&quot;.\r\nI have tested the `pathField.getText()` in a `System.out` statement, and it prints with the backslashes.\r\n\r\n\r\n    Statement st = (Statement) conn.createStatement();\r\n    \r\n                String query_to_update = &quot;INSERT INTO `evidence_db`.`mcases` (&quot;\r\n                        + &quot;`PID`,&quot;\r\n                        + &quot; `FilePath`) &quot;\r\n                        + &quot;VALUES (&quot;\r\n                        + &quot;DEFAULT,&quot;\r\n                        + &quot; &#39;&quot; + pathField.getText() + &quot;&#39;);&quot;;\r\n    \r\n                System.out.println(&quot;Query: &quot; + query_to_update);\r\n    \r\n                int val = st.executeUpdate(query_to_update);\r\n               \r\nPlease note that I have edited the above code, so there might be minor errors.\r\n","title":"Inserting files file path in MySQL via Java","body":"<p>My java program collects a file path from a text field:</p>\n\n<pre><code>pathField.getText();\n</code></pre>\n\n<p>And inserts the results to my database (phpMyAdmin). However, it doesn't seem to include the backslashes().\nEG - C:UsersSteveDesktop</p>\n\n<p>The FilePath field in the database is set to \"Text\".\nI have tested the <code>pathField.getText()</code> in a <code>System.out</code> statement, and it prints with the backslashes.</p>\n\n<pre><code>Statement st = (Statement) conn.createStatement();\n\n            String query_to_update = \"INSERT INTO `evidence_db`.`mcases` (\"\n                    + \"`PID`,\"\n                    + \" `FilePath`) \"\n                    + \"VALUES (\"\n                    + \"DEFAULT,\"\n                    + \" '\" + pathField.getText() + \"');\";\n\n            System.out.println(\"Query: \" + query_to_update);\n\n            int val = st.executeUpdate(query_to_update);\n</code></pre>\n\n<p>Please note that I have edited the above code, so there might be minor errors.</p>\n"},{"tags":["java","html","regex","href","inverse"],"answers":[{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1322556297,"creation_date":1322556297,"answer_id":8307936,"question_id":8307839,"body_markdown":"You do not have to use `replaceAll`. Better use pattern groups like the following:\r\n\r\n    Pattern p = Pattern.compile(&quot;href=\\&quot;(.*?)\\&quot;&quot;);\r\n    Matcher m = p.matcher(html);\r\n    String url = null;\r\n    if (m.find()) {\r\n        url = m.group(1); // this variable should contain the link URL\r\n    }\r\n\r\nIf you have several links into your HTML perform `m.find()` in loop.","title":"Creating java regex to get href link","body":"<p>You do not have to use <code>replaceAll</code>. Better use pattern groups like the following:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"href=\\\"(.*?)\\\"\");\nMatcher m = p.matcher(html);\nString url = null;\nif (m.find()) {\n    url = m.group(1); // this variable should contain the link URL\n}\n</code></pre>\n\n<p>If you have several links into your HTML perform <code>m.find()</code> in loop.</p>\n"},{"tags":[],"owner":{"account_id":247036,"reputation":10201,"user_id":521505,"display_name":"socha23"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1322556309,"creation_date":1322556309,"answer_id":8307940,"question_id":8307839,"body_markdown":"If you always have one such link in a string, try this:\r\n\r\n    &quot;(^[^\\&quot;]*\\&quot;)|(\\&quot;[^\\&quot;]*)$&quot;","title":"Creating java regex to get href link","body":"<p>If you always have one such link in a string, try this:</p>\n\n<pre><code>\"(^[^\\\"]*\\\")|(\\\"[^\\\"]*)$\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":227596,"reputation":4137,"user_id":489364,"accept_rate":53,"display_name":"kommradHomer"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1322556352,"creation_date":1322556352,"answer_id":8307948,"question_id":8307839,"body_markdown":"you can checkout http://regexlib.com/ for all the regex help you need. And the one below is for url :\r\n\r\n    ^[a-zA-Z0-9\\-\\.]+\\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU)$","title":"Creating java regex to get href link","body":"<p>you can checkout <a href=\"http://regexlib.com/\" rel=\"nofollow\">http://regexlib.com/</a> for all the regex help you need. And the one below is for url :</p>\n\n<pre><code>^[a-zA-Z0-9\\-\\.]+\\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU)$\n</code></pre>\n"},{"tags":[],"owner":{"account_id":136944,"reputation":680,"user_id":340810,"accept_rate":75,"display_name":"somid3"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660163352,"creation_date":1660163352,"answer_id":73312370,"question_id":8307839,"body_markdown":"Use the method to get a map of all the properties of a HTML tag. Create a simple way to find all the properties of an HTML, like...\r\n\r\n        Pattern linkPattern = Pattern.compile(&quot;&lt;a (.*?)&gt;&quot;);\r\n        Matcher linkMatcher = linkPattern.matcher(in);\r\n        while (linkMatcher.find()) { parseProperties(linkMatcher.group(1)).toString(); }\r\n\r\n\r\n\r\nGet properties:\r\n\r\n    private static final Pattern PARSE_PATTERN = Pattern.compile(&quot;\\\\s*?(\\\\w*?)\\\\s*?=\\\\s*?\\&quot;(.*?)\\&quot;&quot;);\r\n    \r\n    public static Map&lt;String, String&gt; parseProperties (String in) {\r\n    \r\n      Map&lt;String, String&gt; out = new HashMap&lt;&gt;();\r\n    \r\n      // Create matcher based on parsing pattern\r\n      Matcher matcher = PARSE_PATTERN.matcher(in);\r\n    \r\n      // Populate map\r\n      while (matcher.find()) { out.put(matcher.group(1), matcher.group(2)); }\r\n    \r\n      return out; \r\n    }","title":"Creating java regex to get href link","body":"<p>Use the method to get a map of all the properties of a HTML tag. Create a simple way to find all the properties of an HTML, like...</p>\n<pre><code>    Pattern linkPattern = Pattern.compile(&quot;&lt;a (.*?)&gt;&quot;);\n    Matcher linkMatcher = linkPattern.matcher(in);\n    while (linkMatcher.find()) { parseProperties(linkMatcher.group(1)).toString(); }\n</code></pre>\n<p>Get properties:</p>\n<pre><code>private static final Pattern PARSE_PATTERN = Pattern.compile(&quot;\\\\s*?(\\\\w*?)\\\\s*?=\\\\s*?\\&quot;(.*?)\\&quot;&quot;);\n\npublic static Map&lt;String, String&gt; parseProperties (String in) {\n\n  Map&lt;String, String&gt; out = new HashMap&lt;&gt;();\n\n  // Create matcher based on parsing pattern\n  Matcher matcher = PARSE_PATTERN.matcher(in);\n\n  // Populate map\n  while (matcher.find()) { out.put(matcher.group(1), matcher.group(2)); }\n\n  return out; \n}\n</code></pre>\n"}],"owner":{"account_id":1071785,"reputation":21,"user_id":1070866,"display_name":"user1070866"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22970,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1660163352,"creation_date":1322555681,"question_id":8307839,"body_markdown":"Sorry if this has been asked before, but I couldn&#39;t find any answers on the web.  I&#39;m having a hard time figuring out the inverse to this regex:\r\n\r\n&gt; &quot;\\&quot;[^&gt;]*\\&quot;&gt;&quot;\r\n\r\nI want to use replaceAll to replace everything except the link.  So if I had a tag similar to this:\r\n\r\n&gt; `&lt;p&gt;&lt;a href=&quot;http://www.google.com&quot;&gt;Google&lt;/a&gt;&lt;/p&gt;`\r\n\r\nI need a regex that would satisfy this:\r\n\r\n&gt; s.replaceAll(regex, &quot;&quot;);\r\n\r\nto give me this output:\r\n\r\n&gt; `http://www.google.com`\r\n\r\nI know there are better ways to do this, but I have to use a regex.  Any help is really appreciated, thanks!","title":"Creating java regex to get href link","body":"<p>Sorry if this has been asked before, but I couldn't find any answers on the web.  I'm having a hard time figuring out the inverse to this regex:</p>\n\n<blockquote>\n  <p>\"\\\"[^>]*\\\">\"</p>\n</blockquote>\n\n<p>I want to use replaceAll to replace everything except the link.  So if I had a tag similar to this:</p>\n\n<blockquote>\n  <p><code>&lt;p&gt;&lt;a href=\"http://www.google.com\"&gt;Google&lt;/a&gt;&lt;/p&gt;</code></p>\n</blockquote>\n\n<p>I need a regex that would satisfy this:</p>\n\n<blockquote>\n  <p>s.replaceAll(regex, \"\");</p>\n</blockquote>\n\n<p>to give me this output:</p>\n\n<blockquote>\n  <p><code>http://www.google.com</code></p>\n</blockquote>\n\n<p>I know there are better ways to do this, but I have to use a regex.  Any help is really appreciated, thanks!</p>\n"},{"tags":["java","processing","control-p5"],"comments":[{"owner":{"account_id":1866859,"reputation":2846,"user_id":1690199,"accept_rate":91,"display_name":"v.k."},"score":1,"creation_date":1424350553,"post_id":28588859,"comment_id":45517960,"body_markdown":"You need to draw relative to the size to get things resized along the frame. eg: `setSize(width*0.02, height*0.13);`","body":"You need to draw relative to the size to get things resized along the frame. eg: <code>setSize(width*0.02, height*0.13);</code>"},{"owner":{"account_id":1772916,"reputation":205,"user_id":1617346,"accept_rate":91,"display_name":"Simon Hillary"},"score":1,"creation_date":1424797275,"post_id":28588859,"comment_id":45693622,"body_markdown":"I have tried that but since all of the setup takes place inside the setup() method it is only called once, and trying to update the sizes in the draw() loop does not seem to work","body":"I have tried that but since all of the setup takes place inside the setup() method it is only called once, and trying to update the sizes in the draw() loop does not seem to work"}],"answers":[{"tags":[],"owner":{"account_id":2765376,"reputation":41,"user_id":2381233,"display_name":"KristinaZ"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1443461287,"creation_date":1443461287,"answer_id":32828619,"question_id":28588859,"body_markdown":"I had a similar problem and though I am quite new to Processing I find a way to make it work. What I did to make it work was that I put my GUI elements into a controlGroup and before updating it (which I did using my custom function setGUI()) due to a change of a window size I hid the controlGroup using function hide() and after the update I displayed it again using show() function.\r\nHopefully that can somehow help you.","title":"Processing Resize Window and have buttons dynamically take up available space","body":"<p>I had a similar problem and though I am quite new to Processing I find a way to make it work. What I did to make it work was that I put my GUI elements into a controlGroup and before updating it (which I did using my custom function setGUI()) due to a change of a window size I hid the controlGroup using function hide() and after the update I displayed it again using show() function.\nHopefully that can somehow help you.</p>\n"},{"tags":[],"owner":{"account_id":1162084,"reputation":6034,"user_id":1141395,"accept_rate":57,"display_name":"Alex Cio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660162890,"creation_date":1660162890,"answer_id":73312297,"question_id":28588859,"body_markdown":"I would always outsource values like `button` width and height to variables in the header and using numbers like @1690199 mentioned in his comment of your question:\r\n\r\n    float buttonWidth = 0.02;\r\n    float buttonHeight = 0.13;\r\n\r\n    Button button0, button1, button2, button3;\r\n\r\n    boolean didSizeChange = false;\r\n\r\nand then update your values inside the `draw()` function. \r\nMaybe you have to save the single `button` inside another variable to be able to update it later on, only if the screen size changed.\r\n\r\n    if( didSizeChange == true ){\r\n        buttonP0 = controlP5.addButton(&quot;P0&quot;, 1, 490, 5, 20, 20);\r\n        buttonP0.setColorBackground(gray_);\r\n    }\r\n\r\nFound the example with the `buttons` inside this repo\r\n\r\nhttps://java.hotexamples.com/examples/processing.data/ControlP5/addButton/java-controlp5-addbutton-method-examples.html\r\n\r\nThe buttons got defined within this class\r\n\r\nhttps://github.com/ranqingfa/Firmware/blob/master/GUI/EvvGC_GUI_v0_4/EvvGC_GUI_v0_4.pde","title":"Processing Resize Window and have buttons dynamically take up available space","body":"<p>I would always outsource values like <code>button</code> width and height to variables in the header and using numbers like @1690199 mentioned in his comment of your question:</p>\n<pre><code>float buttonWidth = 0.02;\nfloat buttonHeight = 0.13;\n\nButton button0, button1, button2, button3;\n\nboolean didSizeChange = false;\n</code></pre>\n<p>and then update your values inside the <code>draw()</code> function.\nMaybe you have to save the single <code>button</code> inside another variable to be able to update it later on, only if the screen size changed.</p>\n<pre><code>if( didSizeChange == true ){\n    buttonP0 = controlP5.addButton(&quot;P0&quot;, 1, 490, 5, 20, 20);\n    buttonP0.setColorBackground(gray_);\n}\n</code></pre>\n<p>Found the example with the <code>buttons</code> inside this repo</p>\n<p><a href=\"https://java.hotexamples.com/examples/processing.data/ControlP5/addButton/java-controlp5-addbutton-method-examples.html\" rel=\"nofollow noreferrer\">https://java.hotexamples.com/examples/processing.data/ControlP5/addButton/java-controlp5-addbutton-method-examples.html</a></p>\n<p>The buttons got defined within this class</p>\n<p><a href=\"https://github.com/ranqingfa/Firmware/blob/master/GUI/EvvGC_GUI_v0_4/EvvGC_GUI_v0_4.pde\" rel=\"nofollow noreferrer\">https://github.com/ranqingfa/Firmware/blob/master/GUI/EvvGC_GUI_v0_4/EvvGC_GUI_v0_4.pde</a></p>\n"}],"owner":{"account_id":1772916,"reputation":205,"user_id":1617346,"accept_rate":91,"display_name":"Simon Hillary"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1832,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1660162890,"creation_date":1424277540,"question_id":28588859,"body_markdown":"I am using processing to display a number of buttons with the ControlP5 API. At the moment I can get the buttons to display in the window of the sketch but when I resize the frame the button positions do not update, Is there a simple way to redraw the buttons in order to re-position them automatically when a window is resized or am I wasting my time?\r\n\r\nHere is the code:\r\n\r\n\r\n    package controlp5userinterface;\r\n\r\n    import java.awt.event.*;\r\n    import java.util.ArrayList;\r\n    import processing.core.PApplet;\r\n    import processing.core.PImage;\r\n    import controlP5.*;\r\n\r\n\r\n    public class ControlP5UserInterface extends PApplet {\r\n\r\n\tControlP5 controlP5;\r\n\tPImage bg;\r\n\tController b;\r\n\r\n\t@SuppressWarnings(&quot;deprecation&quot;)\r\n\tpublic void setup() {\r\n\t\tsize(1000,1000);\r\n\t\tsmooth();\r\n\r\n\t\tif (frame != null) {\r\n\t\t\tframe.setResizable(true);\r\n\t\t}\r\n\t\t\r\n\t\tbg = loadImage(&quot;StockBackground1.jpg&quot;);\r\n\r\n\t\t/*\r\n\t\t * \r\n\t\t * BEGIN CONTROL P5 MENU GENERATION\r\n\t\t *  buttons will spread out to fit available screen space\r\n\t\t */\r\n\t\t\r\n\t\tcontrolP5 = new ControlP5(this);\r\n\t\tArrayList&lt;Button&gt; buttons = new ArrayList&lt;Button&gt;();\r\n\t\tGroup MainMenu = controlP5.addGroup(&quot;MainMenu&quot;);\r\n\t\tMainMenu.setSize(100, 100);\r\n\t\t//controlP5.addGroup(&quot;MainMenu&quot;);\r\n\t\tcontrolP5.addButton(&quot;SIMON&quot;).setGroup(&quot;MainMenu&quot;).setSize(80, 50);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\tcontrolP5.addButton(&quot;ACN&quot;).setGroup(&quot;MainMenu&quot;).setSize(80, 50);\r\n\t\tcontrolP5.addButton(&quot;GOOG&quot;).setGroup(&quot;MainMenu&quot;).setSize(80, 50);\r\n\t\t//buttons.add(controlP5.addButton(&quot;AAPL&quot;).setGroup(&quot;MainMenu&quot;));\r\n\t\t//buttons.add(controlP5.addButton(&quot;ACN&quot;).setGroup(&quot;MainMenu&quot;));\r\n\t\t//controlP5.getGroup(&quot;MainMenu&quot;).setSize(300, 300);\r\n\t\t\r\n\t}\r\n\r\n\t/*\r\n\t * \r\n\t * SCREEN RESIZE CONTROLLER HERE??(non-Javadoc)\r\n\t * @see processing.core.PApplet#draw()\r\n\t * \r\n\t */\r\n\r\n\tpublic void draw() {\r\n\t\tbackground(0);  // background black\r\n\t\tcontrolP5.getGroup(&quot;MainMenu&quot;).update();\r\n\r\n\t}\r\n\r\n\tpublic int sketchWidth(){\r\n\t\treturn displayWidth;\r\n\t}\r\n\r\n\tpublic int sketchHeight(){\r\n\t\treturn displayHeight;\r\n\t}\r\n\r\n\tpublic static void main(String _args[]) {\r\n\t\tPApplet.main(new String[] { controlp5userinterface.ControlP5UserInterface.class.getName() });\r\n\t}\r\n}\r\n\r\n\r\n\r\n","title":"Processing Resize Window and have buttons dynamically take up available space","body":"<p>I am using processing to display a number of buttons with the ControlP5 API. At the moment I can get the buttons to display in the window of the sketch but when I resize the frame the button positions do not update, Is there a simple way to redraw the buttons in order to re-position them automatically when a window is resized or am I wasting my time?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>package controlp5userinterface;\n\nimport java.awt.event.*;\nimport java.util.ArrayList;\nimport processing.core.PApplet;\nimport processing.core.PImage;\nimport controlP5.*;\n\n\npublic class ControlP5UserInterface extends PApplet {\n\nControlP5 controlP5;\nPImage bg;\nController b;\n\n@SuppressWarnings(\"deprecation\")\npublic void setup() {\n    size(1000,1000);\n    smooth();\n\n    if (frame != null) {\n        frame.setResizable(true);\n    }\n\n    bg = loadImage(\"StockBackground1.jpg\");\n\n    /*\n     * \n     * BEGIN CONTROL P5 MENU GENERATION\n     *  buttons will spread out to fit available screen space\n     */\n\n    controlP5 = new ControlP5(this);\n    ArrayList&lt;Button&gt; buttons = new ArrayList&lt;Button&gt;();\n    Group MainMenu = controlP5.addGroup(\"MainMenu\");\n    MainMenu.setSize(100, 100);\n    //controlP5.addGroup(\"MainMenu\");\n    controlP5.addButton(\"SIMON\").setGroup(\"MainMenu\").setSize(80, 50);\n\n    controlP5.addButton(\"ACN\").setGroup(\"MainMenu\").setSize(80, 50);\n    controlP5.addButton(\"GOOG\").setGroup(\"MainMenu\").setSize(80, 50);\n    //buttons.add(controlP5.addButton(\"AAPL\").setGroup(\"MainMenu\"));\n    //buttons.add(controlP5.addButton(\"ACN\").setGroup(\"MainMenu\"));\n    //controlP5.getGroup(\"MainMenu\").setSize(300, 300);\n\n}\n\n/*\n * \n * SCREEN RESIZE CONTROLLER HERE??(non-Javadoc)\n * @see processing.core.PApplet#draw()\n * \n */\n\npublic void draw() {\n    background(0);  // background black\n    controlP5.getGroup(\"MainMenu\").update();\n\n}\n\npublic int sketchWidth(){\n    return displayWidth;\n}\n\npublic int sketchHeight(){\n    return displayHeight;\n}\n\npublic static void main(String _args[]) {\n    PApplet.main(new String[] { controlp5userinterface.ControlP5UserInterface.class.getName() });\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","reflection","record"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1659864115,"post_id":73265886,"comment_id":129392045,"body_markdown":"I agree that it is a compiler bug, but I can&#39;t seem to find a bug report for this... I am using OpenJDK 17. What JDK are you using? I ask because if JDKs from different vendors are exhibiting the same behaviour, then it&#39;s likely not a bug.","body":"I agree that it is a compiler bug, but I can&#39;t seem to find a bug report for this... I am using OpenJDK 17. What JDK are you using? I ask because if JDKs from different vendors are exhibiting the same behaviour, then it&#39;s likely not a bug."},{"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"score":0,"creation_date":1659864497,"post_id":73265886,"comment_id":129392094,"body_markdown":"@Sweeper I&#39;m using the JDK I downloaded from Oracle. I tried compiling with both javac `17.0.1` and `18.0.1.1`.","body":"@Sweeper I&#39;m using the JDK I downloaded from Oracle. I tried compiling with both javac <code>17.0.1</code> and <code>18.0.1.1</code>."},{"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"score":0,"creation_date":1660081614,"post_id":73265886,"comment_id":129447793,"body_markdown":"@Sweeper I tried to find some information in the JLS and JVM specs but couldn&#39;t find anything that defines this specific behavior (I cannot claim to fully understand the latter, although [it](https://docs.oracle.com/javase/specs/jvms/se18/html/jvms-4.html#jvms-4.7.20) was an interesting read). Anyway, I submitted a bugreport earlier today.","body":"@Sweeper I tried to find some information in the JLS and JVM specs but couldn&#39;t find anything that defines this specific behavior (I cannot claim to fully understand the latter, although <a href=\"https://docs.oracle.com/javase/specs/jvms/se18/html/jvms-4.html#jvms-4.7.20\" rel=\"nofollow noreferrer\">it</a> was an interesting read). Anyway, I submitted a bugreport earlier today."}],"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660162651,"creation_date":1659860244,"question_id":73265886,"body_markdown":"I&#39;ve got the program at the end of this question and I want to reflectively access the `@Annot` annotation. However, while I can do so for classes, I can&#39;t get access to the annotation if it is used in a record component. Running the code outputs\r\n\r\n```text\r\n[@tmp.Test$Annot()]\r\n[]\r\n```\r\n\r\nI&#39;ve tried adding all types defined in `ElementType` enum to the `Targets` array, but it still doesn&#39;t work. Calling `getDeclaredAnnotations` doesn&#39;t work either. Is there any way to actually access this annotation? The decompiled code looks like this:\r\n\r\n```java\r\npublic static final class C {\r\n    List&lt;@Test.Annot String&gt; strings;\r\n    public C() {}\r\n}\r\npublic static record R(List&lt;String&gt; strings) {\r\n    public R(List&lt;@Test.Annot String&gt; strings) { this.strings = strings; }\r\n    public List&lt;@Test.Annot String&gt; strings() { return this.strings; }\r\n}\r\n```\r\n\r\n```java\r\npublic final class Test {\r\n    @Target({ElementType.TYPE_USE, ElementType.RECORD_COMPONENT})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface Annot {}\r\n\r\n    public static final class C {\r\n        List&lt;@Annot String&gt; strings;\r\n    }\r\n\r\n    public record R(List&lt;@Annot String&gt; strings) {}\r\n\r\n    public static void main(String[] args) {\r\n        {\r\n            Field field = C.class.getDeclaredFields()[0];\r\n            AnnotatedParameterizedType type = (AnnotatedParameterizedType) field.getAnnotatedType();\r\n            AnnotatedType argument = type.getAnnotatedActualTypeArguments()[0];\r\n            System.out.println(Arrays.toString(argument.getAnnotations()));\r\n        }\r\n        {\r\n            RecordComponent component = R.class.getRecordComponents()[0];\r\n            AnnotatedParameterizedType type = (AnnotatedParameterizedType) component.getAnnotatedType();\r\n            AnnotatedType argument = type.getAnnotatedActualTypeArguments()[0];\r\n            System.out.println(Arrays.toString(argument.getAnnotations()));\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**EDIT:** This seems to be a bug in the JDK... As soon as I annotate the list itself:\r\n\r\n```java\r\npublic record R(@Annot List&lt;@Annot String&gt; strings) {}\r\n```\r\n\r\nthe decompiled code becomes:\r\n\r\n```java\r\npublic static record R(@Test.Annot List&lt;@Test.Annot String&gt; strings) ...\r\n```\r\n\r\nNow, both, the list as well as the type parameter are annotated.\r\n\r\n**EDIT 2:** Confirmed to be a bug: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8292159","title":"How to reflectively access generic type parameter annotations of record components?","body":"<p>I've got the program at the end of this question and I want to reflectively access the <code>@Annot</code> annotation. However, while I can do so for classes, I can't get access to the annotation if it is used in a record component. Running the code outputs</p>\n<pre><code>[@tmp.Test$Annot()]\n[]\n</code></pre>\n<p>I've tried adding all types defined in <code>ElementType</code> enum to the <code>Targets</code> array, but it still doesn't work. Calling <code>getDeclaredAnnotations</code> doesn't work either. Is there any way to actually access this annotation? The decompiled code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static final class C {\n    List&lt;@Test.Annot String&gt; strings;\n    public C() {}\n}\npublic static record R(List&lt;String&gt; strings) {\n    public R(List&lt;@Test.Annot String&gt; strings) { this.strings = strings; }\n    public List&lt;@Test.Annot String&gt; strings() { return this.strings; }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public final class Test {\n    @Target({ElementType.TYPE_USE, ElementType.RECORD_COMPONENT})\n    @Retention(RetentionPolicy.RUNTIME)\n    public @interface Annot {}\n\n    public static final class C {\n        List&lt;@Annot String&gt; strings;\n    }\n\n    public record R(List&lt;@Annot String&gt; strings) {}\n\n    public static void main(String[] args) {\n        {\n            Field field = C.class.getDeclaredFields()[0];\n            AnnotatedParameterizedType type = (AnnotatedParameterizedType) field.getAnnotatedType();\n            AnnotatedType argument = type.getAnnotatedActualTypeArguments()[0];\n            System.out.println(Arrays.toString(argument.getAnnotations()));\n        }\n        {\n            RecordComponent component = R.class.getRecordComponents()[0];\n            AnnotatedParameterizedType type = (AnnotatedParameterizedType) component.getAnnotatedType();\n            AnnotatedType argument = type.getAnnotatedActualTypeArguments()[0];\n            System.out.println(Arrays.toString(argument.getAnnotations()));\n        }\n    }\n}\n</code></pre>\n<p><strong>EDIT:</strong> This seems to be a bug in the JDK... As soon as I annotate the list itself:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record R(@Annot List&lt;@Annot String&gt; strings) {}\n</code></pre>\n<p>the decompiled code becomes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static record R(@Test.Annot List&lt;@Test.Annot String&gt; strings) ...\n</code></pre>\n<p>Now, both, the list as well as the type parameter are annotated.</p>\n<p><strong>EDIT 2:</strong> Confirmed to be a bug: <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8292159\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8292159</a></p>\n"},{"tags":["java","xml","eclipse","hibernate"],"answers":[{"tags":[],"owner":{"account_id":26012626,"reputation":11,"user_id":19721447,"display_name":"MathTheJinx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660162624,"creation_date":1660162599,"answer_id":73312238,"question_id":73311799,"body_markdown":"Hibernate JAR (hibernate-core i suppose) or onr of its dependencies is probably not in your runtime classpath.","title":"NoClassDefFoundError error message in eclipse","body":"<p>Hibernate JAR (hibernate-core i suppose) or onr of its dependencies is probably not in your runtime classpath.</p>\n"}],"owner":{"account_id":25988755,"reputation":1,"user_id":19701333,"display_name":"csanders1982"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660162624,"creation_date":1660160059,"question_id":73311799,"body_markdown":"I am running a program on eclipse and I keep getting this error:\r\n\r\nUnable to initialize main class com.logic.AddProduct\r\nCaused by: java.lang.NoClassDefFoundError: org/hibernate/Session\r\n\r\nAny explainations?","title":"NoClassDefFoundError error message in eclipse","body":"<p>I am running a program on eclipse and I keep getting this error:</p>\n<p>Unable to initialize main class com.logic.AddProduct\nCaused by: java.lang.NoClassDefFoundError: org/hibernate/Session</p>\n<p>Any explainations?</p>\n"},{"tags":["java","android","android-room","primary-key"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660162522,"creation_date":1660123576,"answer_id":73303820,"question_id":73302528,"body_markdown":"I&#39;ve got a feeling that this some sort of bug in that it should probably only be a warning.\r\n\r\nAt first I was getting the issue, testing it using another answer. I then got it to compile OK by *right clicking the message and disabling Show Warnings*.\r\n\r\n- if you clean the project it reappears.\r\n\r\nUnder all tried circumstances Room still generates the **createAllTables** method in the class named the same as the @Database annotated class suffixed with **_Impl** (in the generated java), that includes both tables as e.g. :-\r\n\r\n        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `OperationType` (`operationTypeId` INTEGER NOT NULL, PRIMARY KEY(`operationTypeId`))&quot;);\r\n        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `Operation` (`operationId` INTEGER, `operationTypeId` INTEGER NOT NULL, PRIMARY KEY(`operationId`))&quot;);\r\n\r\n- I have literally used the classes as shown so just the single member variable (however note that it only changes the primary key the member variable operationTypeId member variable is still copied from the super class).\r\n\r\nFurthermore actually running the App and forcing database access and doing nothing else, then the result is a database that contains both tables:-\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2VjXx.png","title":"How to override a PrimaryKey in Android Room entity","body":"<p>I've got a feeling that this some sort of bug in that it should probably only be a warning.</p>\n<p>At first I was getting the issue, testing it using another answer. I then got it to compile OK by <em>right clicking the message and disabling Show Warnings</em>.</p>\n<ul>\n<li>if you clean the project it reappears.</li>\n</ul>\n<p>Under all tried circumstances Room still generates the <strong>createAllTables</strong> method in the class named the same as the @Database annotated class suffixed with <strong>_Impl</strong> (in the generated java), that includes both tables as e.g. :-</p>\n<pre><code>    _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `OperationType` (`operationTypeId` INTEGER NOT NULL, PRIMARY KEY(`operationTypeId`))&quot;);\n    _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `Operation` (`operationId` INTEGER, `operationTypeId` INTEGER NOT NULL, PRIMARY KEY(`operationId`))&quot;);\n</code></pre>\n<ul>\n<li>I have literally used the classes as shown so just the single member variable (however note that it only changes the primary key the member variable operationTypeId member variable is still copied from the super class).</li>\n</ul>\n<p>Furthermore actually running the App and forcing database access and doing nothing else, then the result is a database that contains both tables:-</p>\n<p><a href=\"https://i.stack.imgur.com/2VjXx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2VjXx.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":25987826,"reputation":33,"user_id":19700539,"display_name":"Joe T."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73303820,"answer_count":1,"score":3,"last_activity_date":1660162522,"creation_date":1660117457,"question_id":73302528,"body_markdown":"I&#39;m new for the Android Room library. I use Room database to store configuration data for my application.\r\nI have two classes declared as @Entity : **Operation** and **OperationType**.\r\n\r\n**Operation** extends **OperationType** super class. **OperationType** has a member declared as @PrimaryKey : \r\n[operation][1]\r\n\r\nI&#39;d like to define a new @PrimaryKey in Operation class, but at this point, I obtain an error during compilation : \r\n[compil err][2]\r\n\r\nI don&#39;t understand why this error appears and what i&#39;m doing wrong. According to Room documentation, override is possible : [PrimaryKey &#160;|&#160; Android Developers][3]. Any idea or suggestion will be appreciated :)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WcHcF.png\r\n  [2]: https://i.stack.imgur.com/sSpPC.png\r\n  [3]: https://developer.android.com/reference/androidx/room/PrimaryKey","title":"How to override a PrimaryKey in Android Room entity","body":"<p>I'm new for the Android Room library. I use Room database to store configuration data for my application.\nI have two classes declared as @Entity : <strong>Operation</strong> and <strong>OperationType</strong>.</p>\n<p><strong>Operation</strong> extends <strong>OperationType</strong> super class. <strong>OperationType</strong> has a member declared as @PrimaryKey :\n<a href=\"https://i.stack.imgur.com/WcHcF.png\" rel=\"nofollow noreferrer\">operation</a></p>\n<p>I'd like to define a new @PrimaryKey in Operation class, but at this point, I obtain an error during compilation :\n<a href=\"https://i.stack.imgur.com/sSpPC.png\" rel=\"nofollow noreferrer\">compil err</a></p>\n<p>I don't understand why this error appears and what i'm doing wrong. According to Room documentation, override is possible : <a href=\"https://developer.android.com/reference/androidx/room/PrimaryKey\" rel=\"nofollow noreferrer\">PrimaryKey  |  Android Developers</a>. Any idea or suggestion will be appreciated :)</p>\n"},{"tags":["java","string","sorting","hashmap"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1660135850,"post_id":73306378,"comment_id":129460944,"body_markdown":"`in ascending order of number of occurrence` - what if the number of occurrences of two different characters is the same, what should be the order?","body":"<code>in ascending order of number of occurrence</code> - what if the number of occurrences of two different characters is the same, what should be the order?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1660136230,"post_id":73306378,"comment_id":129461087,"body_markdown":"Are there any constraints regarding input string? Meaning, it might contain any symbols, only English lower case characters, etc.?","body":"Are there any constraints regarding input string? Meaning, it might contain any symbols, only English lower case characters, etc.?"},{"owner":{"account_id":13658107,"reputation":29,"user_id":9854020,"display_name":"Avisek Adhikari"},"score":0,"creation_date":1660188828,"post_id":73306378,"comment_id":129475564,"body_markdown":"@AlexanderIvanchenko I was just given to work on this particular string. But I guess we can improve the code to include all your criteria as well.","body":"@AlexanderIvanchenko I was just given to work on this particular string. But I guess we can improve the code to include all your criteria as well."}],"answers":[{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660147095,"creation_date":1660136947,"answer_id":73306915,"question_id":73306378,"body_markdown":"This is a basic counting sort.  You use an array of int to count the occurrence of each character.  Then use the array to print them in ascending order.  The indices 0-26 map to &#39;a&#39; to &#39;z&#39;.\r\n\r\nThen use counting sort again to sort by occurrence. This works well only if your string isn&#39;t too long.    \r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class Main{\r\n    public static void main(String[] args) {\r\n        String s = &quot;abbccbddddeeeee&quot;;\r\n        int[] count = new int[26];\r\n        for(char c: s.toCharArray()) \r\n           count[c-&#39;a&#39;]++;\r\n           \r\n        char[] sort = new char[s.length()];\r\n        for(int i=0; i&lt;count.length; i++) \r\n           sort[count[i]]=(char)(i+&#39;a&#39;);\r\n        \r\n        for(int i=0; i&lt;sort.length; i++){\r\n            if (&#39;a&#39; &lt;= sort[i]  &amp;&amp; sort[i] &lt;= &#39;z&#39;){\r\n              for(int j=0; j&lt;i; j++) \r\n                System.out.print(sort[i]);\r\n              System.out.println();\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"Interview Question - Printing the pattern formed by Characters of the given String sorted in Ascending order","body":"<p>This is a basic counting sort.  You use an array of int to count the occurrence of each character.  Then use the array to print them in ascending order.  The indices 0-26 map to 'a' to 'z'.</p>\n<p>Then use counting sort again to sort by occurrence. This works well only if your string isn't too long.</p>\n<pre><code>import java.util.*;\n\npublic class Main{\n    public static void main(String[] args) {\n        String s = &quot;abbccbddddeeeee&quot;;\n        int[] count = new int[26];\n        for(char c: s.toCharArray()) \n           count[c-'a']++;\n           \n        char[] sort = new char[s.length()];\n        for(int i=0; i&lt;count.length; i++) \n           sort[count[i]]=(char)(i+'a');\n        \n        for(int i=0; i&lt;sort.length; i++){\n            if ('a' &lt;= sort[i]  &amp;&amp; sort[i] &lt;= 'z'){\n              for(int j=0; j&lt;i; j++) \n                System.out.print(sort[i]);\n              System.out.println();\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660138879,"creation_date":1660137497,"answer_id":73307049,"question_id":73306378,"body_markdown":"With your idea of using `Map` you were on the right track.\r\n\r\n&lt;h1&gt;Imperative approach&lt;/h1&gt;\r\n\r\nMain steps:\r\n\r\n* Generate a *map* of frequencies for each symbol in the given string.\r\n\r\n* Sort the *map* entries based on *values*. Obviously, it&#39;s not doable withing a *map*, we need a different collection for that. We can dump map entries into a `List` and sort it.\r\n\r\n* Print the contents of the *list*.\r\n\r\nThat&#39;s how it can be implemented:\r\n\r\n    public static void printFrequencyPattern(String str) {\r\n    \r\n        Map&lt;Character, Integer&gt; frequencies = getFrequencies(str);\r\n        List&lt;Map.Entry&lt;Character, Integer&gt;&gt; sortedEntries = toSortedEntryList(frequencies);\r\n        \r\n        for (Map.Entry&lt;Character, Integer&gt; entry: sortedEntries) {\r\n            System.out.println(entry.getKey().toString().repeat(entry.getValue()));\r\n        }\r\n    }\r\n    \r\n    public static Map&lt;Character, Integer&gt; getFrequencies(String str) {\r\n        Map&lt;Character, Integer&gt; frequencies = new HashMap&lt;&gt;();\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            frequencies.merge(str.charAt(i), 1, Integer::sum);\r\n        }\r\n        return frequencies;\r\n    }\r\n    \r\n    public static List&lt;Map.Entry&lt;Character, Integer&gt;&gt; toSortedEntryList(Map&lt;Character, Integer&gt; frequencies) {\r\n        \r\n        List&lt;Map.Entry&lt;Character, Integer&gt;&gt; sortedEntries = new ArrayList&lt;&gt;(frequencies.entrySet());\r\n        sortedEntries.sort(Map.Entry.comparingByValue());\r\n        \r\n        return sortedEntries;\r\n    }\r\n\r\n`main()`\r\n\r\n    public static void main(String[] args) {\r\n        String test = &quot;abbccbdddddddeeeee&quot;;\r\n        printFrequencyPattern(&quot;abbccbdddddddeeeee&quot;);\r\n    }\r\n\r\n*Output:*\r\n```\r\na\r\ncc\r\nbbb\r\neeeee\r\nddddddd\r\n```\r\n\r\n&lt;h1&gt;Stream-based Solution&lt;/h1&gt;\r\n\r\nIn case if you&#39;re comfortable with using Stream IPA, here&#39;s a one-liner which everything as the code above within a single statement.\r\n\r\nThe idea behind the code is mostly the same, *collector* `toMap()` generates a map of frequencies. Then a stream of its *entries* gets created and sorted by *value* of each entry.\r\n\r\n```\r\nstr.codePoints()\r\n    .boxed()\r\n    .collect(Collectors.toMap(\r\n        Function.identity(),\r\n        ch -&gt; 1,\r\n        Integer::sum\r\n    ))\r\n    .entrySet().stream()\r\n    .sorted(Map.Entry.comparingByValue())\r\n    .forEachOrdered(entry -&gt; \r\n        System.out.println(Character.toString(entry.getKey()).repeat(entry.getValue()))\r\n    );\r\n```","title":"Interview Question - Printing the pattern formed by Characters of the given String sorted in Ascending order","body":"<p>With your idea of using <code>Map</code> you were on the right track.</p>\n<h1>Imperative approach</h1>\n<p>Main steps:</p>\n<ul>\n<li><p>Generate a <em>map</em> of frequencies for each symbol in the given string.</p>\n</li>\n<li><p>Sort the <em>map</em> entries based on <em>values</em>. Obviously, it's not doable withing a <em>map</em>, we need a different collection for that. We can dump map entries into a <code>List</code> and sort it.</p>\n</li>\n<li><p>Print the contents of the <em>list</em>.</p>\n</li>\n</ul>\n<p>That's how it can be implemented:</p>\n<pre><code>public static void printFrequencyPattern(String str) {\n\n    Map&lt;Character, Integer&gt; frequencies = getFrequencies(str);\n    List&lt;Map.Entry&lt;Character, Integer&gt;&gt; sortedEntries = toSortedEntryList(frequencies);\n    \n    for (Map.Entry&lt;Character, Integer&gt; entry: sortedEntries) {\n        System.out.println(entry.getKey().toString().repeat(entry.getValue()));\n    }\n}\n\npublic static Map&lt;Character, Integer&gt; getFrequencies(String str) {\n    Map&lt;Character, Integer&gt; frequencies = new HashMap&lt;&gt;();\n    for (int i = 0; i &lt; str.length(); i++) {\n        frequencies.merge(str.charAt(i), 1, Integer::sum);\n    }\n    return frequencies;\n}\n\npublic static List&lt;Map.Entry&lt;Character, Integer&gt;&gt; toSortedEntryList(Map&lt;Character, Integer&gt; frequencies) {\n    \n    List&lt;Map.Entry&lt;Character, Integer&gt;&gt; sortedEntries = new ArrayList&lt;&gt;(frequencies.entrySet());\n    sortedEntries.sort(Map.Entry.comparingByValue());\n    \n    return sortedEntries;\n}\n</code></pre>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    String test = &quot;abbccbdddddddeeeee&quot;;\n    printFrequencyPattern(&quot;abbccbdddddddeeeee&quot;);\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>a\ncc\nbbb\neeeee\nddddddd\n</code></pre>\n<h1>Stream-based Solution</h1>\n<p>In case if you're comfortable with using Stream IPA, here's a one-liner which everything as the code above within a single statement.</p>\n<p>The idea behind the code is mostly the same, <em>collector</em> <code>toMap()</code> generates a map of frequencies. Then a stream of its <em>entries</em> gets created and sorted by <em>value</em> of each entry.</p>\n<pre><code>str.codePoints()\n    .boxed()\n    .collect(Collectors.toMap(\n        Function.identity(),\n        ch -&gt; 1,\n        Integer::sum\n    ))\n    .entrySet().stream()\n    .sorted(Map.Entry.comparingByValue())\n    .forEachOrdered(entry -&gt; \n        System.out.println(Character.toString(entry.getKey()).repeat(entry.getValue()))\n    );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660162032,"creation_date":1660139387,"answer_id":73307525,"question_id":73306378,"body_markdown":"Using a map for a frequency count is a common practice and a good start.  To demonstrate:\r\n\r\nFirst, create some random data.  I wanted there to be the same number of some elements to allow for sorting in lexical order if the counts were equal (not required based on your question but easy to do).\r\n```\r\nString s = &quot;abbcccddddeeeeffffffggggggg&quot;;\r\nList&lt;String&gt; list =\r\n\t\tnew ArrayList&lt;&gt;(Arrays.stream(s.split(&quot;&quot;)).toList());\r\nCollections.shuffle(list);\r\n```\r\nNow define a comparator to use in the sort - first on count, then on lexical key. Doing it outside the stream avoids clutter.\r\n```\r\n Comparator&lt;Entry&lt;String, Long&gt;&gt; comp = Entry\r\n\t                .&lt;String, Long&gt;comparingByValue()\r\n\t                .thenComparing(Entry.comparingByKey());\r\n```\r\nThen stream the list and do a `frequency count`. The `key` will be the `letter` and the `count` will be `its frequency of occurrences`.  Take the resulting `entrySet` of the map and sort first based on count, then based on lexical order. Then print using the Entry fields.\r\n``` \r\nlist.stream()\r\n\t\t.collect(Collectors.groupingBy(a -&gt; a,\r\n\t\t\t\tCollectors.counting()))\r\n\t\t.entrySet().stream().sorted(comp)\r\n\t\t.forEach(e -&gt; System.out.println(\r\n\t\t\t\te.getKey().repeat(e.getValue().intValue())));\r\n```\r\nprints\r\n```\r\na\r\nbb\r\nccc\r\ndddd\r\neeee\r\nffffff\r\nggggggg\r\n","title":"Interview Question - Printing the pattern formed by Characters of the given String sorted in Ascending order","body":"<p>Using a map for a frequency count is a common practice and a good start.  To demonstrate:</p>\n<p>First, create some random data.  I wanted there to be the same number of some elements to allow for sorting in lexical order if the counts were equal (not required based on your question but easy to do).</p>\n<pre><code>String s = &quot;abbcccddddeeeeffffffggggggg&quot;;\nList&lt;String&gt; list =\n        new ArrayList&lt;&gt;(Arrays.stream(s.split(&quot;&quot;)).toList());\nCollections.shuffle(list);\n</code></pre>\n<p>Now define a comparator to use in the sort - first on count, then on lexical key. Doing it outside the stream avoids clutter.</p>\n<pre><code> Comparator&lt;Entry&lt;String, Long&gt;&gt; comp = Entry\n                    .&lt;String, Long&gt;comparingByValue()\n                    .thenComparing(Entry.comparingByKey());\n</code></pre>\n<p>Then stream the list and do a <code>frequency count</code>. The <code>key</code> will be the <code>letter</code> and the <code>count</code> will be <code>its frequency of occurrences</code>.  Take the resulting <code>entrySet</code> of the map and sort first based on count, then based on lexical order. Then print using the Entry fields.</p>\n<pre><code>list.stream()\n        .collect(Collectors.groupingBy(a -&gt; a,\n                Collectors.counting()))\n        .entrySet().stream().sorted(comp)\n        .forEach(e -&gt; System.out.println(\n                e.getKey().repeat(e.getValue().intValue())));\n</code></pre>\n<p>prints</p>\n<pre><code>a\nbb\nccc\ndddd\neeee\nffffff\nggggggg\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26006065,"reputation":38,"user_id":19715753,"display_name":"Mohammad Shadab Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660143243,"creation_date":1660143243,"answer_id":73308469,"question_id":73306378,"body_markdown":"One way you can do this is by storing occurrence number per character in a map and then sort the map. After that you can print the map as your pattern.\r\n\r\nYou have already stored the occurrences in a map.\r\n```\r\n// sort the map. You can do it in any way you like\r\nMap&lt;Character, Integer&gt; sortedMap = pattern.entrySet().stream()\r\n                                .sorted(Map.Entry.comparingByValue())\r\n                                .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue,(e1, e2) -&gt; e1, LinkedHashMap::new));\r\n\r\n//print the pattern\r\nSystem.out.println(sortedMap);\r\nfor(Character key : sortedMap.keySet()){\r\n  for(int i=1; i&lt;= sortedMap.get(key);i++){\r\n    System.out.print(key);\r\n  }\r\n  System.out.println();\r\n  \r\n}\r\n```","title":"Interview Question - Printing the pattern formed by Characters of the given String sorted in Ascending order","body":"<p>One way you can do this is by storing occurrence number per character in a map and then sort the map. After that you can print the map as your pattern.</p>\n<p>You have already stored the occurrences in a map.</p>\n<pre><code>// sort the map. You can do it in any way you like\nMap&lt;Character, Integer&gt; sortedMap = pattern.entrySet().stream()\n                                .sorted(Map.Entry.comparingByValue())\n                                .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue,(e1, e2) -&gt; e1, LinkedHashMap::new));\n\n//print the pattern\nSystem.out.println(sortedMap);\nfor(Character key : sortedMap.keySet()){\n  for(int i=1; i&lt;= sortedMap.get(key);i++){\n    System.out.print(key);\n  }\n  System.out.println();\n  \n}\n</code></pre>\n"}],"owner":{"account_id":13658107,"reputation":29,"user_id":9854020,"display_name":"Avisek Adhikari"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":4,"score":2,"last_activity_date":1660162032,"creation_date":1660134686,"question_id":73306378,"body_markdown":"I was asked this question during an interview.\r\n\r\n&gt; Print the pattern of characters from the given word by arranging the characters in ***ascending*** order based on the ***number of occurrencies***.\r\n&gt; \r\n&gt; *Input:* `&quot;abbccbddddeeeee&quot;`\r\n&gt; \r\n&gt; *Output:*\r\n&gt;    \r\n&gt; \r\n&gt;        a\r\n&gt;        cc\r\n&gt;        bbb\r\n&gt;        dddd\r\n&gt;        eeeee\r\n\r\nI was not able to solve it on the spot, and I can&#39;t make my solution working for now.\r\n\r\nSpecifically, I&#39;m having trouble with arranging in ascending order after populating a `HashMap`.\r\n\r\n*My code:*\r\n```\r\nString test = &quot;abbccbdddddddeeeee&quot;;\r\n\t\t\r\nList&lt;Character&gt; orderedList = new ArrayList&lt;Character&gt;();\r\nList&lt;Integer&gt; orderedNumber = new ArrayList&lt;Integer&gt;();\r\n\t\t\r\nchar[] testing = test.toCharArray();\r\n\t\t\r\nint value = 1;\r\n\t\t\r\nMap&lt;Character, Integer&gt; pattern = new HashMap&lt;&gt;();\r\n\t\t\r\nfor (int i = 0; i &lt; testing.length; i++) {\r\n\tvalue = 1;\r\n\tif (!pattern.containsKey(testing[i])) {\r\n\t\tpattern.put(testing[i], value);\r\n\t\t\t\r\n\t\tfor (int j = i + 1; j &lt; test.length(); j++) {\r\n\t\t\tif (testing[i] == testing[j]) {\r\n\t\t\t\tvalue = pattern.get(testing[i]);\r\n\t\t\t\tvalue += 1;\r\n\t\t\t\tpattern.replace(testing[i], value);\r\n\t\t\t}\r\n\t\t}\r\n\t\torderedList.add(testing[i]);\r\n\t\torderedNumber.add(value);\r\n\t}\r\n}\r\n```\r\n\r\nThis is for the printing part, but as you can see. I have little success in it. \r\n```\r\nSystem.out.println(orderedList);\r\nSystem.out.println(orderedNumber);\r\n\r\nint minNumber = 0;\r\nint minIndex = 0;\r\n\t\t\r\nfor (int i = 0; i &lt; orderedList.size(); i++) {\r\n\r\n\tminNumber = pattern.get(orderedList.get(i));\r\n\tint maxNumber = 0;\r\n\r\n\tfor (int j = i +1; j &lt; orderedList.size(); j++) {\r\n\t\tif (minNumber &gt; pattern.get(orderedList.get(j)))\t{\r\n\t\t\tminNumber = pattern.get(orderedList.get(j));\r\n\t\t\tmaxNumber = pattern.get(orderedList.get(i));\r\n\t\t}\r\n\t}\r\n\tSystem.out.println(minNumber);\r\n}\r\n```","title":"Interview Question - Printing the pattern formed by Characters of the given String sorted in Ascending order","body":"<p>I was asked this question during an interview.</p>\n<blockquote>\n<p>Print the pattern of characters from the given word by arranging the characters in <em><strong>ascending</strong></em> order based on the <em><strong>number of occurrencies</strong></em>.</p>\n<p><em>Input:</em> <code>&quot;abbccbddddeeeee&quot;</code></p>\n<p><em>Output:</em></p>\n<pre><code>   a\n   cc\n   bbb\n   dddd\n   eeeee\n</code></pre>\n</blockquote>\n<p>I was not able to solve it on the spot, and I can't make my solution working for now.</p>\n<p>Specifically, I'm having trouble with arranging in ascending order after populating a <code>HashMap</code>.</p>\n<p><em>My code:</em></p>\n<pre><code>String test = &quot;abbccbdddddddeeeee&quot;;\n        \nList&lt;Character&gt; orderedList = new ArrayList&lt;Character&gt;();\nList&lt;Integer&gt; orderedNumber = new ArrayList&lt;Integer&gt;();\n        \nchar[] testing = test.toCharArray();\n        \nint value = 1;\n        \nMap&lt;Character, Integer&gt; pattern = new HashMap&lt;&gt;();\n        \nfor (int i = 0; i &lt; testing.length; i++) {\n    value = 1;\n    if (!pattern.containsKey(testing[i])) {\n        pattern.put(testing[i], value);\n            \n        for (int j = i + 1; j &lt; test.length(); j++) {\n            if (testing[i] == testing[j]) {\n                value = pattern.get(testing[i]);\n                value += 1;\n                pattern.replace(testing[i], value);\n            }\n        }\n        orderedList.add(testing[i]);\n        orderedNumber.add(value);\n    }\n}\n</code></pre>\n<p>This is for the printing part, but as you can see. I have little success in it.</p>\n<pre><code>System.out.println(orderedList);\nSystem.out.println(orderedNumber);\n\nint minNumber = 0;\nint minIndex = 0;\n        \nfor (int i = 0; i &lt; orderedList.size(); i++) {\n\n    minNumber = pattern.get(orderedList.get(i));\n    int maxNumber = 0;\n\n    for (int j = i +1; j &lt; orderedList.size(); j++) {\n        if (minNumber &gt; pattern.get(orderedList.get(j)))    {\n            minNumber = pattern.get(orderedList.get(j));\n            maxNumber = pattern.get(orderedList.get(i));\n        }\n    }\n    System.out.println(minNumber);\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","encryption","aes"],"answers":[{"tags":[],"owner":{"account_id":16445277,"reputation":1432,"user_id":11880263,"display_name":"Nimesh Patel"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1609403603,"creation_date":1609303116,"answer_id":65502089,"question_id":65502088,"body_markdown":"**Method1:** This method is available since version 1.4 of the Apache Commons Codec. If the OS of the phone has only an older version of the Codec package, the method won&#39;t be available. Alternatively, we can use a method that exists in older versions.\r\n\r\n**Instead of:**\r\n\r\n    String encodedString = Base64.encodeBase64String(bytes);\r\n\r\n**Use:**\r\n\r\n    String encodedString = new String(Base64.encodeBase64(bytes));\r\n\r\n**And for decoding, instead of:**\r\n\r\n    byte[] bytes = Base64.decodeBase64(encodedString);\r\n\r\n**Use:**\r\n\r\n    byte[] bytes = Base64.decodeBase64(encodedString.getBytes()); \r\n\r\nMethod-2: **You can Also Use Below Complete code for Encryption and decryption.**\r\n\r\n    import android.util.Base64;\r\n    import org.apache.commons.codec.DecoderException;\r\n    import org.apache.commons.codec.binary.Hex;\r\n    import javax.crypto.*;\r\n    import javax.crypto.spec.IvParameterSpec;\r\n    import javax.crypto.spec.PBEKeySpec;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.security.InvalidAlgorithmParameterException;\r\n    import java.security.InvalidKeyException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.spec.InvalidKeySpecException;\r\n    import java.security.spec.KeySpec;\r\n\r\n    public class AesUtil {\r\n    private  int keySize = 256;\r\n    private  int iterationCount =  1000 ;\r\n    private  Cipher cipher;\r\n\r\n    private final String salt = &quot;36e8fc9a6adf090665f459a7ad1b864d&quot;;\r\n    private final String iv = &quot;ab00b7ea4e88500f2f0a17a7b5c7bcb1&quot;;\r\n    private final String passphrase = &quot;ArknRQxD1YgaSFRHrjYazX7JMrlRxTERdkQx0dhENVlz&quot;;\r\n\r\n    public AesUtil() {\r\n        try {\r\n            cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n        }\r\n        catch (NoSuchAlgorithmException | NoSuchPaddingException e) {\r\n            throw fail(e);\r\n        }\r\n    }\r\n    \r\n    public String encrypt(String plaintext) {\r\n        try {\r\n            SecretKey key = generateKey(salt, passphrase);\r\n            byte[] encrypted = doFinal(Cipher.ENCRYPT_MODE, key, iv, plaintext.getBytes(&quot;UTF-8&quot;));\r\n            return Base64.encodeToString(encrypted, Base64.DEFAULT);\r\n        }\r\n        catch (UnsupportedEncodingException e) {\r\n            throw fail(e);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    public String decrypt(String salt, String iv, String passphrase, String ciphertext) {\r\n        try {\r\n            SecretKey key = generateKey(salt, passphrase);\r\n            byte[] decrypted = doFinal(Cipher.DECRYPT_MODE, key, iv, base64(ciphertext));\r\n            return new String(decrypted, &quot;UTF-8&quot;);\r\n        } catch (Exception e) {\r\n            throw fail(e);\r\n        }\r\n    }\r\n\r\n    private byte[] doFinal(int encryptMode, SecretKey key, String iv, byte[] bytes) {\r\n        try {\r\n            cipher.init(encryptMode, key, new IvParameterSpec(hex(iv)));\r\n            return cipher.doFinal(bytes);\r\n        } catch (InvalidKeyException\r\n                | InvalidAlgorithmParameterException\r\n                | IllegalBlockSizeException\r\n                | BadPaddingException e) {\r\n            throw fail(e);\r\n        }\r\n    }\r\n\r\n    public SecretKey generateKey(String salt, String passphrase) {\r\n        try {\r\n            SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);\r\n            KeySpec spec = new PBEKeySpec(passphrase.toCharArray(), hex(salt), iterationCount, keySize);\r\n            SecretKey key = new SecretKeySpec(factory.generateSecret(spec).getEncoded(), &quot;AES&quot;);\r\n            return key;\r\n        }\r\n        catch (NoSuchAlgorithmException | InvalidKeySpecException e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static byte[] base64(String str) {\r\n        return Base64.decode(str, Base64.DEFAULT);\r\n    }\r\n\r\n    public static byte[] hex(String str) {\r\n        try {\r\n            return Hex.decodeHex(str.toCharArray());\r\n        }\r\n        catch (DecoderException e) {\r\n            throw fail(e);\r\n        }\r\n    }\r\n\r\n    private IllegalStateException fail(Exception e) {\r\n        e.printStackTrace();\r\n        return null;\r\n    }\r\n\r\n\r\n    private static IllegalStateException fail(DecoderException e) {\r\n        e.printStackTrace();\r\n        return null;\r\n    } }\r\n\r\n\r\n\r\n","title":"No static method encodeBase64String([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Base64; or its super classes","body":"<p><strong>Method1:</strong> This method is available since version 1.4 of the Apache Commons Codec. If the OS of the phone has only an older version of the Codec package, the method won't be available. Alternatively, we can use a method that exists in older versions.</p>\n<p><strong>Instead of:</strong></p>\n<pre><code>String encodedString = Base64.encodeBase64String(bytes);\n</code></pre>\n<p><strong>Use:</strong></p>\n<pre><code>String encodedString = new String(Base64.encodeBase64(bytes));\n</code></pre>\n<p><strong>And for decoding, instead of:</strong></p>\n<pre><code>byte[] bytes = Base64.decodeBase64(encodedString);\n</code></pre>\n<p><strong>Use:</strong></p>\n<pre><code>byte[] bytes = Base64.decodeBase64(encodedString.getBytes()); \n</code></pre>\n<p>Method-2: <strong>You can Also Use Below Complete code for Encryption and decryption.</strong></p>\n<pre><code>import android.util.Base64;\nimport org.apache.commons.codec.DecoderException;\nimport org.apache.commons.codec.binary.Hex;\nimport javax.crypto.*;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.io.UnsupportedEncodingException;\nimport java.security.InvalidAlgorithmParameterException;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.spec.InvalidKeySpecException;\nimport java.security.spec.KeySpec;\n\npublic class AesUtil {\nprivate  int keySize = 256;\nprivate  int iterationCount =  1000 ;\nprivate  Cipher cipher;\n\nprivate final String salt = &quot;36e8fc9a6adf090665f459a7ad1b864d&quot;;\nprivate final String iv = &quot;ab00b7ea4e88500f2f0a17a7b5c7bcb1&quot;;\nprivate final String passphrase = &quot;ArknRQxD1YgaSFRHrjYazX7JMrlRxTERdkQx0dhENVlz&quot;;\n\npublic AesUtil() {\n    try {\n        cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n    }\n    catch (NoSuchAlgorithmException | NoSuchPaddingException e) {\n        throw fail(e);\n    }\n}\n\npublic String encrypt(String plaintext) {\n    try {\n        SecretKey key = generateKey(salt, passphrase);\n        byte[] encrypted = doFinal(Cipher.ENCRYPT_MODE, key, iv, plaintext.getBytes(&quot;UTF-8&quot;));\n        return Base64.encodeToString(encrypted, Base64.DEFAULT);\n    }\n    catch (UnsupportedEncodingException e) {\n        throw fail(e);\n    }\n}\n\n\n\n\npublic String decrypt(String salt, String iv, String passphrase, String ciphertext) {\n    try {\n        SecretKey key = generateKey(salt, passphrase);\n        byte[] decrypted = doFinal(Cipher.DECRYPT_MODE, key, iv, base64(ciphertext));\n        return new String(decrypted, &quot;UTF-8&quot;);\n    } catch (Exception e) {\n        throw fail(e);\n    }\n}\n\nprivate byte[] doFinal(int encryptMode, SecretKey key, String iv, byte[] bytes) {\n    try {\n        cipher.init(encryptMode, key, new IvParameterSpec(hex(iv)));\n        return cipher.doFinal(bytes);\n    } catch (InvalidKeyException\n            | InvalidAlgorithmParameterException\n            | IllegalBlockSizeException\n            | BadPaddingException e) {\n        throw fail(e);\n    }\n}\n\npublic SecretKey generateKey(String salt, String passphrase) {\n    try {\n        SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);\n        KeySpec spec = new PBEKeySpec(passphrase.toCharArray(), hex(salt), iterationCount, keySize);\n        SecretKey key = new SecretKeySpec(factory.generateSecret(spec).getEncoded(), &quot;AES&quot;);\n        return key;\n    }\n    catch (NoSuchAlgorithmException | InvalidKeySpecException e) {\n        return null;\n    }\n}\n\npublic static byte[] base64(String str) {\n    return Base64.decode(str, Base64.DEFAULT);\n}\n\npublic static byte[] hex(String str) {\n    try {\n        return Hex.decodeHex(str.toCharArray());\n    }\n    catch (DecoderException e) {\n        throw fail(e);\n    }\n}\n\nprivate IllegalStateException fail(Exception e) {\n    e.printStackTrace();\n    return null;\n}\n\n\nprivate static IllegalStateException fail(DecoderException e) {\n    e.printStackTrace();\n    return null;\n} }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3417755,"reputation":738,"user_id":2866150,"display_name":"Lokesh Deshmukh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660161665,"creation_date":1660161665,"answer_id":73312080,"question_id":65502088,"body_markdown":"After so many retries. I thought of copy pasting all the logic from sdk to my project. but seems like only one static function is not available in some of the android apache/commons framework. which is **Base64.encodeBase64String()**\r\n\r\nSo what I did is, I copied just one function in my project from library and recursive function call from the library exists in older framework..\r\n\r\nSo instead of using **Base64.encodeBase64String()** copy this function in your file and use this. This will work same.\r\n\r\n    fun encodeBase64String(binaryData: ByteArray?): String? {\r\n        return StringUtils.newStringUsAscii(\r\n            org.apache.commons.codec.binary.Base64.encodeBase64(\r\n                binaryData,\r\n                false\r\n            )\r\n        )\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/axJLC.png\r\n\r\n","title":"No static method encodeBase64String([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Base64; or its super classes","body":"<p>After so many retries. I thought of copy pasting all the logic from sdk to my project. but seems like only one static function is not available in some of the android apache/commons framework. which is <strong>Base64.encodeBase64String()</strong></p>\n<p>So what I did is, I copied just one function in my project from library and recursive function call from the library exists in older framework..</p>\n<p>So instead of using <strong>Base64.encodeBase64String()</strong> copy this function in your file and use this. This will work same.</p>\n<pre><code>fun encodeBase64String(binaryData: ByteArray?): String? {\n    return StringUtils.newStringUsAscii(\n        org.apache.commons.codec.binary.Base64.encodeBase64(\n            binaryData,\n            false\n        )\n    )\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/axJLC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/axJLC.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":16445277,"reputation":1432,"user_id":11880263,"display_name":"Nimesh Patel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3994,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65502089,"answer_count":2,"score":1,"last_activity_date":1660161665,"creation_date":1609303116,"question_id":65502088,"body_markdown":"Actually I am trying to add Aes Encryption and decryption functionality inside my android app. During encryption it will give me crash in my motoG5 S plus device but its working properly inside my One Plus device. \r\n\r\n**Here is my Code: AesUtil.Java**\r\n\r\n    public class AesUtil {\r\n    private  int keySize = 256;\r\n    private  int iterationCount =  1000 ;\r\n    private  Cipher cipher;\r\n\r\n    private final String salt = &quot;36e8fc9a6adf090665f459a7ad1b864d&quot;;\r\n    private final String iv = &quot;ab00b7ea4e88500f2f0a17a7b5c7bcb1&quot;;\r\n    private final String passphrase = &quot;ArknRQxD1YgaSFRHrjYazX7JMrlRxTERdkQx0dhENVlz&quot;;\r\n\r\n    public AesUtil() {\r\n        try {\r\n            cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n        }\r\n        catch (NoSuchAlgorithmException | NoSuchPaddingException e) {\r\n            throw fail(e);\r\n        }\r\n    }\r\n    \r\n    public String encrypt(String plaintext) {\r\n        try {\r\n            SecretKey key = generateKey(salt, passphrase);\r\n            byte[] encrypted = doFinal(Cipher.ENCRYPT_MODE, key, iv, plaintext.getBytes(&quot;UTF-8&quot;));\r\n            return Base64.encodeBase64String(encrypted);\r\n        }\r\n        catch (UnsupportedEncodingException e) {\r\n            throw fail(e);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    public String decrypt(String salt, String iv, String passphrase, String ciphertext) {\r\n        try {\r\n            SecretKey key = generateKey(salt, passphrase);\r\n            byte[] decrypted = doFinal(Cipher.DECRYPT_MODE, key, iv, base64(ciphertext));\r\n            return new String(decrypted, &quot;UTF-8&quot;);\r\n        } catch (Exception e) {\r\n            throw fail(e);\r\n        }\r\n    }\r\n\r\n    private byte[] doFinal(int encryptMode, SecretKey key, String iv, byte[] bytes) {\r\n        try {\r\n            cipher.init(encryptMode, key, new IvParameterSpec(hex(iv)));\r\n            return cipher.doFinal(bytes);\r\n        } catch (InvalidKeyException\r\n                | InvalidAlgorithmParameterException\r\n                | IllegalBlockSizeException\r\n                | BadPaddingException e) {\r\n            throw fail(e);\r\n        }\r\n    }\r\n\r\n    public SecretKey generateKey(String salt, String passphrase) {\r\n        try {\r\n            SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);\r\n            KeySpec spec = new PBEKeySpec(passphrase.toCharArray(), hex(salt), iterationCount, keySize);\r\n            SecretKey key = new SecretKeySpec(factory.generateSecret(spec).getEncoded(), &quot;AES&quot;);\r\n            return key;\r\n        }\r\n        catch (NoSuchAlgorithmException | InvalidKeySpecException e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static byte[] base64(String str) {\r\n        return Base64.decodeBase64(str);\r\n    }\r\n\r\n    public static byte[] hex(String str) {\r\n        try {\r\n            return Hex.decodeHex(str.toCharArray());\r\n        }\r\n        catch (DecoderException e) {\r\n            throw new IllegalStateException(e);\r\n        }\r\n    }\r\n\r\n    private IllegalStateException fail(Exception e) {\r\n        e.printStackTrace();\r\n        return null;\r\n    } }\r\n\r\n**Call Function in my main activity:**\r\n\r\n    String encryptedText=AesUtil().encrypt(&quot;codeinsidecoffee&quot;)\r\n\r\n**Error Log Inside Moto G5s Plus:**\r\n\r\n\r\n java.lang.NoSuchMethodError: No static method encodeBase64String([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Base64; or its super classes (declaration of &#39;org.apache.commons.codec.binary.Base64&#39; appears in /system/framework/org.apache.http.legacy.boot.jar)\r\n        at com.justcodenow.bynfor.utils.AesUtil.encrypt(AesUtil.java:40) \r\n","title":"No static method encodeBase64String([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Base64; or its super classes","body":"<p>Actually I am trying to add Aes Encryption and decryption functionality inside my android app. During encryption it will give me crash in my motoG5 S plus device but its working properly inside my One Plus device.</p>\n<p><strong>Here is my Code: AesUtil.Java</strong></p>\n<pre><code>public class AesUtil {\nprivate  int keySize = 256;\nprivate  int iterationCount =  1000 ;\nprivate  Cipher cipher;\n\nprivate final String salt = &quot;36e8fc9a6adf090665f459a7ad1b864d&quot;;\nprivate final String iv = &quot;ab00b7ea4e88500f2f0a17a7b5c7bcb1&quot;;\nprivate final String passphrase = &quot;ArknRQxD1YgaSFRHrjYazX7JMrlRxTERdkQx0dhENVlz&quot;;\n\npublic AesUtil() {\n    try {\n        cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n    }\n    catch (NoSuchAlgorithmException | NoSuchPaddingException e) {\n        throw fail(e);\n    }\n}\n\npublic String encrypt(String plaintext) {\n    try {\n        SecretKey key = generateKey(salt, passphrase);\n        byte[] encrypted = doFinal(Cipher.ENCRYPT_MODE, key, iv, plaintext.getBytes(&quot;UTF-8&quot;));\n        return Base64.encodeBase64String(encrypted);\n    }\n    catch (UnsupportedEncodingException e) {\n        throw fail(e);\n    }\n}\n\n\n\n\npublic String decrypt(String salt, String iv, String passphrase, String ciphertext) {\n    try {\n        SecretKey key = generateKey(salt, passphrase);\n        byte[] decrypted = doFinal(Cipher.DECRYPT_MODE, key, iv, base64(ciphertext));\n        return new String(decrypted, &quot;UTF-8&quot;);\n    } catch (Exception e) {\n        throw fail(e);\n    }\n}\n\nprivate byte[] doFinal(int encryptMode, SecretKey key, String iv, byte[] bytes) {\n    try {\n        cipher.init(encryptMode, key, new IvParameterSpec(hex(iv)));\n        return cipher.doFinal(bytes);\n    } catch (InvalidKeyException\n            | InvalidAlgorithmParameterException\n            | IllegalBlockSizeException\n            | BadPaddingException e) {\n        throw fail(e);\n    }\n}\n\npublic SecretKey generateKey(String salt, String passphrase) {\n    try {\n        SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);\n        KeySpec spec = new PBEKeySpec(passphrase.toCharArray(), hex(salt), iterationCount, keySize);\n        SecretKey key = new SecretKeySpec(factory.generateSecret(spec).getEncoded(), &quot;AES&quot;);\n        return key;\n    }\n    catch (NoSuchAlgorithmException | InvalidKeySpecException e) {\n        return null;\n    }\n}\n\npublic static byte[] base64(String str) {\n    return Base64.decodeBase64(str);\n}\n\npublic static byte[] hex(String str) {\n    try {\n        return Hex.decodeHex(str.toCharArray());\n    }\n    catch (DecoderException e) {\n        throw new IllegalStateException(e);\n    }\n}\n\nprivate IllegalStateException fail(Exception e) {\n    e.printStackTrace();\n    return null;\n} }\n</code></pre>\n<p><strong>Call Function in my main activity:</strong></p>\n<pre><code>String encryptedText=AesUtil().encrypt(&quot;codeinsidecoffee&quot;)\n</code></pre>\n<p><strong>Error Log Inside Moto G5s Plus:</strong></p>\n<p>java.lang.NoSuchMethodError: No static method encodeBase64String([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Base64; or its super classes (declaration of 'org.apache.commons.codec.binary.Base64' appears in /system/framework/org.apache.http.legacy.boot.jar)\nat com.justcodenow.bynfor.utils.AesUtil.encrypt(AesUtil.java:40)</p>\n"},{"tags":["java","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1660157324,"post_id":73311193,"comment_id":129469086,"body_markdown":"it is not possible in jpa. for that you have to build the query by concatinating strings","body":"it is not possible in jpa. for that you have to build the query by concatinating strings"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1660175343,"post_id":73311193,"comment_id":129473728,"body_markdown":"It is possible, just not with spring in this manner. You instead would use JPA criteria to programmatically build dynamic queries (ensuring type safety and possible injection vectors). Spring has tie ins with its Specifications feature","body":"It is possible, just not with spring in this manner. You instead would use JPA criteria to programmatically build dynamic queries (ensuring type safety and possible injection vectors). Spring has tie ins with its Specifications feature"}],"owner":{"account_id":10551898,"reputation":11,"user_id":7774349,"display_name":"priyanka Vankayala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1660161475,"creation_date":1660156731,"question_id":73311193,"body_markdown":"Here is the method in my repository Interface.\r\n\r\n\r\n            \r\n     @Query(&quot;select ?1 ,count(re) from Tabre group by ?1&quot;)                 \r\n    Page&lt;RequestEntity&gt; getGroupByColumnName(String columnName, Pageable pageable);\r\n\r\n\r\nI would like to give column name dynamically to the query as mentioned above. But I see below error         \r\nerror : \r\n\r\n&gt; &quot;I see Parameters are only supported in SELECT clauses when used as\r\n&gt; part of a INSERT INTO DML statement&quot;.\r\n\r\nI tried with single quotes, #{#columnName} with no luck.\r\nCan someone help me on how to give the column name dynamically to the `@query`","title":"How to Give dynamic column name to @Query","body":"<p>Here is the method in my repository Interface.</p>\n<pre><code> @Query(&quot;select ?1 ,count(re) from Tabre group by ?1&quot;)                 \nPage&lt;RequestEntity&gt; getGroupByColumnName(String columnName, Pageable pageable);\n</code></pre>\n<p>I would like to give column name dynamically to the query as mentioned above. But I see below error<br />\nerror :</p>\n<blockquote>\n<p>&quot;I see Parameters are only supported in SELECT clauses when used as\npart of a INSERT INTO DML statement&quot;.</p>\n</blockquote>\n<p>I tried with single quotes, #{#columnName} with no luck.\nCan someone help me on how to give the column name dynamically to the <code>@query</code></p>\n"},{"tags":["java","authentication","oauth-2.0","auth0"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1660174173,"post_id":73312036,"comment_id":129473548,"body_markdown":"You can&#39;t cite Youtube as a reliable resource, so ignore that for a start. You should only rely on the official documentation. Too broad.","body":"You can&#39;t cite Youtube as a reliable resource, so ignore that for a start. You should only rely on the official documentation. Too broad."},{"owner":{"account_id":7495825,"reputation":504,"user_id":5696129,"accept_rate":43,"display_name":"Nephilim"},"score":0,"creation_date":1660201006,"post_id":73312036,"comment_id":129477865,"body_markdown":"It&#39;s the auth0 channel though @user207421","body":"It&#39;s the auth0 channel though @user207421"}],"owner":{"account_id":7495825,"reputation":504,"user_id":5696129,"accept_rate":43,"display_name":"Nephilim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660161394,"creation_date":1660161394,"question_id":73312036,"body_markdown":"I&#39;m using a classic web app (javaEE). There&#39;s a safe place to store the client secret in the backend. So some Auth0 docs say I don&#39;t have to use PKCE. \r\n\r\n&gt; When public clients (e.g., native and single-page applications) request access tokens, some additional security concerns are posed that are not mitigated by the Authorization Code Flow alone. This is because:\r\n\r\nhttps://auth0.com/docs/get-started/authentication-and-authorization-flow/authorization-code-flow-with-proof-key-for-code-exchange-pkce\r\n\r\nThe quickstarts then only contain Native (mobile) and frontend-only languages. \r\n\r\nThen we look at this:\r\n\r\nhttps://oauth.net/2/pkce/\r\n\r\n&gt; PKCE is not a replacement for a client secret, and PKCE is recommended even if a client is using a client secret.\r\n\r\nMeaning even standard authorization flow should be extended with PKCE. \r\n\r\nIn this video:\r\n\r\nhttps://youtu.be/yf2Hge3VHKY?t=562 \r\n\r\n&gt; Auth0 recommends that any new application that you&#39;re building uses Authorization Code Flow with PKCE\r\n\r\nThis strikes me as conflicting info, but maybe I&#39;m misinterpreting this. In any case, my goal now is to use Authorization Code Flow with PKCE to an app that has so far only used Authorization Code.\r\n\r\nThe library I&#39;m using right now:\r\n\r\nhttps://github.com/auth0/auth0-java-mvc-common\r\n\r\nThis is basically all the relevant code, with most of the logic being redirects to servlets:\r\n\r\n```java\r\nString authorizeUrl = authController.buildAuthorizeUrl(request, response, &quot;https://redirect.uri/here&quot;)\r\n    .build();\r\n  ... wait for redirect\r\n  try {\r\n    Tokens tokens = authController.handle(request, response);\r\n    //Use or store the tokens\r\n    request.getSession().setAttribute(&quot;access_token&quot;, tokens.getAccessToken());\r\n} catch (IdentityVerificationException e) {\r\n    String code = e.getCode();\r\n\r\n}\r\n\r\n```\r\n\r\nAfter taking a quick glance at the source code, the library itself does not send any PKCE required parameters, namely code_verifier and code_challenge.  \r\n\r\n \r\nI look at Nimbus:\r\n\r\nhttps://connect2id.com/products/nimbus-oauth-openid-connect-sdk/examples/oauth/pkce\r\n\r\nAnd this library does not send a client_secret. This means we&#39;re suddenly not a confidential client (even though we can store the client secret just fine).\r\n\r\nSo... I&#39;m completely out of ideas, and have spent a lot of time trying to hack into aforementioned libraries to add the necessary PKCE flow. \r\n\r\nNow that I&#39;ve spent the better part of the day on this, I feel like I&#39;m losing my mind. \r\n\r\nLooking at great answers, such as these:\r\n\r\nhttps://stackoverflow.com/a/70909827/5696129\r\n\r\n&gt; The PKCE does protect against having a malicious app on the device to steal a token that is intended for another app. E.g. think of a Bank app, it is not good if another app on the device can get the token that the Bank app is using. That is the case illustrated in your picture and that PKCE mitigates against.\r\n\r\n\r\n&gt; PKCE is a good technique for Public Clients but might be used for Confidential Clients as well.\r\n\r\nI do not want to write up an entire auth0/oauth2 library, just to do what feels like adding a few HTTP headers and POST fields. Are there existing libraries that I should be using that I&#39;m somehow missing? Is there a good reason why existing libraries haven&#39;t implemented this yet?\r\n","title":"Java8 library support Auth0 Java PKCE for confidential clients?","body":"<p>I'm using a classic web app (javaEE). There's a safe place to store the client secret in the backend. So some Auth0 docs say I don't have to use PKCE.</p>\n<blockquote>\n<p>When public clients (e.g., native and single-page applications) request access tokens, some additional security concerns are posed that are not mitigated by the Authorization Code Flow alone. This is because:</p>\n</blockquote>\n<p><a href=\"https://auth0.com/docs/get-started/authentication-and-authorization-flow/authorization-code-flow-with-proof-key-for-code-exchange-pkce\" rel=\"nofollow noreferrer\">https://auth0.com/docs/get-started/authentication-and-authorization-flow/authorization-code-flow-with-proof-key-for-code-exchange-pkce</a></p>\n<p>The quickstarts then only contain Native (mobile) and frontend-only languages.</p>\n<p>Then we look at this:</p>\n<p><a href=\"https://oauth.net/2/pkce/\" rel=\"nofollow noreferrer\">https://oauth.net/2/pkce/</a></p>\n<blockquote>\n<p>PKCE is not a replacement for a client secret, and PKCE is recommended even if a client is using a client secret.</p>\n</blockquote>\n<p>Meaning even standard authorization flow should be extended with PKCE.</p>\n<p>In this video:</p>\n<p><a href=\"https://youtu.be/yf2Hge3VHKY?t=562\" rel=\"nofollow noreferrer\">https://youtu.be/yf2Hge3VHKY?t=562</a></p>\n<blockquote>\n<p>Auth0 recommends that any new application that you're building uses Authorization Code Flow with PKCE</p>\n</blockquote>\n<p>This strikes me as conflicting info, but maybe I'm misinterpreting this. In any case, my goal now is to use Authorization Code Flow with PKCE to an app that has so far only used Authorization Code.</p>\n<p>The library I'm using right now:</p>\n<p><a href=\"https://github.com/auth0/auth0-java-mvc-common\" rel=\"nofollow noreferrer\">https://github.com/auth0/auth0-java-mvc-common</a></p>\n<p>This is basically all the relevant code, with most of the logic being redirects to servlets:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String authorizeUrl = authController.buildAuthorizeUrl(request, response, &quot;https://redirect.uri/here&quot;)\n    .build();\n  ... wait for redirect\n  try {\n    Tokens tokens = authController.handle(request, response);\n    //Use or store the tokens\n    request.getSession().setAttribute(&quot;access_token&quot;, tokens.getAccessToken());\n} catch (IdentityVerificationException e) {\n    String code = e.getCode();\n\n}\n\n</code></pre>\n<p>After taking a quick glance at the source code, the library itself does not send any PKCE required parameters, namely code_verifier and code_challenge.</p>\n<p>I look at Nimbus:</p>\n<p><a href=\"https://connect2id.com/products/nimbus-oauth-openid-connect-sdk/examples/oauth/pkce\" rel=\"nofollow noreferrer\">https://connect2id.com/products/nimbus-oauth-openid-connect-sdk/examples/oauth/pkce</a></p>\n<p>And this library does not send a client_secret. This means we're suddenly not a confidential client (even though we can store the client secret just fine).</p>\n<p>So... I'm completely out of ideas, and have spent a lot of time trying to hack into aforementioned libraries to add the necessary PKCE flow.</p>\n<p>Now that I've spent the better part of the day on this, I feel like I'm losing my mind.</p>\n<p>Looking at great answers, such as these:</p>\n<p><a href=\"https://stackoverflow.com/a/70909827/5696129\">https://stackoverflow.com/a/70909827/5696129</a></p>\n<blockquote>\n<p>The PKCE does protect against having a malicious app on the device to steal a token that is intended for another app. E.g. think of a Bank app, it is not good if another app on the device can get the token that the Bank app is using. That is the case illustrated in your picture and that PKCE mitigates against.</p>\n</blockquote>\n<blockquote>\n<p>PKCE is a good technique for Public Clients but might be used for Confidential Clients as well.</p>\n</blockquote>\n<p>I do not want to write up an entire auth0/oauth2 library, just to do what feels like adding a few HTTP headers and POST fields. Are there existing libraries that I should be using that I'm somehow missing? Is there a good reason why existing libraries haven't implemented this yet?</p>\n"},{"tags":["java","oop","jtable","jcombobox"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1659073301,"post_id":73161645,"comment_id":129212817,"body_markdown":"Are you revalidating the `JPanel` that contains the `JTable` after changing column widths?","body":"Are you revalidating the <code>JPanel</code> that contains the <code>JTable</code> after changing column widths?"},{"owner":{"account_id":25903537,"reputation":1,"user_id":19628984,"display_name":"alli"},"score":0,"creation_date":1659074182,"post_id":73161645,"comment_id":129212990,"body_markdown":"yes, that&#39;s what I&#39;m trying to do","body":"yes, that&#39;s what I&#39;m trying to do"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1659078911,"post_id":73161645,"comment_id":129214172,"body_markdown":"Edit your question to include a [mre] that we can copy into our IDE, compile, and test.  Otherwise, we&#39;re just guessing.","body":"Edit your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that we can copy into our IDE, compile, and test.  Otherwise, we&#39;re just guessing."}],"owner":{"account_id":25903537,"reputation":1,"user_id":19628984,"display_name":"alli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660161015,"creation_date":1659068811,"question_id":73161645,"body_markdown":"This is my code, and it is not working how I want it to.\r\n```\r\nif (jComboBox1.getSelectedIndex() == 0) {\r\n    estateTable.getColumnModel().getColumn(2).setWidth(0);\r\n    estateTable.getColumnModel().getColumn(2).setMinWidth(0);\r\n    estateTable.getColumnModel().getColumn(2).setMaxWidth(0);\r\n}        \r\nif (jComboBox1.getSelectedIndex() == 1) {\r\n    estateTable.getColumnModel().getColumn(3).setWidth(0);\r\n    estateTable.getColumnModel().getColumn(3).setMinWidth(0);\r\n    estateTable.getColumnModel().getColumn(3).setMaxWidth(0);\r\n```\r\nWhat I want is to display only certain columns on the jTabel but it does not work properly with this code","title":"Use jComboBox to show certain columns","body":"<p>This is my code, and it is not working how I want it to.</p>\n<pre><code>if (jComboBox1.getSelectedIndex() == 0) {\n    estateTable.getColumnModel().getColumn(2).setWidth(0);\n    estateTable.getColumnModel().getColumn(2).setMinWidth(0);\n    estateTable.getColumnModel().getColumn(2).setMaxWidth(0);\n}        \nif (jComboBox1.getSelectedIndex() == 1) {\n    estateTable.getColumnModel().getColumn(3).setWidth(0);\n    estateTable.getColumnModel().getColumn(3).setMinWidth(0);\n    estateTable.getColumnModel().getColumn(3).setMaxWidth(0);\n</code></pre>\n<p>What I want is to display only certain columns on the jTabel but it does not work properly with this code</p>\n"},{"tags":["java","multithreading","concurrency","simulator","timing"],"comments":[{"owner":{"account_id":4352234,"reputation":3771,"user_id":3552141,"accept_rate":55,"display_name":"jhyot"},"score":1,"creation_date":1660171781,"post_id":73308611,"comment_id":129473081,"body_markdown":"Are you tracking the time of the actors (taxis) purely by Thread.sleeping the desired amount? This will not work, because Thread.sleep does not guarantee that the thread sleeps for the exact requested amount. See e.g. https://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html","body":"Are you tracking the time of the actors (taxis) purely by Thread.sleeping the desired amount? This will not work, because Thread.sleep does not guarantee that the thread sleeps for the exact requested amount. See e.g. <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>"},{"owner":{"account_id":12527777,"reputation":584,"user_id":9116959,"display_name":"Kfir Ettinger"},"score":0,"creation_date":1660173472,"post_id":73308611,"comment_id":129473405,"body_markdown":"I know that the CPU time does not split 100% equal and fair, but isn&#39;t it close to fair?","body":"I know that the CPU time does not split 100% equal and fair, but isn&#39;t it close to fair?"}],"answers":[{"tags":[],"owner":{"account_id":116746,"reputation":12477,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660160748,"creation_date":1660160748,"answer_id":73311923,"question_id":73308611,"body_markdown":"I&#39;m not sure if this answer makes sense, but if your problem can be modeled as a [Discrete Event Simulation](https://en.wikipedia.org/wiki/Discrete-event_simulation) (DES), I would advise you to use a simulated system clock. I have used and also built a couple of DES systems, and in all of them the simulated time was maintained by a queue where the elements  were sorted according to the event time. Real time between two events were of course instantaneous.","title":"Schedule threades while maintaining synchronaization - java","body":"<p>I'm not sure if this answer makes sense, but if your problem can be modeled as a <a href=\"https://en.wikipedia.org/wiki/Discrete-event_simulation\" rel=\"nofollow noreferrer\">Discrete Event Simulation</a> (DES), I would advise you to use a simulated system clock. I have used and also built a couple of DES systems, and in all of them the simulated time was maintained by a queue where the elements  were sorted according to the event time. Real time between two events were of course instantaneous.</p>\n"}],"owner":{"account_id":12527777,"reputation":584,"user_id":9116959,"display_name":"Kfir Ettinger"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73311923,"answer_count":1,"score":3,"last_activity_date":1660160748,"creation_date":1660143913,"question_id":73308611,"body_markdown":"**TLDR** I&#39;m having an hard time synchronizing multi-threaded system.\r\n\r\nI Have implemented a *Multi-threaded*, shared-taxi simulator (with adjustable speed) that contains a *weighted graph* (where the weights are the time in milliseconds it takes to cross an edge) that represents a road map, and *users* `Taxi` and `Passenger` (each contains location and starting time).\r\n\r\nThe operation of the simulator is created by the following threads:\r\n 1. `EventManager`: initiates real-time activities (taxi and passenger) according to their starting time.\r\n 2. `MatchMaker`: runs a matching algorithm between taxis and passengers.\r\n 3. `Taxi`s: each taxi runs on a separate thread that calculates the current location of the taxi, pickup order, and searches for shortest paths.\r\n\r\nThe problem is that over time, time differences between different threads are accumulating, which in turn causes the simulator to be inaccurate.\r\nFor example, a `Taxi` may be in a location that should have taken x time to get to, while the simulator&#39;s time is at y ( y &gt;&gt; x ).\r\nMy guess is that the time differences may be the result of CPU timing or delays in the movement of the taxi caused by long calculations and concurrency-related methods (e.g., `wait()` and `synchronized()`).\r\n\r\nHow can I make sure all of the threads work at the same rate?\r\nShould I add a delay to get them to synchronize?\r\nOr maybe add a `Timer` somewhere?\r\n\r\n------------------------------------------------------------------------------------------\r\n\r\nAnd for the implementation of the main components (I&#39;ve removed irrelevant parts to keep the question clean) of some of the threads:\r\n\r\nTo move a `Taxi` I&#39;m iterating over it&#39;s path, and calling `sleep()` with the weight of the edge (divided by the simulator&#39;s speed to make the entier system work at the same rate) in each iteration:\r\n```java\r\nList&lt;Edge&gt; path;\r\n\r\n@Override\r\npublic void run(){\r\n        Iterator&lt;Edge&gt; itr = path.iterator();\r\n        \r\n        while(itr.hasNext()){\r\n                currEdge = itr.next();\r\n                sleep(currEdge.getWeight());\r\n        }\r\n}\r\n\r\nprivate void sleep(long ms) {\r\n        try {\r\n            Thread.sleep(sleepTime / Simulator.getSpeed());\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n}\r\n```\r\n\r\nAnd the `EventManager` is timing new events by sleep between the event&#39;s time-stamps:\r\n```java\r\nQueue&lt;Users&gt; events;\r\n\r\n@Override\r\npublic void run(){\r\n        User nextEvent;\r\n        \r\n        while(!events.isEmpty()){\r\n                nextEvent = events.poll();\r\n                simulator.start(nextEvent);\r\n                \r\n                sleep(nextEvent);\r\n        }\r\n}\r\n\r\nprivate void sleep(User curr) {\r\n        if(!events.isEmpty()){\r\n                long timeToNextEvent = events.peek().getStartTimeInMS() - curr.getStartTimeInMS();\r\n                try {\r\n                        Thread.sleep(timeToNextEvent / Simulator.getSpeed());\r\n                } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                }\r\n        }\r\n}\r\n```","title":"Schedule threades while maintaining synchronaization - java","body":"<p><strong>TLDR</strong> I'm having an hard time synchronizing multi-threaded system.</p>\n<p>I Have implemented a <em>Multi-threaded</em>, shared-taxi simulator (with adjustable speed) that contains a <em>weighted graph</em> (where the weights are the time in milliseconds it takes to cross an edge) that represents a road map, and <em>users</em> <code>Taxi</code> and <code>Passenger</code> (each contains location and starting time).</p>\n<p>The operation of the simulator is created by the following threads:</p>\n<ol>\n<li><code>EventManager</code>: initiates real-time activities (taxi and passenger) according to their starting time.</li>\n<li><code>MatchMaker</code>: runs a matching algorithm between taxis and passengers.</li>\n<li><code>Taxi</code>s: each taxi runs on a separate thread that calculates the current location of the taxi, pickup order, and searches for shortest paths.</li>\n</ol>\n<p>The problem is that over time, time differences between different threads are accumulating, which in turn causes the simulator to be inaccurate.\nFor example, a <code>Taxi</code> may be in a location that should have taken x time to get to, while the simulator's time is at y ( y &gt;&gt; x ).\nMy guess is that the time differences may be the result of CPU timing or delays in the movement of the taxi caused by long calculations and concurrency-related methods (e.g., <code>wait()</code> and <code>synchronized()</code>).</p>\n<p>How can I make sure all of the threads work at the same rate?\nShould I add a delay to get them to synchronize?\nOr maybe add a <code>Timer</code> somewhere?</p>\n<hr />\n<p>And for the implementation of the main components (I've removed irrelevant parts to keep the question clean) of some of the threads:</p>\n<p>To move a <code>Taxi</code> I'm iterating over it's path, and calling <code>sleep()</code> with the weight of the edge (divided by the simulator's speed to make the entier system work at the same rate) in each iteration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Edge&gt; path;\n\n@Override\npublic void run(){\n        Iterator&lt;Edge&gt; itr = path.iterator();\n        \n        while(itr.hasNext()){\n                currEdge = itr.next();\n                sleep(currEdge.getWeight());\n        }\n}\n\nprivate void sleep(long ms) {\n        try {\n            Thread.sleep(sleepTime / Simulator.getSpeed());\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n}\n</code></pre>\n<p>And the <code>EventManager</code> is timing new events by sleep between the event's time-stamps:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Queue&lt;Users&gt; events;\n\n@Override\npublic void run(){\n        User nextEvent;\n        \n        while(!events.isEmpty()){\n                nextEvent = events.poll();\n                simulator.start(nextEvent);\n                \n                sleep(nextEvent);\n        }\n}\n\nprivate void sleep(User curr) {\n        if(!events.isEmpty()){\n                long timeToNextEvent = events.peek().getStartTimeInMS() - curr.getStartTimeInMS();\n                try {\n                        Thread.sleep(timeToNextEvent / Simulator.getSpeed());\n                } catch (InterruptedException e) {\n                        e.printStackTrace();\n                }\n        }\n}\n</code></pre>\n"},{"tags":["java","spring","amazon-web-services","threadpool","monitoring"],"answers":[{"tags":[],"owner":{"account_id":3318,"reputation":36442,"user_id":4782,"accept_rate":58,"display_name":"chris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521718552,"creation_date":1521718552,"answer_id":49427659,"question_id":49426497,"body_markdown":"Cloudwatch monitoring cannot see &quot;inside&quot; an EC2 instance.  \r\n\r\nYou can send custom metrics to Cloudwatch, or use something like New Relic APM, to get more information on what is happening on your instance.\r\n","title":"How to monitor Threads in AWS","body":"<p>Cloudwatch monitoring cannot see \"inside\" an EC2 instance.  </p>\n\n<p>You can send custom metrics to Cloudwatch, or use something like New Relic APM, to get more information on what is happening on your instance.</p>\n"},{"tags":[],"owner":{"account_id":70201,"reputation":13278,"user_id":203801,"accept_rate":69,"display_name":"Julio Faerman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1521722613,"creation_date":1521722613,"answer_id":49429022,"question_id":49426497,"body_markdown":"There is no totally built-in metric for that, but using the CloudWatch PutMetricData API it&#39;s possible to monitor anything. Some folks did that for JMX: https://github.com/mojn/jmx-cloudwatch-reporter \r\n\r\nFor Tomcat, for example, it would be \r\n\r\n    Thread Usage\r\n    JMX Bean: Catalina:type=Executor,name=[executor name]\r\n    \r\n    Attributes: poolSize, activeCount\r\nhttps://wiki.apache.org/tomcat/FAQ/Monitoring\r\n\r\nX-Ray is for realtime application monitoring, with different instrumentation alternatives.\r\n","title":"How to monitor Threads in AWS","body":"<p>There is no totally built-in metric for that, but using the CloudWatch PutMetricData API it's possible to monitor anything. Some folks did that for JMX: <a href=\"https://github.com/mojn/jmx-cloudwatch-reporter\" rel=\"nofollow noreferrer\">https://github.com/mojn/jmx-cloudwatch-reporter</a> </p>\n\n<p>For Tomcat, for example, it would be </p>\n\n<pre><code>Thread Usage\nJMX Bean: Catalina:type=Executor,name=[executor name]\n\nAttributes: poolSize, activeCount\n</code></pre>\n\n<p><a href=\"https://wiki.apache.org/tomcat/FAQ/Monitoring\" rel=\"nofollow noreferrer\">https://wiki.apache.org/tomcat/FAQ/Monitoring</a></p>\n\n<p>X-Ray is for realtime application monitoring, with different instrumentation alternatives.</p>\n"}],"owner":{"account_id":9137545,"reputation":182,"user_id":6796716,"display_name":"RoddyRott"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3750,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":49429022,"answer_count":2,"score":3,"last_activity_date":1660160563,"creation_date":1521715100,"question_id":49426497,"body_markdown":"Is there an easy, built-in way to monitor threads of an Java app in AWS?\r\nLike thread count, running time, etc.\r\nOr do I need a profiling tool?\r\n\r\nCan I see thread metrics in AWS X-RAY or is there a way to export JVM metrics to cloudwatch?","title":"How to monitor Threads in AWS","body":"<p>Is there an easy, built-in way to monitor threads of an Java app in AWS?\nLike thread count, running time, etc.\nOr do I need a profiling tool?</p>\n<p>Can I see thread metrics in AWS X-RAY or is there a way to export JVM metrics to cloudwatch?</p>\n"},{"tags":["java","gradle","minecraft-forge"],"comments":[{"owner":{"account_id":10413480,"reputation":3922,"user_id":10950272,"display_name":"makozaki"},"score":0,"creation_date":1660202394,"post_id":73311765,"comment_id":129478240,"body_markdown":"It would be useful to see the actual code but just by looking at error I&#39;d try to change the path `z:\\Projects\\minecraft_mods\\starting_mod-1.12.2\\.` to one of: `z:\\\\Projects\\\\minecraft_mods\\\\starting_mod-1.12.2\\\\.` or `z:/Projects/minecraft_mods/starting_mod-1.12.2/.`","body":"It would be useful to see the actual code but just by looking at error I&#39;d try to change the path <code>z:\\Projects\\minecraft_mods\\starting_mod-1.12.2\\.</code> to one of: <code>z:\\\\Projects\\\\minecraft_mods\\\\starting_mod-1.12.2\\\\.</code> or <code>z:&#47;Projects&#47;minecraft_mods&#47;starting_mod-1.12.2&#47;.</code>"},{"owner":{"display_name":"user13517022"},"score":0,"creation_date":1660202777,"post_id":73311765,"comment_id":129478371,"body_markdown":"Yeah, but VSC does not show where that error is, i was trying to do that whole time, but i couldn&#39;t even find where that is used (using VSC&#39;s search feature). @makozaki","body":"Yeah, but VSC does not show where that error is, i was trying to do that whole time, but i couldn&#39;t even find where that is used (using VSC&#39;s search feature). @makozaki"}],"owner":{"display_name":"user13517022"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":800,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660159838,"creation_date":1660159838,"question_id":73311765,"body_markdown":"So, everytime i open project with VSC, java builds project, then screams 2 exact same problem being:\r\n\r\n```\r\nCould not fetch model of type &#39;BuildEnvironment&#39; using connection to Gradle distribution &#39;https://services.gradle.org/distributions/gradle-4.9-bin.zip&#39;.\r\njava.net.URISyntaxException: Illegal character in opaque part at index 2: z:\\Projects\\minecraft_mods\\starting_mod-1.12.2\\.\r\nIllegal character in opaque part at index 2: z:\\Projects\\minecraft_mods\\starting_mod-1.12.2\\.\r\n```\r\nTheres exactly two of them, no matter how many times i restart VSC, it is always going to be 2 of them:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/27B0P.png\r\nThis has been happening for past two days, and i couldn&#39;t figure out anything, i tried editing gradlew.bat:\r\n```\r\nset DIRNAME=%~dp0\r\nif &quot;%DIRNAME%&quot; == &quot;&quot; set DIRNAME=.\r\n```\r\ninto\r\n```\r\nset DIRNAME=.\r\n```\r\n\r\nI restarted VSC, same error.\r\nAny suggestions ? This thing has been haunting me.","title":"URISyntaxException: Illegal character","body":"<p>So, everytime i open project with VSC, java builds project, then screams 2 exact same problem being:</p>\n<pre><code>Could not fetch model of type 'BuildEnvironment' using connection to Gradle distribution 'https://services.gradle.org/distributions/gradle-4.9-bin.zip'.\njava.net.URISyntaxException: Illegal character in opaque part at index 2: z:\\Projects\\minecraft_mods\\starting_mod-1.12.2\\.\nIllegal character in opaque part at index 2: z:\\Projects\\minecraft_mods\\starting_mod-1.12.2\\.\n</code></pre>\n<p>Theres exactly two of them, no matter how many times i restart VSC, it is always going to be 2 of them:\n<a href=\"https://i.stack.imgur.com/27B0P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/27B0P.png\" alt=\"enter image description here\" /></a></p>\n<p>This has been happening for past two days, and i couldn't figure out anything, i tried editing gradlew.bat:</p>\n<pre><code>set DIRNAME=%~dp0\nif &quot;%DIRNAME%&quot; == &quot;&quot; set DIRNAME=.\n</code></pre>\n<p>into</p>\n<pre><code>set DIRNAME=.\n</code></pre>\n<p>I restarted VSC, same error.\nAny suggestions ? This thing has been haunting me.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":4737721,"reputation":651,"user_id":3831579,"accept_rate":35,"display_name":"Sagar Rout"},"score":2,"creation_date":1660150680,"post_id":73309935,"comment_id":129467036,"body_markdown":"Hi, Remove this annotation @ComponentScan(basePackageClasses = {UserController.class}) from TestApplication.class. Due to this spring is not able to scan and create bean.","body":"Hi, Remove this annotation @ComponentScan(basePackageClasses = {UserController.class}) from TestApplication.class. Due to this spring is not able to scan and create bean."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1660194262,"post_id":73309935,"comment_id":129476279,"body_markdown":"Remove the `@ComponentScan` and move your `TestApplication` to `com.example` so it covers all packaes.","body":"Remove the <code>@ComponentScan</code> and move your <code>TestApplication</code> to <code>com.example</code> so it covers all packaes."}],"owner":{"account_id":14594510,"reputation":15,"user_id":10540703,"display_name":"ImprovedEngineer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660159731,"creation_date":1660149763,"question_id":73309935,"body_markdown":"I am not sure why I get this error but I suspect that it is from the TestApplication.java. I&#39;ve tried various things like, [Question1][1], but cannot figure out what is wrong.\r\n\r\nI referenced this [video][2] to build this application.\r\n\r\n**ERROR**\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nParameter 0 of constructor in com.example.User.UserService required a bean \r\nof type &#39;com.example.User.UserRepository&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.example.User.UserRepository&#39; in your \r\nconfiguration.\r\n\r\n```\r\n**TestApplication.java**\r\n```\r\npackage com.example.test;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.ComponentScan;\r\n\r\nimport com.example.User.UserController;\r\n\r\n@SpringBootApplication\r\n@ComponentScan(basePackageClasses = {UserController.class})\r\npublic class TestApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(TestApplication.class, args);\r\n\t}\r\n}\r\n```\r\n**User.java**\r\n```\r\npackage com.example.User;\r\n\r\nimport java.time.LocalDate;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.SequenceGenerator;\r\nimport javax.persistence.Table;\r\n\r\n@Entity\r\n@Table(name = &quot;USER&quot;)\r\npublic class User {\r\n    @Id\r\n    @SequenceGenerator(\r\n        name = &quot;user_sequence&quot;,\r\n        sequenceName = &quot;user_sequence&quot;,\r\n        allocationSize = 1\r\n    )\r\n    @GeneratedValue(\r\n        strategy = GenerationType.SEQUENCE,\r\n        generator = &quot;user_sequence&quot;\r\n    )\r\n    private Long id;\r\n    private String PDGA_id;\r\n    private String first_name;\r\n    private String last_name;\r\n    private String email;\r\n    private boolean email_verified;\r\n    private String phone_number;\r\n    private String password;\r\n    private LocalDate created_date;\r\n    private LocalDate modified_date;\r\n\r\n    public User(){\r\n    }\r\n\r\n    public User(Long id, \r\n                String PDGA_id, \r\n                String first_name, \r\n                String last_name, \r\n                String email, \r\n                boolean email_verified, \r\n                String phone_number, \r\n                String password, \r\n                LocalDate created_date, \r\n                LocalDate modified_date)\r\n    {\r\n        this.id = id;\r\n        this.PDGA_id = PDGA_id;\r\n        this.first_name = first_name;\r\n        this.last_name = last_name;\r\n        this.email = email;\r\n        this.email_verified = email_verified;\r\n        this.phone_number = phone_number;\r\n        this.password = password;\r\n        this.created_date = created_date;\r\n        this.modified_date = modified_date;\r\n    }\r\n\r\n    public User(String PDGA_id, \r\n                String first_name, \r\n                String last_name, \r\n                String email, \r\n                boolean email_verified, \r\n                String phone_number, \r\n                String password, \r\n                LocalDate created_date, \r\n                LocalDate modified_date)\r\n    {\r\n        this.PDGA_id = PDGA_id;\r\n        this.first_name = first_name;\r\n        this.last_name = last_name;\r\n        this.email = email;\r\n        this.email_verified = email_verified;\r\n        this.phone_number = phone_number;\r\n        this.password = password;\r\n        this.created_date = created_date;\r\n        this.modified_date = modified_date;\r\n    }\r\n\r\n    // Getter-Setter\r\n    public Long getId() {\r\n        return this.id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getPDGA_id() {\r\n        return this.PDGA_id;\r\n    }\r\n\r\n    public void setPDGA_id(String PDGA_id) {\r\n        this.PDGA_id = PDGA_id;\r\n    }\r\n\r\n    public String getFirst_name() {\r\n        return this.first_name;\r\n    }\r\n\r\n    public void setFirst_name(String first_name) {\r\n        this.first_name = first_name;\r\n    }\r\n\r\n    public String getLast_name() {\r\n        return this.last_name;\r\n    }\r\n\r\n    public void setLast_name(String last_name) {\r\n        this.last_name = last_name;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return this.email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public boolean isEmail_verified() {\r\n        return this.email_verified;\r\n    }\r\n\r\n    public void setEmail_verified(boolean email_verified) {\r\n        this.email_verified = email_verified;\r\n    }\r\n\r\n    public String getPhone_number() {\r\n        return this.phone_number;\r\n    }\r\n\r\n    public void setPhone_number(String phone_number) {\r\n        this.phone_number = phone_number;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return this.password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public LocalDate getCreated_date() {\r\n        return this.created_date;\r\n    }\r\n\r\n    public void setCreated_date(LocalDate created_date) {\r\n        this.created_date = created_date;\r\n    }\r\n\r\n    public LocalDate getModified_date() {\r\n        return this.modified_date;\r\n    }\r\n\r\n    public void setModified_date(LocalDate modified_date) {\r\n        this.modified_date = modified_date;\r\n    }\r\n\r\n    @Override\r\n    public String toString(){\r\n        return &quot;User{&quot; +\r\n                &quot;id =&quot; + id +\r\n                &quot;, PDGA_id&quot; + PDGA_id + &#39;\\&#39;&#39; +\r\n                &quot;, first_name&quot; + first_name + &#39;\\&#39;&#39; + \r\n                &quot;, last_name&quot; + last_name + &#39;\\&#39;&#39; + \r\n                &quot;, email&quot; + email + &#39;\\&#39;&#39; + \r\n                &quot;, email_verified&quot; + email_verified +\r\n                &quot;, phone_number&quot; + phone_number + &#39;\\&#39;&#39; + \r\n                &quot;, password&quot; + password + &#39;\\&#39;&#39; + \r\n                &quot;, created_date&quot; + created_date +\r\n                &quot;, modified_date&quot; + modified_date +\r\n                &quot;}&quot;;\r\n    }\r\n}\r\n```\r\n\r\n**UserController.java**\r\n```\r\npackage com.example.User;\r\n\r\nimport java.util.List;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(path = &quot;api/v1/user&quot;)\r\npublic class UserController {\r\n\t\r\n\tprivate final UserService userService;\r\n\r\n\t@Autowired\r\n\tpublic UserController(UserService userService){\r\n\t\tthis.userService = userService;\r\n\t}\r\n\r\n    @GetMapping()\r\n\tpublic List&lt;User&gt; getUsers(){\r\n\t\treturn userService.getUsers();\r\n\t}\r\n}\r\n\r\n```\r\n**UserRepository.java**\r\n```\r\npackage com.example.User;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n}\r\n```\r\n**UserService.java**\r\n```\r\npackage com.example.User;\r\n\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\n\r\n@Service\r\npublic class UserService {\r\n\r\n\tprivate final UserRepository userRepository;\r\n\r\n\t@Autowired\r\n\tpublic UserService(UserRepository userRepository){\r\n\t\tthis.userRepository = userRepository;\r\n\t}\r\n\r\n    public List&lt;User&gt; getUsers(){\r\n\t\treturn userRepository.findAll();\r\n\t}\r\n}\r\n```\r\n**application.properties**\r\n```\r\nspring.datasource.url=jdbc:mariadb://localhost:3306/LiensDiGoLinks\r\nspring.datasource.username=root\r\nspring.datasource.password=Password123!\r\nspring.datasource.driver-class-name=org.mariadb.jdbc.Driver\r\n\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\r\nspring.jpa.properties.hibernate.format_sql=true\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/42907553/field-required-a-bean-of-type-that-could-not-be-found-error-spring-restful-ap\r\n  [2]: https://www.youtube.com/watch?v=9SGDpanrc8U&amp;t=2198s&amp;ab_channel=Amigoscode","title":"Parameter 0 of constructor in com.example.User.UserService required a bean of type &#39;com.example.User.UserRepository&#39; that could not be found","body":"<p>I am not sure why I get this error but I suspect that it is from the TestApplication.java. I've tried various things like, <a href=\"https://stackoverflow.com/questions/42907553/field-required-a-bean-of-type-that-could-not-be-found-error-spring-restful-ap\">Question1</a>, but cannot figure out what is wrong.</p>\n<p>I referenced this <a href=\"https://www.youtube.com/watch?v=9SGDpanrc8U&amp;t=2198s&amp;ab_channel=Amigoscode\" rel=\"nofollow noreferrer\">video</a> to build this application.</p>\n<p><strong>ERROR</strong></p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 0 of constructor in com.example.User.UserService required a bean \nof type 'com.example.User.UserRepository' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.example.User.UserRepository' in your \nconfiguration.\n\n</code></pre>\n<p><strong>TestApplication.java</strong></p>\n<pre><code>package com.example.test;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\nimport com.example.User.UserController;\n\n@SpringBootApplication\n@ComponentScan(basePackageClasses = {UserController.class})\npublic class TestApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(TestApplication.class, args);\n    }\n}\n</code></pre>\n<p><strong>User.java</strong></p>\n<pre><code>package com.example.User;\n\nimport java.time.LocalDate;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.SequenceGenerator;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = &quot;USER&quot;)\npublic class User {\n    @Id\n    @SequenceGenerator(\n        name = &quot;user_sequence&quot;,\n        sequenceName = &quot;user_sequence&quot;,\n        allocationSize = 1\n    )\n    @GeneratedValue(\n        strategy = GenerationType.SEQUENCE,\n        generator = &quot;user_sequence&quot;\n    )\n    private Long id;\n    private String PDGA_id;\n    private String first_name;\n    private String last_name;\n    private String email;\n    private boolean email_verified;\n    private String phone_number;\n    private String password;\n    private LocalDate created_date;\n    private LocalDate modified_date;\n\n    public User(){\n    }\n\n    public User(Long id, \n                String PDGA_id, \n                String first_name, \n                String last_name, \n                String email, \n                boolean email_verified, \n                String phone_number, \n                String password, \n                LocalDate created_date, \n                LocalDate modified_date)\n    {\n        this.id = id;\n        this.PDGA_id = PDGA_id;\n        this.first_name = first_name;\n        this.last_name = last_name;\n        this.email = email;\n        this.email_verified = email_verified;\n        this.phone_number = phone_number;\n        this.password = password;\n        this.created_date = created_date;\n        this.modified_date = modified_date;\n    }\n\n    public User(String PDGA_id, \n                String first_name, \n                String last_name, \n                String email, \n                boolean email_verified, \n                String phone_number, \n                String password, \n                LocalDate created_date, \n                LocalDate modified_date)\n    {\n        this.PDGA_id = PDGA_id;\n        this.first_name = first_name;\n        this.last_name = last_name;\n        this.email = email;\n        this.email_verified = email_verified;\n        this.phone_number = phone_number;\n        this.password = password;\n        this.created_date = created_date;\n        this.modified_date = modified_date;\n    }\n\n    // Getter-Setter\n    public Long getId() {\n        return this.id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getPDGA_id() {\n        return this.PDGA_id;\n    }\n\n    public void setPDGA_id(String PDGA_id) {\n        this.PDGA_id = PDGA_id;\n    }\n\n    public String getFirst_name() {\n        return this.first_name;\n    }\n\n    public void setFirst_name(String first_name) {\n        this.first_name = first_name;\n    }\n\n    public String getLast_name() {\n        return this.last_name;\n    }\n\n    public void setLast_name(String last_name) {\n        this.last_name = last_name;\n    }\n\n    public String getEmail() {\n        return this.email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public boolean isEmail_verified() {\n        return this.email_verified;\n    }\n\n    public void setEmail_verified(boolean email_verified) {\n        this.email_verified = email_verified;\n    }\n\n    public String getPhone_number() {\n        return this.phone_number;\n    }\n\n    public void setPhone_number(String phone_number) {\n        this.phone_number = phone_number;\n    }\n\n    public String getPassword() {\n        return this.password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public LocalDate getCreated_date() {\n        return this.created_date;\n    }\n\n    public void setCreated_date(LocalDate created_date) {\n        this.created_date = created_date;\n    }\n\n    public LocalDate getModified_date() {\n        return this.modified_date;\n    }\n\n    public void setModified_date(LocalDate modified_date) {\n        this.modified_date = modified_date;\n    }\n\n    @Override\n    public String toString(){\n        return &quot;User{&quot; +\n                &quot;id =&quot; + id +\n                &quot;, PDGA_id&quot; + PDGA_id + '\\'' +\n                &quot;, first_name&quot; + first_name + '\\'' + \n                &quot;, last_name&quot; + last_name + '\\'' + \n                &quot;, email&quot; + email + '\\'' + \n                &quot;, email_verified&quot; + email_verified +\n                &quot;, phone_number&quot; + phone_number + '\\'' + \n                &quot;, password&quot; + password + '\\'' + \n                &quot;, created_date&quot; + created_date +\n                &quot;, modified_date&quot; + modified_date +\n                &quot;}&quot;;\n    }\n}\n</code></pre>\n<p><strong>UserController.java</strong></p>\n<pre><code>package com.example.User;\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(path = &quot;api/v1/user&quot;)\npublic class UserController {\n    \n    private final UserService userService;\n\n    @Autowired\n    public UserController(UserService userService){\n        this.userService = userService;\n    }\n\n    @GetMapping()\n    public List&lt;User&gt; getUsers(){\n        return userService.getUsers();\n    }\n}\n\n</code></pre>\n<p><strong>UserRepository.java</strong></p>\n<pre><code>package com.example.User;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n}\n</code></pre>\n<p><strong>UserService.java</strong></p>\n<pre><code>package com.example.User;\n\nimport org.springframework.stereotype.Service;\nimport org.springframework.beans.factory.annotation.Autowired;\n\n@Service\npublic class UserService {\n\n    private final UserRepository userRepository;\n\n    @Autowired\n    public UserService(UserRepository userRepository){\n        this.userRepository = userRepository;\n    }\n\n    public List&lt;User&gt; getUsers(){\n        return userRepository.findAll();\n    }\n}\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.url=jdbc:mariadb://localhost:3306/LiensDiGoLinks\nspring.datasource.username=root\nspring.datasource.password=Password123!\nspring.datasource.driver-class-name=org.mariadb.jdbc.Driver\n\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n"},{"tags":["java","kotlin","intellij-idea"],"comments":[{"owner":{"account_id":21384180,"reputation":1690,"user_id":15749574,"display_name":"JustSightseeing"},"score":0,"creation_date":1659909659,"post_id":73271139,"comment_id":129401197,"body_markdown":"perhaps try invalidating the caches?","body":"perhaps try invalidating the caches?"},{"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"score":2,"creation_date":1659910355,"post_id":73271139,"comment_id":129401295,"body_markdown":"The entry point to your program must be a function called `main()` taking either no params, or an array of strings. (Unless you&#39;re using some framework which does things differently.) That function can be inside a class (the ‘main class’), or at the top level (in which case the ‘main class’ is the one representing the file it&#39;s in, usually ending in `Kt`). You can&#39;t use any other function, because there&#39;s no way to tell the runtime which function to call, only which class.","body":"The entry point to your program must be a function called <code>main()</code> taking either no params, or an array of strings. (Unless you&#39;re using some framework which does things differently.) That function can be inside a class (the ‘main class’), or at the top level (in which case the ‘main class’ is the one representing the file it&#39;s in, usually ending in <code>Kt</code>). You can&#39;t use any other function, because there&#39;s no way to tell the runtime which function to call, only which class."},{"owner":{"account_id":1283031,"reputation":8305,"user_id":1236694,"accept_rate":26,"display_name":"BaltoStar"},"score":0,"creation_date":1659927341,"post_id":73271139,"comment_id":129403224,"body_markdown":"Looks like IDEA auto-creates entry-point `ProgramKt.class` in the `out` folder structure with some code to invoke my `Program.kt` code `fun Main(args : Array&lt;String&gt;) { }`.","body":"Looks like IDEA auto-creates entry-point <code>ProgramKt.class</code> in the <code>out</code> folder structure with some code to invoke my <code>Program.kt</code> code <code>fun Main(args : Array&lt;String&gt;) { }</code>."},{"owner":{"account_id":1283031,"reputation":8305,"user_id":1236694,"accept_rate":26,"display_name":"BaltoStar"},"score":0,"creation_date":1659927558,"post_id":73271139,"comment_id":129403249,"body_markdown":"@JustSightseeing how to invalidate caches ?","body":"@JustSightseeing how to invalidate caches ?"},{"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"score":0,"creation_date":1659956163,"post_id":73271139,"comment_id":129410241,"body_markdown":"@BaltoStar Kotlin is case-sensitive, so `Main()` ≠ `main()`. (So I&#39;m fairly sure IntelliJ will be autocreating the latter.)","body":"@BaltoStar Kotlin is case-sensitive, so <code>Main()</code> ≠ <code>main()</code>. (So I&#39;m fairly sure IntelliJ will be autocreating the latter.)"},{"owner":{"account_id":1283031,"reputation":8305,"user_id":1236694,"accept_rate":26,"display_name":"BaltoStar"},"score":0,"creation_date":1660157236,"post_id":73271139,"comment_id":129469065,"body_markdown":"@gidds Any idea why IDEA Run/Debug Configuration can&#39;t find my `pkg.ProgramKt` even though I see `ProgramKt.class` has been built to the \\out\\production\\Functions\\pkg\\ folder ?","body":"@gidds Any idea why IDEA Run/Debug Configuration can&#39;t find my <code>pkg.ProgramKt</code> even though I see <code>ProgramKt.class</code> has been built to the \\out\\production\\Functions\\pkg\\ folder ?"},{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1660594717,"post_id":73271139,"comment_id":129564819,"body_markdown":"Is it possible to share sample project?","body":"Is it possible to share sample project?"}],"owner":{"account_id":1283031,"reputation":8305,"user_id":1236694,"accept_rate":26,"display_name":"BaltoStar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660158488,"creation_date":1659907177,"question_id":73271139,"body_markdown":"Newbie question re IntelliJ IDEA project setup for Kotlin app : \r\n\r\nKotlin can have files that only contain functions - no Java Classes.\r\n\r\nI create a new IntelliJ Project with a single Program.kt file with some functions, such as : \r\n\r\n    fun helloWorld() {\r\n        println(&quot;Hello, World&quot;)\r\n    }\r\n\r\nTo run the code, I need to create a Run/Debug Configuration which requires specifying a Main Class.\r\n\r\nIf for Main Class I specify `ProgramKt` then on run I get an error : \r\n\r\n&gt; Warning: Class &#39;ProgramKt&#39; not found in module &#39;Functions&#39;\r\n\r\nSo how do I run my project ? \r\n\r\n\r\n&gt; IntelliJ IDEA 2022.2 (Community Edition) Build #IC-222.3345.118, built\r\n&gt; on July 25, 2022 Runtime version: 17.0.3+7-b469.32 amd64 VM: OpenJDK\r\n&gt; 64-Bit Server VM by JetBrains s.r.o. Windows 11 10.0 GC: G1 Young\r\n&gt; Generation, G1 Old Generation Memory: 750M Cores: 16\r\n&gt; \r\n&gt; Kotlin: 222-1.7.10-release-334-IJ3345.118\r\n\r\nEDIT : \r\n\r\nNow I see how IDEA auto-creates entry-point `ProgramKt.class` in the `out` folder with some code to route to my `Program.kt` `fun Main(args : Array&lt;String&gt;)` ...\r\n\r\nHowever if I add a package `pkg` and move my `Program.kt` into it, then IDEA Run/Debug Configuration can&#39;t find `pkg.ProgramKt` even though it definitely has been built : \r\n\r\n`\\out\\production\\Functions\\pkg\\PersonKt.class`\r\n\r\nHere&#39;s the error : \r\n\r\n&gt; Warning: Class &#39;rsk.PersonKt&#39; not found in module &#39;Functions&#39;\r\n\r\n","title":"IntelliJ IDEA Kotlin project what if there&#39;s no main class?","body":"<p>Newbie question re IntelliJ IDEA project setup for Kotlin app :</p>\n<p>Kotlin can have files that only contain functions - no Java Classes.</p>\n<p>I create a new IntelliJ Project with a single Program.kt file with some functions, such as :</p>\n<pre><code>fun helloWorld() {\n    println(&quot;Hello, World&quot;)\n}\n</code></pre>\n<p>To run the code, I need to create a Run/Debug Configuration which requires specifying a Main Class.</p>\n<p>If for Main Class I specify <code>ProgramKt</code> then on run I get an error :</p>\n<blockquote>\n<p>Warning: Class 'ProgramKt' not found in module 'Functions'</p>\n</blockquote>\n<p>So how do I run my project ?</p>\n<blockquote>\n<p>IntelliJ IDEA 2022.2 (Community Edition) Build #IC-222.3345.118, built\non July 25, 2022 Runtime version: 17.0.3+7-b469.32 amd64 VM: OpenJDK\n64-Bit Server VM by JetBrains s.r.o. Windows 11 10.0 GC: G1 Young\nGeneration, G1 Old Generation Memory: 750M Cores: 16</p>\n<p>Kotlin: 222-1.7.10-release-334-IJ3345.118</p>\n</blockquote>\n<p>EDIT :</p>\n<p>Now I see how IDEA auto-creates entry-point <code>ProgramKt.class</code> in the <code>out</code> folder with some code to route to my <code>Program.kt</code> <code>fun Main(args : Array&lt;String&gt;)</code> ...</p>\n<p>However if I add a package <code>pkg</code> and move my <code>Program.kt</code> into it, then IDEA Run/Debug Configuration can't find <code>pkg.ProgramKt</code> even though it definitely has been built :</p>\n<p><code>\\out\\production\\Functions\\pkg\\PersonKt.class</code></p>\n<p>Here's the error :</p>\n<blockquote>\n<p>Warning: Class 'rsk.PersonKt' not found in module 'Functions'</p>\n</blockquote>\n"},{"tags":["java","object","lambdaj"],"comments":[{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1513056284,"post_id":15117403,"comment_id":82492848,"body_markdown":"Possible duplicate of [any tool for java object to object mapping?](https://stackoverflow.com/questions/1432764/any-tool-for-java-object-to-object-mapping)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/1432764/any-tool-for-java-object-to-object-mapping\">any tool for java object to object mapping?</a>"}],"answers":[{"tags":[],"owner":{"account_id":11944,"reputation":7650,"user_id":23271,"display_name":"Skip Head"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1506495916,"creation_date":1361983337,"answer_id":15117487,"question_id":15117403,"body_markdown":"You can use reflection to find all the `get` methods in your **DAO** objects and call the equivalent `set` method in the **DTO**. This will only work if all such methods exist. It should be easy to find example code for this.","title":"DTO pattern: Best way to copy properties between two objects","body":"<p>You can use reflection to find all the <code>get</code> methods in your <strong>DAO</strong> objects and call the equivalent <code>set</code> method in the <strong>DTO</strong>. This will only work if all such methods exist. It should be easy to find example code for this.</p>\n"},{"tags":[],"owner":{"account_id":7340,"reputation":12654,"user_id":12719,"display_name":"pgras"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1361983519,"creation_date":1361983519,"answer_id":15117556,"question_id":15117403,"body_markdown":"You can have a look at [dozer][1] which is a\r\n\r\n&gt; Java Bean to Java Bean mapper that recursively copies data from one object to another. Typically, these Java Beans will be of different complex types. \r\n\r\n[Another better link...][2]\r\n\r\n\r\n  [1]: http://dozer.sourceforge.net/\r\n  [2]: http://dozer.sourceforge.net/documentation/about.html","title":"DTO pattern: Best way to copy properties between two objects","body":"<p>You can have a look at <a href=\"http://dozer.sourceforge.net/\" rel=\"noreferrer\">dozer</a> which is a</p>\n\n<blockquote>\n  <p>Java Bean to Java Bean mapper that recursively copies data from one object to another. Typically, these Java Beans will be of different complex types. </p>\n</blockquote>\n\n<p><a href=\"http://dozer.sourceforge.net/documentation/about.html\" rel=\"noreferrer\">Another better link...</a></p>\n"},{"tags":[],"owner":{"account_id":1647342,"reputation":6510,"user_id":1518628,"accept_rate":67,"display_name":"Lan"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1362202677,"creation_date":1362200573,"answer_id":15170937,"question_id":15117403,"body_markdown":"You can use [Apache Commmons Beanutils][1]. The API is \r\n\r\n`org.apache.commons.beanutils.PropertyUtilsBean.copyProperties(Object dest, Object orig)`. \r\n\r\nIt copies property values from the &quot;origin&quot; bean to the &quot;destination&quot; bean for all cases where the property names are the same. \r\n\r\nNow I am going to off topic. Using DTO is mostly considered an anti-pattern in EJB3. If your DTO and your domain objects are very alike, there is really no need to duplicate codes. DTO still has merits, especially for saving network bandwidth when remote access is involved. I do not have details about your application architecture, but if the layers you talked about are logical layers and does not cross network, I do not see the need for DTO.\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-beanutils//","title":"DTO pattern: Best way to copy properties between two objects","body":"<p>You can use <a href=\"http://commons.apache.org/proper/commons-beanutils//\">Apache Commmons Beanutils</a>. The API is </p>\n\n<p><code>org.apache.commons.beanutils.PropertyUtilsBean.copyProperties(Object dest, Object orig)</code>. </p>\n\n<p>It copies property values from the \"origin\" bean to the \"destination\" bean for all cases where the property names are the same. </p>\n\n<p>Now I am going to off topic. Using DTO is mostly considered an anti-pattern in EJB3. If your DTO and your domain objects are very alike, there is really no need to duplicate codes. DTO still has merits, especially for saving network bandwidth when remote access is involved. I do not have details about your application architecture, but if the layers you talked about are logical layers and does not cross network, I do not see the need for DTO.</p>\n"},{"tags":[],"owner":{"account_id":537921,"reputation":3524,"user_id":906184,"accept_rate":100,"display_name":"Ashkan Aryan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1504450816,"creation_date":1363098229,"answer_id":15363888,"question_id":15117403,"body_markdown":"Wouldn&#39;t lambdaj&#39;s [project function][1] do what you are looking for?\r\n\r\nIt&#39;ll look something like this:\r\n\r\n    List&lt;UserDTO&gt; userNDtos = project(users, UserDTO.class, on(User.class).getUserName(), on(User.class).getFullName(), .....);\r\n\r\n(Define the constructor for UserDTO accordingly...)\r\n\r\nAlso see [here][2] for examples...\r\n\r\n  [1]: http://lambdaj.googlecode.com/svn/trunk/html/apidocs/ch/lambdaj/Lambda.html#project%28java.lang.Object,%20java.lang.Class,%20java.lang.Object...%29\r\n  [2]: https://code.google.com/p/lambdaj/wiki/LambdajFeatures\r\n","title":"DTO pattern: Best way to copy properties between two objects","body":"<p>Wouldn't lambdaj's <a href=\"http://lambdaj.googlecode.com/svn/trunk/html/apidocs/ch/lambdaj/Lambda.html#project%28java.lang.Object,%20java.lang.Class,%20java.lang.Object...%29\" rel=\"nofollow noreferrer\">project function</a> do what you are looking for?</p>\n\n<p>It'll look something like this:</p>\n\n<pre><code>List&lt;UserDTO&gt; userNDtos = project(users, UserDTO.class, on(User.class).getUserName(), on(User.class).getFullName(), .....);\n</code></pre>\n\n<p>(Define the constructor for UserDTO accordingly...)</p>\n\n<p>Also see <a href=\"https://code.google.com/p/lambdaj/wiki/LambdajFeatures\" rel=\"nofollow noreferrer\">here</a> for examples...</p>\n"},{"tags":[],"owner":{"account_id":1018005,"reputation":1516,"user_id":1029112,"accept_rate":71,"display_name":"Reza"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1504450883,"creation_date":1456368482,"answer_id":35617298,"question_id":15117403,"body_markdown":"I had an application that I needed to convert from a [JPA][1] entity to DTO, and I thought about it and finally came up using `org.springframework.beans.BeanUtils.copyProperties` for copying simple properties and also extending and using `org.springframework.binding.convert.service.DefaultConversionService` for converting complex properties.\r\n\r\nIn detail my service was something like this:\r\n\r\n    @Service(&quot;seedingConverterService&quot;)\r\n    public class SeedingConverterService extends DefaultConversionService implements ISeedingConverterService  {\r\n        @PostConstruct\r\n        public void init(){\r\n            Converter&lt;Feature,FeatureDTO&gt; featureConverter = new Converter&lt;Feature, FeatureDTO&gt;() {\r\n\r\n                @Override\r\n                public FeatureDTO convert(Feature f) {\r\n                    FeatureDTO dto = new FeatureDTO();\r\n                    //BeanUtils.copyProperties(f, dto,&quot;configurationModel&quot;);\r\n                    BeanUtils.copyProperties(f, dto);\r\n                    dto.setConfigurationModelId(f.getConfigurationModel()==null?null:f.getConfigurationModel().getId());\r\n                    return dto;\r\n                }\r\n            };\r\n\r\n            Converter&lt;ConfigurationModel,ConfigurationModelDTO&gt; configurationModelConverter = new Converter&lt;ConfigurationModel,ConfigurationModelDTO&gt;() {\r\n                @Override\r\n                public ConfigurationModelDTO convert(ConfigurationModel c) {\r\n                    ConfigurationModelDTO dto = new ConfigurationModelDTO();\r\n                    //BeanUtils.copyProperties(c, dto, &quot;features&quot;);\r\n                    BeanUtils.copyProperties(c, dto);\r\n                    dto.setAlgorithmId(c.getAlgorithm()==null?null:c.getAlgorithm().getId());\r\n                    List&lt;FeatureDTO&gt; l = c.getFeatures().stream().map(f-&gt;featureConverter.convert(f)).collect(Collectors.toList());\r\n                    dto.setFeatures(l);\r\n                    return dto;\r\n                }\r\n            };\r\n            addConverter(featureConverter);\r\n            addConverter(configurationModelConverter);\r\n        }\r\n    }\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Java_Persistence_API\r\n","title":"DTO pattern: Best way to copy properties between two objects","body":"<p>I had an application that I needed to convert from a <a href=\"http://en.wikipedia.org/wiki/Java_Persistence_API\" rel=\"nofollow noreferrer\">JPA</a> entity to DTO, and I thought about it and finally came up using <code>org.springframework.beans.BeanUtils.copyProperties</code> for copying simple properties and also extending and using <code>org.springframework.binding.convert.service.DefaultConversionService</code> for converting complex properties.</p>\n\n<p>In detail my service was something like this:</p>\n\n<pre><code>@Service(\"seedingConverterService\")\npublic class SeedingConverterService extends DefaultConversionService implements ISeedingConverterService  {\n    @PostConstruct\n    public void init(){\n        Converter&lt;Feature,FeatureDTO&gt; featureConverter = new Converter&lt;Feature, FeatureDTO&gt;() {\n\n            @Override\n            public FeatureDTO convert(Feature f) {\n                FeatureDTO dto = new FeatureDTO();\n                //BeanUtils.copyProperties(f, dto,\"configurationModel\");\n                BeanUtils.copyProperties(f, dto);\n                dto.setConfigurationModelId(f.getConfigurationModel()==null?null:f.getConfigurationModel().getId());\n                return dto;\n            }\n        };\n\n        Converter&lt;ConfigurationModel,ConfigurationModelDTO&gt; configurationModelConverter = new Converter&lt;ConfigurationModel,ConfigurationModelDTO&gt;() {\n            @Override\n            public ConfigurationModelDTO convert(ConfigurationModel c) {\n                ConfigurationModelDTO dto = new ConfigurationModelDTO();\n                //BeanUtils.copyProperties(c, dto, \"features\");\n                BeanUtils.copyProperties(c, dto);\n                dto.setAlgorithmId(c.getAlgorithm()==null?null:c.getAlgorithm().getId());\n                List&lt;FeatureDTO&gt; l = c.getFeatures().stream().map(f-&gt;featureConverter.convert(f)).collect(Collectors.toList());\n                dto.setFeatures(l);\n                return dto;\n            }\n        };\n        addConverter(featureConverter);\n        addConverter(configurationModelConverter);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1262920,"reputation":51,"user_id":9968489,"display_name":"Anton Orlov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1529511100,"creation_date":1529511100,"answer_id":50952734,"question_id":15117403,"body_markdown":"I suggest you should use one of the mappers&#39; libraries: [Mapstruct][1], [ModelMapper][2], etc.\r\nWith Mapstruct your mapper will look like:\r\n\r\n    @Mapper\r\n    public interface UserMapper {     \r\n        UserMapper INSTANCE = Mappers.getMapper( UserMapper.class ); \r\n     \r\n        UserDTO toDto(User user);\r\n    }\r\n\r\nThe real object with all getters and setters will be automatically generated from this interface. You can use it like:\r\n\r\n    UserDTO userDTO = UserMapper.INSTANCE.toDto(user);\r\n\r\nYou can also add some logic for your activeText filed using [@AfterMapping][3] annotation. \r\n\r\n\r\n  [1]: http://mapstruct.org/\r\n  [2]: http://modelmapper.org/\r\n  [3]: http://mapstruct.org/documentation/stable/reference/html/#customizing-mappings-with-before-and-after","title":"DTO pattern: Best way to copy properties between two objects","body":"<p>I suggest you should use one of the mappers' libraries: <a href=\"http://mapstruct.org/\" rel=\"nofollow noreferrer\">Mapstruct</a>, <a href=\"http://modelmapper.org/\" rel=\"nofollow noreferrer\">ModelMapper</a>, etc.\nWith Mapstruct your mapper will look like:</p>\n\n<pre><code>@Mapper\npublic interface UserMapper {     \n    UserMapper INSTANCE = Mappers.getMapper( UserMapper.class ); \n\n    UserDTO toDto(User user);\n}\n</code></pre>\n\n<p>The real object with all getters and setters will be automatically generated from this interface. You can use it like:</p>\n\n<pre><code>UserDTO userDTO = UserMapper.INSTANCE.toDto(user);\n</code></pre>\n\n<p>You can also add some logic for your activeText filed using <a href=\"http://mapstruct.org/documentation/stable/reference/html/#customizing-mappings-with-before-and-after\" rel=\"nofollow noreferrer\">@AfterMapping</a> annotation. </p>\n"},{"tags":[],"owner":{"account_id":8179843,"reputation":1731,"user_id":6157415,"display_name":"Mike D3ViD Tyson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660158390,"creation_date":1660053978,"answer_id":73293242,"question_id":15117403,"body_markdown":"The simplest trick is **SERIALIZE** the `Object_A` and **DESERIALIZE** it using `Object_B.class`:\r\n\r\nif you are using **Spring** or **Spring-boot** probably you already have Jackson library in your classpath:\r\n\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\nthen:\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    Object_B objB = objectMapper.readValue(objectMapper.writeValueAsString(objA), Object_B.class);\r\n","title":"DTO pattern: Best way to copy properties between two objects","body":"<p>The simplest trick is <strong>SERIALIZE</strong> the <code>Object_A</code> and <strong>DESERIALIZE</strong> it using <code>Object_B.class</code>:</p>\n<p>if you are using <strong>Spring</strong> or <strong>Spring-boot</strong> probably you already have Jackson library in your classpath:</p>\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\n</code></pre>\n<p>then:</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nObject_B objB = objectMapper.readValue(objectMapper.writeValueAsString(objA), Object_B.class);\n</code></pre>\n"}],"owner":{"account_id":280829,"reputation":28956,"user_id":576758,"accept_rate":83,"display_name":"Tapas Bose"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120075,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"accepted_answer_id":15117556,"answer_count":7,"score":51,"last_activity_date":1660158390,"creation_date":1361983148,"question_id":15117403,"body_markdown":"In my application&#39;s architecture I usually send the object or list of objects from the data access layer to the web layer via the service layer, in which these objects get transformed from a [DAO][1] object to a [DTO][2] object and vice versa. The web layer don&#39;t have any access to DAO objects and the DAO layer do not use DTOs.\r\n\r\nTo demonstrate, I usually write the code as:\r\n\r\n    @Transactional(readOnly = true)\r\n    public List&lt;UserDTO&gt; getAllUserAsUserDTO() {\r\n        List&lt;UserDTO&gt; userDTOs = new ArrayList&lt;UserDTO&gt;();\r\n\r\n        for(User user : getAllUser()) {\r\n            userDTOs.add(constructUserDTO(user));\r\n        }\r\n\r\n        return userDTOs;\r\n    }\r\n\r\n    private UserDTO constructUserDTO(User user) {\r\n        UserDTO userDTO = new UserDTO();\r\n        userDTO.setFullName(user.getFullName());\r\n        userDTO.setId(user.getId());\r\n        userDTO.setUsername(user.getUsername());\r\n        userDTO.setRole(user.getRole());\r\n        userDTO.setActive(user.isActive());\r\n        userDTO.setActiveText(user.isActive() ? &quot;Active&quot; : &quot;Inactive&quot;);\r\n        return userDTO;\r\n    }\r\n\r\nHere the user is the database entity:\r\n\r\n    @javax.persistence.Entity\r\n    @Table(name = &quot;USER&quot;)\r\n    public class User extends Entity {\r\n\r\n        @Transient\r\n        private static final long serialVersionUID = -112950002831333869L;\r\n\r\n        private String username;\r\n        private String fullName;\r\n        private boolean active;\r\n        private String role;\r\n        // other fields\r\n\r\n        public User() {\r\n            super();\r\n        }\r\n\r\n        @NaturalId\r\n        @Column(name = &quot;USERNAME&quot;, nullable = false)\r\n        public String getUsername() {\r\n            return username;\r\n        }\r\n\r\n        public void setUsername(String username) {\r\n            this.username = username;\r\n        }\r\n\r\n        @Column(name = &quot;FULL_NAME&quot;)\r\n        public String getFullName() {\r\n            return fullName;\r\n        }\r\n\r\n        public void setFullName(String fullName) {\r\n            this.fullName = fullName;\r\n        }\r\n\r\n        @Column(name = &quot;ACTIVE&quot;, nullable = false)\r\n        public boolean isActive() {\r\n            return active;\r\n        }\r\n\r\n        public void setActive(boolean active) {\r\n            this.active = active;\r\n        }\r\n\r\n        @Column(name = &quot;ROLE&quot;)\r\n        public String getRole() {\r\n            return role;\r\n        }\r\n\r\n        public void setRole(String role) {\r\n            this.role = role;\r\n        }\r\n    }\r\n\r\nAnd this is the UserDTO:\r\n\r\n    public class UserDTO extends BaseDTO {\r\n\r\n        private static final long serialVersionUID = -3719463614753533782L;\r\n\r\n        private String username;\r\n        private String fullName;\r\n        private String role;\r\n        private String activeText;\r\n        private Boolean active;\r\n        //other properties\r\n\r\n        public UserDTO() {\r\n            super();\r\n        }\r\n\r\n        public String getUsername() {\r\n            return username;\r\n        }\r\n\r\n        public void setUsername(String username) {\r\n            this.username = username;\r\n        }\r\n\r\n        public String getFullName() {\r\n            return fullName;\r\n        }\r\n\r\n        public void setFullName(String fullName) {\r\n            this.fullName = fullName;\r\n        }\r\n\r\n        public String getRole() {\r\n            return role;\r\n        }\r\n\r\n        public void setRole(String role) {\r\n            this.role = role;\r\n        }\r\n\r\n        public String getActiveText() {\r\n            return activeText;\r\n        }\r\n\r\n        public void setActiveText(String activeText) {\r\n            this.activeText = activeText;\r\n        }\r\n\r\n        public Boolean getActive() {\r\n            return active;\r\n        }\r\n\r\n        public void setActive(Boolean active) {\r\n            this.active = active;\r\n        }\r\n    }\r\n\r\nSo I was wondering if this is the only way to copy properties between two objects. I guess I am not sure. Also I am using [lambdaj][3], so is there a method in this API by which I can copy all these properties to create list of other objects?\r\n\r\nThis topic may be sounds subjective, but I really want to know from you experts the ways by which the transformation of object from one form to another can be done where the maximum fields are having same string.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Data_access_object\r\n  [2]: https://en.wikipedia.org/wiki/Data_transfer_object\r\n  [3]: http://code.google.com/p/lambdaj/\r\n","title":"DTO pattern: Best way to copy properties between two objects","body":"<p>In my application's architecture I usually send the object or list of objects from the data access layer to the web layer via the service layer, in which these objects get transformed from a <a href=\"http://en.wikipedia.org/wiki/Data_access_object\" rel=\"noreferrer\">DAO</a> object to a <a href=\"https://en.wikipedia.org/wiki/Data_transfer_object\" rel=\"noreferrer\">DTO</a> object and vice versa. The web layer don't have any access to DAO objects and the DAO layer do not use DTOs.</p>\n\n<p>To demonstrate, I usually write the code as:</p>\n\n<pre><code>@Transactional(readOnly = true)\npublic List&lt;UserDTO&gt; getAllUserAsUserDTO() {\n    List&lt;UserDTO&gt; userDTOs = new ArrayList&lt;UserDTO&gt;();\n\n    for(User user : getAllUser()) {\n        userDTOs.add(constructUserDTO(user));\n    }\n\n    return userDTOs;\n}\n\nprivate UserDTO constructUserDTO(User user) {\n    UserDTO userDTO = new UserDTO();\n    userDTO.setFullName(user.getFullName());\n    userDTO.setId(user.getId());\n    userDTO.setUsername(user.getUsername());\n    userDTO.setRole(user.getRole());\n    userDTO.setActive(user.isActive());\n    userDTO.setActiveText(user.isActive() ? \"Active\" : \"Inactive\");\n    return userDTO;\n}\n</code></pre>\n\n<p>Here the user is the database entity:</p>\n\n<pre><code>@javax.persistence.Entity\n@Table(name = \"USER\")\npublic class User extends Entity {\n\n    @Transient\n    private static final long serialVersionUID = -112950002831333869L;\n\n    private String username;\n    private String fullName;\n    private boolean active;\n    private String role;\n    // other fields\n\n    public User() {\n        super();\n    }\n\n    @NaturalId\n    @Column(name = \"USERNAME\", nullable = false)\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    @Column(name = \"FULL_NAME\")\n    public String getFullName() {\n        return fullName;\n    }\n\n    public void setFullName(String fullName) {\n        this.fullName = fullName;\n    }\n\n    @Column(name = \"ACTIVE\", nullable = false)\n    public boolean isActive() {\n        return active;\n    }\n\n    public void setActive(boolean active) {\n        this.active = active;\n    }\n\n    @Column(name = \"ROLE\")\n    public String getRole() {\n        return role;\n    }\n\n    public void setRole(String role) {\n        this.role = role;\n    }\n}\n</code></pre>\n\n<p>And this is the UserDTO:</p>\n\n<pre><code>public class UserDTO extends BaseDTO {\n\n    private static final long serialVersionUID = -3719463614753533782L;\n\n    private String username;\n    private String fullName;\n    private String role;\n    private String activeText;\n    private Boolean active;\n    //other properties\n\n    public UserDTO() {\n        super();\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getFullName() {\n        return fullName;\n    }\n\n    public void setFullName(String fullName) {\n        this.fullName = fullName;\n    }\n\n    public String getRole() {\n        return role;\n    }\n\n    public void setRole(String role) {\n        this.role = role;\n    }\n\n    public String getActiveText() {\n        return activeText;\n    }\n\n    public void setActiveText(String activeText) {\n        this.activeText = activeText;\n    }\n\n    public Boolean getActive() {\n        return active;\n    }\n\n    public void setActive(Boolean active) {\n        this.active = active;\n    }\n}\n</code></pre>\n\n<p>So I was wondering if this is the only way to copy properties between two objects. I guess I am not sure. Also I am using <a href=\"http://code.google.com/p/lambdaj/\" rel=\"noreferrer\">lambdaj</a>, so is there a method in this API by which I can copy all these properties to create list of other objects?</p>\n\n<p>This topic may be sounds subjective, but I really want to know from you experts the ways by which the transformation of object from one form to another can be done where the maximum fields are having same string.</p>\n"},{"tags":["java","git","github"],"comments":[{"owner":{"account_id":15291873,"reputation":1,"user_id":14418091,"display_name":"user326234"},"score":0,"creation_date":1602221991,"post_id":64274452,"comment_id":113657293,"body_markdown":"By the way, if I use command &quot;git checkout -u&quot;, my main branch only rename and that&#39;s all.","body":"By the way, if I use command &quot;git checkout -u&quot;, my main branch only rename and that&#39;s all."},{"owner":{"account_id":3970780,"reputation":2667,"user_id":3275441,"accept_rate":75,"display_name":"Milgo"},"score":0,"creation_date":1602222226,"post_id":64274452,"comment_id":113657355,"body_markdown":"Your branch url is invalid (not found).","body":"Your branch url is invalid (not found)."}],"answers":[{"tags":[],"owner":{"account_id":3970780,"reputation":2667,"user_id":3275441,"accept_rate":75,"display_name":"Milgo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602221928,"creation_date":1602221928,"answer_id":64274485,"question_id":64274452,"body_markdown":"Github decided to [rename the &#39;master&#39; branch into &#39;main&#39;][1]. So new projects do have a &#39;main&#39; instead of a &#39;master&#39; branch. Try to check out a main branch.\r\n\r\n\r\n  [1]: https://www.infoq.com/news/2020/10/github-main-branch/","title":"How can I get main bransh &quot;master&quot;? I can&#39;t make new bransh without it. At cmd I get only errors after using commands &quot;git push -u&quot;","body":"<p>Github decided to <a href=\"https://www.infoq.com/news/2020/10/github-main-branch/\" rel=\"nofollow noreferrer\">rename the 'master' branch into 'main'</a>. So new projects do have a 'main' instead of a 'master' branch. Try to check out a main branch.</p>\n"}],"owner":{"account_id":15291873,"reputation":1,"user_id":14418091,"display_name":"user326234"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660157834,"creation_date":1602221730,"question_id":64274452,"body_markdown":"If I use command &quot;git bransh master&quot;, it get &quot;Not a valid object name: &#39;master&#39;&quot;. And after using &quot;git push user master&quot;, it get &quot;error: failed to push some refs to &#39;user&#39;&quot;.\r\n\r\nI can&#39;t understand, why my main branch &#39;master&#39; isn&#39;t master.\r\n[enter image description here][1]\r\n\r\nOn the picture you cn see, that I don&#39;t have main branch &#39;master&#39; at creating new branch\r\n\r\nThis is my project on github:\r\nhttps://github.com/Elizabeth08122000/blogBaigushkina.git\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1NZdh.png","title":"How can I get main bransh &quot;master&quot;? I can&#39;t make new bransh without it. At cmd I get only errors after using commands &quot;git push -u&quot;","body":"<p>If I use command &quot;git bransh master&quot;, it get &quot;Not a valid object name: 'master'&quot;. And after using &quot;git push user master&quot;, it get &quot;error: failed to push some refs to 'user'&quot;.</p>\n<p>I can't understand, why my main branch 'master' isn't master.\n<a href=\"https://i.stack.imgur.com/1NZdh.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>On the picture you cn see, that I don't have main branch 'master' at creating new branch</p>\n<p>This is my project on github:\n<a href=\"https://github.com/Elizabeth08122000/blogBaigushkina.git\" rel=\"nofollow noreferrer\">https://github.com/Elizabeth08122000/blogBaigushkina.git</a></p>\n"},{"tags":["java","spring","automation","cucumber","testng"],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657738659,"creation_date":1657738659,"answer_id":72971319,"question_id":72969875,"body_markdown":"Unlike JUnit 5, TestNG does not provide such fine-grained controls. At best you can create multiple runner classes with a different selection of features and different configurations for parallel/serial execution.","title":"Specify test case not to run in parallel with TestNG runner in Spring using Cucumber","body":"<p>Unlike JUnit 5, TestNG does not provide such fine-grained controls. At best you can create multiple runner classes with a different selection of features and different configurations for parallel/serial execution.</p>\n"},{"tags":[],"owner":{"account_id":7438631,"reputation":89,"user_id":11278979,"display_name":"Yomen Tohmaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660157772,"creation_date":1660157772,"answer_id":73311392,"question_id":72969875,"body_markdown":"Another thing I just realized was I could make the number of threads an argument; with a default of 1 thread.\r\n\r\n```\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;${maven.surefire.version}&lt;/version&gt;\r\n\t&lt;configuration&gt;\r\n\t\t&lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n                    &lt;properties&gt;\r\n                        &lt;property&gt;\r\n                            &lt;name&gt;dataproviderthreadcount&lt;/name&gt;\r\n                            &lt;value&gt;1&lt;/value&gt;\r\n                        &lt;/property&gt;\r\n                    &lt;/properties&gt;\r\n                    &lt;includes&gt;\r\n                        &lt;include&gt;api.automation.tests.runners.TestNGRunnerTest&lt;/include&gt;\r\n                    &lt;/includes&gt;\r\n\t&lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nI have one Jenkins build that has all the tests tagged with the same name to run in parallel with however many threads needed.\r\n\r\n```\r\nmvn clean test -Dcucumber.filter.tags=&quot;${CucumberFilterTag} and not @opentofix&quot; -Dspring.profiles.active=${Environment} -Ddataproviderthreadcount=4\r\n```\r\nAnd in the other build, I have a very similar command (with a different tag) just without the added arguement; to use the default of just one thread.  This will run all those tagged tests one at a time.\r\n```\r\nmvn clean test -Dcucumber.filter.tags=&quot;${CucumberFilterTag} and not @opentofix&quot; -Dspring.profiles.active=${Environment}\r\n```\r\n\r\nEither way, the first answer still works, but just thought to add this possibility.","title":"Specify test case not to run in parallel with TestNG runner in Spring using Cucumber","body":"<p>Another thing I just realized was I could make the number of threads an argument; with a default of 1 thread.</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${maven.surefire.version}&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                    &lt;properties&gt;\n                        &lt;property&gt;\n                            &lt;name&gt;dataproviderthreadcount&lt;/name&gt;\n                            &lt;value&gt;1&lt;/value&gt;\n                        &lt;/property&gt;\n                    &lt;/properties&gt;\n                    &lt;includes&gt;\n                        &lt;include&gt;api.automation.tests.runners.TestNGRunnerTest&lt;/include&gt;\n                    &lt;/includes&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>I have one Jenkins build that has all the tests tagged with the same name to run in parallel with however many threads needed.</p>\n<pre><code>mvn clean test -Dcucumber.filter.tags=&quot;${CucumberFilterTag} and not @opentofix&quot; -Dspring.profiles.active=${Environment} -Ddataproviderthreadcount=4\n</code></pre>\n<p>And in the other build, I have a very similar command (with a different tag) just without the added arguement; to use the default of just one thread.  This will run all those tagged tests one at a time.</p>\n<pre><code>mvn clean test -Dcucumber.filter.tags=&quot;${CucumberFilterTag} and not @opentofix&quot; -Dspring.profiles.active=${Environment}\n</code></pre>\n<p>Either way, the first answer still works, but just thought to add this possibility.</p>\n"}],"owner":{"account_id":7438631,"reputation":89,"user_id":11278979,"display_name":"Yomen Tohmaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660157772,"creation_date":1657730921,"question_id":72969875,"body_markdown":"I&#39;ve been able to configure the project to run test cases in parallel using a TestNG runner; however, there are a handful of scenarios that are not very thread safe.  If these test cases were to run in parallel, they&#39;d interfere with each other.  Now there are a couple of ways I could make these scenarios thread safe, but I was wondering if there was a way to specify these Cucumber scenarios not to run in parallel.  \r\n\r\nIs there a specific tag I could configure to tag scenarios not to run in parallel?  Specify certain feature files not to run in parallel?  I believe I might have come across something like that for JUnit 5, but does this exist with TestNG?","title":"Specify test case not to run in parallel with TestNG runner in Spring using Cucumber","body":"<p>I've been able to configure the project to run test cases in parallel using a TestNG runner; however, there are a handful of scenarios that are not very thread safe.  If these test cases were to run in parallel, they'd interfere with each other.  Now there are a couple of ways I could make these scenarios thread safe, but I was wondering if there was a way to specify these Cucumber scenarios not to run in parallel.</p>\n<p>Is there a specific tag I could configure to tag scenarios not to run in parallel?  Specify certain feature files not to run in parallel?  I believe I might have come across something like that for JUnit 5, but does this exist with TestNG?</p>\n"},{"tags":["java","spring","sockets","httpclient","javabeans"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1660174245,"post_id":73311288,"comment_id":129473559,"body_markdown":"You should close everything that is closeable, but there is no socket here, only an HttpClient.","body":"You should close everything that is closeable, but there is no socket here, only an HttpClient."},{"owner":{"account_id":10586567,"reputation":11,"user_id":7798706,"display_name":"Rigid"},"score":0,"creation_date":1660202696,"post_id":73311288,"comment_id":129478343,"body_markdown":"ok, but fortify told me that the function proxyRestTemplate() in ProxyConfig.java sometimes fails to release a socket allocated by build()","body":"ok, but fortify told me that the function proxyRestTemplate() in ProxyConfig.java sometimes fails to release a socket allocated by build()"}],"owner":{"account_id":10586567,"reputation":11,"user_id":7798706,"display_name":"Rigid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660157258,"creation_date":1660157258,"question_id":73311288,"body_markdown":"Should I worry about to release a socket allocated by **clientBuilder.build()** in this code:\r\n\r\n    @Bean(&quot;proxyRestTemplate&quot;)\r\n        @LoadBalanced\r\n        public RestTemplate proxyRestTemplate() {\r\n            CredentialsProvider credsProvider = new BasicCredentialsProvider();\r\n            credsProvider.setCredentials(\r\n                    new AuthScope(proxyUrl, proxyPort),\r\n                    new UsernamePasswordCredentials(proxyUsername, proxyPassword)\r\n            );\r\n            HttpHost myProxy = new HttpHost(proxyUrl, proxyPort);\r\n            HttpClientBuilder clientBuilder = HttpClientBuilder.create();\r\n            clientBuilder.setProxy(myProxy).setDefaultCredentialsProvider(credsProvider).disableCookieManagement();\r\n            HttpClient httpClient = clientBuilder.build();\r\n            HttpComponentsClientHttpRequestFactory factory = new CustomHttpComponentsClientHttpRequestFactory();\r\n            factory.setHttpClient(httpClient);\r\n            RestTemplate restTemplate = new RestTemplate(factory);\r\n            restTemplate.getInterceptors().add(new BasicAuthenticationInterceptor(basicAuthUsername, basicAuthPassword));\r\n            return restTemplate;\r\n        }\r\n\r\n\r\nI sincerely hope this will be a short and simple question\r\n\r\nThank you in advance for your help.","title":"Closing socket HttpClient in bean (CloseableHttpClient) - need to do this? JAVA","body":"<p>Should I worry about to release a socket allocated by <strong>clientBuilder.build()</strong> in this code:</p>\n<pre><code>@Bean(&quot;proxyRestTemplate&quot;)\n    @LoadBalanced\n    public RestTemplate proxyRestTemplate() {\n        CredentialsProvider credsProvider = new BasicCredentialsProvider();\n        credsProvider.setCredentials(\n                new AuthScope(proxyUrl, proxyPort),\n                new UsernamePasswordCredentials(proxyUsername, proxyPassword)\n        );\n        HttpHost myProxy = new HttpHost(proxyUrl, proxyPort);\n        HttpClientBuilder clientBuilder = HttpClientBuilder.create();\n        clientBuilder.setProxy(myProxy).setDefaultCredentialsProvider(credsProvider).disableCookieManagement();\n        HttpClient httpClient = clientBuilder.build();\n        HttpComponentsClientHttpRequestFactory factory = new CustomHttpComponentsClientHttpRequestFactory();\n        factory.setHttpClient(httpClient);\n        RestTemplate restTemplate = new RestTemplate(factory);\n        restTemplate.getInterceptors().add(new BasicAuthenticationInterceptor(basicAuthUsername, basicAuthPassword));\n        return restTemplate;\n    }\n</code></pre>\n<p>I sincerely hope this will be a short and simple question</p>\n<p>Thank you in advance for your help.</p>\n"},{"tags":["java","netbeans","java-8","payara","netbeans-13"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1660098725,"post_id":73292713,"comment_id":129450358,"body_markdown":"[1] What is _&quot;payara 412.183&quot;_? Do you actually mean _&quot;Payara 4.12.173&quot;_? If so, correct accordingly. Otherwise, update your question to link to the Payara version you are using. [2] Also update your questions with the exact versions of Java and NetBeans being used. [3] Was starting Payara within NetBeans definitely working before the weekend? [4] Was there possibly some network or environment change over the weekend to provoke this issue?","body":"[1] What is <i>&quot;payara 412.183&quot;</i>? Do you actually mean <i>&quot;Payara 4.12.173&quot;</i>? If so, correct accordingly. Otherwise, update your question to link to the Payara version you are using. [2] Also update your questions with the exact versions of Java and NetBeans being used. [3] Was starting Payara within NetBeans definitely working before the weekend? [4] Was there possibly some network or environment change over the weekend to provoke this issue?"},{"owner":{"account_id":26019158,"reputation":13,"user_id":19727086,"display_name":"user19727086"},"score":0,"creation_date":1660120311,"post_id":73292713,"comment_id":129455092,"body_markdown":"Sorry, it&#39;s 4.1.2.183 according to readme. I&#39;m using Netbeans 13 with java version &quot;1.8.0_341&quot;.\nYes, it definitely worked before weekend, and there was no trigger to change that. My predecessor had similiar issues - his local dev environment also stopped working after a day, and he couldn&#39;t fix it.","body":"Sorry, it&#39;s 4.1.2.183 according to readme. I&#39;m using Netbeans 13 with java version &quot;1.8.0_341&quot;. Yes, it definitely worked before weekend, and there was no trigger to change that. My predecessor had similiar issues - his local dev environment also stopped working after a day, and he couldn&#39;t fix it."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1660156389,"post_id":73292713,"comment_id":129468836,"body_markdown":"OK. I can&#39;t explain what caused things to change over the weekend, but that&#39;s moot because you are running NetBeans 13 with Java 1.8. That is not a valid pairing. From the NetBeans 13 Release Notes, with my emphasis added: [&quot;_The Apache **NetBeans 13 binary releases require JDK 11+**, and officially support running on JDK 11 and JDK 17_&quot;](https://netbeans.apache.org/download/nb13/nb13.html). So either upgrade to JDK 11 or later, or downgrade to NetBeans 12.5 or earlier.","body":"OK. I can&#39;t explain what caused things to change over the weekend, but that&#39;s moot because you are running NetBeans 13 with Java 1.8. That is not a valid pairing. From the NetBeans 13 Release Notes, with my emphasis added: <a href=\"https://netbeans.apache.org/download/nb13/nb13.html\" rel=\"nofollow noreferrer\">&quot;<i>The Apache <b>NetBeans 13 binary releases require JDK 11+</b>, and officially support running on JDK 11 and JDK 17</i>&quot;</a>. So either upgrade to JDK 11 or later, or downgrade to NetBeans 12.5 or earlier."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1660157036,"post_id":73292713,"comment_id":129469001,"body_markdown":"Also, since you are running Payara 4.x, you must use Java 1.8 ([&quot;If you need support for JDK11, upgrade to Payara Platform 5.&quot;](https://www.payara.fish/enterprise/openjdk-support/)), so you should downgrade to NetBeans 12.5 (not 12.6!). An alternative approach would be to migrate to NetBeans 13 with JDK 11+ and Payara 5, but that is obviously a non-trivial upgrade.","body":"Also, since you are running Payara 4.x, you must use Java 1.8 (<a href=\"https://www.payara.fish/enterprise/openjdk-support/\" rel=\"nofollow noreferrer\">&quot;If you need support for JDK11, upgrade to Payara Platform 5.&quot;</a>), so you should downgrade to NetBeans 12.5 (not 12.6!). An alternative approach would be to migrate to NetBeans 13 with JDK 11+ and Payara 5, but that is obviously a non-trivial upgrade."},{"owner":{"account_id":26019158,"reputation":13,"user_id":19727086,"display_name":"user19727086"},"score":0,"creation_date":1660222084,"post_id":73292713,"comment_id":129485059,"body_markdown":"Great idea, I will downgrade to NetBeans 12.5 right away!","body":"Great idea, I will downgrade to NetBeans 12.5 right away!"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1660228256,"post_id":73292713,"comment_id":129487716,"body_markdown":"OK. If that approach solves your problem, please consider posting an answer since that is much more helpful to the community than an unresolved discussion in the comments.","body":"OK. If that approach solves your problem, please consider posting an answer since that is much more helpful to the community than an unresolved discussion in the comments."},{"owner":{"account_id":26019158,"reputation":13,"user_id":19727086,"display_name":"user19727086"},"score":0,"creation_date":1660228590,"post_id":73292713,"comment_id":129487865,"body_markdown":"Well, unfortunately, this didn&#39;t help :c. I think that if payara can&#39;t load the admin console (localhost:4848) then it&#39;s something wrong with the server itself. Unfortunately it&#39;s a custom one made for our client.","body":"Well, unfortunately, this didn&#39;t help :c. I think that if payara can&#39;t load the admin console (localhost:4848) then it&#39;s something wrong with the server itself. Unfortunately it&#39;s a custom one made for our client."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1660241684,"post_id":73292713,"comment_id":129492574,"body_markdown":"Re _&quot;it&#39;s a custom one made for our client&quot;_: that information seems highly relevant, and definitely belongs in your question, but I&#39;m not sure anyone outside of your team will be able to resolve this if customization is involved. Regardless: [1] Stick with valid combinations of NetBeans/Java/Payara. [2] Perhaps focus on what may have changed over the weekend? [3] Have you tried starting your Payara server externally. (i.e. From the command line rather than within NetBeans)? If so, does it still give the same errors?","body":"Re <i>&quot;it&#39;s a custom one made for our client&quot;</i>: that information seems highly relevant, and definitely belongs in your question, but I&#39;m not sure anyone outside of your team will be able to resolve this if customization is involved. Regardless: [1] Stick with valid combinations of NetBeans/Java/Payara. [2] Perhaps focus on what may have changed over the weekend? [3] Have you tried starting your Payara server externally. (i.e. From the command line rather than within NetBeans)? If so, does it still give the same errors?"},{"owner":{"account_id":26019158,"reputation":13,"user_id":19727086,"display_name":"user19727086"},"score":0,"creation_date":1660289484,"post_id":73292713,"comment_id":129502013,"body_markdown":"Yes, I started it from command line and it still gave the following errors.","body":"Yes, I started it from command line and it still gave the following errors."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1660797404,"post_id":73292713,"comment_id":129618697,"body_markdown":"OK. Since you also get the same problems when starting from the command line, this look like a Payara issue, and even mentioning NetBeans is a distraction. Are you able to detail the customization that has been done? Also, consider creating a separate &quot;clean&quot; throwaway instance of Payara 4.1.2.183, and verify that it starts properly from the command line, and its console works. If it does then the issue is with your customization (right?), and if it doesn&#39;t you must have some environment issue(s).","body":"OK. Since you also get the same problems when starting from the command line, this look like a Payara issue, and even mentioning NetBeans is a distraction. Are you able to detail the customization that has been done? Also, consider creating a separate &quot;clean&quot; throwaway instance of Payara 4.1.2.183, and verify that it starts properly from the command line, and its console works. If it does then the issue is with your customization (right?), and if it doesn&#39;t you must have some environment issue(s)."},{"owner":{"account_id":26019158,"reputation":13,"user_id":19727086,"display_name":"user19727086"},"score":0,"creation_date":1660904788,"post_id":73292713,"comment_id":129649154,"body_markdown":"Then sorry for mentioning NetBeans :c\nI tried doing it fresh with new both Payara 4 and 5. Admin console worked for the first time, and then stopped in both cases.\nSo, regarding the customization:\n1. First there was the maven setup with the encrypted master password and nexus repositories passwords. They have been put in .m2/settings-security.xml\n2. Adding local variables for our server and adding myself as its admin.\n3. Creating the proper users with groups in Payara\n4. Setting up local JDBC connection pools\n5. Setting up JAAF security","body":"Then sorry for mentioning NetBeans :c I tried doing it fresh with new both Payara 4 and 5. Admin console worked for the first time, and then stopped in both cases. So, regarding the customization: 1. First there was the maven setup with the encrypted master password and nexus repositories passwords. They have been put in .m2/settings-security.xml 2. Adding local variables for our server and adding myself as its admin. 3. Creating the proper users with groups in Payara 4. Setting up local JDBC connection pools 5. Setting up JAAF security"}],"owner":{"account_id":26019158,"reputation":13,"user_id":19727086,"display_name":"user19727086"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660157258,"creation_date":1660051788,"question_id":73292713,"body_markdown":"Sorry I can&#39;t share the whole java code, due to the company policy. I&#39;m using payara 4.1.2.183, Netbeans 13 and Java 1.8.0_341\r\n\r\nI have setup a local dev environment for the project in my job and it worked fine for the whole friday. Monday brought some problems, so to list them all:\r\n - I can&#39;t access payara administrator console, it keeps on loading\r\n - Deploying application through netbeans shows following errors:\r\n\r\n```\r\nWARNING:   Policy configuration factory overridden by property javax.security.jacc.PolicyConfigurationFactory.provider with value com.censored.security.jaaf.jacc.JAAFPolicyConfigurationFactoryImpl\r\nINFO:   Loading policy provider com.censored.security.jaaf.jacc.JAAFPolicyProvider jaafProvider.\r\nSEVERE:   Error while installing policy provider: com.censored.security.jaaf.jacc.JAAFPolicyProvider jaafProvider.\r\nSEVERE:   Exception while deploying the app [censored]\r\nSEVERE:   Exception during lifecycle processing\r\n\r\n\r\nSEVERE:   Exception while deploying the app [censored] : A MultiException has 2 exceptions.  They are:\r\n1. com.sun.enterprise.security.SecurityLifecycleException\r\n2. java.lang.IllegalStateException: Unable to perform operation: post construct on com.sun.enterprise.security.SecurityLifecycle\r\ncom.sun.enterprise.security.SecurityLifecycleException\r\n\r\nWARNING:   Policy configuration factory overridden by property javax.security.jacc.PolicyConfigurationFactory.provider with value com.censored.security.jaaf.jacc.JAAFPolicyConfigurationFactoryImpl\r\nINFO:   Loading policy provider com.censored.security.jaaf.jacc.JAAFPolicyProvider jaafProvider.\r\nSEVERE:   Error while installing policy provider: com.censored.security.jaaf.jacc.JAAFPolicyProvider jaafProvider.\r\nSEVERE:   Exception while deploying the app [censored]\r\nSEVERE:   Exception during lifecycle processing\r\n\r\nSEVERE:   Exception while deploying the app [censored] : A MultiException has 2 exceptions.  They are:\r\n1. com.sun.enterprise.security.SecurityLifecycleException\r\n2. java.lang.IllegalStateException: Unable to perform operation: post construct on com.sun.enterprise.security.SecurityLifecycle\r\n```\r\n\r\nDoes anyone know how to resolve them?","title":"Payara stopped loading admin console and deploying from netbeans","body":"<p>Sorry I can't share the whole java code, due to the company policy. I'm using payara 4.1.2.183, Netbeans 13 and Java 1.8.0_341</p>\n<p>I have setup a local dev environment for the project in my job and it worked fine for the whole friday. Monday brought some problems, so to list them all:</p>\n<ul>\n<li>I can't access payara administrator console, it keeps on loading</li>\n<li>Deploying application through netbeans shows following errors:</li>\n</ul>\n<pre><code>WARNING:   Policy configuration factory overridden by property javax.security.jacc.PolicyConfigurationFactory.provider with value com.censored.security.jaaf.jacc.JAAFPolicyConfigurationFactoryImpl\nINFO:   Loading policy provider com.censored.security.jaaf.jacc.JAAFPolicyProvider jaafProvider.\nSEVERE:   Error while installing policy provider: com.censored.security.jaaf.jacc.JAAFPolicyProvider jaafProvider.\nSEVERE:   Exception while deploying the app [censored]\nSEVERE:   Exception during lifecycle processing\n\n\nSEVERE:   Exception while deploying the app [censored] : A MultiException has 2 exceptions.  They are:\n1. com.sun.enterprise.security.SecurityLifecycleException\n2. java.lang.IllegalStateException: Unable to perform operation: post construct on com.sun.enterprise.security.SecurityLifecycle\ncom.sun.enterprise.security.SecurityLifecycleException\n\nWARNING:   Policy configuration factory overridden by property javax.security.jacc.PolicyConfigurationFactory.provider with value com.censored.security.jaaf.jacc.JAAFPolicyConfigurationFactoryImpl\nINFO:   Loading policy provider com.censored.security.jaaf.jacc.JAAFPolicyProvider jaafProvider.\nSEVERE:   Error while installing policy provider: com.censored.security.jaaf.jacc.JAAFPolicyProvider jaafProvider.\nSEVERE:   Exception while deploying the app [censored]\nSEVERE:   Exception during lifecycle processing\n\nSEVERE:   Exception while deploying the app [censored] : A MultiException has 2 exceptions.  They are:\n1. com.sun.enterprise.security.SecurityLifecycleException\n2. java.lang.IllegalStateException: Unable to perform operation: post construct on com.sun.enterprise.security.SecurityLifecycle\n</code></pre>\n<p>Does anyone know how to resolve them?</p>\n"},{"tags":["java","hash","tostring","hashcode"],"comments":[{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1459002300,"post_id":3736260,"comment_id":60103338,"body_markdown":"Closely related to http://stackoverflow.com/questions/29140402/how-do-i-print-my-java-object-without-getting-sometype2f92e0f4","body":"Closely related to <a href=\"http://stackoverflow.com/questions/29140402/how-do-i-print-my-java-object-without-getting-sometype2f92e0f4\" title=\"how do i print my java object without getting sometype2f92e0f4\">stackoverflow.com/questions/29140402/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1475,"reputation":533764,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"down_vote_count":3,"up_vote_count":13,"is_accepted":true,"score":10,"last_activity_date":1459009066,"creation_date":1284734246,"answer_id":3736290,"question_id":3736260,"body_markdown":"[`Object.hashCode`](https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode()) used to be computed [based on a memory location where the object is located](https://stackoverflow.com/a/10107092/1968). Memory locations are almost universally displayed as hexadecimal.\r\n\r\nThe default return value of `toString` isn’t so much interested in the hash code but rather in a way to uniquely identify the object for the purpose of debugging, and the hash code serve well for the purpose of identification (in fact, the combination of class name + memory address is truly unique; and while a hash code isn’t guaranteed to be unique, it often comes close).","title":"Why does the default Object.toString() return a hex representation of the hashCode?","body":"<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode()\" rel=\"nofollow noreferrer\"><code>Object.hashCode</code></a> used to be computed <a href=\"https://stackoverflow.com/a/10107092/1968\">based on a memory location where the object is located</a>. Memory locations are almost universally displayed as hexadecimal.</p>\n\n<p>The default return value of <code>toString</code> isn’t so much interested in the hash code but rather in a way to uniquely identify the object for the purpose of debugging, and the hash code serve well for the purpose of identification (in fact, the combination of class name + memory address is truly unique; and while a hash code isn’t guaranteed to be unique, it often comes close).</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1660157248,"creation_date":1374676107,"answer_id":17836934,"question_id":3736260,"body_markdown":"### The Short Answer: \r\n\r\nHash Codes are usually displayed in hexadecimal because this way it is easier for us to retain them in our short-term memory, since hexadecimal numbers are shorter and have a larger character variety than the same numbers expressed in decimal.\r\n\r\nAlso, (as supercat states in a comment,) hexadecimal representation tends to prevent folks from trying to assign some meaning to the numbers, because they don&#39;t have any. (To use supercat&#39;s example,  `Fnord@194` is absolutely not the 194th `Fnord`; it is just `Fnord` with some unique number next to it.)\r\n\r\n### The Long Answer: \r\n\r\nDecimal is convenient for two things: \r\n\r\n- Doing arithmetic\r\n- Estimating magnitude\r\n\r\nHowever, these operations are inapplicable to hashcodes. You are certainly not going to be adding hashcodes together in your head, nor would you ever care how big a hashcode is compared to another hashcode. \r\n\r\nWhat you are likely to be doing with hashcodes is the one and only thing that they were intended for: to tell whether two hash codes possibly refer to the same object, or definitely refer to different objects.\r\n\r\nIn other words, you will be using them as unique identifiers or *mnemonics* for objects. Thus, the fact that a hashcode is a number is in fact entirely irrelevant; you might as well think of it as a hash string. \r\n\r\nWell, it just so happens that our brains find it a lot easier to retain in short-term memory (for the purpose of comparison) short strings consisting of 16 different characters, than longer strings consisting of only 10 different characters.\r\n\r\nTo further illustrate the analogy by taking it to absurdity, imagine if hash  codes were represented in binary, where each number is far longer than in decimal, and has a much smaller character variety. If you saw the hash code 010001011011100010100100101011 now, and again 10 seconds later, would you stand the slightest chance of being able to tell that you are looking at the same hash code?  (I can&#39;t, even if I am looking at the two numbers simultaneously. I have to compare them digit by digit.)\r\n\r\nOn the opposite end lies the tetrasexagesimal numbering system, which means base 64. Numbers in this system consist of:\r\n\r\n- the digits 0-9, plus:\r\n- the uppercase letters A-Z, plus:\r\n- the lowercase letters a-z, plus:\r\n- a couple of symbols like &#39;+&#39; and &#39;/&#39; to reach 64.\r\n\r\nTetrasexagesimal obviously has a much greater character variety than lower-base systems, and it should come as no surprise that numbers expressed in it are admirably terse. (I am not sure why the JVM is not using this system for hashcodes; perhaps some prude feared that chance might lead to certain inconvenient four-letter words being formed?)\r\n\r\nSo, on a hypothetical JVM with 32-bit object hash codes, the hash code of your &quot;Foo&quot; object could look like any of the following:\r\n\r\n    Binary:           com.acme.Foo@11000001110101010110101100100011\r\n    Decimal:          com.acme.Foo@3251989283\r\n    Hexadecimal:      com.acme.Foo@C1D56B23\r\n    Tetrasexagesimal: com.acme.Foo@31rMiZ\r\n\r\nWhich one would you prefer?\r\n\r\nI would definitely prefer the tetrasexagesimal, and in lack of that, I would settle for the hexadecimal one. Most people would agree.\r\n\r\nOne web site where you can play with conversions is here:\r\nhttps://www.mobilefish.com/services/big_number/big_number.php\r\n","title":"Why does the default Object.toString() return a hex representation of the hashCode?","body":"<h3>The Short Answer:</h3>\n<p>Hash Codes are usually displayed in hexadecimal because this way it is easier for us to retain them in our short-term memory, since hexadecimal numbers are shorter and have a larger character variety than the same numbers expressed in decimal.</p>\n<p>Also, (as supercat states in a comment,) hexadecimal representation tends to prevent folks from trying to assign some meaning to the numbers, because they don't have any. (To use supercat's example,  <code>Fnord@194</code> is absolutely not the 194th <code>Fnord</code>; it is just <code>Fnord</code> with some unique number next to it.)</p>\n<h3>The Long Answer:</h3>\n<p>Decimal is convenient for two things:</p>\n<ul>\n<li>Doing arithmetic</li>\n<li>Estimating magnitude</li>\n</ul>\n<p>However, these operations are inapplicable to hashcodes. You are certainly not going to be adding hashcodes together in your head, nor would you ever care how big a hashcode is compared to another hashcode.</p>\n<p>What you are likely to be doing with hashcodes is the one and only thing that they were intended for: to tell whether two hash codes possibly refer to the same object, or definitely refer to different objects.</p>\n<p>In other words, you will be using them as unique identifiers or <em>mnemonics</em> for objects. Thus, the fact that a hashcode is a number is in fact entirely irrelevant; you might as well think of it as a hash string.</p>\n<p>Well, it just so happens that our brains find it a lot easier to retain in short-term memory (for the purpose of comparison) short strings consisting of 16 different characters, than longer strings consisting of only 10 different characters.</p>\n<p>To further illustrate the analogy by taking it to absurdity, imagine if hash  codes were represented in binary, where each number is far longer than in decimal, and has a much smaller character variety. If you saw the hash code 010001011011100010100100101011 now, and again 10 seconds later, would you stand the slightest chance of being able to tell that you are looking at the same hash code?  (I can't, even if I am looking at the two numbers simultaneously. I have to compare them digit by digit.)</p>\n<p>On the opposite end lies the tetrasexagesimal numbering system, which means base 64. Numbers in this system consist of:</p>\n<ul>\n<li>the digits 0-9, plus:</li>\n<li>the uppercase letters A-Z, plus:</li>\n<li>the lowercase letters a-z, plus:</li>\n<li>a couple of symbols like '+' and '/' to reach 64.</li>\n</ul>\n<p>Tetrasexagesimal obviously has a much greater character variety than lower-base systems, and it should come as no surprise that numbers expressed in it are admirably terse. (I am not sure why the JVM is not using this system for hashcodes; perhaps some prude feared that chance might lead to certain inconvenient four-letter words being formed?)</p>\n<p>So, on a hypothetical JVM with 32-bit object hash codes, the hash code of your &quot;Foo&quot; object could look like any of the following:</p>\n<pre><code>Binary:           com.acme.Foo@11000001110101010110101100100011\nDecimal:          com.acme.Foo@3251989283\nHexadecimal:      com.acme.Foo@C1D56B23\nTetrasexagesimal: com.acme.Foo@31rMiZ\n</code></pre>\n<p>Which one would you prefer?</p>\n<p>I would definitely prefer the tetrasexagesimal, and in lack of that, I would settle for the hexadecimal one. Most people would agree.</p>\n<p>One web site where you can play with conversions is here:\n<a href=\"https://www.mobilefish.com/services/big_number/big_number.php\" rel=\"nofollow noreferrer\">https://www.mobilefish.com/services/big_number/big_number.php</a></p>\n"}],"owner":{"account_id":63188,"reputation":19454,"user_id":187206,"accept_rate":90,"display_name":"Tom Tresansky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9836,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":3736290,"answer_count":2,"score":13,"last_activity_date":1660157248,"creation_date":1284734080,"question_id":3736260,"body_markdown":"I&#39;m curious why `Object.toString()` returns this:\r\n\r\n    return getClass().getName() + &quot;@&quot; + Integer.toHexString(hashCode());\r\n\r\nas opposed to this:\r\n\r\n    return getClass().getName() + &quot;@&quot; + hashCode();\r\n\r\nWhat benefits does displaying the hash code as a hex rather than a decimal buy you?","title":"Why does the default Object.toString() return a hex representation of the hashCode?","body":"<p>I'm curious why <code>Object.toString()</code> returns this:</p>\n\n<pre><code>return getClass().getName() + \"@\" + Integer.toHexString(hashCode());\n</code></pre>\n\n<p>as opposed to this:</p>\n\n<pre><code>return getClass().getName() + \"@\" + hashCode();\n</code></pre>\n\n<p>What benefits does displaying the hash code as a hex rather than a decimal buy you?</p>\n"},{"tags":["java","multithreading","jvm","classloader"],"comments":[{"owner":{"account_id":413802,"reputation":4492,"user_id":787643,"accept_rate":77,"display_name":"Saintali"},"score":1,"creation_date":1348044195,"post_id":12491112,"comment_id":16807175,"body_markdown":"If you register a `ClassLoader` in the main thread, hopefully that will be inherited by all new threads, and again hopefully, any thread will need to load some class, which means your `ClassLoader` will be consulted and you have an opportunity to register the thread....","body":"If you register a <code>ClassLoader</code> in the main thread, hopefully that will be inherited by all new threads, and again hopefully, any thread will need to load some class, which means your <code>ClassLoader</code> will be consulted and you have an opportunity to register the thread...."},{"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"score":0,"creation_date":1348044262,"post_id":12491112,"comment_id":16807197,"body_markdown":"I would go by the path of extending `Thread` with the required methods for listeners. Of course, will work only for your code.","body":"I would go by the path of extending <code>Thread</code> with the required methods for listeners. Of course, will work only for your code."},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1348044623,"post_id":12491112,"comment_id":16807320,"body_markdown":"Do you need to track the transition (like: &quot;Right now a new Thread has been created and I have to react to it at once&quot;) or is it enough to have a list or something of threads created in/by your application at specific points in time (like: &quot;Now I want to know the threads and do something with them.&quot;)?","body":"Do you need to track the transition (like: &quot;Right now a new Thread has been created and I have to react to it at once&quot;) or is it enough to have a list or something of threads created in/by your application at specific points in time (like: &quot;Now I want to know the threads and do something with them.&quot;)?"},{"owner":{"account_id":1360570,"reputation":5872,"user_id":1298028,"accept_rate":85,"display_name":"Łukasz Rzeszotarski"},"score":0,"creation_date":1348044905,"post_id":12491112,"comment_id":16807425,"body_markdown":"I would like to write my own thread monitor, so I need instantly &#39;current&#39; thread objects. I&#39;m gonna create my own decorated thread to handle all this monitoring stuff - but the problem is how to get the information that new thread is gonna created without overriding anything - &#39;instantly&#39;. I would like to write a monitor that is easy to run in any application.","body":"I would like to write my own thread monitor, so I need instantly &#39;current&#39; thread objects. I&#39;m gonna create my own decorated thread to handle all this monitoring stuff - but the problem is how to get the information that new thread is gonna created without overriding anything - &#39;instantly&#39;. I would like to write a monitor that is easy to run in any application."},{"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1348049735,"post_id":12491112,"comment_id":16809384,"body_markdown":"Check the guys who has written the eclipse debugger. Maybe they can give an hint for this question ;)","body":"Check the guys who has written the eclipse debugger. Maybe they can give an hint for this question ;)"},{"owner":{"account_id":15903,"reputation":323433,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1478857391,"post_id":12491112,"comment_id":68328773,"body_markdown":"Related: http://stackoverflow.com/questions/9874641/tracking-java-thread-creation-and-lifetime","body":"Related: <a href=\"http://stackoverflow.com/questions/9874641/tracking-java-thread-creation-and-lifetime\" title=\"tracking java thread creation and lifetime\">stackoverflow.com/questions/9874641/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1660157172,"creation_date":1348044367,"answer_id":12491246,"question_id":12491112,"body_markdown":"I would create a thread that continously lists all running threads on the JVM.&lt;br&gt;\r\nThen each time it noticies that a new thread has appeared, it would notify in either way a class in your code.\r\n\r\nHere are some links about how to list all threads currently running on the JVM :\r\n\r\n1. [Get a List of all Threads currently running in Java](https://stackoverflow.com/questions/1323408/get-a-list-of-all-threads-currently-running-in-java)\r\n\r\n2. [Listing All Running Threads](http://www.exampledepot.com/egs/java.lang/ListThreads.html)\r\n\r\n============\r\n\r\nA starting code :\r\n\r\n**ThreadCreationListener.java**\r\n\r\n    public interface ThreadCreationListener {\r\n        public void onThreadCreation(Thread newThread);\r\n    }\r\n\r\n**ThreadCreationMonitor.java**\r\n \r\n    public class ThreadCreationMonitor extends Thread {\r\n       private List&lt;ThreadCreationListener&gt; listeners;\r\n       private boolean canGo;\r\n\r\n       public ThreadCreationMonitor() {\r\n          listeners = new Vector&lt;ThreadCreationListener&gt;();//Vector class is used because many threads may use a ThreadCreationMonitor instance.\r\n          canGo = true;\r\n          // Initialize the rest of the class here...\r\n       }\r\n\r\n       // Most important methods\r\n       public void addListener(ThreadCreationListener tcl) {\r\n            listeners.add(tcl);\r\n       }\r\n\r\n       public void removeListener(ThreadCreationListener tcl) {\r\n            listeners.remove(tcl);\r\n       }\r\n\r\n       public void run() {\r\n            List&lt;Thread&gt; runningThreads;\r\n            List&lt;Thread&gt; lastRunningThreads = new ArrayList&lt;&gt;();\r\n\r\n            while(canGo) {\r\n                // Step 1 - List all running threads (see previous links)\r\n                // runningThreads = ...\r\n   \r\n                // Step 2 - Check for new threads and notify all listeners if necessary\r\n                if (runningThreads.removeAll(lastRunningThreads)==true) {\r\n                    for(Thread t : runningThreads) {\r\n                        for(ThreadCreationListener tcl : listeners) {\r\n                            lastRunningThreads.add(t);\r\n                            tcl.onThreadCreation(t); //Notify listener\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n       }\r\n\r\n       public void shutdown() {\r\n           canGo = false;\r\n       }\r\n    }\r\n\r\n**MyThreadInfoConsumer.java**\r\n\r\n    public class MyThreadInfoConsumer implements ThreadCreationListener {\r\n        public void onThreadCreation(Thread newThread) {\r\n            // Process here the notification...\r\n        }\r\n    }\r\n\r\n**Main.java**\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n           ThreadCreationMonitor tcm = new ThreadCreationMonitor();\r\n           tcm.start();\r\n\r\n           MyThreadInfoConsumer myTIC = new MyThreadInfoConsumer();\r\n           tcm.addListener(myTIC);\r\n\r\n           // rest of your code...\r\n           // Don&#39;t forget to call tcm.shutdown() when exiting your application !\r\n        }\r\n    }\r\n\r\n","title":"Thread creation listener","body":"<p>I would create a thread that continously lists all running threads on the JVM.<br>\nThen each time it noticies that a new thread has appeared, it would notify in either way a class in your code.</p>\n<p>Here are some links about how to list all threads currently running on the JVM :</p>\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/1323408/get-a-list-of-all-threads-currently-running-in-java\">Get a List of all Threads currently running in Java</a></p>\n</li>\n<li><p><a href=\"http://www.exampledepot.com/egs/java.lang/ListThreads.html\" rel=\"nofollow noreferrer\">Listing All Running Threads</a></p>\n</li>\n</ol>\n<p>============</p>\n<p>A starting code :</p>\n<p><strong>ThreadCreationListener.java</strong></p>\n<pre><code>public interface ThreadCreationListener {\n    public void onThreadCreation(Thread newThread);\n}\n</code></pre>\n<p><strong>ThreadCreationMonitor.java</strong></p>\n<pre><code>public class ThreadCreationMonitor extends Thread {\n   private List&lt;ThreadCreationListener&gt; listeners;\n   private boolean canGo;\n\n   public ThreadCreationMonitor() {\n      listeners = new Vector&lt;ThreadCreationListener&gt;();//Vector class is used because many threads may use a ThreadCreationMonitor instance.\n      canGo = true;\n      // Initialize the rest of the class here...\n   }\n\n   // Most important methods\n   public void addListener(ThreadCreationListener tcl) {\n        listeners.add(tcl);\n   }\n\n   public void removeListener(ThreadCreationListener tcl) {\n        listeners.remove(tcl);\n   }\n\n   public void run() {\n        List&lt;Thread&gt; runningThreads;\n        List&lt;Thread&gt; lastRunningThreads = new ArrayList&lt;&gt;();\n\n        while(canGo) {\n            // Step 1 - List all running threads (see previous links)\n            // runningThreads = ...\n\n            // Step 2 - Check for new threads and notify all listeners if necessary\n            if (runningThreads.removeAll(lastRunningThreads)==true) {\n                for(Thread t : runningThreads) {\n                    for(ThreadCreationListener tcl : listeners) {\n                        lastRunningThreads.add(t);\n                        tcl.onThreadCreation(t); //Notify listener\n                    }\n                }\n            }\n        }\n   }\n\n   public void shutdown() {\n       canGo = false;\n   }\n}\n</code></pre>\n<p><strong>MyThreadInfoConsumer.java</strong></p>\n<pre><code>public class MyThreadInfoConsumer implements ThreadCreationListener {\n    public void onThreadCreation(Thread newThread) {\n        // Process here the notification...\n    }\n}\n</code></pre>\n<p><strong>Main.java</strong></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n       ThreadCreationMonitor tcm = new ThreadCreationMonitor();\n       tcm.start();\n\n       MyThreadInfoConsumer myTIC = new MyThreadInfoConsumer();\n       tcm.addListener(myTIC);\n\n       // rest of your code...\n       // Don't forget to call tcm.shutdown() when exiting your application !\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":913338,"reputation":4944,"user_id":946679,"accept_rate":100,"display_name":"zeller"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1348049845,"creation_date":1348045164,"answer_id":12491455,"question_id":12491112,"body_markdown":"I think this would be possible with AOP (aspectj for instance). But it is still required to create your own `Thread` and `ThreadGroup`/`Executor` types, unless you can recompile the JDK classes with the aspect compiler. Define the pointcut on your thread&#39;s `start` method if you want to register on thread launching or on the `createThread` of your pool if you want to register on the creation of the thread objects.\r\n\r\n----------\r\nThe following works only if you recompiled the JDK with the aspect compiler:\r\nAll threads are started with `Thread.start`, so write a pointcut for that method then you can use advices to do what you&#39;d like to. Of course this is not perfect since  e.g. a cachedThreadPool executor might not start a new thread for each task, but maybe if you register a pointcut on `Runnable.run` and `Callable.call` rather than on `Thread.start`, that might be sufficient enough. ","title":"Thread creation listener","body":"<p>I think this would be possible with AOP (aspectj for instance). But it is still required to create your own <code>Thread</code> and <code>ThreadGroup</code>/<code>Executor</code> types, unless you can recompile the JDK classes with the aspect compiler. Define the pointcut on your thread's <code>start</code> method if you want to register on thread launching or on the <code>createThread</code> of your pool if you want to register on the creation of the thread objects.</p>\n\n<hr>\n\n<p>The following works only if you recompiled the JDK with the aspect compiler:\nAll threads are started with <code>Thread.start</code>, so write a pointcut for that method then you can use advices to do what you'd like to. Of course this is not perfect since  e.g. a cachedThreadPool executor might not start a new thread for each task, but maybe if you register a pointcut on <code>Runnable.run</code> and <code>Callable.call</code> rather than on <code>Thread.start</code>, that might be sufficient enough. </p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1348045790,"creation_date":1348045790,"answer_id":12491640,"question_id":12491112,"body_markdown":"Perhaps a ThreadGroup is what you need.  All Threads are members of a ThreadGroup and when you start a new Thread it is added to the same group as its parent by default.\r\n\r\nIn theory its possible (but not recommended) to sub-class to be notified when a Thread is added or removed from the group.\r\n\r\nIt is likely that polling the threads of this groups, or polling all threads is a better solution.","title":"Thread creation listener","body":"<p>Perhaps a ThreadGroup is what you need.  All Threads are members of a ThreadGroup and when you start a new Thread it is added to the same group as its parent by default.</p>\n\n<p>In theory its possible (but not recommended) to sub-class to be notified when a Thread is added or removed from the group.</p>\n\n<p>It is likely that polling the threads of this groups, or polling all threads is a better solution.</p>\n"}],"owner":{"account_id":1360570,"reputation":5872,"user_id":1298028,"accept_rate":85,"display_name":"Łukasz Rzeszotarski"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3109,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":12491455,"answer_count":3,"score":7,"last_activity_date":1660157172,"creation_date":1348043739,"question_id":12491112,"body_markdown":"Is it possible to write Thread creation listener in java? For example using aop?!\r\n\r\nI mean something like this that if my application creates a thread I would like to register this object in my own table, container or something.","title":"Thread creation listener","body":"<p>Is it possible to write Thread creation listener in java? For example using aop?!</p>\n\n<p>I mean something like this that if my application creates a thread I would like to register this object in my own table, container or something.</p>\n"},{"tags":["java","spring","sorting","jpa","querydsl"],"comments":[{"owner":{"account_id":3029291,"reputation":1704,"user_id":2568649,"display_name":"Chris"},"score":0,"creation_date":1659992166,"post_id":73283836,"comment_id":129423112,"body_markdown":"Sounds unlikely - how would you communicate that A is special,  but I don&#39;t know. If not possible, as an alternative is it worth  wrapping your query interface in another class that sorts the list that comes back based on your nuanced rules?","body":"Sounds unlikely - how would you communicate that A is special,  but I don&#39;t know. If not possible, as an alternative is it worth  wrapping your query interface in another class that sorts the list that comes back based on your nuanced rules?"},{"owner":{"account_id":3029291,"reputation":1704,"user_id":2568649,"display_name":"Chris"},"score":0,"creation_date":1659992716,"post_id":73283836,"comment_id":129423259,"body_markdown":"Oh I see - my bad, you can implement OrderSpecifier, and so in theory you can do whatever you need there, but I guess you&#39;re wondering how to do that for your case, I haven&#39;t looked in detail at that interface but I&#39;d expect it to be pretty flexible in terms of how complex your ordering can be","body":"Oh I see - my bad, you can implement OrderSpecifier, and so in theory you can do whatever you need there, but I guess you&#39;re wondering how to do that for your case, I haven&#39;t looked in detail at that interface but I&#39;d expect it to be pretty flexible in terms of how complex your ordering can be"}],"answers":[{"tags":[],"owner":{"account_id":2408521,"reputation":3734,"user_id":2104280,"accept_rate":78,"display_name":"Jan-Willem Gmelig Meyling"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660037832,"creation_date":1659992700,"answer_id":73284009,"question_id":73283836,"body_markdown":"You can order by a boolean expresion. Booleans order false to true naturally, so you can just sort ascending.\r\n\r\n```\r\n.orderBy(enum.eq(&quot;A&quot;).asc(), created.asc())\r\n```","title":"QueryDsl orderBy some enums and date","body":"<p>You can order by a boolean expresion. Booleans order false to true naturally, so you can just sort ascending.</p>\n<pre><code>.orderBy(enum.eq(&quot;A&quot;).asc(), created.asc())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14034643,"reputation":584,"user_id":10137647,"display_name":"Azianese"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660156492,"creation_date":1660156492,"answer_id":73311151,"question_id":73283836,"body_markdown":"I ended up finding a working solution with something like:\r\n\r\n    \tprivate OrderSpecifier&lt;Integer&gt; orderByEnum() {\r\n    \t\tNumberExpression&lt;Integer&gt; cases = new CaseBuilder()\r\n    \t\t\t\t.when(QTable.table.enum.eq(&quot;A&quot;))\r\n    \t\t\t\t\t\t.then(2)\r\n    \t\t\t\t.otherwise(1);\r\n    \t\treturn new OrderSpecifier&lt;&gt;(Order.ASC, cases);\r\n    \t}\r\n\r\nI added that to a order specifier array like so:\r\n\r\n    \tOrderSpecifier&lt;?&gt;[] order = new OrderSpecifier[] {\r\n    \t\t\torderByEnum(),\r\n    \t\t\tQTable.table.dateCreated.asc()\r\n    \t};\r\n\r\nAnd then I passed the order specifier array to the query with\r\n\r\n    \tqueryFactory.select(...)\r\n    \t\t\t.from(...)\r\n    \t\t\t.where(...)\r\n    \t\t\t.orderBy(order);\r\n\r\nIt looks like this got me what I needed. Just had to break the problem down into individual components and add that to an order specifier array.","title":"QueryDsl orderBy some enums and date","body":"<p>I ended up finding a working solution with something like:</p>\n<pre><code>    private OrderSpecifier&lt;Integer&gt; orderByEnum() {\n        NumberExpression&lt;Integer&gt; cases = new CaseBuilder()\n                .when(QTable.table.enum.eq(&quot;A&quot;))\n                        .then(2)\n                .otherwise(1);\n        return new OrderSpecifier&lt;&gt;(Order.ASC, cases);\n    }\n</code></pre>\n<p>I added that to a order specifier array like so:</p>\n<pre><code>    OrderSpecifier&lt;?&gt;[] order = new OrderSpecifier[] {\n            orderByEnum(),\n            QTable.table.dateCreated.asc()\n    };\n</code></pre>\n<p>And then I passed the order specifier array to the query with</p>\n<pre><code>    queryFactory.select(...)\n            .from(...)\n            .where(...)\n            .orderBy(order);\n</code></pre>\n<p>It looks like this got me what I needed. Just had to break the problem down into individual components and add that to an order specifier array.</p>\n"}],"owner":{"account_id":14034643,"reputation":584,"user_id":10137647,"display_name":"Azianese"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":985,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660156492,"creation_date":1659991679,"question_id":73283836,"body_markdown":"I need a way to sort based on date, with all rows of a certain type to be grouped last (but also sorted by date).\r\n\r\nFor instance, suppose I have a DB column where values can take on [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]. In the same table, there is also a dateCreated column.\r\n\r\nI want all rows with &quot;A&quot; to be last and all rows (including those within group A) to be sorted by date created (ascending for simplicity sake)\r\n\r\nFor instance, if I had the rows:\r\n\r\n\r\n| ID | enum | dateCreated |\r\n|---|---|---|\r\n| 1 | A | 2020-01-01\r\n| 2 | A | 2020-01-03\r\n| 3 | A | 2020-01-02\r\n| 4 | B | 2020-02-03\r\n| 5 | B | 2020-02-01\r\n| 6 | C | 2020-02-02\r\n\r\nThe resulting order should be:\r\n\r\n    5,6,4,1,3,2\r\n\r\nTo explain, all of the non-A rows come first, ordered by date. Then all of the A rows, also ordered by date.\r\n\r\nI see the SO post https://stackoverflow.com/questions/67447083/querydsl-orderby-specific-string-values which almost provides what I need, but it is unfortunately not nuanced enough for my use case.","title":"QueryDsl orderBy some enums and date","body":"<p>I need a way to sort based on date, with all rows of a certain type to be grouped last (but also sorted by date).</p>\n<p>For instance, suppose I have a DB column where values can take on [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]. In the same table, there is also a dateCreated column.</p>\n<p>I want all rows with &quot;A&quot; to be last and all rows (including those within group A) to be sorted by date created (ascending for simplicity sake)</p>\n<p>For instance, if I had the rows:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>ID</th>\n<th>enum</th>\n<th>dateCreated</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>A</td>\n<td>2020-01-01</td>\n</tr>\n<tr>\n<td>2</td>\n<td>A</td>\n<td>2020-01-03</td>\n</tr>\n<tr>\n<td>3</td>\n<td>A</td>\n<td>2020-01-02</td>\n</tr>\n<tr>\n<td>4</td>\n<td>B</td>\n<td>2020-02-03</td>\n</tr>\n<tr>\n<td>5</td>\n<td>B</td>\n<td>2020-02-01</td>\n</tr>\n<tr>\n<td>6</td>\n<td>C</td>\n<td>2020-02-02</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>The resulting order should be:</p>\n<pre><code>5,6,4,1,3,2\n</code></pre>\n<p>To explain, all of the non-A rows come first, ordered by date. Then all of the A rows, also ordered by date.</p>\n<p>I see the SO post <a href=\"https://stackoverflow.com/questions/67447083/querydsl-orderby-specific-string-values\">QueryDsl orderBy specific string values</a> which almost provides what I need, but it is unfortunately not nuanced enough for my use case.</p>\n"},{"tags":["java","android","audio","tarsosdsp"],"comments":[{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1558118577,"post_id":56170296,"comment_id":99008631,"body_markdown":"I don&#39;t use Android APIs but can&#39;t `pitchInHz = res.getPitch();` also be followed by the `.getMaxAmplitude();` code?","body":"I don&#39;t use Android APIs but can&#39;t <code>pitchInHz = res.getPitch();</code> also be followed by the <code>.getMaxAmplitude();</code> code?"},{"owner":{"account_id":14336270,"reputation":767,"user_id":10355644,"display_name":"cas"},"score":0,"creation_date":1558176751,"post_id":56170296,"comment_id":99019802,"body_markdown":"no unfortunatly it cant, that would be awesome though","body":"no unfortunatly it cant, that would be awesome though"}],"answers":[{"tags":[],"owner":{"account_id":14336270,"reputation":767,"user_id":10355644,"display_name":"cas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1597177605,"creation_date":1558537115,"answer_id":56259739,"question_id":56170296,"body_markdown":"found the solution myself. you can do audioEvent.getFloatBuffer() then run that buffer trough some fft methods and then you can extract the amplitude value from the buffer. the buffer is pretty small so I just ended up getting the max amplitude from that buffer while its running, that&#39;ll get you an amplitude readout many times a second and that&#39;s live enough for me.\r\n**edit**\r\nexample:\r\n```\r\n public void handlePitch(PitchDetectionResult result, final AudioEvent e) {\r\n\r\n                        final float pitchInHz = result.getPitch();\r\n                        final float[] amplitudes = new float[e.getBufferSize()];\r\n\r\n                        new Thread(new Runnable() {\r\n                            public void run() {\r\n                                if (pitchInHz &gt; pitch) {\r\n                                    pitch = pitchInHz;\r\n                                }\r\n\r\n                                float[] audioFloatBuffer = e.getFloatBuffer();\r\n                                float[] transformBuffer = new float[e.getBufferSize() * 2];\r\n                                FFT fft = new FFT(e.getBufferSize());\r\n                                System.arraycopy(audioFloatBuffer, 0, transformBuffer, 0, audioFloatBuffer.length);\r\n                                fft.forwardTransform(transformBuffer);\r\n                                fft.modulus(transformBuffer, amplitudes);\r\n\r\n\r\n                                for (int index = 0; index &lt; amplitudes.length; index++) {\r\n                                    if (amplitudes[index] &gt; amp) {\r\n                                        amp = amplitudes[index];\r\n                                    }\r\n                                }\r\n                            }\r\n                        }).start();\r\n                    }\r\n```","title":"Android, live amplitude and pitch detection","body":"<p>found the solution myself. you can do audioEvent.getFloatBuffer() then run that buffer trough some fft methods and then you can extract the amplitude value from the buffer. the buffer is pretty small so I just ended up getting the max amplitude from that buffer while its running, that'll get you an amplitude readout many times a second and that's live enough for me.\n<strong>edit</strong>\nexample:</p>\n<pre><code> public void handlePitch(PitchDetectionResult result, final AudioEvent e) {\n\n                        final float pitchInHz = result.getPitch();\n                        final float[] amplitudes = new float[e.getBufferSize()];\n\n                        new Thread(new Runnable() {\n                            public void run() {\n                                if (pitchInHz &gt; pitch) {\n                                    pitch = pitchInHz;\n                                }\n\n                                float[] audioFloatBuffer = e.getFloatBuffer();\n                                float[] transformBuffer = new float[e.getBufferSize() * 2];\n                                FFT fft = new FFT(e.getBufferSize());\n                                System.arraycopy(audioFloatBuffer, 0, transformBuffer, 0, audioFloatBuffer.length);\n                                fft.forwardTransform(transformBuffer);\n                                fft.modulus(transformBuffer, amplitudes);\n\n\n                                for (int index = 0; index &lt; amplitudes.length; index++) {\n                                    if (amplitudes[index] &gt; amp) {\n                                        amp = amplitudes[index];\n                                    }\n                                }\n                            }\n                        }).start();\n                    }\n</code></pre>\n"}],"owner":{"account_id":14336270,"reputation":767,"user_id":10355644,"display_name":"cas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1928,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":56259739,"answer_count":1,"score":3,"last_activity_date":1660156471,"creation_date":1558015051,"question_id":56170296,"body_markdown":"I&#39;m writing an app that needs to listen to the microphone and give me a live amplitude and pitch output. I have figured out how to do pitch recognition. I&#39;ve been doing a lot of research into fft. found the Android library TarsosDSP which makes listening for pitch extremely simple:\r\n\r\n```\r\nAudioDispatcher dispatcher = \r\n        AudioDispatcherFactory.fromDefaultMicrophone(22050,1024,0);\r\nPitchDetectionHandler pdh = new PitchDetectionHandler() {\r\n    @Override\r\n    public void handlePitch(PitchDetectionResult res, AudioEvent e){\r\n        final float pitchInHz = res.getPitch();\r\n        runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                processPitch(pitchInHz);\r\n            }\r\n        });\r\n    }\r\n};\r\nAudioProcessor pitchProcessor = new PitchProcessor(PitchEstimationAlgorithm.FFT_YIN, 22050, 1024, pdh);\r\ndispatcher.addAudioProcessor(pitchProcessor);\r\n\r\nThread audioThread = new Thread(dispatcher, &quot;Audio Thread&quot;);\r\naudioThread.start();\r\n```\r\nI&#39;ve also figured out how to do amplitude detection by just using the build-in android .getMaxAmplitude() method. \r\n\r\nbut my problem is that I can&#39;t for the life of me figure out how to do both at the same time. the problem is that you apparently can run more than one instance of the microphone. As in if you try to run two separate live recordings on separate threads. I&#39;ve looked trough the entire internet trying to look for some example code to get me going , but I can&#39;t find a thing. Has anyone ever had to do anything similar?\r\n\r\n**edit**\r\nI&#39;ve figured out that you can use the AudioEvent from the Pitchdetectionhandler.\r\naudioevent.getbytebuffer() returns a byte array with the audio data in bytes, according to the documentation: https://0110.be/releases/TarsosDSP/TarsosDSP-latest/TarsosDSP-latest-Documentation/ .\r\n\r\nand if I&#39;m not mistaking when converted to a short[], the highest value is the highest amplitude right?\r\n\r\nbut:\r\n```\r\nfinal byte[] audioBytes = e.getByteBuffer();\r\n short[] shortArray = new short[audioBytes.length];\r\n         for (int index = 0; index &lt; audioBytes.length; index++) {\r\n                    shortArray[index] = (short) audioBytes[index];\r\n                            float item = shortArray[index];\r\n                               if (item &gt; amp){\r\n                                        amp = item;\r\n                                    }\r\n                                }\r\n```\r\nin this case amp always returns 127. And this method wouldn&#39;t really work live anyway?\r\n\r\nso three more questions. is my basic thinking right, if so why does it always return 127, and how would I use this in a live context?\r\n\r\n 1. List item","title":"Android, live amplitude and pitch detection","body":"<p>I'm writing an app that needs to listen to the microphone and give me a live amplitude and pitch output. I have figured out how to do pitch recognition. I've been doing a lot of research into fft. found the Android library TarsosDSP which makes listening for pitch extremely simple:</p>\n<pre><code>AudioDispatcher dispatcher = \n        AudioDispatcherFactory.fromDefaultMicrophone(22050,1024,0);\nPitchDetectionHandler pdh = new PitchDetectionHandler() {\n    @Override\n    public void handlePitch(PitchDetectionResult res, AudioEvent e){\n        final float pitchInHz = res.getPitch();\n        runOnUiThread(new Runnable() {\n            @Override\n            public void run() {\n                processPitch(pitchInHz);\n            }\n        });\n    }\n};\nAudioProcessor pitchProcessor = new PitchProcessor(PitchEstimationAlgorithm.FFT_YIN, 22050, 1024, pdh);\ndispatcher.addAudioProcessor(pitchProcessor);\n\nThread audioThread = new Thread(dispatcher, &quot;Audio Thread&quot;);\naudioThread.start();\n</code></pre>\n<p>I've also figured out how to do amplitude detection by just using the build-in android .getMaxAmplitude() method.</p>\n<p>but my problem is that I can't for the life of me figure out how to do both at the same time. the problem is that you apparently can run more than one instance of the microphone. As in if you try to run two separate live recordings on separate threads. I've looked trough the entire internet trying to look for some example code to get me going , but I can't find a thing. Has anyone ever had to do anything similar?</p>\n<p><strong>edit</strong>\nI've figured out that you can use the AudioEvent from the Pitchdetectionhandler.\naudioevent.getbytebuffer() returns a byte array with the audio data in bytes, according to the documentation: <a href=\"https://0110.be/releases/TarsosDSP/TarsosDSP-latest/TarsosDSP-latest-Documentation/\" rel=\"nofollow noreferrer\">https://0110.be/releases/TarsosDSP/TarsosDSP-latest/TarsosDSP-latest-Documentation/</a> .</p>\n<p>and if I'm not mistaking when converted to a short[], the highest value is the highest amplitude right?</p>\n<p>but:</p>\n<pre><code>final byte[] audioBytes = e.getByteBuffer();\n short[] shortArray = new short[audioBytes.length];\n         for (int index = 0; index &lt; audioBytes.length; index++) {\n                    shortArray[index] = (short) audioBytes[index];\n                            float item = shortArray[index];\n                               if (item &gt; amp){\n                                        amp = item;\n                                    }\n                                }\n</code></pre>\n<p>in this case amp always returns 127. And this method wouldn't really work live anyway?</p>\n<p>so three more questions. is my basic thinking right, if so why does it always return 127, and how would I use this in a live context?</p>\n<ol>\n<li>List item</li>\n</ol>\n"},{"tags":["java","android","iphone","ios","date"],"comments":[{"owner":{"account_id":1578540,"reputation":2609,"user_id":1464430,"display_name":"Ascension"},"score":0,"creation_date":1354559828,"post_id":13689475,"comment_id":18795243,"body_markdown":"Look here: http://stackoverflow.com/questions/4927856/how-to-calculate-time-difference-in-java","body":"Look here: <a href=\"http://stackoverflow.com/questions/4927856/how-to-calculate-time-difference-in-java\" title=\"how to calculate time difference in java\">stackoverflow.com/questions/4927856/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1322038,"reputation":86670,"user_id":1267661,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1354561150,"creation_date":1354559880,"answer_id":13689557,"question_id":13689475,"body_markdown":"You can use [`System.currentTimeMillis()`](http://developer.android.com/reference/java/lang/System.html#currentTimeMillis%28%29) to calculate milliseconds:\r\n\r\n    long start = System.currentTimeMillis();\r\n    // Do stuff\r\n    long difference = System.currentTimeMillis() - start;\r\n    Log.v(&quot;Time difference:&quot;, String.valueOf(difference));\r\n\r\nIf you want something more precise use [`System.nanoTime()`](http://developer.android.com/reference/java/lang/System.html#nanoTime%28%29). If you want seconds simply divide `System.currentTimeMillis()` by 1000. \r\n\r\nThere is the DateUtils class (`android.text.format.DateUtils`) that can calculate relative time differences like &quot;5 mins ago&quot;. Also [Joda Time](http://joda-time.sourceforge.net/) is a great 3rd party library if you plan to do a lot of work with time.","title":"What is the Android/Java equivalent of the iOS call [NSDate timeIntervalSinceNow]?","body":"<p>You can use <a href=\"http://developer.android.com/reference/java/lang/System.html#currentTimeMillis%28%29\" rel=\"nofollow\"><code>System.currentTimeMillis()</code></a> to calculate milliseconds:</p>\n\n<pre><code>long start = System.currentTimeMillis();\n// Do stuff\nlong difference = System.currentTimeMillis() - start;\nLog.v(\"Time difference:\", String.valueOf(difference));\n</code></pre>\n\n<p>If you want something more precise use <a href=\"http://developer.android.com/reference/java/lang/System.html#nanoTime%28%29\" rel=\"nofollow\"><code>System.nanoTime()</code></a>. If you want seconds simply divide <code>System.currentTimeMillis()</code> by 1000. </p>\n\n<p>There is the DateUtils class (<code>android.text.format.DateUtils</code>) that can calculate relative time differences like \"5 mins ago\". Also <a href=\"http://joda-time.sourceforge.net/\" rel=\"nofollow\">Joda Time</a> is a great 3rd party library if you plan to do a lot of work with time.</p>\n"},{"tags":[],"owner":{"account_id":1520047,"reputation":302,"user_id":1419960,"display_name":"Andrew Kingdom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660156387,"creation_date":1660156387,"answer_id":73311137,"question_id":13689475,"body_markdown":"**Java**\r\n```Java\r\nvoid test() {\r\n\r\n    Date startDateX = new Date();  // represents down to milliseconds\r\n    \r\n    // Do a bunch of stuff\r\n    // ...\r\n\r\n    System.out.printf(&quot;%.3f&quot;, timeIntervalSinceNow(startDateX));\r\n\r\n}\r\n\r\nprivate Double timeIntervalSinceNow(Date date) { return 0.001 * (date.getTime() - System.currentTimeMillis()); }  // The time interval between the date and the current date and time. If the date parameter is earlier than the current date and time, this property&#39;s value is negative.\r\n```\r\n\r\nIs equivalent to...\r\n\r\n**Objective-C**\r\n```Objective-C\r\n- (void) test {\r\n    \r\n    NSDate *startDateX = [NSDate date];\r\n    \r\n    // Do a bunch of stuff\r\n    // ...\r\n\r\n    NSLog(@&quot;Time difference: %f&quot;, -[startDateX timeIntervalSinceNow]);\r\n}\r\n```\r\nOr...\r\n**Swift 5**\r\n```Swift\r\nfunc test() {\r\n    \r\n    let startDateX = Date()\r\n    \r\n    // Do a bunch of stuff\r\n    // ...\r\n\r\n    print(String(format: &quot;Time difference: %f&quot;, -startDateX.timeIntervalSinceNow))\r\n}\r\n```\r\n\r\n","title":"What is the Android/Java equivalent of the iOS call [NSDate timeIntervalSinceNow]?","body":"<p><strong>Java</strong></p>\n<pre><code>void test() {\n\n    Date startDateX = new Date();  // represents down to milliseconds\n    \n    // Do a bunch of stuff\n    // ...\n\n    System.out.printf(&quot;%.3f&quot;, timeIntervalSinceNow(startDateX));\n\n}\n\nprivate Double timeIntervalSinceNow(Date date) { return 0.001 * (date.getTime() - System.currentTimeMillis()); }  // The time interval between the date and the current date and time. If the date parameter is earlier than the current date and time, this property's value is negative.\n</code></pre>\n<p>Is equivalent to...</p>\n<p><strong>Objective-C</strong></p>\n<pre><code>- (void) test {\n    \n    NSDate *startDateX = [NSDate date];\n    \n    // Do a bunch of stuff\n    // ...\n\n    NSLog(@&quot;Time difference: %f&quot;, -[startDateX timeIntervalSinceNow]);\n}\n</code></pre>\n<p>Or...\n<strong>Swift 5</strong></p>\n<pre><code>func test() {\n    \n    let startDateX = Date()\n    \n    // Do a bunch of stuff\n    // ...\n\n    print(String(format: &quot;Time difference: %f&quot;, -startDateX.timeIntervalSinceNow))\n}\n</code></pre>\n"}],"owner":{"account_id":261970,"reputation":14545,"user_id":546509,"accept_rate":70,"display_name":"Ethan Allen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1868,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":13689557,"answer_count":2,"score":2,"last_activity_date":1660156387,"creation_date":1354559590,"question_id":13689475,"body_markdown":"Here is some sample code from iOS:\r\n\r\n    NSDate *startDateX = [NSDate date];\r\n\r\n    // Do a bunch of stuff\r\n\r\n    NSLog(@&quot;Time difference: %f&quot;, -[startDateX timeIntervalSinceNow]);\r\n\r\nThe output looks like this:\r\n\r\n    Time difference: 15.009682\r\n\r\nWhat is the equivalent way to do this in Android/Java?","title":"What is the Android/Java equivalent of the iOS call [NSDate timeIntervalSinceNow]?","body":"<p>Here is some sample code from iOS:</p>\n\n<pre><code>NSDate *startDateX = [NSDate date];\n\n// Do a bunch of stuff\n\nNSLog(@\"Time difference: %f\", -[startDateX timeIntervalSinceNow]);\n</code></pre>\n\n<p>The output looks like this:</p>\n\n<pre><code>Time difference: 15.009682\n</code></pre>\n\n<p>What is the equivalent way to do this in Android/Java?</p>\n"},{"tags":["java","windows","active-directory"],"answers":[{"tags":[],"owner":{"account_id":1239958,"reputation":39014,"user_id":1202807,"display_name":"Gabriel Luci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644937391,"creation_date":1644937391,"answer_id":71128705,"question_id":71128351,"body_markdown":"To reset the password, you update the `unicodePwd` attribute. [The documentation](https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/6e803168-f140-4d23-b2d3-c3a8ab5917d2) tells you about a couple requirements:\r\n\r\n1. The new password has to be in a specific format: enclosed in double-quotes and then converted to UTF-16 encoding, and\r\n2. The connection must be encrypted.\r\n\r\n[This page](https://ldapwiki.com/wiki/Example%20-%20Active%20Directory%20Change%20Password%20JNDI) has an example of how to do this in Java, which I&#39;ve pasted below. It doesn&#39;t talk about the encryption, but you can use LDAP over SSL (LDAPS), which you can do by using `LDAPS://` instead of just `LDAP://`. That assumes that the AD server is setup for LDAPS correctly and you don&#39;t have a firewall blocking the LDAPS port (636).\r\n\r\n```\r\n/**\r\n * Update User Password in Microsoft Active Directory\r\n * @param username\r\n * @param password\r\n */\r\npublic void updateUserPassword(String username, String password)\r\n{\r\n\ttry\r\n\t{\r\n\t\tSystem.out.println(&quot;updating password...\\n&quot;);\r\n\t\tString quotedPassword = &quot;\\&quot;&quot; + password + &quot;\\&quot;&quot;;\r\n\t\tchar unicodePwd[] = quotedPassword.toCharArray();\r\n\t\tbyte pwdArray[] = new byte[unicodePwd.length * 2];\r\n\t\tfor (int i = 0; i &lt; unicodePwd.length; i++)\r\n\t\t{\r\n\t\tpwdArray[i * 2 + 1] = (byte) (unicodePwd[i] &gt;&gt;&gt; 8);\r\n\t\tpwdArray[i * 2 + 0] = (byte) (unicodePwd[i] &amp; 0xff);\r\n\t\t}\r\n\t\tSystem.out.print(&quot;encoded password: &quot;);\r\n\t\tfor (int i = 0; i &lt; pwdArray.length; i++)\r\n\t\t{\r\n\t\tSystem.out.print(pwdArray[i] + &quot; &quot;);\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t\tModificationItem[] mods = new ModificationItem[1];\r\n\t\tmods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute(&quot;UnicodePwd&quot;, pwdArray));\r\n\t\tldapContext.modifyAttributes(&quot;cn=&quot; + username + BASE_NAME, mods);\r\n\t}\r\n\tcatch (Exception e)\r\n\t{\r\n\t\tSystem.out.println(&quot;update password error: &quot; + e);\r\n\t}\r\n}\r\n```\r\n\r\n","title":"Windows AD unable to reset password from code","body":"<p>To reset the password, you update the <code>unicodePwd</code> attribute. <a href=\"https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/6e803168-f140-4d23-b2d3-c3a8ab5917d2\" rel=\"nofollow noreferrer\">The documentation</a> tells you about a couple requirements:</p>\n<ol>\n<li>The new password has to be in a specific format: enclosed in double-quotes and then converted to UTF-16 encoding, and</li>\n<li>The connection must be encrypted.</li>\n</ol>\n<p><a href=\"https://ldapwiki.com/wiki/Example%20-%20Active%20Directory%20Change%20Password%20JNDI\" rel=\"nofollow noreferrer\">This page</a> has an example of how to do this in Java, which I've pasted below. It doesn't talk about the encryption, but you can use LDAP over SSL (LDAPS), which you can do by using <code>LDAPS://</code> instead of just <code>LDAP://</code>. That assumes that the AD server is setup for LDAPS correctly and you don't have a firewall blocking the LDAPS port (636).</p>\n<pre><code>/**\n * Update User Password in Microsoft Active Directory\n * @param username\n * @param password\n */\npublic void updateUserPassword(String username, String password)\n{\n    try\n    {\n        System.out.println(&quot;updating password...\\n&quot;);\n        String quotedPassword = &quot;\\&quot;&quot; + password + &quot;\\&quot;&quot;;\n        char unicodePwd[] = quotedPassword.toCharArray();\n        byte pwdArray[] = new byte[unicodePwd.length * 2];\n        for (int i = 0; i &lt; unicodePwd.length; i++)\n        {\n        pwdArray[i * 2 + 1] = (byte) (unicodePwd[i] &gt;&gt;&gt; 8);\n        pwdArray[i * 2 + 0] = (byte) (unicodePwd[i] &amp; 0xff);\n        }\n        System.out.print(&quot;encoded password: &quot;);\n        for (int i = 0; i &lt; pwdArray.length; i++)\n        {\n        System.out.print(pwdArray[i] + &quot; &quot;);\n        }\n        System.out.println();\n        ModificationItem[] mods = new ModificationItem[1];\n        mods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute(&quot;UnicodePwd&quot;, pwdArray));\n        ldapContext.modifyAttributes(&quot;cn=&quot; + username + BASE_NAME, mods);\n    }\n    catch (Exception e)\n    {\n        System.out.println(&quot;update password error: &quot; + e);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18540481,"reputation":457,"user_id":15387001,"display_name":"Bharat Gadade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660156055,"creation_date":1660156055,"answer_id":73311082,"question_id":71128351,"body_markdown":"Alternatively, You can reset the AD password using the PowerShell.\r\n\r\nThis Powershell function helps you to reset the Active directory user password from the Domain client computer. The Domain user must member of the Domain Admin to perform the password management from the domain workstation.\r\nWhile resting the password this function also unlocked the user account.\r\n\r\n    Function Reset-ADUserPassword {\r\n        Param  ([Parameter(Mandatory = $true, Position = 0,\r\n                HelpMessage = &#39;Enter User Name&#39;)]\r\n            [ValidateNotNull()]\r\n            [string] $Username,\r\n            [Parameter(Mandatory = $true, Position = 1,\r\n                HelpMessage = &#39;Enter Password&#39;)]\r\n            [ValidateNotNull()]\r\n            [string] $Password\r\n        )\r\n        Invoke-Command -ComputerName &lt;ActiveDirectoryServerName&gt; -ArgumentList $Username, $Password  -ScriptBlock { param($Username, $Password) import-module activedirectory; Unlock-ADAccount -Identity $Username ; enable-adaccount $Username ; Set-ADAccountPassword $Username -NewPassword (ConvertTo-SecureString -AsPlainText $Password -Force); get-aduser -identity $Username -Properties * | select-object UserprincipalName }\r\n        Write-Output &quot;Password Set Successfully for the user: $Username and the password is: $Password &quot;;\r\n        \r\n    }\r\n\r\nOnce you run the above function on Powershell use the below command to reset the password.\r\n\r\n    Reset-ADUserPassword -Username abc -Password test@123 ","title":"Windows AD unable to reset password from code","body":"<p>Alternatively, You can reset the AD password using the PowerShell.</p>\n<p>This Powershell function helps you to reset the Active directory user password from the Domain client computer. The Domain user must member of the Domain Admin to perform the password management from the domain workstation.\nWhile resting the password this function also unlocked the user account.</p>\n<pre><code>Function Reset-ADUserPassword {\n    Param  ([Parameter(Mandatory = $true, Position = 0,\n            HelpMessage = 'Enter User Name')]\n        [ValidateNotNull()]\n        [string] $Username,\n        [Parameter(Mandatory = $true, Position = 1,\n            HelpMessage = 'Enter Password')]\n        [ValidateNotNull()]\n        [string] $Password\n    )\n    Invoke-Command -ComputerName &lt;ActiveDirectoryServerName&gt; -ArgumentList $Username, $Password  -ScriptBlock { param($Username, $Password) import-module activedirectory; Unlock-ADAccount -Identity $Username ; enable-adaccount $Username ; Set-ADAccountPassword $Username -NewPassword (ConvertTo-SecureString -AsPlainText $Password -Force); get-aduser -identity $Username -Properties * | select-object UserprincipalName }\n    Write-Output &quot;Password Set Successfully for the user: $Username and the password is: $Password &quot;;\n    \n}\n</code></pre>\n<p>Once you run the above function on Powershell use the below command to reset the password.</p>\n<pre><code>Reset-ADUserPassword -Username abc -Password test@123 \n</code></pre>\n"}],"owner":{"account_id":8198157,"reputation":77,"user_id":6170452,"display_name":"Ria C"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":440,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71128705,"answer_count":2,"score":0,"last_activity_date":1660156055,"creation_date":1644935967,"question_id":71128351,"body_markdown":"From code trying to&#160;reset&#160;AD user&#160;password&#160;and using the same&#160;&#160;password&#160;further to login from other&#160;services. But AD is not authenticating the user.&#160;\r\nIn AD we are updating `userPassword`, `holcimIsRegistered` and `userAccountControl` attributes from our code to&#160;reset&#160;the&#160;password.\r\n\r\nWhen we are manually&#160;resetting&#160;AD user&#160;password&#160;from ADSI (right click on user -&gt; go to&#160;reset&#160;password&#160;→&#160;reset&#160;the&#160;password) then AD is authenticating the user with the new&#160;password. Neither `userPassword` nor `unicodePwd` attributes are getting updated.\r\n\r\nWe tried to update `unicodePwd` attribute from ADSI and code also but it&#39;s not allowing user to update it&#39;s value, from code we have observed\r\n\r\n    [LDAP: error code 53 - 0000001F: SvcErr: DSID-031A12D2, problem 5003 (WILL_NOT_PERFORM)]\r\n\r\nWe compared user details before and&#160;resetting&#160;password&#160;from ADSI and observed that few details are getting \r\nupdated (`BadLogonCount:0`, `badPasswordTime:0`, `badPwdCount:0`, `lastLogoff:0`, `lastLogon:0`, `logonCount:0`, `Modified`, `modifyTimeStamp`, `msDS-User-Account-Control-Computed`, `PasswordExpired:false`, `PasswordLastSet`, `uSNChanged` and `whenChanged`).\r\n\r\nWhen we tried to modify `usnChanged`, `msDS-User-Account-Control-Computed` from ADSI then observed that these two attributes were not editable from ADSI and from code it&#160;was giving `SchemaViolationException`.&#160;For `passwordExpired` and `badLogonCount` attributes , we faced `NoSuchAttributeException` while modifying it from code and from ADSI these two attributes were missing.\r\n\r\nHow else we can make this work?\r\n\r\n","title":"Windows AD unable to reset password from code","body":"<p>From code trying to reset AD user password and using the same  password further to login from other services. But AD is not authenticating the user. \nIn AD we are updating <code>userPassword</code>, <code>holcimIsRegistered</code> and <code>userAccountControl</code> attributes from our code to reset the password.</p>\n<p>When we are manually resetting AD user password from ADSI (right click on user -&gt; go to reset password → reset the password) then AD is authenticating the user with the new password. Neither <code>userPassword</code> nor <code>unicodePwd</code> attributes are getting updated.</p>\n<p>We tried to update <code>unicodePwd</code> attribute from ADSI and code also but it's not allowing user to update it's value, from code we have observed</p>\n<pre><code>[LDAP: error code 53 - 0000001F: SvcErr: DSID-031A12D2, problem 5003 (WILL_NOT_PERFORM)]\n</code></pre>\n<p>We compared user details before and resetting password from ADSI and observed that few details are getting\nupdated (<code>BadLogonCount:0</code>, <code>badPasswordTime:0</code>, <code>badPwdCount:0</code>, <code>lastLogoff:0</code>, <code>lastLogon:0</code>, <code>logonCount:0</code>, <code>Modified</code>, <code>modifyTimeStamp</code>, <code>msDS-User-Account-Control-Computed</code>, <code>PasswordExpired:false</code>, <code>PasswordLastSet</code>, <code>uSNChanged</code> and <code>whenChanged</code>).</p>\n<p>When we tried to modify <code>usnChanged</code>, <code>msDS-User-Account-Control-Computed</code> from ADSI then observed that these two attributes were not editable from ADSI and from code it was giving <code>SchemaViolationException</code>. For <code>passwordExpired</code> and <code>badLogonCount</code> attributes , we faced <code>NoSuchAttributeException</code> while modifying it from code and from ADSI these two attributes were missing.</p>\n<p>How else we can make this work?</p>\n"},{"tags":["java","intellij-idea","sonarqube","checkstyle"],"comments":[{"owner":{"account_id":5219059,"reputation":2638,"user_id":4173063,"accept_rate":92,"display_name":"Srikanth Balaji"},"score":0,"creation_date":1438780251,"post_id":31831321,"comment_id":51588899,"body_markdown":"Thomas, I have Updated the code.","body":"Thomas, I have Updated the code."},{"owner":{"account_id":20086792,"reputation":144,"user_id":14728164,"display_name":"Vishwajit Rahatal"},"score":0,"creation_date":1675744189,"post_id":31831321,"comment_id":132989797,"body_markdown":"A little late for this but for future readers it might be helpful: Auto indenting with Ctrl+Alt+L did the trick for me.","body":"A little late for this but for future readers it might be helpful: Auto indenting with Ctrl+Alt+L did the trick for me."}],"answers":[{"tags":[],"owner":{"account_id":329799,"reputation":3901,"user_id":653519,"display_name":"Trisha"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1438785190,"creation_date":1438785190,"answer_id":31835496,"question_id":31831321,"body_markdown":"Open up preferences (cmd + , on the Mac, ctrl + alt + s on Windows), and go to Editor -&gt; Code Style -&gt; Java. On the tabs and indents spaces you can set the indents to 8.","title":"Check Style Indentation violation - &#39;public&#39; have incorrect indentation level 4, expected level should be 8","body":"<p>Open up preferences (cmd + , on the Mac, ctrl + alt + s on Windows), and go to Editor -> Code Style -> Java. On the tabs and indents spaces you can set the indents to 8.</p>\n"},{"tags":[],"owner":{"account_id":470752,"reputation":61,"user_id":878107,"display_name":"Vinod"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1517924354,"creation_date":1517924354,"answer_id":48644426,"question_id":31831321,"body_markdown":"The error is related to indentation; that is:\r\n\r\nIf U have applied some checkstyle then you may not follow its rule simply click Ctrl + Shift + F (Auto Format). ","title":"Check Style Indentation violation - &#39;public&#39; have incorrect indentation level 4, expected level should be 8","body":"<p>The error is related to indentation; that is:</p>\n\n<p>If U have applied some checkstyle then you may not follow its rule simply click Ctrl + Shift + F (Auto Format). </p>\n"},{"tags":[],"owner":{"account_id":15372843,"reputation":103,"user_id":15431883,"display_name":"polyackov_ot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660155387,"creation_date":1660155027,"answer_id":73310909,"question_id":31831321,"body_markdown":"You can add your check-style.xml here. After this you can use macOS[⌥+⌘+L] or Windows[Ctrl+Alt+L] [Reformat code][1] [![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/reformat-and-rearrange-code.html#reformat_code\r\n  [2]: https://i.stack.imgur.com/t4yyQ.png","title":"Check Style Indentation violation - &#39;public&#39; have incorrect indentation level 4, expected level should be 8","body":"<p>You can add your check-style.xml here. After this you can use macOS[⌥+⌘+L] or Windows[Ctrl+Alt+L] <a href=\"https://www.jetbrains.com/help/idea/reformat-and-rearrange-code.html#reformat_code\" rel=\"nofollow noreferrer\">Reformat code</a> <a href=\"https://i.stack.imgur.com/t4yyQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t4yyQ.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":5219059,"reputation":2638,"user_id":4173063,"accept_rate":92,"display_name":"Srikanth Balaji"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70186,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":31835496,"answer_count":3,"score":7,"last_activity_date":1660155387,"creation_date":1438774284,"question_id":31831321,"body_markdown":"I am getting an checkstyle sonar violation on indendation rule (com.puppycrawl.tools.checkstyle.checks.indentation)\r\n\r\n&#39;public&#39; have incorrect indentation level 4, expected level should be 8.\r\n\r\nat this line\r\n\r\n        public Response getItem(@PathParam(CODE) final ProgramCode programCode,\r\n\r\nIn Intelliji, Kindly suggest on how to change the indentation level to 8","title":"Check Style Indentation violation - &#39;public&#39; have incorrect indentation level 4, expected level should be 8","body":"<p>I am getting an checkstyle sonar violation on indendation rule (com.puppycrawl.tools.checkstyle.checks.indentation)</p>\n\n<p>'public' have incorrect indentation level 4, expected level should be 8.</p>\n\n<p>at this line</p>\n\n<pre><code>    public Response getItem(@PathParam(CODE) final ProgramCode programCode,\n</code></pre>\n\n<p>In Intelliji, Kindly suggest on how to change the indentation level to 8</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1660144324,"post_id":73308646,"comment_id":129464611,"body_markdown":"`String.join(&quot;-&quot;, date.getYear(), date.getMonth(), date.getDay().length() &gt; 0 ? date.getDay() : &quot;c&quot;)`?","body":"<code>String.join(&quot;-&quot;, date.getYear(), date.getMonth(), date.getDay().length() &gt; 0 ? date.getDay() : &quot;c&quot;)</code>?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":3,"creation_date":1660144395,"post_id":73308646,"comment_id":129464644,"body_markdown":"`the date value can be empty, so I would get &quot;2000-03-&quot;` - What do you mean by saying *&quot;date value can be empty&quot;*? What is the type of `date`?","body":"<code>the date value can be empty, so I would get &quot;2000-03-&quot;</code> - What do you mean by saying <i>&quot;date value can be empty&quot;</i>? What is the type of <code>date</code>?"},{"owner":{"account_id":23359173,"reputation":13,"user_id":17431701,"display_name":"iRaven"},"score":0,"creation_date":1660144496,"post_id":73308646,"comment_id":129464693,"body_markdown":"Date is a Object with three String - Year, Month and Date. On all of this three values, the user can pass them as null or empty. So in this case, I would like to replace them if a a specific char.","body":"Date is a Object with three String - Year, Month and Date. On all of this three values, the user can pass them as null or empty. So in this case, I would like to replace them if a a specific char."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1660144707,"post_id":73308646,"comment_id":129464781,"body_markdown":"@iRaven Why do you need to reinvent the wheel? You can use classes from the `java.time` package, like [`LocalDate`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html).","body":"@iRaven Why do you need to reinvent the wheel? You can use classes from the <code>java.time</code> package, like <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>LocalDate</code></a>."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660145239,"creation_date":1660144630,"answer_id":73308790,"question_id":73308646,"body_markdown":"You could probably use a [Conditional Operator](https://docs.oracle.com/javase/specs/jls/se18/html/jls-6.html#jls-6.3.1.4) aka, the `ternary (?:) operator` where `(a ? b : c)` says *`if a is true, evaluate b, else evaluate c`*. and do it like this.\r\n```\r\nString.join(&quot;-&quot;, date.getYear(), date.getMonth(), \r\n     date.getDay().isEmpty() ? &quot;c&quot; : date.getDay());\r\n```\r\n\r\nHere&#39;s an example using a `record` as a simple Date class.\r\n```\r\nrecord Date(String getYear, String getMonth, String getDay) {\r\n\r\nDate date1 = new Date(&quot;2002&quot;, &quot;10&quot;, &quot;30&quot;);\r\nDate date2 = new Date(&quot;2002&quot;, &quot;10&quot;, &quot;&quot;);\r\n\r\nSystem.out.println(String.join(&quot;-&quot;, date1.getYear(),\r\n\t\tdate1.getMonth(),\r\n\t\tdate1.getDay().isEmpty() ? &quot;c&quot; : date1.getDay()));\r\n\r\nSystem.out.println(String.join(&quot;-&quot;, date2.getYear(),\r\n\t\tdate2.getMonth(),\r\n\t\tdate2.getDay().isEmpty() ? &quot;c&quot; : date2.getDay()));\r\n```\r\nprints\r\n```\r\n2002-10-30\r\n2002-10-c\r\n```\r\nBut you may want to provide more information including your use case as more constructive help could result.  And make certain you aren&#39;t using the old `Date` class but those classes in the [java.time](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/package-summary.html) package.","title":"Adding a char after a certain value and condition of string Java","body":"<p>You could probably use a <a href=\"https://docs.oracle.com/javase/specs/jls/se18/html/jls-6.html#jls-6.3.1.4\" rel=\"nofollow noreferrer\">Conditional Operator</a> aka, the <code>ternary (?:) operator</code> where <code>(a ? b : c)</code> says <em><code>if a is true, evaluate b, else evaluate c</code></em>. and do it like this.</p>\n<pre><code>String.join(&quot;-&quot;, date.getYear(), date.getMonth(), \n     date.getDay().isEmpty() ? &quot;c&quot; : date.getDay());\n</code></pre>\n<p>Here's an example using a <code>record</code> as a simple Date class.</p>\n<pre><code>record Date(String getYear, String getMonth, String getDay) {\n\nDate date1 = new Date(&quot;2002&quot;, &quot;10&quot;, &quot;30&quot;);\nDate date2 = new Date(&quot;2002&quot;, &quot;10&quot;, &quot;&quot;);\n\nSystem.out.println(String.join(&quot;-&quot;, date1.getYear(),\n        date1.getMonth(),\n        date1.getDay().isEmpty() ? &quot;c&quot; : date1.getDay()));\n\nSystem.out.println(String.join(&quot;-&quot;, date2.getYear(),\n        date2.getMonth(),\n        date2.getDay().isEmpty() ? &quot;c&quot; : date2.getDay()));\n</code></pre>\n<p>prints</p>\n<pre><code>2002-10-30\n2002-10-c\n</code></pre>\n<p>But you may want to provide more information including your use case as more constructive help could result.  And make certain you aren't using the old <code>Date</code> class but those classes in the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> package.</p>\n"},{"tags":[],"owner":{"account_id":20155156,"reputation":11,"user_id":14781566,"display_name":"Ecalipso"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660147984,"creation_date":1660147984,"answer_id":73309544,"question_id":73308646,"body_markdown":"In addition to WJS comment, \r\nI would have put everything in a String.format in order to make things clearer and more readable.\r\n\r\n    String.format(&quot;%s-%s-%s&quot;, date1.getYear(), date1.getMonth(), date1.getDay().isEmpty() ? &quot;c&quot; : date1.getDay());","title":"Adding a char after a certain value and condition of string Java","body":"<p>In addition to WJS comment,\nI would have put everything in a String.format in order to make things clearer and more readable.</p>\n<pre><code>String.format(&quot;%s-%s-%s&quot;, date1.getYear(), date1.getMonth(), date1.getDay().isEmpty() ? &quot;c&quot; : date1.getDay());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26030308,"reputation":1,"user_id":19736634,"display_name":"Đinh Thanh H&#224;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660148596,"creation_date":1660148596,"answer_id":73309675,"question_id":73308646,"body_markdown":"You can use SimpleDateFormat as below:\r\n\r\n    String sDate =&quot;2020-08-&quot;;  \r\n    Date date = null;\r\n\ttry {\r\n\t\tdate = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).parse(sDate);\r\n\t} catch (ParseException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\tsDate = sDate + &quot;c&quot;;\r\n\t}  \r\n    System.out.println(&quot;sDate= &quot; +&quot;\\t&quot;+ sDate);\r\n\r\nOutput: sDate= \t2020-08-c\r\n","title":"Adding a char after a certain value and condition of string Java","body":"<p>You can use SimpleDateFormat as below:</p>\n<pre><code>String sDate =&quot;2020-08-&quot;;  \nDate date = null;\ntry {\n    date = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).parse(sDate);\n} catch (ParseException e) {\n    // TODO Auto-generated catch block\n    sDate = sDate + &quot;c&quot;;\n}  \nSystem.out.println(&quot;sDate= &quot; +&quot;\\t&quot;+ sDate);\n</code></pre>\n<p>Output: sDate=  2020-08-c</p>\n"}],"owner":{"account_id":23359173,"reputation":13,"user_id":17431701,"display_name":"iRaven"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73308790,"answer_count":3,"score":1,"last_activity_date":1660154604,"creation_date":1660144058,"question_id":73308646,"body_markdown":"I have this pattern of date: 2000-03-05 represented by YYYY-MM-dd\r\n\r\nThe problem is, the date value can be empty, so I would get &quot;2000-03-&quot;.\r\n\r\nI was trying to override this behavior by using replace all, to replace the null value, but as I get the value in String, there is no null or empty value.\r\n\r\n```\r\nString.join(&quot;-&quot;, date.getYear(), date.getMonth(), date.getDay()).replaceAll(&quot; &quot;, &quot;c&quot;)\r\n```\r\n\r\nHow should this be done?\r\n\r\nThanks!","title":"Adding a char after a certain value and condition of string Java","body":"<p>I have this pattern of date: 2000-03-05 represented by YYYY-MM-dd</p>\n<p>The problem is, the date value can be empty, so I would get &quot;2000-03-&quot;.</p>\n<p>I was trying to override this behavior by using replace all, to replace the null value, but as I get the value in String, there is no null or empty value.</p>\n<pre><code>String.join(&quot;-&quot;, date.getYear(), date.getMonth(), date.getDay()).replaceAll(&quot; &quot;, &quot;c&quot;)\n</code></pre>\n<p>How should this be done?</p>\n<p>Thanks!</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660125593,"creation_date":1660125593,"answer_id":73304274,"question_id":73303168,"body_markdown":"The problem in your code lies in the fact the names of the fields inside the class are different than the ones in the database. In your class, you have a field called `lat`, while in the database is called `placeLat`, and that&#39;s not correct. The field names must be the same. So in your case, the simplest solution would be to change the names of the fields in the class to match the ones in the database.\r\n\r\nAlternatively, you use an annotation in front of the getters like this:\r\n\r\n    @PropertyName(&quot;placeLat&quot;)\r\n    public String getPlaceLat() {\r\n        return lat;\r\n    }","title":"I want to get latitude and longitude from Cloud Firestore database to add markers on map Android Studio","body":"<p>The problem in your code lies in the fact the names of the fields inside the class are different than the ones in the database. In your class, you have a field called <code>lat</code>, while in the database is called <code>placeLat</code>, and that's not correct. The field names must be the same. So in your case, the simplest solution would be to change the names of the fields in the class to match the ones in the database.</p>\n<p>Alternatively, you use an annotation in front of the getters like this:</p>\n<pre><code>@PropertyName(&quot;placeLat&quot;)\npublic String getPlaceLat() {\n    return lat;\n}\n</code></pre>\n"}],"owner":{"account_id":25652696,"reputation":29,"user_id":19419705,"display_name":"Oana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73304274,"answer_count":1,"score":0,"last_activity_date":1660154062,"creation_date":1660120513,"question_id":73303168,"body_markdown":"So I have 3 fields in a Cloud Firestore collection and I want to get these details in order to add markers on my map (make a LatLng from `placeLa`t and `placeLng` and name of marker position from placeName).\r\n\r\n[image here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9zzKk.png\r\n\r\nI also have a file that have get and set methods for the fields.\r\n\r\n    public class ListPlacesModel implements Serializable {\r\n\r\n    String name;\r\n    double lat;\r\n    double lng;\r\n    String documentId;\r\n\r\n    public ListPlacesModel() {\r\n    }\r\n\r\n    public ListPlacesModel(String name, double lat, double lng) {\r\n        this.name = name;\r\n        this.lat = lat;\r\n        this.lng = lng;\r\n    }\r\n\r\n    public String getDocumentId() {\r\n        return documentId;\r\n    }\r\n\r\n    public void setDocumentId(String documentId) {\r\n        this.documentId = documentId;\r\n    }\r\n\r\n    public String getPlaceName() {\r\n        return name;\r\n    }\r\n\r\n    public void setPlaceName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public double getPlaceLat() {\r\n        return lat;\r\n    }\r\n\r\n    public void setPlaceLat(double lat) {\r\n        this.lat = lat;\r\n    }\r\n\r\n    public double getPlaceLng() {\r\n        return lng;\r\n    }\r\n\r\n    public void setPlaceLng(double lng) {\r\n        this.lng = lng;\r\n    }\r\n\r\nI tried to do this in onMapReady method of my MapActivity, but I can&#39;t figure out why it doesn&#39;t show anything. It didn&#39;t put any marker and didn&#39;t show any error either.\r\n\r\n    ListPlacesModel model = new ListPlacesModel();\r\n\r\n        db.collection(&quot;AddPlaces&quot;)\r\n                .get()\r\n                .addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n                        if (task.isSuccessful()) {\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                LatLng place = new LatLng(model.getPlaceLat(), model.getPlaceLng());\r\n                                gMap.addMarker(new MarkerOptions().position(place));\r\n                            }\r\n                            \r\n                        } else {\r\n                            Log.w(&quot;EROARE&quot;, &quot;Error getting documents.&quot;, task.getException());\r\n                        }\r\n                    }\r\n                });\r\n\r\nAny ideas why this didn&#39;t work or how I can do what I&#39;m trying to do?","title":"I want to get latitude and longitude from Cloud Firestore database to add markers on map Android Studio","body":"<p>So I have 3 fields in a Cloud Firestore collection and I want to get these details in order to add markers on my map (make a LatLng from <code>placeLa</code>t and <code>placeLng</code> and name of marker position from placeName).</p>\n<p><a href=\"https://i.stack.imgur.com/9zzKk.png\" rel=\"nofollow noreferrer\">image here</a></p>\n<p>I also have a file that have get and set methods for the fields.</p>\n<pre><code>public class ListPlacesModel implements Serializable {\n\nString name;\ndouble lat;\ndouble lng;\nString documentId;\n\npublic ListPlacesModel() {\n}\n\npublic ListPlacesModel(String name, double lat, double lng) {\n    this.name = name;\n    this.lat = lat;\n    this.lng = lng;\n}\n\npublic String getDocumentId() {\n    return documentId;\n}\n\npublic void setDocumentId(String documentId) {\n    this.documentId = documentId;\n}\n\npublic String getPlaceName() {\n    return name;\n}\n\npublic void setPlaceName(String name) {\n    this.name = name;\n}\n\npublic double getPlaceLat() {\n    return lat;\n}\n\npublic void setPlaceLat(double lat) {\n    this.lat = lat;\n}\n\npublic double getPlaceLng() {\n    return lng;\n}\n\npublic void setPlaceLng(double lng) {\n    this.lng = lng;\n}\n</code></pre>\n<p>I tried to do this in onMapReady method of my MapActivity, but I can't figure out why it doesn't show anything. It didn't put any marker and didn't show any error either.</p>\n<pre><code>ListPlacesModel model = new ListPlacesModel();\n\n    db.collection(&quot;AddPlaces&quot;)\n            .get()\n            .addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n                @Override\n                public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n                    if (task.isSuccessful()) {\n                        for (QueryDocumentSnapshot document : task.getResult()) {\n                            LatLng place = new LatLng(model.getPlaceLat(), model.getPlaceLng());\n                            gMap.addMarker(new MarkerOptions().position(place));\n                        }\n                        \n                    } else {\n                        Log.w(&quot;EROARE&quot;, &quot;Error getting documents.&quot;, task.getException());\n                    }\n                }\n            });\n</code></pre>\n<p>Any ideas why this didn't work or how I can do what I'm trying to do?</p>\n"},{"tags":["java","netbeans-platform","netbeans-14"],"answers":[{"tags":[],"owner":{"account_id":9026259,"reputation":1316,"user_id":6725459,"display_name":"jjazzboss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660153590,"creation_date":1660153590,"answer_id":73310634,"question_id":73296503,"body_markdown":"It&#39;s simpler than that. \r\n\r\nIn order to be able to debug your application, including when it runs the Netbeans platform code, just download `netbeans-14-source.zip` from the Apache Netbeans 14 download page, then go to menu `Tools/Netbeans platform`, and add the .zip file in the `source` tab.\r\n\r\nNow if you add a breakpoint in your application code when it calls a Netbeans platform code, you&#39;ll be able to step inside the Netbeans code as well and debug it.\r\n\r\nTo add a breakpoint from a specific Netbeans platform file (ReadWriteUtils.java in your case): menu `open File`, select the netbeans-14-source.zip then your file, and add the breakpoint.\r\n\r\nAlso, Netbeans will automatically retrieve the javadoc from the source files. To see it, menu `Windows/IDE tools/Java doc`\r\n\r\n\r\n\r\n\r\n","title":"Resolve Source file not found for an openide class in Netbeans Platform","body":"<p>It's simpler than that.</p>\n<p>In order to be able to debug your application, including when it runs the Netbeans platform code, just download <code>netbeans-14-source.zip</code> from the Apache Netbeans 14 download page, then go to menu <code>Tools/Netbeans platform</code>, and add the .zip file in the <code>source</code> tab.</p>\n<p>Now if you add a breakpoint in your application code when it calls a Netbeans platform code, you'll be able to step inside the Netbeans code as well and debug it.</p>\n<p>To add a breakpoint from a specific Netbeans platform file (ReadWriteUtils.java in your case): menu <code>open File</code>, select the netbeans-14-source.zip then your file, and add the breakpoint.</p>\n<p>Also, Netbeans will automatically retrieve the javadoc from the source files. To see it, menu <code>Windows/IDE tools/Java doc</code></p>\n"}],"owner":{"account_id":7577131,"reputation":127,"user_id":5749128,"display_name":"AlexHomeBrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660153590,"creation_date":1660069403,"question_id":73296503,"body_markdown":"I have a large legacy application written in Java 15 with Swing and JavaFX using the Netbeans 14 Platform. So when the application starts, it looks like Netbeans IDE and has the IDE menu items, for this question, the File -&gt; Open File...\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWe are transitioning to files an order of magnitude bigger than in the past (over 1G of text) so it throws an exception (not surprisingly) when loading that file. It looks like the exception happens when Netbeans (openide) tries to load the file into a text pane. I haven&#39;t decided how to resolve this, but for now, I would like to just display a statistics panel. Here is the exception:\r\n\r\n    INFO [org.openide.text.DataEditorSupport]: UIHANDLER_TOO_BIG_FILE_LOADED\r\n    SEVERE [org.openide.util.Exceptions]\r\n    java.lang.NegativeArraySizeException: -2147483648\r\n    \tat org.netbeans.modules.editor.lib2.document.ReadWriteUtils.read(ReadWriteUtils.java:51)\r\n    \tat org.netbeans.editor.BaseDocument.read(BaseDocument.java:1459)\r\n    \tat org.netbeans.editor.BaseKit.read(BaseKit.java:663)\r\n    \tat org.openide.text.DataEditorSupport.loadFromStreamToKit(DataEditorSupport.java:457)\r\n    \tat org.openide.text.DocumentOpenClose$DocumentLoad.atomicLockedRun(DocumentOpenClose.java:739)\r\n    \tat org.openide.text.DocumentOpenClose$DocumentLoad.run(DocumentOpenClose.java:590)\r\n    \tat org.netbeans.editor.GuardedDocument.runAtomic(GuardedDocument.java:296)\r\n    \tat org.openide.text.NbDocument.runAtomic(NbDocument.java:411)\r\n    \tat org.openide.text.DocumentOpenClose$DocumentLoad.run(DocumentOpenClose.java:630)\r\n    \tat org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1418)\r\n    \tat org.netbeans.modules.openide.util.GlobalLookup.execute(GlobalLookup.java:45)\r\n    \tat org.openide.util.lookup.Lookups.executeWith(Lookups.java:278)\r\n    [catch] at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:2033)\r\n    WARNING [org.netbeans.core.TimableEventQueue]: too much time in AWT thread null\r\n\r\nNote that the whole stack trace is netbeans and openide classes, none of our stuff.\r\n\r\nThe first &quot;at&quot; line is a link, which when clicked, gives the error \r\n\r\n    Source not found for &quot;ReadWriteUtils&quot;\r\n\r\nI have downloaded the source and javadoc jars from https://repository.apache.org/#nexus-search;quick~openide and attempted to tell Netbeans where they are so I can figure out how to interrupt the loading of the file so it doesn&#39;t try to display it all. I have placed the jars into a directory and exploded them into the org tree so I can see the sources. I then went to Tools -&gt; Netbeans Platforms to open up the Netbeans Platform Manager. Under the &quot;Development IDE&quot; platform, I select Sources and click on the &quot;Add ZIP/Folder...&quot; button.  I won&#39;t let me select any of the jars, but when I select the org directory, it add it to the Platform Sources. When I select Javadoc and click the &quot;Add ZIP/Folder...&quot; button, it allows me to select the javadoc jars. \r\n[![enter image description here][2]][2]\r\n\r\n\r\nNote that the some jars have RELEASE140 in their name and some don&#39;t.  I copied one and removed it to see if it may have confused Netbeans.\r\n\r\nNo dice. I suspect that Netbeans has its own version of the class files jars somewhere and so is ignoring my attempts to tell it where the source code is. Is the openide version the Netbeans is using different than RELEASE140? Here is the the top part of the modules list:\r\n\r\n    INFO [org.netbeans.core.startup.NbEvents]: Turning on modules:\r\n    \tslf4j.jdk14 [1.7.28 1.7.28]\r\n    \tslf4j.api [1.7.28 1.7.28]\r\n    \torg.openide.util.lookup [8.49 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.util [9.23 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.util.ui [9.24 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.modules [7.63 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.api.annotations.common/1 [1.43 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.filesystems [9.27 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.awt [7.83 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.api.progress/1 [1.63 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.api.progress.nb [1.63 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.dialogs [7.57 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.nodes [7.60 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.windows [6.92 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.libs.batik.read [1.8.0.1 1 Netbeans/netbeans-TLP/netbeans/release130-20-on-20220221]\r\n    \torg.openide.util.ui.svg [1.9 Netbeans/netbeans-TLP/netbeans/release130-20-on-20220221]\r\n    \torg.netbeans.modules.editor.mimelookup/1 [1.55 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.text [6.83 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.api.scripting [1.12 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.swing.tabcontrol [1.71 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.swing.outline [1.49 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.explorer [6.77 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.actions [6.54 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.modules.queries/1 [1.58 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.api.templates [1.23 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.filesystems.nb [9.25 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.loaders [7.85 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.api.intent [1.17 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.api.io [1.18 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.io [1.64 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.filesystems.compat8 [9.24 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.execution [9.18 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.openide.execution.compat8 [9.17 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.swing.plaf [1.57 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n    \torg.netbeans.modules.keyring [1.39 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\r\n\r\nI also added the jars to C:\\Program Files\\NetBeans-14\\netbeans\\platform\\docs because I found some JUnit jars there. That had no apparent effect.\r\n\r\nI would like to be able to bring up the openide source to put in breakpoints and view what it is doing before it hits the exception. So my question is, how do I view the openide source code in Netbeans?\r\n\r\nOf course the real goal is to replace the processing of the file by ReadWriteUtils with our own and to that end, I have been working through the tutorials at https://netbeans.apache.org//kb/docs/platform.html. So far, none of them are helping me with this.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XX1Jc.png\r\n  [2]: https://i.stack.imgur.com/dsrl9.png","title":"Resolve Source file not found for an openide class in Netbeans Platform","body":"<p>I have a large legacy application written in Java 15 with Swing and JavaFX using the Netbeans 14 Platform. So when the application starts, it looks like Netbeans IDE and has the IDE menu items, for this question, the File -&gt; Open File...</p>\n<p><a href=\"https://i.stack.imgur.com/XX1Jc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XX1Jc.png\" alt=\"enter image description here\" /></a></p>\n<p>We are transitioning to files an order of magnitude bigger than in the past (over 1G of text) so it throws an exception (not surprisingly) when loading that file. It looks like the exception happens when Netbeans (openide) tries to load the file into a text pane. I haven't decided how to resolve this, but for now, I would like to just display a statistics panel. Here is the exception:</p>\n<pre><code>INFO [org.openide.text.DataEditorSupport]: UIHANDLER_TOO_BIG_FILE_LOADED\nSEVERE [org.openide.util.Exceptions]\njava.lang.NegativeArraySizeException: -2147483648\n    at org.netbeans.modules.editor.lib2.document.ReadWriteUtils.read(ReadWriteUtils.java:51)\n    at org.netbeans.editor.BaseDocument.read(BaseDocument.java:1459)\n    at org.netbeans.editor.BaseKit.read(BaseKit.java:663)\n    at org.openide.text.DataEditorSupport.loadFromStreamToKit(DataEditorSupport.java:457)\n    at org.openide.text.DocumentOpenClose$DocumentLoad.atomicLockedRun(DocumentOpenClose.java:739)\n    at org.openide.text.DocumentOpenClose$DocumentLoad.run(DocumentOpenClose.java:590)\n    at org.netbeans.editor.GuardedDocument.runAtomic(GuardedDocument.java:296)\n    at org.openide.text.NbDocument.runAtomic(NbDocument.java:411)\n    at org.openide.text.DocumentOpenClose$DocumentLoad.run(DocumentOpenClose.java:630)\n    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1418)\n    at org.netbeans.modules.openide.util.GlobalLookup.execute(GlobalLookup.java:45)\n    at org.openide.util.lookup.Lookups.executeWith(Lookups.java:278)\n[catch] at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:2033)\nWARNING [org.netbeans.core.TimableEventQueue]: too much time in AWT thread null\n</code></pre>\n<p>Note that the whole stack trace is netbeans and openide classes, none of our stuff.</p>\n<p>The first &quot;at&quot; line is a link, which when clicked, gives the error</p>\n<pre><code>Source not found for &quot;ReadWriteUtils&quot;\n</code></pre>\n<p>I have downloaded the source and javadoc jars from <a href=\"https://repository.apache.org/#nexus-search;quick%7Eopenide\" rel=\"nofollow noreferrer\">https://repository.apache.org/#nexus-search;quick~openide</a> and attempted to tell Netbeans where they are so I can figure out how to interrupt the loading of the file so it doesn't try to display it all. I have placed the jars into a directory and exploded them into the org tree so I can see the sources. I then went to Tools -&gt; Netbeans Platforms to open up the Netbeans Platform Manager. Under the &quot;Development IDE&quot; platform, I select Sources and click on the &quot;Add ZIP/Folder...&quot; button.  I won't let me select any of the jars, but when I select the org directory, it add it to the Platform Sources. When I select Javadoc and click the &quot;Add ZIP/Folder...&quot; button, it allows me to select the javadoc jars.\n<a href=\"https://i.stack.imgur.com/dsrl9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dsrl9.png\" alt=\"enter image description here\" /></a></p>\n<p>Note that the some jars have RELEASE140 in their name and some don't.  I copied one and removed it to see if it may have confused Netbeans.</p>\n<p>No dice. I suspect that Netbeans has its own version of the class files jars somewhere and so is ignoring my attempts to tell it where the source code is. Is the openide version the Netbeans is using different than RELEASE140? Here is the the top part of the modules list:</p>\n<pre><code>INFO [org.netbeans.core.startup.NbEvents]: Turning on modules:\n    slf4j.jdk14 [1.7.28 1.7.28]\n    slf4j.api [1.7.28 1.7.28]\n    org.openide.util.lookup [8.49 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.util [9.23 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.util.ui [9.24 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.modules [7.63 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.api.annotations.common/1 [1.43 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.filesystems [9.27 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.awt [7.83 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.api.progress/1 [1.63 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.api.progress.nb [1.63 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.dialogs [7.57 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.nodes [7.60 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.windows [6.92 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.libs.batik.read [1.8.0.1 1 Netbeans/netbeans-TLP/netbeans/release130-20-on-20220221]\n    org.openide.util.ui.svg [1.9 Netbeans/netbeans-TLP/netbeans/release130-20-on-20220221]\n    org.netbeans.modules.editor.mimelookup/1 [1.55 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.text [6.83 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.api.scripting [1.12 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.swing.tabcontrol [1.71 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.swing.outline [1.49 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.explorer [6.77 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.actions [6.54 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.modules.queries/1 [1.58 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.api.templates [1.23 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.filesystems.nb [9.25 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.loaders [7.85 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.api.intent [1.17 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.api.io [1.18 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.io [1.64 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.filesystems.compat8 [9.24 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.execution [9.18 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.openide.execution.compat8 [9.17 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.swing.plaf [1.57 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n    org.netbeans.modules.keyring [1.39 13-00d6d969bf4d9b14e7406c9ee9cc13a61dc39655]\n</code></pre>\n<p>I also added the jars to C:\\Program Files\\NetBeans-14\\netbeans\\platform\\docs because I found some JUnit jars there. That had no apparent effect.</p>\n<p>I would like to be able to bring up the openide source to put in breakpoints and view what it is doing before it hits the exception. So my question is, how do I view the openide source code in Netbeans?</p>\n<p>Of course the real goal is to replace the processing of the file by ReadWriteUtils with our own and to that end, I have been working through the tutorials at <a href=\"https://netbeans.apache.org//kb/docs/platform.html\" rel=\"nofollow noreferrer\">https://netbeans.apache.org//kb/docs/platform.html</a>. So far, none of them are helping me with this.</p>\n"},{"tags":["java","spring-boot","unit-testing","groovy","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":15988209,"reputation":150,"user_id":11538031,"display_name":"Емилиян Йорданов"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660111648,"creation_date":1660111648,"answer_id":73301393,"question_id":73300320,"body_markdown":"Interface @Validated should work - https://github.com/spring-projects/spring-boot/issues/17000 . Most probably your controller return BadRequest. Please keep in mind that RestControllers throw a `MethodArgumentNotValidException` not `ConstraintViolationException`.\r\n\r\nI&#39;m not sure what exactly happened on your case, because response/stacktrace is missing, but my advice here is to debug it.\r\n\r\nEasies way for this is to add an `Advicer` and see the exception which is coming:\r\n\r\n    @ControllerAdvice\r\n    public class MyAdvicer\r\n\r\n\r\n    @ExceptionHandler(value = Exception.class)\r\n    public ResponseEntity&lt;Object&gt; handleException(Exception exception) {\r\n        return debug it here!!!\r\n    }","title":"how to perform the bean validation through groovy unit test","body":"<p>Interface @Validated should work - <a href=\"https://github.com/spring-projects/spring-boot/issues/17000\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/17000</a> . Most probably your controller return BadRequest. Please keep in mind that RestControllers throw a <code>MethodArgumentNotValidException</code> not <code>ConstraintViolationException</code>.</p>\n<p>I'm not sure what exactly happened on your case, because response/stacktrace is missing, but my advice here is to debug it.</p>\n<p>Easies way for this is to add an <code>Advicer</code> and see the exception which is coming:</p>\n<pre><code>@ControllerAdvice\npublic class MyAdvicer\n\n\n@ExceptionHandler(value = Exception.class)\npublic ResponseEntity&lt;Object&gt; handleException(Exception exception) {\n    return debug it here!!!\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":926701,"reputation":1165,"user_id":957359,"accept_rate":47,"display_name":"jcrshankar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660153526,"creation_date":1660153526,"answer_id":73310620,"question_id":73300320,"body_markdown":"    ReservationManagement object = new ReservationManagement();\r\n    Method method = ReservationManagement.class\r\n      .getMethod(&quot;createReservation&quot;, LocalDate.class, int.class, Customer.class);\r\n    Object[] parameterValues = { LocalDate.now(), 0, null };\r\n    Set&lt;ConstraintViolation&lt;ReservationManagement&gt;&gt; violations \r\n      = executableValidator.validateParameters(object, method, parameterValues);\r\n\r\nhttps://www.baeldung.com/javax-validation-method-constraints#3-programmatic-validation","title":"how to perform the bean validation through groovy unit test","body":"<pre><code>ReservationManagement object = new ReservationManagement();\nMethod method = ReservationManagement.class\n  .getMethod(&quot;createReservation&quot;, LocalDate.class, int.class, Customer.class);\nObject[] parameterValues = { LocalDate.now(), 0, null };\nSet&lt;ConstraintViolation&lt;ReservationManagement&gt;&gt; violations \n  = executableValidator.validateParameters(object, method, parameterValues);\n</code></pre>\n<p><a href=\"https://www.baeldung.com/javax-validation-method-constraints#3-programmatic-validation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/javax-validation-method-constraints#3-programmatic-validation</a></p>\n"}],"owner":{"account_id":926701,"reputation":1165,"user_id":957359,"accept_rate":47,"display_name":"jcrshankar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660153526,"creation_date":1660102292,"question_id":73300320,"body_markdown":"I am trying to perform some parameters validations on the interface which is implements by the controller class.\r\n\r\n**interface (generated using swagger)** \r\n \r\n\r\n    @Validated\r\n    @Tag(name = &quot;PersonService&quot;, description = &quot;the person API&quot;)\r\n    public interface PersonServiceApi {\r\n\r\n     @RequestMapping(\r\n        method = RequestMethod.GET,\r\n        value = &quot;/person&quot;,\r\n        produces = { &quot;application/json&quot; }\r\n    )\r\n    Mono&lt;ResponseEntity&lt;Person&gt;&gt; searchPerson(\r\n        @NotNull @Pattern(regexp = &quot;[A-Za-z0-9-]+&quot;) @Size(min = 1, max = 30) @Parameter(name = &quot;name&quot;, required = true) @Valid @RequestParam(value = &quot;name&quot;, required = true) String name,\r\n        @Pattern(regexp = &quot;^[A-Za-z0-9]+&quot;) @Size(min = 0, max = 9) @Parameter(name = &quot;id&quot;) @Valid @RequestParam(value = &quot;id&quot;, required = false) String id,\r\n        @Min(0) @Parameter(name = &quot;offset&quot;) @Valid @RequestParam(value = &quot;offset&quot;, required = false, defaultValue = &quot;0&quot;) Integer offset,\r\n        @Min(1) @Max(30) @Parameter(name = &quot;limit&quot;) @Valid @RequestParam(value = &quot;limit&quot;, required = false, defaultValue = &quot;30&quot;) Integer limit,\r\n        @Parameter(hidden = true) final ServerWebExchange exchange\r\n    );\r\n}\r\n\r\n**Implementation controller:**   \r\n\r\n     @RestController\r\n    \r\n\r\n    @Slf4j\r\n    public class PesrsonController implements PersonServiceApi {\r\n    @Override\r\n        public Mono&lt;ResponseEntity&lt;Person&gt;&gt; searchPerson(String name, String id, Integer offset, Integer limit,\r\n                                                                         ServerWebExchange exchange) {\r\n            return this.personService.searchperson(name, id, offset, limit)\r\n                    .subscribeOn(Schedulers.boundedElastic())\r\n                    .map(ResponseEntity::ok)\r\n                    .switchIfEmpty(Mono.just(ResponseEntity.noContent().build()));\r\n        }\r\n    }\r\n    \r\n    \r\n**Groovy test:**  \r\n    \r\n    \r\n   \r\n\r\n      @Unroll\r\n            def &#39;&quot;test person name with null &quot;&#39;() {\r\n               \r\n                given: &#39;service return person details&#39;\r\n                personService.searchperson(name, id, offset, limit) &gt;&gt; Mono.just(new Person())\r\n                when: &#39;searchpseron by name&#39;\r\n                def response =personControllerTest.searchPerson(name, id, offset, limit).block()\r\n        \r\n                then:\r\n                ConstraintViolationException\r\n        \r\n                where:\r\n        \r\n                name   | id    | offset | limit  |  expectedStatus\r\n                &quot;&quot;     | &quot;750&quot; |   0    |   30   |  HttpStatus.BAD_REQUEST\r\n}\r\n\r\n\r\nI want to validate @NotNull, I am expecting ConstraintViolationException while passing the empty or null for name.\r\n\r\nnot sure am following the Groovy test propery or i should follow something with ValidatorFactory? Please guide me here","title":"how to perform the bean validation through groovy unit test","body":"<p>I am trying to perform some parameters validations on the interface which is implements by the controller class.</p>\n<p><strong>interface (generated using swagger)</strong></p>\n<pre><code>@Validated\n@Tag(name = &quot;PersonService&quot;, description = &quot;the person API&quot;)\npublic interface PersonServiceApi {\n\n @RequestMapping(\n    method = RequestMethod.GET,\n    value = &quot;/person&quot;,\n    produces = { &quot;application/json&quot; }\n)\nMono&lt;ResponseEntity&lt;Person&gt;&gt; searchPerson(\n    @NotNull @Pattern(regexp = &quot;[A-Za-z0-9-]+&quot;) @Size(min = 1, max = 30) @Parameter(name = &quot;name&quot;, required = true) @Valid @RequestParam(value = &quot;name&quot;, required = true) String name,\n    @Pattern(regexp = &quot;^[A-Za-z0-9]+&quot;) @Size(min = 0, max = 9) @Parameter(name = &quot;id&quot;) @Valid @RequestParam(value = &quot;id&quot;, required = false) String id,\n    @Min(0) @Parameter(name = &quot;offset&quot;) @Valid @RequestParam(value = &quot;offset&quot;, required = false, defaultValue = &quot;0&quot;) Integer offset,\n    @Min(1) @Max(30) @Parameter(name = &quot;limit&quot;) @Valid @RequestParam(value = &quot;limit&quot;, required = false, defaultValue = &quot;30&quot;) Integer limit,\n    @Parameter(hidden = true) final ServerWebExchange exchange\n);\n</code></pre>\n<p>}</p>\n<p><strong>Implementation controller:</strong></p>\n<pre><code> @RestController\n\n\n@Slf4j\npublic class PesrsonController implements PersonServiceApi {\n@Override\n    public Mono&lt;ResponseEntity&lt;Person&gt;&gt; searchPerson(String name, String id, Integer offset, Integer limit,\n                                                                     ServerWebExchange exchange) {\n        return this.personService.searchperson(name, id, offset, limit)\n                .subscribeOn(Schedulers.boundedElastic())\n                .map(ResponseEntity::ok)\n                .switchIfEmpty(Mono.just(ResponseEntity.noContent().build()));\n    }\n}\n</code></pre>\n<p><strong>Groovy test:</strong></p>\n<pre><code>  @Unroll\n        def '&quot;test person name with null &quot;'() {\n           \n            given: 'service return person details'\n            personService.searchperson(name, id, offset, limit) &gt;&gt; Mono.just(new Person())\n            when: 'searchpseron by name'\n            def response =personControllerTest.searchPerson(name, id, offset, limit).block()\n    \n            then:\n            ConstraintViolationException\n    \n            where:\n    \n            name   | id    | offset | limit  |  expectedStatus\n            &quot;&quot;     | &quot;750&quot; |   0    |   30   |  HttpStatus.BAD_REQUEST\n</code></pre>\n<p>}</p>\n<p>I want to validate @NotNull, I am expecting ConstraintViolationException while passing the empty or null for name.</p>\n<p>not sure am following the Groovy test propery or i should follow something with ValidatorFactory? Please guide me here</p>\n"},{"tags":["java","spring","spring-boot","interface"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660152975,"creation_date":1660152975,"answer_id":73310536,"question_id":73309849,"body_markdown":"Spring can inject all beans that implement an interface. To do so, declare that your component accepts a `List` of that interface type. Using constructor injection, that would look like this (untested pseudo-code):\r\n\r\n```java\r\n@Service\r\npublic class VerificationService {\r\n    private List&lt;Verifier&gt; verifiers;\r\n\r\n    public VerificationService(List&lt;Verifier&gt; verifiers) {\r\n        this.verifiers = verifiers;\r\n    }\r\n\r\n    public void verify(Object object) {\r\n        for (Verifier verifier : verifiers) {\r\n            verifier.verify(object);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n","title":"How to access all injected variables of a class by using variable type in java with spring boot?","body":"<p>Spring can inject all beans that implement an interface. To do so, declare that your component accepts a <code>List</code> of that interface type. Using constructor injection, that would look like this (untested pseudo-code):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class VerificationService {\n    private List&lt;Verifier&gt; verifiers;\n\n    public VerificationService(List&lt;Verifier&gt; verifiers) {\n        this.verifiers = verifiers;\n    }\n\n    public void verify(Object object) {\n        for (Verifier verifier : verifiers) {\n            verifier.verify(object);\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":18021484,"reputation":109,"user_id":13197379,"display_name":"Sai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73310536,"answer_count":1,"score":0,"last_activity_date":1660152975,"creation_date":1660149403,"question_id":73309849,"body_markdown":"I have a highly specific question. I am using Spring boot with Java. Suppose I have a Verifier interface which has a verify method. Suppose I have 3 concrete implementations of this say VerifierA, VerifierB, VerifierC. If I have a VerificationService class where these 3 verifiers are being injected, Is there any way by which I can access all these verifiers inside a method of VerificationService class? \r\nThe code is as given below\r\n\r\n```\r\npublic Interface Verifier {\r\n   public void verify(Obj obj);\r\n}\r\n\r\n@Component\r\npublic class VerifierA implements Verifier{\r\n    @Override public void verify(Obj obj) { \r\n     // do somethingA\r\n    }\r\n}\r\n\r\n\r\n@Component\r\npublic class VerifierB implements Verifier{\r\n    @Override public void verify(Obj obj) { \r\n     // do somethingB\r\n    }\r\n}\r\n\r\n\r\n@Component\r\npublic class VerifierC implements Verifier{\r\n    @Override public void verify(Obj obj) { \r\n     // do somethingC\r\n    }\r\n}\r\n@Service\r\npublic VerificationService() {\r\n\r\n    @Autowired private final Verifier verifierA;\r\n\r\n    @Autowired private final Verifier verifierB;\r\n\r\n    @Autowired private final Verifier verifierC;\r\n\r\n    public void test(Obj obj) {\r\n        //here I want to call verify method of all the 3 verifiers without explicitly calling all verifiers by variable names\r\n\r\n       //i want to do something like following\r\n      for(Verifier verifier: listOfInjectedVerifiers) {\r\n          verifier.verify(obj);\r\n      }\r\n      // the above is not working code. This is the behaviour I want\r\n   }\r\n\r\n}\r\n```\r\n\r\nIs there any way to do this? Thanks in advance","title":"How to access all injected variables of a class by using variable type in java with spring boot?","body":"<p>I have a highly specific question. I am using Spring boot with Java. Suppose I have a Verifier interface which has a verify method. Suppose I have 3 concrete implementations of this say VerifierA, VerifierB, VerifierC. If I have a VerificationService class where these 3 verifiers are being injected, Is there any way by which I can access all these verifiers inside a method of VerificationService class?\nThe code is as given below</p>\n<pre><code>public Interface Verifier {\n   public void verify(Obj obj);\n}\n\n@Component\npublic class VerifierA implements Verifier{\n    @Override public void verify(Obj obj) { \n     // do somethingA\n    }\n}\n\n\n@Component\npublic class VerifierB implements Verifier{\n    @Override public void verify(Obj obj) { \n     // do somethingB\n    }\n}\n\n\n@Component\npublic class VerifierC implements Verifier{\n    @Override public void verify(Obj obj) { \n     // do somethingC\n    }\n}\n@Service\npublic VerificationService() {\n\n    @Autowired private final Verifier verifierA;\n\n    @Autowired private final Verifier verifierB;\n\n    @Autowired private final Verifier verifierC;\n\n    public void test(Obj obj) {\n        //here I want to call verify method of all the 3 verifiers without explicitly calling all verifiers by variable names\n\n       //i want to do something like following\n      for(Verifier verifier: listOfInjectedVerifiers) {\n          verifier.verify(obj);\n      }\n      // the above is not working code. This is the behaviour I want\n   }\n\n}\n</code></pre>\n<p>Is there any way to do this? Thanks in advance</p>\n"},{"tags":["java","lwjgl"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1659984299,"post_id":73282649,"comment_id":129420686,"body_markdown":"One is a class name, and refers to a whole group of methods.  The other is a single method name, and likely refers either to a static import or an instance method.","body":"One is a class name, and refers to a whole group of methods.  The other is a single method name, and likely refers either to a static import or an instance method."},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":1,"creation_date":1659984798,"post_id":73282649,"comment_id":129420843,"body_markdown":"Which is the same naming convention you will see commonly used for much of the family of curly-brace languages, including Java.","body":"Which is the same naming convention you will see commonly used for much of the family of curly-brace languages, including Java."}],"owner":{"account_id":19950914,"reputation":17,"user_id":14620587,"display_name":"Leon Lavoie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660151971,"creation_date":1659984209,"question_id":73282649,"body_markdown":"Why do some LWJGL project&#39;s methods are in `GLx.methodName` format (x being a number) while others simply call methods as `glMethodName`?\r\nIs it simply a different version or is it some additional API that is causing these changes?\r\nAnd most importantly, what are the differences inbetween the two?","title":"LWJGL - Why does some code exemples use GLX methods and other glX","body":"<p>Why do some LWJGL project's methods are in <code>GLx.methodName</code> format (x being a number) while others simply call methods as <code>glMethodName</code>?\nIs it simply a different version or is it some additional API that is causing these changes?\nAnd most importantly, what are the differences inbetween the two?</p>\n"},{"tags":["java","multithreading","java-8","nio","rhel"],"comments":[{"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"score":1,"creation_date":1660205318,"post_id":73310224,"comment_id":129479222,"body_markdown":"How many threads are waiting on `buffList`? I&#39;m not sure, but if there are thousands of them, it might take some time to wake them all","body":"How many threads are waiting on <code>buffList</code>? I&#39;m not sure, but if there are thousands of them, it might take some time to wake them all"},{"owner":{"account_id":16252363,"reputation":91,"user_id":11735962,"display_name":"Pavlos Maragkos"},"score":0,"creation_date":1660213648,"post_id":73310224,"comment_id":129482123,"body_markdown":"Just 1 thread but it doesn&#39;t look like spinning is occurring in the waiting thread (looking at the various collected thread dumps). It is occurring in the thread calling notifyAll","body":"Just 1 thread but it doesn&#39;t look like spinning is occurring in the waiting thread (looking at the various collected thread dumps). It is occurring in the thread calling notifyAll"},{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":0,"creation_date":1660998728,"post_id":73310224,"comment_id":129668916,"body_markdown":"Is each pipeline `bufflist` an independent instance/object, or is there a buffList object shared between many pipelines ?","body":"Is each pipeline <code>bufflist</code> an independent instance/object, or is there a buffList object shared between many pipelines ?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1661175027,"post_id":73310224,"comment_id":129702349,"body_markdown":"When I see `LinkedList` and something about “Java heap being nearly full” in a problem description, I’d assume that `notifyAll()` is just a red herring. A large `LinkedList` alone can cause performance and memory problems and the `notifyAll()` call is just the point where the garbage collection occupies the thread. See [this answer](https://stackoverflow.com/a/49819738/2711488) for an example which intentionally stresses the garbage collector and well, it resorts to `LinkedList` for that.","body":"When I see <code>LinkedList</code> and something about “Java heap being nearly full” in a problem description, I’d assume that <code>notifyAll()</code> is just a red herring. A large <code>LinkedList</code> alone can cause performance and memory problems and the <code>notifyAll()</code> call is just the point where the garbage collection occupies the thread. See <a href=\"https://stackoverflow.com/a/49819738/2711488\">this answer</a> for an example which intentionally stresses the garbage collector and well, it resorts to <code>LinkedList</code> for that."}],"owner":{"account_id":16252363,"reputation":91,"user_id":11735962,"display_name":"Pavlos Maragkos"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":0,"score":2,"last_activity_date":1660151298,"creation_date":1660151298,"question_id":73310224,"body_markdown":"We have a large enterprise telecom application running over OpenJDK8 (25.171-b10) on RHEL6.10.\r\n\r\nWe observe a very strange issue that occurs randomly in production servers.\r\n\r\nThe process starts consuming high CPU and eventually we enter memory congestion due to Java heap being nearly full.\r\n\r\nAfter Analyzing the Java process using thread dumps, we noticed that a thread is blocked inside Java “notifyAll” method. The thread remains blocked inside this method for very long time, and the process consumes high CPU while the thread remains blocked inside this method.\r\n\r\nBelow is the stack trace for the thread that remains blocked -\r\n\r\n    &quot;pool-5-thread-1&quot; #432 prio=5 os_prio=0 tid=0x00007f7c85a57000 nid=0x37fe runnable [0x00007f7c3cba0000]\r\n       java.lang.Thread.State: RUNNABLE\r\n           at java.lang.Object.notifyAll(Native Method)\r\n           at gov.nist.javax.sip.parser.Pipeline.close(Pipeline.java:165)\r\n           - locked &lt;0x00000005c16007b8&gt; (a java.util.LinkedList)\r\n           at gov.nist.javax.sip.stack.NioTcpMessageChannel.close(NioTcpMessageChannel.java:258)\r\n           at gov.nist.javax.sip.stack.ConnectionOrientedMessageChannel.close(ConnectionOrientedMessageChannel.java:203)\r\n           at gov.nist.javax.sip.stack.SocketTimeoutAuditor.runTask(SocketTimeoutAuditor.java:74)\r\n\r\nThe thread remains stuck inside “notifyAll()” for several minutes while consuming high CPU.\r\n\r\nTo provide more information on the Java wait/notify mechanism being used:\r\n\r\nWe have a class “Pipeline” which has a private member “buffList” which is of type LinkedList.\r\n\r\nAn instance of Pipeline starts a thread which is synchronized on “buffList” and calls ‘this.buffList.wait()’.\r\n\r\n    public int read() throws IOException {\r\n    \r\n        synchronized (this.buffList) {\r\n    \r\n           ...\r\n    \r\n           this.buffList.wait();\r\n    \r\n           ...\r\n    \r\n    }\r\n\r\nWhen the Pipeline instance has some data or needs to be closed, another independent thread would call notifyAll(). Example snippet shows close():\r\n\r\n    public void close() throws IOException {\r\n    \r\n            ...\r\n    \r\n            synchronized (this.buffList) {\r\n    \r\n                this.buffList.notifyAll();\r\n    \r\n            }\r\n    \r\n    }\r\n\r\nNormally, this works fine but for some reason, (that currently we neither can understand, neither can replicate), the call to ‘notifyAll()’ above not only blocks for several minutes but also causes high CPU usage.\r\n\r\nSince we tried with multiple ways to replicate the issue but currently appears only in production does anyone faced similar issue? Any idea on how we can troubleshoot/find the root cause of this behavior? ","title":"Java Object.notifyAll() blocks for long time while consuming high CPU","body":"<p>We have a large enterprise telecom application running over OpenJDK8 (25.171-b10) on RHEL6.10.</p>\n<p>We observe a very strange issue that occurs randomly in production servers.</p>\n<p>The process starts consuming high CPU and eventually we enter memory congestion due to Java heap being nearly full.</p>\n<p>After Analyzing the Java process using thread dumps, we noticed that a thread is blocked inside Java “notifyAll” method. The thread remains blocked inside this method for very long time, and the process consumes high CPU while the thread remains blocked inside this method.</p>\n<p>Below is the stack trace for the thread that remains blocked -</p>\n<pre><code>&quot;pool-5-thread-1&quot; #432 prio=5 os_prio=0 tid=0x00007f7c85a57000 nid=0x37fe runnable [0x00007f7c3cba0000]\n   java.lang.Thread.State: RUNNABLE\n       at java.lang.Object.notifyAll(Native Method)\n       at gov.nist.javax.sip.parser.Pipeline.close(Pipeline.java:165)\n       - locked &lt;0x00000005c16007b8&gt; (a java.util.LinkedList)\n       at gov.nist.javax.sip.stack.NioTcpMessageChannel.close(NioTcpMessageChannel.java:258)\n       at gov.nist.javax.sip.stack.ConnectionOrientedMessageChannel.close(ConnectionOrientedMessageChannel.java:203)\n       at gov.nist.javax.sip.stack.SocketTimeoutAuditor.runTask(SocketTimeoutAuditor.java:74)\n</code></pre>\n<p>The thread remains stuck inside “notifyAll()” for several minutes while consuming high CPU.</p>\n<p>To provide more information on the Java wait/notify mechanism being used:</p>\n<p>We have a class “Pipeline” which has a private member “buffList” which is of type LinkedList.</p>\n<p>An instance of Pipeline starts a thread which is synchronized on “buffList” and calls ‘this.buffList.wait()’.</p>\n<pre><code>public int read() throws IOException {\n\n    synchronized (this.buffList) {\n\n       ...\n\n       this.buffList.wait();\n\n       ...\n\n}\n</code></pre>\n<p>When the Pipeline instance has some data or needs to be closed, another independent thread would call notifyAll(). Example snippet shows close():</p>\n<pre><code>public void close() throws IOException {\n\n        ...\n\n        synchronized (this.buffList) {\n\n            this.buffList.notifyAll();\n\n        }\n\n}\n</code></pre>\n<p>Normally, this works fine but for some reason, (that currently we neither can understand, neither can replicate), the call to ‘notifyAll()’ above not only blocks for several minutes but also causes high CPU usage.</p>\n<p>Since we tried with multiple ways to replicate the issue but currently appears only in production does anyone faced similar issue? Any idea on how we can troubleshoot/find the root cause of this behavior?</p>\n"},{"tags":["java","unit-testing","junit"],"answers":[{"tags":[],"owner":{"account_id":8627776,"reputation":593,"user_id":6460453,"display_name":"K.Nikita"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660151085,"creation_date":1660150775,"answer_id":73310139,"question_id":73309983,"body_markdown":"You can use [Mockito][1]. You setup stubbing, which will return desired value. Also you can stub for multiple calls by \r\n\r\n    .thenReturn(9, 10, 7);\r\n\r\n  [1]: https://site.mockito.org/\r\n\r\n\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import static org.mockito.Mockito.mock;\r\n    import static org.mockito.Mockito.when;\r\n    \r\n    \r\n    public class MyTest {\r\n    \r\n        @Test\r\n        void test() {\r\n            EmployeeService employeeService = mock(EmployeeService.class);\r\n            when(employeeService.getEmployeeNum()).thenReturn(9);\r\n           \r\n        }\r\n    }\r\n","title":"How To Write a Java Unit Test for the Method inside Another Method?","body":"<p>You can use <a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">Mockito</a>. You setup stubbing, which will return desired value. Also you can stub for multiple calls by</p>\n<pre><code>.thenReturn(9, 10, 7);\n</code></pre>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\n\npublic class MyTest {\n\n    @Test\n    void test() {\n        EmployeeService employeeService = mock(EmployeeService.class);\n        when(employeeService.getEmployeeNum()).thenReturn(9);\n       \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21032674,"reputation":9,"user_id":15456684,"display_name":"Bing Hao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73310139,"answer_count":1,"score":-1,"last_activity_date":1660151085,"creation_date":1660149968,"question_id":73309983,"body_markdown":"     Public Class DailyJob(){\r\n\r\n       public void runJob(ScheduleJob currentJob) {\r\n\t\t\r\n\t\ttry {\r\n                int employee = employeeService.getEmployeeNum();\r\n\t\t\t\tJobPerformance jobPerformance = performanceService.searchJobPerformance(employee);\r\n                if(jobPerformance.size() &gt;0 ) {\r\n                    currentJob.setRecord(&quot;success&quot;);\r\n               }\r\n                else {\r\n                    currentJob.setRecord(&quot;failed&quot;);\r\n                    }\r\n\t\t}\r\n        catch{\r\n        //catch error\r\n             }\r\n          }\r\n      }\r\n\r\n\r\nBy now I want to write a Junit test for runJob(). But how can I setup the value I prefer into &#39;employee&#39; parameter in Junit Test while I test runJob()? Anyone know how to implement it?","title":"How To Write a Java Unit Test for the Method inside Another Method?","body":"<pre><code> Public Class DailyJob(){\n\n   public void runJob(ScheduleJob currentJob) {\n    \n    try {\n            int employee = employeeService.getEmployeeNum();\n            JobPerformance jobPerformance = performanceService.searchJobPerformance(employee);\n            if(jobPerformance.size() &gt;0 ) {\n                currentJob.setRecord(&quot;success&quot;);\n           }\n            else {\n                currentJob.setRecord(&quot;failed&quot;);\n                }\n    }\n    catch{\n    //catch error\n         }\n      }\n  }\n</code></pre>\n<p>By now I want to write a Junit test for runJob(). But how can I setup the value I prefer into 'employee' parameter in Junit Test while I test runJob()? Anyone know how to implement it?</p>\n"},{"tags":["java","list","enums","subclass"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1660150946,"post_id":73309867,"comment_id":129467127,"body_markdown":"I cleaned up some of your ambiguous code formatting. If not what you intended, edit with further improvements.","body":"I cleaned up some of your ambiguous code formatting. If not what you intended, edit with further improvements."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1660151090,"post_id":73309867,"comment_id":129467170,"body_markdown":"Creating a subclass with the same name as one of the nested enum objects is *very* confusing. I have no idea what you are actually trying to do here. I suggest you rewrite with the simplest possible code, using a contrived example, in English. I’m voting to close as unclear.","body":"Creating a subclass with the same name as one of the nested enum objects is <i>very</i> confusing. I have no idea what you are actually trying to do here. I suggest you rewrite with the simplest possible code, using a contrived example, in English. I’m voting to close as unclear."},{"owner":{"account_id":25378677,"reputation":81,"user_id":19191401,"display_name":"huga721"},"score":0,"creation_date":1660153206,"post_id":73309867,"comment_id":129467822,"body_markdown":"I didnt understand the way of how subclasses work, but now after watching few videos It&#39;s more clear to me, I will delete question. Thanks for feedback @BasilBourque","body":"I didnt understand the way of how subclasses work, but now after watching few videos It&#39;s more clear to me, I will delete question. Thanks for feedback @BasilBourque"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1660175769,"post_id":73309867,"comment_id":129473804,"body_markdown":"If you  search Stack Overflow, you will find *many* existing Questions and Answers about using enums in Java.","body":"If you  search Stack Overflow, you will find <i>many</i> existing Questions and Answers about using enums in Java."}],"owner":{"account_id":25378677,"reputation":81,"user_id":19191401,"display_name":"huga721"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660150848,"creation_date":1660149518,"question_id":73309867,"body_markdown":"I have an enum and on creating an instantion of a class, I want to create object of the class from Enum. Tbh I dont think so that I explained it properly so I will just show it.\r\n\r\n```java\r\npublic enum TypCiala{\r\n        GWIAZDA,\r\n        PLANETA,\r\n        KSIEZYC,\r\n        ASTEROIDA,\r\n        KOMETA\r\n}\r\n```\r\n\r\n\r\n    public Ciało(String nazwa, double okresOrbitowania, TypCiala typ) {\r\n        this.nazwa = nazwa;\r\n        this.okresOrbitowania = okresOrbitowania;\r\n        this.ksiezyce = new HashSet&lt;&gt;();\r\n        this.typ = typ;\r\n    }\r\n\r\nwhile creating an instantion in Main method I want to create subclass of the typ(my enum) parameter\r\n\r\n```\r\nCiało stack = new Ciało(&quot;Earth&quot;, 333, Ciało.TypCiala.PLANETA);\r\n```\r\nI have made the subclassed for Enum, but I have no idea how to implement them, so while creating the class there gonna be made subclass of this object\r\n```\r\npublic class Planeta extends Ciało{\r\n    public Planeta(String nazwa, double okresOrbitowania, TypCiala typ) {\r\n        super(nazwa, okresOrbitowania, typ);\r\n    }\r\n}\r\n```\r\n","title":"enum value being a class, creating an subclass on instantion","body":"<p>I have an enum and on creating an instantion of a class, I want to create object of the class from Enum. Tbh I dont think so that I explained it properly so I will just show it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum TypCiala{\n        GWIAZDA,\n        PLANETA,\n        KSIEZYC,\n        ASTEROIDA,\n        KOMETA\n}\n</code></pre>\n<pre><code>public Ciało(String nazwa, double okresOrbitowania, TypCiala typ) {\n    this.nazwa = nazwa;\n    this.okresOrbitowania = okresOrbitowania;\n    this.ksiezyce = new HashSet&lt;&gt;();\n    this.typ = typ;\n}\n</code></pre>\n<p>while creating an instantion in Main method I want to create subclass of the typ(my enum) parameter</p>\n<pre><code>Ciało stack = new Ciało(&quot;Earth&quot;, 333, Ciało.TypCiala.PLANETA);\n</code></pre>\n<p>I have made the subclassed for Enum, but I have no idea how to implement them, so while creating the class there gonna be made subclass of this object</p>\n<pre><code>public class Planeta extends Ciało{\n    public Planeta(String nazwa, double okresOrbitowania, TypCiala typ) {\n        super(nazwa, okresOrbitowania, typ);\n    }\n}\n</code></pre>\n"},{"tags":["java","datetime","duration","localdate"],"comments":[{"owner":{"account_id":2118345,"reputation":12755,"user_id":1882149,"display_name":"Achintya Jha"},"score":2,"creation_date":1551096681,"post_id":54865858,"comment_id":96502209,"body_markdown":"Write your own class with all the fields mentioned and implement methods based on your requirement.","body":"Write your own class with all the fields mentioned and implement methods based on your requirement."},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1551096751,"post_id":54865858,"comment_id":96502251,"body_markdown":"You may want to look into [`java.time.Duration.parse(CharSequence)`](https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-) and [`java.time.Period.parse(CharSequence)`](https://docs.oracle.com/javase/8/docs/api/java/time/Period.html#parse-java.lang.CharSequence-)","body":"You may want to look into <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-\" rel=\"nofollow noreferrer\"><code>java.time.Duration.parse(CharSequence)</code></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Period.html#parse-java.lang.CharSequence-\" rel=\"nofollow noreferrer\"><code>java.time.Period.parse(CharSequence)</code></a>"},{"owner":{"account_id":1857245,"reputation":9188,"user_id":1682559,"accept_rate":80,"display_name":"Kevin Cruijssen"},"score":0,"creation_date":1551097139,"post_id":54865858,"comment_id":96502504,"body_markdown":"Are the `1m` and `30m` added together? Or was it a typo and one of the two is supposed to be `s` for seconds?","body":"Are the <code>1m</code> and <code>30m</code> added together? Or was it a typo and one of the two is supposed to be <code>s</code> for seconds?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1551097257,"post_id":54865858,"comment_id":96502565,"body_markdown":"@Kevin Cruijssen, it is not a typo. We can get request to add 1 minute and some time later to reduce 30 minutes","body":"@Kevin Cruijssen, it is not a typo. We can get request to add 1 minute and some time later to reduce 30 minutes"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":1,"creation_date":1551097568,"post_id":54865858,"comment_id":96502742,"body_markdown":"@ernest_k, good point but I have to add &#39;P&#39; at the begining","body":"@ernest_k, good point but I have to add &#39;P&#39; at the begining"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1551098559,"post_id":54865858,"comment_id":96503291,"body_markdown":"Well, you cannot add or subtract weeks, months or years to or from an `Instant`.","body":"Well, you cannot add or subtract weeks, months or years to or from an <code>Instant</code>."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1551101322,"post_id":54865858,"comment_id":96504848,"body_markdown":"@Ole V.V.,   it works: `Period period = Period.parse(&quot;P1W&quot;);\n        LocalDateTime localDateTime = LocalDateTime.now();\n        LocalDateTime result = localDateTime.minus(period);`","body":"@Ole V.V.,   it works: <code>Period period = Period.parse(&quot;P1W&quot;);         LocalDateTime localDateTime = LocalDateTime.now();         LocalDateTime result = localDateTime.minus(period);</code>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1551101426,"post_id":54865858,"comment_id":96504906,"body_markdown":"@gstackoverflow I just discovered that a period of weeks work with `Instant` too. Months and years don’t. All do with `LocalDateTime`.","body":"@gstackoverflow I just discovered that a period of weeks work with <code>Instant</code> too. Months and years don’t. All do with <code>LocalDateTime</code>."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1551101507,"post_id":54865858,"comment_id":96504950,"body_markdown":"@Ole V.V. I am not sure I got what you mean","body":"@Ole V.V. I am not sure I got what you mean"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1551101668,"post_id":54865858,"comment_id":96505055,"body_markdown":"@gstackoverflow `Instant.now().plus(Period.parse(&quot;P5M&quot;))` throws an `UnsupportedTemporalTypeException`.","body":"@gstackoverflow <code>Instant.now().plus(Period.parse(&quot;P5M&quot;))</code> throws an <code>UnsupportedTemporalTypeException</code>."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1551101840,"post_id":54865858,"comment_id":96505168,"body_markdown":"@Ole V.V. thx it is clear now. Good point","body":"@Ole V.V. thx it is clear now. Good point"}],"answers":[{"tags":[],"owner":{"account_id":715236,"reputation":1477,"user_id":639718,"accept_rate":59,"display_name":"Jan Hruby"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551097640,"creation_date":1551097640,"answer_id":54866196,"question_id":54865858,"body_markdown":"my guess is you should create your own parser method like this one using java.util.concurrent.TimeUnit and then you can use any framework to add seconds\r\n\r\n    private static long convertToSeconds(int value, char unit)\r\n    {\r\n    \tlong ret = value;\r\n    \tswitch (unit)\r\n    \t{\r\n    \tcase &#39;d&#39;:\r\n    \t\tret = TimeUnit.DAYS.toSeconds(value);\r\n    \t\tbreak;\r\n    \tcase &#39;h&#39;:\r\n    \t\tret = TimeUnit.HOURS.toSeconds(value);\r\n    \t\tbreak;\r\n    \tcase &#39;m&#39;:\r\n    \t\tret = TimeUnit.MINUTES.toSeconds(value);\r\n    \t\tbreak;\r\n    \tcase &#39;s&#39;:\r\n    \t\tbreak;\r\n    \tdefault:\r\n    \t\t// fail\r\n    \t\tbreak;\r\n    \t}\r\n    \treturn ret;\r\n    }","title":"How to parse time based tokens in java ?(1m 1M 1d 1Y 1W 1S)","body":"<p>my guess is you should create your own parser method like this one using java.util.concurrent.TimeUnit and then you can use any framework to add seconds</p>\n\n<pre><code>private static long convertToSeconds(int value, char unit)\n{\n    long ret = value;\n    switch (unit)\n    {\n    case 'd':\n        ret = TimeUnit.DAYS.toSeconds(value);\n        break;\n    case 'h':\n        ret = TimeUnit.HOURS.toSeconds(value);\n        break;\n    case 'm':\n        ret = TimeUnit.MINUTES.toSeconds(value);\n        break;\n    case 's':\n        break;\n    default:\n        // fail\n        break;\n    }\n    return ret;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4620092,"reputation":1796,"user_id":3745422,"display_name":"Pietro Martinelli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551097779,"creation_date":1551097779,"answer_id":54866237,"question_id":54865858,"body_markdown":"As already suggested by @Achinta Jha, you can implement yourself a simple parsing logic, with something like\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        final String[] inputs = {&quot;1m&quot;, &quot;5M&quot;, &quot;3D&quot;/*, &quot;30m&quot;, &quot;2h&quot;, &quot;1Y&quot;, &quot;3W&quot;*/};\r\n        \r\n        Arrays.stream(inputs)\r\n                .map(x -&gt; Parse(x))\r\n                .forEach(System.out::println);\r\n\r\n    }\r\n\r\n    private static final Map&lt;Character, Function&lt;String, Duration&gt;&gt; parsers = new HashMap&lt;&gt;();\r\n    static {\r\n        parsers.put(&#39;m&#39;, txt -&gt; Duration.ofMinutes(Integer.parseInt(txt)));\r\n        parsers.put(&#39;M&#39;, txt -&gt; Duration.ofDays(30 * Integer.parseInt(txt)));\r\n        parsers.put(&#39;D&#39;, txt -&gt; Duration.ofDays(Integer.parseInt(txt)));\r\n    }\r\n\r\n    private static Duration Parse(String txt) {\r\n        Character last = txt.charAt(txt.length() - 1);\r\n        Function&lt;String, Duration&gt; parser = parsers.get(last);\r\n        return parser.apply(txt.substring(0, txt.length() - 1));\r\n    }\r\n```\r\nThis is a simple, explanatory implementation, with neither error/`null`s handling nor full support for the proposed inputs.\r\nNote that `Duration` does not support a static `ofMonths` method: I supposed you intended `30 days`, but is up to you to adjust the code to your desired semantic.\r\n\r\nIn order to add/subtract `Duration`s you can use non static methods of [`Duration` class](https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html).","title":"How to parse time based tokens in java ?(1m 1M 1d 1Y 1W 1S)","body":"<p>As already suggested by @Achinta Jha, you can implement yourself a simple parsing logic, with something like</p>\n\n<pre><code>public static void main(String[] args) {\n        final String[] inputs = {\"1m\", \"5M\", \"3D\"/*, \"30m\", \"2h\", \"1Y\", \"3W\"*/};\n\n        Arrays.stream(inputs)\n                .map(x -&gt; Parse(x))\n                .forEach(System.out::println);\n\n    }\n\n    private static final Map&lt;Character, Function&lt;String, Duration&gt;&gt; parsers = new HashMap&lt;&gt;();\n    static {\n        parsers.put('m', txt -&gt; Duration.ofMinutes(Integer.parseInt(txt)));\n        parsers.put('M', txt -&gt; Duration.ofDays(30 * Integer.parseInt(txt)));\n        parsers.put('D', txt -&gt; Duration.ofDays(Integer.parseInt(txt)));\n    }\n\n    private static Duration Parse(String txt) {\n        Character last = txt.charAt(txt.length() - 1);\n        Function&lt;String, Duration&gt; parser = parsers.get(last);\n        return parser.apply(txt.substring(0, txt.length() - 1));\n    }\n</code></pre>\n\n<p>This is a simple, explanatory implementation, with neither error/<code>null</code>s handling nor full support for the proposed inputs.\nNote that <code>Duration</code> does not support a static <code>ofMonths</code> method: I supposed you intended <code>30 days</code>, but is up to you to adjust the code to your desired semantic.</p>\n\n<p>In order to add/subtract <code>Duration</code>s you can use non static methods of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code> class</a>.</p>\n"},{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551098369,"creation_date":1551098369,"answer_id":54866431,"question_id":54865858,"body_markdown":"Spring already does this but not with all the same options as you. [Their implementation is][1] \r\n\r\n\tprivate static Duration simpleParse(String rawTime) {\r\n\t\tif (rawTime == null || rawTime.isEmpty())\r\n\t\t\treturn null;\r\n\t\tif (!Character.isDigit(rawTime.charAt(0)))\r\n\t\t\treturn null;\r\n\r\n\t\tString time = rawTime.toLowerCase();\r\n\t\treturn tryParse(time, &quot;ns&quot;, Duration::ofNanos)\r\n\t\t\t\t.orElseGet(() -&gt; tryParse(time, &quot;ms&quot;, Duration::ofMillis).orElseGet(\r\n\t\t\t\t\t\t() -&gt; tryParse(time, &quot;s&quot;, Duration::ofSeconds).orElseGet(\r\n\t\t\t\t\t\t\t\t() -&gt; tryParse(time, &quot;m&quot;, Duration::ofMinutes).orElseGet(\r\n\t\t\t\t\t\t\t\t\t\t() -&gt; tryParse(time, &quot;h&quot;, Duration::ofHours)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.orElseGet(() -&gt; tryParse(time, &quot;d&quot;,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tDuration::ofDays)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.orElse(null))))));\r\n\t}\r\n\r\n\tprivate static Optional&lt;Duration&gt; tryParse(String time, String unit,\r\n\t\t\tFunction&lt;Long, Duration&gt; toDuration) {\r\n\t\tif (time.endsWith(unit)) {\r\n\t\t\tString trim = time.substring(0, time.lastIndexOf(unit)).trim();\r\n\t\t\ttry {\r\n\t\t\t\treturn Optional.of(toDuration.apply(Long.parseLong(trim)));\r\n\t\t\t}\r\n\t\t\tcatch (NumberFormatException ignore) {\r\n\t\t\t\treturn Optional.empty();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn Optional.empty();\r\n\t}\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/3cf63617f1e4afab5172881f6db3a690d4b10a1c/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/metrics/config/EnvironmentMeterFilter.java","title":"How to parse time based tokens in java ?(1m 1M 1d 1Y 1W 1S)","body":"<p>Spring already does this but not with all the same options as you. <a href=\"https://github.com/spring-projects/spring-boot/blob/3cf63617f1e4afab5172881f6db3a690d4b10a1c/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/metrics/config/EnvironmentMeterFilter.java\" rel=\"nofollow noreferrer\">Their implementation is</a> </p>\n\n<pre><code>private static Duration simpleParse(String rawTime) {\n    if (rawTime == null || rawTime.isEmpty())\n        return null;\n    if (!Character.isDigit(rawTime.charAt(0)))\n        return null;\n\n    String time = rawTime.toLowerCase();\n    return tryParse(time, \"ns\", Duration::ofNanos)\n            .orElseGet(() -&gt; tryParse(time, \"ms\", Duration::ofMillis).orElseGet(\n                    () -&gt; tryParse(time, \"s\", Duration::ofSeconds).orElseGet(\n                            () -&gt; tryParse(time, \"m\", Duration::ofMinutes).orElseGet(\n                                    () -&gt; tryParse(time, \"h\", Duration::ofHours)\n                                            .orElseGet(() -&gt; tryParse(time, \"d\",\n                                                    Duration::ofDays)\n                                                            .orElse(null))))));\n}\n\nprivate static Optional&lt;Duration&gt; tryParse(String time, String unit,\n        Function&lt;Long, Duration&gt; toDuration) {\n    if (time.endsWith(unit)) {\n        String trim = time.substring(0, time.lastIndexOf(unit)).trim();\n        try {\n            return Optional.of(toDuration.apply(Long.parseLong(trim)));\n        }\n        catch (NumberFormatException ignore) {\n            return Optional.empty();\n        }\n    }\n    return Optional.empty();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551098896,"creation_date":1551098896,"answer_id":54866581,"question_id":54865858,"body_markdown":"Since both years and  minutes are included, I recommend you to use a pair of `Duration` and `Period` parsing as mentioned in the comment. Use the static methods [`Period::parse(CharSequence text)`][1] and [`Duration.parse(CharSequence text)`][2] with their default formats (`PnDTnHnMn.nS` for `Duration` and  `PnYnMnD` for `Period`) since they don&#39;t provide a way to translate custom expression like that.\r\n\r\nFor this use case, you have to create your own mapping between your expression and the given format. \r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/Period.html#parse-java.lang.CharSequence-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_DATE_TIME\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html","title":"How to parse time based tokens in java ?(1m 1M 1d 1Y 1W 1S)","body":"<p>Since both years and  minutes are included, I recommend you to use a pair of <code>Duration</code> and <code>Period</code> parsing as mentioned in the comment. Use the static methods <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Period.html#parse-java.lang.CharSequence-\" rel=\"nofollow noreferrer\"><code>Period::parse(CharSequence text)</code></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-\" rel=\"nofollow noreferrer\"><code>Duration.parse(CharSequence text)</code></a> with their default formats (<code>PnDTnHnMn.nS</code> for <code>Duration</code> and  <code>PnYnMnD</code> for <code>Period</code>) since they don't provide a way to translate custom expression like that.</p>\n\n<p>For this use case, you have to create your own mapping between your expression and the given format. </p>\n"},{"tags":[],"owner":{"account_id":1857245,"reputation":9188,"user_id":1682559,"accept_rate":80,"display_name":"Kevin Cruijssen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551101338,"creation_date":1551101338,"answer_id":54867331,"question_id":54865858,"body_markdown":"There isn&#39;t a direct parse, but you could make your own:\r\n\r\n    // TODO: Proper variable/method names, comments, logging, code format, etc.\r\n    java.time.LocalDateTime changeDateTimeByString(java.time.LocalDateTime current, String part,\r\n                                                   boolean increaseOrDecrease){\r\n      java.time.LocalDateTime newDateTime = null;\r\n\r\n      Integer amount = Integer.parseInt(part.replaceAll(&quot;\\\\D&quot;,&quot;&quot;));\r\n      if(part.contains(&quot;S&quot;))\r\n        newDateTime = increaseOrDecrease ? current.plusSeconds(amount) : current.minusSeconds(amount);\r\n      else if(part.contains(&quot;m&quot;))\r\n        newDateTime = increaseOrDecrease ? current.plusMinutes(amount) : current.minusMinutes(amount);\r\n      else if(part.contains(&quot;h&quot;))\r\n        newDateTime = increaseOrDecrease ? current.plusHours(amount) : current.minusHours(amount);\r\n      else if(part.contains(&quot;D&quot;))\r\n        newDateTime = increaseOrDecrease ? current.plusDays(amount) : current.minusDays(amount);\r\n      else if(part.contains(&quot;W&quot;))\r\n        newDateTime = increaseOrDecrease ? current.plusDays(amount * 7) : current.minusDays(amount * 7);\r\n      else if(part.contains(&quot;M&quot;))\r\n        newDateTime = increaseOrDecrease ? current.plusMonths(amount) : current.minusMonths(amount);\r\n      else if(part.contains(&quot;Y&quot;))\r\n        newDateTime = increaseOrDecrease ? current.plusYears(amount) : current.minusYears(amount);\r\n      else\r\n        System.err.println(&quot;Unknown format: &quot; + part);\r\n      \r\n      System.out.println(&quot;New dateTime after &quot;+(increaseOrDecrease?&quot;adding&quot;:&quot;removing&quot;)+&quot; &quot;+part+&quot;: &quot;+newDateTime);\r\n      return newDateTime;\r\n    }\r\n\r\nThe parameters of the method are a String as specified by you in the question; a boolean whether you want to add or move this; and the input-date you want to modify. It will then return the modified date (Java 8+ `java.time.LocalDateTime` is used in this case). I.e.: `changeDateTimeByString(dateTime, &quot;1m&quot;, true);` will add 1 minute; `changeDateTimeByString(dateTime, &quot;2Y&quot;, false);` will remove 2 years.\r\n\r\n[**Try it online.**](https://tio.run/##rVVNb9pAEL3zK0Z7sgs1TauqElEUtfWhlUpTlVQRanpY7AFM9sPaXYNQlN9Ox9gOELArmV5g1m9m3tv17POCL/nrRfyw2USCWwtDnqjHDkCaTUQSgXXc0d9SJzFIgryRM4ma/f4D3M/TABbUIHCJxOCbjrgIucNbWkFcBVd1KYHSK8@/3HYZra1DGejMBSkROKE89jkzBpV77jQA1q3ismyPJJpzNcOq96d1IdSrMnrALiTrgTNZq@L3wzOK34VUPOXCtqt@I88pfzs/Q/nF@Czld4fUp97yT7SZaHjJTx366ffh9ia8GcAPo1M0sOQm4ROBfYlurmNQXKLtQaSlpImhSOjZjMTkj2KEqTaSux6giwLqVg513eTW7Ks2vRjTHhR5kHJDi4nWArmCREUGucUbE2IR/ePeKFyFuzNWmRCXnW3BV@VwRnvnUmd0K66qBwERWqSFlzMHBlPBI/wohMfu72nwGPPL40@mRUqklaO7bD02ImwLwQveY9lwXe00SEVmR0hdYusVanwYPKMyUUdwwY80RidEyNYihkTlsFbEC7hRxLy1iC86M7USDsBGAWFrASFf1/LvY430d/@DHl7BhyYJW7xRxrD9LFCPef0oHKCNEsatJYyR10/CAbgTUDKVzojG7Jzxl3qgL6Qq3YuMEbpbc/FLQzjlpt9xtbNoPnXkF6zrHSu/ZjyOya3YgBmUepmHfpdRcs7QZbkN7@2@FGzQZUbtH0vh0E@bzV8)","title":"How to parse time based tokens in java ?(1m 1M 1d 1Y 1W 1S)","body":"<p>There isn't a direct parse, but you could make your own:</p>\n\n<pre><code>// TODO: Proper variable/method names, comments, logging, code format, etc.\njava.time.LocalDateTime changeDateTimeByString(java.time.LocalDateTime current, String part,\n                                               boolean increaseOrDecrease){\n  java.time.LocalDateTime newDateTime = null;\n\n  Integer amount = Integer.parseInt(part.replaceAll(\"\\\\D\",\"\"));\n  if(part.contains(\"S\"))\n    newDateTime = increaseOrDecrease ? current.plusSeconds(amount) : current.minusSeconds(amount);\n  else if(part.contains(\"m\"))\n    newDateTime = increaseOrDecrease ? current.plusMinutes(amount) : current.minusMinutes(amount);\n  else if(part.contains(\"h\"))\n    newDateTime = increaseOrDecrease ? current.plusHours(amount) : current.minusHours(amount);\n  else if(part.contains(\"D\"))\n    newDateTime = increaseOrDecrease ? current.plusDays(amount) : current.minusDays(amount);\n  else if(part.contains(\"W\"))\n    newDateTime = increaseOrDecrease ? current.plusDays(amount * 7) : current.minusDays(amount * 7);\n  else if(part.contains(\"M\"))\n    newDateTime = increaseOrDecrease ? current.plusMonths(amount) : current.minusMonths(amount);\n  else if(part.contains(\"Y\"))\n    newDateTime = increaseOrDecrease ? current.plusYears(amount) : current.minusYears(amount);\n  else\n    System.err.println(\"Unknown format: \" + part);\n\n  System.out.println(\"New dateTime after \"+(increaseOrDecrease?\"adding\":\"removing\")+\" \"+part+\": \"+newDateTime);\n  return newDateTime;\n}\n</code></pre>\n\n<p>The parameters of the method are a String as specified by you in the question; a boolean whether you want to add or move this; and the input-date you want to modify. It will then return the modified date (Java 8+ <code>java.time.LocalDateTime</code> is used in this case). I.e.: <code>changeDateTimeByString(dateTime, \"1m\", true);</code> will add 1 minute; <code>changeDateTimeByString(dateTime, \"2Y\", false);</code> will remove 2 years.</p>\n\n<p><a href=\"https://tio.run/##rVVNb9pAEL3zK0Z7sgs1TauqElEUtfWhlUpTlVQRanpY7AFM9sPaXYNQlN9Ox9gOELArmV5g1m9m3tv17POCL/nrRfyw2USCWwtDnqjHDkCaTUQSgXXc0d9SJzFIgryRM4ma/f4D3M/TABbUIHCJxOCbjrgIucNbWkFcBVd1KYHSK8@/3HYZra1DGejMBSkROKE89jkzBpV77jQA1q3ismyPJJpzNcOq96d1IdSrMnrALiTrgTNZq@L3wzOK34VUPOXCtqt@I88pfzs/Q/nF@Czld4fUp97yT7SZaHjJTx366ffh9ia8GcAPo1M0sOQm4ROBfYlurmNQXKLtQaSlpImhSOjZjMTkj2KEqTaSux6giwLqVg513eTW7Ks2vRjTHhR5kHJDi4nWArmCREUGucUbE2IR/ePeKFyFuzNWmRCXnW3BV@VwRnvnUmd0K66qBwERWqSFlzMHBlPBI/wohMfu72nwGPPL40@mRUqklaO7bD02ImwLwQveY9lwXe00SEVmR0hdYusVanwYPKMyUUdwwY80RidEyNYihkTlsFbEC7hRxLy1iC86M7USDsBGAWFrASFf1/LvY430d/@DHl7BhyYJW7xRxrD9LFCPef0oHKCNEsatJYyR10/CAbgTUDKVzojG7Jzxl3qgL6Qq3YuMEbpbc/FLQzjlpt9xtbNoPnXkF6zrHSu/ZjyOya3YgBmUepmHfpdRcs7QZbkN7@2@FGzQZUbtH0vh0E@bzV8\" rel=\"nofollow noreferrer\"><strong>Try it online.</strong></a></p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1551130388,"creation_date":1551107054,"answer_id":54869074,"question_id":54865858,"body_markdown":"# `Period` &amp; `Duration`\r\n\r\nI consider the following solution simple and pretty general (not fully general).\r\n\r\n\tpublic static TemporalAmount parse(String feString) {\r\n\t\tif (Character.isUpperCase(feString.charAt(feString.length() - 1))) {\r\n\t\t\treturn Period.parse(&quot;P&quot; + feString);\r\n\t\t} else {\r\n\t\t\treturn Duration.parse(&quot;PT&quot; + feString);\r\n\t\t}\r\n\t}\r\n\r\nIt seems that your date-based units (year, month, week, day) are denoted with uppercase abbreviations (`Y`, `M`, `W` and `D`) while the time-based ones (hour and minute) are lowercase (`h` and `m`). So I test the case of the last character of the string to decide whether to parse into a `Period` or a `Duration`. I exploit the fact that both of `Period.parse` and `Duration.parse` accept the letters in either case.\r\n\r\nYou wanted to add or subtract the durations to and from `Instant` or `LocalDateTime`. This works in *most* cases. Let’s see:\r\n\r\n\t\tString[] timeAmountStrings = { &quot;1m&quot;, &quot;5M&quot;, &quot;3D&quot;, &quot;30m&quot;, &quot;2h&quot;, &quot;1Y&quot;, &quot;3W&quot; };\r\n\t\tLocalDateTime base = LocalDateTime.of(2019, Month.MARCH, 1, 0, 0);\r\n\t\tfor (String tas : timeAmountStrings) {\r\n\t\t\tTemporalAmount amount = parse(tas);\r\n\t\t\tSystem.out.println(&quot;String: &quot; + tas + &quot; parsed: &quot; + amount + &quot; added: &quot; + base.plus(amount));\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tSystem.out.println(&quot;Added to Instant: &quot; + Instant.EPOCH.plus(amount));\r\n\t\t\t} catch (DateTimeException dte) {\r\n\t\t\t\tSystem.out.println(&quot;Adding to Instant didn’t work: &quot; + tas + &#39; &#39; + dte);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tSystem.out.println();\r\n\t\t}\r\n\r\nOutput:\r\n\r\n&gt;     String: 1m parsed: PT1M added: 2019-03-01T00:01\r\n&gt;     Added to Instant: 1970-01-01T00:01:00Z\r\n&gt;     \r\n&gt;     String: 5M parsed: P5M added: 2019-08-01T00:00\r\n&gt;     Adding to Instant didn’t work: 5M java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Months\r\n&gt;     \r\n&gt;     String: 3D parsed: P3D added: 2019-03-04T00:00\r\n&gt;     Added to Instant: 1970-01-04T00:00:00Z\r\n&gt;     \r\n&gt;     String: 30m parsed: PT30M added: 2019-03-01T00:30\r\n&gt;     Added to Instant: 1970-01-01T00:30:00Z\r\n&gt;     \r\n&gt;     String: 2h parsed: PT2H added: 2019-03-01T02:00\r\n&gt;     Added to Instant: 1970-01-01T02:00:00Z\r\n&gt;     \r\n&gt;     String: 1Y parsed: P1Y added: 2020-03-01T00:00\r\n&gt;     Adding to Instant didn’t work: 1Y java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Years\r\n&gt;     \r\n&gt;     String: 3W parsed: P21D added: 2019-03-22T00:00\r\n&gt;     Added to Instant: 1970-01-22T00:00:00Z\r\n\r\nWe see that adding to `LocalDateTime` works in all cases. Adding to `Instant` works in most cases, only we cannot add a period of months or years to it.","title":"How to parse time based tokens in java ?(1m 1M 1d 1Y 1W 1S)","body":"<h1><code>Period</code> &amp; <code>Duration</code></h1>\n\n<p>I consider the following solution simple and pretty general (not fully general).</p>\n\n<pre><code>public static TemporalAmount parse(String feString) {\n    if (Character.isUpperCase(feString.charAt(feString.length() - 1))) {\n        return Period.parse(\"P\" + feString);\n    } else {\n        return Duration.parse(\"PT\" + feString);\n    }\n}\n</code></pre>\n\n<p>It seems that your date-based units (year, month, week, day) are denoted with uppercase abbreviations (<code>Y</code>, <code>M</code>, <code>W</code> and <code>D</code>) while the time-based ones (hour and minute) are lowercase (<code>h</code> and <code>m</code>). So I test the case of the last character of the string to decide whether to parse into a <code>Period</code> or a <code>Duration</code>. I exploit the fact that both of <code>Period.parse</code> and <code>Duration.parse</code> accept the letters in either case.</p>\n\n<p>You wanted to add or subtract the durations to and from <code>Instant</code> or <code>LocalDateTime</code>. This works in <em>most</em> cases. Let’s see:</p>\n\n<pre><code>    String[] timeAmountStrings = { \"1m\", \"5M\", \"3D\", \"30m\", \"2h\", \"1Y\", \"3W\" };\n    LocalDateTime base = LocalDateTime.of(2019, Month.MARCH, 1, 0, 0);\n    for (String tas : timeAmountStrings) {\n        TemporalAmount amount = parse(tas);\n        System.out.println(\"String: \" + tas + \" parsed: \" + amount + \" added: \" + base.plus(amount));\n\n        try {\n            System.out.println(\"Added to Instant: \" + Instant.EPOCH.plus(amount));\n        } catch (DateTimeException dte) {\n            System.out.println(\"Adding to Instant didn’t work: \" + tas + ' ' + dte);\n        }\n\n        System.out.println();\n    }\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>String: 1m parsed: PT1M added: 2019-03-01T00:01\nAdded to Instant: 1970-01-01T00:01:00Z\n\nString: 5M parsed: P5M added: 2019-08-01T00:00\nAdding to Instant didn’t work: 5M java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Months\n\nString: 3D parsed: P3D added: 2019-03-04T00:00\nAdded to Instant: 1970-01-04T00:00:00Z\n\nString: 30m parsed: PT30M added: 2019-03-01T00:30\nAdded to Instant: 1970-01-01T00:30:00Z\n\nString: 2h parsed: PT2H added: 2019-03-01T02:00\nAdded to Instant: 1970-01-01T02:00:00Z\n\nString: 1Y parsed: P1Y added: 2020-03-01T00:00\nAdding to Instant didn’t work: 1Y java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Years\n\nString: 3W parsed: P21D added: 2019-03-22T00:00\nAdded to Instant: 1970-01-22T00:00:00Z\n</code></pre>\n</blockquote>\n\n<p>We see that adding to <code>LocalDateTime</code> works in all cases. Adding to <code>Instant</code> works in most cases, only we cannot add a period of months or years to it.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1551130767,"creation_date":1551130337,"answer_id":54874988,"question_id":54865858,"body_markdown":"The [Answer by Ole V.V.][1] is correct, clever, and well-done. I would take it one step further.\r\n\r\n# `PeriodDuration`\r\n\r\nThe [*ThreeTen-Extra*](https://www.threeten.org/threeten-extra/) project adds functionality to the *java.time* classes built into Java 8 and later. Among its offerings is the [`PeriodDuration`][2] class, combining a `Period` (years-month-days) with a `Duration` (hours-minutes-seconds-nanos). \r\n\r\nBy the way, let me caution you about combining the two concepts. While that may seem fine intuitively, if you ponder a bit you may see it as problematic depending on your business logic.\r\n\r\nAnyways, let’s adapt the code seen in the other Answer.\r\n\r\n - If the input is uppercase, we create a string in standard [ISO 8601 duration][3] format, and parse it as a [`Period`][4], adding that result to our `PeriodDuration` object.\r\n - If the input is lowercase, we create a string in standard ISO 8601 duration format, parse it as a [`Duration`][5], and add the result to our `PeriodDuration` object.\r\n\r\nCode:\r\n\r\n\r\n    List &lt; String &gt; inputs = List.of( &quot;1m&quot; , &quot;5M&quot; , &quot;3D&quot; , &quot;30m&quot; , &quot;2h&quot; , &quot;1Y&quot; , &quot;3W&quot; );\r\n    PeriodDuration pd = PeriodDuration.ZERO;\r\n    for ( String input : inputs )\r\n    {\r\n        String s = input.trim();\r\n        String lastLetter = s.substring( s.length() - 1 );\r\n        int codepoint = Character.codePointAt( lastLetter , 0 );\r\n        if ( Character.isUpperCase( codepoint ) )\r\n        {\r\n            String x = &quot;P&quot; + s;\r\n            Period p = Period.parse( x );\r\n            pd = pd.plus( p );\r\n        } else\r\n        { // Else, lowercase.\r\n            String x = &quot;PT&quot;.concat( s ).toUpperCase();\r\n            Duration d = Duration.parse(x );\r\n            pd = pd.plus( d );\r\n        }\r\n    }\r\n    System.out.println( &quot;pd.toString(): &quot; + pd );\r\n\r\n&gt;P1Y5M24DT2H31M\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/54869074/642706\r\n  [2]: https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html\r\n  [3]: https://en.wikipedia.org/wiki/ISO_8601#Durations\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Period.html\r\n  [5]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Duration.html","title":"How to parse time based tokens in java ?(1m 1M 1d 1Y 1W 1S)","body":"<p>The <a href=\"https://stackoverflow.com/a/54869074/642706\">Answer by Ole V.V.</a> is correct, clever, and well-done. I would take it one step further.</p>\n\n<h1><code>PeriodDuration</code></h1>\n\n<p>The <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><em>ThreeTen-Extra</em></a> project adds functionality to the <em>java.time</em> classes built into Java 8 and later. Among its offerings is the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html\" rel=\"nofollow noreferrer\"><code>PeriodDuration</code></a> class, combining a <code>Period</code> (years-month-days) with a <code>Duration</code> (hours-minutes-seconds-nanos). </p>\n\n<p>By the way, let me caution you about combining the two concepts. While that may seem fine intuitively, if you ponder a bit you may see it as problematic depending on your business logic.</p>\n\n<p>Anyways, let’s adapt the code seen in the other Answer.</p>\n\n<ul>\n<li>If the input is uppercase, we create a string in standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow noreferrer\">ISO 8601 duration</a> format, and parse it as a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Period.html\" rel=\"nofollow noreferrer\"><code>Period</code></a>, adding that result to our <code>PeriodDuration</code> object.</li>\n<li>If the input is lowercase, we create a string in standard ISO 8601 duration format, parse it as a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a>, and add the result to our <code>PeriodDuration</code> object.</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>List &lt; String &gt; inputs = List.of( \"1m\" , \"5M\" , \"3D\" , \"30m\" , \"2h\" , \"1Y\" , \"3W\" );\nPeriodDuration pd = PeriodDuration.ZERO;\nfor ( String input : inputs )\n{\n    String s = input.trim();\n    String lastLetter = s.substring( s.length() - 1 );\n    int codepoint = Character.codePointAt( lastLetter , 0 );\n    if ( Character.isUpperCase( codepoint ) )\n    {\n        String x = \"P\" + s;\n        Period p = Period.parse( x );\n        pd = pd.plus( p );\n    } else\n    { // Else, lowercase.\n        String x = \"PT\".concat( s ).toUpperCase();\n        Duration d = Duration.parse(x );\n        pd = pd.plus( d );\n    }\n}\nSystem.out.println( \"pd.toString(): \" + pd );\n</code></pre>\n\n<blockquote>\n  <p>P1Y5M24DT2H31M</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":15662438,"reputation":958,"user_id":11301085,"display_name":"BeardOverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660150704,"creation_date":1660150704,"answer_id":73310121,"question_id":54865858,"body_markdown":"For Spring Boot&#39;s users:\r\n\r\nYou can use the converter [StringToDurationConverter](https://github.com/spring-projects/spring-boot/blob/b17eb9d6b599976a1a7d21987a0d7175ac1a1f8f/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/convert/StringToDurationConverter.java) in order to parse simple inputs like 5s, 12h, 1d and so.\r\n\r\nIn its implementation, we can find the [DurationStyle](https://github.com/spring-projects/spring-boot/blob/5ec0c7ed12686d0e1794b6a9e8c40f8ff955230f/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/convert/DurationStyle.java) class. \r\n```\r\nDuration parsed = DurationStyle.detectAndParse(&quot;12h&quot;);\r\n```\r\n\r\nAlso, we can see some additional examples in the [unit tests](https://github.com/spring-projects/spring-boot/blob/5ec0c7ed12686d0e1794b6a9e8c40f8ff955230f/spring-boot-project/spring-boot/src/test/java/org/springframework/boot/convert/DurationStyleTests.java).\r\n\r\nBe aware, complex inputs are not supported!","title":"How to parse time based tokens in java ?(1m 1M 1d 1Y 1W 1S)","body":"<p>For Spring Boot's users:</p>\n<p>You can use the converter <a href=\"https://github.com/spring-projects/spring-boot/blob/b17eb9d6b599976a1a7d21987a0d7175ac1a1f8f/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/convert/StringToDurationConverter.java\" rel=\"nofollow noreferrer\">StringToDurationConverter</a> in order to parse simple inputs like 5s, 12h, 1d and so.</p>\n<p>In its implementation, we can find the <a href=\"https://github.com/spring-projects/spring-boot/blob/5ec0c7ed12686d0e1794b6a9e8c40f8ff955230f/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/convert/DurationStyle.java\" rel=\"nofollow noreferrer\">DurationStyle</a> class.</p>\n<pre><code>Duration parsed = DurationStyle.detectAndParse(&quot;12h&quot;);\n</code></pre>\n<p>Also, we can see some additional examples in the <a href=\"https://github.com/spring-projects/spring-boot/blob/5ec0c7ed12686d0e1794b6a9e8c40f8ff955230f/spring-boot-project/spring-boot/src/test/java/org/springframework/boot/convert/DurationStyleTests.java\" rel=\"nofollow noreferrer\">unit tests</a>.</p>\n<p>Be aware, complex inputs are not supported!</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7407,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":54869074,"answer_count":8,"score":6,"last_activity_date":1660150704,"creation_date":1551096392,"question_id":54865858,"body_markdown":"I gets following strings from FE:\r\n\r\n    1m\r\n    5M\r\n    3D\r\n    30m\r\n    2h\r\n    1Y\r\n    3W\r\n\r\nIt corresponds to 1 minute, 5 months,3 days, 30 minutes, 2 hours, 1 year, 3 weeks.\r\n\r\nIs there mean in java to parse it?\r\n\r\nI want to manipulate(add/minus) with Instant(or LocalDatetTime). Is there way to do it in java?","title":"How to parse time based tokens in java ?(1m 1M 1d 1Y 1W 1S)","body":"<p>I gets following strings from FE:</p>\n\n<pre><code>1m\n5M\n3D\n30m\n2h\n1Y\n3W\n</code></pre>\n\n<p>It corresponds to 1 minute, 5 months,3 days, 30 minutes, 2 hours, 1 year, 3 weeks.</p>\n\n<p>Is there mean in java to parse it?</p>\n\n<p>I want to manipulate(add/minus) with Instant(or LocalDatetTime). Is there way to do it in java?</p>\n"},{"tags":["java","intellij-idea","java-8","manifest","inner-classes"],"comments":[{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":3,"creation_date":1660149325,"post_id":73309565,"comment_id":129466605,"body_markdown":"Looks like IntelliJ IDEA bug, please report at https://youtrack.jetbrains.com/newIssue?project=IDEA.","body":"Looks like IntelliJ IDEA bug, please report at <a href=\"https://youtrack.jetbrains.com/newIssue?project=IDEA\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/newIssue?project=IDEA</a>."}],"owner":{"account_id":16173363,"reputation":97,"user_id":11676639,"display_name":"weirdVariable"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1660150674,"creation_date":1660148056,"question_id":73309565,"body_markdown":"I tried to use a static inner class as the Main Class of a jar artifact with IntelliJ (Java 8). The inner class is something simple like this:\r\n\r\n```lang-java\r\npublic class Outer {\r\n    public static class Inner {\r\n        public static void main(String[] args) {\r\n            //do something\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd the compiler seems to translate the inner class by creating a new class &quot;Outer$Inner&quot; in the same package:\r\n\r\n```lang-html\r\npack\r\n    Outer.class\r\n    Outer$Inner.class\r\n```\r\n\r\nSo when you create a MANIFEST.MF with the inner class as the main class, it should look like this:\r\n\r\n```lang-MF\r\nManifest-Version: 1.0\r\nMain-Class: pack.Outer$Inner\r\n```\r\n\r\nThis was also what was working for me. However, when I use the Artifact Dialog from IntelliJ, it separates the Inner class from the Outer class with a dot &quot;.&quot; instead:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhich means the MANIFEST.MF also has the dot:\r\n\r\n```lang-MF\r\nManifest-Version: 1.0\r\nMain-Class: pack.Outer.Inner\r\n```\r\n\r\nAnd this does NOT work, if I try to run the compiled jar with this Manifest, it tells me that it didn&#39;t find class &quot;pack.Outer.Inner&quot;. Which makes sense, because that class doesn&#39;t even exist in compiled form. And if I manually change the &quot;pack.Outer.Inner&quot; to &quot;pack.Outer$Inner&quot;, IntelliJ doesn&#39;t understand it and will highlight it in red (although it compiles and runs anyways).\r\n\r\nIs this an IntelliJ bug, or am I doing something wrong?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u8ac0.png","title":"IntelliJ Doesn&#39;t Understand Inner Classes In Artifact Manifest","body":"<p>I tried to use a static inner class as the Main Class of a jar artifact with IntelliJ (Java 8). The inner class is something simple like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Outer {\n    public static class Inner {\n        public static void main(String[] args) {\n            //do something\n        }\n    }\n}\n</code></pre>\n<p>And the compiler seems to translate the inner class by creating a new class &quot;Outer$Inner&quot; in the same package:</p>\n<pre class=\"lang-html prettyprint-override\"><code>pack\n    Outer.class\n    Outer$Inner.class\n</code></pre>\n<p>So when you create a MANIFEST.MF with the inner class as the main class, it should look like this:</p>\n<pre class=\"lang-MF prettyprint-override\"><code>Manifest-Version: 1.0\nMain-Class: pack.Outer$Inner\n</code></pre>\n<p>This was also what was working for me. However, when I use the Artifact Dialog from IntelliJ, it separates the Inner class from the Outer class with a dot &quot;.&quot; instead:</p>\n<p><a href=\"https://i.stack.imgur.com/u8ac0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u8ac0.png\" alt=\"enter image description here\" /></a></p>\n<p>Which means the MANIFEST.MF also has the dot:</p>\n<pre class=\"lang-MF prettyprint-override\"><code>Manifest-Version: 1.0\nMain-Class: pack.Outer.Inner\n</code></pre>\n<p>And this does NOT work, if I try to run the compiled jar with this Manifest, it tells me that it didn't find class &quot;pack.Outer.Inner&quot;. Which makes sense, because that class doesn't even exist in compiled form. And if I manually change the &quot;pack.Outer.Inner&quot; to &quot;pack.Outer$Inner&quot;, IntelliJ doesn't understand it and will highlight it in red (although it compiles and runs anyways).</p>\n<p>Is this an IntelliJ bug, or am I doing something wrong?</p>\n"},{"tags":["java","performance","jvm","garbage-collection","garbage"],"comments":[{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":5,"creation_date":1659554789,"post_id":73226675,"comment_id":129324687,"body_markdown":"Every single time people write a Java benchmark manually, they end up measuring an OSR compilation. I already showed many times why this is wrong: [1](https://stackoverflow.com/a/54410675/3448419), [2](https://stackoverflow.com/a/33858960/3448419), [3](https://stackoverflow.com/a/42590152/3448419), [4](https://stackoverflow.com/a/46637432/3448419). Just [don&#39;t write](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java) a microbechmark from scratch. Use [JMH](https://github.com/openjdk/jmh).","body":"Every single time people write a Java benchmark manually, they end up measuring an OSR compilation. I already showed many times why this is wrong: <a href=\"https://stackoverflow.com/a/54410675/3448419\">1</a>, <a href=\"https://stackoverflow.com/a/33858960/3448419\">2</a>, <a href=\"https://stackoverflow.com/a/42590152/3448419\">3</a>, <a href=\"https://stackoverflow.com/a/46637432/3448419\">4</a>. Just <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\">don&#39;t write</a> a microbechmark from scratch. Use <a href=\"https://github.com/openjdk/jmh\" rel=\"nofollow noreferrer\">JMH</a>."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":2,"creation_date":1659584348,"post_id":73226675,"comment_id":129330579,"body_markdown":"Thanks for rewriting, now the benchmark makes sense. Replace `b.put(bt);` with `b.put(i, bt);` and the results become expected. I&#39;ll write a detailed answer a bit later. In short, JIT can&#39;t optimize the updates of ByteBuffer&#39;s internal state in the second case, because the creation of that ByteBuffer and its backing array is not in the scope of the compilation.","body":"Thanks for rewriting, now the benchmark makes sense. Replace <code>b.put(bt);</code> with <code>b.put(i, bt);</code> and the results become expected. I&#39;ll write a detailed answer a bit later. In short, JIT can&#39;t optimize the updates of ByteBuffer&#39;s internal state in the second case, because the creation of that ByteBuffer and its backing array is not in the scope of the compilation."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1659584521,"post_id":73226675,"comment_id":129330604,"body_markdown":"As a practical consequence, `ByteBuffer.put` with an absolute index is almost always preferable to relative `put` from the performance perspective.","body":"As a practical consequence, <code>ByteBuffer.put</code> with an absolute index is almost always preferable to relative <code>put</code> from the performance perspective."},{"owner":{"account_id":2938721,"reputation":3181,"user_id":2517106,"accept_rate":98,"display_name":"735Tesla"},"score":0,"creation_date":1659585636,"post_id":73226675,"comment_id":129330783,"body_markdown":"@apangin thanks! do you have any books on the topic you&#39;d recommend?","body":"@apangin thanks! do you have any books on the topic you&#39;d recommend?"}],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1659564561,"creation_date":1659554900,"answer_id":73226813,"question_id":73226675,"body_markdown":"### Disclaimer \r\nThe following are just a theories, they might be completely wrong. I am neither a JIT nor a GC expert.\r\n\r\n### code removal\r\n\r\nI think that the JIT just optimized away (some of) your code. If that is the case, it detected that you are not actually using the stored values and just removed the code allocating/filling the object. Things like JmH&#39;s black hole might help you with that.\r\n\r\n### Parallelization\r\n\r\nIt could also be the case that it parallelized your code. Since loop different iterations are independent of each other, it is possible to execute multiple iterations in parallel.\r\n\r\n### Stack allocations\r\n\r\nAnother possibility is that it detected that the object is stack confined and has a very narrow scope and is removed immediately. Because of that, it might have moved your object to the stack where it can be allocated/pushed and deallocated/popped quickly.\r\n\r\n### Closing thoughts\r\n\r\nThe JIT might always do unexpected things. Don&#39;t optimize prematurely and don&#39;t guess where your bottlenecks are. Measure your performance before and after any changes you do. Performance might not get lost you expect it to.\r\nThis is also the case in other languages but especially in Java.\r\n\r\nAnd, as [apangin](https://stackoverflow.com/users/3448419/apangin) [mentioned in the comments](https://stackoverflow.com/questions/73226675/why-does-this-test-take-longer-without-garbage-collection-overhead/73226813#comment129324687_73226675), you should really use [JMH](https://github.com/openjdk/jmh).","title":"Why does this test take longer without garbage collection overhead?","body":"<h3>Disclaimer</h3>\n<p>The following are just a theories, they might be completely wrong. I am neither a JIT nor a GC expert.</p>\n<h3>code removal</h3>\n<p>I think that the JIT just optimized away (some of) your code. If that is the case, it detected that you are not actually using the stored values and just removed the code allocating/filling the object. Things like JmH's black hole might help you with that.</p>\n<h3>Parallelization</h3>\n<p>It could also be the case that it parallelized your code. Since loop different iterations are independent of each other, it is possible to execute multiple iterations in parallel.</p>\n<h3>Stack allocations</h3>\n<p>Another possibility is that it detected that the object is stack confined and has a very narrow scope and is removed immediately. Because of that, it might have moved your object to the stack where it can be allocated/pushed and deallocated/popped quickly.</p>\n<h3>Closing thoughts</h3>\n<p>The JIT might always do unexpected things. Don't optimize prematurely and don't guess where your bottlenecks are. Measure your performance before and after any changes you do. Performance might not get lost you expect it to.\nThis is also the case in other languages but especially in Java.</p>\n<p>And, as <a href=\"https://stackoverflow.com/users/3448419/apangin\">apangin</a> <a href=\"https://stackoverflow.com/questions/73226675/why-does-this-test-take-longer-without-garbage-collection-overhead/73226813#comment129324687_73226675\">mentioned in the comments</a>, you should really use <a href=\"https://github.com/openjdk/jmh\" rel=\"nofollow noreferrer\">JMH</a>.</p>\n"},{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1659887794,"creation_date":1659887794,"answer_id":73268952,"question_id":73226675,"body_markdown":"Creating a new ByteBuffer right before filling, indeed helps JIT compiler to produce better optimized code, when you use relative `put` methods, and here is why.\r\n\r\n1. JIT compilation unit is a method. HotSpot JVM does not perform a whole-program optimization, which is quite hard even in theory due to dynamic nature of Java and the open world runtime environment.\r\n2. When the JVM compiles `test1` method, buffer instantiation appears in the same compilation scope as filling:\r\n```\r\nBigish tmp = new Bigish();\r\ntmp.setup(blackhole);\r\ntmp.fill((byte)random.nextInt(255));\r\n```\r\nThe JVM knows everything about the created buffer: its exact size and its backing array, it knows the buffer has not been published yet, no other thread sees it. So, the JVM can agressively optimize the fill loop: vectorize it using AVX instructions and unroll it to set 512 bytes at a time:\r\n```\r\n  0x000001cdf60c9ae0:   mov    %r9d,%r8d\r\n  0x000001cdf60c9ae3:   movslq %r8d,%r9\r\n  0x000001cdf60c9ae6:   add    %r11,%r9\r\n  0x000001cdf60c9ae9:   vmovdqu %ymm0,0x10(%rcx,%r9,1)\r\n  0x000001cdf60c9af0:   vmovdqu %ymm0,0x30(%rcx,%r9,1)\r\n  0x000001cdf60c9af7:   vmovdqu %ymm0,0x50(%rcx,%r9,1)\r\n  0x000001cdf60c9afe:   vmovdqu %ymm0,0x70(%rcx,%r9,1)\r\n  0x000001cdf60c9b05:   vmovdqu %ymm0,0x90(%rcx,%r9,1)\r\n  0x000001cdf60c9b0f:   vmovdqu %ymm0,0xb0(%rcx,%r9,1)\r\n  0x000001cdf60c9b19:   vmovdqu %ymm0,0xd0(%rcx,%r9,1)\r\n  0x000001cdf60c9b23:   vmovdqu %ymm0,0xf0(%rcx,%r9,1)\r\n  0x000001cdf60c9b2d:   vmovdqu %ymm0,0x110(%rcx,%r9,1)\r\n  0x000001cdf60c9b37:   vmovdqu %ymm0,0x130(%rcx,%r9,1)\r\n  0x000001cdf60c9b41:   vmovdqu %ymm0,0x150(%rcx,%r9,1)\r\n  0x000001cdf60c9b4b:   vmovdqu %ymm0,0x170(%rcx,%r9,1)\r\n  0x000001cdf60c9b55:   vmovdqu %ymm0,0x190(%rcx,%r9,1)\r\n  0x000001cdf60c9b5f:   vmovdqu %ymm0,0x1b0(%rcx,%r9,1)\r\n  0x000001cdf60c9b69:   vmovdqu %ymm0,0x1d0(%rcx,%r9,1)\r\n  0x000001cdf60c9b73:   vmovdqu %ymm0,0x1f0(%rcx,%r9,1)\r\n  0x000001cdf60c9b7d:   mov    %r8d,%r9d\r\n  0x000001cdf60c9b80:   add    $0x200,%r9d\r\n  0x000001cdf60c9b87:   cmp    %r10d,%r9d\r\n  0x000001cdf60c9b8a:   jl     0x000001cdf60c9ae0\r\n```\r\n3. You use relative [`put`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html#put(byte)) method. It not only sets a byte in a ByteBuffer, but also updates the `position` field. Note that the above vectorized loop does not update the position in memory. JVM sets it just once after the loop - it is allowed to do so as long as nobody can observe an inconsistent state of the buffer.\r\n4. Now try to publish ByteBuffer before filling:\r\n```\r\nBigish tmp = new Bigish();\r\nvolatileField = tmp;  // publish\r\ntmp.setup(blackhole);\r\ntmp.fill((byte)random.nextInt(255));\r\n```\r\nThe loop optimization breaks; now the array bytes are filled one by one, and the position field is incremented accordingly.\r\n```\r\n  0x000001829b18ca5c:   nopl   0x0(%rax)\r\n  0x000001829b18ca60:   cmp    %r11d,%esi\r\n  0x000001829b18ca63:   jge    0x000001829b18ce34           ;*if_icmplt {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - java.nio.Buffer::nextPutIndex@10 (line 721)\r\n                                                            ; - java.nio.HeapByteBuffer::put@6 (line 209)\r\n                                                            ; - bench.MemPressureTest$Bigish::fill@22 (line 33)\r\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\r\n  0x000001829b18ca69:   mov    %esi,%ecx\r\n  0x000001829b18ca6b:   add    %edx,%ecx                    ;*getfield position {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - java.nio.Buffer::nextPutIndex@1 (line 720)\r\n                                                            ; - java.nio.HeapByteBuffer::put@6 (line 209)\r\n                                                            ; - bench.MemPressureTest$Bigish::fill@22 (line 33)\r\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\r\n  0x000001829b18ca6d:   mov    %esi,%eax\r\n  0x000001829b18ca6f:   inc    %eax                         ;*iinc {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - bench.MemPressureTest$Bigish::fill@26 (line 32)\r\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\r\n  0x000001829b18ca71:   mov    %eax,0x18(%r10)              ;*putfield position {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - java.nio.Buffer::nextPutIndex@25 (line 723)\r\n                                                            ; - java.nio.HeapByteBuffer::put@6 (line 209)\r\n                                                            ; - bench.MemPressureTest$Bigish::fill@22 (line 33)\r\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\r\n  0x000001829b18ca75:   cmp    %r8d,%ecx\r\n  0x000001829b18ca78:   jae    0x000001829b18ce14\r\n  0x000001829b18ca7e:   movslq %esi,%r9\r\n  0x000001829b18ca81:   add    %r14,%r9\r\n  0x000001829b18ca84:   mov    %bl,0x10(%rdi,%r9,1)         ;*bastore {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - java.nio.HeapByteBuffer::put@13 (line 209)\r\n                                                            ; - bench.MemPressureTest$Bigish::fill@22 (line 33)\r\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\r\n  0x000001829b18ca89:   cmp    $0x1000,%eax\r\n  0x000001829b18ca8f:   jge    0x000001829b18ca95           ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - bench.MemPressureTest$Bigish::fill@14 (line 32)\r\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\r\n  0x000001829b18ca91:   mov    %eax,%esi\r\n  0x000001829b18ca93:   jmp    0x000001829b18ca5c\r\n```\r\nThat&#39;s exactly what happens in `test2`. Since the ByteBuffer object is external to the compilation scope, JIT can&#39;t optimize it as freely as a local not-yet-published object.\r\n\r\n5. Is it possible at all to optimize the fill loop in case of an external buffer?\r\n\r\nThe good news, it is possible. Just use the absolute [`put`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html#put(int,byte)) method instead of relative. In this case, `position` field remains unchanged, and JIT can easily vectorize the loop without a risk of breaking ByteBuffer invariants.\r\n```\r\nfor (int i = 0; i &lt; SIZE; ++i) {\r\n    b.put(i, bt);\r\n}\r\n```\r\n\r\nWith this change, the loop will be vectorized in both cases. Even better, now `test2` becomes a lot faster than `test1`, proving that an object creation indeed has a performance overhead.\r\n```\r\nBenchmark               Mode  Cnt      Score     Error   Units\r\nMemPressureTest.test1  thrpt   10   2447,370 &#177; 146,804  ops/ms\r\nMemPressureTest.test2  thrpt   10  15677,575 &#177; 136,075  ops/ms\r\n```\r\n\r\n### Conclusion\r\n\r\n1. The counterintuitive performance difference was caused by the JVM inability to vectorize the fill loop when the ByteBuffer object creation is not in the compilation scope.\r\n2. Prefer absolute get/put methods to relative ones where possible. Absolute methods are usually much faster, since they do not update the internal state of ByteBuffer, and JIT can apply more agressive optimizations.\r\n3. Object creation indeed has an overhead, as the modified benchmark shows.","title":"Why does this test take longer without garbage collection overhead?","body":"<p>Creating a new ByteBuffer right before filling, indeed helps JIT compiler to produce better optimized code, when you use relative <code>put</code> methods, and here is why.</p>\n<ol>\n<li>JIT compilation unit is a method. HotSpot JVM does not perform a whole-program optimization, which is quite hard even in theory due to dynamic nature of Java and the open world runtime environment.</li>\n<li>When the JVM compiles <code>test1</code> method, buffer instantiation appears in the same compilation scope as filling:</li>\n</ol>\n<pre><code>Bigish tmp = new Bigish();\ntmp.setup(blackhole);\ntmp.fill((byte)random.nextInt(255));\n</code></pre>\n<p>The JVM knows everything about the created buffer: its exact size and its backing array, it knows the buffer has not been published yet, no other thread sees it. So, the JVM can agressively optimize the fill loop: vectorize it using AVX instructions and unroll it to set 512 bytes at a time:</p>\n<pre><code>  0x000001cdf60c9ae0:   mov    %r9d,%r8d\n  0x000001cdf60c9ae3:   movslq %r8d,%r9\n  0x000001cdf60c9ae6:   add    %r11,%r9\n  0x000001cdf60c9ae9:   vmovdqu %ymm0,0x10(%rcx,%r9,1)\n  0x000001cdf60c9af0:   vmovdqu %ymm0,0x30(%rcx,%r9,1)\n  0x000001cdf60c9af7:   vmovdqu %ymm0,0x50(%rcx,%r9,1)\n  0x000001cdf60c9afe:   vmovdqu %ymm0,0x70(%rcx,%r9,1)\n  0x000001cdf60c9b05:   vmovdqu %ymm0,0x90(%rcx,%r9,1)\n  0x000001cdf60c9b0f:   vmovdqu %ymm0,0xb0(%rcx,%r9,1)\n  0x000001cdf60c9b19:   vmovdqu %ymm0,0xd0(%rcx,%r9,1)\n  0x000001cdf60c9b23:   vmovdqu %ymm0,0xf0(%rcx,%r9,1)\n  0x000001cdf60c9b2d:   vmovdqu %ymm0,0x110(%rcx,%r9,1)\n  0x000001cdf60c9b37:   vmovdqu %ymm0,0x130(%rcx,%r9,1)\n  0x000001cdf60c9b41:   vmovdqu %ymm0,0x150(%rcx,%r9,1)\n  0x000001cdf60c9b4b:   vmovdqu %ymm0,0x170(%rcx,%r9,1)\n  0x000001cdf60c9b55:   vmovdqu %ymm0,0x190(%rcx,%r9,1)\n  0x000001cdf60c9b5f:   vmovdqu %ymm0,0x1b0(%rcx,%r9,1)\n  0x000001cdf60c9b69:   vmovdqu %ymm0,0x1d0(%rcx,%r9,1)\n  0x000001cdf60c9b73:   vmovdqu %ymm0,0x1f0(%rcx,%r9,1)\n  0x000001cdf60c9b7d:   mov    %r8d,%r9d\n  0x000001cdf60c9b80:   add    $0x200,%r9d\n  0x000001cdf60c9b87:   cmp    %r10d,%r9d\n  0x000001cdf60c9b8a:   jl     0x000001cdf60c9ae0\n</code></pre>\n<ol start=\"3\">\n<li>You use relative <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html#put(byte)\" rel=\"noreferrer\"><code>put</code></a> method. It not only sets a byte in a ByteBuffer, but also updates the <code>position</code> field. Note that the above vectorized loop does not update the position in memory. JVM sets it just once after the loop - it is allowed to do so as long as nobody can observe an inconsistent state of the buffer.</li>\n<li>Now try to publish ByteBuffer before filling:</li>\n</ol>\n<pre><code>Bigish tmp = new Bigish();\nvolatileField = tmp;  // publish\ntmp.setup(blackhole);\ntmp.fill((byte)random.nextInt(255));\n</code></pre>\n<p>The loop optimization breaks; now the array bytes are filled one by one, and the position field is incremented accordingly.</p>\n<pre><code>  0x000001829b18ca5c:   nopl   0x0(%rax)\n  0x000001829b18ca60:   cmp    %r11d,%esi\n  0x000001829b18ca63:   jge    0x000001829b18ce34           ;*if_icmplt {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - java.nio.Buffer::nextPutIndex@10 (line 721)\n                                                            ; - java.nio.HeapByteBuffer::put@6 (line 209)\n                                                            ; - bench.MemPressureTest$Bigish::fill@22 (line 33)\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\n  0x000001829b18ca69:   mov    %esi,%ecx\n  0x000001829b18ca6b:   add    %edx,%ecx                    ;*getfield position {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - java.nio.Buffer::nextPutIndex@1 (line 720)\n                                                            ; - java.nio.HeapByteBuffer::put@6 (line 209)\n                                                            ; - bench.MemPressureTest$Bigish::fill@22 (line 33)\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\n  0x000001829b18ca6d:   mov    %esi,%eax\n  0x000001829b18ca6f:   inc    %eax                         ;*iinc {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - bench.MemPressureTest$Bigish::fill@26 (line 32)\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\n  0x000001829b18ca71:   mov    %eax,0x18(%r10)              ;*putfield position {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - java.nio.Buffer::nextPutIndex@25 (line 723)\n                                                            ; - java.nio.HeapByteBuffer::put@6 (line 209)\n                                                            ; - bench.MemPressureTest$Bigish::fill@22 (line 33)\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\n  0x000001829b18ca75:   cmp    %r8d,%ecx\n  0x000001829b18ca78:   jae    0x000001829b18ce14\n  0x000001829b18ca7e:   movslq %esi,%r9\n  0x000001829b18ca81:   add    %r14,%r9\n  0x000001829b18ca84:   mov    %bl,0x10(%rdi,%r9,1)         ;*bastore {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - java.nio.HeapByteBuffer::put@13 (line 209)\n                                                            ; - bench.MemPressureTest$Bigish::fill@22 (line 33)\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\n  0x000001829b18ca89:   cmp    $0x1000,%eax\n  0x000001829b18ca8f:   jge    0x000001829b18ca95           ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - bench.MemPressureTest$Bigish::fill@14 (line 32)\n                                                            ; - bench.MemPressureTest::test1@28 (line 47)\n  0x000001829b18ca91:   mov    %eax,%esi\n  0x000001829b18ca93:   jmp    0x000001829b18ca5c\n</code></pre>\n<p>That's exactly what happens in <code>test2</code>. Since the ByteBuffer object is external to the compilation scope, JIT can't optimize it as freely as a local not-yet-published object.</p>\n<ol start=\"5\">\n<li>Is it possible at all to optimize the fill loop in case of an external buffer?</li>\n</ol>\n<p>The good news, it is possible. Just use the absolute <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html#put(int,byte)\" rel=\"noreferrer\"><code>put</code></a> method instead of relative. In this case, <code>position</code> field remains unchanged, and JIT can easily vectorize the loop without a risk of breaking ByteBuffer invariants.</p>\n<pre><code>for (int i = 0; i &lt; SIZE; ++i) {\n    b.put(i, bt);\n}\n</code></pre>\n<p>With this change, the loop will be vectorized in both cases. Even better, now <code>test2</code> becomes a lot faster than <code>test1</code>, proving that an object creation indeed has a performance overhead.</p>\n<pre><code>Benchmark               Mode  Cnt      Score     Error   Units\nMemPressureTest.test1  thrpt   10   2447,370 ± 146,804  ops/ms\nMemPressureTest.test2  thrpt   10  15677,575 ± 136,075  ops/ms\n</code></pre>\n<h3>Conclusion</h3>\n<ol>\n<li>The counterintuitive performance difference was caused by the JVM inability to vectorize the fill loop when the ByteBuffer object creation is not in the compilation scope.</li>\n<li>Prefer absolute get/put methods to relative ones where possible. Absolute methods are usually much faster, since they do not update the internal state of ByteBuffer, and JIT can apply more agressive optimizations.</li>\n<li>Object creation indeed has an overhead, as the modified benchmark shows.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7413250,"reputation":592,"user_id":5639961,"display_name":"yyyy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660150413,"creation_date":1660150413,"answer_id":73310056,"question_id":73226675,"body_markdown":"You original question and the edited JMH version are actually slightly different.\r\n\r\nIn the edited version, like @apangin mentioned, it&#39;s pointer `perm` stored in static field prevents the code get optimized.\r\n\r\nIn your original question, it&#39;s because you forgot to warm up. Here&#39;s a modified version:\r\n```\r\n    public static void main(String[] args) {\r\n\t\tvar t1 = System.currentTimeMillis();\r\n        var warmup = Integer.parseInt(args[0]);\r\n\t\tfor (int i = 0; i &lt; warmup; i++) { test(1); }  // magic!!!\r\n\t\ttest(1000000);\r\n\t\tvar t2 = System.currentTimeMillis();\r\n\t\tSystem.out.println(t2 - t1);\r\n\t}\r\n\t\r\n    private static void test(int n) {\r\n        Random random = new Random(1);\r\n\t\tBigish tmp = new Bigish();\r\n        for (int i = 0; i &lt; n; ++i) {\r\n            tmp.fill((byte) random.nextInt(255));\r\n        }\r\n    }\r\n```\r\nIt takes an int argument `warmup` to help JVM decide which methods should be inlined.\r\n\r\nOn my machine, which is `OpenJDK Runtime Environment Zulu17.28+13-CA (build 17+35-LTS)` on Windows, when `warmup` is `8000`, the output is unpredictable. It usually takes ~2.7 seconds, but occasionally it only takes 110 milliseconds.\r\n\r\nWhen `warmup` is set to `8500`, it almost always completes in 110~120 milliseconds.\r\n\r\n---\r\n\r\nYou may also run with `-XX:+UnlockDiagnosticVMOptions -XX:+PrintInlining` options to see how JVM inline the methods. If everything is fully inlined, you should be able to see something like\r\n```\r\n  @ 24   A$Bigish::&lt;init&gt; (11 bytes)   inline (hot)\r\n\t@ 4   java.nio.ByteBuffer::allocate (20 bytes)   inline (hot)\r\n\t  @ 16   java.nio.HeapByteBuffer::&lt;init&gt; (21 bytes)   inline (hot)\r\n\t\t@ 10   java.nio.ByteBuffer::&lt;init&gt; (47 bytes)   inline (hot)\r\n\t\t  @ 8   java.nio.Buffer::&lt;init&gt; (105 bytes)   inline (hot)\r\n\t\t\t@ 1   java.lang.Object::&lt;init&gt; (1 bytes)   inline (hot)\r\n\t\t\t@ 39   java.nio.ByteBuffer::limit (6 bytes)   inline (hot)\r\n\t\t\t  @ 2   java.nio.ByteBuffer::limit (8 bytes)   inline (hot)\r\n\t\t\t\t@ 2   java.nio.Buffer::limit (65 bytes)   inline (hot)\r\n\t\t\t@ 45   java.nio.ByteBuffer::position (6 bytes)   inline (hot)\r\n\t\t\t  @ 2   java.nio.ByteBuffer::position (8 bytes)   inline (hot)\r\n\t\t\t\t@ 2   java.nio.Buffer::position (52 bytes)   inline (hot)\r\n\t\t  @ 17   java.nio.ByteOrder::nativeOrder (4 bytes)   inline (hot)\r\n\t@ 7   A$Bigish::&lt;init&gt; (10 bytes)   inline (hot)\r\n\t  @ 1   java.lang.Object::&lt;init&gt; (1 bytes)   inline (hot)\r\n```\r\nclose to the bottom of the output.\r\n\r\nNotice that only when the consturctor of `Bigish` and `ByteBuffer` are fully inlined, then JVM can predicate that the underlying buffer will never be visible to another thread, which allows writes to the buffer to be safely vectorized.\r\n\r\n---\r\n\r\nBTW, this is yet another case shows how tricky benchmarking is. Without digging into the the detail, it&#39;s difficult to tell which part is the real performance bottleneck. Even JMH can be misleading.","title":"Why does this test take longer without garbage collection overhead?","body":"<p>You original question and the edited JMH version are actually slightly different.</p>\n<p>In the edited version, like @apangin mentioned, it's pointer <code>perm</code> stored in static field prevents the code get optimized.</p>\n<p>In your original question, it's because you forgot to warm up. Here's a modified version:</p>\n<pre><code>    public static void main(String[] args) {\n        var t1 = System.currentTimeMillis();\n        var warmup = Integer.parseInt(args[0]);\n        for (int i = 0; i &lt; warmup; i++) { test(1); }  // magic!!!\n        test(1000000);\n        var t2 = System.currentTimeMillis();\n        System.out.println(t2 - t1);\n    }\n    \n    private static void test(int n) {\n        Random random = new Random(1);\n        Bigish tmp = new Bigish();\n        for (int i = 0; i &lt; n; ++i) {\n            tmp.fill((byte) random.nextInt(255));\n        }\n    }\n</code></pre>\n<p>It takes an int argument <code>warmup</code> to help JVM decide which methods should be inlined.</p>\n<p>On my machine, which is <code>OpenJDK Runtime Environment Zulu17.28+13-CA (build 17+35-LTS)</code> on Windows, when <code>warmup</code> is <code>8000</code>, the output is unpredictable. It usually takes ~2.7 seconds, but occasionally it only takes 110 milliseconds.</p>\n<p>When <code>warmup</code> is set to <code>8500</code>, it almost always completes in 110~120 milliseconds.</p>\n<hr />\n<p>You may also run with <code>-XX:+UnlockDiagnosticVMOptions -XX:+PrintInlining</code> options to see how JVM inline the methods. If everything is fully inlined, you should be able to see something like</p>\n<pre><code>  @ 24   A$Bigish::&lt;init&gt; (11 bytes)   inline (hot)\n    @ 4   java.nio.ByteBuffer::allocate (20 bytes)   inline (hot)\n      @ 16   java.nio.HeapByteBuffer::&lt;init&gt; (21 bytes)   inline (hot)\n        @ 10   java.nio.ByteBuffer::&lt;init&gt; (47 bytes)   inline (hot)\n          @ 8   java.nio.Buffer::&lt;init&gt; (105 bytes)   inline (hot)\n            @ 1   java.lang.Object::&lt;init&gt; (1 bytes)   inline (hot)\n            @ 39   java.nio.ByteBuffer::limit (6 bytes)   inline (hot)\n              @ 2   java.nio.ByteBuffer::limit (8 bytes)   inline (hot)\n                @ 2   java.nio.Buffer::limit (65 bytes)   inline (hot)\n            @ 45   java.nio.ByteBuffer::position (6 bytes)   inline (hot)\n              @ 2   java.nio.ByteBuffer::position (8 bytes)   inline (hot)\n                @ 2   java.nio.Buffer::position (52 bytes)   inline (hot)\n          @ 17   java.nio.ByteOrder::nativeOrder (4 bytes)   inline (hot)\n    @ 7   A$Bigish::&lt;init&gt; (10 bytes)   inline (hot)\n      @ 1   java.lang.Object::&lt;init&gt; (1 bytes)   inline (hot)\n</code></pre>\n<p>close to the bottom of the output.</p>\n<p>Notice that only when the consturctor of <code>Bigish</code> and <code>ByteBuffer</code> are fully inlined, then JVM can predicate that the underlying buffer will never be visible to another thread, which allows writes to the buffer to be safely vectorized.</p>\n<hr />\n<p>BTW, this is yet another case shows how tricky benchmarking is. Without digging into the the detail, it's difficult to tell which part is the real performance bottleneck. Even JMH can be misleading.</p>\n"}],"owner":{"account_id":2938721,"reputation":3181,"user_id":2517106,"accept_rate":98,"display_name":"735Tesla"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":73268952,"answer_count":3,"score":13,"last_activity_date":1660150413,"creation_date":1659554167,"question_id":73226675,"body_markdown":"I ran into this scenario in the process of developing a lightweight library for asynchronous messaging. Trying to get an idea of the cost of creating lots of medium sized objects with short lifetimes, I wrote the following test:\r\n\r\n```java\r\nimport java.nio.ByteBuffer;\r\nimport java.util.Random;\r\n\r\n\r\npublic class MemPressureTest {\r\n\tstatic final int SIZE = 4096;\r\n\tstatic final class Bigish {\r\n\t\tfinal ByteBuffer b;\r\n\r\n\r\n\t\tpublic Bigish() {\r\n\t\t\tthis(ByteBuffer.allocate(SIZE));\r\n\t\t}\r\n\r\n\t\tpublic Bigish(ByteBuffer b) {\r\n\t\t\tthis.b = b;\r\n\t\t}\r\n\r\n\t\tpublic void fill(byte bt) {\r\n\t\t\tb.clear();\r\n\t\t\tfor (int i = 0; i &lt; SIZE; ++i) {\r\n\t\t\t\tb.put(bt);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tRandom random = new Random(1);\r\n\t\tBigish tmp = new Bigish();\r\n\t\tfor (int i = 0; i &lt; 3e7; ++i) {\r\n\t\t\ttmp.fill((byte)random.nextInt(255));\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nOn my laptop, with default GC settings, it runs in about 95 seconds:\r\n```\r\n/tmp$ time java -Xlog:gc MemPressureTest\r\n[0.006s][info][gc] Using G1\r\n\r\nreal\t1m35.552s\r\nuser\t1m33.658s\r\nsys\t0m0.428s\r\n```\r\n\r\nThis is where things get strange. I tweaked the program to allocate a new object for each iteration:\r\n```java\r\n...\r\n\t\tRandom random = new Random(1);\r\n\t\tfor (int i = 0; i &lt; 3e7; ++i) {\r\n\t\t\tBigish tmp = new Bigish();\r\n\t\t\ttmp.fill((byte)random.nextInt(255));\r\n\t\t}\r\n...\r\n```\r\n In theory, this should add some small overhead, but none of the objects should ever be promoted out of Eden. At best, I&#39;d expect the runtimes to be close to identical. However, this test completes in ~17 seconds:\r\n```\r\n/tmp$ time java -Xlog:gc MemPressureTest\r\n[0.007s][info][gc] Using G1\r\n[0.090s][info][gc] GC(0) Pause Young (Normal) (G1 Evacuation Pause) 23M-&gt;1M(130M) 1.304ms\r\n[0.181s][info][gc] GC(1) Pause Young (Normal) (G1 Evacuation Pause) 76M-&gt;1M(130M) 0.870ms\r\n[0.247s][info][gc] GC(2) Pause Young (Normal) (G1 Evacuation Pause) 76M-&gt;0M(130M) 0.844ms\r\n[0.317s][info][gc] GC(3) Pause Young (Normal) (G1 Evacuation Pause) 75M-&gt;0M(130M) 0.793ms\r\n[0.381s][info][gc] GC(4) Pause Young (Normal) (G1 Evacuation Pause) 75M-&gt;0M(130M) 0.859ms\r\n[lots of similar GC pauses, snipped for brevity]\r\n[16.608s][info][gc] GC(482) Pause Young (Normal) (G1 Evacuation Pause) 254M-&gt;0M(425M) 0.765ms\r\n[16.643s][info][gc] GC(483) Pause Young (Normal) (G1 Evacuation Pause) 254M-&gt;0M(425M) 0.580ms\r\n[16.676s][info][gc] GC(484) Pause Young (Normal) (G1 Evacuation Pause) 254M-&gt;0M(425M) 0.841ms\r\n\r\nreal\t0m16.766s\r\nuser\t0m16.578s\r\nsys\t0m0.576s\r\n```\r\n\r\nI ran both versions several times, with near identical results to the above. I feel like I must be missing something very obvious. Am I going insane? What could explain this difference in performance? \r\n\r\n\r\n=== EDIT ===\r\n\r\n\r\nI rewrote the test using JMH as per apangin and dan1st&#39;s suggestions:\r\n```java\r\nimport org.openjdk.jmh.annotations.*;\r\nimport org.openjdk.jmh.infra.Blackhole;\r\n\r\nimport java.nio.ByteBuffer;\r\nimport java.util.Random;\r\n\r\n\r\npublic class MemPressureTest {\r\n    static final int SIZE = 4096;\r\n\r\n    @State(Scope.Benchmark)\r\n    public static class Bigish {\r\n        final ByteBuffer b;\r\n        private Blackhole blackhole;\r\n\r\n\r\n        @Setup(Level.Trial)\r\n        public void setup(Blackhole blackhole) {\r\n            this.blackhole = blackhole;\r\n        }\r\n\r\n        public Bigish() {\r\n            this.b = ByteBuffer.allocate(SIZE);\r\n        }\r\n\r\n        public void fill(byte bt) {\r\n            b.clear();\r\n            for (int i = 0; i &lt; SIZE; ++i) {\r\n                b.put(bt);\r\n            }\r\n            blackhole.consume(b);\r\n        }\r\n    }\r\n\r\n    static Random random = new Random(1);\r\n\r\n\r\n    @Benchmark\r\n    public static void test1(Blackhole blackhole) {\r\n        Bigish tmp = new Bigish();\r\n        tmp.setup(blackhole);\r\n        tmp.fill((byte)random.nextInt(255));\r\n        blackhole.consume(tmp);\r\n    }\r\n\r\n    @Benchmark\r\n    public static void test2(Bigish perm) {\r\n        perm.fill((byte) random.nextInt(255));\r\n    }\r\n}\r\n```\r\nStill, the second test much slower:\r\n```\r\n&gt; Task :jmh\r\n# JMH version: 1.35\r\n# VM version: JDK 18.0.1.1, OpenJDK 64-Bit Server VM, 18.0.1.1+2-6\r\n# VM invoker: /Users/xxx/Library/Java/JavaVirtualMachines/openjdk-18.0.1.1/Contents/Home/bin/java\r\n# VM options: -Dfile.encoding=UTF-8 -Djava.io.tmpdir=/Users/xxx/Dev/MemTests/build/tmp/jmh -Duser.country=US -Duser.language=en -Duser.variant\r\n# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)\r\n# Warmup: 5 iterations, 10 s each\r\n# Measurement: 5 iterations, 10 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: com.xxx.MemPressureTest.test1\r\n\r\n# Run progress: 0.00% complete, ETA 00:16:40\r\n# Fork: 1 of 5\r\n# Warmup Iteration   1: 2183998.556 ops/s\r\n# Warmup Iteration   2: 2281885.941 ops/s\r\n# Warmup Iteration   3: 2239644.018 ops/s\r\n# Warmup Iteration   4: 1608047.994 ops/s\r\n# Warmup Iteration   5: 1992314.001 ops/s\r\nIteration   1: 2053657.571 ops/s3s]\r\nIteration   2: 2054957.773 ops/sm 3s]\r\nIteration   3: 2051595.233 ops/sm 13s]\r\nIteration   4: 2054878.239 ops/sm 23s]\r\nIteration   5: 2031111.214 ops/sm 33s]\r\n\r\n# Run progress: 10.00% complete, ETA 00:15:04\r\n# Fork: 2 of 5\r\n# Warmup Iteration   1: 2228594.345 ops/s\r\n# Warmup Iteration   2: 2257983.355 ops/s\r\n# Warmup Iteration   3: 2063130.244 ops/s\r\n# Warmup Iteration   4: 1629084.669 ops/s\r\n# Warmup Iteration   5: 2063018.496 ops/s\r\nIteration   1: 1939260.937 ops/sm 33s]\r\nIteration   2: 1791414.018 ops/sm 43s]\r\nIteration   3: 1914987.221 ops/sm 53s]\r\nIteration   4: 1969484.898 ops/sm 3s]\r\nIteration   5: 1891440.624 ops/sm 13s]\r\n\r\n# Run progress: 20.00% complete, ETA 00:13:23\r\n# Fork: 3 of 5\r\n# Warmup Iteration   1: 2228664.719 ops/s\r\n# Warmup Iteration   2: 2263677.403 ops/s\r\n# Warmup Iteration   3: 2237032.464 ops/s\r\n# Warmup Iteration   4: 2040040.243 ops/s\r\n# Warmup Iteration   5: 2038848.530 ops/s\r\nIteration   1: 2023934.952 ops/sm 14s]\r\nIteration   2: 2041874.437 ops/sm 24s]\r\nIteration   3: 2002858.770 ops/sm 34s]\r\nIteration   4: 2039727.607 ops/sm 44s]\r\nIteration   5: 2045827.670 ops/sm 54s]\r\n\r\n# Run progress: 30.00% complete, ETA 00:11:43\r\n# Fork: 4 of 5\r\n# Warmup Iteration   1: 2105430.688 ops/s\r\n# Warmup Iteration   2: 2279387.762 ops/s\r\n# Warmup Iteration   3: 2228346.691 ops/s\r\n# Warmup Iteration   4: 1438607.183 ops/s\r\n# Warmup Iteration   5: 2059319.745 ops/s\r\nIteration   1: 1112543.932 ops/sm 54s]\r\nIteration   2: 1977077.976 ops/sm 4s]\r\nIteration   3: 2040147.355 ops/sm 14s]\r\nIteration   4: 1975766.032 ops/sm 24s]\r\nIteration   5: 2003532.092 ops/sm 34s]\r\n\r\n# Run progress: 40.00% complete, ETA 00:10:02\r\n# Fork: 5 of 5\r\n# Warmup Iteration   1: 2240203.848 ops/s\r\n# Warmup Iteration   2: 2245673.994 ops/s\r\n# Warmup Iteration   3: 2096257.864 ops/s\r\n# Warmup Iteration   4: 2046527.740 ops/s\r\n# Warmup Iteration   5: 2050379.941 ops/s\r\nIteration   1: 2050691.989 ops/sm 35s]\r\nIteration   2: 2057803.100 ops/sm 45s]\r\nIteration   3: 2058634.766 ops/sm 55s]\r\nIteration   4: 2060596.595 ops/sm 5s]\r\nIteration   5: 2061282.107 ops/sm 15s]\r\n\r\n\r\nResult &quot;com.xxx.MemPressureTest.test1&quot;:\r\n  1972203.484 &#177;(99.9%) 142904.698 ops/s [Average]\r\n  (min, avg, max) = (1112543.932, 1972203.484, 2061282.107), stdev = 190773.683\r\n  CI (99.9%): [1829298.786, 2115108.182] (assumes normal distribution)\r\n\r\n\r\n# JMH version: 1.35\r\n# VM version: JDK 18.0.1.1, OpenJDK 64-Bit Server VM, 18.0.1.1+2-6\r\n# VM invoker: /Users/xxx/Library/Java/JavaVirtualMachines/openjdk-18.0.1.1/Contents/Home/bin/java\r\n# VM options: -Dfile.encoding=UTF-8 -Djava.io.tmpdir=/Users/xxx/Dev/MemTests/build/tmp/jmh -Duser.country=US -Duser.language=en -Duser.variant\r\n# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)\r\n# Warmup: 5 iterations, 10 s each\r\n# Measurement: 5 iterations, 10 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: com.xxx.MemPressureTest.test2\r\n\r\n# Run progress: 50.00% complete, ETA 00:08:22\r\n# Fork: 1 of 5\r\n# Warmup Iteration   1: 282751.407 ops/s\r\n# Warmup Iteration   2: 283333.984 ops/s\r\n# Warmup Iteration   3: 293785.079 ops/s\r\n# Warmup Iteration   4: 268403.105 ops/s\r\n# Warmup Iteration   5: 280054.277 ops/s\r\nIteration   1: 279093.118 ops/s9m 15s]\r\nIteration   2: 282782.996 ops/s9m 25s]\r\nIteration   3: 282688.921 ops/s9m 35s]\r\nIteration   4: 291578.963 ops/s9m 45s]\r\nIteration   5: 294835.777 ops/s9m 55s]\r\n\r\n# Run progress: 60.00% complete, ETA 00:06:41\r\n# Fork: 2 of 5\r\n# Warmup Iteration   1: 283735.550 ops/s\r\n# Warmup Iteration   2: 283536.547 ops/s\r\n# Warmup Iteration   3: 294403.173 ops/s\r\n# Warmup Iteration   4: 284161.042 ops/s\r\n# Warmup Iteration   5: 281719.077 ops/s\r\nIteration   1: 276838.416 ops/s10m 56s]\r\nIteration   2: 284063.117 ops/s11m 6s]\r\nIteration   3: 282361.985 ops/s11m 16s]\r\nIteration   4: 289125.092 ops/s11m 26s]\r\nIteration   5: 294236.625 ops/s11m 36s]\r\n\r\n# Run progress: 70.00% complete, ETA 00:05:01\r\n# Fork: 3 of 5\r\n# Warmup Iteration   1: 284567.336 ops/s\r\n# Warmup Iteration   2: 283548.713 ops/s\r\n# Warmup Iteration   3: 294317.511 ops/s\r\n# Warmup Iteration   4: 283501.873 ops/s\r\n# Warmup Iteration   5: 283691.306 ops/s\r\nIteration   1: 283462.749 ops/s12m 36s]\r\nIteration   2: 284120.587 ops/s12m 46s]\r\nIteration   3: 264878.952 ops/s12m 56s]\r\nIteration   4: 292681.168 ops/s13m 6s]\r\nIteration   5: 295279.759 ops/s13m 16s]\r\n\r\n# Run progress: 80.00% complete, ETA 00:03:20\r\n# Fork: 4 of 5\r\n# Warmup Iteration   1: 284823.519 ops/s\r\n# Warmup Iteration   2: 283913.207 ops/s\r\n# Warmup Iteration   3: 294401.483 ops/s\r\n# Warmup Iteration   4: 283998.027 ops/s\r\n# Warmup Iteration   5: 283987.408 ops/s\r\nIteration   1: 278014.618 ops/s14m 17s]\r\nIteration   2: 283431.491 ops/s14m 27s]\r\nIteration   3: 284465.945 ops/s14m 37s]\r\nIteration   4: 293202.934 ops/s14m 47s]\r\nIteration   5: 290059.807 ops/s14m 57s]\r\n\r\n# Run progress: 90.00% complete, ETA 00:01:40\r\n# Fork: 5 of 5\r\n# Warmup Iteration   1: 285598.809 ops/s\r\n# Warmup Iteration   2: 284434.916 ops/s\r\n# Warmup Iteration   3: 294355.547 ops/s\r\n# Warmup Iteration   4: 284307.860 ops/s\r\n# Warmup Iteration   5: 284297.362 ops/s\r\nIteration   1: 283676.043 ops/s15m 57s]\r\nIteration   2: 283609.750 ops/s16m 7s]\r\nIteration   3: 284575.124 ops/s16m 17s]\r\nIteration   4: 293564.269 ops/s16m 27s]\r\nIteration   5: 216267.883 ops/s16m 37s]\r\n\r\n\r\nResult &quot;com.xxx.MemPressureTest.test2&quot;:\r\n  282755.844 &#177;(99.9%) 11599.112 ops/s [Average]\r\n  (min, avg, max) = (216267.883, 282755.844, 295279.759), stdev = 15484.483\r\n  CI (99.9%): [271156.731, 294354.956] (assumes normal distribution)\r\n```\r\n\r\nThe JMH Blackhole should prevent code removal and the fact that JMH is now in charge of running separate iterations should prevent parallelization, right? Shouldn&#39;t Blackhole also stop the object from being confined to the stack? Also, wouldn&#39;t there be more variation between warmup iterations if hotspot were still doing a significant amount of optimization?","title":"Why does this test take longer without garbage collection overhead?","body":"<p>I ran into this scenario in the process of developing a lightweight library for asynchronous messaging. Trying to get an idea of the cost of creating lots of medium sized objects with short lifetimes, I wrote the following test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.ByteBuffer;\nimport java.util.Random;\n\n\npublic class MemPressureTest {\n    static final int SIZE = 4096;\n    static final class Bigish {\n        final ByteBuffer b;\n\n\n        public Bigish() {\n            this(ByteBuffer.allocate(SIZE));\n        }\n\n        public Bigish(ByteBuffer b) {\n            this.b = b;\n        }\n\n        public void fill(byte bt) {\n            b.clear();\n            for (int i = 0; i &lt; SIZE; ++i) {\n                b.put(bt);\n            }\n        }\n    }\n\n\n    public static void main(String[] args) {\n        Random random = new Random(1);\n        Bigish tmp = new Bigish();\n        for (int i = 0; i &lt; 3e7; ++i) {\n            tmp.fill((byte)random.nextInt(255));\n        }\n    }\n}\n</code></pre>\n<p>On my laptop, with default GC settings, it runs in about 95 seconds:</p>\n<pre><code>/tmp$ time java -Xlog:gc MemPressureTest\n[0.006s][info][gc] Using G1\n\nreal    1m35.552s\nuser    1m33.658s\nsys 0m0.428s\n</code></pre>\n<p>This is where things get strange. I tweaked the program to allocate a new object for each iteration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\n        Random random = new Random(1);\n        for (int i = 0; i &lt; 3e7; ++i) {\n            Bigish tmp = new Bigish();\n            tmp.fill((byte)random.nextInt(255));\n        }\n...\n</code></pre>\n<p>In theory, this should add some small overhead, but none of the objects should ever be promoted out of Eden. At best, I'd expect the runtimes to be close to identical. However, this test completes in ~17 seconds:</p>\n<pre><code>/tmp$ time java -Xlog:gc MemPressureTest\n[0.007s][info][gc] Using G1\n[0.090s][info][gc] GC(0) Pause Young (Normal) (G1 Evacuation Pause) 23M-&gt;1M(130M) 1.304ms\n[0.181s][info][gc] GC(1) Pause Young (Normal) (G1 Evacuation Pause) 76M-&gt;1M(130M) 0.870ms\n[0.247s][info][gc] GC(2) Pause Young (Normal) (G1 Evacuation Pause) 76M-&gt;0M(130M) 0.844ms\n[0.317s][info][gc] GC(3) Pause Young (Normal) (G1 Evacuation Pause) 75M-&gt;0M(130M) 0.793ms\n[0.381s][info][gc] GC(4) Pause Young (Normal) (G1 Evacuation Pause) 75M-&gt;0M(130M) 0.859ms\n[lots of similar GC pauses, snipped for brevity]\n[16.608s][info][gc] GC(482) Pause Young (Normal) (G1 Evacuation Pause) 254M-&gt;0M(425M) 0.765ms\n[16.643s][info][gc] GC(483) Pause Young (Normal) (G1 Evacuation Pause) 254M-&gt;0M(425M) 0.580ms\n[16.676s][info][gc] GC(484) Pause Young (Normal) (G1 Evacuation Pause) 254M-&gt;0M(425M) 0.841ms\n\nreal    0m16.766s\nuser    0m16.578s\nsys 0m0.576s\n</code></pre>\n<p>I ran both versions several times, with near identical results to the above. I feel like I must be missing something very obvious. Am I going insane? What could explain this difference in performance?</p>\n<p>=== EDIT ===</p>\n<p>I rewrote the test using JMH as per apangin and dan1st's suggestions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.openjdk.jmh.annotations.*;\nimport org.openjdk.jmh.infra.Blackhole;\n\nimport java.nio.ByteBuffer;\nimport java.util.Random;\n\n\npublic class MemPressureTest {\n    static final int SIZE = 4096;\n\n    @State(Scope.Benchmark)\n    public static class Bigish {\n        final ByteBuffer b;\n        private Blackhole blackhole;\n\n\n        @Setup(Level.Trial)\n        public void setup(Blackhole blackhole) {\n            this.blackhole = blackhole;\n        }\n\n        public Bigish() {\n            this.b = ByteBuffer.allocate(SIZE);\n        }\n\n        public void fill(byte bt) {\n            b.clear();\n            for (int i = 0; i &lt; SIZE; ++i) {\n                b.put(bt);\n            }\n            blackhole.consume(b);\n        }\n    }\n\n    static Random random = new Random(1);\n\n\n    @Benchmark\n    public static void test1(Blackhole blackhole) {\n        Bigish tmp = new Bigish();\n        tmp.setup(blackhole);\n        tmp.fill((byte)random.nextInt(255));\n        blackhole.consume(tmp);\n    }\n\n    @Benchmark\n    public static void test2(Bigish perm) {\n        perm.fill((byte) random.nextInt(255));\n    }\n}\n</code></pre>\n<p>Still, the second test much slower:</p>\n<pre><code>&gt; Task :jmh\n# JMH version: 1.35\n# VM version: JDK 18.0.1.1, OpenJDK 64-Bit Server VM, 18.0.1.1+2-6\n# VM invoker: /Users/xxx/Library/Java/JavaVirtualMachines/openjdk-18.0.1.1/Contents/Home/bin/java\n# VM options: -Dfile.encoding=UTF-8 -Djava.io.tmpdir=/Users/xxx/Dev/MemTests/build/tmp/jmh -Duser.country=US -Duser.language=en -Duser.variant\n# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)\n# Warmup: 5 iterations, 10 s each\n# Measurement: 5 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: com.xxx.MemPressureTest.test1\n\n# Run progress: 0.00% complete, ETA 00:16:40\n# Fork: 1 of 5\n# Warmup Iteration   1: 2183998.556 ops/s\n# Warmup Iteration   2: 2281885.941 ops/s\n# Warmup Iteration   3: 2239644.018 ops/s\n# Warmup Iteration   4: 1608047.994 ops/s\n# Warmup Iteration   5: 1992314.001 ops/s\nIteration   1: 2053657.571 ops/s3s]\nIteration   2: 2054957.773 ops/sm 3s]\nIteration   3: 2051595.233 ops/sm 13s]\nIteration   4: 2054878.239 ops/sm 23s]\nIteration   5: 2031111.214 ops/sm 33s]\n\n# Run progress: 10.00% complete, ETA 00:15:04\n# Fork: 2 of 5\n# Warmup Iteration   1: 2228594.345 ops/s\n# Warmup Iteration   2: 2257983.355 ops/s\n# Warmup Iteration   3: 2063130.244 ops/s\n# Warmup Iteration   4: 1629084.669 ops/s\n# Warmup Iteration   5: 2063018.496 ops/s\nIteration   1: 1939260.937 ops/sm 33s]\nIteration   2: 1791414.018 ops/sm 43s]\nIteration   3: 1914987.221 ops/sm 53s]\nIteration   4: 1969484.898 ops/sm 3s]\nIteration   5: 1891440.624 ops/sm 13s]\n\n# Run progress: 20.00% complete, ETA 00:13:23\n# Fork: 3 of 5\n# Warmup Iteration   1: 2228664.719 ops/s\n# Warmup Iteration   2: 2263677.403 ops/s\n# Warmup Iteration   3: 2237032.464 ops/s\n# Warmup Iteration   4: 2040040.243 ops/s\n# Warmup Iteration   5: 2038848.530 ops/s\nIteration   1: 2023934.952 ops/sm 14s]\nIteration   2: 2041874.437 ops/sm 24s]\nIteration   3: 2002858.770 ops/sm 34s]\nIteration   4: 2039727.607 ops/sm 44s]\nIteration   5: 2045827.670 ops/sm 54s]\n\n# Run progress: 30.00% complete, ETA 00:11:43\n# Fork: 4 of 5\n# Warmup Iteration   1: 2105430.688 ops/s\n# Warmup Iteration   2: 2279387.762 ops/s\n# Warmup Iteration   3: 2228346.691 ops/s\n# Warmup Iteration   4: 1438607.183 ops/s\n# Warmup Iteration   5: 2059319.745 ops/s\nIteration   1: 1112543.932 ops/sm 54s]\nIteration   2: 1977077.976 ops/sm 4s]\nIteration   3: 2040147.355 ops/sm 14s]\nIteration   4: 1975766.032 ops/sm 24s]\nIteration   5: 2003532.092 ops/sm 34s]\n\n# Run progress: 40.00% complete, ETA 00:10:02\n# Fork: 5 of 5\n# Warmup Iteration   1: 2240203.848 ops/s\n# Warmup Iteration   2: 2245673.994 ops/s\n# Warmup Iteration   3: 2096257.864 ops/s\n# Warmup Iteration   4: 2046527.740 ops/s\n# Warmup Iteration   5: 2050379.941 ops/s\nIteration   1: 2050691.989 ops/sm 35s]\nIteration   2: 2057803.100 ops/sm 45s]\nIteration   3: 2058634.766 ops/sm 55s]\nIteration   4: 2060596.595 ops/sm 5s]\nIteration   5: 2061282.107 ops/sm 15s]\n\n\nResult &quot;com.xxx.MemPressureTest.test1&quot;:\n  1972203.484 ±(99.9%) 142904.698 ops/s [Average]\n  (min, avg, max) = (1112543.932, 1972203.484, 2061282.107), stdev = 190773.683\n  CI (99.9%): [1829298.786, 2115108.182] (assumes normal distribution)\n\n\n# JMH version: 1.35\n# VM version: JDK 18.0.1.1, OpenJDK 64-Bit Server VM, 18.0.1.1+2-6\n# VM invoker: /Users/xxx/Library/Java/JavaVirtualMachines/openjdk-18.0.1.1/Contents/Home/bin/java\n# VM options: -Dfile.encoding=UTF-8 -Djava.io.tmpdir=/Users/xxx/Dev/MemTests/build/tmp/jmh -Duser.country=US -Duser.language=en -Duser.variant\n# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)\n# Warmup: 5 iterations, 10 s each\n# Measurement: 5 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: com.xxx.MemPressureTest.test2\n\n# Run progress: 50.00% complete, ETA 00:08:22\n# Fork: 1 of 5\n# Warmup Iteration   1: 282751.407 ops/s\n# Warmup Iteration   2: 283333.984 ops/s\n# Warmup Iteration   3: 293785.079 ops/s\n# Warmup Iteration   4: 268403.105 ops/s\n# Warmup Iteration   5: 280054.277 ops/s\nIteration   1: 279093.118 ops/s9m 15s]\nIteration   2: 282782.996 ops/s9m 25s]\nIteration   3: 282688.921 ops/s9m 35s]\nIteration   4: 291578.963 ops/s9m 45s]\nIteration   5: 294835.777 ops/s9m 55s]\n\n# Run progress: 60.00% complete, ETA 00:06:41\n# Fork: 2 of 5\n# Warmup Iteration   1: 283735.550 ops/s\n# Warmup Iteration   2: 283536.547 ops/s\n# Warmup Iteration   3: 294403.173 ops/s\n# Warmup Iteration   4: 284161.042 ops/s\n# Warmup Iteration   5: 281719.077 ops/s\nIteration   1: 276838.416 ops/s10m 56s]\nIteration   2: 284063.117 ops/s11m 6s]\nIteration   3: 282361.985 ops/s11m 16s]\nIteration   4: 289125.092 ops/s11m 26s]\nIteration   5: 294236.625 ops/s11m 36s]\n\n# Run progress: 70.00% complete, ETA 00:05:01\n# Fork: 3 of 5\n# Warmup Iteration   1: 284567.336 ops/s\n# Warmup Iteration   2: 283548.713 ops/s\n# Warmup Iteration   3: 294317.511 ops/s\n# Warmup Iteration   4: 283501.873 ops/s\n# Warmup Iteration   5: 283691.306 ops/s\nIteration   1: 283462.749 ops/s12m 36s]\nIteration   2: 284120.587 ops/s12m 46s]\nIteration   3: 264878.952 ops/s12m 56s]\nIteration   4: 292681.168 ops/s13m 6s]\nIteration   5: 295279.759 ops/s13m 16s]\n\n# Run progress: 80.00% complete, ETA 00:03:20\n# Fork: 4 of 5\n# Warmup Iteration   1: 284823.519 ops/s\n# Warmup Iteration   2: 283913.207 ops/s\n# Warmup Iteration   3: 294401.483 ops/s\n# Warmup Iteration   4: 283998.027 ops/s\n# Warmup Iteration   5: 283987.408 ops/s\nIteration   1: 278014.618 ops/s14m 17s]\nIteration   2: 283431.491 ops/s14m 27s]\nIteration   3: 284465.945 ops/s14m 37s]\nIteration   4: 293202.934 ops/s14m 47s]\nIteration   5: 290059.807 ops/s14m 57s]\n\n# Run progress: 90.00% complete, ETA 00:01:40\n# Fork: 5 of 5\n# Warmup Iteration   1: 285598.809 ops/s\n# Warmup Iteration   2: 284434.916 ops/s\n# Warmup Iteration   3: 294355.547 ops/s\n# Warmup Iteration   4: 284307.860 ops/s\n# Warmup Iteration   5: 284297.362 ops/s\nIteration   1: 283676.043 ops/s15m 57s]\nIteration   2: 283609.750 ops/s16m 7s]\nIteration   3: 284575.124 ops/s16m 17s]\nIteration   4: 293564.269 ops/s16m 27s]\nIteration   5: 216267.883 ops/s16m 37s]\n\n\nResult &quot;com.xxx.MemPressureTest.test2&quot;:\n  282755.844 ±(99.9%) 11599.112 ops/s [Average]\n  (min, avg, max) = (216267.883, 282755.844, 295279.759), stdev = 15484.483\n  CI (99.9%): [271156.731, 294354.956] (assumes normal distribution)\n</code></pre>\n<p>The JMH Blackhole should prevent code removal and the fact that JMH is now in charge of running separate iterations should prevent parallelization, right? Shouldn't Blackhole also stop the object from being confined to the stack? Also, wouldn't there be more variation between warmup iterations if hotspot were still doing a significant amount of optimization?</p>\n"},{"tags":["java","spring-boot","jackson","quarkus","jackson-databind"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1660151834,"post_id":73310055,"comment_id":129467396,"body_markdown":"What determines which properties are supposed to be included in the response?","body":"What determines which properties are supposed to be included in the response?"},{"owner":{"account_id":12606889,"reputation":57,"user_id":9637940,"display_name":"Dmirii Berrington"},"score":0,"creation_date":1660152400,"post_id":73310055,"comment_id":129467587,"body_markdown":"In my example, this is `MockService.getAvailableFields()`. But in fact this list is taken from the database and `Arrays.asList(&quot;firstName&quot;, &quot;lastName&quot;, &quot;address&quot;)` replaced to `availableFiledsRepository.findAll()`","body":"In my example, this is <code>MockService.getAvailableFields()</code>. But in fact this list is taken from the database and <code>Arrays.asList(&quot;firstName&quot;, &quot;lastName&quot;, &quot;address&quot;)</code> replaced to <code>availableFiledsRepository.findAll()</code>"},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1660154510,"post_id":73310055,"comment_id":129468243,"body_markdown":"I was going to suggest using `@JsonAnyGetter` but that won&#39;t really work with a &quot;service&quot; providing those property names.","body":"I was going to suggest using <code>@JsonAnyGetter</code> but that won&#39;t really work with a &quot;service&quot; providing those property names."}],"owner":{"account_id":12606889,"reputation":57,"user_id":9637940,"display_name":"Dmirii Berrington"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660150412,"creation_date":1660150412,"question_id":73310055,"body_markdown":"Given a dynamically changing list of fields that should be available in final response. The main task is how to exclude all other fields from DTO using jackson.\r\n\r\n*For example*:\r\n\r\n**Sample DTO**\r\n\r\n    Sample DTO {\r\n      firstName: &lt;String&gt;,\r\n      lastName: &lt;String&gt;,\r\n      address: &lt;String&gt;,\r\n      email: &lt;String&gt;,\r\n    }\r\n\r\n**Available fields 1** - [&quot;firstName&quot;, &quot;lastName&quot;, &quot;address&quot;] at the moment 1\r\n\r\n**Sample DTO final response 1**\r\n\r\n    Sample DTO final response {\r\n      firstName: &lt;String&gt;,\r\n      lastName: &lt;String&gt;,\r\n      address: &lt;String&gt;\r\n    }\r\n\r\n**Available fields 2** - [&quot;firstName&quot;, &quot;email&quot;] at the moment 2\r\n\r\n**Sample DTO final response 2**\r\n\r\n    Sample DTO final response {\r\n      firstName: &lt;String&gt;,\r\n      email: &lt;String&gt;,\r\n    }\r\n\r\nRight now i have this solution:\r\n\r\n**SampleDTO**\r\n\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Getter\r\n    @Setter\r\n    @JsonFilter(&quot;myFilter&quot;)\r\n    public class SampleDTO {\r\n        String firstName;\r\n        String lastName;\r\n        String address;\r\n        String email;\r\n    }\r\n\r\n**CustomObjectMapper** \r\n\r\n    public class CustomObjectMapper {\r\n    \r\n        // Replaces the CDI producer for ObjectMapper built into Quarkus\r\n        @Singleton\r\n        @Produces\r\n        ObjectMapper objectMapper(Instance&lt;ObjectMapperCustomizer&gt; customizers) {\r\n            ObjectMapper mapper = new ObjectMapper(); // Custom `ObjectMapper`\r\n    \r\n            // Apply all ObjectMapperCustomizer beans (incl. Quarkus)\r\n            for (ObjectMapperCustomizer customizer : customizers) {\r\n                customizer.customize(mapper);\r\n            }\r\n    \r\n            return mapper;\r\n        }\r\n    }\r\n\r\n**RegisterCustomModuleCustomizer** \r\n\r\n    @Singleton\r\n    public class RegisterCustomModuleCustomizer implements ObjectMapperCustomizer {\r\n    \r\n        @Inject\r\n        MockService mockService;\r\n    \r\n        public void customize(ObjectMapper mapper) {\r\n            FilterProvider filters = new SimpleFilterProvider().addFilter(&quot;myFilter&quot;, new PropertyFilter(mockService));\r\n    \r\n            mapper.setFilterProvider(filters);\r\n        }\r\n    }\r\n\r\n**PropertyFilter** \r\n\r\n    @AllArgsConstructor\r\n    public class PropertyFilter extends SimpleBeanPropertyFilter {\r\n    \r\n        MockService mockService;\r\n    \r\n        @Override\r\n        public void serializeAsField(Object pojo, JsonGenerator jgen, SerializerProvider provider, PropertyWriter writer) throws Exception {\r\n            if (include(writer)) {\r\n                List&lt;String&gt; availableFields = mockService.getAvailableFields();\r\n                if (availableFields.contains(writer.getName())) {\r\n                    writer.serializeAsField(pojo, jgen, provider);\r\n                }\r\n            } else if (!jgen.canOmitFields()) { // since 2.3\r\n                writer.serializeAsOmittedField(pojo, jgen, provider);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected boolean include(BeanPropertyWriter writer) {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        protected boolean include(PropertyWriter writer) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n**MockService**\r\n\r\n    @ApplicationScoped\r\n    public class MockService {\r\n        public List&lt;String&gt; getAvailableFields() {\r\n            return Arrays.asList(&quot;firstName&quot;, &quot;lastName&quot;, &quot;address&quot;);\r\n        }\r\n    }\r\n\r\nThis solution works but there is in one bad moment that for each field a method from the service is called. How to resolve this problem?","title":"How to exclude a dynamically changing list of fields from the dto using Jackson?","body":"<p>Given a dynamically changing list of fields that should be available in final response. The main task is how to exclude all other fields from DTO using jackson.</p>\n<p><em>For example</em>:</p>\n<p><strong>Sample DTO</strong></p>\n<pre><code>Sample DTO {\n  firstName: &lt;String&gt;,\n  lastName: &lt;String&gt;,\n  address: &lt;String&gt;,\n  email: &lt;String&gt;,\n}\n</code></pre>\n<p><strong>Available fields 1</strong> - [&quot;firstName&quot;, &quot;lastName&quot;, &quot;address&quot;] at the moment 1</p>\n<p><strong>Sample DTO final response 1</strong></p>\n<pre><code>Sample DTO final response {\n  firstName: &lt;String&gt;,\n  lastName: &lt;String&gt;,\n  address: &lt;String&gt;\n}\n</code></pre>\n<p><strong>Available fields 2</strong> - [&quot;firstName&quot;, &quot;email&quot;] at the moment 2</p>\n<p><strong>Sample DTO final response 2</strong></p>\n<pre><code>Sample DTO final response {\n  firstName: &lt;String&gt;,\n  email: &lt;String&gt;,\n}\n</code></pre>\n<p>Right now i have this solution:</p>\n<p><strong>SampleDTO</strong></p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\n@JsonFilter(&quot;myFilter&quot;)\npublic class SampleDTO {\n    String firstName;\n    String lastName;\n    String address;\n    String email;\n}\n</code></pre>\n<p><strong>CustomObjectMapper</strong></p>\n<pre><code>public class CustomObjectMapper {\n\n    // Replaces the CDI producer for ObjectMapper built into Quarkus\n    @Singleton\n    @Produces\n    ObjectMapper objectMapper(Instance&lt;ObjectMapperCustomizer&gt; customizers) {\n        ObjectMapper mapper = new ObjectMapper(); // Custom `ObjectMapper`\n\n        // Apply all ObjectMapperCustomizer beans (incl. Quarkus)\n        for (ObjectMapperCustomizer customizer : customizers) {\n            customizer.customize(mapper);\n        }\n\n        return mapper;\n    }\n}\n</code></pre>\n<p><strong>RegisterCustomModuleCustomizer</strong></p>\n<pre><code>@Singleton\npublic class RegisterCustomModuleCustomizer implements ObjectMapperCustomizer {\n\n    @Inject\n    MockService mockService;\n\n    public void customize(ObjectMapper mapper) {\n        FilterProvider filters = new SimpleFilterProvider().addFilter(&quot;myFilter&quot;, new PropertyFilter(mockService));\n\n        mapper.setFilterProvider(filters);\n    }\n}\n</code></pre>\n<p><strong>PropertyFilter</strong></p>\n<pre><code>@AllArgsConstructor\npublic class PropertyFilter extends SimpleBeanPropertyFilter {\n\n    MockService mockService;\n\n    @Override\n    public void serializeAsField(Object pojo, JsonGenerator jgen, SerializerProvider provider, PropertyWriter writer) throws Exception {\n        if (include(writer)) {\n            List&lt;String&gt; availableFields = mockService.getAvailableFields();\n            if (availableFields.contains(writer.getName())) {\n                writer.serializeAsField(pojo, jgen, provider);\n            }\n        } else if (!jgen.canOmitFields()) { // since 2.3\n            writer.serializeAsOmittedField(pojo, jgen, provider);\n        }\n    }\n\n    @Override\n    protected boolean include(BeanPropertyWriter writer) {\n        return true;\n    }\n\n    @Override\n    protected boolean include(PropertyWriter writer) {\n        return true;\n    }\n}\n</code></pre>\n<p><strong>MockService</strong></p>\n<pre><code>@ApplicationScoped\npublic class MockService {\n    public List&lt;String&gt; getAvailableFields() {\n        return Arrays.asList(&quot;firstName&quot;, &quot;lastName&quot;, &quot;address&quot;);\n    }\n}\n</code></pre>\n<p>This solution works but there is in one bad moment that for each field a method from the service is called. How to resolve this problem?</p>\n"},{"tags":["java","constructor","stringbuilder"],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1660150368,"creation_date":1626304218,"answer_id":68386033,"question_id":68386004,"body_markdown":"You&#39;re not setting its length in that constructor, you&#39;re setting its [*capacity*](https://docs.oracle.com/javase/10/docs/api/java/lang/StringBuilder.html#%3Cinit%3E(int)).\r\nIts length is the number of `chars` actually *in* it and you haven&#39;t yet appended any characters to it.","title":"StringBuilder not being initialized to the length value given","body":"<p>You're not setting its length in that constructor, you're setting its <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/StringBuilder.html#%3Cinit%3E(int)\" rel=\"nofollow noreferrer\"><em>capacity</em></a>.\nIts length is the number of <code>chars</code> actually <em>in</em> it and you haven't yet appended any characters to it.</p>\n"},{"tags":[],"owner":{"account_id":13521152,"reputation":174,"user_id":9754336,"display_name":"D3PSI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1626304410,"creation_date":1626304410,"answer_id":68386052,"question_id":68386004,"body_markdown":"That is because you are setting the maximum capacity of the StringBuilder. The length represents the actual size of the constructed string. Let me demonstrate:\r\n```\r\nStringBuilder sb = new StringBuilder(5);\r\nSystem.out.println(&quot;Length after initialization with capacity: &quot; + sb.length());\r\nsb.append(&quot;abcd&quot;);\r\nSystem.out.println(&quot;Length after appending: &quot; + sb.length());\r\n```\r\nOutput:\r\n```\r\nLength after initialization with capacity: 0\r\nLength after appending: 4\r\n```","title":"StringBuilder not being initialized to the length value given","body":"<p>That is because you are setting the maximum capacity of the StringBuilder. The length represents the actual size of the constructed string. Let me demonstrate:</p>\n<pre><code>StringBuilder sb = new StringBuilder(5);\nSystem.out.println(&quot;Length after initialization with capacity: &quot; + sb.length());\nsb.append(&quot;abcd&quot;);\nSystem.out.println(&quot;Length after appending: &quot; + sb.length());\n</code></pre>\n<p>Output:</p>\n<pre><code>Length after initialization with capacity: 0\nLength after appending: 4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2871213,"reputation":2241,"user_id":2464528,"accept_rate":29,"display_name":"cbender"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626304707,"creation_date":1626304707,"answer_id":68386076,"question_id":68386004,"body_markdown":"As per the [official documentation for the `StringBuilder(int capacity)` constructor][1],\n\n&gt; Constructs a string builder with no characters in it and an initial capacity specified by the capacity argument.\n\nThere are no characters in the `StringBuilder` instance yet. It’s just setting an initial capacity of the resource it uses to store the data based on the `int` argument you passed in. \n\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html#StringBuilder(int)","title":"StringBuilder not being initialized to the length value given","body":"<p>As per the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html#StringBuilder(int)\" rel=\"nofollow noreferrer\">official documentation for the <code>StringBuilder(int capacity)</code> constructor</a>,</p>\n<blockquote>\n<p>Constructs a string builder with no characters in it and an initial capacity specified by the capacity argument.</p>\n</blockquote>\n<p>There are no characters in the <code>StringBuilder</code> instance yet. It’s just setting an initial capacity of the resource it uses to store the data based on the <code>int</code> argument you passed in.</p>\n"}],"owner":{"account_id":6525537,"reputation":55,"user_id":5048412,"display_name":"hsivru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":598,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68386033,"answer_count":3,"score":0,"last_activity_date":1660150368,"creation_date":1626303888,"question_id":68386004,"body_markdown":"I am trying to create a StringBuilder object with a given length, but every time I try to do so, the length of the StringBuilder object is printed as 0. Anyone know why? \r\n\r\n    String s = &quot;i&quot;;\r\n    StringBuilder sb = new StringBuilder(s.length()+1);\r\n    System.out.println(sb.length());\r\n\r\nIn the above code, the length of the StringBuilder object should be 2 (1 from the length of &quot;i&quot; + 1), but when I print the StringBuilder&#39;s length in Eclipse, I get 0. I changed the length to 17 and 100, but I still got 0 as ```sb```&#39;s length.","title":"StringBuilder not being initialized to the length value given","body":"<p>I am trying to create a StringBuilder object with a given length, but every time I try to do so, the length of the StringBuilder object is printed as 0. Anyone know why?</p>\n<pre><code>String s = &quot;i&quot;;\nStringBuilder sb = new StringBuilder(s.length()+1);\nSystem.out.println(sb.length());\n</code></pre>\n<p>In the above code, the length of the StringBuilder object should be 2 (1 from the length of &quot;i&quot; + 1), but when I print the StringBuilder's length in Eclipse, I get 0. I changed the length to 17 and 100, but I still got 0 as <code>sb</code>'s length.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":12549821,"reputation":578,"user_id":9131933,"display_name":"newbie"},"score":0,"creation_date":1607348735,"post_id":65180243,"comment_id":115235929,"body_markdown":"It would help if we could have some more details , for instance what is throwing the error ? Have you got the right jar on your classpath ?","body":"It would help if we could have some more details , for instance what is throwing the error ? Have you got the right jar on your classpath ?"},{"owner":{"account_id":386173,"reputation":679,"user_id":743793,"accept_rate":75,"display_name":"aeciftci"},"score":1,"creation_date":1627479127,"post_id":65180243,"comment_id":121167345,"body_markdown":"@selim did you solve this issue?","body":"@selim did you solve this issue?"}],"answers":[{"tags":[],"owner":{"account_id":26030941,"reputation":1,"user_id":19737185,"display_name":"Nesibe "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660150348,"creation_date":1660150061,"answer_id":73310006,"question_id":65180243,"body_markdown":"on pom.xml, after   `\r\n\r\n    &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n\r\n`  type                  \r\n          \r\n\r\n     &lt;argLine&gt;-Duser.language=en&lt;/argLine&gt;\r\n\r\n             and retry.","title":"io.restassured.internal.http.HttpResponseException: Not Found","body":"<p>on pom.xml, after   `</p>\n<pre><code>&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n</code></pre>\n<p>`  type</p>\n<pre><code> &lt;argLine&gt;-Duser.language=en&lt;/argLine&gt;\n\n         and retry.\n</code></pre>\n"}],"owner":{"account_id":20152087,"reputation":11,"user_id":14779179,"display_name":"selim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1120,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660150348,"creation_date":1607337960,"question_id":65180243,"body_markdown":"I am a new Java learner and looking forward to developing automation test engineering skills. I am currently having a boot camp for this purpose. I want to solve a problem with your bits of help. We are trying to send a request for a negative scenario like this;\r\n\r\n    When \r\n      I send a GET Request to the URL https://restful-booker.herokuapp.com/booking/1001\r\n    Then \r\n      HTTP Status code should be 404\r\n    And  \r\n      Status Line should be HTTP/1.1 404 Not Found\r\n\r\n    \r\n\r\n Although we have the same code with our instructor as this;\r\n \r\n\r\n    import org.junit.Test;\r\n    import static io.restassured.RestAssured.*;\r\n    import io.restassured.http.ContentType;\r\n    import io.restassured.response.Response;\r\n    \r\n    public class GetRequest02 {\r\n        @Test\r\n    \tpublic void get01() {\r\n        String url = &quot;https://restful-booker.herokuapp.com/booking/1001&quot;;\r\n        Response response = given().\r\n    \t\t\t\t\t\t\t\taccept(ContentType.JSON).\r\n    \t\t\t\t\t\t\twhen().\r\n    \t\t\t\t\t\t\t\tget(url);\r\n    \t\tresponse.prettyPrint();\r\n            response.\r\n    \t\t\t\tthen().\r\n    \t\t\t\tassertThat().\r\n    \t\t\t\tstatusCode(404).\r\n    \t\t\t\tstatusLine(&quot;HTTP/1.1 404 Not Found&quot;);\r\n    \t}\r\n    }\r\n\r\nHe gets green, but some of us get red with this message ;\r\n\r\n `io.restassured.internal.http.HttpResponseException: Not Found` \r\n\r\nWe could not find the solution? Can somebody help us?\r\n\r\nThank you for your interest...\r\n\r\n\r\n\r\n\r\n\r\n","title":"io.restassured.internal.http.HttpResponseException: Not Found","body":"<p>I am a new Java learner and looking forward to developing automation test engineering skills. I am currently having a boot camp for this purpose. I want to solve a problem with your bits of help. We are trying to send a request for a negative scenario like this;</p>\n<pre><code>When \n  I send a GET Request to the URL https://restful-booker.herokuapp.com/booking/1001\nThen \n  HTTP Status code should be 404\nAnd  \n  Status Line should be HTTP/1.1 404 Not Found\n</code></pre>\n<p>Although we have the same code with our instructor as this;</p>\n<pre><code>import org.junit.Test;\nimport static io.restassured.RestAssured.*;\nimport io.restassured.http.ContentType;\nimport io.restassured.response.Response;\n\npublic class GetRequest02 {\n    @Test\n    public void get01() {\n    String url = &quot;https://restful-booker.herokuapp.com/booking/1001&quot;;\n    Response response = given().\n                                accept(ContentType.JSON).\n                            when().\n                                get(url);\n        response.prettyPrint();\n        response.\n                then().\n                assertThat().\n                statusCode(404).\n                statusLine(&quot;HTTP/1.1 404 Not Found&quot;);\n    }\n}\n</code></pre>\n<p>He gets green, but some of us get red with this message ;</p>\n<p><code>io.restassured.internal.http.HttpResponseException: Not Found</code></p>\n<p>We could not find the solution? Can somebody help us?</p>\n<p>Thank you for your interest...</p>\n"},{"tags":["java","oop","testing"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1660150299,"post_id":73310028,"comment_id":129466911,"body_markdown":"Hello and welcome. You should specify the exact problem you&#39;re having and the context. It should calculate the fine based on what? Where is the data the method needs? What did you try and where did you get stuck? Please [edit] your question to add some much needed further detail.","body":"Hello and welcome. You should specify the exact problem you&#39;re having and the context. It should calculate the fine based on what? Where is the data the method needs? What did you try and where did you get stuck? Please <a href=\"https://stackoverflow.com/posts/73310028/edit\">edit</a> your question to add some much needed further detail."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1660150559,"post_id":73310028,"comment_id":129466989,"body_markdown":"`LocalDate`, `Period`, `ChronoUnit.DAYS.between`, and `BigDecimal` are your friends here. This has been covered many times already. Always search Stack Overflow before posting.","body":"<code>LocalDate</code>, <code>Period</code>, <code>ChronoUnit.DAYS.between</code>, and <code>BigDecimal</code> are your friends here. This has been covered many times already. Always search Stack Overflow before posting."}],"owner":{"account_id":20690614,"reputation":1,"user_id":19737166,"display_name":"AKS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1660150449,"answer_count":0,"score":0,"last_activity_date":1660150172,"creation_date":1660150172,"question_id":73310028,"body_markdown":"I was working on my project and got stuck in creating a calculateFine() method which should calculate fine. If the student does not return the book after 30 days he has to pay the fine of $5 per day. I am not using a database or anything plain simple java program\r\n","title":"JAVA : calculateFine() in my library management system without using database","body":"<p>I was working on my project and got stuck in creating a calculateFine() method which should calculate fine. If the student does not return the book after 30 days he has to pay the fine of $5 per day. I am not using a database or anything plain simple java program</p>\n"},{"tags":["java","apache-httpclient-4.x","apache-httpcomponents"],"answers":[{"tags":[],"owner":{"account_id":3610036,"reputation":3631,"user_id":3187995,"accept_rate":85,"display_name":"o.o"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660150070,"creation_date":1659979756,"answer_id":73281888,"question_id":73281294,"body_markdown":"I was able to fix this by using `StringEntity`. I converted the code in the question to the following:\r\n\r\n```java\r\nimport org.apache.http.client.methods.CloseableHttpResponse;\r\nimport org.apache.http.client.methods.HttpPost;\r\nimport org.apache.http.entity.StringEntity;\r\nimport org.apache.http.impl.client.CloseableHttpClient;\r\nimport org.apache.http.impl.client.HttpClients;\r\nimport org.json.JSONObject;\r\n\r\npublic static void main(String[] args) {\r\n    JSONObject jsonObject = new JSONObject();\r\n    jsonObject.put(&quot;id&quot;, 3);\r\n    jsonObject.put(&quot;name&quot;, &quot;Test&quot;);\r\n    jsonObject.put(&quot;accepted&quot;, false);\r\n    jsonObject.put(&quot;street&quot;, &quot;foo bar ave.&quot;);\r\n    \r\n    HttpPost httpPost = new HttpPost(&quot;http://my-url.com/test-api&quot;);\r\n    httpPost.setEntity(new StringEntity(jsonObject.toString()));\r\n    httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\r\n    httpPost.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n    \r\n    CloseableHttpClient httpClient = HttpClients.createDefault();\r\n    CloseableHttpResponse response = httpClient.execute(httpPost);\r\n    \r\n    // etc...\r\n}\r\n```\r\n\r\nAnd I was able to call the API in question without any errors. Hopefully, this helps someone!","title":"Apache HttpClient post request with non string values in body","body":"<p>I was able to fix this by using <code>StringEntity</code>. I converted the code in the question to the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.entity.StringEntity;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.json.JSONObject;\n\npublic static void main(String[] args) {\n    JSONObject jsonObject = new JSONObject();\n    jsonObject.put(&quot;id&quot;, 3);\n    jsonObject.put(&quot;name&quot;, &quot;Test&quot;);\n    jsonObject.put(&quot;accepted&quot;, false);\n    jsonObject.put(&quot;street&quot;, &quot;foo bar ave.&quot;);\n    \n    HttpPost httpPost = new HttpPost(&quot;http://my-url.com/test-api&quot;);\n    httpPost.setEntity(new StringEntity(jsonObject.toString()));\n    httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\n    httpPost.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\n    \n    CloseableHttpClient httpClient = HttpClients.createDefault();\n    CloseableHttpResponse response = httpClient.execute(httpPost);\n    \n    // etc...\n}\n</code></pre>\n<p>And I was able to call the API in question without any errors. Hopefully, this helps someone!</p>\n"}],"owner":{"account_id":3610036,"reputation":3631,"user_id":3187995,"accept_rate":85,"display_name":"o.o"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1398,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73281888,"answer_count":1,"score":0,"last_activity_date":1660150070,"creation_date":1659976557,"question_id":73281294,"body_markdown":"I&#39;m using Apache HttpClient version 4.5.13 and I&#39;m having trouble creating my POST request body. From the tutorials I&#39;ve seen online, they tell me to use `NameValuePair` when creating the request entity. However, `NameValuePair` only accepts String for the values.\r\n\r\nHow can I set Integer, Double, and Booleans as well? The API I&#39;m calling has a mixture of them in the JSON body. For example, my body can look like this:\r\n\r\n```json\r\n{\r\n  &quot;id&quot;: 3,\r\n  &quot;name&quot;: &quot;Test&quot;,\r\n  &quot;accepted&quot;: false,\r\n  &quot;street&quot;: &quot;foo bar ave.&quot;\r\n}\r\n```\r\n\r\nThis is how the documentations recommend I create the body:\r\n\r\n```java\r\nimport org.apache.http.NameValuePair;\r\nimport org.apache.http.client.entity.UrlEncodedFormEntity;\r\nimport org.apache.http.client.methods.CloseableHttpResponse;\r\nimport org.apache.http.client.methods.HttpPost;\r\nimport org.apache.http.impl.client.CloseableHttpClient;\r\nimport org.apache.http.impl.client.HttpClients;\r\nimport org.apache.http.message.BasicNameValuePair;\r\n\r\npublic static void main(String[] args) {\r\n    List&lt;NameValuePair&gt; body = new ArrayList&lt;NameValuePair&gt;();\r\n    body.add(new BasicNameValuePair(&quot;id&quot;, Integer.valueOf(3)));\r\n    body.add(new BasicNameValuePair(&quot;name&quot;, &quot;Test&quot;));\r\n    body.add(new BasicNameValuePair(&quot;accepted&quot;, Boolean.valueOf(false)));\r\n    body.add(new BasicNameValuePair(&quot;street&quot;, &quot;foo bar ave.&quot;));\r\n    \r\n    HttpPost httpPost = new HttpPost(&quot;http://my-url.com/test-api&quot;);\r\n    httpPost.setEntity(new UrlEncodedFormEntity(body));\r\n    httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\r\n    httpPost.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n    \r\n    CloseableHttpClient httpClient = HttpClients.createDefault();\r\n    CloseableHttpResponse response = httpClient.execute(httpPost);\r\n    \r\n    // etc...\r\n}\r\n```\r\n\r\nBut as you can see, I have to convert everything to String which the API I&#39;m calling rejects because of the mismatch of data types. Is there some other way I can create the request which accepts various data types?","title":"Apache HttpClient post request with non string values in body","body":"<p>I'm using Apache HttpClient version 4.5.13 and I'm having trouble creating my POST request body. From the tutorials I've seen online, they tell me to use <code>NameValuePair</code> when creating the request entity. However, <code>NameValuePair</code> only accepts String for the values.</p>\n<p>How can I set Integer, Double, and Booleans as well? The API I'm calling has a mixture of them in the JSON body. For example, my body can look like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;id&quot;: 3,\n  &quot;name&quot;: &quot;Test&quot;,\n  &quot;accepted&quot;: false,\n  &quot;street&quot;: &quot;foo bar ave.&quot;\n}\n</code></pre>\n<p>This is how the documentations recommend I create the body:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.http.NameValuePair;\nimport org.apache.http.client.entity.UrlEncodedFormEntity;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.message.BasicNameValuePair;\n\npublic static void main(String[] args) {\n    List&lt;NameValuePair&gt; body = new ArrayList&lt;NameValuePair&gt;();\n    body.add(new BasicNameValuePair(&quot;id&quot;, Integer.valueOf(3)));\n    body.add(new BasicNameValuePair(&quot;name&quot;, &quot;Test&quot;));\n    body.add(new BasicNameValuePair(&quot;accepted&quot;, Boolean.valueOf(false)));\n    body.add(new BasicNameValuePair(&quot;street&quot;, &quot;foo bar ave.&quot;));\n    \n    HttpPost httpPost = new HttpPost(&quot;http://my-url.com/test-api&quot;);\n    httpPost.setEntity(new UrlEncodedFormEntity(body));\n    httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\n    httpPost.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\n    \n    CloseableHttpClient httpClient = HttpClients.createDefault();\n    CloseableHttpResponse response = httpClient.execute(httpPost);\n    \n    // etc...\n}\n</code></pre>\n<p>But as you can see, I have to convert everything to String which the API I'm calling rejects because of the mismatch of data types. Is there some other way I can create the request which accepts various data types?</p>\n"},{"tags":["java","spring","spring-boot","controller","config"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1660194206,"post_id":73309936,"comment_id":129476272,"body_markdown":"No it shouldn&#39;t. `permitAll` means everyone authenticated (anonymously or otherwise) can access it. If you do&#39;t want any filter applied you need to to configure that differently.","body":"No it shouldn&#39;t. <code>permitAll</code> means everyone authenticated (anonymously or otherwise) can access it. If you do&#39;t want any filter applied you need to to configure that differently."}],"owner":{"account_id":13335294,"reputation":13,"user_id":12371982,"display_name":"Taufiq Naziruddin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1302,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660149771,"creation_date":1660149771,"question_id":73309936,"body_markdown":"I have created a test Spring Boot application with Spring Security dependency added.  I created the following configuration for Spring Security:\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig {\r\n\r\n\t@Autowired\r\n\tprivate BCryptPasswordEncoder bCryptPasswordEncoder;\r\n\t@Autowired\r\n\tprivate UserDetailsService service;\r\n\t@Autowired\r\n\tprivate InvaildUserAuthenticationEntryPoint authenticationEntryPoint;\r\n\t@Autowired\r\n\tprivate SecurityFilter securityFilter;\r\n\t\r\n\r\n    @Bean\r\n    public AuthenticationManager authManager(HttpSecurity http) \r\n      throws Exception {\r\n        return http.getSharedObject(AuthenticationManagerBuilder.class)\r\n          .userDetailsService(service)\r\n          .passwordEncoder(bCryptPasswordEncoder)\r\n          .and()\r\n          .build();\r\n    }\r\n    \r\n\t\r\n  @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \thttp\r\n\t\t.csrf().disable()\r\n\t\t.authorizeRequests()\r\n\t\t.antMatchers(&quot;/register&quot;,&quot;/confirmemail/*&quot;,&quot;/test&quot;).permitAll()\r\n\t\t.anyRequest().authenticated()\r\n\t\t.and()\r\n\t\t.exceptionHandling()\r\n\t\t.authenticationEntryPoint(authenticationEntryPoint)\r\n\t\t.and()\r\n\t\t.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n\t\t.and()\r\n\t\t.addFilterBefore(securityFilter, UsernamePasswordAuthenticationFilter.class);\r\n\t\t;\r\n\t\treturn http.build();\r\n    }\r\n}\r\n\r\n```\r\nQuestion:  When I have in my security configuration given the url permitAll, should it not bypass the security filters? Why then does it pass through the OncePerRequestFilter.\r\n\r\n\r\nHere is the stack trace of the error I get:\r\n```\r\nio.jsonwebtoken.SignatureException: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.\r\n\tat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:354) ~[jjwt-0.9.1.jar:0.9.1]\r\n\tat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:481) ~[jjwt-0.9.1.jar:0.9.1]\r\n\tat io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:541) ~[jjwt-0.9.1.jar:0.9.1]\r\n\tat com.fbh.erp10.utility.JwtUtil.getUserNameFromJwtToken(JwtUtil.java:126) ~[classes/:na]\r\n\tat com.fbh.erp10.config.SecurityFilter.doFilterInternal(SecurityFilter.java:46) ~[classes/:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:356) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:867) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1760) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```\r\n","title":"Spring Boot Security OncePerRequestFilter behavior for permitted URLs","body":"<p>I have created a test Spring Boot application with Spring Security dependency added.  I created the following configuration for Spring Security:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    @Autowired\n    private BCryptPasswordEncoder bCryptPasswordEncoder;\n    @Autowired\n    private UserDetailsService service;\n    @Autowired\n    private InvaildUserAuthenticationEntryPoint authenticationEntryPoint;\n    @Autowired\n    private SecurityFilter securityFilter;\n    \n\n    @Bean\n    public AuthenticationManager authManager(HttpSecurity http) \n      throws Exception {\n        return http.getSharedObject(AuthenticationManagerBuilder.class)\n          .userDetailsService(service)\n          .passwordEncoder(bCryptPasswordEncoder)\n          .and()\n          .build();\n    }\n    \n    \n  @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n        .csrf().disable()\n        .authorizeRequests()\n        .antMatchers(&quot;/register&quot;,&quot;/confirmemail/*&quot;,&quot;/test&quot;).permitAll()\n        .anyRequest().authenticated()\n        .and()\n        .exceptionHandling()\n        .authenticationEntryPoint(authenticationEntryPoint)\n        .and()\n        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        .addFilterBefore(securityFilter, UsernamePasswordAuthenticationFilter.class);\n        ;\n        return http.build();\n    }\n}\n\n</code></pre>\n<p>Question:  When I have in my security configuration given the url permitAll, should it not bypass the security filters? Why then does it pass through the OncePerRequestFilter.</p>\n<p>Here is the stack trace of the error I get:</p>\n<pre><code>io.jsonwebtoken.SignatureException: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.\n    at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:354) ~[jjwt-0.9.1.jar:0.9.1]\n    at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:481) ~[jjwt-0.9.1.jar:0.9.1]\n    at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:541) ~[jjwt-0.9.1.jar:0.9.1]\n    at com.fbh.erp10.utility.JwtUtil.getUserNameFromJwtToken(JwtUtil.java:126) ~[classes/:na]\n    at com.fbh.erp10.config.SecurityFilter.doFilterInternal(SecurityFilter.java:46) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:350) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) ~[spring-security-web-6.0.0-M6.jar:6.0.0-M6]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.0-M5.jar:6.0.0-M5]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:356) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:867) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1760) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.0.22.jar:10.0.22]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n"},{"tags":["java","search","lucene","query-parser"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1660055249,"post_id":73290954,"comment_id":129439129,"body_markdown":"&quot;_new to lucene and dont know where to start_&quot; - I would start by reviewing the [official Lucene demo](https://lucene.apache.org/core/9_3_0/demo/index.html). If you have a specific problem with a specific part of your code, you can share that as a [mre].","body":"&quot;<i>new to lucene and dont know where to start</i>&quot; - I would start by reviewing the <a href=\"https://lucene.apache.org/core/9_3_0/demo/index.html\" rel=\"nofollow noreferrer\">official Lucene demo</a>. If you have a specific problem with a specific part of your code, you can share that as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1660055589,"post_id":73290954,"comment_id":129439276,"body_markdown":"(Also, separately, (a) it&#39;s not clear to me why the search string `l/id//gif` would be expected to find `lucene/index/docs/img/join.gif`; and (b) GitHub has a sophisticated set of [search options](https://github.com/search/advanced). Are you saying you want to create something that does all of that?)","body":"(Also, separately, (a) it&#39;s not clear to me why the search string <code>l&#47;id&#47;&#47;gif</code> would be expected to find <code>lucene&#47;index&#47;docs&#47;img&#47;join.gif</code>; and (b) GitHub has a sophisticated set of <a href=\"https://github.com/search/advanced\" rel=\"nofollow noreferrer\">search options</a>. Are you saying you want to create something that does all of that?)"},{"owner":{"account_id":25489160,"reputation":49,"user_id":19284258,"display_name":"ReallyNicePerson"},"score":0,"creation_date":1660132815,"post_id":73290954,"comment_id":129459708,"body_markdown":"@andrewJames I edited my post. Could You look at it?","body":"@andrewJames I edited my post. Could You look at it?"}],"answers":[{"tags":[],"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660149747,"creation_date":1660144032,"answer_id":73308637,"question_id":73290954,"body_markdown":"The problem here is you are using a `TextField`:\r\n\r\n```java\r\ndoc.add(new Field(&quot;fieldname&quot;, text, TextField.TYPE_STORED));\r\n```\r\n\r\nThis field, when used with the standard analyzer, causes the contents of that field to be tokenized into the following separate tokens in the Lucene index (in alphabetic order):\r\n\r\nInput value: `lucene/queryparser/docs/xml/img/plus.gif`\r\n\r\nResulting indexed tokens:\r\n\r\n - `docs`\r\n - `img`\r\n - `lucene`\r\n - `plus.gif`\r\n - `queryparser`\r\n - `xml`\r\n\r\nNow, when you consider your wildcard query `l*q*d*o*c*s*p*g*`, you can see that this single query term does not match any of the tokens in the index.\r\n\r\nBut a query such as `l*` matches one token: `lucene` - so that will find your one and only document.\r\n\r\n---\r\n\r\nThere are various ways to solve this - but in your specific case, given you want to treat `lucene/queryparser/docs/xml/img/plus.gif` as a single string, then you can use a `StringField` instead of a `TextField`. This class does not split the input into tokens. Instead it indexes the input without applying the Standard Analyzer.\r\n\r\n```java\r\ndoc.add(new StringField(FIELD_NAME, documentBody, Field.Store.YES));\r\n```\r\n\r\nThis generates a single token in the index:\r\n\r\n - `lucene/queryparser/docs/xml/img/plus.gif`\r\n\r\nNow you can see that your wildcard query `l*q*d*o*c*s*p*g*` should (and does) match that token.\r\n\r\n---\r\n\r\nSee the following:\r\n\r\n - [`Field`](https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/document/Field.html) - specifically, take a look at the list of subclasses. These are &quot;predefined&quot; fields you can use without needing to use `new Field(...)`- like my `new StringField(...)` example above.\r\n - [`TextField`](https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/document/TextField.html) - &quot;_A field that is indexed and tokenized, without term vectors. For example this would be used on a &#39;body&#39; field, that contains the bulk of a document&#39;s text._&quot;\r\n - [`StringField`](https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/document/StringField.html) - &quot;_A field that is indexed but not tokenized: the entire String value is indexed as a single token._&quot;\r\n","title":"Make a GitHub-like file finder using Lucene","body":"<p>The problem here is you are using a <code>TextField</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>doc.add(new Field(&quot;fieldname&quot;, text, TextField.TYPE_STORED));\n</code></pre>\n<p>This field, when used with the standard analyzer, causes the contents of that field to be tokenized into the following separate tokens in the Lucene index (in alphabetic order):</p>\n<p>Input value: <code>lucene/queryparser/docs/xml/img/plus.gif</code></p>\n<p>Resulting indexed tokens:</p>\n<ul>\n<li><code>docs</code></li>\n<li><code>img</code></li>\n<li><code>lucene</code></li>\n<li><code>plus.gif</code></li>\n<li><code>queryparser</code></li>\n<li><code>xml</code></li>\n</ul>\n<p>Now, when you consider your wildcard query <code>l*q*d*o*c*s*p*g*</code>, you can see that this single query term does not match any of the tokens in the index.</p>\n<p>But a query such as <code>l*</code> matches one token: <code>lucene</code> - so that will find your one and only document.</p>\n<hr />\n<p>There are various ways to solve this - but in your specific case, given you want to treat <code>lucene/queryparser/docs/xml/img/plus.gif</code> as a single string, then you can use a <code>StringField</code> instead of a <code>TextField</code>. This class does not split the input into tokens. Instead it indexes the input without applying the Standard Analyzer.</p>\n<pre class=\"lang-java prettyprint-override\"><code>doc.add(new StringField(FIELD_NAME, documentBody, Field.Store.YES));\n</code></pre>\n<p>This generates a single token in the index:</p>\n<ul>\n<li><code>lucene/queryparser/docs/xml/img/plus.gif</code></li>\n</ul>\n<p>Now you can see that your wildcard query <code>l*q*d*o*c*s*p*g*</code> should (and does) match that token.</p>\n<hr />\n<p>See the following:</p>\n<ul>\n<li><a href=\"https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/document/Field.html\" rel=\"nofollow noreferrer\"><code>Field</code></a> - specifically, take a look at the list of subclasses. These are &quot;predefined&quot; fields you can use without needing to use <code>new Field(...)</code>- like my <code>new StringField(...)</code> example above.</li>\n<li><a href=\"https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/document/TextField.html\" rel=\"nofollow noreferrer\"><code>TextField</code></a> - &quot;<em>A field that is indexed and tokenized, without term vectors. For example this would be used on a 'body' field, that contains the bulk of a document's text.</em>&quot;</li>\n<li><a href=\"https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/document/StringField.html\" rel=\"nofollow noreferrer\"><code>StringField</code></a> - &quot;<em>A field that is indexed but not tokenized: the entire String value is indexed as a single token.</em>&quot;</li>\n</ul>\n"}],"owner":{"account_id":25489160,"reputation":49,"user_id":19284258,"display_name":"ReallyNicePerson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73308637,"answer_count":1,"score":1,"last_activity_date":1660149747,"creation_date":1660043931,"question_id":73290954,"body_markdown":"I have to make a file finder using Lucene. I thought of using wild card query.\r\n\r\nText in a document: `lucene/queryparser/docs/xml/img/plus.gif`  \r\n\r\nSearch string: `lqdocspg`\r\n\r\nIt should find:  \r\n**l**ucene/**q**ueryparser/**docs**/xml/img/**p**lus.**g**if\r\n(it is the olny document for now, so it should return that it found 1 match.)\r\n\r\nHere is my code:\r\n\r\n    public static void main(String[] args) throws IOException, ParseException {\r\n        Analyzer analyzer = new StandardAnalyzer();\r\n\r\n        Path indexPath = Files.createTempDirectory(&quot;tempIndex&quot;);\r\n        Directory directory = FSDirectory.open(indexPath);\r\n        IndexWriterConfig config = new IndexWriterConfig(analyzer);\r\n        IndexWriter iwriter = new IndexWriter(directory, config);\r\n        Document doc = new Document();\r\n        String text = &quot;lucene/queryparser/docs/xml/img/plus.gif&quot;;\r\n        doc.add(new Field(&quot;fieldname&quot;, text, TextField.TYPE_STORED));\r\n        iwriter.addDocument(doc);\r\n        iwriter.close();\r\n\r\n        // Now search the index:\r\n        DirectoryReader ireader = DirectoryReader.open(directory);\r\n        IndexSearcher isearcher = new IndexSearcher(ireader);\r\n        // Parse a simple query that searches for &quot;text&quot;:\r\n        //QueryParser parser = new QueryParser(&quot;fieldname&quot;, analyzer);\r\n        //Query query = parser.parse(&quot;l*q*d*o*c*s*p*g*&quot;);\r\n        Query query = new WildcardQuery(new Term(&quot;fieldname&quot;, &quot;*l&quot;));\r\n        ScoreDoc[] hits = isearcher.search(query, 10).scoreDocs;\r\n        System.out.println(isearcher.doc(0).get(&quot;fieldname&quot;));\r\n        System.out.println(&quot;Search terms found in :: &quot; + hits.length + &quot; files&quot;);\r\n        assertEquals(1, hits.length);\r\n\r\n\r\n\r\n        // Iterate through the results:\r\n        for (ScoreDoc hit : hits) {\r\n            Document hitDoc = isearcher.doc(hit.doc);\r\n            assertEquals(&quot;lucene/queryparser/docs/xml/img/plus.gif&quot;, hitDoc.get(&quot;fieldname&quot;));\r\n        }\r\n        ireader.close();\r\n        directory.close();\r\n        IOUtils.rm(indexPath);\r\n    }\r\n\r\nWhen i am passing `*l` or `l*` or `lucene* *lucene` or any different like `q*` it&#39;s working and returns that it found match in one file. \r\nBut when im trying to pass what i want to find which is `*l*q*d*o*c*s*p*g*` it returns 0 found matches. I dont know what am i doing wrong. Asterisk means that between letters there can be anything right? \r\n\r\n\r\n","title":"Make a GitHub-like file finder using Lucene","body":"<p>I have to make a file finder using Lucene. I thought of using wild card query.</p>\n<p>Text in a document: <code>lucene/queryparser/docs/xml/img/plus.gif</code></p>\n<p>Search string: <code>lqdocspg</code></p>\n<p>It should find:<br />\n<strong>l</strong>ucene/<strong>q</strong>ueryparser/<strong>docs</strong>/xml/img/<strong>p</strong>lus.<strong>g</strong>if\n(it is the olny document for now, so it should return that it found 1 match.)</p>\n<p>Here is my code:</p>\n<pre><code>public static void main(String[] args) throws IOException, ParseException {\n    Analyzer analyzer = new StandardAnalyzer();\n\n    Path indexPath = Files.createTempDirectory(&quot;tempIndex&quot;);\n    Directory directory = FSDirectory.open(indexPath);\n    IndexWriterConfig config = new IndexWriterConfig(analyzer);\n    IndexWriter iwriter = new IndexWriter(directory, config);\n    Document doc = new Document();\n    String text = &quot;lucene/queryparser/docs/xml/img/plus.gif&quot;;\n    doc.add(new Field(&quot;fieldname&quot;, text, TextField.TYPE_STORED));\n    iwriter.addDocument(doc);\n    iwriter.close();\n\n    // Now search the index:\n    DirectoryReader ireader = DirectoryReader.open(directory);\n    IndexSearcher isearcher = new IndexSearcher(ireader);\n    // Parse a simple query that searches for &quot;text&quot;:\n    //QueryParser parser = new QueryParser(&quot;fieldname&quot;, analyzer);\n    //Query query = parser.parse(&quot;l*q*d*o*c*s*p*g*&quot;);\n    Query query = new WildcardQuery(new Term(&quot;fieldname&quot;, &quot;*l&quot;));\n    ScoreDoc[] hits = isearcher.search(query, 10).scoreDocs;\n    System.out.println(isearcher.doc(0).get(&quot;fieldname&quot;));\n    System.out.println(&quot;Search terms found in :: &quot; + hits.length + &quot; files&quot;);\n    assertEquals(1, hits.length);\n\n\n\n    // Iterate through the results:\n    for (ScoreDoc hit : hits) {\n        Document hitDoc = isearcher.doc(hit.doc);\n        assertEquals(&quot;lucene/queryparser/docs/xml/img/plus.gif&quot;, hitDoc.get(&quot;fieldname&quot;));\n    }\n    ireader.close();\n    directory.close();\n    IOUtils.rm(indexPath);\n}\n</code></pre>\n<p>When i am passing <code>*l</code> or <code>l*</code> or <code>lucene* *lucene</code> or any different like <code>q*</code> it's working and returns that it found match in one file.\nBut when im trying to pass what i want to find which is <code>*l*q*d*o*c*s*p*g*</code> it returns 0 found matches. I dont know what am i doing wrong. Asterisk means that between letters there can be anything right?</p>\n"},{"tags":["java","spring","mongodb","spring-data"],"comments":[{"owner":{"account_id":5629789,"reputation":717,"user_id":4457053,"accept_rate":50,"display_name":"pDer666"},"score":6,"creation_date":1521552452,"post_id":49385130,"comment_id":85771840,"body_markdown":"@Indexed(unique = true)","body":"@Indexed(unique = true)"},{"owner":{"account_id":1595539,"reputation":387,"user_id":1477769,"accept_rate":20,"display_name":"StSch"},"score":3,"creation_date":1521609952,"post_id":49385130,"comment_id":85798845,"body_markdown":"So it only works in combination with @Indexed?","body":"So it only works in combination with @Indexed?"},{"owner":{"account_id":450009,"reputation":1499,"user_id":845117,"display_name":"Dirk Schumacher"},"score":0,"creation_date":1680036953,"post_id":49385130,"comment_id":133828031,"body_markdown":"I found this stackoverflow question/answer which helped me on this: https://stackoverflow.com/a/62217147/845117 (None of the answers here helped me; running Springboot 3.0.2, Mongo)","body":"I found this stackoverflow question/answer which helped me on this: <a href=\"https://stackoverflow.com/a/62217147/845117\">stackoverflow.com/a/62217147/845117</a> (None of the answers here helped me; running Springboot 3.0.2, Mongo)"}],"answers":[{"tags":[],"owner":{"account_id":13342452,"reputation":557,"user_id":9630273,"display_name":"V.Aggarwal"},"down_vote_count":2,"up_vote_count":24,"is_accepted":false,"score":22,"last_activity_date":1570789516,"creation_date":1570789516,"answer_id":58339272,"question_id":49385130,"body_markdown":"Mongodb needs to create and index a field in order to know whether the field is unique or not.\r\n\r\n    @Indexed(unique=true)\r\n    private String email;","title":"Spring Data: Unique field in MongoDB document","body":"<p>Mongodb needs to create and index a field in order to know whether the field is unique or not.</p>\n\n<pre><code>@Indexed(unique=true)\nprivate String email;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3594130,"reputation":1650,"user_id":2999385,"accept_rate":50,"display_name":"Ahmad Vatani"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1600688331,"creation_date":1600688331,"answer_id":63991510,"question_id":49385130,"body_markdown":"First, use `Indexed` annotation above of your field in your model as shown below:\r\n\r\n\r\n    @Indexed(unique = true)\r\n    private String email;\r\n\r\n\r\nAlso, you should programmatically define your index. You should use the below code when defining your `MongoTemplate`.\r\n\r\n    mongoTemplate.indexOps(&quot;YOUR_COLLECTION_NAME&quot;).ensureIndex(new Index(&quot;YOUR_FEILD_OF_COLLECTION&quot;, Direction.ASC).unique());\r\n\r\nFor your case, you should use:\r\n\r\n    mongoTemplate.indexOps(&quot;users&quot;).ensureIndex(new Index(&quot;email&quot;, Direction.ASC).unique());\r\n","title":"Spring Data: Unique field in MongoDB document","body":"<p>First, use <code>Indexed</code> annotation above of your field in your model as shown below:</p>\n<pre><code>@Indexed(unique = true)\nprivate String email;\n</code></pre>\n<p>Also, you should programmatically define your index. You should use the below code when defining your <code>MongoTemplate</code>.</p>\n<pre><code>mongoTemplate.indexOps(&quot;YOUR_COLLECTION_NAME&quot;).ensureIndex(new Index(&quot;YOUR_FEILD_OF_COLLECTION&quot;, Direction.ASC).unique());\n</code></pre>\n<p>For your case, you should use:</p>\n<pre><code>mongoTemplate.indexOps(&quot;users&quot;).ensureIndex(new Index(&quot;email&quot;, Direction.ASC).unique());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16115987,"reputation":333,"user_id":11633100,"display_name":"Mohamad Chamanmotlagh"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1636808032,"creation_date":1625146383,"answer_id":68211174,"question_id":49385130,"body_markdown":"As of Spring Data MongoDB 3.0, automatic index creation is turned off by default. So basically, besides using `@Indexed`, you have to configure default indexing options. What you need to do is to make `spring.data.mongodb.auto-index-creation=true` in the `application.properties` file, and then `@Indexed` will work like a charm!","title":"Spring Data: Unique field in MongoDB document","body":"<p>As of Spring Data MongoDB 3.0, automatic index creation is turned off by default. So basically, besides using <code>@Indexed</code>, you have to configure default indexing options. What you need to do is to make <code>spring.data.mongodb.auto-index-creation=true</code> in the <code>application.properties</code> file, and then <code>@Indexed</code> will work like a charm!</p>\n"},{"tags":[],"owner":{"account_id":18746148,"reputation":109,"user_id":13668293,"display_name":"Yassine Moumen"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1629269931,"creation_date":1626274458,"answer_id":68380387,"question_id":49385130,"body_markdown":"This worked for me, but you have to delete your database and then re-run your application\r\n\r\n     spring.data.mongodb.auto-index-creation=true\r\n\r\n","title":"Spring Data: Unique field in MongoDB document","body":"<p>This worked for me, but you have to delete your database and then re-run your application</p>\n<pre><code> spring.data.mongodb.auto-index-creation=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4730203,"reputation":11,"user_id":3826066,"display_name":"Robin Xavier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643627967,"creation_date":1643627967,"answer_id":70925084,"question_id":49385130,"body_markdown":"You can try one of the below solutions, it worked for me.\r\n\r\nNote: Please delete your db before you re-try with the below solutions.\r\n\r\nSolution - 1\r\n\r\n    @Indexed(unique = true, background = true)\r\n    private String emailId;\r\n\r\n\r\nSolution - 2 \r\n\r\nAdd `spring.data.mongodb.auto-index-creation=true` to your application.properties file.\r\n\r\nor \r\n\r\nAdd `spring.data.mongodb.auto-index-creation:true` to your yaml file\r\n\r\n","title":"Spring Data: Unique field in MongoDB document","body":"<p>You can try one of the below solutions, it worked for me.</p>\n<p>Note: Please delete your db before you re-try with the below solutions.</p>\n<p>Solution - 1</p>\n<pre><code>@Indexed(unique = true, background = true)\nprivate String emailId;\n</code></pre>\n<p>Solution - 2</p>\n<p>Add <code>spring.data.mongodb.auto-index-creation=true</code> to your application.properties file.</p>\n<p>or</p>\n<p>Add <code>spring.data.mongodb.auto-index-creation:true</code> to your yaml file</p>\n"},{"tags":[],"owner":{"account_id":25551728,"reputation":1,"user_id":19335992,"display_name":"Kőv&#225;ri Krist&#243;f"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655197121,"creation_date":1655197121,"answer_id":72614201,"question_id":49385130,"body_markdown":"If anyone has a custom Mongo configuration -&gt; spring.data.mongodb.auto-index-creation:true won&#39;t work. Instead try adding this to your MongoConfig:\r\n\r\n           @Override\r\n           public boolean autoIndexCreation() {\r\n           return true;\r\n           }\r\nIt solved the problem for me....","title":"Spring Data: Unique field in MongoDB document","body":"<p>If anyone has a custom Mongo configuration -&gt; spring.data.mongodb.auto-index-creation:true won't work. Instead try adding this to your MongoConfig:</p>\n<pre><code>       @Override\n       public boolean autoIndexCreation() {\n       return true;\n       }\n</code></pre>\n<p>It solved the problem for me....</p>\n"}],"owner":{"account_id":1595539,"reputation":387,"user_id":1477769,"accept_rate":20,"display_name":"StSch"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29894,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":6,"score":20,"last_activity_date":1660149530,"creation_date":1521551427,"question_id":49385130,"body_markdown":"let&#39;s say I have the following database entity:\r\n\r\n    @Document(collection = &quot;users&quot;)\r\n    public class User {\r\n        \r\n        @Id\r\n        private String id;\r\n\r\n        private String firstname;\r\n\r\n        private String lastname;\r\n\r\n        private String email; \r\n\r\n    }\r\n\r\nHow can I enforce the field email to be unique? That means MongoDB should check if a user record with this email address already exists when the application tries to save the entity.\r\n","title":"Spring Data: Unique field in MongoDB document","body":"<p>let's say I have the following database entity:</p>\n<pre><code>@Document(collection = &quot;users&quot;)\npublic class User {\n    \n    @Id\n    private String id;\n\n    private String firstname;\n\n    private String lastname;\n\n    private String email; \n\n}\n</code></pre>\n<p>How can I enforce the field email to be unique? That means MongoDB should check if a user record with this email address already exists when the application tries to save the entity.</p>\n"},{"tags":["java","api","date","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":2386002,"reputation":5151,"user_id":2086966,"accept_rate":73,"display_name":"smilyface"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660149031,"creation_date":1660149031,"answer_id":73309763,"question_id":73305621,"body_markdown":"Yes, it&#39;s possible. You can try something like this,\r\n\r\n\r\n    public Date getHolidayVisApi(Date businessDate){\r\n        \r\n            RestTemplate restTemplate = new RestTemplate();\r\n    \r\n            String resourceUrl = &quot;http://localhost:8080/allholidays&quot;;\r\n        \r\n            // Set HTTP headers in the request callback\r\n            RequestCallback requestCallback = request -&gt; {\r\n                ObjectMapper mapper = new ObjectMapper();\r\n                    mapper.writeValue(request.getBody(), \r\n                            businessDate);\r\n    \r\n                    request.getHeaders()\r\n                     .setAccept(Arrays.asList(\r\n                             MediaType.APPLICATION_OCTET_STREAM, \r\n                             MediaType.ALL));\r\n                    };\r\n    \r\n            // Processing the response. Here we are extracting the \r\n            // response and copying the file to a folder in the server.\r\n            ResponseExtractor&lt;Void&gt; responseExtractor = response -&gt; {\r\n                     Path path = Paths.get(&quot;c:/Users/smilyFace/Documents/response.txt&quot;);\r\n                     Files.copy(response.getBody(), path);\r\n                     return null;\r\n                 };\r\n    \r\n            restTemplate.execute(resourceUrl, \r\n                HttpMethod.GET, \r\n                requestCallback, \r\n                responseExtractor );    \r\n    }\r\n\r\n","title":"Send date to API and get a response using Rest Template","body":"<p>Yes, it's possible. You can try something like this,</p>\n<pre><code>public Date getHolidayVisApi(Date businessDate){\n    \n        RestTemplate restTemplate = new RestTemplate();\n\n        String resourceUrl = &quot;http://localhost:8080/allholidays&quot;;\n    \n        // Set HTTP headers in the request callback\n        RequestCallback requestCallback = request -&gt; {\n            ObjectMapper mapper = new ObjectMapper();\n                mapper.writeValue(request.getBody(), \n                        businessDate);\n\n                request.getHeaders()\n                 .setAccept(Arrays.asList(\n                         MediaType.APPLICATION_OCTET_STREAM, \n                         MediaType.ALL));\n                };\n\n        // Processing the response. Here we are extracting the \n        // response and copying the file to a folder in the server.\n        ResponseExtractor&lt;Void&gt; responseExtractor = response -&gt; {\n                 Path path = Paths.get(&quot;c:/Users/smilyFace/Documents/response.txt&quot;);\n                 Files.copy(response.getBody(), path);\n                 return null;\n             };\n\n        restTemplate.execute(resourceUrl, \n            HttpMethod.GET, \n            requestCallback, \n            responseExtractor );    \n}\n</code></pre>\n"}],"owner":{"account_id":25845090,"reputation":11,"user_id":19580064,"display_name":"HinataDev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660149031,"creation_date":1660131427,"question_id":73305621,"body_markdown":"I have to developing my first Java program which will send Date value to API and it would send back response.\r\nIf the response is null, nothing to be done. If the response a Date value, it is a holiday.\r\nThis is the model class\r\n\r\n```\r\nPublic class Calendar holiday {\r\nprivate Date calendar_date;\r\nprivate String description;\r\n}\r\n```\r\nI tried to use rest template with the execute method, im not sure if this method would send the date value and get a response callback.\r\n\r\n```\r\npublic Date getHolidayVisApi(Date businessDate){\r\nRestTemplate restTemplate= new RestTemplate;\r\nreturn restTemplate.execute(url,Http method.GET,...);}\r\n```\r\n\r\nThanks in advance for your help.\r\n","title":"Send date to API and get a response using Rest Template","body":"<p>I have to developing my first Java program which will send Date value to API and it would send back response.\nIf the response is null, nothing to be done. If the response a Date value, it is a holiday.\nThis is the model class</p>\n<pre><code>Public class Calendar holiday {\nprivate Date calendar_date;\nprivate String description;\n}\n</code></pre>\n<p>I tried to use rest template with the execute method, im not sure if this method would send the date value and get a response callback.</p>\n<pre><code>public Date getHolidayVisApi(Date businessDate){\nRestTemplate restTemplate= new RestTemplate;\nreturn restTemplate.execute(url,Http method.GET,...);}\n</code></pre>\n<p>Thanks in advance for your help.</p>\n"},{"tags":["java","selenium","automation"],"answers":[{"tags":[],"owner":{"account_id":16614583,"reputation":3,"user_id":12006638,"display_name":"Muhammad Nawaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660148901,"creation_date":1660148901,"answer_id":73309744,"question_id":73210307,"body_markdown":"The solution I figure out is using Profile in Selenium webdriver.\r\n\r\nhere are the steps for using a profile\r\n\r\nCreate a chrome profile manually\r\nSet chrome options as:\r\nfor Python\r\n\r\n    options.add_arguments(&#39;--user-data=C:\\Users\\User\\AppData\\local\\Google\\Chrome\\User Data\\Profile\\&#39;)\r\n\r\nfor Java\r\n\r\n    options.addArguments(&quot;user-data=C:\\Users\\User\\AppData\\local\\Google\\Chrome\\UserData\\Profile\\&quot;);","title":"Hide Automation Browser from detecting as bot","body":"<p>The solution I figure out is using Profile in Selenium webdriver.</p>\n<p>here are the steps for using a profile</p>\n<p>Create a chrome profile manually\nSet chrome options as:\nfor Python</p>\n<pre><code>options.add_arguments('--user-data=C:\\Users\\User\\AppData\\local\\Google\\Chrome\\User Data\\Profile\\')\n</code></pre>\n<p>for Java</p>\n<pre><code>options.addArguments(&quot;user-data=C:\\Users\\User\\AppData\\local\\Google\\Chrome\\UserData\\Profile\\&quot;);\n</code></pre>\n"}],"owner":{"account_id":16614583,"reputation":3,"user_id":12006638,"display_name":"Muhammad Nawaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":431,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660148901,"creation_date":1659455085,"question_id":73210307,"body_markdown":"Is there any way to hide the chrome instances launched by the chrome driver to be undetectable by the web apps like Stripe payments, FedEx tracking, etc?\r\n\r\nI&#39;ve tried with the following chrome options:\r\n```\r\n            Map&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\r\n\t\t\tprefs.put(&quot;profile.default_content_setting_values.notifications&quot;, 2);\r\n\t\t\tprefs.put(&quot;credentials_enable_service&quot;, false);\r\n\t\t\tprefs.put(&quot;profile.password_manager_enabled&quot;, false);\r\n\t\t\tprefs.put(&quot;useAutomationExtension&quot;, false);\r\n\t\t\tChromeOptions options = new ChromeOptions();\r\n\t\t\toptions.setExperimentalOption(&quot;prefs&quot;, prefs);\r\n\t\t\tString agentString = &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36&quot;;\r\n\t\t\toptions.addArguments(&quot;--user-agent=&quot; + agentString);\r\n\t\t\toptions.addArguments(&quot;--disable-extensions&quot;);\r\n\t\t\toptions.addArguments(&quot;--disable-infobars&quot;);\r\n\t\t\toptions.addArguments(&quot;window-size=1920,1080&quot;);\r\n\t\t\t//options.addArguments(&quot;--headless&quot;);\r\n\t\t\toptions.addArguments(&quot;--no-sandbox&quot;, &quot;--disable-dev-shm-usage&quot;);\r\n\t\t\toptions.addArguments(&quot;--disable-gpu&quot;);\r\n\t\t\t//options.addArguments(&quot;enable-automation&quot;);\r\n\t\t\toptions.addArguments(&quot;--dns-prefetch-disable&quot;);\r\n\t\t\toptions.addArguments(&quot;--disable-browser-side-navigation&quot;);\r\n\t\t\toptions.addArguments(&quot;--disable-blink-features&quot;);\r\n\t\t\toptions.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\r\n\t\t\toptions.addArguments(&quot;--disable-blink-features=AutomationControlled&quot;);\r\n\t\t\toptions.setPageLoadStrategy(PageLoadStrategy.NORMAL);\r\n```","title":"Hide Automation Browser from detecting as bot","body":"<p>Is there any way to hide the chrome instances launched by the chrome driver to be undetectable by the web apps like Stripe payments, FedEx tracking, etc?</p>\n<p>I've tried with the following chrome options:</p>\n<pre><code>            Map&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\n            prefs.put(&quot;profile.default_content_setting_values.notifications&quot;, 2);\n            prefs.put(&quot;credentials_enable_service&quot;, false);\n            prefs.put(&quot;profile.password_manager_enabled&quot;, false);\n            prefs.put(&quot;useAutomationExtension&quot;, false);\n            ChromeOptions options = new ChromeOptions();\n            options.setExperimentalOption(&quot;prefs&quot;, prefs);\n            String agentString = &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36&quot;;\n            options.addArguments(&quot;--user-agent=&quot; + agentString);\n            options.addArguments(&quot;--disable-extensions&quot;);\n            options.addArguments(&quot;--disable-infobars&quot;);\n            options.addArguments(&quot;window-size=1920,1080&quot;);\n            //options.addArguments(&quot;--headless&quot;);\n            options.addArguments(&quot;--no-sandbox&quot;, &quot;--disable-dev-shm-usage&quot;);\n            options.addArguments(&quot;--disable-gpu&quot;);\n            //options.addArguments(&quot;enable-automation&quot;);\n            options.addArguments(&quot;--dns-prefetch-disable&quot;);\n            options.addArguments(&quot;--disable-browser-side-navigation&quot;);\n            options.addArguments(&quot;--disable-blink-features&quot;);\n            options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\n            options.addArguments(&quot;--disable-blink-features=AutomationControlled&quot;);\n            options.setPageLoadStrategy(PageLoadStrategy.NORMAL);\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":15371775,"reputation":514,"user_id":11089623,"display_name":"cheparsky"},"score":1,"creation_date":1658858887,"post_id":73122808,"comment_id":129155169,"body_markdown":"as I see it is another iframe, try to switch between frames, here is how you can do it: https://stackoverflow.com/questions/10879206/how-to-switch-between-frames-in-selenium-webdriver-using-java","body":"as I see it is another iframe, try to switch between frames, here is how you can do it: <a href=\"https://stackoverflow.com/questions/10879206/how-to-switch-between-frames-in-selenium-webdriver-using-java\" title=\"how to switch between frames in selenium webdriver using java\">stackoverflow.com/questions/10879206/&hellip;</a>"},{"owner":{"account_id":11437996,"reputation":1,"user_id":8384696,"display_name":"enizium"},"score":0,"creation_date":1659058657,"post_id":73122808,"comment_id":129210789,"body_markdown":"@cheparsky,\nI don&#39;t see any iframe.","body":"@cheparsky, I don&#39;t see any iframe."}],"answers":[{"tags":[],"owner":{"account_id":15371775,"reputation":514,"user_id":11089623,"display_name":"cheparsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660148215,"creation_date":1660148215,"answer_id":73309597,"question_id":73122808,"body_markdown":"Using Selenide this, a little ugly, code working for me:\r\n```java\r\n    @Test\r\n    public void addItemToCart() {\r\n        open(&quot;http://automationpractice.com/&quot;);\r\n        $(By.xpath(&quot;//*[@id=\\&quot;homefeatured\\&quot;]/li[1]/div/div[1]/div&quot;)).hover();\r\n        $(By.xpath(&quot;//*[@id=\\&quot;homefeatured\\&quot;]/li[1]/div/div[1]/div/a[2]/span&quot;)).click();\r\n        switchTo().frame($x(&quot;//*[@id=\\&quot;index\\&quot;]/div[2]/div/div/div/div/iframe&quot;));\r\n        $x(&quot;//*[@id=\\&quot;add_to_cart\\&quot;]/button&quot;).shouldBe(visible, Duration.ofSeconds(10));\r\n        $x(&quot;//*[@id=\\&quot;add_to_cart\\&quot;]/button&quot;).click();\r\n        $x(&quot;//*[@id=\\&quot;layer_cart_product_price\\&quot;]&quot;).shouldBe(visible, Duration.ofSeconds(10));\r\n        assert $x(&quot;//*[@id=\\&quot;layer_cart_product_price\\&quot;]&quot;).text().equals(&quot;$16.51&quot;);\r\n        $x(&quot;//*[@id=\\&quot;layer_cart\\&quot;]/div[1]/div[2]/div[4]/a/span&quot;).click();\r\n        assert $(&quot;#cart_title&quot;).text().equals(&quot;Shopping-cart summary&quot;);\r\n    }\r\n```\r\n\r\nAs I said a problem was in iframe.","title":"unable to interact with lightbox in selenium","body":"<p>Using Selenide this, a little ugly, code working for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    public void addItemToCart() {\n        open(&quot;http://automationpractice.com/&quot;);\n        $(By.xpath(&quot;//*[@id=\\&quot;homefeatured\\&quot;]/li[1]/div/div[1]/div&quot;)).hover();\n        $(By.xpath(&quot;//*[@id=\\&quot;homefeatured\\&quot;]/li[1]/div/div[1]/div/a[2]/span&quot;)).click();\n        switchTo().frame($x(&quot;//*[@id=\\&quot;index\\&quot;]/div[2]/div/div/div/div/iframe&quot;));\n        $x(&quot;//*[@id=\\&quot;add_to_cart\\&quot;]/button&quot;).shouldBe(visible, Duration.ofSeconds(10));\n        $x(&quot;//*[@id=\\&quot;add_to_cart\\&quot;]/button&quot;).click();\n        $x(&quot;//*[@id=\\&quot;layer_cart_product_price\\&quot;]&quot;).shouldBe(visible, Duration.ofSeconds(10));\n        assert $x(&quot;//*[@id=\\&quot;layer_cart_product_price\\&quot;]&quot;).text().equals(&quot;$16.51&quot;);\n        $x(&quot;//*[@id=\\&quot;layer_cart\\&quot;]/div[1]/div[2]/div[4]/a/span&quot;).click();\n        assert $(&quot;#cart_title&quot;).text().equals(&quot;Shopping-cart summary&quot;);\n    }\n</code></pre>\n<p>As I said a problem was in iframe.</p>\n"}],"owner":{"account_id":11437996,"reputation":1,"user_id":8384696,"display_name":"enizium"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660148215,"creation_date":1658835978,"question_id":73122808,"body_markdown":"step to reach that page. url:http://automationpractice.com/\r\n 1. search product.\r\n 2. hover a product and click Quick view\r\n 3. Click Add to cart\r\n 4. Try to interact to any element from light box. // there is no iframe.\r\n\r\n[Lightbox image][1]\r\n\r\n[html code.][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c7cOu.png\r\n  [2]: https://i.stack.imgur.com/j9ZAD.png","title":"unable to interact with lightbox in selenium","body":"<p>step to reach that page. url:<a href=\"http://automationpractice.com/\" rel=\"nofollow noreferrer\">http://automationpractice.com/</a></p>\n<ol>\n<li>search product.</li>\n<li>hover a product and click Quick view</li>\n<li>Click Add to cart</li>\n<li>Try to interact to any element from light box. // there is no iframe.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/c7cOu.png\" rel=\"nofollow noreferrer\">Lightbox image</a></p>\n<p><a href=\"https://i.stack.imgur.com/j9ZAD.png\" rel=\"nofollow noreferrer\">html code.</a></p>\n"},{"tags":["java","scala","generics"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1660110827,"post_id":73298883,"comment_id":129452197,"body_markdown":"Sounds not normal behaviour to me. At compile time there&#39;s no reason for those types to disappear.","body":"Sounds not normal behaviour to me. At compile time there&#39;s no reason for those types to disappear."}],"answers":[{"tags":[],"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660115038,"creation_date":1660115038,"answer_id":73301988,"question_id":73298883,"body_markdown":"That seems how Scala compiler translates &quot;primitive&quot; Scala types (remember, `Double` here is `scala.Double` and not `java.lang.Double`). E.g. Scala declarations\r\n```\r\n  var d: Double =&gt; Boolean;\r\n  var s: String =&gt; String;\r\n```\r\nproduce (as shown by javap):\r\n```\r\n  public abstract scala.Function1&lt;java.lang.Object, java.lang.Object&gt; d();\r\n  public abstract scala.Function1&lt;java.lang.String, java.lang.String&gt; s();\r\n```\r\nNote how `Double` and `Boolean` both translate to `Object`, but `String` is preserved","title":"Scala Function1&lt;T,U&gt; becomes Function1&lt;Object,Object&gt; in Java","body":"<p>That seems how Scala compiler translates &quot;primitive&quot; Scala types (remember, <code>Double</code> here is <code>scala.Double</code> and not <code>java.lang.Double</code>). E.g. Scala declarations</p>\n<pre><code>  var d: Double =&gt; Boolean;\n  var s: String =&gt; String;\n</code></pre>\n<p>produce (as shown by javap):</p>\n<pre><code>  public abstract scala.Function1&lt;java.lang.Object, java.lang.Object&gt; d();\n  public abstract scala.Function1&lt;java.lang.String, java.lang.String&gt; s();\n</code></pre>\n<p>Note how <code>Double</code> and <code>Boolean</code> both translate to <code>Object</code>, but <code>String</code> is preserved</p>\n"},{"tags":[],"owner":{"account_id":2538731,"reputation":2578,"user_id":2205089,"display_name":"Alin Gabriel Arhip"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660148049,"creation_date":1660147026,"answer_id":73309330,"question_id":73298883,"body_markdown":"peterz detailed exactly what happens under the hood.\r\n\r\nSounds like what you need is an explicit conversion from the primitive `double` Java predicate (`java.util.function.DoublePredicate`) to the `scala.Double` Scala predicate (`Double =&gt; Boolean`). \r\n\r\nScala actually offers one such conversion called `FromJavaDoublePredicate`.\r\nThe code does not require explicit `Double` cast anymore:\r\n\r\n      /* some scala file */\r\n      def hasCompleteness(\r\n          x: Double,\r\n          f: Double =&gt; Boolean\r\n      ): Unit = println(f(x))\r\n\r\n      /* some java file */\r\n      public static FromJavaDoublePredicate atLeast(double thresholdPercentage) {\r\n          return new scala.compat.java8.functionConverterImpls.FromJavaDoublePredicate(\r\n            actualPercentage -&gt; actualPercentage &gt;= thresholdPercentage);\r\n      }\r\n\r\n      FromJavaDoublePredicate f = atLeast(3.0);\r\n      Test.hasCompleteness(5, f);  // true\r\n\r\nPS. From what I saw, you chose [scala-java8-compat][1], so I assumed you use an earlier version of Scala. Their maintainers state:\r\n\r\n&gt; If you are using Scala 2.13 or newer only, then don&#39;t use this\r\n&gt; library! Use the classes under `scala.jdk` instead; they were added to\r\n&gt; the standard library in 2.13.\r\n\r\nSo for Scala 2.13.x I recommend using the [FromJavaDoublePredicate][2] case class in the `FunctionWrappers` object instead.\r\n\r\n\r\n  [1]: https://github.com/scala/scala-java8-compat\r\n  [2]: https://www.scala-lang.org/api/2.13.8/scala/jdk/FunctionWrappers$$FromJavaDoublePredicate.html","title":"Scala Function1&lt;T,U&gt; becomes Function1&lt;Object,Object&gt; in Java","body":"<p>peterz detailed exactly what happens under the hood.</p>\n<p>Sounds like what you need is an explicit conversion from the primitive <code>double</code> Java predicate (<code>java.util.function.DoublePredicate</code>) to the <code>scala.Double</code> Scala predicate (<code>Double =&gt; Boolean</code>).</p>\n<p>Scala actually offers one such conversion called <code>FromJavaDoublePredicate</code>.\nThe code does not require explicit <code>Double</code> cast anymore:</p>\n<pre><code>  /* some scala file */\n  def hasCompleteness(\n      x: Double,\n      f: Double =&gt; Boolean\n  ): Unit = println(f(x))\n\n  /* some java file */\n  public static FromJavaDoublePredicate atLeast(double thresholdPercentage) {\n      return new scala.compat.java8.functionConverterImpls.FromJavaDoublePredicate(\n        actualPercentage -&gt; actualPercentage &gt;= thresholdPercentage);\n  }\n\n  FromJavaDoublePredicate f = atLeast(3.0);\n  Test.hasCompleteness(5, f);  // true\n</code></pre>\n<p>PS. From what I saw, you chose <a href=\"https://github.com/scala/scala-java8-compat\" rel=\"nofollow noreferrer\">scala-java8-compat</a>, so I assumed you use an earlier version of Scala. Their maintainers state:</p>\n<blockquote>\n<p>If you are using Scala 2.13 or newer only, then don't use this\nlibrary! Use the classes under <code>scala.jdk</code> instead; they were added to\nthe standard library in 2.13.</p>\n</blockquote>\n<p>So for Scala 2.13.x I recommend using the <a href=\"https://www.scala-lang.org/api/2.13.8/scala/jdk/FunctionWrappers$$FromJavaDoublePredicate.html\" rel=\"nofollow noreferrer\">FromJavaDoublePredicate</a> case class in the <code>FunctionWrappers</code> object instead.</p>\n"}],"owner":{"account_id":7309932,"reputation":517,"user_id":5569548,"accept_rate":75,"display_name":"Ted Yavuzkurt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73309330,"answer_count":2,"score":2,"last_activity_date":1660148049,"creation_date":1660085425,"question_id":73298883,"body_markdown":"I am trying to use the Deequ library from Java, and am having issue using the following method:\r\n\r\n      def hasCompleteness(\r\n          column: String,\r\n          assertion: Double =&gt; Boolean,\r\n          hint: Option[String] = None)\r\n        : CheckWithLastConstraintFilterable = {\r\n        addFilterableConstraint { filter =&gt; completenessConstraint(column, assertion, filter, hint) }\r\n      }\r\n\r\nIn particular, for the assertion, I need to pass in a `Function1&lt;Double, Boolean&gt;`\r\n\r\nSo I use the following code to create an assertion function in Java:\r\n\r\n    public static Function1&lt;Double, Boolean&gt; atLeast(double thresholdPercentage) {\r\n      return new scala.compat.java8.functionConverterImpls.FromJavaFunction&lt;&gt;((Double actualPercentage) -&gt; actualPercentage &gt;= thresholdPercentage);\r\n    }\r\n\r\nSimple enough, right?\r\n\r\nOnly, my Java Class now won&#39;t compile because the signature of the `hasCompleteness` method, when viewed *from Java* is that the assertion parameter is a `Function1&lt;Object, Object&gt;`. Thus I see the following error:\r\n\r\n    Required type: Function1&lt;Object, Object&gt;\r\n    Provided: Function1&lt;Double, Boolean&gt;\r\n\r\nIf I change my `atLeast` method to return an unparametrized ```Function1``` the issue goes away, but this feels like an ugly kludge.\r\n\r\nAm I condemned to losing the type params when using this method from Java? Or is there something perhaps wrong with my IntelliJ / Gradle setup causing this weird behavior?","title":"Scala Function1&lt;T,U&gt; becomes Function1&lt;Object,Object&gt; in Java","body":"<p>I am trying to use the Deequ library from Java, and am having issue using the following method:</p>\n<pre><code>  def hasCompleteness(\n      column: String,\n      assertion: Double =&gt; Boolean,\n      hint: Option[String] = None)\n    : CheckWithLastConstraintFilterable = {\n    addFilterableConstraint { filter =&gt; completenessConstraint(column, assertion, filter, hint) }\n  }\n</code></pre>\n<p>In particular, for the assertion, I need to pass in a <code>Function1&lt;Double, Boolean&gt;</code></p>\n<p>So I use the following code to create an assertion function in Java:</p>\n<pre><code>public static Function1&lt;Double, Boolean&gt; atLeast(double thresholdPercentage) {\n  return new scala.compat.java8.functionConverterImpls.FromJavaFunction&lt;&gt;((Double actualPercentage) -&gt; actualPercentage &gt;= thresholdPercentage);\n}\n</code></pre>\n<p>Simple enough, right?</p>\n<p>Only, my Java Class now won't compile because the signature of the <code>hasCompleteness</code> method, when viewed <em>from Java</em> is that the assertion parameter is a <code>Function1&lt;Object, Object&gt;</code>. Thus I see the following error:</p>\n<pre><code>Required type: Function1&lt;Object, Object&gt;\nProvided: Function1&lt;Double, Boolean&gt;\n</code></pre>\n<p>If I change my <code>atLeast</code> method to return an unparametrized <code>Function1</code> the issue goes away, but this feels like an ugly kludge.</p>\n<p>Am I condemned to losing the type params when using this method from Java? Or is there something perhaps wrong with my IntelliJ / Gradle setup causing this weird behavior?</p>\n"},{"tags":["java","database","amazon-dynamodb","dynamodb-queries","ratpack"],"comments":[{"owner":{"account_id":257345,"reputation":6764,"user_id":538697,"display_name":"hunterhacker"},"score":0,"creation_date":1660151769,"post_id":73309434,"comment_id":129467377,"body_markdown":"Why wouldn&#39;t it include everything? You asked for everything from 0000000#x to 9999999#x and all your values are going to fit between these two. As an aside (not your problem here, but the problem you&#39;ll hit next) you need to be very careful doing string sort on numbers, because &quot;100&quot; is between &quot;1&quot; and &quot;2&quot;.","body":"Why wouldn&#39;t it include everything? You asked for everything from 0000000#x to 9999999#x and all your values are going to fit between these two. As an aside (not your problem here, but the problem you&#39;ll hit next) you need to be very careful doing string sort on numbers, because &quot;100&quot; is between &quot;1&quot; and &quot;2&quot;."},{"owner":{"account_id":8348703,"reputation":722,"user_id":7100079,"display_name":"Jorge Guerreiro"},"score":0,"creation_date":1660203828,"post_id":73309434,"comment_id":129478735,"body_markdown":"Yes, I understand but I&#39;m asking for everything that has idOfItem#0000000 to idOfItem#9999999 which means that in my example if I use 3214 as idOfItem I should only get 2 values no?","body":"Yes, I understand but I&#39;m asking for everything that has idOfItem#0000000 to idOfItem#9999999 which means that in my example if I use 3214 as idOfItem I should only get 2 values no?"},{"owner":{"account_id":257345,"reputation":6764,"user_id":538697,"display_name":"hunterhacker"},"score":0,"creation_date":1660233257,"post_id":73309434,"comment_id":129489783,"body_markdown":"So createFilterRef reverses the values? That’s not what your comment says.","body":"So createFilterRef reverses the values? That’s not what your comment says."}],"owner":{"account_id":8348703,"reputation":722,"user_id":7100079,"display_name":"Jorge Guerreiro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660148005,"creation_date":1660147458,"question_id":73309434,"body_markdown":"I have a DynamoDb table with the following structure\r\n\r\n    key       reference          value\r\n    1234      3214#0012345       xxxx\r\n    1234      3314#0003455       xxxx\r\n    1234      3214#0004231       xxxx\r\n\r\n\r\nThe value of `reference`, is a concatenation like so:\r\n\r\n    ${accountId}#${idOfItem}\r\n\r\nI&#39;m trying to query the table to retrieve `value` but only where the account ID&#39;s match my query. So far I tried this\r\n\r\n    public Promise&lt;List&lt;Value&gt;&gt; getFiltersByUser(Key key, AccountId accountId) {\r\n            final QuerySpec query = new QuerySpec();\r\n            Map&lt;String, Object&gt; valueMap = new HashMap&lt;&gt;();\r\n            Map&lt;String, String&gt; keyMap = new HashMap&lt;&gt;();\r\n    \r\n            keyMap.put(&quot;#key&quot;, PARTITION_KEY_NAME);\r\n            keyMap.put(&quot;#reference&quot;, RANGE_KEY_NAME);\r\n            valueMap.put(&quot;:key&quot;, key);\r\n            valueMap.put(&quot;:startReference&quot;, createFilterRef(&quot;0000000&quot;, accountId));\r\n            valueMap.put(&quot;:endReference&quot;, createFilterRef(&quot;9999999&quot;, accountId));\r\n    //createFilterRef simple creates the reference by concatening the two values with hashtag\r\n            query.withKeyConditionExpression(&quot;#key = :key AND #filterRef BETWEEN :startFilterRef AND :endReference&quot;)\r\n                    .withNameMap(keyMap)\r\n                    .withValueMap(valueMap);\r\n    \r\n            return Blocking.get(() -&gt; {\r\n                final ItemCollection&lt;QueryOutcome&gt; out = table.query(query);\r\n                return newArrayList(out)\r\n                        .stream()\r\n                        .map(this::createValueFromItem)//we can disregard this as it converts the results received to a different structure\r\n                        .collect(Collectors.toList());\r\n            });\r\n        }\r\n\r\nThe problem I&#39;m having currently is that my condition expression seems to not care about my BETWEEN operator, or I&#39;m doing something wrong, and retrieves all the values instead.\r\n\r\nAny advice on how to reach my goal?","title":"Query DynamoDB using Between operator","body":"<p>I have a DynamoDb table with the following structure</p>\n<pre><code>key       reference          value\n1234      3214#0012345       xxxx\n1234      3314#0003455       xxxx\n1234      3214#0004231       xxxx\n</code></pre>\n<p>The value of <code>reference</code>, is a concatenation like so:</p>\n<pre><code>${accountId}#${idOfItem}\n</code></pre>\n<p>I'm trying to query the table to retrieve <code>value</code> but only where the account ID's match my query. So far I tried this</p>\n<pre><code>public Promise&lt;List&lt;Value&gt;&gt; getFiltersByUser(Key key, AccountId accountId) {\n        final QuerySpec query = new QuerySpec();\n        Map&lt;String, Object&gt; valueMap = new HashMap&lt;&gt;();\n        Map&lt;String, String&gt; keyMap = new HashMap&lt;&gt;();\n\n        keyMap.put(&quot;#key&quot;, PARTITION_KEY_NAME);\n        keyMap.put(&quot;#reference&quot;, RANGE_KEY_NAME);\n        valueMap.put(&quot;:key&quot;, key);\n        valueMap.put(&quot;:startReference&quot;, createFilterRef(&quot;0000000&quot;, accountId));\n        valueMap.put(&quot;:endReference&quot;, createFilterRef(&quot;9999999&quot;, accountId));\n//createFilterRef simple creates the reference by concatening the two values with hashtag\n        query.withKeyConditionExpression(&quot;#key = :key AND #filterRef BETWEEN :startFilterRef AND :endReference&quot;)\n                .withNameMap(keyMap)\n                .withValueMap(valueMap);\n\n        return Blocking.get(() -&gt; {\n            final ItemCollection&lt;QueryOutcome&gt; out = table.query(query);\n            return newArrayList(out)\n                    .stream()\n                    .map(this::createValueFromItem)//we can disregard this as it converts the results received to a different structure\n                    .collect(Collectors.toList());\n        });\n    }\n</code></pre>\n<p>The problem I'm having currently is that my condition expression seems to not care about my BETWEEN operator, or I'm doing something wrong, and retrieves all the values instead.</p>\n<p>Any advice on how to reach my goal?</p>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":1350847,"reputation":61,"user_id":1290540,"display_name":"Mesut Can G&#252;rle"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1660147202,"creation_date":1660147202,"answer_id":73309371,"question_id":71466418,"body_markdown":"I faced a similar issue. I was able to read the topics but I cannot list, describe the groups. I solved the issue by adding a large timeout. Can you please also try putting a large timeout?\r\n&gt; ./kafka-consumer-groups.sh --command-config kafka.properties --bootstrap-server brokers  --group group --describe --timeout 100000","title":"The kafka script kafka-consumer-group.sh throws timed out waiting for a node assignment","body":"<p>I faced a similar issue. I was able to read the topics but I cannot list, describe the groups. I solved the issue by adding a large timeout. Can you please also try putting a large timeout?</p>\n<blockquote>\n<p>./kafka-consumer-groups.sh --command-config kafka.properties --bootstrap-server brokers  --group group --describe --timeout 100000</p>\n</blockquote>\n"}],"owner":{"account_id":11439352,"reputation":1048,"user_id":8385513,"display_name":"Pratheesh M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2042,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1660147202,"creation_date":1647254430,"question_id":71466418,"body_markdown":"I have a Kafka cluster running with 3 brokers.\r\n\r\n````\r\n&lt;node-ip&gt;:10092 //broker-0\r\n&lt;node-ip&gt;:10093 //broker-1\r\n&lt;node-ip&gt;:10094 //broker-2\r\n````\r\nThe broker-1 `&lt;node-ip&gt;:10093` is in a not-ready state(due to some readiness failure). But other 2 brokers are running fine.\r\n\r\nBut when I use the script `kafka-consumer-groups.sh` with a running broker address as bootstrap-server, I get the following error.\r\n\r\n````\r\nkafka@mirror-maker-0:/opt/kafka/bin$ /opt/kafka/bin/kafka-consumer-groups.sh  --bootstrap-server &lt;node-ip&gt;:10094 --describe --group c2-c1-consumer-group --state\r\n[2022-03-14 10:24:16,008] WARN [AdminClient clientId=adminclient-1] Connection to node 1 (/&lt;node-ip&gt;:10093) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n[2022-03-14 10:24:17,086] WARN [AdminClient clientId=adminclient-1] Connection to node 1 (/&lt;node-ip&gt;:10093) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n[2022-03-14 10:24:18,206] WARN [AdminClient clientId=adminclient-1] Connection to node 1 (/&lt;node-ip&gt;:10093) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n[2022-03-14 10:24:19,458] WARN [AdminClient clientId=adminclient-1] Connection to node 1 (/&lt;node-ip&gt;:10093) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n\r\nError: Executing consumer group command failed due to org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment. Call: describeGroups(api=DESCRIBE_GROUPS)\r\njava.util.concurrent.ExecutionException: org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment. Call: describeGroups(api=DESCRIBE_GROUPS)\r\n\tat java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)\r\n\tat java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1908)\r\n\tat org.apache.kafka.common.internals.KafkaFutureImpl.get(KafkaFutureImpl.java:165)\r\n\tat kafka.admin.ConsumerGroupCommand$ConsumerGroupService.$anonfun$describeConsumerGroups$1(ConsumerGroupCommand.scala:543)\r\n\tat scala.collection.StrictOptimizedMapOps.map(StrictOptimizedMapOps.scala:28)\r\n\tat scala.collection.StrictOptimizedMapOps.map$(StrictOptimizedMapOps.scala:27)\r\n\tat scala.collection.convert.JavaCollectionWrappers$AbstractJMapWrapper.map(JavaCollectionWrappers.scala:309)\r\n\tat kafka.admin.ConsumerGroupCommand$ConsumerGroupService.describeConsumerGroups(ConsumerGroupCommand.scala:542)\r\n\tat kafka.admin.ConsumerGroupCommand$ConsumerGroupService.collectGroupsState(ConsumerGroupCommand.scala:620)\r\n\tat kafka.admin.ConsumerGroupCommand$ConsumerGroupService.describeGroups(ConsumerGroupCommand.scala:373)\r\n\tat kafka.admin.ConsumerGroupCommand$.run(ConsumerGroupCommand.scala:72)\r\n\tat kafka.admin.ConsumerGroupCommand$.main(ConsumerGroupCommand.scala:59)\r\n\tat kafka.admin.ConsumerGroupCommand.main(ConsumerGroupCommand.scala)\r\nCaused by: org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment. Call: describeGroups(api=DESCRIBE_GROUPS)\r\n````\r\n\r\nCould someone please help me to understand\r\n1. Why is it connecting to the non mentioned broker(log shows &lt;node-ip&gt;10093 but I passed &lt;node-ip&gt;:10094)?\r\n2. Is there any solution to use only the mentioned bootstrap-servers?\r\n\r\nOne more thing is,\r\n\r\nWhen I run `kafka-topics.sh` with the running broker address as bootstrap-server, it returns the response. \r\n\r\nThanks\r\n\r\n\r\n","title":"The kafka script kafka-consumer-group.sh throws timed out waiting for a node assignment","body":"<p>I have a Kafka cluster running with 3 brokers.</p>\n<pre><code>&lt;node-ip&gt;:10092 //broker-0\n&lt;node-ip&gt;:10093 //broker-1\n&lt;node-ip&gt;:10094 //broker-2\n</code></pre>\n<p>The broker-1 <code>&lt;node-ip&gt;:10093</code> is in a not-ready state(due to some readiness failure). But other 2 brokers are running fine.</p>\n<p>But when I use the script <code>kafka-consumer-groups.sh</code> with a running broker address as bootstrap-server, I get the following error.</p>\n<pre><code>kafka@mirror-maker-0:/opt/kafka/bin$ /opt/kafka/bin/kafka-consumer-groups.sh  --bootstrap-server &lt;node-ip&gt;:10094 --describe --group c2-c1-consumer-group --state\n[2022-03-14 10:24:16,008] WARN [AdminClient clientId=adminclient-1] Connection to node 1 (/&lt;node-ip&gt;:10093) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-03-14 10:24:17,086] WARN [AdminClient clientId=adminclient-1] Connection to node 1 (/&lt;node-ip&gt;:10093) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-03-14 10:24:18,206] WARN [AdminClient clientId=adminclient-1] Connection to node 1 (/&lt;node-ip&gt;:10093) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-03-14 10:24:19,458] WARN [AdminClient clientId=adminclient-1] Connection to node 1 (/&lt;node-ip&gt;:10093) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n\nError: Executing consumer group command failed due to org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment. Call: describeGroups(api=DESCRIBE_GROUPS)\njava.util.concurrent.ExecutionException: org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment. Call: describeGroups(api=DESCRIBE_GROUPS)\n    at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)\n    at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1908)\n    at org.apache.kafka.common.internals.KafkaFutureImpl.get(KafkaFutureImpl.java:165)\n    at kafka.admin.ConsumerGroupCommand$ConsumerGroupService.$anonfun$describeConsumerGroups$1(ConsumerGroupCommand.scala:543)\n    at scala.collection.StrictOptimizedMapOps.map(StrictOptimizedMapOps.scala:28)\n    at scala.collection.StrictOptimizedMapOps.map$(StrictOptimizedMapOps.scala:27)\n    at scala.collection.convert.JavaCollectionWrappers$AbstractJMapWrapper.map(JavaCollectionWrappers.scala:309)\n    at kafka.admin.ConsumerGroupCommand$ConsumerGroupService.describeConsumerGroups(ConsumerGroupCommand.scala:542)\n    at kafka.admin.ConsumerGroupCommand$ConsumerGroupService.collectGroupsState(ConsumerGroupCommand.scala:620)\n    at kafka.admin.ConsumerGroupCommand$ConsumerGroupService.describeGroups(ConsumerGroupCommand.scala:373)\n    at kafka.admin.ConsumerGroupCommand$.run(ConsumerGroupCommand.scala:72)\n    at kafka.admin.ConsumerGroupCommand$.main(ConsumerGroupCommand.scala:59)\n    at kafka.admin.ConsumerGroupCommand.main(ConsumerGroupCommand.scala)\nCaused by: org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment. Call: describeGroups(api=DESCRIBE_GROUPS)\n</code></pre>\n<p>Could someone please help me to understand</p>\n<ol>\n<li>Why is it connecting to the non mentioned broker(log shows 10093 but I passed :10094)?</li>\n<li>Is there any solution to use only the mentioned bootstrap-servers?</li>\n</ol>\n<p>One more thing is,</p>\n<p>When I run <code>kafka-topics.sh</code> with the running broker address as bootstrap-server, it returns the response.</p>\n<p>Thanks</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":19555062,"reputation":1097,"user_id":14309684,"display_name":"SemicolonSpace"},"score":2,"creation_date":1660148446,"post_id":73309324,"comment_id":129466263,"body_markdown":"Create a variable like `checkBoxChecked` in the data class of the `expenses` list. When the box is checked, update the value in the list. And set its value in the `onBindViewHolder`.","body":"Create a variable like <code>checkBoxChecked</code> in the data class of the <code>expenses</code> list. When the box is checked, update the value in the list. And set its value in the <code>onBindViewHolder</code>."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660200915,"post_id":73309324,"comment_id":129477832,"body_markdown":"I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-delete-multiple-records-from-firestore-using-recyclerview-multi-selection-96108e4c6166) might help in terms of checking and unchecking elements in a RecylerView.","body":"I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-delete-multiple-records-from-firestore-using-recyclerview-multi-selection-96108e4c6166\" rel=\"nofollow noreferrer\">resource</a> might help in terms of checking and unchecking elements in a RecylerView."}],"owner":{"account_id":19374257,"reputation":35,"user_id":14166900,"display_name":"Yeury De los Santos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660147003,"creation_date":1660147003,"question_id":73309324,"body_markdown":"I have a recyclerview where user can hold to enable selection and by clicking in each item they get checked (imageView with a check icon), the problem I am having is that for the nature of a recyclerview when user scroll too far off screen that check is lost, I mean, item is still checked but the check is not visible so user might think they need to click again, I am looking for a way to preserve that imageview (checked icon) no matter how far user scroll up or down.\r\n\r\nThis below is the onBindViewHolder and the ClickItem method.\r\n\r\n    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\r\n\r\n        Expense expense = expenses.get(position);\r\n\r\n        ExpenseViewHolder vaultItemHolder = (ExpenseViewHolder) holder;\r\n\r\n        vaultItemHolder.item.setText(&quot;&quot; + expense.getItem());\r\n        vaultItemHolder.category.setText(&quot;&quot; + expense.getCategory());\r\n        vaultItemHolder.date.setText(&quot;&quot; + expense.getDate());\r\n        vaultItemHolder.amount.setText(&quot;$ &quot; + formatNumberCurrency(String.valueOf(expense.getAmount())));\r\n        vaultItemHolder.type.setText(expense.getType());\r\n\r\n        vaultItemHolder.itemView.setOnLongClickListener(v -&gt; {\r\n\r\n            // check condition\r\n            if (!isEnable) {\r\n\r\n                // when action mode is not enable\r\n                // initialize action mode\r\n                ActionMode.Callback callback = new ActionMode.Callback() {\r\n                    @Override\r\n                    public boolean onCreateActionMode(ActionMode mode, Menu menu) {\r\n\r\n                        // initialize selection_menu inflater\r\n                        MenuInflater menuInflater = mode.getMenuInflater();\r\n                        // inflate selection_menu\r\n                        menuInflater.inflate(R.menu.selection_menu, menu);\r\n                        // return true\r\n                        return true;\r\n                    }\r\n\r\n                    @Override\r\n                    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {\r\n\r\n                        // when action mode is prepare\r\n                        // set isEnable true\r\n                        isEnable = true;\r\n                        // create method\r\n\r\n                        ClickItem(vaultItemHolder);\r\n                        // set observer on getText method\r\n                        mainViewModel.getText().observe((LifecycleOwner) activity\r\n                                , s -&gt; {\r\n\r\n                                    // when text change\r\n                                    // set text on action mode title\r\n                                    mode.setTitle(String.format(activity.getString(R.string.selected), s));\r\n\r\n                                });\r\n\r\n                        // return true\r\n                        return true;\r\n\r\n                    }\r\n\r\n                    public boolean onActionItemClicked(ActionMode mode, MenuItem menuItem) {\r\n\r\n                        // when click on action mode item\r\n                        // get item  id\r\n                        int id = menuItem.getItemId();\r\n\r\n                        // use switch condition\r\n                        switch (id) {\r\n\r\n                            case R.id.menu_duplicate:\r\n\r\n                                //firebase base code to duplicate\r\n\r\n                                // finish action mode\r\n                                mode.finish();\r\n\r\n                                break;\r\n\r\n                            case R.id.menu_delete:\r\n\r\n\t\t\t\t//firebase code for deletion\r\n\r\n                                // finish action mode\r\n                                mode.finish();\r\n\r\n                                break;\r\n\r\n                            case R.id.menu_select_all:\r\n\r\n                                // when click on select all\r\n\r\n                                // check condition\r\n                                if (selectedExpenses.size() == expenses.size()) {\r\n\r\n                                    // when all item selected\r\n                                    // set isSelectall false\r\n                                    isSelectAll = false;\r\n\r\n                                    // create select array list\r\n                                    selectedExpenses.clear();\r\n\r\n                                } else {\r\n\r\n                                    // when  all item unselected\r\n                                    // set isSelectALL true\r\n                                    isSelectAll = true;\r\n\r\n                                    // clear select array list\r\n                                    selectedExpenses.clear();\r\n\r\n                                    // add value in select array list\r\n                                    selectedExpenses.addAll(expenses);\r\n\r\n                                }\r\n\r\n                                // set text on view model\r\n                                mainViewModel.setText(String.valueOf(selectedExpenses.size()));\r\n\r\n                                // notify adapter\r\n                                notifyDataSetChanged();\r\n\r\n                                break;\r\n                        }\r\n\r\n                        // return true\r\n                        return true;\r\n\r\n                    }\r\n\r\n                    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\r\n                    @Override\r\n                    public void onDestroyActionMode(ActionMode mode) {\r\n\r\n                        // when action mode is destroy\r\n                        // set isEnable false\r\n                        isEnable = false;\r\n\r\n                        // set isSelectAll false\r\n                        isSelectAll = false;\r\n\r\n                        // clear select array list\r\n                        selectedExpenses.clear();\r\n\r\n                        // notify adapter\r\n                        notifyDataSetChanged();\r\n\r\n                    }\r\n\r\n                };\r\n\r\n                // start action mode\r\n                ((AppCompatActivity) v.getContext()).startActionMode(callback);\r\n\r\n            } else {\r\n\r\n                // when action mode is already enable\r\n                // call method\r\n                ClickItem(vaultItemHolder);\r\n\r\n            }\r\n\r\n            // return true\r\n            return true;\r\n\r\n        });\r\n        holder.itemView.setOnClickListener(v -&gt; {\r\n            // check condition\r\n            if (isEnable) {\r\n                // when action mode is enable\r\n                ClickItem(vaultItemHolder);\r\n\r\n            } else {\r\n                // when action mode is not enable edit single item\r\n                item = expense.getItem();\r\n                category = expense.getCategory();\r\n                date = expense.getDate();\r\n                postId = expense.getId();\r\n                amount = expense.getAmount();\r\n                type = expense.getType();\r\n\r\n                updateExpense();\r\n\r\n            }\r\n        });\r\n\r\n        // check condition\r\n        if (isSelectAll) {\r\n            // when value selected\r\n            // visible all check box image\r\n            vaultItemHolder.checkbox.setVisibility(View.VISIBLE);\r\n\r\n        } else {\r\n            // when all value unselected\r\n            // hide all check box image\r\n            vaultItemHolder.checkbox.setVisibility(View.GONE);\r\n\r\n        }\r\n    }\r\n\r\n\r\n**ClickItem method**\r\n\r\nprivate void ClickItem(ExpenseViewHolder holder) {\r\n\r\n        // get selected item value\r\n        Expense s = expenses.get(holder.getAdapterPosition());\r\n\r\n        // check condition\r\n        if (holder.checkbox.getVisibility() == View.GONE) {\r\n\r\n            // when item not selected\r\n            // visible check box image\r\n            holder.checkbox.setVisibility(View.VISIBLE);\r\n\r\n            // add value in select arrayList\r\n            selectedExpenses.add(s);\r\n\r\n        } else {\r\n            // when item selected\r\n            // hide check box image\r\n\r\n            holder.checkbox.setVisibility(View.GONE);\r\n\r\n            // remove value from select arrayList\r\n            selectedExpenses.remove(s);\r\n        }\r\n\r\n        // set text on view model\r\n        mainViewModel.setText(String.valueOf(selectedExpenses.size()));\r\n\r\n    }\r\n\r\n","title":"How can I keep items checked in a recyclerView when scrolling","body":"<p>I have a recyclerview where user can hold to enable selection and by clicking in each item they get checked (imageView with a check icon), the problem I am having is that for the nature of a recyclerview when user scroll too far off screen that check is lost, I mean, item is still checked but the check is not visible so user might think they need to click again, I am looking for a way to preserve that imageview (checked icon) no matter how far user scroll up or down.</p>\n<p>This below is the onBindViewHolder and the ClickItem method.</p>\n<pre><code>public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\n\n    Expense expense = expenses.get(position);\n\n    ExpenseViewHolder vaultItemHolder = (ExpenseViewHolder) holder;\n\n    vaultItemHolder.item.setText(&quot;&quot; + expense.getItem());\n    vaultItemHolder.category.setText(&quot;&quot; + expense.getCategory());\n    vaultItemHolder.date.setText(&quot;&quot; + expense.getDate());\n    vaultItemHolder.amount.setText(&quot;$ &quot; + formatNumberCurrency(String.valueOf(expense.getAmount())));\n    vaultItemHolder.type.setText(expense.getType());\n\n    vaultItemHolder.itemView.setOnLongClickListener(v -&gt; {\n\n        // check condition\n        if (!isEnable) {\n\n            // when action mode is not enable\n            // initialize action mode\n            ActionMode.Callback callback = new ActionMode.Callback() {\n                @Override\n                public boolean onCreateActionMode(ActionMode mode, Menu menu) {\n\n                    // initialize selection_menu inflater\n                    MenuInflater menuInflater = mode.getMenuInflater();\n                    // inflate selection_menu\n                    menuInflater.inflate(R.menu.selection_menu, menu);\n                    // return true\n                    return true;\n                }\n\n                @Override\n                public boolean onPrepareActionMode(ActionMode mode, Menu menu) {\n\n                    // when action mode is prepare\n                    // set isEnable true\n                    isEnable = true;\n                    // create method\n\n                    ClickItem(vaultItemHolder);\n                    // set observer on getText method\n                    mainViewModel.getText().observe((LifecycleOwner) activity\n                            , s -&gt; {\n\n                                // when text change\n                                // set text on action mode title\n                                mode.setTitle(String.format(activity.getString(R.string.selected), s));\n\n                            });\n\n                    // return true\n                    return true;\n\n                }\n\n                public boolean onActionItemClicked(ActionMode mode, MenuItem menuItem) {\n\n                    // when click on action mode item\n                    // get item  id\n                    int id = menuItem.getItemId();\n\n                    // use switch condition\n                    switch (id) {\n\n                        case R.id.menu_duplicate:\n\n                            //firebase base code to duplicate\n\n                            // finish action mode\n                            mode.finish();\n\n                            break;\n\n                        case R.id.menu_delete:\n\n            //firebase code for deletion\n\n                            // finish action mode\n                            mode.finish();\n\n                            break;\n\n                        case R.id.menu_select_all:\n\n                            // when click on select all\n\n                            // check condition\n                            if (selectedExpenses.size() == expenses.size()) {\n\n                                // when all item selected\n                                // set isSelectall false\n                                isSelectAll = false;\n\n                                // create select array list\n                                selectedExpenses.clear();\n\n                            } else {\n\n                                // when  all item unselected\n                                // set isSelectALL true\n                                isSelectAll = true;\n\n                                // clear select array list\n                                selectedExpenses.clear();\n\n                                // add value in select array list\n                                selectedExpenses.addAll(expenses);\n\n                            }\n\n                            // set text on view model\n                            mainViewModel.setText(String.valueOf(selectedExpenses.size()));\n\n                            // notify adapter\n                            notifyDataSetChanged();\n\n                            break;\n                    }\n\n                    // return true\n                    return true;\n\n                }\n\n                @SuppressLint(&quot;NotifyDataSetChanged&quot;)\n                @Override\n                public void onDestroyActionMode(ActionMode mode) {\n\n                    // when action mode is destroy\n                    // set isEnable false\n                    isEnable = false;\n\n                    // set isSelectAll false\n                    isSelectAll = false;\n\n                    // clear select array list\n                    selectedExpenses.clear();\n\n                    // notify adapter\n                    notifyDataSetChanged();\n\n                }\n\n            };\n\n            // start action mode\n            ((AppCompatActivity) v.getContext()).startActionMode(callback);\n\n        } else {\n\n            // when action mode is already enable\n            // call method\n            ClickItem(vaultItemHolder);\n\n        }\n\n        // return true\n        return true;\n\n    });\n    holder.itemView.setOnClickListener(v -&gt; {\n        // check condition\n        if (isEnable) {\n            // when action mode is enable\n            ClickItem(vaultItemHolder);\n\n        } else {\n            // when action mode is not enable edit single item\n            item = expense.getItem();\n            category = expense.getCategory();\n            date = expense.getDate();\n            postId = expense.getId();\n            amount = expense.getAmount();\n            type = expense.getType();\n\n            updateExpense();\n\n        }\n    });\n\n    // check condition\n    if (isSelectAll) {\n        // when value selected\n        // visible all check box image\n        vaultItemHolder.checkbox.setVisibility(View.VISIBLE);\n\n    } else {\n        // when all value unselected\n        // hide all check box image\n        vaultItemHolder.checkbox.setVisibility(View.GONE);\n\n    }\n}\n</code></pre>\n<p><strong>ClickItem method</strong></p>\n<p>private void ClickItem(ExpenseViewHolder holder) {</p>\n<pre><code>    // get selected item value\n    Expense s = expenses.get(holder.getAdapterPosition());\n\n    // check condition\n    if (holder.checkbox.getVisibility() == View.GONE) {\n\n        // when item not selected\n        // visible check box image\n        holder.checkbox.setVisibility(View.VISIBLE);\n\n        // add value in select arrayList\n        selectedExpenses.add(s);\n\n    } else {\n        // when item selected\n        // hide check box image\n\n        holder.checkbox.setVisibility(View.GONE);\n\n        // remove value from select arrayList\n        selectedExpenses.remove(s);\n    }\n\n    // set text on view model\n    mainViewModel.setText(String.valueOf(selectedExpenses.size()));\n\n}\n</code></pre>\n"},{"tags":["java","caching","timer","guava"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1486691419,"post_id":42150174,"comment_id":71466697,"body_markdown":"`Cache` has a method `invalidateAll()` that clears all entries. I don&#39;t see you calling that.","body":"<code>Cache</code> has a method <code>invalidateAll()</code> that clears all entries. I don&#39;t see you calling that."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1486691549,"post_id":42150174,"comment_id":71466748,"body_markdown":"Since you&#39;re using a google library, I&#39;ll drop this note on [horizontal alignment](https://google.github.io/styleguide/javaguide.html#s4.6.3-horizontal-alignment) from google&#39;s Java style guide.","body":"Since you&#39;re using a google library, I&#39;ll drop this note on <a href=\"https://google.github.io/styleguide/javaguide.html#s4.6.3-horizontal-alignment\" rel=\"nofollow noreferrer\">horizontal alignment</a> from google&#39;s Java style guide."},{"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"score":1,"creation_date":1486696601,"post_id":42150174,"comment_id":71468168,"body_markdown":"Using google library and adopting google coding style are irrelevant. (Though I found the horizontal alignment of OP a bit disturbing too :P )","body":"Using google library and adopting google coding style are irrelevant. (Though I found the horizontal alignment of OP a bit disturbing too :P )"},{"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"score":0,"creation_date":1486697080,"post_id":42150174,"comment_id":71468304,"body_markdown":"the biggest problem, although off topic, is OP is using enum inappropriately","body":"the biggest problem, although off topic, is OP is using enum inappropriately"},{"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"score":0,"creation_date":1486950363,"post_id":42150174,"comment_id":71552964,"body_markdown":"OP - Original Post","body":"OP - Original Post"}],"answers":[{"tags":[],"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1660146675,"creation_date":1490255237,"answer_id":42970042,"question_id":42150174,"body_markdown":"[`Cache.invalidateAll()`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/cache/Cache.html#invalidateAll--) will clear all entries currently in the cache.\r\n\r\nThat said, if you intend to reload entries daily, why are you only expiring the cache&#39;s contents every four days (`.expireAfterWrite(4, TimeUnit.DAYS)`)? Simply changing the `4` to a `1` would reload contents once a day.\r\n\r\nAlso, as Adrian Shum mentioned you&#39;re misusing enums. `public enum PeriodicUpdater` should almost certainly be `public class PeriodicUpdater`.","title":"Java Guava Cache : How to clear all cache entries?","body":"<p><a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/cache/Cache.html#invalidateAll--\" rel=\"nofollow noreferrer\"><code>Cache.invalidateAll()</code></a> will clear all entries currently in the cache.</p>\n<p>That said, if you intend to reload entries daily, why are you only expiring the cache's contents every four days (<code>.expireAfterWrite(4, TimeUnit.DAYS)</code>)? Simply changing the <code>4</code> to a <code>1</code> would reload contents once a day.</p>\n<p>Also, as Adrian Shum mentioned you're misusing enums. <code>public enum PeriodicUpdater</code> should almost certainly be <code>public class PeriodicUpdater</code>.</p>\n"}],"owner":{"account_id":4155984,"reputation":1584,"user_id":7336418,"accept_rate":79,"display_name":"user3407267"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10220,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1660146675,"creation_date":1486691185,"question_id":42150174,"body_markdown":"I have Cache with all customer details loading daily from db. But before the loading the daily customer details I need to delete all the previous entries in the cache.\r\n\r\nCurrently I am doing :\r\n \r\n\r\n    public enum PeriodicUpdater {\r\n    \r\n        TIMER;\r\n        private final AtomicBoolean isPublishing = new AtomicBoolean(false);\r\n        private final long          period       = TimeUnit.DAYS.toMillis(1);\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;TestUtils&quot;) @Setter\r\n        private TestUtils testUtils;\r\n    \r\n        public synchronized boolean initialize() {\r\n            return initialize(period, period);\r\n        }\r\n    \r\n      \r\n        boolean initialize(long delay, long period) {\r\n            if (isPublishing.get()) {\r\n                return false;\r\n            }\r\n            TimerTask task = new TimerTask() {\r\n    \r\n                @Override public void run() {\r\n                    try {\r\n    \r\n                        String path = getFile();\r\n                        if(TestUtils.getFileNameCache().getIfPresent(path) == null) {\r\n                            TestUtils.setFileNameCache(testUtils.buildFileCache(path));\r\n                        }\r\n                    } catch (Exception e) {\r\n                        log.warn(&quot;Failed!&quot;, e);\r\n                    }\r\n                }\r\n            };\r\n            Timer timer = new Timer(&quot;PeriodicUpdater&quot;, true); // daemon=true\r\n            timer.schedule(task, delay, period);\r\n            isPublishing.set(true);\r\n            return true;\r\n        }\r\n    }\r\n    \r\n    \r\n I am using the Cache here :\r\n\r\n        public class TestUtils {\r\n        \r\n            private static Cache&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; fileCache = CacheBuilder\r\n                    .newBuilder()\r\n                    .expireAfterWrite(4, TimeUnit.DAYS)\r\n                    .build();\r\n        \r\n        \r\n        public TestUtils() {\r\n                        \r\n                 String path = getFile();\r\n                 fileNameCache = buildFileCache(path);\r\n                }\r\n        \r\n         public Cache&lt;String, String&gt; buildFileCache(String path) {\r\n        \r\n                Cache&lt;String, String&gt; fileList = CacheBuilder\r\n                        .newBuilder()\r\n                        .expireAfterWrite(4, TimeUnit.DAYS)\r\n                        .build();\r\n        \r\n                fileList.put(path, new Date().toString());\r\n        \r\n                return fileList;\r\n            }\r\n     /* doing some stuff with the cache */\r\n        \r\n            }\r\n\r\nIs this the correct of doing ? I don&#39;t see the cache getting cleared. Can some one correct me if I am wrong ?\r\n","title":"Java Guava Cache : How to clear all cache entries?","body":"<p>I have Cache with all customer details loading daily from db. But before the loading the daily customer details I need to delete all the previous entries in the cache.</p>\n\n<p>Currently I am doing :</p>\n\n<pre><code>public enum PeriodicUpdater {\n\n    TIMER;\n    private final AtomicBoolean isPublishing = new AtomicBoolean(false);\n    private final long          period       = TimeUnit.DAYS.toMillis(1);\n\n    @Autowired\n    @Qualifier(\"TestUtils\") @Setter\n    private TestUtils testUtils;\n\n    public synchronized boolean initialize() {\n        return initialize(period, period);\n    }\n\n\n    boolean initialize(long delay, long period) {\n        if (isPublishing.get()) {\n            return false;\n        }\n        TimerTask task = new TimerTask() {\n\n            @Override public void run() {\n                try {\n\n                    String path = getFile();\n                    if(TestUtils.getFileNameCache().getIfPresent(path) == null) {\n                        TestUtils.setFileNameCache(testUtils.buildFileCache(path));\n                    }\n                } catch (Exception e) {\n                    log.warn(\"Failed!\", e);\n                }\n            }\n        };\n        Timer timer = new Timer(\"PeriodicUpdater\", true); // daemon=true\n        timer.schedule(task, delay, period);\n        isPublishing.set(true);\n        return true;\n    }\n}\n</code></pre>\n\n<p>I am using the Cache here :</p>\n\n<pre><code>    public class TestUtils {\n\n        private static Cache&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; fileCache = CacheBuilder\n                .newBuilder()\n                .expireAfterWrite(4, TimeUnit.DAYS)\n                .build();\n\n\n    public TestUtils() {\n\n             String path = getFile();\n             fileNameCache = buildFileCache(path);\n            }\n\n     public Cache&lt;String, String&gt; buildFileCache(String path) {\n\n            Cache&lt;String, String&gt; fileList = CacheBuilder\n                    .newBuilder()\n                    .expireAfterWrite(4, TimeUnit.DAYS)\n                    .build();\n\n            fileList.put(path, new Date().toString());\n\n            return fileList;\n        }\n /* doing some stuff with the cache */\n\n        }\n</code></pre>\n\n<p>Is this the correct of doing ? I don't see the cache getting cleared. Can some one correct me if I am wrong ?</p>\n"},{"tags":["java","javascript","jquery","datagrid","datatable"],"answers":[{"tags":[],"owner":{"account_id":1210427,"reputation":12301,"user_id":1179077,"display_name":"zgood"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1398694770,"creation_date":1398694770,"answer_id":23343576,"question_id":23342620,"body_markdown":"I&#39;d say [Datatables][1] is probably the best choice. I have used it in many projects. I used jqGrid once... it was ok, but I think Datatables is superior \r\n\r\n\r\n  [1]: https://datatables.net/","title":"Javascript based grid/data table","body":"<p>I'd say <a href=\"https://datatables.net/\" rel=\"nofollow\">Datatables</a> is probably the best choice. I have used it in many projects. I used jqGrid once... it was ok, but I think Datatables is superior </p>\n"}],"owner":{"account_id":346552,"reputation":1187,"user_id":680154,"accept_rate":50,"display_name":"Zeeshan Bilal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660146532,"creation_date":1398692160,"question_id":23342620,"body_markdown":"Can someone please help me to shortlist a javascript based grid/data table. I have some RnD and list some of the grids.  \r\n\r\n[JS based grid components][1]  \r\n\r\n  [1]: http://zishanbilal.com/2012/08/28/js-based-grid-comparison/\r\n\r\nJava based frameworks that translate to js would could also be the choice.","title":"Javascript based grid/data table","body":"<p>Can someone please help me to shortlist a javascript based grid/data table. I have some RnD and list some of the grids.  </p>\n\n<p><a href=\"http://zishanbilal.com/2012/08/28/js-based-grid-comparison/\" rel=\"nofollow\">JS based grid components</a>  </p>\n\n<p>Java based frameworks that translate to js would could also be the choice.</p>\n"},{"tags":["java","jaxb","wildfly"],"comments":[{"owner":{"account_id":1370752,"reputation":5480,"user_id":1306024,"display_name":"k5_"},"score":0,"creation_date":1636991330,"post_id":69973840,"comment_id":123699151,"body_markdown":"Might be a classloading problem, one option that could work is to set all jaxb dependencies as provided","body":"Might be a classloading problem, one option that could work is to set all jaxb dependencies as provided"},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1636998511,"post_id":69973840,"comment_id":123701983,"body_markdown":"That is not possible since the deployment package is deployed on many different JEE application servers Wildfly, jboss, websphere, weblogic ...) and sometimes different versions of a server. The solution can only be to exclude the wildfly provided packages...","body":"That is not possible since the deployment package is deployed on many different JEE application servers Wildfly, jboss, websphere, weblogic ...) and sometimes different versions of a server. The solution can only be to exclude the wildfly provided packages..."}],"answers":[{"tags":[],"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637080508,"creation_date":1636998239,"answer_id":69978628,"question_id":69973840,"body_markdown":"I found **two** working solutions:\r\n\r\n 1. Adding a startup property to the wildfly startscript `-Djavax.xml.bind.JAXBContextFactory=com.sun.xml.bind.v2.ContextFactory`\r\n 2. Aligning the JAXB libraries of my application with the wildfly JAXB libs\r\n\r\n**Background and some details for the 2nd solution:**\r\n\r\nThe JAXB used in wildfly 19 has been updated (cp. [1][1],[2][2]). \r\nSince nothing worked I started debugging it. First the working version on wildfly 18 and then the non working version. The corresponding code is :\r\n\r\n     MarshallerImpl.java:\r\n     ...\r\n     if( ENCODING_HANDLER.equals(name) || ENCODING_HANDLER2.equals(name)) {\r\n                if(!(value instanceof CharacterEscapeHandler)) //&lt;- fails here!\r\n                    throw new PropertyException(\r\n                        Messages.MUST_BE_X.format(\r\n                                name,\r\n                                CharacterEscapeHandler.class.getName(),\r\n                                value.getClass().getName() ) );\r\n                escapeHandler = (CharacterEscapeHandler)value;\r\n                return;\r\n            }\r\n\r\nBut for the non working version the debugger jumped into an area which was obviously incorrect thus I knew that a different version of JAXB was used.\r\nSo I did the following:\r\n\r\n1. I checked what jaxb version is bundled with wildfly. `WILDFLY_HOME/modules/system/layers/base/com/sun/xml/bind/main`\r\n2. I used the exact same versions in my `pom.xml` file \r\n\r\n**=&gt; Then it was working!**\r\n\r\nWhat I don&#39;t understand is that I tried excluding the wildfly-packaged-jaxb but that didn&#39;t help. So this will remain a mystery why my exclusion of JAXB via the jboss-deployment-structure? didn&#39;t work...\r\n\r\n  [1]: https://issues.redhat.com/browse/JBEAP-18292\r\n  [2]: https://bugster.forgerock.org/jira/browse/OPENAM-16100\r\n  [3]: https://access.redhat.com/solutions/5016611","title":"PropertyException after wildfly update: property CharacterEscapeHandler must be an instance of type CharacterEscapeHandler","body":"<p>I found <strong>two</strong> working solutions:</p>\n<ol>\n<li>Adding a startup property to the wildfly startscript <code>-Djavax.xml.bind.JAXBContextFactory=com.sun.xml.bind.v2.ContextFactory</code></li>\n<li>Aligning the JAXB libraries of my application with the wildfly JAXB libs</li>\n</ol>\n<p><strong>Background and some details for the 2nd solution:</strong></p>\n<p>The JAXB used in wildfly 19 has been updated (cp. <a href=\"https://issues.redhat.com/browse/JBEAP-18292\" rel=\"nofollow noreferrer\">1</a>,<a href=\"https://bugster.forgerock.org/jira/browse/OPENAM-16100\" rel=\"nofollow noreferrer\">2</a>).\nSince nothing worked I started debugging it. First the working version on wildfly 18 and then the non working version. The corresponding code is :</p>\n<pre><code> MarshallerImpl.java:\n ...\n if( ENCODING_HANDLER.equals(name) || ENCODING_HANDLER2.equals(name)) {\n            if(!(value instanceof CharacterEscapeHandler)) //&lt;- fails here!\n                throw new PropertyException(\n                    Messages.MUST_BE_X.format(\n                            name,\n                            CharacterEscapeHandler.class.getName(),\n                            value.getClass().getName() ) );\n            escapeHandler = (CharacterEscapeHandler)value;\n            return;\n        }\n</code></pre>\n<p>But for the non working version the debugger jumped into an area which was obviously incorrect thus I knew that a different version of JAXB was used.\nSo I did the following:</p>\n<ol>\n<li>I checked what jaxb version is bundled with wildfly. <code>WILDFLY_HOME/modules/system/layers/base/com/sun/xml/bind/main</code></li>\n<li>I used the exact same versions in my <code>pom.xml</code> file</li>\n</ol>\n<p><strong>=&gt; Then it was working!</strong></p>\n<p>What I don't understand is that I tried excluding the wildfly-packaged-jaxb but that didn't help. So this will remain a mystery why my exclusion of JAXB via the jboss-deployment-structure? didn't work...</p>\n"},{"tags":[],"owner":{"account_id":403585,"reputation":2211,"user_id":771431,"accept_rate":70,"display_name":"xonya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660146291,"creation_date":1660146291,"answer_id":73309162,"question_id":69973840,"body_markdown":"I was able to fix this adding the following `jboss-deployment-structure.xml`  to the application (in `WEB-INF` folder):\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n&lt;jboss-deployment-structure xmlns=&quot;urn:jboss:deployment-structure:1.2&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n    &lt;deployment&gt;\r\n        &lt;exclude-subsystems&gt;\r\n            &lt;subsystem name=&quot;webservices&quot; /&gt;\r\n        &lt;/exclude-subsystems&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;module name=&quot;javax.xml.bind.api&quot; /&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/deployment&gt;\r\n&lt;/jboss-deployment-structure&gt;\r\n```","title":"PropertyException after wildfly update: property CharacterEscapeHandler must be an instance of type CharacterEscapeHandler","body":"<p>I was able to fix this adding the following <code>jboss-deployment-structure.xml</code>  to the application (in <code>WEB-INF</code> folder):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;jboss-deployment-structure xmlns=&quot;urn:jboss:deployment-structure:1.2&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\n    &lt;deployment&gt;\n        &lt;exclude-subsystems&gt;\n            &lt;subsystem name=&quot;webservices&quot; /&gt;\n        &lt;/exclude-subsystems&gt;\n        &lt;exclusions&gt;\n            &lt;module name=&quot;javax.xml.bind.api&quot; /&gt;\n        &lt;/exclusions&gt;\n    &lt;/deployment&gt;\n&lt;/jboss-deployment-structure&gt;\n</code></pre>\n"}],"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1040,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69978628,"answer_count":2,"score":1,"last_activity_date":1660146291,"creation_date":1636976473,"question_id":69973840,"body_markdown":"Some time ago I implemented a [CustomCharacterEscapeHandler][1] and it worked fine up-to Wildfly-18.0.1. Now when updating to Wildfly 19 or higher I get the following exception:\r\n\r\n    javax.xml.bind.PropertyException: property &quot;com.sun.xml.bind.marshaller.CharacterEscapeHandler&quot; must be an instance of type com.sun.xml.bind.marshaller.CharacterEscapeHandler, not my.package.CustomCharacterEscapeHandler\r\n    \tat com.sun.xml.bind.v2.runtime.MarshallerImpl.setProperty(MarshallerImpl.java:489)\r\n\r\nBut my CustomCharacterEscapeHandler implements exactly the mentioned interface!\r\n\r\nThe maven `pom.xml` looks like this:\r\n\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n     &lt;version&gt;2.2.12&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n     &lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n     &lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jaxb-xjc&lt;/artifactId&gt;\r\n     &lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI researched a lot and did try out all the solutions I could find ([1][2], [2][3], [3][4], [4][5], [5][6]) but many questions remain unanswered ([6][7],[7][8],[8][9],[9][10],[10][11]) and the things mentioned did not work. So I tried:\r\n\r\n- added jaxb.properties containing `javax.xml.bind.context.factory=com.sun.xml.bind.v2.ContextFactory`\r\n- updated to newer JAXB Versions\r\n- added a startup property `-Djavax.xml.bind.context.factory=com.sun.xml.bind.v2.ContextFactory`\r\n- added the EscapHandler as inline code `jaxbMarshaller.setProperty(CharacterEscapeHandler.class.getName(), (CharacterEscapeHandler) (chars, start, length, b, writer) -&gt; ... );`\r\n- tried adding exclusion(s) in the `jboss-deployment-structure` (com.sun.xml.bind, javax.xml.bind.api,...) and also tried the opposite to add them as dependencies\r\n\r\n**However nothing worked so far. Any ideas how to fix this?**\r\n\r\n \r\n\r\n\r\n  [1]: http://www.tutego.de/blog/javainsel/2019/11/snippet-jaxb-and-cdata-contenthandler-with-characterescapehandler/\r\n  [2]: https://stackoverflow.com/questions/50473101/jaxb-wont-accept-customescapehandler\r\n  [3]: https://stackoverflow.com/questions/54744999/error-while-converting-object-to-xml-using-jaxb-with-custom-character-escape-han/54745591\r\n  [4]: https://groups.google.com/g/jbpm-development/c/UHZL3UKXxzs?pli=1\r\n  [5]: https://stackoverflow.com/questions/28696160/error-while-serializing-timestamp-element-occured-while-performing-canonicalizat\r\n  [6]: https://bugster.forgerock.org/jira/browse/OPENAM-16100\r\n  [7]: https://stackoverflow.com/questions/48108903/javax-xml-bind-propertyexception-on-docx4j-bundle-when-loading-document\r\n  [8]: https://stackoverflow.com/questions/55623139/karaf-servicemix-weird-instanceof-behaviour\r\n  [9]: https://developer.jboss.org/thread/263862\r\n  [10]: https://issues.apache.org/jira/browse/CAMEL-9353\r\n  [11]: https://cmsdk.com/java/jaxb-marshall--property-characterescapehandler-must-be-a-instance-of-type-com-sun-xml-bind-marshaller-characterescapehandler.html","title":"PropertyException after wildfly update: property CharacterEscapeHandler must be an instance of type CharacterEscapeHandler","body":"<p>Some time ago I implemented a <a href=\"http://www.tutego.de/blog/javainsel/2019/11/snippet-jaxb-and-cdata-contenthandler-with-characterescapehandler/\" rel=\"nofollow noreferrer\">CustomCharacterEscapeHandler</a> and it worked fine up-to Wildfly-18.0.1. Now when updating to Wildfly 19 or higher I get the following exception:</p>\n<pre><code>javax.xml.bind.PropertyException: property &quot;com.sun.xml.bind.marshaller.CharacterEscapeHandler&quot; must be an instance of type com.sun.xml.bind.marshaller.CharacterEscapeHandler, not my.package.CustomCharacterEscapeHandler\n    at com.sun.xml.bind.v2.runtime.MarshallerImpl.setProperty(MarshallerImpl.java:489)\n</code></pre>\n<p>But my CustomCharacterEscapeHandler implements exactly the mentioned interface!</p>\n<p>The maven <code>pom.xml</code> looks like this:</p>\n<pre><code>&lt;dependency&gt;\n &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n &lt;version&gt;2.2.12&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n &lt;version&gt;2.2.11&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n &lt;version&gt;2.2.11&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n &lt;artifactId&gt;jaxb-xjc&lt;/artifactId&gt;\n &lt;version&gt;2.2.11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I researched a lot and did try out all the solutions I could find (<a href=\"https://stackoverflow.com/questions/50473101/jaxb-wont-accept-customescapehandler\">1</a>, <a href=\"https://stackoverflow.com/questions/54744999/error-while-converting-object-to-xml-using-jaxb-with-custom-character-escape-han/54745591\">2</a>, <a href=\"https://groups.google.com/g/jbpm-development/c/UHZL3UKXxzs?pli=1\" rel=\"nofollow noreferrer\">3</a>, <a href=\"https://stackoverflow.com/questions/28696160/error-while-serializing-timestamp-element-occured-while-performing-canonicalizat\">4</a>, <a href=\"https://bugster.forgerock.org/jira/browse/OPENAM-16100\" rel=\"nofollow noreferrer\">5</a>) but many questions remain unanswered (<a href=\"https://stackoverflow.com/questions/48108903/javax-xml-bind-propertyexception-on-docx4j-bundle-when-loading-document\">6</a>,<a href=\"https://stackoverflow.com/questions/55623139/karaf-servicemix-weird-instanceof-behaviour\">7</a>,<a href=\"https://developer.jboss.org/thread/263862\" rel=\"nofollow noreferrer\">8</a>,<a href=\"https://issues.apache.org/jira/browse/CAMEL-9353\" rel=\"nofollow noreferrer\">9</a>,<a href=\"https://cmsdk.com/java/jaxb-marshall--property-characterescapehandler-must-be-a-instance-of-type-com-sun-xml-bind-marshaller-characterescapehandler.html\" rel=\"nofollow noreferrer\">10</a>) and the things mentioned did not work. So I tried:</p>\n<ul>\n<li>added jaxb.properties containing <code>javax.xml.bind.context.factory=com.sun.xml.bind.v2.ContextFactory</code></li>\n<li>updated to newer JAXB Versions</li>\n<li>added a startup property <code>-Djavax.xml.bind.context.factory=com.sun.xml.bind.v2.ContextFactory</code></li>\n<li>added the EscapHandler as inline code <code>jaxbMarshaller.setProperty(CharacterEscapeHandler.class.getName(), (CharacterEscapeHandler) (chars, start, length, b, writer) -&gt; ... );</code></li>\n<li>tried adding exclusion(s) in the <code>jboss-deployment-structure</code> (com.sun.xml.bind, javax.xml.bind.api,...) and also tried the opposite to add them as dependencies</li>\n</ul>\n<p><strong>However nothing worked so far. Any ideas how to fix this?</strong></p>\n"},{"tags":["java","spring-boot","spring-data-jpa","java-money"],"answers":[{"tags":[],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660146180,"creation_date":1660146180,"answer_id":73309142,"question_id":73308841,"body_markdown":"You can use a [constructor expression](https://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#ql-select-clause):\r\n\r\n&gt;  The SELECT clause identifies which objects and values to return as the query results. The expressions discussed in [Section 11.4, “Expressions”](https://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#ql-expressions) are all valid select expressions, except where otherwise noted. See the section [Section 11.10, “Query API”](https://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#ql-api) for information on handling the results depending on the types of values specified in the SELECT clause.\r\n&gt;\r\n&gt; There is a particular expression type that is only valid in the select clause. Hibernate calls this “dynamic instantiation”. JPQL supports some of that feature and calls it a “constructor expression”\r\n\r\nGeneral example:\r\n\r\n```sql\r\nselect new Person(user.name, address)\r\nfrom User as user\r\nleft join user.address as address\r\n```\r\n\r\nBefore you ask, no, you cannot call methods, only constructors. Also, you&#39;ll need to consider the fact that your query may return `null`. You could write a wrapper class.\r\n\r\n```java\r\npublic final class MonetaryAmountWrapper {\r\n  public MonetaryAmountWrapper(final BigDecimal value) {\r\n    this.monetaryAmount = Money.of(value, MoneyUtils.DOLLAR);\r\n  }\r\n\r\n  private final MonetaryAmount monetaryAmount;\r\n}\r\n```","title":"Convert @Query MonetaryAmount result","body":"<p>You can use a <a href=\"https://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#ql-select-clause\" rel=\"nofollow noreferrer\">constructor expression</a>:</p>\n<blockquote>\n<p>The SELECT clause identifies which objects and values to return as the query results. The expressions discussed in <a href=\"https://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#ql-expressions\" rel=\"nofollow noreferrer\">Section 11.4, “Expressions”</a> are all valid select expressions, except where otherwise noted. See the section <a href=\"https://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#ql-api\" rel=\"nofollow noreferrer\">Section 11.10, “Query API”</a> for information on handling the results depending on the types of values specified in the SELECT clause.</p>\n<p>There is a particular expression type that is only valid in the select clause. Hibernate calls this “dynamic instantiation”. JPQL supports some of that feature and calls it a “constructor expression”</p>\n</blockquote>\n<p>General example:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select new Person(user.name, address)\nfrom User as user\nleft join user.address as address\n</code></pre>\n<p>Before you ask, no, you cannot call methods, only constructors. Also, you'll need to consider the fact that your query may return <code>null</code>. You could write a wrapper class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class MonetaryAmountWrapper {\n  public MonetaryAmountWrapper(final BigDecimal value) {\n    this.monetaryAmount = Money.of(value, MoneyUtils.DOLLAR);\n  }\n\n  private final MonetaryAmount monetaryAmount;\n}\n</code></pre>\n"}],"owner":{"account_id":4710206,"reputation":333,"user_id":3810920,"accept_rate":67,"display_name":"arnaldop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73309142,"answer_count":1,"score":1,"last_activity_date":1660146180,"creation_date":1660144799,"question_id":73308841,"body_markdown":"I just converted all of my `java.math.BigDecimal` usages to `javax.money.MonetaryAmount` (where they represented money). I am currently &quot;assuming&quot; the currency to be USD with the help of a `MoneyUtils` to avoid adding extra database columns that will only contain &quot;USD&quot; in them. This can be seen in the next 2 snippets.\r\n\r\n```java\r\n@Converter(autoApply = true)\r\npublic class MonetaryAmountConverter\r\n        implements AttributeConverter&lt;MonetaryAmount, BigDecimal&gt; {\r\n\r\n    @Override\r\n    public BigDecimal convertToDatabaseColumn(final MonetaryAmount monetaryAmount) {\r\n        return DefaultUtils.defaultOrNull(\r\n                monetaryAmount,\r\n                ma -&gt; ma.getNumber().numberValue(BigDecimal.class));\r\n    }\r\n\r\n    @Override\r\n    public MonetaryAmount convertToEntityAttribute(final BigDecimal monetaryAmountValue) {\r\n        if (monetaryAmountValue == null) {\r\n            return null;\r\n        } else {\r\n            return MoneyUtils.of(monetaryAmountValue);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic final class MoneyUtils {\r\n    public static final CurrencyUnit DOLLAR = Monetary.getCurrency(Locale.US);\r\n    public static MonetaryAmount of(@NonNull final BigDecimal value) {\r\n        return Money.of(value, MoneyUtils.DOLLAR);\r\n    }\r\n}\r\n```\r\n\r\nI have this `@Repository` method that should give me a sum, which could be `null` if no rows match:\r\n```java\r\n@Query(&quot;query that can return null or a numeric&quot;)\r\nMonetaryAmount sumSomeData();\r\n```\r\n\r\nThe problem is that it doesn&#39;t go through my `MonetaryAmountConverter`. I tried adding a `@Convert` directly to the method but it didn&#39;t work.\r\n```java\r\n@Query(&quot;query that can return null or a numeric&quot;)\r\n@Convert(converter = MonetaryAmountConverter.class)\r\nMonetaryAmount sumSomeData();\r\n```\r\n\r\nSo it appears that an `AttributeConverter` with `@Converter(autoApply = true)` applies to JPA Entity fields, but not to method return types, even when `@Convert` is added to the method signature.\r\n\r\n- Is there something I am missing?\r\n- Is there a way to do this without needing to do the conversion manually in the caller of this repository method?","title":"Convert @Query MonetaryAmount result","body":"<p>I just converted all of my <code>java.math.BigDecimal</code> usages to <code>javax.money.MonetaryAmount</code> (where they represented money). I am currently &quot;assuming&quot; the currency to be USD with the help of a <code>MoneyUtils</code> to avoid adding extra database columns that will only contain &quot;USD&quot; in them. This can be seen in the next 2 snippets.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Converter(autoApply = true)\npublic class MonetaryAmountConverter\n        implements AttributeConverter&lt;MonetaryAmount, BigDecimal&gt; {\n\n    @Override\n    public BigDecimal convertToDatabaseColumn(final MonetaryAmount monetaryAmount) {\n        return DefaultUtils.defaultOrNull(\n                monetaryAmount,\n                ma -&gt; ma.getNumber().numberValue(BigDecimal.class));\n    }\n\n    @Override\n    public MonetaryAmount convertToEntityAttribute(final BigDecimal monetaryAmountValue) {\n        if (monetaryAmountValue == null) {\n            return null;\n        } else {\n            return MoneyUtils.of(monetaryAmountValue);\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public final class MoneyUtils {\n    public static final CurrencyUnit DOLLAR = Monetary.getCurrency(Locale.US);\n    public static MonetaryAmount of(@NonNull final BigDecimal value) {\n        return Money.of(value, MoneyUtils.DOLLAR);\n    }\n}\n</code></pre>\n<p>I have this <code>@Repository</code> method that should give me a sum, which could be <code>null</code> if no rows match:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;query that can return null or a numeric&quot;)\nMonetaryAmount sumSomeData();\n</code></pre>\n<p>The problem is that it doesn't go through my <code>MonetaryAmountConverter</code>. I tried adding a <code>@Convert</code> directly to the method but it didn't work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;query that can return null or a numeric&quot;)\n@Convert(converter = MonetaryAmountConverter.class)\nMonetaryAmount sumSomeData();\n</code></pre>\n<p>So it appears that an <code>AttributeConverter</code> with <code>@Converter(autoApply = true)</code> applies to JPA Entity fields, but not to method return types, even when <code>@Convert</code> is added to the method signature.</p>\n<ul>\n<li>Is there something I am missing?</li>\n<li>Is there a way to do this without needing to do the conversion manually in the caller of this repository method?</li>\n</ul>\n"},{"tags":["java","spring","spring-boot","keycloak","saml"],"answers":[{"tags":[],"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660145964,"creation_date":1660145964,"answer_id":73309095,"question_id":73308940,"body_markdown":"I managed to get what I needed like this (remember `data.getName()` returns member):\r\n\r\n    String[] values = credential.getAttributeAsStringArray(data.getName());\r\n    System.out.println(values[0]); // prints /ANOTHER_TEST_GROUP\r\n    System.out.println(values[1]); // prints /TEST_GROUP\r\n\r\nStill I am leaving the post open if anyone knows another ways","title":"How to read multiple AttributeValues from a SAML response?","body":"<p>I managed to get what I needed like this (remember <code>data.getName()</code> returns member):</p>\n<pre><code>String[] values = credential.getAttributeAsStringArray(data.getName());\nSystem.out.println(values[0]); // prints /ANOTHER_TEST_GROUP\nSystem.out.println(values[1]); // prints /TEST_GROUP\n</code></pre>\n<p>Still I am leaving the post open if anyone knows another ways</p>\n"}],"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660145964,"creation_date":1660145247,"question_id":73308940,"body_markdown":"I am using Keycloak SAML, SpringBoot (Java), and I am getting a response which contains the groups that the user is in, so I have this attribute inside the SAML response:\r\n\r\n    &lt;saml:Attribute Name=&quot;member&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\r\n        &lt;saml:AttributeValue xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:type=&quot;xs:string&quot;&gt;/ANOTHER_TEST_GROUP&lt;/saml:AttributeValue&gt;\r\n        &lt;saml:AttributeValue xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:type=&quot;xs:string&quot;&gt;/TEST_GROUP&lt;/saml:AttributeValue&gt;\r\n       &lt;/saml:Attribute&gt;\r\n\r\nThe attribute name is member, and he has 2 values &quot;/ANOTHER_TEST_GROUP&quot; and &quot;TEST_GROUP&quot; but in my code when I try to get &quot;member&quot; value like so (`data.getName() returns &quot;member&quot;`):\r\n\r\n    model.addAttribute(data.getName(), credential.getAttributeAsString(data.getName()));\r\n\r\nit only get the first value which is in this case &quot;/ANOTHER_TEST_GROUP&quot;, I was expecting to get the list of values.\r\n\r\nAlso I tried to get each individual value like so:\r\n\r\n    import from org.opensaml.xml.XMLObject\r\n    \tXMLObject value1 = data.getAttributeValues().get(0);\r\n    \tXMLObject value2 = data.getAttributeValues().get(1);\r\n\r\nbut after the `get(index)` method there is no useful method to get to the value it contains","title":"How to read multiple AttributeValues from a SAML response?","body":"<p>I am using Keycloak SAML, SpringBoot (Java), and I am getting a response which contains the groups that the user is in, so I have this attribute inside the SAML response:</p>\n<pre><code>&lt;saml:Attribute Name=&quot;member&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\n    &lt;saml:AttributeValue xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:type=&quot;xs:string&quot;&gt;/ANOTHER_TEST_GROUP&lt;/saml:AttributeValue&gt;\n    &lt;saml:AttributeValue xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:type=&quot;xs:string&quot;&gt;/TEST_GROUP&lt;/saml:AttributeValue&gt;\n   &lt;/saml:Attribute&gt;\n</code></pre>\n<p>The attribute name is member, and he has 2 values &quot;/ANOTHER_TEST_GROUP&quot; and &quot;TEST_GROUP&quot; but in my code when I try to get &quot;member&quot; value like so (<code>data.getName() returns &quot;member&quot;</code>):</p>\n<pre><code>model.addAttribute(data.getName(), credential.getAttributeAsString(data.getName()));\n</code></pre>\n<p>it only get the first value which is in this case &quot;/ANOTHER_TEST_GROUP&quot;, I was expecting to get the list of values.</p>\n<p>Also I tried to get each individual value like so:</p>\n<pre><code>import from org.opensaml.xml.XMLObject\n    XMLObject value1 = data.getAttributeValues().get(0);\n    XMLObject value2 = data.getAttributeValues().get(1);\n</code></pre>\n<p>but after the <code>get(index)</code> method there is no useful method to get to the value it contains</p>\n"},{"tags":["java","android","android-viewpager","gesture","android-viewpager2"],"comments":[{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1660122509,"post_id":73303468,"comment_id":129455904,"body_markdown":"Why not just have 1 viewpager and then split the Fragment up in to the 2 parts that you want to scroll synchronously? Why have 2 viewpagers when you could have 1.","body":"Why not just have 1 viewpager and then split the Fragment up in to the 2 parts that you want to scroll synchronously? Why have 2 viewpagers when you could have 1."},{"owner":{"account_id":17543042,"reputation":73,"user_id":12724871,"display_name":"theoyuncu8"},"score":0,"creation_date":1660124023,"post_id":73303468,"comment_id":129456436,"body_markdown":"because i need it. I will use a tablayout and when the user scrolls the viewpager the top one should also scroll","body":"because i need it. I will use a tablayout and when the user scrolls the viewpager the top one should also scroll"},{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1660124351,"post_id":73303468,"comment_id":129456566,"body_markdown":"&quot;because i need it&quot;, sounds like you have mad some bad implementation decisions that will cause you extra work.","body":"&quot;because i need it&quot;, sounds like you have mad some bad implementation decisions that will cause you extra work."},{"owner":{"account_id":17543042,"reputation":73,"user_id":12724871,"display_name":"theoyuncu8"},"score":0,"creation_date":1660131919,"post_id":73303468,"comment_id":129459334,"body_markdown":"The top viewpager is in a collspsing layout.. and when I change the page with the bottom viewpager, I want it to change in the top viewpager.. do you have any suggestions for a solution?","body":"The top viewpager is in a collspsing layout.. and when I change the page with the bottom viewpager, I want it to change in the top viewpager.. do you have any suggestions for a solution?"}],"answers":[{"tags":[],"owner":{"account_id":20521366,"reputation":119,"user_id":15060875,"display_name":"pykereaper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660132136,"creation_date":1660132136,"answer_id":73305773,"question_id":73303468,"body_markdown":"It&#39;s not 100% synchronously, pixel-wise. But an easy and clean solution, which also looks very sleek (imho) could be the following:\r\n\r\n```kotlin\r\npagerBottom.registerOnPageChangeCallback(object : OnPageChangeCallback() {\r\n   override fun onPageSelected(position: Int) {\r\n      super.onPageSelected(position)\r\n      pagerTop.setCurrentItem(position, true)\r\n   }\r\n\r\n})\r\n```\r\n\r\nHere, a listener is added to the bottom `ViewPager2`. When a page change is detected, a smooth scroll is done on the top `ViewPager2`. Only works, if both pagers have the same amount of pages, of course.","title":"How can I move two viewpager2 synchronously?","body":"<p>It's not 100% synchronously, pixel-wise. But an easy and clean solution, which also looks very sleek (imho) could be the following:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>pagerBottom.registerOnPageChangeCallback(object : OnPageChangeCallback() {\n   override fun onPageSelected(position: Int) {\n      super.onPageSelected(position)\n      pagerTop.setCurrentItem(position, true)\n   }\n\n})\n</code></pre>\n<p>Here, a listener is added to the bottom <code>ViewPager2</code>. When a page change is detected, a smooth scroll is done on the top <code>ViewPager2</code>. Only works, if both pagers have the same amount of pages, of course.</p>\n"}],"owner":{"account_id":17543042,"reputation":73,"user_id":12724871,"display_name":"theoyuncu8"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660145881,"creation_date":1660121977,"question_id":73303468,"body_markdown":"I have a layout design that looks like the drawing below. When I move the viewpager2 below, I want the top viewpager2 to move synchronously. the solutions i found on the internet didn&#39;t work\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nmyViewPager2.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\r\n        @Override\r\n        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\r\n// myViewPager1 (top) move to left or right sync with myViewPager2 (below)\r\n            super.onPageScrolled(position, positionOffset, positionOffsetPixels);\r\n        }\r\n\r\n        @Override\r\n        public void onPageSelected(int position) {\r\n            super.onPageSelected(position);\r\n        }\r\n\r\n        @Override\r\n        public void onPageScrollStateChanged(int state) {\r\n            super.onPageScrollStateChanged(state);\r\n        }\r\n    });\r\n\r\n```\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IAum8.jpg","title":"How can I move two viewpager2 synchronously?","body":"<p>I have a layout design that looks like the drawing below. When I move the viewpager2 below, I want the top viewpager2 to move synchronously. the solutions i found on the internet didn't work</p>\n<p><a href=\"https://i.stack.imgur.com/IAum8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IAum8.jpg\" alt=\"enter image description here\" /></a></p>\n<pre><code>myViewPager2.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\n        @Override\n        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {\n// myViewPager1 (top) move to left or right sync with myViewPager2 (below)\n            super.onPageScrolled(position, positionOffset, positionOffsetPixels);\n        }\n\n        @Override\n        public void onPageSelected(int position) {\n            super.onPageSelected(position);\n        }\n\n        @Override\n        public void onPageScrollStateChanged(int state) {\n            super.onPageScrollStateChanged(state);\n        }\n    });\n\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1660143005,"post_id":73306978,"comment_id":129464035,"body_markdown":"You should show your entities, but it sounds like you&#39;ve mapped the same relationship in two ways - treating the relational table as a relationship AND as an entity. Why? Why not have your classes setup to use a 1:M to the new entity? You will need to be able to access and set attributes on the &#39;relationship&#39; entries, but you can write accessors that only return a list of the referenced entity (like a M:M), so your model usage doesn&#39;t have to change. If you do both though, you will have inconsistencies and problems keeping them in synch, and not overwriting each other.","body":"You should show your entities, but it sounds like you&#39;ve mapped the same relationship in two ways - treating the relational table as a relationship AND as an entity. Why? Why not have your classes setup to use a 1:M to the new entity? You will need to be able to access and set attributes on the &#39;relationship&#39; entries, but you can write accessors that only return a list of the referenced entity (like a M:M), so your model usage doesn&#39;t have to change. If you do both though, you will have inconsistencies and problems keeping them in synch, and not overwriting each other."},{"owner":{"account_id":20561213,"reputation":160,"user_id":15091679,"display_name":"Tim Lammarsch"},"score":0,"creation_date":1660145179,"post_id":73306978,"comment_id":129464961,"body_markdown":"I already suspected as much. As to why, I probably &quot;hurt&quot; from having an n:m relationship and not modelling it in the entity at all. However, after some testing, I have to agree that modelling it twice does create more problems than solving anything. I think I got what you are proposing, and I will report if that works for me.","body":"I already suspected as much. As to why, I probably &quot;hurt&quot; from having an n:m relationship and not modelling it in the entity at all. However, after some testing, I have to agree that modelling it twice does create more problems than solving anything. I think I got what you are proposing, and I will report if that works for me."}],"answers":[{"tags":[],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660145206,"creation_date":1660145206,"answer_id":73308932,"question_id":73306978,"body_markdown":"[This](https://stackoverflow.com/questions/36129040/hibernate-join-table-with-additional-column) should help.\r\n\r\nHere is how I do it:\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;person&quot;, schema = &quot;crm&quot;)\r\npublic final class Person implements Serializable {\r\n  @Id\r\n  @Column(name = &quot;id&quot;, unique = true, nullable = false, updatable = false, columnDefinition = &quot;bigserial&quot;)\r\n  private Long id;\r\n\r\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;person&quot;, orphanRemoval = true)\r\n  private Set&lt;PersonEmail&gt; emails = new HashSet&lt;&gt;();\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;email&quot;, schema = &quot;crm&quot;)\r\npublic final class Email implements Serializable {\r\n  @Id\r\n  @Column(name = &quot;id&quot;, unique = true, nullable = false, updatable = false, columnDefinition = &quot;bigserial&quot;)\r\n  private Long id;\r\n\r\n  @Column(name = &quot;email&quot;, nullable = false, length = 64, columnDefinition = &quot;varchar(64)&quot;)\r\n  private String localPart;\r\n\r\n  @Column(name = &quot;domain&quot;, nullable = false, length = 255, columnDefinition = &quot;varchar(255)&quot;)\r\n  private String domain;\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;person_email&quot;, schema = &quot;crm&quot;)\r\npublic final class PersonEmail implements Serializable {\r\n  @EmbeddedId\r\n  private PersonEmailId id;\r\n\r\n  // The mapped objects are fetched lazily.\r\n  // This is a choice.\r\n  @ToString.Exclude\r\n  @MapsId(&quot;personId&quot;)\r\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n  private Person person;\r\n\r\n  @ToString.Exclude\r\n  @MapsId(&quot;emailId&quot;)\r\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n  private Email email;\r\n\r\n  // Here&#39;s an extra column.\r\n  @Column(name = &quot;type&quot;, nullable = false, columnDefinition = &quot;email_type_t&quot;)\r\n  @Convert(converter = EmailType.EmailTypeConverter.class)\r\n  private EmailType type;\r\n\r\n  public final void setPerson(final Person person) {\r\n    this.person = person;\r\n\r\n    id.setPersonId(this.person.getId());\r\n  }\r\n\r\n  public final void setEmail(final Email email) {\r\n    this.email = email;\r\n\r\n    id.setEmailId(this.email.getId());\r\n  }\r\n\r\n  @Embeddable\r\n  public static final class PersonEmailId implements Serializable {\r\n    @Column(name = &quot;person_id&quot;, nullable = false, insertable = false, updatable = false, columnDefinition = &quot;bigint&quot;)\r\n    private Long personId;\r\n\r\n    @Column(name = &quot;email_id&quot;, nullable = false, insertable = false, updatable = false, columnDefinition = &quot;bigint&quot;)\r\n    private Long emailId;\r\n}\r\n```\r\n","title":"Circumventing Attribute Limitations of Many-to-Many Relations in JPA","body":"<p><a href=\"https://stackoverflow.com/questions/36129040/hibernate-join-table-with-additional-column\">This</a> should help.</p>\n<p>Here is how I do it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;person&quot;, schema = &quot;crm&quot;)\npublic final class Person implements Serializable {\n  @Id\n  @Column(name = &quot;id&quot;, unique = true, nullable = false, updatable = false, columnDefinition = &quot;bigserial&quot;)\n  private Long id;\n\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;person&quot;, orphanRemoval = true)\n  private Set&lt;PersonEmail&gt; emails = new HashSet&lt;&gt;();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;email&quot;, schema = &quot;crm&quot;)\npublic final class Email implements Serializable {\n  @Id\n  @Column(name = &quot;id&quot;, unique = true, nullable = false, updatable = false, columnDefinition = &quot;bigserial&quot;)\n  private Long id;\n\n  @Column(name = &quot;email&quot;, nullable = false, length = 64, columnDefinition = &quot;varchar(64)&quot;)\n  private String localPart;\n\n  @Column(name = &quot;domain&quot;, nullable = false, length = 255, columnDefinition = &quot;varchar(255)&quot;)\n  private String domain;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;person_email&quot;, schema = &quot;crm&quot;)\npublic final class PersonEmail implements Serializable {\n  @EmbeddedId\n  private PersonEmailId id;\n\n  // The mapped objects are fetched lazily.\n  // This is a choice.\n  @ToString.Exclude\n  @MapsId(&quot;personId&quot;)\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\n  private Person person;\n\n  @ToString.Exclude\n  @MapsId(&quot;emailId&quot;)\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\n  private Email email;\n\n  // Here's an extra column.\n  @Column(name = &quot;type&quot;, nullable = false, columnDefinition = &quot;email_type_t&quot;)\n  @Convert(converter = EmailType.EmailTypeConverter.class)\n  private EmailType type;\n\n  public final void setPerson(final Person person) {\n    this.person = person;\n\n    id.setPersonId(this.person.getId());\n  }\n\n  public final void setEmail(final Email email) {\n    this.email = email;\n\n    id.setEmailId(this.email.getId());\n  }\n\n  @Embeddable\n  public static final class PersonEmailId implements Serializable {\n    @Column(name = &quot;person_id&quot;, nullable = false, insertable = false, updatable = false, columnDefinition = &quot;bigint&quot;)\n    private Long personId;\n\n    @Column(name = &quot;email_id&quot;, nullable = false, insertable = false, updatable = false, columnDefinition = &quot;bigint&quot;)\n    private Long emailId;\n}\n</code></pre>\n"}],"owner":{"account_id":20561213,"reputation":160,"user_id":15091679,"display_name":"Tim Lammarsch"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73308932,"answer_count":1,"score":1,"last_activity_date":1660145206,"creation_date":1660137192,"question_id":73306978,"body_markdown":"I am using PostgreSQL 12.11, JPA 3.1.0, and Hibernate 5.6.10. This might become important because I am doing things that apparently do not work with JPA 2.0.\r\n\r\nMy goal is to add an attribute to a many-to-many relationship. I found [this][1] posting. @Mikko Maunu states that &quot;There is no concept of having additional persistent attribute in relation in JPA (2.0).&quot; To me, this sounds like what I want to do is not possible. However, the answer is rather old and might not be complete anymore.\r\n\r\nBeside the time gap and the version gap, this is, in my opinion, a new question because I am doing something that is probably questionable and not part of the original thread.\r\n\r\nWhat I did is this:\r\n\r\n1. Create a `@ManyToMany` relationship in JPA and specify a `@JoinTable`.\r\n2. Manually define an entity with identical table name to the table specified in 1. For this table, I chose a composite primary key using `@IdClass`. I also added my attribute.\r\n3. Inside one of the n:m-connected entities, create a `@OneToMany` relationship to the connection-table-entity created in 2. However, I did not create a corresponding `@ManyToOne` relationship as that would have created an error.\r\n\r\nAs a result, I can access the original entities and their relation as many-to-many, but also the relation itself, which is not an entity in the original ERM, but it is for JPA. First tests show this seems to be working.\r\n\r\nI am aware, however, that I basically access the same part of the persistence (the PostgreSQL database) through two different ways at the same time.\r\n\r\nNow my questions are:\r\n1. Is this a valid way to do it? Or will I get in bad trouble at one point?\r\n2. Is there a situation where I will need to refresh to prevent trouble?\r\n3. Is this something new in JPA &gt; 2.0, or just an extension to the original answer?\r\n\r\n  [1]: https://stackoverflow.com/questions/9816932/mapping-extra-attribute-in-a-join-table-jpa-2","title":"Circumventing Attribute Limitations of Many-to-Many Relations in JPA","body":"<p>I am using PostgreSQL 12.11, JPA 3.1.0, and Hibernate 5.6.10. This might become important because I am doing things that apparently do not work with JPA 2.0.</p>\n<p>My goal is to add an attribute to a many-to-many relationship. I found <a href=\"https://stackoverflow.com/questions/9816932/mapping-extra-attribute-in-a-join-table-jpa-2\">this</a> posting. @Mikko Maunu states that &quot;There is no concept of having additional persistent attribute in relation in JPA (2.0).&quot; To me, this sounds like what I want to do is not possible. However, the answer is rather old and might not be complete anymore.</p>\n<p>Beside the time gap and the version gap, this is, in my opinion, a new question because I am doing something that is probably questionable and not part of the original thread.</p>\n<p>What I did is this:</p>\n<ol>\n<li>Create a <code>@ManyToMany</code> relationship in JPA and specify a <code>@JoinTable</code>.</li>\n<li>Manually define an entity with identical table name to the table specified in 1. For this table, I chose a composite primary key using <code>@IdClass</code>. I also added my attribute.</li>\n<li>Inside one of the n:m-connected entities, create a <code>@OneToMany</code> relationship to the connection-table-entity created in 2. However, I did not create a corresponding <code>@ManyToOne</code> relationship as that would have created an error.</li>\n</ol>\n<p>As a result, I can access the original entities and their relation as many-to-many, but also the relation itself, which is not an entity in the original ERM, but it is for JPA. First tests show this seems to be working.</p>\n<p>I am aware, however, that I basically access the same part of the persistence (the PostgreSQL database) through two different ways at the same time.</p>\n<p>Now my questions are:</p>\n<ol>\n<li>Is this a valid way to do it? Or will I get in bad trouble at one point?</li>\n<li>Is there a situation where I will need to refresh to prevent trouble?</li>\n<li>Is this something new in JPA &gt; 2.0, or just an extension to the original answer?</li>\n</ol>\n"},{"tags":["java","maven","maven-jar-plugin"],"answers":[{"tags":[],"owner":{"account_id":15182024,"reputation":36,"user_id":10955078,"display_name":"stormguard82"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660144428,"creation_date":1548239537,"answer_id":54325182,"question_id":48299910,"body_markdown":"What version of the maven archiver plugin are you using? Version 3.0.2 has [a bug in ManifestConfiguration.class](https://issues.apache.org/jira/browse/MSHARED-551):\r\n\r\n     public String getClasspathLayoutType()\r\n     {\r\n        return &quot;simple&quot;.equals(this.classpathLayoutType) ? &quot;repository&quot; : this.classpathLayoutType;\r\n      }\r\n\r\nThe method for the ClasspathLayoutType is returning the wrong type.\r\nIn maven archiver version 3.1.1 the bug is fixed, with layout types taking these possible values:\r\n\r\n\r\n      public static final String CLASSPATH_LAYOUT_TYPE_SIMPLE = &quot;simple&quot;;\r\n      public static final String CLASSPATH_LAYOUT_TYPE_REPOSITORY = &quot;repository&quot;;\r\n      public static final String CLASSPATH_LAYOUT_TYPE_CUSTOM = &quot;custom&quot;;\r\n\r\nJust try a higher fixed version.\r\n","title":"Maven: Simple classpathLayoutType is generating classpath similar to repository classpathLayoutType","body":"<p>What version of the maven archiver plugin are you using? Version 3.0.2 has <a href=\"https://issues.apache.org/jira/browse/MSHARED-551\" rel=\"nofollow noreferrer\">a bug in ManifestConfiguration.class</a>:</p>\n<pre><code> public String getClasspathLayoutType()\n {\n    return &quot;simple&quot;.equals(this.classpathLayoutType) ? &quot;repository&quot; : this.classpathLayoutType;\n  }\n</code></pre>\n<p>The method for the ClasspathLayoutType is returning the wrong type.\nIn maven archiver version 3.1.1 the bug is fixed, with layout types taking these possible values:</p>\n<pre><code>  public static final String CLASSPATH_LAYOUT_TYPE_SIMPLE = &quot;simple&quot;;\n  public static final String CLASSPATH_LAYOUT_TYPE_REPOSITORY = &quot;repository&quot;;\n  public static final String CLASSPATH_LAYOUT_TYPE_CUSTOM = &quot;custom&quot;;\n</code></pre>\n<p>Just try a higher fixed version.</p>\n"}],"owner":{"account_id":4060371,"reputation":6747,"user_id":3337089,"accept_rate":86,"display_name":"Nagabhushan S N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1104,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54325182,"answer_count":1,"score":2,"last_activity_date":1660144996,"creation_date":1516188093,"question_id":48299910,"body_markdown":"I have a maven project which does the following: \r\n\r\n - Generates the jar and copies it into `target/dist` directory.  \r\n - Copies all dependency jars into `target/dist/lib` directory.\r\n - Distributes the `dist` folder.\r\n - Requires the dependency jars to be executed in the classpath when running the jar.\r\n \r\nWhen I added this code in my pom: \r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;configuration&gt;\r\n        &lt;archive&gt;\r\n          &lt;manifest&gt;\r\n            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n          &lt;/manifest&gt;\r\n        &lt;/archive&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\nIt generated the following classpath in the jar:\r\n\r\n    Class-Path: lib/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar lib/com/google/code/gson/gson/2.8.2/gson-2.8.2.jar\r\n\r\nObviously, this won&#39;t work because the classpath I need is as follows:\r\n\r\n    Class-Path: lib/commons-logging-1.1.1.jar lib/gson-2.8.2.jar\r\n\r\nI went to[this page][1]. According the documentation, what I need is the default `classpathLayoutType` of `simple`. But the classpath generated is in a repository layout. I even tried explicitly adding the below tag, but with no success. \r\n\r\n    &lt;classpathLayoutType&gt;simple&lt;/classpathLayoutType&gt;\r\n\r\nWhy isn&#39;t the `simple` layout type not working?\r\n\r\n**EDIT**\r\n--------\r\n\r\nI have achieved what I need using custom layout type as follows:\r\n\r\n    &lt;classpathLayoutType&gt;custom&lt;/classpathLayoutType&gt;\r\n    &lt;customClasspathLayout&gt;lib/$${artifact.artifactId}-$${artifact.version}$${dashClassifier?}.$${artifact.extension}&lt;/customClasspathLayout&gt;\r\n\r\n\r\n  [1]: https://maven.apache.org/shared/maven-archiver/examples/classpath.html","title":"Maven: Simple classpathLayoutType is generating classpath similar to repository classpathLayoutType","body":"<p>I have a maven project which does the following:</p>\n<ul>\n<li>Generates the jar and copies it into <code>target/dist</code> directory.</li>\n<li>Copies all dependency jars into <code>target/dist/lib</code> directory.</li>\n<li>Distributes the <code>dist</code> folder.</li>\n<li>Requires the dependency jars to be executed in the classpath when running the jar.</li>\n</ul>\n<p>When I added this code in my pom:</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;archive&gt;\n      &lt;manifest&gt;\n        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n        &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n      &lt;/manifest&gt;\n    &lt;/archive&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>It generated the following classpath in the jar:</p>\n<pre><code>Class-Path: lib/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar lib/com/google/code/gson/gson/2.8.2/gson-2.8.2.jar\n</code></pre>\n<p>Obviously, this won't work because the classpath I need is as follows:</p>\n<pre><code>Class-Path: lib/commons-logging-1.1.1.jar lib/gson-2.8.2.jar\n</code></pre>\n<p>I went to<a href=\"https://maven.apache.org/shared/maven-archiver/examples/classpath.html\" rel=\"nofollow noreferrer\">this page</a>. According the documentation, what I need is the default <code>classpathLayoutType</code> of <code>simple</code>. But the classpath generated is in a repository layout. I even tried explicitly adding the below tag, but with no success.</p>\n<pre><code>&lt;classpathLayoutType&gt;simple&lt;/classpathLayoutType&gt;\n</code></pre>\n<p>Why isn't the <code>simple</code> layout type not working?</p>\n<h2><strong>EDIT</strong></h2>\n<p>I have achieved what I need using custom layout type as follows:</p>\n<pre><code>&lt;classpathLayoutType&gt;custom&lt;/classpathLayoutType&gt;\n&lt;customClasspathLayout&gt;lib/$${artifact.artifactId}-$${artifact.version}$${dashClassifier?}.$${artifact.extension}&lt;/customClasspathLayout&gt;\n</code></pre>\n"},{"tags":["java","css","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1540469721,"post_id":52988670,"comment_id":92883123,"body_markdown":"visibleAmount is the length of the thumb, the value of the scrollbar probably the middle of the thumb, so you can calculate start/end position","body":"visibleAmount is the length of the thumb, the value of the scrollbar probably the middle of the thumb, so you can calculate start/end position"},{"owner":{"account_id":14579297,"reputation":31,"user_id":10530296,"display_name":"Olisepreen"},"score":0,"creation_date":1540470258,"post_id":52988670,"comment_id":92883482,"body_markdown":"if the value is the middle of the thumb, then when the value is 1, start position of the thumb will be less than zero.","body":"if the value is the middle of the thumb, then when the value is 1, start position of the thumb will be less than zero."},{"owner":{"account_id":14579297,"reputation":31,"user_id":10530296,"display_name":"Olisepreen"},"score":0,"creation_date":1540470320,"post_id":52988670,"comment_id":92883521,"body_markdown":"I meant how to get visible value range of the scrollbar.","body":"I meant how to get visible value range of the scrollbar."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1540475448,"post_id":52988670,"comment_id":92887170,"body_markdown":"oops ... good catch, just looked at the sources of ScrollBarSkin, which maps the thumb width to visibleAmount. Then you need to do additional math as long as the value &lt; amount/2 (or &gt; width - amount/2)","body":"oops ... good catch, just looked at the sources of ScrollBarSkin, which maps the thumb width to visibleAmount. Then you need to do additional math as long as the value &lt; amount/2 (or &gt; width - amount/2)"}],"answers":[{"tags":[],"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540476102,"creation_date":1540475517,"answer_id":52991029,"question_id":52988670,"body_markdown":"The `ScrollBar` indicates a position, not a range. The position is available via the `value` property. The `visualAmount` property determines the size of the slider.\r\n\r\nIf `value == max` the thumb is in the rightmost/bottommost position. Your &quot;max value of thumb&quot; would exceed `max`.\r\n\r\nYou should therefore decide how many items to display and calculate `visibleAmount` and `max` based on this:\r\n\r\n    max           = itemCount - displayedItems\r\n    visibleAmount = max * displayedItems / itemCount\r\n\r\nExample for a `ScrollPane`-like implementation:\r\n\r\n    @Override\r\n    public void start(Stage stage) {\r\n        ScrollBar scrollBar = new ScrollBar();\r\n        scrollBar.setOrientation(Orientation.VERTICAL);\r\n        StackPane.setAlignment(scrollBar, Pos.CENTER_RIGHT);\r\n        \r\n        VBox container = new VBox();\r\n        StackPane.setAlignment(container, Pos.TOP_LEFT);\r\n        \r\n        StackPane root = new StackPane(container, scrollBar);\r\n        \r\n        InvalidationListener listener = o -&gt; {\r\n            // adjust scrollbar properties on resize of root or content\r\n            double rootHeight = root.getHeight();\r\n            double contentHeight = container.getHeight();\r\n            \r\n            double max = Math.max(0, contentHeight - rootHeight);\r\n            scrollBar.setMax(max);\r\n            scrollBar.setVisibleAmount(max * rootHeight / contentHeight);\r\n        };\r\n        root.heightProperty().addListener(listener);\r\n        container.heightProperty().addListener(listener);\r\n        \r\n        // move container up based on the scrollbar value\r\n        container.translateYProperty().bind(scrollBar.valueProperty().negate());\r\n        \r\n        // generate some content\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            Rectangle rect = new Rectangle(100, 100, (i &amp; 1) == 0 ? Color.BLACK : Color.LIGHTGRAY);\r\n            container.getChildren().add(rect);\r\n        }\r\n\r\n        Scene scene = new Scene(root, 300, 300);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }","title":"How to get thumb value range of ScrollBar in JavaFX?","body":"<p>The <code>ScrollBar</code> indicates a position, not a range. The position is available via the <code>value</code> property. The <code>visualAmount</code> property determines the size of the slider.</p>\n\n<p>If <code>value == max</code> the thumb is in the rightmost/bottommost position. Your \"max value of thumb\" would exceed <code>max</code>.</p>\n\n<p>You should therefore decide how many items to display and calculate <code>visibleAmount</code> and <code>max</code> based on this:</p>\n\n<pre><code>max           = itemCount - displayedItems\nvisibleAmount = max * displayedItems / itemCount\n</code></pre>\n\n<p>Example for a <code>ScrollPane</code>-like implementation:</p>\n\n<pre><code>@Override\npublic void start(Stage stage) {\n    ScrollBar scrollBar = new ScrollBar();\n    scrollBar.setOrientation(Orientation.VERTICAL);\n    StackPane.setAlignment(scrollBar, Pos.CENTER_RIGHT);\n\n    VBox container = new VBox();\n    StackPane.setAlignment(container, Pos.TOP_LEFT);\n\n    StackPane root = new StackPane(container, scrollBar);\n\n    InvalidationListener listener = o -&gt; {\n        // adjust scrollbar properties on resize of root or content\n        double rootHeight = root.getHeight();\n        double contentHeight = container.getHeight();\n\n        double max = Math.max(0, contentHeight - rootHeight);\n        scrollBar.setMax(max);\n        scrollBar.setVisibleAmount(max * rootHeight / contentHeight);\n    };\n    root.heightProperty().addListener(listener);\n    container.heightProperty().addListener(listener);\n\n    // move container up based on the scrollbar value\n    container.translateYProperty().bind(scrollBar.valueProperty().negate());\n\n    // generate some content\n    for (int i = 0; i &lt; 10; i++) {\n        Rectangle rect = new Rectangle(100, 100, (i &amp; 1) == 0 ? Color.BLACK : Color.LIGHTGRAY);\n        container.getChildren().add(rect);\n    }\n\n    Scene scene = new Scene(root, 300, 300);\n    stage.setScene(scene);\n    stage.show();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26007396,"reputation":1,"user_id":19716940,"display_name":"Prince"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660144561,"creation_date":1659952104,"answer_id":73275914,"question_id":52988670,"body_markdown":"The answer is very simple. Let the height of scrollbar be 600 and height of thumb is 200. Now if you substract the thumb&#39;s height and calculate the value to scroll according to leftover height(400) then there is no need of repressing the max value from the end.\r\n\r\nYou need to use some condition so that the thumb may not exceed the size. As here the thumb(200px) should not exceed 400px height as then it will not be visible to user.","title":"How to get thumb value range of ScrollBar in JavaFX?","body":"<p>The answer is very simple. Let the height of scrollbar be 600 and height of thumb is 200. Now if you substract the thumb's height and calculate the value to scroll according to leftover height(400) then there is no need of repressing the max value from the end.</p>\n<p>You need to use some condition so that the thumb may not exceed the size. As here the thumb(200px) should not exceed 400px height as then it will not be visible to user.</p>\n"}],"owner":{"account_id":14579297,"reputation":31,"user_id":10530296,"display_name":"Olisepreen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":982,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1660144561,"creation_date":1540468434,"question_id":52988670,"body_markdown":"For instance say we have a scrollbar for showing/manipulating data on some application. Scrollbar has min, max values and visible amount as well. But there is a bit confusing thing about the range of the values to be shown according scrollbar value.\r\n\r\nAs an example here is an image\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/rk6bj.png&quot;/&gt;\r\n\r\nand \r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/i5MSm.png&quot;/&gt;\r\n\r\nBut it is calculated according different sides of the thumb of the scrollbar.\r\n\r\nSay I need to show some data from database, and min value will be min id and max value will be max id as well. and consider I want to show 100 items, and I am going to set visible amount to 100 in scrollbar. While scrolling If the value of scroolbar is equal to 1, and getting the range from the database will be as simple as just adding 100 (visible amount) to 1, but this won&#39;t work when the value is equal to max. So that is why I need to get value range of the scrollbar thumb, but when looking at scrollbar source code I could not find the implementation of this feature.\r\n\r\nHow to get min and max values of the thumb or visible value range of the scrollbar?\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/gjCMv.png&quot;/&gt;","title":"How to get thumb value range of ScrollBar in JavaFX?","body":"<p>For instance say we have a scrollbar for showing/manipulating data on some application. Scrollbar has min, max values and visible amount as well. But there is a bit confusing thing about the range of the values to be shown according scrollbar value.</p>\n\n<p>As an example here is an image</p>\n\n<p><img src=\"https://i.stack.imgur.com/rk6bj.png\"/></p>\n\n<p>and </p>\n\n<p><img src=\"https://i.stack.imgur.com/i5MSm.png\"/></p>\n\n<p>But it is calculated according different sides of the thumb of the scrollbar.</p>\n\n<p>Say I need to show some data from database, and min value will be min id and max value will be max id as well. and consider I want to show 100 items, and I am going to set visible amount to 100 in scrollbar. While scrolling If the value of scroolbar is equal to 1, and getting the range from the database will be as simple as just adding 100 (visible amount) to 1, but this won't work when the value is equal to max. So that is why I need to get value range of the scrollbar thumb, but when looking at scrollbar source code I could not find the implementation of this feature.</p>\n\n<p>How to get min and max values of the thumb or visible value range of the scrollbar?</p>\n\n<p><img src=\"https://i.stack.imgur.com/gjCMv.png\"/></p>\n"},{"tags":["java","mysql","spring","sqlite","spring-data-jpa"],"comments":[{"owner":{"account_id":16530625,"reputation":116,"user_id":11943976,"display_name":"KASMI G."},"score":0,"creation_date":1660158059,"post_id":73308018,"comment_id":129469312,"body_markdown":"In your WHERE clause you&#39;re comparing your param with &quot;user_id&quot;, you have not defined that attribute","body":"In your WHERE clause you&#39;re comparing your param with &quot;user_id&quot;, you have not defined that attribute"},{"owner":{"account_id":25887820,"reputation":107,"user_id":19615643,"display_name":"Grimalkin"},"score":1,"creation_date":1660161824,"post_id":73308018,"comment_id":129470533,"body_markdown":"@KASMIG. I think you are right I changed that while switching databases because I like my forgein and primary key to have the same name but I forgot to change It in these queries. Thank you I was loosing my mind","body":"@KASMIG. I think you are right I changed that while switching databases because I like my forgein and primary key to have the same name but I forgot to change It in these queries. Thank you I was loosing my mind"}],"owner":{"account_id":25887820,"reputation":107,"user_id":19615643,"display_name":"Grimalkin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660144163,"creation_date":1660141399,"question_id":73308018,"body_markdown":"When I execute query that is expected to return no results my application crashes, the database that I am currently using is SQLite. When I was using MariaDB this error hasn&#39;t been ocurring, error:\r\n```\r\n2022-08-10 16:10:47.160  WARN 15512 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: null\r\n2022-08-10 16:10:47.160 ERROR 15512 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Query does not return results\r\n2022-08-10 16:10:47.207 ERROR 15512 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.orm.jpa.JpaSystemException: could not extract ResultSet; nested exception is org.hibernate.exception.GenericJDBCException: could not extract ResultSet] with root cause\r\n```\r\nQuery:\r\n```\r\n@Query(value = &quot;SELECT * FROM Port WHERE user_id=:userId&quot;, nativeQuery = true)\r\nPort checkIfUserHasPort(@Param(&quot;userId&quot;) Long userId);\r\n```\r\nExecuting method inside try catch did not work. Any idea how to workaround this?\r\n\r\nPort entity:\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Port {\r\n    @Id\r\n    private int port;\r\n    private boolean active;\r\n    private LocalDateTime expiration;\r\n    @OneToOne\r\n    @JoinColumn(name=&quot;id&quot;)\r\n    private User user;\r\n}\r\n```\r\nUser entity\r\n```\r\n@Entity\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(name = &quot;user&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator = &quot;id_Sequence&quot;)\r\n    @SequenceGenerator(name = &quot;id_Sequence&quot;, sequenceName = &quot;ID_SEQ&quot;)\r\n    private Long id;\r\n    @JsonIgnore\r\n    private String username;\r\n    @JsonIgnore\r\n    private String password;\r\n    @JsonIgnore\r\n    @OneToOne(mappedBy = &quot;user&quot;)\r\n    private Port port;\r\n    @JsonIgnore\r\n    @ManyToMany(fetch = EAGER)\r\n    private Collection&lt;Role&gt; roles = new ArrayList&lt;&gt;();\r\n    @JsonIgnore\r\n    @OneToMany(mappedBy = &quot;user&quot;)\r\n    private Set&lt;Log&gt; logs=new HashSet&lt;&gt;();\r\n}\r\n\r\n```","title":"Spring application crashes when database doesn&#39;t return results","body":"<p>When I execute query that is expected to return no results my application crashes, the database that I am currently using is SQLite. When I was using MariaDB this error hasn't been ocurring, error:</p>\n<pre><code>2022-08-10 16:10:47.160  WARN 15512 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: null\n2022-08-10 16:10:47.160 ERROR 15512 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Query does not return results\n2022-08-10 16:10:47.207 ERROR 15512 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.orm.jpa.JpaSystemException: could not extract ResultSet; nested exception is org.hibernate.exception.GenericJDBCException: could not extract ResultSet] with root cause\n</code></pre>\n<p>Query:</p>\n<pre><code>@Query(value = &quot;SELECT * FROM Port WHERE user_id=:userId&quot;, nativeQuery = true)\nPort checkIfUserHasPort(@Param(&quot;userId&quot;) Long userId);\n</code></pre>\n<p>Executing method inside try catch did not work. Any idea how to workaround this?</p>\n<p>Port entity:</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Port {\n    @Id\n    private int port;\n    private boolean active;\n    private LocalDateTime expiration;\n    @OneToOne\n    @JoinColumn(name=&quot;id&quot;)\n    private User user;\n}\n</code></pre>\n<p>User entity</p>\n<pre><code>@Entity\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name = &quot;user&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator = &quot;id_Sequence&quot;)\n    @SequenceGenerator(name = &quot;id_Sequence&quot;, sequenceName = &quot;ID_SEQ&quot;)\n    private Long id;\n    @JsonIgnore\n    private String username;\n    @JsonIgnore\n    private String password;\n    @JsonIgnore\n    @OneToOne(mappedBy = &quot;user&quot;)\n    private Port port;\n    @JsonIgnore\n    @ManyToMany(fetch = EAGER)\n    private Collection&lt;Role&gt; roles = new ArrayList&lt;&gt;();\n    @JsonIgnore\n    @OneToMany(mappedBy = &quot;user&quot;)\n    private Set&lt;Log&gt; logs=new HashSet&lt;&gt;();\n}\n\n</code></pre>\n"},{"tags":["java","eclipse","junit","java-6"],"comments":[{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660144434,"post_id":73308663,"comment_id":129464661,"body_markdown":"I&#39;m open to install an earlier version of Eclipse (or even vscode) if I knew the last version that worked with java-6. This compatibility matrix however is not easy to find (for mockito and powermock, for instance, I resorted to binary search until I got the versions right).","body":"I&#39;m open to install an earlier version of Eclipse (or even vscode) if I knew the last version that worked with java-6. This compatibility matrix however is not easy to find (for mockito and powermock, for instance, I resorted to binary search until I got the versions right)."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1660146613,"post_id":73308663,"comment_id":129465522,"body_markdown":"Do you know that you can run Eclipse itself under a different JVM than you use for developing and running your code/applications? In your project in Eclipse, have you specified the 1.6 JVM that you&#39;re targeting? If you don&#39;t do that, applications use whatever Java is running Eclipse, by default.","body":"Do you know that you can run Eclipse itself under a different JVM than you use for developing and running your code/applications? In your project in Eclipse, have you specified the 1.6 JVM that you&#39;re targeting? If you don&#39;t do that, applications use whatever Java is running Eclipse, by default."},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660147617,"post_id":73308663,"comment_id":129465932,"body_markdown":"@E-Riz yes. My Eclipse actually runs in a jvm 16 (java.vm.version=16.0.2+7-67). Eclipse grabs all jvm version configuration from maven. I&#39;ve configured installed JREs and execution environments (JavaSE-1.6 specifically). These are all set, and all ok. Actually there lies the problem: eclipse indeed uses jvm 6 to run my tests (as I asked it to do, by means of maven configuration); but I guess eclipse classes were not compiled for java 6, whence the classfile version greater than 50.0. I&#39;m looking for either a workaround or the last eclipse version still compiled for 50.0.","body":"@E-Riz yes. My Eclipse actually runs in a jvm 16 (java.vm.version=16.0.2+7-67). Eclipse grabs all jvm version configuration from maven. I&#39;ve configured installed JREs and execution environments (JavaSE-1.6 specifically). These are all set, and all ok. Actually there lies the problem: eclipse indeed uses jvm 6 to run my tests (as I asked it to do, by means of maven configuration); but I guess eclipse classes were not compiled for java 6, whence the classfile version greater than 50.0. I&#39;m looking for either a workaround or the last eclipse version still compiled for 50.0."},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660147654,"post_id":73308663,"comment_id":129465953,"body_markdown":"@E-Riz by the way: I cannot run this version of Eclipse (2022-03 (4.23.0)) in anything lower than jvm 11.","body":"@E-Riz by the way: I cannot run this version of Eclipse (2022-03 (4.23.0)) in anything lower than jvm 11."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1660149313,"post_id":73308663,"comment_id":129466602,"body_markdown":"Does running the tests from within Eclipse via Maven work for you as shown here? https://youtu.be/GnNnQY5ujFg?t=370","body":"Does running the tests from within Eclipse via Maven work for you as shown here? <a href=\"https://youtu.be/GnNnQY5ujFg?t=370\" rel=\"nofollow noreferrer\">youtu.be/GnNnQY5ujFg?t=370</a>"},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660154170,"post_id":73308663,"comment_id":129468128,"body_markdown":"@howlger no it doesn&#39;t work, because Eclipse is dumb enough to try to run maven itself in JVM 6, which does not work for this version of maven (whichever version it is): `java.lang.UnsupportedClassVersionError: org/codehaus/plexus/classworlds/launcher/Launcher : Unsupported major.minor version 51.0` (that maven was compiled using jdk 7). On the command line `mvn test` works though, because maven itself is using java 11, and it forks JVM 6 (per `maven-toolchains-plugin` configuration).","body":"@howlger no it doesn&#39;t work, because Eclipse is dumb enough to try to run maven itself in JVM 6, which does not work for this version of maven (whichever version it is): <code>java.lang.UnsupportedClassVersionError: org&#47;codehaus&#47;plexus&#47;classworlds&#47;launcher&#47;Launcher : Unsupported major.minor version 51.0</code> (that maven was compiled using jdk 7). On the command line <code>mvn test</code> works though, because maven itself is using java 11, and it forks JVM 6 (per <code>maven-toolchains-plugin</code> configuration)."},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660154511,"post_id":73308663,"comment_id":129468244,"body_markdown":"@howlger but by running a mvn build within Eclipse specially crafted to use a newer JVM it worked! Well, worked just like it does on the terminal (aka command line), forking JVM 6 along the way. At least the stacktraces are now clickable inside Eclipse! I think this is enough as a workaround. No line code coverage unfortunately.","body":"@howlger but by running a mvn build within Eclipse specially crafted to use a newer JVM it worked! Well, worked just like it does on the terminal (aka command line), forking JVM 6 along the way. At least the stacktraces are now clickable inside Eclipse! I think this is enough as a workaround. No line code coverage unfortunately."},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660225509,"post_id":73308663,"comment_id":129486512,"body_markdown":"Per someone suggestion (whose comment has been deleted now), I&#39;ve tried in neon.3, and it works. Then I binary searched some versions. Known to work: neon.3, oxygen.3a, photon.r, 2019-12.r, 2021-03.r (the last one working with JVM 6). Known to not work: 2021-06.r, 2021-09.r, 2021-12.r and 2022-03.r. So, I&#39;m sticking with 2021-03.r now, with full junit support + code coverage, using jvm 6.","body":"Per someone suggestion (whose comment has been deleted now), I&#39;ve tried in neon.3, and it works. Then I binary searched some versions. Known to work: neon.3, oxygen.3a, photon.r, 2019-12.r, 2021-03.r (the last one working with JVM 6). Known to not work: 2021-06.r, 2021-09.r, 2021-12.r and 2022-03.r. So, I&#39;m sticking with 2021-03.r now, with full junit support + code coverage, using jvm 6."}],"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":530,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660144117,"creation_date":1660144117,"question_id":73308663,"body_markdown":"I have a legacy application that absolutely must compile and run in JVM 1.6.\r\n\r\nBut it not enough to specify `-source 6 -target 6` to a newer compiler (8, 11, 16 whatever JDK version newer than 1.6).\r\n\r\nI really need to develop and test in a &quot;concrete&quot;† JVM 1.6, in my case: OpenJDK 64-Bit Server VM (build 23.25-b01, mixed mode), because the server hosting this application cannot get a JVM update.\r\n\r\nI&#39;ve managed to configure maven to do it all (the `maven.compiler.*` properties and the `maven-toolchains-plugin`) and everything works fine (`mvn test` -wise): \r\n```\r\n[...]\r\n[INFO]\r\n[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ [...] ---\r\n[INFO] Toolchain in surefire-plugin: JDK[openjdk-1.6.0-unofficial-b31-windows-amd64-image]\r\n[INFO] Surefire report directory: [...]\\target\\surefire-reports\r\n\r\n-------------------------------------------------------\r\n T E S T S\r\n-------------------------------------------------------\r\nRunning [...]Test\r\nTests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.149 sec\r\n[...]\r\n```\r\n\r\nTo be really comfortable however, I need to run the unit tests (junit 4.13.2 + mockito-inline 2.8.47 +  powermock 1.7.4) inside Eclipse. But it errors with the following output:\r\n```\r\njava.lang.UnsupportedClassVersionError: org/eclipse/jdt/internal/junit/runner/RemoteTestRunner : Unsupported major.minor version 52.0\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:643)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:277)\r\n\tat java.net.URLClassLoader.access$000(URLClassLoader.java:73)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:212)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:205)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:323)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:268)\r\nException in thread &quot;main&quot; \r\n```\r\n\r\nI can only guess that Eclipse tries to inject some `TestRunner` (indeed a `RemoteTestRunner`) in my application classpath when running the tests, which was compiled under for a newer JVM (class file version 52, which IIRC is compatible with java 8 upwards).\r\n\r\n**Is there a official/unofficial configuration or workaround for this?**\r\n\r\n\r\n† It&#39;s fun to apply &quot;concrete&quot; quality to a &quot;virtual&quot; machine haha.\r\n\r\n\r\nPS: In vscode I get the very same error (yes, even the &quot;org/eclipse/jdt/internal/junit/runner/RemoteTestRunner&quot; part and the line numbers in stacktrace), with the addition of the message &quot;Could not find the main class: org.eclipse.jdt.internal.junit.runner.RemoteTestRunner. Program will exit.&quot;.\r\n","title":"Running JUnit test with JVM 1.6 under Eclipse 2022-03 (4.23.0)","body":"<p>I have a legacy application that absolutely must compile and run in JVM 1.6.</p>\n<p>But it not enough to specify <code>-source 6 -target 6</code> to a newer compiler (8, 11, 16 whatever JDK version newer than 1.6).</p>\n<p>I really need to develop and test in a &quot;concrete&quot;† JVM 1.6, in my case: OpenJDK 64-Bit Server VM (build 23.25-b01, mixed mode), because the server hosting this application cannot get a JVM update.</p>\n<p>I've managed to configure maven to do it all (the <code>maven.compiler.*</code> properties and the <code>maven-toolchains-plugin</code>) and everything works fine (<code>mvn test</code> -wise):</p>\n<pre><code>[...]\n[INFO]\n[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ [...] ---\n[INFO] Toolchain in surefire-plugin: JDK[openjdk-1.6.0-unofficial-b31-windows-amd64-image]\n[INFO] Surefire report directory: [...]\\target\\surefire-reports\n\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning [...]Test\nTests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.149 sec\n[...]\n</code></pre>\n<p>To be really comfortable however, I need to run the unit tests (junit 4.13.2 + mockito-inline 2.8.47 +  powermock 1.7.4) inside Eclipse. But it errors with the following output:</p>\n<pre><code>java.lang.UnsupportedClassVersionError: org/eclipse/jdt/internal/junit/runner/RemoteTestRunner : Unsupported major.minor version 52.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:643)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)\n    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:323)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:268)\nException in thread &quot;main&quot; \n</code></pre>\n<p>I can only guess that Eclipse tries to inject some <code>TestRunner</code> (indeed a <code>RemoteTestRunner</code>) in my application classpath when running the tests, which was compiled under for a newer JVM (class file version 52, which IIRC is compatible with java 8 upwards).</p>\n<p><strong>Is there a official/unofficial configuration or workaround for this?</strong></p>\n<p>† It's fun to apply &quot;concrete&quot; quality to a &quot;virtual&quot; machine haha.</p>\n<p>PS: In vscode I get the very same error (yes, even the &quot;org/eclipse/jdt/internal/junit/runner/RemoteTestRunner&quot; part and the line numbers in stacktrace), with the addition of the message &quot;Could not find the main class: org.eclipse.jdt.internal.junit.runner.RemoteTestRunner. Program will exit.&quot;.</p>\n"},{"tags":["java","json","string","serialization","jackson"],"comments":[{"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"score":0,"creation_date":1398446090,"post_id":23297402,"comment_id":35667166,"body_markdown":"It depends on the annotations on the type or how the mapper is configured, e.g., see [this](http://stackoverflow.com/questions/11757487/how-to-tell-jackson-to-ignore-a-field-during-serialization-if-its-value-is-null).","body":"It depends on the annotations on the type or how the mapper is configured, e.g., see <a href=\"http://stackoverflow.com/questions/11757487/how-to-tell-jackson-to-ignore-a-field-during-serialization-if-its-value-is-null\">this</a>."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1398447880,"creation_date":1398447880,"answer_id":23299705,"question_id":23297402,"body_markdown":"Jackson should serialize `null` fields to `null` by default. See the following example\r\n\r\n    public class Example {\r\n    \r\n    \tpublic static void main(String... args) throws Exception {\r\n    \t\tObjectMapper mapper = new ObjectMapper();\r\n    \t\tmapper.configure(SerializationFeature.INDENT_OUTPUT, true);\r\n    \t\tString json = mapper.writeValueAsString(new Test());\r\n    \t\tSystem.out.println(json);\r\n    \t}\r\n    \r\n    \tstatic class Test {\r\n    \t\tprivate String help = &quot;something&quot;;\r\n    \t\tprivate String nope = null;\r\n    \r\n    \t\tpublic String getHelp() {\r\n    \t\t\treturn help;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setHelp(String help) {\r\n    \t\t\tthis.help = help;\r\n    \t\t}\r\n    \r\n    \t\tpublic String getNope() {\r\n    \t\t\treturn nope;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setNope(String nope) {\r\n    \t\t\tthis.nope = nope;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nprints\r\n\r\n    {\r\n      &quot;help&quot; : &quot;something&quot;,\r\n      &quot;nope&quot; : null\r\n    }\r\n\r\nYou don&#39;t need to do anything special.\r\n","title":"Enable Object Mapper writeValueAsString method to include null values","body":"<p>Jackson should serialize <code>null</code> fields to <code>null</code> by default. See the following example</p>\n\n<pre><code>public class Example {\n\n    public static void main(String... args) throws Exception {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.configure(SerializationFeature.INDENT_OUTPUT, true);\n        String json = mapper.writeValueAsString(new Test());\n        System.out.println(json);\n    }\n\n    static class Test {\n        private String help = \"something\";\n        private String nope = null;\n\n        public String getHelp() {\n            return help;\n        }\n\n        public void setHelp(String help) {\n            this.help = help;\n        }\n\n        public String getNope() {\n            return nope;\n        }\n\n        public void setNope(String nope) {\n            this.nope = nope;\n        }\n    }\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>{\n  \"help\" : \"something\",\n  \"nope\" : null\n}\n</code></pre>\n\n<p>You don't need to do anything special.</p>\n"},{"tags":[],"owner":{"account_id":2734023,"reputation":2572,"user_id":2357083,"display_name":"Abbin Varghese"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568313951,"creation_date":1488546535,"answer_id":42579739,"question_id":23297402,"body_markdown":"`Include.ALWAYS` worked for me.\r\n    objectMapper.setSerializationInclusion(com.fasterxml.jackson.annotation.JsonInclude.Include.ALWAYS);\r\n\r\nOther possible values for `Include` are:\r\n\r\n - `Include.NON_DEFAULT`  \r\n - `Include.NON_EMPTY` \r\n - `Include.NON_NULL`","title":"Enable Object Mapper writeValueAsString method to include null values","body":"<p><code>Include.ALWAYS</code> worked for me.\n    objectMapper.setSerializationInclusion(com.fasterxml.jackson.annotation.JsonInclude.Include.ALWAYS);</p>\n\n<p>Other possible values for <code>Include</code> are:</p>\n\n<ul>\n<li><code>Include.NON_DEFAULT</code>  </li>\n<li><code>Include.NON_EMPTY</code> </li>\n<li><code>Include.NON_NULL</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2604846,"reputation":2439,"user_id":2256217,"accept_rate":95,"display_name":"Ananda G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660143627,"creation_date":1660143627,"answer_id":73308550,"question_id":23297402,"body_markdown":"I&#39;ve faced similar issue with `SpringBoot`, it could miss the getter function for the entity class. \r\n\r\nI included `@Getter` in spring entity class and it was fixed. ","title":"Enable Object Mapper writeValueAsString method to include null values","body":"<p>I've faced similar issue with <code>SpringBoot</code>, it could miss the getter function for the entity class.</p>\n<p>I included <code>@Getter</code> in spring entity class and it was fixed.</p>\n"}],"owner":{"account_id":1483810,"reputation":3590,"user_id":1392498,"accept_rate":76,"display_name":"LINGS"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93603,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1660143627,"creation_date":1398440210,"question_id":23297402,"body_markdown":"I have a JSON object which may contain a few `null` values.\r\nI use `ObjectMapper` from `com.fasterxml.jackson.databind` to convert my JSON object as `String`.\r\n\r\n    private ObjectMapper mapper = new ObjectMapper();\r\n    String json = mapper.writeValueAsString(object);\r\n\r\nIf my object contains any field that contains a value as `null`, then that field is not included in the `String` that comes from `writeValueAsString()`.\r\nI want my `ObjectMapper` to give me all fields in the `String` even if their value is `null`.\r\n\r\nExample:\r\n\r\n    object = {&quot;name&quot;: &quot;John&quot;, &quot;id&quot;: 10}\r\n    json   = {&quot;name&quot;: &quot;John&quot;, &quot;id&quot;: 10}\r\n\r\n    object = {&quot;name&quot;: &quot;John&quot;, &quot;id&quot;: null}\r\n    json   = {&quot;name&quot;: &quot;John&quot;}\r\n\r\n","title":"Enable Object Mapper writeValueAsString method to include null values","body":"<p>I have a JSON object which may contain a few <code>null</code> values.\nI use <code>ObjectMapper</code> from <code>com.fasterxml.jackson.databind</code> to convert my JSON object as <code>String</code>.</p>\n\n<pre><code>private ObjectMapper mapper = new ObjectMapper();\nString json = mapper.writeValueAsString(object);\n</code></pre>\n\n<p>If my object contains any field that contains a value as <code>null</code>, then that field is not included in the <code>String</code> that comes from <code>writeValueAsString()</code>.\nI want my <code>ObjectMapper</code> to give me all fields in the <code>String</code> even if their value is <code>null</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>object = {\"name\": \"John\", \"id\": 10}\njson   = {\"name\": \"John\", \"id\": 10}\n\nobject = {\"name\": \"John\", \"id\": null}\njson   = {\"name\": \"John\"}\n</code></pre>\n"},{"tags":["java","bigdecimal"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1651761460,"post_id":72127397,"comment_id":127444383,"body_markdown":"Do you want to actually modify the number or simply provided a rounded representation of the number?","body":"Do you want to actually modify the number or simply provided a rounded representation of the number?"}],"answers":[{"tags":[],"owner":{"account_id":24732895,"reputation":1,"user_id":18620663,"display_name":"Agus Ocampo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651754973,"creation_date":1651754973,"answer_id":72127450,"question_id":72127397,"body_markdown":"You should try this\r\n\r\n     DecimalFormat df = new DecimalFormat(&quot;###.###&quot;);\r\n\r\nHere&#39;s a Baeldung article about it:\r\n [https://www.baeldung.com/java-round-decimal-number][1]\r\n\r\nHope it helps!\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-round-decimal-number","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>You should try this</p>\n<pre><code> DecimalFormat df = new DecimalFormat(&quot;###.###&quot;);\n</code></pre>\n<p>Here's a Baeldung article about it:\n<a href=\"https://www.baeldung.com/java-round-decimal-number\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-round-decimal-number</a></p>\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":9072254,"reputation":1014,"user_id":6754986,"display_name":"LinFelix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651755015,"creation_date":1651755015,"answer_id":72127465,"question_id":72127397,"body_markdown":"You cannot really do that because floats and doubles do not work like that.\r\n\r\nHowever, this could solve your problem:\r\n\r\n```java\r\nround((-68.65121847597993)*10)/10f;\r\n```\r\n\r\nalso see: https://stackoverflow.com/questions/5051395/java-float-123-129456-to-123-12-without-rounding","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>You cannot really do that because floats and doubles do not work like that.</p>\n<p>However, this could solve your problem:</p>\n<pre class=\"lang-java prettyprint-override\"><code>round((-68.65121847597993)*10)/10f;\n</code></pre>\n<p>also see: <a href=\"https://stackoverflow.com/questions/5051395/java-float-123-129456-to-123-12-without-rounding\">Java float 123.129456 to 123.12 without rounding</a></p>\n"},{"tags":[],"owner":{"account_id":24183082,"reputation":582,"user_id":18143450,"display_name":"Matei Piele"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651755148,"creation_date":1651755148,"answer_id":72127483,"question_id":72127397,"body_markdown":"If your value is a double, this method takes the lowest time on compiling:\r\n\r\n    Math.round(num * 10d) / 10d\r\n\r\nNumber of 0&#39;s = number of decimals","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>If your value is a double, this method takes the lowest time on compiling:</p>\n<pre><code>Math.round(num * 10d) / 10d\n</code></pre>\n<p>Number of 0's = number of decimals</p>\n"},{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651822956,"creation_date":1651755402,"answer_id":72127545,"question_id":72127397,"body_markdown":"I would do it as in nearly every other language:\r\n```\r\ndouble input = -68.65121847597993;\r\ndouble rounded = Math.floor(input * 10.0 + 0.5)/10.0;\r\n```\r\n\r\nWith a `BigDecimal` you have more options like a rounding mode and `setScale` if you need that.\r\n\r\nAnd there are third party libraries like [decimal4j][1] or [Apache Commons Math][2] - though I didn&#39;t test them.\r\n\r\n\r\n  [1]: https://github.com/tools4j/decimal4j\r\n  [2]: https://commons.apache.org/proper/commons-math/","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>I would do it as in nearly every other language:</p>\n<pre><code>double input = -68.65121847597993;\ndouble rounded = Math.floor(input * 10.0 + 0.5)/10.0;\n</code></pre>\n<p>With a <code>BigDecimal</code> you have more options like a rounding mode and <code>setScale</code> if you need that.</p>\n<p>And there are third party libraries like <a href=\"https://github.com/tools4j/decimal4j\" rel=\"nofollow noreferrer\">decimal4j</a> or <a href=\"https://commons.apache.org/proper/commons-math/\" rel=\"nofollow noreferrer\">Apache Commons Math</a> - though I didn't test them.</p>\n"},{"tags":[],"owner":{"account_id":25203462,"reputation":26,"user_id":19042111,"display_name":"Vijay Nayar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651755498,"creation_date":1651755498,"answer_id":72127573,"question_id":72127397,"body_markdown":"In order to represent a number with that many decimal points, I presume you are using `BigDecimal` rather than `double`, which can only accurately represent approximately [15 significant digits][1].\r\n\r\nStarting from a [BigDecimal][2], which you can initialize with a string, a double, or anything else you have, you can call [BigDecimal::setScale][3] to get the value you want.\r\n\r\nFor example:\r\n```\r\nimport java.math.*;\r\n\r\npublic class HelloWorld {\r\n  public static void main(String []args){\r\n    BigDecimal b = new BigDecimal(&quot;68.65121847597993&quot;);\r\n    BigDecimal rounded = b.setScale(2, RoundingMode.HALF_UP);\r\n    System.out.println(rounded);  // 68.65\r\n  }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/13542944/how-many-significant-digits-do-floats-and-doubles-have-in-java\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#setScale(int,%20java.math.RoundingMode)","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>In order to represent a number with that many decimal points, I presume you are using <code>BigDecimal</code> rather than <code>double</code>, which can only accurately represent approximately <a href=\"https://stackoverflow.com/questions/13542944/how-many-significant-digits-do-floats-and-doubles-have-in-java\">15 significant digits</a>.</p>\n<p>Starting from a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a>, which you can initialize with a string, a double, or anything else you have, you can call <a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#setScale(int,%20java.math.RoundingMode)\" rel=\"nofollow noreferrer\">BigDecimal::setScale</a> to get the value you want.</p>\n<p>For example:</p>\n<pre><code>import java.math.*;\n\npublic class HelloWorld {\n  public static void main(String []args){\n    BigDecimal b = new BigDecimal(&quot;68.65121847597993&quot;);\n    BigDecimal rounded = b.setScale(2, RoundingMode.HALF_UP);\n    System.out.println(rounded);  // 68.65\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23598221,"reputation":40,"user_id":17635091,"display_name":"Alecasa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651756772,"creation_date":1651756772,"answer_id":72127873,"question_id":72127397,"body_markdown":"Try this \r\n\r\n    BigDecimal bd = new BigDecimal(Double.toString(number));\r\n    bd = bd.setScale(decimalPlaces, RoundingMode.HALF_UP);\r\n    return bd.doubleValue();","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>Try this</p>\n<pre><code>BigDecimal bd = new BigDecimal(Double.toString(number));\nbd = bd.setScale(decimalPlaces, RoundingMode.HALF_UP);\nreturn bd.doubleValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651761788,"creation_date":1651761788,"answer_id":72129114,"question_id":72127397,"body_markdown":"Rather than change the number (so its current precision can be still used in subsequent calculations), you can control the display as follows.\r\n```\r\ndouble v = 68.65121847597993;\r\nSystem.out.printf(&quot;%.1f%n&quot;, v);\r\n```\r\nprints\r\n```\r\n68.7","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>Rather than change the number (so its current precision can be still used in subsequent calculations), you can control the display as follows.</p>\n<pre><code>double v = 68.65121847597993;\nSystem.out.printf(&quot;%.1f%n&quot;, v);\n</code></pre>\n<p>prints</p>\n<pre><code>68.7\n</code></pre>\n"}],"owner":{"account_id":24002641,"reputation":30,"user_id":17995870,"display_name":"Artur May"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1651854342,"accepted_answer_id":72127573,"answer_count":7,"score":-2,"last_activity_date":1660143597,"creation_date":1651754690,"question_id":72127397,"body_markdown":"I have this BigDecimal number - `68.65121847597993` and I want to round it like this - `68.7`, so only decimical part of number would be rounded up, but not the whole number.\r\n\r\nI tried to use RoundingMode.HALF_UP but it rounds up the whole number as well.\r\nIs there a way to round up only decimical part of number using java?\r\n","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>I have this BigDecimal number - <code>68.65121847597993</code> and I want to round it like this - <code>68.7</code>, so only decimical part of number would be rounded up, but not the whole number.</p>\n<p>I tried to use RoundingMode.HALF_UP but it rounds up the whole number as well.\nIs there a way to round up only decimical part of number using java?</p>\n"},{"tags":["java","completable-future"],"answers":[{"tags":[],"owner":{"account_id":319988,"reputation":10970,"user_id":638028,"accept_rate":91,"display_name":"Klitos Kyriacou"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1659990068,"creation_date":1659959459,"answer_id":73277439,"question_id":73277128,"body_markdown":"The &quot;surprising&quot; results are due to how `findPricesStream` is implemented: it returns `shops.stream().map(shop -&gt; CompletableFuture.supplyAsync(...)`. The CompletableFuture is not constructed until a terminal operation is applied to the returned stream. This is done in your own method, after you call `.toList()`.\r\n\r\nThe terminal operation `toList()` does this:\r\n1. For the first `shop`, it constructs a `CompletableFuture`, which starts running.\r\n2. The CompletableFuture is joined, i.e. the main thread waits until it is finished.\r\n3. Then the next CompletableFuture is constructed for the next shop, and so on.\r\n\r\nSo the prices are calculated sequentially. To make the calculations run in parallel, create the list first (so that all futures are started) and _then_ join them:\r\n\r\n    3.     List&lt;CompletableFuture&lt;Void&gt;&gt; futures = findPricesStream(WHATEVER_PRODUCT_NAME)\r\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\r\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\r\n    6.             .toList();\r\n    7.     List&lt;Void&gt; results = futures.stream()\r\n               .map(CompletableFuture::join)\r\n               .toList();\r\n","title":"How to use join for a stream of CompletableFuture","body":"<p>The &quot;surprising&quot; results are due to how <code>findPricesStream</code> is implemented: it returns <code>shops.stream().map(shop -&gt; CompletableFuture.supplyAsync(...)</code>. The CompletableFuture is not constructed until a terminal operation is applied to the returned stream. This is done in your own method, after you call <code>.toList()</code>.</p>\n<p>The terminal operation <code>toList()</code> does this:</p>\n<ol>\n<li>For the first <code>shop</code>, it constructs a <code>CompletableFuture</code>, which starts running.</li>\n<li>The CompletableFuture is joined, i.e. the main thread waits until it is finished.</li>\n<li>Then the next CompletableFuture is constructed for the next shop, and so on.</li>\n</ol>\n<p>So the prices are calculated sequentially. To make the calculations run in parallel, create the list first (so that all futures are started) and <em>then</em> join them:</p>\n<pre><code>3.     List&lt;CompletableFuture&lt;Void&gt;&gt; futures = findPricesStream(WHATEVER_PRODUCT_NAME)\n4.             .map(completableFuture -&gt; completableFuture.thenAccept(\n5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\n6.             .toList();\n7.     List&lt;Void&gt; results = futures.stream()\n           .map(CompletableFuture::join)\n           .toList();\n</code></pre>\n"}],"owner":{"account_id":7438670,"reputation":991,"user_id":5657159,"display_name":"Uvuvwevwevwe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3518,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73277439,"answer_count":1,"score":4,"last_activity_date":1660143596,"creation_date":1659958018,"question_id":73277128,"body_markdown":"Supposedly, I have the following method\r\n\r\n````\r\npublic static Stream&lt;CompletableFuture&lt;String&gt;&gt; findPricesStream(String product) {}\r\n````\r\n\r\nThis method will look for the cheapest price given a ``product`` and it returns a stream of CompletableFuture.\r\n\r\nNow I want to react to the value in the stream as soon as it is available. To do that, \r\nI adopt the method ``thenAccept`` and the implementation could be as following\r\n\r\n````\r\n    1. public static void reactToEarliestResultWithRaw() {\r\n    2.     long start = System.nanoTime();\r\n    3.     CompletableFuture[] priceFuture = findPricesStream(WHATEVER_PRODUCT_NAME)\r\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\r\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\r\n    6.             .toArray(CompletableFuture[]::new);\r\n    7.     CompletableFuture.allOf(priceFuture).join();\r\n    8.     System.out.println(&quot;All shops have now responded in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs&quot;);\r\n    9. }\r\n````\r\n\r\nWith this implementation, I got the desired output\r\n\r\n````\r\nLetsSaveBig price is 151.227 (done in 5476 msecs)\r\nBuyItAll price is 211.66 (done in 5747 msecs)\r\nMyFavoriteShop price is 206.30200000000002 (done in 6968 msecs)\r\nBestPrice price is 131.917 (done in 8110 msecs)\r\nAll shops have now responded in 8110 msecs\r\n````\r\n\r\nNow I would like to take a further step to make the code more readable.\r\nI chained another map that is responsible for joining all of CompletableFuture\r\n\r\n````\r\n    1. public static void reactToEarliestResultWithoutRaw() {\r\n    2.     long start = System.nanoTime();\r\n    3.     List&lt;Void&gt; completeFutures = findPricesStream(WHATEVER_PRODUCT_NAME)\r\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\r\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\r\n    6.             .map(CompletableFuture::join)\r\n    7.             .toList();\r\n    8.     int size = completeFutures.size();\r\n    9.     if (isComplete(size)) {\r\n    10.         System.out.println(&quot;All shops have now responded in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs&quot;);\r\n    11. }\r\n    12.\r\n    13. private static boolean isComplete(int size) {\r\n    14.     return size == shops.size();\r\n    15. }    \r\n````\r\n\r\nI got the output\r\n\r\n````\r\nBestPrice price is 123.17400000000002 (done in 2060 msecs)\r\nLetsSaveBig price is 109.67200000000001 (done in 6025 msecs)\r\nMyFavoriteShop price is 131.21099999999998 (done in 13860 msecs)\r\nBuyItAll price is 164.392 (done in 18434 msecs)\r\nAll shops have now responded in 18434 msecs\r\n````\r\n\r\nThe result makes me surprised!\r\nI expect the elapsed time for both should be somehow _the same_, but they are a huge difference.\r\n\r\nDo I misunderstand the way of using ``join`` here?\r\n\r\n# Reference\r\nThe implementation comes from the book ``Modern Java in Action: Lambdas, streams, functional and reactive programming 2nd Edition`` and\r\nI have modified it a bit for the experiment.\r\n","title":"How to use join for a stream of CompletableFuture","body":"<p>Supposedly, I have the following method</p>\n<pre><code>public static Stream&lt;CompletableFuture&lt;String&gt;&gt; findPricesStream(String product) {}\n</code></pre>\n<p>This method will look for the cheapest price given a <code>product</code> and it returns a stream of CompletableFuture.</p>\n<p>Now I want to react to the value in the stream as soon as it is available. To do that,\nI adopt the method <code>thenAccept</code> and the implementation could be as following</p>\n<pre><code>    1. public static void reactToEarliestResultWithRaw() {\n    2.     long start = System.nanoTime();\n    3.     CompletableFuture[] priceFuture = findPricesStream(WHATEVER_PRODUCT_NAME)\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\n    6.             .toArray(CompletableFuture[]::new);\n    7.     CompletableFuture.allOf(priceFuture).join();\n    8.     System.out.println(&quot;All shops have now responded in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs&quot;);\n    9. }\n</code></pre>\n<p>With this implementation, I got the desired output</p>\n<pre><code>LetsSaveBig price is 151.227 (done in 5476 msecs)\nBuyItAll price is 211.66 (done in 5747 msecs)\nMyFavoriteShop price is 206.30200000000002 (done in 6968 msecs)\nBestPrice price is 131.917 (done in 8110 msecs)\nAll shops have now responded in 8110 msecs\n</code></pre>\n<p>Now I would like to take a further step to make the code more readable.\nI chained another map that is responsible for joining all of CompletableFuture</p>\n<pre><code>    1. public static void reactToEarliestResultWithoutRaw() {\n    2.     long start = System.nanoTime();\n    3.     List&lt;Void&gt; completeFutures = findPricesStream(WHATEVER_PRODUCT_NAME)\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\n    6.             .map(CompletableFuture::join)\n    7.             .toList();\n    8.     int size = completeFutures.size();\n    9.     if (isComplete(size)) {\n    10.         System.out.println(&quot;All shops have now responded in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs&quot;);\n    11. }\n    12.\n    13. private static boolean isComplete(int size) {\n    14.     return size == shops.size();\n    15. }    \n</code></pre>\n<p>I got the output</p>\n<pre><code>BestPrice price is 123.17400000000002 (done in 2060 msecs)\nLetsSaveBig price is 109.67200000000001 (done in 6025 msecs)\nMyFavoriteShop price is 131.21099999999998 (done in 13860 msecs)\nBuyItAll price is 164.392 (done in 18434 msecs)\nAll shops have now responded in 18434 msecs\n</code></pre>\n<p>The result makes me surprised!\nI expect the elapsed time for both should be somehow <em>the same</em>, but they are a huge difference.</p>\n<p>Do I misunderstand the way of using <code>join</code> here?</p>\n<h1>Reference</h1>\n<p>The implementation comes from the book <code>Modern Java in Action: Lambdas, streams, functional and reactive programming 2nd Edition</code> and\nI have modified it a bit for the experiment.</p>\n"},{"tags":["java","amazon-web-services","redis","amazon-eks"],"comments":[{"owner":{"account_id":1022874,"reputation":33518,"user_id":1032785,"accept_rate":50,"display_name":"jordanm"},"score":0,"creation_date":1660144052,"post_id":73308336,"comment_id":129464485,"body_markdown":"What ingress controller are you using? Not all of them can do TCP services.","body":"What ingress controller are you using? Not all of them can do TCP services."},{"owner":{"account_id":14445834,"reputation":65,"user_id":10435004,"display_name":"Bakula33"},"score":0,"creation_date":1660202384,"post_id":73308336,"comment_id":129478236,"body_markdown":"AWS ingress controller","body":"AWS ingress controller"},{"owner":{"account_id":1022874,"reputation":33518,"user_id":1032785,"accept_rate":50,"display_name":"jordanm"},"score":0,"creation_date":1660227892,"post_id":73308336,"comment_id":129487569,"body_markdown":"AWS ingress controller provisions a ALB, which can not do TCP. You can create an NLB using that controller by doing a service with `type: LoadBalancer` instead of an ingress, which does do TCP.","body":"AWS ingress controller provisions a ALB, which can not do TCP. You can create an NLB using that controller by doing a service with <code>type: LoadBalancer</code> instead of an ingress, which does do TCP."}],"owner":{"account_id":14445834,"reputation":65,"user_id":10435004,"display_name":"Bakula33"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660142712,"creation_date":1660142712,"question_id":73308336,"body_markdown":"I am running Redis Cluster on EKS as a statefulset and the service is headless. Everything is working properly but the backend application has a test which need to access the host url during the build process. I have tried to expose service with ingress, but still not working. Can you please suggest me some solution?\r\n\r\nThank you in advance!","title":"Exposing Redis Service on EKS Cluster","body":"<p>I am running Redis Cluster on EKS as a statefulset and the service is headless. Everything is working properly but the backend application has a test which need to access the host url during the build process. I have tried to expose service with ingress, but still not working. Can you please suggest me some solution?</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","spring","date"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1660138880,"post_id":73307289,"comment_id":129462243,"body_markdown":"An `Instant` has no `DayOfWeek`. Try to use the `ZonedDateTime` directly","body":"An <code>Instant</code> has no <code>DayOfWeek</code>. Try to use the <code>ZonedDateTime</code> directly"},{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":1,"creation_date":1660138882,"post_id":73307289,"comment_id":129462244,"body_markdown":"What line/statement throws the exception? `Instant` has no `DayOfWeek`, so that is probably the issue.","body":"What line/statement throws the exception? <code>Instant</code> has no <code>DayOfWeek</code>, so that is probably the issue."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1660139614,"post_id":73307289,"comment_id":129462587,"body_markdown":"A `ZonedDateTime` is a `Temporal` but it isn&#39;t a `Comparable` and it needs both hence the compilation error. So it doesn&#39;t fulfill the contract. A plain instant is just a point in time it doesn&#39;t have a notion of day of week. Using a `LocalDateTime` or `OffsetDateTime` should work.","body":"A <code>ZonedDateTime</code> is a <code>Temporal</code> but it isn&#39;t a <code>Comparable</code> and it needs both hence the compilation error. So it doesn&#39;t fulfill the contract. A plain instant is just a point in time it doesn&#39;t have a notion of day of week. Using a <code>LocalDateTime</code> or <code>OffsetDateTime</code> should work."},{"owner":{"account_id":13998926,"reputation":41,"user_id":10111061,"display_name":"Eloyas"},"score":2,"creation_date":1660140348,"post_id":73307289,"comment_id":129462928,"body_markdown":"I see comparable in the implemented interfaces on ZonedDateTime: https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\nAm I not reading it right?","body":"I see comparable in the implemented interfaces on ZonedDateTime: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.ht&zwnj;&#8203;ml</a> Am I not reading it right?"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1660141486,"post_id":73307289,"comment_id":129463390,"body_markdown":"Oliver&#39;s answer seems to work when I try it. How come you get a compile error? Can you try again? If it still gives you an error, try compiling Oliver&#39;s code in a new empty project and go from there.","body":"Oliver&#39;s answer seems to work when I try it. How come you get a compile error? Can you try again? If it still gives you an error, try compiling Oliver&#39;s code in a new empty project and go from there."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1660141607,"post_id":73307289,"comment_id":129463441,"body_markdown":"@M.Deinum in what way is ZonedDateTime not a Comparable?","body":"@M.Deinum in what way is ZonedDateTime not a Comparable?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660142065,"post_id":73307289,"comment_id":129463618,"body_markdown":"Hmm not sure which version I was looking at, but I had one which didn&#39;t implement `Comparable`... Weird.","body":"Hmm not sure which version I was looking at, but I had one which didn&#39;t implement <code>Comparable</code>... Weird."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1660142393,"post_id":73307289,"comment_id":129463755,"body_markdown":"I was looking at the source and it implements `Comparable` through `ChronoZonedDateTime`. However that actually breaks as the `Comparable` is for `Comparable&lt;ChronoZonedDateTime&gt;` as `T` resolved to `ZonedDateTime`. So it probably has to do with the hierarchy of the `ZonedDateTime` (or the generic declaration of the `next` method) that it doesn&#39;t match.","body":"I was looking at the source and it implements <code>Comparable</code> through <code>ChronoZonedDateTime</code>. However that actually breaks as the <code>Comparable</code> is for <code>Comparable&lt;ChronoZonedDateTime&gt;</code> as <code>T</code> resolved to <code>ZonedDateTime</code>. So it probably has to do with the hierarchy of the <code>ZonedDateTime</code> (or the generic declaration of the <code>next</code> method) that it doesn&#39;t match."}],"answers":[{"tags":[],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1660139152,"creation_date":1660139152,"answer_id":73307460,"question_id":73307289,"body_markdown":"As I mentioned in my comment, `Instant` has no `DayOfWeek`.\r\n\r\n```java\r\nString cron = &quot;0 0 21 * * MON-FRI&quot;;\r\nCronExpression cronExpression = CronExpression.parse(cron);\r\nZonedDateTime next = cronExpression.next(ZonedDateTime.now());\r\n```","title":"Can&#39;t use Spring-context&#39;s cronExpression with ZonedDateTime","body":"<p>As I mentioned in my comment, <code>Instant</code> has no <code>DayOfWeek</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String cron = &quot;0 0 21 * * MON-FRI&quot;;\nCronExpression cronExpression = CronExpression.parse(cron);\nZonedDateTime next = cronExpression.next(ZonedDateTime.now());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13998926,"reputation":41,"user_id":10111061,"display_name":"Eloyas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660142471,"creation_date":1660141694,"answer_id":73308102,"question_id":73307289,"body_markdown":"Using an OffsetDateTime instead of ZonedDateTime solved the problem, but I&#39;m still not sure why. Maybe there&#39;s a problem  in the implementation of CronExpression?\r\n\r\nTrying to skip the conversion to Instant, with ZonedDateTime and LocalDateTime resulted in a compilation error. It worked with OffsetDateTime, though.","title":"Can&#39;t use Spring-context&#39;s cronExpression with ZonedDateTime","body":"<p>Using an OffsetDateTime instead of ZonedDateTime solved the problem, but I'm still not sure why. Maybe there's a problem  in the implementation of CronExpression?</p>\n<p>Trying to skip the conversion to Instant, with ZonedDateTime and LocalDateTime resulted in a compilation error. It worked with OffsetDateTime, though.</p>\n"}],"owner":{"account_id":13998926,"reputation":41,"user_id":10111061,"display_name":"Eloyas"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":568,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73308102,"answer_count":2,"score":1,"last_activity_date":1660142471,"creation_date":1660138494,"question_id":73307289,"body_markdown":"I&#39;m trying to get the next execution of a cron in spring.\r\nPreviously, I was using CronSequenceGenerator, but since it is deprecated, I&#39;m trying to update to CronExpression. I use a ZonedDateTime as the current date to find the next one.\r\n\r\n    String cron = &quot;0 0 21 * * MON-FRI&quot;;\r\n    CronExpression cronExpression = CronExpression.parse(cron);\r\n    ZonedDateTime date = ZonedDateTime.parse(&quot;2021-04-12T21:00-04:00[America/Montreal]&quot;);\r\n    Instant next = cronExpression.next(date.toInstant());\r\n\r\n\r\nThe problem is that when I try, I always get an exception, no matter the cron.\r\n\r\n    java.time.temporal.UnsupportedTemporalTypeException: Unsupported field: DayOfWeek\r\n        at java.base/java.time.Instant.get(Instant.java:565)\r\n    \tat org.springframework.scheduling.support.CronField$Type.get(CronField.java:200)\r\n    \tat org.springframework.scheduling.support.BitsCronField.nextOrSame(BitsCronField.java:180)\r\n    \tat org.springframework.scheduling.support.CronExpression.nextOrSameInternal(CronExpression.java:264)\r\n    \tat org.springframework.scheduling.support.CronExpression.nextOrSame(CronExpression.java:252)\r\n    \tat org.springframework.scheduling.support.CronExpression.next(CronExpression.java:245)\r\n        [...]\r\n\r\nI don&#39;t know why I&#39;m getting this error. If I try to just pass the ZonedDateTime (as it is a Temporal and cronExpression.next takes Temporal) I get a compilation error.\r\n\r\n    java: incompatible types: inference variable T has incompatible bounds\r\n    lower bounds: java.time.Instant,java.time.chrono.ChronoZonedDateTime&lt;?&gt;,java.lang.Object,java.time.temporal.Temporal,java.lang.Comparable&lt;? super T&gt;\r\n    lower bounds: java.time.ZonedDateTime\r\n\r\nCan anyone tell me what I&#39;m doing wrong?\r\n\r\nI&#39;m using Java11 with spring-context 5.3.20\r\n\r\nHere&#39;s the documentation I&#39;m consulting:\r\nhttps://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronExpression.html\r\nhttps://docs.oracle.com/javase/8/docs/api/java/time/temporal/Temporal.html?is-external=true","title":"Can&#39;t use Spring-context&#39;s cronExpression with ZonedDateTime","body":"<p>I'm trying to get the next execution of a cron in spring.\nPreviously, I was using CronSequenceGenerator, but since it is deprecated, I'm trying to update to CronExpression. I use a ZonedDateTime as the current date to find the next one.</p>\n<pre><code>String cron = &quot;0 0 21 * * MON-FRI&quot;;\nCronExpression cronExpression = CronExpression.parse(cron);\nZonedDateTime date = ZonedDateTime.parse(&quot;2021-04-12T21:00-04:00[America/Montreal]&quot;);\nInstant next = cronExpression.next(date.toInstant());\n</code></pre>\n<p>The problem is that when I try, I always get an exception, no matter the cron.</p>\n<pre><code>java.time.temporal.UnsupportedTemporalTypeException: Unsupported field: DayOfWeek\n    at java.base/java.time.Instant.get(Instant.java:565)\n    at org.springframework.scheduling.support.CronField$Type.get(CronField.java:200)\n    at org.springframework.scheduling.support.BitsCronField.nextOrSame(BitsCronField.java:180)\n    at org.springframework.scheduling.support.CronExpression.nextOrSameInternal(CronExpression.java:264)\n    at org.springframework.scheduling.support.CronExpression.nextOrSame(CronExpression.java:252)\n    at org.springframework.scheduling.support.CronExpression.next(CronExpression.java:245)\n    [...]\n</code></pre>\n<p>I don't know why I'm getting this error. If I try to just pass the ZonedDateTime (as it is a Temporal and cronExpression.next takes Temporal) I get a compilation error.</p>\n<pre><code>java: incompatible types: inference variable T has incompatible bounds\nlower bounds: java.time.Instant,java.time.chrono.ChronoZonedDateTime&lt;?&gt;,java.lang.Object,java.time.temporal.Temporal,java.lang.Comparable&lt;? super T&gt;\nlower bounds: java.time.ZonedDateTime\n</code></pre>\n<p>Can anyone tell me what I'm doing wrong?</p>\n<p>I'm using Java11 with spring-context 5.3.20</p>\n<p>Here's the documentation I'm consulting:\n<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronExpression.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronExpression.html</a>\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/Temporal.html?is-external=true\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/time/temporal/Temporal.html?is-external=true</a></p>\n"},{"tags":["java","authentication"],"comments":[{"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"score":0,"creation_date":1660143623,"post_id":73308256,"comment_id":129464317,"body_markdown":"share your url details which are working which are not working.","body":"share your url details which are working which are not working."},{"owner":{"account_id":25539177,"reputation":1,"user_id":19325607,"display_name":"dkrspeedline"},"score":0,"creation_date":1660394569,"post_id":73308256,"comment_id":129525711,"body_markdown":"This one does not work: http://localhost:8080/getall The working entpoints are: http://localhost:8080/auth/register and http://localhost:8080/auth/login","body":"This one does not work: <a href=\"http://localhost:8080/getall\" rel=\"nofollow noreferrer\">localhost:8080/getall</a> The working entpoints are: <a href=\"http://localhost:8080/auth/register\" rel=\"nofollow noreferrer\">localhost:8080/auth/register</a> and <a href=\"http://localhost:8080/auth/login\" rel=\"nofollow noreferrer\">localhost:8080/auth/login</a>"}],"owner":{"account_id":25539177,"reputation":1,"user_id":19325607,"display_name":"dkrspeedline"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660142346,"creation_date":1660142346,"question_id":73308256,"body_markdown":"I am using SpringSecurity and JSON Webtoken to authenticate to my Backend. To test my API i use Postman.\r\nI am able to Register. (Response: 200)\r\nI am able to Login. (Respons: 200 + BearerToken)\r\nI am not(!) able to request any other entry point. (Response: 401 Unauthorized)\r\n\r\nThe error Message is: &quot;Full authentication is required to access this resource&quot;\r\n\r\nParts of my POM:\r\n\r\n        &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nSecurity configuration\r\n\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration {\r\n    \r\n        // Token Entry Point\r\n    \r\n        @Autowired\r\n        private JwtAuthentificationEntryPoint jwtAuthentificationEntryPoint;\r\n    \r\n        // Token Filter\r\n    \r\n        @Bean\r\n        public JwtAuthentificationFilter jwtAuthentificationFilter(){\r\n            return new JwtAuthentificationFilter();\r\n        }\r\n    \r\n        // Passwort Encoder\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder(){\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n            return authenticationConfiguration.getAuthenticationManager();\r\n        }\r\n    \r\n        // Filter Chain\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n            log.info(&quot;-----&gt; Filterchain called! &quot;);\r\n            http\r\n                    .cors()\r\n                    .and()\r\n                    .csrf()\r\n                    .disable()\r\n                    .exceptionHandling()\r\n                    .authenticationEntryPoint(jwtAuthentificationEntryPoint)\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .authorizeHttpRequests()\r\n                    .antMatchers(&quot;/auth/**&quot;)\r\n                    .permitAll()\r\n                    .anyRequest()\r\n                    .authenticated();\r\n            return http.build();\r\n        }\r\n    }\r\n\r\nMy authentication Controller\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/auth&quot;)\r\n    public class AuthController {\r\n\r\n    private UserRepository userRepository;\r\n\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n    private AuthenticationManager authenticationManager;\r\n\r\n    private JwtTokenProvider jwtTokenProvider;\r\n\r\n    public AuthController(UserRepository userRepository, PasswordEncoder passwordEncoder, AuthenticationManager authenticationManager, JwtTokenProvider jwtTokenProvider) {\r\n        this.userRepository = userRepository;\r\n        this.passwordEncoder = passwordEncoder;\r\n        this.authenticationManager = authenticationManager;\r\n        this.jwtTokenProvider = jwtTokenProvider;\r\n    }\r\n\r\n    @PostMapping(value = &quot;/register&quot;)\r\n    public ResponseEntity&lt;UserEntity&gt; register(@RequestBody AuthRequest authRequest){\r\n        Optional&lt;UserEntity&gt; userOptional = userRepository.findByEmail(authRequest.getEmail());\r\n\r\n        if(userOptional.isPresent()){\r\n            log.info(&quot;User {} existiert bereits&quot;,authRequest.getEmail());\r\n            return ResponseEntity.badRequest().build();\r\n        }\r\n\r\n        UserEntity user = new UserEntity();\r\n        user.setEmail(authRequest.getEmail());\r\n        user.setPassword(passwordEncoder.encode(authRequest.getPassword()));\r\n\r\n        UserEntity createdUser = userRepository.save(user);\r\n        log.info(&quot;Benutzer {} erfolgreich registriert&quot;, user.getEmail());\r\n        return ResponseEntity.ok(createdUser);\r\n    }\r\n\r\n    @PostMapping(value = &quot;/login&quot;)\r\n    public ResponseEntity&lt;String&gt; login(@RequestBody AuthRequest authRequest){\r\n        log.info(&quot;Login Request {}&quot;, authRequest.getEmail());\r\n        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(authRequest.getEmail(), authRequest.getPassword()));\r\n        return ResponseEntity.ok(jwtTokenProvider.generiereToken(authentication));\r\n    }\r\n}\r\n\r\nAuthenticationEntryPoint\r\n\r\n    @Component\r\n    public class JwtAuthentificationEntryPoint implements AuthenticationEntryPoint {\r\n\r\n    @Override\r\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\r\n        log.info(&quot;jwtEntryPoint called&quot;);\r\n        log.info(String.valueOf(&quot;---------- request getUserPrincipal ----------&quot;));\r\n        log.info(String.valueOf(request.getUserPrincipal()));\r\n        log.info(String.valueOf(&quot;---------- request getRequestURL ----------&quot;));\r\n        log.info(String.valueOf(request.getRequestURL()));\r\n        log.info(String.valueOf(&quot;---------- request getMethod ----------&quot;));\r\n        log.info(String.valueOf(request.getMethod()));\r\n        log.info(String.valueOf(&quot;---------- response Status ----------&quot;));\r\n        log.info(String.valueOf(response.getStatus()));\r\n        log.info(String.valueOf(&quot;---------- authException ----------&quot;));\r\n        log.info(String.valueOf(authException));\r\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED);\r\n    }\r\n}\r\n\r\nJWTAuthenticationFilter\r\n\r\n    public class JwtAuthentificationFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private JwtTokenProvider jwtTokenProvider;\r\n\r\n    @Autowired\r\n    private CustomUserDetailsService customUserDetailsService;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        log.info(&quot;dofilter im JwtAuthenticationFilter called.&quot;);\r\n        String jwt = getJwtFromRequest(request);\r\n        if(StringUtils.hasText(jwt) &amp;&amp;  jwtTokenProvider.validateToken(jwt)){\r\n            log.info(&quot;---------- Bedingung true ----------&quot;);\r\n            //log.info(jwt);\r\n            //log.info(String.valueOf(jwtTokenProvider.validateToken(jwt)));\r\n        }\r\n        else {\r\n            log.info(&quot;---------- Bedingung false ----------&quot;);\r\n            //String.valueOf(jwtTokenProvider.validateToken(jwt));\r\n        }\r\n        if(StringUtils.hasText(jwt) &amp;&amp;  jwtTokenProvider.validateToken(jwt)){\r\n            String mail = jwtTokenProvider.getUserMailFromToken(jwt);\r\n            log.info(&quot;---------- mail ----------&quot;);\r\n            log.info(mail);\r\n            UserDetails userDetails = customUserDetailsService.loadUserByUsername(mail);\r\n            log.info(String.valueOf(&quot;---------- userDetails ----------&quot;));\r\n            log.info(String.valueOf(userDetails));\r\n            UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails,null,userDetails.getAuthorities());\r\n            log.info(String.valueOf(&quot;---------- authentication ----------&quot;));\r\n            log.info(String.valueOf(authentication));\r\n            authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n            SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        }\r\n        filterChain.doFilter(request,response);\r\n    }\r\n\r\n    private String getJwtFromRequest(HttpServletRequest request){\r\n        log.info(&quot;getJwtTokenFromRequest called.&quot;);\r\n        log.info(&quot;---------- Request Header ----------&quot;);\r\n        log.info(String.valueOf(request.getHeader(&quot;Authorization&quot;)));\r\n        String bearertoken = request.getHeader(&quot;Authorization&quot;);\r\n\r\n        if (StringUtils.hasText(bearertoken) &amp;&amp; bearertoken.startsWith(&quot;Bearer &quot;)){\r\n            log.info(&quot;Bearer Token in getJwtFromRequest konnte ermittelt werden.&quot;);\r\n            return bearertoken.substring(7);\r\n        }\r\n        log.error(&quot;Bearer Token in getJwtFromRequest konnte nicht ermittelt werden.&quot;);\r\n        log.info(&quot;---------- Token ----------&quot;);\r\n        log.info(bearertoken);\r\n        return null;\r\n    }\r\n}\r\n\r\nJWTTokenProvider\r\n\r\n    @Component\r\n    public class JwtTokenProvider {\r\n\r\n    @Value(&quot;{$app.jwtsecret}&quot;)\r\n    private String jwtSecret;\r\n\r\n    public String generiereToken(String userEmail){\r\n        Instant jetzt = Instant.now();\r\n        Instant ablauf = jetzt.plus(7, ChronoUnit.DAYS);\r\n\r\n        return Jwts.builder()\r\n                .setSubject(userEmail)\r\n                .setIssuedAt(Date.from(jetzt))\r\n                .setExpiration(Date.from(ablauf))\r\n                .signWith(SignatureAlgorithm.HS512, jwtSecret)\r\n                .compact();\r\n    }\r\n\r\n    public String generiereToken(Authentication authentication){\r\n        User user = (User) authentication.getPrincipal();\r\n        return generiereToken(user.getUsername());\r\n    }\r\n\r\n    public String getUserMailFromToken(String token){\r\n        Claims claims = Jwts\r\n                .parser()\r\n                .setSigningKey(jwtSecret)\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n\r\n        return claims.getSubject();\r\n    }\r\n\r\n    public boolean validateToken(String token){\r\n        try{\r\n            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token);\r\n            return true;\r\n        } catch (ExpiredJwtException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;Token abgelaufen&quot;);\r\n        } catch (UnsupportedJwtException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;Token nicht supported.&quot;);\r\n        } catch (MalformedJwtException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;MalformedJwtException&quot;);\r\n        } catch (SignatureException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;Signatur ung&#252;ltig&quot;);\r\n        } catch (IllegalArgumentException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;IllegalArgumentException&quot;);\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n\r\n\r\nThe entry point i try to call after successful login\r\n\r\n    @RestController\r\n    public class aktivitaetenAPI {\r\n\r\n    @Autowired\r\n    AktivitaetenService aktivitaetenService;\r\n\r\n    @GetMapping(&quot;/getall&quot;)\r\n    public List&lt;AktivitaetenEntity&gt; getAll(){\r\n        log.info(&quot;getall request&quot;);\r\n        return aktivitaetenService.findAll();\r\n    }\r\n}\r\n\r\nI am really happy for any answers.\r\nThanks in advance!\r\n\r\nDaniel\r\n\r\n","title":"SpringSecurity &quot;Full authentication is required to access this resource&quot; / JWT Token / Access API after login","body":"<p>I am using SpringSecurity and JSON Webtoken to authenticate to my Backend. To test my API i use Postman.\nI am able to Register. (Response: 200)\nI am able to Login. (Respons: 200 + BearerToken)\nI am not(!) able to request any other entry point. (Response: 401 Unauthorized)</p>\n<p>The error Message is: &quot;Full authentication is required to access this resource&quot;</p>\n<p>Parts of my POM:</p>\n<pre><code>    &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n        &lt;version&gt;0.9.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Security configuration</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    // Token Entry Point\n\n    @Autowired\n    private JwtAuthentificationEntryPoint jwtAuthentificationEntryPoint;\n\n    // Token Filter\n\n    @Bean\n    public JwtAuthentificationFilter jwtAuthentificationFilter(){\n        return new JwtAuthentificationFilter();\n    }\n\n    // Passwort Encoder\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    // Filter Chain\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n        log.info(&quot;-----&gt; Filterchain called! &quot;);\n        http\n                .cors()\n                .and()\n                .csrf()\n                .disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(jwtAuthentificationEntryPoint)\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeHttpRequests()\n                .antMatchers(&quot;/auth/**&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated();\n        return http.build();\n    }\n}\n</code></pre>\n<p>My authentication Controller</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/auth&quot;)\npublic class AuthController {\n\nprivate UserRepository userRepository;\n\nprivate PasswordEncoder passwordEncoder;\n\nprivate AuthenticationManager authenticationManager;\n\nprivate JwtTokenProvider jwtTokenProvider;\n\npublic AuthController(UserRepository userRepository, PasswordEncoder passwordEncoder, AuthenticationManager authenticationManager, JwtTokenProvider jwtTokenProvider) {\n    this.userRepository = userRepository;\n    this.passwordEncoder = passwordEncoder;\n    this.authenticationManager = authenticationManager;\n    this.jwtTokenProvider = jwtTokenProvider;\n}\n\n@PostMapping(value = &quot;/register&quot;)\npublic ResponseEntity&lt;UserEntity&gt; register(@RequestBody AuthRequest authRequest){\n    Optional&lt;UserEntity&gt; userOptional = userRepository.findByEmail(authRequest.getEmail());\n\n    if(userOptional.isPresent()){\n        log.info(&quot;User {} existiert bereits&quot;,authRequest.getEmail());\n        return ResponseEntity.badRequest().build();\n    }\n\n    UserEntity user = new UserEntity();\n    user.setEmail(authRequest.getEmail());\n    user.setPassword(passwordEncoder.encode(authRequest.getPassword()));\n\n    UserEntity createdUser = userRepository.save(user);\n    log.info(&quot;Benutzer {} erfolgreich registriert&quot;, user.getEmail());\n    return ResponseEntity.ok(createdUser);\n}\n\n@PostMapping(value = &quot;/login&quot;)\npublic ResponseEntity&lt;String&gt; login(@RequestBody AuthRequest authRequest){\n    log.info(&quot;Login Request {}&quot;, authRequest.getEmail());\n    Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(authRequest.getEmail(), authRequest.getPassword()));\n    return ResponseEntity.ok(jwtTokenProvider.generiereToken(authentication));\n}\n</code></pre>\n<p>}</p>\n<p>AuthenticationEntryPoint</p>\n<pre><code>@Component\npublic class JwtAuthentificationEntryPoint implements AuthenticationEntryPoint {\n\n@Override\npublic void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\n    log.info(&quot;jwtEntryPoint called&quot;);\n    log.info(String.valueOf(&quot;---------- request getUserPrincipal ----------&quot;));\n    log.info(String.valueOf(request.getUserPrincipal()));\n    log.info(String.valueOf(&quot;---------- request getRequestURL ----------&quot;));\n    log.info(String.valueOf(request.getRequestURL()));\n    log.info(String.valueOf(&quot;---------- request getMethod ----------&quot;));\n    log.info(String.valueOf(request.getMethod()));\n    log.info(String.valueOf(&quot;---------- response Status ----------&quot;));\n    log.info(String.valueOf(response.getStatus()));\n    log.info(String.valueOf(&quot;---------- authException ----------&quot;));\n    log.info(String.valueOf(authException));\n    response.sendError(HttpServletResponse.SC_UNAUTHORIZED);\n}\n</code></pre>\n<p>}</p>\n<p>JWTAuthenticationFilter</p>\n<pre><code>public class JwtAuthentificationFilter extends OncePerRequestFilter {\n\n@Autowired\nprivate JwtTokenProvider jwtTokenProvider;\n\n@Autowired\nprivate CustomUserDetailsService customUserDetailsService;\n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n    log.info(&quot;dofilter im JwtAuthenticationFilter called.&quot;);\n    String jwt = getJwtFromRequest(request);\n    if(StringUtils.hasText(jwt) &amp;&amp;  jwtTokenProvider.validateToken(jwt)){\n        log.info(&quot;---------- Bedingung true ----------&quot;);\n        //log.info(jwt);\n        //log.info(String.valueOf(jwtTokenProvider.validateToken(jwt)));\n    }\n    else {\n        log.info(&quot;---------- Bedingung false ----------&quot;);\n        //String.valueOf(jwtTokenProvider.validateToken(jwt));\n    }\n    if(StringUtils.hasText(jwt) &amp;&amp;  jwtTokenProvider.validateToken(jwt)){\n        String mail = jwtTokenProvider.getUserMailFromToken(jwt);\n        log.info(&quot;---------- mail ----------&quot;);\n        log.info(mail);\n        UserDetails userDetails = customUserDetailsService.loadUserByUsername(mail);\n        log.info(String.valueOf(&quot;---------- userDetails ----------&quot;));\n        log.info(String.valueOf(userDetails));\n        UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails,null,userDetails.getAuthorities());\n        log.info(String.valueOf(&quot;---------- authentication ----------&quot;));\n        log.info(String.valueOf(authentication));\n        authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n    }\n    filterChain.doFilter(request,response);\n}\n\nprivate String getJwtFromRequest(HttpServletRequest request){\n    log.info(&quot;getJwtTokenFromRequest called.&quot;);\n    log.info(&quot;---------- Request Header ----------&quot;);\n    log.info(String.valueOf(request.getHeader(&quot;Authorization&quot;)));\n    String bearertoken = request.getHeader(&quot;Authorization&quot;);\n\n    if (StringUtils.hasText(bearertoken) &amp;&amp; bearertoken.startsWith(&quot;Bearer &quot;)){\n        log.info(&quot;Bearer Token in getJwtFromRequest konnte ermittelt werden.&quot;);\n        return bearertoken.substring(7);\n    }\n    log.error(&quot;Bearer Token in getJwtFromRequest konnte nicht ermittelt werden.&quot;);\n    log.info(&quot;---------- Token ----------&quot;);\n    log.info(bearertoken);\n    return null;\n}\n</code></pre>\n<p>}</p>\n<p>JWTTokenProvider</p>\n<pre><code>@Component\npublic class JwtTokenProvider {\n\n@Value(&quot;{$app.jwtsecret}&quot;)\nprivate String jwtSecret;\n\npublic String generiereToken(String userEmail){\n    Instant jetzt = Instant.now();\n    Instant ablauf = jetzt.plus(7, ChronoUnit.DAYS);\n\n    return Jwts.builder()\n            .setSubject(userEmail)\n            .setIssuedAt(Date.from(jetzt))\n            .setExpiration(Date.from(ablauf))\n            .signWith(SignatureAlgorithm.HS512, jwtSecret)\n            .compact();\n}\n\npublic String generiereToken(Authentication authentication){\n    User user = (User) authentication.getPrincipal();\n    return generiereToken(user.getUsername());\n}\n\npublic String getUserMailFromToken(String token){\n    Claims claims = Jwts\n            .parser()\n            .setSigningKey(jwtSecret)\n            .parseClaimsJws(token)\n            .getBody();\n\n    return claims.getSubject();\n}\n\npublic boolean validateToken(String token){\n    try{\n        Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token);\n        return true;\n    } catch (ExpiredJwtException e) {\n        e.printStackTrace();\n        log.info(&quot;Token abgelaufen&quot;);\n    } catch (UnsupportedJwtException e) {\n        e.printStackTrace();\n        log.info(&quot;Token nicht supported.&quot;);\n    } catch (MalformedJwtException e) {\n        e.printStackTrace();\n        log.info(&quot;MalformedJwtException&quot;);\n    } catch (SignatureException e) {\n        e.printStackTrace();\n        log.info(&quot;Signatur ungültig&quot;);\n    } catch (IllegalArgumentException e) {\n        e.printStackTrace();\n        log.info(&quot;IllegalArgumentException&quot;);\n    }\n    return false;\n}\n</code></pre>\n<p>}</p>\n<p>The entry point i try to call after successful login</p>\n<pre><code>@RestController\npublic class aktivitaetenAPI {\n\n@Autowired\nAktivitaetenService aktivitaetenService;\n\n@GetMapping(&quot;/getall&quot;)\npublic List&lt;AktivitaetenEntity&gt; getAll(){\n    log.info(&quot;getall request&quot;);\n    return aktivitaetenService.findAll();\n}\n</code></pre>\n<p>}</p>\n<p>I am really happy for any answers.\nThanks in advance!</p>\n<p>Daniel</p>\n"},{"tags":["java","android","textview"],"comments":[{"owner":{"account_id":1731053,"reputation":17266,"user_id":1584654,"accept_rate":72,"display_name":"GVillani82"},"score":1,"creation_date":1491940268,"post_id":43354972,"comment_id":73773154,"body_markdown":"The context that you pass in your constructor is probably null","body":"The context that you pass in your constructor is probably null"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1491940331,"post_id":43354972,"comment_id":73773188,"body_markdown":"No maybe, that&#39;s the only way it can happen.","body":"No maybe, that&#39;s the only way it can happen."},{"owner":{"account_id":6484476,"reputation":481,"user_id":5020491,"accept_rate":70,"display_name":"ksivakumar"},"score":0,"creation_date":1491941580,"post_id":43354972,"comment_id":73773864,"body_markdown":"I understand that there is something that is null, but it is not helpful to just say the error is that. I&#39;m new to Android so I&#39;m looking for an explanation as to what is null and why I need to instantiate it. I thought I instantiated everything I need.","body":"I understand that there is something that is null, but it is not helpful to just say the error is that. I&#39;m new to Android so I&#39;m looking for an explanation as to what is null and why I need to instantiate it. I thought I instantiated everything I need."},{"owner":{"account_id":6484476,"reputation":481,"user_id":5020491,"accept_rate":70,"display_name":"ksivakumar"},"score":0,"creation_date":1491941624,"post_id":43354972,"comment_id":73773888,"body_markdown":"@GVillani82 how do I set my context so it is not null?","body":"@GVillani82 how do I set my context so it is not null?"},{"owner":{"account_id":1731053,"reputation":17266,"user_id":1584654,"accept_rate":72,"display_name":"GVillani82"},"score":0,"creation_date":1491941718,"post_id":43354972,"comment_id":73773945,"body_markdown":"I have no idea: I don&#39;t see the part of your code where you pass the context to the constructor","body":"I have no idea: I don&#39;t see the part of your code where you pass the context to the constructor"}],"owner":{"account_id":6484476,"reputation":481,"user_id":5020491,"accept_rate":70,"display_name":"ksivakumar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1491940297,"answer_count":0,"score":0,"last_activity_date":1660142233,"creation_date":1491940075,"question_id":43354972,"body_markdown":"I am currently editing the AprilTags code from GitHub found here: https://github.com/johnjwang/apriltag-android/tree/master/src/main. I am trying to set a TextView in an inner static class. \r\n\r\n    static class LinesProgram {\r\n        private static final String vertexShaderCode =\r\n                &quot;uniform mat4 uMVPMatrix;\\n&quot; +\r\n                &quot;attribute vec4 aPosition;\\n&quot; +\r\n                &quot;void main() {\\n&quot; +\r\n                &quot;    gl_Position = uMVPMatrix * aPosition;\\n&quot; +\r\n                &quot;}\\n&quot;;\r\n\r\n        private static final String fragmentShaderCode =\r\n                &quot;precision mediump float;\\n&quot; +\r\n                &quot;uniform vec4 uColor;\\n&quot; +\r\n                &quot;void main() {\\n&quot; +\r\n                &quot;    gl_FragColor = uColor;\\n&quot; +\r\n                &quot;}\\n&quot;;\r\n\r\n        private FloatBuffer buffer;\r\n        private Context context;\r\n\r\n        int programId;\r\n\r\n        int aPositionLoc;\r\n        int uMVPMatrixLoc;\r\n        int uColorLoc;\r\n\r\n        public LinesProgram(Context context) {\r\n            // Compile the shader code into a GL program\r\n            this.context = context;\r\n            int vid = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);\r\n            int fid = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);\r\n            programId = GLES20.glCreateProgram();\r\n            checkGlError(&quot;glCreateProgram&quot;);\r\n            GLES20.glAttachShader(programId, vid);\r\n            checkGlError(&quot;glAttachShader&quot;);\r\n            GLES20.glAttachShader(programId, fid);\r\n            checkGlError(&quot;glAttachShader&quot;);\r\n            GLES20.glLinkProgram(programId);\r\n            int[] linkStatus = new int[1];\r\n            GLES20.glGetProgramiv(programId, GLES20.GL_LINK_STATUS, linkStatus, 0);\r\n            if (linkStatus[0] != GLES20.GL_TRUE) {\r\n                Log.e(TAG, &quot;Could not link program: &quot;);\r\n                Log.e(TAG, GLES20.glGetProgramInfoLog(programId));\r\n                GLES20.glDeleteProgram(programId);\r\n            }\r\n\r\n            // Get handles to attributes and uniforms\r\n            aPositionLoc = GLES20.glGetAttribLocation(programId, &quot;aPosition&quot;);\r\n            checkGlError(&quot;get aPosition&quot;);\r\n            uMVPMatrixLoc = GLES20.glGetUniformLocation(programId, &quot;uMVPMatrix&quot;);\r\n            checkGlError(&quot;get uMVPMatrix&quot;);\r\n            uColorLoc = GLES20.glGetUniformLocation(programId, &quot;uColor&quot;);\r\n            checkGlError(&quot;get uColor&quot;);\r\n        }\r\n\r\n        // points = [x0 y0 x1 y1 ...]\r\n        // npoints = number of xy pairs in points (e.g. points is expected to have\r\n        //           a length of at least 2*npoints)\r\n        public void draw(float[] PVM, float[] points, int npoints, float[] rgba, int type) {\r\n            // Reuse points buffer if possible\r\n            if (buffer == null || 2*npoints &gt; buffer.capacity()) {\r\n                int nbytes = 4 * 2*npoints;\r\n                ByteBuffer bb = ByteBuffer.allocateDirect(nbytes);\r\n                bb.order(ByteOrder.nativeOrder());\r\n                buffer = bb.asFloatBuffer();\r\n            }\r\n            buffer.position(0);\r\n            buffer.put(points, 0, 2*npoints);\r\n            buffer.position(0);\r\n\r\n            GLES20.glUseProgram(programId);\r\n            checkGlError(&quot;glUseProgram&quot;);\r\n\r\n            GLES20.glUniformMatrix4fv(uMVPMatrixLoc, 1, false, PVM, 0);\r\n            checkGlError(&quot;glUniformMatrix4fv&quot;);\r\n\r\n            GLES20.glUniform4fv(uColorLoc, 1, rgba, 0);\r\n            checkGlError(&quot;glUniform4fv&quot;);\r\n\r\n            // Render frame\r\n            GLES20.glEnableVertexAttribArray(aPositionLoc);\r\n            GLES20.glVertexAttribPointer(aPositionLoc, 2,\r\n                    GLES20.GL_FLOAT, false, 8, buffer);\r\n\r\n            GLES20.glLineWidth(4.0f);\r\n            GLES20.glDrawArrays(type, 0, npoints);\r\n\r\n            GLES20.glDisableVertexAttribArray(aPositionLoc);\r\n            GLES20.glUseProgram(0);\r\n\r\n            TextView coordinates = (TextView) ((Activity)context).findViewById(R.id.textView1);\r\n            //for (int i = 0; i &lt; points.length; i++) {\r\n            //    coordinates.setText(String.valueOf(points[i]));\r\n            //}\r\n\r\n        }\r\n    }\r\n\r\nHowever, I am getting this error:\r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.view.View android.app.Activity.findViewById(int)&#39; on a null object reference\r\n\r\nand the app crashes when it gets to where I set the TextView.\r\n\r\nI&#39;m sure the text view id is the same as defined in the main.xml file. The TextView is within a FrameLayout if that is important.\r\n\r\nIn the onCreate function I defined at the top, `public TextView coordinates;`.\r\n\r\n\r\n","title":"Setting a TextView in an Inner Static Class - Android","body":"<p>I am currently editing the AprilTags code from GitHub found here: <a href=\"https://github.com/johnjwang/apriltag-android/tree/master/src/main\" rel=\"nofollow noreferrer\">https://github.com/johnjwang/apriltag-android/tree/master/src/main</a>. I am trying to set a TextView in an inner static class.</p>\n<pre><code>static class LinesProgram {\n    private static final String vertexShaderCode =\n            &quot;uniform mat4 uMVPMatrix;\\n&quot; +\n            &quot;attribute vec4 aPosition;\\n&quot; +\n            &quot;void main() {\\n&quot; +\n            &quot;    gl_Position = uMVPMatrix * aPosition;\\n&quot; +\n            &quot;}\\n&quot;;\n\n    private static final String fragmentShaderCode =\n            &quot;precision mediump float;\\n&quot; +\n            &quot;uniform vec4 uColor;\\n&quot; +\n            &quot;void main() {\\n&quot; +\n            &quot;    gl_FragColor = uColor;\\n&quot; +\n            &quot;}\\n&quot;;\n\n    private FloatBuffer buffer;\n    private Context context;\n\n    int programId;\n\n    int aPositionLoc;\n    int uMVPMatrixLoc;\n    int uColorLoc;\n\n    public LinesProgram(Context context) {\n        // Compile the shader code into a GL program\n        this.context = context;\n        int vid = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);\n        int fid = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);\n        programId = GLES20.glCreateProgram();\n        checkGlError(&quot;glCreateProgram&quot;);\n        GLES20.glAttachShader(programId, vid);\n        checkGlError(&quot;glAttachShader&quot;);\n        GLES20.glAttachShader(programId, fid);\n        checkGlError(&quot;glAttachShader&quot;);\n        GLES20.glLinkProgram(programId);\n        int[] linkStatus = new int[1];\n        GLES20.glGetProgramiv(programId, GLES20.GL_LINK_STATUS, linkStatus, 0);\n        if (linkStatus[0] != GLES20.GL_TRUE) {\n            Log.e(TAG, &quot;Could not link program: &quot;);\n            Log.e(TAG, GLES20.glGetProgramInfoLog(programId));\n            GLES20.glDeleteProgram(programId);\n        }\n\n        // Get handles to attributes and uniforms\n        aPositionLoc = GLES20.glGetAttribLocation(programId, &quot;aPosition&quot;);\n        checkGlError(&quot;get aPosition&quot;);\n        uMVPMatrixLoc = GLES20.glGetUniformLocation(programId, &quot;uMVPMatrix&quot;);\n        checkGlError(&quot;get uMVPMatrix&quot;);\n        uColorLoc = GLES20.glGetUniformLocation(programId, &quot;uColor&quot;);\n        checkGlError(&quot;get uColor&quot;);\n    }\n\n    // points = [x0 y0 x1 y1 ...]\n    // npoints = number of xy pairs in points (e.g. points is expected to have\n    //           a length of at least 2*npoints)\n    public void draw(float[] PVM, float[] points, int npoints, float[] rgba, int type) {\n        // Reuse points buffer if possible\n        if (buffer == null || 2*npoints &gt; buffer.capacity()) {\n            int nbytes = 4 * 2*npoints;\n            ByteBuffer bb = ByteBuffer.allocateDirect(nbytes);\n            bb.order(ByteOrder.nativeOrder());\n            buffer = bb.asFloatBuffer();\n        }\n        buffer.position(0);\n        buffer.put(points, 0, 2*npoints);\n        buffer.position(0);\n\n        GLES20.glUseProgram(programId);\n        checkGlError(&quot;glUseProgram&quot;);\n\n        GLES20.glUniformMatrix4fv(uMVPMatrixLoc, 1, false, PVM, 0);\n        checkGlError(&quot;glUniformMatrix4fv&quot;);\n\n        GLES20.glUniform4fv(uColorLoc, 1, rgba, 0);\n        checkGlError(&quot;glUniform4fv&quot;);\n\n        // Render frame\n        GLES20.glEnableVertexAttribArray(aPositionLoc);\n        GLES20.glVertexAttribPointer(aPositionLoc, 2,\n                GLES20.GL_FLOAT, false, 8, buffer);\n\n        GLES20.glLineWidth(4.0f);\n        GLES20.glDrawArrays(type, 0, npoints);\n\n        GLES20.glDisableVertexAttribArray(aPositionLoc);\n        GLES20.glUseProgram(0);\n\n        TextView coordinates = (TextView) ((Activity)context).findViewById(R.id.textView1);\n        //for (int i = 0; i &lt; points.length; i++) {\n        //    coordinates.setText(String.valueOf(points[i]));\n        //}\n\n    }\n}\n</code></pre>\n<p>However, I am getting this error:</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'android.view.View android.app.Activity.findViewById(int)' on a null object reference\n</code></pre>\n<p>and the app crashes when it gets to where I set the TextView.</p>\n<p>I'm sure the text view id is the same as defined in the main.xml file. The TextView is within a FrameLayout if that is important.</p>\n<p>In the onCreate function I defined at the top, <code>public TextView coordinates;</code>.</p>\n"},{"tags":["java","sockets","systemd"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1470914080,"post_id":38893293,"comment_id":65148671,"body_markdown":"*Why* does your Java service take 60 seconds to become ready? and why are you starting your clients before all your system services are ready?","body":"<i>Why</i> does your Java service take 60 seconds to become ready? and why are you starting your clients before all your system services are ready?"},{"owner":{"account_id":6512884,"reputation":4874,"user_id":5039582,"accept_rate":29,"display_name":"Mandragor"},"score":0,"creation_date":1470914219,"post_id":38893293,"comment_id":65148758,"body_markdown":"i am not sure what it does. It &quot;optimizes&quot; its database and takes about 60 seconds (sometimes much more) and then it is ready to &quot;serve&quot;. The second is a &quot;client service&quot; , like everybody uses DNS as a client (e.g. nginx to resolve host names). So you cannot run without having the former service up.","body":"i am not sure what it does. It &quot;optimizes&quot; its database and takes about 60 seconds (sometimes much more) and then it is ready to &quot;serve&quot;. The second is a &quot;client service&quot; , like everybody uses DNS as a client (e.g. nginx to resolve host names). So you cannot run without having the former service up."}],"answers":[{"tags":[],"owner":{"account_id":73817,"reputation":19425,"user_id":212378,"accept_rate":57,"display_name":"Alexis Wilke"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1660142074,"creation_date":1472273002,"answer_id":39177539,"question_id":38893293,"body_markdown":"# Initialization Process Requires Forking\r\n\r\nsystemd waits for a daemon to initialize itself if the daemon forks. In your situation, that&#39;s pretty much the only way you have to do this.\r\n\r\nThe daemon offering the HTTP service must do all of its initialization in the main thread, once that initialization is done and the socket is listening for connections, it will `fork()`. The main process then exits. At that point systemd knows that your process was successfully initialized (exit 0) or not (exit 1).\r\n\r\nSuch a service receives the [Type=...][1] value of forking as follow:\r\n\r\n    [Service]\r\n    Type=forking\r\n    ...\r\n\r\n_**Note:** If you are writing new code, consider not using fork. systemd already creates a new process for you so you do not have to fork. That was an old System V boot requirement for services._\r\n\r\n# &quot;Requires&quot; will make sure the process waits\r\n\r\nThe other services have to wait so they have to require the first to be started. Say your first service is called A, you would have a [Requires][2] like this:\r\n\r\n    [Unit]\r\n    ...\r\n    Requires=A\r\n    ...\r\n\r\n# Program with Patience in Mind\r\n\r\nOf course, there is always another way which is for the other services to know to be patient. That means try to connect to the HTTP port, if it fails, sleep for a bit (in your case, 1 or 2 seconds would be just fine) then try again, until it works.\r\n\r\nI have developed both methods and they both work very well.\r\n\r\n_**Note:** A powerful aspect to this method, if service **A** gets restarted, you&#39;d get a new socket. This server can then auto-reconnect to the new socket when it detects that the old one goes down. This means you don&#39;t have to restart the other services when restarting service **A**. I like this method, but it&#39;s a bit more work to make sure it&#39;s all properly implemented._\r\n\r\n# Use the systemd Auto-Restart Feature?\r\n\r\nAnother way, maybe, would be to use the [restart on failure][3]. So if the child attempts to connect to that HTTP service and fails, it should fail, right? systemd can automatically restart your process over and over again until it succeeds. It&#39;s sucky, but if you have no control over the code of those daemons, it&#39;s probably the easiest way.\r\n\r\n    [Service]\r\n    ...\r\n    Restart=on-failure\r\n    RestartSec=10\r\n    #SuccessExitStatus=3 7   # if success is not always just 0\r\n    ...\r\n\r\nThis example waits 10 seconds after a failure before attempting to restart.\r\n\r\n# Hack (last resort, not recommended)\r\n\r\nYou could attempt a hack, although I do not ever recommend such things because something could happen that breaks such... in the services, change the files so that they have a sleep 60 then start the main process. For that, just write a script like so:\r\n\r\n    #!/bin/sh\r\n    sleep 60\r\n    &quot;$@&quot;\r\n\r\nThen in the .service files, call that script as in:\r\n\r\n    ExecStart=/path/to/script /path/to/service args to service\r\n\r\nThis will run the script instead of directly your code. The script will first sleep for 60 seconds and then try to run your service. So if for some reason this time the HTTP service takes 90 seconds... it will still fail.\r\n\r\nStill, this can be useful to know since that script could do all sorts of things, such as use the [`nc`][4] tool to probe the port before actually starting the service process. You could even write your own probing tool.\r\n\r\n    #!/bin/sh\r\n    while true\r\n    do\r\n      sleep 1\r\n      if probe\r\n      then\r\n        break\r\n      fi\r\n    done\r\n    &quot;$@&quot;\r\n\r\nHowever, notice that such a loop is blocking until `probe` returns with exit code 0.\r\n\r\n\r\n  [1]: https://www.freedesktop.org/software/systemd/man/systemd.service.html#Type=\r\n  [2]: https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Requires=\r\n  [3]: https://www.freedesktop.org/software/systemd/man/systemd.service.html#Restart=\r\n  [4]: http://linux.die.net/man/1/nc","title":"wait with systemd until a service socket becomes available and then start a depended service","body":"<h1>Initialization Process Requires Forking</h1>\n<p>systemd waits for a daemon to initialize itself if the daemon forks. In your situation, that's pretty much the only way you have to do this.</p>\n<p>The daemon offering the HTTP service must do all of its initialization in the main thread, once that initialization is done and the socket is listening for connections, it will <code>fork()</code>. The main process then exits. At that point systemd knows that your process was successfully initialized (exit 0) or not (exit 1).</p>\n<p>Such a service receives the <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.service.html#Type=\" rel=\"nofollow noreferrer\">Type=...</a> value of forking as follow:</p>\n<pre><code>[Service]\nType=forking\n...\n</code></pre>\n<p><em><strong>Note:</strong> If you are writing new code, consider not using fork. systemd already creates a new process for you so you do not have to fork. That was an old System V boot requirement for services.</em></p>\n<h1>&quot;Requires&quot; will make sure the process waits</h1>\n<p>The other services have to wait so they have to require the first to be started. Say your first service is called A, you would have a <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Requires=\" rel=\"nofollow noreferrer\">Requires</a> like this:</p>\n<pre><code>[Unit]\n...\nRequires=A\n...\n</code></pre>\n<h1>Program with Patience in Mind</h1>\n<p>Of course, there is always another way which is for the other services to know to be patient. That means try to connect to the HTTP port, if it fails, sleep for a bit (in your case, 1 or 2 seconds would be just fine) then try again, until it works.</p>\n<p>I have developed both methods and they both work very well.</p>\n<p><em><strong>Note:</strong> A powerful aspect to this method, if service <strong>A</strong> gets restarted, you'd get a new socket. This server can then auto-reconnect to the new socket when it detects that the old one goes down. This means you don't have to restart the other services when restarting service <strong>A</strong>. I like this method, but it's a bit more work to make sure it's all properly implemented.</em></p>\n<h1>Use the systemd Auto-Restart Feature?</h1>\n<p>Another way, maybe, would be to use the <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.service.html#Restart=\" rel=\"nofollow noreferrer\">restart on failure</a>. So if the child attempts to connect to that HTTP service and fails, it should fail, right? systemd can automatically restart your process over and over again until it succeeds. It's sucky, but if you have no control over the code of those daemons, it's probably the easiest way.</p>\n<pre><code>[Service]\n...\nRestart=on-failure\nRestartSec=10\n#SuccessExitStatus=3 7   # if success is not always just 0\n...\n</code></pre>\n<p>This example waits 10 seconds after a failure before attempting to restart.</p>\n<h1>Hack (last resort, not recommended)</h1>\n<p>You could attempt a hack, although I do not ever recommend such things because something could happen that breaks such... in the services, change the files so that they have a sleep 60 then start the main process. For that, just write a script like so:</p>\n<pre><code>#!/bin/sh\nsleep 60\n&quot;$@&quot;\n</code></pre>\n<p>Then in the .service files, call that script as in:</p>\n<pre><code>ExecStart=/path/to/script /path/to/service args to service\n</code></pre>\n<p>This will run the script instead of directly your code. The script will first sleep for 60 seconds and then try to run your service. So if for some reason this time the HTTP service takes 90 seconds... it will still fail.</p>\n<p>Still, this can be useful to know since that script could do all sorts of things, such as use the <a href=\"http://linux.die.net/man/1/nc\" rel=\"nofollow noreferrer\"><code>nc</code></a> tool to probe the port before actually starting the service process. You could even write your own probing tool.</p>\n<pre><code>#!/bin/sh\nwhile true\ndo\n  sleep 1\n  if probe\n  then\n    break\n  fi\ndone\n&quot;$@&quot;\n</code></pre>\n<p>However, notice that such a loop is blocking until <code>probe</code> returns with exit code 0.</p>\n"},{"tags":[],"owner":{"account_id":1520428,"reputation":2614,"user_id":1420237,"accept_rate":71,"display_name":"Lucas Werkmeister"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1527780400,"creation_date":1527780400,"answer_id":50627840,"question_id":38893293,"body_markdown":"You have several options here.\r\n\r\n# Use a socket unit\r\n\r\nThe most elegant solution is to let systemd manage the socket for you. If you control the source code of the Java service, change it to use [`System.inheritedChannel()`](https://docs.oracle.com/javase/10/docs/api/java/lang/System.html#inheritedChannel()) instead of allocating its own socket, and then use systemd units like this:\r\n\r\n    # example.socket\r\n    [Socket]\r\n    ListenStream=%t/example\r\n    \r\n    [Install]\r\n    WantedBy=sockets.target\r\n\r\n&amp;nbsp;\r\n\r\n    # example.service\r\n    [Service]\r\n    ExecStart=/usr/bin/java ...\r\n    StandardInput=socket\r\n    StandardOutput=socket\r\n    StandardError=journal\r\n\r\n\r\nsystemd will create the socket immediately (`%t` is the runtime directory, so in a system unit, the socket will be `/run/example`), and start the service as soon as the first connection attempt is made. (If you want the service to be started unconditionally, add an `Install` section to it as well, with `WantedBy=multi-user.target`.) When your client program connects to the socket, it will be queued by the kernel and block until the server is ready to accept connections on the socket. One additional benefit from this is that you can restart the service without any downtime on the socket – connection attempts will be queued until the restarted service is ready to accept connections again.\r\n\r\n# Make the service signal readiness to systemd\r\n\r\nAlternatively, you can set up the service so that it signals to systemd when it is ready, and order the client after it. (Note that this requires `After=example.service`, not just `Requires=example.service`! Dependencies and ordering are orthogonal – without `After=`, both will be started in parallel.) There are two main service types that might make this possible:\r\n\r\n- `Type=forking`: systemd will consider the service to be ready as soon as the main program exits. Since you can’t `fork` in Java, I think you would have to write a small shell script which starts the server in the background and then waits until the socket is available (`while ! test -S /run/example; do sleep 1s; done`). Once the script exits, the service is considered ready.\r\n\r\n- `Type=notify`: systemd will wait for a message from the service before it is considered ready. Ideally, the message should be sent from the service PID itself: check if you can call the `sd_notify` function from libsystemd via JNI/JNA/whatever (specifically, `sd_notify(0, &quot;READY=1&quot;)`). If that’s not possible, you can use the `systemd-notify` command-line tool (`--ready` option), but then you need to set `NotifyAccess=all` in the service unit (by default, only the main process may send notifications), and even then it likely will not work (systemd needs to process the message before `systemd-notify` exits, otherwise it will not be able to verify which cgroup the message came from).","title":"wait with systemd until a service socket becomes available and then start a depended service","body":"<p>You have several options here.</p>\n\n<h1>Use a socket unit</h1>\n\n<p>The most elegant solution is to let systemd manage the socket for you. If you control the source code of the Java service, change it to use <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/System.html#inheritedChannel()\" rel=\"noreferrer\"><code>System.inheritedChannel()</code></a> instead of allocating its own socket, and then use systemd units like this:</p>\n\n<pre><code># example.socket\n[Socket]\nListenStream=%t/example\n\n[Install]\nWantedBy=sockets.target\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code># example.service\n[Service]\nExecStart=/usr/bin/java ...\nStandardInput=socket\nStandardOutput=socket\nStandardError=journal\n</code></pre>\n\n<p>systemd will create the socket immediately (<code>%t</code> is the runtime directory, so in a system unit, the socket will be <code>/run/example</code>), and start the service as soon as the first connection attempt is made. (If you want the service to be started unconditionally, add an <code>Install</code> section to it as well, with <code>WantedBy=multi-user.target</code>.) When your client program connects to the socket, it will be queued by the kernel and block until the server is ready to accept connections on the socket. One additional benefit from this is that you can restart the service without any downtime on the socket – connection attempts will be queued until the restarted service is ready to accept connections again.</p>\n\n<h1>Make the service signal readiness to systemd</h1>\n\n<p>Alternatively, you can set up the service so that it signals to systemd when it is ready, and order the client after it. (Note that this requires <code>After=example.service</code>, not just <code>Requires=example.service</code>! Dependencies and ordering are orthogonal – without <code>After=</code>, both will be started in parallel.) There are two main service types that might make this possible:</p>\n\n<ul>\n<li><p><code>Type=forking</code>: systemd will consider the service to be ready as soon as the main program exits. Since you can’t <code>fork</code> in Java, I think you would have to write a small shell script which starts the server in the background and then waits until the socket is available (<code>while ! test -S /run/example; do sleep 1s; done</code>). Once the script exits, the service is considered ready.</p></li>\n<li><p><code>Type=notify</code>: systemd will wait for a message from the service before it is considered ready. Ideally, the message should be sent from the service PID itself: check if you can call the <code>sd_notify</code> function from libsystemd via JNI/JNA/whatever (specifically, <code>sd_notify(0, \"READY=1\")</code>). If that’s not possible, you can use the <code>systemd-notify</code> command-line tool (<code>--ready</code> option), but then you need to set <code>NotifyAccess=all</code> in the service unit (by default, only the main process may send notifications), and even then it likely will not work (systemd needs to process the message before <code>systemd-notify</code> exits, otherwise it will not be able to verify which cgroup the message came from).</p></li>\n</ul>\n"}],"owner":{"account_id":6512884,"reputation":4874,"user_id":5039582,"accept_rate":29,"display_name":"Mandragor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13515,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":39177539,"answer_count":2,"score":6,"last_activity_date":1660142074,"creation_date":1470909982,"question_id":38893293,"body_markdown":"Currently I have slow starting java service in systemd which takes about 60 seconds until it opens its HTTP port and serves other clients.\r\n\r\nAnother client service expects this service to be available (is a client of the this service), otherwise it dies after a certain retry. It also started with systemd. This is to be clear also a service. But uses the former like database.\r\n\r\nCan I configure systemd to wait until the first service has made his socket available?  (something like if the socket is actually listens , then the second client service should start).\r\n\r\n","title":"wait with systemd until a service socket becomes available and then start a depended service","body":"<p>Currently I have slow starting java service in systemd which takes about 60 seconds until it opens its HTTP port and serves other clients.</p>\n\n<p>Another client service expects this service to be available (is a client of the this service), otherwise it dies after a certain retry. It also started with systemd. This is to be clear also a service. But uses the former like database.</p>\n\n<p>Can I configure systemd to wait until the first service has made his socket available?  (something like if the socket is actually listens , then the second client service should start).</p>\n"},{"tags":["java","html","css","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":12340469,"reputation":82,"user_id":9003853,"display_name":"Bhala T R"},"score":0,"creation_date":1660134269,"post_id":73303214,"comment_id":129460327,"body_markdown":"Try the JavascriptExecutorof Selenium WebDriver \n```\nJavascriptExecutor js = (JavascriptExecutor) driver;  \njs.executeScript(Script);\n```\nHere the Script is something like for your case: &quot;document.getElementsByClassName(&quot;color_11&quot;).value&quot;","body":"Try the JavascriptExecutorof Selenium WebDriver  ``` JavascriptExecutor js = (JavascriptExecutor) driver;   js.executeScript(Script); ``` Here the Script is something like for your case: &quot;document.getElementsByClassName(&quot;color_11&quot;).value&quot;"},{"owner":{"account_id":12347179,"reputation":53,"user_id":9007595,"display_name":"Erhan Yumer"},"score":0,"creation_date":1660139527,"post_id":73303214,"comment_id":129462544,"body_markdown":"Nope. not working. Also I am using Java, not JS. Btw what should I do if that element is inside an iframe? Should I switch to it and then locate element itself? How can I do it?","body":"Nope. not working. Also I am using Java, not JS. Btw what should I do if that element is inside an iframe? Should I switch to it and then locate element itself? How can I do it?"}],"answers":[{"tags":[],"owner":{"account_id":12347179,"reputation":53,"user_id":9007595,"display_name":"Erhan Yumer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660141953,"creation_date":1660141953,"answer_id":73308164,"question_id":73303214,"body_markdown":"Ok so I was not aware of the existence of iframes. The element I was looking for is inside of an iframe. First, I had to locate the iframe, then switch to it and then I located the element itself.\r\n\r\nThe code I used for that is below:\r\n\r\n    driver.switchTo().frame(&quot;iframe&quot;).findElement(By.cssSelector(&quot;#comp-kvi6khho &gt; p:nth-child(1) &gt; span:nth-child(1) &gt; span:nth-child(1)&quot;)).getText();","title":"Selenium WebDriver get text inside of a span","body":"<p>Ok so I was not aware of the existence of iframes. The element I was looking for is inside of an iframe. First, I had to locate the iframe, then switch to it and then I located the element itself.</p>\n<p>The code I used for that is below:</p>\n<pre><code>driver.switchTo().frame(&quot;iframe&quot;).findElement(By.cssSelector(&quot;#comp-kvi6khho &gt; p:nth-child(1) &gt; span:nth-child(1) &gt; span:nth-child(1)&quot;)).getText();\n</code></pre>\n"}],"owner":{"account_id":12347179,"reputation":53,"user_id":9007595,"display_name":"Erhan Yumer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73308164,"answer_count":1,"score":0,"last_activity_date":1660141953,"creation_date":1660120752,"question_id":73303214,"body_markdown":"I&#39;m trying to extract the `&quot;This is our address&quot;` text inside of a span where HTML code are as follows:\r\n\r\n    &lt;div id=&quot;comp-kvi6khho&quot; class=&quot;2hij5_3bcaz&quot;&gt;\r\n    &lt;p class=&quot;font_8&quot;&gt;\r\n    &lt;span style=&quot;letter-spacing:normal;&quot;&gt;\r\n    &lt;span class=&quot;color_11&quot;&gt;This is our address&lt;/span&gt;\r\n\r\nI have tried: \r\n\r\n    driver.findElement(By.className(&quot;color_11&quot;)).getText();\r\n    driver.findElement(By.cssSelector(&quot;#comp-kvi6khho &gt; p:nth-child(1) &gt; span:nth-child(1) &gt; span:nth-child(1)&quot;)).getText();\r\n    driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[3]/div/main/div/div/div/div[2]/div/div/div/section[9]/div[2]/div[1]/div[2]/div/div[4]/p/span/span&quot;)).getAttribute(&quot;InnerHTML&quot;);\r\n\r\nso far. But all of them I get `Unable to locate element` error. \r\nHow can I extract the text inside of most inner span class?\r\n\r\n","title":"Selenium WebDriver get text inside of a span","body":"<p>I'm trying to extract the <code>&quot;This is our address&quot;</code> text inside of a span where HTML code are as follows:</p>\n<pre><code>&lt;div id=&quot;comp-kvi6khho&quot; class=&quot;2hij5_3bcaz&quot;&gt;\n&lt;p class=&quot;font_8&quot;&gt;\n&lt;span style=&quot;letter-spacing:normal;&quot;&gt;\n&lt;span class=&quot;color_11&quot;&gt;This is our address&lt;/span&gt;\n</code></pre>\n<p>I have tried:</p>\n<pre><code>driver.findElement(By.className(&quot;color_11&quot;)).getText();\ndriver.findElement(By.cssSelector(&quot;#comp-kvi6khho &gt; p:nth-child(1) &gt; span:nth-child(1) &gt; span:nth-child(1)&quot;)).getText();\ndriver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[3]/div/main/div/div/div/div[2]/div/div/div/section[9]/div[2]/div[1]/div[2]/div/div[4]/p/span/span&quot;)).getAttribute(&quot;InnerHTML&quot;);\n</code></pre>\n<p>so far. But all of them I get <code>Unable to locate element</code> error.\nHow can I extract the text inside of most inner span class?</p>\n"},{"tags":["java","algorithm","printing","tree","directory"],"comments":[{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":0,"creation_date":1446212770,"post_id":33437166,"comment_id":54663008,"body_markdown":"refer this link too http://stackoverflow.com/questions/10655085/print-directory-tree","body":"refer this link too <a href=\"http://stackoverflow.com/questions/10655085/print-directory-tree\">stackoverflow.com/questions/10655085/print-directory-tree</a>"},{"owner":{"account_id":1512481,"reputation":3083,"user_id":1414214,"accept_rate":88,"display_name":"Bon"},"score":0,"creation_date":1447902063,"post_id":33437166,"comment_id":55355648,"body_markdown":"Hi Rick, have you got a good answer?","body":"Hi Rick, have you got a good answer?"}],"answers":[{"tags":[],"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1446212724,"creation_date":1446212724,"answer_id":33437515,"question_id":33437166,"body_markdown":"    import java.io.File;\r\n    public class FileAssert {\r\n    \r\n    /**\r\n     * Pretty print the directory tree and its file names.\r\n     * \r\n     * @param folder\r\n     *            must be a folder.\r\n     * @return\r\n     */\r\n    public static String printDirectoryTree(File folder) {\r\n        if (!folder.isDirectory()) {\r\n            throw new IllegalArgumentException(&quot;folder is not a Directory&quot;);\r\n        }\r\n        int indent = 0;\r\n        StringBuilder sb = new StringBuilder();\r\n        printDirectoryTree(folder, indent, sb);\r\n        return sb.toString();\r\n    }\r\n    \r\n    private static void printDirectoryTree(File folder, int indent,\r\n            StringBuilder sb) {\r\n        if (!folder.isDirectory()) {\r\n            throw new IllegalArgumentException(&quot;folder is not a Directory&quot;);\r\n        }\r\n        sb.append(getIndentString(indent));\r\n        sb.append(&quot;+--&quot;);\r\n        sb.append(folder.getName());\r\n        sb.append(&quot;/&quot;);\r\n        sb.append(&quot;\\n&quot;);\r\n        for (File file : folder.listFiles()) {\r\n            if (file.isDirectory()) {\r\n                printDirectoryTree(file, indent + 1, sb);\r\n            } else {\r\n                printFile(file, indent + 1, sb);\r\n            }\r\n        }\r\n    \r\n    }\r\n    \r\n    private static void printFile(File file, int indent, StringBuilder sb) {\r\n        sb.append(getIndentString(indent));\r\n        sb.append(&quot;+--&quot;);\r\n        sb.append(file.getName());\r\n        sb.append(&quot;\\n&quot;);\r\n    }\r\n    \r\n    private static String getIndentString(int indent) {\r\n        StringBuilder sb = new StringBuilder();\r\n        for (int i = 0; i &lt; indent; i++) {\r\n            sb.append(&quot;|  &quot;);\r\n        }\r\n        return sb.toString();\r\n    }\r\n    }","title":"print directory like tree command","body":"<pre><code>import java.io.File;\npublic class FileAssert {\n\n/**\n * Pretty print the directory tree and its file names.\n * \n * @param folder\n *            must be a folder.\n * @return\n */\npublic static String printDirectoryTree(File folder) {\n    if (!folder.isDirectory()) {\n        throw new IllegalArgumentException(\"folder is not a Directory\");\n    }\n    int indent = 0;\n    StringBuilder sb = new StringBuilder();\n    printDirectoryTree(folder, indent, sb);\n    return sb.toString();\n}\n\nprivate static void printDirectoryTree(File folder, int indent,\n        StringBuilder sb) {\n    if (!folder.isDirectory()) {\n        throw new IllegalArgumentException(\"folder is not a Directory\");\n    }\n    sb.append(getIndentString(indent));\n    sb.append(\"+--\");\n    sb.append(folder.getName());\n    sb.append(\"/\");\n    sb.append(\"\\n\");\n    for (File file : folder.listFiles()) {\n        if (file.isDirectory()) {\n            printDirectoryTree(file, indent + 1, sb);\n        } else {\n            printFile(file, indent + 1, sb);\n        }\n    }\n\n}\n\nprivate static void printFile(File file, int indent, StringBuilder sb) {\n    sb.append(getIndentString(indent));\n    sb.append(\"+--\");\n    sb.append(file.getName());\n    sb.append(\"\\n\");\n}\n\nprivate static String getIndentString(int indent) {\n    StringBuilder sb = new StringBuilder();\n    for (int i = 0; i &lt; indent; i++) {\n        sb.append(\"|  \");\n    }\n    return sb.toString();\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3568716,"reputation":28786,"user_id":2979617,"display_name":"M Oehm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446212887,"creation_date":1446212887,"answer_id":33437572,"question_id":33437166,"body_markdown":"You must keep the information whether an item is the last one in the folder for all parent levels. That is, you should make `isLast` an array.\r\n\r\nFor example, when you try to print the item `b111`, that list should be `[true, true, false, true]`. The first entries tell you whether or not to print a vertical line, the last entry tells you wheher to print a corner or a T-junction.","title":"print directory like tree command","body":"<p>You must keep the information whether an item is the last one in the folder for all parent levels. That is, you should make <code>isLast</code> an array.</p>\n\n<p>For example, when you try to print the item <code>b111</code>, that list should be <code>[true, true, false, true]</code>. The first entries tell you whether or not to print a vertical line, the last entry tells you wheher to print a corner or a T-junction.</p>\n"},{"tags":[],"owner":{"account_id":1512481,"reputation":3083,"user_id":1414214,"accept_rate":88,"display_name":"Bon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660141726,"creation_date":1446215687,"answer_id":33438475,"question_id":33437166,"body_markdown":"Try this one, I added another parameter into your methods called hierarchyTree to indicate if at a certain level, we should print | or empty space.\r\n\r\nIt is used as a stack to easily maintain the folder levels based on the recursion level.\r\n\r\n    public static void main(final String[] args) {\r\n        final File folder = new File(&quot;example&quot;);\r\n        final StringBuilder sb = renderFolder(folder);\r\n        System.out.println(sb.toString());\r\n    }\r\n\r\n    private static StringBuilder renderFolder(File folder) {\r\n        return renderFolder(folder, 0, new StringBuilder(), false, new ArrayList&lt;&gt;());\r\n    }\r\n    \r\n    private static StringBuilder renderFolder(File folder, int level, StringBuilder sb, boolean isLast, List&lt;Boolean&gt; hierarchyTree) {\r\n        indent(sb, level, isLast, hierarchyTree).append(folder.getName()).append(&quot;\\n&quot;);\r\n\r\n        File[] objects = folder.listFiles(new FilenameFilter() {\r\n            @Override\r\n            public boolean accept(File current, String name) {\r\n                return new File(current, name).isDirectory();\r\n            }\r\n        });\r\n\r\n        for (int i = 0; i &lt; objects.length; i++) {\r\n            boolean last = ((i + 1) == objects.length);\r\n\r\n            // this means if the current folder will still need to print subfolders at this level, if yes, then we need to continue print |\r\n            hierarchyTree.add(i != objects.length - 1);\r\n            renderFolder(objects[i], level + 1, sb, last, hierarchyTree);\r\n\r\n            // pop the last value as we return from a lower level to a higher level\r\n            hierarchyTree.remove(hierarchyTree.size() - 1);\r\n        }\r\n        return sb;\r\n    }\r\n\r\n\r\n    private static StringBuilder indent(StringBuilder sb, int level, boolean isLast, List&lt;Boolean&gt; hierarchyTree) {\r\n        String indentContent = &quot;\\u2502   &quot;;\r\n        for (int i = 0; i &lt; hierarchyTree.size() - 1; ++i) {\r\n            // determines if we need to print | at this level to show the tree structure\r\n            // i.e. if this folder has a sibling foler that is going to be printed later\r\n            if (hierarchyTree.get(i)) {\r\n                sb.append(indentContent);\r\n            } else {\r\n                sb.append(&quot;    &quot;); // otherwise print empty space\r\n            }\r\n        }\r\n\r\n        if (level &gt; 0) {\r\n            sb.append(isLast\r\n                    ? &quot;\\u2514\\u2500\\u2500&quot;\r\n                    : &quot;\\u251c\\u2500\\u2500&quot;).append(&quot; &quot;);\r\n        }\r\n\r\n        return sb;\r\n    }\r\n\r\nA sample result:\r\n\r\n    example\r\n    ├── a\r\n    ├── b\r\n    │   └── b1\r\n    │       ├── b11\r\n    │       │   └── b111\r\n    │       └── b12\r\n    │           ├── b121\r\n    │           └── b122\r\n    │               └── b1221\r\n    └── c","title":"print directory like tree command","body":"<p>Try this one, I added another parameter into your methods called hierarchyTree to indicate if at a certain level, we should print | or empty space.</p>\n<p>It is used as a stack to easily maintain the folder levels based on the recursion level.</p>\n<pre><code>public static void main(final String[] args) {\n    final File folder = new File(&quot;example&quot;);\n    final StringBuilder sb = renderFolder(folder);\n    System.out.println(sb.toString());\n}\n\nprivate static StringBuilder renderFolder(File folder) {\n    return renderFolder(folder, 0, new StringBuilder(), false, new ArrayList&lt;&gt;());\n}\n\nprivate static StringBuilder renderFolder(File folder, int level, StringBuilder sb, boolean isLast, List&lt;Boolean&gt; hierarchyTree) {\n    indent(sb, level, isLast, hierarchyTree).append(folder.getName()).append(&quot;\\n&quot;);\n\n    File[] objects = folder.listFiles(new FilenameFilter() {\n        @Override\n        public boolean accept(File current, String name) {\n            return new File(current, name).isDirectory();\n        }\n    });\n\n    for (int i = 0; i &lt; objects.length; i++) {\n        boolean last = ((i + 1) == objects.length);\n\n        // this means if the current folder will still need to print subfolders at this level, if yes, then we need to continue print |\n        hierarchyTree.add(i != objects.length - 1);\n        renderFolder(objects[i], level + 1, sb, last, hierarchyTree);\n\n        // pop the last value as we return from a lower level to a higher level\n        hierarchyTree.remove(hierarchyTree.size() - 1);\n    }\n    return sb;\n}\n\n\nprivate static StringBuilder indent(StringBuilder sb, int level, boolean isLast, List&lt;Boolean&gt; hierarchyTree) {\n    String indentContent = &quot;\\u2502   &quot;;\n    for (int i = 0; i &lt; hierarchyTree.size() - 1; ++i) {\n        // determines if we need to print | at this level to show the tree structure\n        // i.e. if this folder has a sibling foler that is going to be printed later\n        if (hierarchyTree.get(i)) {\n            sb.append(indentContent);\n        } else {\n            sb.append(&quot;    &quot;); // otherwise print empty space\n        }\n    }\n\n    if (level &gt; 0) {\n        sb.append(isLast\n                ? &quot;\\u2514\\u2500\\u2500&quot;\n                : &quot;\\u251c\\u2500\\u2500&quot;).append(&quot; &quot;);\n    }\n\n    return sb;\n}\n</code></pre>\n<p>A sample result:</p>\n<pre><code>example\n├── a\n├── b\n│   └── b1\n│       ├── b11\n│       │   └── b111\n│       └── b12\n│           ├── b121\n│           └── b122\n│               └── b1221\n└── c\n</code></pre>\n"}],"owner":{"account_id":7213725,"reputation":49,"user_id":5506942,"display_name":"RickGrimes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3299,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":3,"score":4,"last_activity_date":1660141726,"creation_date":1446211692,"question_id":33437166,"body_markdown":"I have to print a directory tree.\r\nI have the following code:\r\n\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        \r\n      File root = new File(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\example&quot;);\r\n\r\n      if (!root.isDirectory())\r\n      {\r\n        throw new IllegalArgumentException(&quot;Invalid directory: &quot; + root.getName());\r\n      }\r\n\r\n      int level = 0;\r\n      System.out.println(renderFolder(root, level, new StringBuilder(), false));\r\n    }\r\n\r\n    private static StringBuilder renderFolder(File folder, int level, StringBuilder sb, boolean isLast)\r\n    {\r\n      indent(sb, level, isLast).append(folder.getName()).append(&quot;\\n&quot;);\r\n\r\n      File[] objects = folder.listFiles();\r\n\r\n      for (int i = 0; i &lt; objects.length; i++)\r\n      {\r\n        boolean last = ((i + 1) == objects.length);\r\n\r\n        if (objects[i].isDirectory())\r\n        {\r\n          renderFolder(objects[i], level + 1, sb, last);\r\n        }\r\n      }\r\n      return sb;\r\n    }\r\n\r\n   \r\n    private static StringBuilder indent(StringBuilder sb, int level, boolean isLast)\r\n    {\r\n     \r\n      for (int i = 1; i &lt; level; i++)\r\n      {\r\n         sb.append(&quot;\\u2502   &quot;);\r\n      }\r\n\r\n      if (level &gt; 0)\r\n      {\r\n        sb.append(isLast\r\n          ? &quot;\\u2514\\u2500\\u2500&quot;\r\n          : &quot;\\u251c\\u2500\\u2500&quot;);\r\n      }\r\n\r\n      return sb;\r\n    }\r\n  \r\nwith this output:\r\n\r\n   \r\n\r\n    example\r\n    ├──a\r\n    └──b\r\n    │   └──b1\r\n    │   │   ├──b11\r\n    │   │   │   └──b111\r\n    │   │   └──b12\r\n    │   │   │   ├──b121\r\n    │   │   │   └──b122\r\n    │   │   │   │   └──b1221\r\n\r\nI didn&#39;t manage to remove the useless deep lines. How to do this?  \r\nAlso my answer is: &quot;How can I keep lines connected(as much as the cmd&#39;s tree command)?&quot;\r\n\r\n\r\n ","title":"print directory like tree command","body":"<p>I have to print a directory tree.\nI have the following code:</p>\n\n<pre><code>public static void main(String[] args) throws Exception\n{\n\n  File root = new File(\"C:\\\\Users\\\\User\\\\Desktop\\\\example\");\n\n  if (!root.isDirectory())\n  {\n    throw new IllegalArgumentException(\"Invalid directory: \" + root.getName());\n  }\n\n  int level = 0;\n  System.out.println(renderFolder(root, level, new StringBuilder(), false));\n}\n\nprivate static StringBuilder renderFolder(File folder, int level, StringBuilder sb, boolean isLast)\n{\n  indent(sb, level, isLast).append(folder.getName()).append(\"\\n\");\n\n  File[] objects = folder.listFiles();\n\n  for (int i = 0; i &lt; objects.length; i++)\n  {\n    boolean last = ((i + 1) == objects.length);\n\n    if (objects[i].isDirectory())\n    {\n      renderFolder(objects[i], level + 1, sb, last);\n    }\n  }\n  return sb;\n}\n\n\nprivate static StringBuilder indent(StringBuilder sb, int level, boolean isLast)\n{\n\n  for (int i = 1; i &lt; level; i++)\n  {\n     sb.append(\"\\u2502   \");\n  }\n\n  if (level &gt; 0)\n  {\n    sb.append(isLast\n      ? \"\\u2514\\u2500\\u2500\"\n      : \"\\u251c\\u2500\\u2500\");\n  }\n\n  return sb;\n}\n</code></pre>\n\n<p>with this output:</p>\n\n<pre><code>example\n├──a\n└──b\n│   └──b1\n│   │   ├──b11\n│   │   │   └──b111\n│   │   └──b12\n│   │   │   ├──b121\n│   │   │   └──b122\n│   │   │   │   └──b1221\n</code></pre>\n\n<p>I didn't manage to remove the useless deep lines. How to do this?<br>\nAlso my answer is: \"How can I keep lines connected(as much as the cmd's tree command)?\"</p>\n"},{"tags":["java","ant","mysql"],"answers":[{"tags":[],"owner":{"account_id":54362,"reputation":11938,"user_id":162634,"accept_rate":62,"display_name":"Victor Sorokin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1252675322,"creation_date":1252675322,"answer_id":1410833,"question_id":1410795,"body_markdown":"You can use Exec task, which will start your script which will perform all actions necessary for dumping (or whatever).","title":"How do I dump a MySQL database using ant?","body":"<p>You can use Exec task, which will start your script which will perform all actions necessary for dumping (or whatever).</p>\n"},{"tags":[],"owner":{"account_id":38278,"reputation":9130,"user_id":109774,"accept_rate":78,"display_name":"Tom van Zummeren"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1252675983,"creation_date":1252675586,"answer_id":1410859,"question_id":1410795,"body_markdown":"Create a target that runs the &quot;mysqldump&quot; command like this:\r\n\r\n    &lt;target name=&quot;dump-database&quot;&gt;  \r\n        &lt;exec executable=&quot;mysqldump&quot; output=&quot;database-dump.sql&quot;&gt;  \r\n            &lt;arg value=&quot;--user=username&quot; /&gt;  \r\n            &lt;arg value=&quot;--password=password&quot; /&gt;  \r\n            &lt;arg value=&quot;--host=localhost&quot; /&gt;  \r\n            &lt;arg value=&quot;--port=3306&quot; /&gt;  \r\n            &lt;arg value=&quot;mydatabase&quot; /&gt;  \r\n        &lt;/exec&gt;  \r\n    &lt;/target&gt;  \r\n\r\nNow you can make the dump by executing **ant dump-database**","title":"How do I dump a MySQL database using ant?","body":"<p>Create a target that runs the \"mysqldump\" command like this:</p>\n\n<pre><code>&lt;target name=\"dump-database\"&gt;  \n    &lt;exec executable=\"mysqldump\" output=\"database-dump.sql\"&gt;  \n        &lt;arg value=\"--user=username\" /&gt;  \n        &lt;arg value=\"--password=password\" /&gt;  \n        &lt;arg value=\"--host=localhost\" /&gt;  \n        &lt;arg value=\"--port=3306\" /&gt;  \n        &lt;arg value=\"mydatabase\" /&gt;  \n    &lt;/exec&gt;  \n&lt;/target&gt;  \n</code></pre>\n\n<p>Now you can make the dump by executing <strong>ant dump-database</strong></p>\n"},{"tags":[],"owner":{"account_id":251787,"reputation":5774,"user_id":529403,"accept_rate":76,"display_name":"Ricardo Martins"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1403710051,"creation_date":1343664117,"answer_id":11725166,"question_id":1410795,"body_markdown":"And **to import** some sql file using ant, that is also useful:\r\n\r\n\t\t&lt;exec executable=&quot;mysql&quot; failonerror=&quot;true&quot; input=&quot;file.sql&quot;&gt;\r\n\t\t\t&lt;arg value=&quot;-u ${user}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;-p${pass}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;-h ${host}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;-P 3306&quot; /&gt;  \r\n\t        &lt;arg value=&quot;-D ${database}&quot; /&gt;  \r\n\t\t&lt;/exec&gt;\r\n\r\n*note that the correct is **-ppassword**  and not **-p password**\r\n\r\nor:\r\n\r\n\t\t&lt;exec executable=&quot;mysql&quot; failonerror=&quot;true&quot; input=&quot;file.sql&quot;&gt;\r\n\t\t\t&lt;arg value=&quot;--user=${user}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;--password=${pass}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;--host=${host}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;--port=3306&quot; /&gt;  \r\n\t        &lt;arg value=&quot;--database=${database}&quot; /&gt;  \r\n\t\t&lt;/exec&gt;\r\n\r\nIt&#39;s also nice because it doesn&#39;t use external libs/sql drivers like org.gjt.mm.mysql.Driver.","title":"How do I dump a MySQL database using ant?","body":"<p>And <strong>to import</strong> some sql file using ant, that is also useful:</p>\n\n<pre><code>    &lt;exec executable=\"mysql\" failonerror=\"true\" input=\"file.sql\"&gt;\n        &lt;arg value=\"-u ${user}\" /&gt;  \n        &lt;arg value=\"-p${pass}\" /&gt;  \n        &lt;arg value=\"-h ${host}\" /&gt;  \n        &lt;arg value=\"-P 3306\" /&gt;  \n        &lt;arg value=\"-D ${database}\" /&gt;  \n    &lt;/exec&gt;\n</code></pre>\n\n<p>*note that the correct is <strong>-ppassword</strong>  and not <strong>-p password</strong></p>\n\n<p>or:</p>\n\n<pre><code>    &lt;exec executable=\"mysql\" failonerror=\"true\" input=\"file.sql\"&gt;\n        &lt;arg value=\"--user=${user}\" /&gt;  \n        &lt;arg value=\"--password=${pass}\" /&gt;  \n        &lt;arg value=\"--host=${host}\" /&gt;  \n        &lt;arg value=\"--port=3306\" /&gt;  \n        &lt;arg value=\"--database=${database}\" /&gt;  \n    &lt;/exec&gt;\n</code></pre>\n\n<p>It's also nice because it doesn't use external libs/sql drivers like org.gjt.mm.mysql.Driver.</p>\n"},{"tags":[],"owner":{"account_id":2929630,"reputation":445,"user_id":2510229,"accept_rate":33,"display_name":"Adam Morgan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448503057,"creation_date":1448503057,"answer_id":33929434,"question_id":1410795,"body_markdown":"If you wanna make it data driven, try this guy out using the ant sql task:\r\n\r\n    &lt;macrodef name=&quot;sql-retrieve-table-schema&quot;&gt;\r\n\t\t&lt;attribute name=&quot;schema-name&quot;/&gt;\r\n\t\t&lt;attribute name=&quot;table-name&quot;/&gt;\r\n\t\t&lt;attribute name=&quot;connection-url&quot;/&gt;\r\n\t\t&lt;attribute name=&quot;output-file&quot;/&gt;\r\n\t\t&lt;sequential&gt;\r\n\t\t\t&lt;sql userid=&quot;username&quot; url=&quot;@{connection-url}&quot;  classpathref=&quot;compile.classpath&quot;\r\n\t\t\t\tpassword=&quot;apassword&quot; driver=&quot;com.mysql.jdbc.Driver&quot; print=&quot;true&quot; output=&quot;@{output-file}&quot;\r\n\t\t\t\tshowheaders=&quot;false&quot; showtrailers=&quot;false&quot;&gt;\r\n\t\t\t\tSHOW CREATE TABLE @{table-name};\r\n\t\t\t&lt;/sql&gt;\r\n\t\t&lt;/sequential&gt;\r\n\t&lt;/macrodef&gt;","title":"How do I dump a MySQL database using ant?","body":"<p>If you wanna make it data driven, try this guy out using the ant sql task:</p>\n\n<pre><code>&lt;macrodef name=\"sql-retrieve-table-schema\"&gt;\n    &lt;attribute name=\"schema-name\"/&gt;\n    &lt;attribute name=\"table-name\"/&gt;\n    &lt;attribute name=\"connection-url\"/&gt;\n    &lt;attribute name=\"output-file\"/&gt;\n    &lt;sequential&gt;\n        &lt;sql userid=\"username\" url=\"@{connection-url}\"  classpathref=\"compile.classpath\"\n            password=\"apassword\" driver=\"com.mysql.jdbc.Driver\" print=\"true\" output=\"@{output-file}\"\n            showheaders=\"false\" showtrailers=\"false\"&gt;\n            SHOW CREATE TABLE @{table-name};\n        &lt;/sql&gt;\n    &lt;/sequential&gt;\n&lt;/macrodef&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26029501,"reputation":1,"user_id":19735954,"display_name":"antenia_jlucas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660140762,"creation_date":1660140762,"answer_id":73307828,"question_id":1410795,"body_markdown":"When I use this solution https://stackoverflow.com/a/1410859/19735954, my dump takes 3 hours to complete while it only takes 20 minutes using the mysqldump command directly (backup weighs 20Go).\r\n\r\nDirect command : \r\n\r\n    mysqldump --login-path=mysql_serv --skip-comments --max-allowed-packet=128M --extended-insert mysql_database &gt; /road/to/output/file.sql\r\n\r\nAnt task : \r\n\r\n    &lt;target name=&quot;backupBDD&quot;&gt;\r\n\t\t&lt;exec executable=&quot;mysqldump&quot; output=&quot;/road/to/output/file.sql&quot;&gt;\r\n\t\t\t&lt;arg value=&quot;--login-path=mysql_serv&quot;/&gt;\r\n\t\t\t&lt;arg value=&quot;--skip-comments&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;--max-allowed-packet=128M&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;--extended-insert&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;mysql_database&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;\r\n\r\n\r\nHow to explain this difference ?","title":"How do I dump a MySQL database using ant?","body":"<p>When I use this solution <a href=\"https://stackoverflow.com/a/1410859/19735954\">https://stackoverflow.com/a/1410859/19735954</a>, my dump takes 3 hours to complete while it only takes 20 minutes using the mysqldump command directly (backup weighs 20Go).</p>\n<p>Direct command :</p>\n<pre><code>mysqldump --login-path=mysql_serv --skip-comments --max-allowed-packet=128M --extended-insert mysql_database &gt; /road/to/output/file.sql\n</code></pre>\n<p>Ant task :</p>\n<pre><code>&lt;target name=&quot;backupBDD&quot;&gt;\n    &lt;exec executable=&quot;mysqldump&quot; output=&quot;/road/to/output/file.sql&quot;&gt;\n        &lt;arg value=&quot;--login-path=mysql_serv&quot;/&gt;\n        &lt;arg value=&quot;--skip-comments&quot; /&gt;\n        &lt;arg value=&quot;--max-allowed-packet=128M&quot; /&gt;\n        &lt;arg value=&quot;--extended-insert&quot; /&gt;\n        &lt;arg value=&quot;mysql_database&quot; /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n<p>How to explain this difference ?</p>\n"}],"owner":{"account_id":41087,"reputation":3756,"user_id":119333,"accept_rate":86,"display_name":"Martin Magakian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6114,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":1410859,"answer_count":5,"score":10,"last_activity_date":1660140762,"creation_date":1252674918,"question_id":1410795,"body_markdown":"I couldn&#39;t find any information about how to dump a MySQL database with an ant task.\r\n\r\nDo I have to create my own task to do this?\r\n\r\n    ANT script ===generate==&gt; myDataBase.sql","title":"How do I dump a MySQL database using ant?","body":"<p>I couldn't find any information about how to dump a MySQL database with an ant task.</p>\n\n<p>Do I have to create my own task to do this?</p>\n\n<pre><code>ANT script ===generate==&gt; myDataBase.sql\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":7349100,"reputation":10066,"user_id":5595926,"display_name":"ΓDΛ"},"score":0,"creation_date":1660140581,"post_id":73307736,"comment_id":129463032,"body_markdown":"the relevant code will not help. please share logcat.","body":"the relevant code will not help. please share logcat."},{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":1,"creation_date":1660141728,"post_id":73307736,"comment_id":129463491,"body_markdown":"When your app crashes, your activity gets finished, just as if `onBackPressed()` was hit. Look in your logcat for an error message.","body":"When your app crashes, your activity gets finished, just as if <code>onBackPressed()</code> was hit. Look in your logcat for an error message."},{"owner":{"account_id":5396039,"reputation":33,"user_id":4297233,"display_name":"Isaya Exavery"},"score":0,"creation_date":1660143369,"post_id":73307736,"comment_id":129464212,"body_markdown":"App does not crush, I want it to remain in the same activity after sending msg but it moves to previous actually (as if onbackpressed called)","body":"App does not crush, I want it to remain in the same activity after sending msg but it moves to previous actually (as if onbackpressed called)"}],"owner":{"account_id":5396039,"reputation":33,"user_id":4297233,"display_name":"Isaya Exavery"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660140362,"creation_date":1660140362,"question_id":73307736,"body_markdown":"I am trying to add feature, a very simple chat in my project android app using real time firebase database. The chat is working but if someone clicks send button after message is received in firebase the activity is automatically going to the previous activity.\r\n\r\n```\r\n  DatabaseReference ref = FirebaseDatabase.getInstance().getReference(&quot;MyGroups&quot;).child(&quot;1234&quot;).child(&quot;chats&quot;);\r\n\r\n        String message = messageTxt.getText().toString();\r\n        String messageKey = ref.push().getKey();\r\n\r\n        final String timeStamp = String.valueOf(System.currentTimeMillis());\r\n\r\n            HashMap&lt;String,Object&gt; messageInfoMap =new HashMap&lt;&gt;();\r\n            messageInfoMap.put(&quot;senderName&quot;,username);\r\n            messageInfoMap.put(&quot;senderId&quot;, mAuth.getUid());\r\n            messageInfoMap.put(&quot;message&quot;,message);\r\n            messageInfoMap.put(&quot;timeStamp&quot;, timeStamp);\r\n            messageInfoMap.put(&quot;messageId&quot;, messageKey);\r\n            ref.child(messageKey).updateChildren(messageInfoMap).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                @Override\r\n                public void onSuccess(Void unused) {\r\n                    //Toast.makeText(GroupChat.this, &quot;Sent&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n```\r\nActivity is like auto onbackpressed after the message &#39;sent&#39;","title":"Why there is auto onBackPressed?","body":"<p>I am trying to add feature, a very simple chat in my project android app using real time firebase database. The chat is working but if someone clicks send button after message is received in firebase the activity is automatically going to the previous activity.</p>\n<pre><code>  DatabaseReference ref = FirebaseDatabase.getInstance().getReference(&quot;MyGroups&quot;).child(&quot;1234&quot;).child(&quot;chats&quot;);\n\n        String message = messageTxt.getText().toString();\n        String messageKey = ref.push().getKey();\n\n        final String timeStamp = String.valueOf(System.currentTimeMillis());\n\n            HashMap&lt;String,Object&gt; messageInfoMap =new HashMap&lt;&gt;();\n            messageInfoMap.put(&quot;senderName&quot;,username);\n            messageInfoMap.put(&quot;senderId&quot;, mAuth.getUid());\n            messageInfoMap.put(&quot;message&quot;,message);\n            messageInfoMap.put(&quot;timeStamp&quot;, timeStamp);\n            messageInfoMap.put(&quot;messageId&quot;, messageKey);\n            ref.child(messageKey).updateChildren(messageInfoMap).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                @Override\n                public void onSuccess(Void unused) {\n                    //Toast.makeText(GroupChat.this, &quot;Sent&quot;, Toast.LENGTH_SHORT).show();\n                }\n            });\n</code></pre>\n<p>Activity is like auto onbackpressed after the message 'sent'</p>\n"},{"tags":["java","ssl","pem","feign"],"answers":[{"tags":[],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660140332,"creation_date":1660139221,"answer_id":73307476,"question_id":73291331,"body_markdown":"I am the library maintainer of the `SSLFactory` which you posted in your question. It is pretty easy to use pem files without converting them to keystore files. You need an extion library to enable that feature. Can you add the following library:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sslcontext-kickstart-for-pem&lt;/artifactId&gt;\r\n    &lt;version&gt;7.4.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAfter importing the library you can use the following snippet\r\n```java\r\npublic class App {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/certificate-chain.pem&quot;), Paths.get(&quot;/path/to/your/private-key.pem&quot;));\r\n        X509ExtendedTrustManager trustManager = PemUtils.loadTrustMaterial(Paths.get(&quot;/path/to/your/some-trusted-certificate.pem&quot;));\r\n\r\n        SSLFactory sslFactory = SSLFactory.builder()\r\n                  .withIdentityMaterial(keyManager)\r\n                  .withTrustMaterial(trustManager)\r\n                  .build();\r\n\r\n        Feign.Builder client = Feign.builder()\r\n                .client(new Client.Default(sslFactory.getSslSocketFactory(), sslFactory.getHostnameVerifier()));\r\n    }\r\n\r\n}\r\n```\r\n\r\n### Update\r\nIt seems like the OP wants to supply a pem file as identity which contains the certificate chain and private key as a single file. On my initial answer I posted an example where two separate files need to be provided, but a single file is also possible, see here for the example:\r\n\r\n```java\r\nX509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/identity.pem&quot;));\r\n```\r\n\r\nIf your private key is encrypted you can provide the password as second parameter as shown below:\r\n```java\r\nX509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/identity.pem&quot;), &quot;password&quot;.toCharArray());\r\n```\r\n\r\nAll possible usages can be found in the unit test of the PemUtils here: \r\nhttps://github.com/Hakky54/sslcontext-kickstart/blob/5bcc06a862d654e5e59daa4175c39abe230b8fb6/sslcontext-kickstart-for-pem/src/test/java/nl/altindag/ssl/util/PemUtilsShould.java#L65","title":"How to import a pem file directly to use with a FeignClient?","body":"<p>I am the library maintainer of the <code>SSLFactory</code> which you posted in your question. It is pretty easy to use pem files without converting them to keystore files. You need an extion library to enable that feature. Can you add the following library:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;sslcontext-kickstart-for-pem&lt;/artifactId&gt;\n    &lt;version&gt;7.4.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>After importing the library you can use the following snippet</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App {\n\n    public static void main(String[] args) throws Exception {\n        X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/certificate-chain.pem&quot;), Paths.get(&quot;/path/to/your/private-key.pem&quot;));\n        X509ExtendedTrustManager trustManager = PemUtils.loadTrustMaterial(Paths.get(&quot;/path/to/your/some-trusted-certificate.pem&quot;));\n\n        SSLFactory sslFactory = SSLFactory.builder()\n                  .withIdentityMaterial(keyManager)\n                  .withTrustMaterial(trustManager)\n                  .build();\n\n        Feign.Builder client = Feign.builder()\n                .client(new Client.Default(sslFactory.getSslSocketFactory(), sslFactory.getHostnameVerifier()));\n    }\n\n}\n</code></pre>\n<h3>Update</h3>\n<p>It seems like the OP wants to supply a pem file as identity which contains the certificate chain and private key as a single file. On my initial answer I posted an example where two separate files need to be provided, but a single file is also possible, see here for the example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/identity.pem&quot;));\n</code></pre>\n<p>If your private key is encrypted you can provide the password as second parameter as shown below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/identity.pem&quot;), &quot;password&quot;.toCharArray());\n</code></pre>\n<p>All possible usages can be found in the unit test of the PemUtils here:\n<a href=\"https://github.com/Hakky54/sslcontext-kickstart/blob/5bcc06a862d654e5e59daa4175c39abe230b8fb6/sslcontext-kickstart-for-pem/src/test/java/nl/altindag/ssl/util/PemUtilsShould.java#L65\" rel=\"nofollow noreferrer\">https://github.com/Hakky54/sslcontext-kickstart/blob/5bcc06a862d654e5e59daa4175c39abe230b8fb6/sslcontext-kickstart-for-pem/src/test/java/nl/altindag/ssl/util/PemUtilsShould.java#L65</a></p>\n"}],"owner":{"account_id":9893206,"reputation":791,"user_id":7325581,"accept_rate":20,"display_name":"Michael Tsai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":572,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73307476,"answer_count":1,"score":1,"last_activity_date":1660140332,"creation_date":1660045905,"question_id":73291331,"body_markdown":"I have a client certificate .pem file including private key and certificate. I want to use Feign to call the restful api which requires client certificate. \r\n\r\nI googled a lot of examples but those examples teach that import keys from jks like below:\r\n\r\n    public class App {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            SSLFactory sslFactory = SSLFactory.builder()\r\n                    .withIdentityMaterial(&quot;identity.jks&quot;, &quot;password&quot;.toCharArray())\r\n                    .withTrustMaterial(&quot;truststore.jks&quot;, &quot;password&quot;.toCharArray())\r\n                    .build();\r\n    \r\n            Feign.Builder client = Feign.builder()\r\n                    .client(new Client.Default(sslFactory.getSslSocketFactory(), sslFactory.getHostnameVerifier()));\r\n        }\r\n    \r\n    }\r\n\r\nHowever, I want to import the cert from .pem file directly because I don&#39;t have .jks file and don&#39;t want convert it by manual because the .pem file is fetched programmatically periodically from other servers. How can I do that?","title":"How to import a pem file directly to use with a FeignClient?","body":"<p>I have a client certificate .pem file including private key and certificate. I want to use Feign to call the restful api which requires client certificate.</p>\n<p>I googled a lot of examples but those examples teach that import keys from jks like below:</p>\n<pre><code>public class App {\n\n    public static void main(String[] args) throws Exception {\n        SSLFactory sslFactory = SSLFactory.builder()\n                .withIdentityMaterial(&quot;identity.jks&quot;, &quot;password&quot;.toCharArray())\n                .withTrustMaterial(&quot;truststore.jks&quot;, &quot;password&quot;.toCharArray())\n                .build();\n\n        Feign.Builder client = Feign.builder()\n                .client(new Client.Default(sslFactory.getSslSocketFactory(), sslFactory.getHostnameVerifier()));\n    }\n\n}\n</code></pre>\n<p>However, I want to import the cert from .pem file directly because I don't have .jks file and don't want convert it by manual because the .pem file is fetched programmatically periodically from other servers. How can I do that?</p>\n"},{"tags":["java","grid","pdfbox"],"comments":[{"owner":{"account_id":25841185,"reputation":23,"user_id":19576687,"display_name":"Vishu Dhanawade"},"score":0,"creation_date":1660135661,"post_id":73306611,"comment_id":129460852,"body_markdown":"new Output(globalParam) it sis my Grid Class","body":"new Output(globalParam) it sis my Grid Class"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1660136264,"post_id":73306611,"comment_id":129461098,"body_markdown":"You can edit your question. It makes no sense, what is a &quot;grid class&quot;? Or are you really asking &quot;how to draw a grid&quot;? And why are you using 2.0.17?","body":"You can edit your question. It makes no sense, what is a &quot;grid class&quot;? Or are you really asking &quot;how to draw a grid&quot;? And why are you using 2.0.17?"},{"owner":{"account_id":25841185,"reputation":23,"user_id":19576687,"display_name":"Vishu Dhanawade"},"score":0,"creation_date":1660136391,"post_id":73306611,"comment_id":129461147,"body_markdown":"i am asking is i already have class. in that class i have a 3 grid now i want to sent that grids as a pdf","body":"i am asking is i already have class. in that class i have a 3 grid now i want to sent that grids as a pdf"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1660136723,"post_id":73306611,"comment_id":129461290,"body_markdown":"`i am asking is i already have class` - I have no idea what you mean. The second sentence seems to indicate you have an own class with a &quot;3 grid&quot;. PDFBox doesn&#39;t know your code so you can&#39;t send your class. PDFBox doesn&#39;t support grid drawing anyway but there are libraries on top of PDFBox, e.g. EasyTable or Boxable.","body":"<code>i am asking is i already have class</code> - I have no idea what you mean. The second sentence seems to indicate you have an own class with a &quot;3 grid&quot;. PDFBox doesn&#39;t know your code so you can&#39;t send your class. PDFBox doesn&#39;t support grid drawing anyway but there are libraries on top of PDFBox, e.g. EasyTable or Boxable."},{"owner":{"account_id":4726205,"reputation":12248,"user_id":4420967,"display_name":"James Z"},"score":0,"creation_date":1660140312,"post_id":73306611,"comment_id":129462910,"body_markdown":"Please don&#39;t Write with Random upper case Letters like This. It&#39;s very Annoying to read text Like that.","body":"Please don&#39;t Write with Random upper case Letters like This. It&#39;s very Annoying to read text Like that."}],"owner":{"account_id":25841185,"reputation":23,"user_id":19576687,"display_name":"Vishu Dhanawade"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660140262,"creation_date":1660135577,"question_id":73306611,"body_markdown":"I want to send my grid class as a PDF through mail but I guess I am missing something. Please provide me appropriate answer for that.\r\n\r\nin my grid class i have 3 grids and i want to sent that grids as a PDF. How can I use pdfbox for that? Kindly suggest me examples.\r\n\r\njava code \r\n\r\n    PDDocument doc = new PDDocument();     \r\n\t\tdoc.(new Output(globalParam);\r\n\r\n\r\npom xml\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.17&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n","title":"Convert and sent Grid to PDF","body":"<p>I want to send my grid class as a PDF through mail but I guess I am missing something. Please provide me appropriate answer for that.</p>\n<p>in my grid class i have 3 grids and i want to sent that grids as a PDF. How can I use pdfbox for that? Kindly suggest me examples.</p>\n<p>java code</p>\n<pre><code>PDDocument doc = new PDDocument();     \n    doc.(new Output(globalParam);\n</code></pre>\n<p>pom xml</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n        &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n        &lt;version&gt;2.0.17&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","tizen","samsung-smart-tv","tizen-studio"],"comments":[{"owner":{"account_id":5467620,"reputation":2033,"user_id":4347950,"accept_rate":100,"display_name":"Joshua Dannemann"},"score":0,"creation_date":1642533759,"post_id":67401253,"comment_id":125094849,"body_markdown":"I am having the same issue with Windows 11 and have followed all of the troubleshooting advice and still no success.","body":"I am having the same issue with Windows 11 and have followed all of the troubleshooting advice and still no success."}],"answers":[{"tags":[],"owner":{"account_id":6786304,"reputation":218,"user_id":5224957,"display_name":"imdungnguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620281532,"creation_date":1620281532,"answer_id":67412747,"question_id":67401253,"body_markdown":"Your PC name contains space character (Maxime Guenneteau).\r\nIt will cause many issue. You can change it (remove space) and retry.","title":"Device Manager for Tizen won&#39;t open (0xc000007b)","body":"<p>Your PC name contains space character (Maxime Guenneteau).\nIt will cause many issue. You can change it (remove space) and retry.</p>\n"},{"tags":[],"owner":{"account_id":112817,"reputation":827,"user_id":297440,"accept_rate":81,"display_name":"Xoundboy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622547102,"creation_date":1622547102,"answer_id":67788044,"question_id":67401253,"body_markdown":"Device Manager in Tizen Studio isn&#39;t really necessary. You can just use the device select field instead... \r\n\r\n[![enter image description here][2]][2]\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1vj8r.jpg\r\n  [2]: https://i.stack.imgur.com/6byxZ.jpg","title":"Device Manager for Tizen won&#39;t open (0xc000007b)","body":"<p>Device Manager in Tizen Studio isn't really necessary. You can just use the device select field instead...</p>\n<p><a href=\"https://i.stack.imgur.com/6byxZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6byxZ.jpg\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/1vj8r.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1vj8r.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":18194217,"reputation":1,"user_id":13239584,"display_name":"Theo Psallidas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660140147,"creation_date":1660140147,"answer_id":73307684,"question_id":67401253,"body_markdown":"You can access the device manager by running the device-ui-3.0.jar located in the C:\\tizen-studio\\tools\\device-manager\\bin directory. \r\n","title":"Device Manager for Tizen won&#39;t open (0xc000007b)","body":"<p>You can access the device manager by running the device-ui-3.0.jar located in the C:\\tizen-studio\\tools\\device-manager\\bin directory.</p>\n"}],"owner":{"account_id":21497809,"reputation":11,"user_id":15842550,"display_name":"Mad Max Baxx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2243,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1660140147,"creation_date":1620217533,"question_id":67401253,"body_markdown":"I&#39;m facing a problem with Tizen Studio, my device-manager does not work. At first I had a DLL problem (mscvp120.dll) that I managed to correct. I am now facing a second problem when I launch Device-manager I get this error (0xc000007b). I&#39;ve already found some topics that talk about it and propose solutions, but I&#39;ve tried everything nothing works: \r\n- I have installed jdk8 as recommended by the samsung developers. \r\n- I have correctly configured the environment variables for java\r\n- Re-install Tizen Studio \r\n- Re-install Java 8 and JDK 8 \r\n- The Device Manager package is correctly installed \r\n- shutdown/start up my computer\r\n\r\nNothing worked. If you have any clues I would be delighted.\r\n\r\n\r\nError Message\r\n\r\n[![][1]][1]\r\n\r\nCorrect installation of java and jdk\r\n\r\n[![][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/P383Y.png\r\n  [2]: https://i.stack.imgur.com/NVyEa.png","title":"Device Manager for Tizen won&#39;t open (0xc000007b)","body":"<p>I'm facing a problem with Tizen Studio, my device-manager does not work. At first I had a DLL problem (mscvp120.dll) that I managed to correct. I am now facing a second problem when I launch Device-manager I get this error (0xc000007b). I've already found some topics that talk about it and propose solutions, but I've tried everything nothing works:</p>\n<ul>\n<li>I have installed jdk8 as recommended by the samsung developers.</li>\n<li>I have correctly configured the environment variables for java</li>\n<li>Re-install Tizen Studio</li>\n<li>Re-install Java 8 and JDK 8</li>\n<li>The Device Manager package is correctly installed</li>\n<li>shutdown/start up my computer</li>\n</ul>\n<p>Nothing worked. If you have any clues I would be delighted.</p>\n<p>Error Message</p>\n<p><a href=\"https://i.stack.imgur.com/P383Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P383Y.png\" alt=\"\" /></a></p>\n<p>Correct installation of java and jdk</p>\n<p><a href=\"https://i.stack.imgur.com/NVyEa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NVyEa.png\" alt=\"\" /></a></p>\n"},{"tags":["java","stream","zip","filenames"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1585118531,"post_id":60843868,"comment_id":107648489,"body_markdown":"Since you&#39;re keeping the ZIP &quot;file&quot; in memory it doesn&#39;t have an inherent name. I&#39;m also not sure what you&#39;re trying to accomplish with the &quot;file.zip&quot; entry. What are you doing with the bytes afterwards? Knowing your intentions may help with providing a solution.","body":"Since you&#39;re keeping the ZIP &quot;file&quot; in memory it doesn&#39;t have an inherent name. I&#39;m also not sure what you&#39;re trying to accomplish with the &quot;file.zip&quot; entry. What are you doing with the bytes afterwards? Knowing your intentions may help with providing a solution."},{"owner":{"account_id":13846599,"reputation":21,"user_id":10012803,"display_name":"M.Fischer"},"score":0,"creation_date":1585119508,"post_id":60843868,"comment_id":107648741,"body_markdown":"I&#39;m sorry, I guess there was some information missing. The byte[] is used for a new InputStream which in turn is used in a HTTP response to offer the file for download.","body":"I&#39;m sorry, I guess there was some information missing. The byte[] is used for a new InputStream which in turn is used in a HTTP response to offer the file for download."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1585120847,"post_id":60843868,"comment_id":107649189,"body_markdown":"In that case, you can communicate the intended file name via the `Content-Disposition` header.","body":"In that case, you can communicate the intended file name via the <code>Content-Disposition</code> header."}],"answers":[{"tags":[],"owner":{"account_id":21675906,"reputation":11,"user_id":15992879,"display_name":"Felipe Ferreira Campos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660140031,"creation_date":1660140031,"answer_id":73307664,"question_id":60843868,"body_markdown":"    public byte[] zipBytesFile(List&lt;byte[]&gt; files) throws IOException {\r\n\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\tZipOutputStream zos = new ZipOutputStream(baos);\r\n\r\n\t\tint i = 0;\r\n\t\tfor (byte[] file : files) {\r\n\t\t\tZipEntry entry = new ZipEntry(++i + &quot;.pdf&quot;);\r\n\t\t\tentry.setSize(file.length);\r\n\t\t\tzos.putNextEntry(entry);\r\n\t\t\tzos.write(file);\r\n\t\t}\r\n\r\n\t\tzos.closeEntry();\r\n\t\tzos.close();\r\n\t\treturn baos.toByteArray();\r\n\t}","title":"Set filename of an only streamed zip file","body":"<pre><code>public byte[] zipBytesFile(List&lt;byte[]&gt; files) throws IOException {\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    ZipOutputStream zos = new ZipOutputStream(baos);\n\n    int i = 0;\n    for (byte[] file : files) {\n        ZipEntry entry = new ZipEntry(++i + &quot;.pdf&quot;);\n        entry.setSize(file.length);\n        zos.putNextEntry(entry);\n        zos.write(file);\n    }\n\n    zos.closeEntry();\n    zos.close();\n    return baos.toByteArray();\n}\n</code></pre>\n"}],"owner":{"account_id":13846599,"reputation":21,"user_id":10012803,"display_name":"M.Fischer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":706,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660140031,"creation_date":1585117710,"question_id":60843868,"body_markdown":"i am currently creating a zip file and filling it with various json files and images. All this should only run in memory and not on the hard disk. Therefore I have the following construct so far: \r\n\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    ZipOutputStream zip = null;\r\n    String FILE_NAME = &quot;file.zip&quot;;\r\n    \r\n    try {\r\n       zip = new ZipOutputStream(baos);\r\n       //now the critical part where the name of the file should be set\r\n       ZipEntry entry = new ZipEntry(FILE_NAME);\r\n       zip.putNextEntry(entry);\r\n       byte[] data = FILE_NAME.getBytes();\r\n       zip.write(data, 0, data.length);\r\n       zip.closeEntry();\r\n       //end of critical part and filling the rest of the zip\r\n       //...\r\n       //\r\n    }finally{\r\n       IOUtils.closeQuietly(zip);\r\n       byte[] byteFile = baos.toByteArray();\r\n       IOUtils.closeQuietly(baos);}\r\n\r\nThe problem is that the zip-file is called file.zip, but also contains a file.zip itself.\r\nHow can I name my Zip file from the ZipOutputStream without packing into this one file with the same name? Unfortunately I only found this solution here. \r\n","title":"Set filename of an only streamed zip file","body":"<p>i am currently creating a zip file and filling it with various json files and images. All this should only run in memory and not on the hard disk. Therefore I have the following construct so far: </p>\n\n<pre><code>ByteArrayOutputStream baos = new ByteArrayOutputStream();\nZipOutputStream zip = null;\nString FILE_NAME = \"file.zip\";\n\ntry {\n   zip = new ZipOutputStream(baos);\n   //now the critical part where the name of the file should be set\n   ZipEntry entry = new ZipEntry(FILE_NAME);\n   zip.putNextEntry(entry);\n   byte[] data = FILE_NAME.getBytes();\n   zip.write(data, 0, data.length);\n   zip.closeEntry();\n   //end of critical part and filling the rest of the zip\n   //...\n   //\n}finally{\n   IOUtils.closeQuietly(zip);\n   byte[] byteFile = baos.toByteArray();\n   IOUtils.closeQuietly(baos);}\n</code></pre>\n\n<p>The problem is that the zip-file is called file.zip, but also contains a file.zip itself.\nHow can I name my Zip file from the ZipOutputStream without packing into this one file with the same name? Unfortunately I only found this solution here. </p>\n"},{"tags":["java","soapui","ws-security"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1660163476,"post_id":73307624,"comment_id":129471008,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":26028868,"reputation":1,"user_id":19735418,"display_name":"Pradeep"},"score":0,"creation_date":1660197666,"post_id":73307624,"comment_id":129476959,"body_markdown":"I don&#39;t have any code.  I&#39;m new to Soap Request WS configurations.  Few reference code I collected from different websites are working.  Basically, I need a Java Code to post a soap request from existing XML file with above WS security configurations.","body":"I don&#39;t have any code.  I&#39;m new to Soap Request WS configurations.  Few reference code I collected from different websites are working.  Basically, I need a Java Code to post a soap request from existing XML file with above WS security configurations."}],"owner":{"account_id":26028868,"reputation":1,"user_id":19735418,"display_name":"Pradeep"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660139853,"creation_date":1660139853,"question_id":73307624,"body_markdown":"I&#39;m looking for a complete Java code (along with imports and maven dependencies) to post a soap request with signature.  I&#39;ve a XML file, the Java code should read this XML and post it with Outgoing and Incoming Web Security configurations.  I&#39;m able to post this request with signature in Soap UI tool.\r\n\r\n**Outgoing WS Config**:\r\n\r\nKeystore: Cert.jks file from C:\\Certificates\r\n\r\nAlias: TestCert\r\n\r\nKey Identifier Type: Binary Security Token\r\n\r\nSignature Algorithm: rs-sha512\r\n\r\nSignature Canonicalization: xml-exc-c14n#\r\n\r\nDigest Algorithm: xmlenc#sha512\r\n\r\nUse Single Certificate: Checked\r\n\r\nParts:\r\n\r\nTimeStamp:  URL as Element\r\n\r\n**Incoming WS Config**:\r\n\r\nDecrypt Keystore: Cert.jks file from C:\\Certificates\r\n\r\nI&#39;ve tried with DocumentBuilder but when I parse the XML file I&#39;m getting [#document:null].\r\n\r\nAny support will be highly helpful.\r\n","title":"Java Code to Post Soap Request (from existing xml) with Signature","body":"<p>I'm looking for a complete Java code (along with imports and maven dependencies) to post a soap request with signature.  I've a XML file, the Java code should read this XML and post it with Outgoing and Incoming Web Security configurations.  I'm able to post this request with signature in Soap UI tool.</p>\n<p><strong>Outgoing WS Config</strong>:</p>\n<p>Keystore: Cert.jks file from C:\\Certificates</p>\n<p>Alias: TestCert</p>\n<p>Key Identifier Type: Binary Security Token</p>\n<p>Signature Algorithm: rs-sha512</p>\n<p>Signature Canonicalization: xml-exc-c14n#</p>\n<p>Digest Algorithm: xmlenc#sha512</p>\n<p>Use Single Certificate: Checked</p>\n<p>Parts:</p>\n<p>TimeStamp:  URL as Element</p>\n<p><strong>Incoming WS Config</strong>:</p>\n<p>Decrypt Keystore: Cert.jks file from C:\\Certificates</p>\n<p>I've tried with DocumentBuilder but when I parse the XML file I'm getting [#document:null].</p>\n<p>Any support will be highly helpful.</p>\n"},{"tags":["java","serviceloader"],"answers":[{"tags":[],"owner":{"account_id":2527429,"reputation":143,"user_id":2196511,"display_name":"Artem"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1552992107,"creation_date":1536239182,"answer_id":52204855,"question_id":52204709,"body_markdown":"When I hear something about `ServiceLoader`, the first thing, which comes to my mind, is `JDBC`. This technology provides loading JDBC driver classes from a classpath without using `Class.forName(Class&lt;?&gt;clazz)`. \r\n\r\nAlso, I am sure there are many examples of using `ServiceLoader`, beside **JDBC**","title":"What is ServiceLoader and how is it used?","body":"<p>When I hear something about <code>ServiceLoader</code>, the first thing, which comes to my mind, is <code>JDBC</code>. This technology provides loading JDBC driver classes from a classpath without using <code>Class.forName(Class&lt;?&gt;clazz)</code>. </p>\n\n<p>Also, I am sure there are many examples of using <code>ServiceLoader</code>, beside <strong>JDBC</strong></p>\n"},{"tags":[],"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"down_vote_count":4,"up_vote_count":6,"is_accepted":false,"score":2,"last_activity_date":1536241240,"creation_date":1536239688,"answer_id":52204994,"question_id":52204709,"body_markdown":"Are you familiar with the principle [&quot;Inversion of Control&quot;][1]?\r\n\r\nJava implemented it by `ServiceLoader`. The class is designed to locate implementation classes of an interface on the classpath. You pass in a service interface, you get an implementation(s) of that service.\r\n\r\nYou might find a good practical example [here][2].\r\n\r\n---\r\n\r\n*P.S: Even though it&#39;s an out-of-the-box solution and a quite simple tool, I think it&#39;s outdated and not flexible enough compared to the Spring IoC Container and Google Guice.*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Inversion_of_control\r\n  [2]: https://dzone.com/articles/play-with-java-serviceloader-forget-about-dependen","title":"What is ServiceLoader and how is it used?","body":"<p>Are you familiar with the principle <a href=\"https://en.wikipedia.org/wiki/Inversion_of_control\" rel=\"nofollow noreferrer\">\"Inversion of Control\"</a>?</p>\n\n<p>Java implemented it by <code>ServiceLoader</code>. The class is designed to locate implementation classes of an interface on the classpath. You pass in a service interface, you get an implementation(s) of that service.</p>\n\n<p>You might find a good practical example <a href=\"https://dzone.com/articles/play-with-java-serviceloader-forget-about-dependen\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<hr>\n\n<p><em>P.S: Even though it's an out-of-the-box solution and a quite simple tool, I think it's outdated and not flexible enough compared to the Spring IoC Container and Google Guice.</em></p>\n"},{"tags":[],"owner":{"account_id":332120,"reputation":4862,"user_id":657224,"accept_rate":17,"display_name":"Mike"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1536239949,"creation_date":1536239949,"answer_id":52205050,"question_id":52204709,"body_markdown":"`ServiceLoader` is Java&#39;s light weight alternative to a full blown IoC container such as Spring, Guice, etc. It has far less bells and whistles than those frameworks, but works well for basic use cases when you just want to find what classes implement an interface.\r\n\r\nMost application servers will have some usages of ServiceLoader you can see in practice:\r\n\r\nhttps://github.com/apache/tomee/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\r\n\r\nhttps://github.com/apache/tomcat/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\r\n\r\nhttps://github.com/wildfly/wildfly/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader ","title":"What is ServiceLoader and how is it used?","body":"<p><code>ServiceLoader</code> is Java's light weight alternative to a full blown IoC container such as Spring, Guice, etc. It has far less bells and whistles than those frameworks, but works well for basic use cases when you just want to find what classes implement an interface.</p>\n\n<p>Most application servers will have some usages of ServiceLoader you can see in practice:</p>\n\n<p><a href=\"https://github.com/apache/tomee/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\" rel=\"nofollow noreferrer\">https://github.com/apache/tomee/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader</a></p>\n\n<p><a href=\"https://github.com/apache/tomcat/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader</a></p>\n\n<p><a href=\"https://github.com/wildfly/wildfly/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\" rel=\"nofollow noreferrer\">https://github.com/wildfly/wildfly/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader</a> </p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1658926552,"creation_date":1536245726,"answer_id":52206921,"question_id":52204709,"body_markdown":"You use ServiceLoader when you want your program to have a “plugin” functionality.  When you want to allow people to customize your application by adding jar files to the classpath which contain implementations of a specific subset of functionality, you can use a ServiceLoader to look for those implementations in the classpath.\r\n\r\nServiceLoader is itself an implementation of the [jar SPI specification](https://www2.cs.duke.edu/csed/java/jdk1.4.2/docs/guide/jar/jar.html#Service%20Provider), which has been around for a long time.  (I believe it was introduced in Java 1.3.)\r\n\r\nJava SE already uses it for exactly that purpose in a lot of places, including:\r\n\r\n* additional charsets via [CharsetProvider](https://docs.oracle.com/javase/10/docs/api/java/nio/charset/spi/CharsetProvider.html)\r\n* additional filesystems via [FileSystemProvider](https://docs.oracle.com/javase/10/docs/api/java/nio/file/spi/FileSystemProvider.html) (see [FileSystems](https://docs.oracle.com/javase/10/docs/api/java/nio/file/FileSystems.html))\r\n* additional file content type analyzers via [FileTypeDetector](https://docs.oracle.com/javase/10/docs/api/java/nio/file/spi/FileTypeDetector.html) (see [Files.probeContentType](https://docs.oracle.com/javase/10/docs/api/java/nio/file/Files.html#probeContentType(java.nio.file.Path)))\r\n* additional preferences implementations via [PreferencesFactory](https://docs.oracle.com/javase/10/docs/api/java/util/prefs/PreferencesFactory.html) (see [Preferences](https://docs.oracle.com/javase/10/docs/api/java/util/prefs/Preferences.html))\r\n* custom ResourceBundle.Control via [ResourceBundleControlProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/ResourceBundleControlProvider.html)\r\n* All subclasses of [LocaleServiceProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/LocaleServiceProvider.html):\r\n    * additional calendars via [CalendarDataProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/CalendarDataProvider.html) and [CalendarNameProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/CalendarNameProvider.html)\r\n    * additional currency via [CurrencyNameProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/CurrencyNameProvider.html)\r\n    * additional locales via [LocaleNameProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/LocaleNameProvider.html)\r\n    * additional timezones via [TimeZoneNameProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/TimeZoneNameProvider.html)\r\n* additional image formats via [IIORegistry](https://docs.oracle.com/javase/10/docs/api/javax/imageio/spi/IIORegistry.html)\r\n* additional printers via [PrintServiceLookup](https://docs.oracle.com/javase/10/docs/api/javax/print/PrintServiceLookup.html)\r\n* custom scripting engines via [ScriptEngineFactory](https://docs.oracle.com/javase/10/docs/api/javax/script/ScriptEngineFactory.html)\r\n","title":"What is ServiceLoader and how is it used?","body":"<p>You use ServiceLoader when you want your program to have a “plugin” functionality.  When you want to allow people to customize your application by adding jar files to the classpath which contain implementations of a specific subset of functionality, you can use a ServiceLoader to look for those implementations in the classpath.</p>\n<p>ServiceLoader is itself an implementation of the <a href=\"https://www2.cs.duke.edu/csed/java/jdk1.4.2/docs/guide/jar/jar.html#Service%20Provider\" rel=\"nofollow noreferrer\">jar SPI specification</a>, which has been around for a long time.  (I believe it was introduced in Java 1.3.)</p>\n<p>Java SE already uses it for exactly that purpose in a lot of places, including:</p>\n<ul>\n<li>additional charsets via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/charset/spi/CharsetProvider.html\" rel=\"nofollow noreferrer\">CharsetProvider</a></li>\n<li>additional filesystems via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/spi/FileSystemProvider.html\" rel=\"nofollow noreferrer\">FileSystemProvider</a> (see <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/FileSystems.html\" rel=\"nofollow noreferrer\">FileSystems</a>)</li>\n<li>additional file content type analyzers via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/spi/FileTypeDetector.html\" rel=\"nofollow noreferrer\">FileTypeDetector</a> (see <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/Files.html#probeContentType(java.nio.file.Path)\" rel=\"nofollow noreferrer\">Files.probeContentType</a>)</li>\n<li>additional preferences implementations via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/prefs/PreferencesFactory.html\" rel=\"nofollow noreferrer\">PreferencesFactory</a> (see <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/prefs/Preferences.html\" rel=\"nofollow noreferrer\">Preferences</a>)</li>\n<li>custom ResourceBundle.Control via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/ResourceBundleControlProvider.html\" rel=\"nofollow noreferrer\">ResourceBundleControlProvider</a></li>\n<li>All subclasses of <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/LocaleServiceProvider.html\" rel=\"nofollow noreferrer\">LocaleServiceProvider</a>:\n<ul>\n<li>additional calendars via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/CalendarDataProvider.html\" rel=\"nofollow noreferrer\">CalendarDataProvider</a> and <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/CalendarNameProvider.html\" rel=\"nofollow noreferrer\">CalendarNameProvider</a></li>\n<li>additional currency via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/CurrencyNameProvider.html\" rel=\"nofollow noreferrer\">CurrencyNameProvider</a></li>\n<li>additional locales via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/LocaleNameProvider.html\" rel=\"nofollow noreferrer\">LocaleNameProvider</a></li>\n<li>additional timezones via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/TimeZoneNameProvider.html\" rel=\"nofollow noreferrer\">TimeZoneNameProvider</a></li>\n</ul>\n</li>\n<li>additional image formats via <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/imageio/spi/IIORegistry.html\" rel=\"nofollow noreferrer\">IIORegistry</a></li>\n<li>additional printers via <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/print/PrintServiceLookup.html\" rel=\"nofollow noreferrer\">PrintServiceLookup</a></li>\n<li>custom scripting engines via <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/script/ScriptEngineFactory.html\" rel=\"nofollow noreferrer\">ScriptEngineFactory</a></li>\n</ul>\n"}],"owner":{"account_id":3351092,"reputation":3461,"user_id":2815144,"accept_rate":34,"display_name":"Patrik Mihalčin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1648,"favorite_count":0,"down_vote_count":3,"up_vote_count":7,"answer_count":4,"score":4,"last_activity_date":1660139769,"creation_date":1536238748,"question_id":52204709,"body_markdown":"I came across [the documentation of `ServiceLoader`][1] and am unclear as to what use cases it suits.\r\n\r\nWhen would one use `ServiceLoader`?\r\n\r\n[1]: https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html ","title":"What is ServiceLoader and how is it used?","body":"<p>I came across <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">the documentation of <code>ServiceLoader</code></a> and am unclear as to what use cases it suits.</p>\n\n<p>When would one use <code>ServiceLoader</code>?</p>\n"},{"tags":["java","spring-boot","jpa","stream","apache-poi"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":3,"creation_date":1660141094,"post_id":73307529,"comment_id":129463257,"body_markdown":"The max number of rows in Excel will be 1,048,576, and you will have to load all to create the Workbook. So streaming will not help much","body":"The max number of rows in Excel will be 1,048,576, and you will have to load all to create the Workbook. So streaming will not help much"},{"owner":{"account_id":5469638,"reputation":41,"user_id":4349366,"display_name":"Veerendra"},"score":0,"creation_date":1660143129,"post_id":73307529,"comment_id":129464101,"body_markdown":"max number of rows per sheet will be 1,048,576, we will create multiple sheets","body":"max number of rows per sheet will be 1,048,576, we will create multiple sheets"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":2,"creation_date":1660143223,"post_id":73307529,"comment_id":129464137,"body_markdown":"As you appear to have an [_XY problem_](http://meta.stackoverflow.com/q/66377/163188), please [edit] your question to reframe it; more [here](https://answers.microsoft.com/en-us/msoffice/forum/all/how-to-exceed-excels-limits-number-of-rows/783984c2-5ab4-41c8-8e7e-948d7bf58edc).","body":"As you appear to have an <a href=\"http://meta.stackoverflow.com/q/66377/163188\"><i>XY problem</i></a>, please <a href=\"https://stackoverflow.com/posts/73307529/edit\">edit</a> your question to reframe it; more <a href=\"https://answers.microsoft.com/en-us/msoffice/forum/all/how-to-exceed-excels-limits-number-of-rows/783984c2-5ab4-41c8-8e7e-948d7bf58edc\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1660145786,"post_id":73307529,"comment_id":129465198,"body_markdown":"There is not any well working streaming approach to write Excel files because of the complex internal structure of all kinds of Excel files. There are partially working tries, `SXSSF` for example. But even this is not really a full streaming approach.","body":"There is not any well working streaming approach to write Excel files because of the complex internal structure of all kinds of Excel files. There are partially working tries, <code>SXSSF</code> for example. But even this is not really a full streaming approach."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":1,"creation_date":1660167452,"post_id":73307529,"comment_id":129472135,"body_markdown":"why do you need excel format? Excel is not a good data interchange format - it is a proprietary Microsoft solution and the file format has numerous weaknesses - exchanging large data is better done with formats like CSV, JSON, Parquet, etc.","body":"why do you need excel format? Excel is not a good data interchange format - it is a proprietary Microsoft solution and the file format has numerous weaknesses - exchanging large data is better done with formats like CSV, JSON, Parquet, etc."},{"owner":{"account_id":5469638,"reputation":41,"user_id":4349366,"display_name":"Veerendra"},"score":0,"creation_date":1660222350,"post_id":73307529,"comment_id":129485149,"body_markdown":"we are using csv, want to give option for excel download as well","body":"we are using csv, want to give option for excel download as well"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1660235144,"post_id":73307529,"comment_id":129490445,"body_markdown":"Users likely complained they couldn&#39;t open such enormous `.csv` files. As an alternative, consider offering users an archive of segments that Excel _can_ use.","body":"Users likely complained they couldn&#39;t open such enormous <code>.csv</code> files. As an alternative, consider offering users an archive of segments that Excel <i>can</i> use."}],"owner":{"account_id":5469638,"reputation":41,"user_id":4349366,"display_name":"Veerendra"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1236,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660139406,"creation_date":1660139406,"question_id":73307529,"body_markdown":"\r\nWe are trying to stream million number of DB records from postgraes sql using JPA stream, and download as excel (using Apache poi to create excel, other library also fine). \r\n\r\nsimilar solution like csv: https://www.geekyhacker.com/2019/03/26/high-performance-data-fetching-using-spring-data-jpa-stream/\r\n\r\nExample snippet:\r\n\r\nBookRepository class:\r\n\r\n     @QueryHints(value = {\r\n         @QueryHint(name = HINT_FETCH_SIZE, value = &quot;10000&quot;)\r\n     })\r\n     @Query(&quot;select b from Book&quot;)\r\n     Stream&lt;Book&gt; getAll();\r\n\r\nController:\r\n\r\n     @Transactional(readOnly = true)\r\n     public void processBooks() {\r\n      Stream&lt;Book&gt; bookStream = bookRepository.getAll();\r\n      OutputStream  outputStream  = response.getOutputStream();\r\n      bookStream.forEach(book -&gt; {\r\n      //Excel file rows and workbook creation and streaming here\r\n      workbook.write(outputStream);//getting stream closed error\r\n     });\r\n    }","title":"Streaming data using Spring Data JPA to excel file download as chunks java","body":"<p>We are trying to stream million number of DB records from postgraes sql using JPA stream, and download as excel (using Apache poi to create excel, other library also fine).</p>\n<p>similar solution like csv: <a href=\"https://www.geekyhacker.com/2019/03/26/high-performance-data-fetching-using-spring-data-jpa-stream/\" rel=\"nofollow noreferrer\">https://www.geekyhacker.com/2019/03/26/high-performance-data-fetching-using-spring-data-jpa-stream/</a></p>\n<p>Example snippet:</p>\n<p>BookRepository class:</p>\n<pre><code> @QueryHints(value = {\n     @QueryHint(name = HINT_FETCH_SIZE, value = &quot;10000&quot;)\n })\n @Query(&quot;select b from Book&quot;)\n Stream&lt;Book&gt; getAll();\n</code></pre>\n<p>Controller:</p>\n<pre><code> @Transactional(readOnly = true)\n public void processBooks() {\n  Stream&lt;Book&gt; bookStream = bookRepository.getAll();\n  OutputStream  outputStream  = response.getOutputStream();\n  bookStream.forEach(book -&gt; {\n  //Excel file rows and workbook creation and streaming here\n  workbook.write(outputStream);//getting stream closed error\n });\n}\n</code></pre>\n"},{"tags":["java","android","manifest"],"comments":[{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":0,"creation_date":1660137264,"post_id":73306497,"comment_id":129461537,"body_markdown":"Why do you need two services for this?","body":"Why do you need two services for this?"}],"answers":[{"tags":[],"owner":{"account_id":25792631,"reputation":1,"user_id":19536445,"display_name":"yydinc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660138636,"creation_date":1660138636,"answer_id":73307327,"question_id":73306497,"body_markdown":"mistake in your code is writing class names with comma .&lt;br&gt;\r\n     \r\n    android:name=&quot;.ClassGen1&quot;,&quot;.ClassGen2&quot;\r\n\r\nValue of name attribute cannot be written with comma in android . You should declare them separately in different service tags . Like as below&lt;br&gt;\r\n\r\n    &lt;service \r\n        android:name=&quot;.ClassGen1&quot;\r\n        android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\r\n        android:persistent=&quot;true&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/service&gt;\r\n    &lt;service \r\n        android:name=&quot;.ClassGen2&quot;\r\n        android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\r\n        android:persistent=&quot;true&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/service&gt;","title":"how to seperate classes in manifest?","body":"<p>mistake in your code is writing class names with comma .<br></p>\n<pre><code>android:name=&quot;.ClassGen1&quot;,&quot;.ClassGen2&quot;\n</code></pre>\n<p>Value of name attribute cannot be written with comma in android . You should declare them separately in different service tags . Like as below<br></p>\n<pre><code>&lt;service \n    android:name=&quot;.ClassGen1&quot;\n    android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\n    android:persistent=&quot;true&quot;&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\n    &lt;/intent-filter&gt;\n&lt;/service&gt;\n&lt;service \n    android:name=&quot;.ClassGen2&quot;\n    android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\n    android:persistent=&quot;true&quot;&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\n    &lt;/intent-filter&gt;\n&lt;/service&gt;\n</code></pre>\n"}],"owner":{"account_id":21239565,"reputation":17,"user_id":15623276,"display_name":"shohel hossain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660139184,"creation_date":1660135185,"question_id":73306497,"body_markdown":"I want to add two classes in accessibility service\r\nI have tried this and its showing some errors of tag\r\n\r\n    &lt;service\r\n                android:name=&quot;.ClassGen1&quot;,&quot;.ClassGen2&quot;\r\n                android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\r\n                android:persistent=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n\r\n","title":"how to seperate classes in manifest?","body":"<p>I want to add two classes in accessibility service\nI have tried this and its showing some errors of tag</p>\n<pre><code>&lt;service\n            android:name=&quot;.ClassGen1&quot;,&quot;.ClassGen2&quot;\n            android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\n            android:persistent=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\n            &lt;/intent-filter&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","apache-kafka","kafka-consumer-api","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660139095,"creation_date":1660139095,"answer_id":73307447,"question_id":73306967,"body_markdown":"You can examine the consumer metrics and inspect them, for example:\r\n\r\n    MetricName [name=network-io-total, group=consumer-metrics, description=The total number of network operations (reads or writes) on all connections\r\n    MetricName [name=connection-count, group=consumer-metrics, description=The current number of active connections.\r\n\r\nThere are other metrics that might be useful, e.g `last-poll-seconds-ago`.\r\n\r\n```java\r\n/**\r\n * Return metrics kept by this container&#39;s consumer(s), grouped by {@code client-id}.\r\n * @return the consumer(s) metrics grouped by {@code client-id}\r\n * @since 1.3\r\n * @see org.apache.kafka.clients.consumer.Consumer#metrics()\r\n */\r\nMap&lt;String, Map&lt;MetricName, ? extends Metric&gt;&gt; metrics();\r\n```\r\n","title":"Has someone a convenient solution to determine if a Spring-Kafka-Consumer is listening","body":"<p>You can examine the consumer metrics and inspect them, for example:</p>\n<pre><code>MetricName [name=network-io-total, group=consumer-metrics, description=The total number of network operations (reads or writes) on all connections\nMetricName [name=connection-count, group=consumer-metrics, description=The current number of active connections.\n</code></pre>\n<p>There are other metrics that might be useful, e.g <code>last-poll-seconds-ago</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Return metrics kept by this container's consumer(s), grouped by {@code client-id}.\n * @return the consumer(s) metrics grouped by {@code client-id}\n * @since 1.3\n * @see org.apache.kafka.clients.consumer.Consumer#metrics()\n */\nMap&lt;String, Map&lt;MetricName, ? extends Metric&gt;&gt; metrics();\n</code></pre>\n"}],"owner":{"account_id":11512222,"reputation":87,"user_id":8436642,"display_name":"Nico S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":447,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660139095,"creation_date":1660137150,"question_id":73306967,"body_markdown":"I am looking for a convenient solution to determine if a Spring-Kafka-Consumer is listening.\r\nWe are using a KafkaListenerContainerFactory to create our listener container and now we want to check if it is connected to the broker and listening to the topic(s).\r\n\r\nCould someone please help out i found nothing in the internet that works.\r\nmessageListenerContainer.isRunning() does show true even if the broker isnt available so that doesnt work.","title":"Has someone a convenient solution to determine if a Spring-Kafka-Consumer is listening","body":"<p>I am looking for a convenient solution to determine if a Spring-Kafka-Consumer is listening.\nWe are using a KafkaListenerContainerFactory to create our listener container and now we want to check if it is connected to the broker and listening to the topic(s).</p>\n<p>Could someone please help out i found nothing in the internet that works.\nmessageListenerContainer.isRunning() does show true even if the broker isnt available so that doesnt work.</p>\n"},{"tags":["java","android","firebase","google-signin"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660124847,"post_id":73298906,"comment_id":129456761,"body_markdown":"I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-create-a-clean-firebase-authentication-using-mvvm-37f9b8eb7336) might help.","body":"I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-create-a-clean-firebase-authentication-using-mvvm-37f9b8eb7336\" rel=\"nofollow noreferrer\">resource</a> might help."}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660086480,"creation_date":1660086480,"answer_id":73299005,"question_id":73298906,"body_markdown":"When a `Task` fails, it contains an exception with details about why it failed. Log that error message, and you can see the cause of the failure and fix that.\r\n\r\n    if (task.isSuccessful()) {\r\n        ...\r\n    } else {\r\n        Log.e(&quot;SIGNIN&quot;, &quot;Failed to Sign In with Google&quot;, task.getException()); // &#128072;\r\n        Toast.makeText(LoginActivity.this, &quot;Failed to Sign In with Google! Please check your credentials.&quot;, Toast.LENGTH_LONG).show();\r\n    }\r\n\r\n\r\n","title":"Why Sign In With Google using Firebase not work with me?","body":"<p>When a <code>Task</code> fails, it contains an exception with details about why it failed. Log that error message, and you can see the cause of the failure and fix that.</p>\n<pre><code>if (task.isSuccessful()) {\n    ...\n} else {\n    Log.e(&quot;SIGNIN&quot;, &quot;Failed to Sign In with Google&quot;, task.getException()); // 👈\n    Toast.makeText(LoginActivity.this, &quot;Failed to Sign In with Google! Please check your credentials.&quot;, Toast.LENGTH_LONG).show();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19810459,"reputation":1,"user_id":14509427,"display_name":"Mohammad Abu Saada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660138827,"creation_date":1660138827,"answer_id":73307372,"question_id":73298906,"body_markdown":"Well, I solved my problem.. It was that I wasn&#39;t putting the application&#39;s SHA-1 into the Firebase project. After I installed it, the problem disappeared.","title":"Why Sign In With Google using Firebase not work with me?","body":"<p>Well, I solved my problem.. It was that I wasn't putting the application's SHA-1 into the Firebase project. After I installed it, the problem disappeared.</p>\n"}],"owner":{"account_id":19810459,"reputation":1,"user_id":14509427,"display_name":"Mohammad Abu Saada"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660138827,"creation_date":1660085624,"question_id":73298906,"body_markdown":"I am trying to use **Google Sihn In with Firebase** but it is not working. I have been trying for hours on this please help.\r\n\r\nThis is my Code:\r\n\r\n\r\n```\r\n\r\npublic class LoginActivity extends AppCompatActivity {\r\n\r\n    \r\n\r\n    private RelativeLayout signInWithGoogleBtn;\r\n\r\n    private GoogleSignInOptions gso;\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n\r\n    private static final int RC_SIGN_IN = 123;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n\r\n        signInWithGoogleBtn = findViewById(R.id.signInWithGoogleBtn);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n        signInWithGoogleBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                googleSignIn();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    private void googleSignIn() {\r\n        Intent intent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(intent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            try {\r\n                GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                firebaseAuthWithGoogle(account.getIdToken());\r\n            } catch (ApiException e) {\r\n                Toast.makeText(LoginActivity.this, &quot;Error&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                        if (task.isSuccessful()) {\r\n\r\n                            Toast.makeText(LoginActivity.this, &quot;Google Sign In Success&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                            FirebaseUser user = mAuth.getCurrentUser();\r\n\r\n                            startActivity(new Intent(LoginActivity.this, MainActivity.class));\r\n                            LoginActivity.this.finish();\r\n\r\n                        } else {\r\n                            Toast.makeText(LoginActivity.this, &quot;Failed to Sign In with Google! Please check your credentials.&quot;, Toast.LENGTH_LONG).show();\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n}\r\n```\r\n\r\nWhat happens is that when I press the &quot;Sign in with Google&quot; button and choose the account, the &quot;error message&quot; in Toast appears.\r\n\r\nPlease help and I will be really thankful","title":"Why Sign In With Google using Firebase not work with me?","body":"<p>I am trying to use <strong>Google Sihn In with Firebase</strong> but it is not working. I have been trying for hours on this please help.</p>\n<p>This is my Code:</p>\n<pre><code>\npublic class LoginActivity extends AppCompatActivity {\n\n    \n\n    private RelativeLayout signInWithGoogleBtn;\n\n    private GoogleSignInOptions gso;\n    private GoogleSignInClient mGoogleSignInClient;\n\n    private static final int RC_SIGN_IN = 123;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login);\n\n        signInWithGoogleBtn = findViewById(R.id.signInWithGoogleBtn);\n\n        mAuth = FirebaseAuth.getInstance();\n\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\n                .requestIdToken(getString(R.string.default_web_client_id))\n                .requestEmail()\n                .build();\n\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\n\n\n        signInWithGoogleBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                googleSignIn();\n            }\n        });\n    }\n\n\n\n    private void googleSignIn() {\n        Intent intent = mGoogleSignInClient.getSignInIntent();\n        startActivityForResult(intent, RC_SIGN_IN);\n    }\n\n    @Override\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if (requestCode == RC_SIGN_IN) {\n            Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);\n            try {\n                GoogleSignInAccount account = task.getResult(ApiException.class);\n                firebaseAuthWithGoogle(account.getIdToken());\n            } catch (ApiException e) {\n                Toast.makeText(LoginActivity.this, &quot;Error&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    private void firebaseAuthWithGoogle(String idToken) {\n\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\n        mAuth.signInWithCredential(credential)\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                        if (task.isSuccessful()) {\n\n                            Toast.makeText(LoginActivity.this, &quot;Google Sign In Success&quot;, Toast.LENGTH_SHORT).show();\n\n                            FirebaseUser user = mAuth.getCurrentUser();\n\n                            startActivity(new Intent(LoginActivity.this, MainActivity.class));\n                            LoginActivity.this.finish();\n\n                        } else {\n                            Toast.makeText(LoginActivity.this, &quot;Failed to Sign In with Google! Please check your credentials.&quot;, Toast.LENGTH_LONG).show();\n\n                        }\n                    }\n                });\n    }\n}\n</code></pre>\n<p>What happens is that when I press the &quot;Sign in with Google&quot; button and choose the account, the &quot;error message&quot; in Toast appears.</p>\n<p>Please help and I will be really thankful</p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":10771493,"reputation":1873,"user_id":7924858,"display_name":"abhinavsinghvirsen"},"score":0,"creation_date":1660135198,"post_id":73306471,"comment_id":129460674,"body_markdown":"use prepare statement","body":"use prepare statement"}],"answers":[{"tags":[],"owner":{"account_id":21975986,"reputation":21,"user_id":16251791,"display_name":"Kryszak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660138409,"creation_date":1660135355,"answer_id":73306543,"question_id":73306471,"body_markdown":"You could use projection to select only `name` property:\r\n```\r\ninterface CustomerNameProjection {\r\n   String getName();\r\n}\r\n```\r\n\r\nand then use it in `Repository` class:\r\n```\r\nList&lt;CustomerNameProjection&gt; findAllProjectedBy();\r\n```\r\n\r\nedit: corrected repository method name","title":"Return List&lt;String&gt; or String in hibernate query without query annotation","body":"<p>You could use projection to select only <code>name</code> property:</p>\n<pre><code>interface CustomerNameProjection {\n   String getName();\n}\n</code></pre>\n<p>and then use it in <code>Repository</code> class:</p>\n<pre><code>List&lt;CustomerNameProjection&gt; findAllProjectedBy();\n</code></pre>\n<p>edit: corrected repository method name</p>\n"},{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660137068,"creation_date":1660137068,"answer_id":73306942,"question_id":73306471,"body_markdown":"[Spring Data JPA][1] supports this quite well. You can define a POJO that represents the (reduced) object (the projection) you want of the entity, then [define a method that describes the query][2], returns the appropriate type, and Spring Data will generate all the code necessary to execute the query and map the results.\r\n\r\nHere&#39;s an example of a custom repository interface that uses this technique (untested pseudo-code):\r\n\r\n```java\r\npublic class CustomerSummary {\r\n    private String name;\r\n    // constructor and getters\r\n}\r\n\r\n@Repository\r\npublic interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; {\r\n    List&lt;CustomerSummary&gt; getAllSummaries();\r\n}\r\n```\r\n\r\nI&#39;m not sure if you can use &quot;simple&quot; types such as `String` in the return type, but I wouldn&#39;t be surprised if that is supported.\r\n\r\nAlso, you might have to tweak the exact method naming of `` to make sure Spring Data correctly interprets it as you want. [Here][3] is some additional reference documentation.\r\n\r\n\r\n  [1]: https://spring.io/projects/spring-data-jpa\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods\r\n  [3]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords","title":"Return List&lt;String&gt; or String in hibernate query without query annotation","body":"<p><a href=\"https://spring.io/projects/spring-data-jpa\" rel=\"nofollow noreferrer\">Spring Data JPA</a> supports this quite well. You can define a POJO that represents the (reduced) object (the projection) you want of the entity, then <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods\" rel=\"nofollow noreferrer\">define a method that describes the query</a>, returns the appropriate type, and Spring Data will generate all the code necessary to execute the query and map the results.</p>\n<p>Here's an example of a custom repository interface that uses this technique (untested pseudo-code):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomerSummary {\n    private String name;\n    // constructor and getters\n}\n\n@Repository\npublic interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; {\n    List&lt;CustomerSummary&gt; getAllSummaries();\n}\n</code></pre>\n<p>I'm not sure if you can use &quot;simple&quot; types such as <code>String</code> in the return type, but I wouldn't be surprised if that is supported.</p>\n<p>Also, you might have to tweak the exact method naming of `` to make sure Spring Data correctly interprets it as you want. <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords\" rel=\"nofollow noreferrer\">Here</a> is some additional reference documentation.</p>\n"},{"tags":[],"owner":{"account_id":66967,"reputation":500,"user_id":196207,"display_name":"Sankozi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660137306,"creation_date":1660137306,"answer_id":73307007,"question_id":73306471,"body_markdown":"Inject EntityManager and call [createQuery][1].\r\n\r\n    entityManager.createQuery(&quot;select c.name from Customer c&quot;)\r\n        .getResultList()\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#createQuery-java.lang.String-","title":"Return List&lt;String&gt; or String in hibernate query without query annotation","body":"<p>Inject EntityManager and call <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#createQuery-java.lang.String-\" rel=\"nofollow noreferrer\">createQuery</a>.</p>\n<pre><code>entityManager.createQuery(&quot;select c.name from Customer c&quot;)\n    .getResultList()\n</code></pre>\n"}],"owner":{"account_id":1469313,"reputation":5983,"user_id":1381266,"accept_rate":46,"display_name":"Galet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":618,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73306942,"answer_count":3,"score":0,"last_activity_date":1660138409,"creation_date":1660135069,"question_id":73306471,"body_markdown":"I am using Spring Boot application. I am using following method to return `List&lt;String&gt;` using *@Query*\r\n\r\n annotation.\r\n\r\n    @Query(&quot;select c.name from Customer c&quot;)\r\n    List&lt;String&gt; findAllNames();\r\n\r\n\r\nIs there a way to get the above result without @Query or @NativeQuery annotations?","title":"Return List&lt;String&gt; or String in hibernate query without query annotation","body":"<p>I am using Spring Boot application. I am using following method to return <code>List&lt;String&gt;</code> using <em>@Query</em></p>\n<p>annotation.</p>\n<pre><code>@Query(&quot;select c.name from Customer c&quot;)\nList&lt;String&gt; findAllNames();\n</code></pre>\n<p>Is there a way to get the above result without @Query or @NativeQuery annotations?</p>\n"},{"tags":["java","cassandra"],"owner":{"account_id":13081129,"reputation":758,"user_id":9451651,"display_name":"Guts"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660138201,"creation_date":1659969885,"question_id":73279758,"body_markdown":"I have cassandra cluster with 3 nodes. After adding column to table I started seeing those errors in 2 of my cassandra nodes:\r\n\r\n\r\n```\r\nWARN  [SharedPool-Worker-1] 2022-08-08 10:34:29,219 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread Thread[SharedPool-Worker-1,5,main]: {}\r\njava.io.IOError: java.io.IOException: Corrupt empty row found in unfiltered partition\r\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:222) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:210) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:47) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize30(PartitionUpdate.java:670) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize(PartitionUpdate.java:645) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.partitions.PartitionUpdate.fromBytes(PartitionUpdate.java:235) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.SystemKeyspace.loadPaxosState(SystemKeyspace.java:1103) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.service.paxos.PaxosState.prepare(PaxosState.java:74) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.service.paxos.PrepareVerbHandler.doVerb(PrepareVerbHandler.java:33) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:67) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_172]\r\n        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:136) [apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:105) [apache-cassandra-3.0.8.jar:3.0.8]\r\n        at java.lang.Thread.run(Thread.java:748) [na:1.8.0_172]\r\nCaused by: java.io.IOException: Corrupt empty row found in unfiltered partition\r\n        at org.apache.cassandra.db.rows.UnfilteredSerializer.deserialize(UnfilteredSerializer.java:368) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:217) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        ... 14 common frames omitted\r\n```\r\n\r\nThey appear when I make specific query in my application which throws this error:\r\n```\r\ncom.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\r\n\tat com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:88)\r\n\tat com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:25)\r\n\tat com.datastax.driver.core.DriverThrowables.propagateCause(DriverThrowables.java:37)\r\n\tat com.datastax.driver.core.DefaultResultSetFuture.getUninterruptibly(DefaultResultSetFuture.java:245)\r\n\tat com.datastax.driver.core.AbstractSession.execute(AbstractSession.java:68)\r\n\tat com.twd.persistence.cassandra.BasicTable.getColumns(BasicTable.java:136)\r\n\tat com.twd.persistence.cassandra.BasicTable.getColumns(BasicTable.java:109)\r\n\tat com.tradeweb.tws.repository.impl.OrderServiceRepositoryImpl.getTrades(OrderServiceRepositoryImpl.java:80)\r\n\tat com.tradeweb.tws.service.impl.OrderServiceImpl.getTrades(OrderServiceImpl.java:124)\r\n\tat com.tradeweb.tws.web.controller.OrderResource.getOrders(OrderResource.java:81)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:144)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:161)\r\n\tat org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:160)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:99)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:389)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:347)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:102)\r\n\tat org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:326)\r\n\tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\r\n\tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:267)\r\n\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)\r\n\tat org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:305)\r\n\tat org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1154)\r\n\tat org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:471)\r\n\tat org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:425)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:383)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:336)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.filters.CorsFilter.handleNonCORS(CorsFilter.java:436)\r\n\tat org.apache.catalina.filters.CorsFilter.doFilter(CorsFilter.java:177)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.tradeweb.tws.web.filter.TWDContentSecurityFilter.doFilter(TWDContentSecurityFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.tradeweb.tws.web.filter.TWDHttpHeaderSecurityFilter.doFilter(TWDHttpHeaderSecurityFilter.java:105)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:617)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1527)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1484)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\r\n\tat com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:115)\r\n\tat com.datastax.driver.core.Responses$Error.asException(Responses.java:124)\r\n\tat com.datastax.driver.core.RequestHandler$SpeculativeExecution.onSet(RequestHandler.java:473)\r\n\tat com.datastax.driver.core.Connection$Dispatcher.channelRead0(Connection.java:1070)\r\n\tat com.datastax.driver.core.Connection$Dispatcher.channelRead0(Connection.java:993)\r\n\tat io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:297)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:648)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:583)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:500)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\nCaused by: com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\r\n\tat com.datastax.driver.core.Responses$Error$1.decode(Responses.java:62)\r\n\tat com.datastax.driver.core.Responses$Error$1.decode(Responses.java:37)\r\n\tat com.datastax.driver.core.Message$ProtocolDecoder.decode(Message.java:289)\r\n\tat com.datastax.driver.core.Message$ProtocolDecoder.decode(Message.java:269)\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88)\r\n\t... 20 common frames omitted\r\n```\r\n\r\n\r\nI have run nodetool describecluster and it showed that schema on one of the nodes is unreachable. After that I restarted this node and describecluster showed that every schema is correct. This however did not stop those errors from showing. Since that I restarted every node like it is described here: https://stackoverflow.com/a/59678908/9451651. I have also run nodetool repair -pr too on each node. Nothing helped and I am still seeing those errors. Anyone knows how to solve this issue?\r\n\r\n\r\nUpdate:\r\nI found with nodetool scrub and sstablescrub commands that sstables for this table were broken. I truncated the table and repopulated it with the same data (I made backup with sql inserts). After running the inserts it threw an error that one row is corrupted. I removed this row and then repopulted the table again. This time no error. Now when I run nodetool scrub and sstablescrub it shows no issues with sstables however I am still seeing my original errors. I think that despite my sstables being correct right now the commit logs/caches are still broken. Do you know how I can fix that?\r\n\r\nUpdate 2:\r\nI resolved this issue by dropping the corrupted table and recreating it from backup we had before this issue started. Other fixes did not work in this case. \r\n","title":"Cassandra error: Corrupt empty row found in unfiltered partition","body":"<p>I have cassandra cluster with 3 nodes. After adding column to table I started seeing those errors in 2 of my cassandra nodes:</p>\n<pre><code>WARN  [SharedPool-Worker-1] 2022-08-08 10:34:29,219 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread Thread[SharedPool-Worker-1,5,main]: {}\njava.io.IOError: java.io.IOException: Corrupt empty row found in unfiltered partition\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:222) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:210) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:47) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize30(PartitionUpdate.java:670) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize(PartitionUpdate.java:645) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.partitions.PartitionUpdate.fromBytes(PartitionUpdate.java:235) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.SystemKeyspace.loadPaxosState(SystemKeyspace.java:1103) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.service.paxos.PaxosState.prepare(PaxosState.java:74) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.service.paxos.PrepareVerbHandler.doVerb(PrepareVerbHandler.java:33) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:67) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_172]\n        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:136) [apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:105) [apache-cassandra-3.0.8.jar:3.0.8]\n        at java.lang.Thread.run(Thread.java:748) [na:1.8.0_172]\nCaused by: java.io.IOException: Corrupt empty row found in unfiltered partition\n        at org.apache.cassandra.db.rows.UnfilteredSerializer.deserialize(UnfilteredSerializer.java:368) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:217) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        ... 14 common frames omitted\n</code></pre>\n<p>They appear when I make specific query in my application which throws this error:</p>\n<pre><code>com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\n    at com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:88)\n    at com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:25)\n    at com.datastax.driver.core.DriverThrowables.propagateCause(DriverThrowables.java:37)\n    at com.datastax.driver.core.DefaultResultSetFuture.getUninterruptibly(DefaultResultSetFuture.java:245)\n    at com.datastax.driver.core.AbstractSession.execute(AbstractSession.java:68)\n    at com.twd.persistence.cassandra.BasicTable.getColumns(BasicTable.java:136)\n    at com.twd.persistence.cassandra.BasicTable.getColumns(BasicTable.java:109)\n    at com.tradeweb.tws.repository.impl.OrderServiceRepositoryImpl.getTrades(OrderServiceRepositoryImpl.java:80)\n    at com.tradeweb.tws.service.impl.OrderServiceImpl.getTrades(OrderServiceImpl.java:124)\n    at com.tradeweb.tws.web.controller.OrderResource.getOrders(OrderResource.java:81)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)\n    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:144)\n    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:161)\n    at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:160)\n    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:99)\n    at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:389)\n    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:347)\n    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:102)\n    at org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:326)\n    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\n    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:267)\n    at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)\n    at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:305)\n    at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1154)\n    at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:471)\n    at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:425)\n    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:383)\n    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:336)\n    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:223)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.filters.CorsFilter.handleNonCORS(CorsFilter.java:436)\n    at org.apache.catalina.filters.CorsFilter.doFilter(CorsFilter.java:177)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at com.tradeweb.tws.web.filter.TWDContentSecurityFilter.doFilter(TWDContentSecurityFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at com.tradeweb.tws.web.filter.TWDHttpHeaderSecurityFilter.doFilter(TWDHttpHeaderSecurityFilter.java:105)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:617)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1527)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1484)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\n    at com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:115)\n    at com.datastax.driver.core.Responses$Error.asException(Responses.java:124)\n    at com.datastax.driver.core.RequestHandler$SpeculativeExecution.onSet(RequestHandler.java:473)\n    at com.datastax.driver.core.Connection$Dispatcher.channelRead0(Connection.java:1070)\n    at com.datastax.driver.core.Connection$Dispatcher.channelRead0(Connection.java:993)\n    at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n    at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:297)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:648)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:583)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:500)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    ... 1 common frames omitted\nCaused by: com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\n    at com.datastax.driver.core.Responses$Error$1.decode(Responses.java:62)\n    at com.datastax.driver.core.Responses$Error$1.decode(Responses.java:37)\n    at com.datastax.driver.core.Message$ProtocolDecoder.decode(Message.java:289)\n    at com.datastax.driver.core.Message$ProtocolDecoder.decode(Message.java:269)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88)\n    ... 20 common frames omitted\n</code></pre>\n<p>I have run nodetool describecluster and it showed that schema on one of the nodes is unreachable. After that I restarted this node and describecluster showed that every schema is correct. This however did not stop those errors from showing. Since that I restarted every node like it is described here: <a href=\"https://stackoverflow.com/a/59678908/9451651\">https://stackoverflow.com/a/59678908/9451651</a>. I have also run nodetool repair -pr too on each node. Nothing helped and I am still seeing those errors. Anyone knows how to solve this issue?</p>\n<p>Update:\nI found with nodetool scrub and sstablescrub commands that sstables for this table were broken. I truncated the table and repopulated it with the same data (I made backup with sql inserts). After running the inserts it threw an error that one row is corrupted. I removed this row and then repopulted the table again. This time no error. Now when I run nodetool scrub and sstablescrub it shows no issues with sstables however I am still seeing my original errors. I think that despite my sstables being correct right now the commit logs/caches are still broken. Do you know how I can fix that?</p>\n<p>Update 2:\nI resolved this issue by dropping the corrupted table and recreating it from backup we had before this issue started. Other fixes did not work in this case.</p>\n"},{"tags":["java","kotlin","intellij-idea","intellij-plugin"],"answers":[{"tags":[],"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660138098,"creation_date":1660138098,"answer_id":73307193,"question_id":73307047,"body_markdown":"Intellij does provide a way to inspect the code, You can explore it out[![enter image description here][1]][1]\r\n\r\nYou can enable the type of configuration you want and then do a code inspect.\r\n\r\nas below\r\n[![enter image description here][2]][2]\r\n\r\nin summary you can see as per below image, declaration suggesting `never used method`.\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jbGBR.png\r\n  [2]: https://i.stack.imgur.com/kudmC.png\r\n  [3]: https://i.stack.imgur.com/zZ9vy.png","title":"Find non-called methods in the project in Inteliji IDEA","body":"<p>Intellij does provide a way to inspect the code, You can explore it out<a href=\"https://i.stack.imgur.com/jbGBR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jbGBR.png\" alt=\"enter image description here\" /></a></p>\n<p>You can enable the type of configuration you want and then do a code inspect.</p>\n<p>as below\n<a href=\"https://i.stack.imgur.com/kudmC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kudmC.png\" alt=\"enter image description here\" /></a></p>\n<p>in summary you can see as per below image, declaration suggesting <code>never used method</code>.\n<a href=\"https://i.stack.imgur.com/zZ9vy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zZ9vy.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":16189468,"reputation":804,"user_id":11688668,"display_name":"Ilya Y"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1660224233,"accepted_answer_id":73307193,"answer_count":1,"score":0,"last_activity_date":1660138098,"creation_date":1660137489,"question_id":73307047,"body_markdown":"Is there some kind of plugin or keyboard shortcut to search for all non-called methods in IDEA?","title":"Find non-called methods in the project in Inteliji IDEA","body":"<p>Is there some kind of plugin or keyboard shortcut to search for all non-called methods in IDEA?</p>\n"},{"tags":["java","excel","apache-poi","stream-processing"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1540490638,"post_id":52995027,"comment_id":92895990,"body_markdown":"Swap to a streamable format like CSV? Excel files have forwards-and-backwards references in them that make a pure stream-as-you-generate approach at best super super tricky, and impossible in many situations...","body":"Swap to a streamable format like CSV? Excel files have forwards-and-backwards references in them that make a pure stream-as-you-generate approach at best super super tricky, and impossible in many situations..."},{"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"score":0,"creation_date":1540491526,"post_id":52995027,"comment_id":92896396,"body_markdown":"Unfortunately an actual Excel file is required :(","body":"Unfortunately an actual Excel file is required :("},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1540495877,"post_id":52995027,"comment_id":92898471,"body_markdown":"You&#39;re going to have to change one part of your requirements then, or spend a man-month or so writing Java code for Excel files...","body":"You&#39;re going to have to change one part of your requirements then, or spend a man-month or so writing Java code for Excel files..."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1540532178,"post_id":52995027,"comment_id":92908215,"body_markdown":"A `*.xlsx` file is nothing else than a `ZIP` archive containing the rows of a sheet in a `/xl/worksheets/sheet*.xml` file in that archive. You wants streaming that `*.xlsx` file content through to an HTTP response. So your requrement is streaming the rows into a substream to `/xl/worksheets/sheet*.xml` within the main stream of the `*.xlsx` file content. Possible? Not that I was aware of. You could streaming the data through to an HTTP response and then creating the `*.xlsx` file on client side from that data. But `CSV` would not be my favorit for streaming the data. My favorit would be `XML`.","body":"A <code>*.xlsx</code> file is nothing else than a <code>ZIP</code> archive containing the rows of a sheet in a <code>&#47;xl&#47;worksheets&#47;sheet*.xml</code> file in that archive. You wants streaming that <code>*.xlsx</code> file content through to an HTTP response. So your requrement is streaming the rows into a substream to <code>&#47;xl&#47;worksheets&#47;sheet*.xml</code> within the main stream of the <code>*.xlsx</code> file content. Possible? Not that I was aware of. You could streaming the data through to an HTTP response and then creating the <code>*.xlsx</code> file on client side from that data. But <code>CSV</code> would not be my favorit for streaming the data. My favorit would be <code>XML</code>."},{"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"score":0,"creation_date":1540534942,"post_id":52995027,"comment_id":92909177,"body_markdown":"Thanks, I was not aware of this. I guess this is why I haven&#39;t found any libraries that supports it. Maybe this even answers the question?","body":"Thanks, I was not aware of this. I guess this is why I haven&#39;t found any libraries that supports it. Maybe this even answers the question?"}],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":998,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660137874,"creation_date":1540488689,"question_id":52995027,"body_markdown":"I&#39;m looking for a way to generate very large Excel documents (on the fly) in a streaming fashion _without_ holding too much intermediary state in-memory (and preferably not on disk either). What I have is a lazy stream of data, `Stream&lt;Data&gt;`, potentially containing hundreds of thousands of `Data` objects. I want to continuously convert this data stream into excel rows written to an `OutputStream`. The end goal is _not_ to write the Excel document to disk, I want to stream it through to an HTTP response. \r\n\r\nI&#39;ve tried using [Apache POI][1] (4.0.0) but the problem with POI and its [SXSSFWorkbook](https://poi.apache.org/apidocs/org/apache/poi/xssf/streaming/SXSSFWorkbook.html) is that you can only write to the `OutputStream` once! I.e. this won&#39;t work:\r\n\r\n    OutputStream os = ..\r\n    Stream&lt;Data&gt; dataStream = ...\r\n    SXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\r\n    Sheet sh = wb.createSheet();\r\n    partition(dataStream, 100)\r\n         .peek((List&lt;Data&gt; data) -&gt; addRow(sh, data))\r\n         .forEach(__ -&gt; wb.write(os));\r\n\r\nWhat I try to do here is to partition the data stream (`Stream&lt;Data&gt;`) into chunks of 100 and then call the `addRow` method (not shown here) which converts the data into an Excel row and writes it to the `Sheet` (called `sh`). This actually ought to work fine if it weren&#39;t for the fact that `wb.write(..)` throws an exception when it&#39;s called the second time (i.e. when we reach the second chunk):\r\n\r\n    java.io.IOException: Stream closed\r\n    \tat java.io.BufferedWriter.ensureOpen(BufferedWriter.java:116)\r\n    \tat java.io.BufferedWriter.write(BufferedWriter.java:221)\r\n    \tat java.io.Writer.write(Writer.java:157)\r\n    \tat org.apache.poi.xssf.streaming.SheetDataWriter.beginRow(SheetDataWriter.java:213)\r\n    \tat org.apache.poi.xssf.streaming.SheetDataWriter.writeRow(SheetDataWriter.java:203)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFSheet.flushOneRow(SXSSFSheet.java:1876)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFSheet.flushRows(SXSSFSheet.java:1851)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFSheet.flushRows(SXSSFSheet.java:1865)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFWorkbook.flushSheets(SXSSFWorkbook.java:949)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFWorkbook.write(SXSSFWorkbook.java:923)\r\n\r\nI&#39;ve tried various hacks such as:\r\n\r\n    OutputStream os = ..\r\n    Stream&lt;Data&gt; dataStream = ...\r\n    SXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\r\n    Sheet sh = wb.createSheet();\r\n    partition(dataStream, 100)\r\n         .peek((List&lt;Data&gt; data) -&gt; addRow(sh, data))\r\n         .forEach(__ -&gt; {\r\n                        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n                        wb.write(byteArrayOutputStream);\r\n                        outputStream.write(byteArrayOutputStream.toByteArray());\r\n                    });\r\n\r\nBut this doesn&#39;t seem to work either. I could of course just do something like this:\r\n\r\n    OutputStream os = ..\r\n    Stream&lt;Data&gt; dataStream = ...\r\n    SXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\r\n    Sheet sh = wb.createSheet();\r\n    dataStream.forEach(row -&gt; addRow(sh, row));\r\n    wb.write(os);\r\n\r\nBut the problem with this approach is that the entire Excel document is created (and temporarily stored on disk) before the first bytes are pushed to the `OutputStream`. This means that the `OutputStream` consumer needs to wait unnecessarily long before the data even begins to stream.\r\n\r\nSo my questions is: How can I generate an Excel document with very large set of rows _in chunks_ without waiting for the entire document to be generated first?\r\n\r\nNote that Apache POI is not a requirement and I&#39;m happy to switch to another library if necessary.\r\n\r\n  [1]: https://poi.apache.org/\r\n\r\n\r\n\r\n","title":"Lazily generate Excel document in Java in chunks","body":"<p>I'm looking for a way to generate very large Excel documents (on the fly) in a streaming fashion <em>without</em> holding too much intermediary state in-memory (and preferably not on disk either). What I have is a lazy stream of data, <code>Stream&lt;Data&gt;</code>, potentially containing hundreds of thousands of <code>Data</code> objects. I want to continuously convert this data stream into excel rows written to an <code>OutputStream</code>. The end goal is <em>not</em> to write the Excel document to disk, I want to stream it through to an HTTP response. </p>\n\n<p>I've tried using <a href=\"https://poi.apache.org/\" rel=\"nofollow noreferrer\">Apache POI</a> (4.0.0) but the problem with POI and its <a href=\"https://poi.apache.org/apidocs/org/apache/poi/xssf/streaming/SXSSFWorkbook.html\" rel=\"nofollow noreferrer\">SXSSFWorkbook</a> is that you can only write to the <code>OutputStream</code> once! I.e. this won't work:</p>\n\n<pre><code>OutputStream os = ..\nStream&lt;Data&gt; dataStream = ...\nSXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\nSheet sh = wb.createSheet();\npartition(dataStream, 100)\n     .peek((List&lt;Data&gt; data) -&gt; addRow(sh, data))\n     .forEach(__ -&gt; wb.write(os));\n</code></pre>\n\n<p>What I try to do here is to partition the data stream (<code>Stream&lt;Data&gt;</code>) into chunks of 100 and then call the <code>addRow</code> method (not shown here) which converts the data into an Excel row and writes it to the <code>Sheet</code> (called <code>sh</code>). This actually ought to work fine if it weren't for the fact that <code>wb.write(..)</code> throws an exception when it's called the second time (i.e. when we reach the second chunk):</p>\n\n<pre><code>java.io.IOException: Stream closed\n    at java.io.BufferedWriter.ensureOpen(BufferedWriter.java:116)\n    at java.io.BufferedWriter.write(BufferedWriter.java:221)\n    at java.io.Writer.write(Writer.java:157)\n    at org.apache.poi.xssf.streaming.SheetDataWriter.beginRow(SheetDataWriter.java:213)\n    at org.apache.poi.xssf.streaming.SheetDataWriter.writeRow(SheetDataWriter.java:203)\n    at org.apache.poi.xssf.streaming.SXSSFSheet.flushOneRow(SXSSFSheet.java:1876)\n    at org.apache.poi.xssf.streaming.SXSSFSheet.flushRows(SXSSFSheet.java:1851)\n    at org.apache.poi.xssf.streaming.SXSSFSheet.flushRows(SXSSFSheet.java:1865)\n    at org.apache.poi.xssf.streaming.SXSSFWorkbook.flushSheets(SXSSFWorkbook.java:949)\n    at org.apache.poi.xssf.streaming.SXSSFWorkbook.write(SXSSFWorkbook.java:923)\n</code></pre>\n\n<p>I've tried various hacks such as:</p>\n\n<pre><code>OutputStream os = ..\nStream&lt;Data&gt; dataStream = ...\nSXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\nSheet sh = wb.createSheet();\npartition(dataStream, 100)\n     .peek((List&lt;Data&gt; data) -&gt; addRow(sh, data))\n     .forEach(__ -&gt; {\n                    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n                    wb.write(byteArrayOutputStream);\n                    outputStream.write(byteArrayOutputStream.toByteArray());\n                });\n</code></pre>\n\n<p>But this doesn't seem to work either. I could of course just do something like this:</p>\n\n<pre><code>OutputStream os = ..\nStream&lt;Data&gt; dataStream = ...\nSXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\nSheet sh = wb.createSheet();\ndataStream.forEach(row -&gt; addRow(sh, row));\nwb.write(os);\n</code></pre>\n\n<p>But the problem with this approach is that the entire Excel document is created (and temporarily stored on disk) before the first bytes are pushed to the <code>OutputStream</code>. This means that the <code>OutputStream</code> consumer needs to wait unnecessarily long before the data even begins to stream.</p>\n\n<p>So my questions is: How can I generate an Excel document with very large set of rows <em>in chunks</em> without waiting for the entire document to be generated first?</p>\n\n<p>Note that Apache POI is not a requirement and I'm happy to switch to another library if necessary.</p>\n"},{"tags":["java","android","memory-leaks","out-of-memory","clone"],"comments":[{"owner":{"account_id":22755735,"reputation":555,"user_id":16915219,"display_name":"JumperBot_"},"score":0,"creation_date":1660140073,"post_id":73307031,"comment_id":129462805,"body_markdown":"Your [image](https://i.stack.imgur.com/HtO6Y.jpg) looks like an image I would take on an old/unfocused/incorrectly configured/plugged-in camera, that might not be the result of the memory leak. Also, I suggest not cloning arrays too much since it doubles the memory used by the array. In other words, use the original array when it&#39;s performance and/or memory-wise.","body":"Your <a href=\"https://i.stack.imgur.com/HtO6Y.jpg\" rel=\"nofollow noreferrer\">image</a> looks like an image I would take on an old/unfocused/incorrectly configured/plugged-in camera, that might not be the result of the memory leak. Also, I suggest not cloning arrays too much since it doubles the memory used by the array. In other words, use the original array when it&#39;s performance and/or memory-wise."},{"owner":{"account_id":25402705,"reputation":1,"user_id":19211894,"display_name":"mkollu"},"score":0,"creation_date":1660195965,"post_id":73307031,"comment_id":129476568,"body_markdown":"@JumperBot_ When I create an image using **byte data from the camera** with clone(), the image comes out fine. But as you said, this event increases memory usage and causes OutOfMemory in the loop. The original sequence leads to the above [distorted image](https://i.stack.imgur.com/HtO6Y.jpg). There must be another way to record video without OutOfMemory and without using the original data.","body":"@JumperBot_ When I create an image using <b>byte data from the camera</b> with clone(), the image comes out fine. But as you said, this event increases memory usage and causes OutOfMemory in the loop. The original sequence leads to the above <a href=\"https://i.stack.imgur.com/HtO6Y.jpg\" rel=\"nofollow noreferrer\">distorted image</a>. There must be another way to record video without OutOfMemory and without using the original data."},{"owner":{"account_id":22755735,"reputation":555,"user_id":16915219,"display_name":"JumperBot_"},"score":0,"creation_date":1660199841,"post_id":73307031,"comment_id":129477530,"body_markdown":"Have you tried to **modify the methods** that need them so that you can just process it one byte at a time? If not, you might need to **lower the resolution** to lower memory usage even if the UX suffers drastically.","body":"Have you tried to <b>modify the methods</b> that need them so that you can just process it one byte at a time? If not, you might need to <b>lower the resolution</b> to lower memory usage even if the UX suffers drastically."},{"owner":{"account_id":25402705,"reputation":1,"user_id":19211894,"display_name":"mkollu"},"score":0,"creation_date":1660218319,"post_id":73307031,"comment_id":129483716,"body_markdown":"When I send 30 frames per second, the method I use cannot keep up with the speed of the accumulating frames. Since my arraylist holding byte[]s is inflated, it becomes OOM. I don&#39;t know how to solve this. Lowering resolution is not a solution for my project.","body":"When I send 30 frames per second, the method I use cannot keep up with the speed of the accumulating frames. Since my arraylist holding byte[]s is inflated, it becomes OOM. I don&#39;t know how to solve this. Lowering resolution is not a solution for my project."}],"owner":{"account_id":25402705,"reputation":1,"user_id":19211894,"display_name":"mkollu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660137414,"creation_date":1660137414,"question_id":73307031,"body_markdown":"I am streaming RTSP from my Android device using [libstreaming](https://github.com/fyhertz/libstreaming). I also want to record video when I press the button while streaming. I started a thread inside the net\\majorkernelpanic\\streaming\\video\\VideoStream.java class to record video. I am posting **camera** and **data** objects from **onPreviewFrame(byte[] data, Camera camera)** to this thread. When I send the **data** using Arrays.copyOf(), System.arrayCopy() or data.clone(), OutOfMemory is occurs. When I send **data** directly, there is no memory leak, but color shift occurs in the video. I would be happy if you can help.\r\n\r\n[Capture frame from Video using data without clone() or etc.][1]\r\n\r\n[Profiler - clicked record video button at second 00:20,769 ][2]\r\n\r\n**VideoStream.java**\r\n\r\n``` \r\n   recordVideoThread.start();\r\n\r\n   Camera.PreviewCallback callback = new Camera.PreviewCallback() {\r\n\t    long now = System.nanoTime()/1000;\r\n        @Override\r\n\t\tpublic void onPreviewFrame(byte[] data, Camera camera) {\r\n\t\t\tnow = System.nanoTime()/1000;\r\n\r\n\t\t\tif (RtspServerActivity.getRecordVideoButtonActive()){\r\n\t\t\t\t//Creating object to add bytelist\r\n\t\t\t\tRecordParameters recordParameters = new RecordParameters(data, camera);\r\n\t\t\t\t//Adding objects to list\r\n\t\t\t\trecordVideo.addByteToList(recordParameters);\r\n\t\t\t}\r\n```\r\n\r\n**RecordParameters**\r\n```\r\npublic class RecordParameters {\r\n    private static final String TAG = &quot;RecordParameters&quot;;\r\n\r\n    private byte[] byteData;\r\n    private Camera camera_obj;\r\n\r\n    public RecordParameters(byte[] byteData, Camera camera_obj) {\r\n        this.byteData = byteData;\r\n        this.camera_obj = camera_obj;\r\n    }\r\n\r\n    public RecordParameters(){}\r\n\r\n    public byte[] getByteData() {\r\n        return byteData;\r\n    }\r\n\r\n    public Camera getCamera_obj() {\r\n        return camera_obj;\r\n    }\r\n\r\n    public void recordVideo(byte[] byteData, Camera camera_obj, VideoWriter videoWriter)  {\r\n        Camera.Parameters parameters = camera_obj.getParameters();\r\n        int width = parameters.getPreviewSize().width;\r\n        int height = parameters.getPreviewSize().height;\r\n        YuvImage yuv = new YuvImage(byteData, parameters.getPreviewFormat(), width, height, null);\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        yuv.compressToJpeg(new Rect(0, 0, width, height), 100, out);\r\n        Mat mat = yuvtoMat(out);\r\n        videoWriter.write(mat);\r\n        mat.release();\r\n    }\r\n\r\n    public Mat yuvtoMat(ByteArrayOutputStream baos){\r\n        return Imgcodecs.imdecode(new MatOfByte(baos.toByteArray()), Imgcodecs.IMREAD_COLOR);\r\n    }\r\n\r\n}\r\n```\r\n\r\n**RecordVideoThread**\r\n```\r\npublic class RecordVideoThread extends Thread {\r\n    private final String TAG = &quot;RecordVideo&quot;;\r\n    boolean isVideoRecording = false;\r\n    List&lt;RecordParameters&gt; byteList = new ArrayList&lt;&gt;();\r\n    VideoWriter videoWriter = null;\r\n    RecordParameters recordParameters = new RecordParameters();\r\n\r\n    @Override\r\n    public void run() {\r\n        while(true){\r\n            if(byteList.size()!=0){\r\n                if(videoWriter == null){\r\n                    long now = System.nanoTime();\r\n                    Camera.Parameters parameters = byteList.get(0).getCamera_obj().getParameters();\r\n                    int width = parameters.getPreviewSize().width;\r\n                    int height = parameters.getPreviewSize().height;\r\n                    int frameRate = parameters.getPreviewFrameRate();\r\n                    Size frameSize = new Size(width, height);\r\n                    Log.i(TAG, &quot;VideoWriter is null&quot;);\r\n                    videoWriter= new VideoWriter(\r\n                            &quot;/data/data/com.example.RTSP/files/&quot; + now + &quot;.avi&quot;,\r\n                            VideoWriter.fourcc(&#39;M&#39;, &#39;J&#39;,&#39;P&#39;,&#39;G&#39;),\r\n                            frameRate,\r\n                            frameSize,\r\n                            true);\r\n\r\n                    Log.i(TAG, &quot;videowriter &quot;+ width +&quot; &quot;+height+&quot; &quot;+frameRate);\r\n                }\r\n                //Log.i(TAG, &quot;byte list   &quot;+ byteList.size()+&quot;   &quot;+ Arrays.toString(byteList.get(0).getByteData()));\r\n                recordParameters.recordVideo(byteList.get(0).getByteData(),byteList.get(0).getCamera_obj(), videoWriter);\r\n                byteList.remove(byteList.get(0));\r\n                System.gc();\r\n                System.runFinalization();\r\n                isVideoRecording = true;\r\n            }\r\n            if(!RtspServerActivity.getRecordVideoButtonActive() &amp; isRunning()){\r\n                Log.i(TAG, &quot;Video Writer released&quot;);\r\n                videoWriter.release();\r\n                stopRecord();\r\n            }\r\n            try {\r\n                Thread.sleep(5);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HtO6Y.jpg\r\n  [2]: https://i.stack.imgur.com/Myast.png","title":"Memory leak when cloning byte[] in a loop - Android","body":"<p>I am streaming RTSP from my Android device using <a href=\"https://github.com/fyhertz/libstreaming\" rel=\"nofollow noreferrer\">libstreaming</a>. I also want to record video when I press the button while streaming. I started a thread inside the net\\majorkernelpanic\\streaming\\video\\VideoStream.java class to record video. I am posting <strong>camera</strong> and <strong>data</strong> objects from <strong>onPreviewFrame(byte[] data, Camera camera)</strong> to this thread. When I send the <strong>data</strong> using Arrays.copyOf(), System.arrayCopy() or data.clone(), OutOfMemory is occurs. When I send <strong>data</strong> directly, there is no memory leak, but color shift occurs in the video. I would be happy if you can help.</p>\n<p><a href=\"https://i.stack.imgur.com/HtO6Y.jpg\" rel=\"nofollow noreferrer\">Capture frame from Video using data without clone() or etc.</a></p>\n<p><a href=\"https://i.stack.imgur.com/Myast.png\" rel=\"nofollow noreferrer\">Profiler - clicked record video button at second 00:20,769 </a></p>\n<p><strong>VideoStream.java</strong></p>\n<pre><code>   recordVideoThread.start();\n\n   Camera.PreviewCallback callback = new Camera.PreviewCallback() {\n        long now = System.nanoTime()/1000;\n        @Override\n        public void onPreviewFrame(byte[] data, Camera camera) {\n            now = System.nanoTime()/1000;\n\n            if (RtspServerActivity.getRecordVideoButtonActive()){\n                //Creating object to add bytelist\n                RecordParameters recordParameters = new RecordParameters(data, camera);\n                //Adding objects to list\n                recordVideo.addByteToList(recordParameters);\n            }\n</code></pre>\n<p><strong>RecordParameters</strong></p>\n<pre><code>public class RecordParameters {\n    private static final String TAG = &quot;RecordParameters&quot;;\n\n    private byte[] byteData;\n    private Camera camera_obj;\n\n    public RecordParameters(byte[] byteData, Camera camera_obj) {\n        this.byteData = byteData;\n        this.camera_obj = camera_obj;\n    }\n\n    public RecordParameters(){}\n\n    public byte[] getByteData() {\n        return byteData;\n    }\n\n    public Camera getCamera_obj() {\n        return camera_obj;\n    }\n\n    public void recordVideo(byte[] byteData, Camera camera_obj, VideoWriter videoWriter)  {\n        Camera.Parameters parameters = camera_obj.getParameters();\n        int width = parameters.getPreviewSize().width;\n        int height = parameters.getPreviewSize().height;\n        YuvImage yuv = new YuvImage(byteData, parameters.getPreviewFormat(), width, height, null);\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        yuv.compressToJpeg(new Rect(0, 0, width, height), 100, out);\n        Mat mat = yuvtoMat(out);\n        videoWriter.write(mat);\n        mat.release();\n    }\n\n    public Mat yuvtoMat(ByteArrayOutputStream baos){\n        return Imgcodecs.imdecode(new MatOfByte(baos.toByteArray()), Imgcodecs.IMREAD_COLOR);\n    }\n\n}\n</code></pre>\n<p><strong>RecordVideoThread</strong></p>\n<pre><code>public class RecordVideoThread extends Thread {\n    private final String TAG = &quot;RecordVideo&quot;;\n    boolean isVideoRecording = false;\n    List&lt;RecordParameters&gt; byteList = new ArrayList&lt;&gt;();\n    VideoWriter videoWriter = null;\n    RecordParameters recordParameters = new RecordParameters();\n\n    @Override\n    public void run() {\n        while(true){\n            if(byteList.size()!=0){\n                if(videoWriter == null){\n                    long now = System.nanoTime();\n                    Camera.Parameters parameters = byteList.get(0).getCamera_obj().getParameters();\n                    int width = parameters.getPreviewSize().width;\n                    int height = parameters.getPreviewSize().height;\n                    int frameRate = parameters.getPreviewFrameRate();\n                    Size frameSize = new Size(width, height);\n                    Log.i(TAG, &quot;VideoWriter is null&quot;);\n                    videoWriter= new VideoWriter(\n                            &quot;/data/data/com.example.RTSP/files/&quot; + now + &quot;.avi&quot;,\n                            VideoWriter.fourcc('M', 'J','P','G'),\n                            frameRate,\n                            frameSize,\n                            true);\n\n                    Log.i(TAG, &quot;videowriter &quot;+ width +&quot; &quot;+height+&quot; &quot;+frameRate);\n                }\n                //Log.i(TAG, &quot;byte list   &quot;+ byteList.size()+&quot;   &quot;+ Arrays.toString(byteList.get(0).getByteData()));\n                recordParameters.recordVideo(byteList.get(0).getByteData(),byteList.get(0).getCamera_obj(), videoWriter);\n                byteList.remove(byteList.get(0));\n                System.gc();\n                System.runFinalization();\n                isVideoRecording = true;\n            }\n            if(!RtspServerActivity.getRecordVideoButtonActive() &amp; isRunning()){\n                Log.i(TAG, &quot;Video Writer released&quot;);\n                videoWriter.release();\n                stopRecord();\n            }\n            try {\n                Thread.sleep(5);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","jackson-databind","localdate"],"comments":[{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":1,"creation_date":1601696853,"post_id":64180429,"comment_id":113493027,"body_markdown":"Register this one more, `.registerModule(new JSR310Module());`","body":"Register this one more, <code>.registerModule(new JSR310Module());</code>"},{"owner":{"account_id":4255606,"reputation":145,"user_id":3481377,"display_name":"Artemoon"},"score":0,"creation_date":1611193600,"post_id":64180429,"comment_id":116375062,"body_markdown":"@JonathanJOhx, this is deprecated, it&#39;s better to use this -- `.registerModule(new JavaTimeModule());`","body":"@JonathanJOhx, this is deprecated, it&#39;s better to use this -- <code>.registerModule(new JavaTimeModule());</code>"}],"owner":{"account_id":10378051,"reputation":11,"user_id":7674598,"display_name":"Airton cruz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":659,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660137135,"creation_date":1601695829,"question_id":64180429,"body_markdown":"I tried several ways to change the default jackson configuration within the spring boot and it doesn&#39;t work.\r\nit simply ignores all configuration\r\n\r\n\r\n    @SpringBootApplication\r\n    public class AvaliacaoairtonApplication {\r\n\r\n\tpublic static final String URL = &quot;*&quot;;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(AvaliacaoairtonApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\t@Primary\r\n\tpublic ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\r\n\r\n\t\tObjectMapper objectMapper = builder.build();\r\n\r\n\t\tobjectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n\r\n\t\tJavaTimeModule javaTimeModule = new JavaTimeModule();\r\n\t\tjavaTimeModule.addSerializer(LocalDate.class, new StdScalarSerializer&lt;LocalDate&gt;(LocalDate.class) {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void serialize(LocalDate localDate, JsonGenerator jsonGenerator,\r\n\t\t\t\t\t\t\t\t  SerializerProvider serializerProvider) throws IOException {\r\n\r\n\t\t\t\tjsonGenerator.writeString(localDate.format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tobjectMapper.registerModule(javaTimeModule);\r\n\r\n\t\treturn objectMapper;\r\n\t}\r\n\r\n}\r\n\r\napplication.properties\r\nspring.jackson.serialization.write-dates-as-timestamps=false\r\n\r\nPOM\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;br.com.softplan&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;avaliacaoairton&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;avaliacaoairton&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.0.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator-annotation-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.0.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\nresult\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yQpC4.png","title":"Serialize LocalDate as TimeStamp using Spring Boot 2.3.4.RELEASE Jackson2ObjectMapper","body":"<p>I tried several ways to change the default jackson configuration within the spring boot and it doesn't work.\nit simply ignores all configuration</p>\n<pre><code>@SpringBootApplication\npublic class AvaliacaoairtonApplication {\n\npublic static final String URL = &quot;*&quot;;\n\npublic static void main(String[] args) {\n    SpringApplication.run(AvaliacaoairtonApplication.class, args);\n}\n\n@Bean\n@Primary\npublic ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\n\n    ObjectMapper objectMapper = builder.build();\n\n    objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n\n    JavaTimeModule javaTimeModule = new JavaTimeModule();\n    javaTimeModule.addSerializer(LocalDate.class, new StdScalarSerializer&lt;LocalDate&gt;(LocalDate.class) {\n\n        @Override\n        public void serialize(LocalDate localDate, JsonGenerator jsonGenerator,\n                              SerializerProvider serializerProvider) throws IOException {\n\n            jsonGenerator.writeString(localDate.format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));\n        }\n    });\n\n    objectMapper.registerModule(javaTimeModule);\n\n    return objectMapper;\n}\n</code></pre>\n<p>}</p>\n<p>application.properties\nspring.jackson.serialization.write-dates-as-timestamps=false</p>\n<p>POM</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;br.com.softplan&lt;/groupId&gt;\n&lt;artifactId&gt;avaliacaoairton&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n&lt;name&gt;avaliacaoairton&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;version&gt;6.0.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator-annotation-processor&lt;/artifactId&gt;\n        &lt;version&gt;6.0.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>result\n<a href=\"https://i.stack.imgur.com/yQpC4.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8873,"page":1119,"page_size":100}
