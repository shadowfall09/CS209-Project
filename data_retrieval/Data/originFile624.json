{"items":[{"tags":["java","android","flutter","sqlite","web"],"answers":[{"tags":[],"owner":{"account_id":12171202,"reputation":31,"user_id":8885810,"display_name":"Abhishek Gupta..."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677159525,"creation_date":1677159525,"answer_id":75545597,"question_id":75545059,"body_markdown":"Using getContext() instead of getActivity() or this .... helped me.","title":"Data Adding Issue to SqLite DB through Dialogue in Android Studio","body":"<p>Using getContext() instead of getActivity() or this .... helped me.</p>\n"},{"tags":[],"owner":{"account_id":5339421,"reputation":100,"user_id":4288760,"accept_rate":100,"display_name":"Sunil_Gupta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677161950,"creation_date":1677161950,"answer_id":75546058,"question_id":75545059,"body_markdown":"it would be helpful too to use \r\n\r\n**getApplicationContext()** \r\n\r\nhere.","title":"Data Adding Issue to SqLite DB through Dialogue in Android Studio","body":"<p>it would be helpful too to use</p>\n<p><strong>getApplicationContext()</strong></p>\n<p>here.</p>\n"}],"owner":{"account_id":12171202,"reputation":31,"user_id":8885810,"display_name":"Abhishek Gupta..."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75546058,"answer_count":2,"score":0,"last_activity_date":1677161950,"creation_date":1677156520,"question_id":75545059,"body_markdown":"```\r\npublic class MyDialogue extends AppCompatDialogFragment {\r\n\r\n    private EditText edtkeytitle;\r\n    //MyDbCode db = new MyDbCode(getActivity()); //BUT I AM GETTING ISSUE HERE IN INITIALISATION \r\n\r\n    @NonNull\r\n    @Override\r\n    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\r\n\r\n\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n\r\n        LayoutInflater inflater = getActivity().getLayoutInflater();\r\n        View view = inflater.inflate(R.layout.dialogue_layout, null);\r\n\r\n        builder.setView(view)\r\n                .setTitle(&quot;Create Title&quot;)\r\n                .setNegativeButton(&quot;cancel&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n\r\n                    }\r\n                })\r\n                .setPositiveButton(&quot;ok&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        String key_title = edtkeytitle.getText().toString();\r\n                        //db.insertDataStore(key_title, &quot;&quot;); // HERE I WANT TO INSERT\r\n\r\n                    }\r\n                });\r\n\r\n        edtkeytitle = view.findViewById(R.id.edtkeytitle);\r\n        return builder.create();\r\n    }\r\n}\r\n\r\n```\r\nIn My app I want to do Is after clicking on floating button to get a dialogue box open and take value afterwards on positive click and it get stored in database. But I am not able to iniitlaise my database here \r\n \r\n`MyDbCode db = new MyDbCode(getActivity());`\r\nhere instead of getActivity whether if I am using &#39;this&#39; clause again I am getting issue.\r\nLet me show you my MyDbCode.\r\n\r\n\r\n```\r\npublic class MyDbCode extends SQLiteOpenHelper {\r\n\r\n    private static final String Database_Name = &quot;Alone.db&quot;;\r\n    private static final int Database_ID = 1;\r\n    private static final String TABLE_NAME = &quot;alonetable&quot;;\r\n    private static final String TABLE_Data_NAME = &quot;alonedata&quot;;\r\n    private static final String userpass = &quot;Pass&quot;;\r\n    private static final String key_title = &quot;key_title&quot;;\r\n    private static final String key_data = &quot;key_data&quot;;\r\n\r\n    public MyDbCode(Context context) {\r\n        super(context, Database_Name, null , Database_ID);\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n        String query1 = &quot;CREATE TABLE &quot; + TABLE_NAME + &quot; (&quot; + userpass + &quot; TEXT)&quot;;\r\n        String query2 = &quot;CREATE TABLE &quot; + TABLE_Data_NAME + &quot; (&quot;\r\n                + key_title + &quot; TEXT,&quot;\r\n                + key_data + &quot; TEXT)&quot;;\r\n        db.execSQL(query1);\r\n        db.execSQL(query2);\r\n\r\n        //insertData(&quot;pass&quot;);\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\r\n    }\r\n\r\n    public void insertData (String pass){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues values = new ContentValues();\r\n        values.put(userpass, pass);\r\n        db.insert(TABLE_NAME, null, values);\r\n        db.close();\r\n    }\r\n    public boolean isexist(){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        Cursor cursor =db.rawQuery(&quot;Select * from alonetable&quot;, null);\r\n        if(cursor.getCount() &gt; 0) return true;\r\n        else return false;\r\n\r\n    }\r\n    public boolean Ismatched(String pass){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        Cursor cursor =db.rawQuery(&quot;Select pass from alonetable WHERE pass = ?&quot;, new String[]{pass});\r\n        if(cursor.getCount() &gt; 0) return true;\r\n        else return false;\r\n\r\n    }\r\n\r\n\r\n    public void update(String oldpass, String newpass){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n        cv.put(userpass,newpass);\r\n        db.update(TABLE_NAME, cv, &quot;pass = ?&quot;, new String[]{oldpass});\r\n\r\n\r\n        db.close();\r\n    }\r\n\r\n    public void insertDataStore (String key_titleent , String key_dataent){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues values = new ContentValues();\r\n        values.put(key_title, key_titleent);\r\n        values.put(key_data,key_dataent);\r\n        db.insert(TABLE_Data_NAME, null, values);\r\n        db.close();\r\n    }\r\n\r\n    Cursor readAllData () {\r\n        String query = &quot;SELECT * FROM &quot;+ TABLE_Data_NAME;\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        Cursor cursor= null;\r\n        if(db != null){\r\n            cursor = db.rawQuery(query,null);\r\n        }\r\n        return  cursor;\r\n    }\r\n\r\n    public void updateData(String Key_titleupd, String key_Dataupd){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n        cv.put(key_data,key_Dataupd);\r\n        db.update(TABLE_NAME, cv, &quot;pass = ?&quot;, new String[]{Key_titleupd});\r\n\r\n\r\n        db.close();\r\n    }\r\n\r\n}\r\n```\r\n \r\n\r\n\r\nI tried using custom dialogue instead of ALertDialogue but i want if dialogue opens then background of that dialogue gets faded or gets non focusable but i am not able to do so. so i prefered this ALertDialogue but here i am getting Db intialisation issue.","title":"Data Adding Issue to SqLite DB through Dialogue in Android Studio","body":"<pre><code>public class MyDialogue extends AppCompatDialogFragment {\n\n    private EditText edtkeytitle;\n    //MyDbCode db = new MyDbCode(getActivity()); //BUT I AM GETTING ISSUE HERE IN INITIALISATION \n\n    @NonNull\n    @Override\n    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n\n\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n\n        LayoutInflater inflater = getActivity().getLayoutInflater();\n        View view = inflater.inflate(R.layout.dialogue_layout, null);\n\n        builder.setView(view)\n                .setTitle(&quot;Create Title&quot;)\n                .setNegativeButton(&quot;cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                })\n                .setPositiveButton(&quot;ok&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n                        String key_title = edtkeytitle.getText().toString();\n                        //db.insertDataStore(key_title, &quot;&quot;); // HERE I WANT TO INSERT\n\n                    }\n                });\n\n        edtkeytitle = view.findViewById(R.id.edtkeytitle);\n        return builder.create();\n    }\n}\n\n</code></pre>\n<p>In My app I want to do Is after clicking on floating button to get a dialogue box open and take value afterwards on positive click and it get stored in database. But I am not able to iniitlaise my database here</p>\n<p><code>MyDbCode db = new MyDbCode(getActivity());</code>\nhere instead of getActivity whether if I am using 'this' clause again I am getting issue.\nLet me show you my MyDbCode.</p>\n<pre><code>public class MyDbCode extends SQLiteOpenHelper {\n\n    private static final String Database_Name = &quot;Alone.db&quot;;\n    private static final int Database_ID = 1;\n    private static final String TABLE_NAME = &quot;alonetable&quot;;\n    private static final String TABLE_Data_NAME = &quot;alonedata&quot;;\n    private static final String userpass = &quot;Pass&quot;;\n    private static final String key_title = &quot;key_title&quot;;\n    private static final String key_data = &quot;key_data&quot;;\n\n    public MyDbCode(Context context) {\n        super(context, Database_Name, null , Database_ID);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        String query1 = &quot;CREATE TABLE &quot; + TABLE_NAME + &quot; (&quot; + userpass + &quot; TEXT)&quot;;\n        String query2 = &quot;CREATE TABLE &quot; + TABLE_Data_NAME + &quot; (&quot;\n                + key_title + &quot; TEXT,&quot;\n                + key_data + &quot; TEXT)&quot;;\n        db.execSQL(query1);\n        db.execSQL(query2);\n\n        //insertData(&quot;pass&quot;);\n\n\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\n    }\n\n    public void insertData (String pass){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues values = new ContentValues();\n        values.put(userpass, pass);\n        db.insert(TABLE_NAME, null, values);\n        db.close();\n    }\n    public boolean isexist(){\n        SQLiteDatabase db = this.getWritableDatabase();\n        Cursor cursor =db.rawQuery(&quot;Select * from alonetable&quot;, null);\n        if(cursor.getCount() &gt; 0) return true;\n        else return false;\n\n    }\n    public boolean Ismatched(String pass){\n        SQLiteDatabase db = this.getWritableDatabase();\n        Cursor cursor =db.rawQuery(&quot;Select pass from alonetable WHERE pass = ?&quot;, new String[]{pass});\n        if(cursor.getCount() &gt; 0) return true;\n        else return false;\n\n    }\n\n\n    public void update(String oldpass, String newpass){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n        cv.put(userpass,newpass);\n        db.update(TABLE_NAME, cv, &quot;pass = ?&quot;, new String[]{oldpass});\n\n\n        db.close();\n    }\n\n    public void insertDataStore (String key_titleent , String key_dataent){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues values = new ContentValues();\n        values.put(key_title, key_titleent);\n        values.put(key_data,key_dataent);\n        db.insert(TABLE_Data_NAME, null, values);\n        db.close();\n    }\n\n    Cursor readAllData () {\n        String query = &quot;SELECT * FROM &quot;+ TABLE_Data_NAME;\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor cursor= null;\n        if(db != null){\n            cursor = db.rawQuery(query,null);\n        }\n        return  cursor;\n    }\n\n    public void updateData(String Key_titleupd, String key_Dataupd){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n        cv.put(key_data,key_Dataupd);\n        db.update(TABLE_NAME, cv, &quot;pass = ?&quot;, new String[]{Key_titleupd});\n\n\n        db.close();\n    }\n\n}\n</code></pre>\n<p>I tried using custom dialogue instead of ALertDialogue but i want if dialogue opens then background of that dialogue gets faded or gets non focusable but i am not able to do so. so i prefered this ALertDialogue but here i am getting Db intialisation issue.</p>\n"},{"tags":["java","tomcat","tomcat8","tomcat9"],"comments":[{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":2,"creation_date":1531386202,"post_id":51301296,"comment_id":89579726,"body_markdown":"Don&#39;t use a Tomcat&#39;s server.xml for another major version.","body":"Don&#39;t use a Tomcat&#39;s server.xml for another major version."},{"owner":{"account_id":13944279,"reputation":171,"user_id":10069385,"display_name":"MoonLight"},"score":0,"creation_date":1531387693,"post_id":51301296,"comment_id":89580671,"body_markdown":"@Eug&#232;neAdell I have a server.xml in my project and a script that overrides the tomcat&#39;s server.xml when deploying. I am trying to figure out what I need to change in that server.xml. I commented out the JasperListener and it worked, but now I do not know if Jasper is still working. Thus my question if I simply don&#39;t need the JasperListener anymore and what else I need to change.\nEdit: Also when deploying my project, I set a new Tomcat with every deployment, pulling the tomcat per script and installing it on the server. So I need to override the server.xml","body":"@Eug&#232;neAdell I have a server.xml in my project and a script that overrides the tomcat&#39;s server.xml when deploying. I am trying to figure out what I need to change in that server.xml. I commented out the JasperListener and it worked, but now I do not know if Jasper is still working. Thus my question if I simply don&#39;t need the JasperListener anymore and what else I need to change. Edit: Also when deploying my project, I set a new Tomcat with every deployment, pulling the tomcat per script and installing it on the server. So I need to override the server.xml"},{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":1,"creation_date":1531395548,"post_id":51301296,"comment_id":89585864,"body_markdown":"It&#39;s not possible to answer, overriding by another version being a bad practice. server.xml can be changed : a little/very much/not at all. The most important to check are the port attributes.","body":"It&#39;s not possible to answer, overriding by another version being a bad practice. server.xml can be changed : a little/very much/not at all. The most important to check are the port attributes."}],"answers":[{"tags":[],"owner":{"account_id":12883855,"reputation":643,"user_id":9318064,"display_name":"Yuma Technical Inc."},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1677161763,"creation_date":1558536919,"answer_id":56259669,"question_id":51301296,"body_markdown":"`org.apache.catalina.core.JasperListener` is no longer required.  So if it exists in your `server.xml` - comment it out!","title":"JasperListener? Upgrading from Tomcat 8 to Tomcat 9","body":"<p><code>org.apache.catalina.core.JasperListener</code> is no longer required.  So if it exists in your <code>server.xml</code> - comment it out!</p>\n"}],"owner":{"account_id":13944279,"reputation":171,"user_id":10069385,"display_name":"MoonLight"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22056,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":1,"score":17,"last_activity_date":1677161763,"creation_date":1531385827,"question_id":51301296,"body_markdown":"Since Tomcat 8.0 has reached end of life, I want to upgrade my application directly to Tomcat 9.\r\n\r\nWhen I deploy my Java based App from local to my server, I have a script which overrides the server.xml. I upgraded the server to a tomcat 9 and tried to put my application in there, but I get an error when trying to start it.\r\n\r\n    org.apache.tomcat.util.digester.Digester.startElement Begin event threw exception\r\n    java.lang.ClassNotFoundException: org.apache.catalina.core.JasperListener\r\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n\r\nTomcat 9 does not know JasperListener. I googled this issue and found the &quot;Jasper How to&quot; page from apache, but I do not get it. Is Jasper now installed without me having to insert the JasperListener in the server.xml? And do I have to update anything else when upgrading from Tomcat 8 to 9?","title":"JasperListener? Upgrading from Tomcat 8 to Tomcat 9","body":"<p>Since Tomcat 8.0 has reached end of life, I want to upgrade my application directly to Tomcat 9.</p>\n\n<p>When I deploy my Java based App from local to my server, I have a script which overrides the server.xml. I upgraded the server to a tomcat 9 and tried to put my application in there, but I get an error when trying to start it.</p>\n\n<pre><code>org.apache.tomcat.util.digester.Digester.startElement Begin event threw exception\njava.lang.ClassNotFoundException: org.apache.catalina.core.JasperListener\nat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n</code></pre>\n\n<p>Tomcat 9 does not know JasperListener. I googled this issue and found the \"Jasper How to\" page from apache, but I do not get it. Is Jasper now installed without me having to insert the JasperListener in the server.xml? And do I have to update anything else when upgrading from Tomcat 8 to 9?</p>\n"},{"tags":["java","intellij-idea","javadoc"],"comments":[{"owner":{"account_id":2651999,"reputation":7958,"user_id":3145373,"accept_rate":77,"display_name":"user3145373 ツ"},"score":0,"creation_date":1504498073,"post_id":46029788,"comment_id":79020195,"body_markdown":"Just use `ctrl + b` or `ctrl + alt + b` on method for which you want implementation and `javadoc`. If `javadoc` is available then it will show you.","body":"Just use <code>ctrl + b</code> or <code>ctrl + alt + b</code> on method for which you want implementation and <code>javadoc</code>. If <code>javadoc</code> is available then it will show you."}],"answers":[{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504494656,"creation_date":1504494656,"answer_id":46029815,"question_id":46029788,"body_markdown":"You can simply navigate to the class `PrintStream` where you can find the complete documentation by - \r\n\r\n - Right click on the method\r\n - Go to \r\n - Implementation\r\n - Select the class where you want to see its implementation\r\n - In this case `PrintStream`\r\n\r\n(Shortcuts could vary as defined by users)\r\n","title":"missing javadoc detail in intelliJ","body":"<p>You can simply navigate to the class <code>PrintStream</code> where you can find the complete documentation by - </p>\n\n<ul>\n<li>Right click on the method</li>\n<li>Go to </li>\n<li>Implementation</li>\n<li>Select the class where you want to see its implementation</li>\n<li>In this case <code>PrintStream</code></li>\n</ul>\n\n<p>(Shortcuts could vary as defined by users)</p>\n"},{"tags":[],"owner":{"account_id":4596872,"reputation":2115,"user_id":3728639,"accept_rate":89,"display_name":"Chathura Buddhika"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1504513487,"creation_date":1504513487,"answer_id":46033025,"question_id":46029788,"body_markdown":"This is because you didn&#39;t set Java source path in the project structure dialog.\r\n\r\nGo to `File &gt; Project Structure` and select `SDKs` from the left side. Then select your project JDK level (In your case it should be 1.8) and add JDK source path in `Sourcepath` tab. \r\n\r\nUsually it should be named as src.zip and placed inside your JDK folder. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fVF6v.png","title":"missing javadoc detail in intelliJ","body":"<p>This is because you didn't set Java source path in the project structure dialog.</p>\n\n<p>Go to <code>File &gt; Project Structure</code> and select <code>SDKs</code> from the left side. Then select your project JDK level (In your case it should be 1.8) and add JDK source path in <code>Sourcepath</code> tab. </p>\n\n<p>Usually it should be named as src.zip and placed inside your JDK folder. </p>\n\n<p><a href=\"https://i.stack.imgur.com/fVF6v.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/fVF6v.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":12268142,"reputation":589,"user_id":8954109,"display_name":"plswork04"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616525723,"creation_date":1616525723,"answer_id":66769566,"question_id":46029788,"body_markdown":"Trying to follow @Chathura Buddhika&#39;s answer I found I didn&#39;t have the jdk source installed:\r\n```\r\n$ file /usr/lib/jvm/java-8-openjdk-amd64/src.zip\r\n/usr/lib/jvm/java-8-openjdk-amd64/src.zip: broken symbolic link to ../openjdk-8/src.zip \r\n```\r\n\r\nI **installed the source package**, restarted intellij, and then documentation &quot;just worked&quot;. The Sourcepath got automatically added to the Project structure.\r\n\r\nDebian/Ubuntu with open jdk8:\r\n\r\n```\r\nsudo apt-get install openjdk-8-source\r\n```\r\n\r\nRef: https://stackoverflow.com/a/64340730/8954109","title":"missing javadoc detail in intelliJ","body":"<p>Trying to follow @Chathura Buddhika's answer I found I didn't have the jdk source installed:</p>\n<pre><code>$ file /usr/lib/jvm/java-8-openjdk-amd64/src.zip\n/usr/lib/jvm/java-8-openjdk-amd64/src.zip: broken symbolic link to ../openjdk-8/src.zip \n</code></pre>\n<p>I <strong>installed the source package</strong>, restarted intellij, and then documentation &quot;just worked&quot;. The Sourcepath got automatically added to the Project structure.</p>\n<p>Debian/Ubuntu with open jdk8:</p>\n<pre><code>sudo apt-get install openjdk-8-source\n</code></pre>\n<p>Ref: <a href=\"https://stackoverflow.com/a/64340730/8954109\">https://stackoverflow.com/a/64340730/8954109</a></p>\n"},{"tags":[],"owner":{"account_id":8074479,"reputation":193,"user_id":6222252,"display_name":"Slimane Deb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677161500,"creation_date":1677161500,"answer_id":75545959,"question_id":46029788,"body_markdown":"Other thing you might consider if you are on a Maven project, is to download the sources in Maven menu on the upper right (see pic. bellow)\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zwWO4.png","title":"missing javadoc detail in intelliJ","body":"<p>Other thing you might consider if you are on a Maven project, is to download the sources in Maven menu on the upper right (see pic. bellow)</p>\n<p><a href=\"https://i.stack.imgur.com/zwWO4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zwWO4.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":10744238,"reputation":83,"user_id":7906182,"display_name":"Tim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4304,"favorite_count":0,"down_vote_count":4,"up_vote_count":8,"accepted_answer_id":46033025,"answer_count":4,"score":4,"last_activity_date":1677161500,"creation_date":1504494378,"question_id":46029788,"body_markdown":"Just switch the IDE from  Eclipse to intelliJ, when I use ctrl+q to try to pop up more explainations for the method, it shows no details like this. How can I fix it to get same information as Eclipse does?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/P5ctT.png","title":"missing javadoc detail in intelliJ","body":"<p>Just switch the IDE from  Eclipse to intelliJ, when I use ctrl+q to try to pop up more explainations for the method, it shows no details like this. How can I fix it to get same information as Eclipse does?</p>\n\n<p><a href=\"https://i.stack.imgur.com/P5ctT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/P5ctT.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","swing","jcombobox","jseparator"],"answers":[{"tags":[],"owner":{"account_id":3499,"reputation":16114,"user_id":5049,"accept_rate":25,"display_name":"macbirdie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1222428196,"creation_date":1222428196,"answer_id":138849,"question_id":138793,"body_markdown":"You can use a custom `ListCellRenderer` which would draw the separator items differently. See [docs][1] and a small [tutorial][2].\r\n\r\n  [1]: http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/JComboBox.html#setRenderer(javax.swing.ListCellRenderer)\r\n  [2]: http://www-eleves-isia.cma.fr/documentation/JavaTutorial/uiswing/components/combobox.html#renderer\r\n","title":"How do I add a separator to a JComboBox in Java?","body":"<p>You can use a custom <code>ListCellRenderer</code> which would draw the separator items differently. See <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/JComboBox.html#setRenderer(javax.swing.ListCellRenderer)\" rel=\"nofollow noreferrer\">docs</a> and a small <a href=\"http://www-eleves-isia.cma.fr/documentation/JavaTutorial/uiswing/components/combobox.html#renderer\" rel=\"nofollow noreferrer\">tutorial</a>.</p>\n"},{"tags":[],"owner":{"account_id":11508,"reputation":3302,"user_id":22221,"display_name":"pfranza"},"down_vote_count":1,"up_vote_count":9,"is_accepted":true,"score":8,"last_activity_date":1222429313,"creation_date":1222429313,"answer_id":138922,"question_id":138793,"body_markdown":"There is a pretty short tutorial with an example that shows how to use a custom ListCellRenderer on java2s\r\n [http://www.java2s.com/Code/Java/Swing-Components/BlockComboBoxExample.htm][1]\r\n\r\nBasically it involves inserting a known placeholder in your list model and when you detect the placeholder in the ListCellRenderer you return an instance of &#39;new JSeparator(JSeparator.HORIZONTAL)&#39;\r\n\r\n\r\n  [1]: http://www.java2s.com/Code/Java/Swing-Components/BlockComboBoxExample.htm","title":"How do I add a separator to a JComboBox in Java?","body":"<p>There is a pretty short tutorial with an example that shows how to use a custom ListCellRenderer on java2s\n <a href=\"http://www.java2s.com/Code/Java/Swing-Components/BlockComboBoxExample.htm\" rel=\"noreferrer\">http://www.java2s.com/Code/Java/Swing-Components/BlockComboBoxExample.htm</a></p>\n\n<p>Basically it involves inserting a known placeholder in your list model and when you detect the placeholder in the ListCellRenderer you return an instance of 'new JSeparator(JSeparator.HORIZONTAL)'</p>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1325679079,"creation_date":1222434248,"answer_id":139366,"question_id":138793,"body_markdown":"By the time I wrote and tested the code below, you probably got lot of better answers...  \r\nI don&#39;t mind as I enjoyed the experiment/learning (still a bit green on the Swing front).\r\n\r\n[EDIT] Three years later, I am a bit less green, and I took in account the valid remarks of bobndrew. I have no problem with the key navigation that just works (perhaps it was a JVM version issue?). I improved the renderer to show highlight, though. And I use a better demo code. The accepted answer is probably better (more standard), mine is probably more flexible if you want a custom separator...\r\n\r\nThe base idea is to use a renderer for the items of the combo box. For most items, it is a simple JLabel with the text of the item. For the last recent/most used item, I decorate the JLabel with a custom border drawing a line on its bottom.\r\n\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    \r\n    \r\n    @SuppressWarnings(&quot;serial&quot;)\r\n    public class TwoPartsComboBox extends JComboBox\r\n    {\r\n      private int m_lastFirstPartIndex;\r\n    \r\n      public TwoPartsComboBox(String[] itemsFirstPart, String[] itemsSecondPart)\r\n      {\r\n        super(itemsFirstPart);\r\n        m_lastFirstPartIndex = itemsFirstPart.length - 1;\r\n        for (int i = 0; i &lt; itemsSecondPart.length; i++)\r\n        {\r\n          insertItemAt(itemsSecondPart[i], i);\r\n        }\r\n    \r\n        setRenderer(new JLRenderer());\r\n      }\r\n    \r\n      protected class JLRenderer extends JLabel implements ListCellRenderer\r\n      {\r\n        private JLabel m_lastFirstPart;\r\n    \r\n        public JLRenderer()\r\n        {\r\n          m_lastFirstPart = new JLabel();\r\n          m_lastFirstPart.setBorder(new BottomLineBorder());\r\n    //      m_lastFirstPart.setBorder(new BottomLineBorder(10, Color.BLUE));\r\n        }\r\n    \r\n        @Override\r\n        public Component getListCellRendererComponent(\r\n            JList list,\r\n            Object value,\r\n            int index,\r\n            boolean isSelected,\r\n            boolean cellHasFocus)\r\n        {\r\n          if (value == null)\r\n          {\r\n            value = &quot;Select an option&quot;;\r\n          }\r\n          JLabel label = this;\r\n          if (index == m_lastFirstPartIndex)\r\n          {\r\n            label = m_lastFirstPart;\r\n          }\r\n          label.setText(value.toString());\r\n          label.setBackground(isSelected ? list.getSelectionBackground() : list.getBackground());\r\n          label.setForeground(isSelected ? list.getSelectionForeground() : list.getForeground());\r\n          label.setOpaque(true);\r\n    \r\n          return label;\r\n        }\r\n      }\r\n    }\r\n\r\nSeparator class, can be thick, with custom color, etc.\r\n\r\n    import java.awt.*;\r\n    import javax.swing.border.AbstractBorder;\r\n    \r\n    /**\r\n     * Draws a line at the bottom only.\r\n     * Useful for making a separator in combo box, for example.\r\n     */\r\n    @SuppressWarnings(&quot;serial&quot;)\r\n    class BottomLineBorder extends AbstractBorder\r\n    {\r\n      private int m_thickness;\r\n      private Color m_color;\r\n    \r\n      BottomLineBorder()\r\n      {\r\n        this(1, Color.BLACK);\r\n      }\r\n    \r\n      BottomLineBorder(Color color)\r\n      {\r\n        this(1, color);\r\n      }\r\n    \r\n      BottomLineBorder(int thickness, Color color)\r\n      {\r\n        m_thickness = thickness;\r\n        m_color = color;\r\n      }\r\n    \r\n      @Override\r\n      public void paintBorder(Component c, Graphics g,\r\n          int x, int y, int width, int height)\r\n      {\r\n        Graphics copy = g.create();\r\n        if (copy != null)\r\n        {\r\n          try\r\n          {\r\n            copy.translate(x, y);\r\n            copy.setColor(m_color);\r\n            copy.fillRect(0, height - m_thickness, width - 1, height - 1);\r\n          }\r\n          finally\r\n          {\r\n            copy.dispose();\r\n          }\r\n        }\r\n      }\r\n    \r\n      @Override\r\n      public boolean isBorderOpaque()\r\n      {\r\n        return true;\r\n      }\r\n      @Override\r\n      public Insets getBorderInsets(Component c)\r\n      {\r\n        return new Insets(0, 0, m_thickness, 0);\r\n      }\r\n      @Override\r\n      public Insets getBorderInsets(Component c, Insets i)\r\n      {\r\n        i.left = i.top = i.right = 0;\r\n        i.bottom = m_thickness;\r\n        return i;\r\n      }\r\n    }\r\n\r\nTest class:\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    \r\n    \r\n    @SuppressWarnings(&quot;serial&quot;)\r\n    public class TwoPartsComboBoxDemo extends JFrame\r\n    {\r\n      private TwoPartsComboBox m_combo;\r\n    \r\n      public TwoPartsComboBoxDemo()\r\n      {\r\n        Container cont = getContentPane();\r\n        cont.setLayout(new FlowLayout());\r\n    \r\n        cont.add(new JLabel(&quot;Data: &quot;)) ;\r\n    \r\n        String[] itemsRecent = new String[] { &quot;ichi&quot;, &quot;ni&quot;, &quot;san&quot; };\r\n        String[] itemsOther = new String[] { &quot;one&quot;, &quot;two&quot;, &quot;three&quot; };\r\n        m_combo = new TwoPartsComboBox(itemsRecent, itemsOther);\r\n    \r\n        m_combo.setSelectedIndex(-1);\r\n        cont.add(m_combo);\r\n        m_combo.addActionListener(new ActionListener()\r\n        {\r\n          public void actionPerformed(ActionEvent ae)\r\n          {\r\n            String si = (String) m_combo.getSelectedItem();\r\n            System.out.println(si == null ? &quot;No item selected&quot; : si.toString());\r\n          }\r\n        });\r\n    \r\n        // Reference, to check we have similar behavior to standard combo\r\n        JComboBox combo = new JComboBox(itemsRecent);\r\n        cont.add(combo);\r\n      }\r\n    \r\n      /**\r\n       * Start the demo.\r\n       *\r\n       * @param args   the command line arguments\r\n       */\r\n      public static void main(String[] args)\r\n      {\r\n        // turn bold fonts off in metal\r\n        UIManager.put(&quot;swing.boldMetal&quot;, Boolean.FALSE);\r\n    \r\n        SwingUtilities.invokeLater(new Runnable()\r\n        {\r\n          public void run()\r\n          {\r\n            JFrame demoFrame = new TwoPartsComboBoxDemo();\r\n            demoFrame.setTitle(&quot;Test GUI&quot;);\r\n            demoFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            demoFrame.setSize(400, 100);\r\n            demoFrame.setVisible(true);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n","title":"How do I add a separator to a JComboBox in Java?","body":"<p>By the time I wrote and tested the code below, you probably got lot of better answers...<br>\nI don't mind as I enjoyed the experiment/learning (still a bit green on the Swing front).</p>\n\n<p>[EDIT] Three years later, I am a bit less green, and I took in account the valid remarks of bobndrew. I have no problem with the key navigation that just works (perhaps it was a JVM version issue?). I improved the renderer to show highlight, though. And I use a better demo code. The accepted answer is probably better (more standard), mine is probably more flexible if you want a custom separator...</p>\n\n<p>The base idea is to use a renderer for the items of the combo box. For most items, it is a simple JLabel with the text of the item. For the last recent/most used item, I decorate the JLabel with a custom border drawing a line on its bottom.</p>\n\n<pre><code>import java.awt.*;\nimport javax.swing.*;\n\n\n@SuppressWarnings(\"serial\")\npublic class TwoPartsComboBox extends JComboBox\n{\n  private int m_lastFirstPartIndex;\n\n  public TwoPartsComboBox(String[] itemsFirstPart, String[] itemsSecondPart)\n  {\n    super(itemsFirstPart);\n    m_lastFirstPartIndex = itemsFirstPart.length - 1;\n    for (int i = 0; i &lt; itemsSecondPart.length; i++)\n    {\n      insertItemAt(itemsSecondPart[i], i);\n    }\n\n    setRenderer(new JLRenderer());\n  }\n\n  protected class JLRenderer extends JLabel implements ListCellRenderer\n  {\n    private JLabel m_lastFirstPart;\n\n    public JLRenderer()\n    {\n      m_lastFirstPart = new JLabel();\n      m_lastFirstPart.setBorder(new BottomLineBorder());\n//      m_lastFirstPart.setBorder(new BottomLineBorder(10, Color.BLUE));\n    }\n\n    @Override\n    public Component getListCellRendererComponent(\n        JList list,\n        Object value,\n        int index,\n        boolean isSelected,\n        boolean cellHasFocus)\n    {\n      if (value == null)\n      {\n        value = \"Select an option\";\n      }\n      JLabel label = this;\n      if (index == m_lastFirstPartIndex)\n      {\n        label = m_lastFirstPart;\n      }\n      label.setText(value.toString());\n      label.setBackground(isSelected ? list.getSelectionBackground() : list.getBackground());\n      label.setForeground(isSelected ? list.getSelectionForeground() : list.getForeground());\n      label.setOpaque(true);\n\n      return label;\n    }\n  }\n}\n</code></pre>\n\n<p>Separator class, can be thick, with custom color, etc.</p>\n\n<pre><code>import java.awt.*;\nimport javax.swing.border.AbstractBorder;\n\n/**\n * Draws a line at the bottom only.\n * Useful for making a separator in combo box, for example.\n */\n@SuppressWarnings(\"serial\")\nclass BottomLineBorder extends AbstractBorder\n{\n  private int m_thickness;\n  private Color m_color;\n\n  BottomLineBorder()\n  {\n    this(1, Color.BLACK);\n  }\n\n  BottomLineBorder(Color color)\n  {\n    this(1, color);\n  }\n\n  BottomLineBorder(int thickness, Color color)\n  {\n    m_thickness = thickness;\n    m_color = color;\n  }\n\n  @Override\n  public void paintBorder(Component c, Graphics g,\n      int x, int y, int width, int height)\n  {\n    Graphics copy = g.create();\n    if (copy != null)\n    {\n      try\n      {\n        copy.translate(x, y);\n        copy.setColor(m_color);\n        copy.fillRect(0, height - m_thickness, width - 1, height - 1);\n      }\n      finally\n      {\n        copy.dispose();\n      }\n    }\n  }\n\n  @Override\n  public boolean isBorderOpaque()\n  {\n    return true;\n  }\n  @Override\n  public Insets getBorderInsets(Component c)\n  {\n    return new Insets(0, 0, m_thickness, 0);\n  }\n  @Override\n  public Insets getBorderInsets(Component c, Insets i)\n  {\n    i.left = i.top = i.right = 0;\n    i.bottom = m_thickness;\n    return i;\n  }\n}\n</code></pre>\n\n<p>Test class:</p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\n\n@SuppressWarnings(\"serial\")\npublic class TwoPartsComboBoxDemo extends JFrame\n{\n  private TwoPartsComboBox m_combo;\n\n  public TwoPartsComboBoxDemo()\n  {\n    Container cont = getContentPane();\n    cont.setLayout(new FlowLayout());\n\n    cont.add(new JLabel(\"Data: \")) ;\n\n    String[] itemsRecent = new String[] { \"ichi\", \"ni\", \"san\" };\n    String[] itemsOther = new String[] { \"one\", \"two\", \"three\" };\n    m_combo = new TwoPartsComboBox(itemsRecent, itemsOther);\n\n    m_combo.setSelectedIndex(-1);\n    cont.add(m_combo);\n    m_combo.addActionListener(new ActionListener()\n    {\n      public void actionPerformed(ActionEvent ae)\n      {\n        String si = (String) m_combo.getSelectedItem();\n        System.out.println(si == null ? \"No item selected\" : si.toString());\n      }\n    });\n\n    // Reference, to check we have similar behavior to standard combo\n    JComboBox combo = new JComboBox(itemsRecent);\n    cont.add(combo);\n  }\n\n  /**\n   * Start the demo.\n   *\n   * @param args   the command line arguments\n   */\n  public static void main(String[] args)\n  {\n    // turn bold fonts off in metal\n    UIManager.put(\"swing.boldMetal\", Boolean.FALSE);\n\n    SwingUtilities.invokeLater(new Runnable()\n    {\n      public void run()\n      {\n        JFrame demoFrame = new TwoPartsComboBoxDemo();\n        demoFrame.setTitle(\"Test GUI\");\n        demoFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        demoFrame.setSize(400, 100);\n        demoFrame.setVisible(true);\n      }\n    });\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2037900,"reputation":105,"user_id":1819780,"accept_rate":70,"display_name":"user1819780"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677161403,"creation_date":1677161403,"answer_id":75545938,"question_id":138793,"body_markdown":"Try adding this renderer.  Just supply a list of index values that you want the separator to be above.\r\n\r\n     private class SeperatorComboRenderer extends DefaultListCellRenderer\r\n     {\r\n          private final float SEPARATOR_THICKNESS = 1.0f;\r\n          private final float SPACE_TOP = 2.0f;\r\n          private final float SPACE_BOTTOM = 2.0f;\r\n          private final Color SEPARATOR_COLOR = Color.DARK_GRAY;\r\n        \r\n          private final List&lt;Integer&gt; marks;\r\n          private boolean mark;\r\n          private boolean top;\r\n        \r\n          public SeperatorComboRenderer(List&lt;Integer&gt; marks)\r\n          {\r\n               this.marks = marks;\r\n          }\r\n        \r\n          @Override\r\n          public Component getListCellRendererComponent(JList list, Object object, int index, boolean isSelected, boolean hasFocus)\r\n          {\r\n               super.getListCellRendererComponent(list, object, index, isSelected, hasFocus);\r\n\r\n               top = false;\r\n               mark = false;\r\n               marks.forEach((idx) -&gt;\r\n               {\r\n                   if(index - 1 == idx)\r\n                        top = true;\r\n                   if(index == idx)\r\n                        mark = true;\r\n               });\r\n               return this;\r\n          }\r\n        \r\n          @Override\r\n          protected void paintComponent(Graphics g)\r\n          {\r\n               if(mark)\r\n                    g.translate(0, (int)(SEPARATOR_THICKNESS + SPACE_BOTTOM));\r\n               Graphics2D g2 = (Graphics2D)g;\r\n               super.paintComponent(g);\r\n               if(mark)\r\n               {\r\n                    g2.setColor(SEPARATOR_COLOR);\r\n                    g2.setStroke(new BasicStroke(SEPARATOR_THICKNESS));\r\n                    g2.drawLine(0, 0, getWidth(), 0);\r\n               }\r\n          }\r\n        \r\n          @Override\r\n          public Dimension getPreferredSize()\r\n          {\r\n               Dimension pf = super.getPreferredSize();\r\n               double height = pf.getHeight();\r\n               if(top) height += SPACE_TOP;\r\n               else if(mark) height += SEPARATOR_THICKNESS + SPACE_BOTTOM;\r\n               return new Dimension((int)pf.getWidth(), (int)height);\r\n          }\r\n      }","title":"How do I add a separator to a JComboBox in Java?","body":"<p>Try adding this renderer.  Just supply a list of index values that you want the separator to be above.</p>\n<pre><code> private class SeperatorComboRenderer extends DefaultListCellRenderer\n {\n      private final float SEPARATOR_THICKNESS = 1.0f;\n      private final float SPACE_TOP = 2.0f;\n      private final float SPACE_BOTTOM = 2.0f;\n      private final Color SEPARATOR_COLOR = Color.DARK_GRAY;\n    \n      private final List&lt;Integer&gt; marks;\n      private boolean mark;\n      private boolean top;\n    \n      public SeperatorComboRenderer(List&lt;Integer&gt; marks)\n      {\n           this.marks = marks;\n      }\n    \n      @Override\n      public Component getListCellRendererComponent(JList list, Object object, int index, boolean isSelected, boolean hasFocus)\n      {\n           super.getListCellRendererComponent(list, object, index, isSelected, hasFocus);\n\n           top = false;\n           mark = false;\n           marks.forEach((idx) -&gt;\n           {\n               if(index - 1 == idx)\n                    top = true;\n               if(index == idx)\n                    mark = true;\n           });\n           return this;\n      }\n    \n      @Override\n      protected void paintComponent(Graphics g)\n      {\n           if(mark)\n                g.translate(0, (int)(SEPARATOR_THICKNESS + SPACE_BOTTOM));\n           Graphics2D g2 = (Graphics2D)g;\n           super.paintComponent(g);\n           if(mark)\n           {\n                g2.setColor(SEPARATOR_COLOR);\n                g2.setStroke(new BasicStroke(SEPARATOR_THICKNESS));\n                g2.drawLine(0, 0, getWidth(), 0);\n           }\n      }\n    \n      @Override\n      public Dimension getPreferredSize()\n      {\n           Dimension pf = super.getPreferredSize();\n           double height = pf.getHeight();\n           if(top) height += SPACE_TOP;\n           else if(mark) height += SEPARATOR_THICKNESS + SPACE_BOTTOM;\n           return new Dimension((int)pf.getWidth(), (int)height);\n      }\n  }\n</code></pre>\n"}],"owner":{"account_id":2426,"reputation":4470,"user_id":3379,"accept_rate":83,"display_name":"Alfred B. Thordarson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11509,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":138922,"answer_count":4,"score":13,"last_activity_date":1677161403,"creation_date":1222427535,"question_id":138793,"body_markdown":"I have a *JComboBox* and would like to have a separator in the list of elements. How do I do this in Java?\r\n\r\nA sample scenario where this would come in handy is when making a combobox for font-family-selection; similar to the font-family-selection-control in Word and Excel. In this case I would like to show the most-used-fonts at the top, then a separator and finally all font-families below the separator in alphabetical order.\r\n\r\nCan anyone help me with how to do this or is this not possible in Java?\r\n","title":"How do I add a separator to a JComboBox in Java?","body":"<p>I have a <em>JComboBox</em> and would like to have a separator in the list of elements. How do I do this in Java?</p>\n\n<p>A sample scenario where this would come in handy is when making a combobox for font-family-selection; similar to the font-family-selection-control in Word and Excel. In this case I would like to show the most-used-fonts at the top, then a separator and finally all font-families below the separator in alphabetical order.</p>\n\n<p>Can anyone help me with how to do this or is this not possible in Java?</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1677159700,"post_id":75545566,"comment_id":133285422,"body_markdown":"Do you have any chance to grab the individual values before they are being converted to a String? Otherwise this sounds like a usecase for a regular expression with capture groups.","body":"Do you have any chance to grab the individual values before they are being converted to a String? Otherwise this sounds like a usecase for a regular expression with capture groups."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1677160910,"post_id":75545566,"comment_id":133285851,"body_markdown":"You&#39;d make this a lot easier if you had `ComboBoxModel&lt;Product&gt;`. You could then just grab the price directly out of the selected item.","body":"You&#39;d make this a lot easier if you had <code>ComboBoxModel&lt;Product&gt;</code>. You could then just grab the price directly out of the selected item."},{"owner":{"account_id":27860570,"reputation":1,"user_id":21273211,"display_name":"Chris Butler"},"score":0,"creation_date":1677161188,"post_id":75545566,"comment_id":133285948,"body_markdown":"The items list is pretty small so I could delcare global variables for the individual prices, that&#39;ll only work because there are only 4 items in the list though. Right now the items in the combo box is both the item and the price together.","body":"The items list is pretty small so I could delcare global variables for the individual prices, that&#39;ll only work because there are only 4 items in the list though. Right now the items in the combo box is both the item and the price together."}],"answers":[{"tags":[],"owner":{"account_id":5932321,"reputation":46,"user_id":7968292,"display_name":"Jvo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677161399,"creation_date":1677161399,"answer_id":75545936,"question_id":75545566,"body_markdown":"Make sure not to parse the text, use the calculation based on a datamodel. So based on the selected products and amounts you will get a model like:\r\n\r\n    List&lt;Order&gt; orders = new ArrayList&lt;Order&gt;();\r\n    orders.add(order1);\r\n    \r\n    public class Order  {\r\n        Product product;\r\n        int amount;\r\n        constructor/ getter/setters ommitted\r\n    }\r\n\r\nThen create the summery by foreach over the orders. and create the total amount by doing the same\r\n\r\n    String summary = &quot;&quot;;\r\n    int total = 0;\r\n    for (Order order : orders) {\r\n          summary += order.getProduct().getDescription() + &quot;\\n&quot;;\r\n          total += (order.getAmount() * order.getProduct().getPrice());\r\n    }\r\n    summary += &quot;Total price &quot; + total;\r\nput summary in your textArea","title":"Get currency values from a string","body":"<p>Make sure not to parse the text, use the calculation based on a datamodel. So based on the selected products and amounts you will get a model like:</p>\n<pre><code>List&lt;Order&gt; orders = new ArrayList&lt;Order&gt;();\norders.add(order1);\n\npublic class Order  {\n    Product product;\n    int amount;\n    constructor/ getter/setters ommitted\n}\n</code></pre>\n<p>Then create the summery by foreach over the orders. and create the total amount by doing the same</p>\n<pre><code>String summary = &quot;&quot;;\nint total = 0;\nfor (Order order : orders) {\n      summary += order.getProduct().getDescription() + &quot;\\n&quot;;\n      total += (order.getAmount() * order.getProduct().getPrice());\n}\nsummary += &quot;Total price &quot; + total;\n</code></pre>\n<p>put summary in your textArea</p>\n"}],"owner":{"account_id":27860570,"reputation":1,"user_id":21273211,"display_name":"Chris Butler"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677161399,"creation_date":1677159331,"question_id":75545566,"body_markdown":"I&#39;m coding a pretty basic app with java in netbeans for an assessment. It&#39;s meant to be an online shop that adds the user&#39;s purchases to a text area as a summary. 2 combo boxes let the user choose the product and the quantity so an example summary shows as &quot;Apples &#163;1.25 x 3.&quot; \r\nI&#39;ve got the coding for that done but now I need to parse the price and the quantity from the string, multiplying them and then adding any other orders together so that a label can display the order total. This is where I&#39;m struggling.\r\n\r\nHere&#39;s the string I&#39;m working with:\r\n\r\nOrderSummary_txt.append((String)Items_cmbo.getSelectedItem() + &quot; x &quot; + (String)Quantity_cmbo.getSelectedItem() + &quot;\\n&quot;);\r\n\r\nI think I need to use indexOf(&quot;&#163;&quot;) to get started but after that I get lost. Any help would be appreciated.","title":"Get currency values from a string","body":"<p>I'm coding a pretty basic app with java in netbeans for an assessment. It's meant to be an online shop that adds the user's purchases to a text area as a summary. 2 combo boxes let the user choose the product and the quantity so an example summary shows as &quot;Apples £1.25 x 3.&quot;\nI've got the coding for that done but now I need to parse the price and the quantity from the string, multiplying them and then adding any other orders together so that a label can display the order total. This is where I'm struggling.</p>\n<p>Here's the string I'm working with:</p>\n<p>OrderSummary_txt.append((String)Items_cmbo.getSelectedItem() + &quot; x &quot; + (String)Quantity_cmbo.getSelectedItem() + &quot;\\n&quot;);</p>\n<p>I think I need to use indexOf(&quot;£&quot;) to get started but after that I get lost. Any help would be appreciated.</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1677161693,"post_id":75544429,"comment_id":133286135,"body_markdown":"Not switching over to jpa or whatever is understandable.  But using a pool is a small change that should increase responsiveness and resilency even if you don&#39;t have a large number of users","body":"Not switching over to jpa or whatever is understandable.  But using a pool is a small change that should increase responsiveness and resilency even if you don&#39;t have a large number of users"}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677161393,"creation_date":1677160920,"answer_id":75545832,"question_id":75544429,"body_markdown":"Whether to use a `DataSource` or `DriverManager.getConnection` is not directly related to security. So, yes, you can continue to use `DriverManager.getConnection`, it is just not generally considered a good idea to use in web applications for reasons of scalability.\r\n\r\nHowever, you&#39;ll miss out on benefits like:\r\n1. connection pooling (note though that not all `DataSource` implementations provide connection pooling), \r\n2. simplifying connection configuration (though that depends on how and where you&#39;re allocating them now); in some case this *could* improve security,\r\n\r\nand other potential benefits - depending on the actual data source used - like:\r\n\r\n3. identifying and reclaiming connections leaks, \r\n4. limiting the maximum number of connections, etc.\r\n\r\nIf your current code already centralizes connection configuration, then the first step could simply be injecting (or retrieving with JNDI) a data source (e.g. one configured in Tomcat), and replacing `DriverManager.getConnection(...)` with `dataSource.getConnection()`.","title":"Using JDBC DriverManager.getConnection for a web application","body":"<p>Whether to use a <code>DataSource</code> or <code>DriverManager.getConnection</code> is not directly related to security. So, yes, you can continue to use <code>DriverManager.getConnection</code>, it is just not generally considered a good idea to use in web applications for reasons of scalability.</p>\n<p>However, you'll miss out on benefits like:</p>\n<ol>\n<li>connection pooling (note though that not all <code>DataSource</code> implementations provide connection pooling),</li>\n<li>simplifying connection configuration (though that depends on how and where you're allocating them now); in some case this <em>could</em> improve security,</li>\n</ol>\n<p>and other potential benefits - depending on the actual data source used - like:</p>\n<ol start=\"3\">\n<li>identifying and reclaiming connections leaks,</li>\n<li>limiting the maximum number of connections, etc.</li>\n</ol>\n<p>If your current code already centralizes connection configuration, then the first step could simply be injecting (or retrieving with JNDI) a data source (e.g. one configured in Tomcat), and replacing <code>DriverManager.getConnection(...)</code> with <code>dataSource.getConnection()</code>.</p>\n"}],"owner":{"account_id":5056080,"reputation":9,"user_id":4059276,"display_name":"dsreddy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677161393,"creation_date":1677152938,"question_id":75544429,"body_markdown":"Our team is planning to migrate to a web application instead of the desktop application. One thing though is for the first round of updates, we are not planning to make any changes to the back-end DB calls. It will mostly be the screen changes that get migrated to React or Angular and deploy it in Tomcat server.\r\n\r\nIn our desktop application we have used DriverManger.getConnection() class to get the connection from DB.\r\n\r\nWe plan to not touch the DB interface yet or use modern approaches like Hibernate / JPA or JDBC Templates and just stick with raw JDBC code for now which will be wrapped using Spring boot/Rest API calls.\r\n\r\nWe have a very small user base, like around 50 people and my lead is not very much interested in using connection pooling and stuff yet though which comes with DataSource interface.\r\n\r\nIs it is safe to continue using DriverManager.getConnection() to get connections from DB when you deploy your war file in multiple Tomcat instances? It seems to work though and is doable (tried with single Tomcat instance), other than the fact that we don&#39;t use features like connection pooling, etc. \r\n\r\n","title":"Using JDBC DriverManager.getConnection for a web application","body":"<p>Our team is planning to migrate to a web application instead of the desktop application. One thing though is for the first round of updates, we are not planning to make any changes to the back-end DB calls. It will mostly be the screen changes that get migrated to React or Angular and deploy it in Tomcat server.</p>\n<p>In our desktop application we have used DriverManger.getConnection() class to get the connection from DB.</p>\n<p>We plan to not touch the DB interface yet or use modern approaches like Hibernate / JPA or JDBC Templates and just stick with raw JDBC code for now which will be wrapped using Spring boot/Rest API calls.</p>\n<p>We have a very small user base, like around 50 people and my lead is not very much interested in using connection pooling and stuff yet though which comes with DataSource interface.</p>\n<p>Is it is safe to continue using DriverManager.getConnection() to get connections from DB when you deploy your war file in multiple Tomcat instances? It seems to work though and is doable (tried with single Tomcat instance), other than the fact that we don't use features like connection pooling, etc.</p>\n"},{"tags":["java","opensearch"],"owner":{"account_id":26820801,"reputation":1,"user_id":20410171,"display_name":"user20410171"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677161176,"creation_date":1677161153,"question_id":75545881,"body_markdown":"I was wondering how is this aggregation search query can be translated to performed by the Opensearch java client:\r\n\r\n```\r\n\r\n{\r\n  &quot;size&quot;: 0,\r\n  &quot;aggs&quot;: {\r\n    &quot;annotation_key_distribution&quot;: {\r\n      &quot;nested&quot;: {\r\n        &quot;path&quot;: &quot;annotations&quot;\r\n      },\r\n      &quot;aggs&quot;: {\r\n        &quot;key_distribution&quot;: {\r\n          &quot;terms&quot;: {\r\n            &quot;field&quot;: &quot;annotations.key&quot;,\r\n            &quot;size&quot;: 10\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\nThe docs don&#39;t have any information. \r\nI&#39;ve tried doing it using the Aggregation and TermsAggregation and SearchRequest objects but have not succeeded yet.","title":"Opensearch java client - aggregations query","body":"<p>I was wondering how is this aggregation search query can be translated to performed by the Opensearch java client:</p>\n<pre><code>\n{\n  &quot;size&quot;: 0,\n  &quot;aggs&quot;: {\n    &quot;annotation_key_distribution&quot;: {\n      &quot;nested&quot;: {\n        &quot;path&quot;: &quot;annotations&quot;\n      },\n      &quot;aggs&quot;: {\n        &quot;key_distribution&quot;: {\n          &quot;terms&quot;: {\n            &quot;field&quot;: &quot;annotations.key&quot;,\n            &quot;size&quot;: 10\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>The docs don't have any information.\nI've tried doing it using the Aggregation and TermsAggregation and SearchRequest objects but have not succeeded yet.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1677135424,"post_id":75541479,"comment_id":133278810,"body_markdown":"What happens if you use `@Qualifer` insteade of `@Resource`? As basically `@Autowired` and `@Resource` are mutally exclusive.","body":"What happens if you use <code>@Qualifer</code> insteade of <code>@Resource</code>? As basically <code>@Autowired</code> and <code>@Resource</code> are mutally exclusive."},{"owner":{"account_id":17515555,"reputation":11,"user_id":18154094,"display_name":"sai chaitanya"},"score":0,"creation_date":1677136011,"post_id":75541479,"comment_id":133278942,"body_markdown":"Unsatisfied dependency expressed through field &#39;expertiseService&#39;: Error creating bean with name &#39;IExpertizeImpl&#39;: Unsatisfied dependency expressed through field &#39;Experts&#39;: No qualifying bean of type &#39;java.util.HashMap&lt;java.lang.String, java.lang.Long&gt;&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(&quot;Experts&quot;)}: it not working","body":"Unsatisfied dependency expressed through field &#39;expertiseService&#39;: Error creating bean with name &#39;IExpertizeImpl&#39;: Unsatisfied dependency expressed through field &#39;Experts&#39;: No qualifying bean of type &#39;java.util.HashMap&lt;java.lang.String, java.lang.Long&gt;&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(req&zwnj;&#8203;uired=true), @org.springframework.beans.factory.annotation.Qualifier(&quot;Exp&zwnj;&#8203;erts&quot;)}: it not working"},{"owner":{"account_id":1771189,"reputation":32923,"user_id":1615903,"display_name":"1615903"},"score":3,"creation_date":1677136221,"post_id":75541479,"comment_id":133278987,"body_markdown":"You are not initializing `expertises` and `languages` maps anywhere.","body":"You are not initializing <code>expertises</code> and <code>languages</code> maps anywhere."}],"owner":{"account_id":17515555,"reputation":11,"user_id":18154094,"display_name":"sai chaitanya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677161111,"creation_date":1677135279,"question_id":75541479,"body_markdown":"#### MAIN CLASS\r\n```java\r\npublic class HealthcareMsDoctorsApplication {\r\n    private HashMap&lt;String, Long&gt; expertises;\r\n    private HashMap&lt;String, Long&gt; languages;\r\n    public static void main(String[] args) {\r\n\t    SpringApplication.run(HealthcareMsDoctorsApplication.class, args);\r\n    }\r\n    \r\n    @Bean(name = &quot;Experts&quot;)\r\n    public HashMap&lt;String, Long&gt; Experts() {\r\n        return this.expertises;\r\n    }\r\n\r\n    @Bean(name = &quot;Languages&quot;)\r\n    public HashMap&lt;String, Long&gt; Languages() {\r\n\t    return this.languages;\r\n    }\r\n}\r\n```\r\n\r\n#### Service Layer Class\r\n```java\r\npublic class IExpertizeImpl implements IExpertize {\r\n\r\n\t@Autowired\r\n    @Resource(name=&quot;Experts&quot;)\r\n\tprivate HashMap&lt;String, Long&gt; Experts;\r\n}\r\n```\r\n\r\n#### Issue\r\n```\r\nUnsatisfied dependency expressed through field &#39;expertiseService&#39;: Error creating bean with name &#39;IExpertizeImpl&#39;: Unsatisfied dependency expressed through field &#39;Experts&#39;: No qualifying bean of type &#39;java.util.HashMap&lt;java.lang.String, java.lang.Long&gt;&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n```\r\n\r\nI have Created two maps in the Main class Marked with `@Bean` and autowiring them in the respective Service classes. But its not working !!\r\n\r\nThanks in advance","title":"Error Creating bean , Injection of resources failed","body":"<h4>MAIN CLASS</h4>\n<pre class=\"lang-java prettyprint-override\"><code>public class HealthcareMsDoctorsApplication {\n    private HashMap&lt;String, Long&gt; expertises;\n    private HashMap&lt;String, Long&gt; languages;\n    public static void main(String[] args) {\n        SpringApplication.run(HealthcareMsDoctorsApplication.class, args);\n    }\n    \n    @Bean(name = &quot;Experts&quot;)\n    public HashMap&lt;String, Long&gt; Experts() {\n        return this.expertises;\n    }\n\n    @Bean(name = &quot;Languages&quot;)\n    public HashMap&lt;String, Long&gt; Languages() {\n        return this.languages;\n    }\n}\n</code></pre>\n<h4>Service Layer Class</h4>\n<pre class=\"lang-java prettyprint-override\"><code>public class IExpertizeImpl implements IExpertize {\n\n    @Autowired\n    @Resource(name=&quot;Experts&quot;)\n    private HashMap&lt;String, Long&gt; Experts;\n}\n</code></pre>\n<h4>Issue</h4>\n<pre><code>Unsatisfied dependency expressed through field 'expertiseService': Error creating bean with name 'IExpertizeImpl': Unsatisfied dependency expressed through field 'Experts': No qualifying bean of type 'java.util.HashMap&lt;java.lang.String, java.lang.Long&gt;' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n</code></pre>\n<p>I have Created two maps in the Main class Marked with <code>@Bean</code> and autowiring them in the respective Service classes. But its not working !!</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","apache-beam","snappy"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1677164996,"post_id":75541923,"comment_id":133287374,"body_markdown":"For this kind of error, you need to provide your dependency configuration(pom.xml / build.gradle).","body":"For this kind of error, you need to provide your dependency configuration(pom.xml / build.gradle)."},{"owner":{"account_id":20734814,"reputation":31,"user_id":15225884,"display_name":"neha"},"score":0,"creation_date":1677247657,"post_id":75541923,"comment_id":133305549,"body_markdown":"Hi Samabcde, the dependency is already added in the pom.xml.","body":"Hi Samabcde, the dependency is already added in the pom.xml."},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1677247858,"post_id":75541923,"comment_id":133305615,"body_markdown":"I mean you edit your post to include dependencies section of your pom.xml,\nbecause your libs may not be compatible to each other.","body":"I mean you edit your post to include dependencies section of your pom.xml, because your libs may not be compatible to each other."}],"answers":[{"tags":[],"owner":{"account_id":1874246,"reputation":1390,"user_id":1695821,"display_name":"Bruno Volpato"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677161098,"creation_date":1677161098,"answer_id":75545872,"question_id":75541923,"body_markdown":"Which version of Beam you are using?\r\n\r\nIf you check Beam 2.45.0 [here](https://github.com/apache/beam/blob/release-2.45.0/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy#L731), it uses Snappy 1.1.8.4. \r\n\r\nLikely that if you&#39;re bringing Snappy 1.1.9.0 and missing that method, they haven&#39;t made it backwards compatible.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: &#39;int org.xerial.snappy.SnappyNative.maxCompressedLength(int)&#39;","body":"<p>Which version of Beam you are using?</p>\n<p>If you check Beam 2.45.0 <a href=\"https://github.com/apache/beam/blob/release-2.45.0/buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy#L731\" rel=\"nofollow noreferrer\">here</a>, it uses Snappy 1.1.8.4.</p>\n<p>Likely that if you're bringing Snappy 1.1.9.0 and missing that method, they haven't made it backwards compatible.</p>\n"}],"owner":{"account_id":20734814,"reputation":31,"user_id":15225884,"display_name":"neha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677161098,"creation_date":1677138686,"question_id":75541923,"body_markdown":"When I am trying to run my application I am getting below error:-\r\n    \r\n    Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: &#39;int org.xerial.snappy.SnappyNative.maxCompressedLength(int)&#39;\r\n        at org.xerial.snappy.SnappyNative.maxCompressedLength(Native Method)\r\n        at org.xerial.snappy.Snappy.maxCompressedLength(Snappy.java:381)\r\n        at org.xerial.snappy.SnappyOutputStream.&lt;init&gt;(SnappyOutputStream.java:99)\r\n        at org.xerial.snappy.SnappyOutputStream.&lt;init&gt;(SnappyOutputStream.java:91)\r\n        at org.xerial.snappy.SnappyOutputStream.&lt;init&gt;(SnappyOutputStream.java:81)\r\n        at org.apache.beam.sdk.util.SerializableUtils.serializeToByteArray(SerializableUtils.java:54)\r\n        at org.apache.beam.sdk.util.SerializableUtils.clone(SerializableUtils.java:117)\r\n    \r\n    I am using snappy-java-1.1.9.0 jar.\r\n    \r\n    Could anyone please suggest how to fix it?\r\n\r\n","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: &#39;int org.xerial.snappy.SnappyNative.maxCompressedLength(int)&#39;","body":"<p>When I am trying to run my application I am getting below error:-</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: 'int org.xerial.snappy.SnappyNative.maxCompressedLength(int)'\n    at org.xerial.snappy.SnappyNative.maxCompressedLength(Native Method)\n    at org.xerial.snappy.Snappy.maxCompressedLength(Snappy.java:381)\n    at org.xerial.snappy.SnappyOutputStream.&lt;init&gt;(SnappyOutputStream.java:99)\n    at org.xerial.snappy.SnappyOutputStream.&lt;init&gt;(SnappyOutputStream.java:91)\n    at org.xerial.snappy.SnappyOutputStream.&lt;init&gt;(SnappyOutputStream.java:81)\n    at org.apache.beam.sdk.util.SerializableUtils.serializeToByteArray(SerializableUtils.java:54)\n    at org.apache.beam.sdk.util.SerializableUtils.clone(SerializableUtils.java:117)\n\nI am using snappy-java-1.1.9.0 jar.\n\nCould anyone please suggest how to fix it?\n</code></pre>\n"},{"tags":["java","maven","module","maven-3"],"comments":[{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1482938010,"post_id":41364697,"comment_id":69930938,"body_markdown":"Should `-Dversion={1.0}` have been `-Dversion=1.0`?","body":"Should <code>-Dversion={1.0}</code> have been <code>-Dversion=1.0</code>?"},{"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"score":0,"creation_date":1482939538,"post_id":41364697,"comment_id":69931761,"body_markdown":"didn&#39;t resolve the problem. same issue","body":"didn&#39;t resolve the problem. same issue"},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1482943801,"post_id":41364697,"comment_id":69934099,"body_markdown":"does the url specified include the `jar`? did you deploy to the remote from wherr you are trying to access?","body":"does the url specified include the <code>jar</code>? did you deploy to the remote from wherr you are trying to access?"},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1482943848,"post_id":41364697,"comment_id":69934120,"body_markdown":"A similar thread  - http://stackoverflow.com/questions/14013644/hosting-a-maven-repository-on-github","body":"A similar thread  - <a href=\"http://stackoverflow.com/questions/14013644/hosting-a-maven-repository-on-github\" title=\"hosting a maven repository on github\">stackoverflow.com/questions/14013644/&hellip;</a>"},{"owner":{"account_id":2993414,"reputation":12019,"user_id":2540471,"display_name":"Robert Scholte"},"score":0,"creation_date":1482944806,"post_id":41364697,"comment_id":69934579,"body_markdown":"Just wondering: why not do `cd /Users/me/Documents/Projects/x-datamodel/` followed by a `mvn install`? Also this looks weird: `/Users/me/Documents/Projects/x-datamodel/target/classes/x-datamodel.jar`. I would not expect the jar under `classes`, but under `target`. And finally, confirm you can open `/Users/me/Documents/Projects/x-datamodel/target/(classes/)x-datamodel.jar`","body":"Just wondering: why not do <code>cd &#47;Users&#47;me&#47;Documents&#47;Projects&#47;x-datamodel&#47;</code> followed by a <code>mvn install</code>? Also this looks weird: <code>&#47;Users&#47;me&#47;Documents&#47;Projects&#47;x-datamodel&#47;target&#47;classes&#47;x-da&zwnj;&#8203;tamodel.jar</code>. I would not expect the jar under <code>classes</code>, but under <code>target</code>. And finally, confirm you can open <code>&#47;Users&#47;me&#47;Documents&#47;Projects&#47;x-datamodel&#47;target&#47;(classes&#47;)x-&zwnj;&#8203;datamodel.jar</code>"},{"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"score":0,"creation_date":1482945659,"post_id":41364697,"comment_id":69934997,"body_markdown":"@RobertScholte i decided to build the x-datamodel.jar in this folder. i can do it in a different folder like target. I don&#39;t this, that this is the problem.","body":"@RobertScholte i decided to build the x-datamodel.jar in this folder. i can do it in a different folder like target. I don&#39;t this, that this is the problem."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1482946105,"post_id":41364697,"comment_id":69935212,"body_markdown":"@emoleumassi the question was not about you having access to the repository but being able to deploy to the url and then specifying the repository in the pom.xml.","body":"@emoleumassi the question was not about you having access to the repository but being able to deploy to the url and then specifying the repository in the pom.xml."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":1,"creation_date":1482946191,"post_id":41364697,"comment_id":69935250,"body_markdown":"Answer is groupId `com.x.datamodel` ensures `com/x/model/` as folder structure which is followed by `artifactId-version.jar` file name","body":"Answer is groupId <code>com.x.datamodel</code> ensures <code>com&#47;x&#47;model&#47;</code> as folder structure which is followed by <code>artifactId-version.jar</code> file name"}],"answers":[{"tags":[],"owner":{"account_id":1196398,"reputation":6672,"user_id":1168041,"accept_rate":72,"display_name":"leeyuiwah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1482937876,"creation_date":1482937876,"answer_id":41364763,"question_id":41364697,"body_markdown":"I tend to think the file is corrupted. Try deleting it and downloading  it again. ","title":"mvn COMPILATION ERROR : error reading jar error in opening zip file","body":"<p>I tend to think the file is corrupted. Try deleting it and downloading  it again. </p>\n"},{"tags":[],"owner":{"account_id":11204140,"reputation":387,"user_id":8220268,"display_name":"Abhilash Ramteke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677160955,"creation_date":1677160955,"answer_id":75545836,"question_id":41364697,"body_markdown":"Try removing the below lines \r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    &lt;/plugin&gt;\r\n\r\nWith :\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n    &lt;/plugin&gt;","title":"mvn COMPILATION ERROR : error reading jar error in opening zip file","body":"<p>Try removing the below lines</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>With :</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1677160955,"creation_date":1482937682,"question_id":41364697,"body_markdown":"i have a x-module with those properties:\r\n\r\nmodule-name: x-datamodel\r\n\r\nthis is a part of the pom.xml \r\n\r\n    &lt;groupId&gt;com.x.datamodel&lt;/groupId&gt;\r\n    &lt;artifactId&gt;x&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\ni have install the project in a local repository with this command line:\r\n\r\n    mvn install:install-file -Dfile=/Users/me/Documents/Projects/x-datamodel/target/classes/x-datamodel.jar -DgroupId=com.x.datamodel -DgeneratePom=true -DlocalRepositoryPath=/Users/me/Documents/Projects/me-repository  -DcreateChecksum=true -DartifactId=x -Dversion={1.0} -Dpackaging=jar\r\n\r\nand added the project in bitbucket. \r\n\r\nI try to integrate the module x in another project y.\r\n\r\nhere a part of the y&#39;s pom.xml  \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.x.datamodel&lt;/groupId&gt;\r\n        &lt;artifactId&gt;x&lt;/artifactId&gt;\r\n        &lt;version&gt;${x.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;me-repository&lt;/id&gt;\r\n            &lt;url&gt;https://bitbucket.org/me/me-repository/src/master&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n\r\ni can import some classes of the module x in the project y, but when i build the y project i get this error:\r\n\r\n    [ERROR] COMPILATION ERROR : \r\n    [INFO] -------------------------------------------------------------\r\n    [ERROR] error reading /Users/me/.m2/repository/com/x/datamodel/x/1.0/x-1.0.jar; error in opening zip file\r\n    [ERROR] error reading /Users/me/.m2/repository/com/x/datamodel/x/1.0/x-1.0.jar; error in opening zip file\r\n    [ERROR] /Users/me/Documents/Projects/y/src/main/java/com/y/server/serviceImpl/UserServiceImpl.java:[3,32] package com.x.datamodel.model does not exist\r\n    [ERROR] /Users/me/Documents/Projects/y/src/main/java/com/y/server/serviceImpl/UserServiceImpl.java:[18,12] cannot find symbol\r\n      symbol:   class User\r\n      location: class com.y.server.serviceImpl.UserServiceImpl\r\n    [ERROR] /Users/me/Documents/Projects/y/src/main/java/com/y/server/security/CustomUserDetailsService.java:[3,32] package com.x.datamodel.model does not exist\r\n    [INFO] 16 errors \r\n    [INFO] -------------------------------------------------------------\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 01:56 min\r\n    [INFO] Finished at: 2016-12-28T15:51:05+01:00\r\n    [INFO] Final Memory: 29M/209M\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project y: Compilation failure: Compilation failure:\r\n    [ERROR] error reading /Users/me/.m2/repository/com/x/datamodel/x/1.0/x-1.0.jar; error in opening zip file\r\n    [ERROR] error reading /Users/me/.m2/repository/com/x/datamodel/x/1.0/x-1.0.jar; error in opening zip file\r\n    [ERROR] /Users/me/Documents/Projects/y/src/main/java/com/y/server/serviceImpl/UserServiceImpl.java:[3,32] package com.x.datamodel.model does not exist\r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n\r\n\r\nafter installing the repository i have the library into this path:\r\n\r\n    .m2/repository/com/x/datamodel/x/1.0/x-1.0.jar\r\n\r\nwhy not:\r\n\r\n    .m2/repository/com/x-datamodel/x/1.0/x-1.0.jar\r\n\r\n ","title":"mvn COMPILATION ERROR : error reading jar error in opening zip file","body":"<p>i have a x-module with those properties:</p>\n\n<p>module-name: x-datamodel</p>\n\n<p>this is a part of the pom.xml </p>\n\n<pre><code>&lt;groupId&gt;com.x.datamodel&lt;/groupId&gt;\n&lt;artifactId&gt;x&lt;/artifactId&gt;\n&lt;version&gt;1.0&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n</code></pre>\n\n<p>i have install the project in a local repository with this command line:</p>\n\n<pre><code>mvn install:install-file -Dfile=/Users/me/Documents/Projects/x-datamodel/target/classes/x-datamodel.jar -DgroupId=com.x.datamodel -DgeneratePom=true -DlocalRepositoryPath=/Users/me/Documents/Projects/me-repository  -DcreateChecksum=true -DartifactId=x -Dversion={1.0} -Dpackaging=jar\n</code></pre>\n\n<p>and added the project in bitbucket. </p>\n\n<p>I try to integrate the module x in another project y.</p>\n\n<p>here a part of the y's pom.xml  </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.x.datamodel&lt;/groupId&gt;\n    &lt;artifactId&gt;x&lt;/artifactId&gt;\n    &lt;version&gt;${x.version}&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;me-repository&lt;/id&gt;\n        &lt;url&gt;https://bitbucket.org/me/me-repository/src/master&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>\n\n<p>i can import some classes of the module x in the project y, but when i build the y project i get this error:</p>\n\n<pre><code>[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] error reading /Users/me/.m2/repository/com/x/datamodel/x/1.0/x-1.0.jar; error in opening zip file\n[ERROR] error reading /Users/me/.m2/repository/com/x/datamodel/x/1.0/x-1.0.jar; error in opening zip file\n[ERROR] /Users/me/Documents/Projects/y/src/main/java/com/y/server/serviceImpl/UserServiceImpl.java:[3,32] package com.x.datamodel.model does not exist\n[ERROR] /Users/me/Documents/Projects/y/src/main/java/com/y/server/serviceImpl/UserServiceImpl.java:[18,12] cannot find symbol\n  symbol:   class User\n  location: class com.y.server.serviceImpl.UserServiceImpl\n[ERROR] /Users/me/Documents/Projects/y/src/main/java/com/y/server/security/CustomUserDetailsService.java:[3,32] package com.x.datamodel.model does not exist\n[INFO] 16 errors \n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 01:56 min\n[INFO] Finished at: 2016-12-28T15:51:05+01:00\n[INFO] Final Memory: 29M/209M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project y: Compilation failure: Compilation failure:\n[ERROR] error reading /Users/me/.m2/repository/com/x/datamodel/x/1.0/x-1.0.jar; error in opening zip file\n[ERROR] error reading /Users/me/.m2/repository/com/x/datamodel/x/1.0/x-1.0.jar; error in opening zip file\n[ERROR] /Users/me/Documents/Projects/y/src/main/java/com/y/server/serviceImpl/UserServiceImpl.java:[3,32] package com.x.datamodel.model does not exist\n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n\n<p>after installing the repository i have the library into this path:</p>\n\n<pre><code>.m2/repository/com/x/datamodel/x/1.0/x-1.0.jar\n</code></pre>\n\n<p>why not:</p>\n\n<pre><code>.m2/repository/com/x-datamodel/x/1.0/x-1.0.jar\n</code></pre>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1677112276,"post_id":75538860,"comment_id":133275793,"body_markdown":"By default, Kafka uses `auto.offset.reset=latest`, so will not see existing data","body":"By default, Kafka uses <code>auto.offset.reset=latest</code>, so will not see existing data"},{"owner":{"account_id":27855117,"reputation":3,"user_id":21268792,"display_name":"ante_meridiem"},"score":0,"creation_date":1677113339,"post_id":75538860,"comment_id":133275947,"body_markdown":"Sorry, I may have been unclear above, I&#39;ll edit. That is what I want I&#39;m sure. I am trying to capture if there is an Idle event primarily after having received and processed a record from the consumer an initial time.","body":"Sorry, I may have been unclear above, I&#39;ll edit. That is what I want I&#39;m sure. I am trying to capture if there is an Idle event primarily after having received and processed a record from the consumer an initial time."},{"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1677160498,"post_id":75538860,"comment_id":133285691,"body_markdown":"`new DefaultKafkaConsumerFactory` \n\n`new ConcurrentMessageListenerContainer`\n\nInfrastructure beans (such as the consumer and container factories) must be declared as `@Bean`s so that Spring can wire in all the plumbing necessary (such as the event publisher) for everything to work properly.","body":"<code>new DefaultKafkaConsumerFactory</code>   <code>new ConcurrentMessageListenerContainer</code>  Infrastructure beans (such as the consumer and container factories) must be declared as <code>@Bean</code>s so that Spring can wire in all the plumbing necessary (such as the event publisher) for everything to work properly."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677160492,"creation_date":1677160492,"answer_id":75545749,"question_id":75538860,"body_markdown":"`new DefaultKafkaConsumerFactory` \r\n\r\n`new ConcurrentMessageListenerContainer`\r\n\r\nInfrastructure beans (such as the consumer and container/container factory) must be declared as `@Bean`s so that Spring can wire in all the plumbing necessary (such as the event publisher) for everything to work properly.","title":"Spring Kafka Event Listener not seeing any Application Events","body":"<p><code>new DefaultKafkaConsumerFactory</code></p>\n<p><code>new ConcurrentMessageListenerContainer</code></p>\n<p>Infrastructure beans (such as the consumer and container/container factory) must be declared as <code>@Bean</code>s so that Spring can wire in all the plumbing necessary (such as the event publisher) for everything to work properly.</p>\n"}],"owner":{"account_id":27855117,"reputation":3,"user_id":21268792,"display_name":"ante_meridiem"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75545749,"answer_count":1,"score":0,"last_activity_date":1677160492,"creation_date":1677105555,"question_id":75538860,"body_markdown":"I am trying to implement an event handle where some processing is done on a ListenerContainerIdleEvent. However, the container either never seems to publish the event or it&#39;s never captured. I am only interested in idle events after there has been an initial record consumed. I am able to consumer messages on the topic perfectly fine.\r\nI have also referenced this https://stackoverflow.com/questions/63957429/use-listener-container-for-heartbeats-in-spring-kafka\r\n I have the following:\r\n\r\nUsing Spring-kafka 2.8.5\r\n```\r\npublic AbstractConsumer(){\r\n      \r\n     consumerFactory = new DefaultKafkaConsumerFactory(consumerConfigMap, new ErrorHandling Deserializer&lt;&gt;(keyDeserializer), new ErrorHandlingDeserializer&lt;valueDeserializer&gt;);\r\n\r\npublic void subscribe(String topic, MessageListener&lt;K,V&gt; listener){\r\n    ContainerProperties properties = new ContainerProperties(topic);\r\n    properties.setMessageListener(listener);\r\n    properties.setGroupId(configuration.getGroupId());\r\n    properties.setIdleEventInterval(3000L);\r\n    ConcurrentMessageListenerContainer&lt;K,V&gt; container = new ConcurrentMessageListenerContainer&lt;K,V&gt;(consumerFactorty, properties);\r\n    container.start()\r\n}\r\n```\r\n\r\n\r\nAnd the MessageListener:\r\n\r\n```\r\n@Component\r\npublic class StatusConsumer extends AbstractConsumer implements MessageListener&lt;K,V&gt;{\r\n\r\npublic void setSubscribe(){\r\n     subscribe(topic, this);\r\n\r\n@Override\r\npublic void onMessage(ConsumerRecord){\r\n    do stuff..\r\n}\r\n\r\n@EventListener\r\npublic void listen(ListenerContainerIdleEvent event){\r\n      Log something..\r\n}\r\n```\r\n\r\n\r\n\r\nI&#39;ve tried implementing ApplicationListener instead of using the annotation without success. I have tried listening for other events to see if something else would get captured. Looking at the debug logs it just continually prints `KafkaMessageListenerContaiainer:Received 0 records Commit List : {}` for all scenarios. The setup seems to be correct looking at the documentaion and other examples but I am unsure what I am missing. Any help would be appreciated.","title":"Spring Kafka Event Listener not seeing any Application Events","body":"<p>I am trying to implement an event handle where some processing is done on a ListenerContainerIdleEvent. However, the container either never seems to publish the event or it's never captured. I am only interested in idle events after there has been an initial record consumed. I am able to consumer messages on the topic perfectly fine.\nI have also referenced this <a href=\"https://stackoverflow.com/questions/63957429/use-listener-container-for-heartbeats-in-spring-kafka\">Use listener container for heartbeats in spring kafka</a>\nI have the following:</p>\n<p>Using Spring-kafka 2.8.5</p>\n<pre><code>public AbstractConsumer(){\n      \n     consumerFactory = new DefaultKafkaConsumerFactory(consumerConfigMap, new ErrorHandling Deserializer&lt;&gt;(keyDeserializer), new ErrorHandlingDeserializer&lt;valueDeserializer&gt;);\n\npublic void subscribe(String topic, MessageListener&lt;K,V&gt; listener){\n    ContainerProperties properties = new ContainerProperties(topic);\n    properties.setMessageListener(listener);\n    properties.setGroupId(configuration.getGroupId());\n    properties.setIdleEventInterval(3000L);\n    ConcurrentMessageListenerContainer&lt;K,V&gt; container = new ConcurrentMessageListenerContainer&lt;K,V&gt;(consumerFactorty, properties);\n    container.start()\n}\n</code></pre>\n<p>And the MessageListener:</p>\n<pre><code>@Component\npublic class StatusConsumer extends AbstractConsumer implements MessageListener&lt;K,V&gt;{\n\npublic void setSubscribe(){\n     subscribe(topic, this);\n\n@Override\npublic void onMessage(ConsumerRecord){\n    do stuff..\n}\n\n@EventListener\npublic void listen(ListenerContainerIdleEvent event){\n      Log something..\n}\n</code></pre>\n<p>I've tried implementing ApplicationListener instead of using the annotation without success. I have tried listening for other events to see if something else would get captured. Looking at the debug logs it just continually prints <code>KafkaMessageListenerContaiainer:Received 0 records Commit List : {}</code> for all scenarios. The setup seems to be correct looking at the documentaion and other examples but I am unsure what I am missing. Any help would be appreciated.</p>\n"},{"tags":["java","spring-boot","spring-boot-test"],"comments":[{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":0,"creation_date":1677111345,"post_id":75538593,"comment_id":133275624,"body_markdown":"Have you define `HandlerExceptionResolver` as a bean somewhere in your code?","body":"Have you define <code>HandlerExceptionResolver</code> as a bean somewhere in your code?"},{"owner":{"account_id":25227059,"reputation":45,"user_id":19062771,"display_name":"amongosus"},"score":0,"creation_date":1677142501,"post_id":75538593,"comment_id":133280412,"body_markdown":"@HarryCoder nope. Only reference is there, inside the filter.","body":"@HarryCoder nope. Only reference is there, inside the filter."}],"answers":[{"tags":[],"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677160220,"creation_date":1677160220,"answer_id":75545707,"question_id":75538593,"body_markdown":"`HandlerExceptionResolver` is an interface and here you have not provided any implementation as a bean to help `Spring` manage it for you. You can&#39;t instantiate an interface at first.\r\n\r\nYou have 3 options:\r\n\r\n 1. Use an implementation of `HandlerExceptionResolver` and configure it as a bean in a configuration file:\r\n\r\n        @Bean\r\n        public HandlerExceptionResolver createDefaultHandlerExceptionResolver() {\r\n            return new DefaultHandlerExceptionResolver();\r\n        }\r\n\r\n 2. Define your own implementation, by adding an annotation like `@Component` to tell `Spring` that it is a bean to be included into the Context:\r\n\r\n        @Component\r\n        class RestResponseStatusExceptionResolver implements HandlerExceptionResolver {\r\n            ...\r\n        }\r\n\r\n 3. You can use a `@ControllerAdvice` or a `@RestControllerAdvice`\r\n\r\nTake a look on those links for more details: [here][1] and [here][2]\r\n\r\n\r\n  [1]: https://farzinpashaeee.medium.com/spring-boot-exception-handling-handlerexceptionresolver-11c75ffdf5d6\r\n  [2]: https://www.baeldung.com/exception-handling-for-rest-with-spring","title":"No qualifying bean of type HandlerExceptionResolver available error in SpringBoot Test","body":"<p><code>HandlerExceptionResolver</code> is an interface and here you have not provided any implementation as a bean to help <code>Spring</code> manage it for you. You can't instantiate an interface at first.</p>\n<p>You have 3 options:</p>\n<ol>\n<li><p>Use an implementation of <code>HandlerExceptionResolver</code> and configure it as a bean in a configuration file:</p>\n<pre><code>@Bean\npublic HandlerExceptionResolver createDefaultHandlerExceptionResolver() {\n    return new DefaultHandlerExceptionResolver();\n}\n</code></pre>\n</li>\n<li><p>Define your own implementation, by adding an annotation like <code>@Component</code> to tell <code>Spring</code> that it is a bean to be included into the Context:</p>\n<pre><code>@Component\nclass RestResponseStatusExceptionResolver implements HandlerExceptionResolver {\n    ...\n}\n</code></pre>\n</li>\n<li><p>You can use a <code>@ControllerAdvice</code> or a <code>@RestControllerAdvice</code></p>\n</li>\n</ol>\n<p>Take a look on those links for more details: <a href=\"https://farzinpashaeee.medium.com/spring-boot-exception-handling-handlerexceptionresolver-11c75ffdf5d6\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://www.baeldung.com/exception-handling-for-rest-with-spring\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":25227059,"reputation":45,"user_id":19062771,"display_name":"amongosus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":797,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677160220,"creation_date":1677103409,"question_id":75538593,"body_markdown":"I&#39;ve been trying to create a test enviroment for my project. As newbie, I&#39;ve found out that - in testing - debugging is a pretty convoluted process, especially if you have a moderately large project to begin with.\r\n\r\nInside my test folder I have a resource folder with an import.sql and an application-test.yaml:\r\n\r\n    spring:\r\n      jpa:\r\n        hibernate:\r\n          ddl-auto: create\r\n        show-sql: true\r\n        properties:\r\n          hibernate:\r\n            dialect: org.hibernate.dialect.H2Dialect\r\n     \r\n      datasource:\r\n        driver-class-name: org.h2.Driver\r\n        url: jdbc:h2:mem:nameOfTheDB;Mode=Oracle\r\n        username: sa\r\n        password:\r\n      main:\r\n        allow-bean-definition-overriding: true\r\n        allow-circular-references: true\r\n      sql:\r\n        init:\r\n          platform: h2\r\n      h2:\r\n        console:\r\n          enabled: true\r\n    server:\r\n      port: 8090\r\n\r\nI have a simple ApplicationTest where I just load the context:\r\n\r\n    @SpringBootTest\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    class ApplicationTest {\r\n    \r\n        @Test\r\n        void contextLoads() {\r\n        }\r\n    }\r\n\r\n\r\nand a RepositoryTest class to test the persistence layer.\r\n\r\n    @DataJpaTest\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    public class RepositoryTest {\r\n    \r\n   \r\n       @Autowired\r\n        private UserRepository underTest;\r\n        @AfterEach\r\n        void tearDown() {\r\n            underTest.deleteAll();\r\n        }\r\n    \r\n        @Test\r\n        void shoudBePresent() {\r\n            // given\r\n            User user = new User();\r\n            user.setId(10L);\r\n            user.setFirstName(&quot;first&quot;);\r\n            user.setLastName(&quot;last&quot;);;\r\n            underTest.save(user);\r\n    \r\n            // when\r\n            Optional&lt;User&gt; expected = underTest.findById(10L);\r\n    \r\n            // then\r\n            assertThat(expected.isPresent()).isTrue();\r\n        }\r\n    }\r\n\r\nApplicationTest&#39;s tests run smoothly but once I try to run RepositoryTest I get this error:\r\n\r\n    org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.web.servlet.HandlerExceptionResolver&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Qualifier(&quot;handlerExceptionResolver&quot;)}\r\n\r\nWhat does it mean? \r\nI have this resolver inside a requestFilter in my config folder:\r\n\r\n    @Component\r\n    public class RequestFilter extends OncePerRequestFilter {\r\n    \r\n        private final UserService userService;\r\n        private final HandlerExceptionResolver resolver;\r\n    \r\n    \r\n    \r\n    \r\n        public RequestFilter(UserService userService,\r\n                                @Qualifier(&quot;handlerExceptionResolver&quot;) HandlerExceptionResolver resolver) {\r\n            this.userService = userService;\r\n            this.resolver = resolver;\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n            try {\r\n                [code called every request...]\r\n            }\r\n            catch (Exception e) {\r\n                resolver.resolveException(request, response, null, e);\r\n            }\r\n        }\r\n    }\r\nI really can&#39;t understand why this block of code affects my persistance layer, doesn&#39;t doFilterInternal gets called every time there is a request to a given endpoint?\r\nI can&#39;t really figure out why it gets called inside my unit test. \r\n\r\nI understand I might be missing crutial infos but bear in mind I&#39;m pretty new to testing with SpringBoot (I&#39;ve been trying to solve this particular issue for about 2-3 days) so any educational resource about the whole SpringBoot testing architecture is much appreciated. I&#39;d like to learn how to test the proper way, right now this feels like black magic.","title":"No qualifying bean of type HandlerExceptionResolver available error in SpringBoot Test","body":"<p>I've been trying to create a test enviroment for my project. As newbie, I've found out that - in testing - debugging is a pretty convoluted process, especially if you have a moderately large project to begin with.</p>\n<p>Inside my test folder I have a resource folder with an import.sql and an application-test.yaml:</p>\n<pre><code>spring:\n  jpa:\n    hibernate:\n      ddl-auto: create\n    show-sql: true\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.H2Dialect\n \n  datasource:\n    driver-class-name: org.h2.Driver\n    url: jdbc:h2:mem:nameOfTheDB;Mode=Oracle\n    username: sa\n    password:\n  main:\n    allow-bean-definition-overriding: true\n    allow-circular-references: true\n  sql:\n    init:\n      platform: h2\n  h2:\n    console:\n      enabled: true\nserver:\n  port: 8090\n</code></pre>\n<p>I have a simple ApplicationTest where I just load the context:</p>\n<pre><code>@SpringBootTest\n@ActiveProfiles(&quot;test&quot;)\nclass ApplicationTest {\n\n    @Test\n    void contextLoads() {\n    }\n}\n</code></pre>\n<p>and a RepositoryTest class to test the persistence layer.</p>\n<pre><code>@DataJpaTest\n@ActiveProfiles(&quot;test&quot;)\npublic class RepositoryTest {\n\n\n   @Autowired\n    private UserRepository underTest;\n    @AfterEach\n    void tearDown() {\n        underTest.deleteAll();\n    }\n\n    @Test\n    void shoudBePresent() {\n        // given\n        User user = new User();\n        user.setId(10L);\n        user.setFirstName(&quot;first&quot;);\n        user.setLastName(&quot;last&quot;);;\n        underTest.save(user);\n\n        // when\n        Optional&lt;User&gt; expected = underTest.findById(10L);\n\n        // then\n        assertThat(expected.isPresent()).isTrue();\n    }\n}\n</code></pre>\n<p>ApplicationTest's tests run smoothly but once I try to run RepositoryTest I get this error:</p>\n<pre><code>org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.web.servlet.HandlerExceptionResolver' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Qualifier(&quot;handlerExceptionResolver&quot;)}\n</code></pre>\n<p>What does it mean?\nI have this resolver inside a requestFilter in my config folder:</p>\n<pre><code>@Component\npublic class RequestFilter extends OncePerRequestFilter {\n\n    private final UserService userService;\n    private final HandlerExceptionResolver resolver;\n\n\n\n\n    public RequestFilter(UserService userService,\n                            @Qualifier(&quot;handlerExceptionResolver&quot;) HandlerExceptionResolver resolver) {\n        this.userService = userService;\n        this.resolver = resolver;\n    }\n\n\n    @Override\n    public void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        try {\n            [code called every request...]\n        }\n        catch (Exception e) {\n            resolver.resolveException(request, response, null, e);\n        }\n    }\n}\n</code></pre>\n<p>I really can't understand why this block of code affects my persistance layer, doesn't doFilterInternal gets called every time there is a request to a given endpoint?\nI can't really figure out why it gets called inside my unit test.</p>\n<p>I understand I might be missing crutial infos but bear in mind I'm pretty new to testing with SpringBoot (I've been trying to solve this particular issue for about 2-3 days) so any educational resource about the whole SpringBoot testing architecture is much appreciated. I'd like to learn how to test the proper way, right now this feels like black magic.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver","vaadin","vaadin23"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677160182,"creation_date":1677160182,"answer_id":75545702,"question_id":75545552,"body_markdown":"Add the `&lt;version&gt;` tag for **selenium-java** , you will be good to go:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n        &lt;version&gt;4.8.0&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"How to solve &quot;java.lang.NoSuchFieldError: Companion&quot;","body":"<p>Add the <code>&lt;version&gt;</code> tag for <strong>selenium-java</strong> , you will be good to go:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.8.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":25435838,"reputation":316,"user_id":19239577,"display_name":"greenButMellow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":450,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75545702,"answer_count":1,"score":0,"last_activity_date":1677160182,"creation_date":1677159216,"question_id":75545552,"body_markdown":"I&#39;m following this [guide][1] to test Vaadin app using Selenium.\r\n\r\nThe following line:\r\n\r\n```java \r\nvar driver = new ChromeDriver();\r\n```\r\nproduces the following error:\r\n&gt; java.lang.NoSuchFieldError: Companion\r\n\r\n\r\nIn my `pom.xml` I have \r\n\r\n```xml\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.3.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://vaadin.com/docs/latest/testing/selenium","title":"How to solve &quot;java.lang.NoSuchFieldError: Companion&quot;","body":"<p>I'm following this <a href=\"https://vaadin.com/docs/latest/testing/selenium\" rel=\"nofollow noreferrer\">guide</a> to test Vaadin app using Selenium.</p>\n<p>The following line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var driver = new ChromeDriver();\n</code></pre>\n<p>produces the following error:</p>\n<blockquote>\n<p>java.lang.NoSuchFieldError: Companion</p>\n</blockquote>\n<p>In my <code>pom.xml</code> I have</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n            &lt;version&gt;5.3.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","jooq","jooq-codegen-maven","jooq-codegen","jooq-sbt-plugin"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677158786,"creation_date":1677158786,"answer_id":75545484,"question_id":75544998,"body_markdown":"The [`SQLDialect.ORACLE`][1] is available in the jOOQ Professional Edition and jOOQ Enterprise Edition, as listed here:\r\nhttps://www.jooq.org/download/#databases\r\n\r\nIn order to use those editions, you have to switch your Maven `groupId` from:\r\n\r\n```xml\r\n&lt;groupId&gt;org.jooq&lt;/groupId&gt;\r\n```\r\n\r\nTo this one, for example:\r\n\r\n```xml\r\n&lt;groupId&gt;org.jooq.pro&lt;/groupId&gt;\r\n```\r\n\r\nAvailable groupIds for the commercial editions include the following, [as documented in the various Maven examples in the manual][2]:\r\n\r\n```xml\r\n&lt;!-- Use org.jooq                for the Open Source Edition\r\n         org.jooq.pro            for commercial editions with Java 17 support, \r\n         org.jooq.pro-java-11    for commercial editions with Java 11 support,\r\n         org.jooq.pro-java-8     for commercial editions with Java 8 support,\r\n         org.jooq.trial          for the free trial edition with Java 17 support, \r\n         org.jooq.trial-java-11  for the free trial edition with Java 11 support, \r\n         org.jooq.trial-java-8   for the free trial edition with Java 8 support \r\n         \r\n     Note: Only the Open Source Edition is hosted on Maven Central. \r\n           Import the others manually from your distribution --&gt;\r\n```\r\n\r\n\r\n  [1]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/SQLDialect.html#ORACLE\r\n  [2]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-maven/","title":"How to add Oracle dialect to DSLContext","body":"<p>The <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/SQLDialect.html#ORACLE\" rel=\"nofollow noreferrer\"><code>SQLDialect.ORACLE</code></a> is available in the jOOQ Professional Edition and jOOQ Enterprise Edition, as listed here:\n<a href=\"https://www.jooq.org/download/#databases\" rel=\"nofollow noreferrer\">https://www.jooq.org/download/#databases</a></p>\n<p>In order to use those editions, you have to switch your Maven <code>groupId</code> from:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;groupId&gt;org.jooq&lt;/groupId&gt;\n</code></pre>\n<p>To this one, for example:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;groupId&gt;org.jooq.pro&lt;/groupId&gt;\n</code></pre>\n<p>Available groupIds for the commercial editions include the following, <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-maven/\" rel=\"nofollow noreferrer\">as documented in the various Maven examples in the manual</a>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Use org.jooq                for the Open Source Edition\n         org.jooq.pro            for commercial editions with Java 17 support, \n         org.jooq.pro-java-11    for commercial editions with Java 11 support,\n         org.jooq.pro-java-8     for commercial editions with Java 8 support,\n         org.jooq.trial          for the free trial edition with Java 17 support, \n         org.jooq.trial-java-11  for the free trial edition with Java 11 support, \n         org.jooq.trial-java-8   for the free trial edition with Java 8 support \n         \n     Note: Only the Open Source Edition is hosted on Maven Central. \n           Import the others manually from your distribution --&gt;\n</code></pre>\n"}],"owner":{"account_id":1471077,"reputation":5601,"user_id":1382647,"accept_rate":43,"display_name":"fatherazrael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677159948,"creation_date":1677156151,"question_id":75544998,"body_markdown":"I&#39;m not able to get SQLDialect.Oracle in the following version of jOOQ:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jooq&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jooq&lt;/artifactId&gt;\r\n    &lt;version&gt;3.17.8&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jooq&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jooq-meta-extensions&lt;/artifactId&gt;\r\n    &lt;version&gt;3.17.8&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```java\r\nConnection connection = entityManager.unwrap(Connection.class);\r\nDSLContext context = DSL.using(connection, SQLDialect.Oracle);\r\n```\r\n\r\nHow can I add the Oracle dialect into my code? (Oracle is not found at all, but documentation insists that various version of Oracle are present.\r\n\r\nIf it is not available in Maven versions, then is there a way to use it in above version?","title":"How to add Oracle dialect to DSLContext","body":"<p>I'm not able to get SQLDialect.Oracle in the following version of jOOQ:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jooq&lt;/groupId&gt;\n    &lt;artifactId&gt;jooq&lt;/artifactId&gt;\n    &lt;version&gt;3.17.8&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jooq&lt;/groupId&gt;\n    &lt;artifactId&gt;jooq-meta-extensions&lt;/artifactId&gt;\n    &lt;version&gt;3.17.8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Connection connection = entityManager.unwrap(Connection.class);\nDSLContext context = DSL.using(connection, SQLDialect.Oracle);\n</code></pre>\n<p>How can I add the Oracle dialect into my code? (Oracle is not found at all, but documentation insists that various version of Oracle are present.</p>\n<p>If it is not available in Maven versions, then is there a way to use it in above version?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"score":0,"creation_date":1677159052,"post_id":75545492,"comment_id":133285223,"body_markdown":"change file name from &quot;test.txt&quot; to &quot;src/main/resources/test.txt&quot; and check, I assumed your file is at &quot;src/main/resources&quot;","body":"change file name from &quot;test.txt&quot; to &quot;src/main/resources/test.txt&quot; and check, I assumed your file is at &quot;src/main/resources&quot;"},{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":0,"creation_date":1677159839,"post_id":75545492,"comment_id":133285458,"body_markdown":"@dkb - nope, if the resource was at src/main/resources/test.txt, above code would be perfectly valid. Never refer to `src/` at runtime in a mavenized project.","body":"@dkb - nope, if the resource was at src/main/resources/test.txt, above code would be perfectly valid. Never refer to <code>src&#47;</code> at runtime in a mavenized project."}],"answers":[{"tags":[],"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677159889,"creation_date":1677159889,"answer_id":75545667,"question_id":75545492,"body_markdown":"Because as soon as you package the application as a jar, the file you are trying to load becomes a file stored inside a zip file rather than a file that exists somewhere on your filesystem. That is a fundamental difference in the runtime environment and one of the classic gotchas when it comes to working with files stored on the classpath.\r\n\r\nUse [getClass().getClassLoader().getResourceAsStream()](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)) instead, that always works as long as the file is stored in the same module where the class is stored (in the same jar, in this case). \r\n\r\nScanner has a [constructor](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Scanner.html#%3Cinit%3E(java.io.InputStream)) which accepts an InputStream. So something like:\r\n\r\n    try(InputStream is = getClass().getClassLoader().getResourceAsStream(&quot;test.txt&quot;)) {\r\n\r\n        Scanner scanner = new Scanner(is);\r\n        // do things with stuff here\r\n    }\r\n\r\n","title":"Maven project reads file in IDE but not from JAR","body":"<p>Because as soon as you package the application as a jar, the file you are trying to load becomes a file stored inside a zip file rather than a file that exists somewhere on your filesystem. That is a fundamental difference in the runtime environment and one of the classic gotchas when it comes to working with files stored on the classpath.</p>\n<p>Use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)\" rel=\"nofollow noreferrer\">getClass().getClassLoader().getResourceAsStream()</a> instead, that always works as long as the file is stored in the same module where the class is stored (in the same jar, in this case).</p>\n<p>Scanner has a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Scanner.html#%3Cinit%3E(java.io.InputStream)\" rel=\"nofollow noreferrer\">constructor</a> which accepts an InputStream. So something like:</p>\n<pre><code>try(InputStream is = getClass().getClassLoader().getResourceAsStream(&quot;test.txt&quot;)) {\n\n    Scanner scanner = new Scanner(is);\n    // do things with stuff here\n}\n</code></pre>\n"}],"owner":{"account_id":27860530,"reputation":3,"user_id":21273180,"display_name":"Valloyd"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75545667,"answer_count":1,"score":0,"last_activity_date":1677159889,"creation_date":1677158822,"question_id":75545492,"body_markdown":"I write a method to use a Scanner object to read from a file (the file name is &quot;test.txt&quot; and it is in the resources folder) and return a String.\r\nWhen I run the project in the IDE it works fine and the String is returned successfully, but when I compile it to a JAR and run it from the terminal it returns null instead, as if it&#39;s not reading the file properly.\r\nWhat should happen is that it should return the string.\r\n\r\nI&#39;ve only encountered this issue on Maven projects.\r\nHave not tested it without Maven, but it looks like the same issue occurs whether I compile with Maven or IntelliJ\r\n\r\n\r\n```\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.Objects;\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Main mainTest = new Main();\r\n        System.out.println(mainTest.test());\r\n    }\r\n\r\n    private String test() {\r\n        File file = new File(Objects.requireNonNull(getClass().getClassLoader().getResource(&quot;test.txt&quot;)).getPath());\r\n\r\n        try (\r\n                Scanner scanner = new Scanner(file)\r\n        ) {\r\n            String line = &quot;&quot;;\r\n\r\n            while (scanner.hasNextLine()) {\r\n                line = scanner.nextLine();\r\n            }\r\n            return line;\r\n        } catch (FileNotFoundException e) {\r\n            e.getMessage();\r\n        }\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n\r\nI have no clue why this is happening.","title":"Maven project reads file in IDE but not from JAR","body":"<p>I write a method to use a Scanner object to read from a file (the file name is &quot;test.txt&quot; and it is in the resources folder) and return a String.\nWhen I run the project in the IDE it works fine and the String is returned successfully, but when I compile it to a JAR and run it from the terminal it returns null instead, as if it's not reading the file properly.\nWhat should happen is that it should return the string.</p>\n<p>I've only encountered this issue on Maven projects.\nHave not tested it without Maven, but it looks like the same issue occurs whether I compile with Maven or IntelliJ</p>\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Objects;\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Main mainTest = new Main();\n        System.out.println(mainTest.test());\n    }\n\n    private String test() {\n        File file = new File(Objects.requireNonNull(getClass().getClassLoader().getResource(&quot;test.txt&quot;)).getPath());\n\n        try (\n                Scanner scanner = new Scanner(file)\n        ) {\n            String line = &quot;&quot;;\n\n            while (scanner.hasNextLine()) {\n                line = scanner.nextLine();\n            }\n            return line;\n        } catch (FileNotFoundException e) {\n            e.getMessage();\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>I have no clue why this is happening.</p>\n"},{"tags":["java","design-patterns","object-oriented-analysis"],"comments":[{"owner":{"account_id":15567931,"reputation":5,"user_id":11231156,"display_name":"Anna Setiva"},"score":0,"creation_date":1677158979,"post_id":75545440,"comment_id":133285197,"body_markdown":"why -1? Is this not a valid question for this website? Or I didn&#39;t phrase it correctly - missing something? Thanks!","body":"why -1? Is this not a valid question for this website? Or I didn&#39;t phrase it correctly - missing something? Thanks!"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1677159992,"post_id":75545440,"comment_id":133285505,"body_markdown":"I think the -1 was left because the question is too broad. Without knowing what the methods do, it&#39;s hard to answer your question. Maybe try to be more specific?","body":"I think the -1 was left because the question is too broad. Without knowing what the methods do, it&#39;s hard to answer your question. Maybe try to be more specific?"}],"answers":[{"tags":[],"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677159860,"creation_date":1677159860,"answer_id":75545662,"question_id":75545440,"body_markdown":"While this doesn’t show any intentional effort and feels a bit like you’re asking us to do homework for you. That being said, with the example given you can just use a null check to determine if optional methods should be called, such as:\r\n\r\n    public class Example {\r\n        Draft draft;\r\n        void saveTemporaryData() {\r\n            //TODO logic\r\n            if(draft != null) addDataFromDraft();\r\n            addDataFromExternalSources();\r\n        }\r\n\r\n        void addDataFromDraft() {\r\n            //TODO logic\r\n        }\r\n\r\n        void addDataFromExternalSources() {\r\n            //TODO logic\r\n        }\r\n\r\n    }","title":"Can you advise on how to structure the problem proposed?","body":"<p>While this doesn’t show any intentional effort and feels a bit like you’re asking us to do homework for you. That being said, with the example given you can just use a null check to determine if optional methods should be called, such as:</p>\n<pre><code>public class Example {\n    Draft draft;\n    void saveTemporaryData() {\n        //TODO logic\n        if(draft != null) addDataFromDraft();\n        addDataFromExternalSources();\n    }\n\n    void addDataFromDraft() {\n        //TODO logic\n    }\n\n    void addDataFromExternalSources() {\n        //TODO logic\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":15567931,"reputation":5,"user_id":11231156,"display_name":"Anna Setiva"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75545662,"answer_count":1,"score":-1,"last_activity_date":1677159860,"creation_date":1677158571,"question_id":75545440,"body_markdown":"I&#39;m re-working an old procedural algorithm in object oriented programming, and I&#39;m trying to design the different classes/objects.\r\n\r\nThe algorithm is executing a couple of functions/methods.\r\nThe output of each method will be used as an input the following one.  \r\nBased on some initial condition, some functions can be skipped.\r\n\r\nSo let&#39;s say we have the following use cases:\r\n\r\n| FIRST                       | SECOND                      | THIRD                        | FOURTH                       |   |\r\n|-----------------------------|-----------------------------|------------------------------|------------------------------|---|\r\n| initializeVariables()       | initializeVariables()       | initializeVariables()        | initializeVariables()        |   |\r\n| saveTemporaryData()         | saveTemporaryData()         | saveTemporaryData()          | saveTemporaryData()          |   |\r\n| addDataFromExternalSource() | addDataFromDraft()          | addDataFromDraft()           | addDataFromPreviousVersion() |   |\r\n| sortData()                  | addDataFromExternalSource() | addDataFromPreviousVersion() | addDataFromExternalSource()  |   |\r\n| prepareOutput()             | sortData()                  | addDataFromExternalSource()  | sortData()                   |   |\r\n|                             | prepareOutput()             | sortData()                   | prepareOutput()              |   |\r\n|                             |                             | prepareOutput()           \r\n\r\nI started thinking to create an abstract class that contains the implementation of the methods that are common to all the use cases, and let subclasses implement the methods not in the abstract class.\r\nAnd then have an &quot;execute&quot; method in each implementation that calls the different methods one by one based on the use case.\r\nBut I&#39;m not satisfied of this approach, there&#39;s still repetition.\r\n\r\nDo you have any suggestions?\r\nThanks in advance!\r\n\r\n\r\n","title":"Can you advise on how to structure the problem proposed?","body":"<p>I'm re-working an old procedural algorithm in object oriented programming, and I'm trying to design the different classes/objects.</p>\n<p>The algorithm is executing a couple of functions/methods.\nThe output of each method will be used as an input the following one.<br />\nBased on some initial condition, some functions can be skipped.</p>\n<p>So let's say we have the following use cases:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>FIRST</th>\n<th>SECOND</th>\n<th>THIRD</th>\n<th>FOURTH</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>initializeVariables()</td>\n<td>initializeVariables()</td>\n<td>initializeVariables()</td>\n<td>initializeVariables()</td>\n<td></td>\n</tr>\n<tr>\n<td>saveTemporaryData()</td>\n<td>saveTemporaryData()</td>\n<td>saveTemporaryData()</td>\n<td>saveTemporaryData()</td>\n<td></td>\n</tr>\n<tr>\n<td>addDataFromExternalSource()</td>\n<td>addDataFromDraft()</td>\n<td>addDataFromDraft()</td>\n<td>addDataFromPreviousVersion()</td>\n<td></td>\n</tr>\n<tr>\n<td>sortData()</td>\n<td>addDataFromExternalSource()</td>\n<td>addDataFromPreviousVersion()</td>\n<td>addDataFromExternalSource()</td>\n<td></td>\n</tr>\n<tr>\n<td>prepareOutput()</td>\n<td>sortData()</td>\n<td>addDataFromExternalSource()</td>\n<td>sortData()</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>prepareOutput()</td>\n<td>sortData()</td>\n<td>prepareOutput()</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>prepareOutput()</td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I started thinking to create an abstract class that contains the implementation of the methods that are common to all the use cases, and let subclasses implement the methods not in the abstract class.\nAnd then have an &quot;execute&quot; method in each implementation that calls the different methods one by one based on the use case.\nBut I'm not satisfied of this approach, there's still repetition.</p>\n<p>Do you have any suggestions?\nThanks in advance!</p>\n"},{"tags":["java","multithreading","threadpool","apache-kafka-streams","quarkus"],"comments":[{"owner":{"account_id":6384814,"reputation":60263,"user_id":4953079,"display_name":"Matthias J. Sax"},"score":2,"creation_date":1677126397,"post_id":75518617,"comment_id":133277495,"body_markdown":"I don&#39;t know quarkus, but maybe they just don&#39;t list all configs but still support them? Did you just try to set it?","body":"I don&#39;t know quarkus, but maybe they just don&#39;t list all configs but still support them? Did you just try to set it?"},{"owner":{"account_id":16700070,"reputation":51,"user_id":12070075,"display_name":"Suraj Gudimetla"},"score":1,"creation_date":1677159313,"post_id":75518617,"comment_id":133285305,"body_markdown":"@MatthiasJ.Sax yes it seems that we can use the kafka streams properties itself if it has the prefix kafka-streams, so now the property is kafka-streams.num.stream.threads and then it is working","body":"@MatthiasJ.Sax yes it seems that we can use the kafka streams properties itself if it has the prefix kafka-streams, so now the property is kafka-streams.num.stream.threads and then it is working"},{"owner":{"account_id":6384814,"reputation":60263,"user_id":4953079,"display_name":"Matthias J. Sax"},"score":0,"creation_date":1677180399,"post_id":75518617,"comment_id":133292222,"body_markdown":"Nice! Glad it just works. :)","body":"Nice! Glad it just works. :)"}],"answers":[{"tags":[],"owner":{"account_id":16700070,"reputation":51,"user_id":12070075,"display_name":"Suraj Gudimetla"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677159704,"creation_date":1677159704,"answer_id":75545636,"question_id":75518617,"body_markdown":"It seems that we can use kafka streams properties in Quarkus if we add a prefix **kafka-streams**, so after adding the property as `kafka-streams.num.stream.threads=2` in application properties of the application then I am able to see logs with two different threads for the streams.","title":"Increase stream threads for Quarkus Kafka Streams","body":"<p>It seems that we can use kafka streams properties in Quarkus if we add a prefix <strong>kafka-streams</strong>, so after adding the property as <code>kafka-streams.num.stream.threads=2</code> in application properties of the application then I am able to see logs with two different threads for the streams.</p>\n"}],"owner":{"account_id":16700070,"reputation":51,"user_id":12070075,"display_name":"Suraj Gudimetla"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75545636,"answer_count":1,"score":0,"last_activity_date":1677159704,"creation_date":1676972175,"question_id":75518617,"body_markdown":"I have written a Quarkus application(version 2.16) with kafka streams in it. There was lag in consumer group count for my application due to huge number of messages in kafka topic. So after checking the logs of the application, I noticed that the streams is using only one thread for processing whole of streams\r\n\r\n```\r\n2023-02-21 01:49:53,933 INFO  [com.git.sample.Example] (streams-app-1cdf32a0-9f2f-4f71-80d0-2c5964a06d47-StreamThread-1) The...\r\n```\r\n\r\nThis 1cdf32a0-9f2f-4f71-80d0-2c5964a06d47-StreamThread-1 stream id is same for all the logs related to streams. This case is seen for all the multiple instances of the application. But shouldn&#39;t quarkus assign more threads for streams if it has huge load.\r\n\r\nIn Kafka streams official documentation there is option to set the number of threads for the application (num.stream.threads)\r\n\r\n[![kafka stream thread application property](https://i.stack.imgur.com/0x20z.png)](https://i.stack.imgur.com/0x20z.png)\r\n\r\nbut in Quarkus kafka streams guide ([https://quarkus.io/guides/kafka-streams](https://www.stackoverflow.com/)) , I did not find any such application property to increase threads.\r\n\r\nI have searched at other places for this but did not find any.\r\n\r\nDo anyone know how to increase threads for kafka streams in Quarkus ?\r\n\r\nThe application is reading from multiple kafka topics but only one stream thread is being used for all operations in streams. Expected is that multiple threads will be used for streams.","title":"Increase stream threads for Quarkus Kafka Streams","body":"<p>I have written a Quarkus application(version 2.16) with kafka streams in it. There was lag in consumer group count for my application due to huge number of messages in kafka topic. So after checking the logs of the application, I noticed that the streams is using only one thread for processing whole of streams</p>\n<pre><code>2023-02-21 01:49:53,933 INFO  [com.git.sample.Example] (streams-app-1cdf32a0-9f2f-4f71-80d0-2c5964a06d47-StreamThread-1) The...\n</code></pre>\n<p>This 1cdf32a0-9f2f-4f71-80d0-2c5964a06d47-StreamThread-1 stream id is same for all the logs related to streams. This case is seen for all the multiple instances of the application. But shouldn't quarkus assign more threads for streams if it has huge load.</p>\n<p>In Kafka streams official documentation there is option to set the number of threads for the application (num.stream.threads)</p>\n<p><a href=\"https://i.stack.imgur.com/0x20z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0x20z.png\" alt=\"kafka stream thread application property\" /></a></p>\n<p>but in Quarkus kafka streams guide (<a href=\"https://www.stackoverflow.com/\">https://quarkus.io/guides/kafka-streams</a>) , I did not find any such application property to increase threads.</p>\n<p>I have searched at other places for this but did not find any.</p>\n<p>Do anyone know how to increase threads for kafka streams in Quarkus ?</p>\n<p>The application is reading from multiple kafka topics but only one stream thread is being used for all operations in streams. Expected is that multiple threads will be used for streams.</p>\n"},{"tags":["java","android","barcode-scanner"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1677199475,"post_id":75545610,"comment_id":133296054,"body_markdown":"Without a manufacturer I can only guess that there is a SDK which would allow for scanning and obtaining the lsaer barcode data. I would inspect the device for a manufacturer and check the manufacturer site for any developer SDK.","body":"Without a manufacturer I can only guess that there is a SDK which would allow for scanning and obtaining the lsaer barcode data. I would inspect the device for a manufacturer and check the manufacturer site for any developer SDK."}],"owner":{"account_id":8734894,"reputation":678,"user_id":6533853,"accept_rate":0,"display_name":"Ninja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677159596,"creation_date":1677159596,"question_id":75545610,"body_markdown":"I am using below device to scan the bar code using laser scanner:\r\n\r\n    Device Name : K63\r\n    Android : 11\r\n\r\nI have checked and read [Question 1][1], [Question 2][2] and [Question 3][3] some other questions also but not getting exactly that how to get scan event and data in the mobile device. I would like that once user scan any bar code then show that data on screen&#39;s UI so how to detect event or data.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/12106456/java-android-laser-barcode-scanner\r\n  [2]: https://stackoverflow.com/questions/69643509/is-there-a-way-to-detect-programmaticaly-laser-scanner-in-an-android-mobile\r\n  [3]: https://stackoverflow.com/questions/31585811/android-honeywell-dolphin-how-to-detect-laser-scanner","title":"Detect laser scanner event and get data in android K63","body":"<p>I am using below device to scan the bar code using laser scanner:</p>\n<pre><code>Device Name : K63\nAndroid : 11\n</code></pre>\n<p>I have checked and read <a href=\"https://stackoverflow.com/questions/12106456/java-android-laser-barcode-scanner\">Question 1</a>, <a href=\"https://stackoverflow.com/questions/69643509/is-there-a-way-to-detect-programmaticaly-laser-scanner-in-an-android-mobile\">Question 2</a> and <a href=\"https://stackoverflow.com/questions/31585811/android-honeywell-dolphin-how-to-detect-laser-scanner\">Question 3</a> some other questions also but not getting exactly that how to get scan event and data in the mobile device. I would like that once user scan any bar code then show that data on screen's UI so how to detect event or data.</p>\n"},{"tags":["java","jpa","join","associations","criteria-api"],"answers":[{"tags":[],"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"down_vote_count":8,"up_vote_count":41,"is_accepted":false,"score":33,"last_activity_date":1499766636,"creation_date":1371206072,"answer_id":17106521,"question_id":17106434,"body_markdown":"First: Foreign key relationship are not only for navigating. They mainly serve to ensure that no spurious values are introduced in the relationship. They also may help the database for query optimization. I would advise you to reconsider that.\r\n\r\nAnyway, for creating a query that uses several unrelated entities, you need to put them as `from` (`root`) entities (as you would do in SQL or JPQL)\r\n\r\n    SELECT .... FROM Link l, Training t WHERE l.attribute = t.attribute;\r\n\r\n    Root&lt;Link&gt; rootLink = criteriaQuery.from(Link.class);\r\n    Root&lt;Training&gt; rootTraining = criteriaQuery.from(Training.class);\r\n    ...\r\n    criteriaQuery.where(\r\n        criteriaBuilder.equal(rootLink.get(link_.linkAttribute), trainingLink));","title":"How to join unrelated entities with the JPA Criteria API","body":"<p>First: Foreign key relationship are not only for navigating. They mainly serve to ensure that no spurious values are introduced in the relationship. They also may help the database for query optimization. I would advise you to reconsider that.</p>\n\n<p>Anyway, for creating a query that uses several unrelated entities, you need to put them as <code>from</code> (<code>root</code>) entities (as you would do in SQL or JPQL)</p>\n\n<pre><code>SELECT .... FROM Link l, Training t WHERE l.attribute = t.attribute;\n\nRoot&lt;Link&gt; rootLink = criteriaQuery.from(Link.class);\nRoot&lt;Training&gt; rootTraining = criteriaQuery.from(Training.class);\n...\ncriteriaQuery.where(\n    criteriaBuilder.equal(rootLink.get(link_.linkAttribute), trainingLink));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1895425,"reputation":2578,"user_id":1712511,"display_name":"anthavio"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1458313452,"creation_date":1458313452,"answer_id":36087766,"question_id":17106434,"body_markdown":"Join on unrelated entities is not covered by latest JPA spec (2.1) \r\n\r\nHowever Hibernate 5.1.0+ and EclipseLink 2.4.0+ support ad hoc joins.\r\nhttp://blog.anthavio.net/2016/03/join-unrelated-entities-in-jpa.html\r\n\r\nAnother possibility is native query\r\nhttp://www.oracle.com/technetwork/articles/vasiliev-jpql-087123.html","title":"How to join unrelated entities with the JPA Criteria API","body":"<p>Join on unrelated entities is not covered by latest JPA spec (2.1) </p>\n\n<p>However Hibernate 5.1.0+ and EclipseLink 2.4.0+ support ad hoc joins.\n<a href=\"http://blog.anthavio.net/2016/03/join-unrelated-entities-in-jpa.html\" rel=\"nofollow noreferrer\">http://blog.anthavio.net/2016/03/join-unrelated-entities-in-jpa.html</a></p>\n\n<p>Another possibility is native query\n<a href=\"http://www.oracle.com/technetwork/articles/vasiliev-jpql-087123.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/articles/vasiliev-jpql-087123.html</a></p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1677159507,"creation_date":1568985953,"answer_id":58029297,"question_id":17106434,"body_markdown":"Since Hibernate 5.1, you can join unrelated entities when using JPQL and HQL:\r\n\r\n    Tuple postViewCount = entityManager.createQuery(&quot;&quot;&quot;\r\n        select p as post, count(pv) as page_views\r\n        from Post p\r\n        left join PageView pv on p.slug = pv.slug\r\n        where p.title = :title\r\n        group by p\r\n\t\t&quot;&quot;&quot;, Tuple.class)\r\n    .setParameter(&quot;title&quot;, &quot;Presentations&quot;)\r\n    .getSingleResult();\r\n\r\nHowever, this feature is not available in Criteria API, as that would require an API extension.\r\n\r\nThe solution\r\n------------\r\n\r\nWhile you could try to use two `Root` objects and emulate the `JOIN` via `WHERE` clause predicates, the resulting SQL is not the best way to solve this issue. \r\n\r\nYou should consider using [jOOQ][2] as, besides giving you the ability to join tables in any possible way, you can also fetch entities if you pass the generated SQL query to the JPA `createNativeQuery` method.\r\n\r\n  [2]: https://www.jooq.org/\r\n","title":"How to join unrelated entities with the JPA Criteria API","body":"<p>Since Hibernate 5.1, you can join unrelated entities when using JPQL and HQL:</p>\n<pre><code>Tuple postViewCount = entityManager.createQuery(&quot;&quot;&quot;\n    select p as post, count(pv) as page_views\n    from Post p\n    left join PageView pv on p.slug = pv.slug\n    where p.title = :title\n    group by p\n    &quot;&quot;&quot;, Tuple.class)\n.setParameter(&quot;title&quot;, &quot;Presentations&quot;)\n.getSingleResult();\n</code></pre>\n<p>However, this feature is not available in Criteria API, as that would require an API extension.</p>\n<h2>The solution</h2>\n<p>While you could try to use two <code>Root</code> objects and emulate the <code>JOIN</code> via <code>WHERE</code> clause predicates, the resulting SQL is not the best way to solve this issue.</p>\n<p>You should consider using <a href=\"https://www.jooq.org/\" rel=\"nofollow noreferrer\">jOOQ</a> as, besides giving you the ability to join tables in any possible way, you can also fetch entities if you pass the generated SQL query to the JPA <code>createNativeQuery</code> method.</p>\n"},{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569046518,"creation_date":1569046518,"answer_id":58037766,"question_id":17106434,"body_markdown":"You could use the JPA Criteria implementation of Blaze-persistence that translates to JPQL/HQL and offers that feature as extension to the JPA Criteria API.\r\n\r\nLook for &quot;Blaze-Persistence JPA-Criteria module dependencies&quot; in the readme: https://github.com/Blazebit/blaze-persistence/blob/master/README.md\r\n\r\nThen use `BlazeCriteriaBuilder cb = BlazeCriteria.get(criteriaBuilderFactory)` and finally `blazeCriteriaQuery.getCriteriaBuilder(entityManager)` to render the JPA Criteria Query object.","title":"How to join unrelated entities with the JPA Criteria API","body":"<p>You could use the JPA Criteria implementation of Blaze-persistence that translates to JPQL/HQL and offers that feature as extension to the JPA Criteria API.</p>\n\n<p>Look for \"Blaze-Persistence JPA-Criteria module dependencies\" in the readme: <a href=\"https://github.com/Blazebit/blaze-persistence/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/Blazebit/blaze-persistence/blob/master/README.md</a></p>\n\n<p>Then use <code>BlazeCriteriaBuilder cb = BlazeCriteria.get(criteriaBuilderFactory)</code> and finally <code>blazeCriteriaQuery.getCriteriaBuilder(entityManager)</code> to render the JPA Criteria Query object.</p>\n"},{"tags":[],"owner":{"account_id":1694567,"reputation":911,"user_id":1556234,"accept_rate":40,"display_name":"ema"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622706186,"creation_date":1622706186,"answer_id":67817377,"question_id":17106434,"body_markdown":"It&#39;s possible to create view for join-query and create entity for this view and JpaRepository can be utilized similarly as for usual entity for table. \r\nAnd if you need to build dynamically where-clause, it&#39;s still feasible to build it on top of this view-entity ","title":"How to join unrelated entities with the JPA Criteria API","body":"<p>It's possible to create view for join-query and create entity for this view and JpaRepository can be utilized similarly as for usual entity for table.\nAnd if you need to build dynamically where-clause, it's still feasible to build it on top of this view-entity</p>\n"},{"tags":[],"owner":{"account_id":4308682,"reputation":12613,"user_id":3520404,"display_name":"saran3h"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673001782,"creation_date":1673001782,"answer_id":75029896,"question_id":17106434,"body_markdown":"Better use good old JPQL/native query when faced with complex situation such as above. Criteria queries tend to get super complicated and inefficient as soon as someone talks about joins or composite primary keys and  and so does jpa entity mappings with all the JoinColumns, JoinTable, PrimaryKeyJoinColumn etc etc.","title":"How to join unrelated entities with the JPA Criteria API","body":"<p>Better use good old JPQL/native query when faced with complex situation such as above. Criteria queries tend to get super complicated and inefficient as soon as someone talks about joins or composite primary keys and  and so does jpa entity mappings with all the JoinColumns, JoinTable, PrimaryKeyJoinColumn etc etc.</p>\n"}],"owner":{"account_id":799941,"reputation":1123,"user_id":872711,"accept_rate":44,"display_name":"Filippo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42702,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"answer_count":6,"score":30,"last_activity_date":1677159507,"creation_date":1371205768,"question_id":17106434,"body_markdown":"Two database tables have a foreign key relationship.\r\n\r\nThey are mapped to two entities **A**  and **B** by JPA, but the join columns are manually removed from the entities, so in JPA world classes **A** and **B** are not related and you cannot navigate from one to the other through a field/property.\r\n\r\nUsing the JPA Criteria API, is it possible to create a query which joins the two tables?\r\n\r\nAll examples I found on internet uses the join column to achieve the goal, but, as stated above, it was removed from the code because most time I&#39;m not interested in the relationship between **A** and **B** and I&#39;m afraid about possible overhead.\r\n\r\n","title":"How to join unrelated entities with the JPA Criteria API","body":"<p>Two database tables have a foreign key relationship.</p>\n\n<p>They are mapped to two entities <strong>A</strong>  and <strong>B</strong> by JPA, but the join columns are manually removed from the entities, so in JPA world classes <strong>A</strong> and <strong>B</strong> are not related and you cannot navigate from one to the other through a field/property.</p>\n\n<p>Using the JPA Criteria API, is it possible to create a query which joins the two tables?</p>\n\n<p>All examples I found on internet uses the join column to achieve the goal, but, as stated above, it was removed from the code because most time I'm not interested in the relationship between <strong>A</strong> and <strong>B</strong> and I'm afraid about possible overhead.</p>\n"},{"tags":["java","sql-server","hibernate"],"comments":[{"owner":{"account_id":179146,"reputation":2938,"user_id":411602,"accept_rate":83,"display_name":"Sheetal Mohan Sharma"},"score":1,"creation_date":1543851177,"post_id":53596584,"comment_id":94056361,"body_markdown":"Looks like connection pooling issue. Can you please check if you have defined connection pool properly and don&#39;t have any connection leaks?","body":"Looks like connection pooling issue. Can you please check if you have defined connection pool properly and don&#39;t have any connection leaks?"},{"owner":{"account_id":913504,"reputation":213,"user_id":946825,"display_name":"mvelazquezm"},"score":0,"creation_date":1543908173,"post_id":53596584,"comment_id":94076755,"body_markdown":"Hi, thanks, we only had the properties from yaml. \nWe just also add some hikari properties:\n\nspring.datasource.hikari.maximumPoolSize: 7\nspring.datasource.hikari.leakDetectionThreshold: 1500 \nspring.datasource.hikari.connectionTimeout: 30000\nspring.datasource.hikari.maxLifetime: 60000\n\nWe are thinking about increase the number of pods and reduce pool size. For the moment error continues, less occurences maybe","body":"Hi, thanks, we only had the properties from yaml.  We just also add some hikari properties:  spring.datasource.hikari.maximumPoolSize: 7 spring.datasource.hikari.leakDetectionThreshold: 1500  spring.datasource.hikari.connectionTimeout: 30000 spring.datasource.hikari.maxLifetime: 60000  We are thinking about increase the number of pods and reduce pool size. For the moment error continues, less occurences maybe"},{"owner":{"account_id":179146,"reputation":2938,"user_id":411602,"accept_rate":83,"display_name":"Sheetal Mohan Sharma"},"score":0,"creation_date":1543919479,"post_id":53596584,"comment_id":94082854,"body_markdown":"Are these properties loaded properly? Can you test this in unit tests? I would suggest running tests to see if there are any connection leaks and fix that first. A relevant question on how to configure hikari may be useful https://stackoverflow.com/questions/26490967/how-do-i-configure-hikaricp-in-my-spring-boot-app-in-my-application-properties-f  and read this https://vladmihalcea.com/the-best-way-to-detect-database-connection-leaks/ for testing connection leaks","body":"Are these properties loaded properly? Can you test this in unit tests? I would suggest running tests to see if there are any connection leaks and fix that first. A relevant question on how to configure hikari may be useful <a href=\"https://stackoverflow.com/questions/26490967/how-do-i-configure-hikaricp-in-my-spring-boot-app-in-my-application-properties-f\" title=\"how do i configure hikaricp in my spring boot app in my application properties f\">stackoverflow.com/questions/26490967/&hellip;</a>  and read this <a href=\"https://vladmihalcea.com/the-best-way-to-detect-database-connection-leaks/\" rel=\"nofollow noreferrer\">vladmihalcea.com/&hellip;</a> for testing connection leaks"},{"owner":{"account_id":179146,"reputation":2938,"user_id":411602,"accept_rate":83,"display_name":"Sheetal Mohan Sharma"},"score":0,"creation_date":1543919521,"post_id":53596584,"comment_id":94082874,"body_markdown":"https://dzone.com/articles/database-connection-pooling-in-java-with-hikaricp","body":"<a href=\"https://dzone.com/articles/database-connection-pooling-in-java-with-hikaricp\" rel=\"nofollow noreferrer\">dzone.com/articles/&hellip;</a>"},{"owner":{"account_id":913504,"reputation":213,"user_id":946825,"display_name":"mvelazquezm"},"score":0,"creation_date":1543990953,"post_id":53596584,"comment_id":94112479,"body_markdown":"Thanks for the responses.\nWe resolved it adding a entityManager.close() See my edit","body":"Thanks for the responses. We resolved it adding a entityManager.close() See my edit"},{"owner":{"account_id":179146,"reputation":2938,"user_id":411602,"accept_rate":83,"display_name":"Sheetal Mohan Sharma"},"score":0,"creation_date":1544000749,"post_id":53596584,"comment_id":94116838,"body_markdown":"So it was a connection leak as expected :)","body":"So it was a connection leak as expected :)"}],"owner":{"account_id":913504,"reputation":213,"user_id":946825,"display_name":"mvelazquezm"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":856,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677159157,"creation_date":1543850103,"question_id":53596584,"body_markdown":"We have a spring boot app running over AKS (Azure Kubernetes Service).\r\nIn the service, we inject and call a Procedure invoker class:\r\n\r\n\r\n    package com.thing;\r\n\r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.ParameterMode;\r\n    import javax.persistence.PersistenceContext;\r\n    import javax.persistence.StoredProcedureQuery;\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    @Repository\r\n    public class ProcedureInvoker {\r\n\r\n\t@PersistenceContext\r\n    private final EntityManager entityManager;\r\n\r\n    @Autowired\r\n    public ProcedureInvoker(final EntityManager entityManager) {\r\n        this.entityManager = entityManager;\r\n    }\r\n\r\n    \r\n    public int getValueCall(String user, String password) {\r\n    \t\r\n\r\n        StoredProcedureQuery storedProcedureQuery = entityManager.createStoredProcedureQuery(&quot;dbo.CHECK_USER&quot;);\r\n        \r\n        \r\n        // In out parameters\r\n        storedProcedureQuery.registerStoredProcedureParameter(1, String.class, ParameterMode.IN);\r\n        storedProcedureQuery.registerStoredProcedureParameter(2, String.class, ParameterMode.IN);\r\n        storedProcedureQuery.registerStoredProcedureParameter(3, Integer.class, ParameterMode.INOUT);\r\n        \r\n\r\n        //\r\n        storedProcedureQuery.setParameter(1, user);\r\n        storedProcedureQuery.setParameter(2, password);\r\n        storedProcedureQuery.setParameter(3, new Integer(-3));\r\n        \r\n        Object result = storedProcedureQuery.getOutputParameterValue(3);\r\n        \r\n        storedProcedureQuery.execute();\r\n        \r\n        int resu = ((Integer)result).intValue();\r\n        \r\n        return resu; \r\n    }\r\n}\r\n\r\nSometimes (after 1 day o several hours working properly; about 3000 calls), we start getting this error:\r\n\r\n    com.microsoft.sqlserver.jdbc.SQLServerException:\r\n       at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError \r\n    (SQLServerException.java227)\r\n       at com.microsoft.sqlserver.jdbc.SQLServerConnection.checkClosed \r\n    (SQLServerConnection.java796)\r\n       at com.microsoft.sqlserver.jdbc.SQLServerConnection.setNetworkTimeout \r\n    (SQLServerConnection.java4768)\r\n       at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout (PoolBase.java541)\r\n       at com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection \r\n    (PoolBase.java129)\r\n       at com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1 \r\n    (HikariPool.java434)\r\n       at java.util.concurrent.ThreadPoolExecutor.runWorker \r\n    (ThreadPoolExecutor.java1149)\r\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run \r\n    (ThreadPoolExecutor.java624)\r\n       at java.lang.Thread.run (Thread.java748)\r\n\r\n\r\nTo solve it, we delete pods in order to restart them. But It is not a solution.\r\n\r\nPom has:\r\n\r\n    &lt;!--  DDBB --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- End DDBB --&gt;\r\n\r\nProperties from yaml\r\n\r\n    spring.datasource.driverClassName: \r\n    com.microsoft.sqlserver.jdbc.SQLServerDriver\r\n    spring.jpa.show-sql: false\r\n    spring.jpa.hibernate.dialect: org.hibernate.dialect.SQLServer2012Dialect\r\n    spring.jpa.properties.hibernate.format_sql: true\r\n    logging.level.org.hibernate.type: debug\r\n\r\n**SOLVED**!!\r\nFinally we solved it adding a:\r\n\r\n    entityManager.close()\r\n\r\nWe thought that sentence is not necessary for procedures or functions (it was closed by spring).\r\n\r\nThe problem probably comes from SQL Server because the procedure has a return statement which is not declared (We had some problems calling it from Spring). Maybe SQL server delegates the close of the connection to spring and spring made the opposite (delegating to SQL server)","title":"Spring Boot, SQL Server, AKS, The connection is closed","body":"<p>We have a spring boot app running over AKS (Azure Kubernetes Service).\nIn the service, we inject and call a Procedure invoker class:</p>\n\n<pre><code>package com.thing;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.ParameterMode;\nimport javax.persistence.PersistenceContext;\nimport javax.persistence.StoredProcedureQuery;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic class ProcedureInvoker {\n\n@PersistenceContext\nprivate final EntityManager entityManager;\n\n@Autowired\npublic ProcedureInvoker(final EntityManager entityManager) {\n    this.entityManager = entityManager;\n}\n\n\npublic int getValueCall(String user, String password) {\n\n\n    StoredProcedureQuery storedProcedureQuery = entityManager.createStoredProcedureQuery(\"dbo.CHECK_USER\");\n\n\n    // In out parameters\n    storedProcedureQuery.registerStoredProcedureParameter(1, String.class, ParameterMode.IN);\n    storedProcedureQuery.registerStoredProcedureParameter(2, String.class, ParameterMode.IN);\n    storedProcedureQuery.registerStoredProcedureParameter(3, Integer.class, ParameterMode.INOUT);\n\n\n    //\n    storedProcedureQuery.setParameter(1, user);\n    storedProcedureQuery.setParameter(2, password);\n    storedProcedureQuery.setParameter(3, new Integer(-3));\n\n    Object result = storedProcedureQuery.getOutputParameterValue(3);\n\n    storedProcedureQuery.execute();\n\n    int resu = ((Integer)result).intValue();\n\n    return resu; \n}\n</code></pre>\n\n<p>}</p>\n\n<p>Sometimes (after 1 day o several hours working properly; about 3000 calls), we start getting this error:</p>\n\n<pre><code>com.microsoft.sqlserver.jdbc.SQLServerException:\n   at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError \n(SQLServerException.java227)\n   at com.microsoft.sqlserver.jdbc.SQLServerConnection.checkClosed \n(SQLServerConnection.java796)\n   at com.microsoft.sqlserver.jdbc.SQLServerConnection.setNetworkTimeout \n(SQLServerConnection.java4768)\n   at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout (PoolBase.java541)\n   at com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection \n(PoolBase.java129)\n   at com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1 \n(HikariPool.java434)\n   at java.util.concurrent.ThreadPoolExecutor.runWorker \n(ThreadPoolExecutor.java1149)\n   at java.util.concurrent.ThreadPoolExecutor$Worker.run \n(ThreadPoolExecutor.java624)\n   at java.lang.Thread.run (Thread.java748)\n</code></pre>\n\n<p>To solve it, we delete pods in order to restart them. But It is not a solution.</p>\n\n<p>Pom has:</p>\n\n<pre><code>&lt;!--  DDBB --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n        &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- End DDBB --&gt;\n</code></pre>\n\n<p>Properties from yaml</p>\n\n<pre><code>spring.datasource.driverClassName: \ncom.microsoft.sqlserver.jdbc.SQLServerDriver\nspring.jpa.show-sql: false\nspring.jpa.hibernate.dialect: org.hibernate.dialect.SQLServer2012Dialect\nspring.jpa.properties.hibernate.format_sql: true\nlogging.level.org.hibernate.type: debug\n</code></pre>\n\n<p><strong>SOLVED</strong>!!\nFinally we solved it adding a:</p>\n\n<pre><code>entityManager.close()\n</code></pre>\n\n<p>We thought that sentence is not necessary for procedures or functions (it was closed by spring).</p>\n\n<p>The problem probably comes from SQL Server because the procedure has a return statement which is not declared (We had some problems calling it from Spring). Maybe SQL server delegates the close of the connection to spring and spring made the opposite (delegating to SQL server)</p>\n"},{"tags":["java","spring-boot","api","mapstruct","spring-boot-maven-plugin"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":1,"creation_date":1677085811,"post_id":75535960,"comment_id":133269400,"body_markdown":"Does the mapper class get generated at all? You usually need to also include the `org.mapstruct:mapstruct-processor` as an annotation processor (see https://www.baeldung.com/mapstruct).","body":"Does the mapper class get generated at all? You usually need to also include the <code>org.mapstruct:mapstruct-processor</code> as an annotation processor (see <a href=\"https://www.baeldung.com/mapstruct\" rel=\"nofollow noreferrer\">baeldung.com/mapstruct</a>)."},{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1677085904,"post_id":75535960,"comment_id":133269425,"body_markdown":"What generated mapper class would that be?","body":"What generated mapper class would that be?"},{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1677085975,"post_id":75535960,"comment_id":133269448,"body_markdown":"&quot;org.mapstruct:mapstruct-processor&quot; which part of the application should it be inserted in?","body":"&quot;org.mapstruct:mapstruct-processor&quot; which part of the application should it be inserted in?"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1677086099,"post_id":75535960,"comment_id":133269502,"body_markdown":"In the pom. Check the link I posted, Maven section. The processor generates an actual class from the interface, you can see it in your sources after.","body":"In the pom. Check the link I posted, Maven section. The processor generates an actual class from the interface, you can see it in your sources after."},{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1677086604,"post_id":75535960,"comment_id":133269656,"body_markdown":"I did exactly as it says in the link on Maeven and I still get the same error. Where can I check this automatically generated Mapper Class?","body":"I did exactly as it says in the link on Maeven and I still get the same error. Where can I check this automatically generated Mapper Class?"}],"answers":[{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677159154,"creation_date":1677159154,"answer_id":75545540,"question_id":75535960,"body_markdown":"As I said in the comments, you need to add the mapstruct annotation processor.\r\n\r\nYou&#39;re missing the\r\n\r\n```\r\n  &lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.6.0&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n      &lt;source&gt;${java.version}&lt;/source&gt;\r\n      &lt;target&gt;${java.version}&lt;/target&gt;\r\n      &lt;annotationProcessorPaths&gt;\r\n         &lt;path&gt;\r\n           &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n           &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n           &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\r\n         &lt;/path&gt;\r\n      &lt;/annotationProcessorPaths&gt;\r\n    &lt;/configuration&gt;\r\n  &lt;/plugin&gt;\r\n```\r\nsection.","title":"Issue with MapStruct and mapping using Java Spring Boot","body":"<p>As I said in the comments, you need to add the mapstruct annotation processor.</p>\n<p>You're missing the</p>\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.6.0&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;source&gt;${java.version}&lt;/source&gt;\n      &lt;target&gt;${java.version}&lt;/target&gt;\n      &lt;annotationProcessorPaths&gt;\n         &lt;path&gt;\n           &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n           &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n           &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\n         &lt;/path&gt;\n      &lt;/annotationProcessorPaths&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p>section.</p>\n"}],"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1904,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677159154,"creation_date":1677085453,"question_id":75535960,"body_markdown":"I&#39;m trying to develop an API using MapStruct in my &quot;Category&quot; controller, but the console is returning the error:\r\n\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nParameter 1 of constructor in com.api.business_products_management.controllers.CategoryController required a bean of type &#39;com.api.business_products_management.mappers.CategoryMapper&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.api.business_products_management.mappers.CategoryMapper&#39; in your configuration.\r\n\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\n\r\nHere the controller\r\n\r\n```\r\npackage com.api.business_products_management.controllers;\r\n\r\nimport com.api.business_products_management.dtos.CategoryDto;\r\nimport com.api.business_products_management.mappers.CategoryMapper;\r\nimport com.api.business_products_management.models.CategoryModel;\r\nimport com.api.business_products_management.services.CategoryService;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport jakarta.validation.Valid;\r\nimport org.apache.catalina.LifecycleState;\r\nimport org.springframework.beans.BeanUtils;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\r\n@RequestMapping(&quot;/category&quot;)\r\npublic class CategoryController {\r\n\r\n    final CategoryService categoryService;\r\n    final CategoryMapper categoryMapper;\r\n\r\n    public CategoryController(CategoryService categoryService, CategoryMapper categoryMapper) {\r\n        this.categoryService = categoryService;\r\n        this.categoryMapper = categoryMapper;\r\n\r\n    }\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;Object&gt; saveCategory (@RequestBody @Valid CategoryDto categoryDto) {\r\n        if (categoryService.existsByName(categoryDto.getName())) {\r\n            return ResponseEntity.status(HttpStatus.CONFLICT).body(&quot;Conflict: Category already exists! &quot;);\r\n        }\r\n        var categoryModel = categoryMapper.toCategoryModel(categoryDto);\r\n        return ResponseEntity.status(HttpStatus.CREATED).body(categoryService.save(categoryModel));\r\n    }\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;CategoryModel&gt;&gt; getAllCategories() {\r\n        return ResponseEntity.status(HttpStatus.OK).body(categoryService.findAll());\r\n    }\r\n}\r\n\r\n```\r\n\r\nmy CategoryMapper interface\r\n\r\n```\r\npackage com.api.business_products_management.mappers;\r\n\r\nimport com.api.business_products_management.dtos.CategoryDto;\r\nimport com.api.business_products_management.models.CategoryModel;\r\nimport org.mapstruct.Mapper;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface CategoryMapper {\r\n    CategoryModel toCategoryModel(CategoryDto dto);\r\n}\r\n\r\n```\r\n\r\nMy pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.api&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;business_products_management&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;business_products_management&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;org.mapstruct.version&gt;1.4.2.Final&lt;/org.mapstruct.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nAs it says in the error, I&#39;m already declaring the correct mapping in my constructor along with the interface, I can&#39;t identify the reason for this error\r\n","title":"Issue with MapStruct and mapping using Java Spring Boot","body":"<p>I'm trying to develop an API using MapStruct in my &quot;Category&quot; controller, but the console is returning the error:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 1 of constructor in com.api.business_products_management.controllers.CategoryController required a bean of type 'com.api.business_products_management.mappers.CategoryMapper' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.api.business_products_management.mappers.CategoryMapper' in your configuration.\n\n\nProcess finished with exit code 1\n\n</code></pre>\n<p>Here the controller</p>\n<pre><code>package com.api.business_products_management.controllers;\n\nimport com.api.business_products_management.dtos.CategoryDto;\nimport com.api.business_products_management.mappers.CategoryMapper;\nimport com.api.business_products_management.models.CategoryModel;\nimport com.api.business_products_management.services.CategoryService;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport jakarta.validation.Valid;\nimport org.apache.catalina.LifecycleState;\nimport org.springframework.beans.BeanUtils;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\n@RequestMapping(&quot;/category&quot;)\npublic class CategoryController {\n\n    final CategoryService categoryService;\n    final CategoryMapper categoryMapper;\n\n    public CategoryController(CategoryService categoryService, CategoryMapper categoryMapper) {\n        this.categoryService = categoryService;\n        this.categoryMapper = categoryMapper;\n\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;Object&gt; saveCategory (@RequestBody @Valid CategoryDto categoryDto) {\n        if (categoryService.existsByName(categoryDto.getName())) {\n            return ResponseEntity.status(HttpStatus.CONFLICT).body(&quot;Conflict: Category already exists! &quot;);\n        }\n        var categoryModel = categoryMapper.toCategoryModel(categoryDto);\n        return ResponseEntity.status(HttpStatus.CREATED).body(categoryService.save(categoryModel));\n    }\n    @GetMapping\n    public ResponseEntity&lt;List&lt;CategoryModel&gt;&gt; getAllCategories() {\n        return ResponseEntity.status(HttpStatus.OK).body(categoryService.findAll());\n    }\n}\n\n</code></pre>\n<p>my CategoryMapper interface</p>\n<pre><code>package com.api.business_products_management.mappers;\n\nimport com.api.business_products_management.dtos.CategoryDto;\nimport com.api.business_products_management.models.CategoryModel;\nimport org.mapstruct.Mapper;\nimport org.springframework.stereotype.Component;\n\n@Component\n@Mapper(componentModel = &quot;spring&quot;)\npublic interface CategoryMapper {\n    CategoryModel toCategoryModel(CategoryDto dto);\n}\n\n</code></pre>\n<p>My pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.api&lt;/groupId&gt;\n    &lt;artifactId&gt;business_products_management&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;business_products_management&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;org.mapstruct.version&gt;1.4.2.Final&lt;/org.mapstruct.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>As it says in the error, I'm already declaring the correct mapping in my constructor along with the interface, I can't identify the reason for this error</p>\n"},{"tags":["java","hibernate","jpa","jdbc","spring-data"],"answers":[{"tags":[],"owner":{"account_id":4764104,"reputation":9906,"user_id":3850730,"accept_rate":83,"display_name":"Sabir Khan"},"down_vote_count":0,"up_vote_count":55,"is_accepted":true,"score":55,"last_activity_date":1492162241,"creation_date":1492161354,"answer_id":43408661,"question_id":43407411,"body_markdown":"You should try a different dialects like`org.hibernate.dialect.MySQL5Dialect` OR  `org.hibernate.dialect.MySQLMyISAMDialect` OR `org.hibernate.dialect.MySQLInnoDBDialect` to see which one works for you. \r\n\r\nAll in all , your current dialect is generating , `type=MyISAM` while it should be , `ENGINE=MyISAM` in create table query. \r\n\r\n[mysql error &#39;TYPE=MyISAM&#39;](https://stackoverflow.com/questions/11471075/mysql-error-type-myisam)\r\n\r\nYou should read this too , [Why do I need to configure the SQL dialect of a data source?](https://stackoverflow.com/questions/21012799/why-do-i-need-to-configure-the-sql-dialect-of-a-data-source)\r\n\r\nYour logs say that this query was tried to be executed , `create table MyTable (id integer not null, name varchar(255), primary key (id)) type=MyISAM`  so you should try to execute that query directly on mysql command prompt to see if that works for your MySQL version. \r\n\r\nAlso, in question do specify your MySQL version too.\r\n\r\nHope it helps !!","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>You should try a different dialects like<code>org.hibernate.dialect.MySQL5Dialect</code> OR  <code>org.hibernate.dialect.MySQLMyISAMDialect</code> OR <code>org.hibernate.dialect.MySQLInnoDBDialect</code> to see which one works for you. </p>\n\n<p>All in all , your current dialect is generating , <code>type=MyISAM</code> while it should be , <code>ENGINE=MyISAM</code> in create table query. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/11471075/mysql-error-type-myisam\">mysql error 'TYPE=MyISAM'</a></p>\n\n<p>You should read this too , <a href=\"https://stackoverflow.com/questions/21012799/why-do-i-need-to-configure-the-sql-dialect-of-a-data-source\">Why do I need to configure the SQL dialect of a data source?</a></p>\n\n<p>Your logs say that this query was tried to be executed , <code>create table MyTable (id integer not null, name varchar(255), primary key (id)) type=MyISAM</code>  so you should try to execute that query directly on mysql command prompt to see if that works for your MySQL version. </p>\n\n<p>Also, in question do specify your MySQL version too.</p>\n\n<p>Hope it helps !!</p>\n"},{"tags":[],"owner":{"account_id":5746045,"reputation":1135,"user_id":4537268,"display_name":"Ganesh Giri"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1509970909,"creation_date":1509968139,"answer_id":47136090,"question_id":43407411,"body_markdown":"Change in hibernate configuration XML file.\r\n\r\n      &lt;!-- SQL dialect --&gt;      \r\n      &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\r\n\r\n","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>Change in hibernate configuration XML file.</p>\n\n<pre><code>  &lt;!-- SQL dialect --&gt;      \n  &lt;property name=\"dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4835491,"reputation":4717,"user_id":3902339,"accept_rate":100,"display_name":"ArifMustafa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517026427,"creation_date":1517026427,"answer_id":48472530,"question_id":43407411,"body_markdown":"Check your property value mistakes.\r\n\r\nIt happens sometime, when you just simply forget the **&#39;t&#39;** in **Dialec**, which has to be **Dialect**, simply spelling mistake or value kind of mistake there is inside your configuration.","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>Check your property value mistakes.</p>\n\n<p>It happens sometime, when you just simply forget the <strong>'t'</strong> in <strong>Dialec</strong>, which has to be <strong>Dialect</strong>, simply spelling mistake or value kind of mistake there is inside your configuration.</p>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1531094197,"creation_date":1531094197,"answer_id":51236837,"question_id":43407411,"body_markdown":"You are using an updated version of `MySQL` but using and **old** `dialect`\r\n\r\nUse either,\r\n\r\n    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\r\n\r\nOR\r\n\r\n    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\r\n\r\nin the `hibernate.cfg.xml` file.\r\n\r\nThis prevents you from getting `dialect` issues. ","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>You are using an updated version of <code>MySQL</code> but using and <strong>old</strong> <code>dialect</code></p>\n\n<p>Use either,</p>\n\n<pre><code>&lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>&lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\n</code></pre>\n\n<p>in the <code>hibernate.cfg.xml</code> file.</p>\n\n<p>This prevents you from getting <code>dialect</code> issues. </p>\n"},{"tags":[],"owner":{"account_id":9421240,"reputation":449,"user_id":8204161,"display_name":"Ashwani Sharma"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1533644182,"creation_date":1533644182,"answer_id":51726590,"question_id":43407411,"body_markdown":"The reason you are facing this error might be any of the reasons below:-\r\n\r\n -  The column name in the DB Script and the model/entity class are different.\r\n -  There is a spelling mistake in your configuration file while mentioning property value.\r\n -  The MySQL version is not getting matched with the dialect that you are mentioning.\r\n\r\nI was facing this error because I change the column names in my DATABASE SCRIPT but forgot to change it in the Model/Entity class. So, after 4 hours of pulling my hairs I simply did this and my application started running.","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>The reason you are facing this error might be any of the reasons below:-</p>\n\n<ul>\n<li>The column name in the DB Script and the model/entity class are different.</li>\n<li>There is a spelling mistake in your configuration file while mentioning property value.</li>\n<li>The MySQL version is not getting matched with the dialect that you are mentioning.</li>\n</ul>\n\n<p>I was facing this error because I change the column names in my DATABASE SCRIPT but forgot to change it in the Model/Entity class. So, after 4 hours of pulling my hairs I simply did this and my application started running.</p>\n"},{"tags":[],"owner":{"account_id":11574148,"reputation":399,"user_id":8480036,"display_name":"Ashish Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581084880,"creation_date":1581084880,"answer_id":60115157,"question_id":43407411,"body_markdown":"I ran into the same problem. And indeed, it is the dialect issue, although none of the options provided by Sabir helped me out (with due respect) but changing it from MySQL5Dialect to MySQL8Dialect helped me resolve the issue.\r\n\r\nSo if none of the above 3 options provided above works, go for **MySQL8Dialect**.\r\n\r\nHope this will help.\r\n","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>I ran into the same problem. And indeed, it is the dialect issue, although none of the options provided by Sabir helped me out (with due respect) but changing it from MySQL5Dialect to MySQL8Dialect helped me resolve the issue.</p>\n\n<p>So if none of the above 3 options provided above works, go for <strong>MySQL8Dialect</strong>.</p>\n\n<p>Hope this will help.</p>\n"},{"tags":[],"owner":{"account_id":7951954,"reputation":99,"user_id":6002543,"display_name":"dev_dan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581260096,"creation_date":1581260096,"answer_id":60137890,"question_id":43407411,"body_markdown":"There is one more variation of a dialect that worked for me when I tried to connect my Spring Boot application to Google Cloud MySQL DB: `org.hibernate.dialect.MySQL5InnoDBDialect`","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>There is one more variation of a dialect that worked for me when I tried to connect my Spring Boot application to Google Cloud MySQL DB: <code>org.hibernate.dialect.MySQL5InnoDBDialect</code></p>\n"},{"tags":[],"owner":{"account_id":16796963,"reputation":114,"user_id":12143234,"display_name":"Uttam Pawar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669056222,"creation_date":1625927398,"answer_id":68328624,"question_id":43407411,"body_markdown":"I was facing the same issue, I was using dialect as **MySqlDialect**.\r\n\r\nI resolved it by changing the dialect to **org.hibernate.dialect.MySQL57Dialect** and tables got created.\r\n","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>I was facing the same issue, I was using dialect as <strong>MySqlDialect</strong>.</p>\n<p>I resolved it by changing the dialect to <strong>org.hibernate.dialect.MySQL57Dialect</strong> and tables got created.</p>\n"},{"tags":[],"owner":{"account_id":16062883,"reputation":1058,"user_id":11593292,"display_name":"Sandun Susantha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1631255952,"creation_date":1631255952,"answer_id":69128200,"question_id":43407411,"body_markdown":"If it is in a **spring boot application** insert the following property.\r\n\r\n*spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL57Dialect*\r\n\r\nOr else if you used a **separate configuration file** then include the following code\r\n\r\n*properties.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.MySQL57Dialect&quot;);*","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>If it is in a <strong>spring boot application</strong> insert the following property.</p>\n<p><em>spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL57Dialect</em></p>\n<p>Or else if you used a <strong>separate configuration file</strong> then include the following code</p>\n<p><em>properties.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.MySQL57Dialect&quot;);</em></p>\n"},{"tags":[],"owner":{"account_id":3982144,"reputation":61,"user_id":3283804,"display_name":"Yana"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1653689049,"creation_date":1653137587,"answer_id":72329737,"question_id":43407411,"body_markdown":"Not particularly related to the cause of the author&#39;s problem. But I had a similar error because I used one of the DB keywords as a variable name. \r\n\r\nI had `String group` as a column in my table, and the query was throwing an error because the system thought that `group` was not a that it must create column, but a command word. ","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>Not particularly related to the cause of the author's problem. But I had a similar error because I used one of the DB keywords as a variable name.</p>\n<p>I had <code>String group</code> as a column in my table, and the query was throwing an error because the system thought that <code>group</code> was not a that it must create column, but a command word.</p>\n"},{"tags":[],"owner":{"account_id":16608611,"reputation":123,"user_id":12002311,"display_name":"Prince"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669056028,"creation_date":1669034279,"answer_id":74519065,"question_id":43407411,"body_markdown":"Make sure you are using the entity/model field names that are not conflicting with DB reserved keywords.\r\n\r\nI had the same error in my Model entity, I had a variable named ```Order``` which somehow conflicts with the Database reserved keywords.","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>Make sure you are using the entity/model field names that are not conflicting with DB reserved keywords.</p>\n<p>I had the same error in my Model entity, I had a variable named <code>Order</code> which somehow conflicts with the Database reserved keywords.</p>\n"},{"tags":[],"owner":{"account_id":5538564,"reputation":547,"user_id":4396047,"display_name":"RRR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677158668,"creation_date":1677158668,"answer_id":75545464,"question_id":43407411,"body_markdown":"I was having same issue, changed a column name from &quot;end&quot; to &quot;endTime&quot; and it fixed.","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>I was having same issue, changed a column name from &quot;end&quot; to &quot;endTime&quot; and it fixed.</p>\n"}],"owner":{"account_id":10279692,"reputation":2683,"user_id":7585327,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138398,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":43408661,"answer_count":12,"score":30,"last_activity_date":1677158668,"creation_date":1492156055,"question_id":43407411,"body_markdown":"I am a novice in hibernate world and facing,\r\n\r\n    WARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\r\n    org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\r\n\r\n exception while I run my stand-alone programe in hibernate 5.2.9 version. But in hibernate 4 version all my code runs well. I looked for many questions and solve but not working answer i got.\r\n\r\n&gt; Configuration file\r\n\r\n    hibernate.cfg.xml\r\n    \r\n        &lt;hibernate-configuration&gt;\r\n          &lt;session-factory&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/test&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.connection.password&quot;&gt;admin&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.connection.pool_size&quot;&gt;20&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\r\n            &lt;mapping class=&quot;com.test.hibernate14417.MyTable&quot;&gt;&lt;/mapping&gt;\r\n          &lt;/session-factory&gt;\r\n        &lt;/hibernate-configuration&gt;\r\n\r\n&gt;Pom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;com.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;Hibernate14417&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;repositories&gt;\r\n        &lt;/repositories&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                &lt;version&gt;5.2.9.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n           \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n                &lt;version&gt;4.3.1.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jtds&lt;/artifactId&gt;\r\n                &lt;version&gt;1.3.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.11&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n&gt; Utility file\r\n\r\n    package com.test.hibernate14417;\r\n    \r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.boot.Metadata;\r\n    import org.hibernate.boot.MetadataSources;\r\n    import org.hibernate.boot.registry.StandardServiceRegistry;\r\n    import org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\n    import org.hibernate.service.ServiceRegistry;\r\n    \r\n    \r\n    public class ExecuteUtil {\r\n        private static final SessionFactory SESSION_FACTORY=buildSessionFactory();\r\n    \r\n        private static SessionFactory buildSessionFactory() {\r\n            try {\r\n                ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder()\r\n                        .configure(&quot;hibernate.cfg.xml&quot;).build();\r\n    \r\n                Metadata metadata = new MetadataSources(serviceRegistry).buildMetadata();\r\n    \r\n                return metadata.getSessionFactoryBuilder().build();\r\n    \r\n            } catch (Throwable ex) {\r\n                System.err.println(&quot;Initial SessionFactory creation failed.&quot; + ex);\r\n                throw new ExceptionInInitializerError(ex);\r\n            }\r\n    \r\n        }\r\n    \r\n        public static SessionFactory getSESSION_FACTORY() {\r\n            return SESSION_FACTORY;\r\n        }\r\n        \r\n        public static void shutdown(){\r\n            getSESSION_FACTORY().close();\r\n        }\r\n        \r\n    }\r\n\r\n&gt; Entity file\r\n\r\n\r\n    package com.test.hibernate14417;\r\n    \r\n    import java.io.Serializable;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    \r\n    \r\n    \r\n    \r\n    @Entity\r\n    public class MyTable implements Serializable {\r\n        \r\n        @Id\r\n      @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private int id;\r\n        \r\n        private String name;\r\n    \r\n        public int getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n        \r\n        \r\n        \r\n    }\r\n\r\n&gt; Main method\r\n\r\n    package com.test.hibernate14417;\r\n    \r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    \r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            \r\n            MyTable mt=new MyTable();\r\n            mt.setName(&quot;Man&quot;);\r\n            \r\n            SessionFactory sessionFactory=ExecuteUtil.getSESSION_FACTORY();\r\n            \r\n            Session session=sessionFactory.getCurrentSession();\r\n            \r\n            \r\n            try {\r\n              session.getTransaction().begin();\r\n               \r\n              session.save(mt);\r\n               \r\n              session.getTransaction().commit();\r\n               \r\n               session.close();\r\n               sessionFactory.close();\r\n               \r\n            } catch (Exception e) {\r\n                System.out.println(e.getStackTrace());\r\n                session.getTransaction().rollback();\r\n            }\r\n            \r\n            \r\n        }\r\n        \r\n&gt;Console \r\n\r\n\r\n    cd D:\\Netbeans\\Hibernate14417; &quot;JAVA_HOME=C:\\\\Program Files\\\\Java\\\\jdk1.8.0_121&quot; cmd /c &quot;\\&quot;\\&quot;C:\\\\Program Files\\\\NetBeans 8.2\\\\java\\\\maven\\\\bin\\\\mvn.bat\\&quot; -Dexec.args=\\&quot;-classpath %classpath com.test.hibernate14417.Main\\&quot; -Dexec.executable=\\&quot;C:\\\\Program Files\\\\Java\\\\jdk1.8.0_121\\\\bin\\\\java.exe\\&quot; -Dmaven.ext.class.path=\\&quot;C:\\\\Program Files\\\\NetBeans 8.2\\\\java\\\\maven-nblib\\\\netbeans-eventspy.jar\\&quot; -Dfile.encoding=UTF-8 org.codehaus.mojo:exec-maven-plugin:1.2.1:exec\\&quot;&quot;\r\n    Running NetBeans Compile On Save execution. Phase execution is skipped and output directories of dependency projects (with Compile on Save turned on) will be used instead of their jar artifacts.\r\n    Scanning for projects...\r\n                                                                            \r\n    ------------------------------------------------------------------------\r\n    Building Hibernate14417 1.0-SNAPSHOT\r\n    ------------------------------------------------------------------------\r\n    \r\n    --- exec-maven-plugin:1.2.1:exec (default-cli) @ Hibernate14417 ---\r\n    Apr 14, 2017 10:41:51 AM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate Core {5.2.9.Final}\r\n    Apr 14, 2017 10:41:51 AM org.hibernate.cfg.Environment &lt;clinit&gt;\r\n    INFO: HHH000206: hibernate.properties not found\r\n    Apr 14, 2017 10:41:53 AM org.hibernate.boot.jaxb.internal.stax.LocalXmlResourceResolver resolveEntity\r\n    WARN: HHH90000012: Recognized obsolete hibernate namespace http://hibernate.sourceforge.net/hibernate-configuration. Use namespace http://www.hibernate.org/dtd/hibernate-configuration instead.  Support for obsolete DTD/XSD namespaces may be removed at any time.\r\n    Apr 14, 2017 10:41:54 AM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\r\n    Apr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\n    WARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\n    Apr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001005: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost:3306/test]\r\n    Apr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001001: Connection properties: {user=root, password=****}\r\n    Apr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001003: Autocommit mode: false\r\n    Apr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.PooledConnections &lt;init&gt;\r\n    INFO: HHH000115: Hibernate connection pool size: 20 (min=1)\r\n    Apr 14, 2017 10:41:55 AM org.hibernate.dialect.Dialect &lt;init&gt;\r\n    INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\r\n    Apr 14, 2017 10:41:55 AM org.hibernate.engine.jdbc.env.internal.LobCreatorBuilderImpl useContextualLobCreation\r\n    INFO: HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4\r\n    Hibernate: drop table if exists hibernate_sequence\r\n    Apr 14, 2017 10:41:58 AM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\r\n    INFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@24111ef1] for (non-JTA) DDL execution was not in auto-commit mode; the Connection &#39;local transaction&#39; will be committed and the Connection will be set into auto-commit mode.\r\n    Hibernate: drop table if exists MyTable\r\n    Hibernate: create table hibernate_sequence (next_val bigint) type=MyISAM\r\n    Apr 14, 2017 10:41:58 AM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\r\n    INFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@531f4093] for (non-JTA) DDL execution was not in auto-commit mode; the Connection &#39;local transaction&#39; will be committed and the Connection will be set into auto-commit mode.\r\n    Apr 14, 2017 10:41:58 AM org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl handleException\r\n    WARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\r\n    org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\r\n    \tat com.test.hibernate14417.ExecuteUtil.buildSessionFactory(ExecuteUtil.java:29)\r\n    \tat com.test.hibernate14417.ExecuteUtil.&lt;clinit&gt;(ExecuteUtil.java:20)\r\n    \tat com.test.hibernate14417.Main.main(Main.java:21)\r\n    Caused by: java.sql.SQLException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;type=MyISAM&#39; at line 1\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2926)\r\n    \tat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1571)\r\n    \tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1666)\r\n    \tat com.mysql.jdbc.Connection.execSQL(Connection.java:2972)\r\n    \tat com.mysql.jdbc.Connection.execSQL(Connection.java:2902)\r\n    \tat com.mysql.jdbc.Statement.execute(Statement.java:529)\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\r\n    \t... 13 more\r\n    \r\n    Hibernate: insert into hibernate_sequence values ( 1 )\r\n    Apr 14, 2017 10:41:58 AM org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl handleException\r\n    WARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\r\n    org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\r\n    \tat com.test.hibernate14417.ExecuteUtil.buildSessionFactory(ExecuteUtil.java:29)\r\n    \tat com.test.hibernate14417.ExecuteUtil.&lt;clinit&gt;(ExecuteUtil.java:20)\r\n    \tat com.test.hibernate14417.Main.main(Main.java:21)\r\n    Caused by: java.sql.SQLException: Table &#39;test.hibernate_sequence&#39; doesn&#39;t exist\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2926)\r\n    \tat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1571)\r\n    \tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1666)\r\n    \tat com.mysql.jdbc.Connection.execSQL(Connection.java:2972)\r\n    \tat com.mysql.jdbc.Connection.execSQL(Connection.java:2902)\r\n    \tat com.mysql.jdbc.Statement.execute(Statement.java:529)\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\r\n    \t... 13 more\r\n    \r\n    Hibernate: create table MyTable (id integer not null, name varchar(255), primary key (id)) type=MyISAM\r\n    Apr 14, 2017 10:41:58 AM org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl handleException\r\n    WARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\r\n    org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\r\n    \tat com.test.hibernate14417.ExecuteUtil.buildSessionFactory(ExecuteUtil.java:29)\r\n    \tat com.test.hibernate14417.ExecuteUtil.&lt;clinit&gt;(ExecuteUtil.java:20)\r\n    \tat com.test.hibernate14417.Main.main(Main.java:21)\r\n    Caused by: java.sql.SQLException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;type=MyISAM&#39; at line 1\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2926)\r\n    \tat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1571)\r\n    \tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1666)\r\n    \tat com.mysql.jdbc.Connection.execSQL(Connection.java:2972)\r\n    \tat com.mysql.jdbc.Connection.execSQL(Connection.java:2902)\r\n    \tat com.mysql.jdbc.Statement.execute(Statement.java:529)\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\r\n    \t... 13 more\r\n    \r\n    Apr 14, 2017 10:41:58 AM org.hibernate.tool.schema.internal.SchemaCreatorImpl applyImportSources\r\n    INFO: HHH000476: Executing import script &#39;org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@7776ab&#39;\r\n    Exception in thread &quot;main&quot; org.hibernate.HibernateException: No CurrentSessionContext configured!\r\n    \tat org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:454)\r\n    \tat com.test.hibernate14417.Main.main(Main.java:23)\r\n\r\n\r\n","title":"GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement","body":"<p>I am a novice in hibernate world and facing,</p>\n\n<pre><code>WARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\n</code></pre>\n\n<p>exception while I run my stand-alone programe in hibernate 5.2.9 version. But in hibernate 4 version all my code runs well. I looked for many questions and solve but not working answer i got.</p>\n\n<blockquote>\n  <p>Configuration file</p>\n</blockquote>\n\n<pre><code>hibernate.cfg.xml\n\n    &lt;hibernate-configuration&gt;\n      &lt;session-factory&gt;\n        &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n        &lt;property name=\"hibernate.connection.driver_class\"&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n        &lt;property name=\"hibernate.connection.url\"&gt;jdbc:mysql://localhost:3306/test&lt;/property&gt;\n        &lt;property name=\"hibernate.connection.username\"&gt;root&lt;/property&gt;\n        &lt;property name=\"hibernate.connection.password\"&gt;admin&lt;/property&gt;\n        &lt;property name=\"hibernate.connection.pool_size\"&gt;20&lt;/property&gt;\n        &lt;property name=\"hibernate.show_sql\"&gt;true&lt;/property&gt;\n        &lt;property name=\"hibernate.hbm2ddl.auto\"&gt;create&lt;/property&gt;\n        &lt;mapping class=\"com.test.hibernate14417.MyTable\"&gt;&lt;/mapping&gt;\n      &lt;/session-factory&gt;\n    &lt;/hibernate-configuration&gt;\n</code></pre>\n\n<blockquote>\n  <p>Pom.xml</p>\n</blockquote>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.test&lt;/groupId&gt;\n    &lt;artifactId&gt;Hibernate14417&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;repositories&gt;\n    &lt;/repositories&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;5.2.9.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;4.3.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\n            &lt;artifactId&gt;jtds&lt;/artifactId&gt;\n            &lt;version&gt;1.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;3.1.11&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n\n<blockquote>\n  <p>Utility file</p>\n</blockquote>\n\n<pre><code>package com.test.hibernate14417;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.boot.Metadata;\nimport org.hibernate.boot.MetadataSources;\nimport org.hibernate.boot.registry.StandardServiceRegistry;\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\nimport org.hibernate.service.ServiceRegistry;\n\n\npublic class ExecuteUtil {\n    private static final SessionFactory SESSION_FACTORY=buildSessionFactory();\n\n    private static SessionFactory buildSessionFactory() {\n        try {\n            ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder()\n                    .configure(\"hibernate.cfg.xml\").build();\n\n            Metadata metadata = new MetadataSources(serviceRegistry).buildMetadata();\n\n            return metadata.getSessionFactoryBuilder().build();\n\n        } catch (Throwable ex) {\n            System.err.println(\"Initial SessionFactory creation failed.\" + ex);\n            throw new ExceptionInInitializerError(ex);\n        }\n\n    }\n\n    public static SessionFactory getSESSION_FACTORY() {\n        return SESSION_FACTORY;\n    }\n\n    public static void shutdown(){\n        getSESSION_FACTORY().close();\n    }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Entity file</p>\n</blockquote>\n\n<pre><code>package com.test.hibernate14417;\n\nimport java.io.Serializable;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n\n\n\n@Entity\npublic class MyTable implements Serializable {\n\n    @Id\n  @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n\n    private String name;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Main method</p>\n</blockquote>\n\n<pre><code>package com.test.hibernate14417;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\n\n\npublic class Main {\n    public static void main(String[] args) {\n\n        MyTable mt=new MyTable();\n        mt.setName(\"Man\");\n\n        SessionFactory sessionFactory=ExecuteUtil.getSESSION_FACTORY();\n\n        Session session=sessionFactory.getCurrentSession();\n\n\n        try {\n          session.getTransaction().begin();\n\n          session.save(mt);\n\n          session.getTransaction().commit();\n\n           session.close();\n           sessionFactory.close();\n\n        } catch (Exception e) {\n            System.out.println(e.getStackTrace());\n            session.getTransaction().rollback();\n        }\n\n\n    }\n</code></pre>\n\n<blockquote>\n  <p>Console </p>\n</blockquote>\n\n<pre><code>cd D:\\Netbeans\\Hibernate14417; \"JAVA_HOME=C:\\\\Program Files\\\\Java\\\\jdk1.8.0_121\" cmd /c \"\\\"\\\"C:\\\\Program Files\\\\NetBeans 8.2\\\\java\\\\maven\\\\bin\\\\mvn.bat\\\" -Dexec.args=\\\"-classpath %classpath com.test.hibernate14417.Main\\\" -Dexec.executable=\\\"C:\\\\Program Files\\\\Java\\\\jdk1.8.0_121\\\\bin\\\\java.exe\\\" -Dmaven.ext.class.path=\\\"C:\\\\Program Files\\\\NetBeans 8.2\\\\java\\\\maven-nblib\\\\netbeans-eventspy.jar\\\" -Dfile.encoding=UTF-8 org.codehaus.mojo:exec-maven-plugin:1.2.1:exec\\\"\"\nRunning NetBeans Compile On Save execution. Phase execution is skipped and output directories of dependency projects (with Compile on Save turned on) will be used instead of their jar artifacts.\nScanning for projects...\n\n------------------------------------------------------------------------\nBuilding Hibernate14417 1.0-SNAPSHOT\n------------------------------------------------------------------------\n\n--- exec-maven-plugin:1.2.1:exec (default-cli) @ Hibernate14417 ---\nApr 14, 2017 10:41:51 AM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {5.2.9.Final}\nApr 14, 2017 10:41:51 AM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\nApr 14, 2017 10:41:53 AM org.hibernate.boot.jaxb.internal.stax.LocalXmlResourceResolver resolveEntity\nWARN: HHH90000012: Recognized obsolete hibernate namespace http://hibernate.sourceforge.net/hibernate-configuration. Use namespace http://www.hibernate.org/dtd/hibernate-configuration instead.  Support for obsolete DTD/XSD namespaces may be removed at any time.\nApr 14, 2017 10:41:54 AM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\nApr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\nApr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001005: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost:3306/test]\nApr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001001: Connection properties: {user=root, password=****}\nApr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001003: Autocommit mode: false\nApr 14, 2017 10:41:54 AM org.hibernate.engine.jdbc.connections.internal.PooledConnections &lt;init&gt;\nINFO: HHH000115: Hibernate connection pool size: 20 (min=1)\nApr 14, 2017 10:41:55 AM org.hibernate.dialect.Dialect &lt;init&gt;\nINFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\nApr 14, 2017 10:41:55 AM org.hibernate.engine.jdbc.env.internal.LobCreatorBuilderImpl useContextualLobCreation\nINFO: HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4\nHibernate: drop table if exists hibernate_sequence\nApr 14, 2017 10:41:58 AM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\nINFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@24111ef1] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.\nHibernate: drop table if exists MyTable\nHibernate: create table hibernate_sequence (next_val bigint) type=MyISAM\nApr 14, 2017 10:41:58 AM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\nINFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@531f4093] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.\nApr 14, 2017 10:41:58 AM org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl handleException\nWARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\n    at com.test.hibernate14417.ExecuteUtil.buildSessionFactory(ExecuteUtil.java:29)\n    at com.test.hibernate14417.ExecuteUtil.&lt;clinit&gt;(ExecuteUtil.java:20)\n    at com.test.hibernate14417.Main.main(Main.java:21)\nCaused by: java.sql.SQLException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type=MyISAM' at line 1\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2926)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1571)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1666)\n    at com.mysql.jdbc.Connection.execSQL(Connection.java:2972)\n    at com.mysql.jdbc.Connection.execSQL(Connection.java:2902)\n    at com.mysql.jdbc.Statement.execute(Statement.java:529)\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\n    ... 13 more\n\nHibernate: insert into hibernate_sequence values ( 1 )\nApr 14, 2017 10:41:58 AM org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl handleException\nWARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\n    at com.test.hibernate14417.ExecuteUtil.buildSessionFactory(ExecuteUtil.java:29)\n    at com.test.hibernate14417.ExecuteUtil.&lt;clinit&gt;(ExecuteUtil.java:20)\n    at com.test.hibernate14417.Main.main(Main.java:21)\nCaused by: java.sql.SQLException: Table 'test.hibernate_sequence' doesn't exist\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2926)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1571)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1666)\n    at com.mysql.jdbc.Connection.execSQL(Connection.java:2972)\n    at com.mysql.jdbc.Connection.execSQL(Connection.java:2902)\n    at com.mysql.jdbc.Statement.execute(Statement.java:529)\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\n    ... 13 more\n\nHibernate: create table MyTable (id integer not null, name varchar(255), primary key (id)) type=MyISAM\nApr 14, 2017 10:41:58 AM org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl handleException\nWARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\n    at com.test.hibernate14417.ExecuteUtil.buildSessionFactory(ExecuteUtil.java:29)\n    at com.test.hibernate14417.ExecuteUtil.&lt;clinit&gt;(ExecuteUtil.java:20)\n    at com.test.hibernate14417.Main.main(Main.java:21)\nCaused by: java.sql.SQLException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type=MyISAM' at line 1\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2926)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1571)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1666)\n    at com.mysql.jdbc.Connection.execSQL(Connection.java:2972)\n    at com.mysql.jdbc.Connection.execSQL(Connection.java:2902)\n    at com.mysql.jdbc.Statement.execute(Statement.java:529)\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\n    ... 13 more\n\nApr 14, 2017 10:41:58 AM org.hibernate.tool.schema.internal.SchemaCreatorImpl applyImportSources\nINFO: HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@7776ab'\nException in thread \"main\" org.hibernate.HibernateException: No CurrentSessionContext configured!\n    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:454)\n    at com.test.hibernate14417.Main.main(Main.java:23)\n</code></pre>\n"},{"tags":["java","junit","mockito","httpclient","powermockito"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1677245128,"post_id":75544329,"comment_id":133304747,"body_markdown":"`HttpClientBuilder builder = mock(HttpClientBuilder.class); when(builder.build()).thenReturn(clientMock); when(HttpClient.newBuilder()).thenReturn(builder);` does it work? Maybe also try `RETURN_DEEP_STUBS` in your `mockStatic` call. Also, `mockStatic` should be used with a try-with-resources block","body":"<code>HttpClientBuilder builder = mock(HttpClientBuilder.class); when(builder.build()).thenReturn(clientMock); when(HttpClient.newBuilder()).thenReturn(builder);</code> does it work? Maybe also try <code>RETURN_DEEP_STUBS</code> in your <code>mockStatic</code> call. Also, <code>mockStatic</code> should be used with a try-with-resources block"}],"owner":{"account_id":3299519,"reputation":776,"user_id":2776012,"accept_rate":0,"display_name":"Shivayan Mukherjee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677158522,"creation_date":1677152453,"question_id":75544329,"body_markdown":"The following is the test method where I am trying to return a mocked HTTPClient object, however after static mocking the HttpClient class, the HttpClient.newBuilder() step returns null\r\n\r\n```\r\n@RunWith(PowerMockRunner.class)\r\n@PrepareForTest(HttpClient.class)\r\nclass UtilityServiceTest {\r\n\r\n@Mock\r\nHttpClient clientMock;\r\n\r\n@Mock\r\nBuilder builderMock;\r\n\r\n    @Test\r\n\tpublic void testPopulateStudentDetails() throws IOException, InterruptedException, InstallerException {\r\n\t\t\r\n\t\t\r\n\t\tmockStatic(HttpClient.class);\r\n\t\twhen(HttpClient.newBuilder().build()).thenReturn(clientMock);\r\n\t\t\r\n\t\tUtilityService utilityService = new UtilityService();\r\n\t\twhen(clientMock.send(Mockito.any(HttpRequest.class), Mockito.eq(HttpResponse.BodyHandlers.ofString()))).thenReturn(responseMock);\r\n\t\tutilityService.populateStudentDetails(studentId, configFile);\r\n\t\t\r\n\t\t}\r\n}\r\n\r\n\r\npublic void testPopulateStudentDetails(String studentID, Properties configFile){\r\n\r\nHttpClient client = HttpClient.newBuilder().version(Version.HTTP_1_1).build();\r\n..........\r\n.........\r\n}","title":"Mocked Static HttpClient.newBuilder() returns null","body":"<p>The following is the test method where I am trying to return a mocked HTTPClient object, however after static mocking the HttpClient class, the HttpClient.newBuilder() step returns null</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(HttpClient.class)\nclass UtilityServiceTest {\n\n@Mock\nHttpClient clientMock;\n\n@Mock\nBuilder builderMock;\n\n    @Test\n    public void testPopulateStudentDetails() throws IOException, InterruptedException, InstallerException {\n        \n        \n        mockStatic(HttpClient.class);\n        when(HttpClient.newBuilder().build()).thenReturn(clientMock);\n        \n        UtilityService utilityService = new UtilityService();\n        when(clientMock.send(Mockito.any(HttpRequest.class), Mockito.eq(HttpResponse.BodyHandlers.ofString()))).thenReturn(responseMock);\n        utilityService.populateStudentDetails(studentId, configFile);\n        \n        }\n}\n\n\npublic void testPopulateStudentDetails(String studentID, Properties configFile){\n\nHttpClient client = HttpClient.newBuilder().version(Version.HTTP_1_1).build();\n..........\n.........\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3747484,"reputation":3573,"user_id":3115822,"display_name":"Borja"},"score":0,"creation_date":1677222938,"post_id":75545288,"comment_id":133298920,"body_markdown":"Please don&#39;t post code images or bugs if possible, copy your code or code error into question with block code format: https://stackoverflow.com/help/how-to-ask","body":"Please don&#39;t post code images or bugs if possible, copy your code or code error into question with block code format: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}],"answers":[{"tags":[],"owner":{"account_id":11796547,"reputation":1,"user_id":8631135,"display_name":"Vitaliy Che"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677158478,"creation_date":1677158478,"answer_id":75545420,"question_id":75545288,"body_markdown":"It seems like the chromedriver executable file is not found or not accessible.","title":"Selenium doesn&#39;t open browser","body":"<p>It seems like the chromedriver executable file is not found or not accessible.</p>\n"}],"owner":{"account_id":27860505,"reputation":1,"user_id":21273158,"display_name":"Maged Gamil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677158478,"creation_date":1677157787,"question_id":75545288,"body_markdown":"I just started learning selenium using Java and I&#39;m trying to run my first test but [enter image description here](https://i.stack.imgur.com/iW2ar.png)Google chrome browser doesn&#39;t open and I get an error, could someone please tell me what&#39;s wrong and how to fix it? I have attached screenshots here, https://prnt.sc/80BUREDOXF5P , https://prnt.sc/-KlCUYpi4K_b [enter image description here](https://i.sta[enter image description here](https://i.stack.imgur.com/qLYCW.png)ck.imgur.com/a9Yub.png)\r\n\r\nI tried to run an automated test and I was excpecting google chrome to open but that didn&#39;t happen and I got an error ","title":"Selenium doesn&#39;t open browser","body":"<p>I just started learning selenium using Java and I'm trying to run my first test but <a href=\"https://i.stack.imgur.com/iW2ar.png\" rel=\"nofollow noreferrer\">enter image description here</a>Google chrome browser doesn't open and I get an error, could someone please tell me what's wrong and how to fix it? I have attached screenshots here, <a href=\"https://prnt.sc/80BUREDOXF5P\" rel=\"nofollow noreferrer\">https://prnt.sc/80BUREDOXF5P</a> , <a href=\"https://prnt.sc/-KlCUYpi4K_b\" rel=\"nofollow noreferrer\">https://prnt.sc/-KlCUYpi4K_b</a> [enter image description here](https://i.sta<a href=\"https://i.stack.imgur.com/qLYCW.png\" rel=\"nofollow noreferrer\">enter image description here</a>ck.imgur.com/a9Yub.png)</p>\n<p>I tried to run an automated test and I was excpecting google chrome to open but that didn't happen and I got an error</p>\n"},{"tags":["java","oop","design-patterns"],"owner":{"account_id":21640178,"reputation":29,"user_id":15962528,"display_name":"arin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1677158349,"creation_date":1677158349,"question_id":75545397,"body_markdown":"I have been asked to design a Paint Application in JAVA .It is just a implementation problem not a original Paint GUI where we can draw.\r\n\r\nRequirements:\r\n\r\n1.It should have a File Menu : which would have 3 options :\r\na. A New File\r\nb. Save the file\r\nc. Open the file which we last saved\r\n\r\n2.It should support drawing 3 Shapes\r\na. Circle\r\nb. Rectangle\r\nc. Line\r\n\r\n3.We can color the shapes\r\n\r\n\r\nSo I created a Interface called &quot;Shape&quot; inside which I have two method signatures\r\n\r\n1.draw();\r\n2.color(String color);\r\n\r\nThen i created 3 classes &quot;Circle&quot;, &quot;Line&quot; and &quot;Rectangle&quot; and implemented the &quot;Shape&quot; Interfaces and gave method definition to draw() and color() in all the three classes.\r\n\r\nSomething like this:\r\n\r\n\r\n \r\n```\r\n   public class Line implements Shape {\r\n\r\n        @Override\r\n        public String draw() {\r\n            return &quot;Line is drawn&quot;;\r\n        }\r\n        @Override\r\n        public String color(String color) {\r\n            return &quot;Color of line is &quot;+color;\r\n        }\r\n    }\r\n\r\n```\r\n\r\nI have also created a Paint Class which would be my main class or object of this class would be the new Paint Canvas.\r\n\r\nI have made it something like this till now\r\n\r\n    public class Paint {\r\n    \r\n        List&lt;Shape&gt; shapes;\r\n        public Paint(){\r\n            shapes = new ArrayList&lt;&gt;();\r\n        }\r\n    \r\n        //to draw a line call Line Class\r\n        public Line drawLine(){\r\n            return new Line();\r\n        }\r\n    \r\n    }\r\n\r\nBut now I am confused how do I implement the features\r\n1.Open a New Paint File\r\n2.Save the Paint File\r\n3.Open the file we have saved.\r\n\r\nHow do i implement all these features just by using plain Java ? Or which Data Structure shall I use for this. Can someone please help me design this ?\r\n\r\n[![Image of my project structure]](https://i.stack.imgur.com/Dk3Qn.png)\r\n\r\n","title":"How do i design a Paint Application like MS Paint using JAVA OOps and design Principles?","body":"<p>I have been asked to design a Paint Application in JAVA .It is just a implementation problem not a original Paint GUI where we can draw.</p>\n<p>Requirements:</p>\n<p>1.It should have a File Menu : which would have 3 options :\na. A New File\nb. Save the file\nc. Open the file which we last saved</p>\n<p>2.It should support drawing 3 Shapes\na. Circle\nb. Rectangle\nc. Line</p>\n<p>3.We can color the shapes</p>\n<p>So I created a Interface called &quot;Shape&quot; inside which I have two method signatures</p>\n<p>1.draw();\n2.color(String color);</p>\n<p>Then i created 3 classes &quot;Circle&quot;, &quot;Line&quot; and &quot;Rectangle&quot; and implemented the &quot;Shape&quot; Interfaces and gave method definition to draw() and color() in all the three classes.</p>\n<p>Something like this:</p>\n<pre><code>   public class Line implements Shape {\n\n        @Override\n        public String draw() {\n            return &quot;Line is drawn&quot;;\n        }\n        @Override\n        public String color(String color) {\n            return &quot;Color of line is &quot;+color;\n        }\n    }\n\n</code></pre>\n<p>I have also created a Paint Class which would be my main class or object of this class would be the new Paint Canvas.</p>\n<p>I have made it something like this till now</p>\n<pre><code>public class Paint {\n\n    List&lt;Shape&gt; shapes;\n    public Paint(){\n        shapes = new ArrayList&lt;&gt;();\n    }\n\n    //to draw a line call Line Class\n    public Line drawLine(){\n        return new Line();\n    }\n\n}\n</code></pre>\n<p>But now I am confused how do I implement the features\n1.Open a New Paint File\n2.Save the Paint File\n3.Open the file we have saved.</p>\n<p>How do i implement all these features just by using plain Java ? Or which Data Structure shall I use for this. Can someone please help me design this ?</p>\n<p><a href=\"https://i.stack.imgur.com/Dk3Qn.png\" rel=\"nofollow noreferrer\">![Image of my project structure]</a></p>\n"},{"tags":["java","automation","excel-2010"],"comments":[{"owner":{"account_id":13055248,"reputation":559,"user_id":9434323,"display_name":"Sterconium"},"score":0,"creation_date":1570790082,"post_id":58339395,"comment_id":103034293,"body_markdown":"Personally I&#39;ve never used it, but there is a framework for working with xlxs: https://www.mkyong.com/java/apache-poi-reading-and-writing-excel-file-in-java/","body":"Personally I&#39;ve never used it, but there is a framework for working with xlxs: <a href=\"https://www.mkyong.com/java/apache-poi-reading-and-writing-excel-file-in-java/\" rel=\"nofollow noreferrer\">mkyong.com/java/&hellip;</a>"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1570790084,"post_id":58339395,"comment_id":103034295,"body_markdown":"And the question is…?","body":"And the question is…?"},{"owner":{"account_id":16596219,"reputation":109,"user_id":11993013,"display_name":"Vipin Singh"},"score":0,"creation_date":1570790358,"post_id":58339395,"comment_id":103034412,"body_markdown":"Setup and Request are column name in excel, i have shared the image , how data has to be written in excel","body":"Setup and Request are column name in excel, i have shared the image , how data has to be written in excel"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1570790501,"post_id":58339395,"comment_id":103034492,"body_markdown":"Why do you create cells 8 and 9 when you obviously want to insert values into the cells 0 and 1? Additionally, you don&#39;t close the workbook instance, which may lead to broken files.","body":"Why do you create cells 8 and 9 when you obviously want to insert values into the cells 0 and 1? Additionally, you don&#39;t close the workbook instance, which may lead to broken files."}],"answers":[{"tags":[],"owner":{"account_id":3723726,"reputation":387,"user_id":3098071,"display_name":"SJN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570790892,"creation_date":1570790892,"answer_id":58339642,"question_id":58339395,"body_markdown":"I think your for loop is not correct   \r\n\r\n     for(int i=1; i&lt;=n; i++){\r\nIt should be \r\n\r\n    for(int i=1; i&lt;=lastRow; i++){\r\n\r\n","title":"Write multiple records in two column in excel using java","body":"<p>I think your for loop is not correct   </p>\n\n<pre><code> for(int i=1; i&lt;=n; i++){\n</code></pre>\n\n<p>It should be </p>\n\n<pre><code>for(int i=1; i&lt;=lastRow; i++){\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14463217,"reputation":177,"user_id":10447465,"display_name":"Coma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677158030,"creation_date":1570791361,"answer_id":58339764,"question_id":58339395,"body_markdown":"```java\r\n\r\nWorkbook workbook = new XSSFWorkbook();\r\n\r\nSheet sheet = workbook.createSheet();\r\n\r\nRow headerRow = sheet.createRow(0);\r\n\r\nheaderRow.createCell(0).setCellValue(&quot;Setupid&quot;);\r\nheaderRow.createCell(1).setCellValue(&quot;Request&quot;);\r\n\r\nint cellCount = 10;\r\n\r\nfor (int i = 1; i &lt;= cellCount; i++) {\r\n\r\n    Row row = sheet.createRow(i);\r\n\r\n    row.createCell(0).setCellValue(&quot;cell &quot; + i);\r\n    row.createCell(1).setCellValue(&quot;cell &quot; + i);\r\n}\r\n\r\nFile file = new File(System.getProperty(&quot;user.dir&quot;) \r\n                            + &quot;/src/main/uat/testdata/FreeTestData.xlsx&quot;);\r\n\r\nif(file.exists()) {\r\n    file.delete();\r\n}\r\n\r\nfile.createNewFile();\r\n\r\nFileOutputStream fos = new FileOutputStream(file);\r\n\r\nworkbook.write(fos);\r\n\r\nfos.close();\r\n\r\nworkbook.close();\r\n\r\n```","title":"Write multiple records in two column in excel using java","body":"<pre class=\"lang-java prettyprint-override\"><code>\nWorkbook workbook = new XSSFWorkbook();\n\nSheet sheet = workbook.createSheet();\n\nRow headerRow = sheet.createRow(0);\n\nheaderRow.createCell(0).setCellValue(&quot;Setupid&quot;);\nheaderRow.createCell(1).setCellValue(&quot;Request&quot;);\n\nint cellCount = 10;\n\nfor (int i = 1; i &lt;= cellCount; i++) {\n\n    Row row = sheet.createRow(i);\n\n    row.createCell(0).setCellValue(&quot;cell &quot; + i);\n    row.createCell(1).setCellValue(&quot;cell &quot; + i);\n}\n\nFile file = new File(System.getProperty(&quot;user.dir&quot;) \n                            + &quot;/src/main/uat/testdata/FreeTestData.xlsx&quot;);\n\nif(file.exists()) {\n    file.delete();\n}\n\nfile.createNewFile();\n\nFileOutputStream fos = new FileOutputStream(file);\n\nworkbook.write(fos);\n\nfos.close();\n\nworkbook.close();\n\n</code></pre>\n"}],"owner":{"account_id":16596219,"reputation":109,"user_id":11993013,"display_name":"Vipin Singh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1912,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58339764,"answer_count":2,"score":0,"last_activity_date":1677158030,"creation_date":1570789979,"question_id":58339395,"body_markdown":"I have two column namely Setup and Request in excel, need to write multiple rows in excel using java\r\n\r\n```Java\r\npublic void WriteExcelValues() throws IOException {\r\nString Ustr= setup.getText();\r\nString urequest = request.getText();\r\n\tFile file = new File(System.getProperty(&quot;user.dir&quot;) \r\n\t\t\t\t\t\t\t+ &quot;/src/main/uat/testdata/FreeTestData.xlsx&quot;);\r\n\tFileInputStream fis = new FileInputStream(file);\r\n\tWorkbook workbook = new XSSFWorkbook(fis);\r\n\tSheet sheet = workbook.getSheetAt(0);\r\n\tint lastRow = sheet.getLastRowNum();\r\n\tint n = 1;\r\n\t\t \r\n\tfor (int i = 1; i &lt;= n; i++) {\t \r\n\t\tRow row = sheet.getRow(i); \r\n\t\tCell cell = row.createCell(8);\r\n\t\tCell cell1 = row.createCell(9);\r\n\t\t \r\n\t\tcell.setCellValue(Ustr);\r\n\t\tcell1.setCellValue(urequest);\r\n\t\t//cell.setCellValue(&quot;AcknowledgementId&quot;); \r\n\t}\r\n\t\t \r\n\tFileOutputStream fos = new FileOutputStream(file);\t \r\n\tworkbook.write(fos);\r\n\tfos.close();\r\n}\r\n```\r\n\r\nfor example\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAbove code is not complete and doesn&#39;t satisfy the criteria also.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GT5LL.png","title":"Write multiple records in two column in excel using java","body":"<p>I have two column namely Setup and Request in excel, need to write multiple rows in excel using java</p>\n\n<pre><code>public void WriteExcelValues() throws IOException {\nString Ustr= setup.getText();\nString urequest = request.getText();\n    File file = new File(System.getProperty(\"user.dir\") \n                            + \"/src/main/uat/testdata/FreeTestData.xlsx\");\n    FileInputStream fis = new FileInputStream(file);\n    Workbook workbook = new XSSFWorkbook(fis);\n    Sheet sheet = workbook.getSheetAt(0);\n    int lastRow = sheet.getLastRowNum();\n    int n = 1;\n\n    for (int i = 1; i &lt;= n; i++) {   \n        Row row = sheet.getRow(i); \n        Cell cell = row.createCell(8);\n        Cell cell1 = row.createCell(9);\n\n        cell.setCellValue(Ustr);\n        cell1.setCellValue(urequest);\n        //cell.setCellValue(\"AcknowledgementId\"); \n    }\n\n    FileOutputStream fos = new FileOutputStream(file);   \n    workbook.write(fos);\n    fos.close();\n}\n</code></pre>\n\n<p>for example</p>\n\n<p><a href=\"https://i.stack.imgur.com/GT5LL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GT5LL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Above code is not complete and doesn't satisfy the criteria also.</p>\n"},{"tags":["java","python-2.7","jar","burp","js2py"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1677187526,"post_id":75545238,"comment_id":133294030,"body_markdown":"Jython and Python 2 are both outdated and deprecated technologies. And using an emulated language (Jython) to emulate a third language (JS) is a bad idea. Better directly include a JS runtime/engine into your Java project.","body":"Jython and Python 2 are both outdated and deprecated technologies. And using an emulated language (Jython) to emulate a third language (JS) is a bad idea. Better directly include a JS runtime/engine into your Java project."},{"owner":{"account_id":20648872,"reputation":35,"user_id":15159673,"display_name":"Oleksandr Ovcharenko"},"score":0,"creation_date":1677231256,"post_id":75545238,"comment_id":133300921,"body_markdown":"I should use Jython because I have working task to used it) You said it&#39;s better to include a JS runtime/engine into your Java project. Do you mean ScriptEngineManager engine? Can I include it to the Python project?","body":"I should use Jython because I have working task to used it) You said it&#39;s better to include a JS runtime/engine into your Java project. Do you mean ScriptEngineManager engine? Can I include it to the Python project?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1677235737,"post_id":75545238,"comment_id":133302133,"body_markdown":"Fro my perspective Jython and Jython3 are dead. Using it for a new project is a very bad idea. Also try to avoid mixing languages/interpreting languages. That will only increase the effort for maintenance. Run each language in separate process/VM and communicate via network between them, e.g. using GRPC, JSON-RPC or something similar.","body":"Fro my perspective Jython and Jython3 are dead. Using it for a new project is a very bad idea. Also try to avoid mixing languages/interpreting languages. That will only increase the effort for maintenance. Run each language in separate process/VM and communicate via network between them, e.g. using GRPC, JSON-RPC or something similar."},{"owner":{"account_id":20648872,"reputation":35,"user_id":15159673,"display_name":"Oleksandr Ovcharenko"},"score":0,"creation_date":1677239292,"post_id":75545238,"comment_id":133303102,"body_markdown":"Truly saying I agree with you, that Jython is a bad idea. But problem is that Burp can run Python code only in Jython, that is why I should use it. You said I can separate Python and js precess, will it work in Burp app? Because js process must be working somewhere","body":"Truly saying I agree with you, that Jython is a bad idea. But problem is that Burp can run Python code only in Jython, that is why I should use it. You said I can separate Python and js precess, will it work in Burp app? Because js process must be working somewhere"}],"owner":{"account_id":20648872,"reputation":35,"user_id":15159673,"display_name":"Oleksandr Ovcharenko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677157576,"creation_date":1677157576,"question_id":75545238,"body_markdown":"I am writing Python application as extension for Burp Suite app. \r\nMy application should parse JSON file which is a Postman collection, find all requests from collection and add it to the Burp site map. I successfully create script which parse requests themselves, its body and headers. But some requests contain pre-request scripts which is written using JavaScript. \r\n\r\nUsing default Python 2.7 I wrote such code with js2py library which allows to run JavaScript code using Python:\r\n``` \r\nimport js2py\r\nclass Postman:\r\n    collectionVariables = []\r\n    globals = []\r\n    environment = []\r\n\r\n    def run_pre_request_scripts(self, request):\r\n        exec_script = self.get_exec_scripts(request)\r\n        if exec_script is not None:\r\n            js_code = self.reformat_script(exec_script)\r\n            js_code = &quot;pm = {&#39;collectionVariables&#39;: [], &#39;globals&#39;: [], &#39;environment&#39;: []};\\nvariable = {}\\n&quot; + js_code + &quot;\\npm;&quot;\r\n\r\n            pm = js2py.eval_js(js_code)\r\n\r\n            self.collectionVariables.append(pm.collectionVariables)\r\n            self.globals.append(pm.globals)\r\n            self.environment.append(pm.environment)\r\n\r\n    def reformat_script(self, str_list):\r\n        formatted_script = []\r\n        for s in str_list:\r\n            if not s.strip():\r\n                continue\r\n            elif s.startswith((&#39;var&#39;, &#39;const&#39;, &#39;let&#39;)):\r\n                formatted_str = s.strip().replace(&#39;var&#39;, &#39;&#39;).replace(&#39;const&#39;, &#39;&#39;).replace(&#39;let&#39;, &#39;&#39;).strip(&quot; &quot;)\r\n                formatted_script.append(formatted_str)\r\n            elif &quot;pm.collectionVariables.set&quot; in s:\r\n                name = s.split(&quot;(&quot;)[1].split(&quot;,&quot;)[0].strip(&quot;&#39;&quot;)\r\n                value = s.split(&quot;,&quot;)[1].strip().strip(&quot;)&quot;)\r\n                formatted_str = &quot;pm.collectionVariables.push({&#39;value&#39;: %s, &#39;key&#39;: &#39;%s&#39;});&quot; % (value, name)\r\n                formatted_script.append(formatted_str)\r\n            elif &quot;pm.globals.set&quot; in s:\r\n                variable_name = s.split(&quot;(&quot;)[1].split(&quot;,&quot;)[0].strip().strip(&#39;&quot;&#39;)\r\n                formatted_str = &quot;pm.globals.push({&#39;value&#39;: %s, &#39;key&#39;: &#39;%s&#39;});&quot; % (variable_name, variable_name)\r\n                formatted_script.append(formatted_str)\r\n            elif &quot;pm.environment.set&quot; in s:\r\n                variable_name = s.split(&quot;(&quot;)[1].split(&quot;,&quot;)[0].strip().strip(&#39;&quot;&#39;)\r\n                formatted_str = &quot;pm.environment.push({&#39;value&#39;: %s, &#39;key&#39;: &#39;%s&#39;});&quot; % (variable_name, variable_name)\r\n                formatted_script.append(formatted_str)\r\n            else:\r\n                formatted_script.append(s.strip())\r\n\r\n        return &#39;\\n&#39;.join(line for line in formatted_script if not line.startswith(&#39;//&#39;))\r\n```\r\nUsing this code I have ability to receive all variables from pre-request script like this:\r\n```\r\npm.collectionVariables.set(&#39;today-1year&#39;,&#39;2020-01-18&#39;)\r\npm.collectionVariables.set(&#39;today-3year&#39;,&#39;2018-01-18&#39;)\r\npm.collectionVariables.set(&#39;today-5year&#39;,&#39;2016-01-18&#39;)\r\npm.collectionVariables.set(&#39;today-10year&#39;,&#39;2011-01-18&#39;)\r\npm.collectionVariables.set(&#39;today+5year&#39;,&#39;2026-01-18&#39;)\r\n\r\n// generate random number between 1 and 10000\r\nconst number = (Math.floor(Math.random()*10000)*1);\r\n\r\n// generate &#39;name&#39;as unique value for the Party1\r\n\r\nvar CustomerName1 = &quot;MPCustomer1&quot; + number; \r\npm.globals.set(&quot;CustomerName1&quot;, CustomerName1);\r\n\r\nconsole.log(&quot;CustomerName1:&quot;, CustomerName1);\r\n\r\n\r\nconsole.log(&quot;CustomerName1:&quot;, CustomerName1);\r\n``` \r\nThis code works fine locally using Python 2.7\r\n\r\nMy problem is, I need to run such code using Jython 2.7 which I upload as .jar file to the Burp Suite app. To run this code I need to add js2py library to .jar file because it does not contain js2py library itself.\r\nI used such variants:\r\n1) Run this commands to add library using pip\r\n\r\njava -jar jython-standalone-2.7.3.jar -m pip ensurepip\r\n\r\njava -jar jython-standalone-2.7.3.jar -m pip install js2py\r\n\r\nBut I got such error massage:\r\n\r\nCollecting js2py\r\n  Using cached Js2Py-0.74.tar.gz (2.5 MB)\r\n    ERROR: Error [Errno 2] No such file or directory while executing command python setup.py egg_info\r\nERROR: Could not install packages due to an EnvironmentError: [Errno 2] No such file or directory\r\n\r\n2) I tried to add js2py library manually to the Jython jar file running this commands \r\n\r\njar xf jython-standalone-2.7.3.jar\r\n\r\ncp -r  /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/js2py Lib/\r\n\r\njar cfm jython-standalone-2.7.3-modified.jar META-INF/MANIFEST.MF .\r\n\r\nAfter these command in Lib folder will be placed js2py library. But if I will add this modified Jython .jar file to the Burp I will received such error:\r\n\r\nAttributeError: &#39;tablecode&#39; object has no attribute &#39;co_names&#39;\r\n\r\nAnd my python script will not start at all.\r\n\r\nGive me an advice how can I add js2py library to the .jar file, or maybe send my such file with library already installed. Because I totally don&#39;t know what another variants I can used. I would understand if js2py library was allowed only for Python 3, but I used locally Python 2.7 and my code work without any problems. Thank you!","title":"Add ability to the Jython2.7 run JavaScript code","body":"<p>I am writing Python application as extension for Burp Suite app.\nMy application should parse JSON file which is a Postman collection, find all requests from collection and add it to the Burp site map. I successfully create script which parse requests themselves, its body and headers. But some requests contain pre-request scripts which is written using JavaScript.</p>\n<p>Using default Python 2.7 I wrote such code with js2py library which allows to run JavaScript code using Python:</p>\n<pre><code>import js2py\nclass Postman:\n    collectionVariables = []\n    globals = []\n    environment = []\n\n    def run_pre_request_scripts(self, request):\n        exec_script = self.get_exec_scripts(request)\n        if exec_script is not None:\n            js_code = self.reformat_script(exec_script)\n            js_code = &quot;pm = {'collectionVariables': [], 'globals': [], 'environment': []};\\nvariable = {}\\n&quot; + js_code + &quot;\\npm;&quot;\n\n            pm = js2py.eval_js(js_code)\n\n            self.collectionVariables.append(pm.collectionVariables)\n            self.globals.append(pm.globals)\n            self.environment.append(pm.environment)\n\n    def reformat_script(self, str_list):\n        formatted_script = []\n        for s in str_list:\n            if not s.strip():\n                continue\n            elif s.startswith(('var', 'const', 'let')):\n                formatted_str = s.strip().replace('var', '').replace('const', '').replace('let', '').strip(&quot; &quot;)\n                formatted_script.append(formatted_str)\n            elif &quot;pm.collectionVariables.set&quot; in s:\n                name = s.split(&quot;(&quot;)[1].split(&quot;,&quot;)[0].strip(&quot;'&quot;)\n                value = s.split(&quot;,&quot;)[1].strip().strip(&quot;)&quot;)\n                formatted_str = &quot;pm.collectionVariables.push({'value': %s, 'key': '%s'});&quot; % (value, name)\n                formatted_script.append(formatted_str)\n            elif &quot;pm.globals.set&quot; in s:\n                variable_name = s.split(&quot;(&quot;)[1].split(&quot;,&quot;)[0].strip().strip('&quot;')\n                formatted_str = &quot;pm.globals.push({'value': %s, 'key': '%s'});&quot; % (variable_name, variable_name)\n                formatted_script.append(formatted_str)\n            elif &quot;pm.environment.set&quot; in s:\n                variable_name = s.split(&quot;(&quot;)[1].split(&quot;,&quot;)[0].strip().strip('&quot;')\n                formatted_str = &quot;pm.environment.push({'value': %s, 'key': '%s'});&quot; % (variable_name, variable_name)\n                formatted_script.append(formatted_str)\n            else:\n                formatted_script.append(s.strip())\n\n        return '\\n'.join(line for line in formatted_script if not line.startswith('//'))\n</code></pre>\n<p>Using this code I have ability to receive all variables from pre-request script like this:</p>\n<pre><code>pm.collectionVariables.set('today-1year','2020-01-18')\npm.collectionVariables.set('today-3year','2018-01-18')\npm.collectionVariables.set('today-5year','2016-01-18')\npm.collectionVariables.set('today-10year','2011-01-18')\npm.collectionVariables.set('today+5year','2026-01-18')\n\n// generate random number between 1 and 10000\nconst number = (Math.floor(Math.random()*10000)*1);\n\n// generate 'name'as unique value for the Party1\n\nvar CustomerName1 = &quot;MPCustomer1&quot; + number; \npm.globals.set(&quot;CustomerName1&quot;, CustomerName1);\n\nconsole.log(&quot;CustomerName1:&quot;, CustomerName1);\n\n\nconsole.log(&quot;CustomerName1:&quot;, CustomerName1);\n</code></pre>\n<p>This code works fine locally using Python 2.7</p>\n<p>My problem is, I need to run such code using Jython 2.7 which I upload as .jar file to the Burp Suite app. To run this code I need to add js2py library to .jar file because it does not contain js2py library itself.\nI used such variants:</p>\n<ol>\n<li>Run this commands to add library using pip</li>\n</ol>\n<p>java -jar jython-standalone-2.7.3.jar -m pip ensurepip</p>\n<p>java -jar jython-standalone-2.7.3.jar -m pip install js2py</p>\n<p>But I got such error massage:</p>\n<p>Collecting js2py\nUsing cached Js2Py-0.74.tar.gz (2.5 MB)\nERROR: Error [Errno 2] No such file or directory while executing command python setup.py egg_info\nERROR: Could not install packages due to an EnvironmentError: [Errno 2] No such file or directory</p>\n<ol start=\"2\">\n<li>I tried to add js2py library manually to the Jython jar file running this commands</li>\n</ol>\n<p>jar xf jython-standalone-2.7.3.jar</p>\n<p>cp -r  /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/js2py Lib/</p>\n<p>jar cfm jython-standalone-2.7.3-modified.jar META-INF/MANIFEST.MF .</p>\n<p>After these command in Lib folder will be placed js2py library. But if I will add this modified Jython .jar file to the Burp I will received such error:</p>\n<p>AttributeError: 'tablecode' object has no attribute 'co_names'</p>\n<p>And my python script will not start at all.</p>\n<p>Give me an advice how can I add js2py library to the .jar file, or maybe send my such file with library already installed. Because I totally don't know what another variants I can used. I would understand if js2py library was allowed only for Python 3, but I used locally Python 2.7 and my code work without any problems. Thank you!</p>\n"},{"tags":["java","spring-boot","rest","spring-resttemplate","response-entity"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1677108391,"post_id":75539046,"comment_id":133275159,"body_markdown":"&quot;does not seem to work&quot; -- what happens?","body":"&quot;does not seem to work&quot; -- what happens?"},{"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"score":0,"creation_date":1677121441,"post_id":75539046,"comment_id":133276959,"body_markdown":"First error that led me to this was \n`Could not extract response: no suitable HttpMessageConverter found for response type [class java.lang.String] and content type [application/json]\n`. \nI&#39;ve an http message converter for JSON, but my question is about how to handle a list of resources.","body":"First error that led me to this was  <code>Could not extract response: no suitable HttpMessageConverter found for response type [class java.lang.String] and content type [application&#47;json] </code>.  I&#39;ve an http message converter for JSON, but my question is about how to handle a list of resources."}],"answers":[{"tags":[],"owner":{"account_id":27855475,"reputation":26,"user_id":21269064,"display_name":"Madan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677157527,"creation_date":1677108744,"answer_id":75539191,"question_id":75539046,"body_markdown":"Try this please, maybe it works for you.\r\n \r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    // set headers if required\r\n    \r\n    HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n    \r\n    String url = &quot;https://externalapi.io/api/clients&quot;;\r\n    \r\n    ParameterizedTypeReference&lt;List&lt;ClientResource&gt;&gt; responseType = new ParameterizedTypeReference&lt;List&lt;ClientResource&gt;&gt;() {};\r\n    ResponseEntity&lt;List&lt;ClientResource&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, entity, responseType);\r\n    \r\n    List&lt;ClientResource&gt; clientResources = response.getBody();","title":"How to handle a list of resources with ResponseEntity","body":"<p>Try this please, maybe it works for you.</p>\n<pre><code>HttpHeaders headers = new HttpHeaders();\n// set headers if required\n\nHttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\n\nString url = &quot;https://externalapi.io/api/clients&quot;;\n\nParameterizedTypeReference&lt;List&lt;ClientResource&gt;&gt; responseType = new ParameterizedTypeReference&lt;List&lt;ClientResource&gt;&gt;() {};\nResponseEntity&lt;List&lt;ClientResource&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, entity, responseType);\n\nList&lt;ClientResource&gt; clientResources = response.getBody();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16048159,"reputation":31,"user_id":11582788,"display_name":"Saskovic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677139467,"creation_date":1677139467,"answer_id":75542055,"question_id":75539046,"body_markdown":"Madan&#39;s code should work. Next to using the Gson library from Google you can also use ObjectMapper from the Jackson library.\r\n\r\nSee the following:\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE);\r\n    HttpEntity&lt;Object&gt; entity = new HttpEntity&lt;Object&gt;(null, headers);\r\n    \r\n    ResponseEntity&lt;String&gt; response = resttemplate.exchange(\r\n    &quot;https://externalapi.io/api/clients&quot;, HttpMethod.GET, entity, String.class);\r\n    \r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    List&lt;ClientResource&gt; clients = objectMapper.readValue(\r\n    response.getBody(), new TypeReference&lt;List&lt;ClientResource&gt;&gt;() {});","title":"How to handle a list of resources with ResponseEntity","body":"<p>Madan's code should work. Next to using the Gson library from Google you can also use ObjectMapper from the Jackson library.</p>\n<p>See the following:</p>\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.set(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE);\nHttpEntity&lt;Object&gt; entity = new HttpEntity&lt;Object&gt;(null, headers);\n\nResponseEntity&lt;String&gt; response = resttemplate.exchange(\n&quot;https://externalapi.io/api/clients&quot;, HttpMethod.GET, entity, String.class);\n\nObjectMapper objectMapper = new ObjectMapper();\nList&lt;ClientResource&gt; clients = objectMapper.readValue(\nresponse.getBody(), new TypeReference&lt;List&lt;ClientResource&gt;&gt;() {});\n</code></pre>\n"}],"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":437,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1677496811,"accepted_answer_id":75539191,"answer_count":2,"score":-1,"last_activity_date":1677157527,"creation_date":1677107205,"question_id":75539046,"body_markdown":"I have an external REST API that returns a list of `client` objects as json. For example:\r\n```\r\nGET externalapi.io/api/clients\r\n\r\n[ {\r\n    &quot;id&quot; : &quot;b15asgdc-6efd-4a2d-re08-2q3r3bae&quot;,\r\n    &quot;clientName&quot; : &quot;test1&quot;,\r\n    ...\r\n  },\r\n  {\r\n    &quot;id&quot; : &quot;ryec-6efd-4a2d-aa08-29a9drjrteae&quot;,\r\n    &quot;clientName&quot; : &quot;test2&quot;,\r\n    ...\r\n  },\r\n  ...\r\n]\r\n```\r\nMy API calls this external service using Spring&#39;s RestTemplate. The goal is to get the response and parse it into `client` Java objects. I&#39;ve tried the following:\r\n\r\n```java\r\nHttpEntity&lt;Object&gt; entity = new HttpEntity&lt;Object&gt;(null, headers);\r\n\r\nResponseEntity&lt;String&gt; responseEntityJson = resttemplate.exchange(path, HttpMethod.GET, entity, String.class);\r\n\r\nType listType = new TypeToken&lt;ArrayList&lt;ClientResource&gt;&gt;(){}.getType();\r\n\r\nArrayList&lt;ClientResource&gt; responseResources = gson.fromJson(responseEntityJson.getBody(), listType);\r\n```\r\n\r\nMy trouble is with this line:\r\n```java\r\nResponseEntity&lt;String&gt; responseEntityJson = resttemplate.exchange(path, HttpMethod.GET, entity, String.class);\r\n```\r\nMy hope was that I could get the body as a JSON string, and use Google&#39;s GSON to parse it into objects, but this does not seem to work. I&#39;ve seen suggestions to use\r\n```java\r\nResponseEntity&lt;ClientResource&gt; responseEntityJson = resttemplate.exchange(path, HttpMethod.GET, entity, ClientResource.class);\r\n```\r\nbut, I don&#39;t think this works for a list of resources. I can set `ResponseEntity&lt;List&lt;ClientResource&gt;&gt;` but `.exchange()` doesn&#39;t easily accept a type like that. How can I handle a list of resources with ResponseEntity?","title":"How to handle a list of resources with ResponseEntity","body":"<p>I have an external REST API that returns a list of <code>client</code> objects as json. For example:</p>\n<pre><code>GET externalapi.io/api/clients\n\n[ {\n    &quot;id&quot; : &quot;b15asgdc-6efd-4a2d-re08-2q3r3bae&quot;,\n    &quot;clientName&quot; : &quot;test1&quot;,\n    ...\n  },\n  {\n    &quot;id&quot; : &quot;ryec-6efd-4a2d-aa08-29a9drjrteae&quot;,\n    &quot;clientName&quot; : &quot;test2&quot;,\n    ...\n  },\n  ...\n]\n</code></pre>\n<p>My API calls this external service using Spring's RestTemplate. The goal is to get the response and parse it into <code>client</code> Java objects. I've tried the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpEntity&lt;Object&gt; entity = new HttpEntity&lt;Object&gt;(null, headers);\n\nResponseEntity&lt;String&gt; responseEntityJson = resttemplate.exchange(path, HttpMethod.GET, entity, String.class);\n\nType listType = new TypeToken&lt;ArrayList&lt;ClientResource&gt;&gt;(){}.getType();\n\nArrayList&lt;ClientResource&gt; responseResources = gson.fromJson(responseEntityJson.getBody(), listType);\n</code></pre>\n<p>My trouble is with this line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ResponseEntity&lt;String&gt; responseEntityJson = resttemplate.exchange(path, HttpMethod.GET, entity, String.class);\n</code></pre>\n<p>My hope was that I could get the body as a JSON string, and use Google's GSON to parse it into objects, but this does not seem to work. I've seen suggestions to use</p>\n<pre class=\"lang-java prettyprint-override\"><code>ResponseEntity&lt;ClientResource&gt; responseEntityJson = resttemplate.exchange(path, HttpMethod.GET, entity, ClientResource.class);\n</code></pre>\n<p>but, I don't think this works for a list of resources. I can set <code>ResponseEntity&lt;List&lt;ClientResource&gt;&gt;</code> but <code>.exchange()</code> doesn't easily accept a type like that. How can I handle a list of resources with ResponseEntity?</p>\n"},{"tags":["java","fitness"],"comments":[{"owner":{"account_id":146892,"reputation":33550,"user_id":357641,"accept_rate":55,"display_name":"Greg"},"score":0,"creation_date":1300132925,"post_id":5303665,"comment_id":5981275,"body_markdown":"If this is homework, you should include the homework tag.","body":"If this is homework, you should include the homework tag."}],"answers":[{"tags":[],"owner":{"account_id":314918,"reputation":393,"user_id":630384,"display_name":"DHall"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1300133433,"creation_date":1300133058,"answer_id":5303835,"question_id":5303665,"body_markdown":"Looks to me like you&#39;re always returning a blank String from `RandomBinaryString()` - you print out some digits but never actually append them. Use `s = s+&#39;0&#39;`, or `s += &#39;0&#39;`, or `s.concat(&quot;0&quot;)` ,or use a `StringBuilder` , etc...\r\n\r\nI&#39;m assuming `scasol` is your binary string, so that&#39;s empty, then nothing in your `for` loop gets called once, so L and R both stay at 0.0, and you wind up returning 0.0.","title":"Java Fitness Function Not Working","body":"<p>Looks to me like you're always returning a blank String from <code>RandomBinaryString()</code> - you print out some digits but never actually append them. Use <code>s = s+'0'</code>, or <code>s += '0'</code>, or <code>s.concat(\"0\")</code> ,or use a <code>StringBuilder</code> , etc...</p>\n\n<p>I'm assuming <code>scasol</code> is your binary string, so that's empty, then nothing in your <code>for</code> loop gets called once, so L and R both stay at 0.0, and you wind up returning 0.0.</p>\n"},{"tags":[],"owner":{"account_id":46203,"reputation":1640,"user_id":136418,"accept_rate":75,"display_name":"Matthew Sowders"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1300133144,"creation_date":1300133144,"answer_id":5303855,"question_id":5303665,"body_markdown":"Your random string RandomBinaryString only ever prints &#39;s&#39; it never alters it so the sum of the function is equivalent to returning &#39;new String()&#39;.  \r\n\r\nAnother issue, &#39;L = L += 0&#39; is redundant. It is the same as L = 0. Always.\r\n\r\n&#39;R = R+=1&#39; is also redundant, it is the same as R += 1.","title":"Java Fitness Function Not Working","body":"<p>Your random string RandomBinaryString only ever prints 's' it never alters it so the sum of the function is equivalent to returning 'new String()'.  </p>\n\n<p>Another issue, 'L = L += 0' is redundant. It is the same as L = 0. Always.</p>\n\n<p>'R = R+=1' is also redundant, it is the same as R += 1.</p>\n"},{"tags":[],"owner":{"account_id":319297,"reputation":7340,"user_id":636987,"accept_rate":80,"display_name":"Mus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1300134207,"creation_date":1300134207,"answer_id":5304036,"question_id":5303665,"body_markdown":"@DHall Code for scasol constructor:\r\n\r\n    public ScalesSolution(String s)\r\n\t{\r\n\t\tboolean ok = true;\r\n\t\tint n = s.length();\r\n\t\tfor(int i=0;i&lt;n;++i)\r\n\t\t{\r\n\t\t\tchar si = s.charAt(i);\r\n\t\t\tif (si != &#39;0&#39; &amp;&amp; si != &#39;1&#39;) ok = false;\r\n\t\t}\r\n\t\tif (ok)\r\n\t\t{\r\n\t\t\tscasol = s;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tscasol = RandomBinaryString(n);\r\n\t\t}\r\n\t}\r\n\r\nIf this is not of help I can post the code for the class up.\r\n\r\nThanks.\r\n\r\nMick.","title":"Java Fitness Function Not Working","body":"<p>@DHall Code for scasol constructor:</p>\n\n<pre><code>public ScalesSolution(String s)\n{\n    boolean ok = true;\n    int n = s.length();\n    for(int i=0;i&lt;n;++i)\n    {\n        char si = s.charAt(i);\n        if (si != '0' &amp;&amp; si != '1') ok = false;\n    }\n    if (ok)\n    {\n        scasol = s;\n    }\n    else\n    {\n        scasol = RandomBinaryString(n);\n    }\n}\n</code></pre>\n\n<p>If this is not of help I can post the code for the class up.</p>\n\n<p>Thanks.</p>\n\n<p>Mick.</p>\n"}],"owner":{"account_id":319297,"reputation":7340,"user_id":636987,"accept_rate":80,"display_name":"Mus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":885,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":5303835,"answer_count":3,"score":0,"last_activity_date":1677157296,"creation_date":1300132239,"question_id":5303665,"body_markdown":"I have a fitness function as part of a lab and wish to apply it to a set of &#39;weights&#39; (ArrayList&lt;Double&gt; weights).  I have created the array and stored some values in it.  I have created random binary strings (which have an &#39;x&#39; at the end in order to generate random values) which I wish to also apply the fitness function to; however, the problem I am having is that the fitness function always returns a value of 0.  Am I missing something here?\r\n\r\nThe fitness function is as follows:\r\n\r\n    public static double scalesFitness(ArrayList&lt;Double&gt; weights){\t\r\n\t\tif (scasol.length() &gt; weights.size()) return(-1);\r\n\t\tdouble lhs = 0.0,rhs = 0.0;\r\n\t\t\r\n\t\tdouble L = 0.0;\r\n\t\tdouble R = 0.0;\r\n\t\t\r\n\t\tfor(int i = 0; i &lt; scasol.length(); i++){\r\n            if(scasol.charAt(i) == &#39;0&#39;){\r\n            L = L += 0;\r\n        }\r\n        else if(scasol.charAt(i) == &#39;1&#39;){\r\n            R = R += 1;\r\n        }\r\n        }//end for\r\n\t\t\r\n\t\tint n = scasol.length();\r\n\t\t\r\n\t\treturn(L-R);\r\n\t\t\r\n\t}\r\n\r\n\r\nRandom binary string method:\r\n\r\n    private static String RandomBinaryString(int n){\r\n\t\tString s = new String();\r\n\t\t\r\n\t\tfor(int i = 0; i &lt;= n; i++){\r\n\t\t\tint y = CS2004.UI(0,1);\r\n\t\t\t\tif(y == 0){\r\n\t\t\t\t\tSystem.out.print(s + &#39;0&#39;);\r\n\t\t\t\t}\r\n\t\t\t\telse if(y == 1){\r\n\t\t\t\t\tSystem.out.print(s + &#39;1&#39;);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn(s);\r\n\t}\r\n\r\nMain method (in separate class):\r\n\r\n    public static void main(String args[]){\r\n\t\t\r\n\t\tfor(int i = 0; i &lt; 10; i++){\r\n\t\t\tScalesSolution s = new ScalesSolution(&quot;10101x&quot;);\r\n\t\t\ts.println();\r\n\t\t}\r\n\t\t\r\n\t\tArrayList&lt;Double&gt; weights = new ArrayList&lt;Double&gt;();\r\n\t\t\r\n\t\t\tweights.add(1.0);\r\n\t\t\tweights.add(2.0);\r\n\t\t\tweights.add(3.0);\r\n\t\t\tweights.add(4.0);\r\n\t\t\tweights.add(10.0);\r\n\t\t\tSystem.out.println();\r\n\t\t\r\n\t\tSystem.out.print(&quot;Fitness: &quot;);\r\n\t\tSystem.out.print(ScalesSolution.scalesFitness(weights));\r\n    }\r\n\r\nOnce run, the random binary strings work perfectly well, yet the fitness function fails to change from 0.  Here is a sample output:\r\n\r\n    1101100\r\n    1100111\r\n    0001111\r\n    1001010\r\n    1110000\r\n    0011111\r\n    1100111\r\n    1011001\r\n    0000110\r\n    1000000\r\n\r\n    Fitness: 0.0\r\n\r\nIf you wish to code for the whole class(es), then please let me know.\r\n\r\nThank you all so much for your time.\r\n\r\nMick.","title":"Java Fitness Function Not Working","body":"<p>I have a fitness function as part of a lab and wish to apply it to a set of 'weights' (ArrayList weights).  I have created the array and stored some values in it.  I have created random binary strings (which have an 'x' at the end in order to generate random values) which I wish to also apply the fitness function to; however, the problem I am having is that the fitness function always returns a value of 0.  Am I missing something here?</p>\n\n<p>The fitness function is as follows:</p>\n\n<pre><code>public static double scalesFitness(ArrayList&lt;Double&gt; weights){  \n    if (scasol.length() &gt; weights.size()) return(-1);\n    double lhs = 0.0,rhs = 0.0;\n\n    double L = 0.0;\n    double R = 0.0;\n\n    for(int i = 0; i &lt; scasol.length(); i++){\n        if(scasol.charAt(i) == '0'){\n        L = L += 0;\n    }\n    else if(scasol.charAt(i) == '1'){\n        R = R += 1;\n    }\n    }//end for\n\n    int n = scasol.length();\n\n    return(L-R);\n\n}\n</code></pre>\n\n<p>Random binary string method:</p>\n\n<pre><code>private static String RandomBinaryString(int n){\n    String s = new String();\n\n    for(int i = 0; i &lt;= n; i++){\n        int y = CS2004.UI(0,1);\n            if(y == 0){\n                System.out.print(s + '0');\n            }\n            else if(y == 1){\n                System.out.print(s + '1');\n            }\n    }\n\n    return(s);\n}\n</code></pre>\n\n<p>Main method (in separate class):</p>\n\n<pre><code>public static void main(String args[]){\n\n    for(int i = 0; i &lt; 10; i++){\n        ScalesSolution s = new ScalesSolution(\"10101x\");\n        s.println();\n    }\n\n    ArrayList&lt;Double&gt; weights = new ArrayList&lt;Double&gt;();\n\n        weights.add(1.0);\n        weights.add(2.0);\n        weights.add(3.0);\n        weights.add(4.0);\n        weights.add(10.0);\n        System.out.println();\n\n    System.out.print(\"Fitness: \");\n    System.out.print(ScalesSolution.scalesFitness(weights));\n}\n</code></pre>\n\n<p>Once run, the random binary strings work perfectly well, yet the fitness function fails to change from 0.  Here is a sample output:</p>\n\n<pre><code>1101100\n1100111\n0001111\n1001010\n1110000\n0011111\n1100111\n1011001\n0000110\n1000000\n\nFitness: 0.0\n</code></pre>\n\n<p>If you wish to code for the whole class(es), then please let me know.</p>\n\n<p>Thank you all so much for your time.</p>\n\n<p>Mick.</p>\n"},{"tags":["java","recursion","palindrome","backtracking","recursive-backtracking"],"owner":{"account_id":26767590,"reputation":11,"user_id":20926237,"display_name":"Rami Mamadov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677157006,"creation_date":1677157006,"question_id":75545138,"body_markdown":"The details of the problem are as the same as described in title. \r\nThe time complexity and space complexity can be ignored in the specific question.\r\n\r\nI did not stumble upon questions involving palindromes in my studies, so I am not at all sure about my solution. I am here in search of an enlightenment.\r\n\r\nThanks for reading.\r\n\r\n\r\n----------\r\n\r\n\r\nI tried to approach it as a backtracking question.\r\nBasically, a palindrome like abba, has 2 identical &#39;a&#39;, along with 2 identical &#39;b&#39;, \r\n\r\nso, I just thought that I should &quot;drill inside&quot; the phrase and check if each outer shell is identical:\r\n\r\n**a** b c c b **a**\r\n\r\nfirst shell - a a\r\n\r\nsecond shell - b b\r\n\r\nthird shell - c c\r\n\r\nyou get my terminology.\r\n\r\n----------\r\n\r\nI just:\r\ndefined two pointers, one at the start of the array (left) and one in the end of the array (right).\r\n\r\nAnd thought of 3 cases:\r\n\r\n1. both pointers are moving together towards each other\r\n2. the left pointer only is moving\r\n3. the right pointer only is moving\r\n\r\nif one of the shells are not two equal characters, we know this certain word, can&#39;t be a palindrome.\r\n\r\nlike &quot;abca&quot; is not a palindrome, because b is different than c in the &quot;second shell&quot;.\r\nand I am not sure if this is the way to go.\r\n\r\n\r\nHere is the code:\r\n\r\n\r\n\r\n```\r\nPublic static int longestPalindrome (int[]arr)\r\n{\r\n\treturn longestPalindrome(arr, 0, arr.length-1, 0);\r\n}\r\n\r\nPrivate static int longestPalindrome (int[]arr, int leftPointer, int rightPointer, int palinLength)\r\n{\r\n\t/* if the left and right number are not the same, a palindrome in this length can not be\r\n \t   Valid */\r\n\r\n\tif(leftPointer &lt; 0 || rightPointer &lt; 0 || leftPointer&gt;arr.length-1 || rightPointer&gt;arr.length-1)\r\n        {\r\n\treturn 0;\r\n        }\r\n \r\n        if(arr[leftPointer] != arr[rightPointer])\r\n\t{\r\n\t\treturn palinLength;\r\n \t}\r\n\t\r\n\tif(arr[leftPointer] == arr[rightPointer])\r\n\t{\r\n\t\treturn palinLength+1;\r\n        }\r\n\r\n        return max(longestPalindrome(arr, leftPointer+1, rightPointer, palinLength),\r\n        longestPalindrome(arr, leftPointer, rightPointer-1, palinLength),\r\n        longestPalindrome(arr, leftPointer+1, rightPointer-1, palinLength)); \r\n}\r\n\r\n/* a helper method to find the max out of the three cases */\r\n\r\nprivate static int max(int a, int b, int c)\r\n{\r\n   int biggest = Integer.MIN_VALUE;\r\n   if(a &gt; biggest)\r\n   {\r\n      biggest = a;\r\n   }\r\n   \r\n   if(b &gt; biggest)\r\n   {\r\n      biggest = b;\r\n   }\r\n\r\n   if(c &gt; biggest)\r\n   {\r\n      biggest = c;\r\n   }\r\n   return biggest;\r\n}\r\n\r\n```\r\n\r\n","title":"Finding the longest palindrome in a single-dimensional array, using recursion, without loops, in Java","body":"<p>The details of the problem are as the same as described in title.\nThe time complexity and space complexity can be ignored in the specific question.</p>\n<p>I did not stumble upon questions involving palindromes in my studies, so I am not at all sure about my solution. I am here in search of an enlightenment.</p>\n<p>Thanks for reading.</p>\n<hr />\n<p>I tried to approach it as a backtracking question.\nBasically, a palindrome like abba, has 2 identical 'a', along with 2 identical 'b',</p>\n<p>so, I just thought that I should &quot;drill inside&quot; the phrase and check if each outer shell is identical:</p>\n<p><strong>a</strong> b c c b <strong>a</strong></p>\n<p>first shell - a a</p>\n<p>second shell - b b</p>\n<p>third shell - c c</p>\n<p>you get my terminology.</p>\n<hr />\n<p>I just:\ndefined two pointers, one at the start of the array (left) and one in the end of the array (right).</p>\n<p>And thought of 3 cases:</p>\n<ol>\n<li>both pointers are moving together towards each other</li>\n<li>the left pointer only is moving</li>\n<li>the right pointer only is moving</li>\n</ol>\n<p>if one of the shells are not two equal characters, we know this certain word, can't be a palindrome.</p>\n<p>like &quot;abca&quot; is not a palindrome, because b is different than c in the &quot;second shell&quot;.\nand I am not sure if this is the way to go.</p>\n<p>Here is the code:</p>\n<pre><code>Public static int longestPalindrome (int[]arr)\n{\n    return longestPalindrome(arr, 0, arr.length-1, 0);\n}\n\nPrivate static int longestPalindrome (int[]arr, int leftPointer, int rightPointer, int palinLength)\n{\n    /* if the left and right number are not the same, a palindrome in this length can not be\n       Valid */\n\n    if(leftPointer &lt; 0 || rightPointer &lt; 0 || leftPointer&gt;arr.length-1 || rightPointer&gt;arr.length-1)\n        {\n    return 0;\n        }\n \n        if(arr[leftPointer] != arr[rightPointer])\n    {\n        return palinLength;\n    }\n    \n    if(arr[leftPointer] == arr[rightPointer])\n    {\n        return palinLength+1;\n        }\n\n        return max(longestPalindrome(arr, leftPointer+1, rightPointer, palinLength),\n        longestPalindrome(arr, leftPointer, rightPointer-1, palinLength),\n        longestPalindrome(arr, leftPointer+1, rightPointer-1, palinLength)); \n}\n\n/* a helper method to find the max out of the three cases */\n\nprivate static int max(int a, int b, int c)\n{\n   int biggest = Integer.MIN_VALUE;\n   if(a &gt; biggest)\n   {\n      biggest = a;\n   }\n   \n   if(b &gt; biggest)\n   {\n      biggest = b;\n   }\n\n   if(c &gt; biggest)\n   {\n      biggest = c;\n   }\n   return biggest;\n}\n\n</code></pre>\n"},{"tags":["java","windows","file"],"comments":[{"owner":{"account_id":287280,"reputation":18172,"user_id":586986,"accept_rate":77,"display_name":"Cemre Meng&#252;"},"score":0,"creation_date":1346707271,"post_id":12254123,"comment_id":16427858,"body_markdown":"If you specify the program from command line then it should get passed to args","body":"If you specify the program from command line then it should get passed to args"},{"owner":{"account_id":368967,"reputation":5943,"user_id":716076,"accept_rate":97,"display_name":"Chris Dargis"},"score":1,"creation_date":1346707361,"post_id":12254123,"comment_id":16427872,"body_markdown":"The file chosen could be passed to `String[] args` via command-line.","body":"The file chosen could be passed to <code>String[] args</code> via command-line."},{"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"score":0,"creation_date":1346707364,"post_id":12254123,"comment_id":16427873,"body_markdown":"`java.lang.Runtime.exec`","body":"<code>java.lang.Runtime.exec</code>"},{"owner":{"account_id":1558798,"reputation":36540,"user_id":1449199,"accept_rate":95,"display_name":"Baz"},"score":5,"creation_date":1346707405,"post_id":12254123,"comment_id":16427886,"body_markdown":"I think the OP wants to change his jar such that it will be recognised by the OS in the &quot;Open with&quot; dialog.","body":"I think the OP wants to change his jar such that it will be recognised by the OS in the &quot;Open with&quot; dialog."},{"owner":{"account_id":1735571,"reputation":1008,"user_id":1588217,"accept_rate":68,"display_name":"Ewen"},"score":0,"creation_date":1346707430,"post_id":12254123,"comment_id":16427892,"body_markdown":"I know but what I&#39;m asking is does it get passed via the winodws file chooser?","body":"I know but what I&#39;m asking is does it get passed via the winodws file chooser?"},{"owner":{"account_id":79346,"reputation":57079,"user_id":225074,"accept_rate":91,"display_name":"Thomas Matthews"},"score":0,"creation_date":1346788355,"post_id":12254123,"comment_id":16453996,"body_markdown":"possible duplicate of [Utilising a file association in a Java application](http://stackoverflow.com/questions/2043029/utilising-a-file-association-in-a-java-application)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2043029/utilising-a-file-association-in-a-java-application\">Utilising a file association in a Java application</a>"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1346711947,"creation_date":1346707499,"answer_id":12254170,"question_id":12254123,"body_markdown":"Depends on the OS. Under windows, you need to attach some details into the registry.\r\n\r\nHave a look at the 3rd answer in https://stackoverflow.com/questions/2043029/utilising-a-file-association-in-a-java-application for an example?\r\n\r\nYou could also have a look at http://www.rgagnon.com/javadetails/java-0592.html\r\n\r\n**UPDATE**\r\n\r\nAlso, when the OS executes the program, you should receive the file as a command line parameter through the `main` method\r\n\r\nI don&#39;t know if this will work suit your needs or not, but you could also take a look at https://stackoverflow.com/questions/9096991/file-association-in-mac","title":"Open With... a java program","body":"<p>Depends on the OS. Under windows, you need to attach some details into the registry.</p>\n\n<p>Have a look at the 3rd answer in <a href=\"https://stackoverflow.com/questions/2043029/utilising-a-file-association-in-a-java-application\">Utilising a file association in a Java application</a> for an example?</p>\n\n<p>You could also have a look at <a href=\"http://www.rgagnon.com/javadetails/java-0592.html\" rel=\"nofollow noreferrer\">http://www.rgagnon.com/javadetails/java-0592.html</a></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Also, when the OS executes the program, you should receive the file as a command line parameter through the <code>main</code> method</p>\n\n<p>I don't know if this will work suit your needs or not, but you could also take a look at <a href=\"https://stackoverflow.com/questions/9096991/file-association-in-mac\">File association in Mac</a></p>\n"},{"tags":[],"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1346710119,"creation_date":1346710119,"answer_id":12254546,"question_id":12254123,"body_markdown":"There&#39;s many choices on how to make a Java program runnable.  Like you mention, the simplest choice is to use the command line.  If you want to make it work with most OS&#39;s GUI interfaces (and the Open With dialog) the easiest choice is to make an [executable jar][1].  IDEs can make this very easy for you, in Eclipse just right-click on the project and select Export &gt; Java &gt; Runnable JAR file.\r\n\r\nAnother excellent option is to turn your application into a [Java Web Start][2] application, which lets users easily run Java programs being served up online.\r\n\r\nAlternatively, like you mention, you could convert it into an .exe file:\r\n\r\n* https://stackoverflow.com/questions/2011664/compiling-a-java-program-into-an-exe\r\n* https://stackoverflow.com/questions/516399/how-do-i-create-an-exe-for-a-java-program\r\n* https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file\r\n\r\n\r\n  [1]: https://www.google.com/search?q=executable%20jar\r\n  [2]: http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/","title":"Open With... a java program","body":"<p>There's many choices on how to make a Java program runnable.  Like you mention, the simplest choice is to use the command line.  If you want to make it work with most OS's GUI interfaces (and the Open With dialog) the easiest choice is to make an <a href=\"https://www.google.com/search?q=executable%20jar\" rel=\"nofollow noreferrer\">executable jar</a>.  IDEs can make this very easy for you, in Eclipse just right-click on the project and select Export > Java > Runnable JAR file.</p>\n\n<p>Another excellent option is to turn your application into a <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/\" rel=\"nofollow noreferrer\">Java Web Start</a> application, which lets users easily run Java programs being served up online.</p>\n\n<p>Alternatively, like you mention, you could convert it into an .exe file:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2011664/compiling-a-java-program-into-an-exe\">Compiling a java program into an executable</a></li>\n<li><a href=\"https://stackoverflow.com/questions/516399/how-do-i-create-an-exe-for-a-java-program\">How do I create an .exe for a Java program?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file\">How can I convert my Java program to an .exe file?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1346726221,"creation_date":1346725451,"answer_id":12256047,"question_id":12254123,"body_markdown":"Deploy the app. using [Java Web Start](https://stackoverflow.com/tags/java-web-start/info).\r\n\r\n&gt; JWS provides many appealing features including, but not limited to, splash screens, desktop integration, **file associations,** automatic update (including lazy downloads and programmatic control of updates), partitioning of natives &amp; other resource downloads by platform, architecture or Java version, configuration of run-time environment (minimum J2SE version, run-time options, RAM etc.), easy management of common resources using extensions..\r\n\r\nHere is a [demo. of the file services](http://pscode.org/jws/api.html#fs) in which the app. is associated with the file type `.zzz`.\r\n\r\n&gt; ..does it get passed via the windows file chooser?\r\n\r\nNo.  It gets passed to the `main` as either `-open filename` or `-print filename`.  What the app. does with those strings is up to it.  The demo. linked above will prompt the user in the sand-boxed version, simply because it is sand-boxed.  The other one should work without showing prompt or dialog.","title":"Open With... a java program","body":"<p>Deploy the app. using <a href=\"https://stackoverflow.com/tags/java-web-start/info\">Java Web Start</a>.</p>\n\n<blockquote>\n  <p>JWS provides many appealing features including, but not limited to, splash screens, desktop integration, <strong>file associations,</strong> automatic update (including lazy downloads and programmatic control of updates), partitioning of natives &amp; other resource downloads by platform, architecture or Java version, configuration of run-time environment (minimum J2SE version, run-time options, RAM etc.), easy management of common resources using extensions..</p>\n</blockquote>\n\n<p>Here is a <a href=\"http://pscode.org/jws/api.html#fs\" rel=\"nofollow noreferrer\">demo. of the file services</a> in which the app. is associated with the file type <code>.zzz</code>.</p>\n\n<blockquote>\n  <p>..does it get passed via the windows file chooser?</p>\n</blockquote>\n\n<p>No.  It gets passed to the <code>main</code> as either <code>-open filename</code> or <code>-print filename</code>.  What the app. does with those strings is up to it.  The demo. linked above will prompt the user in the sand-boxed version, simply because it is sand-boxed.  The other one should work without showing prompt or dialog.</p>\n"}],"owner":{"account_id":1735571,"reputation":1008,"user_id":1588217,"accept_rate":68,"display_name":"Ewen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6150,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1677156967,"creation_date":1346707133,"question_id":12254123,"body_markdown":"I want to know how to make a java program that can be used to open stuff up. Ex: notepad++, win zip.... Do I have convert the jar to `.exe` first? Also, does the file chosen get passed in to `String[] args`?\r\n\r\nBy the way, I know that it works with cmd but thats not what I&#39;m asking.","title":"Open With... a java program","body":"<p>I want to know how to make a java program that can be used to open stuff up. Ex: notepad++, win zip.... Do I have convert the jar to <code>.exe</code> first? Also, does the file chosen get passed in to <code>String[] args</code>?</p>\n\n<p>By the way, I know that it works with cmd but thats not what I'm asking.</p>\n"},{"tags":["java","android","android-camerax","android-12","image-capture"],"comments":[{"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"score":0,"creation_date":1677377201,"post_id":75545092,"comment_id":133325592,"body_markdown":"Could you switch to the latest version `1.3.0-alpha03` and try again?","body":"Could you switch to the latest version <code>1.3.0-alpha03</code> and try again?"},{"owner":{"account_id":27258804,"reputation":1,"user_id":20781947,"display_name":"Daniel"},"score":0,"creation_date":1677490276,"post_id":75545092,"comment_id":133340912,"body_markdown":"I use API31 of android, so i cannot use latest version. I changed the code now to ImageAnalyse because i wanted to implement a BarcodeScanner","body":"I use API31 of android, so i cannot use latest version. I changed the code now to ImageAnalyse because i wanted to implement a BarcodeScanner"}],"owner":{"account_id":27258804,"reputation":1,"user_id":20781947,"display_name":"Daniel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":370,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677156845,"creation_date":1677156726,"question_id":75545092,"body_markdown":"I&#39;m having trouble taking a photo of the current camera image. The camera image is displayed in the view and when a button is pressed, the photo should be saved or processed later on.\r\n\r\nI&#39;m working with the CameraX API and Android 12 (API level 31).\r\n\r\n\r\n```\r\n\r\nimport android.Manifest;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.camera.core.Camera;\r\nimport androidx.camera.core.CameraSelector;\r\nimport androidx.camera.core.ImageCapture;\r\nimport androidx.camera.core.ImageCaptureException;\r\nimport androidx.camera.core.Preview;\r\nimport androidx.camera.lifecycle.ProcessCameraProvider;\r\nimport androidx.camera.view.PreviewView;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.google.common.util.concurrent.ListenableFuture;\r\n\r\nimport java.io.File;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.Executor;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private PreviewView viewFinder;\r\n    private ProcessCameraProvider cameraProvider;\r\n    private Camera camera;\r\n\r\n    private ImageCapture imageCapture;\r\n\r\n    private static final int  CAMERA_PERMISSION_CODE = 1;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        viewFinder = findViewById(R.id.viewFinder);\r\n        startCamera();\r\n\r\n        Button takePictureButton = findViewById(R.id.takePictureButton);\r\n        takePictureButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                takePicture();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void startCamera() {\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\r\n            // Berechtigung wurde erteilt, &#246;ffnen Sie die Kamera.\r\n        } else {\r\n            // Fordern Sie die Berechtigung an.\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, CAMERA_PERMISSION_CODE);\r\n        }\r\n\r\n        ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture = ProcessCameraProvider.getInstance(this);\r\n        cameraProviderFuture.addListener(() -&gt; {\r\n            try {\r\n                // Verf&#252;gbare Kamera-Provider abrufen\r\n                cameraProvider = cameraProviderFuture.get();\r\n                // Kamera-Vorschau konfigurieren und starten\r\n                bindPreview();\r\n            } catch (ExecutionException | InterruptedException e) {\r\n                // handle error\r\n            }\r\n        }, ContextCompat.getMainExecutor(this));\r\n    }\r\n\r\n    private void bindPreview() {\r\n        imageCapture =\r\n                new ImageCapture.Builder()\r\n                        .setTargetRotation(viewFinder.getDisplay().getRotation())\r\n\r\n                        .build();\r\n        Preview preview = new Preview.Builder().build();\r\n        preview.setSurfaceProvider(viewFinder.getSurfaceProvider());\r\n        // \r\n        CameraSelector cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA;\r\n        // bind\r\n        camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview, imageCapture);\r\n    }\r\n\r\n    private void takePicture() {\r\n        Executor cameraExecutor = ContextCompat.getMainExecutor(this);\r\n        ImageCapture.OutputFileOptions outputFileOptions =\r\n                new ImageCapture.OutputFileOptions.Builder(new File(getExternalMediaDirs()[0], &quot;photo.jpg&quot;)).build();\r\n        imageCapture.takePicture(outputFileOptions, cameraExecutor,\r\n                new ImageCapture.OnImageSavedCallback() {\r\n                    @Override\r\n                    public void onImageSaved(ImageCapture.OutputFileResults outputFileResults) {\r\n                        System.out.println(&quot;SAVED&quot;);\r\n                        Toast.makeText(MainActivity.this, &quot;Photo saved&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                    @Override\r\n                    public void onError(ImageCaptureException error) {\r\n                        System.out.println(&quot;not saved&quot;);\r\n                        Toast.makeText(MainActivity.this, &quot;Error saving photo&quot;, Toast.LENGTH_SHORT).show();\r\n                        System.out.println(error);\r\n                    }\r\n                }\r\n        );\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nI am getting the following error, and the camera image freezes and restarts again.\r\n\r\n```\r\n\r\n\r\n/ImageCapture: Send image capture request [current, pending] = [0, 1]\r\nD/ImageCapture: issueTakePicture\r\nD/Camera2CameraImpl: {Camera@bcf4c18[id=0]} Issue capture request\r\nD/CaptureSession: Issuing capture request.\r\nD/EGL_emulation: app_time_stats: avg=20.36ms min=1.77ms max=477.02ms count=39\r\nE/CameraCaptureSession: Session 0: Exception while stopping repeating: \r\n    android.hardware.camera2.CameraAccessException: CAMERA_ERROR (3): cancelRequest:507: Camera 0: Error clearing streaming request: Function not implemented (-38)\r\n        at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1179)\r\n...\r\n\r\n```\r\n\r\n\r\nI am getting the following error, and the camera image freezes and restarts again.","title":"Taking Picture while using Camera in PreviewView","body":"<p>I'm having trouble taking a photo of the current camera image. The camera image is displayed in the view and when a button is pressed, the photo should be saved or processed later on.</p>\n<p>I'm working with the CameraX API and Android 12 (API level 31).</p>\n<pre><code>\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.camera.core.Camera;\nimport androidx.camera.core.CameraSelector;\nimport androidx.camera.core.ImageCapture;\nimport androidx.camera.core.ImageCaptureException;\nimport androidx.camera.core.Preview;\nimport androidx.camera.lifecycle.ProcessCameraProvider;\nimport androidx.camera.view.PreviewView;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport com.google.common.util.concurrent.ListenableFuture;\n\nimport java.io.File;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.Executor;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private PreviewView viewFinder;\n    private ProcessCameraProvider cameraProvider;\n    private Camera camera;\n\n    private ImageCapture imageCapture;\n\n    private static final int  CAMERA_PERMISSION_CODE = 1;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        viewFinder = findViewById(R.id.viewFinder);\n        startCamera();\n\n        Button takePictureButton = findViewById(R.id.takePictureButton);\n        takePictureButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                takePicture();\n            }\n        });\n\n    }\n\n    private void startCamera() {\n\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\n            // Berechtigung wurde erteilt, öffnen Sie die Kamera.\n        } else {\n            // Fordern Sie die Berechtigung an.\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, CAMERA_PERMISSION_CODE);\n        }\n\n        ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture = ProcessCameraProvider.getInstance(this);\n        cameraProviderFuture.addListener(() -&gt; {\n            try {\n                // Verfügbare Kamera-Provider abrufen\n                cameraProvider = cameraProviderFuture.get();\n                // Kamera-Vorschau konfigurieren und starten\n                bindPreview();\n            } catch (ExecutionException | InterruptedException e) {\n                // handle error\n            }\n        }, ContextCompat.getMainExecutor(this));\n    }\n\n    private void bindPreview() {\n        imageCapture =\n                new ImageCapture.Builder()\n                        .setTargetRotation(viewFinder.getDisplay().getRotation())\n\n                        .build();\n        Preview preview = new Preview.Builder().build();\n        preview.setSurfaceProvider(viewFinder.getSurfaceProvider());\n        // \n        CameraSelector cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA;\n        // bind\n        camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview, imageCapture);\n    }\n\n    private void takePicture() {\n        Executor cameraExecutor = ContextCompat.getMainExecutor(this);\n        ImageCapture.OutputFileOptions outputFileOptions =\n                new ImageCapture.OutputFileOptions.Builder(new File(getExternalMediaDirs()[0], &quot;photo.jpg&quot;)).build();\n        imageCapture.takePicture(outputFileOptions, cameraExecutor,\n                new ImageCapture.OnImageSavedCallback() {\n                    @Override\n                    public void onImageSaved(ImageCapture.OutputFileResults outputFileResults) {\n                        System.out.println(&quot;SAVED&quot;);\n                        Toast.makeText(MainActivity.this, &quot;Photo saved&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                    @Override\n                    public void onError(ImageCaptureException error) {\n                        System.out.println(&quot;not saved&quot;);\n                        Toast.makeText(MainActivity.this, &quot;Error saving photo&quot;, Toast.LENGTH_SHORT).show();\n                        System.out.println(error);\n                    }\n                }\n        );\n\n    }\n\n}\n</code></pre>\n<p>I am getting the following error, and the camera image freezes and restarts again.</p>\n<pre><code>\n\n/ImageCapture: Send image capture request [current, pending] = [0, 1]\nD/ImageCapture: issueTakePicture\nD/Camera2CameraImpl: {Camera@bcf4c18[id=0]} Issue capture request\nD/CaptureSession: Issuing capture request.\nD/EGL_emulation: app_time_stats: avg=20.36ms min=1.77ms max=477.02ms count=39\nE/CameraCaptureSession: Session 0: Exception while stopping repeating: \n    android.hardware.camera2.CameraAccessException: CAMERA_ERROR (3): cancelRequest:507: Camera 0: Error clearing streaming request: Function not implemented (-38)\n        at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1179)\n...\n\n</code></pre>\n<p>I am getting the following error, and the camera image freezes and restarts again.</p>\n"},{"tags":["java","android","list","kotlin"],"comments":[{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":1,"creation_date":1676890898,"post_id":75508358,"comment_id":133222217,"body_markdown":"1. please format the code 2. what is wrong with this &quot;method of getParcelableArrayListExtra&quot;","body":"1. please format the code 2. what is wrong with this &quot;method of getParcelableArrayListExtra&quot;"},{"owner":{"account_id":27831803,"reputation":1,"user_id":21250070,"display_name":"Nikhil Bingradiya"},"score":0,"creation_date":1676890955,"post_id":75508358,"comment_id":133222231,"body_markdown":"Parcel android.os.Parcel@d6c1889: Unmarshalling unknown type code 244 at offset 168\nI&#39;am getting this error when i got the list in other activity","body":"Parcel android.os.Parcel@d6c1889: Unmarshalling unknown type code 244 at offset 168 I&#39;am getting this error when i got the list in other activity"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":2,"creation_date":1676891017,"post_id":75508358,"comment_id":133222250,"body_markdown":"prolly it&#39;s a problem with whatever you have in `arrayList` ... again fix the code format and  provide type of `arrayList` if elemets are custom class implementing `Parcelable` provide implementation ... you need to learn how to ask the question ... remeber that we don&#39;t know how your code looks like","body":"prolly it&#39;s a problem with whatever you have in <code>arrayList</code> ... again fix the code format and  provide type of <code>arrayList</code> if elemets are custom class implementing <code>Parcelable</code> provide implementation ... you need to learn how to ask the question ... remeber that we don&#39;t know how your code looks like"}],"answers":[{"tags":[],"owner":{"account_id":9063839,"reputation":128,"user_id":6749453,"display_name":"Ayaz Muhammad"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1676892432,"creation_date":1676892432,"answer_id":75508678,"question_id":75508358,"body_markdown":"1- you can parse data using intent as follows as \r\nhttps://medium.com/@hgarg701/parcelable-in-android-using-kotlin-pass-object-from-one-activity-to-another-c34801d7ff03\r\n\r\n2- you can use Gson to send object or arrayList by using this method \r\n\r\n    implementation &#39;com.google.code.gson:gson:2.9.0&#39;\r\nadd in gradle\r\n\r\n\r\n\r\nFrom Activity where you want to send -&gt;\r\n    \r\n      val gson = Gson()\r\n      val jsonUserInfoList = gson.toJson(userProfileInfoDetailedList)\r\n                    startActivity(Intent(\r\n                        this@MainActivity,ProfileSettingActivity::class.java\r\n                    ).apply {\r\n                        putExtra(Constants.USER_RRO_FILE_DETAIL,jsonUserInfoList)\r\n                   })\r\n\r\n\r\nActivity where you want to get data -&gt;\r\n\r\n\r\n    val userInfoDetailed = intent.getStringExtra(Constants.USER_RRO_FILE_DETAIL)\r\n        val gson = Gson()\r\n        val type = object : TypeToken&lt;List&lt;UserProfileData&gt;&gt;() {}.type\r\n        val userProfileList: List&lt;UserProfileData&gt; = gson.fromJson(userInfoDetailed, type)\r\n\r\n\r\n\r\n3- if you want to communicate date between fragments you can follow as \r\n\r\nhttps://www.geeksforgeeks.org/shared-viewmodel-in-android/\r\n\r\n\r\n","title":"is there any other method of getParcelableArrayListExtra?","body":"<p>1- you can parse data using intent as follows as\n<a href=\"https://medium.com/@hgarg701/parcelable-in-android-using-kotlin-pass-object-from-one-activity-to-another-c34801d7ff03\" rel=\"nofollow noreferrer\">https://medium.com/@hgarg701/parcelable-in-android-using-kotlin-pass-object-from-one-activity-to-another-c34801d7ff03</a></p>\n<p>2- you can use Gson to send object or arrayList by using this method</p>\n<pre><code>implementation 'com.google.code.gson:gson:2.9.0'\n</code></pre>\n<p>add in gradle</p>\n<p>From Activity where you want to send -&gt;</p>\n<pre><code>  val gson = Gson()\n  val jsonUserInfoList = gson.toJson(userProfileInfoDetailedList)\n                startActivity(Intent(\n                    this@MainActivity,ProfileSettingActivity::class.java\n                ).apply {\n                    putExtra(Constants.USER_RRO_FILE_DETAIL,jsonUserInfoList)\n               })\n</code></pre>\n<p>Activity where you want to get data -&gt;</p>\n<pre><code>val userInfoDetailed = intent.getStringExtra(Constants.USER_RRO_FILE_DETAIL)\n    val gson = Gson()\n    val type = object : TypeToken&lt;List&lt;UserProfileData&gt;&gt;() {}.type\n    val userProfileList: List&lt;UserProfileData&gt; = gson.fromJson(userInfoDetailed, type)\n</code></pre>\n<p>3- if you want to communicate date between fragments you can follow as</p>\n<p><a href=\"https://www.geeksforgeeks.org/shared-viewmodel-in-android/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/shared-viewmodel-in-android/</a></p>\n"}],"owner":{"account_id":27831803,"reputation":1,"user_id":21250070,"display_name":"Nikhil Bingradiya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1677076090,"accepted_answer_id":75508678,"answer_count":1,"score":-3,"last_activity_date":1677156832,"creation_date":1676890579,"question_id":75508358,"body_markdown":"I did this code\r\n    \r\n    val intent = Intent(context!!.activity, PreviewActivity::class.java) intent.putParcelableArrayListExtra(&quot;images&quot;, arrayList as ArrayList&lt;out Parcelable?&gt;?) Log.e(&quot;click_prearrary&quot;, arrayList.toString()) intent.putExtra(&quot;position&quot;, position) intent.putExtra(&quot;statusdownload&quot;, true) intent.putExtra(&quot;isFrom&quot;, &quot;downloaded&quot;) context!!.requireActivity().startActivity(intent)\r\n        \r\n        try { imageList = intent.getParcelableArrayListExtra(&quot;images&quot;)!! viewPagerposition = intent.getIntExtra(&quot;position&quot;, 0) isFrom = intent.getStringExtra(&quot;isFrom&quot;).equals(&quot;downloaded&quot;) } catch (e: Exception) { e.printStackTrace()","title":"is there any other method of getParcelableArrayListExtra?","body":"<p>I did this code</p>\n<pre><code>val intent = Intent(context!!.activity, PreviewActivity::class.java) intent.putParcelableArrayListExtra(&quot;images&quot;, arrayList as ArrayList&lt;out Parcelable?&gt;?) Log.e(&quot;click_prearrary&quot;, arrayList.toString()) intent.putExtra(&quot;position&quot;, position) intent.putExtra(&quot;statusdownload&quot;, true) intent.putExtra(&quot;isFrom&quot;, &quot;downloaded&quot;) context!!.requireActivity().startActivity(intent)\n    \n    try { imageList = intent.getParcelableArrayListExtra(&quot;images&quot;)!! viewPagerposition = intent.getIntExtra(&quot;position&quot;, 0) isFrom = intent.getStringExtra(&quot;isFrom&quot;).equals(&quot;downloaded&quot;) } catch (e: Exception) { e.printStackTrace()\n</code></pre>\n"},{"tags":["java","jackson","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677156809,"creation_date":1677156809,"answer_id":75545108,"question_id":75544935,"body_markdown":"I don&#39;t see `BaseRequest.type` being set anywhere in the constructor, etc of `ConcreteRequest`.  \r\n\r\nPerhaps you need to do this:\r\n\r\n```\r\n    public ConcreteRequest() {\r\n        setType(&quot;ConcreteRequest&quot;);\r\n    }\r\n```","title":"Why is jackson serializing __type property to null, when annotation clearly states concrete type subtype info?","body":"<p>I don't see <code>BaseRequest.type</code> being set anywhere in the constructor, etc of <code>ConcreteRequest</code>.</p>\n<p>Perhaps you need to do this:</p>\n<pre><code>    public ConcreteRequest() {\n        setType(&quot;ConcreteRequest&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":2159802,"reputation":493,"user_id":1914243,"accept_rate":33,"display_name":"juckky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677156809,"creation_date":1677155792,"question_id":75544935,"body_markdown":"I have an open api v2 schema that uses allOf and via the openapi-generator-maven-plugin generates the model classes shown below.  \r\n\r\n```\r\n@JsonPropertyOrder({\r\n  TradeRequest.JSON_PROPERTY_TYPE,\r\n  TradeRequest.JSON_PROPERTY_BUSINESS_DATE\r\n})\r\n@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaClientCodegen&quot;, date = &quot;2023-02-23T11:48:40.067Z[Europe/London]&quot;)\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXISTING_PROPERTY, property = &quot;__type&quot;, visible = true)\r\n@JsonSubTypes({\r\n  @JsonSubTypes.Type(value = ConcreteRequest.class, name = &quot;ConcreteRequest&quot;),\r\n})\r\n\r\npublic class BaseRequest {\r\n  public static final String JSON_PROPERTY_TYPE = &quot;__type&quot;;\r\n  protected String type;\r\n\r\n  public static final String JSON_PROPERTY_BUSINESS_DATE = &quot;businessDate&quot;;\r\n  private LocalDate businessDate;\r\n\r\n\r\n  public BaseRequest type(String type) {    \r\n    this.type = type;\r\n    return this;\r\n  }\r\n\r\n  @ApiModelProperty(required = true, value = &quot;&quot;)\r\n  @JsonProperty(JSON_PROPERTY_TYPE)\r\n  @JsonInclude(value = JsonInclude.Include.ALWAYS)\r\n  public String getType() {\r\n    return type;\r\n  }\r\n\r\n  public void setType(String type) {\r\n    this.type = type;\r\n  }\r\n\r\n  public BaseRequest businessDate(LocalDate businessDate) {\r\n    this.businessDate = businessDate;\r\n    return this;\r\n  }\r\n\r\n  @javax.annotation.Nullable\r\n  @ApiModelProperty(value = &quot;&quot;)\r\n  @JsonProperty(JSON_PROPERTY_BUSINESS_DATE)\r\n  @JsonInclude(value = JsonInclude.Include.USE_DEFAULTS)\r\n\r\n  public LocalDate getBusinessDate() {\r\n    return businessDate;\r\n  }\r\n\r\n  public void setBusinessDate(LocalDate businessDate) {\r\n    this.businessDate = businessDate;\r\n  }\r\n}\r\n\r\n\r\n@JsonPropertyOrder({\r\n  EnrichTradeRequest.JSON_PROPERTY_SOAP_TRADE_INPUT\r\n})\r\n@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaClientCodegen&quot;, date = &quot;2023-02-23T11:48:40.067Z[Europe/London]&quot;)\r\npublic class ConcreteRequest extends BaseRequest {\r\n  public static final String JSON_PROPERTY_SOAP_TRADE_INPUT = &quot;soapTradeInput&quot;;\r\n  private SoapTradeInput soapTradeInput;\r\n\r\n  public ConcreteRequest soapTradeInput(SoapTradeInput soapTradeInput) {\r\n    this.soapTradeInput = soapTradeInput;\r\n    return this;\r\n  }\r\n\r\n  @javax.annotation.Nullable\r\n  @ApiModelProperty(value = &quot;&quot;)\r\n  @JsonProperty(JSON_PROPERTY_SOAP_TRADE_INPUT)\r\n  @JsonInclude(value = JsonInclude.Include.USE_DEFAULTS)\r\n  public SoapTradeInput getSoapTradeInput() {\r\n    return soapTradeInput;\r\n  }\r\n\r\n  public void setSoapTradeInput(SoapTradeInput soapTradeInput) {\r\n    this.soapTradeInput = soapTradeInput;\r\n  }\r\n}\r\n```\r\n\r\nI have stripped out the equals / toString / hashCode methods.\r\n\r\nIf I create an instance of ConcreteRequest and the serialize it to json using the object mapper shown below, the __type property is null\r\n\r\n```\r\n{\r\n  &quot;soapTradeInput&quot;: {\r\n    ...,\r\n    &quot;__type&quot;:null\r\n  },\r\n  &quot;__type&quot;:null,\r\n  &quot;businessDate&quot;:null\r\n}\r\n```\r\n\r\n```\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\r\n        mapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);\r\n        mapper.enable(DeserializationFeature.READ_ENUMS_USING_TO_STRING);\r\n        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n        mapper.configure(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE, false);\r\n        mapper.configure(MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES, true);\r\n        mapper.configure(MapperFeature.USE_BASE_TYPE_AS_DEFAULT_IMPL, true);\r\n        mapper.registerModules(new JodaModule());\r\n```\r\n\r\nGiven that the object graph explicitly uses concrete types and references, I would expect the __type value to be automatically serialized for me and I should not have to explicitly set the property on the object?\r\n\r\nI suspect it&#39;s a configuration issue, but I am unsure how I go about ensuring the correct concrete type value is used for __type when serializing to json.  ","title":"Why is jackson serializing __type property to null, when annotation clearly states concrete type subtype info?","body":"<p>I have an open api v2 schema that uses allOf and via the openapi-generator-maven-plugin generates the model classes shown below.</p>\n<pre><code>@JsonPropertyOrder({\n  TradeRequest.JSON_PROPERTY_TYPE,\n  TradeRequest.JSON_PROPERTY_BUSINESS_DATE\n})\n@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaClientCodegen&quot;, date = &quot;2023-02-23T11:48:40.067Z[Europe/London]&quot;)\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXISTING_PROPERTY, property = &quot;__type&quot;, visible = true)\n@JsonSubTypes({\n  @JsonSubTypes.Type(value = ConcreteRequest.class, name = &quot;ConcreteRequest&quot;),\n})\n\npublic class BaseRequest {\n  public static final String JSON_PROPERTY_TYPE = &quot;__type&quot;;\n  protected String type;\n\n  public static final String JSON_PROPERTY_BUSINESS_DATE = &quot;businessDate&quot;;\n  private LocalDate businessDate;\n\n\n  public BaseRequest type(String type) {    \n    this.type = type;\n    return this;\n  }\n\n  @ApiModelProperty(required = true, value = &quot;&quot;)\n  @JsonProperty(JSON_PROPERTY_TYPE)\n  @JsonInclude(value = JsonInclude.Include.ALWAYS)\n  public String getType() {\n    return type;\n  }\n\n  public void setType(String type) {\n    this.type = type;\n  }\n\n  public BaseRequest businessDate(LocalDate businessDate) {\n    this.businessDate = businessDate;\n    return this;\n  }\n\n  @javax.annotation.Nullable\n  @ApiModelProperty(value = &quot;&quot;)\n  @JsonProperty(JSON_PROPERTY_BUSINESS_DATE)\n  @JsonInclude(value = JsonInclude.Include.USE_DEFAULTS)\n\n  public LocalDate getBusinessDate() {\n    return businessDate;\n  }\n\n  public void setBusinessDate(LocalDate businessDate) {\n    this.businessDate = businessDate;\n  }\n}\n\n\n@JsonPropertyOrder({\n  EnrichTradeRequest.JSON_PROPERTY_SOAP_TRADE_INPUT\n})\n@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaClientCodegen&quot;, date = &quot;2023-02-23T11:48:40.067Z[Europe/London]&quot;)\npublic class ConcreteRequest extends BaseRequest {\n  public static final String JSON_PROPERTY_SOAP_TRADE_INPUT = &quot;soapTradeInput&quot;;\n  private SoapTradeInput soapTradeInput;\n\n  public ConcreteRequest soapTradeInput(SoapTradeInput soapTradeInput) {\n    this.soapTradeInput = soapTradeInput;\n    return this;\n  }\n\n  @javax.annotation.Nullable\n  @ApiModelProperty(value = &quot;&quot;)\n  @JsonProperty(JSON_PROPERTY_SOAP_TRADE_INPUT)\n  @JsonInclude(value = JsonInclude.Include.USE_DEFAULTS)\n  public SoapTradeInput getSoapTradeInput() {\n    return soapTradeInput;\n  }\n\n  public void setSoapTradeInput(SoapTradeInput soapTradeInput) {\n    this.soapTradeInput = soapTradeInput;\n  }\n}\n</code></pre>\n<p>I have stripped out the equals / toString / hashCode methods.</p>\n<p>If I create an instance of ConcreteRequest and the serialize it to json using the object mapper shown below, the __type property is null</p>\n<pre><code>{\n  &quot;soapTradeInput&quot;: {\n    ...,\n    &quot;__type&quot;:null\n  },\n  &quot;__type&quot;:null,\n  &quot;businessDate&quot;:null\n}\n</code></pre>\n<pre><code>        ObjectMapper mapper = new ObjectMapper();\n        mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\n        mapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);\n        mapper.enable(DeserializationFeature.READ_ENUMS_USING_TO_STRING);\n        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        mapper.configure(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE, false);\n        mapper.configure(MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES, true);\n        mapper.configure(MapperFeature.USE_BASE_TYPE_AS_DEFAULT_IMPL, true);\n        mapper.registerModules(new JodaModule());\n</code></pre>\n<p>Given that the object graph explicitly uses concrete types and references, I would expect the __type value to be automatically serialized for me and I should not have to explicitly set the property on the object?</p>\n<p>I suspect it's a configuration issue, but I am unsure how I go about ensuring the correct concrete type value is used for __type when serializing to json.</p>\n"},{"tags":["java","html","spring-boot","file-upload"],"comments":[{"owner":{"account_id":477033,"reputation":2378,"user_id":888278,"accept_rate":76,"display_name":"mansoor.khan"},"score":0,"creation_date":1541864668,"post_id":50515601,"comment_id":93366853,"body_markdown":"Were you able to fix the issue?","body":"Were you able to fix the issue?"},{"owner":{"account_id":3755323,"reputation":331,"user_id":3121794,"accept_rate":69,"display_name":"CS2016"},"score":1,"creation_date":1543498255,"post_id":50515601,"comment_id":93947337,"body_markdown":"@steady_daddy Yes, I answered my question below. Sorry for the delay.","body":"@steady_daddy Yes, I answered my question below. Sorry for the delay."}],"answers":[{"tags":[],"owner":{"account_id":106185,"reputation":1126,"user_id":282956,"accept_rate":0,"display_name":"mavriksc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527187467,"creation_date":1527187467,"answer_id":50516165,"question_id":50515601,"body_markdown":"you need something to handle loading the form a `@GetMapping`.   \r\nThe `@RequestMapping` i think defaults to get. So when you are &quot;getting&quot; the page it tries to hit your method that is expecting a file. [take a look at my example](https://github.com/mavriksc/overcomp/blob/master/src/main/java/com/mavriksc/controller/IndexController.java) ","title":"Spring Boot Required request part &#39;file&#39; is not present","body":"<p>you need something to handle loading the form a <code>@GetMapping</code>.<br>\nThe <code>@RequestMapping</code> i think defaults to get. So when you are \"getting\" the page it tries to hit your method that is expecting a file. <a href=\"https://github.com/mavriksc/overcomp/blob/master/src/main/java/com/mavriksc/controller/IndexController.java\" rel=\"nofollow noreferrer\">take a look at my example</a> </p>\n"},{"tags":[],"owner":{"account_id":4323464,"reputation":6780,"user_id":3530898,"display_name":"Amit K Bist"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527194368,"creation_date":1527194368,"answer_id":50517836,"question_id":50515601,"body_markdown":"Your `&lt;form&gt;` in your view code is with method as `POST`\r\n\r\n    &lt;form action=&quot;/upload&quot; enctype=&quot;multipart/form-data&quot; method = &quot;post&quot;&gt; \r\n\r\nIn controller change `@RequestMapping(&quot;/upload&quot;)` to below\r\n\r\n    @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)","title":"Spring Boot Required request part &#39;file&#39; is not present","body":"<p>Your <code>&lt;form&gt;</code> in your view code is with method as <code>POST</code></p>\n\n<pre><code>&lt;form action=\"/upload\" enctype=\"multipart/form-data\" method = \"post\"&gt; \n</code></pre>\n\n<p>In controller change <code>@RequestMapping(\"/upload\")</code> to below</p>\n\n<pre><code>@RequestMapping(value = \"/upload\", method = RequestMethod.POST)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3755323,"reputation":331,"user_id":3121794,"accept_rate":69,"display_name":"CS2016"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1543498230,"creation_date":1543498230,"answer_id":53540182,"question_id":50515601,"body_markdown":"After a while, I was able to solve this issue: In my application.properties file I added the following:\r\n\r\n    spring.servlet.multipart.max-file-size=128MB\r\n    spring.servlet.multipart.max-request-size=128MB\r\n    spring.http.multipart.enabled=true\r\n    upload.path=/export/home/","title":"Spring Boot Required request part &#39;file&#39; is not present","body":"<p>After a while, I was able to solve this issue: In my application.properties file I added the following:</p>\n\n<pre><code>spring.servlet.multipart.max-file-size=128MB\nspring.servlet.multipart.max-request-size=128MB\nspring.http.multipart.enabled=true\nupload.path=/export/home/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13395835,"reputation":21,"user_id":9666800,"display_name":"Sumit Paul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590505742,"creation_date":1590505742,"answer_id":62025317,"question_id":50515601,"body_markdown":"I would recommend using @RequestPart. If you are uploading a file using from-data try to rewrite the code like below:\r\n\r\n        @PostMapping(&quot;/upload&quot;)\r\n    public ResponseEntity&lt;CustomResponse&gt; uploadFile(@RequestPart(value = &quot;file&quot;,required = true) MultipartFile file,\r\n                                     @RequestPart(value = &quot;metadata&quot;,required = true) Metadata metadata,\r\n                                     HttpServletResponse response) ","title":"Spring Boot Required request part &#39;file&#39; is not present","body":"<p>I would recommend using @RequestPart. If you are uploading a file using from-data try to rewrite the code like below:</p>\n\n<pre><code>    @PostMapping(\"/upload\")\npublic ResponseEntity&lt;CustomResponse&gt; uploadFile(@RequestPart(value = \"file\",required = true) MultipartFile file,\n                                 @RequestPart(value = \"metadata\",required = true) Metadata metadata,\n                                 HttpServletResponse response) \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7202486,"reputation":1,"user_id":5499268,"display_name":"diallo ibrahima sory"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664366915,"creation_date":1664366915,"answer_id":73881149,"question_id":50515601,"body_markdown":"I have had similar issue, in my case the reason was the name of the input tag of the form was not matching with `@RequestParam(&quot;fileUpload&quot;)` annotation parameters.\r\n\r\n     @PostMapping(&quot;/add&quot;)\r\n    public String addFile(@RequestParam(&quot;fileUpload&quot;) MultipartFile fileUpload, Model model, Authentication authentication) {\r\n\r\n        User loggeduser = userService.getUser(authentication.getName());\r\n        File newFile = new File();\r\n\r\n        String fileName = StringUtils.cleanPath(fileUpload.getOriginalFilename());\r\n\r\n        File fileaux = filesService.getFileByName(fileName);\r\n        int result = -1;\r\n        if (fileaux != null) {\r\n            model.addAttribute(&quot;result&quot;, false);\r\n            model.addAttribute(&quot;message&quot;, &quot;File already exists&quot;);\r\n            return &quot;result&quot;;\r\n        } else {\r\n            try {\r\n                newFile.setFilename(StringUtils.cleanPath(fileName));\r\n                newFile.setContentType(fileUpload.getContentType());\r\n                newFile.setFileSize(String.valueOf(fileUpload.getSize()));\r\n                newFile.setUserId(loggeduser.getUserid());\r\n                newFile.setFileData(fileUpload.getBytes());\r\n                result = filesService.addFile(newFile);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        if (result &lt; 0) {\r\n            model.addAttribute(&quot;result&quot;, false);\r\n        } else {\r\n            model.addAttribute(&quot;result&quot;, true);\r\n        }\r\n\r\n        return &quot;result&quot;;\r\n    }\r\n\r\nit must match with the input form tag in the HTML file.\r\n\r\n    &lt;form action=&quot;#&quot; enctype=&quot;multipart/form-data&quot; th:action=&quot;@{/file/add}&quot; method=&quot;POST&quot;&gt;\r\n                            &lt;div class=&quot;container&quot;&gt;\r\n                                &lt;div class=&quot;row&quot; style=&quot;margin: 1em;&quot;&gt;\r\n                                    &lt;div class=&quot;col-sm-2&quot;&gt;\r\n                                        &lt;label for=&quot;fileUpload&quot;&gt;Upload a New File:&lt;/label&gt;\r\n                                    &lt;/div&gt;\r\n                                    &lt;div class=&quot;col-sm-6&quot;&gt;\r\n                                        &lt;input type=&quot;file&quot; class=&quot;form-control-file&quot; id=&quot;fileUpload&quot; name=&quot;fileUpload&quot;&gt;\r\n                                    &lt;/div&gt;\r\n                                    &lt;div class=&quot;col-sm-4&quot;&gt;\r\n                                        &lt;button type=&quot;submit&quot; class=&quot;btn btn-dark&quot; id=&quot;uploadButton&quot;&gt;Upload&lt;/button&gt;\r\n                                    &lt;/div&gt;\r\n                                &lt;/div&gt;\r\n                            &lt;/div&gt;\r\n&lt;/form&gt;\r\n\r\n\r\n","title":"Spring Boot Required request part &#39;file&#39; is not present","body":"<p>I have had similar issue, in my case the reason was the name of the input tag of the form was not matching with <code>@RequestParam(&quot;fileUpload&quot;)</code> annotation parameters.</p>\n<pre><code> @PostMapping(&quot;/add&quot;)\npublic String addFile(@RequestParam(&quot;fileUpload&quot;) MultipartFile fileUpload, Model model, Authentication authentication) {\n\n    User loggeduser = userService.getUser(authentication.getName());\n    File newFile = new File();\n\n    String fileName = StringUtils.cleanPath(fileUpload.getOriginalFilename());\n\n    File fileaux = filesService.getFileByName(fileName);\n    int result = -1;\n    if (fileaux != null) {\n        model.addAttribute(&quot;result&quot;, false);\n        model.addAttribute(&quot;message&quot;, &quot;File already exists&quot;);\n        return &quot;result&quot;;\n    } else {\n        try {\n            newFile.setFilename(StringUtils.cleanPath(fileName));\n            newFile.setContentType(fileUpload.getContentType());\n            newFile.setFileSize(String.valueOf(fileUpload.getSize()));\n            newFile.setUserId(loggeduser.getUserid());\n            newFile.setFileData(fileUpload.getBytes());\n            result = filesService.addFile(newFile);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    if (result &lt; 0) {\n        model.addAttribute(&quot;result&quot;, false);\n    } else {\n        model.addAttribute(&quot;result&quot;, true);\n    }\n\n    return &quot;result&quot;;\n}\n</code></pre>\n<p>it must match with the input form tag in the HTML file.</p>\n<pre><code>&lt;form action=&quot;#&quot; enctype=&quot;multipart/form-data&quot; th:action=&quot;@{/file/add}&quot; method=&quot;POST&quot;&gt;\n                        &lt;div class=&quot;container&quot;&gt;\n                            &lt;div class=&quot;row&quot; style=&quot;margin: 1em;&quot;&gt;\n                                &lt;div class=&quot;col-sm-2&quot;&gt;\n                                    &lt;label for=&quot;fileUpload&quot;&gt;Upload a New File:&lt;/label&gt;\n                                &lt;/div&gt;\n                                &lt;div class=&quot;col-sm-6&quot;&gt;\n                                    &lt;input type=&quot;file&quot; class=&quot;form-control-file&quot; id=&quot;fileUpload&quot; name=&quot;fileUpload&quot;&gt;\n                                &lt;/div&gt;\n                                &lt;div class=&quot;col-sm-4&quot;&gt;\n                                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-dark&quot; id=&quot;uploadButton&quot;&gt;Upload&lt;/button&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n</code></pre>\n\n"},{"tags":[],"owner":{"account_id":20409536,"reputation":63,"user_id":14973287,"display_name":"Bruno"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677156746,"creation_date":1677156746,"answer_id":75545095,"question_id":50515601,"body_markdown":"In my case it was a permission issue, I had to toggle the following setting to ON : \r\n\r\n[![setting][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XuOqf.png","title":"Spring Boot Required request part &#39;file&#39; is not present","body":"<p>In my case it was a permission issue, I had to toggle the following setting to ON :</p>\n<p><a href=\"https://i.stack.imgur.com/XuOqf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XuOqf.png\" alt=\"setting\" /></a></p>\n"}],"owner":{"account_id":3755323,"reputation":331,"user_id":3121794,"accept_rate":69,"display_name":"CS2016"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15955,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":53540182,"answer_count":6,"score":0,"last_activity_date":1677156746,"creation_date":1527185238,"question_id":50515601,"body_markdown":"I am trying to create a file upload utility and am getting the following error when I click on the `submit` button. It starts uploading and then suddenly has this error: \r\n\r\n    There was an unexpected error (type=Bad Request, status=400).\r\n    Required request part &#39;file&#39; is not present\r\n\r\nI don&#39;t have a stacktrace, that&#39;s all that&#39;s displayed in my window or my console. I&#39;ve looked for other solutions and they all ended up being someone forgot to include `name=&quot;file&quot;` in their html file. I have made sure it&#39;s included and am still getting the error. \r\n\r\nBelow is my upload form:\r\n\r\n    &lt;div id=&quot;custom-search-input&quot;&gt;\r\n    &lt;label&gt;Select a file to upload&lt;/label&gt;\r\n    \t&lt;form action=&quot;/upload&quot; enctype=&quot;multipart/form-data&quot; method = &quot;post&quot;&gt; \r\n    \t\t&lt;div class=&quot;input-group col-md-12&quot;&gt;\r\n    \t\t\t&lt;input type=&quot;file&quot; name=&quot;file&quot; class=&quot;search-query form-control&quot;/&gt;\r\n    \t\t\t&lt;span class=&quot;input-group-btn&quot;&gt;\r\n    \t\t\t\t&lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Upload &lt;/button&gt;\r\n    \t\t\t&lt;/span&gt;\r\n    \t\t&lt;/div&gt;\r\n    \t&lt;/form&gt;\r\n    &lt;/div&gt;\r\n\r\nThis is my controller method for uploading:\r\n\r\n    @Value(&quot;${upload.path}&quot;)\r\n    \tprivate String path;\r\n    \t\r\n    \t@RequestMapping(&quot;/upload&quot;)\r\n    \tpublic String upload(@RequestParam(&quot;file&quot;) MultipartFile file, Model model, HttpSession session) throws IOException {\r\n    \t\t\tif(!file.isEmpty()) {\r\n    \t\t\t\t//Get the user\r\n    \t\t\t\tUser user = (User) session.getAttribute(&quot;user&quot;);\r\n    \t\t\t\t//Get the file name\r\n    \t\t\t\tString fileName = file.getOriginalFilename();\r\n    \t            InputStream is = file.getInputStream();\r\n    \t            //Store the uploaded file into the users directory in the system path\r\n    \t            Files.copy(is, Paths.get(path + user.getNetworkId() + &quot;\\\\&quot;  + fileName),StandardCopyOption.REPLACE_EXISTING);\r\n    \t\r\n    \t        return &quot;redirect:/success.html&quot;;\r\n    \t\r\n    \t    } else {\r\n    \t\r\n    \t        return &quot;redirect:/index.html&quot;;\r\n    \t    }\t\r\n    \t}\r\n\r\nAlso would like to note I tried this for my upload method: \r\n\r\n    public String upload(@RequestParam(name=&quot;file&quot;,required=true) MultipartFile file, Model model, HttpSession session) \r\n\r\nFor reference, [this](http://zetcode.com/springboot/uploadfile/) is what I was referrencing.\r\n\r\nAs per some of the answers below, I tried creating a `PostMapping` method stand alone, as well as `@RequestMapping(value=&quot;/upload&quot;, method = RequestMethod.POST)` I am still getting the error.","title":"Spring Boot Required request part &#39;file&#39; is not present","body":"<p>I am trying to create a file upload utility and am getting the following error when I click on the <code>submit</code> button. It starts uploading and then suddenly has this error: </p>\n\n<pre><code>There was an unexpected error (type=Bad Request, status=400).\nRequired request part 'file' is not present\n</code></pre>\n\n<p>I don't have a stacktrace, that's all that's displayed in my window or my console. I've looked for other solutions and they all ended up being someone forgot to include <code>name=\"file\"</code> in their html file. I have made sure it's included and am still getting the error. </p>\n\n<p>Below is my upload form:</p>\n\n<pre><code>&lt;div id=\"custom-search-input\"&gt;\n&lt;label&gt;Select a file to upload&lt;/label&gt;\n    &lt;form action=\"/upload\" enctype=\"multipart/form-data\" method = \"post\"&gt; \n        &lt;div class=\"input-group col-md-12\"&gt;\n            &lt;input type=\"file\" name=\"file\" class=\"search-query form-control\"/&gt;\n            &lt;span class=\"input-group-btn\"&gt;\n                &lt;button type=\"submit\" class=\"btn btn-success\"&gt;Upload &lt;/button&gt;\n            &lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This is my controller method for uploading:</p>\n\n<pre><code>@Value(\"${upload.path}\")\n    private String path;\n\n    @RequestMapping(\"/upload\")\n    public String upload(@RequestParam(\"file\") MultipartFile file, Model model, HttpSession session) throws IOException {\n            if(!file.isEmpty()) {\n                //Get the user\n                User user = (User) session.getAttribute(\"user\");\n                //Get the file name\n                String fileName = file.getOriginalFilename();\n                InputStream is = file.getInputStream();\n                //Store the uploaded file into the users directory in the system path\n                Files.copy(is, Paths.get(path + user.getNetworkId() + \"\\\\\"  + fileName),StandardCopyOption.REPLACE_EXISTING);\n\n            return \"redirect:/success.html\";\n\n        } else {\n\n            return \"redirect:/index.html\";\n        }   \n    }\n</code></pre>\n\n<p>Also would like to note I tried this for my upload method: </p>\n\n<pre><code>public String upload(@RequestParam(name=\"file\",required=true) MultipartFile file, Model model, HttpSession session) \n</code></pre>\n\n<p>For reference, <a href=\"http://zetcode.com/springboot/uploadfile/\" rel=\"nofollow noreferrer\">this</a> is what I was referrencing.</p>\n\n<p>As per some of the answers below, I tried creating a <code>PostMapping</code> method stand alone, as well as <code>@RequestMapping(value=\"/upload\", method = RequestMethod.POST)</code> I am still getting the error.</p>\n"},{"tags":["java","web-services","http","quarkus"],"answers":[{"tags":[],"owner":{"account_id":305143,"reputation":1151,"user_id":615104,"display_name":"Jan Martiška"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1600246656,"creation_date":1600246656,"answer_id":63916573,"question_id":63915143,"body_markdown":"To produce a fat jar that includes all the libraries necessary to run the app, use the property `quarkus.package.uber-jar=true` (you can add that into `src/main/resources/application.properties` or pass it as a system property when running the build).","title":"java.lang.ClassNotFoundException: io.quarkus.runtime.Quarkus","body":"<p>To produce a fat jar that includes all the libraries necessary to run the app, use the property <code>quarkus.package.uber-jar=true</code> (you can add that into <code>src/main/resources/application.properties</code> or pass it as a system property when running the build).</p>\n"},{"tags":[],"owner":{"account_id":15017113,"reputation":161,"user_id":10839796,"display_name":"Werner Diwischek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1647760793,"creation_date":1647760793,"answer_id":71544819,"question_id":63915143,"body_markdown":"With mvn clean package I got the following error starting: \r\n \r\n     Unrecognized configuration key &quot;quarkus.package.uber-jar&quot; was provided\r\n\r\nI&#39;ve found \r\n     \r\n     quarkus.package.type=uber-jar \r\n\r\nas a property. \r\n\r\nWhat I prefer is setting \r\n\r\n     &lt;quarkus.package.type&gt;uber-jar&lt;/quarkus.package.type&gt;\r\n\r\nin the pom properties. \r\n\r\nhttps://github.com/fluentcodes/sandbox/tree/java-quarkus-empty","title":"java.lang.ClassNotFoundException: io.quarkus.runtime.Quarkus","body":"<p>With mvn clean package I got the following error starting:</p>\n<pre><code> Unrecognized configuration key &quot;quarkus.package.uber-jar&quot; was provided\n</code></pre>\n<p>I've found</p>\n<pre><code> quarkus.package.type=uber-jar \n</code></pre>\n<p>as a property.</p>\n<p>What I prefer is setting</p>\n<pre><code> &lt;quarkus.package.type&gt;uber-jar&lt;/quarkus.package.type&gt;\n</code></pre>\n<p>in the pom properties.</p>\n<p><a href=\"https://github.com/fluentcodes/sandbox/tree/java-quarkus-empty\" rel=\"nofollow noreferrer\">https://github.com/fluentcodes/sandbox/tree/java-quarkus-empty</a></p>\n"},{"tags":[],"owner":{"account_id":15591403,"reputation":5743,"user_id":12894468,"display_name":"Sivaram Rasathurai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677156665,"creation_date":1677156665,"answer_id":75545079,"question_id":63915143,"body_markdown":"1. If you want to build an _&#252;ber-jar with Gradle \r\n```shell script\r\n./gradlew build -Dquarkus.package.type=uber-jar\r\n```\r\n\r\n2. If anyone is using `serverless framework`, make sure your artifact is `function.zip` not a jar in Quarkus JDK mode.\r\n```yaml\r\npackage:\r\n  artifact: build/function.zip\r\n```\r\n\r\n3. If anyone is using ALB to invoke the lambda then you have to replace the `&#39;io.quarkus:quarkus-amazon-lambda&#39;` by `&#39;io.quarkus:quarkus-amazon-lambda-rest&#39;`  in your grade. In that case, you don&#39;t need to provide a custom handler implementation.","title":"java.lang.ClassNotFoundException: io.quarkus.runtime.Quarkus","body":"<ol>\n<li>If you want to build an _über-jar with Gradle</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>./gradlew build -Dquarkus.package.type=uber-jar\n</code></pre>\n<ol start=\"2\">\n<li>If anyone is using <code>serverless framework</code>, make sure your artifact is <code>function.zip</code> not a jar in Quarkus JDK mode.</li>\n</ol>\n<pre class=\"lang-yaml prettyprint-override\"><code>package:\n  artifact: build/function.zip\n</code></pre>\n<ol start=\"3\">\n<li>If anyone is using ALB to invoke the lambda then you have to replace the <code>'io.quarkus:quarkus-amazon-lambda'</code> by <code>'io.quarkus:quarkus-amazon-lambda-rest'</code>  in your grade. In that case, you don't need to provide a custom handler implementation.</li>\n</ol>\n"}],"owner":{"account_id":8259172,"reputation":81,"user_id":6223368,"display_name":"user6223368 iSubodh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7576,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":63916573,"answer_count":3,"score":3,"last_activity_date":1677156665,"creation_date":1600241373,"question_id":63915143,"body_markdown":"I am trying to run runner jar of the quarkus application which would be listening over port 9411 on http.\r\n\r\nProgrammatically using UrlClassLoader, when I try to load the jar it throws \r\n(also with java -jar)\r\n1.java.lang.ClassNotFoundException: io.quarkus.runtime.Quarkus\r\n\r\n2.java.lang.reflect.InvocationTargetException\r\nhere is the snippet of code ,\r\n\r\n            URLClassLoader loader = new URLClassLoader(\r\n                new URL[]{ new File(&lt;location of runner jar&gt;).toURI().toURL()});\r\n            Thread.currentThread().setContextClassLoader(loader);\r\n            Class&lt;?&gt; mainClass = loader.loadClass(&quot;io.quarkus.runner.GeneratedMain&quot;); \r\n            Method mainMethod = mainClass.getMethod(&quot;main&quot;, String[].class);\r\n            mainMethod.invoke(null, (Object) new String[]{});\r\n\r\nanother observation is when I place /lib folder at the runner jar location it loads successfully meaning it requires the lib folder altogether.\r\n\r\nHow can I make my code work only with runner jar?","title":"java.lang.ClassNotFoundException: io.quarkus.runtime.Quarkus","body":"<p>I am trying to run runner jar of the quarkus application which would be listening over port 9411 on http.</p>\n<p>Programmatically using UrlClassLoader, when I try to load the jar it throws\n(also with java -jar)\n1.java.lang.ClassNotFoundException: io.quarkus.runtime.Quarkus</p>\n<p>2.java.lang.reflect.InvocationTargetException\nhere is the snippet of code ,</p>\n<pre><code>        URLClassLoader loader = new URLClassLoader(\n            new URL[]{ new File(&lt;location of runner jar&gt;).toURI().toURL()});\n        Thread.currentThread().setContextClassLoader(loader);\n        Class&lt;?&gt; mainClass = loader.loadClass(&quot;io.quarkus.runner.GeneratedMain&quot;); \n        Method mainMethod = mainClass.getMethod(&quot;main&quot;, String[].class);\n        mainMethod.invoke(null, (Object) new String[]{});\n</code></pre>\n<p>another observation is when I place /lib folder at the runner jar location it loads successfully meaning it requires the lib folder altogether.</p>\n<p>How can I make my code work only with runner jar?</p>\n"},{"tags":["java","maven","micronaut"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1671294826,"post_id":74835304,"comment_id":132070696,"body_markdown":"Import the pom into your dependencyManagement section. Same idea as with Spring, described here: https://www.baeldung.com/spring-boot-dependency-management-custom-parent","body":"Import the pom into your dependencyManagement section. Same idea as with Spring, described here: <a href=\"https://www.baeldung.com/spring-boot-dependency-management-custom-parent\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-dependency-management-custom-parent</a>"}],"answers":[{"tags":[],"owner":{"account_id":2674499,"reputation":191,"user_id":4475193,"display_name":"Stanislav Codes"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1671294447,"creation_date":1671294447,"answer_id":74835660,"question_id":74835304,"body_markdown":"Brute-force way of doing this is manually including the dependencies and plugins that are provided by the micronaut-parent artifact in your project&#39;s pom.xml file. \r\n\r\nAlso you should not forget to include the following to have plugins that are provided by micronaut-parent:\r\n\r\n    &lt;build&gt;\r\n    &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micronaut-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${micronaut.version}&lt;/version&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;create-config&lt;/goal&gt;\r\n                        &lt;goal&gt;build&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n        &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n\r\nOne last touch is to have a property micronaut.version in your pom that you want to use.","title":"Micronaut Maven Project Without the Micronaut Parent","body":"<p>Brute-force way of doing this is manually including the dependencies and plugins that are provided by the micronaut-parent artifact in your project's pom.xml file.</p>\n<p>Also you should not forget to include the following to have plugins that are provided by micronaut-parent:</p>\n<pre><code>&lt;build&gt;\n&lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n        &lt;artifactId&gt;micronaut-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${micronaut.version}&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;create-config&lt;/goal&gt;\n                    &lt;goal&gt;build&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n&lt;/plugins&gt;\n</code></pre>\n\n<p>One last touch is to have a property micronaut.version in your pom that you want to use.</p>\n"},{"tags":[],"owner":{"account_id":15143058,"reputation":3,"user_id":10927564,"display_name":"Fabian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677156111,"creation_date":1677156111,"answer_id":75544991,"question_id":74835304,"body_markdown":"    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;!-- Micronaut --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\r\n                &lt;artifactId&gt;micronaut-parent&lt;/artifactId&gt;\r\n                &lt;version&gt;${micronaut.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;","title":"Micronaut Maven Project Without the Micronaut Parent","body":"<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;!-- Micronaut --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micronaut&lt;/groupId&gt;\n            &lt;artifactId&gt;micronaut-parent&lt;/artifactId&gt;\n            &lt;version&gt;${micronaut.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n"}],"owner":{"account_id":6869588,"reputation":3711,"user_id":5280543,"display_name":"Michael Albers"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":412,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1677156111,"creation_date":1671291190,"question_id":74835304,"body_markdown":"I have a Java monorepo with a few child projects, each corresponding to a different service. I am trying to convert one of these from Dropwizard to Micronaut, while leaving the others using Dropwizard.\r\n\r\n```\r\npom.xml\r\n|--service1   &lt;--- converting this, and only this, to Micronaut\r\n|  `--pom.xml\r\n|--service2\r\n|  `--pom.xml \r\n```\r\n\r\nThe top-level **pom.xml** contains common dependencies, plugins, etc. the child projectgs inherit via the `&lt;parent&gt;` mechanism. All of the Micronaut documentation, examples and project builder set the `micronaut-parent` artifact as the project&#39;s parent. I&#39;m unable to figure out how to keep the existing inheritance while also getting all of the features from the micronaut-parent artifact.\r\n\r\nIs there a way to have a Micronaut project without the inheritance, but with the features micronaut-parent provides? Is there some other workaround?","title":"Micronaut Maven Project Without the Micronaut Parent","body":"<p>I have a Java monorepo with a few child projects, each corresponding to a different service. I am trying to convert one of these from Dropwizard to Micronaut, while leaving the others using Dropwizard.</p>\n<pre><code>pom.xml\n|--service1   &lt;--- converting this, and only this, to Micronaut\n|  `--pom.xml\n|--service2\n|  `--pom.xml \n</code></pre>\n<p>The top-level <strong>pom.xml</strong> contains common dependencies, plugins, etc. the child projectgs inherit via the <code>&lt;parent&gt;</code> mechanism. All of the Micronaut documentation, examples and project builder set the <code>micronaut-parent</code> artifact as the project's parent. I'm unable to figure out how to keep the existing inheritance while also getting all of the features from the micronaut-parent artifact.</p>\n<p>Is there a way to have a Micronaut project without the inheritance, but with the features micronaut-parent provides? Is there some other workaround?</p>\n"},{"tags":["java","selenium","selenium-webdriver","webdriver","remotewebdriver"],"answers":[{"tags":[],"owner":{"account_id":4282603,"reputation":1705,"user_id":3501502,"display_name":"Anton Angelov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432298598,"creation_date":1432298598,"answer_id":30397049,"question_id":30396783,"body_markdown":"You can make the download folder shared. \\\\youruser\\downloads after that you can pass this path to the File.Delete(); and it will delete the desired files.","title":"How can I delete a downloaded file using Selenium RemoteWebDriver?","body":"<p>You can make the download folder shared. \\youruser\\downloads after that you can pass this path to the File.Delete(); and it will delete the desired files.</p>\n"},{"tags":[],"owner":{"account_id":14102045,"reputation":1,"user_id":10187161,"display_name":"siva kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1533665178,"creation_date":1533665178,"answer_id":51732945,"question_id":30396783,"body_markdown":"This Worked for me\r\n\r\n\r\n    try \r\n    {\r\n    if ((new File(&quot;Path&quot;)).delete()) {\r\n    \t\t\t\tSystem.out.println(&quot;Pass&quot;);\t\t\r\n    \t\t\t} else {\r\n    \t\t\t\tSystem.out.println(&quot;Failed&quot;);\r\n    \t\t\t}\r\n    \r\n    \t  \t  } catch (Exception ex) {\r\n    \t\t\tex.printStackTrace();\r\n    \t\t  }","title":"How can I delete a downloaded file using Selenium RemoteWebDriver?","body":"<p>This Worked for me</p>\n\n<pre><code>try \n{\nif ((new File(\"Path\")).delete()) {\n                System.out.println(\"Pass\");     \n            } else {\n                System.out.println(\"Failed\");\n            }\n\n          } catch (Exception ex) {\n            ex.printStackTrace();\n          }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10272291,"reputation":1,"user_id":7580303,"display_name":"vishal kavita rathi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1549741445,"creation_date":1549741445,"answer_id":54610057,"question_id":30396783,"body_markdown":"       ----------simply use this code for delete file in any folder-------------------       \r\n       File file = new File(&quot;C:\\\\Users\\\\Updoer\\\\Downloads\\\\Inspections.pdf&quot;); \r\n   \t   if(file.delete())\r\n   \t   System.out.println(&quot;file deleted&quot;);\r\n   \t","title":"How can I delete a downloaded file using Selenium RemoteWebDriver?","body":"<pre><code>   ----------simply use this code for delete file in any folder-------------------       \n   File file = new File(\"C:\\\\Users\\\\Updoer\\\\Downloads\\\\Inspections.pdf\"); \n   if(file.delete())\n   System.out.println(\"file deleted\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13239039,"reputation":1,"user_id":9560216,"display_name":"paresh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1581837426,"creation_date":1581835994,"answer_id":60246125,"question_id":30396783,"body_markdown":"The Below Code will sequentially delete all the files from folder\r\n\t\t\r\n        File path = new File(&quot;Path of Folder&quot;);\r\n\t\tFile[] files = path.listFiles();\r\n\t\tfor (File file : files) {\r\n\t\t\tSystem.out.println(&quot;Deleted filename :&quot;+ file.getName());\r\n\t\t\tfile.delete();\r\n\t\t}","title":"How can I delete a downloaded file using Selenium RemoteWebDriver?","body":"<p>The Below Code will sequentially delete all the files from folder</p>\n\n<pre><code>    File path = new File(\"Path of Folder\");\n    File[] files = path.listFiles();\n    for (File file : files) {\n        System.out.println(\"Deleted filename :\"+ file.getName());\n        file.delete();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1379352,"reputation":402,"user_id":1312704,"accept_rate":90,"display_name":"mactwixs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677155646,"creation_date":1677155646,"answer_id":75544907,"question_id":30396783,"body_markdown":"Cleanup of downloaded files within session of Grid Node feature is planned:\r\n\r\nhttps://github.com/SeleniumHQ/selenium/issues/11457\r\nhttps://github.com/SeleniumHQ/selenium/issues/11657","title":"How can I delete a downloaded file using Selenium RemoteWebDriver?","body":"<p>Cleanup of downloaded files within session of Grid Node feature is planned:</p>\n<p><a href=\"https://github.com/SeleniumHQ/selenium/issues/11457\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/issues/11457</a>\n<a href=\"https://github.com/SeleniumHQ/selenium/issues/11657\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/issues/11657</a></p>\n"}],"owner":{"account_id":5205240,"reputation":977,"user_id":4163398,"accept_rate":50,"display_name":"Dave"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13074,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1677155646,"creation_date":1432297813,"question_id":30396783,"body_markdown":"I am writing a test to check that a file can be downloaded from a particular web page and I want it to be able to run both locally and remotely (i.e. on a node via Selenium grid). Before anyone links me to the &#39;do you really need to download the file?&#39; article, I have already managed to download and check the file, I just need a way of deleting it after the test has completed. Just calling `File.delete();` or similar will only work locally (as far as I&#39;m aware) so I can&#39;t use that to delete the file from the node machine. I&#39;m aware of the class `org.openqa.selenium.io.TemporaryFileSystem` however I can&#39;t find any instructions for how to use it.\r\n\r\nCan anyone offer a better solution than &#39;just run a script on the node machine to delete the file&#39;? Thanks!","title":"How can I delete a downloaded file using Selenium RemoteWebDriver?","body":"<p>I am writing a test to check that a file can be downloaded from a particular web page and I want it to be able to run both locally and remotely (i.e. on a node via Selenium grid). Before anyone links me to the 'do you really need to download the file?' article, I have already managed to download and check the file, I just need a way of deleting it after the test has completed. Just calling <code>File.delete();</code> or similar will only work locally (as far as I'm aware) so I can't use that to delete the file from the node machine. I'm aware of the class <code>org.openqa.selenium.io.TemporaryFileSystem</code> however I can't find any instructions for how to use it.</p>\n\n<p>Can anyone offer a better solution than 'just run a script on the node machine to delete the file'? Thanks!</p>\n"},{"tags":["java","selenium","winappdriver"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1673261109,"post_id":75054974,"comment_id":132450619,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":22573771,"reputation":1,"user_id":16759582,"display_name":"yogesh ghildiyal"},"score":0,"creation_date":1673278655,"post_id":75054974,"comment_id":132457244,"body_markdown":"Actually i am working on a desktop application where i need to login so i need to send some input but sendkeys is not working but the element is visible as also clickable but while using sendkeys for sending input its not working","body":"Actually i am working on a desktop application where i need to login so i need to send some input but sendkeys is not working but the element is visible as also clickable but while using sendkeys for sending input its not working"}],"answers":[{"tags":[],"owner":{"account_id":12265172,"reputation":557,"user_id":8951897,"display_name":"G. Victor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677155516,"creation_date":1677155516,"answer_id":75544875,"question_id":75054974,"body_markdown":"You can try to use the next approaches, in this case, to paste text on Java or C#:\r\n\r\nusing Selenium Send Keys C#\r\n\r\n\tpublic void PasteText(IWebElement element, string text)\r\n    {\r\n    \tClipboard.SetText(text);\r\n    \telement.Click();\r\n    \tThread.Sleep(100);\r\n    \telement.SendKeys(OpenQA.Selenium.Keys.Control + &quot;a&quot; + OpenQA.Selenium.Keys.Delete);\r\n    \tThread.Sleep(100);\r\n    \telement.SendKeys(OpenQA.Selenium.Keys.Control + &quot;v&quot;);\r\n    }\r\n\t\r\nusing Selenium Send Keys Java\r\n\r\n\tpublic void pasteText(WebElement element, String text)\r\n    {\r\n    \tClipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\r\n\t\tStringSelection stringSelection = new StringSelection(text);\r\n\t\tclipboard.setContents(stringSelection, null);\t\t\r\n    \telement.click();\r\n    \tThread.sleep(100);\r\n    \telement.sendKeys(Keys.chord(Keys.CONTROL, &quot;a&quot;));\r\n    \telement.sendKeys(Keys.Delete);\r\n    \tThread.sleep(100);\r\n    \telement.sendKeys(Keys.chord(Keys.CONTROL, &quot;v&quot;));\r\n    }\r\n\t\r\nusing InputSimulator library C#\r\n\r\n\tpublic static void PasteText(IWebElement element, string text)\r\n\t{\r\n\t\tClipboard.SetText(text);\r\n\t\telement.Click();\r\n\t\tThread.Sleep(100);\r\n\t\tvar inSim = new WindowsInput.InputSimulator();\r\n\t\tinSim.Keyboard.ModifiedKeyStroke(VirtualKeyCode.CONTROL, VirtualKeyCode.VK_A);\t\t\r\n\t\tinSim.Keyboard.KeyDown(VirtualKeyCode.DELETE);\r\n\t\tThread.Sleep(100);\r\n\t\tinSim.Keyboard.ModifiedKeyStroke(VirtualKeyCode.CONTROL, VirtualKeyCode.VK_V);\r\n\t\tinSim.Keyboard.KeyDown(VirtualKeyCode.RETURN);\r\n\t}\r\n\t\r\nusing Robot library Java\r\n\r\n\tpublic void pasteText(WebElement element, String text)\r\n    {\r\n    \tClipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\r\n\t\tStringSelection stringSelection = new StringSelection(text);\r\n\t\tclipboard.setContents(stringSelection, null);\t\t\t\t\r\n    \telement.click();\r\n    \tThread.sleep(100);\r\n\t\tRobot robot = new Robot();\r\n\t\trobot.keyPress(KeyEvent.VK_CONTROL);\r\n\t\trobot.keyPress(KeyEvent.VK_A);\r\n\t\trobot.keyRelease(KeyEvent.VK_A);\r\n\t\trobot.keyRelease(KeyEvent.VK_CONTROL);\r\n\t\trobot.keyPress(KeyEvent.VK_DELETE);\r\n\t\trobot.keyRelease(KeyEvent.VK_DELETE);\r\n    \tThread.sleep(100);\r\n    \trobot.keyPress(KeyEvent.VK_CONTROL);\r\n\t\trobot.keyPress(KeyEvent.VK_V);\r\n\t\trobot.keyRelease(KeyEvent.VK_V);\r\n\t\trobot.keyRelease(KeyEvent.VK_CONTROL);\r\n\t\trobot.keyPress(KeyEvent.VK_RETURN);\r\n\t\trobot.keyRelease(KeyEvent.VK_RETURN);\r\n    }","title":"Unable to pass values using SendKeys() while automating desktop application using WinAppDriver?","body":"<p>You can try to use the next approaches, in this case, to paste text on Java or C#:</p>\n<p>using Selenium Send Keys C#</p>\n<pre><code>public void PasteText(IWebElement element, string text)\n{\n    Clipboard.SetText(text);\n    element.Click();\n    Thread.Sleep(100);\n    element.SendKeys(OpenQA.Selenium.Keys.Control + &quot;a&quot; + OpenQA.Selenium.Keys.Delete);\n    Thread.Sleep(100);\n    element.SendKeys(OpenQA.Selenium.Keys.Control + &quot;v&quot;);\n}\n</code></pre>\n<p>using Selenium Send Keys Java</p>\n<pre><code>public void pasteText(WebElement element, String text)\n{\n    Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n    StringSelection stringSelection = new StringSelection(text);\n    clipboard.setContents(stringSelection, null);       \n    element.click();\n    Thread.sleep(100);\n    element.sendKeys(Keys.chord(Keys.CONTROL, &quot;a&quot;));\n    element.sendKeys(Keys.Delete);\n    Thread.sleep(100);\n    element.sendKeys(Keys.chord(Keys.CONTROL, &quot;v&quot;));\n}\n</code></pre>\n<p>using InputSimulator library C#</p>\n<pre><code>public static void PasteText(IWebElement element, string text)\n{\n    Clipboard.SetText(text);\n    element.Click();\n    Thread.Sleep(100);\n    var inSim = new WindowsInput.InputSimulator();\n    inSim.Keyboard.ModifiedKeyStroke(VirtualKeyCode.CONTROL, VirtualKeyCode.VK_A);      \n    inSim.Keyboard.KeyDown(VirtualKeyCode.DELETE);\n    Thread.Sleep(100);\n    inSim.Keyboard.ModifiedKeyStroke(VirtualKeyCode.CONTROL, VirtualKeyCode.VK_V);\n    inSim.Keyboard.KeyDown(VirtualKeyCode.RETURN);\n}\n</code></pre>\n<p>using Robot library Java</p>\n<pre><code>public void pasteText(WebElement element, String text)\n{\n    Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n    StringSelection stringSelection = new StringSelection(text);\n    clipboard.setContents(stringSelection, null);               \n    element.click();\n    Thread.sleep(100);\n    Robot robot = new Robot();\n    robot.keyPress(KeyEvent.VK_CONTROL);\n    robot.keyPress(KeyEvent.VK_A);\n    robot.keyRelease(KeyEvent.VK_A);\n    robot.keyRelease(KeyEvent.VK_CONTROL);\n    robot.keyPress(KeyEvent.VK_DELETE);\n    robot.keyRelease(KeyEvent.VK_DELETE);\n    Thread.sleep(100);\n    robot.keyPress(KeyEvent.VK_CONTROL);\n    robot.keyPress(KeyEvent.VK_V);\n    robot.keyRelease(KeyEvent.VK_V);\n    robot.keyRelease(KeyEvent.VK_CONTROL);\n    robot.keyPress(KeyEvent.VK_RETURN);\n    robot.keyRelease(KeyEvent.VK_RETURN);\n}\n</code></pre>\n"}],"owner":{"account_id":22573771,"reputation":1,"user_id":16759582,"display_name":"yogesh ghildiyal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677155516,"creation_date":1673254618,"question_id":75054974,"body_markdown":"How can I send Data in desktop application if sendKeys() is not working fine but element is visible and on for the same xpath click action is working fine, but unable to send data.can anyone please help me on that\r\n\r\n\r\ndriver.findELement(By.name(&quot;&quot;)).sendKeys(&quot;&quot;) // isn&#39;t working xpath is same \r\ndriver.findELement(By.name(&quot;&quot;)).click() //  working xpath is same","title":"Unable to pass values using SendKeys() while automating desktop application using WinAppDriver?","body":"<p>How can I send Data in desktop application if sendKeys() is not working fine but element is visible and on for the same xpath click action is working fine, but unable to send data.can anyone please help me on that</p>\n<p>driver.findELement(By.name(&quot;&quot;)).sendKeys(&quot;&quot;) // isn't working xpath is same\ndriver.findELement(By.name(&quot;&quot;)).click() //  working xpath is same</p>\n"},{"tags":["java","mockito","powermock","powermockito"],"comments":[{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1677174137,"post_id":75544824,"comment_id":133290479,"body_markdown":"You&#39;re calling the method before setting up the mocks - that would be my first guess at the problem. You should mock first, then call the verified method.","body":"You&#39;re calling the method before setting up the mocks - that would be my first guess at the problem. You should mock first, then call the verified method."},{"owner":{"account_id":8370572,"reputation":1860,"user_id":6285832,"accept_rate":60,"display_name":"Omegaspard"},"score":0,"creation_date":1677193120,"post_id":75544824,"comment_id":133295207,"body_markdown":"What do you mean I call the method before the mocks. I call getFreeSpace at the very end.","body":"What do you mean I call the method before the mocks. I call getFreeSpace at the very end."},{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1677198252,"post_id":75544824,"comment_id":133295918,"body_markdown":"`testPowerMock.createFileAndReturnIt()` creates the object without PowerMock involvement as you&#39;re calling the method before mocking the behaviour. Then you&#39;re setting up the mocking that has no effect. After that you&#39;re only calling a method on already created object that is not a mock.","body":"<code>testPowerMock.createFileAndReturnIt()</code> creates the object without PowerMock involvement as you&#39;re calling the method before mocking the behaviour. Then you&#39;re setting up the mocking that has no effect. After that you&#39;re only calling a method on already created object that is not a mock."},{"owner":{"account_id":8370572,"reputation":1860,"user_id":6285832,"accept_rate":60,"display_name":"Omegaspard"},"score":0,"creation_date":1677226195,"post_id":75544824,"comment_id":133299584,"body_markdown":"I think you&#39;re not aware of what I&#39;m trying to do. This is a constructor mock, it&#39;s suppose to mock every call to the constructor in the class. You can see that with with the whenNew and the different anotation PrepareForTest and RunWith.","body":"I think you&#39;re not aware of what I&#39;m trying to do. This is a constructor mock, it&#39;s suppose to mock every call to the constructor in the class. You can see that with with the whenNew and the different anotation PrepareForTest and RunWith."}],"owner":{"account_id":8370572,"reputation":1860,"user_id":6285832,"accept_rate":60,"display_name":"Omegaspard"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677155191,"creation_date":1677155191,"question_id":75544824,"body_markdown":"I have this simple class:\r\n\r\n    import java.io.File;\r\n    \r\n    public class TestPowerMock {\r\n    \tpublic File createFileAndReturnIt() {\r\n    \t\treturn new File(&quot;/&quot;);\r\n    \t}\r\n    }\r\n\r\nAnd this simple test:\r\n\r\n    import static org.mockito.Mockito.mock;\r\n    import static org.mockito.Mockito.when;\r\n    import static org.powermock.api.mockito.PowerMockito.whenNew;\r\n    \r\n    import java.io.File;\r\n    \r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.Mockito;\r\n    import org.powermock.core.classloader.annotations.PrepareForTest;\r\n    import org.powermock.modules.junit4.PowerMockRunner;\r\n    \r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest(TestPowerMock.class)\r\n    class TestTestPowerMock {\r\n    \r\n    \t@Test\r\n    \tpublic void test() throws Exception {\r\n    \t\tTestPowerMock testPowerMock = new TestPowerMock();\r\n    \r\n    \t\tFile fileAndReturnIt = testPowerMock.createFileAndReturnIt();\r\n    \t\tFile mockFile = mock(File.class);\r\n    \r\n    \t\twhen(mockFile.getTotalSpace()).thenReturn(1L);\r\n    \t\twhen(mockFile.getFreeSpace()).thenReturn(2L);\r\n    \r\n    \t\twhenNew(File.class).withArguments(Mockito.anyString()).thenReturn(mockFile);\r\n    \r\n    \t\tSystem.out.println(fileAndReturnIt.getFreeSpace());\r\n    \t}\r\n    }\r\n\r\nAccording to my test mocking scenario, the stout should be printed with 2L right ? Yet I still have the actual &quot;/&quot; folder size.\r\n\r\nI did call the PrepareForTest and the RunWith properly no ? Why is it not working ?\r\n\r\nMy mockito-core version is 3.0.0 but also tested with 5.11 and 2.23.0 and also without it, powermock is 2.0.9 and powermock-apit-mockito2 is 2.0.9 as well.\r\n\r\nAlso tried with any(), and the method withNoArguments but same result.","title":"Why is the PowerMock.whenNew not working here?","body":"<p>I have this simple class:</p>\n<pre><code>import java.io.File;\n\npublic class TestPowerMock {\n    public File createFileAndReturnIt() {\n        return new File(&quot;/&quot;);\n    }\n}\n</code></pre>\n<p>And this simple test:</p>\n<pre><code>import static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\nimport static org.powermock.api.mockito.PowerMockito.whenNew;\n\nimport java.io.File;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest(TestPowerMock.class)\nclass TestTestPowerMock {\n\n    @Test\n    public void test() throws Exception {\n        TestPowerMock testPowerMock = new TestPowerMock();\n\n        File fileAndReturnIt = testPowerMock.createFileAndReturnIt();\n        File mockFile = mock(File.class);\n\n        when(mockFile.getTotalSpace()).thenReturn(1L);\n        when(mockFile.getFreeSpace()).thenReturn(2L);\n\n        whenNew(File.class).withArguments(Mockito.anyString()).thenReturn(mockFile);\n\n        System.out.println(fileAndReturnIt.getFreeSpace());\n    }\n}\n</code></pre>\n<p>According to my test mocking scenario, the stout should be printed with 2L right ? Yet I still have the actual &quot;/&quot; folder size.</p>\n<p>I did call the PrepareForTest and the RunWith properly no ? Why is it not working ?</p>\n<p>My mockito-core version is 3.0.0 but also tested with 5.11 and 2.23.0 and also without it, powermock is 2.0.9 and powermock-apit-mockito2 is 2.0.9 as well.</p>\n<p>Also tried with any(), and the method withNoArguments but same result.</p>\n"},{"tags":["java","generics","types","initialization","inner-classes"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1677120786,"post_id":75538997,"comment_id":133276884,"body_markdown":"Have you tried `merge(LinkedList&lt;Item&gt; a, LinkedList&lt;Item&gt; b)`? It looks to me like that will solve your problem quite normally.","body":"Have you tried <code>merge(LinkedList&lt;Item&gt; a, LinkedList&lt;Item&gt; b)</code>? It looks to me like that will solve your problem quite normally."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1677147270,"post_id":75538997,"comment_id":133281794,"body_markdown":"As an aside, are you sure you want `merge` to take two parameters, rather than taking one parameter and merging it with the `LinkedList` that it was called on? As written, it looks like it ignores the list it was called on (at least in the part of the method included in the question). So, to merge lists `a` and `b` you need to call `a.merge(a, b)` or `b.merge(a, b)` or `new LinkedList&lt;&gt;().merge(a, b)` instead of `a.merge(b)`.","body":"As an aside, are you sure you want <code>merge</code> to take two parameters, rather than taking one parameter and merging it with the <code>LinkedList</code> that it was called on? As written, it looks like it ignores the list it was called on (at least in the part of the method included in the question). So, to merge lists <code>a</code> and <code>b</code> you need to call <code>a.merge(a, b)</code> or <code>b.merge(a, b)</code> or <code>new LinkedList&lt;&gt;().merge(a, b)</code> instead of <code>a.merge(b)</code>."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677148978,"post_id":75538997,"comment_id":133282294,"body_markdown":"You are using [raw types](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it) as your method arguments, which basically &quot;turns off generics&quot;.","body":"You are using <a href=\"https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it\">raw types</a> as your method arguments, which basically &quot;turns off generics&quot;."},{"owner":{"account_id":27855152,"reputation":1,"user_id":21268818,"display_name":"wh152"},"score":0,"creation_date":1677165760,"post_id":75538997,"comment_id":133287672,"body_markdown":"@matt the thread that apparently answer my question doesn&#39;t, it just says to not use raw types. I appreciate that using raw types is bad, but I have to use this code template that I was given for my lab assignment, it was written by maths professors who have only a reasonable understanding of programming","body":"@matt the thread that apparently answer my question doesn&#39;t, it just says to not use raw types. I appreciate that using raw types is bad, but I have to use this code template that I was given for my lab assignment, it was written by maths professors who have only a reasonable understanding of programming"},{"owner":{"account_id":27855152,"reputation":1,"user_id":21268818,"display_name":"wh152"},"score":0,"creation_date":1677238761,"post_id":75538997,"comment_id":133302976,"body_markdown":"@matt the original answer just says to not use raw types. I have to use raw types for the lab since that is the code I&#39;ve been given, I wanted to know how I could workaround this. You never really explained why it&#39;s apparently a dupe, you just said it&#39;s &quot;absolutely&quot; been asked before. Yes the guy who gave the answer read the thread, but I wasn&#39;t talking about them","body":"@matt the original answer just says to not use raw types. I have to use raw types for the lab since that is the code I&#39;ve been given, I wanted to know how I could workaround this. You never really explained why it&#39;s apparently a dupe, you just said it&#39;s &quot;absolutely&quot; been asked before. Yes the guy who gave the answer read the thread, but I wasn&#39;t talking about them"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1677256054,"post_id":75538997,"comment_id":133308063,"body_markdown":"Do you know where you were using raw types? The answer fixes that problem. It is also a duplicate question, because you are using raw types which causes your problem.","body":"Do you know where you were using raw types? The answer fixes that problem. It is also a duplicate question, because you are using raw types which causes your problem."}],"answers":[{"tags":[],"owner":{"account_id":6484127,"reputation":9341,"user_id":5020253,"accept_rate":88,"display_name":"SDekov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677148854,"creation_date":1677148854,"answer_id":75543674,"question_id":75538997,"body_markdown":"From the logic of your list it is implied that both lists beeing merged must be of the same `Item` type - then you can type them and this will also avoid all the unnecessary casting.\r\n\r\n    public LinkedList&lt;Item&gt; merge(LinkedList&lt;Item&gt; a, LinkedList&lt;Item&gt; b)","title":"Can&#39;t access generic state type outside class","body":"<p>From the logic of your list it is implied that both lists beeing merged must be of the same <code>Item</code> type - then you can type them and this will also avoid all the unnecessary casting.</p>\n<pre><code>public LinkedList&lt;Item&gt; merge(LinkedList&lt;Item&gt; a, LinkedList&lt;Item&gt; b)\n</code></pre>\n"}],"owner":{"account_id":27855152,"reputation":1,"user_id":21268818,"display_name":"wh152"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1677148997,"accepted_answer_id":75543674,"answer_count":1,"score":-1,"last_activity_date":1677155153,"creation_date":1677106763,"question_id":75538997,"body_markdown":"When trying to compare keys when implementing merge sort on a linked list I found that Java seems to hide generic types of fields from outside the class, and you have to either cast a variable to the generic type (even when it is of the generic type itself), or make an instance of the class that uses generics and then access the field from there\r\n\r\n```\r\npublic class LinkedList&lt;Item extends Comparable&lt;Item&gt;&gt; {\r\n    private Node&lt;Item&gt; head;\r\n    \r\n    public static class Node&lt;Item&gt; {\r\n        public Item key;\r\n        public Node&lt;Item&gt; next;\r\n    }\r\n\r\n    public LinkedList() {\r\n        head = null;\r\n    }\r\n\r\n    public LinkedList&lt;Item&gt; merge(LinkedList a, LinkedList b) {\r\n        if (a == null || a.head == null) {\r\n            return b;\r\n        } else if (b == null || b.head == null) {\r\n            return a;\r\n        }\r\n        LinkedList&lt;Item&gt; x = null;\r\n        Item keyA = (Item) a.head.key;\r\n        Item keyB = (Item) b.head.key;\r\n        Node&lt;Item&gt; node = a.head;\r\n        Item works = node.key;\r\n        Item doesNotWork = (a.head).key;\r\n        ...\r\n```\r\n\r\nIn the code snippet above, keyA and keyB must have their values casted to the generic type Item. The node object of type Node&lt;Item&gt; can be used to reference its key which is of type Item, but trying to initialize doesNotWork results in the error &quot;java: incompatible types: java.lang.Object cannot be converted to Item&quot;, even though it referenes the Node&lt;Item&gt; head object, and then the Item key object within it (with brackets too). Changing the access modifiers of the class or its fields makes no difference. Can someone explain why Java can&#39;t access generic types within classes despite being able to do so for concrete types, and if I can reference a generic type from outside a class without casting or making an instance of the class with the generic type?\r\n\r\nNo, this is not the same as the question about raw types because the answers to that do not tell me how I can directly reference a field of the static generic class. I know this is a terrible way to use generics, but the code given (apart from at the end) was from a lab in my algorithms class, I don&#39;t choose the code they give us. It&#39;s also not really fair that I didn&#39;t lookup raw types since I never really knew what they were. I can&#39;t edit the code template they gave us, please let me ask how I can do what I need to for this assignment instead of being a code snob.","title":"Can&#39;t access generic state type outside class","body":"<p>When trying to compare keys when implementing merge sort on a linked list I found that Java seems to hide generic types of fields from outside the class, and you have to either cast a variable to the generic type (even when it is of the generic type itself), or make an instance of the class that uses generics and then access the field from there</p>\n<pre><code>public class LinkedList&lt;Item extends Comparable&lt;Item&gt;&gt; {\n    private Node&lt;Item&gt; head;\n    \n    public static class Node&lt;Item&gt; {\n        public Item key;\n        public Node&lt;Item&gt; next;\n    }\n\n    public LinkedList() {\n        head = null;\n    }\n\n    public LinkedList&lt;Item&gt; merge(LinkedList a, LinkedList b) {\n        if (a == null || a.head == null) {\n            return b;\n        } else if (b == null || b.head == null) {\n            return a;\n        }\n        LinkedList&lt;Item&gt; x = null;\n        Item keyA = (Item) a.head.key;\n        Item keyB = (Item) b.head.key;\n        Node&lt;Item&gt; node = a.head;\n        Item works = node.key;\n        Item doesNotWork = (a.head).key;\n        ...\n</code></pre>\n<p>In the code snippet above, keyA and keyB must have their values casted to the generic type Item. The node object of type Node can be used to reference its key which is of type Item, but trying to initialize doesNotWork results in the error &quot;java: incompatible types: java.lang.Object cannot be converted to Item&quot;, even though it referenes the Node head object, and then the Item key object within it (with brackets too). Changing the access modifiers of the class or its fields makes no difference. Can someone explain why Java can't access generic types within classes despite being able to do so for concrete types, and if I can reference a generic type from outside a class without casting or making an instance of the class with the generic type?</p>\n<p>No, this is not the same as the question about raw types because the answers to that do not tell me how I can directly reference a field of the static generic class. I know this is a terrible way to use generics, but the code given (apart from at the end) was from a lab in my algorithms class, I don't choose the code they give us. It's also not really fair that I didn't lookup raw types since I never really knew what they were. I can't edit the code template they gave us, please let me ask how I can do what I need to for this assignment instead of being a code snob.</p>\n"},{"tags":["java","vue.js","quarkus","reactive","mutiny"],"comments":[{"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"score":0,"creation_date":1676907360,"post_id":75511127,"comment_id":133227009,"body_markdown":"You can use Server-Sent-Events (SSE) or Quarkus Reactive Messaging HTTP extension. Follow this guide: https://quarkus.io/guides/resteasy-reactive","body":"You can use Server-Sent-Events (SSE) or Quarkus Reactive Messaging HTTP extension. Follow this guide: <a href=\"https://quarkus.io/guides/resteasy-reactive\" rel=\"nofollow noreferrer\">quarkus.io/guides/resteasy-reactive</a>"},{"owner":{"account_id":14789686,"reputation":21,"user_id":10680982,"display_name":"dockitu"},"score":0,"creation_date":1677078436,"post_id":75511127,"comment_id":133266835,"body_markdown":"Looks like I finally got that working using SSE as you suggested, thanks! However I am still struggling with Authorization header, seems like there is no easy way to authorize in endpoint using jwt token","body":"Looks like I finally got that working using SSE as you suggested, thanks! However I am still struggling with Authorization header, seems like there is no easy way to authorize in endpoint using jwt token"}],"answers":[{"tags":[],"owner":{"account_id":14789686,"reputation":21,"user_id":10680982,"display_name":"dockitu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677155047,"creation_date":1677155047,"answer_id":75544794,"question_id":75511127,"body_markdown":"For future answer-seekers here is how to make it work:\r\n\r\n**IN Java:**\r\n\r\n    @GET\r\n    @Path(&quot;/data&quot;)\r\n    @APIResponse(\r\n            responseCode = &quot;200&quot;,\r\n            description = &quot;Return data&quot;,\r\n            content = @Content(\r\n                    mediaType = MediaType.APPLICATION_JSON,\r\n                    schema = @Schema(type = SchemaType.OBJECT, implementation = Multi.class)\r\n            )\r\n    )\r\n    @Produces(MediaType.SERVER_SENT_EVENTS)\r\n    @RestStreamElementType(MediaType.APPLICATION_JSON)\r\n    @RolesAllowed(Tenant.DEFAULT_ROLE)\r\n    Multi&lt;Map&gt; data(@Context SecurityContext ctx);\r\n\r\n**IN Vue:**\r\n\r\nUse `event-source-polyfill`, and then:\r\n\r\n    import { EventSourcePolyfill } from &quot;event-source-polyfill&quot;;\r\n    const eventSource = new EventSourcePolyfill(`localhost:8080/data`, {\r\n       headers: { Authorization: &quot;Bearer &quot; + &quot;YOUR_TOKEN&quot; }\r\n    });\r\n    eventSource.addEventListener(&quot;message&quot;, event =&gt; {\r\n       //consume message\r\n    });\r\n","title":"Using SmallRye Mutiny in frontend Vue app","body":"<p>For future answer-seekers here is how to make it work:</p>\n<p><strong>IN Java:</strong></p>\n<pre><code>@GET\n@Path(&quot;/data&quot;)\n@APIResponse(\n        responseCode = &quot;200&quot;,\n        description = &quot;Return data&quot;,\n        content = @Content(\n                mediaType = MediaType.APPLICATION_JSON,\n                schema = @Schema(type = SchemaType.OBJECT, implementation = Multi.class)\n        )\n)\n@Produces(MediaType.SERVER_SENT_EVENTS)\n@RestStreamElementType(MediaType.APPLICATION_JSON)\n@RolesAllowed(Tenant.DEFAULT_ROLE)\nMulti&lt;Map&gt; data(@Context SecurityContext ctx);\n</code></pre>\n<p><strong>IN Vue:</strong></p>\n<p>Use <code>event-source-polyfill</code>, and then:</p>\n<pre><code>import { EventSourcePolyfill } from &quot;event-source-polyfill&quot;;\nconst eventSource = new EventSourcePolyfill(`localhost:8080/data`, {\n   headers: { Authorization: &quot;Bearer &quot; + &quot;YOUR_TOKEN&quot; }\n});\neventSource.addEventListener(&quot;message&quot;, event =&gt; {\n   //consume message\n});\n</code></pre>\n"}],"owner":{"account_id":14789686,"reputation":21,"user_id":10680982,"display_name":"dockitu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75544794,"answer_count":1,"score":1,"last_activity_date":1677155047,"creation_date":1676906556,"question_id":75511127,"body_markdown":"I am using Java Quarkus application together with SmallRye Mutiny based on Quarkus guide: https://quarkus.io/guides/mutiny-primer\r\n\r\nI created Rest endpoint as below:\r\n\r\n```\r\n@GET\r\n    @Path(&quot;/data&quot;)\r\n    @APIResponse(\r\n      responseCode = &quot;200&quot;,\r\n      description = &quot;Return data&quot;,\r\n      content = @Content(\r\n        mediaType = MediaType.APPLICATION_JSON,\r\n        schema = @Schema(type = SchemaType.OBJECT, implementation = HashMap.class)\r\n      )\r\n    )\r\n@Produces(MediaType.APPLICATION_JSON)\r\n@Consumes(MediaType.APPLICATION_JSON)\r\n    Multi&lt;Map&gt; data();\r\n```\r\n\r\nI am using Vue framework on frontend together with axios, I managed to get the data from backend as array of Maps, but data are being returned only when the process is complete. I would like to have them on frontend straight after something being pushed to Multi like a subscriber. Any idea how to achieve that? \r\n\r\nI am not sure how to handle that. I tried with rxjs and vue-socket.io but with no luck, not sure if this is not applicable solution or just could not configure it properly.","title":"Using SmallRye Mutiny in frontend Vue app","body":"<p>I am using Java Quarkus application together with SmallRye Mutiny based on Quarkus guide: <a href=\"https://quarkus.io/guides/mutiny-primer\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/mutiny-primer</a></p>\n<p>I created Rest endpoint as below:</p>\n<pre><code>@GET\n    @Path(&quot;/data&quot;)\n    @APIResponse(\n      responseCode = &quot;200&quot;,\n      description = &quot;Return data&quot;,\n      content = @Content(\n        mediaType = MediaType.APPLICATION_JSON,\n        schema = @Schema(type = SchemaType.OBJECT, implementation = HashMap.class)\n      )\n    )\n@Produces(MediaType.APPLICATION_JSON)\n@Consumes(MediaType.APPLICATION_JSON)\n    Multi&lt;Map&gt; data();\n</code></pre>\n<p>I am using Vue framework on frontend together with axios, I managed to get the data from backend as array of Maps, but data are being returned only when the process is complete. I would like to have them on frontend straight after something being pushed to Multi like a subscriber. Any idea how to achieve that?</p>\n<p>I am not sure how to handle that. I tried with rxjs and vue-socket.io but with no luck, not sure if this is not applicable solution or just could not configure it properly.</p>\n"},{"tags":["java","string","replace"],"comments":[{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":1,"creation_date":1677133797,"post_id":75541178,"comment_id":133278546,"body_markdown":"You can match different types of quotation marks by listing them within a square bracket, i.e. `[\\&quot;”]`. So p2 works with the modification:\n```Pattern p2 = Pattern.compile(&quot;.*[\\&quot;”](.*?)[\\&quot;”].*&quot;);```","body":"You can match different types of quotation marks by listing them within a square bracket, i.e. <code>[\\&quot;”]</code>. So p2 works with the modification: <code>Pattern p2 = Pattern.compile(&quot;.*[\\&quot;”](.*?)[\\&quot;”].*&quot;);</code>"},{"owner":{"account_id":26817386,"reputation":11,"user_id":20407187,"display_name":"Elnur Ahmadov"},"score":0,"creation_date":1677134215,"post_id":75541178,"comment_id":133278603,"body_markdown":"But it still deletes the word before the quotation mark.  Ex: a String is (KAPİTAL &quot;BANK&quot; A&#199;IQ SƏHMDAR CƏMİYYƏTİ).with the modification, my output is BANK, but I want KAPİTAL BANK","body":"But it still deletes the word before the quotation mark.  Ex: a String is (KAPİTAL &quot;BANK&quot; A&#199;IQ SƏHMDAR CƏMİYYƏTİ).with the modification, my output is BANK, but I want KAPİTAL BANK"},{"owner":{"account_id":10771493,"reputation":1873,"user_id":7924858,"display_name":"abhinavsinghvirsen"},"score":0,"creation_date":1677135022,"post_id":75541178,"comment_id":133278738,"body_markdown":"String inputString = &quot;BANK \\&quot;BTB” A&#199;IQ SƏHMDAR CƏMİYYƏTİ&quot;;\n\n// Remove double quotes\nString outputString = inputString.replaceAll(&quot;[\\&quot;”]&quot;, &quot;&quot;);\n\n// Remove any text after the last quote\nint lastQuoteIndex = outputString.lastIndexOf(&quot; &quot;);\nif (lastQuoteIndex != -1) {\n    outputString = outputString.substring(0, lastQuoteIndex);\n}","body":"String inputString = &quot;BANK \\&quot;BTB” A&#199;IQ SƏHMDAR CƏMİYYƏTİ&quot;;  // Remove double quotes String outputString = inputString.replaceAll(&quot;[\\&quot;”]&quot;, &quot;&quot;);  // Remove any text after the last quote int lastQuoteIndex = outputString.lastIndexOf(&quot; &quot;); if (lastQuoteIndex != -1) {     outputString = outputString.substring(0, lastQuoteIndex); }"},{"owner":{"account_id":26817386,"reputation":11,"user_id":20407187,"display_name":"Elnur Ahmadov"},"score":0,"creation_date":1677135579,"post_id":75541178,"comment_id":133278845,"body_markdown":"It returns (BANK BTB A&#199;IQ SƏHMDAR). But I need (BANK BTB). And I can`t fix this problem","body":"It returns (BANK BTB A&#199;IQ SƏHMDAR). But I need (BANK BTB). And I can`t fix this problem"}],"answers":[{"tags":[],"owner":{"account_id":13830008,"reputation":89,"user_id":9983181,"display_name":"CoderMSL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677136317,"creation_date":1677134113,"answer_id":75541337,"question_id":75541178,"body_markdown":"I don&#39;t know if a simple solution without regular expression satisfies you, but here it goes: \r\n\r\n\r\n```java\r\npublic class QuotesRemover {\r\n    \r\n    \r\n   public static void main (String[] args) {\r\n       String txt = &quot;\\&quot;KAPİTAL BANK\\&quot; A&#199;IQ SƏHMDAR CƏMİYYƏTİ &quot;;\r\n       \r\n       System.out.println(quoteRemover(txt));\r\n   }\r\n   \r\n   public static String quoteRemover(String txt) {\r\n        int lastIndexOfDoubleQuote = txt.lastIndexOf(&quot;\\&quot;&quot;);\r\n        int lastIndexOfQuote = txt.lastIndexOf(&quot;”&quot;);\r\n        int lastIndexTotal = lastIndexOfDoubleQuote &gt; lastIndexOfQuote ? \r\n                lastIndexOfDoubleQuote : lastIndexOfQuote;\r\n        \r\n        int quotesTotalQty = (int) txt.chars()\r\n                .filter(ch -&gt; ch == &#39;&quot;&#39; || ch == &#39;”&#39;)\r\n                .count();\r\n        \r\n        String withoutQuotes = txt.replaceAll(&quot;\\&quot;&quot;, &quot;&quot;).replaceAll(&quot;”&quot;, &quot;&quot;);\r\n        return withoutQuotes.substring(0, lastIndexTotal - quotesTotalQty + 1);\r\n   }\r\n}\r\n```\r\n\r\nit works :-) and returns `KAPİTAL BANK` as you want it. \r\n\r\nHave a lovely day.","title":"How to remove single and/or double quotes from a string in Java","body":"<p>I don't know if a simple solution without regular expression satisfies you, but here it goes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class QuotesRemover {\n    \n    \n   public static void main (String[] args) {\n       String txt = &quot;\\&quot;KAPİTAL BANK\\&quot; AÇIQ SƏHMDAR CƏMİYYƏTİ &quot;;\n       \n       System.out.println(quoteRemover(txt));\n   }\n   \n   public static String quoteRemover(String txt) {\n        int lastIndexOfDoubleQuote = txt.lastIndexOf(&quot;\\&quot;&quot;);\n        int lastIndexOfQuote = txt.lastIndexOf(&quot;”&quot;);\n        int lastIndexTotal = lastIndexOfDoubleQuote &gt; lastIndexOfQuote ? \n                lastIndexOfDoubleQuote : lastIndexOfQuote;\n        \n        int quotesTotalQty = (int) txt.chars()\n                .filter(ch -&gt; ch == '&quot;' || ch == '”')\n                .count();\n        \n        String withoutQuotes = txt.replaceAll(&quot;\\&quot;&quot;, &quot;&quot;).replaceAll(&quot;”&quot;, &quot;&quot;);\n        return withoutQuotes.substring(0, lastIndexTotal - quotesTotalQty + 1);\n   }\n}\n</code></pre>\n<p>it works :-) and returns <code>KAPİTAL BANK</code> as you want it.</p>\n<p>Have a lovely day.</p>\n"},{"tags":[],"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677136154,"creation_date":1677136154,"answer_id":75541583,"question_id":75541178,"body_markdown":"Here is one way to do it:\r\n\r\n    public static void main(String[] args) {\r\n        var payer = &quot;BANK \\&quot;BTB” A&#199;IQ SƏHMDAR CƏMİYYƏTİ&quot;;\r\n\r\n        Pattern p2 = Pattern.compile(&quot;(\\\\b.+\\\\b\\\\s[\\&quot;”].*[\\&quot;”])&quot;);\r\n        Matcher m2 = p2.matcher(payer);\r\n        while (m2.find()) {\r\n            payer = m2.group(1).replaceAll(&quot;[\\&quot;”]&quot;, &quot;&quot;);\r\n        }\r\n        System.out.println(payer);\r\n    }\r\n\r\nHere I&#39;ve used the regex symbol \\b as it denotes the boundary of a word and \\s as a single whitespace character. Hence the regex extracts the word before the quotation as well as the quotation and its content. Using String::replaceAll, the quotations are removed.\r\n\r\nEdit: Perhaps it fits the solution better to have a more lenient way of matching a group of anything which appears before the quotation. If so, you may change the regex to\r\n```Pattern p2 = Pattern.compile(&quot;(.*[\\&quot;”].*[\\&quot;”])&quot;);```","title":"How to remove single and/or double quotes from a string in Java","body":"<p>Here is one way to do it:</p>\n<pre><code>public static void main(String[] args) {\n    var payer = &quot;BANK \\&quot;BTB” AÇIQ SƏHMDAR CƏMİYYƏTİ&quot;;\n\n    Pattern p2 = Pattern.compile(&quot;(\\\\b.+\\\\b\\\\s[\\&quot;”].*[\\&quot;”])&quot;);\n    Matcher m2 = p2.matcher(payer);\n    while (m2.find()) {\n        payer = m2.group(1).replaceAll(&quot;[\\&quot;”]&quot;, &quot;&quot;);\n    }\n    System.out.println(payer);\n}\n</code></pre>\n<p>Here I've used the regex symbol \\b as it denotes the boundary of a word and \\s as a single whitespace character. Hence the regex extracts the word before the quotation as well as the quotation and its content. Using String::replaceAll, the quotations are removed.</p>\n<p>Edit: Perhaps it fits the solution better to have a more lenient way of matching a group of anything which appears before the quotation. If so, you may change the regex to\n<code>Pattern p2 = Pattern.compile(&quot;(.*[\\&quot;”].*[\\&quot;”])&quot;);</code></p>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677136376,"creation_date":1677136376,"answer_id":75541608,"question_id":75541178,"body_markdown":"So, if I understand you correctly, you want to remove the quotes as well as everything that follows the quoted name.\r\n\r\nTry this:\r\n\r\n        String input = &quot;BANK \\&quot;BTB” A&#199;IQ SƏHMDAR CƏMİYYƏTİ&quot;;\r\n        String output = input.replaceAll(&quot;^([^\\&quot;”]*)[\\&quot;”]([^\\&quot;”]+)[\\&quot;”].*$&quot;, &quot;$1$2&quot;);\r\n        System.out.println(output);\r\n","title":"How to remove single and/or double quotes from a string in Java","body":"<p>So, if I understand you correctly, you want to remove the quotes as well as everything that follows the quoted name.</p>\n<p>Try this:</p>\n<pre><code>    String input = &quot;BANK \\&quot;BTB” AÇIQ SƏHMDAR CƏMİYYƏTİ&quot;;\n    String output = input.replaceAll(&quot;^([^\\&quot;”]*)[\\&quot;”]([^\\&quot;”]+)[\\&quot;”].*$&quot;, &quot;$1$2&quot;);\n    System.out.println(output);\n</code></pre>\n"}],"owner":{"account_id":26817386,"reputation":11,"user_id":20407187,"display_name":"Elnur Ahmadov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1677154909,"creation_date":1677132782,"question_id":75541178,"body_markdown":"\r\n\r\nHow would I remove double quotes from a String?\r\n\r\nFor example: I would expect ( BANK &quot;BTB” A&#199;IQ SƏHMDAR CƏMİYYƏTİ ) to produce ( BANK BTB ), without the double quote. And I want to remove the words after the last quote. The main problem is that the quotes are different. Quotes can be both &quot; and ” . A String ( &quot;KAPİTAL BANK&quot; A&#199;IQ SƏHMDAR CƏMİYYƏTİ ) can also be.\r\n\r\n\r\nHere&#39;s the code I&#39;ve tried (payer.namesIst is a String):\r\n\r\n```\r\n        Pattern p1 = Pattern.compile(&quot;&quot;(.*?)”&quot;);\r\n        Pattern p2 = Pattern.compile(&quot;\\&quot;(.*?)\\&quot;&quot;);\r\n\r\n        Matcher m1 = p1.matcher(payer.nameIst);\r\n        while (m1.find())\r\n        {\r\n        \tpayer.nameIst = m1.group(1);          \r\n        }\r\n        Matcher m2 = p2.matcher(payer.nameIst);\r\n        while(m2.find()) {\r\n        \tpayer.nameIst = m2.group(1);\r\n        }\r\n```\r\nThe code I wrote removed the word before the quote.\r\nExample: ( BANK &quot;BTB” A&#199;IQ SƏHMDAR CƏMİYYƏTİ ) to BTB","title":"How to remove single and/or double quotes from a string in Java","body":"<p>How would I remove double quotes from a String?</p>\n<p>For example: I would expect ( BANK &quot;BTB” AÇIQ SƏHMDAR CƏMİYYƏTİ ) to produce ( BANK BTB ), without the double quote. And I want to remove the words after the last quote. The main problem is that the quotes are different. Quotes can be both &quot; and ” . A String ( &quot;KAPİTAL BANK&quot; AÇIQ SƏHMDAR CƏMİYYƏTİ ) can also be.</p>\n<p>Here's the code I've tried (payer.namesIst is a String):</p>\n<pre><code>        Pattern p1 = Pattern.compile(&quot;&quot;(.*?)”&quot;);\n        Pattern p2 = Pattern.compile(&quot;\\&quot;(.*?)\\&quot;&quot;);\n\n        Matcher m1 = p1.matcher(payer.nameIst);\n        while (m1.find())\n        {\n            payer.nameIst = m1.group(1);          \n        }\n        Matcher m2 = p2.matcher(payer.nameIst);\n        while(m2.find()) {\n            payer.nameIst = m2.group(1);\n        }\n</code></pre>\n<p>The code I wrote removed the word before the quote.\nExample: ( BANK &quot;BTB” AÇIQ SƏHMDAR CƏMİYYƏTİ ) to BTB</p>\n"},{"tags":["java","spring-boot","spring-mvc","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":3681061,"reputation":266,"user_id":7037029,"display_name":"Ajay Singh Pundir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677153075,"creation_date":1677153075,"answer_id":75544461,"question_id":75544255,"body_markdown":"Is it possible to use Spring JPA \r\n\r\n\r\n  \r\n\r\n          @Repository\r\n    public interface EmployeeRepository extends JpaRepository&lt;Employee, Long&gt; {\r\n    @Query(&quot;SELECT e FROM Employee e WHERE e.id = :id AND e.name = :name&quot;)\r\n        List&lt;Employee&gt; findEmployeesByIdAndName(@Param(&quot;id&quot;) int id, @Param(&quot;name&quot;) String name);\r\n    \r\n    }\r\n\r\n\r\n\r\n","title":"Inserting parameter inside HQL and fetch result using SpringBoot","body":"<p>Is it possible to use Spring JPA</p>\n<pre><code>      @Repository\npublic interface EmployeeRepository extends JpaRepository&lt;Employee, Long&gt; {\n@Query(&quot;SELECT e FROM Employee e WHERE e.id = :id AND e.name = :name&quot;)\n    List&lt;Employee&gt; findEmployeesByIdAndName(@Param(&quot;id&quot;) int id, @Param(&quot;name&quot;) String name);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677154895,"creation_date":1677154895,"answer_id":75544764,"question_id":75544255,"body_markdown":"If you’re set on using HQL queries, this thread should be able to help you.\r\n[enter link description here][1]\r\n\r\nThere are also a couple ways to do this that better utilize the power of Spring and JpaRepository. The first is to declare a method in your repository that includes your variable names and use that method in your service:\r\n\r\nRepository\r\n\r\n    @Repository\r\n    Public interface EmployeeRepository extends JpaRepository&lt;Employee, Integer&gt; {\r\n        Employee findByIdAndName(int id, String name);\r\n    }\r\n\r\nService\r\n\r\n    @Service\r\n    Public class EmployeeService {\r\n        @Autowired\r\n        private EmployeeRepository empRepo;\r\n    \r\n        public Employee findByIdAndName(int id, String name) {\r\n            return empRepo.findByIdAndName(id, name);\r\n        }\r\n    }\r\n\r\nThis is great if you only have one or two criteria, but more than that and the method name starts to get rather long. The other suggestion is to use Specifications. To use these, you need to also extend JpaSpecificationExecutor in your repo. You can create a separate class to house your specifications, but for this example I’m going to put it in the service.\r\n\r\nRepository\r\n\r\n    @Repository\r\n    Public interface EmployeeRepository extends JpaRepository&lt;Employee, Integer&gt;, JpaSpecificationExecutor&lt;Employee&gt; {}\r\n\r\nService\r\n\r\n    @Service\r\n    Public class EmployeeService {\r\n        @Autowired\r\n        private EmployeeRepository empRepo;\r\n    \r\n        public Employee findByIdAndName(int id, String name) {\r\n            return empRepo.find(idEquals(id).and(nameEquals(name)));\r\n        }\r\n\r\n        private Specification&lt;Employee&gt; idEquals(int id) {\r\n            return (root, query, cb) -&gt; cb.equal(root.get(Employee_.id), id);\r\n        }\r\n\r\n        private Specification&lt;Employee&gt; nameEquals(String name) {\r\n            return (root, query, cb) -&gt; cb.equal(root.get(Employee_.name), name);\r\n        }\r\n\r\n    }\r\n\r\nNote that to use the static metamodel Employee_ you will need extra dependencies, specifically org.hibernate.jpamodelgen if memory serves.\r\n\r\n  [1]: https://stackoverflow.com/questions/47894691/using-hql-queries-in-spring-boot","title":"Inserting parameter inside HQL and fetch result using SpringBoot","body":"<p>If you’re set on using HQL queries, this thread should be able to help you.\n<a href=\"https://stackoverflow.com/questions/47894691/using-hql-queries-in-spring-boot\">enter link description here</a></p>\n<p>There are also a couple ways to do this that better utilize the power of Spring and JpaRepository. The first is to declare a method in your repository that includes your variable names and use that method in your service:</p>\n<p>Repository</p>\n<pre><code>@Repository\nPublic interface EmployeeRepository extends JpaRepository&lt;Employee, Integer&gt; {\n    Employee findByIdAndName(int id, String name);\n}\n</code></pre>\n<p>Service</p>\n<pre><code>@Service\nPublic class EmployeeService {\n    @Autowired\n    private EmployeeRepository empRepo;\n\n    public Employee findByIdAndName(int id, String name) {\n        return empRepo.findByIdAndName(id, name);\n    }\n}\n</code></pre>\n<p>This is great if you only have one or two criteria, but more than that and the method name starts to get rather long. The other suggestion is to use Specifications. To use these, you need to also extend JpaSpecificationExecutor in your repo. You can create a separate class to house your specifications, but for this example I’m going to put it in the service.</p>\n<p>Repository</p>\n<pre><code>@Repository\nPublic interface EmployeeRepository extends JpaRepository&lt;Employee, Integer&gt;, JpaSpecificationExecutor&lt;Employee&gt; {}\n</code></pre>\n<p>Service</p>\n<pre><code>@Service\nPublic class EmployeeService {\n    @Autowired\n    private EmployeeRepository empRepo;\n\n    public Employee findByIdAndName(int id, String name) {\n        return empRepo.find(idEquals(id).and(nameEquals(name)));\n    }\n\n    private Specification&lt;Employee&gt; idEquals(int id) {\n        return (root, query, cb) -&gt; cb.equal(root.get(Employee_.id), id);\n    }\n\n    private Specification&lt;Employee&gt; nameEquals(String name) {\n        return (root, query, cb) -&gt; cb.equal(root.get(Employee_.name), name);\n    }\n\n}\n</code></pre>\n<p>Note that to use the static metamodel Employee_ you will need extra dependencies, specifically org.hibernate.jpamodelgen if memory serves.</p>\n"}],"owner":{"account_id":3272354,"reputation":348,"user_id":2755407,"display_name":"user2755407"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75544764,"answer_count":2,"score":0,"last_activity_date":1677154895,"creation_date":1677151992,"question_id":75544255,"body_markdown":"I have a Employee class mapped to Employee table\r\n\r\n    public Class Employee {\r\n    \r\n      int id;\r\n    \r\n      String name;\r\n    \r\n    }\r\n\r\ni have written a hql query to fetch Employee from various parameters..like\r\n\r\n    Select x from Employee x where x.id = (:id) and x.name = (:name);\r\n\r\nI have create a map with key as id and name and values as below:\r\n\r\n    Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\r\n    params.put(&quot;id&quot;, 1);\r\n    params.put(&quot;name&quot;, &quot;Testname&quot;);\r\n\r\nHow to make a request in Spring Boot and with a hql query populated with values in Map `params` and fetch a list of Employee objects.\r\n\r\nEdit: actually, I want to insert params Map with key and values in the HQL and get result.","title":"Inserting parameter inside HQL and fetch result using SpringBoot","body":"<p>I have a Employee class mapped to Employee table</p>\n<pre><code>public Class Employee {\n\n  int id;\n\n  String name;\n\n}\n</code></pre>\n<p>i have written a hql query to fetch Employee from various parameters..like</p>\n<pre><code>Select x from Employee x where x.id = (:id) and x.name = (:name);\n</code></pre>\n<p>I have create a map with key as id and name and values as below:</p>\n<pre><code>Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\nparams.put(&quot;id&quot;, 1);\nparams.put(&quot;name&quot;, &quot;Testname&quot;);\n</code></pre>\n<p>How to make a request in Spring Boot and with a hql query populated with values in Map <code>params</code> and fetch a list of Employee objects.</p>\n<p>Edit: actually, I want to insert params Map with key and values in the HQL and get result.</p>\n"},{"tags":["java","android","firebase","firebase-authentication"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1518253641,"post_id":48719036,"comment_id":84437077,"body_markdown":"Have you added Firebase-UI dependencies in your build.gradle file?","body":"Have you added Firebase-UI dependencies in your build.gradle file?"},{"owner":{"account_id":10751460,"reputation":1372,"user_id":7910735,"display_name":"Sahdeep Singh"},"score":0,"creation_date":1518253664,"post_id":48719036,"comment_id":84437084,"body_markdown":"more details required!!","body":"more details required!!"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1518253824,"post_id":48719036,"comment_id":84437119,"body_markdown":"Please edit your question and add this lines of code in there.","body":"Please edit your question and add this lines of code in there."},{"owner":{"account_id":8928120,"reputation":105,"user_id":6661643,"display_name":"Umair"},"score":0,"creation_date":1518254057,"post_id":48719036,"comment_id":84437168,"body_markdown":"@SahdeepSingh Check now","body":"@SahdeepSingh Check now"},{"owner":{"account_id":8928120,"reputation":105,"user_id":6661643,"display_name":"Umair"},"score":0,"creation_date":1518254295,"post_id":48719036,"comment_id":84437219,"body_markdown":"@AlexMamo Please have a look now :)","body":"@AlexMamo Please have a look now :)"}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677154609,"creation_date":1518254699,"answer_id":48719206,"question_id":48719036,"body_markdown":"To solve this, please add the following line in your `build.gradle` file:\r\n\r\n    implementation &#39;com.firebaseui:firebase-ui-auth:7.2.0&#39;\r\n\r\nWhen using Firebase authentication together with [Firebase-UI](https://github.com/firebase/FirebaseUI-Android) library, both dependencies must be added into your build.gradle file.","title":"com.firebase.ui.authui class not found whenever I try to import it","body":"<p>To solve this, please add the following line in your <code>build.gradle</code> file:</p>\n<pre><code>implementation 'com.firebaseui:firebase-ui-auth:7.2.0'\n</code></pre>\n<p>When using Firebase authentication together with <a href=\"https://github.com/firebase/FirebaseUI-Android\" rel=\"nofollow noreferrer\">Firebase-UI</a> library, both dependencies must be added into your build.gradle file.</p>\n"}],"owner":{"account_id":8928120,"reputation":105,"user_id":6661643,"display_name":"Umair"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1845,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":48719206,"answer_count":1,"score":-1,"last_activity_date":1677154609,"creation_date":1518253299,"question_id":48719036,"body_markdown":"I am using this code to do so but com.firebase.ui.authui is not present in the library. Where can I get it or How can I use it in the code. Please help.\r\n\r\n    startActivityForResult(\r\n                                AuthUI.getInstance()\r\n                                        .createSignInIntentBuilder()\r\n                                        .setIsSmartLockEnabled(false)\r\n                                        .setProviders(\r\n                                                AuthUI.EMAIL_PROVIDER,\r\n                                                AuthUI.GOOGLE_PROVIDER)\r\n                                        .build(),\r\n                                RC_SIGN_IN);\r\nHere is my build.gradle file:\r\n\r\n    dependencies {\r\n        compile fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n        testCompile &#39;junit:junit:4.12&#39;\r\n        //noinspection GradleCompatible\r\n        compile &#39;com.android.support:design:24.2.1&#39;\r\n        compile &#39;com.android.support:appcompat-v7:26.0.0&#39;\r\n        // Displaying images\r\n        compile &#39;com.github.bumptech.glide:glide:3.6.1&#39;\r\n        compile &#39;com.google.firebase:firebase-database:11.8.0&#39;\r\n        compile &#39;com.google.firebase:firebase-auth:11.8.0&#39;\r\n        compile &#39;com.firebaseui:firebase-ui-database:3.2.1&#39;\r\n    }","title":"com.firebase.ui.authui class not found whenever I try to import it","body":"<p>I am using this code to do so but com.firebase.ui.authui is not present in the library. Where can I get it or How can I use it in the code. Please help.</p>\n\n<pre><code>startActivityForResult(\n                            AuthUI.getInstance()\n                                    .createSignInIntentBuilder()\n                                    .setIsSmartLockEnabled(false)\n                                    .setProviders(\n                                            AuthUI.EMAIL_PROVIDER,\n                                            AuthUI.GOOGLE_PROVIDER)\n                                    .build(),\n                            RC_SIGN_IN);\n</code></pre>\n\n<p>Here is my build.gradle file:</p>\n\n<pre><code>dependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    testCompile 'junit:junit:4.12'\n    //noinspection GradleCompatible\n    compile 'com.android.support:design:24.2.1'\n    compile 'com.android.support:appcompat-v7:26.0.0'\n    // Displaying images\n    compile 'com.github.bumptech.glide:glide:3.6.1'\n    compile 'com.google.firebase:firebase-database:11.8.0'\n    compile 'com.google.firebase:firebase-auth:11.8.0'\n    compile 'com.firebaseui:firebase-ui-database:3.2.1'\n}\n</code></pre>\n"},{"tags":["java","android","spring-boot","authentication"],"answers":[{"tags":[],"owner":{"account_id":10377286,"reputation":941,"user_id":7653142,"display_name":"Peyman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666191336,"creation_date":1666189479,"answer_id":74127095,"question_id":74126642,"body_markdown":"What you need is a complete authentication and authorization server. Spring provides you with set of tools to implement your server but it cannot automatically solve your problem.\r\n\r\nYou have two options:\r\n\r\n1. Develop [authentication][1] and [authorization][1] server yourself using Spring or any other frameworks. You can also use out of the box solutions like [Keycloak][2] but you still need to write some code.\r\n\r\n2. Use services like [Firebase Authentication][3], which needs some development on mobile platform but you won&#39;t write any back-end code.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html\r\n  [2]: https://www.keycloak.org/\r\n  [3]: https://firebase.google.com/docs/auth","title":"Spring Boot Web Server and Android App Security","body":"<p>What you need is a complete authentication and authorization server. Spring provides you with set of tools to implement your server but it cannot automatically solve your problem.</p>\n<p>You have two options:</p>\n<ol>\n<li><p>Develop <a href=\"https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html\" rel=\"nofollow noreferrer\">authentication</a> and <a href=\"https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html\" rel=\"nofollow noreferrer\">authorization</a> server yourself using Spring or any other frameworks. You can also use out of the box solutions like <a href=\"https://www.keycloak.org/\" rel=\"nofollow noreferrer\">Keycloak</a> but you still need to write some code.</p>\n</li>\n<li><p>Use services like <a href=\"https://firebase.google.com/docs/auth\" rel=\"nofollow noreferrer\">Firebase Authentication</a>, which needs some development on mobile platform but you won't write any back-end code.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":25542867,"reputation":77,"user_id":19328664,"display_name":"Wabi-Sabi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":586,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677154270,"creation_date":1666187746,"question_id":74126642,"body_markdown":"I am new to security and for the last few weeks I tried to learn as much as possible on my own. \r\n\r\nFor my experiment I have built a Spring Boot Server on localhost and connected it to an [Android App, with the use of Retrofit][1].  \r\n\r\nI tried to learn how to get security for my server application and Android Client App. I found some usefull sources on [Spring Boot OAuth2][2] with webjars and [social login with Firebase Authentication][3].\r\n\r\nBut what I truly want is Multi-factor authentication and a secure connection between my Spring Boot Server App and Android App and Automatically log-out users after a few hours. I&#39;m looking for a solution where all these things are implemented. \r\n\r\nI really wanted Spring Boot to solve my problem, but I can&#39;t find anything useful for Spring Boot Authentication and an Android Client App.\r\n\r\nMaybe I&#39;m already on the right path, but my sources are running out. If somebody knows a good source, like a blog or book, or point me in the right direction on how to deal with security, it will be appreciated. \r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/how-to-post-data-to-api-using-retrofit-in-android/?ref=gcse\r\n  [2]: https://spring.io/guides/tutorials/spring-boot-oauth2/\r\n  [3]: https://codingzest.com/firebase-authentication-android/","title":"Spring Boot Web Server and Android App Security","body":"<p>I am new to security and for the last few weeks I tried to learn as much as possible on my own.</p>\n<p>For my experiment I have built a Spring Boot Server on localhost and connected it to an <a href=\"https://www.geeksforgeeks.org/how-to-post-data-to-api-using-retrofit-in-android/?ref=gcse\" rel=\"nofollow noreferrer\">Android App, with the use of Retrofit</a>.</p>\n<p>I tried to learn how to get security for my server application and Android Client App. I found some usefull sources on <a href=\"https://spring.io/guides/tutorials/spring-boot-oauth2/\" rel=\"nofollow noreferrer\">Spring Boot OAuth2</a> with webjars and <a href=\"https://codingzest.com/firebase-authentication-android/\" rel=\"nofollow noreferrer\">social login with Firebase Authentication</a>.</p>\n<p>But what I truly want is Multi-factor authentication and a secure connection between my Spring Boot Server App and Android App and Automatically log-out users after a few hours. I'm looking for a solution where all these things are implemented.</p>\n<p>I really wanted Spring Boot to solve my problem, but I can't find anything useful for Spring Boot Authentication and an Android Client App.</p>\n<p>Maybe I'm already on the right path, but my sources are running out. If somebody knows a good source, like a blog or book, or point me in the right direction on how to deal with security, it will be appreciated.</p>\n"},{"tags":["java","apache-poi","docx4j","aspose.words"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677153838,"creation_date":1677153838,"answer_id":75544587,"question_id":75543134,"body_markdown":"There is a reason that you did not find methods to get line numbers and/or division into pages of a Word document. The reason is that this is not possible without rendering the Word document.\r\n\r\nA Word document body consists of a stream of body elements, such as paragraphs, tables, pictures, diagrams, ... Technically there is no page concept in a Word document. Microsoft Word creates pages on the fly while rendering. The same is for text lines. Microsoft Word reformats line breaks on the fly while rendering.\r\n\r\nOne body element follows the element before it. How much height a body element claims depends on multiple factors, such as font family, font size, margins, paddings, vertical indents, special height settings, ... . Therefore, without rendering one cannot know how much vertical space a body element needs and whether a page is full.\r\n\r\nThe same is for text lines. How much width a body element claims depends on multiple factors, such as font family, font size, margins, paddings, horizontal indents, special width settings, ... . Therefore, without rendering one cannot know how much space a body element needs and whether the right page margin is reached to make a line break necessary.\r\n\r\nThere may be explicit page breaks set and there may be explicit line breaks set. However, that is not necessary and so one cannot rely on those as there may be automatic line breaks and automatic page breaks too, dependent on the rendering.\r\n\r\nMicrosoft Word normally marks page breaks when a document was rendered and saved then. However, this also is nothing what I would rely on for a `*.docx` as it could have been created using other word-processing applications, which don’t do so.\r\n\r\nApache POI is not internally rendering Word documents. So no chance using this library.\r\n\r\nAt least Aspose.Words should have an internally rendering engine and so be able to get at least pages. At least it claims so. However, I do not know much about Aspose code.\r\n\r\n","title":"Any library that have inbuilt methods to get exact page number and line number of an element in word document","body":"<p>There is a reason that you did not find methods to get line numbers and/or division into pages of a Word document. The reason is that this is not possible without rendering the Word document.</p>\n<p>A Word document body consists of a stream of body elements, such as paragraphs, tables, pictures, diagrams, ... Technically there is no page concept in a Word document. Microsoft Word creates pages on the fly while rendering. The same is for text lines. Microsoft Word reformats line breaks on the fly while rendering.</p>\n<p>One body element follows the element before it. How much height a body element claims depends on multiple factors, such as font family, font size, margins, paddings, vertical indents, special height settings, ... . Therefore, without rendering one cannot know how much vertical space a body element needs and whether a page is full.</p>\n<p>The same is for text lines. How much width a body element claims depends on multiple factors, such as font family, font size, margins, paddings, horizontal indents, special width settings, ... . Therefore, without rendering one cannot know how much space a body element needs and whether the right page margin is reached to make a line break necessary.</p>\n<p>There may be explicit page breaks set and there may be explicit line breaks set. However, that is not necessary and so one cannot rely on those as there may be automatic line breaks and automatic page breaks too, dependent on the rendering.</p>\n<p>Microsoft Word normally marks page breaks when a document was rendered and saved then. However, this also is nothing what I would rely on for a <code>*.docx</code> as it could have been created using other word-processing applications, which don’t do so.</p>\n<p>Apache POI is not internally rendering Word documents. So no chance using this library.</p>\n<p>At least Aspose.Words should have an internally rendering engine and so be able to get at least pages. At least it claims so. However, I do not know much about Aspose code.</p>\n"},{"tags":[],"owner":{"account_id":11398698,"reputation":1809,"user_id":8356224,"display_name":"Alexey Noskov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677153949,"creation_date":1677153949,"answer_id":75544609,"question_id":75543134,"body_markdown":"MS Word documents are flow documents and does not contain any information about document layout. The consumer applications like MS Word or Open Office build the document layout on the fly. \r\nAspose.Words has it’s own document layout engine. The facade classes [LayoutCollector][1] and [LayoutEnumerator][2] allows to get layout information of document elements.\r\nFor example to determine page index where a particular node starts or ends you can use `LayoutCollector.getStartPageIndex` and `LayoutCollector.getEndPageIndex` correspondingly:\r\n```java\r\nDocument doc = new Document(&quot;C:\\\\Temp\\\\in.docx&quot;);\r\nLayoutCollector collector = new LayoutCollector(doc);\r\n// Get some node, for example the first paragraph is in the document.\r\nParagraph para = doc.getFirstSection().getBody().getFirstParagraph();\r\nSystem.out.println(&quot;Paragraph starts on &quot; + collector.getStartPageIndex(para) + &quot; page.&quot;);\r\n``` \r\nSee [Aspose.Words for Java GitHub][3] for more code examples\r\n\r\n\r\n  [1]: https://reference.aspose.com/words/java/com.aspose.words/layoutcollector/\r\n  [2]: https://reference.aspose.com/words/java/com.aspose.words/layoutenumerator/\r\n  [3]: https://github.com/aspose-words/Aspose.Words-for-Java/blob/68f7247689a95fdea86f766df2989c3657188aa7/Examples/ApiExamples/Java/src/main/java/Examples/ExLayout.java","title":"Any library that have inbuilt methods to get exact page number and line number of an element in word document","body":"<p>MS Word documents are flow documents and does not contain any information about document layout. The consumer applications like MS Word or Open Office build the document layout on the fly.\nAspose.Words has it’s own document layout engine. The facade classes <a href=\"https://reference.aspose.com/words/java/com.aspose.words/layoutcollector/\" rel=\"nofollow noreferrer\">LayoutCollector</a> and <a href=\"https://reference.aspose.com/words/java/com.aspose.words/layoutenumerator/\" rel=\"nofollow noreferrer\">LayoutEnumerator</a> allows to get layout information of document elements.\nFor example to determine page index where a particular node starts or ends you can use <code>LayoutCollector.getStartPageIndex</code> and <code>LayoutCollector.getEndPageIndex</code> correspondingly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document doc = new Document(&quot;C:\\\\Temp\\\\in.docx&quot;);\nLayoutCollector collector = new LayoutCollector(doc);\n// Get some node, for example the first paragraph is in the document.\nParagraph para = doc.getFirstSection().getBody().getFirstParagraph();\nSystem.out.println(&quot;Paragraph starts on &quot; + collector.getStartPageIndex(para) + &quot; page.&quot;);\n</code></pre>\n<p>See <a href=\"https://github.com/aspose-words/Aspose.Words-for-Java/blob/68f7247689a95fdea86f766df2989c3657188aa7/Examples/ApiExamples/Java/src/main/java/Examples/ExLayout.java\" rel=\"nofollow noreferrer\">Aspose.Words for Java GitHub</a> for more code examples</p>\n"}],"owner":{"account_id":27071726,"reputation":303,"user_id":20622284,"display_name":"lemon chow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"closed_date":1677408997,"accepted_answer_id":75544609,"answer_count":2,"score":2,"last_activity_date":1677153949,"creation_date":1677145960,"question_id":75543134,"body_markdown":"I am looking for a library in java that can read all data from a word document element by element including paragraph,tables, charts, images and comments etc. and having the track of current page number and line number where the element is starting using inbuit methods. i tried with apache-poi, aspose and docx4j.I didn&#39;t find any such methods to get line number. if there are any please let me know","title":"Any library that have inbuilt methods to get exact page number and line number of an element in word document","body":"<p>I am looking for a library in java that can read all data from a word document element by element including paragraph,tables, charts, images and comments etc. and having the track of current page number and line number where the element is starting using inbuit methods. i tried with apache-poi, aspose and docx4j.I didn't find any such methods to get line number. if there are any please let me know</p>\n"},{"tags":["java","jetty","embedded-jetty"],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677153858,"creation_date":1677153858,"answer_id":75544592,"question_id":75544554,"body_markdown":"Java agents are JVM wide, not WebApp specific.\r\n\r\nYou&#39;ll have to run the entire Jetty server, from the JVM startup with that agent enabled on the Java command line.","title":"How to add environment variables to jetty server in java sdk?","body":"<p>Java agents are JVM wide, not WebApp specific.</p>\n<p>You'll have to run the entire Jetty server, from the JVM startup with that agent enabled on the Java command line.</p>\n"}],"owner":{"account_id":10595855,"reputation":2708,"user_id":7804595,"display_name":"Valeriy K."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677153858,"creation_date":1677153696,"question_id":75544554,"body_markdown":"I&#39;ve manually created jetty Server and run my application inside java application. \r\n\r\n    import org.eclipse.jetty.server.Server;\r\n        \r\n    public void startServer() {\r\n    Server server = new Server(0);\r\n    server.setStopAtShutdown(true);\r\n    WebAppContext webAppContext = new WebAppContext();\r\n    webAppContext.setResourceBase(explodedWar);\r\n    webAppContext.setExtraClasspath(getExtraClasspath());\r\n        \r\n                \r\n    server.start();\r\n    }\r\n\r\nI want to run war with some javaagent. I&#39;ve tried to add javaagent option:\r\n\r\n    webAppContext.setInitParameter(&quot;org.eclipse.jetty.webapp.configuration&quot;, &quot;JAVA_OPTS=-javaagent:some-javaagent.jar&quot;);\r\n\r\nBut seems it doesn&#39;t works. How to add environment variables or VM options for war in this code?\r\n","title":"How to add environment variables to jetty server in java sdk?","body":"<p>I've manually created jetty Server and run my application inside java application.</p>\n<pre><code>import org.eclipse.jetty.server.Server;\n    \npublic void startServer() {\nServer server = new Server(0);\nserver.setStopAtShutdown(true);\nWebAppContext webAppContext = new WebAppContext();\nwebAppContext.setResourceBase(explodedWar);\nwebAppContext.setExtraClasspath(getExtraClasspath());\n    \n            \nserver.start();\n}\n</code></pre>\n<p>I want to run war with some javaagent. I've tried to add javaagent option:</p>\n<pre><code>webAppContext.setInitParameter(&quot;org.eclipse.jetty.webapp.configuration&quot;, &quot;JAVA_OPTS=-javaagent:some-javaagent.jar&quot;);\n</code></pre>\n<p>But seems it doesn't works. How to add environment variables or VM options for war in this code?</p>\n"},{"tags":["java","arrays","methods","greatest-common-divisor"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1677154461,"post_id":75539934,"comment_id":133283792,"body_markdown":"ALWAYS use i &lt; array.length in a for loop","body":"ALWAYS use i &lt; array.length in a for loop"}],"answers":[{"tags":[],"owner":{"account_id":370140,"reputation":18565,"user_id":717898,"accept_rate":86,"display_name":"Andrew Lazarus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677120584,"creation_date":1677120584,"answer_id":75540134,"question_id":75539934,"body_markdown":"C-derived languages (C, C#, Java, C++) all start arrays at zero, which means the last element is `my_array[my_array.length-1]`, however that is written exactly in that language. So the idiom in a loop is generally\r\n\r\n    for (int i = 0; i &lt; my_array.length; ++i) /* do something */\r\n\r\nhowever the length is obtained in the language. Note that your code has `&lt;=`, which is almost always wrong.\r\n\r\nEuclid had a more efficient way of getting gcd 2300 years ago; you might look for it.\r\n\r\nI tell learners that C, Java, etc. are like England, France, and Quebec, where you enter a building on the ground floor (sometimes marked 0 in an elevator) and climb stairs to the first floor. Pascal, SQL, and IIRC Visual Basic start arrays at 1 (so `&lt;=` is correct to get to the end of an array), like the USA and Anglophone Canada, you walk into the first floor. People are welcome to add other countries in the comments.","title":"ArrayIndexOutOfBoundsException error in method for finding greatest common divisor","body":"<p>C-derived languages (C, C#, Java, C++) all start arrays at zero, which means the last element is <code>my_array[my_array.length-1]</code>, however that is written exactly in that language. So the idiom in a loop is generally</p>\n<pre><code>for (int i = 0; i &lt; my_array.length; ++i) /* do something */\n</code></pre>\n<p>however the length is obtained in the language. Note that your code has <code>&lt;=</code>, which is almost always wrong.</p>\n<p>Euclid had a more efficient way of getting gcd 2300 years ago; you might look for it.</p>\n<p>I tell learners that C, Java, etc. are like England, France, and Quebec, where you enter a building on the ground floor (sometimes marked 0 in an elevator) and climb stairs to the first floor. Pascal, SQL, and IIRC Visual Basic start arrays at 1 (so <code>&lt;=</code> is correct to get to the end of an array), like the USA and Anglophone Canada, you walk into the first floor. People are welcome to add other countries in the comments.</p>\n"},{"tags":[],"owner":{"account_id":15407072,"reputation":49,"user_id":11114934,"display_name":"gambinaattori"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677137932,"creation_date":1677137932,"answer_id":75541818,"question_id":75539934,"body_markdown":"Your inner for-loop allows `j` to be equal to `numbers.length`:\r\n```\r\nfor (j = i + 1; j &lt;= numbers.length; j++) {\r\n```\r\nThen you try to reference `numbers[j]`:\r\n```\r\nwhile (k &lt;= numbers[i] &amp;&amp; k &lt;= numbers[j]) {\r\n    if (numbers[i] % k == 0 &amp;&amp; numbers[j] % k == 0)\r\n```\r\nThe last element in `numbers` is `numbers[numbers.length - 1]`. The exception happens when you try to access an element that is beyond the final element in the array, i.e. when `j == numbers.length`.","title":"ArrayIndexOutOfBoundsException error in method for finding greatest common divisor","body":"<p>Your inner for-loop allows <code>j</code> to be equal to <code>numbers.length</code>:</p>\n<pre><code>for (j = i + 1; j &lt;= numbers.length; j++) {\n</code></pre>\n<p>Then you try to reference <code>numbers[j]</code>:</p>\n<pre><code>while (k &lt;= numbers[i] &amp;&amp; k &lt;= numbers[j]) {\n    if (numbers[i] % k == 0 &amp;&amp; numbers[j] % k == 0)\n</code></pre>\n<p>The last element in <code>numbers</code> is <code>numbers[numbers.length - 1]</code>. The exception happens when you try to access an element that is beyond the final element in the array, i.e. when <code>j == numbers.length</code>.</p>\n"}],"owner":{"account_id":27856137,"reputation":11,"user_id":21269580,"display_name":"Veera Kondratenko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1677153400,"creation_date":1677117886,"question_id":75539934,"body_markdown":"Purpose is to find greatest common divisor of numbers: 45 &amp; 75 which is 15. I get ArrayIndexOutOfBoundsException on line with while loop. Could you please help. I don&#39;t understand why? Parameter has to be variable-length argument lists. At the moment I have 2 numbers just to check if gcd is calculated correctly later array will need to be 5 long.\r\n\r\n```\r\npublic static int gcd (int... numbers) {\r\n\r\n        //initial greatest common divisor is 1\r\n        int gcd = 1;\r\n\r\n        //possible greatest common divisor is 2\r\n        int k = 2;\r\n\r\n        //looping through array with test input of 2: 45 &amp; 75\r\n        int i, j;\r\n        for (i = 0; i &lt;= numbers.length - 1; i++) {\r\n            for (j = i + 1; j &lt;= numbers.length; j++) {\r\n                while (k &lt;= numbers[i] &amp;&amp; k &lt;= numbers[j]) {\r\n                    if (numbers[i] % k == 0 &amp;&amp; numbers[j] % k == 0)\r\n                        //update\r\n                        gcd = k;\r\n\r\n                    k++;\r\n                }\r\n            }\r\n        }\r\n        return gcd;\r\n    }\r\n```\r\n\r\nAll I need to do is to compare first element with next one, second with next one etc. so hence created 2 for loops. In while loop greatest common divisor is being calculated. But I am stuck to understand what I am doing wrong. Would appreciate a hint or guidance. \r\n\r\nThis is correct method from the book to calculate gcd but not with array:\r\n\r\n```\r\npublic static int gcd(int n1,int n2) {\r\n    int gcd = 1; // Initial gcd is 1\r\n    int k = 2; // Possible gcd\r\n\r\n    while (k &lt;= n1 &amp;&amp; k &lt;= n2) {\r\n        if (n1 % k == 0 &amp;&amp; n2 % k == 0)\r\n           gcd = k; // Update gcd\r\n        k++;\r\n    }\r\n\r\n    return gcd; // Return gcd\r\n }\r\n```","title":"ArrayIndexOutOfBoundsException error in method for finding greatest common divisor","body":"<p>Purpose is to find greatest common divisor of numbers: 45 &amp; 75 which is 15. I get ArrayIndexOutOfBoundsException on line with while loop. Could you please help. I don't understand why? Parameter has to be variable-length argument lists. At the moment I have 2 numbers just to check if gcd is calculated correctly later array will need to be 5 long.</p>\n<pre><code>public static int gcd (int... numbers) {\n\n        //initial greatest common divisor is 1\n        int gcd = 1;\n\n        //possible greatest common divisor is 2\n        int k = 2;\n\n        //looping through array with test input of 2: 45 &amp; 75\n        int i, j;\n        for (i = 0; i &lt;= numbers.length - 1; i++) {\n            for (j = i + 1; j &lt;= numbers.length; j++) {\n                while (k &lt;= numbers[i] &amp;&amp; k &lt;= numbers[j]) {\n                    if (numbers[i] % k == 0 &amp;&amp; numbers[j] % k == 0)\n                        //update\n                        gcd = k;\n\n                    k++;\n                }\n            }\n        }\n        return gcd;\n    }\n</code></pre>\n<p>All I need to do is to compare first element with next one, second with next one etc. so hence created 2 for loops. In while loop greatest common divisor is being calculated. But I am stuck to understand what I am doing wrong. Would appreciate a hint or guidance.</p>\n<p>This is correct method from the book to calculate gcd but not with array:</p>\n<pre><code>public static int gcd(int n1,int n2) {\n    int gcd = 1; // Initial gcd is 1\n    int k = 2; // Possible gcd\n\n    while (k &lt;= n1 &amp;&amp; k &lt;= n2) {\n        if (n1 % k == 0 &amp;&amp; n2 % k == 0)\n           gcd = k; // Update gcd\n        k++;\n    }\n\n    return gcd; // Return gcd\n }\n</code></pre>\n"},{"tags":["java","jpa","criteria-api"],"comments":[{"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"score":0,"creation_date":1325924195,"post_id":8764191,"comment_id":10929392,"body_markdown":"Try to de-typing the query from CriteriaQuery&lt;Documents&gt; to CriteriaQuery in order to select the count without offending the API. If you also post more infos about the tables / entities I can try some other ways","body":"Try to de-typing the query from CriteriaQuery&lt;Documents&gt; to CriteriaQuery in order to select the count without offending the API. If you also post more infos about the tables / entities I can try some other ways"}],"answers":[{"tags":[],"owner":{"account_id":1004269,"reputation":4294,"user_id":1018419,"display_name":"Mechkov"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1325883217,"creation_date":1325883217,"answer_id":8764367,"question_id":8764191,"body_markdown":"Take a look into this easy tutorial. It uses JPA2 and Criteria\r\n\r\nhttp://www.jumpingbean.co.za/blogs/jpa2-criteria-api\r\n\r\nRegards!","title":"Need help creating JPA criteria query","body":"<p>Take a look into this easy tutorial. It uses JPA2 and Criteria</p>\n\n<p><a href=\"http://www.jumpingbean.co.za/blogs/jpa2-criteria-api\" rel=\"nofollow\">http://www.jumpingbean.co.za/blogs/jpa2-criteria-api</a></p>\n\n<p>Regards!</p>\n"},{"tags":[],"owner":{"account_id":203378,"reputation":1126,"user_id":450995,"accept_rate":83,"display_name":"Gonzalo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1325951613,"creation_date":1325883563,"answer_id":8764441,"question_id":8764191,"body_markdown":"If you are using Hibernate, this should work:\r\n\r\n    ProjectionList pl = Projections.projectionList()\r\n    .add(Projections.groupProperty(&quot;userid&quot;))\r\n    .add(Projections.property(&quot;userid&quot;))\r\n    .add(Projections.count(&quot;userid&quot;));\r\n\r\n    Criteria criteria = session.createCriteria(Document.class)\r\n    .add(Restrictions.eq(&quot;usertype&quot;,usertype))\r\n    .setProjection(pl)\r\n    .addOrder(Order.desc(&quot;cnt&quot;));\r\n\r\nHope it helps!","title":"Need help creating JPA criteria query","body":"<p>If you are using Hibernate, this should work:</p>\n\n<pre><code>ProjectionList pl = Projections.projectionList()\n.add(Projections.groupProperty(\"userid\"))\n.add(Projections.property(\"userid\"))\n.add(Projections.count(\"userid\"));\n\nCriteria criteria = session.createCriteria(Document.class)\n.add(Restrictions.eq(\"usertype\",usertype))\n.setProjection(pl)\n.addOrder(Order.desc(\"cnt\"));\n</code></pre>\n\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":192606,"reputation":9871,"user_id":433835,"accept_rate":95,"display_name":"Koh&#225;nyi R&#243;bert"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1325946310,"creation_date":1325945975,"answer_id":8770341,"question_id":8764191,"body_markdown":"Your query doesn&#39;t return a *complete* entity object as you&#39;re only selecting two fields of the given table (this is why you&#39;re getting an error that says *yadayadapartialyadayada*).\r\n\r\nYour solution is almost right, here&#39;s what you need to change to make it work—making it *partial*.\r\n\r\nInstead of a plain `CriteriaQuery&lt;...&gt;` you have to create a *tuple* `CriteriaQuery&lt;..&gt;` by calling [`CriteriaBuilder.createTupleQuery()`][1]. (Basically, you can call `CriteriaBuilder.createQuery(...)` and pass [`Tuple.class`][2] to it as an argument. `Tuple` is a sort of *wildcard* entity class.)\r\n\r\n    CriteriaBuilder cb = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;Tuple&gt; cq= cb.createTupleQuery();\r\n\r\n    Root&lt;Documents&gt; root = cq.from(Documents.class);\r\n    Expression&lt;Integer&gt; userId = root.get(&quot;USERID&quot;);\r\n    Expression&lt;String&gt; userType = root.get(&quot;USERTYPE&quot;);\r\n    Expression&lt;Long&gt; count = cb.count(userId);\r\n\r\n    cq.multiselect(userId.alias(&quot;USERID&quot;), count.alias(&quot;CNT&quot;));\r\n    cq.where(cb.equal(userType, &quot;COMPANY&quot;);\r\n    cq.groupBy(userId);\r\n    cq.orderBy(cb.desc(count));\r\n\r\n    TypedQuery&lt;Tuple&gt; tq = em.createQuery(cq);\r\n    for (Tuple t : tq.getResultsList()) {\r\n      System.out.println(t.get(&quot;USERID&quot;));\r\n      System.out.println(t.get(&quot;CNT&quot;));\r\n    }\r\n\r\n&lt;sub&gt;(Accessing fields of a `Tuple` gave me an error if I didn&#39;t use aliases for them (in `multiselect(...)`). This is why I&#39;ve used aliases, but this can be tackled more cleanly by using JPA 2&#39;s *Metamodel API*, which is described in the specification quite thoroughly. &lt;/sub&gt;)\r\n\r\nThe documentation for [`CriteriaQuery.multiselect(...)`][3] describes the behaviour of queries using `Tuple` objects more deeply.\r\n\r\n[1]: http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#createTupleQuery()\r\n[2]: http://docs.oracle.com/javaee/6/api/javax/persistence/Tuple.html\r\n[3]: http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaQuery.html#multiselect(javax.persistence.criteria.Selection...)","title":"Need help creating JPA criteria query","body":"<p>Your query doesn't return a <em>complete</em> entity object as you're only selecting two fields of the given table (this is why you're getting an error that says <em>yadayadapartialyadayada</em>).</p>\n\n<p>Your solution is almost right, here's what you need to change to make it work—making it <em>partial</em>.</p>\n\n<p>Instead of a plain <code>CriteriaQuery&lt;...&gt;</code> you have to create a <em>tuple</em> <code>CriteriaQuery&lt;..&gt;</code> by calling <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#createTupleQuery%28%29\"><code>CriteriaBuilder.createTupleQuery()</code></a>. (Basically, you can call <code>CriteriaBuilder.createQuery(...)</code> and pass <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/Tuple.html\"><code>Tuple.class</code></a> to it as an argument. <code>Tuple</code> is a sort of <em>wildcard</em> entity class.)</p>\n\n<pre><code>CriteriaBuilder cb = em.getCriteriaBuilder();\nCriteriaQuery&lt;Tuple&gt; cq= cb.createTupleQuery();\n\nRoot&lt;Documents&gt; root = cq.from(Documents.class);\nExpression&lt;Integer&gt; userId = root.get(\"USERID\");\nExpression&lt;String&gt; userType = root.get(\"USERTYPE\");\nExpression&lt;Long&gt; count = cb.count(userId);\n\ncq.multiselect(userId.alias(\"USERID\"), count.alias(\"CNT\"));\ncq.where(cb.equal(userType, \"COMPANY\");\ncq.groupBy(userId);\ncq.orderBy(cb.desc(count));\n\nTypedQuery&lt;Tuple&gt; tq = em.createQuery(cq);\nfor (Tuple t : tq.getResultsList()) {\n  System.out.println(t.get(\"USERID\"));\n  System.out.println(t.get(\"CNT\"));\n}\n</code></pre>\n\n<p><sub>(Accessing fields of a <code>Tuple</code> gave me an error if I didn't use aliases for them (in <code>multiselect(...)</code>). This is why I've used aliases, but this can be tackled more cleanly by using JPA 2's <em>Metamodel API</em>, which is described in the specification quite thoroughly. </sub>)</p>\n\n<p>The documentation for <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaQuery.html#multiselect%28javax.persistence.criteria.Selection...%29\"><code>CriteriaQuery.multiselect(...)</code></a> describes the behaviour of queries using <code>Tuple</code> objects more deeply.</p>\n"},{"tags":[],"owner":{"account_id":2114210,"reputation":1539,"user_id":1878854,"accept_rate":78,"display_name":"Accollativo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677152770,"creation_date":1677152770,"answer_id":75544395,"question_id":8764191,"body_markdown":"You need to add a constructor to `Documents` with only `userid` and `count` because you will need it on:\r\n\r\n    cqry.multiselect(userid, count);\r\n\r\n \r\n","title":"Need help creating JPA criteria query","body":"<p>You need to add a constructor to <code>Documents</code> with only <code>userid</code> and <code>count</code> because you will need it on:</p>\n<pre><code>cqry.multiselect(userid, count);\n</code></pre>\n"}],"owner":{"account_id":452468,"reputation":5490,"user_id":848926,"accept_rate":80,"display_name":"Alan B. Dee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18456,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":8770341,"answer_count":4,"score":11,"last_activity_date":1677152770,"creation_date":1325882407,"question_id":8764191,"body_markdown":"I&#39;m building my first Java EE web application using Glassfish and JSF. I&#39;m fairly new to the criteria query and I have a query I need to perform but the javaee6 tutorial seems a little thin on examples. Anyway, I&#39;m having a hard time creating the query.\r\n\r\nGoal: I want to pull the company with the most documents stored. \r\nCompanies have a OneToMany relationship with Documents. \r\nDocuments has a ManyToOne relationship with several tables, the &quot;usertype&quot; column distinguishes them.\r\n\r\nMySQL query: \r\n\r\n    SELECT USERID, COUNT(USERID) AS CNT \r\n    FROM DOCUMENTS \r\n    WHERE USERTYPE=&quot;COMPANY&quot; \r\n    GROUP BY USERID \r\n    ORDER BY CNT DESC\r\n\r\nThanks\r\n\r\n--update--\r\nBased on user feedback, here is what I have so far:\r\n\r\n            CriteriaBuilder cb = em.getCriteriaBuilder();\r\n            CriteriaQuery&lt;Documents&gt; cqry = cb.createQuery(Documents.class);\r\n            //Intersting Stuff\r\n            Root&lt;Documents&gt; root = cqry.from(Documents.class);\r\n            Expression userid = root.get(&quot;userID&quot;);\r\n            Expression usertype = root.get(&quot;userType&quot;);\r\n            Expression count = cb.count(userid);\r\n            cqry.multiselect(userid, count);\r\n            Predicate userType = cb.equal(usertype, &quot;COMPANY&quot;);\r\n            cqry.where(userType);\r\n            cqry.groupBy(userid);\r\n            cqry.orderBy(cb.desc(count));\r\n            //more boilerplate\r\n            Query qry = em.createQuery(cqry);\r\n            List&lt;Documents&gt; results = qry.getResultList();\r\n\r\nThe error I get is:\r\n\r\n    Exception Description: Partial object queries are not allowed to maintain the cache or be edited.  You must use dontMaintainCache().\r\n\r\nTypical error, means nothing to me!\r\n\r\n","title":"Need help creating JPA criteria query","body":"<p>I'm building my first Java EE web application using Glassfish and JSF. I'm fairly new to the criteria query and I have a query I need to perform but the javaee6 tutorial seems a little thin on examples. Anyway, I'm having a hard time creating the query.</p>\n\n<p>Goal: I want to pull the company with the most documents stored. \nCompanies have a OneToMany relationship with Documents. \nDocuments has a ManyToOne relationship with several tables, the \"usertype\" column distinguishes them.</p>\n\n<p>MySQL query: </p>\n\n<pre><code>SELECT USERID, COUNT(USERID) AS CNT \nFROM DOCUMENTS \nWHERE USERTYPE=\"COMPANY\" \nGROUP BY USERID \nORDER BY CNT DESC\n</code></pre>\n\n<p>Thanks</p>\n\n<p>--update--\nBased on user feedback, here is what I have so far:</p>\n\n<pre><code>        CriteriaBuilder cb = em.getCriteriaBuilder();\n        CriteriaQuery&lt;Documents&gt; cqry = cb.createQuery(Documents.class);\n        //Intersting Stuff\n        Root&lt;Documents&gt; root = cqry.from(Documents.class);\n        Expression userid = root.get(\"userID\");\n        Expression usertype = root.get(\"userType\");\n        Expression count = cb.count(userid);\n        cqry.multiselect(userid, count);\n        Predicate userType = cb.equal(usertype, \"COMPANY\");\n        cqry.where(userType);\n        cqry.groupBy(userid);\n        cqry.orderBy(cb.desc(count));\n        //more boilerplate\n        Query qry = em.createQuery(cqry);\n        List&lt;Documents&gt; results = qry.getResultList();\n</code></pre>\n\n<p>The error I get is:</p>\n\n<pre><code>Exception Description: Partial object queries are not allowed to maintain the cache or be edited.  You must use dontMaintainCache().\n</code></pre>\n\n<p>Typical error, means nothing to me!</p>\n"},{"tags":["java","xml","xslt","xpath"],"comments":[{"owner":{"account_id":16586,"reputation":241511,"user_id":36305,"accept_rate":100,"display_name":"Dimitre Novatchev"},"score":0,"creation_date":1295531345,"post_id":4746299,"comment_id":5249576,"body_markdown":"Good question, +1. See my answer for a complete XSLT 1.0 solution that takes a parameter that contains a node-set and produces an XPath expression for every node in this node-set. The nodes can be of any type: document-node, element, text-node, attribute, comment, PI, namespace.","body":"Good question, +1. See my answer for a complete XSLT 1.0 solution that takes a parameter that contains a node-set and produces an XPath expression for every node in this node-set. The nodes can be of any type: document-node, element, text-node, attribute, comment, PI, namespace."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1295793952,"post_id":4746299,"comment_id":5285138,"body_markdown":"What kind of XPath expression do you want though? You can simply take the index of each element in its parent&#39;s `getChildren()` nodelist and create an xpath like `/*[5]/*[2]/*[8]/@yourattr`. But if you want to assert results, shouldn&#39;t you be doing it the other way around? Write an xpath expression that returns true if your XML is correct and false if it isn&#39;t, then evaluate it?","body":"What kind of XPath expression do you want though? You can simply take the index of each element in its parent&#39;s <code>getChildren()</code> nodelist and create an xpath like <code>&#47;*[5]&#47;*[2]&#47;*[8]&#47;@yourattr</code>. But if you want to assert results, shouldn&#39;t you be doing it the other way around? Write an xpath expression that returns true if your XML is correct and false if it isn&#39;t, then evaluate it?"},{"owner":{"account_id":56519,"reputation":22672,"user_id":169277,"accept_rate":97,"display_name":"ant"},"score":0,"creation_date":1295794903,"post_id":4746299,"comment_id":5285212,"body_markdown":"@biziclop I want to create xpaths from request I send(so I can use it to verify the results), not the other way arround. I updated my question","body":"@biziclop I want to create xpaths from request I send(so I can use it to verify the results), not the other way arround. I updated my question"},{"owner":{"account_id":16586,"reputation":241511,"user_id":36305,"accept_rate":100,"display_name":"Dimitre Novatchev"},"score":0,"creation_date":1295798300,"post_id":4746299,"comment_id":5285682,"body_markdown":"@c0mrade: There are holes in your updated question. What if an element has more than one text node like in: `&lt;x&gt;text 1&lt;y/&gt;text 2&lt;/x&gt;` How should the wanted solution process any such element? I will update my answer with both an XSLT solution and a C# solution (my Java is a bit rusty) -- will this be useful to you?","body":"@c0mrade: There are holes in your updated question. What if an element has more than one text node like in: <code>&lt;x&gt;text 1&lt;y&#47;&gt;text 2&lt;&#47;x&gt;</code> How should the wanted solution process any such element? I will update my answer with both an XSLT solution and a C# solution (my Java is a bit rusty) -- will this be useful to you?"},{"owner":{"account_id":56519,"reputation":22672,"user_id":169277,"accept_rate":97,"display_name":"ant"},"score":0,"creation_date":1295798531,"post_id":4746299,"comment_id":5285706,"body_markdown":"@Dimitre Novatchev thank you for commenting, as far as I can see that case never occurs in my xml files, and I don&#39;t think it will. As BalusC suggested I could let java run XSLT, if it produces the correct output as example I posted above. tnx","body":"@Dimitre Novatchev thank you for commenting, as far as I can see that case never occurs in my xml files, and I don&#39;t think it will. As BalusC suggested I could let java run XSLT, if it produces the correct output as example I posted above. tnx"},{"owner":{"account_id":16586,"reputation":241511,"user_id":36305,"accept_rate":100,"display_name":"Dimitre Novatchev"},"score":0,"creation_date":1295799154,"post_id":4746299,"comment_id":5285775,"body_markdown":"@c0mrade: That is good to know, thanks. So, it may be useful if you put this clarification in the question itself. From your last comment, may I conclude that going forward with XSLT and possibly C# solution will be valuable to you?","body":"@c0mrade: That is good to know, thanks. So, it may be useful if you put this clarification in the question itself. From your last comment, may I conclude that going forward with XSLT and possibly C# solution will be valuable to you?"},{"owner":{"account_id":56519,"reputation":22672,"user_id":169277,"accept_rate":97,"display_name":"ant"},"score":0,"creation_date":1295799498,"post_id":4746299,"comment_id":5285818,"body_markdown":"@Dimitre Novatchev yes it would be most welcome. Thank you","body":"@Dimitre Novatchev yes it would be most welcome. Thank you"},{"owner":{"account_id":16586,"reputation":241511,"user_id":36305,"accept_rate":100,"display_name":"Dimitre Novatchev"},"score":0,"creation_date":1295802206,"post_id":4746299,"comment_id":5286145,"body_markdown":"@c0mrade: I have produced a complete and very short (30 lines) XSLT solution that is also easy to understand and solves your problem exactly.","body":"@c0mrade: I have produced a complete and very short (30 lines) XSLT solution that is also easy to understand and solves your problem exactly."},{"owner":{"account_id":16586,"reputation":241511,"user_id":36305,"accept_rate":100,"display_name":"Dimitre Novatchev"},"score":0,"creation_date":1295802453,"post_id":4746299,"comment_id":5286174,"body_markdown":"@c0mrade: I have also added a step-by-step explanation of the solution. Thank you for your appreciation.","body":"@c0mrade: I have also added a step-by-step explanation of the solution. Thank you for your appreciation."},{"owner":{"account_id":56519,"reputation":22672,"user_id":169277,"accept_rate":97,"display_name":"ant"},"score":0,"creation_date":1295803423,"post_id":4746299,"comment_id":5286286,"body_markdown":"@Dimitre Novatchev thanks really appreciate it","body":"@Dimitre Novatchev thanks really appreciate it"},{"owner":{"account_id":16586,"reputation":241511,"user_id":36305,"accept_rate":100,"display_name":"Dimitre Novatchev"},"score":0,"creation_date":1295879191,"post_id":4746299,"comment_id":5296877,"body_markdown":"@c0mrade: Thank you for the new refinement of the problem. Yes, it was easy to adjust my solution to deal with the updated format. I have updated in my answer both the code and the explanation. Thank you for providing this nice problem.","body":"@c0mrade: Thank you for the new refinement of the problem. Yes, it was easy to adjust my solution to deal with the updated format. I have updated in my answer both the code and the explanation. Thank you for providing this nice problem."},{"owner":{"account_id":285796,"reputation":13049,"user_id":584674,"accept_rate":86,"display_name":"james.garriss"},"score":0,"creation_date":1447163887,"post_id":4746299,"comment_id":55036586,"body_markdown":"Possible duplicate of [how to retrieve corresponding xpath](http://stackoverflow.com/questions/1956534/how-to-retrieve-corresponding-xpath)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/1956534/how-to-retrieve-corresponding-xpath\">how to retrieve corresponding xpath</a>"}],"answers":[{"tags":[],"owner":{"account_id":239025,"reputation":4435,"user_id":508328,"accept_rate":90,"display_name":"andbi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1295524531,"creation_date":1295524531,"answer_id":4746803,"question_id":4746299,"body_markdown":"1. use w3c.dom\r\n2. go recursively down\r\n3. for each node there is easy way to get it&#39;s xpath: either by storing it as array/list while #2, or via function which goes recursively up until parent is null, then reverses array/list of encountered nodes.\r\n\r\nsomething like that.\r\n\r\nUPD:\r\nand concatenate final list in order to get final xpath.\r\ndon&#39;t think attributes will be a problem. \r\n\r\n","title":"Generate/get Xpath from XML in Java","body":"<ol>\n<li>use w3c.dom</li>\n<li>go recursively down</li>\n<li>for each node there is easy way to get it's xpath: either by storing it as array/list while #2, or via function which goes recursively up until parent is null, then reverses array/list of encountered nodes.</li>\n</ol>\n\n<p>something like that.</p>\n\n<p>UPD:\nand concatenate final list in order to get final xpath.\ndon't think attributes will be a problem. </p>\n"},{"tags":[],"owner":{"account_id":231828,"reputation":4963,"user_id":496265,"accept_rate":80,"display_name":"alpha-mouse"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1295527766,"creation_date":1295527766,"answer_id":4747301,"question_id":4746299,"body_markdown":"I&#39;ve done a similar task once. The main idea used was that you can use indexes of the element in the xpath. For example in the following xml\r\n\r\n    &lt;root&gt;\r\n        &lt;el /&gt;\r\n        &lt;something /&gt;\r\n        &lt;el /&gt;\r\n    &lt;/root&gt;\r\n\r\nxpath to the second `&lt;el/&gt;` will be `/root[1]/el[2]` (xpath indexes are 1-based). This reads as &quot;take the first root, then take the **second one from all elements with the name** el&quot;. So element `something` does not affect indexing of elements `el`. So you can in theory create an xpath for each specific element in your xml. In practice I&#39;ve accomplished this by walking the tree recursevely and remembering information about elements and their indexes along the way.  \r\nCreating xpath referencing specific attribute of the element then was just adding &#39;/@attrName&#39; to element&#39;s xpath.","title":"Generate/get Xpath from XML in Java","body":"<p>I've done a similar task once. The main idea used was that you can use indexes of the element in the xpath. For example in the following xml</p>\n\n<pre><code>&lt;root&gt;\n    &lt;el /&gt;\n    &lt;something /&gt;\n    &lt;el /&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>xpath to the second <code>&lt;el/&gt;</code> will be <code>/root[1]/el[2]</code> (xpath indexes are 1-based). This reads as \"take the first root, then take the <strong>second one from all elements with the name</strong> el\". So element <code>something</code> does not affect indexing of elements <code>el</code>. So you can in theory create an xpath for each specific element in your xml. In practice I've accomplished this by walking the tree recursevely and remembering information about elements and their indexes along the way.<br>\nCreating xpath referencing specific attribute of the element then was just adding '/@attrName' to element's xpath.</p>\n"},{"tags":[],"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1295528029,"creation_date":1295528029,"answer_id":4747352,"question_id":4746299,"body_markdown":"I have written a method to return the absolute path of an element in the [Practical XML][1] library. To give you an idea of how it works, here&#39;s an extract form one of the [unit tests][2]:\r\n\r\n    assertEquals(&quot;/root/wargle[2]/zargle&quot;,\r\n                 DomUtil.getAbsolutePath(child3a)); \r\n\r\nSo, you could recurse through the document, apply your tests, and use this to return the XPath. Or, what is probably better, is that you could use the [XPath-based assertions][3] from that same library.\r\n\r\n\r\n  [1]: http://sourceforge.net/projects/practicalxml/develop\r\n  [2]: http://practicalxml.svn.sourceforge.net/viewvc/practicalxml/trunk/src/test/java/net/sf/practicalxml/TestDomUtilGetPath.java?revision=209&amp;view=markup\r\n  [3]: http://practicalxml.sourceforge.net/apidocs/net/sf/practicalxml/junit/DomAsserts.html","title":"Generate/get Xpath from XML in Java","body":"<p>I have written a method to return the absolute path of an element in the <a href=\"http://sourceforge.net/projects/practicalxml/develop\" rel=\"nofollow\">Practical XML</a> library. To give you an idea of how it works, here's an extract form one of the <a href=\"http://practicalxml.svn.sourceforge.net/viewvc/practicalxml/trunk/src/test/java/net/sf/practicalxml/TestDomUtilGetPath.java?revision=209&amp;view=markup\" rel=\"nofollow\">unit tests</a>:</p>\n\n<pre><code>assertEquals(\"/root/wargle[2]/zargle\",\n             DomUtil.getAbsolutePath(child3a)); \n</code></pre>\n\n<p>So, you could recurse through the document, apply your tests, and use this to return the XPath. Or, what is probably better, is that you could use the <a href=\"http://practicalxml.sourceforge.net/apidocs/net/sf/practicalxml/junit/DomAsserts.html\" rel=\"nofollow\">XPath-based assertions</a> from that same library.</p>\n"},{"tags":[],"owner":{"account_id":16586,"reputation":241511,"user_id":36305,"accept_rate":100,"display_name":"Dimitre Novatchev"},"down_vote_count":0,"up_vote_count":49,"is_accepted":true,"score":49,"last_activity_date":1655574048,"creation_date":1295531119,"answer_id":4747858,"question_id":4746299,"body_markdown":"**Update**:\r\n\r\n@c0mrade has updated his question. Here is a solution to it:\r\n\r\n**This XSLT transformation**:\r\n\r\n    &lt;xsl:stylesheet version=&quot;1.0&quot;  xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n    \t&lt;xsl:output method=&quot;text&quot;/&gt;\r\n    \t&lt;xsl:strip-space elements=&quot;*&quot;/&gt;\r\n    \t\r\n    \t&lt;xsl:variable name=&quot;vApos&quot;&gt;&#39;&lt;/xsl:variable&gt;\r\n    \t\r\n    \t&lt;xsl:template match=&quot;*[@* or not(*)] &quot;&gt;\r\n    \t  &lt;xsl:if test=&quot;not(*)&quot;&gt;\r\n    \t\t &lt;xsl:apply-templates select=&quot;ancestor-or-self::*&quot; mode=&quot;path&quot;/&gt;\r\n    \t\t &lt;xsl:value-of select=&quot;concat(&#39;=&#39;,$vApos,.,$vApos)&quot;/&gt;\r\n    \t\t &lt;xsl:text&gt;&amp;#xA;&lt;/xsl:text&gt;\r\n    \t\t&lt;/xsl:if&gt;\r\n    \t\t&lt;xsl:apply-templates select=&quot;@*|*&quot;/&gt;\r\n    \t&lt;/xsl:template&gt;\r\n    \t\r\n    \t&lt;xsl:template match=&quot;*&quot; mode=&quot;path&quot;&gt;\r\n    \t\t&lt;xsl:value-of select=&quot;concat(&#39;/&#39;,name())&quot;/&gt;\r\n    \t\t&lt;xsl:variable name=&quot;vnumPrecSiblings&quot; select=\r\n    \t\t &quot;count(preceding-sibling::*[name()=name(current())])&quot;/&gt;\r\n    \t\t&lt;xsl:if test=&quot;$vnumPrecSiblings&quot;&gt;\r\n    \t\t\t&lt;xsl:value-of select=&quot;concat(&#39;[&#39;, $vnumPrecSiblings +1, &#39;]&#39;)&quot;/&gt;\r\n    \t\t&lt;/xsl:if&gt;\r\n    \t&lt;/xsl:template&gt;\r\n    \t\r\n    \t&lt;xsl:template match=&quot;@*&quot;&gt;\r\n    \t\t&lt;xsl:apply-templates select=&quot;../ancestor-or-self::*&quot; mode=&quot;path&quot;/&gt;\r\n    \t\t&lt;xsl:value-of select=&quot;concat(&#39;[@&#39;,name(), &#39;=&#39;,$vApos,.,$vApos,&#39;]&#39;)&quot;/&gt;\r\n    \t\t&lt;xsl:text&gt;&amp;#xA;&lt;/xsl:text&gt;\r\n    \t&lt;/xsl:template&gt;\r\n    &lt;/xsl:stylesheet&gt;\r\n\r\n**when applied on the provided XML document**:\r\n\r\n    &lt;root&gt;\r\n    \t&lt;elemA&gt;one&lt;/elemA&gt;\r\n    \t&lt;elemA attribute1=&#39;first&#39; attribute2=&#39;second&#39;&gt;two&lt;/elemA&gt;\r\n    \t&lt;elemB&gt;three&lt;/elemB&gt;\r\n    \t&lt;elemA&gt;four&lt;/elemA&gt;\r\n    \t&lt;elemC&gt;\r\n    \t\t&lt;elemB&gt;five&lt;/elemB&gt;\r\n    \t&lt;/elemC&gt;\r\n    &lt;/root&gt;\r\n\r\n**produces exactly the wanted, correct result**:\r\n\r\n    /root/elemA=&#39;one&#39;\r\n    /root/elemA[2]=&#39;two&#39;\r\n    /root/elemA[2][@attribute1=&#39;first&#39;]\r\n    /root/elemA[2][@attribute2=&#39;second&#39;]\r\n    /root/elemB=&#39;three&#39;\r\n    /root/elemA[3]=&#39;four&#39;\r\n    /root/elemC/elemB=&#39;five&#39;\r\n\r\n**When applied to the newly-provided document by @c0mrade**:\r\n\r\n    &lt;root&gt;\r\n    \t&lt;elemX serial=&quot;kefw90234kf2esda9231&quot;&gt;\r\n    \t\t&lt;id&gt;89734&lt;/id&gt;\r\n    \t&lt;/elemX&gt;\r\n    &lt;/root&gt;\r\n\r\n**again the correct result is produced**:\r\n\r\n    /root/elemX[@serial=&#39;kefw90234kf2esda9231&#39;]\r\n    /root/elemX/id=&#39;89734&#39;\r\n\r\n**Explanation**:\r\n\r\n - **Only elements that have no children elements, or have attributes are matched** and processed.\r\n\r\n - **For any such element, if it doesn&#39;t have children-elements all of its ancestor-or self elements are processed** in a specific mode, named `&#39;path&#39;`. Then the `&quot;=&#39;theValue&#39;&quot;` part is output and then a NL character.\r\n\r\n - **All attributes of the matched element are then processed**.\r\n\r\n - **Then finally, templates are applied to all children-elements**.\r\n\r\n - **Processing an element in the `&#39;path&#39;` mode is simple**: A `/` character and the name of the element are output. Then, if there are preceding siblings with the same name, a &quot;[numPrecSiblings+1]` part is output.\r\n\r\n - **Processing of attributes is simple**: First all `ancestor-or-self::` elements of its parent are processed in `&#39;path&#39;` mode, then the [attrName=attrValue] part is output, followed by a NL character.\r\n\r\n**Do note**:\r\n\r\n - Names that are in a namespace are displayed without any problem and in their initial readable form.\r\n\r\n - To aid readability, an index of `[1]` is never displayed.\r\n\r\n\r\n----------\r\n\r\n\r\nBelow is my initial answer (may be ignored)\r\n\r\n**Here is a pure XSLT 1.0 solution**:\r\n\r\nBelow is a sample xml document and a stylesheet that takes a node-set parameter and produces one valid XPath expression for every member-node.\r\n\r\n**stylesheet (buildPath.xsl):**\r\n- -------------------------\r\n\r\n    &lt;xsl:stylesheet version=&#39;1.0&#39;\r\n    xmlns:xsl=&#39;http://www.w3.org/1999/XSL/Transform&#39;\r\n    xmlns:msxsl=&quot;urn:schemas-microsoft-com:xslt&quot; \r\n    &gt;\r\n    \r\n    &lt;xsl:output method=&quot;text&quot;/&gt;\r\n    &lt;xsl:variable name=&quot;theParmNodes&quot; select=&quot;//namespace::*[local-name() =\r\n    &#39;myNamespace&#39;]&quot;/&gt;\r\n    &lt;xsl:template match=&quot;/&quot;&gt;\r\n      &lt;xsl:variable name=&quot;theResult&quot;&gt;\r\n        &lt;xsl:for-each select=&quot;$theParmNodes&quot;&gt;\r\n        &lt;xsl:variable name=&quot;theNode&quot; select=&quot;.&quot;/&gt;\r\n        &lt;xsl:for-each select=&quot;$theNode |\r\n    $theNode/ancestor-or-self::node()[..]&quot;&gt;\r\n          &lt;xsl:element name=&quot;slash&quot;&gt;/&lt;/xsl:element&gt;\r\n          &lt;xsl:choose&gt;\r\n            &lt;xsl:when test=&quot;self::*&quot;&gt;\t\t\t\r\n              &lt;xsl:element name=&quot;nodeName&quot;&gt;\r\n                &lt;xsl:value-of select=&quot;name()&quot;/&gt;\r\n                &lt;xsl:variable name=&quot;thisPosition&quot; \r\n                    select=&quot;count(preceding-sibling::*[name(current()) = \r\n                            name()])&quot;/&gt;\r\n                &lt;xsl:variable name=&quot;numFollowing&quot; \r\n                    select=&quot;count(following-sibling::*[name(current()) = \r\n                            name()])&quot;/&gt;\r\n                &lt;xsl:if test=&quot;$thisPosition + $numFollowing &gt; 0&quot;&gt;\r\n                  &lt;xsl:value-of select=&quot;concat(&#39;[&#39;, $thisPosition +\r\n                                                               1, &#39;]&#39;)&quot;/&gt;\r\n                &lt;/xsl:if&gt;\r\n              &lt;/xsl:element&gt;\r\n            &lt;/xsl:when&gt;\r\n            &lt;xsl:otherwise&gt; &lt;!-- This node is not an element --&gt;\r\n              &lt;xsl:choose&gt;\r\n                &lt;xsl:when test=&quot;count(. | ../@*) = count(../@*)&quot;&gt;\t\r\n                &lt;!-- Attribute --&gt;\r\n                  &lt;xsl:element name=&quot;nodeName&quot;&gt;\r\n                    &lt;xsl:value-of select=&quot;concat(&#39;@&#39;,name())&quot;/&gt;\r\n                  &lt;/xsl:element&gt;\r\n                &lt;/xsl:when&gt;\t\t\r\n                &lt;xsl:when test=&quot;self::text()&quot;&gt;\t&lt;!-- Text --&gt;\r\n                  &lt;xsl:element name=&quot;nodeName&quot;&gt;\r\n                    &lt;xsl:value-of select=&quot;&#39;text()&#39;&quot;/&gt;\r\n                    &lt;xsl:variable name=&quot;thisPosition&quot; \r\n                              select=&quot;count(preceding-sibling::text())&quot;/&gt;\r\n                    &lt;xsl:variable name=&quot;numFollowing&quot; \r\n                              select=&quot;count(following-sibling::text())&quot;/&gt;\r\n                    &lt;xsl:if test=&quot;$thisPosition + $numFollowing &gt; 0&quot;&gt;\r\n                      &lt;xsl:value-of select=&quot;concat(&#39;[&#39;, $thisPosition + \r\n                                                               1, &#39;]&#39;)&quot;/&gt;\r\n                    &lt;/xsl:if&gt;\r\n                  &lt;/xsl:element&gt;\r\n                &lt;/xsl:when&gt;\t\t\r\n                &lt;xsl:when test=&quot;self::processing-instruction()&quot;&gt;\r\n                &lt;!-- Processing Instruction --&gt;\r\n                  &lt;xsl:element name=&quot;nodeName&quot;&gt;\r\n                    &lt;xsl:value-of select=&quot;&#39;processing-instruction()&#39;&quot;/&gt;\r\n                    &lt;xsl:variable name=&quot;thisPosition&quot; \r\n                       select=&quot;count(preceding-sibling::processing-instruction())&quot;/&gt;\r\n                    &lt;xsl:variable name=&quot;numFollowing&quot; \r\n                        select=&quot;count(following-sibling::processing-instruction())&quot;/&gt;\r\n                    &lt;xsl:if test=&quot;$thisPosition + $numFollowing &gt; 0&quot;&gt;\r\n                      &lt;xsl:value-of select=&quot;concat(&#39;[&#39;, $thisPosition + \r\n                                                                1, &#39;]&#39;)&quot;/&gt;\r\n                    &lt;/xsl:if&gt;\r\n                  &lt;/xsl:element&gt;\r\n                &lt;/xsl:when&gt;\t\t\r\n                &lt;xsl:when test=&quot;self::comment()&quot;&gt;\t&lt;!-- Comment --&gt;\r\n                  &lt;xsl:element name=&quot;nodeName&quot;&gt;\r\n                    &lt;xsl:value-of select=&quot;&#39;comment()&#39;&quot;/&gt;\r\n                    &lt;xsl:variable name=&quot;thisPosition&quot; \r\n                             select=&quot;count(preceding-sibling::comment())&quot;/&gt;\r\n                    &lt;xsl:variable name=&quot;numFollowing&quot; \r\n                             select=&quot;count(following-sibling::comment())&quot;/&gt;\r\n                    &lt;xsl:if test=&quot;$thisPosition + $numFollowing &gt; 0&quot;&gt;\r\n                      &lt;xsl:value-of select=&quot;concat(&#39;[&#39;, $thisPosition + \r\n                                                                1, &#39;]&#39;)&quot;/&gt;\r\n                    &lt;/xsl:if&gt;\r\n                  &lt;/xsl:element&gt;\r\n                &lt;/xsl:when&gt;\t\t\r\n                &lt;!-- Namespace: --&gt;\r\n                &lt;xsl:when test=&quot;count(. | ../namespace::*) = \r\n                                                   count(../namespace::*)&quot;&gt;\r\n    \r\n                  &lt;xsl:variable name=&quot;apos&quot;&gt;&#39;&lt;/xsl:variable&gt;\r\n                  &lt;xsl:element name=&quot;nodeName&quot;&gt;\r\n                    &lt;xsl:value-of select=&quot;concat(&#39;namespace::*&#39;, \r\n                    &#39;[local-name() = &#39;, $apos, local-name(), $apos, &#39;]&#39;)&quot;/&gt;\r\n    \r\n                  &lt;/xsl:element&gt;\r\n                &lt;/xsl:when&gt;\t\t\r\n              &lt;/xsl:choose&gt;\r\n            &lt;/xsl:otherwise&gt;\t\t\t\r\n          &lt;/xsl:choose&gt;\r\n        &lt;/xsl:for-each&gt;\r\n        &lt;xsl:text&gt;&amp;#xA;&lt;/xsl:text&gt;\r\n      &lt;/xsl:for-each&gt;\r\n     &lt;/xsl:variable&gt;\r\n     &lt;xsl:value-of select=&quot;msxsl:node-set($theResult)&quot;/&gt;\r\n    &lt;/xsl:template&gt;\r\n    &lt;/xsl:stylesheet&gt;\r\n\r\n \r\n**xml source (buildPath.xml):**\r\n- -------------------------\r\n\r\n    &lt;!-- top level Comment --&gt;\r\n    &lt;root&gt;\r\n        &lt;nodeA&gt;textA&lt;/nodeA&gt;\r\n     &lt;nodeA id=&quot;nodeA-2&quot;&gt;\r\n      &lt;?myProc ?&gt;\r\n            xxxxxxxx\r\n      &lt;nodeB/&gt;\r\n            &lt;nodeB xmlns:myNamespace=&quot;myTestNamespace&quot;&gt;\r\n      &lt;!-- Comment within /root/nodeA[2]/nodeB[2] --&gt;\r\n       &lt;nodeC/&gt;\r\n      &lt;!-- 2nd Comment within /root/nodeA[2]/nodeB[2] --&gt;\r\n            &lt;/nodeB&gt;\r\n            yyyyyyy\r\n      &lt;nodeB/&gt;\r\n      &lt;?myProc2 ?&gt;\r\n        &lt;/nodeA&gt;\r\n    &lt;/root&gt;\r\n    &lt;!-- top level Comment --&gt;\r\n\r\n**Result**:\r\n\r\n    /root/nodeA[2]/nodeB[2]/namespace::*[local-name() = &#39;myNamespace&#39;]\r\n    /root/nodeA[2]/nodeB[2]/nodeC/namespace::*[local-name() =\r\n    &#39;myNamespace&#39;]\r\n\r\n\r\n\r\n","title":"Generate/get Xpath from XML in Java","body":"<p><strong>Update</strong>:</p>\n<p>@c0mrade has updated his question. Here is a solution to it:</p>\n<p><strong>This XSLT transformation</strong>:</p>\n<pre><code>&lt;xsl:stylesheet version=&quot;1.0&quot;  xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n    &lt;xsl:output method=&quot;text&quot;/&gt;\n    &lt;xsl:strip-space elements=&quot;*&quot;/&gt;\n    \n    &lt;xsl:variable name=&quot;vApos&quot;&gt;'&lt;/xsl:variable&gt;\n    \n    &lt;xsl:template match=&quot;*[@* or not(*)] &quot;&gt;\n      &lt;xsl:if test=&quot;not(*)&quot;&gt;\n         &lt;xsl:apply-templates select=&quot;ancestor-or-self::*&quot; mode=&quot;path&quot;/&gt;\n         &lt;xsl:value-of select=&quot;concat('=',$vApos,.,$vApos)&quot;/&gt;\n         &lt;xsl:text&gt;&amp;#xA;&lt;/xsl:text&gt;\n        &lt;/xsl:if&gt;\n        &lt;xsl:apply-templates select=&quot;@*|*&quot;/&gt;\n    &lt;/xsl:template&gt;\n    \n    &lt;xsl:template match=&quot;*&quot; mode=&quot;path&quot;&gt;\n        &lt;xsl:value-of select=&quot;concat('/',name())&quot;/&gt;\n        &lt;xsl:variable name=&quot;vnumPrecSiblings&quot; select=\n         &quot;count(preceding-sibling::*[name()=name(current())])&quot;/&gt;\n        &lt;xsl:if test=&quot;$vnumPrecSiblings&quot;&gt;\n            &lt;xsl:value-of select=&quot;concat('[', $vnumPrecSiblings +1, ']')&quot;/&gt;\n        &lt;/xsl:if&gt;\n    &lt;/xsl:template&gt;\n    \n    &lt;xsl:template match=&quot;@*&quot;&gt;\n        &lt;xsl:apply-templates select=&quot;../ancestor-or-self::*&quot; mode=&quot;path&quot;/&gt;\n        &lt;xsl:value-of select=&quot;concat('[@',name(), '=',$vApos,.,$vApos,']')&quot;/&gt;\n        &lt;xsl:text&gt;&amp;#xA;&lt;/xsl:text&gt;\n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p><strong>when applied on the provided XML document</strong>:</p>\n<pre><code>&lt;root&gt;\n    &lt;elemA&gt;one&lt;/elemA&gt;\n    &lt;elemA attribute1='first' attribute2='second'&gt;two&lt;/elemA&gt;\n    &lt;elemB&gt;three&lt;/elemB&gt;\n    &lt;elemA&gt;four&lt;/elemA&gt;\n    &lt;elemC&gt;\n        &lt;elemB&gt;five&lt;/elemB&gt;\n    &lt;/elemC&gt;\n&lt;/root&gt;\n</code></pre>\n<p><strong>produces exactly the wanted, correct result</strong>:</p>\n<pre><code>/root/elemA='one'\n/root/elemA[2]='two'\n/root/elemA[2][@attribute1='first']\n/root/elemA[2][@attribute2='second']\n/root/elemB='three'\n/root/elemA[3]='four'\n/root/elemC/elemB='five'\n</code></pre>\n<p><strong>When applied to the newly-provided document by @c0mrade</strong>:</p>\n<pre><code>&lt;root&gt;\n    &lt;elemX serial=&quot;kefw90234kf2esda9231&quot;&gt;\n        &lt;id&gt;89734&lt;/id&gt;\n    &lt;/elemX&gt;\n&lt;/root&gt;\n</code></pre>\n<p><strong>again the correct result is produced</strong>:</p>\n<pre><code>/root/elemX[@serial='kefw90234kf2esda9231']\n/root/elemX/id='89734'\n</code></pre>\n<p><strong>Explanation</strong>:</p>\n<ul>\n<li><p><strong>Only elements that have no children elements, or have attributes are matched</strong> and processed.</p>\n</li>\n<li><p><strong>For any such element, if it doesn't have children-elements all of its ancestor-or self elements are processed</strong> in a specific mode, named <code>'path'</code>. Then the <code>&quot;='theValue'&quot;</code> part is output and then a NL character.</p>\n</li>\n<li><p><strong>All attributes of the matched element are then processed</strong>.</p>\n</li>\n<li><p><strong>Then finally, templates are applied to all children-elements</strong>.</p>\n</li>\n<li><p><strong>Processing an element in the <code>'path'</code> mode is simple</strong>: A <code>/</code> character and the name of the element are output. Then, if there are preceding siblings with the same name, a &quot;[numPrecSiblings+1]` part is output.</p>\n</li>\n<li><p><strong>Processing of attributes is simple</strong>: First all <code>ancestor-or-self::</code> elements of its parent are processed in <code>'path'</code> mode, then the [attrName=attrValue] part is output, followed by a NL character.</p>\n</li>\n</ul>\n<p><strong>Do note</strong>:</p>\n<ul>\n<li><p>Names that are in a namespace are displayed without any problem and in their initial readable form.</p>\n</li>\n<li><p>To aid readability, an index of <code>[1]</code> is never displayed.</p>\n</li>\n</ul>\n<hr />\n<p>Below is my initial answer (may be ignored)</p>\n<p><strong>Here is a pure XSLT 1.0 solution</strong>:</p>\n<p>Below is a sample xml document and a stylesheet that takes a node-set parameter and produces one valid XPath expression for every member-node.</p>\n<p><strong>stylesheet (buildPath.xsl):</strong></p>\n<hr />\n<pre><code>&lt;xsl:stylesheet version='1.0'\nxmlns:xsl='http://www.w3.org/1999/XSL/Transform'\nxmlns:msxsl=&quot;urn:schemas-microsoft-com:xslt&quot; \n&gt;\n\n&lt;xsl:output method=&quot;text&quot;/&gt;\n&lt;xsl:variable name=&quot;theParmNodes&quot; select=&quot;//namespace::*[local-name() =\n'myNamespace']&quot;/&gt;\n&lt;xsl:template match=&quot;/&quot;&gt;\n  &lt;xsl:variable name=&quot;theResult&quot;&gt;\n    &lt;xsl:for-each select=&quot;$theParmNodes&quot;&gt;\n    &lt;xsl:variable name=&quot;theNode&quot; select=&quot;.&quot;/&gt;\n    &lt;xsl:for-each select=&quot;$theNode |\n$theNode/ancestor-or-self::node()[..]&quot;&gt;\n      &lt;xsl:element name=&quot;slash&quot;&gt;/&lt;/xsl:element&gt;\n      &lt;xsl:choose&gt;\n        &lt;xsl:when test=&quot;self::*&quot;&gt;           \n          &lt;xsl:element name=&quot;nodeName&quot;&gt;\n            &lt;xsl:value-of select=&quot;name()&quot;/&gt;\n            &lt;xsl:variable name=&quot;thisPosition&quot; \n                select=&quot;count(preceding-sibling::*[name(current()) = \n                        name()])&quot;/&gt;\n            &lt;xsl:variable name=&quot;numFollowing&quot; \n                select=&quot;count(following-sibling::*[name(current()) = \n                        name()])&quot;/&gt;\n            &lt;xsl:if test=&quot;$thisPosition + $numFollowing &gt; 0&quot;&gt;\n              &lt;xsl:value-of select=&quot;concat('[', $thisPosition +\n                                                           1, ']')&quot;/&gt;\n            &lt;/xsl:if&gt;\n          &lt;/xsl:element&gt;\n        &lt;/xsl:when&gt;\n        &lt;xsl:otherwise&gt; &lt;!-- This node is not an element --&gt;\n          &lt;xsl:choose&gt;\n            &lt;xsl:when test=&quot;count(. | ../@*) = count(../@*)&quot;&gt;   \n            &lt;!-- Attribute --&gt;\n              &lt;xsl:element name=&quot;nodeName&quot;&gt;\n                &lt;xsl:value-of select=&quot;concat('@',name())&quot;/&gt;\n              &lt;/xsl:element&gt;\n            &lt;/xsl:when&gt;     \n            &lt;xsl:when test=&quot;self::text()&quot;&gt;  &lt;!-- Text --&gt;\n              &lt;xsl:element name=&quot;nodeName&quot;&gt;\n                &lt;xsl:value-of select=&quot;'text()'&quot;/&gt;\n                &lt;xsl:variable name=&quot;thisPosition&quot; \n                          select=&quot;count(preceding-sibling::text())&quot;/&gt;\n                &lt;xsl:variable name=&quot;numFollowing&quot; \n                          select=&quot;count(following-sibling::text())&quot;/&gt;\n                &lt;xsl:if test=&quot;$thisPosition + $numFollowing &gt; 0&quot;&gt;\n                  &lt;xsl:value-of select=&quot;concat('[', $thisPosition + \n                                                           1, ']')&quot;/&gt;\n                &lt;/xsl:if&gt;\n              &lt;/xsl:element&gt;\n            &lt;/xsl:when&gt;     \n            &lt;xsl:when test=&quot;self::processing-instruction()&quot;&gt;\n            &lt;!-- Processing Instruction --&gt;\n              &lt;xsl:element name=&quot;nodeName&quot;&gt;\n                &lt;xsl:value-of select=&quot;'processing-instruction()'&quot;/&gt;\n                &lt;xsl:variable name=&quot;thisPosition&quot; \n                   select=&quot;count(preceding-sibling::processing-instruction())&quot;/&gt;\n                &lt;xsl:variable name=&quot;numFollowing&quot; \n                    select=&quot;count(following-sibling::processing-instruction())&quot;/&gt;\n                &lt;xsl:if test=&quot;$thisPosition + $numFollowing &gt; 0&quot;&gt;\n                  &lt;xsl:value-of select=&quot;concat('[', $thisPosition + \n                                                            1, ']')&quot;/&gt;\n                &lt;/xsl:if&gt;\n              &lt;/xsl:element&gt;\n            &lt;/xsl:when&gt;     \n            &lt;xsl:when test=&quot;self::comment()&quot;&gt;   &lt;!-- Comment --&gt;\n              &lt;xsl:element name=&quot;nodeName&quot;&gt;\n                &lt;xsl:value-of select=&quot;'comment()'&quot;/&gt;\n                &lt;xsl:variable name=&quot;thisPosition&quot; \n                         select=&quot;count(preceding-sibling::comment())&quot;/&gt;\n                &lt;xsl:variable name=&quot;numFollowing&quot; \n                         select=&quot;count(following-sibling::comment())&quot;/&gt;\n                &lt;xsl:if test=&quot;$thisPosition + $numFollowing &gt; 0&quot;&gt;\n                  &lt;xsl:value-of select=&quot;concat('[', $thisPosition + \n                                                            1, ']')&quot;/&gt;\n                &lt;/xsl:if&gt;\n              &lt;/xsl:element&gt;\n            &lt;/xsl:when&gt;     \n            &lt;!-- Namespace: --&gt;\n            &lt;xsl:when test=&quot;count(. | ../namespace::*) = \n                                               count(../namespace::*)&quot;&gt;\n\n              &lt;xsl:variable name=&quot;apos&quot;&gt;'&lt;/xsl:variable&gt;\n              &lt;xsl:element name=&quot;nodeName&quot;&gt;\n                &lt;xsl:value-of select=&quot;concat('namespace::*', \n                '[local-name() = ', $apos, local-name(), $apos, ']')&quot;/&gt;\n\n              &lt;/xsl:element&gt;\n            &lt;/xsl:when&gt;     \n          &lt;/xsl:choose&gt;\n        &lt;/xsl:otherwise&gt;            \n      &lt;/xsl:choose&gt;\n    &lt;/xsl:for-each&gt;\n    &lt;xsl:text&gt;&amp;#xA;&lt;/xsl:text&gt;\n  &lt;/xsl:for-each&gt;\n &lt;/xsl:variable&gt;\n &lt;xsl:value-of select=&quot;msxsl:node-set($theResult)&quot;/&gt;\n&lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p><strong>xml source (buildPath.xml):</strong></p>\n<hr />\n<pre><code>&lt;!-- top level Comment --&gt;\n&lt;root&gt;\n    &lt;nodeA&gt;textA&lt;/nodeA&gt;\n &lt;nodeA id=&quot;nodeA-2&quot;&gt;\n  &lt;?myProc ?&gt;\n        xxxxxxxx\n  &lt;nodeB/&gt;\n        &lt;nodeB xmlns:myNamespace=&quot;myTestNamespace&quot;&gt;\n  &lt;!-- Comment within /root/nodeA[2]/nodeB[2] --&gt;\n   &lt;nodeC/&gt;\n  &lt;!-- 2nd Comment within /root/nodeA[2]/nodeB[2] --&gt;\n        &lt;/nodeB&gt;\n        yyyyyyy\n  &lt;nodeB/&gt;\n  &lt;?myProc2 ?&gt;\n    &lt;/nodeA&gt;\n&lt;/root&gt;\n&lt;!-- top level Comment --&gt;\n</code></pre>\n<p><strong>Result</strong>:</p>\n<pre><code>/root/nodeA[2]/nodeB[2]/namespace::*[local-name() = 'myNamespace']\n/root/nodeA[2]/nodeB[2]/nodeC/namespace::*[local-name() =\n'myNamespace']\n</code></pre>\n"},{"tags":[],"owner":{"account_id":281184,"reputation":21762,"user_id":577334,"accept_rate":50,"display_name":"billygoat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1295797832,"creation_date":1295797832,"answer_id":4774690,"question_id":4746299,"body_markdown":"I did the exact same thing last week for processing my xml to solr compliant format. \r\n\r\nSince you wanted  a pseudo code: This is how I accomplished that.\r\n\r\n\r\n// You can skip the reference to parent and child.\r\n\r\n1_ Initialize a custom node object: NodeObjectVO {String nodeName, String path, List&lt;String&gt; attr, NodeObjectVO parent, List&lt;NodeObjectVO&gt; child}\r\n\r\n\r\n2_ Create an empty list&lt;NodeObjectVO&gt;\r\n\r\n3_ Create a dom representation of xml and iterate thro the node. For each node, get the corresponding information. All the information like Node name,attribute names and value should be readily available from dom object. ( You need to check the dom NodeType, code should ignore processing instruction and plain text nodes.)\r\n\r\n\r\n// Code Bloat warning.\r\n4_ The only tricky part is get path. I created an iterative utility method to get the xpath string from NodeElement. (While(node.Parent != null ) { path+=node.parent.nodeName}.\r\n\r\n(You can also achieve this by maintaining a global path variable, that keeps track of the parent path for each iteration.)\r\n\r\n5_ In the setter method of setAttributes (List&lt;attr&gt;), I will append the object&#39;s path with all the available attributes. (one path with all available attributes. Not a list of path with each possible combination of attributes. You might want to do someother way. )\r\n\r\n6_ Add the NodeObjectVO to the list.\r\n\r\n7_ Now we have a flat (not hierrarchial) list of custom Node Objects, that have all the information I need.\r\n\r\n\r\n(Note: Like I mentioned, I maintain parent child relationship, you should probably skip that part. There is a possibility of code bloating, especially while getparentpath. For small xml this was not a problem, but this is a concern for large xml).\r\n\r\n\r\n","title":"Generate/get Xpath from XML in Java","body":"<p>I did the exact same thing last week for processing my xml to solr compliant format. </p>\n\n<p>Since you wanted  a pseudo code: This is how I accomplished that.</p>\n\n<p>// You can skip the reference to parent and child.</p>\n\n<p>1_ Initialize a custom node object: NodeObjectVO {String nodeName, String path, List attr, NodeObjectVO parent, List child}</p>\n\n<p>2_ Create an empty list</p>\n\n<p>3_ Create a dom representation of xml and iterate thro the node. For each node, get the corresponding information. All the information like Node name,attribute names and value should be readily available from dom object. ( You need to check the dom NodeType, code should ignore processing instruction and plain text nodes.)</p>\n\n<p>// Code Bloat warning.\n4_ The only tricky part is get path. I created an iterative utility method to get the xpath string from NodeElement. (While(node.Parent != null ) { path+=node.parent.nodeName}.</p>\n\n<p>(You can also achieve this by maintaining a global path variable, that keeps track of the parent path for each iteration.)</p>\n\n<p>5_ In the setter method of setAttributes (List), I will append the object's path with all the available attributes. (one path with all available attributes. Not a list of path with each possible combination of attributes. You might want to do someother way. )</p>\n\n<p>6_ Add the NodeObjectVO to the list.</p>\n\n<p>7_ Now we have a flat (not hierrarchial) list of custom Node Objects, that have all the information I need.</p>\n\n<p>(Note: Like I mentioned, I maintain parent child relationship, you should probably skip that part. There is a possibility of code bloating, especially while getparentpath. For small xml this was not a problem, but this is a concern for large xml).</p>\n"},{"tags":[],"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1295803239,"creation_date":1295803239,"answer_id":4775167,"question_id":4746299,"body_markdown":"\tprivate static void buildEntryList( List&lt;String&gt; entries, String parentXPath, Element parent ) {\r\n\t\tNamedNodeMap attrs = parent.getAttributes();\r\n\t\tfor( int i = 0; i &lt; attrs.getLength(); i++ ) {\r\n\t\t\tAttr attr = (Attr)attrs.item( i );\r\n\t\t\t//TODO: escape attr value\r\n\t\t\tentries.add( parentXPath+&quot;[@&quot;+attr.getName()+&quot;=&#39;&quot;+attr.getValue()+&quot;&#39;]&quot;); \r\n\t\t}\r\n\t\tHashMap&lt;String, Integer&gt; nameMap = new HashMap&lt;String, Integer&gt;();\r\n\t\tNodeList children = parent.getChildNodes();\r\n\t\tfor( int i = 0; i &lt; children.getLength(); i++ ) {\r\n\t\t\tNode child = children.item( i );\r\n\t\t\tif( child instanceof Text ) {\r\n\t\t\t\t//TODO: escape child value\r\n\t\t\t\tentries.add( parentXPath+&quot;=&#39;&quot;+((Text)child).getData()+&quot;&#39;&quot; );\r\n\t\t\t} else if( child instanceof Element ) {\r\n\t\t\t\tString childName = child.getNodeName();\r\n\t\t\t\tInteger nameCount = nameMap.get( childName );\r\n\t\t\t\tnameCount = nameCount == null ? 1 : nameCount + 1;\r\n\t\t\t\tnameMap.put( child.getNodeName(), nameCount );\r\n\t\t\t\tbuildEntryList( entries, parentXPath+&quot;/&quot;+childName+&quot;[&quot;+nameCount+&quot;]&quot;, (Element)child);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static List&lt;String&gt; getEntryList( Document doc ) {\r\n\t\tArrayList&lt;String&gt; entries = new ArrayList&lt;String&gt;();\r\n\t\tElement root = doc.getDocumentElement();\r\n\t\tbuildEntryList(entries, &quot;/&quot;+root.getNodeName()+&quot;[1]&quot;, root );\r\n\t\treturn entries;\r\n\t}\r\n\r\nThis code works with two assumptions: you aren&#39;t using namespaces and there are no mixed content elements. The namespace limitation isn&#39;t a serious one, but it&#39;d make your XPath expression much harder to read, as every element would be something like `*:&lt;name&gt;[namespace-uri()=&#39;&lt;nsuri&gt;&#39;][&lt;index&gt;]`, but otherwise it&#39;s easy to implement. Mixed content on the other hand would make the use of xpath very tedious, as you&#39;d have to be able to individually address the second, third and so on text node within an element.","title":"Generate/get Xpath from XML in Java","body":"<pre><code>private static void buildEntryList( List&lt;String&gt; entries, String parentXPath, Element parent ) {\n    NamedNodeMap attrs = parent.getAttributes();\n    for( int i = 0; i &lt; attrs.getLength(); i++ ) {\n        Attr attr = (Attr)attrs.item( i );\n        //TODO: escape attr value\n        entries.add( parentXPath+\"[@\"+attr.getName()+\"='\"+attr.getValue()+\"']\"); \n    }\n    HashMap&lt;String, Integer&gt; nameMap = new HashMap&lt;String, Integer&gt;();\n    NodeList children = parent.getChildNodes();\n    for( int i = 0; i &lt; children.getLength(); i++ ) {\n        Node child = children.item( i );\n        if( child instanceof Text ) {\n            //TODO: escape child value\n            entries.add( parentXPath+\"='\"+((Text)child).getData()+\"'\" );\n        } else if( child instanceof Element ) {\n            String childName = child.getNodeName();\n            Integer nameCount = nameMap.get( childName );\n            nameCount = nameCount == null ? 1 : nameCount + 1;\n            nameMap.put( child.getNodeName(), nameCount );\n            buildEntryList( entries, parentXPath+\"/\"+childName+\"[\"+nameCount+\"]\", (Element)child);\n        }\n    }\n}\n\npublic static List&lt;String&gt; getEntryList( Document doc ) {\n    ArrayList&lt;String&gt; entries = new ArrayList&lt;String&gt;();\n    Element root = doc.getDocumentElement();\n    buildEntryList(entries, \"/\"+root.getNodeName()+\"[1]\", root );\n    return entries;\n}\n</code></pre>\n\n<p>This code works with two assumptions: you aren't using namespaces and there are no mixed content elements. The namespace limitation isn't a serious one, but it'd make your XPath expression much harder to read, as every element would be something like <code>*:&lt;name&gt;[namespace-uri()='&lt;nsuri&gt;'][&lt;index&gt;]</code>, but otherwise it's easy to implement. Mixed content on the other hand would make the use of xpath very tedious, as you'd have to be able to individually address the second, third and so on text node within an element.</p>\n"},{"tags":[],"owner":{"account_id":162425,"reputation":148009,"user_id":383861,"display_name":"bdoughan"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1295881487,"creation_date":1295879512,"answer_id":4783172,"question_id":4746299,"body_markdown":"Here is how this can be done with SAX:\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import org.xml.sax.Attributes;\r\n    import org.xml.sax.SAXException;\r\n    import org.xml.sax.XMLReader;\r\n    import org.xml.sax.helpers.DefaultHandler;\r\n    \r\n    public class FragmentContentHandler extends DefaultHandler {\r\n    \r\n        private String xPath = &quot;/&quot;;\r\n        private XMLReader xmlReader;\r\n        private FragmentContentHandler parent;\r\n        private StringBuilder characters = new StringBuilder();\r\n        private Map&lt;String, Integer&gt; elementNameCount = new HashMap&lt;String, Integer&gt;();\r\n    \r\n        public FragmentContentHandler(XMLReader xmlReader) {\r\n            this.xmlReader = xmlReader;\r\n        }\r\n    \r\n        private FragmentContentHandler(String xPath, XMLReader xmlReader, FragmentContentHandler parent) {\r\n            this(xmlReader);\r\n            this.xPath = xPath;\r\n            this.parent = parent;\r\n        }\r\n    \r\n        @Override\r\n        public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {\r\n            Integer count = elementNameCount.get(qName);\r\n            if(null == count) {\r\n                count = 1;\r\n            } else {\r\n                count++;\r\n            }\r\n            elementNameCount.put(qName, count);\r\n            String childXPath = xPath + &quot;/&quot; + qName + &quot;[&quot; + count + &quot;]&quot;;\r\n    \r\n            int attsLength = atts.getLength();\r\n            for(int x=0; x&lt;attsLength; x++) {\r\n                System.out.println(childXPath + &quot;[@&quot; + atts.getQName(x) + &quot;=&#39;&quot; + atts.getValue(x) + &#39;]&#39;);\r\n            }\r\n    \r\n            FragmentContentHandler child = new FragmentContentHandler(childXPath, xmlReader, this);\r\n            xmlReader.setContentHandler(child);\r\n        }\r\n    \r\n        @Override\r\n        public void endElement(String uri, String localName, String qName) throws SAXException {\r\n            String value = characters.toString().trim();\r\n            if(value.length() &gt; 0) {\r\n                System.out.println(xPath + &quot;=&#39;&quot; + characters.toString() + &quot;&#39;&quot;);\r\n            }\r\n            xmlReader.setContentHandler(parent);\r\n        }\r\n    \r\n        @Override\r\n        public void characters(char[] ch, int start, int length) throws SAXException {\r\n            characters.append(ch, start, length);\r\n        }\r\n    \r\n    }\r\n\r\nIt can be tested with:\r\n\r\n    import java.io.FileInputStream;\r\n    \r\n    import javax.xml.parsers.SAXParser;\r\n    import javax.xml.parsers.SAXParserFactory;\r\n    \r\n    import org.xml.sax.InputSource;\r\n    import org.xml.sax.XMLReader;\r\n    \r\n    public class Demo {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            SAXParserFactory spf = SAXParserFactory.newInstance();\r\n            SAXParser sp = spf.newSAXParser();\r\n            XMLReader xr = sp.getXMLReader();\r\n    \r\n            xr.setContentHandler(new FragmentContentHandler(xr));\r\n            xr.parse(new InputSource(new FileInputStream(&quot;input.xml&quot;)));\r\n        }\r\n    }\r\n\r\n\r\nThis will produce the desired output:\r\n\r\n    //root[1]/elemA[1]=&#39;one&#39;\r\n    //root[1]/elemA[2][@attribute1=&#39;first]\r\n    //root[1]/elemA[2][@attribute2=&#39;second]\r\n    //root[1]/elemA[2]=&#39;two&#39;\r\n    //root[1]/elemB[1]=&#39;three&#39;\r\n    //root[1]/elemA[3]=&#39;four&#39;\r\n    //root[1]/elemC[1]/elemB[1]=&#39;five&#39;\r\n\r\n","title":"Generate/get Xpath from XML in Java","body":"<p>Here is how this can be done with SAX:</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\nimport org.xml.sax.Attributes;\nimport org.xml.sax.SAXException;\nimport org.xml.sax.XMLReader;\nimport org.xml.sax.helpers.DefaultHandler;\n\npublic class FragmentContentHandler extends DefaultHandler {\n\n    private String xPath = \"/\";\n    private XMLReader xmlReader;\n    private FragmentContentHandler parent;\n    private StringBuilder characters = new StringBuilder();\n    private Map&lt;String, Integer&gt; elementNameCount = new HashMap&lt;String, Integer&gt;();\n\n    public FragmentContentHandler(XMLReader xmlReader) {\n        this.xmlReader = xmlReader;\n    }\n\n    private FragmentContentHandler(String xPath, XMLReader xmlReader, FragmentContentHandler parent) {\n        this(xmlReader);\n        this.xPath = xPath;\n        this.parent = parent;\n    }\n\n    @Override\n    public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {\n        Integer count = elementNameCount.get(qName);\n        if(null == count) {\n            count = 1;\n        } else {\n            count++;\n        }\n        elementNameCount.put(qName, count);\n        String childXPath = xPath + \"/\" + qName + \"[\" + count + \"]\";\n\n        int attsLength = atts.getLength();\n        for(int x=0; x&lt;attsLength; x++) {\n            System.out.println(childXPath + \"[@\" + atts.getQName(x) + \"='\" + atts.getValue(x) + ']');\n        }\n\n        FragmentContentHandler child = new FragmentContentHandler(childXPath, xmlReader, this);\n        xmlReader.setContentHandler(child);\n    }\n\n    @Override\n    public void endElement(String uri, String localName, String qName) throws SAXException {\n        String value = characters.toString().trim();\n        if(value.length() &gt; 0) {\n            System.out.println(xPath + \"='\" + characters.toString() + \"'\");\n        }\n        xmlReader.setContentHandler(parent);\n    }\n\n    @Override\n    public void characters(char[] ch, int start, int length) throws SAXException {\n        characters.append(ch, start, length);\n    }\n\n}\n</code></pre>\n\n<p>It can be tested with:</p>\n\n<pre><code>import java.io.FileInputStream;\n\nimport javax.xml.parsers.SAXParser;\nimport javax.xml.parsers.SAXParserFactory;\n\nimport org.xml.sax.InputSource;\nimport org.xml.sax.XMLReader;\n\npublic class Demo {\n\n    public static void main(String[] args) throws Exception {\n        SAXParserFactory spf = SAXParserFactory.newInstance();\n        SAXParser sp = spf.newSAXParser();\n        XMLReader xr = sp.getXMLReader();\n\n        xr.setContentHandler(new FragmentContentHandler(xr));\n        xr.parse(new InputSource(new FileInputStream(\"input.xml\")));\n    }\n}\n</code></pre>\n\n<p>This will produce the desired output:</p>\n\n<pre><code>//root[1]/elemA[1]='one'\n//root[1]/elemA[2][@attribute1='first]\n//root[1]/elemA[2][@attribute2='second]\n//root[1]/elemA[2]='two'\n//root[1]/elemB[1]='three'\n//root[1]/elemA[3]='four'\n//root[1]/elemC[1]/elemB[1]='five'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1448995499,"creation_date":1327070683,"answer_id":8943144,"question_id":4746299,"body_markdown":"With [jOOX][1] (a [jquery API][2] port to Java, disclaimer - I work for the company behind the library), you can almost achieve what you want in a single statement:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    // I&#39;m assuming this:\r\n    import static org.joox.JOOX.$;\r\n\r\n    // And then...\r\n    List&lt;String&gt; coolList = $(document).xpath(&quot;//*[not(*)]&quot;).map(\r\n        context -&gt; $(context).xpath() + &quot;=&#39;&quot; + $(context).text() + &quot;&#39;&quot;\r\n    );\r\n\r\nIf document is your sample document:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;root&gt;\r\n        &lt;elemA&gt;one&lt;/elemA&gt;\r\n        &lt;elemA attribute1=&#39;first&#39; attribute2=&#39;second&#39;&gt;two&lt;/elemA&gt;\r\n        &lt;elemB&gt;three&lt;/elemB&gt;\r\n        &lt;elemA&gt;four&lt;/elemA&gt;\r\n        &lt;elemC&gt;\r\n            &lt;elemB&gt;five&lt;/elemB&gt;\r\n        &lt;/elemC&gt;\r\n    &lt;/root&gt;\r\n\r\nThis will produce\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    /root[1]/elemA[1]=&#39;one&#39;\r\n    /root[1]/elemA[2]=&#39;two&#39;\r\n    /root[1]/elemB[1]=&#39;three&#39;\r\n    /root[1]/elemA[3]=&#39;four&#39;\r\n    /root[1]/elemC[1]/elemB[1]=&#39;five&#39;\r\n\r\nBy &quot;almost&quot;, I mean that jOOX does not (yet) support matching/mapping attributes. Hence, your attributes will not produce any output. This will be implemented in the near future, though.\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOX\r\n  [2]: http://jquery.com/\r\n\r\n","title":"Generate/get Xpath from XML in Java","body":"<p>With <a href=\"https://github.com/jOOQ/jOOX\" rel=\"nofollow noreferrer\">jOOX</a> (a <a href=\"http://jquery.com/\" rel=\"nofollow noreferrer\">jquery API</a> port to Java, disclaimer - I work for the company behind the library), you can almost achieve what you want in a single statement:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// I'm assuming this:\nimport static org.joox.JOOX.$;\n\n// And then...\nList&lt;String&gt; coolList = $(document).xpath(\"//*[not(*)]\").map(\n    context -&gt; $(context).xpath() + \"='\" + $(context).text() + \"'\"\n);\n</code></pre>\n\n<p>If document is your sample document:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;root&gt;\n    &lt;elemA&gt;one&lt;/elemA&gt;\n    &lt;elemA attribute1='first' attribute2='second'&gt;two&lt;/elemA&gt;\n    &lt;elemB&gt;three&lt;/elemB&gt;\n    &lt;elemA&gt;four&lt;/elemA&gt;\n    &lt;elemC&gt;\n        &lt;elemB&gt;five&lt;/elemB&gt;\n    &lt;/elemC&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>This will produce</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/root[1]/elemA[1]='one'\n/root[1]/elemA[2]='two'\n/root[1]/elemB[1]='three'\n/root[1]/elemA[3]='four'\n/root[1]/elemC[1]/elemB[1]='five'\n</code></pre>\n\n<p>By \"almost\", I mean that jOOX does not (yet) support matching/mapping attributes. Hence, your attributes will not produce any output. This will be implemented in the near future, though.</p>\n"}],"owner":{"account_id":56519,"reputation":22672,"user_id":169277,"accept_rate":97,"display_name":"ant"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67078,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":4747858,"answer_count":8,"score":43,"last_activity_date":1677152653,"creation_date":1295521369,"question_id":4746299,"body_markdown":"I&#39;m interested in advice/&lt;strike&gt;pseudocode&lt;/strike&gt; code/explanation &lt;strike&gt;rather than actual implementation&lt;/strike&gt;. \r\n\r\n- I&#39;d like to go through XML document, all of its nodes\r\n- Check the node for attribute existence\r\n\r\nCase if node doesn&#39;t have attribute, `get/generate String with value of its xpath`&lt;br/&gt;\r\nCase if node does have attributes, iterate through attribute list and create xpath for each attribute including the node as well.\r\n\r\nEdit\r\n---\r\n\r\nMy reason for doing this is: I&#39;m writing automated tests in Jmeter, so for every request I need to verify that request actually did its job so I&#39;m asserting results by getting nodes values with Xpath.\r\n\r\nWhen the request is small it&#39;s not a problem to create asserts by hand, but for larger ones it&#39;s really a pain.\r\n\r\nI&#39;m looking for Java approach.\r\n\r\nGoal\r\n---\r\n\r\nMy goal is to achieve following from this example XML file :\r\n\r\n    &lt;root&gt;\r\n    \t&lt;elemA&gt;one&lt;/elemA&gt;\r\n    \t&lt;elemA attribute1=&#39;first&#39; attribute2=&#39;second&#39;&gt;two&lt;/elemA&gt;\r\n    \t&lt;elemB&gt;three&lt;/elemB&gt;\r\n    \t&lt;elemA&gt;four&lt;/elemA&gt;\r\n    \t&lt;elemC&gt;\r\n    \t\t&lt;elemB&gt;five&lt;/elemB&gt;\r\n    \t&lt;/elemC&gt;\r\n    &lt;/root&gt;\r\n\r\nto produce the following :\r\n\r\n    //root[1]/elemA[1]=&#39;one&#39;\r\n    //root[1]/elemA[2]=&#39;two&#39;\r\n    //root[1]/elemA[2][@attribute1=&#39;first&#39;]\r\n    //root[1]/elemA[2][@attribute2=&#39;second&#39;]\r\n    //root[1]/elemB[1]=&#39;three&#39;\r\n    //root[1]/elemA[3]=&#39;four&#39;\r\n    //root[1]/elemC[1]/elemB[1]=&#39;five&#39;\r\n\r\nExplained : \r\n\r\n- If node value/text is not null/zero, get xpath , add = &#39;nodevalue&#39; for assertion purpose\r\n- If node has attributes create assert for them too\r\n\r\nUpdate\r\n---\r\n\r\nI found this example, it doesn&#39;t produce the correct results, but I&#39;m looking something like this:\r\n\r\nhttp://www.coderanch.com/how-to/java/SAXCreateXPath\r\n","title":"Generate/get Xpath from XML in Java","body":"<p>I'm interested in advice/<strike>pseudocode</strike> code/explanation <strike>rather than actual implementation</strike>.</p>\n<ul>\n<li>I'd like to go through XML document, all of its nodes</li>\n<li>Check the node for attribute existence</li>\n</ul>\n<p>Case if node doesn't have attribute, <code>get/generate String with value of its xpath</code><br/>\nCase if node does have attributes, iterate through attribute list and create xpath for each attribute including the node as well.</p>\n<h2>Edit</h2>\n<p>My reason for doing this is: I'm writing automated tests in Jmeter, so for every request I need to verify that request actually did its job so I'm asserting results by getting nodes values with Xpath.</p>\n<p>When the request is small it's not a problem to create asserts by hand, but for larger ones it's really a pain.</p>\n<p>I'm looking for Java approach.</p>\n<h2>Goal</h2>\n<p>My goal is to achieve following from this example XML file :</p>\n<pre><code>&lt;root&gt;\n    &lt;elemA&gt;one&lt;/elemA&gt;\n    &lt;elemA attribute1='first' attribute2='second'&gt;two&lt;/elemA&gt;\n    &lt;elemB&gt;three&lt;/elemB&gt;\n    &lt;elemA&gt;four&lt;/elemA&gt;\n    &lt;elemC&gt;\n        &lt;elemB&gt;five&lt;/elemB&gt;\n    &lt;/elemC&gt;\n&lt;/root&gt;\n</code></pre>\n<p>to produce the following :</p>\n<pre><code>//root[1]/elemA[1]='one'\n//root[1]/elemA[2]='two'\n//root[1]/elemA[2][@attribute1='first']\n//root[1]/elemA[2][@attribute2='second']\n//root[1]/elemB[1]='three'\n//root[1]/elemA[3]='four'\n//root[1]/elemC[1]/elemB[1]='five'\n</code></pre>\n<p>Explained :</p>\n<ul>\n<li>If node value/text is not null/zero, get xpath , add = 'nodevalue' for assertion purpose</li>\n<li>If node has attributes create assert for them too</li>\n</ul>\n<h2>Update</h2>\n<p>I found this example, it doesn't produce the correct results, but I'm looking something like this:</p>\n<p><a href=\"http://www.coderanch.com/how-to/java/SAXCreateXPath\" rel=\"nofollow noreferrer\">http://www.coderanch.com/how-to/java/SAXCreateXPath</a></p>\n"},{"tags":["java","file-upload","mime-types"],"comments":[{"owner":{"account_id":801994,"reputation":4036,"user_id":884319,"accept_rate":88,"display_name":"Tim"},"score":0,"creation_date":1652794323,"post_id":67421565,"comment_id":127688801,"body_markdown":"Did you manage to solve this? I am facing the same problem...","body":"Did you manage to solve this? I am facing the same problem..."}],"answers":[{"tags":[],"owner":{"account_id":7423674,"reputation":1358,"user_id":5647005,"accept_rate":62,"display_name":"Piu130"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677151877,"creation_date":1675754387,"answer_id":75369993,"question_id":67421565,"body_markdown":"If you are using RestEasy, you might be affected by [this bug](https://issues.redhat.com/browse/RESTEASY-1255).\r\n\r\nThere is this workaround described by Felix Knecht:\r\n\r\n&gt; I worked around the issue by using a CustomMultipartFormDataReader\r\n&gt; which uses a CustomMultipartFormDataInputImpl to parse the\r\n&gt; entityStream. CustomMultipartFormDataInputImpl::BinaryMessage then\r\n&gt; sets a CustomMimeStreamParser which in turn which offers a\r\n&gt; setNoRecurse() method.","title":"Java - read message/rfc822 from MultipartFormDataInput","body":"<p>If you are using RestEasy, you might be affected by <a href=\"https://issues.redhat.com/browse/RESTEASY-1255\" rel=\"nofollow noreferrer\">this bug</a>.</p>\n<p>There is this workaround described by Felix Knecht:</p>\n<blockquote>\n<p>I worked around the issue by using a CustomMultipartFormDataReader\nwhich uses a CustomMultipartFormDataInputImpl to parse the\nentityStream. CustomMultipartFormDataInputImpl::BinaryMessage then\nsets a CustomMimeStreamParser which in turn which offers a\nsetNoRecurse() method.</p>\n</blockquote>\n"}],"owner":{"account_id":3916995,"reputation":20992,"user_id":3240583,"accept_rate":69,"display_name":"Mina Fawzy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":497,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1677151877,"creation_date":1620315803,"question_id":67421565,"body_markdown":"I have a form for file upload \r\n\r\n    &lt;form id=&quot;mydropzone&quot; class=&quot;dropzone&quot; style=&quot;min-height: 100px&quot; action=&quot;/files/uploadFile&quot;  method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n    \t\t&lt;input type=&quot;hidden&quot; name=&quot;noteId&quot; th:value=&quot;${model.id}&quot; /&gt;\r\n    &lt;/form&gt;\r\n\r\n`MultipartFormDataInput`. comes from `javax.ws.rs.core.GenericType`\r\n\r\n\r\n        @POST\r\n    \t@Consumes(value = MediaType.MULTIPART_FORM_DATA)\r\n    \t@Path(&quot;/uploadFile&quot;)\r\n    \t@AllowPermission(value = Permission.EDIT_NOTE)\r\n    \tpublic Response uploadFileMultipart(MultipartFormDataInput input)\r\n    \t\t\tthrows RequestException, IOException {\r\n    \t\tSystem.out.println(&quot;theInput &quot; + input);\r\n    \t\tFileModel model = convertToFile(input, &quot;file&quot;);\r\n    \t\tLong noteId = getOptionalParam(input, &quot;noteId&quot;);\r\n    \t\tmodel.setNoteId(noteId);\r\n    \t\tUploadFileMutation.UploadFile uploadFile = fileService.uploadFile(model);\r\n    \t\tif(uploadFile != null){\r\n    \t\t\treturn Response.ok(uploadFile).build();\r\n    \t\t}else {\r\n    \t\t\treturn Response.status(Response.Status.BAD_REQUEST).build();\r\n    \t\t}\r\n    \r\n    \t}\r\n\r\nthe problem come from here  `inputPart.getBody(InputStream.class, null)` it always return null\r\n\r\n    private FileModel convertToFile(MultipartFormDataInput input,\r\n    \t\t\tString paramName) throws IOException {\r\n    \t\tMap&lt;String, List&lt;InputPart&gt;&gt; uploadForm = input.getFormDataMap();\r\n    \t\tList&lt;InputPart&gt; inputParts = uploadForm.get(paramName);\r\n    \r\n    \t\tfor (InputPart inputPart : inputParts) {\r\n    \r\n    \t\t\tMultivaluedMap&lt;String, String&gt; header = inputPart.getHeaders();\r\n    \t\t\tString fileName = getFileName(header);\r\n    \r\n    \t\t\t//convert the uploaded file to inputstream\r\n    \t\t\tInputStream inputStream = inputPart.getBody(InputStream.class, null);\r\n    \r\n    \t\t\tbyte[] bytes = IOUtils.toByteArray(inputStream);\r\n    \t\t\tFileModel model = new FileModel();\r\n    \t\t\tmodel.setName(fileName);\r\n    \t\t\tmodel.setData(bytes);\r\n    \t\t\treturn model;\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n\r\nNote this code works just fine with all types except **content-type : message/rfc822**\r\n\r\nany hint on how I can convert `.eml` files  to byte[]\r\n\r\nI tried this method but I got the same error\r\n\r\n    private byte[] readByteArray(InputPart inputPart) throws Exception {\r\n    \t\tField f = inputPart.getClass().getDeclaredField(&quot;bodyPart&quot;);\r\n    \t\tf.setAccessible(true);\r\n    \t\tBodyPart bodyPart = (BodyPart) f.get(inputPart);\r\n    \t\tSingleBody body = (SingleBody)bodyPart.getBody();\r\n    \r\n    \t\tByteArrayOutputStream os = new ByteArrayOutputStream();\r\n    \t\tbody.writeTo(os);\r\n    \t\tbyte[] fileBytes = os.toByteArray();\r\n    \t\treturn fileBytes;\r\n    \t}","title":"Java - read message/rfc822 from MultipartFormDataInput","body":"<p>I have a form for file upload</p>\n<pre><code>&lt;form id=&quot;mydropzone&quot; class=&quot;dropzone&quot; style=&quot;min-height: 100px&quot; action=&quot;/files/uploadFile&quot;  method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;\n        &lt;input type=&quot;hidden&quot; name=&quot;noteId&quot; th:value=&quot;${model.id}&quot; /&gt;\n&lt;/form&gt;\n</code></pre>\n<p><code>MultipartFormDataInput</code>. comes from <code>javax.ws.rs.core.GenericType</code></p>\n<pre><code>    @POST\n    @Consumes(value = MediaType.MULTIPART_FORM_DATA)\n    @Path(&quot;/uploadFile&quot;)\n    @AllowPermission(value = Permission.EDIT_NOTE)\n    public Response uploadFileMultipart(MultipartFormDataInput input)\n            throws RequestException, IOException {\n        System.out.println(&quot;theInput &quot; + input);\n        FileModel model = convertToFile(input, &quot;file&quot;);\n        Long noteId = getOptionalParam(input, &quot;noteId&quot;);\n        model.setNoteId(noteId);\n        UploadFileMutation.UploadFile uploadFile = fileService.uploadFile(model);\n        if(uploadFile != null){\n            return Response.ok(uploadFile).build();\n        }else {\n            return Response.status(Response.Status.BAD_REQUEST).build();\n        }\n\n    }\n</code></pre>\n<p>the problem come from here  <code>inputPart.getBody(InputStream.class, null)</code> it always return null</p>\n<pre><code>private FileModel convertToFile(MultipartFormDataInput input,\n            String paramName) throws IOException {\n        Map&lt;String, List&lt;InputPart&gt;&gt; uploadForm = input.getFormDataMap();\n        List&lt;InputPart&gt; inputParts = uploadForm.get(paramName);\n\n        for (InputPart inputPart : inputParts) {\n\n            MultivaluedMap&lt;String, String&gt; header = inputPart.getHeaders();\n            String fileName = getFileName(header);\n\n            //convert the uploaded file to inputstream\n            InputStream inputStream = inputPart.getBody(InputStream.class, null);\n\n            byte[] bytes = IOUtils.toByteArray(inputStream);\n            FileModel model = new FileModel();\n            model.setName(fileName);\n            model.setData(bytes);\n            return model;\n        }\n        return null;\n    }\n</code></pre>\n<p>Note this code works just fine with all types except <strong>content-type : message/rfc822</strong></p>\n<p>any hint on how I can convert <code>.eml</code> files  to byte[]</p>\n<p>I tried this method but I got the same error</p>\n<pre><code>private byte[] readByteArray(InputPart inputPart) throws Exception {\n        Field f = inputPart.getClass().getDeclaredField(&quot;bodyPart&quot;);\n        f.setAccessible(true);\n        BodyPart bodyPart = (BodyPart) f.get(inputPart);\n        SingleBody body = (SingleBody)bodyPart.getBody();\n\n        ByteArrayOutputStream os = new ByteArrayOutputStream();\n        body.writeTo(os);\n        byte[] fileBytes = os.toByteArray();\n        return fileBytes;\n    }\n</code></pre>\n"},{"tags":["java","rest","imagemagick","jax-rs"],"comments":[{"owner":{"account_id":6027182,"reputation":2632,"user_id":8705446,"display_name":"Aleh Maksimovich"},"score":1,"creation_date":1508006189,"post_id":46747854,"comment_id":80442152,"body_markdown":"Possible duplicate of [HTTP Status 202 - how to provide information about async request completion?](https://stackoverflow.com/questions/14832983/http-status-202-how-to-provide-information-about-async-request-completion)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/14832983/http-status-202-how-to-provide-information-about-async-request-completion\">HTTP Status 202 - how to provide information about async request completion?</a>"}],"answers":[{"tags":[],"owner":{"account_id":10692581,"reputation":196,"user_id":7870920,"display_name":"Karthik Tsaliki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508006653,"creation_date":1508006653,"answer_id":46748125,"question_id":46747854,"body_markdown":"If you are calling from script the call will be async you can handle the Thumbnail URL when you get a response. When you are calling from java program i suggest to run it on a different thread, If the execution is not sequential i.e ( Remaining lines can be executed without getting URL). If url is needed for the remaining section of code you can make one call and wait for the response then execute remaining code.","title":"REST API Single Request - Multiple responses","body":"<p>If you are calling from script the call will be async you can handle the Thumbnail URL when you get a response. When you are calling from java program i suggest to run it on a different thread, If the execution is not sequential i.e ( Remaining lines can be executed without getting URL). If url is needed for the remaining section of code you can make one call and wait for the response then execute remaining code.</p>\n"},{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1508006976,"creation_date":1508006976,"answer_id":46748171,"question_id":46747854,"body_markdown":"No.  In http, one request gets one response.  The client must send a second request to get a second response.","title":"REST API Single Request - Multiple responses","body":"<p>No.  In http, one request gets one response.  The client must send a second request to get a second response.</p>\n"},{"tags":[],"owner":{"account_id":11062892,"reputation":97,"user_id":10635094,"display_name":"Anmol Middha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583742500,"creation_date":1583742500,"answer_id":60596894,"question_id":46747854,"body_markdown":"You need to make different APIs for both scenarios. One for showing file upload status and another for all file conversion and manipulation.\r\n\r\nOn the client side second request must be callback of first request.","title":"REST API Single Request - Multiple responses","body":"<p>You need to make different APIs for both scenarios. One for showing file upload status and another for all file conversion and manipulation.</p>\n\n<p>On the client side second request must be callback of first request.</p>\n"},{"tags":[],"owner":{"account_id":17429626,"reputation":410,"user_id":12633853,"display_name":"Eduardo A EDUARDO Fernandez Di"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1591389512,"creation_date":1591389512,"answer_id":62223762,"question_id":46747854,"body_markdown":"You can use WebSockets for that.","title":"REST API Single Request - Multiple responses","body":"<p>You can use WebSockets for that.</p>\n"},{"tags":[],"owner":{"account_id":11084311,"reputation":1052,"user_id":8138584,"display_name":"Naveen Jain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646370041,"creation_date":1646370041,"answer_id":71346799,"question_id":46747854,"body_markdown":"The best way to handle these kind of scenario is to use Java Reactive (Project Reactor, WebFlux). \r\n\r\n","title":"REST API Single Request - Multiple responses","body":"<p>The best way to handle these kind of scenario is to use Java Reactive (Project Reactor, WebFlux).</p>\n"},{"tags":[],"owner":{"account_id":20406106,"reputation":1,"user_id":14970633,"display_name":"Shivam Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676981063,"creation_date":1676981063,"answer_id":75520280,"question_id":46747854,"body_markdown":"You can return two response using custom middlewares in asp.net (however not recommended).\r\n\r\nReturn response from one middleware and subsequently you can invoke next middleware and return second response from second middleware","title":"REST API Single Request - Multiple responses","body":"<p>You can return two response using custom middlewares in asp.net (however not recommended).</p>\n<p>Return response from one middleware and subsequently you can invoke next middleware and return second response from second middleware</p>\n"},{"tags":[],"owner":{"account_id":1294458,"reputation":907,"user_id":1245887,"accept_rate":22,"display_name":"Sandeep540"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677151744,"creation_date":1677151744,"answer_id":75544204,"question_id":46747854,"body_markdown":"As told by @Naveen , it should be stream and response should be \r\n\r\n**Content-Type: text/event-stream**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HPGs8.png\r\n\r\n\r\nand the response should be Async stream of events","title":"REST API Single Request - Multiple responses","body":"<p>As told by @Naveen , it should be stream and response should be</p>\n<p><strong>Content-Type: text/event-stream</strong></p>\n<p><a href=\"https://i.stack.imgur.com/HPGs8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HPGs8.png\" alt=\"enter image description here\" /></a></p>\n<p>and the response should be Async stream of events</p>\n"}],"owner":{"account_id":1294458,"reputation":907,"user_id":1245887,"accept_rate":22,"display_name":"Sandeep540"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20330,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":7,"score":5,"last_activity_date":1677151744,"creation_date":1508004959,"question_id":46747854,"body_markdown":"I am writing a REST API in JAX-RS 2.0, JDK 8 for the below requirement\r\n\r\n**POST API /server/fileUpload/** (Multipart Form data) where I need to send a Big .AI (Adobe Illustrator) File in this.\r\n\r\nThe Server, takes the file and **return Status 202 (Accepted)**, Acknowledging that file transfer happened Successfully. (From endpoint to Server)\r\n\r\nNow at the Server, I am using Java + Imagemagik to convert .AI File (20-25 MB File) to small JPG Thumbnail, place on a Apache HTTP Server and share the location (like http://happyplace/thumbnail0987.jpg)\r\n\r\nNow the Second Response should come from Server with Status 200 OK and Thumbnail URL\r\n\r\nis it feasible with one REST API? (Async/similar)\r\n\r\nor should I split it to 2 API calls, **Please suggest**","title":"REST API Single Request - Multiple responses","body":"<p>I am writing a REST API in JAX-RS 2.0, JDK 8 for the below requirement</p>\n\n<p><strong>POST API /server/fileUpload/</strong> (Multipart Form data) where I need to send a Big .AI (Adobe Illustrator) File in this.</p>\n\n<p>The Server, takes the file and <strong>return Status 202 (Accepted)</strong>, Acknowledging that file transfer happened Successfully. (From endpoint to Server)</p>\n\n<p>Now at the Server, I am using Java + Imagemagik to convert .AI File (20-25 MB File) to small JPG Thumbnail, place on a Apache HTTP Server and share the location (like <a href=\"http://happyplace/thumbnail0987.jpg\" rel=\"noreferrer\">http://happyplace/thumbnail0987.jpg</a>)</p>\n\n<p>Now the Second Response should come from Server with Status 200 OK and Thumbnail URL</p>\n\n<p>is it feasible with one REST API? (Async/similar)</p>\n\n<p>or should I split it to 2 API calls, <strong>Please suggest</strong></p>\n"},{"tags":["java","android","task","rules","rule-engine"],"answers":[{"tags":[],"owner":{"account_id":10336055,"reputation":128,"user_id":7624125,"display_name":"Ankit Suda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677151288,"creation_date":1677151288,"answer_id":75544137,"question_id":75543590,"body_markdown":"Use work manager, it is recommended way for scheduling and doing long running tasks.\r\n\r\nhttps://developer.android.com/topic/libraries/architecture/workmanager?gclsrc=ds&amp;gclsrc=ds","title":"How to implement periodic data receiving and executing self-defined tasks?","body":"<p>Use work manager, it is recommended way for scheduling and doing long running tasks.</p>\n<p><a href=\"https://developer.android.com/topic/libraries/architecture/workmanager?gclsrc=ds&amp;gclsrc=ds\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/architecture/workmanager?gclsrc=ds&amp;gclsrc=ds</a></p>\n"}],"owner":{"account_id":19385572,"reputation":45,"user_id":14175334,"display_name":"DanLand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75544137,"answer_count":1,"score":0,"last_activity_date":1677151288,"creation_date":1677148444,"question_id":75543590,"body_markdown":"I&#39;m developing an android app which is connected to a BLE device (to receive temperature values) and the OpenWeatherMap API for receiving weather data. \r\n\r\nNow i want to request every 30 minutes the OpenWeatherMap API to receive the current values. Which is the best solution for this scenario? \r\n\r\nAlso i want to check the incoming weather (API) and temperature (BLE) and execute some self-defined task when certain conditions are given. Is a rule engine the way to go for this behavior? \r\n\r\nSo what are the possibilities that i have to implement the wanted behavior?\r\n\r\n1. Execute the receive task of the OpenWeatherMap API every 30 minutes\r\n2. Check and compare the received data (API &amp; BLE)\r\n3. Execute some tasks on defined conditions regarding the received data\r\n\r\nThank you very much in advance","title":"How to implement periodic data receiving and executing self-defined tasks?","body":"<p>I'm developing an android app which is connected to a BLE device (to receive temperature values) and the OpenWeatherMap API for receiving weather data.</p>\n<p>Now i want to request every 30 minutes the OpenWeatherMap API to receive the current values. Which is the best solution for this scenario?</p>\n<p>Also i want to check the incoming weather (API) and temperature (BLE) and execute some self-defined task when certain conditions are given. Is a rule engine the way to go for this behavior?</p>\n<p>So what are the possibilities that i have to implement the wanted behavior?</p>\n<ol>\n<li>Execute the receive task of the OpenWeatherMap API every 30 minutes</li>\n<li>Check and compare the received data (API &amp; BLE)</li>\n<li>Execute some tasks on defined conditions regarding the received data</li>\n</ol>\n<p>Thank you very much in advance</p>\n"},{"tags":["java","oop","dependencies"],"comments":[{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":1,"creation_date":1676600899,"post_id":75479718,"comment_id":133174635,"body_markdown":"no, it is not accurate, println does not depend on equals, it prints boolean value returned by it, but there is no dependency","body":"no, it is not accurate, println does not depend on equals, it prints boolean value returned by it, but there is no dependency"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1676612415,"post_id":75479718,"comment_id":133176108,"body_markdown":"Those really aren&#39;t useful terms to explain what&#39;s going on.","body":"Those really aren&#39;t useful terms to explain what&#39;s going on."},{"owner":{"account_id":27662499,"reputation":1,"user_id":21115020,"display_name":"Mowgli"},"score":0,"creation_date":1676681073,"post_id":75479718,"comment_id":133193005,"body_markdown":"@IłyaBursov What you are saying does make sense and was my initial thought. Now I am realizing that println() does not actually require anything to be included within the parentheses and therefore it is now obvious to me it has no dependencies.","body":"@IłyaBursov What you are saying does make sense and was my initial thought. Now I am realizing that println() does not actually require anything to be included within the parentheses and therefore it is now obvious to me it has no dependencies."},{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":0,"creation_date":1676681599,"post_id":75479718,"comment_id":133193062,"body_markdown":"@Mowgli `println()` and `println(boolean)` are technically two different methods","body":"@Mowgli <code>println()</code> and <code>println(boolean)</code> are technically two different methods"},{"owner":{"account_id":27662499,"reputation":1,"user_id":21115020,"display_name":"Mowgli"},"score":0,"creation_date":1676777857,"post_id":75479718,"comment_id":133204846,"body_markdown":"@IłyaBursov due to method overloading correct?","body":"@IłyaBursov due to method overloading correct?"}],"answers":[{"tags":[],"owner":{"account_id":27662499,"reputation":1,"user_id":21115020,"display_name":"Mowgli"},"down_vote_count":2,"up_vote_count":0,"is_accepted":true,"score":-2,"last_activity_date":1676930821,"creation_date":1676778032,"answer_id":75497840,"question_id":75479718,"body_markdown":"println does not depend on equals, it prints boolean value returned by it, but there is no dependency","title":"Is it safe to say the statement system.out.println(string1.equals(string2)) demonstrates a method and object dependency?","body":"<p>println does not depend on equals, it prints boolean value returned by it, but there is no dependency</p>\n"}],"owner":{"account_id":27662499,"reputation":1,"user_id":21115020,"display_name":"Mowgli"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"accepted_answer_id":75497840,"answer_count":1,"score":-4,"last_activity_date":1677151275,"creation_date":1676600675,"question_id":75479718,"body_markdown":"In the following statements:\r\n\r\n```lang-java\r\nString string1 = new String(&quot;This is a string&quot;);\r\nString string2 = new String(&quot;this is another string&quot;);\r\n\r\nsystem.out.println(string1.equals(string2));\r\n```\r\n\r\nis it safe to say that the `println` method is dependent on the `equals()` method, which is dependent on the String object &quot;string2&quot;?\r\n\r\nMy question is not regarding the output of the code but rather whether or not the explanation of dependencies is accurate.","title":"Is it safe to say the statement system.out.println(string1.equals(string2)) demonstrates a method and object dependency?","body":"<p>In the following statements:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string1 = new String(&quot;This is a string&quot;);\nString string2 = new String(&quot;this is another string&quot;);\n\nsystem.out.println(string1.equals(string2));\n</code></pre>\n<p>is it safe to say that the <code>println</code> method is dependent on the <code>equals()</code> method, which is dependent on the String object &quot;string2&quot;?</p>\n<p>My question is not regarding the output of the code but rather whether or not the explanation of dependencies is accurate.</p>\n"},{"tags":["java","postgresql","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":5896787,"reputation":5103,"user_id":4641680,"accept_rate":55,"display_name":"Reza Saadati"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677151040,"creation_date":1677151040,"answer_id":75544091,"question_id":75543720,"body_markdown":"Simply replace\r\n\r\n```xml\r\n&lt;scope&gt;runtime&lt;/scope&gt;\r\n```\r\nwith\r\n```xml\r\n&lt;version&gt;42.5.4&lt;/version&gt;\r\n```\r\nThat should make it work.","title":"Cannot use PSQLException.class in @ExceptionHandler","body":"<p>Simply replace</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;scope&gt;runtime&lt;/scope&gt;\n</code></pre>\n<p>with</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;version&gt;42.5.4&lt;/version&gt;\n</code></pre>\n<p>That should make it work.</p>\n"}],"owner":{"account_id":26226115,"reputation":27,"user_id":19941289,"display_name":"Reem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75544091,"answer_count":1,"score":1,"last_activity_date":1677151040,"creation_date":1677149034,"question_id":75543720,"body_markdown":"I am getting this error:\r\n\r\n    org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint &quot;ix_auth_username&quot;\r\n      Detail: Key (username, authority)=(mike, ROLE_USER) already exists.\r\n\r\nAnd this is how I try to handle this exception:\r\n```java\r\n@RestControllerAdvice\r\npublic class RestExceptionHandler {\r\n    @ExceptionHandler({IllegalArgumentException.class, PSQLException.class})\r\n    private ResponseEntity&lt;Object&gt; handleIllegalArgumentException(HttpServletRequest request, IllegalArgumentException exception) {\r\n        HttpStatus status;\r\n        switch (exception.getClass().getName()) {\r\n            case &quot;IllegalArgumentException&quot;:\r\n                status = HttpStatus.BAD_REQUEST;\r\n                break;\r\n            default:\r\n                status = HttpStatus.INTERNAL_SERVER_ERROR;\r\n                break;\r\n        }\r\n        ErrorResponse errorResponse = new ErrorResponse(status, LocalDateTime.now(), exception.getMessage());\r\n        return ResponseEntity.badRequest().body(errorResponse);\r\n    }\r\n}\r\n```\r\n\r\nBut IntelliJ gives me this error:\r\n\r\n&gt; Cannot resolve symbol &#39;PSQLException&#39;\r\n\r\nWhy? PostgreSQL works fine for me. This is how I use the dependency:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Cannot use PSQLException.class in @ExceptionHandler","body":"<p>I am getting this error:</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint &quot;ix_auth_username&quot;\n  Detail: Key (username, authority)=(mike, ROLE_USER) already exists.\n</code></pre>\n<p>And this is how I try to handle this exception:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestControllerAdvice\npublic class RestExceptionHandler {\n    @ExceptionHandler({IllegalArgumentException.class, PSQLException.class})\n    private ResponseEntity&lt;Object&gt; handleIllegalArgumentException(HttpServletRequest request, IllegalArgumentException exception) {\n        HttpStatus status;\n        switch (exception.getClass().getName()) {\n            case &quot;IllegalArgumentException&quot;:\n                status = HttpStatus.BAD_REQUEST;\n                break;\n            default:\n                status = HttpStatus.INTERNAL_SERVER_ERROR;\n                break;\n        }\n        ErrorResponse errorResponse = new ErrorResponse(status, LocalDateTime.now(), exception.getMessage());\n        return ResponseEntity.badRequest().body(errorResponse);\n    }\n}\n</code></pre>\n<p>But IntelliJ gives me this error:</p>\n<blockquote>\n<p>Cannot resolve symbol 'PSQLException'</p>\n</blockquote>\n<p>Why? PostgreSQL works fine for me. This is how I use the dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","android","admob","ads"],"comments":[{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1676492547,"post_id":75204726,"comment_id":133150070,"body_markdown":"Did you find the solution finally?","body":"Did you find the solution finally?"}],"answers":[{"tags":[],"owner":{"account_id":23590278,"reputation":31,"user_id":17628164,"display_name":"Karina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675284902,"creation_date":1675284902,"answer_id":75316088,"question_id":75204726,"body_markdown":"I have the same issue, and added \r\n\r\n    @SuppressLint(&quot;VisibleForTests&quot;)\r\n    AdRequest adRequest = new AdRequest.Builder().build();\r\n\r\nIt is NOT a good solution, but it made the warning go away and the adds seem to work.","title":"AdRequest &quot;This method should only be accessed from tests or within private scope&quot;","body":"<p>I have the same issue, and added</p>\n<pre><code>@SuppressLint(&quot;VisibleForTests&quot;)\nAdRequest adRequest = new AdRequest.Builder().build();\n</code></pre>\n<p>It is NOT a good solution, but it made the warning go away and the adds seem to work.</p>\n"},{"tags":[],"owner":{"account_id":305198,"reputation":1797,"user_id":615217,"accept_rate":65,"display_name":"McFarlane"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1677151035,"creation_date":1677151035,"answer_id":75544087,"question_id":75204726,"body_markdown":"This warning disappeared after updating to version `21.5.0` of the Google Ads SDK.\r\n\r\n    implementation &#39;com.google.android.gms:play-services-ads:21.5.0&#39;","title":"AdRequest &quot;This method should only be accessed from tests or within private scope&quot;","body":"<p>This warning disappeared after updating to version <code>21.5.0</code> of the Google Ads SDK.</p>\n<pre><code>implementation 'com.google.android.gms:play-services-ads:21.5.0'\n</code></pre>\n"}],"owner":{"account_id":26979302,"reputation":173,"user_id":20543919,"display_name":"sacacorchos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":951,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":2,"score":11,"last_activity_date":1677151035,"creation_date":1674431408,"question_id":75204726,"body_markdown":"I have seen that recently a new warning has appeared in mi project in the following line:\r\n\r\n\r\n        AdRequest adRequest = new AdRequest.Builder().build();\r\n\r\nThe warning is in &quot;new AdRequest.Builder().build();&quot; \r\n\r\nThis is the warning: \r\n\r\n&gt; This method should only be accessed from tests or within private scope\r\n\r\nI don&#39;t understand why this warning is showing, could it be a bug or something like that?","title":"AdRequest &quot;This method should only be accessed from tests or within private scope&quot;","body":"<p>I have seen that recently a new warning has appeared in mi project in the following line:</p>\n<pre><code>    AdRequest adRequest = new AdRequest.Builder().build();\n</code></pre>\n<p>The warning is in &quot;new AdRequest.Builder().build();&quot;</p>\n<p>This is the warning:</p>\n<blockquote>\n<p>This method should only be accessed from tests or within private scope</p>\n</blockquote>\n<p>I don't understand why this warning is showing, could it be a bug or something like that?</p>\n"},{"tags":["java","multithreading","data-structures","concurrency"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1677149390,"post_id":75543728,"comment_id":133282420,"body_markdown":"First: please use punctuation (at least end your sentences with a `.`). It&#39;s really hard to read your question otherwise. Second: can you describe what you mean by &quot;always returning the previous version&quot;? Is it always returning something other than the latest? Or occasionally because you do put and get mixed? How did you verify that the output is &quot;wrong&quot;? Ideally, post a [mre] that demonstrates the problem clearly. In general it is expected that occasionally you&#39;ll get &quot;old&quot; answers, due to the way network latency and things interact.","body":"First: please use punctuation (at least end your sentences with a <code>.</code>). It&#39;s really hard to read your question otherwise. Second: can you describe what you mean by &quot;always returning the previous version&quot;? Is it always returning something other than the latest? Or occasionally because you do put and get mixed? How did you verify that the output is &quot;wrong&quot;? Ideally, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem clearly. In general it is expected that occasionally you&#39;ll get &quot;old&quot; answers, due to the way network latency and things interact."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1677149418,"post_id":75543728,"comment_id":133282430,"body_markdown":"Why are you not getting the read lock at the start of the public getLatestVersion method?","body":"Why are you not getting the read lock at the start of the public getLatestVersion method?"},{"owner":{"account_id":20128976,"reputation":23,"user_id":14761723,"display_name":"Vamsi Konakanchi"},"score":0,"creation_date":1677149535,"post_id":75543728,"comment_id":133282467,"body_markdown":"@JoachimSauer this is my first post sorry","body":"@JoachimSauer this is my first post sorry"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677149579,"post_id":75543728,"comment_id":133282483,"body_markdown":"@VamsiKonakanchi: that&#39;s fine, no need to apologize. Just be mindful in the future and [edit] your question to add the relevant details you&#39;re asked for.","body":"@VamsiKonakanchi: that&#39;s fine, no need to apologize. Just be mindful in the future and <a href=\"https://stackoverflow.com/posts/75543728/edit\">edit</a> your question to add the relevant details you&#39;re asked for."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1677150753,"post_id":75543728,"comment_id":133282792,"body_markdown":"BTW, your logic in `put` would be a lot simpler if you used `Map.computeIfAbsent`.","body":"BTW, your logic in <code>put</code> would be a lot simpler if you used <code>Map.computeIfAbsent</code>."},{"owner":{"account_id":20128976,"reputation":23,"user_id":14761723,"display_name":"Vamsi Konakanchi"},"score":0,"creation_date":1677150853,"post_id":75543728,"comment_id":133282820,"body_markdown":"I am learning btw please be more eloberate","body":"I am learning btw please be more eloberate"},{"owner":{"account_id":20128976,"reputation":23,"user_id":14761723,"display_name":"Vamsi Konakanchi"},"score":0,"creation_date":1677150899,"post_id":75543728,"comment_id":133282832,"body_markdown":"@5f3bde39-70a2-4df1-afa2-47f61b Yes it is","body":"@5f3bde39-70a2-4df1-afa2-47f61b Yes it is"}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677150957,"creation_date":1677149574,"answer_id":75543804,"question_id":75543728,"body_markdown":"You need to surround all accesses to the map with an acquisition/release of the lock.\r\n\r\nYou don&#39;t do that in the `public synchronized int getLatestVersion` method.\r\n\r\nYou need to acquire the read lock at the start of that method, and release it at the end.\r\n\r\nYou have synchronized that method (and several other methods), but that&#39;s a separate thing from the lock. You have to create a happens-before relationship between the writes and reads, and you only get that - from a ReentrantReadWriteLock - by doing writes while holding the write lock, and reads while holding the read lock.\r\n\r\n-----\r\n\r\nBTW, this logic in `put`:\r\n\r\n            Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt; rowMap = data.get(table);\r\n            if (rowMap == null) {\r\n                rowMap = new ConcurrentHashMap&lt;&gt;();\r\n                data.put(table, rowMap);\r\n            }\r\n            Map&lt;String, Map&lt;Integer, byte[]&gt;&gt; colMap = rowMap.get(row);\r\n            if (colMap == null) {\r\n                colMap = new ConcurrentHashMap&lt;&gt;();\r\n                rowMap.put(row, colMap);\r\n            }\r\n            Map&lt;Integer, byte[]&gt; versionMap = colMap.get(column);\r\n            if (versionMap == null) {\r\n                versionMap = new ConcurrentHashMap&lt;&gt;();\r\n                colMap.put(column, versionMap);\r\n            }\r\n\r\ncan be written a lot more easily as:\r\n\r\n```\r\nMap&lt;Integer, byte[]&gt; versionMap =\r\n    data.computeIfAbsent(table, k -&gt; new ConcurrentHashMap&lt;&gt;())\r\n        .computeIfAbsent(row, k -&gt; new ConcurrentHashMap&lt;&gt;())\r\n        .computeIfAbsent(column, k -&gt; new ConcurrentHashMap&lt;&gt;());\r\n```\r\n\r\nSimilarly for the logic in `get`.","title":"data access in java multithreading","body":"<p>You need to surround all accesses to the map with an acquisition/release of the lock.</p>\n<p>You don't do that in the <code>public synchronized int getLatestVersion</code> method.</p>\n<p>You need to acquire the read lock at the start of that method, and release it at the end.</p>\n<p>You have synchronized that method (and several other methods), but that's a separate thing from the lock. You have to create a happens-before relationship between the writes and reads, and you only get that - from a ReentrantReadWriteLock - by doing writes while holding the write lock, and reads while holding the read lock.</p>\n<hr />\n<p>BTW, this logic in <code>put</code>:</p>\n<pre><code>        Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt; rowMap = data.get(table);\n        if (rowMap == null) {\n            rowMap = new ConcurrentHashMap&lt;&gt;();\n            data.put(table, rowMap);\n        }\n        Map&lt;String, Map&lt;Integer, byte[]&gt;&gt; colMap = rowMap.get(row);\n        if (colMap == null) {\n            colMap = new ConcurrentHashMap&lt;&gt;();\n            rowMap.put(row, colMap);\n        }\n        Map&lt;Integer, byte[]&gt; versionMap = colMap.get(column);\n        if (versionMap == null) {\n            versionMap = new ConcurrentHashMap&lt;&gt;();\n            colMap.put(column, versionMap);\n        }\n</code></pre>\n<p>can be written a lot more easily as:</p>\n<pre><code>Map&lt;Integer, byte[]&gt; versionMap =\n    data.computeIfAbsent(table, k -&gt; new ConcurrentHashMap&lt;&gt;())\n        .computeIfAbsent(row, k -&gt; new ConcurrentHashMap&lt;&gt;())\n        .computeIfAbsent(column, k -&gt; new ConcurrentHashMap&lt;&gt;());\n</code></pre>\n<p>Similarly for the logic in <code>get</code>.</p>\n"}],"owner":{"account_id":20128976,"reputation":23,"user_id":14761723,"display_name":"Vamsi Konakanchi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75543804,"answer_count":1,"score":0,"last_activity_date":1677150957,"creation_date":1677149060,"question_id":75543728,"body_markdown":"I am trying a make my own webserver and in that i have implemented a key value store which is a nested hashmaps and it has versioning support in it. \r\n\r\nEverything works fine but when i hit the server with 25000 requests the get is always returning the previous version of the particular value. \r\n\r\nI am using locks and concurrenthashmap for synchronized access, but i am failing.\r\nHere are the classes for worker and datamanager:\r\n\r\n\r\n```\r\npackage cis5550.kvs;\r\nimport javax.swing.text.html.HTMLDocument;\r\nimport java.util.Map;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantReadWriteLock;\r\n\r\npublic class DataManager {\r\n\r\n    private Map&lt;String, Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt;&gt; data;\r\n    private ReentrantReadWriteLock lock;\r\n\r\n    public DataManager() {\r\n        data = new ConcurrentHashMap&lt;&gt;();\r\n        lock = new ReentrantReadWriteLock();\r\n    }\r\n\r\n    public synchronized String put(String table, String row, String column, byte[] value) {\r\n        try {\r\n            lock.writeLock().lock();\r\n            Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt; rowMap = data.get(table);\r\n            if (rowMap == null) {\r\n                rowMap = new ConcurrentHashMap&lt;&gt;();\r\n                data.put(table, rowMap);\r\n            }\r\n            Map&lt;String, Map&lt;Integer, byte[]&gt;&gt; colMap = rowMap.get(row);\r\n            if (colMap == null) {\r\n                colMap = new ConcurrentHashMap&lt;&gt;();\r\n                rowMap.put(row, colMap);\r\n            }\r\n            Map&lt;Integer, byte[]&gt; versionMap = colMap.get(column);\r\n            if (versionMap == null) {\r\n                versionMap = new ConcurrentHashMap&lt;&gt;();\r\n                colMap.put(column, versionMap);\r\n            }\r\n            int latestVersion = getLatestVersion(versionMap);\r\n            int newVersion = latestVersion + 1;\r\n            versionMap.put(newVersion, value);\r\n            return String.valueOf(newVersion);\r\n        }finally {\r\n            lock.writeLock().unlock();\r\n        }\r\n\r\n    }\r\n\r\n    private synchronized int getLatestVersion(Map&lt;Integer, byte[]&gt; versionMap) {\r\n        return versionMap.keySet().stream().max(Integer::compareTo).orElse(0);\r\n    }\r\n\r\n    public synchronized byte[] get(String table, String row, String column, int version) {\r\n        try {\r\n            lock.readLock().lock();\r\n            Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt; rowMap = data.get(table);\r\n            if (rowMap == null) {\r\n                return null;\r\n            }\r\n            Map&lt;String, Map&lt;Integer, byte[]&gt;&gt; colMap = rowMap.get(row);\r\n            if (colMap == null) {\r\n                return null;\r\n            }\r\n            Map&lt;Integer, byte[]&gt; versionMap = colMap.get(column);\r\n            if (versionMap == null) {\r\n                return null;\r\n            }\r\n            return versionMap.get(version);\r\n        }finally {\r\n            lock.readLock().unlock();\r\n        }\r\n    }\r\n\r\n    public synchronized int getLatestVersion(String table, String row, String column) {\r\n        Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt; rowMap = data.get(table);\r\n        if (rowMap == null) {\r\n            return 0;\r\n        }\r\n        Map&lt;String, Map&lt;Integer, byte[]&gt;&gt; colMap = rowMap.get(row);\r\n        if (colMap == null) {\r\n            return 0;\r\n        }\r\n        Map&lt;Integer, byte[]&gt; versionMap = colMap.get(column);\r\n        if (versionMap == null || versionMap.isEmpty()) {\r\n            return 0;\r\n        }\r\n        return getLatestVersion(versionMap);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\npackage cis5550.kvs;\r\n\r\nimport cis5550.webserver.Server;\r\n\r\n\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.concurrent.*;\r\n\r\npublic class Worker extends cis5550.generic.Worker {\r\n\r\n    private static final int MAX_THREADS = 1000;\r\n\r\n    public static void main(String[] args) {\r\n        if (args.length &lt; 3) {\r\n            System.out.println(&quot;Enter the required &lt;port&gt; &lt;storage directory&gt; &lt;ip:port&gt;&quot;);\r\n            System.exit(1);\r\n        }\r\n        //passing the port as a server\r\n        Server.port(Integer.parseInt(args[0]));\r\n        startPingThread(args[2], args[0], args[1]); // calling start ping thread\r\n\r\n        DataManager dataManager = new DataManager(); // data structure for storing data\r\n        ExecutorService threadPool = Executors.newFixedThreadPool(MAX_THREADS); // thread pool for handling requests\r\n\r\n        Server.put(&quot;/data/:T/:R/:C&quot;, (req, res) -&gt; {\r\n            try {\r\n                String tableName = req.params(&quot;T&quot;);\r\n                String rowName = req.params(&quot;R&quot;);\r\n                String columnName = req.params(&quot;C&quot;);\r\n                if (req.queryParams().contains(&quot;ifcolumn&quot;) &amp;&amp; req.queryParams().contains(&quot;equals&quot;)) {\r\n                    String ifColumnName = req.queryParams(&quot;ifcolumn&quot;);\r\n                    String ifColumnValue = req.queryParams(&quot;equals&quot;);\r\n\r\n                    // Check if the ifcolumn exists and has the value specified in equals\r\n                    int latestVersion = dataManager.getLatestVersion(tableName, rowName, columnName);\r\n                    byte[] byteData = dataManager.get(tableName, rowName, ifColumnName , latestVersion) != null ? dataManager.get(tableName, rowName, ifColumnName , latestVersion) : new byte[0];\r\n                    String data = new String(byteData, StandardCharsets.UTF_8);\r\n                    if (!data.equals(&quot;&quot;) &amp;&amp; data.equals(ifColumnValue)) {\r\n                        // If the ifcolumn exists and has the value specified in equals, execute the PUT operation\r\n                        threadPool.execute(() -&gt; {\r\n                            res.header(&quot;version&quot;, dataManager.put(tableName, rowName, columnName, req.bodyAsBytes()));\r\n                        });\r\n                        return &quot;OK&quot;;\r\n                    } else {\r\n                        // If the ifcolumn does not exist or does not have the value specified in equals, return FAIL\r\n                        return &quot;FAIL&quot;;\r\n                    }\r\n                } else {\r\n                    // If the query parameters are not present, execute the PUT operation\r\n                    threadPool.execute(() -&gt; {\r\n                        res.header(&quot;version&quot;, dataManager.put(tableName, rowName, columnName, req.bodyAsBytes()));\r\n                    });\r\n                    return &quot;OK&quot;;\r\n                }\r\n            } catch (Exception e) {\r\n                res.status(404, &quot;FAIL&quot;);\r\n                return null;\r\n            }\r\n        });\r\n\r\n        Server.get(&quot;/data/:T/:R/:C&quot;, (req, res) -&gt; {\r\n            try {\r\n                String tableName = req.params(&quot;T&quot;);\r\n                String rowName = req.params(&quot;R&quot;);\r\n                String columnName = req.params(&quot;C&quot;);\r\n                if (req.queryParams().contains(&quot;version&quot;)) {\r\n                    int version = Integer.parseInt(req.queryParams(&quot;version&quot;));\r\n                    String data = new String(dataManager.get(tableName, rowName, columnName, version), StandardCharsets.UTF_8);\r\n                    res.header(&quot;version&quot;, req.params(&quot;version&quot;));\r\n                    res.body(data);\r\n                } else {\r\n                    int latestVersion = dataManager.getLatestVersion(tableName, rowName, columnName);\r\n                    String data = new String(dataManager.get(tableName, rowName, columnName, latestVersion), StandardCharsets.UTF_8);\r\n                    res.header(&quot;version&quot;, String.valueOf(latestVersion));\r\n                    res.body(data);\r\n                }\r\n            } catch (Exception e) {\r\n                res.status(404, &quot;FAIL&quot;);\r\n            }\r\n            return null;\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\ni tried locking and using concurrenthashmap \r\nHere is the test cases for this\r\n[Test cases for this code][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/450hG.png","title":"data access in java multithreading","body":"<p>I am trying a make my own webserver and in that i have implemented a key value store which is a nested hashmaps and it has versioning support in it.</p>\n<p>Everything works fine but when i hit the server with 25000 requests the get is always returning the previous version of the particular value.</p>\n<p>I am using locks and concurrenthashmap for synchronized access, but i am failing.\nHere are the classes for worker and datamanager:</p>\n<pre><code>package cis5550.kvs;\nimport javax.swing.text.html.HTMLDocument;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantReadWriteLock;\n\npublic class DataManager {\n\n    private Map&lt;String, Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt;&gt; data;\n    private ReentrantReadWriteLock lock;\n\n    public DataManager() {\n        data = new ConcurrentHashMap&lt;&gt;();\n        lock = new ReentrantReadWriteLock();\n    }\n\n    public synchronized String put(String table, String row, String column, byte[] value) {\n        try {\n            lock.writeLock().lock();\n            Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt; rowMap = data.get(table);\n            if (rowMap == null) {\n                rowMap = new ConcurrentHashMap&lt;&gt;();\n                data.put(table, rowMap);\n            }\n            Map&lt;String, Map&lt;Integer, byte[]&gt;&gt; colMap = rowMap.get(row);\n            if (colMap == null) {\n                colMap = new ConcurrentHashMap&lt;&gt;();\n                rowMap.put(row, colMap);\n            }\n            Map&lt;Integer, byte[]&gt; versionMap = colMap.get(column);\n            if (versionMap == null) {\n                versionMap = new ConcurrentHashMap&lt;&gt;();\n                colMap.put(column, versionMap);\n            }\n            int latestVersion = getLatestVersion(versionMap);\n            int newVersion = latestVersion + 1;\n            versionMap.put(newVersion, value);\n            return String.valueOf(newVersion);\n        }finally {\n            lock.writeLock().unlock();\n        }\n\n    }\n\n    private synchronized int getLatestVersion(Map&lt;Integer, byte[]&gt; versionMap) {\n        return versionMap.keySet().stream().max(Integer::compareTo).orElse(0);\n    }\n\n    public synchronized byte[] get(String table, String row, String column, int version) {\n        try {\n            lock.readLock().lock();\n            Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt; rowMap = data.get(table);\n            if (rowMap == null) {\n                return null;\n            }\n            Map&lt;String, Map&lt;Integer, byte[]&gt;&gt; colMap = rowMap.get(row);\n            if (colMap == null) {\n                return null;\n            }\n            Map&lt;Integer, byte[]&gt; versionMap = colMap.get(column);\n            if (versionMap == null) {\n                return null;\n            }\n            return versionMap.get(version);\n        }finally {\n            lock.readLock().unlock();\n        }\n    }\n\n    public synchronized int getLatestVersion(String table, String row, String column) {\n        Map&lt;String, Map&lt;String, Map&lt;Integer, byte[]&gt;&gt;&gt; rowMap = data.get(table);\n        if (rowMap == null) {\n            return 0;\n        }\n        Map&lt;String, Map&lt;Integer, byte[]&gt;&gt; colMap = rowMap.get(row);\n        if (colMap == null) {\n            return 0;\n        }\n        Map&lt;Integer, byte[]&gt; versionMap = colMap.get(column);\n        if (versionMap == null || versionMap.isEmpty()) {\n            return 0;\n        }\n        return getLatestVersion(versionMap);\n    }\n}\n</code></pre>\n<pre><code>package cis5550.kvs;\n\nimport cis5550.webserver.Server;\n\n\nimport java.nio.charset.StandardCharsets;\nimport java.util.concurrent.*;\n\npublic class Worker extends cis5550.generic.Worker {\n\n    private static final int MAX_THREADS = 1000;\n\n    public static void main(String[] args) {\n        if (args.length &lt; 3) {\n            System.out.println(&quot;Enter the required &lt;port&gt; &lt;storage directory&gt; &lt;ip:port&gt;&quot;);\n            System.exit(1);\n        }\n        //passing the port as a server\n        Server.port(Integer.parseInt(args[0]));\n        startPingThread(args[2], args[0], args[1]); // calling start ping thread\n\n        DataManager dataManager = new DataManager(); // data structure for storing data\n        ExecutorService threadPool = Executors.newFixedThreadPool(MAX_THREADS); // thread pool for handling requests\n\n        Server.put(&quot;/data/:T/:R/:C&quot;, (req, res) -&gt; {\n            try {\n                String tableName = req.params(&quot;T&quot;);\n                String rowName = req.params(&quot;R&quot;);\n                String columnName = req.params(&quot;C&quot;);\n                if (req.queryParams().contains(&quot;ifcolumn&quot;) &amp;&amp; req.queryParams().contains(&quot;equals&quot;)) {\n                    String ifColumnName = req.queryParams(&quot;ifcolumn&quot;);\n                    String ifColumnValue = req.queryParams(&quot;equals&quot;);\n\n                    // Check if the ifcolumn exists and has the value specified in equals\n                    int latestVersion = dataManager.getLatestVersion(tableName, rowName, columnName);\n                    byte[] byteData = dataManager.get(tableName, rowName, ifColumnName , latestVersion) != null ? dataManager.get(tableName, rowName, ifColumnName , latestVersion) : new byte[0];\n                    String data = new String(byteData, StandardCharsets.UTF_8);\n                    if (!data.equals(&quot;&quot;) &amp;&amp; data.equals(ifColumnValue)) {\n                        // If the ifcolumn exists and has the value specified in equals, execute the PUT operation\n                        threadPool.execute(() -&gt; {\n                            res.header(&quot;version&quot;, dataManager.put(tableName, rowName, columnName, req.bodyAsBytes()));\n                        });\n                        return &quot;OK&quot;;\n                    } else {\n                        // If the ifcolumn does not exist or does not have the value specified in equals, return FAIL\n                        return &quot;FAIL&quot;;\n                    }\n                } else {\n                    // If the query parameters are not present, execute the PUT operation\n                    threadPool.execute(() -&gt; {\n                        res.header(&quot;version&quot;, dataManager.put(tableName, rowName, columnName, req.bodyAsBytes()));\n                    });\n                    return &quot;OK&quot;;\n                }\n            } catch (Exception e) {\n                res.status(404, &quot;FAIL&quot;);\n                return null;\n            }\n        });\n\n        Server.get(&quot;/data/:T/:R/:C&quot;, (req, res) -&gt; {\n            try {\n                String tableName = req.params(&quot;T&quot;);\n                String rowName = req.params(&quot;R&quot;);\n                String columnName = req.params(&quot;C&quot;);\n                if (req.queryParams().contains(&quot;version&quot;)) {\n                    int version = Integer.parseInt(req.queryParams(&quot;version&quot;));\n                    String data = new String(dataManager.get(tableName, rowName, columnName, version), StandardCharsets.UTF_8);\n                    res.header(&quot;version&quot;, req.params(&quot;version&quot;));\n                    res.body(data);\n                } else {\n                    int latestVersion = dataManager.getLatestVersion(tableName, rowName, columnName);\n                    String data = new String(dataManager.get(tableName, rowName, columnName, latestVersion), StandardCharsets.UTF_8);\n                    res.header(&quot;version&quot;, String.valueOf(latestVersion));\n                    res.body(data);\n                }\n            } catch (Exception e) {\n                res.status(404, &quot;FAIL&quot;);\n            }\n            return null;\n        });\n    }\n}\n\n</code></pre>\n<p>i tried locking and using concurrenthashmap\nHere is the test cases for this\n<a href=\"https://i.stack.imgur.com/450hG.png\" rel=\"nofollow noreferrer\">Test cases for this code</a></p>\n"},{"tags":["java","axon"],"answers":[{"tags":[],"owner":{"account_id":2552081,"reputation":7045,"user_id":2215649,"display_name":"Steven"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677150886,"creation_date":1677150886,"answer_id":75544054,"question_id":75543610,"body_markdown":"The fact your data is in XML, is not a configuration option of Axon Server.\r\nThis is your connected application, which I assume to be an Axon Framework application who&#39;s serializer is the default serializer.\r\n\r\nAxon Framework defaults to the `XStreamSerializer`, which will serialize to XML. As Axon Server is your event store, it&#39;ll show the serialized events as XML as your application dictates it so.\r\n\r\nIf you want to change this to JSON, you must set your application&#39;s `Serializer` to a `JacksonSerializer` instance. I recommend checking out the [Reference Guide][1] for more specifics on the Framework&#39;s serialization approach and how you can configure this.\r\n\r\nNote that the already stored events cannot be changed from XML to JSON, since you cannot update events (according to the definition of an Event Store).\r\nSo, if you&#39;re referring to a non-production environment, feel free to simply drop your event store.\r\n\r\nIf this is production, you will have to deal with the XML events.\r\nIn that case, you can still switch to JSON, mind you, but the old events cannot be updated. Instead, you will need to define a `Serializer` that (1) defaults to JSON and if it fails, reverts to XML.\r\n\r\n\r\n  [1]: https://docs.axoniq.io/reference-guide/axon-framework/serialization","title":"How to change payloadData format on axon server?","body":"<p>The fact your data is in XML, is not a configuration option of Axon Server.\nThis is your connected application, which I assume to be an Axon Framework application who's serializer is the default serializer.</p>\n<p>Axon Framework defaults to the <code>XStreamSerializer</code>, which will serialize to XML. As Axon Server is your event store, it'll show the serialized events as XML as your application dictates it so.</p>\n<p>If you want to change this to JSON, you must set your application's <code>Serializer</code> to a <code>JacksonSerializer</code> instance. I recommend checking out the <a href=\"https://docs.axoniq.io/reference-guide/axon-framework/serialization\" rel=\"nofollow noreferrer\">Reference Guide</a> for more specifics on the Framework's serialization approach and how you can configure this.</p>\n<p>Note that the already stored events cannot be changed from XML to JSON, since you cannot update events (according to the definition of an Event Store).\nSo, if you're referring to a non-production environment, feel free to simply drop your event store.</p>\n<p>If this is production, you will have to deal with the XML events.\nIn that case, you can still switch to JSON, mind you, but the old events cannot be updated. Instead, you will need to define a <code>Serializer</code> that (1) defaults to JSON and if it fails, reverts to XML.</p>\n"}],"owner":{"account_id":11371334,"reputation":744,"user_id":8336836,"accept_rate":85,"display_name":"Sam Fisher"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75544054,"answer_count":1,"score":0,"last_activity_date":1677150886,"creation_date":1677148555,"question_id":75543610,"body_markdown":"When Axon server is up, we can open browser and go to `http://localhost:8024/#query` \r\nOn that page we can explore all commands and events. When we open event details we can see event fields in xml format. Can it be configured to display these fields in JSON format? How to do this?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1wgpi.png","title":"How to change payloadData format on axon server?","body":"<p>When Axon server is up, we can open browser and go to <code>http://localhost:8024/#query</code>\nOn that page we can explore all commands and events. When we open event details we can see event fields in xml format. Can it be configured to display these fields in JSON format? How to do this?</p>\n<p><a href=\"https://i.stack.imgur.com/1wgpi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1wgpi.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","css","javafx","fxml"],"answers":[{"tags":[],"owner":{"account_id":24861787,"reputation":43,"user_id":18737461,"display_name":"human0id"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677150784,"creation_date":1677150784,"answer_id":75544037,"question_id":75543487,"body_markdown":"Fixed it. Don&#39;t know exactly why, but using only `modalStage.initStyle(StageStyle.TRANSPARENT);`\r\n\r\ninstead of both \r\n\r\n```\r\nmodalStage.initStyle(StageStyle.TRANSPARENT);\r\nmodalStage.initStyle(StageStyle.UNDECORATED);\r\n```\r\n\r\ndid the trick.","title":"Transparent background in JavaFX","body":"<p>Fixed it. Don't know exactly why, but using only <code>modalStage.initStyle(StageStyle.TRANSPARENT);</code></p>\n<p>instead of both</p>\n<pre><code>modalStage.initStyle(StageStyle.TRANSPARENT);\nmodalStage.initStyle(StageStyle.UNDECORATED);\n</code></pre>\n<p>did the trick.</p>\n"}],"owner":{"account_id":24861787,"reputation":43,"user_id":18737461,"display_name":"human0id"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677150784,"creation_date":1677147920,"question_id":75543487,"body_markdown":"So I know this has been discussed in different threads already, but sadly I haven&#39;t found a working solution yet, altough I tried alot, even with chatGPT, which ended in it assuming, there is something wrong with my graphics board, which I dont think so.\r\n\r\nI&#39;m tryin to reach a transparent background of my stage or scene or of the rootpane of that scene. I sadly can not identify the mistake&#39;s source further.\r\nHere is what I&#39;ve got:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;AnchorPane fx:id=&quot;root&quot; prefHeight=&quot;720.0&quot; prefWidth=&quot;480.0&quot; styleClass=&quot;foreground-pane&quot; stylesheets=&quot;@../css/button-styles.css, @../css/window-styles.css, @../css/controller-styles.css&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;fx.controller.CreatorDialogue&quot;&gt;\r\n   &lt;children&gt;\r\n      &lt;ListView fx:id=&quot;itemList&quot; layoutX=&quot;20.0&quot; layoutY=&quot;20.0&quot; prefHeight=&quot;620.0&quot; styleClass=&quot;creator-list-view&quot; AnchorPane.leftAnchor=&quot;20.0&quot; AnchorPane.rightAnchor=&quot;20.0&quot; /&gt;\r\n      &lt;Button fx:id=&quot;cancelButton&quot; layoutX=&quot;160.0&quot; layoutY=&quot;676.0&quot; mnemonicParsing=&quot;false&quot; prefHeight=&quot;30.0&quot; prefWidth=&quot;90.0&quot; styleClass=&quot;creation-right-aligned-button&quot; text=&quot;Cancel&quot;&gt;\r\n         ...\r\n      &lt;/Button&gt;\r\n      &lt;Button fx:id=&quot;createButton&quot; layoutX=&quot;257.0&quot; layoutY=&quot;676.0&quot; mnemonicParsing=&quot;false&quot; prefHeight=&quot;30.0&quot; prefWidth=&quot;90.0&quot; styleClass=&quot;creation-right-aligned-button&quot; text=&quot;Create&quot;&gt;\r\n         ...\r\n      &lt;/Button&gt;\r\n      &lt;Group fx:id=&quot;itemMenu&quot; layoutX=&quot;19.0&quot; layoutY=&quot;526.0&quot;&gt;\r\n         ...\r\n      &lt;/Group&gt;\r\n   &lt;/children&gt;\r\n&lt;/AnchorPane&gt;\r\n\r\n```\r\n\r\nThis is the FXML logic of a scene that I&#39;m loading on a modal stage, that is opened upon an underlying stage, which is set to be &quot;unresponsive&quot; for the time, the modal stage is opened.\r\nThats how I did it:\r\n\r\n```\r\nStage primaryStage = (Stage)((Node)(mouseEvent.getSource())).getScene().getWindow();\r\n\r\nHashMapStage modalStage = new HashMapStage();\r\n\r\nmodalStage.initOwner(primaryStage);\r\nmodalStage.initModality(Modality.APPLICATION_MODAL);\r\nmodalStage.setOpacity(0.9);\r\n\r\nFXMLLoader fxmlLoader = new FXMLLoader(Run.class.getResource(&quot;creator-dialogue.fxml&quot;));\r\nScene creatorDialogue = new Scene(fxmlLoader.load(), 480, 720);\r\ncreatorDialogue.setFill(Color.TRANSPARENT);\r\n\r\nmodalStage.setScene(creatorDialogue);\r\nmodalStage.initStyle(StageStyle.TRANSPARENT);\r\nmodalStage.initStyle(StageStyle.UNDECORATED);\r\nmodalStage.setResizable(false);\r\nmodalStage.centerOnScreen();\r\n\r\nmodalStage.showAndWait();\r\n```\r\n\r\nI want this modal stage to have round corners, which I already reached with the common `-fx-background-radius: 20;` and to make sure aswell `-fx-border-radius: 20;`.\r\nI have set the `-fx-background-color: #737A83`, which is a dark grey. I did this in a custom style class `.foreground-pane` that I assigned to the anchor pane with `fx:id=&quot;root&quot;`.\r\n\r\nAs shown above I also made the stage transparent &amp; undecorated and set the fill to `Color.TRANSPARENT`.\r\n\r\nSomehow I still have a white background &quot;filling&quot; the rounded corners:\r\n[![enter image description here][1]][1]\r\n\r\nI also tried to add another larger anchor pane with `-fx-background-color: transparent` as root pane (as shown [here][2]) and place the current root pane on that but it seems like the root-panes-transparency is always white instead of transparent. That also happens when I change the background color of my current root pane to transparent.\r\n\r\nSo I thought, alright, must have something to do with the stage&#39;s or scene&#39;s transparency, but as shown above I also tried to make these transparent as far as I could with my knowledge.\r\n\r\nMaybe someone here finds the (maybe really stupid) mistake I made. Thanks!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/anxoB.png\r\n  [2]: https://stackoverflow.com/a/31687182/18737461","title":"Transparent background in JavaFX","body":"<p>So I know this has been discussed in different threads already, but sadly I haven't found a working solution yet, altough I tried alot, even with chatGPT, which ended in it assuming, there is something wrong with my graphics board, which I dont think so.</p>\n<p>I'm tryin to reach a transparent background of my stage or scene or of the rootpane of that scene. I sadly can not identify the mistake's source further.\nHere is what I've got:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;AnchorPane fx:id=&quot;root&quot; prefHeight=&quot;720.0&quot; prefWidth=&quot;480.0&quot; styleClass=&quot;foreground-pane&quot; stylesheets=&quot;@../css/button-styles.css, @../css/window-styles.css, @../css/controller-styles.css&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;fx.controller.CreatorDialogue&quot;&gt;\n   &lt;children&gt;\n      &lt;ListView fx:id=&quot;itemList&quot; layoutX=&quot;20.0&quot; layoutY=&quot;20.0&quot; prefHeight=&quot;620.0&quot; styleClass=&quot;creator-list-view&quot; AnchorPane.leftAnchor=&quot;20.0&quot; AnchorPane.rightAnchor=&quot;20.0&quot; /&gt;\n      &lt;Button fx:id=&quot;cancelButton&quot; layoutX=&quot;160.0&quot; layoutY=&quot;676.0&quot; mnemonicParsing=&quot;false&quot; prefHeight=&quot;30.0&quot; prefWidth=&quot;90.0&quot; styleClass=&quot;creation-right-aligned-button&quot; text=&quot;Cancel&quot;&gt;\n         ...\n      &lt;/Button&gt;\n      &lt;Button fx:id=&quot;createButton&quot; layoutX=&quot;257.0&quot; layoutY=&quot;676.0&quot; mnemonicParsing=&quot;false&quot; prefHeight=&quot;30.0&quot; prefWidth=&quot;90.0&quot; styleClass=&quot;creation-right-aligned-button&quot; text=&quot;Create&quot;&gt;\n         ...\n      &lt;/Button&gt;\n      &lt;Group fx:id=&quot;itemMenu&quot; layoutX=&quot;19.0&quot; layoutY=&quot;526.0&quot;&gt;\n         ...\n      &lt;/Group&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n\n</code></pre>\n<p>This is the FXML logic of a scene that I'm loading on a modal stage, that is opened upon an underlying stage, which is set to be &quot;unresponsive&quot; for the time, the modal stage is opened.\nThats how I did it:</p>\n<pre><code>Stage primaryStage = (Stage)((Node)(mouseEvent.getSource())).getScene().getWindow();\n\nHashMapStage modalStage = new HashMapStage();\n\nmodalStage.initOwner(primaryStage);\nmodalStage.initModality(Modality.APPLICATION_MODAL);\nmodalStage.setOpacity(0.9);\n\nFXMLLoader fxmlLoader = new FXMLLoader(Run.class.getResource(&quot;creator-dialogue.fxml&quot;));\nScene creatorDialogue = new Scene(fxmlLoader.load(), 480, 720);\ncreatorDialogue.setFill(Color.TRANSPARENT);\n\nmodalStage.setScene(creatorDialogue);\nmodalStage.initStyle(StageStyle.TRANSPARENT);\nmodalStage.initStyle(StageStyle.UNDECORATED);\nmodalStage.setResizable(false);\nmodalStage.centerOnScreen();\n\nmodalStage.showAndWait();\n</code></pre>\n<p>I want this modal stage to have round corners, which I already reached with the common <code>-fx-background-radius: 20;</code> and to make sure aswell <code>-fx-border-radius: 20;</code>.\nI have set the <code>-fx-background-color: #737A83</code>, which is a dark grey. I did this in a custom style class <code>.foreground-pane</code> that I assigned to the anchor pane with <code>fx:id=&quot;root&quot;</code>.</p>\n<p>As shown above I also made the stage transparent &amp; undecorated and set the fill to <code>Color.TRANSPARENT</code>.</p>\n<p>Somehow I still have a white background &quot;filling&quot; the rounded corners:\n<a href=\"https://i.stack.imgur.com/anxoB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/anxoB.png\" alt=\"enter image description here\" /></a></p>\n<p>I also tried to add another larger anchor pane with <code>-fx-background-color: transparent</code> as root pane (as shown <a href=\"https://stackoverflow.com/a/31687182/18737461\">here</a>) and place the current root pane on that but it seems like the root-panes-transparency is always white instead of transparent. That also happens when I change the background color of my current root pane to transparent.</p>\n<p>So I thought, alright, must have something to do with the stage's or scene's transparency, but as shown above I also tried to make these transparent as far as I could with my knowledge.</p>\n<p>Maybe someone here finds the (maybe really stupid) mistake I made. Thanks!</p>\n"},{"tags":["java","arrays"],"answers":[{"tags":[],"owner":{"account_id":26409459,"reputation":35,"user_id":20058715,"display_name":"BoroBoro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677150622,"creation_date":1677150169,"answer_id":75543918,"question_id":75543216,"body_markdown":"Well, I am polish and can understand names of your methods, but I suggest to write them in english when you are asking something here. Also you asked for arrays and in your code there are 2-dimensions arrays instead.Your code needs a lot of changes too. First of all, if you want to do it similar to this way which is now, you should create method sum_elements_in_table and as argument in that method there should be int[][] type with table as name. Do not create three methods when you have three tables. What if someone would require from you calculating sum of one million arrays, you would then write one million methods? Same with other methods. Read about object programming and change your code. It should be more like that, I added some improvements, but much more could be done, with changing those tables from static, delete some typos from your code, and move printing messages from you methods into main.\r\n\r\n    package some_code_from_stackovrflw;\r\n\r\n    import java.util.Random;\r\n    \r\n    public class Main {\r\n        static int[][] tab_1 = new int[10][10];\r\n        static int[][] tab_2 = new int[10][10];\r\n        static int[][] tab_wyniki = new int[10][10];\r\n        static int[][] tab_1_sum = new int[10][10];\r\n        public static void main(String[] args) {\r\n            wypelnij_tablice(1000, tab_1);\r\n            wypelnij_tablice(1000, tab_2);\r\n            System.out.println(&quot;Tablica 1&quot;);\r\n            wyswietl_tablice(tab_1);\r\n            System.out.println(&quot;Tablica 2&quot;);\r\n            wyswietl_tablice(tab_2);\r\n            tab_wyniki = sumuj_tablice(tab_1, tab_2);\r\n            wyswietl_sume_tabli();\r\n            suma_tabeli_1();\r\n            wys_sum_tab_1();\r\n        }\r\n\r\n    static void wypelnij_tablice(int zakres, int[][] table) {\r\n        Random r = new Random();\r\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                table[wiersz][kolumna] = r.nextInt(zakres);\r\n            }\r\n        }\r\n    }\r\n\r\n    static void wyswietl_tablice(int[][] table) {\r\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                System.out.print(table[wiersz][kolumna] + &quot; , &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n\r\n    static int[][] sumuj_tablice(int[][] table1, int[][] table2) {\r\n    \tint [][] tab_wyniki = new int[10][10];\r\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                tab_wyniki[wiersz][kolumna] = table1[wiersz][kolumna] + table2[wiersz][kolumna];\r\n            }\r\n        }\r\n        return tab_wyniki;\r\n    }\r\n\r\n    static void wyswietl_sume_tabli() {\r\n        System.out.println(&quot;suma tablic&quot;);\r\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                System.out.print(tab_wyniki[wiersz][kolumna] + &quot; , &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n\r\n    static void suma_tabeli_1() {\r\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                tab_1_sum[wiersz][kolumna] = tab_1[wiersz][kolumna];\r\n            }\r\n        }\r\n    }\r\n    \r\n    static void wys_sum_tab_1() {\r\n        System.out.println(&quot;suma tabeli 1&quot;);\r\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                System.out.print(tab_1_sum[wiersz][kolumna] + &quot; , &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n}\r\n\r\nFurther, in this line you literraly copy value from one table to another, and not doing anything with it:\r\n\r\n    tab_1_sum[wiersz][kolumna] = tab_1[wiersz][kolumna];\r\n\r\nIf I understand correclty, you want to do something like this:\r\n\r\n    tab_1_sum = tab_1_sum + tab_1[wiersz][kolumna]\r\n\r\nWhich will require to change type of tab_1_sum to int so it will store sum of values of  all numbers from all cells in tab_1.\r\nAlso I quite dont fully understand what you want to accomplish with that method? \r\n\r\n    wys_sum_tab_1()\r\n\r\n    \r\n\r\n","title":"JAVA: highest sum and number of specific num digits in arrays","body":"<p>Well, I am polish and can understand names of your methods, but I suggest to write them in english when you are asking something here. Also you asked for arrays and in your code there are 2-dimensions arrays instead.Your code needs a lot of changes too. First of all, if you want to do it similar to this way which is now, you should create method sum_elements_in_table and as argument in that method there should be int[][] type with table as name. Do not create three methods when you have three tables. What if someone would require from you calculating sum of one million arrays, you would then write one million methods? Same with other methods. Read about object programming and change your code. It should be more like that, I added some improvements, but much more could be done, with changing those tables from static, delete some typos from your code, and move printing messages from you methods into main.</p>\n<pre><code>package some_code_from_stackovrflw;\n\nimport java.util.Random;\n\npublic class Main {\n    static int[][] tab_1 = new int[10][10];\n    static int[][] tab_2 = new int[10][10];\n    static int[][] tab_wyniki = new int[10][10];\n    static int[][] tab_1_sum = new int[10][10];\n    public static void main(String[] args) {\n        wypelnij_tablice(1000, tab_1);\n        wypelnij_tablice(1000, tab_2);\n        System.out.println(&quot;Tablica 1&quot;);\n        wyswietl_tablice(tab_1);\n        System.out.println(&quot;Tablica 2&quot;);\n        wyswietl_tablice(tab_2);\n        tab_wyniki = sumuj_tablice(tab_1, tab_2);\n        wyswietl_sume_tabli();\n        suma_tabeli_1();\n        wys_sum_tab_1();\n    }\n\nstatic void wypelnij_tablice(int zakres, int[][] table) {\n    Random r = new Random();\n    for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n        for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n            table[wiersz][kolumna] = r.nextInt(zakres);\n        }\n    }\n}\n\nstatic void wyswietl_tablice(int[][] table) {\n    for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n        for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n            System.out.print(table[wiersz][kolumna] + &quot; , &quot;);\n        }\n        System.out.println();\n    }\n}\n\nstatic int[][] sumuj_tablice(int[][] table1, int[][] table2) {\n    int [][] tab_wyniki = new int[10][10];\n    for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n        for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n            tab_wyniki[wiersz][kolumna] = table1[wiersz][kolumna] + table2[wiersz][kolumna];\n        }\n    }\n    return tab_wyniki;\n}\n\nstatic void wyswietl_sume_tabli() {\n    System.out.println(&quot;suma tablic&quot;);\n    for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n        for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n            System.out.print(tab_wyniki[wiersz][kolumna] + &quot; , &quot;);\n        }\n        System.out.println();\n    }\n}\n\nstatic void suma_tabeli_1() {\n    for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n        for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n            tab_1_sum[wiersz][kolumna] = tab_1[wiersz][kolumna];\n        }\n    }\n}\n\nstatic void wys_sum_tab_1() {\n    System.out.println(&quot;suma tabeli 1&quot;);\n    for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n        for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n            System.out.print(tab_1_sum[wiersz][kolumna] + &quot; , &quot;);\n        }\n        System.out.println();\n    }\n}\n</code></pre>\n<p>}</p>\n<p>Further, in this line you literraly copy value from one table to another, and not doing anything with it:</p>\n<pre><code>tab_1_sum[wiersz][kolumna] = tab_1[wiersz][kolumna];\n</code></pre>\n<p>If I understand correclty, you want to do something like this:</p>\n<pre><code>tab_1_sum = tab_1_sum + tab_1[wiersz][kolumna]\n</code></pre>\n<p>Which will require to change type of tab_1_sum to int so it will store sum of values of  all numbers from all cells in tab_1.\nAlso I quite dont fully understand what you want to accomplish with that method?</p>\n<pre><code>wys_sum_tab_1()\n</code></pre>\n"}],"owner":{"account_id":27858907,"reputation":1,"user_id":21271838,"display_name":"Fatal1ty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677150622,"creation_date":1677146415,"question_id":75543216,"body_markdown":"I want to draw two arrays, check in which array has the **highest sum of all numbers** and **write how many one-, two- and three-digit numbers are in each array**. Drawing arrays is working but i can&#39;t get the later parts of this working.\r\n\r\nAny help is greatly appreciated.\r\n\r\n    import java.util.Random;\r\n    \r\n    public class Main {\r\n        static int[][] tab_1 = new int[10][10];\r\n        static int[][] tab_2 = new int[10][10];\r\n        static int[][] tab_wyniki = new int[10][10];\r\n        static int[][] tab_1_sum = new int[10][10];\r\n        public static void main(String[] args) {\r\n            wypelnij_tablice(1000);\r\n            wyswietl_tablice_1();\r\n            wyswietl_tablice_2();\r\n            sumuj_tablice();\r\n            wyswietl_sume_tabli();\r\n            suma_tabeli_1();\r\n            wys_sum_tab_1();\r\n        }\r\n    \r\n        static void wypelnij_tablice(int zakres) {\r\n            Random r = new Random();\r\n            for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n                for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                    tab_1[wiersz][kolumna] = r.nextInt(zakres);\r\n                    tab_2[wiersz][kolumna] = r.nextInt(zakres);\r\n                }\r\n            }\r\n        }\r\n    \r\n        static void wyswietl_tablice_1() {\r\n            System.out.println(&quot;tablica pierwsza&quot;);\r\n            for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n                for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                    System.out.print(tab_1[wiersz][kolumna] + &quot; , &quot;);\r\n                }\r\n                System.out.println();\r\n            }\r\n        }\r\n    \r\n        static void wyswietl_tablice_2() {\r\n            System.out.println(&quot;tablica druga&quot;);\r\n            for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n                for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                    System.out.print(tab_2[wiersz][kolumna] + &quot; , &quot;);\r\n                }\r\n                System.out.println();\r\n            }\r\n        }\r\n    \r\n        static void sumuj_tablice() {\r\n            for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n                for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                    tab_wyniki[wiersz][kolumna] = tab_1[wiersz][kolumna] + tab_2[wiersz][kolumna];\r\n                }\r\n            }\r\n        }\r\n    \r\n        static void wyswietl_sume_tabli() {\r\n            System.out.println(&quot;suma tablic&quot;);\r\n            for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n                for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                    System.out.print(tab_wyniki[wiersz][kolumna] + &quot; , &quot;);\r\n                }\r\n                System.out.println();\r\n            }\r\n        }\r\n    \r\n        static void suma_tabeli_1() {\r\n            for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n                for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                    tab_1_sum[wiersz][kolumna] = tab_1[wiersz][kolumna];\r\n                }\r\n            }\r\n        }\r\n        \r\n        static void wys_sum_tab_1() {\r\n            System.out.println(&quot;suma tabeli 1&quot;);\r\n            for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\r\n                for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\r\n                    System.out.print(tab_1_sum[wiersz][kolumna] + &quot; , &quot;);\r\n                }\r\n                System.out.println();\r\n            }\r\n        }\r\n    }","title":"JAVA: highest sum and number of specific num digits in arrays","body":"<p>I want to draw two arrays, check in which array has the <strong>highest sum of all numbers</strong> and <strong>write how many one-, two- and three-digit numbers are in each array</strong>. Drawing arrays is working but i can't get the later parts of this working.</p>\n<p>Any help is greatly appreciated.</p>\n<pre><code>import java.util.Random;\n\npublic class Main {\n    static int[][] tab_1 = new int[10][10];\n    static int[][] tab_2 = new int[10][10];\n    static int[][] tab_wyniki = new int[10][10];\n    static int[][] tab_1_sum = new int[10][10];\n    public static void main(String[] args) {\n        wypelnij_tablice(1000);\n        wyswietl_tablice_1();\n        wyswietl_tablice_2();\n        sumuj_tablice();\n        wyswietl_sume_tabli();\n        suma_tabeli_1();\n        wys_sum_tab_1();\n    }\n\n    static void wypelnij_tablice(int zakres) {\n        Random r = new Random();\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n                tab_1[wiersz][kolumna] = r.nextInt(zakres);\n                tab_2[wiersz][kolumna] = r.nextInt(zakres);\n            }\n        }\n    }\n\n    static void wyswietl_tablice_1() {\n        System.out.println(&quot;tablica pierwsza&quot;);\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n                System.out.print(tab_1[wiersz][kolumna] + &quot; , &quot;);\n            }\n            System.out.println();\n        }\n    }\n\n    static void wyswietl_tablice_2() {\n        System.out.println(&quot;tablica druga&quot;);\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n                System.out.print(tab_2[wiersz][kolumna] + &quot; , &quot;);\n            }\n            System.out.println();\n        }\n    }\n\n    static void sumuj_tablice() {\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n                tab_wyniki[wiersz][kolumna] = tab_1[wiersz][kolumna] + tab_2[wiersz][kolumna];\n            }\n        }\n    }\n\n    static void wyswietl_sume_tabli() {\n        System.out.println(&quot;suma tablic&quot;);\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n                System.out.print(tab_wyniki[wiersz][kolumna] + &quot; , &quot;);\n            }\n            System.out.println();\n        }\n    }\n\n    static void suma_tabeli_1() {\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n                tab_1_sum[wiersz][kolumna] = tab_1[wiersz][kolumna];\n            }\n        }\n    }\n    \n    static void wys_sum_tab_1() {\n        System.out.println(&quot;suma tabeli 1&quot;);\n        for (int wiersz = 0; wiersz &lt; 10; wiersz++) {\n            for (int kolumna = 0; kolumna &lt; 10; kolumna++) {\n                System.out.print(tab_1_sum[wiersz][kolumna] + &quot; , &quot;);\n            }\n            System.out.println();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","reactjs","backend","sanity"],"owner":{"account_id":27859534,"reputation":1,"user_id":21272377,"display_name":"Odai kassem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677149971,"creation_date":1677149824,"question_id":75543851,"body_markdown":"i have this error everytime i run sanity init command \r\nError: GET-request to https://api.sanity.io/v1/auth/providers resulted in HTTP 403 Forbidden\r\n    at onResponse (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/lib/_chunks/loadEnv-75c46c66.js:1666:13)\r\n    at applyMiddleware (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:60:15)\r\n    at onResponse (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:133:22)\r\n    at C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:115:55\r\n    at callback (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:423:46)\r\n    at C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:486:14\r\n    at DestroyableTransform.&lt;anonymous&gt; (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:260:13)\r\n    at Object.onceWrapper (node:events:627:28)\r\n    at DestroyableTransform.emit (node:events:525:35)\r\n    at endReadableNT (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/readable-stream/lib/_stream_readable.js:1010:12)\r\n\r\ni tried snaity login from my browser, but i have the same problem","title":"npx sanity Error while fetching and login?","body":"<p>i have this error everytime i run sanity init command\nError: GET-request to <a href=\"https://api.sanity.io/v1/auth/providers\" rel=\"nofollow noreferrer\">https://api.sanity.io/v1/auth/providers</a> resulted in HTTP 403 Forbidden\nat onResponse (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/lib/_chunks/loadEnv-75c46c66.js:1666:13)\nat applyMiddleware (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:60:15)\nat onResponse (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:133:22)\nat C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:115:55\nat callback (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:423:46)\nat C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:486:14\nat DestroyableTransform. (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/get-it/dist/index.cjs:260:13)\nat Object.onceWrapper (node:events:627:28)\nat DestroyableTransform.emit (node:events:525:35)\nat endReadableNT (C:/Users/Odai/AppData/Roaming/npm/node_modules/@sanity/cli/node_modules/readable-stream/lib/_stream_readable.js:1010:12)</p>\n<p>i tried snaity login from my browser, but i have the same problem</p>\n"},{"tags":["java","rest","jersey","documentation","openapi"],"owner":{"account_id":20955267,"reputation":63,"user_id":15395946,"display_name":"emerick biron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677149814,"creation_date":1677149814,"question_id":75543847,"body_markdown":"I&#39;m developing a REST API in Java using the Jersey framework (server). I would like to know how to generate a basic OpenAPI documentation (no need for description or anything else) from my Java code. Could someone please tell me how to do this?\r\n\r\nThank you in advance.","title":"How to Generate OpenApi doc from java code","body":"<p>I'm developing a REST API in Java using the Jersey framework (server). I would like to know how to generate a basic OpenAPI documentation (no need for description or anything else) from my Java code. Could someone please tell me how to do this?</p>\n<p>Thank you in advance.</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","hibernate-mapping"],"owner":{"account_id":15937106,"reputation":1426,"user_id":11499971,"display_name":"Rushikesh Sabde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677149762,"creation_date":1677149762,"question_id":75543838,"body_markdown":"A SQL table has a column of type XMLType. Having structure as below:-\r\n\r\n    &lt;values&gt;\r\n     &lt;value lang=&quot;EN&quot;&gt;Mozilla loran lipsum&lt;/value&gt;\r\n     &lt;value lang=&quot;ZH_CN&quot;&gt;Bugzilla 绕过安全限制安全漏洞&lt;/value&gt;\r\n     &lt;value lang=&quot;ZH_TW&quot;&gt;Bugzilla 操控安全性避開弱點&lt;/value&gt;\r\n     &lt;value lang=&quot;KO&quot;&gt;Mozilla 조작 보안 우회 취약점 &lt;/value&gt;\r\n     &lt;value lang=&quot;JA&quot;&gt;Bugzilla 操作におけるセキュリティ回避の脆弱性 &lt;/value&gt;\r\n    &lt;/values&gt;\r\n    \r\nI am trying to map this column with JPA entity field.\r\n\r\nI want this XML data in HashMap as `Map&lt;String, String&gt;` and the entry will be \r\n`Key :- Language`\r\n`Value :- Text`\r\n\r\nIs there any way to transform the XMLType into HashMap with above requirement.\r\n\r\n ","title":"Oracle XMLType mapping with entity object in Spring Data JPA","body":"<p>A SQL table has a column of type XMLType. Having structure as below:-</p>\n<pre><code>&lt;values&gt;\n &lt;value lang=&quot;EN&quot;&gt;Mozilla loran lipsum&lt;/value&gt;\n &lt;value lang=&quot;ZH_CN&quot;&gt;Bugzilla 绕过安全限制安全漏洞&lt;/value&gt;\n &lt;value lang=&quot;ZH_TW&quot;&gt;Bugzilla 操控安全性避開弱點&lt;/value&gt;\n &lt;value lang=&quot;KO&quot;&gt;Mozilla 조작 보안 우회 취약점 &lt;/value&gt;\n &lt;value lang=&quot;JA&quot;&gt;Bugzilla 操作におけるセキュリティ回避の脆弱性 &lt;/value&gt;\n&lt;/values&gt;\n</code></pre>\n<p>I am trying to map this column with JPA entity field.</p>\n<p>I want this XML data in HashMap as <code>Map&lt;String, String&gt;</code> and the entry will be\n<code>Key :- Language</code>\n<code>Value :- Text</code></p>\n<p>Is there any way to transform the XMLType into HashMap with above requirement.</p>\n"},{"tags":["java","collision"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1677148755,"post_id":75543553,"comment_id":133282223,"body_markdown":"Are you normalizing a vector of length zero?","body":"Are you normalizing a vector of length zero?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1677148804,"post_id":75543553,"comment_id":133282236,"body_markdown":"Nobody is going to hunt through your entire git repo for a problem, sorry. Please give us a [mcve] to replicate the problem, in the question.","body":"Nobody is going to hunt through your entire git repo for a problem, sorry. Please give us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to replicate the problem, in the question."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677149264,"creation_date":1677149264,"answer_id":75543758,"question_id":75543553,"body_markdown":"According to the [language specification](https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.4):\r\n\r\n&gt; A floating-point operation that has no unique mathematically defined result produces NaN.\r\n&gt;\r\n&gt; All numeric operations with NaN as an operand produce NaN as a result.\r\n\r\nSo, the NaN is appearing either because you are creating a Vector instance with at least one of its coordinates set to NaN; or you are doing a mathematical operation with no unique mathematically defined result.\r\n\r\nAs you mention that this is in a method for normalizing the Vector, this is almost certainly arising from the division, where the denominator is zero.\r\n\r\nThis means that either you&#39;re calculating the denominator incorrectly, or the vector&#39;s length really is zero.","title":"NaN value being stored to custom &quot;Vector&quot; class","body":"<p>According to the <a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.4\" rel=\"nofollow noreferrer\">language specification</a>:</p>\n<blockquote>\n<p>A floating-point operation that has no unique mathematically defined result produces NaN.</p>\n<p>All numeric operations with NaN as an operand produce NaN as a result.</p>\n</blockquote>\n<p>So, the NaN is appearing either because you are creating a Vector instance with at least one of its coordinates set to NaN; or you are doing a mathematical operation with no unique mathematically defined result.</p>\n<p>As you mention that this is in a method for normalizing the Vector, this is almost certainly arising from the division, where the denominator is zero.</p>\n<p>This means that either you're calculating the denominator incorrectly, or the vector's length really is zero.</p>\n"}],"owner":{"account_id":25403186,"reputation":3,"user_id":19212321,"display_name":"Dylan Hetzel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1677156782,"accepted_answer_id":75543758,"answer_count":1,"score":-1,"last_activity_date":1677149264,"creation_date":1677148274,"question_id":75543553,"body_markdown":"I&#39;m working on a simple platformer for a game jam, but I didn&#39;t want to bother using a game engine. What the class &quot;Vector&quot; (I don&#39;t think that&#39;s the accurate name for what I&#39;m using it for, but whatever) is supposed to do is provide a way to group together to double values, &#39;x&#39; and &#39;y&#39;, into a single data type and also provide useful calculations, namely &quot;normalize&quot;, which takes an input of a vector (in effect a point) and returns a new vector of length one, going in the same direction from the origin. The link to the git hub repository is this: [Metroidvania-Template.git](https://github.com/DJPretzel-bit64/Metroidvania-Template.git)\r\n\r\nI tried to make it so that when a collision happened, it would find the difference between the last vector and the current one, normalize said vector, and add the normalized vector to the current vector until it no longer collides.","title":"NaN value being stored to custom &quot;Vector&quot; class","body":"<p>I'm working on a simple platformer for a game jam, but I didn't want to bother using a game engine. What the class &quot;Vector&quot; (I don't think that's the accurate name for what I'm using it for, but whatever) is supposed to do is provide a way to group together to double values, 'x' and 'y', into a single data type and also provide useful calculations, namely &quot;normalize&quot;, which takes an input of a vector (in effect a point) and returns a new vector of length one, going in the same direction from the origin. The link to the git hub repository is this: <a href=\"https://github.com/DJPretzel-bit64/Metroidvania-Template.git\" rel=\"nofollow noreferrer\">Metroidvania-Template.git</a></p>\n<p>I tried to make it so that when a collision happened, it would find the difference between the last vector and the current one, normalize said vector, and add the normalized vector to the current vector until it no longer collides.</p>\n"},{"tags":["java","apache-camel","wiremock","wiremock-standalone"],"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677148922,"creation_date":1677148922,"question_id":75543697,"body_markdown":"I am testing with Wiremock and Apache Camel, while status code is different(2xx and 404), even Wiremock is configured to return nothing (no `withBody()` stubbing), the body I get from \r\n\r\n    exchange.getIn().getBody(String.class)\r\n\r\nand \r\n\r\n    exchange.getProperties().get(HTTP_RESPONSE_TEXT)\r\n\r\nare different.\r\n\r\nI have this log lines:\r\n\r\n    logger.debugf(&quot;Status code for endpoint %d: %d, response body: %s, response text(Camel header): %s&quot;, endpointId, statusCode, exchange.getIn().getBody(String.class), properties.get(HTTP_RESPONSE_TEXT));\r\n\r\nAnd, when it&#39;s 2xx:\r\n\r\n    Status code for endpoint 0: 200, response body: , response text(Camel header): null\r\n\r\nWhen it&#39;s 404:\r\n\r\n    Status code for endpoint 1: 404, response body: null, response text(Camel header): null\r\n\r\n\r\nSo, `properties.get(HTTP_RESPONSE_TEXT)` seems always consistent(always null). \r\n\r\nWhy the difference? So I always use `properties.get(HTTP_RESPONSE_TEXT)` right?\r\n\r\nWiremock stubbing is like:\r\n\r\n```java\r\n        server.stubFor(post(urlPathMatching(&quot;/operator/.*/endpoint/[0-9]*&quot;))\r\n                .withRequestBody(allFieldsPattern())\r\n                .willReturn(\r\n                        aResponse()\r\n                                .withStatus(200)\r\n                                .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                ));\r\n        server.stubFor(delete(urlPathMatching(&quot;/operator/.*/endpoint/[0-9]*&quot;))\r\n                .willReturn(\r\n                        aResponse()\r\n                                .withStatus(200)\r\n                                .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                ));\r\n```\r\n\r\nWhen I use java 11 `HttpClient`, it&#39;s always empty string. So I don&#39;t know which is standard. \r\n\r\nWiremock `2.33.2`, `jre8-standalone`. ","title":"Apache Camel: exchange.getIn().getBody(String.class) and properties.get(HTTP_RESPONSE_TEXT) inconsistent between 2xx and 404","body":"<p>I am testing with Wiremock and Apache Camel, while status code is different(2xx and 404), even Wiremock is configured to return nothing (no <code>withBody()</code> stubbing), the body I get from</p>\n<pre><code>exchange.getIn().getBody(String.class)\n</code></pre>\n<p>and</p>\n<pre><code>exchange.getProperties().get(HTTP_RESPONSE_TEXT)\n</code></pre>\n<p>are different.</p>\n<p>I have this log lines:</p>\n<pre><code>logger.debugf(&quot;Status code for endpoint %d: %d, response body: %s, response text(Camel header): %s&quot;, endpointId, statusCode, exchange.getIn().getBody(String.class), properties.get(HTTP_RESPONSE_TEXT));\n</code></pre>\n<p>And, when it's 2xx:</p>\n<pre><code>Status code for endpoint 0: 200, response body: , response text(Camel header): null\n</code></pre>\n<p>When it's 404:</p>\n<pre><code>Status code for endpoint 1: 404, response body: null, response text(Camel header): null\n</code></pre>\n<p>So, <code>properties.get(HTTP_RESPONSE_TEXT)</code> seems always consistent(always null).</p>\n<p>Why the difference? So I always use <code>properties.get(HTTP_RESPONSE_TEXT)</code> right?</p>\n<p>Wiremock stubbing is like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        server.stubFor(post(urlPathMatching(&quot;/operator/.*/endpoint/[0-9]*&quot;))\n                .withRequestBody(allFieldsPattern())\n                .willReturn(\n                        aResponse()\n                                .withStatus(200)\n                                .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                ));\n        server.stubFor(delete(urlPathMatching(&quot;/operator/.*/endpoint/[0-9]*&quot;))\n                .willReturn(\n                        aResponse()\n                                .withStatus(200)\n                                .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                ));\n</code></pre>\n<p>When I use java 11 <code>HttpClient</code>, it's always empty string. So I don't know which is standard.</p>\n<p>Wiremock <code>2.33.2</code>, <code>jre8-standalone</code>.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1677148077,"post_id":75543473,"comment_id":133282042,"body_markdown":"You could get the fields and compare values using reflection, but for just 2 fields, i doubt it&#39;s worth it.","body":"You could get the fields and compare values using reflection, but for just 2 fields, i doubt it&#39;s worth it."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1677148145,"post_id":75543473,"comment_id":133282061,"body_markdown":"It could be done using reflection, but that&#39;s almost always bad advice. Another more useful way would be a functional approach. But if this is just about those 2 fields, any other way than what you already do would result in more code and certainly more complexity of your code.","body":"It could be done using reflection, but that&#39;s almost always bad advice. Another more useful way would be a functional approach. But if this is just about those 2 fields, any other way than what you already do would result in more code and certainly more complexity of your code."},{"owner":{"account_id":25190184,"reputation":163,"user_id":19030462,"display_name":"Sebastian"},"score":0,"creation_date":1677148645,"post_id":75543473,"comment_id":133282187,"body_markdown":"If you want to use the &quot;equals check&quot; multiple times, defining a method for it, for example a isAccount method on UpdateAccount, that does the same checks as you, but internally, may be a good idea, or do you just want to know other ways like reflection? :)","body":"If you want to use the &quot;equals check&quot; multiple times, defining a method for it, for example a isAccount method on UpdateAccount, that does the same checks as you, but internally, may be a good idea, or do you just want to know other ways like reflection? :)"}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677148459,"creation_date":1677148459,"answer_id":75543593,"question_id":75543473,"body_markdown":"You can extract the logic into a common method like this:\r\n\r\n    private static &lt;T&gt; void checkDifference(Set&lt;String&gt; diff, String name, T v1, T v2) {\r\n      if (!Objects.equals(v1, v2)) {\r\n        diff.add(name);\r\n      }\r\n    }\r\n\r\nAnd then change your main method to look like this:\r\n\r\n    Set&lt;String&gt; diff = new HashSet&lt;&gt;();\r\n    checkDifference(diff, &quot;name&quot;, updateAccount.getName(), account.getName());\r\n    checkDifference(diff, &quot;section&quot;, updateAccount.getSection(), account.getSection());\r\n    System.out.println(diff);\r\n\r\nYou can further abstract this away by storing the combination of name, a `Function&lt;UpdateAccount, T&gt;` and a `Function&lt;Account, T&gt;` and looping over them, but it&#39;s not clear that this would actually help.","title":"Shorten equal checks","body":"<p>You can extract the logic into a common method like this:</p>\n<pre><code>private static &lt;T&gt; void checkDifference(Set&lt;String&gt; diff, String name, T v1, T v2) {\n  if (!Objects.equals(v1, v2)) {\n    diff.add(name);\n  }\n}\n</code></pre>\n<p>And then change your main method to look like this:</p>\n<pre><code>Set&lt;String&gt; diff = new HashSet&lt;&gt;();\ncheckDifference(diff, &quot;name&quot;, updateAccount.getName(), account.getName());\ncheckDifference(diff, &quot;section&quot;, updateAccount.getSection(), account.getSection());\nSystem.out.println(diff);\n</code></pre>\n<p>You can further abstract this away by storing the combination of name, a <code>Function&lt;UpdateAccount, T&gt;</code> and a <code>Function&lt;Account, T&gt;</code> and looping over them, but it's not clear that this would actually help.</p>\n"},{"tags":[],"owner":{"account_id":27858344,"reputation":46,"user_id":21271391,"display_name":"Ch Saireddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677148610,"creation_date":1677148610,"answer_id":75543619,"question_id":75543473,"body_markdown":"One way to simplify the if-else equal part would be to use reflection to compare the fields of the two objects. However, this approach is less efficient and may not be suitable for large objects or critical performance scenarios. Here is an example of how to use reflection to compare fields:\r\n\r\n\r\n    public static Set&lt;String&gt; compareObjects(Object object1, Object object2) throws IllegalAccessException {\r\n        Set&lt;String&gt; diff = new HashSet&lt;&gt;();\r\n        Field[] fields = object1.getClass().getDeclaredFields();\r\n        for (Field field : fields) {\r\n            field.setAccessible(true);\r\n            Object value1 = field.get(object1);\r\n            Object value2 = field.get(object2);\r\n            if (value1 == null &amp;&amp; value2 != null || value1 != null &amp;&amp; !value1.equals(value2)) {\r\n                diff.add(field.getName());\r\n            }\r\n        }\r\n        return diff;\r\n    }\r\nYou can call this method from your main method like this:\r\n\r\n\r\n    Account account = new Account(&quot;123&quot;, &quot;sectionA&quot;, &quot;p1&quot;, &quot;test&quot;, &quot;TestUser1&quot;);\r\n    UpdateAccount updateAccount = new UpdateAccount(&quot;sectionA&quot;, &quot;p11&quot;);\r\n    Set&lt;String&gt; diff = compareObjects(account, updateAccount);\r\n    System.out.println(diff);\r\n\r\nThis will output [name], indicating that the name field of the Account object is different from the name field of the UpdateAccount object.","title":"Shorten equal checks","body":"<p>One way to simplify the if-else equal part would be to use reflection to compare the fields of the two objects. However, this approach is less efficient and may not be suitable for large objects or critical performance scenarios. Here is an example of how to use reflection to compare fields:</p>\n<pre><code>public static Set&lt;String&gt; compareObjects(Object object1, Object object2) throws IllegalAccessException {\n    Set&lt;String&gt; diff = new HashSet&lt;&gt;();\n    Field[] fields = object1.getClass().getDeclaredFields();\n    for (Field field : fields) {\n        field.setAccessible(true);\n        Object value1 = field.get(object1);\n        Object value2 = field.get(object2);\n        if (value1 == null &amp;&amp; value2 != null || value1 != null &amp;&amp; !value1.equals(value2)) {\n            diff.add(field.getName());\n        }\n    }\n    return diff;\n}\n</code></pre>\n<p>You can call this method from your main method like this:</p>\n<pre><code>Account account = new Account(&quot;123&quot;, &quot;sectionA&quot;, &quot;p1&quot;, &quot;test&quot;, &quot;TestUser1&quot;);\nUpdateAccount updateAccount = new UpdateAccount(&quot;sectionA&quot;, &quot;p11&quot;);\nSet&lt;String&gt; diff = compareObjects(account, updateAccount);\nSystem.out.println(diff);\n</code></pre>\n<p>This will output [name], indicating that the name field of the Account object is different from the name field of the UpdateAccount object.</p>\n"},{"tags":[],"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677148787,"creation_date":1677148787,"answer_id":75543660,"question_id":75543473,"body_markdown":"To avoid reflection, use `Function`s to retrieve the values from the class:\r\n\r\n```\r\n  //this stores method references to the getters \r\n  //as well as the fieldname string that you\r\n  // want to output in your Set\r\n  @AllArgsConstructor(staticName = &quot;of&quot;)\r\n  private static class DiffField {\r\n    String fieldname;\r\n    Function&lt;Account, String&gt; accountGetter;\r\n    Function&lt;UpdateAccount, String&gt; updateAccountGetter;\r\n  }\r\n\r\n  public class App {\r\n    public static void main(String[] args){\r\n      Account account = new Account(&quot;123&quot;, &quot;sectionA&quot;, &quot;p1&quot;, &quot;test&quot;, &quot;TestUser1&quot;);\r\n      UpdateAccount updateAccount = new UpdateAccount(&quot;sectionA&quot;, &quot;p11&quot;);\r\n\r\n      //create a list of things to compare, specifying the getter references\r\n      List&lt;DiffField&gt; diffFieldList = List.of(\r\n          DiffField.of(&quot;name&quot;, Account::getName, UpdateAccount::getName),\r\n          DiffField.of(&quot;section&quot;, Account::getSection, UpdateAccount::getSection)\r\n      );\r\n\r\n      Set&lt;String&gt; diff = new HashSet&lt;&gt;();\r\n      //loop over the things you want to diff-check\r\n      for(DiffField df:diffFieldList) {\r\n        String valAccount = df.accountGetter.apply(account);\r\n        String valUpdateAccount = df.updateAccountGetter.apply(updateAccount);\r\n        if(!valAccount.equals(valUpdateAccount)){ //TODO: NPE?\r\n          diff.add(df.fieldname);\r\n        }\r\n      }\r\n      System.out.println(diff);\r\n    }\r\n  }\r\n```\r\n\r\nBut as I already mentioned in the comment above, your current code is much shorter and more precise. This only starts to pay off when you have several more fields to check, and you still have to list these fields manually in the `List&lt;DiffField&gt;`. It only saves you the many `if`s.","title":"Shorten equal checks","body":"<p>To avoid reflection, use <code>Function</code>s to retrieve the values from the class:</p>\n<pre><code>  //this stores method references to the getters \n  //as well as the fieldname string that you\n  // want to output in your Set\n  @AllArgsConstructor(staticName = &quot;of&quot;)\n  private static class DiffField {\n    String fieldname;\n    Function&lt;Account, String&gt; accountGetter;\n    Function&lt;UpdateAccount, String&gt; updateAccountGetter;\n  }\n\n  public class App {\n    public static void main(String[] args){\n      Account account = new Account(&quot;123&quot;, &quot;sectionA&quot;, &quot;p1&quot;, &quot;test&quot;, &quot;TestUser1&quot;);\n      UpdateAccount updateAccount = new UpdateAccount(&quot;sectionA&quot;, &quot;p11&quot;);\n\n      //create a list of things to compare, specifying the getter references\n      List&lt;DiffField&gt; diffFieldList = List.of(\n          DiffField.of(&quot;name&quot;, Account::getName, UpdateAccount::getName),\n          DiffField.of(&quot;section&quot;, Account::getSection, UpdateAccount::getSection)\n      );\n\n      Set&lt;String&gt; diff = new HashSet&lt;&gt;();\n      //loop over the things you want to diff-check\n      for(DiffField df:diffFieldList) {\n        String valAccount = df.accountGetter.apply(account);\n        String valUpdateAccount = df.updateAccountGetter.apply(updateAccount);\n        if(!valAccount.equals(valUpdateAccount)){ //TODO: NPE?\n          diff.add(df.fieldname);\n        }\n      }\n      System.out.println(diff);\n    }\n  }\n</code></pre>\n<p>But as I already mentioned in the comment above, your current code is much shorter and more precise. This only starts to pay off when you have several more fields to check, and you still have to list these fields manually in the <code>List&lt;DiffField&gt;</code>. It only saves you the many <code>if</code>s.</p>\n"}],"owner":{"account_id":4146531,"reputation":451,"user_id":3400076,"display_name":"xxestter"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1677148787,"creation_date":1677147858,"question_id":75543473,"body_markdown":"\r\n\r\n\r\n\r\n\r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class Account {\r\n        private String id;\r\n        private String section;\r\n        private String name;\r\n        private String type;\r\n        private String username;\r\n    }\r\n\r\n\r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class UpdateAccount {\r\n        private String section;\r\n        private String name;\r\n    }\r\n\r\nI have 2 classes called `UpdateAccount` and `Account` and in my App class, I want to find out if there is any difference between the Account object and the UpdateAccount object. Here is my App class code. \r\nIs there any other ways to code the if-else equal part?\r\n\r\n    public class App {\r\n        public static void main(String[] args){\r\n            Account account = new Account(&quot;123&quot;, &quot;sectionA&quot;, &quot;p1&quot;, &quot;test&quot;, &quot;TestUser1&quot;);\r\n            UpdateAccount updateAccount = new UpdateAccount(&quot;sectionA&quot;, &quot;p11&quot;);\r\n    \r\n            Set&lt;String&gt; diff = new HashSet&lt;&gt;();\r\n            if(!updateAccount.getName().equals(account.getName())){\r\n                diff.add(&quot;name&quot;);\r\n            }\r\n            if(!updateAccount.getSection().equals(account.getSection())){\r\n                diff.add(&quot;section&quot;);\r\n            }\r\n            System.out.println(diff);\r\n        }\r\n    }\r\n\r\n","title":"Shorten equal checks","body":"<pre><code>@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Account {\n    private String id;\n    private String section;\n    private String name;\n    private String type;\n    private String username;\n}\n\n\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class UpdateAccount {\n    private String section;\n    private String name;\n}\n</code></pre>\n<p>I have 2 classes called <code>UpdateAccount</code> and <code>Account</code> and in my App class, I want to find out if there is any difference between the Account object and the UpdateAccount object. Here is my App class code.\nIs there any other ways to code the if-else equal part?</p>\n<pre><code>public class App {\n    public static void main(String[] args){\n        Account account = new Account(&quot;123&quot;, &quot;sectionA&quot;, &quot;p1&quot;, &quot;test&quot;, &quot;TestUser1&quot;);\n        UpdateAccount updateAccount = new UpdateAccount(&quot;sectionA&quot;, &quot;p11&quot;);\n\n        Set&lt;String&gt; diff = new HashSet&lt;&gt;();\n        if(!updateAccount.getName().equals(account.getName())){\n            diff.add(&quot;name&quot;);\n        }\n        if(!updateAccount.getSection().equals(account.getSection())){\n            diff.add(&quot;section&quot;);\n        }\n        System.out.println(diff);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","view","firebird"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1677137234,"post_id":75538029,"comment_id":133279199,"body_markdown":"What do you mean with &quot;bank&quot; do you mean a database?","body":"What do you mean with &quot;bank&quot; do you mean a database?"},{"owner":{"account_id":27814456,"reputation":21,"user_id":21236173,"display_name":"cesar pereira"},"score":0,"creation_date":1677147367,"post_id":75538029,"comment_id":133281824,"body_markdown":"would be the DBMS","body":"would be the DBMS"}],"owner":{"account_id":27814456,"reputation":21,"user_id":21236173,"display_name":"cesar pereira"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677148774,"creation_date":1677099132,"question_id":75538029,"body_markdown":"I&#39;m not able to bring my data into another table, which comes from another connection.\r\nI really need help on this, and my lack of experience bringing this is really getting to me. In my current scenario I have a connection with a DBMS that would be on the same network with a specific data base for it, I will call it data base A.\r\nin this data base A, the DBMS would be Fire bird and in this data base I have a View that consumes several columns and tables of this data base A,\r\nin this same API with connection to several DBMS, I have a Postgres data base that I will give an example of data base B, in it, I have an entity created\r\nto receive the View data from data base A,\r\n\r\n    Application.Properties\r\n\r\n\r\n       **DBMS A**\r\n    `\r\n      alu.datasource.username:SYSDBA\r\n      alu.datasource.password:masterkey       \r\n        alu.datasource.jdbcUrl:jdbc:firebirdsql:192.011.2.55/3050:C:db/test.fdb\r\n      alu.datasource.hikari.connection-timeout = 20000\r\n      alu.datasource.hicari.minimum-idle = 10\r\n      alu.datasource.hicari.maximum-pool-size = 40 \r\n      alu.datasource.hicari.idle-timeout = 10000\r\n      alu.datasource.hicari.auto-commit = true\r\n\r\n    **DBMS B**\r\n\r\n    `integracao.jpa.hibernate.ddl-auto=update\r\n     integracao.datasource.jdbcUrl=jdbc:postgresql://localhost/Integracao           \r\n     integracao.datasource.username=postgres\r\n     integracao.datasource.password=1234\r\n     integracao.datasource.hikari.connection-timeout = 20000\r\n     integracao.datasource.hicari.minimum-idle = 10\r\n     integracao.datasource.hicari.maximum-pool-size = 40 \r\n     integracao.datasource.hicari.idle-timeout = 10000\r\n     integracao.datasource.hicari.auto-commit = true\r\n   `\r\n\r\n\r\n\r\n\r\n     **Database DBMS configuration A**\r\n\r\n    `package com.XXXXXXXX.XXXXXXXXXXXXXXX.config.alu;\r\n     import javax.sql.DataSource;\r\n     import org.springframework.beans.factory.annotation.Qualifier;\r\n     import org.springframework.boot.context.properties.ConfigurationProperties;\r\n     import org.springframework.boot.jdbc.DataSourceBuilder;\r\n     import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;\r\n     import org.springframework.context.annotation.Bean;\r\n     import org.springframework.context.annotation.Configuration;\r\n     import org.springframework.context.annotation.Primary;\r\n     import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n     import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\n     import com.XXXXXXX.XXXXXXXXXXX.repository.alu.XXXXXRepository;\r\n     import java.util.HashMap;\r\n      import java.util.Map;\r\n\r\n     @Configuration\r\n     @EnableJpaRepositories(\r\n\t\tbasePackageClasses = XXXXXXRepository.class,\r\n\t\tentityManagerFactoryRef = &quot;aluEntityManager&quot;)\r\n     public class AluDbConfig {\r\n\r\n\t@Bean\r\n\t@ConfigurationProperties(prefix = &quot;alu.datasource&quot;)\r\n\tpublic DataSource aluDataSource() {\r\n\t\treturn  DataSourceBuilder.create().build();\r\n\t}\r\n\r\n\t@Bean\r\n\t@Qualifier\r\n\tpublic LocalContainerEntityManagerFactoryBean aluEntityManager(\r\n\t\t\tEntityManagerFactoryBuilder builder) {\r\n\t\tMap&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();\r\n\t\tproperties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);\r\n\t\treturn builder\r\n\t\t\t\t.dataSource(aluDataSource())\r\n\t\t\t\t.packages(&quot;com.XXXXXXXXXXX.XXXXXXXXXXXXXXXXX.entity.alu&quot;)\r\n\t\t\t\t.properties(properties)\r\n\t\t\t\t.build();\r\n\t}\r\n\r\n       }\r\n\r\n      `\r\n\r\n\r\n      **Database DBMS configuration B**\r\n\r\n      `package com.XXXXXXXX.XXXXXXXXXXXXXXX.config.alu;\r\n      import javax.sql.DataSource;\r\n      import org.springframework.beans.factory.annotation.Qualifier;\r\n      import org.springframework.boot.context.properties.ConfigurationProperties;\r\n      import org.springframework.boot.jdbc.DataSourceBuilder;\r\n      import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;\r\n      import org.springframework.context.annotation.Bean;\r\n      import org.springframework.context.annotation.Configuration;\r\n      import org.springframework.context.annotation.Primary;\r\n      import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n      import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\n      import com.xxxxxxx.xxxxxxxxxxxxxxx.repository.integracao.IntegracaoRepository;\r\n      import java.util.HashMap;\r\n      import java.util.Map;\r\n\r\n\r\n      @Configuration\r\n      @EnableJpaRepositories(\r\n\t\tbasePackageClasses = IntegracaoRepository.class,\r\n\t\tentityManagerFactoryRef = &quot;integracaoEntityManager&quot;)\r\n      public class IntegracaoDbConfig {\r\n\r\n\t@Bean\r\n\t@ConfigurationProperties(prefix = &quot;integracao.datasource&quot;)\r\n\t@Primary\r\n\tpublic DataSource canDataSource() {\r\n\t\treturn  DataSourceBuilder.create().build();\r\n\t}\r\n\r\n\t@Bean\r\n\t@Qualifier\r\n\t@Primary\r\n\tpublic LocalContainerEntityManagerFactoryBean integracaoEntityManager(\r\n\t\t\tEntityManagerFactoryBuilder builder) {\r\n\t\tMap&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();\r\n\t\tproperties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);\r\n\t\treturn builder\r\n\t\t\t\t.dataSource(canDataSource())\r\n\t\t\t\t.packages(&quot;com.XXXXXXXX.XXXXXXXXXXXXXXXXXXXXX.entity.integracao&quot;)\r\n\t\t\t\t.properties(properties)\r\n\t\t\t\t.build();\r\n\t}\r\n      }\r\n        `\r\n    **Controller**\r\n\r\n    `package com.xxxxxxxx.xxxxxxxxxxxx.controller;\r\n     import java.util.ArrayList;\r\n     import java.util.List;\r\n     import com.xxxxxxxx.xxxxxxxxxxxxxx.repository.alu.xxxxxxxxRepository;\r\n     import org.springframework.beans.factory.annotation.Autowired;\r\n     import org.springframework.web.bind.annotation.*;\r\n    import com.xxxxxxxxxx.xxxxxxxxxxxxxxxx.entity.integracao.Integracao;\r\n\r\n\r\n    @RestController\r\n    @RequestMapping(value = &quot;/projecao&quot;)\r\n    public class IntegracaoController {\r\n\t\r\n\t@Autowired\r\n\tprivate xxxxxxxxRepository repository; =&gt; (Note: I had to hide the name, but this repository would    be from DBMS A)\r\n\r\n\t@GetMapping\r\n\t@ResponseBody\r\n\tpublic List&lt;Integracao&gt; convert(List&lt;Object&gt; object) {\r\n\t\tList&lt;Integracao&gt; list = new ArrayList&lt;Integracao&gt;();\r\n\t\tfor(final Object o : object) {\r\n\t\t\tObject[] obj = (Object[]) o;\r\n\t\t\tlist.add(new Integracao(obj[0].toString(),obj[1].toString()));\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n\r\n     }`\r\n\r\n    **DBMS A Entity**\r\n\r\n    `package com.xxxxxx.xxxxxxxxxxxxx.entity.alu;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    import java.math.BigDecimal;\r\n\r\n    @Entity\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Data\r\n    public class data base A {\r\n        @Id\r\n\tprivate Long id;\r\n\r\n\t@Column(name = &quot;Caixa&quot;)\r\n\tprivate String caixa;\r\n\r\n\t@Column(name = &quot;Embalador&quot;)\r\n\tprivate String embalador;\r\n\r\n\t@Column(name = &quot;Operador&quot;)\r\n\tprivate String operador;\r\n\r\n\t@Column(name = &quot;Empacotador&quot;)\r\n\tprivate String empacotador;\r\n\r\n\t@Column(name = &quot;VALORFINAL&quot;)\r\n\tprivate BigDecimal valor;\r\n\r\n\t@Column(name = &quot;VALOR&quot;)\r\n\tprivate BigDecimal valor;\r\n\r\n\t@Column(name = &quot;TAXA&quot;)\r\n\tprivate BigDecimal taxa;\r\n\r\n\t@Column(name = &quot;VENCIMENTO&quot;)\r\n\tprivate Integer vencimento;\r\n\r\n\t@Column(name = &quot;Estoquista&quot;)\r\n\tprivate String estoquista;\r\n\r\n\t@Column(name = &quot;Repositor&quot;)\r\n\tprivate Integer repositor;\r\n\r\n\t@Column(name = &quot;Peixeiro&quot;)\r\n\tprivate String peixeiro;\r\n\r\n\t@Column(name = &quot;MATRIZ&quot;)\r\n\tprivate String matriz;\r\n\r\n\t@Column(name = &quot;Auxiliar&quot;)\r\n\tprivate String auxiliar;\r\n\r\n\t@Column(name = &quot;TIPO&quot;)\r\n\tprivate Integer tipo;\r\n\r\n\tpublic Integracao(String toString, String toString1) {\r\n\t}\r\n      }`\r\n\r\n     **DBMS B Entity**\r\n\r\n     `package com.xxxxxxx.xxxxxxxxxxxxxx.entity.integracao;\r\n\r\n      import lombok.AllArgsConstructor;\r\n      import lombok.Data;\r\n      import lombok.NoArgsConstructor;\r\n      import javax.persistence.Column;\r\n      import javax.persistence.Entity;\r\n      import javax.persistence.Id;\r\n      import javax.persistence.Table;\r\n      import java.math.BigDecimal;\r\n\r\n\r\n     @Entity\r\n     @NoArgsConstructor\r\n     @AllArgsConstructor\r\n     @Data\r\n     @Table(name = &quot;integracao&quot; )\r\n     public class Integracao {\r\n\r\n\t@Id\r\n\tprivate Long id;\r\n\r\n\t@Column(name = &quot;Caixa&quot;)\r\n\tprivate String caixa;\r\n\r\n\t@Column(name = &quot;Embalador&quot;)\r\n\tprivate String embalador;\r\n\r\n\t@Column(name = &quot;Operador&quot;)\r\n\tprivate String operador;\r\n\r\n\t@Column(name = &quot;Empacotador&quot;)\r\n\tprivate String empacotador;\r\n\r\n\t@Column(name = &quot;VALORFINAL&quot;)\r\n\tprivate BigDecimal valor;\r\n\r\n\t@Column(name = &quot;VALOR&quot;)\r\n\tprivate BigDecimal valor;\r\n\r\n\t@Column(name = &quot;TAXA&quot;)\r\n\tprivate BigDecimal taxa;\r\n\r\n\t@Column(name = &quot;VENCIMENTO&quot;)\r\n\tprivate Integer vencimento;\r\n\r\n\t@Column(name = &quot;Estoquista&quot;)\r\n\tprivate String estoquista;\r\n\r\n\t@Column(name = &quot;Repositor&quot;)\r\n\tprivate Integer repositor;\r\n\r\n\t@Column(name = &quot;Peixeiro&quot;)\r\n\tprivate String peixeiro;\r\n\r\n\t@Column(name = &quot;MATRIZ&quot;)\r\n\tprivate String matriz;\r\n\r\n\t@Column(name = &quot;Auxiliar&quot;)\r\n\tprivate String auxiliar;\r\n\r\n\t@Column(name = &quot;TIPO&quot;)\r\n\tprivate Integer tipo;\r\n\r\n\tpublic Integracao(String toString, String toString1) {\r\n\t}\r\n     }`\r\n \r\n    **DBMS A repository**\r\n\r\n    `package com.xxxxxxxx.xxxxxxxxxxxxxx.repository.alu;\r\n     import org.springframework.data.jpa.repository.JpaRepository;\r\n     import com.xxxxxxxxxxx.xxxxxxxxxxxxx.entity.alu.data base A;\r\n     import org.springframework.data.jpa.repository.Query;\r\n     import org.springframework.stereotype.Repository;\r\n     import java.util.List;\r\n\r\n     @Repository\r\n     public interface xxxxxxxRepository extends JpaRepository&lt;xxxxxxx,Long&gt;{\r\n     @Query(nativeQuery = true, value =&quot;SELECT &quot; +\r\n            &quot;    EMBALADOR,&quot; +\r\n            &quot;    OPERADOR,&quot; +\r\n            &quot;    EMPACOTADOR,&quot; +\r\n            &quot;    VALORFINAL,&quot; +\r\n            &quot;    VALOR,&quot; +\r\n            &quot;    VALOR,&quot; +\r\n            &quot;    TAXA,&quot; +\r\n            &quot;    VENCIMENTO,&quot; +\r\n            &quot;    ESTOQUISTA,&quot; +\r\n            &quot;    REPOSITOR,&quot; +\r\n            &quot;    PEIXEIRO,&quot; +\r\n            &quot;    MATRIZ,&quot; +\r\n            &quot;    AUXILIAR,&quot; +\r\n            &quot;    TIPO FROM SPR_SUPERMECADO&quot; )  (Note * SPR_SUPERMECADO Would be the View that I want to   store in the table of data base B)\r\n    List&lt;Object&gt;projection();\r\n\r\n    }\r\n   `\r\n    **DBMS B repository**\r\n\r\n    `package com.xxxxxxx.xxxxxxxxxxx.repository.integracao;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import com.xxxxxxxxxx.xxxxxxxxxxxxx.entity.integracao.Integracao;\r\n\r\n    @Repository\r\n    public interface IntegracaoRepository extends JpaRepository&lt;Integracao,Long&gt;{\r\n\r\n   }\r\n   ``\r\n\r\n    \r\n\r\n\r\n   \r\n\r\n    stack trace output:\r\n\r\n\r\n    `2023-02-22 16:57:29.969 ERROR 5640 --- [nio-8081-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    :        Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: No primary or single unique constructor found for interface java.util.List] with root cause\r\n\r\n     java.lang.IllegalStateException: No primary or single unique constructor found for interface      java.util.List\r\n\tat org.springframework.beans.BeanUtils.getResolvableConstructor(BeanUtils.java:267) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat    org.springframework.web.method.annotation.ModelAttributeMethodProcessor.createAttribute(ModelAttributeMetho  dProcessor.java:219) ~[spring-web-5.3.24.jar:5.3.24]\r\n\tat   org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.createAttribute(ServletModelAttributeMethodProcessor.java:85) ~[spring-webmvc-5.3.24.jar:5.3.24]\r\n\r\n\r\n \r\n\r\n\r\n I followed this tutorial, but I was not \r\n\r\n https://stackoverflow.com/questions/67937954/convert-resultset-to-model-in-spring-boot-2\r\n\r\n\r\n ","title":"How to store a View from an API with multiple databases","body":"<p>I'm not able to bring my data into another table, which comes from another connection.\nI really need help on this, and my lack of experience bringing this is really getting to me. In my current scenario I have a connection with a DBMS that would be on the same network with a specific data base for it, I will call it data base A.\nin this data base A, the DBMS would be Fire bird and in this data base I have a View that consumes several columns and tables of this data base A,\nin this same API with connection to several DBMS, I have a Postgres data base that I will give an example of data base B, in it, I have an entity created\nto receive the View data from data base A,</p>\n<pre><code>Application.Properties\n\n\n   **DBMS A**\n`\n  alu.datasource.username:SYSDBA\n  alu.datasource.password:masterkey       \n    alu.datasource.jdbcUrl:jdbc:firebirdsql:192.011.2.55/3050:C:db/test.fdb\n  alu.datasource.hikari.connection-timeout = 20000\n  alu.datasource.hicari.minimum-idle = 10\n  alu.datasource.hicari.maximum-pool-size = 40 \n  alu.datasource.hicari.idle-timeout = 10000\n  alu.datasource.hicari.auto-commit = true\n\n**DBMS B**\n\n`integracao.jpa.hibernate.ddl-auto=update\n integracao.datasource.jdbcUrl=jdbc:postgresql://localhost/Integracao           \n integracao.datasource.username=postgres\n integracao.datasource.password=1234\n integracao.datasource.hikari.connection-timeout = 20000\n integracao.datasource.hicari.minimum-idle = 10\n integracao.datasource.hicari.maximum-pool-size = 40 \n integracao.datasource.hicari.idle-timeout = 10000\n integracao.datasource.hicari.auto-commit = true\n</code></pre>\n<p>`</p>\n<pre><code> **Database DBMS configuration A**\n\n`package com.XXXXXXXX.XXXXXXXXXXXXXXX.config.alu;\n import javax.sql.DataSource;\n import org.springframework.beans.factory.annotation.Qualifier;\n import org.springframework.boot.context.properties.ConfigurationProperties;\n import org.springframework.boot.jdbc.DataSourceBuilder;\n import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;\n import org.springframework.context.annotation.Bean;\n import org.springframework.context.annotation.Configuration;\n import org.springframework.context.annotation.Primary;\n import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\n import com.XXXXXXX.XXXXXXXXXXX.repository.alu.XXXXXRepository;\n import java.util.HashMap;\n  import java.util.Map;\n\n @Configuration\n @EnableJpaRepositories(\n    basePackageClasses = XXXXXXRepository.class,\n    entityManagerFactoryRef = &quot;aluEntityManager&quot;)\n public class AluDbConfig {\n\n@Bean\n@ConfigurationProperties(prefix = &quot;alu.datasource&quot;)\npublic DataSource aluDataSource() {\n    return  DataSourceBuilder.create().build();\n}\n\n@Bean\n@Qualifier\npublic LocalContainerEntityManagerFactoryBean aluEntityManager(\n        EntityManagerFactoryBuilder builder) {\n    Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();\n    properties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);\n    return builder\n            .dataSource(aluDataSource())\n            .packages(&quot;com.XXXXXXXXXXX.XXXXXXXXXXXXXXXXX.entity.alu&quot;)\n            .properties(properties)\n            .build();\n}\n\n   }\n\n  `\n\n\n  **Database DBMS configuration B**\n\n  `package com.XXXXXXXX.XXXXXXXXXXXXXXX.config.alu;\n  import javax.sql.DataSource;\n  import org.springframework.beans.factory.annotation.Qualifier;\n  import org.springframework.boot.context.properties.ConfigurationProperties;\n  import org.springframework.boot.jdbc.DataSourceBuilder;\n  import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;\n  import org.springframework.context.annotation.Bean;\n  import org.springframework.context.annotation.Configuration;\n  import org.springframework.context.annotation.Primary;\n  import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n  import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\n  import com.xxxxxxx.xxxxxxxxxxxxxxx.repository.integracao.IntegracaoRepository;\n  import java.util.HashMap;\n  import java.util.Map;\n\n\n  @Configuration\n  @EnableJpaRepositories(\n    basePackageClasses = IntegracaoRepository.class,\n    entityManagerFactoryRef = &quot;integracaoEntityManager&quot;)\n  public class IntegracaoDbConfig {\n\n@Bean\n@ConfigurationProperties(prefix = &quot;integracao.datasource&quot;)\n@Primary\npublic DataSource canDataSource() {\n    return  DataSourceBuilder.create().build();\n}\n\n@Bean\n@Qualifier\n@Primary\npublic LocalContainerEntityManagerFactoryBean integracaoEntityManager(\n        EntityManagerFactoryBuilder builder) {\n    Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();\n    properties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);\n    return builder\n            .dataSource(canDataSource())\n            .packages(&quot;com.XXXXXXXX.XXXXXXXXXXXXXXXXXXXXX.entity.integracao&quot;)\n            .properties(properties)\n            .build();\n}\n  }\n    `\n**Controller**\n\n`package com.xxxxxxxx.xxxxxxxxxxxx.controller;\n import java.util.ArrayList;\n import java.util.List;\n import com.xxxxxxxx.xxxxxxxxxxxxxx.repository.alu.xxxxxxxxRepository;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.web.bind.annotation.*;\nimport com.xxxxxxxxxx.xxxxxxxxxxxxxxxx.entity.integracao.Integracao;\n\n\n@RestController\n@RequestMapping(value = &quot;/projecao&quot;)\npublic class IntegracaoController {\n\n@Autowired\nprivate xxxxxxxxRepository repository; =&gt; (Note: I had to hide the name, but this repository would    be from DBMS A)\n\n@GetMapping\n@ResponseBody\npublic List&lt;Integracao&gt; convert(List&lt;Object&gt; object) {\n    List&lt;Integracao&gt; list = new ArrayList&lt;Integracao&gt;();\n    for(final Object o : object) {\n        Object[] obj = (Object[]) o;\n        list.add(new Integracao(obj[0].toString(),obj[1].toString()));\n    }\n    return list;\n}\n\n }`\n\n**DBMS A Entity**\n\n`package com.xxxxxx.xxxxxxxxxxxxx.entity.alu;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport java.math.BigDecimal;\n\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Data\npublic class data base A {\n    @Id\nprivate Long id;\n\n@Column(name = &quot;Caixa&quot;)\nprivate String caixa;\n\n@Column(name = &quot;Embalador&quot;)\nprivate String embalador;\n\n@Column(name = &quot;Operador&quot;)\nprivate String operador;\n\n@Column(name = &quot;Empacotador&quot;)\nprivate String empacotador;\n\n@Column(name = &quot;VALORFINAL&quot;)\nprivate BigDecimal valor;\n\n@Column(name = &quot;VALOR&quot;)\nprivate BigDecimal valor;\n\n@Column(name = &quot;TAXA&quot;)\nprivate BigDecimal taxa;\n\n@Column(name = &quot;VENCIMENTO&quot;)\nprivate Integer vencimento;\n\n@Column(name = &quot;Estoquista&quot;)\nprivate String estoquista;\n\n@Column(name = &quot;Repositor&quot;)\nprivate Integer repositor;\n\n@Column(name = &quot;Peixeiro&quot;)\nprivate String peixeiro;\n\n@Column(name = &quot;MATRIZ&quot;)\nprivate String matriz;\n\n@Column(name = &quot;Auxiliar&quot;)\nprivate String auxiliar;\n\n@Column(name = &quot;TIPO&quot;)\nprivate Integer tipo;\n\npublic Integracao(String toString, String toString1) {\n}\n  }`\n\n **DBMS B Entity**\n\n `package com.xxxxxxx.xxxxxxxxxxxxxx.entity.integracao;\n\n  import lombok.AllArgsConstructor;\n  import lombok.Data;\n  import lombok.NoArgsConstructor;\n  import javax.persistence.Column;\n  import javax.persistence.Entity;\n  import javax.persistence.Id;\n  import javax.persistence.Table;\n  import java.math.BigDecimal;\n\n\n @Entity\n @NoArgsConstructor\n @AllArgsConstructor\n @Data\n @Table(name = &quot;integracao&quot; )\n public class Integracao {\n\n@Id\nprivate Long id;\n\n@Column(name = &quot;Caixa&quot;)\nprivate String caixa;\n\n@Column(name = &quot;Embalador&quot;)\nprivate String embalador;\n\n@Column(name = &quot;Operador&quot;)\nprivate String operador;\n\n@Column(name = &quot;Empacotador&quot;)\nprivate String empacotador;\n\n@Column(name = &quot;VALORFINAL&quot;)\nprivate BigDecimal valor;\n\n@Column(name = &quot;VALOR&quot;)\nprivate BigDecimal valor;\n\n@Column(name = &quot;TAXA&quot;)\nprivate BigDecimal taxa;\n\n@Column(name = &quot;VENCIMENTO&quot;)\nprivate Integer vencimento;\n\n@Column(name = &quot;Estoquista&quot;)\nprivate String estoquista;\n\n@Column(name = &quot;Repositor&quot;)\nprivate Integer repositor;\n\n@Column(name = &quot;Peixeiro&quot;)\nprivate String peixeiro;\n\n@Column(name = &quot;MATRIZ&quot;)\nprivate String matriz;\n\n@Column(name = &quot;Auxiliar&quot;)\nprivate String auxiliar;\n\n@Column(name = &quot;TIPO&quot;)\nprivate Integer tipo;\n\npublic Integracao(String toString, String toString1) {\n}\n }`\n\n**DBMS A repository**\n\n`package com.xxxxxxxx.xxxxxxxxxxxxxx.repository.alu;\n import org.springframework.data.jpa.repository.JpaRepository;\n import com.xxxxxxxxxxx.xxxxxxxxxxxxx.entity.alu.data base A;\n import org.springframework.data.jpa.repository.Query;\n import org.springframework.stereotype.Repository;\n import java.util.List;\n\n @Repository\n public interface xxxxxxxRepository extends JpaRepository&lt;xxxxxxx,Long&gt;{\n @Query(nativeQuery = true, value =&quot;SELECT &quot; +\n        &quot;    EMBALADOR,&quot; +\n        &quot;    OPERADOR,&quot; +\n        &quot;    EMPACOTADOR,&quot; +\n        &quot;    VALORFINAL,&quot; +\n        &quot;    VALOR,&quot; +\n        &quot;    VALOR,&quot; +\n        &quot;    TAXA,&quot; +\n        &quot;    VENCIMENTO,&quot; +\n        &quot;    ESTOQUISTA,&quot; +\n        &quot;    REPOSITOR,&quot; +\n        &quot;    PEIXEIRO,&quot; +\n        &quot;    MATRIZ,&quot; +\n        &quot;    AUXILIAR,&quot; +\n        &quot;    TIPO FROM SPR_SUPERMECADO&quot; )  (Note * SPR_SUPERMECADO Would be the View that I want to   store in the table of data base B)\nList&lt;Object&gt;projection();\n\n}\n</code></pre>\n<p>`\n<strong>DBMS B repository</strong></p>\n<pre><code>`package com.xxxxxxx.xxxxxxxxxxx.repository.integracao;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport com.xxxxxxxxxx.xxxxxxxxxxxxx.entity.integracao.Integracao;\n\n@Repository\npublic interface IntegracaoRepository extends JpaRepository&lt;Integracao,Long&gt;{\n</code></pre>\n<p>}\n``</p>\n<pre><code>stack trace output:\n\n\n`2023-02-22 16:57:29.969 ERROR 5640 --- [nio-8081-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    :        Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: No primary or single unique constructor found for interface java.util.List] with root cause\n\n java.lang.IllegalStateException: No primary or single unique constructor found for interface      java.util.List\nat org.springframework.beans.BeanUtils.getResolvableConstructor(BeanUtils.java:267) ~[spring-beans-5.3.24.jar:5.3.24]\nat    org.springframework.web.method.annotation.ModelAttributeMethodProcessor.createAttribute(ModelAttributeMetho  dProcessor.java:219) ~[spring-web-5.3.24.jar:5.3.24]\nat   org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.createAttribute(ServletModelAttributeMethodProcessor.java:85) ~[spring-webmvc-5.3.24.jar:5.3.24]\n</code></pre>\n<p>I followed this tutorial, but I was not</p>\n<p><a href=\"https://stackoverflow.com/questions/67937954/convert-resultset-to-model-in-spring-boot-2\">convert resultset to model in spring boot 2</a></p>\n"},{"tags":["java","android-room","database-migration"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575074903,"creation_date":1575074903,"answer_id":59112314,"question_id":59064933,"body_markdown":"&gt; Is this possible?\r\nYes. However it is a little complex.\r\n\r\nIn short, you can actually do it the other way round. Rather than use the new database from the asset and try to retrive the previous data (is complicated if using Room Migration as you have to effectiviely swap to the newly created/copied database which is further complicated as you&#39;re inside a transaction when migrating).\r\n\r\nIf however you do the schema changes to the database in use rather than the asset database, you can then get the asset database and copy the new non-user data (would be greatly complicated if the user&#39;s data were intermingled with the non-user data).\r\n\r\nEven this isn&#39;t that simple. However, here&#39;s a simple exmaple/scanario based upon a slight expansion of your code to :-\r\n\r\n    static final Migration MIGRATION_1_2 = new Migration(1, 2) {\r\n        @Override\r\n        public void migrate(SupportSQLiteDatabase db) {\r\n            final String TAG = &quot;MIGRATE_1_2&quot;;\r\n            Log.d(TAG,&quot;Database Version when called is &quot; + db.getVersion());\r\n\r\n            // I need to tell Room that it should use the data\r\n            // from version 1 ( with the user&#39;s favorites ) to version 2.\r\n\r\n            // &quot;CREATE TABLE IF NOT EXISTS `userdata` (`userId` INTEGER DEFAULT uid, `name` TEXT, PRIMARY KEY(`userId`))&quot;\r\n            //db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `userdata_saveuserdata` (`userId` INTEGER, `name` TEXT, PRIMARY KEY(`userId`))&quot;);\r\n            //db.execSQL(&quot;INSERT INTO `userdata_saveuserdata` SELECT * FROM `userdata`&quot;);\r\n            db.execSQL(&quot;ALTER TABLE `otherdata` ADD COLUMN `column2` TEXT&quot;);\r\n            Log.d(TAG,&quot;Checking Context&quot;);\r\n            if (sContext != null) {\r\n                applyAssetDB(db);\r\n            } else {\r\n                Log.d(TAG,&quot;Context is null!!!!&quot;);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\nAs you can see this changes the otherdata table (not the users table) by adding a new column.\r\n\r\nIt then checks to see if sContext isn&#39;t null.\r\n\r\n- A valid Context is used rather then hard coding paths.\r\n\r\nThen the **applyAssetDB** is invoked, which is :-\r\n\r\n    private static void applyAssetDB(SupportSQLiteDatabase sdb) {\r\n        String TAG = &quot;APPLYASSETDB&quot;;\r\n        String mainDatabaseName = (new File(sdb.getPath()).getName());\r\n        String assetDatabaseName = mainDatabaseName + &quot;_asset&quot;;\r\n        String asset_schema = &quot;asset_schema&quot;;\r\n        Log.d(TAG,&quot;Attempting application of asset data to database.&quot;\r\n                        + &quot;\\n\\tActual Database = &quot; + mainDatabaseName\r\n                        + &quot;\\n\\tAsset Database will be &quot; + assetDatabaseName\r\n                        + &quot;\\n\\tSchema for attached database will be  &quot; + asset_schema\r\n                );\r\n        copyDatabaseFromAssets(AppDatabase.sContext,MainActivity.ASSETNAME,assetDatabaseName);\r\n        /*\r\n        if (sdb.isWriteAheadLoggingEnabled()) {\r\n            setAssetDBToWALMode(sContext.getDatabasePath(assetDatabaseName).getPath());\r\n        }\r\n        Log.d(TAG,&quot;Attempting to ATTACH  asset database &quot; + sContext.getDatabasePath(assetDatabaseName).getPath() + &quot;.&quot; + asset_schema);\r\n        sdb.execSQL(&quot;ATTACH DATABASE &#39;&quot; + sContext.getDatabasePath(assetDatabaseName).getPath() + &quot;&#39; AS &quot; + asset_schema);\r\n        Log.d(TAG,&quot;Attempting INSERTING NEW DATA using\\n\\t&quot; + &quot;INSERT OR IGNORE INTO `otherdata` SELECT * FROM `otherdata`.&quot; + asset_schema);\r\n        sdb.execSQL(&quot;INSERT OR IGNORE INTO `otherdata` SELECT * FROM `otherdata`.&quot; + asset_schema);\r\n        Log.d(TAG,&quot;Attempting to DETACH &quot; + sContext.getDatabasePath(assetDatabaseName).getPath() + &quot;.&quot; + asset_schema);\r\n        sdb.execSQL(&quot;DETACH DATABASE &#39;&quot; + sContext.getDatabasePath(assetDatabaseName).getPath() + &quot;.&quot; + asset_schema);\r\n        */\r\n\r\n        int insertRows = 0;\r\n        SQLiteDatabase assetdb = SQLiteDatabase.openDatabase(sContext.getDatabasePath(assetDatabaseName).getPath(),null,SQLiteDatabase.OPEN_READONLY);\r\n        Cursor assetCursor = assetdb.query(&quot;`otherdata`&quot;,null,null,null,null,null,null);\r\n        ContentValues cv = new ContentValues();\r\n        while (assetCursor.moveToNext()) {\r\n            cv.clear();\r\n            for (String c: assetCursor.getColumnNames()) {\r\n                if (assetCursor.getType(assetCursor.getColumnIndex(c)) == Cursor.FIELD_TYPE_BLOB) {\r\n                    cv.put(c,assetCursor.getBlob(assetCursor.getColumnIndex(c)));\r\n                } else {\r\n                    cv.put(c,assetCursor.getString(assetCursor.getColumnIndex(c)));\r\n                }\r\n            }\r\n            if (sdb.insert(&quot;`otherdata`&quot;, OnConflictStrategy.IGNORE,cv) &gt; 0 ) insertRows++;\r\n        }\r\n        Log.d(TAG,&quot;Inserted &quot; + insertRows + &quot; from the Asset Database&quot;);\r\n        assetCursor.close();\r\n\r\n        Log.d(TAG,&quot;Deleting &quot; + sContext.getDatabasePath(assetDatabaseName).getPath());\r\n        if ((new File(sContext.getDatabasePath(assetDatabaseName).getPath())).delete()) {\r\n            Log.d(TAG,&quot;Copied AssetDatabase successfully deleted.&quot;);\r\n        } else {\r\n            Log.d(TAG,&quot;Copied Asset Database file not deleted????&quot;);\r\n        }\r\n        Log.d(TAG,&quot;Finished&quot;);\r\n    }\r\n\r\n- commented out code left in intentionally as issue were encountered when trying to ATTACH the database copied from the assets, so reverted to using seperate connetions.\r\n\r\nThis copies the database from the asset to the defauly database location via the **copyDatabaseFromAssets** method (as below). It the extracts all of the non user&#39;s data from the asset database and inserts it into the original (but altered according to the changed schema) database **relying** upon the **OnConflictStrategy.IGNORE** to only insert new rows. The **userdata** table is untouched, so the user&#39;s data is retianed.\r\n\r\n- Obviously this would not cater for changed rows.\r\n\r\nHere&#39;s **copyDatabaseFromAssets**\r\n\r\n    private static void copyDatabaseFromAssets(Context context, String assetName, String databaseName) {\r\n        String TAG = &quot;COPYDBFROMASSET&quot;;\r\n        int bufferSize = 1024 * 4, length = 0, read = 0, written = 0, chunks = 0;\r\n        byte[] buffer = new byte[bufferSize];\r\n        try {\r\n            Log.d(TAG,&quot;Attempting opening asset &quot; + assetName + &quot; as an InputFileStream.&quot;);\r\n            InputStream is = context.getAssets().open(assetName);\r\n            Log.d(TAG,&quot;Attempting opening FileOutputStream &quot; + context.getDatabasePath(databaseName).getPath());\r\n            OutputStream os = new FileOutputStream(context.getDatabasePath(databaseName));\r\n            Log.d(TAG,&quot;Initiating copy.&quot;);\r\n            while((length = is.read(buffer)) &gt; 0) {\r\n                read += length;\r\n                os.write(buffer,0,length);\r\n                written += length;\r\n                chunks++;\r\n            }\r\n            Log.d(TAG,&quot;Read &quot; + read + &quot;bytes; Wrote &quot; + written + &quot; bytes; in &quot; + chunks);\r\n            Log.d(TAG,&quot;Finalising (Flush and Close output and close input)&quot;);\r\n            os.flush();\r\n            os.close();\r\n            is.close();\r\n            Log.d(TAG,&quot;Finalised&quot;);\r\n\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Error copying Database from Asset &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\n\r\nHere&#39;s an example Activity **MainActivity** that puts this all together (noting that for convenience I&#39;ve used allowMainThreadQueries ) :-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        //public static final int DBVERSION = 1; //!!!!! ORIGINAL\r\n        public static final int DBVERSION = 2;\r\n        public static final String DBNAME = &quot;app_database.db&quot;;\r\n        public static final String ASSETNAME = &quot;database/QuotesDB.db&quot;;\r\n    \r\n        AppDatabase appDB;\r\n        AllDao adao;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            appDB.setContext(this);\r\n            appDB = Room.databaseBuilder(this,AppDatabase.class,DBNAME)\r\n                    .allowMainThreadQueries()\r\n                    .createFromAsset(ASSETNAME)\r\n                    .addCallback(AppDatabase.CALLBACK)\r\n                    .addMigrations(AppDatabase.MIGRATION_1_2)\r\n                    .build();\r\n            adao = appDB.allDao();\r\n            appDB.logDBInfo();\r\n            if (adao.getUserDataRowCount() == 3) {\r\n                adao.insertOneUserData(new UserData(&quot;ADDEDU100&quot;));\r\n                adao.insertOneUserData(new UserData(&quot;ADDEDU200&quot;));\r\n                adao.insertOneUserData(new UserData(&quot;ADDEDU300&quot;));\r\n            }\r\n            appDB.logDBInfo();\r\n        }\r\n    }\r\n\r\nWhen run (after changing the relevant code for the new schema and increasing the version) the result in the log is :-\r\n\r\n    2019-11-30 10:56:38.768 12944-12944/a.roommigrationwithassets D/MIGRATE_1_2: Database Version when called is 1\r\n    2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/MIGRATE_1_2: Checking Context\r\n    2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Attempting application of asset data to database.\r\n        \tActual Database = app_database.db\r\n        \tAsset Database will be app_database.db_asset\r\n        \tSchema for attached database will be  asset_schema\r\n    2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Attempting opening asset database/QuotesDB.db as an InputFileStream.\r\n    2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Attempting opening FileOutputStream /data/user/0/a.roommigrationwithassets/databases/app_database.db_asset\r\n    2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Initiating copy.\r\n    2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Read 12288bytes; Wrote 12288 bytes; in 3\r\n    2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Finalising (Flush and Close output and close input)\r\n    2019-11-30 10:56:38.772 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Finalised\r\n    2019-11-30 10:56:38.780 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Inserted 3 from the Asset Database\r\n    2019-11-30 10:56:38.780 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Deleting /data/user/0/a.roommigrationwithassets/databases/app_database.db_asset\r\n    2019-11-30 10:56:38.780 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Copied AssetDatabase successfully deleted.\r\n    2019-11-30 10:56:38.780 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Finished\r\n    2019-11-30 10:56:38.815 12944-12944/a.roommigrationwithassets D/ONOPEN: Database Version when called is 2\r\n    2019-11-30 10:56:38.816 12944-12944/a.roommigrationwithassets D/ONOPEN: Database Version after Super call is 2\r\n    2019-11-30 10:56:38.819 12944-12944/a.roommigrationwithassets D/DBINFO: UserData rowcount = 6\r\n        \tID = 1 NAME = OU1\r\n        \tID = 2 NAME = OU2\r\n        \tID = 3 NAME = OU3\r\n        \tID = 4 NAME = ADDEDU100\r\n        \tID = 5 NAME = ADDEDU200\r\n        \tID = 6 NAME = ADDEDU300\r\n        \r\n        OtherData rowcount = 3\r\n        \tID = 1Column1 = OD1\r\n        \tID = 2Column1 = OD2\r\n        \tID = 3Column1 = OD3\r\n    2019-11-30 10:56:38.821 12944-12944/a.roommigrationwithassets D/DBINFO: UserData rowcount = 6\r\n        \tID = 1 NAME = OU1\r\n        \tID = 2 NAME = OU2\r\n        \tID = 3 NAME = OU3\r\n        \tID = 4 NAME = ADDEDU100\r\n        \tID = 5 NAME = ADDEDU200\r\n        \tID = 6 NAME = ADDEDU300\r\n        \r\n        OtherData rowcount = 3\r\n        \tID = 1Column1 = OD1\r\n        \tID = 2Column1 = OD2\r\n        \tID = 3Column1 = OD3\r\n\r\n\r\n\r\n\r\nThe complete code for the **AppDatabase** class (noting that this includes some redundant code) is :-\r\n\r\n    @Database(version = MainActivity.DBVERSION, exportSchema = false,entities = {UserData.class,OtherData.class})\r\n    abstract class AppDatabase extends RoomDatabase {\r\n    \r\n        abstract AllDao allDao();\r\n        static Context sContext;\r\n    \r\n        static final Migration MIGRATION_1_2 = new Migration(1, 2) {\r\n            @Override\r\n            public void migrate(SupportSQLiteDatabase db) {\r\n                final String TAG = &quot;MIGRATE_1_2&quot;;\r\n                Log.d(TAG,&quot;Database Version when called is &quot; + db.getVersion());\r\n    \r\n                // I need to tell Room that it should use the data\r\n                // from version 1 ( with the user&#39;s favorites ) to version 2.\r\n    \r\n                // &quot;CREATE TABLE IF NOT EXISTS `userdata` (`userId` INTEGER DEFAULT uid, `name` TEXT, PRIMARY KEY(`userId`))&quot;\r\n                //db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `userdata_saveuserdata` (`userId` INTEGER, `name` TEXT, PRIMARY KEY(`userId`))&quot;);\r\n                //db.execSQL(&quot;INSERT INTO `userdata_saveuserdata` SELECT * FROM `userdata`&quot;);\r\n                db.execSQL(&quot;ALTER TABLE `otherdata` ADD COLUMN `column2` TEXT&quot;);\r\n                Log.d(TAG,&quot;Checking Context&quot;);\r\n                if (sContext != null) {\r\n                    applyAssetDB(db);\r\n                } else {\r\n                    Log.d(TAG,&quot;Context is null!!!!&quot;);\r\n                }\r\n            }\r\n        };\r\n    \r\n        static final RoomDatabase.Callback CALLBACK = new RoomDatabase.Callback() {\r\n            @Override\r\n            public void onCreate(@NonNull SupportSQLiteDatabase db) {\r\n                Log.d(&quot;ONCREATE&quot;,&quot;Database Version when called is &quot; + db.getVersion());\r\n                super.onCreate(db);\r\n                Log.d(&quot;ONCREATE&quot;,&quot;Database Version after Super call is &quot; + db.getVersion());\r\n            }\r\n    \r\n            @Override\r\n            public void onOpen(@NonNull SupportSQLiteDatabase db) {\r\n                Log.d(&quot;ONOPEN&quot;,&quot;Database Version when called is &quot; + db.getVersion());\r\n                super.onOpen(db);\r\n                Log.d(&quot;ONOPEN&quot;,&quot;Database Version after Super call is &quot; + db.getVersion());\r\n            }\r\n    \r\n            @Override\r\n            public void onDestructiveMigration(@NonNull SupportSQLiteDatabase db) {\r\n                Log.d(&quot;ONDESTRMIG&quot;,&quot;Database Version when called is &quot; + db.getVersion());\r\n                super.onDestructiveMigration(db);\r\n                Log.d(&quot;ONDESTRMIG&quot;,&quot;Database Version after Super call is &quot; + db.getVersion());\r\n            }\r\n        };\r\n    \r\n        public void logDBInfo() {\r\n            AllDao adao = this.allDao();\r\n            List&lt;UserData&gt; allUserDataRows = adao.getAllUserDataRows();\r\n            StringBuilder sb = new StringBuilder().append(&quot;UserData rowcount = &quot;).append(allUserDataRows.size());\r\n            for (UserData u: allUserDataRows) {\r\n                sb.append(&quot;\\n\\tID = &quot;).append(u.getId()).append(&quot; NAME = &quot; + u.getName());\r\n            }\r\n            List&lt;OtherData&gt; allOtherDataRows = adao.getAllOtherDataRows();\r\n            sb.append(&quot;\\n\\nOtherData rowcount = &quot;).append(allOtherDataRows.size());\r\n            for (OtherData o: allOtherDataRows) {\r\n                sb.append(&quot;\\n\\tID = &quot;).append(o.getOtherDataId()).append(&quot;Column1 = &quot;).append(o.getColumn1());\r\n            }\r\n            Log.d(&quot;DBINFO&quot;,sb.toString());\r\n        }\r\n    \r\n        static  void setContext(Context context) {\r\n            sContext = context;\r\n        }\r\n    \r\n        private static void applyAssetDB(SupportSQLiteDatabase sdb) {\r\n            String TAG = &quot;APPLYASSETDB&quot;;\r\n            String mainDatabaseName = (new File(sdb.getPath()).getName());\r\n            String assetDatabaseName = mainDatabaseName + &quot;_asset&quot;;\r\n            String asset_schema = &quot;asset_schema&quot;;\r\n            Log.d(TAG,&quot;Attempting application of asset data to database.&quot;\r\n                            + &quot;\\n\\tActual Database = &quot; + mainDatabaseName\r\n                            + &quot;\\n\\tAsset Database will be &quot; + assetDatabaseName\r\n                            + &quot;\\n\\tSchema for attached database will be  &quot; + asset_schema\r\n                    );\r\n            copyDatabaseFromAssets(AppDatabase.sContext,MainActivity.ASSETNAME,assetDatabaseName);\r\n            /*\r\n            if (sdb.isWriteAheadLoggingEnabled()) {\r\n                setAssetDBToWALMode(sContext.getDatabasePath(assetDatabaseName).getPath());\r\n            }\r\n            Log.d(TAG,&quot;Attempting to ATTACH  asset database &quot; + sContext.getDatabasePath(assetDatabaseName).getPath() + &quot;.&quot; + asset_schema);\r\n            sdb.execSQL(&quot;ATTACH DATABASE &#39;&quot; + sContext.getDatabasePath(assetDatabaseName).getPath() + &quot;&#39; AS &quot; + asset_schema);\r\n            Log.d(TAG,&quot;Attempting INSERTING NEW DATA using\\n\\t&quot; + &quot;INSERT OR IGNORE INTO `otherdata` SELECT * FROM `otherdata`.&quot; + asset_schema);\r\n            sdb.execSQL(&quot;INSERT OR IGNORE INTO `otherdata` SELECT * FROM `otherdata`.&quot; + asset_schema);\r\n            Log.d(TAG,&quot;Attempting to DETACH &quot; + sContext.getDatabasePath(assetDatabaseName).getPath() + &quot;.&quot; + asset_schema);\r\n            sdb.execSQL(&quot;DETACH DATABASE &#39;&quot; + sContext.getDatabasePath(assetDatabaseName).getPath() + &quot;.&quot; + asset_schema);\r\n            */\r\n    \r\n            int insertRows = 0;\r\n            SQLiteDatabase assetdb = SQLiteDatabase.openDatabase(sContext.getDatabasePath(assetDatabaseName).getPath(),null,SQLiteDatabase.OPEN_READONLY);\r\n            Cursor assetCursor = assetdb.query(&quot;`otherdata`&quot;,null,null,null,null,null,null);\r\n            ContentValues cv = new ContentValues();\r\n            while (assetCursor.moveToNext()) {\r\n                cv.clear();\r\n                for (String c: assetCursor.getColumnNames()) {\r\n                    if (assetCursor.getType(assetCursor.getColumnIndex(c)) == Cursor.FIELD_TYPE_BLOB) {\r\n                        cv.put(c,assetCursor.getBlob(assetCursor.getColumnIndex(c)));\r\n                    } else {\r\n                        cv.put(c,assetCursor.getString(assetCursor.getColumnIndex(c)));\r\n                    }\r\n                }\r\n                if (sdb.insert(&quot;`otherdata`&quot;, OnConflictStrategy.IGNORE,cv) &gt; 0 ) insertRows++;\r\n            }\r\n            Log.d(TAG,&quot;Inserted &quot; + insertRows + &quot; from the Asset Database&quot;);\r\n            assetCursor.close();\r\n    \r\n            Log.d(TAG,&quot;Deleting &quot; + sContext.getDatabasePath(assetDatabaseName).getPath());\r\n            if ((new File(sContext.getDatabasePath(assetDatabaseName).getPath())).delete()) {\r\n                Log.d(TAG,&quot;Copied AssetDatabase successfully deleted.&quot;);\r\n            } else {\r\n                Log.d(TAG,&quot;Copied Asset Database file not deleted????&quot;);\r\n            }\r\n            Log.d(TAG,&quot;Finished&quot;);\r\n        }\r\n    \r\n        private static void copyDatabaseFromAssets(Context context, String assetName, String databaseName) {\r\n            String TAG = &quot;COPYDBFROMASSET&quot;;\r\n            int bufferSize = 1024 * 4, length = 0, read = 0, written = 0, chunks = 0;\r\n            byte[] buffer = new byte[bufferSize];\r\n            try {\r\n                Log.d(TAG,&quot;Attempting opening asset &quot; + assetName + &quot; as an InputFileStream.&quot;);\r\n                InputStream is = context.getAssets().open(assetName);\r\n                Log.d(TAG,&quot;Attempting opening FileOutputStream &quot; + context.getDatabasePath(databaseName).getPath());\r\n                OutputStream os = new FileOutputStream(context.getDatabasePath(databaseName));\r\n                Log.d(TAG,&quot;Initiating copy.&quot;);\r\n                while((length = is.read(buffer)) &gt; 0) {\r\n                    read += length;\r\n                    os.write(buffer,0,length);\r\n                    written += length;\r\n                    chunks++;\r\n                }\r\n                Log.d(TAG,&quot;Read &quot; + read + &quot;bytes; Wrote &quot; + written + &quot; bytes; in &quot; + chunks);\r\n                Log.d(TAG,&quot;Finalising (Flush and Close output and close input)&quot;);\r\n                os.flush();\r\n                os.close();\r\n                is.close();\r\n                Log.d(TAG,&quot;Finalised&quot;);\r\n    \r\n            } catch (IOException e) {\r\n                throw new RuntimeException(&quot;Error copying Database from Asset &quot; + e.getMessage());\r\n            }\r\n        }\r\n    \r\n        private static void setAssetDBToWALMode(String assetDBPath) {\r\n            SQLiteDatabase db = SQLiteDatabase.openDatabase(assetDBPath,null,SQLiteDatabase.OPEN_READWRITE);\r\n            db.enableWriteAheadLogging();\r\n            db.close();\r\n        }\r\n    }\r\n\r\n","title":"Merge user&#39;s Android Room database when migrating database","body":"<blockquote>\n  <p>Is this possible?\n  Yes. However it is a little complex.</p>\n</blockquote>\n\n<p>In short, you can actually do it the other way round. Rather than use the new database from the asset and try to retrive the previous data (is complicated if using Room Migration as you have to effectiviely swap to the newly created/copied database which is further complicated as you're inside a transaction when migrating).</p>\n\n<p>If however you do the schema changes to the database in use rather than the asset database, you can then get the asset database and copy the new non-user data (would be greatly complicated if the user's data were intermingled with the non-user data).</p>\n\n<p>Even this isn't that simple. However, here's a simple exmaple/scanario based upon a slight expansion of your code to :-</p>\n\n<pre><code>static final Migration MIGRATION_1_2 = new Migration(1, 2) {\n    @Override\n    public void migrate(SupportSQLiteDatabase db) {\n        final String TAG = \"MIGRATE_1_2\";\n        Log.d(TAG,\"Database Version when called is \" + db.getVersion());\n\n        // I need to tell Room that it should use the data\n        // from version 1 ( with the user's favorites ) to version 2.\n\n        // \"CREATE TABLE IF NOT EXISTS `userdata` (`userId` INTEGER DEFAULT uid, `name` TEXT, PRIMARY KEY(`userId`))\"\n        //db.execSQL(\"CREATE TABLE IF NOT EXISTS `userdata_saveuserdata` (`userId` INTEGER, `name` TEXT, PRIMARY KEY(`userId`))\");\n        //db.execSQL(\"INSERT INTO `userdata_saveuserdata` SELECT * FROM `userdata`\");\n        db.execSQL(\"ALTER TABLE `otherdata` ADD COLUMN `column2` TEXT\");\n        Log.d(TAG,\"Checking Context\");\n        if (sContext != null) {\n            applyAssetDB(db);\n        } else {\n            Log.d(TAG,\"Context is null!!!!\");\n        }\n    }\n};\n</code></pre>\n\n<p>As you can see this changes the otherdata table (not the users table) by adding a new column.</p>\n\n<p>It then checks to see if sContext isn't null.</p>\n\n<ul>\n<li>A valid Context is used rather then hard coding paths.</li>\n</ul>\n\n<p>Then the <strong>applyAssetDB</strong> is invoked, which is :-</p>\n\n<pre><code>private static void applyAssetDB(SupportSQLiteDatabase sdb) {\n    String TAG = \"APPLYASSETDB\";\n    String mainDatabaseName = (new File(sdb.getPath()).getName());\n    String assetDatabaseName = mainDatabaseName + \"_asset\";\n    String asset_schema = \"asset_schema\";\n    Log.d(TAG,\"Attempting application of asset data to database.\"\n                    + \"\\n\\tActual Database = \" + mainDatabaseName\n                    + \"\\n\\tAsset Database will be \" + assetDatabaseName\n                    + \"\\n\\tSchema for attached database will be  \" + asset_schema\n            );\n    copyDatabaseFromAssets(AppDatabase.sContext,MainActivity.ASSETNAME,assetDatabaseName);\n    /*\n    if (sdb.isWriteAheadLoggingEnabled()) {\n        setAssetDBToWALMode(sContext.getDatabasePath(assetDatabaseName).getPath());\n    }\n    Log.d(TAG,\"Attempting to ATTACH  asset database \" + sContext.getDatabasePath(assetDatabaseName).getPath() + \".\" + asset_schema);\n    sdb.execSQL(\"ATTACH DATABASE '\" + sContext.getDatabasePath(assetDatabaseName).getPath() + \"' AS \" + asset_schema);\n    Log.d(TAG,\"Attempting INSERTING NEW DATA using\\n\\t\" + \"INSERT OR IGNORE INTO `otherdata` SELECT * FROM `otherdata`.\" + asset_schema);\n    sdb.execSQL(\"INSERT OR IGNORE INTO `otherdata` SELECT * FROM `otherdata`.\" + asset_schema);\n    Log.d(TAG,\"Attempting to DETACH \" + sContext.getDatabasePath(assetDatabaseName).getPath() + \".\" + asset_schema);\n    sdb.execSQL(\"DETACH DATABASE '\" + sContext.getDatabasePath(assetDatabaseName).getPath() + \".\" + asset_schema);\n    */\n\n    int insertRows = 0;\n    SQLiteDatabase assetdb = SQLiteDatabase.openDatabase(sContext.getDatabasePath(assetDatabaseName).getPath(),null,SQLiteDatabase.OPEN_READONLY);\n    Cursor assetCursor = assetdb.query(\"`otherdata`\",null,null,null,null,null,null);\n    ContentValues cv = new ContentValues();\n    while (assetCursor.moveToNext()) {\n        cv.clear();\n        for (String c: assetCursor.getColumnNames()) {\n            if (assetCursor.getType(assetCursor.getColumnIndex(c)) == Cursor.FIELD_TYPE_BLOB) {\n                cv.put(c,assetCursor.getBlob(assetCursor.getColumnIndex(c)));\n            } else {\n                cv.put(c,assetCursor.getString(assetCursor.getColumnIndex(c)));\n            }\n        }\n        if (sdb.insert(\"`otherdata`\", OnConflictStrategy.IGNORE,cv) &gt; 0 ) insertRows++;\n    }\n    Log.d(TAG,\"Inserted \" + insertRows + \" from the Asset Database\");\n    assetCursor.close();\n\n    Log.d(TAG,\"Deleting \" + sContext.getDatabasePath(assetDatabaseName).getPath());\n    if ((new File(sContext.getDatabasePath(assetDatabaseName).getPath())).delete()) {\n        Log.d(TAG,\"Copied AssetDatabase successfully deleted.\");\n    } else {\n        Log.d(TAG,\"Copied Asset Database file not deleted????\");\n    }\n    Log.d(TAG,\"Finished\");\n}\n</code></pre>\n\n<ul>\n<li>commented out code left in intentionally as issue were encountered when trying to ATTACH the database copied from the assets, so reverted to using seperate connetions.</li>\n</ul>\n\n<p>This copies the database from the asset to the defauly database location via the <strong>copyDatabaseFromAssets</strong> method (as below). It the extracts all of the non user's data from the asset database and inserts it into the original (but altered according to the changed schema) database <strong>relying</strong> upon the <strong>OnConflictStrategy.IGNORE</strong> to only insert new rows. The <strong>userdata</strong> table is untouched, so the user's data is retianed.</p>\n\n<ul>\n<li>Obviously this would not cater for changed rows.</li>\n</ul>\n\n<p>Here's <strong>copyDatabaseFromAssets</strong></p>\n\n<pre><code>private static void copyDatabaseFromAssets(Context context, String assetName, String databaseName) {\n    String TAG = \"COPYDBFROMASSET\";\n    int bufferSize = 1024 * 4, length = 0, read = 0, written = 0, chunks = 0;\n    byte[] buffer = new byte[bufferSize];\n    try {\n        Log.d(TAG,\"Attempting opening asset \" + assetName + \" as an InputFileStream.\");\n        InputStream is = context.getAssets().open(assetName);\n        Log.d(TAG,\"Attempting opening FileOutputStream \" + context.getDatabasePath(databaseName).getPath());\n        OutputStream os = new FileOutputStream(context.getDatabasePath(databaseName));\n        Log.d(TAG,\"Initiating copy.\");\n        while((length = is.read(buffer)) &gt; 0) {\n            read += length;\n            os.write(buffer,0,length);\n            written += length;\n            chunks++;\n        }\n        Log.d(TAG,\"Read \" + read + \"bytes; Wrote \" + written + \" bytes; in \" + chunks);\n        Log.d(TAG,\"Finalising (Flush and Close output and close input)\");\n        os.flush();\n        os.close();\n        is.close();\n        Log.d(TAG,\"Finalised\");\n\n    } catch (IOException e) {\n        throw new RuntimeException(\"Error copying Database from Asset \" + e.getMessage());\n    }\n}\n</code></pre>\n\n<p>Here's an example Activity <strong>MainActivity</strong> that puts this all together (noting that for convenience I've used allowMainThreadQueries ) :-</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    //public static final int DBVERSION = 1; //!!!!! ORIGINAL\n    public static final int DBVERSION = 2;\n    public static final String DBNAME = \"app_database.db\";\n    public static final String ASSETNAME = \"database/QuotesDB.db\";\n\n    AppDatabase appDB;\n    AllDao adao;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        appDB.setContext(this);\n        appDB = Room.databaseBuilder(this,AppDatabase.class,DBNAME)\n                .allowMainThreadQueries()\n                .createFromAsset(ASSETNAME)\n                .addCallback(AppDatabase.CALLBACK)\n                .addMigrations(AppDatabase.MIGRATION_1_2)\n                .build();\n        adao = appDB.allDao();\n        appDB.logDBInfo();\n        if (adao.getUserDataRowCount() == 3) {\n            adao.insertOneUserData(new UserData(\"ADDEDU100\"));\n            adao.insertOneUserData(new UserData(\"ADDEDU200\"));\n            adao.insertOneUserData(new UserData(\"ADDEDU300\"));\n        }\n        appDB.logDBInfo();\n    }\n}\n</code></pre>\n\n<p>When run (after changing the relevant code for the new schema and increasing the version) the result in the log is :-</p>\n\n<pre><code>2019-11-30 10:56:38.768 12944-12944/a.roommigrationwithassets D/MIGRATE_1_2: Database Version when called is 1\n2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/MIGRATE_1_2: Checking Context\n2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Attempting application of asset data to database.\n        Actual Database = app_database.db\n        Asset Database will be app_database.db_asset\n        Schema for attached database will be  asset_schema\n2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Attempting opening asset database/QuotesDB.db as an InputFileStream.\n2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Attempting opening FileOutputStream /data/user/0/a.roommigrationwithassets/databases/app_database.db_asset\n2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Initiating copy.\n2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Read 12288bytes; Wrote 12288 bytes; in 3\n2019-11-30 10:56:38.771 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Finalising (Flush and Close output and close input)\n2019-11-30 10:56:38.772 12944-12944/a.roommigrationwithassets D/COPYDBFROMASSET: Finalised\n2019-11-30 10:56:38.780 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Inserted 3 from the Asset Database\n2019-11-30 10:56:38.780 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Deleting /data/user/0/a.roommigrationwithassets/databases/app_database.db_asset\n2019-11-30 10:56:38.780 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Copied AssetDatabase successfully deleted.\n2019-11-30 10:56:38.780 12944-12944/a.roommigrationwithassets D/APPLYASSETDB: Finished\n2019-11-30 10:56:38.815 12944-12944/a.roommigrationwithassets D/ONOPEN: Database Version when called is 2\n2019-11-30 10:56:38.816 12944-12944/a.roommigrationwithassets D/ONOPEN: Database Version after Super call is 2\n2019-11-30 10:56:38.819 12944-12944/a.roommigrationwithassets D/DBINFO: UserData rowcount = 6\n        ID = 1 NAME = OU1\n        ID = 2 NAME = OU2\n        ID = 3 NAME = OU3\n        ID = 4 NAME = ADDEDU100\n        ID = 5 NAME = ADDEDU200\n        ID = 6 NAME = ADDEDU300\n\n    OtherData rowcount = 3\n        ID = 1Column1 = OD1\n        ID = 2Column1 = OD2\n        ID = 3Column1 = OD3\n2019-11-30 10:56:38.821 12944-12944/a.roommigrationwithassets D/DBINFO: UserData rowcount = 6\n        ID = 1 NAME = OU1\n        ID = 2 NAME = OU2\n        ID = 3 NAME = OU3\n        ID = 4 NAME = ADDEDU100\n        ID = 5 NAME = ADDEDU200\n        ID = 6 NAME = ADDEDU300\n\n    OtherData rowcount = 3\n        ID = 1Column1 = OD1\n        ID = 2Column1 = OD2\n        ID = 3Column1 = OD3\n</code></pre>\n\n<p>The complete code for the <strong>AppDatabase</strong> class (noting that this includes some redundant code) is :-</p>\n\n<pre><code>@Database(version = MainActivity.DBVERSION, exportSchema = false,entities = {UserData.class,OtherData.class})\nabstract class AppDatabase extends RoomDatabase {\n\n    abstract AllDao allDao();\n    static Context sContext;\n\n    static final Migration MIGRATION_1_2 = new Migration(1, 2) {\n        @Override\n        public void migrate(SupportSQLiteDatabase db) {\n            final String TAG = \"MIGRATE_1_2\";\n            Log.d(TAG,\"Database Version when called is \" + db.getVersion());\n\n            // I need to tell Room that it should use the data\n            // from version 1 ( with the user's favorites ) to version 2.\n\n            // \"CREATE TABLE IF NOT EXISTS `userdata` (`userId` INTEGER DEFAULT uid, `name` TEXT, PRIMARY KEY(`userId`))\"\n            //db.execSQL(\"CREATE TABLE IF NOT EXISTS `userdata_saveuserdata` (`userId` INTEGER, `name` TEXT, PRIMARY KEY(`userId`))\");\n            //db.execSQL(\"INSERT INTO `userdata_saveuserdata` SELECT * FROM `userdata`\");\n            db.execSQL(\"ALTER TABLE `otherdata` ADD COLUMN `column2` TEXT\");\n            Log.d(TAG,\"Checking Context\");\n            if (sContext != null) {\n                applyAssetDB(db);\n            } else {\n                Log.d(TAG,\"Context is null!!!!\");\n            }\n        }\n    };\n\n    static final RoomDatabase.Callback CALLBACK = new RoomDatabase.Callback() {\n        @Override\n        public void onCreate(@NonNull SupportSQLiteDatabase db) {\n            Log.d(\"ONCREATE\",\"Database Version when called is \" + db.getVersion());\n            super.onCreate(db);\n            Log.d(\"ONCREATE\",\"Database Version after Super call is \" + db.getVersion());\n        }\n\n        @Override\n        public void onOpen(@NonNull SupportSQLiteDatabase db) {\n            Log.d(\"ONOPEN\",\"Database Version when called is \" + db.getVersion());\n            super.onOpen(db);\n            Log.d(\"ONOPEN\",\"Database Version after Super call is \" + db.getVersion());\n        }\n\n        @Override\n        public void onDestructiveMigration(@NonNull SupportSQLiteDatabase db) {\n            Log.d(\"ONDESTRMIG\",\"Database Version when called is \" + db.getVersion());\n            super.onDestructiveMigration(db);\n            Log.d(\"ONDESTRMIG\",\"Database Version after Super call is \" + db.getVersion());\n        }\n    };\n\n    public void logDBInfo() {\n        AllDao adao = this.allDao();\n        List&lt;UserData&gt; allUserDataRows = adao.getAllUserDataRows();\n        StringBuilder sb = new StringBuilder().append(\"UserData rowcount = \").append(allUserDataRows.size());\n        for (UserData u: allUserDataRows) {\n            sb.append(\"\\n\\tID = \").append(u.getId()).append(\" NAME = \" + u.getName());\n        }\n        List&lt;OtherData&gt; allOtherDataRows = adao.getAllOtherDataRows();\n        sb.append(\"\\n\\nOtherData rowcount = \").append(allOtherDataRows.size());\n        for (OtherData o: allOtherDataRows) {\n            sb.append(\"\\n\\tID = \").append(o.getOtherDataId()).append(\"Column1 = \").append(o.getColumn1());\n        }\n        Log.d(\"DBINFO\",sb.toString());\n    }\n\n    static  void setContext(Context context) {\n        sContext = context;\n    }\n\n    private static void applyAssetDB(SupportSQLiteDatabase sdb) {\n        String TAG = \"APPLYASSETDB\";\n        String mainDatabaseName = (new File(sdb.getPath()).getName());\n        String assetDatabaseName = mainDatabaseName + \"_asset\";\n        String asset_schema = \"asset_schema\";\n        Log.d(TAG,\"Attempting application of asset data to database.\"\n                        + \"\\n\\tActual Database = \" + mainDatabaseName\n                        + \"\\n\\tAsset Database will be \" + assetDatabaseName\n                        + \"\\n\\tSchema for attached database will be  \" + asset_schema\n                );\n        copyDatabaseFromAssets(AppDatabase.sContext,MainActivity.ASSETNAME,assetDatabaseName);\n        /*\n        if (sdb.isWriteAheadLoggingEnabled()) {\n            setAssetDBToWALMode(sContext.getDatabasePath(assetDatabaseName).getPath());\n        }\n        Log.d(TAG,\"Attempting to ATTACH  asset database \" + sContext.getDatabasePath(assetDatabaseName).getPath() + \".\" + asset_schema);\n        sdb.execSQL(\"ATTACH DATABASE '\" + sContext.getDatabasePath(assetDatabaseName).getPath() + \"' AS \" + asset_schema);\n        Log.d(TAG,\"Attempting INSERTING NEW DATA using\\n\\t\" + \"INSERT OR IGNORE INTO `otherdata` SELECT * FROM `otherdata`.\" + asset_schema);\n        sdb.execSQL(\"INSERT OR IGNORE INTO `otherdata` SELECT * FROM `otherdata`.\" + asset_schema);\n        Log.d(TAG,\"Attempting to DETACH \" + sContext.getDatabasePath(assetDatabaseName).getPath() + \".\" + asset_schema);\n        sdb.execSQL(\"DETACH DATABASE '\" + sContext.getDatabasePath(assetDatabaseName).getPath() + \".\" + asset_schema);\n        */\n\n        int insertRows = 0;\n        SQLiteDatabase assetdb = SQLiteDatabase.openDatabase(sContext.getDatabasePath(assetDatabaseName).getPath(),null,SQLiteDatabase.OPEN_READONLY);\n        Cursor assetCursor = assetdb.query(\"`otherdata`\",null,null,null,null,null,null);\n        ContentValues cv = new ContentValues();\n        while (assetCursor.moveToNext()) {\n            cv.clear();\n            for (String c: assetCursor.getColumnNames()) {\n                if (assetCursor.getType(assetCursor.getColumnIndex(c)) == Cursor.FIELD_TYPE_BLOB) {\n                    cv.put(c,assetCursor.getBlob(assetCursor.getColumnIndex(c)));\n                } else {\n                    cv.put(c,assetCursor.getString(assetCursor.getColumnIndex(c)));\n                }\n            }\n            if (sdb.insert(\"`otherdata`\", OnConflictStrategy.IGNORE,cv) &gt; 0 ) insertRows++;\n        }\n        Log.d(TAG,\"Inserted \" + insertRows + \" from the Asset Database\");\n        assetCursor.close();\n\n        Log.d(TAG,\"Deleting \" + sContext.getDatabasePath(assetDatabaseName).getPath());\n        if ((new File(sContext.getDatabasePath(assetDatabaseName).getPath())).delete()) {\n            Log.d(TAG,\"Copied AssetDatabase successfully deleted.\");\n        } else {\n            Log.d(TAG,\"Copied Asset Database file not deleted????\");\n        }\n        Log.d(TAG,\"Finished\");\n    }\n\n    private static void copyDatabaseFromAssets(Context context, String assetName, String databaseName) {\n        String TAG = \"COPYDBFROMASSET\";\n        int bufferSize = 1024 * 4, length = 0, read = 0, written = 0, chunks = 0;\n        byte[] buffer = new byte[bufferSize];\n        try {\n            Log.d(TAG,\"Attempting opening asset \" + assetName + \" as an InputFileStream.\");\n            InputStream is = context.getAssets().open(assetName);\n            Log.d(TAG,\"Attempting opening FileOutputStream \" + context.getDatabasePath(databaseName).getPath());\n            OutputStream os = new FileOutputStream(context.getDatabasePath(databaseName));\n            Log.d(TAG,\"Initiating copy.\");\n            while((length = is.read(buffer)) &gt; 0) {\n                read += length;\n                os.write(buffer,0,length);\n                written += length;\n                chunks++;\n            }\n            Log.d(TAG,\"Read \" + read + \"bytes; Wrote \" + written + \" bytes; in \" + chunks);\n            Log.d(TAG,\"Finalising (Flush and Close output and close input)\");\n            os.flush();\n            os.close();\n            is.close();\n            Log.d(TAG,\"Finalised\");\n\n        } catch (IOException e) {\n            throw new RuntimeException(\"Error copying Database from Asset \" + e.getMessage());\n        }\n    }\n\n    private static void setAssetDBToWALMode(String assetDBPath) {\n        SQLiteDatabase db = SQLiteDatabase.openDatabase(assetDBPath,null,SQLiteDatabase.OPEN_READWRITE);\n        db.enableWriteAheadLogging();\n        db.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11568420,"reputation":1540,"user_id":8475893,"display_name":"prashant17"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1590595597,"creation_date":1590595597,"answer_id":62047665,"question_id":59064933,"body_markdown":"Yes, It is possible.\r\n\r\n**The one precondition is your pre-shipped database and app database version must be the same.** For example, your first release will have both databases as version 1. Now for the second release with new data update the pre-shipped and app database version to 2 and your database builder code will look like this:\r\n\r\n    Room.databaseBuilder(context.getApplicationContext(), AppDatabase.class, &quot;app_database.db&quot;)\r\n                                .createFromAsset(&quot;database/QuotesDB.db&quot;)\r\n                                .fallbackToDestructiveMigration()\r\n                                .build();\r\n\r\n[Prepopulate your Room database Docs][1]\r\n\r\n[This medium article][2] explains this nicely\r\n\r\n\r\n  [1]: https://developer.android.com/training/data-storage/room/prepopulate\r\n  [2]: https://medium.com/androiddevelopers/packing-the-room-pre-populate-your-database-with-this-one-method-333ae190e680","title":"Merge user&#39;s Android Room database when migrating database","body":"<p>Yes, It is possible.</p>\n\n<p><strong>The one precondition is your pre-shipped database and app database version must be the same.</strong> For example, your first release will have both databases as version 1. Now for the second release with new data update the pre-shipped and app database version to 2 and your database builder code will look like this:</p>\n\n<pre><code>Room.databaseBuilder(context.getApplicationContext(), AppDatabase.class, \"app_database.db\")\n                            .createFromAsset(\"database/QuotesDB.db\")\n                            .fallbackToDestructiveMigration()\n                            .build();\n</code></pre>\n\n<p><a href=\"https://developer.android.com/training/data-storage/room/prepopulate\" rel=\"nofollow noreferrer\">Prepopulate your Room database Docs</a></p>\n\n<p><a href=\"https://medium.com/androiddevelopers/packing-the-room-pre-populate-your-database-with-this-one-method-333ae190e680\" rel=\"nofollow noreferrer\">This medium article</a> explains this nicely</p>\n"},{"tags":[],"owner":{"account_id":6583488,"reputation":3,"user_id":5087036,"display_name":"Abdullah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619931047,"creation_date":1619931047,"answer_id":67353086,"question_id":59064933,"body_markdown":"**Yes it is possible!**\r\nincrease your SQLite VERSION and add .fallbackToDestructiveMigration() in your Room.databaseBuilder()\r\n\r\n\r\n    Room.databaseBuilder(context.getApplicationContext(), AppDatabase.class, &quot;app_database.db&quot;)\r\n           .createFromAsset(&quot;database/QuotesDB.db&quot;)\r\n           .fallbackToDestructiveMigration()\r\n           .build();","title":"Merge user&#39;s Android Room database when migrating database","body":"<p><strong>Yes it is possible!</strong>\nincrease your SQLite VERSION and add .fallbackToDestructiveMigration() in your Room.databaseBuilder()</p>\n<pre><code>Room.databaseBuilder(context.getApplicationContext(), AppDatabase.class, &quot;app_database.db&quot;)\n       .createFromAsset(&quot;database/QuotesDB.db&quot;)\n       .fallbackToDestructiveMigration()\n       .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7673543,"reputation":3490,"user_id":5815054,"accept_rate":50,"display_name":"hb0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677148197,"creation_date":1677146143,"answer_id":75543162,"question_id":59064933,"body_markdown":"Ended up here with a similar issue, so for future readers:\r\n\r\n&lt;h3&gt;How to merge an existing database with another database?&lt;/h3&gt;\r\n\r\nI ended up with the following:\r\n\r\n```\r\n@Database(...) abstract class MainDatabase : RoomDatabase() {\r\n\r\n    // Default Singleton pattern code\r\n    companion object {\r\n        @Volatile private var INSTANCE: Database? = null\r\n\r\n        fun getDatabase(context: Context): Database {\r\n            return INSTANCE ?: synchronized(this) {\r\n\r\n\r\n                // Located here to have access to `Context`\r\n                val MIGRATION_17_18 = object : Migration(17, 18) {\r\n                    override fun migrate(database: SupportSQLiteDatabase) {\r\n\r\n                        // Check if `secondDb` exists\r\n                        val file = context.getDatabasePath(SecondDatabase.DATABASE_NAME)\r\n                        if (file.exists()) {\r\n                            // Using a build method which includes all migation steps for `secondDb`\r\n                            val secondDb = SecondDatabase.build(context)\r\n                            // TODO: add handling for different `secondDb` versions\r\n\r\n                            // Insert the data from the `secondDb`\r\n                            secondDb.locationDao().all.forEach {\r\n                                database.execSQL(\r\n                                    &quot;INSERT INTO `Location` (`id`, ...)&quot;\r\n                                            + &quot; VALUES (&#39;&quot; + it.uid + &quot;&#39;, ...)&quot;\r\n                                )\r\n                            }\r\n\r\n                            // Drop `secondDb` (this also deleted temp files like `wal`, `sha`, etc.\r\n                            context.deleteDatabase(SecondDatabase.DATABASE_NAME)\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n                // Default building code for Singleton Pattern\r\n                val instance = Room.databaseBuilder(\r\n                    context.applicationContext,\r\n                    Database::class.java,\r\n                    &quot;mainDb&quot;\r\n                )\r\n                    .enableMultiInstanceInvalidation()\r\n                    .addMigrations(MIGRATION_17_18)\r\n                    .build()\r\n                INSTANCE = instance\r\n                return instance\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nI&#39;m using the Singleton pattern as suggested [here][1]\r\n\r\n\r\n  [1]: https://developer.android.com/codelabs/android-room-with-a-view-kotlin#7","title":"Merge user&#39;s Android Room database when migrating database","body":"<p>Ended up here with a similar issue, so for future readers:</p>\n<h3>How to merge an existing database with another database?</h3>\n<p>I ended up with the following:</p>\n<pre><code>@Database(...) abstract class MainDatabase : RoomDatabase() {\n\n    // Default Singleton pattern code\n    companion object {\n        @Volatile private var INSTANCE: Database? = null\n\n        fun getDatabase(context: Context): Database {\n            return INSTANCE ?: synchronized(this) {\n\n\n                // Located here to have access to `Context`\n                val MIGRATION_17_18 = object : Migration(17, 18) {\n                    override fun migrate(database: SupportSQLiteDatabase) {\n\n                        // Check if `secondDb` exists\n                        val file = context.getDatabasePath(SecondDatabase.DATABASE_NAME)\n                        if (file.exists()) {\n                            // Using a build method which includes all migation steps for `secondDb`\n                            val secondDb = SecondDatabase.build(context)\n                            // TODO: add handling for different `secondDb` versions\n\n                            // Insert the data from the `secondDb`\n                            secondDb.locationDao().all.forEach {\n                                database.execSQL(\n                                    &quot;INSERT INTO `Location` (`id`, ...)&quot;\n                                            + &quot; VALUES ('&quot; + it.uid + &quot;', ...)&quot;\n                                )\n                            }\n\n                            // Drop `secondDb` (this also deleted temp files like `wal`, `sha`, etc.\n                            context.deleteDatabase(SecondDatabase.DATABASE_NAME)\n                        }\n                    }\n                }\n\n\n                // Default building code for Singleton Pattern\n                val instance = Room.databaseBuilder(\n                    context.applicationContext,\n                    Database::class.java,\n                    &quot;mainDb&quot;\n                )\n                    .enableMultiInstanceInvalidation()\n                    .addMigrations(MIGRATION_17_18)\n                    .build()\n                INSTANCE = instance\n                return instance\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>I'm using the Singleton pattern as suggested <a href=\"https://developer.android.com/codelabs/android-room-with-a-view-kotlin#7\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":9697320,"reputation":169,"user_id":7193338,"display_name":"Kate Lastimosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1975,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1677148197,"creation_date":1574839003,"question_id":59064933,"body_markdown":"I have a Room database which is stored in assets/database with its preloaded data. I am creating an updated version with more contents in the database for the next update.\r\n        \r\nCurrently, if I add new contents to the database with no schema changes and reinstall the app, these new contents do not show up. The only way I can see the changes is if I uninstall and reinstall the app. However, I need to merge the user&#39;s data with the database with the new contents since I need to get the &quot;favorites&quot; of the user which is an integer column of a table with the item contents. \r\n\r\nIs this possible?\r\n\r\nThis is how I create my database.\r\n\r\n```java\r\npublic static AppDatabase getInMemoryDatabase(Context context) {\r\n    if (INSTANCE == null) {\r\n        synchronized (AppDatabase.class) {\r\n            if (INSTANCE == null) {\r\n                INSTANCE = Room.databaseBuilder(context.getApplicationContext(), AppDatabase.class, &quot;app_database.db&quot;)\r\n                        .createFromAsset(&quot;database/QuotesDB.db&quot;)\r\n                        .addMigrations(MIGRATION_1_2)\r\n                        .build();\r\n            }\r\n        }\r\n    }\r\n    return INSTANCE;\r\n}\r\n```\r\n\r\nI tried to migrate with the following code but it still doesn&#39;t update the contents.\r\n\r\n```java\r\n/**\r\n * Migrate from:\r\n * version 1 - initial contents.\r\n * to\r\n * version 2 - updated database contents (no schema changes)\r\n */\r\n@VisibleForTesting\r\nstatic final Migration MIGRATION_1_2 = new Migration(1, 2) {\r\n    @Override\r\n    public void migrate(SupportSQLiteDatabase database) {\r\n        // I need to tell Room that it should use the data\r\n        // from version 1 ( with the user&#39;s favorites ) to version 2.\r\n    }\r\n};\r\n```","title":"Merge user&#39;s Android Room database when migrating database","body":"<p>I have a Room database which is stored in assets/database with its preloaded data. I am creating an updated version with more contents in the database for the next update.</p>\n<p>Currently, if I add new contents to the database with no schema changes and reinstall the app, these new contents do not show up. The only way I can see the changes is if I uninstall and reinstall the app. However, I need to merge the user's data with the database with the new contents since I need to get the &quot;favorites&quot; of the user which is an integer column of a table with the item contents.</p>\n<p>Is this possible?</p>\n<p>This is how I create my database.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static AppDatabase getInMemoryDatabase(Context context) {\n    if (INSTANCE == null) {\n        synchronized (AppDatabase.class) {\n            if (INSTANCE == null) {\n                INSTANCE = Room.databaseBuilder(context.getApplicationContext(), AppDatabase.class, &quot;app_database.db&quot;)\n                        .createFromAsset(&quot;database/QuotesDB.db&quot;)\n                        .addMigrations(MIGRATION_1_2)\n                        .build();\n            }\n        }\n    }\n    return INSTANCE;\n}\n</code></pre>\n<p>I tried to migrate with the following code but it still doesn't update the contents.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Migrate from:\n * version 1 - initial contents.\n * to\n * version 2 - updated database contents (no schema changes)\n */\n@VisibleForTesting\nstatic final Migration MIGRATION_1_2 = new Migration(1, 2) {\n    @Override\n    public void migrate(SupportSQLiteDatabase database) {\n        // I need to tell Room that it should use the data\n        // from version 1 ( with the user's favorites ) to version 2.\n    }\n};\n</code></pre>\n"},{"tags":["java","image-processing","image-segmentation"],"answers":[{"tags":[],"owner":{"account_id":207954,"reputation":1006,"user_id":458139,"accept_rate":90,"display_name":"Lavir the Whiolet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1288597080,"creation_date":1288597080,"answer_id":4067272,"question_id":4067245,"body_markdown":"MATLAB is better for image processing. And the best way is to find special image processing tools (or libraries).","title":"how to perform the image segmentation in java?","body":"<p>MATLAB is better for image processing. And the best way is to find special image processing tools (or libraries).</p>\n"},{"tags":[],"owner":{"account_id":209952,"reputation":3852,"user_id":461295,"accept_rate":62,"display_name":"bjoernz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1288703724,"creation_date":1288703724,"answer_id":4077991,"question_id":4067245,"body_markdown":"You can use the [Java Advanced Imaging (JAI)][1] Library to do image processing in java. You have to decide for yourself whether Java or MATLAB is better for you.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/technologies/desktop/media/jai/","title":"how to perform the image segmentation in java?","body":"<p>You can use the <a href=\"http://java.sun.com/javase/technologies/desktop/media/jai/\" rel=\"nofollow\">Java Advanced Imaging (JAI)</a> Library to do image processing in java. You have to decide for yourself whether Java or MATLAB is better for you.</p>\n"},{"tags":[],"owner":{"account_id":691340,"reputation":232,"user_id":563592,"display_name":"Radim Burget"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677147922,"creation_date":1312370227,"answer_id":6925607,"question_id":4067245,"body_markdown":"For image segmentation in JAVA you can also consider to use open-source IMMI tool ([http://spl.utko.feec.vutbr.cz/en/][1]). In comparison to Matlab, it is (in my opinion) more simple to use and simply enables also image mining.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20111124193808/http://spl.utko.feec.vutbr.cz/en/","title":"how to perform the image segmentation in java?","body":"<p>For image segmentation in JAVA you can also consider to use open-source IMMI tool (<a href=\"https://web.archive.org/web/20111124193808/http://spl.utko.feec.vutbr.cz/en/\" rel=\"nofollow noreferrer\">http://spl.utko.feec.vutbr.cz/en/</a>). In comparison to Matlab, it is (in my opinion) more simple to use and simply enables also image mining.</p>\n"},{"tags":[],"owner":{"account_id":3356071,"reputation":367,"user_id":2818958,"accept_rate":100,"display_name":"Gujjar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1392384417,"creation_date":1392383342,"answer_id":21780306,"question_id":4067245,"body_markdown":"Algorithm for Image segmentation depends upon what type of output you want after segmentation. Each algorithm performs a different segmentation. I think the region growing or [Flood Fill](http://en.wikipedia.org/wiki/Flood_fill) is good for this purpose.\r\nYou can use Java/JAI and JavaCV for this Image processing tasks.","title":"how to perform the image segmentation in java?","body":"<p>Algorithm for Image segmentation depends upon what type of output you want after segmentation. Each algorithm performs a different segmentation. I think the region growing or <a href=\"http://en.wikipedia.org/wiki/Flood_fill\" rel=\"nofollow\">Flood Fill</a> is good for this purpose.\nYou can use Java/JAI and JavaCV for this Image processing tasks.</p>\n"},{"tags":[],"owner":{"account_id":2815364,"reputation":4577,"user_id":2420599,"display_name":"Gabriel Archanjo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1467769361,"creation_date":1467727162,"answer_id":38205412,"question_id":4067245,"body_markdown":"I think the best image processing tool for you depends on the kind of project you&#39;re working on. \r\n\r\nIf you&#39;re working on a research project that needs productivity, quick validation and writting reports, **Matlab** and similar tools are the best option. On the other hand, if you&#39;re developing a software product, **Java, C++, C, Objective-C, etc** is more indicated. Matlab solutions are not easy to deliver and maintain in production.\r\n\r\nSince you asked how to do image segmentation in Java, I&#39;ll provide an example using Java and [Marvin Image Processing Framework][1]. As suggested by @Asif Sharif, FloodFill segmentation is a good strategy and I used it!\r\n\r\n**INPUT IMAGE:**\r\n[![enter image description here][2]][2]\r\n\r\n**OUTPUT IMAGE:**\r\n[![enter image description here][3]][3]\r\n\r\n**HOW IT WORKS:**\r\n\r\n 1. Load input image.\r\n 2. Change green pixels to white pixels.\r\n 3. Apply intensity thresholding for separating foreground from background.\r\n 4. Apply morphological closing to group separated parts of the same object\r\n 5. Use FloodFill segmentation to get the segments.\r\n 6. Draw the segments coordinates in the original image.\r\n\r\n**SOURCE:**\r\n\r\n    import static marvin.MarvinPluginCollection.*;\r\n\t\r\n\tpublic class SimpleSegmentation {\r\n\t\tpublic SimpleSegmentation(){\r\n\t\t\t// 1. Load image\r\n\t\t\tMarvinImage original = MarvinImageIO.loadImage(&quot;./res/robocup.jpg&quot;);\r\n\t\t\tMarvinImage image = original.clone();\r\n\t\t\t// 2. Change green pixels to white\r\n\t\t\tfilterGreen(image);\r\n\t\t\t// 3. Use threshold to separate foreground and background.\r\n\t\t\tMarvinImage bin = MarvinColorModelConverter.rgbToBinary(image, 127);\r\n\t\t\t// 4. Morphological closing to group separated parts of the same object\r\n\t\t\tmorphologicalClosing(bin.clone(), bin, MarvinMath.getTrueMatrix(30, 30));\r\n\t\t\t// 5. Use Floodfill segmention to get image segments\r\n\t\t\timage = MarvinColorModelConverter.binaryToRgb(bin);\r\n\t\t\tMarvinSegment[] segments = floodfillSegmentation(image);\r\n\t\t\t// 6. Show the segments in the original image\r\n\t\t\tfor(int i=1; i&lt;segments.length; i++){\r\n\t\t\t\tMarvinSegment seg = segments[i];\r\n\t\t\t\toriginal.drawRect(seg.x1, seg.y1, seg.width, seg.height, Color.yellow);\r\n\t\t\t\toriginal.drawRect(seg.x1+1, seg.y1+1, seg.width, seg.height, Color.yellow);\r\n\t\t\t}\r\n\t\t\tMarvinImageIO.saveImage(original, &quot;./res/robocup_segmented.png&quot;);\r\n\t\t}\r\n\t\tprivate void filterGreen(MarvinImage image){\r\n\t\t\tint r,g,b;\r\n\t\t\tfor(int y=0; y&lt;image.getHeight(); y++){\r\n\t\t\t\tfor(int x=0; x&lt;image.getWidth(); x++){\r\n\t\t\t\t\tr = image.getIntComponent0(x, y);\r\n\t\t\t\t\tg = image.getIntComponent1(x, y);\r\n\t\t\t\t\tb = image.getIntComponent2(x, y);\r\n\t\t\t\t\tif(g &gt; r*1.5 &amp;&amp; g &gt; b*1.5){\r\n\t\t\t\t\t\timage.setIntColor(x, y, 255,255,255);\r\n\t\t\t}}}\r\n\t\t}\r\n\t\tpublic static void main(String[] args) { new SimpleSegmentation();\t}\r\n\t}\r\n\r\n  [1]: http://marvinproject.sourceforge.net/\r\n  [2]: http://i.stack.imgur.com/tbH2b.jpg\r\n  [3]: http://i.stack.imgur.com/I2Pxj.png","title":"how to perform the image segmentation in java?","body":"<p>I think the best image processing tool for you depends on the kind of project you're working on. </p>\n\n<p>If you're working on a research project that needs productivity, quick validation and writting reports, <strong>Matlab</strong> and similar tools are the best option. On the other hand, if you're developing a software product, <strong>Java, C++, C, Objective-C, etc</strong> is more indicated. Matlab solutions are not easy to deliver and maintain in production.</p>\n\n<p>Since you asked how to do image segmentation in Java, I'll provide an example using Java and <a href=\"http://marvinproject.sourceforge.net/\" rel=\"nofollow noreferrer\">Marvin Image Processing Framework</a>. As suggested by @Asif Sharif, FloodFill segmentation is a good strategy and I used it!</p>\n\n<p><strong>INPUT IMAGE:</strong>\n<a href=\"https://i.stack.imgur.com/tbH2b.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tbH2b.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>OUTPUT IMAGE:</strong>\n<a href=\"https://i.stack.imgur.com/I2Pxj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I2Pxj.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>HOW IT WORKS:</strong></p>\n\n<ol>\n<li>Load input image.</li>\n<li>Change green pixels to white pixels.</li>\n<li>Apply intensity thresholding for separating foreground from background.</li>\n<li>Apply morphological closing to group separated parts of the same object</li>\n<li>Use FloodFill segmentation to get the segments.</li>\n<li>Draw the segments coordinates in the original image.</li>\n</ol>\n\n<p><strong>SOURCE:</strong></p>\n\n<pre><code>import static marvin.MarvinPluginCollection.*;\n\npublic class SimpleSegmentation {\n    public SimpleSegmentation(){\n        // 1. Load image\n        MarvinImage original = MarvinImageIO.loadImage(\"./res/robocup.jpg\");\n        MarvinImage image = original.clone();\n        // 2. Change green pixels to white\n        filterGreen(image);\n        // 3. Use threshold to separate foreground and background.\n        MarvinImage bin = MarvinColorModelConverter.rgbToBinary(image, 127);\n        // 4. Morphological closing to group separated parts of the same object\n        morphologicalClosing(bin.clone(), bin, MarvinMath.getTrueMatrix(30, 30));\n        // 5. Use Floodfill segmention to get image segments\n        image = MarvinColorModelConverter.binaryToRgb(bin);\n        MarvinSegment[] segments = floodfillSegmentation(image);\n        // 6. Show the segments in the original image\n        for(int i=1; i&lt;segments.length; i++){\n            MarvinSegment seg = segments[i];\n            original.drawRect(seg.x1, seg.y1, seg.width, seg.height, Color.yellow);\n            original.drawRect(seg.x1+1, seg.y1+1, seg.width, seg.height, Color.yellow);\n        }\n        MarvinImageIO.saveImage(original, \"./res/robocup_segmented.png\");\n    }\n    private void filterGreen(MarvinImage image){\n        int r,g,b;\n        for(int y=0; y&lt;image.getHeight(); y++){\n            for(int x=0; x&lt;image.getWidth(); x++){\n                r = image.getIntComponent0(x, y);\n                g = image.getIntComponent1(x, y);\n                b = image.getIntComponent2(x, y);\n                if(g &gt; r*1.5 &amp;&amp; g &gt; b*1.5){\n                    image.setIntColor(x, y, 255,255,255);\n        }}}\n    }\n    public static void main(String[] args) { new SimpleSegmentation();  }\n}\n</code></pre>\n"}],"owner":{"account_id":646034,"reputation":31,"user_id":435046,"display_name":"ilan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8272,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1677147922,"creation_date":1288596549,"question_id":4067245,"body_markdown":"hi guys i am an infant for  image processing technique in java , i have decided to develop one project in image processing so i need what are the algorithms are followed and also which one is easier to develop please some one guide me it may be great for me.....and also which technology is best for image processing java or Matlab? guide me...","title":"how to perform the image segmentation in java?","body":"<p>hi guys i am an infant for  image processing technique in java , i have decided to develop one project in image processing so i need what are the algorithms are followed and also which one is easier to develop please some one guide me it may be great for me.....and also which technology is best for image processing java or Matlab? guide me...</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":345995,"reputation":6762,"user_id":679240,"accept_rate":61,"display_name":"Haroldo_OK"},"score":0,"creation_date":1677147409,"post_id":75543300,"comment_id":133281833,"body_markdown":"I would recommend either using a debugger or adding more logs, in order to know at which step of the routine the execution is getting stuck. Adding a `try/catch` block and putting the exception on the log (including the stack trace) would help you a lot; if some errror is happening, the stack trace will tell you the exact line where it happened.","body":"I would recommend either using a debugger or adding more logs, in order to know at which step of the routine the execution is getting stuck. Adding a <code>try&#47;catch</code> block and putting the exception on the log (including the stack trace) would help you a lot; if some errror is happening, the stack trace will tell you the exact line where it happened."},{"owner":{"account_id":7599708,"reputation":182,"user_id":5764770,"display_name":"Vishal Jamdade"},"score":0,"creation_date":1677147438,"post_id":75543300,"comment_id":133281840,"body_markdown":"Try adding @EnableScheduling annotation above main class.","body":"Try adding @EnableScheduling annotation above main class."},{"owner":{"account_id":17651854,"reputation":1,"user_id":12812176,"display_name":"Venu"},"score":0,"creation_date":1677148201,"post_id":75543300,"comment_id":133282074,"body_markdown":"@Vishal Jamdade Yes, I added the EnableScheduling annotation. But it does not work. I can see the logs in the console but nothing is being saved to the database.","body":"@Vishal Jamdade Yes, I added the EnableScheduling annotation. But it does not work. I can see the logs in the console but nothing is being saved to the database."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1677148281,"post_id":75543300,"comment_id":133282101,"body_markdown":"You are doing reactive programming but aren&#39;t subscribing to any of it, so you only define the reactive stream but don&#39;t do anything with it. You should have something like `this.testScheduled(someName, someType).subscribe()`.","body":"You are doing reactive programming but aren&#39;t subscribing to any of it, so you only define the reactive stream but don&#39;t do anything with it. You should have something like <code>this.testScheduled(someName, someType).subscribe()</code>."}],"owner":{"account_id":17651854,"reputation":1,"user_id":12812176,"display_name":"Venu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677147704,"creation_date":1677146884,"question_id":75543300,"body_markdown":"I have to auto run and save data to DB every 5 minutes. I tried to use Scheduled Spring framework. In the console I could see that the task is running but not saved in the database.\r\n\r\n    @Override\r\n    public Single&lt;xModel&gt; testScheduled(@NonNull String someName, @NonNull String someType) {\r\n      log.info(&quot;entering testScheduled, someName = {}, someType = {}&quot;, someName, someType);\r\n      ReadPoint readPoint = readPointRepository.findById(someName).orElseThrow();\r\n      String configurationName = Try.of(() -&gt; readType.valueOf(readPoint.getType()))\r\n        .orElse(Try.success(readType.DEFAULT))\r\n        .map(readType::getConfigurationName)\r\n        .get();\r\n        log.info(&quot;test={}&quot;, readPoint);\r\n      var inv = invClient\r\n        .epcInv(readPoint.getReadIp(), \r\n    readPoint.getConfiguration().getAnte(),\r\n    Optional.of(configurationName), Optional.empty())\r\n        .map(pcs -&gt; pcs.stream()\r\n        .map(pce -&gt; new yModel(pce, getRealDeno(pce)))\r\n        .collect(Collectors.toSet()))\r\n        .map(chips -&gt; new xModel(someType, someName, chips))\r\n        .doOnSuccess(mModel -&gt; upsert(mModel));\r\n      return inv;\r\n    }\r\n\r\n    @Scheduled(fixedRate = 10000)\r\n    public void schetestsee() {\r\n      System.out.println(Thread.currentThread().getName()+&quot;Wonderful Task executed at &quot;+ new Date());\r\n      String someName = &quot;testsomething&quot;;\r\n      String someType = &quot;SCHEDULED&quot;;\r\n      log.info(&quot;EnteringSchedutestsee&quot;);\r\n      this.testScheduled(someName, someType);\r\n    }\r\n\r\n\r\nI&#39;m trying to do in the same class.","title":"I&#39;m new to Spring, The scheduled task is not saving data to the database, @Scheduled not working","body":"<p>I have to auto run and save data to DB every 5 minutes. I tried to use Scheduled Spring framework. In the console I could see that the task is running but not saved in the database.</p>\n<pre><code>@Override\npublic Single&lt;xModel&gt; testScheduled(@NonNull String someName, @NonNull String someType) {\n  log.info(&quot;entering testScheduled, someName = {}, someType = {}&quot;, someName, someType);\n  ReadPoint readPoint = readPointRepository.findById(someName).orElseThrow();\n  String configurationName = Try.of(() -&gt; readType.valueOf(readPoint.getType()))\n    .orElse(Try.success(readType.DEFAULT))\n    .map(readType::getConfigurationName)\n    .get();\n    log.info(&quot;test={}&quot;, readPoint);\n  var inv = invClient\n    .epcInv(readPoint.getReadIp(), \nreadPoint.getConfiguration().getAnte(),\nOptional.of(configurationName), Optional.empty())\n    .map(pcs -&gt; pcs.stream()\n    .map(pce -&gt; new yModel(pce, getRealDeno(pce)))\n    .collect(Collectors.toSet()))\n    .map(chips -&gt; new xModel(someType, someName, chips))\n    .doOnSuccess(mModel -&gt; upsert(mModel));\n  return inv;\n}\n\n@Scheduled(fixedRate = 10000)\npublic void schetestsee() {\n  System.out.println(Thread.currentThread().getName()+&quot;Wonderful Task executed at &quot;+ new Date());\n  String someName = &quot;testsomething&quot;;\n  String someType = &quot;SCHEDULED&quot;;\n  log.info(&quot;EnteringSchedutestsee&quot;);\n  this.testScheduled(someName, someType);\n}\n</code></pre>\n<p>I'm trying to do in the same class.</p>\n"},{"tags":["java","spring","boot","apo"],"comments":[{"owner":{"account_id":7599708,"reputation":182,"user_id":5764770,"display_name":"Vishal Jamdade"},"score":0,"creation_date":1677147582,"post_id":75543407,"comment_id":133281888,"body_markdown":"You can pass multiple parameters with comma separation.","body":"You can pass multiple parameters with comma separation."}],"owner":{"account_id":19375838,"reputation":1,"user_id":14168125,"display_name":"Ramkumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677163689,"answer_count":0,"score":0,"last_activity_date":1677147426,"creation_date":1677147426,"question_id":75543407,"body_markdown":"I have sending the @requestparama ( playload )in controller now I want to send the encrypted value also like @requestparam (name=&quot;name&quot; ) string name) \r\n\r\n\r\nHow to achieve this?\r\n\r\n\r\n\r\nHow to achieve this i need to send the those two values ","title":"How to modify the request paramter in controller","body":"<p>I have sending the @requestparama ( playload )in controller now I want to send the encrypted value also like @requestparam (name=&quot;name&quot; ) string name)</p>\n<p>How to achieve this?</p>\n<p>How to achieve this i need to send the those two values</p>\n"},{"tags":["java","rest","swagger"],"answers":[{"tags":[],"owner":{"account_id":94182,"reputation":4442,"user_id":257272,"accept_rate":83,"display_name":"Julian Go"},"down_vote_count":3,"up_vote_count":8,"is_accepted":false,"score":5,"last_activity_date":1480438742,"creation_date":1480438742,"answer_id":40871515,"question_id":33753340,"body_markdown":"Yes, see [this section][1] of the swagger spec. You can specify a `maxLength` or `minLength` for your property. Here is an example in YAML:\r\n\r\n    definitions:\r\n      Error:\r\n        type: object\r\n        properties:\r\n          code:\r\n            type: integer\r\n            format: int32\r\n          message:\r\n            type: string\r\n            maxLength: 20\r\n\r\nThis would be displayed by swagger-ui like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: http://swagger.io/specification/#schemaObject\r\n  [2]: https://i.stack.imgur.com/NACrD.png","title":"Is there a way to indicate that a string model property has a maximum length in Swagger?","body":"<p>Yes, see <a href=\"http://swagger.io/specification/#schemaObject\" rel=\"noreferrer\">this section</a> of the swagger spec. You can specify a <code>maxLength</code> or <code>minLength</code> for your property. Here is an example in YAML:</p>\n\n<pre><code>definitions:\n  Error:\n    type: object\n    properties:\n      code:\n        type: integer\n        format: int32\n      message:\n        type: string\n        maxLength: 20\n</code></pre>\n\n<p>This would be displayed by swagger-ui like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NACrD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/NACrD.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1534852633,"creation_date":1534783522,"answer_id":51935210,"question_id":33753340,"body_markdown":"Using the `@ApiModelProperty` Swagger annotation, you can use `dataType`, `allowableValues` and `range`:\r\n\r\n    @ApiModelProperty(value = &quot;Nome da lista&quot;, required = false, \r\n        dataType=&quot;java.lang.String&quot;, \r\n        allowableValues=&quot;range[-infinity, 100]&quot;)\r\n    String getNome();\r\n\r\nResult on Swagger UI:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe `-infinity` is used to hide the minimum value. If you would like to set the min value, just fill with the number:\r\n\r\n    allowableValues=&quot;range[5, 100]&quot;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/o2tuL.png","title":"Is there a way to indicate that a string model property has a maximum length in Swagger?","body":"<p>Using the <code>@ApiModelProperty</code> Swagger annotation, you can use <code>dataType</code>, <code>allowableValues</code> and <code>range</code>:</p>\n\n<pre><code>@ApiModelProperty(value = \"Nome da lista\", required = false, \n    dataType=\"java.lang.String\", \n    allowableValues=\"range[-infinity, 100]\")\nString getNome();\n</code></pre>\n\n<p>Result on Swagger UI:</p>\n\n<p><a href=\"https://i.stack.imgur.com/o2tuL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/o2tuL.png\" alt=\"enter image description here\"></a></p>\n\n<p>The <code>-infinity</code> is used to hide the minimum value. If you would like to set the min value, just fill with the number:</p>\n\n<pre><code>allowableValues=\"range[5, 100]\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7625234,"reputation":231,"user_id":5781924,"display_name":"mindSet"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1534855258,"creation_date":1534855258,"answer_id":51948910,"question_id":33753340,"body_markdown":"You can do very nicely if you are using spring project and you are using spring fox swagger api.\r\nConsider a bean - \r\n\r\n    public class Person {\r\n        @NotNull\r\n        private int id;\r\n    \r\n        @NotBlank\r\n        @Size(min = 1, max = 20)\r\n        private String firstName;\r\n    \r\n        @NotBlank\r\n        @Pattern(regexp =&quot;[SOME REGULAR EXPRESSION]&quot;)\r\n        private String lastName;\r\n    \r\n        @Min(0)\r\n        @Max(100)\r\n        private int age;\r\n    \r\n        //... Constructor, getters, setters, ...\r\n    }\r\nUse Maven dependency -\r\n\r\n    //MAVEN\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n        &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n        &lt;version&gt;2.9.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    //MAVEN\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n       &lt;artifactId&gt;springfox-bean-validators&lt;/artifactId&gt;\r\n       &lt;version&gt;2.9.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis will do your magic - @Import(BeanValidatorPluginsConfiguration.class)\r\nAnd you need to import BeanValidatorPluginsConfiguration configuration file on top of your swagger configuration class:\r\n \r\n\r\n      @Configuration\r\n        @EnableSwagger2\r\n        @Import(BeanValidatorPluginsConfiguration.class)\r\n        public class SpringFoxConfig {\r\n          ...\r\n        }\r\n    \r\n\r\n   \r\nIf you dont have a configuration class for swagger then put it above your controller\r\n\r\n     @RestController\r\n         @EnableSwagger2\r\n            @Import(BeanValidatorPluginsConfiguration.class)\r\n        @RequestMapping(&quot;/v2/persons/&quot;)\r\n        @Api(description = &quot;Set of endpoints for Creating, Retrieving, Updating and Deleting of Persons.&quot;)\r\n        public class PersonController {\r\n        \r\n            private PersonService personService;\r\n        \r\n            @RequestMapping(method = RequestMethod.GET, produces = &quot;application/json&quot;)\r\n            @ApiOperation(&quot;Returns list of all Persons in the system.&quot;)\r\n            public List getAllPersons() {\r\n                return personService.getAllPersons();\r\n            }\r\nWith data from JSR-303 annotations, it will look much better in swagger documentation:\r\n\r\n    {\r\n    \t\tage integer ($int32)\r\n    \t\t\t\t\tminimum: 100\r\n    \t\t\t\t\tmaximum: 100\r\n    \t\tfirstName* string\r\n    \t\t\t\tminimumLength: 100\r\n    \t\t\t\tmaxLength: 100\r\n    \t}\r\n\r\nJSR 303: Bean Validation allows you to annotate fields of your Java classes to declare constraints and validation rules. You can annotate individual fields with rules such as -- cannot be null, minimal value, maximal value, regular expression match and so on.\r\nThis is a common practice which is already widely used. The good news is that SpringFox can generate Swagger documentation based on such annotations, so you can utilize what you already have in your project without writing all the constraints manually! It is very useful as consumers of your API know what are restrictions on the values they should provide to your API and what values to expect. Without the inclusion of such annotations, the generated documentation for our person model looks rather plain, nothing except for field names and their data type.","title":"Is there a way to indicate that a string model property has a maximum length in Swagger?","body":"<p>You can do very nicely if you are using spring project and you are using spring fox swagger api.\nConsider a bean - </p>\n\n<pre><code>public class Person {\n    @NotNull\n    private int id;\n\n    @NotBlank\n    @Size(min = 1, max = 20)\n    private String firstName;\n\n    @NotBlank\n    @Pattern(regexp =\"[SOME REGULAR EXPRESSION]\")\n    private String lastName;\n\n    @Min(0)\n    @Max(100)\n    private int age;\n\n    //... Constructor, getters, setters, ...\n}\n</code></pre>\n\n<p>Use Maven dependency -</p>\n\n<pre><code>//MAVEN\n&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n    &lt;version&gt;2.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n//MAVEN\n&lt;dependency&gt;\n   &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n   &lt;artifactId&gt;springfox-bean-validators&lt;/artifactId&gt;\n   &lt;version&gt;2.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>This will do your magic - @Import(BeanValidatorPluginsConfiguration.class)\nAnd you need to import BeanValidatorPluginsConfiguration configuration file on top of your swagger configuration class:</p>\n\n<pre><code>  @Configuration\n    @EnableSwagger2\n    @Import(BeanValidatorPluginsConfiguration.class)\n    public class SpringFoxConfig {\n      ...\n    }\n</code></pre>\n\n<p>If you dont have a configuration class for swagger then put it above your controller</p>\n\n<pre><code> @RestController\n     @EnableSwagger2\n        @Import(BeanValidatorPluginsConfiguration.class)\n    @RequestMapping(\"/v2/persons/\")\n    @Api(description = \"Set of endpoints for Creating, Retrieving, Updating and Deleting of Persons.\")\n    public class PersonController {\n\n        private PersonService personService;\n\n        @RequestMapping(method = RequestMethod.GET, produces = \"application/json\")\n        @ApiOperation(\"Returns list of all Persons in the system.\")\n        public List getAllPersons() {\n            return personService.getAllPersons();\n        }\n</code></pre>\n\n<p>With data from JSR-303 annotations, it will look much better in swagger documentation:</p>\n\n<pre><code>{\n        age integer ($int32)\n                    minimum: 100\n                    maximum: 100\n        firstName* string\n                minimumLength: 100\n                maxLength: 100\n    }\n</code></pre>\n\n<p>JSR 303: Bean Validation allows you to annotate fields of your Java classes to declare constraints and validation rules. You can annotate individual fields with rules such as -- cannot be null, minimal value, maximal value, regular expression match and so on.\nThis is a common practice which is already widely used. The good news is that SpringFox can generate Swagger documentation based on such annotations, so you can utilize what you already have in your project without writing all the constraints manually! It is very useful as consumers of your API know what are restrictions on the values they should provide to your API and what values to expect. Without the inclusion of such annotations, the generated documentation for our person model looks rather plain, nothing except for field names and their data type.</p>\n"},{"tags":[],"owner":{"account_id":122358,"reputation":1,"user_id":3640483,"display_name":"Azwood"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677147237,"creation_date":1677147237,"answer_id":75543369,"question_id":33753340,"body_markdown":"If you are just using Springdoc, this can be achieved using the `@Schema` annotation.\r\n\r\n`\r\n@Schema(maxLength = 192)\r\nprivate String value;\r\n`\r\n\r\nThis will output a\r\n[maxLength property on the field][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/k3KOw.png","title":"Is there a way to indicate that a string model property has a maximum length in Swagger?","body":"<p>If you are just using Springdoc, this can be achieved using the <code>@Schema</code> annotation.</p>\n<p><code>@Schema(maxLength = 192) private String value;</code></p>\n<p>This will output a\n<a href=\"https://i.stack.imgur.com/k3KOw.png\" rel=\"nofollow noreferrer\">maxLength property on the field</a></p>\n"}],"owner":{"account_id":1419488,"reputation":2745,"user_id":1344424,"accept_rate":41,"display_name":"Teocali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31648,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":51948910,"answer_count":4,"score":19,"last_activity_date":1677147237,"creation_date":1447752631,"question_id":33753340,"body_markdown":"Context\r\n-------\r\nWe have a web application providing multiple REST webservice.\r\n \r\nAlong with this, we have swagger providing the documentation for the resources, using annotation.\r\n\r\nSome of these resources take a complex object in input as a body param. The class of this object is annotated with `@ApiModel`.\r\n\r\nIn some cases, we limit the length of some string properties, using `@Length` annotation from Bean Validations.\r\n\r\nQuestion\r\n--------\r\nWe want to see these restrictions to be visible in the documentation generated by swagger. Is there a way to do this?\r\n\r\nP.S.: the automatic interpretation of the `@Length` annotation would be nice but is not mandatory. Any other way would work too.","title":"Is there a way to indicate that a string model property has a maximum length in Swagger?","body":"<h2>Context</h2>\n\n<p>We have a web application providing multiple REST webservice.</p>\n\n<p>Along with this, we have swagger providing the documentation for the resources, using annotation.</p>\n\n<p>Some of these resources take a complex object in input as a body param. The class of this object is annotated with <code>@ApiModel</code>.</p>\n\n<p>In some cases, we limit the length of some string properties, using <code>@Length</code> annotation from Bean Validations.</p>\n\n<h2>Question</h2>\n\n<p>We want to see these restrictions to be visible in the documentation generated by swagger. Is there a way to do this?</p>\n\n<p>P.S.: the automatic interpretation of the <code>@Length</code> annotation would be nice but is not mandatory. Any other way would work too.</p>\n"},{"tags":["java","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677147208,"creation_date":1673356942,"answer_id":75070615,"question_id":75070614,"body_markdown":"At last I filtered out messages based on the presence of `JMSCorrelationID` header.\r\n\r\n    from(&quot;activemq:xxx&quot;)\r\n        .filter(simple(&quot;${header.JMSCorrelationID} == null&quot;)) // ignore reply\r\n        .to(&quot;direct:main&quot;);\r\n\r\nEven that I don&#39;t set it in my client side code, seems that Camel will use message id to set JMSCorrelationID when sending reply if the incoming message hasn&#39;t it. If incoming message already has JMSCorrelationID, Camel will not change it, and will copy that value to the reply.(I guess that if you manually set JMSCorrelationID in client side, Camel will stop setting it for you). \r\n\r\nSo basically, message without JMSCorrelationID means it&#39;s new message which hasn&#39;t passed through my client application. I think only client side should set it, especially in my case where original message and replies are put into the same queue, where client needs a mean to filter out replies.\r\n\r\nAlso, to stop Camel from &quot;capturing&quot;, you need to make sure other two things: \r\n\r\n * no concurrent consuming is happening\r\n * the queue is empty before your test(no leftover from previous test), as all my tests are running in sequential order with `@Order`. \r\n\r\n\r\nFor 1, set `replyTo(Max)ConcurrentConsumer` both to `1`, so that no concurrent consuming is happening; only one thread process this message. \r\n\r\n```java\r\nActiveMQComponent component = ActiveMQComponent.activeMQComponent(url);\r\n// we use request-reply mode so (max)ConcurrentConsumers are not taken into account; must set &quot;replyTo(Max)ConcurrentUsers&quot;.\r\n// see https://camel.apache.org/components/3.20.x/activemq-component.html\r\ncomponent.setReplyToConcurrentConsumers(1);\r\ncomponent.setReplyToMaxConcurrentConsumers(1); // seems every pod will have max consumers\r\n```\r\n\r\nFor 2, if last test rollbacked one message and put it back to the queue, I need to consume it before running the next test.\r\n\r\n---\r\n\r\nAt the very last, we separate the queues so even capturing is happening, it does not matter any more. ","title":"When source and replyTo is the same, stop Camel from consuming after route stopped","body":"<p>At last I filtered out messages based on the presence of <code>JMSCorrelationID</code> header.</p>\n<pre><code>from(&quot;activemq:xxx&quot;)\n    .filter(simple(&quot;${header.JMSCorrelationID} == null&quot;)) // ignore reply\n    .to(&quot;direct:main&quot;);\n</code></pre>\n<p>Even that I don't set it in my client side code, seems that Camel will use message id to set JMSCorrelationID when sending reply if the incoming message hasn't it. If incoming message already has JMSCorrelationID, Camel will not change it, and will copy that value to the reply.(I guess that if you manually set JMSCorrelationID in client side, Camel will stop setting it for you).</p>\n<p>So basically, message without JMSCorrelationID means it's new message which hasn't passed through my client application. I think only client side should set it, especially in my case where original message and replies are put into the same queue, where client needs a mean to filter out replies.</p>\n<p>Also, to stop Camel from &quot;capturing&quot;, you need to make sure other two things:</p>\n<ul>\n<li>no concurrent consuming is happening</li>\n<li>the queue is empty before your test(no leftover from previous test), as all my tests are running in sequential order with <code>@Order</code>.</li>\n</ul>\n<p>For 1, set <code>replyTo(Max)ConcurrentConsumer</code> both to <code>1</code>, so that no concurrent consuming is happening; only one thread process this message.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ActiveMQComponent component = ActiveMQComponent.activeMQComponent(url);\n// we use request-reply mode so (max)ConcurrentConsumers are not taken into account; must set &quot;replyTo(Max)ConcurrentUsers&quot;.\n// see https://camel.apache.org/components/3.20.x/activemq-component.html\ncomponent.setReplyToConcurrentConsumers(1);\ncomponent.setReplyToMaxConcurrentConsumers(1); // seems every pod will have max consumers\n</code></pre>\n<p>For 2, if last test rollbacked one message and put it back to the queue, I need to consume it before running the next test.</p>\n<hr />\n<p>At the very last, we separate the queues so even capturing is happening, it does not matter any more.</p>\n"}],"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75070615,"answer_count":1,"score":0,"last_activity_date":1677147208,"creation_date":1673356942,"question_id":75070614,"body_markdown":"Our system has configured to consume and send reply to the same queue, i.e., `JMSDestination` and `JMSReplyTo` are the same. I cannot change that right now.\r\n\r\nIn my integration test, if I set `replyToSameDestinationAllowed=true`, Camel continues to consume the reply I sent to the queue, i.e., it &quot;captures&quot; the source and never stop and enters a loop.\r\n\r\nBut, if I don&#39;t set it, Camel refuses to send the reply to the queue, saying this:\r\n\r\n&gt; JMSDestination and JMSReplyTo is the same, will skip sending a reply message to itself\r\n\r\nThat causes problem for my integration test. I want to consume the message in a separate method and assert against it.\r\n\r\nHow can I stop Camel from capturing this queue, i.e., consuming only once and ignore the rest? \r\n\r\nAt the end of my route I call `stop()` to send reply automatically. \r\n\r\nWhen receiving the second message(the reply), I see this line:\r\n\r\n&gt; 2023-01-10 14:37:22,186 DEBUG [org.apa.cam.com.jms.EndpointMessageListener]-{Camel (camel-1) thread #19 - JmsConsumer[my.queue]}-Received Message has JMSCorrelationID [ID:hostname-1673354133272-4:1:1:10:1]\r\n\r\nCan I use this to ignore the reply? Should I stop the route? Rollback? Or what should I do?\r\n","title":"When source and replyTo is the same, stop Camel from consuming after route stopped","body":"<p>Our system has configured to consume and send reply to the same queue, i.e., <code>JMSDestination</code> and <code>JMSReplyTo</code> are the same. I cannot change that right now.</p>\n<p>In my integration test, if I set <code>replyToSameDestinationAllowed=true</code>, Camel continues to consume the reply I sent to the queue, i.e., it &quot;captures&quot; the source and never stop and enters a loop.</p>\n<p>But, if I don't set it, Camel refuses to send the reply to the queue, saying this:</p>\n<blockquote>\n<p>JMSDestination and JMSReplyTo is the same, will skip sending a reply message to itself</p>\n</blockquote>\n<p>That causes problem for my integration test. I want to consume the message in a separate method and assert against it.</p>\n<p>How can I stop Camel from capturing this queue, i.e., consuming only once and ignore the rest?</p>\n<p>At the end of my route I call <code>stop()</code> to send reply automatically.</p>\n<p>When receiving the second message(the reply), I see this line:</p>\n<blockquote>\n<p>2023-01-10 14:37:22,186 DEBUG [org.apa.cam.com.jms.EndpointMessageListener]-{Camel (camel-1) thread #19 - JmsConsumer[my.queue]}-Received Message has JMSCorrelationID [ID:hostname-1673354133272-4:1:1:10:1]</p>\n</blockquote>\n<p>Can I use this to ignore the reply? Should I stop the route? Rollback? Or what should I do?</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":160350,"reputation":11421,"user_id":380338,"display_name":"Neil Stockton"},"score":0,"creation_date":1453987882,"post_id":35062385,"comment_id":57848347,"body_markdown":"If you assign &quot;p&quot; to &quot;new A()&quot; then it is obviously an instanceof A, by basic Java (nothing to do with JPA). If &quot;p&quot; is not an instanceof A then what class is it?","body":"If you assign &quot;p&quot; to &quot;new A()&quot; then it is obviously an instanceof A, by basic Java (nothing to do with JPA). If &quot;p&quot; is not an instanceof A then what class is it?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1453988375,"post_id":35062385,"comment_id":57848709,"body_markdown":"instanceof returns an instance type, if you created this instance then it should return true, if not you then you should ask who did it.","body":"instanceof returns an instance type, if you created this instance then it should return true, if not you then you should ask who did it."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":1,"creation_date":1453988521,"post_id":35062385,"comment_id":57848820,"body_markdown":"Do you really do `Parent p = new A();` or you get `A` from the database by Hibernate?","body":"Do you really do <code>Parent p = new A();</code> or you get <code>A</code> from the database by Hibernate?"},{"owner":{"account_id":6093107,"reputation":23142,"user_id":4754790,"accept_rate":94,"display_name":"Dragan Bozanovic"},"score":0,"creation_date":1453988765,"post_id":35062385,"comment_id":57848994,"body_markdown":"Post your real code, the case you described here is obviously impossible.","body":"Post your real code, the case you described here is obviously impossible."},{"owner":{"account_id":6093107,"reputation":23142,"user_id":4754790,"accept_rate":94,"display_name":"Dragan Bozanovic"},"score":0,"creation_date":1453989276,"post_id":35062385,"comment_id":57849421,"body_markdown":"True, this is probably a proxy. See [this answer](http://stackoverflow.com/a/32785467/4754790) for more details.","body":"True, this is probably a proxy. See <a href=\"http://stackoverflow.com/a/32785467/4754790\">this answer</a> for more details."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":1,"creation_date":1454001836,"post_id":35062385,"comment_id":57858995,"body_markdown":"There are a lot of answers here. But it is unclear what is the question :)","body":"There are a lot of answers here. But it is unclear what is the question :)"},{"owner":{"account_id":463786,"reputation":668,"user_id":866889,"accept_rate":60,"display_name":"Dmitry Aleksandrov"},"score":0,"creation_date":1454054724,"post_id":35062385,"comment_id":57881139,"body_markdown":"Actually the problem was a bit deeper and http://stackoverflow.com/questions/8770124/hibernate-4-classcastexception-on-lazy-loading-while-eager-works-fine helped me to resolve it. The &quot;Parent&quot; children were used inside of other entity and were set to load in lazy manner.. so it all failed. Thanks for suppoert anyway)","body":"Actually the problem was a bit deeper and <a href=\"http://stackoverflow.com/questions/8770124/hibernate-4-classcastexception-on-lazy-loading-while-eager-works-fine\" title=\"hibernate 4 classcastexception on lazy loading while eager works fine\">stackoverflow.com/questions/8770124/&hellip;</a> helped me to resolve it. The &quot;Parent&quot; children were used inside of other entity and were set to load in lazy manner.. so it all failed. Thanks for suppoert anyway)"},{"owner":{"account_id":1230408,"reputation":6991,"user_id":1195139,"accept_rate":76,"display_name":"Ben Thurley"},"score":0,"creation_date":1454065637,"post_id":35062385,"comment_id":57887767,"body_markdown":"@DmitryAlexandrov that doesn&#39;t mean you have to turn off lazy loading. Don&#39;t throw the baby out with the bath water! Honestly instanceof is best avoided anyway.","body":"@DmitryAlexandrov that doesn&#39;t mean you have to turn off lazy loading. Don&#39;t throw the baby out with the bath water! Honestly instanceof is best avoided anyway."}],"answers":[{"tags":[],"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453993602,"creation_date":1453993602,"answer_id":35065011,"question_id":35062385,"body_markdown":"That is because Hibernate uses run time proxies and OpenJPA, while supporting the proxy approach, prefers either compile time or runtime byte code enhancement.\r\n\r\nSee:\r\n\r\nhttp://openjpa.apache.org/entity-enhancement.html\r\n    \r\n    //Hibernate\r\n    Entity e = repository.load(entityId); // may return a proxy \r\n    \r\n    //OpenJPA\r\n    Entity e = repository.load(entityId); //will return an (enhanced) actual instance of E ","title":"JPA/Hibernate instance of not working","body":"<p>That is because Hibernate uses run time proxies and OpenJPA, while supporting the proxy approach, prefers either compile time or runtime byte code enhancement.</p>\n\n<p>See:</p>\n\n<p><a href=\"http://openjpa.apache.org/entity-enhancement.html\" rel=\"nofollow\">http://openjpa.apache.org/entity-enhancement.html</a></p>\n\n<pre><code>//Hibernate\nEntity e = repository.load(entityId); // may return a proxy \n\n//OpenJPA\nEntity e = repository.load(entityId); //will return an (enhanced) actual instance of E \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1230408,"reputation":6991,"user_id":1195139,"accept_rate":76,"display_name":"Ben Thurley"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1677147140,"creation_date":1453995032,"answer_id":35065564,"question_id":35062385,"body_markdown":"This is most likely because hibernate is returning a proxy.\r\n\r\nWhy does it do this? To implement lazy loading the framework needs to intercept your method calls that return a lazy loaded object or list of objects. It does this so it can first load the object from the DB and then allow your method to run. Hibernate does this by creating a proxy class. If you check the type in debug you should be able to see the actual type is a generated class which does not extend from your base class. \r\n\r\nHow to get around it? I had this problem once and successfully used the visitor pattern instead of using `instanceof`. It does add extra complication so it&#39;s not everyone&#39;s favorite pattern but IMHO it is a much cleaner approach than using `instanceof`. \r\n\r\nIf you use `instanceof` then you typically end up with `if...else` blocks checking for the different types. As you add more types you will have to re-visit each of these blocks. The advantage of the visitor pattern is that the conditional logic is built into your class hierarchy so if you add more types it makes it less likely you need to change everywhere that uses these classes.\r\n\r\nI found this [article][1] useful when implementing the visitor pattern.\r\n\r\n\r\n  [1]: https://developer.jboss.org/docs/DOC-13931","title":"JPA/Hibernate instance of not working","body":"<p>This is most likely because hibernate is returning a proxy.</p>\n<p>Why does it do this? To implement lazy loading the framework needs to intercept your method calls that return a lazy loaded object or list of objects. It does this so it can first load the object from the DB and then allow your method to run. Hibernate does this by creating a proxy class. If you check the type in debug you should be able to see the actual type is a generated class which does not extend from your base class.</p>\n<p>How to get around it? I had this problem once and successfully used the visitor pattern instead of using <code>instanceof</code>. It does add extra complication so it's not everyone's favorite pattern but IMHO it is a much cleaner approach than using <code>instanceof</code>.</p>\n<p>If you use <code>instanceof</code> then you typically end up with <code>if...else</code> blocks checking for the different types. As you add more types you will have to re-visit each of these blocks. The advantage of the visitor pattern is that the conditional logic is built into your class hierarchy so if you add more types it makes it less likely you need to change everywhere that uses these classes.</p>\n<p>I found this <a href=\"https://developer.jboss.org/docs/DOC-13931\" rel=\"nofollow noreferrer\">article</a> useful when implementing the visitor pattern.</p>\n"},{"tags":[],"owner":{"account_id":7635183,"reputation":1513,"user_id":5788941,"display_name":"Alexandre Cartapanis"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1453997565,"creation_date":1453997565,"answer_id":35066447,"question_id":35062385,"body_markdown":"Hibernate returns Proxied Object. Rather than implementing a Visitor pattern (as described [here][1]), you can use the `isAssignableFrom()` method on the class you want to test (https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#isAssignableFrom-java.lang.Class-).\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/35065564/5788941 &quot;here&quot;","title":"JPA/Hibernate instance of not working","body":"<p>Hibernate returns Proxied Object. Rather than implementing a Visitor pattern (as described <a href=\"https://stackoverflow.com/a/35065564/5788941\" title=\"here\">here</a>), you can use the <code>isAssignableFrom()</code> method on the class you want to test (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#isAssignableFrom-java.lang.Class-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#isAssignableFrom-java.lang.Class-</a>).</p>\n"},{"tags":[],"owner":{"account_id":12821485,"reputation":141,"user_id":9276178,"display_name":"Luka Gorgadze"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1554880450,"creation_date":1554880450,"answer_id":55606761,"question_id":35062385,"body_markdown":"Not sure, but I think this will work.\r\n\r\n    public static boolean instanceOf(Object object, Class&lt;?&gt; superclass) {\r\n        return superclass.isAssignableFrom(Hibernate.getClass(object));\r\n    }","title":"JPA/Hibernate instance of not working","body":"<p>Not sure, but I think this will work.</p>\n\n<pre><code>public static boolean instanceOf(Object object, Class&lt;?&gt; superclass) {\n    return superclass.isAssignableFrom(Hibernate.getClass(object));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7614789,"reputation":175,"user_id":5774614,"display_name":"Amine ABBAOUI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637141724,"creation_date":1637141724,"answer_id":70001927,"question_id":35062385,"body_markdown":"You can try to unproxy your object :\r\n\r\n\r\n    /**\r\n    \t * \r\n    \t * @param &lt;T&gt;\r\n    \t * @param entity\r\n    \t * @return\r\n    \t */\r\n    \t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \tpublic static &lt;T&gt; T initializeAndUnproxy(T entity) {\r\n    \t\tif (entity == null) {\r\n    \t\t\t// throw new NullPointerException(&quot;Entity passed for initialization is null&quot;);\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \t\tHibernate.initialize(entity);\r\n    \t\tif (entity instanceof HibernateProxy) {\r\n    \t\t\tentity = (T) ((HibernateProxy) entity).getHibernateLazyInitializer().getImplementation();\r\n    \t\t}\r\n    \t\treturn entity;\r\n    \t}","title":"JPA/Hibernate instance of not working","body":"<p>You can try to unproxy your object :</p>\n<pre><code>/**\n     * \n     * @param &lt;T&gt;\n     * @param entity\n     * @return\n     */\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public static &lt;T&gt; T initializeAndUnproxy(T entity) {\n        if (entity == null) {\n            // throw new NullPointerException(&quot;Entity passed for initialization is null&quot;);\n            return null;\n        }\n        Hibernate.initialize(entity);\n        if (entity instanceof HibernateProxy) {\n            entity = (T) ((HibernateProxy) entity).getHibernateLazyInitializer().getImplementation();\n        }\n        return entity;\n    }\n</code></pre>\n"}],"owner":{"account_id":463786,"reputation":668,"user_id":866889,"accept_rate":60,"display_name":"Dmitry Aleksandrov"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3520,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":35065564,"answer_count":5,"score":1,"last_activity_date":1677147140,"creation_date":1453986451,"question_id":35062385,"body_markdown":"Imagine a situation:\r\n\r\n    @javax.persistence.Inheritance(strategy=javax.persistence.InheritanceType.JOINED)\r\n    @javax.persistence.DiscriminatorColumn\r\n    @javax.persistence.Entity\r\n    @javax.persistence.Table(name=&quot;PARENT&quot;)\r\n    public abstract class Parent{\r\n    ...\r\n    }\r\n    \r\n    @javax.persistence.Entity\r\n    @javax.persistence.Table(name=&quot;A&quot;)\r\n    public class A extends Parent{\r\n    ...\r\n    }\r\n    \r\n    @javax.persistence.Entity\r\n    @javax.persistence.Table(name=&quot;B&quot;)\r\n    public class B extends Parent{\r\n    ...\r\n    }\r\n    \r\n    \r\n    Parent p = new A();\r\n\r\nNow we call this:\r\n\r\n    p instance of A\r\n\r\nalways returns **false**!!\r\n\r\nworks ok on OpenJPA!\r\n\r\nShould I file a bug? Hibernate 4.3.10","title":"JPA/Hibernate instance of not working","body":"<p>Imagine a situation:</p>\n\n<pre><code>@javax.persistence.Inheritance(strategy=javax.persistence.InheritanceType.JOINED)\n@javax.persistence.DiscriminatorColumn\n@javax.persistence.Entity\n@javax.persistence.Table(name=\"PARENT\")\npublic abstract class Parent{\n...\n}\n\n@javax.persistence.Entity\n@javax.persistence.Table(name=\"A\")\npublic class A extends Parent{\n...\n}\n\n@javax.persistence.Entity\n@javax.persistence.Table(name=\"B\")\npublic class B extends Parent{\n...\n}\n\n\nParent p = new A();\n</code></pre>\n\n<p>Now we call this:</p>\n\n<pre><code>p instance of A\n</code></pre>\n\n<p>always returns <strong>false</strong>!!</p>\n\n<p>works ok on OpenJPA!</p>\n\n<p>Should I file a bug? Hibernate 4.3.10</p>\n"},{"tags":["java","spring-boot","maven","spring-mvc","exceptionhandler"],"comments":[{"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"score":2,"creation_date":1677144695,"post_id":75542559,"comment_id":133281036,"body_markdown":"`throw new  MyCustomException(&quot;test&quot;)` instead of returning it","body":"<code>throw new  MyCustomException(&quot;test&quot;)</code> instead of returning it"},{"owner":{"account_id":6767541,"reputation":3494,"user_id":5212118,"accept_rate":67,"display_name":"cucuru"},"score":0,"creation_date":1677146074,"post_id":75542559,"comment_id":133281435,"body_markdown":"umm I&#39;m having same result, the other exceptionHandler is not catching it","body":"umm I&#39;m having same result, the other exceptionHandler is not catching it"},{"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"score":2,"creation_date":1677154059,"post_id":75542559,"comment_id":133283688,"body_markdown":"On the other hand, if I correctly understand what you are trying to do, chained exception handlers do not work. Per request only one handler can be invoked.","body":"On the other hand, if I correctly understand what you are trying to do, chained exception handlers do not work. Per request only one handler can be invoked."},{"owner":{"account_id":2729259,"reputation":6968,"user_id":2353403,"accept_rate":82,"display_name":"Coder"},"score":0,"creation_date":1677154081,"post_id":75542559,"comment_id":133283701,"body_markdown":"Is it because you want to return a similar response(only a few changes based on exception) for both exceptions?","body":"Is it because you want to return a similar response(only a few changes based on exception) for both exceptions?"},{"owner":{"account_id":419537,"reputation":4992,"user_id":796761,"accept_rate":50,"display_name":"dbreaux"},"score":0,"creation_date":1677161513,"post_id":75542559,"comment_id":133286056,"body_markdown":"Also, you can put multiple `@ExceptionHandler` methods in the same handler class, for the different Exception classes.","body":"Also, you can put multiple <code>@ExceptionHandler</code> methods in the same handler class, for the different Exception classes."}],"owner":{"account_id":6767541,"reputation":3494,"user_id":5212118,"accept_rate":67,"display_name":"cucuru"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677146995,"creation_date":1677142833,"question_id":75542559,"body_markdown":"I have a spring application created with maven, it has the typical flow:\r\n\r\n    controller -&gt; service -&gt; external gateway\r\n\r\nWhen querying the external gateway from service, it can return a FeingException, and I want to capture and convert into a custom one:\r\n\r\n    @RestControllerAdvice\r\n    public class GatewayErrorHandling {\r\n  \r\n       @ExceptionHandler(FeignException.class)\r\n       public MyCustomException handleFeignException(FeignException e) {;\r\n\r\n           return  new  MyCustomException(&quot;test&quot;);\r\n       }\r\n     }\r\n\r\nThen I try to catch it into another handler but it doesnt work\r\n\r\n    @RestControllerAdvice\r\n    public class ServiceErrorHandling {\r\n  \r\n       @ExceptionHandler(MyCustomException.class)\r\n       public void handleMyCustomException(MyCustomException e) {;\r\n\r\n           System.out.println(&quot;exception catched&quot;);\r\n       }\r\n     }\r\n\r\n\r\nI dont know what point I am missing to not be able to reach this system.out.println line\r\n\r\nUpdate: after Dirk Deyne comment, the first method is: \r\n\r\n       @ExceptionHandler(FeignException.class)\r\n       public void handleFeignException(FeignException e) {;\r\n\r\n           throw new  MyCustomException(&quot;test&quot;);\r\n       }\r\n\r\n\r\nwith same result","title":"how to catch an exception and convert into another by using ExceptionHandler","body":"<p>I have a spring application created with maven, it has the typical flow:</p>\n<pre><code>controller -&gt; service -&gt; external gateway\n</code></pre>\n<p>When querying the external gateway from service, it can return a FeingException, and I want to capture and convert into a custom one:</p>\n<pre><code>@RestControllerAdvice\npublic class GatewayErrorHandling {\n\n   @ExceptionHandler(FeignException.class)\n   public MyCustomException handleFeignException(FeignException e) {;\n\n       return  new  MyCustomException(&quot;test&quot;);\n   }\n }\n</code></pre>\n<p>Then I try to catch it into another handler but it doesnt work</p>\n<pre><code>@RestControllerAdvice\npublic class ServiceErrorHandling {\n\n   @ExceptionHandler(MyCustomException.class)\n   public void handleMyCustomException(MyCustomException e) {;\n\n       System.out.println(&quot;exception catched&quot;);\n   }\n }\n</code></pre>\n<p>I dont know what point I am missing to not be able to reach this system.out.println line</p>\n<p>Update: after Dirk Deyne comment, the first method is:</p>\n<pre><code>   @ExceptionHandler(FeignException.class)\n   public void handleFeignException(FeignException e) {;\n\n       throw new  MyCustomException(&quot;test&quot;);\n   }\n</code></pre>\n<p>with same result</p>\n"},{"tags":["java","spring","spring-webflux","spring-data-r2dbc"],"answers":[{"tags":[],"owner":{"account_id":3918931,"reputation":620,"user_id":3242022,"display_name":"downvoteit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677146983,"creation_date":1677146983,"answer_id":75543312,"question_id":74619575,"body_markdown":"I checked the `@Query` annotation with an incoming and outgoing `Flux`, and it appear that the `@Query` annotation indeed does not support an incoming `Publisher`. \r\n\r\nI also got `Value must not be null` from my test code below:\r\n\r\n```java\r\nFlux&lt;Integer&gt; ids = Flux.range(1, 10);\r\n\r\nuserInfoRepository.findAllById(ids)\r\n    .subscribeOn(Schedulers.boundedElastic())\r\n    .subscribe(v1 -&gt; log.info(&quot;User {}&quot;, v1.getUsername()));\r\n\r\n@Query(&quot;select * from user.user_infos t where t.id = :id&quot;)\r\nFlux&lt;UserInfo&gt; findAllById(Flux&lt;Integer&gt; id);\r\n```\r\n\r\n\r\nBut if you remove `@Query` it actually works:\r\n\r\n```java\r\nFlux&lt;UserInfo&gt; findAllById(Flux&lt;Integer&gt; id);\r\n```\r\n\r\nAnd with other fields too:\r\n\r\n```java\r\nFlux&lt;UserInfo&gt; findAllByUsername(Flux&lt;String&gt; username);\r\n```\r\n\r\nTo me it seems like the `@Query` annotation does not support subscribing to an incoming argument `Publisher` at this point (i.e. it does not do `.flatMap()` internally).","title":"Spring Data with r2dbc using Query annotation","body":"<p>I checked the <code>@Query</code> annotation with an incoming and outgoing <code>Flux</code>, and it appear that the <code>@Query</code> annotation indeed does not support an incoming <code>Publisher</code>.</p>\n<p>I also got <code>Value must not be null</code> from my test code below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Flux&lt;Integer&gt; ids = Flux.range(1, 10);\n\nuserInfoRepository.findAllById(ids)\n    .subscribeOn(Schedulers.boundedElastic())\n    .subscribe(v1 -&gt; log.info(&quot;User {}&quot;, v1.getUsername()));\n\n@Query(&quot;select * from user.user_infos t where t.id = :id&quot;)\nFlux&lt;UserInfo&gt; findAllById(Flux&lt;Integer&gt; id);\n</code></pre>\n<p>But if you remove <code>@Query</code> it actually works:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Flux&lt;UserInfo&gt; findAllById(Flux&lt;Integer&gt; id);\n</code></pre>\n<p>And with other fields too:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Flux&lt;UserInfo&gt; findAllByUsername(Flux&lt;String&gt; username);\n</code></pre>\n<p>To me it seems like the <code>@Query</code> annotation does not support subscribing to an incoming argument <code>Publisher</code> at this point (i.e. it does not do <code>.flatMap()</code> internally).</p>\n"}],"owner":{"account_id":18341417,"reputation":11,"user_id":13357583,"display_name":"Halim CHAIBI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2753,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677146983,"creation_date":1669751722,"question_id":74619575,"body_markdown":"I am exploring Spring Data with r2dbc.\r\nI am trying to use a custom repository method in my interface extended from ReactiveCrudRepository, which takes a Flux of Object as Parameter and Return a Flux of the same Object.\r\n\r\n\r\n```\r\n    @Query(&quot;SELECT id, name  FROM Person WHERE id = ?&quot;)\r\n    Flux&lt;Person&gt; myMethod(Flux&lt;Person&gt; person);\r\n\r\n```\r\n\r\n\r\nI am expecting it to have the same behaviour as the Flux&lt;T&gt; findAllById(Publisher&lt;ID&gt; idStream) method.\r\n\r\n\r\n\r\nThis is my interface repository definition:\r\n```\r\npublic interface PersonRepository extends ReactiveCrudRepository&lt;Person, Person&gt; {\r\n\r\n    @Query(&quot;SELECT id, name  FROM Person WHERE id = ?&quot;)\r\n    Flux&lt;Person&gt; myMethod(Flux&lt;Person&gt; person);\r\n\r\n}\r\n\r\n```\r\n\r\nThis is my entity:\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@ToString\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(value = &quot;Person&quot;, schema = &quot;mySchema&quot;)\r\npublic class Person {\r\n    @Id\r\n    @Column(&quot;id&quot;)\r\n    Long id;\r\n\r\n    @Column(&quot;name&quot;)\r\n    String name;\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nThis my DB Configuration class:\r\n\r\n```\r\n@Configuration\r\n@EnableR2dbcRepositories\r\n@EnableR2dbcAuditing\r\n@EnableTransactionManagement\r\n\r\n\r\npublic class DatabaseConfiguration extends AbstractR2dbcConfiguration {\r\n\r\n......\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nThis is my main application:\r\n\r\n\r\n```\r\n@SpringBootApplication\r\n@EnableR2dbcAuditing\r\n@EnableConfigurationProperties({ApplicationProperties.class})\r\npublic class MyApplication {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(MyApplication.class);\r\n\r\n\r\n    @Bean\r\n    public CommandLineRunner consume(PersonRepository personRepository) {\r\n\r\n\r\n        LongSupplier randomLong = () -&gt; {\r\n            return RandomUtils.nextLong(10L,20L);\r\n        };\r\n\r\n        Flux&lt;Long&gt; personIds = Flux.fromStream(LongStream.generate(randomLong).boxed());\r\n        Flux&lt;Person&gt; persons = personIds.map( p -&gt; {\r\n            Person person = new Person();\r\n            person.setId(p);\r\n            return person;\r\n        });\r\n\r\n\r\n        personRepository.myMethod(persons.take(3)).subscribe( id -&gt; logger.info(&quot;Processed Person Id: &quot; + id));\r\n        \r\n        return null;\r\n    }   \r\n\r\n    .......\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nWhen using the interface method findById(Publisher&lt;Person&gt; id), it works, but when trying to use the custom method myMethod(Flux&lt;Person&gt; id) with quetry annotation I am getting the following exception:\r\n\r\n\r\n\r\n\r\n```\r\nreactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalArgumentException: Value must not be null\r\nCaused by: java.lang.IllegalArgumentException: **Value must not be null**\r\n\tat org.springframework.util.Assert.notNull(Assert.java:201)\r\n\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\nAssembly trace from producer [reactor.core.publisher.MonoMapFuseable] :\r\n\treactor.core.publisher.Mono.map(Mono.java:3411)\r\n\torg.springframework.data.r2dbc.repository.query.StringBasedR2dbcQuery.createQuery(StringBasedR2dbcQuery.java:156)\r\nError has been observed at the following site(s):\r\n\t*__________Mono.map ⇢ at org.springframework.data.r2dbc.repository.query.StringBasedR2dbcQuery.createQuery(StringBasedR2dbcQuery.java:156)\r\n\t|_ Mono.flatMapMany ⇢ at org.springframework.data.r2dbc.repository.query.AbstractR2dbcQuery.execute(AbstractR2dbcQuery.java:88)\r\n\t*____Flux.usingWhen ⇢ at org.springframework.data.repository.core.support.RepositoryMethodInvoker$ReactiveInvocationListenerDecorator.decorate(RepositoryMethodInvoker.java:242)\r\nOriginal Stack Trace:\r\n\t\tat org.springframework.util.Assert.notNull(Assert.java:201)\r\n\t\tat org.springframework.r2dbc.core.Parameter.from(Parameter.java:54)\r\n\t\tat org.springframework.data.r2dbc.query.QueryMapper.getBindValue(QueryMapper.java:426)\r\n\t\tat org.springframework.data.r2dbc.core.DefaultReactiveDataAccessStrategy.getBindValue(DefaultReactiveDataAccessStrategy.java:288)\r\n\t\tat org.springframework.data.r2dbc.repository.query.ExpressionEvaluatingParameterBinder.getBindValue(ExpressionEvaluatingParameterBinder.java:134)\r\n\t\tat org.springframework.data.r2dbc.repository.query.ExpressionEvaluatingParameterBinder.bindExpressions(ExpressionEvaluatingParameterBinder.java:82)\r\n\t\tat org.springframework.data.r2dbc.repository.query.ExpressionEvaluatingParameterBinder.bind(ExpressionEvaluatingParameterBinder.java:72)\r\n\t\tat org.springframework.data.r2dbc.repository.query.StringBasedR2dbcQuery$ExpandedQuery.&lt;init&gt;(StringBasedR2dbcQuery.java:197)\r\n\t\tat org.springframework.data.r2dbc.repository.query.StringBasedR2dbcQuery.lambda$createQuery$0(StringBasedR2dbcQuery.java:156)\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)\r\n\t\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:101)\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210)\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n\t\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\t\tat reactor.core.publisher.MonoCollectList$MonoCollectListSubscriber.onComplete(MonoCollectList.java:128)\r\n\t\tat reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.drain(FluxConcatMap.java:368)\r\n\t\tat reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.onComplete(FluxConcatMap.java:276)\r\n\t\tat reactor.core.publisher.Operators.complete(Operators.java:137)\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:148)\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87)\r\n\t\tat reactor.core.publisher.Flux.subscribe(Flux.java:8469)\r\n\t\tat reactor.core.publisher.FluxUsingWhen.subscribe(FluxUsingWhen.java:94)\r\n\t\tat reactor.core.publisher.Flux.subscribe(Flux.java:8469)\r\n\t\tat reactor.core.publisher.Flux.subscribeWith(Flux.java:8642)\r\n\t\tat reactor.core.publisher.Flux.subscribe(Flux.java:8439)\r\n\t\tat reactor.core.publisher.Flux.subscribe(Flux.java:8363)\r\n\t\tat reactor.core.publisher.Flux.subscribe(Flux.java:8306)\r\n```\r\n\r\n\r\n\r\nI couldn&#39;t find  some similar use case in the Spring reference documenetation, I am wondering if this is even supported.\r\n\r\n\r\n","title":"Spring Data with r2dbc using Query annotation","body":"<p>I am exploring Spring Data with r2dbc.\nI am trying to use a custom repository method in my interface extended from ReactiveCrudRepository, which takes a Flux of Object as Parameter and Return a Flux of the same Object.</p>\n<pre><code>    @Query(&quot;SELECT id, name  FROM Person WHERE id = ?&quot;)\n    Flux&lt;Person&gt; myMethod(Flux&lt;Person&gt; person);\n\n</code></pre>\n<p>I am expecting it to have the same behaviour as the Flux findAllById(Publisher idStream) method.</p>\n<p>This is my interface repository definition:</p>\n<pre><code>public interface PersonRepository extends ReactiveCrudRepository&lt;Person, Person&gt; {\n\n    @Query(&quot;SELECT id, name  FROM Person WHERE id = ?&quot;)\n    Flux&lt;Person&gt; myMethod(Flux&lt;Person&gt; person);\n\n}\n\n</code></pre>\n<p>This is my entity:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(value = &quot;Person&quot;, schema = &quot;mySchema&quot;)\npublic class Person {\n    @Id\n    @Column(&quot;id&quot;)\n    Long id;\n\n    @Column(&quot;name&quot;)\n    String name;\n\n}\n</code></pre>\n<p>This my DB Configuration class:</p>\n<pre><code>@Configuration\n@EnableR2dbcRepositories\n@EnableR2dbcAuditing\n@EnableTransactionManagement\n\n\npublic class DatabaseConfiguration extends AbstractR2dbcConfiguration {\n\n......\n\n}\n\n</code></pre>\n<p>This is my main application:</p>\n<pre><code>@SpringBootApplication\n@EnableR2dbcAuditing\n@EnableConfigurationProperties({ApplicationProperties.class})\npublic class MyApplication {\n\n    private static final Logger logger = LoggerFactory.getLogger(MyApplication.class);\n\n\n    @Bean\n    public CommandLineRunner consume(PersonRepository personRepository) {\n\n\n        LongSupplier randomLong = () -&gt; {\n            return RandomUtils.nextLong(10L,20L);\n        };\n\n        Flux&lt;Long&gt; personIds = Flux.fromStream(LongStream.generate(randomLong).boxed());\n        Flux&lt;Person&gt; persons = personIds.map( p -&gt; {\n            Person person = new Person();\n            person.setId(p);\n            return person;\n        });\n\n\n        personRepository.myMethod(persons.take(3)).subscribe( id -&gt; logger.info(&quot;Processed Person Id: &quot; + id));\n        \n        return null;\n    }   \n\n    .......\n}\n</code></pre>\n<p>When using the interface method findById(Publisher id), it works, but when trying to use the custom method myMethod(Flux id) with quetry annotation I am getting the following exception:</p>\n<pre><code>reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalArgumentException: Value must not be null\nCaused by: java.lang.IllegalArgumentException: **Value must not be null**\n    at org.springframework.util.Assert.notNull(Assert.java:201)\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nAssembly trace from producer [reactor.core.publisher.MonoMapFuseable] :\n    reactor.core.publisher.Mono.map(Mono.java:3411)\n    org.springframework.data.r2dbc.repository.query.StringBasedR2dbcQuery.createQuery(StringBasedR2dbcQuery.java:156)\nError has been observed at the following site(s):\n    *__________Mono.map ⇢ at org.springframework.data.r2dbc.repository.query.StringBasedR2dbcQuery.createQuery(StringBasedR2dbcQuery.java:156)\n    |_ Mono.flatMapMany ⇢ at org.springframework.data.r2dbc.repository.query.AbstractR2dbcQuery.execute(AbstractR2dbcQuery.java:88)\n    *____Flux.usingWhen ⇢ at org.springframework.data.repository.core.support.RepositoryMethodInvoker$ReactiveInvocationListenerDecorator.decorate(RepositoryMethodInvoker.java:242)\nOriginal Stack Trace:\n        at org.springframework.util.Assert.notNull(Assert.java:201)\n        at org.springframework.r2dbc.core.Parameter.from(Parameter.java:54)\n        at org.springframework.data.r2dbc.query.QueryMapper.getBindValue(QueryMapper.java:426)\n        at org.springframework.data.r2dbc.core.DefaultReactiveDataAccessStrategy.getBindValue(DefaultReactiveDataAccessStrategy.java:288)\n        at org.springframework.data.r2dbc.repository.query.ExpressionEvaluatingParameterBinder.getBindValue(ExpressionEvaluatingParameterBinder.java:134)\n        at org.springframework.data.r2dbc.repository.query.ExpressionEvaluatingParameterBinder.bindExpressions(ExpressionEvaluatingParameterBinder.java:82)\n        at org.springframework.data.r2dbc.repository.query.ExpressionEvaluatingParameterBinder.bind(ExpressionEvaluatingParameterBinder.java:72)\n        at org.springframework.data.r2dbc.repository.query.StringBasedR2dbcQuery$ExpandedQuery.&lt;init&gt;(StringBasedR2dbcQuery.java:197)\n        at org.springframework.data.r2dbc.repository.query.StringBasedR2dbcQuery.lambda$createQuery$0(StringBasedR2dbcQuery.java:156)\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)\n        at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:101)\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210)\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n        at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n        at reactor.core.publisher.MonoCollectList$MonoCollectListSubscriber.onComplete(MonoCollectList.java:128)\n        at reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.drain(FluxConcatMap.java:368)\n        at reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.onComplete(FluxConcatMap.java:276)\n        at reactor.core.publisher.Operators.complete(Operators.java:137)\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:148)\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87)\n        at reactor.core.publisher.Flux.subscribe(Flux.java:8469)\n        at reactor.core.publisher.FluxUsingWhen.subscribe(FluxUsingWhen.java:94)\n        at reactor.core.publisher.Flux.subscribe(Flux.java:8469)\n        at reactor.core.publisher.Flux.subscribeWith(Flux.java:8642)\n        at reactor.core.publisher.Flux.subscribe(Flux.java:8439)\n        at reactor.core.publisher.Flux.subscribe(Flux.java:8363)\n        at reactor.core.publisher.Flux.subscribe(Flux.java:8306)\n</code></pre>\n<p>I couldn't find  some similar use case in the Spring reference documenetation, I am wondering if this is even supported.</p>\n"},{"tags":["java","opencv"],"answers":[{"tags":[],"owner":{"account_id":12630970,"reputation":1,"user_id":9182485,"display_name":"Cosmin Ştefan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677146606,"creation_date":1677146542,"answer_id":75543242,"question_id":75533501,"body_markdown":"The issue is that Imgproc.approxPolyDP called in getApproximatePolygonCorners() returns the corners in a different order than the order I implemented in getFrontPerspectiveCorners(). Because of that a wrong perspective matrix is created which lead to the unexpected image after Imgproc.warpPerspective call.","title":"All grey image when i try to warp image perspective in Java opencv","body":"<p>The issue is that Imgproc.approxPolyDP called in getApproximatePolygonCorners() returns the corners in a different order than the order I implemented in getFrontPerspectiveCorners(). Because of that a wrong perspective matrix is created which lead to the unexpected image after Imgproc.warpPerspective call.</p>\n"}],"owner":{"account_id":12630970,"reputation":1,"user_id":9182485,"display_name":"Cosmin Ştefan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677146606,"creation_date":1677073114,"question_id":75533501,"body_markdown":"I want to build an document scanner using java opencv but after transformation is performed I get an all grey outputImage\r\n\r\n\r\nMy attempt was to preprocess the image(greyscale/normalize) autodetect the corners and apply perspective transform to transform the trapezoid document into a rectangle one. The detected corners seems to be correct.\r\n\r\n```\r\n@Component\r\npublic class SkewHandler implements PreprocessingHandler{\r\n\r\n    private ShapeDetector shapeDetector;\r\n\r\n    @Autowired\r\n    SkewHandler(ShapeDetector shapeDetector) {\r\n        this.shapeDetector = shapeDetector;\r\n    }\r\n\r\n    @Override\r\n    public Mat doPreprocessing(Mat inputImage) {\r\n        System.out.println(&quot;skew&quot;);\r\n\r\n        Mat greyImage = new GreyScaleHandler().doPreprocessing(inputImage);\r\n        Mat normalizeImage = new NormalizeHandler().doPreprocessing(greyImage);\r\n        Mat threseholdImage = new ThresholdHandler().doPreprocessing(normalizeImage);\r\n\r\n\r\n        MatOfPoint corners = shapeDetector.getCorners(threseholdImage);\r\n        MatOfPoint polygonCorners = shapeDetector.getApproximatePolygonCorners(corners);\r\n        MatOfPoint frontPerspectiveCorners = shapeDetector.getFrontPerspectiveCorners(corners);\r\n        Size frontPerspectiveSize = shapeDetector.getFrontPerspectiveSize(corners);\r\n\r\n        Mat perspectiveTransformMatrix = Imgproc.getPerspectiveTransform(\r\n                        convertPoints(polygonCorners), convertPoints(frontPerspectiveCorners));\r\n\r\n        Mat outputImage = new Mat(inputImage.size(), inputImage.type());\r\n        Imgproc.warpPerspective(inputImage, outputImage, perspectiveTransformMatrix,frontPerspectiveSize);\r\n\r\n        return outputImage;\r\n    }\r\n\r\n    private static MatOfPoint2f convertPoints(MatOfPoint points) {\r\n        MatOfPoint2f points2f = new MatOfPoint2f();\r\n        points.convertTo(points2f, CvType.CV_32FC1);\r\n        return points2f;\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Component\r\npublic class ShapeDetector {\r\n\r\n    public MatOfPoint getCorners(Mat inputImage) {\r\n        List&lt;MatOfPoint&gt; corners = new ArrayList&lt;&gt;();\r\n        Imgproc.findContours(inputImage,corners,new Mat(), Imgproc.RETR_EXTERNAL,Imgproc.CHAIN_APPROX_TC89_L1);\r\n\r\n        return corners.stream()\r\n                .max(Comparator.comparing(Imgproc::contourArea))\r\n                .orElse(null);\r\n    }\r\n\r\n    public Double getCornersPerimeter(MatOfPoint2f corners) {\r\n        return Imgproc.arcLength(corners, true);\r\n    }\r\n\r\n    public MatOfPoint getApproximatePolygonCorners(MatOfPoint corners) {\r\n        MatOfPoint2f corners2f = new MatOfPoint2f();\r\n        corners.convertTo(corners2f, CvType.CV_32FC2);\r\n\r\n        MatOfPoint2f polygonCorners2f = new MatOfPoint2f();\r\n        Imgproc.approxPolyDP(corners2f,polygonCorners2f, 0.015*getCornersPerimeter(corners2f),true);\r\n\r\n        MatOfPoint polygonCorners = new MatOfPoint();\r\n        polygonCorners2f.convertTo(polygonCorners, CvType.CV_32S);\r\n\r\n        return polygonCorners;\r\n    }\r\n\r\n    public MatOfPoint getFrontPerspectiveCorners(MatOfPoint corners) {\r\n        double maxX = corners.toList().stream()\r\n                .mapToDouble(point -&gt; point.x).max().getAsDouble();\r\n\r\n        double minX = corners.toList().stream()\r\n                .mapToDouble(point -&gt; point.x).min().getAsDouble();\r\n\r\n        double maxY = corners.toList().stream()\r\n                .mapToDouble(point -&gt; point.y).max().getAsDouble();\r\n\r\n        double minY = corners.toList().stream().\r\n                mapToDouble(point -&gt; point.y).min().getAsDouble();\r\n\r\n        double maxWidth = maxX - minX;\r\n        double maxHeight = maxY -minY;\r\n\r\n        return new MatOfPoint(\r\n                new Point(0,0),\r\n                new Point(maxWidth, 0),\r\n                new Point(maxWidth, maxHeight),\r\n                new Point(maxHeight, 0));\r\n    }\r\n\r\n    public Size getFrontPerspectiveSize(MatOfPoint corners) {\r\n        double maxX = corners.toList().stream()\r\n                .mapToDouble(point -&gt; point.x).max().getAsDouble();\r\n\r\n        double minX = corners.toList().stream()\r\n                .mapToDouble(point -&gt; point.x).min().getAsDouble();\r\n\r\n        double maxY = corners.toList().stream()\r\n                .mapToDouble(point -&gt; point.y).max().getAsDouble();\r\n\r\n        double minY = corners.toList().stream().\r\n                mapToDouble(point -&gt; point.y).min().getAsDouble();\r\n\r\n        double maxWidth = maxX - minX;\r\n        double maxHeight = maxY -minY;\r\n\r\n        return new Size(maxWidth, maxHeight);\r\n    }\r\n```\r\n","title":"All grey image when i try to warp image perspective in Java opencv","body":"<p>I want to build an document scanner using java opencv but after transformation is performed I get an all grey outputImage</p>\n<p>My attempt was to preprocess the image(greyscale/normalize) autodetect the corners and apply perspective transform to transform the trapezoid document into a rectangle one. The detected corners seems to be correct.</p>\n<pre><code>@Component\npublic class SkewHandler implements PreprocessingHandler{\n\n    private ShapeDetector shapeDetector;\n\n    @Autowired\n    SkewHandler(ShapeDetector shapeDetector) {\n        this.shapeDetector = shapeDetector;\n    }\n\n    @Override\n    public Mat doPreprocessing(Mat inputImage) {\n        System.out.println(&quot;skew&quot;);\n\n        Mat greyImage = new GreyScaleHandler().doPreprocessing(inputImage);\n        Mat normalizeImage = new NormalizeHandler().doPreprocessing(greyImage);\n        Mat threseholdImage = new ThresholdHandler().doPreprocessing(normalizeImage);\n\n\n        MatOfPoint corners = shapeDetector.getCorners(threseholdImage);\n        MatOfPoint polygonCorners = shapeDetector.getApproximatePolygonCorners(corners);\n        MatOfPoint frontPerspectiveCorners = shapeDetector.getFrontPerspectiveCorners(corners);\n        Size frontPerspectiveSize = shapeDetector.getFrontPerspectiveSize(corners);\n\n        Mat perspectiveTransformMatrix = Imgproc.getPerspectiveTransform(\n                        convertPoints(polygonCorners), convertPoints(frontPerspectiveCorners));\n\n        Mat outputImage = new Mat(inputImage.size(), inputImage.type());\n        Imgproc.warpPerspective(inputImage, outputImage, perspectiveTransformMatrix,frontPerspectiveSize);\n\n        return outputImage;\n    }\n\n    private static MatOfPoint2f convertPoints(MatOfPoint points) {\n        MatOfPoint2f points2f = new MatOfPoint2f();\n        points.convertTo(points2f, CvType.CV_32FC1);\n        return points2f;\n    }\n}\n</code></pre>\n<pre><code>@Component\npublic class ShapeDetector {\n\n    public MatOfPoint getCorners(Mat inputImage) {\n        List&lt;MatOfPoint&gt; corners = new ArrayList&lt;&gt;();\n        Imgproc.findContours(inputImage,corners,new Mat(), Imgproc.RETR_EXTERNAL,Imgproc.CHAIN_APPROX_TC89_L1);\n\n        return corners.stream()\n                .max(Comparator.comparing(Imgproc::contourArea))\n                .orElse(null);\n    }\n\n    public Double getCornersPerimeter(MatOfPoint2f corners) {\n        return Imgproc.arcLength(corners, true);\n    }\n\n    public MatOfPoint getApproximatePolygonCorners(MatOfPoint corners) {\n        MatOfPoint2f corners2f = new MatOfPoint2f();\n        corners.convertTo(corners2f, CvType.CV_32FC2);\n\n        MatOfPoint2f polygonCorners2f = new MatOfPoint2f();\n        Imgproc.approxPolyDP(corners2f,polygonCorners2f, 0.015*getCornersPerimeter(corners2f),true);\n\n        MatOfPoint polygonCorners = new MatOfPoint();\n        polygonCorners2f.convertTo(polygonCorners, CvType.CV_32S);\n\n        return polygonCorners;\n    }\n\n    public MatOfPoint getFrontPerspectiveCorners(MatOfPoint corners) {\n        double maxX = corners.toList().stream()\n                .mapToDouble(point -&gt; point.x).max().getAsDouble();\n\n        double minX = corners.toList().stream()\n                .mapToDouble(point -&gt; point.x).min().getAsDouble();\n\n        double maxY = corners.toList().stream()\n                .mapToDouble(point -&gt; point.y).max().getAsDouble();\n\n        double minY = corners.toList().stream().\n                mapToDouble(point -&gt; point.y).min().getAsDouble();\n\n        double maxWidth = maxX - minX;\n        double maxHeight = maxY -minY;\n\n        return new MatOfPoint(\n                new Point(0,0),\n                new Point(maxWidth, 0),\n                new Point(maxWidth, maxHeight),\n                new Point(maxHeight, 0));\n    }\n\n    public Size getFrontPerspectiveSize(MatOfPoint corners) {\n        double maxX = corners.toList().stream()\n                .mapToDouble(point -&gt; point.x).max().getAsDouble();\n\n        double minX = corners.toList().stream()\n                .mapToDouble(point -&gt; point.x).min().getAsDouble();\n\n        double maxY = corners.toList().stream()\n                .mapToDouble(point -&gt; point.y).max().getAsDouble();\n\n        double minY = corners.toList().stream().\n                mapToDouble(point -&gt; point.y).min().getAsDouble();\n\n        double maxWidth = maxX - minX;\n        double maxHeight = maxY -minY;\n\n        return new Size(maxWidth, maxHeight);\n    }\n</code></pre>\n"},{"tags":["java","collections","iteration"],"comments":[{"owner":{"account_id":1153729,"reputation":2569,"user_id":1134899,"accept_rate":100,"display_name":"Haz"},"score":1,"creation_date":1336050456,"post_id":10431981,"comment_id":13464094,"body_markdown":"Just curious, why do you create a copy of foolist rather than just looping through foolist in the first example?","body":"Just curious, why do you create a copy of foolist rather than just looping through foolist in the first example?"},{"owner":{"account_id":1400738,"reputation":6226,"user_id":1329572,"accept_rate":100,"display_name":"user1329572"},"score":0,"creation_date":1336050527,"post_id":10431981,"comment_id":13464130,"body_markdown":"@Haz, So I only have to loop once.","body":"@Haz, So I only have to loop once."},{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":21,"creation_date":1336051103,"post_id":10431981,"comment_id":13464400,"body_markdown":"Note: prefer &#39;for&#39; over &#39;while&#39; also with iterators to limit the scope of the variable: \nfor(Iterator&lt;Foo&gt; itr = fooList.iterator(); itr.hasNext();){}","body":"Note: prefer &#39;for&#39; over &#39;while&#39; also with iterators to limit the scope of the variable:  for(Iterator&lt;Foo&gt; itr = fooList.iterator(); itr.hasNext();){}"},{"owner":{"account_id":1266843,"reputation":93044,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":1,"creation_date":1549172853,"post_id":10431981,"comment_id":95805310,"body_markdown":"I didn&#39;t know `while` had different scoping rules than `for`","body":"I didn&#39;t know <code>while</code> had different scoping rules than <code>for</code>"},{"owner":{"account_id":8506,"reputation":1961,"user_id":15379,"accept_rate":60,"display_name":"Dave Griffiths"},"score":0,"creation_date":1560423039,"post_id":10431981,"comment_id":99735439,"body_markdown":"In a more complex situation you might have a case where `fooList` is an instance variable and you call a method during the loop that ends up calling another method in the same class that does `fooList.remove(obj)`. Have seen this happen. In which case copying the list is safest.","body":"In a more complex situation you might have a case where <code>fooList</code> is an instance variable and you call a method during the loop that ends up calling another method in the same class that does <code>fooList.remove(obj)</code>. Have seen this happen. In which case copying the list is safest."},{"owner":{"account_id":8522424,"reputation":1363,"user_id":6790957,"display_name":"Vikas Tawniya"},"score":3,"creation_date":1617999914,"post_id":10431981,"comment_id":118479076,"body_markdown":"@AlexanderMills while doesn&#39;t have a different scope rule. It&#39;s just that in case of while, Iterator is being declared outside the loop itself and so it will have a broader scope, even though it is just being used inside loop.","body":"@AlexanderMills while doesn&#39;t have a different scope rule. It&#39;s just that in case of while, Iterator is being declared outside the loop itself and so it will have a broader scope, even though it is just being used inside loop."},{"owner":{"account_id":4403071,"reputation":4844,"user_id":3588161,"display_name":"Fizz"},"score":0,"creation_date":1642665630,"post_id":10431981,"comment_id":125132671,"body_markdown":"Since you&#39;ve accepted the answer you&#39;ve accepted you probably had an XY problem, since that answer (like a few other here) doesn&#39;t actually remove during iteration. And the answer to your nominal question is quite obvious if you think a bit about it: immediately visible effect vs delayed/deferred deletion. It&#39;s not just a matter of &quot;style&quot; or &quot;readability&quot;.","body":"Since you&#39;ve accepted the answer you&#39;ve accepted you probably had an XY problem, since that answer (like a few other here) doesn&#39;t actually remove during iteration. And the answer to your nominal question is quite obvious if you think a bit about it: immediately visible effect vs delayed/deferred deletion. It&#39;s not just a matter of &quot;style&quot; or &quot;readability&quot;."}],"answers":[{"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1336053289,"creation_date":1336050442,"answer_id":10432032,"question_id":10431981,"body_markdown":"&gt; Are there any reasons to prefer one approach over the other\r\n\r\nThe first approach will work, but has the obvious overhead of copying the list.\r\n\r\nThe second approach will not work because many containers don&#39;t permit modification during iteration. [This includes `ArrayList`][1].\r\n\r\nIf the only modification is to remove the current element, you can make the second approach work by using [`itr.remove()`][2] (that is, use the *iterator*&#39;s `remove()` method, not the *container*&#39;s). **This would be my preferred method for iterators that support `remove()`.**\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3184883/concurrentmodificationexception-for-arraylist\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#remove%28%29","title":"Remove elements from collection while iterating","body":"<blockquote>\n  <p>Are there any reasons to prefer one approach over the other</p>\n</blockquote>\n\n<p>The first approach will work, but has the obvious overhead of copying the list.</p>\n\n<p>The second approach will not work because many containers don't permit modification during iteration. <a href=\"https://stackoverflow.com/questions/3184883/concurrentmodificationexception-for-arraylist\">This includes <code>ArrayList</code></a>.</p>\n\n<p>If the only modification is to remove the current element, you can make the second approach work by using <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#remove%28%29\" rel=\"noreferrer\"><code>itr.remove()</code></a> (that is, use the <em>iterator</em>'s <code>remove()</code> method, not the <em>container</em>'s). <strong>This would be my preferred method for iterators that support <code>remove()</code>.</strong></p>\n"},{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1336050442,"creation_date":1336050442,"answer_id":10432033,"question_id":10431981,"body_markdown":"Only second approach will work. You can modify collection during iteration using `iterator.remove()` only. All other attempts will cause `ConcurrentModificationException`.","title":"Remove elements from collection while iterating","body":"<p>Only second approach will work. You can modify collection during iteration using <code>iterator.remove()</code> only. All other attempts will cause <code>ConcurrentModificationException</code>.</p>\n"},{"tags":[],"owner":{"account_id":1456397,"reputation":186,"user_id":1371872,"display_name":"Calin Andrei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1336050507,"creation_date":1336050507,"answer_id":10432058,"question_id":10431981,"body_markdown":"I would choose the second as you don&#39;t have to do a copy of the memory and the Iterator works faster. So you save memory and time.","title":"Remove elements from collection while iterating","body":"<p>I would choose the second as you don't have to do a copy of the memory and the Iterator works faster. So you save memory and time.</p>\n"},{"tags":[],"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"down_vote_count":1,"up_vote_count":617,"is_accepted":true,"score":616,"last_activity_date":1554057577,"creation_date":1336050580,"answer_id":10432084,"question_id":10431981,"body_markdown":"Let me give a few examples with some alternatives to avoid a `ConcurrentModificationException`.\r\n\r\nSuppose we have the following collection of books\r\n\r\n    List&lt;Book&gt; books = new ArrayList&lt;Book&gt;();\r\n    books.add(new Book(new ISBN(&quot;0-201-63361-2&quot;)));\r\n    books.add(new Book(new ISBN(&quot;0-201-63361-3&quot;)));\r\n    books.add(new Book(new ISBN(&quot;0-201-63361-4&quot;)));\r\n\r\n**Collect and Remove**\r\n\r\nThe first technique consists in collecting all the objects that we want to delete (e.g. using an enhanced for loop) and after we finish iterating, we remove all found objects.\r\n\r\n    ISBN isbn = new ISBN(&quot;0-201-63361-2&quot;);\r\n    List&lt;Book&gt; found = new ArrayList&lt;Book&gt;();\r\n    for(Book book : books){\r\n    \tif(book.getIsbn().equals(isbn)){\r\n    \t\tfound.add(book);\r\n    \t}\r\n    }\r\n    books.removeAll(found);\r\n\r\nThis is supposing that the operation you want to do is &quot;delete&quot;. \r\n\r\nIf you want to &quot;add&quot; this approach would also work, but I would assume you would iterate over a different collection to determine what elements you want to add to a second collection and then issue an `addAll` method at the end.\r\n\r\n**Using ListIterator**\r\n\r\nIf you are working with lists, another technique consists in using a `ListIterator` which has support for removal and addition of items during the iteration itself.\r\n\r\n    ListIterator&lt;Book&gt; iter = books.listIterator();\r\n    while(iter.hasNext()){\r\n    \tif(iter.next().getIsbn().equals(isbn)){\r\n    \t\titer.remove();\r\n    \t}\r\n    }\r\n\r\nAgain, I used the &quot;remove&quot; method in the example above which is what your question seemed to imply, but you may also use its `add` method to add new elements during iteration.\r\n\r\n**Using JDK &gt;= 8**\r\n\r\nFor those working with Java 8 or superior versions, there are a couple of other techniques you could use to take advantage of it.\r\n\r\nYou could use the new `removeIf` method in the `Collection` base class:\r\n\r\n    ISBN other = new ISBN(&quot;0-201-63361-2&quot;);\r\n    books.removeIf(b -&gt; b.getIsbn().equals(other));\r\n\r\nOr use the new stream API:\r\n\r\n    ISBN other = new ISBN(&quot;0-201-63361-2&quot;);\r\n    List&lt;Book&gt; filtered = books.stream()\r\n                               .filter(b -&gt; b.getIsbn().equals(other))\r\n                               .collect(Collectors.toList());\r\n\r\n\r\nIn this last case, to filter elements out of a collection, you reassign the original reference to the filtered collection (i.e. `books = filtered`) or used the filtered collection to `removeAll` the found elements from the original collection (i.e. `books.removeAll(filtered)`).\r\n\r\n**Use Sublist or Subset** \r\n\r\nThere are other alternatives as well. If the list is sorted, and you want to remove consecutive elements you can create a sublist and then clear it:\r\n\r\n    books.subList(0,5).clear();\r\n\r\nSince the sublist is backed by the original list this would be an efficient way of removing this subcollection of elements.\r\n\r\nSomething similar could be achieved with sorted sets using `NavigableSet.subSet` method, or any of the slicing methods offered there.\r\n\r\n**Considerations:**\r\n\r\nWhat method you use might depend on what you are intending to do\r\n\r\n - The collect and `removeAl` technique works with any Collection (Collection, List, Set, etc). \r\n - The `ListIterator` technique obviously only works with lists, provided that their given `ListIterator` implementation offers support for add and remove operations.  \r\n - The `Iterator` approach would work with any type of collection, but it only supports remove operations.\r\n - With the `ListIterator`/`Iterator` approach the obvious advantage is not having to copy anything since we remove as we iterate. So, this is very efficient. \r\n - The JDK 8 streams example don&#39;t actually removed anything, but looked for the desired elements, and then we replaced the original collection reference with the new one, and let the old one be garbage collected. So, we iterate only once over the collection and that would be efficient.\r\n - In the collect and `removeAll` approach the disadvantage is that we have to iterate twice. First we iterate in the foor-loop looking for an object that matches our removal criteria, and once we have found it, we ask to remove it from the original collection, which would imply a second iteration work to look for this item in order to remove it. \r\n - I think it is worth mentioning that the remove method of the `Iterator` interface is marked as &quot;optional&quot; in Javadocs, which means that there could be `Iterator` implementations that throw `UnsupportedOperationException` if we invoke the remove method. As such, I&#39;d say this approach is less safe than others if we cannot guarantee the iterator support for removal of elements.\r\n\r\n\r\n  [1]: http://code.google.com/p/lambdaj/\r\n","title":"Remove elements from collection while iterating","body":"<p>Let me give a few examples with some alternatives to avoid a <code>ConcurrentModificationException</code>.</p>\n\n<p>Suppose we have the following collection of books</p>\n\n<pre><code>List&lt;Book&gt; books = new ArrayList&lt;Book&gt;();\nbooks.add(new Book(new ISBN(\"0-201-63361-2\")));\nbooks.add(new Book(new ISBN(\"0-201-63361-3\")));\nbooks.add(new Book(new ISBN(\"0-201-63361-4\")));\n</code></pre>\n\n<p><strong>Collect and Remove</strong></p>\n\n<p>The first technique consists in collecting all the objects that we want to delete (e.g. using an enhanced for loop) and after we finish iterating, we remove all found objects.</p>\n\n<pre><code>ISBN isbn = new ISBN(\"0-201-63361-2\");\nList&lt;Book&gt; found = new ArrayList&lt;Book&gt;();\nfor(Book book : books){\n    if(book.getIsbn().equals(isbn)){\n        found.add(book);\n    }\n}\nbooks.removeAll(found);\n</code></pre>\n\n<p>This is supposing that the operation you want to do is \"delete\". </p>\n\n<p>If you want to \"add\" this approach would also work, but I would assume you would iterate over a different collection to determine what elements you want to add to a second collection and then issue an <code>addAll</code> method at the end.</p>\n\n<p><strong>Using ListIterator</strong></p>\n\n<p>If you are working with lists, another technique consists in using a <code>ListIterator</code> which has support for removal and addition of items during the iteration itself.</p>\n\n<pre><code>ListIterator&lt;Book&gt; iter = books.listIterator();\nwhile(iter.hasNext()){\n    if(iter.next().getIsbn().equals(isbn)){\n        iter.remove();\n    }\n}\n</code></pre>\n\n<p>Again, I used the \"remove\" method in the example above which is what your question seemed to imply, but you may also use its <code>add</code> method to add new elements during iteration.</p>\n\n<p><strong>Using JDK >= 8</strong></p>\n\n<p>For those working with Java 8 or superior versions, there are a couple of other techniques you could use to take advantage of it.</p>\n\n<p>You could use the new <code>removeIf</code> method in the <code>Collection</code> base class:</p>\n\n<pre><code>ISBN other = new ISBN(\"0-201-63361-2\");\nbooks.removeIf(b -&gt; b.getIsbn().equals(other));\n</code></pre>\n\n<p>Or use the new stream API:</p>\n\n<pre><code>ISBN other = new ISBN(\"0-201-63361-2\");\nList&lt;Book&gt; filtered = books.stream()\n                           .filter(b -&gt; b.getIsbn().equals(other))\n                           .collect(Collectors.toList());\n</code></pre>\n\n<p>In this last case, to filter elements out of a collection, you reassign the original reference to the filtered collection (i.e. <code>books = filtered</code>) or used the filtered collection to <code>removeAll</code> the found elements from the original collection (i.e. <code>books.removeAll(filtered)</code>).</p>\n\n<p><strong>Use Sublist or Subset</strong> </p>\n\n<p>There are other alternatives as well. If the list is sorted, and you want to remove consecutive elements you can create a sublist and then clear it:</p>\n\n<pre><code>books.subList(0,5).clear();\n</code></pre>\n\n<p>Since the sublist is backed by the original list this would be an efficient way of removing this subcollection of elements.</p>\n\n<p>Something similar could be achieved with sorted sets using <code>NavigableSet.subSet</code> method, or any of the slicing methods offered there.</p>\n\n<p><strong>Considerations:</strong></p>\n\n<p>What method you use might depend on what you are intending to do</p>\n\n<ul>\n<li>The collect and <code>removeAl</code> technique works with any Collection (Collection, List, Set, etc). </li>\n<li>The <code>ListIterator</code> technique obviously only works with lists, provided that their given <code>ListIterator</code> implementation offers support for add and remove operations.  </li>\n<li>The <code>Iterator</code> approach would work with any type of collection, but it only supports remove operations.</li>\n<li>With the <code>ListIterator</code>/<code>Iterator</code> approach the obvious advantage is not having to copy anything since we remove as we iterate. So, this is very efficient. </li>\n<li>The JDK 8 streams example don't actually removed anything, but looked for the desired elements, and then we replaced the original collection reference with the new one, and let the old one be garbage collected. So, we iterate only once over the collection and that would be efficient.</li>\n<li>In the collect and <code>removeAll</code> approach the disadvantage is that we have to iterate twice. First we iterate in the foor-loop looking for an object that matches our removal criteria, and once we have found it, we ask to remove it from the original collection, which would imply a second iteration work to look for this item in order to remove it. </li>\n<li>I think it is worth mentioning that the remove method of the <code>Iterator</code> interface is marked as \"optional\" in Javadocs, which means that there could be <code>Iterator</code> implementations that throw <code>UnsupportedOperationException</code> if we invoke the remove method. As such, I'd say this approach is less safe than others if we cannot guarantee the iterator support for removal of elements.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":43822,"reputation":3532,"user_id":128285,"accept_rate":64,"display_name":"Jon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1336052542,"creation_date":1336050737,"answer_id":10432132,"question_id":10431981,"body_markdown":"You can&#39;t do the second, because even if you use the `remove()` method on [Iterator][1], [you&#39;ll get an Exception thrown][2].  \r\n\r\nPersonally, I would prefer the first for all `Collection` instances, despite the additional overheard of creating the new `Collection`, I find it less prone to error during edit by other developers. On some Collection implementations, the Iterator `remove()` is supported, on other it isn&#39;t. You can read more in the docs for [Iterator][3]. \r\n\r\nThe third alternative, is to create a new `Collection`, iterate over the original, and add all the members of the first `Collection` to the second `Collection` that are *not* up for deletion. Depending on the size of the `Collection` and the number of deletes, this could  significantly save on memory, when compared to the first approach. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html#iterator%28%29\r\n  [3]: http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html","title":"Remove elements from collection while iterating","body":"<p>You can't do the second, because even if you use the <code>remove()</code> method on <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html\" rel=\"nofollow\">Iterator</a>, <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html#iterator%28%29\" rel=\"nofollow\">you'll get an Exception thrown</a>.  </p>\n\n<p>Personally, I would prefer the first for all <code>Collection</code> instances, despite the additional overheard of creating the new <code>Collection</code>, I find it less prone to error during edit by other developers. On some Collection implementations, the Iterator <code>remove()</code> is supported, on other it isn't. You can read more in the docs for <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html\" rel=\"nofollow\">Iterator</a>. </p>\n\n<p>The third alternative, is to create a new <code>Collection</code>, iterate over the original, and add all the members of the first <code>Collection</code> to the second <code>Collection</code> that are <em>not</em> up for deletion. Depending on the size of the <code>Collection</code> and the number of deletes, this could  significantly save on memory, when compared to the first approach. </p>\n"},{"tags":[],"owner":{"account_id":1419922,"reputation":1047,"user_id":1344765,"display_name":"Drake Clarris"},"down_vote_count":7,"up_vote_count":1,"is_accepted":false,"score":-6,"last_activity_date":1336052477,"creation_date":1336052477,"answer_id":10432633,"question_id":10431981,"body_markdown":"why not this?\r\n\r\n    for( int i = 0; i &lt; Foo.size(); i++ )\r\n    {\r\n       if( Foo.get(i).equals( some test ) )\r\n       {\r\n          Foo.remove(i);\r\n       }\r\n    }\r\n\r\nAnd if it&#39;s a map, not a list, you can use keyset()","title":"Remove elements from collection while iterating","body":"<p>why not this?</p>\n\n<pre><code>for( int i = 0; i &lt; Foo.size(); i++ )\n{\n   if( Foo.get(i).equals( some test ) )\n   {\n      Foo.remove(i);\n   }\n}\n</code></pre>\n\n<p>And if it's a map, not a list, you can use keyset()</p>\n"},{"tags":[],"owner":{"account_id":913256,"reputation":28297,"user_id":2564200,"accept_rate":83,"display_name":"Santhosh"},"down_vote_count":2,"up_vote_count":23,"is_accepted":false,"score":21,"last_activity_date":1507101588,"creation_date":1507101588,"answer_id":46559150,"question_id":10431981,"body_markdown":"In Java 8, there is another approach. [Collection#removeIf][1]\r\n\r\neg:\r\n\r\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n    list.add(1);\r\n    list.add(2);\r\n    list.add(3);\r\n            \r\n    list.removeIf(i -&gt; i &gt; 2);\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeIf-java.util.function.Predicate-","title":"Remove elements from collection while iterating","body":"<p>In Java 8, there is another approach. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeIf-java.util.function.Predicate-\" rel=\"noreferrer\">Collection#removeIf</a></p>\n\n<p>eg:</p>\n\n<pre><code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\nlist.add(1);\nlist.add(2);\nlist.add(3);\n\nlist.removeIf(i -&gt; i &gt; 2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6606886,"reputation":916,"user_id":5103458,"display_name":"Shebla Tsama"},"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1593793267,"creation_date":1585183547,"answer_id":60859469,"question_id":10431981,"body_markdown":"Old Timer Favorite (it still works):\r\n\r\n    List&lt;String&gt; list;\r\n    \r\n    for(int i = list.size() - 1; i &gt;= 0; --i) \r\n    {\r\n            if(list.get(i).contains(&quot;bad&quot;))\r\n            {\r\n                    list.remove(i);\r\n            }\r\n    }\r\n\r\nBenefits:\r\n1) It only iterates over the list *once*\r\n2) No extra objects created, or other unneeded complexity\r\n3) No problems with trying to use the index of a removed item, because... well, think about it!\r\n","title":"Remove elements from collection while iterating","body":"<p>Old Timer Favorite (it still works):</p>\n<pre><code>List&lt;String&gt; list;\n\nfor(int i = list.size() - 1; i &gt;= 0; --i) \n{\n        if(list.get(i).contains(&quot;bad&quot;))\n        {\n                list.remove(i);\n        }\n}\n</code></pre>\n<p>Benefits:</p>\n<ol>\n<li>It only iterates over the list <em>once</em></li>\n<li>No extra objects created, or other unneeded complexity</li>\n<li>No problems with trying to use the index of a removed item, because... well, think about it!</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":18214648,"reputation":124,"user_id":13256503,"display_name":"Golam Kibria"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640605549,"creation_date":1640602301,"answer_id":70494513,"question_id":10431981,"body_markdown":"You can see this sample; If we think remove odd value from a list:\r\n \r\n\r\n    public static void main(String[] args) {\r\n        Predicate&lt;Integer&gt; isOdd = v -&gt; v % 2 == 0;\r\n        List&lt;Integer&gt; listArr = Arrays.asList(5, 7, 90, 11, 55, 60);\r\n        listArr = listArr.stream().filter(isOdd).collect(Collectors.toList());\r\n        listArr.forEach(System.out::println);\r\n    }\r\n\r\n \r\n\r\n","title":"Remove elements from collection while iterating","body":"<p>You can see this sample; If we think remove odd value from a list:</p>\n<pre><code>public static void main(String[] args) {\n    Predicate&lt;Integer&gt; isOdd = v -&gt; v % 2 == 0;\n    List&lt;Integer&gt; listArr = Arrays.asList(5, 7, 90, 11, 55, 60);\n    listArr = listArr.stream().filter(isOdd).collect(Collectors.toList());\n    listArr.forEach(System.out::println);\n}\n</code></pre>\n"}],"owner":{"account_id":1400738,"reputation":6226,"user_id":1329572,"accept_rate":100,"display_name":"user1329572"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415405,"favorite_count":0,"down_vote_count":2,"up_vote_count":326,"accepted_answer_id":10432084,"answer_count":9,"score":324,"last_activity_date":1677146521,"creation_date":1336050239,"question_id":10431981,"body_markdown":"AFAIK, there are two approaches:\r\n\r\n 1. Iterate over a copy of the collection\r\n 2. Use the iterator of the actual collection\r\n\r\nFor instance,\r\n\r\n    List&lt;Foo&gt; fooListCopy = new ArrayList&lt;Foo&gt;(fooList);\r\n    for(Foo foo : fooListCopy){\r\n        // modify actual fooList\r\n    }\r\n\r\nand\r\n\r\n    Iterator&lt;Foo&gt; itr = fooList.iterator();\r\n    while(itr.hasNext()){\r\n        // modify actual fooList using itr.remove()\r\n    }\r\n\r\nAre there any reasons to prefer one approach over the other (e.g. preferring the first approach for the simple reason of readability)?","title":"Remove elements from collection while iterating","body":"<p>AFAIK, there are two approaches:</p>\n\n<ol>\n<li>Iterate over a copy of the collection</li>\n<li>Use the iterator of the actual collection</li>\n</ol>\n\n<p>For instance,</p>\n\n<pre><code>List&lt;Foo&gt; fooListCopy = new ArrayList&lt;Foo&gt;(fooList);\nfor(Foo foo : fooListCopy){\n    // modify actual fooList\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Iterator&lt;Foo&gt; itr = fooList.iterator();\nwhile(itr.hasNext()){\n    // modify actual fooList using itr.remove()\n}\n</code></pre>\n\n<p>Are there any reasons to prefer one approach over the other (e.g. preferring the first approach for the simple reason of readability)?</p>\n"},{"tags":["java","selenium-webdriver","file-upload","ui-automation"],"comments":[{"owner":{"account_id":1327194,"reputation":1809,"user_id":1271785,"accept_rate":67,"display_name":"pfurbacher"},"score":0,"creation_date":1676906983,"post_id":75507981,"comment_id":133226876,"body_markdown":"Please post the HTML snippet as code in your question (see [Why I should not upload images of code](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557)). Also, you say it&#39;s a desktop app, yet you are posting HTML which suggests it&#39;s a web app. Which is it?","body":"Please post the HTML snippet as code in your question (see <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Why I should not upload images of code</a>). Also, you say it&#39;s a desktop app, yet you are posting HTML which suggests it&#39;s a web app. Which is it?"}],"owner":{"account_id":27831499,"reputation":11,"user_id":21249824,"display_name":"Viraj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677146426,"creation_date":1676888407,"question_id":75507981,"body_markdown":"While clicking on upload button desktop application opening to select a csv file.\r\nSend Keys not working as no input type as file . Robot class also not working.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI tried send keys as well as robot class , nothing is working . Can someone help here pls.\r\n\r\nI used below robot class\r\n\r\n StringSelection stringSelection= new StringSelection(file.getAbsolutePath());\r\n\r\n       //Copy to clipboard \r\n       \r\n     Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);\r\n     browserDriver.waitTime(MainConfig.timeout_for_AJAX);\r\n\t\t   Robot robot = new Robot();\r\n\r\n    \t\t\t\t// Cmd + Tab is needed since it launches a Java app and the browser looses focus\r\n\r\n    \t\t\t\trobot.keyPress(KeyEvent.VK_META);\r\n\r\n    \t\t\t\trobot.keyPress(KeyEvent.VK_TAB);\r\n    \t\t\t\trobot.delay(1000);\r\n    \t\t\t\trobot.keyRelease(KeyEvent.VK_META);\r\n\r\n    \t\t\t\trobot.keyRelease(KeyEvent.VK_TAB);\r\n\r\n    \t\t\t\trobot.delay(1000);\r\n\r\n    \t\t\t\t//Open Goto window\r\n\r\n    \t\t\t\trobot.keyPress(KeyEvent.VK_META);\r\n\r\n    \t\t\t\trobot.keyPress(KeyEvent.VK_SHIFT);\r\n\r\n    \t\t\t\trobot.keyPress(KeyEvent.VK_G);\r\n\r\n    \t\t\t\trobot.keyRelease(KeyEvent.VK_META);\r\n\r\n    \t\t\t\trobot.keyRelease(KeyEvent.VK_SHIFT);\r\n\r\n    \t\t\t\trobot.keyRelease(KeyEvent.VK_G);\r\n\r\n    \t\t\t\t//Paste the clipboard value\r\n\r\n    \t\t\t\trobot.keyPress(KeyEvent.VK_META);\r\n\r\n    \t\t\t\trobot.keyPress(KeyEvent.VK_V);\r\n\r\n    \t\t\t\trobot.keyRelease(KeyEvent.VK_META);\r\n\r\n    \t\t\t\trobot.keyRelease(KeyEvent.VK_V);\r\n\r\n    \t\t\t\t//Press Enter key to close the Goto window and Upload window\r\n\r\n    \t\t\t\trobot.keyPress(KeyEvent.VK_ENTER);\r\n\r\n    \t\t\t\trobot.keyRelease(KeyEvent.VK_ENTER);\r\n\r\n    \t\t\t\trobot.delay(1000);\r\n\r\n    \t\t\t\trobot.keyPress(KeyEvent.VK_ENTER);\r\n\r\n    \t\t\t\trobot.keyRelease(KeyEvent.VK_ENTER);\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zG7YE.png\r\n  [2]: https://i.stack.imgur.com/UbUCW.png","title":"How to upload CSV file on Mac using Selenium Java having no input tag","body":"<p>While clicking on upload button desktop application opening to select a csv file.\nSend Keys not working as no input type as file . Robot class also not working.</p>\n<p><a href=\"https://i.stack.imgur.com/zG7YE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zG7YE.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/UbUCW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UbUCW.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried send keys as well as robot class , nothing is working . Can someone help here pls.</p>\n<p>I used below robot class</p>\n<p>StringSelection stringSelection= new StringSelection(file.getAbsolutePath());</p>\n<pre><code>   //Copy to clipboard \n   \n Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);\n browserDriver.waitTime(MainConfig.timeout_for_AJAX);\n       Robot robot = new Robot();\n\n                // Cmd + Tab is needed since it launches a Java app and the browser looses focus\n\n                robot.keyPress(KeyEvent.VK_META);\n\n                robot.keyPress(KeyEvent.VK_TAB);\n                robot.delay(1000);\n                robot.keyRelease(KeyEvent.VK_META);\n\n                robot.keyRelease(KeyEvent.VK_TAB);\n\n                robot.delay(1000);\n\n                //Open Goto window\n\n                robot.keyPress(KeyEvent.VK_META);\n\n                robot.keyPress(KeyEvent.VK_SHIFT);\n\n                robot.keyPress(KeyEvent.VK_G);\n\n                robot.keyRelease(KeyEvent.VK_META);\n\n                robot.keyRelease(KeyEvent.VK_SHIFT);\n\n                robot.keyRelease(KeyEvent.VK_G);\n\n                //Paste the clipboard value\n\n                robot.keyPress(KeyEvent.VK_META);\n\n                robot.keyPress(KeyEvent.VK_V);\n\n                robot.keyRelease(KeyEvent.VK_META);\n\n                robot.keyRelease(KeyEvent.VK_V);\n\n                //Press Enter key to close the Goto window and Upload window\n\n                robot.keyPress(KeyEvent.VK_ENTER);\n\n                robot.keyRelease(KeyEvent.VK_ENTER);\n\n                robot.delay(1000);\n\n                robot.keyPress(KeyEvent.VK_ENTER);\n\n                robot.keyRelease(KeyEvent.VK_ENTER);\n</code></pre>\n"},{"tags":["java","postgresql","spring-data-jpa","spring-data","plpgsql"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1552588964,"post_id":55169797,"comment_id":97078985,"body_markdown":"Arrays in Postgres are ***not*** the same as any other collection in any other language.  They&#39;re... *different*.  Could you explain what you&#39;re trying to accomplish with `my_func`?  There may be a more elegant solution in conventional SQL.","body":"Arrays in Postgres are <b><i>not</i></b> the same as any other collection in any other language.  They&#39;re... <i>different</i>.  Could you explain what you&#39;re trying to accomplish with <code>my_func</code>?  There may be a more elegant solution in conventional SQL."},{"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"score":0,"creation_date":1552589332,"post_id":55169797,"comment_id":97079147,"body_markdown":"@Makoto Hi, I edited my question. In my function I have some advanced logic with cursor, and so on. This passed parameter I need use just in final select in where condition in IN clause","body":"@Makoto Hi, I edited my question. In my function I have some advanced logic with cursor, and so on. This passed parameter I need use just in final select in where condition in IN clause"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1552590899,"post_id":55169797,"comment_id":97079975,"body_markdown":"So I believe that this is an XY problem - you&#39;re trying to find a set of records based on an IN query and there&#39;s an easier way to go about doing this than what you&#39;re proposing.  I&#39;ve found a dupe for this question; I encourage you to peruse it.  If it doesn&#39;t fit, you can edit your question to explain why.","body":"So I believe that this is an XY problem - you&#39;re trying to find a set of records based on an IN query and there&#39;s an easier way to go about doing this than what you&#39;re proposing.  I&#39;ve found a dupe for this question; I encourage you to peruse it.  If it doesn&#39;t fit, you can edit your question to explain why."},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1552590905,"post_id":55169797,"comment_id":97079980,"body_markdown":"Possible duplicate of [Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause](https://stackoverflow.com/questions/18987292/spring-crudrepository-findbyinventoryidslistlong-inventoryidlist-equivalen)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/18987292/spring-crudrepository-findbyinventoryidslistlong-inventoryidlist-equivalen\">Spring CrudRepository findByInventoryIds(List&lt;Long&gt; inventoryIdList) - equivalent to IN clause</a>"},{"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"score":0,"creation_date":1552592385,"post_id":55169797,"comment_id":97080691,"body_markdown":"@Makoto there is different problem like you post ... I need send list of strings into postgres function but I don&#39;t know what type I should use in that function. Your post is not solution for me because I cannot write this query directly into annotation without function .. there is more logic","body":"@Makoto there is different problem like you post ... I need send list of strings into postgres function but I don&#39;t know what type I should use in that function. Your post is not solution for me because I cannot write this query directly into annotation without function .. there is more logic"},{"owner":{"account_id":1062483,"reputation":20163,"user_id":1104979,"display_name":"Nick Barnes"},"score":2,"creation_date":1552595437,"post_id":55169797,"comment_id":97082242,"body_markdown":"Looks like the list is being passed successfully (you made it to line 28 of your function before encountering an error). I&#39;m guessing the cause is `WHERE t.foo IN (myList)`; to check if `t.foo` is in your array, use `t.foo = ANY(myList)` instead.","body":"Looks like the list is being passed successfully (you made it to line 28 of your function before encountering an error). I&#39;m guessing the cause is <code>WHERE t.foo IN (myList)</code>; to check if <code>t.foo</code> is in your array, use <code>t.foo = ANY(myList)</code> instead."},{"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"score":0,"creation_date":1552595962,"post_id":55169797,"comment_id":97082475,"body_markdown":"@NickBarnes now I am home from work and I tried it again with ANY but I got different error: ERROR: function my_func(character varying, character varying, character varying) does not exist\n  Hint: No function matches the given name and argument types. You might need to add explicit type casts. There is &quot;character varying&quot; same times as I have items in List","body":"@NickBarnes now I am home from work and I tried it again with ANY but I got different error: ERROR: function my_func(character varying, character varying, character varying) does not exist   Hint: No function matches the given name and argument types. You might need to add explicit type casts. There is &quot;character varying&quot; same times as I have items in List"},{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1552596129,"post_id":55169797,"comment_id":97082557,"body_markdown":"Does it work if you use `@NonNull @Param(&quot;myList&quot;) String[] myList`, instead?","body":"Does it work if you use <code>@NonNull @Param(&quot;myList&quot;) String[] myList</code>, instead?"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1552596156,"post_id":55169797,"comment_id":97082572,"body_markdown":"I suppose the reason I proposed that as a solution is because this is a very common thing to want to do with queries in JPA.  I don&#39;t want to beat a dead horse per se, but what other logic do you have to account for such that you can&#39;t author the query like a &quot;normal&quot; SQL query?","body":"I suppose the reason I proposed that as a solution is because this is a very common thing to want to do with queries in JPA.  I don&#39;t want to beat a dead horse per se, but what other logic do you have to account for such that you can&#39;t author the query like a &quot;normal&quot; SQL query?"},{"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"score":0,"creation_date":1552596312,"post_id":55169797,"comment_id":97082637,"body_markdown":"@Makoto there are some cursors where I do another selects for calculation some values, and that values I&#39;m using in final query where is also IN clause. I didn&#39;t write that whole function in my question because I can&#39;t avoid it.","body":"@Makoto there are some cursors where I do another selects for calculation some values, and that values I&#39;m using in final query where is also IN clause. I didn&#39;t write that whole function in my question because I can&#39;t avoid it."},{"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"score":0,"creation_date":1552596424,"post_id":55169797,"comment_id":97082694,"body_markdown":"@LukasEder I tried use String[] instead of List but I got this error: ERROR: function my_func(bytea) does not exist","body":"@LukasEder I tried use String[] instead of List but I got this error: ERROR: function my_func(bytea) does not exist"}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552596300,"creation_date":1552595965,"answer_id":55171587,"question_id":55169797,"body_markdown":"I&#39;m afraid I don&#39;t know how to do this with Spring Data JPA, but with plain JDBC, you&#39;d have to simply cast the bind variable to `text[]` and pass a `String[]` type instead of a list. For example:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    try (PreparedStatement s = conn.prepareStatement(&quot;select * from my_func(?::text[])&quot;)) {\r\n        s.setObject(1, myList.toArray(new String[0]));\r\n\r\n        try (ResultSet rs = s.executeQuery()) {\r\n            // ...\r\n        }\r\n    }\r\n\r\nThe key message here is that the JDBC driver will expect an array, not a list.","title":"Pass List&lt;String&gt; into postgres&#39; function as parameter","body":"<p>I'm afraid I don't know how to do this with Spring Data JPA, but with plain JDBC, you'd have to simply cast the bind variable to <code>text[]</code> and pass a <code>String[]</code> type instead of a list. For example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>try (PreparedStatement s = conn.prepareStatement(\"select * from my_func(?::text[])\")) {\n    s.setObject(1, myList.toArray(new String[0]));\n\n    try (ResultSet rs = s.executeQuery()) {\n        // ...\n    }\n}\n</code></pre>\n\n<p>The key message here is that the JDBC driver will expect an array, not a list.</p>\n"},{"tags":[],"owner":{"account_id":7020942,"reputation":28614,"user_id":5380322,"accept_rate":62,"display_name":"Cepr0"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1552742409,"creation_date":1552642694,"answer_id":55179555,"question_id":55169797,"body_markdown":"I used the following workaround solution in the similar situation:\r\n\r\n1) Created two helper functions:\r\n\r\n```sql\r\n-- Convert a variable number of text arguments to text array\r\n-- Used to convert Java collection to the text array\r\n--\r\ncreate or replace function list_to_array(variadic _list text[]) returns text[] language sql as $$\r\nselect _list;\r\n$$;\r\n``` \r\n\r\n```sql\r\n-- Convert the bytea argument to null.\r\n-- Used to convert Java null to PostgreSQL null\r\n--\r\ncreate or replace function list_to_array(_list bytea) returns text[] language sql as $$\r\nselect null::text[];\r\n$$;\r\n```\r\n\r\n2) Used `any` instead of `in` in the main function, for example:\r\n\r\n```sql\r\ncreate or replace function my_func(_params text[]) \r\nreturns table (field1 text, field2 text) \r\nlanguage sql as \r\n$$\r\nselect\r\n  t.field1 as field1,\r\n  t.field2 as field2,\r\nfrom\r\n  my_table t\r\nwhere\r\n  array_length(_params, 1) is null or t.foo = any(_params);\r\n$$;\r\n```\r\n\r\n3) Then used them in a repository method, for example:\r\n\r\n```java\r\n@NonNull\r\n@Query(value = &quot;select ... from my_func(list_to_array(?1))&quot;, nativeQuery = true)\r\nList&lt;MyProjection&gt; getFromMyFunc(@Nullable Set&lt;String&gt; params, @NonNull Pageable page);\r\n```","title":"Pass List&lt;String&gt; into postgres&#39; function as parameter","body":"<p>I used the following workaround solution in the similar situation:</p>\n\n<p>1) Created two helper functions:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>-- Convert a variable number of text arguments to text array\n-- Used to convert Java collection to the text array\n--\ncreate or replace function list_to_array(variadic _list text[]) returns text[] language sql as $$\nselect _list;\n$$;\n</code></pre>\n\n<pre class=\"lang-sql prettyprint-override\"><code>-- Convert the bytea argument to null.\n-- Used to convert Java null to PostgreSQL null\n--\ncreate or replace function list_to_array(_list bytea) returns text[] language sql as $$\nselect null::text[];\n$$;\n</code></pre>\n\n<p>2) Used <code>any</code> instead of <code>in</code> in the main function, for example:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>create or replace function my_func(_params text[]) \nreturns table (field1 text, field2 text) \nlanguage sql as \n$$\nselect\n  t.field1 as field1,\n  t.field2 as field2,\nfrom\n  my_table t\nwhere\n  array_length(_params, 1) is null or t.foo = any(_params);\n$$;\n</code></pre>\n\n<p>3) Then used them in a repository method, for example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@NonNull\n@Query(value = \"select ... from my_func(list_to_array(?1))\", nativeQuery = true)\nList&lt;MyProjection&gt; getFromMyFunc(@Nullable Set&lt;String&gt; params, @NonNull Pageable page);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15462527,"reputation":7553,"user_id":11154841,"display_name":"questionto42"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630007353,"creation_date":1630007353,"answer_id":68944563,"question_id":55169797,"body_markdown":"Not sure whether this add a lot of value, I just hope it helps.\r\n\r\nThe final format that the PostgreSQL function expects from a list as the input is of the following a pattern, using an array:\r\n\r\n    select my_func(array[&#39;item1&#39;,&#39;item2&#39;]::my_type[]);\r\n\r\nSee a full example [on Database Administrators.SE](https://dba.stackexchange.com/a/2794/212659).\r\n\r\nIn your case:\r\n\r\n    select my_func(array[&#39;item1&#39;,&#39;item2&#39;]::text[]);\r\n\r\nand I found out in my own tests that\r\n\r\n    select my_func(array[&#39;item1&#39;,&#39;item2&#39;]);\r\n\r\nshould already be enough.\r\n\r\n\r\nThen, the only aim is to get this format from your original java type. Thihs has been answered by the other question. This answer is just about showing the aim of it all.","title":"Pass List&lt;String&gt; into postgres&#39; function as parameter","body":"<p>Not sure whether this add a lot of value, I just hope it helps.</p>\n<p>The final format that the PostgreSQL function expects from a list as the input is of the following a pattern, using an array:</p>\n<pre><code>select my_func(array['item1','item2']::my_type[]);\n</code></pre>\n<p>See a full example <a href=\"https://dba.stackexchange.com/a/2794/212659\">on Database Administrators.SE</a>.</p>\n<p>In your case:</p>\n<pre><code>select my_func(array['item1','item2']::text[]);\n</code></pre>\n<p>and I found out in my own tests that</p>\n<pre><code>select my_func(array['item1','item2']);\n</code></pre>\n<p>should already be enough.</p>\n<p>Then, the only aim is to get this format from your original java type. Thihs has been answered by the other question. This answer is just about showing the aim of it all.</p>\n"}],"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14281,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":55179555,"answer_count":3,"score":5,"last_activity_date":1677146421,"creation_date":1552588540,"question_id":55169797,"body_markdown":"I have spring data repository interface like this:\r\n\r\n    public interface MyEntityRepository extends \r\n            JpaRepository&lt;MyEntity, Long&gt; {\r\n    \r\n        @Query(nativeQuery = true, value = &quot;select * from my_func(:myList)&quot;)\r\n        Page&lt;MyEntity&gt; findBy(\r\n                @NonNull @Param(&quot;myList&quot;) List&lt;String&gt; myList,\r\n                @NonNull Pageable pageable);\r\n    \r\n    }\r\n\r\nPostgres&#39; function I have defined like this (but I can change it if I did it wrong):\r\n\r\n    CREATE OR REPLACE FUNCTION my_func(variadic myList text[])\r\n    RETURNS SETOF myEntityTable AS $$\r\n    ... some logic\r\n    select * from myEntityTable t where t.foo in (myList);\r\n\r\nWhen I call this repository method I got this error:\r\n\r\n    ERROR: operator does not exist: character varying = text[]\r\n    Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.\r\n    Where: PL/pgSQL function f_najdi_autorizaciu_na_spracovanie(text[]) line 28 at RETURN QUERY\r\n\r\nCan you please tell me what type should I use in my postgres function? Thank you in advice.\r\n\r\nEDIT:\r\nI cannot use native query above repository method and pass there list into IN clause because I have in DB function more logic, variables and so on ... it have to be DB function.","title":"Pass List&lt;String&gt; into postgres&#39; function as parameter","body":"<p>I have spring data repository interface like this:</p>\n\n<pre><code>public interface MyEntityRepository extends \n        JpaRepository&lt;MyEntity, Long&gt; {\n\n    @Query(nativeQuery = true, value = \"select * from my_func(:myList)\")\n    Page&lt;MyEntity&gt; findBy(\n            @NonNull @Param(\"myList\") List&lt;String&gt; myList,\n            @NonNull Pageable pageable);\n\n}\n</code></pre>\n\n<p>Postgres' function I have defined like this (but I can change it if I did it wrong):</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION my_func(variadic myList text[])\nRETURNS SETOF myEntityTable AS $$\n... some logic\nselect * from myEntityTable t where t.foo in (myList);\n</code></pre>\n\n<p>When I call this repository method I got this error:</p>\n\n<pre><code>ERROR: operator does not exist: character varying = text[]\nHint: No operator matches the given name and argument type(s). You might need to add explicit type casts.\nWhere: PL/pgSQL function f_najdi_autorizaciu_na_spracovanie(text[]) line 28 at RETURN QUERY\n</code></pre>\n\n<p>Can you please tell me what type should I use in my postgres function? Thank you in advice.</p>\n\n<p>EDIT:\nI cannot use native query above repository method and pass there list into IN clause because I have in DB function more logic, variables and so on ... it have to be DB function.</p>\n"},{"tags":["java","gradle","jar","classpath"],"answers":[{"tags":[],"owner":{"account_id":10899037,"reputation":19,"user_id":8359731,"display_name":"BambooBandit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677146111,"creation_date":1676833464,"answer_id":75502725,"question_id":75502140,"body_markdown":"Found a solution!\r\n\r\nBasically you add\r\n\r\n    duplicatesStrategy = DuplicatesStrategy.EXCLUDE\r\n\r\nto your dist task in desktop build.gradle","title":"Modifying a library class by having a directory with the same path doesn&#39;t work in exported .jar","body":"<p>Found a solution!</p>\n<p>Basically you add</p>\n<pre><code>duplicatesStrategy = DuplicatesStrategy.EXCLUDE\n</code></pre>\n<p>to your dist task in desktop build.gradle</p>\n"}],"owner":{"account_id":10899037,"reputation":19,"user_id":8359731,"display_name":"BambooBandit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677146111,"creation_date":1676828370,"question_id":75502140,"body_markdown":"I have a gradle based project where I needed to make a few tweaks to some library classes. I made a package with the same path as the library to override the class. It ends up working fine in my IDE, but when I export it via packr, the application refers to the original library code, not my overridden package code, so I get errors like this.\r\n\r\n&gt; class com.badlogic.gdx.utils.GdxRuntimeException: java.lang.NoSuchFieldError: soundCom\r\ncom.badlogic.gdx.backends.lwjgl3.Lwjgl3Application.&lt;init&gt;(Lwjgl3Application.java:172)\r\n\r\n\r\nSorry if there is terminology I am missing, I&#39;m not too familiar with this process.","title":"Modifying a library class by having a directory with the same path doesn&#39;t work in exported .jar","body":"<p>I have a gradle based project where I needed to make a few tweaks to some library classes. I made a package with the same path as the library to override the class. It ends up working fine in my IDE, but when I export it via packr, the application refers to the original library code, not my overridden package code, so I get errors like this.</p>\n<blockquote>\n<p>class com.badlogic.gdx.utils.GdxRuntimeException: java.lang.NoSuchFieldError: soundCom\ncom.badlogic.gdx.backends.lwjgl3.Lwjgl3Application.(Lwjgl3Application.java:172)</p>\n</blockquote>\n<p>Sorry if there is terminology I am missing, I'm not too familiar with this process.</p>\n"},{"tags":["java","sftp","jsch","file-attributes"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677145867,"creation_date":1570622251,"answer_id":58303618,"question_id":58301307,"body_markdown":"You seem to assume that the SFTP *&quot;extended attributes&quot;* are [*&quot;file system extended attributes&quot;*](https://en.wikipedia.org/wiki/Extended_file_attributes).\r\n\r\nThey are not.\r\n\r\nSFTP *&quot;extended attributes&quot;* is an extension mechanism, by which an SFTP server can provide or set additional attributes about the files, which are not part of the standard SFTP file attributes.\r\n\r\nThey indeed can *theoretically* be mapped to file system extended attributes. But actually most SFTP servers, and particularly the most widespread OpenSSH, do not support any SFTP extended attributes at all, let alone file system extended attributes.\r\nSee also https://stackoverflow.com/q/48687079/850848.\r\n\r\n---\r\n\r\nYou might be able to query the attributes using some shell commands, if you have also a shell access – but that&#39;s not *SFTP* anymore.","title":"Read file extended attributes of files on SFTP server with JSch","body":"<p>You seem to assume that the SFTP <em>&quot;extended attributes&quot;</em> are <a href=\"https://en.wikipedia.org/wiki/Extended_file_attributes\" rel=\"nofollow noreferrer\"><em>&quot;file system extended attributes&quot;</em></a>.</p>\n<p>They are not.</p>\n<p>SFTP <em>&quot;extended attributes&quot;</em> is an extension mechanism, by which an SFTP server can provide or set additional attributes about the files, which are not part of the standard SFTP file attributes.</p>\n<p>They indeed can <em>theoretically</em> be mapped to file system extended attributes. But actually most SFTP servers, and particularly the most widespread OpenSSH, do not support any SFTP extended attributes at all, let alone file system extended attributes.\nSee also <a href=\"https://stackoverflow.com/q/48687079/850848\">Setting the extended file attributes using SSH.NET SftpClient</a>.</p>\n<hr />\n<p>You might be able to query the attributes using some shell commands, if you have also a shell access – but that's not <em>SFTP</em> anymore.</p>\n"}],"owner":{"account_id":2524499,"reputation":323,"user_id":2194113,"accept_rate":75,"display_name":"jaros"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1352,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":58303618,"answer_count":1,"score":1,"last_activity_date":1677145867,"creation_date":1570614119,"question_id":58301307,"body_markdown":"I want to read file extended attributes using com.jcraft.JSch 0.1.55 (the file is on SFTP server). I know that class `SftpATTR` actually does have a method\r\n````\r\npublic String[] getExtended()\r\n````\r\nbut in my case it returns null.\r\n\r\n\r\nI see that in this code\r\n````\r\nstatic SftpATTRS getATTR(Buffer buf){\r\n    SftpATTRS attr=new SftpATTRS();\t\r\n    attr.flags=buf.getInt();\r\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_SIZE)!=0){ attr.size=buf.getLong(); }\r\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_UIDGID)!=0){\r\n      attr.uid=buf.getInt(); attr.gid=buf.getInt();\r\n    }\r\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_PERMISSIONS)!=0){ \r\n      attr.permissions=buf.getInt();\r\n    }\r\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_ACMODTIME)!=0){ \r\n      attr.atime=buf.getInt();\r\n    }\r\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_ACMODTIME)!=0){ \r\n      attr.mtime=buf.getInt(); \r\n    }\r\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_EXTENDED)!=0){\r\n      int count=buf.getInt();\r\n      if(count&gt;0){\r\n\tattr.extended=new String[count*2];\r\n\tfor(int i=0; i&lt;count; i++){\r\n\t  attr.extended[i*2]=Util.byte2str(buf.getString());\r\n\t  attr.extended[i*2+1]=Util.byte2str(buf.getString());\r\n\t}\r\n      }\r\n    }\r\n    return attr;\r\n  } \r\n````\r\nthe last if-statement is responsible for reading extended attributes but it seems to me that it always evaluates to false, because\r\n````\r\nint flags=0;\r\n````\r\nand\r\n````\r\npublic static final int SSH_FILEXFER_ATTR_EXTENDED=     0x80000000;\r\n````\r\nI cannot change the flags directly because it&#39;s setter doesn&#39;t have a public modifier.\r\n\r\nIs there another way to change the flags or read the extended attributes somehow?","title":"Read file extended attributes of files on SFTP server with JSch","body":"<p>I want to read file extended attributes using com.jcraft.JSch 0.1.55 (the file is on SFTP server). I know that class <code>SftpATTR</code> actually does have a method</p>\n\n<pre><code>public String[] getExtended()\n</code></pre>\n\n<p>but in my case it returns null.</p>\n\n<p>I see that in this code</p>\n\n<pre><code>static SftpATTRS getATTR(Buffer buf){\n    SftpATTRS attr=new SftpATTRS(); \n    attr.flags=buf.getInt();\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_SIZE)!=0){ attr.size=buf.getLong(); }\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_UIDGID)!=0){\n      attr.uid=buf.getInt(); attr.gid=buf.getInt();\n    }\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_PERMISSIONS)!=0){ \n      attr.permissions=buf.getInt();\n    }\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_ACMODTIME)!=0){ \n      attr.atime=buf.getInt();\n    }\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_ACMODTIME)!=0){ \n      attr.mtime=buf.getInt(); \n    }\n    if((attr.flags&amp;SSH_FILEXFER_ATTR_EXTENDED)!=0){\n      int count=buf.getInt();\n      if(count&gt;0){\n    attr.extended=new String[count*2];\n    for(int i=0; i&lt;count; i++){\n      attr.extended[i*2]=Util.byte2str(buf.getString());\n      attr.extended[i*2+1]=Util.byte2str(buf.getString());\n    }\n      }\n    }\n    return attr;\n  } \n</code></pre>\n\n<p>the last if-statement is responsible for reading extended attributes but it seems to me that it always evaluates to false, because</p>\n\n<pre><code>int flags=0;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public static final int SSH_FILEXFER_ATTR_EXTENDED=     0x80000000;\n</code></pre>\n\n<p>I cannot change the flags directly because it's setter doesn't have a public modifier.</p>\n\n<p>Is there another way to change the flags or read the extended attributes somehow?</p>\n"},{"tags":["java","spring-security","authorization","access-denied"],"answers":[{"tags":[],"owner":{"account_id":6645713,"reputation":1,"user_id":5129906,"display_name":"mohammed amnay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606904930,"creation_date":1606904930,"answer_id":65106267,"question_id":64500797,"body_markdown":"After investigating i found a solution for my problem : \r\n1) create Custom Access Denied Handler class annotated with @ControllerAdvice\r\n2) the must important is to define the sort order for our annotated component with high priority (e.g. @Order(value = 1))\r\n\r\nthanks","title":"Spring security : Access denied handler doesn&#39;t work (xml config + preauthorize annotation on controller method)","body":"<p>After investigating i found a solution for my problem :</p>\n<ol>\n<li>create Custom Access Denied Handler class annotated with @ControllerAdvice</li>\n<li>the must important is to define the sort order for our annotated component with high priority (e.g. @Order(value = 1))</li>\n</ol>\n<p>thanks</p>\n"},{"tags":[],"owner":{"account_id":17205704,"reputation":1,"user_id":12456327,"display_name":"Christophe Agoero"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677145399,"creation_date":1677145399,"answer_id":75543027,"question_id":64500797,"body_markdown":"Just rethrow the exception. The handle method of AccessDeniedHandler will be called.\r\n\r\n```java\r\n@RestControllerAdvice\r\npublic class GlobalExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n\r\n    /**\r\n     * Si erreur de s&#233;curit&#233; au niveau m&#233;thode il faut re throw pour aller dans le \r\n     * handle de AccessDeniedHandler\r\n     *\r\n     * @param e\r\n     */\r\n    @ExceptionHandler(AccessDeniedException.class)\r\n    void handleAccessDeniedException(AccessDeniedException e) {\r\n        throw e;\r\n    }\r\n\r\n\r\n}","title":"Spring security : Access denied handler doesn&#39;t work (xml config + preauthorize annotation on controller method)","body":"<p>Just rethrow the exception. The handle method of AccessDeniedHandler will be called.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestControllerAdvice\npublic class GlobalExceptionHandler extends ResponseEntityExceptionHandler {\n\n\n    /**\n     * Si erreur de sécurité au niveau méthode il faut re throw pour aller dans le \n     * handle de AccessDeniedHandler\n     *\n     * @param e\n     */\n    @ExceptionHandler(AccessDeniedException.class)\n    void handleAccessDeniedException(AccessDeniedException e) {\n        throw e;\n    }\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":6645713,"reputation":1,"user_id":5129906,"display_name":"mohammed amnay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":344,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677145399,"creation_date":1603459105,"question_id":64500797,"body_markdown":"Access-denied-handler doesn&#39;t work. The spring configuration is splitted on many xml file \r\n\r\n1) applicationContext-spring-security.xml\r\n````\r\n&lt;http auto-config=&#39;false&quot; use-expressions=&quot;true&quot; entry-point-ref=&quot;loginUrlAuthenticationEntryPoint&quot; &gt;\r\n    &lt;access-denied-handler error-page=&#39;/accessdenied.htm&quot; /&gt;\r\n    &lt;intercept-url pattern=&quot;/login.htm&quot; access=&quot;permitAll&quot;/&gt;\r\n    &lt;intercept-url pattern=&#39;/editprocedure.htm&quot; access=&quot;hasAuthority(&#39;CAPABILITY_ADD&#39;)&quot;/&gt;\r\n&lt;/http&gt;\r\n````\r\nthe access-denied-handler works well for xml config (as `&lt;intercept-url pattern=&quot;/addjob.htm&quot; access=&quot;hasAuthority(&#39;JOB_ADD&#39;)&quot;/&gt;`), but it dosen&#39;t when i use Preauthorize annotation !\r\n\r\n2) [app]-servlet.xml\r\n````\r\n...\r\n&lt;security:global-method-security pre-post-annotations=&quot;enabled&quot;/&gt;\r\n...\r\n````\t\r\n3) Controller\r\n````\r\n....\r\n    @RequestMapping(value=&quot;/adminarea.htm&quot;)\r\n    @PreAuthorize(&quot;hasAuthority(&#39;ADMIN_AREA&#39;)&quot;)\r\n    protected ModelAndView referenceData() throws Exception\r\n    {....}\r\n....\r\n````\r\nThank you all in advance :)\r\n ","title":"Spring security : Access denied handler doesn&#39;t work (xml config + preauthorize annotation on controller method)","body":"<p>Access-denied-handler doesn't work. The spring configuration is splitted on many xml file</p>\n<ol>\n<li>applicationContext-spring-security.xml</li>\n</ol>\n<pre><code>&lt;http auto-config='false&quot; use-expressions=&quot;true&quot; entry-point-ref=&quot;loginUrlAuthenticationEntryPoint&quot; &gt;\n    &lt;access-denied-handler error-page='/accessdenied.htm&quot; /&gt;\n    &lt;intercept-url pattern=&quot;/login.htm&quot; access=&quot;permitAll&quot;/&gt;\n    &lt;intercept-url pattern='/editprocedure.htm&quot; access=&quot;hasAuthority('CAPABILITY_ADD')&quot;/&gt;\n&lt;/http&gt;\n</code></pre>\n<p>the access-denied-handler works well for xml config (as <code>&lt;intercept-url pattern=&quot;/addjob.htm&quot; access=&quot;hasAuthority('JOB_ADD')&quot;/&gt;</code>), but it dosen't when i use Preauthorize annotation !</p>\n<ol start=\"2\">\n<li>[app]-servlet.xml</li>\n</ol>\n<pre><code>...\n&lt;security:global-method-security pre-post-annotations=&quot;enabled&quot;/&gt;\n...\n</code></pre>\n<ol start=\"3\">\n<li>Controller</li>\n</ol>\n<pre><code>....\n    @RequestMapping(value=&quot;/adminarea.htm&quot;)\n    @PreAuthorize(&quot;hasAuthority('ADMIN_AREA')&quot;)\n    protected ModelAndView referenceData() throws Exception\n    {....}\n....\n</code></pre>\n<p>Thank you all in advance :)</p>\n"},{"tags":["java","unit-testing","mockito","junit4"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1677245182,"post_id":75542989,"comment_id":133304769,"body_markdown":"Unrelated to coverage, but your test doesn&#39;t contain any assertions. In other words: it does not test anything","body":"Unrelated to coverage, but your test doesn&#39;t contain any assertions. In other words: it does not test anything"},{"owner":{"account_id":5851066,"reputation":479,"user_id":4609725,"accept_rate":43,"display_name":"robyp7"},"score":0,"creation_date":1677490508,"post_id":75542989,"comment_id":133340977,"body_markdown":"@knittl my test contai one assertion: assertThat(request.getClass()).as(&quot;check filter is on&quot;).isEqualTo(xxx.class), no?","body":"@knittl my test contai one assertion: assertThat(request.getClass()).as(&quot;check filter is on&quot;).isEqualTo(xxx.class), no?"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1677491244,"post_id":75542989,"comment_id":133341189,"body_markdown":"Oh, there is indeed an assertion. But why is the assertion inside a filter chain? That looks fishy.","body":"Oh, there is indeed an assertion. But why is the assertion inside a filter chain? That looks fishy."},{"owner":{"account_id":5851066,"reputation":479,"user_id":4609725,"accept_rate":43,"display_name":"robyp7"},"score":0,"creation_date":1677789633,"post_id":75542989,"comment_id":133412060,"body_markdown":"@knittl because look at the code inside..doFilter make this: req = new XSSRequestWrapper(request), but req is a mock object, and the only way that i  thinking is testing the type of instance... i cant do an assert on a mock! The mock dont change..Is it clever or naive? What you think can be done of different?","body":"@knittl because look at the code inside..doFilter make this: req = new XSSRequestWrapper(request), but req is a mock object, and the only way that i  thinking is testing the type of instance... i cant do an assert on a mock! The mock dont change..Is it clever or naive? What you think can be done of different?"}],"owner":{"account_id":5851066,"reputation":479,"user_id":4609725,"accept_rate":43,"display_name":"robyp7"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677145246,"creation_date":1677145246,"question_id":75542989,"body_markdown":"I have to make a junit mockito test on a java HttpFilter: i write some tests code on doFilter() but Code Coverage give me 0% of methods and line covered. Why?\r\n\r\n doFilter return void and &quot;req&quot; is reassigned to a new isntance, so i guess the only  assert is in my FilterChain method where new req istance is passed if so happens.  \r\n\r\nHow would you do the tests?\r\nThanks\r\n\r\nCode to test:\r\n\r\n    public class XSSFilter implements Filter{\r\n    \r\n        public static final String XSS_FILTER_ACTIVE_PROPERTY_KEY = &quot;XSSFilterActive&quot;;\r\n        public static final String XSS_FILTER_ACTIVE_DEFAULT_VALUE = &quot;false&quot;;\r\n        private Logger logger;\r\n    \r\n        boolean isXssFilterActive= false;\r\n    \r\n        @Override\r\n    \tpublic void init(FilterConfig filterConfig) throws ServletException {\r\n            if (logger==null) {\r\n                logger = LoggerFactory.getLogger(this.getClass().getName());\r\n            }\r\n            isXssFilterActive = Boolean.parseBoolean(ResourceManagerListener.getProperty(XSS_FILTER_ACTIVE_PROPERTY_KEY, XSS_FILTER_ACTIVE_DEFAULT_VALUE));\r\n    \t    logger.info(&quot;isXssFilterActive ={}&quot;, isXssFilterActive);\r\n            if (isXssFilterActive) {\r\n                logger.info(&quot;filter XSS on&quot;);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n    \tpublic void doFilter(ServletRequest req, ServletResponse response, FilterChain chain)\r\n    \t\t\tthrows IOException, ServletException {\t\t\r\n            HttpServletRequest request = (HttpServletRequest) req;\r\n            if (isXssFilterActive) {\r\n                req = new XSSRequestWrapper(request);\r\n            }\r\n            chain.doFilter(req, response);\r\n    \t}\r\n    \r\n        @Override\r\n    \tpublic void destroy() {\r\n    \t\t//empty\r\n    \t}\r\n    \t\r\n    \r\n    }\r\n\r\nThe tests:\r\n\r\n    public class XssFilterTest {\r\n    \r\n    \r\n        @Mock\r\n        HttpServletRequest req;\r\n    \r\n        @Mock\r\n        ServletResponse response;\r\n        private AutoCloseable autoCloseableMock;\r\n    \r\n    \r\n    \r\n        @Before\r\n        public void setUp() throws Exception {\r\n            autoCloseableMock = MockitoAnnotations.openMocks(this);\r\n        }\r\n    \r\n        //test XSS filtering ON: test request instance of XSSRequestWrapper \r\n        @Test\r\n        public void testXSSFilterActiveTrue() throws Exception { \r\n    \r\n            final MockedStatic&lt;ResourceManagerListener&gt; resourceManagerListenerMockedStatic = mockStatic(ResourceManagerListener.class);\r\n            when(ResourceManagerListener.getProperty(&quot;XSSFilterActive&quot;, &quot;false&quot;)).thenReturn(&quot;true&quot;);\r\n            XSSFilter target = new XSSFilter();\r\n            FilterConfig config = mock(FilterConfig.class);\r\n    \r\n            target.init(config);\r\n            \r\n            FilterChain filterChainConsumer =\r\n                    ( request, response) -&gt; assertThat(request.getClass()).as(&quot;check filter is on&quot;).isEqualTo(XSSRequestWrapper.class);\r\n            HttpServletRequest request = new HttpServletRequestWrapper(req);\r\n            target.doFilter(request,response, filterChainConsumer);\r\n            resourceManagerListenerMockedStatic.close();\r\n        }\r\n    \r\n    \r\n        //XSS filtering off: test request instanceOf HttpServletRequestWrapper\r\n        @Test\r\n        public void testXSSFilterActiveFalse() throws Exception { //test quando spento\r\n    \r\n            final MockedStatic&lt;ResourceManagerListener&gt; resourceManagerListenerMockedStatic = mockStatic(ResourceManagerListener.class);\r\n            //request = mock(HttpServletRequest.class);// se non si usa l&#39;injection con @Mock\r\n            when(ResourceManagerListener.getProperty(&quot;XSSFilterActive&quot;, &quot;false&quot;)).thenReturn(&quot;false&quot;);\r\n            XSSFilter target = new XSSFilter();\r\n            FilterConfig config = mock(FilterConfig.class);\r\n    \r\n            target.init(config);\r\n            //deve essere wrappata come new XSSRequestWrapper\r\n            FilterChain filterChainConsumer =\r\n                    ( request, response) -&gt; assertThat(request.getClass()).as(&quot;check filter is off&quot;).isEqualTo(HttpServletRequestWrapper.class);\r\n            HttpServletRequest request = new HttpServletRequestWrapper(req);\r\n            target.doFilter(request,response, filterChainConsumer);\r\n            resourceManagerListenerMockedStatic.close();\r\n        }\r\n    \r\n        @After\r\n        public void tearDown() throws Exception {\r\n            autoCloseableMock.close();\r\n        }\r\n    }\r\n\r\n","title":"mockito testing doFilter method, coverage 0%","body":"<p>I have to make a junit mockito test on a java HttpFilter: i write some tests code on doFilter() but Code Coverage give me 0% of methods and line covered. Why?</p>\n<p>doFilter return void and &quot;req&quot; is reassigned to a new isntance, so i guess the only  assert is in my FilterChain method where new req istance is passed if so happens.</p>\n<p>How would you do the tests?\nThanks</p>\n<p>Code to test:</p>\n<pre><code>public class XSSFilter implements Filter{\n\n    public static final String XSS_FILTER_ACTIVE_PROPERTY_KEY = &quot;XSSFilterActive&quot;;\n    public static final String XSS_FILTER_ACTIVE_DEFAULT_VALUE = &quot;false&quot;;\n    private Logger logger;\n\n    boolean isXssFilterActive= false;\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n        if (logger==null) {\n            logger = LoggerFactory.getLogger(this.getClass().getName());\n        }\n        isXssFilterActive = Boolean.parseBoolean(ResourceManagerListener.getProperty(XSS_FILTER_ACTIVE_PROPERTY_KEY, XSS_FILTER_ACTIVE_DEFAULT_VALUE));\n        logger.info(&quot;isXssFilterActive ={}&quot;, isXssFilterActive);\n        if (isXssFilterActive) {\n            logger.info(&quot;filter XSS on&quot;);\n        }\n    }\n\n    @Override\n    public void doFilter(ServletRequest req, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {      \n        HttpServletRequest request = (HttpServletRequest) req;\n        if (isXssFilterActive) {\n            req = new XSSRequestWrapper(request);\n        }\n        chain.doFilter(req, response);\n    }\n\n    @Override\n    public void destroy() {\n        //empty\n    }\n    \n\n}\n</code></pre>\n<p>The tests:</p>\n<pre><code>public class XssFilterTest {\n\n\n    @Mock\n    HttpServletRequest req;\n\n    @Mock\n    ServletResponse response;\n    private AutoCloseable autoCloseableMock;\n\n\n\n    @Before\n    public void setUp() throws Exception {\n        autoCloseableMock = MockitoAnnotations.openMocks(this);\n    }\n\n    //test XSS filtering ON: test request instance of XSSRequestWrapper \n    @Test\n    public void testXSSFilterActiveTrue() throws Exception { \n\n        final MockedStatic&lt;ResourceManagerListener&gt; resourceManagerListenerMockedStatic = mockStatic(ResourceManagerListener.class);\n        when(ResourceManagerListener.getProperty(&quot;XSSFilterActive&quot;, &quot;false&quot;)).thenReturn(&quot;true&quot;);\n        XSSFilter target = new XSSFilter();\n        FilterConfig config = mock(FilterConfig.class);\n\n        target.init(config);\n        \n        FilterChain filterChainConsumer =\n                ( request, response) -&gt; assertThat(request.getClass()).as(&quot;check filter is on&quot;).isEqualTo(XSSRequestWrapper.class);\n        HttpServletRequest request = new HttpServletRequestWrapper(req);\n        target.doFilter(request,response, filterChainConsumer);\n        resourceManagerListenerMockedStatic.close();\n    }\n\n\n    //XSS filtering off: test request instanceOf HttpServletRequestWrapper\n    @Test\n    public void testXSSFilterActiveFalse() throws Exception { //test quando spento\n\n        final MockedStatic&lt;ResourceManagerListener&gt; resourceManagerListenerMockedStatic = mockStatic(ResourceManagerListener.class);\n        //request = mock(HttpServletRequest.class);// se non si usa l'injection con @Mock\n        when(ResourceManagerListener.getProperty(&quot;XSSFilterActive&quot;, &quot;false&quot;)).thenReturn(&quot;false&quot;);\n        XSSFilter target = new XSSFilter();\n        FilterConfig config = mock(FilterConfig.class);\n\n        target.init(config);\n        //deve essere wrappata come new XSSRequestWrapper\n        FilterChain filterChainConsumer =\n                ( request, response) -&gt; assertThat(request.getClass()).as(&quot;check filter is off&quot;).isEqualTo(HttpServletRequestWrapper.class);\n        HttpServletRequest request = new HttpServletRequestWrapper(req);\n        target.doFilter(request,response, filterChainConsumer);\n        resourceManagerListenerMockedStatic.close();\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        autoCloseableMock.close();\n    }\n}\n</code></pre>\n"},{"tags":["java","file-io","jsch"],"comments":[{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1677144120,"post_id":75542527,"comment_id":133280863,"body_markdown":"What &quot;custom attribute&quot;? Do you mean something like this https://en.wikipedia.org/wiki/Extended_file_attributes ?","body":"What &quot;custom attribute&quot;? Do you mean something like this <a href=\"https://en.wikipedia.org/wiki/Extended_file_attributes\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Extended_file_attributes</a> ?"},{"owner":{"account_id":26336580,"reputation":1,"user_id":19996345,"display_name":"user19996345"},"score":0,"creation_date":1677144378,"post_id":75542527,"comment_id":133280948,"body_markdown":"Yes, we added one attribute by using this code: Path file = Paths.get(filePath);\n\t\t\t\tUserDefinedFileAttributeView view = Files.getFileAttributeView(file,\n\t\t\t\t\t\tUserDefinedFileAttributeView.class);\n\t\t\t\tview.write(&quot;user.customchecksum&quot;, Charset.defaultCharset().encode(&quot;XDRSECTVVTEST&quot;));","body":"Yes, we added one attribute by using this code: Path file = Paths.get(filePath); \t\t\t\tUserDefinedFileAttributeView view = Files.getFileAttributeView(file, \t\t\t\t\t\tUserDefinedFileAttributeView.class); \t\t\t\tview.write(&quot;user.customchecksum&quot;, Charset.defaultCharset().encode(&quot;XDRSECTVVTEST&quot;));"},{"owner":{"account_id":26336580,"reputation":1,"user_id":19996345,"display_name":"user19996345"},"score":0,"creation_date":1677144650,"post_id":75542527,"comment_id":133281024,"body_markdown":"I updated my question  as well the way we are adding attributes to a file.","body":"I updated my question  as well the way we are adding attributes to a file."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677145580,"post_id":75542527,"comment_id":133281273,"body_markdown":"If I understand correctly you use something like [`ChannelSftp.get()`](https://javadoc.io/static/com.jcraft/jsch/0.1.55/com/jcraft/jsch/ChannelSftp.html#get(java.lang.String)) to get the file content? It seems to me that simply using [the `lstat` method](https://javadoc.io/static/com.jcraft/jsch/0.1.55/com/jcraft/jsch/ChannelSftp.html#lstat(java.lang.String)) of that same class should give you access to what you need.","body":"If I understand correctly you use something like <a href=\"https://javadoc.io/static/com.jcraft/jsch/0.1.55/com/jcraft/jsch/ChannelSftp.html#get(java.lang.String)\" rel=\"nofollow noreferrer\"><code>ChannelSftp.get()</code></a> to get the file content? It seems to me that simply using <a href=\"https://javadoc.io/static/com.jcraft/jsch/0.1.55/com/jcraft/jsch/ChannelSftp.html#lstat(java.lang.String)\" rel=\"nofollow noreferrer\">the <code>lstat</code> method</a> of that same class should give you access to what you need."},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":1,"creation_date":1677145887,"post_id":75542527,"comment_id":133281368,"body_markdown":"See [Read file extended attributes of files on SFTP server with JSch](https://stackoverflow.com/q/58301307/850848).","body":"See <a href=\"https://stackoverflow.com/q/58301307/850848\">Read file extended attributes of files on SFTP server with JSch</a>."},{"owner":{"account_id":26336580,"reputation":1,"user_id":19996345,"display_name":"user19996345"},"score":0,"creation_date":1677146395,"post_id":75542527,"comment_id":133281527,"body_markdown":"@MartinPrikryl so is this not possible ?","body":"@MartinPrikryl so is this not possible ?"},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1677151412,"post_id":75542527,"comment_id":133282951,"body_markdown":"I believe my answer to the linked question answers this comprehensively. TL;DR: In most cases, it&#39;s imo not possible using SFTP. It still might be possible &quot;using JSch&quot;, if you resort to using shell commands (and know what shell commands to use, but that&#39;s not a programing question anymore, imo).","body":"I believe my answer to the linked question answers this comprehensively. TL;DR: In most cases, it&#39;s imo not possible using SFTP. It still might be possible &quot;using JSch&quot;, if you resort to using shell commands (and know what shell commands to use, but that&#39;s not a programing question anymore, imo)."}],"owner":{"account_id":26336580,"reputation":1,"user_id":19996345,"display_name":"user19996345"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677145109,"creation_date":1677142688,"question_id":75542527,"body_markdown":"We have one SFTP server where we placed one file present in **./test/directory1/test.csv**.&lt;br&gt;\r\nWe added one custom attribute to this file before placing it to this directory , attribute name **&quot;user.customchecksum&quot;**, below is code which we used to add attribute\r\n\r\n    Path file = Paths.get(&quot;C:/Files/test.csv&quot;);\r\n\t\t\t\tUserDefinedFileAttributeView view = Files.getFileAttributeView(file,\r\n\t\t\t\t\t\tUserDefinedFileAttributeView.class);\r\n\t\t\t\tview.write(&quot;user.customchecksum&quot;, Charset.defaultCharset().encode(&quot;XDRSECTVVTEST&quot;));\r\n\r\nNow before downloading this file we want to check that this attribute value and after that only we download this file.\r\n\r\n**Note**::&lt;br&gt;\r\nFor connection we are using JSCH and able to get File Inputstream without downloading the file.&lt;br&gt;\r\nBelow method we are using to read file attribute value after file is downloaded.&lt;br&gt;\r\nBut now we want to read this attribute before downloading file.\r\n\r\n    \tprivate void getCustomAttributes(String filePath) {\r\n\t\ttry {\r\n\t\t\tPath file = Paths.get(filePath);\r\n\t\t\tUserDefinedFileAttributeView view = Files.getFileAttributeView(file, UserDefinedFileAttributeView.class);\r\n\t\t\tString name = &quot;user.customchecksum&quot;;\r\n\t\t\tByteBuffer buf = ByteBuffer.allocate(view.size(name));\r\n\r\n\t\t\tview.read(name, buf);\r\n\t\t\tbuf.flip();\r\n\t\t\tString value = Charset.defaultCharset().decode(buf).toString();\r\n\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\nWe are able to read file InputStream before downloading file, can this be used to read added attributes? if yes what is the way to do this?","title":"Read file attributes of any file available at server without downloading it","body":"<p>We have one SFTP server where we placed one file present in <strong>./test/directory1/test.csv</strong>.<br>\nWe added one custom attribute to this file before placing it to this directory , attribute name <strong>&quot;user.customchecksum&quot;</strong>, below is code which we used to add attribute</p>\n<pre><code>Path file = Paths.get(&quot;C:/Files/test.csv&quot;);\n            UserDefinedFileAttributeView view = Files.getFileAttributeView(file,\n                    UserDefinedFileAttributeView.class);\n            view.write(&quot;user.customchecksum&quot;, Charset.defaultCharset().encode(&quot;XDRSECTVVTEST&quot;));\n</code></pre>\n<p>Now before downloading this file we want to check that this attribute value and after that only we download this file.</p>\n<p><strong>Note</strong>::<br>\nFor connection we are using JSCH and able to get File Inputstream without downloading the file.<br>\nBelow method we are using to read file attribute value after file is downloaded.<br>\nBut now we want to read this attribute before downloading file.</p>\n<pre><code>    private void getCustomAttributes(String filePath) {\n    try {\n        Path file = Paths.get(filePath);\n        UserDefinedFileAttributeView view = Files.getFileAttributeView(file, UserDefinedFileAttributeView.class);\n        String name = &quot;user.customchecksum&quot;;\n        ByteBuffer buf = ByteBuffer.allocate(view.size(name));\n\n        view.read(name, buf);\n        buf.flip();\n        String value = Charset.defaultCharset().decode(buf).toString();\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n<p>We are able to read file InputStream before downloading file, can this be used to read added attributes? if yes what is the way to do this?</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":9500342,"reputation":526,"user_id":7245173,"accept_rate":50,"display_name":"Emil Terman"},"score":0,"creation_date":1677145269,"post_id":75542911,"comment_id":133281187,"body_markdown":"Would it make sense to have a custom getter `Log.getIdsInDescription` where you parse the description in java yourself? Therefore, you would pull the log, then call your getter. Or do you need to extract the ids from all the logs?","body":"Would it make sense to have a custom getter <code>Log.getIdsInDescription</code> where you parse the description in java yourself? Therefore, you would pull the log, then call your getter. Or do you need to extract the ids from all the logs?"},{"owner":{"account_id":10413480,"reputation":3922,"user_id":10950272,"display_name":"makozaki"},"score":0,"creation_date":1677148453,"post_id":75542911,"comment_id":133282140,"body_markdown":"I was hoping to create a solution where database handles it and returns only necessary values. But if nothing works then ofc retrieving whole content of column and parsing/filtering it in java would work.","body":"I was hoping to create a solution where database handles it and returns only necessary values. But if nothing works then ofc retrieving whole content of column and parsing/filtering it in java would work."},{"owner":{"account_id":2729259,"reputation":6968,"user_id":2353403,"accept_rate":82,"display_name":"Coder"},"score":0,"creation_date":1677153926,"post_id":75542911,"comment_id":133283645,"body_markdown":"I&#39;m not sure. But can u check if this helps https://stackoverflow.com/a/44738213/2353403","body":"I&#39;m not sure. But can u check if this helps <a href=\"https://stackoverflow.com/a/44738213/2353403\">stackoverflow.com/a/44738213/2353403</a>"},{"owner":{"account_id":10413480,"reputation":3922,"user_id":10950272,"display_name":"makozaki"},"score":0,"creation_date":1677231197,"post_id":75542911,"comment_id":133300910,"body_markdown":"I&#39;m getting to conclusion that string manipulation in scope of database query is dependent on database hence only native queries can solve it.","body":"I&#39;m getting to conclusion that string manipulation in scope of database query is dependent on database hence only native queries can solve it."}],"owner":{"account_id":10413480,"reputation":3922,"user_id":10950272,"display_name":"makozaki"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677144784,"creation_date":1677144784,"question_id":75542911,"body_markdown":"Let&#39;s say I have a database table:\r\n```\r\nID     | DESCRIPTION\r\n1      | Some value &#39;123&#39; added\r\n2      | Deleted value &#39;333&#39; by &#39;Someone&#39;\r\n```\r\nJpa entity:\r\n```java\r\n@Entity\r\n@Table(name = &quot;LOG&quot;)\r\npublic class Log {\r\n\r\n    @Id\r\n    @Column(name = &quot;ID&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;DESCRIPTION&quot;)\r\n    private String description;\r\n    ...\r\n}\r\n```\r\nAnd working jpa query to retrieve first found numeric value inside single quotas:\r\n```java\r\n    @Query(value = &quot;select distinct REGEXP_SUBSTR( log.DESCRIPTION, &#39;&#39;&#39;(\\\\d+)&#39;&#39;&#39;,1,1,&#39;&#39;,1) from Log log where 1=1 &quot;, nativeQuery = true)\r\n    List&lt;String&gt; findObjectIdsInDescription();\r\n```\r\nI&#39;m working on Oracle database hence REGEXP_SUBSTR + native query, which is working fine for me right now. \r\n\r\nIs there a database independent approach using jpa query only? I&#39;m asking as I also need it for different databases.","title":"Get distinct list of numbers from string column with JPA query","body":"<p>Let's say I have a database table:</p>\n<pre><code>ID     | DESCRIPTION\n1      | Some value '123' added\n2      | Deleted value '333' by 'Someone'\n</code></pre>\n<p>Jpa entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;LOG&quot;)\npublic class Log {\n\n    @Id\n    @Column(name = &quot;ID&quot;)\n    private Long id;\n\n    @Column(name = &quot;DESCRIPTION&quot;)\n    private String description;\n    ...\n}\n</code></pre>\n<p>And working jpa query to retrieve first found numeric value inside single quotas:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Query(value = &quot;select distinct REGEXP_SUBSTR( log.DESCRIPTION, '''(\\\\d+)''',1,1,'',1) from Log log where 1=1 &quot;, nativeQuery = true)\n    List&lt;String&gt; findObjectIdsInDescription();\n</code></pre>\n<p>I'm working on Oracle database hence REGEXP_SUBSTR + native query, which is working fine for me right now.</p>\n<p>Is there a database independent approach using jpa query only? I'm asking as I also need it for different databases.</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","hikaricp"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677070530,"post_id":75532248,"comment_id":133264135,"body_markdown":"Without seeing your code and how you are using things this will be impossible to answer.","body":"Without seeing your code and how you are using things this will be impossible to answer."},{"owner":{"account_id":15714113,"reputation":97,"user_id":11338722,"display_name":"Sudan Shrestha"},"score":0,"creation_date":1677123571,"post_id":75532248,"comment_id":133277190,"body_markdown":"I have added the configurations. Can it be of some help please?","body":"I have added the configurations. Can it be of some help please?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677136342,"post_id":75532248,"comment_id":133279012,"body_markdown":"The answer lies in your edit. Ofcourse it will throw the exception as nothing is there to query nor will it switch (your configuration is broken in that regard). If you have b oth the read and master available and read goes down. The connections remain. You haven&#39;t enabled connection validation while idle. which will check the connections and close them if broken and re-open new ones. If you don&#39;t it will keep broken connections open. ALso your `readDataSource` is broken as it will return something else if there is an error, instead you should stop starting imho.","body":"The answer lies in your edit. Ofcourse it will throw the exception as nothing is there to query nor will it switch (your configuration is broken in that regard). If you have b oth the read and master available and read goes down. The connections remain. You haven&#39;t enabled connection validation while idle. which will check the connections and close them if broken and re-open new ones. If you don&#39;t it will keep broken connections open. ALso your <code>readDataSource</code> is broken as it will return something else if there is an error, instead you should stop starting imho."},{"owner":{"account_id":15714113,"reputation":97,"user_id":11338722,"display_name":"Sudan Shrestha"},"score":0,"creation_date":1677142307,"post_id":75532248,"comment_id":133280353,"body_markdown":"Thank you!!\nWhat changes should I do and how do I validate the connection while idle?","body":"Thank you!! What changes should I do and how do I validate the connection while idle?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677142900,"post_id":75532248,"comment_id":133280517,"body_markdown":"Make sure that your min/max are different and that you have set a decent number for the `validationTimeout` property.","body":"Make sure that your min/max are different and that you have set a decent number for the <code>validationTimeout</code> property."},{"owner":{"account_id":15714113,"reputation":97,"user_id":11338722,"display_name":"Sudan Shrestha"},"score":0,"creation_date":1677143356,"post_id":75532248,"comment_id":133280636,"body_markdown":"i just changed minimum-idle, maximum-pool-size, max-lifetime of report db and added validation-timeout property on both but still it gives me same error","body":"i just changed minimum-idle, maximum-pool-size, max-lifetime of report db and added validation-timeout property on both but still it gives me same error"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677143535,"post_id":75532248,"comment_id":133280681,"body_markdown":"Then you are doing something that closes the datasource which you aren&#39;t showing here. It was already difficult from your snippets. Another thing is that your other datasources should be beans as well. Make the methods `public` and add `@Bean` to them so they get properly initialized. I would also suggest to use the Spring Boot documented way to configure multiple datasources. Another thing is you need to reset your threadlocal when the request is done, which is something you don&#39;t appear to do.","body":"Then you are doing something that closes the datasource which you aren&#39;t showing here. It was already difficult from your snippets. Another thing is that your other datasources should be beans as well. Make the methods <code>public</code> and add <code>@Bean</code> to them so they get properly initialized. I would also suggest to use the Spring Boot documented way to configure multiple datasources. Another thing is you need to reset your threadlocal when the request is done, which is something you don&#39;t appear to do."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1677143640,"post_id":75532248,"comment_id":133280718,"body_markdown":"Upon further inspection the problem is your configuration, you are creating a datsource within a `try/resources` which will close the datasource. So as mentioned your confiugration is the culprit.","body":"Upon further inspection the problem is your configuration, you are creating a datsource within a <code>try&#47;resources</code> which will close the datasource. So as mentioned your confiugration is the culprit."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677144678,"creation_date":1677144475,"answer_id":75542853,"question_id":75532248,"body_markdown":"The problem is, as hinted already in the comments, your configuration. Whilst being overly extensive it is also wrong. What is wrong you are using a try-with-resources which will automatically close the resource after the block finishes. So in the end you are always ending up with a closed datasource. Regardless of the fact if it is or isn&#39;t connected. \r\n\r\nI would strongly recommend following the [Spring Boot preferred way][1] of configuring your datasources. \r\n\r\n```java\r\n@Configuration\r\npublic DatasourceConfiguration {\r\n\r\n  @Bean\r\n  @Primary\r\n  public DataSource dataSource() {\r\n    DataSourceRouting routingDataSource = new DataSourceRouting();\r\n    routingDataSource.initDatasource(masterDataSource(), readDataSource());\r\n    return routingDataSource;\r\n  }\r\n\r\n  @Bean\r\n  @Primary\r\n  @ConfigurationProperties(&quot;master.datasource&quot;)\r\n  public DataSourceProperties masterDataSourceProperties() {\r\n    return new DataSourceProperties();\r\n  }\r\n\r\n  @Bean\r\n  @ConfigurationProperties(&quot;report.datasource&quot;)\r\n  public DataSourceProperties reportDataSourceProperties() {\r\n    return new DataSourceProperties();\r\n  }\r\n  \r\n  @Bean\r\n  @ConfigurationProperties(&quot;master.datasource.hikari&quot;)\r\n  public HikariDataSource masterDataSource(DataSourceProperties masterDataSourceProperties) {\r\n    return masterDataSourceProperties.initializeDataSourceBuilder()\r\n      .type(HikariDataSource.class).build();  \r\n  }\r\n\r\n  @Bean\r\n  @ConfigurationProperties(&quot;report.datasource.hikari&quot;)\r\n  public HikariDataSource masterDataSource(DataSourceProperties reportDataSourceProperties) {\r\n    return reportDataSourceProperties.initializeDataSourceBuilder()\r\n      .type(HikariDataSource.class).build();  \r\n  }\r\n}\r\n```\r\n\r\nThe `url`, `username` and `password` property should be set on the datasource directly to prevent start failures. \r\n\r\n```\r\n#Master Database\r\nmaster.datasource.url=jdbc:postgresql://localhost:5432/master_db\r\nmaster.datasource.username=*****\r\nmaster.datasource.password=*****\r\nmaster.datasource.hikari.minimum-idle=10\r\nmaster.datasource.hikari.maximum-pool-size=30\r\nmaster.datasource.hikari.connection-timeout=30000\r\nmaster.datasource.hikari.leakDetection=15000\r\nmaster.datasource.hikari.idle-timeout=25000\r\nmaster.datasource.hikari.max-lifetime=600000\r\nmaster.datasource.hikari.auto-commit=true\r\n\r\n#Slave Database Read\r\nreport.datasource.url=jdbc:postgresql://localhost:5432/slave_db\r\nreport.datasource.username=*****\r\nreport.datasource.password=*****\r\nreport.datasource.hikari.minimum-idle=10\r\nreport.datasource.hikari.maximum-pool-size=30\r\nreport.datasource.hikari.connection-timeout=30000\r\nreport.datasource.hikari.leakDetection=15000\r\nreport.datasource.hikari.idle-timeout=20000\r\nreport.datasource.hikari.max-lifetime=600000\r\nreport.datasource.hikari.auto-commit=true\r\nreport.datasource.hikari.initializationFailTimeout=-1\r\n```\r\n\r\nTo handle breaking connections make sure the min/max are different and that you set a reasonable `validationTimeout` for the validation. For the report database you could add the `initializationFailTimeout` and set a negative value. This will not lead to acquiring connections at startup but later on. This will allow you to even start with a broken reporting database, for which the connections, due to validation, later will be available. \r\n\r\nAnother thing that is wrong in your setup is that yo never reset the routing key, as it is stored in a `ThreadLocal` it will get reused eventually, as request handling threads are in a pool. You need to clear in the `afterCompletion` method of the `HandlerInterceptor`. \r\n\r\n[1]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.configure-two-datasources","title":"HikariDataSource closes automatically when I query from it","body":"<p>The problem is, as hinted already in the comments, your configuration. Whilst being overly extensive it is also wrong. What is wrong you are using a try-with-resources which will automatically close the resource after the block finishes. So in the end you are always ending up with a closed datasource. Regardless of the fact if it is or isn't connected.</p>\n<p>I would strongly recommend following the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-access.configure-two-datasources\" rel=\"nofollow noreferrer\">Spring Boot preferred way</a> of configuring your datasources.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic DatasourceConfiguration {\n\n  @Bean\n  @Primary\n  public DataSource dataSource() {\n    DataSourceRouting routingDataSource = new DataSourceRouting();\n    routingDataSource.initDatasource(masterDataSource(), readDataSource());\n    return routingDataSource;\n  }\n\n  @Bean\n  @Primary\n  @ConfigurationProperties(&quot;master.datasource&quot;)\n  public DataSourceProperties masterDataSourceProperties() {\n    return new DataSourceProperties();\n  }\n\n  @Bean\n  @ConfigurationProperties(&quot;report.datasource&quot;)\n  public DataSourceProperties reportDataSourceProperties() {\n    return new DataSourceProperties();\n  }\n  \n  @Bean\n  @ConfigurationProperties(&quot;master.datasource.hikari&quot;)\n  public HikariDataSource masterDataSource(DataSourceProperties masterDataSourceProperties) {\n    return masterDataSourceProperties.initializeDataSourceBuilder()\n      .type(HikariDataSource.class).build();  \n  }\n\n  @Bean\n  @ConfigurationProperties(&quot;report.datasource.hikari&quot;)\n  public HikariDataSource masterDataSource(DataSourceProperties reportDataSourceProperties) {\n    return reportDataSourceProperties.initializeDataSourceBuilder()\n      .type(HikariDataSource.class).build();  \n  }\n}\n</code></pre>\n<p>The <code>url</code>, <code>username</code> and <code>password</code> property should be set on the datasource directly to prevent start failures.</p>\n<pre><code>#Master Database\nmaster.datasource.url=jdbc:postgresql://localhost:5432/master_db\nmaster.datasource.username=*****\nmaster.datasource.password=*****\nmaster.datasource.hikari.minimum-idle=10\nmaster.datasource.hikari.maximum-pool-size=30\nmaster.datasource.hikari.connection-timeout=30000\nmaster.datasource.hikari.leakDetection=15000\nmaster.datasource.hikari.idle-timeout=25000\nmaster.datasource.hikari.max-lifetime=600000\nmaster.datasource.hikari.auto-commit=true\n\n#Slave Database Read\nreport.datasource.url=jdbc:postgresql://localhost:5432/slave_db\nreport.datasource.username=*****\nreport.datasource.password=*****\nreport.datasource.hikari.minimum-idle=10\nreport.datasource.hikari.maximum-pool-size=30\nreport.datasource.hikari.connection-timeout=30000\nreport.datasource.hikari.leakDetection=15000\nreport.datasource.hikari.idle-timeout=20000\nreport.datasource.hikari.max-lifetime=600000\nreport.datasource.hikari.auto-commit=true\nreport.datasource.hikari.initializationFailTimeout=-1\n</code></pre>\n<p>To handle breaking connections make sure the min/max are different and that you set a reasonable <code>validationTimeout</code> for the validation. For the report database you could add the <code>initializationFailTimeout</code> and set a negative value. This will not lead to acquiring connections at startup but later on. This will allow you to even start with a broken reporting database, for which the connections, due to validation, later will be available.</p>\n<p>Another thing that is wrong in your setup is that yo never reset the routing key, as it is stored in a <code>ThreadLocal</code> it will get reused eventually, as request handling threads are in a pool. You need to clear in the <code>afterCompletion</code> method of the <code>HandlerInterceptor</code>.</p>\n"}],"owner":{"account_id":15714113,"reputation":97,"user_id":11338722,"display_name":"Sudan Shrestha"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":942,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75542853,"answer_count":1,"score":0,"last_activity_date":1677144678,"creation_date":1677066168,"question_id":75532248,"body_markdown":"I have configured two database in my spring boot application as master and slave db. Whenever the application queries anything from the slave db, hikari pool is automatically closed and its throws error as\r\n```\r\no.h.engine.jdbc.spi.SqlExceptionHelper  (137)\t |&gt; SQL Error: 0, SQLState: null\r\n[ http-nio-2100-exec-6 ] |ERROR|    o.h.engine.jdbc.spi.SqlExceptionHelper  (142)\t |&gt; HikariDataSource HikariDataSource (REPORT_POOL) has been closed.\r\n [ http-nio-2100-exec-6 ] |ERROR|    c.n.c.exception.GlobalExceptionHandler  (485)\t |&gt; Critical Error: \r\norg.springframework.orm.jpa.JpaSystemException: Unable to acquire JDBC Connection; nested exception is org.hibernate.exception.GenericJDBCException: Unable to acquire JDBC Connection\r\n```\r\n\r\nmy configurations for db is as follows:\r\n```\r\n#Master Database\r\nmaster.datasource.hikari.url=jdbc:postgresql://localhost:5432/master_db\r\nmaster.datasource.hikari.username=*****\r\nmaster.datasource.hikari.password=*****\r\nmaster.datasource.hikari.minimum-idle=10\r\nmaster.datasource.hikari.maximum-pool-size=30\r\nmaster.datasource.hikari.connection-timeout=30000\r\nmaster.datasource.hikari.leakDetection=15000\r\nmaster.datasource.hikari.idle-timeout=25000\r\nmaster.datasource.hikari.max-lifetime=600000\r\nmaster.datasource.hikari.auto-commit=true\r\n\r\n#Slave Database Read\r\nreport.datasource.hikari.url=jdbc:postgresql://localhost:5432/slave_db\r\nreport.datasource.hikari.username=*****\r\nreport.datasource.hikari.password=*****\r\nreport.datasource.hikari.minimum-idle=10\r\nreport.datasource.hikari.maximum-pool-size=30\r\nreport.datasource.hikari.connection-timeout=30000\r\nreport.datasource.hikari.leakDetection=15000\r\nreport.datasource.hikari.idle-timeout=20000\r\nreport.datasource.hikari.max-lifetime=600000\r\nreport.datasource.hikari.auto-commit=true\r\n```\r\n\r\nI have configured two data sources as\r\n```\r\n@Bean\r\n@Primary\r\n@Autowired\r\npublic DataSource dataSource() {\r\n\tDataSourceRouting routingDataSource = new DataSourceRouting();\r\n\troutingDataSource.initDatasource(masterDataSource(), readDataSource());\r\n\t\treturn routingDataSource;\r\n\t}\r\n\r\n\tprivate DataSource masterDataSource() {\r\n\t\tHikariConfig master = new HikariConfig();\r\n\t\tmaster.setPoolName(&quot;MASTER_POOL&quot;);\r\n\t\tmaster.setJdbcUrl(env.getProperty(String.format(&quot;%s.url&quot;, MASTER)));\r\n\t\tmaster.setUsername((env.getProperty(String.format(&quot;%s.username&quot;, MASTER))));\r\n\t\tmaster.setPassword((env.getProperty(String.format(&quot;%s.password&quot;, MASTER))));\r\n\t\tmaster.setMinimumIdle(Integer.valueOf(env.getProperty(String.format(&quot;%s.minimum-idle&quot;, MASTER))));\r\n\t\tmaster.setMaximumPoolSize(Integer.valueOf(env.getProperty(String.format(&quot;%s.maximum-pool-size&quot;, MASTER))));\r\n\t\tmaster.setConnectionTimeout(Long.valueOf(env.getProperty(String.format(&quot;%s.connection-timeout&quot;, MASTER))));\r\n\t\tmaster.setIdleTimeout(Long.valueOf(env.getProperty(String.format(&quot;%s.idle-timeout&quot;, MASTER))));\r\n\t\tmaster.setMaxLifetime(Long.valueOf(env.getProperty(String.format(&quot;%s.max-lifetime&quot;, MASTER))));\r\n\t\tmaster.setLeakDetectionThreshold(Long.valueOf(env.getProperty(String.format(&quot;%s.leakDetection&quot;, MASTER))));\r\n\t\tmaster.setAutoCommit(Boolean.valueOf(env.getProperty(String.format(&quot;%s.auto-commit&quot;, MASTER))));\r\n\t\tmasterDataSource = new HikariDataSource(master);\r\n\t\treturn masterDataSource;\r\n\t}\r\n    \r\n    private DataSource readDataSource() {\r\n\t\tHikariConfig report = new HikariConfig();\r\n\t\treport.setPoolName(&quot;REPORT_POOL&quot;);\r\n\t\treport.setJdbcUrl(env.getProperty(String.format(&quot;%s.url&quot;, REPORT)));\r\n\t\treport.setUsername((env.getProperty(String.format(&quot;%s.username&quot;, REPORT))));\r\n\t\treport.setPassword((env.getProperty(String.format(&quot;%s.password&quot;, REPORT))));\r\n\t\treport.setMinimumIdle(Integer.valueOf(env.getProperty(String.format(&quot;%s.minimum-idle&quot;, REPORT))));\r\n\t\treport.setMaximumPoolSize(Integer.valueOf(env.getProperty(String.format(&quot;%s.maximum-pool-size&quot;, REPORT))));\r\n\t\treport.setConnectionTimeout(Long.valueOf(env.getProperty(String.format(&quot;%s.connection-timeout&quot;, REPORT))));\r\n\t\treport.setIdleTimeout(Long.valueOf(env.getProperty(String.format(&quot;%s.idle-timeout&quot;, REPORT))));\r\n\t\treport.setMaxLifetime(Long.valueOf(env.getProperty(String.format(&quot;%s.max-lifetime&quot;, REPORT))));\r\n\t\treport.setLeakDetectionThreshold(Long.valueOf(env.getProperty(String.format(&quot;%s.leakDetection&quot;, REPORT))));\r\n\t\treport.setAutoCommit(Boolean.valueOf(env.getProperty(String.format(&quot;%s.auto-commit&quot;, REPORT))));\r\n\t\treport.setReadOnly(Boolean.valueOf(env.getProperty(String.format(&quot;%s.read-only&quot;, REPORT))));\r\n\r\n\t\ttry (HikariDataSource readDataSource = new HikariDataSource(report)) {\r\n\t\t\treadDataSource.getConnection();\r\n\t\t\treturn readDataSource;\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.warn(&quot;\\n\\n******REPORT DB NOT FOUND, CONNECTED TO MASTER DB *******\\n\\n&quot;);\r\n\t\t\treturn masterDataSource;\r\n\t\t}\r\n\t}      \r\n\r\n\r\n```\r\nI have a DataSourceInterceptor for directing request to report db\r\n```\r\n@Slf4j\r\n@Component\r\npublic class DataSourceInterceptor extends HandlerInterceptorAdapter {\r\n\r\n\tprotected static final String[] PREFIX_REPORT_DS = new String[] { &quot;/admin/report/**&quot;, &quot;/report/**&quot; };\r\n\r\n\t@Override\r\n\tpublic boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\r\n\t\t\tthrows Exception {\r\n\r\n\t\tString uri = request.getRequestURI();\r\n\r\n\t\tif (StringUtil.isStartWith(uri, StringUtil.trimStricks(PREFIX_REPORT_DS))) {\r\n\t\t\tlog.info(&quot;Redirect to Report Database for URL: {}&quot;, uri);\r\n\t\t\tDataSourceRouting.setReportRoute();\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n}\r\n\r\n\r\n\r\n```\r\nAnd a DataSourceRouting for setting route to slave db\r\n```\r\n@Slf4j\r\npublic class DataSourceRouting extends AbstractRoutingDataSource {\r\n\r\n\tprivate static final ThreadLocal&lt;Route&gt; routeContext = new ThreadLocal&lt;&gt;();\r\n\r\n\tpublic enum Route {\r\n\t\tMASTER, REPORT\r\n\t}\r\n\r\n\r\n\tpublic static void setReportRoute() {\r\n\t\trouteContext.set(Route.REPORT);\r\n\t}\r\n\r\n\t@Override\r\n\tprotected Object determineCurrentLookupKey() {\r\n\t\treturn routeContext.get();\r\n\t}\r\n\r\n\tpublic void initDatasource(DataSource masterDs, DataSource reportDs) {\r\n\t\tlog.info(&quot;Datasource routing...&quot;);\r\n\t\tMap&lt;Object, Object&gt; dataSourceMap = new HashMap&lt;&gt;();\r\n\t\tdataSourceMap.put(Route.MASTER, masterDs);\r\n\t\tdataSourceMap.put(Route.REPORT, reportDs);\r\n\t\tthis.setTargetDataSources(dataSourceMap);\r\n\t\tthis.setDefaultTargetDataSource(masterDs);\r\n\r\n\t}\r\n}\r\n```\r\nWhen the slave db is down or cannot be connnected during the application start-up, it gets connected to master db, then there is no issue in the application but when the slave db is connected, and the application tries to query from it, the above exception is thrown\r\n","title":"HikariDataSource closes automatically when I query from it","body":"<p>I have configured two database in my spring boot application as master and slave db. Whenever the application queries anything from the slave db, hikari pool is automatically closed and its throws error as</p>\n<pre><code>o.h.engine.jdbc.spi.SqlExceptionHelper  (137)    |&gt; SQL Error: 0, SQLState: null\n[ http-nio-2100-exec-6 ] |ERROR|    o.h.engine.jdbc.spi.SqlExceptionHelper  (142)    |&gt; HikariDataSource HikariDataSource (REPORT_POOL) has been closed.\n [ http-nio-2100-exec-6 ] |ERROR|    c.n.c.exception.GlobalExceptionHandler  (485)   |&gt; Critical Error: \norg.springframework.orm.jpa.JpaSystemException: Unable to acquire JDBC Connection; nested exception is org.hibernate.exception.GenericJDBCException: Unable to acquire JDBC Connection\n</code></pre>\n<p>my configurations for db is as follows:</p>\n<pre><code>#Master Database\nmaster.datasource.hikari.url=jdbc:postgresql://localhost:5432/master_db\nmaster.datasource.hikari.username=*****\nmaster.datasource.hikari.password=*****\nmaster.datasource.hikari.minimum-idle=10\nmaster.datasource.hikari.maximum-pool-size=30\nmaster.datasource.hikari.connection-timeout=30000\nmaster.datasource.hikari.leakDetection=15000\nmaster.datasource.hikari.idle-timeout=25000\nmaster.datasource.hikari.max-lifetime=600000\nmaster.datasource.hikari.auto-commit=true\n\n#Slave Database Read\nreport.datasource.hikari.url=jdbc:postgresql://localhost:5432/slave_db\nreport.datasource.hikari.username=*****\nreport.datasource.hikari.password=*****\nreport.datasource.hikari.minimum-idle=10\nreport.datasource.hikari.maximum-pool-size=30\nreport.datasource.hikari.connection-timeout=30000\nreport.datasource.hikari.leakDetection=15000\nreport.datasource.hikari.idle-timeout=20000\nreport.datasource.hikari.max-lifetime=600000\nreport.datasource.hikari.auto-commit=true\n</code></pre>\n<p>I have configured two data sources as</p>\n<pre><code>@Bean\n@Primary\n@Autowired\npublic DataSource dataSource() {\n    DataSourceRouting routingDataSource = new DataSourceRouting();\n    routingDataSource.initDatasource(masterDataSource(), readDataSource());\n        return routingDataSource;\n    }\n\n    private DataSource masterDataSource() {\n        HikariConfig master = new HikariConfig();\n        master.setPoolName(&quot;MASTER_POOL&quot;);\n        master.setJdbcUrl(env.getProperty(String.format(&quot;%s.url&quot;, MASTER)));\n        master.setUsername((env.getProperty(String.format(&quot;%s.username&quot;, MASTER))));\n        master.setPassword((env.getProperty(String.format(&quot;%s.password&quot;, MASTER))));\n        master.setMinimumIdle(Integer.valueOf(env.getProperty(String.format(&quot;%s.minimum-idle&quot;, MASTER))));\n        master.setMaximumPoolSize(Integer.valueOf(env.getProperty(String.format(&quot;%s.maximum-pool-size&quot;, MASTER))));\n        master.setConnectionTimeout(Long.valueOf(env.getProperty(String.format(&quot;%s.connection-timeout&quot;, MASTER))));\n        master.setIdleTimeout(Long.valueOf(env.getProperty(String.format(&quot;%s.idle-timeout&quot;, MASTER))));\n        master.setMaxLifetime(Long.valueOf(env.getProperty(String.format(&quot;%s.max-lifetime&quot;, MASTER))));\n        master.setLeakDetectionThreshold(Long.valueOf(env.getProperty(String.format(&quot;%s.leakDetection&quot;, MASTER))));\n        master.setAutoCommit(Boolean.valueOf(env.getProperty(String.format(&quot;%s.auto-commit&quot;, MASTER))));\n        masterDataSource = new HikariDataSource(master);\n        return masterDataSource;\n    }\n    \n    private DataSource readDataSource() {\n        HikariConfig report = new HikariConfig();\n        report.setPoolName(&quot;REPORT_POOL&quot;);\n        report.setJdbcUrl(env.getProperty(String.format(&quot;%s.url&quot;, REPORT)));\n        report.setUsername((env.getProperty(String.format(&quot;%s.username&quot;, REPORT))));\n        report.setPassword((env.getProperty(String.format(&quot;%s.password&quot;, REPORT))));\n        report.setMinimumIdle(Integer.valueOf(env.getProperty(String.format(&quot;%s.minimum-idle&quot;, REPORT))));\n        report.setMaximumPoolSize(Integer.valueOf(env.getProperty(String.format(&quot;%s.maximum-pool-size&quot;, REPORT))));\n        report.setConnectionTimeout(Long.valueOf(env.getProperty(String.format(&quot;%s.connection-timeout&quot;, REPORT))));\n        report.setIdleTimeout(Long.valueOf(env.getProperty(String.format(&quot;%s.idle-timeout&quot;, REPORT))));\n        report.setMaxLifetime(Long.valueOf(env.getProperty(String.format(&quot;%s.max-lifetime&quot;, REPORT))));\n        report.setLeakDetectionThreshold(Long.valueOf(env.getProperty(String.format(&quot;%s.leakDetection&quot;, REPORT))));\n        report.setAutoCommit(Boolean.valueOf(env.getProperty(String.format(&quot;%s.auto-commit&quot;, REPORT))));\n        report.setReadOnly(Boolean.valueOf(env.getProperty(String.format(&quot;%s.read-only&quot;, REPORT))));\n\n        try (HikariDataSource readDataSource = new HikariDataSource(report)) {\n            readDataSource.getConnection();\n            return readDataSource;\n        } catch (Exception e) {\n            log.warn(&quot;\\n\\n******REPORT DB NOT FOUND, CONNECTED TO MASTER DB *******\\n\\n&quot;);\n            return masterDataSource;\n        }\n    }      \n\n\n</code></pre>\n<p>I have a DataSourceInterceptor for directing request to report db</p>\n<pre><code>@Slf4j\n@Component\npublic class DataSourceInterceptor extends HandlerInterceptorAdapter {\n\n    protected static final String[] PREFIX_REPORT_DS = new String[] { &quot;/admin/report/**&quot;, &quot;/report/**&quot; };\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\n            throws Exception {\n\n        String uri = request.getRequestURI();\n\n        if (StringUtil.isStartWith(uri, StringUtil.trimStricks(PREFIX_REPORT_DS))) {\n            log.info(&quot;Redirect to Report Database for URL: {}&quot;, uri);\n            DataSourceRouting.setReportRoute();\n        }\n\n        return true;\n\n    }\n}\n\n\n\n</code></pre>\n<p>And a DataSourceRouting for setting route to slave db</p>\n<pre><code>@Slf4j\npublic class DataSourceRouting extends AbstractRoutingDataSource {\n\n    private static final ThreadLocal&lt;Route&gt; routeContext = new ThreadLocal&lt;&gt;();\n\n    public enum Route {\n        MASTER, REPORT\n    }\n\n\n    public static void setReportRoute() {\n        routeContext.set(Route.REPORT);\n    }\n\n    @Override\n    protected Object determineCurrentLookupKey() {\n        return routeContext.get();\n    }\n\n    public void initDatasource(DataSource masterDs, DataSource reportDs) {\n        log.info(&quot;Datasource routing...&quot;);\n        Map&lt;Object, Object&gt; dataSourceMap = new HashMap&lt;&gt;();\n        dataSourceMap.put(Route.MASTER, masterDs);\n        dataSourceMap.put(Route.REPORT, reportDs);\n        this.setTargetDataSources(dataSourceMap);\n        this.setDefaultTargetDataSource(masterDs);\n\n    }\n}\n</code></pre>\n<p>When the slave db is down or cannot be connnected during the application start-up, it gets connected to master db, then there is no issue in the application but when the slave db is connected, and the application tries to query from it, the above exception is thrown</p>\n"},{"tags":["java","maven","selenium-webdriver","azure-devops","automated-tests"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1676653600,"post_id":75486277,"comment_id":133187199,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27812874,"reputation":11,"user_id":21234920,"display_name":"prabhat singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677144157,"creation_date":1676647992,"question_id":75486277,"body_markdown":"Test tab not shown beside the summary tab in Azure devops after completion of agent1 job.\r\nI am executing an automation script written java and testng. Using Maven as project.\r\nAfter running the agent job Test tab is not available beside summary tab.\r\n[![enter image description here][1]][1]\r\n\r\nPlease help me to solve this issue.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ESDbK.png","title":"Test tab not shown beside the summary tab in Azure devops after completion of agent1 job","body":"<p>Test tab not shown beside the summary tab in Azure devops after completion of agent1 job.\nI am executing an automation script written java and testng. Using Maven as project.\nAfter running the agent job Test tab is not available beside summary tab.\n<a href=\"https://i.stack.imgur.com/ESDbK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ESDbK.png\" alt=\"enter image description here\" /></a></p>\n<p>Please help me to solve this issue.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":22356844,"reputation":27,"user_id":16586982,"display_name":"Ilyasse Hanafi"},"score":0,"creation_date":1651053805,"post_id":71205282,"comment_id":127269037,"body_markdown":"Visit this link : &lt;https://stackoverflow.com/questions/53957417/parse-geojson-file-with-java-topology-suite-or-geotools&gt;","body":"Visit this link : &lt;<a href=\"https://stackoverflow.com/questions/53957417/parse-geojson-file-with-java-topology-suite-or-geotools\" title=\"parse geojson file with java topology suite or geotools\">stackoverflow.com/questions/53957417/&hellip;</a>&gt;"}],"answers":[{"tags":[],"owner":{"account_id":22356844,"reputation":27,"user_id":16586982,"display_name":"Ilyasse Hanafi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651055573,"creation_date":1651055573,"answer_id":72027254,"question_id":71205282,"body_markdown":"You can work with the geotools library it handles geometry type you need to add the needed dependencies in your pom.xml\r\nHere are the dependencies : \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-spatial&lt;/artifactId&gt;\r\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.n52.jackson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jts&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.10&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.geotools&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gt-geojsondatastore&lt;/artifactId&gt;\r\n            &lt;version&gt;26.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nand try this piece of code you can get the geometries from your geojson file :\r\n\r\n           File inFile = new File(&quot;yourpath/file.geojson&quot;);\r\n            var geojsonStore = new GeoJSONDataStore(inFile);\r\n            SimpleFeatureSource source = geojsonStore.getFeatureSource();\r\n            SimpleFeatureCollection features = source.getFeatures();\r\n            var iterator = features.features();\r\n            while (iterator.hasNext()) {\r\n                // copy the contents of each feature and transform the geometry\r\n                SimpleFeature feature = iterator.next();\r\n                System.out.println(feature.getAttributes());\r\n\r\n            }  ","title":"How to configure Spring Boot entity for GeoJSON?","body":"<p>You can work with the geotools library it handles geometry type you need to add the needed dependencies in your pom.xml\nHere are the dependencies :</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-spatial&lt;/artifactId&gt;\n        &lt;version&gt;${hibernate.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.n52.jackson&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jts&lt;/artifactId&gt;\n        &lt;version&gt;1.2.10&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.geotools&lt;/groupId&gt;\n        &lt;artifactId&gt;gt-geojsondatastore&lt;/artifactId&gt;\n        &lt;version&gt;26.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and try this piece of code you can get the geometries from your geojson file :</p>\n<pre><code>       File inFile = new File(&quot;yourpath/file.geojson&quot;);\n        var geojsonStore = new GeoJSONDataStore(inFile);\n        SimpleFeatureSource source = geojsonStore.getFeatureSource();\n        SimpleFeatureCollection features = source.getFeatures();\n        var iterator = features.features();\n        while (iterator.hasNext()) {\n            // copy the contents of each feature and transform the geometry\n            SimpleFeature feature = iterator.next();\n            System.out.println(feature.getAttributes());\n\n        }  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5870080,"reputation":425,"user_id":4622647,"accept_rate":75,"display_name":"AmitB10"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677143824,"creation_date":1677143824,"answer_id":75542741,"question_id":71205282,"body_markdown":"Actually spring data mongodb provides this representation in class: GeoJsonPolygon.\r\nReference: https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/geo/GeoJsonPolygon.html\r\n\r\nOther classes are also available.","title":"How to configure Spring Boot entity for GeoJSON?","body":"<p>Actually spring data mongodb provides this representation in class: GeoJsonPolygon.\nReference: <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/geo/GeoJsonPolygon.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/geo/GeoJsonPolygon.html</a></p>\n<p>Other classes are also available.</p>\n"}],"owner":{"account_id":8455866,"reputation":197,"user_id":6343186,"display_name":"TranceAddict"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2102,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1677143824,"creation_date":1645441786,"question_id":71205282,"body_markdown":"I want to save a GeoJSON to database by using Spring Boot and JPA\r\n\r\nExample JSON object:\r\n\r\n        {\r\n      &quot;type&quot;: &quot;FeatureCollection&quot;,\r\n      &quot;features&quot;: [\r\n        {\r\n          &quot;type&quot;: &quot;Feature&quot;,\r\n          &quot;properties&quot;: {\r\n            &quot;type&quot;: &quot;polyline&quot;\r\n          },\r\n          &quot;geometry&quot;: {\r\n            &quot;type&quot;: &quot;LineString&quot;,\r\n            &quot;coordinates&quot;: [\r\n              [\r\n                21.011127,\r\n                52.230914\r\n              ],\r\n              [\r\n                21.013166,\r\n                52.229978\r\n              ],\r\n              [\r\n                21.011331,\r\n                52.22911\r\n              ],\r\n              [\r\n                21.00845,\r\n                52.228953\r\n              ],\r\n              [\r\n                21.009062,\r\n                52.230011\r\n              ],\r\n              [\r\n                21.009513,\r\n                52.230287\r\n              ]\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          &quot;type&quot;: &quot;Feature&quot;,\r\n          &quot;properties&quot;: {\r\n            &quot;type&quot;: &quot;polyline&quot;\r\n          },\r\n          &quot;geometry&quot;: {\r\n            &quot;type&quot;: &quot;LineString&quot;,\r\n            &quot;coordinates&quot;: [\r\n              [\r\n                21.022489,\r\n                52.226406\r\n              ],\r\n              [\r\n                21.023004,\r\n                52.228995\r\n              ],\r\n              [\r\n                21.018069,\r\n                52.230007\r\n              ],\r\n              [\r\n                21.018755,\r\n                52.225618\r\n              ],\r\n              [\r\n                21.016202,\r\n                52.22454\r\n              ],\r\n              [\r\n                21.013906,\r\n                52.226735\r\n              ]\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          &quot;type&quot;: &quot;Feature&quot;,\r\n          &quot;properties&quot;: {\r\n            &quot;type&quot;: &quot;polyline&quot;\r\n          },\r\n          &quot;geometry&quot;: {\r\n            &quot;type&quot;: &quot;LineString&quot;,\r\n            &quot;coordinates&quot;: [\r\n              [\r\n                21.013627,\r\n                52.232005\r\n              ],\r\n              [\r\n                21.018165,\r\n                52.231933\r\n              ],\r\n              [\r\n                21.019228,\r\n                52.232537\r\n              ],\r\n              [\r\n                21.019989,\r\n                52.232925\r\n              ],\r\n              [\r\n                21.019109,\r\n                52.233201\r\n              ]\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    }\r\n\r\nI tried to configure the entity by using @ElementCollection and @Embedded.\r\n \r\nGeoJson entity:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    @Entity\r\n    public class GeoJson {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Long id;\r\n        private String type;\r\n        @ElementCollection(targetClass = Feature.class)\r\n        private List&lt;Feature&gt; features;\r\n    }\r\n\r\nFeature:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    @Embeddable\r\n    public class Feature {\r\n        private String type;\r\n        @Embedded\r\n        private Properties properties;\r\n        @Embedded\r\n        private Geometry geometry;\r\n    }\r\n\r\nProperties:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    @Embeddable\r\n    public class Properties {\r\n        private String type;\r\n    }\r\n\r\nGeometry:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    @Embeddable\r\n    public class Geometry {\r\n        private String type;\r\n        @ElementCollection(targetClass = Coordinate.class)\r\n        private List&lt;Coordinate&gt; coordinates;\r\n    }\r\n\r\nCoordinate:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    @Embeddable\r\n    public class Coordinate {\r\n        private BigDecimal lat;\r\n        private BigDecimal lng;\r\n    }\r\n\r\nThis configuration gives error: \r\n\r\n&gt; Invocation of init method failed; nested exception is\r\n&gt; javax.persistence.PersistenceException: [PersistenceUnit: default]\r\n&gt; Unable to build Hibernate SessionFactory; nested exception is\r\n&gt; org.hibernate.MappingException: Could not determine type for:\r\n&gt; java.util.List, at table: geo_json_features, for columns:\r\n&gt; [org.hibernate.mapping.Column(coordinates)] \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\r\n&gt; ~[spring-beans-5.3.15.jar:5.3.15]\r\n\r\nI tried other mapping methods like @ManytoOne or @ManytoMany, but none of them works. How can I configure GeoJson entity to persist? Maybe i should add @CollectionTable annotation in both ElementCollection but i don&#39;t know how to do it correctly \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to configure Spring Boot entity for GeoJSON?","body":"<p>I want to save a GeoJSON to database by using Spring Boot and JPA</p>\n<p>Example JSON object:</p>\n<pre><code>    {\n  &quot;type&quot;: &quot;FeatureCollection&quot;,\n  &quot;features&quot;: [\n    {\n      &quot;type&quot;: &quot;Feature&quot;,\n      &quot;properties&quot;: {\n        &quot;type&quot;: &quot;polyline&quot;\n      },\n      &quot;geometry&quot;: {\n        &quot;type&quot;: &quot;LineString&quot;,\n        &quot;coordinates&quot;: [\n          [\n            21.011127,\n            52.230914\n          ],\n          [\n            21.013166,\n            52.229978\n          ],\n          [\n            21.011331,\n            52.22911\n          ],\n          [\n            21.00845,\n            52.228953\n          ],\n          [\n            21.009062,\n            52.230011\n          ],\n          [\n            21.009513,\n            52.230287\n          ]\n        ]\n      }\n    },\n    {\n      &quot;type&quot;: &quot;Feature&quot;,\n      &quot;properties&quot;: {\n        &quot;type&quot;: &quot;polyline&quot;\n      },\n      &quot;geometry&quot;: {\n        &quot;type&quot;: &quot;LineString&quot;,\n        &quot;coordinates&quot;: [\n          [\n            21.022489,\n            52.226406\n          ],\n          [\n            21.023004,\n            52.228995\n          ],\n          [\n            21.018069,\n            52.230007\n          ],\n          [\n            21.018755,\n            52.225618\n          ],\n          [\n            21.016202,\n            52.22454\n          ],\n          [\n            21.013906,\n            52.226735\n          ]\n        ]\n      }\n    },\n    {\n      &quot;type&quot;: &quot;Feature&quot;,\n      &quot;properties&quot;: {\n        &quot;type&quot;: &quot;polyline&quot;\n      },\n      &quot;geometry&quot;: {\n        &quot;type&quot;: &quot;LineString&quot;,\n        &quot;coordinates&quot;: [\n          [\n            21.013627,\n            52.232005\n          ],\n          [\n            21.018165,\n            52.231933\n          ],\n          [\n            21.019228,\n            52.232537\n          ],\n          [\n            21.019989,\n            52.232925\n          ],\n          [\n            21.019109,\n            52.233201\n          ]\n        ]\n      }\n    }\n  ]\n}\n</code></pre>\n<p>I tried to configure the entity by using @ElementCollection and @Embedded.</p>\n<p>GeoJson entity:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\n@Entity\npublic class GeoJson {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String type;\n    @ElementCollection(targetClass = Feature.class)\n    private List&lt;Feature&gt; features;\n}\n</code></pre>\n<p>Feature:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\n@Embeddable\npublic class Feature {\n    private String type;\n    @Embedded\n    private Properties properties;\n    @Embedded\n    private Geometry geometry;\n}\n</code></pre>\n<p>Properties:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\n@Embeddable\npublic class Properties {\n    private String type;\n}\n</code></pre>\n<p>Geometry:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\n@Embeddable\npublic class Geometry {\n    private String type;\n    @ElementCollection(targetClass = Coordinate.class)\n    private List&lt;Coordinate&gt; coordinates;\n}\n</code></pre>\n<p>Coordinate:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\n@Embeddable\npublic class Coordinate {\n    private BigDecimal lat;\n    private BigDecimal lng;\n}\n</code></pre>\n<p>This configuration gives error:</p>\n<blockquote>\n<p>Invocation of init method failed; nested exception is\njavax.persistence.PersistenceException: [PersistenceUnit: default]\nUnable to build Hibernate SessionFactory; nested exception is\norg.hibernate.MappingException: Could not determine type for:\njava.util.List, at table: geo_json_features, for columns:\n[org.hibernate.mapping.Column(coordinates)]   at\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\n~[spring-beans-5.3.15.jar:5.3.15]</p>\n</blockquote>\n<p>I tried other mapping methods like @ManytoOne or @ManytoMany, but none of them works. How can I configure GeoJson entity to persist? Maybe i should add @CollectionTable annotation in both ElementCollection but i don't know how to do it correctly</p>\n"},{"tags":["java","maven","azure-devops","maven-wrapper"],"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677143675,"creation_date":1677143675,"question_id":75542715,"body_markdown":"I&#39;m configuring a pipeline on Microsoft DevOps platform to build Maven project.\r\n\r\nMy project includes Maven Wrapper, since I&#39;m using this to define a project-specific `settings.xml`, that&#39;s useful for local development.\r\n\r\nWhen the build is executed by the pipeline, instead, I&#39;d like this &quot;local&quot; configuration to be ignored.\r\n\r\nIs there a way to achieve this?\r\n\r\nI&#39;d like to commit the wrapper with the local configuration into the project, so that can be used by all the team.\r\n\r\n","title":"Ignoring Maven Wrapper on Azure DevOps pipeline build","body":"<p>I'm configuring a pipeline on Microsoft DevOps platform to build Maven project.</p>\n<p>My project includes Maven Wrapper, since I'm using this to define a project-specific <code>settings.xml</code>, that's useful for local development.</p>\n<p>When the build is executed by the pipeline, instead, I'd like this &quot;local&quot; configuration to be ignored.</p>\n<p>Is there a way to achieve this?</p>\n<p>I'd like to commit the wrapper with the local configuration into the project, so that can be used by all the team.</p>\n"},{"tags":["java","spring-boot","jpa","quartz-scheduler","sybase"],"answers":[{"tags":[],"owner":{"account_id":3527102,"reputation":325,"user_id":2947880,"accept_rate":64,"display_name":"D.Razvan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677143593,"creation_date":1677143593,"answer_id":75542699,"question_id":75458895,"body_markdown":"Posting here for anyone facing similar issues to no avail. It seems that the hibernate dialect defaults to an unquoted strategy in this case which for jconnect this renders the database name to use an uppercase strategy.\r\n\r\nYou have two options, either provide your own dialect which extends the base one, and handle the quoted/unquoted strategy yourself(you simply have to override the buildIdentifierHelper method and use the included builder to set desired strategy) or enable a quoted strategy using:\r\n\r\n```spring.jpa.properties.hibernate.globally_quoted_identifiers= true```\r\n\r\nI also added: \r\n\r\n```spring.jpa.properties.hibernate.globally_quoted_identifiers_skip_column_definitions = true```\r\n\r\nto avoid some problems with other dialects (from other sources on stackoverflow).\r\n","title":"Spring quartz com.sybase.jdbc4.jdbc.SybDriver initialization script fail","body":"<p>Posting here for anyone facing similar issues to no avail. It seems that the hibernate dialect defaults to an unquoted strategy in this case which for jconnect this renders the database name to use an uppercase strategy.</p>\n<p>You have two options, either provide your own dialect which extends the base one, and handle the quoted/unquoted strategy yourself(you simply have to override the buildIdentifierHelper method and use the included builder to set desired strategy) or enable a quoted strategy using:</p>\n<p><code>spring.jpa.properties.hibernate.globally_quoted_identifiers= true</code></p>\n<p>I also added:</p>\n<p><code>spring.jpa.properties.hibernate.globally_quoted_identifiers_skip_column_definitions = true</code></p>\n<p>to avoid some problems with other dialects (from other sources on stackoverflow).</p>\n"}],"owner":{"account_id":3527102,"reputation":325,"user_id":2947880,"accept_rate":64,"display_name":"D.Razvan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75542699,"answer_count":1,"score":0,"last_activity_date":1677143593,"creation_date":1676459359,"question_id":75458895,"body_markdown":"I have a spring boot (vers 2.6.12) project with quartz and sybase jconnect driver dependencies(excluding all other deps):\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;sybase&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jconnect&lt;/artifactId&gt;\r\n    &lt;version&gt;16.04.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI have my scheduler config:\r\n\r\n```\r\n@Configuration\r\n@AllArgsConstructor\r\npublic class SchedulerConfig {\r\n\r\n    private final AutowireCapableBeanFactory beanFactory;\r\n    private final DataSource dataSource;\r\n    private final ApplicationContext context;\r\n    private final QuartzProperties quartzProperties;\r\n\r\n    @Bean\r\n    public SchedulerFactoryBean schedulerFactoryBean() {\r\n\r\n        var jobs = new SchedulerJobFactory(beanFactory);\r\n        jobs.setApplicationContext(context);\r\n\r\n        var properties = new Properties();\r\n        properties.putAll(quartzProperties.getProperties());\r\n\r\n        var factory = new SchedulerFactoryBean();\r\n        factory.setOverwriteExistingJobs(true);\r\n        factory.setDataSource(dataSource);\r\n        factory.setQuartzProperties(properties);\r\n        factory.setJobFactory(jobs);\r\n\r\n        return factory;\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nand my quartz initialization script (which is a modified version of the included sybase [script](https://github.com/elventear/quartz-scheduler/blob/master/distribution/src/main/assembly/root/docs/dbTables/tables_sybase.sql):\r\n\r\n```\r\n/*==============================================================================*/\r\n/* Clear all tables: */\r\n/*==============================================================================*/\r\n\r\nIF (OBJECT_ID(&#39;QRTZ_FIRED_TRIGGERS&#39;)) IS NOT NULL\r\nbegin\r\n\texecute\t(&#39;delete from QRTZ_FIRED_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_PAUSED_TRIGGER_GRPS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_PAUSED_TRIGGER_GRPS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SCHEDULER_STATE&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_SCHEDULER_STATE&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_LOCKS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_LOCKS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPLE_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_SIMPLE_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPROP_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_SIMPROP_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CRON_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_CRON_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_BLOB_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_BLOB_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_JOB_DETAILS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_JOB_DETAILS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CALENDARS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;delete from QRTZ_CALENDARS&#39;)\r\nend\r\n\r\n/*==============================================================================*/\r\n/* Drop constraints: */\r\n/*==============================================================================*/\r\n\r\nIF OBJECT_ID(&#39;QRTZ_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_TRIGGERS drop\r\n\tconstraint FK_triggers_job_details&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CRON_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_CRON_TRIGGERS drop\r\n\tconstraint FK_cron_triggers_triggers&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPLE_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_SIMPLE_TRIGGERS\r\n\tdrop constraint FK_simple_triggers_triggers&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPROP_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_SIMPROP_TRIGGERS\r\n\tdrop constraint FK_simprop_triggers_triggers&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_BLOB_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_BLOB_TRIGGERS\r\n\tdrop constraint FK_blob_triggers_triggers&#39;)\r\nend\r\n\r\n/*==============================================================================*/\r\n/* Drop tables: */\r\n/*==============================================================================*/\r\n\r\nIF OBJECT_ID(&#39;QRTZ_FIRED_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_FIRED_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_PAUSED_TRIGGER_GRPS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_PAUSED_TRIGGER_GRPS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SCHEDULER_STATE&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_SCHEDULER_STATE&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_LOCKS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_LOCKS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPLE_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_SIMPLE_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPROP_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_SIMPROP_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CRON_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_CRON_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_BLOB_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_BLOB_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_TRIGGERS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_JOB_DETAILS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_JOB_DETAILS&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CALENDARS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;drop table QRTZ_CALENDARS&#39;)\r\nend\r\n\r\n/*==============================================================================*/\r\n/* Create tables: */\r\n/*==============================================================================*/\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CALENDARS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_CALENDARS (\r\n\tSCHED_NAME varchar(120) not null,\r\n\tCALENDAR_NAME varchar(200) not null,\r\n\tCALENDAR image not null\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CRON_TRIGGERS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_CRON_TRIGGERS (\r\n\tSCHED_NAME varchar(120) not null,\r\n\tTRIGGER_NAME varchar(200) not null,\r\n\tTRIGGER_GROUP varchar(200) not null,\r\n\tCRON_EXPRESSION varchar(120) not null,\r\n\tTIME_ZONE_ID varchar(80) null,\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_PAUSED_TRIGGER_GRPS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_PAUSED_TRIGGER_GRPS (\r\n\tSCHED_NAME varchar(120) not null,\r\n\tTRIGGER_GROUP  varchar(200) not null,\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_FIRED_TRIGGERS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_FIRED_TRIGGERS(\r\n\tSCHED_NAME varchar(120) not null,\r\n\tENTRY_ID varchar(95) not null,\r\n\tTRIGGER_NAME varchar(200) not null,\r\n\tTRIGGER_GROUP varchar(200) not null,\r\n\tINSTANCE_NAME varchar(200) not null,\r\n\tFIRED_TIME numeric(13,0) not null,\r\n\tSCHED_TIME numeric(13,0) not null,\r\n\tPRIORITY int not null,\r\n\tSTATE varchar(16) not null,\r\n\tJOB_NAME varchar(200) null,\r\n\tJOB_GROUP varchar(200) null,\r\n\tIS_NONCONCURRENT bit not null,\r\n\tREQUESTS_RECOVERY bit not null,\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SCHEDULER_STATE&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_SCHEDULER_STATE (\r\n\tSCHED_NAME varchar(120) not null,\r\n\tINSTANCE_NAME varchar(200) not null,\r\n\tLAST_CHECKIN_TIME numeric(13,0) not null,\r\n\tCHECKIN_INTERVAL numeric(13,0) not null,\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_LOCKS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_LOCKS (\r\n\tSCHED_NAME varchar(120) not null,\r\n\tLOCK_NAME  varchar(40) not null,\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_JOB_DETAILS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_JOB_DETAILS (\r\n\tSCHED_NAME varchar(120) not null,\r\n\tJOB_NAME varchar(200) not null,\r\n\tJOB_GROUP varchar(200) not null,\r\n\tDESCRIPTION varchar(250) null,\r\n\tJOB_CLASS_NAME varchar(250) not null,\r\n\tIS_DURABLE bit not null,\r\n\tIS_NONCONCURRENT bit not null,\r\n\tIS_UPDATE_DATA bit not null,\r\n\tREQUESTS_RECOVERY bit not null,\r\n\tJOB_DATA image null\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPLE_TRIGGERS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_SIMPLE_TRIGGERS (\r\n\tSCHED_NAME varchar(120) not null,\r\n\tTRIGGER_NAME varchar(200) not null,\r\n\tTRIGGER_GROUP varchar(200) not null,\r\n\tREPEAT_COUNT numeric(13,0) not null,\r\n\tREPEAT_INTERVAL numeric(13,0) not null,\r\n\tTIMES_TRIGGERED numeric(13,0) not null\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPROP_TRIGGERS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;CREATE TABLE QRTZ_SIMPROP_TRIGGERS (\r\n    SCHED_NAME VARCHAR(120) NOT NULL,\r\n    TRIGGER_NAME VARCHAR(200) NOT NULL,\r\n    TRIGGER_GROUP VARCHAR(200) NOT NULL,\r\n    STR_PROP_1 VARCHAR(512) NULL,\r\n    STR_PROP_2 VARCHAR(512) NULL,\r\n    STR_PROP_3 VARCHAR(512) NULL,\r\n    INT_PROP_1 INT NULL,\r\n    INT_PROP_2 INT NULL,\r\n    LONG_PROP_1 NUMERIC(13,0) NULL,\r\n    LONG_PROP_2 NUMERIC(13,0) NULL,\r\n    DEC_PROP_1 NUMERIC(13,4) NULL,\r\n    DEC_PROP_2 NUMERIC(13,4) NULL,\r\n    BOOL_PROP_1 bit NOT NULL,\r\n    BOOL_PROP_2 bit NOT NULL\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_BLOB_TRIGGERS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_BLOB_TRIGGERS (\r\n\tSCHED_NAME varchar(120) not null,\r\n\tTRIGGER_NAME varchar(200) not null,\r\n\tTRIGGER_GROUP varchar(200) not null,\r\n\tBLOB_DATA image null\r\n\t)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_TRIGGERS&#39;) IS NULL\r\nbegin\r\n\texecute(&#39;create table QRTZ_TRIGGERS (\r\n\tSCHED_NAME varchar(120) not null,\r\n\tTRIGGER_NAME varchar(200) not null,\r\n\tTRIGGER_GROUP varchar(200) not null,\r\n\tJOB_NAME varchar(200) not null,\r\n\tJOB_GROUP varchar(200) not null,\r\n\tDESCRIPTION varchar(250) null,\r\n\tNEXT_FIRE_TIME numeric(13,0) null,\r\n\tPREV_FIRE_TIME numeric(13,0) null,\r\n\tPRIORITY int null,\r\n\tTRIGGER_STATE varchar(16) not null,\r\n\tTRIGGER_TYPE varchar(8) not null,\r\n\tSTART_TIME numeric(13,0) not null,\r\n\tEND_TIME numeric(13,0) null,\r\n\tCALENDAR_NAME varchar(200) null,\r\n\tMISFIRE_INSTR smallint null,\r\n\tJOB_DATA image null\r\n\t)&#39;)\r\nend\r\n\r\n/*==============================================================================*/\r\n/* Create primary key constraints: */\r\n/*==============================================================================*/\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CALENDARS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_CALENDARS\r\n\tadd constraint PK_qrtz_calendars primary key clustered (SCHED_NAME,CALENDAR_NAME)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CRON_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_CRON_TRIGGERS\r\n\tadd constraint PK_qrtz_cron_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_FIRED_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_FIRED_TRIGGERS\r\n\tadd constraint PK_qrtz_fired_triggers primary key clustered (SCHED_NAME,ENTRY_ID)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_PAUSED_TRIGGER_GRPS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_PAUSED_TRIGGER_GRPS\r\n\tadd constraint PK_qrtz_paused_trigger_grps primary key clustered (SCHED_NAME,TRIGGER_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SCHEDULER_STATE&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_SCHEDULER_STATE\r\n\tadd constraint PK_qrtz_scheduler_state primary key clustered (SCHED_NAME,INSTANCE_NAME)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_LOCKS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_LOCKS\r\n\tadd constraint PK_qrtz_locks primary key clustered (SCHED_NAME,LOCK_NAME)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_JOB_DETAILS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_JOB_DETAILS\r\n\tadd constraint PK_qrtz_job_details primary key clustered (SCHED_NAME,JOB_NAME, JOB_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPLE_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_SIMPLE_TRIGGERS\r\n\tadd constraint PK_qrtz_simple_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPROP_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_SIMPROP_TRIGGERS\r\n\tadd constraint PK_qrtz_simprop_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_TRIGGERS\r\n\tadd constraint PK_qrtz_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_BLOB_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_BLOB_TRIGGERS\r\n\tadd constraint PK_qrtz_blob_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)&#39;)\r\nend\r\n\r\n/*==============================================================================*/\r\n/* Create foreign key constraints: */\r\n/*==============================================================================*/\r\n\r\nIF OBJECT_ID(&#39;QRTZ_CRON_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_CRON_TRIGGERS\r\n\tadd constraint FK_cron_triggers_triggers foreign key (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\r\n\treferences QRTZ_TRIGGERS (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPLE_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_SIMPLE_TRIGGERS\r\n\tadd constraint FK_simple_triggers_triggers foreign key (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\r\n\treferences QRTZ_TRIGGERS (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_SIMPROP_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_SIMPROP_TRIGGERS\r\n\tadd constraint FK_simprop_triggers_triggers foreign key (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\r\n\treferences QRTZ_TRIGGERS (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_TRIGGERS\r\n\tadd constraint FK_triggers_job_details foreign key (SCHED_NAME,JOB_NAME,JOB_GROUP)\r\n\treferences QRTZ_JOB_DETAILS (SCHED_NAME,JOB_NAME,JOB_GROUP)&#39;)\r\nend\r\n\r\nIF OBJECT_ID(&#39;QRTZ_BLOB_TRIGGERS&#39;) IS NOT NULL\r\nbegin\r\n\texecute (&#39;alter table QRTZ_BLOB_TRIGGERS\r\n\tadd constraint FK_blob_triggers_triggers foreign key (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\r\n\treferences QRTZ_TRIGGERS (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)&#39;)\r\nend\r\n/*==============================================================================*/\r\n/* End of script. */\r\n/*==============================================================================*/\r\n```\r\n\r\nI am running this script through DBeaver without issues against a sybase instance with details:\r\n\r\n```\r\nServer: Adaptive Server Enterprise 16.0.04.02\r\nDriver: jConnect (TM) for JDBC (TM) jConnect (TM) for JDBC(TM)/16.0 SP03 PL02 (Build 27403)/P/EBF27518/JDK 1.6.0/jdbcmain/OPT/Mon Aug 28 18:41:14 PDT 2017\r\n```\r\n\r\nMy (relevant) spring application settings:\r\n\r\n```\r\nspring.datasource.url=jdbc:sybase:Tds:localhost:6000/Kustom\r\nspring.datasource.driverClassName=com.sybase.jdbc4.jdbc.SybDriver\r\nspring.datasource.username=user\r\nspring.datasource.password=pass\r\n\r\nspring.jpa.database-platform=org.hibernate.dialect.SybaseASE15Dialect\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SybaseASE15Dialect\r\nspring.jpa.properties.hibernate.use_sql_comments=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\nspring.quartz.job-store-type=jdbc\r\nspring.quartz.jdbc.initialize-schema=always\r\nspring.quartz.jdbc.schema=classpath:jdbc/my_script.sql\r\n\r\nspring.quartz.properties.org.quartz.jobStore.tablePrefix=QRTZ_\r\nspring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.SybaseDelegate\r\n\r\n\r\nspring.jpa.show-sql=true\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\nspring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\r\n\r\nlogging.level.org.hibernate.type=TRACE\r\n```\r\nMy application keeps failing with the following stack trace:\r\n\r\n```\r\n2023-02-15 10:48:53.630  INFO 1 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.SybaseASE15Dialect\r\n2023-02-15 10:48:53.766 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration@385ef531] to MetadataBuildingContext [org.hibernate.boot.internal.MetadataBuildingContextRootImpl@7fc645e4]\r\n2023-02-15 10:48:54.136 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration@385ef531] to SessionFactoryImpl [org.hibernate.internal.SessionFactoryImpl@48284d0e]\r\n2023-02-15 10:48:54.303  WARN 1 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 911, SQLState: ZZZZZ\r\n2023-02-15 10:48:54.303 ERROR 1 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Attempt to locate entry in sysdatabases for database &#39;KUSTOM&#39; by name failed - no entry found under that name. Make sure that name is entered properly.\r\n\r\n2023-02-15 10:48:54.307 TRACE 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Handling #sessionFactoryClosed from [org.hibernate.internal.SessionFactoryImpl@48284d0e] for TypeConfiguration\r\n2023-02-15 10:48:54.308 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Un-scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration$Scope@11e33bac] from SessionFactory [org.hibernate.internal.SessionFactoryImpl@48284d0e]\r\n2023-02-15 10:48:54.313 ERROR 1 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Error accessing table metadata\r\n2023-02-15 10:48:54.314  WARN 1 --- [           main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Error accessing table metadata\r\n2023-02-15 10:48:54.315  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-02-15 10:48:54.946  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n2023-02-15 10:48:54.958  INFO 1 --- [           main] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@3dd69f5a{/,null,STOPPED}\r\n2023-02-15 10:48:54.999  INFO 1 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2023-02-15 10:48:55.098 ERROR 1 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Error accessing table metadata\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:64) ~[spring-boot-2.6.12.jar!/:2.6.12]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:745) ~[spring-boot-2.6.12.jar!/:2.6.12]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:420) ~[spring-boot-2.6.12.jar!/:2.6.12]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.6.12.jar!/:2.6.12]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1317) ~[spring-boot-2.6.12.jar!/:2.6.12]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.6.12.jar!/:2.6.12]\r\n\tat com.finastra.fusionlimits.enquiries.scheduler.app.Application.main(Application.java:14) ~[classes!/:1.0.0-SNAPSHOT]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[app.jar:1.0.0-SNAPSHOT]\r\n\tat org.springframework.boot.loader.Launcher.launch(Launcher.java:108) ~[app.jar:1.0.0-SNAPSHOT]\r\n\tat org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[app.jar:1.0.0-SNAPSHOT]\r\n\tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[app.jar:1.0.0-SNAPSHOT]\r\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Error accessing table metadata\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.23.jar!/:5.3.23]\r\n\t... 24 common frames omitted\r\nCaused by: org.hibernate.exception.GenericJDBCException: Error accessing table metadata\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.convertSQLException(AbstractInformationExtractorImpl.java:118) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.getTables(AbstractInformationExtractorImpl.java:571) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:122) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:68) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:220) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:123) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:196) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.23.jar!/:5.3.23]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.23.jar!/:5.3.23]\r\n\t... 28 common frames omitted\r\nCaused by: com.sybase.jdbc4.jdbc.SybSQLException: Attempt to locate entry in sysdatabases for database &#39;KUSTOM&#39; by name failed - no entry found under that name. Make sure that name is entered properly.\r\n\r\n\tat com.sybase.jdbc4.tds.Tds.processEed(Tds.java:4237) ~[jconnect-16.04.1.jar!/:na]\r\n\tat com.sybase.jdbc4.tds.Tds.nextResult(Tds.java:3346) ~[jconnect-16.04.1.jar!/:na]\r\n\tat com.sybase.jdbc4.jdbc.ResultGetter.nextResult(ResultGetter.java:78) ~[jconnect-16.04.1.jar!/:na]\r\n\tat com.sybase.jdbc4.jdbc.SybStatement.nextResult(SybStatement.java:303) ~[jconnect-16.04.1.jar!/:na]\r\n\tat com.sybase.jdbc4.jdbc.SybStatement.nextResult(SybStatement.java:285) ~[jconnect-16.04.1.jar!/:na]\r\n\tat com.sybase.jdbc4.jdbc.SybStatement.queryLoop(SybStatement.java:2681) ~[jconnect-16.04.1.jar!/:na]\r\n\tat com.sybase.jdbc4.jdbc.SybCallableStatement.executeQuery(SybCallableStatement.java:150) ~[jconnect-16.04.1.jar!/:na]\r\n\tat com.sybase.jdbc4.jdbc.SybDatabaseMetaData.returnResults(SybDatabaseMetaData.java:5552) ~[jconnect-16.04.1.jar!/:na]\r\n\tat com.sybase.jdbc4.jdbc.SybDatabaseMetaData.getTables(SybDatabaseMetaData.java:4022) ~[jconnect-16.04.1.jar!/:na]\r\n\tat com.zaxxer.hikari.pool.ProxyDatabaseMetaData.getTables(ProxyDatabaseMetaData.java:68) ~[HikariCP-4.0.3.jar!/:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyDatabaseMetaData.getTables(HikariProxyDatabaseMetaData.java) ~[HikariCP-4.0.3.jar!/:na]\r\n\tat org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.processTableResultSet(InformationExtractorJdbcDatabaseMetaDataImpl.java:64) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\tat org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.getTables(AbstractInformationExtractorImpl.java:559) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\r\n\t... 40 common frames omitted\r\n```\r\n\r\nPS: Same issue using the included script with quartz (linked earlier).\r\n\r\nHowever if I am using the sourceforge driver with :\r\n\r\n```\r\nspring.datasource.url=jdbc:jtds:sybase://localhost:6000/Kustom\r\nspring.datasource.driverClassName=net.sourceforge.jtds.jdbc.Driver\r\n\r\n# Also need these just for the test connection which sourceforge driver is lacking\r\nspring.datasource.validationQuery=select 1\r\nspring.datasource.hikari.connectionTestQuery=select 1\r\n```\r\nthen all seems to work as expected.\r\n\r\nHow can I make it work using the more modern jconnect driver ?\r\n\r\nThanks","title":"Spring quartz com.sybase.jdbc4.jdbc.SybDriver initialization script fail","body":"<p>I have a spring boot (vers 2.6.12) project with quartz and sybase jconnect driver dependencies(excluding all other deps):</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;sybase&lt;/groupId&gt;\n    &lt;artifactId&gt;jconnect&lt;/artifactId&gt;\n    &lt;version&gt;16.04.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I have my scheduler config:</p>\n<pre><code>@Configuration\n@AllArgsConstructor\npublic class SchedulerConfig {\n\n    private final AutowireCapableBeanFactory beanFactory;\n    private final DataSource dataSource;\n    private final ApplicationContext context;\n    private final QuartzProperties quartzProperties;\n\n    @Bean\n    public SchedulerFactoryBean schedulerFactoryBean() {\n\n        var jobs = new SchedulerJobFactory(beanFactory);\n        jobs.setApplicationContext(context);\n\n        var properties = new Properties();\n        properties.putAll(quartzProperties.getProperties());\n\n        var factory = new SchedulerFactoryBean();\n        factory.setOverwriteExistingJobs(true);\n        factory.setDataSource(dataSource);\n        factory.setQuartzProperties(properties);\n        factory.setJobFactory(jobs);\n\n        return factory;\n\n    }\n\n}\n</code></pre>\n<p>and my quartz initialization script (which is a modified version of the included sybase <a href=\"https://github.com/elventear/quartz-scheduler/blob/master/distribution/src/main/assembly/root/docs/dbTables/tables_sybase.sql\" rel=\"nofollow noreferrer\">script</a>:</p>\n<pre><code>/*==============================================================================*/\n/* Clear all tables: */\n/*==============================================================================*/\n\nIF (OBJECT_ID('QRTZ_FIRED_TRIGGERS')) IS NOT NULL\nbegin\n    execute ('delete from QRTZ_FIRED_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_PAUSED_TRIGGER_GRPS') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_PAUSED_TRIGGER_GRPS')\nend\n\nIF OBJECT_ID('QRTZ_SCHEDULER_STATE') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_SCHEDULER_STATE')\nend\n\nIF OBJECT_ID('QRTZ_LOCKS') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_LOCKS')\nend\n\nIF OBJECT_ID('QRTZ_SIMPLE_TRIGGERS') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_SIMPLE_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_SIMPROP_TRIGGERS') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_SIMPROP_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_CRON_TRIGGERS') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_CRON_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_BLOB_TRIGGERS') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_BLOB_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_TRIGGERS') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_JOB_DETAILS') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_JOB_DETAILS')\nend\n\nIF OBJECT_ID('QRTZ_CALENDARS') IS NOT NULL\nbegin\n    execute ('delete from QRTZ_CALENDARS')\nend\n\n/*==============================================================================*/\n/* Drop constraints: */\n/*==============================================================================*/\n\nIF OBJECT_ID('QRTZ_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_TRIGGERS drop\n    constraint FK_triggers_job_details')\nend\n\nIF OBJECT_ID('QRTZ_CRON_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_CRON_TRIGGERS drop\n    constraint FK_cron_triggers_triggers')\nend\n\nIF OBJECT_ID('QRTZ_SIMPLE_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_SIMPLE_TRIGGERS\n    drop constraint FK_simple_triggers_triggers')\nend\n\nIF OBJECT_ID('QRTZ_SIMPROP_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_SIMPROP_TRIGGERS\n    drop constraint FK_simprop_triggers_triggers')\nend\n\nIF OBJECT_ID('QRTZ_BLOB_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_BLOB_TRIGGERS\n    drop constraint FK_blob_triggers_triggers')\nend\n\n/*==============================================================================*/\n/* Drop tables: */\n/*==============================================================================*/\n\nIF OBJECT_ID('QRTZ_FIRED_TRIGGERS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_FIRED_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_PAUSED_TRIGGER_GRPS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_PAUSED_TRIGGER_GRPS')\nend\n\nIF OBJECT_ID('QRTZ_SCHEDULER_STATE') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_SCHEDULER_STATE')\nend\n\nIF OBJECT_ID('QRTZ_LOCKS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_LOCKS')\nend\n\nIF OBJECT_ID('QRTZ_SIMPLE_TRIGGERS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_SIMPLE_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_SIMPROP_TRIGGERS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_SIMPROP_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_CRON_TRIGGERS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_CRON_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_BLOB_TRIGGERS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_BLOB_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_TRIGGERS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_TRIGGERS')\nend\n\nIF OBJECT_ID('QRTZ_JOB_DETAILS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_JOB_DETAILS')\nend\n\nIF OBJECT_ID('QRTZ_CALENDARS') IS NOT NULL\nbegin\n    execute ('drop table QRTZ_CALENDARS')\nend\n\n/*==============================================================================*/\n/* Create tables: */\n/*==============================================================================*/\n\nIF OBJECT_ID('QRTZ_CALENDARS') IS NULL\nbegin\n    execute('create table QRTZ_CALENDARS (\n    SCHED_NAME varchar(120) not null,\n    CALENDAR_NAME varchar(200) not null,\n    CALENDAR image not null\n    )')\nend\n\nIF OBJECT_ID('QRTZ_CRON_TRIGGERS') IS NULL\nbegin\n    execute('create table QRTZ_CRON_TRIGGERS (\n    SCHED_NAME varchar(120) not null,\n    TRIGGER_NAME varchar(200) not null,\n    TRIGGER_GROUP varchar(200) not null,\n    CRON_EXPRESSION varchar(120) not null,\n    TIME_ZONE_ID varchar(80) null,\n    )')\nend\n\nIF OBJECT_ID('QRTZ_PAUSED_TRIGGER_GRPS') IS NULL\nbegin\n    execute('create table QRTZ_PAUSED_TRIGGER_GRPS (\n    SCHED_NAME varchar(120) not null,\n    TRIGGER_GROUP  varchar(200) not null,\n    )')\nend\n\nIF OBJECT_ID('QRTZ_FIRED_TRIGGERS') IS NULL\nbegin\n    execute('create table QRTZ_FIRED_TRIGGERS(\n    SCHED_NAME varchar(120) not null,\n    ENTRY_ID varchar(95) not null,\n    TRIGGER_NAME varchar(200) not null,\n    TRIGGER_GROUP varchar(200) not null,\n    INSTANCE_NAME varchar(200) not null,\n    FIRED_TIME numeric(13,0) not null,\n    SCHED_TIME numeric(13,0) not null,\n    PRIORITY int not null,\n    STATE varchar(16) not null,\n    JOB_NAME varchar(200) null,\n    JOB_GROUP varchar(200) null,\n    IS_NONCONCURRENT bit not null,\n    REQUESTS_RECOVERY bit not null,\n    )')\nend\n\nIF OBJECT_ID('QRTZ_SCHEDULER_STATE') IS NULL\nbegin\n    execute('create table QRTZ_SCHEDULER_STATE (\n    SCHED_NAME varchar(120) not null,\n    INSTANCE_NAME varchar(200) not null,\n    LAST_CHECKIN_TIME numeric(13,0) not null,\n    CHECKIN_INTERVAL numeric(13,0) not null,\n    )')\nend\n\nIF OBJECT_ID('QRTZ_LOCKS') IS NULL\nbegin\n    execute('create table QRTZ_LOCKS (\n    SCHED_NAME varchar(120) not null,\n    LOCK_NAME  varchar(40) not null,\n    )')\nend\n\nIF OBJECT_ID('QRTZ_JOB_DETAILS') IS NULL\nbegin\n    execute('create table QRTZ_JOB_DETAILS (\n    SCHED_NAME varchar(120) not null,\n    JOB_NAME varchar(200) not null,\n    JOB_GROUP varchar(200) not null,\n    DESCRIPTION varchar(250) null,\n    JOB_CLASS_NAME varchar(250) not null,\n    IS_DURABLE bit not null,\n    IS_NONCONCURRENT bit not null,\n    IS_UPDATE_DATA bit not null,\n    REQUESTS_RECOVERY bit not null,\n    JOB_DATA image null\n    )')\nend\n\nIF OBJECT_ID('QRTZ_SIMPLE_TRIGGERS') IS NULL\nbegin\n    execute('create table QRTZ_SIMPLE_TRIGGERS (\n    SCHED_NAME varchar(120) not null,\n    TRIGGER_NAME varchar(200) not null,\n    TRIGGER_GROUP varchar(200) not null,\n    REPEAT_COUNT numeric(13,0) not null,\n    REPEAT_INTERVAL numeric(13,0) not null,\n    TIMES_TRIGGERED numeric(13,0) not null\n    )')\nend\n\nIF OBJECT_ID('QRTZ_SIMPROP_TRIGGERS') IS NULL\nbegin\n    execute('CREATE TABLE QRTZ_SIMPROP_TRIGGERS (\n    SCHED_NAME VARCHAR(120) NOT NULL,\n    TRIGGER_NAME VARCHAR(200) NOT NULL,\n    TRIGGER_GROUP VARCHAR(200) NOT NULL,\n    STR_PROP_1 VARCHAR(512) NULL,\n    STR_PROP_2 VARCHAR(512) NULL,\n    STR_PROP_3 VARCHAR(512) NULL,\n    INT_PROP_1 INT NULL,\n    INT_PROP_2 INT NULL,\n    LONG_PROP_1 NUMERIC(13,0) NULL,\n    LONG_PROP_2 NUMERIC(13,0) NULL,\n    DEC_PROP_1 NUMERIC(13,4) NULL,\n    DEC_PROP_2 NUMERIC(13,4) NULL,\n    BOOL_PROP_1 bit NOT NULL,\n    BOOL_PROP_2 bit NOT NULL\n    )')\nend\n\nIF OBJECT_ID('QRTZ_BLOB_TRIGGERS') IS NULL\nbegin\n    execute('create table QRTZ_BLOB_TRIGGERS (\n    SCHED_NAME varchar(120) not null,\n    TRIGGER_NAME varchar(200) not null,\n    TRIGGER_GROUP varchar(200) not null,\n    BLOB_DATA image null\n    )')\nend\n\nIF OBJECT_ID('QRTZ_TRIGGERS') IS NULL\nbegin\n    execute('create table QRTZ_TRIGGERS (\n    SCHED_NAME varchar(120) not null,\n    TRIGGER_NAME varchar(200) not null,\n    TRIGGER_GROUP varchar(200) not null,\n    JOB_NAME varchar(200) not null,\n    JOB_GROUP varchar(200) not null,\n    DESCRIPTION varchar(250) null,\n    NEXT_FIRE_TIME numeric(13,0) null,\n    PREV_FIRE_TIME numeric(13,0) null,\n    PRIORITY int null,\n    TRIGGER_STATE varchar(16) not null,\n    TRIGGER_TYPE varchar(8) not null,\n    START_TIME numeric(13,0) not null,\n    END_TIME numeric(13,0) null,\n    CALENDAR_NAME varchar(200) null,\n    MISFIRE_INSTR smallint null,\n    JOB_DATA image null\n    )')\nend\n\n/*==============================================================================*/\n/* Create primary key constraints: */\n/*==============================================================================*/\n\nIF OBJECT_ID('QRTZ_CALENDARS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_CALENDARS\n    add constraint PK_qrtz_calendars primary key clustered (SCHED_NAME,CALENDAR_NAME)')\nend\n\nIF OBJECT_ID('QRTZ_CRON_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_CRON_TRIGGERS\n    add constraint PK_qrtz_cron_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_FIRED_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_FIRED_TRIGGERS\n    add constraint PK_qrtz_fired_triggers primary key clustered (SCHED_NAME,ENTRY_ID)')\nend\n\nIF OBJECT_ID('QRTZ_PAUSED_TRIGGER_GRPS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_PAUSED_TRIGGER_GRPS\n    add constraint PK_qrtz_paused_trigger_grps primary key clustered (SCHED_NAME,TRIGGER_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_SCHEDULER_STATE') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_SCHEDULER_STATE\n    add constraint PK_qrtz_scheduler_state primary key clustered (SCHED_NAME,INSTANCE_NAME)')\nend\n\nIF OBJECT_ID('QRTZ_LOCKS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_LOCKS\n    add constraint PK_qrtz_locks primary key clustered (SCHED_NAME,LOCK_NAME)')\nend\n\nIF OBJECT_ID('QRTZ_JOB_DETAILS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_JOB_DETAILS\n    add constraint PK_qrtz_job_details primary key clustered (SCHED_NAME,JOB_NAME, JOB_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_SIMPLE_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_SIMPLE_TRIGGERS\n    add constraint PK_qrtz_simple_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_SIMPROP_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_SIMPROP_TRIGGERS\n    add constraint PK_qrtz_simprop_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_TRIGGERS\n    add constraint PK_qrtz_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_BLOB_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_BLOB_TRIGGERS\n    add constraint PK_qrtz_blob_triggers primary key clustered (SCHED_NAME,TRIGGER_NAME, TRIGGER_GROUP)')\nend\n\n/*==============================================================================*/\n/* Create foreign key constraints: */\n/*==============================================================================*/\n\nIF OBJECT_ID('QRTZ_CRON_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_CRON_TRIGGERS\n    add constraint FK_cron_triggers_triggers foreign key (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n    references QRTZ_TRIGGERS (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_SIMPLE_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_SIMPLE_TRIGGERS\n    add constraint FK_simple_triggers_triggers foreign key (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n    references QRTZ_TRIGGERS (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_SIMPROP_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_SIMPROP_TRIGGERS\n    add constraint FK_simprop_triggers_triggers foreign key (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n    references QRTZ_TRIGGERS (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_TRIGGERS\n    add constraint FK_triggers_job_details foreign key (SCHED_NAME,JOB_NAME,JOB_GROUP)\n    references QRTZ_JOB_DETAILS (SCHED_NAME,JOB_NAME,JOB_GROUP)')\nend\n\nIF OBJECT_ID('QRTZ_BLOB_TRIGGERS') IS NOT NULL\nbegin\n    execute ('alter table QRTZ_BLOB_TRIGGERS\n    add constraint FK_blob_triggers_triggers foreign key (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)\n    references QRTZ_TRIGGERS (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)')\nend\n/*==============================================================================*/\n/* End of script. */\n/*==============================================================================*/\n</code></pre>\n<p>I am running this script through DBeaver without issues against a sybase instance with details:</p>\n<pre><code>Server: Adaptive Server Enterprise 16.0.04.02\nDriver: jConnect (TM) for JDBC (TM) jConnect (TM) for JDBC(TM)/16.0 SP03 PL02 (Build 27403)/P/EBF27518/JDK 1.6.0/jdbcmain/OPT/Mon Aug 28 18:41:14 PDT 2017\n</code></pre>\n<p>My (relevant) spring application settings:</p>\n<pre><code>spring.datasource.url=jdbc:sybase:Tds:localhost:6000/Kustom\nspring.datasource.driverClassName=com.sybase.jdbc4.jdbc.SybDriver\nspring.datasource.username=user\nspring.datasource.password=pass\n\nspring.jpa.database-platform=org.hibernate.dialect.SybaseASE15Dialect\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SybaseASE15Dialect\nspring.jpa.properties.hibernate.use_sql_comments=true\nspring.jpa.properties.hibernate.format_sql=true\n\nspring.quartz.job-store-type=jdbc\nspring.quartz.jdbc.initialize-schema=always\nspring.quartz.jdbc.schema=classpath:jdbc/my_script.sql\n\nspring.quartz.properties.org.quartz.jobStore.tablePrefix=QRTZ_\nspring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.SybaseDelegate\n\n\nspring.jpa.show-sql=true\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\nspring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\n\nlogging.level.org.hibernate.type=TRACE\n</code></pre>\n<p>My application keeps failing with the following stack trace:</p>\n<pre><code>2023-02-15 10:48:53.630  INFO 1 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.SybaseASE15Dialect\n2023-02-15 10:48:53.766 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration@385ef531] to MetadataBuildingContext [org.hibernate.boot.internal.MetadataBuildingContextRootImpl@7fc645e4]\n2023-02-15 10:48:54.136 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration@385ef531] to SessionFactoryImpl [org.hibernate.internal.SessionFactoryImpl@48284d0e]\n2023-02-15 10:48:54.303  WARN 1 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 911, SQLState: ZZZZZ\n2023-02-15 10:48:54.303 ERROR 1 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Attempt to locate entry in sysdatabases for database 'KUSTOM' by name failed - no entry found under that name. Make sure that name is entered properly.\n\n2023-02-15 10:48:54.307 TRACE 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Handling #sessionFactoryClosed from [org.hibernate.internal.SessionFactoryImpl@48284d0e] for TypeConfiguration\n2023-02-15 10:48:54.308 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Un-scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration$Scope@11e33bac] from SessionFactory [org.hibernate.internal.SessionFactoryImpl@48284d0e]\n2023-02-15 10:48:54.313 ERROR 1 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Error accessing table metadata\n2023-02-15 10:48:54.314  WARN 1 --- [           main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Error accessing table metadata\n2023-02-15 10:48:54.315  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-02-15 10:48:54.946  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n2023-02-15 10:48:54.958  INFO 1 --- [           main] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@3dd69f5a{/,null,STOPPED}\n2023-02-15 10:48:54.999  INFO 1 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2023-02-15 10:48:55.098 ERROR 1 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Error accessing table metadata\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.23.jar!/:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.23.jar!/:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar!/:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar!/:5.3.23]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar!/:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar!/:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar!/:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.23.jar!/:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.23.jar!/:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar!/:5.3.23]\n    at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:64) ~[spring-boot-2.6.12.jar!/:2.6.12]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:745) ~[spring-boot-2.6.12.jar!/:2.6.12]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:420) ~[spring-boot-2.6.12.jar!/:2.6.12]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.6.12.jar!/:2.6.12]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1317) ~[spring-boot-2.6.12.jar!/:2.6.12]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.6.12.jar!/:2.6.12]\n    at com.finastra.fusionlimits.enquiries.scheduler.app.Application.main(Application.java:14) ~[classes!/:1.0.0-SNAPSHOT]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[app.jar:1.0.0-SNAPSHOT]\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) ~[app.jar:1.0.0-SNAPSHOT]\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[app.jar:1.0.0-SNAPSHOT]\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[app.jar:1.0.0-SNAPSHOT]\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Error accessing table metadata\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.23.jar!/:5.3.23]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.23.jar!/:5.3.23]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.23.jar!/:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.23.jar!/:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.23.jar!/:5.3.23]\n    ... 24 common frames omitted\nCaused by: org.hibernate.exception.GenericJDBCException: Error accessing table metadata\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.convertSQLException(AbstractInformationExtractorImpl.java:118) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.getTables(AbstractInformationExtractorImpl.java:571) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:122) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:68) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:220) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:123) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:196) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.23.jar!/:5.3.23]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.23.jar!/:5.3.23]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.23.jar!/:5.3.23]\n    ... 28 common frames omitted\nCaused by: com.sybase.jdbc4.jdbc.SybSQLException: Attempt to locate entry in sysdatabases for database 'KUSTOM' by name failed - no entry found under that name. Make sure that name is entered properly.\n\n    at com.sybase.jdbc4.tds.Tds.processEed(Tds.java:4237) ~[jconnect-16.04.1.jar!/:na]\n    at com.sybase.jdbc4.tds.Tds.nextResult(Tds.java:3346) ~[jconnect-16.04.1.jar!/:na]\n    at com.sybase.jdbc4.jdbc.ResultGetter.nextResult(ResultGetter.java:78) ~[jconnect-16.04.1.jar!/:na]\n    at com.sybase.jdbc4.jdbc.SybStatement.nextResult(SybStatement.java:303) ~[jconnect-16.04.1.jar!/:na]\n    at com.sybase.jdbc4.jdbc.SybStatement.nextResult(SybStatement.java:285) ~[jconnect-16.04.1.jar!/:na]\n    at com.sybase.jdbc4.jdbc.SybStatement.queryLoop(SybStatement.java:2681) ~[jconnect-16.04.1.jar!/:na]\n    at com.sybase.jdbc4.jdbc.SybCallableStatement.executeQuery(SybCallableStatement.java:150) ~[jconnect-16.04.1.jar!/:na]\n    at com.sybase.jdbc4.jdbc.SybDatabaseMetaData.returnResults(SybDatabaseMetaData.java:5552) ~[jconnect-16.04.1.jar!/:na]\n    at com.sybase.jdbc4.jdbc.SybDatabaseMetaData.getTables(SybDatabaseMetaData.java:4022) ~[jconnect-16.04.1.jar!/:na]\n    at com.zaxxer.hikari.pool.ProxyDatabaseMetaData.getTables(ProxyDatabaseMetaData.java:68) ~[HikariCP-4.0.3.jar!/:na]\n    at com.zaxxer.hikari.pool.HikariProxyDatabaseMetaData.getTables(HikariProxyDatabaseMetaData.java) ~[HikariCP-4.0.3.jar!/:na]\n    at org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.processTableResultSet(InformationExtractorJdbcDatabaseMetaDataImpl.java:64) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    at org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.getTables(AbstractInformationExtractorImpl.java:559) ~[hibernate-core-5.6.11.Final.jar!/:5.6.11.Final]\n    ... 40 common frames omitted\n</code></pre>\n<p>PS: Same issue using the included script with quartz (linked earlier).</p>\n<p>However if I am using the sourceforge driver with :</p>\n<pre><code>spring.datasource.url=jdbc:jtds:sybase://localhost:6000/Kustom\nspring.datasource.driverClassName=net.sourceforge.jtds.jdbc.Driver\n\n# Also need these just for the test connection which sourceforge driver is lacking\nspring.datasource.validationQuery=select 1\nspring.datasource.hikari.connectionTestQuery=select 1\n</code></pre>\n<p>then all seems to work as expected.</p>\n<p>How can I make it work using the more modern jconnect driver ?</p>\n<p>Thanks</p>\n"},{"tags":["java","regex","sonarqube"],"comments":[{"owner":{"account_id":4739783,"reputation":612575,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":1,"creation_date":1642769901,"post_id":70801620,"comment_id":125166427,"body_markdown":"All special chars (punctuation + whitespace) is `Pattern.compile(&quot;[\\\\p{P}\\\\p{S}\\\\p{Z}]&quot;)`. Maybe you just wanted all non-alphanumeric? `Pattern.compile(&quot;\\\\P{Alnum}&quot;)`?","body":"All special chars (punctuation + whitespace) is <code>Pattern.compile(&quot;[\\\\p{P}\\\\p{S}\\\\p{Z}]&quot;)</code>. Maybe you just wanted all non-alphanumeric? <code>Pattern.compile(&quot;\\\\P{Alnum}&quot;)</code>?"},{"owner":{"account_id":1646046,"reputation":505,"user_id":1517586,"display_name":"raj03"},"score":0,"creation_date":1642770123,"post_id":70801620,"comment_id":125166516,"body_markdown":"But this pattern does not replace the  \\n  and  \\t   characters from a string which I hv in my validation and working with previous regex expression","body":"But this pattern does not replace the  \\n  and  \\t   characters from a string which I hv in my validation and working with previous regex expression"},{"owner":{"account_id":4739783,"reputation":612575,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1663578321,"post_id":70801620,"comment_id":130264495,"body_markdown":"They do, just check the answer below with several solutions listed. Check them only in code, not at any online regex testers.","body":"They do, just check the answer below with several solutions listed. Check them only in code, not at any online regex testers."}],"answers":[{"tags":[],"owner":{"account_id":1646046,"reputation":505,"user_id":1517586,"display_name":"raj03"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1642771104,"creation_date":1642771104,"answer_id":70801933,"question_id":70801620,"body_markdown":"As Wiktor Stribiżew mentioned in the comment section the solution to fix the SonarQube issue is \r\n\r\n    String c = &quot;test10101010test%79%% %%% $$$  \\t \\n $$$#$@^$%~`***c  33&quot;;\r\n    Pattern pt = Pattern.compile(&quot;\\\\P{Alnum}&quot;);\r\n    Matcher match= pt.matcher(c);\r\n    while(match.find())\r\n    {\r\n        c=c.replaceAll(&quot;\\\\&quot;+match.group(), &quot;&quot;).toLowerCase();\r\n    }\r\n     System.out.println(c);\r\n\r\n\r\n","title":"SonarQube issue: Remove duplicates in this character class","body":"<p>As Wiktor Stribiżew mentioned in the comment section the solution to fix the SonarQube issue is</p>\n<pre><code>String c = &quot;test10101010test%79%% %%% $$$  \\t \\n $$$#$@^$%~`***c  33&quot;;\nPattern pt = Pattern.compile(&quot;\\\\P{Alnum}&quot;);\nMatcher match= pt.matcher(c);\nwhile(match.find())\n{\n    c=c.replaceAll(&quot;\\\\&quot;+match.group(), &quot;&quot;).toLowerCase();\n}\n System.out.println(c);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4739783,"reputation":612575,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1677143464,"creation_date":1642776494,"answer_id":70803162,"question_id":70801620,"body_markdown":"Your regex is a character class, `[...]`. It matches `\\W` (chars other than letters, digits or connector punctuation (underscore in ASCII mode), `\\s` (a whitespace) and a `+` char. The error you get is related to the fact that both `+` and whitespace chars can already be matched with `\\W`.\r\n\r\nSo your pattern is basically `\\W`. Note it does not match underscores that are punctuation chars. If you want to remove all chars other than alphanumeric chars use `[\\W_]` or `\\P{Alnum}` pattern.\r\n\r\nMore, you usually do not need to check for a match before replacing, the following should be enough:\r\n```java\r\nc=c.replaceAll(&quot;\\\\W+&quot;, &quot;&quot;).toLowerCase();\r\n// or\r\nc=c.replaceAll(&quot;[\\\\W_]+&quot;, &quot;&quot;).toLowerCase();\r\n// or\r\nc=c.replaceAll(&quot;\\\\P{Alnum}+&quot;, &quot;&quot;).toLowerCase();\r\n```\r\n**Note** this warning will appear in cases where you specified a case insensitive flag `/i` and use character classes to match letters in either case like `[zZ]` (`/[zZ]/i`). This is clear you need to replace the character class with a single letter, `z` or `Z` here.","title":"SonarQube issue: Remove duplicates in this character class","body":"<p>Your regex is a character class, <code>[...]</code>. It matches <code>\\W</code> (chars other than letters, digits or connector punctuation (underscore in ASCII mode), <code>\\s</code> (a whitespace) and a <code>+</code> char. The error you get is related to the fact that both <code>+</code> and whitespace chars can already be matched with <code>\\W</code>.</p>\n<p>So your pattern is basically <code>\\W</code>. Note it does not match underscores that are punctuation chars. If you want to remove all chars other than alphanumeric chars use <code>[\\W_]</code> or <code>\\P{Alnum}</code> pattern.</p>\n<p>More, you usually do not need to check for a match before replacing, the following should be enough:</p>\n<pre class=\"lang-java prettyprint-override\"><code>c=c.replaceAll(&quot;\\\\W+&quot;, &quot;&quot;).toLowerCase();\n// or\nc=c.replaceAll(&quot;[\\\\W_]+&quot;, &quot;&quot;).toLowerCase();\n// or\nc=c.replaceAll(&quot;\\\\P{Alnum}+&quot;, &quot;&quot;).toLowerCase();\n</code></pre>\n<p><strong>Note</strong> this warning will appear in cases where you specified a case insensitive flag <code>/i</code> and use character classes to match letters in either case like <code>[zZ]</code> (<code>/[zZ]/i</code>). This is clear you need to replace the character class with a single letter, <code>z</code> or <code>Z</code> here.</p>\n"}],"owner":{"account_id":1646046,"reputation":505,"user_id":1517586,"display_name":"raj03"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4219,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1677143464,"creation_date":1642769685,"question_id":70801620,"body_markdown":"I have implemented the regex expression to remove all the special characters with empty strings and remove space(if any), which is working fine in my code but sonarQUbe is complaining as this is non-compliant solution, Can anyone tell me how to fix this issue\r\n\r\n    String c = &quot;test10101010test%79%% %%% $$$  \\t \\n $$$#$@^$%~`***c  33&quot;;\r\n        Pattern pt = Pattern.compile(&quot;[\\\\W\\\\s+]&quot;);\r\n        Matcher match= pt.matcher(c);\r\n        while(match.find())\r\n        {\r\n            c=c.replaceAll(&quot;\\\\&quot;+match.group(), &quot;&quot;).toLowerCase();\r\n        }\r\n         System.out.println(c);\r\n\r\n\r\nI am getting error at `&quot;[\\\\W\\\\s+]&quot;`. Getting below error\r\nRemove duplicates in this character class.\r\n\r\n\r\nCan anyone suggest how to fix this issue?\r\n","title":"SonarQube issue: Remove duplicates in this character class","body":"<p>I have implemented the regex expression to remove all the special characters with empty strings and remove space(if any), which is working fine in my code but sonarQUbe is complaining as this is non-compliant solution, Can anyone tell me how to fix this issue</p>\n<pre><code>String c = &quot;test10101010test%79%% %%% $$$  \\t \\n $$$#$@^$%~`***c  33&quot;;\n    Pattern pt = Pattern.compile(&quot;[\\\\W\\\\s+]&quot;);\n    Matcher match= pt.matcher(c);\n    while(match.find())\n    {\n        c=c.replaceAll(&quot;\\\\&quot;+match.group(), &quot;&quot;).toLowerCase();\n    }\n     System.out.println(c);\n</code></pre>\n<p>I am getting error at <code>&quot;[\\\\W\\\\s+]&quot;</code>. Getting below error\nRemove duplicates in this character class.</p>\n<p>Can anyone suggest how to fix this issue?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"score":0,"creation_date":1506411840,"post_id":46420398,"comment_id":79798259,"body_markdown":"Please share the URL and HTML","body":"Please share the URL and HTML"},{"owner":{"account_id":11553861,"reputation":21,"user_id":8465566,"display_name":"Dheeraj Singh"},"score":0,"creation_date":1506412106,"post_id":46420398,"comment_id":79798438,"body_markdown":"&lt;input class=“title” value=“Mr”","body":"&lt;input class=“title” value=“Mr”"},{"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"score":0,"creation_date":1506412163,"post_id":46420398,"comment_id":79798465,"body_markdown":"You want to return Mr","body":"You want to return Mr"},{"owner":{"account_id":11553861,"reputation":21,"user_id":8465566,"display_name":"Dheeraj Singh"},"score":0,"creation_date":1506412185,"post_id":46420398,"comment_id":79798482,"body_markdown":"Yes i need that in a string","body":"Yes i need that in a string"},{"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"score":0,"creation_date":1506412253,"post_id":46420398,"comment_id":79798528,"body_markdown":"Okay i will give u code","body":"Okay i will give u code"},{"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"score":0,"creation_date":1506412268,"post_id":46420398,"comment_id":79798537,"body_markdown":"Can u paste complete HTML of that code","body":"Can u paste complete HTML of that code"}],"answers":[{"tags":[],"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1506412724,"creation_date":1506412724,"answer_id":46420838,"question_id":46420398,"body_markdown":"As per your requirement you can try this\r\n\r\n\r\nit is your HTML code:\r\n\r\n     &lt;input class=&quot;title&quot; type=&quot;text&quot; value=&quot;Mr&quot;&gt;\r\n\r\nSelenium code:\r\n\r\n     String textvalue=driver.findElement(By.xpath(&quot;//input[@value=&#39;Mr&#39;]&quot;)).getAttribute(&quot;value&quot;);\r\n\r\n     System.out.println(textvalue);\r\n\t\r\n\r\n","title":"How to get the value from a tag in Selenium","body":"<p>As per your requirement you can try this</p>\n\n<p>it is your HTML code:</p>\n\n<pre><code> &lt;input class=\"title\" type=\"text\" value=\"Mr\"&gt;\n</code></pre>\n\n<p>Selenium code:</p>\n\n<pre><code> String textvalue=driver.findElement(By.xpath(\"//input[@value='Mr']\")).getAttribute(\"value\");\n\n System.out.println(textvalue);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12945698,"reputation":399,"user_id":9360135,"display_name":"Kumar S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565333790,"creation_date":1565333790,"answer_id":57424851,"question_id":46420398,"body_markdown":"for python:\r\n\r\n    value=driver.find_element_by_id(&#39;tag ID&#39;)\r\n    print(value.text)\r\njava:\r\n\r\n    System.out.println(driver.findElement(By.id(&#39;tag ID&#39;)).getText());","title":"How to get the value from a tag in Selenium","body":"<p>for python:</p>\n\n<pre><code>value=driver.find_element_by_id('tag ID')\nprint(value.text)\n</code></pre>\n\n<p>java:</p>\n\n<pre><code>System.out.println(driver.findElement(By.id('tag ID')).getText());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17811066,"reputation":117,"user_id":12935670,"display_name":"sule mohammed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677142976,"creation_date":1677142976,"answer_id":75542587,"question_id":46420398,"body_markdown":"Use the get attribute method\r\n\r\n    value = driver.find_element(By.CLASS_NAME, &#39;title&#39;)\r\n    output = value.get_attribute(&quot;value&quot;)","title":"How to get the value from a tag in Selenium","body":"<p>Use the get attribute method</p>\n<pre><code>value = driver.find_element(By.CLASS_NAME, 'title')\noutput = value.get_attribute(&quot;value&quot;)\n</code></pre>\n"}],"owner":{"account_id":11553861,"reputation":21,"user_id":8465566,"display_name":"Dheeraj Singh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7703,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":46420838,"answer_count":3,"score":0,"last_activity_date":1677142976,"creation_date":1506411446,"question_id":46420398,"body_markdown":"How can we get the value inside the value section in selenium\r\n\r\n&lt;input class=“name” value=“Mr”&gt;\r\n\r\nI need to retrieve Mr in a string present under value using selenium.\r\n\r\nSince its not a free text so getText() is not working.","title":"How to get the value from a tag in Selenium","body":"<p>How can we get the value inside the value section in selenium</p>\n\n<p></p>\n\n<p>I need to retrieve Mr in a string present under value using selenium.</p>\n\n<p>Since its not a free text so getText() is not working.</p>\n"},{"tags":["java","optional-parameters"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1677140147,"post_id":75542094,"comment_id":133279813,"body_markdown":"Do you mean something like `requestBuilder.setSomeFieldId(myPlan.getSomeField().map(SomeFieldType::getId).orElse(null))`? Or does `setSomeFieldId()` take an `Optional` parameter in which case the `orElse(null)` wouldn&#39;t be necessary? Or yet better: `myPlan.getSomeField().map(SomeFieldType::getId).ifPresent(id -&gt; requestBuilder.setSomeFieldId(id))`","body":"Do you mean something like <code>requestBuilder.setSomeFieldId(myPlan.getSomeField().map(Some&zwnj;&#8203;FieldType::getId).or&zwnj;&#8203;Else(null))</code>? Or does <code>setSomeFieldId()</code> take an <code>Optional</code> parameter in which case the <code>orElse(null)</code> wouldn&#39;t be necessary? Or yet better: <code>myPlan.getSomeField().map(SomeFieldType::getId).ifPresent(id -&gt; requestBuilder.setSomeFieldId(id))</code>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1677141964,"post_id":75542094,"comment_id":133280270,"body_markdown":"BTW solution from @Thomas comment can be simplified even more: `id -&gt; requestBuilder.setSomeFieldId(id)` can be replaced by `requestBuilder::setSomeFieldId`","body":"BTW solution from @Thomas comment can be simplified even more: <code>id -&gt; requestBuilder.setSomeFieldId(id)</code> can be replaced by <code>requestBuilder::setSomeFieldId</code>"}],"owner":{"account_id":4504119,"reputation":1834,"user_id":3706638,"accept_rate":100,"display_name":"S.Dan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677142931,"creation_date":1677139812,"question_id":75542094,"body_markdown":"What is a simpler way to write the following:\r\n\r\n```\r\nBuilder requestBuilder = new Builder();\r\nif(myPlan.getSomeField().isPresent()){\r\n     requestBuilder.setSomeFieldId(Optional.of(\r\n                    NullableField.ofNullable(myPlan.getSomeField().get().getId())));\r\n}\r\n```\r\n\r\nI tried to use `orElse` but it doesn&#39;t seem to match my requirements.\r\n","title":"Simplify if condition to check of optional field attribute is present","body":"<p>What is a simpler way to write the following:</p>\n<pre><code>Builder requestBuilder = new Builder();\nif(myPlan.getSomeField().isPresent()){\n     requestBuilder.setSomeFieldId(Optional.of(\n                    NullableField.ofNullable(myPlan.getSomeField().get().getId())));\n}\n</code></pre>\n<p>I tried to use <code>orElse</code> but it doesn't seem to match my requirements.</p>\n"},{"tags":["java","tomcat","visual-studio-code"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1534248313,"post_id":51840625,"comment_id":90634969,"body_markdown":"I&#39;m guessing: putting the output folder in an auto-deploy folder would work, but it has been some time since I worked with Tomcat. In the documentation I read &quot;Deployment of exploded web applications which are copied into the Host appBase.&quot; and &quot;Re-loading of a web application if the /WEB-INF/web.xml file (or any other resource defined as a WatchedResource) is updated. &quot; under &quot;Deploying on a running Tomcat server&quot;; this may be what you are after.","body":"I&#39;m guessing: putting the output folder in an auto-deploy folder would work, but it has been some time since I worked with Tomcat. In the documentation I read &quot;Deployment of exploded web applications which are copied into the Host appBase.&quot; and &quot;Re-loading of a web application if the /WEB-INF/web.xml file (or any other resource defined as a WatchedResource) is updated. &quot; under &quot;Deploying on a running Tomcat server&quot;; this may be what you are after."},{"owner":{"account_id":2165012,"reputation":609,"user_id":1918308,"accept_rate":83,"display_name":"telle"},"score":0,"creation_date":1534254188,"post_id":51840625,"comment_id":90638930,"body_markdown":"Thanks for your suggestion. AFAIK Visual Studio Code executes building whenever I change a file of `src/main/java` or `src/main/resources`. So, as you say, I could change the ouput folder to copy the modified files to the exploded war. However, this might not work for `src/main/webapp` folder&#39;s file because VSCode doesn&#39;t trigger the building for these files. Let me know if I&#39;ve misunderstood something.","body":"Thanks for your suggestion. AFAIK Visual Studio Code executes building whenever I change a file of <code>src&#47;main&#47;java</code> or <code>src&#47;main&#47;resources</code>. So, as you say, I could change the ouput folder to copy the modified files to the exploded war. However, this might not work for <code>src&#47;main&#47;webapp</code> folder&#39;s file because VSCode doesn&#39;t trigger the building for these files. Let me know if I&#39;ve misunderstood something."},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1682624274,"post_id":51840625,"comment_id":134249438,"body_markdown":"You can use the Visual Studio Code Live Server extension for this...","body":"You can use the Visual Studio Code Live Server extension for this..."}],"answers":[{"tags":[],"owner":{"account_id":319027,"reputation":12899,"user_id":636561,"display_name":"Luca Fagioli"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1643302764,"creation_date":1584610036,"answer_id":60754233,"question_id":51840625,"body_markdown":"If you use Spring, there is an easy way.\r\n\r\nThe [Spring Initializr][1] extension comes with an embedded Tomcat installation, and hot reloading works out of the box.\r\n\r\nRely on the following guide to install it:\r\n\r\nhttps://code.visualstudio.com/docs/java/java-spring-boot\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-spring-initializr","title":"Deploy java web application to Tomcat with Visual Studio Code","body":"<p>If you use Spring, there is an easy way.</p>\n<p>The <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-spring-initializr\" rel=\"nofollow noreferrer\">Spring Initializr</a> extension comes with an embedded Tomcat installation, and hot reloading works out of the box.</p>\n<p>Rely on the following guide to install it:</p>\n<p><a href=\"https://code.visualstudio.com/docs/java/java-spring-boot\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/java/java-spring-boot</a></p>\n"}],"owner":{"account_id":2165012,"reputation":609,"user_id":1918308,"accept_rate":83,"display_name":"telle"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16768,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":1,"score":18,"last_activity_date":1677142865,"creation_date":1534247043,"question_id":51840625,"body_markdown":"I&#39;m trying to deploy a java web application to Tomcat using Visual Studio Code and I&#39;m having some issues that I&#39;d like to share. \r\n\r\nAfter installing the extension [Tomcat for Java][1], I&#39;ve tried to deploy a Maven Java Web project. To do so, I&#39;ve clicked over project&#39;s folder and selected &quot;Run on Tomcat Server&quot; option. The result is an error with this message: `The folder is not a valid web app to run on Tomcat Server.`\r\n\r\nThen, I&#39;ve realized that maybe I should create a war file before running it on Tomcat. Therefore, I&#39;ve executed `mvn clean package` command and afterwards execute &quot;Run on Tomcat Server&quot; option over the war file. Doing this the project has been deployed correctly. \r\n\r\nHowever, compared to Eclipse&#39;s way to work with Tomcat, it seems to me a bit tedious. Particularly if I&#39;m working with static files, like css or js, because every time I modify a file I should execute `mvn clean package` and &quot;Run on Tomcat Server&quot;. Whereas, in Eclipse, these files are deployed automatically on Tomcat without restarting. \r\n\r\nI wonder if there is another way to work with VS Code and Tomcat for Java. \r\n\r\nThanks!\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=adashen.vscode-tomcat","title":"Deploy java web application to Tomcat with Visual Studio Code","body":"<p>I'm trying to deploy a java web application to Tomcat using Visual Studio Code and I'm having some issues that I'd like to share. </p>\n\n<p>After installing the extension <a href=\"https://marketplace.visualstudio.com/items?itemName=adashen.vscode-tomcat\" rel=\"noreferrer\">Tomcat for Java</a>, I've tried to deploy a Maven Java Web project. To do so, I've clicked over project's folder and selected \"Run on Tomcat Server\" option. The result is an error with this message: <code>The folder is not a valid web app to run on Tomcat Server.</code></p>\n\n<p>Then, I've realized that maybe I should create a war file before running it on Tomcat. Therefore, I've executed <code>mvn clean package</code> command and afterwards execute \"Run on Tomcat Server\" option over the war file. Doing this the project has been deployed correctly. </p>\n\n<p>However, compared to Eclipse's way to work with Tomcat, it seems to me a bit tedious. Particularly if I'm working with static files, like css or js, because every time I modify a file I should execute <code>mvn clean package</code> and \"Run on Tomcat Server\". Whereas, in Eclipse, these files are deployed automatically on Tomcat without restarting. </p>\n\n<p>I wonder if there is another way to work with VS Code and Tomcat for Java. </p>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677093477,"creation_date":1677093477,"answer_id":75537245,"question_id":75536500,"body_markdown":"You need to change the argument of defaultSuccessUrl as follows\r\n\r\n    defaultSuccessUrl(&quot;/redirector&quot;)\r\n\r\nand add the following to your controller:\r\n\r\n    @GetMapping(&quot;/redirector&quot;)\r\n    public String redirector() {\r\n        // load the user from the session or SecurityContext\r\n        return &quot;redirect:/todo/&quot; + user.getId();\r\n    }","title":"redirecting to URL based on user&#39;s id (ex. /todo/{id})","body":"<p>You need to change the argument of defaultSuccessUrl as follows</p>\n<pre><code>defaultSuccessUrl(&quot;/redirector&quot;)\n</code></pre>\n<p>and add the following to your controller:</p>\n<pre><code>@GetMapping(&quot;/redirector&quot;)\npublic String redirector() {\n    // load the user from the session or SecurityContext\n    return &quot;redirect:/todo/&quot; + user.getId();\n}\n</code></pre>\n"}],"owner":{"account_id":22711769,"reputation":11,"user_id":16877633,"display_name":"funeral of tech"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677142632,"creation_date":1677088738,"question_id":75536500,"body_markdown":"I&#39;m making todo app with springboot.\r\n\r\n\r\n----------\r\n\r\n\r\n*What I want to solve*\r\n\r\nAfter login, **I want the user to redirect &#39;todolist&#39; page URL based on his user&#39;s id.**(ex, localhost:8080/todo/{id})\r\n\r\nI supposed to redirect to URL based on one&#39;s id, but page redirects not to localhost:8080/todo/{id}, but localhost:8080.\r\n\r\nOf course, there is a id column in user DB. \r\n\r\n----------\r\n\r\nUserController.java\r\n\r\n    @Controller\r\n    public class UserController {\r\n    @Autowired\r\n    @Lazy\r\n    private UserRegistrationService userRegistrationService;\r\n\r\n    @GetMapping(&quot;/login&quot;)\r\n    public String showLoginPage() {\r\n        return &quot;login&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/signup&quot;)\r\n    public String showUserRegistration(@ModelAttribute(&quot;signupForm&quot;) SignupForm signupForm) {\r\n        return &quot;signup&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/signup&quot;)\r\n    public String userRegistration(@Validated @ModelAttribute(&quot;signupForm&quot;) SignupForm signupForm, BindingResult result) {\r\n        if(result.hasErrors()) {\r\n            return &quot;signup&quot;;\r\n        }\r\n        userRegistrationService.userRegistration(signupForm.getEmail(), signupForm.getPassword());\r\n        return &quot;redirect:/login&quot;;\r\n    }\r\n    }\r\n\r\n----------\r\nSecurityConfig\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http.formLogin(login -&gt; login\r\n                .loginPage(&quot;/login&quot;)\r\n                .loginProcessingUrl(&quot;/login&quot;)\r\n                .defaultSuccessUrl(&quot;/todo&quot;)\r\n                .failureUrl(&quot;/login?error&quot;)\r\n                .permitAll())\r\n                .authorizeHttpRequests(authz -&gt; authz\r\n                .mvcMatchers(&quot;/css/**&quot;).permitAll()\r\n                .mvcMatchers(&quot;/signup&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n        );\r\n        http.logout().permitAll();\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n    }\r\n\r\n----------\r\nUser.java\r\n\r\n    @Entity\r\n    @Table(name = &quot;users&quot;)\r\n    public class User {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    @Column(name = &quot;email&quot;)\r\n    private String email;\r\n    @Column(name = &quot;password&quot;)\r\n    private String password;\r\n\r\n    @Column(name = &quot;authority&quot;)\r\n    private String authority;\r\n\r\n    @OneToMany\r\n    @JoinColumn(name = &quot;user_id&quot;)\r\n    private List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\r\n\r\n    public User(String email, String password, String authority) {\r\n        this.email = email;\r\n        this.password = password;\r\n        this.authority = authority;\r\n    }\r\n\r\n    public User() {\r\n\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Integer id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public String getAuthority() {\r\n        return authority;\r\n    }\r\n\r\n    public void setAuthority(String authority) {\r\n        this.authority = authority;\r\n    }\r\n\r\n    public List&lt;Todo&gt; getTodos() {\r\n        return todos;\r\n    }\r\n\r\n    public void setTodos(List&lt;Todo&gt; todos) {\r\n        this.todos = todos;\r\n    }\r\n    }\r\n\r\n----------\r\n\r\n*What I tried*\r\nI added  &#39;/todo/{id}&#39; to defaultSeccessUrl, but nothing changed.\r\n\r\nTo sum up, **I want the user to redirect to todolist page URL based on user&#39;s id**\r\n\r\nDoes anyone help?\r\nI would appreciate　if you cloud answered to this question. Thanks!\r\n","title":"redirecting to URL based on user&#39;s id (ex. /todo/{id})","body":"<p>I'm making todo app with springboot.</p>\n<hr />\n<p><em>What I want to solve</em></p>\n<p>After login, <strong>I want the user to redirect 'todolist' page URL based on his user's id.</strong>(ex, localhost:8080/todo/{id})</p>\n<p>I supposed to redirect to URL based on one's id, but page redirects not to localhost:8080/todo/{id}, but localhost:8080.</p>\n<p>Of course, there is a id column in user DB.</p>\n<hr />\n<p>UserController.java</p>\n<pre><code>@Controller\npublic class UserController {\n@Autowired\n@Lazy\nprivate UserRegistrationService userRegistrationService;\n\n@GetMapping(&quot;/login&quot;)\npublic String showLoginPage() {\n    return &quot;login&quot;;\n}\n\n@GetMapping(&quot;/signup&quot;)\npublic String showUserRegistration(@ModelAttribute(&quot;signupForm&quot;) SignupForm signupForm) {\n    return &quot;signup&quot;;\n}\n\n@PostMapping(&quot;/signup&quot;)\npublic String userRegistration(@Validated @ModelAttribute(&quot;signupForm&quot;) SignupForm signupForm, BindingResult result) {\n    if(result.hasErrors()) {\n        return &quot;signup&quot;;\n    }\n    userRegistrationService.userRegistration(signupForm.getEmail(), signupForm.getPassword());\n    return &quot;redirect:/login&quot;;\n}\n}\n</code></pre>\n<hr />\n<p>SecurityConfig</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    http.formLogin(login -&gt; login\n            .loginPage(&quot;/login&quot;)\n            .loginProcessingUrl(&quot;/login&quot;)\n            .defaultSuccessUrl(&quot;/todo&quot;)\n            .failureUrl(&quot;/login?error&quot;)\n            .permitAll())\n            .authorizeHttpRequests(authz -&gt; authz\n            .mvcMatchers(&quot;/css/**&quot;).permitAll()\n            .mvcMatchers(&quot;/signup&quot;).permitAll()\n            .anyRequest().authenticated()\n    );\n    http.logout().permitAll();\n    return http.build();\n}\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n}\n</code></pre>\n<hr />\n<p>User.java</p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n@Id\n@Column(name = &quot;id&quot;)\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Integer id;\n\n@Column(name = &quot;email&quot;)\nprivate String email;\n@Column(name = &quot;password&quot;)\nprivate String password;\n\n@Column(name = &quot;authority&quot;)\nprivate String authority;\n\n@OneToMany\n@JoinColumn(name = &quot;user_id&quot;)\nprivate List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\n\npublic User(String email, String password, String authority) {\n    this.email = email;\n    this.password = password;\n    this.authority = authority;\n}\n\npublic User() {\n\n}\n\npublic Integer getId() {\n    return id;\n}\n\npublic void setId(Integer id) {\n    this.id = id;\n}\n\npublic String getEmail() {\n    return email;\n}\n\npublic void setEmail(String email) {\n    this.email = email;\n}\n\npublic String getPassword() {\n    return password;\n}\n\npublic void setPassword(String password) {\n    this.password = password;\n}\n\npublic String getAuthority() {\n    return authority;\n}\n\npublic void setAuthority(String authority) {\n    this.authority = authority;\n}\n\npublic List&lt;Todo&gt; getTodos() {\n    return todos;\n}\n\npublic void setTodos(List&lt;Todo&gt; todos) {\n    this.todos = todos;\n}\n}\n</code></pre>\n<hr />\n<p><em>What I tried</em>\nI added  '/todo/{id}' to defaultSeccessUrl, but nothing changed.</p>\n<p>To sum up, <strong>I want the user to redirect to todolist page URL based on user's id</strong></p>\n<p>Does anyone help?\nI would appreciate　if you cloud answered to this question. Thanks!</p>\n"},{"tags":["java","crash-dumps","jvm-crash"],"answers":[{"tags":[],"owner":{"account_id":4774,"reputation":26513,"user_id":7345,"accept_rate":81,"display_name":"mindas"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1273230819,"creation_date":1273230819,"answer_id":2788059,"question_id":2787976,"body_markdown":"I don&#39;t think there is anything in java that would provide you with on-exit thread dumps. I tackle this when necessary by having a cronjob that does periodic `kill -3 pid`. Yes, it does clutter the logs a bit, but the footprint is still negligible.\r\n\r\nAnd if you are suffering from OOM, it might be be beneficial to see how the situation evolved thread-wise.","title":"how to generate thread dump java on out of memory error","body":"<p>I don't think there is anything in java that would provide you with on-exit thread dumps. I tackle this when necessary by having a cronjob that does periodic <code>kill -3 pid</code>. Yes, it does clutter the logs a bit, but the footprint is still negligible.</p>\n\n<p>And if you are suffering from OOM, it might be be beneficial to see how the situation evolved thread-wise.</p>\n"},{"tags":[],"owner":{"account_id":94218,"reputation":27823,"user_id":257356,"accept_rate":59,"display_name":"SyntaxT3rr0r"},"down_vote_count":1,"up_vote_count":18,"is_accepted":true,"score":17,"last_activity_date":1273234512,"creation_date":1273234512,"answer_id":2788423,"question_id":2787976,"body_markdown":"&gt; How to generate thread dump java on\r\n&gt; out of memory error?\r\n\r\nYour question can be simplified into:\r\n\r\n- how to generate a thread dump\r\n\r\nand:\r\n\r\n- how to catch an out of memory error (don&#39;t pay attention to naysayer here, they&#39;re missing the bigger picture, see my comment)\r\n\r\n\r\nSo it&#39;s actually quite easy, you could do it like this:\r\n\r\n- install a default uncaught exception handler\r\n\r\n- upon catching an uncaught exception, check if you have an OutOfMemoryError\r\n\r\n- if you have an OutOfMemoryError, generate yourself a full thread dump and either ask the user to send it to you by email or offer to send it automatically\r\n\r\nBonus: it works fine on 1.5 too :)\r\n\r\n     Thread.setDefaultUncaughtExceptionHandler( new Thread.UncaughtExceptionHandler() {\r\n         public void uncaughtException( final Thread t, final Throwable e ) {\r\n             ...\r\n         }\r\n\r\nYou may want to look into this:\r\n\r\n     e.getMessage();\r\n\r\n\r\nand this:\r\n\r\n \r\n\r\n    Thread.getAllStackTraces();\r\n\r\n\r\nI&#39;m doing this all the time in an app that is shipped on hundreds of different 1.5 and 1.6 JVM (on different OSes).\r\n\r\n","title":"how to generate thread dump java on out of memory error","body":"<blockquote>\n  <p>How to generate thread dump java on\n  out of memory error?</p>\n</blockquote>\n\n<p>Your question can be simplified into:</p>\n\n<ul>\n<li>how to generate a thread dump</li>\n</ul>\n\n<p>and:</p>\n\n<ul>\n<li>how to catch an out of memory error (don't pay attention to naysayer here, they're missing the bigger picture, see my comment)</li>\n</ul>\n\n<p>So it's actually quite easy, you could do it like this:</p>\n\n<ul>\n<li><p>install a default uncaught exception handler</p></li>\n<li><p>upon catching an uncaught exception, check if you have an OutOfMemoryError</p></li>\n<li><p>if you have an OutOfMemoryError, generate yourself a full thread dump and either ask the user to send it to you by email or offer to send it automatically</p></li>\n</ul>\n\n<p>Bonus: it works fine on 1.5 too :)</p>\n\n<pre><code> Thread.setDefaultUncaughtExceptionHandler( new Thread.UncaughtExceptionHandler() {\n     public void uncaughtException( final Thread t, final Throwable e ) {\n         ...\n     }\n</code></pre>\n\n<p>You may want to look into this:</p>\n\n<pre><code> e.getMessage();\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>Thread.getAllStackTraces();\n</code></pre>\n\n<p>I'm doing this all the time in an app that is shipped on hundreds of different 1.5 and 1.6 JVM (on different OSes).</p>\n"},{"tags":[],"owner":{"account_id":140150,"reputation":1081,"user_id":346247,"display_name":"Jim Bethancourt"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1622563441,"creation_date":1274367919,"answer_id":2875011,"question_id":2787976,"body_markdown":"If you&#39;re in a Linux/Unix environment you can do this:\r\n\r\n    -XX:OnOutOfMemoryError=&quot;kill -3 %p&quot;\r\n\r\nThis way you don&#39;t have to have your application generate periodic thread dumps and you&#39;ll get a snapshot when it actually chokes.\r\n\r\nWith `%p`, you don&#39;t need to pass the PID, JVM will automatically pick the correct process id as [mentioned here][1].\r\n\r\n\r\n  [1]: https://community.oracle.com/tech/developers/discussion/2376398/onoutofmemoryerror","title":"how to generate thread dump java on out of memory error","body":"<p>If you're in a Linux/Unix environment you can do this:</p>\n<pre><code>-XX:OnOutOfMemoryError=&quot;kill -3 %p&quot;\n</code></pre>\n<p>This way you don't have to have your application generate periodic thread dumps and you'll get a snapshot when it actually chokes.</p>\n<p>With <code>%p</code>, you don't need to pass the PID, JVM will automatically pick the correct process id as <a href=\"https://community.oracle.com/tech/developers/discussion/2376398/onoutofmemoryerror\" rel=\"nofollow noreferrer\">mentioned here</a>.</p>\n"},{"tags":[],"owner":{"account_id":491438,"reputation":101,"user_id":1596137,"display_name":"gilesw"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1405601977,"creation_date":1405601977,"answer_id":24804310,"question_id":2787976,"body_markdown":"It&#39;s possible to trigger a thread dump when OnOutOfMemoryError is triggered using jstack. e.g:-\r\n\r\n    jstack -F pid &gt; /var/tmp/&lt;identifier&gt;.dump","title":"how to generate thread dump java on out of memory error","body":"<p>It's possible to trigger a thread dump when OnOutOfMemoryError is triggered using jstack. e.g:-</p>\n\n<pre><code>jstack -F pid &gt; /var/tmp/&lt;identifier&gt;.dump\n</code></pre>\n"},{"tags":[],"owner":{"account_id":416749,"reputation":3159,"user_id":792313,"accept_rate":85,"display_name":"snowindy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418791904,"creation_date":1418791904,"answer_id":27518541,"question_id":2787976,"body_markdown":"Based on the accepted answer I created utility class. This one you can define as a Spring bean and you&#39;re all set with extended logging.\r\n\r\n    import java.util.Iterator;\r\n    import java.util.Map;\r\n     \r\n    import javax.annotation.PostConstruct;\r\n     \r\n    import org.apache.commons.lang3.exception.ExceptionUtils;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n     \r\n    public class UncaughtExceptionLogger {\r\n     \r\n        private final static Logger logger = LoggerFactory.getLogger(UncaughtExceptionLogger.class);\r\n     \r\n        @PostConstruct\r\n        private void init() {\r\n            Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {\r\n                public void uncaughtException(final Thread t, final Throwable e) {\r\n                    String msg = ExceptionUtils.getRootCauseMessage(e);\r\n                    logger.error(String.format(&quot;Uncaght exception handler captured expcetion &#39;%s&#39;&quot;, msg), e);\r\n                    if (msg.contains(&quot;unable to create new native thread&quot;)) {\r\n                        String dump = captureThreadDump();\r\n                        logger.error(String.format(\r\n                                &quot;OutOfMemoryError has been captured for threads limit. Thread dump: \\n %s&quot;, dump), e);\r\n                    }\r\n                    if (ExceptionUtils.getRootCause(e) instanceof OutOfMemoryError) {\r\n                        String dump = captureThreadDump();\r\n                        logger.error(String.format(&quot;OutOfMemoryError has been captured. Thread dump: \\n %s&quot;, dump), e);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n     \r\n        public static String captureThreadDump() {\r\n            /**\r\n             * http://stackoverflow.com/questions/2787976/how-to-generate-thread-\r\n             * dump-java-on-out-of-memory-error\r\n             * http://henryranch.net/software/capturing-a-thread-dump-in-java/\r\n             */\r\n            Map&lt;Thread, StackTraceElement[]&gt; allThreads = Thread.getAllStackTraces();\r\n            Iterator&lt;Thread&gt; iterator = allThreads.keySet().iterator();\r\n            StringBuffer stringBuffer = new StringBuffer();\r\n            while (iterator.hasNext()) {\r\n                Thread key = (Thread) iterator.next();\r\n                StackTraceElement[] trace = (StackTraceElement[]) allThreads.get(key);\r\n                stringBuffer.append(key + &quot;\\r\\n&quot;);\r\n                for (int i = 0; i &lt; trace.length; i++) {\r\n                    stringBuffer.append(&quot; &quot; + trace[i] + &quot;\\r\\n&quot;);\r\n                }\r\n                stringBuffer.append(&quot;&quot;);\r\n            }\r\n            return stringBuffer.toString();\r\n        }\r\n    }","title":"how to generate thread dump java on out of memory error","body":"<p>Based on the accepted answer I created utility class. This one you can define as a Spring bean and you're all set with extended logging.</p>\n\n<pre><code>import java.util.Iterator;\nimport java.util.Map;\n\nimport javax.annotation.PostConstruct;\n\nimport org.apache.commons.lang3.exception.ExceptionUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class UncaughtExceptionLogger {\n\n    private final static Logger logger = LoggerFactory.getLogger(UncaughtExceptionLogger.class);\n\n    @PostConstruct\n    private void init() {\n        Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {\n            public void uncaughtException(final Thread t, final Throwable e) {\n                String msg = ExceptionUtils.getRootCauseMessage(e);\n                logger.error(String.format(\"Uncaght exception handler captured expcetion '%s'\", msg), e);\n                if (msg.contains(\"unable to create new native thread\")) {\n                    String dump = captureThreadDump();\n                    logger.error(String.format(\n                            \"OutOfMemoryError has been captured for threads limit. Thread dump: \\n %s\", dump), e);\n                }\n                if (ExceptionUtils.getRootCause(e) instanceof OutOfMemoryError) {\n                    String dump = captureThreadDump();\n                    logger.error(String.format(\"OutOfMemoryError has been captured. Thread dump: \\n %s\", dump), e);\n                }\n            }\n        });\n    }\n\n    public static String captureThreadDump() {\n        /**\n         * http://stackoverflow.com/questions/2787976/how-to-generate-thread-\n         * dump-java-on-out-of-memory-error\n         * http://henryranch.net/software/capturing-a-thread-dump-in-java/\n         */\n        Map&lt;Thread, StackTraceElement[]&gt; allThreads = Thread.getAllStackTraces();\n        Iterator&lt;Thread&gt; iterator = allThreads.keySet().iterator();\n        StringBuffer stringBuffer = new StringBuffer();\n        while (iterator.hasNext()) {\n            Thread key = (Thread) iterator.next();\n            StackTraceElement[] trace = (StackTraceElement[]) allThreads.get(key);\n            stringBuffer.append(key + \"\\r\\n\");\n            for (int i = 0; i &lt; trace.length; i++) {\n                stringBuffer.append(\" \" + trace[i] + \"\\r\\n\");\n            }\n            stringBuffer.append(\"\");\n        }\n        return stringBuffer.toString();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7105563,"reputation":325,"user_id":6200142,"display_name":"Himadri Mandal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524681174,"creation_date":1524681174,"answer_id":50029139,"question_id":2787976,"body_markdown":"&gt; `-XX:OnOutOfMemoryError=&quot;kill -3 %p&quot;`\r\n\r\nThe JVM argument to take thread dump sadly don&#39;t work.\r\nChild process cannot end SIGQUIT to parent.\r\n\r\nOracle has `-XX:CrashOnOutOfMemoryError` but this is available on Java 8. \r\n\r\n\r\n\r\n\r\n","title":"how to generate thread dump java on out of memory error","body":"<blockquote>\n  <p><code>-XX:OnOutOfMemoryError=\"kill -3 %p\"</code></p>\n</blockquote>\n\n<p>The JVM argument to take thread dump sadly don't work.\nChild process cannot end SIGQUIT to parent.</p>\n\n<p>Oracle has <code>-XX:CrashOnOutOfMemoryError</code> but this is available on Java 8. </p>\n"},{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677142617,"creation_date":1677088259,"answer_id":75536417,"question_id":2787976,"body_markdown":"Assuming that you have a JDK (not a JRE) installed on your target server, you can rely on the command `jcmd` to generate your thread dump, this way it will work whatever the OS of your server.\r\n\r\nThe JVM option defining the command to execute on `OutOfMemoryError` is then:\r\n\r\n    -XX:OnOutOfMemoryError=&quot;jcmd %p Thread.print&quot;\r\n\r\nWhere `%p` designates the current process id\r\n\r\nMoreover, as we could want to have the thread dump into a file, it is possible to have it into the JVM log file by adding the JVM options `-XX:+UnlockDiagnosticVMOptions -XX:+LogVMOutput -XX:LogFile=jvm.log`, this way the heap dump will be available in the file `jvm.log` located in the working directory of the JVM along with other information intended for diagnosing the JVM.\r\n\r\nThe full list of JVM options to add is then:\r\n\r\n```\r\n-XX:OnOutOfMemoryError=&quot;jcmd %p Thread.print&quot; -XX:+UnlockDiagnosticVMOptions\r\n-XX:+LogVMOutput -XX:LogFile=jvm.log\r\n```\r\n\r\nBe aware that the file is always created even when no OOME happens, so on a server, if you want to avoid having the previous JVM file being replaced at the next startup, you should consider adding the process id in the name of the log file like for example `jvm_pid%p.log` but don&#39;t forget to remove the files regularly.\r\n\r\nIf the JVM option `-XX:LogFile` is not set, by default the name of the file is of type `hotspot_pid%p.log` where `%p` designates the current process id.\r\n\r\n---\r\n\r\nIn practice, the only JVM option that is needed is `-XX:+HeapDumpOnOutOfMemoryError` as it allows to generate an `hprof` file when an `OnOutOfMemoryError` occurs which already contains a thread dump.\r\n\r\nSee below how to get a thread dump from an `hprof` file using [VisualVM][1]:\r\n\r\n[![Get Thread Dump from hprof][2]][2]\r\n\r\n\r\n  [1]: https://visualvm.github.io/\r\n  [2]: https://i.stack.imgur.com/UkiZw.gif","title":"how to generate thread dump java on out of memory error","body":"<p>Assuming that you have a JDK (not a JRE) installed on your target server, you can rely on the command <code>jcmd</code> to generate your thread dump, this way it will work whatever the OS of your server.</p>\n<p>The JVM option defining the command to execute on <code>OutOfMemoryError</code> is then:</p>\n<pre><code>-XX:OnOutOfMemoryError=&quot;jcmd %p Thread.print&quot;\n</code></pre>\n<p>Where <code>%p</code> designates the current process id</p>\n<p>Moreover, as we could want to have the thread dump into a file, it is possible to have it into the JVM log file by adding the JVM options <code>-XX:+UnlockDiagnosticVMOptions -XX:+LogVMOutput -XX:LogFile=jvm.log</code>, this way the heap dump will be available in the file <code>jvm.log</code> located in the working directory of the JVM along with other information intended for diagnosing the JVM.</p>\n<p>The full list of JVM options to add is then:</p>\n<pre><code>-XX:OnOutOfMemoryError=&quot;jcmd %p Thread.print&quot; -XX:+UnlockDiagnosticVMOptions\n-XX:+LogVMOutput -XX:LogFile=jvm.log\n</code></pre>\n<p>Be aware that the file is always created even when no OOME happens, so on a server, if you want to avoid having the previous JVM file being replaced at the next startup, you should consider adding the process id in the name of the log file like for example <code>jvm_pid%p.log</code> but don't forget to remove the files regularly.</p>\n<p>If the JVM option <code>-XX:LogFile</code> is not set, by default the name of the file is of type <code>hotspot_pid%p.log</code> where <code>%p</code> designates the current process id.</p>\n<hr />\n<p>In practice, the only JVM option that is needed is <code>-XX:+HeapDumpOnOutOfMemoryError</code> as it allows to generate an <code>hprof</code> file when an <code>OnOutOfMemoryError</code> occurs which already contains a thread dump.</p>\n<p>See below how to get a thread dump from an <code>hprof</code> file using <a href=\"https://visualvm.github.io/\" rel=\"nofollow noreferrer\">VisualVM</a>:</p>\n<p><a href=\"https://i.stack.imgur.com/UkiZw.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UkiZw.gif\" alt=\"Get Thread Dump from hprof\" /></a></p>\n"}],"owner":{"account_id":27280,"reputation":8951,"user_id":71858,"accept_rate":81,"display_name":"Jigar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23452,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":2788423,"answer_count":7,"score":15,"last_activity_date":1677142617,"creation_date":1273229864,"question_id":2787976,"body_markdown":"* does java 6 generate thread dump in addition to heap dump (java_pid14941.hprof) \r\n\r\n* this is what happened to one of my applications.\r\n\r\n    java.lang.OutOfMemoryError: GC overhead limit exceeded\r\n    Dumping heap to java_pid14941.hprof ...\r\n\r\n* I did find ava_pid14941.hprof in working directory, but didn&#39;t find any file which contains thread dump. I need to know what all the threads were doing when I got this OutOfMemory error.\r\n\r\n* Is there any configuration option which will generate thread dump in addition to heap dump on out of memory exception?\r\n\r\n","title":"how to generate thread dump java on out of memory error","body":"<ul>\n<li><p>does java 6 generate thread dump in addition to heap dump (java_pid14941.hprof) </p></li>\n<li><p>this is what happened to one of my applications.</p>\n\n<p>java.lang.OutOfMemoryError: GC overhead limit exceeded\nDumping heap to java_pid14941.hprof ...</p></li>\n<li><p>I did find ava_pid14941.hprof in working directory, but didn't find any file which contains thread dump. I need to know what all the threads were doing when I got this OutOfMemory error.</p></li>\n<li><p>Is there any configuration option which will generate thread dump in addition to heap dump on out of memory exception?</p></li>\n</ul>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1442386109,"post_id":32601392,"comment_id":53055327,"body_markdown":"A thread leak is a resource leak where the resource being leaked is a thread. A thread dump is a way to dump all the information of threads for analysis (such as finding thread leaks).","body":"A thread leak is a resource leak where the resource being leaked is a thread. A thread dump is a way to dump all the information of threads for analysis (such as finding thread leaks)."}],"answers":[{"tags":[],"owner":{"account_id":1626304,"reputation":169369,"user_id":1501794,"accept_rate":72,"display_name":"Rahul Tripathi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1442386111,"creation_date":1442386111,"answer_id":32601516,"question_id":32601392,"body_markdown":"From the [docs][1]:\r\n\r\n&gt; The thread dump is a snapshot of exactly what&#39;s executing at a moment\r\n&gt; in time\r\n\r\nAnd thread leak is when we dont close the thread properly then the number of unused threads grows with time.\r\n\r\n\r\n  [1]: http://www.javasanity.org/understandingthreaddumps","title":"what is Thread Leak and Thread Dump in Java","body":"<p>From the <a href=\"http://www.javasanity.org/understandingthreaddumps\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>The thread dump is a snapshot of exactly what's executing at a moment\n  in time</p>\n</blockquote>\n\n<p>And thread leak is when we dont close the thread properly then the number of unused threads grows with time.</p>\n"}],"owner":{"account_id":3626984,"reputation":138,"user_id":3024314,"display_name":"Mahendra Rathod"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11766,"favorite_count":0,"down_vote_count":3,"up_vote_count":7,"accepted_answer_id":32601516,"answer_count":1,"score":4,"last_activity_date":1677142490,"creation_date":1442385665,"question_id":32601392,"body_markdown":"**Can you please Explain me what is Thread Leak and Thread Dump in Java? \r\n I am just confuse about thread Dump.**\r\n\r\n Let me know the other way of creating thread except Thread class and runnable interface?","title":"what is Thread Leak and Thread Dump in Java","body":"<p><strong>Can you please Explain me what is Thread Leak and Thread Dump in Java? \n I am just confuse about thread Dump.</strong></p>\n\n<p>Let me know the other way of creating thread except Thread class and runnable interface?</p>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":1955112,"reputation":1972,"user_id":1758274,"accept_rate":69,"display_name":"Vignesh Gopalakrishnan"},"score":0,"creation_date":1398792320,"post_id":23368176,"comment_id":35799231,"body_markdown":"Thanks.  I changed to `getS3Client().copyObject(getBucketName(), oldPhotoName, getBucketName(), &quot;vignesh&quot;);`  But now also I am getting same error.  `Status Code: 403, AWS Service: Amazon S3, AWS Request ID: 874B8E8905B026CC, AWS Error Code: AccessDenied, AWS Error Message: Access Denied` Can you please help.","body":"Thanks.  I changed to <code>getS3Client().copyObject(getBucketName(), oldPhotoName, getBucketName(), &quot;vignesh&quot;);</code>  But now also I am getting same error.  <code>Status Code: 403, AWS Service: Amazon S3, AWS Request ID: 874B8E8905B026CC, AWS Error Code: AccessDenied, AWS Error Message: Access Denied</code> Can you please help."},{"owner":{"account_id":2562085,"reputation":4946,"user_id":2223027,"display_name":"pyb"},"score":3,"creation_date":1589550095,"post_id":23368176,"comment_id":109346361,"body_markdown":"Does this answer your question? [How to rename files and folder in Amazon S3?](https://stackoverflow.com/questions/21184720/how-to-rename-files-and-folder-in-amazon-s3)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/21184720/how-to-rename-files-and-folder-in-amazon-s3\">How to rename files and folder in Amazon S3?</a>"}],"answers":[{"tags":[],"owner":{"account_id":143462,"reputation":31666,"user_id":419863,"accept_rate":92,"display_name":"H6_"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1444712017,"creation_date":1439557937,"answer_id":32010957,"question_id":23368176,"body_markdown":"Direct renaming of S3 objects [is not possible][1] \r\n\r\n&gt; Rename objects by copying them and deleting the original ones\r\n\r\nYou can copy and delete using e.g.\r\n\r\n\r\n    CopyObjectRequest copyObjRequest = new CopyObjectRequest(bucketName, \r\n               keyName, bucketName, destinationKeyName);\r\n    s3client.copyObject(copyObjRequest);\r\n    s3client.deleteObject(new DeleteObjectRequest(bucketName, keyName));\r\n\r\n  [1]: http://docs.aws.amazon.com/AmazonS3/latest/dev/CopyingObjectsExamples.html","title":"How to rename a file in Amazon S3 Bucket?","body":"<p>Direct renaming of S3 objects <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/CopyingObjectsExamples.html\" rel=\"noreferrer\">is not possible</a> </p>\n\n<blockquote>\n  <p>Rename objects by copying them and deleting the original ones</p>\n</blockquote>\n\n<p>You can copy and delete using e.g.</p>\n\n<pre><code>CopyObjectRequest copyObjRequest = new CopyObjectRequest(bucketName, \n           keyName, bucketName, destinationKeyName);\ns3client.copyObject(copyObjRequest);\ns3client.deleteObject(new DeleteObjectRequest(bucketName, keyName));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3802879,"reputation":1641,"user_id":3156006,"accept_rate":86,"display_name":"Mateen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1472487916,"creation_date":1472487916,"answer_id":39210871,"question_id":23368176,"body_markdown":"As answered by High6 direct renaming of s3 is not possible, but his code will not copy all the contents\r\n\r\ni have attached a code snippet which will copy all the contents\r\n\r\ncode is working just add your aws access key and secret key\r\n\r\nhere&#39;s what i did in code\r\n\r\n-&gt; copy the source folder contents(nested child and folders) and pasted in the destination folder \r\n\r\n-&gt; when the copying is complete, delete the source folder\r\n\r\n    package com.bighalf.doc.amazon;\r\n\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.InputStream;\r\n    import java.util.List;\r\n\r\n    import com.amazonaws.auth.AWSCredentials;\r\n    import com.amazonaws.auth.BasicAWSCredentials;\r\n    import com.amazonaws.services.s3.AmazonS3;\r\n    import com.amazonaws.services.s3.AmazonS3Client;\r\n    import com.amazonaws.services.s3.model.CopyObjectRequest;\r\n    import com.amazonaws.services.s3.model.ObjectMetadata;\r\n    import com.amazonaws.services.s3.model.PutObjectRequest;\r\n    import com.amazonaws.services.s3.model.S3ObjectSummary;\r\n\r\n    public class Test {\r\n\r\n\tpublic static boolean renameAwsFolder(String bucketName,String keyName,String newName) {\r\n\t\tboolean result = false;\r\n\t\ttry {\r\n\t\t\tAmazonS3 s3client = getAmazonS3ClientObject();\r\n\t\t\tList&lt;S3ObjectSummary&gt; fileList = s3client.listObjects(bucketName, keyName).getObjectSummaries();\r\n\t\t\t//some meta data to create empty folders start\r\n\t\t\tObjectMetadata metadata = new ObjectMetadata();\r\n\t\t\tmetadata.setContentLength(0);\r\n\t\t\tInputStream emptyContent = new ByteArrayInputStream(new byte[0]);\r\n\t\t\t//some meta data to create empty folders end\r\n\t\t\t\r\n\t\t\t//final location is the locaiton where the child folder contents of the existing folder should go\r\n\t\t\tString finalLocation = keyName.substring(0,keyName.lastIndexOf(&#39;/&#39;)+1)+newName;\r\n\t\t\tfor (S3ObjectSummary file : fileList) {\r\n\t\t\t\tString key = file.getKey();\r\n\t\t\t\t//updating child folder location with the newlocation\r\n\t\t\t\tString destinationKeyName = key.replace(keyName,finalLocation);\r\n\t\t\t\tif(key.charAt(key.length()-1)==&#39;/&#39;){\r\n\t\t\t\t\t//if name ends with suffix (/) means its a folders\r\n\t\t\t\t\tPutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, destinationKeyName, emptyContent, metadata);\r\n\t\t\t\t\ts3client.putObject(putObjectRequest);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//if name doesnot ends with suffix (/) means its a file\r\n\t\t\t\t\tCopyObjectRequest copyObjRequest = new CopyObjectRequest(bucketName, \r\n\t\t\t\t\t\t\tfile.getKey(), bucketName, destinationKeyName);\r\n\t\t\t\t\ts3client.copyObject(copyObjRequest);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tboolean isFodlerDeleted = deleteFolderFromAws(bucketName, keyName);\r\n\t\t\treturn isFodlerDeleted;\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\tpublic static boolean deleteFolderFromAws(String bucketName, String keyName) {\r\n\t\tboolean result = false;\r\n\t\ttry {\r\n\t\t\tAmazonS3 s3client = getAmazonS3ClientObject();\r\n\t\t\t//deleting folder children\r\n\t\t\tList&lt;S3ObjectSummary&gt; fileList = s3client.listObjects(bucketName, keyName).getObjectSummaries();\r\n\t\t\tfor (S3ObjectSummary file : fileList) {\r\n\t\t\t\ts3client.deleteObject(bucketName, file.getKey());\r\n\t\t\t}\r\n\t\t\t//deleting actual passed folder\r\n\t\t\ts3client.deleteObject(bucketName, keyName);\r\n\t\t\tresult = true;\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tintializeAmazonObjects();\r\n\t\tboolean result = renameAwsFolder(bucketName, keyName, newName);\r\n\t\tSystem.out.println(result);\r\n\t}\r\n\t\r\n\tprivate static AWSCredentials credentials = null;\r\n\tprivate static AmazonS3 amazonS3Client = null;\r\n\tprivate static final String ACCESS_KEY = &quot;&quot;;\r\n\tprivate static final String SECRET_ACCESS_KEY = &quot;&quot;;\r\n\tprivate static final String bucketName = &quot;&quot;;\r\n\tprivate static final String keyName = &quot;&quot;;\r\n\t//renaming folder c to x from key name\r\n\tprivate static final String newName = &quot;&quot;;\r\n\t\r\n\tpublic static void intializeAmazonObjects() {\r\n\t\tcredentials = new BasicAWSCredentials(ACCESS_KEY, SECRET_ACCESS_KEY);\r\n\t\tamazonS3Client = new AmazonS3Client(credentials);\r\n\t}\r\n\r\n\tpublic static AmazonS3 getAmazonS3ClientObject() {\r\n\t\treturn amazonS3Client;\r\n\t}\r\n\r\n}\r\n","title":"How to rename a file in Amazon S3 Bucket?","body":"<p>As answered by High6 direct renaming of s3 is not possible, but his code will not copy all the contents</p>\n\n<p>i have attached a code snippet which will copy all the contents</p>\n\n<p>code is working just add your aws access key and secret key</p>\n\n<p>here's what i did in code</p>\n\n<p>-> copy the source folder contents(nested child and folders) and pasted in the destination folder </p>\n\n<p>-> when the copying is complete, delete the source folder</p>\n\n<pre><code>package com.bighalf.doc.amazon;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.InputStream;\nimport java.util.List;\n\nimport com.amazonaws.auth.AWSCredentials;\nimport com.amazonaws.auth.BasicAWSCredentials;\nimport com.amazonaws.services.s3.AmazonS3;\nimport com.amazonaws.services.s3.AmazonS3Client;\nimport com.amazonaws.services.s3.model.CopyObjectRequest;\nimport com.amazonaws.services.s3.model.ObjectMetadata;\nimport com.amazonaws.services.s3.model.PutObjectRequest;\nimport com.amazonaws.services.s3.model.S3ObjectSummary;\n\npublic class Test {\n\npublic static boolean renameAwsFolder(String bucketName,String keyName,String newName) {\n    boolean result = false;\n    try {\n        AmazonS3 s3client = getAmazonS3ClientObject();\n        List&lt;S3ObjectSummary&gt; fileList = s3client.listObjects(bucketName, keyName).getObjectSummaries();\n        //some meta data to create empty folders start\n        ObjectMetadata metadata = new ObjectMetadata();\n        metadata.setContentLength(0);\n        InputStream emptyContent = new ByteArrayInputStream(new byte[0]);\n        //some meta data to create empty folders end\n\n        //final location is the locaiton where the child folder contents of the existing folder should go\n        String finalLocation = keyName.substring(0,keyName.lastIndexOf('/')+1)+newName;\n        for (S3ObjectSummary file : fileList) {\n            String key = file.getKey();\n            //updating child folder location with the newlocation\n            String destinationKeyName = key.replace(keyName,finalLocation);\n            if(key.charAt(key.length()-1)=='/'){\n                //if name ends with suffix (/) means its a folders\n                PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, destinationKeyName, emptyContent, metadata);\n                s3client.putObject(putObjectRequest);\n            }else{\n                //if name doesnot ends with suffix (/) means its a file\n                CopyObjectRequest copyObjRequest = new CopyObjectRequest(bucketName, \n                        file.getKey(), bucketName, destinationKeyName);\n                s3client.copyObject(copyObjRequest);\n            }\n        }\n        boolean isFodlerDeleted = deleteFolderFromAws(bucketName, keyName);\n        return isFodlerDeleted;\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return result;\n}\n\npublic static boolean deleteFolderFromAws(String bucketName, String keyName) {\n    boolean result = false;\n    try {\n        AmazonS3 s3client = getAmazonS3ClientObject();\n        //deleting folder children\n        List&lt;S3ObjectSummary&gt; fileList = s3client.listObjects(bucketName, keyName).getObjectSummaries();\n        for (S3ObjectSummary file : fileList) {\n            s3client.deleteObject(bucketName, file.getKey());\n        }\n        //deleting actual passed folder\n        s3client.deleteObject(bucketName, keyName);\n        result = true;\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return result;\n}\n\npublic static void main(String[] args) {\n    intializeAmazonObjects();\n    boolean result = renameAwsFolder(bucketName, keyName, newName);\n    System.out.println(result);\n}\n\nprivate static AWSCredentials credentials = null;\nprivate static AmazonS3 amazonS3Client = null;\nprivate static final String ACCESS_KEY = \"\";\nprivate static final String SECRET_ACCESS_KEY = \"\";\nprivate static final String bucketName = \"\";\nprivate static final String keyName = \"\";\n//renaming folder c to x from key name\nprivate static final String newName = \"\";\n\npublic static void intializeAmazonObjects() {\n    credentials = new BasicAWSCredentials(ACCESS_KEY, SECRET_ACCESS_KEY);\n    amazonS3Client = new AmazonS3Client(credentials);\n}\n\npublic static AmazonS3 getAmazonS3ClientObject() {\n    return amazonS3Client;\n}\n</code></pre>\n\n<p>}</p>\n"}],"owner":{"account_id":1955112,"reputation":1972,"user_id":1758274,"accept_rate":69,"display_name":"Vignesh Gopalakrishnan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24808,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"closed_date":1589577374,"answer_count":2,"score":17,"last_activity_date":1677142314,"creation_date":1398783221,"question_id":23368176,"body_markdown":"I am trying to rename a file in S3 Bucket.  Here is a code snippet\r\n\r\n        S3Object s3Obj  = getS3Client().getObject(new GetObjectRequest(getBucketName(), fileName));\t \r\n    //Error in Above Line itself\t\t\t\r\n        getS3Client().putObject(getBucketName(), newFileName, s3Obj.getObjectContent(), s3Obj.getObjectMetadata());\r\n\r\n    private AmazonS3 getS3Client(){\r\n    \t\tAWSCredentials myCredentials = new BasicAWSCredentials(AccessKey,SecretKey);\r\n    \t\tAmazonS3 s3client = new AmazonS3Client(myCredentials);\r\n    \t\treturn s3client;\r\n    }\r\nSo, I am getting this error,\r\n\r\nDEBUG [main] request.handleErrorResponse(748) | Received error response: com.amazonaws.services.s3.model.AmazonS3Exception: Status Code: 403, AWS Service: null, AWS Request ID: AD2F31F1133A650E, AWS Error Code: AccessDenied.\r\n\r\nI am unable to get the s3object itself.  Any suggestions or ideas how I will get S3 Object and rename it.\r\nThanks in Anticipation for you help.","title":"How to rename a file in Amazon S3 Bucket?","body":"<p>I am trying to rename a file in S3 Bucket.  Here is a code snippet</p>\n\n<pre><code>    S3Object s3Obj  = getS3Client().getObject(new GetObjectRequest(getBucketName(), fileName));  \n//Error in Above Line itself            \n    getS3Client().putObject(getBucketName(), newFileName, s3Obj.getObjectContent(), s3Obj.getObjectMetadata());\n\nprivate AmazonS3 getS3Client(){\n        AWSCredentials myCredentials = new BasicAWSCredentials(AccessKey,SecretKey);\n        AmazonS3 s3client = new AmazonS3Client(myCredentials);\n        return s3client;\n}\n</code></pre>\n\n<p>So, I am getting this error,</p>\n\n<p>DEBUG [main] request.handleErrorResponse(748) | Received error response: com.amazonaws.services.s3.model.AmazonS3Exception: Status Code: 403, AWS Service: null, AWS Request ID: AD2F31F1133A650E, AWS Error Code: AccessDenied.</p>\n\n<p>I am unable to get the s3object itself.  Any suggestions or ideas how I will get S3 Object and rename it.\nThanks in Anticipation for you help.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9368,"page":624,"page_size":100}
