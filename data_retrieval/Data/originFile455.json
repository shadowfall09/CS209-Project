{"items":[{"tags":["java","slf4j","logback","java.util.logging"],"answers":[{"comments":[{"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"score":2,"creation_date":1328207156,"post_id":9117188,"comment_id":11456167,"body_markdown":"Interesting, I was under the impression that having the bridge in the classpath was enough. Is this only necessary for JUL?","body":"Interesting, I was under the impression that having the bridge in the classpath was enough. Is this only necessary for JUL?"},{"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"score":8,"creation_date":1328213985,"post_id":9117188,"comment_id":11458608,"body_markdown":"Yes. The reason is that the jul-to-slf4j bridge cannot replace classes in the `java.util.logging` package to do the redirection statically as it does for the other bridge implementations. Instead it has to register a handler on the root logger and listen for logging statements like any other handler. It will then redirect those logging statements.","body":"Yes. The reason is that the jul-to-slf4j bridge cannot replace classes in the <code>java.util.logging</code> package to do the redirection statically as it does for the other bridge implementations. Instead it has to register a handler on the root logger and listen for logging statements like any other handler. It will then redirect those logging statements."},{"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"score":0,"creation_date":1328223754,"post_id":9117188,"comment_id":11461866,"body_markdown":"The performance concerns are pretty bad. Makes me lean towards not using the bridge.","body":"The performance concerns are pretty bad. Makes me lean towards not using the bridge."},{"owner":{"account_id":377479,"reputation":18737,"user_id":729627,"accept_rate":94,"display_name":"wberry"},"score":4,"creation_date":1328714811,"post_id":9117188,"comment_id":11573223,"body_markdown":"I found that if any part of the application creates JUL Logger objects, for example in static initializers, before this procedure is executed, their log levels are not changed.","body":"I found that if any part of the application creates JUL Logger objects, for example in static initializers, before this procedure is executed, their log levels are not changed."},{"owner":{"account_id":149396,"reputation":11779,"user_id":361855,"accept_rate":58,"display_name":"Jason"},"score":4,"creation_date":1404418974,"post_id":9117188,"comment_id":38044555,"body_markdown":"The LevelChangePropagator addresses performance issues if you use Logback: http://logback.qos.ch/manual/configuration.html#LevelChangePropagator","body":"The LevelChangePropagator addresses performance issues if you use Logback: <a href=\"http://logback.qos.ch/manual/configuration.html#LevelChangePropagator\" rel=\"nofollow noreferrer\">logback.qos.ch/manual/configuration.html#LevelChangePropagat&zwnj;&#8203;or</a>"},{"owner":{"account_id":399098,"reputation":10383,"user_id":764206,"display_name":"Nikita Koksharov"},"score":0,"creation_date":1430384271,"post_id":9117188,"comment_id":48046863,"body_markdown":"In my case `Logger.getLogger(&lt;concrete log package or class&gt;).setLevel(Level.FINEST)` helps instead of `Logger.getLogger(&quot;global&quot;).setLevel(Level.FINEST);`","body":"In my case <code>Logger.getLogger(&lt;concrete log package or class&gt;).setLevel(Level.FINEST)</code> helps instead of <code>Logger.getLogger(&quot;global&quot;).setLevel(Level.FINEST);</code>"},{"owner":{"account_id":1045743,"reputation":4323,"user_id":1050766,"accept_rate":64,"display_name":"Muel"},"score":4,"creation_date":1432586466,"post_id":9117188,"comment_id":48973467,"body_markdown":"As of Java 1.7, `Logger.getLogger(&quot;global&quot;)` can be replaced with `Logger.getGlobal()` - marginally more convenient!","body":"As of Java 1.7, <code>Logger.getLogger(&quot;global&quot;)</code> can be replaced with <code>Logger.getGlobal()</code> - marginally more convenient!"},{"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"score":0,"creation_date":1491431082,"post_id":9117188,"comment_id":73555395,"body_markdown":"Or replace Logger.getLogger(&quot;global&quot;) to Logger.getLogger(&quot;&quot;)","body":"Or replace Logger.getLogger(&quot;global&quot;) to Logger.getLogger(&quot;&quot;)"},{"owner":{"account_id":449372,"reputation":777,"user_id":844123,"accept_rate":83,"display_name":"doc"},"score":0,"creation_date":1562664869,"post_id":9117188,"comment_id":100438074,"body_markdown":"@Jason the level change propagator negates the need for the last line, right? Logger.getLogger(&quot;&quot;).setLevel(Level.FINEST)","body":"@Jason the level change propagator negates the need for the last line, right? Logger.getLogger(&quot;&quot;).setLevel(Level.FINEST)"}],"tags":[],"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"comment_count":9,"down_vote_count":0,"up_vote_count":126,"is_accepted":true,"score":126,"last_activity_date":1519967595,"creation_date":1328204651,"answer_id":9117188,"question_id":9117030,"body_markdown":"You need to call [`SLF4JBridgeHandler.install()`][1]. You also need to enable all log levels at the root logger (reason in excerpt below) in java.util.logging and remove the default console appender.\r\n\r\n&gt; This handler will redirect jul logging to SLF4J. However, only logs\r\n&gt; enabled in j.u.l. will be redirected. For example, if a log statement\r\n&gt; invoking a j.u.l. logger disabled that statement, by definition, will\r\n&gt; not reach any SLF4JBridgeHandler instance and cannot be redirected.\r\n\r\nThe whole process can be accomplished like so\r\n\r\n    import java.util.logging.Logger;\r\n    import org.slf4j.bridge.SLF4JBridgeHandler;\r\n\r\n    SLF4JBridgeHandler.removeHandlersForRootLogger();\r\n    SLF4JBridgeHandler.install();\r\n    Logger.getLogger(&quot;&quot;).setLevel(Level.FINEST); // Root logger, for example.\r\n\r\nYou can set the level to something higher than finest for performance reasons, but you won&#39;t be able to turn those logs on without enabling them in `java.util.logging` first (for the reason mentioned above in the excerpt).\r\n\r\n\r\n  [1]: http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html","title":"JUL to SLF4J Bridge","body":"<p>You need to call <a href=\"http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html\" rel=\"noreferrer\"><code>SLF4JBridgeHandler.install()</code></a>. You also need to enable all log levels at the root logger (reason in excerpt below) in java.util.logging and remove the default console appender.</p>\n\n<blockquote>\n  <p>This handler will redirect jul logging to SLF4J. However, only logs\n  enabled in j.u.l. will be redirected. For example, if a log statement\n  invoking a j.u.l. logger disabled that statement, by definition, will\n  not reach any SLF4JBridgeHandler instance and cannot be redirected.</p>\n</blockquote>\n\n<p>The whole process can be accomplished like so</p>\n\n<pre><code>import java.util.logging.Logger;\nimport org.slf4j.bridge.SLF4JBridgeHandler;\n\nSLF4JBridgeHandler.removeHandlersForRootLogger();\nSLF4JBridgeHandler.install();\nLogger.getLogger(\"\").setLevel(Level.FINEST); // Root logger, for example.\n</code></pre>\n\n<p>You can set the level to something higher than finest for performance reasons, but you won't be able to turn those logs on without enabling them in <code>java.util.logging</code> first (for the reason mentioned above in the excerpt).</p>\n"},{"comments":[{"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"score":3,"creation_date":1361486766,"post_id":11245040,"comment_id":21093508,"body_markdown":"Have you ever seen instances where java.lang.ClassNotFoundException: org.slf4j.bridge.SLF4JBridgeHandler happens even though the SLF4JBridgeHandler does exist on the classpath? I seem to get this when I use -Djava.util.logging.config.file= to specify the logging.properties file.","body":"Have you ever seen instances where java.lang.ClassNotFoundException: org.slf4j.bridge.SLF4JBridgeHandler happens even though the SLF4JBridgeHandler does exist on the classpath? I seem to get this when I use -Djava.util.logging.config.file= to specify the logging.properties file."},{"owner":{"account_id":252032,"reputation":1641,"user_id":529793,"accept_rate":95,"display_name":"Dexter"},"score":0,"creation_date":1369059219,"post_id":11245040,"comment_id":23950997,"body_markdown":"@TaylorLeese .. I am facing the same issue currently, could you please let me know if you found a way to fix that? Look into this SO for more info.. http://stackoverflow.com/questions/16472801/handler-error-in-slf4jbridgehandler-in-tomcat-logs","body":"@TaylorLeese .. I am facing the same issue currently, could you please let me know if you found a way to fix that? Look into this SO for more info.. <a href=\"http://stackoverflow.com/questions/16472801/handler-error-in-slf4jbridgehandler-in-tomcat-logs\" title=\"handler error in slf4jbridgehandler in tomcat logs\">stackoverflow.com/questions/16472801/&hellip;</a>"},{"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"score":0,"creation_date":1369211385,"post_id":11245040,"comment_id":24014078,"body_markdown":"@Dexter The only workaround I found was initializing the bridge in code rather than via the property file.","body":"@Dexter The only workaround I found was initializing the bridge in code rather than via the property file."},{"owner":{"account_id":252032,"reputation":1641,"user_id":529793,"accept_rate":95,"display_name":"Dexter"},"score":1,"creation_date":1369342456,"post_id":11245040,"comment_id":24079732,"body_markdown":"@TaylorLeese.. thanks! But how do I configure tomcat so that it doesnt log its default format during startup? Could you check the SO link http://stackoverflow.com/questions/16472801/handler-error-in-slf4jbridgehandler-in-tomcat-logs  I think your comments might be helpful for me to solve this issue. Thanks!","body":"@TaylorLeese.. thanks! But how do I configure tomcat so that it doesnt log its default format during startup? Could you check the SO link <a href=\"http://stackoverflow.com/questions/16472801/handler-error-in-slf4jbridgehandler-in-tomcat-logs\" title=\"handler error in slf4jbridgehandler in tomcat logs\">stackoverflow.com/questions/16472801/&hellip;</a>  I think your comments might be helpful for me to solve this issue. Thanks!"},{"owner":{"account_id":936963,"reputation":5575,"user_id":965730,"accept_rate":82,"display_name":"Hendrik Jander"},"score":1,"creation_date":1547157167,"post_id":11245040,"comment_id":95106393,"body_markdown":"would&#39;nt it be nice if there was something like a maven dependency that contains a ready configured logging.properties and the Bridge ? SO you could add it  for example to maven-plugin depedencies section where you have no access otherwise","body":"would&#39;nt it be nice if there was something like a maven dependency that contains a ready configured logging.properties and the Bridge ? SO you could add it  for example to maven-plugin depedencies section where you have no access otherwise"}],"tags":[],"owner":{"account_id":35628,"reputation":26827,"user_id":100970,"display_name":"Ceki"},"comment_count":5,"down_vote_count":1,"up_vote_count":49,"is_accepted":false,"score":48,"last_activity_date":1340887773,"creation_date":1340887773,"answer_id":11245040,"question_id":9117030,"body_markdown":"As mentioned in the javadocs for [SLF4JBridgeHandler][1], you get either install SLF4JBridgeHandler programmatically by invoking:\r\n\r\n     // Optionally remove existing handlers attached to j.u.l root logger\r\n     SLF4JBridgeHandler.removeHandlersForRootLogger();  // (since SLF4J 1.6.5)\r\n    \r\n     // add SLF4JBridgeHandler to j.u.l&#39;s root logger, should be done once during\r\n     // the initialization phase of your application\r\n     SLF4JBridgeHandler.install();\r\n\r\nor via logging.properties\r\n\r\n     // register SLF4JBridgeHandler as handler for the j.u.l. root logger\r\n     handlers = org.slf4j.bridge.SLF4JBridgeHandler\r\n\r\nAs for performance, the section on [jul-to-slf4j][2] bridge discusses this issue. In essence, since you are already using logback, enabling the [LevelChangePropagator][3] should yield good performance regardless of the load.\r\n\r\n\r\n  [1]: http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html\r\n  [2]: http://www.slf4j.org/legacy.html#jul-to-slf4j\r\n  [3]: http://logback.qos.ch/manual/configuration.html#LevelChangePropagator","title":"JUL to SLF4J Bridge","body":"<p>As mentioned in the javadocs for <a href=\"http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html\" rel=\"noreferrer\">SLF4JBridgeHandler</a>, you get either install SLF4JBridgeHandler programmatically by invoking:</p>\n\n<pre><code> // Optionally remove existing handlers attached to j.u.l root logger\n SLF4JBridgeHandler.removeHandlersForRootLogger();  // (since SLF4J 1.6.5)\n\n // add SLF4JBridgeHandler to j.u.l's root logger, should be done once during\n // the initialization phase of your application\n SLF4JBridgeHandler.install();\n</code></pre>\n\n<p>or via logging.properties</p>\n\n<pre><code> // register SLF4JBridgeHandler as handler for the j.u.l. root logger\n handlers = org.slf4j.bridge.SLF4JBridgeHandler\n</code></pre>\n\n<p>As for performance, the section on <a href=\"http://www.slf4j.org/legacy.html#jul-to-slf4j\" rel=\"noreferrer\">jul-to-slf4j</a> bridge discusses this issue. In essence, since you are already using logback, enabling the <a href=\"http://logback.qos.ch/manual/configuration.html#LevelChangePropagator\" rel=\"noreferrer\">LevelChangePropagator</a> should yield good performance regardless of the load.</p>\n"},{"tags":[],"owner":{"account_id":2606286,"reputation":683,"user_id":2257397,"accept_rate":38,"display_name":"Benjamin Fuentes"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1388740947,"creation_date":1388740947,"answer_id":20900301,"question_id":9117030,"body_markdown":"My solution :\r\n\r\n    SLF4JBridgeHandler.install();\r\n    java.util.logging.LogManager.getLogManager().getLogger(&quot;&quot;).setLevel( Level.INFO);\r\n\t\r\n\r\nplacing jul-to-slf4j on your app libs or glassfish libs, these redirect JUL to SLF4J (and thus in my case to LOG4J)\r\n\r\nthen for Jersey, you could do something like :\r\n\r\n    &lt;logger name=&quot;com.sun.jersey&quot; additivity=&quot;false&quot;&gt;\r\n    \t&lt;level value=&quot;WARN&quot; /&gt;\r\n    \t&lt;appender-ref ref=&quot;JVM&quot; /&gt;\r\n    \t&lt;appender-ref ref=&quot;CONSOLE&quot; /&gt;\r\n    &lt;/logger&gt;\t\r\n    \r\n    &lt;logger name=&quot;com.sun.common.util.logging&quot; additivity=&quot;false&quot;&gt;\r\n    \t&lt;level value=&quot;ERROR&quot; /&gt;\r\n    \t&lt;appender-ref ref=&quot;JVM&quot; /&gt;\r\n    \t&lt;appender-ref ref=&quot;CONSOLE&quot; /&gt;\r\n    &lt;/logger&gt;\r\n\r\nthe last config is to avoid to be polluted by other loggers","title":"JUL to SLF4J Bridge","body":"<p>My solution :</p>\n\n<pre><code>SLF4JBridgeHandler.install();\njava.util.logging.LogManager.getLogManager().getLogger(\"\").setLevel( Level.INFO);\n</code></pre>\n\n<p>placing jul-to-slf4j on your app libs or glassfish libs, these redirect JUL to SLF4J (and thus in my case to LOG4J)</p>\n\n<p>then for Jersey, you could do something like :</p>\n\n<pre><code>&lt;logger name=\"com.sun.jersey\" additivity=\"false\"&gt;\n    &lt;level value=\"WARN\" /&gt;\n    &lt;appender-ref ref=\"JVM\" /&gt;\n    &lt;appender-ref ref=\"CONSOLE\" /&gt;\n&lt;/logger&gt;   \n\n&lt;logger name=\"com.sun.common.util.logging\" additivity=\"false\"&gt;\n    &lt;level value=\"ERROR\" /&gt;\n    &lt;appender-ref ref=\"JVM\" /&gt;\n    &lt;appender-ref ref=\"CONSOLE\" /&gt;\n&lt;/logger&gt;\n</code></pre>\n\n<p>the last config is to avoid to be polluted by other loggers</p>\n"},{"comments":[{"owner":{"account_id":1144755,"reputation":1415,"user_id":1127772,"display_name":"Carlos Saltos"},"score":1,"creation_date":1593160332,"post_id":27944521,"comment_id":110688176,"body_markdown":"You are amazing !! ... thank you, this configuration is really cool !! ;) :)","body":"You are amazing !! ... thank you, this configuration is really cool !! ;) :)"}],"tags":[],"owner":{"account_id":2161934,"reputation":4386,"user_id":1915920,"accept_rate":97,"display_name":"Andreas Covidiot"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1594024340,"creation_date":1421243456,"answer_id":27944521,"question_id":9117030,"body_markdown":"Solution that seems nice (considering the circumstances with the JUL bridging) and works for me, since I **only have to write everything in the *logback.groovy* file**.\r\n\r\n1. (**If you are not using *logback.groovy* configuration or *logback* at all**, of course you have to **put the logic part into some class (e.g. like `class MyApp { static { /* log init code here */ } ... }`)**.)\r\n\r\n2. **src/logback.groovy**:\r\n\r\n\t\timport org.slf4j.bridge.SLF4JBridgeHandler\r\n\t\timport ch.qos.logback.classic.jul.LevelChangePropagator\r\n\t\t\r\n        // for debug: just to see it in case something is logging/initialized before\r\n\t\tSystem.out.println( &#39;my myapp logback.groovy is loading&#39; )\r\n\t\t\r\n\t\t// see also: http://logback.qos.ch/manual/configuration.html#LevelChangePropagator\r\n\t\t// performance speedup for redirected JUL loggers\r\n\t\tdef lcp = new LevelChangePropagator()\r\n\t\tlcp.context = context\r\n\t\tlcp.resetJUL = true\r\n\t\tcontext.addListener(lcp)\r\n\t\t\r\n\t\t// needed only for the JUL bridge: http://stackoverflow.com/a/9117188/1915920\r\n\t\tjava.util.logging.LogManager.getLogManager().reset()\r\n\t\tSLF4JBridgeHandler.removeHandlersForRootLogger()\r\n\t\tSLF4JBridgeHandler.install()\r\n\t\tjava.util.logging.Logger.getLogger( &quot;global&quot; ).setLevel( java.util.logging.Level.FINEST )\r\n\t\t\r\n\t\tdef logPattern = &quot;%date |%.-1level| [%thread] %20.20logger{10}|  %msg%n&quot;\r\n\t\t\r\n\t\tappender(&quot;STDOUT&quot;, ConsoleAppender) {\r\n\t\t\tencoder(PatternLayoutEncoder) {\r\n\t\t\t\tpattern = logPattern\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/*// outcommenting in dev will not create dummy empty file\r\n\t\tappender(&quot;ROLLING&quot;, RollingFileAppender) {  // prod\r\n\t\t\tencoder(PatternLayoutEncoder) {\r\n\t\t\t\tPattern = &quot;%date %.-1level [%thread] %20.20logger{10}  %msg%n&quot;\r\n\t\t\t}\r\n\t\t\trollingPolicy(TimeBasedRollingPolicy) {\r\n\t\t\t\tFileNamePattern = &quot;${WEBAPP_DIR}/log/orgv-fst-gwt-%d{yyyy-MM-dd}.zip&quot;\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\t\r\n\t\tappender(&quot;FILE&quot;, FileAppender) {  // dev\r\n\t\t\t\r\n\t\t\t// log to myapp/tmp (independent of running in dev/prod or junit mode:\r\n\t\t\t\r\n\t\t\t//System.out.println( &#39;DEBUG: WEBAPP_DIR env prop:  &quot;.&quot;=&#39;+new File(&#39;.&#39;).absolutePath+&#39;,  \\${WEBAPP_DIR}=${WEBAPP_DIR},  env=&#39; + System.getProperty( &quot;WEBAPP_DIR&quot; ))\r\n\t\t\tString webappDirName = &quot;war&quot;\r\n\t\t\tif ( new File( &quot;./../&quot;+webappDirName ).exists() )  // we are not running within a junit test\r\n\t\t\t\tfile = &quot;../tmp/myapp.log&quot;\r\n\t\t\telse  // junit test\r\n\t\t\t\tfile = &quot;tmp/myapp-junit-tests.log&quot;\r\n\t\t\t\t\r\n\t\t\tencoder(PatternLayoutEncoder) {\tpattern = logPattern }\r\n\t\t}\r\n\t\t\r\n\t\t// without JUL bridge:\r\n\t\t//root(WARN, [&quot;STDOUT&quot;, &quot;ROLLING&quot;])  // prod\r\n\t\t//root(DEBUG, [&quot;STDOUT&quot;, &quot;FILE&quot;])  // dev\r\n\t\t\r\n\t\t// with JUL bridge: (workaround: see links above)\r\n\t\tdef rootLvl = WARN\r\n\t\troot(TRACE, [/*&quot;STDOUT&quot;,*/ &quot;FILE&quot;])\r\n        // I manually added all &quot;root package dirs&quot; I know my libs are based on to apply\r\n        // the root level to the second &quot;package dir level&quot; at least\r\n        // depending on your libs used you could remove entries, but I would recommend\r\n        // to add common entries instead (feel free to edit this post if you like to\r\n        // enhance it anywhere)\r\n\t\tlogger( &quot;antlr&quot;, rootLvl )\r\n\t\tlogger( &quot;de&quot;, rootLvl )\r\n\t\tlogger( &quot;ch&quot;, rootLvl )\r\n\t\tlogger( &quot;com&quot;, rootLvl )\r\n\t\tlogger( &quot;java&quot;, rootLvl )\r\n\t\tlogger( &quot;javassist&quot;, rootLvl )\r\n\t\tlogger( &quot;javax&quot;, rootLvl )\r\n\t\tlogger( &quot;junit&quot;, rootLvl )\r\n\t\tlogger( &quot;groovy&quot;, rootLvl )\r\n\t\tlogger( &quot;net&quot;, rootLvl )\r\n\t\tlogger( &quot;org&quot;, rootLvl )\r\n\t\tlogger( &quot;sun&quot;, rootLvl )\r\n\t\t\r\n\t\t\r\n\t\t// my logger setup\r\n\t\t\r\n\t\tlogger( &quot;myapp&quot;, DEBUG )\r\n\t\t\r\n\t\t\r\n\t\t//logger( &quot;org.hibernate.SQL&quot;, DEBUG )  // debug: log SQL statements in DEBUG mode\r\n\t\t//logger( &quot;org.hibernate.type&quot;, TRACE )  // debug: log JDBC parameters in TRACE mode\r\n\t\tlogger( &quot;org.hibernate.type.BasicTypeRegistry&quot;, WARN )  // uninteresting\r\n\t\t\r\n\t\tscan(&quot;30 seconds&quot;)  // reload/apply-on-change config every x sec\r\n\r\n(recommended to be used by me since you can react with Java code vars/functions as you can see in here with, e.g. *SLF4JBridgeHandler* or the log dir regarding *webappDirName*)\r\n\r\n(left the file complete since it gives a better impression how everything can be setup or as a starting template)\r\n\r\n(may be relevant to somebody - my env: *slf4j 1.7.5, logback 1.1.2, groovy 2.1.9*)","title":"JUL to SLF4J Bridge","body":"<p>Solution that seems nice (considering the circumstances with the JUL bridging) and works for me, since I <strong>only have to write everything in the <em>logback.groovy</em> file</strong>.</p>\n<ol>\n<li><p>(<strong>If you are not using <em>logback.groovy</em> configuration or <em>logback</em> at all</strong>, of course you have to <strong>put the logic part into some class (e.g. like <code>class MyApp { static { /* log init code here */ } ... }</code>)</strong>.)</p>\n</li>\n<li><p><strong>src/logback.groovy</strong>:</p>\n<pre><code> import org.slf4j.bridge.SLF4JBridgeHandler\n import ch.qos.logback.classic.jul.LevelChangePropagator\n\n // for debug: just to see it in case something is logging/initialized before\n System.out.println( 'my myapp logback.groovy is loading' )\n\n // see also: http://logback.qos.ch/manual/configuration.html#LevelChangePropagator\n // performance speedup for redirected JUL loggers\n def lcp = new LevelChangePropagator()\n lcp.context = context\n lcp.resetJUL = true\n context.addListener(lcp)\n\n // needed only for the JUL bridge: http://stackoverflow.com/a/9117188/1915920\n java.util.logging.LogManager.getLogManager().reset()\n SLF4JBridgeHandler.removeHandlersForRootLogger()\n SLF4JBridgeHandler.install()\n java.util.logging.Logger.getLogger( &quot;global&quot; ).setLevel( java.util.logging.Level.FINEST )\n\n def logPattern = &quot;%date |%.-1level| [%thread] %20.20logger{10}|  %msg%n&quot;\n\n appender(&quot;STDOUT&quot;, ConsoleAppender) {\n     encoder(PatternLayoutEncoder) {\n         pattern = logPattern\n     }\n }\n\n /*// outcommenting in dev will not create dummy empty file\n appender(&quot;ROLLING&quot;, RollingFileAppender) {  // prod\n     encoder(PatternLayoutEncoder) {\n         Pattern = &quot;%date %.-1level [%thread] %20.20logger{10}  %msg%n&quot;\n     }\n     rollingPolicy(TimeBasedRollingPolicy) {\n         FileNamePattern = &quot;${WEBAPP_DIR}/log/orgv-fst-gwt-%d{yyyy-MM-dd}.zip&quot;\n     }\n }\n */\n\n appender(&quot;FILE&quot;, FileAppender) {  // dev\n\n     // log to myapp/tmp (independent of running in dev/prod or junit mode:\n\n     //System.out.println( 'DEBUG: WEBAPP_DIR env prop:  &quot;.&quot;='+new File('.').absolutePath+',  \\${WEBAPP_DIR}=${WEBAPP_DIR},  env=' + System.getProperty( &quot;WEBAPP_DIR&quot; ))\n     String webappDirName = &quot;war&quot;\n     if ( new File( &quot;./../&quot;+webappDirName ).exists() )  // we are not running within a junit test\n         file = &quot;../tmp/myapp.log&quot;\n     else  // junit test\n         file = &quot;tmp/myapp-junit-tests.log&quot;\n\n     encoder(PatternLayoutEncoder) { pattern = logPattern }\n }\n\n // without JUL bridge:\n //root(WARN, [&quot;STDOUT&quot;, &quot;ROLLING&quot;])  // prod\n //root(DEBUG, [&quot;STDOUT&quot;, &quot;FILE&quot;])  // dev\n\n // with JUL bridge: (workaround: see links above)\n def rootLvl = WARN\n root(TRACE, [/*&quot;STDOUT&quot;,*/ &quot;FILE&quot;])\n // I manually added all &quot;root package dirs&quot; I know my libs are based on to apply\n // the root level to the second &quot;package dir level&quot; at least\n // depending on your libs used you could remove entries, but I would recommend\n // to add common entries instead (feel free to edit this post if you like to\n // enhance it anywhere)\n logger( &quot;antlr&quot;, rootLvl )\n logger( &quot;de&quot;, rootLvl )\n logger( &quot;ch&quot;, rootLvl )\n logger( &quot;com&quot;, rootLvl )\n logger( &quot;java&quot;, rootLvl )\n logger( &quot;javassist&quot;, rootLvl )\n logger( &quot;javax&quot;, rootLvl )\n logger( &quot;junit&quot;, rootLvl )\n logger( &quot;groovy&quot;, rootLvl )\n logger( &quot;net&quot;, rootLvl )\n logger( &quot;org&quot;, rootLvl )\n logger( &quot;sun&quot;, rootLvl )\n\n\n // my logger setup\n\n logger( &quot;myapp&quot;, DEBUG )\n\n\n //logger( &quot;org.hibernate.SQL&quot;, DEBUG )  // debug: log SQL statements in DEBUG mode\n //logger( &quot;org.hibernate.type&quot;, TRACE )  // debug: log JDBC parameters in TRACE mode\n logger( &quot;org.hibernate.type.BasicTypeRegistry&quot;, WARN )  // uninteresting\n\n scan(&quot;30 seconds&quot;)  // reload/apply-on-change config every x sec\n</code></pre>\n</li>\n</ol>\n<p>(recommended to be used by me since you can react with Java code vars/functions as you can see in here with, e.g. <em>SLF4JBridgeHandler</em> or the log dir regarding <em>webappDirName</em>)</p>\n<p>(left the file complete since it gives a better impression how everything can be setup or as a starting template)</p>\n<p>(may be relevant to somebody - my env: <em>slf4j 1.7.5, logback 1.1.2, groovy 2.1.9</em>)</p>\n"},{"tags":[],"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1616099605,"creation_date":1491430955,"answer_id":43242620,"question_id":9117030,"body_markdown":"I use SLF4J and [new Postgres driver 42.0.0](https://github.com/pgjdbc/pgjdbc)\r\n\r\nAccording [changelog](https://github.com/pgjdbc/pgjdbc#changelog) it use java.util.logging\r\n\r\nTo have driver logs it is enough:\r\n\r\n 1. Add [jul-to-slf4j bridge](https://www.slf4j.org/legacy.html#jul-to-slf4j):\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n 2. Add in logback.xml (logback-test.xml)\r\n\r\n        &lt;contextListener class=&quot;ch.qos.logback.classic.jul.LevelChangePropagator&quot;&gt;\r\n            &lt;resetJUL&gt;true&lt;/resetJUL&gt;\r\n        &lt;/contextListener&gt;\r\n\r\n        &lt;appender ...\r\n\r\n        &lt;logger name=&quot;org.postgresql&quot; level=&quot;trace&quot;/&gt;\r\n\r\n 3. Add in code\r\n\r\n        static {\r\n            SLF4JBridgeHandler.install();\r\n        }","title":"JUL to SLF4J Bridge","body":"<p>I use SLF4J and <a href=\"https://github.com/pgjdbc/pgjdbc\" rel=\"nofollow noreferrer\">new Postgres driver 42.0.0</a></p>\n<p>According <a href=\"https://github.com/pgjdbc/pgjdbc#changelog\" rel=\"nofollow noreferrer\">changelog</a> it use java.util.logging</p>\n<p>To have driver logs it is enough:</p>\n<ol>\n<li><p>Add <a href=\"https://www.slf4j.org/legacy.html#jul-to-slf4j\" rel=\"nofollow noreferrer\">jul-to-slf4j bridge</a>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n    &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Add in logback.xml (logback-test.xml)</p>\n<pre><code>&lt;contextListener class=&quot;ch.qos.logback.classic.jul.LevelChangePropagator&quot;&gt;\n    &lt;resetJUL&gt;true&lt;/resetJUL&gt;\n&lt;/contextListener&gt;\n\n&lt;appender ...\n\n&lt;logger name=&quot;org.postgresql&quot; level=&quot;trace&quot;/&gt;\n</code></pre>\n</li>\n<li><p>Add in code</p>\n<pre><code>static {\n    SLF4JBridgeHandler.install();\n}\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":97926,"reputation":823,"user_id":265374,"accept_rate":75,"display_name":"reddot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683330293,"creation_date":1683330293,"answer_id":76186502,"question_id":9117030,"body_markdown":"In addition to configuration commands provided at [answer by Dev][1]. In the code I&#39;m working with there is a lot of trace-level (FINEST) messages wrapped with `isLoggable` check generated by 3rd-party libraries. So enabling all the levels unconditionally doesn&#39;t look like a good idea.\r\n\r\nI&#39;m using SLF4J Simple Logger and it doesn&#39;t have means to dynamically change logging levels. Thus I&#39;ve added following snippet of code to automatically tune java util logging levels based on slf4j simple logger configuration passed via system properties:\r\n\r\n```\r\nimport java.util.logging.Level;\r\nimport java.util.logging.Logger;\r\n\r\nclass Main {\r\n    static {\r\n        java.util.Map&lt;String,Level&gt; levelMap = new java.util.HashMap&lt;&gt;();\r\n        levelMap.put(&quot;TRACE&quot;, Level.FINEST);\r\n        levelMap.put(&quot;DEBUG&quot;, Level.FINE);\r\n        levelMap.put(&quot;INFO&quot;, Level.INFO);\r\n        levelMap.put(&quot;WARN&quot;, Level.WARNING);\r\n        levelMap.put(&quot;ERROR&quot;, Level.SEVERE);\r\n        levelMap.put(&quot;OFF&quot;, Level.OFF);\r\n\r\n        for (String property : System.getProperties().stringPropertyNames()) {\r\n            if (property.startsWith(org.slf4j.simple.SimpleLogger.LOG_KEY_PREFIX)) {\r\n\r\n                String logger = property.replaceFirst(org.slf4j.simple.SimpleLogger.LOG_KEY_PREFIX, &quot;&quot;);\r\n                String value = System.getProperty(property).toUpperCase();\r\n\r\n                Level level = levelMap.getOrDefault(value, Level.INFO);\r\n                Logger.getLogger(logger).setLevel(level);\r\n            }\r\n        }\r\n\r\n        org.slf4j.bridge.SLF4JBridgeHandler.removeHandlersForRootLogger();\r\n        org.slf4j.bridge.SLF4JBridgeHandler.install();\r\n    }\r\n}\r\n\r\n```\r\n\r\nP.S. this snippet doesn&#39;t handle Simple Logger settings defined in simplelogger.properties file on your classpath. Assuming those are static and corresponding JUL tuning could be performed as needed.\r\n\r\nThe `LevelChangePropagator` available in Logback basically does the same but dynamically tracks Level changes.\r\n\r\n  [1]: https://stackoverflow.com/a/9117188/265374","title":"JUL to SLF4J Bridge","body":"<p>In addition to configuration commands provided at <a href=\"https://stackoverflow.com/a/9117188/265374\">answer by Dev</a>. In the code I'm working with there is a lot of trace-level (FINEST) messages wrapped with <code>isLoggable</code> check generated by 3rd-party libraries. So enabling all the levels unconditionally doesn't look like a good idea.</p>\n<p>I'm using SLF4J Simple Logger and it doesn't have means to dynamically change logging levels. Thus I've added following snippet of code to automatically tune java util logging levels based on slf4j simple logger configuration passed via system properties:</p>\n<pre><code>import java.util.logging.Level;\nimport java.util.logging.Logger;\n\nclass Main {\n    static {\n        java.util.Map&lt;String,Level&gt; levelMap = new java.util.HashMap&lt;&gt;();\n        levelMap.put(&quot;TRACE&quot;, Level.FINEST);\n        levelMap.put(&quot;DEBUG&quot;, Level.FINE);\n        levelMap.put(&quot;INFO&quot;, Level.INFO);\n        levelMap.put(&quot;WARN&quot;, Level.WARNING);\n        levelMap.put(&quot;ERROR&quot;, Level.SEVERE);\n        levelMap.put(&quot;OFF&quot;, Level.OFF);\n\n        for (String property : System.getProperties().stringPropertyNames()) {\n            if (property.startsWith(org.slf4j.simple.SimpleLogger.LOG_KEY_PREFIX)) {\n\n                String logger = property.replaceFirst(org.slf4j.simple.SimpleLogger.LOG_KEY_PREFIX, &quot;&quot;);\n                String value = System.getProperty(property).toUpperCase();\n\n                Level level = levelMap.getOrDefault(value, Level.INFO);\n                Logger.getLogger(logger).setLevel(level);\n            }\n        }\n\n        org.slf4j.bridge.SLF4JBridgeHandler.removeHandlersForRootLogger();\n        org.slf4j.bridge.SLF4JBridgeHandler.install();\n    }\n}\n\n</code></pre>\n<p>P.S. this snippet doesn't handle Simple Logger settings defined in simplelogger.properties file on your classpath. Assuming those are static and corresponding JUL tuning could be performed as needed.</p>\n<p>The <code>LevelChangePropagator</code> available in Logback basically does the same but dynamically tracks Level changes.</p>\n"}],"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71315,"favorite_count":0,"down_vote_count":0,"up_vote_count":87,"accepted_answer_id":9117188,"answer_count":6,"score":87,"last_activity_date":1683330293,"creation_date":1328204000,"question_id":9117030,"body_markdown":"I&#39;m currently observing that a 3rd party library (namely restfb) is using java.util.logging and I&#39;m seeing those logs end up in STDOUT even though I don&#39;t have an SLF4J console appender configured in my logback.xml. I also have the [jul-to-slf4j][1] bridge in my classpath. Does the jul-to-slf4j bridge only log to the appenders configured by logback when the bridge is installed or does it also log to stdout?\r\n\r\n\r\n  [1]: http://www.slf4j.org/images/legacy.png","title":"JUL to SLF4J Bridge","body":"<p>I'm currently observing that a 3rd party library (namely restfb) is using java.util.logging and I'm seeing those logs end up in STDOUT even though I don't have an SLF4J console appender configured in my logback.xml. I also have the <a href=\"http://www.slf4j.org/images/legacy.png\" rel=\"noreferrer\">jul-to-slf4j</a> bridge in my classpath. Does the jul-to-slf4j bridge only log to the appenders configured by logback when the bridge is installed or does it also log to stdout?</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1381383329,"post_id":19287749,"comment_id":28560668,"body_markdown":"Please update your question to show where and why you think `Payment` and `Leave` objects would be persisted.","body":"Please update your question to show where and why you think <code>Payment</code> and <code>Leave</code> objects would be persisted."},{"owner":{"display_name":"user784540"},"score":1,"creation_date":1381383425,"post_id":19287749,"comment_id":28560695,"body_markdown":"Most probably there are persistence declaration errors in your data model classes. Show the code for your data model classes.","body":"Most probably there are persistence declaration errors in your data model classes. Show the code for your data model classes."},{"owner":{"account_id":413542,"reputation":2371,"user_id":787255,"accept_rate":58,"display_name":"sawan"},"score":0,"creation_date":1381383772,"post_id":19287749,"comment_id":28560784,"body_markdown":"@Rafael Which data model....?","body":"@Rafael Which data model....?"},{"owner":{"display_name":"user784540"},"score":0,"creation_date":1381387162,"post_id":19287749,"comment_id":28562035,"body_markdown":"I mean `Employee` class.","body":"I mean <code>Employee</code> class."},{"owner":{"account_id":413542,"reputation":2371,"user_id":787255,"accept_rate":58,"display_name":"sawan"},"score":0,"creation_date":1381387520,"post_id":19287749,"comment_id":28562173,"body_markdown":"Consider that that employee object have correct values...","body":"Consider that that employee object have correct values..."}],"answers":[{"comments":[{"owner":{"account_id":413542,"reputation":2371,"user_id":787255,"accept_rate":58,"display_name":"sawan"},"score":0,"creation_date":1381384459,"post_id":19288040,"comment_id":28561010,"body_markdown":"I have taken session from session factory so its single object i uses everywhere....","body":"I have taken session from session factory so its single object i uses everywhere...."},{"owner":{"account_id":1051195,"reputation":2783,"user_id":1055089,"accept_rate":64,"display_name":"Vrushank"},"score":0,"creation_date":1381384592,"post_id":19288040,"comment_id":28561053,"body_markdown":"Your session variable is declared and initialized _inside_ the method. So the variable references are different in each call.","body":"Your session variable is declared and initialized <i>inside</i> the method. So the variable references are different in each call."}],"tags":[],"owner":{"account_id":1051195,"reputation":2783,"user_id":1055089,"accept_rate":64,"display_name":"Vrushank"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381384320,"creation_date":1381384320,"answer_id":19288040,"question_id":19287749,"body_markdown":"You need to **commit** your transaction for every update. Updating in the last method call will not commit everything before. The scope of your `session` variable is restricted to the method block.\r\n\r\n    private void saveEmployeeDetails() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        session.getTransaction().begin();//Begin Transaction\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.update(e);\r\n        session.flush();\r\n        session.getTransaction().commit(); // Commit after update\r\n        session.clear();\r\n    }\r\n    \r\n    private void saveEmployeeLeaves() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.save(e);\r\n        session.flush();\r\n        session.getTransaction().commit(); //Commit after update\r\n        session.clear();\r\n    }\r\n\r\n    private void saveEmployeePayment() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.save(e);\r\n        session.flush();\r\n        session.getTransaction().commit();//Commit Transaction\r\n    }\r\n","title":"Whats wrong with my hibernate transaction and session","body":"<p>You need to <strong>commit</strong> your transaction for every update. Updating in the last method call will not commit everything before. The scope of your <code>session</code> variable is restricted to the method block.</p>\n\n<pre><code>private void saveEmployeeDetails() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    session.getTransaction().begin();//Begin Transaction\n    Employee e = new Employee();//consider Employee have data\n    session.update(e);\n    session.flush();\n    session.getTransaction().commit(); // Commit after update\n    session.clear();\n}\n\nprivate void saveEmployeeLeaves() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    Employee e = new Employee();//consider Employee have data\n    session.save(e);\n    session.flush();\n    session.getTransaction().commit(); //Commit after update\n    session.clear();\n}\n\nprivate void saveEmployeePayment() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    Employee e = new Employee();//consider Employee have data\n    session.save(e);\n    session.flush();\n    session.getTransaction().commit();//Commit Transaction\n}\n</code></pre>\n"}],"owner":{"account_id":413542,"reputation":2371,"user_id":787255,"accept_rate":58,"display_name":"sawan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683329862,"creation_date":1381382973,"question_id":19287749,"body_markdown":"I have code as following.\r\n\r\n    class HibernateTest {\r\n\r\n    public static void main(final String[] args) {\r\n        final HibernateTest objHibernateTest = new HibernateTest();\r\n        \r\n        objHibernateTest.saveEmployeeDetails();\r\n        \r\n        objHibernateTest.saveEmployeeLeaves();\r\n        \r\n        objHibernateTest.saveEmployeePayment();\r\n    }\r\n\r\n    private void saveEmployeeDetails() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        session.getTransaction().begin();//Begin Transaction\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.update(e);\r\n        session.flush();\r\n        session.clear();\r\n    }\r\n\r\n    private void saveEmployeeLeaves() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.save(e);\r\n        session.flush();\r\n        session.clear();\r\n    }\r\n\r\n    private void saveEmployeePayment() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.save(e);\r\n        session.flush();\r\n        session.getTransaction().commit();//Commit Transaction\r\n    }\r\n    }\r\n\r\nIn above code i call `saveEmployeeDetails()` first where i get session and begin transation and then `flush() and clear()` for caching purpose.\r\n\r\nI do same thing in `saveEmployeeLeaves()`.\r\n\r\nIn function `saveEmployeePayment()`, i perform something and save the employee details.\r\n\r\nBut in this scenario only the `Payment` details get stored in db not `Employee details` and `Leave details`\r\n\r\nWhy this so?\r\n","title":"Whats wrong with my hibernate transaction and session","body":"<p>I have code as following.</p>\n<pre><code>class HibernateTest {\n\npublic static void main(final String[] args) {\n    final HibernateTest objHibernateTest = new HibernateTest();\n    \n    objHibernateTest.saveEmployeeDetails();\n    \n    objHibernateTest.saveEmployeeLeaves();\n    \n    objHibernateTest.saveEmployeePayment();\n}\n\nprivate void saveEmployeeDetails() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    session.getTransaction().begin();//Begin Transaction\n    Employee e = new Employee();//consider Employee have data\n    session.update(e);\n    session.flush();\n    session.clear();\n}\n\nprivate void saveEmployeeLeaves() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    Employee e = new Employee();//consider Employee have data\n    session.save(e);\n    session.flush();\n    session.clear();\n}\n\nprivate void saveEmployeePayment() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    Employee e = new Employee();//consider Employee have data\n    session.save(e);\n    session.flush();\n    session.getTransaction().commit();//Commit Transaction\n}\n}\n</code></pre>\n<p>In above code i call <code>saveEmployeeDetails()</code> first where i get session and begin transation and then <code>flush() and clear()</code> for caching purpose.</p>\n<p>I do same thing in <code>saveEmployeeLeaves()</code>.</p>\n<p>In function <code>saveEmployeePayment()</code>, i perform something and save the employee details.</p>\n<p>But in this scenario only the <code>Payment</code> details get stored in db not <code>Employee details</code> and <code>Leave details</code></p>\n<p>Why this so?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1604501493,"post_id":64682246,"comment_id":114366723,"body_markdown":"So you want to get all book stores whose open hours overlap with those ranges? Wouldn&#39;t you just provide _one_ range to compare with in that case?","body":"So you want to get all book stores whose open hours overlap with those ranges? Wouldn&#39;t you just provide <i>one</i> range to compare with in that case?"},{"owner":{"account_id":5121316,"reputation":2890,"user_id":4104760,"accept_rate":36,"display_name":"George"},"score":0,"creation_date":1604501845,"post_id":64682246,"comment_id":114366887,"body_markdown":"@quarks Edited the post and now it&#39;s incorrect.","body":"@quarks Edited the post and now it&#39;s incorrect."},{"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":1,"creation_date":1604512661,"post_id":64682246,"comment_id":114372033,"body_markdown":"@George that is correct check my answer so you can review","body":"@George that is correct check my answer so you can review"}],"answers":[{"tags":[],"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683329565,"creation_date":1604512637,"answer_id":64685312,"question_id":64682246,"body_markdown":"Here&#39;s how to implement the `compareTo` to be able to compare with MIN-MAX using two `LocalTimeRage`:\r\n\r\n```java\r\n  @Override public int compareTo(@NotNull LocalTimeRange range) {\r\n    if ((range.lower.isBefore(lower) &amp;&amp; range.upper.isBefore(lower)) &amp;&amp; (range.lower.isBefore(upper)\r\n        &amp;&amp; range.upper.isBefore(upper))) {\r\n      return -1;\r\n    } else if ((range.lower.isAfter(lower) &amp;&amp; range.upper.isAfter(lower)) &amp;&amp; (range.lower.isAfter(\r\n        upper)\r\n        &amp;&amp; range.upper.isAfter(upper))) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  }\r\n```\r\n\r\nWhere you query it like this:\r\n\r\n```java\r\nEntityIterable bookstores = txn.find(&quot;Bookstore&quot;, &quot;openHours&quot;, new LocalTimeRange(lower,lower), new LocalTimeRange(upper,upper));\r\n```\r\n\r\nA bit weird but it works. \r\n\r\nAnyone is free to comment on this implementation. \r\n\r\n","title":"Check if LocalTime is in range with Java?","body":"<p>Here's how to implement the <code>compareTo</code> to be able to compare with MIN-MAX using two <code>LocalTimeRage</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Override public int compareTo(@NotNull LocalTimeRange range) {\n    if ((range.lower.isBefore(lower) &amp;&amp; range.upper.isBefore(lower)) &amp;&amp; (range.lower.isBefore(upper)\n        &amp;&amp; range.upper.isBefore(upper))) {\n      return -1;\n    } else if ((range.lower.isAfter(lower) &amp;&amp; range.upper.isAfter(lower)) &amp;&amp; (range.lower.isAfter(\n        upper)\n        &amp;&amp; range.upper.isAfter(upper))) {\n      return 1;\n    }\n    return 0;\n  }\n</code></pre>\n<p>Where you query it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>EntityIterable bookstores = txn.find(&quot;Bookstore&quot;, &quot;openHours&quot;, new LocalTimeRange(lower,lower), new LocalTimeRange(upper,upper));\n</code></pre>\n<p>A bit weird but it works.</p>\n<p>Anyone is free to comment on this implementation.</p>\n"}],"owner":{"account_id":18436169,"reputation":991,"user_id":13429959,"display_name":"Fireburn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":273,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64685312,"answer_count":1,"score":0,"last_activity_date":1683329565,"creation_date":1604501187,"question_id":64682246,"body_markdown":"Suppose I only have this API that the database have provided to do queries to find which records/entities in the database are within a specific `java.time.LocalTime` range\r\n\r\n```java\r\nEntityIterable entities = txn.find(entityType, propertyName, minValue, maxValue);\r\n```\r\n\r\nWhere the minValue and maxValue are Java `Comparable`. A trivial example non-time use for this is for finding, for instance, price range:\r\n\r\n```java\r\nEntityIterable entities = txn.find(&quot;Book&quot;, &quot;price&quot;, 10.00, 20.00);\r\n```\r\nWhich will return all entries which has a price tag of `10.00` to `20.00`\r\n\r\nNow, if I have a `LocalTimeRage` stored as property of an entity, as such\r\n\r\n```java\r\nEntity bookstore = txn.createEntity(&quot;Bookstore&quot;);\r\nbook.setProperty(&quot;openHours&quot;, range);\r\n```\r\n\r\nWhere, `range` is a `LocalTimeRange` which is:\r\n\r\n```java\r\nclass LocalTimeRange implements Comparable {\r\n\r\n   private LocalTime upper;\r\n   private LocalTime lower;\r\n\r\n   @Override public int compareTo(@NotNull LocalTimeRange localTimeRange) {\r\n    return 0;\r\n   }\r\n\r\n}\r\n```\r\n\r\nWhat should be the implementation of `LocalTimeRange` as such it would be possible to fit into a min-max query? What should be the implementation of `compareTo` method?\r\n\r\nAs such, this would be satisfied:\r\n\r\n```java\r\nEntityIterable bookstores = txn.find(&quot;Bookstore&quot;, &quot;openHours&quot;, minLocalTimeRange, maxLocalTimeRange);\r\n```","title":"Check if LocalTime is in range with Java?","body":"<p>Suppose I only have this API that the database have provided to do queries to find which records/entities in the database are within a specific <code>java.time.LocalTime</code> range</p>\n<pre class=\"lang-java prettyprint-override\"><code>EntityIterable entities = txn.find(entityType, propertyName, minValue, maxValue);\n</code></pre>\n<p>Where the minValue and maxValue are Java <code>Comparable</code>. A trivial example non-time use for this is for finding, for instance, price range:</p>\n<pre class=\"lang-java prettyprint-override\"><code>EntityIterable entities = txn.find(&quot;Book&quot;, &quot;price&quot;, 10.00, 20.00);\n</code></pre>\n<p>Which will return all entries which has a price tag of <code>10.00</code> to <code>20.00</code></p>\n<p>Now, if I have a <code>LocalTimeRage</code> stored as property of an entity, as such</p>\n<pre class=\"lang-java prettyprint-override\"><code>Entity bookstore = txn.createEntity(&quot;Bookstore&quot;);\nbook.setProperty(&quot;openHours&quot;, range);\n</code></pre>\n<p>Where, <code>range</code> is a <code>LocalTimeRange</code> which is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class LocalTimeRange implements Comparable {\n\n   private LocalTime upper;\n   private LocalTime lower;\n\n   @Override public int compareTo(@NotNull LocalTimeRange localTimeRange) {\n    return 0;\n   }\n\n}\n</code></pre>\n<p>What should be the implementation of <code>LocalTimeRange</code> as such it would be possible to fit into a min-max query? What should be the implementation of <code>compareTo</code> method?</p>\n<p>As such, this would be satisfied:</p>\n<pre class=\"lang-java prettyprint-override\"><code>EntityIterable bookstores = txn.find(&quot;Bookstore&quot;, &quot;openHours&quot;, minLocalTimeRange, maxLocalTimeRange);\n</code></pre>\n"},{"tags":["java","gradle","intellij-idea","log4j"],"answers":[{"comments":[{"owner":{"account_id":27336286,"reputation":11,"user_id":20847667,"display_name":"joma"},"score":0,"creation_date":1683382051,"post_id":76186401,"comment_id":134359917,"body_markdown":"when I removed `appender.rolling.fileName` and added DirectFileRolloverStrategy this what it is throwing at me `2023-05-06 19:34:39,801 main ERROR Unable to locate plugin type for DirectFileRolloverStrategy`\n`2023-05-06 19:34:39,954 main ERROR Unable to locate plugin for DirectFileRolloverStrategy`","body":"when I removed <code>appender.rolling.fileName</code> and added DirectFileRolloverStrategy this what it is throwing at me <code>2023-05-06 19:34:39,801 main ERROR Unable to locate plugin type for DirectFileRolloverStrategy</code> <code>2023-05-06 19:34:39,954 main ERROR Unable to locate plugin for DirectFileRolloverStrategy</code>"},{"owner":{"account_id":27336286,"reputation":11,"user_id":20847667,"display_name":"joma"},"score":0,"creation_date":1683382150,"post_id":76186401,"comment_id":134359926,"body_markdown":"Basically what I want is it should create a new log file every mid night (when date changes) and should properly rename it as per the pattern configured. Rather doing that it is adding the logs of the next day in the same file instead of creating a new one every day.","body":"Basically what I want is it should create a new log file every mid night (when date changes) and should properly rename it as per the pattern configured. Rather doing that it is adding the logs of the next day in the same file instead of creating a new one every day."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1683390521,"post_id":76186401,"comment_id":134360987,"body_markdown":"Check the plugin name: it is `DirectWriteRolloverStrategy` (with `Write`) and **not** `DirectFileRolloverStrategy`.","body":"Check the plugin name: it is <code>DirectWriteRolloverStrategy</code> (with <code>Write</code>) and <b>not</b> <code>DirectFileRolloverStrategy</code>."},{"owner":{"account_id":27336286,"reputation":11,"user_id":20847667,"display_name":"joma"},"score":0,"creation_date":1683636508,"post_id":76186401,"comment_id":134394322,"body_markdown":"My typing mistake I used the same `DirectWriteRolloverStrategy` still not working","body":"My typing mistake I used the same <code>DirectWriteRolloverStrategy</code> still not working"}],"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683328496,"creation_date":1683328496,"answer_id":76186401,"question_id":76180593,"body_markdown":"There are two kinds of placeholders in Log4j 2.x Core (cf. [this question](https://stackoverflow.com/q/71862896/11748454)):\r\n\r\n * patterns like `%d{...}`, which extract some property from an object that depends on the context,\r\n * lookups like `${date:...}`, which extract some property from a `LogEvent`.\r\n\r\nWhile nowadays they are mostly the same, the `filePattern` property needs to contain a date **pattern**, not a lookup.\r\n\r\nJust use:\r\n\r\n```\r\nappender.rolling.filePattern = app_log/service/app-java-%d{yyyy-MM-dd}.%i.log.gz\r\n```\r\n\r\nAlso remove the `appender.rolling.fileName` and change [`DefaultRolloverStrategy`](https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/rolling/DefaultRolloverStrategy.html) to [`DirectWriteRolloverStrategy`](https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/rolling/DirectWriteRolloverStrategy.html), since the former does not support using the same value for `fileName` and `filePattern`.\r\n\r\n**Remark**: you probably want to use `yyyy` instead of `YYYY`, since the latter means &quot;week-based year&quot;, a kind of year composed by **full** weeks. E.g. 2023-01-01 is part of the week-based year 2022.\r\n\r\nThe `%i` I added to your pattern is necessary for size-based rotation.","title":"Log4j Pattern does not contain a data","body":"<p>There are two kinds of placeholders in Log4j 2.x Core (cf. <a href=\"https://stackoverflow.com/q/71862896/11748454\">this question</a>):</p>\n<ul>\n<li>patterns like <code>%d{...}</code>, which extract some property from an object that depends on the context,</li>\n<li>lookups like <code>${date:...}</code>, which extract some property from a <code>LogEvent</code>.</li>\n</ul>\n<p>While nowadays they are mostly the same, the <code>filePattern</code> property needs to contain a date <strong>pattern</strong>, not a lookup.</p>\n<p>Just use:</p>\n<pre><code>appender.rolling.filePattern = app_log/service/app-java-%d{yyyy-MM-dd}.%i.log.gz\n</code></pre>\n<p>Also remove the <code>appender.rolling.fileName</code> and change <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/rolling/DefaultRolloverStrategy.html\" rel=\"nofollow noreferrer\"><code>DefaultRolloverStrategy</code></a> to <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/rolling/DirectWriteRolloverStrategy.html\" rel=\"nofollow noreferrer\"><code>DirectWriteRolloverStrategy</code></a>, since the former does not support using the same value for <code>fileName</code> and <code>filePattern</code>.</p>\n<p><strong>Remark</strong>: you probably want to use <code>yyyy</code> instead of <code>YYYY</code>, since the latter means &quot;week-based year&quot;, a kind of year composed by <strong>full</strong> weeks. E.g. 2023-01-01 is part of the week-based year 2022.</p>\n<p>The <code>%i</code> I added to your pattern is necessary for size-based rotation.</p>\n"}],"owner":{"account_id":27336286,"reputation":11,"user_id":20847667,"display_name":"joma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683328496,"creation_date":1683277896,"question_id":76180593,"body_markdown":"I am working on logging for Java and using log4j for the same. This is my config file for FileRollOver\r\n\r\n    status = warn\r\n    property.filename = $${date:YYYY-MM-dd}\r\n    \r\n    # Rotate log file\r\n    appender.rolling.type = RollingFile\r\n    appender.rolling.name = LogToRollingFile\r\n    appender.rolling.fileName = ../app_log/service/app-java-${date:YYYY-MM-dd}.log\r\n    appender.rolling.filePattern = app_log/service/app-java-${date:YYYY-MM-dd}.log.gz\r\n    appender.rolling.layout.type = PatternLayout\r\n    appender.rolling.layout.pattern = %d{yyyy-MM-dd HH:mm:ss} [%-5p] %M: %m%n\r\n    appender.rolling.policies.type = Policies\r\n    #appender.rolling.policies.time.type = OnStartupTriggeringPolicy\r\n    appender.rolling.policies.time.type = TimeBasedTriggeringPolicy\r\n    appender.rolling.policies.time.interval=1\r\n    appender.rolling.policies.size.type = SizeBasedTriggeringPolicy\r\n    appender.rolling.policies.time.modulate = true\r\n    appender.rolling.policies.size.size=10MB\r\n    appender.rolling.strategy.type = DefaultRolloverStrategy\r\n    appender.rolling.strategy.max = 10\r\n    \r\n    #logger specific configuration\r\n    loggers\r\n    logger.name=rolling\r\n    logger.additivity = true\r\n    logger.appenderRefs = rolling\r\n    logger.appenderRef.rolling.ref = LogToRollingFile\r\n    logger.appenderRef.rolling.stdout.ref = STDOUT\r\n    \r\n    #root logger configuration\r\n    rootLogger.level = INFO\r\n    #rootLogger.appenderRef.stdout.ref = LogToConsole\r\n    rootLogger.appenderRef.stdout.ref = LogToRollingFile\r\n\r\nThe config is like a new file for logs should be created each new day. But when I am running it is throwing me this exception. \r\n\r\n    2023-05-05 14:37:39,819 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: Pattern does not contain a date java.lang.IllegalStateException: Pattern does not contain a date\r\n\r\nand \r\n\r\n    2023-05-05 14:37:39,823 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender\r\n\r\nThough my file name has date in it but it is not working out anyway.\r\nWhat could go wrong?\r\nPS: I am using IntelliJ Idea as IDE and it is a Gradle project.","title":"Log4j Pattern does not contain a data","body":"<p>I am working on logging for Java and using log4j for the same. This is my config file for FileRollOver</p>\n<pre><code>status = warn\nproperty.filename = $${date:YYYY-MM-dd}\n\n# Rotate log file\nappender.rolling.type = RollingFile\nappender.rolling.name = LogToRollingFile\nappender.rolling.fileName = ../app_log/service/app-java-${date:YYYY-MM-dd}.log\nappender.rolling.filePattern = app_log/service/app-java-${date:YYYY-MM-dd}.log.gz\nappender.rolling.layout.type = PatternLayout\nappender.rolling.layout.pattern = %d{yyyy-MM-dd HH:mm:ss} [%-5p] %M: %m%n\nappender.rolling.policies.type = Policies\n#appender.rolling.policies.time.type = OnStartupTriggeringPolicy\nappender.rolling.policies.time.type = TimeBasedTriggeringPolicy\nappender.rolling.policies.time.interval=1\nappender.rolling.policies.size.type = SizeBasedTriggeringPolicy\nappender.rolling.policies.time.modulate = true\nappender.rolling.policies.size.size=10MB\nappender.rolling.strategy.type = DefaultRolloverStrategy\nappender.rolling.strategy.max = 10\n\n#logger specific configuration\nloggers\nlogger.name=rolling\nlogger.additivity = true\nlogger.appenderRefs = rolling\nlogger.appenderRef.rolling.ref = LogToRollingFile\nlogger.appenderRef.rolling.stdout.ref = STDOUT\n\n#root logger configuration\nrootLogger.level = INFO\n#rootLogger.appenderRef.stdout.ref = LogToConsole\nrootLogger.appenderRef.stdout.ref = LogToRollingFile\n</code></pre>\n<p>The config is like a new file for logs should be created each new day. But when I am running it is throwing me this exception.</p>\n<pre><code>2023-05-05 14:37:39,819 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: Pattern does not contain a date java.lang.IllegalStateException: Pattern does not contain a date\n</code></pre>\n<p>and</p>\n<pre><code>2023-05-05 14:37:39,823 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender\n</code></pre>\n<p>Though my file name has date in it but it is not working out anyway.\nWhat could go wrong?\nPS: I am using IntelliJ Idea as IDE and it is a Gradle project.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":7172249,"reputation":8197,"user_id":5479362,"accept_rate":48,"display_name":"9ilsdx 9rvj 0lo"},"score":0,"creation_date":1639564876,"post_id":70361054,"comment_id":124379081,"body_markdown":"You can&#39;t. You need to use java 11 or higher to compile sources for java 11.","body":"You can&#39;t. You need to use java 11 or higher to compile sources for java 11."},{"owner":{"account_id":20376405,"reputation":139,"user_id":14947476,"display_name":"stanley"},"score":0,"creation_date":1639566217,"post_id":70361054,"comment_id":124379554,"body_markdown":"try this command `JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/  mvn clean package` repalce path with jdk you need","body":"try this command <code>JAVA_HOME=&#47;usr&#47;lib&#47;jvm&#47;java-11-openjdk-amd64&#47;  mvn clean package</code> repalce path with jdk you need"},{"owner":{"account_id":23178316,"reputation":157,"user_id":17276486,"display_name":"Lson"},"score":0,"creation_date":1639616469,"post_id":70361054,"comment_id":124397315,"body_markdown":"I think set temporary path is good way @stanley","body":"I think set temporary path is good way @stanley"}],"answers":[{"tags":[],"owner":{"account_id":17849762,"reputation":104,"user_id":12965752,"display_name":"Bhushan"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1639561510,"creation_date":1639561510,"answer_id":70361467,"question_id":70361054,"body_markdown":"In pom.xml you can define the version of JDK\r\n\r\n**Like**\r\n\r\n    &lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2020.0.1&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;","title":"How to specify java version when I use mvn package command without change environment path","body":"<p>In pom.xml you can define the version of JDK</p>\n<p><strong>Like</strong></p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;2020.0.1&lt;/spring-cloud.version&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2805226,"reputation":777,"user_id":2412606,"display_name":"Happy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639990336,"creation_date":1639990336,"answer_id":70419352,"question_id":70361054,"body_markdown":"Compiling Sources Using [A Different JDK][1]\r\n\r\n```\r\n    &lt;project&gt;\r\n      [...]\r\n      &lt;build&gt;\r\n        [...]\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.1&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;verbose&gt;true&lt;/verbose&gt;\r\n              &lt;fork&gt;true&lt;/fork&gt;\r\n              &lt;executable&gt;&lt;!-- path-to-javac --&gt;&lt;/executable&gt;\r\n              &lt;compilerVersion&gt;11&lt;/compilerVersion&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        [...]\r\n      &lt;/build&gt;\r\n      [...]\r\n    &lt;/project&gt;\r\n```\r\n\r\nWell the side effect is we have to edit the pom.xml file.\r\n- We may keep different version of pom.xml file, like `pom-java11.xml`, `pom-java17.xml` \r\n- `mvn -f &lt;other pom file&gt;` for your task, like `mvn -f pom-java11.xml ...`\r\n\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html\r\n","title":"How to specify java version when I use mvn package command without change environment path","body":"<p>Compiling Sources Using <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html\" rel=\"nofollow noreferrer\">A Different JDK</a></p>\n<pre><code>    &lt;project&gt;\n      [...]\n      &lt;build&gt;\n        [...]\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n              &lt;verbose&gt;true&lt;/verbose&gt;\n              &lt;fork&gt;true&lt;/fork&gt;\n              &lt;executable&gt;&lt;!-- path-to-javac --&gt;&lt;/executable&gt;\n              &lt;compilerVersion&gt;11&lt;/compilerVersion&gt;\n            &lt;/configuration&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        [...]\n      &lt;/build&gt;\n      [...]\n    &lt;/project&gt;\n</code></pre>\n<p>Well the side effect is we have to edit the pom.xml file.</p>\n<ul>\n<li>We may keep different version of pom.xml file, like <code>pom-java11.xml</code>, <code>pom-java17.xml</code></li>\n<li><code>mvn -f &lt;other pom file&gt;</code> for your task, like <code>mvn -f pom-java11.xml ...</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":28516402,"reputation":21,"user_id":21825701,"display_name":"user21825701"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683328360,"creation_date":1683285789,"answer_id":76181649,"question_id":70361054,"body_markdown":"Use this command:`JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/ mvn clean package`\r\n\r\nReplace the path with JDK that you need.","title":"How to specify java version when I use mvn package command without change environment path","body":"<p>Use this command:<code>JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/ mvn clean package</code></p>\n<p>Replace the path with JDK that you need.</p>\n"}],"owner":{"account_id":23178316,"reputation":157,"user_id":17276486,"display_name":"Lson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3094,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1683328360,"creation_date":1639559780,"question_id":70361054,"body_markdown":"My environment java version is jdk8,Now I want use Maven command `mvn package ` to compile some project.How to specify java version(like java11) to compile it whitout change environment path,because java version is a dynamic arguments in my process","title":"How to specify java version when I use mvn package command without change environment path","body":"<p>My environment java version is jdk8,Now I want use Maven command <code>mvn package </code> to compile some project.How to specify java version(like java11) to compile it whitout change environment path,because java version is a dynamic arguments in my process</p>\n"},{"tags":["java","intellij-idea","language-lawyer"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1573207620,"post_id":58764406,"comment_id":103814834,"body_markdown":"extra semicolons in import statements... interesting.","body":"extra semicolons in import statements... interesting."},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1573207768,"post_id":58764406,"comment_id":103814897,"body_markdown":"Which versions you are using?","body":"Which versions you are using?"},{"owner":{"account_id":4480824,"reputation":2249,"user_id":3644938,"accept_rate":50,"display_name":"Ruelos Joel"},"score":0,"creation_date":1573207840,"post_id":58764406,"comment_id":103814933,"body_markdown":"It&#39;s from IntelliJ, mine doesn&#39;t have this issue. I can put a thousand semicolon after an import statement","body":"It&#39;s from IntelliJ, mine doesn&#39;t have this issue. I can put a thousand semicolon after an import statement"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1573207893,"post_id":58764406,"comment_id":103814961,"body_markdown":"@YCF_L See my update.","body":"@YCF_L See my update."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1573208054,"post_id":58764406,"comment_id":103815049,"body_markdown":"I tried this on Intellij 2019.2.4 on a mac. I didn&#39;t get this error. Only a warning. Perhaps you have your preferences set more strictly.","body":"I tried this on Intellij 2019.2.4 on a mac. I didn&#39;t get this error. Only a warning. Perhaps you have your preferences set more strictly."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1573208233,"post_id":58764406,"comment_id":103815131,"body_markdown":"@JohannesKuhn It&#39;s not &#39;in an import statement&#39;. The import statement finished at the first semicolon. It is a free semicolon occuring at global scope, where only imports or interface/classe/annotation declarations are valid. In most contexts it is just an empty statement, but statements aren&#39;t valid here. Why the Java conmpiler allows it here remains a mystery.","body":"@JohannesKuhn It&#39;s not &#39;in an import statement&#39;. The import statement finished at the first semicolon. It is a free semicolon occuring at global scope, where only imports or interface/classe/annotation declarations are valid. In most contexts it is just an empty statement, but statements aren&#39;t valid here. Why the Java conmpiler allows it here remains a mystery."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1573208339,"post_id":58764406,"comment_id":103815193,"body_markdown":"I try to find the relevant JLS part for this. But I have never thought about what it allowed in a single .java file.","body":"I try to find the relevant JLS part for this. But I have never thought about what it allowed in a single .java file."},{"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"score":2,"creation_date":1573208883,"post_id":58764406,"comment_id":103815453,"body_markdown":"It&#39;s a good question. If I were you I would look for an answer that points out to the JSL and explains why `;` allowed in the import declaration, in the type declaration (but not in the package declaration - you can&#39;t put a `;` before the `package` part)","body":"It&#39;s a good question. If I were you I would look for an answer that points out to the JSL and explains why <code>;</code> allowed in the import declaration, in the type declaration (but not in the package declaration - you can&#39;t put a <code>;</code> before the <code>package</code> part)"}],"answers":[{"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":3,"creation_date":1573207990,"post_id":58764488,"comment_id":103815015,"body_markdown":"Statements are not generally allowed at top level scope. Therefore, your conclusion that an empty statement is allowed at the top level is flawed.","body":"Statements are not generally allowed at top level scope. Therefore, your conclusion that an empty statement is allowed at the top level is flawed."},{"owner":{"account_id":12879990,"reputation":497,"user_id":9315312,"display_name":"Gobind Deep Singh"},"score":0,"creation_date":1573208114,"post_id":58764488,"comment_id":103815079,"body_markdown":"I agree. But according to the question, the backend build succeeded. Shouldn&#39;t it fail if that was the case? :/","body":"I agree. But according to the question, the backend build succeeded. Shouldn&#39;t it fail if that was the case? :/"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":2,"creation_date":1573208779,"post_id":58764488,"comment_id":103815396,"body_markdown":"See http://mail.openjdk.java.net/pipermail/compiler-dev/2013-August/006956.html","body":"See <a href=\"http://mail.openjdk.java.net/pipermail/compiler-dev/2013-August/006956.html\" rel=\"nofollow noreferrer\">mail.openjdk.java.net/pipermail/compiler-dev/2013-August/&hellip;</a>"},{"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"score":0,"creation_date":1573209156,"post_id":58764488,"comment_id":103815601,"body_markdown":"`;` does nothing, but it&#39;s not allowed in the package declaration, why?","body":"<code>;</code> does nothing, but it&#39;s not allowed in the package declaration, why?"}],"tags":[],"owner":{"account_id":12879990,"reputation":497,"user_id":9315312,"display_name":"Gobind Deep Singh"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1573208370,"creation_date":1573207832,"answer_id":58764488,"question_id":58764406,"body_markdown":"Unnecessary semicolons are not an error. They are considered as **empty statements**. And an empty statement, which does nothing, is not an error.\r\n\r\nCross check your code. It might also be IntelliJ at fault too. Its linting service might not be considering it as a legal statement. \r\n\r\nThe question is similar to [this][1]\r\n\r\n**Edit 1:** The IntelliJ has an option in it&#39;s settings to which posts redundant semicolons as error.\r\n\r\n  [1]: https://stackoverflow.com/questions/9546455/why-does-java-not-show-an-error-for-double-semicolon-at-the-end-of-a-statement","title":"Are unnecessary semicolons syntax errors?","body":"<p>Unnecessary semicolons are not an error. They are considered as <strong>empty statements</strong>. And an empty statement, which does nothing, is not an error.</p>\n\n<p>Cross check your code. It might also be IntelliJ at fault too. Its linting service might not be considering it as a legal statement. </p>\n\n<p>The question is similar to <a href=\"https://stackoverflow.com/questions/9546455/why-does-java-not-show-an-error-for-double-semicolon-at-the-end-of-a-statement\">this</a></p>\n\n<p><strong>Edit 1:</strong> The IntelliJ has an option in it's settings to which posts redundant semicolons as error.</p>\n"},{"comments":[{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1573208243,"post_id":58764530,"comment_id":103815140,"body_markdown":"@GhostCatsaysReinstateMonica ugh. Maybe some linter plugin? :S","body":"@GhostCatsaysReinstateMonica ugh. Maybe some linter plugin? :S"},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1573208317,"post_id":58764530,"comment_id":103815184,"body_markdown":"The message in the question looks like it breaks the build, but setting this inspection to &quot;error&quot; doesn&#39;t. And the message is a bit different (just &quot;unnecessary semicolon &#39;;&#39;&quot;).","body":"The message in the question looks like it breaks the build, but setting this inspection to &quot;error&quot; doesn&#39;t. And the message is a bit different (just &quot;unnecessary semicolon &#39;;&#39;&quot;)."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1573208720,"post_id":58764530,"comment_id":103815376,"body_markdown":"@Tom mmh. You&#39;re right, I can&#39;t find a way to configure the built-in inspector to replicate the problem exactly. I&#39;m not sure it actually breaks the build for the OP though. Maybe this is due to some external plugin like SonarLint...","body":"@Tom mmh. You&#39;re right, I can&#39;t find a way to configure the built-in inspector to replicate the problem exactly. I&#39;m not sure it actually breaks the build for the OP though. Maybe this is due to some external plugin like SonarLint..."},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":1,"creation_date":1573210596,"post_id":58764530,"comment_id":103816327,"body_markdown":"Ghostcode edited the question and mentioned what the issue is: using the eclipse compiler (you can setup IDEA to that as well). The editor still only shows a warning (or error when the inspection is set up to that), but the build then breaks.","body":"Ghostcode edited the question and mentioned what the issue is: using the eclipse compiler (you can setup IDEA to that as well). The editor still only shows a warning (or error when the inspection is set up to that), but the build then breaks."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1573211742,"post_id":58764530,"comment_id":103816838,"body_markdown":"@Tom interesting. Never used that option myself. Might be a legit bug in the eclipse compiler then...","body":"@Tom interesting. Never used that option myself. Might be a legit bug in the eclipse compiler then..."},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1573212316,"post_id":58764530,"comment_id":103817082,"body_markdown":"Maybe. Eclipse can raise an error on empty statements/unused semicolons, but I can&#39;t find the default settings used and even when excplicitly ignoring this semicolon using `-err:-semicolon` doesn&#39;t remove this issue. On the other hand `-err:semicolon` creates another issue and I couldn&#39;t find any other ECJ settings flag regarding semicolons. Either ECJ doesn&#39;t allow you to ignore such errors, or IDEA has an issue with the ECJ integration. (Or ECJ is bugged :D)","body":"Maybe. Eclipse can raise an error on empty statements/unused semicolons, but I can&#39;t find the default settings used and even when excplicitly ignoring this semicolon using <code>-err:-semicolon</code> doesn&#39;t remove this issue. On the other hand <code>-err:semicolon</code> creates another issue and I couldn&#39;t find any other ECJ settings flag regarding semicolons. Either ECJ doesn&#39;t allow you to ignore such errors, or IDEA has an issue with the ECJ integration. (Or ECJ is bugged :D)"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1573213164,"post_id":58764530,"comment_id":103817477,"body_markdown":"And just for the record: the neat thing with the eclipse compiler is: it keeps compiling, instead of stopping on the first error. That is very convenient when you do TDD, and start to modify one class. You can still its tests, albeit *other* classes wouldn&#39;t compile any more.","body":"And just for the record: the neat thing with the eclipse compiler is: it keeps compiling, instead of stopping on the first error. That is very convenient when you do TDD, and start to modify one class. You can still its tests, albeit <i>other</i> classes wouldn&#39;t compile any more."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1573213432,"post_id":58764530,"comment_id":103817601,"body_markdown":"@Tom thanks for furthering the research - I had already given up tbh. Related: I&#39;m tempted to delete my answer as it does not technically answer GhostCat&#39;s question, but it kinds of sheds light on a slightly obscure IntelliJ feature though... Any recommendation?","body":"@Tom thanks for furthering the research - I had already given up tbh. Related: I&#39;m tempted to delete my answer as it does not technically answer GhostCat&#39;s question, but it kinds of sheds light on a slightly obscure IntelliJ feature though... Any recommendation?"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1573213502,"post_id":58764530,"comment_id":103817643,"body_markdown":"@GhostCatsaysReinstateMonica well that explains that. Not related but is it worth it in your opinion? Haven&#39;t really done TDD *that seriously* myself but wouldn&#39;t be against trying with the right tools.","body":"@GhostCatsaysReinstateMonica well that explains that. Not related but is it worth it in your opinion? Haven&#39;t really done TDD <i>that seriously</i> myself but wouldn&#39;t be against trying with the right tools."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1573213858,"post_id":58764530,"comment_id":103817829,"body_markdown":"@GhostCatsaysReinstateMonica fair enough. I&#39;ll add a disclaimer.","body":"@GhostCatsaysReinstateMonica fair enough. I&#39;ll add a disclaimer."}],"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"comment_count":10,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1573213942,"creation_date":1573207994,"answer_id":58764530,"question_id":58764406,"body_markdown":"**Disclaimer**\r\n\r\nThis does *not* resolve the issue, as it turns out the error occurs in relation to usage of the Eclipse compiler (as opposed to the default `javac` compiler). \r\n\r\nThis might still be useful to troubleshoot / highlight the inspection customization feature of IntelliJ. \r\n\r\n----------\r\n\r\n\r\nYou can set the level of severity for unnecessary semicolons (among many other things) in IntelliJ, in the Inspections profile. \r\n\r\nThe default setting for redundant semi-colons is &quot;warning&quot;. \r\nProbably yours has been set to &quot;Error&quot;. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis should not impact on the Java compiler, as redundant semi-colons are not a syntactic error. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TbMUu.png","title":"Are unnecessary semicolons syntax errors?","body":"<p><strong>Disclaimer</strong></p>\n\n<p>This does <em>not</em> resolve the issue, as it turns out the error occurs in relation to usage of the Eclipse compiler (as opposed to the default <code>javac</code> compiler). </p>\n\n<p>This might still be useful to troubleshoot / highlight the inspection customization feature of IntelliJ. </p>\n\n<hr>\n\n<p>You can set the level of severity for unnecessary semicolons (among many other things) in IntelliJ, in the Inspections profile. </p>\n\n<p>The default setting for redundant semi-colons is \"warning\". \nProbably yours has been set to \"Error\". </p>\n\n<p><a href=\"https://i.stack.imgur.com/TbMUu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TbMUu.png\" alt=\"enter image description here\"></a></p>\n\n<p>This should not impact on the Java compiler, as redundant semi-colons are not a syntactic error. </p>\n"},{"comments":[{"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"score":1,"creation_date":1573209072,"post_id":58764780,"comment_id":103815545,"body_markdown":"you can put a `;` before an import declaration which makes it not a `TypeDeclaration`","body":"you can put a <code>;</code> before an import declaration which makes it not a <code>TypeDeclaration</code>"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1573209189,"post_id":58764780,"comment_id":103815615,"body_markdown":"Now that is interesting. In that case, the compiler should reject that code then. Any source (JLS) that this is legal?","body":"Now that is interesting. In that case, the compiler should reject that code then. Any source (JLS) that this is legal?"},{"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"score":0,"creation_date":1573209695,"post_id":58764780,"comment_id":103815863,"body_markdown":"No, it compiles fine. The inconsistency I found (with no references in the JLS) is that a `;` is allowed in import declarations but not in the package declaration. I assume the package declaration is always excepted to be a single statement, so even these dummy empty statements are being rejected there.","body":"No, it compiles fine. The inconsistency I found (with no references in the JLS) is that a <code>;</code> is allowed in import declarations but not in the package declaration. I assume the package declaration is always excepted to be a single statement, so even these dummy empty statements are being rejected there."}],"tags":[],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1573208925,"creation_date":1573208925,"answer_id":58764780,"question_id":58764406,"body_markdown":"According to the [Java Language Specification &#167;7.6](https://docs.oracle.com/javase/specs/jls/se13/html/jls-7.html#jls-7.6) `;` is a valid Type Declaration:\r\n\r\n&gt; A top level type declaration declares a top level class type ([&#167;8 (Classes)](https://docs.oracle.com/javase/specs/jls/se13/html/jls-8.html)) or a top level interface type ([&#167;9 (Interfaces)](https://docs.oracle.com/javase/specs/jls/se13/html/jls-9.html)).\r\n&gt;&gt; TypeDeclaration:\r\n\r\n&gt;&gt;    * [ClassDeclaration](https://docs.oracle.com/javase/specs/jls/se13/html/jls-8.html#jls-ClassDeclaration)\r\n&gt;&gt;    * [InterfaceDeclaration](https://docs.oracle.com/javase/specs/jls/se13/html/jls-9.html#jls-InterfaceDeclaration)  \r\n&gt;&gt;    * ;  \r\n\r\n&gt;Extra &quot;;&quot; tokens appearing at the level of type declarations in a compilation unit have no effect on the meaning of the compilation unit. Stray semicolons are permitted in the Java programming language solely as a concession to C++ programmers who are used to placing &quot;;&quot; after a class declaration. They should not be used in new Java code. \r\n\r\nIf there is no setting in InteliJ that would change this behavior, then the extra semicolon should not produce an error.","title":"Are unnecessary semicolons syntax errors?","body":"<p>According to the <a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-7.html#jls-7.6\" rel=\"nofollow noreferrer\">Java Language Specification §7.6</a> <code>;</code> is a valid Type Declaration:</p>\n\n<blockquote>\n  <p>A top level type declaration declares a top level class type (<a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-8.html\" rel=\"nofollow noreferrer\">§8 (Classes)</a>) or a top level interface type (<a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-9.html\" rel=\"nofollow noreferrer\">§9 (Interfaces)</a>).</p>\n  \n  <blockquote>\n    <p>TypeDeclaration:</p>\n    \n    <ul>\n    <li><a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-8.html#jls-ClassDeclaration\" rel=\"nofollow noreferrer\">ClassDeclaration</a></li>\n    <li><a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-9.html#jls-InterfaceDeclaration\" rel=\"nofollow noreferrer\">InterfaceDeclaration</a>  </li>\n    <li>;  </li>\n    </ul>\n  </blockquote>\n  \n  <p>Extra \";\" tokens appearing at the level of type declarations in a compilation unit have no effect on the meaning of the compilation unit. Stray semicolons are permitted in the Java programming language solely as a concession to C++ programmers who are used to placing \";\" after a class declaration. They should not be used in new Java code. </p>\n</blockquote>\n\n<p>If there is no setting in InteliJ that would change this behavior, then the extra semicolon should not produce an error.</p>\n"}],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1882,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"accepted_answer_id":58764780,"answer_count":3,"score":4,"last_activity_date":1683328110,"creation_date":1573207567,"question_id":58764406,"body_markdown":"This morning, after doing a Git refresh, [IntelliJ IDEA][1] complained that my project wasn&#39;t compiling clean any more. The culprit:\r\n\r\n    import javax.naming.Context;;\r\n\r\nIntelliJ complains:\r\n\r\n&gt; Error:(33, 29) java: Syntax error on token &quot;;&quot;, delete this token\r\n\r\nThat code was pushed by a person who is not using IntelliJ, and it passed our backend build.\r\n\r\nIs *[javac][2]* at fault, or IntelliJ? And what would be the document/specification that clarifies whether the above code should be an error or a warning?\r\n\r\nThis is IntelliJ 2019.2 CE EAP, running on macOS.\r\n\r\nAnd just to be precise: there seems to be a mismatch between the IntelliJ &quot;editor compile&quot;, and the result of hitting the &quot;build&quot; action. Fun fact: we have &quot;use eclipse compiler&quot; in our project setup. Changing it that to use *javac* fixes the problem; the double ;; is just a warning then.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n  [2]: https://en.wikipedia.org/wiki/Javac\r\n\r\n\r\n\r\n\r\n\r\n","title":"Are unnecessary semicolons syntax errors?","body":"<p>This morning, after doing a Git refresh, <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ IDEA</a> complained that my project wasn't compiling clean any more. The culprit:</p>\n<pre><code>import javax.naming.Context;;\n</code></pre>\n<p>IntelliJ complains:</p>\n<blockquote>\n<p>Error:(33, 29) java: Syntax error on token &quot;;&quot;, delete this token</p>\n</blockquote>\n<p>That code was pushed by a person who is not using IntelliJ, and it passed our backend build.</p>\n<p>Is <em><a href=\"https://en.wikipedia.org/wiki/Javac\" rel=\"nofollow noreferrer\">javac</a></em> at fault, or IntelliJ? And what would be the document/specification that clarifies whether the above code should be an error or a warning?</p>\n<p>This is IntelliJ 2019.2 CE EAP, running on macOS.</p>\n<p>And just to be precise: there seems to be a mismatch between the IntelliJ &quot;editor compile&quot;, and the result of hitting the &quot;build&quot; action. Fun fact: we have &quot;use eclipse compiler&quot; in our project setup. Changing it that to use <em>javac</em> fixes the problem; the double ;; is just a warning then.</p>\n"},{"tags":["java","gradle","java-11"],"comments":[{"owner":{"account_id":2216569,"reputation":780,"user_id":2458319,"display_name":"mty"},"score":3,"creation_date":1640670315,"post_id":70423297,"comment_id":124628390,"body_markdown":"I encountered the same with Java version `openjdk 17.0.1 2021-10-19`. Downgrading to version `openjdk 11.0.13 2021-10-19 LTS` fixed it for me.","body":"I encountered the same with Java version <code>openjdk 17.0.1 2021-10-19</code>. Downgrading to version <code>openjdk 11.0.13 2021-10-19 LTS</code> fixed it for me."}],"answers":[{"tags":[],"owner":{"account_id":23752406,"reputation":1,"user_id":17768978,"display_name":"Nayara Dias"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640557152,"creation_date":1640557152,"answer_id":70490234,"question_id":70423297,"body_markdown":"I am having the same issue.\r\nWhen I was running in intellij terminal ./gradlew build war this exception happened.\r\n\r\nI saw the problem is terminal java version. In terminal is 17 and my application is running in 11.\r\n\r\nI solve my problem creating war file by intellij, but there is some missing environment configuration to fix in my terminal.","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I am having the same issue.\nWhen I was running in intellij terminal ./gradlew build war this exception happened.</p>\n<p>I saw the problem is terminal java version. In terminal is 17 and my application is running in 11.</p>\n<p>I solve my problem creating war file by intellij, but there is some missing environment configuration to fix in my terminal.</p>\n"},{"tags":[],"owner":{"account_id":881631,"reputation":133,"user_id":255381,"display_name":"Pedro"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640908714,"creation_date":1640908714,"answer_id":70537828,"question_id":70423297,"body_markdown":"I encountered the same error. To get around it, I ended up setting the JAVA_HOME environment variable before running gradle from the command line, and also added it to my path.\r\n\r\n    export JAVA_HOME=/Library/Java/JavaVirtualMachines/openjdk-11.jdk/Contents/Home \r\n    export PATH=$JAVA_HOME/bin:$PATH\r\n\r\nopenjdk-11 worked fine for me, but you want to make sure your JAVA_HOME environment variable points to an actual location before setting it. This may vary based on your OS.","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I encountered the same error. To get around it, I ended up setting the JAVA_HOME environment variable before running gradle from the command line, and also added it to my path.</p>\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/openjdk-11.jdk/Contents/Home \nexport PATH=$JAVA_HOME/bin:$PATH\n</code></pre>\n<p>openjdk-11 worked fine for me, but you want to make sure your JAVA_HOME environment variable points to an actual location before setting it. This may vary based on your OS.</p>\n"},{"comments":[{"owner":{"account_id":3426680,"reputation":587,"user_id":2872279,"accept_rate":100,"display_name":"NBTX"},"score":0,"creation_date":1670345477,"post_id":70728579,"comment_id":131853053,"body_markdown":"I checked https://gradle.org/releases/ and found the latest version, which worked for me.","body":"I checked <a href=\"https://gradle.org/releases/\" rel=\"nofollow noreferrer\">gradle.org/releases</a> and found the latest version, which worked for me."}],"tags":[],"owner":{"account_id":1979652,"reputation":7771,"user_id":2161118,"display_name":"S34N"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1642323076,"creation_date":1642323076,"answer_id":70728579,"question_id":70423297,"body_markdown":"Resolved it by recreating the project from existing sources &amp; updating the `.gradle-wrapper.properties` version to 7.3.2\r\n\r\nLocation: `gradle/wrapper/gradle-wrapper.properties`\r\n\r\n\r\n    distributionBase=GRADLE_USER_HOME\r\n    distributionPath=wrapper/dists\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.2-bin.zip\r\n    zipStoreBase=GRADLE_USER_HOME\r\n    zipStorePath=wrapper/dists\r\n","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>Resolved it by recreating the project from existing sources &amp; updating the <code>.gradle-wrapper.properties</code> version to 7.3.2</p>\n<p>Location: <code>gradle/wrapper/gradle-wrapper.properties</code></p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23125140,"reputation":292,"user_id":17231060,"display_name":"Manoj"},"comment_count":0,"down_vote_count":2,"up_vote_count":27,"is_accepted":true,"score":25,"last_activity_date":1644274752,"creation_date":1644274752,"answer_id":71026490,"question_id":70423297,"body_markdown":"Downgrading from open jdk 17 to 11 worked for me.   ","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>Downgrading from open jdk 17 to 11 worked for me.</p>\n"},{"comments":[{"owner":{"account_id":371767,"reputation":2919,"user_id":720484,"accept_rate":72,"display_name":"George Pligoropoulos"},"score":0,"creation_date":1657635725,"post_id":72685410,"comment_id":128854425,"body_markdown":"does not seem to be working here","body":"does not seem to be working here"},{"owner":{"account_id":5611872,"reputation":291,"user_id":4444326,"display_name":"sodino"},"score":0,"creation_date":1664362428,"post_id":72685410,"comment_id":130452894,"body_markdown":"It work for me.         a complete configuration :  org.gradle.jvmargs=-Xmx4096m --add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED","body":"It work for me.         a complete configuration :  org.gradle.jvmargs=-Xmx4096m --add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAME&zwnj;&#8203;D --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED"},{"owner":{"account_id":20839721,"reputation":190,"user_id":15306765,"display_name":"felecian aidan"},"score":0,"creation_date":1677604715,"post_id":72685410,"comment_id":133369480,"body_markdown":"this has worked for me, but can you share any resources to check the details?","body":"this has worked for me, but can you share any resources to check the details?"},{"owner":{"account_id":6395225,"reputation":1133,"user_id":4959801,"display_name":"dotrinh DM"},"score":2,"creation_date":1682935484,"post_id":72685410,"comment_id":134286139,"body_markdown":"it works on Flamigo 2022","body":"it works on Flamigo 2022"},{"owner":{"account_id":14429284,"reputation":75,"user_id":10423080,"display_name":"AegisX1"},"score":0,"creation_date":1688460753,"post_id":72685410,"comment_id":135073745,"body_markdown":"it work for me and I was downgrade from jdk 20 to 17","body":"it work for me and I was downgrade from jdk 20 to 17"},{"owner":{"account_id":789709,"reputation":163,"user_id":866080,"accept_rate":86,"display_name":"aida"},"score":0,"creation_date":1690197635,"post_id":72685410,"comment_id":135315135,"body_markdown":"it helped me too , thanks alot","body":"it helped me too , thanks alot"}],"tags":[],"owner":{"account_id":13012907,"reputation":3760,"user_id":9405238,"display_name":"Doan Bui"},"comment_count":6,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1655719789,"creation_date":1655719789,"answer_id":72685410,"question_id":70423297,"body_markdown":"It took me up to 3 working days and I found a simple solution. Go to `android/gradle.properties` \r\nchange `org.gradle.jvmargs=-Xmx1536M` to \r\n\r\n    org.gradle.jvmargs=-Xmx1536M --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>It took me up to 3 working days and I found a simple solution. Go to <code>android/gradle.properties</code>\nchange <code>org.gradle.jvmargs=-Xmx1536M</code> to</p>\n<pre><code>org.gradle.jvmargs=-Xmx1536M --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25865439,"reputation":91,"user_id":19597204,"display_name":"Raphael Torres"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1658435143,"creation_date":1658435143,"answer_id":73072252,"question_id":70423297,"body_markdown":"I resolved upgrading the gradle version with this:\r\n \r\n\r\n    ./gradlew wrapper --gradle-version 7.5","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I resolved upgrading the gradle version with this:</p>\n<pre><code>./gradlew wrapper --gradle-version 7.5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22441785,"reputation":21,"user_id":16646200,"display_name":"Bijay Jena"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661256853,"creation_date":1661256853,"answer_id":73458554,"question_id":70423297,"body_markdown":"I had to upgrade my gradle file to 7.3.1 and add this line in gradle.properties in android directory \r\n`org.gradle.jvmargs=--add-opens java.base/java.io=ALL-UNNAMED`\r\n\r\nThe gradle upgrade is required for Java 17 support\r\n","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I had to upgrade my gradle file to 7.3.1 and add this line in gradle.properties in android directory\n<code>org.gradle.jvmargs=--add-opens java.base/java.io=ALL-UNNAMED</code></p>\n<p>The gradle upgrade is required for Java 17 support</p>\n"},{"tags":[],"owner":{"account_id":12202944,"reputation":46,"user_id":8906771,"display_name":"Prince Vora"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683326360,"creation_date":1661421404,"answer_id":73485534,"question_id":70423297,"body_markdown":"for flutter run this command may be your issue resolve\r\n--\r\n\r\n    rm -r ~/.pub-cache\r\n    rm -r ./pubspec.lock\r\n    flutter clean\r\n    flutter pub get\r\n    flutter pub cache clean\r\n    flutter pub cache repair\r\n    flutter precache\r\n    dart pub upgrade\r\n    flutter pub run build_runner build --delete-conflicting-outputs","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<h2>for flutter run this command may be your issue resolve</h2>\n<pre><code>rm -r ~/.pub-cache\nrm -r ./pubspec.lock\nflutter clean\nflutter pub get\nflutter pub cache clean\nflutter pub cache repair\nflutter precache\ndart pub upgrade\nflutter pub run build_runner build --delete-conflicting-outputs\n</code></pre>\n"},{"tags":[],"owner":{"account_id":260688,"reputation":101,"user_id":544393,"display_name":"Jayesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665338133,"creation_date":1665338133,"answer_id":74007198,"question_id":70423297,"body_markdown":"I used [jdk 11.0.13][1] version and it works well.\r\n\r\n\r\n  [1]: https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/\r\n\r\nThis is my ~/.bash_profile\r\n\r\n```\r\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.13.jdk/Contents/Home\r\n```","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I used <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/\" rel=\"nofollow noreferrer\">jdk 11.0.13</a> version and it works well.</p>\n<p>This is my ~/.bash_profile</p>\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.13.jdk/Contents/Home\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3543091,"reputation":807,"user_id":2959707,"display_name":"Shirish Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667305713,"creation_date":1667305713,"answer_id":74275963,"question_id":70423297,"body_markdown":"You need to downgrade your java version to JDK 11 version.\r\nFor Mac OS Users Follow below Steps:\r\n 1. Check the Java version&#39;s already installed and see if jdk11 is installed or not, if not, install it first.\r\n\r\n&gt;  /usr/libexec/java_home -V\r\n\r\n 2. Open vim ~/.zshrc\r\n 3. Add the below line , note update your JDK name properly below\r\n     \r\n\r\n&gt;   export\r\n&gt; JAVA_HOME=/Library/Java/JavaVirtualMachines/&lt;&lt;Your_JDK_11_version&gt;&gt;/Contents/Home\r\n\r\n 4. Restart the terminal\r\n 5. Check Java Version \r\n \r\n\r\n&gt;    java -version\r\n\r\n","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>You need to downgrade your java version to JDK 11 version.\nFor Mac OS Users Follow below Steps:</p>\n<ol>\n<li>Check the Java version's already installed and see if jdk11 is installed or not, if not, install it first.</li>\n</ol>\n<blockquote>\n<p>/usr/libexec/java_home -V</p>\n</blockquote>\n<ol start=\"2\">\n<li>Open vim ~/.zshrc</li>\n<li>Add the below line , note update your JDK name properly below</li>\n</ol>\n<blockquote>\n<p>export\nJAVA_HOME=/Library/Java/JavaVirtualMachines/&lt;&lt;Your_JDK_11_version&gt;&gt;/Contents/Home</p>\n</blockquote>\n<ol start=\"4\">\n<li>Restart the terminal</li>\n<li>Check Java Version</li>\n</ol>\n<blockquote>\n<p>java -version</p>\n</blockquote>\n"}],"owner":{"account_id":17900992,"reputation":495,"user_id":13005243,"display_name":"Elen Mouradian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43302,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":71026490,"answer_count":10,"score":27,"last_activity_date":1683326360,"creation_date":1640010429,"question_id":70423297,"body_markdown":"I&#39;m trying to build the application with Java SE 11 and Gradle 7.0, and it builds using the IDE however when I try to build it using the terminal I get this error. How can I fix it. \r\n```\r\njava.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector (in unnamed module @0x1d7a8227) cannot access class com.sun.tools.javac.code.Symbol$TypeSymbol (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.code to unnamed module @0x1d7a8227\r\n```\r\n\r\n","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I'm trying to build the application with Java SE 11 and Gradle 7.0, and it builds using the IDE however when I try to build it using the terminal I get this error. How can I fix it.</p>\n<pre><code>java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector (in unnamed module @0x1d7a8227) cannot access class com.sun.tools.javac.code.Symbol$TypeSymbol (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.code to unnamed module @0x1d7a8227\n</code></pre>\n"},{"tags":["java","spring-boot","logging","logback"],"owner":{"account_id":3879268,"reputation":173,"user_id":3212324,"accept_rate":43,"display_name":"user3212324"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683326330,"creation_date":1683308082,"question_id":76184680,"body_markdown":"I have created RollingFileAppender via java instead of using logback.xml. Reason behind to switch from logback.xml to java is need to validate the file generation path is writable and if not switch to default path. I am facing following problem, with java code able to successfully create logs for application package, however root level logging gets reset(because of context.reset) is used while creating rollingappender. \r\n\r\nIt would be great help if you could provide insights on the below.\r\n\r\n1) how to use same rolling file appender for Root logger in java. Is it possible to define like that. \r\nP.S I have tried using same appender but logs are not getting generated for root level, only defined package is getting logged.\r\n2) is it possible to exclude certain loggers if the logger is obtained from Root logger. Logger logger=LoggerContext.getLogger(“ROOT”). If this approach is used all the internal libraries logs are getting logged in file. How to exclude such logging. P.S. since I am using spring context for logging application properties for logback is not getting effective.\r\n3) if to use logback itself is it possible to invoke java method to validate the path is writable and set the path? Any example for this will be helpful. P.S. I have used spring property which is working via logback, but if the value is configured as null or empty, application starting is failed.\r\n\r\nPlease suggest which option is better, since I have tried max possibilities whichever I can and all the examples leads to application properties not via java.","title":"Spring boot with logback","body":"<p>I have created RollingFileAppender via java instead of using logback.xml. Reason behind to switch from logback.xml to java is need to validate the file generation path is writable and if not switch to default path. I am facing following problem, with java code able to successfully create logs for application package, however root level logging gets reset(because of context.reset) is used while creating rollingappender.</p>\n<p>It would be great help if you could provide insights on the below.</p>\n<ol>\n<li>how to use same rolling file appender for Root logger in java. Is it possible to define like that.\nP.S I have tried using same appender but logs are not getting generated for root level, only defined package is getting logged.</li>\n<li>is it possible to exclude certain loggers if the logger is obtained from Root logger. Logger logger=LoggerContext.getLogger(“ROOT”). If this approach is used all the internal libraries logs are getting logged in file. How to exclude such logging. P.S. since I am using spring context for logging application properties for logback is not getting effective.</li>\n<li>if to use logback itself is it possible to invoke java method to validate the path is writable and set the path? Any example for this will be helpful. P.S. I have used spring property which is working via logback, but if the value is configured as null or empty, application starting is failed.</li>\n</ol>\n<p>Please suggest which option is better, since I have tried max possibilities whichever I can and all the examples leads to application properties not via java.</p>\n"},{"tags":["java","multithreading","threadpoolexecutor"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683270193,"post_id":76179562,"comment_id":134343920,"body_markdown":"Why not try it out?","body":"Why not try it out?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1683270195,"post_id":76179562,"comment_id":134343921,"body_markdown":"You should see this in the output. Runnable task 1 and 2 will block both threads of the executor service and it will not start task 3 until they are complete. A new thread will not be created.","body":"You should see this in the output. Runnable task 1 and 2 will block both threads of the executor service and it will not start task 3 until they are complete. A new thread will not be created."}],"answers":[{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683277480,"creation_date":1683270694,"answer_id":76179635,"question_id":76179562,"body_markdown":"If you have blocking code, then it will block a thread of execution. In your example your executor has two threads, two of the tasks (1, 2, or 3) will be start and block. No other task will start until one of the executing runnable completes.\r\n\r\nIf you had three or more threads, then all three tasks will start about the same time, even if you only have 1 execution core available. That is because the OS will schedule tasks in a way similar to what you are thinking. Thread 1 starts running a task, and then it blocks. Now the thread goes into a &quot;parked state&quot; (there are a few states it might actually be in), so the OS is free to let one of the other two threads work.\r\n\r\nThere are different techniques to get around this. If you look at Swing/AWT, Dialogs can &quot;block&quot; the flow of a runnable on the EDT, but the GUI stays responsive and continues to process events. \r\n\r\nFor your simple example, I would suggest the simple solution to be use more threads than blocking tasks you expect to be submitting.\r\n\r\nFor IO you might use additional threading mechanisms so you don&#39;t block your executor.\r\n\r\nAs of java 19 another solution, are [virtual threads](https://blogs.oracle.com/javamagazine/post/java-loom-virtual-threads-platform-threads) this way java handles the threads in a manner similar to having additional threads, but without actually creating more threads. eg. [Executors.newVirtualThreadPerTaskExecutor](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()) this still appears to be a preview feature in 19 though.\r\n","title":"Question regarding executorService for asynchronous behavior","body":"<p>If you have blocking code, then it will block a thread of execution. In your example your executor has two threads, two of the tasks (1, 2, or 3) will be start and block. No other task will start until one of the executing runnable completes.</p>\n<p>If you had three or more threads, then all three tasks will start about the same time, even if you only have 1 execution core available. That is because the OS will schedule tasks in a way similar to what you are thinking. Thread 1 starts running a task, and then it blocks. Now the thread goes into a &quot;parked state&quot; (there are a few states it might actually be in), so the OS is free to let one of the other two threads work.</p>\n<p>There are different techniques to get around this. If you look at Swing/AWT, Dialogs can &quot;block&quot; the flow of a runnable on the EDT, but the GUI stays responsive and continues to process events.</p>\n<p>For your simple example, I would suggest the simple solution to be use more threads than blocking tasks you expect to be submitting.</p>\n<p>For IO you might use additional threading mechanisms so you don't block your executor.</p>\n<p>As of java 19 another solution, are <a href=\"https://blogs.oracle.com/javamagazine/post/java-loom-virtual-threads-platform-threads\" rel=\"nofollow noreferrer\">virtual threads</a> this way java handles the threads in a manner similar to having additional threads, but without actually creating more threads. eg. <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()\" rel=\"nofollow noreferrer\">Executors.newVirtualThreadPerTaskExecutor</a> this still appears to be a preview feature in 19 though.</p>\n"}],"owner":{"account_id":24939850,"reputation":253,"user_id":18805881,"display_name":"olaf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683325761,"creation_date":1683269936,"question_id":76179562,"body_markdown":"If I have a runnable that is define as calling an api that takes 10s to complete\r\n\r\n\r\n\r\n        Runnable runnableTask = () -&gt; {\r\n            try {\r\n                System.out.println(&quot;before&quot;);\r\n\r\n                // call some api\r\n                TimeUnit.MILLISECONDS.sleep(10000);\r\n                System.out.println(&quot;after&quot;);\r\n\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        };\r\n\r\n\r\n\r\nand I have a `ExecutorService` that have 2 thread\r\n\r\n\r\n       executorService = Executors.newFixedThreadPool(2);\r\n\r\n       executorService.submit(runnableTask1);\r\n       executorService.submit(runnableTask2);\r\n       executorService.submit(runnableTask3);\r\n\r\nis `runnableTask3` blocked by `runnableTask2` and `runnableTask1`?\r\n\r\n\r\nor does `executorService` see that `runnableTask1` and `runnableTask2` is currently waiting for IO and will execute `runnableTask3`\r\n\r\n\r\nIs there a way to make IO not block in executorService?\r\n\r\nEven `newCachedThreadPool` only save on thread creation cost due to reuse\r\n\r\n\r\n","title":"Question regarding executorService for asynchronous behavior","body":"<p>If I have a runnable that is define as calling an api that takes 10s to complete</p>\n<pre><code>    Runnable runnableTask = () -&gt; {\n        try {\n            System.out.println(&quot;before&quot;);\n\n            // call some api\n            TimeUnit.MILLISECONDS.sleep(10000);\n            System.out.println(&quot;after&quot;);\n\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    };\n</code></pre>\n<p>and I have a <code>ExecutorService</code> that have 2 thread</p>\n<pre><code>   executorService = Executors.newFixedThreadPool(2);\n\n   executorService.submit(runnableTask1);\n   executorService.submit(runnableTask2);\n   executorService.submit(runnableTask3);\n</code></pre>\n<p>is <code>runnableTask3</code> blocked by <code>runnableTask2</code> and <code>runnableTask1</code>?</p>\n<p>or does <code>executorService</code> see that <code>runnableTask1</code> and <code>runnableTask2</code> is currently waiting for IO and will execute <code>runnableTask3</code></p>\n<p>Is there a way to make IO not block in executorService?</p>\n<p>Even <code>newCachedThreadPool</code> only save on thread creation cost due to reuse</p>\n"},{"tags":["java","profiling","jprofiler","jfr"],"answers":[{"tags":[],"owner":{"account_id":9827,"reputation":6784,"user_id":2049208,"display_name":"Kire Haglin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683323247,"creation_date":1635293458,"answer_id":69731266,"question_id":69718446,"body_markdown":"It could be the following bug. If a recording is started during runtime, the first sample will contain information from before the recording was started. \r\n\r\nSee https://bugs.openjdk.org/browse/JDK-8307488\r\n\r\nExplanation of the ObjectAllocationSample event\r\n----------\r\n\r\n\r\nThe field represents the sample weight, not the size.\r\n\r\nIf you would run the application for a very long time, this is how much this call site / stack trace would contribute to the allocation pressure. \r\n\r\nTo keep overhead low, the sampler doesn&#39;t instrument every allocation, in which case the size would be reasonable to emit.\r\n\r\nInstead it piggybacks on how allocation is done inside the JVM. To avoid taking the &quot;heap lock&quot; all the time, allocation is done in Thread Local Allocation Buffers (TLABs). The size of a TLAB is determined by the JVM, but typically increases when allocation increases. It can be a few kilobytes to several megabytes. When the thread runs out of a TLAB, it goes into a slow path where it requests more memory, possibly triggering a garbage collection. At that point the JVM decides if it should take the sample or not. \r\n\r\nThe size of the TLAB determines the weight of the sample. If an object of a certain type is allocated seldom, it&#39;s unlikely to hit the TLAB threshold. If it&#39;s allocated often, it&#39;s likely to hit the sample point. Furthermore, large arrays may be allocated outside the TLABs and then the weight become the size of the array. To keep overhead low, there is also a limitation on how many events to emit per second, by default 150, so the weight could be the sum over several sample attempts.\r\n\r\nThat said, 6.1 GB sounds rather high. With 150 events per second, that would mean an allocation rate of roughly 1000 GB/s. The event is new for JDK 16, so It could be a bug, uninitialized memory or something. Also seems unlikely that you hit an object that is only allocated once with such a high allocation rate.","title":"How to make sense of the &quot;new&quot; Java flight recorder ObjectAllocationSample event?","body":"<p>It could be the following bug. If a recording is started during runtime, the first sample will contain information from before the recording was started.</p>\n<p>See <a href=\"https://bugs.openjdk.org/browse/JDK-8307488\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8307488</a></p>\n<h2>Explanation of the ObjectAllocationSample event</h2>\n<p>The field represents the sample weight, not the size.</p>\n<p>If you would run the application for a very long time, this is how much this call site / stack trace would contribute to the allocation pressure.</p>\n<p>To keep overhead low, the sampler doesn't instrument every allocation, in which case the size would be reasonable to emit.</p>\n<p>Instead it piggybacks on how allocation is done inside the JVM. To avoid taking the &quot;heap lock&quot; all the time, allocation is done in Thread Local Allocation Buffers (TLABs). The size of a TLAB is determined by the JVM, but typically increases when allocation increases. It can be a few kilobytes to several megabytes. When the thread runs out of a TLAB, it goes into a slow path where it requests more memory, possibly triggering a garbage collection. At that point the JVM decides if it should take the sample or not.</p>\n<p>The size of the TLAB determines the weight of the sample. If an object of a certain type is allocated seldom, it's unlikely to hit the TLAB threshold. If it's allocated often, it's likely to hit the sample point. Furthermore, large arrays may be allocated outside the TLABs and then the weight become the size of the array. To keep overhead low, there is also a limitation on how many events to emit per second, by default 150, so the weight could be the sum over several sample attempts.</p>\n<p>That said, 6.1 GB sounds rather high. With 150 events per second, that would mean an allocation rate of roughly 1000 GB/s. The event is new for JDK 16, so It could be a bug, uninitialized memory or something. Also seems unlikely that you hit an object that is only allocated once with such a high allocation rate.</p>\n"}],"owner":{"account_id":219909,"reputation":697,"user_id":477055,"accept_rate":38,"display_name":"Billybong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":629,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683323247,"creation_date":1635230226,"question_id":69718446,"body_markdown":"While profiling our application on OpenJDK 16.1 I&#39;m seeing some weird allocation samples recorded in the ObjectAllocationSample event.\r\n\r\nThe very first sample event is this one which initially gave me a bit of scare:\r\n\r\n    jdk.ObjectAllocationSample {\r\n      startTime = 22:22:12.027\r\n      objectClass = java.util.ArrayList (classLoader = bootstrap)\r\n      weight = 6.1 GB\r\n      eventThread = &quot;My thread&quot; (javaThreadId = 52)\r\n      stackTrace = [\r\n        jdk.jfr.internal.PlatformRecorder.getListeners() line: 169\r\n        jdk.jfr.internal.PlatformRecording.notifyIfStateChanged(RecordingState, RecordingState) line: 496\r\n        jdk.jfr.internal.PlatformRecording.start() line: 150\r\n        jdk.jfr.Recording.start() line: 184\r\n        myapp.JfrProfiler.start() line: 152\r\n        ...\r\n      ]\r\n    }\r\n\r\nI have a hard time believing that the list of JFR listeners is 6.1GB large, and the method is only called once, so what does the stacktrace in the event mean in this case?\r\nIs this only one of the callsites where we allocate ArrayList&#39;s, and it happens to be the first one after starting the recording?\r\nIf so, is the weight including all allocations even prior to starting the recording?\r\n\r\nWhat about later samples for the same `objectClass`? Can we trust that the stacktraces gives us a good indication from where the allocations happen or is it just a random place where allocation occurs?\r\n\r\nTools such as JProfiler uses the stacktrace to give a hint as to which methods are allocation hot spots, making i.e the callsite above stand out significantly even if it&#39;s not where most of the allocations happen.","title":"How to make sense of the &quot;new&quot; Java flight recorder ObjectAllocationSample event?","body":"<p>While profiling our application on OpenJDK 16.1 I'm seeing some weird allocation samples recorded in the ObjectAllocationSample event.</p>\n<p>The very first sample event is this one which initially gave me a bit of scare:</p>\n<pre><code>jdk.ObjectAllocationSample {\n  startTime = 22:22:12.027\n  objectClass = java.util.ArrayList (classLoader = bootstrap)\n  weight = 6.1 GB\n  eventThread = &quot;My thread&quot; (javaThreadId = 52)\n  stackTrace = [\n    jdk.jfr.internal.PlatformRecorder.getListeners() line: 169\n    jdk.jfr.internal.PlatformRecording.notifyIfStateChanged(RecordingState, RecordingState) line: 496\n    jdk.jfr.internal.PlatformRecording.start() line: 150\n    jdk.jfr.Recording.start() line: 184\n    myapp.JfrProfiler.start() line: 152\n    ...\n  ]\n}\n</code></pre>\n<p>I have a hard time believing that the list of JFR listeners is 6.1GB large, and the method is only called once, so what does the stacktrace in the event mean in this case?\nIs this only one of the callsites where we allocate ArrayList's, and it happens to be the first one after starting the recording?\nIf so, is the weight including all allocations even prior to starting the recording?</p>\n<p>What about later samples for the same <code>objectClass</code>? Can we trust that the stacktraces gives us a good indication from where the allocations happen or is it just a random place where allocation occurs?</p>\n<p>Tools such as JProfiler uses the stacktrace to give a hint as to which methods are allocation hot spots, making i.e the callsite above stand out significantly even if it's not where most of the allocations happen.</p>\n"},{"tags":["java","gradle","build.gradle"],"owner":{"account_id":8890555,"reputation":35,"user_id":6637286,"display_name":"Joe McCay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683322999,"creation_date":1683322999,"question_id":76186081,"body_markdown":"I am using Gradle 6.8.2 with Java 8 on Windows 10 with WSL 2 Mint.  \r\n\r\nI would like to rename a file when it is added into the uber jar.  \r\n\r\nThe problem lies with the LICENSE.txt files.  I would like to rename each ***LICENSE.text*** file to ***&lt;lib_name_version &gt;_LICENSE.txt***.  If I set the property to allow duplicates, then you lose which LICENSE.txt file goes with which library.  It&#39;d be nice if you could apply a visitor when the files are being added to the uber jar.  I can get the name portion of the jar file without any problems.  Below is my *build.gradle* file.  I am upgrading/forking a library in Github.  I haven&#39;t add the publishing yet.\r\n```\r\nimport java.nio.charset.StandardCharsets\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;maven-publish&#39;\r\n}\r\nversion = &#39;2.1.0003&#39;\r\njar.archiveVersion = version\r\nsourceCompatibility = 1.8\r\ntargetCompatibility = 1.8\r\n\r\narchivesBaseName = &#39;onvif-java-lib&#39;\r\ngroup = &#39;com.qed.aes.camera&#39;\r\n\r\njava {\r\n    withJavadocJar()\r\n    withSourcesJar()\r\n}\r\n\r\n// task to list deprecated stuff in the compile\r\ntasks.withType(JavaCompile) {\r\n    // Using/setting StandardCharsets.ISO_8859_1 eliminates a problem with UFT-8 on\r\n    // Windows in NetBeans.  There are some characters that don&#39;t work in the UTF-8.\r\n    options.encoding = StandardCharsets.ISO_8859_1 \r\n    options.deprecation = true\r\n    options.compilerArgs += [&#39;-Xlint:deprecation&#39;]\r\n    options.compilerArgs += [&#39;-Xlint:unchecked&#39;]\r\n}\r\n\r\ncompileJava.options.encoding = StandardCharsets.ISO_8859_1\r\n\r\njavadoc {\r\n    options.encoding = StandardCharsets.ISO_8859_1\r\n    options.tags = [ &quot;date&quot; ]\r\n    source = sourceSets.main.allJava\r\n}\r\n\r\njar {\r\n    archiveVersion = project.version\r\n    manifest {\r\n        attributes &#39;Implementation-Title&#39;: &#39;ONVIF Java Library&#39;,\r\n        \t&#39;Implementation-Version&#39;: archiveVersion,\r\n        \t&#39;Main-Class&#39;: &#39;org.me.javawsdiscovery.JavaWSDiscovery&#39;\r\n    }\r\n    \r\n    String libName;\r\n    String newName;\r\n    dependsOn configurations.runtimeClasspath\r\n    from {\r\n        configurations.runtimeClasspath.findAll {\r\n            it.name.endsWith(&#39;jar&#39;) &amp;&amp; (!it.name.contains(&#39;javadoc&#39;)) &amp;&amp; (!it.name.contains(&#39;sources&#39;))\r\n        }.collect { \r\n            libName = it.getName();\r\n            libName = libName.substring(0,libName.indexOf(&quot;.jar&quot;));\r\n            zipTree(it) \r\n        }.each { tree -&gt;\r\n            tree.visit { file -&gt;\r\n                println file.class.getName()\r\n            }\r\n            \r\n        }\r\n        \r\n    }\r\n}\r\n\r\nrepositories {\r\n   flatDir {\r\n       dirs &#39;libs&#39;\r\n   }\r\n   mavenCentral()\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;jakarta.json:jakarta.json-api:2.1.1&#39;\r\n    compileOnly group: &#39;jakarta.json&#39;, name: &#39;jakarta.json-api&#39;, version: &#39;2.1.1&#39;, classifier:&#39;sources&#39;\r\n    compileOnly group: &#39;jakarta.json&#39;, name: &#39;jakarta.json-api&#39;, version: &#39;2.1.1&#39;, classifier:&#39;javadoc&#39;\r\n\r\n\r\n    implementation group: &#39;commons-codec&#39;, name: &#39;commons-codec&#39;, version: &#39;1.15&#39;\r\n    compileOnly group: &#39;commons-codec&#39;, name: &#39;commons-codec&#39;, version: &#39;1.15&#39;, classifier: &#39;sources&#39;\r\n    compileOnly group: &#39;commons-codec&#39;, name: &#39;commons-codec&#39;, version: &#39;1.15&#39;, classifier: &#39;javadoc&#39;\r\n    implementation &#39;junit:junit:4.13.2&#39;\r\n\r\n    // Original project page: https://www.javatuples.org/index.html\r\n    // Library: https://search.maven.org/artifact/com.flipkart.utils/javatuples/3.0/jar\r\n    implementation &#39;com.flipkart.utils:javatuples:3.0&#39;\r\n    compileOnly &#39;com.flipkart.utils:javatuples:3.0:sources&#39;\r\n    compileOnly &#39;com.flipkart.utils:javatuples:3.0:javadoc&#39;\r\n}\r\n```\r\n","title":"Rename a file in a zip file during Gradle build","body":"<p>I am using Gradle 6.8.2 with Java 8 on Windows 10 with WSL 2 Mint.</p>\n<p>I would like to rename a file when it is added into the uber jar.</p>\n<p>The problem lies with the LICENSE.txt files.  I would like to rename each <em><strong>LICENSE.text</strong></em> file to <em><strong>&lt;lib_name_version &gt;_LICENSE.txt</strong></em>.  If I set the property to allow duplicates, then you lose which LICENSE.txt file goes with which library.  It'd be nice if you could apply a visitor when the files are being added to the uber jar.  I can get the name portion of the jar file without any problems.  Below is my <em>build.gradle</em> file.  I am upgrading/forking a library in Github.  I haven't add the publishing yet.</p>\n<pre><code>import java.nio.charset.StandardCharsets\nplugins {\n    id 'java'\n    id 'maven-publish'\n}\nversion = '2.1.0003'\njar.archiveVersion = version\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\narchivesBaseName = 'onvif-java-lib'\ngroup = 'com.qed.aes.camera'\n\njava {\n    withJavadocJar()\n    withSourcesJar()\n}\n\n// task to list deprecated stuff in the compile\ntasks.withType(JavaCompile) {\n    // Using/setting StandardCharsets.ISO_8859_1 eliminates a problem with UFT-8 on\n    // Windows in NetBeans.  There are some characters that don't work in the UTF-8.\n    options.encoding = StandardCharsets.ISO_8859_1 \n    options.deprecation = true\n    options.compilerArgs += ['-Xlint:deprecation']\n    options.compilerArgs += ['-Xlint:unchecked']\n}\n\ncompileJava.options.encoding = StandardCharsets.ISO_8859_1\n\njavadoc {\n    options.encoding = StandardCharsets.ISO_8859_1\n    options.tags = [ &quot;date&quot; ]\n    source = sourceSets.main.allJava\n}\n\njar {\n    archiveVersion = project.version\n    manifest {\n        attributes 'Implementation-Title': 'ONVIF Java Library',\n            'Implementation-Version': archiveVersion,\n            'Main-Class': 'org.me.javawsdiscovery.JavaWSDiscovery'\n    }\n    \n    String libName;\n    String newName;\n    dependsOn configurations.runtimeClasspath\n    from {\n        configurations.runtimeClasspath.findAll {\n            it.name.endsWith('jar') &amp;&amp; (!it.name.contains('javadoc')) &amp;&amp; (!it.name.contains('sources'))\n        }.collect { \n            libName = it.getName();\n            libName = libName.substring(0,libName.indexOf(&quot;.jar&quot;));\n            zipTree(it) \n        }.each { tree -&gt;\n            tree.visit { file -&gt;\n                println file.class.getName()\n            }\n            \n        }\n        \n    }\n}\n\nrepositories {\n   flatDir {\n       dirs 'libs'\n   }\n   mavenCentral()\n}\n\ndependencies {\n\n    implementation 'jakarta.json:jakarta.json-api:2.1.1'\n    compileOnly group: 'jakarta.json', name: 'jakarta.json-api', version: '2.1.1', classifier:'sources'\n    compileOnly group: 'jakarta.json', name: 'jakarta.json-api', version: '2.1.1', classifier:'javadoc'\n\n\n    implementation group: 'commons-codec', name: 'commons-codec', version: '1.15'\n    compileOnly group: 'commons-codec', name: 'commons-codec', version: '1.15', classifier: 'sources'\n    compileOnly group: 'commons-codec', name: 'commons-codec', version: '1.15', classifier: 'javadoc'\n    implementation 'junit:junit:4.13.2'\n\n    // Original project page: https://www.javatuples.org/index.html\n    // Library: https://search.maven.org/artifact/com.flipkart.utils/javatuples/3.0/jar\n    implementation 'com.flipkart.utils:javatuples:3.0'\n    compileOnly 'com.flipkart.utils:javatuples:3.0:sources'\n    compileOnly 'com.flipkart.utils:javatuples:3.0:javadoc'\n}\n</code></pre>\n"},{"tags":["java","logging","cassandra","cql"],"answers":[{"tags":[],"owner":{"account_id":60456,"reputation":55971,"user_id":1054558,"accept_rate":100,"display_name":"Aaron"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683291385,"creation_date":1683291385,"answer_id":76182454,"question_id":76179785,"body_markdown":"You can enable [query logging][1], and then you&#39;ll be able to see them using the fqltool:\r\n\r\n    fqltool dump /tmp/cassandrafullquerylog\r\n\r\nTo enable this feature, [check the docs][2] and locate the `full_query_logging_options:` setting area in the `cassandra.yaml`.  Or, you can enable it using nodetool:\r\n\r\n    nodetool enablefullquerylog --path /tmp/cassandrafullquerylog\r\n\r\n\r\n  [1]: https://cassandra.apache.org/doc/latest/cassandra/operating/fqllogging.html\r\n  [2]: https://cassandra.apache.org/doc/latest/cassandra/operating/fqllogging.html#configuring-fql-in-cassandra-yaml","title":"Java logs in Cassandra query run","body":"<p>You can enable <a href=\"https://cassandra.apache.org/doc/latest/cassandra/operating/fqllogging.html\" rel=\"nofollow noreferrer\">query logging</a>, and then you'll be able to see them using the fqltool:</p>\n<pre><code>fqltool dump /tmp/cassandrafullquerylog\n</code></pre>\n<p>To enable this feature, <a href=\"https://cassandra.apache.org/doc/latest/cassandra/operating/fqllogging.html#configuring-fql-in-cassandra-yaml\" rel=\"nofollow noreferrer\">check the docs</a> and locate the <code>full_query_logging_options:</code> setting area in the <code>cassandra.yaml</code>.  Or, you can enable it using nodetool:</p>\n<pre><code>nodetool enablefullquerylog --path /tmp/cassandrafullquerylog\n</code></pre>\n"}],"owner":{"account_id":26005741,"reputation":23,"user_id":19715471,"display_name":"Aleix Ru&#233;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683322447,"creation_date":1683271807,"question_id":76179785,"body_markdown":"I wonder if I have there any log in the cassandra database system where I can see the underlying Java executions that run since I run a CQL statement until I receive the response from the command shell. If yes, how may I configure that?\r\n\r\nEDIT (after Aaron answer): Well, the thing is I only see some INFO statements and many queries referring to system databases when I run fqltool as suggested after enable full query logging:\r\n\r\n    INFO  [main] 2023-05-05 21:27:21,876 Jvm.java:160 - Chronicle core loaded from file:/opt/cassandra/lib/chronicle-core-2.20.126.jar\r\n    INFO  [main] 2023-05-05 21:27:21,915 Slf4jExceptionHandler.java:44 - Took 8 ms to add mapping for /var/log/cassandra/fullquerylog/metadata.cq4t\r\n    INFO  [main] 2023-05-05 21:27:21,968 InternalAnnouncer.java:42 - Running under OpenJDK Runtime Environment 11.0.19+7 with 20 processors reported.\r\n    INFO  [main] 2023-05-05 21:27:21,968 InternalAnnouncer.java:46 - Process id: 3849\r\n    INFO  [main] 2023-05-05 21:27:21,971 InternalAnnouncer.java:59 - :: Chronicle Queue :: (5.20.123)\r\n    Type: single-query\r\n    Query start time: 1683304925138\r\n    Protocol version: 5\r\n    Generated timestamp:-9223372036854775808\r\n    Generated nowInSeconds:1683304925\r\n    Query: SELECT * FROM system.peers_v2\r\n    Values: \r\n    \r\n    Type: single-query\r\n    Query start time: 1683304925144\r\n    Protocol version: 5\r\n    Generated timestamp:-9223372036854775808\r\n    Generated nowInSeconds:1683304925\r\n    Query: SELECT * FROM system.local WHERE key=&#39;local&#39;\r\n    Values: \r\n    \r\n    (+ MORE SYSTEM QUERIES DATA)\r\n\r\nIn my case, I did a GRANT ALL PERMISSIONS query with a WHERE clause which returned me a SyntaxException and I want to trace that in order to know what java Class is throwing that error.\r\n","title":"Java logs in Cassandra query run","body":"<p>I wonder if I have there any log in the cassandra database system where I can see the underlying Java executions that run since I run a CQL statement until I receive the response from the command shell. If yes, how may I configure that?</p>\n<p>EDIT (after Aaron answer): Well, the thing is I only see some INFO statements and many queries referring to system databases when I run fqltool as suggested after enable full query logging:</p>\n<pre><code>INFO  [main] 2023-05-05 21:27:21,876 Jvm.java:160 - Chronicle core loaded from file:/opt/cassandra/lib/chronicle-core-2.20.126.jar\nINFO  [main] 2023-05-05 21:27:21,915 Slf4jExceptionHandler.java:44 - Took 8 ms to add mapping for /var/log/cassandra/fullquerylog/metadata.cq4t\nINFO  [main] 2023-05-05 21:27:21,968 InternalAnnouncer.java:42 - Running under OpenJDK Runtime Environment 11.0.19+7 with 20 processors reported.\nINFO  [main] 2023-05-05 21:27:21,968 InternalAnnouncer.java:46 - Process id: 3849\nINFO  [main] 2023-05-05 21:27:21,971 InternalAnnouncer.java:59 - :: Chronicle Queue :: (5.20.123)\nType: single-query\nQuery start time: 1683304925138\nProtocol version: 5\nGenerated timestamp:-9223372036854775808\nGenerated nowInSeconds:1683304925\nQuery: SELECT * FROM system.peers_v2\nValues: \n\nType: single-query\nQuery start time: 1683304925144\nProtocol version: 5\nGenerated timestamp:-9223372036854775808\nGenerated nowInSeconds:1683304925\nQuery: SELECT * FROM system.local WHERE key='local'\nValues: \n\n(+ MORE SYSTEM QUERIES DATA)\n</code></pre>\n<p>In my case, I did a GRANT ALL PERMISSIONS query with a WHERE clause which returned me a SyntaxException and I want to trace that in order to know what java Class is throwing that error.</p>\n"},{"tags":["java","spring-boot","junit"],"comments":[{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1683311509,"post_id":76184996,"comment_id":134353056,"body_markdown":"Did you set up this variable for application.yml in test folder?","body":"Did you set up this variable for application.yml in test folder?"},{"owner":{"account_id":22513973,"reputation":11,"user_id":16708492,"display_name":"tpdovu"},"score":0,"creation_date":1683313578,"post_id":76184996,"comment_id":134353457,"body_markdown":"@Feelfree yes, I have an application-test.yml in my test/resources. I also tried with application.yml in test/resources and both have not worked","body":"@Feelfree yes, I have an application-test.yml in my test/resources. I also tried with application.yml in test/resources and both have not worked"}],"answers":[{"comments":[{"owner":{"account_id":22513973,"reputation":11,"user_id":16708492,"display_name":"tpdovu"},"score":0,"creation_date":1683650998,"post_id":76186040,"comment_id":134398046,"body_markdown":"I forgot to mention that I did try to @Mock EchoProperties. Based on this post https://stackoverflow.com/questions/58995002/how-to-load-values-from-custom-properties-file-for-junit-testing-using-mockito, mocked objects are not able to read values from properties files. This is what led me to autowiring EchoProperties.\n\nIn your answer I see you did use Autowired for both the dependent objects. I tried that and received the same error.","body":"I forgot to mention that I did try to @Mock EchoProperties. Based on this post <a href=\"https://stackoverflow.com/questions/58995002/how-to-load-values-from-custom-properties-file-for-junit-testing-using-mockito\" title=\"how to load values from custom properties file for junit testing using mockito\">stackoverflow.com/questions/58995002/&hellip;</a>, mocked objects are not able to read values from properties files. This is what led me to autowiring EchoProperties.  In your answer I see you did use Autowired for both the dependent objects. I tried that and received the same error."}],"tags":[],"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683322150,"creation_date":1683322150,"answer_id":76186040,"question_id":76184996,"body_markdown":"You&#39;re not mocking the nested service, that&#39;s why it doesn&#39;t work. Using `@InjectMocks` you are not mocking `EchoProeprties.class`.\r\n\r\n`@InjectMocks` annotation tells to Mockito to inject all mocks (objects annotated by `@Mock` annotation)\r\n\r\nHere is code example:\r\n\r\n```java\r\n@ExtendWith({SpringExtension.class})\r\n@ContextConfiguration(classes = {EchoPlusPlusController.class, EchoProperties.class})\r\n@ActiveProfiles(&quot;test&quot;)\r\nclass EchoPlusPlusControllerTest {\r\n\r\n    @Autowired\r\n    EchoPlusPlusController echoPlusPlusController;\r\n\r\n    @Autowired\r\n    EchoProperties echoProperties;\r\n\r\n    private MockMvc mockMvc;\r\n\r\n    @BeforeEach()\r\n    void setUp() throws Exception {\r\n        MockitoAnnotations.openMocks(this);\r\n        mockMvc = MockMvcBuilders.standaloneSetup(echoPlusPlusController).build();\r\n        assertNotNull(mockMvc);\r\n        assertNotNull(echoPlusPlusController);\r\n    }\r\n\r\n    @Test\r\n    final void testEchoMessageSuccess() throws Exception {\r\n        try {\r\n            MockHttpServletResponse mockGetMessageResponse = mockMvc\r\n                    .perform(MockMvcRequestBuilders.get(&quot;/api/echo-echoplusplus/echomessage&quot;)\r\n                            .contentType(MediaType.APPLICATION_JSON))\r\n                    .andExpect(status().isOk()).andReturn().getResponse();\r\n\r\n            String responseString = mockGetMessageResponse.getContentAsString();\r\n            EchoPlusPlusResponse actualResponse = new ObjectMapper().readValue(responseString,\r\n                    EchoPlusPlusResponse.class);\r\n\r\n            assertNotNull(mockGetMessageResponse);\r\n            assertEquals(&quot;hello world!&quot;, actualResponse.getMessage());\r\n\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```","title":"Running junit test with a class that reads from application-test.yml file","body":"<p>You're not mocking the nested service, that's why it doesn't work. Using <code>@InjectMocks</code> you are not mocking <code>EchoProeprties.class</code>.</p>\n<p><code>@InjectMocks</code> annotation tells to Mockito to inject all mocks (objects annotated by <code>@Mock</code> annotation)</p>\n<p>Here is code example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith({SpringExtension.class})\n@ContextConfiguration(classes = {EchoPlusPlusController.class, EchoProperties.class})\n@ActiveProfiles(&quot;test&quot;)\nclass EchoPlusPlusControllerTest {\n\n    @Autowired\n    EchoPlusPlusController echoPlusPlusController;\n\n    @Autowired\n    EchoProperties echoProperties;\n\n    private MockMvc mockMvc;\n\n    @BeforeEach()\n    void setUp() throws Exception {\n        MockitoAnnotations.openMocks(this);\n        mockMvc = MockMvcBuilders.standaloneSetup(echoPlusPlusController).build();\n        assertNotNull(mockMvc);\n        assertNotNull(echoPlusPlusController);\n    }\n\n    @Test\n    final void testEchoMessageSuccess() throws Exception {\n        try {\n            MockHttpServletResponse mockGetMessageResponse = mockMvc\n                    .perform(MockMvcRequestBuilders.get(&quot;/api/echo-echoplusplus/echomessage&quot;)\n                            .contentType(MediaType.APPLICATION_JSON))\n                    .andExpect(status().isOk()).andReturn().getResponse();\n\n            String responseString = mockGetMessageResponse.getContentAsString();\n            EchoPlusPlusResponse actualResponse = new ObjectMapper().readValue(responseString,\n                    EchoPlusPlusResponse.class);\n\n            assertNotNull(mockGetMessageResponse);\n            assertEquals(&quot;hello world!&quot;, actualResponse.getMessage());\n\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":22513973,"reputation":11,"user_id":16708492,"display_name":"tpdovu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":338,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683322150,"creation_date":1683311076,"question_id":76184996,"body_markdown":"I&#39;m attempting to perform a junit test on my controller which receives a variable from application.yml file and prints it out. \r\n\r\nProperties class in src/main/java:\r\n```\r\n@Data\r\n@Validated\r\n@ConfigurationProperties(EchoProperties.PREFIX)\r\n@Component\r\npublic class EchoProperties {\r\n\r\n\tpublic static final String PREFIX = &quot;vmh0.echo&quot;;\r\n\r\n\tprivate String message;\r\n\r\n}\r\n```\r\nController class that autowires the properties class also in src/main/java:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/echo-echoplusplus&quot;)\r\npublic class EchoPlusPlusController {\r\n\t\r\n\t@Autowired\r\n\tEchoProperties echoProperties;\r\n\r\n\t@GetMapping(&quot;/echomessage&quot;)\r\n\tpublic EchoPlusPlusResponse echoMessage() {\r\n\t\treturn new EchoPlusPlusResponse(new EchoPlusPlusRes(echoProperties.getMessage()));\r\n\t}\r\n}\r\n```\r\n\r\nI have an application.yml in my src/main/resources and application-test.yml in my src/test/resources:\r\n\r\n```\r\nvmh0:\r\n echo:\r\n  message: &quot;hello world&quot;\r\n```\r\n\r\nTest class in src/test/java: \r\n```\r\n@EnableConfigurationProperties\r\n@ContextConfiguration(classes = EchoProperties.class)\r\nclass EchoPlusPlusControllerTest {\r\n\r\n\t@InjectMocks\r\n\tEchoPlusPlusController echoPlusPlusController;\r\n\r\n\t@Autowired\r\n\tEchoProperties echoProperties;\r\n\r\n\tprivate MockMvc mockMvc;\r\n\r\n\t@BeforeEach()\r\n\tvoid setUp() throws Exception {\r\n\t\tMockitoAnnotations.openMocks(this);\r\n\t\tmockMvc = MockMvcBuilders.standaloneSetup(echoPlusPlusController).build();\r\n\t\tassertNotNull(mockMvc);\r\n\t\tassertNotNull(echoPlusPlusController);\r\n\t}\r\n\r\n\t@Test\r\n\tfinal void testEchoMessageSuccess() throws Exception {\r\n\t\ttry {\r\n\t\t\tMockHttpServletResponse mockGetMessageResponse = mockMvc\r\n\t\t\t\t\t.perform(MockMvcRequestBuilders.get(&quot;/api/echo-echoplusplus/echomessage&quot;)\r\n\t\t\t\t\t\t\t.contentType(MediaType.APPLICATION_JSON))\r\n\t\t\t\t\t.andExpect(status().isOk()).andReturn().getResponse();\r\n\r\n\t\t\tString responseString = mockGetMessageResponse.getContentAsString();\r\n\t\t\tEchoPlusPlusResponse actualResponse = new ObjectMapper().readValue(responseString,\r\n\t\t\t\t\tEchoPlusPlusResponse.class);\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;greeting: &quot; + echoProperties.getMessage());\r\n\r\n\t\t\tassertNotNull(mockGetMessageResponse);\r\n\t\t\tassertEquals(&quot;hello world!&quot;, actualResponse.getEchoPlusPlusRes().getMessage());\r\n\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nError:\r\n```\r\njava.lang.NullPointerException: Cannot invoke &quot;com.config.properties.EchoProperties.getMessage()&quot; because &quot;this.echoProperties&quot; is null\r\n\tat com.controller.EchoPlusPlusControllerTest.testReadProperty(EchoPlusPlusControllerTest.java:42)\r\n```\r\nThe project is functionally correct when it runs, but can&#39;t figure out how to have my EchoProperties class read from application-test.yml during testing.\r\n\r\nI&#39;m using JUnit 5 and Springboot 3","title":"Running junit test with a class that reads from application-test.yml file","body":"<p>I'm attempting to perform a junit test on my controller which receives a variable from application.yml file and prints it out.</p>\n<p>Properties class in src/main/java:</p>\n<pre><code>@Data\n@Validated\n@ConfigurationProperties(EchoProperties.PREFIX)\n@Component\npublic class EchoProperties {\n\n    public static final String PREFIX = &quot;vmh0.echo&quot;;\n\n    private String message;\n\n}\n</code></pre>\n<p>Controller class that autowires the properties class also in src/main/java:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/echo-echoplusplus&quot;)\npublic class EchoPlusPlusController {\n    \n    @Autowired\n    EchoProperties echoProperties;\n\n    @GetMapping(&quot;/echomessage&quot;)\n    public EchoPlusPlusResponse echoMessage() {\n        return new EchoPlusPlusResponse(new EchoPlusPlusRes(echoProperties.getMessage()));\n    }\n}\n</code></pre>\n<p>I have an application.yml in my src/main/resources and application-test.yml in my src/test/resources:</p>\n<pre><code>vmh0:\n echo:\n  message: &quot;hello world&quot;\n</code></pre>\n<p>Test class in src/test/java:</p>\n<pre><code>@EnableConfigurationProperties\n@ContextConfiguration(classes = EchoProperties.class)\nclass EchoPlusPlusControllerTest {\n\n    @InjectMocks\n    EchoPlusPlusController echoPlusPlusController;\n\n    @Autowired\n    EchoProperties echoProperties;\n\n    private MockMvc mockMvc;\n\n    @BeforeEach()\n    void setUp() throws Exception {\n        MockitoAnnotations.openMocks(this);\n        mockMvc = MockMvcBuilders.standaloneSetup(echoPlusPlusController).build();\n        assertNotNull(mockMvc);\n        assertNotNull(echoPlusPlusController);\n    }\n\n    @Test\n    final void testEchoMessageSuccess() throws Exception {\n        try {\n            MockHttpServletResponse mockGetMessageResponse = mockMvc\n                    .perform(MockMvcRequestBuilders.get(&quot;/api/echo-echoplusplus/echomessage&quot;)\n                            .contentType(MediaType.APPLICATION_JSON))\n                    .andExpect(status().isOk()).andReturn().getResponse();\n\n            String responseString = mockGetMessageResponse.getContentAsString();\n            EchoPlusPlusResponse actualResponse = new ObjectMapper().readValue(responseString,\n                    EchoPlusPlusResponse.class);\n            \n            System.out.println(&quot;greeting: &quot; + echoProperties.getMessage());\n\n            assertNotNull(mockGetMessageResponse);\n            assertEquals(&quot;hello world!&quot;, actualResponse.getEchoPlusPlusRes().getMessage());\n\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;com.config.properties.EchoProperties.getMessage()&quot; because &quot;this.echoProperties&quot; is null\n    at com.controller.EchoPlusPlusControllerTest.testReadProperty(EchoPlusPlusControllerTest.java:42)\n</code></pre>\n<p>The project is functionally correct when it runs, but can't figure out how to have my EchoProperties class read from application-test.yml during testing.</p>\n<p>I'm using JUnit 5 and Springboot 3</p>\n"},{"tags":["java","spring","spring-boot","javabeans","constructor-injection"],"answers":[{"tags":[],"owner":{"account_id":15256323,"reputation":16,"user_id":11007929,"display_name":"Damian Dunajski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683321813,"creation_date":1683275377,"answer_id":76180248,"question_id":74735992,"body_markdown":"This is because Spring initializes this field via setter, between constructor execution and the call to the `@Bean` annotated method. AFAIK, there&#39;s no direct way to do this via constructor, you could use `@Value(&quot;#{${some.prefix}}&quot;)`, but this would require to define properties peculiarly, i.e. `{key1:&#39;value1&#39;,key2:&#39;value2&#39;,....}`\r\n\r\nEDIT: Since Springboot 2.2, you can leverage `@ConstructorBinding` annotation.","title":"Spring Bean od properties Map&lt;String, POJO&gt; in @Configuration class is visible in class when @Bean method is executing, but not in constructor","body":"<p>This is because Spring initializes this field via setter, between constructor execution and the call to the <code>@Bean</code> annotated method. AFAIK, there's no direct way to do this via constructor, you could use <code>@Value(&quot;#{${some.prefix}}&quot;)</code>, but this would require to define properties peculiarly, i.e. <code>{key1:'value1',key2:'value2',....}</code></p>\n<p>EDIT: Since Springboot 2.2, you can leverage <code>@ConstructorBinding</code> annotation.</p>\n"}],"owner":{"account_id":16885473,"reputation":23,"user_id":12210394,"display_name":"Cezary"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76180248,"answer_count":1,"score":1,"last_activity_date":1683321813,"creation_date":1670531479,"question_id":74735992,"body_markdown":"A have simple @Configuration class:\r\n```\r\n@Data //setters and getters\r\n@ComponentScan\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;some.prefix&quot;)\r\npublic class SomeAutoConfig {\r\n\r\n    public SomeAutoConfig(Map&lt;String, Pojo&gt; properties) {\r\n        this.properties= properties;\r\n    }\r\n\r\n    private final Map&lt;String, Pojo&gt; properties;\r\n\r\n    @Bean\r\n    String string() {\r\n        return &quot;test string&quot;;\r\n    }\r\n\r\n}\r\n```\r\nOn debug I have breakpoints on constructor(this.properties= properties), and @Bean method(return &quot;test string&quot;).\r\n\r\nI don&#39;t see properties as constructor parameter, but in @Bean method there are visible.\r\n\r\nWhy are there see properties only then?\r\nIs good way to Iinject this bean better and can be accisible from constructor too?","title":"Spring Bean od properties Map&lt;String, POJO&gt; in @Configuration class is visible in class when @Bean method is executing, but not in constructor","body":"<p>A have simple @Configuration class:</p>\n<pre><code>@Data //setters and getters\n@ComponentScan\n@Configuration\n@ConfigurationProperties(prefix = &quot;some.prefix&quot;)\npublic class SomeAutoConfig {\n\n    public SomeAutoConfig(Map&lt;String, Pojo&gt; properties) {\n        this.properties= properties;\n    }\n\n    private final Map&lt;String, Pojo&gt; properties;\n\n    @Bean\n    String string() {\n        return &quot;test string&quot;;\n    }\n\n}\n</code></pre>\n<p>On debug I have breakpoints on constructor(this.properties= properties), and @Bean method(return &quot;test string&quot;).</p>\n<p>I don't see properties as constructor parameter, but in @Bean method there are visible.</p>\n<p>Why are there see properties only then?\nIs good way to Iinject this bean better and can be accisible from constructor too?</p>\n"},{"tags":["java","javafx","netbeans"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1683324362,"post_id":76185661,"comment_id":134355114,"body_markdown":"I think that, behind the scenes, JavaFX makes use of gtk and gstreamer.   Earlier versions of JavaFX used gtk2 and later versions gtk3, as far as I know. You probably need up to date versions of those systems in your Linux installation.  The failure to load gtk libraries indicates that you probably don’t have the required prerequisite library versions installed.  I don’t have advice on how to do that on your OS.","body":"I think that, behind the scenes, JavaFX makes use of gtk and gstreamer.   Earlier versions of JavaFX used gtk2 and later versions gtk3, as far as I know. You probably need up to date versions of those systems in your Linux installation.  The failure to load gtk libraries indicates that you probably don’t have the required prerequisite library versions installed.  I don’t have advice on how to do that on your OS."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1683324446,"post_id":76185661,"comment_id":134355127,"body_markdown":"Alternately you might try [vlcj-javafx](https://github.com/caprica/vlcj-javafx).  I know it plays videos, not sure about mp3.","body":"Alternately you might try <a href=\"https://github.com/caprica/vlcj-javafx\" rel=\"nofollow noreferrer\">vlcj-javafx</a>.  I know it plays videos, not sure about mp3."}],"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683321686,"creation_date":1683317600,"question_id":76185661,"body_markdown":"After using Netbeans 12.6 (the Netbeans project was in Limbo) locally for a few years, I actually installed the Netbeans flatpak package (latest update as of 2023-05-05). I&#39;m running on Manjaro (tried .WAV files, but they also don&#39;t work with the same error).\r\n\r\nNetbeans Information:\r\n\r\n    Product Version: Apache NetBeans IDE 17\r\n    Java: 11.0.18; OpenJDK 64-Bit Server VM 11.0.18+10\r\n    Runtime: OpenJDK Runtime Environment 11.0.18+10\r\n    System: Linux version 6.1.25-1-MANJARO running on amd64; UTF-8; en_GB (nb)\r\n    User directory: /home/sarah/.netbeans/17\r\n    Cache directory: /home/sarah/.cache/netbeans/17\r\n[![enter image description here][1]][1]\r\n\r\nThis caused an error in one of the projects I&#39;m working on, and for some reason, in the media player (I suspect some backend issue, not a code issue).\r\nI changed the Java platform from JDK19, to JDK20, however, the Netbeans info center seems to report java 11, despite my `java -version` being: `java version &quot;20&quot; 2023-03-21`. I&#39;m guessing this has something to do with flatpak being sandboxed, but I&#39;m still not sure if even that is the issue.\r\n\r\nWhat should my next move be? The project ran properly before the Netbeans upgrade, but not after, and no code was changed.\r\n\r\nHere is the code that triggers it (last line is where it throws the exception/creation of the media player, all files exist as checked by sout):\r\n\r\n    public void playRandomTrack() {\r\n            var random = new Random();\r\n            int randomInt = random.nextInt(this.trackPaths.size());\r\n            //Ensure that timecode file is not selected\r\n            while (this.trackPaths.get(randomInt).equals(TIMECODE_FILE)) {\r\n                randomInt = random.nextInt(this.trackPaths.size());\r\n            }\r\n            var path = this.trackPaths.get(randomInt);\r\n            var filePath = path.toString();\r\n            var filePathURI = path.toUri().toString();\r\n            System.out.println(&quot;Music Track Loaded: &quot; + filePathURI);\r\n            System.out.println(&quot;File exists: &quot; + Files.exists(path));\r\n            var media = new Media(filePathURI);\r\n            var newPlayer = new MediaPlayer(media);\r\n\r\n[![enter image description here][2]][2]\r\n(NOTE: mp3 Files worked prior, and are not corrupted or changed in any way; I&#39;ve played them in VLC to check)\r\n**And the full program output (other answers which were similar mentioned theming being broken leading to issue on linux):**\r\n\r\n    -------------&lt; com.protonmail.sarahszabo.mizar.core:Mizar &gt;-------------\r\n    Building Mizar 1.0\r\n    --------------------------------[ jar ]---------------------------------\r\n    \r\n    --- exec-maven-plugin:3.1.0:exec (default-cli) @ Mizar ---\r\n    Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=gasp\r\n    May 05, 2023 3:54:46 PM com.sun.javafx.application.PlatformImpl startup\r\n    WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @7923f745&#39;\r\n    Gtk-Message: 15:54:46.418: Failed to load module &quot;xapp-gtk3-module&quot;\r\n    Gtk-Message: 15:54:46.418: Failed to load module &quot;canberra-gtk-module&quot;\r\n    Music Track Loaded: file:///home/sarah/NetBeansProjects/Mizar/Music/NIHILISM.A.opus.mp3\r\n    File exists: true\r\n    May 05, 2023 3:54:51 PM com.protonmail.sarahszabo.mizar.ui.MizarUIUtils lambda$getStandardUncaughtExceptionHandler$2\r\n    SEVERE: null\r\n    java.lang.RuntimeException: MediaException: UNKNOWN : com.sun.media.jfxmedia.MediaException: Could not create player! : com.sun.media.jfxmedia.MediaException: Could not create player!\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarUIUtils.lambda$getStandardUncaughtExceptionHandler$2(MizarUIUtils.java:141)\r\n    \tat com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \tat com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\r\n    \tat com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n    \tat com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\r\n    \tat com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:316)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n    Caused by: MediaException: UNKNOWN : com.sun.media.jfxmedia.MediaException: Could not create player! : com.sun.media.jfxmedia.MediaException: Could not create player!\r\n    \tat javafx.scene.media.MediaException.exceptionToMediaException(MediaException.java:147)\r\n    \tat javafx.scene.media.MediaPlayer.init(MediaPlayer.java:518)\r\n    \tat javafx.scene.media.MediaPlayer.&lt;init&gt;(MediaPlayer.java:421)\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarAudioPlayer.playRandomTrack(MizarAudioPlayer.java:103)\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarAudioPlayer.&lt;init&gt;(MizarAudioPlayer.java:56)\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarUI.lambda$start$1(MizarUI.java:135)\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarUIUtils.lambda$showProgressBarDialog$10(MizarUIUtils.java:461)\r\n    \t... 7 more\r\n    Caused by: com.sun.media.jfxmedia.MediaException: Could not create player!\r\n    \tat com.sun.media.jfxmediaimpl.NativeMediaManager.getPlayer(NativeMediaManager.java:297)\r\n    \tat com.sun.media.jfxmedia.MediaManager.getPlayer(MediaManager.java:118)\r\n    \tat javafx.scene.media.MediaPlayer.init(MediaPlayer.java:474)\r\n    \t... 12 more\r\n\r\n**POM (`&lt;javafx.version&gt;20.0.1&lt;/javafx.version&gt;`):**\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-swing&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-media --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n**System Specs:**\r\nSystem:\r\n\r\n      Kernel: 6.1.25-1-MANJARO arch: x86_64 bits: 64 compiler: gcc v: 12.2.1\r\n        parameters: BOOT_IMAGE=/@/boot/vmlinuz-6.1-x86_64\r\n        root=UUID=f11386cf-342d-47ac-84e6-484b7b2f377d rw rootflags=subvol=@\r\n        radeon.modeset=1 nvdia-drm.modeset=1 quiet\r\n        cryptdevice=UUID=059df4b4-5be4-44d6-a23a-de81135eb5b4:luks-disk\r\n        root=/dev/mapper/luks-disk apparmor=1 security=apparmor\r\n        resume=/dev/mapper/luks-swap udev.log_priority=3\r\n      Desktop: KDE Plasma v: 5.27.4 tk: Qt v: 5.15.8 wm: kwin_x11 dm: SDDM\r\n        Distro: Manjaro Linux base: Arch Linux\r\n    Machine:\r\n      Type: Desktop Mobo: ASUSTeK model: PRIME X570-PRO v: Rev X.0x\r\n        serial: &lt;filter&gt; UEFI: American Megatrends v: 4408 date: 10/27/2022\r\n    CPU:\r\n      Info: model: AMD Ryzen 9 5950X socket: AM4 bits: 64 type: MT MCP arch: Zen 3+\r\n        gen: 4 level: v3 note: check built: 2022 process: TSMC n6 (7nm)\r\n        family: 0x19 (25) model-id: 0x21 (33) stepping: 0 microcode: 0xA201016\r\n      Topology: cpus: 1x cores: 16 tpc: 2 threads: 32 smt: enabled cache:\r\n        L1: 1024 KiB desc: d-16x32 KiB; i-16x32 KiB L2: 8 MiB desc: 16x512 KiB\r\n        L3: 64 MiB desc: 2x32 MiB\r\n      Speed (MHz): avg: 2812 high: 4100 min/max: 2200/6358 boost: disabled\r\n        base/boost: 4100/5050 scaling: driver: acpi-cpufreq governor: schedutil\r\n        volts: 1.1 V\r\n    Graphics:\r\n      Device-1: NVIDIA GA104 [GeForce RTX 3070] vendor: ASUSTeK driver: nvidia\r\n        v: 530.41.03 alternate: nouveau,nvidia_drm non-free: 530.xx+\r\n        status: current (as of 2023-03) arch: Ampere code: GAxxx\r\n        process: TSMC n7 (7nm) built: 2020-22 pcie: gen: 4 speed: 16 GT/s lanes: 8\r\n        link-max: lanes: 16 bus-ID: 0b:00.0 chip-ID: 10de:2484 class-ID: 0300\r\n      Device-2: AMD Cape Verde PRO [Radeon HD 7750/8740 / R7 250E]\r\n        vendor: VISIONTEK driver: radeon v: kernel alternate: amdgpu arch: GCN-1\r\n        code: Southern Islands process: TSMC 28nm built: 2011-20 pcie: gen: 3\r\n        speed: 8 GT/s lanes: 8 link-max: lanes: 16 ports: active: DP-3,DP-4\r\n        empty: DP-1, DP-2, DP-5, DP-6 bus-ID: 0c:00.0 chip-ID: 1002:683f\r\n        class-ID: 0300 temp: 56.0 C\r\n      Display: x11 server: X.Org v: 21.1.8 with: Xwayland v: 23.1.1\r\n        compositor: kwin_x11 driver: X: loaded: modesetting,nvidia dri: radeonsi\r\n        gpu: radeon display-ID: :0 screens: 1\r\n    Info:\r\n      Processes: 869 Uptime: 2d 3h 15m wakeups: 0 Init: systemd v: 252\r\n      default: graphical tool: systemctl Compilers: gcc: 12.2.1 alt: 10\r\n      clang: 15.0.7 Packages: 2199 pm: pacman pkgs: 2142 libs: 503 tools: pamac,yay\r\n      pm: flatpak pkgs: 40 pm: snap pkgs: 17 Shell: Bash (su) v: 5.1.16\r\n      running-in: yakuake inxi: 3.3.26\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qF5Ef.png\r\n  [2]: https://i.stack.imgur.com/CBGFf.png","title":"JavaFX UNKNOWN Media Exception Upon Netbeans Upgrade?","body":"<p>After using Netbeans 12.6 (the Netbeans project was in Limbo) locally for a few years, I actually installed the Netbeans flatpak package (latest update as of 2023-05-05). I'm running on Manjaro (tried .WAV files, but they also don't work with the same error).</p>\n<p>Netbeans Information:</p>\n<pre><code>Product Version: Apache NetBeans IDE 17\nJava: 11.0.18; OpenJDK 64-Bit Server VM 11.0.18+10\nRuntime: OpenJDK Runtime Environment 11.0.18+10\nSystem: Linux version 6.1.25-1-MANJARO running on amd64; UTF-8; en_GB (nb)\nUser directory: /home/sarah/.netbeans/17\nCache directory: /home/sarah/.cache/netbeans/17\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/qF5Ef.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qF5Ef.png\" alt=\"enter image description here\" /></a></p>\n<p>This caused an error in one of the projects I'm working on, and for some reason, in the media player (I suspect some backend issue, not a code issue).\nI changed the Java platform from JDK19, to JDK20, however, the Netbeans info center seems to report java 11, despite my <code>java -version</code> being: <code>java version &quot;20&quot; 2023-03-21</code>. I'm guessing this has something to do with flatpak being sandboxed, but I'm still not sure if even that is the issue.</p>\n<p>What should my next move be? The project ran properly before the Netbeans upgrade, but not after, and no code was changed.</p>\n<p>Here is the code that triggers it (last line is where it throws the exception/creation of the media player, all files exist as checked by sout):</p>\n<pre><code>public void playRandomTrack() {\n        var random = new Random();\n        int randomInt = random.nextInt(this.trackPaths.size());\n        //Ensure that timecode file is not selected\n        while (this.trackPaths.get(randomInt).equals(TIMECODE_FILE)) {\n            randomInt = random.nextInt(this.trackPaths.size());\n        }\n        var path = this.trackPaths.get(randomInt);\n        var filePath = path.toString();\n        var filePathURI = path.toUri().toString();\n        System.out.println(&quot;Music Track Loaded: &quot; + filePathURI);\n        System.out.println(&quot;File exists: &quot; + Files.exists(path));\n        var media = new Media(filePathURI);\n        var newPlayer = new MediaPlayer(media);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/CBGFf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CBGFf.png\" alt=\"enter image description here\" /></a>\n(NOTE: mp3 Files worked prior, and are not corrupted or changed in any way; I've played them in VLC to check)\n<strong>And the full program output (other answers which were similar mentioned theming being broken leading to issue on linux):</strong></p>\n<pre><code>-------------&lt; com.protonmail.sarahszabo.mizar.core:Mizar &gt;-------------\nBuilding Mizar 1.0\n--------------------------------[ jar ]---------------------------------\n\n--- exec-maven-plugin:3.1.0:exec (default-cli) @ Mizar ---\nPicked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=gasp\nMay 05, 2023 3:54:46 PM com.sun.javafx.application.PlatformImpl startup\nWARNING: Unsupported JavaFX configuration: classes were loaded from 'unnamed module @7923f745'\nGtk-Message: 15:54:46.418: Failed to load module &quot;xapp-gtk3-module&quot;\nGtk-Message: 15:54:46.418: Failed to load module &quot;canberra-gtk-module&quot;\nMusic Track Loaded: file:///home/sarah/NetBeansProjects/Mizar/Music/NIHILISM.A.opus.mp3\nFile exists: true\nMay 05, 2023 3:54:51 PM com.protonmail.sarahszabo.mizar.ui.MizarUIUtils lambda$getStandardUncaughtExceptionHandler$2\nSEVERE: null\njava.lang.RuntimeException: MediaException: UNKNOWN : com.sun.media.jfxmedia.MediaException: Could not create player! : com.sun.media.jfxmedia.MediaException: Could not create player!\n    at com.protonmail.sarahszabo.mizar.ui.MizarUIUtils.lambda$getStandardUncaughtExceptionHandler$2(MizarUIUtils.java:141)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\n    at com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:316)\n    at java.base/java.lang.Thread.run(Thread.java:1623)\nCaused by: MediaException: UNKNOWN : com.sun.media.jfxmedia.MediaException: Could not create player! : com.sun.media.jfxmedia.MediaException: Could not create player!\n    at javafx.scene.media.MediaException.exceptionToMediaException(MediaException.java:147)\n    at javafx.scene.media.MediaPlayer.init(MediaPlayer.java:518)\n    at javafx.scene.media.MediaPlayer.&lt;init&gt;(MediaPlayer.java:421)\n    at com.protonmail.sarahszabo.mizar.ui.MizarAudioPlayer.playRandomTrack(MizarAudioPlayer.java:103)\n    at com.protonmail.sarahszabo.mizar.ui.MizarAudioPlayer.&lt;init&gt;(MizarAudioPlayer.java:56)\n    at com.protonmail.sarahszabo.mizar.ui.MizarUI.lambda$start$1(MizarUI.java:135)\n    at com.protonmail.sarahszabo.mizar.ui.MizarUIUtils.lambda$showProgressBarDialog$10(MizarUIUtils.java:461)\n    ... 7 more\nCaused by: com.sun.media.jfxmedia.MediaException: Could not create player!\n    at com.sun.media.jfxmediaimpl.NativeMediaManager.getPlayer(NativeMediaManager.java:297)\n    at com.sun.media.jfxmedia.MediaManager.getPlayer(MediaManager.java:118)\n    at javafx.scene.media.MediaPlayer.init(MediaPlayer.java:474)\n    ... 12 more\n</code></pre>\n<p><strong>POM (<code>&lt;javafx.version&gt;20.0.1&lt;/javafx.version&gt;</code>):</strong></p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-swing&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-media --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><strong>System Specs:</strong>\nSystem:</p>\n<pre><code>  Kernel: 6.1.25-1-MANJARO arch: x86_64 bits: 64 compiler: gcc v: 12.2.1\n    parameters: BOOT_IMAGE=/@/boot/vmlinuz-6.1-x86_64\n    root=UUID=f11386cf-342d-47ac-84e6-484b7b2f377d rw rootflags=subvol=@\n    radeon.modeset=1 nvdia-drm.modeset=1 quiet\n    cryptdevice=UUID=059df4b4-5be4-44d6-a23a-de81135eb5b4:luks-disk\n    root=/dev/mapper/luks-disk apparmor=1 security=apparmor\n    resume=/dev/mapper/luks-swap udev.log_priority=3\n  Desktop: KDE Plasma v: 5.27.4 tk: Qt v: 5.15.8 wm: kwin_x11 dm: SDDM\n    Distro: Manjaro Linux base: Arch Linux\nMachine:\n  Type: Desktop Mobo: ASUSTeK model: PRIME X570-PRO v: Rev X.0x\n    serial: &lt;filter&gt; UEFI: American Megatrends v: 4408 date: 10/27/2022\nCPU:\n  Info: model: AMD Ryzen 9 5950X socket: AM4 bits: 64 type: MT MCP arch: Zen 3+\n    gen: 4 level: v3 note: check built: 2022 process: TSMC n6 (7nm)\n    family: 0x19 (25) model-id: 0x21 (33) stepping: 0 microcode: 0xA201016\n  Topology: cpus: 1x cores: 16 tpc: 2 threads: 32 smt: enabled cache:\n    L1: 1024 KiB desc: d-16x32 KiB; i-16x32 KiB L2: 8 MiB desc: 16x512 KiB\n    L3: 64 MiB desc: 2x32 MiB\n  Speed (MHz): avg: 2812 high: 4100 min/max: 2200/6358 boost: disabled\n    base/boost: 4100/5050 scaling: driver: acpi-cpufreq governor: schedutil\n    volts: 1.1 V\nGraphics:\n  Device-1: NVIDIA GA104 [GeForce RTX 3070] vendor: ASUSTeK driver: nvidia\n    v: 530.41.03 alternate: nouveau,nvidia_drm non-free: 530.xx+\n    status: current (as of 2023-03) arch: Ampere code: GAxxx\n    process: TSMC n7 (7nm) built: 2020-22 pcie: gen: 4 speed: 16 GT/s lanes: 8\n    link-max: lanes: 16 bus-ID: 0b:00.0 chip-ID: 10de:2484 class-ID: 0300\n  Device-2: AMD Cape Verde PRO [Radeon HD 7750/8740 / R7 250E]\n    vendor: VISIONTEK driver: radeon v: kernel alternate: amdgpu arch: GCN-1\n    code: Southern Islands process: TSMC 28nm built: 2011-20 pcie: gen: 3\n    speed: 8 GT/s lanes: 8 link-max: lanes: 16 ports: active: DP-3,DP-4\n    empty: DP-1, DP-2, DP-5, DP-6 bus-ID: 0c:00.0 chip-ID: 1002:683f\n    class-ID: 0300 temp: 56.0 C\n  Display: x11 server: X.Org v: 21.1.8 with: Xwayland v: 23.1.1\n    compositor: kwin_x11 driver: X: loaded: modesetting,nvidia dri: radeonsi\n    gpu: radeon display-ID: :0 screens: 1\nInfo:\n  Processes: 869 Uptime: 2d 3h 15m wakeups: 0 Init: systemd v: 252\n  default: graphical tool: systemctl Compilers: gcc: 12.2.1 alt: 10\n  clang: 15.0.7 Packages: 2199 pm: pacman pkgs: 2142 libs: 503 tools: pamac,yay\n  pm: flatpak pkgs: 40 pm: snap pkgs: 17 Shell: Bash (su) v: 5.1.16\n  running-in: yakuake inxi: 3.3.26\n</code></pre>\n"},{"tags":["java","arrays","arraylist","rest-assured"],"comments":[{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":3,"creation_date":1627278566,"post_id":68525014,"comment_id":121103490,"body_markdown":"One is an array containing `abcd` and the other is an array containing an array containing `abcd`.","body":"One is an array containing <code>abcd</code> and the other is an array containing an array containing <code>abcd</code>."},{"owner":{"account_id":18329183,"reputation":43,"user_id":13348140,"display_name":"Aakash V"},"score":0,"creation_date":1627278860,"post_id":68525014,"comment_id":121103548,"body_markdown":"How to access the second one?","body":"How to access the second one?"},{"owner":{"account_id":196869,"reputation":402550,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":0,"creation_date":1627279176,"post_id":68525014,"comment_id":121103615,"body_markdown":"`[[abcd]]` is basically an array inside an array. First you need to access the outer array, which you access like any other array. The result of that is another array, which you then *again* access like any other array.","body":"<code>[[abcd]]</code> is basically an array inside an array. First you need to access the outer array, which you access like any other array. The result of that is another array, which you then <i>again</i> access like any other array."},{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":0,"creation_date":1627280773,"post_id":68525014,"comment_id":121103963,"body_markdown":"Neither is valid java code, so your question does not make any sense, IMHO. Please provide some code snippet to explain your question.","body":"Neither is valid java code, so your question does not make any sense, IMHO. Please provide some code snippet to explain your question."},{"owner":{"account_id":12695174,"reputation":45207,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1627281708,"post_id":68525014,"comment_id":121104188,"body_markdown":"Are you talking about arrays or ArrayList’s? I believe this question could be improved with some code.","body":"Are you talking about arrays or ArrayList’s? I believe this question could be improved with some code."},{"owner":{"account_id":18329183,"reputation":43,"user_id":13348140,"display_name":"Aakash V"},"score":0,"creation_date":1627297123,"post_id":68525014,"comment_id":121109677,"body_markdown":"yes I am using rest assured and these are extracted from response","body":"yes I am using rest assured and these are extracted from response"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1683326344,"post_id":68525014,"comment_id":134355359,"body_markdown":"One&#39;s a box containing something. The other&#39;s a box containing a box containing something.","body":"One&#39;s a box containing something. The other&#39;s a box containing a box containing something."}],"answers":[{"tags":[],"owner":{"account_id":15362925,"reputation":61,"user_id":11083250,"display_name":"Ishaque3 Nizamani"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627279346,"creation_date":1627279346,"answer_id":68525137,"question_id":68525014,"body_markdown":"*To my knowledge, these two are different things*\r\n[&quot;abcd&quot;] this means an array has one string &quot;abcd&quot; element.\r\n[[&quot;abcd&quot;]] this means an array has one array [&quot;abcd&quot;] element.","title":"Are [&quot;abcd&quot;] and [[&quot;abcd&quot;]] the same?","body":"<p><em>To my knowledge, these two are different things</em>\n[&quot;abcd&quot;] this means an array has one string &quot;abcd&quot; element.\n[[&quot;abcd&quot;]] this means an array has one array [&quot;abcd&quot;] element.</p>\n"},{"tags":[],"owner":{"account_id":9166350,"reputation":13,"user_id":6815775,"display_name":"David Ricardo"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1627279844,"creation_date":1627279844,"answer_id":68525220,"question_id":68525014,"body_markdown":"Absolutely different, a one-dimensional array, a two-dimensional array,in many languages,reference form it, [0] and [0][0]","title":"Are [&quot;abcd&quot;] and [[&quot;abcd&quot;]] the same?","body":"<p>Absolutely different, a one-dimensional array, a two-dimensional array,in many languages,reference form it, [0] and [0][0]</p>\n"},{"comments":[{"owner":{"account_id":12695174,"reputation":45207,"user_id":9223839,"display_name":"Joakim Danielson"},"score":1,"creation_date":1627282096,"post_id":68525508,"comment_id":121104270,"body_markdown":"This is a duplicate of the already posted answers, just with more words.","body":"This is a duplicate of the already posted answers, just with more words."}],"tags":[],"owner":{"account_id":18085501,"reputation":657,"user_id":13146544,"display_name":"Samudra Ganguly"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1627281718,"creation_date":1627281718,"answer_id":68525508,"question_id":68525014,"body_markdown":"Yes, [&quot;abcd&quot;] and [[&quot;abcd&quot;]] are completely different. Let us understand why.\r\nLet us consider an array [&quot;abcd&quot;]. As you can see, it contains only one element i.e. &quot;abcd&quot;. So this is an array that contains a single string value. Now for [[&quot;abcd&quot;]], the outer array contains another array inside of it and the inner array contains &quot;abcd&quot;. Though their ultimate content seem to be same, they are absolutely different. One is a string array (an array that contains a string value) and the other is an array of string arrays.","title":"Are [&quot;abcd&quot;] and [[&quot;abcd&quot;]] the same?","body":"<p>Yes, [&quot;abcd&quot;] and [[&quot;abcd&quot;]] are completely different. Let us understand why.\nLet us consider an array [&quot;abcd&quot;]. As you can see, it contains only one element i.e. &quot;abcd&quot;. So this is an array that contains a single string value. Now for [[&quot;abcd&quot;]], the outer array contains another array inside of it and the inner array contains &quot;abcd&quot;. Though their ultimate content seem to be same, they are absolutely different. One is a string array (an array that contains a string value) and the other is an array of string arrays.</p>\n"}],"owner":{"account_id":18329183,"reputation":43,"user_id":13348140,"display_name":"Aakash V"},"comment_count":7,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1627282493,"accepted_answer_id":68525508,"answer_count":3,"score":-3,"last_activity_date":1683321575,"creation_date":1627278439,"question_id":68525014,"body_markdown":"I have used a Java ArrayList. Shen I inserted one element in the list and I have converted the Validatable response to an array list when I used assert equals it is showing that both are different\r\nlike one is [abcd] other is [[abcd]].\r\n\r\n```\r\nValidatable response = given().spec(request).filter(new ErrorLoggingFilter(errorPrintStream)).pathParams(&quot;&quot;,&quot;&quot;).when.post(endpoint).then()\r\n```\r\n\r\nThe response is of the form ArrayList when I printed that it came of the form [[abcd]]. ","title":"Are [&quot;abcd&quot;] and [[&quot;abcd&quot;]] the same?","body":"<p>I have used a Java ArrayList. Shen I inserted one element in the list and I have converted the Validatable response to an array list when I used assert equals it is showing that both are different\nlike one is [abcd] other is [[abcd]].</p>\n<pre><code>Validatable response = given().spec(request).filter(new ErrorLoggingFilter(errorPrintStream)).pathParams(&quot;&quot;,&quot;&quot;).when.post(endpoint).then()\n</code></pre>\n<p>The response is of the form ArrayList when I printed that it came of the form [[abcd]].</p>\n"},{"tags":["java","android","post","request"],"owner":{"account_id":28516328,"reputation":1,"user_id":21825638,"display_name":"muskaan juneja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683321492,"creation_date":1683286886,"question_id":76181809,"body_markdown":"    public void sendVideo(Uri videouri){\r\n\r\n        //creating client\r\n        OkHttpClient client = new OkHttpClient();\r\n        File videofile = new File(videouri.getPath());\r\n        String pathofvid= videouri.getPath();\r\n        Toast.makeText(this, &quot;path of video: &quot;+ pathofvid, Toast.LENGTH_SHORT).show();\r\n\r\n        //building request body\r\n        RequestBody requestbody=  RequestBody.create(MediaType.\r\n                        parse(&quot;multipart/form-data; boundary=---011000010111000001101001&quot;),\r\n                        &quot;-----011000010111000001101001\\r\\nContent-Disposition: form-data; name=\\&quot;video\\&quot;; &quot; +\r\n                                &quot;filename=\\&quot;&quot;+videofile+&quot;\\&quot;;&quot;+&quot;\\r\\nContent-Type: &quot; +\r\n                                &quot;video/*\\r\\n\\r\\n\\r\\n-----011000010111000001101001--\\r\\n&quot;);\r\n\r\n\r\n        //build the request\r\n        Request request= new Request.Builder()\r\n                .url(&quot;https://muskan1017.pythonanywhere.com/gate-video-upload&quot;)\r\n                .post(requestbody)\r\n                .addHeader(&quot;User-Agent&quot;, &quot;Your Guard Application&quot;)\r\n                .addHeader(&quot;content-type&quot;, &quot;multipart/form-data; boundary=---011000010111000001101001&quot;)\r\n                .build();\r\n\r\n        //Execute the request..\r\n            client.newCall(request).enqueue(new Callback() {\r\n            @Override\r\n            public void onFailure(@NonNull Call call, @NonNull IOException e) {\r\n                runOnUiThread(()-&gt;Toast.makeText(Entry_GateActivity.this\r\n                ,&quot;Failed to upload video&quot;, Toast.LENGTH_SHORT).show());\r\n            }\r\n\r\n            @Override\r\n            public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\r\n                //Handling the response\r\n                String jsonresponse = response.body().string();\r\n                Log.d(TAG,&quot;Response= &quot;+jsonresponse);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\nThis is my Java code in Android Studio. Every time I am getting the same default response irrespective of the URI I give. \r\nHere is the VS Code thunder client snippet for the request:\r\n\r\n    OkHttpClient client = new OkHttpClient();\r\n    \r\n    MediaType mediaType = MediaType.parse(&quot;multipart/form-data; boundary=---011000010111000001101001&quot;);\r\n    RequestBody body = RequestBody.create(mediaType, &quot;-----011000010111000001101001\\r\\nContent-Disposition: form-data; name=\\&quot;video\\&quot;; filename=\\&quot;Test3.mp4\\&quot;\\r\\nContent-Type: video/mp4\\r\\n\\r\\n\\r\\n-----011000010111000001101001--\\r\\n&quot;);\r\n    Request request = new Request.Builder()\r\n      .url(&quot;https://muskan1017.pythonanywhere.com/gate-video-upload&quot;)\r\n      .post(body)\r\n      .addHeader(&quot;Accept&quot;, &quot;*/*&quot;)\r\n      .addHeader(&quot;User-Agent&quot;, &quot;Thunder Client (https://www.thunderclient.com)&quot;)\r\n      .addHeader(&quot;content-type&quot;, &quot;multipart/form-data; boundary=---011000010111000001101001&quot;)\r\n      .build();\r\n    \r\n    Response response = client.newCall(request).execute();\r\n\r\n\r\nAnd here is my request picture:\r\n[![Post Request image:][1]][1]\r\n\r\n\r\nI think the video is not going to the server.\r\nIs there any other code to do this request from Android Studio (Java)? Can anyone help please?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AQqG8.png","title":"I am trying to send a video in a post request to my server which contains Python code and accepts video as request.files[&#39;video]","body":"<pre><code>public void sendVideo(Uri videouri){\n\n    //creating client\n    OkHttpClient client = new OkHttpClient();\n    File videofile = new File(videouri.getPath());\n    String pathofvid= videouri.getPath();\n    Toast.makeText(this, &quot;path of video: &quot;+ pathofvid, Toast.LENGTH_SHORT).show();\n\n    //building request body\n    RequestBody requestbody=  RequestBody.create(MediaType.\n                    parse(&quot;multipart/form-data; boundary=---011000010111000001101001&quot;),\n                    &quot;-----011000010111000001101001\\r\\nContent-Disposition: form-data; name=\\&quot;video\\&quot;; &quot; +\n                            &quot;filename=\\&quot;&quot;+videofile+&quot;\\&quot;;&quot;+&quot;\\r\\nContent-Type: &quot; +\n                            &quot;video/*\\r\\n\\r\\n\\r\\n-----011000010111000001101001--\\r\\n&quot;);\n\n\n    //build the request\n    Request request= new Request.Builder()\n            .url(&quot;https://muskan1017.pythonanywhere.com/gate-video-upload&quot;)\n            .post(requestbody)\n            .addHeader(&quot;User-Agent&quot;, &quot;Your Guard Application&quot;)\n            .addHeader(&quot;content-type&quot;, &quot;multipart/form-data; boundary=---011000010111000001101001&quot;)\n            .build();\n\n    //Execute the request..\n        client.newCall(request).enqueue(new Callback() {\n        @Override\n        public void onFailure(@NonNull Call call, @NonNull IOException e) {\n            runOnUiThread(()-&gt;Toast.makeText(Entry_GateActivity.this\n            ,&quot;Failed to upload video&quot;, Toast.LENGTH_SHORT).show());\n        }\n\n        @Override\n        public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\n            //Handling the response\n            String jsonresponse = response.body().string();\n            Log.d(TAG,&quot;Response= &quot;+jsonresponse);\n        }\n    });\n\n}\n</code></pre>\n<p>This is my Java code in Android Studio. Every time I am getting the same default response irrespective of the URI I give.\nHere is the VS Code thunder client snippet for the request:</p>\n<pre><code>OkHttpClient client = new OkHttpClient();\n\nMediaType mediaType = MediaType.parse(&quot;multipart/form-data; boundary=---011000010111000001101001&quot;);\nRequestBody body = RequestBody.create(mediaType, &quot;-----011000010111000001101001\\r\\nContent-Disposition: form-data; name=\\&quot;video\\&quot;; filename=\\&quot;Test3.mp4\\&quot;\\r\\nContent-Type: video/mp4\\r\\n\\r\\n\\r\\n-----011000010111000001101001--\\r\\n&quot;);\nRequest request = new Request.Builder()\n  .url(&quot;https://muskan1017.pythonanywhere.com/gate-video-upload&quot;)\n  .post(body)\n  .addHeader(&quot;Accept&quot;, &quot;*/*&quot;)\n  .addHeader(&quot;User-Agent&quot;, &quot;Thunder Client (https://www.thunderclient.com)&quot;)\n  .addHeader(&quot;content-type&quot;, &quot;multipart/form-data; boundary=---011000010111000001101001&quot;)\n  .build();\n\nResponse response = client.newCall(request).execute();\n</code></pre>\n<p>And here is my request picture:\n<a href=\"https://i.stack.imgur.com/AQqG8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AQqG8.png\" alt=\"Post Request image:\" /></a></p>\n<p>I think the video is not going to the server.\nIs there any other code to do this request from Android Studio (Java)? Can anyone help please?</p>\n"},{"tags":["java","intellij-idea","ssh","remote-development"],"answers":[{"comments":[{"owner":{"account_id":1446722,"reputation":1714,"user_id":1364923,"accept_rate":89,"display_name":"Martin Dvoracek"},"score":2,"creation_date":1685900874,"post_id":76015103,"comment_id":134722319,"body_markdown":"It worked for me","body":"It worked for me"}],"tags":[],"owner":{"account_id":27494768,"reputation":218,"user_id":20979453,"display_name":"Jacky Liu - JetBrains"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681475458,"creation_date":1681475458,"answer_id":76015103,"question_id":76003646,"body_markdown":"This looks like a problem of a JDK distro on the local machine. Please check that the JDK, the build process runs on, has an executable named &quot;jspawnhelper&quot; in a jre/lib subdirectory. The &quot;jspawnhelper&quot; should have proper executing permissions. To run build process IDE usually uses the most recent JDK associated with the project. It is important to check the JDK that launches a program and not a program being launched (in our case this is a different VM executable)\r\n\r\nAlternatively, you may try to configure JDK to use older launching mechanism by adding flag to **File | Settings | Build, Execution, Deployment | Compiler | \\* build process VM options text field**\r\n\r\n`-Djdk.lang.Process.launchMechanism=vfork`\r\n    \r\n\r\n\r\nPlease let me know if this helps.","title":"How to fix `java: Cannot run program &quot;...&quot; (in directory &quot;...&quot;): error=0 Failed to exec spawn helper: pid: xxxx, signal: xx` issue","body":"<p>This looks like a problem of a JDK distro on the local machine. Please check that the JDK, the build process runs on, has an executable named &quot;jspawnhelper&quot; in a jre/lib subdirectory. The &quot;jspawnhelper&quot; should have proper executing permissions. To run build process IDE usually uses the most recent JDK associated with the project. It is important to check the JDK that launches a program and not a program being launched (in our case this is a different VM executable)</p>\n<p>Alternatively, you may try to configure JDK to use older launching mechanism by adding flag to <strong>File | Settings | Build, Execution, Deployment | Compiler | * build process VM options text field</strong></p>\n<p><code>-Djdk.lang.Process.launchMechanism=vfork</code></p>\n<p>Please let me know if this helps.</p>\n"}],"owner":{"account_id":28281820,"reputation":1,"user_id":21623359,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1097,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683321400,"creation_date":1681376781,"question_id":76003646,"body_markdown":"I ran my Java application using JetBrains Client remote development, as you see, I have encountered an issue with `java: Cannot run program &quot;...&quot; (in directory &quot;...&quot;): error=0 Failed to exec spawn helper: pid: xxx, signal: 11` prompt in dialog, and how to fix it.\r\n\r\n![enter image description here](https://i.stack.imgur.com/esD5C.png)\r\n\r\nCould you help me and fix the issue to run my Java application successfully?","title":"How to fix `java: Cannot run program &quot;...&quot; (in directory &quot;...&quot;): error=0 Failed to exec spawn helper: pid: xxxx, signal: xx` issue","body":"<p>I ran my Java application using JetBrains Client remote development, as you see, I have encountered an issue with <code>java: Cannot run program &quot;...&quot; (in directory &quot;...&quot;): error=0 Failed to exec spawn helper: pid: xxx, signal: 11</code> prompt in dialog, and how to fix it.</p>\n<p><img src=\"https://i.stack.imgur.com/esD5C.png\" alt=\"enter image description here\" /></p>\n<p>Could you help me and fix the issue to run my Java application successfully?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1683321065,"post_id":76185895,"comment_id":134354728,"body_markdown":"You need to close the scanner/filestream each time you&#39;re done reading from it, and then recreate it when you need to read from it again. You&#39;re not doing this.","body":"You need to close the scanner/filestream each time you&#39;re done reading from it, and then recreate it when you need to read from it again. You&#39;re not doing this."}],"answers":[{"tags":[],"owner":{"account_id":5462244,"reputation":62,"user_id":15446557,"display_name":"Rav Singh Sandhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683320916,"creation_date":1683320916,"answer_id":76185942,"question_id":76185895,"body_markdown":"One of the issue I see is that you are not resetting the fileByteStream before reading from it again to get the updated high score. After writing the high score to the file, you need to close the stream and then reopen it before reading from it again.\r\n\r\n","title":"I am making a snake game in java and am trying to make it so it shows the user&#39;s high score","body":"<p>One of the issue I see is that you are not resetting the fileByteStream before reading from it again to get the updated high score. After writing the high score to the file, you need to close the stream and then reopen it before reading from it again.</p>\n"}],"owner":{"account_id":28155485,"reputation":1,"user_id":21516279,"display_name":"Evan Schulte"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76185942,"answer_count":1,"score":-1,"last_activity_date":1683320916,"creation_date":1683320343,"question_id":76185895,"body_markdown":"I am trying to update my &quot;HighScore.txt&quot; file with the applesEaten variable if it surpasses the number that is already in the &quot;HighScore.txt&quot; file.  \r\n\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\n\r\nimport javax.swing.*;\r\nimport java.util.Random;\r\nimport java.util.Scanner;\r\n\r\npublic class GamePanel extends JPanel implements ActionListener {\r\n\r\n\tstatic final int SCREEN_WIDTH = 600;\r\n\tstatic final int SCREEN_HEIGHT = 600;\r\n\tstatic final int UNIT_SIZE = 25;\r\n\tstatic final int GAME_UNITS = (SCREEN_WIDTH * SCREEN_HEIGHT) / UNIT_SIZE;\r\n\tstatic final int DELAY = 75;\r\n\tfinal int x[] = new int[GAME_UNITS];\r\n\tfinal int y[] = new int[GAME_UNITS];\r\n\tint bodyParts = 6;\r\n\tint applesEaten;\r\n\tint highScore = 0;\r\n\tint prevHighScore;\r\n\tint appleX;\r\n\tint appleY;\r\n\tchar direction = &#39;R&#39;;\r\n\tboolean running = false;\r\n\tTimer timer;\r\n\tRandom random;\r\n\t\r\n\tGamePanel() {\r\n\t\trandom = new Random();\r\n\t\tthis.setPreferredSize(new Dimension(SCREEN_WIDTH, SCREEN_HEIGHT));\r\n\t\tthis.setBackground(Color.black);\r\n\t\tthis.setFocusable(true);\r\n\t\tthis.addKeyListener(new MyKeyAdapter());\r\n\t\tstartGame();\r\n\t}\r\n\t\r\n\tpublic void startGame() {\r\n\t\tnewApple();\r\n\t\trunning = true;\r\n\t\ttimer = new Timer(DELAY,this);\r\n\t\ttimer.start();\r\n\t}\r\n\t\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tdraw(g);\r\n\t}\r\n\t\r\n\tpublic void draw(Graphics g) {\r\n\t\t\r\n\t\tif (running) {\r\n\t\t\t/*\r\n\t\t\tfor (int i = 0; i &lt; SCREEN_HEIGHT / UNIT_SIZE; i++) {\r\n\t\t\t\tg.drawLine(i * UNIT_SIZE, 0, i * UNIT_SIZE, SCREEN_HEIGHT);\r\n\t\t\t\tg.drawLine(0, i * UNIT_SIZE, SCREEN_WIDTH, i * UNIT_SIZE);\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t\tg.setColor(Color.red);\r\n\t\t\tg.fillOval(appleX, appleY, UNIT_SIZE, UNIT_SIZE);\r\n\t\t\t\r\n\t\t\tfor (int i = 0; i &lt; bodyParts; i++) {\r\n\t\t\t\tif (i == 0) {\r\n\t\t\t\t\tg.setColor(Color.green);\r\n\t\t\t\t\tg.fillRect(x[i], y[i], UNIT_SIZE, UNIT_SIZE);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tg.setColor(new Color(45, 180, 0));\r\n\t\t\t\t\t//g.setColor(new Color(random.nextInt(255), random.nextInt(255), random.nextInt(255)));\r\n\t\t\t\t\tg.fillRect(x[i], y[i], UNIT_SIZE, UNIT_SIZE);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tg.setColor(Color.red);\r\n\t\t\tg.setFont(new Font(&quot;Ink Free&quot;, Font.BOLD, 40));\r\n\t\t\tFontMetrics metrics = getFontMetrics(g.getFont());\r\n\t\t\tg.drawString(&quot;Score: &quot; + applesEaten, (SCREEN_WIDTH - metrics.stringWidth(&quot;Score: &quot; + applesEaten)) / 2, g.getFont().getSize());\r\n\t\t}\r\n\t\telse {\r\n\t\t\tgameOver(g);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void newApple() {\r\n\t\tappleX = random.nextInt((int)(SCREEN_WIDTH / UNIT_SIZE)) * UNIT_SIZE;\r\n\t\tappleY = random.nextInt((int)(SCREEN_HEIGHT / UNIT_SIZE)) * UNIT_SIZE;\r\n\t}\r\n\t\r\n\tpublic void move() {\r\n\t\tfor (int i = bodyParts; i &gt; 0; i--) {\r\n\t\t\tx[i] = x[i-1];\r\n\t\t\ty[i] = y[i-1];\r\n\t\t}\r\n\t\t\r\n\t\tswitch(direction) {\r\n\t\tcase &#39;U&#39;:\r\n\t\t\ty[0] = y[0] - UNIT_SIZE;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase &#39;D&#39;:\r\n\t\t\ty[0] = y[0] + UNIT_SIZE;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase &#39;L&#39;:\r\n\t\t\tx[0] = x[0] - UNIT_SIZE;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase &#39;R&#39;:\r\n\t\t\tx[0] = x[0] + UNIT_SIZE;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void checkApple() {\r\n\t\t\r\n\t\tif ((x[0] == appleX) &amp;&amp; (y[0] == appleY)) {\r\n\t\t\tbodyParts++;\r\n\t\t\tapplesEaten++;\r\n\t\t\tnewApple();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic int highScoreChecker() {\r\n\t\tScanner scnr = new Scanner(System.in);\r\n\t\tFileInputStream fileByteStream = null;\r\n\t\tScanner inFS = null;\r\n\t\t\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tfileByteStream = new FileInputStream(&quot;HighScore.txt&quot;);\r\n\t\t\tinFS = new Scanner(fileByteStream);\r\n\t\t\t\r\n\t\t\tprevHighScore = inFS.nextInt();\r\n\t\t} \r\n\t\t\r\n\t\tcatch (FileNotFoundException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\tif (applesEaten &gt; prevHighScore) {\r\n\t\t\ttry {\r\n\t\t\t\tFileWriter myWriter = new FileWriter(&quot;HighScore.txt&quot;);\r\n\t\t\t\tmyWriter.write(applesEaten + &quot;&quot;);\r\n\t\t\t\tmyWriter.close();\r\n\t\t\t\t\r\n\t\t\t\tinFS = new Scanner(fileByteStream);\r\n\t\t\t\thighScore = inFS.nextInt();\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\thighScore = prevHighScore;\r\n\t\t}\r\n\t\t\r\n\t\treturn highScore;\r\n\t}\r\n```\r\n\r\n\r\nIf I put the number 3 in the file and get to only 2 apples eaten then end the game by running into the wall the game properly outputs my score for that round (2) and then the high score of 3 that I put into &quot;HighScore.txt&quot;. However, if I were to surpass 3 then the game would crash and I would get these errors. \r\n\r\n\r\n```\r\nException in thread &quot;AWT-EventQueue-0&quot; java.util.NoSuchElementException\r\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:937)\r\n\tat java.base/java.util.Scanner.next(Scanner.java:1594)\r\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2258)\r\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2212)\r\n\tat GamePanel.highScoreChecker(GamePanel.java:138)\r\n\tat GamePanel.gameOver(GamePanel.java:203)\r\n\tat GamePanel.draw(GamePanel.java:84)\r\n\tat GamePanel.paintComponent(GamePanel.java:50)\r\n\tat java.desktop/javax.swing.JComponent.paint(JComponent.java:1119)\r\n\tat java.desktop/javax.swing.JComponent.paintToOffscreen(JComponent.java:5311)\r\n\tat java.desktop/javax.swing.RepaintManager$PaintManager.paintDoubleBufferedImpl(RepaintManager.java:1657)\r\n\tat java.desktop/javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1632)\r\n\tat java.desktop/javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1570)\r\n\tat java.desktop/javax.swing.RepaintManager.paint(RepaintManager.java:1337)\r\n\tat java.desktop/javax.swing.JComponent._paintImmediately(JComponent.java:5259)\r\n\tat java.desktop/javax.swing.JComponent.paintImmediately(JComponent.java:5069)\r\n\tat java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:879)\r\n\tat java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:862)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n\tat java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:862)\r\n\tat java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:835)\r\n\tat java.desktop/javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:784)\r\n\tat java.desktop/javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1898)\r\n\tat java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n\r\n```\r\n","title":"I am making a snake game in java and am trying to make it so it shows the user&#39;s high score","body":"<p>I am trying to update my &quot;HighScore.txt&quot; file with the applesEaten variable if it surpasses the number that is already in the &quot;HighScore.txt&quot; file.</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\nimport javax.swing.*;\nimport java.util.Random;\nimport java.util.Scanner;\n\npublic class GamePanel extends JPanel implements ActionListener {\n\n    static final int SCREEN_WIDTH = 600;\n    static final int SCREEN_HEIGHT = 600;\n    static final int UNIT_SIZE = 25;\n    static final int GAME_UNITS = (SCREEN_WIDTH * SCREEN_HEIGHT) / UNIT_SIZE;\n    static final int DELAY = 75;\n    final int x[] = new int[GAME_UNITS];\n    final int y[] = new int[GAME_UNITS];\n    int bodyParts = 6;\n    int applesEaten;\n    int highScore = 0;\n    int prevHighScore;\n    int appleX;\n    int appleY;\n    char direction = 'R';\n    boolean running = false;\n    Timer timer;\n    Random random;\n    \n    GamePanel() {\n        random = new Random();\n        this.setPreferredSize(new Dimension(SCREEN_WIDTH, SCREEN_HEIGHT));\n        this.setBackground(Color.black);\n        this.setFocusable(true);\n        this.addKeyListener(new MyKeyAdapter());\n        startGame();\n    }\n    \n    public void startGame() {\n        newApple();\n        running = true;\n        timer = new Timer(DELAY,this);\n        timer.start();\n    }\n    \n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        draw(g);\n    }\n    \n    public void draw(Graphics g) {\n        \n        if (running) {\n            /*\n            for (int i = 0; i &lt; SCREEN_HEIGHT / UNIT_SIZE; i++) {\n                g.drawLine(i * UNIT_SIZE, 0, i * UNIT_SIZE, SCREEN_HEIGHT);\n                g.drawLine(0, i * UNIT_SIZE, SCREEN_WIDTH, i * UNIT_SIZE);\n            }\n            */\n            \n            g.setColor(Color.red);\n            g.fillOval(appleX, appleY, UNIT_SIZE, UNIT_SIZE);\n            \n            for (int i = 0; i &lt; bodyParts; i++) {\n                if (i == 0) {\n                    g.setColor(Color.green);\n                    g.fillRect(x[i], y[i], UNIT_SIZE, UNIT_SIZE);\n                }\n                else {\n                    g.setColor(new Color(45, 180, 0));\n                    //g.setColor(new Color(random.nextInt(255), random.nextInt(255), random.nextInt(255)));\n                    g.fillRect(x[i], y[i], UNIT_SIZE, UNIT_SIZE);\n                }\n            }\n            \n            g.setColor(Color.red);\n            g.setFont(new Font(&quot;Ink Free&quot;, Font.BOLD, 40));\n            FontMetrics metrics = getFontMetrics(g.getFont());\n            g.drawString(&quot;Score: &quot; + applesEaten, (SCREEN_WIDTH - metrics.stringWidth(&quot;Score: &quot; + applesEaten)) / 2, g.getFont().getSize());\n        }\n        else {\n            gameOver(g);\n        }\n    }\n    \n    public void newApple() {\n        appleX = random.nextInt((int)(SCREEN_WIDTH / UNIT_SIZE)) * UNIT_SIZE;\n        appleY = random.nextInt((int)(SCREEN_HEIGHT / UNIT_SIZE)) * UNIT_SIZE;\n    }\n    \n    public void move() {\n        for (int i = bodyParts; i &gt; 0; i--) {\n            x[i] = x[i-1];\n            y[i] = y[i-1];\n        }\n        \n        switch(direction) {\n        case 'U':\n            y[0] = y[0] - UNIT_SIZE;\n            break;\n            \n        case 'D':\n            y[0] = y[0] + UNIT_SIZE;\n            break;\n            \n        case 'L':\n            x[0] = x[0] - UNIT_SIZE;\n            break;\n            \n        case 'R':\n            x[0] = x[0] + UNIT_SIZE;\n            break;\n            \n        }\n    }\n    \n    public void checkApple() {\n        \n        if ((x[0] == appleX) &amp;&amp; (y[0] == appleY)) {\n            bodyParts++;\n            applesEaten++;\n            newApple();\n        }\n    }\n    \n    public int highScoreChecker() {\n        Scanner scnr = new Scanner(System.in);\n        FileInputStream fileByteStream = null;\n        Scanner inFS = null;\n        \n        try {\n            \n            fileByteStream = new FileInputStream(&quot;HighScore.txt&quot;);\n            inFS = new Scanner(fileByteStream);\n            \n            prevHighScore = inFS.nextInt();\n        } \n        \n        catch (FileNotFoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        \n        if (applesEaten &gt; prevHighScore) {\n            try {\n                FileWriter myWriter = new FileWriter(&quot;HighScore.txt&quot;);\n                myWriter.write(applesEaten + &quot;&quot;);\n                myWriter.close();\n                \n                inFS = new Scanner(fileByteStream);\n                highScore = inFS.nextInt();\n            } catch (IOException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            \n        }\n        else {\n            highScore = prevHighScore;\n        }\n        \n        return highScore;\n    }\n</code></pre>\n<p>If I put the number 3 in the file and get to only 2 apples eaten then end the game by running into the wall the game properly outputs my score for that round (2) and then the high score of 3 that I put into &quot;HighScore.txt&quot;. However, if I were to surpass 3 then the game would crash and I would get these errors.</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.util.NoSuchElementException\n    at java.base/java.util.Scanner.throwFor(Scanner.java:937)\n    at java.base/java.util.Scanner.next(Scanner.java:1594)\n    at java.base/java.util.Scanner.nextInt(Scanner.java:2258)\n    at java.base/java.util.Scanner.nextInt(Scanner.java:2212)\n    at GamePanel.highScoreChecker(GamePanel.java:138)\n    at GamePanel.gameOver(GamePanel.java:203)\n    at GamePanel.draw(GamePanel.java:84)\n    at GamePanel.paintComponent(GamePanel.java:50)\n    at java.desktop/javax.swing.JComponent.paint(JComponent.java:1119)\n    at java.desktop/javax.swing.JComponent.paintToOffscreen(JComponent.java:5311)\n    at java.desktop/javax.swing.RepaintManager$PaintManager.paintDoubleBufferedImpl(RepaintManager.java:1657)\n    at java.desktop/javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1632)\n    at java.desktop/javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1570)\n    at java.desktop/javax.swing.RepaintManager.paint(RepaintManager.java:1337)\n    at java.desktop/javax.swing.JComponent._paintImmediately(JComponent.java:5259)\n    at java.desktop/javax.swing.JComponent.paintImmediately(JComponent.java:5069)\n    at java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:879)\n    at java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:862)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n    at java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:862)\n    at java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:835)\n    at java.desktop/javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:784)\n    at java.desktop/javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1898)\n    at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","multi-tenant"],"owner":{"account_id":11527744,"reputation":36,"user_id":8447667,"display_name":"cjavierbp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683320853,"creation_date":1683320853,"question_id":76185936,"body_markdown":"I&#39;m trying to implement a schema-based multitenant to my spring boot application, but the connection is always pointing to the default (&quot;public&quot;) schema.\r\n\r\nthese are the files I added to achieve the multitenant approach:\r\n\r\nTenantContext:\r\n\r\n```\r\npublic class TenantContext {\r\n  private static final ThreadLocal&lt;String&gt; currentTenant = new InheritableThreadLocal&lt;&gt;();\r\n\r\n  public static void setCurrentTenant(String tenantId) {\r\n    currentTenant.set(tenantId);\r\n  }\r\n\r\n  public static String getCurrentTenant() {\r\n    return currentTenant.get();\r\n  }\r\n\r\n  public static void clear() {\r\n    currentTenant.remove();\r\n  }\r\n}\r\n```\r\nConectionProvider\r\n\r\n```\r\n@Component\r\npublic class MultiTenantSchemaConnectionProvider\r\n    implements MultiTenantConnectionProvider, HibernatePropertiesCustomizer {\r\n\r\n  private final DataSource dataSource;\r\n\r\n  @Autowired\r\n  public MultiTenantSchemaConnectionProvider(DataSource dataSource) {\r\n    this.dataSource = dataSource;\r\n  }\r\n\r\n  @Override\r\n  public Connection getAnyConnection() throws SQLException {\r\n    return dataSource.getConnection();\r\n  }\r\n\r\n  @Override\r\n  public void releaseAnyConnection(Connection connection) throws SQLException {\r\n    connection.close();\r\n  }\r\n\r\n  @Override\r\n  public Connection getConnection(String tenantIdentifier) throws SQLException {\r\n    final Connection connection = getAnyConnection();\r\n    connection.setSchema(tenantIdentifier);\r\n    return connection;\r\n  }\r\n\r\n  @Override\r\n  public void releaseConnection(String tenantIdentifier, Connection connection)\r\n      throws SQLException {\r\n    connection.setSchema(CurrentTenantResolver.DEFAULT_SCHEMA);\r\n    releaseAnyConnection(connection);\r\n  }\r\n\r\n  @Override\r\n  public boolean supportsAggressiveRelease() {\r\n    return false;\r\n  }\r\n\r\n  @Override\r\n  public boolean isUnwrappableAs(Class unwrapType) {\r\n    return false;\r\n  }\r\n\r\n  @Override\r\n  public &lt;T&gt; T unwrap(Class&lt;T&gt; unwrapType) {\r\n    return null;\r\n  }\r\n\r\n  @Override\r\n  public void customize(Map&lt;String, Object&gt; hibernateProperties) {\r\n    hibernateProperties.put(AvailableSettings.MULTI_TENANT_CONNECTION_PROVIDER, this);\r\n  }\r\n}\r\n```\r\n\r\nTenantResolver:\r\n\r\n```\r\n@Component\r\npublic class CurrentTenantResolver\r\n    implements CurrentTenantIdentifierResolver, HibernatePropertiesCustomizer {\r\n\r\n  public static final String DEFAULT_SCHEMA = &quot;public&quot;;\r\n\r\n  @Override\r\n  public String resolveCurrentTenantIdentifier() {\r\n    return TenantContext.getCurrentTenant() != null\r\n        ? TenantContext.getCurrentTenant()\r\n        : DEFAULT_SCHEMA;\r\n  }\r\n\r\n  @Override\r\n  public boolean validateExistingCurrentSessions() {\r\n    return true;\r\n  }\r\n\r\n  @Override\r\n  public void customize(Map&lt;String, Object&gt; hibernateProperties) {\r\n    hibernateProperties.put(AvailableSettings.MULTI_TENANT_IDENTIFIER_RESOLVER, this);\r\n  }\r\n}\r\n```\r\n\r\nInterceptor:\r\n\r\n```\r\n@Component\r\npublic class RequestInterceptor implements HandlerInterceptor {\r\n\r\n  @Override\r\n  public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object object)\r\n      throws Exception {\r\n    String tenantID = request.getHeader(&quot;X-TENANT-ID&quot;);\r\n    if (tenantID == null) {\r\n      response.setStatus(400);\r\n      return false;\r\n    }\r\n    TenantContext.setCurrentTenant(tenantID);\r\n    return true;\r\n  }\r\n\r\n  @Override\r\n  public void postHandle(\r\n      HttpServletRequest request,\r\n      HttpServletResponse response,\r\n      Object handler,\r\n      ModelAndView modelAndView)\r\n      throws Exception {\r\n    TenantContext.clear();\r\n  }\r\n}\r\n```\r\n\r\nInterceptorConfig:\r\n\r\n```\r\n@Component\r\npublic class InterceptorConfig implements WebMvcConfigurer {\r\n\r\n    @Autowired\r\n    RequestInterceptor requestInterceptor;\r\n\r\n    @Override\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        registry.addInterceptor(requestInterceptor);\r\n    }\r\n}\r\n```\r\n\r\nis there something I&#39;m missing?\r\n\r\nI have the &quot;users&quot; entity in the default schema and the tenant1 schema. When I send a request wit the header **X-TENANT-ID=tenant1** I got the users from the default schema","title":"Spring boot schema-based multitenant is always pointing to default schema","body":"<p>I'm trying to implement a schema-based multitenant to my spring boot application, but the connection is always pointing to the default (&quot;public&quot;) schema.</p>\n<p>these are the files I added to achieve the multitenant approach:</p>\n<p>TenantContext:</p>\n<pre><code>public class TenantContext {\n  private static final ThreadLocal&lt;String&gt; currentTenant = new InheritableThreadLocal&lt;&gt;();\n\n  public static void setCurrentTenant(String tenantId) {\n    currentTenant.set(tenantId);\n  }\n\n  public static String getCurrentTenant() {\n    return currentTenant.get();\n  }\n\n  public static void clear() {\n    currentTenant.remove();\n  }\n}\n</code></pre>\n<p>ConectionProvider</p>\n<pre><code>@Component\npublic class MultiTenantSchemaConnectionProvider\n    implements MultiTenantConnectionProvider, HibernatePropertiesCustomizer {\n\n  private final DataSource dataSource;\n\n  @Autowired\n  public MultiTenantSchemaConnectionProvider(DataSource dataSource) {\n    this.dataSource = dataSource;\n  }\n\n  @Override\n  public Connection getAnyConnection() throws SQLException {\n    return dataSource.getConnection();\n  }\n\n  @Override\n  public void releaseAnyConnection(Connection connection) throws SQLException {\n    connection.close();\n  }\n\n  @Override\n  public Connection getConnection(String tenantIdentifier) throws SQLException {\n    final Connection connection = getAnyConnection();\n    connection.setSchema(tenantIdentifier);\n    return connection;\n  }\n\n  @Override\n  public void releaseConnection(String tenantIdentifier, Connection connection)\n      throws SQLException {\n    connection.setSchema(CurrentTenantResolver.DEFAULT_SCHEMA);\n    releaseAnyConnection(connection);\n  }\n\n  @Override\n  public boolean supportsAggressiveRelease() {\n    return false;\n  }\n\n  @Override\n  public boolean isUnwrappableAs(Class unwrapType) {\n    return false;\n  }\n\n  @Override\n  public &lt;T&gt; T unwrap(Class&lt;T&gt; unwrapType) {\n    return null;\n  }\n\n  @Override\n  public void customize(Map&lt;String, Object&gt; hibernateProperties) {\n    hibernateProperties.put(AvailableSettings.MULTI_TENANT_CONNECTION_PROVIDER, this);\n  }\n}\n</code></pre>\n<p>TenantResolver:</p>\n<pre><code>@Component\npublic class CurrentTenantResolver\n    implements CurrentTenantIdentifierResolver, HibernatePropertiesCustomizer {\n\n  public static final String DEFAULT_SCHEMA = &quot;public&quot;;\n\n  @Override\n  public String resolveCurrentTenantIdentifier() {\n    return TenantContext.getCurrentTenant() != null\n        ? TenantContext.getCurrentTenant()\n        : DEFAULT_SCHEMA;\n  }\n\n  @Override\n  public boolean validateExistingCurrentSessions() {\n    return true;\n  }\n\n  @Override\n  public void customize(Map&lt;String, Object&gt; hibernateProperties) {\n    hibernateProperties.put(AvailableSettings.MULTI_TENANT_IDENTIFIER_RESOLVER, this);\n  }\n}\n</code></pre>\n<p>Interceptor:</p>\n<pre><code>@Component\npublic class RequestInterceptor implements HandlerInterceptor {\n\n  @Override\n  public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object object)\n      throws Exception {\n    String tenantID = request.getHeader(&quot;X-TENANT-ID&quot;);\n    if (tenantID == null) {\n      response.setStatus(400);\n      return false;\n    }\n    TenantContext.setCurrentTenant(tenantID);\n    return true;\n  }\n\n  @Override\n  public void postHandle(\n      HttpServletRequest request,\n      HttpServletResponse response,\n      Object handler,\n      ModelAndView modelAndView)\n      throws Exception {\n    TenantContext.clear();\n  }\n}\n</code></pre>\n<p>InterceptorConfig:</p>\n<pre><code>@Component\npublic class InterceptorConfig implements WebMvcConfigurer {\n\n    @Autowired\n    RequestInterceptor requestInterceptor;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(requestInterceptor);\n    }\n}\n</code></pre>\n<p>is there something I'm missing?</p>\n<p>I have the &quot;users&quot; entity in the default schema and the tenant1 schema. When I send a request wit the header <strong>X-TENANT-ID=tenant1</strong> I got the users from the default schema</p>\n"},{"tags":["java","spring","groovy"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1683228684,"post_id":76176761,"comment_id":134338873,"body_markdown":"One way would be to make `ActivityRuleServiceImpl` abstract.","body":"One way would be to make <code>ActivityRuleServiceImpl</code> abstract."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1683230041,"post_id":76176761,"comment_id":134339130,"body_markdown":"Or use composition instead of inheritance.","body":"Or use composition instead of inheritance."},{"owner":{"account_id":7406747,"reputation":416,"user_id":5635476,"display_name":"levangode"},"score":1,"creation_date":1683238874,"post_id":76176761,"comment_id":134340610,"body_markdown":"You can also use named qualifiers. https://www.baeldung.com/spring-qualifier-annotation","body":"You can also use named qualifiers. <a href=\"https://www.baeldung.com/spring-qualifier-annotation\" rel=\"nofollow noreferrer\">baeldung.com/spring-qualifier-annotation</a>"}],"owner":{"account_id":6927928,"reputation":405,"user_id":5577970,"display_name":"Richard Keene"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683320443,"creation_date":1683228535,"question_id":76176761,"body_markdown":"SOLVED - Turns out if both the base class (ActivityRuleServiceImpl) and the derived class (MyCompanyActivityRuleServiceImpl) have the @Service  annotation then they are two different service instances.  When I removed the @Service from the base class I now only get one instance.\r\n\r\n---\r\nI have a spring-boot application. there is a core library that compiles to a jar, and an application that sits on top of that.\r\nThe core has a Service called ActivityRuleService (And ...Impl) defined like this\r\n\r\n    interface ActivityRuleService { ...\r\nand the impl\r\n\r\n    @Slf4j\r\n    @CompileStatic\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    @Service\r\n    class ActivityRuleServiceImpl implements ActivityRuleService {...\r\nThen in the app that uses the core library I have\r\n\r\n    interface MyCompanyActivityRuleService extends ActivityRuleService {\r\nand\r\n\r\n    @Slf4j\r\n    @CompileStatic\r\n    @Primary\r\n    @Service\r\n    class MyCompanyActivityRuleServiceImpl extends ActivityRuleServiceImpl implements \r\n    MyCompanyActivityRuleService { ...\r\n\r\nIn the core code I use code like\r\n\r\n    @Autowire\r\n    ActivityRuleService activityRuleService\r\nand in the app code it is like\r\n\r\n    @Autowire\r\n    MyCompanyActivityRuleService activityRuleService\r\n\r\nThe problem is I get **two instances** of ActivityRuleService. The base class ActitityRuleServiceImpl has a @Scheduled(fixedDelay = 60000L) task in it and it gets hit twice instead of the expected once per minute, and the hits are 1 ms. apart.\r\n\r\nWhat I need is that the override class MyCompanyActivityRuleServiceImpl should be the one and only injected instance. Even if a class in the core has an @Autowired to ActivityRuleService it should get the one from the application level MyCompany...\r\n\r\nAny ideas?","title":"Dual instances of Service, Spring Framework","body":"<p>SOLVED - Turns out if both the base class (ActivityRuleServiceImpl) and the derived class (MyCompanyActivityRuleServiceImpl) have the @Service  annotation then they are two different service instances.  When I removed the @Service from the base class I now only get one instance.</p>\n<hr />\n<p>I have a spring-boot application. there is a core library that compiles to a jar, and an application that sits on top of that.\nThe core has a Service called ActivityRuleService (And ...Impl) defined like this</p>\n<pre><code>interface ActivityRuleService { ...\n</code></pre>\n<p>and the impl</p>\n<pre><code>@Slf4j\n@CompileStatic\n@SuppressWarnings(&quot;unused&quot;)\n@Service\nclass ActivityRuleServiceImpl implements ActivityRuleService {...\n</code></pre>\n<p>Then in the app that uses the core library I have</p>\n<pre><code>interface MyCompanyActivityRuleService extends ActivityRuleService {\n</code></pre>\n<p>and</p>\n<pre><code>@Slf4j\n@CompileStatic\n@Primary\n@Service\nclass MyCompanyActivityRuleServiceImpl extends ActivityRuleServiceImpl implements \nMyCompanyActivityRuleService { ...\n</code></pre>\n<p>In the core code I use code like</p>\n<pre><code>@Autowire\nActivityRuleService activityRuleService\n</code></pre>\n<p>and in the app code it is like</p>\n<pre><code>@Autowire\nMyCompanyActivityRuleService activityRuleService\n</code></pre>\n<p>The problem is I get <strong>two instances</strong> of ActivityRuleService. The base class ActitityRuleServiceImpl has a @Scheduled(fixedDelay = 60000L) task in it and it gets hit twice instead of the expected once per minute, and the hits are 1 ms. apart.</p>\n<p>What I need is that the override class MyCompanyActivityRuleServiceImpl should be the one and only injected instance. Even if a class in the core has an @Autowired to ActivityRuleService it should get the one from the application level MyCompany...</p>\n<p>Any ideas?</p>\n"},{"tags":["java","android","android-studio","google-maps"],"answers":[{"comments":[{"owner":{"account_id":28423050,"reputation":1,"user_id":21744838,"display_name":"HM T_T"},"score":0,"creation_date":1682745326,"post_id":76110962,"comment_id":134267398,"body_markdown":"yeah after testing it, it was just a file I could add by myself. I was just worried that maybe I need to install something else","body":"yeah after testing it, it was just a file I could add by myself. I was just worried that maybe I need to install something else"}],"tags":[],"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682513475,"creation_date":1682513475,"answer_id":76110962,"question_id":76110892,"body_markdown":"I suppose that `google_maps_api.xml` is just a file with some resources such as strings or integers. So you can just manually add it by yourself in the `res/values` folder in your module. And after that add any resources (API keys or something else) in this file.","title":"google_maps_api.xml not created in android studio","body":"<p>I suppose that <code>google_maps_api.xml</code> is just a file with some resources such as strings or integers. So you can just manually add it by yourself in the <code>res/values</code> folder in your module. And after that add any resources (API keys or something else) in this file.</p>\n"},{"tags":[],"owner":{"account_id":88195,"reputation":9902,"user_id":244104,"accept_rate":90,"display_name":"tronman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683319481,"creation_date":1683319481,"answer_id":76185815,"question_id":76110892,"body_markdown":"Android Studio underwent some modifications a while back and stopped creating the google_maps_api.xml file automatically. You need to do two things instead:\r\n\r\n1. Open the project&#39;s local.properties file and add the line `MAPS_API_KEY=YOUR_KEY_HERE`, replacing YOUR_KEY_HERE with your API key.\r\n\r\n2. Open AndroidManifest.xml file and replace YOUR_API_KEY with `${MAPS_API_KEY}` as shown below.\r\n\r\n```\r\n&lt;application ...&gt;\r\n\r\n       &lt;meta-data\r\n           android:name=&quot;com.google.android.geo.API_KEY&quot;\r\n           android:value=&quot;${MAPS_API_KEY}&quot; /&gt;\r\n       \r\n       &lt;activity ...&gt;\r\n          ...\r\n       &lt;/activity&gt;\r\n   &lt;/application&gt;\r\n```\r\n","title":"google_maps_api.xml not created in android studio","body":"<p>Android Studio underwent some modifications a while back and stopped creating the google_maps_api.xml file automatically. You need to do two things instead:</p>\n<ol>\n<li><p>Open the project's local.properties file and add the line <code>MAPS_API_KEY=YOUR_KEY_HERE</code>, replacing YOUR_KEY_HERE with your API key.</p>\n</li>\n<li><p>Open AndroidManifest.xml file and replace YOUR_API_KEY with <code>${MAPS_API_KEY}</code> as shown below.</p>\n</li>\n</ol>\n<pre><code>&lt;application ...&gt;\n\n       &lt;meta-data\n           android:name=&quot;com.google.android.geo.API_KEY&quot;\n           android:value=&quot;${MAPS_API_KEY}&quot; /&gt;\n       \n       &lt;activity ...&gt;\n          ...\n       &lt;/activity&gt;\n   &lt;/application&gt;\n</code></pre>\n"}],"owner":{"account_id":28423050,"reputation":1,"user_id":21744838,"display_name":"HM T_T"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683319481,"creation_date":1682513103,"question_id":76110892,"body_markdown":"I am trying to create a google map activity in android studio, but the file `google_maps_api.xml` was not created in the `res/values folder` (see [screenshot](https://i.stack.imgur.com/cYq7k.png)). Am I missing something or can I just create the file myself?\r\n\r\n\r\n\r\no I tried to research why this might happen, but I was unable to determine why `google_maps_api.xml` would not be created automatically. ","title":"google_maps_api.xml not created in android studio","body":"<p>I am trying to create a google map activity in android studio, but the file <code>google_maps_api.xml</code> was not created in the <code>res/values folder</code> (see <a href=\"https://i.stack.imgur.com/cYq7k.png\" rel=\"nofollow noreferrer\">screenshot</a>). Am I missing something or can I just create the file myself?</p>\n<p>o I tried to research why this might happen, but I was unable to determine why <code>google_maps_api.xml</code> would not be created automatically.</p>\n"},{"tags":["java","spring","hibernate","filter","where-clause"],"comments":[{"owner":{"account_id":19832738,"reputation":137,"user_id":14526919,"display_name":"Loi Nguyen Tri"},"score":0,"creation_date":1682417571,"post_id":66355149,"comment_id":134208311,"body_markdown":"Have you had solution for this case ?","body":"Have you had solution for this case ?"},{"owner":{"account_id":18537019,"reputation":11,"user_id":13506444,"display_name":"Amjith Titus"},"score":1,"creation_date":1683318631,"post_id":66355149,"comment_id":134354395,"body_markdown":"@LoiNguyenTri This seemed to do the trick. `Authentication auth = SecurityContextHolder.getContext().getAuthentication();`","body":"@LoiNguyenTri This seemed to do the trick. <code>Authentication auth = SecurityContextHolder.getContext().getAuthentication();</code>"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614247876,"creation_date":1614247876,"answer_id":66366505,"question_id":66355149,"body_markdown":"You will have to store the user id in a thread local variable and use that in the aspect. Not sure what the filter does, but maybe multi-tenancy is more in line with what you want to achieve. The solution doesn&#39;t change much though, you will have to somehow publish the user id through a thread local variable.","title":"Is there a way to enable @Filter globally while taking logged in User ID as a parameter?","body":"<p>You will have to store the user id in a thread local variable and use that in the aspect. Not sure what the filter does, but maybe multi-tenancy is more in line with what you want to achieve. The solution doesn't change much though, you will have to somehow publish the user id through a thread local variable.</p>\n"},{"tags":[],"owner":{"account_id":18537019,"reputation":11,"user_id":13506444,"display_name":"Amjith Titus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683318822,"creation_date":1683318822,"answer_id":76185756,"question_id":66355149,"body_markdown":"This worked for me.\r\n\r\n    @Aspect\r\n    @Component\r\n    public class EnableFilterAspect {\r\n    \r\n    \t@AfterReturning(pointcut = &quot;bean(entityManagerFactory) &amp;&amp; execution(* createEntityManager(..))&quot;, returning = &quot;retVal&quot;)\r\n    \r\n    \tpublic void getSessionAfter(JoinPoint joinPoint, Object retVal) {\r\n    \r\n    \t\tif (retVal != null &amp;&amp; EntityManager.class.isInstance(retVal)) {\r\n    \t\t\tAuthentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n    \t\t\tif (auth != null &amp;&amp; auth.isAuthenticated() &amp;&amp; !(auth instanceof AnonymousAuthenticationToken)) {\r\n    \t\t\t\tSession session = ((EntityManager) retVal).unwrap(Session.class);\r\n    \t\t\t\tsession.enableFilter(&quot;authorize&quot;).setParameter(&quot;userId&quot;, ((UserPrincipal) auth.getPrincipal()).getId());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }","title":"Is there a way to enable @Filter globally while taking logged in User ID as a parameter?","body":"<p>This worked for me.</p>\n<pre><code>@Aspect\n@Component\npublic class EnableFilterAspect {\n\n    @AfterReturning(pointcut = &quot;bean(entityManagerFactory) &amp;&amp; execution(* createEntityManager(..))&quot;, returning = &quot;retVal&quot;)\n\n    public void getSessionAfter(JoinPoint joinPoint, Object retVal) {\n\n        if (retVal != null &amp;&amp; EntityManager.class.isInstance(retVal)) {\n            Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n            if (auth != null &amp;&amp; auth.isAuthenticated() &amp;&amp; !(auth instanceof AnonymousAuthenticationToken)) {\n                Session session = ((EntityManager) retVal).unwrap(Session.class);\n                session.enableFilter(&quot;authorize&quot;).setParameter(&quot;userId&quot;, ((UserPrincipal) auth.getPrincipal()).getId());\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18537019,"reputation":11,"user_id":13506444,"display_name":"Amjith Titus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683318822,"creation_date":1614184972,"question_id":66355149,"body_markdown":"I&#39;m new to `@Filter` and I have understood that it takes in parameters when compared to `@Where`.\r\n\r\nI have a use case where I need to filter the results for every end point based on the logged in `User`. \r\n\r\nWhile searching for how to enable filtering globally, I came across a solution where AOP is used to intercept Session creation and to enable the filter which seems to be working fine. \r\n\r\nThe problem here is that I need to have the User ID sent in as the parameter while enabling the filter. How do I do it or is there any other alternative for this particular scenario?\r\n\r\n\r\n\t@Aspect\r\n\t@Component\r\n\tpublic class EnableFilterAspect {\r\n\t\r\n\t\t@AfterReturning(pointcut = &quot;bean(entityManagerFactory) &amp;&amp; execution(* createEntityManager(..))&quot;, \r\n\t\t\t\treturning = &quot;retVal&quot;)\r\n\t\t\r\n\t\tpublic void getSessionAfter(JoinPoint joinPoint, Object retVal) {\r\n\t\t\t\r\n\t\t\tif (retVal != null &amp;&amp; EntityManager.class.isInstance(retVal)) {\r\n\t\t\t\tSession session = ((EntityManager) retVal).unwrap(Session.class);\r\n\t\t\t\tsession.enableFilter(&quot;authorize&quot;).setParameter(&quot;userId&quot;, **USER_ID**);\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"Is there a way to enable @Filter globally while taking logged in User ID as a parameter?","body":"<p>I'm new to <code>@Filter</code> and I have understood that it takes in parameters when compared to <code>@Where</code>.</p>\n<p>I have a use case where I need to filter the results for every end point based on the logged in <code>User</code>.</p>\n<p>While searching for how to enable filtering globally, I came across a solution where AOP is used to intercept Session creation and to enable the filter which seems to be working fine.</p>\n<p>The problem here is that I need to have the User ID sent in as the parameter while enabling the filter. How do I do it or is there any other alternative for this particular scenario?</p>\n<pre><code>@Aspect\n@Component\npublic class EnableFilterAspect {\n\n    @AfterReturning(pointcut = &quot;bean(entityManagerFactory) &amp;&amp; execution(* createEntityManager(..))&quot;, \n            returning = &quot;retVal&quot;)\n    \n    public void getSessionAfter(JoinPoint joinPoint, Object retVal) {\n        \n        if (retVal != null &amp;&amp; EntityManager.class.isInstance(retVal)) {\n            Session session = ((EntityManager) retVal).unwrap(Session.class);\n            session.enableFilter(&quot;authorize&quot;).setParameter(&quot;userId&quot;, **USER_ID**);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","string","string-comparison"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":6,"creation_date":1683314070,"post_id":76185271,"comment_id":134353555,"body_markdown":"Look up `BigInteger`.","body":"Look up <code>BigInteger</code>."},{"owner":{"account_id":2119809,"reputation":50994,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1683314092,"post_id":76185271,"comment_id":134353561,"body_markdown":"If one string is shorter, it&#39;s smaller.  If the same length, then a string comparison will work.","body":"If one string is shorter, it&#39;s smaller.  If the same length, then a string comparison will work."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1683314218,"post_id":76185271,"comment_id":134353581,"body_markdown":"@TimRoberts Don’t rely on that. It depends on signs and leading zeroes. Do parse into `BogInteger` so the reader needs not worry whether you have covered all cases.","body":"@TimRoberts Don’t rely on that. It depends on signs and leading zeroes. Do parse into <code>BogInteger</code> so the reader needs not worry whether you have covered all cases."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1683314686,"post_id":76185271,"comment_id":134353649,"body_markdown":"Use `new BigInteger(num).compareTo(new BigInteger(num2))`. Gave 1 on my Java 18 meaning that `num` is strictly greater than `num2` (which it indeed is).","body":"Use <code>new BigInteger(num).compareTo(new BigInteger(num2))</code>. Gave 1 on my Java 18 meaning that <code>num</code> is strictly greater than <code>num2</code> (which it indeed is)."}],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683314763,"creation_date":1683314763,"answer_id":76185353,"question_id":76185271,"body_markdown":"Strings compare character &quot;strings&quot; and not numbers, as their name implies.\r\n\r\nAlso &quot;7845141651641616111&quot; is too large for an integer.\r\n\r\nTry:\r\n\r\n    String num = &quot;14151841515451321511151545&quot;\r\n    BigInteger number = new BigInteger(num);\r\n    String num2 = &quot;7845141651641616111&quot;\r\n    BigInteger number2 = new BigInteger(num2);\r\n    \r\nSee https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html for comaperTo(...), equals(...), etc.","title":"How to Convert a String formatted Big number to Number?","body":"<p>Strings compare character &quot;strings&quot; and not numbers, as their name implies.</p>\n<p>Also &quot;7845141651641616111&quot; is too large for an integer.</p>\n<p>Try:</p>\n<pre><code>String num = &quot;14151841515451321511151545&quot;\nBigInteger number = new BigInteger(num);\nString num2 = &quot;7845141651641616111&quot;\nBigInteger number2 = new BigInteger(num2);\n</code></pre>\n<p>See <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html</a> for comaperTo(...), equals(...), etc.</p>\n"}],"owner":{"account_id":21391138,"reputation":14,"user_id":15755175,"display_name":"shib"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1683316461,"accepted_answer_id":76185353,"answer_count":1,"score":-2,"last_activity_date":1683318301,"creation_date":1683313935,"question_id":76185271,"body_markdown":"Suppose \r\n```\r\nString num = &quot;14151841515451321511151545&quot;\r\n```\r\nI want to convert this to \r\n```\r\nnumber = 14151841515451321511151545\r\n```\r\nI need to convert to Number to compare with another String formatted number like \r\n```\r\nString num2 = &quot;7845141651641616111&quot;\r\n```\r\nHow to do it? Is there any String method to compare with long string formatted number?\r\n\r\nI tried `Long.parseLong()`, but It is giving `NumberFormatException`.","title":"How to Convert a String formatted Big number to Number?","body":"<p>Suppose</p>\n<pre><code>String num = &quot;14151841515451321511151545&quot;\n</code></pre>\n<p>I want to convert this to</p>\n<pre><code>number = 14151841515451321511151545\n</code></pre>\n<p>I need to convert to Number to compare with another String formatted number like</p>\n<pre><code>String num2 = &quot;7845141651641616111&quot;\n</code></pre>\n<p>How to do it? Is there any String method to compare with long string formatted number?</p>\n<p>I tried <code>Long.parseLong()</code>, but It is giving <code>NumberFormatException</code>.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":5,"creation_date":1683316971,"post_id":76185587,"comment_id":134354097,"body_markdown":"Show your code.","body":"Show your code."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683317526,"post_id":76185587,"comment_id":134354212,"body_markdown":"Yes, show your code, and preferably as a [mre]. Also, do check out the [ask] and [help] links.","body":"Yes, show your code, and preferably as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also, do check out the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help\">help center</a> links."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":4,"creation_date":1683318048,"post_id":76185587,"comment_id":134354304,"body_markdown":"This sounds really brittle. I would suggest rethinking your design to use `ReentrantLock`, `CyclicBarrier`, `Semaphore`, or even `BlockingQueue` and pass immutable objects between the threads instead of sharing data. Checking a volatile variable in a loop is called &quot;busy-waiting&quot; and it can be a performance problem. If you do need to do it, at least call `Thread.onSpinWait()` in the loop.","body":"This sounds really brittle. I would suggest rethinking your design to use <code>ReentrantLock</code>, <code>CyclicBarrier</code>, <code>Semaphore</code>, or even <code>BlockingQueue</code> and pass immutable objects between the threads instead of sharing data. Checking a volatile variable in a loop is called &quot;busy-waiting&quot; and it can be a performance problem. If you do need to do it, at least call <code>Thread.onSpinWait()</code> in the loop."},{"owner":{"account_id":28521150,"reputation":1,"user_id":21829827,"display_name":"Harry Green"},"score":0,"creation_date":1683318186,"post_id":76185587,"comment_id":134354331,"body_markdown":"Actually I can&#39;t use `java.util.concurrent` package.","body":"Actually I can&#39;t use <code>java.util.concurrent</code> package."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1683318274,"post_id":76185587,"comment_id":134354345,"body_markdown":"Ah, one of those assignments. I see.","body":"Ah, one of those assignments. I see."},{"owner":{"account_id":28521150,"reputation":1,"user_id":21829827,"display_name":"Harry Green"},"score":0,"creation_date":1683321583,"post_id":76185587,"comment_id":134354797,"body_markdown":"But how do I use a `Semaphore` here?","body":"But how do I use a <code>Semaphore</code> here?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1683389045,"post_id":76185587,"comment_id":134360811,"body_markdown":"If this is schoolwork, say so. And state your constraints up front, don’t make us guess. Read the Help section of this site before posting here.","body":"If this is schoolwork, say so. And state your constraints up front, don’t make us guess. Read the Help section of this site before posting here."}],"owner":{"account_id":28521150,"reputation":1,"user_id":21829827,"display_name":"Harry Green"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683317724,"creation_date":1683316905,"question_id":76185587,"body_markdown":"I&#39;m running multiple threads in my program and I want when a method inside a thread is called, all the other threads get paused and when that method is done, all the other threads get resumed.\r\n\r\nI tried to use a `volatile boolean` field in my threads and make it `true` when necessary, in other threads it gets checked every time in a `while` loop. So if it is `true` I call `this.wait()` and when it&#39;s finished I make that pause `boolean` false and call `notify()` in my another thread. But it doesn&#39;t work.\r\n\r\n\r\nThreads that I want to get paused:\r\n```java\r\nimport java.io.IOException;\r\nimport java.io.RandomAccessFile;\r\n\r\npublic class Worker extends Thread {\r\n    RandomAccessFile file;\r\n    long start;\r\n    long interval;\r\n    long end;\r\n    long cursor;\r\n    SourceProvider sp;\r\n    volatile MultiThreadCopier copier;\r\n    boolean isDone = false;\r\n    volatile boolean paused = false;\r\n\r\n    public Worker(String dest, long start, long interval, SourceProvider sp, MultiThreadCopier copier) {\r\n        try {\r\n            file = new RandomAccessFile(dest, &quot;rws&quot;);\r\n            file.setLength(sp.size());\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        this.start = start;\r\n        this.interval = interval;\r\n        this.end = start + interval - 1;\r\n        this.cursor = start;\r\n        this.sp = sp;\r\n        this.copier = copier;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        write();\r\n        while (isDone) {\r\n            Pair&lt;Worker, Long&gt; busiestWorkerPair = copier.busiestWorker();\r\n            Worker busiestWorker = busiestWorkerPair.getKey();\r\n            if (busiestWorker == null) {\r\n                break;\r\n            }\r\n            long workRemaining = busiestWorkerPair.getValue();\r\n            this.end = busiestWorker.end;\r\n            this.start = busiestWorker.end - workRemaining / 2 + 1;\r\n            busiestWorker.end = this.start - 1;\r\n            isDone = false;\r\n            busiestWorker.paused = false;\r\n            synchronized (busiestWorker) {\r\n                busiestWorker.notify();\r\n            }\r\n            write();\r\n        }\r\n        try {\r\n            file.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void write() {\r\n        SourceReader sr = sp.connect(start);\r\n        cursor = start;\r\n        try {\r\n            file.seek(cursor);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        while (cursor &lt;= end) {\r\n            while (paused) {\r\n                System.out.println(getName() + &quot; paused&quot;);\r\n                try {\r\n                    synchronized (this) {\r\n                        wait();\r\n                    }\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            try {\r\n                file.write(sr.read());\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            cursor++;\r\n        }\r\n        isDone = true;\r\n    }\r\n}\r\n```\r\n\r\nThe thread that pauses them with `busiestWorker()` method:\r\n```java\r\npublic class MultiThreadCopier {\r\n    public static final long SAFE_MARGIN = 6;\r\n    Worker[] workers;\r\n\r\n    public MultiThreadCopier(SourceProvider sourceProvider, String dest, int workerCount) {\r\n        workers = new Worker[workerCount];\r\n        long interval = sourceProvider.size() / workerCount;\r\n        for (int i = 0; i &lt; workerCount; i++) {\r\n            long start = i * interval;\r\n            workers[i] = new Worker(dest, start, interval + ((i + 1 == workerCount) ? sourceProvider.size() % workerCount : 0), sourceProvider, this);\r\n        }\r\n    }\r\n\r\n    public void start() {\r\n        for (Worker worker : workers) {\r\n            worker.start();\r\n        }\r\n    }\r\n\r\n\r\n    public Pair&lt;Worker, Long&gt; busiestWorker() {\r\n        long mostWorkRemaining = 0;\r\n        Worker busiestWorker = null;\r\n        for (Worker worker : workers) {\r\n            if (worker.isDone)\r\n                continue;\r\n            long remainingWork = worker.end - worker.cursor + 1;\r\n            if (remainingWork &lt; SAFE_MARGIN)\r\n                continue;\r\n            if (remainingWork &lt;= mostWorkRemaining)\r\n                continue;\r\n            mostWorkRemaining = remainingWork;\r\n            busiestWorker = worker;\r\n        }\r\n        if (busiestWorker == null)\r\n            return new Pair&lt;&gt;(null, 0L);\r\n        busiestWorker.paused = true;\r\n        return new Pair&lt;&gt;(busiestWorker, mostWorkRemaining);\r\n    }\r\n}\r\n```","title":"How to pause a thread within another thread in Java?","body":"<p>I'm running multiple threads in my program and I want when a method inside a thread is called, all the other threads get paused and when that method is done, all the other threads get resumed.</p>\n<p>I tried to use a <code>volatile boolean</code> field in my threads and make it <code>true</code> when necessary, in other threads it gets checked every time in a <code>while</code> loop. So if it is <code>true</code> I call <code>this.wait()</code> and when it's finished I make that pause <code>boolean</code> false and call <code>notify()</code> in my another thread. But it doesn't work.</p>\n<p>Threads that I want to get paused:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.io.RandomAccessFile;\n\npublic class Worker extends Thread {\n    RandomAccessFile file;\n    long start;\n    long interval;\n    long end;\n    long cursor;\n    SourceProvider sp;\n    volatile MultiThreadCopier copier;\n    boolean isDone = false;\n    volatile boolean paused = false;\n\n    public Worker(String dest, long start, long interval, SourceProvider sp, MultiThreadCopier copier) {\n        try {\n            file = new RandomAccessFile(dest, &quot;rws&quot;);\n            file.setLength(sp.size());\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        this.start = start;\n        this.interval = interval;\n        this.end = start + interval - 1;\n        this.cursor = start;\n        this.sp = sp;\n        this.copier = copier;\n    }\n\n    @Override\n    public void run() {\n        write();\n        while (isDone) {\n            Pair&lt;Worker, Long&gt; busiestWorkerPair = copier.busiestWorker();\n            Worker busiestWorker = busiestWorkerPair.getKey();\n            if (busiestWorker == null) {\n                break;\n            }\n            long workRemaining = busiestWorkerPair.getValue();\n            this.end = busiestWorker.end;\n            this.start = busiestWorker.end - workRemaining / 2 + 1;\n            busiestWorker.end = this.start - 1;\n            isDone = false;\n            busiestWorker.paused = false;\n            synchronized (busiestWorker) {\n                busiestWorker.notify();\n            }\n            write();\n        }\n        try {\n            file.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void write() {\n        SourceReader sr = sp.connect(start);\n        cursor = start;\n        try {\n            file.seek(cursor);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        while (cursor &lt;= end) {\n            while (paused) {\n                System.out.println(getName() + &quot; paused&quot;);\n                try {\n                    synchronized (this) {\n                        wait();\n                    }\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n            try {\n                file.write(sr.read());\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            cursor++;\n        }\n        isDone = true;\n    }\n}\n</code></pre>\n<p>The thread that pauses them with <code>busiestWorker()</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MultiThreadCopier {\n    public static final long SAFE_MARGIN = 6;\n    Worker[] workers;\n\n    public MultiThreadCopier(SourceProvider sourceProvider, String dest, int workerCount) {\n        workers = new Worker[workerCount];\n        long interval = sourceProvider.size() / workerCount;\n        for (int i = 0; i &lt; workerCount; i++) {\n            long start = i * interval;\n            workers[i] = new Worker(dest, start, interval + ((i + 1 == workerCount) ? sourceProvider.size() % workerCount : 0), sourceProvider, this);\n        }\n    }\n\n    public void start() {\n        for (Worker worker : workers) {\n            worker.start();\n        }\n    }\n\n\n    public Pair&lt;Worker, Long&gt; busiestWorker() {\n        long mostWorkRemaining = 0;\n        Worker busiestWorker = null;\n        for (Worker worker : workers) {\n            if (worker.isDone)\n                continue;\n            long remainingWork = worker.end - worker.cursor + 1;\n            if (remainingWork &lt; SAFE_MARGIN)\n                continue;\n            if (remainingWork &lt;= mostWorkRemaining)\n                continue;\n            mostWorkRemaining = remainingWork;\n            busiestWorker = worker;\n        }\n        if (busiestWorker == null)\n            return new Pair&lt;&gt;(null, 0L);\n        busiestWorker.paused = true;\n        return new Pair&lt;&gt;(busiestWorker, mostWorkRemaining);\n    }\n}\n</code></pre>\n"},{"tags":["java","ssl","certificate"],"answers":[{"comments":[{"owner":{"account_id":9428656,"reputation":3,"user_id":7012875,"display_name":"P. Heggie"},"score":0,"creation_date":1651079900,"post_id":72002495,"comment_id":127279247,"body_markdown":"I have to cross off the alternative where the server clock is off by a week.. So thank you for confirming.","body":"I have to cross off the alternative where the server clock is off by a week.. So thank you for confirming."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1650902803,"creation_date":1650902803,"answer_id":72002495,"question_id":72002213,"body_markdown":"&gt; Possibly there was an issue with a CA higher up in the chain? And the certificate I received referenced a newer version of a CA higher up in the chain?\r\n\r\nYeah probably. Usually there is not so much &#39;the certificate&#39; as &#39;the certificate _chain_&#39;. What you showed is merely the final certificate in the chain. If any one of the certs in that chain expired on 4/22/22, then, you have your answer.\r\n\r\nAlternatively, it&#39;s of course possible your server&#39;s clock is wildly off (by 7 days).\r\n","title":"Is it possible for a digital certificate to expire before its expiry date?","body":"<blockquote>\n<p>Possibly there was an issue with a CA higher up in the chain? And the certificate I received referenced a newer version of a CA higher up in the chain?</p>\n</blockquote>\n<p>Yeah probably. Usually there is not so much 'the certificate' as 'the certificate <em>chain</em>'. What you showed is merely the final certificate in the chain. If any one of the certs in that chain expired on 4/22/22, then, you have your answer.</p>\n<p>Alternatively, it's of course possible your server's clock is wildly off (by 7 days).</p>\n"}],"owner":{"account_id":9428656,"reputation":3,"user_id":7012875,"display_name":"P. Heggie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72002495,"answer_count":1,"score":0,"last_activity_date":1683317668,"creation_date":1650901422,"question_id":72002213,"body_markdown":"Our secure SMTP connection to an external site began failing on 4/22. The error message indicated an issue somewhere in the certificate chain.\r\n```\r\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--] org.springframework.mail.MailSendException: Mail server connection failed; nested exception is javax.mail.MessagingException: Could not convert socket to TLS;\r\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--]   nested exception is:\r\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--]      javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.h: PKIX path building failed: com.ibm.security.cert.IBMCertPathBuilderException: unable to find valid certification path to requested target. Failed messages: javax.mail.MessagingException: Could not convert socket to TLS;\r\n```\r\nWe make the connection first, then issue Start TLS. This has been working without problems for over two years. Two years ago, maybe 27 months ago, we had a similar issue - same exception in the log. I did not keep records of that issue but I remember that the digital certificate had an expiry date that was one week in the future - that is, it should have been working for one more week before any problems arose because of expiry. So last time, we got a new certificate and the problem was resolved.\r\nSo this time, I observed the same circumstance. The expiry date on that certificate was for 4/29/2022:\r\n```\r\nKeystore type: jks\r\nKeystore provider: IBMJCE\r\n\r\nYour keystore contains 2 entries\r\n\r\nAlias name: (identifying information removed)\r\nCreation date: Mar 13, 2020\r\nEntry type: trustedCertEntry\r\n\r\nOwner: (identifying information removed)\r\nIssuer: CN=DigiCert SHA2 Secure Server CA, O=DigiCert Inc, C=US\r\nSerial number: (identifying information removed)\r\nValid from: 2/27/20 7:00 PM until: 4/29/22 8:00 AM\r\n```\r\nSo one might say, that is just a coincidence, the certificate is still good for another week and the problem must come from elsewhere. \r\nWell, yesterday the vendor sent me an updated version of the same certificate, and when I added it to the truststore, the connection was established successfully. So, the only change I made was to replace the certificate.\r\nPossibly there was an issue with a CA higher up in the chain? And the certificate I received referenced a newer version of a CA higher up in the chain?\r\nThat is all I can think of.. but it is very strange that the same circumstances happened twice and  the resolution both times was to replace a certificate that had not yet expired.\r\nIs there another explanation? Thank you","title":"Is it possible for a digital certificate to expire before its expiry date?","body":"<p>Our secure SMTP connection to an external site began failing on 4/22. The error message indicated an issue somewhere in the certificate chain.</p>\n<pre><code>[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--] org.springframework.mail.MailSendException: Mail server connection failed; nested exception is javax.mail.MessagingException: Could not convert socket to TLS;\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--]   nested exception is:\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--]      javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.h: PKIX path building failed: com.ibm.security.cert.IBMCertPathBuilderException: unable to find valid certification path to requested target. Failed messages: javax.mail.MessagingException: Could not convert socket to TLS;\n</code></pre>\n<p>We make the connection first, then issue Start TLS. This has been working without problems for over two years. Two years ago, maybe 27 months ago, we had a similar issue - same exception in the log. I did not keep records of that issue but I remember that the digital certificate had an expiry date that was one week in the future - that is, it should have been working for one more week before any problems arose because of expiry. So last time, we got a new certificate and the problem was resolved.\nSo this time, I observed the same circumstance. The expiry date on that certificate was for 4/29/2022:</p>\n<pre><code>Keystore type: jks\nKeystore provider: IBMJCE\n\nYour keystore contains 2 entries\n\nAlias name: (identifying information removed)\nCreation date: Mar 13, 2020\nEntry type: trustedCertEntry\n\nOwner: (identifying information removed)\nIssuer: CN=DigiCert SHA2 Secure Server CA, O=DigiCert Inc, C=US\nSerial number: (identifying information removed)\nValid from: 2/27/20 7:00 PM until: 4/29/22 8:00 AM\n</code></pre>\n<p>So one might say, that is just a coincidence, the certificate is still good for another week and the problem must come from elsewhere.\nWell, yesterday the vendor sent me an updated version of the same certificate, and when I added it to the truststore, the connection was established successfully. So, the only change I made was to replace the certificate.\nPossibly there was an issue with a CA higher up in the chain? And the certificate I received referenced a newer version of a CA higher up in the chain?\nThat is all I can think of.. but it is very strange that the same circumstances happened twice and  the resolution both times was to replace a certificate that had not yet expired.\nIs there another explanation? Thank you</p>\n"},{"tags":["java","oracle","hibernate"],"comments":[{"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"score":1,"creation_date":1552683260,"post_id":55190299,"comment_id":97119424,"body_markdown":"Can you please share the complete stacktrace?","body":"Can you please share the complete stacktrace?"},{"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"score":0,"creation_date":1552684160,"post_id":55190299,"comment_id":97119799,"body_markdown":"I have shared @SamuelPhilipp","body":"I have shared @SamuelPhilipp"},{"owner":{"account_id":49167,"reputation":144581,"user_id":146325,"display_name":"APC"},"score":0,"creation_date":1552687090,"post_id":55190299,"comment_id":97120750,"body_markdown":"So what table does `CRESTPRD.NAME` constrain???","body":"So what table does <code>CRESTPRD.NAME</code> constrain???"},{"owner":{"account_id":3834329,"reputation":2561,"user_id":3179070,"display_name":"javapedia.net"},"score":0,"creation_date":1552688477,"post_id":55190299,"comment_id":97121152,"body_markdown":"I reviewed your query and doubt if there is something wrong with that.\n\n\n&quot;select aw from TableName aw WHERE lower(name)=&#39;&quot;+&quot;NAME&quot;.toLowerCase()+&quot;&#39;&quot;\n\n&quot;aw&quot; is the table alias and did you mean to place aw.*?\n\nBetween, it is a good practice to use prepared statements for passing query param values rather than string concatenation. String concatenation lead to SQL injection that you are aware of. Just thought to mention here. Thanks.","body":"I reviewed your query and doubt if there is something wrong with that.   &quot;select aw from TableName aw WHERE lower(name)=&#39;&quot;+&quot;NAME&quot;.toLowerCase()+&quot;&#39;&quot;  &quot;aw&quot; is the table alias and did you mean to place aw.*?  Between, it is a good practice to use prepared statements for passing query param values rather than string concatenation. String concatenation lead to SQL injection that you are aware of. Just thought to mention here. Thanks."},{"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"score":0,"creation_date":1552760913,"post_id":55190299,"comment_id":97137539,"body_markdown":"I was passing query param into the query earlier, thought of trying it this way but no luck.","body":"I was passing query param into the query earlier, thought of trying it this way but no luck."}],"answers":[{"comments":[{"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"score":0,"creation_date":1552760818,"post_id":55190936,"comment_id":97137512,"body_markdown":"It is just a simple SELECT query. there is no where I am inserting into the table.","body":"It is just a simple SELECT query. there is no where I am inserting into the table."},{"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"score":0,"creation_date":1552763541,"post_id":55190936,"comment_id":97138273,"body_markdown":"Have you tried your select without the `lower()` function?","body":"Have you tried your select without the <code>lower()</code> function?"},{"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"score":0,"creation_date":1552929699,"post_id":55190936,"comment_id":97188273,"body_markdown":"Yes, without the lower() function it works fine. That&#39;s why I doubt if it Could it be due to the lower() function? As after lower() these 2 rows will have the same name.","body":"Yes, without the lower() function it works fine. That&#39;s why I doubt if it Could it be due to the lower() function? As after lower() these 2 rows will have the same name."},{"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"score":0,"creation_date":1552929868,"post_id":55190936,"comment_id":97188365,"body_markdown":"Do you really need that `lower()`? As alternative you can lower the values in Java.","body":"Do you really need that <code>lower()</code>? As alternative you can lower the values in Java."}],"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552999428,"creation_date":1552685477,"answer_id":55190936,"question_id":55190299,"body_markdown":"Your column `CRESTPRD.NAME` has a unique constrained defined, which means every value can only occur once in this column. If you are trying to insert a new entry with a value, which already exists in that column you get a `ConstraintViolationException`. \r\n\r\nSo this seems to be a problem in your data model. Either remove that unique constraint from that column to be able to have a value multiple times in that column or add every value just once to prevent that error.","title":"SELECT query giving unique constraint violation in Oracle","body":"<p>Your column <code>CRESTPRD.NAME</code> has a unique constrained defined, which means every value can only occur once in this column. If you are trying to insert a new entry with a value, which already exists in that column you get a <code>ConstraintViolationException</code>. </p>\n\n<p>So this seems to be a problem in your data model. Either remove that unique constraint from that column to be able to have a value multiple times in that column or add every value just once to prevent that error.</p>\n"},{"comments":[{"owner":{"account_id":74118,"reputation":49342,"user_id":213136,"accept_rate":100,"display_name":"Bob Jarvis - Слава Україні"},"score":1,"creation_date":1552703341,"post_id":55191992,"comment_id":97123940,"body_markdown":"A SELECT, obviously, won&#39;t directly cause such a constraint violation, but I can picture at least a couple ways to cause this to happen. For instance, if in the SELECT statement a function was invoked which performed an INSERT or UPDATE, that could do it. If fine-grained auditing was enabled for the particular table and column being SELECTed, the FGA handler proc could perform an INSERT or UPDATE which could raise such a constraint violation. And I wouldn&#39;t be surprised to discover there are others, but I&#39;m just not up to the task of thinking of them tonight. :-)","body":"A SELECT, obviously, won&#39;t directly cause such a constraint violation, but I can picture at least a couple ways to cause this to happen. For instance, if in the SELECT statement a function was invoked which performed an INSERT or UPDATE, that could do it. If fine-grained auditing was enabled for the particular table and column being SELECTed, the FGA handler proc could perform an INSERT or UPDATE which could raise such a constraint violation. And I wouldn&#39;t be surprised to discover there are others, but I&#39;m just not up to the task of thinking of them tonight. :-)"},{"owner":{"account_id":12106,"reputation":14795,"user_id":23669,"accept_rate":67,"display_name":"eaolson"},"score":0,"creation_date":1552761354,"post_id":55191992,"comment_id":97137651,"body_markdown":"You&#39;re right, I was thinking more along the lines of triggers. But if you try to do an insert or update inside a select, you get `ORA-14551 cannot perform a DML operation inside a query`, so it has to spawn an autonomous transaction.","body":"You&#39;re right, I was thinking more along the lines of triggers. But if you try to do an insert or update inside a select, you get <code>ORA-14551 cannot perform a DML operation inside a query</code>, so it has to spawn an autonomous transaction."},{"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"score":0,"creation_date":1552761556,"post_id":55191992,"comment_id":97137701,"body_markdown":"There is no where I am doing an insert explicitly. However there are 2 rows with the same NAME but in different cases. Could it be due to the lower() function? As after lower() these 2 rows will have the same name. Could it be the issue?","body":"There is no where I am doing an insert explicitly. However there are 2 rows with the same NAME but in different cases. Could it be due to the lower() function? As after lower() these 2 rows will have the same name. Could it be the issue?"},{"owner":{"account_id":12106,"reputation":14795,"user_id":23669,"accept_rate":67,"display_name":"eaolson"},"score":0,"creation_date":1552783011,"post_id":55191992,"comment_id":97142672,"body_markdown":"No, you generally cannot get this error with a `SELECT`. Could Hibernate be doing something you&#39;re not aware of?","body":"No, you generally cannot get this error with a <code>SELECT</code>. Could Hibernate be doing something you&#39;re not aware of?"}],"tags":[],"owner":{"account_id":12106,"reputation":14795,"user_id":23669,"accept_rate":67,"display_name":"eaolson"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552693452,"creation_date":1552693452,"answer_id":55191992,"question_id":55190299,"body_markdown":"I&#39;m pretty sure this exception is not due to your select statement. I&#39;m not sure there&#39;s even any way for a select to cause this exception. Rather, I think somewhere you are doing an insert of a row that already exists in the table. There&#39;s this in your stack trace:\r\n\r\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\r\n    \r\nMaybe somehow it&#39;s being done by Hibernate? I know nothing about Hibernate, really. The docs suggest the `EntityInsertAction` interface is, not surprisingly, for inserting records.","title":"SELECT query giving unique constraint violation in Oracle","body":"<p>I'm pretty sure this exception is not due to your select statement. I'm not sure there's even any way for a select to cause this exception. Rather, I think somewhere you are doing an insert of a row that already exists in the table. There's this in your stack trace:</p>\n\n<pre><code>at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\n</code></pre>\n\n<p>Maybe somehow it's being done by Hibernate? I know nothing about Hibernate, really. The docs suggest the <code>EntityInsertAction</code> interface is, not surprisingly, for inserting records.</p>\n"},{"comments":[{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":0,"creation_date":1701426393,"post_id":55228163,"comment_id":136776826,"body_markdown":"Do not do this. This is a workaround and ignores the real issue.","body":"Do not do this. This is a workaround and ignores the real issue."}],"tags":[],"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1552934898,"creation_date":1552934898,"answer_id":55228163,"question_id":55190299,"body_markdown":"Thanks all for your response. I resolved this issue by removing the Unique constraint and index from the table. I doubt it was due to the lower() function. As after lower() these 2 rows will have the same name. After removing the Unique constraint now I am checking at the Application level to avoid the duplicate names.\r\nThanks again.","title":"SELECT query giving unique constraint violation in Oracle","body":"<p>Thanks all for your response. I resolved this issue by removing the Unique constraint and index from the table. I doubt it was due to the lower() function. As after lower() these 2 rows will have the same name. After removing the Unique constraint now I am checking at the Application level to avoid the duplicate names.\nThanks again.</p>\n"},{"tags":[],"owner":{"account_id":291102,"reputation":597,"user_id":593045,"display_name":"BitLauncher"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683316426,"creation_date":1683316426,"answer_id":76185536,"question_id":55190299,"body_markdown":"**Short version**\r\n\r\nThe **constraint violation exception belongs to an earlier executed insert statement** from your code! But **Hibernate cached the insert!** It did not forward it to the database - but it executes the cached insert just before the select! And therefore fails - looking like the select had a problem.\r\n\r\nSo the insert before was the root cause and contained values hurting that constraint.\r\n\r\n**Long version:**\r\n\r\nI stumbled upon this article with similar problem with Hibernate, JavaEE - in which I am not (yet) an expert:\r\n\r\n - I had a loop inserting rows into a table.\r\n - The first iteration in the loop was successful. \r\n - But in the second I got a ConstraintViolation exception (in my case it was a unique index over two columns).\r\n\r\nWhile debugging I found out, that it happened just at executing such a simple JQPL &quot;`select count(*) from ... where ...`&quot;!\r\nThere is no trigger in this query, nothing (in my case it was even the same table involved than for the insert statement in the loop).\r\n\r\nThat I am sure, what Hibernate does - I enabled the logging of SQL to the console with `spring.jpa.show-sql=true` in the file called `application.properties` to see what SQL is created by Hibernate.\r\n\r\nAnd at the point where the select query was executed with the next debugging step:\r\n\r\n 1. The constraint exeception occured\r\n 2. The log showed *only* an `insert` statement! That from the first loop iteration, because it was missing in the console log before! And I checked the parameters of the first loop iteration with the table content and yes, it would hurt that constraint! Hurray. I found it.\r\n\r\nYour Hibernate configuration/settings are such (like in my case), that you executed an `insert` statement in your code somewhere before the `select` statement.\r\nBut Hibernate cached the execution of the insert - it did not yet execute any insert towards the database!\r\n\r\nFinally at executing the select statement Hibernate somehow sees the need to execute the cached insert statement now really in the database - and this fails with the ConstraintException, what is returned to you as (mind blowing) error.\r\n\r\nLike this pseudo code, that is called during execution of the select query:\r\n\r\n       private ResultSet executeQuery(String sql = &quot;select ...&quot;) {\r\n           if (areThereCachedHiberateQueries()) { // yes, an insert\r\n               if (isItNowNecessaryToExecuteTheseCachedQueriesWithDatabase()) { // yes says Hibernate\r\n                   executeAllCachedQueries(); // here the cached insert produces the constraint violation error\r\n               }\r\n           }\r\n           if isSelectStatement(sql) {\r\n               return executeQuery(sql); // we do not even reach this code here!\r\n           } else {\r\n               cacheQuery(sql); // insert, delete, update\r\n               return null;\r\n           }\r\n       }\r\n\r\nSome members pointed out, that the stack trace shows a failed insert statement. But they assumed, that the select statement somehow contains itself a trigger/... what @user3262365 denied.\r\n\r\nHere I showed that the select did not cause the insert. The insert command was already cached by Hibernate - and finally executed as &quot;preparation&quot; for the select towards the database - but the insert failed with a constraint violation.","title":"SELECT query giving unique constraint violation in Oracle","body":"<p><strong>Short version</strong></p>\n<p>The <strong>constraint violation exception belongs to an earlier executed insert statement</strong> from your code! But <strong>Hibernate cached the insert!</strong> It did not forward it to the database - but it executes the cached insert just before the select! And therefore fails - looking like the select had a problem.</p>\n<p>So the insert before was the root cause and contained values hurting that constraint.</p>\n<p><strong>Long version:</strong></p>\n<p>I stumbled upon this article with similar problem with Hibernate, JavaEE - in which I am not (yet) an expert:</p>\n<ul>\n<li>I had a loop inserting rows into a table.</li>\n<li>The first iteration in the loop was successful.</li>\n<li>But in the second I got a ConstraintViolation exception (in my case it was a unique index over two columns).</li>\n</ul>\n<p>While debugging I found out, that it happened just at executing such a simple JQPL &quot;<code>select count(*) from ... where ...</code>&quot;!\nThere is no trigger in this query, nothing (in my case it was even the same table involved than for the insert statement in the loop).</p>\n<p>That I am sure, what Hibernate does - I enabled the logging of SQL to the console with <code>spring.jpa.show-sql=true</code> in the file called <code>application.properties</code> to see what SQL is created by Hibernate.</p>\n<p>And at the point where the select query was executed with the next debugging step:</p>\n<ol>\n<li>The constraint exeception occured</li>\n<li>The log showed <em>only</em> an <code>insert</code> statement! That from the first loop iteration, because it was missing in the console log before! And I checked the parameters of the first loop iteration with the table content and yes, it would hurt that constraint! Hurray. I found it.</li>\n</ol>\n<p>Your Hibernate configuration/settings are such (like in my case), that you executed an <code>insert</code> statement in your code somewhere before the <code>select</code> statement.\nBut Hibernate cached the execution of the insert - it did not yet execute any insert towards the database!</p>\n<p>Finally at executing the select statement Hibernate somehow sees the need to execute the cached insert statement now really in the database - and this fails with the ConstraintException, what is returned to you as (mind blowing) error.</p>\n<p>Like this pseudo code, that is called during execution of the select query:</p>\n<pre><code>   private ResultSet executeQuery(String sql = &quot;select ...&quot;) {\n       if (areThereCachedHiberateQueries()) { // yes, an insert\n           if (isItNowNecessaryToExecuteTheseCachedQueriesWithDatabase()) { // yes says Hibernate\n               executeAllCachedQueries(); // here the cached insert produces the constraint violation error\n           }\n       }\n       if isSelectStatement(sql) {\n           return executeQuery(sql); // we do not even reach this code here!\n       } else {\n           cacheQuery(sql); // insert, delete, update\n           return null;\n       }\n   }\n</code></pre>\n<p>Some members pointed out, that the stack trace shows a failed insert statement. But they assumed, that the select statement somehow contains itself a trigger/... what @user3262365 denied.</p>\n<p>Here I showed that the select did not cause the insert. The insert command was already cached by Hibernate - and finally executed as &quot;preparation&quot; for the select towards the database - but the insert failed with a constraint violation.</p>\n"}],"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3184,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":55228163,"answer_count":4,"score":1,"last_activity_date":1683316426,"creation_date":1552682101,"question_id":55190299,"body_markdown":"I have this below Hibernate Select query where I am fetching the results which have the given name:\r\n\r\n    Query selectQuery = entityManager.createQuery(&quot;select aw from TableName aw WHERE lower(name)=&#39;&quot;+&quot;NAME&quot;.toLowerCase()+&quot;&#39;&quot;,TableName.class);\r\n    \t\t\t\t\t\t\t\t\t\t\t\r\n    List entityList = selectQuery.getResultList();\r\n\r\nBut this query gives me :\r\nORA-00001: unique constraint (Constraint_Name) violated Exception.\r\n \r\n\r\n&gt; javax.persistence.PersistenceException: \r\n&gt; org.hibernate.exception.ConstraintViolationException: could not\r\n&gt; execute statement\r\n\r\nHow could a SELECT query give Unique constraint exception? Is it because of the Unique Index on the table?\r\nBelow is the full stack trace:\r\n\r\n```\r\njavax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:147)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1419)\r\n\tat org.hibernate.Query.getResultList(Query.java:427)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:721)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:656)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:721)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:69)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:656)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:116)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:648) \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729) \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748) \r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:97)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:207)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:45)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3001)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3501)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:586)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:460)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:50)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1389)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1474) \tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1441)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1410)\r\n\t... 105 more\r\nCaused by: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (CRESTPRD.NAME) violated\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:450) \tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:399) \tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1059) \tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:522) \tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:257) \tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:587) \tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:225)\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:53)\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:943)\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1150)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:4798)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:4875)\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1361)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:204)\r\n\t... 117 more\r\n```\r\n\r\nAny ideas?","title":"SELECT query giving unique constraint violation in Oracle","body":"<p>I have this below Hibernate Select query where I am fetching the results which have the given name:</p>\n\n<pre><code>Query selectQuery = entityManager.createQuery(\"select aw from TableName aw WHERE lower(name)='\"+\"NAME\".toLowerCase()+\"'\",TableName.class);\n\nList entityList = selectQuery.getResultList();\n</code></pre>\n\n<p>But this query gives me :\nORA-00001: unique constraint (Constraint_Name) violated Exception.</p>\n\n<blockquote>\n  <p>javax.persistence.PersistenceException: \n  org.hibernate.exception.ConstraintViolationException: could not\n  execute statement</p>\n</blockquote>\n\n<p>How could a SELECT query give Unique constraint exception? Is it because of the Unique Index on the table?\nBelow is the full stack trace:</p>\n\n<pre><code>javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:147)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1419)\n    at org.hibernate.Query.getResultList(Query.java:427)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:721)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:656)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:721)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:69)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:656)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:116)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)     at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748) \nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:97)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:207)\n    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:45)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3001)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3501)\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:586)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:460)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)\n    at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:50)\n    at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1389)\n    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1474)   at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1441)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1410)\n    ... 105 more\nCaused by: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (CRESTPRD.NAME) violated\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:450)    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:399)    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1059)     at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:522)     at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:257)   at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:587)    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:225)\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:53)\n    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:943)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1150)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:4798)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:4875)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1361)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:204)\n    ... 117 more\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["java","hibernate","grails","grails-orm"],"comments":[{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683315992,"post_id":76185411,"comment_id":134353885,"body_markdown":"What Java version? I ask because Java 17+ enforces module &quot;visibility&quot;, well access to module internal classes.","body":"What Java version? I ask because Java 17+ enforces module &quot;visibility&quot;, well access to module internal classes."},{"owner":{"account_id":8229771,"reputation":2191,"user_id":6190803,"accept_rate":50,"display_name":"Dylan"},"score":0,"creation_date":1683316258,"post_id":76185411,"comment_id":134353943,"body_markdown":"@BillMair Java8\n\n------------------------------------------------------------\nGradle 5.0\n------------------------------------------------------------\n\nBuild time:   2018-11-26 11:48:43 UTC\nRevision:     7fc6e5abf2fc5fe0824aec8a0f5462664dbcd987\n\nKotlin DSL:   1.0.4\nKotlin:       1.3.10\nGroovy:       2.5.4\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\nJVM:          1.8.0_302 (Amazon.com Inc. 25.302-b08)\nOS:           Mac OS X 13.3.1 x86_64","body":"@BillMair Java8  ------------------------------------------------------------ Gradle 5.0 ------------------------------------------------------------  Build time:   2018-11-26 11:48:43 UTC Revision:     7fc6e5abf2fc5fe0824aec8a0f5462664dbcd987  Kotlin DSL:   1.0.4 Kotlin:       1.3.10 Groovy:       2.5.4 Ant:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018 JVM:          1.8.0_302 (Amazon.com Inc. 25.302-b08) OS:           Mac OS X 13.3.1 x86_64"}],"owner":{"account_id":8229771,"reputation":2191,"user_id":6190803,"accept_rate":50,"display_name":"Dylan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683316289,"creation_date":1683315278,"question_id":76185411,"body_markdown":"I am trying to update my grails 3 app to grails 4. When I run the app, i get the following error.\r\n\r\n    java.lang.NoClassDefFoundError: org/grails/orm/hibernate5/support/GrailsOpenSessionInViewInterceptor\r\n            at java.lang.ClassLoader.defineClass1(Native Method)\r\n            at java.lang.ClassLoader.defineClass(ClassLoader.java:756)\r\n            at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n            at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\r\n            at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n            at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n            at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n            at java.security.AccessController.doPrivileged(Native Method)\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n            at com.cmt.multitenant.CmtMultiTenantGrailsPlugin$_doWithSpring_closure1.doCall(CmtMultiTenantGrailsPlugin.groovy:50)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)\r\n            at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n            at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)\r\n            at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)\r\n            at groovy.lang.Closure.call(Closure.java:405)\r\n            at groovy.lang.Closure.call(Closure.java:399)\r\n            at grails.spring.BeanBuilder.invokeBeanDefiningClosure(BeanBuilder.java:759)\r\n            at grails.spring.BeanBuilder.beans(BeanBuilder.java:588)\r\n            at grails.spring.BeanBuilder.invokeMethod(BeanBuilder.java:531)\r\n            at org.grails.plugins.DefaultGrailsPlugin.doWithRuntimeConfiguration(DefaultGrailsPlugin.java:543)\r\n            at org.grails.plugins.AbstractGrailsPluginManager.doRuntimeConfiguration(AbstractGrailsPluginManager.java:166)\r\n            at grails.boot.config.GrailsApplicationPostProcessor.postProcessBeanDefinitionRegistry(GrailsApplicationPostProcessor.groovy:171)\r\n            at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:275)\r\n            at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:125)\r\n            at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)\r\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744)\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\r\n            at grails.boot.GrailsApp.run(GrailsApp.groovy:96)\r\n            at grails.boot.GrailsApp.run(GrailsApp.groovy:456)\r\n            at grails.boot.GrailsApp.run(GrailsApp.groovy:443)\r\n            at grails.boot.GrailsApp$run.call(Unknown Source)\r\n            at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n            at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)\r\n            at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135)\r\n            at com.cmt.warranty.Application.main(Application.groovy:8)\r\n    Caused by: java.lang.ClassNotFoundException: org.grails.orm.hibernate5.support.GrailsOpenSessionInViewInterceptor\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n            ... 45 common frames omitted\r\n\r\n\r\n\r\n\r\n\r\n\r\nmy build.gradle is\r\n\r\n\r\n\r\n     dependencies {\r\n    //runtimeOnly(&quot;org.springframework.boot:spring-boot-devtools&quot;)\r\n     runtimeOnly(&quot;org.grails:grails-datastore-gorm-support:$gormVersion&quot;)\r\n\r\n    implementation &quot;org.springframework.boot:spring-boot-starter-logging&quot;\r\n    implementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\r\n    implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\r\n    implementation &quot;org.grails:grails-web-boot&quot;\r\n    implementation &quot;org.grails:grails-web-gsp&quot;\r\n    implementation &quot;org.grails.plugins:cache&quot;\r\n    implementation &quot;org.grails.plugins:scaffolding&quot;\r\n    implementation &quot;org.grails.plugins:views-json-templates&quot;\r\n    implementation &quot;org.grails:grails-datastore-gorm:$gormVersion&quot;\r\n\r\n    testImplementation &quot;org.grails:grails-web-testing-support&quot;\r\n    testImplementation &quot;org.springframework.boot:spring-boot-starter-test&quot;\r\n\r\n    // Sub-project dependencies\r\n\r\n    compile project(&quot;:wt-core&quot;)\r\n    compile &quot;com.cmt:gt3-assets:3.1.16&quot;\r\n    compile &quot;com.cmt:wt-shell:1.0&quot;, {\r\n        transitive = false\r\n    }\r\n\r\n    //Spring\r\n    compile &#39;org.grails.plugins:spring-security-core:4.0.4&#39;\r\n    implementation &#39;org.springframework.security:spring-security-acl:5.2.2.RELEASE&#39;\r\n\r\n\r\n    //AWS\r\n    compile &quot;org.grails.plugins:aws-sdk-s3:$awsSdkS3Version&quot;\r\n    compile &quot;com.amazonaws:aws-java-sdk-s3:1.11.375&quot;\r\n\r\n    //CMT Plugins\r\n    compile &quot;org.grails.plugins:cmt-multitenant:2.5.2-SNAPSHOT&quot;\r\n    compile &quot;org.grails.plugins:cmt-command:0.3-SNAPSHOT&quot;\r\n    compile &quot;org.grails.plugins:cmt-security:3.2.3-SNAPSHOT&quot;\r\n\r\n\r\n    //Quartz Jobs\r\n    compile &#39;org.grails.plugins:quartz:2.0.13&#39;\r\n\r\n    //Grails Plugins\r\n    compile &#39;org.grails.plugins:mail:3.0.0&#39;\r\n    compile &quot;io.github.gpc:asynchronous-mail:3.0.0&quot;\r\n    compile &#39;org.grails.plugins:excel-export:2.1&#39;\r\n    implementation &#39;com.jameskleeh:excel-builder:0.4.4&#39;\r\n    compile &quot;org.grails.plugins:database-migration:3.1.0.BUILD-SNAPSHOT&quot;\r\n    compile &#39;org.grails.plugins:converters:4.0.0&#39;\r\n\r\n    compile &quot;org.grails:grails-datastore-rest-client:6.1.12.BUILD-SNAPSHOT&quot;\r\n    //compile &#39;org.grails:grails-datastore-rest-client:5.0.0.RC2&#39;\r\n\r\n    //unable to resolve class org.apache.poi.ss.usermodel....\r\n    implementation &#39;org.apache.poi:poi:4.1.2&#39;\r\n    implementation &#39;org.apache.poi:poi-ooxml:4.1.2&#39;\r\n\r\n\r\n    //unable to resolve class org.jasig.cas.client.authentication.AttributePrincipal\r\n    //unable to resolve class org.springframework.security.cas.authentication.CasAuthenticationToken\r\n    implementation &#39;org.springframework.security:spring-security-cas:5.5.1&#39;\r\n    implementation &#39;org.jasig.cas.client:cas-client-core:3.6.0&#39;\r\n\r\n    //PDF\r\n    compile &#39;org.apache.pdfbox:pdfbox:2.0.24&#39;\r\n\r\n    //LiquidBase\r\n    compile &#39;org.liquibase:liquibase-core:3.8.0&#39;\r\n\r\n    //unable to resolve class org.apache.commons.io.IOUtils\r\n    compile &#39;commons-io:commons-io:2.10.0&#39;\r\n\r\n    //https://stackoverflow.com/questions/71932451/grails-4-static-type-checking-error-only-for-date-objects\r\n    implementation &quot;org.codehaus.groovy:groovy-dateutil:2.5.6&quot;\r\n\r\n    //Tests\r\n    testCompile &quot;org.grails.plugins:build-test-data:3.3.0.RC2&quot;\r\n    testCompile &quot;org.grails:grails-gorm-testing-support&quot;\r\n    testCompile &quot;org.grails:grails-web-testing-support&quot;\r\n    testCompile &quot;org.grails.plugins:geb:1.1.2&quot;\r\n    testRuntime &quot;org.seleniumhq.selenium:selenium-chrome-driver:2.47.1&quot;\r\n    testCompile &quot;org.seleniumhq.selenium:selenium-htmlunit-driver:2.47.1&quot;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n------------------------------------------------------------\r\nGradle 5.0\r\n------------------------------------------------------------\r\n\r\n    Build time:   2018-11-26 11:48:43 UTC\r\n    Revision:     7fc6e5abf2fc5fe0824aec8a0f5462664dbcd987\r\n    \r\n    Kotlin DSL:   1.0.4\r\n    Kotlin:       1.3.10\r\n    Groovy:       2.5.4\r\n    Ant:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\r\n    JVM:          1.8.0_302 (Amazon.com Inc. 25.302-b08)\r\n    OS:           Mac OS X 13.3.1 x86_64\r\n\r\n","title":"Caused by: java.lang.ClassNotFoundException: org.grails.orm.hibernate5.support.GrailsOpenSessionInViewInterceptor","body":"<p>I am trying to update my grails 3 app to grails 4. When I run the app, i get the following error.</p>\n<pre><code>java.lang.NoClassDefFoundError: org/grails/orm/hibernate5/support/GrailsOpenSessionInViewInterceptor\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:756)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        at com.cmt.multitenant.CmtMultiTenantGrailsPlugin$_doWithSpring_closure1.doCall(CmtMultiTenantGrailsPlugin.groovy:50)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)\n        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n        at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)\n        at groovy.lang.Closure.call(Closure.java:405)\n        at groovy.lang.Closure.call(Closure.java:399)\n        at grails.spring.BeanBuilder.invokeBeanDefiningClosure(BeanBuilder.java:759)\n        at grails.spring.BeanBuilder.beans(BeanBuilder.java:588)\n        at grails.spring.BeanBuilder.invokeMethod(BeanBuilder.java:531)\n        at org.grails.plugins.DefaultGrailsPlugin.doWithRuntimeConfiguration(DefaultGrailsPlugin.java:543)\n        at org.grails.plugins.AbstractGrailsPluginManager.doRuntimeConfiguration(AbstractGrailsPluginManager.java:166)\n        at grails.boot.config.GrailsApplicationPostProcessor.postProcessBeanDefinitionRegistry(GrailsApplicationPostProcessor.groovy:171)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:275)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:125)\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744)\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:96)\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:456)\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:443)\n        at grails.boot.GrailsApp$run.call(Unknown Source)\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135)\n        at com.cmt.warranty.Application.main(Application.groovy:8)\nCaused by: java.lang.ClassNotFoundException: org.grails.orm.hibernate5.support.GrailsOpenSessionInViewInterceptor\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 45 common frames omitted\n</code></pre>\n<p>my build.gradle is</p>\n<pre><code> dependencies {\n//runtimeOnly(&quot;org.springframework.boot:spring-boot-devtools&quot;)\n runtimeOnly(&quot;org.grails:grails-datastore-gorm-support:$gormVersion&quot;)\n\nimplementation &quot;org.springframework.boot:spring-boot-starter-logging&quot;\nimplementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\nimplementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\nimplementation &quot;org.grails:grails-web-boot&quot;\nimplementation &quot;org.grails:grails-web-gsp&quot;\nimplementation &quot;org.grails.plugins:cache&quot;\nimplementation &quot;org.grails.plugins:scaffolding&quot;\nimplementation &quot;org.grails.plugins:views-json-templates&quot;\nimplementation &quot;org.grails:grails-datastore-gorm:$gormVersion&quot;\n\ntestImplementation &quot;org.grails:grails-web-testing-support&quot;\ntestImplementation &quot;org.springframework.boot:spring-boot-starter-test&quot;\n\n// Sub-project dependencies\n\ncompile project(&quot;:wt-core&quot;)\ncompile &quot;com.cmt:gt3-assets:3.1.16&quot;\ncompile &quot;com.cmt:wt-shell:1.0&quot;, {\n    transitive = false\n}\n\n//Spring\ncompile 'org.grails.plugins:spring-security-core:4.0.4'\nimplementation 'org.springframework.security:spring-security-acl:5.2.2.RELEASE'\n\n\n//AWS\ncompile &quot;org.grails.plugins:aws-sdk-s3:$awsSdkS3Version&quot;\ncompile &quot;com.amazonaws:aws-java-sdk-s3:1.11.375&quot;\n\n//CMT Plugins\ncompile &quot;org.grails.plugins:cmt-multitenant:2.5.2-SNAPSHOT&quot;\ncompile &quot;org.grails.plugins:cmt-command:0.3-SNAPSHOT&quot;\ncompile &quot;org.grails.plugins:cmt-security:3.2.3-SNAPSHOT&quot;\n\n\n//Quartz Jobs\ncompile 'org.grails.plugins:quartz:2.0.13'\n\n//Grails Plugins\ncompile 'org.grails.plugins:mail:3.0.0'\ncompile &quot;io.github.gpc:asynchronous-mail:3.0.0&quot;\ncompile 'org.grails.plugins:excel-export:2.1'\nimplementation 'com.jameskleeh:excel-builder:0.4.4'\ncompile &quot;org.grails.plugins:database-migration:3.1.0.BUILD-SNAPSHOT&quot;\ncompile 'org.grails.plugins:converters:4.0.0'\n\ncompile &quot;org.grails:grails-datastore-rest-client:6.1.12.BUILD-SNAPSHOT&quot;\n//compile 'org.grails:grails-datastore-rest-client:5.0.0.RC2'\n\n//unable to resolve class org.apache.poi.ss.usermodel....\nimplementation 'org.apache.poi:poi:4.1.2'\nimplementation 'org.apache.poi:poi-ooxml:4.1.2'\n\n\n//unable to resolve class org.jasig.cas.client.authentication.AttributePrincipal\n//unable to resolve class org.springframework.security.cas.authentication.CasAuthenticationToken\nimplementation 'org.springframework.security:spring-security-cas:5.5.1'\nimplementation 'org.jasig.cas.client:cas-client-core:3.6.0'\n\n//PDF\ncompile 'org.apache.pdfbox:pdfbox:2.0.24'\n\n//LiquidBase\ncompile 'org.liquibase:liquibase-core:3.8.0'\n\n//unable to resolve class org.apache.commons.io.IOUtils\ncompile 'commons-io:commons-io:2.10.0'\n\n//https://stackoverflow.com/questions/71932451/grails-4-static-type-checking-error-only-for-date-objects\nimplementation &quot;org.codehaus.groovy:groovy-dateutil:2.5.6&quot;\n\n//Tests\ntestCompile &quot;org.grails.plugins:build-test-data:3.3.0.RC2&quot;\ntestCompile &quot;org.grails:grails-gorm-testing-support&quot;\ntestCompile &quot;org.grails:grails-web-testing-support&quot;\ntestCompile &quot;org.grails.plugins:geb:1.1.2&quot;\ntestRuntime &quot;org.seleniumhq.selenium:selenium-chrome-driver:2.47.1&quot;\ntestCompile &quot;org.seleniumhq.selenium:selenium-htmlunit-driver:2.47.1&quot;\n</code></pre>\n<p>}</p>\n<hr />\n<h2>Gradle 5.0</h2>\n<pre><code>Build time:   2018-11-26 11:48:43 UTC\nRevision:     7fc6e5abf2fc5fe0824aec8a0f5462664dbcd987\n\nKotlin DSL:   1.0.4\nKotlin:       1.3.10\nGroovy:       2.5.4\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\nJVM:          1.8.0_302 (Amazon.com Inc. 25.302-b08)\nOS:           Mac OS X 13.3.1 x86_64\n</code></pre>\n"},{"tags":["java","c++","java-native-interface"],"answers":[{"comments":[{"owner":{"account_id":28472140,"reputation":3,"user_id":21787300,"display_name":"PelaRobsC"},"score":0,"creation_date":1683106921,"post_id":76161467,"comment_id":134314471,"body_markdown":"Thanks for your answer! I&#39;m surprised by its simplicity. What about that attachCurrentThread and dettachCurrentThread madness? Do I need to worry about that in that situation? When do I have to worry about that?","body":"Thanks for your answer! I&#39;m surprised by its simplicity. What about that attachCurrentThread and dettachCurrentThread madness? Do I need to worry about that in that situation? When do I have to worry about that?"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1683107018,"post_id":76161467,"comment_id":134314489,"body_markdown":"Threads are &quot;attached&quot; to the JVM either because they started it or because they are explicitly attached. Since your main thread started the JVM you should not worry about attaching.","body":"Threads are &quot;attached&quot; to the JVM either because they started it or because they are explicitly attached. Since your main thread started the JVM you should not worry about attaching."},{"owner":{"account_id":28472140,"reputation":3,"user_id":21787300,"display_name":"PelaRobsC"},"score":0,"creation_date":1683107596,"post_id":76161467,"comment_id":134314605,"body_markdown":"If my Java thread calls back my C++ thread, do I need to attach it? Probably, right?","body":"If my Java thread calls back my C++ thread, do I need to attach it? Probably, right?"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1683107669,"post_id":76161467,"comment_id":134314622,"body_markdown":"By &quot;call back&quot; you mean invoking the `hiFromJava` method? No. Invocations of JNI methods happen on the same (Java) thread.","body":"By &quot;call back&quot; you mean invoking the <code>hiFromJava</code> method? No. Invocations of JNI methods happen on the same (Java) thread."},{"owner":{"account_id":28472140,"reputation":3,"user_id":21787300,"display_name":"PelaRobsC"},"score":0,"creation_date":1683108222,"post_id":76161467,"comment_id":134314738,"body_markdown":"Yes, the `hiFromJava` is the callback. I&#39;m having a hard time imagining the scenario were `attachCurrentThread` is actually needed it. My Java thread calling `hiFromJava` was never attached by the JVM in the C++ side, correct? Why it does not need to be attached? If this Java thread then creates another thread, then it needs to be attached? We have three threads here: the main C thread that started the JVM, the Java thread, and the Java thread created by the Java thread.","body":"Yes, the <code>hiFromJava</code> is the callback. I&#39;m having a hard time imagining the scenario were <code>attachCurrentThread</code> is actually needed it. My Java thread calling <code>hiFromJava</code> was never attached by the JVM in the C++ side, correct? Why it does not need to be attached? If this Java thread then creates another thread, then it needs to be attached? We have three threads here: the main C thread that started the JVM, the Java thread, and the Java thread created by the Java thread."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1683113377,"post_id":76161467,"comment_id":134315794,"body_markdown":"Any thread created by Java is automatically considered to be attached. The only time when you need to attach manually is when you have created a new OS thread from outside Java and want to retrieve a `JNIEnv*` to interact with it.","body":"Any thread created by Java is automatically considered to be attached. The only time when you need to attach manually is when you have created a new OS thread from outside Java and want to retrieve a <code>JNIEnv*</code> to interact with it."}],"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683099556,"creation_date":1683099556,"answer_id":76161467,"question_id":76159993,"body_markdown":"Assuming you can get hold of a reference to an instance of `CallbackFromJava`, you can just call `thread.join()` on it:\r\n```\r\njobject cbfj = ...;\r\njclass cls_cbfj = env-&gt;GetObjectclass(cbfj);\r\njfieldID fid_cbfj_thread = env-&gt;GetFieldID(cls_cbfj, &quot;thread&quot;, &quot;Ljava/lang/Thread;&quot;);\r\njobject thread = env-&gt;GetObjectField(cbfj, fid_cbfj_thread);\r\n\r\njclass cls_thread = env-&gt;GetObjectClass(thread);\r\njmethodID mid_thread_join = env-&gt;GetMethodID(cls_thread, &quot;join&quot;, &quot;()V&quot;);\r\nenv-&gt;CallVoidMethod(thread, mid_thread_join);\r\n```\r\n","title":"How to prevent my JNI C code from exiting while the JVM it launched is still running a Java thread?","body":"<p>Assuming you can get hold of a reference to an instance of <code>CallbackFromJava</code>, you can just call <code>thread.join()</code> on it:</p>\n<pre><code>jobject cbfj = ...;\njclass cls_cbfj = env-&gt;GetObjectclass(cbfj);\njfieldID fid_cbfj_thread = env-&gt;GetFieldID(cls_cbfj, &quot;thread&quot;, &quot;Ljava/lang/Thread;&quot;);\njobject thread = env-&gt;GetObjectField(cbfj, fid_cbfj_thread);\n\njclass cls_thread = env-&gt;GetObjectClass(thread);\njmethodID mid_thread_join = env-&gt;GetMethodID(cls_thread, &quot;join&quot;, &quot;()V&quot;);\nenv-&gt;CallVoidMethod(thread, mid_thread_join);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":28472140,"reputation":3,"user_id":21787300,"display_name":"PelaRobsC"},"score":0,"creation_date":1683123275,"post_id":76164659,"comment_id":134318502,"body_markdown":"!!!!!!!?????? Thanks for noting that :) I worried about something I should not be worried about :)","body":"!!!!!!!?????? Thanks for noting that :) I worried about something I should not be worried about :)"}],"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683121823,"creation_date":1683121823,"answer_id":76164659,"question_id":76159993,"body_markdown":"[`DestroyJavaVM`](https://docs.oracle.com/en/java/javase/20/docs/specs/jni/invocation.html#destroyjavavm) will wait until all non-daemon threads are joined:\r\n\r\n&gt; This function waits until all non-daemon threads have terminated, excluding the current thread if it is non-daemon, and then initiates the shutdown sequence (see java.lang.Runtime)\r\n\r\nSo, your code should already work as is. (assuming you didn&#39;t make the thread daemon)","title":"How to prevent my JNI C code from exiting while the JVM it launched is still running a Java thread?","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/jni/invocation.html#destroyjavavm\" rel=\"nofollow noreferrer\"><code>DestroyJavaVM</code></a> will wait until all non-daemon threads are joined:</p>\n<blockquote>\n<p>This function waits until all non-daemon threads have terminated, excluding the current thread if it is non-daemon, and then initiates the shutdown sequence (see java.lang.Runtime)</p>\n</blockquote>\n<p>So, your code should already work as is. (assuming you didn't make the thread daemon)</p>\n"}],"owner":{"account_id":28472140,"reputation":3,"user_id":21787300,"display_name":"PelaRobsC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76161467,"answer_count":2,"score":0,"last_activity_date":1683316258,"creation_date":1683079734,"question_id":76159993,"body_markdown":"I&#39;m writing a C++ application that will rely on another **embedded** Java application. The barebones of my C++ application is below. My question is *how do I prevent it from exiting while the JVM is running my thread above?*\r\n\r\n```\r\n#include &lt;jni.h&gt;\r\n\r\nint main()\r\n{\r\n       Using namespace std;\r\n       JavaVM *jvm;                      // Pointer to the JVM (Java Virtual Machine)\r\n       JNIEnv *env;                      // Pointer to native interface\r\n           //================== prepare loading of Java VM ============================\r\n       JavaVMInitArgs vm_args;                        // Initialization arguments\r\n       JavaVMOption* options = new JavaVMOption[1];   // JVM invocation options\r\n       options[0].optionString = &quot;-Djava.class.path=.&quot;;   // where to find java .class\r\n       vm_args.version = JNI_VERSION_1_6;             // minimum Java version\r\n       vm_args.nOptions = 1;                          // number of options\r\n       vm_args.options = options;\r\n       vm_args.ignoreUnrecognized = false;     // invalid options make the JVM init fail\r\n           //=============== load and initialize Java VM and JNI interface =============\r\n       jint rc = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);  // YES !!\r\n       delete options;    // we then no longer need the initialisation options. \r\n       if (rc != JNI_OK) {\r\n              // TO DO: error processing... \r\n             cin.get();\r\n             exit(EXIT_FAILURE);\r\n       }\r\n          //=============== Display JVM version =======================================\r\n       cout &lt;&lt; &quot;JVM load succeeded!\\n&quot;;\r\n\r\n        // HERE I&#39;LL CALL A STATIC METHOD ON A JAVA CLASS THAT WILL START A JAVA THREAD\r\n        // What do I do here to keep my C application running while the JVM has my thread running?\r\n\r\n       jvm-&gt;DestroyJavaVM();\r\n}\r\n```\r\nSource: https://www.codeproject.com/Articles/993067/Calling-Java-from-Cplusplus-with-JNI","title":"How to prevent my JNI C code from exiting while the JVM it launched is still running a Java thread?","body":"<p>I'm writing a C++ application that will rely on another <strong>embedded</strong> Java application. The barebones of my C++ application is below. My question is <em>how do I prevent it from exiting while the JVM is running my thread above?</em></p>\n<pre><code>#include &lt;jni.h&gt;\n\nint main()\n{\n       Using namespace std;\n       JavaVM *jvm;                      // Pointer to the JVM (Java Virtual Machine)\n       JNIEnv *env;                      // Pointer to native interface\n           //================== prepare loading of Java VM ============================\n       JavaVMInitArgs vm_args;                        // Initialization arguments\n       JavaVMOption* options = new JavaVMOption[1];   // JVM invocation options\n       options[0].optionString = &quot;-Djava.class.path=.&quot;;   // where to find java .class\n       vm_args.version = JNI_VERSION_1_6;             // minimum Java version\n       vm_args.nOptions = 1;                          // number of options\n       vm_args.options = options;\n       vm_args.ignoreUnrecognized = false;     // invalid options make the JVM init fail\n           //=============== load and initialize Java VM and JNI interface =============\n       jint rc = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);  // YES !!\n       delete options;    // we then no longer need the initialisation options. \n       if (rc != JNI_OK) {\n              // TO DO: error processing... \n             cin.get();\n             exit(EXIT_FAILURE);\n       }\n          //=============== Display JVM version =======================================\n       cout &lt;&lt; &quot;JVM load succeeded!\\n&quot;;\n\n        // HERE I'LL CALL A STATIC METHOD ON A JAVA CLASS THAT WILL START A JAVA THREAD\n        // What do I do here to keep my C application running while the JVM has my thread running?\n\n       jvm-&gt;DestroyJavaVM();\n}\n</code></pre>\n<p>Source: <a href=\"https://www.codeproject.com/Articles/993067/Calling-Java-from-Cplusplus-with-JNI\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/993067/Calling-Java-from-Cplusplus-with-JNI</a></p>\n"},{"tags":["java","intellij-idea","copy-paste","intellij-14"],"comments":[{"owner":{"account_id":476395,"reputation":2065,"user_id":887290,"accept_rate":88,"display_name":"ThomasEdwin"},"score":0,"creation_date":1512482575,"post_id":47655384,"comment_id":82269039,"body_markdown":"Backup first then try deleting setting folder: https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs","body":"Backup first then try deleting setting folder: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/articles/&hellip;</a>"},{"owner":{"account_id":11926311,"reputation":53,"user_id":8727519,"display_name":"npie_"},"score":2,"creation_date":1512484565,"post_id":47655384,"comment_id":82270322,"body_markdown":"Worked! I deleted the config folder. I&#39;ll have to reinstall some plugins, but it&#39;s worh it. Thank&#39;s a lot!","body":"Worked! I deleted the config folder. I&#39;ll have to reinstall some plugins, but it&#39;s worh it. Thank&#39;s a lot!"}],"answers":[{"comments":[{"owner":{"account_id":11926311,"reputation":53,"user_id":8727519,"display_name":"npie_"},"score":1,"creation_date":1512483958,"post_id":47655452,"comment_id":82269904,"body_markdown":"already tired Ctrl+INS. When pressing Ctrl + Shift + V, &quot;Pasting from History&quot; comes up, where I can select previously copied text, but if I click the paste button, still nothing happens ./","body":"already tired Ctrl+INS. When pressing Ctrl + Shift + V, &quot;Pasting from History&quot; comes up, where I can select previously copied text, but if I click the paste button, still nothing happens ./"}],"tags":[],"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512482477,"creation_date":1512482477,"answer_id":47655452,"question_id":47655384,"body_markdown":"You can try alternatives: \r\n\r\n&gt; Ctrl + Shift + V for Windows or Linux\r\n\r\nor \r\n\r\n&gt; You might try **Ctrl+INS** for copy and **Shift+INS** for paste and\r\n&gt; see if they work. They are the traditional cut and paste and have been\r\n&gt; around a lot longer than Ctrl+c/Ctrl+v","title":"Ctrl+V does not work in IntelliJ","body":"<p>You can try alternatives: </p>\n\n<blockquote>\n  <p>Ctrl + Shift + V for Windows or Linux</p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>You might try <strong>Ctrl+INS</strong> for copy and <strong>Shift+INS</strong> for paste and\n  see if they work. They are the traditional cut and paste and have been\n  around a lot longer than Ctrl+c/Ctrl+v</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13189478,"reputation":1,"user_id":9526229,"display_name":"wenming yang"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1530408371,"creation_date":1530408371,"answer_id":51119733,"question_id":47655384,"body_markdown":"My OS is Ubuntu 18.04, and i had this problem before. An effective solution for my IDE is to set the Keymap to Default, which is file&gt;setting&gt;Keymap. ","title":"Ctrl+V does not work in IntelliJ","body":"<p>My OS is Ubuntu 18.04, and i had this problem before. An effective solution for my IDE is to set the Keymap to Default, which is file>setting>Keymap. </p>\n"},{"tags":[],"owner":{"account_id":1802816,"reputation":726,"user_id":1640696,"accept_rate":40,"display_name":"Ben"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620115160,"creation_date":1620115160,"answer_id":67380851,"question_id":47655384,"body_markdown":"I had the same problem, I regularly reboot so I always have a back-up of my settings. When I reimported them and updated the plugins I could paste again without issues.\r\nBack-up your settings from a working state File&gt;&gt;Manage IDE Settings&gt;&gt;Export Settings and use &gt;&gt; &gt;&gt;Import Settings to apply them.\r\n\r\nIf you don&#39;t have a back-up you can try it, but you might be backing up the problem as well. In that case you will have to reset to defaults and reset the IDE to your liking.","title":"Ctrl+V does not work in IntelliJ","body":"<p>I had the same problem, I regularly reboot so I always have a back-up of my settings. When I reimported them and updated the plugins I could paste again without issues.\nBack-up your settings from a working state File&gt;&gt;Manage IDE Settings&gt;&gt;Export Settings and use &gt;&gt; &gt;&gt;Import Settings to apply them.</p>\n<p>If you don't have a back-up you can try it, but you might be backing up the problem as well. In that case you will have to reset to defaults and reset the IDE to your liking.</p>\n"},{"tags":[],"owner":{"account_id":12502456,"reputation":1017,"user_id":9100468,"display_name":"Isaac Weingarten"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683315894,"creation_date":1683315894,"answer_id":76185482,"question_id":47655384,"body_markdown":"In Windows WebStorm 2023.1.1 I had the same issue, I made MENU &gt; FILE &gt; repair IDE it didn&#39;t fix it till I made a clear cache and restart that fixed it \r\n\r\nBTW while i had the issue Win+V worked","title":"Ctrl+V does not work in IntelliJ","body":"<p>In Windows WebStorm 2023.1.1 I had the same issue, I made MENU &gt; FILE &gt; repair IDE it didn't fix it till I made a clear cache and restart that fixed it</p>\n<p>BTW while i had the issue Win+V worked</p>\n"}],"owner":{"account_id":11926311,"reputation":53,"user_id":8727519,"display_name":"npie_"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3228,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1683315894,"creation_date":1512482273,"question_id":47655384,"body_markdown":"A while ago, &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;V&lt;/kbd&gt; stopped working in Intellij IDEA. Neither the shortcut nor `Edit` &gt; `Paste` works. It&#39;s really weird, since &quot;Paste Simple&quot; still works fine, so does &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;C&lt;/kbd&gt; and &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;X&lt;/kbd&gt;. \r\n\r\nI&#39;ve seen a lot of suggestions to solve this problem, but most of them are somehow related to the Vim Emulator for IntelliJ, which I don&#39;t use. I tried to play around with the Keymap, but could not get it to work. \r\n\r\nI&#39;m using Intellij 2017.2.5 on Windows 10. Maybe I screwed it up myself somehow, but I wish to fix it, because it&#39;s really painful to work without &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;V&lt;/kbd&gt;.\r\n","title":"Ctrl+V does not work in IntelliJ","body":"<p>A while ago, <kbd>Ctrl</kbd>+<kbd>V</kbd> stopped working in Intellij IDEA. Neither the shortcut nor <code>Edit</code> > <code>Paste</code> works. It's really weird, since \"Paste Simple\" still works fine, so does <kbd>Ctrl</kbd>+<kbd>C</kbd> and <kbd>Ctrl</kbd>+<kbd>X</kbd>. </p>\n\n<p>I've seen a lot of suggestions to solve this problem, but most of them are somehow related to the Vim Emulator for IntelliJ, which I don't use. I tried to play around with the Keymap, but could not get it to work. </p>\n\n<p>I'm using Intellij 2017.2.5 on Windows 10. Maybe I screwed it up myself somehow, but I wish to fix it, because it's really painful to work without <kbd>Ctrl</kbd>+<kbd>V</kbd>.</p>\n"},{"tags":["java","swing","user-interface","jtree"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":2,"creation_date":1683311123,"post_id":76184934,"comment_id":134352979,"body_markdown":"Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) section.","body":"Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> section."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683325697,"post_id":76184934,"comment_id":134355281,"body_markdown":"You’re blocking the Event Dispatching thread (with Thread.sleep) - you should use a SwingWorker to perform the background loading","body":"You’re blocking the Event Dispatching thread (with Thread.sleep) - you should use a SwingWorker to perform the background loading"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683328557,"post_id":76184934,"comment_id":134355566,"body_markdown":"See [Worker Threads and SwingWorker](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html) for more details","body":"See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\" rel=\"nofollow noreferrer\">Worker Threads and SwingWorker</a> for more details"}],"owner":{"account_id":28520130,"reputation":13,"user_id":21828953,"display_name":"mihhha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683315565,"creation_date":1683310366,"question_id":76184934,"body_markdown":"I have JTree. Child nodes are loaded dynamically when the parent node is expanded (treeExpanded event). Their loading time is a few seconds. I want to display the message &quot;Wait&quot; in the JLabel before starting this process. But it is displayed only after the end of the process. What&#39;s my mistake?\r\n\r\n\r\n```\r\nclass TFrame extends JFrame  {\r\n    private DefaultMutableTreeNode root;\r\n    private DefaultTreeModel model;\r\n    private JLabel label;\r\n    TFrame(){\r\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n        setSize(300,300);\r\n        JPanel lPanel=new JPanel();\r\n        label=new JLabel();\r\n        lPanel.add(label);\r\n        add(BorderLayout.SOUTH,lPanel);\r\n        JPanel panel=new JPanel();\r\n        root=new DefaultMutableTreeNode(&quot;Root&quot;);\r\n        model=new DefaultTreeModel(root,true);\r\n        JTree tree=new JTree(model);\r\n        tree.addTreeExpansionListener(new TreeExpansionListener() {\r\n            @Override\r\n            public void treeExpanded(TreeExpansionEvent event) {\r\n                label.setText(&quot;Wait&quot;);\r\n                try {\r\n                    Thread.sleep(5000);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                model.insertNodeInto(new DefaultMutableTreeNode(&quot;Node1&quot;),root,0);\r\n                model.insertNodeInto(new DefaultMutableTreeNode(&quot;Node2&quot;),root,1);\r\n            }\r\n            @Override\r\n            public void treeCollapsed(TreeExpansionEvent event) {\r\n            }\r\n        });\r\n        panel.add(tree);\r\n        add(BorderLayout.CENTER,panel);\r\n        setVisible(true);\r\n    }\r\n}\r\n```\r\n","title":"JTree. Wrong gui update order","body":"<p>I have JTree. Child nodes are loaded dynamically when the parent node is expanded (treeExpanded event). Their loading time is a few seconds. I want to display the message &quot;Wait&quot; in the JLabel before starting this process. But it is displayed only after the end of the process. What's my mistake?</p>\n<pre><code>class TFrame extends JFrame  {\n    private DefaultMutableTreeNode root;\n    private DefaultTreeModel model;\n    private JLabel label;\n    TFrame(){\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n        setSize(300,300);\n        JPanel lPanel=new JPanel();\n        label=new JLabel();\n        lPanel.add(label);\n        add(BorderLayout.SOUTH,lPanel);\n        JPanel panel=new JPanel();\n        root=new DefaultMutableTreeNode(&quot;Root&quot;);\n        model=new DefaultTreeModel(root,true);\n        JTree tree=new JTree(model);\n        tree.addTreeExpansionListener(new TreeExpansionListener() {\n            @Override\n            public void treeExpanded(TreeExpansionEvent event) {\n                label.setText(&quot;Wait&quot;);\n                try {\n                    Thread.sleep(5000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                model.insertNodeInto(new DefaultMutableTreeNode(&quot;Node1&quot;),root,0);\n                model.insertNodeInto(new DefaultMutableTreeNode(&quot;Node2&quot;),root,1);\n            }\n            @Override\n            public void treeCollapsed(TreeExpansionEvent event) {\n            }\n        });\n        panel.add(tree);\n        add(BorderLayout.CENTER,panel);\n        setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","neo4j","mvn-repo","neo4j-java-api"],"answers":[{"comments":[{"owner":{"account_id":947871,"reputation":64287,"user_id":974731,"display_name":"cybersam"},"score":0,"creation_date":1683315428,"post_id":69730788,"comment_id":134353784,"body_markdown":"Did you try changing the `version` instead of the `artifactId`?","body":"Did you try changing the <code>version</code> instead of the <code>artifactId</code>?"}],"tags":[],"owner":{"account_id":23153240,"reputation":1,"user_id":17254903,"display_name":"ochst"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683315133,"creation_date":1635288450,"answer_id":69730788,"question_id":69730380,"body_markdown":"After troubleshooting, I found that if you change the `artifactId` in the pom.xml file every time you want to recompile the jar file, it updates with the new procedures.\r\n\r\nFor example, the original `artifactId` for the medicare repository is &quot;medicare&quot;. When I changed this value to &quot;medicare123&quot;, ran `mvn clean package`, put the `.jar` file into the `/var/lib/neo4j/plugins` folder, and restarted my neo4j instance: I could see the procedures with the `dbms.procedures()` command in the cypher-shell. This is probably not the official way to solve this problem, but this is what fixed mine.","title":"Using Maven with Neo4j User-Defined Procedures","body":"<p>After troubleshooting, I found that if you change the <code>artifactId</code> in the pom.xml file every time you want to recompile the jar file, it updates with the new procedures.</p>\n<p>For example, the original <code>artifactId</code> for the medicare repository is &quot;medicare&quot;. When I changed this value to &quot;medicare123&quot;, ran <code>mvn clean package</code>, put the <code>.jar</code> file into the <code>/var/lib/neo4j/plugins</code> folder, and restarted my neo4j instance: I could see the procedures with the <code>dbms.procedures()</code> command in the cypher-shell. This is probably not the official way to solve this problem, but this is what fixed mine.</p>\n"}],"owner":{"account_id":23153240,"reputation":1,"user_id":17254903,"display_name":"ochst"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683315133,"creation_date":1635284972,"question_id":69730380,"body_markdown":"I copied this github repository as a template for using User-Defined Procedures in Neo4j. \r\n\r\n&lt;https://github.com/maxdemarzi/medicare&gt;\r\n\r\nI added some procedures, used &quot;mvn clean package&quot;, and was able to see these procedures in my database after putting the .jar file into the var/lib/neo4j/plugins folder and running &quot;call dbms.procedures();&quot; in the cypher-shell. However, when I add more functions to the database, I am not able to see or access them. Also, I can not edit or delete the procedures that I added the first time I ran &quot;mvn clean package&quot;. Has anyone else run into this problem?","title":"Using Maven with Neo4j User-Defined Procedures","body":"<p>I copied this github repository as a template for using User-Defined Procedures in Neo4j.</p>\n<p><a href=\"https://github.com/maxdemarzi/medicare\" rel=\"nofollow noreferrer\">https://github.com/maxdemarzi/medicare</a></p>\n<p>I added some procedures, used &quot;mvn clean package&quot;, and was able to see these procedures in my database after putting the .jar file into the var/lib/neo4j/plugins folder and running &quot;call dbms.procedures();&quot; in the cypher-shell. However, when I add more functions to the database, I am not able to see or access them. Also, I can not edit or delete the procedures that I added the first time I ran &quot;mvn clean package&quot;. Has anyone else run into this problem?</p>\n"},{"tags":["java","gremlin","janusgraph","gremlin-server"],"answers":[{"comments":[{"owner":{"account_id":1374386,"reputation":3070,"user_id":1308685,"accept_rate":88,"display_name":"Jeremy"},"score":0,"creation_date":1516832002,"post_id":48427535,"comment_id":83856262,"body_markdown":"Unfortunately I get an error with this method. Maybe I need to register something?","body":"Unfortunately I get an error with this method. Maybe I need to register something?"},{"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"score":0,"creation_date":1516832201,"post_id":48427535,"comment_id":83856343,"body_markdown":"Hmm, it might not know what to do with the JanusGraph RelationIdentifier? I would try to verify that - unwrap the ResponseMessage and just pass the RelationIdentifier to the ObjectMapper and see if you get the same error (though i assume it would look a bit less convoluted)","body":"Hmm, it might not know what to do with the JanusGraph RelationIdentifier? I would try to verify that - unwrap the ResponseMessage and just pass the RelationIdentifier to the ObjectMapper and see if you get the same error (though i assume it would look a bit less convoluted)"},{"owner":{"account_id":1374386,"reputation":3070,"user_id":1308685,"accept_rate":88,"display_name":"Jeremy"},"score":0,"creation_date":1516833090,"post_id":48427535,"comment_id":83856794,"body_markdown":"That was it. I just need to add the IO Registry for JanusGraph.","body":"That was it. I just need to add the IO Registry for JanusGraph."}],"tags":[],"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682884117,"creation_date":1516812075,"answer_id":48427535,"question_id":48427419,"body_markdown":"I think you should just create a Jackson `ObjectMapper` from a `GraphSONMapper` instance with whatever configurations you need and then pass your results into that:\r\n```javascript\r\n    gremlin&gt; mapper = GraphSONMapper.build().version(GraphSONVersion.V2_0).create().createMapper()\r\n    ==&gt;org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper@4ca8dbfa\r\n    gremlin&gt; mapper.class\r\n    ==&gt;class org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper\r\n    gremlin&gt; vertices = g.V().toList()\r\n    ==&gt;v[1]\r\n    ==&gt;v[2]\r\n    ==&gt;v[3]\r\n    ==&gt;v[4]\r\n    ==&gt;v[5]\r\n    ==&gt;v[6]\r\n    gremlin&gt; mapper.writeValueAsString(vertices)\r\n    ==&gt;[{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:1},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:0},&quot;value&quot;:&quot;marko&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:1},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:29},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:2},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:2},&quot;value&quot;:&quot;vadas&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:3},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:27},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:3},&quot;label&quot;:&quot;software&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:4},&quot;value&quot;:&quot;lop&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;lang&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:5},&quot;value&quot;:&quot;java&quot;,&quot;label&quot;:&quot;lang&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:4},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:6},&quot;value&quot;:&quot;josh&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:7},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:32},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:5},&quot;label&quot;:&quot;software&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:8},&quot;value&quot;:&quot;ripple&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;lang&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:9},&quot;value&quot;:&quot;java&quot;,&quot;label&quot;:&quot;lang&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:6},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:10},&quot;value&quot;:&quot;peter&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:11},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:35},&quot;label&quot;:&quot;age&quot;}}]}}}]\r\n```\r\n","title":"How do I serialize a Tinkerpop Vertex/Edge list for a REST service?","body":"<p>I think you should just create a Jackson <code>ObjectMapper</code> from a <code>GraphSONMapper</code> instance with whatever configurations you need and then pass your results into that:</p>\n<pre class=\"lang-js prettyprint-override\"><code>    gremlin&gt; mapper = GraphSONMapper.build().version(GraphSONVersion.V2_0).create().createMapper()\n    ==&gt;org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper@4ca8dbfa\n    gremlin&gt; mapper.class\n    ==&gt;class org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper\n    gremlin&gt; vertices = g.V().toList()\n    ==&gt;v[1]\n    ==&gt;v[2]\n    ==&gt;v[3]\n    ==&gt;v[4]\n    ==&gt;v[5]\n    ==&gt;v[6]\n    gremlin&gt; mapper.writeValueAsString(vertices)\n    ==&gt;[{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:1},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:0},&quot;value&quot;:&quot;marko&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:1},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:29},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:2},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:2},&quot;value&quot;:&quot;vadas&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:3},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:27},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:3},&quot;label&quot;:&quot;software&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:4},&quot;value&quot;:&quot;lop&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;lang&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:5},&quot;value&quot;:&quot;java&quot;,&quot;label&quot;:&quot;lang&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:4},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:6},&quot;value&quot;:&quot;josh&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:7},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:32},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:5},&quot;label&quot;:&quot;software&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:8},&quot;value&quot;:&quot;ripple&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;lang&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:9},&quot;value&quot;:&quot;java&quot;,&quot;label&quot;:&quot;lang&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:6},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:10},&quot;value&quot;:&quot;peter&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:11},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:35},&quot;label&quot;:&quot;age&quot;}}]}}}]\n</code></pre>\n"}],"owner":{"account_id":1374386,"reputation":3070,"user_id":1308685,"accept_rate":88,"display_name":"Jeremy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1681,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":48427535,"answer_count":1,"score":1,"last_activity_date":1683314688,"creation_date":1516811748,"question_id":48427419,"body_markdown":"Using an embedded JanusGraph, I&#39;m creating a REST service that returns lists of Vertex and Edge, but I&#39;d like to return JSON, like the gremlin server does.\r\n\r\nI&#39;ve attempted to use the MessageSerializer, but I&#39;m not able to coerce the binary format into JSON.  \r\n\r\n\t@RequestMapping(&quot;/search&quot;)\r\n\tpublic String search(@RequestBody SearchOptions options) throws JsonProcessingException, SerializationException {\r\n\t\tList&lt;Object&gt; data = new ArrayList&lt;&gt;();\r\n\t\tBuilder responseBuilder = getResponseBuilder(data);\r\n\r\n\t\tList&lt;Vertex&gt; nodes;\r\n\t\tList&lt;Object&gt; edges;\r\n\r\n\t\tif (Strings.isNullOrEmpty(options.getText()) || Strings.isNullOrEmpty(options.getField())) {\r\n\t\t\tnodes = g.V().limit(options.getLimit()).toList();\r\n\t\t\tedges = g.V().limit(options.getLimit()).aggregate(&quot;node&quot;).outE().as(&quot;edge&quot;).inV().where(P.within(&quot;node&quot;))\r\n\t\t\t\t\t.select(&quot;edge&quot;).toList();\r\n\t\t} else {\r\n\t\t\tnodes = g.V().has(options.getField(), options.getText()).toList();\r\n\t\t\tedges = g.V().has(options.getField(), options.getText()).aggregate(&quot;node&quot;).outE().as(&quot;edge&quot;).inV()\r\n\t\t\t\t\t.where(P.within(&quot;node&quot;)).select(&quot;edge&quot;).toList();\r\n\t\t}\r\n\t\tdata.add(nodes);\r\n\t\tdata.add(edges);\r\n\r\n\t\tResponseMessage response = responseBuilder.create();\r\n\t\tByteBufAllocator allocator = new PooledByteBufAllocator();\r\n\t\tByteBuf byteBuffer = ser.serializeResponseAsBinary(response, allocator);\r\n\t\tbyte[] bytes = byteBuffer.array();\r\n\t\tString str = new String(bytes);\r\n\t\treturn str;\r\n\t}   \r\n\r\n\t@Bean\r\n\tpublic MessageSerializer messageSerializer() {\r\n\t\tGryoMapper.Builder kryo = GryoMapper.build().addRegistry(JanusGraphIoRegistry.getInstance());\r\n        MessageSerializer serializer = new GryoMessageSerializerV1d0(kryo);\r\n        return serializer;\r\n\t}\r\n\r\nI tried using a jackson object mapper, but get this error -\r\n\r\n\r\n    [http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\r\n    org.apache.tinkerpop.shaded.jackson.databind.JsonMappingException: (was java.lang.IllegalStateException) (through reference chain: org.apache.tinkerpop.gremlin.driver.message.ResponseMessage[&quot;result&quot;]-&gt;org.apache.tinkerpop.gremlin.driver.message.ResponseResult[&quot;data&quot;]-&gt;java.util.ArrayList[0]-&gt;java.util.ArrayList[0]-&gt;org.janusgraph.graphdb.relations.RelationIdentifier[&quot;inVertexId&quot;])\r\n    \tat org.apache.tinkerpop.shaded.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:388)   \r\n\r\nI define the ObjectMapper like this -   \r\n\r\n    ObjectMapper mapper = GraphSONMapper.build().version(GraphSONVersion.V2_0).create().createMapper();\r\n\r\n---\r\n\r\n**This was the right way to create the `ObjectMapper`.**  \r\n\r\n \tprivate ObjectMapper mapper = GraphSONMapper.build()\r\n\t\t\t.addRegistry(JanusGraphIoRegistry.getInstance())\r\n\t\t\t.version(GraphSONVersion.V2_0).create().createMapper();","title":"How do I serialize a Tinkerpop Vertex/Edge list for a REST service?","body":"<p>Using an embedded JanusGraph, I'm creating a REST service that returns lists of Vertex and Edge, but I'd like to return JSON, like the gremlin server does.</p>\n<p>I've attempted to use the MessageSerializer, but I'm not able to coerce the binary format into JSON.</p>\n<pre><code>@RequestMapping(&quot;/search&quot;)\npublic String search(@RequestBody SearchOptions options) throws JsonProcessingException, SerializationException {\n    List&lt;Object&gt; data = new ArrayList&lt;&gt;();\n    Builder responseBuilder = getResponseBuilder(data);\n\n    List&lt;Vertex&gt; nodes;\n    List&lt;Object&gt; edges;\n\n    if (Strings.isNullOrEmpty(options.getText()) || Strings.isNullOrEmpty(options.getField())) {\n        nodes = g.V().limit(options.getLimit()).toList();\n        edges = g.V().limit(options.getLimit()).aggregate(&quot;node&quot;).outE().as(&quot;edge&quot;).inV().where(P.within(&quot;node&quot;))\n                .select(&quot;edge&quot;).toList();\n    } else {\n        nodes = g.V().has(options.getField(), options.getText()).toList();\n        edges = g.V().has(options.getField(), options.getText()).aggregate(&quot;node&quot;).outE().as(&quot;edge&quot;).inV()\n                .where(P.within(&quot;node&quot;)).select(&quot;edge&quot;).toList();\n    }\n    data.add(nodes);\n    data.add(edges);\n\n    ResponseMessage response = responseBuilder.create();\n    ByteBufAllocator allocator = new PooledByteBufAllocator();\n    ByteBuf byteBuffer = ser.serializeResponseAsBinary(response, allocator);\n    byte[] bytes = byteBuffer.array();\n    String str = new String(bytes);\n    return str;\n}   \n\n@Bean\npublic MessageSerializer messageSerializer() {\n    GryoMapper.Builder kryo = GryoMapper.build().addRegistry(JanusGraphIoRegistry.getInstance());\n    MessageSerializer serializer = new GryoMessageSerializerV1d0(kryo);\n    return serializer;\n}\n</code></pre>\n<p>I tried using a jackson object mapper, but get this error -</p>\n<pre><code>[http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\norg.apache.tinkerpop.shaded.jackson.databind.JsonMappingException: (was java.lang.IllegalStateException) (through reference chain: org.apache.tinkerpop.gremlin.driver.message.ResponseMessage[&quot;result&quot;]-&gt;org.apache.tinkerpop.gremlin.driver.message.ResponseResult[&quot;data&quot;]-&gt;java.util.ArrayList[0]-&gt;java.util.ArrayList[0]-&gt;org.janusgraph.graphdb.relations.RelationIdentifier[&quot;inVertexId&quot;])\n    at org.apache.tinkerpop.shaded.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:388)   \n</code></pre>\n<p>I define the ObjectMapper like this -</p>\n<pre><code>ObjectMapper mapper = GraphSONMapper.build().version(GraphSONVersion.V2_0).create().createMapper();\n</code></pre>\n<hr />\n<p><strong>This was the right way to create the <code>ObjectMapper</code>.</strong></p>\n<pre><code>private ObjectMapper mapper = GraphSONMapper.build()\n        .addRegistry(JanusGraphIoRegistry.getInstance())\n        .version(GraphSONVersion.V2_0).create().createMapper();\n</code></pre>\n"},{"tags":["java","spring-boot","spring-boot-actuator","contextpath"],"answers":[{"comments":[{"owner":{"account_id":126610,"reputation":13693,"user_id":323221,"accept_rate":76,"display_name":"Erik Pragt"},"score":0,"creation_date":1683354468,"post_id":76178991,"comment_id":134357238,"body_markdown":"Thanks Anton, this might not be a bad idea.","body":"Thanks Anton, this might not be a bad idea."}],"tags":[],"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683263379,"creation_date":1683263379,"answer_id":76178991,"question_id":76178502,"body_markdown":"You can try to use such approach with separate configuration for this purpose:\r\n\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.web.method.HandlerTypePredicate;\r\n    import org.springframework.web.servlet.config.annotation.PathMatchConfigurer;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    \r\n    @Configuration\r\n    public class BasePathConfig implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void configurePathMatch(PathMatchConfigurer configurer) {\r\n            configurer.addPathPrefix(&quot;network&quot;, HandlerTypePredicate.forBasePackage(&quot;com.example.controllers&quot;));\r\n        }\r\n    }\r\n\r\n","title":"Map controllers under a different context than actuator","body":"<p>You can try to use such approach with separate configuration for this purpose:</p>\n<pre><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.method.HandlerTypePredicate;\nimport org.springframework.web.servlet.config.annotation.PathMatchConfigurer;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class BasePathConfig implements WebMvcConfigurer {\n\n    @Override\n    public void configurePathMatch(PathMatchConfigurer configurer) {\n        configurer.addPathPrefix(&quot;network&quot;, HandlerTypePredicate.forBasePackage(&quot;com.example.controllers&quot;));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":126610,"reputation":13693,"user_id":323221,"accept_rate":76,"display_name":"Erik Pragt"},"score":0,"creation_date":1683354562,"post_id":76185320,"comment_id":134357250,"body_markdown":"I am not sure setting a different port will fix it, I don&#39;t think the `management.server.base-path` is `/`, but equal to the context path instead? Maybe I&#39;m reading this wrong though. Either way, I can&#39;t change the port, that would be too complex within our infra.","body":"I am not sure setting a different port will fix it, I don&#39;t think the <code>management.server.base-path</code> is <code>&#47;</code>, but equal to the context path instead? Maybe I&#39;m reading this wrong though. Either way, I can&#39;t change the port, that would be too complex within our infra."}],"tags":[],"owner":{"account_id":1362416,"reputation":4479,"user_id":1299533,"display_name":"Scott Frederick"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683314446,"creation_date":1683314446,"answer_id":76185320,"question_id":76178502,"body_markdown":"This is the expected behavior. From the [Spring Boot documentation][1]: \r\n\r\n&gt; Unless the management port has been configured to expose endpoints by using a different HTTP port, `management.endpoints.web.base-path` is relative to `server.servlet.context-path` (for servlet web applications) or `spring.webflux.base-path` (for reactive web applications). If `management.server.port` is configured, `management.endpoints.web.base-path` is relative to `management.server.base-path`.\r\n\r\nSo your options are to set `management.server.port` to a value that is different from `server.port` to get separate base paths, or change your application endpoint mappings as you suggested.  \r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator.monitoring.customizing-management-server-context-path","title":"Map controllers under a different context than actuator","body":"<p>This is the expected behavior. From the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator.monitoring.customizing-management-server-context-path\" rel=\"nofollow noreferrer\">Spring Boot documentation</a>:</p>\n<blockquote>\n<p>Unless the management port has been configured to expose endpoints by using a different HTTP port, <code>management.endpoints.web.base-path</code> is relative to <code>server.servlet.context-path</code> (for servlet web applications) or <code>spring.webflux.base-path</code> (for reactive web applications). If <code>management.server.port</code> is configured, <code>management.endpoints.web.base-path</code> is relative to <code>management.server.base-path</code>.</p>\n</blockquote>\n<p>So your options are to set <code>management.server.port</code> to a value that is different from <code>server.port</code> to get separate base paths, or change your application endpoint mappings as you suggested.</p>\n"}],"owner":{"account_id":126610,"reputation":13693,"user_id":323221,"accept_rate":76,"display_name":"Erik Pragt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683314446,"creation_date":1683254244,"question_id":76178502,"body_markdown":"I would like to map all my controllers under a context path called `/network`, but my Actuator path under `/actuator`. I&#39;ve attempted the following configuration in my `application.properties`, but the actuator path becomes `/network/actuator`, instead of `/actuator`:\r\n\r\n    server.servlet.context-path=/network\r\n    management.endpoints.web.base-path=/actuator\r\n\r\nI&#39;ve tried using the (deprecated) `management.server.servlet.context-path` property too, but this resulted in the same issue. \r\n\r\nAs a workaround, I can annotate my controllers with `@RequestMapping`, but it would be great if I can use the context path instead. I&#39;m using `Spring Boot 3.0.6.`","title":"Map controllers under a different context than actuator","body":"<p>I would like to map all my controllers under a context path called <code>/network</code>, but my Actuator path under <code>/actuator</code>. I've attempted the following configuration in my <code>application.properties</code>, but the actuator path becomes <code>/network/actuator</code>, instead of <code>/actuator</code>:</p>\n<pre><code>server.servlet.context-path=/network\nmanagement.endpoints.web.base-path=/actuator\n</code></pre>\n<p>I've tried using the (deprecated) <code>management.server.servlet.context-path</code> property too, but this resulted in the same issue.</p>\n<p>As a workaround, I can annotate my controllers with <code>@RequestMapping</code>, but it would be great if I can use the context path instead. I'm using <code>Spring Boot 3.0.6.</code></p>\n"},{"tags":["java","android","xml","xml-parsing"],"comments":[{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1575105529,"post_id":33331935,"comment_id":104460039,"body_markdown":"An idea: I got a solution from someone about doing a similar thing: load a binary XML to form VectorDrawable, and the same issue you wrote exists there. The solution there is to use reflection. Maybe it could help you too : https://stackoverflow.com/a/59023594/878126","body":"An idea: I got a solution from someone about doing a similar thing: load a binary XML to form VectorDrawable, and the same issue you wrote exists there. The solution there is to use reflection. Maybe it could help you too : <a href=\"https://stackoverflow.com/a/59023594/878126\">stackoverflow.com/a/59023594/878126</a>"}],"answers":[{"comments":[{"owner":{"account_id":2409520,"reputation":571,"user_id":2104990,"accept_rate":65,"display_name":"miversen33"},"score":0,"creation_date":1446655628,"post_id":33522311,"comment_id":54836054,"body_markdown":"I am at work right now but I&#39;ll give it a shot when I get home. I swear though if it&#39;s that simple of a line I&#39;ll fresh out","body":"I am at work right now but I&#39;ll give it a shot when I get home. I swear though if it&#39;s that simple of a line I&#39;ll fresh out"},{"owner":{"account_id":2409520,"reputation":571,"user_id":2104990,"accept_rate":65,"display_name":"miversen33"},"score":0,"creation_date":1446667491,"post_id":33522311,"comment_id":54843475,"body_markdown":"I edited the code and added the line factory.setValidating(true).\n\nI have gotten a new error now. I added the new error in my post","body":"I edited the code and added the line factory.setValidating(true).  I have gotten a new error now. I added the new error in my post"},{"owner":{"account_id":3522599,"reputation":130,"user_id":2944498,"display_name":"Santi"},"score":1,"creation_date":1446743698,"post_id":33522311,"comment_id":54881089,"body_markdown":"Sorry, after looking at the documentation, I found this: [link](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate(org.xmlpull.v1.XmlPullParser, android.view.ViewGroup))  Important   For performance reasons, view inflation relies heavily on pre-processing of XML files that is done at build time. Therefore, it is not currently possible to use LayoutInflater with an XmlPullParser over a plain XML file at runtime.","body":"Sorry, after looking at the documentation, I found this: [link](<a href=\"http://developer.android.com/reference/android/view/LayoutInflater.html#inflate(org.xmlpull.v1.XmlPullParser\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/view/&hellip;</a>, android.view.ViewGroup))  Important   For performance reasons, view inflation relies heavily on pre-processing of XML files that is done at build time. Therefore, it is not currently possible to use LayoutInflater with an XmlPullParser over a plain XML file at runtime."},{"owner":{"account_id":2409520,"reputation":571,"user_id":2104990,"accept_rate":65,"display_name":"miversen33"},"score":1,"creation_date":1446753988,"post_id":33522311,"comment_id":54887031,"body_markdown":"Well aint that some shit. They have the code to do it but you cant use it. \n\nWell thanks for the food for thought. If you post that as an answer I guess i&#39;ll have to accept it.","body":"Well aint that some shit. They have the code to do it but you cant use it.   Well thanks for the food for thought. If you post that as an answer I guess i&#39;ll have to accept it."}],"tags":[],"owner":{"account_id":3522599,"reputation":130,"user_id":2944498,"display_name":"Santi"},"comment_count":4,"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1446641101,"creation_date":1446641101,"answer_id":33522311,"question_id":33331935,"body_markdown":"put after factory\r\n\r\n    factory.setValidating(true);","title":"XmlPullAttributes cannot be cast to XmlBlockParser","body":"<p>put after factory</p>\n\n<pre><code>factory.setValidating(true);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2409520,"reputation":571,"user_id":2104990,"accept_rate":65,"display_name":"miversen33"},"score":0,"creation_date":1446861718,"post_id":33562871,"comment_id":54934223,"body_markdown":"I know this has been the accepted answer. But do you have any background on how that would work? I assume i can manually parse each view but that would be a massive pain, not knowing what is going on. Do you have any links to the background of how that is supposed to work?","body":"I know this has been the accepted answer. But do you have any background on how that would work? I assume i can manually parse each view but that would be a massive pain, not knowing what is going on. Do you have any links to the background of how that is supposed to work?"}],"tags":[],"owner":{"account_id":3522599,"reputation":130,"user_id":2944498,"display_name":"Santi"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1446800046,"creation_date":1446800046,"answer_id":33562871,"question_id":33331935,"body_markdown":"[Doc LayoutInflate][1]\r\n\r\n\r\n  [1]: http://developer.android.com/intl/es/reference/android/view/LayoutInflater.html#inflate(org.xmlpull.v1.XmlPullParser,%20android.view.ViewGroup)\r\n\r\nlook this:\r\n\r\nImportant For performance reasons, view inflation relies heavily on pre-processing of XML files that is done at build time. Therefore, it is not currently possible to use LayoutInflater with an XmlPullParser over a plain XML file at runtime.","title":"XmlPullAttributes cannot be cast to XmlBlockParser","body":"<p><a href=\"http://developer.android.com/intl/es/reference/android/view/LayoutInflater.html#inflate(org.xmlpull.v1.XmlPullParser,%20android.view.ViewGroup)\" rel=\"noreferrer\">Doc LayoutInflate</a></p>\n\n<p>look this:</p>\n\n<p>Important For performance reasons, view inflation relies heavily on pre-processing of XML files that is done at build time. Therefore, it is not currently possible to use LayoutInflater with an XmlPullParser over a plain XML file at runtime.</p>\n"},{"comments":[{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1575105286,"post_id":45918669,"comment_id":104459984,"body_markdown":"So what is your suggestion exactly?","body":"So what is your suggestion exactly?"},{"owner":{"account_id":3480291,"reputation":1807,"user_id":2912553,"accept_rate":60,"display_name":"momvart"},"score":0,"creation_date":1575108676,"post_id":45918669,"comment_id":104460686,"body_markdown":"You cannot use the default layout inflater of android, but you can have your custom implementation (it would be a bit sophisticated!). More detail: The problem is caused when inflater wants to obtain styled attributes. After compilation they are somehow coded for optimization and the parser doesn&#39;t work with their names.  If you provided an equivalent method to that, you would be able to parse your xml. I would suggest you take a look at [this comment](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/content/res/ResourcesImpl.java#1397) in the source code.","body":"You cannot use the default layout inflater of android, but you can have your custom implementation (it would be a bit sophisticated!). More detail: The problem is caused when inflater wants to obtain styled attributes. After compilation they are somehow coded for optimization and the parser doesn&#39;t work with their names.  If you provided an equivalent method to that, you would be able to parse your xml. I would suggest you take a look at <a href=\"https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/content/res/ResourcesImpl.java#1397\" rel=\"nofollow noreferrer\">this comment</a> in the source code."},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1575154830,"post_id":45918669,"comment_id":104471616,"body_markdown":"But somehow Google has intercepted how inflation works by replacing TextView with the app-compat version of it, for example. How does this work?","body":"But somehow Google has intercepted how inflation works by replacing TextView with the app-compat version of it, for example. How does this work?"},{"owner":{"account_id":3480291,"reputation":1807,"user_id":2912553,"accept_rate":60,"display_name":"momvart"},"score":1,"creation_date":1575288321,"post_id":45918669,"comment_id":104503975,"body_markdown":"@androiddeveloper I said the problem is obtaining styles, not the view&#39;s name.\nIt&#39;s been made possible by [`LayoutInflater.Factory`](https://developer.android.com/reference/android/view/LayoutInflater.Factory2.html) which creates a view by its tag name.\nAlso take a look at: [`AppcompatViewInflater`](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/androidx-master-dev/appcompat/appcompat/src/main/java/androidx/appcompat/app/AppCompatViewInflater.java)","body":"@androiddeveloper I said the problem is obtaining styles, not the view&#39;s name. It&#39;s been made possible by <a href=\"https://developer.android.com/reference/android/view/LayoutInflater.Factory2.html\" rel=\"nofollow noreferrer\"><code>LayoutInflater.Factory</code></a> which creates a view by its tag name. Also take a look at: <a href=\"https://android.googlesource.com/platform/frameworks/support/+/refs/heads/androidx-master-dev/appcompat/appcompat/src/main/java/androidx/appcompat/app/AppCompatViewInflater.java\" rel=\"nofollow noreferrer\"><code>AppcompatViewInflater</code></a>"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1575301782,"post_id":45918669,"comment_id":104511191,"body_markdown":"I see. Thank you","body":"I see. Thank you"}],"tags":[],"owner":{"account_id":3480291,"reputation":1807,"user_id":2912553,"accept_rate":60,"display_name":"momvart"},"comment_count":5,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1683314339,"creation_date":1503922207,"answer_id":45918669,"question_id":33331935,"body_markdown":"(I know it is an old question but I want to give an answer for those who want to use this method or faced with the problem recently.)\r\n\r\nBased on the source code, `XmlBlock` is a package-private class, and so is the `XmlBlock.Parser`. If you use this method with an XML got from method `Resources.getXml(id)` it will work without any problem because `getXml` ends up calling a function that [creates an `XmlBlock.Parser`][1] with its special algorithm designed for the application&#39;s internal resources. So I don&#39;t think we can get it worked (`XmlResourceParser` or anything like that cannot be cast to `XmlBlock.Parser`).\r\n\r\n\r\n  [1]: https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/content/res/ResourcesImpl.java;l=1212;drc=353e64eef51db68d0402a372c2adb5ecf32926c3","title":"XmlPullAttributes cannot be cast to XmlBlockParser","body":"<p>(I know it is an old question but I want to give an answer for those who want to use this method or faced with the problem recently.)</p>\n<p>Based on the source code, <code>XmlBlock</code> is a package-private class, and so is the <code>XmlBlock.Parser</code>. If you use this method with an XML got from method <code>Resources.getXml(id)</code> it will work without any problem because <code>getXml</code> ends up calling a function that <a href=\"https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/content/res/ResourcesImpl.java;l=1212;drc=353e64eef51db68d0402a372c2adb5ecf32926c3\" rel=\"nofollow noreferrer\">creates an <code>XmlBlock.Parser</code></a> with its special algorithm designed for the application's internal resources. So I don't think we can get it worked (<code>XmlResourceParser</code> or anything like that cannot be cast to <code>XmlBlock.Parser</code>).</p>\n"}],"owner":{"account_id":2409520,"reputation":571,"user_id":2104990,"accept_rate":65,"display_name":"miversen33"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4511,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":33522311,"answer_count":3,"score":8,"last_activity_date":1683314339,"creation_date":1445789788,"question_id":33331935,"body_markdown":"https://stackoverflow.com/questions/33293644/custom-xml-file-to-view/33293734#33293734\r\n\r\nThis is an error produced from the above question\r\n\r\nI managed to get the XML file saved into the assets folder, and loaded (and I can even navigate through the different parts of the parser and produce outputs from them) but when I try to pass the `XmlPullParser` to `LayoutInflater` I get the above error. I am not totally sure why it is happening though.\r\n\r\nBelow is the activity that I am using (the part of it that involves parsing the Xml file) as well as the xml file (called activity_main.sv) and the logcat.\r\n\r\nIgnore the file extension of the xml file. I simply renamed it because the IDE was having fits about inclusion. If the xml file is saved in the res/layouts folder it works just fine (I know because I copied it directly out of the res/layouts folder).\r\n\r\n    public void onCreate(Bundle savedInstanceState){\r\n    ...\r\n         try {\r\n              XmlPullParserFactory factory = XmlPullParserFactory.newInstance();\r\n              XmlPullParser parser = factory.newPullParser();\r\n              InputStream in = getResources().getAssets().open(&quot;views/activity_main.sv&quot;);\r\n              parser.setInput(new InputStreamReader(in));\r\n              LayoutInflater inflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n    //        The below line is line 73, the line which is giving me issue\r\n              View view = inflate.inflate(parser, null);\r\n              setContentView(view);\r\n         }catch(Exception e){\r\n              e.printStackTrace();\r\n    //        Consider the below line Log.d(&quot;TAG&quot;,&quot;Well fuck me it didnt work&quot;). AppLog is a custom class I created to help manage logging.\r\n              AppLog.log(&quot;Well fuck me it didnt work&quot;);\r\n         }\r\n    }\r\n\r\nAnd my basic relativelayout saved as &quot;activity_main.sv&quot;\r\n\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot; android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot; tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;TextView android:text=&quot;@string/hello_world&quot; android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\nAnd finally the logcat output\r\n\r\n    10-24 19:36:55.273: W/EGL_emulation(4724): eglSurfaceAttrib not implemented\r\n    10-24 19:36:55.273: W/OpenGLRenderer(4724): Failed to set EGL_SWAP_BEHAVIOR on surface 0xa34192a0, error=EGL_SUCCESS\r\n    10-24 19:47:15.252: W/System.err(8074): java.lang.ClassCastException: android.util.XmlPullAttributes cannot be cast to \r\n    \r\n    android.content.res.XmlBlock$Parser\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.content.res.Resources$Theme.obtainStyledAttributes\r\n    \r\n    (Resources.java:1483)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.content.Context.obtainStyledAttributes(Context.java:460)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:708)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.view.LayoutInflater.inflate(LayoutInflater.java:482)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.view.LayoutInflater.inflate(LayoutInflater.java:385)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat pro.bladebeat.intentplayground.MainActivity.onCreate\r\n    \r\n    (MainActivity.java:73)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.Activity.performCreate(Activity.java:5933)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.Instrumentation.callActivityOnCreate\r\n    \r\n    (Instrumentation.java:1105)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread.performLaunchActivity\r\n    \r\n    (ActivityThread.java:2251)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread.handleLaunchActivity\r\n    \r\n    (ActivityThread.java:2360)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread.access$800(ActivityThread.java:144)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.os.Handler.dispatchMessage(Handler.java:102)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.os.Looper.loop(Looper.java:135)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread.main(ActivityThread.java:5221)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat java.lang.reflect.Method.invoke(Native Method)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat java.lang.reflect.Method.invoke(Method.java:372)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run\r\n    \r\n    (ZygoteInit.java:899)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\r\n    10-24 19:47:15.257: D/AppLog(8074): Well fuck me it didnt work\r\n\r\nEDIT\r\nAfter adding the factory.setValidating(true) statement. I have a different error now.\r\n\r\n    11-04 14:59:52.682: W/System.err(4664): org.xmlpull.v1.XmlPullParserException: unsupported feature: http://xmlpull.org/v1/doc/features.html#validation (position:START_DOCUMENT null@1:1) \r\n    11-04 14:59:52.684: W/System.err(4664): \tat org.kxml2.io.KXmlParser.setFeature(KXmlParser.java:2100)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat org.xmlpull.v1.XmlPullParserFactory.newPullParser(XmlPullParserFactory.java:135)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat pro.bladebeat.intentplayground.MainActivity.onCreate(MainActivity.java:36)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.Activity.performCreate(Activity.java:5933)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1105)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2251)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2360)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread.access$800(ActivityThread.java:144)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.os.Handler.dispatchMessage(Handler.java:102)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.os.Looper.loop(Looper.java:135)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread.main(ActivityThread.java:5221)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat java.lang.reflect.Method.invoke(Native Method)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat java.lang.reflect.Method.invoke(Method.java:372)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\r\n\r\n","title":"XmlPullAttributes cannot be cast to XmlBlockParser","body":"<p><a href=\"https://stackoverflow.com/questions/33293644/custom-xml-file-to-view/33293734#33293734\">Custom xml file to view</a></p>\n\n<p>This is an error produced from the above question</p>\n\n<p>I managed to get the XML file saved into the assets folder, and loaded (and I can even navigate through the different parts of the parser and produce outputs from them) but when I try to pass the <code>XmlPullParser</code> to <code>LayoutInflater</code> I get the above error. I am not totally sure why it is happening though.</p>\n\n<p>Below is the activity that I am using (the part of it that involves parsing the Xml file) as well as the xml file (called activity_main.sv) and the logcat.</p>\n\n<p>Ignore the file extension of the xml file. I simply renamed it because the IDE was having fits about inclusion. If the xml file is saved in the res/layouts folder it works just fine (I know because I copied it directly out of the res/layouts folder).</p>\n\n<pre><code>public void onCreate(Bundle savedInstanceState){\n...\n     try {\n          XmlPullParserFactory factory = XmlPullParserFactory.newInstance();\n          XmlPullParser parser = factory.newPullParser();\n          InputStream in = getResources().getAssets().open(\"views/activity_main.sv\");\n          parser.setInput(new InputStreamReader(in));\n          LayoutInflater inflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n//        The below line is line 73, the line which is giving me issue\n          View view = inflate.inflate(parser, null);\n          setContentView(view);\n     }catch(Exception e){\n          e.printStackTrace();\n//        Consider the below line Log.d(\"TAG\",\"Well fuck me it didnt work\"). AppLog is a custom class I created to help manage logging.\n          AppLog.log(\"Well fuck me it didnt work\");\n     }\n}\n</code></pre>\n\n<p>And my basic relativelayout saved as \"activity_main.sv\"</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\" android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n    android:paddingRight=\"@dimen/activity_horizontal_margin\"\n    android:paddingTop=\"@dimen/activity_vertical_margin\"\n    android:paddingBottom=\"@dimen/activity_vertical_margin\" tools:context=\".MainActivity\"&gt;\n\n    &lt;TextView android:text=\"@string/hello_world\" android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>And finally the logcat output</p>\n\n<pre><code>10-24 19:36:55.273: W/EGL_emulation(4724): eglSurfaceAttrib not implemented\n10-24 19:36:55.273: W/OpenGLRenderer(4724): Failed to set EGL_SWAP_BEHAVIOR on surface 0xa34192a0, error=EGL_SUCCESS\n10-24 19:47:15.252: W/System.err(8074): java.lang.ClassCastException: android.util.XmlPullAttributes cannot be cast to \n\nandroid.content.res.XmlBlock$Parser\n10-24 19:47:15.253: W/System.err(8074):     at android.content.res.Resources$Theme.obtainStyledAttributes\n\n(Resources.java:1483)\n10-24 19:47:15.253: W/System.err(8074):     at android.content.Context.obtainStyledAttributes(Context.java:460)\n10-24 19:47:15.253: W/System.err(8074):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:708)\n10-24 19:47:15.253: W/System.err(8074):     at android.view.LayoutInflater.inflate(LayoutInflater.java:482)\n10-24 19:47:15.253: W/System.err(8074):     at android.view.LayoutInflater.inflate(LayoutInflater.java:385)\n10-24 19:47:15.253: W/System.err(8074):     at pro.bladebeat.intentplayground.MainActivity.onCreate\n\n(MainActivity.java:73)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.Activity.performCreate(Activity.java:5933)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.Instrumentation.callActivityOnCreate\n\n(Instrumentation.java:1105)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread.performLaunchActivity\n\n(ActivityThread.java:2251)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread.handleLaunchActivity\n\n(ActivityThread.java:2360)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread.access$800(ActivityThread.java:144)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\n10-24 19:47:15.253: W/System.err(8074):     at android.os.Handler.dispatchMessage(Handler.java:102)\n10-24 19:47:15.253: W/System.err(8074):     at android.os.Looper.loop(Looper.java:135)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread.main(ActivityThread.java:5221)\n10-24 19:47:15.253: W/System.err(8074):     at java.lang.reflect.Method.invoke(Native Method)\n10-24 19:47:15.253: W/System.err(8074):     at java.lang.reflect.Method.invoke(Method.java:372)\n10-24 19:47:15.253: W/System.err(8074):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run\n\n(ZygoteInit.java:899)\n10-24 19:47:15.253: W/System.err(8074):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\n10-24 19:47:15.257: D/AppLog(8074): Well fuck me it didnt work\n</code></pre>\n\n<p>EDIT\nAfter adding the factory.setValidating(true) statement. I have a different error now.</p>\n\n<pre><code>11-04 14:59:52.682: W/System.err(4664): org.xmlpull.v1.XmlPullParserException: unsupported feature: http://xmlpull.org/v1/doc/features.html#validation (position:START_DOCUMENT null@1:1) \n11-04 14:59:52.684: W/System.err(4664):     at org.kxml2.io.KXmlParser.setFeature(KXmlParser.java:2100)\n11-04 14:59:52.684: W/System.err(4664):     at org.xmlpull.v1.XmlPullParserFactory.newPullParser(XmlPullParserFactory.java:135)\n11-04 14:59:52.684: W/System.err(4664):     at pro.bladebeat.intentplayground.MainActivity.onCreate(MainActivity.java:36)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.Activity.performCreate(Activity.java:5933)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1105)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2251)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2360)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread.access$800(ActivityThread.java:144)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\n11-04 14:59:52.684: W/System.err(4664):     at android.os.Handler.dispatchMessage(Handler.java:102)\n11-04 14:59:52.684: W/System.err(4664):     at android.os.Looper.loop(Looper.java:135)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread.main(ActivityThread.java:5221)\n11-04 14:59:52.684: W/System.err(4664):     at java.lang.reflect.Method.invoke(Native Method)\n11-04 14:59:52.684: W/System.err(4664):     at java.lang.reflect.Method.invoke(Method.java:372)\n11-04 14:59:52.684: W/System.err(4664):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)\n11-04 14:59:52.684: W/System.err(4664):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\n</code></pre>\n"},{"tags":["java","multithreading","kotlin","thread-safety","kotlin-multiplatform"],"answers":[{"comments":[{"owner":{"account_id":1054867,"reputation":667,"user_id":1057820,"accept_rate":71,"display_name":"abdu"},"score":0,"creation_date":1662384892,"post_id":56883136,"comment_id":129987722,"body_markdown":"thanks for the &quot;immutability&quot; suggestion, I had an issue with concurrent modifications of a hash map, so returning a new HashMap solved the problem...","body":"thanks for the &quot;immutability&quot; suggestion, I had an issue with concurrent modifications of a hash map, so returning a new HashMap solved the problem..."}],"tags":[],"owner":{"account_id":14415942,"reputation":156,"user_id":10413396,"display_name":"Arkadii Ivanov"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1562226794,"creation_date":1562226794,"answer_id":56883136,"question_id":56882860,"body_markdown":"There is no lock nor synchronized in Kotlin common. Kotlin&#39;s approach is to use immutable data. You can add your own expect AtomicReference in common and actual implementations in JVM Native, it will help a lot. Also keep in mind that coroutines in Native are single threaded at the moment. Also you can&#39;t share mutable state between threads in Native.","title":"Is there multiplatform lock in Kotlin?","body":"<p>There is no lock nor synchronized in Kotlin common. Kotlin's approach is to use immutable data. You can add your own expect AtomicReference in common and actual implementations in JVM Native, it will help a lot. Also keep in mind that coroutines in Native are single threaded at the moment. Also you can't share mutable state between threads in Native.</p>\n"},{"tags":[],"owner":{"account_id":7093066,"reputation":6105,"user_id":5427663,"display_name":"TheOperator"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1562226964,"creation_date":1562226964,"answer_id":56883200,"question_id":56882860,"body_markdown":"From Kotlin/Native Concurrent documentation ([here](https://kotlinlang.org/docs/reference/native/concurrency.html)):\r\n\r\n&gt; **Concurrency in Kotlin/Native**\r\n&gt; \r\n&gt; Kotlin/Native runtime doesn&#39;t encourage a classical thread-oriented concurrency model with mutually exclusive code blocks and conditional variables, as this model is known to be error-prone and unreliable. Instead, we suggest a collection of alternative approaches, allowing you to use hardware concurrency and implement blocking IO. Those approaches are as follows, and they will be elaborated on in further sections:\r\n&gt;\r\n&gt;  *  Workers with message passing\r\n&gt;  *  Object subgraph ownership transfer\r\n&gt;  *  Object subgraph freezing\r\n&gt;  *  Object subgraph detachment\r\n&gt;  *  Raw shared memory using C globals\r\n&gt;  *  Coroutines for blocking operations (not covered in this document)\r\n\r\nIt seems that locks are not exposed in Kotlin/Native by design. There _are_ implementations (see [Lock.kt](https://github.com/JetBrains/kotlin-native/blob/master/runtime/src/main/kotlin/kotlin/native/concurrent/Lock.kt)), however that class is marked `internal`.\r\n\r\n_However_, there is a multi-platform implemenation of locks in KTOR (very limited [doc](https://api.ktor.io/1.1.3/io.ktor.util/-lock/index.html), [source code](https://github.com/ktorio/ktor/blob/master/ktor-utils/common/src/io/ktor/util/Lock.kt)). It is public, but marked with [`@InternalApi`](https://api.ktor.io/1.1.3/io.ktor.util/-internal-a-p-i/index.html), which may affect its stability.\r\n\r\nYou might also be interested in this KotlinLang discussion thread: [Replacement for synchronized](https://discuss.kotlinlang.org/t/replacement-for-synchronized/11240)","title":"Is there multiplatform lock in Kotlin?","body":"<p>From Kotlin/Native Concurrent documentation (<a href=\"https://kotlinlang.org/docs/reference/native/concurrency.html\" rel=\"noreferrer\">here</a>):</p>\n\n<blockquote>\n  <p><strong>Concurrency in Kotlin/Native</strong></p>\n  \n  <p>Kotlin/Native runtime doesn't encourage a classical thread-oriented concurrency model with mutually exclusive code blocks and conditional variables, as this model is known to be error-prone and unreliable. Instead, we suggest a collection of alternative approaches, allowing you to use hardware concurrency and implement blocking IO. Those approaches are as follows, and they will be elaborated on in further sections:</p>\n  \n  <ul>\n  <li>Workers with message passing</li>\n  <li>Object subgraph ownership transfer</li>\n  <li>Object subgraph freezing</li>\n  <li>Object subgraph detachment</li>\n  <li>Raw shared memory using C globals</li>\n  <li>Coroutines for blocking operations (not covered in this document)</li>\n  </ul>\n</blockquote>\n\n<p>It seems that locks are not exposed in Kotlin/Native by design. There <em>are</em> implementations (see <a href=\"https://github.com/JetBrains/kotlin-native/blob/master/runtime/src/main/kotlin/kotlin/native/concurrent/Lock.kt\" rel=\"noreferrer\">Lock.kt</a>), however that class is marked <code>internal</code>.</p>\n\n<p><em>However</em>, there is a multi-platform implemenation of locks in KTOR (very limited <a href=\"https://api.ktor.io/1.1.3/io.ktor.util/-lock/index.html\" rel=\"noreferrer\">doc</a>, <a href=\"https://github.com/ktorio/ktor/blob/master/ktor-utils/common/src/io/ktor/util/Lock.kt\" rel=\"noreferrer\">source code</a>). It is public, but marked with <a href=\"https://api.ktor.io/1.1.3/io.ktor.util/-internal-a-p-i/index.html\" rel=\"noreferrer\"><code>@InternalApi</code></a>, which may affect its stability.</p>\n\n<p>You might also be interested in this KotlinLang discussion thread: <a href=\"https://discuss.kotlinlang.org/t/replacement-for-synchronized/11240\" rel=\"noreferrer\">Replacement for synchronized</a></p>\n"},{"comments":[{"owner":{"account_id":1104623,"reputation":20026,"user_id":1103561,"accept_rate":55,"display_name":"4ntoine"},"score":0,"creation_date":1577358183,"post_id":58688775,"comment_id":105149708,"body_markdown":"&gt; &quot;can be easily extracted from there&quot;. How can it be done without copy/paste?","body":"&gt; &quot;can be easily extracted from there&quot;. How can it be done without copy/paste?"},{"owner":{"account_id":116757,"reputation":2670,"user_id":306047,"accept_rate":57,"display_name":"snorbi"},"score":0,"creation_date":1683311815,"post_id":58688775,"comment_id":134353117,"body_markdown":"These implementations are coroutine-specific, and it is not easy to &quot;extract&quot; some part of them imho...","body":"These implementations are coroutine-specific, and it is not easy to &quot;extract&quot; some part of them imho..."}],"tags":[],"owner":{"account_id":3019381,"reputation":51,"user_id":9079756,"display_name":"yasyd"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1572851905,"creation_date":1572851905,"answer_id":58688775,"question_id":56882860,"body_markdown":"There is full &quot;lock&quot; multi-platform implementation in  Kotlin coroutines library. It is based on atomicfu and I think that can be easily extracted from there, even if you really don&#39;t want to depend from the full coroutine library:\r\n\r\n - [official documentation][1]\r\n - [reference][2] \r\n - [source code][3]\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/reference/coroutines/shared-mutable-state-and-concurrency.html#mutual-exclusion\r\n  [2]: https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.sync/index.html\r\n  [3]: https://github.com/Kotlin/kotlinx.coroutines/tree/master/kotlinx-coroutines-core/common/src/sync\r\n","title":"Is there multiplatform lock in Kotlin?","body":"<p>There is full \"lock\" multi-platform implementation in  Kotlin coroutines library. It is based on atomicfu and I think that can be easily extracted from there, even if you really don't want to depend from the full coroutine library:</p>\n\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/reference/coroutines/shared-mutable-state-and-concurrency.html#mutual-exclusion\" rel=\"nofollow noreferrer\">official documentation</a></li>\n<li><a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.sync/index.html\" rel=\"nofollow noreferrer\">reference</a> </li>\n<li><a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/kotlinx-coroutines-core/common/src/sync\" rel=\"nofollow noreferrer\">source code</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":116757,"reputation":2670,"user_id":306047,"accept_rate":57,"display_name":"snorbi"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1683313959,"creation_date":1683311888,"answer_id":76185075,"question_id":56882860,"body_markdown":"The best available multiplatform solution is [kotlinx-atomicfu][1], a member of the official Kotlin libraries.\\\r\nSee its [locking features][2]:\r\n\r\n&gt; `kotlinx.atomicfu.locks` package providing multiplatform locking primitives that require no additional runtime dependencies on Kotlin/JVM and Kotlin/JS with a library implementation for Kotlin/Native\r\n&gt;\r\n&gt; - SynchronizedObject is designed for inheritance.\r\n&gt; - ReentrantLock is designed for delegation.\r\n\r\nAlthough it is currently in beta status, it is already used by production-quality libraries like *kotlinx-coroutines* and *arrow-kt*.\r\n\r\nIt is a low-level library, based on a Kotlin compiler plugin, so it is not always easy to use, for example its versions are bound to specific Kotlin versions.\r\n\r\n  [1]: https://github.com/Kotlin/kotlinx-atomicfu\r\n  [2]: https://github.com/Kotlin/kotlinx-atomicfu#locks","title":"Is there multiplatform lock in Kotlin?","body":"<p>The best available multiplatform solution is <a href=\"https://github.com/Kotlin/kotlinx-atomicfu\" rel=\"nofollow noreferrer\">kotlinx-atomicfu</a>, a member of the official Kotlin libraries.<br />\nSee its <a href=\"https://github.com/Kotlin/kotlinx-atomicfu#locks\" rel=\"nofollow noreferrer\">locking features</a>:</p>\n<blockquote>\n<p><code>kotlinx.atomicfu.locks</code> package providing multiplatform locking primitives that require no additional runtime dependencies on Kotlin/JVM and Kotlin/JS with a library implementation for Kotlin/Native</p>\n<ul>\n<li>SynchronizedObject is designed for inheritance.</li>\n<li>ReentrantLock is designed for delegation.</li>\n</ul>\n</blockquote>\n<p>Although it is currently in beta status, it is already used by production-quality libraries like <em>kotlinx-coroutines</em> and <em>arrow-kt</em>.</p>\n<p>It is a low-level library, based on a Kotlin compiler plugin, so it is not always easy to use, for example its versions are bound to specific Kotlin versions.</p>\n"}],"owner":{"account_id":1104623,"reputation":20026,"user_id":1103561,"accept_rate":55,"display_name":"4ntoine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3432,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":56883200,"answer_count":4,"score":11,"last_activity_date":1683313959,"creation_date":1562225828,"question_id":56882860,"body_markdown":"What multiplatform Lock or synchronization approach should be used in **multiplatform** Kotlin code? Previously in Java code i used `synchronized` and i can see [`synchronized`][1] in Kotlin too. However it&#39;s marked as Deprecated and will be removed from `common` std lib soon.\r\n\r\nI can see [`withLock`][2], but it&#39;s supported on **JVM** only, not multiplatform.\r\n\r\nAny thoughts?\r\n\r\nPS. For now we don&#39;t want to migrate to Kotlin coroutines because of too much rewrite and coroutines library footprint (too large for Android library with strict disk footprint requirements).\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/synchronized.html\r\n  [2]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/java.util.concurrent.locks.-lock/with-lock.html","title":"Is there multiplatform lock in Kotlin?","body":"<p>What multiplatform Lock or synchronization approach should be used in <strong>multiplatform</strong> Kotlin code? Previously in Java code i used <code>synchronized</code> and i can see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/synchronized.html\" rel=\"noreferrer\"><code>synchronized</code></a> in Kotlin too. However it's marked as Deprecated and will be removed from <code>common</code> std lib soon.</p>\n\n<p>I can see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/java.util.concurrent.locks.-lock/with-lock.html\" rel=\"noreferrer\"><code>withLock</code></a>, but it's supported on <strong>JVM</strong> only, not multiplatform.</p>\n\n<p>Any thoughts?</p>\n\n<p>PS. For now we don't want to migrate to Kotlin coroutines because of too much rewrite and coroutines library footprint (too large for Android library with strict disk footprint requirements).</p>\n"},{"tags":["java","selenium-webdriver","intellij-idea","testng"],"owner":{"account_id":28520382,"reputation":21,"user_id":21829163,"display_name":"dai123456va"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1683313864,"creation_date":1683312877,"question_id":76185175,"body_markdown":"I&#39;m using `RetryAnalyzer` to retry tests that got failed and `TestListenerAdapter` to remove retried tests from testng report because all retried tests are also counted in report. But my solution does not work and retried test (that are marked as skipped) are also counted in total amount\r\n\r\nI used `RetryAnalizer` to retry tests: \r\n\r\n```\r\npackage generics;\r\n\r\nimport org.testng.IRetryAnalyzer;\r\nimport org.testng.ITestResult;\r\n\r\npublic class RetryAnalyzer  implements IRetryAnalyzer {\r\n\r\n    private int retryCount = 0;\r\n    private int maxRetryCount = 1;\r\n\r\n    @Override\r\n    public boolean retry(ITestResult result) {\r\n        if (retryCount &lt; maxRetryCount) {\r\n            retryCount++;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n```\r\n\r\nuse `IAnnotationTransformer` class:\r\n\r\n```\r\npackage generics;\r\n\r\nimport org.testng.IAnnotationTransformer; \r\nimport org.testng.annotations.ITestAnnotation; \r\nimport java.lang.reflect.Constructor; \r\nimport java.lang.reflect.Method; \r\n\r\npublic class TestTranformer implements IAnnotationTransformer {\r\n\r\n    @Override\r\n    public void transform(ITestAnnotation iTestAnnotation, Class aClass, Constructor constructor, Method method) {\r\n       iTestAnnotation.setRetryAnalyzer(RetryAnalyzer.class);\r\n    }\r\n}\r\n```\r\n\r\n`TestListenerAdapter` to remove retired test that are marked as skipped from testngreport:\r\n\r\n```\r\npackage generics;\r\n\r\nimport java.util.Set;\r\nimport org.testng.ITestContext;\r\nimport org.testng.ITestNGMethod;\r\nimport org.testng.ITestResult;\r\n\r\npublic class TestListenerAdapter extends org.testng.TestListenerAdapter {\r\n\r\n\r\n    @Override\r\n    public void onFinish(ITestContext context) {\r\n        Set&lt;ITestResult&gt; failedTests = context.getSkippedTests().getAllResults();\r\n        for (ITestResult temp : failedTests) {\r\n            ITestNGMethod method = temp.getMethod();\r\n            if (context.getFailedTests().getResults(method).size() &gt; 1) {\r\n                failedTests.remove(temp);\r\n            } else {\r\n                if (context.getPassedTests().getResults(method).size() &gt; 0) {\r\n                    failedTests.remove(temp);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public void onTestStart(ITestResult result) {   }\r\n\r\n    public void onTestSuccess(ITestResult result) {   }\r\n\r\n    public void onTestFailure(ITestResult result) {   }\r\n\r\n    public void onTestSkipped(ITestResult result) {   }\r\n\r\n    public void onTestFailedButWithinSuccessPercentage(ITestResult result) {   }\r\n\r\n    public void onStart(ITestContext context) {   }\r\n}\r\n```\r\n\r\nAdded both classes to testng.xml file:\r\n\r\n```\r\n&lt;listeners&gt;\r\n        &lt;listener class-name=&quot;generics.TestTranformer&quot;/&gt;\r\n        &lt;listener class-name=&quot;generics.TestListenerAdapter&quot;/&gt;\r\n&lt;/listeners&gt;\r\n````\r\n\r\n![test result snapshot](https://i.stack.imgur.com/tOLIu.png)\r\n\r\nI run my suite in Jenkins and in results are counted also retried test, but I want to remove them. What is the problem with my code?","title":"Remove retried tests marked as skipped from testng report","body":"<p>I'm using <code>RetryAnalyzer</code> to retry tests that got failed and <code>TestListenerAdapter</code> to remove retried tests from testng report because all retried tests are also counted in report. But my solution does not work and retried test (that are marked as skipped) are also counted in total amount</p>\n<p>I used <code>RetryAnalizer</code> to retry tests:</p>\n<pre><code>package generics;\n\nimport org.testng.IRetryAnalyzer;\nimport org.testng.ITestResult;\n\npublic class RetryAnalyzer  implements IRetryAnalyzer {\n\n    private int retryCount = 0;\n    private int maxRetryCount = 1;\n\n    @Override\n    public boolean retry(ITestResult result) {\n        if (retryCount &lt; maxRetryCount) {\n            retryCount++;\n            return true;\n        }\n        return false;\n    }\n\n}\n</code></pre>\n<p>use <code>IAnnotationTransformer</code> class:</p>\n<pre><code>package generics;\n\nimport org.testng.IAnnotationTransformer; \nimport org.testng.annotations.ITestAnnotation; \nimport java.lang.reflect.Constructor; \nimport java.lang.reflect.Method; \n\npublic class TestTranformer implements IAnnotationTransformer {\n\n    @Override\n    public void transform(ITestAnnotation iTestAnnotation, Class aClass, Constructor constructor, Method method) {\n       iTestAnnotation.setRetryAnalyzer(RetryAnalyzer.class);\n    }\n}\n</code></pre>\n<p><code>TestListenerAdapter</code> to remove retired test that are marked as skipped from testngreport:</p>\n<pre><code>package generics;\n\nimport java.util.Set;\nimport org.testng.ITestContext;\nimport org.testng.ITestNGMethod;\nimport org.testng.ITestResult;\n\npublic class TestListenerAdapter extends org.testng.TestListenerAdapter {\n\n\n    @Override\n    public void onFinish(ITestContext context) {\n        Set&lt;ITestResult&gt; failedTests = context.getSkippedTests().getAllResults();\n        for (ITestResult temp : failedTests) {\n            ITestNGMethod method = temp.getMethod();\n            if (context.getFailedTests().getResults(method).size() &gt; 1) {\n                failedTests.remove(temp);\n            } else {\n                if (context.getPassedTests().getResults(method).size() &gt; 0) {\n                    failedTests.remove(temp);\n                }\n            }\n        }\n    }\n\n    public void onTestStart(ITestResult result) {   }\n\n    public void onTestSuccess(ITestResult result) {   }\n\n    public void onTestFailure(ITestResult result) {   }\n\n    public void onTestSkipped(ITestResult result) {   }\n\n    public void onTestFailedButWithinSuccessPercentage(ITestResult result) {   }\n\n    public void onStart(ITestContext context) {   }\n}\n</code></pre>\n<p>Added both classes to testng.xml file:</p>\n<pre><code>&lt;listeners&gt;\n        &lt;listener class-name=&quot;generics.TestTranformer&quot;/&gt;\n        &lt;listener class-name=&quot;generics.TestListenerAdapter&quot;/&gt;\n&lt;/listeners&gt;\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/tOLIu.png\" alt=\"test result snapshot\" /></p>\n<p>I run my suite in Jenkins and in results are counted also retried test, but I want to remove them. What is the problem with my code?</p>\n"},{"tags":["java","oracle","spring-boot","spring-data-jpa","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1683469188,"post_id":76185238,"comment_id":134368414,"body_markdown":"This [answer](https://stackoverflow.com/a/32770261/1261766) might help. If not, please show us how you use `&lt;foreach&gt;` in SQL statement. BTW, if you have to deal with many objects, you should consider using [batch processing](https://github.com/mybatis/mybatis-3/wiki/FAQ#how-do-i-code-a-batch-insert) instead of `&lt;foreach&gt;` for performance reason.","body":"This <a href=\"https://stackoverflow.com/a/32770261/1261766\">answer</a> might help. If not, please show us how you use <code>&lt;foreach&gt;</code> in SQL statement. BTW, if you have to deal with many objects, you should consider using <a href=\"https://github.com/mybatis/mybatis-3/wiki/FAQ#how-do-i-code-a-batch-insert\" rel=\"nofollow noreferrer\">batch processing</a> instead of <code>&lt;foreach&gt;</code> for performance reason."}],"owner":{"account_id":9073277,"reputation":11,"user_id":6755700,"display_name":"Crimshot"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":428,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683313624,"creation_date":1683313516,"question_id":76185238,"body_markdown":"I&#39;m trying to update or insert based on whether a value in a certain column exists or not.\r\n\r\nI am using Oracle and below is the query I have:\r\n\r\n\r\n```\r\nMERGE INTO EMPLOYEE emp\r\nUSING (SELECT #{employeeId, jdbcType=VARCHAR} AS EMPLOYEE_ID \r\n       FROM dual) inholder\r\nON (inholder.EMPLOYEE_ID = emp.EMPLOYEE_ID)\r\nWHEN MATCHED THEN\r\n               UPDATE SET emp.EMPLOYEE_NAME = #{employeeName, jdbcType=VARCHAR}\r\nWHEN NOT MATCHED THEN\r\n               INSERT \r\n                   (EMPLOYEE_ID, EMPLOYEE_NAME)\r\n               VALUE\r\n                   (#{employeeId, jdbcType=VARCHAR}, #{employeeName, jdbcType=VARCHAR})\r\n\r\n\r\n```\r\n\r\nI have a list of employee objects getting passed, but I am not sure how to pass the list in order to do a multi insert/update\r\n\r\n\r\nI tried using foreach like below, but was not able to get it to work and ensure that the update and insert is one query versus multiple separate queries\r\n\r\n```\r\n&lt;foreach item=&quot;employee&quot; index=&quot;index&quot; collection=&quot;employeeList&quot;&gt;\r\n\r\n.\r\n.\r\n.\r\n\r\n&lt;/foreach&gt;\r\n```\r\n","title":"Upsert (insert or update) list of objects with MyBatis XML annotation","body":"<p>I'm trying to update or insert based on whether a value in a certain column exists or not.</p>\n<p>I am using Oracle and below is the query I have:</p>\n<pre><code>MERGE INTO EMPLOYEE emp\nUSING (SELECT #{employeeId, jdbcType=VARCHAR} AS EMPLOYEE_ID \n       FROM dual) inholder\nON (inholder.EMPLOYEE_ID = emp.EMPLOYEE_ID)\nWHEN MATCHED THEN\n               UPDATE SET emp.EMPLOYEE_NAME = #{employeeName, jdbcType=VARCHAR}\nWHEN NOT MATCHED THEN\n               INSERT \n                   (EMPLOYEE_ID, EMPLOYEE_NAME)\n               VALUE\n                   (#{employeeId, jdbcType=VARCHAR}, #{employeeName, jdbcType=VARCHAR})\n\n\n</code></pre>\n<p>I have a list of employee objects getting passed, but I am not sure how to pass the list in order to do a multi insert/update</p>\n<p>I tried using foreach like below, but was not able to get it to work and ensure that the update and insert is one query versus multiple separate queries</p>\n<pre><code>&lt;foreach item=&quot;employee&quot; index=&quot;index&quot; collection=&quot;employeeList&quot;&gt;\n\n.\n.\n.\n\n&lt;/foreach&gt;\n</code></pre>\n"},{"tags":["java","groovy","process","runtime"],"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":3,"creation_date":1683305320,"post_id":76184357,"comment_id":134351839,"body_markdown":"you should split `&quot;${mvnPath} primary-package -Pfull-release -f ${pomPath}&quot;` to multiple strings - put each parameter into a separate string `&quot;${mvnPath}&quot;, &quot;primary-package&quot;,  &quot;-Pfull-release&quot;,  &quot;-f&quot;,  &quot;${pomPath}&quot;`","body":"you should split <code>&quot;${mvnPath} primary-package -Pfull-release -f ${pomPath}&quot;</code> to multiple strings - put each parameter into a separate string <code>&quot;${mvnPath}&quot;, &quot;primary-package&quot;,  &quot;-Pfull-release&quot;,  &quot;-f&quot;,  &quot;${pomPath}&quot;</code>"},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1683309006,"post_id":76184357,"comment_id":134352493,"body_markdown":"@daggett is correct, if you look at the Javadoc for `ProcessBuilder` you&#39;ll see that the command and arguments must be in separate strings.","body":"@daggett is correct, if you look at the Javadoc for <code>ProcessBuilder</code> you&#39;ll see that the command and arguments must be in separate strings."}],"answers":[{"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1683628647,"post_id":76184430,"comment_id":134392444,"body_markdown":"Thanks, it was indeed a mix of not splitting the arguments and not adding the &quot;.cmd&quot; at the end (that I will have to change when running under Unix but that&#39;s another thing)","body":"Thanks, it was indeed a mix of not splitting the arguments and not adding the &quot;.cmd&quot; at the end (that I will have to change when running under Unix but that&#39;s another thing)"}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1683311907,"creation_date":1683305655,"answer_id":76184430,"question_id":76184357,"body_markdown":"It looks like you&#39;ve omitted the correct filename extension for MVN command on Windows &quot;.CMD&quot; and need to append so the pathname resolves properly - use `System.getenv(&quot;MAVEN_HOME&quot;) +&quot;/bin/mvn.cmd&quot;`.\r\n\r\nJava is not like CMD / Powershell which checks `PATHEXT` suffixes if the provided pathname does not exist.\r\n\r\nAs per in the comment by @daggett, you also need to split the arguments to use `ProcessBuilder(String... command)`, it does not work same way as the error-prone argument splitting call `Runtime.getRuntime.exec(String)`.\r\n\r\nIf you split up the arguments but don&#39;t specify the correct filename extension for MVN command you should see a different error:\r\n\r\n    new ProcessBuilder(System.getenv(&quot;MAVEN_HOME&quot;) + &quot;/bin/mvn&quot;, &quot;your&quot;, &quot;other&quot;, &quot;arguments ...&quot;).start()\r\n    =&gt; Exception java.io.IOException: Cannot run program &quot;C:\\whatever\\apache-maven-3.9.1/bin/mvn&quot;: \r\n       CreateProcess error=193, %1 is not a valid Win32 application\r\n\r\n\r\n","title":"Cannot run a process via ProcessBuilder.start() because of command not found","body":"<p>It looks like you've omitted the correct filename extension for MVN command on Windows &quot;.CMD&quot; and need to append so the pathname resolves properly - use <code>System.getenv(&quot;MAVEN_HOME&quot;) +&quot;/bin/mvn.cmd&quot;</code>.</p>\n<p>Java is not like CMD / Powershell which checks <code>PATHEXT</code> suffixes if the provided pathname does not exist.</p>\n<p>As per in the comment by @daggett, you also need to split the arguments to use <code>ProcessBuilder(String... command)</code>, it does not work same way as the error-prone argument splitting call <code>Runtime.getRuntime.exec(String)</code>.</p>\n<p>If you split up the arguments but don't specify the correct filename extension for MVN command you should see a different error:</p>\n<pre><code>new ProcessBuilder(System.getenv(&quot;MAVEN_HOME&quot;) + &quot;/bin/mvn&quot;, &quot;your&quot;, &quot;other&quot;, &quot;arguments ...&quot;).start()\n=&gt; Exception java.io.IOException: Cannot run program &quot;C:\\whatever\\apache-maven-3.9.1/bin/mvn&quot;: \n   CreateProcess error=193, %1 is not a valid Win32 application\n</code></pre>\n"}],"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76184430,"answer_count":1,"score":-1,"last_activity_date":1683311907,"creation_date":1683305006,"question_id":76184357,"body_markdown":"I am trying to run a `mvn ...` command via Groovy. \r\n\r\nThis is what I wrote: \r\n\r\n    def mvnPath = System.getenv(&quot;MAVEN_HOME&quot;) + &quot;/bin/mvn&quot;\r\n    def pomPath = new File(&quot;./pom.xml&quot;).getAbsolutePath()\r\n    Process mavenPrimaryPackagingProcess = new ProcessBuilder(\r\n            &quot;${mvnPath} primary-package -Pfull-release -f ${pomPath}&quot;\r\n        )\r\n        .directory(new File(&quot;.&quot;))\r\n        .redirectOutput(ProcessBuilder.Redirect.INHERIT)\r\n        .start()\r\n\r\nHowever, when I run the above, I get the following exception: \r\n\r\n&gt; Exception in thread &quot;main&quot; java.io.IOException: Cannot run program &quot;c:\\Maven\\maven-3.8.4/bin/mvn primary-package -Pfull-release -f D:\\projectRoot\\.\\pom.xml&quot; (in dir\r\nectory &quot;.&quot;): CreateProcess error=2, Le fichier sp&#233;cifi&#233; est introuvable\r\n\r\n(The sentence &quot;Le fichier sp&#233;cifi&#233; est introuvable&quot; is French for &quot;The system cannot find the file specified&quot;).\r\n\r\nAs you can see from the exception message, both the `mvn` executable and the `pom.xml` are fully qualified, so I really don&#39;t understand which is the file that cannot be found. \r\n\r\nAny idea? \r\nThe code snippet is ran via `java -jar ...` invocation on command line, with the terminal set on `D:\\projectRoot` (the same folder that is printed when I do `new File(&quot;.&quot;)`).\r\n","title":"Cannot run a process via ProcessBuilder.start() because of command not found","body":"<p>I am trying to run a <code>mvn ...</code> command via Groovy.</p>\n<p>This is what I wrote:</p>\n<pre><code>def mvnPath = System.getenv(&quot;MAVEN_HOME&quot;) + &quot;/bin/mvn&quot;\ndef pomPath = new File(&quot;./pom.xml&quot;).getAbsolutePath()\nProcess mavenPrimaryPackagingProcess = new ProcessBuilder(\n        &quot;${mvnPath} primary-package -Pfull-release -f ${pomPath}&quot;\n    )\n    .directory(new File(&quot;.&quot;))\n    .redirectOutput(ProcessBuilder.Redirect.INHERIT)\n    .start()\n</code></pre>\n<p>However, when I run the above, I get the following exception:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.io.IOException: Cannot run program &quot;c:\\Maven\\maven-3.8.4/bin/mvn primary-package -Pfull-release -f D:\\projectRoot.\\pom.xml&quot; (in dir\nectory &quot;.&quot;): CreateProcess error=2, Le fichier spécifié est introuvable</p>\n</blockquote>\n<p>(The sentence &quot;Le fichier spécifié est introuvable&quot; is French for &quot;The system cannot find the file specified&quot;).</p>\n<p>As you can see from the exception message, both the <code>mvn</code> executable and the <code>pom.xml</code> are fully qualified, so I really don't understand which is the file that cannot be found.</p>\n<p>Any idea?\nThe code snippet is ran via <code>java -jar ...</code> invocation on command line, with the terminal set on <code>D:\\projectRoot</code> (the same folder that is printed when I do <code>new File(&quot;.&quot;)</code>).</p>\n"},{"tags":["java","macos","swing","fonts"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1683313704,"post_id":76185073,"comment_id":134353481,"body_markdown":"Is there a separate font called Cambria Math Bold?  IIRC (from a long time ago) some fonts actually have a completely separate packaging for bold and italic.","body":"Is there a separate font called Cambria Math Bold?  IIRC (from a long time ago) some fonts actually have a completely separate packaging for bold and italic."},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683314266,"post_id":76185073,"comment_id":134353588,"body_markdown":"https://tex.stackexchange.com/questions/55410/bold-italic-math-with-unicode-math","body":"<a href=\"https://tex.stackexchange.com/questions/55410/bold-italic-math-with-unicode-math\" title=\"bold italic math with unicode math\">tex.stackexchange.com/questions/55410/&hellip;</a>"},{"owner":{"account_id":5017257,"reputation":369,"user_id":4031794,"display_name":"Alexander Dyuzhev"},"score":0,"creation_date":1683458487,"post_id":76185073,"comment_id":134367024,"body_markdown":"@JimGarrison No, only Cambria Math normal.","body":"@JimGarrison No, only Cambria Math normal."},{"owner":{"account_id":5017257,"reputation":369,"user_id":4031794,"display_name":"Alexander Dyuzhev"},"score":0,"creation_date":1683458833,"post_id":76185073,"comment_id":134367068,"body_markdown":"@BillMair I didn&#39;t understand how TeX issue relates to my one.","body":"@BillMair I didn&#39;t understand how TeX issue relates to my one."},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683466963,"post_id":76185073,"comment_id":134368102,"body_markdown":"@AlexanderDyuzhev Ref Bold --&gt; &quot;even Cambria Math (the de-facto standard OT math font) does not have one&quot; -&gt; https://tex.stackexchange.com/questions/55410/bold-italic-math-with-unicode-math#comment115951_55410","body":"@AlexanderDyuzhev Ref Bold --&gt; &quot;even Cambria Math (the de-facto standard OT math font) does not have one&quot; -&gt; <a href=\"https://tex.stackexchange.com/questions/55410/bold-italic-math-with-unicode-math#comment115951_55410\" title=\"bold italic math with unicode math%23comment115951_55410\">tex.stackexchange.com/questions/55410/&hellip;</a>"}],"owner":{"account_id":5017257,"reputation":369,"user_id":4031794,"display_name":"Alexander Dyuzhev"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683311884,"creation_date":1683311884,"question_id":76185073,"body_markdown":"I have a simple java app:\r\n\r\n```java\r\n        JFrame frame = new JFrame(&quot;Math fonts rendering examples&quot;);\r\n        frame.setLayout(null);\r\n        frame.setVisible(true);\r\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n        frame.setBounds(100, 100, 500, 500);\r\n\r\n        Container c = frame.getContentPane();\r\n\r\n        JLabel label1 = new JLabel(&quot;Cambria Math: [a, b]&quot;);\r\n        label1.setBounds(50, 50, 400, 30);\r\n        label1.setFont(new Font(&quot;Cambria Math&quot;, Font.PLAIN, 30));\r\n\r\n        JLabel label2 = new JLabel(&quot;Cambria Math: [a, b]&quot;);\r\n        label2.setBounds(50, 100, 400, 30);\r\n        label2.setFont(new Font(&quot;Cambria Math&quot;, Font.BOLD, 30));\r\n\r\n        c.add(label1);\r\n        c.add(label2);\r\n```\r\n\r\nI run it on Windows, MacOS and Ubuntu.\r\nThe font &#39;Cambria Math&#39; installed into the system and available for JVM (i.e. this font is system, no need additional actions to register it in Java).\r\n\r\nWindows (ok):\r\n[![enter image description here][1]][1]\r\n\r\nMacOs (not ok):\r\n[![enter image description here][2]][2]\r\n\r\nUbuntu (ok):\r\n[![enter image description here][3]][3]\r\n\r\nAs you can see, there isn&#39;t difference between Cambria Math normal and bold on MacOS.\r\n\r\nOn MacOS I&#39;ve tried to move the font from the system folder (`/Library/Fonts/Microsoft/Cambria Math.ttf`) to the user&#39;s folder `~/myfonts/Cambria Math.ttf`, and then register this font in Java like this:\r\n```java\r\nGraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();\r\nFont ttfFont = Font.createFont(Font.TRUETYPE_FONT, new File(fontFile));\r\nge.registerFont(ttfFont);\r\n```\r\n\r\nAfter that the normal and bold fonts look differently (as expected)\r\n[![enter image description here][4]][4]\r\n\r\nI&#39;ve found a bug opened 6(six!) years ago:\r\nhttps://bugs.openjdk.org/browse/JDK-8176835\r\nbut can&#39;t believe that there isn&#39;t any workaround solution.\r\n\r\n\r\nMy questions:\r\n- is there any workaround solution for this issue on Mac?\r\n- is there a way to re-register font in Java from the another folder?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fy4Hj.png\r\n  [2]: https://i.stack.imgur.com/9uaAl.png\r\n  [3]: https://i.stack.imgur.com/Wn2XX.png\r\n  [4]: https://i.stack.imgur.com/zmdE3.png","title":"Java: how to render system font in bold on MacOS","body":"<p>I have a simple java app:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        JFrame frame = new JFrame(&quot;Math fonts rendering examples&quot;);\n        frame.setLayout(null);\n        frame.setVisible(true);\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.setBounds(100, 100, 500, 500);\n\n        Container c = frame.getContentPane();\n\n        JLabel label1 = new JLabel(&quot;Cambria Math: [a, b]&quot;);\n        label1.setBounds(50, 50, 400, 30);\n        label1.setFont(new Font(&quot;Cambria Math&quot;, Font.PLAIN, 30));\n\n        JLabel label2 = new JLabel(&quot;Cambria Math: [a, b]&quot;);\n        label2.setBounds(50, 100, 400, 30);\n        label2.setFont(new Font(&quot;Cambria Math&quot;, Font.BOLD, 30));\n\n        c.add(label1);\n        c.add(label2);\n</code></pre>\n<p>I run it on Windows, MacOS and Ubuntu.\nThe font 'Cambria Math' installed into the system and available for JVM (i.e. this font is system, no need additional actions to register it in Java).</p>\n<p>Windows (ok):\n<a href=\"https://i.stack.imgur.com/fy4Hj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fy4Hj.png\" alt=\"enter image description here\" /></a></p>\n<p>MacOs (not ok):\n<a href=\"https://i.stack.imgur.com/9uaAl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9uaAl.png\" alt=\"enter image description here\" /></a></p>\n<p>Ubuntu (ok):\n<a href=\"https://i.stack.imgur.com/Wn2XX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wn2XX.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, there isn't difference between Cambria Math normal and bold on MacOS.</p>\n<p>On MacOS I've tried to move the font from the system folder (<code>/Library/Fonts/Microsoft/Cambria Math.ttf</code>) to the user's folder <code>~/myfonts/Cambria Math.ttf</code>, and then register this font in Java like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();\nFont ttfFont = Font.createFont(Font.TRUETYPE_FONT, new File(fontFile));\nge.registerFont(ttfFont);\n</code></pre>\n<p>After that the normal and bold fonts look differently (as expected)\n<a href=\"https://i.stack.imgur.com/zmdE3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zmdE3.png\" alt=\"enter image description here\" /></a></p>\n<p>I've found a bug opened 6(six!) years ago:\n<a href=\"https://bugs.openjdk.org/browse/JDK-8176835\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8176835</a>\nbut can't believe that there isn't any workaround solution.</p>\n<p>My questions:</p>\n<ul>\n<li>is there any workaround solution for this issue on Mac?</li>\n<li>is there a way to re-register font in Java from the another folder?</li>\n</ul>\n"},{"tags":["java","postgresql","spring-boot","google-cloud-platform","google-cloud-sql"],"answers":[{"tags":[],"owner":{"account_id":28332155,"reputation":359,"user_id":21666264,"display_name":"DominicT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683311812,"creation_date":1683311812,"answer_id":76185065,"question_id":76158414,"body_markdown":"To connect to Cloud SQL Postgres, you can choose between the two which are using a database client or Cloud SQL Auth proxy. you may check out this documentation regarding with [Connect using Cloud SQL connectors][1].\r\n\r\nCloud SQL Auth Proxy has 2 methods: [TCP and Unix Socket][2].\r\nCloud SQL Auth proxy will provide you to distinguish whether it will listen to TCP port or Unix socket. Unix Socket creates the location that you implemented. meanwhile, TCP listens on the `localhost` by its default.\r\n\r\n\r\nAlso note that the Cloud SQL Auth proxy does not support Unix sockets on Windows. Linux-based operating systems have a maximum socket path length of 108 characters. If the total length of the path exceeds this length, you cannot connect.\r\n\r\nTo access Cloud SQL proxy that is built into Cloud Run. Cloud SQL proxy via IP address, You can check this documentation that provides the connection whether you need to [connect via Public or Private IP][3]. \r\n\r\nThere are two options to connect your Cloud Run to Cloud SQL:\r\n\r\n - Configure private services access for Cloud SQL. you can also\r\n   build a private IP for a new instance or an existing one. Additional information can be found on this title [Configure private IP][4].\r\n\r\n\r\n - Configure serverless VPC access also configure it with the proper\r\n   region so that you can access it through your Cloud Run. for more information can be found in this title [Configure Serverless VPC Access][5].\r\n\r\n\r\nHope this helps.\r\n\r\n\r\n  [1]: https://cloud.google.com/sql/docs/postgres/connect-connectors\r\n  [2]: https://cloud.google.com/sql/docs/postgres/sql-proxy#startup_options\r\n  [3]: https://cloud.google.com/sql/docs/postgres/connect-overview#connection_options\r\n  [4]: https://cloud.google.com/sql/docs/postgres/configure-private-ip\r\n  [5]: https://cloud.google.com/vpc/docs/configure-serverless-vpc-access#creating_a_connector","title":"Connect to CloudSQL from Spring native app in Cloud Run","body":"<p>To connect to Cloud SQL Postgres, you can choose between the two which are using a database client or Cloud SQL Auth proxy. you may check out this documentation regarding with <a href=\"https://cloud.google.com/sql/docs/postgres/connect-connectors\" rel=\"nofollow noreferrer\">Connect using Cloud SQL connectors</a>.</p>\n<p>Cloud SQL Auth Proxy has 2 methods: <a href=\"https://cloud.google.com/sql/docs/postgres/sql-proxy#startup_options\" rel=\"nofollow noreferrer\">TCP and Unix Socket</a>.\nCloud SQL Auth proxy will provide you to distinguish whether it will listen to TCP port or Unix socket. Unix Socket creates the location that you implemented. meanwhile, TCP listens on the <code>localhost</code> by its default.</p>\n<p>Also note that the Cloud SQL Auth proxy does not support Unix sockets on Windows. Linux-based operating systems have a maximum socket path length of 108 characters. If the total length of the path exceeds this length, you cannot connect.</p>\n<p>To access Cloud SQL proxy that is built into Cloud Run. Cloud SQL proxy via IP address, You can check this documentation that provides the connection whether you need to <a href=\"https://cloud.google.com/sql/docs/postgres/connect-overview#connection_options\" rel=\"nofollow noreferrer\">connect via Public or Private IP</a>.</p>\n<p>There are two options to connect your Cloud Run to Cloud SQL:</p>\n<ul>\n<li><p>Configure private services access for Cloud SQL. you can also\nbuild a private IP for a new instance or an existing one. Additional information can be found on this title <a href=\"https://cloud.google.com/sql/docs/postgres/configure-private-ip\" rel=\"nofollow noreferrer\">Configure private IP</a>.</p>\n</li>\n<li><p>Configure serverless VPC access also configure it with the proper\nregion so that you can access it through your Cloud Run. for more information can be found in this title <a href=\"https://cloud.google.com/vpc/docs/configure-serverless-vpc-access#creating_a_connector\" rel=\"nofollow noreferrer\">Configure Serverless VPC Access</a>.</p>\n</li>\n</ul>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":256787,"reputation":3837,"user_id":537738,"accept_rate":70,"display_name":"David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683311812,"creation_date":1683057303,"question_id":76158414,"body_markdown":"I have a Spring Boot 3 app that I compile to a native image using the spring-boot-maven-plugin. This app is deployed to Google Cloud Run. It is important for this app to be a native image because we scale this to 0 instances and it needs to boot quickly on incoming requests.\r\n\r\nNow this app must connect to a Cloud SQL Postgres database. I added Spring Data JPA and built the jdbc url using the `com.google.cloud.sql.postgres.SocketFactory` (using the spring-cloud-gcp-sql library does not work in native mode).\r\n\r\nNow, everytime the app is started, RSA keys are generated (`First Cloud SQL connection, generating RSA key pair.`) which takes about 1 second. This is negligible in a normal Spring Boot app but huge in a native image. This takes the startup time from ~300 milliseconds to around 1.3 seconds.\r\n\r\nSo I tried to activate the Cloud SQL proxy that is built into Cloud Run. This mounts a unix socket into the container that the JDBC driver can then connect to. Unfortunately, the ffi library (`jnr-unixsocket`) does not work in native image mode either.\r\n\r\nMy options from here seem to be\r\n\r\n 1. Build my own socket factory based on the unix socket support in Java &gt;= 16, as described here: https://www.morling.dev/blog/talking-to-postgres-through-java-16-unix-domain-socket-channels/\r\n 2. Abandon the &quot;scale to 0&quot; premise and always run an instance. This still leaves the problem of &quot;slow&quot; scaling in load peak scenarios\r\n 3. Connect to the database using a private IP (via VPC connector) without the socket factory. This seems to work ok-ish (I can not use service accounts in this case) but our IT requires client certificates in Cloud SQL databases. I could generate static client certificates and use those in the JDBC driver. This is problematic because the certs need to be stored somewhere safely (like Google Secret Manager) and would have to be downloaded before establishing a database connection.\r\n\r\nIs there anything I am missing? Is it possible to access the Cloud SQL proxy via IP address? (connecting to 127.0.0.1:5432 did not work)?","title":"Connect to CloudSQL from Spring native app in Cloud Run","body":"<p>I have a Spring Boot 3 app that I compile to a native image using the spring-boot-maven-plugin. This app is deployed to Google Cloud Run. It is important for this app to be a native image because we scale this to 0 instances and it needs to boot quickly on incoming requests.</p>\n<p>Now this app must connect to a Cloud SQL Postgres database. I added Spring Data JPA and built the jdbc url using the <code>com.google.cloud.sql.postgres.SocketFactory</code> (using the spring-cloud-gcp-sql library does not work in native mode).</p>\n<p>Now, everytime the app is started, RSA keys are generated (<code>First Cloud SQL connection, generating RSA key pair.</code>) which takes about 1 second. This is negligible in a normal Spring Boot app but huge in a native image. This takes the startup time from ~300 milliseconds to around 1.3 seconds.</p>\n<p>So I tried to activate the Cloud SQL proxy that is built into Cloud Run. This mounts a unix socket into the container that the JDBC driver can then connect to. Unfortunately, the ffi library (<code>jnr-unixsocket</code>) does not work in native image mode either.</p>\n<p>My options from here seem to be</p>\n<ol>\n<li>Build my own socket factory based on the unix socket support in Java &gt;= 16, as described here: <a href=\"https://www.morling.dev/blog/talking-to-postgres-through-java-16-unix-domain-socket-channels/\" rel=\"nofollow noreferrer\">https://www.morling.dev/blog/talking-to-postgres-through-java-16-unix-domain-socket-channels/</a></li>\n<li>Abandon the &quot;scale to 0&quot; premise and always run an instance. This still leaves the problem of &quot;slow&quot; scaling in load peak scenarios</li>\n<li>Connect to the database using a private IP (via VPC connector) without the socket factory. This seems to work ok-ish (I can not use service accounts in this case) but our IT requires client certificates in Cloud SQL databases. I could generate static client certificates and use those in the JDBC driver. This is problematic because the certs need to be stored somewhere safely (like Google Secret Manager) and would have to be downloaded before establishing a database connection.</li>\n</ol>\n<p>Is there anything I am missing? Is it possible to access the Cloud SQL proxy via IP address? (connecting to 127.0.0.1:5432 did not work)?</p>\n"},{"tags":["java","spring","spring-integration","spring-batch"],"comments":[{"owner":{"account_id":4764104,"reputation":9906,"user_id":3850730,"accept_rate":83,"display_name":"Sabir Khan"},"score":0,"creation_date":1474990860,"post_id":39713310,"comment_id":66755250,"body_markdown":"are you doing chunk based processing? do you have a processor too in your spring batch step in addition to reader and writer?","body":"are you doing chunk based processing? do you have a processor too in your spring batch step in addition to reader and writer?"},{"owner":{"account_id":8104851,"reputation":429,"user_id":6106766,"accept_rate":67,"display_name":"Tony Edwards"},"score":0,"creation_date":1475000967,"post_id":39713310,"comment_id":66761369,"body_markdown":"Technically the chunks are 1 at a time due to a few different business issues. I do have a processor wired in but it does nothing at this time (just a code stub).","body":"Technically the chunks are 1 at a time due to a few different business issues. I do have a processor wired in but it does nothing at this time (just a code stub)."},{"owner":{"account_id":6323989,"reputation":4294,"user_id":4910973,"display_name":"Hansjoerg Wingeier"},"score":2,"creation_date":1475006210,"post_id":39713310,"comment_id":66764231,"body_markdown":"Why don&#39;t you just use two ItemPreparedStatementSetter? It gives you rhe possibility to map the fields of ClaimLine to the  appropriate parameters of the two Insert-sqls","body":"Why don&#39;t you just use two ItemPreparedStatementSetter? It gives you rhe possibility to map the fields of ClaimLine to the  appropriate parameters of the two Insert-sqls"},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":1,"creation_date":1475055789,"post_id":39713310,"comment_id":66784040,"body_markdown":"You have to write a custom itemwriter able to perform multiple write as described in http://stackoverflow.com/questions/18999724/spring-batch-one-reader-multiple-processors-and-writers instead of return a CompositeItemWriter","body":"You have to write a custom itemwriter able to perform multiple write as described in <a href=\"http://stackoverflow.com/questions/18999724/spring-batch-one-reader-multiple-processors-and-writers\" title=\"spring batch one reader multiple processors and writers\">stackoverflow.com/questions/18999724/&hellip;</a> instead of return a CompositeItemWriter"},{"owner":{"account_id":8104851,"reputation":429,"user_id":6106766,"accept_rate":67,"display_name":"Tony Edwards"},"score":1,"creation_date":1475072847,"post_id":39713310,"comment_id":66796916,"body_markdown":"@Hansjoerg - Using ItemPreparedStatementSetter is not preferred because I would like the code to be more readable for developers. But your comment has made me understand the use of ItemSqlParameterSourceProvider better and I am retrying that now.","body":"@Hansjoerg - Using ItemPreparedStatementSetter is not preferred because I would like the code to be more readable for developers. But your comment has made me understand the use of ItemSqlParameterSourceProvider better and I am retrying that now."}],"answers":[{"tags":[],"owner":{"account_id":8104851,"reputation":429,"user_id":6106766,"accept_rate":67,"display_name":"Tony Edwards"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1475075216,"creation_date":1475075216,"answer_id":39751303,"question_id":39713310,"body_markdown":"I believe the comments from @Hansjoerg and @Luca provide valuable responses to this question and were researched prior to and during the research for an answer.\r\n\r\n\r\n\r\nI was able to resolve this issue by continuing the use of a ItemSqlParameterSourceProvider and the code is below. When I initially explored how to use this class and its methods, my thought was that I was still only operating on the ClaimLine class.\r\n\r\nWhat is truly happening is the method is receiving the class from the writer and you are setting the values of the SQL statement you set with setSQL(String sql). With the use of ItemSqlParameterSourceProvider, you are using the named parameters in the SQL for the put statement. The code below only shows the code for a claim. The pharmacy would be similar.\r\n\r\n    public class ClaimItemSqlParameterSourceProvider implements ItemSqlParameterSourceProvider&lt;ClaimLine&gt; {\r\n\r\n\t    @SuppressWarnings({ &quot;serial&quot;})\r\n\t    @Override\r\n\t    public SqlParameterSource createSqlParameterSource(final ClaimLine item) {\r\n            return new MapSqlParameterSource(new HashMap&lt;String, Object&gt;() {\r\n\t\t\t    {\r\n        \t\t    put(&quot;rxclaimid&quot;, item.getRxClaimID());\r\n                    ...\r\n                    // many more\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nA custom item writer may have also resolved this issue, but it seems to require more coding to support it. In the end, either using a ItemPreparedStatementSetter or a ItemSqlParameterSourceProvider should be fine for this case. The main reason we choose the latter is because the parameters are clearly named instead of accessing the parameter values by index values (1,2,3, etc) and using &quot;?&quot; in the setSQL call. ","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>I believe the comments from @Hansjoerg and @Luca provide valuable responses to this question and were researched prior to and during the research for an answer.</p>\n\n<p>I was able to resolve this issue by continuing the use of a ItemSqlParameterSourceProvider and the code is below. When I initially explored how to use this class and its methods, my thought was that I was still only operating on the ClaimLine class.</p>\n\n<p>What is truly happening is the method is receiving the class from the writer and you are setting the values of the SQL statement you set with setSQL(String sql). With the use of ItemSqlParameterSourceProvider, you are using the named parameters in the SQL for the put statement. The code below only shows the code for a claim. The pharmacy would be similar.</p>\n\n<pre><code>public class ClaimItemSqlParameterSourceProvider implements ItemSqlParameterSourceProvider&lt;ClaimLine&gt; {\n\n    @SuppressWarnings({ \"serial\"})\n    @Override\n    public SqlParameterSource createSqlParameterSource(final ClaimLine item) {\n        return new MapSqlParameterSource(new HashMap&lt;String, Object&gt;() {\n            {\n                put(\"rxclaimid\", item.getRxClaimID());\n                ...\n                // many more\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>A custom item writer may have also resolved this issue, but it seems to require more coding to support it. In the end, either using a ItemPreparedStatementSetter or a ItemSqlParameterSourceProvider should be fine for this case. The main reason we choose the latter is because the parameters are clearly named instead of accessing the parameter values by index values (1,2,3, etc) and using \"?\" in the setSQL call. </p>\n"},{"comments":[{"owner":{"account_id":8104851,"reputation":429,"user_id":6106766,"accept_rate":67,"display_name":"Tony Edwards"},"score":0,"creation_date":1475162869,"post_id":39765968,"comment_id":66842973,"body_markdown":"Thanks Praveen. Definitely finding many ways to achieve the same result since I posted this question.","body":"Thanks Praveen. Definitely finding many ways to achieve the same result since I posted this question."}],"tags":[],"owner":{"account_id":9248672,"reputation":77,"user_id":6869822,"accept_rate":67,"display_name":"Praveen Jain"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475139911,"creation_date":1475139911,"answer_id":39765968,"question_id":39713310,"body_markdown":"you can use chain to write in multiple tables , \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;int:chain input-channel=&quot;processTransactionChannel&quot;\r\n    \t\toutput-channel=&quot;processedItems&quot;&gt;\r\n    \t\t&lt;int:header-enricher&gt;\r\n    \t\t\t&lt;int:header name=&quot;savePayload&quot; expression=&quot;payload&quot; /&gt;\r\n    \t\t&lt;/int:header-enricher&gt;\r\n\r\n    \t\t&lt;int-jpa:updating-outbound-gateway\r\n    \t\t\tauto-startup=&quot;true&quot;\r\n    \t\t\tnative-query=&quot;insert into  TableOne values( :transactionStatus ,bank_Reference_Number = :bankReferenceNumber )&quot;\r\n    \t\t\tentity-manager=&quot;entityManager&quot; \r\n    \t\t\tuse-payload-as-parameter-source=&quot;false&quot;&gt;\r\n    \t\t\t&lt;int-jpa:transactional /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;transactionStatus&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;transactionStatus&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;bankReferenceNumber&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;bankReferenceNumber&#39;]&quot; /&gt;\r\n\r\n    \t\t&lt;/int-jpa:updating-outbound-gateway&gt;\r\n\r\n    \t\t&lt;int:transformer expression=&quot;headers.savePayload&quot; /&gt;\r\n\r\n    \t\t\r\n    \t\t&lt;int-jpa:updating-outbound-gateway\r\n    \t\t\tnative-query=&quot;insert \r\n     \t\t\t\t\t\tinto PARTNER_RESPONSE_DETAILS(PARTNER_ID,BANK_REFERENCE_NUMBER,REQUEST_STRING,RESPONSE_STRING)  \r\n      \t\t\t\t\t\tvalues (:partnerId,:bankRefNumber,:requestString,:responseString)&quot;\r\n    \t\t\tentity-manager=&quot;entityManager&quot;&gt;\r\n    \t\t\t&lt;int-jpa:transactional /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;partnerId&quot; expression=&quot;payload[&#39;partnerId&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;bankRefNumber&quot; expression=&quot;payload[&#39;bankRefNumber&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;requestString&quot; expression=&quot;payload[&#39;requestString&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;responseString&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;responseString&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;transactionStatus&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;transactionStatus&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;bankReferenceNumber&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;bankReferenceNumber&#39;]&quot; /&gt;\r\n\r\n    \t\t&lt;/int-jpa:updating-outbound-gateway&gt;\r\n\r\n    \t\t&lt;int:transformer expression=&quot;headers.savePayload&quot; /&gt;\r\n\r\n\r\n    \t&lt;/int:chain&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nthis code updates 2 tables and it is working for me. ","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>you can use chain to write in multiple tables , </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;int:chain input-channel=\"processTransactionChannel\"\r\n\t\toutput-channel=\"processedItems\"&gt;\r\n\t\t&lt;int:header-enricher&gt;\r\n\t\t\t&lt;int:header name=\"savePayload\" expression=\"payload\" /&gt;\r\n\t\t&lt;/int:header-enricher&gt;\r\n\r\n\t\t&lt;int-jpa:updating-outbound-gateway\r\n\t\t\tauto-startup=\"true\"\r\n\t\t\tnative-query=\"insert into  TableOne values( :transactionStatus ,bank_Reference_Number = :bankReferenceNumber )\"\r\n\t\t\tentity-manager=\"entityManager\" \r\n\t\t\tuse-payload-as-parameter-source=\"false\"&gt;\r\n\t\t\t&lt;int-jpa:transactional /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"transactionStatus\"\r\n\t\t\t\texpression=\"payload['transactionStatus']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"bankReferenceNumber\"\r\n\t\t\t\texpression=\"payload['bankReferenceNumber']\" /&gt;\r\n\r\n\t\t&lt;/int-jpa:updating-outbound-gateway&gt;\r\n\r\n\t\t&lt;int:transformer expression=\"headers.savePayload\" /&gt;\r\n\r\n\t\t\r\n\t\t&lt;int-jpa:updating-outbound-gateway\r\n\t\t\tnative-query=\"insert \r\n \t\t\t\t\t\tinto PARTNER_RESPONSE_DETAILS(PARTNER_ID,BANK_REFERENCE_NUMBER,REQUEST_STRING,RESPONSE_STRING)  \r\n  \t\t\t\t\t\tvalues (:partnerId,:bankRefNumber,:requestString,:responseString)\"\r\n\t\t\tentity-manager=\"entityManager\"&gt;\r\n\t\t\t&lt;int-jpa:transactional /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"partnerId\" expression=\"payload['partnerId']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"bankRefNumber\" expression=\"payload['bankRefNumber']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"requestString\" expression=\"payload['requestString']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"responseString\"\r\n\t\t\t\texpression=\"payload['responseString']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"transactionStatus\"\r\n\t\t\t\texpression=\"payload['transactionStatus']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"bankReferenceNumber\"\r\n\t\t\t\texpression=\"payload['bankReferenceNumber']\" /&gt;\r\n\r\n\t\t&lt;/int-jpa:updating-outbound-gateway&gt;\r\n\r\n\t\t&lt;int:transformer expression=\"headers.savePayload\" /&gt;\r\n\r\n\r\n\t&lt;/int:chain&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>this code updates 2 tables and it is working for me. </p>\n"},{"tags":[],"owner":{"account_id":15963382,"reputation":1,"user_id":11519763,"display_name":"yifanzzz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561359796,"creation_date":1561354044,"answer_id":56730294,"question_id":39713310,"body_markdown":"maybe my answer is your except. I also see the same problem, I used `classifierCompositeWriter` to resolve it. I define my classifier in my project, as you see, you can decide which writer you should use in your logic. for example, in my logic \r\n\r\n    if(baseEntity instanceof Product){ \r\n        return productItemWriter;\r\n    }else {\r\n        return otherItemWriter;\r\n    }\r\n\r\ngood lucky.","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>maybe my answer is your except. I also see the same problem, I used <code>classifierCompositeWriter</code> to resolve it. I define my classifier in my project, as you see, you can decide which writer you should use in your logic. for example, in my logic </p>\n\n<pre><code>if(baseEntity instanceof Product){ \n    return productItemWriter;\n}else {\n    return otherItemWriter;\n}\n</code></pre>\n\n<p>good lucky.</p>\n"},{"tags":[],"owner":{"account_id":13775925,"reputation":71,"user_id":9942276,"display_name":"Atul Lohiya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683310762,"creation_date":1683310762,"answer_id":76184962,"question_id":39713310,"body_markdown":"Not clear on what you mean to say here: \r\n\r\n&gt; When creating the custom source providers, each of them seem to expect\r\n&gt; because that is the class that has already been mapped to the input\r\n&gt; line and contain the values I would like to send to the respective\r\n&gt; tables.\r\n\r\nBut what I get from the question is you want to read one line from a file with N columns and break it down to write to two or more tables. Before that you want to change the format of some columns and derive some others.\r\n\r\nThat should be doable with CompositeItemWriter.\r\n\r\n1. Read the line from file\r\n2. In the mapper, create the class object and populate the fields. This is where you can also change the format of any field in the line and then assign to object property. Similarly, you can derive another property based on other properties in the read line and assign to a property in the object! So there would be a property for each of the fields you are interested in. You can keep one property for original field and one for reformatted field if you would need to refer to original data.\r\n3. This model instance would be passed to processor where you can process the data. Infact, this is another place where you can do transformations i.e., change the format and make derived columns!\r\n4. Make a writer for each of the tables that you want to write to. Assign a datasource to each of the writers. Then assign this list of writers to CompositeItemWriter. Note that this setup will work only if both writers connect to same data source and the same instance of data source is assigned to transaction manager of step. Otherwise rollbacks would cause data integrity issues.\r\n5. Create a ItemSqlParameterSourceProvider for each respective writer. The same data object with 50 or whatever number of properties is passed to each provider. but each provider returns a different object corresponding to the table you want to write to.\r\n6. Done! This should read the line from file, process each line item to transform as you wish then write to multiple tables in the same transaction. Commit and rollback would be consistent.\r\n\r\nModel to read each line:\r\n```\r\nclass LineModel\r\n{\r\n   public String tab1Prop1;\r\n   public boolean tab1Prop2;\r\n   public int tab1PropN;\r\n   public String tab1ReformattedProp1;\r\n   public String tab2DerivedFieldFromProp2AndN;\r\n   public String tab2Prop3;\r\n}\r\n```\r\nIn the line mapper, you can populate above model mapping line fields to props and also reformatting and deriving other fields. Or do the reformatting and deriving in processor as that is what is supposed to be used for transformations.\r\n\r\nAlternatively, you can compose above model with two models one for each table:\r\n\r\n```\r\nclass LineModel\r\n{\r\n   public Tab1 tab1Cols;\r\n   public Tab2 tab2Cols;\r\n}\r\n\r\nclass Tab1\r\n{\r\n   public String tab1Prop1;\r\n   public boolean tab1Prop2;\r\n   public int tab1PropN;\r\n   public String tab1ReformattedProp1;\r\n}\r\n\r\nclass Tab2\r\n{\r\n   public String tab2DerivedFieldFromProp2AndN;\r\n   public String tab2Prop3;\r\n}\r\n```\r\n\r\nNow in each writer&#39;s ItemSqlParameterSourceProvider, return lineModelObj.tab1Cols or  lineModelObj.tab2Cols depending upon which writer are you dealing with. \r\nAt this point you would know which model&#39;s which properties would be written to which table so you can create the SQL in the writer accordingly accordingly.\r\n\r\nAnd that&#39;s it! It should do your job!","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>Not clear on what you mean to say here:</p>\n<blockquote>\n<p>When creating the custom source providers, each of them seem to expect\nbecause that is the class that has already been mapped to the input\nline and contain the values I would like to send to the respective\ntables.</p>\n</blockquote>\n<p>But what I get from the question is you want to read one line from a file with N columns and break it down to write to two or more tables. Before that you want to change the format of some columns and derive some others.</p>\n<p>That should be doable with CompositeItemWriter.</p>\n<ol>\n<li>Read the line from file</li>\n<li>In the mapper, create the class object and populate the fields. This is where you can also change the format of any field in the line and then assign to object property. Similarly, you can derive another property based on other properties in the read line and assign to a property in the object! So there would be a property for each of the fields you are interested in. You can keep one property for original field and one for reformatted field if you would need to refer to original data.</li>\n<li>This model instance would be passed to processor where you can process the data. Infact, this is another place where you can do transformations i.e., change the format and make derived columns!</li>\n<li>Make a writer for each of the tables that you want to write to. Assign a datasource to each of the writers. Then assign this list of writers to CompositeItemWriter. Note that this setup will work only if both writers connect to same data source and the same instance of data source is assigned to transaction manager of step. Otherwise rollbacks would cause data integrity issues.</li>\n<li>Create a ItemSqlParameterSourceProvider for each respective writer. The same data object with 50 or whatever number of properties is passed to each provider. but each provider returns a different object corresponding to the table you want to write to.</li>\n<li>Done! This should read the line from file, process each line item to transform as you wish then write to multiple tables in the same transaction. Commit and rollback would be consistent.</li>\n</ol>\n<p>Model to read each line:</p>\n<pre><code>class LineModel\n{\n   public String tab1Prop1;\n   public boolean tab1Prop2;\n   public int tab1PropN;\n   public String tab1ReformattedProp1;\n   public String tab2DerivedFieldFromProp2AndN;\n   public String tab2Prop3;\n}\n</code></pre>\n<p>In the line mapper, you can populate above model mapping line fields to props and also reformatting and deriving other fields. Or do the reformatting and deriving in processor as that is what is supposed to be used for transformations.</p>\n<p>Alternatively, you can compose above model with two models one for each table:</p>\n<pre><code>class LineModel\n{\n   public Tab1 tab1Cols;\n   public Tab2 tab2Cols;\n}\n\nclass Tab1\n{\n   public String tab1Prop1;\n   public boolean tab1Prop2;\n   public int tab1PropN;\n   public String tab1ReformattedProp1;\n}\n\nclass Tab2\n{\n   public String tab2DerivedFieldFromProp2AndN;\n   public String tab2Prop3;\n}\n</code></pre>\n<p>Now in each writer's ItemSqlParameterSourceProvider, return lineModelObj.tab1Cols or  lineModelObj.tab2Cols depending upon which writer are you dealing with.\nAt this point you would know which model's which properties would be written to which table so you can create the SQL in the writer accordingly accordingly.</p>\n<p>And that's it! It should do your job!</p>\n"}],"owner":{"account_id":8104851,"reputation":429,"user_id":6106766,"accept_rate":67,"display_name":"Tony Edwards"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7790,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":39751303,"answer_count":4,"score":2,"last_activity_date":1683310762,"creation_date":1474928432,"question_id":39713310,"body_markdown":"I have found many examples to use multiple writers in this forum. Most, if not all, of the answers focus on CompositeItemWriter and ClassifierItemWriter. \r\n\r\n*Business Need*: Read a single line from an input file. This line will contain multiple fields (over 50) which need to be written to their own database tables (in theory represent different classes). \r\n\r\n                                   ----- claimwriter(write to claim table)\r\n                                  /\r\n                                 /\r\n    claimlineitemprocessor  -----\r\n                                 \\\r\n                                  \\\r\n                                   ----- pharmacywriter(write to pharmacy table)\r\n\r\nI have used a fieldset mapper to create the object representing the claim line (ClaimLine). Most of the fields are a simple mapping to the data in the file, but a few need to have their format changed or related field mapping logic.\r\n\r\nBasic item writer code looks like this:\r\n\r\n    @SuppressWarnings({ &quot;unchecked&quot;, &quot;rawtypes&quot; })\r\n\t@Bean\r\n    public ItemWriter&lt;ClaimLine&gt; writer() {\r\n        CompositeItemWriter&lt;ClaimLine&gt; cWriter = new CompositeItemWriter&lt;ClaimLine&gt;();\r\n\r\n        JdbcBatchItemWriter claimWriter = new JdbcBatchItemWriter();\r\n        claimWriter.setItemSqlParameterSourceProvider(new ClaimItemSqlParameterSourceProvider());\r\n        claimWriter.setSql( // would like to insert into pharmacy table);\r\n    \tclaimWriter.setDataSource(dataSource);\r\n    \tclaimWriter.afterPropertiesSet();\r\n    \t\r\n    \tJdbcBatchItemWriter pharmacyWriter = new JdbcBatchItemWriter();\r\n    \tpharmacyWriter.setItemSqlParameterSourceProvider(new PharmacyItemSqlParameterSourceProvider());\r\n        pharmacyWriter.setSql( // would like to insert into pharmacy table);\r\n    \tpharmacyWriter.setDataSource(dataSource);\r\n    \tpharmacyWriter.afterPropertiesSet();\r\n \r\n        List&lt;ItemWriter&lt;? super ClaimLine&gt;&gt; mWriter = new ArrayList&lt;ItemWriter&lt;? super ClaimLine&gt;&gt;();\r\n        mWriter.add(claimWriter); \r\n        mWriter.add(pharmacyWriter);\r\n        cWriter.setDelegates(mWriter);\r\n\r\n        // other code\r\n\r\n        return cWriter;\r\n    };\r\n\r\nWhen creating the custom source providers, each of them seem to expect &lt;ClaimLine&gt; because that is the class that has already been mapped to the input line and contain the values I would like to send to the respective tables.\r\n\r\nThis is basically where I am now stuck thinking I cannot use a CompositeItemWriter because I am trying to transform a single object into two different ones. And ClassifierCompositeItemWriter works like a router and sends it down a path specific to a condition, which is not what I want to do.\r\n\r\nFor reference, I tried doing something similar with Spring Integration and also hit a similar roadblock.\r\n\r\nAny help is appreciated. \r\n\r\n ","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>I have found many examples to use multiple writers in this forum. Most, if not all, of the answers focus on CompositeItemWriter and ClassifierItemWriter. </p>\n\n<p><em>Business Need</em>: Read a single line from an input file. This line will contain multiple fields (over 50) which need to be written to their own database tables (in theory represent different classes). </p>\n\n<pre><code>                               ----- claimwriter(write to claim table)\n                              /\n                             /\nclaimlineitemprocessor  -----\n                             \\\n                              \\\n                               ----- pharmacywriter(write to pharmacy table)\n</code></pre>\n\n<p>I have used a fieldset mapper to create the object representing the claim line (ClaimLine). Most of the fields are a simple mapping to the data in the file, but a few need to have their format changed or related field mapping logic.</p>\n\n<p>Basic item writer code looks like this:</p>\n\n<pre><code>@SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n@Bean\npublic ItemWriter&lt;ClaimLine&gt; writer() {\n    CompositeItemWriter&lt;ClaimLine&gt; cWriter = new CompositeItemWriter&lt;ClaimLine&gt;();\n\n    JdbcBatchItemWriter claimWriter = new JdbcBatchItemWriter();\n    claimWriter.setItemSqlParameterSourceProvider(new ClaimItemSqlParameterSourceProvider());\n    claimWriter.setSql( // would like to insert into pharmacy table);\n    claimWriter.setDataSource(dataSource);\n    claimWriter.afterPropertiesSet();\n\n    JdbcBatchItemWriter pharmacyWriter = new JdbcBatchItemWriter();\n    pharmacyWriter.setItemSqlParameterSourceProvider(new PharmacyItemSqlParameterSourceProvider());\n    pharmacyWriter.setSql( // would like to insert into pharmacy table);\n    pharmacyWriter.setDataSource(dataSource);\n    pharmacyWriter.afterPropertiesSet();\n\n    List&lt;ItemWriter&lt;? super ClaimLine&gt;&gt; mWriter = new ArrayList&lt;ItemWriter&lt;? super ClaimLine&gt;&gt;();\n    mWriter.add(claimWriter); \n    mWriter.add(pharmacyWriter);\n    cWriter.setDelegates(mWriter);\n\n    // other code\n\n    return cWriter;\n};\n</code></pre>\n\n<p>When creating the custom source providers, each of them seem to expect  because that is the class that has already been mapped to the input line and contain the values I would like to send to the respective tables.</p>\n\n<p>This is basically where I am now stuck thinking I cannot use a CompositeItemWriter because I am trying to transform a single object into two different ones. And ClassifierCompositeItemWriter works like a router and sends it down a path specific to a condition, which is not what I want to do.</p>\n\n<p>For reference, I tried doing something similar with Spring Integration and also hit a similar roadblock.</p>\n\n<p>Any help is appreciated. </p>\n"},{"tags":["java","google-cloud-storage"],"comments":[{"owner":{"account_id":18064369,"reputation":48575,"user_id":13130697,"display_name":"Dharmaraj"},"score":0,"creation_date":1683308240,"post_id":76184651,"comment_id":134352371,"body_markdown":"Does this answer your question? [GCS Signed Urls with subfolder in bucket](https://stackoverflow.com/questions/40423370/gcs-signed-urls-with-subfolder-in-bucket)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/40423370/gcs-signed-urls-with-subfolder-in-bucket\">GCS Signed Urls with subfolder in bucket</a>"},{"owner":{"account_id":5524872,"reputation":4722,"user_id":4386668,"accept_rate":47,"display_name":"Nominalista"},"score":0,"creation_date":1683320336,"post_id":76184651,"comment_id":134354633,"body_markdown":"The above question is related to GET signed URL. Here I was asking about PUT.","body":"The above question is related to GET signed URL. Here I was asking about PUT."}],"answers":[{"tags":[],"owner":{"account_id":10905924,"reputation":76322,"user_id":8016720,"display_name":"John Hanley"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683310499,"creation_date":1683310499,"answer_id":76184941,"question_id":76184651,"body_markdown":"Currently, the Google Cloud Storage API does not support creating a signed URL based on a prefix.\r\n\r\nA technical item to note is that folders do not exist in Google Cloud Storage. The namespace is flat. The concept of folders and separators (/) are just object name characters. All objects are located in the bucket root namespace.\r\n\r\nNote: Cloud CDN does support `URLPrefix` for signed URLs. This will not help you with `PUT` requests but might be useful information for other readers [link](https://cloud.google.com/cdn/docs/using-signed-urls#url-prefix) interested in content caching.","title":"How to generate PUT signed URL to entire folder in Google Cloud Storage?","body":"<p>Currently, the Google Cloud Storage API does not support creating a signed URL based on a prefix.</p>\n<p>A technical item to note is that folders do not exist in Google Cloud Storage. The namespace is flat. The concept of folders and separators (/) are just object name characters. All objects are located in the bucket root namespace.</p>\n<p>Note: Cloud CDN does support <code>URLPrefix</code> for signed URLs. This will not help you with <code>PUT</code> requests but might be useful information for other readers <a href=\"https://cloud.google.com/cdn/docs/using-signed-urls#url-prefix\" rel=\"nofollow noreferrer\">link</a> interested in content caching.</p>\n"}],"owner":{"account_id":5524872,"reputation":4722,"user_id":4386668,"accept_rate":47,"display_name":"Nominalista"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1683310499,"creation_date":1683307764,"question_id":76184651,"body_markdown":"I would like to generate PUT signed URL that gives permission to upload many files to the specific folder. Then I would like to specify the actual filename in the folder during the file upload. How can I achieve that in Java using Google Cloud Storage client?\r\n\r\nIdeally, the client that uploads files with generated URL could be written in any language.","title":"How to generate PUT signed URL to entire folder in Google Cloud Storage?","body":"<p>I would like to generate PUT signed URL that gives permission to upload many files to the specific folder. Then I would like to specify the actual filename in the folder during the file upload. How can I achieve that in Java using Google Cloud Storage client?</p>\n<p>Ideally, the client that uploads files with generated URL could be written in any language.</p>\n"},{"tags":["java","authentication","exception","junit"],"comments":[{"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"score":0,"creation_date":1639029109,"post_id":70285274,"comment_id":124245111,"body_markdown":"Is your aim to test if the logging is happening as expected when the exception happens? What are you using - Log4j?","body":"Is your aim to test if the logging is happening as expected when the exception happens? What are you using - Log4j?"},{"owner":{"account_id":23595435,"reputation":1,"user_id":17632601,"display_name":"user17632601"},"score":0,"creation_date":1639029485,"post_id":70285274,"comment_id":124245179,"body_markdown":"what I&#39;m told to do is you should trick the code such way so that it jumps out of try block to catch block and cover that in UT. package is  org.slf4j","body":"what I&#39;m told to do is you should trick the code such way so that it jumps out of try block to catch block and cover that in UT. package is  org.slf4j"},{"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"score":0,"creation_date":1639032643,"post_id":70285274,"comment_id":124245863,"body_markdown":"OK. But it is still not clear if your question is &quot;How to generate the condition?&quot; or &quot;I know how to generate the condition, but want to know how to test if the log happened.&quot;","body":"OK. But it is still not clear if your question is &quot;How to generate the condition?&quot; or &quot;I know how to generate the condition, but want to know how to test if the log happened.&quot;"},{"owner":{"account_id":23595435,"reputation":1,"user_id":17632601,"display_name":"user17632601"},"score":0,"creation_date":1639037718,"post_id":70285274,"comment_id":124247311,"body_markdown":"actually I don&#39;t know how to generate that condition so that catch block gets executed","body":"actually I don&#39;t know how to generate that condition so that catch block gets executed"}],"owner":{"account_id":23595435,"reputation":1,"user_id":17632601,"display_name":"user17632601"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":388,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683310122,"creation_date":1639029031,"question_id":70285274,"body_markdown":"How can I cover this LOG statement under catch block in Junit testing. \r\n```\r\n private static final Logger LOG = LoggerFactory.getLogger(CCRedirectInfo.class);\r\n\r\n@PostConstruct\r\n    public void init(){\r\n        try (ResourceResolver readerResourceResolver = resourceResolverFactory.getServiceResourceResolver(\r\n                SERVICE_MAPPING)) {\r\n            String originUrl = request.getParameter(&quot;origin&quot;);\r\n            loggedinUrl = readerResourceResolver.map(originUrl);\r\n        } catch (LoginException loginException) {\r\n            LOG.error(&quot;Exception happened while fetching the ResourceResolver &quot;, loginException);\r\n        }\r\n    }","title":"How can I cover this LOG statement under catch block in Junit testing","body":"<p>How can I cover this LOG statement under catch block in Junit testing.</p>\n<pre><code> private static final Logger LOG = LoggerFactory.getLogger(CCRedirectInfo.class);\n\n@PostConstruct\n    public void init(){\n        try (ResourceResolver readerResourceResolver = resourceResolverFactory.getServiceResourceResolver(\n                SERVICE_MAPPING)) {\n            String originUrl = request.getParameter(&quot;origin&quot;);\n            loggedinUrl = readerResourceResolver.map(originUrl);\n        } catch (LoginException loginException) {\n            LOG.error(&quot;Exception happened while fetching the ResourceResolver &quot;, loginException);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","sql-injection","checkmarx"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683140842,"post_id":76167235,"comment_id":134322463,"body_markdown":"Use security practices from experts, don&#39;t try to create your own: https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html","body":"Use security practices from experts, don&#39;t try to create your own: <a href=\"https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html\" rel=\"nofollow noreferrer\">cheatsheetseries.owasp.org/cheatsheets/&hellip;</a>"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1683140966,"post_id":76167235,"comment_id":134322482,"body_markdown":"There&#39;s a difference between &quot;protection against SQL injection&quot; and &quot;can a tool **understand** it&#39;s protected against SQL injection&quot;. In other words: let&#39;s say I had a fool-proof way of quoting user input such that SQL injection simply can&#39;t happen. There&#39;s no *(reasonable)* way a tool will **know** it&#39;s safe if I&#39;m just concatenating strings.","body":"There&#39;s a difference between &quot;protection against SQL injection&quot; and &quot;can a tool <b>understand</b> it&#39;s protected against SQL injection&quot;. In other words: let&#39;s say I had a fool-proof way of quoting user input such that SQL injection simply can&#39;t happen. There&#39;s no <i>(reasonable)</i> way a tool will <b>know</b> it&#39;s safe if I&#39;m just concatenating strings."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":3,"creation_date":1683141344,"post_id":76167235,"comment_id":134322533,"body_markdown":"the code was &quot;safe&quot; even without those regexp puzzles: in order to exploit the &quot;vulnerability&quot;  the attacker is supposed to modify java startup parameters, if he can, potential &quot;sql injection&quot; is already not a security issue :).","body":"the code was &quot;safe&quot; even without those regexp puzzles: in order to exploit the &quot;vulnerability&quot;  the attacker is supposed to modify java startup parameters, if he can, potential &quot;sql injection&quot; is already not a security issue :)."}],"answers":[{"comments":[{"owner":{"account_id":10929,"reputation":545362,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"score":0,"creation_date":1683242647,"post_id":76167315,"comment_id":134341124,"body_markdown":"I&#39;m not a DB2 user, but as far as I know, one cannot use query parameters for schema names in any implementation of SQL. Query parameters can only be used in place of constant values in expressions. (I did not downvote your answer)","body":"I&#39;m not a DB2 user, but as far as I know, one cannot use query parameters for schema names in any implementation of SQL. Query parameters can only be used in place of constant values in expressions. (I did not downvote your answer)"}],"tags":[],"owner":{"account_id":22391095,"reputation":129,"user_id":16603146,"display_name":"Questor"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1683141389,"creation_date":1683141389,"answer_id":76167315,"question_id":76167235,"body_markdown":"I am not going to do your work for you... But your question can be summed up as &quot;Why am I getting SQL injection?&quot;\r\n\r\nThe answer is &quot;Because I am dynamically creating SQL queries&quot;, the solution is: **Stop making dynamically created SQL queries.** Once you stop doing that, all your problems go away.. How do you stop? Use `PreparedStatement()` with variable binding (parameterized queries).\r\n\r\nUsing `PreparedStatement()` your sql access will look something like:\r\n```Java\r\nstring what_schema= //! Some value;\r\nString query = SELECT_NEXTVAL_FOR + &quot;?.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;;\r\nPreparedStatement pstmt = connection.prepareStatement(query);\r\npstmt.setString(1, what_schema);\r\nResultSet results = pstmt.executeQuery();\r\n```\r\n","title":"Can I use if statements to prevent SQL injection?","body":"<p>I am not going to do your work for you... But your question can be summed up as &quot;Why am I getting SQL injection?&quot;</p>\n<p>The answer is &quot;Because I am dynamically creating SQL queries&quot;, the solution is: <strong>Stop making dynamically created SQL queries.</strong> Once you stop doing that, all your problems go away.. How do you stop? Use <code>PreparedStatement()</code> with variable binding (parameterized queries).</p>\n<p>Using <code>PreparedStatement()</code> your sql access will look something like:</p>\n<pre><code>string what_schema= //! Some value;\nString query = SELECT_NEXTVAL_FOR + &quot;?.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;;\nPreparedStatement pstmt = connection.prepareStatement(query);\npstmt.setString(1, what_schema);\nResultSet results = pstmt.executeQuery();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23993326,"reputation":25,"user_id":17979144,"display_name":"scottyboombox"},"score":0,"creation_date":1683294684,"post_id":76177988,"comment_id":134349107,"body_markdown":"I ended up going with a whitelist of sorts for the schema since there are only ten possible schemas that it could be. I found this would be a little bit safer than comparing against regex. The validation to compare the schema identifier against what is allowed should protect against any injection. Like you mentioned the AI in Checkmarx cannot recognize this as a solution so I had to mark it as a false positive.","body":"I ended up going with a whitelist of sorts for the schema since there are only ten possible schemas that it could be. I found this would be a little bit safer than comparing against regex. The validation to compare the schema identifier against what is allowed should protect against any injection. Like you mentioned the AI in Checkmarx cannot recognize this as a solution so I had to mark it as a false positive."}],"tags":[],"owner":{"account_id":10929,"reputation":545362,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683309556,"creation_date":1683243266,"answer_id":76177988,"question_id":76167235,"body_markdown":"Folks who recommend using query parameters to defend against SQL injection are half-right. That is the recommended solution in most cases of dynamic SQL queries.\r\n\r\nBut query parameters can be used only in place of constant values. Not identifiers (in your case a schema identifier), or expressions, or SQL keywords, etc.\r\n\r\nYou are on the right track with using validation of some kind, so the schema identifier is limited to a known safe value. Then you can interpolate that string into your SQL query. If you have done adequate validation, then it&#39;s safe from SQL injection.\r\n\r\nYou should also delimit your identifier, just in case it contains a space, or a punctuation symbol, or conflicts with an SQL reserved keyword. In DB2, use double-quotes as identifier delimiters.\r\n\r\nHowever, even though the kind of validation you are doing may be sufficient, it may not be a method of defense that can be recognized by an automated SQL injection detection tool like Checkmarx. It might see that you&#39;re putting variables together into an SQL string, and conclude that it&#39;s an SQL injection risk. It can&#39;t tell that your validation is sufficient to prevent problems.\r\n\r\nAutomated solutions for SQL injection detection are always limited. You do have to use human analysis sometimes. \r\n\r\nI know this is unfashionable to say these days, given the trend to say that AI will put programmers out of work. But AI is not yet able to handle edge cases as reliably as expert humans. I am not convinced it ever will be.","title":"Can I use if statements to prevent SQL injection?","body":"<p>Folks who recommend using query parameters to defend against SQL injection are half-right. That is the recommended solution in most cases of dynamic SQL queries.</p>\n<p>But query parameters can be used only in place of constant values. Not identifiers (in your case a schema identifier), or expressions, or SQL keywords, etc.</p>\n<p>You are on the right track with using validation of some kind, so the schema identifier is limited to a known safe value. Then you can interpolate that string into your SQL query. If you have done adequate validation, then it's safe from SQL injection.</p>\n<p>You should also delimit your identifier, just in case it contains a space, or a punctuation symbol, or conflicts with an SQL reserved keyword. In DB2, use double-quotes as identifier delimiters.</p>\n<p>However, even though the kind of validation you are doing may be sufficient, it may not be a method of defense that can be recognized by an automated SQL injection detection tool like Checkmarx. It might see that you're putting variables together into an SQL string, and conclude that it's an SQL injection risk. It can't tell that your validation is sufficient to prevent problems.</p>\n<p>Automated solutions for SQL injection detection are always limited. You do have to use human analysis sometimes.</p>\n<p>I know this is unfashionable to say these days, given the trend to say that AI will put programmers out of work. But AI is not yet able to handle edge cases as reliably as expert humans. I am not convinced it ever will be.</p>\n"}],"owner":{"account_id":23993326,"reputation":25,"user_id":17979144,"display_name":"scottyboombox"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177988,"answer_count":2,"score":1,"last_activity_date":1683309556,"creation_date":1683140586,"question_id":76167235,"body_markdown":"I have been trying to get my application to pass Checkmarx but I keep running into a Second Order SQL Injection vulnerability.\r\n\r\nPresently my code looks like this:\r\n```java\r\n    public static final String SELECT_NEXTVAL_FOR = &quot;SELECT NEXTVAL FOR &quot;;\r\n\r\n    @Value(&quot;#{ systemProperties[&#39;sequence.schema&#39;]}&quot;)\r\n    String sequenceSchema;\r\n\r\n    public Integer getNextContactId() {\r\n        if (sequenceSchema.matches(&quot;[A-Z]{3}@[A-Z]{3}|[A-Z]\\\\d[A-Z]{5}&quot;)) {\r\n            Query getNextContactIdQuery = entityManager.createNativeQuery(\r\n                    SELECT_NEXTVAL_FOR + sequenceSchema + &quot;.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;);\r\n\r\n            return (Integer) getNextContactIdQuery.getSingleResult();\r\n        } else {\r\n            return null;\r\n        }\r\n```\r\n\r\nCheckmarx is flagging the `sequenceSchema` as the problem here. My thoughts were that the if statement would ensure whatever is present in `sequenceSchema` would only match the specific regex for our schemas. Apparently that is not good enough. I have tried to use positional/named parameters but those don&#39;t work outside of WHERE or HAVING clauses. I have tried Criteria Queries as seen [here][1] without any luck.\r\n\r\nI had another thought along similar lines to what I have here, but instead of using regex I could create a set of the valid schemas and comparing that to the `sequenceSchema` as such:\r\n```java\r\n    public static final String SELECT_NEXTVAL_FOR = &quot;SELECT NEXTVAL FOR &quot;;\r\n\r\n    @Value(&quot;#{ systemProperties[&#39;sequence.schema&#39;]}&quot;)\r\n    String sequenceSchema;\r\n\r\n    Set&lt;String&gt; validSchemas = ... //create set of valid schemas\r\n\r\n    public Integer getNextContactId() {\r\n        if (validSchemas.contains(sequenceSchema)) {\r\n            Query getNextContactIdQuery = entityManager.createNativeQuery(\r\n                    SELECT_NEXTVAL_FOR + sequenceSchema + &quot;.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;);\r\n\r\n            return (Integer) getNextContactIdQuery.getSingleResult();\r\n        } else {\r\n            return null;\r\n        }\r\n```\r\n\r\nWould that prevent against SQL injection? If not, why? I am really struggling to find a working solution here. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/76164353/how-to-write-a-criteria-query-where-the-table-schema-is-an-input-parameter-and-i","title":"Can I use if statements to prevent SQL injection?","body":"<p>I have been trying to get my application to pass Checkmarx but I keep running into a Second Order SQL Injection vulnerability.</p>\n<p>Presently my code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static final String SELECT_NEXTVAL_FOR = &quot;SELECT NEXTVAL FOR &quot;;\n\n    @Value(&quot;#{ systemProperties['sequence.schema']}&quot;)\n    String sequenceSchema;\n\n    public Integer getNextContactId() {\n        if (sequenceSchema.matches(&quot;[A-Z]{3}@[A-Z]{3}|[A-Z]\\\\d[A-Z]{5}&quot;)) {\n            Query getNextContactIdQuery = entityManager.createNativeQuery(\n                    SELECT_NEXTVAL_FOR + sequenceSchema + &quot;.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;);\n\n            return (Integer) getNextContactIdQuery.getSingleResult();\n        } else {\n            return null;\n        }\n</code></pre>\n<p>Checkmarx is flagging the <code>sequenceSchema</code> as the problem here. My thoughts were that the if statement would ensure whatever is present in <code>sequenceSchema</code> would only match the specific regex for our schemas. Apparently that is not good enough. I have tried to use positional/named parameters but those don't work outside of WHERE or HAVING clauses. I have tried Criteria Queries as seen <a href=\"https://stackoverflow.com/questions/76164353/how-to-write-a-criteria-query-where-the-table-schema-is-an-input-parameter-and-i\">here</a> without any luck.</p>\n<p>I had another thought along similar lines to what I have here, but instead of using regex I could create a set of the valid schemas and comparing that to the <code>sequenceSchema</code> as such:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static final String SELECT_NEXTVAL_FOR = &quot;SELECT NEXTVAL FOR &quot;;\n\n    @Value(&quot;#{ systemProperties['sequence.schema']}&quot;)\n    String sequenceSchema;\n\n    Set&lt;String&gt; validSchemas = ... //create set of valid schemas\n\n    public Integer getNextContactId() {\n        if (validSchemas.contains(sequenceSchema)) {\n            Query getNextContactIdQuery = entityManager.createNativeQuery(\n                    SELECT_NEXTVAL_FOR + sequenceSchema + &quot;.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;);\n\n            return (Integer) getNextContactIdQuery.getSingleResult();\n        } else {\n            return null;\n        }\n</code></pre>\n<p>Would that prevent against SQL injection? If not, why? I am really struggling to find a working solution here.</p>\n"},{"tags":["java","spring","spring-data-jpa","spring-java-config"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1512399218,"post_id":47635650,"comment_id":82229866,"body_markdown":"Why do you want to do this programatically?","body":"Why do you want to do this programatically?"},{"owner":{"account_id":2169245,"reputation":1238,"user_id":1921678,"accept_rate":100,"display_name":"marandus"},"score":0,"creation_date":1512400948,"post_id":47635650,"comment_id":82231080,"body_markdown":"To allow other application modules to add their repository base packages to a List or Set before passing its contents to Spring. The same already works for entities (as shown above) and would be very handy to have for repositories as well (to prevent the &quot;core app&quot; from having knowledge about the module&#39;s package structure)","body":"To allow other application modules to add their repository base packages to a List or Set before passing its contents to Spring. The same already works for entities (as shown above) and would be very handy to have for repositories as well (to prevent the &quot;core app&quot; from having knowledge about the module&#39;s package structure)"},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":1,"creation_date":1512453548,"post_id":47635650,"comment_id":82252377,"body_markdown":"Wouldn&#39;t it be easier to pass a configuration class to the &quot;core app&quot; and include that in the configuration. This in turn could have all the `EnableX` annotations it wants.","body":"Wouldn&#39;t it be easier to pass a configuration class to the &quot;core app&quot; and include that in the configuration. This in turn could have all the <code>EnableX</code> annotations it wants."},{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":0,"creation_date":1528984281,"post_id":47635650,"comment_id":88720832,"body_markdown":"I&#39;m also interested in an answer.","body":"I&#39;m also interested in an answer."},{"owner":{"account_id":4653164,"reputation":419,"user_id":6923860,"display_name":"Norberto Ritzmann"},"score":0,"creation_date":1529068430,"post_id":47635650,"comment_id":88754404,"body_markdown":"The way how the spring scans repositories is complex, that&#39;s a good reason to encapsulate it using this annotation and the easy class is not public. So, you should delegate to clients of your library to anotate with @EnableJpaRepositories.","body":"The way how the spring scans repositories is complex, that&#39;s a good reason to encapsulate it using this annotation and the easy class is not public. So, you should delegate to clients of your library to anotate with @EnableJpaRepositories."},{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":0,"creation_date":1529106775,"post_id":47635650,"comment_id":88769738,"body_markdown":"@NorbertoRitzmann Is it possible to have multiple classes annotated with `@EnableJpaRepositories`? At least in my case, that would probably solve my current issue. I&#39;ll give it a try on Monday. If it really works, feel free to create an answer in order to receive the bounty :-)","body":"@NorbertoRitzmann Is it possible to have multiple classes annotated with <code>@EnableJpaRepositories</code>? At least in my case, that would probably solve my current issue. I&#39;ll give it a try on Monday. If it really works, feel free to create an answer in order to receive the bounty :-)"},{"owner":{"account_id":4653164,"reputation":419,"user_id":6923860,"display_name":"Norberto Ritzmann"},"score":0,"creation_date":1529337954,"post_id":47635650,"comment_id":88827080,"body_markdown":"I dont think it is possible, once you have defined you cannot add more repositories.","body":"I dont think it is possible, once you have defined you cannot add more repositories."}],"answers":[{"comments":[{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":1,"creation_date":1529106426,"post_id":50883777,"comment_id":88769682,"body_markdown":"I don&#39;t have Spring Boot, just plain Spring with Web MVC. So There is no `@AutoConfigurationPackage` for me.","body":"I don&#39;t have Spring Boot, just plain Spring with Web MVC. So There is no <code>@AutoConfigurationPackage</code> for me."},{"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"score":1,"creation_date":1529107459,"post_id":50883777,"comment_id":88769845,"body_markdown":"Sorry, if you&#39;re using MVC then there&#39;s no conflict with `@SpringBoo`t, just straight add `@EnableJpaRepositories` in your child module","body":"Sorry, if you&#39;re using MVC then there&#39;s no conflict with <code>@SpringBoo</code>t, just straight add <code>@EnableJpaRepositories</code> in your child module"},{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":0,"creation_date":1529133054,"post_id":50883777,"comment_id":88773244,"body_markdown":"I thought it would only scan for this annotation once. If every JAR module may have its own `@EnableJpaRepositories` annotation, then my problem is indeed solved.I&#39;ll try it Monday and then let you know about the result :-)","body":"I thought it would only scan for this annotation once. If every JAR module may have its own <code>@EnableJpaRepositories</code> annotation, then my problem is indeed solved.I&#39;ll try it Monday and then let you know about the result :-)"},{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":0,"creation_date":1529412599,"post_id":50883777,"comment_id":88856573,"body_markdown":"Your comment solved my problem, so I happily assign the bounty to your answer. Thanks a lot :-)","body":"Your comment solved my problem, so I happily assign the bounty to your answer. Thanks a lot :-)"},{"owner":{"account_id":446482,"reputation":8211,"user_id":839554,"accept_rate":79,"display_name":"giannis christofakis"},"score":0,"creation_date":1596634668,"post_id":50883777,"comment_id":111874364,"body_markdown":"It might be a silly question, but aren&#39;t you supposed to declared the `entityManagerFactoryRef`and the `transactionManagerRef` in your `@EnableJpaRepositories` ? How are you gonna do that with `AutoConfigurationPackage` ?","body":"It might be a silly question, but aren&#39;t you supposed to declared the <code>entityManagerFactoryRef</code>and the <code>transactionManagerRef</code> in your <code>@EnableJpaRepositories</code> ? How are you gonna do that with <code>AutoConfigurationPackage</code> ?"}],"tags":[],"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"comment_count":5,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1529105292,"creation_date":1529105292,"answer_id":50883777,"question_id":47635650,"body_markdown":"You can use `@AutoConfigurationPackage` annotation to add your child module&#39;s package to scan-packages.\r\n\r\n 1. **Remove** all `@EnableJpaRepositories` from your **child module**\r\n 2. Add `@AutoConfigurationPackage` class to the **top directory of your child module** (similar to `@SpringBootApplication`, you must put this class to the top-most directory to scan all subpackages):\r\n\r\n        @AutoConfigurationPackage\r\n        public class ChildConfiguration {\r\n        }\r\n\r\n 3. Create `spring.factories` file under **`/resources/META-INF/spring.factories`** of **your child module** and add the configuration class:\r\n\r\n  `org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.child.package.ChildConfiguration`\r\n\r\nNow you can `@Autowired` your repository from your core project. (Tested and worked)\r\n","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>You can use <code>@AutoConfigurationPackage</code> annotation to add your child module's package to scan-packages.</p>\n\n<ol>\n<li><strong>Remove</strong> all <code>@EnableJpaRepositories</code> from your <strong>child module</strong></li>\n<li><p>Add <code>@AutoConfigurationPackage</code> class to the <strong>top directory of your child module</strong> (similar to <code>@SpringBootApplication</code>, you must put this class to the top-most directory to scan all subpackages):</p>\n\n<pre><code>@AutoConfigurationPackage\npublic class ChildConfiguration {\n}\n</code></pre></li>\n<li><p>Create <code>spring.factories</code> file under <strong><code>/resources/META-INF/spring.factories</code></strong> of <strong>your child module</strong> and add the configuration class:</p>\n\n<p><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.child.package.ChildConfiguration</code></p></li>\n</ol>\n\n<p>Now you can <code>@Autowired</code> your repository from your core project. (Tested and worked)</p>\n"},{"tags":[],"owner":{"account_id":3021932,"reputation":1560,"user_id":2562746,"display_name":"Jean Marois"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1529387935,"creation_date":1529387935,"answer_id":50921503,"question_id":47635650,"body_markdown":"What your looking for is `@EntityScan` but it&#39;s only available in Spring Boot. The configuration you can annotate in Spring Data JPA is documented here https://docs.spring.io/spring-data/jpa/docs/2.0.8.RELEASE/reference/html/#jpa.java-config\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories\r\n    @EnableTransactionManagement\r\n    class ApplicationConfig {\r\n    \r\n      @Bean\r\n      public DataSource dataSource() {\r\n    \r\n        EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();\r\n        return builder.setType(EmbeddedDatabaseType.HSQL).build();\r\n      }\r\n\r\n      @Bean\r\n      public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n\r\n        HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n        vendorAdapter.setGenerateDdl(true);\r\n\r\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n        factory.setJpaVendorAdapter(vendorAdapter);\r\n        factory.setPackagesToScan(&quot;com.acme.domain&quot;);\r\n        factory.setDataSource(dataSource());\r\n        return factory;\r\n      }\r\n    \r\n      @Bean\r\n      public PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\r\n    \r\n        JpaTransactionManager txManager = new JpaTransactionManager();\r\n        txManager.setEntityManagerFactory(entityManagerFactory);\r\n        return txManager;\r\n      }\r\n    }","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>What your looking for is <code>@EntityScan</code> but it's only available in Spring Boot. The configuration you can annotate in Spring Data JPA is documented here <a href=\"https://docs.spring.io/spring-data/jpa/docs/2.0.8.RELEASE/reference/html/#jpa.java-config\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/2.0.8.RELEASE/reference/html/#jpa.java-config</a></p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories\n@EnableTransactionManagement\nclass ApplicationConfig {\n\n  @Bean\n  public DataSource dataSource() {\n\n    EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();\n    return builder.setType(EmbeddedDatabaseType.HSQL).build();\n  }\n\n  @Bean\n  public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n\n    HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n    vendorAdapter.setGenerateDdl(true);\n\n    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n    factory.setJpaVendorAdapter(vendorAdapter);\n    factory.setPackagesToScan(\"com.acme.domain\");\n    factory.setDataSource(dataSource());\n    return factory;\n  }\n\n  @Bean\n  public PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n\n    JpaTransactionManager txManager = new JpaTransactionManager();\n    txManager.setEntityManagerFactory(entityManagerFactory);\n    return txManager;\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":0,"creation_date":1529414064,"post_id":50928894,"comment_id":88857583,"body_markdown":"Side note: Both classes are located in different JAR modules.","body":"Side note: Both classes are located in different JAR modules."},{"owner":{"account_id":446482,"reputation":8211,"user_id":839554,"accept_rate":79,"display_name":"giannis christofakis"},"score":0,"creation_date":1596631383,"post_id":50928894,"comment_id":111872590,"body_markdown":"what is they use the same data source ?","body":"what is they use the same data source ?"}],"tags":[],"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1529422614,"creation_date":1529412561,"answer_id":50928894,"question_id":47635650,"body_markdown":"&lt;h1&gt;Without Spring Boot (plain Spring MVC setup)&lt;/h1&gt;\r\n\r\n`@EnableJpaRepositories` can be used on more than one `@Configuration` class. That said, every module can declare its own repositories by having an own configuration class:\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(basePackages = &quot;package1&quot;)\r\n    public class ConfigClass1 { /* ... */ }\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(basePackages = &quot;package2&quot;)\r\n    public class ConfigClass2 { /* ... */ }\r\n\r\nSpring Data JPA then counts in all of them (`package1` and `package2`). \r\n\r\nAlthough this is still not a programmatical way, it solves my problem.","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<h1>Without Spring Boot (plain Spring MVC setup)</h1>\n\n<p><code>@EnableJpaRepositories</code> can be used on more than one <code>@Configuration</code> class. That said, every module can declare its own repositories by having an own configuration class:</p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories(basePackages = \"package1\")\npublic class ConfigClass1 { /* ... */ }\n\n@Configuration\n@EnableJpaRepositories(basePackages = \"package2\")\npublic class ConfigClass2 { /* ... */ }\n</code></pre>\n\n<p>Spring Data JPA then counts in all of them (<code>package1</code> and <code>package2</code>). </p>\n\n<p>Although this is still not a programmatical way, it solves my problem.</p>\n"},{"comments":[{"owner":{"account_id":8997990,"reputation":122,"user_id":6707613,"display_name":"高慧觉"},"score":0,"creation_date":1533114086,"post_id":51629110,"comment_id":90222732,"body_markdown":"I use `compile(&quot;org.springframework.boot:spring-boot-starter-web:1.3.8.RELEASE&quot;)` and `compile(&quot;org.springframework.boot:spring-boot-starter-data-jpa:1.3.8.RELEASE&quot;)`.I guess newer version may be a little different in code and I believe the train of thoughts should be same.","body":"I use <code>compile(&quot;org.springframework.boot:spring-boot-starter-web:1.&zwnj;&#8203;3.8.RELEASE&quot;)</code> and <code>compile(&quot;org.springframework.boot:spring-boot-starter-data-j&zwnj;&#8203;pa:1.3.8.RELEASE&quot;)</code>.I guess newer version may be a little different in code and I believe the train of thoughts should be same."}],"tags":[],"owner":{"account_id":8997990,"reputation":122,"user_id":6707613,"display_name":"高慧觉"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637831375,"creation_date":1533113565,"answer_id":51629110,"question_id":47635650,"body_markdown":"This problem also puzzled me for almost a week.I debug the &quot;spring application context refresh&quot; code and `org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar` line by line and then I solve the problem.\r\n\r\nI customize my `EnableJpaRepository` annotation and `JpaRepositoriesRegistrar`,then I can do anything in `AbdJpaRepositoriesRegistrar`(&quot;abd&quot; is my customized classes&#39;s prefix).\r\n\r\nAbdEnableJpaRepositories.java\r\n\r\n    import org.springframework.beans.factory.FactoryBean;\r\n    import org.springframework.context.annotation.ComponentScan.Filter;\r\n    import org.springframework.context.annotation.Import;\r\n    import org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean;\r\n    import org.springframework.data.repository.config.DefaultRepositoryBaseClass;\r\n    import org.springframework.data.repository.query.QueryLookupStrategy;\r\n    import org.springframework.data.repository.query.QueryLookupStrategy.Key;\r\n    import org.springframework.transaction.PlatformTransactionManager;\r\n    \r\n    import javax.persistence.EntityManagerFactory;\r\n    import java.lang.annotation.Documented;\r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Inherited;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    /**\r\n     * basePackages\r\n     * 复制EnableJpaRepositories，Import自定义的AbdJpaRepositoriesRegistrar.\r\n     * Copy from EnableJpaRepositories，Import customized AbdJpaRepositoriesRegistrar.\r\n     *\r\n     * @author Oliver Gierke\r\n     * @author Thomas Darimont\r\n     * @author ghj\r\n     */\r\n    @Target(ElementType.TYPE)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Documented\r\n    @Inherited\r\n    @Import(AbdJpaRepositoriesRegistrar.class)\r\n    public @interface AbdEnableJpaRepositories {\r\n    \r\n        /**\r\n         * Alias for the {@link #basePackages()} attribute. Allows for more concise annotation declarations e.g.:\r\n         * {@code @EnableJpaRepositories(&quot;org.my.pkg&quot;)} instead of {@code @EnableJpaRepositories(basePackages=&quot;org.my.pkg&quot;)}.\r\n         */\r\n        String value() default &quot;&quot;;\r\n    \r\n        /**\r\n         * Base packages to scan for annotated components. {@link #value()} is an alias for (and mutually exclusive with) this\r\n         * attribute. Use {@link #basePackageClasses()} for a type-safe alternative to String-based package names.\r\n         */\r\n        String basePackages() default &quot;&quot;;\r\n    \r\n        /**\r\n         * Type-safe alternative to {@link #basePackages()} for specifying the packages to scan for annotated components. The\r\n         * package of each class specified will be scanned. Consider creating a special no-op marker class or interface in\r\n         * each package that serves no purpose other than being referenced by this attribute.\r\n         */\r\n        Class&lt;?&gt;[] basePackageClasses() default {};\r\n    \r\n        /**\r\n         * Specifies which types are eligible for component scanning. Further narrows the set of candidate components from\r\n         * everything in {@link #basePackages()} to everything in the base packages that matches the given filter or filters.\r\n         */\r\n        Filter[] includeFilters() default {};\r\n    \r\n        /**\r\n         * Specifies which types are not eligible for component scanning.\r\n         */\r\n        Filter[] excludeFilters() default {};\r\n    \r\n        /**\r\n         * Returns the postfix to be used when looking up custom repository implementations. Defaults to {@literal Impl}. So\r\n         * for a repository named {@code PersonRepository} the corresponding implementation class will be looked up scanning\r\n         * for {@code PersonRepositoryImpl}.\r\n         *\r\n         * @return\r\n         */\r\n        String repositoryImplementationPostfix() default &quot;Impl&quot;;\r\n    \r\n        /**\r\n         * Configures the location of where to find the Spring Data named queries properties file. Will default to\r\n         * {@code META-INF/jpa-named-queries.properties}.\r\n         *\r\n         * @return\r\n         */\r\n        String namedQueriesLocation() default &quot;&quot;;\r\n    \r\n        /**\r\n         * Returns the key of the {@link QueryLookupStrategy} to be used for lookup queries for query methods. Defaults to\r\n         * {@link Key#CREATE_IF_NOT_FOUND}.\r\n         *\r\n         * @return\r\n         */\r\n        Key queryLookupStrategy() default Key.CREATE_IF_NOT_FOUND;\r\n    \r\n        /**\r\n         * Returns the {@link FactoryBean} class to be used for each repository instance. Defaults to\r\n         * {@link JpaRepositoryFactoryBean}.\r\n         *\r\n         * @return\r\n         */\r\n        Class&lt;?&gt; repositoryFactoryBeanClass() default JpaRepositoryFactoryBean.class;\r\n    \r\n        /**\r\n         * Configure the repository base class to be used to create repository proxies for this particular configuration.\r\n         *\r\n         * @return\r\n         * @since 1.9\r\n         */\r\n        Class&lt;?&gt; repositoryBaseClass() default DefaultRepositoryBaseClass.class;\r\n    \r\n        // JPA specific configuration\r\n    \r\n        /**\r\n         * Configures the name of the {@link EntityManagerFactory} bean definition to be used to create repositories\r\n         * discovered through this annotation. Defaults to {@code entityManagerFactory}.\r\n         *\r\n         * @return\r\n         */\r\n        String entityManagerFactoryRef() default &quot;entityManagerFactory&quot;;\r\n    \r\n        /**\r\n         * Configures the name of the {@link PlatformTransactionManager} bean definition to be used to create repositories\r\n         * discovered through this annotation. Defaults to {@code transactionManager}.\r\n         *\r\n         * @return\r\n         */\r\n        String transactionManagerRef() default &quot;transactionManager&quot;;\r\n    \r\n        /**\r\n         * Configures whether nested repository-interfaces (e.g. defined as inner classes) should be discovered by the\r\n         * repositories infrastructure.\r\n         */\r\n        boolean considerNestedRepositories() default false;\r\n    \r\n        /**\r\n         * Configures whether to enable default transactions for Spring Data JPA repositories. Defaults to {@literal true}. If\r\n         * disabled, repositories must be used behind a facade that&#39;s configuring transactions (e.g. using Spring&#39;s annotation\r\n         * driven transaction facilities) or repository methods have to be used to demarcate transactions.\r\n         *\r\n         * @return whether to enable default transactions, defaults to {@literal true}.\r\n         */\r\n        boolean enableDefaultTransactions() default true;\r\n    }\r\n\r\nAbdJpaRepositoriesRegistrar.java\r\n\r\n    import org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension;\r\n    import org.springframework.data.repository.config.RepositoryConfigurationExtension;\r\n    \r\n    import java.lang.annotation.Annotation;\r\n    \r\n    class AbdJpaRepositoriesRegistrar extends AbdRepositoryBeanDefinitionRegistrarSupport {\r\n    \r\n        /*\r\n         * (non-Javadoc)\r\n         * @see org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport#getAnnotation()\r\n         */\r\n        @Override\r\n        protected Class&lt;? extends Annotation&gt; getAnnotation() {\r\n            return AbdEnableJpaRepositories.class;\r\n        }\r\n    \r\n        /*\r\n         * (non-Javadoc)\r\n         * @see org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport#getExtension()\r\n         */\r\n        @Override\r\n        protected RepositoryConfigurationExtension getExtension() {\r\n            return new JpaRepositoryConfigExtension();\r\n        }\r\n    }\r\n\r\nAbdRepositoryBeanDefinitionRegistrarSupport.java\r\n\r\n    import org.springframework.beans.factory.support.BeanDefinitionRegistry;\r\n    import org.springframework.context.EnvironmentAware;\r\n    import org.springframework.context.ResourceLoaderAware;\r\n    import org.springframework.context.annotation.ImportBeanDefinitionRegistrar;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.core.io.ResourceLoader;\r\n    import org.springframework.core.type.AnnotationMetadata;\r\n    import org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport;\r\n    import org.springframework.data.repository.config.RepositoryConfigurationDelegate;\r\n    import org.springframework.data.repository.config.RepositoryConfigurationExtension;\r\n    import org.springframework.data.repository.config.RepositoryConfigurationUtils;\r\n    import org.springframework.util.Assert;\r\n    \r\n    /**\r\n     *\r\n     * @author ghj\r\n     */\r\n    abstract class AbdRepositoryBeanDefinitionRegistrarSupport extends RepositoryBeanDefinitionRegistrarSupport implements ImportBeanDefinitionRegistrar,\r\n        ResourceLoaderAware, EnvironmentAware {\r\n    \r\n        private ResourceLoader resourceLoader;\r\n        private Environment environment;\r\n    \r\n        @Override\r\n        public void setResourceLoader(ResourceLoader resourceLoader) {\r\n            this.resourceLoader = resourceLoader;\r\n        }\r\n    \r\n        @Override\r\n        public void setEnvironment(Environment environment) {\r\n            this.environment = environment;\r\n        }\r\n    \r\n        @Override\r\n        public void registerBeanDefinitions(AnnotationMetadata annotationMetadata, BeanDefinitionRegistry registry) {\r\n    \r\n            Assert.notNull(resourceLoader, &quot;ResourceLoader must not be null!&quot;);\r\n            Assert.notNull(annotationMetadata, &quot;AnnotationMetadata must not be null!&quot;);\r\n            Assert.notNull(registry, &quot;BeanDefinitionRegistry must not be null!&quot;);\r\n    \r\n            // Guard against calls for sub-classes\r\n            if (annotationMetadata.getAnnotationAttributes(getAnnotation().getName()) == null) {\r\n                return;\r\n            }\r\n    \r\n            // 使用自定义的AbdAnnotationRepositoryConfigurationSource\r\n            AbdAnnotationRepositoryConfigurationSource configurationSource = new AbdAnnotationRepositoryConfigurationSource(\r\n                annotationMetadata, getAnnotation(), resourceLoader, environment);\r\n    \r\n            RepositoryConfigurationExtension extension = getExtension();\r\n            RepositoryConfigurationUtils.exposeRegistration(extension, registry, configurationSource);\r\n    \r\n            RepositoryConfigurationDelegate delegate = new RepositoryConfigurationDelegate(configurationSource, resourceLoader,\r\n                environment);\r\n    \r\n            delegate.registerRepositoriesIn(registry, extension);\r\n        }\r\n    }\r\n\r\nAbdAnnotationRepositoryConfigurationSource.java. You can override `getBasePackages` then you can return any packages you want.\r\n\r\n    import org.springframework.core.annotation.AnnotationAttributes;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.core.io.ResourceLoader;\r\n    import org.springframework.core.type.AnnotationMetadata;\r\n    import org.springframework.data.repository.config.AnnotationRepositoryConfigurationSource;\r\n    import org.springframework.util.ClassUtils;\r\n    import org.springframework.util.StringUtils;\r\n    \r\n    import java.lang.annotation.Annotation;\r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    /**\r\n     *\r\n     * @author ghj\r\n     */\r\n    class AbdAnnotationRepositoryConfigurationSource extends AnnotationRepositoryConfigurationSource {\r\n        private static final String BASE_PACKAGES = &quot;basePackages&quot;;\r\n        private static final String BASE_PACKAGE_CLASSES = &quot;basePackageClasses&quot;;\r\n    \r\n        private final AnnotationMetadata configMetadata;\r\n        private final AnnotationAttributes attributes;\r\n        private final Environment environment;\r\n    \r\n        AbdAnnotationRepositoryConfigurationSource(AnnotationMetadata metadata, Class&lt;? extends Annotation&gt; annotation, ResourceLoader resourceLoader, Environment environment) {\r\n            super(metadata, annotation, resourceLoader, environment);\r\n    \r\n            this.attributes = new AnnotationAttributes(metadata.getAnnotationAttributes(annotation.getName()));\r\n            this.configMetadata = metadata;\r\n            this.environment = environment;\r\n        }\r\n    \r\n        @Override\r\n        public Iterable&lt;String&gt; getBasePackages() {\r\n    \r\n            String value = attributes.getStringArray(&quot;value&quot;)[0];\r\n            String basePackages = attributes.getStringArray(BASE_PACKAGES)[0];\r\n            Class&lt;?&gt;[] basePackageClasses = attributes.getClassArray(BASE_PACKAGE_CLASSES);\r\n    \r\n            // Default configuration - return package of annotated class\r\n            if (StringUtils.isEmpty(value) &amp;&amp; StringUtils.isEmpty(basePackages) &amp;&amp; basePackageClasses.length == 0) {\r\n                String className = configMetadata.getClassName();\r\n                return Collections.singleton(ClassUtils.getPackageName(className));\r\n            }\r\n    \r\n            String[] packagesFromValue = parsePackagesSpel(value);\r\n            String[] packagesFromBasePackages = parsePackagesSpel(basePackages);\r\n    \r\n            Set&lt;String&gt; packages = new HashSet&lt;&gt;();\r\n            packages.addAll(Arrays.asList(packagesFromValue));\r\n            packages.addAll(Arrays.asList(packagesFromBasePackages));\r\n    \r\n            for (Class&lt;?&gt; typeName : basePackageClasses) {\r\n                packages.add(ClassUtils.getPackageName(typeName));\r\n            }\r\n    \r\n            return packages;\r\n        }\r\n    \r\n        private String[] parsePackagesSpel(String raw) {\r\n            if (!raw.trim().startsWith(&quot;$&quot;)) {\r\n                if (StringUtils.isEmpty(raw)) {\r\n                    return new String[]{};\r\n                }\r\n                return raw.split(&quot;,&quot;);\r\n            } else {\r\n                raw = raw.trim();\r\n                String packages = this.environment.getProperty(raw.substring(&quot;${&quot;.length(), raw.length() - &quot;}&quot;.length()));\r\n                return packages.split(&quot;,&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nHow to use?Here is configuration file.\r\nPrimaryJpaConfiguration.java\r\n\r\n    import com.shinow.abd.springjpa2.annotation.AbdEnableJpaRepositories;\r\n    import org.springframework.beans.factory.annotation.Qualifier;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\r\n    import org.springframework.boot.autoconfigure.jdbc.DataSourceBuilder;\r\n    import org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;\r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.context.EnvironmentAware;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.Primary;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.orm.jpa.JpaTransactionManager;\r\n    import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\n    import org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\n    import org.springframework.transaction.PlatformTransactionManager;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.sql.DataSource;\r\n    import java.util.Map;\r\n    \r\n    @Configuration\r\n    @AbdEnableJpaRepositories(\r\n        basePackages = &quot;${spring.jpa.base-packages}&quot;,\r\n        entityManagerFactoryRef = &quot;entityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;transactionManager&quot;\r\n    )\r\n    @EnableAutoConfiguration(exclude = HibernateJpaAutoConfiguration.class)\r\n    public class PrimaryJpaConfiguration implements EnvironmentAware {\r\n        private Environment env;\r\n    \r\n        @Bean\r\n        @ConditionalOnMissingBean(name = &quot;entityManager&quot;)\r\n        @Primary\r\n        public EntityManager entityManager(@Qualifier(&quot;entityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\r\n            return entityManagerFactory.getObject().createEntityManager();\r\n        }\r\n    \r\n        @Bean\r\n        @ConditionalOnMissingBean(name = &quot;entityManagerFactory&quot;)\r\n        @Primary\r\n        public LocalContainerEntityManagerFactoryBean entityManagerFactory(@Qualifier(&quot;dataSource&quot;) DataSource dataSource) {\r\n            Map&lt;String, Object&gt; properties = JpaProperties.get(&quot;&quot;, env);\r\n            LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\r\n            entityManagerFactoryBean.setDataSource(dataSource);\r\n            entityManagerFactoryBean.setJpaPropertyMap(properties);\r\n            entityManagerFactoryBean.setPackagesToScan(env.getProperty(&quot;spring.jpa.base-packages&quot;).split(&quot;,&quot;));\r\n            entityManagerFactoryBean.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n    \r\n            return entityManagerFactoryBean;\r\n        }\r\n    \r\n        @Bean\r\n        @ConditionalOnMissingBean(name = &quot;dataSource&quot;)\r\n        @Primary\r\n        @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n        public DataSource dataSource() {\r\n            return DataSourceBuilder.create().build();\r\n        }\r\n    \r\n        @Bean\r\n        @ConditionalOnMissingBean(name = &quot;transactionManager&quot;)\r\n        @Primary\r\n        public PlatformTransactionManager transactionManager(@Qualifier(&quot;entityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\r\n            JpaTransactionManager transactionManager\r\n                = new JpaTransactionManager();\r\n            transactionManager.setEntityManagerFactory(\r\n                entityManagerFactory.getObject());\r\n            return transactionManager;\r\n        }\r\n    \r\n        @Override\r\n        public void setEnvironment(Environment environment) {\r\n            this.env = environment;\r\n        }\r\n    }\r\n\r\nYou can add `spring.jpa.base-packages` config to your application.properties.\r\nFor example:`spring.jpa.base-packages=com.foo.a,com.bar.b`,and the repositories and entities under those packages &quot;com.foo.a&quot; and &quot;com.bar.b&quot; will be added to the spring Ioc container.","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>This problem also puzzled me for almost a week.I debug the &quot;spring application context refresh&quot; code and <code>org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar</code> line by line and then I solve the problem.</p>\n<p>I customize my <code>EnableJpaRepository</code> annotation and <code>JpaRepositoriesRegistrar</code>,then I can do anything in <code>AbdJpaRepositoriesRegistrar</code>(&quot;abd&quot; is my customized classes's prefix).</p>\n<p>AbdEnableJpaRepositories.java</p>\n<pre><code>import org.springframework.beans.factory.FactoryBean;\nimport org.springframework.context.annotation.ComponentScan.Filter;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean;\nimport org.springframework.data.repository.config.DefaultRepositoryBaseClass;\nimport org.springframework.data.repository.query.QueryLookupStrategy;\nimport org.springframework.data.repository.query.QueryLookupStrategy.Key;\nimport org.springframework.transaction.PlatformTransactionManager;\n\nimport javax.persistence.EntityManagerFactory;\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Inherited;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n/**\n * basePackages\n * 复制EnableJpaRepositories，Import自定义的AbdJpaRepositoriesRegistrar.\n * Copy from EnableJpaRepositories，Import customized AbdJpaRepositoriesRegistrar.\n *\n * @author Oliver Gierke\n * @author Thomas Darimont\n * @author ghj\n */\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@Import(AbdJpaRepositoriesRegistrar.class)\npublic @interface AbdEnableJpaRepositories {\n\n    /**\n     * Alias for the {@link #basePackages()} attribute. Allows for more concise annotation declarations e.g.:\n     * {@code @EnableJpaRepositories(&quot;org.my.pkg&quot;)} instead of {@code @EnableJpaRepositories(basePackages=&quot;org.my.pkg&quot;)}.\n     */\n    String value() default &quot;&quot;;\n\n    /**\n     * Base packages to scan for annotated components. {@link #value()} is an alias for (and mutually exclusive with) this\n     * attribute. Use {@link #basePackageClasses()} for a type-safe alternative to String-based package names.\n     */\n    String basePackages() default &quot;&quot;;\n\n    /**\n     * Type-safe alternative to {@link #basePackages()} for specifying the packages to scan for annotated components. The\n     * package of each class specified will be scanned. Consider creating a special no-op marker class or interface in\n     * each package that serves no purpose other than being referenced by this attribute.\n     */\n    Class&lt;?&gt;[] basePackageClasses() default {};\n\n    /**\n     * Specifies which types are eligible for component scanning. Further narrows the set of candidate components from\n     * everything in {@link #basePackages()} to everything in the base packages that matches the given filter or filters.\n     */\n    Filter[] includeFilters() default {};\n\n    /**\n     * Specifies which types are not eligible for component scanning.\n     */\n    Filter[] excludeFilters() default {};\n\n    /**\n     * Returns the postfix to be used when looking up custom repository implementations. Defaults to {@literal Impl}. So\n     * for a repository named {@code PersonRepository} the corresponding implementation class will be looked up scanning\n     * for {@code PersonRepositoryImpl}.\n     *\n     * @return\n     */\n    String repositoryImplementationPostfix() default &quot;Impl&quot;;\n\n    /**\n     * Configures the location of where to find the Spring Data named queries properties file. Will default to\n     * {@code META-INF/jpa-named-queries.properties}.\n     *\n     * @return\n     */\n    String namedQueriesLocation() default &quot;&quot;;\n\n    /**\n     * Returns the key of the {@link QueryLookupStrategy} to be used for lookup queries for query methods. Defaults to\n     * {@link Key#CREATE_IF_NOT_FOUND}.\n     *\n     * @return\n     */\n    Key queryLookupStrategy() default Key.CREATE_IF_NOT_FOUND;\n\n    /**\n     * Returns the {@link FactoryBean} class to be used for each repository instance. Defaults to\n     * {@link JpaRepositoryFactoryBean}.\n     *\n     * @return\n     */\n    Class&lt;?&gt; repositoryFactoryBeanClass() default JpaRepositoryFactoryBean.class;\n\n    /**\n     * Configure the repository base class to be used to create repository proxies for this particular configuration.\n     *\n     * @return\n     * @since 1.9\n     */\n    Class&lt;?&gt; repositoryBaseClass() default DefaultRepositoryBaseClass.class;\n\n    // JPA specific configuration\n\n    /**\n     * Configures the name of the {@link EntityManagerFactory} bean definition to be used to create repositories\n     * discovered through this annotation. Defaults to {@code entityManagerFactory}.\n     *\n     * @return\n     */\n    String entityManagerFactoryRef() default &quot;entityManagerFactory&quot;;\n\n    /**\n     * Configures the name of the {@link PlatformTransactionManager} bean definition to be used to create repositories\n     * discovered through this annotation. Defaults to {@code transactionManager}.\n     *\n     * @return\n     */\n    String transactionManagerRef() default &quot;transactionManager&quot;;\n\n    /**\n     * Configures whether nested repository-interfaces (e.g. defined as inner classes) should be discovered by the\n     * repositories infrastructure.\n     */\n    boolean considerNestedRepositories() default false;\n\n    /**\n     * Configures whether to enable default transactions for Spring Data JPA repositories. Defaults to {@literal true}. If\n     * disabled, repositories must be used behind a facade that's configuring transactions (e.g. using Spring's annotation\n     * driven transaction facilities) or repository methods have to be used to demarcate transactions.\n     *\n     * @return whether to enable default transactions, defaults to {@literal true}.\n     */\n    boolean enableDefaultTransactions() default true;\n}\n</code></pre>\n<p>AbdJpaRepositoriesRegistrar.java</p>\n<pre><code>import org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension;\nimport org.springframework.data.repository.config.RepositoryConfigurationExtension;\n\nimport java.lang.annotation.Annotation;\n\nclass AbdJpaRepositoriesRegistrar extends AbdRepositoryBeanDefinitionRegistrarSupport {\n\n    /*\n     * (non-Javadoc)\n     * @see org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport#getAnnotation()\n     */\n    @Override\n    protected Class&lt;? extends Annotation&gt; getAnnotation() {\n        return AbdEnableJpaRepositories.class;\n    }\n\n    /*\n     * (non-Javadoc)\n     * @see org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport#getExtension()\n     */\n    @Override\n    protected RepositoryConfigurationExtension getExtension() {\n        return new JpaRepositoryConfigExtension();\n    }\n}\n</code></pre>\n<p>AbdRepositoryBeanDefinitionRegistrarSupport.java</p>\n<pre><code>import org.springframework.beans.factory.support.BeanDefinitionRegistry;\nimport org.springframework.context.EnvironmentAware;\nimport org.springframework.context.ResourceLoaderAware;\nimport org.springframework.context.annotation.ImportBeanDefinitionRegistrar;\nimport org.springframework.core.env.Environment;\nimport org.springframework.core.io.ResourceLoader;\nimport org.springframework.core.type.AnnotationMetadata;\nimport org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport;\nimport org.springframework.data.repository.config.RepositoryConfigurationDelegate;\nimport org.springframework.data.repository.config.RepositoryConfigurationExtension;\nimport org.springframework.data.repository.config.RepositoryConfigurationUtils;\nimport org.springframework.util.Assert;\n\n/**\n *\n * @author ghj\n */\nabstract class AbdRepositoryBeanDefinitionRegistrarSupport extends RepositoryBeanDefinitionRegistrarSupport implements ImportBeanDefinitionRegistrar,\n    ResourceLoaderAware, EnvironmentAware {\n\n    private ResourceLoader resourceLoader;\n    private Environment environment;\n\n    @Override\n    public void setResourceLoader(ResourceLoader resourceLoader) {\n        this.resourceLoader = resourceLoader;\n    }\n\n    @Override\n    public void setEnvironment(Environment environment) {\n        this.environment = environment;\n    }\n\n    @Override\n    public void registerBeanDefinitions(AnnotationMetadata annotationMetadata, BeanDefinitionRegistry registry) {\n\n        Assert.notNull(resourceLoader, &quot;ResourceLoader must not be null!&quot;);\n        Assert.notNull(annotationMetadata, &quot;AnnotationMetadata must not be null!&quot;);\n        Assert.notNull(registry, &quot;BeanDefinitionRegistry must not be null!&quot;);\n\n        // Guard against calls for sub-classes\n        if (annotationMetadata.getAnnotationAttributes(getAnnotation().getName()) == null) {\n            return;\n        }\n\n        // 使用自定义的AbdAnnotationRepositoryConfigurationSource\n        AbdAnnotationRepositoryConfigurationSource configurationSource = new AbdAnnotationRepositoryConfigurationSource(\n            annotationMetadata, getAnnotation(), resourceLoader, environment);\n\n        RepositoryConfigurationExtension extension = getExtension();\n        RepositoryConfigurationUtils.exposeRegistration(extension, registry, configurationSource);\n\n        RepositoryConfigurationDelegate delegate = new RepositoryConfigurationDelegate(configurationSource, resourceLoader,\n            environment);\n\n        delegate.registerRepositoriesIn(registry, extension);\n    }\n}\n</code></pre>\n<p>AbdAnnotationRepositoryConfigurationSource.java. You can override <code>getBasePackages</code> then you can return any packages you want.</p>\n<pre><code>import org.springframework.core.annotation.AnnotationAttributes;\nimport org.springframework.core.env.Environment;\nimport org.springframework.core.io.ResourceLoader;\nimport org.springframework.core.type.AnnotationMetadata;\nimport org.springframework.data.repository.config.AnnotationRepositoryConfigurationSource;\nimport org.springframework.util.ClassUtils;\nimport org.springframework.util.StringUtils;\n\nimport java.lang.annotation.Annotation;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.HashSet;\nimport java.util.Set;\n/**\n *\n * @author ghj\n */\nclass AbdAnnotationRepositoryConfigurationSource extends AnnotationRepositoryConfigurationSource {\n    private static final String BASE_PACKAGES = &quot;basePackages&quot;;\n    private static final String BASE_PACKAGE_CLASSES = &quot;basePackageClasses&quot;;\n\n    private final AnnotationMetadata configMetadata;\n    private final AnnotationAttributes attributes;\n    private final Environment environment;\n\n    AbdAnnotationRepositoryConfigurationSource(AnnotationMetadata metadata, Class&lt;? extends Annotation&gt; annotation, ResourceLoader resourceLoader, Environment environment) {\n        super(metadata, annotation, resourceLoader, environment);\n\n        this.attributes = new AnnotationAttributes(metadata.getAnnotationAttributes(annotation.getName()));\n        this.configMetadata = metadata;\n        this.environment = environment;\n    }\n\n    @Override\n    public Iterable&lt;String&gt; getBasePackages() {\n\n        String value = attributes.getStringArray(&quot;value&quot;)[0];\n        String basePackages = attributes.getStringArray(BASE_PACKAGES)[0];\n        Class&lt;?&gt;[] basePackageClasses = attributes.getClassArray(BASE_PACKAGE_CLASSES);\n\n        // Default configuration - return package of annotated class\n        if (StringUtils.isEmpty(value) &amp;&amp; StringUtils.isEmpty(basePackages) &amp;&amp; basePackageClasses.length == 0) {\n            String className = configMetadata.getClassName();\n            return Collections.singleton(ClassUtils.getPackageName(className));\n        }\n\n        String[] packagesFromValue = parsePackagesSpel(value);\n        String[] packagesFromBasePackages = parsePackagesSpel(basePackages);\n\n        Set&lt;String&gt; packages = new HashSet&lt;&gt;();\n        packages.addAll(Arrays.asList(packagesFromValue));\n        packages.addAll(Arrays.asList(packagesFromBasePackages));\n\n        for (Class&lt;?&gt; typeName : basePackageClasses) {\n            packages.add(ClassUtils.getPackageName(typeName));\n        }\n\n        return packages;\n    }\n\n    private String[] parsePackagesSpel(String raw) {\n        if (!raw.trim().startsWith(&quot;$&quot;)) {\n            if (StringUtils.isEmpty(raw)) {\n                return new String[]{};\n            }\n            return raw.split(&quot;,&quot;);\n        } else {\n            raw = raw.trim();\n            String packages = this.environment.getProperty(raw.substring(&quot;${&quot;.length(), raw.length() - &quot;}&quot;.length()));\n            return packages.split(&quot;,&quot;);\n        }\n    }\n}\n</code></pre>\n<p>How to use?Here is configuration file.\nPrimaryJpaConfiguration.java</p>\n<pre><code>import com.shinow.abd.springjpa2.annotation.AbdEnableJpaRepositories;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceBuilder;\nimport org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.EnvironmentAware;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.core.env.Environment;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\n\nimport javax.persistence.EntityManager;\nimport javax.sql.DataSource;\nimport java.util.Map;\n\n@Configuration\n@AbdEnableJpaRepositories(\n    basePackages = &quot;${spring.jpa.base-packages}&quot;,\n    entityManagerFactoryRef = &quot;entityManagerFactory&quot;,\n    transactionManagerRef = &quot;transactionManager&quot;\n)\n@EnableAutoConfiguration(exclude = HibernateJpaAutoConfiguration.class)\npublic class PrimaryJpaConfiguration implements EnvironmentAware {\n    private Environment env;\n\n    @Bean\n    @ConditionalOnMissingBean(name = &quot;entityManager&quot;)\n    @Primary\n    public EntityManager entityManager(@Qualifier(&quot;entityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\n        return entityManagerFactory.getObject().createEntityManager();\n    }\n\n    @Bean\n    @ConditionalOnMissingBean(name = &quot;entityManagerFactory&quot;)\n    @Primary\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(@Qualifier(&quot;dataSource&quot;) DataSource dataSource) {\n        Map&lt;String, Object&gt; properties = JpaProperties.get(&quot;&quot;, env);\n        LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\n        entityManagerFactoryBean.setDataSource(dataSource);\n        entityManagerFactoryBean.setJpaPropertyMap(properties);\n        entityManagerFactoryBean.setPackagesToScan(env.getProperty(&quot;spring.jpa.base-packages&quot;).split(&quot;,&quot;));\n        entityManagerFactoryBean.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n\n        return entityManagerFactoryBean;\n    }\n\n    @Bean\n    @ConditionalOnMissingBean(name = &quot;dataSource&quot;)\n    @Primary\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean\n    @ConditionalOnMissingBean(name = &quot;transactionManager&quot;)\n    @Primary\n    public PlatformTransactionManager transactionManager(@Qualifier(&quot;entityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\n        JpaTransactionManager transactionManager\n            = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(\n            entityManagerFactory.getObject());\n        return transactionManager;\n    }\n\n    @Override\n    public void setEnvironment(Environment environment) {\n        this.env = environment;\n    }\n}\n</code></pre>\n<p>You can add <code>spring.jpa.base-packages</code> config to your application.properties.\nFor example:<code>spring.jpa.base-packages=com.foo.a,com.bar.b</code>,and the repositories and entities under those packages &quot;com.foo.a&quot; and &quot;com.bar.b&quot; will be added to the spring Ioc container.</p>\n"},{"tags":[],"owner":{"account_id":9400890,"reputation":11535,"user_id":7637120,"accept_rate":83,"display_name":"Roman Puchkovskiy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558191563,"creation_date":1558191563,"answer_id":56200118,"question_id":47635650,"body_markdown":"Answer by 高慧觉 https://stackoverflow.com/questions/47635650/spring-data-jpa-how-to-programmatically-set-jparepository-base-packages/51629110#51629110 worked for me, but I&#39;ve come up with a simpler and more reliable `AnnotationRepositoryConfigurationSource` implementation: just allow Spring Data to collect the packages in its way, and then post-process them and expand property placeholders to package names.\r\n\r\n    class AbdAnnotationRepositoryConfigurationSource extends AnnotationRepositoryConfigurationSource {\r\n    \r\n        private final Environment environment;\r\n    \r\n        ExpressionsSupportingAnnotationRepositoryConfigurationSource(AnnotationMetadata metadata, Class&lt;? extends Annotation&gt; annotation,\r\n                ResourceLoader resourceLoader, Environment environment, BeanDefinitionRegistry registry) {\r\n            super(metadata, annotation, resourceLoader, environment, registry);\r\n    \r\n            this.environment = environment;\r\n        }\r\n    \r\n        @Override\r\n        public Streamable&lt;String&gt; getBasePackages() {\r\n            Streamable&lt;String&gt; rawPackages = super.getBasePackages();\r\n            return Streamable.of(() -&gt; rawPackages.stream()\r\n                    .flatMap(raw -&gt; parsePackagesSpel(raw).stream())\r\n            );\r\n        }\r\n    \r\n        private List&lt;String&gt; parsePackagesSpel(@Nullable String rawPackage) {\r\n            Objects.requireNonNull(rawPackage, &quot;Package specification cannot be null&quot;);\r\n    \r\n            if (!rawPackage.trim().startsWith(&quot;$&quot;)) {\r\n                return Collections.singletonList(rawPackage);\r\n            }\r\n    \r\n            rawPackage = rawPackage.trim();\r\n            String propertyName = rawPackage.substring(&quot;${&quot;.length(), rawPackage.length() - &quot;}&quot;.length());\r\n            String packages = this.environment.getProperty(propertyName);\r\n    \r\n            if (!StringUtils.hasText(packages)) {\r\n                throw new IllegalStateException(\r\n                        String.format(&quot;Could not resolve the following packages definition: %s&quot;, rawPackage));\r\n            }\r\n            \r\n            return Arrays.stream(packages.split(&quot;,&quot;))\r\n                    .map(String::trim)\r\n                    .filter(StringUtils::hasText)\r\n                    .collect(Collectors.toList());\r\n        }\r\n    }","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>Answer by 高慧觉 <a href=\"https://stackoverflow.com/questions/47635650/spring-data-jpa-how-to-programmatically-set-jparepository-base-packages/51629110#51629110\">Spring Data JPA - How to programmatically set JpaRepository base packages</a> worked for me, but I've come up with a simpler and more reliable <code>AnnotationRepositoryConfigurationSource</code> implementation: just allow Spring Data to collect the packages in its way, and then post-process them and expand property placeholders to package names.</p>\n\n<pre><code>class AbdAnnotationRepositoryConfigurationSource extends AnnotationRepositoryConfigurationSource {\n\n    private final Environment environment;\n\n    ExpressionsSupportingAnnotationRepositoryConfigurationSource(AnnotationMetadata metadata, Class&lt;? extends Annotation&gt; annotation,\n            ResourceLoader resourceLoader, Environment environment, BeanDefinitionRegistry registry) {\n        super(metadata, annotation, resourceLoader, environment, registry);\n\n        this.environment = environment;\n    }\n\n    @Override\n    public Streamable&lt;String&gt; getBasePackages() {\n        Streamable&lt;String&gt; rawPackages = super.getBasePackages();\n        return Streamable.of(() -&gt; rawPackages.stream()\n                .flatMap(raw -&gt; parsePackagesSpel(raw).stream())\n        );\n    }\n\n    private List&lt;String&gt; parsePackagesSpel(@Nullable String rawPackage) {\n        Objects.requireNonNull(rawPackage, \"Package specification cannot be null\");\n\n        if (!rawPackage.trim().startsWith(\"$\")) {\n            return Collections.singletonList(rawPackage);\n        }\n\n        rawPackage = rawPackage.trim();\n        String propertyName = rawPackage.substring(\"${\".length(), rawPackage.length() - \"}\".length());\n        String packages = this.environment.getProperty(propertyName);\n\n        if (!StringUtils.hasText(packages)) {\n            throw new IllegalStateException(\n                    String.format(\"Could not resolve the following packages definition: %s\", rawPackage));\n        }\n\n        return Arrays.stream(packages.split(\",\"))\n                .map(String::trim)\n                .filter(StringUtils::hasText)\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87425,"reputation":1236,"user_id":242435,"accept_rate":68,"display_name":"PatlaDJ"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587906372,"creation_date":1587905561,"answer_id":61441106,"question_id":47635650,"body_markdown":"I&#39;ve implemented a way to invoke `@EnableJpaRepositories` purely programmatically. For the purpose I&#39;ve created a class which simulates the Annotation data passed to a config class annotated with the `@EnableJpaRepositories` annotation. I called my class `EnableJpaRepositoriesData`. It is confirmed working with Spring 5.1.5, SpringBoot 2.1.3. I guess it must be compatible with earlier and later versions alike, with none or very little changes at most.\r\n\r\nBelow follows the class code, and a sample usage code for it.\r\n\r\n&gt; **EnableJpaRepositoriesData.java:**\r\n\r\n    package org.patladj.jpa.config.multijpa;\r\n    \r\n    \r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.Import;\r\n    import org.springframework.core.annotation.AnnotationAttributes;\r\n    import org.springframework.core.type.AnnotationMetadata;\r\n    import org.springframework.core.type.classreading.AnnotationMetadataReadingVisitor;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    import org.springframework.lang.Nullable;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.stereotype.Indexed;\r\n    import org.springframework.transaction.annotation.EnableTransactionManagement;\r\n    import org.springframework.transaction.annotation.TransactionManagementConfigurationSelector;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.*;\r\n    \r\n    \r\n    public class EnableJpaRepositoriesData extends AnnotationMetadataReadingVisitor implements AnnotationMetadata {\r\n    \r\n        private Map&lt;String, ?&gt; data;\r\n    \r\n        private void initIt() throws NoSuchMethodException, ClassNotFoundException {\r\n    \r\n            //################## protected final Set&lt;String&gt; annotationSet = new LinkedHashSet&lt;&gt;(4);\r\n            annotationSet.add(Configuration.class.getCanonicalName());\r\n            annotationSet.add(EnableTransactionManagement.class.getCanonicalName());\r\n            annotationSet.add(EnableJpaRepositories.class.getCanonicalName());\r\n    \r\n            //################## protected final Map&lt;String, Set&lt;String&gt;&gt; metaAnnotationMap = new LinkedHashMap&lt;&gt;(4);\r\n            metaAnnotationMap.put(Configuration.class.getCanonicalName(),\r\n                    new LinkedHashSet&lt;&gt;(Arrays.asList(\r\n                            Component.class.getCanonicalName(),\r\n                            Indexed.class.getCanonicalName()\r\n                    )));\r\n            metaAnnotationMap.put(EnableTransactionManagement.class.getCanonicalName(),\r\n                    new LinkedHashSet&lt;&gt;(Arrays.asList(\r\n                            Import.class.getCanonicalName()\r\n                    )));\r\n            metaAnnotationMap.put(EnableJpaRepositories.class.getCanonicalName(),\r\n                    new LinkedHashSet&lt;&gt;(Arrays.asList(\r\n                            Import.class.getCanonicalName()\r\n                    )));\r\n    \r\n            //################## protected final LinkedMultiValueMap&lt;String, AnnotationAttributes&gt; attributesMap = new LinkedMultiValueMap&lt;&gt;(4);\r\n            attributesMap.put(Configuration.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;value&quot;, defaultFor(Configuration.class, &quot;value&quot;));\r\n                        }}));\r\n                    }});\r\n    \r\n            attributesMap.put(Component.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;value&quot;, defaultFor(Component.class, &quot;value&quot;));\r\n                        }}));\r\n                    }});\r\n            attributesMap.put(Indexed.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                        }}));\r\n                    }});\r\n            attributesMap.put(EnableTransactionManagement.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;order&quot;, defaultFor(EnableTransactionManagement.class, &quot;order&quot;));\r\n                            put(&quot;mode&quot;, defaultFor(EnableTransactionManagement.class, &quot;mode&quot;));\r\n                            put(&quot;proxyTargetClass&quot;, defaultFor(EnableTransactionManagement.class, &quot;proxyTargetClass&quot;));\r\n                        }}));\r\n                    }});\r\n            attributesMap.put(Import.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;value&quot;, new Class&lt;?&gt;[]{TransactionManagementConfigurationSelector.class});\r\n                        }}));\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;value&quot;, new Class&lt;?&gt;[]{Class.forName(&quot;org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar&quot;)});\r\n                        }}));\r\n                    }});\r\n    \r\n            attributesMap.put(EnableJpaRepositories.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;repositoryBaseClass&quot;, data.get(&quot;repositoryBaseClass&quot;));\r\n                            put(&quot;basePackages&quot;, data.get(&quot;basePackages&quot;));\r\n                            put(&quot;value&quot;, defaultFor(EnableJpaRepositories.class, &quot;value&quot;));\r\n                            put(&quot;excludeFilters&quot;, new AnnotationAttributes[]{});\r\n                            put(&quot;includeFilters&quot;, new AnnotationAttributes[]{});\r\n                            put(&quot;basePackageClasses&quot;, defaultFor(EnableJpaRepositories.class, &quot;basePackageClasses&quot;));\r\n                            put(&quot;bootstrapMode&quot;, defaultFor(EnableJpaRepositories.class, &quot;bootstrapMode&quot;));\r\n                            put(&quot;transactionManagerRef&quot;, data.get(&quot;transactionManagerRef&quot;));\r\n                            put(&quot;considerNestedRepositories&quot;, defaultFor(EnableJpaRepositories.class, &quot;considerNestedRepositories&quot;));\r\n                            put(&quot;namedQueriesLocation&quot;, defaultFor(EnableJpaRepositories.class, &quot;namedQueriesLocation&quot;));\r\n                            put(&quot;queryLookupStrategy&quot;, defaultFor(EnableJpaRepositories.class, &quot;queryLookupStrategy&quot;));\r\n                            put(&quot;entityManagerFactoryRef&quot;, data.get(&quot;entityManagerFactoryRef&quot;));\r\n                            put(&quot;enableDefaultTransactions&quot;, defaultFor(EnableJpaRepositories.class, &quot;enableDefaultTransactions&quot;));\r\n                            put(&quot;repositoryImplementationPostfix&quot;, defaultFor(EnableJpaRepositories.class, &quot;repositoryImplementationPostfix&quot;));\r\n                            put(&quot;repositoryFactoryBeanClass&quot;, defaultFor(EnableJpaRepositories.class, &quot;repositoryFactoryBeanClass&quot;));\r\n    \r\n                        }}));\r\n                    }});\r\n    \r\n    \r\n            //##################\r\n        }\r\n    \r\n        public EnableJpaRepositoriesData(@Nullable ClassLoader classLoader, Map&lt;String, ?&gt; data) throws NoSuchMethodException, ClassNotFoundException {\r\n            super(classLoader);\r\n            this.data = data;\r\n            this.initIt();\r\n        }\r\n    \r\n        private Object defaultFor(Class&lt;?&gt; clazz, String methodName) throws NoSuchMethodException {\r\n            Method method = clazz.getDeclaredMethod(methodName);\r\n            return method.getDefaultValue();\r\n        }\r\n    }\r\n\r\n\r\n&gt; **Sample usage of the Class to actually invoke enableJpaRepositories**\r\n&gt; **programmatically:**\r\n\r\n    AnnotationMetadata enableJpaRepositoriesData = null;\r\n    try {\r\n        enableJpaRepositoriesData = new EnableJpaRepositoriesData(this.getClass().getClassLoader(), new HashMap&lt;String, Object&gt;() {{\r\n            put(&quot;repositoryBaseClass&quot;, MyJPAConnectorImpl.class);\r\n            put(&quot;basePackages&quot;, new String[] {\r\n    \r\n                    //This is where you set the repositories base packages to scan.\r\n                    //... Having your best programmatic convenience\r\n                    &quot;org.patladj.connector.multijpa.common&quot;,\r\n                    &quot;org.patladj.connector.multijpa.anotherrepositoriespackage&quot;,\r\n                    &quot;org.patladj.connector.multijpa.morepackagestoscanforrepositories...&quot;\r\n            });\r\n    \r\n            //Ofcourse you need to create by yourself the custom transactionManagerFactory,\r\n            // ... entityManagerFactory, JPAVendorAdapter and Datasource beans for your\r\n            // ... custom persistence contexts using unique bean names (different than\r\n            // ... the default Spring data names: &#39;entityManagerFactory&#39;, etc...)\r\n            // ... Then &quot;send&quot; these bean names as references to each and every ...\r\n            // and as many as you want persistence contexts programmatically here\r\n            put(&quot;transactionManagerRef&quot;, myCustomPersistanceContextName + &quot;_transactionManager&quot;);\r\n            put(&quot;entityManagerFactoryRef&quot;, myCustomPersistanceContextName + &quot;_entityManagerFactory&quot;);\r\n        }});\r\n    } catch (NoSuchMethodException e) {\r\n        throw new ExceptionInInitializerError(e);\r\n    } catch (ClassNotFoundException e) {\r\n        throw new ExceptionInInitializerError(e);\r\n    }\r\n    \r\n    AnnotationRepositoryConfigurationSource configurationSource = new AnnotationRepositoryConfigurationSource(\r\n            enableJpaRepositoriesData, EnableJpaRepositories.class, applicationContext, environment, registry\r\n    );\r\n    \r\n    RepositoryConfigurationExtension extension = new JpaRepositoryConfigExtension();\r\n    \r\n    RepositoryConfigurationUtils.exposeRegistration(extension, registry, configurationSource);\r\n    \r\n    RepositoryConfigurationDelegate delegate = new RepositoryConfigurationDelegate(configurationSource, applicationContext, environment);\r\n    delegate.registerRepositoriesIn(registry, extension);\r\n\r\n&gt; **And finally, in case if you don&#39;t know, you can use the following @Configuration class**\r\n\r\n    public class MultiJPABeanDefinitionRegistrar implements BeanDefinitionRegistryPostProcessor, ApplicationContextAware\r\n... to override 2 of its methods to have the post process bean `registry` and `applicationContext` at your disposal to register bean definitions dynamically.\r\nMethods to override:\r\n\r\n     - public void setApplicationContext(ApplicationContext applicationContext) throws BeansException\r\n     - public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>I've implemented a way to invoke <code>@EnableJpaRepositories</code> purely programmatically. For the purpose I've created a class which simulates the Annotation data passed to a config class annotated with the <code>@EnableJpaRepositories</code> annotation. I called my class <code>EnableJpaRepositoriesData</code>. It is confirmed working with Spring 5.1.5, SpringBoot 2.1.3. I guess it must be compatible with earlier and later versions alike, with none or very little changes at most.</p>\n\n<p>Below follows the class code, and a sample usage code for it.</p>\n\n<blockquote>\n  <p><strong>EnableJpaRepositoriesData.java:</strong></p>\n</blockquote>\n\n<pre><code>package org.patladj.jpa.config.multijpa;\n\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.core.annotation.AnnotationAttributes;\nimport org.springframework.core.type.AnnotationMetadata;\nimport org.springframework.core.type.classreading.AnnotationMetadataReadingVisitor;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.lang.Nullable;\nimport org.springframework.stereotype.Component;\nimport org.springframework.stereotype.Indexed;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\nimport org.springframework.transaction.annotation.TransactionManagementConfigurationSelector;\n\nimport java.lang.reflect.Method;\nimport java.util.*;\n\n\npublic class EnableJpaRepositoriesData extends AnnotationMetadataReadingVisitor implements AnnotationMetadata {\n\n    private Map&lt;String, ?&gt; data;\n\n    private void initIt() throws NoSuchMethodException, ClassNotFoundException {\n\n        //################## protected final Set&lt;String&gt; annotationSet = new LinkedHashSet&lt;&gt;(4);\n        annotationSet.add(Configuration.class.getCanonicalName());\n        annotationSet.add(EnableTransactionManagement.class.getCanonicalName());\n        annotationSet.add(EnableJpaRepositories.class.getCanonicalName());\n\n        //################## protected final Map&lt;String, Set&lt;String&gt;&gt; metaAnnotationMap = new LinkedHashMap&lt;&gt;(4);\n        metaAnnotationMap.put(Configuration.class.getCanonicalName(),\n                new LinkedHashSet&lt;&gt;(Arrays.asList(\n                        Component.class.getCanonicalName(),\n                        Indexed.class.getCanonicalName()\n                )));\n        metaAnnotationMap.put(EnableTransactionManagement.class.getCanonicalName(),\n                new LinkedHashSet&lt;&gt;(Arrays.asList(\n                        Import.class.getCanonicalName()\n                )));\n        metaAnnotationMap.put(EnableJpaRepositories.class.getCanonicalName(),\n                new LinkedHashSet&lt;&gt;(Arrays.asList(\n                        Import.class.getCanonicalName()\n                )));\n\n        //################## protected final LinkedMultiValueMap&lt;String, AnnotationAttributes&gt; attributesMap = new LinkedMultiValueMap&lt;&gt;(4);\n        attributesMap.put(Configuration.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"value\", defaultFor(Configuration.class, \"value\"));\n                    }}));\n                }});\n\n        attributesMap.put(Component.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"value\", defaultFor(Component.class, \"value\"));\n                    }}));\n                }});\n        attributesMap.put(Indexed.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                    }}));\n                }});\n        attributesMap.put(EnableTransactionManagement.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"order\", defaultFor(EnableTransactionManagement.class, \"order\"));\n                        put(\"mode\", defaultFor(EnableTransactionManagement.class, \"mode\"));\n                        put(\"proxyTargetClass\", defaultFor(EnableTransactionManagement.class, \"proxyTargetClass\"));\n                    }}));\n                }});\n        attributesMap.put(Import.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"value\", new Class&lt;?&gt;[]{TransactionManagementConfigurationSelector.class});\n                    }}));\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"value\", new Class&lt;?&gt;[]{Class.forName(\"org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar\")});\n                    }}));\n                }});\n\n        attributesMap.put(EnableJpaRepositories.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"repositoryBaseClass\", data.get(\"repositoryBaseClass\"));\n                        put(\"basePackages\", data.get(\"basePackages\"));\n                        put(\"value\", defaultFor(EnableJpaRepositories.class, \"value\"));\n                        put(\"excludeFilters\", new AnnotationAttributes[]{});\n                        put(\"includeFilters\", new AnnotationAttributes[]{});\n                        put(\"basePackageClasses\", defaultFor(EnableJpaRepositories.class, \"basePackageClasses\"));\n                        put(\"bootstrapMode\", defaultFor(EnableJpaRepositories.class, \"bootstrapMode\"));\n                        put(\"transactionManagerRef\", data.get(\"transactionManagerRef\"));\n                        put(\"considerNestedRepositories\", defaultFor(EnableJpaRepositories.class, \"considerNestedRepositories\"));\n                        put(\"namedQueriesLocation\", defaultFor(EnableJpaRepositories.class, \"namedQueriesLocation\"));\n                        put(\"queryLookupStrategy\", defaultFor(EnableJpaRepositories.class, \"queryLookupStrategy\"));\n                        put(\"entityManagerFactoryRef\", data.get(\"entityManagerFactoryRef\"));\n                        put(\"enableDefaultTransactions\", defaultFor(EnableJpaRepositories.class, \"enableDefaultTransactions\"));\n                        put(\"repositoryImplementationPostfix\", defaultFor(EnableJpaRepositories.class, \"repositoryImplementationPostfix\"));\n                        put(\"repositoryFactoryBeanClass\", defaultFor(EnableJpaRepositories.class, \"repositoryFactoryBeanClass\"));\n\n                    }}));\n                }});\n\n\n        //##################\n    }\n\n    public EnableJpaRepositoriesData(@Nullable ClassLoader classLoader, Map&lt;String, ?&gt; data) throws NoSuchMethodException, ClassNotFoundException {\n        super(classLoader);\n        this.data = data;\n        this.initIt();\n    }\n\n    private Object defaultFor(Class&lt;?&gt; clazz, String methodName) throws NoSuchMethodException {\n        Method method = clazz.getDeclaredMethod(methodName);\n        return method.getDefaultValue();\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p><strong>Sample usage of the Class to actually invoke enableJpaRepositories</strong>\n  <strong>programmatically:</strong></p>\n</blockquote>\n\n<pre><code>AnnotationMetadata enableJpaRepositoriesData = null;\ntry {\n    enableJpaRepositoriesData = new EnableJpaRepositoriesData(this.getClass().getClassLoader(), new HashMap&lt;String, Object&gt;() {{\n        put(\"repositoryBaseClass\", MyJPAConnectorImpl.class);\n        put(\"basePackages\", new String[] {\n\n                //This is where you set the repositories base packages to scan.\n                //... Having your best programmatic convenience\n                \"org.patladj.connector.multijpa.common\",\n                \"org.patladj.connector.multijpa.anotherrepositoriespackage\",\n                \"org.patladj.connector.multijpa.morepackagestoscanforrepositories...\"\n        });\n\n        //Ofcourse you need to create by yourself the custom transactionManagerFactory,\n        // ... entityManagerFactory, JPAVendorAdapter and Datasource beans for your\n        // ... custom persistence contexts using unique bean names (different than\n        // ... the default Spring data names: 'entityManagerFactory', etc...)\n        // ... Then \"send\" these bean names as references to each and every ...\n        // and as many as you want persistence contexts programmatically here\n        put(\"transactionManagerRef\", myCustomPersistanceContextName + \"_transactionManager\");\n        put(\"entityManagerFactoryRef\", myCustomPersistanceContextName + \"_entityManagerFactory\");\n    }});\n} catch (NoSuchMethodException e) {\n    throw new ExceptionInInitializerError(e);\n} catch (ClassNotFoundException e) {\n    throw new ExceptionInInitializerError(e);\n}\n\nAnnotationRepositoryConfigurationSource configurationSource = new AnnotationRepositoryConfigurationSource(\n        enableJpaRepositoriesData, EnableJpaRepositories.class, applicationContext, environment, registry\n);\n\nRepositoryConfigurationExtension extension = new JpaRepositoryConfigExtension();\n\nRepositoryConfigurationUtils.exposeRegistration(extension, registry, configurationSource);\n\nRepositoryConfigurationDelegate delegate = new RepositoryConfigurationDelegate(configurationSource, applicationContext, environment);\ndelegate.registerRepositoriesIn(registry, extension);\n</code></pre>\n\n<blockquote>\n  <p><strong>And finally, in case if you don't know, you can use the following @Configuration class</strong></p>\n</blockquote>\n\n<pre><code>public class MultiJPABeanDefinitionRegistrar implements BeanDefinitionRegistryPostProcessor, ApplicationContextAware\n</code></pre>\n\n<p>... to override 2 of its methods to have the post process bean <code>registry</code> and <code>applicationContext</code> at your disposal to register bean definitions dynamically.\nMethods to override:</p>\n\n<pre><code> - public void setApplicationContext(ApplicationContext applicationContext) throws BeansException\n - public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3356729,"reputation":472,"user_id":2819483,"display_name":"yathartha"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1598982812,"creation_date":1598672556,"answer_id":63643198,"question_id":47635650,"body_markdown":"I referred this post only and created a module aware multi database aware spring data library for mysql(compatible with spring boot) in github.Some application properties need to be added and you are done .\r\n\r\nDocumentation and other details could be found at :-\r\n\r\nhttps://github.com/yatharthamishra0419/spring-boot-data-multimodule-mysql\r\n\r\n","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>I referred this post only and created a module aware multi database aware spring data library for mysql(compatible with spring boot) in github.Some application properties need to be added and you are done .</p>\n<p>Documentation and other details could be found at :-</p>\n<p><a href=\"https://github.com/yatharthamishra0419/spring-boot-data-multimodule-mysql\" rel=\"nofollow noreferrer\">https://github.com/yatharthamishra0419/spring-boot-data-multimodule-mysql</a></p>\n"},{"tags":[],"owner":{"account_id":3081243,"reputation":114,"user_id":2609399,"display_name":"Teodor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683309481,"creation_date":1683306475,"answer_id":76184527,"question_id":47635650,"body_markdown":"From the `code-in-the-middle` perspective, there is a way to inject the needed functionality into an exact code-location in order to achieve the `dynamic basePackages value` feature and by `dynamic` here I mean at `runtime`.\r\n\r\nManaged to bypass the existing spring limitation with the following logic (code is simplified in order to highlight the `code-in-the-middle` solution itself).\r\n\r\n1. Application JPA configuration class\r\n```\r\npackage com.me0x.meta.persistence.configuration;\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\nimport com.me0x.meta.spring.data.EnableJpaRepositories;\r\n\r\n@Configuration\r\n@EnableJpaRepositories\r\npublic class JpaConfiguration {\r\n    // other configuration details, if any\r\n}\r\n```\r\n\r\n2. Custom version of the `EnableJpaRepositories` annotation\r\n```\r\npackage com.me0x.meta.spring.data;\r\n\r\nimport java.lang.annotation.Documented;\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Import;\r\nimport org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean;\r\nimport org.springframework.data.repository.config.BootstrapMode;\r\nimport org.springframework.data.repository.config.DefaultRepositoryBaseClass;\r\nimport org.springframework.data.repository.query.QueryLookupStrategy;\r\n\r\n/**\r\n * This annotation is just a copy of the\r\n * {@link org.springframework.data.jpa.repository.config.EnableJpaRepositories}\r\n * spring specific one.\r\n * &lt;p&gt;\r\n * The dynamic loading aspect of JPA repositories is enabled IF AND ONLY IF the\r\n * {@link #basePackages()} property is set to the\r\n * {@link DynamicJpaRepositoriesRegistrar#DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY}\r\n * value, as it is by default, otherwise this annotation works similar to the\r\n * spring specific one.\r\n * &lt;p&gt;\r\n * TODO: Remove this custom annotation and everything around it once spring\r\n *  starts to allow by default a dynamic loading strategy of the\r\n *  {@link #basePackages()} value!\r\n * TODO: Keep it updated (synced) to the spring specific version of it everytime\r\n *  the spring framework is upgraded!\r\n */\r\n@Target(ElementType.TYPE)\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\n@Import(DynamicJpaRepositoriesRegistrar.class)\r\n@SuppressWarnings(&quot;unused&quot;)\r\npublic @interface EnableJpaRepositories {\r\n\r\n    String[] value() default {};\r\n\r\n    String[] basePackages() default {DynamicJpaRepositoriesRegistrar.DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY};\r\n\r\n    Class&lt;?&gt;[] basePackageClasses() default {};\r\n\r\n    ComponentScan.Filter[] includeFilters() default {};\r\n\r\n    ComponentScan.Filter[] excludeFilters() default {};\r\n\r\n    String repositoryImplementationPostfix() default &quot;Impl&quot;;\r\n\r\n    String namedQueriesLocation() default &quot;&quot;;\r\n\r\n    QueryLookupStrategy.Key queryLookupStrategy() default QueryLookupStrategy.Key.CREATE_IF_NOT_FOUND;\r\n\r\n    Class&lt;?&gt; repositoryFactoryBeanClass() default JpaRepositoryFactoryBean.class;\r\n\r\n    Class&lt;?&gt; repositoryBaseClass() default DefaultRepositoryBaseClass.class;\r\n\r\n    // JPA specific configuration\r\n\r\n    String entityManagerFactoryRef() default &quot;entityManagerFactory&quot;;\r\n\r\n    String transactionManagerRef() default &quot;transactionManager&quot;;\r\n\r\n    boolean considerNestedRepositories() default false;\r\n\r\n    boolean enableDefaultTransactions() default true;\r\n\r\n    BootstrapMode bootstrapMode() default BootstrapMode.DEFAULT;\r\n\r\n    char escapeCharacter() default &#39;\\\\&#39;;\r\n\r\n}\r\n```\r\n\r\n3. Custom version of the `org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport` class\r\n```\r\npackage com.me0x.meta.spring.data;\r\n\r\nimport java.lang.annotation.Annotation;\r\nimport java.lang.reflect.Proxy;\r\nimport java.util.Map;\r\nimport lombok.extern.log4j.Log4j2;\r\nimport org.springframework.beans.factory.support.BeanDefinitionRegistry;\r\nimport org.springframework.beans.factory.support.BeanNameGenerator;\r\nimport org.springframework.core.type.AnnotationMetadata;\r\nimport org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension;\r\nimport org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport;\r\nimport org.springframework.data.repository.config.RepositoryConfigurationExtension;\r\n\r\nimport com.me0x.meta.exception.ServiceException;\r\n\r\n/**\r\n * @see org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar\r\n */\r\n@Log4j2\r\npublic class DynamicJpaRepositoriesRegistrar extends RepositoryBeanDefinitionRegistrarSupport {\r\n\r\n    public static final String DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY = &quot;Dynamic&quot;;\r\n\r\n    @Override\r\n    public void registerBeanDefinitions(final AnnotationMetadata metadata, final BeanDefinitionRegistry registry, final BeanNameGenerator generator) {\r\n        final AnnotationMetadata annotationMetadataProxy = (AnnotationMetadata) Proxy.newProxyInstance(\r\n                getClass().getClassLoader(),\r\n                new Class&lt;?&gt;[]{AnnotationMetadata.class},\r\n                (proxy, method, args) -&gt; {\r\n                    final Object methodResult = method.invoke(metadata, args);\r\n\r\n                    if (methodResult instanceof Map) {\r\n                        try {\r\n                            @SuppressWarnings(&quot;unchecked&quot;) final Map&lt;String, Object&gt; mapMethodResult = (Map&lt;String, Object&gt;) methodResult;\r\n                            final Object basePackages = mapMethodResult.get(&quot;basePackages&quot;);\r\n\r\n                            if (null != basePackages) {\r\n                                final String[] basePackagesArray = (String[]) basePackages;\r\n\r\n                                if (1 == basePackagesArray.length &amp;&amp; DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY.equals(basePackagesArray[0])) {\r\n                                    mapMethodResult.put(&quot;basePackages&quot;, new String[]{&quot;com.me0x&quot;}); // TODO: Add dynamic values identified at runtime instead!\r\n                                }\r\n                            }\r\n                        } catch (final Exception e) {\r\n                            throw new ServiceException(&quot;Unable to customize the JPA repositories registration process!&quot;, e);\r\n                        }\r\n                    }\r\n\r\n                    return methodResult;\r\n                }\r\n        );\r\n\r\n        super.registerBeanDefinitions(annotationMetadataProxy, registry, generator);\r\n    }\r\n\r\n    @Override\r\n    protected Class&lt;? extends Annotation&gt; getAnnotation() {\r\n        return EnableJpaRepositories.class;\r\n    }\r\n\r\n    @Override\r\n    protected RepositoryConfigurationExtension getExtension() {\r\n        return new JpaRepositoryConfigExtension();\r\n    }\r\n\r\n}\r\n```","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>From the <code>code-in-the-middle</code> perspective, there is a way to inject the needed functionality into an exact code-location in order to achieve the <code>dynamic basePackages value</code> feature and by <code>dynamic</code> here I mean at <code>runtime</code>.</p>\n<p>Managed to bypass the existing spring limitation with the following logic (code is simplified in order to highlight the <code>code-in-the-middle</code> solution itself).</p>\n<ol>\n<li>Application JPA configuration class</li>\n</ol>\n<pre><code>package com.me0x.meta.persistence.configuration;\n\nimport org.springframework.context.annotation.Configuration;\n\nimport com.me0x.meta.spring.data.EnableJpaRepositories;\n\n@Configuration\n@EnableJpaRepositories\npublic class JpaConfiguration {\n    // other configuration details, if any\n}\n</code></pre>\n<ol start=\"2\">\n<li>Custom version of the <code>EnableJpaRepositories</code> annotation</li>\n</ol>\n<pre><code>package com.me0x.meta.spring.data;\n\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean;\nimport org.springframework.data.repository.config.BootstrapMode;\nimport org.springframework.data.repository.config.DefaultRepositoryBaseClass;\nimport org.springframework.data.repository.query.QueryLookupStrategy;\n\n/**\n * This annotation is just a copy of the\n * {@link org.springframework.data.jpa.repository.config.EnableJpaRepositories}\n * spring specific one.\n * &lt;p&gt;\n * The dynamic loading aspect of JPA repositories is enabled IF AND ONLY IF the\n * {@link #basePackages()} property is set to the\n * {@link DynamicJpaRepositoriesRegistrar#DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY}\n * value, as it is by default, otherwise this annotation works similar to the\n * spring specific one.\n * &lt;p&gt;\n * TODO: Remove this custom annotation and everything around it once spring\n *  starts to allow by default a dynamic loading strategy of the\n *  {@link #basePackages()} value!\n * TODO: Keep it updated (synced) to the spring specific version of it everytime\n *  the spring framework is upgraded!\n */\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Import(DynamicJpaRepositoriesRegistrar.class)\n@SuppressWarnings(&quot;unused&quot;)\npublic @interface EnableJpaRepositories {\n\n    String[] value() default {};\n\n    String[] basePackages() default {DynamicJpaRepositoriesRegistrar.DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY};\n\n    Class&lt;?&gt;[] basePackageClasses() default {};\n\n    ComponentScan.Filter[] includeFilters() default {};\n\n    ComponentScan.Filter[] excludeFilters() default {};\n\n    String repositoryImplementationPostfix() default &quot;Impl&quot;;\n\n    String namedQueriesLocation() default &quot;&quot;;\n\n    QueryLookupStrategy.Key queryLookupStrategy() default QueryLookupStrategy.Key.CREATE_IF_NOT_FOUND;\n\n    Class&lt;?&gt; repositoryFactoryBeanClass() default JpaRepositoryFactoryBean.class;\n\n    Class&lt;?&gt; repositoryBaseClass() default DefaultRepositoryBaseClass.class;\n\n    // JPA specific configuration\n\n    String entityManagerFactoryRef() default &quot;entityManagerFactory&quot;;\n\n    String transactionManagerRef() default &quot;transactionManager&quot;;\n\n    boolean considerNestedRepositories() default false;\n\n    boolean enableDefaultTransactions() default true;\n\n    BootstrapMode bootstrapMode() default BootstrapMode.DEFAULT;\n\n    char escapeCharacter() default '\\\\';\n\n}\n</code></pre>\n<ol start=\"3\">\n<li>Custom version of the <code>org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport</code> class</li>\n</ol>\n<pre><code>package com.me0x.meta.spring.data;\n\nimport java.lang.annotation.Annotation;\nimport java.lang.reflect.Proxy;\nimport java.util.Map;\nimport lombok.extern.log4j.Log4j2;\nimport org.springframework.beans.factory.support.BeanDefinitionRegistry;\nimport org.springframework.beans.factory.support.BeanNameGenerator;\nimport org.springframework.core.type.AnnotationMetadata;\nimport org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension;\nimport org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport;\nimport org.springframework.data.repository.config.RepositoryConfigurationExtension;\n\nimport com.me0x.meta.exception.ServiceException;\n\n/**\n * @see org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar\n */\n@Log4j2\npublic class DynamicJpaRepositoriesRegistrar extends RepositoryBeanDefinitionRegistrarSupport {\n\n    public static final String DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY = &quot;Dynamic&quot;;\n\n    @Override\n    public void registerBeanDefinitions(final AnnotationMetadata metadata, final BeanDefinitionRegistry registry, final BeanNameGenerator generator) {\n        final AnnotationMetadata annotationMetadataProxy = (AnnotationMetadata) Proxy.newProxyInstance(\n                getClass().getClassLoader(),\n                new Class&lt;?&gt;[]{AnnotationMetadata.class},\n                (proxy, method, args) -&gt; {\n                    final Object methodResult = method.invoke(metadata, args);\n\n                    if (methodResult instanceof Map) {\n                        try {\n                            @SuppressWarnings(&quot;unchecked&quot;) final Map&lt;String, Object&gt; mapMethodResult = (Map&lt;String, Object&gt;) methodResult;\n                            final Object basePackages = mapMethodResult.get(&quot;basePackages&quot;);\n\n                            if (null != basePackages) {\n                                final String[] basePackagesArray = (String[]) basePackages;\n\n                                if (1 == basePackagesArray.length &amp;&amp; DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY.equals(basePackagesArray[0])) {\n                                    mapMethodResult.put(&quot;basePackages&quot;, new String[]{&quot;com.me0x&quot;}); // TODO: Add dynamic values identified at runtime instead!\n                                }\n                            }\n                        } catch (final Exception e) {\n                            throw new ServiceException(&quot;Unable to customize the JPA repositories registration process!&quot;, e);\n                        }\n                    }\n\n                    return methodResult;\n                }\n        );\n\n        super.registerBeanDefinitions(annotationMetadataProxy, registry, generator);\n    }\n\n    @Override\n    protected Class&lt;? extends Annotation&gt; getAnnotation() {\n        return EnableJpaRepositories.class;\n    }\n\n    @Override\n    protected RepositoryConfigurationExtension getExtension() {\n        return new JpaRepositoryConfigExtension();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":2169245,"reputation":1238,"user_id":1921678,"accept_rate":100,"display_name":"marandus"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26773,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":8,"score":15,"last_activity_date":1683309481,"creation_date":1512398031,"question_id":47635650,"body_markdown":"When defining an EntityManager in a Spring Java Config class, I can add the base packages to scan for Entity classes by calling a method on the corresponding builder:\r\n\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder) {\r\n      // Some other configuration here\r\n      builder.packages(&quot;org.foo.bar&quot;, &quot;org.foo.baz&quot;);\r\n      return builder.build();\r\n    }\r\n\r\nI need something similar for the places where Spring looks for Repository Interfaces. The usual way is using the `@EnableJpaRepositories` annotation:\r\n\r\n    @EnableJpaRepositories(basePackages = {&quot;org.foo.barbaz&quot;})\r\n\r\nBut I would like to have a dynamical way for defining these packages similar to the way above for the Entity locations. Something like this:\r\n\r\n    public SomeJpaRepositoryFactoryBean entityManagerFactory(JpaRepositoryFactoryBuilder builder) {\r\n      // Some other configuration here\r\n      builder.packages(&quot;org.foo.barbaz&quot;);\r\n      return builder.build();\r\n    }\r\n\r\nIs there a way to do this with the current Spring Data JPA release is it simply not meant to be done this way?","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>When defining an EntityManager in a Spring Java Config class, I can add the base packages to scan for Entity classes by calling a method on the corresponding builder:</p>\n\n<pre><code>public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder) {\n  // Some other configuration here\n  builder.packages(\"org.foo.bar\", \"org.foo.baz\");\n  return builder.build();\n}\n</code></pre>\n\n<p>I need something similar for the places where Spring looks for Repository Interfaces. The usual way is using the <code>@EnableJpaRepositories</code> annotation:</p>\n\n<pre><code>@EnableJpaRepositories(basePackages = {\"org.foo.barbaz\"})\n</code></pre>\n\n<p>But I would like to have a dynamical way for defining these packages similar to the way above for the Entity locations. Something like this:</p>\n\n<pre><code>public SomeJpaRepositoryFactoryBean entityManagerFactory(JpaRepositoryFactoryBuilder builder) {\n  // Some other configuration here\n  builder.packages(\"org.foo.barbaz\");\n  return builder.build();\n}\n</code></pre>\n\n<p>Is there a way to do this with the current Spring Data JPA release is it simply not meant to be done this way?</p>\n"},{"tags":["java","amazon-web-services","aws-lambda","dagger-2","dagger"],"comments":[{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1683242353,"post_id":76177219,"comment_id":134341097,"body_markdown":"&quot;I want my handler to hold more logic&quot; - what does that mean?","body":"&quot;I want my handler to hold more logic&quot; - what does that mean?"},{"owner":{"account_id":28458817,"reputation":21,"user_id":21775795,"display_name":"Raze"},"score":0,"creation_date":1683242819,"post_id":76177219,"comment_id":134341144,"body_markdown":"Sorry, I meant that I will be adding more services, thats why I want to use dependency injection such as dagger","body":"Sorry, I meant that I will be adding more services, thats why I want to use dependency injection such as dagger"},{"owner":{"account_id":27028764,"reputation":561,"user_id":20585541,"display_name":"Ben the Coder"},"score":0,"creation_date":1683555751,"post_id":76177219,"comment_id":134380555,"body_markdown":"Don&#39;t post images of code! Put it in your post instead.","body":"Don&#39;t post images of code! Put it in your post instead."}],"answers":[{"tags":[],"owner":{"account_id":28458817,"reputation":21,"user_id":21775795,"display_name":"Raze"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683309316,"creation_date":1683309316,"answer_id":76184808,"question_id":76177219,"body_markdown":"I figured it out. The implementation of dagger is correct however Lambda requires a zero-argument constructor. So my workaround was to inject the objects directly instead of constructor injection.\r\n\r\n[Java Doc][1]\r\n\r\n\r\n  [1]: http://ask-sdk-java-javadocs.s3-website-us-west-2.amazonaws.com/com/amazon/ask/SkillStreamHandler.html#:~:text=Lambda%20functions%20written%20in%20Java,argument%20constructor%20and%20implement%20RequestStreamHandler%20.","title":"Class handler.GameSessionLambda has no public zero-argument constructor: java.lang.Exception","body":"<p>I figured it out. The implementation of dagger is correct however Lambda requires a zero-argument constructor. So my workaround was to inject the objects directly instead of constructor injection.</p>\n<p><a href=\"http://ask-sdk-java-javadocs.s3-website-us-west-2.amazonaws.com/com/amazon/ask/SkillStreamHandler.html#:%7E:text=Lambda%20functions%20written%20in%20Java,argument%20constructor%20and%20implement%20RequestStreamHandler%20.\" rel=\"nofollow noreferrer\">Java Doc</a></p>\n"}],"owner":{"account_id":28458817,"reputation":21,"user_id":21775795,"display_name":"Raze"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1680,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"closed_date":1683744802,"answer_count":1,"score":-3,"last_activity_date":1683309316,"creation_date":1683232824,"question_id":76177219,"body_markdown":"I&#39;m working with Lambda in Java and added Dagger2. However I&#39;m having problem injecting objects to my lambda handler.\r\n\r\nI&#39;m getting the following error:\r\n[enter image description here](https://i.stack.imgur.com/v86wn.png)\r\n\r\n`Class handler.GameSessionLambda has no public zero-argument constructor: java.lang.Exception\r\njava.lang.Exception: Class handler.GameSessionLambda has no public zero-argument constructor\r\nCaused by: java.lang.NoSuchMethodException: handler.GameSessionLambda.\\&lt;init\\&gt;()\r\nat java.base/java.lang.Class.getConstructor0(Unknown Source)\r\nat java.base/java.lang.Class.getConstructor(Unknown Source)`\r\n\r\nInjectedConstants:\r\n[enter image description here](https://i.stack.imgur.com/2kggn.png)\r\nModule Class:\r\n[enter image description here](https://i.stack.imgur.com/V63Pb.png)\r\nComponent interface:\r\n[enter image description here](https://i.stack.imgur.com/ZwnPp.png)\r\nThe Handler:\r\n[enter image description here](https://i.stack.imgur.com/Tdmv8.png)\r\n\r\nIts working without dagger2, but since I want my handler to hold more logic and services I wanted to add dependency injection to follow best practices and save little runtime.By the way if I included an empty constructor then the lambda ignores the other constructor which results in null for the injected objects.","title":"Class handler.GameSessionLambda has no public zero-argument constructor: java.lang.Exception","body":"<p>I'm working with Lambda in Java and added Dagger2. However I'm having problem injecting objects to my lambda handler.</p>\n<p>I'm getting the following error:\n<a href=\"https://i.stack.imgur.com/v86wn.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><code>Class handler.GameSessionLambda has no public zero-argument constructor: java.lang.Exception java.lang.Exception: Class handler.GameSessionLambda has no public zero-argument constructor Caused by: java.lang.NoSuchMethodException: handler.GameSessionLambda.\\&lt;init\\&gt;() at java.base/java.lang.Class.getConstructor0(Unknown Source) at java.base/java.lang.Class.getConstructor(Unknown Source)</code></p>\n<p>InjectedConstants:\n<a href=\"https://i.stack.imgur.com/2kggn.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nModule Class:\n<a href=\"https://i.stack.imgur.com/V63Pb.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nComponent interface:\n<a href=\"https://i.stack.imgur.com/ZwnPp.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThe Handler:\n<a href=\"https://i.stack.imgur.com/Tdmv8.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Its working without dagger2, but since I want my handler to hold more logic and services I wanted to add dependency injection to follow best practices and save little runtime.By the way if I included an empty constructor then the lambda ignores the other constructor which results in null for the injected objects.</p>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"score":0,"creation_date":1683309094,"post_id":76184742,"comment_id":134352513,"body_markdown":"manifest {\n        attributes &#39;Main-Class&#39;: &#39;com.example.fileutil.FilePrepareApplication&#39;\n    }\nThen in your build. gradle add as below:\nmainClassName = &#39;FilePrepareApplication&#39;\nAlso, verify whether the jar was built with the main class and file name is correct.\nAlso check the path from where you are running it.\nPls try as above.","body":"manifest {         attributes &#39;Main-Class&#39;: &#39;com.example.fileutil.FilePrepareApplication&#39;     } Then in your build. gradle add as below: mainClassName = &#39;FilePrepareApplication&#39; Also, verify whether the jar was built with the main class and file name is correct. Also check the path from where you are running it. Pls try as above."},{"owner":{"account_id":12545326,"reputation":1014,"user_id":9128863,"display_name":"Jelly"},"score":0,"creation_date":1683310038,"post_id":76184742,"comment_id":134352710,"body_markdown":"I tried this. But with the same result","body":"I tried this. But with the same result"},{"owner":{"account_id":12545326,"reputation":1014,"user_id":9128863,"display_name":"Jelly"},"score":0,"creation_date":1683310152,"post_id":76184742,"comment_id":134352751,"body_markdown":"&quot;from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }&quot;    cause the problem with main class.  But, without it the problem with &quot;org/bouncycastle/util/Selector&quot; appears.   When I build and run app without Bouncy Castle dependencies, everything is ok","body":"&quot;from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }&quot;    cause the problem with main class.  But, without it the problem with &quot;org/bouncycastle/util/Selector&quot; appears.   When I build and run app without Bouncy Castle dependencies, everything is ok"}],"owner":{"account_id":12545326,"reputation":1014,"user_id":9128863,"display_name":"Jelly"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683309203,"creation_date":1683308735,"question_id":76184742,"body_markdown":"I&#39;m trying to run jar-file, builded by gradle with Bouncy Castle library dependencies.\r\n\r\n    \r\n\r\n    jar {\r\n         manifest {\r\n                   attributes&#39;Implementation-Version&#39;: &#39;0.0.1-SNAPSHOT&#39;,\r\n                          &#39;Main-Class&#39;: &#39;com.example.fileutil.FilePrepareApplication&#39;\r\n                  }\r\n     }\r\n\r\n      dependencies {\r\n            implementation &#39;org.bouncycastle:bcpkix-jdk15on:1.58&#39;\r\n            implementation &#39;org.bouncycastle:bcprov-jdk15on:1.58&#39;\r\n      }\r\n\r\nAnd receive error:\r\n\r\n    java.lang.NoClassDefFoundError: org/bouncycastle/util/Selector\r\n    Caused by: java.lang.ClassNotFoundException: org.bouncycastle.util.Selector\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\r\nAs I see, one of libs (bcprov-jdk15on) contains org/bouncycastle/util/Selector in its classPath, and other one (bcpkix-jdk15on) does not contains.  \r\n\r\nAs I suppose, this is caused by the fact that not all dependencies has been involved to jar.\r\nTrying to fix this, I update jar declaration with:\r\n\r\n     jar {\r\n          duplicatesStrategy = DuplicatesStrategy.INCLUDE\r\n          project.configurations.getByName(&quot;implementation&quot;).setCanBeResolved(true)\r\n          manifest {\r\n               attributes&#39;Implementation-Version&#39;: &#39;0.0.1-SNAPSHOT&#39;,\r\n                       &#39;Main-Class&#39;: &#39;com.example.fileutil.FilePrepareApplication&#39;\r\n          }\r\n\r\n          from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }\r\n      }\r\n   \r\n\r\nBut, when I run this jar, the error is:\r\n\r\n      Could not find or load main class com.example.fileutil.FilePrepareApplication\r\n      Caused by: java.lang.ClassNotFoundException: com.example.fileutil.FilePrepareApplication\r\n\r\nWhat am I doing wrong?      \r\n      \r\n\r\n\r\n\r\n","title":"Gradle build: NoClassDefFoundError: org/bouncycastle/util/Selector","body":"<p>I'm trying to run jar-file, builded by gradle with Bouncy Castle library dependencies.</p>\n<pre><code>jar {\n     manifest {\n               attributes'Implementation-Version': '0.0.1-SNAPSHOT',\n                      'Main-Class': 'com.example.fileutil.FilePrepareApplication'\n              }\n }\n\n  dependencies {\n        implementation 'org.bouncycastle:bcpkix-jdk15on:1.58'\n        implementation 'org.bouncycastle:bcprov-jdk15on:1.58'\n  }\n</code></pre>\n<p>And receive error:</p>\n<pre><code>java.lang.NoClassDefFoundError: org/bouncycastle/util/Selector\nCaused by: java.lang.ClassNotFoundException: org.bouncycastle.util.Selector\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n</code></pre>\n<p>As I see, one of libs (bcprov-jdk15on) contains org/bouncycastle/util/Selector in its classPath, and other one (bcpkix-jdk15on) does not contains.</p>\n<p>As I suppose, this is caused by the fact that not all dependencies has been involved to jar.\nTrying to fix this, I update jar declaration with:</p>\n<pre><code> jar {\n      duplicatesStrategy = DuplicatesStrategy.INCLUDE\n      project.configurations.getByName(&quot;implementation&quot;).setCanBeResolved(true)\n      manifest {\n           attributes'Implementation-Version': '0.0.1-SNAPSHOT',\n                   'Main-Class': 'com.example.fileutil.FilePrepareApplication'\n      }\n\n      from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }\n  }\n</code></pre>\n<p>But, when I run this jar, the error is:</p>\n<pre><code>  Could not find or load main class com.example.fileutil.FilePrepareApplication\n  Caused by: java.lang.ClassNotFoundException: com.example.fileutil.FilePrepareApplication\n</code></pre>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","syntax","null"],"comments":[{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":3,"creation_date":1291827818,"post_id":4390141,"comment_id":4783823,"body_markdown":"Could we have a link to the article at least?","body":"Could we have a link to the article at least?"},{"owner":{"account_id":230362,"reputation":28330,"user_id":493928,"accept_rate":62,"display_name":"khachik"},"score":1,"creation_date":1291827900,"post_id":4390141,"comment_id":4783845,"body_markdown":"And the source of the snippet?","body":"And the source of the snippet?"},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":5,"creation_date":1291827930,"post_id":4390141,"comment_id":4783848,"body_markdown":"The article is wrong. http://infoworld.com/print/145292 I believe a Project Coin submission was submitted for it. But it wasn&#39;t selected (for reasons mentioned in the article - if you want to do that sort of thing, use C# or something), and certainly isn&#39;t in the current version of the Java language.","body":"The article is wrong. <a href=\"http://infoworld.com/print/145292\" rel=\"nofollow noreferrer\">infoworld.com/print/145292</a> I believe a Project Coin submission was submitted for it. But it wasn&#39;t selected (for reasons mentioned in the article - if you want to do that sort of thing, use C# or something), and certainly isn&#39;t in the current version of the Java language."},{"owner":{"account_id":87779,"reputation":33895,"user_id":243245,"accept_rate":70,"display_name":"Rup"},"score":4,"creation_date":1291828035,"post_id":4390141,"comment_id":4783874,"body_markdown":"That&#39;s not the same as the C# ?? operator: ?? coalesces nulls, i.e. `A ?? B == (A != null) ? A : B`. This appears to evaluate a property on an object if the object reference is not null, i.e. `A?.B == (A != null) ? A.B : null`.","body":"That&#39;s not the same as the C# ?? operator: ?? coalesces nulls, i.e. <code>A ?? B == (A != null) ? A : B</code>. This appears to evaluate a property on an object if the object reference is not null, i.e. <code>A?.B == (A != null) ? A.B : null</code>."},{"owner":{"account_id":94218,"reputation":27823,"user_id":257356,"accept_rate":59,"display_name":"SyntaxT3rr0r"},"score":1,"creation_date":1291828102,"post_id":4390141,"comment_id":4783889,"body_markdown":"@Erty: as a huge user of the @NotNull annotation, which is basically everywhere in the code I write, I don&#39;t know very well anymore what NPEs are (except when using badly desing APIs).  Yet I find this &quot;shortcut notation&quot; cute and interesting.  Of course the article is right when it states: *After all, it doesn&#39;t eliminate the root of the problem: the proliferation of null values due to fast and loose programming.* &#39;null&#39; doesn&#39;t exist at the OOA/OOD level. It&#39;s another Java-idiosynchratic nonsense that can mostly be worked around. To me it&#39;s *@NotNull* everywhere.","body":"@Erty: as a huge user of the @NotNull annotation, which is basically everywhere in the code I write, I don&#39;t know very well anymore what NPEs are (except when using badly desing APIs).  Yet I find this &quot;shortcut notation&quot; cute and interesting.  Of course the article is right when it states: <i>After all, it doesn&#39;t eliminate the root of the problem: the proliferation of null values due to fast and loose programming.</i> &#39;null&#39; doesn&#39;t exist at the OOA/OOD level. It&#39;s another Java-idiosynchratic nonsense that can mostly be worked around. To me it&#39;s <i>@NotNull</i> everywhere."},{"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1291828196,"post_id":4390141,"comment_id":4783918,"body_markdown":"Jon Skeet was quick to retract his answer...I wonder why! hmmmm....","body":"Jon Skeet was quick to retract his answer...I wonder why! hmmmm...."},{"owner":{"account_id":156983,"reputation":4517,"user_id":374601,"accept_rate":91,"display_name":"Erty Seidohl"},"score":0,"creation_date":1291828224,"post_id":4390141,"comment_id":4783924,"body_markdown":"@Karl, khachik: I linked to the article. Thanks for the reminder.","body":"@Karl, khachik: I linked to the article. Thanks for the reminder."},{"owner":{"account_id":56256,"reputation":53237,"user_id":168493,"accept_rate":92,"display_name":"Marcus Adams"},"score":0,"creation_date":1291828825,"post_id":4390141,"comment_id":4784073,"body_markdown":"PHP added something like this.","body":"PHP added something like this."},{"owner":{"account_id":6664,"reputation":85927,"user_id":11296,"display_name":"Bert F"},"score":0,"creation_date":1291922452,"post_id":4390141,"comment_id":4799494,"body_markdown":"+1 @Webinator for @NotNull annotation (lol - is there a user NotNull? - they must hate (or love!) the NotNull annotation triggering their inbox).","body":"+1 @Webinator for @NotNull annotation (lol - is there a user NotNull? - they must hate (or love!) the NotNull annotation triggering their inbox)."},{"owner":{"account_id":156734,"reputation":26707,"user_id":374198,"accept_rate":62,"display_name":"Josh M."},"score":0,"creation_date":1525869756,"post_id":4390141,"comment_id":87524601,"body_markdown":"@Rup No, in C#, `??` is a null coalescing operator where as `?` (the &quot;ternary conditional operator&quot;) provides quick null checking inline, as OP indicates.","body":"@Rup No, in C#, <code>??</code> is a null coalescing operator where as <code>?</code> (the &quot;ternary conditional operator&quot;) provides quick null checking inline, as OP indicates."},{"owner":{"account_id":87779,"reputation":33895,"user_id":243245,"accept_rate":70,"display_name":"Rup"},"score":0,"creation_date":1525870014,"post_id":4390141,"comment_id":87524800,"body_markdown":"@JoshM. OP is asking about `?.` which is the the [null conditional operator](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators), not just `?`, and it didn&#39;t, AFAIK, exist in C# when I wrote that back then.","body":"@JoshM. OP is asking about <code>?.</code> which is the the <a href=\"https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators\" rel=\"nofollow noreferrer\">null conditional operator</a>, not just <code>?</code>, and it didn&#39;t, AFAIK, exist in C# when I wrote that back then."},{"owner":{"account_id":49931,"reputation":25463,"user_id":148844,"accept_rate":67,"display_name":"Chloe"},"score":0,"creation_date":1538345353,"post_id":4390141,"comment_id":92100151,"body_markdown":"This is one reason I love Ruby. `deep&amp;.nested&amp;.value` and `value = var1Null || thenVar2`. http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/","body":"This is one reason I love Ruby. <code>deep&amp;.nested&amp;.value</code> and <code>value = var1Null || thenVar2</code>. <a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\">mitrev.net/ruby/2015/11/13/the-operator-in-ruby</a>"}],"answers":[{"comments":[{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":10,"creation_date":1291827943,"post_id":4390155,"comment_id":4783852,"body_markdown":"Why the downvote? This answer is 100% correct as far as I know... if you know something different, please say so.","body":"Why the downvote? This answer is 100% correct as far as I know... if you know something different, please say so."},{"owner":{"account_id":94218,"reputation":27823,"user_id":257356,"accept_rate":59,"display_name":"SyntaxT3rr0r"},"score":2,"creation_date":1291828300,"post_id":4390155,"comment_id":4783936,"body_markdown":"but obviously at one point it has been submitted (see Tom Hawtin&#39;s comments) and will maybe make it into the language.  So a *&quot;This syntax does not exist **yet** in Java&quot;* would be more appropriate.","body":"but obviously at one point it has been submitted (see Tom Hawtin&#39;s comments) and will maybe make it into the language.  So a <i>&quot;This syntax does not exist <b>yet</b> in Java&quot;</i> would be more appropriate."},{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":6,"creation_date":1291828353,"post_id":4390155,"comment_id":4783945,"body_markdown":"@Webinator: It&#39;s not going to be in Java 7 or 8, and there are no other &quot;upcoming versions&quot; at this time. I also find it kind of unlikely that it will make it in, since it encourages rather bad practices. I also don&#39;t think &quot;yet&quot; is necessary, since &quot;does not exist in Java&quot; is not the same as &quot;will never exist in Java&quot;.","body":"@Webinator: It&#39;s not going to be in Java 7 or 8, and there are no other &quot;upcoming versions&quot; at this time. I also find it kind of unlikely that it will make it in, since it encourages rather bad practices. I also don&#39;t think &quot;yet&quot; is necessary, since &quot;does not exist in Java&quot; is not the same as &quot;will never exist in Java&quot;."},{"owner":{"account_id":56534,"reputation":85043,"user_id":169346,"display_name":"JeremyP"},"score":9,"creation_date":1291828583,"post_id":4390155,"comment_id":4784010,"body_markdown":"@Webinator: several posters have commented that a proposal was submitted but rejected.  Thus the answer is 100% accurate.  Upvoting to counteract the down vote.","body":"@Webinator: several posters have commented that a proposal was submitted but rejected.  Thus the answer is 100% accurate.  Upvoting to counteract the down vote."},{"owner":{"account_id":6111237,"reputation":18715,"user_id":4767498,"accept_rate":87,"display_name":"M.kazem Akhgary"},"score":3,"creation_date":1544783076,"post_id":4390155,"comment_id":94406787,"body_markdown":"@ColinD _bad practice_ is when you give up on this ugly code and decide to use `Optional` and `map` stuff. we are not hiding the problem if value is nullable which means it is expected to be null sometimes and you have to handle that. sometimes default values are perfectly reasonable and its not a bad practice.","body":"@ColinD <i>bad practice</i> is when you give up on this ugly code and decide to use <code>Optional</code> and <code>map</code> stuff. we are not hiding the problem if value is nullable which means it is expected to be null sometimes and you have to handle that. sometimes default values are perfectly reasonable and its not a bad practice."}],"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"comment_count":5,"down_vote_count":3,"up_vote_count":81,"is_accepted":false,"score":78,"last_activity_date":1291828141,"creation_date":1291827809,"answer_id":4390155,"question_id":4390141,"body_markdown":"This syntax does not exist in Java, nor is it slated to be included in any of the upcoming versions that I know of.","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>This syntax does not exist in Java, nor is it slated to be included in any of the upcoming versions that I know of.</p>\n"},{"comments":[{"owner":{"account_id":156983,"reputation":4517,"user_id":374601,"accept_rate":91,"display_name":"Erty Seidohl"},"score":2,"creation_date":1291828072,"post_id":4390165,"comment_id":4783882,"body_markdown":"So the article was wrong - the syntax doesn&#39;t exist in native java. Hmm.","body":"So the article was wrong - the syntax doesn&#39;t exist in native java. Hmm."},{"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"score":0,"creation_date":1464775540,"post_id":4390165,"comment_id":62618240,"body_markdown":"but the link is broken","body":"but the link is broken"}],"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1510264739,"creation_date":1291827881,"answer_id":4390165,"question_id":4390141,"body_markdown":"That&#39;s actually [Groovy&#39;s safe-dereference operator][1].  You can&#39;t use it in pure Java (sadly), so that post is simply wrong (or more likely slightly misleading, if it&#39;s claiming Groovy to be the &quot;latest version of Java&quot;).\r\n\r\n\r\n  [1]: http://docs.groovy-lang.org/docs/next/html/documentation/design-pattern-in-groovy.html#_null_object_pattern","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>That's actually <a href=\"http://docs.groovy-lang.org/docs/next/html/documentation/design-pattern-in-groovy.html#_null_object_pattern\" rel=\"nofollow noreferrer\">Groovy's safe-dereference operator</a>.  You can't use it in pure Java (sadly), so that post is simply wrong (or more likely slightly misleading, if it's claiming Groovy to be the \"latest version of Java\").</p>\n"},{"tags":[],"owner":{"account_id":27166,"reputation":19089,"user_id":71399,"accept_rate":65,"display_name":"pauljwilliams"},"comment_count":0,"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1291827993,"creation_date":1291827993,"answer_id":4390187,"question_id":4390141,"body_markdown":"There was a proposal for it in Java 7, but it was rejected:\r\n\r\nhttp://tech.puredanger.com/java7/#null","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>There was a proposal for it in Java 7, but it was rejected:</p>\n\n<p><a href=\"http://tech.puredanger.com/java7/#null\">http://tech.puredanger.com/java7/#null</a></p>\n"},{"tags":[],"owner":{"account_id":11708,"reputation":21399,"user_id":22704,"display_name":"Darron"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1510263852,"creation_date":1291828076,"answer_id":4390200,"question_id":4390141,"body_markdown":"See: https://blogs.oracle.com/darcy/project-coin:-the-final-five-or-so (specifically &quot;Elvis and other null safe operators&quot;).\r\n\r\nThe result is that this feature was considered for Java 7, but was not included.\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>See: <a href=\"https://blogs.oracle.com/darcy/project-coin:-the-final-five-or-so\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/darcy/project-coin:-the-final-five-or-so</a> (specifically \"Elvis and other null safe operators\").</p>\n\n<p>The result is that this feature was considered for Java 7, but was not included.</p>\n"},{"comments":[{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":5,"creation_date":1291828378,"post_id":4390213,"comment_id":4783950,"body_markdown":"In java (where there&#39;s no auto-coercion to null) a shorthand for `x!=null ? x : y`","body":"In java (where there&#39;s no auto-coercion to null) a shorthand for <code>x!=null ? x : y</code>"},{"owner":{"account_id":64432,"reputation":65199,"user_id":190201,"accept_rate":83,"display_name":"ataylor"},"score":0,"creation_date":1291828623,"post_id":4390213,"comment_id":4784021,"body_markdown":"@Michael Borgwardt: good point, I was thinking of the groovy semantics.","body":"@Michael Borgwardt: good point, I was thinking of the groovy semantics."},{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1291829222,"post_id":4390213,"comment_id":4784156,"body_markdown":"@Michael I figured it needed to be turned, but I still don&#39;t see it. How does a `:` work as a mouth? Is `?` supposed to represent an excessive volume of hair?","body":"@Michael I figured it needed to be turned, but I still don&#39;t see it. How does a <code>:</code> work as a mouth? Is <code>?</code> supposed to represent an excessive volume of hair?"},{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":61,"creation_date":1291829641,"post_id":4390213,"comment_id":4784261,"body_markdown":"`?` is Elvis Presley&#39;s signature quiff; the `:` just represents a pair of eyes as usual.  Perhaps `?:-o` is more evocative...","body":"<code>?</code> is Elvis Presley&#39;s signature quiff; the <code>:</code> just represents a pair of eyes as usual.  Perhaps <code>?:-o</code> is more evocative..."},{"owner":{"account_id":1338886,"reputation":5860,"user_id":1280997,"accept_rate":68,"display_name":"azz"},"score":4,"creation_date":1366016143,"post_id":4390213,"comment_id":22834952,"body_markdown":"`?:0` Should be a &quot;Not null, nor 0&quot; operator. Make it so.","body":"<code>?:0</code> Should be a &quot;Not null, nor 0&quot; operator. Make it so."},{"owner":{"account_id":374564,"reputation":4903,"user_id":724835,"accept_rate":100,"display_name":"JustinKSU"},"score":3,"creation_date":1413553031,"post_id":4390213,"comment_id":41497431,"body_markdown":"It was actually a mistake to refer to the proposal as an Elvis operator.  Explanation at http://mail.openjdk.java.net/pipermail/coin-dev/2009-July/002089.html  &quot;Null-safe dereferencing&quot; is a better term to use.","body":"It was actually a mistake to refer to the proposal as an Elvis operator.  Explanation at <a href=\"http://mail.openjdk.java.net/pipermail/coin-dev/2009-July/002089.html\" rel=\"nofollow noreferrer\">mail.openjdk.java.net/pipermail/coin-dev/2009-July/002089.ht&zwnj;&#8203;ml</a>  &quot;Null-safe dereferencing&quot; is a better term to use."}],"tags":[],"owner":{"account_id":64432,"reputation":65199,"user_id":190201,"accept_rate":83,"display_name":"ataylor"},"comment_count":6,"down_vote_count":0,"up_vote_count":99,"is_accepted":true,"score":99,"last_activity_date":1452196961,"creation_date":1291828115,"answer_id":4390213,"question_id":4390141,"body_markdown":"The original idea comes from groovy.  It was proposed for Java 7 as part of Project Coin: https://wiki.openjdk.java.net/display/Coin/2009+Proposals+TOC (Elvis and Other Null-Safe Operators), but hasn&#39;t been accepted yet.\r\n\r\nThe related Elvis operator ?: was proposed to make `x ?: y` shorthand for `x != null ? x : y`, especially useful when x is a complex expression.","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>The original idea comes from groovy.  It was proposed for Java 7 as part of Project Coin: <a href=\"https://wiki.openjdk.java.net/display/Coin/2009+Proposals+TOC\" rel=\"noreferrer\">https://wiki.openjdk.java.net/display/Coin/2009+Proposals+TOC</a> (Elvis and Other Null-Safe Operators), but hasn't been accepted yet.</p>\n\n<p>The related Elvis operator ?: was proposed to make <code>x ?: y</code> shorthand for <code>x != null ? x : y</code>, especially useful when x is a complex expression.</p>\n"},{"comments":[{"owner":{"account_id":348964,"reputation":1857,"user_id":683965,"accept_rate":75,"display_name":"subsub"},"score":1,"creation_date":1359992131,"post_id":4390242,"comment_id":20540040,"body_markdown":"&quot;what would the runtime replace it with?&quot; ... reading the question might help :-P It would replace it with null. In general, the idea seems to be that person?.getName evaluates to null if person is null or to person.getName if not. So it&#39;s pretty much like replacing &quot;&quot; with null in all your examples.","body":"&quot;what would the runtime replace it with?&quot; ... reading the question might help :-P It would replace it with null. In general, the idea seems to be that person?.getName evaluates to null if person is null or to person.getName if not. So it&#39;s pretty much like replacing &quot;&quot; with null in all your examples."},{"owner":{"account_id":1827467,"reputation":4043,"user_id":1659790,"accept_rate":73,"display_name":"Jimmy T."},"score":1,"creation_date":1387063962,"post_id":4390242,"comment_id":30803655,"body_markdown":"A NullReferenceException could also been thrown in `getName()` or `getGivenName()` which you won&#39;t know if you simply return an empty string for all occurrences.","body":"A NullReferenceException could also been thrown in <code>getName()</code> or <code>getGivenName()</code> which you won&#39;t know if you simply return an empty string for all occurrences."},{"owner":{"account_id":5842260,"reputation":741,"user_id":4603464,"accept_rate":75,"display_name":"Tuupertunut"},"score":1,"creation_date":1490273462,"post_id":4390242,"comment_id":73045026,"body_markdown":"In Java it is NullPointerException.","body":"In Java it is NullPointerException."},{"owner":{"account_id":10378528,"reputation":900,"user_id":7654030,"accept_rate":50,"display_name":"Austin_Anderson"},"score":0,"creation_date":1505324516,"post_id":4390242,"comment_id":79370514,"body_markdown":"in C#, `person?.getName()?.getGivenName() ?? &quot;&quot;` is the equivalent of your first example, with the exception that if `getGivenName()` returns null, it will still give `&quot;&quot;`","body":"in C#, <code>person?.getName()?.getGivenName() ?? &quot;&quot;</code> is the equivalent of your first example, with the exception that if <code>getGivenName()</code> returns null, it will still give <code>&quot;&quot;</code>"}],"tags":[],"owner":{"account_id":194186,"reputation":70518,"user_id":436376,"accept_rate":94,"display_name":"KeithS"},"comment_count":4,"down_vote_count":4,"up_vote_count":5,"is_accepted":false,"score":1,"last_activity_date":1293044235,"creation_date":1291828298,"answer_id":4390242,"question_id":4390141,"body_markdown":"I&#39;m not sure this would even work; if, say, the person reference was null, what would the runtime replace it with? A new Person? That would require the Person to have some default initialization that you&#39;d expect in this case. You may avoid null reference exceptions but you&#39;d still get unpredictable behavior if you didn&#39;t plan for these types of setups.\r\n\r\nThe ?? operator in C# might be best termed the &quot;coalesce&quot; operator; you can chain several expressions and it will return the first that isn&#39;t null. Unfortunately, Java doesn&#39;t have it. I think the best you could do is use the ternary operator to perform null checks and evaluate an alternative to the entire expression if any member in the chain is null:\r\n\r\n    return person == null ? &quot;&quot; \r\n        : person.getName() == null ? &quot;&quot; \r\n            : person.getName().getGivenName();\r\n\r\nYou could also use try-catch:\r\n\r\n    try\r\n    {\r\n       return person.getName().getGivenName();\r\n    }\r\n    catch(NullReferenceException)\r\n    {\r\n       return &quot;&quot;;\r\n    }","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>I'm not sure this would even work; if, say, the person reference was null, what would the runtime replace it with? A new Person? That would require the Person to have some default initialization that you'd expect in this case. You may avoid null reference exceptions but you'd still get unpredictable behavior if you didn't plan for these types of setups.</p>\n\n<p>The ?? operator in C# might be best termed the \"coalesce\" operator; you can chain several expressions and it will return the first that isn't null. Unfortunately, Java doesn't have it. I think the best you could do is use the ternary operator to perform null checks and evaluate an alternative to the entire expression if any member in the chain is null:</p>\n\n<pre><code>return person == null ? \"\" \n    : person.getName() == null ? \"\" \n        : person.getName().getGivenName();\n</code></pre>\n\n<p>You could also use try-catch:</p>\n\n<pre><code>try\n{\n   return person.getName().getGivenName();\n}\ncatch(NullReferenceException)\n{\n   return \"\";\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11708,"reputation":21399,"user_id":22704,"display_name":"Darron"},"score":8,"creation_date":1291832707,"post_id":4390605,"comment_id":4784920,"body_markdown":"The problem with this style is that the NullPointerException may not have come from where you expected it to.  And thus it may hide a real bug.","body":"The problem with this style is that the NullPointerException may not have come from where you expected it to.  And thus it may hide a real bug."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1291840183,"post_id":4390605,"comment_id":4786362,"body_markdown":"@Darron, Can you give an example of a getter you have written which could throw an NPE and how you would want to handle it differently?","body":"@Darron, Can you give an example of a getter you have written which could throw an NPE and how you would want to handle it differently?"},{"owner":{"account_id":8861,"reputation":2179,"user_id":16138,"accept_rate":100,"display_name":"Mike Miller"},"score":2,"creation_date":1291922846,"post_id":4390605,"comment_id":4799577,"body_markdown":"you run it into a separate variable and test it with an if as normal. The idea behind this operator is to eliminate that uglyness. Darron is right, your solution might hide and throw away exceptions you want to throw. Such as if `getName()` threw an exception internally that you do not want to throw away.","body":"you run it into a separate variable and test it with an if as normal. The idea behind this operator is to eliminate that uglyness. Darron is right, your solution might hide and throw away exceptions you want to throw. Such as if <code>getName()</code> threw an exception internally that you do not want to throw away."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1291973795,"post_id":4390605,"comment_id":4806114,"body_markdown":"Not any exception, it would have to be a NullPointerException.  You are trying to protect yourself from a situation you haven&#39;t begun to explain how it might occur in a real application.","body":"Not any exception, it would have to be a NullPointerException.  You are trying to protect yourself from a situation you haven&#39;t begun to explain how it might occur in a real application."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":1,"creation_date":1397654129,"post_id":4390605,"comment_id":35327072,"body_markdown":"In a real application `Person` could be a proxy accessing a DB or some non-heap memory and there could be a bug somewhere... Not very realistic, but, Peter, I&#39;d bet you&#39;ve never written a piece of code like above.","body":"In a real application <code>Person</code> could be a proxy accessing a DB or some non-heap memory and there could be a bug somewhere... Not very realistic, but, Peter, I&#39;d bet you&#39;ve never written a piece of code like above."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":5,"down_vote_count":10,"up_vote_count":5,"is_accepted":false,"score":-5,"last_activity_date":1291830499,"creation_date":1291830499,"answer_id":4390605,"question_id":4390141,"body_markdown":"If this is not a performance issue for you, you can write\r\n\r\n    public String getFirstName(Person person) {\r\n      try {\r\n         return person.getName().getGivenName();\r\n      } catch (NullPointerException ignored) {\r\n         return null;\r\n      }\r\n    } ","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>If this is not a performance issue for you, you can write</p>\n\n<pre><code>public String getFirstName(Person person) {\n  try {\n     return person.getName().getGivenName();\n  } catch (NullPointerException ignored) {\n     return null;\n  }\n} \n</code></pre>\n"},{"comments":[{"owner":{"account_id":308177,"reputation":1911,"user_id":619895,"accept_rate":85,"display_name":"ggb667"},"score":0,"creation_date":1401990566,"post_id":22544757,"comment_id":37111448,"body_markdown":"I will have to try this.  SI have serious doubts about this whole &quot;Optional&quot; business.  Seems like a nasty hack.","body":"I will have to try this.  SI have serious doubts about this whole &quot;Optional&quot; business.  Seems like a nasty hack."},{"owner":{"account_id":374564,"reputation":4903,"user_id":724835,"accept_rate":100,"display_name":"JustinKSU"},"score":4,"creation_date":1413552161,"post_id":22544757,"comment_id":41496926,"body_markdown":"The whole purpose of the Elvis Operator proposal was to do this in one line.  This approach is no better than the &quot;if(!=null) approach above.  In fact I would argue it is worse as it is not a straight forward.  Additionally you should avoid throwing and catching errors due to the overhead.","body":"The whole purpose of the Elvis Operator proposal was to do this in one line.  This approach is no better than the &quot;if(!=null) approach above.  In fact I would argue it is worse as it is not a straight forward.  Additionally you should avoid throwing and catching errors due to the overhead."},{"owner":{"account_id":6720924,"reputation":5542,"user_id":5180989,"display_name":"Helder Pereira"},"score":2,"creation_date":1438642248,"post_id":22544757,"comment_id":51523585,"body_markdown":"As @Darron said in another answer, the same applies here: &quot;The problem with this style is that the NullPointerException may not have come from where you expected it to. And thus it may hide a real bug.&quot;","body":"As @Darron said in another answer, the same applies here: &quot;The problem with this style is that the NullPointerException may not have come from where you expected it to. And thus it may hide a real bug.&quot;"}],"tags":[],"owner":{"account_id":311423,"reputation":35,"user_id":3443865,"display_name":"H-MAN"},"comment_count":3,"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1395348575,"creation_date":1395348575,"answer_id":22544757,"question_id":4390141,"body_markdown":"There you have it, null-safe invocation in Java 8:\r\n\r\n    public void someMethod() {\r\n        String userName = nullIfAbsent(new Order(), t -&gt; t.getAccount().getUser()\r\n            .getName());\r\n    }\r\n\r\n    static &lt;T, R&gt; R nullIfAbsent(T t, Function&lt;T, R&gt; funct) {\r\n        try {\r\n            return funct.apply(t);\r\n        } catch (NullPointerException e) {\r\n            return null;\r\n        }\r\n    }\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>There you have it, null-safe invocation in Java 8:</p>\n\n<pre><code>public void someMethod() {\n    String userName = nullIfAbsent(new Order(), t -&gt; t.getAccount().getUser()\n        .getName());\n}\n\nstatic &lt;T, R&gt; R nullIfAbsent(T t, Function&lt;T, R&gt; funct) {\n    try {\n        return funct.apply(t);\n    } catch (NullPointerException e) {\n        return null;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3226645,"reputation":5666,"user_id":2722870,"accept_rate":65,"display_name":"ThanosFisherman"},"score":0,"creation_date":1497927477,"post_id":31772710,"comment_id":76271737,"body_markdown":"I like your first solution better. How would you improve your `Pipe` class in order to adapt an `orElse` functionality so that I could pass an arbitrary non-null object inside the `orElse` method?","body":"I like your first solution better. How would you improve your <code>Pipe</code> class in order to adapt an <code>orElse</code> functionality so that I could pass an arbitrary non-null object inside the <code>orElse</code> method?"},{"owner":{"account_id":6720924,"reputation":5542,"user_id":5180989,"display_name":"Helder Pereira"},"score":0,"creation_date":1497941908,"post_id":31772710,"comment_id":76276920,"body_markdown":"@ThanosFisherman I&#39;ve added the `orElse` method to `Pipe` class.","body":"@ThanosFisherman I&#39;ve added the <code>orElse</code> method to <code>Pipe</code> class."},{"owner":{"account_id":140044,"reputation":2757,"user_id":346057,"accept_rate":33,"display_name":"razor"},"score":2,"creation_date":1638377820,"post_id":31772710,"comment_id":124073645,"body_markdown":"this is overusing.... and discouraged.","body":"this is overusing.... and discouraged."}],"tags":[],"owner":{"account_id":6720924,"reputation":5542,"user_id":5180989,"display_name":"Helder Pereira"},"comment_count":3,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1665939502,"creation_date":1438524710,"answer_id":31772710,"question_id":4390141,"body_markdown":"**[EDIT]**\r\n\r\nUpon further thought, I figured out that it is actually possible to achieve the same only using standard Java 8 classes:\r\n\r\n    public String getFirstName(Person person) {\r\n        return Optional.ofNullable(person)\r\n            .map(Person::getName)\r\n            .map(Name::getGivenName)\r\n            .orElse(null);\r\n    }\r\n\r\nIn this case, it is even possible to choose a default value (like `&quot;&lt;no first name&gt;&quot;`) instead of `null` by passing it as parameter of `orElse`.\r\n\r\n----------\r\n\r\n**[Original Answer]**\r\n\r\nOne way to workaround the lack of &quot;?&quot; operator using Java 8 without the overhead of try-catch (which could also hide a `NullPointerException` originated elsewhere, as mentioned) is to create a class to &quot;pipe&quot; methods in a Java-8-Stream style.\r\n\r\n    public class Pipe&lt;T&gt; {\r\n        private T object;\r\n    \r\n        private Pipe(T t) {\r\n            object = t;\r\n        }\r\n    \r\n        public static&lt;T&gt; Pipe&lt;T&gt; of(T t) {\r\n            return new Pipe&lt;&gt;(t);\r\n        }\r\n    \r\n        public &lt;S&gt; Pipe&lt;S&gt; after(Function&lt;? super T, ? extends S&gt; plumber) {\r\n            return new Pipe&lt;&gt;(object == null ? null : plumber.apply(object));\r\n        }\r\n    \r\n        public T get() {\r\n            return object;\r\n        }\r\n\r\n        public T orElse(T other) {\r\n            return object == null ? other : object;\r\n        }\r\n    }\r\n\r\nThen, the given example would become:\r\n\r\n    public String getFirstName(Person person) {\r\n        return Pipe.of(person)\r\n            .after(Person::getName)\r\n            .after(Name::getGivenName)\r\n            .get();\r\n    }\r\n\r\n\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p><strong>[EDIT]</strong></p>\n<p>Upon further thought, I figured out that it is actually possible to achieve the same only using standard Java 8 classes:</p>\n<pre><code>public String getFirstName(Person person) {\n    return Optional.ofNullable(person)\n        .map(Person::getName)\n        .map(Name::getGivenName)\n        .orElse(null);\n}\n</code></pre>\n<p>In this case, it is even possible to choose a default value (like <code>&quot;&lt;no first name&gt;&quot;</code>) instead of <code>null</code> by passing it as parameter of <code>orElse</code>.</p>\n<hr />\n<p><strong>[Original Answer]</strong></p>\n<p>One way to workaround the lack of &quot;?&quot; operator using Java 8 without the overhead of try-catch (which could also hide a <code>NullPointerException</code> originated elsewhere, as mentioned) is to create a class to &quot;pipe&quot; methods in a Java-8-Stream style.</p>\n<pre><code>public class Pipe&lt;T&gt; {\n    private T object;\n\n    private Pipe(T t) {\n        object = t;\n    }\n\n    public static&lt;T&gt; Pipe&lt;T&gt; of(T t) {\n        return new Pipe&lt;&gt;(t);\n    }\n\n    public &lt;S&gt; Pipe&lt;S&gt; after(Function&lt;? super T, ? extends S&gt; plumber) {\n        return new Pipe&lt;&gt;(object == null ? null : plumber.apply(object));\n    }\n\n    public T get() {\n        return object;\n    }\n\n    public T orElse(T other) {\n        return object == null ? other : object;\n    }\n}\n</code></pre>\n<p>Then, the given example would become:</p>\n<pre><code>public String getFirstName(Person person) {\n    return Pipe.of(person)\n        .after(Person::getName)\n        .after(Name::getGivenName)\n        .get();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1447781755,"creation_date":1447526632,"answer_id":33711967,"question_id":4390141,"body_markdown":"It is possible to define util methods which solves this in an almost pretty way with Java 8 lambda.\r\n\r\nThis is a variation of [H-MANs solution][1] but it uses overloaded methods with multiple arguments to handle multiple steps instead of catching `NullPointerException`.\r\n\r\nEven if I think this solution is kind of cool I think I prefer [Helder Pereira&#39;s][2] seconds one since that doesn&#39;t require any util methods. \r\n\r\n    void example() {\r\n        Entry entry = new Entry();\r\n        // This is the same as H-MANs solution \r\n        Person person = getNullsafe(entry, e -&gt; e.getPerson());    \r\n        // Get object in several steps\r\n        String givenName = getNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.getGivenName());\r\n        // Call void methods\r\n        doNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.nameIt());        \r\n    }\r\n    \r\n    /** Return result of call to f1 with o1 if it is non-null, otherwise return null. */\r\n    public static &lt;R, T1&gt; R getNullsafe(T1 o1, Function&lt;T1, R&gt; f1) {\r\n        if (o1 != null) return f1.apply(o1);\r\n        return null; \r\n    }\r\n\r\n    public static &lt;R, T0, T1&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, R&gt; f2) {\r\n        return getNullsafe(getNullsafe(o0, f1), f2);\r\n    }\r\n    \r\n    public static &lt;R, T0, T1, T2&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Function&lt;T2, R&gt; f3) {\r\n        return getNullsafe(getNullsafe(o0, f1, f2), f3);\r\n    }\r\n    \r\n\r\n    /** Call consumer f1 with o1 if it is non-null, otherwise do nothing. */\r\n    public static &lt;T1&gt; void doNullsafe(T1 o1, Consumer&lt;T1&gt; f1) {\r\n        if (o1 != null) f1.accept(o1);\r\n    }\r\n\r\n    public static &lt;T0, T1&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Consumer&lt;T1&gt; f2) {\r\n        doNullsafe(getNullsafe(o0, f1), f2);\r\n    }\r\n    \r\n    public static &lt;T0, T1, T2&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Consumer&lt;T2&gt; f3) {\r\n        doNullsafe(getNullsafe(o0, f1, f2), f3);\r\n    }\r\n\r\n    \r\n    class Entry {\r\n        Person getPerson() { return null; }\r\n    }\r\n\r\n    class Person {\r\n        Name getName() { return null; }\r\n    }\r\n\r\n    class Name {\r\n        void nameIt() {}\r\n        String getGivenName() { return null; }\r\n    }\r\n\r\n\r\n\r\n[1]: https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary#22544757\r\n[2]: https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary#31772710\r\n\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>It is possible to define util methods which solves this in an almost pretty way with Java 8 lambda.</p>\n\n<p>This is a variation of <a href=\"https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary#22544757\">H-MANs solution</a> but it uses overloaded methods with multiple arguments to handle multiple steps instead of catching <code>NullPointerException</code>.</p>\n\n<p>Even if I think this solution is kind of cool I think I prefer <a href=\"https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary#31772710\">Helder Pereira's</a> seconds one since that doesn't require any util methods. </p>\n\n<pre><code>void example() {\n    Entry entry = new Entry();\n    // This is the same as H-MANs solution \n    Person person = getNullsafe(entry, e -&gt; e.getPerson());    \n    // Get object in several steps\n    String givenName = getNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.getGivenName());\n    // Call void methods\n    doNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.nameIt());        \n}\n\n/** Return result of call to f1 with o1 if it is non-null, otherwise return null. */\npublic static &lt;R, T1&gt; R getNullsafe(T1 o1, Function&lt;T1, R&gt; f1) {\n    if (o1 != null) return f1.apply(o1);\n    return null; \n}\n\npublic static &lt;R, T0, T1&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, R&gt; f2) {\n    return getNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;R, T0, T1, T2&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Function&lt;T2, R&gt; f3) {\n    return getNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\n/** Call consumer f1 with o1 if it is non-null, otherwise do nothing. */\npublic static &lt;T1&gt; void doNullsafe(T1 o1, Consumer&lt;T1&gt; f1) {\n    if (o1 != null) f1.accept(o1);\n}\n\npublic static &lt;T0, T1&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Consumer&lt;T1&gt; f2) {\n    doNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;T0, T1, T2&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Consumer&lt;T2&gt; f3) {\n    doNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\nclass Entry {\n    Person getPerson() { return null; }\n}\n\nclass Person {\n    Name getName() { return null; }\n}\n\nclass Name {\n    void nameIt() {}\n    String getGivenName() { return null; }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":274813,"reputation":825,"user_id":567273,"accept_rate":72,"display_name":"irobson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447879745,"creation_date":1447879745,"answer_id":33790064,"question_id":4390141,"body_markdown":"If someone is looking for an alternative for old java versions, you can try this one I wrote:\r\n\r\n    /**\r\n     * Strong typed Lambda to return NULL or DEFAULT VALUES instead of runtime errors. \r\n     * if you override the defaultValue method, if the execution result was null it will be used in place\r\n     * \r\n     * \r\n     * Sample:\r\n     * \r\n     * It won&#39;t throw a NullPointerException but null.\r\n     * &lt;pre&gt;\r\n     * {@code\r\n     *  new RuntimeExceptionHandlerLambda&lt;String&gt; () {\r\n     *      @Override\r\n     *      public String evaluate() {\r\n     *          String x = null;\r\n     *          return x.trim();\r\n     *      }  \r\n     *  }.get();\r\n     * }\r\n     * &lt;pre&gt;\r\n     * \r\n     * \r\n     * @author Robson_Farias\r\n     *\r\n     */\r\n    \r\n    public abstract class RuntimeExceptionHandlerLambda&lt;T&gt; {\r\n    \r\n        private T result;\r\n    \r\n        private RuntimeException exception;\r\n    \r\n        public abstract T evaluate();\r\n    \r\n        public RuntimeException getException() {\r\n            return exception;\r\n        }\r\n    \r\n        public boolean hasException() {\r\n            return exception != null;\r\n        }\r\n    \r\n        public T defaultValue() {\r\n            return result;\r\n        }\r\n    \r\n        public T get() {\r\n            try {\r\n                result = evaluate();\r\n            } catch (RuntimeException runtimeException) {\r\n                exception = runtimeException;\r\n            }\r\n            return result == null ? defaultValue() : result;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>If someone is looking for an alternative for old java versions, you can try this one I wrote:</p>\n\n<pre><code>/**\n * Strong typed Lambda to return NULL or DEFAULT VALUES instead of runtime errors. \n * if you override the defaultValue method, if the execution result was null it will be used in place\n * \n * \n * Sample:\n * \n * It won't throw a NullPointerException but null.\n * &lt;pre&gt;\n * {@code\n *  new RuntimeExceptionHandlerLambda&lt;String&gt; () {\n *      @Override\n *      public String evaluate() {\n *          String x = null;\n *          return x.trim();\n *      }  \n *  }.get();\n * }\n * &lt;pre&gt;\n * \n * \n * @author Robson_Farias\n *\n */\n\npublic abstract class RuntimeExceptionHandlerLambda&lt;T&gt; {\n\n    private T result;\n\n    private RuntimeException exception;\n\n    public abstract T evaluate();\n\n    public RuntimeException getException() {\n        return exception;\n    }\n\n    public boolean hasException() {\n        return exception != null;\n    }\n\n    public T defaultValue() {\n        return result;\n    }\n\n    public T get() {\n        try {\n            result = evaluate();\n        } catch (RuntimeException runtimeException) {\n            exception = runtimeException;\n        }\n        return result == null ? defaultValue() : result;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12382221,"reputation":469,"user_id":9027338,"display_name":"SK -"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511981726,"creation_date":1511981726,"answer_id":47559837,"question_id":4390141,"body_markdown":"You can test the code which you have provided and it will give syntax error.So, it is not supported in Java. \r\nGroovy does support it and it was proposed for Java 7 (but never got included).\r\n\r\nHowever, you can use the Optional provided in Java 8. This might help you in achieving something on similar line.\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\nhttp://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\r\n\r\n[Example Code for Optional][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NuoQv.jpg","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>You can test the code which you have provided and it will give syntax error.So, it is not supported in Java. \nGroovy does support it and it was proposed for Java 7 (but never got included).</p>\n\n<p>However, you can use the Optional provided in Java 8. This might help you in achieving something on similar line.\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html</a>\n<a href=\"http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/NuoQv.jpg\" rel=\"nofollow noreferrer\">Example Code for Optional</a></p>\n"},{"comments":[{"owner":{"account_id":5359408,"reputation":1480,"user_id":4271171,"display_name":"Tom"},"score":6,"creation_date":1679567241,"post_id":50785060,"comment_id":133746074,"body_markdown":"An impressive example of boilerplate code needed if such operators are not available\n~ 41 vs 97 chars.","body":"An impressive example of boilerplate code needed if such operators are not available ~ 41 vs 97 chars."}],"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"comment_count":1,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1528643835,"creation_date":1528643377,"answer_id":50785060,"question_id":4390141,"body_markdown":"Java does not have the *exact* syntax but as of JDK-8, we have the [Optional API][1] with various methods at our disposal. So, the C# version with the use of [null conditional operator][2]:\r\n\r\n    return person?.getName()?.getGivenName(); \r\n\r\ncan be written as follows in Java with the [Optional&lt;T&gt; API][1]:\r\n\r\n     return Optional.ofNullable(person)\r\n                    .map(e -&gt; e.getName())\r\n                    .map(e -&gt; e.getGivenName())\r\n                    .orElse(null);\r\n\r\nif any of `person`, `getName` or `getGivenName` is null then null is returned.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\n  [2]: https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>Java does not have the <em>exact</em> syntax but as of JDK-8, we have the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">Optional API</a> with various methods at our disposal. So, the C# version with the use of <a href=\"https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators\" rel=\"noreferrer\">null conditional operator</a>:</p>\n\n<pre><code>return person?.getName()?.getGivenName(); \n</code></pre>\n\n<p>can be written as follows in Java with the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">Optional API</a>:</p>\n\n<pre><code> return Optional.ofNullable(person)\n                .map(e -&gt; e.getName())\n                .map(e -&gt; e.getGivenName())\n                .orElse(null);\n</code></pre>\n\n<p>if any of <code>person</code>, <code>getName</code> or <code>getGivenName</code> is null then null is returned.</p>\n"},{"tags":[],"owner":{"account_id":2219359,"reputation":1596,"user_id":1959190,"display_name":"LanDenLabs"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1559168334,"creation_date":1559168334,"answer_id":56369267,"question_id":4390141,"body_markdown":"Since Android does not support Lambda Functions unless your installed OS is &gt;= 24, we need to use reflection.\r\n\r\n    \r\n```\r\n// Example using doIt function with sample classes\r\npublic void Test() {\r\n    testEntry(new Entry(null));\r\n    testEntry(new Entry(new Person(new Name(&quot;Bob&quot;))));\r\n}\r\n\r\nstatic void testEntry(Entry entry) {\r\n    doIt(doIt(doIt(entry,  &quot;getPerson&quot;), &quot;getName&quot;), &quot;getName&quot;);\r\n}\r\n\r\n// Helper to safely execute function \r\npublic static &lt;T,R&gt; R doIt(T obj, String methodName) {\r\n    try {\r\n       if (obj != null) \r\n           return (R)obj.getClass().getDeclaredMethod(methodName).invoke(obj);\r\n    } catch (Exception ignore) {\r\n    }\r\n    return null;\r\n}\r\n```\r\n```\r\n// Sample test classes\r\n    static class Entry {\r\n        Person person;\r\n        Entry(Person person) { this.person = person; }\r\n        Person getPerson() { return person; }\r\n    }\r\n\r\n    static class Person {\r\n        Name name;\r\n        Person(Name name) { this.name = name; }\r\n        Name getName() { return name; }\r\n    }\r\n\r\n    static class Name {\r\n        String name;\r\n        Name(String name) { this.name = name; }\r\n        String getName() {\r\n            System.out.print(&quot; Name:&quot; + name + &quot; &quot;);\r\n            return name;\r\n        }\r\n    }\r\n}\r\n```","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>Since Android does not support Lambda Functions unless your installed OS is >= 24, we need to use reflection.</p>\n\n<pre><code>// Example using doIt function with sample classes\npublic void Test() {\n    testEntry(new Entry(null));\n    testEntry(new Entry(new Person(new Name(\"Bob\"))));\n}\n\nstatic void testEntry(Entry entry) {\n    doIt(doIt(doIt(entry,  \"getPerson\"), \"getName\"), \"getName\");\n}\n\n// Helper to safely execute function \npublic static &lt;T,R&gt; R doIt(T obj, String methodName) {\n    try {\n       if (obj != null) \n           return (R)obj.getClass().getDeclaredMethod(methodName).invoke(obj);\n    } catch (Exception ignore) {\n    }\n    return null;\n}\n</code></pre>\n\n<pre><code>// Sample test classes\n    static class Entry {\n        Person person;\n        Entry(Person person) { this.person = person; }\n        Person getPerson() { return person; }\n    }\n\n    static class Person {\n        Name name;\n        Person(Name name) { this.name = name; }\n        Name getName() { return name; }\n    }\n\n    static class Name {\n        String name;\n        Name(String name) { this.name = name; }\n        String getName() {\n            System.out.print(\" Name:\" + name + \" \");\n            return name;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":73930,"reputation":2183,"user_id":212665,"accept_rate":100,"display_name":"Vinay Lodha"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1626584378,"creation_date":1626584378,"answer_id":68426153,"question_id":4390141,"body_markdown":"As lot of answers mentioned Java language don&#39;t have this feature. \r\n\r\nIt is possible in few scenarios with this [compiler plugin][1], with few limitations \r\n\r\nIn the example code you mentioned can be written as \r\n\r\n    public String getFirstName(Person person) {\r\n      @NullSafe\r\n      String retVal = person.getName().getGivenName();\r\n      return retVal;\r\n    } \r\n\r\n\r\nPS: I am author of plugin\r\n\r\n\r\n  [1]: https://github.com/vinayalodha/elvis","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>As lot of answers mentioned Java language don't have this feature.</p>\n<p>It is possible in few scenarios with this <a href=\"https://github.com/vinayalodha/elvis\" rel=\"nofollow noreferrer\">compiler plugin</a>, with few limitations</p>\n<p>In the example code you mentioned can be written as</p>\n<pre><code>public String getFirstName(Person person) {\n  @NullSafe\n  String retVal = person.getName().getGivenName();\n  return retVal;\n} \n</code></pre>\n<p>PS: I am author of plugin</p>\n"},{"tags":[],"owner":{"account_id":14681960,"reputation":346,"user_id":10603143,"display_name":"Mohsin Ejaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663159350,"creation_date":1663159350,"answer_id":73717045,"question_id":4390141,"body_markdown":"STEP-1 : Use this generic method.\r\n\r\n\tpublic static &lt;T&gt; Optional&lt;T&gt; optionalChaining(Supplier&lt;T&gt; resolver) {\r\n\t\ttry {\r\n\t\t\tT result = resolver.get();\r\n\t\t\treturn Optional.ofNullable(result);\r\n\t\t} catch (NullPointerException e) {\r\n\t\t\treturn Optional.empty();\r\n\t\t}\r\n\t}\r\n\r\n\r\nSTEP-2 one example of usage of this method is below\r\n\r\n    Optional&lt;String&gt; rs = optionalChaining(()-&gt; user.getName(&quot;Talha&quot;).getLastName());\r\n    \r\n    if(rs.isPresent()) {\r\n    \t\t\t\t\t\r\n    }\r\n\r\nDone !!\r\n\r\n\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>STEP-1 : Use this generic method.</p>\n<pre><code>public static &lt;T&gt; Optional&lt;T&gt; optionalChaining(Supplier&lt;T&gt; resolver) {\n    try {\n        T result = resolver.get();\n        return Optional.ofNullable(result);\n    } catch (NullPointerException e) {\n        return Optional.empty();\n    }\n}\n</code></pre>\n<p>STEP-2 one example of usage of this method is below</p>\n<pre><code>Optional&lt;String&gt; rs = optionalChaining(()-&gt; user.getName(&quot;Talha&quot;).getLastName());\n\nif(rs.isPresent()) {\n                    \n}\n</code></pre>\n<p>Done !!</p>\n"}],"owner":{"account_id":156983,"reputation":4517,"user_id":374601,"accept_rate":91,"display_name":"Erty Seidohl"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192772,"favorite_count":0,"down_vote_count":0,"up_vote_count":115,"accepted_answer_id":4390213,"answer_count":16,"score":115,"last_activity_date":1683309109,"creation_date":1291827715,"question_id":4390141,"body_markdown":"I was reading [an InfoWorld article][1] (link to Wayback machine since the excerpt was since removed), and came across this little tidbit:\r\n\r\n&gt; Take the latest version of Java, which\r\n&gt; tries to make null-pointer checking\r\n&gt; easier by offering shorthand syntax\r\n&gt; for the endless pointer testing. Just\r\n&gt; adding a question mark to each method\r\n&gt; invocation automatically includes a\r\n&gt; test for null pointers, replacing a\r\n&gt; rat&#39;s nest of if-then statements, such\r\n&gt; as:\r\n&gt; &lt;code&gt;&lt;pre&gt;\r\n&gt;     public String getPostcode(Person person) {\r\n&gt;       String ans= null;\r\n&gt;       if (person != null) {\r\n&gt;         Name nm= person.getName();\r\n&gt;         if (nm!= null) {\r\n&gt;           ans= nm.getPostcode();\r\n&gt;         }\r\n&gt;       }\r\n&gt;       return ans\r\n&gt;     } &lt;/pre&gt;&lt;/code&gt;\r\n&gt; \r\n&gt; With this:\r\n&gt; &lt;code&gt;&lt;pre&gt;\r\n&gt; public String getFirstName(Person person) {\r\n&gt;       return person?.getName()?.getGivenName();\r\n&gt;     } &lt;/pre&gt;&lt;/code&gt;\r\n\r\nI&#39;ve scoured the internet (okay, I spent at least 15 minutes googling variations on &quot;java question mark&quot;) and got nothing. So, my question: is there any official documentation on this? I found that C# has a similar operator (the &quot;??&quot; operator), but I&#39;d like to get the documentation for the language I&#39;m working in. Or, is this just a use of the ternary operator that I&#39;ve never seen before.\r\n\r\nThanks!\r\n\r\n  [1]: https://web.archive.org/web/20120307062211/http://infoworld.com/d/developer-world/12-programming-mistakes-avoid-292","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>I was reading <a href=\"https://web.archive.org/web/20120307062211/http://infoworld.com/d/developer-world/12-programming-mistakes-avoid-292\" rel=\"nofollow noreferrer\">an InfoWorld article</a> (link to Wayback machine since the excerpt was since removed), and came across this little tidbit:</p>\n<blockquote>\n<p>Take the latest version of Java, which\ntries to make null-pointer checking\neasier by offering shorthand syntax\nfor the endless pointer testing. Just\nadding a question mark to each method\ninvocation automatically includes a\ntest for null pointers, replacing a\nrat's nest of if-then statements, such\nas:\n<code><pre>\npublic String getPostcode(Person person) {\nString ans= null;\nif (person != null) {\nName nm= person.getName();\nif (nm!= null) {\nans= nm.getPostcode();\n}\n}\nreturn ans\n} </pre></code></p>\n<p>With this:\n<code><pre>\npublic String getFirstName(Person person) {\nreturn person?.getName()?.getGivenName();\n} </pre></code></p>\n</blockquote>\n<p>I've scoured the internet (okay, I spent at least 15 minutes googling variations on &quot;java question mark&quot;) and got nothing. So, my question: is there any official documentation on this? I found that C# has a similar operator (the &quot;??&quot; operator), but I'd like to get the documentation for the language I'm working in. Or, is this just a use of the ternary operator that I've never seen before.</p>\n<p>Thanks!</p>\n"},{"tags":["java","algorithm","data-structures","binary-tree","binary-search-tree"],"comments":[{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683308767,"post_id":76184689,"comment_id":134352446,"body_markdown":"the errors come from Invalid tree with right child linking to ancestor, Invalid tree with left child linking to parent, and Invalid tree with left child linking to ancestor.","body":"the errors come from Invalid tree with right child linking to ancestor, Invalid tree with left child linking to parent, and Invalid tree with left child linking to ancestor."},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1683330181,"post_id":76184689,"comment_id":134355680,"body_markdown":"There is no question here. What are you asking?","body":"There is no question here. What are you asking?"},{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683340098,"post_id":76184689,"comment_id":134356349,"body_markdown":"You have to verify that the binary tree provided to you is valid","body":"You have to verify that the binary tree provided to you is valid"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1683350597,"post_id":76184689,"comment_id":134356966,"body_markdown":"That is not a question.","body":"That is not a question."},{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683439472,"post_id":76184689,"comment_id":134365143,"body_markdown":"How is it &quot;not a question&quot; I am asking HOW DO I VERIFY A BST. My code is wrong and I dont know what is wrong with it. SO I AM ASKING WHAT IS WRONG WITH MY CODE","body":"How is it &quot;not a question&quot; I am asking HOW DO I VERIFY A BST. My code is wrong and I dont know what is wrong with it. SO I AM ASKING WHAT IS WRONG WITH MY CODE"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1683443472,"post_id":76184689,"comment_id":134365485,"body_markdown":"Sorry, but I didn&#39;t see that in your post. It just presents a code challenge and ends with a block of code. Only the title says something about &quot;wrong&quot;, but it is about chegg. It really doesn&#39;t tell us that something is going wrong in your code, let be that it tells for what input it produces wrong output, and what you have done to debug the situation. Anyhow, this question is a duplicate. See banner at the top.","body":"Sorry, but I didn&#39;t see that in your post. It just presents a code challenge and ends with a block of code. Only the title says something about &quot;wrong&quot;, but it is about chegg. It really doesn&#39;t tell us that something is going wrong in your code, let be that it tells for what input it produces wrong output, and what you have done to debug the situation. Anyhow, this question is a duplicate. See banner at the top."},{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683478221,"post_id":76184689,"comment_id":134369580,"body_markdown":"I just used your answer and I got a 10/10 thank you so much but I don&#39;t understand why we need to use a hashset could you please elaborate?","body":"I just used your answer and I got a 10/10 thank you so much but I don&#39;t understand why we need to use a hashset could you please elaborate?"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1683479370,"post_id":76184689,"comment_id":134369754,"body_markdown":"The  hashset serves to detect that there is a cycle in the graph. It collects nodes on the path down. If then a child happens to be the same node that was already encountered on the way down, there is a cycle.","body":"The  hashset serves to detect that there is a cycle in the graph. It collects nodes on the path down. If then a child happens to be the same node that was already encountered on the way down, there is a cycle."},{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683480048,"post_id":76184689,"comment_id":134369854,"body_markdown":"Thank you, but why are we &quot;backtracking&quot; with this line of code --&gt; ancestors.remove(rootNode);  \n\nwhat purpose does it have?","body":"Thank you, but why are we &quot;backtracking&quot; with this line of code --&gt; ancestors.remove(rootNode);    what purpose does it have?"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1683480882,"post_id":76184689,"comment_id":134369998,"body_markdown":"That is when you move out of recursion and that node is no longer on the path (the path becomes shorter when getting out of recursion -- its like moving one level up in the tree).","body":"That is when you move out of recursion and that node is no longer on the path (the path becomes shorter when getting out of recursion -- its like moving one level up in the tree)."}],"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1683330262,"answer_count":0,"score":1,"last_activity_date":1683308213,"creation_date":1683308213,"question_id":76184689,"body_markdown":"# 11.19 LAB: BST validity checker\r\n\r\n# Step 1: Inspect the Node.java file\r\n\r\nInspect the class declaration for a BST node in Node.java. Access Node.java by clicking on the orange arrow next to LabProgram.java at the top of the coding window. Each node has a key, a left child reference, and a right child reference.\r\n\r\n# Step 2: Implement the BSTChecker.checkBSTValidity() method\r\n\r\nImplement the checkBSTValidity() method in the BSTChecker class in the BSTChecker.java file. The method takes the tree&#39;s root node as a parameter and returns the node that violates BST requirements, or `null` if the tree is a valid BST.\r\n\r\nA violating node will be one of three things:\r\n\r\n- A node in the left subtree of an ancestor with a lesser key\r\n\r\n- A node in the right subtree of an ancestor with a greater key\r\n\r\n- A node with the `left` or `right` field referencing an ancestor\r\n\r\nNote: Other types of BST violations can occur, but are not covered in this lab.\r\n\r\nThe given code in LabProgram.java reads and parses input, and builds the tree for you. Nodes are presented in the form `(key, leftChild, rightChild)`, where leftChild and rightChild can be nested nodes or &quot;None&quot;. A leaf node is of the form `(key)`. After parsing tree input, the BSTChecker.checkBSTValidity() method is called and the returned node&#39;s key, or &quot;No violation&quot;, is printed.\r\n\r\nEx:\r\n\r\nIf the input is:\r\n\r\n```\r\n(50, (25, None, (60)), (75))\r\n```\r\n\r\nwhich corresponds to the tree above, then the output is:\r\n\r\n```\r\n60\r\n```\r\n\r\nbecause 60 violates BST requirements by being in the left subtree of 50.\r\n\r\nIf the input is:\r\n\r\n```\r\n(20, (10), (30, (29), (31)))\r\n```\r\n\r\nwhich corresponds to the tree above, then the output is:\r\n\r\n```\r\nNo violation\r\n```\r\n\r\nbecause all BST requirements are met.\r\n\r\nThe input format doesn&#39;t allow creating a tree with a node&#39;s child referencing an ancestor, so unit tests are used to test such cases.\r\n\r\nmy code:\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class BSTChecker {\r\n    public static Node checkBSTValidity(Node rootNode) {\r\n        return checkBSTValidity(rootNode, null, null);\r\n    }\r\n    \r\n    private static Node checkBSTValidity(Node node, Node min, Node max) {\r\n        if (node == null) {\r\n            return null;\r\n        }\r\n    \r\n    // Check if the current node violates BST requirements\r\n    if ((min != null &amp;&amp; node.key &lt;= min.key) || (max != null &amp;&amp; node.key &gt;= max.key)) {\r\n        return node;\r\n    }\r\n    \r\n    // check left + right subtrees\r\n    Node leftViolation = checkBSTValidity(node.left, min, node);\r\n    Node rightViolation = checkBSTValidity(node.right, node, max);\r\n    \r\n    // Return violating node if found\r\n        if (leftViolation != null)\r\n        return leftViolation;\r\n\r\n        else if (rightViolation != null)\r\n        return rightViolation;\r\n\r\n        else\r\n        return null;\r\n    \r\n    }\r\n}\r\n```","title":"BST validity checker | posted multiple times on chegg and they&#39;ve gotten it wrong too","body":"<h1>11.19 LAB: BST validity checker</h1>\n<h1>Step 1: Inspect the Node.java file</h1>\n<p>Inspect the class declaration for a BST node in Node.java. Access Node.java by clicking on the orange arrow next to LabProgram.java at the top of the coding window. Each node has a key, a left child reference, and a right child reference.</p>\n<h1>Step 2: Implement the BSTChecker.checkBSTValidity() method</h1>\n<p>Implement the checkBSTValidity() method in the BSTChecker class in the BSTChecker.java file. The method takes the tree's root node as a parameter and returns the node that violates BST requirements, or <code>null</code> if the tree is a valid BST.</p>\n<p>A violating node will be one of three things:</p>\n<ul>\n<li><p>A node in the left subtree of an ancestor with a lesser key</p>\n</li>\n<li><p>A node in the right subtree of an ancestor with a greater key</p>\n</li>\n<li><p>A node with the <code>left</code> or <code>right</code> field referencing an ancestor</p>\n</li>\n</ul>\n<p>Note: Other types of BST violations can occur, but are not covered in this lab.</p>\n<p>The given code in LabProgram.java reads and parses input, and builds the tree for you. Nodes are presented in the form <code>(key, leftChild, rightChild)</code>, where leftChild and rightChild can be nested nodes or &quot;None&quot;. A leaf node is of the form <code>(key)</code>. After parsing tree input, the BSTChecker.checkBSTValidity() method is called and the returned node's key, or &quot;No violation&quot;, is printed.</p>\n<p>Ex:</p>\n<p>If the input is:</p>\n<pre><code>(50, (25, None, (60)), (75))\n</code></pre>\n<p>which corresponds to the tree above, then the output is:</p>\n<pre><code>60\n</code></pre>\n<p>because 60 violates BST requirements by being in the left subtree of 50.</p>\n<p>If the input is:</p>\n<pre><code>(20, (10), (30, (29), (31)))\n</code></pre>\n<p>which corresponds to the tree above, then the output is:</p>\n<pre><code>No violation\n</code></pre>\n<p>because all BST requirements are met.</p>\n<p>The input format doesn't allow creating a tree with a node's child referencing an ancestor, so unit tests are used to test such cases.</p>\n<p>my code:</p>\n<pre><code>import java.util.*;\n\npublic class BSTChecker {\n    public static Node checkBSTValidity(Node rootNode) {\n        return checkBSTValidity(rootNode, null, null);\n    }\n    \n    private static Node checkBSTValidity(Node node, Node min, Node max) {\n        if (node == null) {\n            return null;\n        }\n    \n    // Check if the current node violates BST requirements\n    if ((min != null &amp;&amp; node.key &lt;= min.key) || (max != null &amp;&amp; node.key &gt;= max.key)) {\n        return node;\n    }\n    \n    // check left + right subtrees\n    Node leftViolation = checkBSTValidity(node.left, min, node);\n    Node rightViolation = checkBSTValidity(node.right, node, max);\n    \n    // Return violating node if found\n        if (leftViolation != null)\n        return leftViolation;\n\n        else if (rightViolation != null)\n        return rightViolation;\n\n        else\n        return null;\n    \n    }\n}\n</code></pre>\n"},{"tags":["java","javascript"],"answers":[{"comments":[{"owner":{"account_id":147528,"reputation":3201,"user_id":358696,"display_name":"Eric Galluzzo"},"score":0,"creation_date":1392323094,"post_id":21764354,"comment_id":32924132,"body_markdown":"Please see @PeterLawrey&#39;s answer.  His is better than mine.","body":"Please see @PeterLawrey&#39;s answer.  His is better than mine."}],"tags":[],"owner":{"account_id":147528,"reputation":3201,"user_id":358696,"display_name":"Eric Galluzzo"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1392323315,"creation_date":1392321748,"answer_id":21764354,"question_id":21764244,"body_markdown":"`myArray.unshift(obj)` corresponds to `myList.add(0, obj)`.\r\n\r\nA byte array in Java is `byte[]`.  A list of byte arrays would be a `List&lt;byte[]&gt;`.  (That&#39;s `java.util.List`, not `java.awt.List`, just in case you get the wrong import.)\r\n\r\nEDIT: Looks like you are trying to create a byte array, not a list of byte arrays.  In that case, you should use a `java.nio.ByteBuffer`, or possibly a `java.io.ByteArrayOutputStream`.  The latter has to be written to sequentially -- you cannot do the equivalent of an `unshift`.","title":"What are java equivalents to JS push, concat, unshift?","body":"<p><code>myArray.unshift(obj)</code> corresponds to <code>myList.add(0, obj)</code>.</p>\n\n<p>A byte array in Java is <code>byte[]</code>.  A list of byte arrays would be a <code>List&lt;byte[]&gt;</code>.  (That's <code>java.util.List</code>, not <code>java.awt.List</code>, just in case you get the wrong import.)</p>\n\n<p>EDIT: Looks like you are trying to create a byte array, not a list of byte arrays.  In that case, you should use a <code>java.nio.ByteBuffer</code>, or possibly a <code>java.io.ByteArrayOutputStream</code>.  The latter has to be written to sequentially -- you cannot do the equivalent of an <code>unshift</code>.</p>\n"},{"tags":[],"owner":{"account_id":1031047,"reputation":646,"user_id":1039350,"accept_rate":70,"display_name":"Steven Spasbo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683308068,"creation_date":1392321988,"answer_id":21764406,"question_id":21764244,"body_markdown":"You could use an arraylist of Bytes.\r\n\r\n    ArrayList&lt;Byte&gt; sequence = new ArrayList&lt;&gt;();\r\n\r\nTo add to the end of an arraylist use:\r\n    \r\n    sequence.add(item);\r\n\r\nTo add to the front use:\r\n\r\n    sequence.add(0, item);","title":"What are java equivalents to JS push, concat, unshift?","body":"<p>You could use an arraylist of Bytes.</p>\n<pre><code>ArrayList&lt;Byte&gt; sequence = new ArrayList&lt;&gt;();\n</code></pre>\n<p>To add to the end of an arraylist use:</p>\n<pre><code>sequence.add(item);\n</code></pre>\n<p>To add to the front use:</p>\n<pre><code>sequence.add(0, item);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1392322003,"creation_date":1392322003,"answer_id":21764409,"question_id":21764244,"body_markdown":"This looks like you are trying to use a ByteBuffer to serialize some data.\r\n\r\n     public static void serialize(ByteBuffer bb, String r, String s) {\r\n          bb.put(48);\r\n          int start = bb.position();\r\n          bb.put(0); // padding.\r\n          bb.put(2);\r\n          byte[] rBa = r.getBytes();\r\n          bb.put((byte) rBa.length);\r\n          bb.put(rBa);\r\n          byte[] sBa = s.getBytes();\r\n          bb.put((byte) sBa.length);\r\n          bb.put(sBa);\r\n          bb.put(start, (byte) (bb.position() - start - 1));\r\n    }\r\n\r\nUsing an `List&lt;Byte&gt;` is very inefficient and not supported by the packages which do IO.","title":"What are java equivalents to JS push, concat, unshift?","body":"<p>This looks like you are trying to use a ByteBuffer to serialize some data.</p>\n\n<pre><code> public static void serialize(ByteBuffer bb, String r, String s) {\n      bb.put(48);\n      int start = bb.position();\n      bb.put(0); // padding.\n      bb.put(2);\n      byte[] rBa = r.getBytes();\n      bb.put((byte) rBa.length);\n      bb.put(rBa);\n      byte[] sBa = s.getBytes();\n      bb.put((byte) sBa.length);\n      bb.put(sBa);\n      bb.put(start, (byte) (bb.position() - start - 1));\n}\n</code></pre>\n\n<p>Using an <code>List&lt;Byte&gt;</code> is very inefficient and not supported by the packages which do IO.</p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1304,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":21764409,"answer_count":3,"score":3,"last_activity_date":1683308068,"creation_date":1392321371,"question_id":21764244,"body_markdown":"I&#39;m trying to convert the following `JS` to `Java`:\r\n\r\n    serializeSig:function(r,s){\r\n    var rBa=r.toByteArraySigned();\r\n    var sBa=s.toByteArraySigned();\r\n    var sequence=[];\r\n    sequence.push(2);\r\n    sequence.push(rBa.length);\r\n    sequence=sequence.concat(rBa);\r\n    sequence.push(2);\r\n    sequence.push(sBa.length);\r\n    sequence=sequence.concat(sBa);\r\n    sequence.unshift(sequence.length);\r\n    sequence.unshift(48);\r\n    return sequence\r\n    }\r\n\r\nI think `push` would translate to `add`, concat to some kind of `addAll`, but what is `unshift`? And of what type would my variables in java be?","title":"What are java equivalents to JS push, concat, unshift?","body":"<p>I'm trying to convert the following <code>JS</code> to <code>Java</code>:</p>\n\n<pre><code>serializeSig:function(r,s){\nvar rBa=r.toByteArraySigned();\nvar sBa=s.toByteArraySigned();\nvar sequence=[];\nsequence.push(2);\nsequence.push(rBa.length);\nsequence=sequence.concat(rBa);\nsequence.push(2);\nsequence.push(sBa.length);\nsequence=sequence.concat(sBa);\nsequence.unshift(sequence.length);\nsequence.unshift(48);\nreturn sequence\n}\n</code></pre>\n\n<p>I think <code>push</code> would translate to <code>add</code>, concat to some kind of <code>addAll</code>, but what is <code>unshift</code>? And of what type would my variables in java be?</p>\n"},{"tags":["java","cryptography","bouncycastle","hardware-security-module"],"answers":[{"comments":[{"owner":{"account_id":20153373,"reputation":41,"user_id":14780186,"display_name":"3ric-T"},"score":0,"creation_date":1682443670,"post_id":76103771,"comment_id":134215598,"body_markdown":"In fact, it&#39;s not the decryption of the private key itself that I have a problem with, but rather finding the secret key from the elements I have: the private key of the master key pair and the public key of the internal key pair.\nThe description of my probleme seems to be unclear, I&#39;ll edit it to be more precise.","body":"In fact, it&#39;s not the decryption of the private key itself that I have a problem with, but rather finding the secret key from the elements I have: the private key of the master key pair and the public key of the internal key pair. The description of my probleme seems to be unclear, I&#39;ll edit it to be more precise."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1682444631,"post_id":76103771,"comment_id":134215792,"body_markdown":"My experience of HSMs is that you cannot exfiltrate private or secret keys. HSMs exist to keep these types of keys safe. This is achieved by keeping the processing that uses these types of keys (asymmetric signing and symmetric encryption/decryption) within the HSM. Data to be signed (hashes thereof) or encrypted is passed to the HSM and the results are passed back.","body":"My experience of HSMs is that you cannot exfiltrate private or secret keys. HSMs exist to keep these types of keys safe. This is achieved by keeping the processing that uses these types of keys (asymmetric signing and symmetric encryption/decryption) within the HSM. Data to be signed (hashes thereof) or encrypted is passed to the HSM and the results are passed back."},{"owner":{"account_id":20153373,"reputation":41,"user_id":14780186,"display_name":"3ric-T"},"score":0,"creation_date":1682498493,"post_id":76103771,"comment_id":134223990,"body_markdown":"It is possible to extract private keys from the HSM, as stated in the PKCS#11 version 3.0 document (&#167; 5.8.3): &quot;`C_WrapKey` wraps (i.e., encrypts) a private or secret key. (...) The `CKA_WRAP` attribute of the wrapping key, which indicates whether the key supports wrapping, *MUST* be *CK_TRUE*.  The `CKA_EXTRACTABLE` attribute of the key to be wrapped *MUST* also be *CK_TRUE*. (...)&quot;\n\nTo protect your HSM, it is always possible to forbid object creation, so wrapping of keys will only be possible using keys already present.","body":"It is possible to extract private keys from the HSM, as stated in the PKCS#11 version 3.0 document (&#167; 5.8.3): &quot;<code>C_WrapKey</code> wraps (i.e., encrypts) a private or secret key. (...) The <code>CKA_WRAP</code> attribute of the wrapping key, which indicates whether the key supports wrapping, <i>MUST</i> be <i>CK_TRUE</i>.  The <code>CKA_EXTRACTABLE</code> attribute of the key to be wrapped <i>MUST</i> also be <i>CK_TRUE</i>. (...)&quot;  To protect your HSM, it is always possible to forbid object creation, so wrapping of keys will only be possible using keys already present."}],"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682442521,"creation_date":1682442521,"answer_id":76103771,"question_id":76102988,"body_markdown":"Decrypt the encrypted private key as follows:\r\n\r\n    byte[] ivbuf = new byte[16];\r\n    new SecureRandom().nextBytes(ivbuf);\r\n    IvParameterSpec iv = new IvParameterSpec(ivbuf);\r\n    String algorithm = “AES/CBC/PKCS5Padding”; // CKM_AES_GCM, CKM_AES_KEY_WRAP_PAD or CKM_AES_CBC_PAD\r\n    Cipher cipher = Cipher.getInstance(algorithm);\r\n    cipher.init(Cipher.DECRYPT_MODE, aesSecretKey, iv);\r\n    byte[] plainText = cipher.doFinal(encryptedPrivateKeyByteArray);\r\n    return new String(plainText);","title":"Wrap-unwrap of private key using EC master key and Bouncy Castle","body":"<p>Decrypt the encrypted private key as follows:</p>\n<pre><code>byte[] ivbuf = new byte[16];\nnew SecureRandom().nextBytes(ivbuf);\nIvParameterSpec iv = new IvParameterSpec(ivbuf);\nString algorithm = “AES/CBC/PKCS5Padding”; // CKM_AES_GCM, CKM_AES_KEY_WRAP_PAD or CKM_AES_CBC_PAD\nCipher cipher = Cipher.getInstance(algorithm);\ncipher.init(Cipher.DECRYPT_MODE, aesSecretKey, iv);\nbyte[] plainText = cipher.doFinal(encryptedPrivateKeyByteArray);\nreturn new String(plainText);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20153373,"reputation":41,"user_id":14780186,"display_name":"3ric-T"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683307720,"creation_date":1683305742,"answer_id":76184439,"question_id":76102988,"body_markdown":"In the HSM response, I have:\r\n - A byte array which is the public key of the ephemeral EC transport key generated from my long-term EC master key: `transportPublicKey`;\r\n - A byte array which is the private key wrapped by the session key: `privateKeyWrappedBySessionKey`;\r\n\r\nTo decrypt the private key:\r\n 1. *Generate the same session key*, using the derivation mechanism `CKM_ECDH1_DERIVE` and the derivation function `CKD_SHA256_KDF`, the private part of the EC master key, shared data (which can be `null`) and the public key of the ephemeral EC transport key:\r\n```\r\nKeyAgreement recipientAgreement = KeyAgreement.getInstance(\r\n                    &quot;ECDHWithSHA256KDF&quot;,\r\n                    BouncyCastleProvider.PROVIDER_NAME);\r\nrecipientAgreement.init(recipientPrivateKey,\r\n                        new UserKeyingMaterialSpec(sharedData));\r\nrecipientAgreement.doPhase(transportPublicKey), true);            \r\nfinal byte[] secret = recipientAgreement.generateSecret();\r\nSecretKeySpec sharedSecret = new SecretKeySpec(secret, &quot;AES&quot;);         \r\n```\r\n 2. *Decrypt the private key* with the session key and the appropriate symmetric algorithm:\r\n```\r\nCipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7PADDING&quot;);\r\nfinal InitializationVectorParameters initializationVectorParameters = new InitializationVectorParameters(new byte[16]);\r\nbyte[] ivb = initializationVectorParameters.getInitializationVector();\r\ncipher.init(Cipher.DECRYPT_MODE, sharedSecret, new IvParameterSpec(ivb));\r\nbyte[] decryptedPrivateKey = cipher.doFinal(privateKeyWrappedBySessionKey);         \r\n\r\nPKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(decryptedPrivateKey);            \r\nKeyFactory keyFactory = KeyHelper.keyFactory(wrappedPrivateKeyType);\r\nPrivateKey privateKey = keyFactory.generatePrivate(privateKeySpec);\r\n```          \r\n\r\n*Additional information*:\r\n- In case of `CKD_NULL` derivation function, `AlgorithmParameterSpec` **MUST NOT** be provided, as stated in PKCS#11 \r\n&gt; (&#167; 2.3.20) With the key derivation function CKD_NULL, pSharedData must be NULL and ulSharedDataLen must be zero.\r\n\r\n```\r\nrecipientAgreement.init(recipientPrivateKey);\r\n```\r\n\r\n- In case of a session key with size shorter than 256 bits, only the **keySize / 8** first bits of the generated secret have to be used:\r\n&gt; (&#167; 2.3.20) ... and gets the first ulAESKeyBits bits of the derived key to be the temporary AES key.\r\n- In the case of `CKM_AES_KEY_WRAP` or `CKM_AES_KEY_WRAP_PAD` mechanisms, no initialization vector is required:\r\n\r\n```\r\ncipher.init(Cipher.DECRYPT_MODE, sharedSecret);\r\n```\r\n\r\n- Note that, at the moment, this does not work with `CKD_NULL` **and** session key size other than 256 bits. ","title":"Wrap-unwrap of private key using EC master key and Bouncy Castle","body":"<p>In the HSM response, I have:</p>\n<ul>\n<li>A byte array which is the public key of the ephemeral EC transport key generated from my long-term EC master key: <code>transportPublicKey</code>;</li>\n<li>A byte array which is the private key wrapped by the session key: <code>privateKeyWrappedBySessionKey</code>;</li>\n</ul>\n<p>To decrypt the private key:</p>\n<ol>\n<li><em>Generate the same session key</em>, using the derivation mechanism <code>CKM_ECDH1_DERIVE</code> and the derivation function <code>CKD_SHA256_KDF</code>, the private part of the EC master key, shared data (which can be <code>null</code>) and the public key of the ephemeral EC transport key:</li>\n</ol>\n<pre><code>KeyAgreement recipientAgreement = KeyAgreement.getInstance(\n                    &quot;ECDHWithSHA256KDF&quot;,\n                    BouncyCastleProvider.PROVIDER_NAME);\nrecipientAgreement.init(recipientPrivateKey,\n                        new UserKeyingMaterialSpec(sharedData));\nrecipientAgreement.doPhase(transportPublicKey), true);            \nfinal byte[] secret = recipientAgreement.generateSecret();\nSecretKeySpec sharedSecret = new SecretKeySpec(secret, &quot;AES&quot;);         \n</code></pre>\n<ol start=\"2\">\n<li><em>Decrypt the private key</em> with the session key and the appropriate symmetric algorithm:</li>\n</ol>\n<pre><code>Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7PADDING&quot;);\nfinal InitializationVectorParameters initializationVectorParameters = new InitializationVectorParameters(new byte[16]);\nbyte[] ivb = initializationVectorParameters.getInitializationVector();\ncipher.init(Cipher.DECRYPT_MODE, sharedSecret, new IvParameterSpec(ivb));\nbyte[] decryptedPrivateKey = cipher.doFinal(privateKeyWrappedBySessionKey);         \n\nPKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(decryptedPrivateKey);            \nKeyFactory keyFactory = KeyHelper.keyFactory(wrappedPrivateKeyType);\nPrivateKey privateKey = keyFactory.generatePrivate(privateKeySpec);\n</code></pre>\n<p><em>Additional information</em>:</p>\n<ul>\n<li>In case of <code>CKD_NULL</code> derivation function, <code>AlgorithmParameterSpec</code> <strong>MUST NOT</strong> be provided, as stated in PKCS#11</li>\n</ul>\n<blockquote>\n<p>(§ 2.3.20) With the key derivation function CKD_NULL, pSharedData must be NULL and ulSharedDataLen must be zero.</p>\n</blockquote>\n<pre><code>recipientAgreement.init(recipientPrivateKey);\n</code></pre>\n<ul>\n<li>In case of a session key with size shorter than 256 bits, only the <strong>keySize / 8</strong> first bits of the generated secret have to be used:</li>\n</ul>\n<blockquote>\n<p>(§ 2.3.20) ... and gets the first ulAESKeyBits bits of the derived key to be the temporary AES key.</p>\n</blockquote>\n<ul>\n<li>In the case of <code>CKM_AES_KEY_WRAP</code> or <code>CKM_AES_KEY_WRAP_PAD</code> mechanisms, no initialization vector is required:</li>\n</ul>\n<pre><code>cipher.init(Cipher.DECRYPT_MODE, sharedSecret);\n</code></pre>\n<ul>\n<li>Note that, at the moment, this does not work with <code>CKD_NULL</code> <strong>and</strong> session key size other than 256 bits.</li>\n</ul>\n"}],"owner":{"account_id":20153373,"reputation":41,"user_id":14780186,"display_name":"3ric-T"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76184439,"answer_count":2,"score":0,"last_activity_date":1683307720,"creation_date":1682436964,"question_id":76102988,"body_markdown":"I want to wrap a private key out of a HSM, using an external EC key pair (_master key_) and then verify that I can recover it.&lt;br&gt;\r\nThe wrapping occurs as follow:\r\n1. *Generate a secret AES key in the HSM*, using the public part of the EC master key, the private part of the internal key pair and a derivation mechanism `CKM_ECDH1_DERIVE`. The derivation parameters for this mechanism are: a derivation function `CKD_SHA256_KDF`, shared data and public data (public data are taken from the public EC master key).\r\n2. *Wrap the private key*, using the secret AES key and a mechanims such as `CKM_AES_GCM`, `CKM_AES_KEY_WRAP_PAD` or `CKM_AES_CBC_PAD`.\r\n3. The HSM returns a byte array.\r\n\r\nThen I would like to verify if the wrapped private is the expected one.\r\n\r\nI know how to decrypt the private key once I have recovered the secret key used ot protect it. Because it is not like RSA, I have to derive the same secret key using some elements I have, but I don&#39;t know how to do this with BC.&lt;br&gt;\r\nI&#39;m trying to use something like this, trying to find an concrete implementation of `AlgorithmParamSpec`:\r\n```\r\nKeyAgreement agreement = KeyAgreement.getInstance(&quot;ECCDHwithSHA256CKDF&quot;, &quot;BC&quot;);\r\nagreement.init(externalEcMasterKey.getPrivate(), someAlgorithmParamSpec);\r\nagreement.doPhase(internalEcKeyPair.asJavaPublic(), true);\r\nSecretKey agreedKey = agreement.generateSecret(&quot;AES[256]&quot;);\r\n```\r\nUnfortunately, with `UserKeyingMaterialSpec` for example, it returns a different key at each time, which is not what I want :)\r\n\r\nThanks in advance ","title":"Wrap-unwrap of private key using EC master key and Bouncy Castle","body":"<p>I want to wrap a private key out of a HSM, using an external EC key pair (<em>master key</em>) and then verify that I can recover it.<br>\nThe wrapping occurs as follow:</p>\n<ol>\n<li><em>Generate a secret AES key in the HSM</em>, using the public part of the EC master key, the private part of the internal key pair and a derivation mechanism <code>CKM_ECDH1_DERIVE</code>. The derivation parameters for this mechanism are: a derivation function <code>CKD_SHA256_KDF</code>, shared data and public data (public data are taken from the public EC master key).</li>\n<li><em>Wrap the private key</em>, using the secret AES key and a mechanims such as <code>CKM_AES_GCM</code>, <code>CKM_AES_KEY_WRAP_PAD</code> or <code>CKM_AES_CBC_PAD</code>.</li>\n<li>The HSM returns a byte array.</li>\n</ol>\n<p>Then I would like to verify if the wrapped private is the expected one.</p>\n<p>I know how to decrypt the private key once I have recovered the secret key used ot protect it. Because it is not like RSA, I have to derive the same secret key using some elements I have, but I don't know how to do this with BC.<br>\nI'm trying to use something like this, trying to find an concrete implementation of <code>AlgorithmParamSpec</code>:</p>\n<pre><code>KeyAgreement agreement = KeyAgreement.getInstance(&quot;ECCDHwithSHA256CKDF&quot;, &quot;BC&quot;);\nagreement.init(externalEcMasterKey.getPrivate(), someAlgorithmParamSpec);\nagreement.doPhase(internalEcKeyPair.asJavaPublic(), true);\nSecretKey agreedKey = agreement.generateSecret(&quot;AES[256]&quot;);\n</code></pre>\n<p>Unfortunately, with <code>UserKeyingMaterialSpec</code> for example, it returns a different key at each time, which is not what I want :)</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","aes","encryption"],"answers":[{"comments":[{"owner":{"account_id":450119,"reputation":2794,"user_id":845279,"accept_rate":88,"display_name":"user845279"},"score":0,"creation_date":1337970349,"post_id":10759422,"comment_id":13984886,"body_markdown":"Block cipher encryption algorithms require the data (mypassword in your case) to be multiple of `n` bytes, where `n` depends on the key size. Look at [this](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Padding) wiki section for more info.","body":"Block cipher encryption algorithms require the data (mypassword in your case) to be multiple of <code>n</code> bytes, where <code>n</code> depends on the key size. Look at <a href=\"http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Padding\" rel=\"nofollow noreferrer\">this</a> wiki section for more info."},{"owner":{"account_id":455747,"reputation":1467,"user_id":854108,"accept_rate":68,"display_name":"Praneeth"},"score":0,"creation_date":1337970617,"post_id":10759422,"comment_id":13984977,"body_markdown":"I have changed the cleartext data from `mypassword` to `1234567890123456` but I still get the same exception.  My key is 16B as well","body":"I have changed the cleartext data from <code>mypassword</code> to <code>1234567890123456</code> but I still get the same exception.  My key is 16B as well"},{"owner":{"account_id":455747,"reputation":1467,"user_id":854108,"accept_rate":68,"display_name":"Praneeth"},"score":0,"creation_date":1337971438,"post_id":10759422,"comment_id":13985252,"body_markdown":"Perfect, `BASE64Encoder` and `BASE64Decoder` did the job.  Thanks","body":"Perfect, <code>BASE64Encoder</code> and <code>BASE64Decoder</code> did the job.  Thanks"},{"owner":{"account_id":2805797,"reputation":995,"user_id":2413069,"accept_rate":88,"display_name":"Igr"},"score":0,"creation_date":1372251342,"post_id":10759422,"comment_id":25122595,"body_markdown":"@Praneeth how did you solved? Where did you use BASE64 encoder or decoder?","body":"@Praneeth how did you solved? Where did you use BASE64 encoder or decoder?"}],"tags":[],"owner":{"account_id":179030,"reputation":13845,"user_id":411393,"accept_rate":100,"display_name":"QuantumMechanic"},"comment_count":4,"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1337971446,"creation_date":1337969589,"answer_id":10759422,"question_id":10759392,"body_markdown":"If for a block cipher you&#39;re not going to use a `Cipher` transformation that includes a padding scheme, you need to have the number of bytes in the plaintext be an integral multiple of the block size of the cipher.\r\n\r\nSo either pad out your plaintext to a multiple of 16 bytes (which is the AES block size), or specify a padding scheme when you create your `Cipher` objects.  For example, you could use:\r\n\r\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n\r\nUnless you have a good reason not to, use a padding scheme that&#39;s already part of the JCE implementation.  They&#39;ve thought out a number of subtleties and corner cases you&#39;ll have to realize and deal with on your own otherwise.\r\n\r\n---\r\n\r\nOk, your second problem is that you are using `String` to hold the ciphertext.\r\n\r\nIn general,\r\n\r\n    String s = new String(someBytes);\r\n    byte[] retrievedBytes = s.getBytes();\r\n\r\nwill **not** have `someBytes` and `retrievedBytes` being identical.\r\n\r\nIf you want/have to hold the ciphertext in a `String`, base64-encode the ciphertext bytes first and construct the `String` from the base64-encoded bytes.  Then when you decrypt you&#39;ll `getBytes()` to get the base64-encoded bytes out of the `String`, then base64-decode them to get the real ciphertext, then decrypt that.\r\n\r\nThe reason for this problem is that most (all?) character encodings are not capable of mapping arbitrary bytes to valid characters.  So when you create your `String` from the ciphertext, the `String` constructor (which applies a character encoding to turn the bytes into characters) essentially has to throw away some of the bytes because it can make no sense of them.  Thus, when you get bytes out of the string, they are not the same bytes you put into the string.\r\n\r\nIn Java (and in modern programming in general), you cannot assume that one character = one byte, unless you know absolutely you&#39;re dealing with ASCII.  This is why you need to use base64 (or something like it) if you want to build strings from arbitrary bytes.\r\n","title":"Java AES encryption and decryption","body":"<p>If for a block cipher you're not going to use a <code>Cipher</code> transformation that includes a padding scheme, you need to have the number of bytes in the plaintext be an integral multiple of the block size of the cipher.</p>\n\n<p>So either pad out your plaintext to a multiple of 16 bytes (which is the AES block size), or specify a padding scheme when you create your <code>Cipher</code> objects.  For example, you could use:</p>\n\n<pre><code>Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n</code></pre>\n\n<p>Unless you have a good reason not to, use a padding scheme that's already part of the JCE implementation.  They've thought out a number of subtleties and corner cases you'll have to realize and deal with on your own otherwise.</p>\n\n<hr>\n\n<p>Ok, your second problem is that you are using <code>String</code> to hold the ciphertext.</p>\n\n<p>In general,</p>\n\n<pre><code>String s = new String(someBytes);\nbyte[] retrievedBytes = s.getBytes();\n</code></pre>\n\n<p>will <strong>not</strong> have <code>someBytes</code> and <code>retrievedBytes</code> being identical.</p>\n\n<p>If you want/have to hold the ciphertext in a <code>String</code>, base64-encode the ciphertext bytes first and construct the <code>String</code> from the base64-encoded bytes.  Then when you decrypt you'll <code>getBytes()</code> to get the base64-encoded bytes out of the <code>String</code>, then base64-decode them to get the real ciphertext, then decrypt that.</p>\n\n<p>The reason for this problem is that most (all?) character encodings are not capable of mapping arbitrary bytes to valid characters.  So when you create your <code>String</code> from the ciphertext, the <code>String</code> constructor (which applies a character encoding to turn the bytes into characters) essentially has to throw away some of the bytes because it can make no sense of them.  Thus, when you get bytes out of the string, they are not the same bytes you put into the string.</p>\n\n<p>In Java (and in modern programming in general), you cannot assume that one character = one byte, unless you know absolutely you're dealing with ASCII.  This is why you need to use base64 (or something like it) if you want to build strings from arbitrary bytes.</p>\n"},{"comments":[{"owner":{"account_id":77229,"reputation":9046,"user_id":220579,"accept_rate":72,"display_name":"Kumar Bibek"},"score":0,"creation_date":1337970575,"post_id":10759481,"comment_id":13984962,"body_markdown":"Oh, Make sure your key is 16 chars long.","body":"Oh, Make sure your key is 16 chars long."},{"owner":{"account_id":455747,"reputation":1467,"user_id":854108,"accept_rate":68,"display_name":"Praneeth"},"score":0,"creation_date":1337970661,"post_id":10759481,"comment_id":13984990,"body_markdown":"Key is 16B `ThisIsASecretKey`","body":"Key is 16B <code>ThisIsASecretKey</code>"}],"tags":[],"owner":{"account_id":77229,"reputation":9046,"user_id":220579,"accept_rate":72,"display_name":"Kumar Bibek"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1337970741,"creation_date":1337969837,"answer_id":10759481,"question_id":10759392,"body_markdown":"Try this, a simpler solution.\r\n\r\n&lt;pre&gt;\r\nbyte[] salt = &quot;ThisIsASecretKey&quot;.getBytes();\r\nKey key = new SecretKeySpec(salt, 0, 16, &quot;AES&quot;);\r\n\r\nCipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n&lt;/pre&gt;","title":"Java AES encryption and decryption","body":"<p>Try this, a simpler solution.</p>\n\n<pre>\nbyte[] salt = \"ThisIsASecretKey\".getBytes();\nKey key = new SecretKeySpec(salt, 0, 16, \"AES\");\n\nCipher cipher = Cipher.getInstance(\"AES\");\n</pre>\n"},{"tags":[],"owner":{"account_id":226652,"reputation":3525,"user_id":487812,"accept_rate":59,"display_name":"the_new_mr"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1373885768,"creation_date":1373885768,"answer_id":17652584,"question_id":10759392,"body_markdown":"You state that you want to encrypt/decrypt a password.  I&#39;m not sure exactly of what your specific use case is but, generally, passwords are not stored in a form where they can be decrypted.  General practice is to salt the password and use suitably powerful one-way hash (such as PBKDF2).\r\n\r\nTake a look at the following link for more information.\r\n\r\nhttp://crackstation.net/hashing-security.htm","title":"Java AES encryption and decryption","body":"<p>You state that you want to encrypt/decrypt a password.  I'm not sure exactly of what your specific use case is but, generally, passwords are not stored in a form where they can be decrypted.  General practice is to salt the password and use suitably powerful one-way hash (such as PBKDF2).</p>\n\n<p>Take a look at the following link for more information.</p>\n\n<p><a href=\"http://crackstation.net/hashing-security.htm\" rel=\"nofollow\">http://crackstation.net/hashing-security.htm</a></p>\n"},{"tags":[],"owner":{"account_id":62229,"reputation":21708,"user_id":185022,"accept_rate":81,"display_name":"AZ_"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379645890,"creation_date":1379645890,"answer_id":18908139,"question_id":10759392,"body_markdown":"Complete example of *encrypting/Decrypting* a **huge video without throwing Java** `OutOfMemoryException` and using Java `SecureRandom` for Initialization Vector generation. Also depicted storing key bytes to database and then reconstructing same key from those bytes.\r\n\r\nhttps://stackoverflow.com/a/18892960/185022","title":"Java AES encryption and decryption","body":"<p>Complete example of <em>encrypting/Decrypting</em> a <strong>huge video without throwing Java</strong> <code>OutOfMemoryException</code> and using Java <code>SecureRandom</code> for Initialization Vector generation. Also depicted storing key bytes to database and then reconstructing same key from those bytes.</p>\n\n<p><a href=\"https://stackoverflow.com/a/18892960/185022\">https://stackoverflow.com/a/18892960/185022</a></p>\n"},{"tags":[],"owner":{"account_id":2740704,"reputation":31,"user_id":2362312,"display_name":"user2362312"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1382003549,"creation_date":1382003549,"answer_id":19423426,"question_id":10759392,"body_markdown":"    import javax.crypto.*;    \r\n    import java.security.*;  \r\n    public class Java {\r\n             \r\n    private static SecretKey key = null;         \r\n       private static Cipher cipher = null; \r\n    \r\n       public static void main(String[] args) throws Exception\r\n       {\r\n    \r\n          Security.addProvider(new com.sun.crypto.provider.SunJCE());\r\n    \r\n          KeyGenerator keyGenerator =\r\n             KeyGenerator.getInstance(&quot;DESede&quot;);\r\n          keyGenerator.init(168);\r\n          SecretKey secretKey = keyGenerator.generateKey();\r\n          cipher = Cipher.getInstance(&quot;DESede&quot;);\r\n    \r\n          String clearText = &quot;I am an Employee&quot;;\r\n          byte[] clearTextBytes = clearText.getBytes(&quot;UTF8&quot;);\r\n    \r\n          cipher.init(Cipher.ENCRYPT_MODE, secretKey);\r\n          byte[] cipherBytes = cipher.doFinal(clearTextBytes);\r\n          String cipherText = new String(cipherBytes, &quot;UTF8&quot;);\r\n    \r\n          cipher.init(Cipher.DECRYPT_MODE, secretKey);\r\n          byte[] decryptedBytes = cipher.doFinal(cipherBytes);\r\n          String decryptedText = new String(decryptedBytes, &quot;UTF8&quot;);\r\n    \r\n          System.out.println(&quot;Before encryption: &quot; + clearText);\r\n          System.out.println(&quot;After encryption: &quot; + cipherText);\r\n          System.out.println(&quot;After decryption: &quot; + decryptedText);\r\n       }\r\n    }\r\n    \r\n    \r\n    // Output\r\n    \r\n    /*\r\n    Before encryption: I am an Employee  \r\n    After encryption: }\u000F?ｽ?ｽj6?ｽm?ｽZyc?ｽ?ｽ*?ｽ?ｽl#l?ｽdV  \r\n    After decryption: I am an Employee  \r\n    */","title":"Java AES encryption and decryption","body":"<pre><code>import javax.crypto.*;    \nimport java.security.*;  \npublic class Java {\n\nprivate static SecretKey key = null;         \n   private static Cipher cipher = null; \n\n   public static void main(String[] args) throws Exception\n   {\n\n      Security.addProvider(new com.sun.crypto.provider.SunJCE());\n\n      KeyGenerator keyGenerator =\n         KeyGenerator.getInstance(\"DESede\");\n      keyGenerator.init(168);\n      SecretKey secretKey = keyGenerator.generateKey();\n      cipher = Cipher.getInstance(\"DESede\");\n\n      String clearText = \"I am an Employee\";\n      byte[] clearTextBytes = clearText.getBytes(\"UTF8\");\n\n      cipher.init(Cipher.ENCRYPT_MODE, secretKey);\n      byte[] cipherBytes = cipher.doFinal(clearTextBytes);\n      String cipherText = new String(cipherBytes, \"UTF8\");\n\n      cipher.init(Cipher.DECRYPT_MODE, secretKey);\n      byte[] decryptedBytes = cipher.doFinal(cipherBytes);\n      String decryptedText = new String(decryptedBytes, \"UTF8\");\n\n      System.out.println(\"Before encryption: \" + clearText);\n      System.out.println(\"After encryption: \" + cipherText);\n      System.out.println(\"After decryption: \" + decryptedText);\n   }\n}\n\n\n// Output\n\n/*\nBefore encryption: I am an Employee  \nAfter encryption: }\u000F?ｽ?ｽj6?ｽm?ｽZyc?ｽ?ｽ*?ｽ?ｽl#l?ｽdV  \nAfter decryption: I am an Employee  \n*/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3571004,"reputation":652,"user_id":2981326,"display_name":"Greg"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1389728326,"creation_date":1389655659,"answer_id":21103412,"question_id":10759392,"body_markdown":"Here is the implementation that was mentioned above:\r\n    \r\n    \t\r\n\timport javax.crypto.Cipher;\r\n\timport javax.crypto.SecretKey;\r\n\timport javax.crypto.SecretKeyFactory;\r\n\timport javax.crypto.spec.PBEKeySpec;\r\n\timport javax.crypto.spec.SecretKeySpec;\r\n\r\n\timport org.apache.commons.codec.binary.Base64;\r\n\timport org.apache.commons.codec.binary.StringUtils;\r\n\r\n    try\r\n\t{\r\n\t\tString passEncrypt = &quot;my password&quot;;\r\n\t\tbyte[] saltEncrypt = &quot;choose a better salt&quot;.getBytes();\r\n\t\tint iterationsEncrypt = 10000;\r\n\t\tSecretKeyFactory factoryKeyEncrypt = SecretKeyFactory\r\n\t\t\t\t.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);\r\n\t\tSecretKey tmp = factoryKeyEncrypt.generateSecret(new PBEKeySpec(\r\n\t\t\t\tpassEncrypt.toCharArray(), saltEncrypt, iterationsEncrypt,\r\n\t\t\t\t128));\r\n\t\tSecretKeySpec encryptKey = new SecretKeySpec(tmp.getEncoded(),\r\n\t\t\t\t&quot;AES&quot;);\r\n\r\n\t\tCipher aesCipherEncrypt = Cipher\r\n\t\t\t\t.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);\r\n\t\taesCipherEncrypt.init(Cipher.ENCRYPT_MODE, encryptKey);\r\n\r\n\t\t// get the bytes\r\n\t\tbyte[] bytes = StringUtils.getBytesUtf8(toEncodeEncryptString);\r\n\r\n\t\t// encrypt the bytes\r\n\t\tbyte[] encryptBytes = aesCipherEncrypt.doFinal(bytes);\r\n\r\n\t\t// encode 64 the encrypted bytes\r\n\t\tString encoded = Base64.encodeBase64URLSafeString(encryptBytes);\r\n\r\n\t\tSystem.out.println(&quot;e: &quot; + encoded);\r\n\r\n\t\t// assume some transport happens here\r\n\r\n\t\t// create a new string, to make sure we are not pointing to the same\r\n\t\t// string as the one above\r\n\t\tString encodedEncrypted = new String(encoded);\r\n\r\n\t\t//we recreate the same salt/encrypt as if its a separate system\r\n\t\tString passDecrypt = &quot;my password&quot;;\r\n\t\tbyte[] saltDecrypt = &quot;choose a better salt&quot;.getBytes();\r\n\t\tint iterationsDecrypt = 10000;\r\n\t\tSecretKeyFactory factoryKeyDecrypt = SecretKeyFactory\r\n\t\t\t\t.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);\r\n\t\tSecretKey tmp2 = factoryKeyDecrypt.generateSecret(new PBEKeySpec(passDecrypt\r\n\t\t\t\t.toCharArray(), saltDecrypt, iterationsDecrypt, 128));\r\n\t\tSecretKeySpec decryptKey = new SecretKeySpec(tmp2.getEncoded(), &quot;AES&quot;);\r\n\r\n\t\tCipher aesCipherDecrypt = Cipher.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);\r\n                aesCipherDecrypt.init(Cipher.DECRYPT_MODE, decryptKey);\r\n\t\t\r\n\t\t//basically we reverse the process we did earlier\r\n\t\t\r\n\t\t// get the bytes from encodedEncrypted string\r\n\t\tbyte[] e64bytes = StringUtils.getBytesUtf8(encodedEncrypted);\r\n\t\t\r\n\t\t// decode 64, now the bytes should be encrypted\r\n\t\tbyte[] eBytes = Base64.decodeBase64(e64bytes);\r\n\r\n\t\t// decrypt the bytes\r\n\t\tbyte[] cipherDecode = aesCipherDecrypt.doFinal(eBytes);\r\n\r\n\t\t// to string\r\n\t\tString decoded = StringUtils.newStringUtf8(cipherDecode);\r\n\r\n\t\tSystem.out.println(&quot;d: &quot; + decoded);\r\n\r\n\t}\r\n\tcatch (Exception e)\r\n\t{\r\n\t\te.printStackTrace();\r\n\t}","title":"Java AES encryption and decryption","body":"<p>Here is the implementation that was mentioned above:</p>\n\n<pre><code>import javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nimport org.apache.commons.codec.binary.Base64;\nimport org.apache.commons.codec.binary.StringUtils;\n\ntry\n{\n    String passEncrypt = \"my password\";\n    byte[] saltEncrypt = \"choose a better salt\".getBytes();\n    int iterationsEncrypt = 10000;\n    SecretKeyFactory factoryKeyEncrypt = SecretKeyFactory\n            .getInstance(\"PBKDF2WithHmacSHA1\");\n    SecretKey tmp = factoryKeyEncrypt.generateSecret(new PBEKeySpec(\n            passEncrypt.toCharArray(), saltEncrypt, iterationsEncrypt,\n            128));\n    SecretKeySpec encryptKey = new SecretKeySpec(tmp.getEncoded(),\n            \"AES\");\n\n    Cipher aesCipherEncrypt = Cipher\n            .getInstance(\"AES/ECB/PKCS5Padding\");\n    aesCipherEncrypt.init(Cipher.ENCRYPT_MODE, encryptKey);\n\n    // get the bytes\n    byte[] bytes = StringUtils.getBytesUtf8(toEncodeEncryptString);\n\n    // encrypt the bytes\n    byte[] encryptBytes = aesCipherEncrypt.doFinal(bytes);\n\n    // encode 64 the encrypted bytes\n    String encoded = Base64.encodeBase64URLSafeString(encryptBytes);\n\n    System.out.println(\"e: \" + encoded);\n\n    // assume some transport happens here\n\n    // create a new string, to make sure we are not pointing to the same\n    // string as the one above\n    String encodedEncrypted = new String(encoded);\n\n    //we recreate the same salt/encrypt as if its a separate system\n    String passDecrypt = \"my password\";\n    byte[] saltDecrypt = \"choose a better salt\".getBytes();\n    int iterationsDecrypt = 10000;\n    SecretKeyFactory factoryKeyDecrypt = SecretKeyFactory\n            .getInstance(\"PBKDF2WithHmacSHA1\");\n    SecretKey tmp2 = factoryKeyDecrypt.generateSecret(new PBEKeySpec(passDecrypt\n            .toCharArray(), saltDecrypt, iterationsDecrypt, 128));\n    SecretKeySpec decryptKey = new SecretKeySpec(tmp2.getEncoded(), \"AES\");\n\n    Cipher aesCipherDecrypt = Cipher.getInstance(\"AES/ECB/PKCS5Padding\");\n            aesCipherDecrypt.init(Cipher.DECRYPT_MODE, decryptKey);\n\n    //basically we reverse the process we did earlier\n\n    // get the bytes from encodedEncrypted string\n    byte[] e64bytes = StringUtils.getBytesUtf8(encodedEncrypted);\n\n    // decode 64, now the bytes should be encrypted\n    byte[] eBytes = Base64.decodeBase64(e64bytes);\n\n    // decrypt the bytes\n    byte[] cipherDecode = aesCipherDecrypt.doFinal(eBytes);\n\n    // to string\n    String decoded = StringUtils.newStringUtf8(cipherDecode);\n\n    System.out.println(\"d: \" + decoded);\n\n}\ncatch (Exception e)\n{\n    e.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":455747,"reputation":1467,"user_id":854108,"accept_rate":68,"display_name":"Praneeth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119220,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":10759422,"answer_count":6,"score":23,"last_activity_date":1683307624,"creation_date":1337969461,"question_id":10759392,"body_markdown":"I would like to encrypt and decrypt a password using 128 bit AES encryption with 16 byte key.  I am getting `javax.crypto.BadPaddingException` error while decrypting the value.  Am I missing anything while decrypting?\r\n\r\n    public static void main(String args[]) {\r\n        Test t = new Test();\r\n        String encrypt = new String(t.encrypt(&quot;mypassword&quot;));\r\n        System.out.println(&quot;decrypted value:&quot; + t.decrypt(&quot;ThisIsASecretKey&quot;, encrypt));\r\n    }\r\n\r\n    public String encrypt(String value) {\r\n        try {\r\n            byte[] raw = new byte[]{&#39;T&#39;, &#39;h&#39;, &#39;i&#39;, &#39;s&#39;, &#39;I&#39;, &#39;s&#39;, &#39;A&#39;, &#39;S&#39;, &#39;e&#39;, &#39;c&#39;, &#39;r&#39;, &#39;e&#39;, &#39;t&#39;, &#39;K&#39;, &#39;e&#39;, &#39;y&#39;};\r\n            SecretKeySpec skeySpec = new SecretKeySpec(raw, &quot;AES&quot;);\r\n            Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n            cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\r\n            byte[] encrypted = cipher.doFinal(value.getBytes());\r\n            System.out.println(&quot;encrypted string:&quot; + (new String(encrypted)));\r\n            return new String(skeySpec.getEncoded());\r\n        } catch (NoSuchAlgorithmException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (IllegalBlockSizeException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (BadPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (InvalidKeyException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public String decrypt(String key, String encrypted) {\r\n        try {\r\n            SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), &quot;AES&quot;);\r\n            Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n            cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(skeySpec.getEncoded(), &quot;AES&quot;));\r\n            //getting error here\r\n            byte[] original = cipher.doFinal(encrypted.getBytes());\r\n            return new String(original);\r\n        } catch (IllegalBlockSizeException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (BadPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (InvalidKeyException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchAlgorithmException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return null;\r\n    }  \r\n\r\n\r\nError message\r\n\r\n    encrypted string:�Bj�.�Ntk�F�`�\r\n    encrypted key:ThisIsASecretKey\r\n    decrypted value:null\r\n    May 25, 2012 12:54:02 PM bean.Test decrypt\r\n    SEVERE: null\r\n    javax.crypto.BadPaddingException: Given final block not properly padded\r\n\tat com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)\r\n\tat com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)\r\n\tat com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)\r\n\tat javax.crypto.Cipher.doFinal(DashoA13*..)\r\n\tat bean.Test.decrypt(Test.java:55)\r\n\tat bean.Test.main(Test.java:24)\r\n\r\n**Finally I am using following Solution based on @QuantumMechanic answer**\r\n\r\n    public class Test {\r\n\r\n      public String encryptionKey;\r\n\r\n      public static void main(String args[]) {\r\n        Test t = new Test();\r\n        String encrypt = t.encrypt(&quot;mypassword&quot;);\r\n        System.out.println(&quot;decrypted value:&quot; + t.decrypt(t.encryptionKey, encrypt));\r\n      }\r\n\r\n      public String encrypt(String value) {\r\n        try {\r\n            // Get the KeyGenerator\r\n            KeyGenerator kgen = KeyGenerator.getInstance(&quot;AES&quot;);\r\n            kgen.init(256);\r\n            // Generate the secret key specs.\r\n            SecretKey skey = kgen.generateKey();\r\n            byte[] raw = skey.getEncoded();\r\n            String key = new Base64().encodeAsString(raw);\r\n            this.encryptionKey = key;\r\n            System.out.println(&quot;------------------Key------------------&quot;);\r\n            System.out.println(key);\r\n            System.out.println(&quot;--------------End of Key---------------&quot;);\r\n            SecretKeySpec skeySpec = new SecretKeySpec(raw, &quot;AES&quot;);\r\n            Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n            cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\r\n            String encrypt = (new Base64()).encodeAsString(cipher.doFinal(value.getBytes()));\r\n            System.out.println(&quot;encrypted string:&quot; + encrypt);\r\n            return encrypt;\r\n        } catch (NoSuchAlgorithmException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (IllegalBlockSizeException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (BadPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (InvalidKeyException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return null;\r\n      }\r\n\r\n      public String decrypt(String key, String encrypted) {\r\n        try {\r\n            Key k = new SecretKeySpec(Base64.getDecoder().decode(key), &quot;AES&quot;);\r\n            Cipher c = Cipher.getInstance(&quot;AES&quot;);\r\n            c.init(Cipher.DECRYPT_MODE, k);\r\n            byte[] decodedValue = Base64.getDecoder().decode(encrypted);\r\n            byte[] decValue = c.doFinal(decodedValue);\r\n            String decryptedValue = new String(decValue);\r\n            return decryptedValue;\r\n        } catch (IllegalBlockSizeException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (BadPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (InvalidKeyException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchAlgorithmException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return null;\r\n      }\r\n    }","title":"Java AES encryption and decryption","body":"<p>I would like to encrypt and decrypt a password using 128 bit AES encryption with 16 byte key.  I am getting <code>javax.crypto.BadPaddingException</code> error while decrypting the value.  Am I missing anything while decrypting?</p>\n<pre><code>public static void main(String args[]) {\n    Test t = new Test();\n    String encrypt = new String(t.encrypt(&quot;mypassword&quot;));\n    System.out.println(&quot;decrypted value:&quot; + t.decrypt(&quot;ThisIsASecretKey&quot;, encrypt));\n}\n\npublic String encrypt(String value) {\n    try {\n        byte[] raw = new byte[]{'T', 'h', 'i', 's', 'I', 's', 'A', 'S', 'e', 'c', 'r', 'e', 't', 'K', 'e', 'y'};\n        SecretKeySpec skeySpec = new SecretKeySpec(raw, &quot;AES&quot;);\n        Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\n        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\n        byte[] encrypted = cipher.doFinal(value.getBytes());\n        System.out.println(&quot;encrypted string:&quot; + (new String(encrypted)));\n        return new String(skeySpec.getEncoded());\n    } catch (NoSuchAlgorithmException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (IllegalBlockSizeException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (BadPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (InvalidKeyException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return null;\n}\n\npublic String decrypt(String key, String encrypted) {\n    try {\n        SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), &quot;AES&quot;);\n        Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\n        cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(skeySpec.getEncoded(), &quot;AES&quot;));\n        //getting error here\n        byte[] original = cipher.doFinal(encrypted.getBytes());\n        return new String(original);\n    } catch (IllegalBlockSizeException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (BadPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (InvalidKeyException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchAlgorithmException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return null;\n}  \n</code></pre>\n<p>Error message</p>\n<pre><code>encrypted string:�Bj�.�Ntk�F�`�\nencrypted key:ThisIsASecretKey\ndecrypted value:null\nMay 25, 2012 12:54:02 PM bean.Test decrypt\nSEVERE: null\njavax.crypto.BadPaddingException: Given final block not properly padded\nat com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)\nat com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)\nat com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)\nat javax.crypto.Cipher.doFinal(DashoA13*..)\nat bean.Test.decrypt(Test.java:55)\nat bean.Test.main(Test.java:24)\n</code></pre>\n<p><strong>Finally I am using following Solution based on @QuantumMechanic answer</strong></p>\n<pre><code>public class Test {\n\n  public String encryptionKey;\n\n  public static void main(String args[]) {\n    Test t = new Test();\n    String encrypt = t.encrypt(&quot;mypassword&quot;);\n    System.out.println(&quot;decrypted value:&quot; + t.decrypt(t.encryptionKey, encrypt));\n  }\n\n  public String encrypt(String value) {\n    try {\n        // Get the KeyGenerator\n        KeyGenerator kgen = KeyGenerator.getInstance(&quot;AES&quot;);\n        kgen.init(256);\n        // Generate the secret key specs.\n        SecretKey skey = kgen.generateKey();\n        byte[] raw = skey.getEncoded();\n        String key = new Base64().encodeAsString(raw);\n        this.encryptionKey = key;\n        System.out.println(&quot;------------------Key------------------&quot;);\n        System.out.println(key);\n        System.out.println(&quot;--------------End of Key---------------&quot;);\n        SecretKeySpec skeySpec = new SecretKeySpec(raw, &quot;AES&quot;);\n        Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\n        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\n        String encrypt = (new Base64()).encodeAsString(cipher.doFinal(value.getBytes()));\n        System.out.println(&quot;encrypted string:&quot; + encrypt);\n        return encrypt;\n    } catch (NoSuchAlgorithmException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (IllegalBlockSizeException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (BadPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (InvalidKeyException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return null;\n  }\n\n  public String decrypt(String key, String encrypted) {\n    try {\n        Key k = new SecretKeySpec(Base64.getDecoder().decode(key), &quot;AES&quot;);\n        Cipher c = Cipher.getInstance(&quot;AES&quot;);\n        c.init(Cipher.DECRYPT_MODE, k);\n        byte[] decodedValue = Base64.getDecoder().decode(encrypted);\n        byte[] decValue = c.doFinal(decodedValue);\n        String decryptedValue = new String(decValue);\n        return decryptedValue;\n    } catch (IllegalBlockSizeException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (BadPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (InvalidKeyException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchAlgorithmException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return null;\n  }\n}\n</code></pre>\n"},{"tags":["java","graphics","printing","orientation"],"answers":[{"comments":[{"owner":{"account_id":2375814,"reputation":375,"user_id":2079210,"accept_rate":75,"display_name":"anonimoo90"},"score":0,"creation_date":1416468022,"post_id":27033735,"comment_id":42588729,"body_markdown":"i did what u said, replaced getWidth and getHeight for getImageableWidth and getImageableHeight.... i also added the g2.translate line after g2.drawrenderedimage ... if i print portrait image its good but for landscape now it cuts the image even more...it remove the left and right size of the picture and just positions part of the image on the center of the paper. See edit","body":"i did what u said, replaced getWidth and getHeight for getImageableWidth and getImageableHeight.... i also added the g2.translate line after g2.drawrenderedimage ... if i print portrait image its good but for landscape now it cuts the image even more...it remove the left and right size of the picture and just positions part of the image on the center of the paper. See edit"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416474480,"post_id":27033735,"comment_id":42591739,"body_markdown":"Check update, with runnable example, works fine for me","body":"Check update, with runnable example, works fine for me"},{"owner":{"account_id":2375814,"reputation":375,"user_id":2079210,"accept_rate":75,"display_name":"anonimoo90"},"score":0,"creation_date":1416493865,"post_id":27033735,"comment_id":42603137,"body_markdown":"thanks but it still doesnt fill the paper on landscape, it cuts the landscape image, the left and right side. It just prints the center of the image","body":"thanks but it still doesnt fill the paper on landscape, it cuts the landscape image, the left and right side. It just prints the center of the image"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416512836,"post_id":27033735,"comment_id":42614269,"body_markdown":"Your affine transform is compounding.  Instead of scaling and translating, try translating the graphics context first.  I&#39;ve avoid using `AffineTransform` in this case for, in part, this reason","body":"Your affine transform is compounding.  Instead of scaling and translating, try translating the graphics context first.  I&#39;ve avoid using <code>AffineTransform</code> in this case for, in part, this reason"},{"owner":{"account_id":2375814,"reputation":375,"user_id":2079210,"accept_rate":75,"display_name":"anonimoo90"},"score":0,"creation_date":1416592244,"post_id":27033735,"comment_id":42648015,"body_markdown":"I am stuck, i am currently using the runnable code you posted. i gave it a 1800x1200 landscape image and the result is that lamborghini landscape picture u see on my post up there, as you can see, it doesn&#39;t fill up the whole paper.","body":"I am stuck, i am currently using the runnable code you posted. i gave it a 1800x1200 landscape image and the result is that lamborghini landscape picture u see on my post up there, as you can see, it doesn&#39;t fill up the whole paper."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416603179,"post_id":27033735,"comment_id":42653014,"body_markdown":"Is that your own print preview code? Have you tried printing it to the printer using the example code?","body":"Is that your own print preview code? Have you tried printing it to the printer using the example code?"},{"owner":{"account_id":2375814,"reputation":375,"user_id":2079210,"accept_rate":75,"display_name":"anonimoo90"},"score":0,"creation_date":1416763253,"post_id":27033735,"comment_id":42690105,"body_markdown":"thats the print preview window of my print device EPSON L800... and i tried printing it on actual paper and appear as the preview said it would","body":"thats the print preview window of my print device EPSON L800... and i tried printing it on actual paper and appear as the preview said it would"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416774127,"post_id":27033735,"comment_id":42693527,"body_markdown":"That would suggest that there is something wrong with how the print driver translates the graphics, as this approach has worked on just about every other printed I&#39;ve used it on. It &quot;seems&quot; lie the x position is been translated incorrectly. You might try use the negative of imageableX or translate the x position as 0","body":"That would suggest that there is something wrong with how the print driver translates the graphics, as this approach has worked on just about every other printed I&#39;ve used it on. It &quot;seems&quot; lie the x position is been translated incorrectly. You might try use the negative of imageableX or translate the x position as 0"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531886660,"creation_date":1416467299,"answer_id":27033735,"question_id":27033691,"body_markdown":"Don&#39;t use `PageFormat#getWidth` or `PageFormat#getHeight`, use `PageFormat#getImageableWidth` and `PageFormat#getImageableHeight` instead\r\n\r\nFrom the [JavaDocs](https://docs.oracle.com/javase/7/docs/api/java/awt/print/PageFormat.html)\r\n\r\n&gt; Return the height/width, in 1/72nds of an inch, of the imageable area of the page. This method takes into account the orientation of the page.\r\n\r\nYou should also translate the printer `Graphics` by the `ImageableX/Y`...\r\n\r\n    g2.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());\r\n\r\n**Runnable example**\r\n\r\nThis is a simple runnable example.  This code was able to take the original (left) and print it both in portrait and landscape without issue...\r\n\r\n![enter image description here][1]\r\n\r\n\timport java.awt.Color;\r\n\timport java.awt.Dimension;\r\n\timport java.awt.EventQueue;\r\n\timport java.awt.Graphics;\r\n\timport java.awt.Graphics2D;\r\n\timport java.awt.Image;\r\n\timport java.awt.image.BufferedImage;\r\n\timport java.awt.print.PageFormat;\r\n\timport java.awt.print.Printable;\r\n\timport java.awt.print.PrinterException;\r\n\timport java.awt.print.PrinterJob;\r\n\timport java.io.File;\r\n\timport java.io.IOException;\r\n\timport javax.imageio.ImageIO;\r\n\timport javax.swing.UIManager;\r\n\timport javax.swing.UnsupportedLookAndFeelException;\r\n\r\n\tpublic class PrintTest100 {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tUIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n\t\t\t\t\t} catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\r\n\t\t\t\t\t\tex.printStackTrace();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tPrinterJob pj = PrinterJob.getPrinterJob();\r\n\t\t\t\t\t\tpj.setJobName(&quot; Print Component &quot;);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tPageFormat pf = pj.defaultPage();\r\n\t//\t\t\t\t\tpf.setOrientation(PageFormat.LANDSCAPE);\r\n\t//\t\t\t\t\tpf = pj.validatePage(pf);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tpj.setPrintable(new ImagePrintable(ImageIO.read(new File(&quot;...&quot;))), pf);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif (!pj.printDialog()) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tpj.print();\r\n\t\t\t\t\t\t} catch (PrinterException ex) {\r\n\t\t\t\t\t\t\tex.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (IOException exp) {\r\n\t\t\t\t\t\texp.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic static class ImagePrintable implements Printable {\r\n\r\n\t\t\tprivate int currentPage = -1;\r\n\t\t\tprivate Image cachedScaledImage = null;\r\n\r\n\t\t\tprivate BufferedImage master;\r\n\r\n\t\t\tpublic ImagePrintable(BufferedImage master) {\r\n\t\t\t\tthis.master = master;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getScaleFactor(int iMasterSize, int iTargetSize) {\r\n\t\t\t\tdouble dScale = 1;\r\n\t\t\t\tif (iMasterSize &gt; iTargetSize) {\r\n\t\t\t\t\tdScale = (double) iTargetSize / (double) iMasterSize;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdScale = (double) iTargetSize / (double) iMasterSize;\r\n\t\t\t\t}\r\n\t\t\t\treturn dScale;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getScaleFactorToFit(BufferedImage img, Dimension size) {\r\n\t\t\t\tdouble dScale = 1;\r\n\t\t\t\tif (img != null) {\r\n\t\t\t\t\tint imageWidth = img.getWidth();\r\n\t\t\t\t\tint imageHeight = img.getHeight();\r\n\t\t\t\t\tdScale = getScaleFactorToFit(new Dimension(imageWidth, imageHeight), size);\r\n\t\t\t\t}\r\n\t\t\t\treturn dScale;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getScaleFactorToFit(Dimension original, Dimension toFit) {\r\n\t\t\t\tdouble dScale = 1d;\r\n\t\t\t\tif (original != null &amp;&amp; toFit != null) {\r\n\t\t\t\t\tdouble dScaleWidth = getScaleFactor(original.width, toFit.width);\r\n\t\t\t\t\tdouble dScaleHeight = getScaleFactor(original.height, toFit.height);\r\n\r\n\t\t\t\t\tdScale = Math.min(dScaleHeight, dScaleWidth);\r\n\t\t\t\t}\r\n\t\t\t\treturn dScale;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {\r\n\r\n\t\t\t\tint result = Printable.NO_SUCH_PAGE;\r\n\r\n\t\t\t\tif (pageIndex == 0) {\r\n\r\n\t\t\t\t\tresult = Printable.PAGE_EXISTS;\r\n\r\n\t\t\t\t\tGraphics2D graphics2D = (Graphics2D) graphics;\r\n\t\t\t\t\tgraphics2D.translate(pageFormat.getImageableX(), pageFormat.getImageableY());\r\n\r\n\t\t\t\t\tint width = (int) Math.round(pageFormat.getImageableWidth());\r\n\t\t\t\t\tint height = (int) Math.round(pageFormat.getImageableHeight());\r\n\r\n\t\t\t\t\tif (currentPage != pageIndex || cachedScaledImage == null) {\r\n\t\t\t\t\t\tcurrentPage = pageIndex;\r\n\r\n\t\t\t\t\t\tdouble scaleFactor = getScaleFactorToFit(new Dimension(master.getWidth(), master.getHeight()), new Dimension(width, height));\r\n\r\n\t\t\t\t\t\tint imageWidth = (int) Math.round(master.getWidth() * scaleFactor);\r\n\t\t\t\t\t\tint imageHeight = (int) Math.round(master.getHeight() * scaleFactor);\r\n\r\n\t\t\t\t\t\tcachedScaledImage = master.getScaledInstance(imageWidth, imageHeight, Image.SCALE_SMOOTH);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdouble x = ((pageFormat.getImageableWidth() - cachedScaledImage.getWidth(null)) / 2);\r\n\t\t\t\t\tdouble y = ((pageFormat.getImageableHeight() - cachedScaledImage.getHeight(null)) / 2);\r\n\r\n\t\t\t\t\tgraphics2D.drawImage(cachedScaledImage, (int) x, (int) y, null);\r\n\t\t\t\t\tgraphics2D.setColor(Color.RED);\r\n\t\t\t\t\tgraphics2D.drawRect(0, 0, width - 1, height - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\nnb: I had an issue with Yosemite, trying to figure out how to change the print orientation from the dialog, in the end, I gave up and forced it by changing the `PageFormat` from the `PrintJob`.  I&#39;ve used this same type of code in countless applications without issues before...\r\n\r\n**Updated**\r\n\r\nOriginal Image: 1920x1200\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/x4nCY.png\r\n  [2]: http://i.stack.imgur.com/A2BcF.png","title":"java printerjob landscape white space","body":"<p>Don't use <code>PageFormat#getWidth</code> or <code>PageFormat#getHeight</code>, use <code>PageFormat#getImageableWidth</code> and <code>PageFormat#getImageableHeight</code> instead</p>\n\n<p>From the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/print/PageFormat.html\" rel=\"nofollow noreferrer\">JavaDocs</a></p>\n\n<blockquote>\n  <p>Return the height/width, in 1/72nds of an inch, of the imageable area of the page. This method takes into account the orientation of the page.</p>\n</blockquote>\n\n<p>You should also translate the printer <code>Graphics</code> by the <code>ImageableX/Y</code>...</p>\n\n<pre><code>g2.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());\n</code></pre>\n\n<p><strong>Runnable example</strong></p>\n\n<p>This is a simple runnable example.  This code was able to take the original (left) and print it both in portrait and landscape without issue...</p>\n\n<p><img src=\"https://i.stack.imgur.com/x4nCY.png\" alt=\"enter image description here\"></p>\n\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport java.awt.image.BufferedImage;\nimport java.awt.print.PageFormat;\nimport java.awt.print.Printable;\nimport java.awt.print.PrinterException;\nimport java.awt.print.PrinterJob;\nimport java.io.File;\nimport java.io.IOException;\nimport javax.imageio.ImageIO;\nimport javax.swing.UIManager;\nimport javax.swing.UnsupportedLookAndFeelException;\n\npublic class PrintTest100 {\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\n                    ex.printStackTrace();\n                }\n\n                try {\n                    PrinterJob pj = PrinterJob.getPrinterJob();\n                    pj.setJobName(\" Print Component \");\n\n                    PageFormat pf = pj.defaultPage();\n//                  pf.setOrientation(PageFormat.LANDSCAPE);\n//                  pf = pj.validatePage(pf);\n\n                    pj.setPrintable(new ImagePrintable(ImageIO.read(new File(\"...\"))), pf);\n\n                    if (!pj.printDialog()) {\n                        return;\n                    }\n                    try {\n                        pj.print();\n                    } catch (PrinterException ex) {\n                        ex.printStackTrace();\n                    }\n                } catch (IOException exp) {\n                    exp.printStackTrace();\n                }\n            }\n        });\n    }\n\n    public static class ImagePrintable implements Printable {\n\n        private int currentPage = -1;\n        private Image cachedScaledImage = null;\n\n        private BufferedImage master;\n\n        public ImagePrintable(BufferedImage master) {\n            this.master = master;\n        }\n\n        public double getScaleFactor(int iMasterSize, int iTargetSize) {\n            double dScale = 1;\n            if (iMasterSize &gt; iTargetSize) {\n                dScale = (double) iTargetSize / (double) iMasterSize;\n            } else {\n                dScale = (double) iTargetSize / (double) iMasterSize;\n            }\n            return dScale;\n        }\n\n        public double getScaleFactorToFit(BufferedImage img, Dimension size) {\n            double dScale = 1;\n            if (img != null) {\n                int imageWidth = img.getWidth();\n                int imageHeight = img.getHeight();\n                dScale = getScaleFactorToFit(new Dimension(imageWidth, imageHeight), size);\n            }\n            return dScale;\n        }\n\n        public double getScaleFactorToFit(Dimension original, Dimension toFit) {\n            double dScale = 1d;\n            if (original != null &amp;&amp; toFit != null) {\n                double dScaleWidth = getScaleFactor(original.width, toFit.width);\n                double dScaleHeight = getScaleFactor(original.height, toFit.height);\n\n                dScale = Math.min(dScaleHeight, dScaleWidth);\n            }\n            return dScale;\n        }\n\n        @Override\n        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {\n\n            int result = Printable.NO_SUCH_PAGE;\n\n            if (pageIndex == 0) {\n\n                result = Printable.PAGE_EXISTS;\n\n                Graphics2D graphics2D = (Graphics2D) graphics;\n                graphics2D.translate(pageFormat.getImageableX(), pageFormat.getImageableY());\n\n                int width = (int) Math.round(pageFormat.getImageableWidth());\n                int height = (int) Math.round(pageFormat.getImageableHeight());\n\n                if (currentPage != pageIndex || cachedScaledImage == null) {\n                    currentPage = pageIndex;\n\n                    double scaleFactor = getScaleFactorToFit(new Dimension(master.getWidth(), master.getHeight()), new Dimension(width, height));\n\n                    int imageWidth = (int) Math.round(master.getWidth() * scaleFactor);\n                    int imageHeight = (int) Math.round(master.getHeight() * scaleFactor);\n\n                    cachedScaledImage = master.getScaledInstance(imageWidth, imageHeight, Image.SCALE_SMOOTH);\n\n                }\n\n                double x = ((pageFormat.getImageableWidth() - cachedScaledImage.getWidth(null)) / 2);\n                double y = ((pageFormat.getImageableHeight() - cachedScaledImage.getHeight(null)) / 2);\n\n                graphics2D.drawImage(cachedScaledImage, (int) x, (int) y, null);\n                graphics2D.setColor(Color.RED);\n                graphics2D.drawRect(0, 0, width - 1, height - 1);\n            }\n\n            return result;\n        }\n    }\n\n}\n</code></pre>\n\n<p>nb: I had an issue with Yosemite, trying to figure out how to change the print orientation from the dialog, in the end, I gave up and forced it by changing the <code>PageFormat</code> from the <code>PrintJob</code>.  I've used this same type of code in countless applications without issues before...</p>\n\n<p><strong>Updated</strong></p>\n\n<p>Original Image: 1920x1200</p>\n\n<p><img src=\"https://i.stack.imgur.com/A2BcF.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":4804294,"reputation":1,"user_id":7375585,"display_name":"Galttar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683307562,"creation_date":1683307562,"answer_id":76184632,"question_id":27033691,"body_markdown":"I had the same problem and changed the ImageableArea:\r\n\r\n```\r\n\t\tPrinterJob job = PrinterJob.getPrinterJob();\r\n\t\tjob.setJobName(&quot;Folha de Bateria&quot;);\r\n\t\t\r\n\t\tPageFormat pageFormat = job.defaultPage();\r\n\t\tpageFormat.setOrientation(PageFormat.LANDSCAPE);\r\n\t\t\r\n\t\tPaper paper = pageFormat.getPaper();\r\n\t\tpaper.setImageableArea(paper.getImageableX() - 100, paper.getImageableY() - 100, paper.getImageableWidth() + 200, paper.getImageableHeight() + 200);\r\n\t\tpageFormat.setPaper(paper);\r\n\t\t\r\n\t\tjob.setPrintable(new SheetPrinter(getSelectedStep()), pageFormat);\r\n\t\t\r\n\t\tboolean doPrint = job.printDialog();\r\n\t\t\r\n\t\tif (doPrint) {\r\n\t\t    try {\r\n\t\t        job.print();\r\n\t\t    } catch (PrinterException e) {\r\n\t\t    \tthrow new CoreException(e);\r\n\t\t    }\r\n\t\t}\r\n\r\n```","title":"java printerjob landscape white space","body":"<p>I had the same problem and changed the ImageableArea:</p>\n<pre><code>        PrinterJob job = PrinterJob.getPrinterJob();\n        job.setJobName(&quot;Folha de Bateria&quot;);\n        \n        PageFormat pageFormat = job.defaultPage();\n        pageFormat.setOrientation(PageFormat.LANDSCAPE);\n        \n        Paper paper = pageFormat.getPaper();\n        paper.setImageableArea(paper.getImageableX() - 100, paper.getImageableY() - 100, paper.getImageableWidth() + 200, paper.getImageableHeight() + 200);\n        pageFormat.setPaper(paper);\n        \n        job.setPrintable(new SheetPrinter(getSelectedStep()), pageFormat);\n        \n        boolean doPrint = job.printDialog();\n        \n        if (doPrint) {\n            try {\n                job.print();\n            } catch (PrinterException e) {\n                throw new CoreException(e);\n            }\n        }\n\n</code></pre>\n"}],"owner":{"account_id":2375814,"reputation":375,"user_id":2079210,"accept_rate":75,"display_name":"anonimoo90"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1858,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683307562,"creation_date":1416467116,"question_id":27033691,"body_markdown":"i currently have an issue with my printerjob, it works great for portrait images, but for landscape images, it cuts part of the image and fills in a white space instead.\r\n\r\nThis is my code\r\n\r\n**EDIT**\r\n\r\n    PrintService printService = PrintServiceLookup.lookupDefaultPrintService();\r\n    BufferedImage bufferedImage = ImageIO.read(new File(&quot;house.jpg&quot;));\r\n  \r\n    boolean isLandscape = bufferedImage.getWidth() &gt; bufferedImage.getHeight();\r\n    PrinterJob printerJob = PrinterJob.getPrinterJob();\r\n    printerJob.setPrintService(printService);\r\n    printerJob.setCopies(copies);\r\n\r\n    PageFormat pageFormat = printerJob.defaultPage();\r\n    pageFormat.setOrientation(isLandscape ? PageFormat.LANDSCAPE : PageFormat.PORTRAIT);\r\n\r\n    Paper paper = new Paper();\r\n    paper.setSize(pageFormat.getWidth(), pageFormat.getHeight());\r\n    paper.setImageableArea(0.0, 0.0, paper.getWidth(), paper.getHeight());\r\n    \r\n    pageFormat.setPaper(paper);\r\n\r\n    printerJob.setPrintable(new Printable(){\r\n       @Override\r\n       public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException{\r\n           if (pageIndex == 0) {\r\n              Graphics2D g2 = (Graphics2D)graphics;\r\n              double xScale = 1;\r\n              double xTranslate = 0;\r\n              double yScale = 1;\r\n              double yTranslate = 0;\r\n              double widthScale = (pageFormat.getImageableWidth() / bufferedImage.getWidth()) * xScale;\r\n              double heightScale = (pageFormat.getImageableHeight() / bufferedImage.getHeight()) * yScale;\r\n\r\n              AffineTransform affineTransform = AffineTransform.getScaleInstance(widthScale, heightScale);\r\n              affineTransform.translate(xTranslate, yTranslate);\r\n\r\n              g2.drawRenderedImage(bufferedImage, affineTransform);\r\n              g2.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());\r\n\r\n              return PAGE_EXISTS;\r\n           }else return NO_SUCH_PAGE;\r\n       }\r\n    }, pageFormat);\r\n\r\n    printerJob.print();\r\n\r\nThis allows me to print portrait pictures to fit the given paper and without borders (fit to paper), i need it to do the same for landscape pictures please.\r\n\r\nThis are examples of what happens when i try with a portrait and landscape image so u see what i mean. The images should always fit to the paper size and borderless, which in this case is 10x15cm, \r\n\r\nPortrait image: \r\n&lt;a href=&quot;http://i.stack.imgur.com/DDpg5.jpg&quot;&gt;&lt;img src=&quot;http://i.stack.imgur.com/dIZ3p.png&quot; title=&quot;source: imgur.com&quot; /&gt;&lt;/a&gt;\r\n\r\nLandscape image:\r\n&lt;a href=&quot;http://i.stack.imgur.com/JOGvj.jpg&quot;&gt;&lt;img src=&quot;http://i.stack.imgur.com/OkszL.png&quot; title=&quot;source: imgur.com&quot; /&gt;&lt;/a&gt;\r\n\r\n\r\n\r\n\r\n","title":"java printerjob landscape white space","body":"<p>i currently have an issue with my printerjob, it works great for portrait images, but for landscape images, it cuts part of the image and fills in a white space instead.</p>\n\n<p>This is my code</p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>PrintService printService = PrintServiceLookup.lookupDefaultPrintService();\nBufferedImage bufferedImage = ImageIO.read(new File(\"house.jpg\"));\n\nboolean isLandscape = bufferedImage.getWidth() &gt; bufferedImage.getHeight();\nPrinterJob printerJob = PrinterJob.getPrinterJob();\nprinterJob.setPrintService(printService);\nprinterJob.setCopies(copies);\n\nPageFormat pageFormat = printerJob.defaultPage();\npageFormat.setOrientation(isLandscape ? PageFormat.LANDSCAPE : PageFormat.PORTRAIT);\n\nPaper paper = new Paper();\npaper.setSize(pageFormat.getWidth(), pageFormat.getHeight());\npaper.setImageableArea(0.0, 0.0, paper.getWidth(), paper.getHeight());\n\npageFormat.setPaper(paper);\n\nprinterJob.setPrintable(new Printable(){\n   @Override\n   public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException{\n       if (pageIndex == 0) {\n          Graphics2D g2 = (Graphics2D)graphics;\n          double xScale = 1;\n          double xTranslate = 0;\n          double yScale = 1;\n          double yTranslate = 0;\n          double widthScale = (pageFormat.getImageableWidth() / bufferedImage.getWidth()) * xScale;\n          double heightScale = (pageFormat.getImageableHeight() / bufferedImage.getHeight()) * yScale;\n\n          AffineTransform affineTransform = AffineTransform.getScaleInstance(widthScale, heightScale);\n          affineTransform.translate(xTranslate, yTranslate);\n\n          g2.drawRenderedImage(bufferedImage, affineTransform);\n          g2.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());\n\n          return PAGE_EXISTS;\n       }else return NO_SUCH_PAGE;\n   }\n}, pageFormat);\n\nprinterJob.print();\n</code></pre>\n\n<p>This allows me to print portrait pictures to fit the given paper and without borders (fit to paper), i need it to do the same for landscape pictures please.</p>\n\n<p>This are examples of what happens when i try with a portrait and landscape image so u see what i mean. The images should always fit to the paper size and borderless, which in this case is 10x15cm, </p>\n\n<p>Portrait image: \n<a href=\"https://i.stack.imgur.com/DDpg5.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dIZ3p.png\" title=\"source: imgur.com\" /></a></p>\n\n<p>Landscape image:\n<a href=\"https://i.stack.imgur.com/JOGvj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OkszL.png\" title=\"source: imgur.com\" /></a></p>\n"},{"tags":["java","sql","sql-server"],"comments":[{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":2,"creation_date":1683288438,"post_id":76181970,"comment_id":134347557,"body_markdown":"Ignoring for a moment that `float` and `real` are [approximate-number data types](https://learn.microsoft.com/en-us/sql/t-sql/data-types/float-and-real-transact-sql), in other words &quot;lossy&quot;, why would you use IBM Informix documentation to infer behaviors about Microsoft SQL Server? Comparing the [Informix](https://www.ibm.com/docs/en/informix-servers/14.10?topic=types-floatn#ids_sqr_118) and [Microsoft](https://learn.microsoft.com/en-us/sql/t-sql/data-types/float-and-real-transact-sql) documentation shows that their `float` types have different precision.","body":"Ignoring for a moment that <code>float</code> and <code>real</code> are <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/float-and-real-transact-sql\" rel=\"nofollow noreferrer\">approximate-number data types</a>, in other words &quot;lossy&quot;, why would you use IBM Informix documentation to infer behaviors about Microsoft SQL Server? Comparing the <a href=\"https://www.ibm.com/docs/en/informix-servers/14.10?topic=types-floatn#ids_sqr_118\" rel=\"nofollow noreferrer\">Informix</a> and <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/float-and-real-transact-sql\" rel=\"nofollow noreferrer\">Microsoft</a> documentation shows that their <code>float</code> types have different precision."},{"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"score":0,"creation_date":1683289439,"post_id":76181970,"comment_id":134347787,"body_markdown":"@AlwaysLearning Thank you for pointing this out. The link was fixed.","body":"@AlwaysLearning Thank you for pointing this out. The link was fixed."},{"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"score":0,"creation_date":1683289591,"post_id":76181970,"comment_id":134347820,"body_markdown":"@AlwaysLearning do you have any idea what will be better to use for more precision ? and how could you explain than Float(sql) and Double (java) worked before but once the data got chunkier we noticed bigger diffrences. Thank you in advance","body":"@AlwaysLearning do you have any idea what will be better to use for more precision ? and how could you explain than Float(sql) and Double (java) worked before but once the data got chunkier we noticed bigger diffrences. Thank you in advance"},{"owner":{"account_id":20264817,"reputation":56105,"user_id":14868997,"display_name":"Charlieface"},"score":0,"creation_date":1683291059,"post_id":76181970,"comment_id":134348170,"body_markdown":"`decimal(38, 9)` maybe?","body":"<code>decimal(38, 9)</code> maybe?"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":2,"creation_date":1683291471,"post_id":76181970,"comment_id":134348266,"body_markdown":"The solution is to use BigDecimal type in Java.","body":"The solution is to use BigDecimal type in Java."},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1683294008,"post_id":76181970,"comment_id":134348913,"body_markdown":"Agree with @Mar-Z, bigdecimal is the &quot;only&quot; way","body":"Agree with @Mar-Z, bigdecimal is the &quot;only&quot; way"},{"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"score":0,"creation_date":1683295624,"post_id":76181970,"comment_id":134349398,"body_markdown":"@Mar-Z , Thank you so much. BigDecimal in Java, and its equivelent in sql is Decimal ?","body":"@Mar-Z , Thank you so much. BigDecimal in Java, and its equivelent in sql is Decimal ?"},{"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"score":0,"creation_date":1683295702,"post_id":76181970,"comment_id":134349417,"body_markdown":"@siggemannen Thanks! Its equivalent in Sql will be Decimal(38,9)  ? correct me please if I am wrong","body":"@siggemannen Thanks! Its equivalent in Sql will be Decimal(38,9)  ? correct me please if I am wrong"},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1683313092,"post_id":76181970,"comment_id":134353344,"body_markdown":"I believe it can hold most numbers :) you specify precision and you&#39;re good to go","body":"I believe it can hold most numbers :) you specify precision and you&#39;re good to go"}],"answers":[{"comments":[{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1683306513,"post_id":76183866,"comment_id":134352062,"body_markdown":"This is the general solution for most if not all cases.","body":"This is the general solution for most if not all cases."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683301251,"creation_date":1683301251,"answer_id":76183866,"question_id":76181970,"body_markdown":"The solution is to use `BigDecimal` type in Java. It is equivalent to database DECIMAL and/or NUMBER and should be mapped correctly by JDBC driver. You can specify precision and scale for `BigDecimal`. Similar to the database types. And specify how to round the results. `BigDecimal` is **the** datatype for financial applications like banking where any loss of accuracy in calculations is unacceptable.","title":"Precision Problem Between Java and Sql Server when Data Size is big","body":"<p>The solution is to use <code>BigDecimal</code> type in Java. It is equivalent to database DECIMAL and/or NUMBER and should be mapped correctly by JDBC driver. You can specify precision and scale for <code>BigDecimal</code>. Similar to the database types. And specify how to round the results. <code>BigDecimal</code> is <strong>the</strong> datatype for financial applications like banking where any loss of accuracy in calculations is unacceptable.</p>\n"},{"comments":[{"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"score":0,"creation_date":1683548774,"post_id":76184521,"comment_id":134378919,"body_markdown":"Very Intersting! Thank you for sharing. I will try your solution and the others and see what will work best.","body":"Very Intersting! Thank you for sharing. I will try your solution and the others and see what will work best."}],"tags":[],"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683306400,"creation_date":1683306400,"answer_id":76184521,"question_id":76181970,"body_markdown":"Java Float and Double are not exact types. BigInteger or BigDecimal can perform arithmetic computations with arbitrary precision and can be a great solution.\r\n\r\nNow, if your apps need to add and subtract values with two decimal places, sometimes it&#39;s easy to get them multiplied by 100 as a `long`. Then it&#39;s easy to add and subtract longs -- **without losing any precision**. When saving back to the database, just divide by 100.\r\n\r\n","title":"Precision Problem Between Java and Sql Server when Data Size is big","body":"<p>Java Float and Double are not exact types. BigInteger or BigDecimal can perform arithmetic computations with arbitrary precision and can be a great solution.</p>\n<p>Now, if your apps need to add and subtract values with two decimal places, sometimes it's easy to get them multiplied by 100 as a <code>long</code>. Then it's easy to add and subtract longs -- <strong>without losing any precision</strong>. When saving back to the database, just divide by 100.</p>\n"}],"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683306400,"creation_date":1683288061,"question_id":76181970,"body_markdown":"I have a Java application that calculates the sum of Data using the type `Double`, and an Sql query that Calculates the sum using `Float`type.\r\n\r\nTo verify the data we do a sum check between another app using Java and our Sql Database. And we have a tolerance of 2 numbers difference.\r\n\r\nThis solution always worked for me and was able to get the same sum in both sides. \r\n\r\nLately it stopped working and started returning differences of thousands.Specificly when it&#39;s tested on a volumenous chunk of data ( Talking about  sum result of 100billions). \r\n\r\nNot sure if the volumetry has any impact on the precisions problem, but I would like a hand of help to understand the problem behind this precision problem, and if there is anyway I can make it work in all cases no matter how small or big the data is.\r\n\r\nThe choise of the Java Type and Sql Type was taken based on the mapping between these two langages : [Link Here](https://learn.microsoft.com/en-us/sql/language-extensions/how-to/java-to-sql-data-types?view=sql-server-ver16). ( Also It was Tested and gave the expected results).\r\n\r\nMy Java Code is smthg similar to this :\r\n\r\n```\r\nsumPrice += Double.valueOf(price);\r\n```\r\nMy Sql Sum Query :\r\n```\r\n select sum(CONVERT(float, price)) ) from table where &#39;filter only Numeric values&#39;\r\n```\r\n\r\nThe price column is a varchar type for some specifications reasons.\r\n\r\nMany Thanks\r\n\r\n\r\n\r\n\r\nI tried using Decimal(38,4) but had the precision problem still.\r\n\r\nFor example with the last chunky data , in java we have a total : `5 555 555 555 555.55` but in sql we get `5 555 555 522 222.22`.\r\n\r\nBefore this problem, it will normally return in java `5 555 555 555 555.55` and in sql `5 555 555 555 522.22` ( 2 digit difference).","title":"Precision Problem Between Java and Sql Server when Data Size is big","body":"<p>I have a Java application that calculates the sum of Data using the type <code>Double</code>, and an Sql query that Calculates the sum using <code>Float</code>type.</p>\n<p>To verify the data we do a sum check between another app using Java and our Sql Database. And we have a tolerance of 2 numbers difference.</p>\n<p>This solution always worked for me and was able to get the same sum in both sides.</p>\n<p>Lately it stopped working and started returning differences of thousands.Specificly when it's tested on a volumenous chunk of data ( Talking about  sum result of 100billions).</p>\n<p>Not sure if the volumetry has any impact on the precisions problem, but I would like a hand of help to understand the problem behind this precision problem, and if there is anyway I can make it work in all cases no matter how small or big the data is.</p>\n<p>The choise of the Java Type and Sql Type was taken based on the mapping between these two langages : <a href=\"https://learn.microsoft.com/en-us/sql/language-extensions/how-to/java-to-sql-data-types?view=sql-server-ver16\" rel=\"nofollow noreferrer\">Link Here</a>. ( Also It was Tested and gave the expected results).</p>\n<p>My Java Code is smthg similar to this :</p>\n<pre><code>sumPrice += Double.valueOf(price);\n</code></pre>\n<p>My Sql Sum Query :</p>\n<pre><code> select sum(CONVERT(float, price)) ) from table where 'filter only Numeric values'\n</code></pre>\n<p>The price column is a varchar type for some specifications reasons.</p>\n<p>Many Thanks</p>\n<p>I tried using Decimal(38,4) but had the precision problem still.</p>\n<p>For example with the last chunky data , in java we have a total : <code>5 555 555 555 555.55</code> but in sql we get <code>5 555 555 522 222.22</code>.</p>\n<p>Before this problem, it will normally return in java <code>5 555 555 555 555.55</code> and in sql <code>5 555 555 555 522.22</code> ( 2 digit difference).</p>\n"},{"tags":["java","android","machine-learning","google-mlkit"],"comments":[{"owner":{"account_id":3357008,"reputation":121,"user_id":2819707,"display_name":"jack"},"score":0,"creation_date":1683306293,"post_id":76171316,"comment_id":134352008,"body_markdown":"Cloud you classify what is the feature vector you mean? Are you using ML Kit Image labeling SDK?","body":"Cloud you classify what is the feature vector you mean? Are you using ML Kit Image labeling SDK?"}],"owner":{"account_id":28502923,"reputation":1,"user_id":21813936,"display_name":"jelianja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683306269,"creation_date":1683190556,"question_id":76171316,"body_markdown":"Is there a possibility to use MLKit in an Android application in such a way that it only makes a feature vector from an image without any classification? \r\n\r\nIs there any other way to extract feature vectors in Android app if it can&#39;t be done this way? ","title":"Extracting feature vectors from image in android app using MLKit","body":"<p>Is there a possibility to use MLKit in an Android application in such a way that it only makes a feature vector from an image without any classification?</p>\n<p>Is there any other way to extract feature vectors in Android app if it can't be done this way?</p>\n"},{"tags":["java","spring-boot","gradle","jackson","dependency-management"],"comments":[{"owner":{"account_id":2767223,"reputation":21433,"user_id":2382650,"accept_rate":92,"display_name":"Cisco"},"score":0,"creation_date":1664390127,"post_id":73880515,"comment_id":130463052,"body_markdown":"Does this answer your question? [gradle exclude a transitive dependency](https://stackoverflow.com/questions/62868920/gradle-exclude-a-transitive-dependency)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/62868920/gradle-exclude-a-transitive-dependency\">gradle exclude a transitive dependency</a>"}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1664396748,"creation_date":1664396748,"answer_id":73887411,"question_id":73880515,"body_markdown":"Spring Boot&#39;s auto-configuration for Jackson requires `spring-web` as it&#39;s the Spring Framework module that contains the infrastructure for configuring and creating a Jackson `ObjectMapper`. If you really don&#39;t want a `spring-web` dependency in your application, you could replace the dependency on `spring-boot-starter-json` with a direct dependency on Jackson instead, however you will then have to configure and create the `ObjectMapper` yourself as Spring Boot will no longer do it for you.","title":"How to depend Spring with Jackson and without Web","body":"<p>Spring Boot's auto-configuration for Jackson requires <code>spring-web</code> as it's the Spring Framework module that contains the infrastructure for configuring and creating a Jackson <code>ObjectMapper</code>. If you really don't want a <code>spring-web</code> dependency in your application, you could replace the dependency on <code>spring-boot-starter-json</code> with a direct dependency on Jackson instead, however you will then have to configure and create the <code>ObjectMapper</code> yourself as Spring Boot will no longer do it for you.</p>\n"},{"tags":[],"owner":{"account_id":28508128,"reputation":11,"user_id":21818485,"display_name":"Triqui"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683305528,"creation_date":1683220498,"answer_id":76175771,"question_id":73880515,"body_markdown":"I created a custom `jackson` standalone configuration. \r\n\r\nIt only contains what I need, but you could easily copy the bits in the `JacksonAutoConfiguration` for the `jacksonProperties` or anything else that you need and add them here. And then remove the `JacksonAutoConfiguration` class and use the code snippet below.\r\n\r\nI just wanted to keep it simple because mine was for a `redis` synchronization service.\r\n\r\nThe optimal solution would be to rewrite the code in `JacksonAutoConfiguration`  and drop the `Jackson2ObjectMapper` and use `JsonMapper.builder()` instead and then they could drop the `spring-web` dependency entirely.\r\n\r\n```\r\n@Configuration\r\npublic class JacksonStandaloneConfiguration {\r\n\r\n\t@Bean\r\n\tpublic ObjectMapper jacksonOjectMapper(ObjectProvider&lt;Module&gt; provider) {\r\n        // All modules declared as beans anywhere else\r\n\t\tList&lt;Module&gt; modulesToInstall = provider.stream().toList();\r\n\t\tBuilder builder = JsonMapper.builder();\r\n\t\tObjectMapper mapper = configure(builder);\r\n\t\tregisterModules(mapper, modulesToInstall);\r\n\t\treturn mapper;\r\n\t}\r\n\r\n\tprivate ObjectMapper configure(Builder builder) {\r\n\t\treturn builder //\r\n\t\t\t\t// Spring boot defaults\r\n\t\t\t\t.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS) //\r\n\t\t\t\t.disable(SerializationFeature.WRITE_DURATIONS_AS_TIMESTAMPS) //\r\n\t\t\t\t// Jackson2ObjectMapperBuilder defaults\r\n\t\t\t\t.disable(MapperFeature.DEFAULT_VIEW_INCLUSION) //\r\n\t\t\t\t.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES) //\r\n\t\t\t\t.build();\r\n\t}\r\n\r\n\tprivate static void registerModules(ObjectMapper mapper, List&lt;Module&gt; modulesToInstall) {\r\n\t\tMultiValueMap&lt;Object, Module&gt; modulesToRegister = new LinkedMultiValueMap&lt;&gt;();\r\n\t\tregisterWellKnownModulesIfAvailable(modulesToRegister);\r\n\t\tmodulesToInstall.forEach(module -&gt; registerModule(module, modulesToRegister));\r\n\t\tList&lt;Module&gt; modules = new ArrayList&lt;&gt;();\r\n\t\tfor (List&lt;Module&gt; nestedModules : modulesToRegister.values()) {\r\n\t\t\tmodules.addAll(nestedModules);\r\n\t\t}\r\n\t\tmapper.registerModules(modules);\r\n\t}\r\n\r\n\tprivate static void registerWellKnownModulesIfAvailable(MultiValueMap&lt;Object, Module&gt; modulesToRegister) {\r\n\t\t// Jackson2ObjectMapperBuilder defaults (You could add these as beans and remove this method entirely)\r\n\t\tregisterModule(new Jdk8Module(), modulesToRegister);\r\n\t\tregisterModule(new JavaTimeModule(), modulesToRegister);\r\n//\t\tregisterModule(new JodaModule(), modulesToRegister);\r\n//\t\tregisterModule(new KotlinModule(), modulesToRegister);\r\n\t}\r\n\r\n\tprivate static void registerModule(Module module, MultiValueMap&lt;Object, Module&gt; modulesToRegister) {\r\n\t\tif (module.getTypeId() == null) {\r\n\t\t\tmodulesToRegister.add(SimpleModule.class.getName(), module);\r\n\t\t} else {\r\n\t\t\tmodulesToRegister.set(module.getTypeId(), module);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```","title":"How to depend Spring with Jackson and without Web","body":"<p>I created a custom <code>jackson</code> standalone configuration.</p>\n<p>It only contains what I need, but you could easily copy the bits in the <code>JacksonAutoConfiguration</code> for the <code>jacksonProperties</code> or anything else that you need and add them here. And then remove the <code>JacksonAutoConfiguration</code> class and use the code snippet below.</p>\n<p>I just wanted to keep it simple because mine was for a <code>redis</code> synchronization service.</p>\n<p>The optimal solution would be to rewrite the code in <code>JacksonAutoConfiguration</code>  and drop the <code>Jackson2ObjectMapper</code> and use <code>JsonMapper.builder()</code> instead and then they could drop the <code>spring-web</code> dependency entirely.</p>\n<pre><code>@Configuration\npublic class JacksonStandaloneConfiguration {\n\n    @Bean\n    public ObjectMapper jacksonOjectMapper(ObjectProvider&lt;Module&gt; provider) {\n        // All modules declared as beans anywhere else\n        List&lt;Module&gt; modulesToInstall = provider.stream().toList();\n        Builder builder = JsonMapper.builder();\n        ObjectMapper mapper = configure(builder);\n        registerModules(mapper, modulesToInstall);\n        return mapper;\n    }\n\n    private ObjectMapper configure(Builder builder) {\n        return builder //\n                // Spring boot defaults\n                .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS) //\n                .disable(SerializationFeature.WRITE_DURATIONS_AS_TIMESTAMPS) //\n                // Jackson2ObjectMapperBuilder defaults\n                .disable(MapperFeature.DEFAULT_VIEW_INCLUSION) //\n                .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES) //\n                .build();\n    }\n\n    private static void registerModules(ObjectMapper mapper, List&lt;Module&gt; modulesToInstall) {\n        MultiValueMap&lt;Object, Module&gt; modulesToRegister = new LinkedMultiValueMap&lt;&gt;();\n        registerWellKnownModulesIfAvailable(modulesToRegister);\n        modulesToInstall.forEach(module -&gt; registerModule(module, modulesToRegister));\n        List&lt;Module&gt; modules = new ArrayList&lt;&gt;();\n        for (List&lt;Module&gt; nestedModules : modulesToRegister.values()) {\n            modules.addAll(nestedModules);\n        }\n        mapper.registerModules(modules);\n    }\n\n    private static void registerWellKnownModulesIfAvailable(MultiValueMap&lt;Object, Module&gt; modulesToRegister) {\n        // Jackson2ObjectMapperBuilder defaults (You could add these as beans and remove this method entirely)\n        registerModule(new Jdk8Module(), modulesToRegister);\n        registerModule(new JavaTimeModule(), modulesToRegister);\n//      registerModule(new JodaModule(), modulesToRegister);\n//      registerModule(new KotlinModule(), modulesToRegister);\n    }\n\n    private static void registerModule(Module module, MultiValueMap&lt;Object, Module&gt; modulesToRegister) {\n        if (module.getTypeId() == null) {\n            modulesToRegister.add(SimpleModule.class.getName(), module);\n        } else {\n            modulesToRegister.set(module.getTypeId(), module);\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":9013194,"reputation":220,"user_id":10663941,"display_name":"The Prototype"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1360,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73887411,"answer_count":2,"score":1,"last_activity_date":1683305528,"creation_date":1664363933,"question_id":73880515,"body_markdown":"How to properly connect jackson to a standalone SpringBoot application without unnecessary dependencies (web)?\r\n\r\nJava 18\r\n\r\n    plugins {\r\n        id &#39;org.springframework.boot&#39; version &#39;2.7.5-SNAPSHOT&#39;\r\n        id &#39;io.spring.dependency-management&#39; version &#39;1.0.13.RELEASE&#39;\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    dependencies {\r\n      implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n      implementation &#39;org.springframework.boot:spring-boot-starter-json:2.7.5-SNAPSHOT&#39;\r\n      compileOnly &#39;org.projectlombok:lombok&#39;\r\n      developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n      annotationProcessor &#39;org.springframework.boot:spring-boot-configuration-processor&#39;\r\n      annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n      testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    }\r\n\r\n[![External Libraries in IDEA][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/s6hCr.png","title":"How to depend Spring with Jackson and without Web","body":"<p>How to properly connect jackson to a standalone SpringBoot application without unnecessary dependencies (web)?</p>\n<p>Java 18</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.7.5-SNAPSHOT'\n    id 'io.spring.dependency-management' version '1.0.13.RELEASE'\n    id 'java'\n}\n\ndependencies {\n  implementation 'org.springframework.boot:spring-boot-starter'\n  implementation 'org.springframework.boot:spring-boot-starter-json:2.7.5-SNAPSHOT'\n  compileOnly 'org.projectlombok:lombok'\n  developmentOnly 'org.springframework.boot:spring-boot-devtools'\n  annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'\n  annotationProcessor 'org.projectlombok:lombok'\n  testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/s6hCr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s6hCr.png\" alt=\"External Libraries in IDEA\" /></a></p>\n"},{"tags":["java","google-cloud-firestore","mockito","junit5","junit-jupiter"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683305547,"post_id":76184394,"comment_id":134351881,"body_markdown":"don&#39;t mock the intermediate objects (why should you?) rather mock (or setup!) `this.db.collection(this.config.getTableName()).document(primaryKey);` returning &quot;real (customized) objects&quot;","body":"don&#39;t mock the intermediate objects (why should you?) rather mock (or setup!) <code>this.db.collection(this.config.getTableName()).document(prim&zwnj;&#8203;aryKey);</code> returning &quot;real (customized) objects&quot;"},{"owner":{"account_id":15656441,"reputation":11,"user_id":11296641,"display_name":"Daniel Castro Jara"},"score":0,"creation_date":1683306038,"post_id":76184394,"comment_id":134351964,"body_markdown":"I&#39;m mocking the DocumentReference because the this.db attribute is private in the class and I&#39;m not able to access it in the test and I&#39;m not sure if I can modify this","body":"I&#39;m mocking the DocumentReference because the this.db attribute is private in the class and I&#39;m not able to access it in the test and I&#39;m not sure if I can modify this"},{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1683312695,"post_id":76184394,"comment_id":134353259,"body_markdown":"according to your log the **assertTrue(firestoreDB.recordExists(anyString(), anyString(), anyMap())); ** is failing.  See  **org.junit.Assert.assertTrue(Assert.java:52)**","body":"according to your log the <b>assertTrue(firestoreDB.recordExists(anyString(), anyString(), anyMap())); ** is failing.  See  **org.junit.Assert.assertTrue(Assert.java:52)</b>"}],"owner":{"account_id":15656441,"reputation":11,"user_id":11296641,"display_name":"Daniel Castro Jara"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683305332,"creation_date":1683305332,"question_id":76184394,"body_markdown":"I&#39;m trying to test a method that validate that the record exist and another operation but the most important is that if exist and I&#39;m mocking everything that I need but when mock that call to the exists method from DocumentSnapshot always get false, could there a reason that this happens or may my mock is not created in a good way.\r\n\r\nMethod to test\r\n\r\n    @Override\r\n        public boolean recordExists(String primaryKey, String payload, Map&lt;String, String&gt; headers) {\r\n            try {\r\n                if (this.db == null) {\r\n                    setupConnection();\r\n                }\r\n\r\n            if (this.db != null) {\r\n                if (this.config.getPrimaryKeyValuePrefix() != null\r\n                        &amp;&amp; this.config.getPrimaryKeyValuePrefix().length() &gt; 0) {\r\n                    primaryKey = this.config.getPrimaryKeyValuePrefix() + primaryKey;\r\n                }\r\n                if (this.config.getPrimaryKeyValueSuffix() != null\r\n                        &amp;&amp; this.config.getPrimaryKeyValueSuffix().length() &gt; 0) {\r\n                    primaryKey += this.config.getPrimaryKeyValueSuffix();\r\n                }\r\n\r\n                DocumentReference docRef = this.db.collection(this.config.getTableName()).document(primaryKey);\r\n                ApiFuture&lt;DocumentSnapshot&gt; future = docRef.get();\r\n\r\n                DocumentSnapshot document = future.get();\r\n                if (document.exists()) {\r\n\r\n                    if (this.config.getOutOfOrderValidationRequired()) {\r\n                        // check if this message is out of order\r\n                        boolean isOutOfOrder = isRecordOutOfOrder(document, payload, headers);\r\n                        if (isOutOfOrder) {\r\n                            LOG.info(\r\n                                    &quot;FirestoreDB recordExists() document is found and message is out of order. PrimaryKey is &quot;\r\n                                            + primaryKey + &quot; and payload is &quot; + payload);\r\n                        }\r\n\r\n                        return isOutOfOrder;\r\n                    } else {\r\n                        LOG.info(&quot;FirestoreDB recordExists() document is found. PrimaryKey is &quot; + primaryKey\r\n                                + &quot; and payload is &quot; + payload);\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n        } catch (Exception ex) {\r\n            StringWriter sw = new StringWriter();\r\n            PrintWriter pw = new PrintWriter(sw);\r\n            ex.printStackTrace(pw);\r\n            LOG.error(&quot;FirestoreDB setupConnection() exception &quot; + sw.toString());\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\nTest created\r\n\r\n     @Test\r\n        public void recordExistTest() throws JsonProcessingException, ExecutionException, InterruptedException {\r\n            configMap.put(ConfigUtils.DLQ_DATABASE_CONFIG,\r\n                    &quot;{ \\&quot;databaseType\\&quot;: \\&quot;firestore\\&quot;, \\&quot;projectId\\&quot;: \\&quot;data-test\\&quot;, \\&quot;tableName\\&quot;: \\&quot;test\\&quot;, \\&quot;primaryKeyPath\\&quot;: \\&quot;key\\&quot;, \\&quot;primaryKeyValuePrefix\\&quot;: \\&quot;test\\&quot;,  \\&quot;outOfOrderValidationRequired\\&quot;: \\&quot;true\\&quot;}&quot;);\r\n            dlqDatabaseConfig =  objectMapper.readValue(this.configMap.get(ConfigUtils.DLQ_DATABASE_CONFIG),\r\n                    DatabaseConfig.class);\r\n            FirestoreDB firestoreDB = new FirestoreDB(dlqDatabaseConfig);\r\n             DocumentReference documentReference = mock(DocumentReference.class);\r\n             ApiFuture&lt;DocumentSnapshot&gt; apiFuture = mock(ApiFuture.class);\r\n             DocumentSnapshot documentSnapshot = mock(DocumentSnapshot.class);\r\n    \r\n            when(documentReference.get()).thenReturn(apiFuture);\r\n            when(apiFuture.get()).thenReturn(documentSnapshot);\r\n            when(documentSnapshot.exists()).thenReturn(true);\r\n            when(documentSnapshot.get(&quot;myField&quot;)).thenReturn(&quot;myValue&quot;);\r\n    \r\n            assertEquals(true, documentSnapshot.exists());\r\n            assertTrue(firestoreDB.recordExists(anyString(), anyString(), anyMap()));\r\n    \r\n        }\r\n\r\nI got and assertion error because the `when(documentSnapshot.exists()).thenReturn(true);` is returning false even if I&#39;m indicating to be true, what could be the reason? thanks in advance.\r\n\r\n    java.lang.AssertionError\r\n    \tat org.junit.Assert.fail(Assert.java:86)\r\n    \tat org.junit.Assert.assertTrue(Assert.java:41)\r\n    \tat org.junit.Assert.assertTrue(Assert.java:52)\r\n    \tat org.rf.kafka.common.databases.FirestoreDBTest.recordExistTest(FirestoreDBTest.java:49)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n    \tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\r\n","title":"Trying to test DocumentSnapshot but when I do an when(documentSnapshot.exists()).thenReturn(true) always return false Java","body":"<p>I'm trying to test a method that validate that the record exist and another operation but the most important is that if exist and I'm mocking everything that I need but when mock that call to the exists method from DocumentSnapshot always get false, could there a reason that this happens or may my mock is not created in a good way.</p>\n<p>Method to test</p>\n<pre><code>@Override\n    public boolean recordExists(String primaryKey, String payload, Map&lt;String, String&gt; headers) {\n        try {\n            if (this.db == null) {\n                setupConnection();\n            }\n\n        if (this.db != null) {\n            if (this.config.getPrimaryKeyValuePrefix() != null\n                    &amp;&amp; this.config.getPrimaryKeyValuePrefix().length() &gt; 0) {\n                primaryKey = this.config.getPrimaryKeyValuePrefix() + primaryKey;\n            }\n            if (this.config.getPrimaryKeyValueSuffix() != null\n                    &amp;&amp; this.config.getPrimaryKeyValueSuffix().length() &gt; 0) {\n                primaryKey += this.config.getPrimaryKeyValueSuffix();\n            }\n\n            DocumentReference docRef = this.db.collection(this.config.getTableName()).document(primaryKey);\n            ApiFuture&lt;DocumentSnapshot&gt; future = docRef.get();\n\n            DocumentSnapshot document = future.get();\n            if (document.exists()) {\n\n                if (this.config.getOutOfOrderValidationRequired()) {\n                    // check if this message is out of order\n                    boolean isOutOfOrder = isRecordOutOfOrder(document, payload, headers);\n                    if (isOutOfOrder) {\n                        LOG.info(\n                                &quot;FirestoreDB recordExists() document is found and message is out of order. PrimaryKey is &quot;\n                                        + primaryKey + &quot; and payload is &quot; + payload);\n                    }\n\n                    return isOutOfOrder;\n                } else {\n                    LOG.info(&quot;FirestoreDB recordExists() document is found. PrimaryKey is &quot; + primaryKey\n                            + &quot; and payload is &quot; + payload);\n                    return true;\n                }\n            } else {\n                return false;\n            }\n        }\n    } catch (Exception ex) {\n        StringWriter sw = new StringWriter();\n        PrintWriter pw = new PrintWriter(sw);\n        ex.printStackTrace(pw);\n        LOG.error(&quot;FirestoreDB setupConnection() exception &quot; + sw.toString());\n    }\n\n    return true;\n\n}\n</code></pre>\n<p>Test created</p>\n<pre><code> @Test\n    public void recordExistTest() throws JsonProcessingException, ExecutionException, InterruptedException {\n        configMap.put(ConfigUtils.DLQ_DATABASE_CONFIG,\n                &quot;{ \\&quot;databaseType\\&quot;: \\&quot;firestore\\&quot;, \\&quot;projectId\\&quot;: \\&quot;data-test\\&quot;, \\&quot;tableName\\&quot;: \\&quot;test\\&quot;, \\&quot;primaryKeyPath\\&quot;: \\&quot;key\\&quot;, \\&quot;primaryKeyValuePrefix\\&quot;: \\&quot;test\\&quot;,  \\&quot;outOfOrderValidationRequired\\&quot;: \\&quot;true\\&quot;}&quot;);\n        dlqDatabaseConfig =  objectMapper.readValue(this.configMap.get(ConfigUtils.DLQ_DATABASE_CONFIG),\n                DatabaseConfig.class);\n        FirestoreDB firestoreDB = new FirestoreDB(dlqDatabaseConfig);\n         DocumentReference documentReference = mock(DocumentReference.class);\n         ApiFuture&lt;DocumentSnapshot&gt; apiFuture = mock(ApiFuture.class);\n         DocumentSnapshot documentSnapshot = mock(DocumentSnapshot.class);\n\n        when(documentReference.get()).thenReturn(apiFuture);\n        when(apiFuture.get()).thenReturn(documentSnapshot);\n        when(documentSnapshot.exists()).thenReturn(true);\n        when(documentSnapshot.get(&quot;myField&quot;)).thenReturn(&quot;myValue&quot;);\n\n        assertEquals(true, documentSnapshot.exists());\n        assertTrue(firestoreDB.recordExists(anyString(), anyString(), anyMap()));\n\n    }\n</code></pre>\n<p>I got and assertion error because the <code>when(documentSnapshot.exists()).thenReturn(true);</code> is returning false even if I'm indicating to be true, what could be the reason? thanks in advance.</p>\n<pre><code>java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.rf.kafka.common.databases.FirestoreDBTest.recordExistTest(FirestoreDBTest.java:49)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n</code></pre>\n"},{"tags":["java","android","geolocation","android-sqlite","locationmanager"],"answers":[{"comments":[{"owner":{"account_id":8247829,"reputation":291,"user_id":6203399,"accept_rate":20,"display_name":"Abm"},"score":0,"creation_date":1681351344,"post_id":75999791,"comment_id":134043670,"body_markdown":"Its not working ..App is crashing android.database.sqlite.SQLiteException: no such column: pharmacy_latitude (code 1 SQLITE_ERROR): , while compiling: UPDATE pharmacy SET pharmacy_jointwork=?,pharmacy_date_time=?,pharmacy_latitude=?,pharmacy_longitude=?,pharmacy_campaigncall=?,phar","body":"Its not working ..App is crashing android.database.sqlite.SQLiteException: no such column: pharmacy_latitude (code 1 SQLITE_ERROR): , while compiling: UPDATE pharmacy SET pharmacy_jointwork=?,pharmacy_date_time=?,pharmacy_latitude=&zwnj;&#8203;?,pharmacy_longitude&zwnj;&#8203;=?,pharmacy_campaign&zwnj;&#8203;call=?,phar"},{"owner":{"account_id":13261907,"reputation":11,"user_id":9576202,"display_name":"Vishal Sheoran"},"score":0,"creation_date":1681358708,"post_id":75999791,"comment_id":134044337,"body_markdown":"@Abm please check your SQLITE table structure if you have this key or not there. Also there could be a spelling mismatch in KEYS for ** pharmacy_latitude** in Table and Query. This exception is not relate to location it is related to your Table structure. Can you share your table structure here?","body":"@Abm please check your SQLITE table structure if you have this key or not there. Also there could be a spelling mismatch in KEYS for ** pharmacy_latitude** in Table and Query. This exception is not relate to location it is related to your Table structure. Can you share your table structure here?"},{"owner":{"account_id":8247829,"reputation":291,"user_id":6203399,"accept_rate":20,"display_name":"Abm"},"score":0,"creation_date":1681364611,"post_id":75999791,"comment_id":134044997,"body_markdown":"-   public static String CREATE_PHARMACY = &quot;CREATE TABLE &quot; + TABLE_PHARMA + &quot; (&quot; +\n            PHARMACY_ROW_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n            PHARMACY_DATE_ID + &quot; TEXT NOT NULL, &quot; +\n            PHARMACY_DCRTYPE + &quot; TEXT NOT NULL, &quot; +\n            PHARMACY_REMARKS + &quot; TEXT NOT NULL, &quot; +\n            PHARMACY_LATITUDE + &quot; TEXT NOT NULL, &quot; +\n            PHARMACY_LONGITUDE + &quot; TEXT NOT NULL, &quot; +\n            &quot;FOREIGN KEY(&quot; + PHARMACY_DATE_ID + &quot;) REFERENCES day_Activity(date_id) ON DELETE CASCADE&quot; + &quot;);&quot;;","body":"-   public static String CREATE_PHARMACY = &quot;CREATE TABLE &quot; + TABLE_PHARMA + &quot; (&quot; +             PHARMACY_ROW_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +             PHARMACY_DATE_ID + &quot; TEXT NOT NULL, &quot; +             PHARMACY_DCRTYPE + &quot; TEXT NOT NULL, &quot; +             PHARMACY_REMARKS + &quot; TEXT NOT NULL, &quot; +             PHARMACY_LATITUDE + &quot; TEXT NOT NULL, &quot; +             PHARMACY_LONGITUDE + &quot; TEXT NOT NULL, &quot; +             &quot;FOREIGN KEY(&quot; + PHARMACY_DATE_ID + &quot;) REFERENCES day_Activity(date_id) ON DELETE CASCADE&quot; + &quot;);&quot;;"}],"tags":[],"owner":{"account_id":13261907,"reputation":11,"user_id":9576202,"display_name":"Vishal Sheoran"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681333221,"creation_date":1681333221,"answer_id":75999791,"question_id":75998043,"body_markdown":"The only possible issue here would be that before the **pharmacy_lat** and **pharmacy_lon** is being fetched the **saveData()** function is called.\r\n\r\nSince you have not initilized the values of **pharmacy_lon** &amp; **pharmacy_lat** and they are not fetched also thus in Database they are saved as **null**.\r\n\r\nTo fix this issue you can do below things:\r\n\r\n    //Need to initialise these 2 variables otherwise it in Db they will be stored as null\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n         Double pharmacy_lat = 0\r\n         Double pharmacy_lon = 0\r\n    }\r\n\r\n\r\n    saveData(){\r\n       if( pharmacy_lat &lt;= 0 || pharmacy_lon &lt;= 0){\r\n          Toast.makeToast(&quot;TAG&quot;, &quot;The location is not fetched yet&quot;, Toast.SHORT);\r\n          return;\r\n       }\r\n    \r\n       //Else do the same logic you were doing previously.\r\n    \r\n    }\r\n\r\nIn the above code we will make sure that fetching part is completed and **pharmacy_lat** and **pharmacy_lon** actually have some values which is greater than 0.\r\n\r\nHope this will resolve your query and Keep Coding...","title":"Android Capture user latitude and longitude and save to sqlite database","body":"<p>The only possible issue here would be that before the <strong>pharmacy_lat</strong> and <strong>pharmacy_lon</strong> is being fetched the <strong>saveData()</strong> function is called.</p>\n<p>Since you have not initilized the values of <strong>pharmacy_lon</strong> &amp; <strong>pharmacy_lat</strong> and they are not fetched also thus in Database they are saved as <strong>null</strong>.</p>\n<p>To fix this issue you can do below things:</p>\n<pre><code>//Need to initialise these 2 variables otherwise it in Db they will be stored as null\nprotected void onCreate(Bundle savedInstanceState) {\n     Double pharmacy_lat = 0\n     Double pharmacy_lon = 0\n}\n\n\nsaveData(){\n   if( pharmacy_lat &lt;= 0 || pharmacy_lon &lt;= 0){\n      Toast.makeToast(&quot;TAG&quot;, &quot;The location is not fetched yet&quot;, Toast.SHORT);\n      return;\n   }\n\n   //Else do the same logic you were doing previously.\n\n}\n</code></pre>\n<p>In the above code we will make sure that fetching part is completed and <strong>pharmacy_lat</strong> and <strong>pharmacy_lon</strong> actually have some values which is greater than 0.</p>\n<p>Hope this will resolve your query and Keep Coding...</p>\n"},{"tags":[],"owner":{"account_id":5849714,"reputation":92,"user_id":5362509,"display_name":"Lakshmi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683305083,"creation_date":1683305083,"answer_id":76184366,"question_id":75998043,"body_markdown":"While creating the table TABLE_PHARMA, you have declared PHARMACY_LATITUDE and PHARMACY_LONGITUDE as TEXT type. But while inserting into the table, you are inserting a double datatype value. \r\n\r\n    cvDoctor.put(Queryclass.PHARMACY_LATITUDE, pharmacy_lat);\r\n    cvDoctor.put(Queryclass.PHARMACY_LONGITUDE, pharmacy_lon);\r\n\r\nFirst convert them into String datatype and then insert it, it will work. \r\n\r\n    cvDoctor.put(Queryclass.PHARMACY_LATITUDE, String.valueOf(pharmacy_lat));\r\n    cvDoctor.put(Queryclass.PHARMACY_LONGITUDE, String.valueOf(pharmacy_lon));","title":"Android Capture user latitude and longitude and save to sqlite database","body":"<p>While creating the table TABLE_PHARMA, you have declared PHARMACY_LATITUDE and PHARMACY_LONGITUDE as TEXT type. But while inserting into the table, you are inserting a double datatype value.</p>\n<pre><code>cvDoctor.put(Queryclass.PHARMACY_LATITUDE, pharmacy_lat);\ncvDoctor.put(Queryclass.PHARMACY_LONGITUDE, pharmacy_lon);\n</code></pre>\n<p>First convert them into String datatype and then insert it, it will work.</p>\n<pre><code>cvDoctor.put(Queryclass.PHARMACY_LATITUDE, String.valueOf(pharmacy_lat));\ncvDoctor.put(Queryclass.PHARMACY_LONGITUDE, String.valueOf(pharmacy_lon));\n</code></pre>\n"}],"owner":{"account_id":8247829,"reputation":291,"user_id":6203399,"accept_rate":20,"display_name":"Abm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683305083,"creation_date":1681318477,"question_id":75998043,"body_markdown":"  In my activity I want to capture user&#39;s latitude and longitude and save it to the database. User&#39;s latitude and longitude is captured when checked with a debugger but it is not inserting in the database. It is saved as null in database. When user clicks save button saveData() is called and values should insert in db, other values except latitude and longitude are inserting.  The fields declared are  PHARMACY_LATITUDE + &quot; TEXT NOT NULL, &quot; +\r\n            PHARMACY_LONGITUDE + &quot; TEXT NOT NULL, &quot; +How do I fix this? Please provide a solution.\r\n\r\n\r\n\r\n    public class ParentFragmentChemist extends FragmentActivity implements OnClickListener {\r\n    LocationListener locationListener;\r\n    LocationManager locationManager;\r\n    Double pharmacy_lat,pharmacy_lon;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_parent_fragment_chemist);\r\n    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n        locationListener = new LocationListener() {\r\n            @Override\r\n            public void onLocationChanged(@NonNull Location location) {\r\n                pharmacy_lat = location.getLatitude();\r\n                pharmacy_lon = location.getLongitude();\r\n                locationManager.removeUpdates(locationListener);\r\n                System.out.println(&quot;pharmacy_lat &quot;+pharmacy_lat + &quot;pharmacy_lon&quot; +pharmacy_lon);\r\n               \r\n            }\r\n        };\r\n        if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED){\r\n            ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION},101);\r\n        }else{\r\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);\r\n\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if((requestCode == 101) &amp;&amp; (grantResults.length &gt; 0)){\r\n            if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n                if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n    saveData(){\r\n    pcount = pcount + 1;\r\n                        String where = Queryclass.DAYACTIVITY_DATE_ID + &quot; = &quot; + id;\r\n                        ContentValues cvphcount = new ContentValues();\r\n                        cvphcount.put(Queryclass.DAYACTIVITY_DCR, &quot;1&quot;);\r\n                        cvphcount.put(Queryclass.DAYACTIVITY_PHARMACYCOUNT, Integer.toString(pcount));\r\n                        sd.update(Queryclass.TABLE_DAYACTIVITY, cvphcount, where);\r\n\r\n                        ContentValues cvDoctor = new ContentValues();\r\n                        cvDoctor.put(Queryclass.PHARMACY_DATE_ID, id);\r\n                        cvDoctor.put(Queryclass.PHARMACY_DCRTYPE, Datafields.dcrtype);\r\n                        cvDoctor.put(Queryclass.PHARMACY_CONTACTID, Datafields.contactid);\r\n                        cvDoctor.put(Queryclass.PHARMACY_CONTACTNAME, Datafields.contactname);\r\n                        cvDoctor.put(Queryclass.PHARMACY_BRICKID, Datafields.pharmacyBrickId);\r\n                        Calendar instance = Calendar.getInstance();\r\n                        String hr = String.valueOf(instance.get(Calendar.HOUR));\r\n                        String mn = String.valueOf(instance.get(Calendar.MINUTE));\r\n                        cvDoctor.put(Queryclass.PHARMACY_VISITTIME, hr+&quot;:&quot;+ mn);\r\n                        cvDoctor.put(Queryclass.PHARMACY_JOINTWORK, Datafields.jointwork);\r\n                        cvDoctor.put(Queryclass.PHARMACY_AVAILABILITY, Datafields.availability);\r\n                        cvDoctor.put(Queryclass.PHARMACY_POB, Datafields.pob);\r\n                        cvDoctor.put(Queryclass.PHARMACY_NOUNITS, Datafields.nou);\r\n                        cvDoctor.put(Queryclass.PHARMACY_CALLTYPE, Datafields.chemistCallTypeData);\r\n                        cvDoctor.put(Queryclass.PHARMACY_CAMPAIGNCALL, Datafields.chemistCampaignCallData);\r\n                        cvDoctor.put(Queryclass.PHARMACY_RCPA, Datafields.RCPA_DATA);\r\n                        cvDoctor.put(Queryclass.PHARMACY_REMARKS, Datafields.Customer_remark);\r\n                        cvDoctor.put(Queryclass.PHARMACY_DATE_TIME, CommonUtils.getDateTimeStamp(dateTimeStampFormat));\r\n                        cvDoctor.put(Queryclass.PHARMACY_LATITUDE, pharmacy_lat);\r\n                        cvDoctor.put(Queryclass.PHARMACY_LONGITUDE, pharmacy_lon);\r\n                        boolean result=sd.isExist(Queryclass.TABLE_PHARMA,id,CommonUtils.getDateTimeStamp(dateTesting),Queryclass.PHARMACY_DATE_TIME,Queryclass.PHARMACY_CONTACTID,Queryclass.PHARMACY_DATE_ID);\r\n                        if(result){\r\n\r\n                        }else{\r\n                            sd.insert(Queryclass.TABLE_PHARMA, cvDoctor);\r\n                        }","title":"Android Capture user latitude and longitude and save to sqlite database","body":"<p>In my activity I want to capture user's latitude and longitude and save it to the database. User's latitude and longitude is captured when checked with a debugger but it is not inserting in the database. It is saved as null in database. When user clicks save button saveData() is called and values should insert in db, other values except latitude and longitude are inserting.  The fields declared are  PHARMACY_LATITUDE + &quot; TEXT NOT NULL, &quot; +\nPHARMACY_LONGITUDE + &quot; TEXT NOT NULL, &quot; +How do I fix this? Please provide a solution.</p>\n<pre><code>public class ParentFragmentChemist extends FragmentActivity implements OnClickListener {\nLocationListener locationListener;\nLocationManager locationManager;\nDouble pharmacy_lat,pharmacy_lon;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_parent_fragment_chemist);\nlocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n    locationListener = new LocationListener() {\n        @Override\n        public void onLocationChanged(@NonNull Location location) {\n            pharmacy_lat = location.getLatitude();\n            pharmacy_lon = location.getLongitude();\n            locationManager.removeUpdates(locationListener);\n            System.out.println(&quot;pharmacy_lat &quot;+pharmacy_lat + &quot;pharmacy_lon&quot; +pharmacy_lon);\n           \n        }\n    };\n    if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED){\n        ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION},101);\n    }else{\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);\n\n    }\n}\n\n@Override\npublic void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    if((requestCode == 101) &amp;&amp; (grantResults.length &gt; 0)){\n        if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\n            if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);\n\n            }\n\n        }\n    }\n\n}\nsaveData(){\npcount = pcount + 1;\n                    String where = Queryclass.DAYACTIVITY_DATE_ID + &quot; = &quot; + id;\n                    ContentValues cvphcount = new ContentValues();\n                    cvphcount.put(Queryclass.DAYACTIVITY_DCR, &quot;1&quot;);\n                    cvphcount.put(Queryclass.DAYACTIVITY_PHARMACYCOUNT, Integer.toString(pcount));\n                    sd.update(Queryclass.TABLE_DAYACTIVITY, cvphcount, where);\n\n                    ContentValues cvDoctor = new ContentValues();\n                    cvDoctor.put(Queryclass.PHARMACY_DATE_ID, id);\n                    cvDoctor.put(Queryclass.PHARMACY_DCRTYPE, Datafields.dcrtype);\n                    cvDoctor.put(Queryclass.PHARMACY_CONTACTID, Datafields.contactid);\n                    cvDoctor.put(Queryclass.PHARMACY_CONTACTNAME, Datafields.contactname);\n                    cvDoctor.put(Queryclass.PHARMACY_BRICKID, Datafields.pharmacyBrickId);\n                    Calendar instance = Calendar.getInstance();\n                    String hr = String.valueOf(instance.get(Calendar.HOUR));\n                    String mn = String.valueOf(instance.get(Calendar.MINUTE));\n                    cvDoctor.put(Queryclass.PHARMACY_VISITTIME, hr+&quot;:&quot;+ mn);\n                    cvDoctor.put(Queryclass.PHARMACY_JOINTWORK, Datafields.jointwork);\n                    cvDoctor.put(Queryclass.PHARMACY_AVAILABILITY, Datafields.availability);\n                    cvDoctor.put(Queryclass.PHARMACY_POB, Datafields.pob);\n                    cvDoctor.put(Queryclass.PHARMACY_NOUNITS, Datafields.nou);\n                    cvDoctor.put(Queryclass.PHARMACY_CALLTYPE, Datafields.chemistCallTypeData);\n                    cvDoctor.put(Queryclass.PHARMACY_CAMPAIGNCALL, Datafields.chemistCampaignCallData);\n                    cvDoctor.put(Queryclass.PHARMACY_RCPA, Datafields.RCPA_DATA);\n                    cvDoctor.put(Queryclass.PHARMACY_REMARKS, Datafields.Customer_remark);\n                    cvDoctor.put(Queryclass.PHARMACY_DATE_TIME, CommonUtils.getDateTimeStamp(dateTimeStampFormat));\n                    cvDoctor.put(Queryclass.PHARMACY_LATITUDE, pharmacy_lat);\n                    cvDoctor.put(Queryclass.PHARMACY_LONGITUDE, pharmacy_lon);\n                    boolean result=sd.isExist(Queryclass.TABLE_PHARMA,id,CommonUtils.getDateTimeStamp(dateTesting),Queryclass.PHARMACY_DATE_TIME,Queryclass.PHARMACY_CONTACTID,Queryclass.PHARMACY_DATE_ID);\n                    if(result){\n\n                    }else{\n                        sd.insert(Queryclass.TABLE_PHARMA, cvDoctor);\n                    }\n</code></pre>\n"},{"tags":["java","android","react-native","crash","android-permissions"],"comments":[{"owner":{"account_id":8436740,"reputation":668,"user_id":7710739,"display_name":"Reejesh PK"},"score":0,"creation_date":1683383695,"post_id":76184342,"comment_id":134360143,"body_markdown":"You can add your existing code to your question so that it will be more detailed.","body":"You can add your existing code to your question so that it will be more detailed."}],"owner":{"account_id":28519384,"reputation":1,"user_id":21828302,"display_name":"thesky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683304917,"creation_date":1683304917,"question_id":76184342,"body_markdown":"I am using react-native to develop an android app,the problem is if user gives storage permission the app works fine, but if after giving permission if user revoke storage(read, write) permission manually from settings, it causes app to crash. I have tried many things but none of them is working. It is a critical error which cant be handled from react-native side, it has to be handled from native android side.\r\n\r\nI want to handle this behaviour because it will not be good for user experience. I have tried many things but none of them are working.\r\n\r\nThanks in advance for helping me and giving your precious time.\r\n\r\n\r\n\r\n","title":"React native android app crash on storage(read,write) permission revoke at runtime manually from settings","body":"<p>I am using react-native to develop an android app,the problem is if user gives storage permission the app works fine, but if after giving permission if user revoke storage(read, write) permission manually from settings, it causes app to crash. I have tried many things but none of them is working. It is a critical error which cant be handled from react-native side, it has to be handled from native android side.</p>\n<p>I want to handle this behaviour because it will not be good for user experience. I have tried many things but none of them are working.</p>\n<p>Thanks in advance for helping me and giving your precious time.</p>\n"},{"tags":["java","maven","jgrapht"],"answers":[{"tags":[],"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683234452,"creation_date":1683234452,"answer_id":76177365,"question_id":76176621,"body_markdown":"I think I found a solution. If I simply run &#39;mvn archetype:generate&quot; it will show a *long* list, of which I can simply find and select jgrapht. This seems to have worked for now :)","title":"Maven &quot;The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;","body":"<p>I think I found a solution. If I simply run 'mvn archetype:generate&quot; it will show a <em>long</em> list, of which I can simply find and select jgrapht. This seems to have worked for now :)</p>\n"},{"tags":[],"owner":{"account_id":2146298,"reputation":2282,"user_id":1903852,"accept_rate":77,"display_name":"Joris Kinable"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683304202,"creation_date":1683304202,"answer_id":76184263,"question_id":76176621,"body_markdown":"This is not really a JGraphT question but more of a &quot;how do I set up a Java project with external dependencies&quot; question. There&#39;s at least 3 different ways to include JGraphT into your project:\r\n\r\n1. Create a maven project and add JGraphT as a dependency.\r\n2. Create a non-maven project, download JGraphT from our website and add the jgrapht JAR to your project&#39;s classpath.\r\n3. Create a non-maven project, download the JGraphT source from our github page and import the source directly into your project. There&#39;s not many good use-cases for this approach, so this is generally not what we would recommend.\r\n\r\nIn general, have a look at our [How to use JGraphT as a dependency in your projects](https://github.com/jgrapht/jgrapht/wiki/Users%3A-How-to-use-JGraphT-as-a-dependency-in-your-projects) wiki page. ","title":"Maven &quot;The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;","body":"<p>This is not really a JGraphT question but more of a &quot;how do I set up a Java project with external dependencies&quot; question. There's at least 3 different ways to include JGraphT into your project:</p>\n<ol>\n<li>Create a maven project and add JGraphT as a dependency.</li>\n<li>Create a non-maven project, download JGraphT from our website and add the jgrapht JAR to your project's classpath.</li>\n<li>Create a non-maven project, download the JGraphT source from our github page and import the source directly into your project. There's not many good use-cases for this approach, so this is generally not what we would recommend.</li>\n</ol>\n<p>In general, have a look at our <a href=\"https://github.com/jgrapht/jgrapht/wiki/Users%3A-How-to-use-JGraphT-as-a-dependency-in-your-projects\" rel=\"nofollow noreferrer\">How to use JGraphT as a dependency in your projects</a> wiki page.</p>\n"}],"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177365,"answer_count":2,"score":1,"last_activity_date":1683304202,"creation_date":1683227192,"question_id":76176621,"body_markdown":"I am using Maven for a java project I&#39;m working on because I wish to include a library for graph structures (jgrapht) which cannot be used without Maven (afaik), but I have no used Maven before so I am not very familiar with how to use it.\r\n\r\nI downloaded and unzipped the files for jgrapht and attempted to execute the command provided on the jgrapht github to create a project which includes jgrapht. However, when I execute this command I get the error \r\n\r\n&quot;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:3.2.1:generate (default-cli) on project ever-dark: The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;\r\n\r\nI noticed that the command provided on the github has the wrong version number, so I tried correcting that, but there was no change. \r\n\r\nThe command given is \r\n\r\n&quot;mvn archetype:generate -DarchetypeGroupId=org.jgrapht.archetypes -DarchetypeArtifactId=maven-archetype-jgrapht -DarchetypeVersion=1.2.0&quot;","title":"Maven &quot;The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;","body":"<p>I am using Maven for a java project I'm working on because I wish to include a library for graph structures (jgrapht) which cannot be used without Maven (afaik), but I have no used Maven before so I am not very familiar with how to use it.</p>\n<p>I downloaded and unzipped the files for jgrapht and attempted to execute the command provided on the jgrapht github to create a project which includes jgrapht. However, when I execute this command I get the error</p>\n<p>&quot;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:3.2.1:generate (default-cli) on project ever-dark: The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;</p>\n<p>I noticed that the command provided on the github has the wrong version number, so I tried correcting that, but there was no change.</p>\n<p>The command given is</p>\n<p>&quot;mvn archetype:generate -DarchetypeGroupId=org.jgrapht.archetypes -DarchetypeArtifactId=maven-archetype-jgrapht -DarchetypeVersion=1.2.0&quot;</p>\n"},{"tags":["java","arrays","testing"],"answers":[{"tags":[],"owner":{"account_id":391375,"reputation":1507,"user_id":751992,"display_name":"Sampisa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683303980,"creation_date":1683303980,"answer_id":76184232,"question_id":76177537,"body_markdown":"You should use a different approach. You must multiply all the array elements &lt;&gt; 0 and at the same time, find the biggest negative number. If the result is negative, divide it by the biggest negative number. \r\nYou have some issues in some corner cases, e.g. just a single negative number, or just a 0 and a negative number, or just zeros, then you must use a specific check for them.\r\n\r\n        public String solution(int[] xs) {\r\n            if (xs.length == 0) {\r\n                return &quot;-&quot;;\r\n            }\r\n    \r\n            int multiplied = 0;\r\n            Long result = 1L;\r\n            int bigger = Integer.MIN_VALUE;\r\n            for (int value : xs) {\r\n                if (value != 0) {\r\n                    result = result * value;\r\n                    multiplied++;\r\n                    if (value &lt; 0 &amp;&amp; value &gt; bigger) {\r\n                        bigger = value;\r\n                    }\r\n                }\r\n    \r\n            }\r\n            if (multiplied == 0) {\r\n                return &quot;0&quot;;\r\n            }\r\n    \r\n            if (result &lt; 0) {\r\n                if (xs.length &gt; 1 &amp; multiplied == 1) {\r\n                    return &quot;0&quot;;\r\n                }\r\n                if (bigger == Integer.MIN_VALUE || xs.length == 1) {\r\n                    return &quot;-&quot;;\r\n                }\r\n                result = result / bigger;\r\n            }\r\n            return result.toString();\r\n        }\r\n\r\n        @Test\r\n        public void testSolution()\r\n        {            \r\n            Assert.assertEquals(&quot;8&quot;, solution(new int[] { 2, 0, 2, 2, 0 }));\r\n            Assert.assertEquals(&quot;60&quot;, solution(new int[] { -2, -3, 4, -5 }));\r\n            Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0 }));\r\n            Assert.assertEquals(&quot;1&quot;, solution(new int[] { 1 }));\r\n            Assert.assertEquals(&quot;-&quot;, solution(new int[] { -1 }));\r\n            Assert.assertEquals(&quot;-&quot;, solution(new int[] {}));\r\n            Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, -1 }));\r\n            Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, -1, 0, 0 }));\r\n            Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, 0, 0 }));\r\n            Assert.assertEquals(&quot;2&quot;, solution(new int[] { 2, 0 }));\r\n            Assert.assertEquals(&quot;60&quot;, solution(new int[] { -3, 4, -5, -2 }));\r\n            Assert.assertEquals(&quot;2400&quot;, solution(new int[] { 4, 3, -5, -4, -5, -2, 0, 0, 1, 1, -2 }));\r\n        }\r\n","title":"Why does my code cannot only pass test 4 in foo.bar Power-Hungry?","body":"<p>You should use a different approach. You must multiply all the array elements &lt;&gt; 0 and at the same time, find the biggest negative number. If the result is negative, divide it by the biggest negative number.\nYou have some issues in some corner cases, e.g. just a single negative number, or just a 0 and a negative number, or just zeros, then you must use a specific check for them.</p>\n<pre><code>    public String solution(int[] xs) {\n        if (xs.length == 0) {\n            return &quot;-&quot;;\n        }\n\n        int multiplied = 0;\n        Long result = 1L;\n        int bigger = Integer.MIN_VALUE;\n        for (int value : xs) {\n            if (value != 0) {\n                result = result * value;\n                multiplied++;\n                if (value &lt; 0 &amp;&amp; value &gt; bigger) {\n                    bigger = value;\n                }\n            }\n\n        }\n        if (multiplied == 0) {\n            return &quot;0&quot;;\n        }\n\n        if (result &lt; 0) {\n            if (xs.length &gt; 1 &amp; multiplied == 1) {\n                return &quot;0&quot;;\n            }\n            if (bigger == Integer.MIN_VALUE || xs.length == 1) {\n                return &quot;-&quot;;\n            }\n            result = result / bigger;\n        }\n        return result.toString();\n    }\n\n    @Test\n    public void testSolution()\n    {            \n        Assert.assertEquals(&quot;8&quot;, solution(new int[] { 2, 0, 2, 2, 0 }));\n        Assert.assertEquals(&quot;60&quot;, solution(new int[] { -2, -3, 4, -5 }));\n        Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0 }));\n        Assert.assertEquals(&quot;1&quot;, solution(new int[] { 1 }));\n        Assert.assertEquals(&quot;-&quot;, solution(new int[] { -1 }));\n        Assert.assertEquals(&quot;-&quot;, solution(new int[] {}));\n        Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, -1 }));\n        Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, -1, 0, 0 }));\n        Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, 0, 0 }));\n        Assert.assertEquals(&quot;2&quot;, solution(new int[] { 2, 0 }));\n        Assert.assertEquals(&quot;60&quot;, solution(new int[] { -3, 4, -5, -2 }));\n        Assert.assertEquals(&quot;2400&quot;, solution(new int[] { 4, 3, -5, -4, -5, -2, 0, 0, 1, 1, -2 }));\n    }\n</code></pre>\n"}],"owner":{"account_id":21067889,"reputation":41,"user_id":15484693,"display_name":"lubo dimoff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76184232,"answer_count":1,"score":0,"last_activity_date":1683303980,"creation_date":1683236445,"question_id":76177537,"body_markdown":"Power Hungry\r\n============\r\nCommander Lambda&#39;s space station is HUGE. And huge space stations take a LOT of power. Huge space stations with doomsday devices take even more power. To help meet the station&#39;s power needs, Commander Lambda has installed solar panels on the station&#39;s outer surface. But the station sits in the middle of a quasar quantum flux field, which wreaks havoc on the solar panels. You and your team of henchmen have been assigned to repair the solar panels, but you&#39;d rather not take down all of the panels at once if you can help it, since they do help power the space station and all!\r\n\r\nYou need to figure out which sets of panels in any given array you can take offline to repair while still maintaining the maximum amount of power output per array, and to do THAT, you&#39;ll first need to figure out what the maximum output of each array actually is. Write a function solution(xs) that takes a list of integers representing the power output levels of each panel in an array, and returns the maximum product of some non-empty subset of those numbers. So for example, if an array contained panels with power output levels of ( 2, -3, 1, 0, -5 ), then the maximum product would be found by taking the subset: xs(0) = 2, xs(1) = -3, xs(4) = -5, giving the product 2*(-3)*(-5) = 30. So solution(2,-3,1,0,-5) will be &quot;30&quot;.\r\n\r\nEach array of solar panels contains at least 1 and no more than 50 panels, and each panel will have a power output level whose absolute value is no greater than 1000 (some panels are malfunctioning so badly that they&#39;re draining energy, but you know a trick with the panels&#39; wave stabilizer that lets you combine two negative-output panels to produce the positive output of the multiple of their power values). The final products may be very large, so give the solution as a string representation of the number.  \r\n\r\n\r\nTest cases\r\n==========\r\nYour code should pass the following test cases.\r\nNote that it may also be run against hidden test cases not shown here.\r\n\r\n-- Python cases --\r\nInput:\r\nsolution.solution(2, 0, 2, 2, 0)\r\nOutput:\r\n    8\r\n\r\nInput:\r\nsolution.solution(-2, -3, 4, -5)\r\nOutput:\r\n    60\r\n\r\n-- Java cases --\r\nInput:\r\nSolution.solution({2, 0, 2, 2, 0})\r\nOutput:\r\n    8\r\n\r\nInput:\r\nSolution.solution({-2, -3, 4, -5})\r\nOutput:\r\n    60\r\n\r\n\r\n\r\nThis is my code in Java with my tests that the code can pass with ease.\r\n\r\n```\r\npublic static void main(String[] args) {\r\n\r\n        int[] array1 = {2, 0, 2, 2, 0}; // 8\r\n        int[] array2 = {-2, -3, 4, -5}; // 60\r\n        int[] array3 = {0}; // 0\r\n        int[] array4 = {1};// 1\r\n        int[] array5 = {0, 2, 2, -4, -2, -2};// 32\r\n        int[] array6 = {1, 1, 2, 1, 1};// 2\r\n        int[] array7 = {-3, 4, -5, -2};// 60\r\n        int[] array8 = {0, -1};// 0\r\n        int[] array9 = {0, 1};// 1\r\n        int[] array10 = {4, 3, -5, -4, -5, -2, 0, 0, 1, 1, -2};// 2400\r\n\r\n        System.out.println(solution(array1));\r\n        System.out.println(solution(array2));\r\n        System.out.println(solution(array3));\r\n        System.out.println(solution(array4));\r\n        System.out.println(solution(array5));\r\n        System.out.println(solution(array6));\r\n        System.out.println(solution(array7));\r\n        System.out.println(solution(array8));\r\n        System.out.println(solution(array9));\r\n        System.out.println(solution(array10));\r\n    }\r\n\r\n```\r\n\r\n```\r\n    public static String solution(int[] xs) {\r\n        int length = xs.length;\r\n        int negativeCount = 0;\r\n        int positiveCount = 0;\r\n        int[] negativeArray = new int[length];\r\n        int[] positiveArray = new int[length];\r\n        long multiply = 1;\r\n\r\n        if (length == 0) {\r\n            return &quot;0&quot;;\r\n        }\r\n\r\n        if (length == 1) {\r\n            return String.valueOf(xs[0]);\r\n        }\r\n\r\n        for (int number : xs) {\r\n            if (number &lt; 0) {\r\n                negativeArray[negativeCount] = number;\r\n                negativeCount++;\r\n            } else if (number &gt; 0) {\r\n                positiveArray[positiveCount] = number;\r\n                positiveCount++;\r\n            }\r\n        }\r\n\r\n        if ((positiveCount == 0 &amp;&amp; negativeCount == 0) || (positiveCount == 0 &amp;&amp; negativeCount == 1)) {\r\n            return &quot;0&quot;;\r\n        }\r\n\r\n\r\n        if (negativeCount % 2 == 1) {\r\n            int largestNegativeNumber = Integer.MIN_VALUE;\r\n            int largestNegativeIndex = -1;\r\n            for (int i = 0; i &lt; negativeArray.length; i++) {\r\n                if (negativeArray[i] &lt; 0 &amp;&amp; negativeArray[i] &gt; largestNegativeNumber) {\r\n                    largestNegativeNumber = negativeArray[i];\r\n                    largestNegativeIndex = i;\r\n                }\r\n            }\r\n            if (largestNegativeIndex != -1) {\r\n                int[] newArray = new int[negativeArray.length - 1];\r\n                int j = 0;\r\n                for (int i = 0; i &lt; negativeArray.length; i++) {\r\n                    if (i != largestNegativeIndex) {\r\n                        newArray[j++] = negativeArray[i];\r\n                    }\r\n                }\r\n\r\n                negativeArray = newArray;\r\n                negativeCount--;\r\n            }\r\n        }\r\n\r\n        for (int i = 0; i &lt; positiveCount + negativeCount; i++) {\r\n            if (i &lt; positiveCount) {\r\n                multiply *= positiveArray[i];\r\n            } else {\r\n                multiply *= negativeArray[i - positiveCount];\r\n            }\r\n        }\r\n\r\n        return Long.toString(multiply);\r\n    }\r\n\r\n```\r\n\r\n\r\nI changed the code multiple times, of course, however now from all 5 test that foo.bar provides I cannot pass only the fourth one. I tried to look for more information, but I only found people that have done it in Python. When I look between my code in Java and the code of people, their code passes all tests in Python I do not see any method or logic that I have missed!","title":"Why does my code cannot only pass test 4 in foo.bar Power-Hungry?","body":"<h1>Power Hungry</h1>\n<p>Commander Lambda's space station is HUGE. And huge space stations take a LOT of power. Huge space stations with doomsday devices take even more power. To help meet the station's power needs, Commander Lambda has installed solar panels on the station's outer surface. But the station sits in the middle of a quasar quantum flux field, which wreaks havoc on the solar panels. You and your team of henchmen have been assigned to repair the solar panels, but you'd rather not take down all of the panels at once if you can help it, since they do help power the space station and all!</p>\n<p>You need to figure out which sets of panels in any given array you can take offline to repair while still maintaining the maximum amount of power output per array, and to do THAT, you'll first need to figure out what the maximum output of each array actually is. Write a function solution(xs) that takes a list of integers representing the power output levels of each panel in an array, and returns the maximum product of some non-empty subset of those numbers. So for example, if an array contained panels with power output levels of ( 2, -3, 1, 0, -5 ), then the maximum product would be found by taking the subset: xs(0) = 2, xs(1) = -3, xs(4) = -5, giving the product 2*(-3)*(-5) = 30. So solution(2,-3,1,0,-5) will be &quot;30&quot;.</p>\n<p>Each array of solar panels contains at least 1 and no more than 50 panels, and each panel will have a power output level whose absolute value is no greater than 1000 (some panels are malfunctioning so badly that they're draining energy, but you know a trick with the panels' wave stabilizer that lets you combine two negative-output panels to produce the positive output of the multiple of their power values). The final products may be very large, so give the solution as a string representation of the number.</p>\n<h1>Test cases</h1>\n<p>Your code should pass the following test cases.\nNote that it may also be run against hidden test cases not shown here.</p>\n<p>-- Python cases --\nInput:\nsolution.solution(2, 0, 2, 2, 0)\nOutput:\n8</p>\n<p>Input:\nsolution.solution(-2, -3, 4, -5)\nOutput:\n60</p>\n<p>-- Java cases --\nInput:\nSolution.solution({2, 0, 2, 2, 0})\nOutput:\n8</p>\n<p>Input:\nSolution.solution({-2, -3, 4, -5})\nOutput:\n60</p>\n<p>This is my code in Java with my tests that the code can pass with ease.</p>\n<pre><code>public static void main(String[] args) {\n\n        int[] array1 = {2, 0, 2, 2, 0}; // 8\n        int[] array2 = {-2, -3, 4, -5}; // 60\n        int[] array3 = {0}; // 0\n        int[] array4 = {1};// 1\n        int[] array5 = {0, 2, 2, -4, -2, -2};// 32\n        int[] array6 = {1, 1, 2, 1, 1};// 2\n        int[] array7 = {-3, 4, -5, -2};// 60\n        int[] array8 = {0, -1};// 0\n        int[] array9 = {0, 1};// 1\n        int[] array10 = {4, 3, -5, -4, -5, -2, 0, 0, 1, 1, -2};// 2400\n\n        System.out.println(solution(array1));\n        System.out.println(solution(array2));\n        System.out.println(solution(array3));\n        System.out.println(solution(array4));\n        System.out.println(solution(array5));\n        System.out.println(solution(array6));\n        System.out.println(solution(array7));\n        System.out.println(solution(array8));\n        System.out.println(solution(array9));\n        System.out.println(solution(array10));\n    }\n\n</code></pre>\n<pre><code>    public static String solution(int[] xs) {\n        int length = xs.length;\n        int negativeCount = 0;\n        int positiveCount = 0;\n        int[] negativeArray = new int[length];\n        int[] positiveArray = new int[length];\n        long multiply = 1;\n\n        if (length == 0) {\n            return &quot;0&quot;;\n        }\n\n        if (length == 1) {\n            return String.valueOf(xs[0]);\n        }\n\n        for (int number : xs) {\n            if (number &lt; 0) {\n                negativeArray[negativeCount] = number;\n                negativeCount++;\n            } else if (number &gt; 0) {\n                positiveArray[positiveCount] = number;\n                positiveCount++;\n            }\n        }\n\n        if ((positiveCount == 0 &amp;&amp; negativeCount == 0) || (positiveCount == 0 &amp;&amp; negativeCount == 1)) {\n            return &quot;0&quot;;\n        }\n\n\n        if (negativeCount % 2 == 1) {\n            int largestNegativeNumber = Integer.MIN_VALUE;\n            int largestNegativeIndex = -1;\n            for (int i = 0; i &lt; negativeArray.length; i++) {\n                if (negativeArray[i] &lt; 0 &amp;&amp; negativeArray[i] &gt; largestNegativeNumber) {\n                    largestNegativeNumber = negativeArray[i];\n                    largestNegativeIndex = i;\n                }\n            }\n            if (largestNegativeIndex != -1) {\n                int[] newArray = new int[negativeArray.length - 1];\n                int j = 0;\n                for (int i = 0; i &lt; negativeArray.length; i++) {\n                    if (i != largestNegativeIndex) {\n                        newArray[j++] = negativeArray[i];\n                    }\n                }\n\n                negativeArray = newArray;\n                negativeCount--;\n            }\n        }\n\n        for (int i = 0; i &lt; positiveCount + negativeCount; i++) {\n            if (i &lt; positiveCount) {\n                multiply *= positiveArray[i];\n            } else {\n                multiply *= negativeArray[i - positiveCount];\n            }\n        }\n\n        return Long.toString(multiply);\n    }\n\n</code></pre>\n<p>I changed the code multiple times, of course, however now from all 5 test that foo.bar provides I cannot pass only the fourth one. I tried to look for more information, but I only found people that have done it in Python. When I look between my code in Java and the code of people, their code passes all tests in Python I do not see any method or logic that I have missed!</p>\n"},{"tags":["java","android-studio","android-alertdialog"],"comments":[{"owner":{"account_id":25542375,"reputation":292,"user_id":19328232,"display_name":"GreenMarty"},"score":0,"creation_date":1682407900,"post_id":76052732,"comment_id":134206007,"body_markdown":"Did you try to run the app from Android studio in debug mode (should be default option).  Is so, it&#39;s very unlikely it would crash the app without writing anything in Logcat. Could there be filter applied to your logcat ?","body":"Did you try to run the app from Android studio in debug mode (should be default option).  Is so, it&#39;s very unlikely it would crash the app without writing anything in Logcat. Could there be filter applied to your logcat ?"}],"answers":[{"comments":[{"owner":{"account_id":28347676,"reputation":23,"user_id":21679602,"display_name":"Beginner"},"score":0,"creation_date":1682700316,"post_id":76099127,"comment_id":134262161,"body_markdown":"No sir... still I am getting the same error...","body":"No sir... still I am getting the same error..."},{"owner":{"account_id":25542375,"reputation":292,"user_id":19328232,"display_name":"GreenMarty"},"score":0,"creation_date":1682792076,"post_id":76099127,"comment_id":134272143,"body_markdown":"What is the error ?","body":"What is the error ?"},{"owner":{"account_id":25542375,"reputation":292,"user_id":19328232,"display_name":"GreenMarty"},"score":0,"creation_date":1683393035,"post_id":76099127,"comment_id":134361296,"body_markdown":"What do you mean by the next answer? There&#39;s a just my answer for now.  If you want to show image and stackOverflow doesn&#39;t allow it, just post it somewhere like imgur and include a link.","body":"What do you mean by the next answer? There&#39;s a just my answer for now.  If you want to show image and stackOverflow doesn&#39;t allow it, just post it somewhere like imgur and include a link."}],"tags":[],"owner":{"account_id":25542375,"reputation":292,"user_id":19328232,"display_name":"GreenMarty"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682414366,"creation_date":1682411646,"answer_id":76099127,"question_id":76052732,"body_markdown":"There&#39;s no need to ask app context from context. \r\n\r\n    import android.app.AlertDialog;\r\n    import android.content.Context;\r\n    import android.content.DialogInterface;\r\n    \r\n    \r\n    public class JavaClass {\r\n    \r\n        public void msgbox(Context context, String msg)\r\n        {\r\n            AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(context); //&lt;- this changed \r\n            dlgAlert.setMessage(msg)\r\n                    .setCancelable(false)\r\n                    .setPositiveButton(&quot;Ok&quot;,\r\n                            new DialogInterface.OnClickListener()\r\n                            {\r\n                                public void onClick(DialogInterface dialog, int which)\r\n                                {\r\n                                    //Toast.makeText(context, &quot;test&quot;, Toast.LENGTH_SHORT).show();\r\n                                    // no action\r\n                                }\r\n                            })\r\n                    .show();\r\n        }\r\n    }\r\n\r\n\r\n\r\nalso you can use `this` to get context in activity class.\r\n\r\n    JavaClass javaClass = new JavaClass();\r\n    javaClass.msgbox(this, &quot;Hello World2&quot;);\r\n\r\nIn Android, we can use the `this` keyword to get the context of the current Activity instance. When used inside an Activity, this refers to that Activity instance, which is a subclass of the Context class. If used inside a listener, we can reference the current context by using the Activity name, such as MainActivity.this in Java or this@MainActivity in Kotlin.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/jq2QGm.png","title":"AlertDialog in seperate class to use in entire project","body":"<p>There's no need to ask app context from context.</p>\n<pre><code>import android.app.AlertDialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\n\n\npublic class JavaClass {\n\n    public void msgbox(Context context, String msg)\n    {\n        AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(context); //&lt;- this changed \n        dlgAlert.setMessage(msg)\n                .setCancelable(false)\n                .setPositiveButton(&quot;Ok&quot;,\n                        new DialogInterface.OnClickListener()\n                        {\n                            public void onClick(DialogInterface dialog, int which)\n                            {\n                                //Toast.makeText(context, &quot;test&quot;, Toast.LENGTH_SHORT).show();\n                                // no action\n                            }\n                        })\n                .show();\n    }\n}\n</code></pre>\n<p>also you can use <code>this</code> to get context in activity class.</p>\n<pre><code>JavaClass javaClass = new JavaClass();\njavaClass.msgbox(this, &quot;Hello World2&quot;);\n</code></pre>\n<p>In Android, we can use the <code>this</code> keyword to get the context of the current Activity instance. When used inside an Activity, this refers to that Activity instance, which is a subclass of the Context class. If used inside a listener, we can reference the current context by using the Activity name, such as MainActivity.this in Java or this@MainActivity in Kotlin.</p>\n<p><a href=\"https://i.stack.imgur.com/jq2QGm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jq2QGm.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28347676,"reputation":23,"user_id":21679602,"display_name":"Beginner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683303774,"creation_date":1681895619,"question_id":76052732,"body_markdown":"I tried to use a seperate class in which Alertdialog is called for showing message. But app crashes without any error\r\n\r\n```\r\n\r\n\r\npackage com.example.library;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.widget.Toast;\r\n\r\npublic class java_class {\r\n\r\n    public void msgbox(Context context, String msg)\r\n    {\r\n        AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(context.getApplicationContext());\r\n        dlgAlert.setMessage(msg)\r\n                .setCancelable(false)\r\n                .setPositiveButton(&quot;Ok&quot;,\r\n                        new DialogInterface.OnClickListener()\r\n                        {\r\n                            public void onClick(DialogInterface dialog, int which)\r\n                            {\r\n                                //Toast.makeText(context, &quot;test&quot;, Toast.LENGTH_SHORT).show();\r\n                                // no action\r\n                            }\r\n                        })\r\n                .show();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nin MainActivity i called it this way..\r\n\r\n\r\n```        \r\n        Context context= getApplicationContext();\r\n        java_class msbox=new java_class();\r\n        msbox.msgbox(context,&quot;Test&quot;);\r\n\r\n```\r\n\r\n\r\nwhen used debugger it ran upto &#39;public void onClick(DialogInterface dialog, int which)&#39; line were app crashed.\r\n\r\n\r\nbut when i used the msgbox(String msg) in Mainactivity as function it works fine. \r\n\r\npls help...\r\n","title":"AlertDialog in seperate class to use in entire project","body":"<p>I tried to use a seperate class in which Alertdialog is called for showing message. But app crashes without any error</p>\n<pre><code>\n\npackage com.example.library;\n\nimport android.app.AlertDialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\nimport android.widget.Toast;\n\npublic class java_class {\n\n    public void msgbox(Context context, String msg)\n    {\n        AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(context.getApplicationContext());\n        dlgAlert.setMessage(msg)\n                .setCancelable(false)\n                .setPositiveButton(&quot;Ok&quot;,\n                        new DialogInterface.OnClickListener()\n                        {\n                            public void onClick(DialogInterface dialog, int which)\n                            {\n                                //Toast.makeText(context, &quot;test&quot;, Toast.LENGTH_SHORT).show();\n                                // no action\n                            }\n                        })\n                .show();\n    }\n}\n\n</code></pre>\n<p>in MainActivity i called it this way..</p>\n<pre><code>        Context context= getApplicationContext();\n        java_class msbox=new java_class();\n        msbox.msgbox(context,&quot;Test&quot;);\n\n</code></pre>\n<p>when used debugger it ran upto 'public void onClick(DialogInterface dialog, int which)' line were app crashed.</p>\n<p>but when i used the msgbox(String msg) in Mainactivity as function it works fine.</p>\n<p>pls help...</p>\n"},{"tags":["java","lambda","java-stream"],"comments":[{"owner":{"account_id":7406747,"reputation":416,"user_id":5635476,"display_name":"levangode"},"score":2,"creation_date":1682552135,"post_id":76115318,"comment_id":134235923,"body_markdown":"when you&#39;re saying something goes wrong once 0 appears, could you specify what exactly is the problem?","body":"when you&#39;re saying something goes wrong once 0 appears, could you specify what exactly is the problem?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682557949,"post_id":76115318,"comment_id":134236448,"body_markdown":"I think you tried to explain, but I am sorry, it still isn’t clear to me exactly what your code is supposed to do and whether it should treat a score of 0 differently. A [mre] would also help so we can run your code and see for ourselves.","body":"I think you tried to explain, but I am sorry, it still isn’t clear to me exactly what your code is supposed to do and whether it should treat a score of 0 differently. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would also help so we can run your code and see for ourselves."},{"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"score":0,"creation_date":1682580237,"post_id":76115318,"comment_id":134239045,"body_markdown":"I mean that if Student have a some number (in my case is 4) of laboratory works, some of which Student passed (in my case is 3) for some points, and some (1) not (they should become 0 points), and then the totalScore should count average values including tasks that a Student did not try to solve (with 0 score), but it count without 0 points.\nAnd averageTotalScore should calculate the average values for each lab, including all Students (in my case is 3) and those who did not try to solve (with 0 points).","body":"I mean that if Student have a some number (in my case is 4) of laboratory works, some of which Student passed (in my case is 3) for some points, and some (1) not (they should become 0 points), and then the totalScore should count average values including tasks that a Student did not try to solve (with 0 score), but it count without 0 points. And averageTotalScore should calculate the average values for each lab, including all Students (in my case is 3) and those who did not try to solve (with 0 points)."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682629495,"post_id":76115318,"comment_id":134250376,"body_markdown":"Thanks. That helps a lot. Please when supplying such additional explanation (or any other information), do it as edits to the question so that we have everything in one place, it’s much nicer. This time I pasted it in there for you (only this time).","body":"Thanks. That helps a lot. Please when supplying such additional explanation (or any other information), do it as edits to the question so that we have everything in one place, it’s much nicer. This time I pasted it in there for you (only this time)."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682629599,"post_id":76115318,"comment_id":134250395,"body_markdown":"So if a student only has got 3 task results, how should your program be able to guess that there had been supposed to be 4?","body":"So if a student only has got 3 task results, how should your program be able to guess that there had been supposed to be 4?"},{"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"score":0,"creation_date":1682666703,"post_id":76115318,"comment_id":134254638,"body_markdown":"I made some changes to clarify details.","body":"I made some changes to clarify details."}],"answers":[{"comments":[{"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"score":0,"creation_date":1682603404,"post_id":76116786,"comment_id":134244497,"body_markdown":"it doesn&#39;t work (","body":"it doesn&#39;t work ("},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1682630134,"post_id":76116786,"comment_id":134250485,"body_markdown":"I believe the OP wants 0s counted in the averaging, which this would end up excluding them.","body":"I believe the OP wants 0s counted in the averaging, which this would end up excluding them."}],"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682570175,"creation_date":1682570175,"answer_id":76116786,"question_id":76115318,"body_markdown":"I believe adding a filter for 0 value check should fix the issue, something similar to below:\r\n```\r\npublic Map&lt;Person, Double&gt; totalScores(Stream&lt;CourseResult&gt; results) {\r\n    return results.collect(Collectors.toMap(CourseResult::getPerson, result -&gt; result\r\n            .getTaskResults()\r\n            .values()\r\n            .stream().mapToInt(s -&gt; s).filter(value -&gt; value != 0)\r\n            .average()\r\n            .orElse(0.0)));\r\n}\r\n```","title":"Ignoring 0 score tasks using Stream API","body":"<p>I believe adding a filter for 0 value check should fix the issue, something similar to below:</p>\n<pre><code>public Map&lt;Person, Double&gt; totalScores(Stream&lt;CourseResult&gt; results) {\n    return results.collect(Collectors.toMap(CourseResult::getPerson, result -&gt; result\n            .getTaskResults()\n            .values()\n            .stream().mapToInt(s -&gt; s).filter(value -&gt; value != 0)\n            .average()\n            .orElse(0.0)));\n}\n</code></pre>\n"}],"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683303730,"creation_date":1682545316,"question_id":76115318,"body_markdown":" I have 2 methods and I need to count average values including tasks that a student did not try  to solve (with 0 score). Everything works until 0 appears. And I stuck with this. What is my problem?\r\n1. totalScores - Return map of persons to their total scores (as average);\r\n2. averageTotalScore - Return average result of all persons (be sure to consider all tasks of the course and not just those that were completed by a particular student).\r\n\r\nI mean that if a student has a some number (in my case it is 4) of laboratory works, some of which the student passed (in my case is 3) for some points, and some (1) not (they should become 0 points), and then the `totalScore` should count average values including tasks that a Student did not try to solve (with 0 score). But it counts without 0 points. And `averageTotalScore` should calculate the average values for each lab, including all Students (in my case is 3) and those who did not try to solve (with 0 points).\r\n    \r\n    For example:\r\n    Student  | Lab1 | Lab2 | Lab3 | Lab4 | Total | Mark |\r\n    Eva Bee  |    0 |   83 |   89 |   59 | 57.75 |    F |\r\n    John Show|   61 |   92 |   67 |    0 | 55.00 |    F |\r\n    Phoebe Li|   75 |   94 |    0 |   52 | 55.25 |    F |\r\n    Average  |45.33 |89.67 |52.00 |37.00 | 56.00 |    F |\r\n \r\n    Expected: 57.75, Actual: 77.00\r\n\r\n    \r\n    public class CourseResult {\r\n        private final Person person;\r\n        private final Map&lt;String, Integer&gt; taskResults;\r\n        public CourseResult(final Person person, final Map&lt;String, Integer&gt; taskResults) {\r\n            this.person = person;\r\n            this.taskResults = taskResults;\r\n        }\r\n        public Person getPerson() {\r\n            return person;\r\n        }\r\n        public Map&lt;String, Integer&gt; getTaskResults() {\r\n            return taskResults;\r\n        }\r\n    }\r\n\r\n\r\n\r\n```\r\n     public static Map&lt;Person, Double&gt; totalScores(Stream&lt;CourseResult&gt; results) {\r\n        Map&lt;Person, List&lt;Integer&gt;&gt; scores = results\r\n                .flatMap(cr -&gt; cr.getTaskResults().entrySet().stream()\r\n                        .filter(e -&gt; e.getValue() &gt;= 0)\r\n                        .map(e -&gt; new AbstractMap.SimpleEntry&lt;&gt;(cr.getPerson(), e.getValue())))\r\n                .collect(Collectors.groupingBy(Map.Entry::getKey, Collectors.mapping(e -&gt; Optional.ofNullable(e.getValue()).orElse(0), Collectors.toList())));\r\n\r\n\r\n        Map&lt;Person, Double&gt; averageScores = new HashMap&lt;&gt;();\r\n        scores.forEach((person, taskResults) -&gt; {\r\n            int totalScore = taskResults.stream()\r\n                    .mapToInt(Integer::intValue)\r\n                    .sum();\r\n            double tasksPerPerson = scores.get(person).stream()\r\n                    .mapToInt(Integer::intValue)\r\n                    .filter(score -&gt; score &gt;= 0)\r\n                    .count();\r\n\r\n            double averageScore = totalScore / tasksPerPerson;\r\n            averageScores.put(person, averageScore);\r\n        });\r\n        return averageScores;\r\n    }","title":"Ignoring 0 score tasks using Stream API","body":"<p>I have 2 methods and I need to count average values including tasks that a student did not try  to solve (with 0 score). Everything works until 0 appears. And I stuck with this. What is my problem?</p>\n<ol>\n<li>totalScores - Return map of persons to their total scores (as average);</li>\n<li>averageTotalScore - Return average result of all persons (be sure to consider all tasks of the course and not just those that were completed by a particular student).</li>\n</ol>\n<p>I mean that if a student has a some number (in my case it is 4) of laboratory works, some of which the student passed (in my case is 3) for some points, and some (1) not (they should become 0 points), and then the <code>totalScore</code> should count average values including tasks that a Student did not try to solve (with 0 score). But it counts without 0 points. And <code>averageTotalScore</code> should calculate the average values for each lab, including all Students (in my case is 3) and those who did not try to solve (with 0 points).</p>\n<pre><code>For example:\nStudent  | Lab1 | Lab2 | Lab3 | Lab4 | Total | Mark |\nEva Bee  |    0 |   83 |   89 |   59 | 57.75 |    F |\nJohn Show|   61 |   92 |   67 |    0 | 55.00 |    F |\nPhoebe Li|   75 |   94 |    0 |   52 | 55.25 |    F |\nAverage  |45.33 |89.67 |52.00 |37.00 | 56.00 |    F |\n\nExpected: 57.75, Actual: 77.00\n\n\npublic class CourseResult {\n    private final Person person;\n    private final Map&lt;String, Integer&gt; taskResults;\n    public CourseResult(final Person person, final Map&lt;String, Integer&gt; taskResults) {\n        this.person = person;\n        this.taskResults = taskResults;\n    }\n    public Person getPerson() {\n        return person;\n    }\n    public Map&lt;String, Integer&gt; getTaskResults() {\n        return taskResults;\n    }\n}\n</code></pre>\n<pre><code>     public static Map&lt;Person, Double&gt; totalScores(Stream&lt;CourseResult&gt; results) {\n        Map&lt;Person, List&lt;Integer&gt;&gt; scores = results\n                .flatMap(cr -&gt; cr.getTaskResults().entrySet().stream()\n                        .filter(e -&gt; e.getValue() &gt;= 0)\n                        .map(e -&gt; new AbstractMap.SimpleEntry&lt;&gt;(cr.getPerson(), e.getValue())))\n                .collect(Collectors.groupingBy(Map.Entry::getKey, Collectors.mapping(e -&gt; Optional.ofNullable(e.getValue()).orElse(0), Collectors.toList())));\n\n\n        Map&lt;Person, Double&gt; averageScores = new HashMap&lt;&gt;();\n        scores.forEach((person, taskResults) -&gt; {\n            int totalScore = taskResults.stream()\n                    .mapToInt(Integer::intValue)\n                    .sum();\n            double tasksPerPerson = scores.get(person).stream()\n                    .mapToInt(Integer::intValue)\n                    .filter(score -&gt; score &gt;= 0)\n                    .count();\n\n            double averageScore = totalScore / tasksPerPerson;\n            averageScores.put(person, averageScore);\n        });\n        return averageScores;\n    }\n</code></pre>\n"},{"tags":["java","constructor","inner-classes","outer-classes"],"answers":[{"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1683246385,"post_id":76178095,"comment_id":134341520,"body_markdown":"Let&#39;s definitely highlight: __This is really bad code, and the first snippet is a horrible idea, it just proves a point, like a silly riddle, that you CAN do it__. The second snippet (make it `static`) is what you should be doing.","body":"Let&#39;s definitely highlight: <b>This is really bad code, and the first snippet is a horrible idea, it just proves a point, like a silly riddle, that you CAN do it</b>. The second snippet (make it <code>static</code>) is what you should be doing."},{"owner":{"account_id":1281728,"reputation":73134,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"score":0,"creation_date":1683246646,"post_id":76178095,"comment_id":134341541,"body_markdown":"That&#39;s absolutely correct. There&#39;s also a high chance that the best approach would simply be refactoring that code and make it stink less.","body":"That&#39;s absolutely correct. There&#39;s also a high chance that the best approach would simply be refactoring that code and make it stink less."}],"tags":[],"owner":{"account_id":1281728,"reputation":73134,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683303023,"creation_date":1683245760,"answer_id":76178095,"question_id":76178070,"body_markdown":"If all you do with instance of `B` in `A`&#39;s constructor is an assignment, then you could try using `null` at instantiation and then hand it a `B` instance:\r\n\r\n```java\r\nA a = new A(null);\r\nA.B b = a.new B();\r\na.b = b;\r\n```\r\n\r\nthe above requires `a.b` to be public, or you need to add a setter. But that looks bad to me, so perhaps you should make `B` class static, and by doing so it can be instantiated independently of `A`::\r\n\r\n```java\r\npublic class A {\r\n    private B b;\r\n\r\n    public A(B b) {\r\n        this.b = b;\r\n    }\r\n\r\n    public static class B {\r\n        public B() {}\r\n    }\r\n}\r\n```\r\n\r\nand then\r\n\r\n```java\r\nA.B b = new A.B();\r\nA a = new A(b);\r\n```","title":"Outerclass with its innerclass as an argument for the outerclass constructor","body":"<p>If all you do with instance of <code>B</code> in <code>A</code>'s constructor is an assignment, then you could try using <code>null</code> at instantiation and then hand it a <code>B</code> instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>A a = new A(null);\nA.B b = a.new B();\na.b = b;\n</code></pre>\n<p>the above requires <code>a.b</code> to be public, or you need to add a setter. But that looks bad to me, so perhaps you should make <code>B</code> class static, and by doing so it can be instantiated independently of <code>A</code>::</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class A {\n    private B b;\n\n    public A(B b) {\n        this.b = b;\n    }\n\n    public static class B {\n        public B() {}\n    }\n}\n</code></pre>\n<p>and then</p>\n<pre class=\"lang-java prettyprint-override\"><code>A.B b = new A.B();\nA a = new A(b);\n</code></pre>\n"}],"owner":{"account_id":28511105,"reputation":13,"user_id":21821097,"display_name":"freeze"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76178095,"answer_count":1,"score":0,"last_activity_date":1683303023,"creation_date":1683245162,"question_id":76178070,"body_markdown":"Im wondering if it is possible to create this object based on the code below or is it a cyclic dependency which cant be solved?\r\n\r\n\r\n```java\r\npublic class A {\r\n  private B b;\r\n\r\n  public A(B b) {\r\n    this.b = b;\r\n  }\r\n\r\n  public class B {\r\n    public B() {}\r\n  }\r\n  \r\n}\r\n```\r\n\r\nI was provided with a class which looked like this and I cant find a way to initialize B or A. Its like and impossible cycle.","title":"Outerclass with its innerclass as an argument for the outerclass constructor","body":"<p>Im wondering if it is possible to create this object based on the code below or is it a cyclic dependency which cant be solved?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class A {\n  private B b;\n\n  public A(B b) {\n    this.b = b;\n  }\n\n  public class B {\n    public B() {}\n  }\n  \n}\n</code></pre>\n<p>I was provided with a class which looked like this and I cant find a way to initialize B or A. Its like and impossible cycle.</p>\n"},{"tags":["java","javassist"],"owner":{"account_id":27166,"reputation":19089,"user_id":71399,"accept_rate":65,"display_name":"pauljwilliams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683302945,"creation_date":1312305232,"question_id":6915855,"body_markdown":"I&#39;ve used Javassist to dynamically change the return type of a function call, but it&#39;s not working.\r\n\r\nI&#39;ve got a call that is defined in the source code as simply:\r\n\r\n    Boolean getResult(){return true;}\r\n\r\nBut then at run time I dynamically change it to:\r\n\r\n    String getResult(){return &quot;true&quot;}\r\n\r\nI then call it as:\r\n\r\n    Object o = myobject.getResult();\r\n\r\nAnd get a MethodNotFound exception. If I use reflection I can see my new method on the object, but the call is failing, apparently because it&#39;s somehow bound to the old return type.\r\n\r\nIf I call the new method reflectively (pseudocode):\r\n\r\n    Method m = myobject.getClass.GetDeclaredMethods().(...find method named GetResult...)\r\n\r\n    Object o = m.invoke(myObject);\r\n\r\nThen all works fine, and I can switch between manipulated and non-manipulated byte code without issue, and I can see that the type of O is either String or Boolean accordingly.\r\n\r\nAny ideas why?","title":"Utilising Javassist to provide overloading based on return type","body":"<p>I've used Javassist to dynamically change the return type of a function call, but it's not working.</p>\n<p>I've got a call that is defined in the source code as simply:</p>\n<pre><code>Boolean getResult(){return true;}\n</code></pre>\n<p>But then at run time I dynamically change it to:</p>\n<pre><code>String getResult(){return &quot;true&quot;}\n</code></pre>\n<p>I then call it as:</p>\n<pre><code>Object o = myobject.getResult();\n</code></pre>\n<p>And get a MethodNotFound exception. If I use reflection I can see my new method on the object, but the call is failing, apparently because it's somehow bound to the old return type.</p>\n<p>If I call the new method reflectively (pseudocode):</p>\n<pre><code>Method m = myobject.getClass.GetDeclaredMethods().(...find method named GetResult...)\n\nObject o = m.invoke(myObject);\n</code></pre>\n<p>Then all works fine, and I can switch between manipulated and non-manipulated byte code without issue, and I can see that the type of O is either String or Boolean accordingly.</p>\n<p>Any ideas why?</p>\n"},{"tags":["java","roles","weblogic12c"],"answers":[{"tags":[],"owner":{"account_id":21016374,"reputation":1,"user_id":15443748,"display_name":"malykony"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683302879,"creation_date":1683302879,"answer_id":76184095,"question_id":76014212,"body_markdown":"Oracle Support Document 2865542.1 (After Upgrading JDK In WCC Environment, WCC Users Lost Roles) can be found at: https://support.oracle.com/epmos/faces/DocumentDisplay?id=2865542.1","title":"Custom roles disappeared in the appliaction after java update on weblogic server","body":"<p>Oracle Support Document 2865542.1 (After Upgrading JDK In WCC Environment, WCC Users Lost Roles) can be found at: <a href=\"https://support.oracle.com/epmos/faces/DocumentDisplay?id=2865542.1\" rel=\"nofollow noreferrer\">https://support.oracle.com/epmos/faces/DocumentDisplay?id=2865542.1</a></p>\n"}],"owner":{"account_id":21016374,"reputation":1,"user_id":15443748,"display_name":"malykony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76184095,"answer_count":1,"score":0,"last_activity_date":1683302879,"creation_date":1681468669,"question_id":76014212,"body_markdown":"After updating java from version 1.8.0_301 to 1.8.0_361 on our Weblogic (12c) servers, custom roles for users on user profile page (IdcService=GET_USER_INFO) in the applications disappear. Only the basic roles stay. The custome roles and groups are still visible in Weblogic server administration console - Security Realms - myrealm. \r\nNothing other has changed.\r\nWhen downgrading java back, everything is ok again.\r\n\r\n\r\nI have no idea how to solve this so far.","title":"Custom roles disappeared in the appliaction after java update on weblogic server","body":"<p>After updating java from version 1.8.0_301 to 1.8.0_361 on our Weblogic (12c) servers, custom roles for users on user profile page (IdcService=GET_USER_INFO) in the applications disappear. Only the basic roles stay. The custome roles and groups are still visible in Weblogic server administration console - Security Realms - myrealm.\nNothing other has changed.\nWhen downgrading java back, everything is ok again.</p>\n<p>I have no idea how to solve this so far.</p>\n"},{"tags":["java","maven","nexus"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1683302512,"post_id":76183970,"comment_id":134351174,"body_markdown":"I do not quite understand what you expect from `-U` if you are not using SNAPSHOT versions? With release versions, you build a new version each time you change something so there is no need to &quot;update&quot; an existing artifact.","body":"I do not quite understand what you expect from <code>-U</code> if you are not using SNAPSHOT versions? With release versions, you build a new version each time you change something so there is no need to &quot;update&quot; an existing artifact."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1683302820,"post_id":76183970,"comment_id":134351240,"body_markdown":"Well, at least the top-level doc for &quot;-U&quot; is a little ambiguous. It says &quot; -U,--update-snapshots                  Forces a check for missing\n                                        releases and updated snapshots on\n                                        remote repositories&quot;. So, it refers to snapshots, but also releases. In any case, what I&#39;m seeing is that the artifact isn&#39;t being updated in the local maven repo.","body":"Well, at least the top-level doc for &quot;-U&quot; is a little ambiguous. It says &quot; -U,--update-snapshots                  Forces a check for missing                                         releases and updated snapshots on                                         remote repositories&quot;. So, it refers to snapshots, but also releases. In any case, what I&#39;m seeing is that the artifact isn&#39;t being updated in the local maven repo."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1683302953,"post_id":76183970,"comment_id":134351261,"body_markdown":"I do not quite get what you are doing. Are you building a release version of a parent POM again, i.e. if there is a version 1.1.0 of the parent POM, you redeploy a different parent POM with the same version 1.1.0 instead of using the next version 1.2.0 or 1.1.1? Replacing a parent POM of version 1.1.0 with a different parent POM of version 1.1.0 is undefined behaviour and will cause all kinds of problems.","body":"I do not quite get what you are doing. Are you building a release version of a parent POM again, i.e. if there is a version 1.1.0 of the parent POM, you redeploy a different parent POM with the same version 1.1.0 instead of using the next version 1.2.0 or 1.1.1? Replacing a parent POM of version 1.1.0 with a different parent POM of version 1.1.0 is undefined behaviour and will cause all kinds of problems."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1683310328,"post_id":76183970,"comment_id":134352794,"body_markdown":"`mvn -U` does following: downloads snapshots, downloads latest releases **if version ranges are in use**, retries related downloads failed previously (i.e. resets `*.lastUpdated`)","body":"<code>mvn -U</code> does following: downloads snapshots, downloads latest releases <b>if version ranges are in use</b>, retries related downloads failed previously (i.e. resets <code>*.lastUpdated</code>)"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1683314112,"post_id":76183970,"comment_id":134353563,"body_markdown":"Have you defined the verison of the surefire-plugin in your pom file or not? Or in your parent pom? Ah btw. have you change the version of your parent pom in your current project? Can you show some examples?","body":"Have you defined the verison of the surefire-plugin in your pom file or not? Or in your parent pom? Ah btw. have you change the version of your parent pom in your current project? Can you show some examples?"},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1683317100,"post_id":76183970,"comment_id":134354121,"body_markdown":"I am using version ranges for some things, but not for the parent pom reference, as you can&#39;t do that there. The previous download likely didn&#39;t fail. I have defined the surefire version in the parent pom, and I have not changed the version of the parent pom.","body":"I am using version ranges for some things, but not for the parent pom reference, as you can&#39;t do that there. The previous download likely didn&#39;t fail. I have defined the surefire version in the parent pom, and I have not changed the version of the parent pom."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1683317993,"post_id":76183970,"comment_id":134354296,"body_markdown":"First you are wrong. You can define a version range for the parent version (I recommend to use most recent versions of Maven 3.8/3.9.X and recommend not to use version ranges at all) if you have defined the version of maven-surefire-plugin in your parent and use the same version of your parent in your project nothing will change the used version of maven-surefire-plugin. in your current project unless you change the version of your parent to use the more recent version of your parent which has defined the different version of maven-surefire-plugin...","body":"First you are wrong. You can define a version range for the parent version (I recommend to use most recent versions of Maven 3.8/3.9.X and recommend not to use version ranges at all) if you have defined the version of maven-surefire-plugin in your parent and use the same version of your parent in your project nothing will change the used version of maven-surefire-plugin. in your current project unless you change the version of your parent to use the more recent version of your parent which has defined the different version of maven-surefire-plugin..."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":1,"creation_date":1683322182,"post_id":76183970,"comment_id":134354869,"body_markdown":"Everything is working now, I understand what was happening here now. I had the release artifact purged from the build nodes and reran the build, and now the child build is getting the correct surefire version.","body":"Everything is working now, I understand what was happening here now. I had the release artifact purged from the build nodes and reran the build, and now the child build is getting the correct surefire version."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1683364434,"post_id":76183970,"comment_id":134358159,"body_markdown":"Hm.. that sounds strange... if the release artifact is already there it means it had been downloaded already. the question is why is it not taken into account from your own project? I would do further investigation what the real reason wa...","body":"Hm.. that sounds strange... if the release artifact is already there it means it had been downloaded already. the question is why is it not taken into account from your own project? I would do further investigation what the real reason wa..."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1683489143,"post_id":76183970,"comment_id":134371193,"body_markdown":"&quot;why is it not taken into account from your own project&quot;? I don&#39;t know what that means.","body":"&quot;why is it not taken into account from your own project&quot;? I don&#39;t know what that means."}],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683301988,"creation_date":1683301988,"question_id":76183970,"body_markdown":"Using Maven 3.8.x (not sure of the exact version).\r\n\r\nI support the platform side of a large set of services that use a parent pom with an intranet artifact repository (nexus).  I often update artifacts in nexus and see them downloaded with &quot;mvn -U&quot; on the desktop and our CI servers.\r\n\r\nYesterday I had a situation where I had to update the latest release version (not snapshot) of our parent pom.  One of the changes was changing the version of Surefire.  I deployed that version to nexus and inspected the artifact in the index to verify the change was there. I verified with a local build that it&#39;s getting the new version. I then ran a CI build, but when Surefire ran, it was still using the old version of Surefire.  I tried this several times, but it&#39;s not getting the new version.\r\n\r\nIt almost seems like &quot;mvn -U&quot; doesn&#39;t do the same thing with parent poms that it does with other artifacts, but I can&#39;t find any documentation to that effect.\r\n\r\nI&#39;m going to proceed to purge the artifact from the local maven repos on the build nodes, but a different team has to do that.\r\n\r\nIs there any reason to expect this behavior from &quot;mvn -U&quot;?  Would adding &quot;-X&quot; tell me anything useful?","title":"mvn -U doesn&#39;t appear to refresh parent poms","body":"<p>Using Maven 3.8.x (not sure of the exact version).</p>\n<p>I support the platform side of a large set of services that use a parent pom with an intranet artifact repository (nexus).  I often update artifacts in nexus and see them downloaded with &quot;mvn -U&quot; on the desktop and our CI servers.</p>\n<p>Yesterday I had a situation where I had to update the latest release version (not snapshot) of our parent pom.  One of the changes was changing the version of Surefire.  I deployed that version to nexus and inspected the artifact in the index to verify the change was there. I verified with a local build that it's getting the new version. I then ran a CI build, but when Surefire ran, it was still using the old version of Surefire.  I tried this several times, but it's not getting the new version.</p>\n<p>It almost seems like &quot;mvn -U&quot; doesn't do the same thing with parent poms that it does with other artifacts, but I can't find any documentation to that effect.</p>\n<p>I'm going to proceed to purge the artifact from the local maven repos on the build nodes, but a different team has to do that.</p>\n<p>Is there any reason to expect this behavior from &quot;mvn -U&quot;?  Would adding &quot;-X&quot; tell me anything useful?</p>\n"},{"tags":["java","android","service","leakcanary"],"owner":{"account_id":9086240,"reputation":224,"user_id":6764107,"display_name":"Chester Fung"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683301524,"creation_date":1683301191,"question_id":76183862,"body_markdown":"My application is Keyboard IME Service, with some UI for config and testing.\r\n\r\n`D/LeakCanary: LeakCanary is currently disabled: Waiting for debugger to detach.` comes first.\r\nThen \r\n\r\n`D/LeakCanary: Watching instance of .... ` (UI&#39;s Activity) comes second as I also have an activity for UI testing.\r\n\r\n\r\nHowever, when I open the keyboard, there is no watching message.\r\n\r\n\r\nHow to &quot;install&quot; it into the Service?\r\n\r\nA log message shall be shown for watching my Service","title":"How to use Leakcanary for Service (like InputMethodService)","body":"<p>My application is Keyboard IME Service, with some UI for config and testing.</p>\n<p><code>D/LeakCanary: LeakCanary is currently disabled: Waiting for debugger to detach.</code> comes first.\nThen</p>\n<p><code>D/LeakCanary: Watching instance of .... </code> (UI's Activity) comes second as I also have an activity for UI testing.</p>\n<p>However, when I open the keyboard, there is no watching message.</p>\n<p>How to &quot;install&quot; it into the Service?</p>\n<p>A log message shall be shown for watching my Service</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","hibernate-envers","audit-logging"],"owner":{"account_id":6512038,"reputation":41,"user_id":5038946,"accept_rate":0,"display_name":"Deepa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683301311,"creation_date":1683301311,"question_id":76183874,"body_markdown":"I have an orders table and is being audited with hibernate envers @Audited.\r\nI need to show user the list of orders along with the history of each order(add, modify, process).\r\n\r\nHow can I achieve this with hibernate envers audit? \r\nHow to fetch all revisions for multiple entities in one go?\r\n\r\nI know how to get the revisions of one entity(using forRevisionsOfEntity()). \r\n\r\nExpected Sample response like \r\n\r\n| Order ID | Status     | Rev |\r\n| -------- | -----------|-----|\r\n| O1       | Completed  | 3   |\r\n| O1       | Processed  | 2   |\r\n| O1       | Created    | 1   |\r\n| O2       | In progress| 2   |\r\n| O2       | Created    | 1   |\r\n","title":"Is it possible to get all revisions of multiple entities in hibernate enver?","body":"<p>I have an orders table and is being audited with hibernate envers @Audited.\nI need to show user the list of orders along with the history of each order(add, modify, process).</p>\n<p>How can I achieve this with hibernate envers audit?\nHow to fetch all revisions for multiple entities in one go?</p>\n<p>I know how to get the revisions of one entity(using forRevisionsOfEntity()).</p>\n<p>Expected Sample response like</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Order ID</th>\n<th>Status</th>\n<th>Rev</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>O1</td>\n<td>Completed</td>\n<td>3</td>\n</tr>\n<tr>\n<td>O1</td>\n<td>Processed</td>\n<td>2</td>\n</tr>\n<tr>\n<td>O1</td>\n<td>Created</td>\n<td>1</td>\n</tr>\n<tr>\n<td>O2</td>\n<td>In progress</td>\n<td>2</td>\n</tr>\n<tr>\n<td>O2</td>\n<td>Created</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","sbt","playframework-2.1","nohup"],"answers":[{"comments":[{"owner":{"account_id":1288640,"reputation":8167,"user_id":1241193,"display_name":"Bob Dalgleish"},"score":0,"creation_date":1398984575,"post_id":23417371,"comment_id":35886384,"body_markdown":"It does support multiple commands, but I believe the syntax being used doesn&#39;t do what he things it does.","body":"It does support multiple commands, but I believe the syntax being used doesn&#39;t do what he things it does."},{"owner":{"account_id":3211854,"reputation":123,"user_id":2711687,"display_name":"user2711687"},"score":0,"creation_date":1399040286,"post_id":23417371,"comment_id":35908610,"body_markdown":"Thanks for the responses. As Bob states it is definitely possible to run multiple commands by prefixing with semicolons. http://www.scala-sbt.org/0.12.4/docs/Howto/runningcommands.html\n\nAlso, those commands do work as expected if running in the interactive shell. The change to stdin from the background and nohup is certainly a plausible explanation for the loop&#39;s confusion.","body":"Thanks for the responses. As Bob states it is definitely possible to run multiple commands by prefixing with semicolons. <a href=\"http://www.scala-sbt.org/0.12.4/docs/Howto/runningcommands.html\" rel=\"nofollow noreferrer\">scala-sbt.org/0.12.4/docs/Howto/runningcommands.html</a>  Also, those commands do work as expected if running in the interactive shell. The change to stdin from the background and nohup is certainly a plausible explanation for the loop&#39;s confusion."},{"owner":{"account_id":3211854,"reputation":123,"user_id":2711687,"display_name":"user2711687"},"score":0,"creation_date":1399040637,"post_id":23417371,"comment_id":35908868,"body_markdown":"One other thing to note, even running this command as is does what I want it to do. I use rsync to create copies of my git repository as well as update changed files pushed to a git remote. This way I can have many compilers running against the same synced source files with unique target directories per compiler. I get all of the hot recompile features I desire from this setup, it just happens a lot slower on account of the unhappy thread.","body":"One other thing to note, even running this command as is does what I want it to do. I use rsync to create copies of my git repository as well as update changed files pushed to a git remote. This way I can have many compilers running against the same synced source files with unique target directories per compiler. I get all of the hot recompile features I desire from this setup, it just happens a lot slower on account of the unhappy thread."},{"owner":{"account_id":263634,"reputation":615,"user_id":549332,"display_name":"Totoro"},"score":0,"creation_date":1399052590,"post_id":23417371,"comment_id":35915548,"body_markdown":"Its obviously an IO spin and more so on a terminal from the stack.   Gotta be the nohup.   sbt must be trying to read something from the terminal.   Try redirecting stdin around /dev/null,zero,console and see if the behavior changes.","body":"Its obviously an IO spin and more so on a terminal from the stack.   Gotta be the nohup.   sbt must be trying to read something from the terminal.   Try redirecting stdin around /dev/null,zero,console and see if the behavior changes."},{"owner":{"account_id":3211854,"reputation":123,"user_id":2711687,"display_name":"user2711687"},"score":0,"creation_date":1399057713,"post_id":23417371,"comment_id":35918087,"body_markdown":"I did try redirecting stdin, but to no avail. @Totoro is right that the problem is spinning on IO reading, so I will mark this answer correct. The underlying problem seems to be the jline library the play framework sbt plugin is using to read commands in interactive mode.\n\nI&#39;ve found a hack that partially solves my problem, but am continuing to look for a better way. For anyone who wants to follow this in greater detail, I have a thread going on the sbt-dev forum.\n\nhttps://groups.google.com/forum/#!topic/sbt-dev/IFk61Uj778Y","body":"I did try redirecting stdin, but to no avail. @Totoro is right that the problem is spinning on IO reading, so I will mark this answer correct. The underlying problem seems to be the jline library the play framework sbt plugin is using to read commands in interactive mode.  I&#39;ve found a hack that partially solves my problem, but am continuing to look for a better way. For anyone who wants to follow this in greater detail, I have a thread going on the sbt-dev forum.  <a href=\"https://groups.google.com/forum/#!topic/sbt-dev/IFk61Uj778Y\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!topic/sbt-dev/IFk61Uj778Y</a>"}],"tags":[],"owner":{"account_id":263634,"reputation":615,"user_id":549332,"display_name":"Totoro"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1398981556,"creation_date":1398981556,"answer_id":23417371,"question_id":23417222,"body_markdown":"That stack trace leads me to believe you are spinning on the console/tty trying to read input.  Or perhaps from a file.    My recollection of Sbt is that it doesn&#39;t support multiple commands at once from the command line (compile and run).   You have run all these as separate commands and it works?  How about putting into a script and exec&#39;ing that.","title":"high cpu consumption by sbt main thread when running a project with nohup","body":"<p>That stack trace leads me to believe you are spinning on the console/tty trying to read input.  Or perhaps from a file.    My recollection of Sbt is that it doesn't support multiple commands at once from the command line (compile and run).   You have run all these as separate commands and it works?  How about putting into a script and exec'ing that.</p>\n"},{"tags":[],"owner":{"account_id":4774,"reputation":26513,"user_id":7345,"accept_rate":81,"display_name":"mindas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683301023,"creation_date":1683301023,"answer_id":76183842,"question_id":23417222,"body_markdown":"This has haunted us as well, albeit with a much newer version of sbt/Playframework. \r\n\r\nWe were experiencing 100% CPU load on one of Playframework threads after upgrading to Java 11 &amp; newest Play (version 2.8.17 running Java 11.0.17). sbt version is 1.6.2. We are using [Tilt][1] to keep all the configs in one place as well as for general convenience. One thread with jline/sbt stack trace elements was consuming 100-130% of CPU on Linux all the time while there were no HTTP requests nor any background jobs.\r\n\r\nThe secret sauce was to add `-Dsbt.ci=true` to the `sbt run ...` command line (the default value for `sbt.ci` is `false`).\r\n\r\n  [1]: https://tilt.dev/","title":"high cpu consumption by sbt main thread when running a project with nohup","body":"<p>This has haunted us as well, albeit with a much newer version of sbt/Playframework.</p>\n<p>We were experiencing 100% CPU load on one of Playframework threads after upgrading to Java 11 &amp; newest Play (version 2.8.17 running Java 11.0.17). sbt version is 1.6.2. We are using <a href=\"https://tilt.dev/\" rel=\"nofollow noreferrer\">Tilt</a> to keep all the configs in one place as well as for general convenience. One thread with jline/sbt stack trace elements was consuming 100-130% of CPU on Linux all the time while there were no HTTP requests nor any background jobs.</p>\n<p>The secret sauce was to add <code>-Dsbt.ci=true</code> to the <code>sbt run ...</code> command line (the default value for <code>sbt.ci</code> is <code>false</code>).</p>\n"}],"owner":{"account_id":3211854,"reputation":123,"user_id":2711687,"display_name":"user2711687"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":983,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":23417371,"answer_count":2,"score":2,"last_activity_date":1683301023,"creation_date":1398980830,"question_id":23417222,"body_markdown":"To get right to it, I am trying to build an autonomous environment where I can provide the benefits of sbt&#39;s auto-reloading without needing to actually run interactively. At this point I have a setup that does exactly what I want with the exception of the sbt main thread going crazy and eating 100% cpu. I am unsure of why this is the case, but because this is an unusual way of doing things I wanted to discuss it here before filing a bug.\r\n\r\nFirst, some system information.\r\n\r\n- CentOS release 6.5 (Final)\r\n\r\n- java version &quot;1.7.0_51&quot;\r\nJava(TM) SE Runtime Environment (build 1.7.0_51-b13)\r\nJava HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)\r\n\r\n- sbt (launched with 0.13.0, but the project then runs under 0.12.4)\r\n\r\nI am orchestrating this system using chef, the script that kicks everything off will be run as root and here is what the constructed command for a particular project looks like. If this command is decomposed and run as hubuser without background and nohup, i.e. the normal way as an interactive shell, everything works exactly as would be expected.\r\n\r\n    su - hubuser -c &quot;cd /home/hubuser/projects/cruise/tsttravel_synced; nohup java -Xms512M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=1024M -Xmx4096M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/hubuser/projects/cruise -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9054 -Dnet.tstllc.rmi.agent.port=9104 -javaagent:/opt/tst/jmx/jmx-agent.jar -jar /home/hubuser/projects/sbt-launch.jar &#39;project cruise-web&#39; &#39;;compile;run -Dhttp.port=9004 -Dap.credentials.file=/home/hubuser/projects/credentials.cfg -Dap.config.file=/home/hubuser/projects/app.cfg -Dlogger.file=/home/hubuser/projects/cruise/cruise-logback.xml&#39; &amp;&gt;&gt; /home/hubuser/projects/cruise/console.log &amp;&quot;\r\n\r\nHowever, run this way the sbt main thread goes crazy. Here&#39;s how I came to that conclusion. I have not yet dug into the sbt codebase, but my blind stab in the dark is that screwing with signals and the shell like this somehow causes bizarre behavior. Any sbt devs have a better educated guess?\r\n\r\n1) last lines in the console.log, pretty standard stuff.\r\n\r\n--- (Running the application from SBT, auto-reloading is enabled) ---\r\n\r\n \r\n(Server started, use Ctrl+D to stop and go back to the console...)\r\n\r\n2) top showing processes, nothing is happening but the cpu load never goes away.\r\n\r\n**PID** USER      PR  NI  VIRT  RES  SHR S **%CPU** %MEM    TIME+  **COMMAND**\r\n\r\n**14037** hubuser   20   0 8540m 1.6g  25m S **100.0** 10.5   3:39.94 **java**\r\n\r\n3) top showing native threads from the same run.\r\n\r\n  **PID** USER      PR  NI  VIRT  RES  SHR S **%CPU** %MEM    TIME+  **COMMAND**\r\n\r\n**14044** hubuser   20   0 8540m 1.6g  25m R **100.0** 10.5  15:14.45 **java**\r\n\r\n4) finally, the salient part of the thread dump. 0x36dc = 14044\r\n\r\n    kill -3 14037\r\n\r\n    &quot;main&quot; prio=10 tid=0x00007fdbb400a800 nid=0x36dc runnable [0x00007fdbbaf76000]\r\n       java.lang.Thread.State: RUNNABLE\r\n    \tat java.io.FileInputStream.read0(Native Method)\r\n    \tat java.io.FileInputStream.read(FileInputStream.java:210)\r\n    \tat jline.Terminal.readCharacter(Terminal.java:99)\r\n    \tat jline.UnixTerminal.readVirtualKey(UnixTerminal.java:122)\r\n    \tat jline.ConsoleReader.readVirtualKey(ConsoleReader.java:1606)\r\n    \tat play.PlayConsoleInteractionMode$.waitEOF$1(PlayInteractionMode.scala:29)\r\n    \tat play.PlayConsoleInteractionMode$$anonfun$waitForKey$1.apply$mcV$sp(PlayInteractionMode.scala:36)\r\n    \tat play.PlayConsoleInteractionMode$.doWithoutEcho(PlayInteractionMode.scala:41)\r\n    \tat play.PlayConsoleInteractionMode$.waitForKey(PlayInteractionMode.scala:36)\r\n    \tat play.PlayConsoleInteractionMode$.waitForCancel(PlayInteractionMode.scala:45)\r\n    \tat sbt.PlayCommands$$anonfun$createPlayRunCommand$1$$anonfun$57.apply(PlayCommands.scala:671)\r\n    \tat sbt.PlayCommands$$anonfun$createPlayRunCommand$1$$anonfun$57.apply(PlayCommands.scala:523)\r\n    \tat scala.Either$RightProjection.map(Either.scala:533)\r\n    \tat sbt.PlayCommands$$anonfun$createPlayRunCommand$1.apply(PlayCommands.scala:523)\r\n    \tat sbt.PlayCommands$$anonfun$createPlayRunCommand$1.apply(PlayCommands.scala:497)\r\n    \tat sbt.Command$$anonfun$sbt$Command$$apply1$1$$anonfun$apply$6.apply(Command.scala:72)\r\n    \tat sbt.Command$.process(Command.scala:90)\r\n    \tat sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)\r\n    \tat sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)\r\n    \tat sbt.State$$anon$2.process(State.scala:171)\r\n    \tat sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)\r\n    \tat sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)\r\n    \tat sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)\r\n    \tat sbt.MainLoop$.next(MainLoop.scala:71)\r\n    \tat sbt.MainLoop$.run(MainLoop.scala:64)\r\n    \tat sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:53)\r\n    \tat sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:50)\r\n    \tat sbt.Using.apply(Using.scala:25)\r\n    \tat sbt.MainLoop$.runWithNewLog(MainLoop.scala:50)\r\n    \tat sbt.MainLoop$.runAndClearLast(MainLoop.scala:33)\r\n    \tat sbt.MainLoop$.runLoggedLoop(MainLoop.scala:17)\r\n    \tat sbt.MainLoop$.runLogged(MainLoop.scala:13)\r\n    \tat sbt.xMain.run(Main.scala:26)\r\n    \tat xsbt.boot.Launch$$anonfun$run$1.apply(Launch.scala:57)\r\n    \tat xsbt.boot.Launch$.withContextLoader(Launch.scala:77)\r\n    \tat xsbt.boot.Launch$.run(Launch.scala:57)\r\n    \tat xsbt.boot.Launch$$anonfun$explicit$1.apply(Launch.scala:45)\r\n    \tat xsbt.boot.Launch$.launch(Launch.scala:65)\r\n    \tat xsbt.boot.Launch$.apply(Launch.scala:16)\r\n    \tat xsbt.boot.Boot$.runImpl(Boot.scala:32)\r\n    \tat xsbt.boot.Boot$.main(Boot.scala:21)\r\n    \tat xsbt.boot.Boot.main(Boot.scala)","title":"high cpu consumption by sbt main thread when running a project with nohup","body":"<p>To get right to it, I am trying to build an autonomous environment where I can provide the benefits of sbt's auto-reloading without needing to actually run interactively. At this point I have a setup that does exactly what I want with the exception of the sbt main thread going crazy and eating 100% cpu. I am unsure of why this is the case, but because this is an unusual way of doing things I wanted to discuss it here before filing a bug.</p>\n\n<p>First, some system information.</p>\n\n<ul>\n<li><p>CentOS release 6.5 (Final)</p></li>\n<li><p>java version \"1.7.0_51\"\nJava(TM) SE Runtime Environment (build 1.7.0_51-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)</p></li>\n<li><p>sbt (launched with 0.13.0, but the project then runs under 0.12.4)</p></li>\n</ul>\n\n<p>I am orchestrating this system using chef, the script that kicks everything off will be run as root and here is what the constructed command for a particular project looks like. If this command is decomposed and run as hubuser without background and nohup, i.e. the normal way as an interactive shell, everything works exactly as would be expected.</p>\n\n<pre><code>su - hubuser -c \"cd /home/hubuser/projects/cruise/tsttravel_synced; nohup java -Xms512M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=1024M -Xmx4096M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/hubuser/projects/cruise -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9054 -Dnet.tstllc.rmi.agent.port=9104 -javaagent:/opt/tst/jmx/jmx-agent.jar -jar /home/hubuser/projects/sbt-launch.jar 'project cruise-web' ';compile;run -Dhttp.port=9004 -Dap.credentials.file=/home/hubuser/projects/credentials.cfg -Dap.config.file=/home/hubuser/projects/app.cfg -Dlogger.file=/home/hubuser/projects/cruise/cruise-logback.xml' &amp;&gt;&gt; /home/hubuser/projects/cruise/console.log &amp;\"\n</code></pre>\n\n<p>However, run this way the sbt main thread goes crazy. Here's how I came to that conclusion. I have not yet dug into the sbt codebase, but my blind stab in the dark is that screwing with signals and the shell like this somehow causes bizarre behavior. Any sbt devs have a better educated guess?</p>\n\n<p>1) last lines in the console.log, pretty standard stuff.</p>\n\n<p>--- (Running the application from SBT, auto-reloading is enabled) ---</p>\n\n<p>(Server started, use Ctrl+D to stop and go back to the console...)</p>\n\n<p>2) top showing processes, nothing is happening but the cpu load never goes away.</p>\n\n<p><strong>PID</strong> USER      PR  NI  VIRT  RES  SHR S <strong>%CPU</strong> %MEM    TIME+  <strong>COMMAND</strong></p>\n\n<p><strong>14037</strong> hubuser   20   0 8540m 1.6g  25m S <strong>100.0</strong> 10.5   3:39.94 <strong>java</strong></p>\n\n<p>3) top showing native threads from the same run.</p>\n\n<p><strong>PID</strong> USER      PR  NI  VIRT  RES  SHR S <strong>%CPU</strong> %MEM    TIME+  <strong>COMMAND</strong></p>\n\n<p><strong>14044</strong> hubuser   20   0 8540m 1.6g  25m R <strong>100.0</strong> 10.5  15:14.45 <strong>java</strong></p>\n\n<p>4) finally, the salient part of the thread dump. 0x36dc = 14044</p>\n\n<pre><code>kill -3 14037\n\n\"main\" prio=10 tid=0x00007fdbb400a800 nid=0x36dc runnable [0x00007fdbbaf76000]\n   java.lang.Thread.State: RUNNABLE\n    at java.io.FileInputStream.read0(Native Method)\n    at java.io.FileInputStream.read(FileInputStream.java:210)\n    at jline.Terminal.readCharacter(Terminal.java:99)\n    at jline.UnixTerminal.readVirtualKey(UnixTerminal.java:122)\n    at jline.ConsoleReader.readVirtualKey(ConsoleReader.java:1606)\n    at play.PlayConsoleInteractionMode$.waitEOF$1(PlayInteractionMode.scala:29)\n    at play.PlayConsoleInteractionMode$$anonfun$waitForKey$1.apply$mcV$sp(PlayInteractionMode.scala:36)\n    at play.PlayConsoleInteractionMode$.doWithoutEcho(PlayInteractionMode.scala:41)\n    at play.PlayConsoleInteractionMode$.waitForKey(PlayInteractionMode.scala:36)\n    at play.PlayConsoleInteractionMode$.waitForCancel(PlayInteractionMode.scala:45)\n    at sbt.PlayCommands$$anonfun$createPlayRunCommand$1$$anonfun$57.apply(PlayCommands.scala:671)\n    at sbt.PlayCommands$$anonfun$createPlayRunCommand$1$$anonfun$57.apply(PlayCommands.scala:523)\n    at scala.Either$RightProjection.map(Either.scala:533)\n    at sbt.PlayCommands$$anonfun$createPlayRunCommand$1.apply(PlayCommands.scala:523)\n    at sbt.PlayCommands$$anonfun$createPlayRunCommand$1.apply(PlayCommands.scala:497)\n    at sbt.Command$$anonfun$sbt$Command$$apply1$1$$anonfun$apply$6.apply(Command.scala:72)\n    at sbt.Command$.process(Command.scala:90)\n    at sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)\n    at sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)\n    at sbt.State$$anon$2.process(State.scala:171)\n    at sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)\n    at sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)\n    at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)\n    at sbt.MainLoop$.next(MainLoop.scala:71)\n    at sbt.MainLoop$.run(MainLoop.scala:64)\n    at sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:53)\n    at sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:50)\n    at sbt.Using.apply(Using.scala:25)\n    at sbt.MainLoop$.runWithNewLog(MainLoop.scala:50)\n    at sbt.MainLoop$.runAndClearLast(MainLoop.scala:33)\n    at sbt.MainLoop$.runLoggedLoop(MainLoop.scala:17)\n    at sbt.MainLoop$.runLogged(MainLoop.scala:13)\n    at sbt.xMain.run(Main.scala:26)\n    at xsbt.boot.Launch$$anonfun$run$1.apply(Launch.scala:57)\n    at xsbt.boot.Launch$.withContextLoader(Launch.scala:77)\n    at xsbt.boot.Launch$.run(Launch.scala:57)\n    at xsbt.boot.Launch$$anonfun$explicit$1.apply(Launch.scala:45)\n    at xsbt.boot.Launch$.launch(Launch.scala:65)\n    at xsbt.boot.Launch$.apply(Launch.scala:16)\n    at xsbt.boot.Boot$.runImpl(Boot.scala:32)\n    at xsbt.boot.Boot$.main(Boot.scala:21)\n    at xsbt.boot.Boot.main(Boot.scala)\n</code></pre>\n"},{"tags":["java","record","z3","type-parameter"],"answers":[{"tags":[],"owner":{"account_id":899912,"reputation":28535,"user_id":936310,"accept_rate":100,"display_name":"alias"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683300370,"creation_date":1683300370,"answer_id":76183759,"question_id":76183642,"body_markdown":"z3 API&#39;s (whether it&#39;s C/C++/Java/Python) don&#39;t allow for creation of parameterized types.\r\n\r\nNote that parameterized-types are essentially a nicety in SMTLib: Essentially, each instantiation with different sorts will be a separate type of its own, with nothing to do with each other. So, the idea is to do this on your own: Write a function that takes the relevant sorts, and creates the corresponding &quot;monomorphized&quot; type on the fly. You&#39;ll have to change the accessor names slightly each time to avoid clashes, or you can add enough type-annotations to let the solver figure out the relevant types. (I&#39;d go with the former as it is simpler, but latter is definitely possible too.)","title":"How to declare datatypes with type parameters in Z3 Java API?","body":"<p>z3 API's (whether it's C/C++/Java/Python) don't allow for creation of parameterized types.</p>\n<p>Note that parameterized-types are essentially a nicety in SMTLib: Essentially, each instantiation with different sorts will be a separate type of its own, with nothing to do with each other. So, the idea is to do this on your own: Write a function that takes the relevant sorts, and creates the corresponding &quot;monomorphized&quot; type on the fly. You'll have to change the accessor names slightly each time to avoid clashes, or you can add enough type-annotations to let the solver figure out the relevant types. (I'd go with the former as it is simpler, but latter is definitely possible too.)</p>\n"}],"owner":{"account_id":22425986,"reputation":23,"user_id":16632588,"display_name":"mkoe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76183759,"answer_count":1,"score":2,"last_activity_date":1683300370,"creation_date":1683299535,"question_id":76183642,"body_markdown":"With Z3 it is possible to declare custom datatypes (i.e., records) that take type parameters. For example, a `Pair` that takes the types `T1` and `T2` for its first and second element respectively, is declared as follows (taken from the [Z3 Guide](https://microsoft.github.io/z3guide/docs/theories/Datatypes/)):\r\n\r\n```\r\n(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))\r\n```\r\n\r\nThis type declaration can then be used to create pairs with different element types. For example, the constants `p1` and `p2` are both pairs with different element types (`Int String` and `Bool Int` respectively):\r\n\r\n```\r\n(declare-const p1 (Pair Int String))\r\n(declare-const p2 (Pair Bool Int))\r\n```\r\n\r\nI want to declare such a parametrized datatype using Z3&#39;s [Java API](https://github.com/Z3Prover/z3/blob/master/examples/java/JavaExample.java). However, the datatype declarations there seem to not have a feature to add type parameters to datatype declarations.\r\n\r\nThe Java API of Z3 does provide a method `mkDatatypeSort` in its `Context` class to declare a new datatype in Z3 ([Link](https://z3prover.github.io/api/html/classcom_1_1microsoft_1_1z3_1_1_context.html#ae53d8b6d95db6cecd53e9fe25deefb70)). However, this method does not take any arguments for type parameters. Also the constructors (taken as second argument of `mkDatatypeSort`) do not allow to define type parameters.\r\n\r\nI expected that it is possible to declare datatypes with type parameters in Z3&#39;s Java API, but I am not able to do so.  Am I missing something or does this feature just not exist in the Java API?\r\n\r\nIs it possible to declare such datatypes with the Java API?","title":"How to declare datatypes with type parameters in Z3 Java API?","body":"<p>With Z3 it is possible to declare custom datatypes (i.e., records) that take type parameters. For example, a <code>Pair</code> that takes the types <code>T1</code> and <code>T2</code> for its first and second element respectively, is declared as follows (taken from the <a href=\"https://microsoft.github.io/z3guide/docs/theories/Datatypes/\" rel=\"nofollow noreferrer\">Z3 Guide</a>):</p>\n<pre><code>(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))\n</code></pre>\n<p>This type declaration can then be used to create pairs with different element types. For example, the constants <code>p1</code> and <code>p2</code> are both pairs with different element types (<code>Int String</code> and <code>Bool Int</code> respectively):</p>\n<pre><code>(declare-const p1 (Pair Int String))\n(declare-const p2 (Pair Bool Int))\n</code></pre>\n<p>I want to declare such a parametrized datatype using Z3's <a href=\"https://github.com/Z3Prover/z3/blob/master/examples/java/JavaExample.java\" rel=\"nofollow noreferrer\">Java API</a>. However, the datatype declarations there seem to not have a feature to add type parameters to datatype declarations.</p>\n<p>The Java API of Z3 does provide a method <code>mkDatatypeSort</code> in its <code>Context</code> class to declare a new datatype in Z3 (<a href=\"https://z3prover.github.io/api/html/classcom_1_1microsoft_1_1z3_1_1_context.html#ae53d8b6d95db6cecd53e9fe25deefb70\" rel=\"nofollow noreferrer\">Link</a>). However, this method does not take any arguments for type parameters. Also the constructors (taken as second argument of <code>mkDatatypeSort</code>) do not allow to define type parameters.</p>\n<p>I expected that it is possible to declare datatypes with type parameters in Z3's Java API, but I am not able to do so.  Am I missing something or does this feature just not exist in the Java API?</p>\n<p>Is it possible to declare such datatypes with the Java API?</p>\n"},{"tags":["java","json","jackson","gson","jackson-databind"],"comments":[{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1683300217,"post_id":76183651,"comment_id":134350680,"body_markdown":"Will you please add to your code example? I get the general idea, but I cannot copy/paste it and run it myself in its current state. Please add enough to your code so I can do that.","body":"Will you please add to your code example? I get the general idea, but I cannot copy/paste it and run it myself in its current state. Please add enough to your code so I can do that."},{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1683300312,"post_id":76183651,"comment_id":134350702,"body_markdown":"you need to post a [mcve]","body":"you need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"answers":[{"tags":[],"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683300299,"creation_date":1683300299,"answer_id":76183744,"question_id":76183651,"body_markdown":"Long Answer\r\n-----------\r\nRead more about the Jackson library,\r\nit provides most functionality you will ever need\r\n(including the functionality that you have already identified).\r\nHere is a [Baeldung Jackson Article][1].\r\n\r\nShort Answer\r\n------------\r\nUse the `@JsonProperty` annotation to identify the JSON field name.\r\n\r\n\r\n[1]:https://www.baeldung.com/jackson","title":"Convert json to Class","body":"<h2>Long Answer</h2>\n<p>Read more about the Jackson library,\nit provides most functionality you will ever need\n(including the functionality that you have already identified).\nHere is a <a href=\"https://www.baeldung.com/jackson\" rel=\"nofollow noreferrer\">Baeldung Jackson Article</a>.</p>\n<h2>Short Answer</h2>\n<p>Use the <code>@JsonProperty</code> annotation to identify the JSON field name.</p>\n"}],"owner":{"account_id":7078395,"reputation":1,"user_id":5417619,"display_name":"ankit patil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1683570986,"answer_count":1,"score":-2,"last_activity_date":1683300299,"creation_date":1683299622,"question_id":76183651,"body_markdown":"I have a class with a data member defined with a @SerializedName annotation (see below).\r\n```\r\npublic static final String SERIALIZED_NAME_ENGINE_ID = &quot;engine_id&quot;;\r\n  @SerializedName(SERIALIZED_NAME_ENGINE_ID)\r\n  private String engineId;\r\n```\r\n\r\nI want to map JSON to the class.\r\nI tried using the Jackson library,\r\nbut my code gives error saying &quot;engine_id&quot; not found.\r\nIt expects &quot;engineId&quot; in the JSON instead of &quot;engine_id&quot;.\r\n\r\n```\r\nString json = &quot;{\\&quot;engine_id\\&quot;: \\&quot;Test\\&quot;}&quot;;\r\nObjectMapper mapper = new ObjectMapper();\r\nCustomClass sample = mapper.readValue(fsjson\r\n        CustomClass.class);`\r\n```\r\n\r\nIs there a way to map the SerializedName from the Json?\r\nI am open to using GSON if it has the required capability.","title":"Convert json to Class","body":"<p>I have a class with a data member defined with a @SerializedName annotation (see below).</p>\n<pre><code>public static final String SERIALIZED_NAME_ENGINE_ID = &quot;engine_id&quot;;\n  @SerializedName(SERIALIZED_NAME_ENGINE_ID)\n  private String engineId;\n</code></pre>\n<p>I want to map JSON to the class.\nI tried using the Jackson library,\nbut my code gives error saying &quot;engine_id&quot; not found.\nIt expects &quot;engineId&quot; in the JSON instead of &quot;engine_id&quot;.</p>\n<pre><code>String json = &quot;{\\&quot;engine_id\\&quot;: \\&quot;Test\\&quot;}&quot;;\nObjectMapper mapper = new ObjectMapper();\nCustomClass sample = mapper.readValue(fsjson\n        CustomClass.class);`\n</code></pre>\n<p>Is there a way to map the SerializedName from the Json?\nI am open to using GSON if it has the required capability.</p>\n"},{"tags":["java","android","pdf"],"answers":[{"comments":[{"owner":{"account_id":18471408,"reputation":5,"user_id":13456203,"display_name":"THE Anonymous"},"score":0,"creation_date":1683309365,"post_id":76183734,"comment_id":134352561,"body_markdown":"` @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (requestCode == REQUEST_CODE_PICK_PDF &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {\n            Uri uri = data.getData();\n            if (uri != null) {\n                pdfFilePath = getPathFromUri(uri);\n                openPdfFile();\n            }\n        }\n    }`","body":"` @Override     protected void onActivityResult(int requestCode, int resultCode, Intent data) {         super.onActivityResult(requestCode, resultCode, data);         if (requestCode == REQUEST_CODE_PICK_PDF &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {             Uri uri = data.getData();             if (uri != null) {                 pdfFilePath = getPathFromUri(uri);                 openPdfFile();             }         }     }`"}],"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683300241,"creation_date":1683300241,"answer_id":76183734,"question_id":76177407,"body_markdown":"Are you sure the file you are trying to open exists in the path? probably on line         \r\n\r\n&gt; InputStream inputStream = new FileInputStream(pdfFilePath);\r\n\r\nthe file named pdfFilePath does not exists.","title":"open failed: ENOENT (No such file or directory) pdf file is not opening","body":"<p>Are you sure the file you are trying to open exists in the path? probably on line</p>\n<blockquote>\n<p>InputStream inputStream = new FileInputStream(pdfFilePath);</p>\n</blockquote>\n<p>the file named pdfFilePath does not exists.</p>\n"}],"owner":{"account_id":18471408,"reputation":5,"user_id":13456203,"display_name":"THE Anonymous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683300241,"creation_date":1683234950,"question_id":76177407,"body_markdown":"i am trying to make an app which edit pdf and then save it in my phone storage  but the code i write is not working whrn am i trying to open a pdf file it shows open failed: ENOENT (No such file or directory) error \r\n\r\n\r\n \r\n**mainActivity.java**\r\n\r\n       package com.example.pdfeditor;\r\n       import android.app.Activity;\r\n       import android.content.Intent;\r\n       import android.database.Cursor;\r\n       import android.net.Uri;\r\n       import android.os.Bundle;\r\n       import android.provider.MediaStore;\r\n       import android.view.View;\r\n       import android.widget.Button;\r\n       import android.widget.Toast;\r\n\r\n       import androidx.annotation.Nullable;\r\n       import androidx.appcompat.app.AppCompatActivity;\r\n\r\n       import com.itextpdf.text.Document;\r\n       import com.itextpdf.text.DocumentException;\r\n       import com.itextpdf.text.Font;\r\n       import com.itextpdf.text.Paragraph;\r\n       import com.itextpdf.text.pdf.BaseFont;\r\n       import com.itextpdf.text.pdf.PdfWriter;\r\n\r\n       import java.io.FileInputStream;\r\n       import java.io.FileOutputStream;\r\n       import java.io.IOException;\r\n       import java.io.InputStream;\r\n      public class MainActivity extends AppCompatActivity {\r\n\r\n      private static final int REQUEST_CODE_PICK_PDF = 1;\r\n      private String pdfFilePath;\r\n\r\n     @Override\r\n     protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Button pickPdfButton = findViewById(R.id.btn);\r\n        pickPdfButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(&quot;application/pdf&quot;);\r\n                startActivityForResult(intent, REQUEST_CODE_PICK_PDF);\r\n            }\r\n        });\r\n     }\r\n\r\n     @Override\r\n     protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == REQUEST_CODE_PICK_PDF &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) \r\n       {\r\n            Uri uri = data.getData();\r\n            if (uri != null) {\r\n                pdfFilePath = getPathFromUri(uri);\r\n                openPdfFile();\r\n            }\r\n        }\r\n      }\r\n\r\n      private String getPathFromUri(Uri uri) {\r\n        String filePath;\r\n        Cursor cursor = getContentResolver().query(uri, null, null, null, null);\r\n        if (cursor == null) {\r\n            filePath = uri.getPath();\r\n        } else {\r\n            cursor.moveToFirst();\r\n            int index = cursor.getColumnIndex(MediaStore.Images.Media.DISPLAY_NAME);\r\n            filePath = cursor.getString(index);\r\n            cursor.close();\r\n         }\r\n         return filePath;\r\n     }\r\n\r\n     private void openPdfFile() {\r\n        try {\r\n            // Create input stream from file path\r\n            InputStream inputStream = new FileInputStream(pdfFilePath);\r\n\r\n            // Create a new PDF document\r\n            Document document = new Document();\r\n\r\n            // Set the output file path and create a new FileOutputStream\r\n            String outputPath = pdfFilePath.replace(&quot;.pdf&quot;, &quot;_edited.pdf&quot;);\r\n            FileOutputStream outputStream = new FileOutputStream(outputPath);\r\n\r\n            // Create a new PdfWriter instance\r\n            PdfWriter writer = PdfWriter.getInstance(document, outputStream);\r\n\r\n            // Open the document\r\n            document.open();\r\n\r\n            // Add text to document\r\n            Font font = new Font(BaseFont.createFont(&quot;assets/fonts/arial.ttf&quot;, \r\n         BaseFont.IDENTITY_H, BaseFont.EMBEDDED), 12);\r\n            Paragraph p = new Paragraph(&quot;This is a test PDF file.&quot;, font);\r\n            document.add(p);\r\n\r\n            // Close the document\r\n            document.close();\r\n\r\n            // Close the writer\r\n            writer.close();\r\n\r\n            // Show a toast message to indicate that the PDF file has been saved\r\n            Toast.makeText(this, &quot;PDF file saved at &quot; + outputPath, \r\n       Toast.LENGTH_LONG).show();\r\n\r\n        } catch (Exception e) {\r\n              e.printStackTrace();\r\n              Toast.makeText(this, &quot;Error: &quot; + e.getMessage(), Toast.LENGTH_LONG).show();\r\n           }\r\n        }\r\n    }\r\n \r\n\r\n\r\n**activity_main.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n       &lt;Button\r\n        android:id=&quot;@+id/btn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Pick PDF file&quot;\r\n        android:layout_centerInParent=&quot;true&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n\r\n**error**\r\n\r\n&gt; W/System.err: java.io.FileNotFoundException: coa 2.1.pdf: open failed:\r\n&gt; ENOENT (No such file or directory) W/System.err:     at\r\n&gt; libcore.io.IoBridge.open(IoBridge.java:574) W/System.err:     at\r\n&gt; java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:160) W/System.err:\r\n&gt; at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:115)\r\n&gt; W/System.err:     at\r\n&gt; com.example.pdfeditor.MainActivity.openPdfFile(MainActivity.java:76)\r\n&gt; W/System.err:     at\r\n&gt; com.example.pdfeditor.MainActivity.onActivityResult(MainActivity.java:54)\r\n&gt; W/System.err:     at\r\n&gt; android.app.Activity.dispatchActivityResult(Activity.java:8951)\r\n&gt; W/System.err:     at\r\n&gt; android.app.ActivityThread.deliverResults(ActivityThread.java:5987)\r\n&gt; W/System.err:     at\r\n&gt; android.app.ActivityThread.handleSendResult(ActivityThread.java:6033)\r\n&gt; W/System.err:     at\r\n&gt; android.app.servertransaction.ActivityResultItem.execute(ActivityResultItem.java:67)\r\n&gt; W/System.err:     at\r\n&gt; android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:45)\r\n&gt; W/System.err:     at\r\n&gt; android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n&gt; W/System.err:     at\r\n&gt; android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n&gt; W/System.err:     at\r\n&gt; android.app.ActivityThread$H.handleMessage(ActivityThread.java:2574)\r\n&gt; W/System.err:     at\r\n&gt; android.os.Handler.dispatchMessage(Handler.java:106) W/System.err:    \r\n&gt; at android.os.Looper.loopOnce(Looper.java:226) W/System.err:     at\r\n&gt; android.os.Looper.loop(Looper.java:313) W/System.err:     at\r\n&gt; android.app.ActivityThread.main(ActivityThread.java:8757)\r\n&gt; W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\r\n&gt; W/System.err:     at\r\n&gt; com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\r\n&gt; W/System.err:     at\r\n&gt; com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1067)\r\n&gt; W/System.err: Caused by: android.system.ErrnoException: open failed:\r\n&gt; ENOENT (No such file or directory) W/System.err:     at\r\n&gt; libcore.io.Linux.open(Native Method) W/System.err:     at\r\n&gt; libcore.io.ForwardingOs.open(ForwardingOs.java:563) W/System.err:    \r\n&gt; at libcore.io.BlockGuardOs.open(BlockGuardOs.java:274) W/System.err:  \r\n&gt; at libcore.io.ForwardingOs.open(ForwardingOs.java:563) W/System.err:  \r\n&gt; at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:8619)\r\n&gt; W/System.err:     at libcore.io.IoBridge.open(IoBridge.java:560)\r\n&gt; W/System.err: \t... 19 more V/Toast: show: caller =\r\n&gt; com.example.pdfeditor.MainActivity.openPdfFile:107 \r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: stopped(false) old = false\r\n&gt; I/MSHandlerLifeCycle: removeMultiSplitHandler: no exist.\r\n&gt; decor=DecorView@ce3e02e[MainActivity]\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: performTraversals mFirst=false\r\n&gt; windowShouldResize=false viewVisibilityChanged=true\r\n&gt; mForceNextWindowRelayout=false params=null\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: updateBlastSurfaceIfNeeded\r\n&gt; mBlastBufferQueue=null isSameSurfaceControl=false I/BLASTBufferQueue:\r\n&gt; new BLASTBufferQueue, mName= ViewRootImpl@dcac326[MainActivity]\r\n&gt; mNativeObject= 0xb400007c12641330 sc.mNativeObject= 0xb400007ba265c640\r\n&gt; caller= android.view.ViewRootImpl.updateBlastSurfaceIfNeeded:2909\r\n&gt; android.view.ViewRootImpl.relayoutWindow:9847\r\n&gt; android.view.ViewRootImpl.performTraversals:3884\r\n&gt; android.view.ViewRootImpl.doTraversal:3116\r\n&gt; android.view.ViewRootImpl$TraversalRunnable.run:10885\r\n&gt; android.view.Choreographer$CallbackRecord.run:1301\r\n&gt; android.view.Choreographer$CallbackRecord.run:1309\r\n&gt; android.view.Choreographer.doCallbacks:923\r\n&gt; android.view.Choreographer.doFrame:852\r\n&gt; android.view.Choreographer$FrameDisplayEventReceiver.run:1283 \r\n&gt; I/BLASTBufferQueue: update, w= 1080 h= 2408 mName =\r\n&gt; ViewRootImpl@dcac326[MainActivity] mNativeObject= 0xb400007c12641330\r\n&gt; sc.mNativeObject= 0xb400007ba265c640 format= -1 caller=\r\n&gt; android.graphics.BLASTBufferQueue.&lt;init&gt;:84\r\n&gt; android.view.ViewRootImpl.updateBlastSurfaceIfNeeded:2909\r\n&gt; android.view.ViewRootImpl.relayoutWindow:9847\r\n&gt; android.view.ViewRootImpl.performTraversals:3884\r\n&gt; android.view.ViewRootImpl.doTraversal:3116\r\n&gt; android.view.ViewRootImpl$TraversalRunnable.run:10885 \r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Relayout returned:\r\n&gt; old=(0,0,1080,2408) new=(0,0,1080,2408) req=(1080,2408)0 dur=12\r\n&gt; res=0x3 s={true 0xb400007ca263d4b0} ch=true seqId=0\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: mThreadedRenderer.initialize()\r\n&gt; mSurface={isValid=true 0xb400007ca263d4b0} hwInitialized=true\r\n&gt; D/OpenGLRenderer: eglCreateWindowSurface\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: reportNextDraw\r\n&gt; android.view.ViewRootImpl.performTraversals:4438\r\n&gt; android.view.ViewRootImpl.doTraversal:3116\r\n&gt; android.view.ViewRootImpl$TraversalRunnable.run:10885\r\n&gt; android.view.Choreographer$CallbackRecord.run:1301\r\n&gt; android.view.Choreographer$CallbackRecord.run:1309 \r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Setup new sync id=6\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Setting syncFrameCallback\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: registerCallbacksForSync\r\n&gt; syncBuffer=false I/ViewRootImpl@dcac326[MainActivity]: Received\r\n&gt; frameDrawingCallback syncResult=0 frameNum=1.\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Setting up sync and\r\n&gt; frameCommitCallback I/BLASTBufferQueue:\r\n&gt; [ViewRootImpl@dcac326[MainActivity]#5](f:0,a:0) onFrameAvailable the\r\n&gt; first frame is available I/ViewRootImpl@dcac326[MainActivity]:\r\n&gt; Received frameCommittedCallback lastAttemptedDrawFrameNum=1\r\n&gt; didProduceBuffer=true I/ViewRootImpl@dcac326[MainActivity]:\r\n&gt; onSyncComplete I/ViewRootImpl@dcac326[MainActivity]: setupSync seqId=0\r\n&gt; mSyncId=6 fn=1\r\n&gt; caller=android.view.ViewRootImpl$$ExternalSyntheticLambda11.accept:6\r\n&gt; android.window.SurfaceSyncer.lambda$setupSync$1$android-window-SurfaceSyncer:128\r\n&gt; android.window.SurfaceSyncer$$ExternalSyntheticLambda1.accept:8\r\n&gt; android.window.SurfaceSyncer$SyncSet.checkIfSyncIsComplete:382\r\n&gt; android.window.SurfaceSyncer$SyncSet.markSyncReady:359\r\n&gt; android.window.SurfaceSyncer.markSyncReady:151\r\n&gt; android.view.ViewRootImpl.performTraversals:4503 \r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: reportDrawFinished seqId=0\r\n&gt; mSyncId=-1 fn=1 mSurfaceChangedTransaction=0xb400007bd2631590\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: MSG_WINDOW_FOCUS_CHANGED 1 0\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]:\r\n&gt; mThreadedRenderer.initializeIfNeeded()#2 mSurface={isValid=true\r\n&gt; 0xb400007ca263d4b0} D/InputMethodManager: startInputInner - Id : 0\r\n&gt; I/InputMethodManager: startInputInner -\r\n&gt; mService.startInputOrWindowGainedFocus\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: handleAppVisibility mAppVisible\r\n&gt; = true visible = false D/OpenGLRenderer: setSurface called with nullptr D/OpenGLRenderer: setSurface() destroyed EGLSurface\r\n&gt; D/OpenGLRenderer: destroyEglSurface\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: performTraversals mFirst=false\r\n&gt; windowShouldResize=false viewVisibilityChanged=true\r\n&gt; mForceNextWindowRelayout=false params=null\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Relayout returned:\r\n&gt; old=(0,0,1080,2408) new=(0,0,1080,2408) req=(1080,2408)8 dur=16\r\n&gt; res=0x2 s={false 0x0} ch=true seqId=0\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: stopped(true) old = false\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: WindowStopped on\r\n&gt; com.example.pdfeditor/com.example.pdfeditor.MainActivity set to true\r\n&gt; I/MSHandlerLifeCycle: removeMultiSplitHandler: no exist.\r\n&gt; decor=DecorView@ce3e02e[MainActivity]\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: MSG_WINDOW_FOCUS_CHANGED 0 0\r\n\r\n\r\n\r\n","title":"open failed: ENOENT (No such file or directory) pdf file is not opening","body":"<p>i am trying to make an app which edit pdf and then save it in my phone storage  but the code i write is not working whrn am i trying to open a pdf file it shows open failed: ENOENT (No such file or directory) error</p>\n<p><strong>mainActivity.java</strong></p>\n<pre><code>   package com.example.pdfeditor;\n   import android.app.Activity;\n   import android.content.Intent;\n   import android.database.Cursor;\n   import android.net.Uri;\n   import android.os.Bundle;\n   import android.provider.MediaStore;\n   import android.view.View;\n   import android.widget.Button;\n   import android.widget.Toast;\n\n   import androidx.annotation.Nullable;\n   import androidx.appcompat.app.AppCompatActivity;\n\n   import com.itextpdf.text.Document;\n   import com.itextpdf.text.DocumentException;\n   import com.itextpdf.text.Font;\n   import com.itextpdf.text.Paragraph;\n   import com.itextpdf.text.pdf.BaseFont;\n   import com.itextpdf.text.pdf.PdfWriter;\n\n   import java.io.FileInputStream;\n   import java.io.FileOutputStream;\n   import java.io.IOException;\n   import java.io.InputStream;\n  public class MainActivity extends AppCompatActivity {\n\n  private static final int REQUEST_CODE_PICK_PDF = 1;\n  private String pdfFilePath;\n\n @Override\n protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    Button pickPdfButton = findViewById(R.id.btn);\n    pickPdfButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n            intent.setType(&quot;application/pdf&quot;);\n            startActivityForResult(intent, REQUEST_CODE_PICK_PDF);\n        }\n    });\n }\n\n @Override\n protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (requestCode == REQUEST_CODE_PICK_PDF &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) \n   {\n        Uri uri = data.getData();\n        if (uri != null) {\n            pdfFilePath = getPathFromUri(uri);\n            openPdfFile();\n        }\n    }\n  }\n\n  private String getPathFromUri(Uri uri) {\n    String filePath;\n    Cursor cursor = getContentResolver().query(uri, null, null, null, null);\n    if (cursor == null) {\n        filePath = uri.getPath();\n    } else {\n        cursor.moveToFirst();\n        int index = cursor.getColumnIndex(MediaStore.Images.Media.DISPLAY_NAME);\n        filePath = cursor.getString(index);\n        cursor.close();\n     }\n     return filePath;\n }\n\n private void openPdfFile() {\n    try {\n        // Create input stream from file path\n        InputStream inputStream = new FileInputStream(pdfFilePath);\n\n        // Create a new PDF document\n        Document document = new Document();\n\n        // Set the output file path and create a new FileOutputStream\n        String outputPath = pdfFilePath.replace(&quot;.pdf&quot;, &quot;_edited.pdf&quot;);\n        FileOutputStream outputStream = new FileOutputStream(outputPath);\n\n        // Create a new PdfWriter instance\n        PdfWriter writer = PdfWriter.getInstance(document, outputStream);\n\n        // Open the document\n        document.open();\n\n        // Add text to document\n        Font font = new Font(BaseFont.createFont(&quot;assets/fonts/arial.ttf&quot;, \n     BaseFont.IDENTITY_H, BaseFont.EMBEDDED), 12);\n        Paragraph p = new Paragraph(&quot;This is a test PDF file.&quot;, font);\n        document.add(p);\n\n        // Close the document\n        document.close();\n\n        // Close the writer\n        writer.close();\n\n        // Show a toast message to indicate that the PDF file has been saved\n        Toast.makeText(this, &quot;PDF file saved at &quot; + outputPath, \n   Toast.LENGTH_LONG).show();\n\n    } catch (Exception e) {\n          e.printStackTrace();\n          Toast.makeText(this, &quot;Error: &quot; + e.getMessage(), Toast.LENGTH_LONG).show();\n       }\n    }\n}\n</code></pre>\n<p><strong>activity_main.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\ntools:context=&quot;.MainActivity&quot;&gt;\n\n   &lt;Button\n    android:id=&quot;@+id/btn&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:text=&quot;Pick PDF file&quot;\n    android:layout_centerInParent=&quot;true&quot; /&gt;\n</code></pre>\n\n<p><strong>error</strong></p>\n<blockquote>\n<p>W/System.err: java.io.FileNotFoundException: coa 2.1.pdf: open failed:\nENOENT (No such file or directory) W/System.err:     at\nlibcore.io.IoBridge.open(IoBridge.java:574) W/System.err:     at\njava.io.FileInputStream.(FileInputStream.java:160) W/System.err:\nat java.io.FileInputStream.(FileInputStream.java:115)\nW/System.err:     at\ncom.example.pdfeditor.MainActivity.openPdfFile(MainActivity.java:76)\nW/System.err:     at\ncom.example.pdfeditor.MainActivity.onActivityResult(MainActivity.java:54)\nW/System.err:     at\nandroid.app.Activity.dispatchActivityResult(Activity.java:8951)\nW/System.err:     at\nandroid.app.ActivityThread.deliverResults(ActivityThread.java:5987)\nW/System.err:     at\nandroid.app.ActivityThread.handleSendResult(ActivityThread.java:6033)\nW/System.err:     at\nandroid.app.servertransaction.ActivityResultItem.execute(ActivityResultItem.java:67)\nW/System.err:     at\nandroid.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:45)\nW/System.err:     at\nandroid.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nW/System.err:     at\nandroid.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\nW/System.err:     at\nandroid.app.ActivityThread$H.handleMessage(ActivityThread.java:2574)\nW/System.err:     at\nandroid.os.Handler.dispatchMessage(Handler.java:106) W/System.err:<br />\nat android.os.Looper.loopOnce(Looper.java:226) W/System.err:     at\nandroid.os.Looper.loop(Looper.java:313) W/System.err:     at\nandroid.app.ActivityThread.main(ActivityThread.java:8757)\nW/System.err:     at java.lang.reflect.Method.invoke(Native Method)\nW/System.err:     at\ncom.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\nW/System.err:     at\ncom.android.internal.os.ZygoteInit.main(ZygoteInit.java:1067)\nW/System.err: Caused by: android.system.ErrnoException: open failed:\nENOENT (No such file or directory) W/System.err:     at\nlibcore.io.Linux.open(Native Method) W/System.err:     at\nlibcore.io.ForwardingOs.open(ForwardingOs.java:563) W/System.err:<br />\nat libcore.io.BlockGuardOs.open(BlockGuardOs.java:274) W/System.err:<br />\nat libcore.io.ForwardingOs.open(ForwardingOs.java:563) W/System.err:<br />\nat android.app.ActivityThread$AndroidOs.open(ActivityThread.java:8619)\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:560)\nW/System.err:     ... 19 more V/Toast: show: caller =\ncom.example.pdfeditor.MainActivity.openPdfFile:107\nI/ViewRootImpl@dcac326[MainActivity]: stopped(false) old = false\nI/MSHandlerLifeCycle: removeMultiSplitHandler: no exist.\ndecor=DecorView@ce3e02e[MainActivity]\nI/ViewRootImpl@dcac326[MainActivity]: performTraversals mFirst=false\nwindowShouldResize=false viewVisibilityChanged=true\nmForceNextWindowRelayout=false params=null\nI/ViewRootImpl@dcac326[MainActivity]: updateBlastSurfaceIfNeeded\nmBlastBufferQueue=null isSameSurfaceControl=false I/BLASTBufferQueue:\nnew BLASTBufferQueue, mName= ViewRootImpl@dcac326[MainActivity]\nmNativeObject= 0xb400007c12641330 sc.mNativeObject= 0xb400007ba265c640\ncaller= android.view.ViewRootImpl.updateBlastSurfaceIfNeeded:2909\nandroid.view.ViewRootImpl.relayoutWindow:9847\nandroid.view.ViewRootImpl.performTraversals:3884\nandroid.view.ViewRootImpl.doTraversal:3116\nandroid.view.ViewRootImpl$TraversalRunnable.run:10885\nandroid.view.Choreographer$CallbackRecord.run:1301\nandroid.view.Choreographer$CallbackRecord.run:1309\nandroid.view.Choreographer.doCallbacks:923\nandroid.view.Choreographer.doFrame:852\nandroid.view.Choreographer$FrameDisplayEventReceiver.run:1283\nI/BLASTBufferQueue: update, w= 1080 h= 2408 mName =\nViewRootImpl@dcac326[MainActivity] mNativeObject= 0xb400007c12641330\nsc.mNativeObject= 0xb400007ba265c640 format= -1 caller=\nandroid.graphics.BLASTBufferQueue.:84\nandroid.view.ViewRootImpl.updateBlastSurfaceIfNeeded:2909\nandroid.view.ViewRootImpl.relayoutWindow:9847\nandroid.view.ViewRootImpl.performTraversals:3884\nandroid.view.ViewRootImpl.doTraversal:3116\nandroid.view.ViewRootImpl$TraversalRunnable.run:10885\nI/ViewRootImpl@dcac326[MainActivity]: Relayout returned:\nold=(0,0,1080,2408) new=(0,0,1080,2408) req=(1080,2408)0 dur=12\nres=0x3 s={true 0xb400007ca263d4b0} ch=true seqId=0\nI/ViewRootImpl@dcac326[MainActivity]: mThreadedRenderer.initialize()\nmSurface={isValid=true 0xb400007ca263d4b0} hwInitialized=true\nD/OpenGLRenderer: eglCreateWindowSurface\nI/ViewRootImpl@dcac326[MainActivity]: reportNextDraw\nandroid.view.ViewRootImpl.performTraversals:4438\nandroid.view.ViewRootImpl.doTraversal:3116\nandroid.view.ViewRootImpl$TraversalRunnable.run:10885\nandroid.view.Choreographer$CallbackRecord.run:1301\nandroid.view.Choreographer$CallbackRecord.run:1309\nI/ViewRootImpl@dcac326[MainActivity]: Setup new sync id=6\nI/ViewRootImpl@dcac326[MainActivity]: Setting syncFrameCallback\nI/ViewRootImpl@dcac326[MainActivity]: registerCallbacksForSync\nsyncBuffer=false I/ViewRootImpl@dcac326[MainActivity]: Received\nframeDrawingCallback syncResult=0 frameNum=1.\nI/ViewRootImpl@dcac326[MainActivity]: Setting up sync and\nframeCommitCallback I/BLASTBufferQueue:\nViewRootImpl@dcac326[MainActivity]#5 onFrameAvailable the\nfirst frame is available I/ViewRootImpl@dcac326[MainActivity]:\nReceived frameCommittedCallback lastAttemptedDrawFrameNum=1\ndidProduceBuffer=true I/ViewRootImpl@dcac326[MainActivity]:\nonSyncComplete I/ViewRootImpl@dcac326[MainActivity]: setupSync seqId=0\nmSyncId=6 fn=1\ncaller=android.view.ViewRootImpl$$ExternalSyntheticLambda11.accept:6\nandroid.window.SurfaceSyncer.lambda$setupSync$1$android-window-SurfaceSyncer:128\nandroid.window.SurfaceSyncer$$ExternalSyntheticLambda1.accept:8\nandroid.window.SurfaceSyncer$SyncSet.checkIfSyncIsComplete:382\nandroid.window.SurfaceSyncer$SyncSet.markSyncReady:359\nandroid.window.SurfaceSyncer.markSyncReady:151\nandroid.view.ViewRootImpl.performTraversals:4503\nI/ViewRootImpl@dcac326[MainActivity]: reportDrawFinished seqId=0\nmSyncId=-1 fn=1 mSurfaceChangedTransaction=0xb400007bd2631590\nI/ViewRootImpl@dcac326[MainActivity]: MSG_WINDOW_FOCUS_CHANGED 1 0\nI/ViewRootImpl@dcac326[MainActivity]:\nmThreadedRenderer.initializeIfNeeded()#2 mSurface={isValid=true\n0xb400007ca263d4b0} D/InputMethodManager: startInputInner - Id : 0\nI/InputMethodManager: startInputInner -\nmService.startInputOrWindowGainedFocus\nI/ViewRootImpl@dcac326[MainActivity]: handleAppVisibility mAppVisible\n= true visible = false D/OpenGLRenderer: setSurface called with nullptr D/OpenGLRenderer: setSurface() destroyed EGLSurface\nD/OpenGLRenderer: destroyEglSurface\nI/ViewRootImpl@dcac326[MainActivity]: performTraversals mFirst=false\nwindowShouldResize=false viewVisibilityChanged=true\nmForceNextWindowRelayout=false params=null\nI/ViewRootImpl@dcac326[MainActivity]: Relayout returned:\nold=(0,0,1080,2408) new=(0,0,1080,2408) req=(1080,2408)8 dur=16\nres=0x2 s={false 0x0} ch=true seqId=0\nI/ViewRootImpl@dcac326[MainActivity]: stopped(true) old = false\nI/ViewRootImpl@dcac326[MainActivity]: WindowStopped on\ncom.example.pdfeditor/com.example.pdfeditor.MainActivity set to true\nI/MSHandlerLifeCycle: removeMultiSplitHandler: no exist.\ndecor=DecorView@ce3e02e[MainActivity]\nI/ViewRootImpl@dcac326[MainActivity]: MSG_WINDOW_FOCUS_CHANGED 0 0</p>\n</blockquote>\n"},{"tags":["java","spring","selenium-webdriver","automated-tests","cucumber"],"owner":{"account_id":13983796,"reputation":1158,"user_id":10099383,"display_name":"kivul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683299124,"creation_date":1683290931,"question_id":76182377,"body_markdown":"I&#39;m using spring, selenium and cucumber and I want to launch chrome in different languages for specific tests.\r\nThe issue that I have is that with spring my chromeDriver is a **@Bean**, so the spring context is initialized before the tests are and before any **@Before** tag that cucumber has.\r\n\r\nThis is my bean for chromeDriver:\r\n\r\n    @Bean(destroyMethod = &quot;quit&quot;)\r\n    @Scope(&quot;cucumber-glue&quot;)\r\n    @ConditionalOnProperty(name = &quot;browser&quot;, havingValue = &quot;chrome&quot;)\r\n    @Primary\r\n    public WebDriver chromeDriver() {\r\n        Map&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\r\n        ChromeOptions chromeOptions = new ChromeOptions();\r\n    \r\n        chromePrefs.put(&quot;download.default_directory&quot;, downloadsPath);\r\n        chromePrefs.put(&quot;autofill.profile_enabled&quot;, false);\r\n    \r\n        chromeOptions.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\r\n        chromeOptions.addArguments(&quot;start-maximized&quot;);\r\n    \r\n        WebDriverManager.chromedriver().setup();\r\n        return new ChromeDriver(chromeOptions);\r\n    }\r\n\r\nAnd I would like to pass the values like this in the feature files:\r\n\r\n    @Chrome_es_CA\r\n    Scenario: Test 1 in es_CA\r\n    \r\n    @Chrome_en_US\r\n    Scenario: Test 2 in en-US\r\n\r\nIf the way that I want to do it is not possible, what are the alternatives?\r\n\r\nI know that I could pass the language through applications.properties but that wouldn&#39;t be the ideal scenario, since I&#39;d like to have all tests ran in the same execution on jenkins.\r\n\r\nThanks in advance.","title":"How to run specific automation tests in different chrome languages","body":"<p>I'm using spring, selenium and cucumber and I want to launch chrome in different languages for specific tests.\nThe issue that I have is that with spring my chromeDriver is a <strong>@Bean</strong>, so the spring context is initialized before the tests are and before any <strong>@Before</strong> tag that cucumber has.</p>\n<p>This is my bean for chromeDriver:</p>\n<pre><code>@Bean(destroyMethod = &quot;quit&quot;)\n@Scope(&quot;cucumber-glue&quot;)\n@ConditionalOnProperty(name = &quot;browser&quot;, havingValue = &quot;chrome&quot;)\n@Primary\npublic WebDriver chromeDriver() {\n    Map&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\n    ChromeOptions chromeOptions = new ChromeOptions();\n\n    chromePrefs.put(&quot;download.default_directory&quot;, downloadsPath);\n    chromePrefs.put(&quot;autofill.profile_enabled&quot;, false);\n\n    chromeOptions.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\n    chromeOptions.addArguments(&quot;start-maximized&quot;);\n\n    WebDriverManager.chromedriver().setup();\n    return new ChromeDriver(chromeOptions);\n}\n</code></pre>\n<p>And I would like to pass the values like this in the feature files:</p>\n<pre><code>@Chrome_es_CA\nScenario: Test 1 in es_CA\n\n@Chrome_en_US\nScenario: Test 2 in en-US\n</code></pre>\n<p>If the way that I want to do it is not possible, what are the alternatives?</p>\n<p>I know that I could pass the language through applications.properties but that wouldn't be the ideal scenario, since I'd like to have all tests ran in the same execution on jenkins.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","maven","ibm-odm"],"owner":{"account_id":18536392,"reputation":13,"user_id":13505962,"display_name":"brenz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683298446,"creation_date":1683298446,"question_id":76183496,"body_markdown":"I am working with ODM Rule Designer 8.9.2.\r\nI want to install the maven plugin but are not able to due to connection error message.\r\n\r\n\r\nAs there is no marketplace in Rule Designer, I am trying to use the Install New Software function with the following site:\r\nhttp://download.Eclipse.org/technology/m2e/releases/latest\r\n\r\nI have tried to change the network setting options as some solutions suggest, but doesnt work.\r\nI have tried to amend the .ini file solution i found here on this site, but that just gives a different connection error then.\r\n\r\n[![The error message I get](https://i.stack.imgur.com/hzxDQ.png)](https://i.stack.imgur.com/hzxDQ.png)\r\n\r\nI have done a lot of searching and cannot find an answer to this, hoping someone out there has faced and solved this one!","title":"Rule Designer 8.9.2 error when trying to install maven plugin","body":"<p>I am working with ODM Rule Designer 8.9.2.\nI want to install the maven plugin but are not able to due to connection error message.</p>\n<p>As there is no marketplace in Rule Designer, I am trying to use the Install New Software function with the following site:\n<a href=\"http://download.Eclipse.org/technology/m2e/releases/latest\" rel=\"nofollow noreferrer\">http://download.Eclipse.org/technology/m2e/releases/latest</a></p>\n<p>I have tried to change the network setting options as some solutions suggest, but doesnt work.\nI have tried to amend the .ini file solution i found here on this site, but that just gives a different connection error then.</p>\n<p><a href=\"https://i.stack.imgur.com/hzxDQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hzxDQ.png\" alt=\"The error message I get\" /></a></p>\n<p>I have done a lot of searching and cannot find an answer to this, hoping someone out there has faced and solved this one!</p>\n"},{"tags":["java","wildfly","cdi","jboss-weld","wildfly-16"],"answers":[{"comments":[{"owner":{"account_id":1471077,"reputation":5601,"user_id":1382647,"accept_rate":43,"display_name":"fatherazrael"},"score":0,"creation_date":1575275332,"post_id":59135010,"comment_id":104497525,"body_markdown":"Lolzzz... I just accomplished it in similar way and it worked :D\n\nWell thanks for answer.","body":"Lolzzz... I just accomplished it in similar way and it worked :D  Well thanks for answer."},{"owner":{"account_id":1471077,"reputation":5601,"user_id":1382647,"accept_rate":43,"display_name":"fatherazrael"},"score":0,"creation_date":1575275862,"post_id":59135010,"comment_id":104497764,"body_markdown":"Another question coming in mind that if i create two implementations of those Abstractclass/interface then how it works? Then which implementation it will pick by default and how can we specify particular implementation:?","body":"Another question coming in mind that if i create two implementations of those Abstractclass/interface then how it works? Then which implementation it will pick by default and how can we specify particular implementation:?"},{"owner":{"account_id":7932983,"reputation":1434,"user_id":5990117,"display_name":"Petr Aleksandrov"},"score":0,"creation_date":1575276897,"post_id":59135010,"comment_id":104498213,"body_markdown":"If you have multiple implementations, WELD will throw &quot;Ambiguous dependencies...&quot; exception. This possible can be handled by [cdi qualifiers](https://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#_qualifier_annotations)","body":"If you have multiple implementations, WELD will throw &quot;Ambiguous dependencies...&quot; exception. This possible can be handled by <a href=\"https://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#_qualifier_annotations\" rel=\"nofollow noreferrer\">cdi qualifiers</a>"},{"owner":{"account_id":1471077,"reputation":5601,"user_id":1382647,"accept_rate":43,"display_name":"fatherazrael"},"score":0,"creation_date":1575277974,"post_id":59135010,"comment_id":104498702,"body_markdown":"O just seen it appears not user friendly as of Spring where we can mention qualifier name. So for each qualifier i need to create one interface.","body":"O just seen it appears not user friendly as of Spring where we can mention qualifier name. So for each qualifier i need to create one interface."},{"owner":{"account_id":72101,"reputation":15566,"user_id":208288,"accept_rate":67,"display_name":"Laird Nelson"},"score":0,"creation_date":1575594335,"post_id":59135010,"comment_id":104628760,"body_markdown":"`javax.inject.Named` is a qualifier.","body":"<code>javax.inject.Named</code> is a qualifier."},{"owner":{"account_id":2165267,"reputation":696,"user_id":1918516,"accept_rate":88,"display_name":"Stephan"},"score":0,"creation_date":1630400242,"post_id":59135010,"comment_id":121939013,"body_markdown":"what happens in the case you are not using interfaces and you want to inject the bean itself ? Won&#39;t the extention to the genericDAO cause an issue in this case?","body":"what happens in the case you are not using interfaces and you want to inject the bean itself ? Won&#39;t the extention to the genericDAO cause an issue in this case?"}],"tags":[],"owner":{"account_id":7932983,"reputation":1434,"user_id":5990117,"display_name":"Petr Aleksandrov"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1575275140,"creation_date":1575275140,"answer_id":59135010,"question_id":59134836,"body_markdown":"Can you update the field&#39;s type to be the CustomerAgreementDao interface?\r\n\r\n```java\r\n@Stateless\r\npublic class CustomerAgreementFetcher {\r\n\r\n    @Inject\r\n    public CustomerAgreementDao customerAgreementDao;\r\n```\r\n\r\nRelated topic: https://stackoverflow.com/questions/34411371/is-it-possible-to-inject-ejb-implementation-and-not-its-interface-using-cdi","title":"DeploymentException: WELD-001408: Unsatisfied dependencies for type &lt;Class&gt; with qualifiers @Default at injection point [BackedAnnotatedField]","body":"<p>Can you update the field's type to be the CustomerAgreementDao interface?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Stateless\npublic class CustomerAgreementFetcher {\n\n    @Inject\n    public CustomerAgreementDao customerAgreementDao;\n</code></pre>\n\n<p>Related topic: <a href=\"https://stackoverflow.com/questions/34411371/is-it-possible-to-inject-ejb-implementation-and-not-its-interface-using-cdi\">Is it possible to inject EJB implementation and not its interface using CDI?</a></p>\n"}],"owner":{"account_id":1471077,"reputation":5601,"user_id":1382647,"accept_rate":43,"display_name":"fatherazrael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9676,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59135010,"answer_count":1,"score":1,"last_activity_date":1683298221,"creation_date":1575274317,"question_id":59134836,"body_markdown":"Getting following exception while injecting beans in scenario whose answer not able to found and beans.xml is included:\r\n\r\n    Caused by: org.jboss.weld.exceptions.DeploymentException: WELD-001408: Unsatisfied dependencies for type CustomerAgreementDaoImpl with qualifiers @Default\r\n      at injection point [BackedAnnotatedField] @Inject public com.evry.integrator.snow.fetch.CustomerAgreementFetcher.customerAgreementDaoImpl\r\n      at com.evry.integrator.snow.fetch.CustomerAgreementFetcher.customerAgreementDaoImpl(CustomerAgreementFetcher.java:0)\r\n    \r\n            at org.jboss.weld.bootstrap.Validator.validateInjectionPointForDeploymentProblems(Validator.java:378)\r\n            at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:290)\r\n\r\n\r\nFollowing is code structure:\r\n\r\n\r\nBeans.xml in /WEB-INF\r\n\r\n    &lt;beans xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; \r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee \r\n                               http://java.sun.com/xml/ns/javaee/beans_1_1.xsd&quot;\r\n           version=&quot;1.1&quot; bean-discovery-mode=&quot;all&quot;&gt; \r\n    &lt;/beans&gt;\r\n\r\nInterfaces\r\n\r\n    public interface GenericDao&lt;T, PK&gt; {\r\n\r\n    public interface CustomerAgreementDao extends GenericDao&lt;CustomerAgreement, Long&gt;{\r\n\r\nAbsract Class implementing Generic DAO\r\n\r\n    public abstract class GenericDaoImpl&lt;T, PK&gt; implements GenericDao&lt;T, PK&gt; {\r\n\r\n    @PersistenceContext(unitName = &quot;IntegratorMasterdataDS&quot;)\r\n    protected EntityManager em;\r\n\r\nMain Implementation\r\n\r\n    @Stateless\r\n    public class CustomerAgreementDaoImpl extends GenericDaoImpl&lt;CustomerAgreement, Long&gt; implements CustomerAgreementDao {\r\n\r\n\tpublic CustomerAgreementDaoImpl() {\r\n\t\tSystem.out.println(&quot;CustomerAgreementDaoImpl&quot;);\r\n\t}\r\n\r\nDao used in Service class\r\n\r\n    @Stateless\r\n    public class CustomerAgreementFetcher {\r\n    \t\r\n    \t@Inject\r\n    \tpublic CustomerAgreementDaoImpl customerAgreementDaoImpl;\r\n\r\nMain Scheduler loading all of above\r\n\r\n    @Startup\r\n    @Singleton\r\n    @AccessTimeout(value = 5, unit = TimeUnit.MINUTES)\r\n    public class WPoller {\r\n        @Inject\r\n        CustomerAgreementFetcher customerAgreementFetcher;","title":"DeploymentException: WELD-001408: Unsatisfied dependencies for type &lt;Class&gt; with qualifiers @Default at injection point [BackedAnnotatedField]","body":"<p>Getting following exception while injecting beans in scenario whose answer not able to found and beans.xml is included:</p>\n\n<pre><code>Caused by: org.jboss.weld.exceptions.DeploymentException: WELD-001408: Unsatisfied dependencies for type CustomerAgreementDaoImpl with qualifiers @Default\n  at injection point [BackedAnnotatedField] @Inject public com.evry.integrator.snow.fetch.CustomerAgreementFetcher.customerAgreementDaoImpl\n  at com.evry.integrator.snow.fetch.CustomerAgreementFetcher.customerAgreementDaoImpl(CustomerAgreementFetcher.java:0)\n\n        at org.jboss.weld.bootstrap.Validator.validateInjectionPointForDeploymentProblems(Validator.java:378)\n        at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:290)\n</code></pre>\n\n<p>Following is code structure:</p>\n\n<p>Beans.xml in /WEB-INF</p>\n\n<pre><code>&lt;beans xmlns=\"http://java.sun.com/xml/ns/javaee\" \n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee \n                           http://java.sun.com/xml/ns/javaee/beans_1_1.xsd\"\n       version=\"1.1\" bean-discovery-mode=\"all\"&gt; \n&lt;/beans&gt;\n</code></pre>\n\n<p>Interfaces</p>\n\n<pre><code>public interface GenericDao&lt;T, PK&gt; {\n\npublic interface CustomerAgreementDao extends GenericDao&lt;CustomerAgreement, Long&gt;{\n</code></pre>\n\n<p>Absract Class implementing Generic DAO</p>\n\n<pre><code>public abstract class GenericDaoImpl&lt;T, PK&gt; implements GenericDao&lt;T, PK&gt; {\n\n@PersistenceContext(unitName = \"IntegratorMasterdataDS\")\nprotected EntityManager em;\n</code></pre>\n\n<p>Main Implementation</p>\n\n<pre><code>@Stateless\npublic class CustomerAgreementDaoImpl extends GenericDaoImpl&lt;CustomerAgreement, Long&gt; implements CustomerAgreementDao {\n\npublic CustomerAgreementDaoImpl() {\n    System.out.println(\"CustomerAgreementDaoImpl\");\n}\n</code></pre>\n\n<p>Dao used in Service class</p>\n\n<pre><code>@Stateless\npublic class CustomerAgreementFetcher {\n\n    @Inject\n    public CustomerAgreementDaoImpl customerAgreementDaoImpl;\n</code></pre>\n\n<p>Main Scheduler loading all of above</p>\n\n<pre><code>@Startup\n@Singleton\n@AccessTimeout(value = 5, unit = TimeUnit.MINUTES)\npublic class WPoller {\n    @Inject\n    CustomerAgreementFetcher customerAgreementFetcher;\n</code></pre>\n"},{"tags":["java","php","android","mysql"],"comments":[{"owner":{"account_id":989535,"reputation":22652,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683297494,"post_id":76183339,"comment_id":134349950,"body_markdown":"That error is most likely coming from your PHP code, not your Android code, though it could be a mismatch of the data your Android code is sending and what the PHP code is expecting.","body":"That error is most likely coming from your PHP code, not your Android code, though it could be a mismatch of the data your Android code is sending and what the PHP code is expecting."},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683297933,"post_id":76183339,"comment_id":134350048,"body_markdown":"Now I have added the php code. Please check it out","body":"Now I have added the php code. Please check it out"},{"owner":{"account_id":989535,"reputation":22652,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683297984,"post_id":76183339,"comment_id":134350057,"body_markdown":"What is the exact error message you&#39;re getting?","body":"What is the exact error message you&#39;re getting?"},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683298054,"post_id":76183339,"comment_id":134350067,"body_markdown":"&lt;br/&gt;&lt;b&gt; Warning&lt;b&gt;: Undefined Array Key&quot;","body":"&lt;br/&gt;&lt;b&gt; Warning&lt;b&gt;: Undefined Array Key&quot;"},{"owner":{"account_id":989535,"reputation":22652,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683298081,"post_id":76183339,"comment_id":134350077,"body_markdown":"There&#39;s more to it, specifically which array key is undefined. If it&#39;s not there, check your server error logs","body":"There&#39;s more to it, specifically which array key is undefined. If it&#39;s not there, check your server error logs"},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683298636,"post_id":76183339,"comment_id":134350226,"body_markdown":"when click button\n15:56:27.559  D  tagSocket(74) with statsTag=0x85bc11fc, statsUid=-1\n15:56:28.049  D  Compat change id reported: 147798919; UID 10159; state: ENABLED\n15:56:28.840  D  onActivityFinishing(): calling cancelLocked()","body":"when click button 15:56:27.559  D  tagSocket(74) with statsTag=0x85bc11fc, statsUid=-1 15:56:28.049  D  Compat change id reported: 147798919; UID 10159; state: ENABLED 15:56:28.840  D  onActivityFinishing(): calling cancelLocked()"},{"owner":{"account_id":989535,"reputation":22652,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683299340,"post_id":76183339,"comment_id":134350441,"body_markdown":"Sorry, I meant the web server for the PHP log","body":"Sorry, I meant the web server for the PHP log"},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683300411,"post_id":76183339,"comment_id":134350728,"body_markdown":"i am using android studio with php to connect mysql","body":"i am using android studio with php to connect mysql"},{"owner":{"account_id":989535,"reputation":22652,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683300774,"post_id":76183339,"comment_id":134350811,"body_markdown":"Yes, and the PHP lives in a webserver, not on the android. You have 2 moving parts in separate areas.","body":"Yes, and the PHP lives in a webserver, not on the android. You have 2 moving parts in separate areas."},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683301742,"post_id":76183339,"comment_id":134350993,"body_markdown":"Sorry I dont how to do that. i am new to android and php","body":"Sorry I dont how to do that. i am new to android and php"},{"owner":{"account_id":7869117,"reputation":58330,"user_id":5947043,"display_name":"ADyson"},"score":0,"creation_date":1683307175,"post_id":76183339,"comment_id":134352181,"body_markdown":"I would guess Toast.LENGTH_SHORT is truncatating the error messages. Try letting it display the whole message for you. It should tell you _which_ array key is undefined. From just glancing the code, I can see that in the Android code, sending the email and password are optional, but the PHP code is expecting them to always be there. You should check for them using `if (isset($_POST[&quot;email]&quot;))` (for example) before trying to use those values.","body":"I would guess Toast.LENGTH_SHORT is truncatating the error messages. Try letting it display the whole message for you. It should tell you <i>which</i> array key is undefined. From just glancing the code, I can see that in the Android code, sending the email and password are optional, but the PHP code is expecting them to always be there. You should check for them using <code>if (isset($_POST[&quot;email]&quot;))</code> (for example) before trying to use those values."},{"owner":{"account_id":7869117,"reputation":58330,"user_id":5947043,"display_name":"ADyson"},"score":0,"creation_date":1683307197,"post_id":76183339,"comment_id":134352185,"body_markdown":"P.S. **Warning:** Your code is vulnerable to SQL Injection attacks. You should use parameterised queries and prepared statements to help prevent attackers from compromising your database by using malicious input values. http://bobby-tables.com gives an explanation of the risks, as well as some examples of how to write your queries safely using PHP / mysqli. **Never** insert unparameterised data directly into your SQL. The way your code is written now, someone could easily steal, incorrectly change, or even delete your data.","body":"P.S. <b>Warning:</b> Your code is vulnerable to SQL Injection attacks. You should use parameterised queries and prepared statements to help prevent attackers from compromising your database by using malicious input values. <a href=\"http://bobby-tables.com\" rel=\"nofollow noreferrer\">bobby-tables.com</a> gives an explanation of the risks, as well as some examples of how to write your queries safely using PHP / mysqli. <b>Never</b> insert unparameterised data directly into your SQL. The way your code is written now, someone could easily steal, incorrectly change, or even delete your data."},{"owner":{"account_id":7869117,"reputation":58330,"user_id":5947043,"display_name":"ADyson"},"score":0,"creation_date":1683307201,"post_id":76183339,"comment_id":134352186,"body_markdown":"https://phpdelusions.net/mysqli also contains good examples of writing safe SQL using mysqli. See also the [mysqli documentation](https://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php) and this: [How can I prevent SQL injection in PHP?](https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php) . Parameterising your queries will also greatly reduce the risk of accidental syntax errors as a result of un-escaped or incorrectly quoted input values. If you learnt your current technique from a tutorial or book, please don&#39;t use that resource again.","body":"<a href=\"https://phpdelusions.net/mysqli\" rel=\"nofollow noreferrer\">phpdelusions.net/mysqli</a> also contains good examples of writing safe SQL using mysqli. See also the <a href=\"https://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php\" rel=\"nofollow noreferrer\">mysqli documentation</a> and this: <a href=\"https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php\">How can I prevent SQL injection in PHP?</a> . Parameterising your queries will also greatly reduce the risk of accidental syntax errors as a result of un-escaped or incorrectly quoted input values. If you learnt your current technique from a tutorial or book, please don&#39;t use that resource again."},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683385960,"post_id":76183339,"comment_id":134360426,"body_markdown":"after debug, i got this error \n&lt;br /&gt;\n&lt;b&gt;Warning&lt;/b&gt;:  Undefined array key &quot;password&quot; in &lt;b&gt;C:\\xampp\\htdocs\\car\\addspace.php&lt;/b&gt; on line &lt;b&gt;24&lt;/b&gt;&lt;br /&gt;\nInvalid email or password.\nI tried to register a parking space for a person after successfully logging. After logging, his email and password need to be transferred to the next activity. \nCan any of you correct the error here?","body":"after debug, i got this error  &lt;br /&gt; &lt;b&gt;Warning&lt;/b&gt;:  Undefined array key &quot;password&quot; in &lt;b&gt;C:\\xampp\\htdocs\\car\\addspace.php&lt;/b&gt; on line &lt;b&gt;24&lt;/b&gt;&lt;br /&gt; Invalid email or password. I tried to register a parking space for a person after successfully logging. After logging, his email and password need to be transferred to the next activity.  Can any of you correct the error here?"},{"owner":{"account_id":7869117,"reputation":58330,"user_id":5947043,"display_name":"ADyson"},"score":0,"creation_date":1683395690,"post_id":76183339,"comment_id":134361625,"body_markdown":"As I said previously,  I can see that in the Android code, sending the email and password are optional, but the PHP code is expecting them to always be there. You should check for them using if (isset($_POST[&quot;email]&quot;)) (for example) before trying to use those values","body":"As I said previously,  I can see that in the Android code, sending the email and password are optional, but the PHP code is expecting them to always be there. You should check for them using if (isset($_POST[&quot;email]&quot;)) (for example) before trying to use those values"}],"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683298516,"answer_count":0,"score":0,"last_activity_date":1683297913,"creation_date":1683297352,"question_id":76183339,"body_markdown":"After logging in with email and password, the user tries to add space. When I fill out the form, an error message appears like this&quot; \\&lt;br/\\&gt;\\&lt;b\\&gt; Warning\\&lt;b\\&gt;: Undefined Array Key&quot;\r\n\r\n```\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.CheckBox;\r\n    import android.widget.EditText;\r\n    import android.widget.Toast;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import com.android.volley.AuthFailureError;\r\n    import com.android.volley.Request;\r\n    import com.android.volley.Response;\r\n    import com.android.volley.VolleyError;\r\n    import com.android.volley.toolbox.StringRequest;\r\n    import com.android.volley.toolbox.Volley;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n\r\n    public class owner_addspace extends AppCompatActivity {\r\n\r\n        private EditText titleEditText, addressEditText, postcodeEditText, costEditText;\r\n        private CheckBox availableCheckBox;\r\n        private Button submitButton;\r\n       private String email, password;\r\n   \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_owner_addspace);\r\n\r\n            // Get user&#39;s email and password from previous activity\r\n            Intent intent = getIntent();\r\n            email = intent.getStringExtra(&quot;email&quot;);\r\n            password = intent.getStringExtra(&quot;password&quot;);\r\n\r\n            titleEditText = findViewById(R.id.editTextSpace);\r\n            addressEditText = findViewById(R.id.editTextAddress);\r\n            postcodeEditText = findViewById(R.id.editTextPostCode);\r\n            costEditText = findViewById(R.id.editTextCost);\r\n            availableCheckBox = findViewById(R.id.checkBoxIsAvailable);\r\n            submitButton = findViewById(R.id.buttonAddSpace);\r\n    \r\n            submitButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    String title = titleEditText.getText().toString().trim();\r\n                    String address = addressEditText.getText().toString().trim();\r\n                    String postcode = postcodeEditText.getText().toString().trim();\r\n                    String cost = costEditText.getText().toString().trim();\r\n                    boolean isAvailable = availableCheckBox.isChecked();\r\n\r\n                    // Validate the input values\r\n                    if (title.isEmpty()) {\r\n                        titleEditText.setError(&quot;Title is required&quot;);\r\n                        titleEditText.requestFocus();\r\n                          return;\r\n                    }\r\n\r\n                    if (address.isEmpty()) {\r\n                        addressEditText.setError(&quot;Address is required&quot;);\r\n                        addressEditText.requestFocus();\r\n                        return;\r\n                    }\r\n\r\n                    if (postcode.isEmpty()) {\r\n                        postcodeEditText.setError(&quot;Postcode is required&quot;);\r\n                        postcodeEditText.requestFocus();\r\n                        return;\r\n                    }\r\n   \r\n                    if (cost.isEmpty()) {\r\n                         costEditText.setError(&quot;Cost per hour is required&quot;);\r\n                        costEditText.requestFocus();\r\n                        return;\r\n                    }\r\n\r\n  \r\n                    StringRequest stringRequest = new StringRequest(Request.Method.POST, Constants.URL_ADD_SPACE, new Response.Listener&lt;String&gt;() {\r\n                        @Override\r\n                        public void onResponse(String response) {\r\n                            // Show a toast message\r\n                            Toast.makeText(owner_addspace.this, response, Toast.LENGTH_SHORT).show();\r\n\r\n                            // Go back to the main activity\r\n                            finish();\r\n                        }\r\n                    }, new Response.ErrorListener() {\r\n                        @Override\r\n                        public void onErrorResponse(VolleyError error) {\r\n                            // Show an error message\r\n                            Toast.makeText(owner_addspace.this, &quot;Error: &quot; + error.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }) {\r\n                        @Override\r\n                        protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\r\n                            Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n                            params.put(&quot;ps_title&quot;, title);\r\n                            params.put(&quot;ps_address&quot;, address);\r\n                            params.put(&quot;postcode&quot;, postcode);\r\n                            params.put(&quot;cost_per_hour&quot;, cost);\r\n                            params.put(&quot;is_available&quot;, isAvailable ? &quot;Available&quot; : &quot;Not Available&quot;);\r\n\r\n                            if(email != null) {\r\n                                params.put(&quot;email&quot;, email);\r\n                            }\r\n                            if(password != null) {\r\n                                params.put(&quot;password&quot;, password);\r\n                            }\r\n                            return params;\r\n                        }\r\n                    };\r\n\r\n                    Volley.newRequestQueue(owner_addspace.this).add(stringRequest);\r\n                }\r\n            });\r\n        }\r\n    }\r\n```\r\nphp code\r\n```\r\n    &lt;?php\r\n   // Define database connection parameters\r\n    $servername = &quot;localhost&quot;;\r\n    $username = &quot;root&quot;;\r\n    $password = &quot;&quot;;\r\n    $dbname = &quot;mydb&quot;;\r\n\r\n    // Create database connection\r\n    $conn = new mysqli($servername, $username, $password, $dbname);\r\n\r\n    // Check for connection errors\r\n    if ($conn-&gt;connect_error) {\r\n        die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);\r\n    }\r\n\r\n    // Get the input values from the form\r\n    $ps_title = $_POST[&#39;ps_title&#39;];\r\n    $ps_address = $_POST[&#39;ps_address&#39;];\r\n    $postcode = $_POST[&#39;postcode&#39;];\r\n    $cost_per_hour = $_POST[&#39;cost_per_hour&#39;];\r\n    $is_available = isset($_POST[&#39;is_available&#39;]) ? &quot;Available&quot; : &quot;Not \r\n    Available&quot;;\r\n    $email = $_POST[&#39;email&#39;];\r\n    $password = $_POST[&#39;password&#39;];\r\n\r\n     // Check if the postcode already exists in the postcode table\r\n    $result = $conn-&gt;query(&quot;SELECT PostcodeID FROM postcode WHERE Postcode = \r\n    &#39;$postcode&#39;&quot;);\r\n\r\n    if ($result-&gt;num_rows &gt; 0) {\r\n        // The postcode already exists, get the PostcodeID\r\n        $row = $result-&gt;fetch_assoc();\r\n        $postcode_id = $row[&#39;PostcodeID&#39;];\r\n    } else {\r\n        // The postcode does not exist, add it to the postcode table and get \r\n    the PostcodeID\r\n        $conn-&gt;query(&quot;INSERT INTO postcode (Postcode) VALUES \r\n    (&#39;$postcode&#39;)&quot;);\r\n        $postcode_id = $conn-&gt;insert_id;\r\n    \r\n        // Use the Google Maps API to get the geolocation data of the postcode\r\n        $geocode_url = &quot;https://maps.googleapis.com/maps/api/geocode/json?address=$postcode&amp;key=AIzaSyB0wJammsFsGqsX5X0s97U10oj_s5_jgM8&quot;;\r\n        $geocode_data = json_decode(file_get_contents($geocode_url));\r\n    \r\n        if ($geocode_data-&gt;status == &quot;OK&quot;) {\r\n            $latitude = $geocode_data-&gt;results[0]-&gt;geometry-&gt;location-&gt;lat;\r\n            $longitude = $geocode_data-&gt;results[0]-&gt;geometry-&gt;location-&gt;lng;\r\n            $conn-&gt;query(&quot;UPDATE postcode SET Latitude = &#39;$latitude&#39;, Longitude = &#39;$longitude&#39; WHERE PostcodeID = &#39;$postcode_id&#39;&quot;);\r\n        }\r\n    }\r\n\r\n    // Get the H_ID from the households table using the email and password\r\n    $result = $conn-&gt;query(&quot;SELECT H_ID FROM households WHERE H_Email = \r\n    &#39;$email&#39; AND H_Password = &#39;$password&#39;&quot;);\r\n\r\n    if ($result-&gt;num_rows &gt; 0) {\r\n        $row = $result-&gt;fetch_assoc();\r\n        $h_id = $row[&#39;H_ID&#39;];\r\n    \r\n        // Insert the parking space into the parkingspace table\r\n        $conn-&gt;query(&quot;INSERT INTO parkingspace (PS_Title, PS_Address, \r\n    PostcodeID, H_ID, PS_Cost, PS_Status) VALUES (&#39;$ps_title&#39;, \r\n    &#39;$ps_address&#39;, &#39;$postcode_id&#39;, &#39;$h_id&#39;, &#39;$cost_per_hour&#39;, \r\n    &#39;$is_available&#39;, &#39;&#39;)&quot;);\r\n    \r\n        echo &quot;Parking space added successfully!&quot;;\r\n    } else {\r\n        echo &quot;Invalid email or password.&quot;;\r\n    }\r\n\r\n    // Close the database connection\r\n    $conn-&gt;close();\r\n    ?&gt;\r\n\r\n```\r\nwhen user logged, try to add car space. after filling form and click update button error comes like this\r\n&lt;br/&gt;&lt;b&gt;Warning&lt;b&gt;:Undefined Array Key ","title":"How do I solve this in android register code","body":"<p>After logging in with email and password, the user tries to add space. When I fill out the form, an error message appears like this&quot; &lt;br/&gt;&lt;b&gt; Warning&lt;b&gt;: Undefined Array Key&quot;</p>\n<pre><code>    import android.content.Intent;\n    import android.os.Bundle;\n    import android.view.View;\n    import android.widget.Button;\n    import android.widget.CheckBox;\n    import android.widget.EditText;\n    import android.widget.Toast;\n    import androidx.appcompat.app.AppCompatActivity;\n    import com.android.volley.AuthFailureError;\n    import com.android.volley.Request;\n    import com.android.volley.Response;\n    import com.android.volley.VolleyError;\n    import com.android.volley.toolbox.StringRequest;\n    import com.android.volley.toolbox.Volley;\n    import java.util.HashMap;\n    import java.util.Map;\n\n    public class owner_addspace extends AppCompatActivity {\n\n        private EditText titleEditText, addressEditText, postcodeEditText, costEditText;\n        private CheckBox availableCheckBox;\n        private Button submitButton;\n       private String email, password;\n   \n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_owner_addspace);\n\n            // Get user's email and password from previous activity\n            Intent intent = getIntent();\n            email = intent.getStringExtra(&quot;email&quot;);\n            password = intent.getStringExtra(&quot;password&quot;);\n\n            titleEditText = findViewById(R.id.editTextSpace);\n            addressEditText = findViewById(R.id.editTextAddress);\n            postcodeEditText = findViewById(R.id.editTextPostCode);\n            costEditText = findViewById(R.id.editTextCost);\n            availableCheckBox = findViewById(R.id.checkBoxIsAvailable);\n            submitButton = findViewById(R.id.buttonAddSpace);\n    \n            submitButton.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    String title = titleEditText.getText().toString().trim();\n                    String address = addressEditText.getText().toString().trim();\n                    String postcode = postcodeEditText.getText().toString().trim();\n                    String cost = costEditText.getText().toString().trim();\n                    boolean isAvailable = availableCheckBox.isChecked();\n\n                    // Validate the input values\n                    if (title.isEmpty()) {\n                        titleEditText.setError(&quot;Title is required&quot;);\n                        titleEditText.requestFocus();\n                          return;\n                    }\n\n                    if (address.isEmpty()) {\n                        addressEditText.setError(&quot;Address is required&quot;);\n                        addressEditText.requestFocus();\n                        return;\n                    }\n\n                    if (postcode.isEmpty()) {\n                        postcodeEditText.setError(&quot;Postcode is required&quot;);\n                        postcodeEditText.requestFocus();\n                        return;\n                    }\n   \n                    if (cost.isEmpty()) {\n                         costEditText.setError(&quot;Cost per hour is required&quot;);\n                        costEditText.requestFocus();\n                        return;\n                    }\n\n  \n                    StringRequest stringRequest = new StringRequest(Request.Method.POST, Constants.URL_ADD_SPACE, new Response.Listener&lt;String&gt;() {\n                        @Override\n                        public void onResponse(String response) {\n                            // Show a toast message\n                            Toast.makeText(owner_addspace.this, response, Toast.LENGTH_SHORT).show();\n\n                            // Go back to the main activity\n                            finish();\n                        }\n                    }, new Response.ErrorListener() {\n                        @Override\n                        public void onErrorResponse(VolleyError error) {\n                            // Show an error message\n                            Toast.makeText(owner_addspace.this, &quot;Error: &quot; + error.getMessage(), Toast.LENGTH_SHORT).show();\n                        }\n                    }) {\n                        @Override\n                        protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\n                            Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n                            params.put(&quot;ps_title&quot;, title);\n                            params.put(&quot;ps_address&quot;, address);\n                            params.put(&quot;postcode&quot;, postcode);\n                            params.put(&quot;cost_per_hour&quot;, cost);\n                            params.put(&quot;is_available&quot;, isAvailable ? &quot;Available&quot; : &quot;Not Available&quot;);\n\n                            if(email != null) {\n                                params.put(&quot;email&quot;, email);\n                            }\n                            if(password != null) {\n                                params.put(&quot;password&quot;, password);\n                            }\n                            return params;\n                        }\n                    };\n\n                    Volley.newRequestQueue(owner_addspace.this).add(stringRequest);\n                }\n            });\n        }\n    }\n</code></pre>\n<p>php code</p>\n<pre><code>    &lt;?php\n   // Define database connection parameters\n    $servername = &quot;localhost&quot;;\n    $username = &quot;root&quot;;\n    $password = &quot;&quot;;\n    $dbname = &quot;mydb&quot;;\n\n    // Create database connection\n    $conn = new mysqli($servername, $username, $password, $dbname);\n\n    // Check for connection errors\n    if ($conn-&gt;connect_error) {\n        die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);\n    }\n\n    // Get the input values from the form\n    $ps_title = $_POST['ps_title'];\n    $ps_address = $_POST['ps_address'];\n    $postcode = $_POST['postcode'];\n    $cost_per_hour = $_POST['cost_per_hour'];\n    $is_available = isset($_POST['is_available']) ? &quot;Available&quot; : &quot;Not \n    Available&quot;;\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n     // Check if the postcode already exists in the postcode table\n    $result = $conn-&gt;query(&quot;SELECT PostcodeID FROM postcode WHERE Postcode = \n    '$postcode'&quot;);\n\n    if ($result-&gt;num_rows &gt; 0) {\n        // The postcode already exists, get the PostcodeID\n        $row = $result-&gt;fetch_assoc();\n        $postcode_id = $row['PostcodeID'];\n    } else {\n        // The postcode does not exist, add it to the postcode table and get \n    the PostcodeID\n        $conn-&gt;query(&quot;INSERT INTO postcode (Postcode) VALUES \n    ('$postcode')&quot;);\n        $postcode_id = $conn-&gt;insert_id;\n    \n        // Use the Google Maps API to get the geolocation data of the postcode\n        $geocode_url = &quot;https://maps.googleapis.com/maps/api/geocode/json?address=$postcode&amp;key=AIzaSyB0wJammsFsGqsX5X0s97U10oj_s5_jgM8&quot;;\n        $geocode_data = json_decode(file_get_contents($geocode_url));\n    \n        if ($geocode_data-&gt;status == &quot;OK&quot;) {\n            $latitude = $geocode_data-&gt;results[0]-&gt;geometry-&gt;location-&gt;lat;\n            $longitude = $geocode_data-&gt;results[0]-&gt;geometry-&gt;location-&gt;lng;\n            $conn-&gt;query(&quot;UPDATE postcode SET Latitude = '$latitude', Longitude = '$longitude' WHERE PostcodeID = '$postcode_id'&quot;);\n        }\n    }\n\n    // Get the H_ID from the households table using the email and password\n    $result = $conn-&gt;query(&quot;SELECT H_ID FROM households WHERE H_Email = \n    '$email' AND H_Password = '$password'&quot;);\n\n    if ($result-&gt;num_rows &gt; 0) {\n        $row = $result-&gt;fetch_assoc();\n        $h_id = $row['H_ID'];\n    \n        // Insert the parking space into the parkingspace table\n        $conn-&gt;query(&quot;INSERT INTO parkingspace (PS_Title, PS_Address, \n    PostcodeID, H_ID, PS_Cost, PS_Status) VALUES ('$ps_title', \n    '$ps_address', '$postcode_id', '$h_id', '$cost_per_hour', \n    '$is_available', '')&quot;);\n    \n        echo &quot;Parking space added successfully!&quot;;\n    } else {\n        echo &quot;Invalid email or password.&quot;;\n    }\n\n    // Close the database connection\n    $conn-&gt;close();\n    ?&gt;\n\n</code></pre>\n<p>when user logged, try to add car space. after filling form and click update button error comes like this\n<br/>Warning:Undefined Array Key</p>\n"},{"tags":["java","android","web-scraping","retrofit","android-networking"],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683297519,"creation_date":1683297519,"question_id":76183357,"body_markdown":"I have to scrape a web page, I have to take all the elements that have the `data-component-type` equal to `s-search-result` and put them in ArrayList of type PC, of which it has some properties.\r\n\r\nBut I don&#39;t know how to do this parsing using Retrofit.\r\n\r\nCan anyone give me a hand?\r\n\r\n```java\r\n// RxJava library and RxAndroid for Android specific bindings\r\n    implementation &#39;io.reactivex.rxjava2:rxjava:2.2.0&#39;\r\n    implementation &#39;io.reactivex.rxjava2:rxandroid:2.0.2&#39;\r\n\r\n    // Retrofit and OkHttp\r\n    implementation &#39;com.squareup.retrofit2:retrofit:2.4.0&#39;\r\n    implementation &#39;com.squareup.okhttp3:okhttp:3.11.0&#39;\r\n\r\n    // RxJava retrofit adapter and Retrofit Gson converter\r\n    implementation &#39;com.jakewharton.retrofit:retrofit2-rxjava2-adapter:1.0.0&#39;\r\n    implementation &#39;com.squareup.retrofit2:converter-gson:2.4.0&#39;\r\n```\r\n\r\nApiService\r\n```java\r\nimport io.reactivex.Flowable;\r\nimport retrofit2.http.GET;\r\n\r\npublic interface ApiService {\r\n    @GET(&quot;/pc/s?k=pc&quot;)\r\n    Flowable&lt;Page&gt; getPc();\r\n}\r\n```\r\n\r\nHttpClient\r\n\r\n```java\r\nimport com.jakewharton.retrofit2.adapter.rxjava2.RxJava2CallAdapterFactory;\r\n\r\nimport retrofit2.Retrofit;\r\nimport retrofit2.converter.gson.GsonConverterFactory;\r\n\r\npublic class HttpClient {\r\n    private static final String API_BASE_URL = &quot;https://www.amazon.com/&quot;;\r\n\r\n    private static Retrofit retrofit = new Retrofit.Builder()\r\n            .baseUrl(API_BASE_URL)\r\n            .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\r\n            .addConverterFactory(GsonConverterFactory.create())\r\n            .build();\r\n\r\n    private static ApiService apiService = retrofit.create(ApiService.class);\r\n\r\n    public static ApiService getApiService() {\r\n        return apiService;\r\n    }\r\n}\r\n```\r\n\r\nMyWidget\r\n\r\n```java\r\nimport android.appwidget.AppWidgetManager;\r\nimport android.appwidget.AppWidgetProvider;\r\nimport android.content.Context;\r\nimport android.content.SharedPreferences;\r\nimport android.util.Log;\r\nimport android.widget.RemoteViews;\r\n\r\nimport io.reactivex.functions.Consumer;\r\n\r\npublic class MyWidget extends AppWidgetProvider {\r\n    private ApiService apiService = HttpClient.getApiService();\r\n\r\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\r\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\r\n\r\n        //get the widget value\r\n        SharedPreferences preferences = context.getSharedPreferences(&quot;PREFS&quot;, 0);\r\n        int value = preferences.getInt(&quot;value&quot;, 1);\r\n\r\n        //set the value in the textview\r\n        views.setTextViewText(R.id.text, &quot;&quot; + value);\r\n\r\n        //update the widget\r\n        appWidgetManager.updateAppWidget(appWidgetId, views);\r\n\r\n        //reschedule the widget refresh\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n        alarmHandler.setAlarmManager();\r\n\r\n\r\n//Service http\r\n        apiService.getPc()\r\n                .observeOn(SchedulerProvider.ui())\r\n                .subscribeOn(SchedulerProvider.io())\r\n                .subscribe(new Consumer&lt;Page&gt;() {\r\n                    @Override\r\n                    public void accept(Page page) throws Exception {\r\n                        // Update the UI\r\n                        Log.d(&quot;WIDGET2&quot;, page.toString());\r\n                    }\r\n                }, new Consumer&lt;Throwable&gt;() {\r\n                    @Override\r\n                    public void accept(Throwable throwable) throws Exception {\r\n                        // Throw error\r\n                        throwable.printStackTrace();\r\n                    }\r\n                });\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\r\n        for (int appWidgetId: appWidgetIds) {\r\n            updateAppWidget(context, appWidgetManager, appWidgetId);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onDisabled(Context context) {\r\n        //stop updating the widget\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\r\n    }\r\n```\r\n\r\nPage\r\n\r\n```java\r\nimport java.util.ArrayList;\r\n\r\nclass Pc {\r\n\r\n    String name;\r\n    String price;\r\n    boolean sponsored;\r\n\r\n    public String getFormattedInfo() {\r\n        StringBuilder builder = new StringBuilder();\r\n        builder.append(&quot;Name: &quot; + name + &quot;\\n\\n&quot;);\r\n        builder.append(&quot;Price: &quot; + price + &quot;\\n&quot;);\r\n        builder.append(&quot;Sponsored: &quot; + sponsored + &quot;\\n&quot;);\r\n\r\n        return new String(builder);\r\n    }\r\n}\r\n\r\npublic class Page {\r\n\r\n    String numberPc;\r\n\r\n    ArrayList&lt;Pc&gt; arrayPc = new ArrayList&lt;Pc&gt;();\r\n\r\n}\r\n```","title":"Android Java rxjava thread scraping a web page","body":"<p>I have to scrape a web page, I have to take all the elements that have the <code>data-component-type</code> equal to <code>s-search-result</code> and put them in ArrayList of type PC, of which it has some properties.</p>\n<p>But I don't know how to do this parsing using Retrofit.</p>\n<p>Can anyone give me a hand?</p>\n<pre class=\"lang-java prettyprint-override\"><code>// RxJava library and RxAndroid for Android specific bindings\n    implementation 'io.reactivex.rxjava2:rxjava:2.2.0'\n    implementation 'io.reactivex.rxjava2:rxandroid:2.0.2'\n\n    // Retrofit and OkHttp\n    implementation 'com.squareup.retrofit2:retrofit:2.4.0'\n    implementation 'com.squareup.okhttp3:okhttp:3.11.0'\n\n    // RxJava retrofit adapter and Retrofit Gson converter\n    implementation 'com.jakewharton.retrofit:retrofit2-rxjava2-adapter:1.0.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.4.0'\n</code></pre>\n<p>ApiService</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.reactivex.Flowable;\nimport retrofit2.http.GET;\n\npublic interface ApiService {\n    @GET(&quot;/pc/s?k=pc&quot;)\n    Flowable&lt;Page&gt; getPc();\n}\n</code></pre>\n<p>HttpClient</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.jakewharton.retrofit2.adapter.rxjava2.RxJava2CallAdapterFactory;\n\nimport retrofit2.Retrofit;\nimport retrofit2.converter.gson.GsonConverterFactory;\n\npublic class HttpClient {\n    private static final String API_BASE_URL = &quot;https://www.amazon.com/&quot;;\n\n    private static Retrofit retrofit = new Retrofit.Builder()\n            .baseUrl(API_BASE_URL)\n            .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n            .addConverterFactory(GsonConverterFactory.create())\n            .build();\n\n    private static ApiService apiService = retrofit.create(ApiService.class);\n\n    public static ApiService getApiService() {\n        return apiService;\n    }\n}\n</code></pre>\n<p>MyWidget</p>\n<pre class=\"lang-java prettyprint-override\"><code>import android.appwidget.AppWidgetManager;\nimport android.appwidget.AppWidgetProvider;\nimport android.content.Context;\nimport android.content.SharedPreferences;\nimport android.util.Log;\nimport android.widget.RemoteViews;\n\nimport io.reactivex.functions.Consumer;\n\npublic class MyWidget extends AppWidgetProvider {\n    private ApiService apiService = HttpClient.getApiService();\n\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\n\n        //get the widget value\n        SharedPreferences preferences = context.getSharedPreferences(&quot;PREFS&quot;, 0);\n        int value = preferences.getInt(&quot;value&quot;, 1);\n\n        //set the value in the textview\n        views.setTextViewText(R.id.text, &quot;&quot; + value);\n\n        //update the widget\n        appWidgetManager.updateAppWidget(appWidgetId, views);\n\n        //reschedule the widget refresh\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n        alarmHandler.setAlarmManager();\n\n\n//Service http\n        apiService.getPc()\n                .observeOn(SchedulerProvider.ui())\n                .subscribeOn(SchedulerProvider.io())\n                .subscribe(new Consumer&lt;Page&gt;() {\n                    @Override\n                    public void accept(Page page) throws Exception {\n                        // Update the UI\n                        Log.d(&quot;WIDGET2&quot;, page.toString());\n                    }\n                }, new Consumer&lt;Throwable&gt;() {\n                    @Override\n                    public void accept(Throwable throwable) throws Exception {\n                        // Throw error\n                        throwable.printStackTrace();\n                    }\n                });\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\n    }\n\n    @Override\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\n        for (int appWidgetId: appWidgetIds) {\n            updateAppWidget(context, appWidgetManager, appWidgetId);\n        }\n    }\n\n    @Override\n    public void onDisabled(Context context) {\n        //stop updating the widget\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\n    }\n</code></pre>\n<p>Page</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\n\nclass Pc {\n\n    String name;\n    String price;\n    boolean sponsored;\n\n    public String getFormattedInfo() {\n        StringBuilder builder = new StringBuilder();\n        builder.append(&quot;Name: &quot; + name + &quot;\\n\\n&quot;);\n        builder.append(&quot;Price: &quot; + price + &quot;\\n&quot;);\n        builder.append(&quot;Sponsored: &quot; + sponsored + &quot;\\n&quot;);\n\n        return new String(builder);\n    }\n}\n\npublic class Page {\n\n    String numberPc;\n\n    ArrayList&lt;Pc&gt; arrayPc = new ArrayList&lt;Pc&gt;();\n\n}\n</code></pre>\n"},{"tags":["java","vert.x","java-vertx-web"],"answers":[{"comments":[{"owner":{"account_id":12617245,"reputation":522,"user_id":9256127,"display_name":"Lukas Weber"},"score":0,"creation_date":1683262940,"post_id":76164234,"comment_id":134342925,"body_markdown":"this is exactly what I need! Thanks for your support :) I made two small edits to make it work (at least on my machine), maybe you can add them to your answer.","body":"this is exactly what I need! Thanks for your support :) I made two small edits to make it work (at least on my machine), maybe you can add them to your answer."}],"tags":[],"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683296601,"creation_date":1683119401,"answer_id":76164234,"question_id":76162682,"body_markdown":"You can set several handlers on a route definition. On the `/static/*` route, set a handler which, when the response is ready to be sent, adds an extra header:\r\n\r\n    public class Server extends AbstractVerticle\r\n    { \r\n      @Override\r\n      public void start() throws Exception {\r\n        Router router = Router.router(vertx);\r\n        router.route().handler(BodyHandler.create());\r\n        router.route(&quot;/static/*&quot;)\r\n            .handler(rc -&gt; {\r\n                HttpServerResponse resp = rc.response();\r\n                resp.headersEndHandler(v-&gt; {\r\n                  // perhaps checks response status code before adding the header\r\n                  resp.putHeader(io.vertx.core.http.HttpHeaders.CONTENT_DISPOSITION, &quot;attachment&quot;);\r\n                });\r\n                rc.next();\r\n            })\r\n            .handler(StaticHandler.create(&quot;data&quot;));\r\n        vertx.createHttpServer().requestHandler(router).listen(8080);\r\n      }\r\n    }\r\n\r\n","title":"How to make StaticHandler download all Mime types?","body":"<p>You can set several handlers on a route definition. On the <code>/static/*</code> route, set a handler which, when the response is ready to be sent, adds an extra header:</p>\n<pre><code>public class Server extends AbstractVerticle\n{ \n  @Override\n  public void start() throws Exception {\n    Router router = Router.router(vertx);\n    router.route().handler(BodyHandler.create());\n    router.route(&quot;/static/*&quot;)\n        .handler(rc -&gt; {\n            HttpServerResponse resp = rc.response();\n            resp.headersEndHandler(v-&gt; {\n              // perhaps checks response status code before adding the header\n              resp.putHeader(io.vertx.core.http.HttpHeaders.CONTENT_DISPOSITION, &quot;attachment&quot;);\n            });\n            rc.next();\n        })\n        .handler(StaticHandler.create(&quot;data&quot;));\n    vertx.createHttpServer().requestHandler(router).listen(8080);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":12617245,"reputation":522,"user_id":9256127,"display_name":"Lukas Weber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76164234,"answer_count":1,"score":0,"last_activity_date":1683296601,"creation_date":1683108770,"question_id":76162682,"body_markdown":"I have a basic verticle serving files from the `data` folder:\r\n\r\n    public class Server extends AbstractVerticle\r\n    { \r\n      @Override\r\n      public void start() throws Exception {\r\n        Router router = Router.router(vertx);\r\n        router.route().handler(BodyHandler.create());\r\n        router.route(&quot;/static/*&quot;).handler(StaticHandler.create(&quot;data&quot;));\r\n        vertx.createHttpServer().requestHandler(router).listen(8080);\r\n      }\r\n    }\r\n\r\nThe server downloads files as `.docx`, but renders all images or PDFs within the browser.\r\n\r\nHow can I tell my StaticHandler to download all MIME types?\r\n\r\nCan I somehow set the `Content-Disposition: attachment` header globally for the whole StaticHandler? Or have some hooks where I can set it dependent on the routing context?\r\n\r\n\r\n","title":"How to make StaticHandler download all Mime types?","body":"<p>I have a basic verticle serving files from the <code>data</code> folder:</p>\n<pre><code>public class Server extends AbstractVerticle\n{ \n  @Override\n  public void start() throws Exception {\n    Router router = Router.router(vertx);\n    router.route().handler(BodyHandler.create());\n    router.route(&quot;/static/*&quot;).handler(StaticHandler.create(&quot;data&quot;));\n    vertx.createHttpServer().requestHandler(router).listen(8080);\n  }\n}\n</code></pre>\n<p>The server downloads files as <code>.docx</code>, but renders all images or PDFs within the browser.</p>\n<p>How can I tell my StaticHandler to download all MIME types?</p>\n<p>Can I somehow set the <code>Content-Disposition: attachment</code> header globally for the whole StaticHandler? Or have some hooks where I can set it dependent on the routing context?</p>\n"},{"tags":["java","properties","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":2,"creation_date":1490802005,"post_id":38281734,"comment_id":73277660,"body_markdown":"Why foo void? How to use this class?","body":"Why foo void? How to use this class?"},{"owner":{"account_id":3004867,"reputation":715,"user_id":2549581,"accept_rate":0,"display_name":"vs_lala"},"score":3,"creation_date":1530711322,"post_id":38281734,"comment_id":89332720,"body_markdown":"@gstackoverflow It is just an example. You can use it as you like.","body":"@gstackoverflow It is just an example. You can use it as you like."},{"owner":{"account_id":1096311,"reputation":2246,"user_id":1089841,"accept_rate":33,"display_name":"Girish"},"score":0,"creation_date":1631541402,"post_id":38281734,"comment_id":122242778,"body_markdown":"getting FileNotfoundException, but my file is in the resources folder res/sensitive.properties","body":"getting FileNotfoundException, but my file is in the resources folder res/sensitive.properties"},{"owner":{"account_id":9511237,"reputation":1636,"user_id":7069108,"accept_rate":100,"display_name":"Hzzkygcs"},"score":0,"creation_date":1651647486,"post_id":38281734,"comment_id":127409974,"body_markdown":"@PropertySource() is optional. Just in case anyone needs this information","body":"@PropertySource() is optional. Just in case anyone needs this information"}],"tags":[],"owner":{"account_id":8702736,"reputation":11399,"user_id":6511967,"display_name":"Wilson"},"comment_count":4,"down_vote_count":0,"up_vote_count":55,"is_accepted":true,"score":55,"last_activity_date":1468069348,"creation_date":1468066757,"answer_id":38281734,"question_id":38281512,"body_markdown":"You can use `@PropertySource` to externalize your configuration to a properties file. There is number of way to do get properties:\r\n\r\n**1.\r\nAssign the property values to fields by using `@Value` with `PropertySourcesPlaceholderConfigurer` to resolve `${}` in `@Value`:**\r\n\r\n    @Configuration\r\n\t@PropertySource(&quot;file:config.properties&quot;)\r\n    public class ApplicationConfiguration {\r\n\r\n\t    @Value(&quot;${gMapReportUrl}&quot;)\r\n\t    private String gMapReportUrl;\r\n\r\n\t    @Bean\r\n\t    public static PropertySourcesPlaceholderConfigurer propertyConfigInDev() {\r\n\t\t    return new PropertySourcesPlaceholderConfigurer();\r\n\t    }\r\n\r\n    }\r\n\r\n**2.\r\nGet the property values by using `Environment`:**\r\n\r\n    @Configuration\r\n\t@PropertySource(&quot;file:config.properties&quot;)\r\n    public class ApplicationConfiguration {\r\n\r\n\t    @Autowired\r\n        private Environment env;\r\n\r\n\t    public void foo() {\r\n            env.getProperty(&quot;gMapReportUrl&quot;);\r\n        }\r\n\r\n    }\r\n\r\nHope this can help","title":"How to read data from java properties file using Spring Boot","body":"<p>You can use <code>@PropertySource</code> to externalize your configuration to a properties file. There is number of way to do get properties:</p>\n\n<p><strong>1.\nAssign the property values to fields by using <code>@Value</code> with <code>PropertySourcesPlaceholderConfigurer</code> to resolve <code>${}</code> in <code>@Value</code>:</strong></p>\n\n<pre><code>@Configuration\n@PropertySource(\"file:config.properties\")\npublic class ApplicationConfiguration {\n\n    @Value(\"${gMapReportUrl}\")\n    private String gMapReportUrl;\n\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer propertyConfigInDev() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }\n\n}\n</code></pre>\n\n<p><strong>2.\nGet the property values by using <code>Environment</code>:</strong></p>\n\n<pre><code>@Configuration\n@PropertySource(\"file:config.properties\")\npublic class ApplicationConfiguration {\n\n    @Autowired\n    private Environment env;\n\n    public void foo() {\n        env.getProperty(\"gMapReportUrl\");\n    }\n\n}\n</code></pre>\n\n<p>Hope this can help</p>\n"},{"comments":[{"owner":{"account_id":1096311,"reputation":2246,"user_id":1089841,"accept_rate":33,"display_name":"Girish"},"score":0,"creation_date":1631533969,"post_id":47178674,"comment_id":122239525,"body_markdown":"I have &quot;sensitive.properties&quot; inside the resources folder, have used the above approach with @Configuration annotation, but it is not able to read value.","body":"I have &quot;sensitive.properties&quot; inside the resources folder, have used the above approach with @Configuration annotation, but it is not able to read value."},{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1631630255,"post_id":47178674,"comment_id":122271374,"body_markdown":"@Girish please check the location of your properties file. In the above approach, the properties file was in the same location with the application.properties file","body":"@Girish please check the location of your properties file. In the above approach, the properties file was in the same location with the application.properties file"},{"owner":{"account_id":1096311,"reputation":2246,"user_id":1089841,"accept_rate":33,"display_name":"Girish"},"score":0,"creation_date":1631633831,"post_id":47178674,"comment_id":122273203,"body_markdown":"I also have it in the resources folder, but Environment is null and propertysource also not working","body":"I also have it in the resources folder, but Environment is null and propertysource also not working"},{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1631634064,"post_id":47178674,"comment_id":122273319,"body_markdown":"@Girish this should work actually. please check typographical errors.","body":"@Girish this should work actually. please check typographical errors."}],"tags":[],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"comment_count":4,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1552498850,"creation_date":1510140836,"answer_id":47178674,"question_id":38281512,"body_markdown":"i would suggest the following way:\r\n\r\n    @PropertySource(ignoreResourceNotFound = true, value = &quot;classpath:otherprops.properties&quot;)\r\n    @Controller\r\n    public class ClassA {\r\n        @Value(&quot;${myName}&quot;)\r\n        private String name;\r\n\r\n        @RequestMapping(value = &quot;/xyz&quot;)\r\n        @ResponseBody\r\n        public void getName(){\r\n            System.out.println(name);\r\n        }\r\n    }\r\n\r\n\r\nHere your new properties file name is &quot;otherprops.properties&quot; and the property name is &quot;myName&quot;. This is the simplest implementation to access properties file in spring boot version 1.5.8.","title":"How to read data from java properties file using Spring Boot","body":"<p>i would suggest the following way:</p>\n\n<pre><code>@PropertySource(ignoreResourceNotFound = true, value = \"classpath:otherprops.properties\")\n@Controller\npublic class ClassA {\n    @Value(\"${myName}\")\n    private String name;\n\n    @RequestMapping(value = \"/xyz\")\n    @ResponseBody\n    public void getName(){\n        System.out.println(name);\n    }\n}\n</code></pre>\n\n<p>Here your new properties file name is \"otherprops.properties\" and the property name is \"myName\". This is the simplest implementation to access properties file in spring boot version 1.5.8.</p>\n"},{"comments":[{"owner":{"account_id":1042691,"reputation":536,"user_id":1048376,"display_name":"splashout"},"score":0,"creation_date":1677184601,"post_id":52928057,"comment_id":133293330,"body_markdown":"I notice you don&#39;t specify a property file name? Does this just load all *.properties files in the classpath?","body":"I notice you don&#39;t specify a property file name? Does this just load all *.properties files in the classpath?"}],"tags":[],"owner":{"account_id":14391334,"reputation":177,"user_id":10395849,"display_name":"Sunny"},"comment_count":1,"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1540207009,"creation_date":1540207009,"answer_id":52928057,"question_id":38281512,"body_markdown":"I have created following class\r\n\r\nConfigUtility.java\r\n--------------------------------\r\n\r\n    @Configuration\r\n    public class ConfigUtility {\r\n    \r\n        @Autowired\r\n        private Environment env;\r\n    \r\n        public String getProperty(String pPropertyKey) {\r\n            return env.getProperty(pPropertyKey);\r\n        }\r\n    } \r\n\r\nand called as follow to get application.properties value\r\n\r\nmyclass.java\r\n---------------------\r\n\r\n    @Autowired\r\n    private ConfigUtility configUtil;\r\n    \r\n    public AppResponse getDetails() {\r\n    \r\n      AppResponse response = new AppResponse();\r\n       \tString email = configUtil.getProperty(&quot;emailid&quot;);\r\n        return response;    \t\r\n    }\r\n\r\napplication.properties\r\n------------------------------\r\nemailid=sunny@domain.com\r\n\r\nunit tested, working as expected...\r\n\r\n","title":"How to read data from java properties file using Spring Boot","body":"<p>I have created following class</p>\n\n<h2>ConfigUtility.java</h2>\n\n<pre><code>@Configuration\npublic class ConfigUtility {\n\n    @Autowired\n    private Environment env;\n\n    public String getProperty(String pPropertyKey) {\n        return env.getProperty(pPropertyKey);\n    }\n} \n</code></pre>\n\n<p>and called as follow to get application.properties value</p>\n\n<h2>myclass.java</h2>\n\n<pre><code>@Autowired\nprivate ConfigUtility configUtil;\n\npublic AppResponse getDetails() {\n\n  AppResponse response = new AppResponse();\n    String email = configUtil.getProperty(\"emailid\");\n    return response;        \n}\n</code></pre>\n\n<h2>application.properties</h2>\n\n<p>emailid=sunny@domain.com</p>\n\n<p>unit tested, working as expected...</p>\n"},{"tags":[],"owner":{"account_id":28494009,"reputation":77,"user_id":21806227,"display_name":"Ganael D"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683296550,"creation_date":1683296550,"answer_id":76183211,"question_id":38281512,"body_markdown":"For those of you who want to expose every property from either a .properties or .yml file, Spring Boot automatically creates an endpoint that does just that: endpoint `/actuator/env`. It is disabled by default though.\r\nTo enable it, be sure to include `env` in the application property below:\r\n`management.endpoints.web.exposure.include=env`\r\n\r\nYou can then filter the properties that you want to keep in the program that reads the endpoint.","title":"How to read data from java properties file using Spring Boot","body":"<p>For those of you who want to expose every property from either a .properties or .yml file, Spring Boot automatically creates an endpoint that does just that: endpoint <code>/actuator/env</code>. It is disabled by default though.\nTo enable it, be sure to include <code>env</code> in the application property below:\n<code>management.endpoints.web.exposure.include=env</code></p>\n<p>You can then filter the properties that you want to keep in the program that reads the endpoint.</p>\n"}],"owner":{"account_id":3268751,"reputation":1481,"user_id":2752615,"accept_rate":67,"display_name":"Arif Acar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199061,"favorite_count":0,"down_vote_count":1,"up_vote_count":45,"accepted_answer_id":38281734,"answer_count":4,"score":44,"last_activity_date":1683296550,"creation_date":1468065056,"question_id":38281512,"body_markdown":"I have a spring boot application and I want to read some variable from my `application.properties` file. In fact below codes do that. But I think there is a good method for this alternative.\r\n\r\n    Properties prop = new Properties();\r\n\tInputStream input = null;\r\n\r\n\ttry {\r\n\t\tinput = new FileInputStream(&quot;config.properties&quot;);\r\n\t\tprop.load(input);\r\n\t\tgMapReportUrl = prop.getProperty(&quot;gMapReportUrl&quot;);\r\n\t} catch (IOException ex) {\r\n\t\tex.printStackTrace();\r\n\t} finally {\r\n\t\t...\r\n\t}","title":"How to read data from java properties file using Spring Boot","body":"<p>I have a spring boot application and I want to read some variable from my <code>application.properties</code> file. In fact below codes do that. But I think there is a good method for this alternative.</p>\n\n<pre><code>Properties prop = new Properties();\nInputStream input = null;\n\ntry {\n    input = new FileInputStream(\"config.properties\");\n    prop.load(input);\n    gMapReportUrl = prop.getProperty(\"gMapReportUrl\");\n} catch (IOException ex) {\n    ex.printStackTrace();\n} finally {\n    ...\n}\n</code></pre>\n"},{"tags":["java","jenkins","groovy","jenkins-pipeline"],"comments":[{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683211910,"post_id":76174213,"comment_id":134334956,"body_markdown":"Could you please update the question, providing the expected result and what you get with your implementation? For me your code works ok, I&#39;m not sure I understand what exactly is &quot;not correct&quot;?","body":"Could you please update the question, providing the expected result and what you get with your implementation? For me your code works ok, I&#39;m not sure I understand what exactly is &quot;not correct&quot;?"},{"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"score":0,"creation_date":1683228308,"post_id":76174213,"comment_id":134338806,"body_markdown":"I have added the output in the question. It would be great if you could help.","body":"I have added the output in the question. It would be great if you could help."},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683249596,"post_id":76174213,"comment_id":134341790,"body_markdown":"I do not think it is the output of the code. How comes that the data(apiVersion, kind) is completely different? Please post the real output of the code that you posted.","body":"I do not think it is the output of the code. How comes that the data(apiVersion, kind) is completely different? Please post the real output of the code that you posted."},{"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"score":0,"creation_date":1683288913,"post_id":76174213,"comment_id":134347659,"body_markdown":"it&#39;s a sample output  just to show what type of ouput I&#39;m getting. I can&#39;t share real code here ..so added sample output","body":"it&#39;s a sample output  just to show what type of ouput I&#39;m getting. I can&#39;t share real code here ..so added sample output"},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683292941,"post_id":76174213,"comment_id":134348634,"body_markdown":"The problem is that you share the code that works correctly and you show the incorrect output without code... how people suppose to guess where the problem is? :) Please provide a minimal reproducible example: https://stackoverflow.com/help/minimal-reproducible-example","body":"The problem is that you share the code that works correctly and you show the incorrect output without code... how people suppose to guess where the problem is? :) Please provide a minimal reproducible example: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"},{"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"score":0,"creation_date":1683296536,"post_id":76174213,"comment_id":134349633,"body_markdown":"I have updated the output that I got by running this code.","body":"I have updated the output that I got by running this code."},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683347986,"post_id":76174213,"comment_id":134356787,"body_markdown":"Really strange. Your code produces different result for me. What is your OS, Java version. Groovy version? Could you also replace last two lines of your code with &quot;println builder.toString()&quot;? Let&#39;s at least see what Groovy itself is producing, before writing to the file.","body":"Really strange. Your code produces different result for me. What is your OS, Java version. Groovy version? Could you also replace last two lines of your code with &quot;println builder.toString()&quot;? Let&#39;s at least see what Groovy itself is producing, before writing to the file."},{"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"score":1,"creation_date":1683435478,"post_id":76174213,"comment_id":134364885,"body_markdown":"I have already done it. the println prints valid yaml. but when I write it to the file and read it that&#39;s when I receive this weird response. OS is Linux, Groovy is 4 and Java is 17.","body":"I have already done it. the println prints valid yaml. but when I write it to the file and read it that&#39;s when I receive this weird response. OS is Linux, Groovy is 4 and Java is 17."},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683435750,"post_id":76174213,"comment_id":134364895,"body_markdown":"ok, couple of more questions: a) have you opened the file with nano, what is inside? b) &quot;and read it&quot; how do you read the file?","body":"ok, couple of more questions: a) have you opened the file with nano, what is inside? b) &quot;and read it&quot; how do you read the file?"}],"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683296503,"creation_date":1683209851,"question_id":76174213,"body_markdown":"I&#39;m trying to write a large yaml string to a yaml file using groovy. I&#39;m able to create the new file but the content inside the file is not correct. it contains some extra brackets and the yaml after builder in the yaml file. is there a way to fix this? \r\n\r\n```\r\nimport groovy.yaml.YamlBuilder\r\n\r\ndef builder = new YamlBuilder()\r\n\r\nbuilder.yaml {\r\n    apiVersion &#39;apps/v1&#39;\r\n    kind &#39;Deployment&#39;\r\n    metadata {\r\n        name &#39;weblogic-testapp&#39;\r\n        namespace &#39;app&#39;\r\n        labels {\r\n            app &#39;weblogic&#39;\r\n        }\r\n    }\r\n}\r\ndef output = builder.toString()\r\nnew File(&#39;deployment.yaml&#39;).write(output)\r\n```\r\nthis is the output I get. it includes the yaml with curly brackets.  \r\n\r\n```\r\n{yaml={apiVersion=apps/v1, kind=Deployment, metadata={name=weblogic-testapp, namespace=app, labels={app=weblogic}}}}\r\n```","title":"groovy file writer not able to keep format for large string","body":"<p>I'm trying to write a large yaml string to a yaml file using groovy. I'm able to create the new file but the content inside the file is not correct. it contains some extra brackets and the yaml after builder in the yaml file. is there a way to fix this?</p>\n<pre><code>import groovy.yaml.YamlBuilder\n\ndef builder = new YamlBuilder()\n\nbuilder.yaml {\n    apiVersion 'apps/v1'\n    kind 'Deployment'\n    metadata {\n        name 'weblogic-testapp'\n        namespace 'app'\n        labels {\n            app 'weblogic'\n        }\n    }\n}\ndef output = builder.toString()\nnew File('deployment.yaml').write(output)\n</code></pre>\n<p>this is the output I get. it includes the yaml with curly brackets.</p>\n<pre><code>{yaml={apiVersion=apps/v1, kind=Deployment, metadata={name=weblogic-testapp, namespace=app, labels={app=weblogic}}}}\n</code></pre>\n"},{"tags":["java","spring","controller"],"comments":[{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1683204002,"post_id":76173167,"comment_id":134332658,"body_markdown":"I think you should have not Map, but list of configurations. So you need to create class Configuration with 2 fields type and path. And try to inject values from properties file into List&lt;Configuration&gt;","body":"I think you should have not Map, but list of configurations. So you need to create class Configuration with 2 fields type and path. And try to inject values from properties file into List&lt;Configuration&gt;"},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1683204301,"post_id":76173167,"comment_id":134332755,"body_markdown":"I believe you can make a map directly from the cconfigurations by structuring the yaml differently.. Use the value of the type and the value of the path directly instead of specifying `type: ...` and `value: ...`. So under `configurations:` a line could be `a: AAA`. See https://www.baeldung.com/spring-yaml-inject-map","body":"I believe you can make a map directly from the cconfigurations by structuring the yaml differently.. Use the value of the type and the value of the path directly instead of specifying <code>type: ...</code> and <code>value: ...</code>. So under <code>configurations:</code> a line could be <code>a: AAA</code>. See <a href=\"https://www.baeldung.com/spring-yaml-inject-map\" rel=\"nofollow noreferrer\">baeldung.com/spring-yaml-inject-map</a>"},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1683205124,"post_id":76173167,"comment_id":134333005,"body_markdown":"Update: I tested this, and it seems like it only works for propery-classes marked with `@ConfigurationProperties`, not directly with `@Value`. Refer to Ganael D&#39;s answer for a working case.","body":"Update: I tested this, and it seems like it only works for propery-classes marked with <code>@ConfigurationProperties</code>, not directly with <code>@Value</code>. Refer to Ganael D&#39;s answer for a working case."}],"answers":[{"tags":[],"owner":{"account_id":28494009,"reputation":77,"user_id":21806227,"display_name":"Ganael D"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683272882,"creation_date":1683204546,"answer_id":76173389,"question_id":76173167,"body_markdown":"I faced a similar problem not too long ago. What I did was using a second config class and annotating it with a few Spring Boot annotations. You can create the following class:\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Configuration\r\n@EnableConfigurationProperties\r\n@ConfigurationProperties(prefix = &quot;bandwidth&quot;)\r\npublic class Config {\r\n\r\n    private List&lt;Map&lt;String, String&gt;&gt; configurations;\r\n\r\n}\r\n```\r\nWhat it&#39;s gonna do is create a class that will look for the `configurations` property of the property you&#39;ll have given in the prefix parameter of @ConfigurationProperties in the application.yml file and store it in an attribute. This class needs a getter and a setter for this attribute, which are created here thanks to `@Getter` and `@Setter`.\r\n\r\nYou could then get the config in your Controller simply by providing it as an autowired `Config` attribute:\r\n\r\n```\r\n@Autowired\r\nprivate Config config;\r\n\r\n@GetMapping(&quot;/config&quot;)\r\n@ResponseBody(produces = {MediaType.APPLICATION_JSON_VALUE})\r\n    public List&lt;Map&lt;String,String&gt;&gt; getListOfPath() {\r\n        return this.config.getConfigurations();\r\n    }\r\n```\r\n\r\n\r\n&lt;hr&gt;\r\n\r\n&lt;i&gt;Please note&lt;/i&gt; that if your config properties contain `-`, you&#39;re gonna have to store that in a list. While it makes sense to do that with your configuration objects, it seems inappropriate for the property `configurations`. I would change your configuration file to:\r\n\r\n```\r\nbandwidth:\r\n    configurations:\r\n        - type: a\r\n          path: AAA\r\n        - type: e\r\n          path: TTT\r\n        - type: I\r\n          path: FFF\r\n        - type: o\r\n          path: XXX\r\n```\r\n\r\nIf you don&#39;t remove the `-` in front of configurations, you&#39;re gonna need to tweak my solution to take that into account.","title":"Spring controller returns a list of values from application configuration file","body":"<p>I faced a similar problem not too long ago. What I did was using a second config class and annotating it with a few Spring Boot annotations. You can create the following class:</p>\n<pre><code>@Getter\n@Setter\n@Configuration\n@EnableConfigurationProperties\n@ConfigurationProperties(prefix = &quot;bandwidth&quot;)\npublic class Config {\n\n    private List&lt;Map&lt;String, String&gt;&gt; configurations;\n\n}\n</code></pre>\n<p>What it's gonna do is create a class that will look for the <code>configurations</code> property of the property you'll have given in the prefix parameter of @ConfigurationProperties in the application.yml file and store it in an attribute. This class needs a getter and a setter for this attribute, which are created here thanks to <code>@Getter</code> and <code>@Setter</code>.</p>\n<p>You could then get the config in your Controller simply by providing it as an autowired <code>Config</code> attribute:</p>\n<pre><code>@Autowired\nprivate Config config;\n\n@GetMapping(&quot;/config&quot;)\n@ResponseBody(produces = {MediaType.APPLICATION_JSON_VALUE})\n    public List&lt;Map&lt;String,String&gt;&gt; getListOfPath() {\n        return this.config.getConfigurations();\n    }\n</code></pre>\n<hr>\n<p><i>Please note</i> that if your config properties contain <code>-</code>, you're gonna have to store that in a list. While it makes sense to do that with your configuration objects, it seems inappropriate for the property <code>configurations</code>. I would change your configuration file to:</p>\n<pre><code>bandwidth:\n    configurations:\n        - type: a\n          path: AAA\n        - type: e\n          path: TTT\n        - type: I\n          path: FFF\n        - type: o\n          path: XXX\n</code></pre>\n<p>If you don't remove the <code>-</code> in front of configurations, you're gonna need to tweak my solution to take that into account.</p>\n"},{"tags":[],"owner":{"account_id":3674719,"reputation":520,"user_id":3061062,"display_name":"NicoESIEA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683296451,"creation_date":1683296451,"answer_id":76183186,"question_id":76173167,"body_markdown":"Thank you very much @Ganael D&lt;br/&gt;\r\nThe solution I did is pretty similar but a bit longer than yours:&lt;br/&gt;\r\n\r\n - The class where I have &quot;public static void main&quot; method I added &quot;@EnableConfigurationProperties({ApplicationProperties.class})&quot;\r\n - Where &quot;ApplicationProperties&quot; is a new class where I added &quot;@ConfigurationProperties(prefix = &quot;application&quot;)&quot;\r\n - In my configuration file, I just added this &quot;application&quot; on the top of my list like:\r\n```\r\n    application:\r\n       stuff:\r\n         disks:\r\n            - name: &quot;aa&quot;\r\n              path: &quot;XXX&quot;\r\n            - name: &quot;bb&quot;\r\n              path: &quot;ZZZ&quot;\r\n```\r\n - and &quot;ApplicationProperties&quot; class matches the content of my application object (here it has an attribute stuff, having a list of {name, path} object in an array named disks\r\n\r\nAnd it is working fine.&lt;br/&gt;\r\nThank you very much for the time you spent helping me :)","title":"Spring controller returns a list of values from application configuration file","body":"<p>Thank you very much @Ganael D<br/>\nThe solution I did is pretty similar but a bit longer than yours:<br/></p>\n<ul>\n<li>The class where I have &quot;public static void main&quot; method I added &quot;@EnableConfigurationProperties({ApplicationProperties.class})&quot;</li>\n<li>Where &quot;ApplicationProperties&quot; is a new class where I added &quot;@ConfigurationProperties(prefix = &quot;application&quot;)&quot;</li>\n<li>In my configuration file, I just added this &quot;application&quot; on the top of my list like:</li>\n</ul>\n<pre><code>    application:\n       stuff:\n         disks:\n            - name: &quot;aa&quot;\n              path: &quot;XXX&quot;\n            - name: &quot;bb&quot;\n              path: &quot;ZZZ&quot;\n</code></pre>\n<ul>\n<li>and &quot;ApplicationProperties&quot; class matches the content of my application object (here it has an attribute stuff, having a list of {name, path} object in an array named disks</li>\n</ul>\n<p>And it is working fine.<br/>\nThank you very much for the time you spent helping me :)</p>\n"}],"owner":{"account_id":3674719,"reputation":520,"user_id":3061062,"display_name":"NicoESIEA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76173389,"answer_count":2,"score":0,"last_activity_date":1683296451,"creation_date":1683203197,"question_id":76173167,"body_markdown":"My problem seems very simple, but I&#39;m blocked on it for 2 hours.\r\nI&#39;m using Java with Spring and I want to save a map of string information (key, value) in the application.yaml file. \r\nThen I want to return it from a controller exposed to a frontend application.\r\n\r\nMy first solution was to use this structure in the configuration file:\r\n```\r\nbandwidth:\r\n  - configurations:\r\n    - type: a\r\n      path: AAA\r\n    - type: e\r\n      path: TTT\r\n    - type: I\r\n      path: FFF\r\n    - type: o\r\n      path: XXX\r\n````\r\n\r\nAnd to create a constructor like:\r\n````\r\nimport ...\r\n\r\n@RestController\r\n@RequestMapping(&quot;/bandwidth&quot;)\r\npublic class BandwidthController {\r\n\r\n    @Value(&quot;${bandwidth.configurations}&quot;)\r\n    private Map&lt;String,String&gt; configurations;\r\n\r\n    @GetMapping(&quot;/config&quot;)\r\n    public Map&lt;String,String&gt; getListOfPath() {\r\n        return this.configurations;\r\n    }\r\n}\r\n````\r\n\r\nDoes someone can give me a working example of a solution for this case?\r\n","title":"Spring controller returns a list of values from application configuration file","body":"<p>My problem seems very simple, but I'm blocked on it for 2 hours.\nI'm using Java with Spring and I want to save a map of string information (key, value) in the application.yaml file.\nThen I want to return it from a controller exposed to a frontend application.</p>\n<p>My first solution was to use this structure in the configuration file:</p>\n<pre><code>bandwidth:\n  - configurations:\n    - type: a\n      path: AAA\n    - type: e\n      path: TTT\n    - type: I\n      path: FFF\n    - type: o\n      path: XXX\n</code></pre>\n<p>And to create a constructor like:</p>\n<pre><code>import ...\n\n@RestController\n@RequestMapping(&quot;/bandwidth&quot;)\npublic class BandwidthController {\n\n    @Value(&quot;${bandwidth.configurations}&quot;)\n    private Map&lt;String,String&gt; configurations;\n\n    @GetMapping(&quot;/config&quot;)\n    public Map&lt;String,String&gt; getListOfPath() {\n        return this.configurations;\n    }\n}\n</code></pre>\n<p>Does someone can give me a working example of a solution for this case?</p>\n"},{"tags":["java","sockets","arraylist"],"answers":[{"comments":[{"owner":{"account_id":16298740,"reputation":131,"user_id":11770369,"display_name":"Hugo Chittaro"},"score":0,"creation_date":1683300370,"post_id":76183168,"comment_id":134350717,"body_markdown":"I didn&#39;t change anything, the size of the receive array on client side is still 0. I checked my Message class, my packet class and all are Serializable. I wonder if an Arraylist of custom object can behave strangely when it is serialize.","body":"I didn&#39;t change anything, the size of the receive array on client side is still 0. I checked my Message class, my packet class and all are Serializable. I wonder if an Arraylist of custom object can behave strangely when it is serialize."},{"owner":{"account_id":16298740,"reputation":131,"user_id":11770369,"display_name":"Hugo Chittaro"},"score":0,"creation_date":1683552876,"post_id":76183168,"comment_id":134379902,"body_markdown":"you&#39;re answer was partially correct, the reference to the messageGlobalStorage needed to be updated with dout.rese()t, I just needed to do it before writing to the ObjectOuputStream.","body":"you&#39;re answer was partially correct, the reference to the messageGlobalStorage needed to be updated with dout.rese()t, I just needed to do it before writing to the ObjectOuputStream."}],"tags":[],"owner":{"account_id":10720235,"reputation":30,"user_id":7889573,"display_name":"Rabia Yurdakul"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683296324,"creation_date":1683296324,"answer_id":76183168,"question_id":76182989,"body_markdown":"I think, you can modify the broadcast method to use a single ObjectOutputStream instance to write to the socket instead of using separate instances for each client. By creating the Packet object outside of the loop and using a single dout instance to write to the socket, you can ensure that all clients receive the updated messageGlobalStorage list. \r\nCould you try this? \r\n\r\n    void broadcast() throws IOException {\r\n        Packet packet = new Packet(Packet.Commands.TCGETMSG,messageGlobalStorage);\r\n        for (ObjectOutputStream dout : userOnlineMap.values()) {\r\n            dout.writeObject(packet);\r\n            dout.reset();\r\n        }\r\n    }\r\n\r\n","title":"Java arrayList empty after going over a socket","body":"<p>I think, you can modify the broadcast method to use a single ObjectOutputStream instance to write to the socket instead of using separate instances for each client. By creating the Packet object outside of the loop and using a single dout instance to write to the socket, you can ensure that all clients receive the updated messageGlobalStorage list.\nCould you try this?</p>\n<pre><code>void broadcast() throws IOException {\n    Packet packet = new Packet(Packet.Commands.TCGETMSG,messageGlobalStorage);\n    for (ObjectOutputStream dout : userOnlineMap.values()) {\n        dout.writeObject(packet);\n        dout.reset();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16298740,"reputation":131,"user_id":11770369,"display_name":"Hugo Chittaro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76183168,"answer_count":1,"score":0,"last_activity_date":1683296324,"creation_date":1683295114,"question_id":76182989,"body_markdown":"I&#39;ve been working on a chat application using a java.io socket. \r\n\r\nContext : A client sends a Message object encapsulated in a Packet object over a socket. Once the server retrieves the Packet, it broadcast an Arraylist containing all Message to a client.\r\n\r\nMy problem is that on the server side (before sending over the socket), the payload of the packet is as intended (an Arraylist with messages the client send), and when receive by a client (after the socket), the Arraylist of messages is empty (the debugger tells me that the arraylist has a size = 0 and I can&#39;t retrieve any message). I didn&#39;t find anything online about this and the debugger didn&#39;t help me much.\r\n\r\nHere is the code used (The packet class containts command specifying if it&#39;s To Client (TC) or From Client(FC)) :\r\n\r\nClient side :\r\n\r\n```\r\npublic void run(){\r\n    try {\r\n        while(true){\r\n            packet = (Packet) streamFromServer.readObject();\r\n            switch (packet.command){\r\n                case TCGETMSG:\r\n                    messageGlobalStorage = (ArrayList&lt;Message&gt;)packet.payload;\r\n                    break;\r\n                case TCGETUSERS:\r\n                    usersOnline = (DefaultListModel&lt;User&gt;) packet.payload;\r\n                    break;\r\n                case TCGETSTATS:\r\n                    System.out.println(&quot;Getting stats&quot;);\r\n                    break;\r\n                default:\r\n                    //Add undefined packet handling\r\n                    break;\r\n            }\r\n        }\r\n    }catch (IOException | ClassNotFoundException e){\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic boolean sendMessage(Message message) {\r\n    try {\r\n        streamToServer.writeObject(new Packet(Packet.Commands.FCSENDMSG, message));\r\n        return true;\r\n    }catch (IOException e) {\r\n         e.printStackTrace();\r\n    }\r\n    return false;\r\n} \r\n```\r\n\r\nServer side :\r\n```\r\nprivate void threadRoutine() throws IOException, ClassNotFoundException{\r\n    try {\r\n        //Receiving from the client =&gt; Inverse logic : SENDMSG = retreive message; \r\n        //GETMSG = broadcast message to client\r\n        while (true){\r\n            Packet packet = (Packet) din.readObject();\r\n            switch (packet.command){\r\n                case FCSENDMSG:\r\n                    server.messageGlobalStorage.add((Message) packet.payload);\r\n                    server.broadcast((Message) packet.payload);\r\n                    break;\r\n                case FCGETMSG:\r\n                    Packet temp = new Packet(Packet.Commands.TCGETMSG, server.messageGlobalStorage);\r\n                    dout.writeObject(temp);\r\n                    break;\r\n                case FCGETUSERS:\r\n                    dout.writeObject(new Packet(Packet.Commands.TCGETUSERS, server.userOnlineMap.keySet()));\r\n                    break;\r\n                case FCGETSTATS:\r\n                    //Add Stats handling\r\n                    break;\r\n                default:\r\n                    //Add undefined packet handling\r\n                    break;\r\n           }\r\n      }\r\n    }finally {\r\n        server.removeConnection(socket);\r\n        System.out.println(&quot;Removing connection&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\nvoid broadcast() throws IOException{\r\n    for (ObjectOutputStream dout : userOnlineMap.values()){\r\n        dout.writeObject(new Packet(Packet.Commands.TCGETMSG, messageGlobalStorage));\r\n    }\r\n}\r\n```\r\n\r\nIf the code of the Packet / Message class is needed, tell me I&#39;ll add it to this post. \r\n\r\nThank you.\r\n","title":"Java arrayList empty after going over a socket","body":"<p>I've been working on a chat application using a java.io socket.</p>\n<p>Context : A client sends a Message object encapsulated in a Packet object over a socket. Once the server retrieves the Packet, it broadcast an Arraylist containing all Message to a client.</p>\n<p>My problem is that on the server side (before sending over the socket), the payload of the packet is as intended (an Arraylist with messages the client send), and when receive by a client (after the socket), the Arraylist of messages is empty (the debugger tells me that the arraylist has a size = 0 and I can't retrieve any message). I didn't find anything online about this and the debugger didn't help me much.</p>\n<p>Here is the code used (The packet class containts command specifying if it's To Client (TC) or From Client(FC)) :</p>\n<p>Client side :</p>\n<pre><code>public void run(){\n    try {\n        while(true){\n            packet = (Packet) streamFromServer.readObject();\n            switch (packet.command){\n                case TCGETMSG:\n                    messageGlobalStorage = (ArrayList&lt;Message&gt;)packet.payload;\n                    break;\n                case TCGETUSERS:\n                    usersOnline = (DefaultListModel&lt;User&gt;) packet.payload;\n                    break;\n                case TCGETSTATS:\n                    System.out.println(&quot;Getting stats&quot;);\n                    break;\n                default:\n                    //Add undefined packet handling\n                    break;\n            }\n        }\n    }catch (IOException | ClassNotFoundException e){\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<pre><code>public boolean sendMessage(Message message) {\n    try {\n        streamToServer.writeObject(new Packet(Packet.Commands.FCSENDMSG, message));\n        return true;\n    }catch (IOException e) {\n         e.printStackTrace();\n    }\n    return false;\n} \n</code></pre>\n<p>Server side :</p>\n<pre><code>private void threadRoutine() throws IOException, ClassNotFoundException{\n    try {\n        //Receiving from the client =&gt; Inverse logic : SENDMSG = retreive message; \n        //GETMSG = broadcast message to client\n        while (true){\n            Packet packet = (Packet) din.readObject();\n            switch (packet.command){\n                case FCSENDMSG:\n                    server.messageGlobalStorage.add((Message) packet.payload);\n                    server.broadcast((Message) packet.payload);\n                    break;\n                case FCGETMSG:\n                    Packet temp = new Packet(Packet.Commands.TCGETMSG, server.messageGlobalStorage);\n                    dout.writeObject(temp);\n                    break;\n                case FCGETUSERS:\n                    dout.writeObject(new Packet(Packet.Commands.TCGETUSERS, server.userOnlineMap.keySet()));\n                    break;\n                case FCGETSTATS:\n                    //Add Stats handling\n                    break;\n                default:\n                    //Add undefined packet handling\n                    break;\n           }\n      }\n    }finally {\n        server.removeConnection(socket);\n        System.out.println(&quot;Removing connection&quot;);\n    }\n}\n</code></pre>\n<pre><code>void broadcast() throws IOException{\n    for (ObjectOutputStream dout : userOnlineMap.values()){\n        dout.writeObject(new Packet(Packet.Commands.TCGETMSG, messageGlobalStorage));\n    }\n}\n</code></pre>\n<p>If the code of the Packet / Message class is needed, tell me I'll add it to this post.</p>\n<p>Thank you.</p>\n"},{"tags":["java","log4j2","maven-shade-plugin"],"comments":[{"owner":{"account_id":12482065,"reputation":7327,"user_id":9086466,"display_name":"Ctznkane525"},"score":1,"creation_date":1514636247,"post_id":48033792,"comment_id":83037672,"body_markdown":"you want to ask a question here.  I see an error, but no question.","body":"you want to ask a question here.  I see an error, but no question."},{"owner":{"account_id":3333882,"reputation":769,"user_id":2802069,"display_name":"CoderMeng"},"score":1,"creation_date":1514640858,"post_id":48033792,"comment_id":83038731,"body_markdown":"i want to know how to solve this error","body":"i want to know how to solve this error"},{"owner":{"account_id":313216,"reputation":44997,"user_id":627727,"accept_rate":84,"display_name":"mkobit"},"score":1,"creation_date":1551299323,"post_id":48033792,"comment_id":96594234,"body_markdown":"With Java 11, we&#39;ve ran into similar problems due to the locale - see https://issues.apache.org/jira/browse/LOG4J2-2435","body":"With Java 11, we&#39;ve ran into similar problems due to the locale - see <a href=\"https://issues.apache.org/jira/browse/LOG4J2-2435\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/LOG4J2-2435</a>"}],"answers":[{"comments":[{"owner":{"account_id":3333882,"reputation":769,"user_id":2802069,"display_name":"CoderMeng"},"score":1,"creation_date":1514685967,"post_id":48038902,"comment_id":83049184,"body_markdown":"I checked maven package log, it&#39;s only have Log4j2 version.","body":"I checked maven package log, it&#39;s only have Log4j2 version."},{"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"score":1,"creation_date":1514691516,"post_id":48038902,"comment_id":83049978,"body_markdown":"Please make sure by printing the value of system property `java.classpath` from your application. It could be a transient dependency or some other configuration.","body":"Please make sure by printing the value of system property <code>java.classpath</code> from your application. It could be a transient dependency or some other configuration."}],"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1514678458,"creation_date":1514678458,"answer_id":48038902,"question_id":48033792,"body_markdown":"I’ve seen this error before when people had multiple versions of Log4j2 on the classpath. ","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>I’ve seen this error before when people had multiple versions of Log4j2 on the classpath. </p>\n"},{"comments":[{"owner":{"account_id":2128115,"reputation":297,"user_id":1889679,"display_name":"Bertware"},"score":6,"creation_date":1542205660,"post_id":52923153,"comment_id":93485590,"body_markdown":"Adding this configuration to the maven-shade-plugin entry in pom.xml solved this issue for me","body":"Adding this configuration to the maven-shade-plugin entry in pom.xml solved this issue for me"},{"owner":{"account_id":106093,"reputation":1334,"user_id":282771,"accept_rate":67,"display_name":"MaX"},"score":0,"creation_date":1631888070,"post_id":52923153,"comment_id":122352872,"body_markdown":"For Gradle look at the comment below","body":"For Gradle look at the comment below"},{"owner":{"account_id":8850634,"reputation":90,"user_id":6610032,"display_name":"Suchita"},"score":1,"creation_date":1660906967,"post_id":52923153,"comment_id":129649882,"body_markdown":"how to fix this in scala?","body":"how to fix this in scala?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1675996442,"post_id":52923153,"comment_id":133052850,"body_markdown":"Hello, none of the above mentioned solutions solved the issue for me. The only thing that helped was to not minimize the UBER jar","body":"Hello, none of the above mentioned solutions solved the issue for me. The only thing that helped was to not minimize the UBER jar"},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":1,"creation_date":1685999780,"post_id":52923153,"comment_id":134736773,"body_markdown":"Adding the `Log4j2PluginCacheFileTransformer` fixed the problem for me. Note that the plugin has just recently been donated to the Apache Software Foundation, so the most recent is the [Log4j Plugin Cache Transformer](https://github.com/apache/logging-log4j-transform/tree/main/log4j-transform-maven-shade-plugin-extensions) on the Apache GitHub site. That page has example code.","body":"Adding the <code>Log4j2PluginCacheFileTransformer</code> fixed the problem for me. Note that the plugin has just recently been donated to the Apache Software Foundation, so the most recent is the <a href=\"https://github.com/apache/logging-log4j-transform/tree/main/log4j-transform-maven-shade-plugin-extensions\" rel=\"nofollow noreferrer\">Log4j Plugin Cache Transformer</a> on the Apache GitHub site. That page has example code."}],"tags":[],"owner":{"account_id":1466418,"reputation":1141,"user_id":1379107,"display_name":"Shashank Kapoor"},"comment_count":5,"down_vote_count":0,"up_vote_count":97,"is_accepted":false,"score":97,"last_activity_date":1683295751,"creation_date":1540187904,"answer_id":52923153,"question_id":48033792,"body_markdown":"If a dependency contains log4j2 plugin, a `Log4j2Plugins.dat` cache file is included in the jar. When the Maven shade plugin is used to merge multiple jars with a `Log4j2Plugins.dat` file, only one will survive. Without the plugin definitions, errors are shown on startup. [Log4j2 issue](https://issues.apache.org/jira/browse/LOG4J2-673)\r\n\r\nOne solution for this is excluding `Log4j2Plugins.dat` cache file from shaded jar so that Log4j scans for plugins on startup. For this, add a filter in `maven-shade-plugin` configuration in your pom:\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.1.0&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n    &lt;filters&gt;\r\n      &lt;filter&gt;\r\n        &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n        &lt;excludes&gt;\r\n          &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\r\n        &lt;/excludes&gt;\r\n      &lt;/filter&gt;\r\n    &lt;/filters&gt;\r\n  &lt;/configuration&gt;\r\n  &lt;!-- ... --&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nAnother solution is to merge the cache files using a [transformation plugin](https://github.com/edwgiz/maven-shaded-log4j-transformer) which is log4j version specific.\r\n","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>If a dependency contains log4j2 plugin, a <code>Log4j2Plugins.dat</code> cache file is included in the jar. When the Maven shade plugin is used to merge multiple jars with a <code>Log4j2Plugins.dat</code> file, only one will survive. Without the plugin definitions, errors are shown on startup. <a href=\"https://issues.apache.org/jira/browse/LOG4J2-673\" rel=\"noreferrer\">Log4j2 issue</a></p>\n<p>One solution for this is excluding <code>Log4j2Plugins.dat</code> cache file from shaded jar so that Log4j scans for plugins on startup. For this, add a filter in <code>maven-shade-plugin</code> configuration in your pom:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.1.0&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n    &lt;filters&gt;\n      &lt;filter&gt;\n        &lt;artifact&gt;*:*&lt;/artifact&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\n        &lt;/excludes&gt;\n      &lt;/filter&gt;\n    &lt;/filters&gt;\n  &lt;/configuration&gt;\n  &lt;!-- ... --&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Another solution is to merge the cache files using a <a href=\"https://github.com/edwgiz/maven-shaded-log4j-transformer\" rel=\"noreferrer\">transformation plugin</a> which is log4j version specific.</p>\n"},{"comments":[{"owner":{"account_id":49071,"reputation":8690,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"score":0,"creation_date":1652897879,"post_id":61418220,"comment_id":127721033,"body_markdown":"Though this prevents the errors about the format, now the application wont start: Exception in thread &quot;main&quot; java.util.ServiceConfigurationError: java.nio.file.spi.FileSystemProvider: Provider org.apache.sshd.sftp.client.fs.SftpFileSystemProvider not found","body":"Though this prevents the errors about the format, now the application wont start: Exception in thread &quot;main&quot; java.util.ServiceConfigurationError: java.nio.file.spi.FileSystemProvider: Provider org.apache.sshd.sftp.client.fs.SftpFileSystemProvider not found"},{"owner":{"account_id":49071,"reputation":8690,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"score":0,"creation_date":1652902292,"post_id":61418220,"comment_id":127722526,"body_markdown":"Not sure if it&#39;s related to the original problem but I was able to get past the SftpFileSystemProvider error by excluding its manifest from the shadowJar: exclude(&quot;META-INF/services/java.nio.file.spi.FileSystemProvider&quot;)","body":"Not sure if it&#39;s related to the original problem but I was able to get past the SftpFileSystemProvider error by excluding its manifest from the shadowJar: exclude(&quot;META-INF/services/java.nio.file.spi.FileSystemProvi&zwnj;&#8203;der&quot;)"}],"tags":[],"owner":{"account_id":3725646,"reputation":191,"user_id":3099619,"display_name":"philuX"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1587766299,"creation_date":1587766299,"answer_id":61418220,"question_id":48033792,"body_markdown":"\r\nUnfortunately, I can&#39;t reply to Shashank Kapoor answer, as he correctly pointed out excluding the `Log4j2Plugins.dat` file solves the issue. This did the trick for me while using gradle:\r\n\r\n```\r\nshadowJar {\r\n    exclude &quot;**/Log4j2Plugins.dat&quot;\r\n}\r\n```\r\n ","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>Unfortunately, I can't reply to Shashank Kapoor answer, as he correctly pointed out excluding the <code>Log4j2Plugins.dat</code> file solves the issue. This did the trick for me while using gradle:</p>\n\n<pre><code>shadowJar {\n    exclude \"**/Log4j2Plugins.dat\"\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":106093,"reputation":1334,"user_id":282771,"accept_rate":67,"display_name":"MaX"},"score":1,"creation_date":1631887924,"post_id":61475766,"comment_id":122352805,"body_markdown":"This just worked for me! Thanks!","body":"This just worked for me! Thanks!"}],"tags":[],"owner":{"account_id":1440651,"reputation":2387,"user_id":1360907,"accept_rate":50,"display_name":"Chris Xue"},"comment_count":1,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1683295947,"creation_date":1588062216,"answer_id":61475766,"question_id":48033792,"body_markdown":"If you are using Gradle and ShadowJar 4+:\r\n\r\n```groovy\r\nshadowJar {\r\n  transform(com.github.jengelman.gradle.plugins.shadow.transformers.Log4j2PluginsCacheFileTransformer)\r\n}\r\n```\r\n\r\nGradle Kotlin DSL:\r\n\r\n```groovy\r\nshadowJar {\r\n  transform(com.github.jengelman.gradle.plugins.shadow.transformers.Log4j2PluginsCacheFileTransformer::class.java)\r\n}\r\n```","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>If you are using Gradle and ShadowJar 4+:</p>\n<pre><code>shadowJar {\n  transform(com.github.jengelman.gradle.plugins.shadow.transformers.Log4j2PluginsCacheFileTransformer)\n}\n</code></pre>\n<p>Gradle Kotlin DSL:</p>\n<pre><code>shadowJar {\n  transform(com.github.jengelman.gradle.plugins.shadow.transformers.Log4j2PluginsCacheFileTransformer::class.java)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1641397520,"creation_date":1640619677,"answer_id":70497559,"question_id":48033792,"body_markdown":"For those of us who are removing the older Logj42 from our classpaths to remediate the Log4Shell (CVE-2021-44228) vulnerability, you may find you have this issue when using your uber jars after you upgrade. \r\n\r\nIf you are building your uber jars from Maven or Gradle, use one of the plugins respectively: \r\n\r\n* Maven: https://maven.apache.org/plugins/maven-shade-plugin/ with https://github.com/edwgiz/maven-shaded-log4j-transformer\r\n* Gradle: https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow\r\n\r\nif you are building them by some other means, see this answer: https://stackoverflow.com/a/70497498/1174024. But basically you have to properly handle Log4j2 plugin cache files as this class does:\r\n\r\nhttps://github.com/edwgiz/maven-shaded-log4j-transformer/blob/master/src/main/java/io/github/edwgiz/log4j/maven/plugins/shade/transformer/Log4j2PluginCacheFileTransformer.java\r\n\r\nto properly handle the `Log4j2Plugins.dat` file when building the new uber jar.","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>For those of us who are removing the older Logj42 from our classpaths to remediate the Log4Shell (CVE-2021-44228) vulnerability, you may find you have this issue when using your uber jars after you upgrade.</p>\n<p>If you are building your uber jars from Maven or Gradle, use one of the plugins respectively:</p>\n<ul>\n<li>Maven: <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-shade-plugin/</a> with <a href=\"https://github.com/edwgiz/maven-shaded-log4j-transformer\" rel=\"nofollow noreferrer\">https://github.com/edwgiz/maven-shaded-log4j-transformer</a></li>\n<li>Gradle: <a href=\"https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow\" rel=\"nofollow noreferrer\">https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow</a></li>\n</ul>\n<p>if you are building them by some other means, see this answer: <a href=\"https://stackoverflow.com/a/70497498/1174024\">https://stackoverflow.com/a/70497498/1174024</a>. But basically you have to properly handle Log4j2 plugin cache files as this class does:</p>\n<p><a href=\"https://github.com/edwgiz/maven-shaded-log4j-transformer/blob/master/src/main/java/io/github/edwgiz/log4j/maven/plugins/shade/transformer/Log4j2PluginCacheFileTransformer.java\" rel=\"nofollow noreferrer\">https://github.com/edwgiz/maven-shaded-log4j-transformer/blob/master/src/main/java/io/github/edwgiz/log4j/maven/plugins/shade/transformer/Log4j2PluginCacheFileTransformer.java</a></p>\n<p>to properly handle the <code>Log4j2Plugins.dat</code> file when building the new uber jar.</p>\n"},{"tags":[],"owner":{"account_id":67666,"reputation":4579,"user_id":197896,"accept_rate":77,"display_name":"anhldbk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667919510,"creation_date":1667919510,"answer_id":74362813,"question_id":48033792,"body_markdown":"This [link][1] works for me. There&#39;s a problem while shading log4j \r\n\r\n    &lt;filter&gt;\r\n        &lt;artifact&gt;log4j:log4j&lt;/artifact&gt;\r\n        &lt;includes&gt;\r\n            &lt;include&gt;org/apache/log4j/spi/LoggingEvent.class&lt;/include&gt;\r\n        &lt;/includes&gt;\r\n    &lt;/filter&gt;\r\n    &lt;filter&gt;\r\n        &lt;artifact&gt;org.apache.logging.log4j:log4j-*&lt;/artifact&gt;\r\n        &lt;includes&gt;\r\n            &lt;include&gt;**&lt;/include&gt;\r\n        &lt;/includes&gt;\r\n    &lt;/filter&gt;\r\n\r\n  [1]: https://github.com/fbacchella/LogHub/blob/master/pom.xml\r\n","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>This <a href=\"https://github.com/fbacchella/LogHub/blob/master/pom.xml\" rel=\"nofollow noreferrer\">link</a> works for me. There's a problem while shading log4j</p>\n<pre><code>&lt;filter&gt;\n    &lt;artifact&gt;log4j:log4j&lt;/artifact&gt;\n    &lt;includes&gt;\n        &lt;include&gt;org/apache/log4j/spi/LoggingEvent.class&lt;/include&gt;\n    &lt;/includes&gt;\n&lt;/filter&gt;\n&lt;filter&gt;\n    &lt;artifact&gt;org.apache.logging.log4j:log4j-*&lt;/artifact&gt;\n    &lt;includes&gt;\n        &lt;include&gt;**&lt;/include&gt;\n    &lt;/includes&gt;\n&lt;/filter&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9046501,"reputation":796,"user_id":6738594,"display_name":"gic186"},"score":0,"creation_date":1671811432,"post_id":74746536,"comment_id":132182099,"body_markdown":"This is probably useful only when using PowerMock","body":"This is probably useful only when using PowerMock"}],"tags":[],"owner":{"account_id":14346618,"reputation":13,"user_id":10363335,"display_name":"Cenfal Bahadır"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670607595,"creation_date":1670607595,"answer_id":74746536,"question_id":48033792,"body_markdown":"    @PowerMockIgnore( {&quot;org.springframework.util.Log4jConfigurer&quot;,&quot;javax.script.*&quot;,&quot;javax.management.*&quot;, &quot;org.w3c.dom.*&quot;, &quot;org.apache.log4j.*&quot;,&quot;org.apache.logging.*&quot;,&quot;org.apache.commons.logging.*&quot;, &quot;org.xml.sax.*&quot;,   &quot;javax.xml.*&quot;})\r\n\r\nadded this snippet to the test class. No error log anymore.\r\n\r\n","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<pre><code>@PowerMockIgnore( {&quot;org.springframework.util.Log4jConfigurer&quot;,&quot;javax.script.*&quot;,&quot;javax.management.*&quot;, &quot;org.w3c.dom.*&quot;, &quot;org.apache.log4j.*&quot;,&quot;org.apache.logging.*&quot;,&quot;org.apache.commons.logging.*&quot;, &quot;org.xml.sax.*&quot;,   &quot;javax.xml.*&quot;})\n</code></pre>\n<p>added this snippet to the test class. No error log anymore.</p>\n"},{"tags":[],"owner":{"account_id":16532789,"reputation":294,"user_id":11945573,"display_name":"Leonis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672072462,"creation_date":1672072462,"answer_id":74922216,"question_id":48033792,"body_markdown":"On our project, such a problem arose after the creation of the `TestAppender` class. \r\n\r\n```\r\n@Plugin(name = &quot;TestAppender&quot;, category = Core.CATEGORY_NAME, elementType = Appender.ELEMENT_TYPE)\r\npublic class TestAppender extends AbstractAppender {\r\n...\r\n```\r\n\r\nIts settings overwrote the logger settings in the `Log4j2Plugins.dat` file.\r\n\r\nThen we moved it to a separate module and began to attach it to the project in a similar way (please, pay attention to scope):\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;info.project&lt;/groupId&gt;\r\n  &lt;artifactId&gt;test&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>On our project, such a problem arose after the creation of the <code>TestAppender</code> class.</p>\n<pre><code>@Plugin(name = &quot;TestAppender&quot;, category = Core.CATEGORY_NAME, elementType = Appender.ELEMENT_TYPE)\npublic class TestAppender extends AbstractAppender {\n...\n</code></pre>\n<p>Its settings overwrote the logger settings in the <code>Log4j2Plugins.dat</code> file.</p>\n<p>Then we moved it to a separate module and began to attach it to the project in a similar way (please, pay attention to scope):</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;info.project&lt;/groupId&gt;\n  &lt;artifactId&gt;test&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1136523,"reputation":11039,"user_id":1121497,"accept_rate":42,"display_name":"Ferran Maylinch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681377856,"creation_date":1681377856,"answer_id":76003805,"question_id":48033792,"body_markdown":"You can exclude all the `Log4j2Plugins.dat` files except the right one, the one contained in `log4j-core`:\r\n\r\n```xml\r\n&lt;filter&gt;\r\n    &lt;artifact&gt;SOME-ARTIFACT&lt;/artifact&gt;\r\n    &lt;excludes&gt;\r\n        &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\r\n    &lt;/excludes&gt;\r\n&lt;/filter&gt;\r\n&lt;filter&gt;\r\n    &lt;artifact&gt;SOME-ARTIFACT&lt;/artifact&gt;\r\n    &lt;excludes&gt;\r\n        &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\r\n    &lt;/excludes&gt;\r\n&lt;/filter&gt;\r\n...\r\n```\r\n\r\nSee answer here, with a sample project: https://stackoverflow.com/a/76003471/1121497","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>You can exclude all the <code>Log4j2Plugins.dat</code> files except the right one, the one contained in <code>log4j-core</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;filter&gt;\n    &lt;artifact&gt;SOME-ARTIFACT&lt;/artifact&gt;\n    &lt;excludes&gt;\n        &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\n    &lt;/excludes&gt;\n&lt;/filter&gt;\n&lt;filter&gt;\n    &lt;artifact&gt;SOME-ARTIFACT&lt;/artifact&gt;\n    &lt;excludes&gt;\n        &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\n    &lt;/excludes&gt;\n&lt;/filter&gt;\n...\n</code></pre>\n<p>See answer here, with a sample project: <a href=\"https://stackoverflow.com/a/76003471/1121497\">https://stackoverflow.com/a/76003471/1121497</a></p>\n"}],"owner":{"account_id":3333882,"reputation":769,"user_id":2802069,"display_name":"CoderMeng"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65008,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"answer_count":9,"score":60,"last_activity_date":1683295947,"creation_date":1514635729,"question_id":48033792,"body_markdown":"I have log4j2 in my project when I run main method in intellij Idea ,it correct to print log. \r\n\r\nwhen i use maven-shade-plugin package project to jar file, and run jar as standalone application it shows error:\r\n\r\n&gt; java -cp package.jar com.xxx.TestMain\r\n\r\nthe console output\r\n\r\n    ERROR StatusLogger Unrecognized format specifier [d]\r\n    ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [thread]\r\n    ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [level]\r\n    ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [logger]\r\n    ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [msg]\r\n    ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [n]\r\n    ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [d]\r\n    ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [thread]\r\n    ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [level]\r\n    ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [logger]\r\n    ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [msg]\r\n    ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [n]\r\n    ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.\r\n\r\npom.xml config . log4j2.version = 2.10.0, spring boot version is 1.5.9.RELEASE\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;transformers&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                                    &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\r\n                                &lt;/transformer&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                                    &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\r\n                                &lt;/transformer&gt;\r\n                            &lt;/transformers&gt;\r\n                            &lt;filters&gt;\r\n                                &lt;filter&gt;\r\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                                    &lt;excludes&gt;\r\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                                    &lt;/excludes&gt;\r\n                                &lt;/filter&gt;\r\n                            &lt;/filters&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n        &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\r\n    &lt;/build&gt;\r\n\r\nlog4j2.xml config\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;debug&quot; monitorInterval=&quot;30&quot; shutdownHook=&quot;disable&quot;&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;LOG_HOME&quot;&gt;/data1/logs&lt;/property&gt;\r\n            &lt;property name=&quot;JOB_NAME&quot;&gt;noname&lt;/property&gt;\r\n        &lt;/properties&gt;\r\n        &lt;Appenders&gt;\r\n            &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%logger{36}][%file:%line] %msg%n%throwable&quot;/&gt;\r\n            &lt;/Console&gt;\r\n    \r\n            &lt;RollingRandomAccessFile name=&quot;DetailFile&quot;\r\n                                     fileName=&quot;${sys:LOG_HOME}/${sys:JOB_NAME}/detail.log&quot; bufferedIO=&quot;false&quot;\r\n                                     filePattern=&quot;${sys:LOG_HOME}/${sys:JOB_NAME}/detail.%d{yyyy-MM-dd}-%i.log&quot;&gt;\r\n    \r\n                &lt;PatternLayout\r\n                        pattern=&quot;%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%file:%line] %msg%n%throwable&quot;/&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                    &lt;SizeBasedTriggeringPolicy size=&quot;500 MB&quot;/&gt;\r\n                &lt;/Policies&gt;\r\n            &lt;/RollingRandomAccessFile&gt;\r\n            &lt;RollingRandomAccessFile name=&quot;error&quot;\r\n                                     fileName=&quot;${sys:LOG_HOME}/${sys:JOB_NAME}/error.log&quot; bufferedIO=&quot;true&quot;\r\n                                     filePattern=&quot;${sys:LOG_HOME}/${sys:JOB_NAME}/error.%d{yyyy-MM-dd}.log&quot;&gt;\r\n    \r\n                &lt;PatternLayout\r\n                        pattern=&quot;%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%logger{36}:%line] %msg%n%throwable&quot;/&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                &lt;/Policies&gt;\r\n            &lt;/RollingRandomAccessFile&gt;\r\n        &lt;/Appenders&gt;\r\n        &lt;Loggers&gt;\r\n            &lt;Root level=&quot;info&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;DetailFile&quot;/&gt;\r\n                &lt;AppenderRef level=&quot;error&quot; ref=&quot;error&quot;/&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\n","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>I have log4j2 in my project when I run main method in intellij Idea ,it correct to print log. </p>\n\n<p>when i use maven-shade-plugin package project to jar file, and run jar as standalone application it shows error:</p>\n\n<blockquote>\n  <p>java -cp package.jar com.xxx.TestMain</p>\n</blockquote>\n\n<p>the console output</p>\n\n<pre><code>ERROR StatusLogger Unrecognized format specifier [d]\nERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [thread]\nERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [level]\nERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [logger]\nERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [msg]\nERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [n]\nERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [d]\nERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [thread]\nERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [level]\nERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [logger]\nERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [msg]\nERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [n]\nERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.\n</code></pre>\n\n<p>pom.xml config . log4j2.version = 2.10.0, spring boot version is 1.5.9.RELEASE</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;1.7.25&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n        &lt;version&gt;${log4j2.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n        &lt;version&gt;${log4j2.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n        &lt;version&gt;${log4j2.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;transformers&gt;\n                            &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                            &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                        &lt;/transformers&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>log4j2.xml config</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"debug\" monitorInterval=\"30\" shutdownHook=\"disable\"&gt;\n    &lt;properties&gt;\n        &lt;property name=\"LOG_HOME\"&gt;/data1/logs&lt;/property&gt;\n        &lt;property name=\"JOB_NAME\"&gt;noname&lt;/property&gt;\n    &lt;/properties&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=\"Console\" target=\"SYSTEM_OUT\"&gt;\n            &lt;PatternLayout pattern=\"%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%logger{36}][%file:%line] %msg%n%throwable\"/&gt;\n        &lt;/Console&gt;\n\n        &lt;RollingRandomAccessFile name=\"DetailFile\"\n                                 fileName=\"${sys:LOG_HOME}/${sys:JOB_NAME}/detail.log\" bufferedIO=\"false\"\n                                 filePattern=\"${sys:LOG_HOME}/${sys:JOB_NAME}/detail.%d{yyyy-MM-dd}-%i.log\"&gt;\n\n            &lt;PatternLayout\n                    pattern=\"%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%file:%line] %msg%n%throwable\"/&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy interval=\"1\" modulate=\"true\"/&gt;\n                &lt;SizeBasedTriggeringPolicy size=\"500 MB\"/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingRandomAccessFile&gt;\n        &lt;RollingRandomAccessFile name=\"error\"\n                                 fileName=\"${sys:LOG_HOME}/${sys:JOB_NAME}/error.log\" bufferedIO=\"true\"\n                                 filePattern=\"${sys:LOG_HOME}/${sys:JOB_NAME}/error.%d{yyyy-MM-dd}.log\"&gt;\n\n            &lt;PatternLayout\n                    pattern=\"%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%logger{36}:%line] %msg%n%throwable\"/&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy interval=\"1\" modulate=\"true\"/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingRandomAccessFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=\"info\"&gt;\n            &lt;AppenderRef ref=\"DetailFile\"/&gt;\n            &lt;AppenderRef level=\"error\" ref=\"error\"/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"},{"tags":["java","python","google-cloud-dataflow","apache-beam","spotify-scio"],"answers":[{"comments":[{"owner":{"account_id":2208212,"reputation":10321,"user_id":1955346,"accept_rate":80,"display_name":"Marcin Zablocki"},"score":0,"creation_date":1553860619,"post_id":55412168,"comment_id":97552705,"body_markdown":"This is deprecated","body":"This is deprecated"},{"owner":{"account_id":5174149,"reputation":1216,"user_id":4141845,"display_name":"Reza Rokni"},"score":0,"creation_date":1553871060,"post_id":55412168,"comment_id":97559231,"body_markdown":"https://beam.apache.org/releases/javadoc/2.11.0/org/apache/beam/sdk/io/gcp/pubsub/PubsubIO.Read.html#withTimestampAttribute-java.lang.String- should be the 2.11 version of the same bit as was available for 1.9 I think.","body":"<a href=\"https://beam.apache.org/releases/javadoc/2.11.0/org/apache/beam/sdk/io/gcp/pubsub/PubsubIO.Read.html#withTimestampAttribute-java.lang.String-\" rel=\"nofollow noreferrer\">beam.apache.org/releases/javadoc/2.11.0/org/apache/beam/sdk/&zwnj;&#8203;io/&hellip;</a> should be the 2.11 version of the same bit as was available for 1.9 I think."},{"owner":{"account_id":5174149,"reputation":1216,"user_id":4141845,"display_name":"Reza Rokni"},"score":0,"creation_date":1553871577,"post_id":55412168,"comment_id":97559585,"body_markdown":"Using this method have you also set withAllowedLateness with your dataset?","body":"Using this method have you also set withAllowedLateness with your dataset?"},{"owner":{"account_id":2208212,"reputation":10321,"user_id":1955346,"accept_rate":80,"display_name":"Marcin Zablocki"},"score":0,"creation_date":1554212865,"post_id":55412168,"comment_id":97663140,"body_markdown":"I want to extract the timestamp from Pub/Sub message payload, not attribute.","body":"I want to extract the timestamp from Pub/Sub message payload, not attribute."},{"owner":{"account_id":2208212,"reputation":10321,"user_id":1955346,"accept_rate":80,"display_name":"Marcin Zablocki"},"score":0,"creation_date":1554282815,"post_id":55412168,"comment_id":97690160,"body_markdown":"+ I&#39;ve tried using &quot;timestampAttribute&quot; along with &quot;withAllowedLateness&quot; and it didn&#39;t work (at least for direct runner)","body":"+ I&#39;ve tried using &quot;timestampAttribute&quot; along with &quot;withAllowedLateness&quot; and it didn&#39;t work (at least for direct runner)"},{"owner":{"account_id":5974726,"reputation":1921,"user_id":4696015,"display_name":"chamikara"},"score":0,"creation_date":1554328663,"post_id":55412168,"comment_id":97715770,"body_markdown":"This seems to be relevant and provides a solution: https://medium.com/@erik.b.ferm/combining-bounded-pcollections-with-custom-timestamps-in-apache-beam-b0fd911b2ac","body":"This seems to be relevant and provides a solution: <a href=\"https://medium.com/@erik.b.ferm/combining-bounded-pcollections-with-custom-timestamps-in-apache-beam-b0fd911b2ac\" rel=\"nofollow noreferrer\">medium.com/@erik.b.ferm/&hellip;</a>"},{"owner":{"account_id":2208212,"reputation":10321,"user_id":1955346,"accept_rate":80,"display_name":"Marcin Zablocki"},"score":0,"creation_date":1554457699,"post_id":55412168,"comment_id":97768456,"body_markdown":"I saw that post but as you can see it&#39;s about bounded collections, whereas Pub/Sub is unbounded.","body":"I saw that post but as you can see it&#39;s about bounded collections, whereas Pub/Sub is unbounded."}],"tags":[],"owner":{"account_id":5174149,"reputation":1216,"user_id":4141845,"display_name":"Reza Rokni"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554163173,"creation_date":1553843408,"answer_id":55412168,"question_id":55401081,"body_markdown":"If you have the ability to extract the timestamp at insertion point to PubSub, you will be able to make use of user-specified timestamps as metadata. The information on how to is documented under the 1.9 SDK. \r\n\r\n[https://cloud.google.com/dataflow/model/pubsub-io#timestamps-and-record-ids][1]\r\n\r\n&quot;You can use user-specified timestamps for precise control over how elements read from Cloud Pub/Sub are assigned to windows in a Dataflow pipeline. &quot;\r\n\r\nAs 1.9 is deprecated, in 2.11 you will need https://beam.apache.org/releases/javadoc/2.11.0/org/apache/beam/sdk/io/gcp/pubsub/PubsubIO.Read.html#withTimestampAttribute-java.lang.String-\r\n\r\n  [1]: https://cloud.google.com/dataflow/model/pubsub-io#timestamps-and-record-ids","title":"Custom timestamp and windowing for Pub/Sub in DataFlow (Apache Beam)","body":"<p>If you have the ability to extract the timestamp at insertion point to PubSub, you will be able to make use of user-specified timestamps as metadata. The information on how to is documented under the 1.9 SDK. </p>\n\n<p><a href=\"https://cloud.google.com/dataflow/model/pubsub-io#timestamps-and-record-ids\" rel=\"nofollow noreferrer\">https://cloud.google.com/dataflow/model/pubsub-io#timestamps-and-record-ids</a></p>\n\n<p>\"You can use user-specified timestamps for precise control over how elements read from Cloud Pub/Sub are assigned to windows in a Dataflow pipeline. \"</p>\n\n<p>As 1.9 is deprecated, in 2.11 you will need <a href=\"https://beam.apache.org/releases/javadoc/2.11.0/org/apache/beam/sdk/io/gcp/pubsub/PubsubIO.Read.html#withTimestampAttribute-java.lang.String-\" rel=\"nofollow noreferrer\">https://beam.apache.org/releases/javadoc/2.11.0/org/apache/beam/sdk/io/gcp/pubsub/PubsubIO.Read.html#withTimestampAttribute-java.lang.String-</a></p>\n"},{"tags":[],"owner":{"account_id":3610250,"reputation":44882,"user_id":3011380,"accept_rate":48,"display_name":"zangw"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683295920,"creation_date":1683295920,"answer_id":76183115,"question_id":55401081,"body_markdown":"One solution is to custom the timestamp of PubSub message through  `withAllowedTimestampSkew` of `WithTimestamps`\r\n\r\n```java\r\n static SerializableFunction&lt;Event, Instant&gt; timestampFn = (Event input) -&gt; new Instant(Objects.requireNonNull(input).getTs());\r\n\r\n...\r\n\r\n PCollection&lt;String&gt; rawMessage = pipeline.apply(&quot;Read PubSub Message&quot;,\r\n                        PubsubIO.readStrings().fromTopic(topic)); \r\n PCollection&lt;Event&gt; events = rawMessage.apply(&quot;Convert to UserEvent&quot;,\r\n                MapElements.into(TypeDescriptor.of(Event.class))\r\n                        .via(Event::fromJSON))\r\n                .apply(&quot;With Timestamp&quot;, WithTimestamps.of(timestampFn).withAllowedTimestampSkew(Duration.standardMinutes(2)));\r\n\r\n PCollection&lt;Event&gt; minute_window_events = events.apply(&quot;Minute Window&quot;,\r\n                Window.&lt;Event&gt;into(FixedWindows.of(Duration.standardMinutes(3)))\r\n                        .triggering(AfterProcessingTime\r\n                                .pastFirstElementInPane()\r\n                                .plusDelayOf(Duration.standardMinutes(1)))\r\n                        .discardingFiredPanes()\r\n                        .withAllowedLateness(Duration.standardMinutes(1))\r\n        );\r\n...\r\n```\r\n\r\nHowever, this method `withAllowedTimestampSkew` will be deprecated per doc\r\n\r\n&gt;  @deprecated This method permits a to elements to be emitted behind the watermark. These\r\n&gt;     elements are considered late, and if behind the {@link Window#withAllowedLateness(Duration)\r\n&gt;    allowed lateness} of a downstream {@link PCollection} may be silently dropped. See\r\n&gt;    https://github.com/apache/beam/issues/18065 for details on a replacement.\r\n\r\nYou could refer to https://github.com/apache/beam/issues/18065 for details on a replacement.\r\n\r\n-------\r\n\r\nAnother solution is `withTimestampAttribute`. You can set an attribute in pubsub messages that contains the `timestamp` field.\r\n\r\nWhen publishing a message to PubSub\r\n\r\n```java\r\np.apply(PubsubIO.writeString().withTimestampAttribute(&quot;timestamp&quot;).to(topic));\r\n```\r\n\r\nAnd when Subscribing:\r\n\r\n```\r\np.apply(PubsubIO.readString().fromTopic(topic).withTimestampAttribute(&quot;timestamp&quot;))\r\n```","title":"Custom timestamp and windowing for Pub/Sub in DataFlow (Apache Beam)","body":"<p>One solution is to custom the timestamp of PubSub message through  <code>withAllowedTimestampSkew</code> of <code>WithTimestamps</code></p>\n<pre class=\"lang-java prettyprint-override\"><code> static SerializableFunction&lt;Event, Instant&gt; timestampFn = (Event input) -&gt; new Instant(Objects.requireNonNull(input).getTs());\n\n...\n\n PCollection&lt;String&gt; rawMessage = pipeline.apply(&quot;Read PubSub Message&quot;,\n                        PubsubIO.readStrings().fromTopic(topic)); \n PCollection&lt;Event&gt; events = rawMessage.apply(&quot;Convert to UserEvent&quot;,\n                MapElements.into(TypeDescriptor.of(Event.class))\n                        .via(Event::fromJSON))\n                .apply(&quot;With Timestamp&quot;, WithTimestamps.of(timestampFn).withAllowedTimestampSkew(Duration.standardMinutes(2)));\n\n PCollection&lt;Event&gt; minute_window_events = events.apply(&quot;Minute Window&quot;,\n                Window.&lt;Event&gt;into(FixedWindows.of(Duration.standardMinutes(3)))\n                        .triggering(AfterProcessingTime\n                                .pastFirstElementInPane()\n                                .plusDelayOf(Duration.standardMinutes(1)))\n                        .discardingFiredPanes()\n                        .withAllowedLateness(Duration.standardMinutes(1))\n        );\n...\n</code></pre>\n<p>However, this method <code>withAllowedTimestampSkew</code> will be deprecated per doc</p>\n<blockquote>\n<p>@deprecated This method permits a to elements to be emitted behind the watermark. These\nelements are considered late, and if behind the {@link Window#withAllowedLateness(Duration)\nallowed lateness} of a downstream {@link PCollection} may be silently dropped. See\n<a href=\"https://github.com/apache/beam/issues/18065\" rel=\"nofollow noreferrer\">https://github.com/apache/beam/issues/18065</a> for details on a replacement.</p>\n</blockquote>\n<p>You could refer to <a href=\"https://github.com/apache/beam/issues/18065\" rel=\"nofollow noreferrer\">https://github.com/apache/beam/issues/18065</a> for details on a replacement.</p>\n<hr />\n<p>Another solution is <code>withTimestampAttribute</code>. You can set an attribute in pubsub messages that contains the <code>timestamp</code> field.</p>\n<p>When publishing a message to PubSub</p>\n<pre class=\"lang-java prettyprint-override\"><code>p.apply(PubsubIO.writeString().withTimestampAttribute(&quot;timestamp&quot;).to(topic));\n</code></pre>\n<p>And when Subscribing:</p>\n<pre><code>p.apply(PubsubIO.readString().fromTopic(topic).withTimestampAttribute(&quot;timestamp&quot;))\n</code></pre>\n"}],"owner":{"account_id":2208212,"reputation":10321,"user_id":1955346,"accept_rate":80,"display_name":"Marcin Zablocki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3487,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1683295920,"creation_date":1553786043,"question_id":55401081,"body_markdown":"I want to implement the following scenario using streaming pipeline in Apache Beam (and running it on Google DataFlow):\r\n\r\n1. Read messages from Pub/Sub (JSON strings)\r\n1. Deserialize JSONs\r\n1. Use custom field (say `timeStamp`) as a timestamp value for the processing element\r\n1. Apply fixed windowing of `60 seconds`\r\n1. Extract key from elemtents and group by key\r\n1. &lt;&lt; perform further processing &gt;&gt;\r\n\r\nI&#39;ve tried to resolve this problem using both Java(Scala) and Python, but non of the solution worked.\r\n\r\n1. **Python solution**\r\n```python\r\n# p is beam.Pipeline()\r\n_ = (p | beam.io.ReadFromPubSub(subscription=&quot;my_sub&quot;)\r\n        | beam.Map(add_timestamping)\r\n        | beam.WindowInto(window.FixedWindows(60))\r\n        | beam.Map(lambda elem: elem) # exracting the key somehow, not relevant here\r\n        | beam.GroupByKey()\r\n        # (...)\r\n        | beam.io.WriteToPubSub(&quot;output_topic&quot;)\r\n        )\r\np.run()\r\n```\r\n`add_timestamping` function as per [documentation](https://beam.apache.org/documentation/programming-guide/#adding-timestamps-to-a-pcollections-elements): \r\n\r\n```python\r\ndef add_timestamping(elem):\r\n    import json\r\n    import apache_beam as beam\r\n    msg = json.loads(elem)\r\n    unix_timestamp = msg[&#39;timeStamp&#39;] / 1000\r\n    return beam.window.TimestampedValue(msg, unix_timestamp)\r\n```\r\n\r\n**Output of Python solution**:\r\n\r\n1. When using `DirectRunner`, windows are emitted and the windowing itself is more-or-less appropriate, depending on the delay.\r\n1. When using `DataFlowRunner`, **ALL messages are skipped** with counter appearing in DataFlow UI: *droppedDueToLateness*.\r\n\r\n---\r\n2. **Java / Scala solution**\r\n(I&#39;ve used *Scio* but this happens to in clean Beam SDK in Java too)\r\n\r\n```scala\r\nsc.pubsubSubscription[String](&quot;my_sub&quot;)\r\n    .applyTransform(ParDo.of(new CustomTs()))\r\n    .withFixedWindows(Duration.standardSeconds(60))\r\n    .map(x =&gt; x) // exracting the key somehow, not relevant here\r\n    .groupByKey\r\n    // (...)\r\n    .saveAsPubsub(&quot;output_topic&quot;)\r\n```\r\n\r\nAdding custom timestamp as per [documentation](https://beam.apache.org/documentation/programming-guide/#adding-timestamps-to-a-pcollections-elements):\r\n```\r\nimport io.circe.parser._\r\nclass CustomTs extends DoFn[String, String] {\r\n  @ProcessElement\r\n  def processElement(@Element element: String, out: DoFn.OutputReceiver[String]): Unit = {\r\n    val json = parse(element).right.get\r\n    val timestampMillis: Long = json.hcursor.downField(&quot;timeStamp&quot;).as[Long].getOrElse(0)\r\n    out.outputWithTimestamp(element, new Instant(timestampMillis))\r\n  }\r\n}\r\n```\r\n\r\n**Output of Java / Scala solution**:\r\n```\r\nException in thread &quot;main&quot; org.apache.beam.sdk.Pipeline$PipelineExecutionException: \r\njava.lang.IllegalArgumentException:\r\n Cannot output with timestamp 2019-03-02T00:51:39.124Z. \r\n Output timestamps must be no earlier than the timestamp of the current input\r\n (2019-03-28T14:57:53.195Z) minus the allowed skew (0 milliseconds).\r\n```\r\n\r\nI cannot use `DoFn.getAllowedTimestampSkew` here as it&#39;s already deprecated and I don&#39;t know what ranges of historical data will be sent.\r\n\r\n---\r\n\r\nHaving the ability to process historical data is crucial for my project (this data will be sent to Pub/Sub from some store). The pipeline must work both on current data as well as historical one.\r\n\r\nMy question is:\r\n**How to process the data using custom timestamps with the ability to operate on windows defined using Beam API?**","title":"Custom timestamp and windowing for Pub/Sub in DataFlow (Apache Beam)","body":"<p>I want to implement the following scenario using streaming pipeline in Apache Beam (and running it on Google DataFlow):</p>\n\n<ol>\n<li>Read messages from Pub/Sub (JSON strings)</li>\n<li>Deserialize JSONs</li>\n<li>Use custom field (say <code>timeStamp</code>) as a timestamp value for the processing element</li>\n<li>Apply fixed windowing of <code>60 seconds</code></li>\n<li>Extract key from elemtents and group by key</li>\n<li>&lt;&lt; perform further processing >></li>\n</ol>\n\n<p>I've tried to resolve this problem using both Java(Scala) and Python, but non of the solution worked.</p>\n\n<ol>\n<li><strong>Python solution</strong></li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code># p is beam.Pipeline()\n_ = (p | beam.io.ReadFromPubSub(subscription=\"my_sub\")\n        | beam.Map(add_timestamping)\n        | beam.WindowInto(window.FixedWindows(60))\n        | beam.Map(lambda elem: elem) # exracting the key somehow, not relevant here\n        | beam.GroupByKey()\n        # (...)\n        | beam.io.WriteToPubSub(\"output_topic\")\n        )\np.run()\n</code></pre>\n\n<p><code>add_timestamping</code> function as per <a href=\"https://beam.apache.org/documentation/programming-guide/#adding-timestamps-to-a-pcollections-elements\" rel=\"nofollow noreferrer\">documentation</a>: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def add_timestamping(elem):\n    import json\n    import apache_beam as beam\n    msg = json.loads(elem)\n    unix_timestamp = msg['timeStamp'] / 1000\n    return beam.window.TimestampedValue(msg, unix_timestamp)\n</code></pre>\n\n<p><strong>Output of Python solution</strong>:</p>\n\n<ol>\n<li>When using <code>DirectRunner</code>, windows are emitted and the windowing itself is more-or-less appropriate, depending on the delay.</li>\n<li>When using <code>DataFlowRunner</code>, <strong>ALL messages are skipped</strong> with counter appearing in DataFlow UI: <em>droppedDueToLateness</em>.</li>\n</ol>\n\n<hr>\n\n<ol start=\"2\">\n<li><strong>Java / Scala solution</strong>\n(I've used <em>Scio</em> but this happens to in clean Beam SDK in Java too)</li>\n</ol>\n\n<pre class=\"lang-scala prettyprint-override\"><code>sc.pubsubSubscription[String](\"my_sub\")\n    .applyTransform(ParDo.of(new CustomTs()))\n    .withFixedWindows(Duration.standardSeconds(60))\n    .map(x =&gt; x) // exracting the key somehow, not relevant here\n    .groupByKey\n    // (...)\n    .saveAsPubsub(\"output_topic\")\n</code></pre>\n\n<p>Adding custom timestamp as per <a href=\"https://beam.apache.org/documentation/programming-guide/#adding-timestamps-to-a-pcollections-elements\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<pre><code>import io.circe.parser._\nclass CustomTs extends DoFn[String, String] {\n  @ProcessElement\n  def processElement(@Element element: String, out: DoFn.OutputReceiver[String]): Unit = {\n    val json = parse(element).right.get\n    val timestampMillis: Long = json.hcursor.downField(\"timeStamp\").as[Long].getOrElse(0)\n    out.outputWithTimestamp(element, new Instant(timestampMillis))\n  }\n}\n</code></pre>\n\n<p><strong>Output of Java / Scala solution</strong>:</p>\n\n<pre><code>Exception in thread \"main\" org.apache.beam.sdk.Pipeline$PipelineExecutionException: \njava.lang.IllegalArgumentException:\n Cannot output with timestamp 2019-03-02T00:51:39.124Z. \n Output timestamps must be no earlier than the timestamp of the current input\n (2019-03-28T14:57:53.195Z) minus the allowed skew (0 milliseconds).\n</code></pre>\n\n<p>I cannot use <code>DoFn.getAllowedTimestampSkew</code> here as it's already deprecated and I don't know what ranges of historical data will be sent.</p>\n\n<hr>\n\n<p>Having the ability to process historical data is crucial for my project (this data will be sent to Pub/Sub from some store). The pipeline must work both on current data as well as historical one.</p>\n\n<p>My question is:\n<strong>How to process the data using custom timestamps with the ability to operate on windows defined using Beam API?</strong></p>\n"},{"tags":["java","android","android-camera","zxing","qr-code"],"answers":[{"tags":[],"owner":{"account_id":484789,"reputation":852,"user_id":900684,"accept_rate":17,"display_name":"Hussain KMR Behestee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484475332,"creation_date":1484475332,"answer_id":41660004,"question_id":30767188,"body_markdown":"Here is a cordova plugin for anroid, though it is under development. but it scans multiple qr code based on structure multiple qr code array.\r\n\r\nCordova plugin: https://github.com/behestee/cordova-plugin-multipartqrcodescanner\r\n\r\nYou will better understand how to create and read a structure multiple qr code array at here: http://programresource.net/en/2013/05/04/2202.html\r\n\r\n\r\n","title":"Scan QR code if multiple QR code showing on screen","body":"<p>Here is a cordova plugin for anroid, though it is under development. but it scans multiple qr code based on structure multiple qr code array.</p>\n\n<p>Cordova plugin: <a href=\"https://github.com/behestee/cordova-plugin-multipartqrcodescanner\" rel=\"nofollow noreferrer\">https://github.com/behestee/cordova-plugin-multipartqrcodescanner</a></p>\n\n<p>You will better understand how to create and read a structure multiple qr code array at here: <a href=\"http://programresource.net/en/2013/05/04/2202.html\" rel=\"nofollow noreferrer\">http://programresource.net/en/2013/05/04/2202.html</a></p>\n"},{"tags":[],"owner":{"account_id":93599,"reputation":2732,"user_id":255985,"display_name":"lessthanoptimal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537765832,"creation_date":1537765832,"answer_id":52472987,"question_id":30767188,"body_markdown":"BoofCV&#39;s QR scanner easily handles multiple QR codes right next to each other.\r\n\r\nhttps://boofcv.org/index.php?title=Example_Detect_QR_Code\r\n\r\nI rand the Android demo on your images and it read them just fine. Each QR code is treated as independent even though they have the same message. You get the location and message of each one.\r\n\r\nhttps://play.google.com/store/apps/details?id=org.boofcv.android&amp;hl=en_US","title":"Scan QR code if multiple QR code showing on screen","body":"<p>BoofCV's QR scanner easily handles multiple QR codes right next to each other.</p>\n\n<p><a href=\"https://boofcv.org/index.php?title=Example_Detect_QR_Code\" rel=\"nofollow noreferrer\">https://boofcv.org/index.php?title=Example_Detect_QR_Code</a></p>\n\n<p>I rand the Android demo on your images and it read them just fine. Each QR code is treated as independent even though they have the same message. You get the location and message of each one.</p>\n\n<p><a href=\"https://play.google.com/store/apps/details?id=org.boofcv.android&amp;hl=en_US\" rel=\"nofollow noreferrer\">https://play.google.com/store/apps/details?id=org.boofcv.android&amp;hl=en_US</a></p>\n"}],"owner":{"account_id":310904,"reputation":5983,"user_id":1004437,"accept_rate":67,"display_name":"sam_k"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5968,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1683295754,"creation_date":1433969965,"question_id":30767188,"body_markdown":"I am developing one android sample application as an academic project where I need to scan QR code, I used QR scan code library and I am able to detect QR code successfully if on screen there is only one QR code.\r\n\r\nRight I want to scan QR code although same QR code showing at multiple places on screen at a time. For an example, On my laptop screen QR code image looks like below mentioned images.All QR codes are same, there is no difference between them. \r\nConsider below images which are having 6 and 4 same QR code but together with some padding. Now, user focus or put camera anywhere on screen it should be scanned. If camera focus on multiple QR code at a time then scan any one of them.\r\n\r\nSolution which I am thinking \r\n\r\n1) We can limit the area of camera preview frame and try to get QR code, but as per my requirement it is not feasible.\r\n2) Shall I apply any image processing algorithm on image first?\r\n\r\nPlease help me how can I achieve with robustness. \r\nAny help would be appreciated. Thanks for your time.\r\n\r\n**2 Images :**\r\n\r\n![enter image description here][1]\r\n\r\n![enter image description here][2]\r\n\r\nRegards\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/yUXvD.jpg\r\n  [2]: http://i.stack.imgur.com/AbQ8v.jpg\r\n","title":"Scan QR code if multiple QR code showing on screen","body":"<p>I am developing one android sample application as an academic project where I need to scan QR code, I used QR scan code library and I am able to detect QR code successfully if on screen there is only one QR code.</p>\n\n<p>Right I want to scan QR code although same QR code showing at multiple places on screen at a time. For an example, On my laptop screen QR code image looks like below mentioned images.All QR codes are same, there is no difference between them. \nConsider below images which are having 6 and 4 same QR code but together with some padding. Now, user focus or put camera anywhere on screen it should be scanned. If camera focus on multiple QR code at a time then scan any one of them.</p>\n\n<p>Solution which I am thinking </p>\n\n<p>1) We can limit the area of camera preview frame and try to get QR code, but as per my requirement it is not feasible.\n2) Shall I apply any image processing algorithm on image first?</p>\n\n<p>Please help me how can I achieve with robustness. \nAny help would be appreciated. Thanks for your time.</p>\n\n<p><strong>2 Images :</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/yUXvD.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/AbQ8v.jpg\" alt=\"enter image description here\"></p>\n\n<p>Regards</p>\n"},{"tags":["java","apache-poi","xlsx"],"owner":{"account_id":9783673,"reputation":133,"user_id":7250670,"display_name":"Kahn Sparkle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1683295601,"creation_date":1683295601,"question_id":76183067,"body_markdown":"I am using Apache POI java to generate excel file. \r\nI have to merge the second column a of the sheet and center the value afterwards\r\n\r\nin my writer class I wrote the methode \r\n\r\n        public void mergeColumn(final String brand,\r\n                                 final int rowStartNum,\r\n                                 final int rowEndNum,\r\n                                 final String category) {\r\n        final XSSFSheet sheet = wb.getSheet(category);\r\n        final XSSFRow row = sheet.createRow(sheet.getLastRowNum() + 1);\r\n        final int firstColumn = 1;\r\n        final XSSFCell currentBrandCell = row.createCell(firstColumn);\r\n        currentBrandCell.setCellValue(brand);\r\n        currentBrandCell.setCellStyle(cellStyle.getBrandStyle());\r\n\r\n        final int lastColumn = 1;\r\n        sheet.addMergedRegion(new CellRangeAddress(\r\n            rowStartNum,\r\n            rowEndNum,\r\n            firstColumn,\r\n            lastColumn\r\n        ));\r\n\r\n        CellUtil.setCellStyleProperty(currentBrandCell, wb, CellUtil.VERTICAL_ALIGNMENT, VerticalAlignment.CENTER);\r\n        CellUtil.setCellStyleProperty(currentBrandCell, wb, CellUtil.ALIGNMENT, HorizontalAlignment.CENTER);\r\n\r\n        sheet.autoSizeColumn(1, true);\r\n        sheet.createRow(rowEndNum + 1);\r\n    }\r\nand in my CustomCellStyle class I have the following \r\n\r\n        brandStyle = wb.createCellStyle();\r\n        brandStyle.setFont(topHeadearFont2);\r\n        brandStyle.setAlignment(CellStyle.ALIGN_CENTER);\r\n        brandStyle.setVerticalAlignment(CellStyle.VERTICAL_CENTER);\r\n        putBordersThick(brandStyle);\r\n\r\nand yet the value in the merged column is not centered. \r\n\r\n","title":"How to center a value of an excel cell after merging columns in apache poi java","body":"<p>I am using Apache POI java to generate excel file.\nI have to merge the second column a of the sheet and center the value afterwards</p>\n<p>in my writer class I wrote the methode</p>\n<pre><code>    public void mergeColumn(final String brand,\n                             final int rowStartNum,\n                             final int rowEndNum,\n                             final String category) {\n    final XSSFSheet sheet = wb.getSheet(category);\n    final XSSFRow row = sheet.createRow(sheet.getLastRowNum() + 1);\n    final int firstColumn = 1;\n    final XSSFCell currentBrandCell = row.createCell(firstColumn);\n    currentBrandCell.setCellValue(brand);\n    currentBrandCell.setCellStyle(cellStyle.getBrandStyle());\n\n    final int lastColumn = 1;\n    sheet.addMergedRegion(new CellRangeAddress(\n        rowStartNum,\n        rowEndNum,\n        firstColumn,\n        lastColumn\n    ));\n\n    CellUtil.setCellStyleProperty(currentBrandCell, wb, CellUtil.VERTICAL_ALIGNMENT, VerticalAlignment.CENTER);\n    CellUtil.setCellStyleProperty(currentBrandCell, wb, CellUtil.ALIGNMENT, HorizontalAlignment.CENTER);\n\n    sheet.autoSizeColumn(1, true);\n    sheet.createRow(rowEndNum + 1);\n}\n</code></pre>\n<p>and in my CustomCellStyle class I have the following</p>\n<pre><code>    brandStyle = wb.createCellStyle();\n    brandStyle.setFont(topHeadearFont2);\n    brandStyle.setAlignment(CellStyle.ALIGN_CENTER);\n    brandStyle.setVerticalAlignment(CellStyle.VERTICAL_CENTER);\n    putBordersThick(brandStyle);\n</code></pre>\n<p>and yet the value in the merged column is not centered.</p>\n"},{"tags":["java","cucumber","gherkin"],"answers":[{"comments":[{"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"score":0,"creation_date":1683547380,"post_id":76183055,"comment_id":134378589,"body_markdown":"thanks a lot it works but i just passed List&lt;Comment&gt; commentsList and User user as a method parameters","body":"thanks a lot it works but i just passed List&lt;Comment&gt; commentsList and User user as a method parameters"}],"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1683295520,"creation_date":1683295520,"answer_id":76183055,"question_id":76182869,"body_markdown":"Something like this should work\r\n\r\n    Scenario: User with 2 comments\r\n    Given I have a User\r\n      | name | password |\r\n      | John | pass     |\r\n    And users have the following comments\r\n      | id | description |\r\n      | 1  | first       |\r\n      | 2  | second      |\r\n\r\nWith Step definition sample as\r\n\r\n        User user;\r\n\r\n    \t@Given(&quot;I have a User&quot;)\r\n    \tpublic void iHaveAUser(Map&lt;String, String&gt; userData) {\r\n    \t\tUser user = new User();\r\n    \t\tuser.setName(userData.get(&quot;name&quot;));\r\n    \t\tuser.setPassword(userData.get(&quot;password&quot;));\r\n    \t\tList&lt;Comment&gt; commentsList = new ArrayList&lt;&gt;();\r\n    \t\tuser.setCommentsList(commentsList);\r\n    \t\tthis.user = user;\r\n    \t\t// Save the user object for later use\r\n    \t}\r\n    \r\n    \t@And(&quot;users have the following comments&quot;)\r\n    \tpublic void usersHaveTheFollowingComments(List&lt;Map&lt;String, String&gt;&gt; commentsData) {\r\n    \r\n    \t\tList&lt;Comment&gt; commentsList = this.user.getCommentsList();\r\n    \t\t// Map the datatable to Comment objects and add them to the list\r\n    \t\tfor (Map&lt;String, String&gt; commentData : commentsData) {\r\n    \t\t\tComment comment = new Comment();\r\n    \t\t\tcomment.setId(Long.valueOf(commentData.get(&quot;id&quot;)));\r\n    \t\t\tcomment.setDescription(commentData.get(&quot;description&quot;));\r\n    \t\t\tcommentsList.add(comment);\r\n    \t\t}\r\n    \t}","title":"Java - Gherkin &amp; Cucumber : Pass Object with arrayList of objects","body":"<p>Something like this should work</p>\n<pre><code>Scenario: User with 2 comments\nGiven I have a User\n  | name | password |\n  | John | pass     |\nAnd users have the following comments\n  | id | description |\n  | 1  | first       |\n  | 2  | second      |\n</code></pre>\n<p>With Step definition sample as</p>\n<pre><code>    User user;\n\n    @Given(&quot;I have a User&quot;)\n    public void iHaveAUser(Map&lt;String, String&gt; userData) {\n        User user = new User();\n        user.setName(userData.get(&quot;name&quot;));\n        user.setPassword(userData.get(&quot;password&quot;));\n        List&lt;Comment&gt; commentsList = new ArrayList&lt;&gt;();\n        user.setCommentsList(commentsList);\n        this.user = user;\n        // Save the user object for later use\n    }\n\n    @And(&quot;users have the following comments&quot;)\n    public void usersHaveTheFollowingComments(List&lt;Map&lt;String, String&gt;&gt; commentsData) {\n\n        List&lt;Comment&gt; commentsList = this.user.getCommentsList();\n        // Map the datatable to Comment objects and add them to the list\n        for (Map&lt;String, String&gt; commentData : commentsData) {\n            Comment comment = new Comment();\n            comment.setId(Long.valueOf(commentData.get(&quot;id&quot;)));\n            comment.setDescription(commentData.get(&quot;description&quot;));\n            commentsList.add(comment);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76183055,"answer_count":1,"score":0,"last_activity_date":1683295520,"creation_date":1683294264,"question_id":76182869,"body_markdown":"i have the following java model :\r\n\r\n    public class User {\r\n    \r\n      private String name;\r\n    \r\n      private String password;\r\n    \r\n    \r\n      private List&lt;Comment&gt; commentsList;\r\n      \r\n    }\r\n    \r\n    \r\n    public class Comment {\r\n    \r\n      private Long id;\r\n      private String description;\r\n    \r\n    }\r\n\r\ni want to know how i can write my gherkin data for a user with 2 comments object as a datatable.","title":"Java - Gherkin &amp; Cucumber : Pass Object with arrayList of objects","body":"<p>i have the following java model :</p>\n<pre><code>public class User {\n\n  private String name;\n\n  private String password;\n\n\n  private List&lt;Comment&gt; commentsList;\n  \n}\n\n\npublic class Comment {\n\n  private Long id;\n  private String description;\n\n}\n</code></pre>\n<p>i want to know how i can write my gherkin data for a user with 2 comments object as a datatable.</p>\n"},{"tags":["java","android","locale","currency-formatting"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1572369502,"post_id":58612380,"comment_id":103535128,"body_markdown":"Javadoc of [`Currency.getSymbol()`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol()): Gets the symbol of this currency for the default DISPLAY locale.For example, for the US Dollar, the symbol is &quot;$&quot; if the defaultlocale is the US, while for other locales it may be &quot;US$&quot;. If no symbol can be determined, the ISO 4217 currency code is returned.","body":"Javadoc of <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol()\" rel=\"nofollow noreferrer\"><code>Currency.getSymbol()</code></a>: Gets the symbol of this currency for the default DISPLAY locale.For example, for the US Dollar, the symbol is &quot;$&quot; if the defaultlocale is the US, while for other locales it may be &quot;US$&quot;. If no symbol can be determined, the ISO 4217 currency code is returned."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1572369602,"post_id":58612380,"comment_id":103535167,"body_markdown":"Try `Currency.getInstance(Locale.US).getSymbol(Locale.US)`.","body":"Try <code>Currency.getInstance(Locale.US).getSymbol(Locale.US)</code>."},{"owner":{"account_id":1587905,"reputation":55,"user_id":1471849,"display_name":"Sandeep"},"score":0,"creation_date":1572411489,"post_id":58612380,"comment_id":103546793,"body_markdown":"@JohannesKuhn Thanks it worked. Passing locale on getSymbol(Locale.US) solved the problem.","body":"@JohannesKuhn Thanks it worked. Passing locale on getSymbol(Locale.US) solved the problem."}],"answers":[{"tags":[],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1572412932,"creation_date":1572412932,"answer_id":58619198,"question_id":58612380,"body_markdown":"From the javadoc of [`Currency.getSymbol()`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol())\n\n&gt; Gets the symbol of this currency for the default [`DISPLAY`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Locale.Category.html#DISPLAY) locale. For example, for the US Dollar, the symbol is &quot;$&quot; if the default locale is the US, while for other locales it may be &quot;US$&quot;. If no symbol can be determined, the ISO 4217 currency code is returned.\n&gt;\n&gt; If the default  [`DISPLAY`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Locale.Category.html#DISPLAY) locale contains &quot;rg&quot; (region override) Unicode extension, the symbol returned from this method reflects the value specified with that extension.\n&gt;\n&gt; This is equivalent to calling [`getSymbol(Locale.getDefault(Locale.Category.DISPLAY))`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol(java.util.Locale)).\n\nThis describes the reason why you sometimes see &quot;US$&quot; and sometimes just &quot;$&quot;.\n\nIf you want to get reproducible results use\n\n    Currency.getInstance(Locale.US).getSymbol(Locale.US). ","title":"Currency.getSymbol() gives &quot;US$&quot; and &quot;$&quot; with different devices","body":"<p>From the javadoc of <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol()\" rel=\"nofollow noreferrer\"><code>Currency.getSymbol()</code></a></p>\n<blockquote>\n<p>Gets the symbol of this currency for the default <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Locale.Category.html#DISPLAY\" rel=\"nofollow noreferrer\"><code>DISPLAY</code></a> locale. For example, for the US Dollar, the symbol is &quot;$&quot; if the default locale is the US, while for other locales it may be &quot;US$&quot;. If no symbol can be determined, the ISO 4217 currency code is returned.</p>\n<p>If the default  <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Locale.Category.html#DISPLAY\" rel=\"nofollow noreferrer\"><code>DISPLAY</code></a> locale contains &quot;rg&quot; (region override) Unicode extension, the symbol returned from this method reflects the value specified with that extension.</p>\n<p>This is equivalent to calling <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol(java.util.Locale)\" rel=\"nofollow noreferrer\"><code>getSymbol(Locale.getDefault(Locale.Category.DISPLAY))</code></a>.</p>\n</blockquote>\n<p>This describes the reason why you sometimes see &quot;US$&quot; and sometimes just &quot;$&quot;.</p>\n<p>If you want to get reproducible results use</p>\n<pre><code>Currency.getInstance(Locale.US).getSymbol(Locale.US). \n</code></pre>\n"},{"tags":[],"owner":{"account_id":27111277,"reputation":11,"user_id":20656406,"display_name":"Divyansh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683295193,"creation_date":1683295193,"answer_id":76183006,"question_id":58612380,"body_markdown":"In kotlin -\r\n\r\n`android.icu.util.Currency.getInstance(&quot;currency_code&quot;).getName(Locale.getDefault(),android.icu.util.Currency.NARROW_SYMBOL_NAME,null)`\r\n\r\nhttps://developer.android.com/reference/kotlin/android/icu/util/Currency#narrow_symbol_name\r\n\r\nhttps://developer.android.com/reference/kotlin/android/icu/util/Currency#getname","title":"Currency.getSymbol() gives &quot;US$&quot; and &quot;$&quot; with different devices","body":"<p>In kotlin -</p>\n<p><code>android.icu.util.Currency.getInstance(&quot;currency_code&quot;).getName(Locale.getDefault(),android.icu.util.Currency.NARROW_SYMBOL_NAME,null)</code></p>\n<p><a href=\"https://developer.android.com/reference/kotlin/android/icu/util/Currency#narrow_symbol_name\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/kotlin/android/icu/util/Currency#narrow_symbol_name</a></p>\n<p><a href=\"https://developer.android.com/reference/kotlin/android/icu/util/Currency#getname\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/kotlin/android/icu/util/Currency#getname</a></p>\n"}],"owner":{"account_id":1587905,"reputation":55,"user_id":1471849,"display_name":"Sandeep"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":891,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":58619198,"answer_count":2,"score":3,"last_activity_date":1683295193,"creation_date":1572369216,"question_id":58612380,"body_markdown":"While Initializing Currency, I set locale ad locale.US\r\nCurrency.getInstance(Locale.US), but getSymbol() gives &quot;US$&quot; and &quot;$ on different devices. getSymbol() gives &quot;$&quot; on samsung, but gives &quot;US$&quot; on moto. How to solve this.","title":"Currency.getSymbol() gives &quot;US$&quot; and &quot;$&quot; with different devices","body":"<p>While Initializing Currency, I set locale ad locale.US\nCurrency.getInstance(Locale.US), but getSymbol() gives \"US$\" and \"$ on different devices. getSymbol() gives \"$\" on samsung, but gives \"US$\" on moto. How to solve this.</p>\n"},{"tags":["java","spring","spring-cloud-stream"],"owner":{"account_id":6795100,"reputation":154,"user_id":5230740,"accept_rate":22,"display_name":"Murillo Goulart"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683295176,"creation_date":1683060747,"question_id":76158789,"body_markdown":"I&#39;m migrating from Spring Cloud Streams and the deprecated StreamListeners to Spring Cloud Function with its Consumers. I had in my applications an Interceptor to configure some log metadata and User context (thread local information) for my input messages. That was done with this kind of interceptor: https://stackoverflow.com/a/37466442/5230740.\r\n\r\nNow, in Spring Cloud Function, the interceptor is no longer working. I found on the internet the feature called `org.springframework.cloud.function.context.catalog.FunctionAroundWrapper` and it works, but I didn&#39;t find good documentation about it in the Spring pages. So, I don`t know if I can rely on this feature or I should use another approach?","title":"How to intercept Spring Cloud Function messages","body":"<p>I'm migrating from Spring Cloud Streams and the deprecated StreamListeners to Spring Cloud Function with its Consumers. I had in my applications an Interceptor to configure some log metadata and User context (thread local information) for my input messages. That was done with this kind of interceptor: <a href=\"https://stackoverflow.com/a/37466442/5230740\">https://stackoverflow.com/a/37466442/5230740</a>.</p>\n<p>Now, in Spring Cloud Function, the interceptor is no longer working. I found on the internet the feature called <code>org.springframework.cloud.function.context.catalog.FunctionAroundWrapper</code> and it works, but I didn't find good documentation about it in the Spring pages. So, I don`t know if I can rely on this feature or I should use another approach?</p>\n"},{"tags":["java","spring","postgresql","spring-boot","event-handling"],"comments":[{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1683252051,"post_id":76177445,"comment_id":134342023,"body_markdown":"I don&#39;t think you can, but I&#39;ll wait and see if I&#39;m corrected.","body":"I don&#39;t think you can, but I&#39;ll wait and see if I&#39;m corrected."}],"answers":[{"comments":[{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1683306070,"post_id":76182963,"comment_id":134351968,"body_markdown":"Interesting. PostgreSQL surprises me again.","body":"Interesting. PostgreSQL surprises me again."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683294946,"creation_date":1683294946,"answer_id":76182963,"question_id":76177445,"body_markdown":"This can&#39;t be done with Spring annotations because LISTEN/NOTIFY function is not available generally on every database. It is only available on PostgreSQL.\r\n\r\nThe logic need to be implemented in plain Java and JDBC as part of Spring Boot. The PostgreSQL driver provides a PGConnection interface with a method getNotifications() for reading of notifications. Sample code snippets:\r\n\r\nFirst get the PGConnection and exceute LISTEN:\r\n\r\n    import java.sql.*;\r\n    import org.postgresql.*;\r\n        Class.forName(&quot;org.postgresql.Driver&quot;);\r\n        String url = &quot;jdbc:postgresql://localhost:5432/test&quot;;\r\n        Connection sqlConn = DriverManager.getConnection(url,&quot;test&quot;,&quot;&quot;);\r\n        PGConnection pgConn = sqlConn.unwrap(org.postgresql.PGConnection.class);\r\n        Statement stmt = pgConn.createStatement();\r\n        stmt.execute(&quot;LISTEN status_change&quot;);\r\n        stmt.close();\r\n\r\nThen get notifications and wait:\r\n\r\n    while (true) {\r\n        PGNotification notifications[] = pgConn.getNotifications();\r\n        if (notifications != null) {\r\n            for (PGNotification notification : notifications) {\r\n                System.out.println(&quot;Got notification: &quot; + notification.getName());\r\n            }\r\n        }\r\n        // wait a while before checking again for new  notifications\r\n        Thread.sleep(500);\r\n    }\r\n\r\nCode snippets based on [https://access.crunchydata.com/documentation/pgjdbc/42.1.0/listennotify.html][1]\r\n\r\n\r\n  [1]: https://access.crunchydata.com/documentation/pgjdbc/42.1.0/listennotify.html","title":"Implementing LISTEN command of postgres in spring boot","body":"<p>This can't be done with Spring annotations because LISTEN/NOTIFY function is not available generally on every database. It is only available on PostgreSQL.</p>\n<p>The logic need to be implemented in plain Java and JDBC as part of Spring Boot. The PostgreSQL driver provides a PGConnection interface with a method getNotifications() for reading of notifications. Sample code snippets:</p>\n<p>First get the PGConnection and exceute LISTEN:</p>\n<pre><code>import java.sql.*;\nimport org.postgresql.*;\n    Class.forName(&quot;org.postgresql.Driver&quot;);\n    String url = &quot;jdbc:postgresql://localhost:5432/test&quot;;\n    Connection sqlConn = DriverManager.getConnection(url,&quot;test&quot;,&quot;&quot;);\n    PGConnection pgConn = sqlConn.unwrap(org.postgresql.PGConnection.class);\n    Statement stmt = pgConn.createStatement();\n    stmt.execute(&quot;LISTEN status_change&quot;);\n    stmt.close();\n</code></pre>\n<p>Then get notifications and wait:</p>\n<pre><code>while (true) {\n    PGNotification notifications[] = pgConn.getNotifications();\n    if (notifications != null) {\n        for (PGNotification notification : notifications) {\n            System.out.println(&quot;Got notification: &quot; + notification.getName());\n        }\n    }\n    // wait a while before checking again for new  notifications\n    Thread.sleep(500);\n}\n</code></pre>\n<p>Code snippets based on <a href=\"https://access.crunchydata.com/documentation/pgjdbc/42.1.0/listennotify.html\" rel=\"nofollow noreferrer\">https://access.crunchydata.com/documentation/pgjdbc/42.1.0/listennotify.html</a></p>\n"}],"owner":{"account_id":10248384,"reputation":11,"user_id":7563466,"display_name":"PratRetina"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":670,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683294946,"creation_date":1683235378,"question_id":76177445,"body_markdown":"I have created a trigger on a table and using pg_notify to send the event to a channel status_change. Can I implement a listener in spring boot that listens to each event whenever this trigger is activated.\r\n\r\nI tried EventListener but that doesn&#39;t work\r\n\r\n\r\n```\r\n`@EventListener(condition = &quot;#event.channel == &#39;status_change&#39;&quot;)\r\n    @Transactional\r\n    public void handleMaintenanceUpdate(PGNotification event) {\r\n        System.out.println(&quot;REceived Notification&quot;);\r\n    }`\r\n```\r\n","title":"Implementing LISTEN command of postgres in spring boot","body":"<p>I have created a trigger on a table and using pg_notify to send the event to a channel status_change. Can I implement a listener in spring boot that listens to each event whenever this trigger is activated.</p>\n<p>I tried EventListener but that doesn't work</p>\n<pre><code>`@EventListener(condition = &quot;#event.channel == 'status_change'&quot;)\n    @Transactional\n    public void handleMaintenanceUpdate(PGNotification event) {\n        System.out.println(&quot;REceived Notification&quot;);\n    }`\n</code></pre>\n"},{"tags":["java","gson","lombok","notnull"],"comments":[{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1684075802,"post_id":76182938,"comment_id":134460492,"body_markdown":"&quot;and know that name is never null&quot;; just as side note: Gson does not check this and ignores the `@NotNull` annotation","body":"&quot;and know that name is never null&quot;; just as side note: Gson does not check this and ignores the <code>@NotNull</code> annotation"}],"answers":[{"tags":[],"owner":{"account_id":15718721,"reputation":988,"user_id":11342225,"display_name":"alea"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683294792,"creation_date":1683294792,"answer_id":76182939,"question_id":76182938,"body_markdown":"**This solution works with Java 14 or higher.**\r\n\r\nOne possible way is using a `record`. Instead of writing a class and generating the getter via lombok, it is also possible to do this:\r\n\r\n    public record Foo(int id, @NotNull String name) { \r\n    }\r\n\r\nIt will automatically generate a method `name()` which has the `@NotNull` annotation.\r\n\r\nIf you later need to set a field of a record, you need to follow [this solution][1] and do something like this:\r\n\r\n    public record Foo(int id, @NotNull String name) {\r\n        \r\n        @NotNull\r\n        public Foo withId(int id) {\r\n            return new Foo(id, name());\r\n        }\r\n    \r\n    }\r\n\r\nThis will allow to modify the id later. Only disadvantage is that you need to type out the method to set the field (`withId`) and that you have a new record that you need to handle correctly.\r\n\r\n    Foo foo = new Gson().fromJson(json, Foo .class);\r\n    foo = foo.withId(42);\r\n\r\n  [1]: https://stackoverflow.com/a/65254270/11342225","title":"Prevent false positve null warnings from IDE with gson and notNull annoation","body":"<p><strong>This solution works with Java 14 or higher.</strong></p>\n<p>One possible way is using a <code>record</code>. Instead of writing a class and generating the getter via lombok, it is also possible to do this:</p>\n<pre><code>public record Foo(int id, @NotNull String name) { \n}\n</code></pre>\n<p>It will automatically generate a method <code>name()</code> which has the <code>@NotNull</code> annotation.</p>\n<p>If you later need to set a field of a record, you need to follow <a href=\"https://stackoverflow.com/a/65254270/11342225\">this solution</a> and do something like this:</p>\n<pre><code>public record Foo(int id, @NotNull String name) {\n    \n    @NotNull\n    public Foo withId(int id) {\n        return new Foo(id, name());\n    }\n\n}\n</code></pre>\n<p>This will allow to modify the id later. Only disadvantage is that you need to type out the method to set the field (<code>withId</code>) and that you have a new record that you need to handle correctly.</p>\n<pre><code>Foo foo = new Gson().fromJson(json, Foo .class);\nfoo = foo.withId(42);\n</code></pre>\n"}],"owner":{"account_id":15718721,"reputation":988,"user_id":11342225,"display_name":"alea"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76182939,"answer_count":1,"score":1,"last_activity_date":1683294792,"creation_date":1683294792,"question_id":76182938,"body_markdown":"I have a simple json object.\r\n\r\n    {&quot;id&quot;: 1, &quot;name&quot;: &quot;John&quot;}\r\n\r\nMy class for reading this object is the following.\r\n\r\n    @Getter\r\n    public class Foo {\r\n        \r\n        @Setter\r\n        private long id;\r\n        \r\n        @NotNull\r\n        private String name;\r\n    }\r\n\r\nI am using lombok for generating the getters and annotating not-null fields with jetbrain&#39;s `@NotNull` annotation.\r\n\r\n    String json = &quot;{\\&quot;id\\&quot;: 1, \\&quot;name\\&quot;: \\&quot;John\\&quot;}&quot;;\r\n\r\n    Foo foo = new Gson().fromJson(json, Foo.class);\r\n    foo.setId(42);\r\n\r\nReading the json works just fine.\r\n\r\nThe only problem that I have that I am getting an error from the IDE `Not-null fields must be initialized` from my `name` field.\r\n\r\nIt is technically correct, my `name` field is not initalized in the constructor.\r\n\r\nHowever, I am using Gson to deserialize my object and know that `name` is never `null`. I do not want to create a normal object, just read from json.\r\n\r\nAlso I need the annotation `@NotNull`, because lomboks `@Getter` will generate me a getter with an `@NotNull` annotation.\r\n\r\nI also have some cases where I want to replace one of my field (`id`) with another value. \r\n\r\nI do not want to use a plain Java getter or remove the annoation from my attribute. \r\n\r\nWhat can I do?","title":"Prevent false positve null warnings from IDE with gson and notNull annoation","body":"<p>I have a simple json object.</p>\n<pre><code>{&quot;id&quot;: 1, &quot;name&quot;: &quot;John&quot;}\n</code></pre>\n<p>My class for reading this object is the following.</p>\n<pre><code>@Getter\npublic class Foo {\n    \n    @Setter\n    private long id;\n    \n    @NotNull\n    private String name;\n}\n</code></pre>\n<p>I am using lombok for generating the getters and annotating not-null fields with jetbrain's <code>@NotNull</code> annotation.</p>\n<pre><code>String json = &quot;{\\&quot;id\\&quot;: 1, \\&quot;name\\&quot;: \\&quot;John\\&quot;}&quot;;\n\nFoo foo = new Gson().fromJson(json, Foo.class);\nfoo.setId(42);\n</code></pre>\n<p>Reading the json works just fine.</p>\n<p>The only problem that I have that I am getting an error from the IDE <code>Not-null fields must be initialized</code> from my <code>name</code> field.</p>\n<p>It is technically correct, my <code>name</code> field is not initalized in the constructor.</p>\n<p>However, I am using Gson to deserialize my object and know that <code>name</code> is never <code>null</code>. I do not want to create a normal object, just read from json.</p>\n<p>Also I need the annotation <code>@NotNull</code>, because lomboks <code>@Getter</code> will generate me a getter with an <code>@NotNull</code> annotation.</p>\n<p>I also have some cases where I want to replace one of my field (<code>id</code>) with another value.</p>\n<p>I do not want to use a plain Java getter or remove the annoation from my attribute.</p>\n<p>What can I do?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":20592822,"reputation":21,"user_id":15116022,"display_name":"Arpit Saxena"},"score":0,"creation_date":1683298120,"post_id":76182848,"comment_id":134350088,"body_markdown":"Does this help ? https://stackoverflow.com/questions/69779045/stuck-on-javafx-graphics-does-not-export-com-sun-javafx-sg-prism-to-unnamed-modu","body":"Does this help ? <a href=\"https://stackoverflow.com/questions/69779045/stuck-on-javafx-graphics-does-not-export-com-sun-javafx-sg-prism-to-unnamed-modu\" title=\"stuck on javafx graphics does not export com sun javafx sg prism to unnamed modu\">stackoverflow.com/questions/69779045/&hellip;</a>"},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1683303583,"post_id":76182848,"comment_id":134351424,"body_markdown":"It looks like the module file needs to be set up.  Also worth pondering if this project needs to be modular.","body":"It looks like the module file needs to be set up.  Also worth pondering if this project needs to be modular."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1683316171,"post_id":76182848,"comment_id":134353923,"body_markdown":"@DaveB &quot;_Also worth pondering if this project needs to be modular_&quot; -- Given the nature of the error, the OP&#39;s code is already non-modular. Or at least not being launched as a module (i.e., if the OP has a `module-info.java` file, then it&#39;s being ignored). Unless you mean something else (e.g., though technically unsupported, place JavaFX on the class-path instead of the module-path)?","body":"@DaveB &quot;<i>Also worth pondering if this project needs to be modular</i>&quot; -- Given the nature of the error, the OP&#39;s code is already non-modular. Or at least not being launched as a module (i.e., if the OP has a <code>module-info.java</code> file, then it&#39;s being ignored). Unless you mean something else (e.g., though technically unsupported, place JavaFX on the class-path instead of the module-path)?"},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1683319237,"post_id":76182848,"comment_id":134354488,"body_markdown":"@Slaw, don&#39;t you get the, &quot;does not export ... to unamed module&quot;, error when you have a module-info.java file but it&#39;s missing some export statements?  I&#39;m also thinking that you can define a project as modular in a Gradle build, but still leave out the module-info.java file - in which case you would get the same errors.","body":"@Slaw, don&#39;t you get the, &quot;does not export ... to unamed module&quot;, error when you have a module-info.java file but it&#39;s missing some export statements?  I&#39;m also thinking that you can define a project as modular in a Gradle build, but still leave out the module-info.java file - in which case you would get the same errors."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1683348191,"post_id":76182848,"comment_id":134356797,"body_markdown":"@DaveB This error specifically is occurring because `javafx.media` has been placed on the class-path and become part of the unnamed module, yet `javafx.graphics` was placed on the module-path and resolved as a named module, and so the _qualified_ exports defined by `javafx.graphics` that export certain things to `javafx.media` no longer work properly. The first duplicate goes into more detail.","body":"@DaveB This error specifically is occurring because <code>javafx.media</code> has been placed on the class-path and become part of the unnamed module, yet <code>javafx.graphics</code> was placed on the module-path and resolved as a named module, and so the <i>qualified</i> exports defined by <code>javafx.graphics</code> that export certain things to <code>javafx.media</code> no longer work properly. The first duplicate goes into more detail."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1683348565,"post_id":76182848,"comment_id":134356826,"body_markdown":"Code without a module-info descriptor that is placed on the module-path and resolved as a module becomes an &quot;automatic module&quot;, which is still a _named_ module. Though I&#39;m not sure if that can apply to the &quot;main module&quot; (i.e., can `--module` target an automatic module?). An unnamed module is where all code on the class-path ends up (and which any module-info descriptor in such code is ignored; this is how you can use modular dependencies as if they weren&#39;t modular). And if **your** module-info descriptor(s) was &quot;missing&quot; `exports` directives, then I&#39;d expect a _compilation_ error.","body":"Code without a module-info descriptor that is placed on the module-path and resolved as a module becomes an &quot;automatic module&quot;, which is still a <i>named</i> module. Though I&#39;m not sure if that can apply to the &quot;main module&quot; (i.e., can <code>--module</code> target an automatic module?). An unnamed module is where all code on the class-path ends up (and which any module-info descriptor in such code is ignored; this is how you can use modular dependencies as if they weren&#39;t modular). And if <b>your</b> module-info descriptor(s) was &quot;missing&quot; <code>exports</code> directives, then I&#39;d expect a <i>compilation</i> error."}],"owner":{"account_id":28517748,"reputation":1,"user_id":21826885,"display_name":"Chris Tapia"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683300560,"answer_count":0,"score":0,"last_activity_date":1683294752,"creation_date":1683294115,"question_id":76182848,"body_markdown":"It&#39;s giving me this error\r\n\r\n```\r\nException in Application start method\r\njava.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\r\nCaused by: java.lang.RuntimeException: Exception in Application start method\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:893)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.lang.IllegalAccessError: class com.sun.media.jfxmediaimpl.NativeMediaManager (in unnamed module @0x7b61a0ef) cannot access class com.sun.glass.utils.NativeLibLoader (in module javafx.graphics) because module javafx.graphics does not export com.sun.glass.utils to unnamed module @0x7b61a0ef\r\n\tat com.sun.media.jfxmediaimpl.NativeMediaManager.lambda$new$0(NativeMediaManager.java:110)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\r\n\tat com.sun.media.jfxmediaimpl.NativeMediaManager.&lt;init&gt;(NativeMediaManager.java:107)\r\n\tat com.sun.media.jfxmediaimpl.NativeMediaManager$NativeMediaManagerInitializer.&lt;clinit&gt;(NativeMediaManager.java:77)\r\n\tat com.sun.media.jfxmediaimpl.NativeMediaManager.getDefaultInstance(NativeMediaManager.java:89)\r\n\tat com.sun.media.jfxmedia.MediaManager.canPlayProtocol(MediaManager.java:78)\r\n\tat com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:240)\r\n\tat javafx.scene.media.Media.&lt;init&gt;(Media.java:392)\r\n\tat Final.StageEleven(Final.java:288)\r\n\tat Final.start(Final.java:37)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:839)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:483)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\r\n\tat javafx.graphics@20.0.1/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n\tat javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185)\r\n\t... 1 more\r\nException running application Final\r\n```\r\n\r\n\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.layout.GridPane;\r\nimport javafx.stage.Stage;\r\nimport java.io.File;\r\nimport javafx.scene.media.Media;\r\nimport javafx.scene.media.MediaPlayer;\r\n\r\npublic class Final extends Application{\r\n\r\n\tprivate Label outputmessage;\r\n\tprivate ImageView BannerImage1, BannerImage2, BannerImage3; \r\n\tprivate Image image1,image2,image3;\r\n\tprivate GridPane Grid;\r\n\tprivate Stage stage;\r\n\tprivate Button button1, button2, button3; \r\n\tprivate Scene scene1,scene2,scene3,scene4,scene5,scene6,scene7,scene8,\r\n\t\tscene9,scene10,scene11,scene12,scene13, scene14,scene15,scene16,scene17,scene18,scene19,scene20;\r\n\tpublic void start(Stage primarystage) throws Exception\r\n\t{\r\n\t\tstage = primarystage;\r\n\t\tstage.setTitle(&quot;The World of Leway&quot;);\r\n\t\tscene1 = Stageone();\r\n\t\tscene2 = Stagetwo();\r\n\t\tscene3 = StageThree();\r\n\t\tscene4 = StageFour();\r\n\t\tscene5 = StageFive();\r\n\t\tscene6 = StageSix();\r\n\t\tscene7 = StageSeven();\r\n\t\tscene8 = StageEight();\r\n\t\tscene9 = StageNine();\r\n\t\tscene10 = StageTen();\r\n\t\tscene11 = StageEleven();\r\n\t\tscene12 = StageTwelve();\r\n\t\tscene13 = StageThirteen();\r\n\t\tscene14 = StageFourteen();\r\n\t\tscene15 = StageFifteen();\r\n\t\tscene16 = StageSixteen();\r\n\t\tscene17 = StageSeventeen();\r\n\t\tscene18 = StageEighteen();\r\n\t\tscene19 = StageNineteen();\r\n\t\tscene20 = StageTwenty();\r\n\t\tstage.setScene(scene1);\r\n\t\tstage.show();\r\n\t}\r\n\tprivate Scene Stageone()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;You soon begin to wake up in a room, sitting on a chair, from behind you hear a woman&#39;s voice saying, &#39;You have died.&#39; A woman with blue hair walked past you, taking a seat in front you.&quot;\r\n\t\t\t\t+ &quot;\\nAs she sat, she spoke once more, &#39;After dying I have taken your soul and brought it to this world. You can say it&#39;s sort of a limbo. My name is Aqua. I have summoned you here to ask you one thing.&#39;&quot;);\r\n\t\timage1 = new Image(&quot;file:Goddess.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene2));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene1;\r\n\t}\r\n\t\r\n\tprivate Scene Stagetwo()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Please take up arm and defeat the demon lord of this world. You can choose between these three weapons.&quot;);\r\n\t\timage1 = new Image(&quot;file:greatsword.jpeg&quot;);\r\n\t\timage2 = new Image(&quot;file:SwordandShield.jpg&quot;);\r\n\t\timage3 = new Image(&quot;file:bow.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tBannerImage3.setFitWidth(100);\r\n\t\tBannerImage3.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Great Sword&quot;);\r\n\t\tbutton2 = new Button(&quot;Sword and Shield&quot;);\r\n\t\tbutton3 = new Button(&quot;Bow&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene3));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene3));\r\n\t\tbutton3.setOnAction(e -&gt; switchScenes(scene3));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\tGrid.add(button3, 2, 2);\r\n\t\treturn scene2;\r\n\t}\r\n\t\r\n\tprivate Scene StageThree()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;After having picked your weapon, you soon are engulfed in a bright light and after the light disapates you appear in the middle of a city.&quot;\r\n\t\t\t\t+ &quot;\\nAfter walking around for a while, taking in the sights of a different world and city, you are soon stopped by a knight of the city. he begans to ask a series of questions, until he spots your weapon. &#39;Please Come with me.&#39;&quot;\r\n\t\t\t\t+ &quot;\\nHe said as lead you to the castle in the middle of the city.&quot;);\r\n\t\timage1 = new Image(&quot;file:CityStreets.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene4));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene3;\r\n\t}\r\n\t\r\n\tprivate Scene StageFour()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Meeting with king&quot;);\r\n\t\timage1 = new Image(&quot;file:king.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene5));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene4;\r\n\t}\r\n\t\r\n\tprivate Scene StageFive()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Training Path&quot;);\r\n\t\timage1 = new Image(&quot;file:denseforest.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:lightforest.jpg&quot;);\r\n\t\timage3 = new Image(&quot;file:demonlordcastle.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tBannerImage3.setFitWidth(100);\r\n\t\tBannerImage3.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Train Hard&quot;);\r\n\t\tbutton2 = new Button(&quot;Train Light&quot;);\r\n\t\tbutton3 = new Button(&quot;Straight for demon king&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene6));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene7));\r\n\t\tbutton3.setOnAction(e -&gt; switchScenes(scene8));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\tGrid.add(button3, 2, 2);\r\n\t\treturn scene5;\r\n\t}\r\n\t\r\n\tprivate Scene StageSix()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Go down training hard path and walk around, which path you take&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:middle.jpg&quot;);\r\n\t\timage3 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tBannerImage3.setFitWidth(100);\r\n\t\tBannerImage3.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Right&quot;);\r\n\t\tbutton2 = new Button(&quot;Middle&quot;);\r\n\t\tbutton3 = new Button(&quot;Left&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene9));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene20));\r\n\t\tbutton3.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\tGrid.add(button3, 2, 2);\r\n\t\treturn scene6;\r\n\t}\r\n\t\r\n\tprivate Scene StageSeven()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;go down Train lightly path, which way&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:middle.jpg&quot;);\r\n\t\timage3 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tBannerImage3.setFitWidth(100);\r\n\t\tBannerImage3.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Right&quot;);\r\n\t\tbutton2 = new Button(&quot;Middle&quot;);\r\n\t\tbutton3 = new Button(&quot;Left&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene15));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene10));\r\n\t\tbutton3.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\tGrid.add(button3, 2, 2);\r\n\t\treturn scene7;\r\n\t}\r\n\t\r\n\tprivate Scene StageEight()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;go straight for demon lord&quot;);\r\n\t\timage1 = new Image(&quot;file:demonlordcastle.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene18));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene8;\r\n\t}\r\n\tprivate Scene StageNine()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Run into a group of orcs and beat them easily. You go back to looking find another fork, which path&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Left&quot;);\r\n\t\tbutton2 = new Button(&quot;Right&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene12));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\treturn scene9;\r\n\t}\r\n\t\r\n\tprivate Scene StageTen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;After looking for something to fight around the forest, you were turned around and wnet around in a circle.&quot;);\r\n\t\timage1 = new Image(&quot;file:denseforest.jpg&quot;);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene5));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene10;\r\n\t}\r\n\t\r\n\tprivate Scene StageEleven()\r\n\t{\r\n\t\tString gos = &quot;gos.mp3&quot;;\r\n\t\tMedia hit = new Media(new File(gos).toURI().toString());\r\n\t\tMediaPlayer mediaplayer = new MediaPlayer(hit);\r\n\t\tmediaplayer.play();\r\n\t\toutputmessage = new Label(&quot;You have run into a large demon king patrol unit and were killed.&quot;);\r\n\t\timage1 = new Image(&quot;gameover.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tbutton1 = new Button(&quot;Retry?&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene1));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene11;\r\n\t}\r\n\t\r\n\tprivate Scene StageTwelve()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Find dragon and beat it with ease as you attune to your weapon, awakening it&#39;s full potentail, which way do you go.&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Right&quot;);\r\n\t\tbutton2 = new Button(&quot;Left&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene13));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\treturn scene12;\r\n\t}\r\n\t\r\n\tprivate Scene StageThirteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Meeting the demon king&quot;);\r\n\t\timage1 = new Image(&quot;file:DMPic.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene14));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene13;\r\n\t}\r\n\t\r\n\tprivate Scene StageFourteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Good Ending&quot;);\r\n\t\timage1 = new Image(&quot;goodending.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\treturn scene14;\r\n\t}\r\n\t\r\n\tprivate Scene StageFifteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Finding a group of orcs, which path will you take&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Right&quot;);\r\n\t\tbutton2 = new Button(&quot;Left&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene16));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\treturn scene15;\r\n\t}\r\n\t\r\n\tprivate Scene StageSixteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Meeting the demon king&quot;);\r\n\t\timage1 = new Image(&quot;file:DMPic.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene17));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene16;\r\n\t}\r\n\t\r\n\tprivate Scene StageSeventeen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Neutrual Ending&quot;);\r\n\t\timage1 = new Image(&quot;file:neutrualending.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\treturn scene17;\r\n\t}\r\n\t\r\n\tprivate Scene StageEighteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;go straight for demon lord&quot;);\r\n\t\timage1 = new Image(&quot;file:DMPic.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene19));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene18;\r\n\t}\r\n\t\r\n\tprivate Scene StageNineteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Bad Ending&quot;);\r\n\t\timage1 = new Image(&quot;badending.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\treturn scene19;\r\n\t}\r\n\r\n\tprivate Scene StageTwenty()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;After looking for something to fight around the forest, you were turned around and wnet around in a circle.&quot;);\r\n\t\timage1 = new Image(&quot;file:lightforest.jpg&quot;);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene7));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene20;\r\n\t}\r\n\t\r\n\tpublic void switchScenes(Scene scene)\r\n\t{\r\n\t\tstage.setScene(scene);\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tlaunch(args);\r\n\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\nI have already set up the run config and all that.","title":"What can I do to make the code run properly","body":"<p>It's giving me this error</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:893)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.IllegalAccessError: class com.sun.media.jfxmediaimpl.NativeMediaManager (in unnamed module @0x7b61a0ef) cannot access class com.sun.glass.utils.NativeLibLoader (in module javafx.graphics) because module javafx.graphics does not export com.sun.glass.utils to unnamed module @0x7b61a0ef\n    at com.sun.media.jfxmediaimpl.NativeMediaManager.lambda$new$0(NativeMediaManager.java:110)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\n    at com.sun.media.jfxmediaimpl.NativeMediaManager.&lt;init&gt;(NativeMediaManager.java:107)\n    at com.sun.media.jfxmediaimpl.NativeMediaManager$NativeMediaManagerInitializer.&lt;clinit&gt;(NativeMediaManager.java:77)\n    at com.sun.media.jfxmediaimpl.NativeMediaManager.getDefaultInstance(NativeMediaManager.java:89)\n    at com.sun.media.jfxmedia.MediaManager.canPlayProtocol(MediaManager.java:78)\n    at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:240)\n    at javafx.scene.media.Media.&lt;init&gt;(Media.java:392)\n    at Final.StageEleven(Final.java:288)\n    at Final.start(Final.java:37)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:839)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:483)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\n    at javafx.graphics@20.0.1/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185)\n    ... 1 more\nException running application Final\n</code></pre>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.GridPane;\nimport javafx.stage.Stage;\nimport java.io.File;\nimport javafx.scene.media.Media;\nimport javafx.scene.media.MediaPlayer;\n\npublic class Final extends Application{\n\n    private Label outputmessage;\n    private ImageView BannerImage1, BannerImage2, BannerImage3; \n    private Image image1,image2,image3;\n    private GridPane Grid;\n    private Stage stage;\n    private Button button1, button2, button3; \n    private Scene scene1,scene2,scene3,scene4,scene5,scene6,scene7,scene8,\n        scene9,scene10,scene11,scene12,scene13, scene14,scene15,scene16,scene17,scene18,scene19,scene20;\n    public void start(Stage primarystage) throws Exception\n    {\n        stage = primarystage;\n        stage.setTitle(&quot;The World of Leway&quot;);\n        scene1 = Stageone();\n        scene2 = Stagetwo();\n        scene3 = StageThree();\n        scene4 = StageFour();\n        scene5 = StageFive();\n        scene6 = StageSix();\n        scene7 = StageSeven();\n        scene8 = StageEight();\n        scene9 = StageNine();\n        scene10 = StageTen();\n        scene11 = StageEleven();\n        scene12 = StageTwelve();\n        scene13 = StageThirteen();\n        scene14 = StageFourteen();\n        scene15 = StageFifteen();\n        scene16 = StageSixteen();\n        scene17 = StageSeventeen();\n        scene18 = StageEighteen();\n        scene19 = StageNineteen();\n        scene20 = StageTwenty();\n        stage.setScene(scene1);\n        stage.show();\n    }\n    private Scene Stageone()\n    {\n        outputmessage = new Label(&quot;You soon begin to wake up in a room, sitting on a chair, from behind you hear a woman's voice saying, 'You have died.' A woman with blue hair walked past you, taking a seat in front you.&quot;\n                + &quot;\\nAs she sat, she spoke once more, 'After dying I have taken your soul and brought it to this world. You can say it's sort of a limbo. My name is Aqua. I have summoned you here to ask you one thing.'&quot;);\n        image1 = new Image(&quot;file:Goddess.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene2));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene1;\n    }\n    \n    private Scene Stagetwo()\n    {\n        outputmessage = new Label(&quot;Please take up arm and defeat the demon lord of this world. You can choose between these three weapons.&quot;);\n        image1 = new Image(&quot;file:greatsword.jpeg&quot;);\n        image2 = new Image(&quot;file:SwordandShield.jpg&quot;);\n        image3 = new Image(&quot;file:bow.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        BannerImage3.setFitWidth(100);\n        BannerImage3.setFitHeight(100);\n        button1 = new Button(&quot;Great Sword&quot;);\n        button2 = new Button(&quot;Sword and Shield&quot;);\n        button3 = new Button(&quot;Bow&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene3));\n        button2.setOnAction(e -&gt; switchScenes(scene3));\n        button3.setOnAction(e -&gt; switchScenes(scene3));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        Grid.add(button3, 2, 2);\n        return scene2;\n    }\n    \n    private Scene StageThree()\n    {\n        outputmessage = new Label(&quot;After having picked your weapon, you soon are engulfed in a bright light and after the light disapates you appear in the middle of a city.&quot;\n                + &quot;\\nAfter walking around for a while, taking in the sights of a different world and city, you are soon stopped by a knight of the city. he begans to ask a series of questions, until he spots your weapon. 'Please Come with me.'&quot;\n                + &quot;\\nHe said as lead you to the castle in the middle of the city.&quot;);\n        image1 = new Image(&quot;file:CityStreets.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene4));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene3;\n    }\n    \n    private Scene StageFour()\n    {\n        outputmessage = new Label(&quot;Meeting with king&quot;);\n        image1 = new Image(&quot;file:king.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene5));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene4;\n    }\n    \n    private Scene StageFive()\n    {\n        outputmessage = new Label(&quot;Training Path&quot;);\n        image1 = new Image(&quot;file:denseforest.jpg&quot;);\n        image2 = new Image(&quot;file:lightforest.jpg&quot;);\n        image3 = new Image(&quot;file:demonlordcastle.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        BannerImage3.setFitWidth(100);\n        BannerImage3.setFitHeight(100);\n        button1 = new Button(&quot;Train Hard&quot;);\n        button2 = new Button(&quot;Train Light&quot;);\n        button3 = new Button(&quot;Straight for demon king&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene6));\n        button2.setOnAction(e -&gt; switchScenes(scene7));\n        button3.setOnAction(e -&gt; switchScenes(scene8));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        Grid.add(button3, 2, 2);\n        return scene5;\n    }\n    \n    private Scene StageSix()\n    {\n        outputmessage = new Label(&quot;Go down training hard path and walk around, which path you take&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:middle.jpg&quot;);\n        image3 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        BannerImage3.setFitWidth(100);\n        BannerImage3.setFitHeight(100);\n        button1 = new Button(&quot;Right&quot;);\n        button2 = new Button(&quot;Middle&quot;);\n        button3 = new Button(&quot;Left&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene9));\n        button2.setOnAction(e -&gt; switchScenes(scene20));\n        button3.setOnAction(e -&gt; switchScenes(scene11));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        Grid.add(button3, 2, 2);\n        return scene6;\n    }\n    \n    private Scene StageSeven()\n    {\n        outputmessage = new Label(&quot;go down Train lightly path, which way&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:middle.jpg&quot;);\n        image3 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        BannerImage3.setFitWidth(100);\n        BannerImage3.setFitHeight(100);\n        button1 = new Button(&quot;Right&quot;);\n        button2 = new Button(&quot;Middle&quot;);\n        button3 = new Button(&quot;Left&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene15));\n        button2.setOnAction(e -&gt; switchScenes(scene10));\n        button3.setOnAction(e -&gt; switchScenes(scene11));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        Grid.add(button3, 2, 2);\n        return scene7;\n    }\n    \n    private Scene StageEight()\n    {\n        outputmessage = new Label(&quot;go straight for demon lord&quot;);\n        image1 = new Image(&quot;file:demonlordcastle.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene18));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene8;\n    }\n    private Scene StageNine()\n    {\n        outputmessage = new Label(&quot;Run into a group of orcs and beat them easily. You go back to looking find another fork, which path&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        button1 = new Button(&quot;Left&quot;);\n        button2 = new Button(&quot;Right&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene12));\n        button2.setOnAction(e -&gt; switchScenes(scene11));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        return scene9;\n    }\n    \n    private Scene StageTen()\n    {\n        outputmessage = new Label(&quot;After looking for something to fight around the forest, you were turned around and wnet around in a circle.&quot;);\n        image1 = new Image(&quot;file:denseforest.jpg&quot;);\n        BannerImage1.setFitHeight(100);\n        BannerImage1.setFitWidth(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene5));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene10;\n    }\n    \n    private Scene StageEleven()\n    {\n        String gos = &quot;gos.mp3&quot;;\n        Media hit = new Media(new File(gos).toURI().toString());\n        MediaPlayer mediaplayer = new MediaPlayer(hit);\n        mediaplayer.play();\n        outputmessage = new Label(&quot;You have run into a large demon king patrol unit and were killed.&quot;);\n        image1 = new Image(&quot;gameover.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        button1 = new Button(&quot;Retry?&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene1));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene11;\n    }\n    \n    private Scene StageTwelve()\n    {\n        outputmessage = new Label(&quot;Find dragon and beat it with ease as you attune to your weapon, awakening it's full potentail, which way do you go.&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        button1 = new Button(&quot;Right&quot;);\n        button2 = new Button(&quot;Left&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene11));\n        button2.setOnAction(e -&gt; switchScenes(scene13));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        return scene12;\n    }\n    \n    private Scene StageThirteen()\n    {\n        outputmessage = new Label(&quot;Meeting the demon king&quot;);\n        image1 = new Image(&quot;file:DMPic.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene14));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene13;\n    }\n    \n    private Scene StageFourteen()\n    {\n        outputmessage = new Label(&quot;Good Ending&quot;);\n        image1 = new Image(&quot;goodending.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        return scene14;\n    }\n    \n    private Scene StageFifteen()\n    {\n        outputmessage = new Label(&quot;Finding a group of orcs, which path will you take&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        button1 = new Button(&quot;Right&quot;);\n        button2 = new Button(&quot;Left&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene11));\n        button2.setOnAction(e -&gt; switchScenes(scene16));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        return scene15;\n    }\n    \n    private Scene StageSixteen()\n    {\n        outputmessage = new Label(&quot;Meeting the demon king&quot;);\n        image1 = new Image(&quot;file:DMPic.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene17));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene16;\n    }\n    \n    private Scene StageSeventeen()\n    {\n        outputmessage = new Label(&quot;Neutrual Ending&quot;);\n        image1 = new Image(&quot;file:neutrualending.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        return scene17;\n    }\n    \n    private Scene StageEighteen()\n    {\n        outputmessage = new Label(&quot;go straight for demon lord&quot;);\n        image1 = new Image(&quot;file:DMPic.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene19));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene18;\n    }\n    \n    private Scene StageNineteen()\n    {\n        outputmessage = new Label(&quot;Bad Ending&quot;);\n        image1 = new Image(&quot;badending.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        return scene19;\n    }\n\n    private Scene StageTwenty()\n    {\n        outputmessage = new Label(&quot;After looking for something to fight around the forest, you were turned around and wnet around in a circle.&quot;);\n        image1 = new Image(&quot;file:lightforest.jpg&quot;);\n        BannerImage1.setFitHeight(100);\n        BannerImage1.setFitWidth(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene7));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene20;\n    }\n    \n    public void switchScenes(Scene scene)\n    {\n        stage.setScene(scene);\n    }\n    \n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        launch(args);\n\n    }\n}\n</code></pre>\n<p>I have already set up the run config and all that.</p>\n"},{"tags":["java","forkjoinpool"],"answers":[{"tags":[],"owner":{"account_id":15265437,"reputation":242,"user_id":11014240,"display_name":"Supersic"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1652103666,"creation_date":1652103666,"answer_id":72172952,"question_id":72145460,"body_markdown":"I read this in the java docs recenty, \r\n&gt;ForkJoinTasks should perform relatively small amounts of computation. Large tasks should be split into smaller subtasks, usually via recursive       \r\n&gt;decomposition. As a very rough rule of thumb, a task should perform more than 100 and less than 10000 basic computational steps, and should avoid indefinite looping. If tasks are too big, then parallelism cannot improve throughput. If too small, then memory and internal task maintenance overhead may overwhelm processing. ","title":"What is the disadvantage of using a ForkJoinPool when it is not needed?","body":"<p>I read this in the java docs recenty,</p>\n<blockquote>\n<p>ForkJoinTasks should perform relatively small amounts of computation. Large tasks should be split into smaller subtasks, usually via recursive<br />\ndecomposition. As a very rough rule of thumb, a task should perform more than 100 and less than 10000 basic computational steps, and should avoid indefinite looping. If tasks are too big, then parallelism cannot improve throughput. If too small, then memory and internal task maintenance overhead may overwhelm processing.</p>\n</blockquote>\n"}],"owner":{"account_id":15265437,"reputation":242,"user_id":11014240,"display_name":"Supersic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":470,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":72172952,"answer_count":1,"score":1,"last_activity_date":1683293847,"creation_date":1651858770,"question_id":72145460,"body_markdown":"Imagine a scenario where a task can be divided into sub-tasks, each of which does some long running process. Assuming that this heavy task occurs only in 5/100 requests submitted to the server. Would it be wise to use a ForkJoinPool for this 5% of tasks? What are the disadvantages of splitting a small task into smaller sub-tasks and using a ForkJoinPool to run said small task? \r\n\r\nAssume that I cannot decide whether to split or not split a task, therefore I split all tasks by default and run it on a ForkJoinPool.","title":"What is the disadvantage of using a ForkJoinPool when it is not needed?","body":"<p>Imagine a scenario where a task can be divided into sub-tasks, each of which does some long running process. Assuming that this heavy task occurs only in 5/100 requests submitted to the server. Would it be wise to use a ForkJoinPool for this 5% of tasks? What are the disadvantages of splitting a small task into smaller sub-tasks and using a ForkJoinPool to run said small task?</p>\n<p>Assume that I cannot decide whether to split or not split a task, therefore I split all tasks by default and run it on a ForkJoinPool.</p>\n"},{"tags":["java","visual-studio-code","javadoc"],"answers":[{"comments":[{"owner":{"account_id":19088616,"reputation":8294,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"score":1,"creation_date":1626254101,"post_id":68375016,"comment_id":120841191,"body_markdown":"To be more specific, it&#39;s [Language Support for Java(TM) by Red Hat](https://marketplace.visualstudio.com/items?itemName=redhat.java) that provides Java Linting, Intellisense, formatting and more..","body":"To be more specific, it&#39;s <a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.java\" rel=\"nofollow noreferrer\">Language Support for Java(TM) by Red Hat</a> that provides Java Linting, Intellisense, formatting and more.."},{"owner":{"account_id":8502865,"reputation":774,"user_id":6375601,"display_name":"nuiun"},"score":0,"creation_date":1626262894,"post_id":68375016,"comment_id":120844742,"body_markdown":"I installed the mentioned https://marketplace.visualstudio.com/items?itemName=redhat.java extension already. Thankyou for the links, I will check if I find something there.","body":"I installed the mentioned <a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.java\" rel=\"nofollow noreferrer\">marketplace.visualstudio.com/items?itemName=redhat.java</a> extension already. Thankyou for the links, I will check if I find something there."},{"owner":{"account_id":8502865,"reputation":774,"user_id":6375601,"display_name":"nuiun"},"score":0,"creation_date":1626263578,"post_id":68375016,"comment_id":120845033,"body_markdown":"@Dinu: if I may ask: what operating system are you running? Are you running OracleJDK or OpenJDK?","body":"@Dinu: if I may ask: what operating system are you running? Are you running OracleJDK or OpenJDK?"},{"owner":{"account_id":19088616,"reputation":8294,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"score":0,"creation_date":1626317730,"post_id":68375016,"comment_id":120862373,"body_markdown":"@nuiun. I&#39;m using openjdk11 in Windows, with java extension pack installed, javadoc can be shown when hovering over the code. Can you share your user and worksapce settings.json for me to check if you turn off some intellisense settings?","body":"@nuiun. I&#39;m using openjdk11 in Windows, with java extension pack installed, javadoc can be shown when hovering over the code. Can you share your user and worksapce settings.json for me to check if you turn off some intellisense settings?"},{"owner":{"account_id":11817142,"reputation":477,"user_id":8647107,"display_name":"Rusu Dinu"},"score":0,"creation_date":1626350788,"post_id":68375016,"comment_id":120872801,"body_markdown":"@nuiun windows 10, oraclejdk 15","body":"@nuiun windows 10, oraclejdk 15"},{"owner":{"account_id":8502865,"reputation":774,"user_id":6375601,"display_name":"nuiun"},"score":0,"creation_date":1626421468,"post_id":68375016,"comment_id":120893155,"body_markdown":"@MollyWang-MSFT I edited the request. It shows a dump of my user settings.yml now.","body":"@MollyWang-MSFT I edited the request. It shows a dump of my user settings.yml now."},{"owner":{"account_id":19088616,"reputation":8294,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"score":0,"creation_date":1626422631,"post_id":68375016,"comment_id":120893592,"body_markdown":"@nuiun. Please Install another java version and set it as `java.home` in vscode to see if this question still exists.","body":"@nuiun. Please Install another java version and set it as <code>java.home</code> in vscode to see if this question still exists."}],"tags":[],"owner":{"account_id":11817142,"reputation":477,"user_id":8647107,"display_name":"Rusu Dinu"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626254470,"creation_date":1626253098,"answer_id":68375016,"question_id":68374716,"body_markdown":"You could try using [this][1] extension pack (it contains the extension [Language Support for Java(TM) by Red Hat][2] that gives the information you&#39;re looking for when hovering over Java code):\r\n\r\n[![enter image description here][3]][3]\r\n\r\nMake sure to also have tooltips enabled. You can read about enabling them [here][4].\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\r\n  [2]: https://marketplace.visualstudio.com/items?itemName=redhat.java\r\n  [3]: https://i.stack.imgur.com/PLS6q.png\r\n  [4]: https://stackoverflow.com/questions/41115285/disable-tooltip-hint-in-visual-studio-code","title":"How to view Java standard library documentation popup in Visual Studio Code with OpenJDK 11 on Ubuntu 21.04?","body":"<p>You could try using <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\">this</a> extension pack (it contains the extension <a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.java\" rel=\"nofollow noreferrer\">Language Support for Java(TM) by Red Hat</a> that gives the information you're looking for when hovering over Java code):</p>\n<p><a href=\"https://i.stack.imgur.com/PLS6q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PLS6q.png\" alt=\"enter image description here\" /></a></p>\n<p>Make sure to also have tooltips enabled. You can read about enabling them <a href=\"https://stackoverflow.com/questions/41115285/disable-tooltip-hint-in-visual-studio-code\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":8502865,"reputation":774,"user_id":6375601,"display_name":"nuiun"},"score":3,"creation_date":1626430648,"post_id":68405844,"comment_id":120896576,"body_markdown":"installing `openjdk-11-doc` and `openjdk-11-source` worked. I think I had installed `openjdk-11-doc` already. So my guess is `openjdk-11-source` was missing. The screenshot was a good hint. When I ctrl+click `println()` now I see the javadoc, which was missing before I installed `openjdk-11-source`. Thankyou  &#128524;  &#128591;","body":"installing <code>openjdk-11-doc</code> and <code>openjdk-11-source</code> worked. I think I had installed <code>openjdk-11-doc</code> already. So my guess is <code>openjdk-11-source</code> was missing. The screenshot was a good hint. When I ctrl+click <code>println()</code> now I see the javadoc, which was missing before I installed <code>openjdk-11-source</code>. Thankyou  😌  🙏"},{"owner":{"account_id":19088616,"reputation":8294,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"score":0,"creation_date":1626656624,"post_id":68405844,"comment_id":120943878,"body_markdown":"@nuiun. Glad to know your question is solved. Happy coding:)","body":"@nuiun. Glad to know your question is solved. Happy coding:)"},{"owner":{"account_id":18263692,"reputation":563,"user_id":13295921,"display_name":"UN..D"},"score":0,"creation_date":1669543193,"post_id":68405844,"comment_id":131660913,"body_markdown":"@Molly Wang-MSFT. same problem, how do install the openjdk-src or openjdk-doc package?","body":"@Molly Wang-MSFT. same problem, how do install the openjdk-src or openjdk-doc package?"}],"tags":[],"owner":{"account_id":19088616,"reputation":8294,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1626424381,"creation_date":1626423845,"answer_id":68405844,"question_id":68374716,"body_markdown":"When i hover over the `println()`, the description is as the same as the comment you can get by **Ctrl+Clicking** the method:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nJava extension can&#39;t detect and show the documentation if they don&#39;t even exist in jdk at all. You can try in your project and see if the java you installed has documentation.\r\n\r\nCould you try to install the openjdk-src or openjdk-doc package? See [OpenJDK][2]. \r\n\r\nOR install another java version and set it as `java.home` in vscode to see if this question still exists.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dqlhk.png\r\n  [2]: https://wiki.archlinux.org/index.php/Java#OpenJDK","title":"How to view Java standard library documentation popup in Visual Studio Code with OpenJDK 11 on Ubuntu 21.04?","body":"<p>When i hover over the <code>println()</code>, the description is as the same as the comment you can get by <strong>Ctrl+Clicking</strong> the method:</p>\n<p><a href=\"https://i.stack.imgur.com/dqlhk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dqlhk.png\" alt=\"enter image description here\" /></a></p>\n<p>Java extension can't detect and show the documentation if they don't even exist in jdk at all. You can try in your project and see if the java you installed has documentation.</p>\n<p>Could you try to install the openjdk-src or openjdk-doc package? See <a href=\"https://wiki.archlinux.org/index.php/Java#OpenJDK\" rel=\"nofollow noreferrer\">OpenJDK</a>.</p>\n<p>OR install another java version and set it as <code>java.home</code> in vscode to see if this question still exists.</p>\n"},{"comments":[{"owner":{"account_id":12651033,"reputation":167,"user_id":9195175,"display_name":"Leandro 86"},"score":0,"creation_date":1680718496,"post_id":74589555,"comment_id":133947403,"body_markdown":"That did the trick for me. Setting java.jdt.ls.java.home in settings.json and installing both openjdk-17-doc and openjdk-17-source packages in my system. Notice it is also needed to clean the vscode workspace afterwards to reload the new configurations (ctrl+shift+p then &quot;Clean Java Language Server Workspace&quot;).","body":"That did the trick for me. Setting java.jdt.ls.java.home in settings.json and installing both openjdk-17-doc and openjdk-17-source packages in my system. Notice it is also needed to clean the vscode workspace afterwards to reload the new configurations (ctrl+shift+p then &quot;Clean Java Language Server Workspace&quot;)."}],"tags":[],"owner":{"account_id":18263692,"reputation":563,"user_id":13295921,"display_name":"UN..D"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683293670,"creation_date":1669547794,"answer_id":74589555,"question_id":68374716,"body_markdown":"After searching,I found the the problem was about the configuring of user [settings.json][1] file \r\n\r\n      Add the same path as JAVA_HOME in the &quot;java.jdt.ls.java.home&quot; config\r\n\r\n \r\nNow, I can see the documents but it show at the top \r\n\r\n\r\n    // Source code is unavailable, and was generated by the Fernflower decompiler.\r\n\r\n\r\nAlso it didn&#39;t show information when hover on method ...\r\n\r\nNext, try to install the openjdk-src or openjdk-doc package\r\nas mention by @Molly Wang-MSFT. \r\n\r\nFor more information check [Java in Visual Studio Code][2]\r\n\r\n---------------------------------\r\nUse below setting to handle not existed jar file locally (ex:Spring documentation):\r\n\r\nYou can enable the user setting.json `&quot;java.maven.downloadSources&quot;:true,`\r\n\r\neach time you opened a class file, if the source jar does not exist locally, the extension will trigger a download task for that source jar.\r\n\r\n  [1]: https://github.com/redhat-developer/vscode-java/issues/2277\r\n  [2]: https://code.visualstudio.com/docs/languages/java","title":"How to view Java standard library documentation popup in Visual Studio Code with OpenJDK 11 on Ubuntu 21.04?","body":"<p>After searching,I found the the problem was about the configuring of user <a href=\"https://github.com/redhat-developer/vscode-java/issues/2277\" rel=\"nofollow noreferrer\">settings.json</a> file</p>\n<pre><code>  Add the same path as JAVA_HOME in the &quot;java.jdt.ls.java.home&quot; config\n</code></pre>\n<p>Now, I can see the documents but it show at the top</p>\n<pre><code>// Source code is unavailable, and was generated by the Fernflower decompiler.\n</code></pre>\n<p>Also it didn't show information when hover on method ...</p>\n<p>Next, try to install the openjdk-src or openjdk-doc package\nas mention by @Molly Wang-MSFT.</p>\n<p>For more information check <a href=\"https://code.visualstudio.com/docs/languages/java\" rel=\"nofollow noreferrer\">Java in Visual Studio Code</a></p>\n<hr />\n<p>Use below setting to handle not existed jar file locally (ex:Spring documentation):</p>\n<p>You can enable the user setting.json <code>&quot;java.maven.downloadSources&quot;:true,</code></p>\n<p>each time you opened a class file, if the source jar does not exist locally, the extension will trigger a download task for that source jar.</p>\n"}],"owner":{"account_id":8502865,"reputation":774,"user_id":6375601,"display_name":"nuiun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":716,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":68405844,"answer_count":3,"score":3,"last_activity_date":1683293670,"creation_date":1626251829,"question_id":68374716,"body_markdown":"A similar question was asked for Eclipse: https://stackoverflow.com/questions/53306309/add-java-docs-in-eclipse-working-on-openjdk\r\n\r\nI found /usr/lib/jvm/java-11-openjdk-amd64/lib/src.zip on my system.\r\n\r\nBuilding and runing a source file works. Documentation is shown for dependencies loaded via Maven. The documentation for the Java standard library is missing.\r\n\r\nExamples:\r\n\r\nhovering over\r\n```java\r\nSystem.out.println(&quot;test&quot;);\r\n```\r\nshows \r\n&gt; void java.io.PrintStream.println(String x)\r\n\r\nI would like to see the javadoc here.\r\n\r\nIt is working with:\r\n```java\r\nnew DefaultCamelContext();\r\n```\r\nIt shows:\r\n\r\n&gt; org.apache.camel.impl.DefaultCamelContext.DefaultCamelContext()\r\n&gt; \r\n&gt; Creates the ModelCamelContext using\r\n&gt; org.apache.camel.support.DefaultRegistry as registry.\r\n&gt; \r\n&gt; Use one of the\r\n&gt; other constructors to force use an explicit registry.\r\n\r\nEdit:\r\nRelevant Installed Visual Studio Code Extensions are:\r\n\r\n - Language Support for Java(TM) by Red Hat\r\n - Debugger for Java\r\n - Java Test Runner\r\n - Maven for Java\r\n - Project Manager for Java\r\n - Visual Studio IntelliCode\r\n\r\nThese are installed via the [official Java Extension Pack from Microsoft](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack).\r\n\r\nedit2: my user settings.json\r\n```json\r\n{\r\n    &quot;telemetry.enableTelemetry&quot;: false,\r\n    &quot;telemetry.enableCrashReporter&quot;: false,\r\n    &quot;editor.fontFamily&quot;: &quot;&#39;Ubuntu Mono&#39;, &#39;Droid Sans Mono&#39;, &#39;monospace&#39;, monospace, &#39;Droid Sans Fallback&#39;&quot;,\r\n    &quot;files.autoSave&quot;: &quot;onFocusChange&quot;,\r\n    &quot;window.zoomLevel&quot;: 3,\r\n    &quot;editor.wordWrap&quot;: &quot;bounded&quot;,\r\n    &quot;yaml.schemas&quot;: {\r\n        &quot;file:///toc.schema.json&quot;: &quot;/toc\\\\.yml/i&quot;\r\n    },\r\n    &quot;window.menuBarVisibility&quot;: &quot;default&quot;,\r\n    &quot;rust-analyzer.checkOnSave.command&quot;: &quot;clippy&quot;,\r\n    &quot;editor.minimap.enabled&quot;: false,\r\n    &quot;editor.cursorBlinking&quot;: &quot;solid&quot;,\r\n    &quot;rust-analyzer.checkOnSave.enable&quot;: false,\r\n    &quot;explorer.sortOrder&quot;: &quot;mixed&quot;,\r\n    &quot;rust-analyzer.lens.methodReferences&quot;: true,\r\n    &quot;rust-analyzer.lens.references&quot;: true,\r\n    &quot;rust-analyzer.lruCapacity&quot;: 512,\r\n    &quot;workbench.colorTheme&quot;: &quot;Default Dark+&quot;,\r\n    &quot;editor.suggestSelection&quot;: &quot;first&quot;,\r\n    &quot;vsintellicode.modify.editor.suggestSelection&quot;: &quot;automaticallyOverrodeDefaultValue&quot;,\r\n    &quot;files.exclude&quot;: {\r\n        &quot;**/.classpath&quot;: true,\r\n        &quot;**/.project&quot;: true,\r\n        &quot;**/.settings&quot;: true,\r\n        &quot;**/.factorypath&quot;: true\r\n    },\r\n    &quot;java.home&quot;: &quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;,\r\n    &quot;java.configuration.runtimes&quot;: [\r\n        {\r\n          &quot;name&quot;: &quot;JavaSE-11&quot;,\r\n          &quot;path&quot;: &quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;,\r\n          &quot;default&quot;: true\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nmy workspace settings.json is empty","title":"How to view Java standard library documentation popup in Visual Studio Code with OpenJDK 11 on Ubuntu 21.04?","body":"<p>A similar question was asked for Eclipse: <a href=\"https://stackoverflow.com/questions/53306309/add-java-docs-in-eclipse-working-on-openjdk\">Add Java Docs in Eclipse working on OpenJDK</a></p>\n<p>I found /usr/lib/jvm/java-11-openjdk-amd64/lib/src.zip on my system.</p>\n<p>Building and runing a source file works. Documentation is shown for dependencies loaded via Maven. The documentation for the Java standard library is missing.</p>\n<p>Examples:</p>\n<p>hovering over</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;test&quot;);\n</code></pre>\n<p>shows</p>\n<blockquote>\n<p>void java.io.PrintStream.println(String x)</p>\n</blockquote>\n<p>I would like to see the javadoc here.</p>\n<p>It is working with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new DefaultCamelContext();\n</code></pre>\n<p>It shows:</p>\n<blockquote>\n<p>org.apache.camel.impl.DefaultCamelContext.DefaultCamelContext()</p>\n<p>Creates the ModelCamelContext using\norg.apache.camel.support.DefaultRegistry as registry.</p>\n<p>Use one of the\nother constructors to force use an explicit registry.</p>\n</blockquote>\n<p>Edit:\nRelevant Installed Visual Studio Code Extensions are:</p>\n<ul>\n<li>Language Support for Java(TM) by Red Hat</li>\n<li>Debugger for Java</li>\n<li>Java Test Runner</li>\n<li>Maven for Java</li>\n<li>Project Manager for Java</li>\n<li>Visual Studio IntelliCode</li>\n</ul>\n<p>These are installed via the <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\">official Java Extension Pack from Microsoft</a>.</p>\n<p>edit2: my user settings.json</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;telemetry.enableTelemetry&quot;: false,\n    &quot;telemetry.enableCrashReporter&quot;: false,\n    &quot;editor.fontFamily&quot;: &quot;'Ubuntu Mono', 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'&quot;,\n    &quot;files.autoSave&quot;: &quot;onFocusChange&quot;,\n    &quot;window.zoomLevel&quot;: 3,\n    &quot;editor.wordWrap&quot;: &quot;bounded&quot;,\n    &quot;yaml.schemas&quot;: {\n        &quot;file:///toc.schema.json&quot;: &quot;/toc\\\\.yml/i&quot;\n    },\n    &quot;window.menuBarVisibility&quot;: &quot;default&quot;,\n    &quot;rust-analyzer.checkOnSave.command&quot;: &quot;clippy&quot;,\n    &quot;editor.minimap.enabled&quot;: false,\n    &quot;editor.cursorBlinking&quot;: &quot;solid&quot;,\n    &quot;rust-analyzer.checkOnSave.enable&quot;: false,\n    &quot;explorer.sortOrder&quot;: &quot;mixed&quot;,\n    &quot;rust-analyzer.lens.methodReferences&quot;: true,\n    &quot;rust-analyzer.lens.references&quot;: true,\n    &quot;rust-analyzer.lruCapacity&quot;: 512,\n    &quot;workbench.colorTheme&quot;: &quot;Default Dark+&quot;,\n    &quot;editor.suggestSelection&quot;: &quot;first&quot;,\n    &quot;vsintellicode.modify.editor.suggestSelection&quot;: &quot;automaticallyOverrodeDefaultValue&quot;,\n    &quot;files.exclude&quot;: {\n        &quot;**/.classpath&quot;: true,\n        &quot;**/.project&quot;: true,\n        &quot;**/.settings&quot;: true,\n        &quot;**/.factorypath&quot;: true\n    },\n    &quot;java.home&quot;: &quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;,\n    &quot;java.configuration.runtimes&quot;: [\n        {\n          &quot;name&quot;: &quot;JavaSE-11&quot;,\n          &quot;path&quot;: &quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;,\n          &quot;default&quot;: true\n        }\n    ]\n}\n</code></pre>\n<p>my workspace settings.json is empty</p>\n"},{"tags":["java","spring-boot","junit","mockito","junit5"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1683297588,"post_id":76182731,"comment_id":134349977,"body_markdown":"Notice the address of the lambdas (@43effd89 and @614aeccc) are different, so the match fails.  [This](https://stackoverflow.com/a/41463510/6650475) might help.","body":"Notice the address of the lambdas (@43effd89 and @614aeccc) are different, so the match fails.  <a href=\"https://stackoverflow.com/a/41463510/6650475\">This</a> might help."},{"owner":{"account_id":28144527,"reputation":37,"user_id":21507039,"display_name":"Anup Panchal"},"score":0,"creation_date":1683522467,"post_id":76182731,"comment_id":134373949,"body_markdown":"can you please explain me with proper example @AndrewS","body":"can you please explain me with proper example @AndrewS"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1683551218,"post_id":76182731,"comment_id":134379483,"body_markdown":"The linked SO answer has an example.","body":"The linked SO answer has an example."}],"owner":{"account_id":28144527,"reputation":37,"user_id":21507039,"display_name":"Anup Panchal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683293640,"creation_date":1683293309,"question_id":76182731,"body_markdown":"**i am working on spring boot gradle project**\r\n\r\n# this is my service layer class\r\n\r\n# create one filter method to fatch list of records\r\n\r\n\r\n```\r\n@Transactional\r\n@Service\r\npublic class QuestionServiceImpl implements QuestionService {\r\n\r\n  @Autowired QuestionRepository questionRepository;\r\n\r\n  @Autowired DomainService domainService;\r\n\r\n  @Autowired TopicService topicService;\r\n\r\n @Override\r\n    public Page&lt;Question&gt; fetchByFilter(QuestionFilterRequest questionFilterRequest) {\r\n        Pageable paging = PageRequest.of(questionFilterRequest.page(), getSize(questionFilterRequest));\r\n        Specification&lt;Question&gt; questionsSpecification = getQuestionSpecification(questionFilterRequest);\r\n        return questionRepository.findAll(questionsSpecification, paging);\r\n    }\r\n\r\n    private static int getSize(QuestionFilterRequest questionFilterRequest) {\r\n        return questionFilterRequest.size() &lt;= 0 ? 5 : questionFilterRequest.size();\r\n    }\r\n\r\n    private Specification&lt;Question&gt; getQuestionSpecification(QuestionFilterRequest questionFilterRequest) {\r\n        return (root, query, cb) -&gt; {\r\n            Join&lt;Question, Domain&gt; domainJoin = root.join(Constant.DOMAIN);\r\n            Predicate domainPredicate = cb.equal(domainJoin.get(Constant.UUID), questionFilterRequest.domain());\r\n\r\n            Predicate optionalPredicate = getPredicate(questionFilterRequest, root, cb);\r\n\r\n            return cb.and(domainPredicate, optionalPredicate);\r\n        };\r\n    }\r\n\r\n    private Predicate getPredicate(QuestionFilterRequest questionFilterRequest, Root&lt;Question&gt; root, CriteriaBuilder cb) {\r\n        Predicate optionalPredicate = cb.conjunction();\r\n        if (StringUtils.hasLength(questionFilterRequest.topic())) {\r\n            Join&lt;Question, Topic&gt; topicJoin = root.join(Constant.TOPIC);\r\n            optionalPredicate = cb.and(optionalPredicate, cb.equal(topicJoin.get(Constant.UUID), questionFilterRequest.topic()));\r\n        }\r\n        if (StringUtils.hasLength(questionFilterRequest.search())) {\r\n            optionalPredicate = cb.and(optionalPredicate, cb.like(root.get(Constant.QUESTION), Constant.PERCENTAGE + questionFilterRequest.search() + Constant.PERCENTAGE));\r\n        }\r\n        if (StringUtils.hasLength(questionFilterRequest.complexity())) {\r\n            optionalPredicate = cb.and(optionalPredicate, cb.equal(root.get(Constant.COMPLEXITY), questionFilterRequest.complexity()));\r\n        }\r\n        optionalPredicate = questionFilterRequest.archive() ? cb.and(optionalPredicate, cb.equal(root.get(Constant.ARCHIVE), true)) :\r\n                cb.and(optionalPredicate, cb.equal(root.get(Constant.ARCHIVE), false));\r\n        return optionalPredicate;\r\n    }\r\n\r\n}\r\n```\r\n\r\n# i am writing junit5 test cases for this service class\r\n**Using Junit5 with mockito**\r\n\r\n\r\n**This is my JUnit service layer test cases**\r\n\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\n@AutoConfigureTestDatabase(replace = Replace.NONE)\r\nclass QuestionServiceImplTest {\r\n\r\n  @InjectMocks\r\n  QuestionServiceImpl questionService;\r\n  @Mock\r\n  DomainService domainService;\r\n  @Mock\r\n  TopicService topicService;\r\n  @Mock\r\n  QuestionRepository questionRepository;\r\n  private Topic topic;\r\n  private Domain domain;\r\n  private Question question;\r\n  private List&lt;QuestionMcq&gt; questionMcq;\r\n\r\n  @BeforeEach\r\n  void addTestRecord() {\r\n    domain = createDomain();\r\n    topic = createTopic();\r\n    questionMcq = createMcq();\r\n    question = createQuestion();\r\n  }\r\n\r\n  private List&lt;QuestionMcq&gt; createMcq() {\r\n    List&lt;QuestionMcq&gt; questionMcq = new ArrayList&lt;&gt;();\r\n    questionMcq.add(new QuestionMcq(1, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test1&quot;, true));\r\n    questionMcq.add(new QuestionMcq(2, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test2&quot;, false));\r\n    questionMcq.add(new QuestionMcq(3, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test3&quot;, false));\r\n    questionMcq.add(new QuestionMcq(4, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test4&quot;, false));\r\n    return questionMcq;\r\n  }\r\n\r\n\r\n  private Topic createTopic() {\r\n    Topic topic = new Topic();\r\n    topic.setId(1);\r\n    topic.setName(&quot;Java&quot;);\r\n    topic.setUid(&quot;35f66eaa-2fc7-4170-8470-feb83ddbf6b0&quot;);\r\n    topic.setDomain(domain);\r\n    return topic;\r\n  }\r\n\r\n  private Domain createDomain() {\r\n    Domain domain = new Domain();\r\n    domain.setId(1);\r\n    domain.setName(&quot;java&quot;);\r\n    domain.setUid(&quot;1234z637-c6c1-4dc3-9755-9f6ad974d70b&quot;);\r\n    return domain;\r\n  }\r\n\r\n  private Question createQuestion() {\r\n    Question question = new Question();\r\n    question.setId(1);\r\n    question.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\r\n    question.setQuestion(&quot;Java&quot;);\r\n    question.setType(QuestionTypeEnum.MCQ);\r\n    question.setMarks(1);\r\n    question.setDomain(domain);\r\n    question.setTopic(topic);\r\n    question.setTheoretical(true);\r\n    question.setQuestionMcq(questionMcq);\r\n    return question;\r\n  }\r\n@Test\r\n  void fetchByFilter() {\r\n    QuestionFilterRequest filterRequest = new QuestionFilterRequest(&quot;question&quot;,false,&quot;easy&quot;,&quot;topic-uuid&quot;,&quot;domain-uuid&quot;,0,5);\r\n    Question fisrtQuestion = new Question();\r\n    fisrtQuestion.setId(11);\r\n    fisrtQuestion.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\r\n    fisrtQuestion.setQuestion(&quot;Java&quot;);\r\n    fisrtQuestion.setType(QuestionTypeEnum.MCQ);\r\n    fisrtQuestion.setMarks(12);\r\n    fisrtQuestion.setDomain(domain);\r\n    fisrtQuestion.setTopic(topic);\r\n    fisrtQuestion.setTheoretical(true);\r\n    fisrtQuestion.setQuestionMcq(questionMcq);\r\n\r\n    Question secondQuestion = new Question();\r\n    secondQuestion.setId(12);\r\n    secondQuestion.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\r\n    secondQuestion.setQuestion(&quot;Java&quot;);\r\n    secondQuestion.setType(QuestionTypeEnum.MCQ);\r\n    secondQuestion.setMarks(13);\r\n    secondQuestion.setDomain(domain);\r\n    secondQuestion.setTopic(topic);\r\n    secondQuestion.setTheoretical(true);\r\n    secondQuestion.setQuestionMcq(questionMcq);\r\n\r\n\r\n    //Pageable paging = PageRequest.of(filterRequest.page(), questionService.getSize(filterRequest));\r\n    Specification&lt;Question&gt; specification = questionService.getQuestionSpecification(filterRequest);\r\n    Pageable pageable = PageRequest.of(filterRequest.page(), filterRequest.size());\r\n\r\n    List&lt;Question&gt; questions = Arrays.asList(fisrtQuestion,secondQuestion);\r\n    Page&lt;Question&gt; expectedPage = new PageImpl&lt;&gt;(questions, pageable, questions.size());\r\n    when(questionRepository.findAll(specification, pageable)).thenReturn(expectedPage);\r\n\r\n    // when\r\n    Page&lt;Question&gt; actualPage = questionService.fetchByFilter(filterRequest);\r\n\r\n    // then\r\n    assertEquals(expectedPage, actualPage);\r\n    Mockito.verify(questionRepository).findAll(specification, pageable);\r\n  }\r\n}\r\n```\r\n**when i run this test cases facing this error**\r\n\r\n\r\n```\r\nStrict stubbing argument mismatch. Please check:\r\n - this invocation of &#39;findAll&#39; method:\r\n    questionRepository.findAll(\r\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@43effd89,\r\n    Page request [number: 0, size 5, sort: UNSORTED]\r\n);\r\n    -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImpl.fetchByFilter(QuestionServiceImpl.java:96)\r\n - has following stubbing(s) with different arguments:\r\n    1. questionRepository.findAll(\r\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@614aeccc,\r\n    Page request [number: 0, size 5, sort: UNSORTED]\r\n);\r\n      -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImplTest.fetchByFilter(QuestionServiceImplTest.java:188)\r\nTypically, stubbing argument mismatch indicates user mistake when writing tests.\r\nMockito fails early so that you can debug potential problem easily.\r\nHowever, there are legit scenarios when this exception generates false negative signal:\r\n  - stubbing the same method multiple times using &#39;given().will()&#39; or &#39;when().then()&#39; API\r\n    Please use &#39;will().given()&#39; or &#39;doReturn().when()&#39; API for stubbing.\r\n  - stubbed method is intentionally invoked with different arguments by code under test\r\n    Please use default or &#39;silent&#39; JUnit Rule (equivalent of Strictness.LENIENT).\r\nFor more information see javadoc for PotentialStubbingProblem class.\r\norg.mockito.exceptions.misusing.PotentialStubbingProblem: \r\nStrict stubbing argument mismatch. Please check:\r\n - this invocation of &#39;findAll&#39; method:\r\n    questionRepository.findAll(\r\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@43effd89,\r\n    Page request [number: 0, size 5, sort: UNSORTED]\r\n);\r\n    -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImpl.fetchByFilter(QuestionServiceImpl.java:96)\r\n - has following stubbing(s) with different arguments:\r\n    1. questionRepository.findAll(\r\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@614aeccc,\r\n    Page request [number: 0, size 5, sort: UNSORTED]\r\n);\r\n```\r\n**i dont know how solve this**\r\n","title":"spring boot JUnit test cases for Service layer","body":"<p><strong>i am working on spring boot gradle project</strong></p>\n<h1>this is my service layer class</h1>\n<h1>create one filter method to fatch list of records</h1>\n<pre><code>@Transactional\n@Service\npublic class QuestionServiceImpl implements QuestionService {\n\n  @Autowired QuestionRepository questionRepository;\n\n  @Autowired DomainService domainService;\n\n  @Autowired TopicService topicService;\n\n @Override\n    public Page&lt;Question&gt; fetchByFilter(QuestionFilterRequest questionFilterRequest) {\n        Pageable paging = PageRequest.of(questionFilterRequest.page(), getSize(questionFilterRequest));\n        Specification&lt;Question&gt; questionsSpecification = getQuestionSpecification(questionFilterRequest);\n        return questionRepository.findAll(questionsSpecification, paging);\n    }\n\n    private static int getSize(QuestionFilterRequest questionFilterRequest) {\n        return questionFilterRequest.size() &lt;= 0 ? 5 : questionFilterRequest.size();\n    }\n\n    private Specification&lt;Question&gt; getQuestionSpecification(QuestionFilterRequest questionFilterRequest) {\n        return (root, query, cb) -&gt; {\n            Join&lt;Question, Domain&gt; domainJoin = root.join(Constant.DOMAIN);\n            Predicate domainPredicate = cb.equal(domainJoin.get(Constant.UUID), questionFilterRequest.domain());\n\n            Predicate optionalPredicate = getPredicate(questionFilterRequest, root, cb);\n\n            return cb.and(domainPredicate, optionalPredicate);\n        };\n    }\n\n    private Predicate getPredicate(QuestionFilterRequest questionFilterRequest, Root&lt;Question&gt; root, CriteriaBuilder cb) {\n        Predicate optionalPredicate = cb.conjunction();\n        if (StringUtils.hasLength(questionFilterRequest.topic())) {\n            Join&lt;Question, Topic&gt; topicJoin = root.join(Constant.TOPIC);\n            optionalPredicate = cb.and(optionalPredicate, cb.equal(topicJoin.get(Constant.UUID), questionFilterRequest.topic()));\n        }\n        if (StringUtils.hasLength(questionFilterRequest.search())) {\n            optionalPredicate = cb.and(optionalPredicate, cb.like(root.get(Constant.QUESTION), Constant.PERCENTAGE + questionFilterRequest.search() + Constant.PERCENTAGE));\n        }\n        if (StringUtils.hasLength(questionFilterRequest.complexity())) {\n            optionalPredicate = cb.and(optionalPredicate, cb.equal(root.get(Constant.COMPLEXITY), questionFilterRequest.complexity()));\n        }\n        optionalPredicate = questionFilterRequest.archive() ? cb.and(optionalPredicate, cb.equal(root.get(Constant.ARCHIVE), true)) :\n                cb.and(optionalPredicate, cb.equal(root.get(Constant.ARCHIVE), false));\n        return optionalPredicate;\n    }\n\n}\n</code></pre>\n<h1>i am writing junit5 test cases for this service class</h1>\n<p><strong>Using Junit5 with mockito</strong></p>\n<p><strong>This is my JUnit service layer test cases</strong></p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@AutoConfigureTestDatabase(replace = Replace.NONE)\nclass QuestionServiceImplTest {\n\n  @InjectMocks\n  QuestionServiceImpl questionService;\n  @Mock\n  DomainService domainService;\n  @Mock\n  TopicService topicService;\n  @Mock\n  QuestionRepository questionRepository;\n  private Topic topic;\n  private Domain domain;\n  private Question question;\n  private List&lt;QuestionMcq&gt; questionMcq;\n\n  @BeforeEach\n  void addTestRecord() {\n    domain = createDomain();\n    topic = createTopic();\n    questionMcq = createMcq();\n    question = createQuestion();\n  }\n\n  private List&lt;QuestionMcq&gt; createMcq() {\n    List&lt;QuestionMcq&gt; questionMcq = new ArrayList&lt;&gt;();\n    questionMcq.add(new QuestionMcq(1, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test1&quot;, true));\n    questionMcq.add(new QuestionMcq(2, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test2&quot;, false));\n    questionMcq.add(new QuestionMcq(3, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test3&quot;, false));\n    questionMcq.add(new QuestionMcq(4, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test4&quot;, false));\n    return questionMcq;\n  }\n\n\n  private Topic createTopic() {\n    Topic topic = new Topic();\n    topic.setId(1);\n    topic.setName(&quot;Java&quot;);\n    topic.setUid(&quot;35f66eaa-2fc7-4170-8470-feb83ddbf6b0&quot;);\n    topic.setDomain(domain);\n    return topic;\n  }\n\n  private Domain createDomain() {\n    Domain domain = new Domain();\n    domain.setId(1);\n    domain.setName(&quot;java&quot;);\n    domain.setUid(&quot;1234z637-c6c1-4dc3-9755-9f6ad974d70b&quot;);\n    return domain;\n  }\n\n  private Question createQuestion() {\n    Question question = new Question();\n    question.setId(1);\n    question.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\n    question.setQuestion(&quot;Java&quot;);\n    question.setType(QuestionTypeEnum.MCQ);\n    question.setMarks(1);\n    question.setDomain(domain);\n    question.setTopic(topic);\n    question.setTheoretical(true);\n    question.setQuestionMcq(questionMcq);\n    return question;\n  }\n@Test\n  void fetchByFilter() {\n    QuestionFilterRequest filterRequest = new QuestionFilterRequest(&quot;question&quot;,false,&quot;easy&quot;,&quot;topic-uuid&quot;,&quot;domain-uuid&quot;,0,5);\n    Question fisrtQuestion = new Question();\n    fisrtQuestion.setId(11);\n    fisrtQuestion.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\n    fisrtQuestion.setQuestion(&quot;Java&quot;);\n    fisrtQuestion.setType(QuestionTypeEnum.MCQ);\n    fisrtQuestion.setMarks(12);\n    fisrtQuestion.setDomain(domain);\n    fisrtQuestion.setTopic(topic);\n    fisrtQuestion.setTheoretical(true);\n    fisrtQuestion.setQuestionMcq(questionMcq);\n\n    Question secondQuestion = new Question();\n    secondQuestion.setId(12);\n    secondQuestion.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\n    secondQuestion.setQuestion(&quot;Java&quot;);\n    secondQuestion.setType(QuestionTypeEnum.MCQ);\n    secondQuestion.setMarks(13);\n    secondQuestion.setDomain(domain);\n    secondQuestion.setTopic(topic);\n    secondQuestion.setTheoretical(true);\n    secondQuestion.setQuestionMcq(questionMcq);\n\n\n    //Pageable paging = PageRequest.of(filterRequest.page(), questionService.getSize(filterRequest));\n    Specification&lt;Question&gt; specification = questionService.getQuestionSpecification(filterRequest);\n    Pageable pageable = PageRequest.of(filterRequest.page(), filterRequest.size());\n\n    List&lt;Question&gt; questions = Arrays.asList(fisrtQuestion,secondQuestion);\n    Page&lt;Question&gt; expectedPage = new PageImpl&lt;&gt;(questions, pageable, questions.size());\n    when(questionRepository.findAll(specification, pageable)).thenReturn(expectedPage);\n\n    // when\n    Page&lt;Question&gt; actualPage = questionService.fetchByFilter(filterRequest);\n\n    // then\n    assertEquals(expectedPage, actualPage);\n    Mockito.verify(questionRepository).findAll(specification, pageable);\n  }\n}\n</code></pre>\n<p><strong>when i run this test cases facing this error</strong></p>\n<pre><code>Strict stubbing argument mismatch. Please check:\n - this invocation of 'findAll' method:\n    questionRepository.findAll(\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@43effd89,\n    Page request [number: 0, size 5, sort: UNSORTED]\n);\n    -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImpl.fetchByFilter(QuestionServiceImpl.java:96)\n - has following stubbing(s) with different arguments:\n    1. questionRepository.findAll(\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@614aeccc,\n    Page request [number: 0, size 5, sort: UNSORTED]\n);\n      -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImplTest.fetchByFilter(QuestionServiceImplTest.java:188)\nTypically, stubbing argument mismatch indicates user mistake when writing tests.\nMockito fails early so that you can debug potential problem easily.\nHowever, there are legit scenarios when this exception generates false negative signal:\n  - stubbing the same method multiple times using 'given().will()' or 'when().then()' API\n    Please use 'will().given()' or 'doReturn().when()' API for stubbing.\n  - stubbed method is intentionally invoked with different arguments by code under test\n    Please use default or 'silent' JUnit Rule (equivalent of Strictness.LENIENT).\nFor more information see javadoc for PotentialStubbingProblem class.\norg.mockito.exceptions.misusing.PotentialStubbingProblem: \nStrict stubbing argument mismatch. Please check:\n - this invocation of 'findAll' method:\n    questionRepository.findAll(\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@43effd89,\n    Page request [number: 0, size 5, sort: UNSORTED]\n);\n    -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImpl.fetchByFilter(QuestionServiceImpl.java:96)\n - has following stubbing(s) with different arguments:\n    1. questionRepository.findAll(\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@614aeccc,\n    Page request [number: 0, size 5, sort: UNSORTED]\n);\n</code></pre>\n<p><strong>i dont know how solve this</strong></p>\n"},{"tags":["java","java.util.scanner","eof"],"comments":[{"owner":{"account_id":5995725,"reputation":4137,"user_id":4710425,"accept_rate":59,"display_name":"SatyaTNV"},"score":2,"creation_date":1450439613,"post_id":34355062,"comment_id":56451596,"body_markdown":"`if(s.hasNext()==true){` evaluates only once. Use `while`.","body":"<code>if(s.hasNext()==true){</code> evaluates only once. Use <code>while</code>."},{"owner":{"account_id":1995799,"reputation":28352,"user_id":1788806,"accept_rate":94,"display_name":"Willi Mentzel"},"score":0,"creation_date":1450440161,"post_id":34355062,"comment_id":56451911,"body_markdown":"why are you using recursion in the first place?","body":"why are you using recursion in the first place?"}],"answers":[{"comments":[{"owner":{"account_id":6201106,"reputation":117,"user_id":4830870,"accept_rate":80,"display_name":"Harshit Juneja"},"score":0,"creation_date":1450439901,"post_id":34355122,"comment_id":56451779,"body_markdown":"Yes, thanks but I am calling the check function recursively for incremented values.","body":"Yes, thanks but I am calling the check function recursively for incremented values."}],"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1456912818,"creation_date":1450439678,"answer_id":34355122,"question_id":34355062,"body_markdown":"Change\r\n\r\n    if (s.hasNext() == true) {\r\n        String ns = s.nextLine();\r\n        System.out.println(count + &quot; &quot; + ns);\r\n        count++;\r\n        System.out.print(count);\r\n        check(count);\r\n    }\r\n\r\nto:\r\n\r\n    while (s.hasNext()) {\r\n        String ns = s.nextLine();\r\n        System.out.println(count + &quot; &quot; + ns);\r\n        count++;\r\n        System.out.print(count);\r\n        check(count);\r\n    }\r\n\r\n`while` loops continues until the data exists, where as `if` checks for only once.","title":"How to use hasNext() from the Scanner class?","body":"<p>Change</p>\n\n<pre><code>if (s.hasNext() == true) {\n    String ns = s.nextLine();\n    System.out.println(count + \" \" + ns);\n    count++;\n    System.out.print(count);\n    check(count);\n}\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>while (s.hasNext()) {\n    String ns = s.nextLine();\n    System.out.println(count + \" \" + ns);\n    count++;\n    System.out.print(count);\n    check(count);\n}\n</code></pre>\n\n<p><code>while</code> loops continues until the data exists, where as <code>if</code> checks for only once.</p>\n"},{"tags":[],"owner":{"account_id":1995799,"reputation":28352,"user_id":1788806,"accept_rate":94,"display_name":"Willi Mentzel"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1486047438,"creation_date":1450440352,"answer_id":34355325,"question_id":34355062,"body_markdown":"Your code does not work because you create a new `Scanner` object in every recursive call.\r\nYou should not use recursion for this anyways, do it iteratively instead.    \r\n\r\n**Iterative version**\r\n\r\n    public class Solution {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            Scanner s = new Scanner(System.in);\r\n            int count = 1;\r\n\r\n            while(s.hasNext()) {\r\n                String ns = s.nextLine();\r\n                System.out.println(count + &quot; &quot; + ns);\r\n                count++;\r\n            }\r\n        }\r\n    }\r\n\r\n**Recursive version**\r\n\r\n    public class Solution {\r\n    \t\r\n    \tprivate Scanner s;\r\n        \r\n    \tpublic static void main(String[] args) {\r\n    \r\n            s = new Scanner(System.in); // initialize only once\r\n    \t\tcheck(1);\r\n        }\r\n    \t\r\n    \tpublic static void check(int count) {\r\n    \t\tif(s.hasNext()) {\r\n    \t\t\tString ns = s.nextLine();\r\n    \t\t\tSystem.out.println(count + &quot; &quot; + ns);\r\n    \t\t\tcheck(count + 1);\r\n    \t\t}\r\n    \t}\t\r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<p>Your code does not work because you create a new <code>Scanner</code> object in every recursive call.\nYou should not use recursion for this anyways, do it iteratively instead.    </p>\n\n<p><strong>Iterative version</strong></p>\n\n<pre><code>public class Solution {\n\n    public static void main(String[] args) {\n\n        Scanner s = new Scanner(System.in);\n        int count = 1;\n\n        while(s.hasNext()) {\n            String ns = s.nextLine();\n            System.out.println(count + \" \" + ns);\n            count++;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Recursive version</strong></p>\n\n<pre><code>public class Solution {\n\n    private Scanner s;\n\n    public static void main(String[] args) {\n\n        s = new Scanner(System.in); // initialize only once\n        check(1);\n    }\n\n    public static void check(int count) {\n        if(s.hasNext()) {\n            String ns = s.nextLine();\n            System.out.println(count + \" \" + ns);\n            check(count + 1);\n        }\n    }   \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3974723,"reputation":2691,"user_id":3278176,"accept_rate":74,"display_name":"Ian2thedv"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456910887,"creation_date":1450441457,"answer_id":34355647,"question_id":34355062,"body_markdown":"If using recursion is a requirement, you can use a helper function:\r\n\r\n    static void check(int count) {          \r\n        Scanner s = new Scanner(System.in);\r\n        check(count, s);\r\n    } \r\n    \r\n    static void check(int count, Scanner scanner) {\r\n        if(!scanner.hasNext()) {\r\n            return;\r\n        }\r\n        String ns = scanner.nextLine();\r\n        System.out.println(count + &quot; &quot; + ns);\r\n        check(++count, scanner);\r\n    }\r\n\r\nNotice how `new Scanner(System.in)` is only called once.","title":"How to use hasNext() from the Scanner class?","body":"<p>If using recursion is a requirement, you can use a helper function:</p>\n\n<pre><code>static void check(int count) {          \n    Scanner s = new Scanner(System.in);\n    check(count, s);\n} \n\nstatic void check(int count, Scanner scanner) {\n    if(!scanner.hasNext()) {\n        return;\n    }\n    String ns = scanner.nextLine();\n    System.out.println(count + \" \" + ns);\n    check(++count, scanner);\n}\n</code></pre>\n\n<p>Notice how <code>new Scanner(System.in)</code> is only called once.</p>\n"},{"tags":[],"owner":{"account_id":3204517,"reputation":4873,"user_id":2924323,"accept_rate":96,"display_name":"Ramesh-X"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1450445764,"creation_date":1450445764,"answer_id":34356956,"question_id":34355062,"body_markdown":"`Scanner` is kind of a `BufferedReader` (I&#39;m not telling about inheritance or something. I&#39;m telling they both have buffers. `Scanner` has just a small one). So after you enter text in the Console, those are `read()` from `System.in` and stored in the buffer inside the `Scanner`.\r\n\r\n    public static void main(String[] args) {          \r\n        Scanner s1 = new Scanner(System.in);\r\n        s1.hasNext();\r\n        Scanner s2 = new Scanner(System.in);\r\n        while(true){\r\n            System.out.println(&quot;Read line:: &quot; + s2.nextLine());\r\n        }\r\n    }\r\n\r\nUse the following input to the `Scanner`:\r\n\r\n&gt;line 1&lt;br&gt;\r\nline 2&lt;br&gt;\r\nline 3&lt;br&gt;\r\nline 4&lt;br&gt;\r\n\r\nYou will get the output:\r\n\r\n&gt;Read line:: e 1&lt;br&gt;\r\nRead line:: line 2&lt;br&gt;\r\nRead line:: line 3&lt;br&gt;\r\nRead line:: line 4&lt;br&gt;\r\n\r\nI think you might know the reason to this output. Some characters of the first line are in the `Scanner s1`. Therefore **don&#39;t** create 2 `Scanner`s to take input from same `Stream`.\r\n\r\nYou can change your code as follows to get required output.\r\n\r\n    private static Scanner s;\r\n\r\n    public static void main(String[] args) {\r\n        s = new Scanner(System.in);\r\n        check(1);  // call check method\r\n    }\r\n\r\n    static void check(int count) {\r\n        if (s.hasNextLine()) {\r\n            String ns = s.nextLine();\r\n            System.out.println(count + &quot; &quot; + ns);\r\n            count++;\r\n            check(count);\r\n        }\r\n    }\r\n\r\nYou can use `s.hasNextLine()` instead of `s.hasNext()` as you are reading line by line.\r\n\r\nNo need to use `s.hasNextLine()==true` as that statement will be `true` if and only if `s.hasNextLine()` is `true`.\r\n\r\nYou can give `EOF` character to the console using `Ctrl+Z` in Windows system and `Ctrl+D` in Unix. As I know, you can&#39;t send `EOF` character using the output window of NetBeans.","title":"How to use hasNext() from the Scanner class?","body":"<p><code>Scanner</code> is kind of a <code>BufferedReader</code> (I'm not telling about inheritance or something. I'm telling they both have buffers. <code>Scanner</code> has just a small one). So after you enter text in the Console, those are <code>read()</code> from <code>System.in</code> and stored in the buffer inside the <code>Scanner</code>.</p>\n\n<pre><code>public static void main(String[] args) {          \n    Scanner s1 = new Scanner(System.in);\n    s1.hasNext();\n    Scanner s2 = new Scanner(System.in);\n    while(true){\n        System.out.println(\"Read line:: \" + s2.nextLine());\n    }\n}\n</code></pre>\n\n<p>Use the following input to the <code>Scanner</code>:</p>\n\n<blockquote>\n  <p>line 1<br>\n  line 2<br>\n  line 3<br>\n  line 4<br></p>\n</blockquote>\n\n<p>You will get the output:</p>\n\n<blockquote>\n  <p>Read line:: e 1<br>\n  Read line:: line 2<br>\n  Read line:: line 3<br>\n  Read line:: line 4<br></p>\n</blockquote>\n\n<p>I think you might know the reason to this output. Some characters of the first line are in the <code>Scanner s1</code>. Therefore <strong>don't</strong> create 2 <code>Scanner</code>s to take input from same <code>Stream</code>.</p>\n\n<p>You can change your code as follows to get required output.</p>\n\n<pre><code>private static Scanner s;\n\npublic static void main(String[] args) {\n    s = new Scanner(System.in);\n    check(1);  // call check method\n}\n\nstatic void check(int count) {\n    if (s.hasNextLine()) {\n        String ns = s.nextLine();\n        System.out.println(count + \" \" + ns);\n        count++;\n        check(count);\n    }\n}\n</code></pre>\n\n<p>You can use <code>s.hasNextLine()</code> instead of <code>s.hasNext()</code> as you are reading line by line.</p>\n\n<p>No need to use <code>s.hasNextLine()==true</code> as that statement will be <code>true</code> if and only if <code>s.hasNextLine()</code> is <code>true</code>.</p>\n\n<p>You can give <code>EOF</code> character to the console using <code>Ctrl+Z</code> in Windows system and <code>Ctrl+D</code> in Unix. As I know, you can't send <code>EOF</code> character using the output window of NetBeans.</p>\n"},{"tags":[],"owner":{"account_id":4254201,"reputation":11,"user_id":3480296,"display_name":"user3480296"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470287212,"creation_date":1470287212,"answer_id":38758855,"question_id":34355062,"body_markdown":"\n    public static void main(String[] args) {\n        \n        List&lt;String&gt; eol = new ArrayList&lt;String&gt;();\n        Scanner in=new Scanner(System.in);\n        int t=1;\n        while(in.hasNext()){\n            \n            eol.add(in.nextLine());\n        }\n        \n        for (String i:eol){\n            \n            System.out.println(t+&quot; &quot;+i);\n            t++;\n        }\n        \n    }","title":"How to use hasNext() from the Scanner class?","body":"<pre><code>public static void main(String[] args) {\n\n    List&lt;String&gt; eol = new ArrayList&lt;String&gt;();\n    Scanner in=new Scanner(System.in);\n    int t=1;\n    while(in.hasNext()){\n\n        eol.add(in.nextLine());\n    }\n\n    for (String i:eol){\n\n        System.out.println(t+\" \"+i);\n        t++;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9343577,"reputation":1,"user_id":6935460,"display_name":"myer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475818564,"creation_date":1475818564,"answer_id":39910129,"question_id":34355062,"body_markdown":"    public static void main(String[] args) {\r\n        Scanner scan = new Scanner(System.in);\r\n        int count = 1;\r\n        while(scan.hasNext()){\r\n            System.out.println(count++ + &quot; &quot; + scan.nextLine());            \r\n        }\r\n    }\r\n","title":"How to use hasNext() from the Scanner class?","body":"<pre><code>public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    int count = 1;\n    while(scan.hasNext()){\n        System.out.println(count++ + \" \" + scan.nextLine());            \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8605804,"reputation":1,"user_id":6445989,"display_name":"JeyaRama Balan Rajagani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477530779,"creation_date":1477507639,"answer_id":40269978,"question_id":34355062,"body_markdown":"Here is the error free program.\r\n\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Solution {\r\n    \r\n        public static void main(String[] args) {\r\n            Scanner scan = new Scanner(System.in);\r\n            int count = 1;\r\n            while(scan.hasNext()) {\r\n                String s = scan.nextLine();\r\n                System.out.println(count + &quot; &quot; + s);\r\n                count++;\r\n            }\r\n        }\r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<p>Here is the error free program.</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        int count = 1;\n        while(scan.hasNext()) {\n            String s = scan.nextLine();\n            System.out.println(count + \" \" + s);\n            count++;\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6229027,"reputation":28489,"user_id":4850040,"accept_rate":62,"display_name":"Toby Speight"},"score":0,"creation_date":1493824312,"post_id":43760803,"comment_id":74569105,"body_markdown":"Whilst this code snippet is welcome, and may provide some help, it would be [greatly improved if it included an explanation](//meta.stackexchange.com/q/114762) of *how* it addresses the question.  Without that, your answer has much less educational value - remember that you are answering the question for readers in the future, not just the person asking now!  Please [edit] your answer to add explanation, and give an indication of what limitations and assumptions apply.","body":"Whilst this code snippet is welcome, and may provide some help, it would be <a href=\"//meta.stackexchange.com/q/114762\">greatly improved if it included an explanation</a> of <i>how</i> it addresses the question.  Without that, your answer has much less educational value - remember that you are answering the question for readers in the future, not just the person asking now!  Please <a href=\"https://stackoverflow.com/posts/43760803/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}],"tags":[],"owner":{"account_id":244938,"reputation":5802,"user_id":518116,"accept_rate":84,"display_name":"worked"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493816402,"creation_date":1493816402,"answer_id":43760803,"question_id":34355062,"body_markdown":"    Scanner scanner = new Scanner(System.in);\r\n    int i = 1;\r\n    while(scanner.hasNext()) {\r\n      System.out.println(i + &quot; &quot; + scanner.nextLine());\r\n      i++;\r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<pre><code>Scanner scanner = new Scanner(System.in);\nint i = 1;\nwhile(scanner.hasNext()) {\n  System.out.println(i + \" \" + scanner.nextLine());\n  i++;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11598815,"reputation":1,"user_id":8496675,"display_name":"divya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503342437,"creation_date":1503340338,"answer_id":45803584,"question_id":34355062,"body_markdown":"Use while instead of if,but recursive version is better.Here is iterative version:\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    public class Solution {\r\n    \r\n        public static void main(String[] args) {\r\n            /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\r\n            Scanner sc=new Scanner(System.in);\r\n            {\r\n                int i=0;\r\n                \r\n              while(sc.hasNext()==true)\r\n                {\r\n                    i=i+1;\r\n                     String s=sc.nextLine();\r\n                    System.out.println(i+&quot; &quot;+s);\r\n                    \r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to use hasNext() from the Scanner class?","body":"<p>Use while instead of if,but recursive version is better.Here is iterative version:</p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n        Scanner sc=new Scanner(System.in);\n        {\n            int i=0;\n\n          while(sc.hasNext()==true)\n            {\n                i=i+1;\n                 String s=sc.nextLine();\n                System.out.println(i+\" \"+s);\n\n            };\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11205809,"reputation":1433,"user_id":8221470,"display_name":"Hetal Rachh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555218198,"creation_date":1555218198,"answer_id":55672107,"question_id":34355062,"body_markdown":"`java.util.Scanner.hasNext()` basically helps you to read the input. This method returns true if this Scanner has another token of any type in its input. Returns false otherwise.\r\n Check below code snippet,\r\n\r\n     while(sc.hasNext()) {\r\n          System.out.println(i + &quot; &quot; + sc.nextLine());\r\n          i++;\r\n     }\r\n\r\nYou can find complete code at below link,\r\n\r\nhttps://github.com/hetalrachh/HackerRank/blob/master/Practice/Java/Introduction/EndOfFile.java\r\n\r\n\r\n\r\n","title":"How to use hasNext() from the Scanner class?","body":"<p><code>java.util.Scanner.hasNext()</code> basically helps you to read the input. This method returns true if this Scanner has another token of any type in its input. Returns false otherwise.\n Check below code snippet,</p>\n\n<pre><code> while(sc.hasNext()) {\n      System.out.println(i + \" \" + sc.nextLine());\n      i++;\n }\n</code></pre>\n\n<p>You can find complete code at below link,</p>\n\n<p><a href=\"https://github.com/hetalrachh/HackerRank/blob/master/Practice/Java/Introduction/EndOfFile.java\" rel=\"nofollow noreferrer\">https://github.com/hetalrachh/HackerRank/blob/master/Practice/Java/Introduction/EndOfFile.java</a></p>\n"},{"tags":[],"owner":{"account_id":17782560,"reputation":1,"user_id":12913449,"display_name":"Chandru"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582015195,"creation_date":1582015195,"answer_id":60276818,"question_id":34355062,"body_markdown":"you can try like this to get desired result:\r\n\r\npublic class EOF {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\tfor(int i =1;scan.hasNext();i++) {\r\n\t\t\tString line = scan.nextLine();\r\n\t\t\tSystem.out.println(i + &quot; &quot; + line);\r\n\t\t}\r\n\t\tscan.close();\r\n\t}\r\n\r\n}","title":"How to use hasNext() from the Scanner class?","body":"<p>you can try like this to get desired result:</p>\n\n<p>public class EOF {</p>\n\n<pre><code>public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    for(int i =1;scan.hasNext();i++) {\n        String line = scan.nextLine();\n        System.out.println(i + \" \" + line);\n    }\n    scan.close();\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":20610413,"reputation":47,"user_id":15129729,"display_name":"Arya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613880256,"creation_date":1612264893,"answer_id":66008706,"question_id":34355062,"body_markdown":"\r\n\r\n    public class Solution {\r\n    \r\n        \r\n        public static void main(String[] args) {\r\n        Scanner scan = new Scanner(System.in);\r\n        for(int i=1; scan.hasNext() ; \r\n        System.out.println(i++ +&quot; &quot;+scan.nextLine()));\r\n            \r\n          \r\n        }\r\n    }\r\n\r\n","title":"How to use hasNext() from the Scanner class?","body":"<pre><code>public class Solution {\n\n    \n    public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    for(int i=1; scan.hasNext() ; \n    System.out.println(i++ +&quot; &quot;+scan.nextLine()));\n        \n      \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10517283,"reputation":998,"user_id":7750999,"display_name":"Caffeine Coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683293591,"creation_date":1683293591,"answer_id":76182774,"question_id":34355062,"body_markdown":"One of the approaches - \r\n\r\n      public static void main(String[] args) {\r\n        Scanner inputScanner = new Scanner(System.in);\r\n        List&lt;String&gt; inputLines = new ArrayList();\r\n\r\n        int i=1;\r\n        while(inputScanner.hasNext()) {\r\n            inputLines.add(i+&quot; &quot;+inputScanner.nextLine());\r\n            i++;\r\n        }\r\n\r\n        inputLines.stream().forEach(k-&gt;System.out.println(k));\r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<p>One of the approaches -</p>\n<pre><code>  public static void main(String[] args) {\n    Scanner inputScanner = new Scanner(System.in);\n    List&lt;String&gt; inputLines = new ArrayList();\n\n    int i=1;\n    while(inputScanner.hasNext()) {\n        inputLines.add(i+&quot; &quot;+inputScanner.nextLine());\n        i++;\n    }\n\n    inputLines.stream().forEach(k-&gt;System.out.println(k));\n}\n</code></pre>\n"}],"owner":{"account_id":6201106,"reputation":117,"user_id":4830870,"accept_rate":80,"display_name":"Harshit Juneja"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47109,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":34355325,"answer_count":13,"score":7,"last_activity_date":1683293591,"creation_date":1450439489,"question_id":34355062,"body_markdown":"**Input Format**\r\n\r\nRead some unknown n lines of input from `stdin(System.in)` until you reach EOF; each line of input contains a non-empty String.\r\n\r\n**Output Format**\r\n\r\nFor each line, print the line number, followed by a single space, and then the line content received as input:\r\n\r\n**Sample Output**\r\n\r\n    Hello world\r\n    I am a file\r\n    Read me until end-of-file.  \r\n\r\n\r\nHere is my solution. The problem being I am not able to proceed till EOF.\r\nBut the output is just:\r\n    \r\n    Hello world\r\n\r\n\r\nHere is my code:\r\n\r\n    public class Solution {\r\n    \r\n        public static void main(String[] args) {\r\n            check(1);  // call check method\r\n        }\r\n        \r\n        static void check(int count) {          \r\n            Scanner s = new Scanner(System.in);\r\n            if(s.hasNext() == true) {\r\n                String ns = s.nextLine();\r\n                System.out.println(count + &quot; &quot; + ns);\r\n                count++;\r\n                check(count);\r\n            }\r\n        } \r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<p><strong>Input Format</strong></p>\n\n<p>Read some unknown n lines of input from <code>stdin(System.in)</code> until you reach EOF; each line of input contains a non-empty String.</p>\n\n<p><strong>Output Format</strong></p>\n\n<p>For each line, print the line number, followed by a single space, and then the line content received as input:</p>\n\n<p><strong>Sample Output</strong></p>\n\n<pre><code>Hello world\nI am a file\nRead me until end-of-file.  \n</code></pre>\n\n<p>Here is my solution. The problem being I am not able to proceed till EOF.\nBut the output is just:</p>\n\n<pre><code>Hello world\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>public class Solution {\n\n    public static void main(String[] args) {\n        check(1);  // call check method\n    }\n\n    static void check(int count) {          \n        Scanner s = new Scanner(System.in);\n        if(s.hasNext() == true) {\n            String ns = s.nextLine();\n            System.out.println(count + \" \" + ns);\n            count++;\n            check(count);\n        }\n    } \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","request","get-mapping"],"answers":[{"comments":[{"owner":{"account_id":4716379,"reputation":1255,"user_id":3901138,"accept_rate":41,"display_name":"Park JongBum"},"score":0,"creation_date":1683292532,"post_id":76181537,"comment_id":134348546,"body_markdown":"As you pointed, I factored the getOrder method into a new Service bean method. And the PostAuthorize works well.","body":"As you pointed, I factored the getOrder method into a new Service bean method. And the PostAuthorize works well."}],"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683284984,"creation_date":1683284984,"answer_id":76181537,"question_id":76181329,"body_markdown":"Ok, so here is what is going on,\r\n\r\n    @GetMapping(&quot;/read&quot;)\r\n    public String showOrderDetail(Model model, HttpServletRequest request,\r\n            Principal principal) {\r\n        String idStr = request.getParameter(&quot;id&quot;);\r\n        var corder = new Corder();\r\n        corder.setId(35);\r\n        if (idStr != null) {\r\n            Integer id = Integer.parseInt(idStr);\r\n            corder = this.getOrder(id, principal);  &lt;------------------\r\n        }\r\n        model.addAttribute(&quot;corder&quot;, corder);\r\n        return &quot;orderDetails&quot;;\r\n    }\r\n    \r\n    @PostAuthorize(&quot;hasRole(&#39;ADMIN&#39;) || &quot; +\r\n        &quot;authentication.name == returnObject.username&quot;)\r\n    private Corder getOrder(Integer id, Principal principal) {\r\n     ....\r\n    }\r\n\r\nYou invoke the method `getOrder` internally from the same bean. This means that the call would not be able to take into consideration the annotation `@PostAuthorize` when invoked internally, since the call will be made by the actual class that this method belongs to and not by the spring proxy class which will contain the actual code for the functionality of `PostAuthorize`.\r\n\r\nIt should have worked if that method (`getOrder`) was in some other class which was registered as a spring bean.\r\n\r\nYou can see [here][1] a very similar and known issue with `@Transactional`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3423972/spring-transaction-method-call-by-the-method-within-the-same-class-does-not-wo","title":"PostAuthorize not working on method called from request handler","body":"<p>Ok, so here is what is going on,</p>\n<pre><code>@GetMapping(&quot;/read&quot;)\npublic String showOrderDetail(Model model, HttpServletRequest request,\n        Principal principal) {\n    String idStr = request.getParameter(&quot;id&quot;);\n    var corder = new Corder();\n    corder.setId(35);\n    if (idStr != null) {\n        Integer id = Integer.parseInt(idStr);\n        corder = this.getOrder(id, principal);  &lt;------------------\n    }\n    model.addAttribute(&quot;corder&quot;, corder);\n    return &quot;orderDetails&quot;;\n}\n\n@PostAuthorize(&quot;hasRole('ADMIN') || &quot; +\n    &quot;authentication.name == returnObject.username&quot;)\nprivate Corder getOrder(Integer id, Principal principal) {\n ....\n}\n</code></pre>\n<p>You invoke the method <code>getOrder</code> internally from the same bean. This means that the call would not be able to take into consideration the annotation <code>@PostAuthorize</code> when invoked internally, since the call will be made by the actual class that this method belongs to and not by the spring proxy class which will contain the actual code for the functionality of <code>PostAuthorize</code>.</p>\n<p>It should have worked if that method (<code>getOrder</code>) was in some other class which was registered as a spring bean.</p>\n<p>You can see <a href=\"https://stackoverflow.com/questions/3423972/spring-transaction-method-call-by-the-method-within-the-same-class-does-not-wo\">here</a> a very similar and known issue with <code>@Transactional</code>.</p>\n"}],"owner":{"account_id":4716379,"reputation":1255,"user_id":3901138,"accept_rate":41,"display_name":"Park JongBum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76181537,"answer_count":1,"score":1,"last_activity_date":1683293424,"creation_date":1683283321,"question_id":76181329,"body_markdown":"I thought PostAuthorize decorated method should return an object having an attribute that is a part of authorization(e.g, &#39;username&#39;). I put the annotation on getOrder() method show below. Why the annotation is not functioning?\r\n\r\n    @GetMapping(&quot;/read&quot;)\r\n    public String showOrderDetail(Model model, HttpServletRequest request,\r\n    \t\tPrincipal principal) {\r\n    \tString idStr = request.getParameter(&quot;id&quot;);\r\n    \tvar corder = new Corder();\r\n    \tcorder.setId(35);\r\n    \tif (idStr != null) {\r\n    \t\tInteger id = Integer.parseInt(idStr);\r\n    \t\tcorder = this.getOrder(id, principal);\r\n    \t}\r\n    \tmodel.addAttribute(&quot;corder&quot;, corder);\r\n    \treturn &quot;orderDetails&quot;;\r\n    }\r\n    \r\n    @PostAuthorize(&quot;hasRole(&#39;ADMIN&#39;) || &quot; +\r\n        &quot;authentication.name == returnObject.username&quot;)\r\n    private Corder getOrder(Integer id, Principal principal) {\r\n    \tCorder corder = repository.findById(id).orElseThrow();\r\n    \tUser user = userRepository.findById(corder.getUserId()).get();\r\n    \r\n    \tcorder.setUsername(user.getUsername());\r\n    \treturn corder;\r\n    }","title":"PostAuthorize not working on method called from request handler","body":"<p>I thought PostAuthorize decorated method should return an object having an attribute that is a part of authorization(e.g, 'username'). I put the annotation on getOrder() method show below. Why the annotation is not functioning?</p>\n<pre><code>@GetMapping(&quot;/read&quot;)\npublic String showOrderDetail(Model model, HttpServletRequest request,\n        Principal principal) {\n    String idStr = request.getParameter(&quot;id&quot;);\n    var corder = new Corder();\n    corder.setId(35);\n    if (idStr != null) {\n        Integer id = Integer.parseInt(idStr);\n        corder = this.getOrder(id, principal);\n    }\n    model.addAttribute(&quot;corder&quot;, corder);\n    return &quot;orderDetails&quot;;\n}\n\n@PostAuthorize(&quot;hasRole('ADMIN') || &quot; +\n    &quot;authentication.name == returnObject.username&quot;)\nprivate Corder getOrder(Integer id, Principal principal) {\n    Corder corder = repository.findById(id).orElseThrow();\n    User user = userRepository.findById(corder.getUserId()).get();\n\n    corder.setUsername(user.getUsername());\n    return corder;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hql"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683283960,"post_id":76181369,"comment_id":134346653,"body_markdown":"Your UI model should track either the date, or the number of days previously, and communicate either the date, or the number of days ago you want to retrieve. So if you display records from 2023-05-04, the previous button will send a request for documents of 2023-05-03, etc, etc.","body":"Your UI model should track either the date, or the number of days previously, and communicate either the date, or the number of days ago you want to retrieve. So if you display records from 2023-05-04, the previous button will send a request for documents of 2023-05-03, etc, etc."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683284177,"post_id":76181369,"comment_id":134346690,"body_markdown":"As an aside, your query currently retrieves documents from the current date, always. Also, stop using `java.util.Date` and switch to using things like `java.time.LocalDate`.","body":"As an aside, your query currently retrieves documents from the current date, always. Also, stop using <code>java.util.Date</code> and switch to using things like <code>java.time.LocalDate</code>."},{"owner":{"account_id":27249376,"reputation":11,"user_id":20774108,"display_name":"treumiton"},"score":0,"creation_date":1683284308,"post_id":76181369,"comment_id":134346708,"body_markdown":"OK, but my method get only documents from current day. Do you know what should I do to display documents from 04.05.2023, then 03.05.2023 etc...?","body":"OK, but my method get only documents from current day. Do you know what should I do to display documents from 04.05.2023, then 03.05.2023 etc...?"},{"owner":{"account_id":27249376,"reputation":11,"user_id":20774108,"display_name":"treumiton"},"score":0,"creation_date":1683284472,"post_id":76181369,"comment_id":134346749,"body_markdown":"When I change the query to:\n```\n&quot;from Documents where uztId = :uztId and dateOfIssue = &quot; + previousDateStr;\n```\nthen I have an error: [ERROR] ErrorTracker - line 1:103: unexpected token: .2023","body":"When I change the query to: ``` &quot;from Documents where uztId = :uztId and dateOfIssue = &quot; + previousDateStr; ``` then I have an error: [ERROR] ErrorTracker - line 1:103: unexpected token: .2023"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1683289075,"post_id":76181369,"comment_id":134347699,"body_markdown":"That&#39;s possibly a problem with the date format. You replaced the `current_date()` database function call by a date with a custom (German?) format. That may cause the *unexpected token: .2023*. You could run `current_date()` in the database and output it, then have a look at the format. My first try without would be an ISO date: `2023-05-04`, you can calculate it by `previousDateStr = java.time.LocalDate.now().minusDays(1).format(DateTimeFormatter.ISO_LOCAL_DATE);`","body":"That&#39;s possibly a problem with the date format. You replaced the <code>current_date()</code> database function call by a date with a custom (German?) format. That may cause the <i>unexpected token: .2023</i>. You could run <code>current_date()</code> in the database and output it, then have a look at the format. My first try without would be an ISO date: <code>2023-05-04</code>, you can calculate it by <code>previousDateStr = java.time.LocalDate.now().minusDays(1).format(DateTimeFormat&zwnj;&#8203;ter.ISO_LOCAL_DATE);</code>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683301756,"post_id":76181369,"comment_id":134350996,"body_markdown":"You shouldn&#39;t concatenate values into a query string, you should use parameters for that.","body":"You shouldn&#39;t concatenate values into a query string, you should use parameters for that."}],"answers":[{"tags":[],"owner":{"account_id":27249376,"reputation":11,"user_id":20774108,"display_name":"treumiton"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683293228,"creation_date":1683293228,"answer_id":76182716,"question_id":76181369,"body_markdown":"I was resolve my problem.\r\n\r\nHave a nice day.\r\n\r\nController:\r\n```\r\n@RequestMapping(value = &quot;/getPrevDay/{uztId}/{daysOffset}&quot;, method = RequestMethod.GET)\r\n@ResponseBody\r\n@ResponseStatus(HttpStatus.OK)\r\n@ApiOperation(value = &quot;Każdy klik wyświetla dokumenty z pobranego dnia - 1&quot;)\r\n@ApiResponses({\r\n\t@ApiResponse(code = 200, message = &quot;Success&quot;, response = ResponseApi.class)\r\n})\r\npublic List&lt;Documents&gt; getPrevDay(@PathVariable(&quot;uztId&quot;) Integer uztId,@PathVariable Integer daysOffset) {\r\n\treturn documentsDao.getPrevDay(uztId, daysOffset);\r\n}\r\n```\r\n\r\nDAO:\r\n```\r\npublic List&lt;Documents&gt; getPrevDay(Integer uztId, Integer daysOffset) {\r\n\r\n\tZoneId defaultZoneId = ZoneId.systemDefault();\r\n\tLocalDate myVariable= LocalDate.now();\r\n\tmyVariable= myVariable.plusDays(daysOffset);\r\n\tDate prevDay = Date.from(myVariable.atStartOfDay(defaultZoneId).toInstant());\r\n\r\n\tList&lt;Documents&gt; dokumentsPrevious = (List&lt;Documents&gt;) getCurrentSession()\r\n\t\t.createQuery(&quot;from Documents where uztId = :uztId and dataOfIssue = :dateOfIssue order by dateOfIssue DESC&quot;)\r\n\t\t.setParameter(&quot;uztId&quot;, uztId)\r\n\t\t.setParameter(&quot;dateOfIssue &quot;, prevDay)\r\n\t\t.getResultList();\r\n\r\n\treturn dokumentsPrevious;\r\n}\r\n```","title":"How to get data from database one day previous on click","body":"<p>I was resolve my problem.</p>\n<p>Have a nice day.</p>\n<p>Controller:</p>\n<pre><code>@RequestMapping(value = &quot;/getPrevDay/{uztId}/{daysOffset}&quot;, method = RequestMethod.GET)\n@ResponseBody\n@ResponseStatus(HttpStatus.OK)\n@ApiOperation(value = &quot;Każdy klik wyświetla dokumenty z pobranego dnia - 1&quot;)\n@ApiResponses({\n    @ApiResponse(code = 200, message = &quot;Success&quot;, response = ResponseApi.class)\n})\npublic List&lt;Documents&gt; getPrevDay(@PathVariable(&quot;uztId&quot;) Integer uztId,@PathVariable Integer daysOffset) {\n    return documentsDao.getPrevDay(uztId, daysOffset);\n}\n</code></pre>\n<p>DAO:</p>\n<pre><code>public List&lt;Documents&gt; getPrevDay(Integer uztId, Integer daysOffset) {\n\n    ZoneId defaultZoneId = ZoneId.systemDefault();\n    LocalDate myVariable= LocalDate.now();\n    myVariable= myVariable.plusDays(daysOffset);\n    Date prevDay = Date.from(myVariable.atStartOfDay(defaultZoneId).toInstant());\n\n    List&lt;Documents&gt; dokumentsPrevious = (List&lt;Documents&gt;) getCurrentSession()\n        .createQuery(&quot;from Documents where uztId = :uztId and dataOfIssue = :dateOfIssue order by dateOfIssue DESC&quot;)\n        .setParameter(&quot;uztId&quot;, uztId)\n        .setParameter(&quot;dateOfIssue &quot;, prevDay)\n        .getResultList();\n\n    return dokumentsPrevious;\n}\n</code></pre>\n"}],"owner":{"account_id":27249376,"reputation":11,"user_id":20774108,"display_name":"treumiton"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683293228,"creation_date":1683283586,"question_id":76181369,"body_markdown":"I&#39;m building my app. I want to get documents from the DB when I clicked button &#39;previous&#39;. Then the documents from the previous day should be displayed (e.g. 11 documents). When I click the button again, documents from two days ago should be displayed (e.g. 5 documents). And when I click the button again, documents from three days ago should be displayed (e.g. 8 documents), etc. etc.\r\n\r\nI have a method getting documents from the current day, but I don&#39;t know how to make each click move the date back one day and get documents.\r\n\r\nuztId is user ID from DB.\r\n\r\ndateOfIssue is Data type.\r\n\r\nMy local date is &quot;dd.MM.yyyy&quot;\r\n\r\nController:\r\n```java\r\n@RequestMapping(value = &quot;/getDocsPrevDay/{uztId}&quot;, method = RequestMethod.GET)\r\n@ResponseBody\r\n@ResponseStatus(HttpStatus.OK)\r\n@ApiOperation(value = &quot;Get documents previous day and again&quot;)\r\n@ApiResponses({\r\n\t\t@ApiResponse(code = 200, message = &quot;Success&quot;, response = ResponseApi.class)\r\n})\r\npublic List&lt;Documents&gt; getPrevDay(@PathVariable(&quot;uztId&quot;) Integer uztId) {\r\n\treturn documentsDao.getPrevDay(uztId);\r\n}\r\n```\r\n\r\nDAO:\r\n```java\r\nprivate static final long ONE_DAY_MILLI_SECONDS = 24 * 60 * 60 * 1000;\r\nprivate static final String DATE_FORMAT = &quot;dd.MM.yyyy&quot;;\r\n\r\npublic List&lt;Documents&gt; getPrevDay(Integer uztId) {\r\n\tjava.util.Date currentDate = new java.util.Date();\r\n\tSimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT);\r\n\r\n\tlong previousDayMilliSeconds = currentDate.getTime() - ONE_DAY_MILLI_SECONDS;\r\n\tjava.util.Date previousDate = new Date(previousDayMilliSeconds);\r\n\tString previousDateStr = dateFormat.format(previousDate);\r\n\r\n\tSystem.out.println(&quot;current date: &quot; + dateFormat.format(currentDate));\r\n\tSystem.out.println(&quot;previous: &quot; + previousDateStr);\r\n\r\n\tList&lt;Documents&gt; dokumentsPrevious = (List&lt;Documents&gt;) getCurrentSession()\r\n\t\t\t.createQuery(&quot;from Documents where uztId = :uztId and dateOfIssue = current_date()&quot;)\r\n\t\t\t.setParameter(&quot;uztId&quot;, uztId)\r\n\t\t\t.getResultList();\r\n\r\n\treturn dokumentsPrevious;\r\n}\r\n```","title":"How to get data from database one day previous on click","body":"<p>I'm building my app. I want to get documents from the DB when I clicked button 'previous'. Then the documents from the previous day should be displayed (e.g. 11 documents). When I click the button again, documents from two days ago should be displayed (e.g. 5 documents). And when I click the button again, documents from three days ago should be displayed (e.g. 8 documents), etc. etc.</p>\n<p>I have a method getting documents from the current day, but I don't know how to make each click move the date back one day and get documents.</p>\n<p>uztId is user ID from DB.</p>\n<p>dateOfIssue is Data type.</p>\n<p>My local date is &quot;dd.MM.yyyy&quot;</p>\n<p>Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/getDocsPrevDay/{uztId}&quot;, method = RequestMethod.GET)\n@ResponseBody\n@ResponseStatus(HttpStatus.OK)\n@ApiOperation(value = &quot;Get documents previous day and again&quot;)\n@ApiResponses({\n        @ApiResponse(code = 200, message = &quot;Success&quot;, response = ResponseApi.class)\n})\npublic List&lt;Documents&gt; getPrevDay(@PathVariable(&quot;uztId&quot;) Integer uztId) {\n    return documentsDao.getPrevDay(uztId);\n}\n</code></pre>\n<p>DAO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final long ONE_DAY_MILLI_SECONDS = 24 * 60 * 60 * 1000;\nprivate static final String DATE_FORMAT = &quot;dd.MM.yyyy&quot;;\n\npublic List&lt;Documents&gt; getPrevDay(Integer uztId) {\n    java.util.Date currentDate = new java.util.Date();\n    SimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT);\n\n    long previousDayMilliSeconds = currentDate.getTime() - ONE_DAY_MILLI_SECONDS;\n    java.util.Date previousDate = new Date(previousDayMilliSeconds);\n    String previousDateStr = dateFormat.format(previousDate);\n\n    System.out.println(&quot;current date: &quot; + dateFormat.format(currentDate));\n    System.out.println(&quot;previous: &quot; + previousDateStr);\n\n    List&lt;Documents&gt; dokumentsPrevious = (List&lt;Documents&gt;) getCurrentSession()\n            .createQuery(&quot;from Documents where uztId = :uztId and dateOfIssue = current_date()&quot;)\n            .setParameter(&quot;uztId&quot;, uztId)\n            .getResultList();\n\n    return dokumentsPrevious;\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9770,"page":455,"page_size":100}
