{"items":[{"tags":["java","spring","time","cron","jobs"],"comments":[{"owner":{"account_id":25267413,"reputation":11,"user_id":19097334,"display_name":"Ayshe Ayparcasi"},"score":1,"creation_date":1683206271,"post_id":76173579,"comment_id":134333354,"body_markdown":"I solved : with this site-&gt; https://cronexpressiontogo.com/every-2-months : 0 1/3 1,17 * *","body":"I solved : with this site-&gt; <a href=\"https://cronexpressiontogo.com/every-2-months\" rel=\"nofollow noreferrer\">cronexpressiontogo.com/every-2-months</a> : 0 1/3 1,17 * *"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683206547,"post_id":76173579,"comment_id":134333424,"body_markdown":"Shouldn&#39;t `1,17` be `2,17`?","body":"Shouldn&#39;t <code>1,17</code> be <code>2,17</code>?"},{"owner":{"account_id":25267413,"reputation":11,"user_id":19097334,"display_name":"Ayshe Ayparcasi"},"score":0,"creation_date":1683206820,"post_id":76173579,"comment_id":134333509,"body_markdown":"My leader says : 0 0 1,4,7,10,13,16,19 2,17 * * ?  @andrewJames . they both mean the same thing?","body":"My leader says : 0 0 1,4,7,10,13,16,19 2,17 * * ?  @andrewJames . they both mean the same thing?"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683207323,"post_id":76173579,"comment_id":134333669,"body_markdown":"Your question says &quot;_on the 2nd and 17th of each month_&quot;. Does the cron expression `0 1/3 1,17 * *` (the expression _you_ provided) do that?","body":"Your question says &quot;<i>on the 2nd and 17th of each month</i>&quot;. Does the cron expression <code>0 1&#47;3 1,17 * *</code> (the expression <i>you</i> provided) do that?"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683208547,"post_id":76173579,"comment_id":134334021,"body_markdown":"How are you executing your cron expression? What `cron` tool are you using? One provided by a Linux system (using `crontab`)? Or maybe [Quartz](https://www.javadoc.io/doc/org.quartz-scheduler/quartz/latest/org/quartz/CronExpression.html) (given you mentioned Spring in your question&#39;s tags)?","body":"How are you executing your cron expression? What <code>cron</code> tool are you using? One provided by a Linux system (using <code>crontab</code>)? Or maybe <a href=\"https://www.javadoc.io/doc/org.quartz-scheduler/quartz/latest/org/quartz/CronExpression.html\" rel=\"nofollow noreferrer\">Quartz</a> (given you mentioned Spring in your question&#39;s tags)?"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683210885,"post_id":76173579,"comment_id":134334698,"body_markdown":"`0 1-23/3 2,17 * *` [link](https://www.crondrive.com/test-cron-expression?utf8=%E2%9C%93&amp;expression=0+1-23%2F3+2%2C17+*+*&amp;time_zone=UTC&amp;commit=Test) is equivalent to `0 1,4,7,10,13,16,19,22 2,17 * *` [link](https://www.crondrive.com/test-cron-expression?utf8=%E2%9C%93&amp;expression=0+1-23%2F3+2%2C17+*+*&amp;time_zone=UTC&amp;commit=Test)","body":"<code>0 1-23&#47;3 2,17 * *</code> <a href=\"https://www.crondrive.com/test-cron-expression?utf8=%E2%9C%93&amp;expression=0+1-23%2F3+2%2C17+%2A+%2A&amp;time_zone=UTC&amp;commit=Test\" rel=\"nofollow noreferrer\">link</a> is equivalent to <code>0 1,4,7,10,13,16,19,22 2,17 * *</code> <a href=\"https://www.crondrive.com/test-cron-expression?utf8=%E2%9C%93&amp;expression=0+1-23%2F3+2%2C17+%2A+%2A&amp;time_zone=UTC&amp;commit=Test\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683210977,"post_id":76173579,"comment_id":134334719,"body_markdown":"@AysheAyparcasi, in your leader&#39;s cron `0 0 1,4,7,10,13,16,19 2,17 * *`, it is missing a run at 22:00, after 19:00.","body":"@AysheAyparcasi, in your leader&#39;s cron <code>0 0 1,4,7,10,13,16,19 2,17 * *</code>, it is missing a run at 22:00, after 19:00."},{"owner":{"account_id":25267413,"reputation":11,"user_id":19097334,"display_name":"Ayshe Ayparcasi"},"score":0,"creation_date":1683273356,"post_id":76173579,"comment_id":134344589,"body_markdown":"I realized later that it was missing. @Ishan. Thank you.  I have tested and is working correctly.","body":"I realized later that it was missing. @Ishan. Thank you.  I have tested and is working correctly."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683291835,"post_id":76173579,"comment_id":134348368,"body_markdown":"OK - but STS is just your IDE tool. What _scheduler_ are you using? What `cron` tool?","body":"OK - but STS is just your IDE tool. What <i>scheduler</i> are you using? What <code>cron</code> tool?"}],"owner":{"account_id":25267413,"reputation":11,"user_id":19097334,"display_name":"Ayshe Ayparcasi"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683273595,"creation_date":1683205782,"question_id":76173579,"body_markdown":"I want to set a cron job time:\r\non the 2nd and 17th of each month and every 3 hours these days. \r\nAnd first time cron job running is 01 am. after periods: 04 am, 07 am, 10 am, 1 pm, 4 pm, 7pm, 10pm.\r\nJust 2 days. \r\n\r\nFor instance: \r\n2 May and 17 May. 2 June and 17 June.... And 01 am, 04 am, 07 am, 10 am, 1 pm, 4 pm, 7pm, 10pm periods.\r\n\r\n\r\n\r\n\r\n\r\nI tired this : 00 00 2-17 * * ?\r\nBut not work as I wanted.\r\n\r\nEDIT: is solved: 0 0 1,4,7,10,13,16,19,22 2,17 * *.\r\ntop 2 digits: 0 0 =&gt; seconds and minutes.\r\nSince I need seconds, I added the leading zero.\r\n","title":"How to configure &quot;on the 2nd and 17th of each month and every 3 hours these days&quot; with Cron Job in Java?","body":"<p>I want to set a cron job time:\non the 2nd and 17th of each month and every 3 hours these days.\nAnd first time cron job running is 01 am. after periods: 04 am, 07 am, 10 am, 1 pm, 4 pm, 7pm, 10pm.\nJust 2 days.</p>\n<p>For instance:\n2 May and 17 May. 2 June and 17 June.... And 01 am, 04 am, 07 am, 10 am, 1 pm, 4 pm, 7pm, 10pm periods.</p>\n<p>I tired this : 00 00 2-17 * * ?\nBut not work as I wanted.</p>\n<p>EDIT: is solved: 0 0 1,4,7,10,13,16,19,22 2,17 * *.\ntop 2 digits: 0 0 =&gt; seconds and minutes.\nSince I need seconds, I added the leading zero.</p>\n"},{"tags":["java","intellij-idea","java-8"],"comments":[{"owner":{"account_id":3701415,"reputation":605,"user_id":3081030,"accept_rate":78,"display_name":"Palcente"},"score":1,"creation_date":1461063316,"post_id":36675617,"comment_id":61017911,"body_markdown":"Had same issue after updating, you need to set your SDK before importing projects, otherwise they default to Java 1.5.","body":"Had same issue after updating, you need to set your SDK before importing projects, otherwise they default to Java 1.5."},{"owner":{"account_id":3178228,"reputation":4974,"user_id":2685581,"display_name":"Ajay Kumar"},"score":0,"creation_date":1490586611,"post_id":36675617,"comment_id":73160445,"body_markdown":"[Please refer to this post to get rid of JDK related issues in IntellJ configuration.](http://stackoverflow.com/a/42993827/2685581)","body":"<a href=\"http://stackoverflow.com/a/42993827/2685581\">Please refer to this post to get rid of JDK related issues in IntellJ configuration.</a>"},{"owner":{"account_id":3178228,"reputation":4974,"user_id":2685581,"display_name":"Ajay Kumar"},"score":0,"creation_date":1503393712,"post_id":36675617,"comment_id":78584819,"body_markdown":"https://stackoverflow.com/a/42993827/2685581","body":"<a href=\"https://stackoverflow.com/a/42993827/2685581\">stackoverflow.com/a/42993827/2685581</a>"}],"answers":[{"tags":[],"owner":{"account_id":8245944,"reputation":715,"user_id":6202029,"display_name":"a.deshpande012"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460910424,"creation_date":1460910424,"answer_id":36679117,"question_id":36675617,"body_markdown":"You should be able to change it in File&gt;Project Structure&gt;Project&gt;Project SDK and then either pick JDK 1.8 in the drop-down menu, or click &#39;new&#39; and navigate to the JDK folder.","title":"IntelliJ IDEA 16 can&#39;t resolve JDK1.8","body":"<p>You should be able to change it in File>Project Structure>Project>Project SDK and then either pick JDK 1.8 in the drop-down menu, or click 'new' and navigate to the JDK folder.</p>\n"},{"tags":[],"owner":{"account_id":7189653,"reputation":313,"user_id":5490469,"display_name":"jakub"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1461061529,"creation_date":1461061529,"answer_id":36715644,"question_id":36675617,"body_markdown":"Finally I find out...\r\nFile -&gt; Project Structure -&gt; Module...\r\nAnd for every module I had to set version 8...(there was version 5 I don&#39;t know why...)","title":"IntelliJ IDEA 16 can&#39;t resolve JDK1.8","body":"<p>Finally I find out...\nFile -> Project Structure -> Module...\nAnd for every module I had to set version 8...(there was version 5 I don't know why...)</p>\n"},{"tags":[],"owner":{"account_id":14112653,"reputation":33,"user_id":10195099,"display_name":"Shaheaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683273542,"creation_date":1683009848,"answer_id":76152334,"question_id":36675617,"body_markdown":"I added these lines in pom.xml to make maven use this version for compilation \r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; \r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n","title":"IntelliJ IDEA 16 can&#39;t resolve JDK1.8","body":"<p>I added these lines in pom.xml to make maven use this version for compilation</p>\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; \n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n"}],"owner":{"account_id":7189653,"reputation":313,"user_id":5490469,"display_name":"jakub"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6335,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":36715644,"answer_count":3,"score":11,"last_activity_date":1683273542,"creation_date":1460890639,"question_id":36675617,"body_markdown":"I have IntelliJ IDEA CE.\r\nI did some practice coding (had some project in maven) and I was developing it in IDEA 15 CE. Then update came and I cannot build project again, because of error:\r\nJComboBox&lt;String&gt; usage generified after JDK 1.6 API which would couse compilation problem with JDK 5.0.  (in maven is target JDK 1.8, in IDEA preferences is JDK1.8 and in project preferences is JDK 1.8. I Tried import settings from IDEA 15 (where it still works fine) with no difference,  also I tried clean install IDEA... with no results.\r\nAny help pls?","title":"IntelliJ IDEA 16 can&#39;t resolve JDK1.8","body":"<p>I have IntelliJ IDEA CE.\nI did some practice coding (had some project in maven) and I was developing it in IDEA 15 CE. Then update came and I cannot build project again, because of error:\nJComboBox usage generified after JDK 1.6 API which would couse compilation problem with JDK 5.0.  (in maven is target JDK 1.8, in IDEA preferences is JDK1.8 and in project preferences is JDK 1.8. I Tried import settings from IDEA 15 (where it still works fine) with no difference,  also I tried clean install IDEA... with no results.\nAny help pls?</p>\n"},{"tags":["java","intellij-idea","lambda"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":2,"up_vote_count":55,"is_accepted":true,"score":53,"last_activity_date":1450831618,"creation_date":1450831618,"answer_id":34426910,"question_id":34426794,"body_markdown":"I suspect it&#39;s just Java&#39;s type inference not being quite smart enough.  Try\r\n\r\n     .map(p -&gt; (Callable&lt;SomeClass&gt;) () -&gt; p.funct())","title":"Java &quot;target type of lambda conversion must be an interface&quot;","body":"<p>I suspect it's just Java's type inference not being quite smart enough.  Try</p>\n\n<pre><code> .map(p -&gt; (Callable&lt;SomeClass&gt;) () -&gt; p.funct())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1478125812,"creation_date":1478125404,"answer_id":40390831,"question_id":34426794,"body_markdown":"[`Stream#map()`][1] is a [*typed*][2] method, so you can explicitly specify the type:\r\n\r\n     .&lt;Callable&lt;SomeClass&gt;&gt;map(p -&gt; () -&gt; p.funct())\r\n\r\nor neater, use a method reference:\r\n\r\n     .&lt;Callable&lt;SomeClass&gt;&gt;map(p -&gt; p::funct)\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\r\n  [2]: https://docs.oracle.com/javase/tutorial/extra/generics/methods.html","title":"Java &quot;target type of lambda conversion must be an interface&quot;","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\" rel=\"noreferrer\"><code>Stream#map()</code></a> is a <a href=\"https://docs.oracle.com/javase/tutorial/extra/generics/methods.html\" rel=\"noreferrer\"><em>typed</em></a> method, so you can explicitly specify the type:</p>\n\n<pre><code> .&lt;Callable&lt;SomeClass&gt;&gt;map(p -&gt; () -&gt; p.funct())\n</code></pre>\n\n<p>or neater, use a method reference:</p>\n\n<pre><code> .&lt;Callable&lt;SomeClass&gt;&gt;map(p -&gt; p::funct)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17126499,"reputation":646,"user_id":12393574,"display_name":"jeffrey.d.m"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683273007,"creation_date":1683273007,"answer_id":76179942,"question_id":34426794,"body_markdown":"In case you&#39;re using some other fluent API, make sure you&#39;re calling the right method:\r\n\r\nWrong (facepalm):\r\n```java\r\nOptional.ofNullable(something).orElse(() -&gt; createObject());\r\n```\r\n\r\nRight:\r\n```java\r\nOptional.ofNullable(something).orElseGet(() -&gt; createObject());\r\n```","title":"Java &quot;target type of lambda conversion must be an interface&quot;","body":"<p>In case you're using some other fluent API, make sure you're calling the right method:</p>\n<p>Wrong (facepalm):</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional.ofNullable(something).orElse(() -&gt; createObject());\n</code></pre>\n<p>Right:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional.ofNullable(something).orElseGet(() -&gt; createObject());\n</code></pre>\n"}],"owner":{"account_id":7241060,"reputation":1363,"user_id":5524623,"accept_rate":66,"display_name":"Mocktheduck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64834,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":34426910,"answer_count":3,"score":46,"last_activity_date":1683273007,"creation_date":1450830744,"question_id":34426794,"body_markdown":"I&#39;m trying to use lambdas and streams in java but I&#39;m quite new to it.\r\nI got this error in IntelliJ &quot;target type of lambda conversion must be an interface&quot; when I try to make a lambda expression\r\n\r\n    List&lt;Callable&lt;SomeClass&gt;&gt; callList = prgll.stream()\r\n                                              .map(p-&gt;(()-&gt;{return p.funct();} )) &lt;--- Here I get error\r\n                                              .collect(Collectors.toList());\r\n\r\nAm I doing something wrong?","title":"Java &quot;target type of lambda conversion must be an interface&quot;","body":"<p>I'm trying to use lambdas and streams in java but I'm quite new to it.\nI got this error in IntelliJ \"target type of lambda conversion must be an interface\" when I try to make a lambda expression</p>\n\n<pre><code>List&lt;Callable&lt;SomeClass&gt;&gt; callList = prgll.stream()\n                                          .map(p-&gt;(()-&gt;{return p.funct();} )) &lt;--- Here I get error\n                                          .collect(Collectors.toList());\n</code></pre>\n\n<p>Am I doing something wrong?</p>\n"},{"tags":["java","spring-boot","rabbitmq","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1683291748,"post_id":76179898,"comment_id":134348340,"body_markdown":"Most of the remarks to [your previous question](https://stackoverflow.com/q/76163488/11748454) apply also here: use the `${spring:...}` lookup and fix up your dependencies (you are again using a version vulnerable to [Log4Shell](https://en.wikipedia.org/wiki/Log4Shell)). Unlike your previous application, this one lacks the exclusion of `spring-boot-starter-logging` from `spring-boot-starter`.","body":"Most of the remarks to <a href=\"https://stackoverflow.com/q/76163488/11748454\">your previous question</a> apply also here: use the <code>${spring:...}</code> lookup and fix up your dependencies (you are again using a version vulnerable to <a href=\"https://en.wikipedia.org/wiki/Log4Shell\" rel=\"nofollow noreferrer\">Log4Shell</a>). Unlike your previous application, this one lacks the exclusion of <code>spring-boot-starter-logging</code> from <code>spring-boot-starter</code>."},{"owner":{"account_id":17035371,"reputation":83,"user_id":12324519,"display_name":"tejashree parab"},"score":0,"creation_date":1683521326,"post_id":76179898,"comment_id":134373844,"body_markdown":"I have applied those changes, but still facing issues,\n\n\n`2023-05-08 10:13:20,605 main ERROR Error processing element RabbitMQ ([Appenders: null]): CLASS_NOT_FOUND\n2023-05-08 10:13:20,625 main ERROR Unable to locate appender &quot;rmqAppender&quot; for logger config &quot;root&quot;`","body":"I have applied those changes, but still facing issues,   <code>2023-05-08 10:13:20,605 main ERROR Error processing element RabbitMQ ([Appenders: null]): CLASS_NOT_FOUND 2023-05-08 10:13:20,625 main ERROR Unable to locate appender &quot;rmqAppender&quot; for logger config &quot;root&quot;</code>"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1683524568,"post_id":76179898,"comment_id":134374168,"body_markdown":"The `RabbitMQ` appender is provided by Spring in [`org.springframework.amqp:spring-rabbit`](https://mvnrepository.com/artifact/org.springframework.amqp/spring-rabbit). Add it as runtime dependency.","body":"The <code>RabbitMQ</code> appender is provided by Spring in <a href=\"https://mvnrepository.com/artifact/org.springframework.amqp/spring-rabbit\" rel=\"nofollow noreferrer\"><code>org.springframework.amqp:spring-rabbit</code></a>. Add it as runtime dependency."},{"owner":{"account_id":17035371,"reputation":83,"user_id":12324519,"display_name":"tejashree parab"},"score":0,"creation_date":1683543862,"post_id":76179898,"comment_id":134377772,"body_markdown":"Still the same issue persist","body":"Still the same issue persist"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1683545345,"post_id":76179898,"comment_id":134378083,"body_markdown":"If you still have `CLASS_NOT_FOUND` after adding `spring-rabbit`, check your deployment configuration. The usual suspect is deploying a fat-jar with a misconfigured Maven Shade plugin (cf. [this question](https://stackoverflow.com/a/76015329/11748454)).","body":"If you still have <code>CLASS_NOT_FOUND</code> after adding <code>spring-rabbit</code>, check your deployment configuration. The usual suspect is deploying a fat-jar with a misconfigured Maven Shade plugin (cf. <a href=\"https://stackoverflow.com/a/76015329/11748454\">this question</a>)."}],"owner":{"account_id":17035371,"reputation":83,"user_id":12324519,"display_name":"tejashree parab"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683272730,"creation_date":1683272730,"question_id":76179898,"body_markdown":"1. log4j2-spring.xml config file created under src/main/resources:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;INFO&quot;&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;RabbitMQ name=&quot;rmqAppender&quot; host=&quot;${rabbitmq.in.host}&quot;\r\n\t\t\tport=&quot;${rabbitmq.in.port}&quot;\r\n\t\t\tvirtualHost=&quot;${rabbitmq.in.virtualhost}&quot;\r\n\t\t\tusername=&quot;${rabbitmq.in.username}&quot;\r\n\t\t\tpassword=&quot;${rabbitmq.in.password}&quot;\r\n\t\t\texchange=&quot;${rabbitmq.in.exchange}&quot;\r\n\t\t\troutingKey=&quot;${rabbitmq.in.routingkey}&quot;&gt;\r\n\t\t\t&lt;PatternLayout\r\n\t\t\t\tpattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\r\n\t\t&lt;/RabbitMQ&gt;\r\n\t&lt;/Appenders&gt;\r\n\t&lt;Loggers&gt;\r\n\t\t&lt;Logger name=&quot;com.example.demo&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;rmqAppender&quot; /&gt;\r\n\t\t&lt;/Logger&gt;\r\n\t\t&lt;Root level=&quot;info&quot;&gt;\r\n\t\t\t&lt;!-- &lt;AppenderRef ref=&quot;Console&quot; /&gt; --&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;rmqAppender&quot; /&gt;\r\n\t\t&lt;/Root&gt;\r\n\t&lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\n2. Application.properties file is:\r\n\r\n```\r\nrabbitmq.in.queue=queue\r\nrabbitmq.in.exchange=exchange\r\nrabbitmq.in.routingkey=routingkey\r\nrabbitmq.in.host=host\r\nrabbitmq.in.port=port\r\nrabbitmq.in.exchangetype=exchangetype\r\nrabbitmq.in.virtualhost=virtualhost\r\nrabbitmq.in.username=username\r\nrabbitmq.in.password=password\r\nlistener.prefetchcount=1\r\nlistener.maxConcurrentConsumerCount=10\r\nmanagement.health.rabbit.enabled=false\r\n\r\nspring.datasource.url=jdbc:oracle:thin:@localhost:1521:xe\r\nspring.datasource.username=test\r\nspring.datasource.password=test\r\nspring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver\r\n    \r\nlogging.config=classpath:log4j2.xml\r\n```\r\n\r\n3. pom.xml is used is (spring-boot version-2.7.11)\r\n\r\n```\r\n&lt;dependencies&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.14.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;19.8.0.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nBut facing the error related to configuration file as shown below:\r\n\r\n```\r\nLogging system failed to initialize using configuration from &#39;classpath:log4j2-spring.xml&#39;\r\njava.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@7:13 - no applicable action for [Appenders], current ElementPath  is [[Configuration][Appenders]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@38:47 - no applicable action for [RabbitMQ], current ElementPath  is [[Configuration][Appenders][RabbitMQ]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@40:69 - no applicable action for [PatternLayout], current ElementPath  is [[Configuration][Appenders][RabbitMQ][PatternLayout]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@43:11 - no applicable action for [Loggers], current ElementPath  is [[Configuration][Loggers]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@44:66 - no applicable action for [Logger], current ElementPath  is [[Configuration][Loggers][Logger]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@45:35 - no applicable action for [AppenderRef], current ElementPath  is [[Configuration][Loggers][Logger][AppenderRef]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@47:22 - no applicable action for [Root], current ElementPath  is [[Configuration][Loggers][Root]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@49:37 - no applicable action for [AppenderRef], current ElementPath  is [[Configuration][Loggers][Root][AppenderRef]]\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:179)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithSpecificConfig(AbstractLoggingSystem.java:66)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:57)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:132)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:332)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:85)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:66)\r\n\tat java.util.ArrayList.forEach(Unknown Source)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:114)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:65)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:343)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:301)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\r\n\tat com.example.demo.DemoApplication.main(DemoApplication.java:12)\r\nException in thread &quot;main&quot; java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \r\n```\r\n\r\nNeed to send the logging custom json message to RMqueue, using asynchronous log4j2 configuration.\r\n","title":"Log the custom message to RMQ asynchronously using Log4j2","body":"<ol>\n<li>log4j2-spring.xml config file created under src/main/resources:</li>\n</ol>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;INFO&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;RabbitMQ name=&quot;rmqAppender&quot; host=&quot;${rabbitmq.in.host}&quot;\n            port=&quot;${rabbitmq.in.port}&quot;\n            virtualHost=&quot;${rabbitmq.in.virtualhost}&quot;\n            username=&quot;${rabbitmq.in.username}&quot;\n            password=&quot;${rabbitmq.in.password}&quot;\n            exchange=&quot;${rabbitmq.in.exchange}&quot;\n            routingKey=&quot;${rabbitmq.in.routingkey}&quot;&gt;\n            &lt;PatternLayout\n                pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\n        &lt;/RabbitMQ&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;com.example.demo&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;rmqAppender&quot; /&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;!-- &lt;AppenderRef ref=&quot;Console&quot; /&gt; --&gt;\n            &lt;AppenderRef ref=&quot;rmqAppender&quot; /&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Application.properties file is:</li>\n</ol>\n<pre><code>rabbitmq.in.queue=queue\nrabbitmq.in.exchange=exchange\nrabbitmq.in.routingkey=routingkey\nrabbitmq.in.host=host\nrabbitmq.in.port=port\nrabbitmq.in.exchangetype=exchangetype\nrabbitmq.in.virtualhost=virtualhost\nrabbitmq.in.username=username\nrabbitmq.in.password=password\nlistener.prefetchcount=1\nlistener.maxConcurrentConsumerCount=10\nmanagement.health.rabbit.enabled=false\n\nspring.datasource.url=jdbc:oracle:thin:@localhost:1521:xe\nspring.datasource.username=test\nspring.datasource.password=test\nspring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver\n    \nlogging.config=classpath:log4j2.xml\n</code></pre>\n<ol start=\"3\">\n<li>pom.xml is used is (spring-boot version-2.7.11)</li>\n</ol>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n        &lt;version&gt;2.14.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n        &lt;version&gt;19.8.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\n        &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>But facing the error related to configuration file as shown below:</p>\n<pre><code>Logging system failed to initialize using configuration from 'classpath:log4j2-spring.xml'\njava.lang.IllegalStateException: Logback configuration error detected: \nERROR in ch.qos.logback.core.joran.spi.Interpreter@7:13 - no applicable action for [Appenders], current ElementPath  is [[Configuration][Appenders]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@38:47 - no applicable action for [RabbitMQ], current ElementPath  is [[Configuration][Appenders][RabbitMQ]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@40:69 - no applicable action for [PatternLayout], current ElementPath  is [[Configuration][Appenders][RabbitMQ][PatternLayout]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@43:11 - no applicable action for [Loggers], current ElementPath  is [[Configuration][Loggers]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@44:66 - no applicable action for [Logger], current ElementPath  is [[Configuration][Loggers][Logger]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@45:35 - no applicable action for [AppenderRef], current ElementPath  is [[Configuration][Loggers][Logger][AppenderRef]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@47:22 - no applicable action for [Root], current ElementPath  is [[Configuration][Loggers][Root]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@49:37 - no applicable action for [AppenderRef], current ElementPath  is [[Configuration][Loggers][Root][AppenderRef]]\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:179)\n    at org.springframework.boot.logging.AbstractLoggingSystem.initializeWithSpecificConfig(AbstractLoggingSystem.java:66)\n    at org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:57)\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:132)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:332)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:85)\n    at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:66)\n    at java.util.ArrayList.forEach(Unknown Source)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:114)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:65)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:343)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:301)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\n    at com.example.demo.DemoApplication.main(DemoApplication.java:12)\nException in thread &quot;main&quot; java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \n</code></pre>\n<p>Need to send the logging custom json message to RMqueue, using asynchronous log4j2 configuration.</p>\n"},{"tags":["java","spring","spring-security","saml-2.0","spring-security-saml2"],"owner":{"account_id":10850329,"reputation":1,"user_id":7978279,"display_name":"phiphophe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683271680,"creation_date":1683271680,"question_id":76179771,"body_markdown":"My old system is using OpenSAML 1.0 and now I want to upgrade to Spring Security SAML2. In the old system I used OpenSAML 1.0 and did the authentication completely manually, after switching to Spring Security SAML2, I found it very difficult.\r\n\r\nCurrently I am facing 2 problems as follows:\r\n1. How can I allow user (Admin) to change information of IDP (Gsuite, Okta...), then user (User) can login based on that IDP?\r\n2. Is there a way to do SAML2 Log in manually?\r\n- I have an IDPMetadata.xml file stored in the database, how can I make a &lt;saml2:AuthnRequest&gt; and a &lt;saml2:AuthnReponse&gt;? based on HttpServlet?\r\n\r\n\r\n\r\n```\r\n@Configuration\r\npublic class PESaml2Configuration {\r\n    \r\n    @Autowired\r\n    private RelyingPartyRegistrationRepository relyingPartyRegistrationRepository;\r\n    \r\n    @Autowired\r\n    private RelyingPartyRegistrations relyingPartyRegistrations;\r\n    \r\n     @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n         PESaml2Authentication authentication = new PESaml2Authentication();\r\n            http\r\n            .authorizeHttpRequests()\r\n            .antMatchers(&quot;/saml2Login&quot;).permitAll()\r\n            .and()\r\n            .saml2Login()\r\n            .failureHandler(authentication)\r\n            .successHandler(authentication);\r\n\r\n        return http.build();\r\n    }\r\n    \r\n    @Bean\r\n    protected RelyingPartyRegistrationRepository relyingPartyRegistrations() throws Exception {\r\n        Saml2X509Credential credential = credential();\r\n        RelyingPartyRegistration registration = RelyingPartyRegistration\r\n                .withRegistrationId(&quot;okta-saml&quot;)\r\n                .assertingPartyDetails(party -&gt; party\r\n                    .entityId(&quot;http://www.okta.com/xxxxxxxxxxxx&quot;)\r\n                    .singleSignOnServiceLocation(&quot;https://dev-13805256.okta.com/app/xxxxx/sso/saml&quot;)\r\n                    .wantAuthnRequestsSigned(false)\r\n                    .verificationX509Credentials(c -&gt; c.add(credential))\r\n                ).build();\r\n        return new InMemoryRelyingPartyRegistrationRepository(registration);\r\n    }\r\n    \r\n    private Saml2X509Credential credential() throws IOException, CertificateException {\r\n        RelyingPartyRegistration registrations = RelyingPartyRegistrations.fromMetadata(null).registrationId(&quot;ok&quot;).build();\r\n        Resource resource = new ClassPathResource(&quot;credentials/okta.cert&quot;);\r\n        try (InputStream is = resource.getInputStream()) {\r\n            X509Certificate certificate = (X509Certificate)\r\n                    CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(is);\r\n            return Saml2X509Credential.verification(certificate);\r\n        }\r\n    }\r\n```\r\n","title":"Spring Security SAML2 - How to implement manual Saml2 login","body":"<p>My old system is using OpenSAML 1.0 and now I want to upgrade to Spring Security SAML2. In the old system I used OpenSAML 1.0 and did the authentication completely manually, after switching to Spring Security SAML2, I found it very difficult.</p>\n<p>Currently I am facing 2 problems as follows:</p>\n<ol>\n<li>How can I allow user (Admin) to change information of IDP (Gsuite, Okta...), then user (User) can login based on that IDP?</li>\n<li>Is there a way to do SAML2 Log in manually?</li>\n</ol>\n<ul>\n<li>I have an IDPMetadata.xml file stored in the database, how can I make a saml2:AuthnRequest and a saml2:AuthnReponse? based on HttpServlet?</li>\n</ul>\n<pre><code>@Configuration\npublic class PESaml2Configuration {\n    \n    @Autowired\n    private RelyingPartyRegistrationRepository relyingPartyRegistrationRepository;\n    \n    @Autowired\n    private RelyingPartyRegistrations relyingPartyRegistrations;\n    \n     @Bean\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n         PESaml2Authentication authentication = new PESaml2Authentication();\n            http\n            .authorizeHttpRequests()\n            .antMatchers(&quot;/saml2Login&quot;).permitAll()\n            .and()\n            .saml2Login()\n            .failureHandler(authentication)\n            .successHandler(authentication);\n\n        return http.build();\n    }\n    \n    @Bean\n    protected RelyingPartyRegistrationRepository relyingPartyRegistrations() throws Exception {\n        Saml2X509Credential credential = credential();\n        RelyingPartyRegistration registration = RelyingPartyRegistration\n                .withRegistrationId(&quot;okta-saml&quot;)\n                .assertingPartyDetails(party -&gt; party\n                    .entityId(&quot;http://www.okta.com/xxxxxxxxxxxx&quot;)\n                    .singleSignOnServiceLocation(&quot;https://dev-13805256.okta.com/app/xxxxx/sso/saml&quot;)\n                    .wantAuthnRequestsSigned(false)\n                    .verificationX509Credentials(c -&gt; c.add(credential))\n                ).build();\n        return new InMemoryRelyingPartyRegistrationRepository(registration);\n    }\n    \n    private Saml2X509Credential credential() throws IOException, CertificateException {\n        RelyingPartyRegistration registrations = RelyingPartyRegistrations.fromMetadata(null).registrationId(&quot;ok&quot;).build();\n        Resource resource = new ClassPathResource(&quot;credentials/okta.cert&quot;);\n        try (InputStream is = resource.getInputStream()) {\n            X509Certificate certificate = (X509Certificate)\n                    CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(is);\n            return Saml2X509Credential.verification(certificate);\n        }\n    }\n</code></pre>\n"},{"tags":["java","mqtt","paho"],"owner":{"account_id":2552047,"reputation":3028,"user_id":2215617,"accept_rate":71,"display_name":"Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683271474,"creation_date":1683271474,"question_id":76179746,"body_markdown":"I could use this code to get a retained message with eclipse paho:\r\n\r\n        client.subscribe(myRetainedMessageTopic, (topic, message) -&gt; {\r\n          this.state = message.toString();\r\n          client.unsubscribe(topic);\r\n        });\r\n\r\n\r\nHowever, this brings some trouble with it. \r\n\r\n1. I have no guarantee, that myMessageTopic has a value\r\n2. I need to somehow wait for the listeners to finish. If no value is there, they will keep in waiting state. \r\n\r\nOne easy way would be to do some trick like this:\r\n\r\n        AtomicBoolean myTopicPresent = new AtomicBoolean(false);\r\n        client.subscribe(myRetainedMessageTopic, (topic, message) -&gt; {\r\n          this.state = message.toString();\r\n          myTopicPresent.set(true);\r\n        });\r\n        Thread.sleep(500);\r\n        client.unsubscribe(myRetainedMessageTopic);\r\n        if(!myTopicPresent.get()) {\r\n          this.state = DEFAULT_STATE;\r\n          client.publish(myRetainedMessageTopic, retainedMqttMessageWithDefaultState);\r\n        }\r\n\r\nHowever, this feels a bit hacky. Isn&#180;t there a more decent way to handle such a case synchronously and more properly without some &quot;random&quot; timeout?\r\n\r\n","title":"mqtt get retained message or default value","body":"<p>I could use this code to get a retained message with eclipse paho:</p>\n<pre><code>    client.subscribe(myRetainedMessageTopic, (topic, message) -&gt; {\n      this.state = message.toString();\n      client.unsubscribe(topic);\n    });\n</code></pre>\n<p>However, this brings some trouble with it.</p>\n<ol>\n<li>I have no guarantee, that myMessageTopic has a value</li>\n<li>I need to somehow wait for the listeners to finish. If no value is there, they will keep in waiting state.</li>\n</ol>\n<p>One easy way would be to do some trick like this:</p>\n<pre><code>    AtomicBoolean myTopicPresent = new AtomicBoolean(false);\n    client.subscribe(myRetainedMessageTopic, (topic, message) -&gt; {\n      this.state = message.toString();\n      myTopicPresent.set(true);\n    });\n    Thread.sleep(500);\n    client.unsubscribe(myRetainedMessageTopic);\n    if(!myTopicPresent.get()) {\n      this.state = DEFAULT_STATE;\n      client.publish(myRetainedMessageTopic, retainedMqttMessageWithDefaultState);\n    }\n</code></pre>\n<p>However, this feels a bit hacky. Isn´t there a more decent way to handle such a case synchronously and more properly without some &quot;random&quot; timeout?</p>\n"},{"tags":["java","android","notifications","foreground","foreground-service"],"comments":[{"owner":{"account_id":14218047,"reputation":11740,"user_id":10271334,"display_name":"Jeel Vankhede"},"score":0,"creation_date":1555413053,"post_id":55706796,"comment_id":98094376,"body_markdown":"How do you start this `Service`?","body":"How do you start this <code>Service</code>?"},{"owner":{"account_id":7576335,"reputation":379,"user_id":5748603,"accept_rate":56,"display_name":"Andry Jhonas"},"score":0,"creation_date":1555413121,"post_id":55706796,"comment_id":98094418,"body_markdown":"@JeelVankhede\n`protected void onStart() {\n\t\tsuper.onStart();\n\t\t// Bind to LocalService\n\t\tIntent intent = new Intent(this, SocketService.class);\n\t\tbindService(intent, serviceConnection, Context.BIND_AUTO_CREATE);\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n            ContextCompat.startForegroundService(this, new Intent(this, SocketService.class));\n        else\n            this.startService(new Intent(this, SocketService.class));\n\t}`","body":"@JeelVankhede <code>protected void onStart() { \t\tsuper.onStart(); \t\t&#47;&#47; Bind to LocalService \t\tIntent intent = new Intent(this, SocketService.class); \t\tbindService(intent, serviceConnection, Context.BIND_AUTO_CREATE);          if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)             ContextCompat.startForegroundService(this, new Intent(this, SocketService.class));         else             this.startService(new Intent(this, SocketService.class)); \t}</code>"},{"owner":{"account_id":14218047,"reputation":11740,"user_id":10271334,"display_name":"Jeel Vankhede"},"score":0,"creation_date":1555432109,"post_id":55706796,"comment_id":98106113,"body_markdown":"`startForeground(1, builder.build());` put this line outside of if condition in `onCreate()`.","body":"<code>startForeground(1, builder.build());</code> put this line outside of if condition in <code>onCreate()</code>."}],"answers":[{"tags":[],"owner":{"account_id":9438152,"reputation":90,"user_id":7019526,"display_name":"Muhammad Imran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555413182,"creation_date":1555413182,"answer_id":55706850,"question_id":55706796,"body_markdown":"start service for below apis in else statement.                                                         \r\n\r\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\r\n        // only for newer versions\r\n          Intent pushIntent = new Intent(this, ClassName.class);\r\n          startForegroundService(pushIntent);\r\n    } else {\r\n          Intent pushIntent = new Intent(this, ClassName.class);\r\n          startService(pushIntent);\r\n    }","title":"I am trying to start Foreground service on older API version. Work on APIs 26+","body":"<p>start service for below apis in else statement.                                                         </p>\n\n<pre><code>if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\n    // only for newer versions\n      Intent pushIntent = new Intent(this, ClassName.class);\n      startForegroundService(pushIntent);\n} else {\n      Intent pushIntent = new Intent(this, ClassName.class);\n      startService(pushIntent);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12703494,"reputation":139,"user_id":9229521,"display_name":"Kalpesh Kulye"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555415148,"creation_date":1555415148,"answer_id":55707412,"question_id":55706796,"body_markdown":"Write code for devices with api lower than 26 same as written in if statement excluding the part of notification channel because notification channel is not supported in devices with version lower than 26\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            // you had written code for device version greater than O\r\n        } else {\r\n           //You need to write code for device with lower version here\r\n        }","title":"I am trying to start Foreground service on older API version. Work on APIs 26+","body":"<p>Write code for devices with api lower than 26 same as written in if statement excluding the part of notification channel because notification channel is not supported in devices with version lower than 26</p>\n\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        // you had written code for device version greater than O\n    } else {\n       //You need to write code for device with lower version here\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10309885,"reputation":2559,"user_id":7606064,"display_name":"Dyvoker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1588316113,"creation_date":1588316113,"answer_id":61538108,"question_id":55706796,"body_markdown":"Method `ContextCompat.startForegroundService(...)` already contain `if` block:\r\n\r\n    public static void startForegroundService(@NonNull Context context, @NonNull Intent intent) {\r\n        if (Build.VERSION.SDK_INT &gt;= 26) {\r\n            context.startForegroundService(intent);\r\n        } else {\r\n            // Pre-O behavior.\r\n            context.startService(intent);\r\n        }\r\n    }\r\nJust call `ContextCompat.startForegroundService(this, pushIntent)`.\r\n\r\nAnd you need to move `startForeground` outside `if` block:\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n        ...        \r\n    }\r\n    startForeground(1, builder.build());\r\n\r\nAlso, don&#39;t forget to call `notificationManagerCompat.notify(NOTIFICATION_ID, notification)` on older APIs (if notification doesn&#39;t show automatically). `NOTIFICATION_ID` must be NOT ZERO!!!","title":"I am trying to start Foreground service on older API version. Work on APIs 26+","body":"<p>Method <code>ContextCompat.startForegroundService(...)</code> already contain <code>if</code> block:</p>\n\n<pre><code>public static void startForegroundService(@NonNull Context context, @NonNull Intent intent) {\n    if (Build.VERSION.SDK_INT &gt;= 26) {\n        context.startForegroundService(intent);\n    } else {\n        // Pre-O behavior.\n        context.startService(intent);\n    }\n}\n</code></pre>\n\n<p>Just call <code>ContextCompat.startForegroundService(this, pushIntent)</code>.</p>\n\n<p>And you need to move <code>startForeground</code> outside <code>if</code> block:</p>\n\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n    ...        \n}\nstartForeground(1, builder.build());\n</code></pre>\n\n<p>Also, don't forget to call <code>notificationManagerCompat.notify(NOTIFICATION_ID, notification)</code> on older APIs (if notification doesn't show automatically). <code>NOTIFICATION_ID</code> must be NOT ZERO!!!</p>\n"}],"owner":{"account_id":7576335,"reputation":379,"user_id":5748603,"accept_rate":56,"display_name":"Andry Jhonas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1962,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1683271011,"creation_date":1555412976,"question_id":55706796,"body_markdown":"I need to start my app service foreground. My code work fine with API level 26 and newer, but not with older APIs level. On older version Service is shown in running service but don&#39;t send the starting notification. What I need to change to my code, why isn&#39;t working?\r\n```\r\npublic void onCreate() {\r\n\t\tsuper.onCreate();\r\n\t\tmessageIntent.setAction(getString(R.string.receiver_receive));\r\n\r\n\r\n\r\n\t\tNotificationCompat.Builder builder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_ID_DEFAULT)\r\n\t\t\t\t.setOngoing(false).setSmallIcon(R.drawable.ic_launcher).setPriority(Notification.PRIORITY_MIN);\r\n\r\n\t\tif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n\t\t\tNotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n\t\t\tNotificationChannel notificationChannel = new NotificationChannel(NOTIFICATION_CHANNEL_ID_DEFAULT,\r\n\t\t\t\t\tNOTIFICATION_CHANNEL_ID_DEFAULT, NotificationManager.IMPORTANCE_LOW);\r\n\t\t\tnotificationChannel.setDescription(NOTIFICATION_CHANNEL_ID_DEFAULT);\r\n\t\t\tnotificationChannel.setSound(null, null);\r\n\t\t\tnotificationManager.createNotificationChannel(notificationChannel);\r\n\t\t\tstartForeground(1, builder.build());\r\n\t\t}\r\n\r\n\t}\r\n```\r\nStarting the Service\r\n```\r\nprotected void onStart() {\r\n\t\tsuper.onStart();\r\n\t\t// Bind to LocalService\r\n\t\tIntent intent = new Intent(this, SocketService.class);\r\n\t\tbindService(intent, serviceConnection, Context.BIND_AUTO_CREATE);\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\r\n            ContextCompat.startForegroundService(this, new Intent(this, SocketService.class));\r\n        else\r\n            this.startService(new Intent(this, SocketService.class));\r\n\t}\r\n```","title":"I am trying to start Foreground service on older API version. Work on APIs 26+","body":"<p>I need to start my app service foreground. My code work fine with API level 26 and newer, but not with older APIs level. On older version Service is shown in running service but don't send the starting notification. What I need to change to my code, why isn't working?</p>\n\n<pre><code>public void onCreate() {\n        super.onCreate();\n        messageIntent.setAction(getString(R.string.receiver_receive));\n\n\n\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_ID_DEFAULT)\n                .setOngoing(false).setSmallIcon(R.drawable.ic_launcher).setPriority(Notification.PRIORITY_MIN);\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n            NotificationChannel notificationChannel = new NotificationChannel(NOTIFICATION_CHANNEL_ID_DEFAULT,\n                    NOTIFICATION_CHANNEL_ID_DEFAULT, NotificationManager.IMPORTANCE_LOW);\n            notificationChannel.setDescription(NOTIFICATION_CHANNEL_ID_DEFAULT);\n            notificationChannel.setSound(null, null);\n            notificationManager.createNotificationChannel(notificationChannel);\n            startForeground(1, builder.build());\n        }\n\n    }\n</code></pre>\n\n<p>Starting the Service</p>\n\n<pre><code>protected void onStart() {\n        super.onStart();\n        // Bind to LocalService\n        Intent intent = new Intent(this, SocketService.class);\n        bindService(intent, serviceConnection, Context.BIND_AUTO_CREATE);\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n            ContextCompat.startForegroundService(this, new Intent(this, SocketService.class));\n        else\n            this.startService(new Intent(this, SocketService.class));\n    }\n</code></pre>\n"},{"tags":["java","oracle"],"answers":[{"tags":[],"owner":{"account_id":12926,"reputation":35063,"user_id":25714,"display_name":"Gary Myers"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1473231871,"creation_date":1473231871,"answer_id":39363265,"question_id":39363185,"body_markdown":"The archiver is responsible for taking the online redo logs and writing them off to a safe place in the event they are needed for a database recovery.\r\n\r\nCurrently they are unable to do this, so they are preventing any operation on the database until the DBA goes in to sort it all out.","title":"java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved","body":"<p>The archiver is responsible for taking the online redo logs and writing them off to a safe place in the event they are needed for a database recovery.</p>\n\n<p>Currently they are unable to do this, so they are preventing any operation on the database until the DBA goes in to sort it all out.</p>\n"},{"tags":[],"owner":{"account_id":10558379,"reputation":569,"user_id":7778833,"display_name":"Amy Doxy"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1563797084,"creation_date":1563797084,"answer_id":57145689,"question_id":39363185,"body_markdown":"You have to free up space by deleting archivelogs &amp; backups.\r\n\r\n 1. Use the rman(Recovery Manager) command. Just type rman on the command line\r\n 2. Connect to the target database\r\n[![Rman command and Connect to the target DB][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Q150Y.png\r\n 3. Delete backups using\r\n\r\n    `delete backup;`\r\nor only the obsolete backup files with:\r\n\r\n    `delete obsolete;`\r\n\r\n 4. Remove archive logs:\r\n\r\n    `delete force copy of archivelog all;`\r\n\r\n**Ref**: https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=153283327861734&amp;id=2340995.1&amp;_afrWindowMode=0&amp;_adf.ctrl-state=mku6itxsh_4","title":"java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved","body":"<p>You have to free up space by deleting archivelogs &amp; backups.</p>\n\n<ol>\n<li>Use the rman(Recovery Manager) command. Just type rman on the command line</li>\n<li><p>Connect to the target database\n<a href=\"https://i.stack.imgur.com/Q150Y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Q150Y.png\" alt=\"Rman command and Connect to the target DB\"></a></p></li>\n<li><p>Delete backups using</p>\n\n<p><code>delete backup;</code>\nor only the obsolete backup files with:</p>\n\n<p><code>delete obsolete;</code></p></li>\n<li><p>Remove archive logs:</p>\n\n<p><code>delete force copy of archivelog all;</code></p></li>\n</ol>\n\n<p><strong>Ref</strong>: <a href=\"https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=153283327861734&amp;id=2340995.1&amp;_afrWindowMode=0&amp;_adf.ctrl-state=mku6itxsh_4\" rel=\"noreferrer\">https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=153283327861734&amp;id=2340995.1&amp;_afrWindowMode=0&amp;_adf.ctrl-state=mku6itxsh_4</a></p>\n"},{"tags":[],"owner":{"account_id":463980,"reputation":6162,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683270561,"creation_date":1683270561,"answer_id":76179618,"question_id":39363185,"body_markdown":"Since the Oracle archive is full. Create a maintenance job to perform a daily cleanup.","title":"java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved","body":"<p>Since the Oracle archive is full. Create a maintenance job to perform a daily cleanup.</p>\n"}],"owner":{"account_id":1908823,"reputation":2304,"user_id":1885666,"accept_rate":67,"display_name":"Developer Desk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35277,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":39363265,"answer_count":3,"score":3,"last_activity_date":1683270561,"creation_date":1473231582,"question_id":39363185,"body_markdown":"I am getting below error while connecting to oracle database.\r\n\r\n    java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved.07-09-2016 12:25:44 ERROR DBUtils:122 - loginUser Exception :java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved.\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:447)\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:389)\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:382)\r\n\tat oracle.jdbc.driver.T4CTTIoauthenticate.processError(T4CTTIoauthenticate.java:444)\r\n\tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:513)\r\n\tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:227)\r\n\tat oracle.jdbc.driver.T4CTTIoauthenticate.doOSESSKEY(T4CTTIoauthenticate.java:407)\r\n\tat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:416)\r\n\tat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:553)\r\n\tat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:254)\r\n\tat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\r\n\tat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:528)\r\n\tat java.sql.DriverManager.getConnection(Unknown Source)\r\n\tat java.sql.DriverManager.getConnection(Unknown Source)\r\n\tat com.sne.dao.DBUtils.loginUser(DBUtils.java:55)\r\n\tat com.sne.servlets.SELogin.doPost(SELogin.java:46)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:641)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\r\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)\r\n\tat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:306)\r\n\tat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:323)\r\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1719)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n\tat java.lang.Thread.run(Unknown Source)\r\n\r\nError While Connecting db through SQL Developer...\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/8Fzp5.png","title":"java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved","body":"<p>I am getting below error while connecting to oracle database.</p>\n\n<pre><code>java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved.07-09-2016 12:25:44 ERROR DBUtils:122 - loginUser Exception :java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved.\n\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:447)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:389)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:382)\nat oracle.jdbc.driver.T4CTTIoauthenticate.processError(T4CTTIoauthenticate.java:444)\nat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:513)\nat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:227)\nat oracle.jdbc.driver.T4CTTIoauthenticate.doOSESSKEY(T4CTTIoauthenticate.java:407)\nat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:416)\nat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:553)\nat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:254)\nat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\nat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:528)\nat java.sql.DriverManager.getConnection(Unknown Source)\nat java.sql.DriverManager.getConnection(Unknown Source)\nat com.sne.dao.DBUtils.loginUser(DBUtils.java:55)\nat com.sne.servlets.SELogin.doPost(SELogin.java:46)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:641)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\nat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)\nat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:306)\nat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:323)\nat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1719)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\nat java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>Error While Connecting db through SQL Developer...</p>\n\n<p><a href=\"https://i.stack.imgur.com/8Fzp5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Fzp5.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","visual-studio-code","autocomplete"],"comments":[{"owner":{"account_id":15396644,"reputation":25745,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1682287719,"post_id":76086677,"comment_id":134187443,"body_markdown":"loosely related (not an answer): https://stackoverflow.com/a/75933450/11107541","body":"loosely related (not an answer): <a href=\"https://stackoverflow.com/a/75933450/11107541\">stackoverflow.com/a/75933450/11107541</a>"},{"owner":{"account_id":444493,"reputation":151920,"user_id":836330,"display_name":"Mark"},"score":0,"creation_date":1682540035,"post_id":76086677,"comment_id":134234081,"body_markdown":"May be `parameter hints` , disable the setting with that name.","body":"May be <code>parameter hints</code> , disable the setting with that name."}],"answers":[{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683269924,"creation_date":1683269924,"answer_id":76179560,"question_id":76086677,"body_markdown":"Search for `java.signatureHelp.enabled` in the **Settings** panel and uncheck it.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nOr add the following configuration in *settings.json*:\r\n\r\n```json\r\n\t&quot;java.signatureHelp.enabled&quot;: false,\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/WZUvJ.png","title":"Disable parameter selection after completing &quot;sout&quot; in vscode","body":"<p>Search for <code>java.signatureHelp.enabled</code> in the <strong>Settings</strong> panel and uncheck it.</p>\n<p><a href=\"https://i.stack.imgur.com/WZUvJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WZUvJ.png\" alt=\"enter image description here\" /></a></p>\n<p>Or add the following configuration in <em>settings.json</em>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>    &quot;java.signatureHelp.enabled&quot;: false,\n</code></pre>\n"}],"owner":{"account_id":28141578,"reputation":11,"user_id":21504533,"display_name":"Cristobal Sanchez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683269924,"creation_date":1682275969,"question_id":76086677,"body_markdown":"After I write \r\n`sout`\r\nand use auto completion for it to be `System.out.println();`&lt;br&gt;&lt;br&gt;\r\n\r\nIt shows this &lt;BR&gt;\r\n[![enter image description here][1]][1]\r\n&lt;BR&gt;\r\nand I want to disable it..\r\nHope someone can help me, thanks in advance!\r\n\r\nI tried many configurations related to `editor.suggest` in `vscode settings.json` but couldn&#39;t find the correct one.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3rzri.png","title":"Disable parameter selection after completing &quot;sout&quot; in vscode","body":"<p>After I write\n<code>sout</code>\nand use auto completion for it to be <code>System.out.println();</code><br><br></p>\n<p>It shows this <BR>\n<a href=\"https://i.stack.imgur.com/3rzri.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3rzri.png\" alt=\"enter image description here\" /></a>\n<BR>\nand I want to disable it..\nHope someone can help me, thanks in advance!</p>\n<p>I tried many configurations related to <code>editor.suggest</code> in <code>vscode settings.json</code> but couldn't find the correct one.</p>\n"},{"tags":["java","multithreading"],"answers":[{"tags":[],"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683269875,"creation_date":1683189240,"answer_id":76171129,"question_id":76170613,"body_markdown":"The benefit is performance.\r\n\r\nA &#39;state = NORMAL&#39; leads to a volatile store since &#39;state&#39; is a volatile variable. The putOrderInt is a release store. On modern JDK&#39;s you will see that a &#39;STATE.setRelease(this, NORMAL);&#39; is used. A volatile store is typically much more expensive than a release store because it has more strict memory ordering guarantees.\r\n\r\nOn the X86 a volatile store typically is followed by [StoreLoad] fence which causes subsequent loads to wait till the store buffer has been drained. And this can take time because the core can only commit the store to the coherent cache, once the cache line on the other cores has been invalidated. On the X86, every store is a release store, so you don&#39;t need any memory fences (the primary purpose is to control the JIT). And as a consequence, the core can execute more instructions per time unit.\r\n\r\nNote: Correctly synchronized programs in Java can only have sequential consistent executions. For sequential consistency, the real-time order isn&#39;t relevant. So it doesn&#39;t make a lot of sense to talk in terms of &#39;immediately visible&#39; since the Java memory model doesn&#39;t require it. If the real-time order is relevant, then you need to have a look at linearizability (which isn&#39;t part of the JMM). A volatile store will not make that store visible any faster to other cores compared to a release store; the store buffer is already being drained as fast as possible.","title":"UNSAFE.putOrderedInt(this, stateOffset, NORMAL); in FutureTask","body":"<p>The benefit is performance.</p>\n<p>A 'state = NORMAL' leads to a volatile store since 'state' is a volatile variable. The putOrderInt is a release store. On modern JDK's you will see that a 'STATE.setRelease(this, NORMAL);' is used. A volatile store is typically much more expensive than a release store because it has more strict memory ordering guarantees.</p>\n<p>On the X86 a volatile store typically is followed by [StoreLoad] fence which causes subsequent loads to wait till the store buffer has been drained. And this can take time because the core can only commit the store to the coherent cache, once the cache line on the other cores has been invalidated. On the X86, every store is a release store, so you don't need any memory fences (the primary purpose is to control the JIT). And as a consequence, the core can execute more instructions per time unit.</p>\n<p>Note: Correctly synchronized programs in Java can only have sequential consistent executions. For sequential consistency, the real-time order isn't relevant. So it doesn't make a lot of sense to talk in terms of 'immediately visible' since the Java memory model doesn't require it. If the real-time order is relevant, then you need to have a look at linearizability (which isn't part of the JMM). A volatile store will not make that store visible any faster to other cores compared to a release store; the store buffer is already being drained as fast as possible.</p>\n"}],"owner":{"account_id":24792239,"reputation":413,"user_id":18675173,"display_name":"lant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683269875,"creation_date":1683185561,"question_id":76170613,"body_markdown":"What are the benefits of using &quot;UNSAFE.putOrderedInt(this, stateOffset, NORMAL);&quot;\r\n\r\nIn FutureTask class, the method to set outcome value is\r\n\r\n```\r\n    protected void set(V v) {\r\n        if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) {\r\n            outcome = v;\r\n            UNSAFE.putOrderedInt(this, stateOffset, NORMAL); // final state\r\n            finishCompletion();\r\n        }\r\n    }\r\n```\r\ni am confused about `UNSAFE.putOrderedInt(this, stateOffset, NORMAL);`why not change the state dirctly like this `state = NORMARL`,and use `putOrderedInt` method to modify the value is not immediately visible to other threads.\r\nI don&#39;t understand what is the advantage of using `UNSAFE.putOrderedInt(this, stateOffset, NORMAL);`","title":"UNSAFE.putOrderedInt(this, stateOffset, NORMAL); in FutureTask","body":"<p>What are the benefits of using &quot;UNSAFE.putOrderedInt(this, stateOffset, NORMAL);&quot;</p>\n<p>In FutureTask class, the method to set outcome value is</p>\n<pre><code>    protected void set(V v) {\n        if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) {\n            outcome = v;\n            UNSAFE.putOrderedInt(this, stateOffset, NORMAL); // final state\n            finishCompletion();\n        }\n    }\n</code></pre>\n<p>i am confused about <code>UNSAFE.putOrderedInt(this, stateOffset, NORMAL);</code>why not change the state dirctly like this <code>state = NORMARL</code>,and use <code>putOrderedInt</code> method to modify the value is not immediately visible to other threads.\nI don't understand what is the advantage of using <code>UNSAFE.putOrderedInt(this, stateOffset, NORMAL);</code></p>\n"},{"tags":["java","jersey","logback","jersey-1.0","jul-to-slf4j"],"answers":[{"tags":[],"owner":{"account_id":97926,"reputation":823,"user_id":265374,"accept_rate":75,"display_name":"reddot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683268470,"creation_date":1683268470,"answer_id":76179397,"question_id":34414464,"body_markdown":"The `logging.properties` file should reside on the filesystem (not on class path). And it&#39;s path should be specified via system property `java.util.logging.config.file`:\r\n\r\n```\r\njava -Djava.util.logging.config.file=/path/to/logging.properties ...\r\n```","title":"SLF4JBridgeHandler installation via logging.properties configuration file doesn&#39;t work","body":"<p>The <code>logging.properties</code> file should reside on the filesystem (not on class path). And it's path should be specified via system property <code>java.util.logging.config.file</code>:</p>\n<pre><code>java -Djava.util.logging.config.file=/path/to/logging.properties ...\n</code></pre>\n"}],"owner":{"account_id":6390719,"reputation":1108,"user_id":4956989,"accept_rate":82,"display_name":"Alex Karasev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":713,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1683268470,"creation_date":1450782461,"question_id":34414464,"body_markdown":"I have a project and I use:\r\n\r\n - Apache Maven 3.3.3\r\n - Project Jersey 1.17\r\n - Spring 3.3.1\r\n - Tomcat 6\r\n - Eclipse IDE\r\n\r\nI need to log requests and responses. To achieve it I added LoggingFilter to my `web.xml`:\r\n\r\n    &lt;init-param&gt;\r\n         &lt;param-name&gt;com.sun.jersey.spi.container.ContainerRequestFilters&lt;/param-name&gt;\r\n         &lt;param-value&gt;com.sun.jersey.api.container.filter.LoggingFilter&lt;/param-value&gt;\r\n     &lt;/init-param&gt;\r\n     &lt;init-param&gt;\r\n         &lt;param-name&gt;com.sun.jersey.spi.container.ContainerResponseFilters&lt;/param-name&gt;\r\n         &lt;param-value&gt;com.sun.jersey.api.container.filter.LoggingFilter&lt;/param-value&gt;\r\n     &lt;/init-param&gt;\r\n\r\nI run project in Eclipse and see logging at the Eclipse Console.\r\n\r\nNow, I want to use Logback to write log files and to use custom appenders, so I added to my `pom.xml`:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.7.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.7.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nTo route all JUL log records to the SLF4J API, I use `org.slf4j.bridge.SLF4JBridgeHandler`\r\n\r\nI tried to install SLF4JBridgeHandler by creating `src/main/resources/logging.properties` with the content:\r\n\r\n    handlers = org.slf4j.bridge.SLF4JBridgeHandler\r\n\r\nas it mentioned [here][1] and nothing was happening.\r\n\r\nIf I use another approach (Programmatic installation) everything works fine.\r\n\r\nWhy doesn&#39;t it work with `logging.properties` config? What did I miss? \r\n\r\n\r\n\r\n  [1]: http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html","title":"SLF4JBridgeHandler installation via logging.properties configuration file doesn&#39;t work","body":"<p>I have a project and I use:</p>\n\n<ul>\n<li>Apache Maven 3.3.3</li>\n<li>Project Jersey 1.17</li>\n<li>Spring 3.3.1</li>\n<li>Tomcat 6</li>\n<li>Eclipse IDE</li>\n</ul>\n\n<p>I need to log requests and responses. To achieve it I added LoggingFilter to my <code>web.xml</code>:</p>\n\n<pre><code>&lt;init-param&gt;\n     &lt;param-name&gt;com.sun.jersey.spi.container.ContainerRequestFilters&lt;/param-name&gt;\n     &lt;param-value&gt;com.sun.jersey.api.container.filter.LoggingFilter&lt;/param-value&gt;\n &lt;/init-param&gt;\n &lt;init-param&gt;\n     &lt;param-name&gt;com.sun.jersey.spi.container.ContainerResponseFilters&lt;/param-name&gt;\n     &lt;param-value&gt;com.sun.jersey.api.container.filter.LoggingFilter&lt;/param-value&gt;\n &lt;/init-param&gt;\n</code></pre>\n\n<p>I run project in Eclipse and see logging at the Eclipse Console.</p>\n\n<p>Now, I want to use Logback to write log files and to use custom appenders, so I added to my <code>pom.xml</code>:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n    &lt;version&gt;1.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;1.7.13&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n    &lt;version&gt;1.7.13&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>To route all JUL log records to the SLF4J API, I use <code>org.slf4j.bridge.SLF4JBridgeHandler</code></p>\n\n<p>I tried to install SLF4JBridgeHandler by creating <code>src/main/resources/logging.properties</code> with the content:</p>\n\n<pre><code>handlers = org.slf4j.bridge.SLF4JBridgeHandler\n</code></pre>\n\n<p>as it mentioned <a href=\"http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html\" rel=\"nofollow\">here</a> and nothing was happening.</p>\n\n<p>If I use another approach (Programmatic installation) everything works fine.</p>\n\n<p>Why doesn't it work with <code>logging.properties</code> config? What did I miss? </p>\n"},{"tags":["java","windows","tomcat","server","tomcat9"],"answers":[{"tags":[],"owner":{"account_id":10171463,"reputation":71,"user_id":7511632,"display_name":"kkid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683268443,"creation_date":1683268443,"answer_id":76179393,"question_id":76178627,"body_markdown":"In the screenshot you shared, there is an &quot;Initial Memory Pool&quot; and a &quot;Maximum Memory Pool&quot;. For Xms, set the value 2048 in the &quot;Initial Memory Pool&quot; and for Xmx, set the value 2048 in the &quot;Maximum Memory Pool&quot;.\r\n\r\nAfter the change, restart the tomcat service.","title":"Tomcat 9 heap memory setting issue","body":"<p>In the screenshot you shared, there is an &quot;Initial Memory Pool&quot; and a &quot;Maximum Memory Pool&quot;. For Xms, set the value 2048 in the &quot;Initial Memory Pool&quot; and for Xmx, set the value 2048 in the &quot;Maximum Memory Pool&quot;.</p>\n<p>After the change, restart the tomcat service.</p>\n"}],"owner":{"account_id":25318767,"reputation":3,"user_id":19140415,"display_name":"Tony Cheng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683268443,"creation_date":1683256949,"question_id":76178627,"body_markdown":"Hi my tomcat 9 is running as windows service, the instruction is to set this in the startup script\r\n\r\n```\r\nset JAVA_OPTS=-Xms2048m -Xmx2048m;\r\n```\r\n\r\nHowever i think i dont have startup script because it is a service?\r\nso i went to the Configuration and did this instead\r\n\r\n[This is the configuration i did](https://i.stack.imgur.com/cH8OB.png)\r\n\r\nIs this the correct way?\r\n\r\nso i went to the Configuration and add \r\n```\r\n-Xms2048m \r\n-Xmx2048m\r\n```\r\nin the java options","title":"Tomcat 9 heap memory setting issue","body":"<p>Hi my tomcat 9 is running as windows service, the instruction is to set this in the startup script</p>\n<pre><code>set JAVA_OPTS=-Xms2048m -Xmx2048m;\n</code></pre>\n<p>However i think i dont have startup script because it is a service?\nso i went to the Configuration and did this instead</p>\n<p><a href=\"https://i.stack.imgur.com/cH8OB.png\" rel=\"nofollow noreferrer\">This is the configuration i did</a></p>\n<p>Is this the correct way?</p>\n<p>so i went to the Configuration and add</p>\n<pre><code>-Xms2048m \n-Xmx2048m\n</code></pre>\n<p>in the java options</p>\n"},{"tags":["java","docker","jwt","quarkus","secret-key"],"comments":[{"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1683268458,"post_id":76156537,"comment_id":134343620,"body_markdown":"Maybe the way I use AES key is not correct... now when I think of it, `SecretKeySpec` does not check key type and is only used for DES key...","body":"Maybe the way I use AES key is not correct... now when I think of it, <code>SecretKeySpec</code> does not check key type and is only used for DES key..."}],"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683268318,"creation_date":1683041731,"question_id":76156537,"body_markdown":"I encountered some weird problem while reading a secret key file in Quarkus/Docker only getting 29 bytes while in unit test I got 32 bytes. That causes unit tests passing but integration tests not passing and local docker image running failing. \r\n\r\nThe exception shown in the log is: (from nimbusds.jose, not directly from Quarkus)\r\n\r\n```java\r\nCaused by: com.nimbusds.jose.JOSEException: AES/GCM/NoPadding decryption failed: Tag mismatch!\r\n\tat com.nimbusds.jose.crypto.impl.AESGCM.decrypt(AESGCM.java:301)\r\n\tat com.nimbusds.jose.crypto.impl.ContentCryptoProvider.decrypt(ContentCryptoProvider.java:279)\r\n\tat com.nimbusds.jose.crypto.DirectDecrypter.decrypt(DirectDecrypter.java:271)\r\n\tat com.nimbusds.jose.JWEObject.decrypt(JWEObject.java:415)\r\n\tat com.org.TokenParser.parseToken(TokenParser.java:38)\r\n\t... 13 more\r\nCaused by: javax.crypto.AEADBadTagException: Tag mismatch!\r\n\tat java.base/com.sun.crypto.provider.GaloisCounterMode.decryptFinal(GaloisCounterMode.java:623)\r\n\tat java.base/com.sun.crypto.provider.CipherCore.finalNoPadding(CipherCore.java:1116)\r\n\tat java.base/com.sun.crypto.provider.CipherCore.fillOutputBuffer(CipherCore.java:1053)\r\n\tat java.base/com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:853)\r\n\tat java.base/com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:446)\r\n\tat java.base/javax.crypto.Cipher.doFinal(Cipher.java:2202)\r\n\tat com.nimbusds.jose.crypto.impl.AESGCM.decrypt(AESGCM.java:297)\r\n```\r\n\r\nI suspect the mismatch of size of key caused this problem, as 32 bytes are needed for a 256 bits key but only 29 bytes are found.\r\n\r\nIn short, I need to activate a key file and decrypt a JWT token. In local unit/int test, I use a file under `src/test/resource`; in prod, there is a file loaded into a data volume in Openshift. In the code I first try to find the file under `/opt/data/environment`; if not found, fallback to `src/test/resources`. The application deployed in cloud is fine(reading 32 bytes and no exception), problem is in local. \r\n\r\n\r\nThe related code:\r\nJWT decryption:\r\n\r\n```java\r\nimport com.nimbusds.jose.JWEDecrypter;\r\nimport com.nimbusds.jose.crypto.factories.DefaultJWEDecrypterFactory;\r\nimport com.nimbusds.jwt.EncryptedJWT;\r\nimport com.nimbusds.jwt.JWTClaimsSet;\r\n...\r\nEncryptedJWT jwt = EncryptedJWT.parse(token);\r\nDefaultJWEDecrypterFactory factory = new DefaultJWEDecrypterFactory();\r\nJWEDecrypter decrypter = factory.createJWEDecrypter(jwt.getHeader(), this.secretKey);\r\njwt.decrypt(decrypter); // &lt;&lt;&lt;&lt;&lt;&lt; here padding error\r\n```\r\n\r\nCreating secretKey:\r\n\r\n```java\r\nSecretKeySpec secretKey = new SecretKeySpec(data,&quot;AES&quot;);\r\n```\r\n\r\nReading key data: \r\n```java\r\nInputStream keyFileStream = TokenHandler.class.getResourceAsStream(&quot;/key.shared&quot;); // reading from src/main/resources\r\nkeyFileBytes = readKeyFromInputStream(keyFileStream);\r\n...\r\n```\r\n\r\nand\r\n\r\n```java\r\n    static byte[] readKeyFromInputStream(final InputStream sharedKeyStream) throws IOException, NoSuchAlgorithmException {\r\n        byte[] keyBytes;\r\n        if (sharedKeyStream == null) {\r\n            keyBytes = autoGenerateKey();\r\n        } else {\r\n            keyBytes = new byte[sharedKeyStream.available()]; // 32 bytes available\r\n            // Only 29 bytes will be read if using &quot;read(keyBytes)&quot;, must read explicitly till 32 bytes\r\n            int count = sharedKeyStream.read(keyBytes, 0, 32);\r\n            LOG.infof(&quot;Activating security token handler with key from input stream (length = %d bytes)&quot;, count);\r\n            //if (count != 32) {\r\n            //    throw new IOException(&quot;Key read bytes length does not match expected number(32), cannot initialize key!&quot;);\r\n            //}\r\n        }\r\n        return keyBytes;\r\n    }\r\n```\r\n\r\nUnit test that passes:\r\n\r\n```java\r\n    @Test\r\n    void shouldRead32BytesFromInputStream() throws IOException, NoSuchAlgorithmException {\r\n        // given\r\n        InputStream keyFileStream = TokenHandlerTest.class.getResourceAsStream(&quot;/key.shared&quot;);\r\n\r\n        // when\r\n        byte[] keyFileBytes = TokenHandler.readKeyFromInputStream(keyFileStream);\r\n\r\n        // then\r\n        assertEquals(32, keyFileBytes.length);\r\n    }\r\n```\r\n\r\nEven I read 32 bytes explicitly, I cannot eliminate the original exception, as in int test, only 29 bytes found.\r\n\r\nOf course, in Quarkus int test, the application jar is used, where the key is packaged into. I think that file in jar is used; but even checking the file size in jar, it&#39;s still 32 bytes. I don&#39;t know where the 29 bytes coming from. \r\n\r\n\r\nSo:\r\n\r\n - is my original exception related to key length difference?\r\n - how to solve it in integration test so that I still load local file but got 32 bytes?\r\n\r\nThe file has 32 bytes, as shown by Gnome Files manager and `wc -c`. I am working on Linux, Docker container is also based on Linux, where also only 29 bytes are read in `docker run`. \r\n\r\n---\r\n\r\nAND: if I put the same file under `src/jib/opt/data/environment`, jib maven plugin will include that file into the docker image, and image running is fine now. So why??? \r\n\r\n---\r\n\r\nAnother update: if I replace the key file with a file with exact 32 bytes of text, 32 bytes are read, and the integration test works. So there is something wrong with this key file that got compressed while creating jar, which is not compressed when key file is plain text file?? The text key file is:\r\n\r\n    long-secret-key-for-256-bits-key\r\n\r\nThe original key file: (got from `od`)\r\n\r\n    ��Y&quot;dpq����n��b�v&quot;G:�/����_���\r\n\r\nIn hex:\r\n\r\n```\r\n$ od -t x1 key.shared\r\n0000000 xx ec ba 59 22 64 70 71 d6 f7 xx 8f 6e f1 f8 xx\r\n0000020 xx 76 22 47 3a xx 2f bd e6 95 d9 5f dd f6 xx e9\r\n0000040\r\n```\r\n(some part hidden with `xx`)\r\n\r\n\r\nThat could be because the original key file is used everywhere, but I am the first one doing integration test like this in my team; maybe it has always been loaded directly as data volume, not in a jar.\r\n","title":"Quarkus - integration tests and docker image both reading only 29 bytes of key file, while unit test reading 32 bytes","body":"<p>I encountered some weird problem while reading a secret key file in Quarkus/Docker only getting 29 bytes while in unit test I got 32 bytes. That causes unit tests passing but integration tests not passing and local docker image running failing.</p>\n<p>The exception shown in the log is: (from nimbusds.jose, not directly from Quarkus)</p>\n<pre class=\"lang-java prettyprint-override\"><code>Caused by: com.nimbusds.jose.JOSEException: AES/GCM/NoPadding decryption failed: Tag mismatch!\n    at com.nimbusds.jose.crypto.impl.AESGCM.decrypt(AESGCM.java:301)\n    at com.nimbusds.jose.crypto.impl.ContentCryptoProvider.decrypt(ContentCryptoProvider.java:279)\n    at com.nimbusds.jose.crypto.DirectDecrypter.decrypt(DirectDecrypter.java:271)\n    at com.nimbusds.jose.JWEObject.decrypt(JWEObject.java:415)\n    at com.org.TokenParser.parseToken(TokenParser.java:38)\n    ... 13 more\nCaused by: javax.crypto.AEADBadTagException: Tag mismatch!\n    at java.base/com.sun.crypto.provider.GaloisCounterMode.decryptFinal(GaloisCounterMode.java:623)\n    at java.base/com.sun.crypto.provider.CipherCore.finalNoPadding(CipherCore.java:1116)\n    at java.base/com.sun.crypto.provider.CipherCore.fillOutputBuffer(CipherCore.java:1053)\n    at java.base/com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:853)\n    at java.base/com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:446)\n    at java.base/javax.crypto.Cipher.doFinal(Cipher.java:2202)\n    at com.nimbusds.jose.crypto.impl.AESGCM.decrypt(AESGCM.java:297)\n</code></pre>\n<p>I suspect the mismatch of size of key caused this problem, as 32 bytes are needed for a 256 bits key but only 29 bytes are found.</p>\n<p>In short, I need to activate a key file and decrypt a JWT token. In local unit/int test, I use a file under <code>src/test/resource</code>; in prod, there is a file loaded into a data volume in Openshift. In the code I first try to find the file under <code>/opt/data/environment</code>; if not found, fallback to <code>src/test/resources</code>. The application deployed in cloud is fine(reading 32 bytes and no exception), problem is in local.</p>\n<p>The related code:\nJWT decryption:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.nimbusds.jose.JWEDecrypter;\nimport com.nimbusds.jose.crypto.factories.DefaultJWEDecrypterFactory;\nimport com.nimbusds.jwt.EncryptedJWT;\nimport com.nimbusds.jwt.JWTClaimsSet;\n...\nEncryptedJWT jwt = EncryptedJWT.parse(token);\nDefaultJWEDecrypterFactory factory = new DefaultJWEDecrypterFactory();\nJWEDecrypter decrypter = factory.createJWEDecrypter(jwt.getHeader(), this.secretKey);\njwt.decrypt(decrypter); // &lt;&lt;&lt;&lt;&lt;&lt; here padding error\n</code></pre>\n<p>Creating secretKey:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SecretKeySpec secretKey = new SecretKeySpec(data,&quot;AES&quot;);\n</code></pre>\n<p>Reading key data:</p>\n<pre class=\"lang-java prettyprint-override\"><code>InputStream keyFileStream = TokenHandler.class.getResourceAsStream(&quot;/key.shared&quot;); // reading from src/main/resources\nkeyFileBytes = readKeyFromInputStream(keyFileStream);\n...\n</code></pre>\n<p>and</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static byte[] readKeyFromInputStream(final InputStream sharedKeyStream) throws IOException, NoSuchAlgorithmException {\n        byte[] keyBytes;\n        if (sharedKeyStream == null) {\n            keyBytes = autoGenerateKey();\n        } else {\n            keyBytes = new byte[sharedKeyStream.available()]; // 32 bytes available\n            // Only 29 bytes will be read if using &quot;read(keyBytes)&quot;, must read explicitly till 32 bytes\n            int count = sharedKeyStream.read(keyBytes, 0, 32);\n            LOG.infof(&quot;Activating security token handler with key from input stream (length = %d bytes)&quot;, count);\n            //if (count != 32) {\n            //    throw new IOException(&quot;Key read bytes length does not match expected number(32), cannot initialize key!&quot;);\n            //}\n        }\n        return keyBytes;\n    }\n</code></pre>\n<p>Unit test that passes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    void shouldRead32BytesFromInputStream() throws IOException, NoSuchAlgorithmException {\n        // given\n        InputStream keyFileStream = TokenHandlerTest.class.getResourceAsStream(&quot;/key.shared&quot;);\n\n        // when\n        byte[] keyFileBytes = TokenHandler.readKeyFromInputStream(keyFileStream);\n\n        // then\n        assertEquals(32, keyFileBytes.length);\n    }\n</code></pre>\n<p>Even I read 32 bytes explicitly, I cannot eliminate the original exception, as in int test, only 29 bytes found.</p>\n<p>Of course, in Quarkus int test, the application jar is used, where the key is packaged into. I think that file in jar is used; but even checking the file size in jar, it's still 32 bytes. I don't know where the 29 bytes coming from.</p>\n<p>So:</p>\n<ul>\n<li>is my original exception related to key length difference?</li>\n<li>how to solve it in integration test so that I still load local file but got 32 bytes?</li>\n</ul>\n<p>The file has 32 bytes, as shown by Gnome Files manager and <code>wc -c</code>. I am working on Linux, Docker container is also based on Linux, where also only 29 bytes are read in <code>docker run</code>.</p>\n<hr />\n<p>AND: if I put the same file under <code>src/jib/opt/data/environment</code>, jib maven plugin will include that file into the docker image, and image running is fine now. So why???</p>\n<hr />\n<p>Another update: if I replace the key file with a file with exact 32 bytes of text, 32 bytes are read, and the integration test works. So there is something wrong with this key file that got compressed while creating jar, which is not compressed when key file is plain text file?? The text key file is:</p>\n<pre><code>long-secret-key-for-256-bits-key\n</code></pre>\n<p>The original key file: (got from <code>od</code>)</p>\n<pre><code>��Y&quot;dpq����n��b�v&quot;G:�/����_���\n</code></pre>\n<p>In hex:</p>\n<pre><code>$ od -t x1 key.shared\n0000000 xx ec ba 59 22 64 70 71 d6 f7 xx 8f 6e f1 f8 xx\n0000020 xx 76 22 47 3a xx 2f bd e6 95 d9 5f dd f6 xx e9\n0000040\n</code></pre>\n<p>(some part hidden with <code>xx</code>)</p>\n<p>That could be because the original key file is used everywhere, but I am the first one doing integration test like this in my team; maybe it has always been loaded directly as data volume, not in a jar.</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"display_name":"user180100"},"score":2,"creation_date":1379583879,"post_id":18891204,"comment_id":27883323,"body_markdown":"possible duplicate of [How to get Maven Artifact version at runtime?](http://stackoverflow.com/questions/2712970/how-to-get-maven-artifact-version-at-runtime)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2712970/how-to-get-maven-artifact-version-at-runtime\">How to get Maven Artifact version at runtime?</a>"},{"owner":{"account_id":903413,"reputation":446,"user_id":938909,"accept_rate":29,"display_name":"Sandiip Patil"},"score":0,"creation_date":1379589586,"post_id":18891204,"comment_id":27886457,"body_markdown":"Possibly but as it says one needs to modify the &lt;archive&gt; config in order to write the details. Also I am trying to find from war and it gives from Jar. correct me if I am wrong.","body":"Possibly but as it says one needs to modify the &lt;archive&gt; config in order to write the details. Also I am trying to find from war and it gives from Jar. correct me if I am wrong."},{"owner":{"account_id":206155,"reputation":1254,"user_id":455269,"display_name":"cr7pt0gr4ph7"},"score":0,"creation_date":1398034260,"post_id":18891204,"comment_id":35466484,"body_markdown":"@SandiipPatil AFAIC a WAR has the same internal format as a JAR, it just has a different file extension. As said [here](http://maven.apache.org/guides/mini/guide-archive-configuration.html) the &lt;archive/&gt; config should also work with WARs.","body":"@SandiipPatil AFAIC a WAR has the same internal format as a JAR, it just has a different file extension. As said <a href=\"http://maven.apache.org/guides/mini/guide-archive-configuration.html\" rel=\"nofollow noreferrer\">here</a> the &lt;archive/&gt; config should also work with WARs."}],"answers":[{"tags":[],"owner":{"account_id":2123935,"reputation":851,"user_id":1886601,"accept_rate":91,"display_name":"java_newbie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379586485,"creation_date":1379586485,"answer_id":18892215,"question_id":18891204,"body_markdown":"maybe this link could help you: http://technotes.tostaky.biz/2012/08/understanding-absolute-and-relative.html\r\n\r\nps: Understanding Absolute and Relative Path with getResourceAsStream()","title":"How to reach pom.properties","body":"<p>maybe this link could help you: <a href=\"http://technotes.tostaky.biz/2012/08/understanding-absolute-and-relative.html\" rel=\"nofollow\">http://technotes.tostaky.biz/2012/08/understanding-absolute-and-relative.html</a></p>\n\n<p>ps: Understanding Absolute and Relative Path with getResourceAsStream()</p>\n"},{"tags":[],"owner":{"account_id":38554,"reputation":484,"user_id":110737,"display_name":"Guy Pardon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683267914,"creation_date":1683265737,"answer_id":76179167,"question_id":18891204,"body_markdown":"A little late maybe, but for the record: I got something like this to work by:\r\n\r\n-NOT prefixing a leading slash (&quot;/&quot;), and\r\n-using Thread.currentThread().getContextClassLoader().getResourceAsStream(...) and\r\n-use the maven groupId and artifactId\r\n\r\nExample\r\n\r\n`Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;META-INF/maven/org.apache.logging.log4j/log4j-core/pom.properties&quot;);`","title":"How to reach pom.properties","body":"<p>A little late maybe, but for the record: I got something like this to work by:</p>\n<p>-NOT prefixing a leading slash (&quot;/&quot;), and\n-using Thread.currentThread().getContextClassLoader().getResourceAsStream(...) and\n-use the maven groupId and artifactId</p>\n<p>Example</p>\n<p><code>Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;META-INF/maven/org.apache.logging.log4j/log4j-core/pom.properties&quot;);</code></p>\n"}],"owner":{"account_id":903413,"reputation":446,"user_id":938909,"accept_rate":29,"display_name":"Sandiip Patil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2220,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1683267914,"creation_date":1379583445,"question_id":18891204,"body_markdown":"I am trying to get application&#39;s version and name/artifact-id from server at runtime for the plugin I am developing.  \r\nI know I can get the details from pom.properties that is generated on the server, using below code   \r\n\r\n    java.io.InputStream inputStream = getServletContext().getResourceAsStream(&quot;/META-INF/maven/&lt;application-directory-structure&gt;/pom.properties&quot;);\r\n    Properties mavenProperties= new Properties();\r\n    mavenProperties.load(inputStream );\r\n    String version = (String) mavenProperties.get(&quot;version&quot;);\r\n    String name = (String) mavenProperties.get(&quot;artifactId&quot;);\r\n\r\nBut I am not able to reach to the pom.properties.  \r\nI tried using `JarFile.getEntries()`but as I am not able to get the name of the war at runtime, its not working.   \r\nAny suggestions how I can get the details I am looking for?  \r\nI can&#39;t modify the maven plugin to get the artifact details. I am making a plugin myself and can&#39;t force all the apps for that.\r\n","title":"How to reach pom.properties","body":"<p>I am trying to get application's version and name/artifact-id from server at runtime for the plugin I am developing.<br>\nI know I can get the details from pom.properties that is generated on the server, using below code   </p>\n\n<pre><code>java.io.InputStream inputStream = getServletContext().getResourceAsStream(\"/META-INF/maven/&lt;application-directory-structure&gt;/pom.properties\");\nProperties mavenProperties= new Properties();\nmavenProperties.load(inputStream );\nString version = (String) mavenProperties.get(\"version\");\nString name = (String) mavenProperties.get(\"artifactId\");\n</code></pre>\n\n<p>But I am not able to reach to the pom.properties.<br>\nI tried using <code>JarFile.getEntries()</code>but as I am not able to get the name of the war at runtime, its not working.<br>\nAny suggestions how I can get the details I am looking for?<br>\nI can't modify the maven plugin to get the artifact details. I am making a plugin myself and can't force all the apps for that.</p>\n"},{"tags":["java","android","react-native","gradle","gradlew"],"answers":[{"tags":[],"owner":{"account_id":5416181,"reputation":2699,"user_id":4311268,"display_name":"Tommy Leong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683267796,"creation_date":1683267796,"answer_id":76179328,"question_id":76179203,"body_markdown":"Turns out it was my Firebase Analytics dependency issue which implemented inside `app/build.gradle` &#128580;\r\n\r\n\r\nCommented it out, everything run again as expected.\r\n```\r\n// implementation &#39;com.google.firebase:firebase-analytics:17.2.2&#39;\r\n```\r\n\r\n","title":"Could not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;. after upgrading to ReactNative 0.71.7","body":"<p>Turns out it was my Firebase Analytics dependency issue which implemented inside <code>app/build.gradle</code> 🙄</p>\n<p>Commented it out, everything run again as expected.</p>\n<pre><code>// implementation 'com.google.firebase:firebase-analytics:17.2.2'\n</code></pre>\n"}],"owner":{"account_id":5416181,"reputation":2699,"user_id":4311268,"display_name":"Tommy Leong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":354,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76179328,"answer_count":1,"score":0,"last_activity_date":1683267796,"creation_date":1683266366,"question_id":76179203,"body_markdown":"I have recently upgraded my ReactNative application from `0.62.2` to `0.71.7`. This is happening now when I&#39;m trying to build my Android application.\r\n\r\nI have also ensure my SDK Manager has all the necessary SDK downloaded (using latest Android Studio Flamingo | 2022.2.1 Patch 1)\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n### Error message \r\n**Error 1**: When executing `.gradlew build` at Android path\r\n```\r\n* What went wrong:\r\nCould not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;.\r\n&gt; Problems reading data from Binary store in /Users/Username/.gradle/.tmp/gradle8504350670693111797.bin offset 102613 exists? true\r\n```\r\n\r\nError 2: When sync-ing gradle within Android Studio\r\n```\r\nNo variants found for &#39;:app&#39;. Check build files to ensure at least one variant exists. at:\r\ncom.android.tools.idea.gradle.project.sync.AndroidModule.prepare(GradleModules.kt:266)\r\n  com.android.tools.idea.gradle.project.sync.SyncProjectActionWorker.populateAndroidModels(SyncProjectActionWorker.kt:99)\r\n\r\n```\r\n\r\n#### Sample codes that probably matters + my environment\r\nProject&#39;s Build gradle\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    project.ext {\r\n        buildToolsVersion = &quot;30.0.0&quot;\r\n        minSdkVersion = 21\r\n        compileSdkVersion = 30\r\n        targetSdkVersion = 30\r\n\r\n        // We use NDK 23 which has both M1 support and is the side-by-side NDK version from AGP.\r\n        ndkVersion = &quot;23.1.7779620&quot;\r\n    }\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath(&#39;com.android.tools.build:gradle:7.3.0&#39;)\r\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\r\n        \r\n        // RNFirebase\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n}\r\n```\r\n\r\ngradle-wrapper.properties\r\n```\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionPath=wrapper/dists\r\nzipStoreBase=GRADLE_USER_HOME\r\nzipStorePath=wrapper/dists\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-all.zip\r\n\r\n```\r\n\r\nJava environment (I tried both, 11 and 15)\r\n```\r\n#Java 11\r\njava 11.0.10 2021-01-19 LTS\r\nJava(TM) SE Runtime Environment 18.9 (build 11.0.10+8-LTS-162)\r\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.10+8-LTS-162, mixed mode)\r\n\r\n#Java 15\r\nopenjdk 15.0.2 2021-01-19\r\nOpenJDK Runtime Environment Corretto-15.0.2.7.1 (build 15.0.2+7)\r\nOpenJDK 64-Bit Server VM Corretto-15.0.2.7.1 (build 15.0.2+7, mixed mode, sharing)\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C2zIu.png","title":"Could not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;. after upgrading to ReactNative 0.71.7","body":"<p>I have recently upgraded my ReactNative application from <code>0.62.2</code> to <code>0.71.7</code>. This is happening now when I'm trying to build my Android application.</p>\n<p>I have also ensure my SDK Manager has all the necessary SDK downloaded (using latest Android Studio Flamingo | 2022.2.1 Patch 1)\n<a href=\"https://i.stack.imgur.com/C2zIu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C2zIu.png\" alt=\"enter image description here\" /></a></p>\n<h3>Error message</h3>\n<p><strong>Error 1</strong>: When executing <code>.gradlew build</code> at Android path</p>\n<pre><code>* What went wrong:\nCould not determine the dependencies of task ':app:compileDebugJavaWithJavac'.\n&gt; Problems reading data from Binary store in /Users/Username/.gradle/.tmp/gradle8504350670693111797.bin offset 102613 exists? true\n</code></pre>\n<p>Error 2: When sync-ing gradle within Android Studio</p>\n<pre><code>No variants found for ':app'. Check build files to ensure at least one variant exists. at:\ncom.android.tools.idea.gradle.project.sync.AndroidModule.prepare(GradleModules.kt:266)\n  com.android.tools.idea.gradle.project.sync.SyncProjectActionWorker.populateAndroidModels(SyncProjectActionWorker.kt:99)\n\n</code></pre>\n<h4>Sample codes that probably matters + my environment</h4>\n<p>Project's Build gradle</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    project.ext {\n        buildToolsVersion = &quot;30.0.0&quot;\n        minSdkVersion = 21\n        compileSdkVersion = 30\n        targetSdkVersion = 30\n\n        // We use NDK 23 which has both M1 support and is the side-by-side NDK version from AGP.\n        ndkVersion = &quot;23.1.7779620&quot;\n    }\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath('com.android.tools.build:gradle:7.3.0')\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\n        \n        // RNFirebase\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}\n</code></pre>\n<p>gradle-wrapper.properties</p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-all.zip\n\n</code></pre>\n<p>Java environment (I tried both, 11 and 15)</p>\n<pre><code>#Java 11\njava 11.0.10 2021-01-19 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.10+8-LTS-162)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.10+8-LTS-162, mixed mode)\n\n#Java 15\nopenjdk 15.0.2 2021-01-19\nOpenJDK Runtime Environment Corretto-15.0.2.7.1 (build 15.0.2+7)\nOpenJDK 64-Bit Server VM Corretto-15.0.2.7.1 (build 15.0.2+7, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":2,"creation_date":1683266860,"post_id":76179214,"comment_id":134343363,"body_markdown":"In Java, when you access an item that doesn&#39;t exist (for instance, by index), you will get an exception. Probably, `Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index: 1, Size: 1`.","body":"In Java, when you access an item that doesn&#39;t exist (for instance, by index), you will get an exception. Probably, <code>Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index: 1, Size: 1</code>."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1683267817,"post_id":76179214,"comment_id":134343512,"body_markdown":"why don&#39;t you just try it? It won&#39;t break your PC, I promise.","body":"why don&#39;t you just try it? It won&#39;t break your PC, I promise."}],"owner":{"account_id":22292465,"reputation":15,"user_id":16519048,"display_name":"still_learning"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683267467,"creation_date":1683266460,"question_id":76179214,"body_markdown":"I&#39;m trying to get some clarification on what what happens when you try to retrieve and element in an index that does not exist.\r\n\r\n    List&lt;List&lt;Integer&gt;&gt; triangle = new ArrayList&lt;List&lt;Integer&gt;&gt;();\r\n\r\n        //first row is always 1 and only 1\r\n        triangle.add(new ArrayList&lt;&gt;());\r\n        triangle.get(0).add(1);\r\n        \r\n        //loop through the numbers of rows and add them previous rows\r\n        for(int rowNums = 1; rowNums &lt; numRows; rowNums++){\r\n            //creating new row\r\n            List&lt;Integer&gt; row = new ArrayList&lt;&gt;();\r\n\r\n            //previous row, used to add\r\n            List&lt;Integer&gt; prevRow = triangle.get(rowNums - 1);\r\n\r\n            //first element in the pascal triangle is 1\r\n            row.add(1);\r\n\r\n            for(int i = 1; i &lt; rowNums; i++){\r\n                row.add(prevRow.get(i - 1) + prevRow.get(i));\r\n\r\n            }\r\n            //last element in a pascal triangle is always 1\r\n            row.add(1);\r\n\r\n            //add the row to the triangle list\r\n            triangle.add(row);\r\n        }\r\n        \r\n        return triangle;\r\n\r\nThis code solves a pascal triangle, however, I&#39;m confused at the nested for loop. I know that it looks at the previous rows and add the two elements together. But let say I&#39;m in row 1, I would look back at the previous row (which is 0) and add elements at index 0 and 1 together. but index 1 does not exist in row 0. I hope this is clear.","title":"what happens when you get an element in a list that does not exist?","body":"<p>I'm trying to get some clarification on what what happens when you try to retrieve and element in an index that does not exist.</p>\n<pre><code>List&lt;List&lt;Integer&gt;&gt; triangle = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n\n    //first row is always 1 and only 1\n    triangle.add(new ArrayList&lt;&gt;());\n    triangle.get(0).add(1);\n    \n    //loop through the numbers of rows and add them previous rows\n    for(int rowNums = 1; rowNums &lt; numRows; rowNums++){\n        //creating new row\n        List&lt;Integer&gt; row = new ArrayList&lt;&gt;();\n\n        //previous row, used to add\n        List&lt;Integer&gt; prevRow = triangle.get(rowNums - 1);\n\n        //first element in the pascal triangle is 1\n        row.add(1);\n\n        for(int i = 1; i &lt; rowNums; i++){\n            row.add(prevRow.get(i - 1) + prevRow.get(i));\n\n        }\n        //last element in a pascal triangle is always 1\n        row.add(1);\n\n        //add the row to the triangle list\n        triangle.add(row);\n    }\n    \n    return triangle;\n</code></pre>\n<p>This code solves a pascal triangle, however, I'm confused at the nested for loop. I know that it looks at the previous rows and add the two elements together. But let say I'm in row 1, I would look back at the previous row (which is 0) and add elements at index 0 and 1 together. but index 1 does not exist in row 0. I hope this is clear.</p>\n"},{"tags":["java","azure","azure-functions"],"answers":[{"tags":[],"owner":{"account_id":26331226,"reputation":3286,"user_id":19991670,"display_name":"Pravallika KV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683266568,"creation_date":1683202212,"answer_id":76173026,"question_id":76171348,"body_markdown":"I have tried your requirement in command line by following [MSdoc](https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-cli-java?tabs=cmd,azure-cli,browser) and could achieve expected results.\r\n\r\nYou can achieve the same in VSCode by running the below commands after creating a Java Azure function:\r\n```\r\nmvn clean install\r\nmvn azure-functions:run\r\n```\r\n*Creating a Java Azure function:*\r\n\r\n![enter image description here](https://i.imgur.com/G7t4Cq3.png)\r\n\r\n**Function Code:**\r\n\r\n```csharp\r\n@FunctionName(&quot;HttpExample&quot;)\r\npublic HttpResponseMessage run(\r\n        @HttpTrigger(\r\n            name = &quot;req&quot;,\r\n            methods = {HttpMethod.GET, HttpMethod.POST},\r\n            authLevel = AuthorizationLevel.ANONYMOUS)\r\n            HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\r\n        final ExecutionContext context) {\r\n                \r\n    context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\r\n\r\n    // Parse query parameter\r\n    final String query = request.getQueryParameters().get(&quot;name&quot;);\r\n    final String name = request.getBody().orElse(query);\r\n        \r\n    context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\r\n    if (name == null) {\r\n       return request.createResponseBuilder(HttpStatus.BAD_REQUEST).body(&quot;Please pass a name on the query string or in the request body&quot;).build();\r\n    } else {\r\n      return request.createResponseBuilder(HttpStatus.OK).body(&quot;Hello, &quot; + name).build();\r\n    }\r\n}\r\n```\r\n`mvn clean install` let&#39;s Maven `clean` all the previously compiled .class files and resources in each module and build the project from the clean state before running the `install` phase for each module.\r\n\r\n![enter image description here](https://i.imgur.com/XGNJtOe.png)\r\n![enter image description here](https://i.imgur.com/wl101W6.png)\r\n![enter image description here](https://i.imgur.com/a0JoH1H.png)\r\nRun `mvn azure-functions:run`\r\n![enter image description here](https://i.imgur.com/CVnJkYb.png)\r\n\r\n**Response:**\r\n\r\nwhen I run function URL, I could see the expect output in console.\r\n![enter image description here](https://i.imgur.com/rGa5Vl4.png)\r\n\r\n**Browser:** \r\n\r\n![enter image description here](https://i.imgur.com/bJuRW9G.png)\r\n\r\n","title":"I am able to invoke an Azure Function, but I don&#39;t receive any response","body":"<p>I have tried your requirement in command line by following <a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-cli-java?tabs=cmd,azure-cli,browser\" rel=\"nofollow noreferrer\">MSdoc</a> and could achieve expected results.</p>\n<p>You can achieve the same in VSCode by running the below commands after creating a Java Azure function:</p>\n<pre><code>mvn clean install\nmvn azure-functions:run\n</code></pre>\n<p><em>Creating a Java Azure function:</em></p>\n<p><img src=\"https://i.imgur.com/G7t4Cq3.png\" alt=\"enter image description here\" /></p>\n<p><strong>Function Code:</strong></p>\n<pre class=\"lang-cs prettyprint-override\"><code>@FunctionName(&quot;HttpExample&quot;)\npublic HttpResponseMessage run(\n        @HttpTrigger(\n            name = &quot;req&quot;,\n            methods = {HttpMethod.GET, HttpMethod.POST},\n            authLevel = AuthorizationLevel.ANONYMOUS)\n            HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\n        final ExecutionContext context) {\n                \n    context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\n\n    // Parse query parameter\n    final String query = request.getQueryParameters().get(&quot;name&quot;);\n    final String name = request.getBody().orElse(query);\n        \n    context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\n    if (name == null) {\n       return request.createResponseBuilder(HttpStatus.BAD_REQUEST).body(&quot;Please pass a name on the query string or in the request body&quot;).build();\n    } else {\n      return request.createResponseBuilder(HttpStatus.OK).body(&quot;Hello, &quot; + name).build();\n    }\n}\n</code></pre>\n<p><code>mvn clean install</code> let's Maven <code>clean</code> all the previously compiled .class files and resources in each module and build the project from the clean state before running the <code>install</code> phase for each module.</p>\n<p><img src=\"https://i.imgur.com/XGNJtOe.png\" alt=\"enter image description here\" />\n<img src=\"https://i.imgur.com/wl101W6.png\" alt=\"enter image description here\" />\n<img src=\"https://i.imgur.com/a0JoH1H.png\" alt=\"enter image description here\" />\nRun <code>mvn azure-functions:run</code>\n<img src=\"https://i.imgur.com/CVnJkYb.png\" alt=\"enter image description here\" /></p>\n<p><strong>Response:</strong></p>\n<p>when I run function URL, I could see the expect output in console.\n<img src=\"https://i.imgur.com/rGa5Vl4.png\" alt=\"enter image description here\" /></p>\n<p><strong>Browser:</strong></p>\n<p><img src=\"https://i.imgur.com/bJuRW9G.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":10592686,"reputation":5,"user_id":7802665,"display_name":"Fra_Di_Rienzo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":482,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76173026,"answer_count":1,"score":0,"last_activity_date":1683266568,"creation_date":1683190730,"question_id":76171348,"body_markdown":"I have followed this guide (https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-java) to create an Azure function in VS Code using Java and Maven.\r\n\r\nthe code is the following:\r\n[![enter image description here][1]][1]\r\n```java\r\n    public class Function {\r\n    /**\r\n     * This function listens at endpoint &quot;/api/HttpExample&quot;. Two ways to invoke it using the &quot;curl&quot; command in bash:\r\n     * 1. curl -d &quot;HTTP Body&quot; {your host}/api/HttpExample\r\n     * 2. curl &quot;{your host}/api/HttpExample?name=HTTP%20Query&quot;\r\n     */\r\n    @FunctionName(&quot;HttpExample&quot;)\r\n    public HttpResponseMessage run(\r\n            @HttpTrigger(\r\n                name = &quot;req&quot;,\r\n                methods = {HttpMethod.GET, HttpMethod.POST},\r\n                authLevel = AuthorizationLevel.ANONYMOUS)\r\n                HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\r\n            final ExecutionContext context) {\r\n        context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\r\n\r\n        // Parse query parameter\r\n        final String query = request.getQueryParameters().get(&quot;name&quot;);\r\n        final String name = request.getBody().orElse(query);\r\n        context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\r\n\r\n        if (name == null) {\r\n            return request.createResponseBuilder(HttpStatus.BAD_REQUEST).body(&quot;Please pass a name on the query string or in the request body&quot;).build();\r\n        } else {\r\n            return request.createResponseBuilder(HttpStatus.OK).body(&quot;Hello, 2&quot; + name).build();\r\n        }\r\n    }\r\n}\r\n```\r\nthe host.json is the following:\r\n\r\n[![host.json][2]][2]\r\n\r\nthe local.settings.json is the following:\r\n\r\n[![local.settings.json][3]][3]\r\n\r\n\r\nthen I am able to start the Azure function locally with:\r\n\r\nmvn azure-functions:run -f &quot;c:\\Users\\francesco.di.rienzo\\Desktop\\Azure f1\\pom.xml&quot;.\r\n\r\nand the output in the terminal is the following:\r\n```\r\nFunctions:\r\n\r\nHttpExample: [GET,POST] http://localhost:7071/api/HttpExample\r\n\r\nFor detailed output, run func with --verbose flag.\r\n\r\n[2023-05-02T16:09:12.497Z] Worker process started and initialized.\r\n\r\n[2023-05-02T16:09:15.362Z] Host lock lease acquired by instance ID &#39;000000000000000000000000F10D2648&#39;.\r\n```\r\nbut when I copy that link in the browser I don&#39;t see anything, the page just keeps loading, but in the terminal, in VS Code, I can see that there is a new log:\r\n```\r\nExecuting &#39;Functions.HttpExample&#39; (Reason=&#39;This function was programmatically called via the host APIs.&#39;, Id=5aadbadf-3198-4532-8fdb-f704637233b3)\r\n```\r\nand that&#39;s it.\r\n\r\nWhen I run mvn test -f &quot;c:\\Users\\francesco.di.rienzo\\Desktop\\Azure f1\\pom.xml&quot; I can see in the terminal that those two loggers are printed:\r\n```\r\ncontext.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\r\ncontext.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\r\n```\r\n\r\nI have tried also using IntelliJ, with the same code, but I have the same\r\n\r\nI tried calling the Azure function that I created following the link, but I didn&#39;t receive any response even if it seems that the function started\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xg0E6.png\r\n  [2]: https://i.stack.imgur.com/b63Pg.png\r\n  [3]: https://i.stack.imgur.com/yiIKW.png","title":"I am able to invoke an Azure Function, but I don&#39;t receive any response","body":"<p>I have followed this guide (<a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-java\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-java</a>) to create an Azure function in VS Code using Java and Maven.</p>\n<p>the code is the following:\n<a href=\"https://i.stack.imgur.com/xg0E6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xg0E6.png\" alt=\"enter image description here\" /></a></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class Function {\n    /**\n     * This function listens at endpoint &quot;/api/HttpExample&quot;. Two ways to invoke it using the &quot;curl&quot; command in bash:\n     * 1. curl -d &quot;HTTP Body&quot; {your host}/api/HttpExample\n     * 2. curl &quot;{your host}/api/HttpExample?name=HTTP%20Query&quot;\n     */\n    @FunctionName(&quot;HttpExample&quot;)\n    public HttpResponseMessage run(\n            @HttpTrigger(\n                name = &quot;req&quot;,\n                methods = {HttpMethod.GET, HttpMethod.POST},\n                authLevel = AuthorizationLevel.ANONYMOUS)\n                HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\n            final ExecutionContext context) {\n        context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\n\n        // Parse query parameter\n        final String query = request.getQueryParameters().get(&quot;name&quot;);\n        final String name = request.getBody().orElse(query);\n        context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\n\n        if (name == null) {\n            return request.createResponseBuilder(HttpStatus.BAD_REQUEST).body(&quot;Please pass a name on the query string or in the request body&quot;).build();\n        } else {\n            return request.createResponseBuilder(HttpStatus.OK).body(&quot;Hello, 2&quot; + name).build();\n        }\n    }\n}\n</code></pre>\n<p>the host.json is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/b63Pg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b63Pg.png\" alt=\"host.json\" /></a></p>\n<p>the local.settings.json is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/yiIKW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yiIKW.png\" alt=\"local.settings.json\" /></a></p>\n<p>then I am able to start the Azure function locally with:</p>\n<p>mvn azure-functions:run -f &quot;c:\\Users\\francesco.di.rienzo\\Desktop\\Azure f1\\pom.xml&quot;.</p>\n<p>and the output in the terminal is the following:</p>\n<pre><code>Functions:\n\nHttpExample: [GET,POST] http://localhost:7071/api/HttpExample\n\nFor detailed output, run func with --verbose flag.\n\n[2023-05-02T16:09:12.497Z] Worker process started and initialized.\n\n[2023-05-02T16:09:15.362Z] Host lock lease acquired by instance ID '000000000000000000000000F10D2648'.\n</code></pre>\n<p>but when I copy that link in the browser I don't see anything, the page just keeps loading, but in the terminal, in VS Code, I can see that there is a new log:</p>\n<pre><code>Executing 'Functions.HttpExample' (Reason='This function was programmatically called via the host APIs.', Id=5aadbadf-3198-4532-8fdb-f704637233b3)\n</code></pre>\n<p>and that's it.</p>\n<p>When I run mvn test -f &quot;c:\\Users\\francesco.di.rienzo\\Desktop\\Azure f1\\pom.xml&quot; I can see in the terminal that those two loggers are printed:</p>\n<pre><code>context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\ncontext.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\n</code></pre>\n<p>I have tried also using IntelliJ, with the same code, but I have the same</p>\n<p>I tried calling the Azure function that I created following the link, but I didn't receive any response even if it seems that the function started</p>\n"},{"tags":["java","multithreading","threadpool"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1314573952,"post_id":7224670,"comment_id":8685215,"body_markdown":"Erm, yes. Why wouldn&#39;t you be able to? Maybe if you tried it ...","body":"Erm, yes. Why wouldn&#39;t you be able to? Maybe if you tried it ..."},{"owner":{"account_id":287119,"reputation":12309,"user_id":586748,"accept_rate":82,"display_name":"Russell"},"score":0,"creation_date":1314574087,"post_id":7224670,"comment_id":8685233,"body_markdown":"I&#39;m not sure what you&#39;re asking. You can create a new thread from any java code, regardless of what thread it&#39;s running in. Do the threads need to keep references to the other threads they spawn? What is the purpose of the hierarchy you describe?","body":"I&#39;m not sure what you&#39;re asking. You can create a new thread from any java code, regardless of what thread it&#39;s running in. Do the threads need to keep references to the other threads they spawn? What is the purpose of the hierarchy you describe?"}],"answers":[{"tags":[],"owner":{"account_id":34604,"reputation":5435,"user_id":97869,"accept_rate":50,"display_name":"JJ."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1314573960,"creation_date":1314573960,"answer_id":7224697,"question_id":7224670,"body_markdown":"Yes a thread can launch another thread, and that thread can launch thread(s) and on and on... \r\n\r\nIn the `run()` method of a thread - you can create and start other threads.","title":"Threads within threads in Java?","body":"<p>Yes a thread can launch another thread, and that thread can launch thread(s) and on and on... </p>\n\n<p>In the <code>run()</code> method of a thread - you can create and start other threads.</p>\n"},{"tags":[],"owner":{"account_id":536071,"reputation":223,"user_id":905251,"display_name":"John Smith"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1314574310,"creation_date":1314574310,"answer_id":7224720,"question_id":7224670,"body_markdown":"Yes, you can launch as many threads as you want, but that&#39;s probably not the best way to go.  It&#39;s much better to use the non-blocking API&#39;s so that you can start execution of some external call and the calling thread can immediately start doing something else without waiting on the socket/database call to come back.  Then, when the socket/database call comes back, a callback is triggered to finish that processing.\r\n\r\nNon-blocking I/O can provide far superior CPU utilization since you&#39;re just triggering calls and registering callbacks and not having to try to balance the &quot;right&quot; number of concurrent threads which are mostly just sleeping anyways.\r\n\r\nhttp://www.owlmountain.com/tutorials/NonBlockingIo.htm\r\n\r\nhttp://www.tensegrity.hellblazer.com/2008/03/non-blocking-jdbc-non-blocking-servlet-apis-and-other-high-mysteries.html\r\n","title":"Threads within threads in Java?","body":"<p>Yes, you can launch as many threads as you want, but that's probably not the best way to go.  It's much better to use the non-blocking API's so that you can start execution of some external call and the calling thread can immediately start doing something else without waiting on the socket/database call to come back.  Then, when the socket/database call comes back, a callback is triggered to finish that processing.</p>\n\n<p>Non-blocking I/O can provide far superior CPU utilization since you're just triggering calls and registering callbacks and not having to try to balance the \"right\" number of concurrent threads which are mostly just sleeping anyways.</p>\n\n<p><a href=\"http://www.owlmountain.com/tutorials/NonBlockingIo.htm\">http://www.owlmountain.com/tutorials/NonBlockingIo.htm</a></p>\n\n<p><a href=\"http://www.tensegrity.hellblazer.com/2008/03/non-blocking-jdbc-non-blocking-servlet-apis-and-other-high-mysteries.html\">http://www.tensegrity.hellblazer.com/2008/03/non-blocking-jdbc-non-blocking-servlet-apis-and-other-high-mysteries.html</a></p>\n"},{"tags":[],"owner":{"account_id":482787,"reputation":456,"user_id":897407,"display_name":"Jord Sonneveld"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1314581100,"creation_date":1314581100,"answer_id":7225258,"question_id":7224670,"body_markdown":"To answer the question, yes threads can launch other threads.\r\n\r\nIs the hierarchy important?\r\n\r\nYou&#39;re probably better off using an [ExecutorService][1] with a cached thread pool. That way you can pool threads instead of creating lots (which is expensive). ExecutorServices also provide other cool things, and using Callables / Runnables with them is probably much easier to test than mucking about with threads on your own.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html","title":"Threads within threads in Java?","body":"<p>To answer the question, yes threads can launch other threads.</p>\n\n<p>Is the hierarchy important?</p>\n\n<p>You're probably better off using an <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"noreferrer\">ExecutorService</a> with a cached thread pool. That way you can pool threads instead of creating lots (which is expensive). ExecutorServices also provide other cool things, and using Callables / Runnables with them is probably much easier to test than mucking about with threads on your own.</p>\n"},{"tags":[],"owner":{"account_id":2044556,"reputation":161,"user_id":1824955,"display_name":"user1824955"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373717658,"creation_date":1373717658,"answer_id":17630071,"question_id":7224670,"body_markdown":"It&#39;s possible\r\nfor exemple you can creat thread and put id in array like this\r\n\r\n    UnThread[] tab=   new  UnThread[10] ;\r\n\r\n    for ( int i=0;i&lt;20;i++)\r\n\r\n    tab[i] = new UnThread();\r\n\r\nAfter you can give to the subMainThread the array tab\r\n\r\nexemple\r\n\r\n      while( tab[1].isAlive() ) {\r\n      //do somthing..\r\n      System.out.println(&quot;Ligne affich&#233;e par le main&quot;);\r\n      try {\r\n        // et faire une pause\r\n        tab[1].sleep(800);\r\n      }\r\n      catch (InterruptedException ex) {}\r\n     }\r\nhere a simple use of thread :\r\nhttp://kamel.berrayah.com/wordpress/2013/07/java-threads/ ","title":"Threads within threads in Java?","body":"<p>It's possible\nfor exemple you can creat thread and put id in array like this</p>\n\n<pre><code>UnThread[] tab=   new  UnThread[10] ;\n\nfor ( int i=0;i&lt;20;i++)\n\ntab[i] = new UnThread();\n</code></pre>\n\n<p>After you can give to the subMainThread the array tab</p>\n\n<p>exemple</p>\n\n<pre><code>  while( tab[1].isAlive() ) {\n  //do somthing..\n  System.out.println(\"Ligne affichée par le main\");\n  try {\n    // et faire une pause\n    tab[1].sleep(800);\n  }\n  catch (InterruptedException ex) {}\n }\n</code></pre>\n\n<p>here a simple use of thread :\n<a href=\"http://kamel.berrayah.com/wordpress/2013/07/java-threads/\" rel=\"nofollow\">http://kamel.berrayah.com/wordpress/2013/07/java-threads/</a> </p>\n"},{"tags":[],"owner":{"account_id":11727434,"reputation":1,"user_id":8584201,"display_name":"Amit Sharma"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683266401,"creation_date":1683266401,"answer_id":76179206,"question_id":7224670,"body_markdown":"All threads are created under main thread, so yes its possible.","title":"Threads within threads in Java?","body":"<p>All threads are created under main thread, so yes its possible.</p>\n"}],"owner":{"account_id":92522,"reputation":2583,"user_id":253530,"accept_rate":54,"display_name":"user253530"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25327,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":7224720,"answer_count":5,"score":12,"last_activity_date":1683266401,"creation_date":1314573579,"question_id":7224670,"body_markdown":"I am currently thinking about how to design a multithreading system in Java that needs to do some heavy network processing and database storage. The program will launch three basic threads at first. Along these basic threads, I would like to launch other threads not from the main program but from two of the threads. Is it possible for a thread to launch another thread leading to some sort of a hierarchy like:\r\n\r\n    &gt; Parent -&gt;t0 thread1 -&gt; t1 tread1.1  \r\n    &gt;        -&gt;t0 thread2\r\n    &gt;        -&gt;t0 thread3 -&gt; t2 thread3.1\r\n\r\n    t0= inital time\r\n    t1,t2 = time at a point in the running thread\r\n    t1 != t2 \r\n\r\nIf not could somebody provide a theoretical solution with references?","title":"Threads within threads in Java?","body":"<p>I am currently thinking about how to design a multithreading system in Java that needs to do some heavy network processing and database storage. The program will launch three basic threads at first. Along these basic threads, I would like to launch other threads not from the main program but from two of the threads. Is it possible for a thread to launch another thread leading to some sort of a hierarchy like:</p>\n\n<pre><code>&gt; Parent -&gt;t0 thread1 -&gt; t1 tread1.1  \n&gt;        -&gt;t0 thread2\n&gt;        -&gt;t0 thread3 -&gt; t2 thread3.1\n\nt0= inital time\nt1,t2 = time at a point in the running thread\nt1 != t2 \n</code></pre>\n\n<p>If not could somebody provide a theoretical solution with references?</p>\n"},{"tags":["java","firebase","google-cloud-platform","google-cloud-firestore","database-design"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683265309,"creation_date":1683265309,"answer_id":76179139,"question_id":76177266,"body_markdown":"&gt; My app is going to be an app that will store data about some buildings in my city. The building owners will create an account and they will be able to upload data about their buildings. My question is, how do I do that in the database?\r\n\r\nThe most appropriate solution would be to create a top-level collection called &quot;users&quot; and a sub-collection under each user document called &quot;buildings&quot;.\r\n\r\n&gt; Now, I&#39;d like some suggestions about how the user can assign himself the building he owns, and how can I structure this data to be able to assign the building to a user who will be able to upload or modify data about the building.\r\n\r\nSince you&#39;re using authentication, you already know the UID of the authenticated user. That being said when the user wants to add a new building (document) to the &quot;buildings&quot; sub-collection, then create a reference that points to the &quot;buildings&quot; sub-collection:\r\n\r\n    db/users/$uid/buildings\r\n\r\nAnd then call [CollectionReference#add()][1]. To let the user modify a building, simply create a reference that points to the building the user wants to modify and let him change whatever data he wants using [DocumentReference#update()][2]. The path is:\r\n\r\n    db/users/$uid/buildings/$buildingId\r\n\r\n&gt; I&#39;d also like to split the buildings into districts, and each district shall have a supervisor who will receive all the data the building owners upload.\r\n\r\nIn this case, you should create another top-level collection called &quot;districts&quot; where you can add district documents. Each district document should contain a field called &quot;supervisor&quot; that will contain the UID of the supervisor. Besides that, each building document should also contain a field called &quot;districtId&quot;. In this way, you&#39;ll be able to display all buildings within a specific district using a [collection group query][3].\r\n\r\nIf you would like to query the building documents under a certain path, I recommend reading the following resource:\r\n\r\n* [How to query collections in Firestore under a certain path?][4]\r\n\r\n\r\nTo wire up all this information, please check the schema below:\r\n\r\n    db\r\n    |\r\n    --- users (collection)\r\n    |    |\r\n    |    --- $uid (document)\r\n    |         |\r\n    |         --- type: &quot;owner&quot; //Can be owner or supervisor.\r\n    |         |\r\n    |         --- //other user fields\r\n    |         |\r\n    |         ---  buildings: (sub-collection)\r\n    |               |\r\n    |               --- $buildingId (document)\r\n    |                    |\r\n    |                    --- districtId: &quot;DistrictLongId&quot;\r\n    |                    |\r\n    |                    --- //other building details\r\n    |\r\n    --- districts (collection)\r\n         |\r\n         --- $districId (document)\r\n               |\r\n               --- name: &quot;DistrictName&quot;\r\n               |\r\n               --- supervisor: &quot;SupervisorLongId&quot;\r\n               |\r\n               --- //other distric details\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#add(java.lang.Object)\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference#update(java.util.Map%3Cjava.lang.String,java.lang.Object%3E)\r\n  [3]: https://firebase.google.com/docs/firestore/query-data/queries#collection-group-query\r\n  [4]: https://medium.com/firebase-developers/how-to-query-collections-in-firestore-under-a-certain-path-6a0d686cebd2","title":"Firestore data structuring for building owners","body":"<blockquote>\n<p>My app is going to be an app that will store data about some buildings in my city. The building owners will create an account and they will be able to upload data about their buildings. My question is, how do I do that in the database?</p>\n</blockquote>\n<p>The most appropriate solution would be to create a top-level collection called &quot;users&quot; and a sub-collection under each user document called &quot;buildings&quot;.</p>\n<blockquote>\n<p>Now, I'd like some suggestions about how the user can assign himself the building he owns, and how can I structure this data to be able to assign the building to a user who will be able to upload or modify data about the building.</p>\n</blockquote>\n<p>Since you're using authentication, you already know the UID of the authenticated user. That being said when the user wants to add a new building (document) to the &quot;buildings&quot; sub-collection, then create a reference that points to the &quot;buildings&quot; sub-collection:</p>\n<pre><code>db/users/$uid/buildings\n</code></pre>\n<p>And then call <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#add(java.lang.Object)\" rel=\"nofollow noreferrer\">CollectionReference#add()</a>. To let the user modify a building, simply create a reference that points to the building the user wants to modify and let him change whatever data he wants using <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference#update(java.util.Map%3Cjava.lang.String,java.lang.Object%3E)\" rel=\"nofollow noreferrer\">DocumentReference#update()</a>. The path is:</p>\n<pre><code>db/users/$uid/buildings/$buildingId\n</code></pre>\n<blockquote>\n<p>I'd also like to split the buildings into districts, and each district shall have a supervisor who will receive all the data the building owners upload.</p>\n</blockquote>\n<p>In this case, you should create another top-level collection called &quot;districts&quot; where you can add district documents. Each district document should contain a field called &quot;supervisor&quot; that will contain the UID of the supervisor. Besides that, each building document should also contain a field called &quot;districtId&quot;. In this way, you'll be able to display all buildings within a specific district using a <a href=\"https://firebase.google.com/docs/firestore/query-data/queries#collection-group-query\" rel=\"nofollow noreferrer\">collection group query</a>.</p>\n<p>If you would like to query the building documents under a certain path, I recommend reading the following resource:</p>\n<ul>\n<li><a href=\"https://medium.com/firebase-developers/how-to-query-collections-in-firestore-under-a-certain-path-6a0d686cebd2\" rel=\"nofollow noreferrer\">How to query collections in Firestore under a certain path?</a></li>\n</ul>\n<p>To wire up all this information, please check the schema below:</p>\n<pre><code>db\n|\n--- users (collection)\n|    |\n|    --- $uid (document)\n|         |\n|         --- type: &quot;owner&quot; //Can be owner or supervisor.\n|         |\n|         --- //other user fields\n|         |\n|         ---  buildings: (sub-collection)\n|               |\n|               --- $buildingId (document)\n|                    |\n|                    --- districtId: &quot;DistrictLongId&quot;\n|                    |\n|                    --- //other building details\n|\n--- districts (collection)\n     |\n     --- $districId (document)\n           |\n           --- name: &quot;DistrictName&quot;\n           |\n           --- supervisor: &quot;SupervisorLongId&quot;\n           |\n           --- //other distric details\n</code></pre>\n"}],"owner":{"account_id":28509826,"reputation":3,"user_id":21819961,"display_name":"Tudor M."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76179139,"answer_count":1,"score":0,"last_activity_date":1683265309,"creation_date":1683233328,"question_id":76177266,"body_markdown":"I am currently a high school student and I&#39;m working on a Java, Android Studio project that involves creating an app using a database. I chose to go with Firestore.\r\n\r\nMy app is going to be an app that will store data about some buildings in my city. The building owners will create an account and they will be able to upload data about their buildings. My question is, how do I do that in the database? I&#39;ve already done the auth process and the users are automatically stored in a collection. Now, I&#39;d like some suggestions about how the user can assign himself the building he owns, and how can i structure this data to be able to assign the building to a user which will be able to upload or modify data about the building. I&#39;d also like to split the buildings into districts, and each district shall have a supervisor who will receive all the data the building owners upload. I&#39;m new to working with databases and I really want to expand my knowledge in this area. \r\n\r\nI haven&#39;t really tried anything yet since I don&#39;t know where to start. ","title":"Firestore data structuring for building owners","body":"<p>I am currently a high school student and I'm working on a Java, Android Studio project that involves creating an app using a database. I chose to go with Firestore.</p>\n<p>My app is going to be an app that will store data about some buildings in my city. The building owners will create an account and they will be able to upload data about their buildings. My question is, how do I do that in the database? I've already done the auth process and the users are automatically stored in a collection. Now, I'd like some suggestions about how the user can assign himself the building he owns, and how can i structure this data to be able to assign the building to a user which will be able to upload or modify data about the building. I'd also like to split the buildings into districts, and each district shall have a supervisor who will receive all the data the building owners upload. I'm new to working with databases and I really want to expand my knowledge in this area.</p>\n<p>I haven't really tried anything yet since I don't know where to start.</p>\n"},{"tags":["java","spring","spring-boot","hateoas","spring-hateoas"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1408637961,"post_id":25431087,"comment_id":39675190,"body_markdown":"I see at least one place on that page where the `_links` portion is referenced, in the CurieProvider API. Are you certain you&#39;re always supposed to receive links the way you think you are?","body":"I see at least one place on that page where the <code>_links</code> portion is referenced, in the CurieProvider API. Are you certain you&#39;re always supposed to receive links the way you think you are?"},{"owner":{"account_id":448833,"reputation":4580,"user_id":843273,"accept_rate":62,"display_name":"gyoder"},"score":1,"creation_date":1408642760,"post_id":25431087,"comment_id":39677751,"body_markdown":"@Chad are you specifying HAL with something like @EnableHypermediaSupport(type = HypermediaType.HAL)? HAL json format uses _links, but Spring default is simply &quot;links&quot;.","body":"@Chad are you specifying HAL with something like @EnableHypermediaSupport(type = HypermediaType.HAL)? HAL json format uses _links, but Spring default is simply &quot;links&quot;."},{"owner":{"account_id":1913109,"reputation":2051,"user_id":1726359,"accept_rate":74,"display_name":"Chad"},"score":0,"creation_date":1408661230,"post_id":25431087,"comment_id":39686376,"body_markdown":"I actually did not specify anything.","body":"I actually did not specify anything."},{"owner":{"account_id":20399,"reputation":4752,"user_id":48735,"accept_rate":77,"display_name":"Nick Spacek"},"score":2,"creation_date":1452690298,"post_id":25431087,"comment_id":57279754,"body_markdown":"Some behavior changed recently, as on Spring Boot 1.2.8 and Spring HATEOAS 0.16.0 my configuration gives me &quot;_links&quot;, but if I upgrade to Spring Boot 1.3.1 I start getting &quot;links&quot;.","body":"Some behavior changed recently, as on Spring Boot 1.2.8 and Spring HATEOAS 0.16.0 my configuration gives me &quot;_links&quot;, but if I upgrade to Spring Boot 1.3.1 I start getting &quot;links&quot;."},{"owner":{"account_id":10666146,"reputation":910,"user_id":7852676,"accept_rate":39,"display_name":"J. Abel"},"score":0,"creation_date":1529417869,"post_id":25431087,"comment_id":88860187,"body_markdown":"I am using Spring boot 1.5.4 and I start getting &quot;_Link&quot;. The problem is Jersey client does not recognize the structure. Do you could solve the problem?","body":"I am using Spring boot 1.5.4 and I start getting &quot;_Link&quot;. The problem is Jersey client does not recognize the structure. Do you could solve the problem?"}],"answers":[{"tags":[],"owner":{"account_id":1311122,"reputation":56893,"user_id":1259109,"display_name":"Dave Syer"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1408644977,"creation_date":1408644977,"answer_id":25433278,"question_id":25431087,"body_markdown":"If you have HAL available it will be selected for you by spring boot (and &quot;_links&quot; is what you get with HAL). You should be able to `@EnableHypermediaSupport` manually to override the defaults.","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>If you have HAL available it will be selected for you by spring boot (and \"_links\" is what you get with HAL). You should be able to <code>@EnableHypermediaSupport</code> manually to override the defaults.</p>\n"},{"tags":[],"owner":{"account_id":1863638,"reputation":357,"user_id":1687668,"display_name":"TonyLxc"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1465952501,"creation_date":1465951659,"answer_id":37824405,"question_id":25431087,"body_markdown":"Spring Boot now (version=1.3.3.RELEASE) has a property that controls the output JSON format of the `PagedResources`.\r\n\r\nJust add the following config to your `application.yml` file:\r\n\r\n    spring.hateoas.use-hal-as-default-json-media-type: false\r\n\r\nif you need the output to be like (based on question): \r\n\r\n    {\r\n      &quot;productId&quot; : 1,\r\n      &quot;name&quot; : &quot;2&quot;,\r\n      &quot;links&quot; : [\r\n        {\r\n          &quot;rel&quot; : &quot;self&quot;\r\n          &quot;href&quot; : &quot;http://localhost:8080/products/1&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\nEdited:\r\n\r\nBy the way, you only need `@EnableSpringDataWebSupport` annotation in this way.","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>Spring Boot now (version=1.3.3.RELEASE) has a property that controls the output JSON format of the <code>PagedResources</code>.</p>\n\n<p>Just add the following config to your <code>application.yml</code> file:</p>\n\n<pre><code>spring.hateoas.use-hal-as-default-json-media-type: false\n</code></pre>\n\n<p>if you need the output to be like (based on question): </p>\n\n<pre><code>{\n  \"productId\" : 1,\n  \"name\" : \"2\",\n  \"links\" : [\n    {\n      \"rel\" : \"self\"\n      \"href\" : \"http://localhost:8080/products/1\"\n    }\n  ]\n}\n</code></pre>\n\n<p>Edited:</p>\n\n<p>By the way, you only need <code>@EnableSpringDataWebSupport</code> annotation in this way.</p>\n"},{"tags":[],"owner":{"account_id":1008930,"reputation":2893,"user_id":1021943,"accept_rate":80,"display_name":"Priidu Neemre"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1471262286,"creation_date":1471160154,"answer_id":38940131,"question_id":25431087,"body_markdown":"Another option would be to disable the whole hypermedia auto-configuration feature (this is how it&#39;s done in one of the `spring-boot` + REST examples [here](https://github.com/kenriggio/spring-boot-rest-example/blob/master/src/main/java/com/hackathon/socialstream/config/Application.java)): \r\n\r\n    @EnableAutoConfiguration(exclude = HypermediaAutoConfiguration.class)\r\n\r\nAs far as I know, `HypermediaAutoConfiguration` doesn&#39;t really do much except for configuring HAL, so it should be perfectly fine to disable it. ","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>Another option would be to disable the whole hypermedia auto-configuration feature (this is how it's done in one of the <code>spring-boot</code> + REST examples <a href=\"https://github.com/kenriggio/spring-boot-rest-example/blob/master/src/main/java/com/hackathon/socialstream/config/Application.java\" rel=\"noreferrer\">here</a>): </p>\n\n<pre><code>@EnableAutoConfiguration(exclude = HypermediaAutoConfiguration.class)\n</code></pre>\n\n<p>As far as I know, <code>HypermediaAutoConfiguration</code> doesn't really do much except for configuring HAL, so it should be perfectly fine to disable it. </p>\n"},{"tags":[],"owner":{"account_id":6174988,"reputation":11040,"user_id":4812170,"accept_rate":73,"display_name":"vaquar khan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1499964995,"creation_date":1499963271,"answer_id":45086349,"question_id":25431087,"body_markdown":"I am sure you are using Spring data with @RepositoryRestResource annotation \r\n\r\n    @RepositoryRestResource    \r\n    public interface XX extends CrudRepository&lt;AA, String&gt;\r\n\r\nIf you want to remove default HAL behavior you can add following annotaion param\r\n\r\n\r\n    @RepositoryRestResource(exported = false)\r\n    public interface XX extends CrudRepository&lt;AA, String&gt;\r\n\r\nAbove configurition Spring Data REST to only expose rest endpoints for resources in the parent project, without having to explicitly annotate every repository in the dependency project. \r\n\r\nAs per doc\r\n\r\nHiding certain repositories, query methods, or fields\r\nYou may not want a certain repository, a query method on a repository, or a field of your entity to be exported at all. Examples include hiding fields like password on a User object or similar sensitive data. To tell the exporter to not export these items, annotate them with @RestResource and set exported = false.\r\n\r\nFor example, to skip exporting a Repository:\r\n\r\n    @RepositoryRestResource(exported = false)\r\n    interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>I am sure you are using Spring data with @RepositoryRestResource annotation </p>\n\n<pre><code>@RepositoryRestResource    \npublic interface XX extends CrudRepository&lt;AA, String&gt;\n</code></pre>\n\n<p>If you want to remove default HAL behavior you can add following annotaion param</p>\n\n<pre><code>@RepositoryRestResource(exported = false)\npublic interface XX extends CrudRepository&lt;AA, String&gt;\n</code></pre>\n\n<p>Above configurition Spring Data REST to only expose rest endpoints for resources in the parent project, without having to explicitly annotate every repository in the dependency project. </p>\n\n<p>As per doc</p>\n\n<p>Hiding certain repositories, query methods, or fields\nYou may not want a certain repository, a query method on a repository, or a field of your entity to be exported at all. Examples include hiding fields like password on a User object or similar sensitive data. To tell the exporter to not export these items, annotate them with @RestResource and set exported = false.</p>\n\n<p>For example, to skip exporting a Repository:</p>\n\n<pre><code>@RepositoryRestResource(exported = false)\ninterface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3072521,"reputation":1252,"user_id":2602807,"accept_rate":41,"display_name":"user2602807"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1506685162,"creation_date":1506685162,"answer_id":46488033,"question_id":25431087,"body_markdown":"I have notice the problem appears at least when you trying to return an object extends ResourseSupport vs object **containing** object extends ResourseSupport.\r\nYou may return even List or Array of object(s) extends ResourseSupport and have the same effect.\r\nSee the example :\r\n\r\n    @RequestMapping(method = GET, value = &quot;/read&quot;)\r\n    public NfcCommand statusPayOrder() {\r\n        return generateNfcCommand();\r\n    }\r\n\r\nhave response:\r\n\r\n    {\r\n        &quot;field&quot;: &quot;123&quot;,\r\n        &quot;_links&quot;: {\r\n            &quot;self&quot;: {\r\n                &quot;href&quot;: &quot;http://bla_bla_bla_url&quot;\r\n            }\r\n        }\r\n    }\r\n\r\nWhen try to wrap as List:\r\n\r\n    @RequestMapping(method = GET, value = &quot;/read&quot;)\r\n    public List&lt;NfcCommand&gt; statusPayOrder() {\r\n        return Arrays.asList(generateNfcCommand());\r\n    }\r\n\r\ngetting:\r\n\r\n    [\r\n        {\r\n            &quot;field&quot;: 123\r\n            &quot;links&quot;: [\r\n                {\r\n                    &quot;rel&quot;: &quot;self&quot;,\r\n                    &quot;href&quot;: &quot;http://bla_bla_bla_url&quot;\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n\r\nChanging structure of an answer is not the right decision, but we can try to think further this way.","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>I have notice the problem appears at least when you trying to return an object extends ResourseSupport vs object <strong>containing</strong> object extends ResourseSupport.\nYou may return even List or Array of object(s) extends ResourseSupport and have the same effect.\nSee the example :</p>\n\n<pre><code>@RequestMapping(method = GET, value = \"/read\")\npublic NfcCommand statusPayOrder() {\n    return generateNfcCommand();\n}\n</code></pre>\n\n<p>have response:</p>\n\n<pre><code>{\n    \"field\": \"123\",\n    \"_links\": {\n        \"self\": {\n            \"href\": \"http://bla_bla_bla_url\"\n        }\n    }\n}\n</code></pre>\n\n<p>When try to wrap as List:</p>\n\n<pre><code>@RequestMapping(method = GET, value = \"/read\")\npublic List&lt;NfcCommand&gt; statusPayOrder() {\n    return Arrays.asList(generateNfcCommand());\n}\n</code></pre>\n\n<p>getting:</p>\n\n<pre><code>[\n    {\n        \"field\": 123\n        \"links\": [\n            {\n                \"rel\": \"self\",\n                \"href\": \"http://bla_bla_bla_url\"\n            }\n        ]\n    }\n]\n</code></pre>\n\n<p>Changing structure of an answer is not the right decision, but we can try to think further this way.</p>\n"},{"tags":[],"owner":{"account_id":297370,"reputation":3213,"user_id":602856,"accept_rate":40,"display_name":"rainer198"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1531489584,"creation_date":1531489584,"answer_id":51326654,"question_id":25431087,"body_markdown":"I&#39;ve recently had the opposite issue, expected the HAL form (i.e. `_links`) but always got `links`, although using `@EnableAutoConfiguration`.\r\n\r\nThe solution to my issue might help here as well. Due to copying&amp;pasting from an example I found, I had two mediatypes in my RestController&#39;s `@RequestMapping`annotation\r\n\r\n    @RequestMapping(path=&quot;/example&quot;, produces = {MediaType.APPLICATION_JSON_VALUE, &quot;application/hal+json&quot;})\r\n\r\nWith `@EnableAutoConfiguration` Spring HATEOAS registers an ObjectMapper for `application/hal+json` only and in my application there was another one responsible for `MediaType.APPLICATION_JSON_VALUE` which won the selection and rendered standard JSON.\r\n\r\nSo my solution to only set `produces=&quot;application/hal+json&quot;` so that the Spring HATEOAS object mapper is choosen. In your case you should try to keep `MediaType.APPLICATION_JSON_VALUE`\r\n","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>I've recently had the opposite issue, expected the HAL form (i.e. <code>_links</code>) but always got <code>links</code>, although using <code>@EnableAutoConfiguration</code>.</p>\n\n<p>The solution to my issue might help here as well. Due to copying&amp;pasting from an example I found, I had two mediatypes in my RestController's <code>@RequestMapping</code>annotation</p>\n\n<pre><code>@RequestMapping(path=\"/example\", produces = {MediaType.APPLICATION_JSON_VALUE, \"application/hal+json\"})\n</code></pre>\n\n<p>With <code>@EnableAutoConfiguration</code> Spring HATEOAS registers an ObjectMapper for <code>application/hal+json</code> only and in my application there was another one responsible for <code>MediaType.APPLICATION_JSON_VALUE</code> which won the selection and rendered standard JSON.</p>\n\n<p>So my solution to only set <code>produces=\"application/hal+json\"</code> so that the Spring HATEOAS object mapper is choosen. In your case you should try to keep <code>MediaType.APPLICATION_JSON_VALUE</code></p>\n"},{"tags":[],"owner":{"account_id":19286463,"reputation":1,"user_id":14097331,"display_name":"Sean Turner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664327089,"creation_date":1664327089,"answer_id":73875182,"question_id":25431087,"body_markdown":"I was also getting the &#39;_links&#39; thing... I found that in my @RequestMapping I mistakenly had:\r\n@RequestMapping(&quot;id&quot;) when I should have had:\r\n@RequestMapping(&quot;{id}&quot;)\r\n\r\nWhen I fixed that, the &#39;_links&#39; thing went away.","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>I was also getting the '_links' thing... I found that in my @RequestMapping I mistakenly had:\n@RequestMapping(&quot;id&quot;) when I should have had:\n@RequestMapping(&quot;{id}&quot;)</p>\n<p>When I fixed that, the '_links' thing went away.</p>\n"}],"owner":{"account_id":1913109,"reputation":2051,"user_id":1726359,"accept_rate":74,"display_name":"Chad"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15553,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":7,"score":15,"last_activity_date":1683264705,"creation_date":1408637634,"question_id":25431087,"body_markdown":"As the title says, I have a resource object ``Product`` extending ``ResourceSupport``. However, the responses I receive have the property &quot;_links&quot; instead of &quot;links&quot; and have a different structure.\r\n\r\n    {\r\n      &quot;productId&quot; : 1,\r\n      &quot;name&quot; : &quot;2&quot;,\r\n      &quot;_links&quot; : {\r\n        &quot;self&quot; : {\r\n          &quot;href&quot; : &quot;http://localhost:8080/products/1&quot;\r\n        }\r\n      }\r\n    }\r\n\r\nBased on the [HATEOAS Reference][1], the expected is:\r\n\r\n    {\r\n      &quot;productId&quot; : 1,\r\n      &quot;name&quot; : &quot;2&quot;,\r\n      &quot;links&quot; : [\r\n        {\r\n          &quot;rel&quot; : &quot;self&quot;\r\n          &quot;href&quot; : &quot;http://localhost:8080/products/1&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\n**Was this intended? Is there a way to change it, or at leas the &quot;link&quot; if not the structure?**\r\n\r\nI added the selfLink through the following snippet:\r\n\r\n    product.add(linkTo(ProductController.class).slash(product.getProductId()).withSelfRel());\r\n\r\nI am using spring boot with the following build file:\r\n\r\n    dependencies {\r\n        compile (&quot;org.springframework.boot:spring-boot-starter-data-rest&quot;) {\r\n            exclude module: &quot;spring-boot-starter-tomcat&quot;\r\n        }\r\n    \r\n    \tcompile &quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-jetty&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\r\n    \r\n    \truntime &quot;org.hsqldb:hsqldb:2.3.2&quot;\r\n    \r\n        testCompile &quot;junit:junit&quot;\r\n    }\r\n\r\n  [1]: https://github.com/spring-projects/spring-hateoas/blob/master/readme.md","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>As the title says, I have a resource object <code>Product</code> extending <code>ResourceSupport</code>. However, the responses I receive have the property \"_links\" instead of \"links\" and have a different structure.</p>\n\n<pre><code>{\n  \"productId\" : 1,\n  \"name\" : \"2\",\n  \"_links\" : {\n    \"self\" : {\n      \"href\" : \"http://localhost:8080/products/1\"\n    }\n  }\n}\n</code></pre>\n\n<p>Based on the <a href=\"https://github.com/spring-projects/spring-hateoas/blob/master/readme.md\" rel=\"noreferrer\">HATEOAS Reference</a>, the expected is:</p>\n\n<pre><code>{\n  \"productId\" : 1,\n  \"name\" : \"2\",\n  \"links\" : [\n    {\n      \"rel\" : \"self\"\n      \"href\" : \"http://localhost:8080/products/1\"\n    }\n  ]\n}\n</code></pre>\n\n<p><strong>Was this intended? Is there a way to change it, or at leas the \"link\" if not the structure?</strong></p>\n\n<p>I added the selfLink through the following snippet:</p>\n\n<pre><code>product.add(linkTo(ProductController.class).slash(product.getProductId()).withSelfRel());\n</code></pre>\n\n<p>I am using spring boot with the following build file:</p>\n\n<pre><code>dependencies {\n    compile (\"org.springframework.boot:spring-boot-starter-data-rest\") {\n        exclude module: \"spring-boot-starter-tomcat\"\n    }\n\n    compile \"org.springframework.boot:spring-boot-starter-data-jpa\"\n    compile \"org.springframework.boot:spring-boot-starter-jetty\"\n    compile \"org.springframework.boot:spring-boot-starter-actuator\"\n\n    runtime \"org.hsqldb:hsqldb:2.3.2\"\n\n    testCompile \"junit:junit\"\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","events","listener"],"comments":[{"owner":{"account_id":53169,"reputation":1417,"user_id":158944,"accept_rate":59,"display_name":"bungrudi"},"score":0,"creation_date":1534325723,"post_id":51854951,"comment_id":90664711,"body_markdown":"hk.gov.ehr.server.EntityEventListenerRegistry should implement org.hibernate.Interceptor.\nHave this been the case?","body":"hk.gov.ehr.server.EntityEventListenerRegistry should implement org.hibernate.Interceptor. Have this been the case?"},{"owner":{"account_id":8696420,"reputation":269,"user_id":6507615,"display_name":"leonlai"},"score":0,"creation_date":1534346315,"post_id":51854951,"comment_id":90675347,"body_markdown":"@bungrudi Yes! you are right. Thanks for your help!\nAlso, what can I do if I want to register the PostInsertEventListener like this stackoverflow?\nhttps://stackoverflow.com/questions/20368551/preinsert-and-preupdate-event-listener-in-hibernate","body":"@bungrudi Yes! you are right. Thanks for your help! Also, what can I do if I want to register the PostInsertEventListener like this stackoverflow? <a href=\"https://stackoverflow.com/questions/20368551/preinsert-and-preupdate-event-listener-in-hibernate\" title=\"preinsert and preupdate event listener in hibernate\">stackoverflow.com/questions/20368551/&hellip;</a>"},{"owner":{"account_id":53169,"reputation":1417,"user_id":158944,"accept_rate":59,"display_name":"bungrudi"},"score":0,"creation_date":1534407183,"post_id":51854951,"comment_id":90696310,"body_markdown":"create another question and I&#39;ll help ;)","body":"create another question and I&#39;ll help ;)"}],"answers":[{"tags":[],"owner":{"account_id":53169,"reputation":1417,"user_id":158944,"accept_rate":59,"display_name":"bungrudi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1534407066,"creation_date":1534407066,"answer_id":51872450,"question_id":51854951,"body_markdown":"Per my comment, the interceptor needs to implement *org.hibernate.Interceptor*.","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>Per my comment, the interceptor needs to implement <em>org.hibernate.Interceptor</em>.</p>\n"},{"tags":[],"owner":{"account_id":11407644,"reputation":843,"user_id":8362671,"accept_rate":60,"display_name":"Angad Bansode"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534421009,"creation_date":1534421009,"answer_id":51876621,"question_id":51854951,"body_markdown":"You can register hibernate EventListener using java class also, as i did.\r\n\r\nPlease check this one. It Could help you. \r\n\r\n1) Register EventListener with Integrator.\r\n\r\n  \r\n\r\n        @Override\r\n       public void integrate(Metadata metadata, SessionFactoryImplementor \r\n             sessionFactory, SessionFactoryServiceRegistry serviceRegistry) \r\n       {\r\n    \r\n          EventListenerRegistry eventListenerRegistry = \r\n                serviceRegistry.getService(EventListenerRegistry.class);\r\n    \r\n         /* eventListenerRegistry.getEventListenerGroup(EventType.SAVE)\r\n                         .appendListener(new SaveUpdateEventListenerImp());*/\r\n          \r\n          eventListenerRegistry.getEventListenerGroup(EventType.SAVE_UPDATE)\r\n          .appendListener(new SaveUpdateEventListenerImp());\r\n          \r\n          eventListenerRegistry.getEventListenerGroup(EventType.LOAD)\r\n                         .appendListener(new LoadEventListenerImp());\r\n          \r\n          eventListenerRegistry.getEventListenerGroup(EventType.REFRESH)\r\n                         .appendListener(new RefreshEventListenerImp());\r\n       }\r\n\r\n 2) We can check LoadEventListener from here. Just Implements LoadEventListener.\r\n     When you load Book entity from DB then  LoadEventListener will call.\r\n\r\n  \r\n\r\n      public class LoadEventListenerImp implements LoadEventListener {\r\n       \r\n       private static final long serialVersionUID = 1L;\r\n       private static Logger logger = LogManager.getLogger(LoadEventListenerImp.class);\r\n    \r\n       @Override\r\n       public void onLoad(LoadEvent e, LoadType type) throws HibernateException {\r\n          logger.info(&quot;onLoad is called.&quot;);\r\n          Object obj = e.getResult();\r\n          if (obj instanceof Book) {\r\n             Book book = (Book) obj;\r\n             logger.info(&quot;Book on load event {} &quot; , book);\r\n          }\r\n       }","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>You can register hibernate EventListener using java class also, as i did.</p>\n\n<p>Please check this one. It Could help you. </p>\n\n<p>1) Register EventListener with Integrator.</p>\n\n<pre><code>    @Override\n   public void integrate(Metadata metadata, SessionFactoryImplementor \n         sessionFactory, SessionFactoryServiceRegistry serviceRegistry) \n   {\n\n      EventListenerRegistry eventListenerRegistry = \n            serviceRegistry.getService(EventListenerRegistry.class);\n\n     /* eventListenerRegistry.getEventListenerGroup(EventType.SAVE)\n                     .appendListener(new SaveUpdateEventListenerImp());*/\n\n      eventListenerRegistry.getEventListenerGroup(EventType.SAVE_UPDATE)\n      .appendListener(new SaveUpdateEventListenerImp());\n\n      eventListenerRegistry.getEventListenerGroup(EventType.LOAD)\n                     .appendListener(new LoadEventListenerImp());\n\n      eventListenerRegistry.getEventListenerGroup(EventType.REFRESH)\n                     .appendListener(new RefreshEventListenerImp());\n   }\n</code></pre>\n\n<p>2) We can check LoadEventListener from here. Just Implements LoadEventListener.\n     When you load Book entity from DB then  LoadEventListener will call.</p>\n\n<pre><code>  public class LoadEventListenerImp implements LoadEventListener {\n\n   private static final long serialVersionUID = 1L;\n   private static Logger logger = LogManager.getLogger(LoadEventListenerImp.class);\n\n   @Override\n   public void onLoad(LoadEvent e, LoadType type) throws HibernateException {\n      logger.info(\"onLoad is called.\");\n      Object obj = e.getResult();\n      if (obj instanceof Book) {\n         Book book = (Book) obj;\n         logger.info(\"Book on load event {} \" , book);\n      }\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8696420,"reputation":269,"user_id":6507615,"display_name":"leonlai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569256058,"creation_date":1534472005,"answer_id":51887544,"question_id":51854951,"body_markdown":"Finally, I tried this and work fine.\r\n\r\n    @Component\r\n    public class EntityEventListenerRegistry {\r\n    \r\n        @Autowired\r\n        private SessionFactory sessionFactory;\r\n    \r\n        @Autowired\r\n        private AuditLogPostInsertEventListener auditLogPostInsertEventListener;\r\n    \r\n        @Autowired\r\n        private AuditLogPostUpdateEventListener auditLogPostUpdateEventListener;\r\n    \r\n        @Autowired\r\n        private AuditLogPostDeleteEventListener auditLogPostDeleteEventListener;\r\n    \r\n        @PostConstruct\r\n        public void registerListeners() {\r\n            EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(EventListenerRegistry.class);\r\n            registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT).appendListener(auditLogPostInsertEventListener);\r\n            registry.getEventListenerGroup(EventType.POST_COMMIT_UPDATE).appendListener(auditLogPostUpdateEventListener);\r\n            registry.getEventListenerGroup(EventType.POST_COMMIT_DELETE).appendListener(auditLogPostDeleteEventListener);\r\n        }\r\n    }","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>Finally, I tried this and work fine.</p>\n\n<pre><code>@Component\npublic class EntityEventListenerRegistry {\n\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    @Autowired\n    private AuditLogPostInsertEventListener auditLogPostInsertEventListener;\n\n    @Autowired\n    private AuditLogPostUpdateEventListener auditLogPostUpdateEventListener;\n\n    @Autowired\n    private AuditLogPostDeleteEventListener auditLogPostDeleteEventListener;\n\n    @PostConstruct\n    public void registerListeners() {\n        EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(EventListenerRegistry.class);\n        registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT).appendListener(auditLogPostInsertEventListener);\n        registry.getEventListenerGroup(EventType.POST_COMMIT_UPDATE).appendListener(auditLogPostUpdateEventListener);\n        registry.getEventListenerGroup(EventType.POST_COMMIT_DELETE).appendListener(auditLogPostDeleteEventListener);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1683264464,"creation_date":1544720787,"answer_id":53766830,"question_id":51854951,"body_markdown":"The most portable way of setting the Hibernate entity listeners is via the [`org.hibernate.integrator.spi.Integrator`](https://vladmihalcea.com/hibernate-event-listeners/\r\n). This way, you can get it working for both `JpaTransactionManager` and `HibernateTransactionManager`.\r\n\r\nImplementing the `Integrator` interface\r\n---------------------------------------\r\n\r\nYou need to implement the `Integrator` as follows:\r\n\r\n    public class ReplicationEventListenerIntegrator \r\n            implements Integrator {\r\n     \r\n        public static final ReplicationEventListenerIntegrator INSTANCE = \r\n            new ReplicationEventListenerIntegrator();\r\n     \r\n        @Override\r\n        public void integrate(\r\n                Metadata metadata,\r\n                SessionFactoryImplementor sessionFactory,\r\n                SessionFactoryServiceRegistry serviceRegistry) {\r\n     \r\n            final EventListenerRegistry eventListenerRegistry =\r\n                    serviceRegistry.getService(EventListenerRegistry.class);\r\n     \r\n            eventListenerRegistry.appendListeners(\r\n                EventType.POST_INSERT, \r\n                ReplicationInsertEventListener.INSTANCE\r\n            );\r\n             \r\n            eventListenerRegistry.appendListeners(\r\n                EventType.POST_UPDATE, \r\n                ReplicationUpdateEventListener.INSTANCE\r\n            );\r\n             \r\n            eventListenerRegistry.appendListeners(\r\n                EventType.PRE_DELETE, \r\n                ReplicationDeleteEventListener.INSTANCE\r\n            );\r\n        }\r\n     \r\n        @Override\r\n        public void disintegrate(\r\n                SessionFactoryImplementor sessionFactory,\r\n                SessionFactoryServiceRegistry serviceRegistry) {\r\n     \r\n        }\r\n    }\r\n\r\nVia the `eventListenerRegistry`, you can register the event listeners.\r\n\r\nSetting the `hibernate.integrator_provider` configuration property\r\n------------------------------------------------------------------\r\n\r\nOnce you are done, you need to set up the `hibernate.integrator_provider` configuration property via the **application.properties** file, like this:\r\n\r\n    spring.jpa.properties.hibernate.integrator_provider=com.vladmihalcea.book.hpjp.hibernate.listener.ReplicationEventListenerIntegrator\r\n\r\n","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>The most portable way of setting the Hibernate entity listeners is via the <a href=\"https://vladmihalcea.com/hibernate-event-listeners/\" rel=\"nofollow noreferrer\"><code>org.hibernate.integrator.spi.Integrator</code></a>. This way, you can get it working for both <code>JpaTransactionManager</code> and <code>HibernateTransactionManager</code>.</p>\n<h2>Implementing the <code>Integrator</code> interface</h2>\n<p>You need to implement the <code>Integrator</code> as follows:</p>\n<pre><code>public class ReplicationEventListenerIntegrator \n        implements Integrator {\n \n    public static final ReplicationEventListenerIntegrator INSTANCE = \n        new ReplicationEventListenerIntegrator();\n \n    @Override\n    public void integrate(\n            Metadata metadata,\n            SessionFactoryImplementor sessionFactory,\n            SessionFactoryServiceRegistry serviceRegistry) {\n \n        final EventListenerRegistry eventListenerRegistry =\n                serviceRegistry.getService(EventListenerRegistry.class);\n \n        eventListenerRegistry.appendListeners(\n            EventType.POST_INSERT, \n            ReplicationInsertEventListener.INSTANCE\n        );\n         \n        eventListenerRegistry.appendListeners(\n            EventType.POST_UPDATE, \n            ReplicationUpdateEventListener.INSTANCE\n        );\n         \n        eventListenerRegistry.appendListeners(\n            EventType.PRE_DELETE, \n            ReplicationDeleteEventListener.INSTANCE\n        );\n    }\n \n    @Override\n    public void disintegrate(\n            SessionFactoryImplementor sessionFactory,\n            SessionFactoryServiceRegistry serviceRegistry) {\n \n    }\n}\n</code></pre>\n<p>Via the <code>eventListenerRegistry</code>, you can register the event listeners.</p>\n<h2>Setting the <code>hibernate.integrator_provider</code> configuration property</h2>\n<p>Once you are done, you need to set up the <code>hibernate.integrator_provider</code> configuration property via the <strong>application.properties</strong> file, like this:</p>\n<pre><code>spring.jpa.properties.hibernate.integrator_provider=com.vladmihalcea.book.hpjp.hibernate.listener.ReplicationEventListenerIntegrator\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27714646,"reputation":21,"user_id":21156637,"display_name":"Tom Van Eetvelde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677830960,"creation_date":1677830960,"answer_id":75624586,"question_id":51854951,"body_markdown":"With spring 5.3.19 and hibernate 5.6.7, it is just a syntax change with respect to the hibernate 3 version.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    \t&lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n    \t\t...\r\n    \t\t&lt;property name=&quot;jpaProperties&quot;&gt;\r\n    \t\t\t&lt;props&gt;\r\n    \t\t\t\t...\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.event.listener.post-insert&quot;&gt;xxxx.AuditLogPostInsertEventListener&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.event.listener.post-update&quot;&gt;xxxx.AuditLogPostUpdateEventListener&lt;/prop&gt;\r\n    \t\t\t&lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;!-- jpaPropertyMap adds on top of what has already been defined in jpaProperties above --&gt;\r\n    \t\t&lt;property name=&quot;jpaPropertyMap&quot;&gt;\r\n    \t\t\t&lt;map&gt;\r\n    \t\t\t\t&lt;!-- This integrates hibernate with the spring container. As such, eg JPA EntityListeners can be managed by spring. --&gt;\r\n    \t\t\t\t&lt;!-- As we need to inject a bean into the jpaPropertyMap, we cannot use a prop key in the above &#39;jpaProperties&#39; xml. --&gt;\r\n    \t\t\t\t&lt;entry key=&quot;hibernate.resource.beans.container&quot;&gt;\r\n    \t\t\t\t\t&lt;bean class=&quot;org.springframework.orm.hibernate5.SpringBeanContainer&quot; /&gt;\r\n    \t\t\t\t&lt;/entry&gt;\r\n    \t\t\t&lt;/map&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>With spring 5.3.19 and hibernate 5.6.7, it is just a syntax change with respect to the hibernate 3 version.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>    &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        ...\n        &lt;property name=\"jpaProperties\"&gt;\n            &lt;props&gt;\n                ...\n                &lt;prop key=\"hibernate.event.listener.post-insert\"&gt;xxxx.AuditLogPostInsertEventListener&lt;/prop&gt;\n                &lt;prop key=\"hibernate.event.listener.post-update\"&gt;xxxx.AuditLogPostUpdateEventListener&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n        &lt;!-- jpaPropertyMap adds on top of what has already been defined in jpaProperties above --&gt;\n        &lt;property name=\"jpaPropertyMap\"&gt;\n            &lt;map&gt;\n                &lt;!-- This integrates hibernate with the spring container. As such, eg JPA EntityListeners can be managed by spring. --&gt;\n                &lt;!-- As we need to inject a bean into the jpaPropertyMap, we cannot use a prop key in the above 'jpaProperties' xml. --&gt;\n                &lt;entry key=\"hibernate.resource.beans.container\"&gt;\n                    &lt;bean class=\"org.springframework.orm.hibernate5.SpringBeanContainer\" /&gt;\n                &lt;/entry&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":8696420,"reputation":269,"user_id":6507615,"display_name":"leonlai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11242,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":51872450,"answer_count":5,"score":9,"last_activity_date":1683264554,"creation_date":1534319912,"question_id":51854951,"body_markdown":"Now, I would like to upgrade my application from Spring Hibernate 3 to 5\r\n\r\nUnder hibernate 3, I create a POST-COMMIT-INSERT|UPDATE|DELETE event listener like below\r\n\r\n\t&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;annotatedClasses&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t\t....\r\n\t\t\t&lt;/list&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t....\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;eventListeners&quot;&gt;\r\n  \t\t\t&lt;map&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-insert&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostInsertEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-update&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostUpdateEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-delete&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostDeleteEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n  \t\t\t&lt;/map&gt;\r\n \t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\nNow, I try to create the event listener under Hibernate 5 but not success\r\n\r\n    &lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;annotatedClasses&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t\t...\r\n\t\t\t&lt;/list&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t...\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;eventListeners&quot;&gt;\r\n  \t\t\t&lt;map&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-insert&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostInsertEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-update&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostUpdateEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-delete&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostDeleteEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n  \t\t\t&lt;/map&gt;\r\n \t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\nThe follow message was shown\r\n\r\n&gt; Invalid property &#39;eventListeners&#39; of bean class [org.springframework.orm.hibernate5.LocalSessionFactoryBean]: \r\nBean property &#39;eventListeners&#39; is not writable or has an invalid setter method. \r\nDoes the parameter type of the setter match the return type of the getter?\r\n\r\nI tried to follow this stackoverflow but still not success.\r\n\r\n[PreInsert and PreUpdate Event Listener in hibernate][1]\r\n\r\nI changed the config like below but still not success\r\n\r\n    &lt;bean id=&quot;auditInterceptor&quot; class=&quot;xxxx.EntityEventListenerRegistry&quot; /&gt;\r\n\t\r\n\t&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;annotatedClasses&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t\t...\r\n\t\t\t&lt;/list&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t...\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;entityInterceptor&quot; ref=&quot;xxxx.EntityEventListenerRegistry&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n  [1]: https://stackoverflow.com/questions/20368551/preinsert-and-preupdate-event-listener-in-hibernate","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>Now, I would like to upgrade my application from Spring Hibernate 3 to 5</p>\n<p>Under hibernate 3, I create a POST-COMMIT-INSERT|UPDATE|DELETE event listener like below</p>\n<pre><code>&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\n    &lt;property name=&quot;annotatedClasses&quot;&gt;\n        &lt;list&gt;\n            ....\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\n        &lt;props&gt;\n            ....\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;eventListeners&quot;&gt;\n        &lt;map&gt;\n            &lt;entry key=&quot;post-commit-insert&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostInsertEventListener&quot; /&gt;\n            &lt;/entry&gt;\n            &lt;entry key=&quot;post-commit-update&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostUpdateEventListener&quot; /&gt;\n            &lt;/entry&gt;\n            &lt;entry key=&quot;post-commit-delete&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostDeleteEventListener&quot; /&gt;\n            &lt;/entry&gt;\n        &lt;/map&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Now, I try to create the event listener under Hibernate 5 but not success</p>\n<pre><code>&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\n    &lt;property name=&quot;annotatedClasses&quot;&gt;\n        &lt;list&gt;\n            ...\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\n        &lt;props&gt;\n            ...\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;eventListeners&quot;&gt;\n        &lt;map&gt;\n            &lt;entry key=&quot;post-commit-insert&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostInsertEventListener&quot; /&gt;\n            &lt;/entry&gt;\n            &lt;entry key=&quot;post-commit-update&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostUpdateEventListener&quot; /&gt;\n            &lt;/entry&gt;\n            &lt;entry key=&quot;post-commit-delete&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostDeleteEventListener&quot; /&gt;\n            &lt;/entry&gt;\n        &lt;/map&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>The follow message was shown</p>\n<blockquote>\n<p>Invalid property 'eventListeners' of bean class [org.springframework.orm.hibernate5.LocalSessionFactoryBean]:\nBean property 'eventListeners' is not writable or has an invalid setter method.\nDoes the parameter type of the setter match the return type of the getter?</p>\n</blockquote>\n<p>I tried to follow this stackoverflow but still not success.</p>\n<p><a href=\"https://stackoverflow.com/questions/20368551/preinsert-and-preupdate-event-listener-in-hibernate\">PreInsert and PreUpdate Event Listener in hibernate</a></p>\n<p>I changed the config like below but still not success</p>\n<pre><code>&lt;bean id=&quot;auditInterceptor&quot; class=&quot;xxxx.EntityEventListenerRegistry&quot; /&gt;\n\n&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\n    &lt;property name=&quot;annotatedClasses&quot;&gt;\n        &lt;list&gt;\n            ...\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\n        &lt;props&gt;\n            ...\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;entityInterceptor&quot; ref=&quot;xxxx.EntityEventListenerRegistry&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","java-io","read.csv"],"comments":[{"owner":{"account_id":401367,"reputation":23742,"user_id":767881,"accept_rate":14,"display_name":"Ravinder Reddy"},"score":0,"creation_date":1683264504,"post_id":76179058,"comment_id":134343085,"body_markdown":"check the array length. not the length value of the cell content","body":"check the array length. not the length value of the cell content"}],"owner":{"account_id":10981964,"reputation":43,"user_id":8068792,"accept_rate":0,"display_name":"Prabhash Mishra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683264334,"creation_date":1683264334,"question_id":76179058,"body_markdown":"I am new to .csv file reading in java. I am getting java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1 when empty cell is encountered while reading.\r\n    \r\n    Error:\r\n    ZZZ::[ICD10Dx, A0102]\r\n    ZZZ::[ICD10Dx, A1884]\r\n    ZZZ::[ICD10Dx, A5206]\r\n    ZZZ::[ICD10Dx]\r\n    java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\r\n    \r\n    Java Code:\r\n\r\npublic class CsvDTO implements Serializable {\r\n\r\n    private String codeType;\r\n    private String codes;\r\n\r\n    public CsvDTO() {\r\n    }\r\n//Getters and Setters\r\n\r\n\r\n\r\n\r\n List&lt;CsvDTO&gt; xmlLines = new BufferedReader(new InputStreamReader(stream.getInputStream()))\r\n                .lines()\r\n                .skip(1) //Skips the first n lines, in this case 1\r\n                .map(s -&gt; {\r\n\r\n                        String[] values = s.split(&quot;,&quot;);\r\n                        System.out.println(&quot;ZZZ::&quot;+Arrays.toString(values));\r\n                        CsvDTO dto = new CsvDTO();\r\n                        dto.setCodeType((values[0].length() &lt;=0)?&quot;&quot;: values[0]);\r\n                        dto.setCodes((values[1].length() &lt;=0)? &quot;&quot;: values[1]);\r\n                    return dto;\r\n                }).collect(Collectors.toList());\r\n\r\nCSV File:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\t\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4CFBw.png","title":"Getting Error While Reading Empty cell in CSV file","body":"<p>I am new to .csv file reading in java. I am getting java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1 when empty cell is encountered while reading.</p>\n<pre><code>Error:\nZZZ::[ICD10Dx, A0102]\nZZZ::[ICD10Dx, A1884]\nZZZ::[ICD10Dx, A5206]\nZZZ::[ICD10Dx]\njava.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\n\nJava Code:\n</code></pre>\n<p>public class CsvDTO implements Serializable {</p>\n<pre><code>private String codeType;\nprivate String codes;\n\npublic CsvDTO() {\n}\n</code></pre>\n<p>//Getters and Setters</p>\n<p>List xmlLines = new BufferedReader(new InputStreamReader(stream.getInputStream()))\n.lines()\n.skip(1) //Skips the first n lines, in this case 1\n.map(s -&gt; {</p>\n<pre><code>                    String[] values = s.split(&quot;,&quot;);\n                    System.out.println(&quot;ZZZ::&quot;+Arrays.toString(values));\n                    CsvDTO dto = new CsvDTO();\n                    dto.setCodeType((values[0].length() &lt;=0)?&quot;&quot;: values[0]);\n                    dto.setCodes((values[1].length() &lt;=0)? &quot;&quot;: values[1]);\n                return dto;\n            }).collect(Collectors.toList());\n</code></pre>\n<p>CSV File:</p>\n<p><a href=\"https://i.stack.imgur.com/4CFBw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4CFBw.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","eclipse","eclipse-plugin"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1683265431,"post_id":76179046,"comment_id":134343192,"body_markdown":"Have you tried it through Content Assist, or Organizing Imports?","body":"Have you tried it through Content Assist, or Organizing Imports?"}],"owner":{"account_id":28513218,"reputation":1,"user_id":21822921,"display_name":"Abhi Rathi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683264178,"creation_date":1683264178,"question_id":76179046,"body_markdown":"Don&#39;t know but now my Eclipse is not showing import option automatically but I can add them manually\r\n\r\nI was trying to do imports using quick fix in Eclipse","title":"Eclipse not showing import option in quick fix","body":"<p>Don't know but now my Eclipse is not showing import option automatically but I can add them manually</p>\n<p>I was trying to do imports using quick fix in Eclipse</p>\n"},{"tags":["java","unicode","utf-8","javadoc"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1683169602,"post_id":76169304,"comment_id":134326286,"body_markdown":"Seems like a problem with the javadoc generator. In any case, how about writing these in English instead? Assuming this is spring, you can do the localisation in a .properties file.","body":"Seems like a problem with the javadoc generator. In any case, how about writing these in English instead? Assuming this is spring, you can do the localisation in a .properties file."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683170165,"post_id":76169304,"comment_id":134326334,"body_markdown":"What version of Java are you using.  This might be https://bugs.openjdk.org/browse/JDK-8203176 ... which is fixed in Java 11.","body":"What version of Java are you using.  This might be <a href=\"https://bugs.openjdk.org/browse/JDK-8203176\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8203176</a> ... which is fixed in Java 11."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1683170463,"post_id":76169304,"comment_id":134326362,"body_markdown":"@StephenC I can reproduce in Java 17. That bug is only for `@code` blocks it seems.","body":"@StephenC I can reproduce in Java 17. That bug is only for <code>@code</code> blocks it seems."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683170957,"post_id":76169304,"comment_id":134326407,"body_markdown":"OK ... so this is could be a previously unreported bug.","body":"OK ... so this is could be a previously unreported bug."}],"owner":{"account_id":5195256,"reputation":381,"user_id":4156801,"accept_rate":54,"display_name":"John Zhang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683262928,"creation_date":1683169195,"question_id":76169304,"body_markdown":" JDK ： 17 \r\n\r\n Spring Boot:3.0.5 \r\n\r\n STS: 4.17.1.RELEASE \r\n\r\n```public record RegisterDTO (\r\n\t\t@NotNull(message=&quot;用户名不可为空&quot;)\r\n\t\t@Length(min=6,max=24,message=&quot;用户名长度6～24字符&quot;)\r\n\t\tString username,\r\n\t\t@Length(min=8,max=64,message=&quot;密码为8～64字符&quot;)\r\n\t\t@NotNull(message=&quot;密码不可为空&quot;)\r\n\t\tString password,\r\n\t\t@NotNull(message=&quot;姓名不可为空&quot;)\r\n\t\tString name,\r\n\t\tString email,\r\n\t\tString inviteUUID\r\n\t\t) {}\r\n```\r\nif we generate java doc for above code, \r\nthe message to transliteration to \r\n\r\n record RegisterDTO(@NotNull(message=&quot;\\u7528\\u6237\\u540d}\\u7528\\u6237\\u540d\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) @Length(min=6,max=24,message=&quot;\\u7528\\u6237\\u540d\\u957f\\u5ea66\\uff5e24\\u5b57\\u7b26&quot;) String username, @Length(min=8,max=64,message=&quot;\\u5bc6\\u7801\\u4e3a8\\uff5e64\\u5b57\\u7b26&quot;) @NotNull(message=&quot;\\u5bc6\\u7801\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) String password, \r\n@NotNull(message=&quot;\\u59d3\\u540d\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) String name, String email, \r\nString inviteUUID)\r\n\r\nHow to display the unicode character, not the transliteration in java doc","title":"Java doc Annotation utf message","body":"<p>JDK ： 17</p>\n<p>Spring Boot:3.0.5</p>\n<p>STS: 4.17.1.RELEASE</p>\n<pre><code>        @NotNull(message=&quot;用户名不可为空&quot;)\n        @Length(min=6,max=24,message=&quot;用户名长度6～24字符&quot;)\n        String username,\n        @Length(min=8,max=64,message=&quot;密码为8～64字符&quot;)\n        @NotNull(message=&quot;密码不可为空&quot;)\n        String password,\n        @NotNull(message=&quot;姓名不可为空&quot;)\n        String name,\n        String email,\n        String inviteUUID\n        ) {}\n</code></pre>\n<p>if we generate java doc for above code,\nthe message to transliteration to</p>\n<p>record RegisterDTO(@NotNull(message=&quot;\\u7528\\u6237\\u540d}\\u7528\\u6237\\u540d\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) @Length(min=6,max=24,message=&quot;\\u7528\\u6237\\u540d\\u957f\\u5ea66\\uff5e24\\u5b57\\u7b26&quot;) String username, @Length(min=8,max=64,message=&quot;\\u5bc6\\u7801\\u4e3a8\\uff5e64\\u5b57\\u7b26&quot;) @NotNull(message=&quot;\\u5bc6\\u7801\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) String password,\n@NotNull(message=&quot;\\u59d3\\u540d\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) String name, String email,\nString inviteUUID)</p>\n<p>How to display the unicode character, not the transliteration in java doc</p>\n"},{"tags":["java","spring","spring-boot","docker","maven"],"comments":[{"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"score":0,"creation_date":1614350417,"post_id":66387257,"comment_id":117366511,"body_markdown":"Try building with debug mode on `mvn spring-boot:build-image -X` perhaps there will be more information in the error logs.","body":"Try building with debug mode on <code>mvn spring-boot:build-image -X</code> perhaps there will be more information in the error logs."},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1614361029,"post_id":66387257,"comment_id":117371341,"body_markdown":"The failure&#39;s come from your local Docker daemon. Its logs may reveal what caused it to return a 500 response.","body":"The failure&#39;s come from your local Docker daemon. Its logs may reveal what caused it to return a 500 response."}],"answers":[{"tags":[],"owner":{"account_id":3490736,"reputation":1,"user_id":2920492,"display_name":"Biplav Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683261522,"creation_date":1683215929,"answer_id":76175123,"question_id":66387257,"body_markdown":"Reinstalling Docker Desktop worked for me.","title":"error using mvn spring-boot:build-image - received unexpected HTTP status: 500 Server Error&quot;","body":"<p>Reinstalling Docker Desktop worked for me.</p>\n"}],"owner":{"account_id":16675309,"reputation":177,"user_id":12051879,"display_name":"idan ovadia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1927,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683261522,"creation_date":1614348393,"question_id":66387257,"body_markdown":"I tried using &#39;mvn spring-boot:build-image&#39; command and get that error..\r\n\r\n( I saw that maven have a new way to create an image with spring)\r\n\r\n```\r\n\r\n Building image &#39;docker.io/library/ccc:0.0.1-SNAPSHOT&#39;\r\n[INFO]\r\n[INFO]  &gt; Pulling builder image &#39;docker.io/paketobuildpacks/builder:base&#39; 100%\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  13.998 s\r\n[INFO] Finished at: 2021-02-26T15:20:51+02:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on project ccc: Execution default-cli of goal org.s\r\npringframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to &#39;localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbu\r\nilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot; -&gt; [Help 1]\r\n```\r\n\r\nI hope someone can help me fix it or refer me to some sources\r\n\r\n\r\nThis is what I get when using debug mode\r\nI copy the explantion from when the error begin \r\nHope it will give more information about what happend her\r\n\r\n```\r\n[INFO]  &gt; Pulling builder image &#39;docker.io/paketobuildpacks/builder:base&#39; 100%\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  26.053 s\r\n[INFO] Finished at: 2021-02-26T16:47:33+02:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on project ccc: Execution default-cli of goal org.s\r\npringframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to &#39;localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbu\r\nilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot; -&gt; [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on\r\nproject ccc: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to &#39;localhost/v1.24/images/cr\r\neate?fromImage=docker.io%2Fpaketobuildpacks%2Fbuilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500\r\nServer Error&quot;\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:498)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image faile\r\nd: Docker API call to &#39;localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbuilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; an\r\nd message &quot;received unexpected HTTP status: 500 Server Error&quot;\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:498)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.springframework.boot.buildpack.platform.docker.transport.DockerEngineException: Docker API call to &#39;localhost/v1.24/images/create?fromImage=docker.io\r\n%2Fpaketobuildpacks%2Fbuilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot;\r\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.execute (HttpClientTransport.java:156)\r\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.execute (HttpClientTransport.java:143)\r\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.post (HttpClientTransport.java:96)\r\n    at org.springframework.boot.buildpack.platform.docker.DockerApi$ImageApi.pull (DockerApi.java:178)\r\n    at org.springframework.boot.buildpack.platform.build.Builder.pullImage (Builder.java:154)\r\n    at org.springframework.boot.buildpack.platform.build.Builder.getImage (Builder.java:135)\r\n    at org.springframework.boot.buildpack.platform.build.Builder.build (Builder.java:95)\r\n    at org.springframework.boot.maven.BuildImageMojo.buildImage (BuildImageMojo.java:181)\r\n    at org.springframework.boot.maven.BuildImageMojo.execute (BuildImageMojo.java:171)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:498)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n[ERROR]\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\r\n\r\n```\r\n\r\n[Relates to post](https://stackoverflow.com/questions/72044376/spring-spring-bootbuild-image-gives-http-500-error)","title":"error using mvn spring-boot:build-image - received unexpected HTTP status: 500 Server Error&quot;","body":"<p>I tried using 'mvn spring-boot:build-image' command and get that error..</p>\n<p>( I saw that maven have a new way to create an image with spring)</p>\n<pre><code>\n Building image 'docker.io/library/ccc:0.0.1-SNAPSHOT'\n[INFO]\n[INFO]  &gt; Pulling builder image 'docker.io/paketobuildpacks/builder:base' 100%\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  13.998 s\n[INFO] Finished at: 2021-02-26T15:20:51+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on project ccc: Execution default-cli of goal org.s\npringframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to 'localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbu\nilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot; -&gt; [Help 1]\n</code></pre>\n<p>I hope someone can help me fix it or refer me to some sources</p>\n<p>This is what I get when using debug mode\nI copy the explantion from when the error begin\nHope it will give more information about what happend her</p>\n<pre><code>[INFO]  &gt; Pulling builder image 'docker.io/paketobuildpacks/builder:base' 100%\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  26.053 s\n[INFO] Finished at: 2021-02-26T16:47:33+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on project ccc: Execution default-cli of goal org.s\npringframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to 'localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbu\nilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot; -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on\nproject ccc: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to 'localhost/v1.24/images/cr\neate?fromImage=docker.io%2Fpaketobuildpacks%2Fbuilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500\nServer Error&quot;\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:498)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image faile\nd: Docker API call to 'localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbuilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; an\nd message &quot;received unexpected HTTP status: 500 Server Error&quot;\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:498)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.springframework.boot.buildpack.platform.docker.transport.DockerEngineException: Docker API call to 'localhost/v1.24/images/create?fromImage=docker.io\n%2Fpaketobuildpacks%2Fbuilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot;\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.execute (HttpClientTransport.java:156)\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.execute (HttpClientTransport.java:143)\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.post (HttpClientTransport.java:96)\n    at org.springframework.boot.buildpack.platform.docker.DockerApi$ImageApi.pull (DockerApi.java:178)\n    at org.springframework.boot.buildpack.platform.build.Builder.pullImage (Builder.java:154)\n    at org.springframework.boot.buildpack.platform.build.Builder.getImage (Builder.java:135)\n    at org.springframework.boot.buildpack.platform.build.Builder.build (Builder.java:95)\n    at org.springframework.boot.maven.BuildImageMojo.buildImage (BuildImageMojo.java:181)\n    at org.springframework.boot.maven.BuildImageMojo.execute (BuildImageMojo.java:171)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:498)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[ERROR]\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\n\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/72044376/spring-spring-bootbuild-image-gives-http-500-error\">Relates to post</a></p>\n"},{"tags":["java","math"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683261331,"post_id":76178808,"comment_id":134342795,"body_markdown":"Your code doesn&#39;t match the problem.  The problem requires you to read X and compute Y.  What your code is doing is reading X and Y and computing Z ... using a different formula.   Is your code a genuine attempt?  (It is hard to understand how you could have gotten this code from the requirements ... assuming you read them.)","body":"Your code doesn&#39;t match the problem.  The problem requires you to read X and compute Y.  What your code is doing is reading X and Y and computing Z ... using a different formula.   Is your code a genuine attempt?  (It is hard to understand how you could have gotten this code from the requirements ... assuming you read them.)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683261538,"post_id":76178808,"comment_id":134342811,"body_markdown":"[Please do not upload images of your requirements.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of your requirements.</a>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683264308,"post_id":76178808,"comment_id":134343069,"body_markdown":"As an aside: The notation used in the image in unclear. As fas ar I know, there is no semantic to the syntax `(y = 2x^2 + 4) / 2`. It could mean `y = (2x^2 +4) / 2`; it could mean `y / 2 = (2x^2 +4) / 2`.","body":"As an aside: The notation used in the image in unclear. As fas ar I know, there is no semantic to the syntax <code>(y = 2x^2 + 4) &#47; 2</code>. It could mean <code>y = (2x^2 +4) &#47; 2</code>; it could mean <code>y &#47; 2 = (2x^2 +4) &#47; 2</code>."}],"answers":[{"tags":[],"owner":{"account_id":5129730,"reputation":1,"user_id":4110383,"display_name":"Exceptionoverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683260674,"creation_date":1683260674,"answer_id":76178840,"question_id":76178808,"body_markdown":"According to you picture with the formula.\r\nI think you would get the value of y with x like so :\r\n\r\n        double y = (2 * Math.pow(x,2) + 4)/3;\r\n","title":"What do i change to get the problem right?","body":"<p>According to you picture with the formula.\nI think you would get the value of y with x like so :</p>\n<pre><code>    double y = (2 * Math.pow(x,2) + 4)/3;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683261386,"creation_date":1683261055,"answer_id":76178855,"question_id":76178808,"body_markdown":" 1. Only `x` needs to be inputted from the console, the equation is to find `y`, so there is no need for it to be inputted from the console.\r\n 2. There is no need for `z`, in the equation there are only two variables, you can assign the result to `y`.\r\n 3. I also don&#39;t understand this `Math.pow(y,3);`, there is nowhere said in the question to take `y` to the power of 3.\r\n\r\nThe equation by the code will be like this \r\n\r\n    double y = ((2 * Math.pow(x, 2)) + 4) / 3;","title":"What do i change to get the problem right?","body":"<ol>\n<li>Only <code>x</code> needs to be inputted from the console, the equation is to find <code>y</code>, so there is no need for it to be inputted from the console.</li>\n<li>There is no need for <code>z</code>, in the equation there are only two variables, you can assign the result to <code>y</code>.</li>\n<li>I also don't understand this <code>Math.pow(y,3);</code>, there is nowhere said in the question to take <code>y</code> to the power of 3.</li>\n</ol>\n<p>The equation by the code will be like this</p>\n<pre><code>double y = ((2 * Math.pow(x, 2)) + 4) / 3;\n</code></pre>\n"}],"owner":{"account_id":25051110,"reputation":1,"user_id":18907015,"display_name":"Kakkoii Shounen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1722,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1683261386,"creation_date":1683259863,"question_id":76178808,"body_markdown":"[This the formula that needed to be code](https://i.stack.imgur.com/bBiCh.jpg)\r\n\r\nIve tried this code but the answer is different from the given problem\r\n\r\n\r\nPls see picture for the formula, I&#39;ve d this code but it seems like the values are different so I get different answers\r\n\r\n\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tSystem.out.println(&quot;Problem 6&quot;);\r\n\t\tSystem.out.println(&quot;Input x and y&quot;);\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tint x = sc.nextInt();\r\n\t\tint y = sc.nextInt();\r\n\t\tdouble z = 2 * Math.pow(x,2) + Math.pow(y,3);\r\n\t\t\r\n\t\tSystem.out.println(z / 2);\r\n\t\t\r\n\t}\r\n}\r\n```\r\n\r\n\r\nIve tried this code but it doesnt show the right answer\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tSystem.out.println(&quot;Problem 6&quot;);\r\n\t\tSystem.out.println(&quot;Input x and y&quot;);\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tint x = sc.nextInt();\r\n\t\tint y = sc.nextInt();\r\n\t\tdouble z = 2 * Math.pow(x,2) + Math.pow(y,3);\r\n\t\t\r\n\t\tSystem.out.println(z / 2);\r\n\t\t\r\n\t}\r\n}\r\n```\r\n","title":"What do i change to get the problem right?","body":"<p><a href=\"https://i.stack.imgur.com/bBiCh.jpg\" rel=\"nofollow noreferrer\">This the formula that needed to be code</a></p>\n<p>Ive tried this code but the answer is different from the given problem</p>\n<p>Pls see picture for the formula, I've d this code but it seems like the values are different so I get different answers</p>\n<pre><code>import java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        \n        System.out.println(&quot;Problem 6&quot;);\n        System.out.println(&quot;Input x and y&quot;);\n        Scanner sc = new Scanner(System.in);\n        int x = sc.nextInt();\n        int y = sc.nextInt();\n        double z = 2 * Math.pow(x,2) + Math.pow(y,3);\n        \n        System.out.println(z / 2);\n        \n    }\n}\n</code></pre>\n<p>Ive tried this code but it doesnt show the right answer</p>\n<pre><code>import java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        \n        System.out.println(&quot;Problem 6&quot;);\n        System.out.println(&quot;Input x and y&quot;);\n        Scanner sc = new Scanner(System.in);\n        int x = sc.nextInt();\n        int y = sc.nextInt();\n        double z = 2 * Math.pow(x,2) + Math.pow(y,3);\n        \n        System.out.println(z / 2);\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","bash","spring-boot","daemon","nohup"],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683260084,"creation_date":1683258272,"question_id":76178725,"body_markdown":"I have created a linux auto-update bash script that is called from my java app using `Runtime.getRuntime().exec()` whenever the command &#39;sudo yum check-update&#39; returns a positive result.\r\n\r\nThis bash script always starts the update process by stopping the systemd service that runs the java app jar file. It does this with `sudo service myApp stop`. The problem i&#39;m facing is that when the java app terminates, the process in which the bash script is running is terminated as well. So the bash script never gets past the service stop command.\r\n\r\nI know that when the parent process in which the java program runs terminates, any child processes that were spawned by the parent process will terminate as well. So to prevent this i&#39;ve tried turning the bash script execution into a daemon thread that should continue even after the java program has shut down. The code looks like this:\r\n\r\n            new Thread(() -&gt; {\r\n                try {\r\n                    String[] command = new String[]{&quot;env&quot;, &quot;bash&quot;, &quot;-c&quot;, &quot;setsid nohup &quot; + String.format(&quot;/home/ec2-user/config/linux-update-script.sh&quot; + &quot; %s %s&quot;, LinuxUpdateTask.SYSTEM_UPGRADE, &quot;2023.0.20230503&quot;) + &quot;  &gt;/dev/null 2&gt;&amp;1 &lt;/dev/null &amp;&quot;}; \r\n                    Process process = new ProcessBuilder(command).start();\r\n                    process.waitFor();\r\n                } catch (IOException | InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }).start(); \r\n\r\nThis command calls `setsid` and `nohup` which should detach the process from the parent process that spawned it. I&#39;m also running the command in a separate thread. But despite using `setsid` the process is still killed when the java program is terminated.\r\n\r\nI&#39;ve solved this problem by running the update script via a systemd service. The java program calls this service which in turn calls the bash file and the java program terminates without terminating the bash file process.\r\n\r\nBut i want to know if there is any way i could do this without having to use a systemd service. Are there any JVM settings that i could enable or disable to prevent the daemon process from being terminated when the spawning java program terminates?\r\n","title":"In a Spring boot java app, How do i run a bash script in a daemon thread that continues after the java app terminates?","body":"<p>I have created a linux auto-update bash script that is called from my java app using <code>Runtime.getRuntime().exec()</code> whenever the command 'sudo yum check-update' returns a positive result.</p>\n<p>This bash script always starts the update process by stopping the systemd service that runs the java app jar file. It does this with <code>sudo service myApp stop</code>. The problem i'm facing is that when the java app terminates, the process in which the bash script is running is terminated as well. So the bash script never gets past the service stop command.</p>\n<p>I know that when the parent process in which the java program runs terminates, any child processes that were spawned by the parent process will terminate as well. So to prevent this i've tried turning the bash script execution into a daemon thread that should continue even after the java program has shut down. The code looks like this:</p>\n<pre><code>        new Thread(() -&gt; {\n            try {\n                String[] command = new String[]{&quot;env&quot;, &quot;bash&quot;, &quot;-c&quot;, &quot;setsid nohup &quot; + String.format(&quot;/home/ec2-user/config/linux-update-script.sh&quot; + &quot; %s %s&quot;, LinuxUpdateTask.SYSTEM_UPGRADE, &quot;2023.0.20230503&quot;) + &quot;  &gt;/dev/null 2&gt;&amp;1 &lt;/dev/null &amp;&quot;}; \n                Process process = new ProcessBuilder(command).start();\n                process.waitFor();\n            } catch (IOException | InterruptedException e) {\n                e.printStackTrace();\n            }\n        }).start(); \n</code></pre>\n<p>This command calls <code>setsid</code> and <code>nohup</code> which should detach the process from the parent process that spawned it. I'm also running the command in a separate thread. But despite using <code>setsid</code> the process is still killed when the java program is terminated.</p>\n<p>I've solved this problem by running the update script via a systemd service. The java program calls this service which in turn calls the bash file and the java program terminates without terminating the bash file process.</p>\n<p>But i want to know if there is any way i could do this without having to use a systemd service. Are there any JVM settings that i could enable or disable to prevent the daemon process from being terminated when the spawning java program terminates?</p>\n"},{"tags":["java","executorservice","runnable","rate-limiting"],"owner":{"account_id":2339705,"reputation":1133,"user_id":2052584,"accept_rate":75,"display_name":"MrSnrub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683258011,"creation_date":1683258011,"question_id":76178707,"body_markdown":"I&#39;m writing an event handler that must trigger some downstream update process, which is currently done by dropping a `Runnable` instance into an `ExecutorService` (`execute`).\r\n\r\nThe challenge is: The event might occur one time in an hour (which is fine), but might also occur 100 times in a few seconds.\r\n\r\nIf an event occurs, the downstream process _must_ be invoked _afterwards_ to keep a data structure up-to-date. So it&#39;s not an option to say _&quot;(now()-previousEventTime) &lt; threshold ==&gt; don&#39;t do it&quot;_. Because the latest event might have changed _everything_ although it was only 2 seconds later than the previous one.\r\n\r\nBut on the other hand, it was no big thing to defer the downstream process for a few seconds (e.g. 10-30 seconds), after an event has happened. \r\n\r\nI&#39;m thinking of something like this in pseudo-code:\r\n\r\n    private void onEvent() {\r\n        if( isRunnableAlreadyPendingToBeExecuted() ) return;\r\n        executeDeferred( updateProcessRunnable, 10, TimeUnit.SECONDS );\r\n    }\r\n\r\nSee this example of a sequence of events: \r\n\r\n* t+0sec: Event A -&gt; Runnable queued to be run in 10 seconds.\r\n* t+1sec: Event B -&gt; nothing happens, as runnable already pending.\r\n* t+8sec: Event C -&gt; nothing happens, as runnable already pending.\r\n* t+10sec: (deferred runnable is executed.)\r\n* t+10.5sec: Event D -&gt; Next runnable queued to be run in 10 seconds.\r\n\r\nHow could this be implemented in pure Java (up to 17), without third-party libraries?\r\n","title":"Deferred, rate limited Runnable execution","body":"<p>I'm writing an event handler that must trigger some downstream update process, which is currently done by dropping a <code>Runnable</code> instance into an <code>ExecutorService</code> (<code>execute</code>).</p>\n<p>The challenge is: The event might occur one time in an hour (which is fine), but might also occur 100 times in a few seconds.</p>\n<p>If an event occurs, the downstream process <em>must</em> be invoked <em>afterwards</em> to keep a data structure up-to-date. So it's not an option to say <em>&quot;(now()-previousEventTime) &lt; threshold ==&gt; don't do it&quot;</em>. Because the latest event might have changed <em>everything</em> although it was only 2 seconds later than the previous one.</p>\n<p>But on the other hand, it was no big thing to defer the downstream process for a few seconds (e.g. 10-30 seconds), after an event has happened.</p>\n<p>I'm thinking of something like this in pseudo-code:</p>\n<pre><code>private void onEvent() {\n    if( isRunnableAlreadyPendingToBeExecuted() ) return;\n    executeDeferred( updateProcessRunnable, 10, TimeUnit.SECONDS );\n}\n</code></pre>\n<p>See this example of a sequence of events:</p>\n<ul>\n<li>t+0sec: Event A -&gt; Runnable queued to be run in 10 seconds.</li>\n<li>t+1sec: Event B -&gt; nothing happens, as runnable already pending.</li>\n<li>t+8sec: Event C -&gt; nothing happens, as runnable already pending.</li>\n<li>t+10sec: (deferred runnable is executed.)</li>\n<li>t+10.5sec: Event D -&gt; Next runnable queued to be run in 10 seconds.</li>\n</ul>\n<p>How could this be implemented in pure Java (up to 17), without third-party libraries?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","netflix-zuul"],"owner":{"account_id":17622470,"reputation":1,"user_id":12788113,"display_name":"bruno"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683257294,"creation_date":1683257294,"question_id":76178658,"body_markdown":"I&#39;ve been trying to figure this out for days and getting really crazy. \r\n\r\nI have two microservices in spring cloud, one working as a gateway with zuul, running at localhost:8090, and the other runs at localhost:8002. This one hosts an endpoint which runs good if I hit directly to this microservice:\r\n\r\n\r\n[Success case](https://i.stack.imgur.com/TPYaZ.png)\r\n\r\nHowever, if I try to perform the same against zuul gateway (this microservice also works as authorization server) the result is:\r\n\r\n[Failing case](https://i.stack.imgur.com/mSF4v.png)\r\n\r\nFiles of interest in zuul gateway microservice:\r\n\r\npom.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.contractar&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;microservicio-gateway&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;microservicio-gateway&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;19&lt;/java.version&gt;\r\n\t\t &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\r\n\t\t &lt;spring-cloud.version&gt;2022.0.2&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-zuul&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.0.RELEASE&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security.oauth&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-oauth2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.8.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;6.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;6.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.11.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;    \r\n            \t\t&lt;mainClass&gt;com.contractar.microserviciogateway.MicroservicioGatewayApplication&lt;/mainClass&gt;\r\n        \t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;repackage&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;classifier&gt;exec&lt;/classifier&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n        \t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n      \t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nMain class:\r\n\r\n\r\n```\r\npackage com.contractar.microserviciogateway;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\r\nimport org.springframework.cloud.netflix.zuul.EnableZuulProxy;\r\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableAuthorizationServer;\r\n\r\n@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\r\n@EnableZuulProxy\r\npublic class MicroservicioGatewayApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(MicroservicioGatewayApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\napplication.properties:\r\n\r\n\r\n```\r\nspring.application.name=microservicio-gateway\r\nserver.port=8090\r\n\r\napp.security.jwt.keystore-location=keys/keystore.jks\r\napp.security.jwt.keystore-password=contractar\r\napp.security.jwt.key-alias=keyAlias\r\napp.security.jwt.private-key-passphrase=contractar\r\n\r\nzuul.ignored-services=&#39;*&#39;\r\n\r\nzuul.routes.usuarios.service-id=microservicio-usuario\r\nzuul.routes.microservicio-usuario.path=/usuarios/**\r\nzuul.routes.microservicio-usuario.url=http://localhost:8002\r\n\r\nhystrix.command.default.execution.isolation.thread.timeoutInMilliseconds: 90000\r\nribbon.ConnectTimeout: 9000\r\nribbon.ReadTimeout: 30000\r\n\r\nribbon.eureka.enabled=false\r\n\r\n#MOVER DESPUES ESTO A AMBIENTE DE DEV\r\nlogging.level.org.springframework.security=TRACE\r\n\r\nmanagement.endpoints.web.exposure.include=*\r\n```\r\n\r\nSecurity config:\r\n\r\n```\r\npackage com.contractar.microserviciogateway.security;\r\n\r\nimport java.util.Arrays;\r\n\r\nimport org.springframework.boot.web.servlet.FilterRegistrationBean;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.Ordered;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;\r\nimport org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableResourceServer;\r\nimport org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfigurerAdapter;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\nimport org.springframework.web.cors.CorsConfiguration;\r\nimport org.springframework.web.cors.CorsConfigurationSource;\r\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\r\nimport org.springframework.web.filter.CorsFilter;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig{\r\n\r\n\t@Bean\r\n\tpublic FilterRegistrationBean&lt;CorsFilter&gt; corsFilter() {\r\n\t\tFilterRegistrationBean&lt;CorsFilter&gt; bean = new FilterRegistrationBean&lt;CorsFilter&gt;(\r\n\t\t\t\tnew CorsFilter(corsConfigurationSource()));\r\n\t\tbean.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n\t\treturn bean;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic CorsConfigurationSource corsConfigurationSource() {\r\n\t\tCorsConfiguration corsConfig = new CorsConfiguration();\r\n\t\tcorsConfig.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\r\n\t\tcorsConfig.setAllowedMethods(Arrays.asList(&quot;POST&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n\t\tcorsConfig.setAllowCredentials(true);\r\n\t\tcorsConfig.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-type&quot;));\r\n\r\n\t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n\t\tsource.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\r\n\r\n\t\treturn source;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\r\n\t\thttp.formLogin().usernameParameter(&quot;email&quot;);\r\n\r\n\t\thttp.headers().httpStrictTransportSecurity().disable();\r\n\r\n\t\thttp.cors().configurationSource(corsConfigurationSource()).and().csrf().disable().sessionManagement()\r\n\t\t\t\t.sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeHttpRequests(\r\n\t\t\t\t(requests) -&gt; requests.requestMatchers(new AntPathRequestMatcher(&quot;/usuarios/**&quot;), new AntPathRequestMatcher(&quot;/login&quot;),\r\n\t\t\t\tnew AntPathRequestMatcher(&quot;/error&quot;))\r\n\t\t\t\t.permitAll().anyRequest().authenticated()\r\n\t\t\t\t)\r\n\t\t.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\r\n\t\treturn http.build();\r\n\r\n\t}\r\n\t\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring().requestMatchers(&quot;/error&quot;);\r\n    }\r\n}\r\n```\r\n\r\nFinally, the target endpoint is defined as follows in it&#39;s microservice:\r\n\r\n\r\n```\r\npackage com.contractar.microserviciousuario.controllers;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.contractar.microserviciousuario.models.Cliente;\r\nimport com.contractar.microserviciousuario.models.Proveedor;\r\nimport com.contractar.microserviciousuario.models.Usuario;\r\nimport com.contractar.microserviciousuario.services.UsuarioService;\r\nimport com.contractar.serviciocommons.proveedores.ProveedorType;\r\n\r\nimport jakarta.validation.Valid;\r\n\r\n@RestController\r\npublic class UsuarioController {\r\n    @Autowired\r\n    private UsuarioService usuarioService;\r\n\r\n    @PostMapping(&quot;/usuarios&quot;)\r\n    public ResponseEntity&lt;Usuario&gt; crearUsuario(@RequestBody @Valid Usuario usuario) {\r\n        Usuario createdUsuario =  usuarioService.create(usuario); \r\n        return new ResponseEntity&lt;Usuario&gt;(createdUsuario, HttpStatus.CREATED);\r\n    }\r\n\r\n    @PostMapping(&quot;/usuarios/proveedor&quot;)\r\n    public ResponseEntity&lt;Proveedor&gt; crearProveedor(@RequestBody @Valid Proveedor usuario,\r\n         @RequestParam(required = true) ProveedorType proveedorType) {\r\n        Proveedor createdUsuario =  usuarioService.createProveedor(usuario, proveedorType); \r\n        return new ResponseEntity&lt;Proveedor&gt;(createdUsuario, HttpStatus.CREATED);\r\n    }\r\n\r\n    @PostMapping(&quot;/usuarios/cliente&quot;)\r\n    public ResponseEntity&lt;Cliente&gt; crearCliente(@RequestBody @Valid Cliente usuario) {\r\n        Cliente createdUsuario =  usuarioService.createCliente(usuario); \r\n        return new ResponseEntity&lt;Cliente&gt;(createdUsuario, HttpStatus.CREATED);\r\n    }\r\n    \r\n    @GetMapping(&quot;/usuarios&quot;)\r\n    public ResponseEntity&lt;Usuario&gt; findByEmail(@RequestParam(required = true) String email) {\r\n        Usuario usuario = usuarioService.findByEmail(email);\r\n        return new ResponseEntity&lt;Usuario&gt;(usuario, HttpStatus.OK);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI&#39;ve checked zuul routing but didn&#39;t notice anything wrong. This was working well until I implemented the authorizarion layer.","title":"Why this public endpoints returns 404?","body":"<p>I've been trying to figure this out for days and getting really crazy.</p>\n<p>I have two microservices in spring cloud, one working as a gateway with zuul, running at localhost:8090, and the other runs at localhost:8002. This one hosts an endpoint which runs good if I hit directly to this microservice:</p>\n<p><a href=\"https://i.stack.imgur.com/TPYaZ.png\" rel=\"nofollow noreferrer\">Success case</a></p>\n<p>However, if I try to perform the same against zuul gateway (this microservice also works as authorization server) the result is:</p>\n<p><a href=\"https://i.stack.imgur.com/mSF4v.png\" rel=\"nofollow noreferrer\">Failing case</a></p>\n<p>Files of interest in zuul gateway microservice:</p>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.contractar&lt;/groupId&gt;\n    &lt;artifactId&gt;microservicio-gateway&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;microservicio-gateway&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n         &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\n         &lt;spring-cloud.version&gt;2022.0.2&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-zuul&lt;/artifactId&gt;\n            &lt;version&gt;2.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security.oauth&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2&lt;/artifactId&gt;\n            &lt;version&gt;2.3.8.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\n            &lt;version&gt;6.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\n            &lt;version&gt;6.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\n            &lt;version&gt;3.11.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;    \n                    &lt;mainClass&gt;com.contractar.microserviciogateway.MicroservicioGatewayApplication&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;classifier&gt;exec&lt;/classifier&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>Main class:</p>\n<pre><code>package com.contractar.microserviciogateway;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\nimport org.springframework.cloud.netflix.zuul.EnableZuulProxy;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableAuthorizationServer;\n\n@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\n@EnableZuulProxy\npublic class MicroservicioGatewayApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MicroservicioGatewayApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>application.properties:</p>\n<pre><code>spring.application.name=microservicio-gateway\nserver.port=8090\n\napp.security.jwt.keystore-location=keys/keystore.jks\napp.security.jwt.keystore-password=contractar\napp.security.jwt.key-alias=keyAlias\napp.security.jwt.private-key-passphrase=contractar\n\nzuul.ignored-services='*'\n\nzuul.routes.usuarios.service-id=microservicio-usuario\nzuul.routes.microservicio-usuario.path=/usuarios/**\nzuul.routes.microservicio-usuario.url=http://localhost:8002\n\nhystrix.command.default.execution.isolation.thread.timeoutInMilliseconds: 90000\nribbon.ConnectTimeout: 9000\nribbon.ReadTimeout: 30000\n\nribbon.eureka.enabled=false\n\n#MOVER DESPUES ESTO A AMBIENTE DE DEV\nlogging.level.org.springframework.security=TRACE\n\nmanagement.endpoints.web.exposure.include=*\n</code></pre>\n<p>Security config:</p>\n<pre><code>package com.contractar.microserviciogateway.security;\n\nimport java.util.Arrays;\n\nimport org.springframework.boot.web.servlet.FilterRegistrationBean;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.Ordered;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;\nimport org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableResourceServer;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfigurerAdapter;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\nimport org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.CorsConfigurationSource;\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\nimport org.springframework.web.filter.CorsFilter;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig{\n\n    @Bean\n    public FilterRegistrationBean&lt;CorsFilter&gt; corsFilter() {\n        FilterRegistrationBean&lt;CorsFilter&gt; bean = new FilterRegistrationBean&lt;CorsFilter&gt;(\n                new CorsFilter(corsConfigurationSource()));\n        bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\n        return bean;\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration corsConfig = new CorsConfiguration();\n        corsConfig.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\n        corsConfig.setAllowedMethods(Arrays.asList(&quot;POST&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n        corsConfig.setAllowCredentials(true);\n        corsConfig.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-type&quot;));\n\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\n\n        return source;\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n        http.formLogin().usernameParameter(&quot;email&quot;);\n\n        http.headers().httpStrictTransportSecurity().disable();\n\n        http.cors().configurationSource(corsConfigurationSource()).and().csrf().disable().sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeHttpRequests(\n                (requests) -&gt; requests.requestMatchers(new AntPathRequestMatcher(&quot;/usuarios/**&quot;), new AntPathRequestMatcher(&quot;/login&quot;),\n                new AntPathRequestMatcher(&quot;/error&quot;))\n                .permitAll().anyRequest().authenticated()\n                )\n        .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n\n        return http.build();\n\n    }\n    \n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.ignoring().requestMatchers(&quot;/error&quot;);\n    }\n}\n</code></pre>\n<p>Finally, the target endpoint is defined as follows in it's microservice:</p>\n<pre><code>package com.contractar.microserviciousuario.controllers;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.contractar.microserviciousuario.models.Cliente;\nimport com.contractar.microserviciousuario.models.Proveedor;\nimport com.contractar.microserviciousuario.models.Usuario;\nimport com.contractar.microserviciousuario.services.UsuarioService;\nimport com.contractar.serviciocommons.proveedores.ProveedorType;\n\nimport jakarta.validation.Valid;\n\n@RestController\npublic class UsuarioController {\n    @Autowired\n    private UsuarioService usuarioService;\n\n    @PostMapping(&quot;/usuarios&quot;)\n    public ResponseEntity&lt;Usuario&gt; crearUsuario(@RequestBody @Valid Usuario usuario) {\n        Usuario createdUsuario =  usuarioService.create(usuario); \n        return new ResponseEntity&lt;Usuario&gt;(createdUsuario, HttpStatus.CREATED);\n    }\n\n    @PostMapping(&quot;/usuarios/proveedor&quot;)\n    public ResponseEntity&lt;Proveedor&gt; crearProveedor(@RequestBody @Valid Proveedor usuario,\n         @RequestParam(required = true) ProveedorType proveedorType) {\n        Proveedor createdUsuario =  usuarioService.createProveedor(usuario, proveedorType); \n        return new ResponseEntity&lt;Proveedor&gt;(createdUsuario, HttpStatus.CREATED);\n    }\n\n    @PostMapping(&quot;/usuarios/cliente&quot;)\n    public ResponseEntity&lt;Cliente&gt; crearCliente(@RequestBody @Valid Cliente usuario) {\n        Cliente createdUsuario =  usuarioService.createCliente(usuario); \n        return new ResponseEntity&lt;Cliente&gt;(createdUsuario, HttpStatus.CREATED);\n    }\n    \n    @GetMapping(&quot;/usuarios&quot;)\n    public ResponseEntity&lt;Usuario&gt; findByEmail(@RequestParam(required = true) String email) {\n        Usuario usuario = usuarioService.findByEmail(email);\n        return new ResponseEntity&lt;Usuario&gt;(usuario, HttpStatus.OK);\n    }\n}\n</code></pre>\n<p>I've checked zuul routing but didn't notice anything wrong. This was working well until I implemented the authorizarion layer.</p>\n"},{"tags":["java","mongodb","mongodb-query"],"comments":[{"owner":{"account_id":10907337,"reputation":38824,"user_id":8017690,"display_name":"Yong Shun"},"score":2,"creation_date":1683252535,"post_id":76178393,"comment_id":134342057,"body_markdown":"Actually you can query the element in array with `{ imageIds: ObjectId(&quot;6335f3c338a79a4377aea064&quot;) }` without `$elemMatch` operator.","body":"Actually you can query the element in array with <code>{ imageIds: ObjectId(&quot;6335f3c338a79a4377aea064&quot;) }</code> without <code>$elemMatch</code> operator."},{"owner":{"account_id":3615835,"reputation":1759,"user_id":3015723,"accept_rate":100,"display_name":"Snappawapa"},"score":1,"creation_date":1683254493,"post_id":76178393,"comment_id":134342226,"body_markdown":"Huh, unintuitive, but seems to work. If you make an answer I will mark it","body":"Huh, unintuitive, but seems to work. If you make an answer I will mark it"}],"answers":[{"tags":[],"owner":{"account_id":10907337,"reputation":38824,"user_id":8017690,"display_name":"Yong Shun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683256764,"creation_date":1683256764,"answer_id":76178622,"question_id":76178393,"body_markdown":"As mentioned in the comment, you perform the query for the document with the array field containing a specific element without the `$elemMatch` operator.\r\n\r\n```\r\n{ imageIds: ObjectId(&quot;6335f3c338a79a4377aea064&quot;) }\r\n```\r\n\r\nReference: [Query an Array for an Element][1]\r\n\r\n[1]: https://www.mongodb.com/docs/manual/tutorial/query-arrays/#query-an-array-for-an-element","title":"How to recreate bson query with `elemMatch`","body":"<p>As mentioned in the comment, you perform the query for the document with the array field containing a specific element without the <code>$elemMatch</code> operator.</p>\n<pre><code>{ imageIds: ObjectId(&quot;6335f3c338a79a4377aea064&quot;) }\n</code></pre>\n<p>Reference: <a href=\"https://www.mongodb.com/docs/manual/tutorial/query-arrays/#query-an-array-for-an-element\" rel=\"nofollow noreferrer\">Query an Array for an Element</a></p>\n"}],"owner":{"account_id":3615835,"reputation":1759,"user_id":3015723,"accept_rate":100,"display_name":"Snappawapa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76178622,"answer_count":1,"score":0,"last_activity_date":1683256764,"creation_date":1683251846,"question_id":76178393,"body_markdown":"For reference, example object schema\r\n\r\n```json\r\n{\r\n  &quot;some&quot;: &quot;&quot;,\r\n  &quot;field&quot;: &quot;&quot;,\r\n  &quot;imageIds&quot;: [\r\n    &lt;objectIds&gt;\r\n  ]\r\n}\r\n```\r\n\r\nHopefully an easy one, I am trying to recreate the following bson query using Java:\r\n\r\n`{ &quot;imageIds&quot;: {$elemMatch: {$eq:ObjectId(&#39;6335f3c338a79a4377aea064&#39;)}} }`\r\n\r\nWhen querying in MongoDb compass, this works as intended (Returning objects with given ObjectId in the `imageIds` array)\r\n\r\n\r\nWhat I think this should look like is:\r\n\r\n`elemMatch(&quot;imageIds&quot;, eq(new ObjectId(&quot;6335f3c338a79a4377aea064&quot;)))`\r\n\r\nBut this returns nothing. Debugging and using `toBsonDocument().toString()`, it looks like drastically different bson than I was expecting:\r\n\r\n`{&quot;imageIds&quot;: {&quot;$elemMatch&quot;: {&quot;_id&quot;: {&quot;$oid&quot;: &quot;6335f3c338a79a4377aea064&quot;}}}}`\r\n\r\nAm I missing something? ","title":"How to recreate bson query with `elemMatch`","body":"<p>For reference, example object schema</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;some&quot;: &quot;&quot;,\n  &quot;field&quot;: &quot;&quot;,\n  &quot;imageIds&quot;: [\n    &lt;objectIds&gt;\n  ]\n}\n</code></pre>\n<p>Hopefully an easy one, I am trying to recreate the following bson query using Java:</p>\n<p><code>{ &quot;imageIds&quot;: {$elemMatch: {$eq:ObjectId('6335f3c338a79a4377aea064')}} }</code></p>\n<p>When querying in MongoDb compass, this works as intended (Returning objects with given ObjectId in the <code>imageIds</code> array)</p>\n<p>What I think this should look like is:</p>\n<p><code>elemMatch(&quot;imageIds&quot;, eq(new ObjectId(&quot;6335f3c338a79a4377aea064&quot;)))</code></p>\n<p>But this returns nothing. Debugging and using <code>toBsonDocument().toString()</code>, it looks like drastically different bson than I was expecting:</p>\n<p><code>{&quot;imageIds&quot;: {&quot;$elemMatch&quot;: {&quot;_id&quot;: {&quot;$oid&quot;: &quot;6335f3c338a79a4377aea064&quot;}}}}</code></p>\n<p>Am I missing something?</p>\n"},{"tags":["java","android","firebase-realtime-database","firebase-security"],"answers":[{"tags":[],"owner":{"account_id":25871104,"reputation":51,"user_id":19601969,"display_name":"phanz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683254557,"creation_date":1683254557,"answer_id":76178517,"question_id":76178475,"body_markdown":"The google-services.json file needed to be downloaded and added to the app root directory. The error &quot;DatabaseError: Permission denied&quot; no longer appears.","title":"i want to get data &quot;createdAt&quot; and &quot;imageURL&quot; for every user but error &quot;Listen at /Users failed: DatabaseError: Permission denied&quot;","body":"<p>The google-services.json file needed to be downloaded and added to the app root directory. The error &quot;DatabaseError: Permission denied&quot; no longer appears.</p>\n"},{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683256519,"creation_date":1683256519,"answer_id":76178608,"question_id":76178475,"body_markdown":"Your security rules grant access to `/Users/$uid` to any logged in user. But your code tries to read from `/Users` directly, and the rules don&#39;t provide anyone read access there.\r\n\r\nIf you want to be able to read data with your current security rules, you need to change your code to read data from a specific user.\r\n\r\nIf you want to allow your current code to work, you need to allow the user to read the entire `/Users` node, so move the `&quot;.read&quot;` rules that you have one level up.\r\n```\r\n{\r\n  &quot;rules&quot;: {\r\n    &quot;Users&quot;: {\r\n      &quot;.read&quot;: &quot;auth.uid != null&quot;,\r\n      &quot;$uid&quot;: {\r\n        ...\r\n      }\r\n    }\r\n  }\r\n}\r\n```","title":"i want to get data &quot;createdAt&quot; and &quot;imageURL&quot; for every user but error &quot;Listen at /Users failed: DatabaseError: Permission denied&quot;","body":"<p>Your security rules grant access to <code>/Users/$uid</code> to any logged in user. But your code tries to read from <code>/Users</code> directly, and the rules don't provide anyone read access there.</p>\n<p>If you want to be able to read data with your current security rules, you need to change your code to read data from a specific user.</p>\n<p>If you want to allow your current code to work, you need to allow the user to read the entire <code>/Users</code> node, so move the <code>&quot;.read&quot;</code> rules that you have one level up.</p>\n<pre><code>{\n  &quot;rules&quot;: {\n    &quot;Users&quot;: {\n      &quot;.read&quot;: &quot;auth.uid != null&quot;,\n      &quot;$uid&quot;: {\n        ...\n      }\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":25618608,"reputation":23,"user_id":19390835,"display_name":"Alhe Mora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76178608,"answer_count":2,"score":0,"last_activity_date":1683256519,"creation_date":1683253699,"question_id":76178475,"body_markdown":"I want to retrieve data &quot;createdAt&quot; and &quot;imageURL&quot; for every user who has just registered to RecylerView but is having problems with:\r\n\r\n&gt; Listen at /Users failed: DatabaseError: Permission denied\r\n\r\n\r\n    DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference(REF_USERS);\r\n    Calendar calendar = Calendar.getInstance();\r\n    calendar.add(Calendar.DAY_OF_MONTH, -10);\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH&quot;);\r\n    String dateSevenDaysAgo = dateFormat.format(calendar.getTime());\r\n    Query query = databaseRef.orderByChild(EXTRA_CREATED_AT).startAt(dateSevenDaysAgo);\r\n    query.addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\r\n                User user = dataSnapshot.getValue(User.class);\r\n                assert user != null;\r\n                userList.add(user);\r\n                userAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot dataSnapshot) {\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n            }\r\n        });\r\n\r\n**Firebase Rule**\r\n  [![enter image description here][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LSOkC.png\r\n","title":"i want to get data &quot;createdAt&quot; and &quot;imageURL&quot; for every user but error &quot;Listen at /Users failed: DatabaseError: Permission denied&quot;","body":"<p>I want to retrieve data &quot;createdAt&quot; and &quot;imageURL&quot; for every user who has just registered to RecylerView but is having problems with:</p>\n<blockquote>\n<p>Listen at /Users failed: DatabaseError: Permission denied</p>\n</blockquote>\n<pre><code>DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference(REF_USERS);\nCalendar calendar = Calendar.getInstance();\ncalendar.add(Calendar.DAY_OF_MONTH, -10);\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH&quot;);\nString dateSevenDaysAgo = dateFormat.format(calendar.getTime());\nQuery query = databaseRef.orderByChild(EXTRA_CREATED_AT).startAt(dateSevenDaysAgo);\nquery.addChildEventListener(new ChildEventListener() {\n        @Override\n        public void onChildAdded(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\n            User user = dataSnapshot.getValue(User.class);\n            assert user != null;\n            userList.add(user);\n            userAdapter.notifyDataSetChanged();\n        }\n\n        @Override\n        public void onChildChanged(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\n        }\n\n        @Override\n        public void onChildRemoved(@NonNull DataSnapshot dataSnapshot) {\n        }\n\n        @Override\n        public void onChildMoved(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n        }\n    });\n</code></pre>\n<p><strong>Firebase Rule</strong>\n<a href=\"https://i.stack.imgur.com/LSOkC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LSOkC.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":25886433,"reputation":27,"user_id":19614436,"display_name":"Jae"},"score":0,"creation_date":1683245269,"post_id":76178052,"comment_id":134341409,"body_markdown":"`Type listType = new TypeToken&lt;List&lt;Users&gt;&gt;(){}.getType();`\n`List&lt;User&gt; users = gson.fromJson(jsonOutput, listType);`\nwas using something like this, but it cannot handle the two separate data types.","body":"<code>Type listType = new TypeToken&lt;List&lt;Users&gt;&gt;(){}.getType();</code> <code>List&lt;User&gt; users = gson.fromJson(jsonOutput, listType);</code> was using something like this, but it cannot handle the two separate data types."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1683249390,"post_id":76178052,"comment_id":134341771,"body_markdown":"What is the type you would like to deserialize into?","body":"What is the type you would like to deserialize into?"}],"answers":[{"tags":[],"owner":{"account_id":7406747,"reputation":416,"user_id":5635476,"display_name":"levangode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683250878,"creation_date":1683250878,"answer_id":76178338,"question_id":76178052,"body_markdown":"Add the POJO classes:\r\n\r\n    public class Example {\r\n    \r\n        @SerializedName(&quot;users&quot;)\r\n        @Expose\r\n        private List&lt;User&gt; users;\r\n        @SerializedName(&quot;pokemon&quot;)\r\n        @Expose\r\n        private List&lt;Pokemon&gt; pokemon;\r\n    \r\n        public List&lt;User&gt; getUsers() {\r\n            return users;\r\n        }\r\n    \r\n        public void setUsers(List&lt;User&gt; users) {\r\n            this.users = users;\r\n        }\r\n    \r\n        public List&lt;Pokemon&gt; getPokemon() {\r\n            return pokemon;\r\n        }\r\n    \r\n        public void setPokemon(List&lt;Pokemon&gt; pokemon) {\r\n            this.pokemon = pokemon;\r\n        }\r\n    }\r\n\r\n\r\n    public class Pokemon {\r\n    \r\n        @SerializedName(&quot;userId&quot;)\r\n        @Expose\r\n        private Integer userId;\r\n        @SerializedName(&quot;name&quot;)\r\n        @Expose\r\n        private String name;\r\n        @SerializedName(&quot;frontImg&quot;)\r\n        @Expose\r\n        private String frontImg;\r\n        @SerializedName(&quot;backImg&quot;)\r\n        @Expose\r\n        private String backImg;\r\n        @SerializedName(&quot;type&quot;)\r\n        @Expose\r\n        private String type;\r\n        @SerializedName(&quot;hp&quot;)\r\n        @Expose\r\n        private Integer hp;\r\n        @SerializedName(&quot;id&quot;)\r\n        @Expose\r\n        private Integer id;\r\n    \r\n        public Integer getUserId() {\r\n            return userId;\r\n        }\r\n    \r\n        public void setUserId(Integer userId) {\r\n            this.userId = userId;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getFrontImg() {\r\n            return frontImg;\r\n        }\r\n    \r\n        public void setFrontImg(String frontImg) {\r\n            this.frontImg = frontImg;\r\n        }\r\n    \r\n        public String getBackImg() {\r\n            return backImg;\r\n        }\r\n    \r\n        public void setBackImg(String backImg) {\r\n            this.backImg = backImg;\r\n        }\r\n    \r\n        public String getType() {\r\n            return type;\r\n        }\r\n    \r\n        public void setType(String type) {\r\n            this.type = type;\r\n        }\r\n    \r\n        public Integer getHp() {\r\n            return hp;\r\n        }\r\n    \r\n        public void setHp(Integer hp) {\r\n            this.hp = hp;\r\n        }\r\n    \r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n    }\r\n\r\n    public class User {\r\n    \r\n        @SerializedName(&quot;id&quot;)\r\n        @Expose\r\n        private Integer id;\r\n        @SerializedName(&quot;name&quot;)\r\n        @Expose\r\n        private String name;\r\n        @SerializedName(&quot;email&quot;)\r\n        @Expose\r\n        private String email;\r\n    \r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n    \r\n    }\r\n\r\nAnd then call `Example e = new Gson().fromJson(json, Example.class);`","title":"java deserialize multiple arrays","body":"<p>Add the POJO classes:</p>\n<pre><code>public class Example {\n\n    @SerializedName(&quot;users&quot;)\n    @Expose\n    private List&lt;User&gt; users;\n    @SerializedName(&quot;pokemon&quot;)\n    @Expose\n    private List&lt;Pokemon&gt; pokemon;\n\n    public List&lt;User&gt; getUsers() {\n        return users;\n    }\n\n    public void setUsers(List&lt;User&gt; users) {\n        this.users = users;\n    }\n\n    public List&lt;Pokemon&gt; getPokemon() {\n        return pokemon;\n    }\n\n    public void setPokemon(List&lt;Pokemon&gt; pokemon) {\n        this.pokemon = pokemon;\n    }\n}\n\n\npublic class Pokemon {\n\n    @SerializedName(&quot;userId&quot;)\n    @Expose\n    private Integer userId;\n    @SerializedName(&quot;name&quot;)\n    @Expose\n    private String name;\n    @SerializedName(&quot;frontImg&quot;)\n    @Expose\n    private String frontImg;\n    @SerializedName(&quot;backImg&quot;)\n    @Expose\n    private String backImg;\n    @SerializedName(&quot;type&quot;)\n    @Expose\n    private String type;\n    @SerializedName(&quot;hp&quot;)\n    @Expose\n    private Integer hp;\n    @SerializedName(&quot;id&quot;)\n    @Expose\n    private Integer id;\n\n    public Integer getUserId() {\n        return userId;\n    }\n\n    public void setUserId(Integer userId) {\n        this.userId = userId;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getFrontImg() {\n        return frontImg;\n    }\n\n    public void setFrontImg(String frontImg) {\n        this.frontImg = frontImg;\n    }\n\n    public String getBackImg() {\n        return backImg;\n    }\n\n    public void setBackImg(String backImg) {\n        this.backImg = backImg;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n\n    public Integer getHp() {\n        return hp;\n    }\n\n    public void setHp(Integer hp) {\n        this.hp = hp;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n}\n\npublic class User {\n\n    @SerializedName(&quot;id&quot;)\n    @Expose\n    private Integer id;\n    @SerializedName(&quot;name&quot;)\n    @Expose\n    private String name;\n    @SerializedName(&quot;email&quot;)\n    @Expose\n    private String email;\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n}\n</code></pre>\n<p>And then call <code>Example e = new Gson().fromJson(json, Example.class);</code></p>\n"},{"tags":[],"owner":{"account_id":17531877,"reputation":1654,"user_id":12715723,"display_name":"Jordy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683251827,"creation_date":1683251827,"answer_id":76178392,"question_id":76178052,"body_markdown":"I suggest using [Jackson](https://github.com/FasterXML/jackson) to read JSON strings into Java Object without defining a suitable class.\r\n```java\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.SerializationFeature;\r\nimport java.io.IOException;\r\n\r\npublic class JavaApplication {\r\n    public static void main(String[] args) throws IOException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n\r\n        String json = &quot;{\\&quot;users\\&quot;:[{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Ash\\&quot;,\\&quot;email\\&quot;:\\&quot;ashketchum@kanto.com\\&quot;},{\\&quot;id\\&quot;:2,\\&quot;name\\&quot;:\\&quot;Gary\\&quot;,\\&quot;email\\&quot;:\\&quot;garyoak@kanto.com\\&quot;}],\\&quot;pokemon\\&quot;:[{\\&quot;userId\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Ember\\&quot;,\\&quot;frontImg\\&quot;:\\&quot;/images/pokemon/local-mon/ember/front.png\\&quot;,\\&quot;backImg\\&quot;:\\&quot;/images/pokemon/local-mon/ember/back.png\\&quot;,\\&quot;type\\&quot;:\\&quot;fire\\&quot;,\\&quot;hp\\&quot;:100,\\&quot;id\\&quot;:1},{\\&quot;userId\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Draggy\\&quot;,\\&quot;frontImg\\&quot;:\\&quot;/images/pokemon/local-mon/dragon/front.png\\&quot;,\\&quot;backImg\\&quot;:\\&quot;/images/pokemon/local-mon/dragon/back.png\\&quot;,\\&quot;type\\&quot;:\\&quot;dragon\\&quot;,\\&quot;hp\\&quot;:100,\\&quot;id\\&quot;:2}]}&quot;;\r\n        JsonNode data = mapper.readTree(json);\r\n\r\n        System.out.println(mapper.writeValueAsString(data));\r\n        System.out.println(data.get(&quot;users&quot;));\r\n        System.out.println(data.get(&quot;users&quot;).get(0));\r\n        System.out.println(data.get(&quot;pokemon&quot;));\r\n        System.out.println(data.get(&quot;pokemon&quot;).get(0).get(&quot;name&quot;));\r\n    }\r\n}\r\n```\r\nThe output will be:\r\n```json\r\n{\r\n  &quot;users&quot; : [ {\r\n    &quot;id&quot; : 1,\r\n    &quot;name&quot; : &quot;Ash&quot;,\r\n    &quot;email&quot; : &quot;ashketchum@kanto.com&quot;\r\n  }, {\r\n    &quot;id&quot; : 2,\r\n    &quot;name&quot; : &quot;Gary&quot;,\r\n    &quot;email&quot; : &quot;garyoak@kanto.com&quot;\r\n  } ],\r\n  &quot;pokemon&quot; : [ {\r\n    &quot;userId&quot; : 1,\r\n    &quot;name&quot; : &quot;Ember&quot;,\r\n    &quot;frontImg&quot; : &quot;/images/pokemon/local-mon/ember/front.png&quot;,\r\n    &quot;backImg&quot; : &quot;/images/pokemon/local-mon/ember/back.png&quot;,\r\n    &quot;type&quot; : &quot;fire&quot;,\r\n    &quot;hp&quot; : 100,\r\n    &quot;id&quot; : 1\r\n  }, {\r\n    &quot;userId&quot; : 1,\r\n    &quot;name&quot; : &quot;Draggy&quot;,\r\n    &quot;frontImg&quot; : &quot;/images/pokemon/local-mon/dragon/front.png&quot;,\r\n    &quot;backImg&quot; : &quot;/images/pokemon/local-mon/dragon/back.png&quot;,\r\n    &quot;type&quot; : &quot;dragon&quot;,\r\n    &quot;hp&quot; : 100,\r\n    &quot;id&quot; : 2\r\n  } ]\r\n}\r\n[{&quot;id&quot;:1,&quot;name&quot;:&quot;Ash&quot;,&quot;email&quot;:&quot;ashketchum@kanto.com&quot;},{&quot;id&quot;:2,&quot;name&quot;:&quot;Gary&quot;,&quot;email&quot;:&quot;garyoak@kanto.com&quot;}]\r\n{&quot;id&quot;:1,&quot;name&quot;:&quot;Ash&quot;,&quot;email&quot;:&quot;ashketchum@kanto.com&quot;}\r\n[{&quot;userId&quot;:1,&quot;name&quot;:&quot;Ember&quot;,&quot;frontImg&quot;:&quot;/images/pokemon/local-mon/ember/front.png&quot;,&quot;backImg&quot;:&quot;/images/pokemon/local-mon/ember/back.png&quot;,&quot;type&quot;:&quot;fire&quot;,&quot;hp&quot;:100,&quot;id&quot;:1},{&quot;userId&quot;:1,&quot;name&quot;:&quot;Draggy&quot;,&quot;frontImg&quot;:&quot;/images/pokemon/local-mon/dragon/front.png&quot;,&quot;backImg&quot;:&quot;/images/pokemon/local-mon/dragon/back.png&quot;,&quot;type&quot;:&quot;dragon&quot;,&quot;hp&quot;:100,&quot;id&quot;:2}]\r\n&quot;Ember&quot;\r\n```\r\n","title":"java deserialize multiple arrays","body":"<p>I suggest using <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a> to read JSON strings into Java Object without defining a suitable class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport java.io.IOException;\n\npublic class JavaApplication {\n    public static void main(String[] args) throws IOException {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.enable(SerializationFeature.INDENT_OUTPUT);\n\n        String json = &quot;{\\&quot;users\\&quot;:[{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Ash\\&quot;,\\&quot;email\\&quot;:\\&quot;ashketchum@kanto.com\\&quot;},{\\&quot;id\\&quot;:2,\\&quot;name\\&quot;:\\&quot;Gary\\&quot;,\\&quot;email\\&quot;:\\&quot;garyoak@kanto.com\\&quot;}],\\&quot;pokemon\\&quot;:[{\\&quot;userId\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Ember\\&quot;,\\&quot;frontImg\\&quot;:\\&quot;/images/pokemon/local-mon/ember/front.png\\&quot;,\\&quot;backImg\\&quot;:\\&quot;/images/pokemon/local-mon/ember/back.png\\&quot;,\\&quot;type\\&quot;:\\&quot;fire\\&quot;,\\&quot;hp\\&quot;:100,\\&quot;id\\&quot;:1},{\\&quot;userId\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Draggy\\&quot;,\\&quot;frontImg\\&quot;:\\&quot;/images/pokemon/local-mon/dragon/front.png\\&quot;,\\&quot;backImg\\&quot;:\\&quot;/images/pokemon/local-mon/dragon/back.png\\&quot;,\\&quot;type\\&quot;:\\&quot;dragon\\&quot;,\\&quot;hp\\&quot;:100,\\&quot;id\\&quot;:2}]}&quot;;\n        JsonNode data = mapper.readTree(json);\n\n        System.out.println(mapper.writeValueAsString(data));\n        System.out.println(data.get(&quot;users&quot;));\n        System.out.println(data.get(&quot;users&quot;).get(0));\n        System.out.println(data.get(&quot;pokemon&quot;));\n        System.out.println(data.get(&quot;pokemon&quot;).get(0).get(&quot;name&quot;));\n    }\n}\n</code></pre>\n<p>The output will be:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;users&quot; : [ {\n    &quot;id&quot; : 1,\n    &quot;name&quot; : &quot;Ash&quot;,\n    &quot;email&quot; : &quot;ashketchum@kanto.com&quot;\n  }, {\n    &quot;id&quot; : 2,\n    &quot;name&quot; : &quot;Gary&quot;,\n    &quot;email&quot; : &quot;garyoak@kanto.com&quot;\n  } ],\n  &quot;pokemon&quot; : [ {\n    &quot;userId&quot; : 1,\n    &quot;name&quot; : &quot;Ember&quot;,\n    &quot;frontImg&quot; : &quot;/images/pokemon/local-mon/ember/front.png&quot;,\n    &quot;backImg&quot; : &quot;/images/pokemon/local-mon/ember/back.png&quot;,\n    &quot;type&quot; : &quot;fire&quot;,\n    &quot;hp&quot; : 100,\n    &quot;id&quot; : 1\n  }, {\n    &quot;userId&quot; : 1,\n    &quot;name&quot; : &quot;Draggy&quot;,\n    &quot;frontImg&quot; : &quot;/images/pokemon/local-mon/dragon/front.png&quot;,\n    &quot;backImg&quot; : &quot;/images/pokemon/local-mon/dragon/back.png&quot;,\n    &quot;type&quot; : &quot;dragon&quot;,\n    &quot;hp&quot; : 100,\n    &quot;id&quot; : 2\n  } ]\n}\n[{&quot;id&quot;:1,&quot;name&quot;:&quot;Ash&quot;,&quot;email&quot;:&quot;ashketchum@kanto.com&quot;},{&quot;id&quot;:2,&quot;name&quot;:&quot;Gary&quot;,&quot;email&quot;:&quot;garyoak@kanto.com&quot;}]\n{&quot;id&quot;:1,&quot;name&quot;:&quot;Ash&quot;,&quot;email&quot;:&quot;ashketchum@kanto.com&quot;}\n[{&quot;userId&quot;:1,&quot;name&quot;:&quot;Ember&quot;,&quot;frontImg&quot;:&quot;/images/pokemon/local-mon/ember/front.png&quot;,&quot;backImg&quot;:&quot;/images/pokemon/local-mon/ember/back.png&quot;,&quot;type&quot;:&quot;fire&quot;,&quot;hp&quot;:100,&quot;id&quot;:1},{&quot;userId&quot;:1,&quot;name&quot;:&quot;Draggy&quot;,&quot;frontImg&quot;:&quot;/images/pokemon/local-mon/dragon/front.png&quot;,&quot;backImg&quot;:&quot;/images/pokemon/local-mon/dragon/back.png&quot;,&quot;type&quot;:&quot;dragon&quot;,&quot;hp&quot;:100,&quot;id&quot;:2}]\n&quot;Ember&quot;\n</code></pre>\n"}],"owner":{"account_id":25886433,"reputation":27,"user_id":19614436,"display_name":"Jae"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76178392,"answer_count":2,"score":0,"last_activity_date":1683251827,"creation_date":1683244893,"question_id":76178052,"body_markdown":"I have the following json\r\n\r\n    {   &quot;users&quot;: [\r\n        {\r\n          &quot;id&quot;: 1,\r\n          &quot;name&quot;: &quot;Ash&quot;,\r\n          &quot;email&quot;: &quot;ashketchum@kanto.com&quot;\r\n        },\r\n        {\r\n          &quot;id&quot;: 2,\r\n          &quot;name&quot;: &quot;Gary&quot;,\r\n          &quot;email&quot;: &quot;garyoak@kanto.com&quot;\r\n        }],   \r\n    &quot;pokemon&quot;: [\r\n        {\r\n          &quot;userId&quot;: 1,\r\n          &quot;name&quot;: &quot;Ember&quot;,\r\n          &quot;frontImg&quot;: &quot;/images/pokemon/local-mon/ember/front.png&quot;,\r\n          &quot;backImg&quot;: &quot;/images/pokemon/local-mon/ember/back.png&quot;,\r\n          &quot;type&quot;: &quot;fire&quot;,\r\n          &quot;hp&quot;: 100,\r\n          &quot;id&quot;: 1\r\n        },\r\n        {\r\n          &quot;userId&quot;: 1,\r\n          &quot;name&quot;: &quot;Draggy&quot;,\r\n          &quot;frontImg&quot;: &quot;/images/pokemon/local-mon/dragon/front.png&quot;,\r\n          &quot;backImg&quot;: &quot;/images/pokemon/local-mon/dragon/back.png&quot;,\r\n          &quot;type&quot;: &quot;dragon&quot;,\r\n          &quot;hp&quot;: 100,\r\n          &quot;id&quot;: 2\r\n        }   ] }\r\n\r\nHow could I deserialize this into a single object or array containing both the users array of data and the pokemon array of data in Java? Preferably in gson but I&#39;m not opposed to changing libraries.\r\n","title":"java deserialize multiple arrays","body":"<p>I have the following json</p>\n<pre><code>{   &quot;users&quot;: [\n    {\n      &quot;id&quot;: 1,\n      &quot;name&quot;: &quot;Ash&quot;,\n      &quot;email&quot;: &quot;ashketchum@kanto.com&quot;\n    },\n    {\n      &quot;id&quot;: 2,\n      &quot;name&quot;: &quot;Gary&quot;,\n      &quot;email&quot;: &quot;garyoak@kanto.com&quot;\n    }],   \n&quot;pokemon&quot;: [\n    {\n      &quot;userId&quot;: 1,\n      &quot;name&quot;: &quot;Ember&quot;,\n      &quot;frontImg&quot;: &quot;/images/pokemon/local-mon/ember/front.png&quot;,\n      &quot;backImg&quot;: &quot;/images/pokemon/local-mon/ember/back.png&quot;,\n      &quot;type&quot;: &quot;fire&quot;,\n      &quot;hp&quot;: 100,\n      &quot;id&quot;: 1\n    },\n    {\n      &quot;userId&quot;: 1,\n      &quot;name&quot;: &quot;Draggy&quot;,\n      &quot;frontImg&quot;: &quot;/images/pokemon/local-mon/dragon/front.png&quot;,\n      &quot;backImg&quot;: &quot;/images/pokemon/local-mon/dragon/back.png&quot;,\n      &quot;type&quot;: &quot;dragon&quot;,\n      &quot;hp&quot;: 100,\n      &quot;id&quot;: 2\n    }   ] }\n</code></pre>\n<p>How could I deserialize this into a single object or array containing both the users array of data and the pokemon array of data in Java? Preferably in gson but I'm not opposed to changing libraries.</p>\n"},{"tags":["java","hibernate","datasource","c3p0"],"comments":[{"owner":{"account_id":6062199,"reputation":1160,"user_id":4733652,"display_name":"Iske"},"score":0,"creation_date":1683189692,"post_id":76170089,"comment_id":134329281,"body_markdown":"Have you tried using com.mysql.cj.jdbc.Driver because com.mysql.jdbc.Driver is deprecated?","body":"Have you tried using com.mysql.cj.jdbc.Driver because com.mysql.jdbc.Driver is deprecated?"}],"answers":[{"tags":[],"owner":{"account_id":1511139,"reputation":13781,"user_id":1413240,"accept_rate":50,"display_name":"Steve Waldman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683249454,"creation_date":1683249454,"answer_id":76178261,"question_id":76170089,"body_markdown":"Connection testing might help.\r\n\r\nYou could just add\r\n\r\n```\r\n&lt;property name=&quot;hibernate.c3p0.testConnectionOnCheckout&quot;&gt;true&lt;/property&gt;\r\n```\r\n\r\nor for richer advice, check [here](https://www.mchange.com/projects/c3p0/#simple_advice_on_connection_testing).","title":"Getting error from hibernate connection pool","body":"<p>Connection testing might help.</p>\n<p>You could just add</p>\n<pre><code>&lt;property name=&quot;hibernate.c3p0.testConnectionOnCheckout&quot;&gt;true&lt;/property&gt;\n</code></pre>\n<p>or for richer advice, check <a href=\"https://www.mchange.com/projects/c3p0/#simple_advice_on_connection_testing\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":4283130,"reputation":19,"user_id":3501861,"display_name":"Denial"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683249454,"creation_date":1683181048,"question_id":76170089,"body_markdown":"Hi following is my hibernate.cfg.xml file\r\n\r\n\r\n```\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;!-- Connection settings --&gt;\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/db_abc&lt;/property&gt;\r\n        &lt;property name=&quot;connection.autoReconnect&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;user_abc&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;pass_abc&lt;/property&gt;\r\n\r\n        \r\n        &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;20&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.c3p0.acquire_increment&quot;&gt;5&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;1800&lt;/property&gt;\r\n        \r\n        &lt;!-- SQL dialect --&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;\r\n\r\n        &lt;!-- Print executed SQL to stdout --&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n\r\n        &lt;!-- Drop and re-create all database on startup --&gt;\r\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n        \r\n        \r\n        &lt;property name=&quot;hibernate.current_session_context_class&quot;&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/property&gt;\r\n\r\n        &lt;!-- Annotated entity classes --&gt;\r\n        &lt;mapping class=&quot;com.entity.tbl_user&quot;/&gt;\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\nInitially after deployment it works fine. But after some sometime tomcat server throws following error:\r\n\r\n```\r\n04-May-2023 10:55:02.389 WARN [https-jsse-nio-443-exec-1] org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions SQL Error: 0, SQLState: 08S01\r\n04-May-2023 10:55:02.390 ERROR [https-jsse-nio-443-exec-1] org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions The last packet successfully received from the server was69680 seconds ago.The last packet sent successfully to the server was 69680 seconds ago, which  is longer than the server configured value of &#39;wait_timeout&#39;. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property &#39;autoReconnect=true&#39; to avoid this problem.\r\n```\r\n\r\n\r\n\r\nI am unable to figure out what wrong I have done. Please help","title":"Getting error from hibernate connection pool","body":"<p>Hi following is my hibernate.cfg.xml file</p>\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;!-- Connection settings --&gt;\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/db_abc&lt;/property&gt;\n        &lt;property name=&quot;connection.autoReconnect&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;user_abc&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;pass_abc&lt;/property&gt;\n\n        \n        &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;\n        &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;20&lt;/property&gt;\n        &lt;property name=&quot;hibernate.c3p0.acquire_increment&quot;&gt;5&lt;/property&gt;\n        &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;1800&lt;/property&gt;\n        \n        &lt;!-- SQL dialect --&gt;\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;\n\n        &lt;!-- Print executed SQL to stdout --&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n\n        &lt;!-- Drop and re-create all database on startup --&gt;\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n        \n        \n        &lt;property name=&quot;hibernate.current_session_context_class&quot;&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/property&gt;\n\n        &lt;!-- Annotated entity classes --&gt;\n        &lt;mapping class=&quot;com.entity.tbl_user&quot;/&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>Initially after deployment it works fine. But after some sometime tomcat server throws following error:</p>\n<pre><code>04-May-2023 10:55:02.389 WARN [https-jsse-nio-443-exec-1] org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions SQL Error: 0, SQLState: 08S01\n04-May-2023 10:55:02.390 ERROR [https-jsse-nio-443-exec-1] org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions The last packet successfully received from the server was69680 seconds ago.The last packet sent successfully to the server was 69680 seconds ago, which  is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.\n</code></pre>\n<p>I am unable to figure out what wrong I have done. Please help</p>\n"},{"tags":["java","if-statement","methods","do-while"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1683248520,"post_id":76178198,"comment_id":134341714,"body_markdown":"Using XOR is a mistake. Try debugging some hand variations and you&#39;ll see why.","body":"Using XOR is a mistake. Try debugging some hand variations and you&#39;ll see why."},{"owner":{"account_id":28116113,"reputation":33,"user_id":21483200,"display_name":"GrasshopperAtBest"},"score":0,"creation_date":1683248692,"post_id":76178198,"comment_id":134341725,"body_markdown":"@Bohemian I&#39;m not sure what you mean with that.","body":"@Bohemian I&#39;m not sure what you mean with that."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1683249356,"post_id":76178198,"comment_id":134341768,"body_markdown":"`^` is a logical XOR operation. Both `true ^ false ^ true` and `false ^ false ^ false` evaluate to `false`. Depending on the order or comparisons, finding multiple pairs in your chain of XORs may evaluate as if none were found. I think you want a logical OR - try changing `^` to `||`.","body":"<code>^</code> is a logical XOR operation. Both <code>true ^ false ^ true</code> and <code>false ^ false ^ false</code> evaluate to <code>false</code>. Depending on the order or comparisons, finding multiple pairs in your chain of XORs may evaluate as if none were found. I think you want a logical OR - try changing <code>^</code> to <code>||</code>."}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683249139,"creation_date":1683248711,"answer_id":76178222,"question_id":76178198,"body_markdown":"Because this is homework, I&#39;ll give pseudo code only...\r\n\r\nI think you&#39;re going about it the hard way. Try this:\r\n\r\n- collect the rank of cards in the hand into an array of ranks\r\n- sort the array of ranks\r\n- iterate over the array (once) and count the number of times adjacent ranks are the same\r\n- return true if the count is 1, false otherwise\r\n\r\nConsider that using this approach will calculate 3 of a kind as 2 pairs when it&#39;s actually *3* pairs (and 4 of a kind *6* pairs), but that won&#39;t affect correctness of this approach.","title":"Trying to code a method to sort through a 5-card poker hand and evaluate if the hand has a single-pair, exclusively in Java","body":"<p>Because this is homework, I'll give pseudo code only...</p>\n<p>I think you're going about it the hard way. Try this:</p>\n<ul>\n<li>collect the rank of cards in the hand into an array of ranks</li>\n<li>sort the array of ranks</li>\n<li>iterate over the array (once) and count the number of times adjacent ranks are the same</li>\n<li>return true if the count is 1, false otherwise</li>\n</ul>\n<p>Consider that using this approach will calculate 3 of a kind as 2 pairs when it's actually <em>3</em> pairs (and 4 of a kind <em>6</em> pairs), but that won't affect correctness of this approach.</p>\n"}],"owner":{"account_id":28116113,"reputation":33,"user_id":21483200,"display_name":"GrasshopperAtBest"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76178222,"answer_count":1,"score":0,"last_activity_date":1683249139,"creation_date":1683247973,"question_id":76178198,"body_markdown":"The method seems to work well at evaluating if there is the presence of a single-pair in the hand or not. However, I&#39;m trying to figure out how to code in if another hand comes up as true (two pair, 4 of a kind, full house, etc) that the pair should return as false. Here&#39;s the code I have for the ruling IN of a pair while ruling out everything else. I essentially went hand-by-hand with the potential combinations of a potential pair and utilized the &#39;^&#39; operator to create the exclusivity. \r\n\r\n        // if-else statements to rule in a pair exclusively\r\n        if ((cards[0] == cards[1]) ^ (cards[0] == cards[2]) ^ (cards[0] == cards[3]) ^ (cards[0] == cards[4])){\r\n            isPair = true;\r\n        } else if ((cards[1] == cards[2]) ^ (cards[1] == cards[3]) ^ (cards[1] == cards[4])){\r\n            isPair =true;\r\n        } else if ((cards[2] == cards[3]) ^ (cards[2] == cards[4])){\r\n            isPair = true;\r\n        } else if (cards[3] == cards[4]){\r\n            isPair = true;\r\n        } else \r\n            isPair = false;\r\n        return isPair;\r\n\r\n I had thought with the use of &#39;^&#39; that it would have made it that so if it had found another pair within it, but it is still coming up as &quot;true&quot; when running hands that have a two pair. I tried adding another int variable tooManyPairs and incremented inside of the if-else statements every time it found a pair while in do-while loop. Here&#39;s what it looked like:\r\n\r\n        public boolean isPair(){\r\n        boolean isPair = false;\r\n        int tooManyPairs = 0;\r\n        int [] cards = new int [hand.length];\r\n        for (int i = 0; i &lt; hand.length; i++){\r\n            cards[i] = hand[i].getRank();\r\n        }\r\n        // if-else loops to rule out 4 of a kind\r\n        do {\r\n        // if-else statements to rule in a pair exclusively\r\n        if ((cards[0] == cards[1]) ^ (cards[0] == cards[2]) ^ (cards[0] == cards[3]) ^ (cards[0] == cards[4])){\r\n            isPair = true;\r\n            tooManyPairs++;\r\n        } else if ((cards[1] == cards[2]) ^ (cards[1] == cards[3]) ^ (cards[1] == cards[4])){\r\n            isPair =true;\r\n            tooManyPairs++;\r\n        } else if ((cards[2] == cards[3]) ^ (cards[2] == cards[4])){\r\n            isPair = true;\r\n            tooManyPairs++;\r\n        } else if (cards[3] == cards[4]){\r\n            isPair = true;\r\n            tooManyPairs++;\r\n        } else \r\n            isPair = false;\r\n        }while (tooManyPairs &lt; 1);\r\n        if (tooManyPairs &gt; 1)\r\n            return isPair = false;\r\n        return isPair;\r\n\r\nThe [![enter image description here][1]][1]\r\n\r\nThe output is still coming up as true for both instead of just the two pair. I thought I could repost the previous code for those methods into this method with modifications that would make them return the isPair method as false. That just seems like a lot of excess code and I feel like there should be a more simple way of doing it. Any guidance would be appreciated. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OOQjF.png","title":"Trying to code a method to sort through a 5-card poker hand and evaluate if the hand has a single-pair, exclusively in Java","body":"<p>The method seems to work well at evaluating if there is the presence of a single-pair in the hand or not. However, I'm trying to figure out how to code in if another hand comes up as true (two pair, 4 of a kind, full house, etc) that the pair should return as false. Here's the code I have for the ruling IN of a pair while ruling out everything else. I essentially went hand-by-hand with the potential combinations of a potential pair and utilized the '^' operator to create the exclusivity.</p>\n<pre><code>    // if-else statements to rule in a pair exclusively\n    if ((cards[0] == cards[1]) ^ (cards[0] == cards[2]) ^ (cards[0] == cards[3]) ^ (cards[0] == cards[4])){\n        isPair = true;\n    } else if ((cards[1] == cards[2]) ^ (cards[1] == cards[3]) ^ (cards[1] == cards[4])){\n        isPair =true;\n    } else if ((cards[2] == cards[3]) ^ (cards[2] == cards[4])){\n        isPair = true;\n    } else if (cards[3] == cards[4]){\n        isPair = true;\n    } else \n        isPair = false;\n    return isPair;\n</code></pre>\n<p>I had thought with the use of '^' that it would have made it that so if it had found another pair within it, but it is still coming up as &quot;true&quot; when running hands that have a two pair. I tried adding another int variable tooManyPairs and incremented inside of the if-else statements every time it found a pair while in do-while loop. Here's what it looked like:</p>\n<pre><code>    public boolean isPair(){\n    boolean isPair = false;\n    int tooManyPairs = 0;\n    int [] cards = new int [hand.length];\n    for (int i = 0; i &lt; hand.length; i++){\n        cards[i] = hand[i].getRank();\n    }\n    // if-else loops to rule out 4 of a kind\n    do {\n    // if-else statements to rule in a pair exclusively\n    if ((cards[0] == cards[1]) ^ (cards[0] == cards[2]) ^ (cards[0] == cards[3]) ^ (cards[0] == cards[4])){\n        isPair = true;\n        tooManyPairs++;\n    } else if ((cards[1] == cards[2]) ^ (cards[1] == cards[3]) ^ (cards[1] == cards[4])){\n        isPair =true;\n        tooManyPairs++;\n    } else if ((cards[2] == cards[3]) ^ (cards[2] == cards[4])){\n        isPair = true;\n        tooManyPairs++;\n    } else if (cards[3] == cards[4]){\n        isPair = true;\n        tooManyPairs++;\n    } else \n        isPair = false;\n    }while (tooManyPairs &lt; 1);\n    if (tooManyPairs &gt; 1)\n        return isPair = false;\n    return isPair;\n</code></pre>\n<p>The <a href=\"https://i.stack.imgur.com/OOQjF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OOQjF.png\" alt=\"enter image description here\" /></a></p>\n<p>The output is still coming up as true for both instead of just the two pair. I thought I could repost the previous code for those methods into this method with modifications that would make them return the isPair method as false. That just seems like a lot of excess code and I feel like there should be a more simple way of doing it. Any guidance would be appreciated.</p>\n"},{"tags":["java","grpc","reconnect"],"comments":[{"owner":{"account_id":75725,"reputation":503,"user_id":217125,"display_name":"earthling paul"},"score":1,"creation_date":1683041743,"post_id":76138965,"comment_id":134304215,"body_markdown":"akka gRPC supports automatic re-connect out of the box, see: https://doc.akka.io/docs/akka-grpc/current/client/details.html#client-lifecycle","body":"akka gRPC supports automatic re-connect out of the box, see: <a href=\"https://doc.akka.io/docs/akka-grpc/current/client/details.html#client-lifecycle\" rel=\"nofollow noreferrer\">doc.akka.io/docs/akka-grpc/current/client/&hellip;</a>"},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1683208578,"post_id":76138965,"comment_id":134334029,"body_markdown":"Can you explain more the behavior you saw for &quot;The Java application didn&#39;t recognize the connection loss and couldn&#39;t reconnect.&quot; The RPC just hung? &quot;Couldn&#39;t reconnect&quot; as in you were getting an error? The keepalive looks appropriate.","body":"Can you explain more the behavior you saw for &quot;The Java application didn&#39;t recognize the connection loss and couldn&#39;t reconnect.&quot; The RPC just hung? &quot;Couldn&#39;t reconnect&quot; as in you were getting an error? The keepalive looks appropriate."}],"answers":[{"tags":[],"owner":{"account_id":5106577,"reputation":2269,"user_id":4094489,"accept_rate":71,"display_name":"Citrullin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682878927,"creation_date":1682878927,"answer_id":76142862,"question_id":76138965,"body_markdown":"That sounds to me like something you would like to do with a framework/library any way. You can implement it by yourself, but it&#39;s really not worth the struggle and may lead to spaghetti code any way. \r\nAkka has a [gRPC integration][1], so I would have a look into it. It has a lot of features that solves what you describe here. \r\n[Flink][2] would be even more advanced than Akka in the sense you have checkpoints etc. That may help here in case something bigger fails.\r\n\r\n\r\n  [1]: https://doc.akka.io/docs/akka-grpc/current/index.html\r\n  [2]: https://flink.apache.org/","title":"gRPC | Java | How can I reconnect the stream to the server? [Solved]","body":"<p>That sounds to me like something you would like to do with a framework/library any way. You can implement it by yourself, but it's really not worth the struggle and may lead to spaghetti code any way.\nAkka has a <a href=\"https://doc.akka.io/docs/akka-grpc/current/index.html\" rel=\"nofollow noreferrer\">gRPC integration</a>, so I would have a look into it. It has a lot of features that solves what you describe here.\n<a href=\"https://flink.apache.org/\" rel=\"nofollow noreferrer\">Flink</a> would be even more advanced than Akka in the sense you have checkpoints etc. That may help here in case something bigger fails.</p>\n"}],"owner":{"account_id":17065617,"reputation":21,"user_id":12347881,"display_name":"Nick P."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683248516,"creation_date":1682812206,"question_id":76138965,"body_markdown":"Thank you all for your answers. I got it working now!!\r\n\r\nI just remade everything and I&#39;m catching Connection losses, which I then use to start a new Thread which uses Thread.sleep(15000) to wait 15 Seconds and then call my GrpcEvent again (which is also called at the start). I&#39;m creating a channel at the beginning of the app runtime and if the stream ends, it just uses the channel from the beginning to start a new stream.\r\n\r\nSince the code is a bit too big for here, I can send it to everyone who dms me on twitter ^^ (It&#39;s linked to my Stackoverflow profile)\r\n\r\n---\r\n---\r\n---\r\n\r\nI want to be able to check if the gRPC Server is reachable again and start a new stream connection to the server.\r\n\r\nMy Code for java is:\r\n\r\n\r\n```\r\npublic class GrpcEvent {\r\n\r\n    public GrpcEvent(@NotNull VCore plugin) {\r\n\r\n        ManagedChannel channel = ManagedChannelBuilder.forAddress(&quot;localhost&quot;, 50051)\r\n                .usePlaintext()\r\n                .keepAliveTime(30, TimeUnit.SECONDS)\r\n                .keepAliveTimeout(5, TimeUnit.SECONDS)\r\n                .build();\r\n\r\n        GeneralGrpc.GeneralStub nonBlockingStub = GeneralGrpc.newStub(channel);\r\n\r\n        nonBlockingStub.connectClient(GeneralProto.ClientMeta.newBuilder()\r\n                        .setGroup(&quot;proxy&quot;)\r\n                        .setName(&quot;proxy-&quot; + createId())\r\n                        .setIp(plugin.server.getBoundAddress().getHostName())\r\n                        .setPort(plugin.server.getBoundAddress().getPort())\r\n                        .build(),\r\n                new GrpcCommandHandler(plugin));\r\n\r\n\r\n    }\r\n\r\n    private @NotNull String createId() {\r\n        UUID uuid = UUID.randomUUID();\r\n        String[] parts = uuid.toString().split(&quot;-&quot;);\r\n\r\n        return String.join(&quot;-&quot;, parts[0], parts[1]);\r\n    }\r\n}\r\n```\r\n\r\nI tried searching on google for days and even tried (I know it&#39;s not recommended and most of the code doesn&#39;t really work) ChatGPT. &#128528;\r\n\r\nThe result: The Java application didn&#39;t recognize the connection loss and couldn&#39;t reconnect.","title":"gRPC | Java | How can I reconnect the stream to the server? [Solved]","body":"<p>Thank you all for your answers. I got it working now!!</p>\n<p>I just remade everything and I'm catching Connection losses, which I then use to start a new Thread which uses Thread.sleep(15000) to wait 15 Seconds and then call my GrpcEvent again (which is also called at the start). I'm creating a channel at the beginning of the app runtime and if the stream ends, it just uses the channel from the beginning to start a new stream.</p>\n<p>Since the code is a bit too big for here, I can send it to everyone who dms me on twitter ^^ (It's linked to my Stackoverflow profile)</p>\n<hr />\n<hr />\n<hr />\n<p>I want to be able to check if the gRPC Server is reachable again and start a new stream connection to the server.</p>\n<p>My Code for java is:</p>\n<pre><code>public class GrpcEvent {\n\n    public GrpcEvent(@NotNull VCore plugin) {\n\n        ManagedChannel channel = ManagedChannelBuilder.forAddress(&quot;localhost&quot;, 50051)\n                .usePlaintext()\n                .keepAliveTime(30, TimeUnit.SECONDS)\n                .keepAliveTimeout(5, TimeUnit.SECONDS)\n                .build();\n\n        GeneralGrpc.GeneralStub nonBlockingStub = GeneralGrpc.newStub(channel);\n\n        nonBlockingStub.connectClient(GeneralProto.ClientMeta.newBuilder()\n                        .setGroup(&quot;proxy&quot;)\n                        .setName(&quot;proxy-&quot; + createId())\n                        .setIp(plugin.server.getBoundAddress().getHostName())\n                        .setPort(plugin.server.getBoundAddress().getPort())\n                        .build(),\n                new GrpcCommandHandler(plugin));\n\n\n    }\n\n    private @NotNull String createId() {\n        UUID uuid = UUID.randomUUID();\n        String[] parts = uuid.toString().split(&quot;-&quot;);\n\n        return String.join(&quot;-&quot;, parts[0], parts[1]);\n    }\n}\n</code></pre>\n<p>I tried searching on google for days and even tried (I know it's not recommended and most of the code doesn't really work) ChatGPT. 😐</p>\n<p>The result: The Java application didn't recognize the connection loss and couldn't reconnect.</p>\n"},{"tags":["java","eclipse","javadoc"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1683209567,"post_id":76173551,"comment_id":134334323,"body_markdown":"What do you have for the &quot;JRE source compatibility&quot; option on the third page of the wizard (don&#39;t just press Finish immediately use Next to go through all the pages)","body":"What do you have for the &quot;JRE source compatibility&quot; option on the third page of the wizard (don&#39;t just press Finish immediately use Next to go through all the pages)"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1683244192,"creation_date":1683209099,"answer_id":76174097,"question_id":76173551,"body_markdown":"Eclipse is doing what you asked it to do.\r\n\r\n`javac17` can still be configured to compile java 8 code. Just like, say, &#39;Word 2024&#39; can still open files made with &#39;word 2016&#39;.\r\n\r\nAnd.. it is. That&#39;s what the `-source 8` is about: You&#39;re running `javadoc -source 8 ....`.\r\n\r\nClick on &#39;next&#39; twice. You will see the option &#39;JRE source compatibility&#39;. Set that to at least 15; it is currently on 8, so eclipse is dutifully telling `javac` (invoked by `javadoc` to parse the doc comments and signature out) to parse it as if its java 8 compatible source, and expression-switches aren&#39;t compatible with that.\r\n","title":"Fail to build Javadoc with java 17 in Eclipse","body":"<p>Eclipse is doing what you asked it to do.</p>\n<p><code>javac17</code> can still be configured to compile java 8 code. Just like, say, 'Word 2024' can still open files made with 'word 2016'.</p>\n<p>And.. it is. That's what the <code>-source 8</code> is about: You're running <code>javadoc -source 8 ....</code>.</p>\n<p>Click on 'next' twice. You will see the option 'JRE source compatibility'. Set that to at least 15; it is currently on 8, so eclipse is dutifully telling <code>javac</code> (invoked by <code>javadoc</code> to parse the doc comments and signature out) to parse it as if its java 8 compatible source, and expression-switches aren't compatible with that.</p>\n"}],"owner":{"account_id":6134502,"reputation":333,"user_id":4783796,"display_name":"Knupel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76174097,"answer_count":1,"score":0,"last_activity_date":1683244192,"creation_date":1683205520,"question_id":76173551,"body_markdown":"I&#39;ve my project in Eclipse and since few weeks that&#39;s failed do build my javadoc, because I&#39;ve a syntax problem with arrow in it.\r\nThe console return I need to use an upper version of Java 14 to to it.\r\nThe problem, it&#39;s my java is java 17, so I don&#39;t understand where I must look... to fix that.\r\nIndeed, I&#39;ve no problem to build my library!!! just for the javadoc.\r\n```\r\nerror: switch rules are not supported in -source 8\r\n          case &#39;[&#39; -&gt;\r\n                   ^\r\n  (use -source 14 or higher to enable switch rules)\r\n```\r\n\r\nmy setting :\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6whuh.png","title":"Fail to build Javadoc with java 17 in Eclipse","body":"<p>I've my project in Eclipse and since few weeks that's failed do build my javadoc, because I've a syntax problem with arrow in it.\nThe console return I need to use an upper version of Java 14 to to it.\nThe problem, it's my java is java 17, so I don't understand where I must look... to fix that.\nIndeed, I've no problem to build my library!!! just for the javadoc.</p>\n<pre><code>error: switch rules are not supported in -source 8\n          case '[' -&gt;\n                   ^\n  (use -source 14 or higher to enable switch rules)\n</code></pre>\n<p>my setting :\n<a href=\"https://i.stack.imgur.com/6whuh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6whuh.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","mqtt","iot","paho"],"comments":[{"owner":{"account_id":8967184,"reputation":570,"user_id":9305266,"display_name":"Manish Ahire"},"score":0,"creation_date":1683266119,"post_id":76175743,"comment_id":134343269,"body_markdown":"please add this line in manifest file         &lt;service android:name=&quot;org.eclipse.paho.android.service.MqttService&quot; /&gt;","body":"please add this line in manifest file         &lt;service android:name=&quot;org.eclipse.paho.android.service.MqttService&quot; /&gt;"},{"owner":{"account_id":27665703,"reputation":1,"user_id":21117569,"display_name":"KAI"},"score":0,"creation_date":1683282579,"post_id":76175743,"comment_id":134346387,"body_markdown":"No this doesn&#39;t work The app still crashes at runtime as soon as I press the button.","body":"No this doesn&#39;t work The app still crashes at runtime as soon as I press the button."}],"owner":{"account_id":27665703,"reputation":1,"user_id":21117569,"display_name":"KAI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683243710,"creation_date":1683220285,"question_id":76175743,"body_markdown":"I have this code for MQTT Test Client and I am trying to connect with public HiveMQ Broker but there are some runtime exceptions and I am not able to solve this problem.\r\n\r\nHere is the stack trace and code for `MainActivity.java` file.\r\n\r\n```\r\npackage com.tanmay.helloworld;\r\n\r\nimport static androidx.constraintlayout.helper.widget.MotionEffect.TAG;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport org.eclipse.paho.android.service.MqttAndroidClient;\r\nimport org.eclipse.paho.client.mqttv3.IMqttActionListener;\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.IMqttToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallbackExtended;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    String serverUrl = &quot;tcp://broker.hivemq.com:1883&quot;;\r\n    String clientId = &quot;123&quot;;\r\n    \r\n    \r\n    Button button;\r\n    \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    \r\n        button = findViewById(R.id.button);\r\n    \r\n        MqttAndroidClient client = new MqttAndroidClient(getApplicationContext(),serverUrl,clientId);\r\n        MqttConnectOptions options = new MqttConnectOptions();\r\n        options.setCleanSession(true);\r\n        options.setUserName(&quot;Admin&quot;);\r\n        options.setPassword(&quot;Admin&quot;.toCharArray());\r\n    \r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                try {\r\n                    IMqttToken token = client.connect(options);\r\n                    Toast.makeText(MainActivity.this, &quot;Client Connected&quot;, Toast.LENGTH_SHORT).show();\r\n                } catch (MqttException e) {\r\n                    Toast.makeText(MainActivity.this, &quot;Client was not able to connect&quot;, Toast.LENGTH_SHORT).show();\r\n                    throw new RuntimeException(&quot;String error&quot;+e);\r\n                }\r\n            }\r\n        });    \r\n    }\r\n}\r\n```\r\n\r\n```\r\n2023-05-04 22:30:57.44 468-468 AndroidRuntime          com.tanmay.helloworld                E  FATAL EXCEPTION: main\r\nProcess: com.tanmay.helloworld, PID: 468\r\njava.lang.NoClassDefFoundError: Failed resolution of: Landroid/support/v4/content/LocalBroadcastManager;\r\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)\r\nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50)\r\nat android.view.View.performClick(View.java:7448)\r\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202)\r\nat android.view.View.performClickInternal(View.java:7425)\r\nat android.view.View.access$3600(View.java:80)\r\nat android.view.View$PerformClick.run(View.java:28305)\r\nat android.os.Handler.handleCallback(Handler.java:938)\r\nat android.os.Handler.dispatchMessage(Handler.java:99)\r\nat android.os.Looper.loop(Looper.java:223)\r\nat android.app.ActivityThread.main(ActivityThread.java:7656)\r\nat java.lang.reflect.Method.invoke(Native Method)\r\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\nCaused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;android.support.v4.content.LocalBroadcastManager&quot; on path: DexPathList[[zip file &quot;/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/lib/x86, /system/lib, /system_ext/lib]]\r\nat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:32)\r\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)&#160;\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)&#160;\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)&#160;\r\nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50)&#160;\r\nat android.view.View.performClick(View.java:7448)&#160;\r\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202)&#160;\r\nat android.view.View.performClickInternal(View.java:7425)&#160;\r\nat android.view.View.access$3600(View.java:80)&#160;\r\nat android.view.View$PerformClick.run(View.java:28305)&#160;\r\nat android.os.Handler.handleCallback(Handler.java:938)&#160;\r\nat android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\nat android.os.Looper.loop(Looper.java:223)&#160;\r\nat android.app.ActivityThread.main(ActivityThread.java:7656)&#160;\r\nat java.lang.reflect.Method.invoke(Native Method)&#160;\r\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)&#160;\r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n```\r\n\r\nI am trying to create an App that can  publish and subscribe JSON payloads over an MQTT protocal.","title":"I am trying to establish an MQTT connection in Android but there are some runtime errors","body":"<p>I have this code for MQTT Test Client and I am trying to connect with public HiveMQ Broker but there are some runtime exceptions and I am not able to solve this problem.</p>\n<p>Here is the stack trace and code for <code>MainActivity.java</code> file.</p>\n<pre><code>package com.tanmay.helloworld;\n\nimport static androidx.constraintlayout.helper.widget.MotionEffect.TAG;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport org.eclipse.paho.android.service.MqttAndroidClient;\nimport org.eclipse.paho.client.mqttv3.IMqttActionListener;\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.IMqttToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttCallbackExtended;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\n\npublic class MainActivity extends AppCompatActivity {\n\n    String serverUrl = &quot;tcp://broker.hivemq.com:1883&quot;;\n    String clientId = &quot;123&quot;;\n    \n    \n    Button button;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    \n        button = findViewById(R.id.button);\n    \n        MqttAndroidClient client = new MqttAndroidClient(getApplicationContext(),serverUrl,clientId);\n        MqttConnectOptions options = new MqttConnectOptions();\n        options.setCleanSession(true);\n        options.setUserName(&quot;Admin&quot;);\n        options.setPassword(&quot;Admin&quot;.toCharArray());\n    \n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                try {\n                    IMqttToken token = client.connect(options);\n                    Toast.makeText(MainActivity.this, &quot;Client Connected&quot;, Toast.LENGTH_SHORT).show();\n                } catch (MqttException e) {\n                    Toast.makeText(MainActivity.this, &quot;Client was not able to connect&quot;, Toast.LENGTH_SHORT).show();\n                    throw new RuntimeException(&quot;String error&quot;+e);\n                }\n            }\n        });    \n    }\n}\n</code></pre>\n<pre><code>2023-05-04 22:30:57.44 468-468 AndroidRuntime          com.tanmay.helloworld                E  FATAL EXCEPTION: main\nProcess: com.tanmay.helloworld, PID: 468\njava.lang.NoClassDefFoundError: Failed resolution of: Landroid/support/v4/content/LocalBroadcastManager;\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)\nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50)\nat android.view.View.performClick(View.java:7448)\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202)\nat android.view.View.performClickInternal(View.java:7425)\nat android.view.View.access$3600(View.java:80)\nat android.view.View$PerformClick.run(View.java:28305)\nat android.os.Handler.handleCallback(Handler.java:938)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:223)\nat android.app.ActivityThread.main(ActivityThread.java:7656)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\nCaused by: java.lang.ClassNotFoundException: Didn't find class &quot;android.support.v4.content.LocalBroadcastManager&quot; on path: DexPathList[[zip file &quot;/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/lib/x86, /system/lib, /system_ext/lib]]\nat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:32)\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450) \nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428) \nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334) \nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50) \nat android.view.View.performClick(View.java:7448) \nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202) \nat android.view.View.performClickInternal(View.java:7425) \nat android.view.View.access$3600(View.java:80) \nat android.view.View$PerformClick.run(View.java:28305) \nat android.os.Handler.handleCallback(Handler.java:938) \nat android.os.Handler.dispatchMessage(Handler.java:99) \nat android.os.Looper.loop(Looper.java:223) \nat android.app.ActivityThread.main(ActivityThread.java:7656) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>I am trying to create an App that can  publish and subscribe JSON payloads over an MQTT protocal.</p>\n"},{"tags":["java","intellij-idea","javadoc","intellij-14"],"comments":[{"owner":{"account_id":5743051,"reputation":66,"user_id":4535117,"display_name":"Brunaldo"},"score":0,"creation_date":1423848175,"post_id":28505097,"comment_id":45329499,"body_markdown":"Sorry if I&#39;m wrong here but that&#39;s how that comment is suppose to me, I think you&#39;re looking for    `/*\n    Hello\n     */` . Only have one start after the first forward slash.","body":"Sorry if I&#39;m wrong here but that&#39;s how that comment is suppose to me, I think you&#39;re looking for    <code>&#47;*     Hello      *&#47;</code> . Only have one start after the first forward slash."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":1,"creation_date":1423848462,"post_id":28505097,"comment_id":45329671,"body_markdown":"@Brunaldo javadocs commonly start with \n/** see http://www.oracle.com/technetwork/articles/java/index-137868.html","body":"@Brunaldo javadocs commonly start with  /** see <a href=\"http://www.oracle.com/technetwork/articles/java/index-137868.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/articles/java/index-137868.html</a>"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1423848587,"post_id":28505097,"comment_id":45329758,"body_markdown":"@rsavchenko The javadoc block style comments include the `*` on the newline and the javadoc compiler removes them. IntelliJ is following the convention.","body":"@rsavchenko The javadoc block style comments include the <code>*</code> on the newline and the javadoc compiler removes them. IntelliJ is following the convention."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":1,"creation_date":1423848780,"post_id":28505097,"comment_id":45329851,"body_markdown":"@ElliottFrisch the one star is fine but each time i hit enter I get 2 3 4 5 *&#39;s on the same line. So when I hit enter I get  * (cursor) * I don&#39;t   want the trailing star","body":"@ElliottFrisch the one star is fine but each time i hit enter I get 2 3 4 5 *&#39;s on the same line. So when I hit enter I get  * (cursor) * I don&#39;t   want the trailing star"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1423848907,"post_id":28505097,"comment_id":45329928,"body_markdown":"@rsavchenko Ahh.. sounds like you edited the default configuration in the preferences... I&#39;m not 100% sure howto reset that with intellij but I expect someone will know...","body":"@rsavchenko Ahh.. sounds like you edited the default configuration in the preferences... I&#39;m not 100% sure howto reset that with intellij but I expect someone will know..."},{"owner":{"account_id":4082028,"reputation":5506,"user_id":3352285,"display_name":"NESPowerGlove"},"score":0,"creation_date":1423856797,"post_id":28505097,"comment_id":45334101,"body_markdown":"@rsavchenko Did you know you can format, `ctrl-alt-L`, and have your words auto fit the rows with the *s? Wondering if you don&#39;t like the *s because you go back and add text and manually format.","body":"@rsavchenko Did you know you can format, <code>ctrl-alt-L</code>, and have your words auto fit the rows with the *s? Wondering if you don&#39;t like the *s because you go back and add text and manually format."},{"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"score":0,"creation_date":1424241413,"post_id":28505097,"comment_id":45463610,"body_markdown":"I am also seeing this behavior, and it began after a recent update. I doubt it has to do with any preference... and if it does, the update either changed a preference without asking me, or the update started interpreting a setting differently.","body":"I am also seeing this behavior, and it began after a recent update. I doubt it has to do with any preference... and if it does, the update either changed a preference without asking me, or the update started interpreting a setting differently."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":0,"creation_date":1424301066,"post_id":28505097,"comment_id":45498109,"body_markdown":"@DilumRanatunga it looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though.","body":"@DilumRanatunga it looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":0,"creation_date":1424301109,"post_id":28505097,"comment_id":45498129,"body_markdown":"@NESPowerGlove sadly the auto format doesn&#39;t remove the extra **** characters.","body":"@NESPowerGlove sadly the auto format doesn&#39;t remove the extra **** characters."},{"owner":{"account_id":4082028,"reputation":5506,"user_id":3352285,"display_name":"NESPowerGlove"},"score":0,"creation_date":1424303012,"post_id":28505097,"comment_id":45498808,"body_markdown":"@rsavchenko I meant that it would keep the asterisks but allow for easy typing of whatever you want, it would place them asterisks in for you, so you don&#39;t have to fight manually moving asterisks around when you wanted to add text in the middle of a preexisting comment.","body":"@rsavchenko I meant that it would keep the asterisks but allow for easy typing of whatever you want, it would place them asterisks in for you, so you don&#39;t have to fight manually moving asterisks around when you wanted to add text in the middle of a preexisting comment."}],"answers":[{"tags":[],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423858854,"creation_date":1423858854,"answer_id":28508114,"question_id":28505097,"body_markdown":"What you&#39;re typing are not normal block comments (/* ... */) but Javadoc comments (/** ... */), and those *should* have a * at every line. So just delete the extra * after the first / and you&#39;ll be fine.","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>What you're typing are not normal block comments (/* ... */) but Javadoc comments (/** ... */), and those <em>should</em> have a * at every line. So just delete the extra * after the first / and you'll be fine.</p>\n"},{"tags":[],"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1424749198,"creation_date":1424242530,"answer_id":28577729,"question_id":28505097,"body_markdown":"I suspect this is a defect/regression. I&#39;ve created an issue on YouTrack: https://youtrack.jetbrains.com/issue/IDEA-136673\r\n\r\n---\r\n\r\n**Update**\r\n\r\nThe IntelliJ team isolated the issue to Gauge plugin. I&#39;ve logged the issue with plugin authors: https://github.com/getgauge/Intellij-Plugin/issues/39","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>I suspect this is a defect/regression. I've created an issue on YouTrack: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-136673\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/IDEA-136673</a></p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>The IntelliJ team isolated the issue to Gauge plugin. I've logged the issue with plugin authors: <a href=\"https://github.com/getgauge/Intellij-Plugin/issues/39\" rel=\"nofollow\">https://github.com/getgauge/Intellij-Plugin/issues/39</a></p>\n"},{"tags":[],"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1424717550,"creation_date":1424717550,"answer_id":28681180,"question_id":28505097,"body_markdown":"Looks like it&#39;s a bug in the Gauge plugin I was using for &quot;.md&quot; file support. Uninstalled that and the issue was gone.\r\n \r\nhttps://youtrack.jetbrains.com/issue/IDEA-136182","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>Looks like it's a bug in the Gauge plugin I was using for \".md\" file support. Uninstalled that and the issue was gone.</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-136182\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/IDEA-136182</a></p>\n"},{"tags":[],"owner":{"account_id":13151841,"reputation":391,"user_id":9500212,"display_name":"Corey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683243622,"creation_date":1683243622,"answer_id":76178003,"question_id":28505097,"body_markdown":"I had this problem recently. It turns out it was caused by the AWS Toolkit plugin.","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>I had this problem recently. It turns out it was caused by the AWS Toolkit plugin.</p>\n"}],"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1008,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":28577729,"answer_count":4,"score":5,"last_activity_date":1683243622,"creation_date":1423847841,"question_id":28505097,"body_markdown":"I&#39;m having a super strange problem with Idea. \r\n\r\nEvery time I hit enter in a block comment it adds an extra * on the line. It gets really annoying to have to delete it before typing each line. \r\nI have tried importing several coworkers code style settings who are not having this issue to no avail. I also can&#39;t seem to find the setting that would be doing this, and nothing on google. Anyone know a setting that could be causing this? \r\n\r\nExample:\r\n\r\n     /**\r\n     * Some comment (pressing enter 3 times)\r\n     * \r\n     * \r\n     * (cursor is here)* * * * \r\n     */\r\nAnother Example:\r\n\r\n    /**\r\n    * Some comment (press enter)\r\n    * (cursor is here)*\r\n    */\r\n        \r\n\r\n\r\n","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>I'm having a super strange problem with Idea. </p>\n\n<p>Every time I hit enter in a block comment it adds an extra * on the line. It gets really annoying to have to delete it before typing each line. \nI have tried importing several coworkers code style settings who are not having this issue to no avail. I also can't seem to find the setting that would be doing this, and nothing on google. Anyone know a setting that could be causing this? </p>\n\n<p>Example:</p>\n\n<pre><code> /**\n * Some comment (pressing enter 3 times)\n * \n * \n * (cursor is here)* * * * \n */\n</code></pre>\n\n<p>Another Example:</p>\n\n<pre><code>/**\n* Some comment (press enter)\n* (cursor is here)*\n*/\n</code></pre>\n"},{"tags":["java","animation","javafx","bezier","cubic-bezier"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1683060802,"post_id":76158109,"comment_id":134308177,"body_markdown":"What _specific_ thing do you need help with relating to this code though?","body":"What <i>specific</i> thing do you need help with relating to this code though?"},{"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"score":0,"creation_date":1683062472,"post_id":76158109,"comment_id":134308484,"body_markdown":"I&#39;m sorry this is my first question here, I am trying to write a handleMouseReleased() method that restores the original state of the path (after it has been dragged and deformed by handleMouseDragged(). I tried searching online and I believe I should be using the Timeline class, but I need some guidance. I saved the original state of the paths in the List&lt;Path&gt; initialPaths.","body":"I&#39;m sorry this is my first question here, I am trying to write a handleMouseReleased() method that restores the original state of the path (after it has been dragged and deformed by handleMouseDragged(). I tried searching online and I believe I should be using the Timeline class, but I need some guidance. I saved the original state of the paths in the List&lt;Path&gt; initialPaths."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1683064956,"post_id":76158109,"comment_id":134308824,"body_markdown":"If you&#39;re just responding to mouse events, then there&#39;s no real reason to use a timeline, simply cache the original state, and on mouse release, replace the current state with the cached state.","body":"If you&#39;re just responding to mouse events, then there&#39;s no real reason to use a timeline, simply cache the original state, and on mouse release, replace the current state with the cached state."},{"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"score":0,"creation_date":1683069894,"post_id":76158109,"comment_id":134309376,"body_markdown":"You are right my comment was too vague. My intention is to make a simple animation transitioning from the dragged state to the original state. But I will start applying your suggestion, first things first :) thank you","body":"You are right my comment was too vague. My intention is to make a simple animation transitioning from the dragged state to the original state. But I will start applying your suggestion, first things first :) thank you"},{"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"score":0,"creation_date":1683243583,"post_id":76158109,"comment_id":134341243,"body_markdown":"Just for your info, saving the paths (in initialPaths) makes no difference. Because the moment you dragged, the path properties are already updated and there is no way to get the initial values. For that you need to take backup of each property. Check my answer for a possible solution.","body":"Just for your info, saving the paths (in initialPaths) makes no difference. Because the moment you dragged, the path properties are already updated and there is no way to get the initial values. For that you need to take backup of each property. Check my answer for a possible solution."}],"answers":[{"tags":[],"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683243316,"creation_date":1683243316,"answer_id":76177991,"question_id":76158109,"body_markdown":"For this requirement, all you need to do is to store the initial values of controlX1,Y1,X2,Y2 and reset the curves control properties to the initial values using a Timeline.\r\n\r\nBelow is the output, if you add the below changes to your code:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    private double x1, y1, x2, y2;\r\n    \r\n    private void handleMousePressed(MouseEvent event) {\r\n        dragStartX = event.getX();\r\n        dragStartY = event.getY();\r\n        Path path = (Path) event.getSource();\r\n        for (PathElement element : path.getElements()) {\r\n            if (element instanceof CubicCurveTo curve) {\r\n                x1 = curve.getControlX1();\r\n                y1 = curve.getControlY1();\r\n                x2 = curve.getControlX2();\r\n                y2 = curve.getControlY2();\r\n            }\r\n        }\r\n    }\r\n    \r\n    private void handleMouseReleased(MouseEvent event) {\r\n        Path path = (Path) event.getSource();\r\n        for (PathElement element : path.getElements()) {\r\n            if (element instanceof CubicCurveTo curve) {\r\n                // Create key values to reset the properties to the initial state\r\n                KeyValue kx1 = new KeyValue(curve.controlX1Property(), x1);\r\n                KeyValue ky1 = new KeyValue(curve.controlY1Property(), y1);\r\n                KeyValue kx2 = new KeyValue(curve.controlX2Property(), x2);\r\n                KeyValue ky2 = new KeyValue(curve.controlY2Property(), y2);\r\n                // Change the speed as per your needs\r\n                Duration speed = Duration.millis(300);\r\n                Timeline tl = new Timeline(new KeyFrame(speed, kx1, ky1, kx2, ky2));\r\n                tl.play();\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/qy2ha.gif","title":"JavaFX animation to restore a Path original state","body":"<p>For this requirement, all you need to do is to store the initial values of controlX1,Y1,X2,Y2 and reset the curves control properties to the initial values using a Timeline.</p>\n<p>Below is the output, if you add the below changes to your code:</p>\n<p><a href=\"https://i.stack.imgur.com/qy2ha.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qy2ha.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>private double x1, y1, x2, y2;\n\nprivate void handleMousePressed(MouseEvent event) {\n    dragStartX = event.getX();\n    dragStartY = event.getY();\n    Path path = (Path) event.getSource();\n    for (PathElement element : path.getElements()) {\n        if (element instanceof CubicCurveTo curve) {\n            x1 = curve.getControlX1();\n            y1 = curve.getControlY1();\n            x2 = curve.getControlX2();\n            y2 = curve.getControlY2();\n        }\n    }\n}\n\nprivate void handleMouseReleased(MouseEvent event) {\n    Path path = (Path) event.getSource();\n    for (PathElement element : path.getElements()) {\n        if (element instanceof CubicCurveTo curve) {\n            // Create key values to reset the properties to the initial state\n            KeyValue kx1 = new KeyValue(curve.controlX1Property(), x1);\n            KeyValue ky1 = new KeyValue(curve.controlY1Property(), y1);\n            KeyValue kx2 = new KeyValue(curve.controlX2Property(), x2);\n            KeyValue ky2 = new KeyValue(curve.controlY2Property(), y2);\n            // Change the speed as per your needs\n            Duration speed = Duration.millis(300);\n            Timeline tl = new Timeline(new KeyFrame(speed, kx1, ky1, kx2, ky2));\n            tl.play();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76177991,"answer_count":1,"score":0,"last_activity_date":1683243316,"creation_date":1683054468,"question_id":76158109,"body_markdown":"I&#39;m a beginner in JavaFX, and I&#39;m working on a project where I&#39;m using four Bezier curves to draw a circle. My goal is to eventually achieve a &quot;wobbly&quot; effect by allowing the curves to be deformed when the user drags them. To accomplish this, I want to add a feature that restores the original state of the circle when the user releases the mouse click (EDIT) performing an animation that makes the curve move to its initial path, which I stored in the &quot;initialPath&quot; list.\r\n\r\nWhile I have chosen to use JavaFX for this project, I am aware that it may not be the best tool for the job... I&#39;m just trying to explore JavaFX&#39;s capabilities and would appreciate any guidance or tips on how to implement this functionality. Thank you for your help.\r\n\r\nI tried working with Timeline and Keyframes&#39; interpolation, I can&#39;t seem to find any other question on this exact topic and I&#39;m finding it hard to grasp. This is the state of my code at the moment:\r\n\r\n\r\n```\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.input.MouseEvent;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.CubicCurveTo;\r\n    import javafx.scene.shape.MoveTo;\r\n    import javafx.scene.shape.Path;\r\n    import javafx.scene.shape.PathElement;\r\n    import javafx.stage.Stage;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n\r\n    public class BezierCurves extends Application {\r\n\r\n    private double dragStartX;\r\n    private double dragStartY;\r\n    private List&lt;Path&gt; initialPaths = new ArrayList&lt;&gt;();\r\n    private Pane pane;\r\n\r\n\r\n    public Path drawCurve(double[] moveTo, double[] coordinates, int color) {\r\n        Path path = new Path();\r\n        switch (color) {\r\n            case 0 -&gt; path.setStroke(Color.RED);\r\n            case 1 -&gt; path.setStroke(Color.BLUE);\r\n            case 2 -&gt; path.setStroke(Color.GREEN);\r\n            case 3 -&gt; path.setStroke(Color.ORANGE);\r\n            default -&gt; path.setStroke(Color.BLACK);\r\n        }\r\n        path.setStrokeWidth(2);\r\n        path.setFill(null);\r\n        MoveTo moveTo1 = new MoveTo(moveTo[0], moveTo[1]);\r\n        CubicCurveTo curveTo1 = new CubicCurveTo(coordinates[0],\r\n                coordinates[1],\r\n                coordinates[2],\r\n                coordinates[3],\r\n                coordinates[4],\r\n                coordinates[5]);\r\n        path.getElements().addAll(moveTo1, curveTo1);\r\n        return path;\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        pane = new Pane();\r\n        Scene scene = new Scene(pane, 400, 400);\r\n        double centerX = 200, centerY = 200, radius = 100, kappa = 0.5522848;\r\n\r\n        Path path1 = drawCurve(new double[]{centerX, centerY - radius},\r\n                new double[]{centerX + radius * kappa,\r\n                        centerY - radius,\r\n                        centerX + radius,\r\n                        centerY - radius * kappa,\r\n                        centerX + radius, centerY}, 0);\r\n        path1.setOnMousePressed(this::handleMousePressed);\r\n        path1.setOnMouseDragged(this::handleMouseDragged);\r\n        path1.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        Path path2 = drawCurve(new double[]{centerX + radius, centerY},\r\n                new double[]{centerX + radius,\r\n                        centerY + radius * kappa,\r\n                        centerX + radius * kappa,\r\n                        centerY + radius, centerX,\r\n                        centerY + radius}, 1);\r\n        path2.setOnMousePressed(this::handleMousePressed);\r\n        path2.setOnMouseDragged(this::handleMouseDragged);\r\n        path2.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        Path path3 = drawCurve(new double[]{centerX, centerY + radius},\r\n                new double[]{centerX - radius * kappa,\r\n                        centerY + radius,\r\n                        centerX - radius,\r\n                        centerY + radius * kappa,\r\n                        centerX - radius, centerY}, 2);\r\n        path3.setOnMousePressed(this::handleMousePressed);\r\n        path3.setOnMouseDragged(this::handleMouseDragged);\r\n        path3.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        Path path4 = drawCurve(new double[]{centerX - radius, centerY},\r\n                new double[]{centerX - radius,\r\n                        centerY - radius * kappa,\r\n                        centerX - radius * kappa,\r\n                        centerY - radius,\r\n                        centerX,\r\n                        centerY - radius}, 3);\r\n        path4.setOnMousePressed(this::handleMousePressed);\r\n        path4.setOnMouseDragged(this::handleMouseDragged);\r\n        path4.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        initialPaths.addAll(Arrays.asList(path1, path2, path3, path4));\r\n        pane.getChildren().addAll(path1, path2, path3, path4);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n\r\n    private void handleMousePressed(MouseEvent event) {\r\n        dragStartX = event.getX();\r\n        dragStartY = event.getY();\r\n    }\r\n\r\n    private void handleMouseDragged(MouseEvent event) {\r\n        double offsetX = event.getX() - dragStartX;\r\n        double offsetY = event.getY() - dragStartY;\r\n       \r\n        Path path = (Path) event.getSource();\r\n\r\n        for (PathElement element : path.getElements()) {\r\n            if (element instanceof CubicCurveTo curve) {\r\n                curve.setControlX1(curve.getControlX1() + offsetX * 0.02);\r\n                curve.setControlY1(curve.getControlY1() + offsetY * 0.02);\r\n                curve.setControlX2(curve.getControlX2() + offsetX * 0.02);\r\n                curve.setControlY2(curve.getControlY2() + offsetY * 0.02);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void handleMouseReleased(MouseEvent event) {\r\n            // TODO\r\n        }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    }\r\n```\r\n","title":"JavaFX animation to restore a Path original state","body":"<p>I'm a beginner in JavaFX, and I'm working on a project where I'm using four Bezier curves to draw a circle. My goal is to eventually achieve a &quot;wobbly&quot; effect by allowing the curves to be deformed when the user drags them. To accomplish this, I want to add a feature that restores the original state of the circle when the user releases the mouse click (EDIT) performing an animation that makes the curve move to its initial path, which I stored in the &quot;initialPath&quot; list.</p>\n<p>While I have chosen to use JavaFX for this project, I am aware that it may not be the best tool for the job... I'm just trying to explore JavaFX's capabilities and would appreciate any guidance or tips on how to implement this functionality. Thank you for your help.</p>\n<p>I tried working with Timeline and Keyframes' interpolation, I can't seem to find any other question on this exact topic and I'm finding it hard to grasp. This is the state of my code at the moment:</p>\n<pre><code>    import javafx.application.Application;\n    import javafx.scene.Scene;\n    import javafx.scene.input.MouseEvent;\n    import javafx.scene.layout.Pane;\n    import javafx.scene.paint.Color;\n    import javafx.scene.shape.CubicCurveTo;\n    import javafx.scene.shape.MoveTo;\n    import javafx.scene.shape.Path;\n    import javafx.scene.shape.PathElement;\n    import javafx.stage.Stage;\n\n    import java.util.ArrayList;\n    import java.util.Arrays;\n    import java.util.List;\n\n    public class BezierCurves extends Application {\n\n    private double dragStartX;\n    private double dragStartY;\n    private List&lt;Path&gt; initialPaths = new ArrayList&lt;&gt;();\n    private Pane pane;\n\n\n    public Path drawCurve(double[] moveTo, double[] coordinates, int color) {\n        Path path = new Path();\n        switch (color) {\n            case 0 -&gt; path.setStroke(Color.RED);\n            case 1 -&gt; path.setStroke(Color.BLUE);\n            case 2 -&gt; path.setStroke(Color.GREEN);\n            case 3 -&gt; path.setStroke(Color.ORANGE);\n            default -&gt; path.setStroke(Color.BLACK);\n        }\n        path.setStrokeWidth(2);\n        path.setFill(null);\n        MoveTo moveTo1 = new MoveTo(moveTo[0], moveTo[1]);\n        CubicCurveTo curveTo1 = new CubicCurveTo(coordinates[0],\n                coordinates[1],\n                coordinates[2],\n                coordinates[3],\n                coordinates[4],\n                coordinates[5]);\n        path.getElements().addAll(moveTo1, curveTo1);\n        return path;\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        pane = new Pane();\n        Scene scene = new Scene(pane, 400, 400);\n        double centerX = 200, centerY = 200, radius = 100, kappa = 0.5522848;\n\n        Path path1 = drawCurve(new double[]{centerX, centerY - radius},\n                new double[]{centerX + radius * kappa,\n                        centerY - radius,\n                        centerX + radius,\n                        centerY - radius * kappa,\n                        centerX + radius, centerY}, 0);\n        path1.setOnMousePressed(this::handleMousePressed);\n        path1.setOnMouseDragged(this::handleMouseDragged);\n        path1.setOnMouseReleased(this::handleMouseReleased);\n\n        Path path2 = drawCurve(new double[]{centerX + radius, centerY},\n                new double[]{centerX + radius,\n                        centerY + radius * kappa,\n                        centerX + radius * kappa,\n                        centerY + radius, centerX,\n                        centerY + radius}, 1);\n        path2.setOnMousePressed(this::handleMousePressed);\n        path2.setOnMouseDragged(this::handleMouseDragged);\n        path2.setOnMouseReleased(this::handleMouseReleased);\n\n        Path path3 = drawCurve(new double[]{centerX, centerY + radius},\n                new double[]{centerX - radius * kappa,\n                        centerY + radius,\n                        centerX - radius,\n                        centerY + radius * kappa,\n                        centerX - radius, centerY}, 2);\n        path3.setOnMousePressed(this::handleMousePressed);\n        path3.setOnMouseDragged(this::handleMouseDragged);\n        path3.setOnMouseReleased(this::handleMouseReleased);\n\n        Path path4 = drawCurve(new double[]{centerX - radius, centerY},\n                new double[]{centerX - radius,\n                        centerY - radius * kappa,\n                        centerX - radius * kappa,\n                        centerY - radius,\n                        centerX,\n                        centerY - radius}, 3);\n        path4.setOnMousePressed(this::handleMousePressed);\n        path4.setOnMouseDragged(this::handleMouseDragged);\n        path4.setOnMouseReleased(this::handleMouseReleased);\n\n        initialPaths.addAll(Arrays.asList(path1, path2, path3, path4));\n        pane.getChildren().addAll(path1, path2, path3, path4);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    private void handleMousePressed(MouseEvent event) {\n        dragStartX = event.getX();\n        dragStartY = event.getY();\n    }\n\n    private void handleMouseDragged(MouseEvent event) {\n        double offsetX = event.getX() - dragStartX;\n        double offsetY = event.getY() - dragStartY;\n       \n        Path path = (Path) event.getSource();\n\n        for (PathElement element : path.getElements()) {\n            if (element instanceof CubicCurveTo curve) {\n                curve.setControlX1(curve.getControlX1() + offsetX * 0.02);\n                curve.setControlY1(curve.getControlY1() + offsetY * 0.02);\n                curve.setControlX2(curve.getControlX2() + offsetX * 0.02);\n                curve.setControlY2(curve.getControlY2() + offsetY * 0.02);\n            }\n        }\n    }\n\n    private void handleMouseReleased(MouseEvent event) {\n            // TODO\n        }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","rest","exchange-server","exchangewebservices"],"answers":[{"tags":[],"owner":{"account_id":1085024,"reputation":20746,"user_id":1080923,"display_name":"Glen Scales"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683243192,"creation_date":1683243192,"answer_id":76177984,"question_id":76170650,"body_markdown":"Basic authentication has been depreciated in Office365 so can&#39;t be used https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/deprecation-of-basic-authentication-exchange-online. You need to implement oauth in your code https://learn.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-authenticate-an-ews-application-by-using-oauth. \r\n\r\nFor what your trying to do (listen to new email in Office 365) the Graph API would be a better option as EWS is considered legacy and may not be available in the future (the only context in which EWS is needed is OnPrem Exchange). In the Graph you can create a Webhook https://learn.microsoft.com/en-us/graph/api/resources/webhooks?view=graph-rest-1.0 or as your just doing pull notifications you could use the delta endpoint https://learn.microsoft.com/en-us/graph/delta-query-overview","title":"Need to use EWS (Exchange Web Service) to receive Microsoft exchange&#39;s/Outlook emails in java spring boot Project","body":"<p>Basic authentication has been depreciated in Office365 so can't be used <a href=\"https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/deprecation-of-basic-authentication-exchange-online\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/deprecation-of-basic-authentication-exchange-online</a>. You need to implement oauth in your code <a href=\"https://learn.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-authenticate-an-ews-application-by-using-oauth\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-authenticate-an-ews-application-by-using-oauth</a>.</p>\n<p>For what your trying to do (listen to new email in Office 365) the Graph API would be a better option as EWS is considered legacy and may not be available in the future (the only context in which EWS is needed is OnPrem Exchange). In the Graph you can create a Webhook <a href=\"https://learn.microsoft.com/en-us/graph/api/resources/webhooks?view=graph-rest-1.0\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/api/resources/webhooks?view=graph-rest-1.0</a> or as your just doing pull notifications you could use the delta endpoint <a href=\"https://learn.microsoft.com/en-us/graph/delta-query-overview\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/delta-query-overview</a></p>\n"}],"owner":{"account_id":27081170,"reputation":13,"user_id":20630313,"display_name":"Pankaj Patil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177984,"answer_count":1,"score":1,"last_activity_date":1683243192,"creation_date":1683185871,"question_id":76170650,"body_markdown":"I want to connect to Microsoft exchange server(EWS) with the help of EWS API provided by Microsoft.\r\nThe Spring boot application should be a continuous listener, so that the application should be able to listen all the new emails which are getting received in the outlook.\r\n\r\nI have written a REST API to connect exchange server from java spring boot project. Created required EWS object and subscribed to the new Email notification so that it listen the new email.\r\n\r\nCode template:\r\n\r\nAdded dependency in pom as :\r\n\r\n\r\n`&lt;dependency&gt; \t`\r\n\r\n`&lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt; \t`\r\n\r\n`&lt;artifactId&gt;ews-java-api&lt;/artifactId&gt; \t`\r\n\r\n`&lt;version&gt;2.0&lt;/version&gt; `\r\n\r\n`&lt;/dependency&gt;`\r\n\r\nJava controller :\r\n\r\n    \r\n    @PostMapping(value = &quot;/EWSImplementation&quot;) \r\n    public Object ewsImplementation() { \r\n    \r\n    try { \r\n    \r\n    String userName = &quot;userName&quot;; \r\n    String password = &quot;password&quot;;\r\n    String serverAddress = &quot;https://outlook.office365.com/EWS/exchange.asmx&quot;;\r\n    \r\n    ExchangeService exService = new ExchangeService(ExchangeVersion.Exchange2010_SP2);\r\n    \r\n    ExchangeCredentials credentials = new WebCredentials(userName, password);\r\n    exService.setCredentials(credentials);\r\n    URI uri = new URI(serverAddress);\r\n    exService.setUrl(uri);\r\n    exService.setTraceEnabled(true);\r\n    \r\n    PullSubscription subscription = exService.subscribeToPullNotificationsOnAllFolders(500, null,\r\n    \t\tEventType.NewMail);\r\n    \r\n    GetEventsResults events = subscription.getEvents();\r\n    \r\n    for (ItemEvent itemEvent : events.getItemEvents()) {\r\n    \tItem item = Item.bind(exService, itemEvent.getItemId());\r\n    \tlog.info(&quot;New email received: {}&quot;, item.getSubject());\r\n    }\r\n     } catch (Exception e) {\r\n     e.printStackTrace();\r\n     }\r\n    }\r\n\r\nThe user name and password which I have used here are working in the outlook i.e. we are receiving emails in the outlook.\r\n\r\nWhen I am calling this API, it is giving error as,\r\n\r\n2023-05-04T12:39:27.304+05:30  INFO 272 --- \\[nio-8080-exec-2\\] o.a.c.c.C.\\[Tomcat\\].\\[localhost\\].\\[/\\]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-05-04T12:39:27.304+05:30  INFO 272 --- \\[nio-8080-exec-2\\] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-05-04T12:39:27.306+05:30  INFO 272 --- \\[nio-8080-exec-2\\] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\nmicrosoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The request failed. The remote server returned an error: (401)\r\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:74)\r\nat microsoft.exchange.webservices.data.core.request.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:158)\r\nat microsoft.exchange.webservices.data.core.ExchangeService.subscribeToPullNotificationsOnAllFolders(ExchangeService.java:1847)\r\nat com.nib.plp.controller.FileOperationsController.ewsImplementation(FileOperationsController.java:111)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\r\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\r\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\r\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\r\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\r\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\r\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\nat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: microsoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The remote server returned an error: (401)\r\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:644)\r\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:62)\r\n... 53 more\r\nCaused by: microsoft.exchange.webservices.data.core.exception.http.HttpErrorException: The remote server returned an error: (401)\r\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.getEwsHttpWebResponse(ServiceRequestBase.java:723)\r\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:639)\r\n... 54 more\r\n2023-05-04T12:39:29.256+05:30  WARN 272 --- \\[nio-8080-exec-2\\] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved \\[org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: The request failed. The request failed. The remote server returned an error: (401)Unauthorized\\]\r\n\r\nThanks in advance for you help.\r\nAlso suggest whether this is the correct approach to listen the new emails from EWS service.","title":"Need to use EWS (Exchange Web Service) to receive Microsoft exchange&#39;s/Outlook emails in java spring boot Project","body":"<p>I want to connect to Microsoft exchange server(EWS) with the help of EWS API provided by Microsoft.\nThe Spring boot application should be a continuous listener, so that the application should be able to listen all the new emails which are getting received in the outlook.</p>\n<p>I have written a REST API to connect exchange server from java spring boot project. Created required EWS object and subscribed to the new Email notification so that it listen the new email.</p>\n<p>Code template:</p>\n<p>Added dependency in pom as :</p>\n<p><code>&lt;dependency&gt;   </code></p>\n<p><code>&lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt;  </code></p>\n<p><code>&lt;artifactId&gt;ews-java-api&lt;/artifactId&gt;  </code></p>\n<p><code>&lt;version&gt;2.0&lt;/version&gt; </code></p>\n<p><code>&lt;/dependency&gt;</code></p>\n<p>Java controller :</p>\n<pre><code>@PostMapping(value = &quot;/EWSImplementation&quot;) \npublic Object ewsImplementation() { \n\ntry { \n\nString userName = &quot;userName&quot;; \nString password = &quot;password&quot;;\nString serverAddress = &quot;https://outlook.office365.com/EWS/exchange.asmx&quot;;\n\nExchangeService exService = new ExchangeService(ExchangeVersion.Exchange2010_SP2);\n\nExchangeCredentials credentials = new WebCredentials(userName, password);\nexService.setCredentials(credentials);\nURI uri = new URI(serverAddress);\nexService.setUrl(uri);\nexService.setTraceEnabled(true);\n\nPullSubscription subscription = exService.subscribeToPullNotificationsOnAllFolders(500, null,\n        EventType.NewMail);\n\nGetEventsResults events = subscription.getEvents();\n\nfor (ItemEvent itemEvent : events.getItemEvents()) {\n    Item item = Item.bind(exService, itemEvent.getItemId());\n    log.info(&quot;New email received: {}&quot;, item.getSubject());\n}\n } catch (Exception e) {\n e.printStackTrace();\n }\n}\n</code></pre>\n<p>The user name and password which I have used here are working in the outlook i.e. we are receiving emails in the outlook.</p>\n<p>When I am calling this API, it is giving error as,</p>\n<p>2023-05-04T12:39:27.304+05:30  INFO 272 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-05-04T12:39:27.304+05:30  INFO 272 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-05-04T12:39:27.306+05:30  INFO 272 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\nmicrosoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The request failed. The remote server returned an error: (401)\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:74)\nat microsoft.exchange.webservices.data.core.request.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:158)\nat microsoft.exchange.webservices.data.core.ExchangeService.subscribeToPullNotificationsOnAllFolders(ExchangeService.java:1847)\nat com.nib.plp.controller.FileOperationsController.ewsImplementation(FileOperationsController.java:111)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: microsoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The remote server returned an error: (401)\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:644)\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:62)\n... 53 more\nCaused by: microsoft.exchange.webservices.data.core.exception.http.HttpErrorException: The remote server returned an error: (401)\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.getEwsHttpWebResponse(ServiceRequestBase.java:723)\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:639)\n... 54 more\n2023-05-04T12:39:29.256+05:30  WARN 272 --- [nio-8080-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: The request failed. The request failed. The remote server returned an error: (401)Unauthorized]</p>\n<p>Thanks in advance for you help.\nAlso suggest whether this is the correct approach to listen the new emails from EWS service.</p>\n"},{"tags":["java","mongodb","nosql","mongotemplate"],"comments":[{"owner":{"account_id":9934708,"reputation":997,"user_id":7353417,"display_name":"pierpy"},"score":0,"creation_date":1683280984,"post_id":76177956,"comment_id":134346101,"body_markdown":"Hi, please read [Why should I not upload images of code/data/errors?](https://meta.stackoverflow.com/a/285557/7353417)","body":"Hi, please read <a href=\"https://meta.stackoverflow.com/a/285557/7353417\">Why should I not upload images of code/data/errors?</a>"},{"owner":{"account_id":18482495,"reputation":14167,"user_id":13464279,"display_name":"J.F."},"score":0,"creation_date":1686960015,"post_id":76177956,"comment_id":134875127,"body_markdown":"It seems `_id.year` does not exists. Can you check which object is returned just before last project stage?. Also you can provide some data example to try out.","body":"It seems <code>_id.year</code> does not exists. Can you check which object is returned just before last project stage?. Also you can provide some data example to try out."}],"owner":{"account_id":25261167,"reputation":1,"user_id":19092051,"display_name":"Samoha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683242813,"creation_date":1683242813,"question_id":76177956,"body_markdown":"I made a request using mongoDB Compass and it works, but I can&#39;t transfer it to my java program. I think I&#39;ve tried all the options. Perhaps there is a way to use this pipeline directly in the code, but I did not find it\r\n\r\n```\r\n[{\r\n    $match: {\r\n        $or: [{\r\n                riskReport: {\r\n                    $ne: null\r\n                }\r\n            },\r\n            {\r\n                riskOfDealReport: {\r\n                    $ne: null\r\n                }\r\n            },\r\n            {\r\n                controlProcedureReport: {\r\n                    $ne: null\r\n                }\r\n            },\r\n            {\r\n                matrixReport: {\r\n                    $ne: null\r\n                }\r\n            }\r\n        ]\r\n    }\r\n}, {\r\n    $project: {\r\n        controlProcedureReport: &#39;$controlProcedureReport&#39;,\r\n        riskReport: &#39;$riskReport&#39;,\r\n        matrixReport: &#39;$matrixReport&#39;,\r\n        documentName: {\r\n            $concatArrays: [\r\n                &#39;$riskReport.ids.value&#39;,\r\n                &#39;$controlProcedureReport.ids.value&#39;,\r\n                &#39;$matrixReport.ids&#39;\r\n            ]\r\n        }\r\n    }\r\n}, {\r\n    $unwind: {\r\n        path: &#39;$documentName&#39;\r\n    }\r\n}, {\r\n    $project: {\r\n        year: &#39;$_id.year&#39;,\r\n        periodCode: &#39;$_id.periodCode&#39;,\r\n        serialNumber: &#39;$_id.serialNumber&#39;,\r\n        formationDate: &#39;$formationDate&#39;,\r\n        status: &#39;$status&#39;,\r\n        documentName: &#39;$documentName&#39;,\r\n        fileId: {\r\n            $cond: {\r\n                &#39;if&#39;: {\r\n                    $in: [\r\n                        &#39;$documentName&#39;,\r\n                        &#39;$controlProcedureReport.ids.value&#39;\r\n                    ]\r\n                },\r\n                then: &#39;$controlProcedureReport.fileId&#39;,\r\n                &#39;else&#39;: {\r\n                    $cond: {\r\n                        &#39;if&#39;: {\r\n                            $in: [\r\n                                &#39;$documentName&#39;,\r\n                                &#39;$riskReport.ids.value&#39;\r\n                            ]\r\n                        },\r\n                        then: &#39;$riskReport.fileId&#39;,\r\n                        &#39;else&#39;: {\r\n                            $cond: {\r\n                                &#39;if&#39;: {\r\n                                    $in: [\r\n                                        &#39;$documentName&#39;,\r\n                                        &#39;$matrixReport.ids&#39;\r\n                                    ]\r\n                                },\r\n                                then: &#39;$matrixReport.fileId&#39;,\r\n                                &#39;else&#39;: &#39;&#39;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}]\r\n```\r\n\r\nI tried to use this code but I get an error\r\n\r\n```\r\n        ProjectionOperation project2 = Aggregation.project()\r\n                .and(&quot;_id.year&quot;).as(&quot;year&quot;)\r\n                .and(&quot;_id.periodCode&quot;).as(&quot;periodCode&quot;)\r\n                .and(&quot;_id.serialNumber&quot;).as(&quot;serialNumber&quot;)\r\n                .and(&quot;formationDate&quot;).as(&quot;formationDate&quot;)\r\n                .and(&quot;status&quot;).as(&quot;status&quot;)\r\n                .and(&quot;documentName&quot;).as(&quot;documentName&quot;)\r\n                .and(ConditionalOperators.when(\r\n                                     ArrayOperators.arrayOf(&quot;controlProcedureReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\r\n                             ).thenValueOf(&quot;controlProcedureReport.fileId&quot;)\r\n                             .otherwise(\r\n                                     ConditionalOperators.when(\r\n                                                     ArrayOperators.arrayOf(&quot;riskReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\r\n                                             ).thenValueOf(&quot;riskReport.fileId&quot;)\r\n                                             .otherwise(&quot;&quot;)\r\n                             )\r\n                ).as(&quot;fileId&quot;);\r\n\r\n        Aggregation aggregation = Aggregation.newAggregation(\r\n                Aggregation.match(packageCriteria),\r\n                project1,\r\n                unwind,\r\n                project2,\r\n                procedureResults,\r\n                icsDisclosures,\r\n                icsDisclosureRegulations\r\n        );\r\n\r\n        List&lt;Document&gt; mappedResults = mongoTemplate.aggregate(aggregation, DOCUMENT_PACKAGE_COLLECTION, Document.class).getMappedResults();\r\n```\r\n\r\nWith this code I am getting an error [enter image description here](https://i.stack.imgur.com/Gweni.png)\r\n\r\nHealp me please","title":"How can i convert the request to MongoTemplate","body":"<p>I made a request using mongoDB Compass and it works, but I can't transfer it to my java program. I think I've tried all the options. Perhaps there is a way to use this pipeline directly in the code, but I did not find it</p>\n<pre><code>[{\n    $match: {\n        $or: [{\n                riskReport: {\n                    $ne: null\n                }\n            },\n            {\n                riskOfDealReport: {\n                    $ne: null\n                }\n            },\n            {\n                controlProcedureReport: {\n                    $ne: null\n                }\n            },\n            {\n                matrixReport: {\n                    $ne: null\n                }\n            }\n        ]\n    }\n}, {\n    $project: {\n        controlProcedureReport: '$controlProcedureReport',\n        riskReport: '$riskReport',\n        matrixReport: '$matrixReport',\n        documentName: {\n            $concatArrays: [\n                '$riskReport.ids.value',\n                '$controlProcedureReport.ids.value',\n                '$matrixReport.ids'\n            ]\n        }\n    }\n}, {\n    $unwind: {\n        path: '$documentName'\n    }\n}, {\n    $project: {\n        year: '$_id.year',\n        periodCode: '$_id.periodCode',\n        serialNumber: '$_id.serialNumber',\n        formationDate: '$formationDate',\n        status: '$status',\n        documentName: '$documentName',\n        fileId: {\n            $cond: {\n                'if': {\n                    $in: [\n                        '$documentName',\n                        '$controlProcedureReport.ids.value'\n                    ]\n                },\n                then: '$controlProcedureReport.fileId',\n                'else': {\n                    $cond: {\n                        'if': {\n                            $in: [\n                                '$documentName',\n                                '$riskReport.ids.value'\n                            ]\n                        },\n                        then: '$riskReport.fileId',\n                        'else': {\n                            $cond: {\n                                'if': {\n                                    $in: [\n                                        '$documentName',\n                                        '$matrixReport.ids'\n                                    ]\n                                },\n                                then: '$matrixReport.fileId',\n                                'else': ''\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}]\n</code></pre>\n<p>I tried to use this code but I get an error</p>\n<pre><code>        ProjectionOperation project2 = Aggregation.project()\n                .and(&quot;_id.year&quot;).as(&quot;year&quot;)\n                .and(&quot;_id.periodCode&quot;).as(&quot;periodCode&quot;)\n                .and(&quot;_id.serialNumber&quot;).as(&quot;serialNumber&quot;)\n                .and(&quot;formationDate&quot;).as(&quot;formationDate&quot;)\n                .and(&quot;status&quot;).as(&quot;status&quot;)\n                .and(&quot;documentName&quot;).as(&quot;documentName&quot;)\n                .and(ConditionalOperators.when(\n                                     ArrayOperators.arrayOf(&quot;controlProcedureReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\n                             ).thenValueOf(&quot;controlProcedureReport.fileId&quot;)\n                             .otherwise(\n                                     ConditionalOperators.when(\n                                                     ArrayOperators.arrayOf(&quot;riskReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\n                                             ).thenValueOf(&quot;riskReport.fileId&quot;)\n                                             .otherwise(&quot;&quot;)\n                             )\n                ).as(&quot;fileId&quot;);\n\n        Aggregation aggregation = Aggregation.newAggregation(\n                Aggregation.match(packageCriteria),\n                project1,\n                unwind,\n                project2,\n                procedureResults,\n                icsDisclosures,\n                icsDisclosureRegulations\n        );\n\n        List&lt;Document&gt; mappedResults = mongoTemplate.aggregate(aggregation, DOCUMENT_PACKAGE_COLLECTION, Document.class).getMappedResults();\n</code></pre>\n<p>With this code I am getting an error <a href=\"https://i.stack.imgur.com/Gweni.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Healp me please</p>\n"},{"tags":["java","jakarta-ee","transactions","cdi","java-ee-7"],"comments":[{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":0,"creation_date":1512102681,"post_id":47355299,"comment_id":82130935,"body_markdown":"If this is relevant yet. I did some tests with CDI-Transactional. There are no significant differences to EJB. Therefore a few questions: How did you find out, that the changes did not get flushed? What DBMS are you using? Did you call doChange in a subclass or from another bean?","body":"If this is relevant yet. I did some tests with CDI-Transactional. There are no significant differences to EJB. Therefore a few questions: How did you find out, that the changes did not get flushed? What DBMS are you using? Did you call doChange in a subclass or from another bean?"},{"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"score":0,"creation_date":1513682077,"post_id":47355299,"comment_id":82737041,"body_markdown":"Hi @aschoerk we use a SQL Server 2008 R2. The call comes from the xhtml JSF frontend. Now we changed to BMT to go along with our application.","body":"Hi @aschoerk we use a SQL Server 2008 R2. The call comes from the xhtml JSF frontend. Now we changed to BMT to go along with our application."},{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":0,"creation_date":1513700326,"post_id":47355299,"comment_id":82748459,"body_markdown":"Ahh SqlServer 2008, so no MVCC. But: How did you find out, that the changes did not get flushed? Did you call doChange in a subclass or from another bean?","body":"Ahh SqlServer 2008, so no MVCC. But: How did you find out, that the changes did not get flushed? Did you call doChange in a subclass or from another bean?"},{"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"score":0,"creation_date":1513864622,"post_id":47355299,"comment_id":82820770,"body_markdown":"No the doChange was called from the same bean. It (empfangseinheittypenparameter) got flushed when we edited some of the main infos (Empfangseinheittypen)","body":"No the doChange was called from the same bean. It (empfangseinheittypenparameter) got flushed when we edited some of the main infos (Empfangseinheittypen)"},{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":0,"creation_date":1513880058,"post_id":47355299,"comment_id":82829695,"body_markdown":"&quot;called from the same bean&quot; normally means, that the transactioninterceptor is not working. Are you sure, that it does?","body":"&quot;called from the same bean&quot; normally means, that the transactioninterceptor is not working. Are you sure, that it does?"}],"answers":[{"tags":[],"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1513931929,"creation_date":1510952287,"answer_id":47359168,"question_id":47355299,"body_markdown":"According to the comments, doChange is called from the same bean.\r\nThe problem is similar to https://stackoverflow.com/questions/5109343/transactional-method-called-from-another-method-doesnt-obtain-a-transaction which means, that the transaction will not end with doChange, so you can not expect a flush to be done when returning from the method.","title":"Transactional wrapped method doesn&#39;t persist or remove","body":"<p>According to the comments, doChange is called from the same bean.\nThe problem is similar to <a href=\"https://stackoverflow.com/questions/5109343/transactional-method-called-from-another-method-doesnt-obtain-a-transaction\">@Transactional method called from another method doesn&#39;t obtain a transaction</a> which means, that the transaction will not end with doChange, so you can not expect a flush to be done when returning from the method.</p>\n"}],"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683242143,"creation_date":1510936497,"question_id":47355299,"body_markdown":"I have a problem with a CDI Named Bean which is @Transactional. \r\n\r\nI use the WildFly 11.1.0.Final.\r\n\r\nHere the Code: https://gist.github.com/stefanwendelmann/7a1f8352900067d5a59826d6ee205044\r\n\r\nThis is the persistence.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence version=&quot;2.1&quot;\r\n                 xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence \r\n                 http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\r\n      &lt;persistence-unit name=&quot;QuoLoco&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;description&gt;Verbindung zur QuoLoco Datenbank&lt;/description&gt;\r\n        &lt;jta-data-source&gt;java:/QUOLOCO_NORM&lt;/jta-data-source&gt;\r\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n        &lt;properties&gt;\r\n          &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;false&quot;/&gt;\r\n          &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.SQLServerDialect&quot;/&gt;\r\n          &lt;property name=&quot;hibernate.id.new_generator_mappings&quot; value=&quot;false&quot;/&gt;\r\n        &lt;/properties&gt;\r\n      &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nWhen I call the method &quot;doChange&quot; and only edited Empfangseinheittypenparameter, the em.remove and em.persist doesn&#39;t trigger a flush.\r\n\r\nWhen I call the method &quot;doChange&quot; and edited some of the main  Empfangseinheittypen empfangseinheittyp, I make a find on the Empfangseinheittypenparameter don&#39;t need a flush \r\n\r\nWhat am a doing wrong? \r\n\r\nBoth methods are public.\r\n\r\nPlease see a picture of the Application attached\r\n\r\nThanks in advance for your help","title":"Transactional wrapped method doesn&#39;t persist or remove","body":"<p>I have a problem with a CDI Named Bean which is @Transactional.</p>\n<p>I use the WildFly 11.1.0.Final.</p>\n<p>Here the Code: <a href=\"https://gist.github.com/stefanwendelmann/7a1f8352900067d5a59826d6ee205044\" rel=\"nofollow noreferrer\">https://gist.github.com/stefanwendelmann/7a1f8352900067d5a59826d6ee205044</a></p>\n<p>This is the persistence.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.1&quot;\n             xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence \n             http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n  &lt;persistence-unit name=&quot;QuoLoco&quot; transaction-type=&quot;JTA&quot;&gt;\n    &lt;description&gt;Verbindung zur QuoLoco Datenbank&lt;/description&gt;\n    &lt;jta-data-source&gt;java:/QUOLOCO_NORM&lt;/jta-data-source&gt;\n    &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n    &lt;properties&gt;\n      &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;false&quot;/&gt;\n      &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.SQLServerDialect&quot;/&gt;\n      &lt;property name=&quot;hibernate.id.new_generator_mappings&quot; value=&quot;false&quot;/&gt;\n    &lt;/properties&gt;\n  &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>When I call the method &quot;doChange&quot; and only edited Empfangseinheittypenparameter, the em.remove and em.persist doesn't trigger a flush.</p>\n<p>When I call the method &quot;doChange&quot; and edited some of the main  Empfangseinheittypen empfangseinheittyp, I make a find on the Empfangseinheittypenparameter don't need a flush</p>\n<p>What am a doing wrong?</p>\n<p>Both methods are public.</p>\n<p>Please see a picture of the Application attached</p>\n<p>Thanks in advance for your help</p>\n"},{"tags":["java","binary","decimal"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1683218297,"post_id":76175335,"comment_id":134336595,"body_markdown":"The quote talks about fixed precision vs arbitrary precision. You talk about decimal vs binary. What&#39;s the relation?","body":"The quote talks about fixed precision vs arbitrary precision. You talk about decimal vs binary. What&#39;s the relation?"},{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683219426,"post_id":76175335,"comment_id":134336870,"body_markdown":"I’m just trying to Both Binary and Decimal aren’t Same… So idk what Happens if I replace it","body":"I’m just trying to Both Binary and Decimal aren’t Same… So idk what Happens if I replace it"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1683219500,"post_id":76175335,"comment_id":134336886,"body_markdown":"When you replace a decimal number with a binary number, you now have a binary number. Apart from that, it&#39;s completely unclear what you&#39;re asking.","body":"When you replace a decimal number with a binary number, you now have a binary number. Apart from that, it&#39;s completely unclear what you&#39;re asking."},{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683220210,"post_id":76175335,"comment_id":134337040,"body_markdown":"So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number?","body":"So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number?"},{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683220587,"post_id":76175335,"comment_id":134337131,"body_markdown":"Is there a way I could ask someone this question directly with my Voice OMg","body":"Is there a way I could ask someone this question directly with my Voice OMg"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683241903,"creation_date":1683231961,"answer_id":76177144,"question_id":76175335,"body_markdown":"&gt;So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number.\r\n\r\nIt depends from where you are reading the value and how it is stored.  Most command line input is in the form of a string and has to be converted to a type of number (an `int` or a `double` for example).  Whether the input is specified as binary, octal, or hex, its internal state will be the same and will be binary. (In fact, everything on your hard disk is stored as binary).  For doubles, they too will be binary but are stored in a specific format/encoding (see [IEEE 754](https://en.wikipedia.org/wiki/IEEE_754)).  Java doubles are floating point values.  They are 64 bits wide and both the integral part and the fractional part can vary in size, but together, along with the size and exponent, they can&#39;t exceed 64 bits.  So if you have a very large integral part, there won&#39;t be much room left for the fractional part (and vice versa).  Ints are 32 bits wide with the high order bit used for the sign.  They are stored in [Two&#39;s complement form](https://en.wikipedia.org/wiki/Two%27s_complement).  There is more to this than explained here so I recommend you try and find more detailed information on the internal representation of numeric types.\r\n\r\n**Updated.**\r\n```\r\nint a = 443;\r\nint b = 100; // not binary it&#39;s 100 in decimal\r\nSystem.out.println(a + &quot; &quot; + b);\r\n```\r\nprints\r\n```\r\n443 100\r\n```\r\n```\r\n\r\nint a = 0b100;  // binary. Leading 0b. Value is 4\r\nint b = 0100;   // octal.  Leading 0.  value is 64\r\nint c = 0x100;  // hex. Leading 0x. value is 256  \r\nSystem.out.println(a + &quot; &quot; + b + &quot; &quot; + c);\r\n```\r\nprints\r\n```\r\n4 64 256\r\n```\r\nAlso\r\n```\r\nSystem.out.println(Integer.toString(a,2)); // second arg is output base (or radix)\r\nSystem.out.println(Integer.toString(b,8));\r\nSystem.out.println(Integer.toString(c,16));\r\n```\r\nprints\r\n```\r\n100\r\n100\r\n100","title":"Modify decimal to some binary numbers using Devtools","body":"<blockquote>\n<p>So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number.</p>\n</blockquote>\n<p>It depends from where you are reading the value and how it is stored.  Most command line input is in the form of a string and has to be converted to a type of number (an <code>int</code> or a <code>double</code> for example).  Whether the input is specified as binary, octal, or hex, its internal state will be the same and will be binary. (In fact, everything on your hard disk is stored as binary).  For doubles, they too will be binary but are stored in a specific format/encoding (see <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754</a>).  Java doubles are floating point values.  They are 64 bits wide and both the integral part and the fractional part can vary in size, but together, along with the size and exponent, they can't exceed 64 bits.  So if you have a very large integral part, there won't be much room left for the fractional part (and vice versa).  Ints are 32 bits wide with the high order bit used for the sign.  They are stored in <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">Two's complement form</a>.  There is more to this than explained here so I recommend you try and find more detailed information on the internal representation of numeric types.</p>\n<p><strong>Updated.</strong></p>\n<pre><code>int a = 443;\nint b = 100; // not binary it's 100 in decimal\nSystem.out.println(a + &quot; &quot; + b);\n</code></pre>\n<p>prints</p>\n<pre><code>443 100\n</code></pre>\n<pre><code>\nint a = 0b100;  // binary. Leading 0b. Value is 4\nint b = 0100;   // octal.  Leading 0.  value is 64\nint c = 0x100;  // hex. Leading 0x. value is 256  \nSystem.out.println(a + &quot; &quot; + b + &quot; &quot; + c);\n</code></pre>\n<p>prints</p>\n<pre><code>4 64 256\n</code></pre>\n<p>Also</p>\n<pre><code>System.out.println(Integer.toString(a,2)); // second arg is output base (or radix)\nSystem.out.println(Integer.toString(b,8));\nSystem.out.println(Integer.toString(c,16));\n</code></pre>\n<p>prints</p>\n<pre><code>100\n100\n100\n</code></pre>\n"}],"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683241903,"creation_date":1683217226,"question_id":76175335,"body_markdown":"I read an answer to a question (What is arbitrary precision integers) and the answer I read was\r\n\r\n&gt; The term fixed precision means that there are only a certain number of\r\n&gt; significant digits retained in the internal representation. This means\r\n&gt; that you would not be able to represent every integer with a magnitude\r\n&gt; greater than some threshold.\r\n&gt; \r\n&gt; With arbitrary precision integers, the integers can be as large as you\r\n&gt; need (&quot;arbitrarily large&quot;) and the library will keep all the digits\r\n&gt; down to the least significant unit. (This is obviously limited by the\r\n&gt; amount of memory in your computer.)\r\n\r\nI replaced a 443 decimal number with a 100 binary number, 100 was returned as the response, but I feel since decimal numbers and binary numbers aren&#39;t the same thing there should be a change on the response value. I know it&#39;ll be simple to some of you, but please teach me. I want to know and not be lost.","title":"Modify decimal to some binary numbers using Devtools","body":"<p>I read an answer to a question (What is arbitrary precision integers) and the answer I read was</p>\n<blockquote>\n<p>The term fixed precision means that there are only a certain number of\nsignificant digits retained in the internal representation. This means\nthat you would not be able to represent every integer with a magnitude\ngreater than some threshold.</p>\n<p>With arbitrary precision integers, the integers can be as large as you\nneed (&quot;arbitrarily large&quot;) and the library will keep all the digits\ndown to the least significant unit. (This is obviously limited by the\namount of memory in your computer.)</p>\n</blockquote>\n<p>I replaced a 443 decimal number with a 100 binary number, 100 was returned as the response, but I feel since decimal numbers and binary numbers aren't the same thing there should be a change on the response value. I know it'll be simple to some of you, but please teach me. I want to know and not be lost.</p>\n"},{"tags":["java","android"],"owner":{"account_id":10432391,"reputation":1,"user_id":7691824,"display_name":"Muok Victor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683241601,"creation_date":1683241601,"question_id":76177902,"body_markdown":"Have tried loading a responsive web app on webview but it was very slow on most devices,I then tried Chrom Custom Tabs,Trusted Web Activity and Browser Intent but you cannot hide the top tool bar for both.I tried implemeting libraries like geckoview and crosswalk without success .\r\n\r\nI expected it to be work like webview woul but a little faster like in Chrome Custom Tabs","title":"Load a responsive web app in an android app without using a Webview(Slow On Most Devices, Chrome Custom Tabs ,Browser Intent or TWA?","body":"<p>Have tried loading a responsive web app on webview but it was very slow on most devices,I then tried Chrom Custom Tabs,Trusted Web Activity and Browser Intent but you cannot hide the top tool bar for both.I tried implemeting libraries like geckoview and crosswalk without success .</p>\n<p>I expected it to be work like webview woul but a little faster like in Chrome Custom Tabs</p>\n"},{"tags":["java","security"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1345214883,"post_id":12007991,"comment_id":16018136,"body_markdown":"Securely wiping memory implies you&#39;d overwrite the region with zeroes.  I&#39;m not sure that Java can do that at its high level (C probably could).","body":"Securely wiping memory implies you&#39;d overwrite the region with zeroes.  I&#39;m not sure that Java can do that at its high level (C probably could)."},{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1345214894,"post_id":12007991,"comment_id":16018142,"body_markdown":"Remove and optimization are different things, isn&#39;t it?","body":"Remove and optimization are different things, isn&#39;t it?"},{"owner":{"account_id":8564,"reputation":235714,"user_id":15498,"accept_rate":76,"display_name":"Damien_The_Unbeliever"},"score":6,"creation_date":1345214966,"post_id":12007991,"comment_id":16018177,"body_markdown":"You need to avoid loading it into a String in the first place.","body":"You need to avoid loading it into a String in the first place."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1345223039,"post_id":12007991,"comment_id":16021493,"body_markdown":"If your attacker can access the your process space, then clearing a string after use is the least of your worries.","body":"If your attacker can access the your process space, then clearing a string after use is the least of your worries."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1345290678,"post_id":12007991,"comment_id":16036087,"body_markdown":"possible duplicate of [How can I ensure the destruction of a String object in Java?](http://stackoverflow.com/questions/5238131/how-can-i-ensure-the-destruction-of-a-string-object-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/5238131/how-can-i-ensure-the-destruction-of-a-string-object-in-java\">How can I ensure the destruction of a String object in Java?</a>"},{"owner":{"account_id":403364,"reputation":28568,"user_id":771073,"accept_rate":60,"display_name":"Martin Bonner supports Monica"},"score":1,"creation_date":1495526053,"post_id":12007991,"comment_id":75276263,"body_markdown":"@kdgregory This isn&#39;t intended as the primary defense against an attacker.  It&#39;s a defense-in-depth thing to make their life harder once they are in.","body":"@kdgregory This isn&#39;t intended as the primary defense against an attacker.  It&#39;s a defense-in-depth thing to make their life harder once they are in."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1495882228,"post_id":12007991,"comment_id":75442779,"body_markdown":"@MartinBonner - see [Maginot Line](https://en.wikipedia.org/wiki/Maginot_Line)","body":"@MartinBonner - see <a href=\"https://en.wikipedia.org/wiki/Maginot_Line\" rel=\"nofollow noreferrer\">Maginot Line</a>"}],"answers":[{"tags":[],"owner":{"account_id":1497894,"reputation":1018,"user_id":1403418,"display_name":"Dan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1345215129,"creation_date":1345215129,"answer_id":12008094,"question_id":12007991,"body_markdown":"Store the data off-heap using the &quot;Unsafe&quot; methods.  You can then zero over it when done and be certain that it won&#39;t be pushed around the heap by the JVM.\r\n\r\n\r\nHere is a good post on Unsafe:\r\n\r\nhttp://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>Store the data off-heap using the \"Unsafe\" methods.  You can then zero over it when done and be certain that it won't be pushed around the heap by the JVM.</p>\n\n<p>Here is a good post on Unsafe:</p>\n\n<p><a href=\"http://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/\" rel=\"nofollow\">http://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/</a></p>\n"},{"tags":[],"owner":{"account_id":130645,"reputation":81695,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1345223356,"creation_date":1345215178,"answer_id":12008111,"question_id":12007991,"body_markdown":"You would need direct access to the memory.\r\n\r\nYou really wouldn&#39;t be able to do this with String, since you don&#39;t have reliable access to the string, and don&#39;t know if it&#39;s been interned somewhere, or if an object was created that you don&#39;t know about.\r\n\r\nIf you really needed to this, you&#39;d have to do something like\r\n\r\n    public class SecureString implements CharSequence {\r\n        char[] data;\r\n        public void wipe() {\r\n           for(int i = 0; i &lt; data.length; i++) data[i] = &#39;.&#39;; // random char\r\n        }\r\n    }\r\n\r\nThat being said, if you&#39;re worried about data still being in memory, you have to realize that if it was ever in memory at one point, than an attacker probably already got it. The only thing you realistically protect yourself from is if a core dump is flushed to a log file.\r\n\r\nRegarding the optimizer, I incredibly doubt it will optimize away the operation. If you really needed it to, you could do something like this:\r\n\r\n    public int wipe() {\r\n        // wipe the array to a random value\r\n        java.util.Arrays.fill(data, (char)(rand.nextInt(60000));\r\n        // compute hash to force optimizer to do the wipe\r\n        int hash = 0;\r\n        for(int i = 0; i &lt; data.length; i++) {\r\n            hash = hash * 31 + (int)data[i];\r\n        }\r\n        return hash;\r\n    }\r\n\r\nThis will force the compiler to do the wipe. It makes it roughly twice as long to run, but it&#39;s a pretty fast operation as it is, and doesn&#39;t increase the order of complexity.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>You would need direct access to the memory.</p>\n\n<p>You really wouldn't be able to do this with String, since you don't have reliable access to the string, and don't know if it's been interned somewhere, or if an object was created that you don't know about.</p>\n\n<p>If you really needed to this, you'd have to do something like</p>\n\n<pre><code>public class SecureString implements CharSequence {\n    char[] data;\n    public void wipe() {\n       for(int i = 0; i &lt; data.length; i++) data[i] = '.'; // random char\n    }\n}\n</code></pre>\n\n<p>That being said, if you're worried about data still being in memory, you have to realize that if it was ever in memory at one point, than an attacker probably already got it. The only thing you realistically protect yourself from is if a core dump is flushed to a log file.</p>\n\n<p>Regarding the optimizer, I incredibly doubt it will optimize away the operation. If you really needed it to, you could do something like this:</p>\n\n<pre><code>public int wipe() {\n    // wipe the array to a random value\n    java.util.Arrays.fill(data, (char)(rand.nextInt(60000));\n    // compute hash to force optimizer to do the wipe\n    int hash = 0;\n    for(int i = 0; i &lt; data.length; i++) {\n        hash = hash * 31 + (int)data[i];\n    }\n    return hash;\n}\n</code></pre>\n\n<p>This will force the compiler to do the wipe. It makes it roughly twice as long to run, but it's a pretty fast operation as it is, and doesn't increase the order of complexity.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1683240287,"creation_date":1345215230,"answer_id":12008117,"question_id":12007991,"body_markdown":"A String cannot be &quot;wiped&quot;.  It is immutable, and short of some really dirty and dangerous tricks (using reflection, for example) you cannot alter that.\r\n\r\nSo the safest solution is to not put the data into a `String` in the first place.  Use a `StringBuilder` or an array of characters instead, or some other representation that is not immutable.  (And then clear it when you are done.   And don&#39;t use `toString()` etc on the `StringBuilder` or you have created the `String` you were trying to avoid.)\r\n\r\nOf course, the &quot;safest&quot; solution is rather impractical.  Many Java SE and 3rd party APIs *require* or *return* text data to be provided as `String` objects.\r\n\r\n----------\r\n\r\nFor the record, there are a couple of ways that you can change the contents of a String&#39;s backing array.  For example, you can use reflection to fish out a reference to the `String` object&#39;s backing array, and overwrite its contents.  However, this involves doing things that the JLS states have unspecified behavior so  you cannot guarantee that the optimizer won&#39;t do something unexpected.  And the code to do this will be non-portable, since it depends on internal details of `String` that *have changed* over time and may change again.\r\n\r\n----------\r\n\r\nMy personal take on this is that you are better off locking down your application platform so that unauthorized people can&#39;t gain access to the memory / memory dump in the first place.  After all, if the platform is not properly secured, the &quot;bad guys&quot; may be able to get hold of the string contents before you erase it.  Steps like this might be warranted for small amounts of security critical state, but if you&#39;ve got a lot of &quot;confidential&quot; information to process, it is going to be a major hassle to not be able to use normal strings and string handling.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>A String cannot be &quot;wiped&quot;.  It is immutable, and short of some really dirty and dangerous tricks (using reflection, for example) you cannot alter that.</p>\n<p>So the safest solution is to not put the data into a <code>String</code> in the first place.  Use a <code>StringBuilder</code> or an array of characters instead, or some other representation that is not immutable.  (And then clear it when you are done.   And don't use <code>toString()</code> etc on the <code>StringBuilder</code> or you have created the <code>String</code> you were trying to avoid.)</p>\n<p>Of course, the &quot;safest&quot; solution is rather impractical.  Many Java SE and 3rd party APIs <em>require</em> or <em>return</em> text data to be provided as <code>String</code> objects.</p>\n<hr />\n<p>For the record, there are a couple of ways that you can change the contents of a String's backing array.  For example, you can use reflection to fish out a reference to the <code>String</code> object's backing array, and overwrite its contents.  However, this involves doing things that the JLS states have unspecified behavior so  you cannot guarantee that the optimizer won't do something unexpected.  And the code to do this will be non-portable, since it depends on internal details of <code>String</code> that <em>have changed</em> over time and may change again.</p>\n<hr />\n<p>My personal take on this is that you are better off locking down your application platform so that unauthorized people can't gain access to the memory / memory dump in the first place.  After all, if the platform is not properly secured, the &quot;bad guys&quot; may be able to get hold of the string contents before you erase it.  Steps like this might be warranted for small amounts of security critical state, but if you've got a lot of &quot;confidential&quot; information to process, it is going to be a major hassle to not be able to use normal strings and string handling.</p>\n"},{"tags":[],"owner":{"account_id":1610686,"reputation":766,"user_id":1489700,"display_name":"Mitch Connor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1345215464,"creation_date":1345215464,"answer_id":12008195,"question_id":12007991,"body_markdown":"If you&#39;re going to use a String then I think you are worried about it appearing in a memory dump. I suggest using `String.replace()` on key-characters so that when the String is used at run-time it will change and then go out of scope after it is used and won&#39;t appear correctly in a memory dump. However, I strongly recommend that you not use a String for sensitive data.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>If you're going to use a String then I think you are worried about it appearing in a memory dump. I suggest using <code>String.replace()</code> on key-characters so that when the String is used at run-time it will change and then go out of scope after it is used and won't appear correctly in a memory dump. However, I strongly recommend that you not use a String for sensitive data.</p>\n"}],"owner":{"account_id":1066914,"reputation":321,"user_id":1067221,"accept_rate":83,"display_name":"Nerd"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13414,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":12008117,"answer_count":4,"score":11,"last_activity_date":1683240287,"creation_date":1345214807,"question_id":12007991,"body_markdown":"    String secret=&quot;foo&quot;;\r\n    WhatILookFor.securelyWipe(secret);\r\n\r\nAnd I need to know that it will not be removed by java optimizer.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<pre><code>String secret=\"foo\";\nWhatILookFor.securelyWipe(secret);\n</code></pre>\n\n<p>And I need to know that it will not be removed by java optimizer.</p>\n"},{"tags":["java","spring-boot","maven","tomcat"],"comments":[{"owner":{"account_id":15369314,"reputation":384,"user_id":11087815,"display_name":"S B"},"score":1,"creation_date":1584329696,"post_id":60699994,"comment_id":107394658,"body_markdown":"Try using `localhost:8080/sample/hello`","body":"Try using <code>localhost:8080&#47;sample&#47;hello</code>"},{"owner":{"account_id":9317965,"reputation":41,"user_id":6917684,"display_name":"reddynr"},"score":0,"creation_date":1584360714,"post_id":60699994,"comment_id":107404820,"body_markdown":"when i access this on embed server it works but on external tomcat it is not working","body":"when i access this on embed server it works but on external tomcat it is not working"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1618795034,"post_id":60699994,"comment_id":118702740,"body_markdown":"Does this answer your question? [Servlet 5.0 JAR throws compile error on javax.servlet.\\* but Servlet 4.0 JAR does not](https://stackoverflow.com/questions/64387472/servlet-5-0-jar-throws-compile-error-on-javax-servlet-but-servlet-4-0-jar-does)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/64387472/servlet-5-0-jar-throws-compile-error-on-javax-servlet-but-servlet-4-0-jar-does\">Servlet 5.0 JAR throws compile error on javax.servlet.* but Servlet 4.0 JAR does not</a>"},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1618818952,"post_id":60699994,"comment_id":118708075,"body_markdown":"As far as I&#39;m aware you cannot run Spring Boot on Tomcat 10, as Tomcat 10 uses the new Jakarta EE namespace (`jakarta.*`), instead of the old Java EE namespace (`javax.*`), see also https://github.com/spring-projects/spring-boot/issues/22414. So don&#39;t try to run Spring Boot on Tomcat 10, use Tomcat 9 or 8.5.","body":"As far as I&#39;m aware you cannot run Spring Boot on Tomcat 10, as Tomcat 10 uses the new Jakarta EE namespace (<code>jakarta.*</code>), instead of the old Java EE namespace (<code>javax.*</code>), see also <a href=\"https://github.com/spring-projects/spring-boot/issues/22414\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/22414</a>. So don&#39;t try to run Spring Boot on Tomcat 10, use Tomcat 9 or 8.5."},{"owner":{"account_id":2128309,"reputation":6169,"user_id":1889825,"accept_rate":38,"display_name":"Somnath Kadam"},"score":0,"creation_date":1691764873,"post_id":60699994,"comment_id":135540259,"body_markdown":"After adding firewall rule for selected port on windows machine works fine","body":"After adding firewall rule for selected port on windows machine works fine"}],"answers":[{"tags":[],"owner":{"account_id":7666395,"reputation":11,"user_id":5810009,"display_name":"Ph&#225;t Hồ Hữu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584335305,"creation_date":1584335305,"answer_id":60700597,"question_id":60699994,"body_markdown":"Your path is set up in this functions\r\n\r\n    @RequestMapping(value = &quot;/hello&quot;)\r\n    public String helloWorld()\r\n    {\r\n        return &quot;Hello World, Peter&quot;;\r\n    }\r\n\r\nWhich means the only thing you can access is `&quot;/hello&quot;`.\r\nAccessing to `localhost:8080/HelloWorld-0.0.1-SNAPSHOT` will not working, you have to access for `localhost:8080/${context-path}/${your-path}` in this case `localhost:8080/sample/hello` ","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>Your path is set up in this functions</p>\n\n<pre><code>@RequestMapping(value = \"/hello\")\npublic String helloWorld()\n{\n    return \"Hello World, Peter\";\n}\n</code></pre>\n\n<p>Which means the only thing you can access is <code>\"/hello\"</code>.\nAccessing to <code>localhost:8080/HelloWorld-0.0.1-SNAPSHOT</code> will not working, you have to access for <code>localhost:8080/${context-path}/${your-path}</code> in this case <code>localhost:8080/sample/hello</code> </p>\n"},{"tags":[],"owner":{"account_id":13045395,"reputation":2899,"user_id":9427395,"display_name":"dasunse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584335347,"creation_date":1584335347,"answer_id":60700601,"question_id":60699994,"body_markdown":"try this way\r\n\r\n    \r\n\r\n&gt; localhost:8080/app-name/hello\r\n\r\nIn your pom.xml\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;it.group.id&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artifactId&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent fdaotory --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n    \r\n            &lt;!--For Build War File--&gt;\r\n            &lt;dependency&gt;\r\n                 &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                 &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                 &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n    \r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;!--DEV--&gt;\r\n            &lt;finalName&gt;app-name&lt;/finalName&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;!--For Build War File--&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.2&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n            &lt;/plugins&gt;\r\n    \r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>try this way</p>\n\n<blockquote>\n  <p>localhost:8080/app-name/hello</p>\n</blockquote>\n\n<p>In your pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;it.group.id&lt;/groupId&gt;\n    &lt;artifactId&gt;artifactId&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent fdaotory --&gt;\n    &lt;/parent&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;!--For Build War File--&gt;\n        &lt;dependency&gt;\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n             &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n             &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;!--DEV--&gt;\n        &lt;finalName&gt;app-name&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n            &lt;!--For Build War File--&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5945485,"reputation":31,"user_id":4675102,"display_name":"Pavan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658129385,"creation_date":1657657404,"answer_id":72957989,"question_id":60699994,"body_markdown":"Make sure that the java version you set in your pom.xml `&lt;java.version&gt;1.8&lt;/java.version&gt;` and the java version using which the tomcat is running (version of java to which `JAVA_HOME` env variable is pointing) are same.","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>Make sure that the java version you set in your pom.xml <code>&lt;java.version&gt;1.8&lt;/java.version&gt;</code> and the java version using which the tomcat is running (version of java to which <code>JAVA_HOME</code> env variable is pointing) are same.</p>\n"},{"tags":[],"owner":{"account_id":22321398,"reputation":177,"user_id":16543985,"display_name":"ChandraShekhara"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1658135033,"creation_date":1658135033,"answer_id":73019792,"question_id":60699994,"body_markdown":"follow this steps it may helps you\r\n1) ***Build the war file*** : go to spring project directory there you do ***mvn clean install*** (make sure you have installed maven and set to environmental variable).\r\n2) ***Copy war*** :copy your war file into /webapps folder inside your tomcat folder.\r\n3) ***Start server***: to start the server go to /bin folder then execute this commands startup.sh for Linux startup.bat for windows.\r\n4) ***Hit Url***: Once the server started, open your browser the type ***localhost:{&quot;portNumber&quot;}/{warFileName}/{yourPath}*** in your case its look like this ```http://localhost:8080/{warfilename}/hello```","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>follow this steps it may helps you</p>\n<ol>\n<li><em><strong>Build the war file</strong></em> : go to spring project directory there you do <em><strong>mvn clean install</strong></em> (make sure you have installed maven and set to environmental variable).</li>\n<li><em><strong>Copy war</strong></em> :copy your war file into /webapps folder inside your tomcat folder.</li>\n<li><em><strong>Start server</strong></em>: to start the server go to /bin folder then execute this commands startup.sh for Linux startup.bat for windows.</li>\n<li><em><strong>Hit Url</strong></em>: Once the server started, open your browser the type <em><strong>localhost:{&quot;portNumber&quot;}/{warFileName}/{yourPath}</strong></em> in your case its look like this <code>http://localhost:8080/{warfilename}/hello</code></li>\n</ol>\n"}],"owner":{"account_id":9317965,"reputation":41,"user_id":6917684,"display_name":"reddynr"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7077,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1683239406,"creation_date":1584329344,"question_id":60699994,"body_markdown":"I am trying to deploy a rest sample in external tomcat. However, it does not give any error and Spring does not start also. According to Spring documentation I followed three steps\r\n\r\n1. Packages as war inside pom.xml\r\n2. `&lt;scope&gt;provided&lt;/scope&gt;` to spring-boot-starter-tomcat in pom.xml\r\n3. Extending main class with SpringBootServletInitializer\r\n\r\nWhen I place this in Tomcat&#39;s webapp folder and run &quot;catalina.bat run&quot; it says application deployed successfully, but whatever URL I try to access, it does not execute the rest method\r\n\r\n```\r\n@SpringBootApplication\r\n@RestController\r\npublic class HelloWorldApplication extends SpringBootServletInitializer\r\n{\r\n\t@Override\r\n\tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application)\r\n\t{\r\n\t\treturn application.sources(HelloWorldApplication.class);\r\n\t}\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tSpringApplication.run(HelloWorldApplication.class, args);\r\n\t}\r\n\t@RequestMapping(value = &quot;/hello&quot;)\r\n\tpublic String helloWorld()\r\n\t{\r\n\t\treturn &quot;Hello World, Peter&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nand in pom.xml\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n\r\n        \r\n&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;HelloWorld&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;HelloWorld&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n```\r\nand application.properties is like\r\n\r\n    server.servlet.context-path=/sample\r\n\r\nTomcat logs:\r\n```\r\n    15-Mar-2020 23:06:46.219 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war]\r\n    15-Mar-2020 23:06:48.102 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n    15-Mar-2020 23:06:48.409 WARNING [main] org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandom Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [270] milliseconds.\r\n    15-Mar-2020 23:06:48.440 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war] has finished in [2,221] ms\r\n```\r\n\r\n\r\nI tried accessing in below ways.but none of them worked.Could any one points me in right direction?\r\n```\r\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT\r\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/hello\r\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/HelloWorldApplication/helloWorld\r\n```  \r\n\r\n\r\n\r\n","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>I am trying to deploy a rest sample in external tomcat. However, it does not give any error and Spring does not start also. According to Spring documentation I followed three steps</p>\n<ol>\n<li>Packages as war inside pom.xml</li>\n<li><code>&lt;scope&gt;provided&lt;/scope&gt;</code> to spring-boot-starter-tomcat in pom.xml</li>\n<li>Extending main class with SpringBootServletInitializer</li>\n</ol>\n<p>When I place this in Tomcat's webapp folder and run &quot;catalina.bat run&quot; it says application deployed successfully, but whatever URL I try to access, it does not execute the rest method</p>\n<pre><code>@SpringBootApplication\n@RestController\npublic class HelloWorldApplication extends SpringBootServletInitializer\n{\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application)\n    {\n        return application.sources(HelloWorldApplication.class);\n    }\n    public static void main(String[] args)\n    {\n        SpringApplication.run(HelloWorldApplication.class, args);\n    }\n    @RequestMapping(value = &quot;/hello&quot;)\n    public String helloWorld()\n    {\n        return &quot;Hello World, Peter&quot;;\n    }\n}\n</code></pre>\n<p>and in pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n        \n&lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;HelloWorld&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;HelloWorld&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n</code></pre>\n<p>and application.properties is like</p>\n<pre><code>server.servlet.context-path=/sample\n</code></pre>\n<p>Tomcat logs:</p>\n<pre><code>    15-Mar-2020 23:06:46.219 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war]\n    15-Mar-2020 23:06:48.102 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n    15-Mar-2020 23:06:48.409 WARNING [main] org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandom Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [270] milliseconds.\n    15-Mar-2020 23:06:48.440 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war] has finished in [2,221] ms\n</code></pre>\n<p>I tried accessing in below ways.but none of them worked.Could any one points me in right direction?</p>\n<pre><code>localhost:8080/HelloWorld-0.0.1-SNAPSHOT\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/hello\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/HelloWorldApplication/helloWorld\n</code></pre>\n"},{"tags":["java","android","android-camera","getusermedia"],"owner":{"account_id":27289543,"reputation":35,"user_id":20808185,"display_name":"John House"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683238351,"creation_date":1683107151,"question_id":76162455,"body_markdown":"I 0 in java, i just need run my web application in android webview, app use camera.\r\nI have error:\r\n\r\n&gt; 2023-05-03 12:41:38.074 4975-4975/com.morservice I/chromium: [INFO:CONSOLE(0)] &quot;Uncaught (in promise) NotAllowedError: Permission denied&quot;, source: https://morservicetest.na4u.ru/add-product\r\n\r\nBut i request permission in Manifest. Right [here][1] many code for 6+ android request permission, i use api 30 = android 11. Idk what i need do for fix problem. Can u help me please?\r\n\r\n\r\nMainActivity\r\n```\r\npackage com.morservice;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.webkit.PermissionRequest;\r\nimport android.webkit.WebChromeClient;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        WebView myWebView = (WebView) findViewById(R.id.webview);\r\n        WebSettings webSettings = myWebView.getSettings();\r\n        webSettings.setJavaScriptEnabled(true);\r\n        myWebView.loadUrl(&quot;https://morservicetest.na4u.ru/frame&quot;);\r\n\r\n    }\r\n}\r\n```\r\n\r\nManifest\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.webkit.PermissionRequest&quot; /&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.МорСервис&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;meta-data\r\n                android:name=&quot;android.app.lib_name&quot;\r\n                android:value=&quot;&quot; /&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nUPDATE:\r\nI try methods from [this topic][2] but he not help me:\r\n\r\n```\r\nwebSettings.setMediaPlaybackRequiresUserGesture(false);\r\n        myWebView.setWebViewClient(new WebViewClient());\r\n        myWebView.setWebChromeClient(\r\n            new WebChromeClient() {\r\n                 // Grant permissions for cam\r\n                 @Override\r\n                 public void onPermissionRequest(final PermissionRequest request) {\r\n                     Log.d(TAG, &quot;onPermissionRequest&quot;);\r\n                     MainActivity.this.runOnUiThread(new Runnable() {\r\n                         @Override\r\n                         public void run() {\r\n                             Log.d(TAG, request.getOrigin().toString());\r\n                             if (request.getOrigin().toString().equals(&quot;file:///&quot;)) {\r\n                                 Log.d(TAG, &quot;GRANTED&quot;);\r\n                                 request.grant(request.getResources());\r\n                             } else {\r\n                                 Log.d(TAG, &quot;DENIED&quot;);\r\n                                 request.deny();\r\n                             }\r\n                         }\r\n                     });\r\n                 }\r\n             }\r\n```\r\n\r\n\r\n  [1]: https://developer.android.com/training/permissions/requesting#java\r\n  [2]: https://github.com/NativeScript/NativeScript/issues/9304","title":"How get camera permission from webview android?","body":"<p>I 0 in java, i just need run my web application in android webview, app use camera.\nI have error:</p>\n<blockquote>\n<p>2023-05-03 12:41:38.074 4975-4975/com.morservice I/chromium: [INFO:CONSOLE(0)] &quot;Uncaught (in promise) NotAllowedError: Permission denied&quot;, source: <a href=\"https://morservicetest.na4u.ru/add-product\" rel=\"nofollow noreferrer\">https://morservicetest.na4u.ru/add-product</a></p>\n</blockquote>\n<p>But i request permission in Manifest. Right <a href=\"https://developer.android.com/training/permissions/requesting#java\" rel=\"nofollow noreferrer\">here</a> many code for 6+ android request permission, i use api 30 = android 11. Idk what i need do for fix problem. Can u help me please?</p>\n<p>MainActivity</p>\n<pre><code>package com.morservice;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.os.Bundle;\nimport android.webkit.PermissionRequest;\nimport android.webkit.WebChromeClient;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        WebView myWebView = (WebView) findViewById(R.id.webview);\n        WebSettings webSettings = myWebView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n        myWebView.loadUrl(&quot;https://morservicetest.na4u.ru/frame&quot;);\n\n    }\n}\n</code></pre>\n<p>Manifest</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.webkit.PermissionRequest&quot; /&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.МорСервис&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;&quot; /&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>UPDATE:\nI try methods from <a href=\"https://github.com/NativeScript/NativeScript/issues/9304\" rel=\"nofollow noreferrer\">this topic</a> but he not help me:</p>\n<pre><code>webSettings.setMediaPlaybackRequiresUserGesture(false);\n        myWebView.setWebViewClient(new WebViewClient());\n        myWebView.setWebChromeClient(\n            new WebChromeClient() {\n                 // Grant permissions for cam\n                 @Override\n                 public void onPermissionRequest(final PermissionRequest request) {\n                     Log.d(TAG, &quot;onPermissionRequest&quot;);\n                     MainActivity.this.runOnUiThread(new Runnable() {\n                         @Override\n                         public void run() {\n                             Log.d(TAG, request.getOrigin().toString());\n                             if (request.getOrigin().toString().equals(&quot;file:///&quot;)) {\n                                 Log.d(TAG, &quot;GRANTED&quot;);\n                                 request.grant(request.getResources());\n                             } else {\n                                 Log.d(TAG, &quot;DENIED&quot;);\n                                 request.deny();\n                             }\n                         }\n                     });\n                 }\n             }\n</code></pre>\n"},{"tags":["java","protocol-buffers","protoc","proto3"],"answers":[{"tags":[],"owner":{"account_id":3179906,"reputation":42189,"user_id":2686899,"display_name":"Kenton Varda"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1458322845,"creation_date":1458322845,"answer_id":36090933,"question_id":36074849,"body_markdown":"I think you are asking: &quot;Is there a way to dynamically parse text `.proto` files at runtime to get descriptors.&quot;\r\n\r\nThe `.proto` parser is written in C++. It is available as the library `libprotoc.so`. You could, in theory, write a JNI wrapper around this to do parsing at runtime. However, there is no (official) pure-Java parser for `.proto` files.","title":"Dynamic parsing of .proto text file at runtime to generate descriptors","body":"<p>I think you are asking: \"Is there a way to dynamically parse text <code>.proto</code> files at runtime to get descriptors.\"</p>\n\n<p>The <code>.proto</code> parser is written in C++. It is available as the library <code>libprotoc.so</code>. You could, in theory, write a JNI wrapper around this to do parsing at runtime. However, there is no (official) pure-Java parser for <code>.proto</code> files.</p>\n"},{"tags":[],"owner":{"account_id":15999524,"reputation":178,"user_id":11546605,"display_name":"Dominik21"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683237729,"creation_date":1683237729,"answer_id":76177631,"question_id":36074849,"body_markdown":"I just found a solution from confluent, more precisely &#39;io.confluent:kafka-protobuf-serializer&#39;, which enables this in a very easy way\r\n\r\n        ProtobufSchema schema = new ProtobufSchema(\r\n                Files.readString(\r\n                        Path.of(&quot;/anyPath/test.proto&quot;)\r\n                )\r\n        );\r\n        Descriptor descriptor = schema.toDescriptor();\r\n        Message deserializedMessage = DynamicMessage.parseFrom(descriptor, messageByteArr);","title":"Dynamic parsing of .proto text file at runtime to generate descriptors","body":"<p>I just found a solution from confluent, more precisely 'io.confluent:kafka-protobuf-serializer', which enables this in a very easy way</p>\n<pre><code>    ProtobufSchema schema = new ProtobufSchema(\n            Files.readString(\n                    Path.of(&quot;/anyPath/test.proto&quot;)\n            )\n    );\n    Descriptor descriptor = schema.toDescriptor();\n    Message deserializedMessage = DynamicMessage.parseFrom(descriptor, messageByteArr);\n</code></pre>\n"}],"owner":{"account_id":2390568,"reputation":2798,"user_id":2090489,"accept_rate":86,"display_name":"Ankita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1852,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":36090933,"answer_count":2,"score":6,"last_activity_date":1683237729,"creation_date":1458266458,"question_id":36074849,"body_markdown":"I am currently working on Google Protocol Buffers and need to generate dynamic messages. I already have my .proto files defined as shown below.\r\n\r\n    message TSInbound\r\n    {\r\n      string id = 1;\r\n      map&lt;string,string&gt; state = 2;\r\n      map&lt;string,string&gt; reading =3;\r\n    }\r\nAFAIK,I can use File Descriptor Set to create dynamic messsages. But, that would involve using the compiler to generate the desc files. I would like to generate Descriptor without compiling the .proto files. Is there a way for dynamic creation of message using custom defined .proto files and not using protoc ?\r\n\r\n    ","title":"Dynamic parsing of .proto text file at runtime to generate descriptors","body":"<p>I am currently working on Google Protocol Buffers and need to generate dynamic messages. I already have my .proto files defined as shown below.</p>\n\n<pre><code>message TSInbound\n{\n  string id = 1;\n  map&lt;string,string&gt; state = 2;\n  map&lt;string,string&gt; reading =3;\n}\n</code></pre>\n\n<p>AFAIK,I can use File Descriptor Set to create dynamic messsages. But, that would involve using the compiler to generate the desc files. I would like to generate Descriptor without compiling the .proto files. Is there a way for dynamic creation of message using custom defined .proto files and not using protoc ?</p>\n"},{"tags":["java","spring","spring-boot","thymeleaf","spring-thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683235838,"creation_date":1683235838,"answer_id":76177485,"question_id":76177165,"body_markdown":"No, you don&#39;t need to use the `th:field=&quot;*{...}&quot;` attribute on all fields.  Any fields  not specified will be reset to their empty or default value after the form is submitted.\r\n\r\nThis does mean that if you are editing an object and you leave a field off and save the object later, any fields without a `th:field` will be saved with an empty value.  (You can use the `@SessionAttributes` annotation to persist fields even if they don&#39;t appear on the form.)","title":"Thymeleaf: Do you need to use th:field *{} on all fields?","body":"<p>No, you don't need to use the <code>th:field=&quot;*{...}&quot;</code> attribute on all fields.  Any fields  not specified will be reset to their empty or default value after the form is submitted.</p>\n<p>This does mean that if you are editing an object and you leave a field off and save the object later, any fields without a <code>th:field</code> will be saved with an empty value.  (You can use the <code>@SessionAttributes</code> annotation to persist fields even if they don't appear on the form.)</p>\n"}],"owner":{"account_id":15525089,"reputation":99,"user_id":11200149,"display_name":"NoobSailboat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683237524,"creation_date":1683232133,"question_id":76177165,"body_markdown":"After adding a Model attribute in the `@GetMapping` do you need add all fields using `th:field=&quot;*{...}&quot;` in the view&#39;s form?\r\n\r\nFor example, if I add a User to the model and I want a form that edits the name but not the DOB or anything else can I just use `th:field` on just the name and not include the other fields?\r\n\r\nIt still seems to work when I create a `@GetMapping` for edit I pass the model and just have the `th:field` for just the name, but online I see people adding all of the fields to the form.\r\n\r\nI can understand if you are trying to save the Entity, but if you&#39;re editing does it make a difference that I just don&#39;t understand?","title":"Thymeleaf: Do you need to use th:field *{} on all fields?","body":"<p>After adding a Model attribute in the <code>@GetMapping</code> do you need add all fields using <code>th:field=&quot;*{...}&quot;</code> in the view's form?</p>\n<p>For example, if I add a User to the model and I want a form that edits the name but not the DOB or anything else can I just use <code>th:field</code> on just the name and not include the other fields?</p>\n<p>It still seems to work when I create a <code>@GetMapping</code> for edit I pass the model and just have the <code>th:field</code> for just the name, but online I see people adding all of the fields to the form.</p>\n<p>I can understand if you are trying to save the Entity, but if you're editing does it make a difference that I just don't understand?</p>\n"},{"tags":["java","android","paint","bitmapfactory","oval"],"answers":[{"tags":[],"owner":{"account_id":27874078,"reputation":36,"user_id":21283922,"display_name":"Nguyễn Văn Huy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683168128,"creation_date":1683168128,"answer_id":76169241,"question_id":76169053,"body_markdown":" 1. If you want to draw rectangle with round corners:\r\n\r\n        Canvas.drawRoundRect(RectF(),10f,10f,Paint())\r\n\r\n 2. For each text, you can get text bound (a rect a round text), then draw this rect with round corners:\r\n\r\n         String text = &quot;hello&quot;;\r\n        Rect rectText = new Rect(); \r\n        paint.getTextBounds(text, 0, text.length(), rectText);\r\n        canvas.drawRoundRect(rectText.left,rectText.top,rectText.right,rectText.bottom,radius,radius,paint);\r\n      \r\n","title":"How to draw oval shape (rectangle with round corners) as text background using Paint and Convas in Android java","body":"<ol>\n<li><p>If you want to draw rectangle with round corners:</p>\n<pre><code>Canvas.drawRoundRect(RectF(),10f,10f,Paint())\n</code></pre>\n</li>\n<li><p>For each text, you can get text bound (a rect a round text), then draw this rect with round corners:</p>\n<pre><code> String text = &quot;hello&quot;;\nRect rectText = new Rect(); \npaint.getTextBounds(text, 0, text.length(), rectText);\ncanvas.drawRoundRect(rectText.left,rectText.top,rectText.right,rectText.bottom,radius,radius,paint);\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11087965,"reputation":164,"user_id":8140942,"display_name":"Waqas K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683236936,"creation_date":1683236936,"answer_id":76177574,"question_id":76169053,"body_markdown":"Final Result after making changes to @Nguyễn&#39;s Answer:\r\n\r\n    //Creating text of random length\r\n    final int min = 1;\r\n    final int max = 999999;\r\n    final String text = new Random().nextInt((max - min) + 1) + min +&quot; USD&quot;;\r\n\r\n    //Creating bitmap width according to text length\r\n    Bitmap.Config conf = Bitmap.Config.ARGB_8888;\r\n    Bitmap bmp = Bitmap.createBitmap(text.length()*20, 50, conf);\r\n\r\n    //Setting up Text properties\r\n    Paint color = new Paint();\r\n    Typeface typeface = Typeface.DEFAULT_BOLD;\r\n    color.setTypeface(typeface);\r\n    color.setTextSize(30);\r\n    color.setColor(Color.BLACK);\r\n\r\n    //Setting up Rectangle\r\n    Rect rectText = new Rect();\r\n    Paint paint = new Paint();\r\n    paint.setTextSize(32);\r\n    paint.setColor(Color.WHITE);\r\n\r\n    //Creating Convas object for the bitmap\r\n    Canvas canvas = new Canvas(bmp);\r\n\r\n    //Drawing rectangle with round corners and it width according to the text length with some extra padding\r\n    paint.getTextBounds(text, 0, text.length(), rectText);\r\n    canvas.drawRoundRect(rectText.left,10,rectText.right+10,50,10,40,paint);\r\n\r\n    //Drawing text\r\n    canvas.drawText(text, 10, 40, color);\r\n\r\nHere is the output:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3bGgh.png","title":"How to draw oval shape (rectangle with round corners) as text background using Paint and Convas in Android java","body":"<p>Final Result after making changes to @Nguyễn's Answer:</p>\n<pre><code>//Creating text of random length\nfinal int min = 1;\nfinal int max = 999999;\nfinal String text = new Random().nextInt((max - min) + 1) + min +&quot; USD&quot;;\n\n//Creating bitmap width according to text length\nBitmap.Config conf = Bitmap.Config.ARGB_8888;\nBitmap bmp = Bitmap.createBitmap(text.length()*20, 50, conf);\n\n//Setting up Text properties\nPaint color = new Paint();\nTypeface typeface = Typeface.DEFAULT_BOLD;\ncolor.setTypeface(typeface);\ncolor.setTextSize(30);\ncolor.setColor(Color.BLACK);\n\n//Setting up Rectangle\nRect rectText = new Rect();\nPaint paint = new Paint();\npaint.setTextSize(32);\npaint.setColor(Color.WHITE);\n\n//Creating Convas object for the bitmap\nCanvas canvas = new Canvas(bmp);\n\n//Drawing rectangle with round corners and it width according to the text length with some extra padding\npaint.getTextBounds(text, 0, text.length(), rectText);\ncanvas.drawRoundRect(rectText.left,10,rectText.right+10,50,10,40,paint);\n\n//Drawing text\ncanvas.drawText(text, 10, 40, color);\n</code></pre>\n<p>Here is the output:</p>\n<p><a href=\"https://i.stack.imgur.com/3bGgh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3bGgh.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":11087965,"reputation":164,"user_id":8140942,"display_name":"Waqas K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177574,"answer_count":2,"score":1,"last_activity_date":1683236936,"creation_date":1683165080,"question_id":76169053,"body_markdown":"I am trying to add an oval background to my text according to its size using Paint. There are a few problems in my code. \r\n1) I want to draw rectangle with round corners instead of the circles. \r\n2) Its size does not changes according to text length. \r\n\r\n\r\n\r\n\r\nHere is my code so far:\r\n\r\n    Bitmap.Config conf = Bitmap.Config.ARGB_8888;\r\n    Bitmap bmp = Bitmap.createBitmap(500, 280, conf);\r\n    Canvas canvas1 = new Canvas(bmp);\r\n                            \r\n    Paint color = new Paint();\r\n    color.setTextSize(30);\r\n    color.setColor(Color.BLACK);\r\n\r\n    Paint clr2=new Paint();\r\n    clr2.setColor(Color.WHITE);\r\n    canvas1.translate(200/2f,100/2f);\r\n    canvas1.drawCircle(50,0, 50, clr2);\r\n    canvas1.drawText(new Random().nextInt()+&quot; $&quot;, 0, 0, color);`\r\n\r\n\r\nCurrent results:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/ws0Tu.png)](https://i.stack.imgur.com/ws0Tu.png)\r\n\r\nExpected results:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/Eay9F.png)](https://i.stack.imgur.com/Eay9F.png)","title":"How to draw oval shape (rectangle with round corners) as text background using Paint and Convas in Android java","body":"<p>I am trying to add an oval background to my text according to its size using Paint. There are a few problems in my code.</p>\n<ol>\n<li>I want to draw rectangle with round corners instead of the circles.</li>\n<li>Its size does not changes according to text length.</li>\n</ol>\n<p>Here is my code so far:</p>\n<pre><code>Bitmap.Config conf = Bitmap.Config.ARGB_8888;\nBitmap bmp = Bitmap.createBitmap(500, 280, conf);\nCanvas canvas1 = new Canvas(bmp);\n                        \nPaint color = new Paint();\ncolor.setTextSize(30);\ncolor.setColor(Color.BLACK);\n\nPaint clr2=new Paint();\nclr2.setColor(Color.WHITE);\ncanvas1.translate(200/2f,100/2f);\ncanvas1.drawCircle(50,0, 50, clr2);\ncanvas1.drawText(new Random().nextInt()+&quot; $&quot;, 0, 0, color);`\n</code></pre>\n<p>Current results:</p>\n<p><a href=\"https://i.stack.imgur.com/ws0Tu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ws0Tu.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected results:</p>\n<p><a href=\"https://i.stack.imgur.com/Eay9F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eay9F.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","inheritance","serialization","extends"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1683251108,"post_id":76177565,"comment_id":134341917,"body_markdown":"Does this answer your question? [Downcasting in Java](https://stackoverflow.com/questions/380813/downcasting-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/380813/downcasting-in-java\">Downcasting in Java</a>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1683251141,"post_id":76177565,"comment_id":134341921,"body_markdown":"What line do you think is &quot;casting B as C&quot;?","body":"What line do you think is &quot;casting B as C&quot;?"},{"owner":{"account_id":18247034,"reputation":95,"user_id":13282920,"display_name":"Fran Turkovic"},"score":0,"creation_date":1683364237,"post_id":76177565,"comment_id":134358137,"body_markdown":"@tgdavies yes, thank for info, I never seen this before. I wrote code and was sure it will fail and it worked and I was surprised.","body":"@tgdavies yes, thank for info, I never seen this before. I wrote code and was sure it will fail and it worked and I was surprised."}],"owner":{"account_id":18247034,"reputation":95,"user_id":13282920,"display_name":"Fran Turkovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683236808,"creation_date":1683236808,"question_id":76177565,"body_markdown":"I don&#39;t understand why this code works.\r\n\r\nI have 3 classes: A, B and C.\r\n\r\nClass A have class B as attribute.\r\nClass C extends class B. I can initialize class C and set is as attribute of class A.\r\n\r\n```\r\npublic class A {\r\n    public B b;\r\n\r\n    public A(){}\r\n}\r\n\r\npublic class B {\r\n    public String username;\r\n\r\n    public B(){}\r\n}\r\n\r\npublic class C extends B {\r\n    public String password;\r\n\r\n    public C(){}\r\n}\r\n\r\npublic class Program\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\t\tA a = new A();\r\n        B b = new B();\r\n        C c = new C();\r\n        a.b = c;\r\n\t}\r\n}\r\n```\r\n\r\nHow can Java cast B as C if C is &quot;larger&quot;?\r\nIf I try to do it normally, you can&#39;t, for example:\r\n\r\n```\r\npublic class Program\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\t\tB b = new C();\r\n        // ERROR cannont find symbol (b.password)\r\n        b.password = &quot;asd&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nor I try it like this:\r\n\r\n```\r\npublic class Program\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\t\tB b = new B();\r\n        C c = new C();\r\n        b = c;\r\n        //ERROR cannont find symbol (b.password)\r\n        b.password = &quot;123&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nActual problem I have is with HTTP response. I create my own response object that has context. This context can be ResponseContext or ResponseContextPagination that extends ResponseContext. So, my Response object has ResponseContext atribute, and I can set that atribute as ResponseContextPagination and when I return whole response to client, it has valid JSON:\r\n```\r\n{&quot;context&quot;:{&quot;hasMore&quot;:false,&quot;isLoggedIn&quot;:false}}\r\n```\r\nSo, I can&#39;t get hasMore attribute if I try to access it because ResponseContext does not have hasMore attribute but why can I then even set hasMore as ResponseContextPagination object? And it serializes fine into JSON.","title":"Why I can initialize extended class in other class as attribute?","body":"<p>I don't understand why this code works.</p>\n<p>I have 3 classes: A, B and C.</p>\n<p>Class A have class B as attribute.\nClass C extends class B. I can initialize class C and set is as attribute of class A.</p>\n<pre><code>public class A {\n    public B b;\n\n    public A(){}\n}\n\npublic class B {\n    public String username;\n\n    public B(){}\n}\n\npublic class C extends B {\n    public String password;\n\n    public C(){}\n}\n\npublic class Program\n{\n\n    public static void main(String[] args) {\n        A a = new A();\n        B b = new B();\n        C c = new C();\n        a.b = c;\n    }\n}\n</code></pre>\n<p>How can Java cast B as C if C is &quot;larger&quot;?\nIf I try to do it normally, you can't, for example:</p>\n<pre><code>public class Program\n{\n\n    public static void main(String[] args) {\n        B b = new C();\n        // ERROR cannont find symbol (b.password)\n        b.password = &quot;asd&quot;;\n    }\n}\n</code></pre>\n<p>or I try it like this:</p>\n<pre><code>public class Program\n{\n\n    public static void main(String[] args) {\n        B b = new B();\n        C c = new C();\n        b = c;\n        //ERROR cannont find symbol (b.password)\n        b.password = &quot;123&quot;;\n    }\n}\n</code></pre>\n<p>Actual problem I have is with HTTP response. I create my own response object that has context. This context can be ResponseContext or ResponseContextPagination that extends ResponseContext. So, my Response object has ResponseContext atribute, and I can set that atribute as ResponseContextPagination and when I return whole response to client, it has valid JSON:</p>\n<pre><code>{&quot;context&quot;:{&quot;hasMore&quot;:false,&quot;isLoggedIn&quot;:false}}\n</code></pre>\n<p>So, I can't get hasMore attribute if I try to access it because ResponseContext does not have hasMore attribute but why can I then even set hasMore as ResponseContextPagination object? And it serializes fine into JSON.</p>\n"},{"tags":["java","abstract-class","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1683468553,"post_id":76177553,"comment_id":134368328,"body_markdown":"It seems that `&lt;discriminator&gt;` does not work in constructor mapping at the moment (version 3.5.13). Could you open a new issue on the [tracker](https://github.com/mybatis/mybatis-3/issues/new) with the details? If you are busy, I&#39;ll do it when I find the time.","body":"It seems that <code>&lt;discriminator&gt;</code> does not work in constructor mapping at the moment (version 3.5.13). Could you open a new issue on the <a href=\"https://github.com/mybatis/mybatis-3/issues/new\" rel=\"nofollow noreferrer\">tracker</a> with the details? If you are busy, I&#39;ll do it when I find the time."},{"owner":{"account_id":18149076,"reputation":111,"user_id":13202054,"display_name":"acanthite"},"score":0,"creation_date":1683815859,"post_id":76177553,"comment_id":134427172,"body_markdown":"@ave, if you can, please do it","body":"@ave, if you can, please do it"},{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1689611061,"post_id":76177553,"comment_id":135234709,"body_markdown":"Here is the [issue](https://github.com/mybatis/mybatis-3/pull/2913) and the fix has been committed. It would be great if you could verify the fix using the [3.5.14-SNAPSHOT](https://github.com/mybatis/mybatis-3/wiki/Maven#snapshot) before we release the final version.","body":"Here is the <a href=\"https://github.com/mybatis/mybatis-3/pull/2913\" rel=\"nofollow noreferrer\">issue</a> and the fix has been committed. It would be great if you could verify the fix using the <a href=\"https://github.com/mybatis/mybatis-3/wiki/Maven#snapshot\" rel=\"nofollow noreferrer\">3.5.14-SNAPSHOT</a> before we release the final version."}],"owner":{"account_id":18149076,"reputation":111,"user_id":13202054,"display_name":"acanthite"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683236651,"creation_date":1683236651,"question_id":76177553,"body_markdown":"Here are my classes:\r\n\r\n```java\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic class UtilityDetails {\r\n  private final int id;\r\n  private final string name;\r\n  private final LocalDateTime createdAt;\r\n  private final boolean archived;\r\n  private final int sortOrder;\r\n\r\n  private final TariffDetails currentTariff;\r\n}\r\n\r\n@RegisterForReflection\r\npublic abstract sealed class TariffDetails\r\n    permits TariffDualRateDetails,\r\n    TariffSingleRateDetails,\r\n    TariffSubscriptionDetails {\r\n\r\n  public abstract TariffId getId();\r\n  public abstract UtilityId getUtilityId();\r\n  public abstract LocalDateTime getCreatedAt();\r\n}\r\n\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic final class TariffDualRateDetails extends TariffDetails {\r\n    private final int id;\r\n    private final int utilityId;\r\n    private final LocalDateTime createdAt;\r\n    private final long threshold;\r\n    private final int unitSize;\r\n    private final long priceBelowThreshold;\r\n    private final long priceAboveThreshold;\r\n    private final ThresholdComparison thresholdComparison;\r\n}\r\n\r\npublic enum ThresholdComparison {\r\n  LESS_EQUALS,\r\n  STRICT_LESS;\r\n}\r\n\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic final class TariffSingleRateDetails extends TariffDetails {\r\n    private final int id;\r\n    private final int utilityId;\r\n    private final LocalDateTime createdAt;\r\n    private final long price;\r\n    private final int unitSize;\r\n}\r\n\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic final class TariffSubscriptionDetails extends TariffDetails {\r\n    private final int id;\r\n    private final int utilityId;\r\n    private final LocalDateTime createdAt;\r\n    private final long price;\r\n}\r\n```\r\n\r\nHere is my mapper:\r\n\r\n```xml\r\n    &lt;select id=&quot;getUtilityDetailsById&quot; resultMap=&quot;utilityDetails&quot;&gt;\r\n        select u.id                      as u_id,\r\n               u.name                    as u_name,\r\n               u.created_at              as u_created_at,\r\n               u.archived                as u_archived,\r\n               u.sort_order              as u_sort_order,\r\n               t.id                      as t_id,\r\n               t.created_at              as t_created_at,\r\n               case\r\n                   when tdr.tariff_id is not null then &#39;DUAL_RATE&#39;\r\n                   when tsr.tariff_id is not null then &#39;SINGLE_RATE&#39;\r\n                   when ts.tariff_id is not null then &#39;SUBSCRIPTION&#39;\r\n                   end                   as tariff_type,\r\n               tdr.threshold             as tdr_threshold,\r\n               tdr.unit_size             as tdr_unit_size,\r\n               tdr.threshold_comparison  as tdr_threshold_comparison,\r\n               tdr.price_above_threshold as tdr_price_above_threshold,\r\n               tdr.price_below_threshold as tdr_price_below_threshold,\r\n               tsr.unit_size             as tsr_unit_size,\r\n               tsr.price                 as tsr_price,\r\n               ts.price                  as ts_price\r\n\r\n        from utility u\r\n                 inner join tariff t on u.id = t.utility_id\r\n                 left join tariff_dual_rate tdr on t.id = tdr.tariff_id\r\n                 left join tariff_single_rate tsr on t.id = tsr.tariff_id\r\n                 left join tariff_subscription ts on t.id = ts.tariff_id\r\n        order by t.created_at desc\r\n        limit 1\r\n    &lt;/select&gt;\r\n\r\n    &lt;resultMap id=&quot;utilityDetails&quot; type=&quot;org.upc.model.UtilityDetails&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;name&quot; column=&quot;u_name&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;u_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;archived&quot; column=&quot;u_archived&quot;/&gt;\r\n            &lt;arg name=&quot;sortOrder&quot; column=&quot;u_sort_order&quot;/&gt;\r\n            &lt;arg name=&quot;currentTariff&quot; resultMap=&quot;tariffMap&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffDualRate&quot; type=&quot;org.upc.model.TariffDualRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\r\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;threshold&quot; column=&quot;tdr_threshold&quot;/&gt;\r\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tdr_unit_size&quot;/&gt;\r\n            &lt;arg name=&quot;thresholdComparison&quot; column=&quot;tdr_threshold_comparison&quot;/&gt;\r\n            &lt;arg name=&quot;priceAboveThreshold&quot; column=&quot;tdr_price_above_threshold&quot;/&gt;\r\n            &lt;arg name=&quot;priceBelowThreshold&quot; column=&quot;tdr_price_below_threshold&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffSingleRate&quot; type=&quot;org.upc.model.TariffSingleRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\r\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;price&quot; column=&quot;tsr_price&quot;/&gt;\r\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tsr_unit_size&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffSubscription&quot; type=&quot;org.upc.model.TariffSubscriptionDetails&quot; extends=&quot;tariffMap&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\r\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;price&quot; column=&quot;ts_price&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffMap&quot; type=&quot;org.upc.model.TariffDetails&quot;&gt;\r\n        &lt;discriminator javaType=&quot;string&quot; column=&quot;tariff_type&quot;&gt;\r\n            &lt;case value=&quot;DUAL_RATE&quot; resultMap=&quot;tariffDualRate&quot;/&gt;\r\n            &lt;case value=&quot;SINGLE_RATE&quot; resultMap=&quot;tariffSingleRate&quot;/&gt;\r\n            &lt;case value=&quot;SUBSCRIPTION&quot; resultMap=&quot;tariffSubscription&quot;/&gt;\r\n        &lt;/discriminator&gt;\r\n    &lt;/resultMap&gt;\r\n```\r\n\r\nFor some reason it tries to instantiate that abstract class `TariffDetails` and fails, because it&#39;s, well, an abstract class:\r\n\r\n```\r\norg.apache.ibatis.exceptions.PersistenceException: \r\n### Error querying database.  Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\r\n### The error may exist in org/upc/repository/UtilityRepository.xml\r\n### The error may involve org.upc.repository.UtilityRepository.getUtilityDetailsById\r\n### The error occurred while handling results\r\n### SQL: select u.id                      as u_id,                u.name                    as u_name,                u.created_at              as u_created_at,                u.archived                as u_archived,                u.sort_order              as u_sort_order,                t.id                      as t_id,                t.created_at              as t_created_at,                case                    when tdr.tariff_id is not null then &#39;DUAL_RATE&#39;                    when tsr.tariff_id is not null then &#39;SINGLE_RATE&#39;                    when ts.tariff_id is not null then &#39;SUBSCRIPTION&#39;                    end                   as tariff_type,                tdr.threshold             as tdr_threshold,                tdr.unit_size             as tdr_unit_size,                tdr.threshold_comparison  as tdr_threshold_comparison,                tdr.price_above_threshold as tdr_price_above_threshold,                tdr.price_below_threshold as tdr_price_below_threshold,                tsr.unit_size             as tsr_unit_size,                tsr.price                 as tsr_price,                ts.price                  as ts_price          from utility u                  inner join tariff t on u.id = t.utility_id                  left join tariff_dual_rate tdr on t.id = tdr.tariff_id                  left join tariff_single_rate tsr on t.id = tsr.tariff_id                  left join tariff_subscription ts on t.id = ts.tariff_id         order by t.created_at desc         limit 1\r\n### Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\r\n\tat org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:153)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:145)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:76)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat io.quarkiverse.mybatis.runtime.TransactionalSqlSession$TransactionalSqlSessionInterceptor.invoke(TransactionalSqlSession.java:197)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy55.selectOne(Unknown Source)\r\n\tat io.quarkiverse.mybatis.runtime.TransactionalSqlSession.selectOne(TransactionalSqlSession.java:46)\r\n\tat org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)\r\n\tat org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:145)\r\n\tat org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)\r\n\tat jdk.proxy5/jdk.proxy5.$Proxy62.getUtilityDetailsById(Unknown Source)\r\n\tat org.upc.services.UtilityService.getUtilityDetailsById(UtilityService.java:38)\r\n\tat org.upc.services.UtilityService_ClientProxy.getUtilityDetailsById(Unknown Source)\r\n\tat org.upc.resources.UtilityResource.getUtilityDetailsById(UtilityResource.java:35)\r\n\tat org.upc.resources.UtilityResource$quarkusrestinvoker$getUtilityDetailsById_24450c22d8569dcc4e8cbc86dde64aa8cf8ba2ac.invoke(Unknown Source)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n\tat io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\nCaused by: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:88)\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:53)\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:45)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:667)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:404)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createParameterizedResultObject(DefaultResultSetHandler.java:686)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:665)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:432)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValuesForNestedResultMap(DefaultResultSetHandler.java:988)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValues(DefaultResultSetHandler.java:333)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSet(DefaultResultSetHandler.java:308)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSets(DefaultResultSetHandler.java:201)\r\n\tat org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)\r\n\tat org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)\r\n\tat org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)\r\n\tat org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:325)\r\n\tat org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)\r\n\tat org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)\r\n\tat org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:151)\r\n\t... 26 more\r\nCaused by: java.lang.InstantiationException\r\n\tat java.base/jdk.internal.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:62)\r\n\t... 47 more\r\n```\r\n\r\nHow do I make it instantiate a correct child class?","title":"How to map abstract class result in MyBatis?","body":"<p>Here are my classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic class UtilityDetails {\n  private final int id;\n  private final string name;\n  private final LocalDateTime createdAt;\n  private final boolean archived;\n  private final int sortOrder;\n\n  private final TariffDetails currentTariff;\n}\n\n@RegisterForReflection\npublic abstract sealed class TariffDetails\n    permits TariffDualRateDetails,\n    TariffSingleRateDetails,\n    TariffSubscriptionDetails {\n\n  public abstract TariffId getId();\n  public abstract UtilityId getUtilityId();\n  public abstract LocalDateTime getCreatedAt();\n}\n\n@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic final class TariffDualRateDetails extends TariffDetails {\n    private final int id;\n    private final int utilityId;\n    private final LocalDateTime createdAt;\n    private final long threshold;\n    private final int unitSize;\n    private final long priceBelowThreshold;\n    private final long priceAboveThreshold;\n    private final ThresholdComparison thresholdComparison;\n}\n\npublic enum ThresholdComparison {\n  LESS_EQUALS,\n  STRICT_LESS;\n}\n\n@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic final class TariffSingleRateDetails extends TariffDetails {\n    private final int id;\n    private final int utilityId;\n    private final LocalDateTime createdAt;\n    private final long price;\n    private final int unitSize;\n}\n\n@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic final class TariffSubscriptionDetails extends TariffDetails {\n    private final int id;\n    private final int utilityId;\n    private final LocalDateTime createdAt;\n    private final long price;\n}\n</code></pre>\n<p>Here is my mapper:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;select id=&quot;getUtilityDetailsById&quot; resultMap=&quot;utilityDetails&quot;&gt;\n        select u.id                      as u_id,\n               u.name                    as u_name,\n               u.created_at              as u_created_at,\n               u.archived                as u_archived,\n               u.sort_order              as u_sort_order,\n               t.id                      as t_id,\n               t.created_at              as t_created_at,\n               case\n                   when tdr.tariff_id is not null then 'DUAL_RATE'\n                   when tsr.tariff_id is not null then 'SINGLE_RATE'\n                   when ts.tariff_id is not null then 'SUBSCRIPTION'\n                   end                   as tariff_type,\n               tdr.threshold             as tdr_threshold,\n               tdr.unit_size             as tdr_unit_size,\n               tdr.threshold_comparison  as tdr_threshold_comparison,\n               tdr.price_above_threshold as tdr_price_above_threshold,\n               tdr.price_below_threshold as tdr_price_below_threshold,\n               tsr.unit_size             as tsr_unit_size,\n               tsr.price                 as tsr_price,\n               ts.price                  as ts_price\n\n        from utility u\n                 inner join tariff t on u.id = t.utility_id\n                 left join tariff_dual_rate tdr on t.id = tdr.tariff_id\n                 left join tariff_single_rate tsr on t.id = tsr.tariff_id\n                 left join tariff_subscription ts on t.id = ts.tariff_id\n        order by t.created_at desc\n        limit 1\n    &lt;/select&gt;\n\n    &lt;resultMap id=&quot;utilityDetails&quot; type=&quot;org.upc.model.UtilityDetails&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;name&quot; column=&quot;u_name&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;u_created_at&quot;/&gt;\n            &lt;arg name=&quot;archived&quot; column=&quot;u_archived&quot;/&gt;\n            &lt;arg name=&quot;sortOrder&quot; column=&quot;u_sort_order&quot;/&gt;\n            &lt;arg name=&quot;currentTariff&quot; resultMap=&quot;tariffMap&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffDualRate&quot; type=&quot;org.upc.model.TariffDualRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\n            &lt;arg name=&quot;threshold&quot; column=&quot;tdr_threshold&quot;/&gt;\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tdr_unit_size&quot;/&gt;\n            &lt;arg name=&quot;thresholdComparison&quot; column=&quot;tdr_threshold_comparison&quot;/&gt;\n            &lt;arg name=&quot;priceAboveThreshold&quot; column=&quot;tdr_price_above_threshold&quot;/&gt;\n            &lt;arg name=&quot;priceBelowThreshold&quot; column=&quot;tdr_price_below_threshold&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffSingleRate&quot; type=&quot;org.upc.model.TariffSingleRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\n            &lt;arg name=&quot;price&quot; column=&quot;tsr_price&quot;/&gt;\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tsr_unit_size&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffSubscription&quot; type=&quot;org.upc.model.TariffSubscriptionDetails&quot; extends=&quot;tariffMap&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\n            &lt;arg name=&quot;price&quot; column=&quot;ts_price&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffMap&quot; type=&quot;org.upc.model.TariffDetails&quot;&gt;\n        &lt;discriminator javaType=&quot;string&quot; column=&quot;tariff_type&quot;&gt;\n            &lt;case value=&quot;DUAL_RATE&quot; resultMap=&quot;tariffDualRate&quot;/&gt;\n            &lt;case value=&quot;SINGLE_RATE&quot; resultMap=&quot;tariffSingleRate&quot;/&gt;\n            &lt;case value=&quot;SUBSCRIPTION&quot; resultMap=&quot;tariffSubscription&quot;/&gt;\n        &lt;/discriminator&gt;\n    &lt;/resultMap&gt;\n</code></pre>\n<p>For some reason it tries to instantiate that abstract class <code>TariffDetails</code> and fails, because it's, well, an abstract class:</p>\n<pre><code>org.apache.ibatis.exceptions.PersistenceException: \n### Error querying database.  Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\n### The error may exist in org/upc/repository/UtilityRepository.xml\n### The error may involve org.upc.repository.UtilityRepository.getUtilityDetailsById\n### The error occurred while handling results\n### SQL: select u.id                      as u_id,                u.name                    as u_name,                u.created_at              as u_created_at,                u.archived                as u_archived,                u.sort_order              as u_sort_order,                t.id                      as t_id,                t.created_at              as t_created_at,                case                    when tdr.tariff_id is not null then 'DUAL_RATE'                    when tsr.tariff_id is not null then 'SINGLE_RATE'                    when ts.tariff_id is not null then 'SUBSCRIPTION'                    end                   as tariff_type,                tdr.threshold             as tdr_threshold,                tdr.unit_size             as tdr_unit_size,                tdr.threshold_comparison  as tdr_threshold_comparison,                tdr.price_above_threshold as tdr_price_above_threshold,                tdr.price_below_threshold as tdr_price_below_threshold,                tsr.unit_size             as tsr_unit_size,                tsr.price                 as tsr_price,                ts.price                  as ts_price          from utility u                  inner join tariff t on u.id = t.utility_id                  left join tariff_dual_rate tdr on t.id = tdr.tariff_id                  left join tariff_single_rate tsr on t.id = tsr.tariff_id                  left join tariff_subscription ts on t.id = ts.tariff_id         order by t.created_at desc         limit 1\n### Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\n    at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:153)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:145)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:76)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at io.quarkiverse.mybatis.runtime.TransactionalSqlSession$TransactionalSqlSessionInterceptor.invoke(TransactionalSqlSession.java:197)\n    at jdk.proxy3/jdk.proxy3.$Proxy55.selectOne(Unknown Source)\n    at io.quarkiverse.mybatis.runtime.TransactionalSqlSession.selectOne(TransactionalSqlSession.java:46)\n    at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)\n    at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:145)\n    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)\n    at jdk.proxy5/jdk.proxy5.$Proxy62.getUtilityDetailsById(Unknown Source)\n    at org.upc.services.UtilityService.getUtilityDetailsById(UtilityService.java:38)\n    at org.upc.services.UtilityService_ClientProxy.getUtilityDetailsById(Unknown Source)\n    at org.upc.resources.UtilityResource.getUtilityDetailsById(UtilityResource.java:35)\n    at org.upc.resources.UtilityResource$quarkusrestinvoker$getUtilityDetailsById_24450c22d8569dcc4e8cbc86dde64aa8cf8ba2ac.invoke(Unknown Source)\n    at org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\n    at io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\n    at org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\n    at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:1623)\nCaused by: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:88)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:53)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:45)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:667)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:404)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createParameterizedResultObject(DefaultResultSetHandler.java:686)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:665)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:432)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValuesForNestedResultMap(DefaultResultSetHandler.java:988)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValues(DefaultResultSetHandler.java:333)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSet(DefaultResultSetHandler.java:308)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSets(DefaultResultSetHandler.java:201)\n    at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)\n    at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)\n    at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)\n    at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:325)\n    at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:151)\n    ... 26 more\nCaused by: java.lang.InstantiationException\n    at java.base/jdk.internal.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:62)\n    ... 47 more\n</code></pre>\n<p>How do I make it instantiate a correct child class?</p>\n"},{"tags":["java","saml","adfs","rest-client"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683266624,"post_id":76177547,"comment_id":134343326,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":12825230,"reputation":3,"user_id":9278539,"display_name":"Ranjit Singh"},"score":0,"creation_date":1684271368,"post_id":76177547,"comment_id":134493460,"body_markdown":"I have very vague information. I need to start from scratch and want to understand what are the basic steps or any library I could use to authenticate my Java API with on-premise SharePoint which is using ADFS and SAML 2.0 authentication.","body":"I have very vague information. I need to start from scratch and want to understand what are the basic steps or any library I could use to authenticate my Java API with on-premise SharePoint which is using ADFS and SAML 2.0 authentication."}],"owner":{"account_id":12825230,"reputation":3,"user_id":9278539,"display_name":"Ranjit Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683236595,"creation_date":1683236595,"question_id":76177547,"body_markdown":"I have a very basic problem to share, I am working on a small piece of application which is reading data form SharePoint On-premise API. This API is recently moved to ADFS on premise for authentication and I need to make changes to our code for this authentication. I have already gone through the documentation and understand the SAML/ADFS architecture. Could anyone please guide me to the Sample Java client code to server this purpose?\r\n\r\n\r\nThanks in advance!","title":"How to call SharePoint API which uses ADFS/SAML as authentication or authorization","body":"<p>I have a very basic problem to share, I am working on a small piece of application which is reading data form SharePoint On-premise API. This API is recently moved to ADFS on premise for authentication and I need to make changes to our code for this authentication. I have already gone through the documentation and understand the SAML/ADFS architecture. Could anyone please guide me to the Sample Java client code to server this purpose?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","excel","apache-poi"],"owner":{"account_id":11699486,"reputation":226,"user_id":13751385,"display_name":"Aria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683236348,"creation_date":1683236348,"question_id":76177527,"body_markdown":"In `poi`, I am curious to know when [`CreationHelper#createClientAnchor()`][1] is helpful. An example would be appreciated.\r\n\r\n`ClientAnchor` can be created using [`Drawing#createAnchor(int, int, int, int, int, int, int, int)`][2], and to me, that is a logical place as `Drawing` is per `Sheet` and anchor is needed for drawings.\r\n\r\nWhat I don&#39;t understand is the use case of `CreationHelper#createClientAnchor()`, especially as `CreationHelper` is per `Workbook`.\r\n\r\n  [1]: https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CreationHelper.html\r\n  [2]: https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Drawing.html","title":"Comparing two ways of creating `ClientAnchor` in POI excel","body":"<p>In <code>poi</code>, I am curious to know when <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CreationHelper.html\" rel=\"nofollow noreferrer\"><code>CreationHelper#createClientAnchor()</code></a> is helpful. An example would be appreciated.</p>\n<p><code>ClientAnchor</code> can be created using <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Drawing.html\" rel=\"nofollow noreferrer\"><code>Drawing#createAnchor(int, int, int, int, int, int, int, int)</code></a>, and to me, that is a logical place as <code>Drawing</code> is per <code>Sheet</code> and anchor is needed for drawings.</p>\n<p>What I don't understand is the use case of <code>CreationHelper#createClientAnchor()</code>, especially as <code>CreationHelper</code> is per <code>Workbook</code>.</p>\n"},{"tags":["java","eclipse","jframe","display","dispose"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1683104409,"post_id":76162059,"comment_id":134313890,"body_markdown":"have you checked with layouts? Where on your Panel is your label added? ..","body":"have you checked with layouts? Where on your Panel is your label added? .."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1683104769,"post_id":76162059,"comment_id":134313961,"body_markdown":"Use a Swing Timer instead of Thread.sleep","body":"Use a Swing Timer instead of Thread.sleep"},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":1,"creation_date":1683106120,"post_id":76162059,"comment_id":134314277,"body_markdown":"unrelated but nice to read: [java naming convention](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html)","body":"unrelated but nice to read: <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">java naming convention</a>"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683236170,"creation_date":1683105418,"answer_id":76162236,"question_id":76162059,"body_markdown":"Swing is single threaded and not thread safe.  This means that you can&#39;t perform long running or blocking operations (like `Thread.sleep`) within the context of the Event Dispatching Thread.  It also means that you shouldn&#39;t update the UI or any state the UI relies on from outside the context of the Event Dispatching Thread.\r\n\r\nSee [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for more details.\r\n\r\nEssentially, the `Thread.sleep` is likely preventing the window from been painted.\r\n\r\nInstead, use a Swing `Timer`, for example...\r\n\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.Timer;\r\n    import javax.swing.border.EmptyBorder;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            public TestPane() {\r\n                setLayout(new GridBagLayout());\r\n                setBorder(new EmptyBorder(32, 32, 32, 32));\r\n\r\n                JButton btn = new JButton(&quot;Show me the money&quot;);\r\n                btn.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        JFrame popup = new JFrame();\r\n                        JLabel label = new JLabel(&quot;Money&quot;);\r\n                        label.setBorder(new EmptyBorder(32, 32, 32, 32));\r\n                        popup.add(label);\r\n                        popup.pack();\r\n                        popup.setLocationRelativeTo(TestPane.this);\r\n                        popup.setVisible(true);\r\n                        Timer timer = new Timer(3000, new ActionListener() {\r\n                            @Override\r\n                            public void actionPerformed(ActionEvent e) {\r\n                                popup.dispose();\r\n                            }\r\n                        });\r\n                        timer.setRepeats(false);\r\n                        timer.start();\r\n                    }\r\n                });\r\n                add(btn);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\nSee [How to Use Swing Timers](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) for more details","title":"Display and then close a frame in Java","body":"<p>Swing is single threaded and not thread safe.  This means that you can't perform long running or blocking operations (like <code>Thread.sleep</code>) within the context of the Event Dispatching Thread.  It also means that you shouldn't update the UI or any state the UI relies on from outside the context of the Event Dispatching Thread.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> for more details.</p>\n<p>Essentially, the <code>Thread.sleep</code> is likely preventing the window from been painted.</p>\n<p>Instead, use a Swing <code>Timer</code>, for example...</p>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\nimport javax.swing.border.EmptyBorder;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() {\n            setLayout(new GridBagLayout());\n            setBorder(new EmptyBorder(32, 32, 32, 32));\n\n            JButton btn = new JButton(&quot;Show me the money&quot;);\n            btn.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    JFrame popup = new JFrame();\n                    JLabel label = new JLabel(&quot;Money&quot;);\n                    label.setBorder(new EmptyBorder(32, 32, 32, 32));\n                    popup.add(label);\n                    popup.pack();\n                    popup.setLocationRelativeTo(TestPane.this);\n                    popup.setVisible(true);\n                    Timer timer = new Timer(3000, new ActionListener() {\n                        @Override\n                        public void actionPerformed(ActionEvent e) {\n                            popup.dispose();\n                        }\n                    });\n                    timer.setRepeats(false);\n                    timer.start();\n                }\n            });\n            add(btn);\n        }\n\n    }\n}\n</code></pre>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">How to Use Swing Timers</a> for more details</p>\n"}],"owner":{"account_id":28491469,"reputation":3,"user_id":21804046,"display_name":"Thibaud Zobel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76162236,"answer_count":1,"score":0,"last_activity_date":1683236170,"creation_date":1683104116,"question_id":76162059,"body_markdown":"Here the code:\r\n\r\n    public class attrape_ball {\r\n        JFrame frame = new JFrame();\r\n        JPanel attrape = new JPanel();\r\n    \t\r\n        public attrape_ball(pokeball pk) {\r\n        JLabel ramasseball = new JLabel(&quot;vous avez ramasser &quot;);\r\n        attrape.add(ramasseball);\r\n    \t    \r\n        frame.setSize(200,100);\r\n        frame.add(attrape); \r\n        frame.setVisible(false);\r\n    \t}\r\n    \t\r\n        @Override\r\n        public void afficherJframe() {\r\n        frame.setVisible(true);\r\n        try {\r\n        Thread.sleep(3000);\r\n        } catch (InterruptedException e) {\r\n        e.printStackTrace();}\r\n        frame.dispose();\r\n        }\r\n    }\r\n\r\n\r\n\r\nWhen I call the function afficherJFrame() I want to display the JLabel then wait 3 sec and then close the JFrame.\r\nWhen I run it, the JLabel isn&#39;t displayed. That is the problem. (The JFrame is closed 3 sec later as I want). ","title":"Display and then close a frame in Java","body":"<p>Here the code:</p>\n<pre><code>public class attrape_ball {\n    JFrame frame = new JFrame();\n    JPanel attrape = new JPanel();\n    \n    public attrape_ball(pokeball pk) {\n    JLabel ramasseball = new JLabel(&quot;vous avez ramasser &quot;);\n    attrape.add(ramasseball);\n        \n    frame.setSize(200,100);\n    frame.add(attrape); \n    frame.setVisible(false);\n    }\n    \n    @Override\n    public void afficherJframe() {\n    frame.setVisible(true);\n    try {\n    Thread.sleep(3000);\n    } catch (InterruptedException e) {\n    e.printStackTrace();}\n    frame.dispose();\n    }\n}\n</code></pre>\n<p>When I call the function afficherJFrame() I want to display the JLabel then wait 3 sec and then close the JFrame.\nWhen I run it, the JLabel isn't displayed. That is the problem. (The JFrame is closed 3 sec later as I want).</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":2,"creation_date":1683230486,"post_id":76176939,"comment_id":134339199,"body_markdown":"Seems about right. But you mixed up your modifiers: `static`goes before `final` so your lock should be `private static final Object obj = new Object();`","body":"Seems about right. But you mixed up your modifiers: <code>static</code>goes before <code>final</code> so your lock should be <code>private static final Object obj = new Object();</code>"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":2,"creation_date":1683230526,"post_id":76176939,"comment_id":134339209,"body_markdown":"yes and yes - [this](https://stackoverflow.com/questions/15438727/if-i-synchronized-two-methods-on-the-same-class-can-they-run-simultaneously) might help.","body":"yes and yes - <a href=\"https://stackoverflow.com/questions/15438727/if-i-synchronized-two-methods-on-the-same-class-can-they-run-simultaneously\">this</a> might help."}],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683235269,"creation_date":1683235269,"answer_id":76177436,"question_id":76176939,"body_markdown":"Not quite.\r\n\r\n#1 *other threads cannot call these methods at the same time*\r\n\r\nOther threads CAN call the methods BUT they will be blocked from entering the method until the synchronized lock is released, also which thread accesses the lock is indeterminate.\r\n\r\nIts equivalent to `synchronized(this) { ... }`\r\n\r\n#2 *this means that no other threads will not be able to call this method*\r\n\r\nAny thread can call the run method, but only a single thread can acquire `obj`&#39;s lock and enter the synchronized block.\r\n\r\nSee:\r\n - [monitorenter][1]\r\n - [monitorexit][2]\r\n\r\nUsing synchronized forces the JVM to acquire and release the lock, even if there is no contention.\r\n\r\nYou should look at the package [java.util.concurrent.locks][3] for *optimistic* locking in #2, and [java.util.concurrent.atomic][4] for a better way of implementing #1.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorenter\r\n  [2]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorexit\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/package-summary.html\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/package-summary.html","title":"Synchronized methods java, how it works","body":"<p>Not quite.</p>\n<p>#1 <em>other threads cannot call these methods at the same time</em></p>\n<p>Other threads CAN call the methods BUT they will be blocked from entering the method until the synchronized lock is released, also which thread accesses the lock is indeterminate.</p>\n<p>Its equivalent to <code>synchronized(this) { ... }</code></p>\n<p>#2 <em>this means that no other threads will not be able to call this method</em></p>\n<p>Any thread can call the run method, but only a single thread can acquire <code>obj</code>'s lock and enter the synchronized block.</p>\n<p>See:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorenter\" rel=\"nofollow noreferrer\">monitorenter</a></li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorexit\" rel=\"nofollow noreferrer\">monitorexit</a></li>\n</ul>\n<p>Using synchronized forces the JVM to acquire and release the lock, even if there is no contention.</p>\n<p>You should look at the package <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/package-summary.html\" rel=\"nofollow noreferrer\">java.util.concurrent.locks</a> for <em>optimistic</em> locking in #2, and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/package-summary.html\" rel=\"nofollow noreferrer\">java.util.concurrent.atomic</a> for a better way of implementing #1.</p>\n"}],"owner":{"account_id":27566231,"reputation":27,"user_id":21038368,"display_name":"wydra__"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76177436,"answer_count":1,"score":0,"last_activity_date":1683235269,"creation_date":1683230042,"question_id":76176939,"body_markdown":"**1.**\r\n\r\n```\r\npublic class SynchronizedCounter\r\n {\r\nprivate int c = 0;`\r\n\r\n     public synchronized void increment() \r\n     {\r\n         c++;\r\n     }\r\n\r\n    public synchronized void decrement() \r\n    {\r\n        c--;\r\n    }\r\n\r\n    public synchronized int value() \r\n    {\r\n        return c;\r\n    }\r\n}\r\n```\r\n\r\n \r\n**2.**\r\n\r\n```\r\npublic class MyThread extends Thread\r\n {\r\n     private int threadId;\r\n     private final static Object obj = new Object();\r\n\r\n     public MyThread(int threadId)\r\n     {\r\n         this.threadId = threadId;\r\n     }\r\n\r\n     @Override\r\n     public void run()\r\n     {\r\n         synchronized (obj)\r\n         {\r\n             for (int i = 0; i &lt; 1000; i++)\r\n                 System.out.println(this.threadId);\r\n         }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI would like to present my reasoning and ask you to indicate whether it is correct.\r\n\r\n**Ex 1**\r\n All 3 methods are synchronized. They are non-static and synchronized on a given instance of that\r\nclass. This means that if we have an object c1 of class SynchronizedCounter then if thread1\r\nexecutes, for example, the increment method then this method as well as all other synchronized methods are blocked for other threads,  other threads cannot call these methods at the same time.\r\n\r\n**Ex 2**\r\n Here we are blocking the body of the run method on the final, importantly, static obj object. By virtue of being static, it is a property of the class, and therefore shared by all objects of that class, static obj is a common monitor for all instances of MyThread. So if thread1 calls the run method it will block it on the obj object. And since the obj object is static ,this means that no other threads will not be able to call this method until the thread that blocked it unblocks it.\r\n","title":"Synchronized methods java, how it works","body":"<p><strong>1.</strong></p>\n<pre><code>public class SynchronizedCounter\n {\nprivate int c = 0;`\n\n     public synchronized void increment() \n     {\n         c++;\n     }\n\n    public synchronized void decrement() \n    {\n        c--;\n    }\n\n    public synchronized int value() \n    {\n        return c;\n    }\n}\n</code></pre>\n<p><strong>2.</strong></p>\n<pre><code>public class MyThread extends Thread\n {\n     private int threadId;\n     private final static Object obj = new Object();\n\n     public MyThread(int threadId)\n     {\n         this.threadId = threadId;\n     }\n\n     @Override\n     public void run()\n     {\n         synchronized (obj)\n         {\n             for (int i = 0; i &lt; 1000; i++)\n                 System.out.println(this.threadId);\n         }\n    }\n}\n</code></pre>\n<p>I would like to present my reasoning and ask you to indicate whether it is correct.</p>\n<p><strong>Ex 1</strong>\nAll 3 methods are synchronized. They are non-static and synchronized on a given instance of that\nclass. This means that if we have an object c1 of class SynchronizedCounter then if thread1\nexecutes, for example, the increment method then this method as well as all other synchronized methods are blocked for other threads,  other threads cannot call these methods at the same time.</p>\n<p><strong>Ex 2</strong>\nHere we are blocking the body of the run method on the final, importantly, static obj object. By virtue of being static, it is a property of the class, and therefore shared by all objects of that class, static obj is a common monitor for all instances of MyThread. So if thread1 calls the run method it will block it on the obj object. And since the obj object is static ,this means that no other threads will not be able to call this method until the thread that blocked it unblocks it.</p>\n"},{"tags":["java","spring","multithreading","spring-boot","concurrency"],"comments":[{"owner":{"account_id":22046326,"reputation":1,"user_id":16311275,"display_name":"Robert Pho"},"score":0,"creation_date":1660007895,"post_id":73285524,"comment_id":129425901,"body_markdown":"Maybe this post can help you too.\nhttps://stackoverflow.com/questions/54801769/what-purpose-of-the-spring-enableasync-annotation-and-how-to-use-it-well","body":"Maybe this post can help you too. <a href=\"https://stackoverflow.com/questions/54801769/what-purpose-of-the-spring-enableasync-annotation-and-how-to-use-it-well\" title=\"what purpose of the spring enableasync annotation and how to use it well\">stackoverflow.com/questions/54801769/&hellip;</a>"},{"owner":{"account_id":1975034,"reputation":961,"user_id":1773011,"accept_rate":85,"display_name":"lightrek"},"score":0,"creation_date":1660054270,"post_id":73285524,"comment_id":129438719,"body_markdown":"Thanks! but if I only use `@EnableScheduling` without `@EnableAsync`, how can the scheduled task run? (I suppose the scheduled task should run on a separate thread asyncrously)","body":"Thanks! but if I only use <code>@EnableScheduling</code> without <code>@EnableAsync</code>, how can the scheduled task run? (I suppose the scheduled task should run on a separate thread asyncrously)"},{"owner":{"account_id":7258992,"reputation":2411,"user_id":5536516,"accept_rate":86,"display_name":"nyg"},"score":0,"creation_date":1679263691,"post_id":73285524,"comment_id":133685606,"body_markdown":"Similar question: https://stackoverflow.com/questions/14623092/using-spring-scheduled-and-async-together","body":"Similar question: <a href=\"https://stackoverflow.com/questions/14623092/using-spring-scheduled-and-async-together\" title=\"using spring scheduled and async together\">stackoverflow.com/questions/14623092/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7258992,"reputation":2411,"user_id":5536516,"accept_rate":86,"display_name":"nyg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683234998,"creation_date":1679263590,"answer_id":75785217,"question_id":73285524,"body_markdown":"I do not think @Async and @Scheduled are meant to be used on the same method, even if it does work.\r\n\r\n* First, a @Scheduled method should return void and have no parameters (for obvious reasons), whereas an @Async method can have parameters and can return a value (i.e. `Future&lt;?&gt;`).\r\n\r\n* Second, @EnableScheduling will look for a `TaskScheduler` to execute the @Scheduled methods, whereas @EnableAsync will look for a `TaskExecutor` to execute the @Async methods. The two are different things, Spring doc [says][1]:\r\n\r\n  &gt; The Spring Framework provides abstractions for the **asynchronous execution** and **scheduling** of tasks with the **TaskExecutor** and **TaskScheduler** interfaces, *respectively*.\r\n\r\n----------\r\n\r\nHowever, it is possible to use @EnableAsync and @EnableScheduling on the same @Configuration class, depending on what you want to do. For example, the Spring documentation [shows][3] this example:\r\n\r\n```java\r\n@Configuration\r\n@EnableAsync\r\n@EnableScheduling\r\npublic class AppConfig {}\r\n```\r\n\r\nIt can indeed be a bit confusing at first, but as they mention:\r\n\r\n&gt; You can pick and choose the relevant annotations for your application. For example, if you need only support for @Scheduled, you can omit @EnableAsync.\r\n\r\nThe example is probably there if you want to do something like:\r\n\r\n```java\r\n@Configuration\r\n@EnableAsync\r\n@EnableScheduling\r\npublic class AppConfig {\r\n\r\n    @Async // requires @EnableAsync\r\n    public Future&lt;String&gt; asyncMethod(String data) {\r\n        // do something\r\n        return CompletableFuture.completedFuture(&quot;finished&quot;);\r\n    }\r\n\r\n    @Scheduled(fixedRate = 1_000) // requires @EnableScheduling\r\n    public void everySecond() {\r\n        // do something\r\n    }\r\n}\r\n```\r\n\r\n----------\r\n\r\nAs for your question, _how can the scheduled task run?_, the doc for [@EnableScheduling][2] says:\r\n\r\n&gt; By default, Spring will search for an associated scheduler definition: either a unique TaskScheduler bean in the context, or a TaskScheduler bean named &quot;taskScheduler&quot; otherwise; (…). If neither of the two is resolvable, a **local single-threaded default scheduler** will be created and used within the registrar.\r\n\r\nSo, if you have multiple @Scheduled methods and want them to be able to execute in parallel, you need to define a `TaskScheduler` with a pool size greater than one:\r\n\r\n```java\r\n@Configuration\r\n@EnableScheduling\r\npublic class SchedulerContext {\r\n\r\n    @Bean\r\n    public TaskScheduler taskScheduler() {\r\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\r\n        scheduler.setThreadNamePrefix(&quot;sched-task-&quot;);\r\n        scheduler.setPoolSize(10); // 1 is the default value\r\n        scheduler.initialize();\r\n        return scheduler;\r\n    }\r\n}\r\n```\r\n\r\n\r\n[1]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling\r\n[2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableScheduling.html\r\n[3]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling-enable-annotation-support","title":"Why need @EnableAsync annotation since @EnableScheduling already trigger scheduled task on a different thread asynchronously?","body":"<p>I do not think @Async and @Scheduled are meant to be used on the same method, even if it does work.</p>\n<ul>\n<li><p>First, a @Scheduled method should return void and have no parameters (for obvious reasons), whereas an @Async method can have parameters and can return a value (i.e. <code>Future&lt;?&gt;</code>).</p>\n</li>\n<li><p>Second, @EnableScheduling will look for a <code>TaskScheduler</code> to execute the @Scheduled methods, whereas @EnableAsync will look for a <code>TaskExecutor</code> to execute the @Async methods. The two are different things, Spring doc <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling\" rel=\"nofollow noreferrer\">says</a>:</p>\n<blockquote>\n<p>The Spring Framework provides abstractions for the <strong>asynchronous execution</strong> and <strong>scheduling</strong> of tasks with the <strong>TaskExecutor</strong> and <strong>TaskScheduler</strong> interfaces, <em>respectively</em>.</p>\n</blockquote>\n</li>\n</ul>\n<hr />\n<p>However, it is possible to use @EnableAsync and @EnableScheduling on the same @Configuration class, depending on what you want to do. For example, the Spring documentation <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling-enable-annotation-support\" rel=\"nofollow noreferrer\">shows</a> this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class AppConfig {}\n</code></pre>\n<p>It can indeed be a bit confusing at first, but as they mention:</p>\n<blockquote>\n<p>You can pick and choose the relevant annotations for your application. For example, if you need only support for @Scheduled, you can omit @EnableAsync.</p>\n</blockquote>\n<p>The example is probably there if you want to do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class AppConfig {\n\n    @Async // requires @EnableAsync\n    public Future&lt;String&gt; asyncMethod(String data) {\n        // do something\n        return CompletableFuture.completedFuture(&quot;finished&quot;);\n    }\n\n    @Scheduled(fixedRate = 1_000) // requires @EnableScheduling\n    public void everySecond() {\n        // do something\n    }\n}\n</code></pre>\n<hr />\n<p>As for your question, <em>how can the scheduled task run?</em>, the doc for <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableScheduling.html\" rel=\"nofollow noreferrer\">@EnableScheduling</a> says:</p>\n<blockquote>\n<p>By default, Spring will search for an associated scheduler definition: either a unique TaskScheduler bean in the context, or a TaskScheduler bean named &quot;taskScheduler&quot; otherwise; (…). If neither of the two is resolvable, a <strong>local single-threaded default scheduler</strong> will be created and used within the registrar.</p>\n</blockquote>\n<p>So, if you have multiple @Scheduled methods and want them to be able to execute in parallel, you need to define a <code>TaskScheduler</code> with a pool size greater than one:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableScheduling\npublic class SchedulerContext {\n\n    @Bean\n    public TaskScheduler taskScheduler() {\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\n        scheduler.setThreadNamePrefix(&quot;sched-task-&quot;);\n        scheduler.setPoolSize(10); // 1 is the default value\n        scheduler.initialize();\n        return scheduler;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1975034,"reputation":961,"user_id":1773011,"accept_rate":85,"display_name":"lightrek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683234998,"creation_date":1660007369,"question_id":73285524,"body_markdown":"I have the following code using @EnableScheduling and @EnableAsync together:\r\n\r\n    @Configuration\r\n    @EnableAsync\r\n    @EnableScheduling\r\n    public class PollingAgent {\r\n    \r\n        @Async\r\n        @Scheduled(fixedRate=INTERVAL_RATE, initialDelay = 10000) //setting an initial delay to let the beans get loaded\r\n        void checkAvailableAndStartJob() {\r\n            if(m_messageOnDemand) {\r\n                try {\r\n                    LOGGER.info(&quot;check job messages and start job if possible&quot;);\r\n                    jobIdOnDemandSubscriber.StartJobIfMessageAvailable(m_applicationContext);\r\n                } catch (Exception e) {\r\n                    LOGGER.info(&quot;Scheduler run failed: &quot; + e.getMessage());\r\n                }\r\n            }\r\n        }\r\n    }\r\nI think even without `@EnableAsync` and `@Async`, `checkAvailableAndStartJob` will be triggered asynchronously on a different thread, why we need them?\r\n","title":"Why need @EnableAsync annotation since @EnableScheduling already trigger scheduled task on a different thread asynchronously?","body":"<p>I have the following code using @EnableScheduling and @EnableAsync together:</p>\n<pre><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class PollingAgent {\n\n    @Async\n    @Scheduled(fixedRate=INTERVAL_RATE, initialDelay = 10000) //setting an initial delay to let the beans get loaded\n    void checkAvailableAndStartJob() {\n        if(m_messageOnDemand) {\n            try {\n                LOGGER.info(&quot;check job messages and start job if possible&quot;);\n                jobIdOnDemandSubscriber.StartJobIfMessageAvailable(m_applicationContext);\n            } catch (Exception e) {\n                LOGGER.info(&quot;Scheduler run failed: &quot; + e.getMessage());\n            }\n        }\n    }\n}\n</code></pre>\n<p>I think even without <code>@EnableAsync</code> and <code>@Async</code>, <code>checkAvailableAndStartJob</code> will be triggered asynchronously on a different thread, why we need them?</p>\n"},{"tags":["java","android","android-studio","gradle"],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683236220,"answer_count":0,"score":0,"last_activity_date":1683234818,"creation_date":1683234818,"question_id":76177397,"body_markdown":"After upgrading to the latest version of android studio Flamingo, I am having the following problem.\r\n\r\nI also created an empty project from scratch, but it gives me problems.\r\n\r\nThe same problem is found here: https://stackoverflow.com/questions/76036154/not-able-to-find-compatible-version-of-embedded-java-version-and-gradle-tools-ve\r\n\r\nCan you give me a hand?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nA problem occurred configuring root project &#39;My Application&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\n   &gt; Could not resolve com.android.tools.build:gradle:8.0.1.\r\n     Required by:\r\n         project : &gt; com.android.application:com.android.application.gradle.plugin:8.0.1\r\n         project : &gt; com.android.library:com.android.library.gradle.plugin:8.0.1\r\n      &gt; No matching variant of com.android.tools.build:gradle:8.0.1 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;8.0&#39; but:\r\n          - Variant &#39;apiElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;javadocElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;runtimeElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;sourcesElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n\r\n* Try:\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aYK1u.png","title":"Android No matching variant of com.android.tools.build:gradle:8.0.1 was found","body":"<p>After upgrading to the latest version of android studio Flamingo, I am having the following problem.</p>\n<p>I also created an empty project from scratch, but it gives me problems.</p>\n<p>The same problem is found here: <a href=\"https://stackoverflow.com/questions/76036154/not-able-to-find-compatible-version-of-embedded-java-version-and-gradle-tools-ve\">Not able to Find compatible version of embedded java version and gradle tools version for Android Studio Flamingo</a></p>\n<p>Can you give me a hand?</p>\n<p><a href=\"https://i.stack.imgur.com/aYK1u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aYK1u.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>A problem occurred configuring root project 'My Application'.\n&gt; Could not resolve all files for configuration ':classpath'.\n   &gt; Could not resolve com.android.tools.build:gradle:8.0.1.\n     Required by:\n         project : &gt; com.android.application:com.android.application.gradle.plugin:8.0.1\n         project : &gt; com.android.library:com.android.library.gradle.plugin:8.0.1\n      &gt; No matching variant of com.android.tools.build:gradle:8.0.1 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '8.0' but:\n          - Variant 'apiElements' capability com.android.tools.build:gradle:8.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'javadocElements' capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'runtimeElements' capability com.android.tools.build:gradle:8.0.1 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'sourcesElements' capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n\n* Try:\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n</code></pre>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1681888988,"post_id":76051402,"comment_id":134127797,"body_markdown":"In future it helps if you provide a complete example - your code is missing the Todo class. In any case the code shown works fine, so whatever is causing your issue is not related to this code. It sounds like a runtime issue - it can&#39;t find BaseStream. Since this class is part of the core Java runtime library, this suggests something odd is happening with either your classpath or your JRE. If you run Java with the -verbose:class flag it will display more info about the class-loading, which might help diagnose the problem.","body":"In future it helps if you provide a complete example - your code is missing the Todo class. In any case the code shown works fine, so whatever is causing your issue is not related to this code. It sounds like a runtime issue - it can&#39;t find BaseStream. Since this class is part of the core Java runtime library, this suggests something odd is happening with either your classpath or your JRE. If you run Java with the -verbose:class flag it will display more info about the class-loading, which might help diagnose the problem."},{"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"score":0,"creation_date":1681890462,"post_id":76051402,"comment_id":134128188,"body_markdown":"Thank you, so much for the help. I tried using jdk version-8 and the error got resolved but I tried switching back to jdk-17 and got the same mistake again. But, it was working perfectly fine till yesterday.","body":"Thank you, so much for the help. I tried using jdk version-8 and the error got resolved but I tried switching back to jdk-17 and got the same mistake again. But, it was working perfectly fine till yesterday."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1681920279,"post_id":76051402,"comment_id":134135840,"body_markdown":"Do you mean it fails in jdk7 (that is jdk1.7) or it fails in jdk17? It sounds like you have used javac from jdk8 or higher and java runtime from before jdk8.","body":"Do you mean it fails in jdk7 (that is jdk1.7) or it fails in jdk17? It sounds like you have used javac from jdk8 or higher and java runtime from before jdk8."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1681926379,"post_id":76051402,"comment_id":134137125,"body_markdown":"Please provide more information, such as operation system, exact JRE/JDK implementation (at compile-time and run-time), versions of dependencies, how you&#39;re compiling the project, how you&#39;re running the project, and so on. If you could reproduce this problem with a [mre], that would be ideal.","body":"Please provide more information, such as operation system, exact JRE/JDK implementation (at compile-time and run-time), versions of dependencies, how you&#39;re compiling the project, how you&#39;re running the project, and so on. If you could reproduce this problem with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that would be ideal."},{"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"score":0,"creation_date":1681965576,"post_id":76051402,"comment_id":134142340,"body_markdown":"The operating system I am using is Windows 10 and I am using jdk version - 17.0.6, it is my workspace default JRE. The error is not shown while I am working on the 1.8 version, but the error shows up as soon as I switch from 1.8 to 17.0.6.","body":"The operating system I am using is Windows 10 and I am using jdk version - 17.0.6, it is my workspace default JRE. The error is not shown while I am working on the 1.8 version, but the error shows up as soon as I switch from 1.8 to 17.0.6."},{"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"score":0,"creation_date":1682141835,"post_id":76051402,"comment_id":134172260,"body_markdown":"My problem got resolved.\nI am using Eclipse IDE.\nI deleted the JDK version 17 from my IDE and then, I went to my particular project properties - Java Build Path - libraries and again added the JavaSE-17 and  I chose the Workspace default JRE (jdk-17.0.6) and now it&#39;s running fine.","body":"My problem got resolved. I am using Eclipse IDE. I deleted the JDK version 17 from my IDE and then, I went to my particular project properties - Java Build Path - libraries and again added the JavaSE-17 and  I chose the Workspace default JRE (jdk-17.0.6) and now it&#39;s running fine."}],"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":250,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683234674,"creation_date":1681886145,"question_id":76051402,"body_markdown":"This is a code, I wrote for functional programming to check the username I will get from url with the username present in the database.\r\n```\r\npackage com.springboot.myfirstwebapp.todo;\r\n\r\nimport java.time.LocalDate;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.function.Predicate;\r\n\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport jakarta.validation.Valid;\r\n\r\n@Service\r\npublic class TodoService {\r\n\r\n\tprivate static List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\r\n\t\r\n\tprivate static int todosCount = 0;\r\n\t\r\n\tstatic {\r\n\t\ttodos.add(new Todo(++todosCount, &quot;OCS pending&quot;, LocalDate.now().plusYears(1), false));\r\n\t\ttodos.add(new Todo(++todosCount, &quot;JXP pro&quot;, LocalDate.now().plusYears(2), false));\r\n\t\ttodos.add(new Todo(++todosCount, &quot;Module maintenance&quot;, LocalDate.now().plusYears(3), false));\r\n\t}\r\n\t\r\n\tpublic List&lt;Todo&gt; findByUsername(String username)\r\n\t{\r\n\t\tPredicate&lt;? super Todo&gt; predicate = \r\n\t\t\t\ttodo -&gt; todo.getUsername().equalsIgnoreCase(username);\r\n\t\treturn todos.stream().filter(predicate).toList();\r\n\t}\r\n```\r\n\r\nThis code was working fine but all of sudden it started showing an error at \r\n\r\n```\r\nreturn todos.stream().filter(predicate).toList();\r\n```\r\n saying, &quot;The type java.util.stream.BaseStream cannot be resolved. It is indirectly referenced from required .class files&quot;.\r\n\r\nI did RnD with the help of Youtube and didn&#39;t find any optimal solution for it. I also searched for this error in Stackover Flow but didn&#39;t get the answer.","title":"The type java.util.stream.BaseStream cannot be resolved. It is indirectly referenced from required .class files","body":"<p>This is a code, I wrote for functional programming to check the username I will get from url with the username present in the database.</p>\n<pre><code>package com.springboot.myfirstwebapp.todo;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Predicate;\n\nimport org.springframework.stereotype.Service;\n\nimport jakarta.validation.Valid;\n\n@Service\npublic class TodoService {\n\n    private static List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\n    \n    private static int todosCount = 0;\n    \n    static {\n        todos.add(new Todo(++todosCount, &quot;OCS pending&quot;, LocalDate.now().plusYears(1), false));\n        todos.add(new Todo(++todosCount, &quot;JXP pro&quot;, LocalDate.now().plusYears(2), false));\n        todos.add(new Todo(++todosCount, &quot;Module maintenance&quot;, LocalDate.now().plusYears(3), false));\n    }\n    \n    public List&lt;Todo&gt; findByUsername(String username)\n    {\n        Predicate&lt;? super Todo&gt; predicate = \n                todo -&gt; todo.getUsername().equalsIgnoreCase(username);\n        return todos.stream().filter(predicate).toList();\n    }\n</code></pre>\n<p>This code was working fine but all of sudden it started showing an error at</p>\n<pre><code>return todos.stream().filter(predicate).toList();\n</code></pre>\n<p>saying, &quot;The type java.util.stream.BaseStream cannot be resolved. It is indirectly referenced from required .class files&quot;.</p>\n<p>I did RnD with the help of Youtube and didn't find any optimal solution for it. I also searched for this error in Stackover Flow but didn't get the answer.</p>\n"},{"tags":["java","language-lawyer","jls","checked-exceptions"],"comments":[{"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1683236127,"post_id":76177332,"comment_id":134340230,"body_markdown":"No, @MattDS18 is correct, the behaviour is odd. In the first example, the main method is throwing an exception whose static type is Throwable, which is a checked exception, and therefore should give rise to a unreported exception compiler error, but it doesn&#39;t. The even more odd thing is, if you cast it to a Throwable (i.e. `throw (Throwable)t` then the compiler will (correctly) complain, even though you haven&#39;t actually changed its static type.","body":"No, @MattDS18 is correct, the behaviour is odd. In the first example, the main method is throwing an exception whose static type is Throwable, which is a checked exception, and therefore should give rise to a unreported exception compiler error, but it doesn&#39;t. The even more odd thing is, if you cast it to a Throwable (i.e. <code>throw (Throwable)t</code> then the compiler will (correctly) complain, even though you haven&#39;t actually changed its static type."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1683275059,"post_id":76177332,"comment_id":134344903,"body_markdown":"@jon-hanson an intersting thing happens when you declare `public static void foo() throws IOException` because now the Java Compiler says &quot;error: unreported exception **IOException**; must be caught or declared to be thrown&quot; which shows that the compiler exactly knows what exception can be thrown there.","body":"@jon-hanson an intersting thing happens when you declare <code>public static void foo() throws IOException</code> because now the Java Compiler says &quot;error: unreported exception <b>IOException</b>; must be caught or declared to be thrown&quot; which shows that the compiler exactly knows what exception can be thrown there."},{"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1683275329,"post_id":76177332,"comment_id":134344959,"body_markdown":"IThe compiler is evidently performing some static analysis. My guess is that if there is no exception decleration on the method, then it infers the only possible exception being caught is Error, which is unchecked. If you add a throws Throwable (or any other checked exception) then it gives rise to the expected compiler error as Throwable is checked.","body":"IThe compiler is evidently performing some static analysis. My guess is that if there is no exception decleration on the method, then it infers the only possible exception being caught is Error, which is unchecked. If you add a throws Throwable (or any other checked exception) then it gives rise to the expected compiler error as Throwable is checked."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1683275816,"post_id":76177332,"comment_id":134345061,"body_markdown":"@jon-hanson the compiler checks which exceptions can be thrown in the `try` block. No guess needed, the feature is in the Java 7 release notes: [Rethrowing Exceptions with More Inclusive Type Checking](https://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html#rethrow)","body":"@jon-hanson the compiler checks which exceptions can be thrown in the <code>try</code> block. No guess needed, the feature is in the Java 7 release notes: <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html#rethrow\" rel=\"nofollow noreferrer\">Rethrowing Exceptions with More Inclusive Type Checking</a>"}],"owner":{"account_id":1764371,"reputation":401,"user_id":1610579,"accept_rate":71,"display_name":"MattDs17"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1683236464,"answer_count":0,"score":2,"last_activity_date":1683234485,"creation_date":1683233992,"question_id":76177332,"body_markdown":"JLS 11.2.3 says that it is a compile time error if a method body can throw a checked exception and it does not declare the class (or a parent class) in its `throws` clause.\r\nIn the following code, `Throwable` is a checked exception (per JLS 11.1.1) being thrown in the `catch` clause of `main`:\r\n```\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n    try {\r\n      foo();\r\n    } catch (Throwable t) {\r\n      throw t;\r\n    }\r\n  }\r\n\r\n  public static void foo() {\r\n    throw new RuntimeException();\r\n  }\r\n}\r\n```\r\n\r\nHowever, javac compiles it without any errors.\r\nIf we change the signature of `foo` to declare that it `throws Throwable`, we get an error as expected:\r\n\r\n```\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n    try {\r\n      foo();\r\n    } catch (Throwable t) {\r\n      throw t;\r\n    }\r\n  }\r\n\r\n  public static void foo() throws Throwable {\r\n    throw new RuntimeException();\r\n  }\r\n}\r\n```\r\n```\r\n$ javac Main.java\r\nMain.java:6: error: unreported exception Throwable; must be caught or declared to be thrown\r\n      throw t;\r\n      ^\r\n1 error\r\n```\r\n\r\nIt seems like javac figures out (in the first example) that, since `foo` does not declare any checked exceptions, the caught `Throwable t` must be an unchecked exception, and so `main` only ever rethrows an unchecked exception, and thus it does not need a `throws` clause.\r\nIs there anything in the JLS that explains this behaviour?","title":"Why can a caught Throwable be rethrown without declaring Throwable in the method&#39;s throws clause?","body":"<p>JLS 11.2.3 says that it is a compile time error if a method body can throw a checked exception and it does not declare the class (or a parent class) in its <code>throws</code> clause.\nIn the following code, <code>Throwable</code> is a checked exception (per JLS 11.1.1) being thrown in the <code>catch</code> clause of <code>main</code>:</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    try {\n      foo();\n    } catch (Throwable t) {\n      throw t;\n    }\n  }\n\n  public static void foo() {\n    throw new RuntimeException();\n  }\n}\n</code></pre>\n<p>However, javac compiles it without any errors.\nIf we change the signature of <code>foo</code> to declare that it <code>throws Throwable</code>, we get an error as expected:</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    try {\n      foo();\n    } catch (Throwable t) {\n      throw t;\n    }\n  }\n\n  public static void foo() throws Throwable {\n    throw new RuntimeException();\n  }\n}\n</code></pre>\n<pre><code>$ javac Main.java\nMain.java:6: error: unreported exception Throwable; must be caught or declared to be thrown\n      throw t;\n      ^\n1 error\n</code></pre>\n<p>It seems like javac figures out (in the first example) that, since <code>foo</code> does not declare any checked exceptions, the caught <code>Throwable t</code> must be an unchecked exception, and so <code>main</code> only ever rethrows an unchecked exception, and thus it does not need a <code>throws</code> clause.\nIs there anything in the JLS that explains this behaviour?</p>\n"},{"tags":["java","android-studio","arduino","bluetooth","hc-05"],"answers":[{"tags":[],"owner":{"account_id":23471229,"reputation":656,"user_id":17524723,"display_name":"Peter Plesn&#237;k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648885505,"creation_date":1648832282,"answer_id":71710443,"question_id":71706008,"body_markdown":"Two reasons:\r\n- packet data transmition by BT protocol. If slave have buffered only one char and master make transmit request than slave send only one char\r\n- multitasking in android OS. Your `run` function not run whole time. There is many threads and proccesses which compete for hw cores. During `run` is suspended many packets can arrive.\r\n\r\nYou must count that stream not deliver data continously","title":"Text send via Bluetooth is broken up by first character on the receiving end?","body":"<p>Two reasons:</p>\n<ul>\n<li>packet data transmition by BT protocol. If slave have buffered only one char and master make transmit request than slave send only one char</li>\n<li>multitasking in android OS. Your <code>run</code> function not run whole time. There is many threads and proccesses which compete for hw cores. During <code>run</code> is suspended many packets can arrive.</li>\n</ul>\n<p>You must count that stream not deliver data continously</p>\n"}],"owner":{"account_id":23859708,"reputation":1,"user_id":17862824,"display_name":"Mustafa Jawad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683233780,"creation_date":1648811524,"question_id":71706008,"body_markdown":"I programmed a Bluetooth messaging app, the app works correctly when it connects and pairs with another phone, but when with HC-05 it connects, I get the received message as a syllable (first letter and then the rest of the letters) so what is the reason for that?\r\n\r\n[Screenshot My Android App of BTChat][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5kU3g.jpg\r\n\r\nthis my code :\r\n\r\n    private class ConnectedThread extends Thread {\r\n    private final BluetoothSocket mmSocket;\r\n    private final InputStream mmInStream;\r\n    private final OutputStream mmOutStream;\r\n    public ConnectedThread(BluetoothSocket socket, String socketType) {\r\n        mmSocket = socket;\r\n        InputStream tmpIn = null;\r\n        OutputStream tmpOut = null;\r\n        try {\r\n            tmpIn = socket.getInputStream();\r\n            tmpOut = socket.getOutputStream();\r\n        } catch (IOException e) {\r\n\r\n        }\r\n        mmInStream = tmpIn;\r\n        mmOutStream = tmpOut;\r\n        mState = STATE_CONNECTED;\r\n    }\r\n\r\n    public void run() {\r\n        byte[] buffer = new byte[1024];\r\n        int bytes;\r\n        while (mState == STATE_CONNECTED) {\r\n            try {\r\n                bytes = mmInStream.read(buffer);\r\n                //***NEW Edition\r\n                String readMessage = new String(buffer, 0, bytes);\r\n                mHandler.obtainMessage(Constants.MESSAGE_READ, bytes, -1, buffer).sendToTarget();\r\n            } catch (IOException e) {\r\n                connectionLost();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Text send via Bluetooth is broken up by first character on the receiving end?","body":"<p>I programmed a Bluetooth messaging app, the app works correctly when it connects and pairs with another phone, but when with HC-05 it connects, I get the received message as a syllable (first letter and then the rest of the letters) so what is the reason for that?</p>\n<p><a href=\"https://i.stack.imgur.com/5kU3g.jpg\" rel=\"nofollow noreferrer\">Screenshot My Android App of BTChat</a></p>\n<p>this my code :</p>\n<pre><code>private class ConnectedThread extends Thread {\nprivate final BluetoothSocket mmSocket;\nprivate final InputStream mmInStream;\nprivate final OutputStream mmOutStream;\npublic ConnectedThread(BluetoothSocket socket, String socketType) {\n    mmSocket = socket;\n    InputStream tmpIn = null;\n    OutputStream tmpOut = null;\n    try {\n        tmpIn = socket.getInputStream();\n        tmpOut = socket.getOutputStream();\n    } catch (IOException e) {\n\n    }\n    mmInStream = tmpIn;\n    mmOutStream = tmpOut;\n    mState = STATE_CONNECTED;\n}\n\npublic void run() {\n    byte[] buffer = new byte[1024];\n    int bytes;\n    while (mState == STATE_CONNECTED) {\n        try {\n            bytes = mmInStream.read(buffer);\n            //***NEW Edition\n            String readMessage = new String(buffer, 0, bytes);\n            mHandler.obtainMessage(Constants.MESSAGE_READ, bytes, -1, buffer).sendToTarget();\n        } catch (IOException e) {\n            connectionLost();\n            break;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1683204522,"post_id":76173328,"comment_id":134332806,"body_markdown":"Why are you importing xml data types to use with json? Use LocalDate to get calendar information","body":"Why are you importing xml data types to use with json? Use LocalDate to get calendar information"},{"owner":{"account_id":7974315,"reputation":13,"user_id":6017978,"display_name":"A Hybris Dev"},"score":0,"creation_date":1683204750,"post_id":76173328,"comment_id":134332875,"body_markdown":"No I have one java class which has date attribute of this XMLGregorianCalendar type. So I just created one sample code as I can&#39;t paste entire code here. But its a java bean object that I want to convert to JSON. And worst part is this is existing code so I can&#39;t change it","body":"No I have one java class which has date attribute of this XMLGregorianCalendar type. So I just created one sample code as I can&#39;t paste entire code here. But its a java bean object that I want to convert to JSON. And worst part is this is existing code so I can&#39;t change it"}],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683224225,"creation_date":1683205384,"answer_id":76173529,"question_id":76173328,"body_markdown":"I&#39;m guessing that you are using Java 17+.\r\n\r\nAs of Java 17, the module system is enforced and java-xml doesn&#39;t export the internal classes for other modules to use.\r\n\r\nSee: https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/module-info.java\r\n\r\nThis is why `XMLGregorianCalendarImpl`&#39;s fields are not available to the `GsonBuilder`.\r\n\r\nhttps://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/com/sun/org/apache/xerces/internal/jaxp/datatype/XMLGregorianCalendarImpl.java\r\n\r\nI don&#39;t think that `GsonBuilder` can use an object&#39;s getters and setters.\r\n\r\nSo you need to make a proper TypeAdapter should map all the getters and setters in `XMLGregorianCalendar` to an object that can be serialized, something like `LocalDate`.\r\n\r\nhttps://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/javax/xml/datatype/XMLGregorianCalendar.java\r\n\r\nOr you simply switch from `XMLGregorianCalendar` to `LocalDate`?","title":"JsonException during converting Java object to JSON","body":"<p>I'm guessing that you are using Java 17+.</p>\n<p>As of Java 17, the module system is enforced and java-xml doesn't export the internal classes for other modules to use.</p>\n<p>See: <a href=\"https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/module-info.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/module-info.java</a></p>\n<p>This is why <code>XMLGregorianCalendarImpl</code>'s fields are not available to the <code>GsonBuilder</code>.</p>\n<p><a href=\"https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/com/sun/org/apache/xerces/internal/jaxp/datatype/XMLGregorianCalendarImpl.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/com/sun/org/apache/xerces/internal/jaxp/datatype/XMLGregorianCalendarImpl.java</a></p>\n<p>I don't think that <code>GsonBuilder</code> can use an object's getters and setters.</p>\n<p>So you need to make a proper TypeAdapter should map all the getters and setters in <code>XMLGregorianCalendar</code> to an object that can be serialized, something like <code>LocalDate</code>.</p>\n<p><a href=\"https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/javax/xml/datatype/XMLGregorianCalendar.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/javax/xml/datatype/XMLGregorianCalendar.java</a></p>\n<p>Or you simply switch from <code>XMLGregorianCalendar</code> to <code>LocalDate</code>?</p>\n"},{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683233100,"creation_date":1683233100,"answer_id":76177244,"question_id":76173328,"body_markdown":"The reason why Gson is unable to make fields of that class accessible is a combination of the [JDK restricting access to implementation details](https://openjdk.org/jeps/403) and Gson not having a built-in adapter for `XMLGregorianCalendar` so it falls back to using reflection.\r\n\r\nThough it sounds your question is rather why your custom adapter is not called. The answer for this is most likely that (as seen in the exception message) you are not actually serializing an object of type `XMLGregorianCalendar`, but a JDK internal subclass. However, `GsonBuilder.registerTypeAdapter` which you are using registers the adapter for _that specific class_ and not for subclasses.\r\n\r\nTo solve this you should use [`GsonBuilder.registerTypeHierarchyAdapter`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html#registerTypeHierarchyAdapter(java.lang.Class,java.lang.Object)) instead.","title":"JsonException during converting Java object to JSON","body":"<p>The reason why Gson is unable to make fields of that class accessible is a combination of the <a href=\"https://openjdk.org/jeps/403\" rel=\"nofollow noreferrer\">JDK restricting access to implementation details</a> and Gson not having a built-in adapter for <code>XMLGregorianCalendar</code> so it falls back to using reflection.</p>\n<p>Though it sounds your question is rather why your custom adapter is not called. The answer for this is most likely that (as seen in the exception message) you are not actually serializing an object of type <code>XMLGregorianCalendar</code>, but a JDK internal subclass. However, <code>GsonBuilder.registerTypeAdapter</code> which you are using registers the adapter for <em>that specific class</em> and not for subclasses.</p>\n<p>To solve this you should use <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html#registerTypeHierarchyAdapter(java.lang.Class,java.lang.Object)\" rel=\"nofollow noreferrer\"><code>GsonBuilder.registerTypeHierarchyAdapter</code></a> instead.</p>\n"}],"owner":{"account_id":7974315,"reputation":13,"user_id":6017978,"display_name":"A Hybris Dev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":423,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177244,"answer_count":2,"score":1,"last_activity_date":1683233100,"creation_date":1683204162,"question_id":76173328,"body_markdown":"Somehow below code is failing even after creating a custom type adapter. Its working for other type like string. Any idea how can I resolve the issue. Below is the code:\r\n\r\n```\r\npackage com;\r\n\r\nimport java.io.IOException;\r\n\r\nimport javax.xml.datatype.DatatypeConfigurationException;\r\nimport javax.xml.datatype.DatatypeFactory;\r\nimport javax.xml.datatype.XMLGregorianCalendar;\r\n\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.GsonBuilder;\r\nimport com.google.gson.TypeAdapter;\r\nimport com.google.gson.stream.JsonReader;\r\nimport com.google.gson.stream.JsonWriter;\r\n\r\npublic class DateConversion {\r\n\r\n\tpublic static void main(String[] args) throws DatatypeConfigurationException {\r\n\r\n\t\tXMLGregorianCalendar date = DatatypeFactory.newInstance().newXMLGregorianCalendar();\r\n\r\n\t\tRequest req = new Request();\r\n\t\treq.setDate(date);\r\n\t\tTypeAdapter&lt;XMLGregorianCalendar&gt; adapter = new TypeAdapter&lt;XMLGregorianCalendar&gt;() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void write(JsonWriter writer, XMLGregorianCalendar value) throws IOException {\r\n\t\t\t\tSystem.out.println(&quot;Inside write&quot;);\r\n\t\t\t\tif(value==null) {\r\n\t\t\t\t\twriter.nullValue();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\twriter.value(&quot;value&quot;);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic XMLGregorianCalendar read(JsonReader reader) throws IOException {\r\n\t\t\t\tSystem.out.println(&quot;Inside read&quot;);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\t\tGson gsonBuilder = (new GsonBuilder()).registerTypeAdapter(XMLGregorianCalendar.class, adapter).serializeNulls().create();\r\n\t\tSystem.out.println(gsonBuilder.toJson(req));\r\n\t}\r\n\r\n}\r\n\r\nclass Request {\r\n\tprivate XMLGregorianCalendar date;\r\n\r\n\tpublic XMLGregorianCalendar getDate() {\r\n\t\treturn date;\r\n\t}\r\n\r\n\tpublic void setDate(XMLGregorianCalendar date) {\r\n\t\tthis.date = date;\r\n\t}\r\n}\r\n\r\n```\r\n\r\nAnd below is the error stacktrace:\r\n\r\n    Exception in thread &quot;main&quot; com.google.gson.JsonIOException: Failed making field &#39;com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl#eon&#39; accessible; either change its visibility or write a custom TypeAdapter for its declaring type\r\n\r\n\r\nJava object should be successfully parsed to JSON but it is not working","title":"JsonException during converting Java object to JSON","body":"<p>Somehow below code is failing even after creating a custom type adapter. Its working for other type like string. Any idea how can I resolve the issue. Below is the code:</p>\n<pre><code>package com;\n\nimport java.io.IOException;\n\nimport javax.xml.datatype.DatatypeConfigurationException;\nimport javax.xml.datatype.DatatypeFactory;\nimport javax.xml.datatype.XMLGregorianCalendar;\n\nimport com.google.gson.Gson;\nimport com.google.gson.GsonBuilder;\nimport com.google.gson.TypeAdapter;\nimport com.google.gson.stream.JsonReader;\nimport com.google.gson.stream.JsonWriter;\n\npublic class DateConversion {\n\n    public static void main(String[] args) throws DatatypeConfigurationException {\n\n        XMLGregorianCalendar date = DatatypeFactory.newInstance().newXMLGregorianCalendar();\n\n        Request req = new Request();\n        req.setDate(date);\n        TypeAdapter&lt;XMLGregorianCalendar&gt; adapter = new TypeAdapter&lt;XMLGregorianCalendar&gt;() {\n\n            @Override\n            public void write(JsonWriter writer, XMLGregorianCalendar value) throws IOException {\n                System.out.println(&quot;Inside write&quot;);\n                if(value==null) {\n                    writer.nullValue();\n                    return;\n                }\n                writer.value(&quot;value&quot;);\n\n            }\n\n            @Override\n            public XMLGregorianCalendar read(JsonReader reader) throws IOException {\n                System.out.println(&quot;Inside read&quot;);\n                return null;\n            }\n        };\n        Gson gsonBuilder = (new GsonBuilder()).registerTypeAdapter(XMLGregorianCalendar.class, adapter).serializeNulls().create();\n        System.out.println(gsonBuilder.toJson(req));\n    }\n\n}\n\nclass Request {\n    private XMLGregorianCalendar date;\n\n    public XMLGregorianCalendar getDate() {\n        return date;\n    }\n\n    public void setDate(XMLGregorianCalendar date) {\n        this.date = date;\n    }\n}\n\n</code></pre>\n<p>And below is the error stacktrace:</p>\n<pre><code>Exception in thread &quot;main&quot; com.google.gson.JsonIOException: Failed making field 'com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl#eon' accessible; either change its visibility or write a custom TypeAdapter for its declaring type\n</code></pre>\n<p>Java object should be successfully parsed to JSON but it is not working</p>\n"},{"tags":["java","for-loop","iterator","binary-search-tree","tree-traversal"],"comments":[{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1683232626,"post_id":76177181,"comment_id":134339590,"body_markdown":"What&#39;s `BinarySearchTree.root`?","body":"What&#39;s <code>BinarySearchTree.root</code>?"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1683232668,"post_id":76177181,"comment_id":134339598,"body_markdown":"And what *should* the type parameter be for `BSTIterator&lt;&gt;(null, 0)`?","body":"And what <i>should</i> the type parameter be for <code>BSTIterator&lt;&gt;(null, 0)</code>?"},{"owner":{"account_id":26953027,"reputation":1,"user_id":20521922,"display_name":"Sandy Gied"},"score":0,"creation_date":1683233272,"post_id":76177181,"comment_id":134339713,"body_markdown":"the root is the first element in a perfect balanced binary tree... essentially the median of the key values. The type parameter for BSTIterator&lt;&gt;(null,0) is when the root is null and therefore there is no tree to traverse.","body":"the root is the first element in a perfect balanced binary tree... essentially the median of the key values. The type parameter for BSTIterator&lt;&gt;(null,0) is when the root is null and therefore there is no tree to traverse."},{"owner":{"account_id":26953027,"reputation":1,"user_id":20521922,"display_name":"Sandy Gied"},"score":0,"creation_date":1683233333,"post_id":76177181,"comment_id":134339724,"body_markdown":"@JohnBollinger I forgot to mention your name in the above post. Thank you","body":"@JohnBollinger I forgot to mention your name in the above post. Thank you"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1683233364,"post_id":76177181,"comment_id":134339731,"body_markdown":"Weirdly, you use `&lt;T&gt;` on this method and `&lt;E&gt;` on the other class.  Is that an issue?  Also should we assume that you want the return type of `iterator()` to match this definition: `public Iterator&lt;E&gt; iterator() `?","body":"Weirdly, you use <code>&lt;T&gt;</code> on this method and <code>&lt;E&gt;</code> on the other class.  Is that an issue?  Also should we assume that you want the return type of <code>iterator()</code> to match this definition: <code>public Iterator&lt;E&gt; iterator() </code>?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1683233547,"post_id":76177181,"comment_id":134339768,"body_markdown":"Hmm: `BSTIterator class:  public class BSTIterator&lt;E&gt;` So BSTIterator is a top level class, not a nested class inside of BinarySearchTree.  I haven&#39;t tested this idea, but I wonder if there&#39;s no way for the `iterator()` method to connect the `&lt;E&gt;` and the `&lt;T&gt;` to be the same variable...","body":"Hmm: <code>BSTIterator class:  public class BSTIterator&lt;E&gt;</code> So BSTIterator is a top level class, not a nested class inside of BinarySearchTree.  I haven&#39;t tested this idea, but I wonder if there&#39;s no way for the <code>iterator()</code> method to connect the <code>&lt;E&gt;</code> and the <code>&lt;T&gt;</code> to be the same variable..."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1683238692,"post_id":76177181,"comment_id":134340579,"body_markdown":"I wasn&#39;t asking what `root` *models*.  I meant what is its *type*?  What is the return type of its `getData()` method?  What *is* it?","body":"I wasn&#39;t asking what <code>root</code> <i>models</i>.  I meant what is its <i>type</i>?  What is the return type of its <code>getData()</code> method?  What <i>is</i> it?"}],"owner":{"account_id":26953027,"reputation":1,"user_id":20521922,"display_name":"Sandy Gied"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683232315,"creation_date":1683232264,"question_id":76177181,"body_markdown":"**BSTIterator class:**\r\n\r\n    public class BSTIterator&lt;E&gt; implements Iterator&lt;E&gt;, Iterable&lt;E&gt; {\r\n\t\r\n\tprotected E rootData;\r\n    protected int size;\r\n    protected int counter;\r\n    protected TraversalType traversalType;\r\n    protected LLQ&lt;E&gt; traversalQueue;\r\n\r\n    public BSTIterator(E rootData, int size) {\r\n        this.rootData = rootData;\r\n        this.size = size;\r\n        this.counter = 0;\r\n    }\r\n\r\n    @Override\r\n    public boolean hasNext() {\r\n        return counter &lt; size;\r\n    }\r\n\r\n    @Override\r\n    public E next() {\r\n        counter++;\r\n        return traversalQueue.dequeue();\r\n    }\r\n\r\n    @Override\r\n    public Iterator&lt;E&gt; iterator() {\r\n        return this;\r\n    }\r\n\r\n    public void setTraversalType(TraversalType traversalType, LLQ&lt;E&gt; traversalQueue) {\r\n        this.traversalType = traversalType;\r\n        this.traversalQueue = traversalQueue;\r\n    }\r\n}\r\n\r\n\r\n**Method in BinarySearchTree Class:**\r\n \r\n        public Iterator&lt;T&gt; iterator() {\r\n\t\tif (root == null) {\r\n\t        return new BSTIterator&lt;&gt;(null, 0);\r\n\t    } else {\r\n\t        switch (traversalType) {\r\n\t            case INORDER:\r\n\t                return new BSTIterator&lt;&gt;(root.getData(), size, inOrderQ);\r\n\t            case PREORDER:\r\n\t                return new BSTIterator&lt;&gt;(root.getData(), size, preOrderQ);\r\n\t            case POSTORDER:\r\n\t                return new BSTIterator&lt;&gt;(root.getData(), size, postOrderQ);\r\n\t            default:\r\n\t                 return new BSTIterator&lt;&gt;(null, 0);\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\n\r\n\r\nI am trying to make a method that supports enhanced for loop traversal for binary search tree. I am getting an error when instantiating a new BSTIterator object that states cannot infer type arguments.","title":"BinarySearchTree iterator","body":"<p><strong>BSTIterator class:</strong></p>\n<pre><code>public class BSTIterator&lt;E&gt; implements Iterator&lt;E&gt;, Iterable&lt;E&gt; {\n\nprotected E rootData;\nprotected int size;\nprotected int counter;\nprotected TraversalType traversalType;\nprotected LLQ&lt;E&gt; traversalQueue;\n\npublic BSTIterator(E rootData, int size) {\n    this.rootData = rootData;\n    this.size = size;\n    this.counter = 0;\n}\n\n@Override\npublic boolean hasNext() {\n    return counter &lt; size;\n}\n\n@Override\npublic E next() {\n    counter++;\n    return traversalQueue.dequeue();\n}\n\n@Override\npublic Iterator&lt;E&gt; iterator() {\n    return this;\n}\n\npublic void setTraversalType(TraversalType traversalType, LLQ&lt;E&gt; traversalQueue) {\n    this.traversalType = traversalType;\n    this.traversalQueue = traversalQueue;\n}\n</code></pre>\n<p>}</p>\n<p><strong>Method in BinarySearchTree Class:</strong></p>\n<pre><code>    public Iterator&lt;T&gt; iterator() {\n    if (root == null) {\n        return new BSTIterator&lt;&gt;(null, 0);\n    } else {\n        switch (traversalType) {\n            case INORDER:\n                return new BSTIterator&lt;&gt;(root.getData(), size, inOrderQ);\n            case PREORDER:\n                return new BSTIterator&lt;&gt;(root.getData(), size, preOrderQ);\n            case POSTORDER:\n                return new BSTIterator&lt;&gt;(root.getData(), size, postOrderQ);\n            default:\n                 return new BSTIterator&lt;&gt;(null, 0);\n        }\n    }\n}\n</code></pre>\n<p>I am trying to make a method that supports enhanced for loop traversal for binary search tree. I am getting an error when instantiating a new BSTIterator object that states cannot infer type arguments.</p>\n"},{"tags":["java","ms-word","apache-poi"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1683235965,"post_id":76177188,"comment_id":134340202,"body_markdown":"Also consider `AffineTransformOp` to rotate and scale, for [example](https://stackoverflow.com/a/2246484/230513).","body":"Also consider <code>AffineTransformOp</code> to rotate and scale, for <a href=\"https://stackoverflow.com/a/2246484/230513\">example</a>."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1683261378,"post_id":76177188,"comment_id":134342800,"body_markdown":"How would you create that kind of shape using Microsoft Word GUI?","body":"How would you create that kind of shape using Microsoft Word GUI?"}],"owner":{"account_id":15194394,"reputation":63,"user_id":10964215,"display_name":"hido"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683232309,"creation_date":1683232309,"question_id":76177188,"body_markdown":"I&#39;m trying to add a 2 colored circle to my document using Apache POI 5.2.3.\r\nThe circle should look like this:[![enter image description here][1]][1]\r\n\r\nSo far the closest I got to adding a shape to the document was using the code in this [answer][2] but it adds a different shape than a circle. I tried following the rules explained [here][3] but didn&#39;t manage to make a circle. The other issue I have is that I need my circle to have 2 colors, one in each half of the circle and but I don&#39;t know how to color the shape in more than 1 color.\r\nHow can I add a 2 colored circle to the doc?\r\n## Some workaround ##\r\n1 workaround I found and I rather not use it unless it&#39;s the last result, is generating an image with 2 colors and then adding the image to the doc. I rather not use it because I want to be able to edit the shape in the final Document generated.\r\nthe code for image generation:\r\n\r\n    public void drawCircle(XWPFDocument document) {\r\n\t\tXWPFParagraph paragraph = document.createParagraph();\r\n\t\tXWPFRun run = paragraph.createRun();\r\n\r\n\t\ttry {\r\n\t\t\tBufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);\r\n\t\t\tGraphics2D g2d = image.createGraphics();\r\n\t\t\tColor color1 = Color.RED;\r\n\t\t\tColor color2 = Color.BLUE;\r\n\t\t\tGradientPaint gp1 = new GradientPaint(0, 0, color1, 0, 20, color2);\r\n\t\t\tGradientPaint gp2 = new GradientPaint(0, 20, color2, 0, 40, color1);\r\n\t\t\tg2d.setColor(color1);\r\n\t\t\tg2d.fill(new Arc2D.Double(0, 0, 100, 100, 90, 180, Arc2D.PIE));\r\n\t\t\tg2d.setColor(color2);\r\n\t\t\tg2d.fill(new Arc2D.Double(0, 0, 100, 100, -90, 180, Arc2D.PIE));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tFile file = new File(&quot;circle.png&quot;);\r\n\t\t\tImageIO.write(image, &quot;png&quot;, file);\r\n\r\n\t\t\tInputStream inputStream = new FileInputStream(file);\r\n\t\t\tString imageId = document.addPictureData(inputStream, XWPFDocument.PICTURE_TYPE_PNG);\r\n\r\n\t\t\trun.addPicture(new FileInputStream(file),\r\n\t\t\t\t\tXWPFDocument.PICTURE_TYPE_PNG,\r\n\t\t\t\t\t&quot;circle.png&quot;,\r\n\t\t\t\t\tUnits.toEMU(30),\r\n\t\t\t\t\tUnits.toEMU(30));\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n  [1]: https://i.stack.imgur.com/K4GeQ.png\r\n  [2]: https://stackoverflow.com/a/53857670/10964215\r\n  [3]: https://stackoverflow.com/a/70607928/10964215","title":"Java Creating colored circle in XWPFDocument using Apache POI","body":"<p>I'm trying to add a 2 colored circle to my document using Apache POI 5.2.3.\nThe circle should look like this:<a href=\"https://i.stack.imgur.com/K4GeQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K4GeQ.png\" alt=\"enter image description here\" /></a></p>\n<p>So far the closest I got to adding a shape to the document was using the code in this <a href=\"https://stackoverflow.com/a/53857670/10964215\">answer</a> but it adds a different shape than a circle. I tried following the rules explained <a href=\"https://stackoverflow.com/a/70607928/10964215\">here</a> but didn't manage to make a circle. The other issue I have is that I need my circle to have 2 colors, one in each half of the circle and but I don't know how to color the shape in more than 1 color.\nHow can I add a 2 colored circle to the doc?</p>\n<h2>Some workaround</h2>\n<p>1 workaround I found and I rather not use it unless it's the last result, is generating an image with 2 colors and then adding the image to the doc. I rather not use it because I want to be able to edit the shape in the final Document generated.\nthe code for image generation:</p>\n<pre><code>public void drawCircle(XWPFDocument document) {\n    XWPFParagraph paragraph = document.createParagraph();\n    XWPFRun run = paragraph.createRun();\n\n    try {\n        BufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g2d = image.createGraphics();\n        Color color1 = Color.RED;\n        Color color2 = Color.BLUE;\n        GradientPaint gp1 = new GradientPaint(0, 0, color1, 0, 20, color2);\n        GradientPaint gp2 = new GradientPaint(0, 20, color2, 0, 40, color1);\n        g2d.setColor(color1);\n        g2d.fill(new Arc2D.Double(0, 0, 100, 100, 90, 180, Arc2D.PIE));\n        g2d.setColor(color2);\n        g2d.fill(new Arc2D.Double(0, 0, 100, 100, -90, 180, Arc2D.PIE));\n        g2d.dispose();\n\n        File file = new File(&quot;circle.png&quot;);\n        ImageIO.write(image, &quot;png&quot;, file);\n\n        InputStream inputStream = new FileInputStream(file);\n        String imageId = document.addPictureData(inputStream, XWPFDocument.PICTURE_TYPE_PNG);\n\n        run.addPicture(new FileInputStream(file),\n                XWPFDocument.PICTURE_TYPE_PNG,\n                &quot;circle.png&quot;,\n                Units.toEMU(30),\n                Units.toEMU(30));\n\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","awt","screen-resolution","imageicon"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1641931849,"post_id":70672430,"comment_id":124936144,"body_markdown":"*even at 100% the scaling is not perfect;* - there is no scaling done at 100%. The issue would be your image. Try using antialiasing when creating the image. *Is there any way to provide a higher-resolution image* - not what you asked, but check out: https://stackoverflow.com/questions/65742162/how-to-fix-the-blurry-image-when-i-run-my-java-swing-project/65742492#65742492 for a solution that prevents the icon from scaling. Maybe you can modify the logic to use Icons of different resolutions depending on the scaling? So maybe you use a 200% icon as the base and then scale down when required.","body":"<i>even at 100% the scaling is not perfect;</i> - there is no scaling done at 100%. The issue would be your image. Try using antialiasing when creating the image. <i>Is there any way to provide a higher-resolution image</i> - not what you asked, but check out: <a href=\"https://stackoverflow.com/questions/65742162/how-to-fix-the-blurry-image-when-i-run-my-java-swing-project/65742492#65742492\" title=\"how to fix the blurry image when i run my java swing project\">stackoverflow.com/questions/65742162/&hellip;</a> for a solution that prevents the icon from scaling. Maybe you can modify the logic to use Icons of different resolutions depending on the scaling? So maybe you use a 200% icon as the base and then scale down when required."},{"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"score":0,"creation_date":1641935867,"post_id":70672430,"comment_id":124937459,"body_markdown":"@camickr Thanks, I have changed &quot;scaling&quot; to &quot;image quality&quot; in the last sentence now. Thanks also for the link. If the application is scaled due to system settings, I also want the icon to be larger, in line with the rest of the GUI, just not with the bad quality it has at the lower resolution. I have already tried reading out the scaling factor and then supplied an image with a larger resolution. But it then appeared too large because it was first scaled by me and then again by the OS. Would your solution allow me to prevent that second scaling from happening?","body":"@camickr Thanks, I have changed &quot;scaling&quot; to &quot;image quality&quot; in the last sentence now. Thanks also for the link. If the application is scaled due to system settings, I also want the icon to be larger, in line with the rest of the GUI, just not with the bad quality it has at the lower resolution. I have already tried reading out the scaling factor and then supplied an image with a larger resolution. But it then appeared too large because it was first scaled by me and then again by the OS. Would your solution allow me to prevent that second scaling from happening?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1641936366,"post_id":70672430,"comment_id":124937615,"body_markdown":"No the solution will always display the icon at its original size. My suggestion was that you can use the concept and create a `ScaledIcon` class. So you create your image at 200%. Then you scale the image down to the current scaling factor. The code provided shows how to get the current scaling factor. So I would create a map with a key of the scaling factor and the value the image. The painting logic would check the map to see if you have the scaled image. If not, then you create it and add it to the map. Then you use the scaled image and paint it.","body":"No the solution will always display the icon at its original size. My suggestion was that you can use the concept and create a <code>ScaledIcon</code> class. So you create your image at 200%. Then you scale the image down to the current scaling factor. The code provided shows how to get the current scaling factor. So I would create a map with a key of the scaling factor and the value the image. The painting logic would check the map to see if you have the scaled image. If not, then you create it and add it to the map. Then you use the scaled image and paint it."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1641989925,"post_id":70672430,"comment_id":124951530,"body_markdown":"For the [frame icons](https://stackoverflow.com/a/18224185/418556) you certainly can!","body":"For the <a href=\"https://stackoverflow.com/a/18224185/418556\">frame icons</a> you certainly can!"},{"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"score":0,"creation_date":1641994188,"post_id":70672430,"comment_id":124953465,"body_markdown":"@camickr I am not sure I understand how the `ScaledIcon` will do the trick. I do understand how to put different versions of the icon into a map and how to read the scaling factor of the OS. But I don&#39;t understand how it would help to tell the `JButton` or `JLabel` which one to pick. I guess it would help to know how these classes typically access the image from the `ImageIcon` object. Then one could extend that class and replace the method that does it. Would I have to replace `getImage()` to return a different version? How does the `JButton` etc then know that it shouldn&#39;t rescale it again?","body":"@camickr I am not sure I understand how the <code>ScaledIcon</code> will do the trick. I do understand how to put different versions of the icon into a map and how to read the scaling factor of the OS. But I don&#39;t understand how it would help to tell the <code>JButton</code> or <code>JLabel</code> which one to pick. I guess it would help to know how these classes typically access the image from the <code>ImageIcon</code> object. Then one could extend that class and replace the method that does it. Would I have to replace <code>getImage()</code> to return a different version? How does the <code>JButton</code> etc then know that it shouldn&#39;t rescale it again?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1642000555,"post_id":70672430,"comment_id":124956648,"body_markdown":"The component has nothing to do with it. In the painting method of the Icon you get the scaling factor and determine which one to pick and paint. That is why I referred you to the link above. It demonstrate how to get the scaling factor before doing the painting.","body":"The component has nothing to do with it. In the painting method of the Icon you get the scaling factor and determine which one to pick and paint. That is why I referred you to the link above. It demonstrate how to get the scaling factor before doing the painting."},{"owner":{"account_id":278315,"reputation":11579,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1644764852,"post_id":70672430,"comment_id":125687315,"body_markdown":"_You can see that even at 100% the image quality is not perfect; is there any way to improve that as well?_ This is because you *scale down* the original image from 240&#215;240 to 18&#215;18. If the original icon is in SVG format, render it to 18&#215;18. Or use SVG icon in your app; to do so, you&#39;ll need a library that can render SVG.","body":"<i>You can see that even at 100% the image quality is not perfect; is there any way to improve that as well?</i> This is because you <i>scale down</i> the original image from 240&#215;240 to 18&#215;18. If the original icon is in SVG format, render it to 18&#215;18. Or use SVG icon in your app; to do so, you&#39;ll need a library that can render SVG."}],"answers":[{"tags":[],"owner":{"account_id":278315,"reputation":11579,"user_id":572834,"display_name":"Alexey Ivanov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1644960969,"creation_date":1644764483,"answer_id":71101882,"question_id":70672430,"body_markdown":"Java 8 does not support High DPI, the UI gets scaled up by Windows. You should use Java 11 or a later version which support per-monitor High DPI settings.\r\n\r\nIf your goal is to make the icons look crisp, prepare a set of icons for different resolutions using [`BaseMultiResolutionImage`][1] (the basic implementation of [`MultiResolutionImage`][2]) to provide higher resolution alternatives. (These are not available in Java 8.)\r\n\r\nYou say that you scaled down the original image (240&#215;240) to 18&#215;18px. If the UI needs a higher resolution according to the system setting, all it has now is your small icon (18&#215;18) which will be scaled up, which results in poor quality. You should use a `MultiResolutionImage` or paint the original image into the required size, letting `Graphics` to scale it down for you.\r\n\r\nNo Down-Scale\r\n=============\r\n\r\nThis is the simplest way I came up with to make the icon 18&#215;18 without downscaling the original image:\r\n\r\n    private static final String IMAGE_URL =\r\n            &quot;https://tabler-icons.io/static/tabler-icons/icons-png/beach.png&quot;;\r\n\r\n    private static ImageIcon getIcon() {\r\n        return new ImageIcon(Toolkit.getDefaultToolkit()\r\n                                    .getImage(new URL(IMAGE_URL))) {\r\n            @Override\r\n            public int getIconWidth() {\r\n                return 18;\r\n            }\r\n            @Override\r\n            public int getIconHeight() {\r\n                return 18;\r\n            }\r\n\r\n            @Override\r\n            public synchronized void paintIcon(Component c, Graphics g,\r\n                                               int x, int y) {\r\n                g.drawImage(getImage(), x, y, 18, 18, null);\r\n            }\r\n        };\r\n    }\r\n\r\nI left out the exception handling code for `MalformedURLException` which can be thrown from the `URL` constructor.\r\n\r\nIn this case, the painted image gets down-scaled each time it&#39;s painted, which is ineffective. Yet the quality is better. Well, for the standard resolution screen, it&#39;s nearly the same as if you down-scaled the image when loading. But in High DPI case, it looks better. It&#39;s because for 200% UI Scale, the image will be rendered to 36&#215;36 pixels and these pixels will be created from the source of 240&#215;240 rather than up-scaling the down-scaled version which lost its quality.\r\n\r\n[![The screenshot of the app without down-scaling at 200%][3]][3]\r\n\r\nTo get even better results, I recommend using `MultiResolutionImage`.\r\n\r\n\r\nMultiResolutionImage\r\n====================\r\n\r\nThe app below loads the images from base64-encoded strings (for simplicity so that there are no external dependencies). There are three variants provided: 24&#215;24 (100%, 96dpi), 36&#215;36 (150%, 144dpi), 48&#215;48 (200%, 192dpi).\r\n\r\nIf the current scale factor is set to any of the provided resolutions, the image will be rendered as is. If 125% or 175% are used, the larger image will be scaled down; if the scale is greater than 200%, then the image for 200% will be scaled up. You can add more resolutions if needed.\r\n\r\nThe app doesn&#39;t compile in Java 8 because `MultiResolutionImage` is not available there. To compile it with JDK 11, you have to replace text blocks with regular String concatenation.\r\n\r\n```java\r\nimport java.awt.Image;\r\nimport java.awt.image.BaseMultiResolutionImage;\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.IOException;\r\nimport java.util.Arrays;\r\nimport java.util.Base64;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.SwingUtilities;\r\n\r\npublic class BeachIconButton {\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(BeachIconButton::new);\r\n    }\r\n\r\n    private BeachIconButton() {\r\n        JPanel panel = new JPanel();\r\n        ImageIcon icon = getIcon();\r\n        JButton button = new JButton(&quot;Test button&quot;, icon);\r\n        panel.add(button);\r\n\r\n        JFrame frame = new JFrame(&quot;Beach Icon Test&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.getContentPane().add(panel);\r\n        frame.pack();\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    private static ImageIcon getIcon() {\r\n        return new ImageIcon(\r\n               new BaseMultiResolutionImage(\r\n               Arrays.stream(new String[] { BEACH_100, BEACH_150, BEACH_200})\r\n                     .map(BeachIconButton::loadImage)\r\n                     .toArray(Image[]::new)));\r\n    }\r\n\r\n    private static Image loadImage(String base64) {\r\n        try {\r\n            return ImageIO.read(new ByteArrayInputStream(\r\n                                Base64.getMimeDecoder().decode(base64)));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private static final String BEACH_100 = &quot;&quot;&quot;\r\n            iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7DAAAO\r\n            wwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAXxJ\r\n            REFUSInl1E9LVVEUBfAfVJBIIoWGIDiRGtagN7Yg+gTZXPwICU4FyUGDahBRCTrK\r\n            qUVNIxrkJHjWJMKZikIjSyHoYd0GZ186vOef7n2zWnB4e591WXudt/c5/G8Ywiw+\r\n            4gd28QGLuNCt+C18RXHI+onJuuLjIVBgGWOYyPb2syI3q4qfzZw/ir1raMXeNBay\r\n            k+zgfNUC25nTBWxGPhfffI78XfzOVD1FP+5lrgusoweXIv+C6xE3qxYocRFrWZHv\r\n            eBPxA5yJeK9ugRJPdU7QGPoi3+1GfFBqZIFn+BVxC88jft9NgdL9q8gH8MSfUa3V\r\n            5BKXQ6gl9aOdey1N2GBV4VO4ik/h8CWG67rMcQ53Hf5ErOBGXfEGtjKxVSxhHi/w\r\n            LeMe4mQV8ROZ67fSZWrHadyW7kKBqaonuC89Bcc5uyKNZ+M4wTvS9d/AY/RmXK80\r\n            iht/wa+HVgfKB61cTYzGaups8FH89kEFhjBSUzDnR0LrSFT5Sw7i/yH8BmQ0mnmX\r\n            f2wqAAAAAElFTkSuQmCC&quot;&quot;&quot;;\r\n\r\n    private static final String BEACH_150 = &quot;&quot;&quot;\r\n            iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAABYlAAAW\r\n            JQFJUiTwAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAoVJ\r\n            REFUWIXt1kuoTVEYB/DfdZWiq7gykZBHHokyw0QGREpKLgMDGSojQ6+JARFi4JFn\r\n            ySPyyoCJR8zcIUVJiPLopiMhLoO1d3ftc+7Z95xrnYHyr1V7feu/1/ff3/etby/+\r\n            4x9DW8K9ZmE9FmTP7fiBp3iE03iS0F9dTMQN/G5gvMLMVopZhi8NisnHD6xohZiV\r\n            2ea5o584h+WYgAclor5jaUoxE9ATOXiOednaUMUU9mKPkK5YVCXbJwkuKkZmYbS2\r\n            t8rxpsz+QW2krqYSdF5tCnZjCX5F9h0Zf25k66nizEghaBSOV22cRyt/vhnxd0b2\r\n            E7gQzXelEJRjnv6L96dQ9IR+9CxaWymcsnx+L6UgQnPtUizyfDwRaiiff8JwjIts\r\n            71MLytGBy0I9xaLitG7LuCMi2+d4kyEJBVWwWkhPfz568UaI6Mho/XtCDTXYqO/L\r\n            v+GF2jQ+wNZofrdVYjrwNnK0XYjOYSEt9bp20lMWY0/k5LVQJzlGCn2qur56Mb0V\r\n            YiYLKcodddXhTcX1iJesU1cj/nc9NPA9axE2Cw02GUYITe6UYgoOCv+29pTOyjAH\r\n            VxRT1N/4iP0Y2yohHTij9v810Khgiwavy43eqSfhGmZHtt/oxm2h4fUI0Zim75IW\r\n            4wI24GuDPutiCF4q1sklAx/XJXisGK2zfysGhum7N3/F2ibebce+SNCdFIJgMQ4J\r\n            F63BYBUOYEqzL87HLaEeKrivPCLrMk5lEPyezNf8MkHv9H9STioegDbF/vM3/Hdl\r\n            grpLnBxFJ8bgWAmvWX53maBOId/jMRpHGnB8JOM2yx+f+eosE1SNNiH89TY/oTY1\r\n            zfAHjS7hMv45G3exJiH/P/5d/AHE21JDZYKOHAAAAABJRU5ErkJggg==&quot;&quot;&quot;;\r\n\r\n    private static final String BEACH_200 = &quot;&quot;&quot;\r\n            iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAB2HAAAd\r\n            hwGP5fFlAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA5FJ\r\n            REFUaIHt2ctrXFUcB/BPYoWGVGOwBZtYQQoqhUp9IFEoulC04spGExQEpYoiVBBc\r\n            qVAVwYX/gEWqooKboItqN4oV0frWPgR3XRSl9mHT2GjaJh0X5w6ZOXPuzO08roL5\r\n            wlnM+T3O93cev3vOb1jCEv7f6CtpnBswjg1Yh2HM4wx+wh58jC9K4lMIfXgIB1Ap\r\n            2H7FC7jwX+Bbh2uwW3HiqUDWlE26io040YJgkXYKd5TM3Z34K0HmNKYwgavxgLD/\r\n            WwUxi1vKIr8GfyRIfIAravTuxtmE3g+Jvkrm86pek+/XuOfP4elIbz1mIr15bBUm\r\n            IG8lPtHjjLkpMeg+jNboDOKXSOcsJjP5bU0CqODBsgOoHsRnsRyvJ+RP1vh4PpId\r\n            in7v7WUA/diRE0QFhxN92yMfeyL5MxoP+nW9DAJuxY85QdS2AxiosVsrnJmqfAGX\r\n            4/3I7uVeBwAX4DEcaRLAFFbV2LwSyXdn/ZNR/86es6/BCmyTTpnVWX4Tl2pMv49k\r\n            PtZF/QfLIl+L9fhN/mrEK3XE4vYajGQzZRKPcTuOyw+k2rbV2FwSyY7GTvt7yTjC\r\n            UQwV0FspEKf+nMBcVxmdJz7VeEVYkF6F43gKD0f9H5bOOsN9Gkluws04lpBV21z0\r\n            +7myiRO+wgcjInE6HE/opNpYOZTrEV8RzghX6hjLhWvHKWny35RBNsZogtCrLWxG\r\n            8JrG8zHRO5r5eCci8bvFDNMKY/hMeNRsF77wpWJM/f2mgke7PciyLvtbKby4NuJe\r\n            9Y+QGdyEv7FLSJX/CfThfqGmM691Jqlkep8L6bWs2lQSd+F7xUjnte+EYkCpGMQb\r\n            HRKP247M73mhneVbhY9wY0J2TpjRnUKV4bBQIxrGalyPe4RSY+oe9q1who61wasQ\r\n            +vC1xtlbwFu4sqCftXhb+i70lR6ei+HEgPtxbZv+NuDnhM/hjpnmoE+YoepAu7Sx\r\n            byOsELZkWyvQzlINCTWaGbwnpMROsUx4/16Md3GyE2cDQqXsS0wLRPfhJfWFqjyM\r\n            Zrr78WcX7KczLlvVVzJyMSU/1U1brKSlMJnp9Mp+qkgAs00cVL+imxN244p9iTux\r\n            ny0SQLMVqLY5PCHs2SGhRHi6gF2n9oVWYABbhOLUZbgoGyx+3rUi+Hhm26n96ozL\r\n            FgXPQB4262yLdGrfFUxo/vfRCc1fTp3adwUjeFEod5/M2l7h38WREuyXsIQl1OAf\r\n            9zFZ1uiy3BkAAAAASUVORK5CYII=&quot;&quot;&quot;;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/image/BaseMultiResolutionImage.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/image/MultiResolutionImage.html\r\n  [3]: https://i.stack.imgur.com/SC57D.png","title":"Can I supply image icons in Java in a higher resolution to avoid blurred icons after scaling?","body":"<p>Java 8 does not support High DPI, the UI gets scaled up by Windows. You should use Java 11 or a later version which support per-monitor High DPI settings.</p>\n<p>If your goal is to make the icons look crisp, prepare a set of icons for different resolutions using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/image/BaseMultiResolutionImage.html\" rel=\"nofollow noreferrer\"><code>BaseMultiResolutionImage</code></a> (the basic implementation of <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/image/MultiResolutionImage.html\" rel=\"nofollow noreferrer\"><code>MultiResolutionImage</code></a>) to provide higher resolution alternatives. (These are not available in Java 8.)</p>\n<p>You say that you scaled down the original image (240×240) to 18×18px. If the UI needs a higher resolution according to the system setting, all it has now is your small icon (18×18) which will be scaled up, which results in poor quality. You should use a <code>MultiResolutionImage</code> or paint the original image into the required size, letting <code>Graphics</code> to scale it down for you.</p>\n<h1>No Down-Scale</h1>\n<p>This is the simplest way I came up with to make the icon 18×18 without downscaling the original image:</p>\n<pre><code>private static final String IMAGE_URL =\n        &quot;https://tabler-icons.io/static/tabler-icons/icons-png/beach.png&quot;;\n\nprivate static ImageIcon getIcon() {\n    return new ImageIcon(Toolkit.getDefaultToolkit()\n                                .getImage(new URL(IMAGE_URL))) {\n        @Override\n        public int getIconWidth() {\n            return 18;\n        }\n        @Override\n        public int getIconHeight() {\n            return 18;\n        }\n\n        @Override\n        public synchronized void paintIcon(Component c, Graphics g,\n                                           int x, int y) {\n            g.drawImage(getImage(), x, y, 18, 18, null);\n        }\n    };\n}\n</code></pre>\n<p>I left out the exception handling code for <code>MalformedURLException</code> which can be thrown from the <code>URL</code> constructor.</p>\n<p>In this case, the painted image gets down-scaled each time it's painted, which is ineffective. Yet the quality is better. Well, for the standard resolution screen, it's nearly the same as if you down-scaled the image when loading. But in High DPI case, it looks better. It's because for 200% UI Scale, the image will be rendered to 36×36 pixels and these pixels will be created from the source of 240×240 rather than up-scaling the down-scaled version which lost its quality.</p>\n<p><a href=\"https://i.stack.imgur.com/SC57D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SC57D.png\" alt=\"The screenshot of the app without down-scaling at 200%\" /></a></p>\n<p>To get even better results, I recommend using <code>MultiResolutionImage</code>.</p>\n<h1>MultiResolutionImage</h1>\n<p>The app below loads the images from base64-encoded strings (for simplicity so that there are no external dependencies). There are three variants provided: 24×24 (100%, 96dpi), 36×36 (150%, 144dpi), 48×48 (200%, 192dpi).</p>\n<p>If the current scale factor is set to any of the provided resolutions, the image will be rendered as is. If 125% or 175% are used, the larger image will be scaled down; if the scale is greater than 200%, then the image for 200% will be scaled up. You can add more resolutions if needed.</p>\n<p>The app doesn't compile in Java 8 because <code>MultiResolutionImage</code> is not available there. To compile it with JDK 11, you have to replace text blocks with regular String concatenation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.Image;\nimport java.awt.image.BaseMultiResolutionImage;\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport java.util.Base64;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class BeachIconButton {\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(BeachIconButton::new);\n    }\n\n    private BeachIconButton() {\n        JPanel panel = new JPanel();\n        ImageIcon icon = getIcon();\n        JButton button = new JButton(&quot;Test button&quot;, icon);\n        panel.add(button);\n\n        JFrame frame = new JFrame(&quot;Beach Icon Test&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().add(panel);\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n\n    private static ImageIcon getIcon() {\n        return new ImageIcon(\n               new BaseMultiResolutionImage(\n               Arrays.stream(new String[] { BEACH_100, BEACH_150, BEACH_200})\n                     .map(BeachIconButton::loadImage)\n                     .toArray(Image[]::new)));\n    }\n\n    private static Image loadImage(String base64) {\n        try {\n            return ImageIO.read(new ByteArrayInputStream(\n                                Base64.getMimeDecoder().decode(base64)));\n        } catch (IOException e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n\n    private static final String BEACH_100 = &quot;&quot;&quot;\n            iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7DAAAO\n            wwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAXxJ\n            REFUSInl1E9LVVEUBfAfVJBIIoWGIDiRGtagN7Yg+gTZXPwICU4FyUGDahBRCTrK\n            qUVNIxrkJHjWJMKZikIjSyHoYd0GZ186vOef7n2zWnB4e591WXudt/c5/G8Ywiw+\n            4gd28QGLuNCt+C18RXHI+onJuuLjIVBgGWOYyPb2syI3q4qfzZw/ir1raMXeNBay\n            k+zgfNUC25nTBWxGPhfffI78XfzOVD1FP+5lrgusoweXIv+C6xE3qxYocRFrWZHv\n            eBPxA5yJeK9ugRJPdU7QGPoi3+1GfFBqZIFn+BVxC88jft9NgdL9q8gH8MSfUa3V\n            5BKXQ6gl9aOdey1N2GBV4VO4ik/h8CWG67rMcQ53Hf5ErOBGXfEGtjKxVSxhHi/w\n            LeMe4mQV8ROZ67fSZWrHadyW7kKBqaonuC89Bcc5uyKNZ+M4wTvS9d/AY/RmXK80\n            iht/wa+HVgfKB61cTYzGaups8FH89kEFhjBSUzDnR0LrSFT5Sw7i/yH8BmQ0mnmX\n            f2wqAAAAAElFTkSuQmCC&quot;&quot;&quot;;\n\n    private static final String BEACH_150 = &quot;&quot;&quot;\n            iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAABYlAAAW\n            JQFJUiTwAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAoVJ\n            REFUWIXt1kuoTVEYB/DfdZWiq7gykZBHHokyw0QGREpKLgMDGSojQ6+JARFi4JFn\n            ySPyyoCJR8zcIUVJiPLopiMhLoO1d3ftc+7Z95xrnYHyr1V7feu/1/ff3/etby/+\n            4x9DW8K9ZmE9FmTP7fiBp3iE03iS0F9dTMQN/G5gvMLMVopZhi8NisnHD6xohZiV\n            2ea5o584h+WYgAclor5jaUoxE9ATOXiOednaUMUU9mKPkK5YVCXbJwkuKkZmYbS2\n            t8rxpsz+QW2krqYSdF5tCnZjCX5F9h0Zf25k66nizEghaBSOV22cRyt/vhnxd0b2\n            E7gQzXelEJRjnv6L96dQ9IR+9CxaWymcsnx+L6UgQnPtUizyfDwRaiiff8JwjIts\n            71MLytGBy0I9xaLitG7LuCMi2+d4kyEJBVWwWkhPfz568UaI6Mho/XtCDTXYqO/L\n            v+GF2jQ+wNZofrdVYjrwNnK0XYjOYSEt9bp20lMWY0/k5LVQJzlGCn2qur56Mb0V\n            YiYLKcodddXhTcX1iJesU1cj/nc9NPA9axE2Cw02GUYITe6UYgoOCv+29pTOyjAH\n            VxRT1N/4iP0Y2yohHTij9v810Khgiwavy43eqSfhGmZHtt/oxm2h4fUI0Zim75IW\n            4wI24GuDPutiCF4q1sklAx/XJXisGK2zfysGhum7N3/F2ibebce+SNCdFIJgMQ4J\n            F63BYBUOYEqzL87HLaEeKrivPCLrMk5lEPyezNf8MkHv9H9STioegDbF/vM3/Hdl\n            grpLnBxFJ8bgWAmvWX53maBOId/jMRpHGnB8JOM2yx+f+eosE1SNNiH89TY/oTY1\n            zfAHjS7hMv45G3exJiH/P/5d/AHE21JDZYKOHAAAAABJRU5ErkJggg==&quot;&quot;&quot;;\n\n    private static final String BEACH_200 = &quot;&quot;&quot;\n            iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAB2HAAAd\n            hwGP5fFlAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA5FJ\n            REFUaIHt2ctrXFUcB/BPYoWGVGOwBZtYQQoqhUp9IFEoulC04spGExQEpYoiVBBc\n            qVAVwYX/gEWqooKboItqN4oV0frWPgR3XRSl9mHT2GjaJh0X5w6ZOXPuzO08roL5\n            wlnM+T3O93cev3vOb1jCEv7f6CtpnBswjg1Yh2HM4wx+wh58jC9K4lMIfXgIB1Ap\n            2H7FC7jwX+Bbh2uwW3HiqUDWlE26io040YJgkXYKd5TM3Z34K0HmNKYwgavxgLD/\n            WwUxi1vKIr8GfyRIfIAravTuxtmE3g+Jvkrm86pek+/XuOfP4elIbz1mIr15bBUm\n            IG8lPtHjjLkpMeg+jNboDOKXSOcsJjP5bU0CqODBsgOoHsRnsRyvJ+RP1vh4PpId\n            in7v7WUA/diRE0QFhxN92yMfeyL5MxoP+nW9DAJuxY85QdS2AxiosVsrnJmqfAGX\n            4/3I7uVeBwAX4DEcaRLAFFbV2LwSyXdn/ZNR/86es6/BCmyTTpnVWX4Tl2pMv49k\n            PtZF/QfLIl+L9fhN/mrEK3XE4vYajGQzZRKPcTuOyw+k2rbV2FwSyY7GTvt7yTjC\n            UQwV0FspEKf+nMBcVxmdJz7VeEVYkF6F43gKD0f9H5bOOsN9Gkluws04lpBV21z0\n            +7myiRO+wgcjInE6HE/opNpYOZTrEV8RzghX6hjLhWvHKWny35RBNsZogtCrLWxG\n            8JrG8zHRO5r5eCci8bvFDNMKY/hMeNRsF77wpWJM/f2mgke7PciyLvtbKby4NuJe\n            9Y+QGdyEv7FLSJX/CfThfqGmM691Jqlkep8L6bWs2lQSd+F7xUjnte+EYkCpGMQb\n            HRKP247M73mhneVbhY9wY0J2TpjRnUKV4bBQIxrGalyPe4RSY+oe9q1who61wasQ\n            +vC1xtlbwFu4sqCftXhb+i70lR6ei+HEgPtxbZv+NuDnhM/hjpnmoE+YoepAu7Sx\n            byOsELZkWyvQzlINCTWaGbwnpMROsUx4/16Md3GyE2cDQqXsS0wLRPfhJfWFqjyM\n            Zrr78WcX7KczLlvVVzJyMSU/1U1brKSlMJnp9Mp+qkgAs00cVL+imxN244p9iTux\n            ny0SQLMVqLY5PCHs2SGhRHi6gF2n9oVWYABbhOLUZbgoGyx+3rUi+Hhm26n96ozL\n            FgXPQB4262yLdGrfFUxo/vfRCc1fTp3adwUjeFEod5/M2l7h38WREuyXsIQl1OAf\n            9zFZ1uiy3BkAAAAASUVORK5CYII=&quot;&quot;&quot;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683232301,"creation_date":1683216517,"answer_id":76175224,"question_id":70672430,"body_markdown":"I have meanwhile figured out how to take SVG files and transcode them into `BaseMultiResolutionImage` objects for different scaling levels and turn the result into an image icon for use in a JButton:\r\n\r\n```java\r\nimport java.awt.image.BaseMultiResolutionImage;\r\nimport java.awt.image.BufferedImage;\r\nimport java.net.URISyntaxException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport org.apache.batik.transcoder.TranscoderException;\r\nimport org.apache.batik.transcoder.TranscoderInput;\r\nimport org.apache.batik.transcoder.TranscoderOutput;\r\nimport org.apache.batik.transcoder.image.ImageTranscoder;\r\n\r\nimport javax.swing.*;\r\n\r\npublic class SvgIcon {\r\n    private BaseMultiResolutionImage b;\r\n\r\n    // constructor: accepts a path to an SVG file and the baseline dimensions\r\n    public SvgIcon(String svgPath, int baselineSize) {\r\n        this.b = this.createMultiImage(svgPath, baselineSize);\r\n    }\r\n\r\n    // return an image icon with the multi-resolution image\r\n    public ImageIcon getImageIcon() {\r\n        return new ImageIcon(this.b);\r\n    }\r\n\r\n    // create a multi-resolution image for nine common scaling levels\r\n    private BaseMultiResolutionImage createMultiImage(String svgPath, int baselineSize) {\r\n        double[] zoomFactors = {1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0};\r\n        List&lt;BufferedImage&gt; images = new ArrayList&lt;&gt;();\r\n        for (double zoomFactor : zoomFactors) {\r\n            int size = (int) (baselineSize * zoomFactor);\r\n            BufferedImage image = transcodeSvgToImage(svgPath, size, size);\r\n            images.add(image);\r\n        }\r\n        return new BaseMultiResolutionImage(images.stream().toArray(BufferedImage[]::new));\r\n    }\r\n\r\n    // wrapper for the transcoding\r\n    private BufferedImage transcodeSvgToImage(String svgPath, int width, int height) {\r\n        String inputString = null;\r\n        try {\r\n            inputString = getClass().getResource(svgPath).toURI().toString();\r\n        } catch (URISyntaxException e) {\r\n            // deal with the exception\r\n        }\r\n        BufferedImageTranscoder transcoder = new BufferedImageTranscoder();\r\n        transcoder.addTranscodingHint(ImageTranscoder.KEY_WIDTH, (float) width);\r\n        transcoder.addTranscodingHint(ImageTranscoder.KEY_HEIGHT, (float) height);\r\n        TranscoderInput input = new TranscoderInput(inputString);\r\n        try {\r\n            transcoder.transcode(input, null);\r\n        } catch (TranscoderException e) {\r\n            // deal with the exception\r\n        }\r\n        return transcoder.getImage();\r\n    }\r\n\r\n    private static class BufferedImageTranscoder extends ImageTranscoder {\r\n        private BufferedImage image = null;\r\n\r\n        public BufferedImage getImage() {\r\n            return image;\r\n        }\r\n\r\n        @Override\r\n        public BufferedImage createImage(int w, int h) {\r\n            BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\r\n            return bi;\r\n        }\r\n\r\n        @Override\r\n        public void writeImage(BufferedImage img, TranscoderOutput output) {\r\n            image = img;\r\n        }\r\n    }\r\n}\r\n```\r\nNote that the SVG files are stored under `icons/` in my JAR file and I declared them as a resource in my Gradle setup and IDE. If you are reading them from disk, replace the `getClass().getResource(svgPath).toURI().toString()` part above by a String URL to the SVG file.\r\n\r\nWith this class, I can create buttons with image icons for different scaling/zoom levels as follows.\r\n```java\r\nImageIcon imageIcon = new SvgIcon(&quot;/icons/tabler-icon-beach.svg&quot;, 18).getImageIcon();\r\nJButton button = new JButton(imageIcon);\r\n```\r\nThe argument `18` is the baseline size as requested in the original post. The SVG is scaled and stored with various sizes at increments of 25% over the baseline size up to three times as large as the baseline size. So, if the scaling factor of my display is 2 (i.e., 200%), the transcoded version with 36px is used.\r\n\r\n\r\nThis solution requires the Apache Batik Transcoder 1.16. I include it in Gradle like this:\r\n```\r\n// https://mvnrepository.com/artifact/org.apache.xmlgraphics/batik-transcoder\r\nimplementation group: &#39;org.apache.xmlgraphics&#39;, name: &#39;batik-transcoder&#39;, version: &#39;1.16&#39;\r\n```\r\nNote that `BaseMultiResolutionImage` is only available in Java 11 and higher. I asked for Java 8 in the question above, but ultimately found it worthwhile to upgrade the requirement to 11 for this functionality.","title":"Can I supply image icons in Java in a higher resolution to avoid blurred icons after scaling?","body":"<p>I have meanwhile figured out how to take SVG files and transcode them into <code>BaseMultiResolutionImage</code> objects for different scaling levels and turn the result into an image icon for use in a JButton:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.image.BaseMultiResolutionImage;\nimport java.awt.image.BufferedImage;\nimport java.net.URISyntaxException;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.apache.batik.transcoder.TranscoderException;\nimport org.apache.batik.transcoder.TranscoderInput;\nimport org.apache.batik.transcoder.TranscoderOutput;\nimport org.apache.batik.transcoder.image.ImageTranscoder;\n\nimport javax.swing.*;\n\npublic class SvgIcon {\n    private BaseMultiResolutionImage b;\n\n    // constructor: accepts a path to an SVG file and the baseline dimensions\n    public SvgIcon(String svgPath, int baselineSize) {\n        this.b = this.createMultiImage(svgPath, baselineSize);\n    }\n\n    // return an image icon with the multi-resolution image\n    public ImageIcon getImageIcon() {\n        return new ImageIcon(this.b);\n    }\n\n    // create a multi-resolution image for nine common scaling levels\n    private BaseMultiResolutionImage createMultiImage(String svgPath, int baselineSize) {\n        double[] zoomFactors = {1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0};\n        List&lt;BufferedImage&gt; images = new ArrayList&lt;&gt;();\n        for (double zoomFactor : zoomFactors) {\n            int size = (int) (baselineSize * zoomFactor);\n            BufferedImage image = transcodeSvgToImage(svgPath, size, size);\n            images.add(image);\n        }\n        return new BaseMultiResolutionImage(images.stream().toArray(BufferedImage[]::new));\n    }\n\n    // wrapper for the transcoding\n    private BufferedImage transcodeSvgToImage(String svgPath, int width, int height) {\n        String inputString = null;\n        try {\n            inputString = getClass().getResource(svgPath).toURI().toString();\n        } catch (URISyntaxException e) {\n            // deal with the exception\n        }\n        BufferedImageTranscoder transcoder = new BufferedImageTranscoder();\n        transcoder.addTranscodingHint(ImageTranscoder.KEY_WIDTH, (float) width);\n        transcoder.addTranscodingHint(ImageTranscoder.KEY_HEIGHT, (float) height);\n        TranscoderInput input = new TranscoderInput(inputString);\n        try {\n            transcoder.transcode(input, null);\n        } catch (TranscoderException e) {\n            // deal with the exception\n        }\n        return transcoder.getImage();\n    }\n\n    private static class BufferedImageTranscoder extends ImageTranscoder {\n        private BufferedImage image = null;\n\n        public BufferedImage getImage() {\n            return image;\n        }\n\n        @Override\n        public BufferedImage createImage(int w, int h) {\n            BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\n            return bi;\n        }\n\n        @Override\n        public void writeImage(BufferedImage img, TranscoderOutput output) {\n            image = img;\n        }\n    }\n}\n</code></pre>\n<p>Note that the SVG files are stored under <code>icons/</code> in my JAR file and I declared them as a resource in my Gradle setup and IDE. If you are reading them from disk, replace the <code>getClass().getResource(svgPath).toURI().toString()</code> part above by a String URL to the SVG file.</p>\n<p>With this class, I can create buttons with image icons for different scaling/zoom levels as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ImageIcon imageIcon = new SvgIcon(&quot;/icons/tabler-icon-beach.svg&quot;, 18).getImageIcon();\nJButton button = new JButton(imageIcon);\n</code></pre>\n<p>The argument <code>18</code> is the baseline size as requested in the original post. The SVG is scaled and stored with various sizes at increments of 25% over the baseline size up to three times as large as the baseline size. So, if the scaling factor of my display is 2 (i.e., 200%), the transcoded version with 36px is used.</p>\n<p>This solution requires the Apache Batik Transcoder 1.16. I include it in Gradle like this:</p>\n<pre><code>// https://mvnrepository.com/artifact/org.apache.xmlgraphics/batik-transcoder\nimplementation group: 'org.apache.xmlgraphics', name: 'batik-transcoder', version: '1.16'\n</code></pre>\n<p>Note that <code>BaseMultiResolutionImage</code> is only available in Java 11 and higher. I asked for Java 8 in the question above, but ultimately found it worthwhile to upgrade the requirement to 11 for this functionality.</p>\n"}],"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1584,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71101882,"answer_count":2,"score":4,"last_activity_date":1683232301,"creation_date":1641929544,"question_id":70672430,"body_markdown":"I am designing a GUI with Java Swing and AWT (Java 8) and am struggling with the icons I use.\r\n\r\nI load a large PNG image and scale it to 18x18px and then use it in a button or label. It works well in all resolutions when the operating system does not zoom in.\r\n\r\nHowever, with the advent of large screen resolutions (hidpi), it is common practice to use operating system settings to zoom in on user interface controls, including buttons and such things in Java applications. For example, on Windows I use a 150% or 200% scaling of user elements with my 4K resolution to ensure the user interface is still usable. I imagine many users will do so as well.\r\n\r\nWhen that is the case, however, the icons are merely increased in size after already scaling them down to 18x18px. That is, I first scale them down and then the operating system tries to scale them up again with the little information that is still left in the image.\r\n\r\nIs there any way to design image icons in Java that are based on a higher resolution when the zooming/scaling capabilities of the operating system are used in order to avoid them appearing blurred?\r\n\r\nHere is a working example:\r\n\r\n```java\r\nimport java.awt.Container;\r\nimport java.awt.Image;\r\n\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\nclass Example extends JFrame {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tnew Example();\r\n\t}\r\n\t\r\n\tpublic Example() {\r\n\t\tContainer c = getContentPane();\r\n\t\tJPanel panel = new JPanel();\r\n\t\tImageIcon icon = new ImageIcon(new ImageIcon(getClass().getResource(&quot;tabler-icon-beach.png&quot;)).getImage().getScaledInstance(18, 18, Image.SCALE_SMOOTH));\r\n\t\tJButton button = new JButton(&quot;Test button&quot;, icon);\r\n\t\tpanel.add(button);\r\n\t\tc.add(panel);\r\n\t\tthis.pack();\r\n\t\tthis.setLocationRelativeTo(null);\r\n\t\tthis.setVisible(true);\r\n\t}\r\n}\r\n```\r\nYou can find the icon [here](https://tabler-icons.io/static/tabler-icons/icons-png/beach.png). All icons are available as PNG or SVG files.\r\n\r\nTo illustrate the problem, let me first show you two screenshots in the normal 100% screen resolution:\r\n\r\nOn Linux with 100% zoom:\r\n\r\n[![100% zoom on Linux][1]][1]\r\n\r\nOn Windows with 100% zoom:\r\n\r\n[![100% zoom on Windows][2]][2]\r\n\r\nAnd now when I set Windows 7 to have a 200% magnification of layout elements, it&#39;s obviously just the 18x18px version stretched out, which becomes blurred:\r\n\r\n[![200% zoom on Windows][3]][3]\r\n\r\nIs there any way to provide a higher-resolution image icon that is used when the operating system uses a scaling that is larger than 100%? Moreover, you can see that even at 100% the image quality is not perfect; is there any way to improve that as well?\r\n\r\n  [1]: https://i.stack.imgur.com/Zia8Q.png\r\n  [2]: https://i.stack.imgur.com/VN2wQ.png\r\n  [3]: https://i.stack.imgur.com/rdWQX.png","title":"Can I supply image icons in Java in a higher resolution to avoid blurred icons after scaling?","body":"<p>I am designing a GUI with Java Swing and AWT (Java 8) and am struggling with the icons I use.</p>\n<p>I load a large PNG image and scale it to 18x18px and then use it in a button or label. It works well in all resolutions when the operating system does not zoom in.</p>\n<p>However, with the advent of large screen resolutions (hidpi), it is common practice to use operating system settings to zoom in on user interface controls, including buttons and such things in Java applications. For example, on Windows I use a 150% or 200% scaling of user elements with my 4K resolution to ensure the user interface is still usable. I imagine many users will do so as well.</p>\n<p>When that is the case, however, the icons are merely increased in size after already scaling them down to 18x18px. That is, I first scale them down and then the operating system tries to scale them up again with the little information that is still left in the image.</p>\n<p>Is there any way to design image icons in Java that are based on a higher resolution when the zooming/scaling capabilities of the operating system are used in order to avoid them appearing blurred?</p>\n<p>Here is a working example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.Container;\nimport java.awt.Image;\n\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\n@SuppressWarnings(&quot;serial&quot;)\nclass Example extends JFrame {\n\n    public static void main(String[] args) {\n        new Example();\n    }\n    \n    public Example() {\n        Container c = getContentPane();\n        JPanel panel = new JPanel();\n        ImageIcon icon = new ImageIcon(new ImageIcon(getClass().getResource(&quot;tabler-icon-beach.png&quot;)).getImage().getScaledInstance(18, 18, Image.SCALE_SMOOTH));\n        JButton button = new JButton(&quot;Test button&quot;, icon);\n        panel.add(button);\n        c.add(panel);\n        this.pack();\n        this.setLocationRelativeTo(null);\n        this.setVisible(true);\n    }\n}\n</code></pre>\n<p>You can find the icon <a href=\"https://tabler-icons.io/static/tabler-icons/icons-png/beach.png\" rel=\"nofollow noreferrer\">here</a>. All icons are available as PNG or SVG files.</p>\n<p>To illustrate the problem, let me first show you two screenshots in the normal 100% screen resolution:</p>\n<p>On Linux with 100% zoom:</p>\n<p><a href=\"https://i.stack.imgur.com/Zia8Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zia8Q.png\" alt=\"100% zoom on Linux\" /></a></p>\n<p>On Windows with 100% zoom:</p>\n<p><a href=\"https://i.stack.imgur.com/VN2wQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VN2wQ.png\" alt=\"100% zoom on Windows\" /></a></p>\n<p>And now when I set Windows 7 to have a 200% magnification of layout elements, it's obviously just the 18x18px version stretched out, which becomes blurred:</p>\n<p><a href=\"https://i.stack.imgur.com/rdWQX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rdWQX.png\" alt=\"200% zoom on Windows\" /></a></p>\n<p>Is there any way to provide a higher-resolution image icon that is used when the operating system uses a scaling that is larger than 100%? Moreover, you can see that even at 100% the image quality is not perfect; is there any way to improve that as well?</p>\n"},{"tags":["javascript","java","blockchain","solana"],"answers":[{"tags":[],"owner":{"account_id":25705432,"reputation":504,"user_id":19464809,"display_name":"dr497"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659371326,"creation_date":1659371326,"answer_id":73196834,"question_id":73194058,"body_markdown":"I am not familiar with Kotlin or Java but here is how you can do it in other languages assuming the backend receives a `hex` encoded signature\r\n\r\n## JS\r\n\r\n```js\r\nimport { sign } from &quot;tweetnacl&quot;;\r\nsign.detached.verify(\r\n    new TextEncoder().encode(message),\r\n    new Uint8Array(Buffer.from(signed_message, &quot;hex&quot;)),\r\n    new PublicKey(pubkey_signer).toBytes()\r\n  );\r\n```\r\n\r\n## Rust\r\n\r\n```rust\r\nuse {\r\n    hex,\r\n    nacl::sign::verify,\r\n    solana_program::pubkey::Pubkey,\r\n};\r\n\r\n// ...\r\n\r\nverify(\r\n    hex::decode(signed_message)\r\n        .unwrap()\r\n        .as_slice(),\r\n    message.as_bytes(),\r\n    &amp;Pubkey::from_str(&amp;address)\r\n        .unwrap()\r\n        .to_bytes(),\r\n)\r\n.unwrap();\r\n```\r\n\r\n## Go\r\n\r\n```go\r\nimport (\r\n\t&quot;crypto/ed25519&quot;\r\n\t&quot;encoding/hex&quot;\r\n\r\n\t&quot;github.com/mr-tron/base58&quot;\r\n)\r\n\r\nfunc verify(message string, signedMessage string, pubkey string) bool {\r\n\tbytes, err := base58.Decode(pubkey)\r\n\tif err != nil {\r\n\t\treturn false\r\n\t}\r\n\r\n\tmessageAsBytes := []byte(message)\r\n\r\n\tsignedMessageAsBytes, err := hex.DecodeString(signedMessage)\r\n\tif err != nil {\r\n\t\treturn false\r\n\t}\r\n\r\n\treturn ed25519.Verify(bytes, messageAsBytes, signedMessageAsBytes)\r\n}\r\n```\r\n\r\n## Python\r\n\r\n```python\r\nimport base58\r\nfrom nacl.signing import VerifyKey\r\n\r\ndef verify_message(message: bytes, signed_message: str, address: str) -&gt; bool:\r\n    address_bytes = base58.b58decode(address)\r\n    vk = VerifyKey(address_bytes)\r\n    try:\r\n        vk.verify(message, bytes.fromhex(signed_message))\r\n        return True\r\n    except:\r\n        return False\r\n```","title":"How to verify a signature from the Phantom wallet?","body":"<p>I am not familiar with Kotlin or Java but here is how you can do it in other languages assuming the backend receives a <code>hex</code> encoded signature</p>\n<h2>JS</h2>\n<pre class=\"lang-js prettyprint-override\"><code>import { sign } from &quot;tweetnacl&quot;;\nsign.detached.verify(\n    new TextEncoder().encode(message),\n    new Uint8Array(Buffer.from(signed_message, &quot;hex&quot;)),\n    new PublicKey(pubkey_signer).toBytes()\n  );\n</code></pre>\n<h2>Rust</h2>\n<pre class=\"lang-rust prettyprint-override\"><code>use {\n    hex,\n    nacl::sign::verify,\n    solana_program::pubkey::Pubkey,\n};\n\n// ...\n\nverify(\n    hex::decode(signed_message)\n        .unwrap()\n        .as_slice(),\n    message.as_bytes(),\n    &amp;Pubkey::from_str(&amp;address)\n        .unwrap()\n        .to_bytes(),\n)\n.unwrap();\n</code></pre>\n<h2>Go</h2>\n<pre class=\"lang-golang prettyprint-override\"><code>import (\n    &quot;crypto/ed25519&quot;\n    &quot;encoding/hex&quot;\n\n    &quot;github.com/mr-tron/base58&quot;\n)\n\nfunc verify(message string, signedMessage string, pubkey string) bool {\n    bytes, err := base58.Decode(pubkey)\n    if err != nil {\n        return false\n    }\n\n    messageAsBytes := []byte(message)\n\n    signedMessageAsBytes, err := hex.DecodeString(signedMessage)\n    if err != nil {\n        return false\n    }\n\n    return ed25519.Verify(bytes, messageAsBytes, signedMessageAsBytes)\n}\n</code></pre>\n<h2>Python</h2>\n<pre class=\"lang-py prettyprint-override\"><code>import base58\nfrom nacl.signing import VerifyKey\n\ndef verify_message(message: bytes, signed_message: str, address: str) -&gt; bool:\n    address_bytes = base58.b58decode(address)\n    vk = VerifyKey(address_bytes)\n    try:\n        vk.verify(message, bytes.fromhex(signed_message))\n        return True\n    except:\n        return False\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683231653,"creation_date":1682796113,"answer_id":76138017,"question_id":73194058,"body_markdown":"The easiest way to do it in Java or Kotlin is using [sol4k][1].\r\n\r\n\r\nFirst, add it to your project (Gradle as an example):\r\n\r\n    implementation &#39;org.sol4k:sol4k:0.3.2&#39;\r\n\r\nThen call it from your Java code:\r\n\r\n    import org.sol4k.Base58;\r\n    import org.sol4k.PublicKey;\r\n    // ...\r\n    boolean verifySignature(String signature, String walletAddress) {\r\n        String message = &quot;signing message&quot;;\r\n        byte[] messageBytes = message.getBytes();\r\n        PublicKey publicKey = new PublicKey(walletAddress);\r\n        byte[] signatureBytes = Base58.decode(signature);\r\n        return publicKey.verify(signatureBytes, messageBytes);\r\n    }\r\n\r\nHere, `signature` and `walletAddress` are Base58 encoded strings.\r\n\r\n\r\nFrontend example how to get wallet address and the signature ([Phantom docs][2]):\r\n\r\n    const provider = window.phantom.solana;\r\n    const encodedMessage = new TextEncoder().encode(&#39;signing message&#39;);\r\n    const signedMessage = await provider.signMessage(encodedMessage, &quot;utf8&quot;);\r\n    const base58 = await import(&quot;bs58&quot;);\r\n    const walletAddress = provider.publicKey.toString();\r\n    const signature = base58.encode(signedMessage.signature);\r\n\r\nHere is [a blogpost][3] on the subject.\r\n\r\n\r\n  [1]: https://github.com/sol4k/sol4k\r\n  [2]: https://docs.phantom.app/getting-started-with-solana/signing-a-message\r\n  [3]: https://shpota.com/2023/05/04/how-to-verify-a-solana-wallet-signature-using-java.html","title":"How to verify a signature from the Phantom wallet?","body":"<p>The easiest way to do it in Java or Kotlin is using <a href=\"https://github.com/sol4k/sol4k\" rel=\"nofollow noreferrer\">sol4k</a>.</p>\n<p>First, add it to your project (Gradle as an example):</p>\n<pre><code>implementation 'org.sol4k:sol4k:0.3.2'\n</code></pre>\n<p>Then call it from your Java code:</p>\n<pre><code>import org.sol4k.Base58;\nimport org.sol4k.PublicKey;\n// ...\nboolean verifySignature(String signature, String walletAddress) {\n    String message = &quot;signing message&quot;;\n    byte[] messageBytes = message.getBytes();\n    PublicKey publicKey = new PublicKey(walletAddress);\n    byte[] signatureBytes = Base58.decode(signature);\n    return publicKey.verify(signatureBytes, messageBytes);\n}\n</code></pre>\n<p>Here, <code>signature</code> and <code>walletAddress</code> are Base58 encoded strings.</p>\n<p>Frontend example how to get wallet address and the signature (<a href=\"https://docs.phantom.app/getting-started-with-solana/signing-a-message\" rel=\"nofollow noreferrer\">Phantom docs</a>):</p>\n<pre><code>const provider = window.phantom.solana;\nconst encodedMessage = new TextEncoder().encode('signing message');\nconst signedMessage = await provider.signMessage(encodedMessage, &quot;utf8&quot;);\nconst base58 = await import(&quot;bs58&quot;);\nconst walletAddress = provider.publicKey.toString();\nconst signature = base58.encode(signedMessage.signature);\n</code></pre>\n<p>Here is <a href=\"https://shpota.com/2023/05/04/how-to-verify-a-solana-wallet-signature-using-java.html\" rel=\"nofollow noreferrer\">a blogpost</a> on the subject.</p>\n"}],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":499,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76138017,"answer_count":2,"score":2,"last_activity_date":1683231653,"creation_date":1659358672,"question_id":73194058,"body_markdown":"I am able to sign a message on the client side using something like this:\r\n\r\n    const encodedMessage = new TextEncoder().encode(&quot;some message&quot;);\r\n    const signedMessage = await provider.signMessage(encodedMessage, &quot;utf8&quot;);\r\n\r\nNow I want to verify the signature on the back end side using Kotlin (or Java).\r\n\r\n**Problem**:\r\n\r\n 1. I cannot find the information about the algorithm that is used for signing messages [in the documentation][1].\r\n 2. It seems like there are no Java/Kotlin libraries that work with Phantom and Solana (found a few which are not updated for a year).\r\n\r\n**Question**: How can I verify a signature from the Phantom wallet using Java? Or generally how can I do that in any language? (I will port it to Java then).\r\n\r\n\r\n  [1]: https://docs.phantom.app/integrating/extension-and-in-app-browser-web-apps/signing-a-message","title":"How to verify a signature from the Phantom wallet?","body":"<p>I am able to sign a message on the client side using something like this:</p>\n<pre><code>const encodedMessage = new TextEncoder().encode(&quot;some message&quot;);\nconst signedMessage = await provider.signMessage(encodedMessage, &quot;utf8&quot;);\n</code></pre>\n<p>Now I want to verify the signature on the back end side using Kotlin (or Java).</p>\n<p><strong>Problem</strong>:</p>\n<ol>\n<li>I cannot find the information about the algorithm that is used for signing messages <a href=\"https://docs.phantom.app/integrating/extension-and-in-app-browser-web-apps/signing-a-message\" rel=\"nofollow noreferrer\">in the documentation</a>.</li>\n<li>It seems like there are no Java/Kotlin libraries that work with Phantom and Solana (found a few which are not updated for a year).</li>\n</ol>\n<p><strong>Question</strong>: How can I verify a signature from the Phantom wallet using Java? Or generally how can I do that in any language? (I will port it to Java then).</p>\n"},{"tags":["java","macos","selenium","google-chrome","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1542799400,"creation_date":1539932351,"answer_id":52887265,"question_id":52883098,"body_markdown":"This error message...\r\n\r\n\torg.openqa.selenium.WebDriverException: unknown error: failed to change window state to maximized, current state is normal\r\n\r\n...implies that the _ChromeDriver_ was unable to **maximize** the window state of _Chrome Browser_ client.\r\n\r\n\r\n----------\r\n\r\n\r\nBuggy Mac OSX ChromeDriver Replaced\r\n-----------------------------------\r\nAfter Chrome version 70 was released, some of you have reported that using ChromeDriver to maximize browser window on Mac no longer works. ChromeDriver Team have investigated this issue, and created a fix for it. ChromeDriver builds with the fix are now available at the following locations:\r\n\r\n- If you are using Chrome version 70 (the current stable release), please download ChromeDriver version 70.0.3538.97 from https://chromedriver.storage.googleapis.com/index.html?path=70.0.3538.97/\r\n- If you are using Chrome version 71 (the current beta release), please download ChromeDriver version 71.0.3578.33 from https://chromedriver.storage.googleapis.com/index.html?path=71.0.3578.33/\r\n\r\n\r\n----------\r\n\r\n\r\nSnapshot of ChromeDriver Release Email\r\n\r\n![ChromeDriver_new](https://i.stack.imgur.com/3PCpo.png)\r\n\r\n\r\n----------\r\n\r\n\r\nHowever, your main issue is the **incompatibility** between the version of the binaries you are using as follows:\r\n\r\n- Your _JDK version_ is **1.8.0_131** which is pretty **ancient**.\r\n - Upgrade _JDK_ to  recent levels [**JDK 8u181**](https://www.oracle.com/technetwork/java/javase/downloads/index.html).\r\n- Your _Selenium Client_ version is **3.4.0** which is almost **a year** older.\r\n - Upgrade _Selenium_ to  current levels [**Version 3.14.0**](https://docs.seleniumhq.org/download/).\r\n\r\n\r\n----------\r\n\r\n\r\nFrom another perspective, this issue looks like a regression issue from [Feature request : ChromeDriver to support window resizing over a remote connection](https://bugs.chromium.org/p/chromedriver/issues/detail?id=1855).\r\n\r\n_ChromeDriver v2.43_ in the [Release Notes](https://chromedriver.storage.googleapis.com/2.43/notes.txt) have explicitly mentioned:\r\n\r\n&gt;ChromeDriver to support window resizing over a remote connection\r\n\r\nHowever, as per _best practices_ to maximize the _Chrome Browser_ client it is suggested to use `ChromeOptions` class as follows:\r\n\r\n\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\your_directory\\\\chromedriver.exe&quot;);\r\n\tChromeOptions opt = new ChromeOptions();\r\n\topt.addArguments(&quot;disable-infobars&quot;);\r\n\topt.addArguments(&quot;--start-maximized&quot;);\r\n\topt.addArguments(&quot;--disable-extensions&quot;);\r\n\tWebDriver driver = new ChromeDriver(opt);\r\n\tdriver.get(&quot;https://google.com&quot;);\r\n\r\n\r\n----------\r\n\r\n\r\n\r\nReference\r\n---------\t\r\nYou can find a detailed discussion in [driver.manage().window().maximize() issue with ChromeDriver 2.33](https://stackoverflow.com/questions/46802051/driver-manage-window-maximize-issue-with-chromedriver-2-33)\r\n\r\n\r\n----------\r\n\r\n\r\nUpdate(Nov 20, 2018)\r\n--------------------\r\n\r\n- ChromeDriver **2.44** has been released.\r\n- ChromeDriver **2.44** supports Chrome versions _69_ to _71_\r\n- This release is similar to ChromeDriver **2.43**, but with additional bug fixes. \r\n- A ChromeDriver that supports **chrome 72.x** is expected to be released in the early December.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3PCpo.png","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>This error message...</p>\n\n<pre><code>org.openqa.selenium.WebDriverException: unknown error: failed to change window state to maximized, current state is normal\n</code></pre>\n\n<p>...implies that the <em>ChromeDriver</em> was unable to <strong>maximize</strong> the window state of <em>Chrome Browser</em> client.</p>\n\n<hr>\n\n<h2>Buggy Mac OSX ChromeDriver Replaced</h2>\n\n<p>After Chrome version 70 was released, some of you have reported that using ChromeDriver to maximize browser window on Mac no longer works. ChromeDriver Team have investigated this issue, and created a fix for it. ChromeDriver builds with the fix are now available at the following locations:</p>\n\n<ul>\n<li>If you are using Chrome version 70 (the current stable release), please download ChromeDriver version 70.0.3538.97 from <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=70.0.3538.97/\" rel=\"nofollow noreferrer\">https://chromedriver.storage.googleapis.com/index.html?path=70.0.3538.97/</a></li>\n<li>If you are using Chrome version 71 (the current beta release), please download ChromeDriver version 71.0.3578.33 from <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=71.0.3578.33/\" rel=\"nofollow noreferrer\">https://chromedriver.storage.googleapis.com/index.html?path=71.0.3578.33/</a></li>\n</ul>\n\n<hr>\n\n<p>Snapshot of ChromeDriver Release Email</p>\n\n<p><img src=\"https://i.stack.imgur.com/3PCpo.png\" alt=\"ChromeDriver_new\"></p>\n\n<hr>\n\n<p>However, your main issue is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n\n<ul>\n<li>Your <em>JDK version</em> is <strong>1.8.0_131</strong> which is pretty <strong>ancient</strong>.\n\n<ul>\n<li>Upgrade <em>JDK</em> to  recent levels <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\"><strong>JDK 8u181</strong></a>.</li>\n</ul></li>\n<li>Your <em>Selenium Client</em> version is <strong>3.4.0</strong> which is almost <strong>a year</strong> older.\n\n<ul>\n<li>Upgrade <em>Selenium</em> to  current levels <a href=\"https://docs.seleniumhq.org/download/\" rel=\"nofollow noreferrer\"><strong>Version 3.14.0</strong></a>.</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>From another perspective, this issue looks like a regression issue from <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=1855\" rel=\"nofollow noreferrer\">Feature request : ChromeDriver to support window resizing over a remote connection</a>.</p>\n\n<p><em>ChromeDriver v2.43</em> in the <a href=\"https://chromedriver.storage.googleapis.com/2.43/notes.txt\" rel=\"nofollow noreferrer\">Release Notes</a> have explicitly mentioned:</p>\n\n<blockquote>\n  <p>ChromeDriver to support window resizing over a remote connection</p>\n</blockquote>\n\n<p>However, as per <em>best practices</em> to maximize the <em>Chrome Browser</em> client it is suggested to use <code>ChromeOptions</code> class as follows:</p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\", \"C:\\\\your_directory\\\\chromedriver.exe\");\nChromeOptions opt = new ChromeOptions();\nopt.addArguments(\"disable-infobars\");\nopt.addArguments(\"--start-maximized\");\nopt.addArguments(\"--disable-extensions\");\nWebDriver driver = new ChromeDriver(opt);\ndriver.get(\"https://google.com\");\n</code></pre>\n\n<hr>\n\n<h2>Reference</h2>\n\n<p>You can find a detailed discussion in <a href=\"https://stackoverflow.com/questions/46802051/driver-manage-window-maximize-issue-with-chromedriver-2-33\">driver.manage().window().maximize() issue with ChromeDriver 2.33</a></p>\n\n<hr>\n\n<h2>Update(Nov 20, 2018)</h2>\n\n<ul>\n<li>ChromeDriver <strong>2.44</strong> has been released.</li>\n<li>ChromeDriver <strong>2.44</strong> supports Chrome versions <em>69</em> to <em>71</em></li>\n<li>This release is similar to ChromeDriver <strong>2.43</strong>, but with additional bug fixes. </li>\n<li>A ChromeDriver that supports <strong>chrome 72.x</strong> is expected to be released in the early December.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":14667682,"reputation":1,"user_id":10593058,"display_name":"Jim B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541101535,"creation_date":1541101535,"answer_id":53108356,"question_id":52883098,"body_markdown":"Had this same thing happen using Selenium 3.14.0, Chrome 70, Chromedriver 2.43.\r\n\r\nThe fix for me was the remove the `--start-maximized` flag from my chromeoptions, and after the browser is open have a call to a method that does:\r\n\r\n    \tdriver.manage().window().setPosition(new Point(0, 0));\r\n\t\tdriver.manage().window().setSize(new Dimension(1920, 1080));\r\n    \r\nWe&#39;re also running our remote automation in AWS EC2 containers running CentOS.\r\nIn Windows and Mac the above flag had no issues when running locally.","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>Had this same thing happen using Selenium 3.14.0, Chrome 70, Chromedriver 2.43.</p>\n\n<p>The fix for me was the remove the <code>--start-maximized</code> flag from my chromeoptions, and after the browser is open have a call to a method that does:</p>\n\n<pre><code>    driver.manage().window().setPosition(new Point(0, 0));\n    driver.manage().window().setSize(new Dimension(1920, 1080));\n</code></pre>\n\n<p>We're also running our remote automation in AWS EC2 containers running CentOS.\nIn Windows and Mac the above flag had no issues when running locally.</p>\n"},{"tags":[],"owner":{"account_id":8156530,"reputation":347,"user_id":6141913,"accept_rate":100,"display_name":"CosetteN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541442509,"creation_date":1541442509,"answer_id":53160125,"question_id":52883098,"body_markdown":"For those facing this problem using Codeception, simply change window_size option to false.\r\n\r\n    - Webdriver:\r\n       url: &#39;http://localhost/&#39;\r\n       window_size: false\r\n\r\n","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>For those facing this problem using Codeception, simply change window_size option to false.</p>\n\n<pre><code>- Webdriver:\n   url: 'http://localhost/'\n   window_size: false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10576287,"reputation":1907,"user_id":7791521,"accept_rate":71,"display_name":"Mikko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1542761299,"creation_date":1542761299,"answer_id":53403780,"question_id":52883098,"body_markdown":"Updating chromedriver to version **2.44** solved the problem for me (sort of). Don&#39;t get the error anymore, but window is maximized horizontally beyond the screen. However, the tests work.\r\n\r\n**Option 1. Install via homebrew**\r\n\r\nIf you have previously installed it via homebrew, it has been moved to cask. So uninstall the old version:\r\n\r\n    brew uninstall chromedriver\r\n\r\nThen install the new version from cask:\r\n\r\n    brew tap homebrew/cask\r\n    brew cask install chromedriver\r\n\r\nNow you should have the new version in your path and the error is gone.\r\n\r\n**Option 2. Download the driver**\r\n\r\nDownload the driver from\r\n\r\n    https://chromedriver.storage.googleapis.com/index.html?path=2.44/\r\n\r\nAnd place it to your path.","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>Updating chromedriver to version <strong>2.44</strong> solved the problem for me (sort of). Don't get the error anymore, but window is maximized horizontally beyond the screen. However, the tests work.</p>\n\n<p><strong>Option 1. Install via homebrew</strong></p>\n\n<p>If you have previously installed it via homebrew, it has been moved to cask. So uninstall the old version:</p>\n\n<pre><code>brew uninstall chromedriver\n</code></pre>\n\n<p>Then install the new version from cask:</p>\n\n<pre><code>brew tap homebrew/cask\nbrew cask install chromedriver\n</code></pre>\n\n<p>Now you should have the new version in your path and the error is gone.</p>\n\n<p><strong>Option 2. Download the driver</strong></p>\n\n<p>Download the driver from</p>\n\n<pre><code>https://chromedriver.storage.googleapis.com/index.html?path=2.44/\n</code></pre>\n\n<p>And place it to your path.</p>\n"},{"tags":[],"owner":{"account_id":18937711,"reputation":11,"user_id":13818431,"display_name":"Dejy Joy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606157699,"creation_date":1606157699,"answer_id":64974620,"question_id":52883098,"body_markdown":"I observed this issue when running package suite and tried ChromeOptions but didnt work.So have tried this way and worked for me:\r\n\r\n       Dimension ExpectedDimension=new Dimension(Screen dimensions accordingly)\r\n       Dimension Before_Maximising= Driver.manage().window().getSize();\r\n       Logging.info(&quot;Before_Maximising&quot;+Before_Maximising);\r\n       if(Before_Maximising.equals(ExpectedDimension)) {\r\n        \tLogging.info(&quot;Already maximised&quot;);\r\n       }\r\n        else {\r\n        Driver.manage().window().setSize(ExpectedDimension);;\r\n        Dimension After_Maximising = Driver().manage().window().getSize();\r\n        Logging.info(&quot;After_Maximising&quot;+After_Maximising);\r\n        }","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>I observed this issue when running package suite and tried ChromeOptions but didnt work.So have tried this way and worked for me:</p>\n<pre><code>   Dimension ExpectedDimension=new Dimension(Screen dimensions accordingly)\n   Dimension Before_Maximising= Driver.manage().window().getSize();\n   Logging.info(&quot;Before_Maximising&quot;+Before_Maximising);\n   if(Before_Maximising.equals(ExpectedDimension)) {\n        Logging.info(&quot;Already maximised&quot;);\n   }\n    else {\n    Driver.manage().window().setSize(ExpectedDimension);;\n    Dimension After_Maximising = Driver().manage().window().getSize();\n    Logging.info(&quot;After_Maximising&quot;+After_Maximising);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4196585,"reputation":954,"user_id":3437862,"accept_rate":62,"display_name":"Pablo Guerrero"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683231615,"creation_date":1683231615,"answer_id":76177105,"question_id":52883098,"body_markdown":"I was facing the same problem with selenium 4.5.0 and was solved by updating to 4.9.0 (Chrome Version 112).","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>I was facing the same problem with selenium 4.5.0 and was solved by updating to 4.9.0 (Chrome Version 112).</p>\n"}],"owner":{"account_id":2393727,"reputation":113,"user_id":2093025,"display_name":"user2093025"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12454,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":52887265,"answer_count":6,"score":11,"last_activity_date":1683231615,"creation_date":1539899303,"question_id":52883098,"body_markdown":"We are on Macs, using Chrome Version 70.0.3538.67 (Official Build) (64-bit), ChromeDriver 2.43.600229. Chrome windows appear, but URL is stuck at &quot;data:,&quot;.  (stack trace below)\r\n\r\nWe found a work-around using Chrome version 69 w/ chromedriver 2.43, however, Chrome continues to insist on updating itself.  \r\n\r\n\r\nWe are running Selenium-java 3.4, htmlunit-driver 2.27, testng 6.9.4, junit 4.7 with maven-compiler-plugin 3.6.1, maven-surefire-plugin 2.22.0.\r\n\r\n    org.openqa.selenium.WebDriverException: unknown error: failed to change window state to maximized, current state is normal\r\n      (Session info: chrome=70.0.3538.67)\r\n      (Driver info: chromedriver=2.43.600229 (3fae4d0cda5334b4f533bede5a4787f7b832d052),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information)\r\n    Command duration or timeout: 107 milliseconds\r\n    Build info: version: &#39;3.4.0&#39;, revision: &#39;unknown&#39;, time: &#39;unknown&#39;\r\n    System info: host: &#39;edited&#39;, ip: &#39;edited&#39;, os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;10.13.6&#39;, java.version: &#39;1.8.0_131&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Capabilities [{mobileEmulationEnabled=false, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:52400}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=2.43.600229 (3fae4d0cda5334b4f533bede5a4787f7b832d052), userDataDir=/var/folders/cd/rrq4w8sd3gz92ygpfx5_kwtw0000gp/T/.org.chromium.Chromium.DCVcH3}, takesHeapSnapshot=true, pageLoadStrategy=normal, databaseEnabled=false, handlesAlerts=true, version=70.0.3538.67, browserConnectionEnabled=false, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}]\r\n    Session ID: adb51408a3b04f990288d09604daa3a9\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n        at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:215)\r\n        at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:167)\r\n        at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:671)\r\n        at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:694)\r\n        at org.openqa.selenium.remote.RemoteWebDriver$RemoteWebDriverOptions$RemoteWindow.maximize(RemoteWebDriver.java:925)\r\n        at ufis.common.TestSuiteUtils.getDriver(TestSuiteUtils.java:59)\r\n        at ufis.test.cv.categories.research.independentresearch.IndependentResearchValidationTests.setUpClass(IndependentResearchValidationTests.java:45)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:85)\r\n        at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:517)\r\n        at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)\r\n        at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:140)\r\n        at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:170)\r\n        at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:104)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:748)","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>We are on Macs, using Chrome Version 70.0.3538.67 (Official Build) (64-bit), ChromeDriver 2.43.600229. Chrome windows appear, but URL is stuck at \"data:,\".  (stack trace below)</p>\n\n<p>We found a work-around using Chrome version 69 w/ chromedriver 2.43, however, Chrome continues to insist on updating itself.  </p>\n\n<p>We are running Selenium-java 3.4, htmlunit-driver 2.27, testng 6.9.4, junit 4.7 with maven-compiler-plugin 3.6.1, maven-surefire-plugin 2.22.0.</p>\n\n<pre><code>org.openqa.selenium.WebDriverException: unknown error: failed to change window state to maximized, current state is normal\n  (Session info: chrome=70.0.3538.67)\n  (Driver info: chromedriver=2.43.600229 (3fae4d0cda5334b4f533bede5a4787f7b832d052),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information)\nCommand duration or timeout: 107 milliseconds\nBuild info: version: '3.4.0', revision: 'unknown', time: 'unknown'\nSystem info: host: 'edited', ip: 'edited', os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.13.6', java.version: '1.8.0_131'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCapabilities [{mobileEmulationEnabled=false, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:52400}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=2.43.600229 (3fae4d0cda5334b4f533bede5a4787f7b832d052), userDataDir=/var/folders/cd/rrq4w8sd3gz92ygpfx5_kwtw0000gp/T/.org.chromium.Chromium.DCVcH3}, takesHeapSnapshot=true, pageLoadStrategy=normal, databaseEnabled=false, handlesAlerts=true, version=70.0.3538.67, browserConnectionEnabled=false, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}]\nSession ID: adb51408a3b04f990288d09604daa3a9\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:215)\n    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:167)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:671)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:694)\n    at org.openqa.selenium.remote.RemoteWebDriver$RemoteWebDriverOptions$RemoteWindow.maximize(RemoteWebDriver.java:925)\n    at ufis.common.TestSuiteUtils.getDriver(TestSuiteUtils.java:59)\n    at ufis.test.cv.categories.research.independentresearch.IndependentResearchValidationTests.setUpClass(IndependentResearchValidationTests.java:45)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:85)\n    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:517)\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:140)\n    at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:170)\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:104)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1683263611,"post_id":76177079,"comment_id":134343005,"body_markdown":"Maybe better way to test somewhere in separate env, deploy your service with plugins into some env let&#39;s call it &#39;mock&#39;, and create let&#39;s call acceptance tests that will run in this environment calling actual service that&#39;s already up","body":"Maybe better way to test somewhere in separate env, deploy your service with plugins into some env let&#39;s call it &#39;mock&#39;, and create let&#39;s call acceptance tests that will run in this environment calling actual service that&#39;s already up"},{"owner":{"account_id":3634133,"reputation":919,"user_id":3029642,"accept_rate":46,"display_name":"user3029642"},"score":0,"creation_date":1683559448,"post_id":76177079,"comment_id":134381376,"body_markdown":"Thanks Anton. That&#39;s my fallback, but I was hoping I could establish a pattern to allow plugin developers to easily test their plugins during the development process. If possible, I do not want them to have to wait for CICD testing to validate a change.","body":"Thanks Anton. That&#39;s my fallback, but I was hoping I could establish a pattern to allow plugin developers to easily test their plugins during the development process. If possible, I do not want them to have to wait for CICD testing to validate a change."},{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1683561333,"post_id":76177079,"comment_id":134381808,"body_markdown":"Maybe you can look how testcontainers team implement their solutions or you can look on way to test spring-cloud-stream applications. For example, when you&#39;re testing it you need to add such dependency:\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\n            &lt;type&gt;test-jar&lt;/type&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;classifier&gt;test-binder&lt;/classifier&gt;\n        &lt;/dependency&gt;","body":"Maybe you can look how testcontainers team implement their solutions or you can look on way to test spring-cloud-stream applications. For example, when you&#39;re testing it you need to add such dependency:         &lt;dependency&gt;             &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;             &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;             &lt;type&gt;test-jar&lt;/type&gt;             &lt;scope&gt;test&lt;/scope&gt;             &lt;classifier&gt;test-binder&lt;/classifier&gt;         &lt;/dependency&gt;"}],"owner":{"account_id":3634133,"reputation":919,"user_id":3029642,"accept_rate":46,"display_name":"user3029642"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683231353,"creation_date":1683231353,"question_id":76177079,"body_markdown":"I have a Spring Boot application that supports plugins. Plugins are jar files added to the core application docker container when deployed. The core application scans the plugin jars and adds components to the context.\r\n\r\nI am looking for the best way to integration test the plugins with the core application. To that end, I added the core application jar as a test-scoped dependency for the plugins, but I&#39;m not sure how run the tests with the full application context. I tried adding the primary configuration class from the core application to the @SpringBootTest annotation on the plugin tests, but I&#39;m getting a cannot find symbol compilation error, so apparently that will not work with classes inside dependency jars. \r\n\r\n    @CamelSpringBootTest\r\n    @SpringBootTest(\r\n        classes = { CoreApplication.class },\r\n        properties = { \r\n    &quot;spring.cloud.consul.enabled=false&quot;,&quot;spring.cloud.consul.discovery.enabled=false&quot;} // disable \r\n    consul to avoid errors\r\n    )\r\n    @EnableAutoConfiguration\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    public class APluginTest {\r\n\r\nAny suggestions on how I should wire these integration tests for plugins?\r\n\r\nThanks!","title":"Spring Boot Integration Testing with Plugins","body":"<p>I have a Spring Boot application that supports plugins. Plugins are jar files added to the core application docker container when deployed. The core application scans the plugin jars and adds components to the context.</p>\n<p>I am looking for the best way to integration test the plugins with the core application. To that end, I added the core application jar as a test-scoped dependency for the plugins, but I'm not sure how run the tests with the full application context. I tried adding the primary configuration class from the core application to the @SpringBootTest annotation on the plugin tests, but I'm getting a cannot find symbol compilation error, so apparently that will not work with classes inside dependency jars.</p>\n<pre><code>@CamelSpringBootTest\n@SpringBootTest(\n    classes = { CoreApplication.class },\n    properties = { \n&quot;spring.cloud.consul.enabled=false&quot;,&quot;spring.cloud.consul.discovery.enabled=false&quot;} // disable \nconsul to avoid errors\n)\n@EnableAutoConfiguration\n@ActiveProfiles(&quot;test&quot;)\npublic class APluginTest {\n</code></pre>\n<p>Any suggestions on how I should wire these integration tests for plugins?</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-mvc","spring-tool-suite","tomcat9","spring-tools-4"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683219216,"post_id":76167465,"comment_id":134336832,"body_markdown":"How are you running in debug mode?   Using an IDE?  From the command line?   Please provide any details that might help us understand and diagnose your problem.","body":"How are you running in debug mode?   Using an IDE?  From the command line?   Please provide any details that might help us understand and diagnose your problem."},{"owner":{"account_id":2391768,"reputation":665,"user_id":2091487,"accept_rate":100,"display_name":"headlikearock"},"score":0,"creation_date":1683230905,"post_id":76167465,"comment_id":134339278,"body_markdown":"@StephenC - I&#39;ve updated the question with more details.","body":"@StephenC - I&#39;ve updated the question with more details."}],"owner":{"account_id":2391768,"reputation":665,"user_id":2091487,"accept_rate":100,"display_name":"headlikearock"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683230984,"creation_date":1683142837,"question_id":76167465,"body_markdown":"No breakpoint sets, fresh install (yesterday) of Spring Tools 4, using MS Open JDK 11, Tomcat 9 and Spring 5. My webapp starts up fine on Tomcat if I run it regular but when I try to run in debug mode it just hangs indefinitely. No breakpoints are set. Is there an argument I need to set in Tomcat, STS  or Java in order to get it to run in Debug mode?\r\n\r\nUpdate based on comment for more info:\r\nI&#39;m using Spring Tool Suite 4. I&#39;ve added Tomcat 9 as a Server via the IDE options (Window-&gt;Show View-&gt;Servers, then right click in window and adding Tomcat 9).  I&#39;ve started debug by right clicking on the server and selecting Debug and also through he debug icon in the top menu of STS.  I have tried switching JREs from the one I installed (Java 11) to the default one that came with STS (Java 17) and that did not make a difference. I was able to run a basic Java class in debug mode so I feel like that has ruled out STS and Java as the issues and now I&#39;m focusing on Tomcat (Tomcat 9) and the web app (Spring 5) itself and trying to see if there are any configuration options that I need to make.\r\n","title":"Spring Tools 4, Java 11, Tomcat 9, Spring 5 app - runs in regular mode but hangs indefinitely when trying to debug","body":"<p>No breakpoint sets, fresh install (yesterday) of Spring Tools 4, using MS Open JDK 11, Tomcat 9 and Spring 5. My webapp starts up fine on Tomcat if I run it regular but when I try to run in debug mode it just hangs indefinitely. No breakpoints are set. Is there an argument I need to set in Tomcat, STS  or Java in order to get it to run in Debug mode?</p>\n<p>Update based on comment for more info:\nI'm using Spring Tool Suite 4. I've added Tomcat 9 as a Server via the IDE options (Window-&gt;Show View-&gt;Servers, then right click in window and adding Tomcat 9).  I've started debug by right clicking on the server and selecting Debug and also through he debug icon in the top menu of STS.  I have tried switching JREs from the one I installed (Java 11) to the default one that came with STS (Java 17) and that did not make a difference. I was able to run a basic Java class in debug mode so I feel like that has ruled out STS and Java as the issues and now I'm focusing on Tomcat (Tomcat 9) and the web app (Spring 5) itself and trying to see if there are any configuration options that I need to make.</p>\n"},{"tags":["java","selenium-webdriver","properties-file","owner"],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683230476,"creation_date":1683230476,"answer_id":76176986,"question_id":76174393,"body_markdown":"You can try below steps to solve it \r\n    \r\n1. Print the value of ${user.dir} to the console or log file to verify that it resolves to the expected directory\r\n\r\n2. using an absolute path to the property file  \r\n    \r\n        @Config.Sources(value=&quot;/src/test/resources/FrameworkConfig.properties&quot;)\r\n        \tpublic interface FrameworkConfig extends Config {\r\n        \t}\r\n    \r\n    \r\n    \r\n3. In IntelliJ IDEA, you can set the working directory in the Run/Debug Configuration for your application try checking, make sure that the working directory is set correctly\r\n4. Using classpath\r\n    \r\n        @Config.Sources(value=&quot;classpath:FrameworkConfig.properties&quot;)\r\n        public interface FrameworkConfig extends Config {\r\n           ...\r\n        }\r\n\r\n","title":"Unable to locate the file while using ${user.dir} to avoid hardcoding in the @Config.Sources of the Owner library in Java","body":"<p>You can try below steps to solve it</p>\n<ol>\n<li><p>Print the value of ${user.dir} to the console or log file to verify that it resolves to the expected directory</p>\n</li>\n<li><p>using an absolute path to the property file</p>\n<pre><code> @Config.Sources(value=&quot;/src/test/resources/FrameworkConfig.properties&quot;)\n     public interface FrameworkConfig extends Config {\n     }\n</code></pre>\n</li>\n<li><p>In IntelliJ IDEA, you can set the working directory in the Run/Debug Configuration for your application try checking, make sure that the working directory is set correctly</p>\n</li>\n<li><p>Using classpath</p>\n<pre><code> @Config.Sources(value=&quot;classpath:FrameworkConfig.properties&quot;)\n public interface FrameworkConfig extends Config {\n    ...\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":6287559,"reputation":301,"user_id":4886208,"accept_rate":67,"display_name":"jba065"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683230476,"creation_date":1683210962,"question_id":76174393,"body_markdown":"I am unable to locate the file while using ${user.dir} to avoid hardcoding in the @Config.Sources annotation of the Owner library in Java to locate the property file.\r\n\r\nUsing the absolute path to locate the file works for me perfectly as shown below\r\n```\r\n@Config.Sources(value=&quot;C:\\\\Users\\\\username\\\\eclipse-workspace\\\\MWAFW\\\\src\\\\test\\\\resources\\\\FrameworkConfig.properties&quot;)\r\npublic interface FrameworkConfig extends Config {\r\n    ...\r\n}\r\n```\r\n\r\nHowever, If I use \r\n```\r\n@Config.Sources(value=&quot;${user.dir}\\\\src\\\\test\\\\resources\\\\FrameworkConfig.properties&quot;)\r\npublic interface FrameworkConfig extends Config {\r\n    ...\r\n}\r\n```\r\n\r\nor \r\n```\r\n@Config.Sources(value=&quot;${user.dir}/src/test/resources/FrameworkConfig.properties&quot;)\r\npublic interface FrameworkConfig extends Config {\r\n    ...\r\n}\r\n```\r\ndoes not locate the properties file.\r\nWhy is ${user.dir} not working for me in this case?\r\n* I am using a maven-Java project on Intellij community edition\r\n","title":"Unable to locate the file while using ${user.dir} to avoid hardcoding in the @Config.Sources of the Owner library in Java","body":"<p>I am unable to locate the file while using ${user.dir} to avoid hardcoding in the @Config.Sources annotation of the Owner library in Java to locate the property file.</p>\n<p>Using the absolute path to locate the file works for me perfectly as shown below</p>\n<pre><code>@Config.Sources(value=&quot;C:\\\\Users\\\\username\\\\eclipse-workspace\\\\MWAFW\\\\src\\\\test\\\\resources\\\\FrameworkConfig.properties&quot;)\npublic interface FrameworkConfig extends Config {\n    ...\n}\n</code></pre>\n<p>However, If I use</p>\n<pre><code>@Config.Sources(value=&quot;${user.dir}\\\\src\\\\test\\\\resources\\\\FrameworkConfig.properties&quot;)\npublic interface FrameworkConfig extends Config {\n    ...\n}\n</code></pre>\n<p>or</p>\n<pre><code>@Config.Sources(value=&quot;${user.dir}/src/test/resources/FrameworkConfig.properties&quot;)\npublic interface FrameworkConfig extends Config {\n    ...\n}\n</code></pre>\n<p>does not locate the properties file.\nWhy is ${user.dir} not working for me in this case?</p>\n<ul>\n<li>I am using a maven-Java project on Intellij community edition</li>\n</ul>\n"},{"tags":["java","collections","guava"],"comments":[{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":1,"creation_date":1431536583,"post_id":30220820,"comment_id":48546054,"body_markdown":"My answer covers this, but the fundamental issue here is that the JDK API is bad because it doesn&#39;t size the `HashMap` &quot;to hold a specific number of items&quot; like you&#39;d expect it would. Instead it sizes it to hold 75% of the number you specify.","body":"My answer covers this, but the fundamental issue here is that the JDK API is bad because it doesn&#39;t size the <code>HashMap</code> &quot;to hold a specific number of items&quot; like you&#39;d expect it would. Instead it sizes it to hold 75% of the number you specify."}],"answers":[{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1683230426,"creation_date":1431536033,"answer_id":30220944,"question_id":30220820,"body_markdown":"Have you read the method&#39;s [Javadoc][1]?\r\n\r\n&gt; Creates a `HashMap` instance, with a high enough &quot;initial capacity&quot; that it should hold `expectedSize` elements without growth.\r\n\r\nNote that the `new HashMap(int)` constructor&#39;s &quot;initial size&quot; parameter specifies the initial size of the _hash table_ that entries are stored in, which is basically an implementation detail that you shouldn&#39;t have to care about. The hash table will resize when it exceeds the map&#39;s _load factor_ (which defaults to 0.75), which means that if you specify an initial capacity of 16 and then add 16 entries to the map, the hash table will almost certainly be resized.\r\n\r\nWith Guava&#39;s method, if you specify an _expected size_ of 16 and then add 16 entries, the hash table should _not_ resize.\r\n\r\n  [1]: https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Maps.html#newHashMapWithExpectedSize-int-","title":"Difference between new HashMap(int) and guava Maps.newHashMapWithExpectedSize(int)","body":"<p>Have you read the method's <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Maps.html#newHashMapWithExpectedSize-int-\" rel=\"nofollow noreferrer\">Javadoc</a>?</p>\n<blockquote>\n<p>Creates a <code>HashMap</code> instance, with a high enough &quot;initial capacity&quot; that it should hold <code>expectedSize</code> elements without growth.</p>\n</blockquote>\n<p>Note that the <code>new HashMap(int)</code> constructor's &quot;initial size&quot; parameter specifies the initial size of the <em>hash table</em> that entries are stored in, which is basically an implementation detail that you shouldn't have to care about. The hash table will resize when it exceeds the map's <em>load factor</em> (which defaults to 0.75), which means that if you specify an initial capacity of 16 and then add 16 entries to the map, the hash table will almost certainly be resized.</p>\n<p>With Guava's method, if you specify an <em>expected size</em> of 16 and then add 16 entries, the hash table should <em>not</em> resize.</p>\n"},{"tags":[],"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1431537424,"creation_date":1431536082,"answer_id":30220957,"question_id":30220820,"body_markdown":"Guava just multiplies the size passed by 2 (in a safe way) and calls the regular hashmap constructor. This makes it more sparse so there are less collisions while hashing. \r\n\r\nThe javadoc on the capacity calculation mentions that it calculates a value for the capacity so that the hashmap is between 25% and 50% full, which is far away from the threshold which would trigger a resizing.\r\n\r\nThe standard library rounds the expected size up to the nearest power of 2 and allocates that as the size and then sets the threshold for resizing to 75%. If we would randomly ask for sizes, the standard library would resize in 50% of cases.\r\n\r\nIf avoiding the threshold would be the only consideration, multiplying with 1.34  would be enough to have enough space to avoid resizing on filling it with the expected size of elements.\r\n\r\nIt looks like the typical speed vs space tradeof and the Google engineers being more speed freaks and the Sun/Oracle engineers more space nuts.\r\n\r\n","title":"Difference between new HashMap(int) and guava Maps.newHashMapWithExpectedSize(int)","body":"<p>Guava just multiplies the size passed by 2 (in a safe way) and calls the regular hashmap constructor. This makes it more sparse so there are less collisions while hashing. </p>\n\n<p>The javadoc on the capacity calculation mentions that it calculates a value for the capacity so that the hashmap is between 25% and 50% full, which is far away from the threshold which would trigger a resizing.</p>\n\n<p>The standard library rounds the expected size up to the nearest power of 2 and allocates that as the size and then sets the threshold for resizing to 75%. If we would randomly ask for sizes, the standard library would resize in 50% of cases.</p>\n\n<p>If avoiding the threshold would be the only consideration, multiplying with 1.34  would be enough to have enough space to avoid resizing on filling it with the expected size of elements.</p>\n\n<p>It looks like the typical speed vs space tradeof and the Google engineers being more speed freaks and the Sun/Oracle engineers more space nuts.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1431536290,"creation_date":1431536290,"answer_id":30221029,"question_id":30220820,"body_markdown":"The HashMap constructor argument is the capacity of the map, i.e. the number of buckets.\r\n\r\nSo, if you pass 10 as argument, and store 8 keys in the map, the rehash threshold (75% by default) will be reached and the map will rehash.\r\n\r\nOn the other hand, the argument passed to newHashMapWithExpectedSize() is the expected size of the map. So if you pass 10, Guava will create a map with enough buckets to make sure the map doesn&#39;t rehash when inserting 10 elements: at least 14 buckets.","title":"Difference between new HashMap(int) and guava Maps.newHashMapWithExpectedSize(int)","body":"<p>The HashMap constructor argument is the capacity of the map, i.e. the number of buckets.</p>\n\n<p>So, if you pass 10 as argument, and store 8 keys in the map, the rehash threshold (75% by default) will be reached and the map will rehash.</p>\n\n<p>On the other hand, the argument passed to newHashMapWithExpectedSize() is the expected size of the map. So if you pass 10, Guava will create a map with enough buckets to make sure the map doesn't rehash when inserting 10 elements: at least 14 buckets.</p>\n"}],"owner":{"account_id":29404,"reputation":45520,"user_id":79439,"accept_rate":62,"display_name":"thecoop"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5824,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":30220944,"answer_count":3,"score":15,"last_activity_date":1683230426,"creation_date":1431535624,"question_id":30220820,"body_markdown":"In Java, you can create a new `HashMap` to hold a specific number of items like so:\r\n\r\n    Map m = new HashMap(100);\r\n\r\nGuava provides a `Maps.newHashMapWithExpectedSize(int)` method, which I would expect to simply call `HashMap(int)`. But it doesn&#39;t do this, instead it calculates its own capacity and uses that.\r\n\r\nWhy does `newHashMapWithExpectedSize` do its own thing, and why would I want to use it over calling `new HashMap(int)` directly?","title":"Difference between new HashMap(int) and guava Maps.newHashMapWithExpectedSize(int)","body":"<p>In Java, you can create a new <code>HashMap</code> to hold a specific number of items like so:</p>\n\n<pre><code>Map m = new HashMap(100);\n</code></pre>\n\n<p>Guava provides a <code>Maps.newHashMapWithExpectedSize(int)</code> method, which I would expect to simply call <code>HashMap(int)</code>. But it doesn't do this, instead it calculates its own capacity and uses that.</p>\n\n<p>Why does <code>newHashMapWithExpectedSize</code> do its own thing, and why would I want to use it over calling <code>new HashMap(int)</code> directly?</p>\n"},{"tags":["java","memory-leaks","java-stream"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1629102929,"post_id":68799641,"comment_id":121588492,"body_markdown":"[The first answer to this question](https://stackoverflow.com/questions/45536049/java-lang-internalerror-a-fault-occurred-in-a-recent-unsafe-memory-access-opera) talks about this kind of `InternalError`. From what I read there code be a wide array of reasons for this.","body":"<a href=\"https://stackoverflow.com/questions/45536049/java-lang-internalerror-a-fault-occurred-in-a-recent-unsafe-memory-access-opera\">The first answer to this question</a> talks about this kind of <code>InternalError</code>. From what I read there code be a wide array of reasons for this."},{"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"score":0,"creation_date":1629103343,"post_id":68799641,"comment_id":121588641,"body_markdown":"@JoachimSauer I have read that answer too. I am sorry If I sounded as I am saying there can only be 2 reasons for this error. But I just wanted to point out the ones I am suspecting for the cause of this error.","body":"@JoachimSauer I have read that answer too. I am sorry If I sounded as I am saying there can only be 2 reasons for this error. But I just wanted to point out the ones I am suspecting for the cause of this error."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":2,"creation_date":1629104113,"post_id":68799641,"comment_id":121588947,"body_markdown":"It is possible that memory is the issue, but you&#39;ll have to monitor your application to be sure.","body":"It is possible that memory is the issue, but you&#39;ll have to monitor your application to be sure."},{"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"score":0,"creation_date":1629114721,"post_id":68799641,"comment_id":121593141,"body_markdown":"@Hulk I have edited and added JVM monitoring images. Could you check that out?","body":"@Hulk I have edited and added JVM monitoring images. Could you check that out?"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":1,"creation_date":1629115719,"post_id":68799641,"comment_id":121593526,"body_markdown":"Since this is happening in the image reading code, can you reproduce it with a fixed image, maybe loading it from disk instead?","body":"Since this is happening in the image reading code, can you reproduce it with a fixed image, maybe loading it from disk instead?"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1629115733,"post_id":68799641,"comment_id":121593534,"body_markdown":"@Mehmet you can configure the heap size available to your JVM, may be worth trying a similar configuration than the one in your production environment. (how exactly the configuration works depends on the JVM implementation and version you are using).","body":"@Mehmet you can configure the heap size available to your JVM, may be worth trying a similar configuration than the one in your production environment. (how exactly the configuration works depends on the JVM implementation and version you are using)."},{"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"score":0,"creation_date":1629191667,"post_id":68799641,"comment_id":121615378,"body_markdown":"@Hulk I have lowered the JVM memory as you said. Could you check the EDIT 2 in the question?","body":"@Hulk I have lowered the JVM memory as you said. Could you check the EDIT 2 in the question?"}],"answers":[{"tags":[],"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1629885125,"creation_date":1629885125,"answer_id":68920641,"question_id":68799641,"body_markdown":"Answer of Vyacheslav in [this post][1] explains why metaspace increases.\r\n\r\nI run the application with `-Djava.compiler=NONE` option and there was no increase in the metaspace.\r\n\r\n[![Metaspace][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/30938233/java-8-why-does-metaspace-size-increase-but-number-of-loaded-classes-stay-the-s\r\n  [2]: https://i.stack.imgur.com/tspKt.png","title":"Is This Because of Memory Leakeage?","body":"<p>Answer of Vyacheslav in <a href=\"https://stackoverflow.com/questions/30938233/java-8-why-does-metaspace-size-increase-but-number-of-loaded-classes-stay-the-s\">this post</a> explains why metaspace increases.</p>\n<p>I run the application with <code>-Djava.compiler=NONE</code> option and there was no increase in the metaspace.</p>\n<p><a href=\"https://i.stack.imgur.com/tspKt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tspKt.png\" alt=\"Metaspace\" /></a></p>\n"}],"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":630,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":68920641,"answer_count":1,"score":1,"last_activity_date":1683230414,"creation_date":1629102590,"question_id":68799641,"body_markdown":"I am constantly getting images from a local server and I want to show them on the JPanel.\r\n\r\nI wrote a code that works for a while without any issue. But after some time (approximately 5 min), I get this error:\r\n\r\n&gt; Exception in thread &quot;Thread-0&quot; java.lang.InternalError: a fault occurred in an unsafe memory access operation\r\n&gt;\r\n&gt; at com.sun.imageio.plugins.jpeg.JPEGImageReader.readImage(Native Method)  \r\n&gt; at com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(JPEGImageR$  \r\n&gt; at com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.ja$  \r\n&gt; at SICK.DisplayImage.updatePane(DisplayImage.java:225)  \r\n&gt; at SICK.DisplayImage.access$000(DisplayImage.java:35)  \r\n&gt; at SICK.DisplayImage$1.run(DisplayImage.java:356)  \r\n&gt; at java.lang.Thread.run(Thread.java:748)\r\n\r\nThis is where I read images from the server:\r\n\r\n    private BufferedImage updatePane(JLabel label) {\r\n\t\r\n\t\t\ttry {\r\n\t\t\t\tInputStream input = new URL(&quot;http://192.168.250.21:8080/NewImage.jpg&quot;).openStream();\r\n\t\t\t\t\r\n\t\t\t\tImageInputStream stream = ImageIO.createImageInputStream(input);\r\n\t\t\t\t\r\n\t\t\t\tImageReader reader = ImageIO.getImageReaders(stream).next(); \r\n\r\n\t\t\t\treader.setInput(stream);\r\n\t\r\n\t\t\t\tint width = reader.getWidth(0);\r\n\t\t\t\tint height = reader.getHeight(0);\r\n\t\t\t\tImageTypeSpecifier spec = reader.getImageTypes(0).next(); \r\n\t\r\n\t\t\t\tBufferedImage image = MappedImageFactory.createCompatibleMappedImage(width, height, spec);\r\n\t\t\t\t\t\t\r\n\t\t\t\tImageReadParam param = reader.getDefaultReadParam();\r\n\t\t\t\tparam.setDestination(image);\r\n\t\r\n\t\t\t\timage = reader.read(0, param);\r\n\t\t\t\t\r\n\t\t\t\tstream.close();\r\n\t\t\t\tinput.close();\r\n\t\r\n\t\t\t\tinitialize(image, label);\r\n\t\t\t\treturn image;\r\n\t\t\t} catch (MalformedURLException e) {\r\n\t\t\t\t\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\t\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\nThis is the initialize function where I add the images and the JLabel to the JPanel:\r\n\r\n    private void initialize(BufferedImage image, JLabel label) {\r\n\t\t\tGridBagConstraints c =  new GridBagConstraints(0,0,1,1,0,0, GridBagConstraints.NORTHWEST, GridBagConstraints.NORTHWEST, \r\n\t\t\t    \t\tnew Insets(0, 0, 0, 0), 0, 0);\r\n\t\t\t\t\t\t    \r\n\t\t\tJLabel imgLabel = new JLabel(new ImageIcon(image));\r\n\t\t\t    \r\n\t\t\tint placeInY = 0;\r\n\t\t\t\r\n\t\t\tc.fill = GridBagConstraints.BOTH;\r\n\t\t\tc.weightx = 0;\r\n\t\t\tc.weighty = 0;\r\n\t\t\tc.gridx = 0;\r\n\t\t\tc.gridy = placeInY++;\r\n\t\t\tc.gridheight = 1;\r\n\t\t\tc.gridwidth = 8;\r\n\t\t\tpane.add(imgLabel, c);\r\n\t\t\t\t\r\n\t\t\tc.fill = GridBagConstraints.BOTH;\r\n\t\t\tc.weightx = 0;\r\n\t\t\tc.weighty = 0;\r\n\t\t\tc.gridx = 2;\r\n\t\t\tc.gridy = placeInY++;\r\n\t\t\tc.gridheight = 1;\r\n\t\t\tc.gridwidth = 1;\r\n\t\t\tpane.add(label, c);\r\n\t\t\t\r\n\t\t\tthis.add(pane);\r\n\t\t}\r\n\r\nAnd this is my main function:\r\n\r\n    public static void main(String[] args) {\r\n\t\t\tfinal DisplayImage page = new DisplayImage();\r\n\t\r\n\t\t\tfinal Thread t1 = new Thread(new Runnable() {\r\n\t\t\t\t\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\twhile(true) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tTimeUnit.MILLISECONDS.sleep(100);\r\n\t\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpage.removeAll();\r\n\t\t\t\t\t\tpage.updatePane(new JLabel(&quot;New Image&quot;));\r\n\t\t\t\t\t\tpage.validate();\r\n\t\t\t\t\t\tpage.repaint();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tSwingUtilities.invokeLater(new Runnable() {\r\n\t\t\t\t\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tt1.start();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\nThe error occurs in the line `image = reader.read(0, param);`\r\n\r\nI checked out this error message and it is said that there are a couple of reasons this error to occur.\r\n\r\nOne of them is that the source of the images may be invalid but I checked and the server keeps providing the images.\r\n\r\nOne of them is that the RAM may be out of memory (memory leakage). I don&#39;t know for sure but this seems more like it.\r\n\r\nIf this error is caused by memory leakage, how do I solve it?\r\n\r\nNote: I am using this code for streaming images: https://github.com/haraldk/TwelveMonkeys/blob/master/sandbox/sandbox-common/src/main/java/com/twelvemonkeys/image/MappedImageFactory.java\r\n\r\nEDIT: I am having this issue in my linux system which has 512 MB of RAM. I tried to get this error on my PC which has 16 GB of RAM but the error didn&#39;t occur even though I have waited for 45 minutes.\r\n\r\nI have monitored the JVM for 45 minutes with VisualVM. Here is the heap and metaspace:\r\n\r\n[![Heap][1]][1]\r\n\r\n[![Metaspace][2]][2]\r\n\r\nHeap didn&#39;t increase but metaspace kept increasing. I am still watching and it is still increasing. But the metaspace size increases automatically too.\r\n\r\nAs I have read [here][3], the metaspace size increases automatically, if it is needed. But in my opinion; if there is no unused RAM left to increase the size, it could cause a memory leakage error. As I have mentioned above, I am getting this error on my Linux system which has 512 MB of RAM.\r\n\r\nI reckon, I have to wait so freakishly much more for this error to occur on my PC of 16 GB of RAM.\r\n\r\nDo you think I am right about the memory leakage? If so, how do I solve it?\r\n\r\nEDIT 2: I have checked the memory usage of the JVM in my Linux System. Here are the results of them after getting the error:\r\n\r\n \t&gt;sudo jcmd 1955 GC.heap_info\r\n\tJava HotSpot(TM) Client VM warning: Insufficient space for shared memory file:\r\n\t2616\r\n\tTry using the -Djava.io.tmpdir= option to select an alternate temp location.\r\n\r\n\t1955:\r\n\t def new generation   total 2560K, used 747K [0xac200000, 0xac4c0000, 0xaec00000)\r\n\t  eden space 2304K,  32% used [0xac200000, 0xac2baf78, 0xac440000)\r\n\t  from space 256K,   0% used [0xac440000, 0xac440000, 0xac480000)\r\n\t  to   space 256K,   0% used [0xac480000, 0xac480000, 0xac4c0000)\r\n\t tenured generation   total 5504K, used 5210K [0xaec00000, 0xaf160000, 0xb4000000)\r\n\t   the space 5504K,  94% used [0xaec00000, 0xaf1169d8, 0xaf116a00, 0xaf160000)\r\n\t Metaspace       used 7798K, capacity 7957K, committed 8088K, reserved 8496K\r\n\r\nI couldn&#39;t lower my metaspace size under 10 MB because it instantly gave the out of memory error below. So I lowered my Metaspace to 13 MB and heap size to 40MB on my PC with the command:\r\n\r\n    java -jar -XX:MaxMetaspaceSize=13m -Xmx40m --illegal-access=warn gui.for.linux-0.0.1-SNAPSHOT.jar\r\n\r\nBut when metaspace was full, I got this error:\r\n\r\n&gt; Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread &quot;StreamCloser&quot;\r\n\r\nSo I couldn&#39;t reproduce the error that I am getting on the Linux system by lowering heap and metaspace size on my PC.\r\n\r\nBut metaspace of JVM in Linux system is 94% used after it gives an error.\r\n\r\nI couldn&#39;t figure out what is causing the error to occur.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xcfqK.png\r\n  [2]: https://i.stack.imgur.com/3ELEk.png\r\n  [3]: https://www.baeldung.com/java-permgen-metaspace#introduction","title":"Is This Because of Memory Leakeage?","body":"<p>I am constantly getting images from a local server and I want to show them on the JPanel.</p>\n<p>I wrote a code that works for a while without any issue. But after some time (approximately 5 min), I get this error:</p>\n<blockquote>\n<p>Exception in thread &quot;Thread-0&quot; java.lang.InternalError: a fault occurred in an unsafe memory access operation</p>\n<p>at com.sun.imageio.plugins.jpeg.JPEGImageReader.readImage(Native Method)<br />\nat com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(JPEGImageR$<br />\nat com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.ja$<br />\nat SICK.DisplayImage.updatePane(DisplayImage.java:225)<br />\nat SICK.DisplayImage.access$000(DisplayImage.java:35)<br />\nat SICK.DisplayImage$1.run(DisplayImage.java:356)<br />\nat java.lang.Thread.run(Thread.java:748)</p>\n</blockquote>\n<p>This is where I read images from the server:</p>\n<pre><code>private BufferedImage updatePane(JLabel label) {\n\n        try {\n            InputStream input = new URL(&quot;http://192.168.250.21:8080/NewImage.jpg&quot;).openStream();\n            \n            ImageInputStream stream = ImageIO.createImageInputStream(input);\n            \n            ImageReader reader = ImageIO.getImageReaders(stream).next(); \n\n            reader.setInput(stream);\n\n            int width = reader.getWidth(0);\n            int height = reader.getHeight(0);\n            ImageTypeSpecifier spec = reader.getImageTypes(0).next(); \n\n            BufferedImage image = MappedImageFactory.createCompatibleMappedImage(width, height, spec);\n                    \n            ImageReadParam param = reader.getDefaultReadParam();\n            param.setDestination(image);\n\n            image = reader.read(0, param);\n            \n            stream.close();\n            input.close();\n\n            initialize(image, label);\n            return image;\n        } catch (MalformedURLException e) {\n            \n            e.printStackTrace();\n        } catch (IOException e) {\n            \n            e.printStackTrace();\n        }\n        return null;\n    }\n</code></pre>\n<p>This is the initialize function where I add the images and the JLabel to the JPanel:</p>\n<pre><code>private void initialize(BufferedImage image, JLabel label) {\n        GridBagConstraints c =  new GridBagConstraints(0,0,1,1,0,0, GridBagConstraints.NORTHWEST, GridBagConstraints.NORTHWEST, \n                    new Insets(0, 0, 0, 0), 0, 0);\n                        \n        JLabel imgLabel = new JLabel(new ImageIcon(image));\n            \n        int placeInY = 0;\n        \n        c.fill = GridBagConstraints.BOTH;\n        c.weightx = 0;\n        c.weighty = 0;\n        c.gridx = 0;\n        c.gridy = placeInY++;\n        c.gridheight = 1;\n        c.gridwidth = 8;\n        pane.add(imgLabel, c);\n            \n        c.fill = GridBagConstraints.BOTH;\n        c.weightx = 0;\n        c.weighty = 0;\n        c.gridx = 2;\n        c.gridy = placeInY++;\n        c.gridheight = 1;\n        c.gridwidth = 1;\n        pane.add(label, c);\n        \n        this.add(pane);\n    }\n</code></pre>\n<p>And this is my main function:</p>\n<pre><code>public static void main(String[] args) {\n        final DisplayImage page = new DisplayImage();\n\n        final Thread t1 = new Thread(new Runnable() {\n            \n            public void run() {\n                while(true) {\n                \n                    try {\n                        TimeUnit.MILLISECONDS.sleep(100);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    page.removeAll();\n                    page.updatePane(new JLabel(&quot;New Image&quot;));\n                    page.validate();\n                    page.repaint();\n                }\n            }\n        });\n        \n        SwingUtilities.invokeLater(new Runnable() {\n            \n            public void run() {\n                t1.start();\n            }\n        });\n    }\n</code></pre>\n<p>The error occurs in the line <code>image = reader.read(0, param);</code></p>\n<p>I checked out this error message and it is said that there are a couple of reasons this error to occur.</p>\n<p>One of them is that the source of the images may be invalid but I checked and the server keeps providing the images.</p>\n<p>One of them is that the RAM may be out of memory (memory leakage). I don't know for sure but this seems more like it.</p>\n<p>If this error is caused by memory leakage, how do I solve it?</p>\n<p>Note: I am using this code for streaming images: <a href=\"https://github.com/haraldk/TwelveMonkeys/blob/master/sandbox/sandbox-common/src/main/java/com/twelvemonkeys/image/MappedImageFactory.java\" rel=\"nofollow noreferrer\">https://github.com/haraldk/TwelveMonkeys/blob/master/sandbox/sandbox-common/src/main/java/com/twelvemonkeys/image/MappedImageFactory.java</a></p>\n<p>EDIT: I am having this issue in my linux system which has 512 MB of RAM. I tried to get this error on my PC which has 16 GB of RAM but the error didn't occur even though I have waited for 45 minutes.</p>\n<p>I have monitored the JVM for 45 minutes with VisualVM. Here is the heap and metaspace:</p>\n<p><a href=\"https://i.stack.imgur.com/xcfqK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xcfqK.png\" alt=\"Heap\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/3ELEk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3ELEk.png\" alt=\"Metaspace\" /></a></p>\n<p>Heap didn't increase but metaspace kept increasing. I am still watching and it is still increasing. But the metaspace size increases automatically too.</p>\n<p>As I have read <a href=\"https://www.baeldung.com/java-permgen-metaspace#introduction\" rel=\"nofollow noreferrer\">here</a>, the metaspace size increases automatically, if it is needed. But in my opinion; if there is no unused RAM left to increase the size, it could cause a memory leakage error. As I have mentioned above, I am getting this error on my Linux system which has 512 MB of RAM.</p>\n<p>I reckon, I have to wait so freakishly much more for this error to occur on my PC of 16 GB of RAM.</p>\n<p>Do you think I am right about the memory leakage? If so, how do I solve it?</p>\n<p>EDIT 2: I have checked the memory usage of the JVM in my Linux System. Here are the results of them after getting the error:</p>\n<pre><code>&gt;sudo jcmd 1955 GC.heap_info\nJava HotSpot(TM) Client VM warning: Insufficient space for shared memory file:\n2616\nTry using the -Djava.io.tmpdir= option to select an alternate temp location.\n\n1955:\n def new generation   total 2560K, used 747K [0xac200000, 0xac4c0000, 0xaec00000)\n  eden space 2304K,  32% used [0xac200000, 0xac2baf78, 0xac440000)\n  from space 256K,   0% used [0xac440000, 0xac440000, 0xac480000)\n  to   space 256K,   0% used [0xac480000, 0xac480000, 0xac4c0000)\n tenured generation   total 5504K, used 5210K [0xaec00000, 0xaf160000, 0xb4000000)\n   the space 5504K,  94% used [0xaec00000, 0xaf1169d8, 0xaf116a00, 0xaf160000)\n Metaspace       used 7798K, capacity 7957K, committed 8088K, reserved 8496K\n</code></pre>\n<p>I couldn't lower my metaspace size under 10 MB because it instantly gave the out of memory error below. So I lowered my Metaspace to 13 MB and heap size to 40MB on my PC with the command:</p>\n<pre><code>java -jar -XX:MaxMetaspaceSize=13m -Xmx40m --illegal-access=warn gui.for.linux-0.0.1-SNAPSHOT.jar\n</code></pre>\n<p>But when metaspace was full, I got this error:</p>\n<blockquote>\n<p>Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread &quot;StreamCloser&quot;</p>\n</blockquote>\n<p>So I couldn't reproduce the error that I am getting on the Linux system by lowering heap and metaspace size on my PC.</p>\n<p>But metaspace of JVM in Linux system is 94% used after it gives an error.</p>\n<p>I couldn't figure out what is causing the error to occur.</p>\n"},{"tags":["java","intellij-idea","continuous-integration","build-automation"],"comments":[{"owner":{"account_id":299330,"reputation":1221,"user_id":605869,"display_name":"Tom"},"score":2,"creation_date":1336017494,"post_id":10424877,"comment_id":13453205,"body_markdown":"Maybe try a Maven project? I find it much easier to manage a pom.xml than a complex ant build.","body":"Maybe try a Maven project? I find it much easier to manage a pom.xml than a complex ant build."},{"owner":{"account_id":967027,"reputation":115,"user_id":990288,"display_name":"Matt Daley"},"score":0,"creation_date":1336017875,"post_id":10424877,"comment_id":13453254,"body_markdown":"@MadcoreTom thanks for your reply. How would I use a Maven project in this case? The same problem exists: I have no way to export/convert my IntelliJ IDEA project to a Maven project.","body":"@MadcoreTom thanks for your reply. How would I use a Maven project in this case? The same problem exists: I have no way to export/convert my IntelliJ IDEA project to a Maven project."},{"owner":{"account_id":299330,"reputation":1221,"user_id":605869,"display_name":"Tom"},"score":0,"creation_date":1336018555,"post_id":10424877,"comment_id":13453394,"body_markdown":"Its a manual process which requires you to put all of the external dependencies and build tasks and such into the `pom.xml` file. You can then run maven from the commandline, and Jenkins integrates well with it too. You can build it from IntelliJ by adding a new Run configuration.\nPerhaps someone else can elaborate on this process.","body":"Its a manual process which requires you to put all of the external dependencies and build tasks and such into the <code>pom.xml</code> file. You can then run maven from the commandline, and Jenkins integrates well with it too. You can build it from IntelliJ by adding a new Run configuration. Perhaps someone else can elaborate on this process."}],"answers":[{"tags":[],"owner":{"account_id":1416578,"reputation":1743,"user_id":1342121,"display_name":"ianpojman"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1336021714,"creation_date":1336020845,"answer_id":10425334,"question_id":10424877,"body_markdown":"Converting your project to fit with maven is easier to do than customizing Maven to work with your project structure. \r\n\r\nAlthough you could do the latter, most of the time people don&#39;t design the way their project is laid out very cleanly at all, and after they adopt the maven layout, their project becomes much more manageable.\r\n\r\nIf you adapt the good patterns of a default maven project layout, IDEA will automatically read it and understand it completely - even sharing the same compiler output you use on the command line in the IDE. IDEA will use the pom.xml as its configuration file.\r\n\r\nYou can&#39;t do this with Ant, because it&#39;s a build process wrapper. Maven is not only a dependency management mechanism - it&#39;s an abstraction of a project, which an IDE can use to configure itself. ","title":"How to automate the Java build process for IntelliJ IDEA 11 Projects?","body":"<p>Converting your project to fit with maven is easier to do than customizing Maven to work with your project structure. </p>\n\n<p>Although you could do the latter, most of the time people don't design the way their project is laid out very cleanly at all, and after they adopt the maven layout, their project becomes much more manageable.</p>\n\n<p>If you adapt the good patterns of a default maven project layout, IDEA will automatically read it and understand it completely - even sharing the same compiler output you use on the command line in the IDE. IDEA will use the pom.xml as its configuration file.</p>\n\n<p>You can't do this with Ant, because it's a build process wrapper. Maven is not only a dependency management mechanism - it's an abstraction of a project, which an IDE can use to configure itself. </p>\n"},{"tags":[],"owner":{"account_id":50772,"reputation":8116,"user_id":151501,"accept_rate":88,"display_name":"sylvanaar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1336227794,"creation_date":1336227794,"answer_id":10462750,"question_id":10424877,"body_markdown":"You could use TeamCity to build your IntelliJ project. This works just fine, is automated, and there are many plugins that let you run command line tasks, ant tasks, etc.\r\n\r\nThis is one of the workflows I use regularly.\r\n\r\nTeamCity functions as an Ivy repository. so you don&#39;t have to set up artifactory.\r\n\r\nI do like maven though. It all really depends on what your needs are. Maven is great as long as you want do things the maven way - which is a pretty good workflow.\r\n\r\nFor the record few IDE&#39;s handle Maven projects well. IntelliJ does a decent job.","title":"How to automate the Java build process for IntelliJ IDEA 11 Projects?","body":"<p>You could use TeamCity to build your IntelliJ project. This works just fine, is automated, and there are many plugins that let you run command line tasks, ant tasks, etc.</p>\n\n<p>This is one of the workflows I use regularly.</p>\n\n<p>TeamCity functions as an Ivy repository. so you don't have to set up artifactory.</p>\n\n<p>I do like maven though. It all really depends on what your needs are. Maven is great as long as you want do things the maven way - which is a pretty good workflow.</p>\n\n<p>For the record few IDE's handle Maven projects well. IntelliJ does a decent job.</p>\n"},{"tags":[],"owner":{"account_id":26600663,"reputation":1,"user_id":20222352,"display_name":"Salman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683230213,"creation_date":1683229719,"answer_id":76176901,"question_id":10424877,"body_markdown":"using intelliJ, look here: https://www.youtube.com/watch?v=870XIYMrlSo\r\n\r\nautomation (i.e. running jar file via terminal) requires adding maven-assembly-plugin to pom file\r\n\r\nalternatively following works with terminal as of 2023-05-04\r\n\r\non macOS, open terminal\r\n\r\ninstall maven using homebrew: brew install maven\r\n\r\ncheck maven version just in case: mvn --version\r\n\r\nnavigate to the directory where maven will be installed and setup maven project (please adjust according to your project structure)\r\n\r\n    mvn archetype:generate -DgroupId=com.salman.app -DartifactId=myapp -DarchetypeArtifactId=maven-archetype-quickstart -Darchetypeversion=1.4 -DinteractiveMode=false\r\n\r\nNavigate to folder with pom file\r\n\r\nchange pom xml (presented later)\r\n\r\nrun mvn package\r\nnavigate to directory where .jar is found\r\njava -jar &quot;name of jar file&quot;\r\n\r\nSuggestion for pom file (please update to adjust your project folder structure)\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\r\n                          http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;com.salman.app&lt;/groupId&gt;\r\n      &lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;myapp&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.10.1&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;source&gt;8&lt;/source&gt;\r\n              &lt;target&gt;8&lt;/target&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;archive&gt;\r\n                &lt;manifest&gt;\r\n                  &lt;mainClass&gt;com.salman.app.App&lt;/mainClass&gt;\r\n                &lt;/manifest&gt;\r\n              &lt;/archive&gt;\r\n              &lt;descriptorRefs&gt;\r\n                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n              &lt;/descriptorRefs&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.0&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;archive&gt;\r\n                &lt;manifest&gt;\r\n                  &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                  &lt;mainClass&gt;com.salman.app.App&lt;/mainClass&gt;\r\n                &lt;/manifest&gt;\r\n              &lt;/archive&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n","title":"How to automate the Java build process for IntelliJ IDEA 11 Projects?","body":"<p>using intelliJ, look here: <a href=\"https://www.youtube.com/watch?v=870XIYMrlSo\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=870XIYMrlSo</a></p>\n<p>automation (i.e. running jar file via terminal) requires adding maven-assembly-plugin to pom file</p>\n<p>alternatively following works with terminal as of 2023-05-04</p>\n<p>on macOS, open terminal</p>\n<p>install maven using homebrew: brew install maven</p>\n<p>check maven version just in case: mvn --version</p>\n<p>navigate to the directory where maven will be installed and setup maven project (please adjust according to your project structure)</p>\n<pre><code>mvn archetype:generate -DgroupId=com.salman.app -DartifactId=myapp -DarchetypeArtifactId=maven-archetype-quickstart -Darchetypeversion=1.4 -DinteractiveMode=false\n</code></pre>\n<p>Navigate to folder with pom file</p>\n<p>change pom xml (presented later)</p>\n<p>run mvn package\nnavigate to directory where .jar is found\njava -jar &quot;name of jar file&quot;</p>\n<p>Suggestion for pom file (please update to adjust your project folder structure)</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\n                      http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.salman.app&lt;/groupId&gt;\n  &lt;artifactId&gt;myapp&lt;/artifactId&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;myapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.10.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;8&lt;/source&gt;\n          &lt;target&gt;8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;mainClass&gt;com.salman.app.App&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n          &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n          &lt;/descriptorRefs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n              &lt;mainClass&gt;com.salman.app.App&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":967027,"reputation":115,"user_id":990288,"display_name":"Matt Daley"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4328,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"closed_date":1683233730,"accepted_answer_id":10425334,"answer_count":3,"score":8,"last_activity_date":1683230213,"creation_date":1336017323,"question_id":10424877,"body_markdown":"I am trying to set up a continuous integration system for a Java project I am working on. I plan to use Jenkins or some equivalent for the front end. The Java project is configured to use the IntelliJ IDEA IDE, version 11. The problem is there is no way to build IntelliJ IDEA 11 projects from a command line interface, which is required so it can interface with the CI front-end (Jenkins).\n\nThere are a couple of potential solutions I have looked into. They are as follows.\n\n## Potential Solution # 1 ##\n\nUse the &quot;Generate Ant Build&quot; capability of IntelliJ IDEA. There are 2 problems with this solution:\n\n 1. It means I would have to either maintain the generated ant files as well as the IntelliJ idea configuration files, which I don&#39;t want to do, or I would have to programatically recreate the ant files periodically or on the fly, which is not feasible since there is no command line interface for this either.\n 2. It doesn&#39;t even work anyway. The project is fairly complex in that there are Java files that are configured to be excluded, and the generated ant files do not perform exclusion properly. Also, it looks like the dependencies are not even generated correctly. (Exhaustively) searching google tells me that this utility isn&#39;t even supported by IntelliJ, and it&#39;s use should be &quot;avoided&quot;.\n\n## Potential Solution # 2 ##\n\nUse a 3rd party application to dynamically generate ant build files, namely [ant-intellij-tasks][1]. When I saw this project I was pretty excited, but unfortunately it looks like it hasn&#39;t been updated since 2009 and doesn&#39;t work with the new version of IntelliJ IDEA. I can&#39;t find any other libraries like this one that are up to date and working.\n\n## Some Additional Notes ##\n\n[This link][2] suggests that others are having similar problems and want a command line interface (the link is a description of a plugin wanted for a contest - the source is IntelliJ IDEA themselves).\n\nHas anyone else set up build automation using this tool set? How did you get it done? The answer I&#39;m looking for ideally doesn&#39;t require management of additional configuration files and would allow me to type something on the command line and have the build happen.\n\n  [1]: http://code.google.com/p/ant-intellij-tasks/\n  [2]: http://plugins.intellij.net/wishlist/item/?wid=20","title":"How to automate the Java build process for IntelliJ IDEA 11 Projects?","body":"<p>I am trying to set up a continuous integration system for a Java project I am working on. I plan to use Jenkins or some equivalent for the front end. The Java project is configured to use the IntelliJ IDEA IDE, version 11. The problem is there is no way to build IntelliJ IDEA 11 projects from a command line interface, which is required so it can interface with the CI front-end (Jenkins).</p>\n<p>There are a couple of potential solutions I have looked into. They are as follows.</p>\n<h2>Potential Solution # 1</h2>\n<p>Use the &quot;Generate Ant Build&quot; capability of IntelliJ IDEA. There are 2 problems with this solution:</p>\n<ol>\n<li>It means I would have to either maintain the generated ant files as well as the IntelliJ idea configuration files, which I don't want to do, or I would have to programatically recreate the ant files periodically or on the fly, which is not feasible since there is no command line interface for this either.</li>\n<li>It doesn't even work anyway. The project is fairly complex in that there are Java files that are configured to be excluded, and the generated ant files do not perform exclusion properly. Also, it looks like the dependencies are not even generated correctly. (Exhaustively) searching google tells me that this utility isn't even supported by IntelliJ, and it's use should be &quot;avoided&quot;.</li>\n</ol>\n<h2>Potential Solution # 2</h2>\n<p>Use a 3rd party application to dynamically generate ant build files, namely <a href=\"http://code.google.com/p/ant-intellij-tasks/\" rel=\"noreferrer\">ant-intellij-tasks</a>. When I saw this project I was pretty excited, but unfortunately it looks like it hasn't been updated since 2009 and doesn't work with the new version of IntelliJ IDEA. I can't find any other libraries like this one that are up to date and working.</p>\n<h2>Some Additional Notes</h2>\n<p><a href=\"http://plugins.intellij.net/wishlist/item/?wid=20\" rel=\"noreferrer\">This link</a> suggests that others are having similar problems and want a command line interface (the link is a description of a plugin wanted for a contest - the source is IntelliJ IDEA themselves).</p>\n<p>Has anyone else set up build automation using this tool set? How did you get it done? The answer I'm looking for ideally doesn't require management of additional configuration files and would allow me to type something on the command line and have the build happen.</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1683035295,"post_id":76154723,"comment_id":134302491,"body_markdown":"Unless your pdf is properly tagged, it is unclear for a content extractor whether an image is associated with the text above, the text below, or both. If you know that in your case images always are associated with the text above, you merely need to extract both text and images with coordinates and try to match them by those coordinates.","body":"Unless your pdf is properly tagged, it is unclear for a content extractor whether an image is associated with the text above, the text below, or both. If you know that in your case images always are associated with the text above, you merely need to extract both text and images with coordinates and try to match them by those coordinates."},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683054736,"post_id":76154723,"comment_id":134307030,"body_markdown":"@mkl I&#39;m a beginner at this and can&#39;t figure out how to extract text coordinates","body":"@mkl I&#39;m a beginner at this and can&#39;t figure out how to extract text coordinates"},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683097006,"post_id":76154723,"comment_id":134312286,"body_markdown":"@KJ I have a 2049-page pdf that describes car repair procedures. I have parsed this pdf into steps. Where one item is, for example, “2. Remove the battery and battery tray(A).” is one step. If the step has a picture, I need to find this picture and add its ID to the mediaRef field (List&lt;Media&gt;). I uploaded the images earlier. I named the images with the page number + the sequence number of the image on the page (81_image_1). Now, I think that the images should be loaded at the moment when you attach it to the step.","body":"@KJ I have a 2049-page pdf that describes car repair procedures. I have parsed this pdf into steps. Where one item is, for example, “2. Remove the battery and battery tray(A).” is one step. If the step has a picture, I need to find this picture and add its ID to the mediaRef field (List&lt;Media&gt;). I uploaded the images earlier. I named the images with the page number + the sequence number of the image on the page (81_image_1). Now, I think that the images should be loaded at the moment when you attach it to the step."},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683130843,"post_id":76154723,"comment_id":134320442,"body_markdown":"@KJ I found the coordinates of a picture on a page.\nCould you please tell me which character coordinates I need to look for to compare with the coordinator of the image?","body":"@KJ I found the coordinates of a picture on a page. Could you please tell me which character coordinates I need to look for to compare with the coordinator of the image?"},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683195156,"post_id":76154723,"comment_id":134330573,"body_markdown":"I was able to find a link to the last character of the string and a link to a picture to see what I&#39;m talking about. \nhttps://i.postimg.cc/JzFXCWYq/1234.jpg","body":"I was able to find a link to the last character of the string and a link to a picture to see what I&#39;m talking about.  <a href=\"https://i.postimg.cc/JzFXCWYq/1234.jpg\" rel=\"nofollow noreferrer\">i.postimg.cc/JzFXCWYq/1234.jpg</a>"}],"answers":[{"tags":[],"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683229926,"creation_date":1683229926,"answer_id":76176927,"question_id":76154723,"body_markdown":"I solved the problem. I found the coordinates of all the last characters of the text lines on the page and compared them with the coordinates of the picture. If the Y coordinates of the image are less than the Y coordinates of the previous line and greater than the next line, then the image must be between these lines :)","title":"How to extract text and images from a pdf file and link them together in PDFbox 2.0.27?","body":"<p>I solved the problem. I found the coordinates of all the last characters of the text lines on the page and compared them with the coordinates of the picture. If the Y coordinates of the image are less than the Y coordinates of the previous line and greater than the next line, then the image must be between these lines :)</p>\n"}],"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683229926,"creation_date":1683029573,"question_id":76154723,"body_markdown":"everyone! \r\nCould you please help me figure out how to extract text and attach images to it? For example, in a file there is text describing a picture, and a picture under the text. There are many pictures in a PDF file, they can be of different sizes. There can also be several pictures with descriptions on one page.\r\n[![enter image description here](https://i.stack.imgur.com/yao37.jpg)](https://i.stack.imgur.com/yao37.jpg)\r\n\r\n\r\n\r\nFirst I extracted all the text, then I extracted all the images with reference to the page. And now I can&#39;t figure out how to link them. \r\nI have a theory that I need to use the metadata of the text and images, but I can&#39;t figure out how to do it. \r\n\r\nI use Java 11, PDFbox 2.0.27\r\n\r\n```\r\npublic class PdfFileReaderService implements FileReaderService {\r\n    @Override\r\n    public String getAllTextFromFile(String filepath) {\r\n        try (PDDocument document = PDDocument.load(new File(filepath))) {\r\n            PDFTextStripper stripper = new PDFTextStripper();\r\n            return stripper.getText(document);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Can&#39;t get text from file: &quot; + filepath, e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;Integer, List&lt;RenderedImage&gt;&gt; getAllImageFromFile(String pathToFile) {\r\n        Map&lt;Integer, List&lt;RenderedImage&gt;&gt; images = new HashMap&lt;&gt;();\r\n        try (PDDocument document = PDDocument.load(new File(pathToFile))) {\r\n            for (int i = 0; i &lt; document.getNumberOfPages(); i++) {\r\n                PDPage page = document.getPage(i);\r\n                List&lt;RenderedImage&gt; pageImages = getImagesFromResources(page.getResources());\r\n                images.put(i, pageImages.isEmpty() ? new ArrayList&lt;&gt;() : pageImages);\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Can&#39;t get images from file: &quot; + pathToFile);\r\n        }\r\n        return images;\r\n    }\r\n\r\n\r\n    private List&lt;RenderedImage&gt; getImagesFromResources(PDResources resources) throws IOException {\r\n        List&lt;RenderedImage&gt; images = new ArrayList&lt;&gt;();\r\n        for (COSName xObjectName : resources.getXObjectNames()) {\r\n            PDXObject xObject = resources.getXObject(xObjectName);\r\n            if (xObject instanceof PDFormXObject) {\r\n                images.addAll(getImagesFromResources(((PDFormXObject) xObject).getResources()));\r\n            } else if (xObject instanceof PDImageXObject) {\r\n                BufferedImage image = ((PDImageXObject) xObject).getImage();\r\n                images.add(image);\r\n            }\r\n        }\r\n        return images;\r\n    }\r\n}\r\n```\r\n","title":"How to extract text and images from a pdf file and link them together in PDFbox 2.0.27?","body":"<p>everyone!\nCould you please help me figure out how to extract text and attach images to it? For example, in a file there is text describing a picture, and a picture under the text. There are many pictures in a PDF file, they can be of different sizes. There can also be several pictures with descriptions on one page.\n<a href=\"https://i.stack.imgur.com/yao37.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yao37.jpg\" alt=\"enter image description here\" /></a></p>\n<p>First I extracted all the text, then I extracted all the images with reference to the page. And now I can't figure out how to link them.\nI have a theory that I need to use the metadata of the text and images, but I can't figure out how to do it.</p>\n<p>I use Java 11, PDFbox 2.0.27</p>\n<pre><code>public class PdfFileReaderService implements FileReaderService {\n    @Override\n    public String getAllTextFromFile(String filepath) {\n        try (PDDocument document = PDDocument.load(new File(filepath))) {\n            PDFTextStripper stripper = new PDFTextStripper();\n            return stripper.getText(document);\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Can't get text from file: &quot; + filepath, e);\n        }\n    }\n\n    @Override\n    public Map&lt;Integer, List&lt;RenderedImage&gt;&gt; getAllImageFromFile(String pathToFile) {\n        Map&lt;Integer, List&lt;RenderedImage&gt;&gt; images = new HashMap&lt;&gt;();\n        try (PDDocument document = PDDocument.load(new File(pathToFile))) {\n            for (int i = 0; i &lt; document.getNumberOfPages(); i++) {\n                PDPage page = document.getPage(i);\n                List&lt;RenderedImage&gt; pageImages = getImagesFromResources(page.getResources());\n                images.put(i, pageImages.isEmpty() ? new ArrayList&lt;&gt;() : pageImages);\n            }\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Can't get images from file: &quot; + pathToFile);\n        }\n        return images;\n    }\n\n\n    private List&lt;RenderedImage&gt; getImagesFromResources(PDResources resources) throws IOException {\n        List&lt;RenderedImage&gt; images = new ArrayList&lt;&gt;();\n        for (COSName xObjectName : resources.getXObjectNames()) {\n            PDXObject xObject = resources.getXObject(xObjectName);\n            if (xObject instanceof PDFormXObject) {\n                images.addAll(getImagesFromResources(((PDFormXObject) xObject).getResources()));\n            } else if (xObject instanceof PDImageXObject) {\n                BufferedImage image = ((PDImageXObject) xObject).getImage();\n                images.add(image);\n            }\n        }\n        return images;\n    }\n}\n</code></pre>\n"},{"tags":["java","file","mockito"],"comments":[{"owner":{"account_id":417955,"reputation":18564,"user_id":794242,"accept_rate":80,"display_name":"Wand Maker"},"score":0,"creation_date":1373991729,"post_id":17681708,"comment_id":25759675,"body_markdown":"What is the objective of the test?  WHy not mock the BufferedWriter?","body":"What is the objective of the test?  WHy not mock the BufferedWriter?"},{"owner":{"account_id":2939897,"reputation":607,"user_id":2518037,"accept_rate":100,"display_name":"Matej"},"score":0,"creation_date":1374002642,"post_id":17681708,"comment_id":25765572,"body_markdown":"BufferedWriter was to write files into the file so that the mocked file could be processed by another class. The other test is for testing and grading the contents of the html file.","body":"BufferedWriter was to write files into the file so that the mocked file could be processed by another class. The other test is for testing and grading the contents of the html file."},{"owner":{"account_id":14448,"reputation":5643,"user_id":29734,"accept_rate":77,"display_name":"Chris Kessel"},"score":1,"creation_date":1374021644,"post_id":17681708,"comment_id":25773171,"body_markdown":"Rather than mocking File, try spy(new File(...)). Then you can when() only the behavior you really want to change rather than having to deal with the entire API.","body":"Rather than mocking File, try spy(new File(...)). Then you can when() only the behavior you really want to change rather than having to deal with the entire API."},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":15,"creation_date":1374051912,"post_id":17681708,"comment_id":25783638,"body_markdown":"**DON&#39;T mock or spy a File!** This is not the proper way to do it. It&#39;s a test anti-pattern. More generally **Don&#39;t mock types you don&#39;t own!**. Instead focus a splitting the functionality between the code that access the file and the code that process the content. Jeff&#39;s answer is the way to go !","body":"<b>DON&#39;T mock or spy a File!</b> This is not the proper way to do it. It&#39;s a test anti-pattern. More generally <b>Don&#39;t mock types you don&#39;t own!</b>. Instead focus a splitting the functionality between the code that access the file and the code that process the content. Jeff&#39;s answer is the way to go !"},{"owner":{"account_id":448569,"reputation":3796,"user_id":842832,"accept_rate":33,"display_name":"demaniak"},"score":0,"creation_date":1520399349,"post_id":17681708,"comment_id":85294199,"body_markdown":"I would say you absolute can (and should under certain circumstances) mock code you don&#39;t own - BUT ONLY  the interfaces! Your code should be working against interfaces anyway, not concrete implementations, where possible. java.io.File does not meet the interface requirement though. So BAD candidate for mocking.","body":"I would say you absolute can (and should under certain circumstances) mock code you don&#39;t own - BUT ONLY  the interfaces! Your code should be working against interfaces anyway, not concrete implementations, where possible. java.io.File does not meet the interface requirement though. So BAD candidate for mocking."}],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":0,"up_vote_count":81,"is_accepted":true,"score":81,"last_activity_date":1374187856,"creation_date":1374030164,"answer_id":17690371,"question_id":17681708,"body_markdown":"You seem to be after contradictory goals. On the one hand, you&#39;re trying to avoid writing data to disk, which isn&#39;t a bad goal in tests. On the other, you&#39;re trying to test your I/O-handling class, which means you&#39;ll be working with system utilities that assume that your `File` will work with native calls. As such, here&#39;s my guidance:\r\n\r\n  - Don&#39;t try to mock a `File`. Just don&#39;t. Too many native things depend on it.\r\n  - If you can, split your I/O-handling code into the half that opens a `File` and turns it into a `Reader`, and the half that parses HTML out of the `Reader`.\r\n  - At that point, you don&#39;t need a mock at all--just construct a [`StringReader`][2] to simulate the data source.\r\n  - While that handles your unit tests pretty well, you may also want to write an _integration test_ that uses a [temporary file][1] and ensure that it reads right. (Thanks Brice for adding that tip!)\r\n\r\nDon&#39;t be afraid to refactor your class to make testing easier, as here:\r\n\r\n    class YourClass {\r\n      public int method(File file) {\r\n        // do everything here, which is why it requires a mock\r\n      }   \r\n    }   \r\n\r\n    class YourRefactoredClass {\r\n      public int method(File file) {\r\n        return methodForTest(file.getName(), file.isFile(),\r\n            file.isAbsolute(), new FileReader(file));\r\n      }   \r\n\r\n      /** For testing only. */\r\n      int methodForTest(\r\n          String name, boolean isFile, boolean isAbsolute, Reader fileContents) {\r\n        // actually do the calculation here\r\n      }   \r\n    }   \r\n\r\n    class YourTest {\r\n      @Test public int methodShouldParseBadHtml() {\r\n        YourRefactoredClass yrc = new YourRefactoredClass();\r\n        assertEquals(42, yrc.methodForTest(\r\n            &quot;bad.html&quot;, true, false, new StringReader(badHTMLText));\r\n      }   \r\n    }   \r\n\r\n\r\nAt this point the logic in `method` is so straightforward it&#39;s not worth testing,\r\nand the logic in `methodForTest` is so easy to access that you can test it heavily.\r\n\r\n[1]: https://stackoverflow.com/questions/876816/open-temp-file-in-java\r\n[2]: http://docs.oracle.com/javase/6/docs/api/java/io/StringReader.html","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>You seem to be after contradictory goals. On the one hand, you're trying to avoid writing data to disk, which isn't a bad goal in tests. On the other, you're trying to test your I/O-handling class, which means you'll be working with system utilities that assume that your <code>File</code> will work with native calls. As such, here's my guidance:</p>\n\n<ul>\n<li>Don't try to mock a <code>File</code>. Just don't. Too many native things depend on it.</li>\n<li>If you can, split your I/O-handling code into the half that opens a <code>File</code> and turns it into a <code>Reader</code>, and the half that parses HTML out of the <code>Reader</code>.</li>\n<li>At that point, you don't need a mock at all--just construct a <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/StringReader.html\" rel=\"noreferrer\"><code>StringReader</code></a> to simulate the data source.</li>\n<li>While that handles your unit tests pretty well, you may also want to write an <em>integration test</em> that uses a <a href=\"https://stackoverflow.com/questions/876816/open-temp-file-in-java\">temporary file</a> and ensure that it reads right. (Thanks Brice for adding that tip!)</li>\n</ul>\n\n<p>Don't be afraid to refactor your class to make testing easier, as here:</p>\n\n<pre><code>class YourClass {\n  public int method(File file) {\n    // do everything here, which is why it requires a mock\n  }   \n}   \n\nclass YourRefactoredClass {\n  public int method(File file) {\n    return methodForTest(file.getName(), file.isFile(),\n        file.isAbsolute(), new FileReader(file));\n  }   \n\n  /** For testing only. */\n  int methodForTest(\n      String name, boolean isFile, boolean isAbsolute, Reader fileContents) {\n    // actually do the calculation here\n  }   \n}   \n\nclass YourTest {\n  @Test public int methodShouldParseBadHtml() {\n    YourRefactoredClass yrc = new YourRefactoredClass();\n    assertEquals(42, yrc.methodForTest(\n        \"bad.html\", true, false, new StringReader(badHTMLText));\n  }   \n}   \n</code></pre>\n\n<p>At this point the logic in <code>method</code> is so straightforward it's not worth testing,\nand the logic in <code>methodForTest</code> is so easy to access that you can test it heavily.</p>\n"},{"tags":[],"owner":{"account_id":1474584,"reputation":876,"user_id":1385310,"accept_rate":63,"display_name":"Tian Na"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1526331237,"creation_date":1526330480,"answer_id":50338695,"question_id":17681708,"body_markdown":"One way to mock I/O calls (with Java 7 it would be the NIO final class `java.nio.file.Files`) is to wrap the needed calls in your own class and mock it:\r\n\r\n\r\n    public class FileHelper {\r\n    \r\n        public Path createDirectory(String directoryName) throws IOException {\r\n            return Files.createDirectory(Paths.get(directoryName));\r\n        }\r\n    \r\n        public boolean exists(String name) throws IOException {\r\n            return Files.exists(Paths.get(name), LinkOption.NOFOLLOW_LINKS);\r\n        }\r\n    \r\n    }\r\n\r\nThe business logic is located in the `ImageManager`: \r\n\r\n    FileHelper fileHelperMock = Mockito.mock(new FileHelper());\r\n    ImageManager imageManager = new ImageManagerImpl(fileHelperMock);\r\n    \r\n\r\nThe test will verify the call to `createDirectory()` method on your mock:\r\n\r\n    imageManager.save(&quot;directory&quot;);\r\n    Mockito.verify(fileHelperMock).createDirectory(&quot;directory&quot;);\r\n\r\nI would use this method during test driven development where I do not want to pollute testing with real file management (e.g. delete created directories/files in a finally block in each unit test).\r\n\r\nThen I would have acceptance tests covering every use case with real file handling.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>One way to mock I/O calls (with Java 7 it would be the NIO final class <code>java.nio.file.Files</code>) is to wrap the needed calls in your own class and mock it:</p>\n\n<pre><code>public class FileHelper {\n\n    public Path createDirectory(String directoryName) throws IOException {\n        return Files.createDirectory(Paths.get(directoryName));\n    }\n\n    public boolean exists(String name) throws IOException {\n        return Files.exists(Paths.get(name), LinkOption.NOFOLLOW_LINKS);\n    }\n\n}\n</code></pre>\n\n<p>The business logic is located in the <code>ImageManager</code>: </p>\n\n<pre><code>FileHelper fileHelperMock = Mockito.mock(new FileHelper());\nImageManager imageManager = new ImageManagerImpl(fileHelperMock);\n</code></pre>\n\n<p>The test will verify the call to <code>createDirectory()</code> method on your mock:</p>\n\n<pre><code>imageManager.save(\"directory\");\nMockito.verify(fileHelperMock).createDirectory(\"directory\");\n</code></pre>\n\n<p>I would use this method during test driven development where I do not want to pollute testing with real file management (e.g. delete created directories/files in a finally block in each unit test).</p>\n\n<p>Then I would have acceptance tests covering every use case with real file handling.</p>\n"},{"tags":[],"owner":{"account_id":15327413,"reputation":309,"user_id":11058155,"display_name":"Alan Hernandez"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1626280627,"creation_date":1626280627,"answer_id":68381979,"question_id":17681708,"body_markdown":"Another aproach is to generate a temporary file in an `@Before` block and then delete it in a `@After` method.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>Another aproach is to generate a temporary file in an <code>@Before</code> block and then delete it in a <code>@After</code> method.</p>\n"},{"tags":[],"owner":{"account_id":1660869,"reputation":5417,"user_id":1529195,"accept_rate":92,"display_name":"Patrick Goley"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683229776,"creation_date":1683226451,"answer_id":76176516,"question_id":17681708,"body_markdown":"This is not technically a mock but I have had success using a `File` reference to `/dev/null` which can be used in test code without performing any actual I/O (see [this answer on Unix SE][1]). Of course, it will always read as an empty file and writes to it will not be persisted, but it can otherwise act as a valid file, open streams, etc.\r\n\r\n\r\n  [1]: https://unix.stackexchange.com/questions/90162/io-utilization-for-dev-null-redirection#:~:text=If%20a%20program%20writes%20to,the%20hardware%27s%20point%20of%20view.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>This is not technically a mock but I have had success using a <code>File</code> reference to <code>/dev/null</code> which can be used in test code without performing any actual I/O (see <a href=\"https://unix.stackexchange.com/questions/90162/io-utilization-for-dev-null-redirection#:%7E:text=If%20a%20program%20writes%20to,the%20hardware%27s%20point%20of%20view.\">this answer on Unix SE</a>). Of course, it will always read as an empty file and writes to it will not be persisted, but it can otherwise act as a valid file, open streams, etc.</p>\n"}],"owner":{"account_id":2939897,"reputation":607,"user_id":2518037,"accept_rate":100,"display_name":"Matej"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155301,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":17690371,"answer_count":4,"score":48,"last_activity_date":1683229776,"creation_date":1373991089,"question_id":17681708,"body_markdown":"I&#39;m pretty new to mocking, and I&#39;ve been trying to mock the actual contents (essentially create a virtual file in memory alone) so that no data is written to disk at any point.\r\n\r\nI&#39;ve tried solutions like mocking the file and mocking as many of the properties that I can figure out as much as possible, an then also writing into it with a filewriter/bufferedwriter, but those don&#39;t work well, since they need canonical paths. Anyone found a solution other than this or similar, but that I&#39;m approaching this wrong?\r\n\r\nI&#39;ve been doing it like this:\r\n             \r\n    private void mocking(){\r\n        File badHTML = mock(File.class);\r\n        //setting the properties of badHTML\r\n        when(badHTML.canExecute()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.canRead()).thenReturn(Boolean.TRUE);\r\n        when(badHTML.canWrite()).thenReturn(Boolean.TRUE);\r\n        when(badHTML.compareTo(badHTML)).thenReturn(Integer.SIZE);\r\n        when(badHTML.delete()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.getFreeSpace()).thenReturn(0l);\r\n        when(badHTML.getName()).thenReturn(&quot;bad.html&quot;);\r\n        when(badHTML.getParent()).thenReturn(null);\r\n        when(badHTML.getPath()).thenReturn(&quot;bad.html&quot;);\r\n        when(badHTML.getParentFile()).thenReturn(null);\r\n        when(badHTML.getTotalSpace()).thenReturn(0l);\r\n        when(badHTML.isAbsolute()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.isDirectory()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.isFile()).thenReturn(Boolean.TRUE);\r\n        when(badHTML.isHidden()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.lastModified()).thenReturn(System.currentTimeMillis());\r\n        when(badHTML.mkdir()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.mkdirs()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.setExecutable(true)).thenReturn(Boolean.FALSE);\r\n        when(badHTML.setExecutable(false)).thenReturn(Boolean.TRUE);\r\n        when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\r\n        \r\n        try {\r\n            BufferedWriter bw = new BufferedWriter(new FileWriter(badHTML));\r\n            /*\r\n              badHTMLText is a string with the contents i want to put into the file, \r\n              can be just about whatever you want\r\n             */\r\n            bw.append(badHTMLText);\r\n            bw.close();\r\n            \r\n        } catch (IOException ex) {\r\n            System.err.println(ex);\r\n        }\r\n    }\r\n\r\nAny ideas or guidance would be very helpful.\r\nSomewhere after this i basically try to read from the file using another class. I would try to mock some sort of input stream, but the other class doesn&#39;t take an inputstream, since it&#39;s the io handling class for the project.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>I'm pretty new to mocking, and I've been trying to mock the actual contents (essentially create a virtual file in memory alone) so that no data is written to disk at any point.</p>\n\n<p>I've tried solutions like mocking the file and mocking as many of the properties that I can figure out as much as possible, an then also writing into it with a filewriter/bufferedwriter, but those don't work well, since they need canonical paths. Anyone found a solution other than this or similar, but that I'm approaching this wrong?</p>\n\n<p>I've been doing it like this:</p>\n\n<pre><code>private void mocking(){\n    File badHTML = mock(File.class);\n    //setting the properties of badHTML\n    when(badHTML.canExecute()).thenReturn(Boolean.FALSE);\n    when(badHTML.canRead()).thenReturn(Boolean.TRUE);\n    when(badHTML.canWrite()).thenReturn(Boolean.TRUE);\n    when(badHTML.compareTo(badHTML)).thenReturn(Integer.SIZE);\n    when(badHTML.delete()).thenReturn(Boolean.FALSE);\n    when(badHTML.getFreeSpace()).thenReturn(0l);\n    when(badHTML.getName()).thenReturn(\"bad.html\");\n    when(badHTML.getParent()).thenReturn(null);\n    when(badHTML.getPath()).thenReturn(\"bad.html\");\n    when(badHTML.getParentFile()).thenReturn(null);\n    when(badHTML.getTotalSpace()).thenReturn(0l);\n    when(badHTML.isAbsolute()).thenReturn(Boolean.FALSE);\n    when(badHTML.isDirectory()).thenReturn(Boolean.FALSE);\n    when(badHTML.isFile()).thenReturn(Boolean.TRUE);\n    when(badHTML.isHidden()).thenReturn(Boolean.FALSE);\n    when(badHTML.lastModified()).thenReturn(System.currentTimeMillis());\n    when(badHTML.mkdir()).thenReturn(Boolean.FALSE);\n    when(badHTML.mkdirs()).thenReturn(Boolean.FALSE);\n    when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\n    when(badHTML.setExecutable(true)).thenReturn(Boolean.FALSE);\n    when(badHTML.setExecutable(false)).thenReturn(Boolean.TRUE);\n    when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\n\n    try {\n        BufferedWriter bw = new BufferedWriter(new FileWriter(badHTML));\n        /*\n          badHTMLText is a string with the contents i want to put into the file, \n          can be just about whatever you want\n         */\n        bw.append(badHTMLText);\n        bw.close();\n\n    } catch (IOException ex) {\n        System.err.println(ex);\n    }\n}\n</code></pre>\n\n<p>Any ideas or guidance would be very helpful.\nSomewhere after this i basically try to read from the file using another class. I would try to mock some sort of input stream, but the other class doesn't take an inputstream, since it's the io handling class for the project.</p>\n"},{"tags":["java","sql","sql-server","mssql-jdbc"],"comments":[{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":2,"creation_date":1677639411,"post_id":75599157,"comment_id":133376460,"body_markdown":"SQL doesn&#39;t work like that, its a static language, you can&#39;t use variables in place of object names. You need dynamic SQL if you really must do it that way, but its not recommended.","body":"SQL doesn&#39;t work like that, its a static language, you can&#39;t use variables in place of object names. You need dynamic SQL if you really must do it that way, but its not recommended."},{"owner":{"account_id":19237226,"reputation":15,"user_id":14057941,"display_name":"stuckherenthere"},"score":0,"creation_date":1677639719,"post_id":75599157,"comment_id":133376502,"body_markdown":"so it can&#39;t be used as a global procedure ? since i will need to copy multiple tables","body":"so it can&#39;t be used as a global procedure ? since i will need to copy multiple tables"},{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":0,"creation_date":1677640043,"post_id":75599157,"comment_id":133376542,"body_markdown":"The *normal* design method with SQL is you create specific procedures for specific tables. As I said if you really must do it this way you can use dynamic sql (there are plenty of tutorials out there), but its highly recommended not to do it that way.","body":"The <i>normal</i> design method with SQL is you create specific procedures for specific tables. As I said if you really must do it this way you can use dynamic sql (there are plenty of tutorials out there), but its highly recommended not to do it that way."}],"answers":[{"tags":[],"owner":{"account_id":1854123,"reputation":79,"user_id":1680071,"display_name":"EbrahimFarahmand"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683228749,"creation_date":1677654430,"answer_id":75600507,"question_id":75599157,"body_markdown":"Please change the body of the stored procedure as follows:\r\n\r\n    ALTER PROCEDURE callProcedure\r\n        (@newTable varchar(100),\r\n         @tableField varchar(8000),\r\n         @table varchar(100))\r\n    AS\r\n    BEGIN\r\n        DECLARE @query NVARCHAR(MAX)\r\n\r\n        SET @query = &#39;DELETE FROM &#39; + @newTable + &#39;;&#39;;\r\n    \r\n        SET @query += &#39;SET IDENTITY_INSERT &#39; + @newTable + &#39; ON;&#39;;\r\n    \r\n        SET @query += &#39;INSERT INTO &#39; + @newTable + &#39;(&#39; + @tableField + &#39;) SELECT &#39; + @tableField + &#39; FROM &#39; + @table + &#39;;&#39;;\r\n    \r\n        SET @query += &#39;SET IDENTITY_INSERT &#39; + @newTable + &#39; OFF;&#39;;\r\n\r\n        EXEC (@query)\r\n    END","title":"Stored Procedure with Multiple Queries and Parameters","body":"<p>Please change the body of the stored procedure as follows:</p>\n<pre><code>ALTER PROCEDURE callProcedure\n    (@newTable varchar(100),\n     @tableField varchar(8000),\n     @table varchar(100))\nAS\nBEGIN\n    DECLARE @query NVARCHAR(MAX)\n\n    SET @query = 'DELETE FROM ' + @newTable + ';';\n\n    SET @query += 'SET IDENTITY_INSERT ' + @newTable + ' ON;';\n\n    SET @query += 'INSERT INTO ' + @newTable + '(' + @tableField + ') SELECT ' + @tableField + ' FROM ' + @table + ';';\n\n    SET @query += 'SET IDENTITY_INSERT ' + @newTable + ' OFF;';\n\n    EXEC (@query)\nEND\n</code></pre>\n"}],"owner":{"account_id":19237226,"reputation":15,"user_id":14057941,"display_name":"stuckherenthere"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683228749,"creation_date":1677638987,"question_id":75599157,"body_markdown":"I&#39;m using Microsoft SQL Server and Java for this.\r\n\r\nI&#39;m intending to create a global procedure function, in which it will copy the records from 1 table to another table.\r\n\r\nMy current procedure:\r\n\r\n```\r\ncreate procedure callProcedure(@newTable varchar(100),\r\n@tableField varchar(8000),\r\n@table varchar(100))\r\nas\r\nbegin\r\nDELETE FROM @newTable;\r\n\r\nSET IDENTITY_INSERT @newTable ON;\r\n\r\nINSERT INTO @newTable(@tableField) SELECT @tableField FROM @table\r\n\r\nSET IDENTITY_INSERT @newTable OFF;\r\nend\r\n```\r\n\r\nWhen I execute the procedure.\r\nThis is the error that I received.\r\n&gt; SQL Error [102] [S0001]: Incorrect syntax near &#39;@newTable&#39;.\r\n\r\n\r\nSample final queries after being replaced with parameters\r\n\r\n```\r\nEXEC callProcedure(@newTable = &#39;EMPLOYEE_1&#39;, @tableField = &#39;ID, NAME, STATUS&#39;, @table = &#39;EMPLOYEE&#39;)\r\n```\r\n\r\nPlease help with this.\r\n\r\nThank you.\r\n\r\n\r\n\r\n```\r\nEXEC callProcedure(@newTable = &#39;EMPLOYEE_1&#39;, @tableField = &#39;ID, NAME, STATUS&#39;, @table = &#39;EMPLOYEE&#39;)\r\n```\r\n\r\nwill return the result.","title":"Stored Procedure with Multiple Queries and Parameters","body":"<p>I'm using Microsoft SQL Server and Java for this.</p>\n<p>I'm intending to create a global procedure function, in which it will copy the records from 1 table to another table.</p>\n<p>My current procedure:</p>\n<pre><code>create procedure callProcedure(@newTable varchar(100),\n@tableField varchar(8000),\n@table varchar(100))\nas\nbegin\nDELETE FROM @newTable;\n\nSET IDENTITY_INSERT @newTable ON;\n\nINSERT INTO @newTable(@tableField) SELECT @tableField FROM @table\n\nSET IDENTITY_INSERT @newTable OFF;\nend\n</code></pre>\n<p>When I execute the procedure.\nThis is the error that I received.</p>\n<blockquote>\n<p>SQL Error [102] [S0001]: Incorrect syntax near '@newTable'.</p>\n</blockquote>\n<p>Sample final queries after being replaced with parameters</p>\n<pre><code>EXEC callProcedure(@newTable = 'EMPLOYEE_1', @tableField = 'ID, NAME, STATUS', @table = 'EMPLOYEE')\n</code></pre>\n<p>Please help with this.</p>\n<p>Thank you.</p>\n<pre><code>EXEC callProcedure(@newTable = 'EMPLOYEE_1', @tableField = 'ID, NAME, STATUS', @table = 'EMPLOYEE')\n</code></pre>\n<p>will return the result.</p>\n"},{"tags":["java","windows","maven"],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683225995,"creation_date":1683225995,"answer_id":76176455,"question_id":76176304,"body_markdown":"On windows the default location for the &quot;local&quot; repository is `C:\\Users\\&lt;User_Name&gt;\\.m2`.\r\n\r\nCalling `mvn clean install` in &quot;parent-util&quot; should cause both `parent-util` AND `math-util` to be installed locally.\r\n\r\nThere is no need to install the artifact or it&#39;s parent into your demo and you don&#39;t have to add `repositories` and `file://${project.basedir}/lib` etc..","title":"Maven on Windows not able to resolve parent POM from a custom library added as a dependency","body":"<p>On windows the default location for the &quot;local&quot; repository is <code>C:\\Users\\&lt;User_Name&gt;\\.m2</code>.</p>\n<p>Calling <code>mvn clean install</code> in &quot;parent-util&quot; should cause both <code>parent-util</code> AND <code>math-util</code> to be installed locally.</p>\n<p>There is no need to install the artifact or it's parent into your demo and you don't have to add <code>repositories</code> and <code>file://${project.basedir}/lib</code> etc..</p>\n"}],"owner":{"account_id":23636334,"reputation":11,"user_id":17667325,"display_name":"Javier Meza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683228485,"creation_date":1683224658,"question_id":76176304,"body_markdown":"I&#39;m testing a multi module project on maven and also creating custom libraries to include in other Maven projects, and Im building a math-util lib, which is one of the modules of my project, so I have this folder structure\r\n\r\n```\r\n/parent-util\r\n    /math-util\r\n        pom.xml\r\npom.xml\r\n```\r\nThis is the `pom.xml` of `parent-utl`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.javi&lt;/groupId&gt;\r\n    &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;modules&gt;\r\n        &lt;module&gt;math-util&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd this is the `pom.xml` of `math-util`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.javi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;math-util&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAfter running `mvn clean install` I get the following jar file for my `math-util` library `math-util-1.0-SNAPSHOT.jar`\r\n\r\nThen I created another maven project, which I named `demo` my idea was to include the `math-util` library as a dependency, using a local repository inside `demo` (think about this as a customer who we are only providing the `math-util` jar file), so this is my folder structure for the `demo` project (I just copied and pasted the `math-util-1.0-SNAPSHOT.jar` inside so I can install it)\r\n\r\n\r\n```\r\n/demo\r\n    /lib\r\n    /src/java/...\r\n    math-util-1.0-SNAPSHOT.jar\r\n    pom.xml\r\n```\r\n\r\nBy using `mvn install` I installed my `math-lib` dependency inside the `lib` folder:\r\n\r\n```\r\nmvn install:install-file -Dfile=&#39;math-util-1.0-SNAPSHOT.jar&#39; -DgroupId=&#39;com.javi&#39; -DartifactId=&#39;math-util&#39; -Dversion=&#39;1.0-SNAPSHOT&#39; -DlocalRepositoryPath=&#39;lib&#39;\r\n```\r\n\r\nWhich works fine and I actually see the folders now inside `lib`, this is the output\r\n```\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\r\n[INFO] Building demo 1.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- install:3.1.0:install-file (default-cli) @ demo ---\r\n[INFO] Installing C:\\Users\\jmeza\\IdeaProjects\\demo\\math-util-1.0-SNAPSHOT.jar to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.jar\r\n[INFO] Installing C:\\Users\\jmeza\\AppData\\Local\\Temp\\math-util-1.0-SNAPSHOT973893646697774711.pom to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.pom\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.499 s\r\n[INFO] Finished at: 2023-05-04T10:05:30-06:00\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\nNow my `pom.xml` for `demo` is the following, adding the `lib` folder as a repository and the `math-util` as a dependency\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;lib&lt;/id&gt;\r\n            &lt;name&gt;Local Maven Repository&lt;/name&gt;\r\n            &lt;url&gt;file://${project.basedir}/lib&lt;/url&gt;\r\n            &lt;releases&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;checksumPolicy&gt;ignore&lt;/checksumPolicy&gt;\r\n            &lt;/releases&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.javi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;math-util&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nBut I dont know why, and this is only failing for me on Windows (tried it on Ubuntu and Mac) when I try to do `mvn clean install` I get the following issue\r\n\r\n```\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\r\n[INFO] Building demo 1.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.394 s\r\n[INFO] Finished at: 2023-05-04T10:26:06-06:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal on project demo: Could not resolve dependencies for project org.example:demo:jar:1.0-SNAPSHOT: Failed to collect dependencies at com.javi:math-util:jar:1.0-SNAPSHOT: Failed to read arti\r\nfact descriptor for com.javi:math-util:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: com.javi:parent-util:pom:1.0-SNAPSHOT (absent): com.javi:parent-util:pom:1.0-SNAPSHOT was not found in file://C:\r\n\\Users\\jmeza\\IdeaProjects\\demo/lib during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of lib has elapsed or updates are forced -&gt; [Help 1]\r\n[ERROR]\r\n```\r\nWhich indicates maven is not able to resolve the parent POM file in this case `parent-util`, the weird thing is this is only failing for me on Windows\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI have tried using `&lt;relativePath&gt;` on the `math-util` pom.xml file but it didnt work, also I tried changing the `&lt;url&gt;` inside the `demo` pom.xml thinking if this is an issue with the `file://` protocol but even if I add a full path this does not work.&lt;/code&gt;","title":"Maven on Windows not able to resolve parent POM from a custom library added as a dependency","body":"<p>I'm testing a multi module project on maven and also creating custom libraries to include in other Maven projects, and Im building a math-util lib, which is one of the modules of my project, so I have this folder structure</p>\n<pre><code>/parent-util\n    /math-util\n        pom.xml\npom.xml\n</code></pre>\n<p>This is the <code>pom.xml</code> of <code>parent-utl</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.javi&lt;/groupId&gt;\n    &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;modules&gt;\n        &lt;module&gt;math-util&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>And this is the <code>pom.xml</code> of <code>math-util</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.javi&lt;/groupId&gt;\n        &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;math-util&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>After running <code>mvn clean install</code> I get the following jar file for my <code>math-util</code> library <code>math-util-1.0-SNAPSHOT.jar</code></p>\n<p>Then I created another maven project, which I named <code>demo</code> my idea was to include the <code>math-util</code> library as a dependency, using a local repository inside <code>demo</code> (think about this as a customer who we are only providing the <code>math-util</code> jar file), so this is my folder structure for the <code>demo</code> project (I just copied and pasted the <code>math-util-1.0-SNAPSHOT.jar</code> inside so I can install it)</p>\n<pre><code>/demo\n    /lib\n    /src/java/...\n    math-util-1.0-SNAPSHOT.jar\n    pom.xml\n</code></pre>\n<p>By using <code>mvn install</code> I installed my <code>math-lib</code> dependency inside the <code>lib</code> folder:</p>\n<pre><code>mvn install:install-file -Dfile='math-util-1.0-SNAPSHOT.jar' -DgroupId='com.javi' -DartifactId='math-util' -Dversion='1.0-SNAPSHOT' -DlocalRepositoryPath='lib'\n</code></pre>\n<p>Which works fine and I actually see the folders now inside <code>lib</code>, this is the output</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\n[INFO] Building demo 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- install:3.1.0:install-file (default-cli) @ demo ---\n[INFO] Installing C:\\Users\\jmeza\\IdeaProjects\\demo\\math-util-1.0-SNAPSHOT.jar to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.jar\n[INFO] Installing C:\\Users\\jmeza\\AppData\\Local\\Temp\\math-util-1.0-SNAPSHOT973893646697774711.pom to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.pom\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.499 s\n[INFO] Finished at: 2023-05-04T10:05:30-06:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>Now my <code>pom.xml</code> for <code>demo</code> is the following, adding the <code>lib</code> folder as a repository and the <code>math-util</code> as a dependency</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;lib&lt;/id&gt;\n            &lt;name&gt;Local Maven Repository&lt;/name&gt;\n            &lt;url&gt;file://${project.basedir}/lib&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;checksumPolicy&gt;ignore&lt;/checksumPolicy&gt;\n            &lt;/releases&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.javi&lt;/groupId&gt;\n            &lt;artifactId&gt;math-util&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>But I dont know why, and this is only failing for me on Windows (tried it on Ubuntu and Mac) when I try to do <code>mvn clean install</code> I get the following issue</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\n[INFO] Building demo 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.394 s\n[INFO] Finished at: 2023-05-04T10:26:06-06:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal on project demo: Could not resolve dependencies for project org.example:demo:jar:1.0-SNAPSHOT: Failed to collect dependencies at com.javi:math-util:jar:1.0-SNAPSHOT: Failed to read arti\nfact descriptor for com.javi:math-util:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: com.javi:parent-util:pom:1.0-SNAPSHOT (absent): com.javi:parent-util:pom:1.0-SNAPSHOT was not found in file://C:\n\\Users\\jmeza\\IdeaProjects\\demo/lib during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of lib has elapsed or updates are forced -&gt; [Help 1]\n[ERROR]\n</code></pre>\n<p>Which indicates maven is not able to resolve the parent POM file in this case <code>parent-util</code>, the weird thing is this is only failing for me on Windows</p>\n<p>I have tried using <code>&lt;relativePath&gt;</code> on the <code>math-util</code> pom.xml file but it didnt work, also I tried changing the <code>&lt;url&gt;</code> inside the <code>demo</code> pom.xml thinking if this is an issue with the <code>file://</code> protocol but even if I add a full path this does not work.</p>\n"},{"tags":["java","php"],"answers":[{"tags":[],"owner":{"account_id":378910,"reputation":2990,"user_id":731931,"display_name":"xs0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1511111110,"creation_date":1511111110,"answer_id":47379541,"question_id":47379426,"body_markdown":"There are several bugs, but most of all you&#39;re just overcomplicating things. Simply use base64 encoding and built-in functions. On PHP side:\r\n\r\n    $ctx = hash_init(&#39;md5&#39;);\r\n    hash_update($ctx, $header);\r\n    hash_update($ctx, $serial);\r\n    $raw = hash_final($ctx, true);\r\n    $out = substr(base64_encode($raw), 0, 10);\r\n\r\nOn Java side:\r\n\r\n    // ...\r\n    raw = md.digest();\r\n    out = Base64.getEncoder().encodeToString(raw).substring(0, 10);","title":"Java message digest update converted in PHP","body":"<p>There are several bugs, but most of all you're just overcomplicating things. Simply use base64 encoding and built-in functions. On PHP side:</p>\n\n<pre><code>$ctx = hash_init('md5');\nhash_update($ctx, $header);\nhash_update($ctx, $serial);\n$raw = hash_final($ctx, true);\n$out = substr(base64_encode($raw), 0, 10);\n</code></pre>\n\n<p>On Java side:</p>\n\n<pre><code>// ...\nraw = md.digest();\nout = Base64.getEncoder().encodeToString(raw).substring(0, 10);\n</code></pre>\n"}],"owner":{"account_id":2664419,"reputation":1,"user_id":2303282,"display_name":"AlberAls"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":47379541,"answer_count":1,"score":-1,"last_activity_date":1683228469,"creation_date":1511110447,"question_id":47379426,"body_markdown":"I have this code in Java [Pastebin link][1]. Sorry for pastebin link but SO doesn&#39;t allow me to paste that much code\r\n\r\nWhich outputs &quot;Ap1pAXP8yS&quot;\r\n\r\nI&#39;m trying to convert the code in PHP. Till now I have converted some but its not working OK ( not getting Ap1pAXP8yS in PHP ). \r\n\r\nThe main problem seems to be the md.update \r\n\r\nHere the code in PHP \r\n\r\n    function bin2print($hex)\r\n    {\r\n\t    $out = &quot;&quot;;\r\n        $mapping = [ &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;, &#39;$&#39;, &#39;j&#39;, &#39;k&#39;, &#39;-&#39;, &#39;m&#39;, &#39;n&#39;, &#39;o&#39;, &#39;p&#39;, &#39;q&#39;, &#39;r&#39;, &#39;s&#39;, &#39;t&#39;, &#39;u&#39;, &#39;v&#39;, &#39;w&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;=&#39;, &#39;J&#39;, &#39;K&#39;, &#39;L&#39;, &#39;M&#39;, &#39;N&#39;, &#39;O&#39;, &#39;P&#39;, &#39;Q&#39;, &#39;R&#39;, &#39;S&#39;, &#39;T&#39;, &#39;U&#39;, &#39;V&#39;, &#39;W&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;.&#39;, &#39;/&#39;, &#39;%&#39; ];\r\n        for ($i = 0; $i &lt; count($hex); $i++) {\r\n\t\t\r\n            $j = $hex[$i];\r\n\t\t\t\r\n\t\t\tif ($j &lt; 0) {\r\n\t\t\t\t$j = 256 + $j;\r\n\t\t\t}\r\n\r\n\t\t\t$out.=  $mapping [($j % count($mapping)) ];\r\n        }\r\n\t\treturn $out;\r\n\t}\r\n\r\n\tfunction byteStr2byteArray($s)\r\n    {\r\n\t\treturn array_slice(unpack(&quot;C*&quot;, &quot;\\0&quot;.$s), 1);\r\n\t} \r\n\t \r\n\t \r\n\tfunction getBytes($string)\r\n    {\r\n\t \r\n\t\t$bytes = array();\r\n\t\tfor($i = 0; $i &lt; strlen($string); $i++) {\r\n\t\t\t$bytes[] = ord($string[$i]);\r\n\t\t}\r\n\r\n\t\t$out = &#39;&#39;;\r\n\t\tforeach($bytes as $single) {\r\n\t\t\t$out.=$single ;\r\n\t\t}\r\n\t\treturn ($out);\r\n\t}\r\n\t \r\n\t$serial = &#39;111111111111&#39;;\r\n\t$header = &#39;cow&#39;;\r\n\r\n\t$ctx = hash_init(&#39;md5&#39; );\r\n\thash_update($ctx, getBytes($header));\r\n\thash_update($ctx, getBytes($serial));\r\n\t$raw = hash_final($ctx,true);\r\n\r\n\t$out = bin2print(byteStr2byteArray($raw));\r\n\r\n\techo substr($out,0,10);\r\n\r\nWhich outputs &quot;-fjk7WCU2E&quot;\r\n\r\nWhat am I doing wrong?\r\n\r\n\r\n  [1]: https://pastebin.com/Z08w46ut","title":"Java message digest update converted in PHP","body":"<p>I have this code in Java <a href=\"https://pastebin.com/Z08w46ut\" rel=\"nofollow noreferrer\">Pastebin link</a>. Sorry for pastebin link but SO doesn't allow me to paste that much code</p>\n<p>Which outputs &quot;Ap1pAXP8yS&quot;</p>\n<p>I'm trying to convert the code in PHP. Till now I have converted some but its not working OK ( not getting Ap1pAXP8yS in PHP ).</p>\n<p>The main problem seems to be the md.update</p>\n<p>Here the code in PHP</p>\n<pre><code>function bin2print($hex)\n{\n    $out = &quot;&quot;;\n    $mapping = [ '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', '$', 'j', 'k', '-', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', '=', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '.', '/', '%' ];\n    for ($i = 0; $i &lt; count($hex); $i++) {\n    \n        $j = $hex[$i];\n        \n        if ($j &lt; 0) {\n            $j = 256 + $j;\n        }\n\n        $out.=  $mapping [($j % count($mapping)) ];\n    }\n    return $out;\n}\n\nfunction byteStr2byteArray($s)\n{\n    return array_slice(unpack(&quot;C*&quot;, &quot;\\0&quot;.$s), 1);\n} \n \n \nfunction getBytes($string)\n{\n \n    $bytes = array();\n    for($i = 0; $i &lt; strlen($string); $i++) {\n        $bytes[] = ord($string[$i]);\n    }\n\n    $out = '';\n    foreach($bytes as $single) {\n        $out.=$single ;\n    }\n    return ($out);\n}\n \n$serial = '111111111111';\n$header = 'cow';\n\n$ctx = hash_init('md5' );\nhash_update($ctx, getBytes($header));\nhash_update($ctx, getBytes($serial));\n$raw = hash_final($ctx,true);\n\n$out = bin2print(byteStr2byteArray($raw));\n\necho substr($out,0,10);\n</code></pre>\n<p>Which outputs &quot;-fjk7WCU2E&quot;</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","jmx"],"owner":{"account_id":16720084,"reputation":31,"user_id":12085258,"display_name":"manikanta Nangunuri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683228447,"creation_date":1683228447,"question_id":76176750,"body_markdown":"We have our app running using jmx properties , which are passed in the command line arguments while starting the app as systempropties.\r\nThere are couple of properties which are having plain text passwords \r\n\r\n    -Djmxremote.password having file contains plain text passwords.\r\n    -Djavax.net.ssl.keystorePassword\r\n    -Djavax.net.ssl.TrustStorepassword.\r\n\r\nI have my own encryption logic and am passing a encrypted values to them. Now I want to understand if we decrypt in the code those propertis and set them back to the systemproperties,  how can we make jmx to pick the latest values. \r\nAny leads on this is much appreciated.","title":"How to pass encypted values to jmx properties","body":"<p>We have our app running using jmx properties , which are passed in the command line arguments while starting the app as systempropties.\nThere are couple of properties which are having plain text passwords</p>\n<pre><code>-Djmxremote.password having file contains plain text passwords.\n-Djavax.net.ssl.keystorePassword\n-Djavax.net.ssl.TrustStorepassword.\n</code></pre>\n<p>I have my own encryption logic and am passing a encrypted values to them. Now I want to understand if we decrypt in the code those propertis and set them back to the systemproperties,  how can we make jmx to pick the latest values.\nAny leads on this is much appreciated.</p>\n"},{"tags":["java","lambda","java-stream"],"answers":[{"tags":[],"owner":{"account_id":27784879,"reputation":389,"user_id":21212553,"display_name":"galalem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683219278,"creation_date":1683219278,"answer_id":76175616,"question_id":76175532,"body_markdown":"Try this\r\n```java\r\nstatic String shortestPerson(List&lt;Person&gt; ps) {\r\n    return ps.stream().min(Comparator.comparing(Person::height)).orElse(new Person(&quot;No One&quot;, 0)).name;\r\n}\r\n```","title":"How to return a value based on a property of a list of objects using streams","body":"<p>Try this</p>\n<pre class=\"lang-java prettyprint-override\"><code>static String shortestPerson(List&lt;Person&gt; ps) {\n    return ps.stream().min(Comparator.comparing(Person::height)).orElse(new Person(&quot;No One&quot;, 0)).name;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683228189,"creation_date":1683228189,"answer_id":76176718,"question_id":76175532,"body_markdown":"In your `shortestPerson` method, you can do it like this. `Map` is a method of `Optional` which will take the `Object` and extract a different value.\r\n```\r\nstatic String shortestPerson(List&lt;Person&gt; ps) {\r\n     return ps.stream().min(Comparator.comparingInt(Person::height))\r\n             .map(Person::name).get();\r\n    \r\n }","title":"How to return a value based on a property of a list of objects using streams","body":"<p>In your <code>shortestPerson</code> method, you can do it like this. <code>Map</code> is a method of <code>Optional</code> which will take the <code>Object</code> and extract a different value.</p>\n<pre><code>static String shortestPerson(List&lt;Person&gt; ps) {\n     return ps.stream().min(Comparator.comparingInt(Person::height))\n             .map(Person::name).get();\n    \n }\n</code></pre>\n"}],"owner":{"account_id":22367061,"reputation":11,"user_id":16582657,"display_name":"Andy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683228189,"creation_date":1683218705,"question_id":76175532,"body_markdown":"I need to return the name (String) of the Person record with shortest height using streams.\r\n\r\nI have searched online but all i could find that kind of worked was finding the actual lowest int value, not the name of the Person with the lowest height. i just started learning streams and i find them so hard to understand. Any help is appreciated.\r\n\r\n\r\n```\r\n\r\n//Can not use for/while/if/shortestPerson\r\nimport java.util.List;\r\nimport java.util.ArrayList;\r\nimport java.util.Comparator;\r\nimport java.util.function.*;\r\n\r\nrecord Person(String name, int height) {\r\n}\r\n\r\npublic class Exercise {\r\n\t// this is where the implementation goes \r\n\tstatic String shortestPerson(List&lt;Person&gt; ps) {\r\n               String name= ps.stream().map.name.\r\n    \r\n  }\r\n\r\n\tstatic Person p(String name, int height) {\r\n\t\treturn new Person(name, height);\r\n\t}\r\n\r\n\tstatic void test(String expected, List&lt;Person&gt; input) {\r\n\t\tString res = shortestPerson(input);\r\n\t\tassert res.equals(expected) : &quot;For input &quot; + input + &quot; we get &quot; + res + &quot; instead of &quot; + expected;\r\n\t}\r\n\r\n\tpublic static void main(String[] a) {\r\n\t\ttry {\r\n\t\t\tshortestPerson(List.of());\r\n\t\t\tassert false;\r\n\t\t} catch (IllegalArgumentException iae) {\r\n\t\t}\r\n\r\n\t\ttest(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 190)));\r\n\t\ttest(&quot;Adam&quot;, List.of(p(&quot;Adam&quot;, 220)));\r\n\t\ttest(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 190), p(&quot;Alice&quot;, 170)));\r\n\t\ttest(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 170), p(&quot;Alice&quot;, 190)));\r\n\t\ttest(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 1), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 3)));\r\n\t\ttest(&quot;Dany&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 1)));\r\n\t\ttest(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 5)));\r\n\t}\r\n}\r\n\r\n```\r\n","title":"How to return a value based on a property of a list of objects using streams","body":"<p>I need to return the name (String) of the Person record with shortest height using streams.</p>\n<p>I have searched online but all i could find that kind of worked was finding the actual lowest int value, not the name of the Person with the lowest height. i just started learning streams and i find them so hard to understand. Any help is appreciated.</p>\n<pre><code>\n//Can not use for/while/if/shortestPerson\nimport java.util.List;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.function.*;\n\nrecord Person(String name, int height) {\n}\n\npublic class Exercise {\n    // this is where the implementation goes \n    static String shortestPerson(List&lt;Person&gt; ps) {\n               String name= ps.stream().map.name.\n    \n  }\n\n    static Person p(String name, int height) {\n        return new Person(name, height);\n    }\n\n    static void test(String expected, List&lt;Person&gt; input) {\n        String res = shortestPerson(input);\n        assert res.equals(expected) : &quot;For input &quot; + input + &quot; we get &quot; + res + &quot; instead of &quot; + expected;\n    }\n\n    public static void main(String[] a) {\n        try {\n            shortestPerson(List.of());\n            assert false;\n        } catch (IllegalArgumentException iae) {\n        }\n\n        test(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 190)));\n        test(&quot;Adam&quot;, List.of(p(&quot;Adam&quot;, 220)));\n        test(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 190), p(&quot;Alice&quot;, 170)));\n        test(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 170), p(&quot;Alice&quot;, 190)));\n        test(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 1), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 3)));\n        test(&quot;Dany&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 1)));\n        test(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 5)));\n    }\n}\n\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1683222573,"post_id":76175919,"comment_id":134337544,"body_markdown":"Are there no clues in the remainder of the stacktrace? Is this ZipException the root cause, or caused by some other exception? And where is this exception thrown? The stack trace would tell you (or us, if you included the relevant part) all that.","body":"Are there no clues in the remainder of the stacktrace? Is this ZipException the root cause, or caused by some other exception? And where is this exception thrown? The stack trace would tell you (or us, if you included the relevant part) all that."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683223066,"post_id":76175919,"comment_id":134337646,"body_markdown":"add pic with stacktrace","body":"add pic with stacktrace"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1683223622,"post_id":76175919,"comment_id":134337757,"body_markdown":"The ZIP file your server reads is corrupted. Or, possibly, &#39;corrupted&#39; - zip is a container format with a billion variations, but there is a standard &#39;just choose these for it to be universally readable zip file&#39; - and it isn&#39;t one of those.","body":"The ZIP file your server reads is corrupted. Or, possibly, &#39;corrupted&#39; - zip is a container format with a billion variations, but there is a standard &#39;just choose these for it to be universally readable zip file&#39; - and it isn&#39;t one of those."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683223818,"post_id":76175919,"comment_id":134337799,"body_markdown":"Vary strange , if it corrupted why i dnt have any trable with read it on my PC.  And how to fix that?","body":"Vary strange , if it corrupted why i dnt have any trable with read it on my PC.  And how to fix that?"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":4,"creation_date":1683223833,"post_id":76175919,"comment_id":134337805,"body_markdown":"&quot;i get file from **ftp server**&quot; - the typical issue is ascii mode transfer.","body":"&quot;i get file from <b>ftp server</b>&quot; - the typical issue is ascii mode transfer."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683223966,"post_id":76175919,"comment_id":134337833,"body_markdown":"i retrieve not file but byte[] using FtpClient.retirievFileBytes(path to file). How to fix it Andey?","body":"i retrieve not file but byte[] using FtpClient.retirievFileBytes(path to file). How to fix it Andey?"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":1,"creation_date":1683224211,"post_id":76175919,"comment_id":134337880,"body_markdown":"`FtpClient.setFileType(FTP.BINARY_FILE_TYPE)`","body":"<code>FtpClient.setFileType(FTP.BINARY_FILE_TYPE)</code>"},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683226880,"post_id":76175919,"comment_id":134338466,"body_markdown":"not working - FtpClient.setFileType(FTP.BINARY_FILE_TYPE) set it when connect to Ftp and still get this exception","body":"not working - FtpClient.setFileType(FTP.BINARY_FILE_TYPE) set it when connect to Ftp and still get this exception"},{"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"score":0,"creation_date":1683227154,"post_id":76175919,"comment_id":134338530,"body_markdown":"Use some tool to get a hash/checksum of the file on each computer and make sure it&#39;s the same. If your server is on Linux, you probably have a tool such as `md5sum`/`sha1sum`/`sha256sum` (e.g. in [Debian&#39;s coreutils](https://packages.debian.org/bullseye/coreutils)) that you can run from the command line.","body":"Use some tool to get a hash/checksum of the file on each computer and make sure it&#39;s the same. If your server is on Linux, you probably have a tool such as <code>md5sum</code>/<code>sha1sum</code>/<code>sha256sum</code> (e.g. in <a href=\"https://packages.debian.org/bullseye/coreutils\" rel=\"nofollow noreferrer\">Debian&#39;s coreutils</a>) that you can run from the command line."}],"answers":[{"tags":[],"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683228170,"creation_date":1683228170,"answer_id":76176714,"question_id":76175919,"body_markdown":"finally found solution \r\nbefore retrieve every file i put this function\r\n\r\n    ftp.setFileType(FTP.BINARY_FILE_TYPE);\r\n\r\nand then \r\n\r\n    InputStream inputStream = ftp.retrieveFileStream(path)\r\n\r\nand everything going good at local PC and server with linux","title":"How to split ZipInputStream into Inputstreams","body":"<p>finally found solution\nbefore retrieve every file i put this function</p>\n<pre><code>ftp.setFileType(FTP.BINARY_FILE_TYPE);\n</code></pre>\n<p>and then</p>\n<pre><code>InputStream inputStream = ftp.retrieveFileStream(path)\n</code></pre>\n<p>and everything going good at local PC and server with linux</p>\n"}],"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76176714,"answer_count":1,"score":0,"last_activity_date":1683228170,"creation_date":1683221470,"question_id":76175919,"body_markdown":"i get file from ftp server and parse it to some java class\r\n\r\n  \r\n\r\n     wrapper.connect();\r\n                byte[] archiveBytes = wrapper.retrieveFileBytes(&quot;some path&quot;);\r\n                try (ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(archiveBytes))) {\r\n                    ZipEntry entry;\r\n                    while ((entry = zis.getNextEntry()) != null) {\r\n                        byte[] fileBytes = FileUtils.readZipEntry(zis);\r\n                        if (fileBytes.length == 0) {\r\n                            continue;\r\n                        }\r\n                        try (InputStream inputStream = new ByteArrayInputStream(fileBytes)) {\r\n                            var model =  ftpFileReader.read(inputStream);\r\n                           \r\n                            domains.add(model);\r\n                        } \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return domains;\r\n        }\r\n\r\nand util method\r\n\r\n \r\n\r\n     public static byte[] readZipEntry(ZipInputStream zis) throws IOException {\r\n            try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {\r\n                byte[] buffer = new byte[1024];\r\n                int count;\r\n                while ((count = zis.read(buffer)) &gt; -1) {\r\n                    outputStream.write(buffer, 0, count);\r\n                }\r\n                return outputStream.toByteArray();\r\n            } finally {\r\n                zis.closeEntry();\r\n        \r\n\r\n    }\r\n    }\r\n\r\neverything works good on my local PC with windows, but if i deploy it on server i got \r\n\r\n    java.util.zip.ZipException: invalid distance too far back\r\n\r\ndont understand what is going wrong and how to fix i. Please help\r\n\r\n\r\nps. stacktrace\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RiOqe.png\r\n\r\n    org.springframework.retry.RetryException: Non-skippable exception in recoverer while processing; nested exception is java.util.zip.ZipException: invalid distance too far back\r\n            at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor$2.recover(FaultTolerantChunkProcessor.java:299) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.retry.support.RetryTemplate.handleRetryExhausted(RetryTemplate.java:539) ~[spring-retry-1.3.3.jar!/:na]\r\n            at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:387) ~[spring-retry-1.3.3.jar!/:na]\r\n            at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:255) ~[spring-retry-1.3.3.jar!/:na]\r\n            at org.springframework.batch.core.step.item.BatchRetryTemplate.execute(BatchRetryTemplate.java:217) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor.transform(FaultTolerantChunkProcessor.java:308) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.23.jar!/:5.3.23]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:139) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\n    Caused by: java.util.zip.ZipException: invalid distance too far back\r\n            at java.base/java.util.zip.InflaterInputStream.read(Unknown Source) ~[na:na]\r\n            at java.base/java.util.zip.ZipInputStream.read(Unknown Source) ~[na:na]\r\n            at java.base/java.util.zip.ZipInputStream.closeEntry(Unknown Source) ~[na:na]\r\n            at ftp.utils.FileUtils.readZipEntry(FileUtils.java:18)","title":"How to split ZipInputStream into Inputstreams","body":"<p>i get file from ftp server and parse it to some java class</p>\n<pre><code> wrapper.connect();\n            byte[] archiveBytes = wrapper.retrieveFileBytes(&quot;some path&quot;);\n            try (ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(archiveBytes))) {\n                ZipEntry entry;\n                while ((entry = zis.getNextEntry()) != null) {\n                    byte[] fileBytes = FileUtils.readZipEntry(zis);\n                    if (fileBytes.length == 0) {\n                        continue;\n                    }\n                    try (InputStream inputStream = new ByteArrayInputStream(fileBytes)) {\n                        var model =  ftpFileReader.read(inputStream);\n                       \n                        domains.add(model);\n                    } \n                    }\n                }\n            }\n        }\n        return domains;\n    }\n</code></pre>\n<p>and util method</p>\n<pre><code> public static byte[] readZipEntry(ZipInputStream zis) throws IOException {\n        try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {\n            byte[] buffer = new byte[1024];\n            int count;\n            while ((count = zis.read(buffer)) &gt; -1) {\n                outputStream.write(buffer, 0, count);\n            }\n            return outputStream.toByteArray();\n        } finally {\n            zis.closeEntry();\n    \n\n}\n}\n</code></pre>\n<p>everything works good on my local PC with windows, but if i deploy it on server i got</p>\n<pre><code>java.util.zip.ZipException: invalid distance too far back\n</code></pre>\n<p>dont understand what is going wrong and how to fix i. Please help</p>\n<p>ps. stacktrace</p>\n<p><a href=\"https://i.stack.imgur.com/RiOqe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RiOqe.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>org.springframework.retry.RetryException: Non-skippable exception in recoverer while processing; nested exception is java.util.zip.ZipException: invalid distance too far back\n        at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor$2.recover(FaultTolerantChunkProcessor.java:299) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.retry.support.RetryTemplate.handleRetryExhausted(RetryTemplate.java:539) ~[spring-retry-1.3.3.jar!/:na]\n        at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:387) ~[spring-retry-1.3.3.jar!/:na]\n        at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:255) ~[spring-retry-1.3.3.jar!/:na]\n        at org.springframework.batch.core.step.item.BatchRetryTemplate.execute(BatchRetryTemplate.java:217) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor.transform(FaultTolerantChunkProcessor.java:308) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.23.jar!/:5.3.23]\n        at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:139) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\nCaused by: java.util.zip.ZipException: invalid distance too far back\n        at java.base/java.util.zip.InflaterInputStream.read(Unknown Source) ~[na:na]\n        at java.base/java.util.zip.ZipInputStream.read(Unknown Source) ~[na:na]\n        at java.base/java.util.zip.ZipInputStream.closeEntry(Unknown Source) ~[na:na]\n        at ftp.utils.FileUtils.readZipEntry(FileUtils.java:18)\n</code></pre>\n"},{"tags":["java","spring","grpc"],"answers":[{"tags":[],"owner":{"account_id":27985045,"reputation":1,"user_id":21372081,"display_name":"付后钰"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678464929,"creation_date":1678464682,"answer_id":75698462,"question_id":75498501,"body_markdown":"Since autoconfiguration changed in springboot 3, META-INF/spring.factories was updated to META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports.\r\nThe update prevented grpc-client from autowiring.\r\nOn the latest master branch, the automatic assembly of springboot3 has been added. You can download the source code and compile and install it.\r\n\r\n[source code][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0yQ4z.jpg","title":"@GrpcClient is null spring boot 3","body":"<p>Since autoconfiguration changed in springboot 3, META-INF/spring.factories was updated to META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports.\nThe update prevented grpc-client from autowiring.\nOn the latest master branch, the automatic assembly of springboot3 has been added. You can download the source code and compile and install it.</p>\n<p><a href=\"https://i.stack.imgur.com/0yQ4z.jpg\" rel=\"nofollow noreferrer\">source code</a></p>\n"},{"tags":[],"owner":{"account_id":12614140,"reputation":66,"user_id":9172198,"display_name":"Moh3n Sadeghi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1683228055,"creation_date":1683103885,"answer_id":76162025,"question_id":75498501,"body_markdown":"Based on [this issue][1] you must use the following configuration in your project :\r\n\r\n    import org.springframework.boot.autoconfigure.ImportAutoConfiguration;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    @ImportAutoConfiguration({\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientMetricAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientHealthAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientSecurityAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientTraceAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcDiscoveryClientAutoConfiguration.class,\r\n    \r\n            net.devh.boot.grpc.common.autoconfigure.GrpcCommonCodecAutoConfiguration.class,\r\n            net.devh.boot.grpc.common.autoconfigure.GrpcCommonTraceAutoConfiguration.class,\r\n    \r\n            net.devh.boot.grpc.server.autoconfigure.GrpcAdviceAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcHealthServiceAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataConsulConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataEurekaConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataNacosConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataZookeeperConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcReflectionServiceAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerFactoryAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerMetricAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerSecurityAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerTraceAutoConfiguration.class\r\n    })\r\n    public class GrpcConfig {\r\n    }\r\n\r\n\r\n  [1]: https://github.com/yidongnan/grpc-spring-boot-starter/issues/823","title":"@GrpcClient is null spring boot 3","body":"<p>Based on <a href=\"https://github.com/yidongnan/grpc-spring-boot-starter/issues/823\" rel=\"noreferrer\">this issue</a> you must use the following configuration in your project :</p>\n<pre><code>import org.springframework.boot.autoconfigure.ImportAutoConfiguration;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ImportAutoConfiguration({\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientMetricAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientHealthAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientSecurityAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientTraceAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcDiscoveryClientAutoConfiguration.class,\n\n        net.devh.boot.grpc.common.autoconfigure.GrpcCommonCodecAutoConfiguration.class,\n        net.devh.boot.grpc.common.autoconfigure.GrpcCommonTraceAutoConfiguration.class,\n\n        net.devh.boot.grpc.server.autoconfigure.GrpcAdviceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcHealthServiceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataConsulConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataEurekaConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataNacosConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataZookeeperConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcReflectionServiceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerFactoryAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerMetricAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerSecurityAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerTraceAutoConfiguration.class\n})\npublic class GrpcConfig {\n}\n</code></pre>\n"}],"owner":{"account_id":21417136,"reputation":2183,"user_id":15777370,"display_name":"vszholobov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1691,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76162025,"answer_count":2,"score":3,"last_activity_date":1683228055,"creation_date":1676790067,"question_id":75498501,"body_markdown":"I am making grpc client using `net.devh.grpc-client-spring-boot-starter`\r\n\r\nClient:\r\n```\r\n@Service\r\npublic class SystemService {\r\n    @GrpcClient(&quot;handyman-client&quot;)\r\n    StatusServiceGrpc.StatusServiceBlockingStub handymanClient;\r\n\r\n    public VersionResponse getHandymanVersion() {\r\n        return handymanClient.getVersion(Empty.newBuilder().build());\r\n    }\r\n}\r\n```\r\napplication.yaml:\r\n```\r\ngrpc:\r\n  client:\r\n    handyman-client:\r\n      address: static://localhost:8080\r\n      negotiationType: plaintext\r\n```\r\n\r\nIn runtime `handymanClient` is `null`. Tried spring boot versions from `3.0.0` to `3.0.2`. Lowering the spring boot version to `2.7.0` solves the problem - the client is being created now. \r\n\r\nIs there a workaround to make it work on spring boot 3?\r\n\r\nbuild.gradle:\r\n&lt;!-- begin snippet: js hide: true console: true babel: false --&gt;\r\n&lt;!-- language: lang-js --&gt;\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.0.0&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n    id &quot;com.google.protobuf&quot; version &quot;0.9.2&quot;\r\n}\r\n\r\ngroup = &#39;hello.grpc&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    implementation &#39;io.micrometer:micrometer-registry-prometheus&#39;\r\n    implementation &#39;javax.annotation:javax.annotation-api:1.3.2&#39;\r\n\r\n    implementation group: &#39;net.devh&#39;, name: &#39;grpc-client-spring-boot-starter&#39;, version: &#39;2.13.0.RELEASE&#39;\r\n    implementation group: &#39;io.grpc&#39;, name: &#39;grpc-stub&#39;, version: &#39;1.53.0&#39;\r\n    implementation group: &#39;io.grpc&#39;, name: &#39;grpc-protobuf&#39;, version: &#39;1.53.0&#39;\r\n\r\n}\r\n\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDirs &#39;build/generated/source/proto/main/grpc&#39;\r\n            srcDirs &#39;build/generated/source/proto/main/java&#39;\r\n        }\r\n    }\r\n}\r\n\r\nprotobuf {\r\n    protoc {\r\n        artifact = &#39;com.google.protobuf:protoc:4.0.0-rc-2&#39;\r\n    }\r\n    plugins {\r\n        grpc {\r\n            artifact = &#39;io.grpc:protoc-gen-grpc-java:1.53.0&#39;\r\n        }\r\n    }\r\n    generateProtoTasks {\r\n        all()*.plugins {\r\n\t\t\tgrpc {}\r\n        }\r\n    }\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\nspringBoot {\r\n    buildInfo()\r\n}\r\n&lt;!-- end snippet --&gt;","title":"@GrpcClient is null spring boot 3","body":"<p>I am making grpc client using <code>net.devh.grpc-client-spring-boot-starter</code></p>\n<p>Client:</p>\n<pre><code>@Service\npublic class SystemService {\n    @GrpcClient(&quot;handyman-client&quot;)\n    StatusServiceGrpc.StatusServiceBlockingStub handymanClient;\n\n    public VersionResponse getHandymanVersion() {\n        return handymanClient.getVersion(Empty.newBuilder().build());\n    }\n}\n</code></pre>\n<p>application.yaml:</p>\n<pre><code>grpc:\n  client:\n    handyman-client:\n      address: static://localhost:8080\n      negotiationType: plaintext\n</code></pre>\n<p>In runtime <code>handymanClient</code> is <code>null</code>. Tried spring boot versions from <code>3.0.0</code> to <code>3.0.2</code>. Lowering the spring boot version to <code>2.7.0</code> solves the problem - the client is being created now.</p>\n<p>Is there a workaround to make it work on spring boot 3?</p>\n<p>build.gradle:\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>plugins {\nid 'java'\nid 'org.springframework.boot' version '3.0.0'\nid 'io.spring.dependency-management' version '1.1.0'\nid \"com.google.protobuf\" version \"0.9.2\"\n}\n\ngroup = 'hello.grpc'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nconfigurations {\ncompileOnly {\n    extendsFrom annotationProcessor\n}\n}\n\nrepositories {\nmavenCentral()\n}\n\ndependencies {\nimplementation 'org.springframework.boot:spring-boot-starter-actuator'\nimplementation 'org.springframework.boot:spring-boot-starter-web'\ncompileOnly 'org.projectlombok:lombok'\nannotationProcessor 'org.projectlombok:lombok'\ntestImplementation 'org.springframework.boot:spring-boot-starter-test'\nimplementation 'io.micrometer:micrometer-registry-prometheus'\nimplementation 'javax.annotation:javax.annotation-api:1.3.2'\n\nimplementation group: 'net.devh', name: 'grpc-client-spring-boot-starter', version: '2.13.0.RELEASE'\nimplementation group: 'io.grpc', name: 'grpc-stub', version: '1.53.0'\nimplementation group: 'io.grpc', name: 'grpc-protobuf', version: '1.53.0'\n\n}\n\nsourceSets {\nmain {\n    java {\n        srcDirs 'build/generated/source/proto/main/grpc'\n        srcDirs 'build/generated/source/proto/main/java'\n    }\n}\n}\n\nprotobuf {\nprotoc {\n    artifact = 'com.google.protobuf:protoc:4.0.0-rc-2'\n}\nplugins {\n    grpc {\n        artifact = 'io.grpc:protoc-gen-grpc-java:1.53.0'\n    }\n}\ngenerateProtoTasks {\n    all()*.plugins {\n        grpc {}\n    }\n}\n}\n\ntasks.named('test') {\nuseJUnitPlatform()\n}\n\nspringBoot {\nbuildInfo()\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","internet-explorer","applet"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683181239,"post_id":76170081,"comment_id":134327556,"body_markdown":"Maybe JRE (Java Runtime Environment) might not have been set-up properly on your machine.  Try links on this test page - https://www.w3.org/People/mimasa/test/object/java/ - Do those links show up the details as expected, if not, definitely some JRE related issue is there.  Uninstall Java and install JRE again.","body":"Maybe JRE (Java Runtime Environment) might not have been set-up properly on your machine.  Try links on this test page - <a href=\"https://www.w3.org/People/mimasa/test/object/java/\" rel=\"nofollow noreferrer\">w3.org/People/mimasa/test/object/java</a> - Do those links show up the details as expected, if not, definitely some JRE related issue is there.  Uninstall Java and install JRE again."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683181325,"post_id":76170081,"comment_id":134327566,"body_markdown":"Also, Internet Explorer is an out-dated browser.  Try using Edge, Chrome, &amp; Firefox, etc. actively managed browsers.","body":"Also, Internet Explorer is an out-dated browser.  Try using Edge, Chrome, &amp; Firefox, etc. actively managed browsers."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683202726,"post_id":76170081,"comment_id":134332305,"body_markdown":"Java applets are deprecated technology.  They were officially deprecated by Oracle in Java 9, and well know to be problematic for a long time before that.  The only browser that still supports Applets is Internet Explorer, and IE has been EOL since June 14, 2022.  You really should stop using applets ...","body":"Java applets are deprecated technology.  They were officially deprecated by Oracle in Java 9, and well know to be problematic for a long time before that.  The only browser that still supports Applets is Internet Explorer, and IE has been EOL since June 14, 2022.  You really should stop using applets ..."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683202812,"post_id":76170081,"comment_id":134332331,"body_markdown":"https://www.java.com/en/download/help/enable_browser.html explains how to enable Java in IE.","body":"<a href=\"https://www.java.com/en/download/help/enable_browser.html\" rel=\"nofollow noreferrer\">java.com/en/download/help/enable_browser.html</a> explains how to enable Java in IE."}],"owner":{"account_id":26814570,"reputation":1,"user_id":20404688,"display_name":"Yu Sinae"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683227975,"creation_date":1683180985,"question_id":76170081,"body_markdown":"I got this message when I tried to open a Java applet page in IE.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nalert message for running applet\r\n\r\nI set internet option settings, and checked Java(JRE), and script, HTML applet code, file existing on directory.\r\n\r\nBut it is not working. Something strange is.  In some desktops, it&#39;s working.\r\n\r\nI compared setting options(window control \\&gt; JAVA, browser settings), but it looks the same.\r\n\r\nWhat is the problem and solution?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CC9OP.jpg","title":"Java applet is not working in Internet Explorer","body":"<p>I got this message when I tried to open a Java applet page in IE.</p>\n<p><a href=\"https://i.stack.imgur.com/CC9OP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CC9OP.jpg\" alt=\"enter image description here\" /></a></p>\n<p>alert message for running applet</p>\n<p>I set internet option settings, and checked Java(JRE), and script, HTML applet code, file existing on directory.</p>\n<p>But it is not working. Something strange is.  In some desktops, it's working.</p>\n<p>I compared setting options(window control &gt; JAVA, browser settings), but it looks the same.</p>\n<p>What is the problem and solution?</p>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683165722,"post_id":76169063,"comment_id":134325992,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":5849714,"reputation":86,"user_id":5362509,"display_name":"Lakshmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683216153,"creation_date":1683216153,"answer_id":76175153,"question_id":76169063,"body_markdown":"Yes. It can be a cardview.\r\nHere is the .xml code for each item in the list.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n        &lt;androidx.cardview.widget.CardView\r\n            android:elevation=&quot;5dp&quot;\r\n            app:cardUseCompatPadding=&quot;true&quot;\r\n            app:cardCornerRadius=&quot;10dp&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;horizontal&quot;\r\n                android:padding=&quot;5dp&quot;&gt;\r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/imageView&quot;\r\n                    android:src=&quot;@drawable/ic_time&quot;\r\n                    android:layout_gravity=&quot;start&quot;\r\n                    android:layout_width=&quot;60dp&quot;\r\n                    android:layout_height=&quot;60dp&quot;/&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/textView&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Time&quot;\r\n                    android:paddingHorizontal=&quot;20dp&quot;\r\n                    android:layout_gravity=&quot;end|center_vertical&quot;\r\n                    android:textSize=&quot;20dp&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nYou can work on the aesthetics. I have just added a &#39;Time&#39; icon and text &quot;Time&quot; as an example. \r\n\r\nThen add a RecyclerView in your Activity layout and create an Adapter with the above layout for each item in the list. Lastly, set the RecyclerView to that adapter.\r\n","title":"Box option how to create this like Telegram","body":"<p>Yes. It can be a cardview.\nHere is the .xml code for each item in the list.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n    &lt;androidx.cardview.widget.CardView\n        android:elevation=&quot;5dp&quot;\n        app:cardUseCompatPadding=&quot;true&quot;\n        app:cardCornerRadius=&quot;10dp&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;horizontal&quot;\n            android:padding=&quot;5dp&quot;&gt;\n            &lt;ImageView\n                android:id=&quot;@+id/imageView&quot;\n                android:src=&quot;@drawable/ic_time&quot;\n                android:layout_gravity=&quot;start&quot;\n                android:layout_width=&quot;60dp&quot;\n                android:layout_height=&quot;60dp&quot;/&gt;\n            &lt;TextView\n                android:id=&quot;@+id/textView&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;Time&quot;\n                android:paddingHorizontal=&quot;20dp&quot;\n                android:layout_gravity=&quot;end|center_vertical&quot;\n                android:textSize=&quot;20dp&quot;/&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/androidx.cardview.widget.CardView&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>You can work on the aesthetics. I have just added a 'Time' icon and text &quot;Time&quot; as an example.</p>\n<p>Then add a RecyclerView in your Activity layout and create an Adapter with the above layout for each item in the list. Lastly, set the RecyclerView to that adapter.</p>\n"}],"owner":{"account_id":7091991,"reputation":3,"user_id":19001425,"display_name":"Hamza Aladwan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76175153,"answer_count":1,"score":-1,"last_activity_date":1683227861,"creation_date":1683165297,"question_id":76169063,"body_markdown":"![enter image description here](https://i.stack.imgur.com/x1h55.png)\r\n\r\n\r\n\r\nHow do I design like this (options box) when I click on a message in my application, please write the XML part \r\n\r\nCan it be a card View that carries several elements? ","title":"Box option how to create this like Telegram","body":"<p><img src=\"https://i.stack.imgur.com/x1h55.png\" alt=\"enter image description here\" /></p>\n<p>How do I design like this (options box) when I click on a message in my application, please write the XML part</p>\n<p>Can it be a card View that carries several elements?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683025010,"post_id":76154088,"comment_id":134300091,"body_markdown":"Please read: [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question)","body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why not upload images of code/errors when asking a question?</a>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683025077,"post_id":76154088,"comment_id":134300095,"body_markdown":"&quot;*`logging.level.=DEBUG`*&quot; - The trailing `.` before the `=` seems wrong.","body":"&quot;<i><code>logging.level.=DEBUG</code></i>&quot; - The trailing <code>.</code> before the <code>=</code> seems wrong."},{"owner":{"account_id":28003343,"reputation":47,"user_id":21387155,"display_name":"cokachi"},"score":0,"creation_date":1683027174,"post_id":76154088,"comment_id":134300511,"body_markdown":"anyone here to sort this out?","body":"anyone here to sort this out?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683040128,"post_id":76154088,"comment_id":134303799,"body_markdown":"&quot;*Also i have another issue with this docker file ...*&quot; - Please read: [Can I ask only one question per post?](https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post)","body":"&quot;<i>Also i have another issue with this docker file ...</i>&quot; - Please read: <a href=\"https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post\">Can I ask only one question per post?</a>"}],"answers":[{"tags":[],"owner":{"account_id":28003343,"reputation":47,"user_id":21387155,"display_name":"cokachi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683227735,"creation_date":1683039417,"answer_id":76156182,"question_id":76154088,"body_markdown":"```\r\nFROM maven:3.8.3-openjdk-8-slim\r\n\r\nWORKDIR /app\r\n\r\nCOPY src /app/src\r\nCOPY pom.xml /app\r\nRUN mvn -f pom.xml clean package\r\n\r\nWORKDIR /app/target\r\nEXPOSE 8080 \r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/target/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\r\n\r\n```\r\n\r\nThis docker file resolved my build failure issue after some trial and error.","title":"error during input validation with log4j2 dependecy","body":"<pre><code>FROM maven:3.8.3-openjdk-8-slim\n\nWORKDIR /app\n\nCOPY src /app/src\nCOPY pom.xml /app\nRUN mvn -f pom.xml clean package\n\nWORKDIR /app/target\nEXPOSE 8080 \nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/target/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\n\n</code></pre>\n<p>This docker file resolved my build failure issue after some trial and error.</p>\n"}],"owner":{"account_id":28003343,"reputation":47,"user_id":21387155,"display_name":"cokachi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76156182,"answer_count":1,"score":0,"last_activity_date":1683227735,"creation_date":1683024535,"question_id":76154088,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\ni was wonder how to change to debug so that i can get the stacktrace,\r\n\r\n\r\n\r\n\r\n\r\ni have tried various properties to get it but none of them is working.\r\nthe project is a sample restcontroller that takes usersid as input and logs it in the console.\r\ni have dockerized this appilcation.\r\ni want to know what java version and other versions so that i can learn about the logging cve&#39;s\r\n\r\nAlso i have another issue with this docker file\r\n\r\n```\r\nFROM maven:3.8.3-openjdk-8-slim\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nWORKDIR /app\r\n\r\n\r\nCOPY src /app\r\nCOPY mvnw /app\r\nCOPY pom.xml /app\r\nCOPY mvnw.cmd /app\r\nRUN mvn clean package spring-boot:repackage\r\n\r\nWORKDIR /app/target\r\nEXPOSE 8080 \r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\r\n\r\n```\r\n\r\ni am getting build error in this particular case.\r\n\r\n```\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  01:00 min\r\n[INFO] Finished at: 2023-05-02T11:06:47Z\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage (repackage) on project log4jexample: Execution repackage of goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage failed: Unable to find main class -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\r\nThe command &#39;/bin/sh -c mvn clean package spring-boot:repackage&#39; returned a non-zero code: 1\r\n```","title":"error during input validation with log4j2 dependecy","body":"<p>[![enter image description here][1]][1]</p>\n<p>i was wonder how to change to debug so that i can get the stacktrace,</p>\n<p>i have tried various properties to get it but none of them is working.\nthe project is a sample restcontroller that takes usersid as input and logs it in the console.\ni have dockerized this appilcation.\ni want to know what java version and other versions so that i can learn about the logging cve's</p>\n<p>Also i have another issue with this docker file</p>\n<pre><code>FROM maven:3.8.3-openjdk-8-slim\n\n\n\n\n\n\n\nWORKDIR /app\n\n\nCOPY src /app\nCOPY mvnw /app\nCOPY pom.xml /app\nCOPY mvnw.cmd /app\nRUN mvn clean package spring-boot:repackage\n\nWORKDIR /app/target\nEXPOSE 8080 \nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\n\n</code></pre>\n<p>i am getting build error in this particular case.</p>\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  01:00 min\n[INFO] Finished at: 2023-05-02T11:06:47Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage (repackage) on project log4jexample: Execution repackage of goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage failed: Unable to find main class -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\nThe command '/bin/sh -c mvn clean package spring-boot:repackage' returned a non-zero code: 1\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":5730202,"reputation":1185,"user_id":4525976,"display_name":"Theo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439242080,"creation_date":1439241338,"answer_id":31929321,"question_id":31929118,"body_markdown":"First of all, where is your button onClick listener? This is where you should add your methods.\r\n\r\n    Button button = (Button)this.findViewById(R.id.funny_sayings_button);\r\n    \r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n       \r\n                     changeFunnySayingsButton (v);\r\n                }\r\n            }); \r\n\r\nTo continue with you could create an ArrayList of Strings. You add all of your strings and then simply pick one at random from the list. Hint:\r\n\r\n    //will choose a random number between 0 and the length of the list - 1\r\n    int i = rand.nextInt(yourList.size()); \r\n    String yourFunnyString=yourList.get(i);\r\n\r\nIf you also want to display an image alongside with the String you should also create a map. Use the String as a key. When you select from yourList then use this key to select the value (your image) from the map. \r\n\r\nIt should be fairly straightforward to do.","title":"Android: Making a Button Display Silly Text","body":"<p>First of all, where is your button onClick listener? This is where you should add your methods.</p>\n\n<pre><code>Button button = (Button)this.findViewById(R.id.funny_sayings_button);\n\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                 changeFunnySayingsButton (v);\n            }\n        }); \n</code></pre>\n\n<p>To continue with you could create an ArrayList of Strings. You add all of your strings and then simply pick one at random from the list. Hint:</p>\n\n<pre><code>//will choose a random number between 0 and the length of the list - 1\nint i = rand.nextInt(yourList.size()); \nString yourFunnyString=yourList.get(i);\n</code></pre>\n\n<p>If you also want to display an image alongside with the String you should also create a map. Use the String as a key. When you select from yourList then use this key to select the value (your image) from the map. </p>\n\n<p>It should be fairly straightforward to do.</p>\n"},{"tags":[],"owner":{"account_id":6734695,"reputation":734,"user_id":5189887,"display_name":"Bobby StJacques"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439241503,"creation_date":1439241503,"answer_id":31929365,"question_id":31929118,"body_markdown":"I think that you&#39;re on the right track thinking about using a data structure like an `ArrayList`.\r\n\r\nI&#39;d start by making a class to represent each funny thing, e.g. \r\n\r\n    public class FunnyThing {\r\n      private String phrase; // I&#39;d use a resource ID here\r\n      private int drawableResourceId;\r\n    }\r\n\r\nThen it&#39;s a matter of initializing the set of `FunnyThing` objects and storing them in your data structure.  You could do this in the `onCreate` method of your activity, but you may want to consider writing a factory method somewhere else (e.g. the `FunnyThing` class) that your activity just calls to keep the code from getting cluttered when there are more than 2-3 funny things.\r\n\r\nFinally, on each button press you can choose a random index in your collection of `FunnyThing`s and display that, e.g. \r\n\r\n    private void displayRandomFunnyThing() {\r\n      // assumes you have a java.util.Random instance vairable named mRandom\r\n      FunnyThing ft = mFunnyThings.get( mRandom.nextInt( mFunnyThings.size());\r\n      displayAnswer( ft.phrase );\r\n      displayImage( ft.drawableResourceId);\r\n    }\r\n\r\nOf course you&#39;ll need to add an `onClickListener` to your button, but I&#39;m assuming that you left that code out for brevity.\r\n\r\nYou&#39;ll also have the problem that the phrase selection is random, so you may get the same phrase many times before you see all of them.  If you want to prevent duplicates, well, that will take more code.","title":"Android: Making a Button Display Silly Text","body":"<p>I think that you're on the right track thinking about using a data structure like an <code>ArrayList</code>.</p>\n\n<p>I'd start by making a class to represent each funny thing, e.g. </p>\n\n<pre><code>public class FunnyThing {\n  private String phrase; // I'd use a resource ID here\n  private int drawableResourceId;\n}\n</code></pre>\n\n<p>Then it's a matter of initializing the set of <code>FunnyThing</code> objects and storing them in your data structure.  You could do this in the <code>onCreate</code> method of your activity, but you may want to consider writing a factory method somewhere else (e.g. the <code>FunnyThing</code> class) that your activity just calls to keep the code from getting cluttered when there are more than 2-3 funny things.</p>\n\n<p>Finally, on each button press you can choose a random index in your collection of <code>FunnyThing</code>s and display that, e.g. </p>\n\n<pre><code>private void displayRandomFunnyThing() {\n  // assumes you have a java.util.Random instance vairable named mRandom\n  FunnyThing ft = mFunnyThings.get( mRandom.nextInt( mFunnyThings.size());\n  displayAnswer( ft.phrase );\n  displayImage( ft.drawableResourceId);\n}\n</code></pre>\n\n<p>Of course you'll need to add an <code>onClickListener</code> to your button, but I'm assuming that you left that code out for brevity.</p>\n\n<p>You'll also have the problem that the phrase selection is random, so you may get the same phrase many times before you see all of them.  If you want to prevent duplicates, well, that will take more code.</p>\n"}],"owner":{"account_id":6484194,"reputation":21,"user_id":5020301,"display_name":"Deborah Hearne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683227699,"creation_date":1439240578,"question_id":31929118,"body_markdown":"I am creating an app in Android where I have a button that displays silly phrases when pressed.\r\n\r\nI figured out how to get it to say two phrases but I can&#39;t figure out how to make it do more.\r\n\r\nI also want to add in a feature to have the button pick phrases at random instead of going in the order I set.\r\n\r\nI am thinking of using an array list for this.\r\n\r\nHow do I set the button to cycle through different methods in Android Studio?  \r\n\r\nI also want you to know that I am a beginner so please don&#39;t be too hard on me.\r\n\r\nThis is my XML:\r\n\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\r\n        android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;ImageView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/funny_imageview&quot;\r\n            android:scaleType=&quot;fitCenter&quot; /&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/funny_textview&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:text=&quot;&quot;/&gt;\r\n        &lt;Button\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/funny_sayings_button&quot;\r\n            android:text=&quot;Click Me!&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:onClick=&quot;changeFunnySayingsButton&quot;/&gt;\r\n    &lt;/LinearLayout&gt; \r\n\r\nThis is my Java:\r\n\r\n    package com.example.android.funnysayingsbutton;\r\n    \r\n    import android.os.Bundle;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.view.View;\r\n    import android.widget.ImageView;\r\n    import android.widget.TextView;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    boolean clicked = false;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n        }\r\n    \r\n        /**\r\n         * This method changes the funny text and image on the screen when the button is clicked.\r\n         */\r\n        public void changeFunnySayingsButton (View view){\r\n            if (clicked){\r\n                funnySayingOne();\r\n                clicked = false;\r\n            }\r\n            else {\r\n                funnySayingTwo();\r\n                clicked = true;\r\n            }\r\n    \r\n        }\r\n    \r\n        /**\r\n         * This method is for the first funny expression.\r\n         */\r\n        public void funnySayingOne(){\r\n            displayAnswer(&quot;Time to Monkey Around&quot;);\r\n            displayImage(R.drawable.monkey);\r\n        }\r\n        /**\r\n         * This method is for the second funny expression.\r\n         */\r\n        public void funnySayingTwo(){\r\n            displayAnswer(&quot;Penguin Party Time&quot;);\r\n            displayImage(R.drawable.penguin);\r\n        }\r\n    \r\n        /**\r\n         * This method is for the third funny expression.\r\n         */\r\n        public void funnySayingThree(){\r\n            displayAnswer(&quot;It&#39;s Rabbit Season.&quot;);\r\n            displayImage(R.drawable.rabbit);\r\n        }\r\n    \r\n        /**\r\n         * This method displays the funny text on the screen.\r\n         */\r\n        private void displayAnswer(String answer) {\r\n            TextView questionTextView = (TextView)    findViewById(R.id.funny_textview);\r\n            questionTextView.setText(answer);\r\n        }\r\n    \r\n        /**\r\n         * This method displays the funny image on the screen.\r\n         */\r\n        private void displayImage(int picture) {\r\n            ImageView questionTextView = (ImageView)    findViewById(R.id.funny_imageview);\r\n            questionTextView.setImageResource(picture);\r\n        }\r\n    \r\n    \r\n    }\r\n\r\n   ","title":"Android: Making a Button Display Silly Text","body":"<p>I am creating an app in Android where I have a button that displays silly phrases when pressed.</p>\n<p>I figured out how to get it to say two phrases but I can't figure out how to make it do more.</p>\n<p>I also want to add in a feature to have the button pick phrases at random instead of going in the order I set.</p>\n<p>I am thinking of using an array list for this.</p>\n<p>How do I set the button to cycle through different methods in Android Studio?</p>\n<p>I also want you to know that I am a beginner so please don't be too hard on me.</p>\n<p>This is my XML:</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\n    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\n    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\n    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;ImageView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/funny_imageview&quot;\n        android:scaleType=&quot;fitCenter&quot; /&gt;\n    &lt;TextView\n        android:id=&quot;@+id/funny_textview&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        android:text=&quot;&quot;/&gt;\n    &lt;Button\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/funny_sayings_button&quot;\n        android:text=&quot;Click Me!&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        android:onClick=&quot;changeFunnySayingsButton&quot;/&gt;\n&lt;/LinearLayout&gt; \n</code></pre>\n<p>This is my Java:</p>\n<pre><code>package com.example.android.funnysayingsbutton;\n\nimport android.os.Bundle;\nimport android.support.v7.app.AppCompatActivity;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.TextView;\n\npublic class MainActivity extends AppCompatActivity {\nboolean clicked = false;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    /**\n     * This method changes the funny text and image on the screen when the button is clicked.\n     */\n    public void changeFunnySayingsButton (View view){\n        if (clicked){\n            funnySayingOne();\n            clicked = false;\n        }\n        else {\n            funnySayingTwo();\n            clicked = true;\n        }\n\n    }\n\n    /**\n     * This method is for the first funny expression.\n     */\n    public void funnySayingOne(){\n        displayAnswer(&quot;Time to Monkey Around&quot;);\n        displayImage(R.drawable.monkey);\n    }\n    /**\n     * This method is for the second funny expression.\n     */\n    public void funnySayingTwo(){\n        displayAnswer(&quot;Penguin Party Time&quot;);\n        displayImage(R.drawable.penguin);\n    }\n\n    /**\n     * This method is for the third funny expression.\n     */\n    public void funnySayingThree(){\n        displayAnswer(&quot;It's Rabbit Season.&quot;);\n        displayImage(R.drawable.rabbit);\n    }\n\n    /**\n     * This method displays the funny text on the screen.\n     */\n    private void displayAnswer(String answer) {\n        TextView questionTextView = (TextView)    findViewById(R.id.funny_textview);\n        questionTextView.setText(answer);\n    }\n\n    /**\n     * This method displays the funny image on the screen.\n     */\n    private void displayImage(int picture) {\n        ImageView questionTextView = (ImageView)    findViewById(R.id.funny_imageview);\n        questionTextView.setImageResource(picture);\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":2,"creation_date":1683226394,"post_id":76176475,"comment_id":134338359,"body_markdown":"I&#39;m having trouble understanding how you expect to continue performing reads during your upgrade, either.  One would ordinarily take the whole application down during such a maintenance operation.","body":"I&#39;m having trouble understanding how you expect to continue performing reads during your upgrade, either.  One would ordinarily take the whole application down during such a maintenance operation."},{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":1,"creation_date":1683226424,"post_id":76176475,"comment_id":134338365,"body_markdown":"It&#39;s not easy to do with JPA, but you can change the database user&#39;s grant to insert, update and delete rows. If you are using JDBC, most database also accept a readonly parameter to prevent alterations.","body":"It&#39;s not easy to do with JPA, but you can change the database user&#39;s grant to insert, update and delete rows. If you are using JDBC, most database also accept a readonly parameter to prevent alterations."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1683226878,"post_id":76176475,"comment_id":134338465,"body_markdown":"You could also revoke data modification privileges from the user the application authenticates with. However changing the application to not go wild when intended db modifications are requested is the bigger task.","body":"You could also revoke data modification privileges from the user the application authenticates with. However changing the application to not go wild when intended db modifications are requested is the bigger task."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1683228060,"post_id":76176475,"comment_id":134338754,"body_markdown":"https://github.com/alexandre-touret/maintenance-mode   `I_AM_A_TEAPOT` LOL","body":"<a href=\"https://github.com/alexandre-touret/maintenance-mode\" rel=\"nofollow noreferrer\">github.com/alexandre-touret/maintenance-mode</a>   <code>I_AM_A_TEAPOT</code> LOL"},{"owner":{"account_id":4849802,"reputation":1540,"user_id":3912417,"accept_rate":89,"display_name":"joshuatvernon"},"score":0,"creation_date":1683230259,"post_id":76176475,"comment_id":134339163,"body_markdown":"@JohnBollinger I think I was thinking I could use read replicas to keep allowing reads whilst preventing writes","body":"@JohnBollinger I think I was thinking I could use read replicas to keep allowing reads whilst preventing writes"}],"answers":[{"tags":[],"owner":{"account_id":5934812,"reputation":132,"user_id":4668201,"display_name":"L&#233;o"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683227498,"creation_date":1683227498,"answer_id":76176657,"question_id":76176475,"body_markdown":"Not on the application side, but on the database side, you can put a lock on your databases so that the current operations end, but there are no new operations.\r\nhttps://docs.postgresql.fr/15/sql-lock.html\r\n\r\nTo automate this, you can look at the pg_catalog to list the tables to lock","title":"How to prevent JPA saves during database upgrade?","body":"<p>Not on the application side, but on the database side, you can put a lock on your databases so that the current operations end, but there are no new operations.\n<a href=\"https://docs.postgresql.fr/15/sql-lock.html\" rel=\"nofollow noreferrer\">https://docs.postgresql.fr/15/sql-lock.html</a></p>\n<p>To automate this, you can look at the pg_catalog to list the tables to lock</p>\n"}],"owner":{"account_id":4849802,"reputation":1540,"user_id":3912417,"accept_rate":89,"display_name":"joshuatvernon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683227498,"creation_date":1683226202,"question_id":76176475,"body_markdown":"I would like to upgrade my database. It will cause downtime. So I would like to disable JPA saves temporarily using a feature flag. How can I enforce prevention of saves e.g. throw DataIntegrityViolationException whenever code makes it to a save.","title":"How to prevent JPA saves during database upgrade?","body":"<p>I would like to upgrade my database. It will cause downtime. So I would like to disable JPA saves temporarily using a feature flag. How can I enforce prevention of saves e.g. throw DataIntegrityViolationException whenever code makes it to a save.</p>\n"},{"tags":["java","spring","tomcat","catalina","zkteco"],"answers":[{"tags":[],"owner":{"account_id":673865,"reputation":5306,"user_id":889053,"accept_rate":38,"display_name":"Christian Bongiorno"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683227283,"creation_date":1683227283,"answer_id":76176634,"question_id":76176548,"body_markdown":"It&#39;s pretty clear: You don&#39;t have that property defined in any of the typical ways/locations that spring looks. If you were using spring boot, you could put it right on the cli (and, I&#39;d suggest that instead of using tomcat like this).   \r\n\r\nThe simplest way to solve this is to make sure that in the `resources/` directory of your project that gets bundled up into you WAR, you include `application.properties` with this value set:\r\n\r\n```\r\ndatasource.driverClassName=org.mysql.Driver\r\n```\r\n\r\nOr whatever DB you&#39;re using. You also obviously need to make sure you include the dependency for that driver in your project so when the war is build, it&#39;s included\r\n\r\nIf you&#39;ve done this correctly, when you actually deploy you&#39;ll notice that in your `WEBAPPS/${YOUR_APP}` you&#39;ll see the `application.properties` file in the root along with your class files.\r\n\r\nThis should do the trick","title":"Tomcat/Spring webapp running on Windows 10 is unable to start","body":"<p>It's pretty clear: You don't have that property defined in any of the typical ways/locations that spring looks. If you were using spring boot, you could put it right on the cli (and, I'd suggest that instead of using tomcat like this).</p>\n<p>The simplest way to solve this is to make sure that in the <code>resources/</code> directory of your project that gets bundled up into you WAR, you include <code>application.properties</code> with this value set:</p>\n<pre><code>datasource.driverClassName=org.mysql.Driver\n</code></pre>\n<p>Or whatever DB you're using. You also obviously need to make sure you include the dependency for that driver in your project so when the war is build, it's included</p>\n<p>If you've done this correctly, when you actually deploy you'll notice that in your <code>WEBAPPS/${YOUR_APP}</code> you'll see the <code>application.properties</code> file in the root along with your class files.</p>\n<p>This should do the trick</p>\n"}],"owner":{"account_id":28507428,"reputation":11,"user_id":21817903,"display_name":"Chu N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683227283,"creation_date":1683226652,"question_id":76176548,"body_markdown":"ZKTeco BioSecurity (Access Control web based application) running on `java/Tomcat/Spring` is unable to launch.\r\n\r\n$PATH = C:\\Program Files\\BioSecurity\\MainResource\\\r\n\r\nFrom the log files located at `$PATH/tomcat/logs/`, I see the following error:\r\n`org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name &#39;dataSource&#39; defined in class path resource [applicationContext.xml]: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;`\r\n\r\nHowever, I&#39;m a noob at java/Tomcat/Spring and I can&#39;t seem to find the &quot;applicationContext.xml&quot; file in question.\r\nI see &quot;applicationcontext.xml&quot; mentioned in the webapps web.xml file.\r\n\r\n```\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.util.IntrospectorCleanupListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\t&lt;context-param&gt;\r\n\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n\t\t&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\r\n\t&lt;/context-param&gt;\r\n```\r\n\r\n\r\nPlease see the logs below:\r\n\r\n- /tomcat/logs/localhost.2023-05-04.log\r\n  \r\n```\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: No Spring WebApplicationInitializer types detected on classpath\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: excute WebFilterInitializer...\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init shiroFilter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init langSessionFilter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init OAuth2Filter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init OAuth2Filter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init CheckFilter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: Initializing Spring root WebApplicationContext\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext listenerStart\r\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name &#39;dataSource&#39; defined in class path resource [applicationContext.xml]: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;\r\n\tat org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:211)\r\n\tat org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:223)\r\n\tat com.zk.common.util.PropertiesUtil.processProperties(PropertiesUtil.java:88)\r\n\tat org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:86)\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:162)\r\n\tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:611)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\r\n\tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\r\n\tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\r\n\tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\r\n\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1017)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:993)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652)\r\n\tat org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1296)\r\n\tat org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:2039)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:744)\r\nCaused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;\r\n\tat org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:174)\r\n\tat org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126)\r\n\tat org.springframework.beans.factory.config.PropertyPlaceholderConfigurer$PlaceholderResolvingStringValueResolver.resolveStringValue(PropertyPlaceholderConfigurer.java:259)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveStringValue(BeanDefinitionVisitor.java:282)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveValue(BeanDefinitionVisitor.java:204)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.visitPropertyValues(BeanDefinitionVisitor.java:141)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.visitBeanDefinition(BeanDefinitionVisitor.java:82)\r\n\tat org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:208)\r\n\t... 23 more\r\n\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: Closing Spring root WebApplicationContext\r\n```\r\n\r\n- /tomcat/logs/commons-daemon.2023-05-04.log\r\n  \r\n```\r\n[2023-05-04 12:42:05] [info]  [ 6748] Stopping service...\r\n[2023-05-04 12:42:06] [info]  [ 6748] Service stop thread completed.\r\n[2023-05-04 12:42:07] [info]  [ 6008] Run service finished.\r\n[2023-05-04 12:42:07] [info]  [ 6008] Commons Daemon procrun finished\r\n[2023-05-04 12:45:57] [info]  [ 6688] Commons Daemon procrun (1.0.15.0 32-bit) started\r\n[2023-05-04 12:45:57] [info]  [ 6688] Running &#39;BioSecurityTomcat&#39; Service...\r\n[2023-05-04 12:45:57] [info]  [ 2860] Starting service...\r\n[2023-05-04 12:45:58] [info]  [ 2860] Service started in 1356 ms.\r\n```\r\n\r\n- /tomcat/logs/biosecuritytomcat-stderr.2023-05-04.log\r\n  \r\n```\r\n2023-05-04 12:45:57 Commons Daemon procrun stderr initialized\r\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\nINFO: Loaded APR based Apache Tomcat Native library 1.2.16 using APR version 1.6.3.\r\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\r\nINFO: OpenSSL successfully initialized (OpenSSL 1.0.2m  2 Nov 2017)\r\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\r\nINFO: Initializing ProtocolHandler [&quot;http-apr-8088&quot;]\r\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\r\nINFO: Initializing ProtocolHandler [&quot;ajp-apr-8019&quot;]\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.Catalina load\r\nINFO: Initialization processed in 1952 ms\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardService startInternal\r\nINFO: Starting service Catalina\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardEngine startInternal\r\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.88\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.HostConfig deployDirectory\r\nINFO: Deploying web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TaglibUriRule body\r\nINFO: TLD skipped. URI: urn:com:sun:jersey:api:view is already defined\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TldConfig execute\r\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\r\nSEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\r\nSEVERE: Context [] startup failed due to previous errors\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-2] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-3] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-4] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-5] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-6] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-7] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-8] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-9] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-10] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_QuartzSchedulerThread] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.HostConfig deployDirectory\r\nINFO: Deployment of web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT has finished in 30,018 ms\r\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [&quot;http-apr-8088&quot;]\r\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [&quot;ajp-apr-8019&quot;]\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.Catalina start\r\nINFO: Server startup in 30121 ms\r\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\r\nWARNING: Character [[] is not allowed and will continue to be rejected.\r\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\r\nWARNING: Character []] is not allowed and will continue to be rejected.\r\n```\r\n\r\n- /tomcat/logs/biosecuritytomcat-stdout.2023-05-04.log \r\nLeaving out the contents of this log file as it&#39;s chatty. If required please let me know and I&#39;ll post it.\r\n\r\n\r\nI tried restarting the application and capturing the logs. After that, I couldn&#39;t figure out how to resolve it.","title":"Tomcat/Spring webapp running on Windows 10 is unable to start","body":"<p>ZKTeco BioSecurity (Access Control web based application) running on <code>java/Tomcat/Spring</code> is unable to launch.</p>\n<p>$PATH = C:\\Program Files\\BioSecurity\\MainResource\\</p>\n<p>From the log files located at <code>$PATH/tomcat/logs/</code>, I see the following error:\n<code>org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [applicationContext.xml]: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;</code></p>\n<p>However, I'm a noob at java/Tomcat/Spring and I can't seem to find the &quot;applicationContext.xml&quot; file in question.\nI see &quot;applicationcontext.xml&quot; mentioned in the webapps web.xml file.</p>\n<pre><code>    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.util.IntrospectorCleanupListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n</code></pre>\n<p>Please see the logs below:</p>\n<ul>\n<li>/tomcat/logs/localhost.2023-05-04.log</li>\n</ul>\n<pre><code>May 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\nINFO: No Spring WebApplicationInitializer types detected on classpath\nMay 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\nINFO: excute WebFilterInitializer...\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init shiroFilter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init langSessionFilter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init OAuth2Filter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init OAuth2Filter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init CheckFilter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: Initializing Spring root WebApplicationContext\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [applicationContext.xml]: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;\n    at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:211)\n    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:223)\n    at com.zk.common.util.PropertiesUtil.processProperties(PropertiesUtil.java:88)\n    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:86)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:162)\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:611)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1017)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:993)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652)\n    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1296)\n    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:2039)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;\n    at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:174)\n    at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126)\n    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer$PlaceholderResolvingStringValueResolver.resolveStringValue(PropertyPlaceholderConfigurer.java:259)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveStringValue(BeanDefinitionVisitor.java:282)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveValue(BeanDefinitionVisitor.java:204)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.visitPropertyValues(BeanDefinitionVisitor.java:141)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.visitBeanDefinition(BeanDefinitionVisitor.java:82)\n    at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:208)\n    ... 23 more\n\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.ApplicationContext log\nINFO: Closing Spring root WebApplicationContext\n</code></pre>\n<ul>\n<li>/tomcat/logs/commons-daemon.2023-05-04.log</li>\n</ul>\n<pre><code>[2023-05-04 12:42:05] [info]  [ 6748] Stopping service...\n[2023-05-04 12:42:06] [info]  [ 6748] Service stop thread completed.\n[2023-05-04 12:42:07] [info]  [ 6008] Run service finished.\n[2023-05-04 12:42:07] [info]  [ 6008] Commons Daemon procrun finished\n[2023-05-04 12:45:57] [info]  [ 6688] Commons Daemon procrun (1.0.15.0 32-bit) started\n[2023-05-04 12:45:57] [info]  [ 6688] Running 'BioSecurityTomcat' Service...\n[2023-05-04 12:45:57] [info]  [ 2860] Starting service...\n[2023-05-04 12:45:58] [info]  [ 2860] Service started in 1356 ms.\n</code></pre>\n<ul>\n<li>/tomcat/logs/biosecuritytomcat-stderr.2023-05-04.log</li>\n</ul>\n<pre><code>2023-05-04 12:45:57 Commons Daemon procrun stderr initialized\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: Loaded APR based Apache Tomcat Native library 1.2.16 using APR version 1.6.3.\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\nINFO: OpenSSL successfully initialized (OpenSSL 1.0.2m  2 Nov 2017)\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;http-apr-8088&quot;]\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;ajp-apr-8019&quot;]\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 1952 ms\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service Catalina\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.88\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: urn:com:sun:jersey:api:view is already defined\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TldConfig execute\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: Context [] startup failed due to previous errors\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-2] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-3] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-4] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-5] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-6] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-7] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-8] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-9] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-10] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_QuartzSchedulerThread] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deployment of web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT has finished in 30,018 ms\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;http-apr-8088&quot;]\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;ajp-apr-8019&quot;]\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 30121 ms\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\nWARNING: Character [[] is not allowed and will continue to be rejected.\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\nWARNING: Character []] is not allowed and will continue to be rejected.\n</code></pre>\n<ul>\n<li>/tomcat/logs/biosecuritytomcat-stdout.2023-05-04.log\nLeaving out the contents of this log file as it's chatty. If required please let me know and I'll post it.</li>\n</ul>\n<p>I tried restarting the application and capturing the logs. After that, I couldn't figure out how to resolve it.</p>\n"},{"tags":["java","c#","ikvm"],"comments":[{"owner":{"account_id":1036128,"reputation":16307,"user_id":1043380,"accept_rate":80,"display_name":"gunr2171"},"score":2,"creation_date":1683218695,"post_id":76175502,"comment_id":134336690,"body_markdown":"Take a moment to read through the [editing help](/editing-help) in the help center. Formatting on Stack Overflow is different than on other sites. The better your post looks, the easier it is for others to read and understand it.","body":"Take a moment to read through the <a href=\"/editing-help\">editing help</a> in the help center. Formatting on Stack Overflow is different than on other sites. The better your post looks, the easier it is for others to read and understand it."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1683220381,"post_id":76175502,"comment_id":134337083,"body_markdown":"ikvm-7.2.4630.5 and JavaSE-1.7 are old versions, released more than 10 years ago. Is there any particular reason to use them instead of current versions? They are probably full of security vulnerabilities at this time.","body":"ikvm-7.2.4630.5 and JavaSE-1.7 are old versions, released more than 10 years ago. Is there any particular reason to use them instead of current versions? They are probably full of security vulnerabilities at this time."},{"owner":{"account_id":28498287,"reputation":1,"user_id":21809854,"display_name":"Jannat"},"score":1,"creation_date":1683222112,"post_id":76175502,"comment_id":134337459,"body_markdown":"I was directed to this version ikvm-7.2.4630.5 just by searching for solution. Most of the postings are old and I ended up to this old version. I will try the latest versions.","body":"I was directed to this version ikvm-7.2.4630.5 just by searching for solution. Most of the postings are old and I ended up to this old version. I will try the latest versions."}],"owner":{"account_id":28498287,"reputation":1,"user_id":21809854,"display_name":"Jannat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683227103,"creation_date":1683218487,"question_id":76175502,"body_markdown":"I need to use a java jar file in my c# (VS 2019) console application. OS is Windows 10.   \r\nI use **ikvm-7.2.4630.5** and the **dll** file is generated without error. I added reference to  **dll** and **KVM.Open.JDK.Core.dll** ,in **C#** application.  \r\nThe issue happens when using  “**using** ” keyword to import the package. I get the error &quot;*Type or namespace name cannot be found*&quot;.\r\n\r\nI did the following steps:\r\n\r\n1)I wrote a test code to see if I can make it work.\r\n\r\nSimple java class file:\r\n\r\n    package Msg;\r\n    \r\n    public class MyMessage {\r\n  \r\n        public static void WelcomMsg(String msg) {\r\n            System.out.println(&quot;Welcom &quot; + msg);\r\n        }\r\n    \r\n        public static void GoodByMsg(String msg) {\r\n        \tSystem.out.println(&quot;Good Bye &quot; + msg);\r\n        }\r\n    \r\n    }\r\n\r\n2)The jar (msg.jar) file created in JavaSE-1.7 environment (using eclipse )\r\n\r\n3)I can run either of these commands without error to generate dll (in `folder ikvm-7.2.4630.5\\\\bin`):\r\n\r\n    ikvmc -target:library -out:msg.dll -recurse:”./\\*.jar\r\n\r\nor\r\n\r\n    ikvmc -target:library msg.jar\r\n\r\n\\--message after dll is generated ---------------  \r\nIKVM.NET Compiler version 7.2.4630.5  \r\nCopyright (C) 2002-2012 Jeroen Frijters  \r\nhttp://www.ikvm.net/\r\n\r\nmsg.dll is generated.\r\n\r\n4)Added reference to **msg.dll** and **IKVM.Open.JDK.Core.dll** in C# console project (VS 2019).\r\n\r\n5)&quot;using&quot; directive (using Msg;) generating error: **Type or namespace name cannot be found**\r\n\r\nBasically the dll file seems empty.  \r\nAny help will be appreciated. \r\n\r\nthanks\r\n","title":"Why the DLL generated from Java jar file doesn&#39;t show namespace","body":"<p>I need to use a java jar file in my c# (VS 2019) console application. OS is Windows 10.<br />\nI use <strong>ikvm-7.2.4630.5</strong> and the <strong>dll</strong> file is generated without error. I added reference to  <strong>dll</strong> and <strong>KVM.Open.JDK.Core.dll</strong> ,in <strong>C#</strong> application.<br />\nThe issue happens when using  “<strong>using</strong> ” keyword to import the package. I get the error &quot;<em>Type or namespace name cannot be found</em>&quot;.</p>\n<p>I did the following steps:</p>\n<p>1)I wrote a test code to see if I can make it work.</p>\n<p>Simple java class file:</p>\n<pre><code>package Msg;\n\npublic class MyMessage {\n\n    public static void WelcomMsg(String msg) {\n        System.out.println(&quot;Welcom &quot; + msg);\n    }\n\n    public static void GoodByMsg(String msg) {\n        System.out.println(&quot;Good Bye &quot; + msg);\n    }\n\n}\n</code></pre>\n<p>2)The jar (msg.jar) file created in JavaSE-1.7 environment (using eclipse )</p>\n<p>3)I can run either of these commands without error to generate dll (in <code>folder ikvm-7.2.4630.5\\\\bin</code>):</p>\n<pre><code>ikvmc -target:library -out:msg.dll -recurse:”./\\*.jar\n</code></pre>\n<p>or</p>\n<pre><code>ikvmc -target:library msg.jar\n</code></pre>\n<p>--message after dll is generated ---------------<br />\nIKVM.NET Compiler version 7.2.4630.5<br />\nCopyright (C) 2002-2012 Jeroen Frijters<br />\n<a href=\"http://www.ikvm.net/\" rel=\"nofollow noreferrer\">http://www.ikvm.net/</a></p>\n<p>msg.dll is generated.</p>\n<p>4)Added reference to <strong>msg.dll</strong> and <strong>IKVM.Open.JDK.Core.dll</strong> in C# console project (VS 2019).</p>\n<p>5)&quot;using&quot; directive (using Msg;) generating error: <strong>Type or namespace name cannot be found</strong></p>\n<p>Basically the dll file seems empty.<br />\nAny help will be appreciated.</p>\n<p>thanks</p>\n"},{"tags":["java","android","sqlite"],"answers":[{"tags":[],"owner":{"account_id":7162415,"reputation":121,"user_id":5472740,"display_name":"Youssef Wagih"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681996120,"creation_date":1681996120,"answer_id":76064442,"question_id":76059362,"body_markdown":"First, you need to fix the URL of database\r\n\r\n    this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\r\n\r\nto be like below\r\n\r\n    this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3/&quot; + &quot;databases/&quot;\r\n\r\nSecond, you forgot to add the command to create the table itself first **Dictionary** so you need to add on the **void onCreate(SQLiteDatabase sqLiteDatabase)**  the below creation sql command for the table \r\n\r\n        sqLiteDatabase.execSQL(&quot;CREATE TABLE &quot; + tableName + &quot; (&quot;\r\n                + ArabicCol +&quot; TEXT not null);&quot;);","title":"No Such Table Fatal Exception: SQLite","body":"<p>First, you need to fix the URL of database</p>\n<pre><code>this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\n</code></pre>\n<p>to be like below</p>\n<pre><code>this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3/&quot; + &quot;databases/&quot;\n</code></pre>\n<p>Second, you forgot to add the command to create the table itself first <strong>Dictionary</strong> so you need to add on the <strong>void onCreate(SQLiteDatabase sqLiteDatabase)</strong>  the below creation sql command for the table</p>\n<pre><code>    sqLiteDatabase.execSQL(&quot;CREATE TABLE &quot; + tableName + &quot; (&quot;\n            + ArabicCol +&quot; TEXT not null);&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5849714,"reputation":86,"user_id":5362509,"display_name":"Lakshmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683226859,"creation_date":1683226439,"answer_id":76176512,"question_id":76059362,"body_markdown":"Before finding out where the problem is, one mistake you have done. Pls correct it.\r\n\r\nThe path of the database folder is wrong. \r\n\r\n    this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;; \r\n \r\nshould be changed to\r\n\r\n    this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;/databases&quot;;\r\n\r\nAnd I am assuming that you have the file &#39;sample.db&#39; in your resources/assets. Can you cross check if you have it?","title":"No Such Table Fatal Exception: SQLite","body":"<p>Before finding out where the problem is, one mistake you have done. Pls correct it.</p>\n<p>The path of the database folder is wrong.</p>\n<pre><code>this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;; \n</code></pre>\n<p>should be changed to</p>\n<pre><code>this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;/databases&quot;;\n</code></pre>\n<p>And I am assuming that you have the file 'sample.db' in your resources/assets. Can you cross check if you have it?</p>\n"}],"owner":{"account_id":28354311,"reputation":1,"user_id":21685296,"display_name":"new S_N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683226859,"creation_date":1681944643,"question_id":76059362,"body_markdown":"I am beginner in Android. I am making a database through SQLite. I created the Arabic database file and put it in assets folder with the name `sample.db`. Now I am trying to read the database from the assets folder but I&#39;m getting an error and app is crushing. What&#39;s the best way to do this? Any help would be appreciated.\r\n\r\nthis is the code in DbHelper.java\r\n\r\n```\r\npackage ...\r\nimport ...\r\n\r\npublic class DbHelper extends SQLiteOpenHelper {\r\n    String dbName;\r\n    Context context;\r\n    String dbPath;\r\n\r\n    String tableName = &quot;Dictionary&quot;;\r\n    String ArabicCol = &quot;Arabic&quot;;\r\n\r\n    public DbHelper(MainActivity mcontext, String name, int version) {\r\n        super(mcontext, name, null, version);\r\n\r\n\r\n        this.context = mcontext;\r\n        this.dbName = name;\r\n        this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\r\n    }\r\n    @Override\r\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n        if(newVersion&gt;oldVersion)\r\n            CopyDatabase();\r\n    }\r\n    public void CheckDb(){\r\n    SQLiteDatabase CheckDb =  null;\r\n            try {\r\n                String filePath = dbPath + dbName;\r\n\r\n                CheckDb = SQLiteDatabase.openDatabase(filePath, null, 0);\r\n            }catch (Exception e) {\r\n            }\r\n\r\n            if (CheckDb != null) {\r\n                Log.d(&quot;CheckDb&quot;, &quot;Database already exists&quot;);\r\n                CheckDb.close();\r\n            } else {\r\n                CopyDatabase();\r\n            }\r\n        }\r\n        public void CopyDatabase() {\r\n            this.getReadableDatabase();\r\n            try{\r\n                InputStream is = context.getAssets().open(dbName);\r\n                OutputStream os = new FileOutputStream(dbPath + dbName);\r\n\r\n                byte[] buffer = new byte[1024];\r\n\r\n                int len;\r\n                while((len = is.read(buffer))&gt;0){\r\n                    os.write(buffer,0,len);\r\n                }\r\n                os.flush();\r\n                is.close();\r\n                os.close();\r\n            }catch (Exception e) {e.printStackTrace();}\r\n            Log.d(&quot;CopyDb&quot;, &quot;Database Copied&quot;);\r\n        }\r\n        public void OpenDatabase(){\r\n            String filepath = dbPath + dbName;\r\n            SQLiteDatabase.openDatabase(filepath,null,0);\r\n        }\r\n        public ArrayList&lt;String&gt; getArabicWord(String query){\r\n        ArrayList&lt;String&gt; arabicList = new ArrayList&lt;&gt;();\r\n\r\n        SQLiteDatabase sqLiteDatabase = this.getReadableDatabase();\r\n\r\n            Cursor cursor;\r\n            cursor = sqLiteDatabase.query(\r\n                    tableName,\r\n                    new String[]{ArabicCol},\r\n                    ArabicCol + &quot; LIKE ? &quot;,\r\n                    new String[]{query + &quot;%&quot;},\r\n                    null, null,\r\n                    ArabicCol\r\n            );\r\n            int index = cursor.getColumnIndex(ArabicCol);\r\n            while (cursor.moveToNext()){\r\n                arabicList.add(cursor.getString(index));\r\n            }\r\n\r\n            sqLiteDatabase.close();\r\n            cursor.close();\r\n            return arabicList;\r\n        }\r\n}\r\n```\r\n\r\nMainActivity.java\r\n\r\n\r\n```\r\npackage ...\r\nimport ...\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    AutoCompleteTextView autoCompleteTextView;\r\n    DbHelper dbHelper;\r\n\r\n    ArrayList&lt;String&gt; newList;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        autoCompleteTextView = findViewById(R.id.autotxt);\r\n        dbHelper = new DbHelper(this,&quot;sample.db&quot;,1);\r\n        try{\r\n           dbHelper.CheckDb();\r\n           dbHelper.OpenDatabase();\r\n        }catch(Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        newList = new ArrayList&lt;&gt;();\r\n\r\n        autoCompleteTextView.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int i, int i1, int i2) {\r\n                if(s.length() &gt; 0 ){\r\n                    newList.addAll(dbHelper.getArabicWord(s.toString()));\r\n\r\n                    autoCompleteTextView.setAdapter(new ArrayAdapter&lt;&gt;(MainActivity.this, android.R.layout.simple_list_item_1, newList));\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\n```\r\n\r\nthis is part of my logcat\r\n\r\n\r\n\r\n```\r\n(1) no such table: Dictionary in &quot;SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic&quot;\r\n2023-04-20 03:27:40.261 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     D  Shutting down VM\r\n2023-04-20 03:27:40.264 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     E  FATAL EXCEPTION: main\r\n                                                                                                    Process: com.example.e_qtishaddictionary3, PID: 17406\r\n                                                                                                    android.database.sqlite.SQLiteException: no such table: Dictionary (code 1 SQLITE_ERROR[1]): , while compiling: SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic\r\n                                                                                                    \tat \r\n```\r\nand the line concerned\r\n\r\n```\r\nat com.example.e_qtishaddictionary3.DbHelper.getArabicWord(DbHelper.java:84)\r\n                                                                                                    \tat com.example.e_qtishaddictionary3.MainActivity$1.onTextChanged(MainActivity.java:44)\r\n```\r\n\r\n\r\n\r\nI&#39;ve read my code 2 days, but I can&#39;t figure out where I&#39;m wrong. Can you help me? Thanks before. ","title":"No Such Table Fatal Exception: SQLite","body":"<p>I am beginner in Android. I am making a database through SQLite. I created the Arabic database file and put it in assets folder with the name <code>sample.db</code>. Now I am trying to read the database from the assets folder but I'm getting an error and app is crushing. What's the best way to do this? Any help would be appreciated.</p>\n<p>this is the code in DbHelper.java</p>\n<pre><code>package ...\nimport ...\n\npublic class DbHelper extends SQLiteOpenHelper {\n    String dbName;\n    Context context;\n    String dbPath;\n\n    String tableName = &quot;Dictionary&quot;;\n    String ArabicCol = &quot;Arabic&quot;;\n\n    public DbHelper(MainActivity mcontext, String name, int version) {\n        super(mcontext, name, null, version);\n\n\n        this.context = mcontext;\n        this.dbName = name;\n        this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\n    }\n    @Override\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\n\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        if(newVersion&gt;oldVersion)\n            CopyDatabase();\n    }\n    public void CheckDb(){\n    SQLiteDatabase CheckDb =  null;\n            try {\n                String filePath = dbPath + dbName;\n\n                CheckDb = SQLiteDatabase.openDatabase(filePath, null, 0);\n            }catch (Exception e) {\n            }\n\n            if (CheckDb != null) {\n                Log.d(&quot;CheckDb&quot;, &quot;Database already exists&quot;);\n                CheckDb.close();\n            } else {\n                CopyDatabase();\n            }\n        }\n        public void CopyDatabase() {\n            this.getReadableDatabase();\n            try{\n                InputStream is = context.getAssets().open(dbName);\n                OutputStream os = new FileOutputStream(dbPath + dbName);\n\n                byte[] buffer = new byte[1024];\n\n                int len;\n                while((len = is.read(buffer))&gt;0){\n                    os.write(buffer,0,len);\n                }\n                os.flush();\n                is.close();\n                os.close();\n            }catch (Exception e) {e.printStackTrace();}\n            Log.d(&quot;CopyDb&quot;, &quot;Database Copied&quot;);\n        }\n        public void OpenDatabase(){\n            String filepath = dbPath + dbName;\n            SQLiteDatabase.openDatabase(filepath,null,0);\n        }\n        public ArrayList&lt;String&gt; getArabicWord(String query){\n        ArrayList&lt;String&gt; arabicList = new ArrayList&lt;&gt;();\n\n        SQLiteDatabase sqLiteDatabase = this.getReadableDatabase();\n\n            Cursor cursor;\n            cursor = sqLiteDatabase.query(\n                    tableName,\n                    new String[]{ArabicCol},\n                    ArabicCol + &quot; LIKE ? &quot;,\n                    new String[]{query + &quot;%&quot;},\n                    null, null,\n                    ArabicCol\n            );\n            int index = cursor.getColumnIndex(ArabicCol);\n            while (cursor.moveToNext()){\n                arabicList.add(cursor.getString(index));\n            }\n\n            sqLiteDatabase.close();\n            cursor.close();\n            return arabicList;\n        }\n}\n</code></pre>\n<p>MainActivity.java</p>\n<pre><code>package ...\nimport ...\n\npublic class MainActivity extends AppCompatActivity {\n    AutoCompleteTextView autoCompleteTextView;\n    DbHelper dbHelper;\n\n    ArrayList&lt;String&gt; newList;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        autoCompleteTextView = findViewById(R.id.autotxt);\n        dbHelper = new DbHelper(this,&quot;sample.db&quot;,1);\n        try{\n           dbHelper.CheckDb();\n           dbHelper.OpenDatabase();\n        }catch(Exception e) {\n            e.printStackTrace();\n        }\n\n        newList = new ArrayList&lt;&gt;();\n\n        autoCompleteTextView.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence s, int i, int i1, int i2) {\n\n            }\n\n            @Override\n            public void onTextChanged(CharSequence s, int i, int i1, int i2) {\n                if(s.length() &gt; 0 ){\n                    newList.addAll(dbHelper.getArabicWord(s.toString()));\n\n                    autoCompleteTextView.setAdapter(new ArrayAdapter&lt;&gt;(MainActivity.this, android.R.layout.simple_list_item_1, newList));\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable s) {\n\n            }\n        });\n\n    }\n}\n</code></pre>\n<p>this is part of my logcat</p>\n<pre><code>(1) no such table: Dictionary in &quot;SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic&quot;\n2023-04-20 03:27:40.261 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     D  Shutting down VM\n2023-04-20 03:27:40.264 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     E  FATAL EXCEPTION: main\n                                                                                                    Process: com.example.e_qtishaddictionary3, PID: 17406\n                                                                                                    android.database.sqlite.SQLiteException: no such table: Dictionary (code 1 SQLITE_ERROR[1]): , while compiling: SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic\n                                                                                                        at \n</code></pre>\n<p>and the line concerned</p>\n<pre><code>at com.example.e_qtishaddictionary3.DbHelper.getArabicWord(DbHelper.java:84)\n                                                                                                        at com.example.e_qtishaddictionary3.MainActivity$1.onTextChanged(MainActivity.java:44)\n</code></pre>\n<p>I've read my code 2 days, but I can't figure out where I'm wrong. Can you help me? Thanks before.</p>\n"},{"tags":["java","multithreading","invoke"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1683221396,"post_id":76175843,"comment_id":134337315,"body_markdown":"The issue is that there&#39;s no synchronization between loading the books and updating the UI.","body":"The issue is that there&#39;s no synchronization between loading the books and updating the UI."},{"owner":{"account_id":27086739,"reputation":67,"user_id":20635129,"display_name":"KazlLaur"},"score":0,"creation_date":1683221530,"post_id":76175843,"comment_id":134337344,"body_markdown":"How could I do that?","body":"How could I do that?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1683225445,"post_id":76175843,"comment_id":134338152,"body_markdown":"**Never** write an empty `catch` block.  At the very least, a catch block should contain `e.printStackTrace();`.  If something goes wrong, you do want to know what happened and where, right?","body":"<b>Never</b> write an empty <code>catch</code> block.  At the very least, a catch block should contain <code>e.printStackTrace();</code>.  If something goes wrong, you do want to know what happened and where, right?"}],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683225238,"creation_date":1683225238,"answer_id":76176375,"question_id":76175843,"body_markdown":"Suppose you are going to make a meal, but you&#39;ve come to a step where you need flour, and when you look in the pantry there is none. So, you ask your friend who was busy working in the garden to stop what they&#39;re doing and run out to buy some flour. Then, the very moment your friend steps out the door, you try to proceed with making the recipe, but What the ???? There&#39;s no flour! How can there be no flour when I just sent him out the door to get some?\r\n\r\nYou&#39;re going to have to wait for the flour.\r\n\r\nYour program is trying to do the same thing. It&#39;s trying to use the books when it&#39;s only just sent the `LoadBooks` thread out to fetch them. You&#39;re going to need some way for the LoadBooks thread to signal when the books have been loaded, and you need some way for the GUI thread to wait until the signal is delivered.\r\n\r\nA [`Semaphore`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html) would be good for that. The LoadBooks thread could call `semaphore.release()` to signal that the books have been loaded, and the GUI thread could call `semaphore.acquire()` to await the signal.\r\n\r\n-----------\r\n\r\nBut Wait!!\r\n\r\nIs there something else you could be doing in the kitchen while your friend is shopping for flour? If there is not—if you are not going to do anything at all except sit there and wait—then you might just as well have gone for the flour yourself and not interrupted your friend&#39;s work.\r\n\r\nThere is practically _never_ any reason for some thread A to give a task to some other thread B if thread A is going to do nothing but wait until the task is finished. It that&#39;s all you want to do, then you might as well just do the task in thread A.\r\n\r\n-----------\r\n\r\nIt&#39;s tricker with a GUI, because maybe you are trying to prevent the GUI from &quot;freezing up&quot; while the books are being loaded. The thing is, in that case, if the GUI doesn&#39;t freeze up, what _does_ it do instead?\r\n\r\nThe simplest answer to that question is to have the GUI put up a [_modal dialog_](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Dialog.html) box that says something like, &quot;loading books,&quot; and not show any controls that let the user do anything else until the books are loaded. Maybe if you&#39;re nice, you&#39;ll show a progress bar in the dialog to show them how long they will have to wait. Maybe if you are really nice, you could even give them an &quot;abort&quot; button to quit out of the program if they decide not to wait.\r\n\r\nUnfortunately, I can&#39;t say much about _how_ to do those things. I&#39;ve never been much of a GUI programmer, and it&#39;s been maybe a decade since I did any in Java.","title":"Thread that loads data from file","body":"<p>Suppose you are going to make a meal, but you've come to a step where you need flour, and when you look in the pantry there is none. So, you ask your friend who was busy working in the garden to stop what they're doing and run out to buy some flour. Then, the very moment your friend steps out the door, you try to proceed with making the recipe, but What the ???? There's no flour! How can there be no flour when I just sent him out the door to get some?</p>\n<p>You're going to have to wait for the flour.</p>\n<p>Your program is trying to do the same thing. It's trying to use the books when it's only just sent the <code>LoadBooks</code> thread out to fetch them. You're going to need some way for the LoadBooks thread to signal when the books have been loaded, and you need some way for the GUI thread to wait until the signal is delivered.</p>\n<p>A <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html\" rel=\"nofollow noreferrer\"><code>Semaphore</code></a> would be good for that. The LoadBooks thread could call <code>semaphore.release()</code> to signal that the books have been loaded, and the GUI thread could call <code>semaphore.acquire()</code> to await the signal.</p>\n<hr />\n<p>But Wait!!</p>\n<p>Is there something else you could be doing in the kitchen while your friend is shopping for flour? If there is not—if you are not going to do anything at all except sit there and wait—then you might just as well have gone for the flour yourself and not interrupted your friend's work.</p>\n<p>There is practically <em>never</em> any reason for some thread A to give a task to some other thread B if thread A is going to do nothing but wait until the task is finished. It that's all you want to do, then you might as well just do the task in thread A.</p>\n<hr />\n<p>It's tricker with a GUI, because maybe you are trying to prevent the GUI from &quot;freezing up&quot; while the books are being loaded. The thing is, in that case, if the GUI doesn't freeze up, what <em>does</em> it do instead?</p>\n<p>The simplest answer to that question is to have the GUI put up a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Dialog.html\" rel=\"nofollow noreferrer\"><em>modal dialog</em></a> box that says something like, &quot;loading books,&quot; and not show any controls that let the user do anything else until the books are loaded. Maybe if you're nice, you'll show a progress bar in the dialog to show them how long they will have to wait. Maybe if you are really nice, you could even give them an &quot;abort&quot; button to quit out of the program if they decide not to wait.</p>\n<p>Unfortunately, I can't say much about <em>how</em> to do those things. I've never been much of a GUI programmer, and it's been maybe a decade since I did any in Java.</p>\n"}],"owner":{"account_id":27086739,"reputation":67,"user_id":20635129,"display_name":"KazlLaur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76176375,"answer_count":1,"score":0,"last_activity_date":1683225238,"creation_date":1683220972,"question_id":76175843,"body_markdown":"I want to make a thread, that loads data from the file. I was thinking of using the invokeLater() method. But I think I messed up somewhere and can&#39;t figure out where.\r\n\r\n**This is my thread:**\r\n```\r\npublic class LoadBooks extends Thread{\r\n    private ArrayList&lt;Book&gt; books;\r\n\r\n    @Override\r\n    public void run() {\r\n        try\r\n        {\r\n            FileInputStream fis = new FileInputStream(&quot;SaveBooks.ser&quot;);\r\n            ObjectInputStream ois = new ObjectInputStream(fis);\r\n            books = (ArrayList&lt;Book&gt;) ois.readObject();\r\n            fis.close();\r\n            ois.close();\r\n        }catch(Exception e)\r\n        {\r\n        }\r\n    }\r\n\r\n    public ArrayList&lt;Book&gt; getBook() {\r\n        return books;\r\n    }\r\n}\r\n```\r\n**I am using thread like this:**\r\n```\r\nif(e.getSource() == loadBookButton){\r\n    LoadBooks loadBooks = new LoadBooks();\r\n    loadBooks.start();\r\n\r\n    EventQueue.invokeLater(() -&gt; books = loadBooks.getBook());\r\n    EventQueue.invokeLater(() -&gt; updateUI(books));\r\n}\r\n```\r\n**How I think that should work:** Books will be loaded from the file in another thread. When books are loaded, I will get them from my thread and then I will update my GUI.\r\n\r\n**What is the problem?:** GUI is not updating, because *ArrayList* ```books``` is empty. So there is a problem somewhere. I think that maybe I do not understand fully, how the invokeLater works. I was looking up in [java docs][1] but didn&#39;t get much help.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingUtilities.html#invokeLater-java.lang.Runnable-","title":"Thread that loads data from file","body":"<p>I want to make a thread, that loads data from the file. I was thinking of using the invokeLater() method. But I think I messed up somewhere and can't figure out where.</p>\n<p><strong>This is my thread:</strong></p>\n<pre><code>public class LoadBooks extends Thread{\n    private ArrayList&lt;Book&gt; books;\n\n    @Override\n    public void run() {\n        try\n        {\n            FileInputStream fis = new FileInputStream(&quot;SaveBooks.ser&quot;);\n            ObjectInputStream ois = new ObjectInputStream(fis);\n            books = (ArrayList&lt;Book&gt;) ois.readObject();\n            fis.close();\n            ois.close();\n        }catch(Exception e)\n        {\n        }\n    }\n\n    public ArrayList&lt;Book&gt; getBook() {\n        return books;\n    }\n}\n</code></pre>\n<p><strong>I am using thread like this:</strong></p>\n<pre><code>if(e.getSource() == loadBookButton){\n    LoadBooks loadBooks = new LoadBooks();\n    loadBooks.start();\n\n    EventQueue.invokeLater(() -&gt; books = loadBooks.getBook());\n    EventQueue.invokeLater(() -&gt; updateUI(books));\n}\n</code></pre>\n<p><strong>How I think that should work:</strong> Books will be loaded from the file in another thread. When books are loaded, I will get them from my thread and then I will update my GUI.</p>\n<p><strong>What is the problem?:</strong> GUI is not updating, because <em>ArrayList</em> <code>books</code> is empty. So there is a problem somewhere. I think that maybe I do not understand fully, how the invokeLater works. I was looking up in <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingUtilities.html#invokeLater-java.lang.Runnable-\" rel=\"nofollow noreferrer\">java docs</a> but didn't get much help.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"score":0,"creation_date":1683180754,"post_id":76170037,"comment_id":134327474,"body_markdown":"several things you want to check: 1. where is that dependency defined? In your parent project or in module?  2. where were you running the dependency-tree? in root project or module?  3. Are there other dependecies/dependencyManagement dependency defined for this group + artifactId?    You should be able to create a MRE to demonstrate your problem.","body":"several things you want to check: 1. where is that dependency defined? In your parent project or in module?  2. where were you running the dependency-tree? in root project or module?  3. Are there other dependecies/dependencyManagement dependency defined for this group + artifactId?    You should be able to create a MRE to demonstrate your problem."},{"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"score":0,"creation_date":1683183624,"post_id":76170037,"comment_id":134328041,"body_markdown":"@AdrianShum I did CMD + SHIFT + F and searched all files and made sure there&#39;s no 2.3 anywhere. I ran the dependency tree in the module. There&#39;s no dependencyManagement in the current module or the parent module, only in other modules, and they don&#39;t have json-smart 2.3. MRE as in you&#39;d like the dependency tree output?","body":"@AdrianShum I did CMD + SHIFT + F and searched all files and made sure there&#39;s no 2.3 anywhere. I ran the dependency tree in the module. There&#39;s no dependencyManagement in the current module or the parent module, only in other modules, and they don&#39;t have json-smart 2.3. MRE as in you&#39;d like the dependency tree output?"},{"owner":{"account_id":6062199,"reputation":1160,"user_id":4733652,"display_name":"Iske"},"score":2,"creation_date":1683189880,"post_id":76170037,"comment_id":134329323,"body_markdown":"Try running dependency tree with  [-Dverbose](https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html#verbose) parameter to see full output with omitted entries. It should give you an answer on what is going on...","body":"Try running dependency tree with  <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html#verbose\" rel=\"nofollow noreferrer\">-Dverbose</a> parameter to see full output with omitted entries. It should give you an answer on what is going on..."}],"answers":[{"tags":[],"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683224218,"creation_date":1683224218,"answer_id":76176247,"question_id":76170037,"body_markdown":"The issue was that there&#39;s a transitive dependency that was overwriting the root dependency. Removing the root dependency exposed where the transitive dependency was, then excluding it. This resolved it.","title":"I have json-smart 2.4.10 but in dependency tree, it shows 2.3","body":"<p>The issue was that there's a transitive dependency that was overwriting the root dependency. Removing the root dependency exposed where the transitive dependency was, then excluding it. This resolved it.</p>\n"}],"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":638,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1683224218,"creation_date":1683180587,"question_id":76170037,"body_markdown":"I&#39;m in a module with \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.minidev&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json-smart&lt;/artifactId&gt;\r\n        &lt;version&gt;2.4.10&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nHowever, when I do `mvn dependency:tree` it&#39;s still showing `2.3`:\r\n\r\n    [INFO] +- net.minidev:json-smart:jar:2.3:compile\r\n    [INFO] |  \\- net.minidev:accessors-smart:jar:1.2:compile\r\n\r\nThere&#39;s no other spot where I can find json-smart 2.3, I checked the entire multi module project, but nowhere it shows 2.3. I&#39;m not sure what I&#39;m missing.","title":"I have json-smart 2.4.10 but in dependency tree, it shows 2.3","body":"<p>I'm in a module with</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.minidev&lt;/groupId&gt;\n    &lt;artifactId&gt;json-smart&lt;/artifactId&gt;\n    &lt;version&gt;2.4.10&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>However, when I do <code>mvn dependency:tree</code> it's still showing <code>2.3</code>:</p>\n<pre><code>[INFO] +- net.minidev:json-smart:jar:2.3:compile\n[INFO] |  \\- net.minidev:accessors-smart:jar:1.2:compile\n</code></pre>\n<p>There's no other spot where I can find json-smart 2.3, I checked the entire multi module project, but nowhere it shows 2.3. I'm not sure what I'm missing.</p>\n"},{"tags":["java","swing","event-handling","jpanel","keylistener"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1683211776,"post_id":76174493,"comment_id":134334934,"body_markdown":"If you&#39;ve done any searching on this, especially on this site, you&#39;ll see that most will recommend that you *shouldn&#39;t* use KeyListeners for something like this. Try key bindings instead, as it won&#39;t give you all the same focus requirement issues that KeyListeners do. Also, for better answers, best to create and post a valid [mre] with your question. Please read the link to see what this is and how it can help you and us.","body":"If you&#39;ve done any searching on this, especially on this site, you&#39;ll see that most will recommend that you <i>shouldn&#39;t</i> use KeyListeners for something like this. Try key bindings instead, as it won&#39;t give you all the same focus requirement issues that KeyListeners do. Also, for better answers, best to create and post a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your question. Please read the link to see what this is and how it can help you and us."},{"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"score":0,"creation_date":1683212592,"post_id":76174493,"comment_id":134335124,"body_markdown":"I&#39;ve taken away a lot from my code, but because I&#39;m placing a Jpanel inside a JScrollPane inside a JTabbedPane inside a JFrame, I feel like adding all of those things are necessary. I also want to add that my mouseListeners work for some reason to see if that had anything to do with it.","body":"I&#39;ve taken away a lot from my code, but because I&#39;m placing a Jpanel inside a JScrollPane inside a JTabbedPane inside a JFrame, I feel like adding all of those things are necessary. I also want to add that my mouseListeners work for some reason to see if that had anything to do with it."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683212798,"post_id":76174493,"comment_id":134335186,"body_markdown":"Only you can decide what is necessary or not, but I am saying that no one here can compile or run your or test your code. ***Again***, please look at the [mre] link to see why you really should be posting one of these in your question and not the snippets of unrunnable code that you&#39;re currently posting. Note also that this is not a request for the entire program, but likely you&#39;ll want to create a new small program that runs and that reproduces the problem.","body":"Only you can decide what is necessary or not, but I am saying that no one here can compile or run your or test your code. <b><i>Again</i></b>, please look at the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> link to see why you really should be posting one of these in your question and not the snippets of unrunnable code that you&#39;re currently posting. Note also that this is not a request for the entire program, but likely you&#39;ll want to create a new small program that runs and that reproduces the problem."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683213222,"post_id":76174493,"comment_id":134335292,"body_markdown":"If you get a decent answer soon without creating an MRE, then feel free to ignore my suggestion. But myself, given what I see, I again can only give broad recommendations that you try [Key Bindings](https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) (tutorial link) to see if that would work. Another unrelated issue: you look to be over-using the `static` modifier, and this can come back to bite you.","body":"If you get a decent answer soon without creating an MRE, then feel free to ignore my suggestion. But myself, given what I see, I again can only give broad recommendations that you try <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html\" rel=\"nofollow noreferrer\">Key Bindings</a> (tutorial link) to see if that would work. Another unrelated issue: you look to be over-using the <code>static</code> modifier, and this can come back to bite you."},{"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"score":0,"creation_date":1683213852,"post_id":76174493,"comment_id":134335466,"body_markdown":"So you mean, produce code that can be tested? Where would submit that code?","body":"So you mean, produce code that can be tested? Where would submit that code?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1683215745,"post_id":76174493,"comment_id":134335980,"body_markdown":"Where? Here of course, as code-formatted text. Please read the link, as I&#39;ve mentioned several times; it will explain much.","body":"Where? Here of course, as code-formatted text. Please read the link, as I&#39;ve mentioned several times; it will explain much."}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683223975,"creation_date":1683223975,"answer_id":76176232,"question_id":76174493,"body_markdown":"So, using your code, I can demonstrate that Key Bindings does in fact work inside of a nested component, here the bindings are on the g-key, for &quot;green&quot;. When the key is pressed, the foreground color of the component changes to green.\r\n\r\nThe bindings:\r\n```\r\nprivate void eventHandlers() {\r\n\t\r\n\t// .......\r\n\r\n\t// add some key bindings to test that they work\r\n\tInputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\r\n\tActionMap actionMap = getActionMap();\r\n\r\n\t// when the g-key is pressed, the foreground color is set to green\r\n\tKeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\r\n\tKeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\r\n\r\n\tinputMap.put(gDownKey, &quot;gDown&quot;);\r\n\tactionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\r\n\r\n\tinputMap.put(gUpKey, &quot;gUp&quot;);\r\n\tactionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\r\n}\r\n\r\nprivate class ForeGroundColorAction extends AbstractAction {\r\n\tprivate Color color;\r\n\r\n\tpublic ForeGroundColorAction(Color color) {\r\n\t\tthis.color = color;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\tforeGroundColor = color;\r\n\t\trepaint();\r\n\t}\r\n}\r\n```\r\n\r\nAnd my MRE demonstration program:\r\n\r\n\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\nimport javax.swing.GroupLayout.Alignment;\r\nimport javax.swing.LayoutStyle.ComponentPlacement;\r\nimport javax.swing.event.*;\r\n\r\npublic class Cartographer {\r\n    private final JFrame frmMyWorld = new JFrame();\r\n    double hPortion = 0;\r\n    double vPortion = 0;\r\n    private JTabbedPane tabbedPane;\r\n    private int numberOfTabbs;\r\n    public boolean isScrolling;\r\n    private JSlider zoomer;\r\n\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    Cartographer window = new Cartographer();\r\n                    window.frmMyWorld.setVisible(true);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public Cartographer() {\r\n        initialize();\r\n    }\r\n\r\n    private void initialize() {\r\n        frmMyWorld.setTitle(&quot;My World&quot;);\r\n        frmMyWorld.setBounds(0, 0, 1450, 805);\r\n        frmMyWorld.getContentPane().setBackground(new Color(100, 100, 100));\r\n        frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        tabbedPane = new JTabbedPane(JTabbedPane.TOP);\r\n        newTab();\r\n        isScrolling = true;\r\n        zoomer = new JSlider();\r\n        zoomer.setMinimum(-1000);\r\n        zoomer.setMaximum(1000);\r\n        zoomer.setValue(1000);\r\n        zoomer.setOrientation(SwingConstants.VERTICAL);\r\n        zoomer.addChangeListener(new ChangeListener() {\r\n            public void stateChanged(ChangeEvent e) {\r\n                if (isScrolling) {\r\n                    hPortion = getHPortion();\r\n                    vPortion = getVPortion();\r\n                }\r\n                isScrolling = false;\r\n                int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n                int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\r\n                getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue() / 1000 - 1));\r\n                getSelectedSpace().setZoomerValue(zoomer.getValue());\r\n                getSelectedSpace().repaint();\r\n                getSelectedPane().getHorizontalScrollBar()\r\n                        .setValue((int) Math.round(hPortion * hScale - (hVisible() / 2)));\r\n                getSelectedPane().getVerticalScrollBar()\r\n                        .setValue((int) Math.round(vPortion * vScale - (vVisible() / 2)));\r\n                getSelectedPane().addNotify();\r\n                getSelectedPane().revalidate();\r\n                getSelectedPane().setDoubleBuffered(true);\r\n                getSelectedPane().getHorizontalScrollBar().revalidate();\r\n                getSelectedPane().getVerticalScrollBar().revalidate();\r\n                getSelectedSpace().repaint();\r\n            }\r\n        });\r\n        GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\r\n        groupLayout.setHorizontalGroup(\r\n                groupLayout.createParallelGroup(Alignment.LEADING)\r\n                        .addGroup(groupLayout.createSequentialGroup()\r\n                                .addContainerGap()\r\n                                .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\r\n                                .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335,\r\n                                                GroupLayout.PREFERRED_SIZE))\r\n                                .addGap(28)));\r\n        groupLayout.setVerticalGroup(\r\n                groupLayout.createParallelGroup(Alignment.LEADING)\r\n                        .addGroup(groupLayout.createSequentialGroup()\r\n                                .addContainerGap()\r\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n                                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624,\r\n                                                GroupLayout.PREFERRED_SIZE)\r\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642,\r\n                                                GroupLayout.PREFERRED_SIZE))\r\n                                .addGap(18)));\r\n        groupSettingManager(groupLayout);\r\n    }\r\n\r\n    void groupSettingManager(GroupLayout groupLayout) {\r\n        frmMyWorld.getContentPane().setLayout(groupLayout);\r\n    }\r\n\r\n    void newTab() {\r\n        // We first create a new workspace with the given dimentions\r\n        Workspace workSpace = new Workspace(1295 * 4, 592 * 4, this);\r\n        // we need to focus on this new workspace for key listeners to work\r\n        // Our workspace sits inside a scroll pane\r\n        JScrollPane scrollPane = new JScrollPane(workSpace);\r\n        numberOfTabbs++;\r\n        // our scroll pane sits inside a tabbed pane\r\n        tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\r\n        workSpace.requestFocus();\r\n        tabbedPane.setSelectedIndex(numberOfTabbs - 1);\r\n        scrollPane.getHorizontalScrollBar().addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                isScrolling = true;\r\n            }\r\n\r\n        });\r\n        scrollPane.getVerticalScrollBar().addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                isScrolling = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    Workspace getSelectedSpace() {\r\n        return ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\r\n    }\r\n\r\n    JScrollPane getSelectedPane() {\r\n        return (JScrollPane) tabbedPane.getSelectedComponent();\r\n    }\r\n\r\n    Workspace getSpace(int i) {\r\n        return ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\r\n    }\r\n\r\n    JScrollPane getPane(int i) {\r\n        return (JScrollPane) tabbedPane.getComponent(i);\r\n    }\r\n\r\n    void setZoomerValue(int i) {\r\n        if (-1000 &lt;= i &amp;&amp; i &lt;= 1000)\r\n            zoomer.setValue(i);\r\n    }\r\n\r\n    int getZoomerValue() {\r\n        return zoomer.getValue();\r\n    }\r\n\r\n    public double getHPortion() {\r\n        int m = getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n        int v = getSelectedPane().getHorizontalScrollBar().getValue();\r\n        double a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount() / 2;\r\n        return (v + a) / m;\r\n    }\r\n\r\n    public double getVPortion() {\r\n        int m = getSelectedPane().getVerticalScrollBar().getMaximum();\r\n        int v = getSelectedPane().getVerticalScrollBar().getValue();\r\n        double a = getSelectedPane().getVerticalScrollBar().getVisibleAmount() / 2;\r\n        return (v + a) / m;\r\n    }\r\n\r\n    public int hVisible() {\r\n        return getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\r\n    }\r\n\r\n    public int vVisible() {\r\n        return getSelectedPane().getVerticalScrollBar().getVisibleAmount();\r\n    }\r\n}\r\n\r\nclass Workspace extends JPanel implements KeyListener {\r\n    // we keep every landmass that will appear in the workspace stored in this array\r\n    private Color backGroundColor;\r\n    private Color foreGroundColor;\r\n    private int zoomerValue;\r\n    private Cartographer cartographer;\r\n    private double zoomFactor;\r\n    private int width;\r\n    private int height;\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    public Workspace(int w, int h, Cartographer cartographer) {\r\n        this.cartographer = cartographer;\r\n        eventHandlers();\r\n        this.setPreferredSize(new Dimension(w, h));\r\n        backGroundColor = Color.BLACK;\r\n        foreGroundColor = Color.WHITE;\r\n        this.setBackground(backGroundColor);\r\n        zoomFactor = 1;\r\n        width = w;\r\n        height = h;\r\n        zoomerValue = 1000;\r\n        this.setFocusable(true);\r\n        this.requestFocus();\r\n        this.addKeyListener(this);\r\n        setBackground(backGroundColor); // !!s\r\n    }\r\n\r\n    public Workspace(LayoutManager layout) {\r\n        super(layout);\r\n    }\r\n\r\n    public Workspace(boolean isDoubleBuffered) {\r\n        super(isDoubleBuffered);\r\n    }\r\n\r\n    public Workspace(LayoutManager layout, boolean isDoubleBuffered) {\r\n        super(layout, isDoubleBuffered);\r\n    }\r\n\r\n    public double getZoomFactor() {\r\n        return zoomFactor;\r\n    }\r\n\r\n    public void setZoomFactor(double z) {\r\n        zoomFactor = z;\r\n        repaint();\r\n    }\r\n\r\n    public void adjustZoomFactor(int z) {\r\n        zoomFactor = Math.pow(2, z);\r\n        repaint();\r\n    }\r\n\r\n    public int getZoomerValue() {\r\n        return zoomerValue;\r\n    }\r\n\r\n    public void setZoomerValue(int i) {\r\n        zoomerValue = i;\r\n    }\r\n\r\n    @Override // must override paintComponent, not paint\r\n    protected void paintComponent(Graphics g) {\r\n        super.paintComponent(g); // never forget this!\r\n\r\n        // best to only scale a copy of the Graphics object so as not to break the painting chain\r\n        Graphics2D g2 = (Graphics2D) g.create();\r\n        zoom(g2);\r\n        for (int i = 0; i &lt; 35; i++) {\r\n            for (int j = Math.floorMod(i, 2); j &lt; 16; j += 2) {\r\n                g2.setColor(foreGroundColor);\r\n                g2.fillRect(148 * i, 148 * j, 148, 148);\r\n                g2.setColor(Color.GREEN);\r\n                g2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;, 148 * i + 66, 148 * j + 72);\r\n            }\r\n        }\r\n        g2.dispose();  // dispose of copy\r\n\r\n        // this.setBackground(backGroundColor); // !! does not belong in painting method\r\n    }\r\n\r\n    private void zoom(Graphics2D g) {\r\n        // if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\r\n        g.scale(zoomFactor, zoomFactor);\r\n        this.setPreferredSize(\r\n                new Dimension((int) Math.round(width * zoomFactor), (int) Math.round(height * zoomFactor)));\r\n        this.validate();\r\n        // if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\r\n    }\r\n\r\n    /**\r\n     * Any events that occur within the workspace happen here\r\n     */\r\n    private void eventHandlers() {\r\n        this.addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                foreGroundColor = Color.BLUE;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseClicked(MouseEvent e) {\r\n                backGroundColor = Color.GRAY;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseReleased(MouseEvent e) {\r\n                foreGroundColor = Color.WHITE;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseExited(MouseEvent e) {\r\n                backGroundColor = Color.BLACK;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseEntered(MouseEvent e) {\r\n                cartographer.setZoomerValue(zoomerValue);\r\n                repaint();\r\n            }\r\n        });\r\n        this.addMouseMotionListener(new MouseMotionAdapter() {\r\n            @Override\r\n            public void mouseMoved(MouseEvent e) {\r\n                repaint();\r\n            }\r\n\r\n            public void mouseDragged(MouseEvent e) {\r\n                repaint();\r\n            }\r\n\r\n            public void mouseWheelMoved(MouseEvent e) {\r\n                cartographer.isScrolling = true;\r\n            }\r\n        });\r\n        this.addKeyListener(new KeyAdapter() {\r\n            public void keyPressed(KeyEvent e) {\r\n                foreGroundColor = Color.RED;\r\n            }\r\n        });\r\n\r\n        // add some key bindings to test that they work\r\n        InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\r\n        ActionMap actionMap = getActionMap();\r\n\r\n        // when the g-key is pressed, the foreground color is set to green\r\n        KeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\r\n        KeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\r\n\r\n        inputMap.put(gDownKey, &quot;gDown&quot;);\r\n        actionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\r\n\r\n        inputMap.put(gUpKey, &quot;gUp&quot;);\r\n        actionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\r\n    }\r\n\r\n    private class ForeGroundColorAction extends AbstractAction {\r\n        private Color color;\r\n\r\n        public ForeGroundColorAction(Color color) {\r\n            this.color = color;\r\n        }\r\n\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            foreGroundColor = color;\r\n            repaint();\r\n        }\r\n    }\r\n\r\n    public int mousePositionX() {\r\n        return (int) Math.round(getMousePosition().x / zoomFactor);\r\n    }\r\n\r\n    public int mousePositionY() {\r\n        return (int) Math.round(getMousePosition().y / zoomFactor);\r\n    }\r\n\r\n    @Override\r\n    public void keyTyped(KeyEvent e) {\r\n        // TODO Auto-generated method stub\r\n    }\r\n\r\n    @Override\r\n    public void keyPressed(KeyEvent e) {\r\n        switch (e.getKeyCode()) {\r\n            case 38:\r\n                if (zoomerValue &lt; 1000) {\r\n                    zoomerValue += 5;\r\n                    cartographer.setZoomerValue(zoomerValue);\r\n                }\r\n                repaint();\r\n                break;\r\n            case 40:\r\n                if (zoomerValue &gt; -1000) {\r\n                    zoomerValue -= 5;\r\n                    cartographer.setZoomerValue(zoomerValue);\r\n                }\r\n                System.out.println(zoomerValue);\r\n                repaint();\r\n                break;\r\n            default:\r\n                repaint();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void keyReleased(KeyEvent e) {\r\n    }\r\n}\r\n```\r\n\r\nNote my removal of many static modifiers. Also, you shouldn&#39;t draw in paint but in paintComponent and don&#39;t forget to call the super&#39;s method for housekeeping painting. Also, scaling should usually be done on a copy of the Graphics object given by the JVM. ","title":"I&#39;m trying to add key listeners to a JPanel in Java","body":"<p>So, using your code, I can demonstrate that Key Bindings does in fact work inside of a nested component, here the bindings are on the g-key, for &quot;green&quot;. When the key is pressed, the foreground color of the component changes to green.</p>\n<p>The bindings:</p>\n<pre><code>private void eventHandlers() {\n    \n    // .......\n\n    // add some key bindings to test that they work\n    InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\n    ActionMap actionMap = getActionMap();\n\n    // when the g-key is pressed, the foreground color is set to green\n    KeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\n    KeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\n\n    inputMap.put(gDownKey, &quot;gDown&quot;);\n    actionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\n\n    inputMap.put(gUpKey, &quot;gUp&quot;);\n    actionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\n}\n\nprivate class ForeGroundColorAction extends AbstractAction {\n    private Color color;\n\n    public ForeGroundColorAction(Color color) {\n        this.color = color;\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        foreGroundColor = color;\n        repaint();\n    }\n}\n</code></pre>\n<p>And my MRE demonstration program:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.GroupLayout.Alignment;\nimport javax.swing.LayoutStyle.ComponentPlacement;\nimport javax.swing.event.*;\n\npublic class Cartographer {\n    private final JFrame frmMyWorld = new JFrame();\n    double hPortion = 0;\n    double vPortion = 0;\n    private JTabbedPane tabbedPane;\n    private int numberOfTabbs;\n    public boolean isScrolling;\n    private JSlider zoomer;\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    Cartographer window = new Cartographer();\n                    window.frmMyWorld.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    public Cartographer() {\n        initialize();\n    }\n\n    private void initialize() {\n        frmMyWorld.setTitle(&quot;My World&quot;);\n        frmMyWorld.setBounds(0, 0, 1450, 805);\n        frmMyWorld.getContentPane().setBackground(new Color(100, 100, 100));\n        frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        tabbedPane = new JTabbedPane(JTabbedPane.TOP);\n        newTab();\n        isScrolling = true;\n        zoomer = new JSlider();\n        zoomer.setMinimum(-1000);\n        zoomer.setMaximum(1000);\n        zoomer.setValue(1000);\n        zoomer.setOrientation(SwingConstants.VERTICAL);\n        zoomer.addChangeListener(new ChangeListener() {\n            public void stateChanged(ChangeEvent e) {\n                if (isScrolling) {\n                    hPortion = getHPortion();\n                    vPortion = getVPortion();\n                }\n                isScrolling = false;\n                int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\n                int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\n                getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue() / 1000 - 1));\n                getSelectedSpace().setZoomerValue(zoomer.getValue());\n                getSelectedSpace().repaint();\n                getSelectedPane().getHorizontalScrollBar()\n                        .setValue((int) Math.round(hPortion * hScale - (hVisible() / 2)));\n                getSelectedPane().getVerticalScrollBar()\n                        .setValue((int) Math.round(vPortion * vScale - (vVisible() / 2)));\n                getSelectedPane().addNotify();\n                getSelectedPane().revalidate();\n                getSelectedPane().setDoubleBuffered(true);\n                getSelectedPane().getHorizontalScrollBar().revalidate();\n                getSelectedPane().getVerticalScrollBar().revalidate();\n                getSelectedSpace().repaint();\n            }\n        });\n        GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\n        groupLayout.setHorizontalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addGroup(groupLayout.createSequentialGroup()\n                                .addContainerGap()\n                                .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\n                                .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335,\n                                                GroupLayout.PREFERRED_SIZE))\n                                .addGap(28)));\n        groupLayout.setVerticalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addGroup(groupLayout.createSequentialGroup()\n                                .addContainerGap()\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624,\n                                                GroupLayout.PREFERRED_SIZE)\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642,\n                                                GroupLayout.PREFERRED_SIZE))\n                                .addGap(18)));\n        groupSettingManager(groupLayout);\n    }\n\n    void groupSettingManager(GroupLayout groupLayout) {\n        frmMyWorld.getContentPane().setLayout(groupLayout);\n    }\n\n    void newTab() {\n        // We first create a new workspace with the given dimentions\n        Workspace workSpace = new Workspace(1295 * 4, 592 * 4, this);\n        // we need to focus on this new workspace for key listeners to work\n        // Our workspace sits inside a scroll pane\n        JScrollPane scrollPane = new JScrollPane(workSpace);\n        numberOfTabbs++;\n        // our scroll pane sits inside a tabbed pane\n        tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\n        workSpace.requestFocus();\n        tabbedPane.setSelectedIndex(numberOfTabbs - 1);\n        scrollPane.getHorizontalScrollBar().addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n\n        });\n        scrollPane.getVerticalScrollBar().addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n        });\n    }\n\n    Workspace getSelectedSpace() {\n        return ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\n    }\n\n    JScrollPane getSelectedPane() {\n        return (JScrollPane) tabbedPane.getSelectedComponent();\n    }\n\n    Workspace getSpace(int i) {\n        return ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\n    }\n\n    JScrollPane getPane(int i) {\n        return (JScrollPane) tabbedPane.getComponent(i);\n    }\n\n    void setZoomerValue(int i) {\n        if (-1000 &lt;= i &amp;&amp; i &lt;= 1000)\n            zoomer.setValue(i);\n    }\n\n    int getZoomerValue() {\n        return zoomer.getValue();\n    }\n\n    public double getHPortion() {\n        int m = getSelectedPane().getHorizontalScrollBar().getMaximum();\n        int v = getSelectedPane().getHorizontalScrollBar().getValue();\n        double a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount() / 2;\n        return (v + a) / m;\n    }\n\n    public double getVPortion() {\n        int m = getSelectedPane().getVerticalScrollBar().getMaximum();\n        int v = getSelectedPane().getVerticalScrollBar().getValue();\n        double a = getSelectedPane().getVerticalScrollBar().getVisibleAmount() / 2;\n        return (v + a) / m;\n    }\n\n    public int hVisible() {\n        return getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\n    }\n\n    public int vVisible() {\n        return getSelectedPane().getVerticalScrollBar().getVisibleAmount();\n    }\n}\n\nclass Workspace extends JPanel implements KeyListener {\n    // we keep every landmass that will appear in the workspace stored in this array\n    private Color backGroundColor;\n    private Color foreGroundColor;\n    private int zoomerValue;\n    private Cartographer cartographer;\n    private double zoomFactor;\n    private int width;\n    private int height;\n    private static final long serialVersionUID = 1L;\n\n    public Workspace(int w, int h, Cartographer cartographer) {\n        this.cartographer = cartographer;\n        eventHandlers();\n        this.setPreferredSize(new Dimension(w, h));\n        backGroundColor = Color.BLACK;\n        foreGroundColor = Color.WHITE;\n        this.setBackground(backGroundColor);\n        zoomFactor = 1;\n        width = w;\n        height = h;\n        zoomerValue = 1000;\n        this.setFocusable(true);\n        this.requestFocus();\n        this.addKeyListener(this);\n        setBackground(backGroundColor); // !!s\n    }\n\n    public Workspace(LayoutManager layout) {\n        super(layout);\n    }\n\n    public Workspace(boolean isDoubleBuffered) {\n        super(isDoubleBuffered);\n    }\n\n    public Workspace(LayoutManager layout, boolean isDoubleBuffered) {\n        super(layout, isDoubleBuffered);\n    }\n\n    public double getZoomFactor() {\n        return zoomFactor;\n    }\n\n    public void setZoomFactor(double z) {\n        zoomFactor = z;\n        repaint();\n    }\n\n    public void adjustZoomFactor(int z) {\n        zoomFactor = Math.pow(2, z);\n        repaint();\n    }\n\n    public int getZoomerValue() {\n        return zoomerValue;\n    }\n\n    public void setZoomerValue(int i) {\n        zoomerValue = i;\n    }\n\n    @Override // must override paintComponent, not paint\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g); // never forget this!\n\n        // best to only scale a copy of the Graphics object so as not to break the painting chain\n        Graphics2D g2 = (Graphics2D) g.create();\n        zoom(g2);\n        for (int i = 0; i &lt; 35; i++) {\n            for (int j = Math.floorMod(i, 2); j &lt; 16; j += 2) {\n                g2.setColor(foreGroundColor);\n                g2.fillRect(148 * i, 148 * j, 148, 148);\n                g2.setColor(Color.GREEN);\n                g2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;, 148 * i + 66, 148 * j + 72);\n            }\n        }\n        g2.dispose();  // dispose of copy\n\n        // this.setBackground(backGroundColor); // !! does not belong in painting method\n    }\n\n    private void zoom(Graphics2D g) {\n        // if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\n        g.scale(zoomFactor, zoomFactor);\n        this.setPreferredSize(\n                new Dimension((int) Math.round(width * zoomFactor), (int) Math.round(height * zoomFactor)));\n        this.validate();\n        // if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\n    }\n\n    /**\n     * Any events that occur within the workspace happen here\n     */\n    private void eventHandlers() {\n        this.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                foreGroundColor = Color.BLUE;\n                repaint();\n            }\n\n            public void mouseClicked(MouseEvent e) {\n                backGroundColor = Color.GRAY;\n                repaint();\n            }\n\n            public void mouseReleased(MouseEvent e) {\n                foreGroundColor = Color.WHITE;\n                repaint();\n            }\n\n            public void mouseExited(MouseEvent e) {\n                backGroundColor = Color.BLACK;\n                repaint();\n            }\n\n            public void mouseEntered(MouseEvent e) {\n                cartographer.setZoomerValue(zoomerValue);\n                repaint();\n            }\n        });\n        this.addMouseMotionListener(new MouseMotionAdapter() {\n            @Override\n            public void mouseMoved(MouseEvent e) {\n                repaint();\n            }\n\n            public void mouseDragged(MouseEvent e) {\n                repaint();\n            }\n\n            public void mouseWheelMoved(MouseEvent e) {\n                cartographer.isScrolling = true;\n            }\n        });\n        this.addKeyListener(new KeyAdapter() {\n            public void keyPressed(KeyEvent e) {\n                foreGroundColor = Color.RED;\n            }\n        });\n\n        // add some key bindings to test that they work\n        InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\n        ActionMap actionMap = getActionMap();\n\n        // when the g-key is pressed, the foreground color is set to green\n        KeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\n        KeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\n\n        inputMap.put(gDownKey, &quot;gDown&quot;);\n        actionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\n\n        inputMap.put(gUpKey, &quot;gUp&quot;);\n        actionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\n    }\n\n    private class ForeGroundColorAction extends AbstractAction {\n        private Color color;\n\n        public ForeGroundColorAction(Color color) {\n            this.color = color;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            foreGroundColor = color;\n            repaint();\n        }\n    }\n\n    public int mousePositionX() {\n        return (int) Math.round(getMousePosition().x / zoomFactor);\n    }\n\n    public int mousePositionY() {\n        return (int) Math.round(getMousePosition().y / zoomFactor);\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e) {\n        // TODO Auto-generated method stub\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e) {\n        switch (e.getKeyCode()) {\n            case 38:\n                if (zoomerValue &lt; 1000) {\n                    zoomerValue += 5;\n                    cartographer.setZoomerValue(zoomerValue);\n                }\n                repaint();\n                break;\n            case 40:\n                if (zoomerValue &gt; -1000) {\n                    zoomerValue -= 5;\n                    cartographer.setZoomerValue(zoomerValue);\n                }\n                System.out.println(zoomerValue);\n                repaint();\n                break;\n            default:\n                repaint();\n        }\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e) {\n    }\n}\n</code></pre>\n<p>Note my removal of many static modifiers. Also, you shouldn't draw in paint but in paintComponent and don't forget to call the super's method for housekeeping painting. Also, scaling should usually be done on a copy of the Graphics object given by the JVM.</p>\n"}],"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76176232,"answer_count":1,"score":1,"last_activity_date":1683223975,"creation_date":1683211668,"question_id":76174493,"body_markdown":"There&#39;s a lot to understand, so stick with me. I have a JPanel inside a JScrollPane, which is inside a JTabbedPane, which is inside a JFrame. Somewhere in that process, I&#39;m losing the ability to add key listeners. \r\n\r\nI have this to set up my JFrame\r\n```\r\npublic class Cartographer {\r\n\r\n\tprivate final JFrame frmMyWorld = new JFrame();\r\n\t/**\r\n\t * set up our toolbar\r\n\t */\r\n\tprivate final JButton addTabb = new JButton(&quot;Create New Workspace&quot;);\r\n\t\r\n\t\r\n\t//this is where I create the new tabbed pane\r\n\tprivate static JTabbedPane tabbedPane;\r\n\tprivate int numberOfTabbs;\r\n\tpublic static boolean isScrolling;\r\n\tprivate static JSlider zoomer;\r\n\t\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tCartographer window = new Cartographer();\r\n\t\t\t\t\twindow.frmMyWorld.setVisible(true);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tpublic Cartographer() {\t\r\n\t\tinitialize();\r\n\t\tcreateEvents();\r\n\t}\r\n```\r\nI then initialize:\r\n\r\n```\r\nprivate void initialize() {\r\n\t\t\r\n\t\tfrmMyWorld.setTitle(&quot;My World&quot;);\r\n\t\tfrmMyWorld.setBounds(0, 0, 1450, 805);\r\n\t\tfrmMyWorld.getContentPane().setBackground(new Color(100,100,100));\r\n\t\tfrmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\r\n\t\ttabbedPane = new JTabbedPane(JTabbedPane.TOP);\r\n\t\tnewTab();\r\n\t\tisScrolling = true;\r\n\r\n\t\t//this sets up my slider which I&#39;m using to zoom\r\n\t\tzoomer = new JSlider();\r\n\t\tzoomer.setMinimum(-1000);\r\n\t\tzoomer.setMaximum(1000);\r\n\t\tzoomer.setValue(1000);\r\n\t\tzoomer.setOrientation(SwingConstants.VERTICAL);\r\n\t\tzoomer.addChangeListener(new ChangeListener() {\r\n\t\t\tpublic void stateChanged(ChangeEvent e) {\r\n\t\t\t\tif(isScrolling) {\r\n\t\t\t\t\thPortion = getHPortion();\r\n\t\t\t\t\tvPortion = getVPortion();\r\n\t\t\t\t}\r\n\t\t\t\tisScrolling = false;\r\n\t\t\t\tint hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n\t\t\t\tint vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\r\n\t\t\t\tgetSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/250 - 4));\r\n\t\t\t\tgetSelectedSpace().setZoomerValue(zoomer.getValue());\r\n\t\t\t\tgetSelectedSpace().repaint();\r\n\t\t\t\tgetSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\r\n\t\t\t\tgetSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \r\n\t\t\t\tgetSelectedPane().addNotify();\r\n\t\t\t\tgetSelectedPane().revalidate();\r\n\t\t\t\tgetSelectedPane().setDoubleBuffered(true);\r\n\t\t\t\tgetSelectedPane().getHorizontalScrollBar().revalidate();\r\n\t\t\t\tgetSelectedPane().getVerticalScrollBar().revalidate();\r\n\t\t\t\tgetSelectedSpace().repaint();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t/**and using a group layout, we add a new tab to our JFrame\r\n                 * my original code was using buttons I&#39;m just simplifying the code to make it                  .                */easier to read,that&#39;s why I&#39;m using group layour     ,          \r\n\t\tGroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\r\n\t\tgroupLayout.setHorizontalGroup(\r\n\t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n\t\t\t\t\t.addContainerGap()\r\n\t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\r\n\t\t\t\t\t.addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n\t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\r\n\t\t\t\t\t.addGap(28))\r\n\t\t);\r\n\t\tgroupLayout.setVerticalGroup(\r\n\t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n\t\t\t\t\t.addContainerGap()\r\n\t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\r\n\t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\r\n\t\t\t\t\t.addGap(18))\r\n\t\t);\r\n\t\tgroupSettingManager(groupLayout);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n```\r\nAnd the newTab() function is what we do when we create a new tab\r\n\t\r\n```\r\nvoid newTab() {\r\n\t\t//We first create a new workspace with the given dimentions \r\n\t\tWorkspace workSpace = new Workspace(1295*256, 592*256);\r\n//request focus so we can add key listeners\r\n\t\tworkSpace.requestFocus();\r\n\t\t//Our workspace sits inside a scroll pane\r\n\t\tJScrollPane scrollPane = new JScrollPane(workSpace);\r\n\t\tnumberOfTabbs++;\r\n\t\t//our scroll pane sits inside a tabbed pane\r\n\t\ttabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\r\n\t\ttabbedPane.setSelectedIndex(numberOfTabbs-1);\r\n\t\tscrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\r\n\t\t\t@Override\r\n\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\tisScrolling = true;\r\n\t\t\t}\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n\t\t});\r\n\t\tscrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\r\n\t\t\t@Override\r\n\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\tisScrolling = true;\r\n\t\t\t}\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t}\r\n```\r\nAs you may have noticed, we&#39;re requesting focus from the new workspace as soon as it&#39;s created, however, that doesn&#39;t seem to give it focus\r\n\r\n\r\nI&#39;ve tried adding key listeners to the workspace, like so\r\n```\r\npublic class Workspace extends JPanel implements KeyListener{\r\n\t\t//we keep every landmass that will appear in the workspace stored in this array\r\n\t\tpublic ArrayList&lt;Node&gt; protoLandmass = new ArrayList&lt;Node&gt;();\r\n\t\t\r\n\t\tprivate static Color backGroundColor;\r\n\t\tprivate int zoomerValue;\r\n\t\tprivate static double zoomFactor; \r\n\t\tprivate static int width;\r\n\t\tprivate static int height;\r\n\t\tprivate static boolean zooming = false;\r\n\r\n\t\t/**\r\n\t\t * \r\n\t\t */\r\n\t\tprivate static final long serialVersionUID = 1L;\r\n\t\t\r\n\t\tpublic Workspace(int w, int h) {\r\n\t\t\teventHandlers();\r\n\t\t\tthis.setPreferredSize(new Dimension(w,h));\r\n\t\t\t\r\n\t\t\tbackGroundColor = new Color(0,120,255);\r\n\t\t\tthis.setBackground(backGroundColor);\r\n\t\t\tzoomFactor = 1;\r\n\t\t\twidth = w;\r\n\t\t\theight = h;\r\n\t\t\tzoomerValue = 1000;\r\n\t\t\tthis.setFocusable(true);\r\n                        //I&#39;ve also tried to request focus here, that didn&#39;t work either\r\n\t\t\t//this.requestFocus();\r\n\t\t\tthis.addKeyListener(this);\r\n\t\t\t//this.requestFocusInWindow();\r\n\t\t\trepaint();\r\n\t\t}\r\n\r\n                ...\r\n\r\n                @Override\r\n\t\tpublic void keyTyped(KeyEvent e) {\r\n\t\t\t...\t\r\n\t\t}\r\n\t\t@Override\r\n\t\tpublic void keyPressed(KeyEvent e) {\r\n\t\t\t...\r\n\t\t\t}\t\r\n\t\t}\r\n\t\t@Override\r\n\t\tpublic void keyReleased(KeyEvent e) {\r\n\t\t\t...\r\n\t\t}\r\n```\r\nThe key listeners here don&#39;t work, even though I have tried requesting focus in multiple places\r\n\r\n\r\nThe mouse listeners seem to work when I create events here:\r\n\r\n```\r\nprivate void eventHandlers() {\r\n\t\t\tthis.addMouseListener(new MouseAdapter() {\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\t        ...\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n                                ...\r\n\t\t\t\t}\r\n\t\t\t\tpublic void mouseReleased(MouseEvent e) {\r\n                                ...\r\n\t\t\t\t}\r\n\t\t\t\tpublic void mouseExited(MouseEvent e) {\r\n                                        ...\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t}\r\n\t\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n\t\t\t\t\t...\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.addMouseMotionListener(new MouseMotionAdapter() {\r\n\t        \t@Override\r\n\t        \tpublic void mouseMoved(MouseEvent e) {\r\n\t            \t\trepaint();\r\n\t        \t}\r\n\t        \tpublic void mouseDragged(MouseEvent e) {\r\n\t        \t\trepaint();\r\n\t        \t}\r\n\t        \r\n\t        \tpublic void mouseWheelMoved(MouseEvent e) {\r\n                                       // this one doesn&#39;t work either\r\n\t        \t\t\tCartographer.isScrolling = true;\r\n\t        \t}\r\n\t        });\r\n                \r\n                this.addKeyListener(new KeyAdapter(){\r\n\r\n\t           @Override\r\n\t\tpublic void keyTyped(KeyEvent e) {\r\n\t\t\t...\r\n\t\t\t\r\n\t\t}\r\n                @override\r\n\t\tpublic void keyPressed(KeyEvent e) {\r\n\t\t\t...\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t}\r\n                @override\r\n\t\tpublic void keyReleased(KeyEvent e) {\r\n\t\t\t...\t\r\n\t\t}\t\t\r\n\t\t\t\r\n\t}\r\n```\r\nI tried adding key listeners here, but they didn&#39;t work either. I never tried having key listeners in both places at the same time, I&#39;m just showing all the places they have been to make it easier for you. \r\n\r\nMinimal reproducible example:\r\n\r\n  \r\n\r\n      import java.awt.Color;  \r\n        import java.awt.EventQueue;\r\n        import java.awt.event.MouseEvent;\r\n        import java.awt.event.MouseListener;\r\n        \r\n        import javax.swing.JFrame;\r\n        import javax.swing.JScrollPane;\r\n        import javax.swing.JTabbedPane;\r\n        import javax.swing.GroupLayout;\r\n        import javax.swing.GroupLayout.Alignment;\r\n        import javax.swing.LayoutStyle.ComponentPlacement;\r\n        import javax.swing.JSlider;\r\n        import javax.swing.SwingConstants;\r\n        import javax.swing.event.ChangeListener;\r\n        import javax.swing.event.ChangeEvent;\r\n        \r\n        \r\n        \r\n        public class Cartographer {\r\n        \r\n        \tprivate final JFrame frmMyWorld = new JFrame();\r\n        \t/**\r\n        \t * set up our toolbar\r\n        \t */\r\n        \tdouble hPortion = 0;\r\n        \tdouble vPortion = 0;\r\n        \t\r\n        \t\r\n        \t//the space that will contain everything that is drawn\r\n        \tprivate static JTabbedPane tabbedPane;\r\n        \tprivate int numberOfTabbs;\r\n        \tpublic static boolean isScrolling;\r\n        \tprivate static JSlider zoomer;\r\n        \t\r\n        \t\r\n        \tpublic static void main(String[] args) {\r\n        \t\tEventQueue.invokeLater(new Runnable() {\r\n        \t\t\tpublic void run() {\r\n        \t\t\t\ttry {\r\n        \t\t\t\t\tCartographer window = new Cartographer();\r\n        \t\t\t\t\twindow.frmMyWorld.setVisible(true);\r\n        \t\t\t\t} catch (Exception e) {\r\n        \t\t\t\t\te.printStackTrace();\r\n        \t\t\t\t}\r\n        \t\t\t}\r\n        \t\t});\r\n        \t}\r\n        \r\n        \t/**\r\n        \t * Create the application.\r\n        \t */\r\n        \tpublic Cartographer() {\t\r\n        \t\tinitialize();\r\n        \t}\r\n        \r\n        \t/**\r\n        \t * Initialise the contents of the frame.\r\n        \t */\r\n        \tprivate void initialize() {\r\n        \t\t\r\n        \t\tfrmMyWorld.setTitle(&quot;My World&quot;);\r\n        \t\tfrmMyWorld.setBounds(0, 0, 1450, 805);\r\n        \t\tfrmMyWorld.getContentPane().setBackground(new Color(100,100,100));\r\n        \t\tfrmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        \t\t\r\n        \t\ttabbedPane = new JTabbedPane(JTabbedPane.TOP);\r\n        \t\tnewTab();\r\n        \t\tisScrolling = true;\r\n        \r\n        \t\t/**\r\n        \t\t * give everything its position in the window, we&#39;re using a group layout\r\n        \t\t */\r\n        \t\tzoomer = new JSlider();\r\n        \t\tzoomer.setMinimum(-1000);\r\n        \t\tzoomer.setMaximum(1000);\r\n        \t\tzoomer.setValue(1000);\r\n        \t\tzoomer.setOrientation(SwingConstants.VERTICAL);\r\n        \t\tzoomer.addChangeListener(new ChangeListener() {\r\n        \t\t\tpublic void stateChanged(ChangeEvent e) {\r\n        \t\t\t\tif(isScrolling) {\r\n        \t\t\t\t\thPortion = getHPortion();\r\n        \t\t\t\t\tvPortion = getVPortion();\r\n        \t\t\t\t}\r\n        \t\t\t\tisScrolling = false;\r\n        \t\t\t\tint hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n        \t\t\t\tint vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\r\n        \t\t\t\tgetSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/1000 - 1));\r\n        \t\t\t\tgetSelectedSpace().setZoomerValue(zoomer.getValue());\r\n        \t\t\t\tgetSelectedSpace().repaint();\r\n        \t\t\t\tgetSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\r\n        \t\t\t\tgetSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \r\n        \t\t\t\tgetSelectedPane().addNotify();\r\n        \t\t\t\tgetSelectedPane().revalidate();\r\n        \t\t\t\tgetSelectedPane().setDoubleBuffered(true);\r\n        \t\t\t\tgetSelectedPane().getHorizontalScrollBar().revalidate();\r\n        \t\t\t\tgetSelectedPane().getVerticalScrollBar().revalidate();\r\n        \t\t\t\tgetSelectedSpace().repaint();\r\n        \t\t\t}\r\n        \t\t});\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\tGroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\r\n        \t\tgroupLayout.setHorizontalGroup(\r\n        \t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n        \t\t\t\t\t.addContainerGap()\r\n        \t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\r\n        \t\t\t\t\t.addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n        \t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\r\n        \t\t\t\t\t.addGap(28))\r\n        \t\t);\r\n        \t\tgroupLayout.setVerticalGroup(\r\n        \t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n        \t\t\t\t\t.addContainerGap()\r\n        \t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\r\n        \t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\r\n        \t\t\t\t\t.addGap(18))\r\n        \t\t);\r\n        \t\tgroupSettingManager(groupLayout);\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t}\r\n        \t\r\n        \r\n        \r\n        \tvoid groupSettingManager(GroupLayout groupLayout) {\r\n        \t\t\tfrmMyWorld.getContentPane().setLayout(groupLayout);\r\n        \t}\r\n        \r\n        \r\n        \tvoid newTab() {\r\n        \t\t//We first create a new workspace with the given dimentions \r\n        \t\tWorkspace workSpace = new Workspace(1295*4, 592*4);\r\n        \t\t//we need to focus on this new workspace for key listeners to work\r\n        \t\t//Our workspace sits inside a scroll pane\r\n        \t\tJScrollPane scrollPane = new JScrollPane(workSpace);\r\n        \t\tnumberOfTabbs++;\r\n        \t\t//our scroll pane sits inside a tabbed pane\r\n        \t\ttabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\r\n        \t\tworkSpace.requestFocus();\r\n        \t\ttabbedPane.setSelectedIndex(numberOfTabbs-1);\r\n        \t\tscrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mousePressed(MouseEvent e) {\r\n        \t\t\t\tisScrolling = true;\r\n        \t\t\t}\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n        \t\t});\r\n        \t\tscrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mousePressed(MouseEvent e) {\r\n        \t\t\t\tisScrolling = true;\r\n        \t\t\t}\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n        \t\t});\r\n        \t\t\r\n        \t\t\r\n        \t}\r\n        \t\r\n        \t\r\n        \tstatic Workspace getSelectedSpace() {\r\n        \t\treturn ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\r\n        \t}\r\n        \tJScrollPane getSelectedPane() {\r\n        \t\treturn (JScrollPane) tabbedPane.getSelectedComponent();\r\n        \t}\r\n        \tWorkspace getSpace(int i) {\r\n        \t\treturn ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\r\n        \t}\r\n        \tJScrollPane getPane(int i) {\r\n        \t\treturn (JScrollPane) tabbedPane.getComponent(i);\r\n        \t}\r\n        \t\r\n        \t\r\n        \t\r\n        \t static void setZoomerValue(int i) {\r\n        \t\tif(-1000 &lt;= i &amp;&amp; i &lt;= 1000)\r\n        \t\t\tzoomer.setValue(i);\r\n        \t}\r\n        \tint getZoomerValue() {\r\n        \t\treturn zoomer.getValue();\t\r\n        \t}\r\n        \t\r\n        \tpublic double getHPortion() {\r\n        \t\tint m = getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n        \t\tint v = getSelectedPane().getHorizontalScrollBar().getValue();\r\n        \t\tdouble a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount()/2;\r\n        \t\treturn (v + a)/m;\r\n        \t}\r\n        \tpublic double getVPortion() {\r\n        \t\tint m = getSelectedPane().getVerticalScrollBar().getMaximum();\r\n        \t\tint v = getSelectedPane().getVerticalScrollBar().getValue();\r\n        \t\tdouble a = getSelectedPane().getVerticalScrollBar().getVisibleAmount()/2;\r\n        \t\treturn (v +a)/m;\r\n        \t}\r\n        \tpublic int hVisible() {\r\n        \t\treturn getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\r\n        \t}\r\n        \tpublic int vVisible() {\r\n        \t\treturn getSelectedPane().getVerticalScrollBar().getVisibleAmount();\r\n        \t}\r\n        \r\n        \r\n        }\r\n    \r\n    \timport java.awt.Color; \r\n    \timport java.awt.Dimension;\r\n    \timport java.awt.Graphics;\r\n    \timport java.awt.Graphics2D;\r\n    \timport java.awt.LayoutManager;\r\n    import java.awt.event.KeyAdapter;\r\n    import java.awt.event.KeyEvent;\r\n    \timport java.awt.event.KeyListener;\r\n    \timport java.awt.event.MouseAdapter;\r\n    \timport java.awt.event.MouseEvent;\r\n    \timport java.awt.event.MouseMotionAdapter;\r\n    \r\n    \timport javax.swing.JPanel;\r\n    \r\n    \tpublic class Workspace extends JPanel implements KeyListener{\r\n    \t\t//we keep every landmass that will appear in the workspace stored in this array\r\n    \t\t\r\n    \t\tprivate static Color backGroundColor;\r\n    \t\tprivate static Color foreGroundColor;\r\n    \t\tprivate int zoomerValue;\r\n    \t\tprivate static double zoomFactor; \r\n    \t\tprivate static int width;\r\n    \t\tprivate static int height;\r\n    \r\n    \t\t/**\r\n    \t\t * \r\n    \t\t */\r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \t\t\r\n    \t\tpublic Workspace(int w, int h) {\r\n    \t\t\teventHandlers();\r\n    \t\t\tthis.setPreferredSize(new Dimension(w,h));\r\n    \t\t\t\r\n    \t\t\tbackGroundColor = Color.BLACK;\r\n    \t\t\tforeGroundColor = Color.WHITE;\r\n    \t\t\tthis.setBackground(backGroundColor);\r\n    \t\t\tzoomFactor = 1;\r\n    \t\t\twidth = w;\r\n    \t\t\theight = h;\r\n    \t\t\tzoomerValue = 1000;\r\n    \t\t\tthis.setFocusable(true);\r\n    \t\t\tthis.requestFocus();\r\n    \t\t\tthis.addKeyListener(this);\r\n    \t\t\t//this.requestFocusInWindow();\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t\t\r\n    \r\n    \r\n    \r\n    \r\n    \t\tpublic Workspace(LayoutManager layout) {\r\n    \t\t\tsuper(layout);\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\tpublic Workspace(boolean isDoubleBuffered) {\r\n    \t\t\tsuper(isDoubleBuffered);\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\tpublic Workspace(LayoutManager layout, boolean isDoubleBuffered) {\r\n    \t\t\tsuper(layout, isDoubleBuffered);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic double getZoomFactor() {\r\n    \t\t\treturn zoomFactor;\r\n    \t\t}\r\n    \t\tpublic void setZoomFactor(double z) {\r\n    \t\t\tzoomFactor = z;\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t\tpublic void adjustZoomFactor(int z) {\r\n    \t\t\tzoomFactor = Math.pow(2, z);\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\tpublic int getZoomerValue() {\r\n    \t\t\treturn zoomerValue;\r\n    \t\t}\r\n    \t\tpublic void setZoomerValue(int i) {\r\n    \t\t\tzoomerValue = i;\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Paint Function and supplement functions \r\n    \t\t */\r\n    \t\tpublic void paint(Graphics g)\r\n    \t\t{\r\n    \t\t\tGraphics2D g2= (Graphics2D) g;\r\n    \t\t\tzoom(g2);\r\n    \t\t\t//a for loop to run the same function on each of the landmasses to draw them all\t\r\n    \t\t\tfor(int i = 0; i &lt; 35; i++)\r\n    \t\t\t\tfor(int j = Math.floorMod(i, 2); j &lt; 16; j+=2) {\r\n    \t\t\t\t\tg2.setColor(foreGroundColor);\r\n    \t\t\t\t\tg2.fillRect(148*i, 148*j, 148, 148);\r\n    \t\t\t\t\tg2.setColor(Color.GREEN);\r\n    \t\t\t\t\tg2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;,148*i+66,148*j+72);\r\n    \t\t\t\t}\r\n    \t\t\tthis.setBackground(backGroundColor);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\tprivate void zoom(Graphics2D g) {\r\n    \t\t\t//if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\r\n    \t\t\tg.scale(zoomFactor,zoomFactor);\r\n    \t\t\tthis.setPreferredSize(new Dimension((int) Math.round(width*zoomFactor), (int) Math.round(height*zoomFactor)));\r\n    \t\t\tthis.validate();\r\n    \t\t\t//if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\r\n    \r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Any events that occur within the workspace happen here\r\n    \t\t */\r\n    \t\tprivate void eventHandlers() {\r\n    \t\t\tthis.addMouseListener(new MouseAdapter() {\t\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void mousePressed(MouseEvent e) {\r\n    \t\t\t\t\tforeGroundColor = Color.BLUE;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n    \t\t\t\t\tbackGroundColor = Color.GRAY;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void mouseReleased(MouseEvent e) {\r\n    \t\t\t\t\tforeGroundColor = Color.WHITE;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void mouseExited(MouseEvent e) {\r\n    \t\t\t\t\tbackGroundColor = Color.BLACK;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n    \t\t\t\t\tCartographer.setZoomerValue(zoomerValue);\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\t\r\n    \t\t\tthis.addMouseMotionListener(new MouseMotionAdapter() {\r\n    \t        \t@Override\r\n    \t        \tpublic void mouseMoved(MouseEvent e) {\r\n    \t            \t\trepaint();\r\n    \t        \t}\r\n    \t        \tpublic void mouseDragged(MouseEvent e) {\r\n    \t        \t\trepaint();\r\n    \t        \t}\r\n    \t        \r\n    \t        \tpublic void mouseWheelMoved(MouseEvent e) {\r\n    \t        \t\t\tCartographer.isScrolling = true;\r\n    \t        \t}\r\n    \t        });\r\n    \t\t\t\r\n    \t\t\tthis.addKeyListener(new KeyAdapter() {\r\n    \t\t\t\tpublic void keyPressed(KeyEvent e) {\r\n    \t\t\t\t\tforeGroundColor = Color.RED;\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\tpublic int mousePositionX() {\r\n    \t\t\treturn (int) Math.round(getMousePosition().x/zoomFactor);\r\n    \t\t}\r\n    \t\tpublic int mousePositionY() {\r\n    \t\t\treturn (int) Math.round(getMousePosition().y/zoomFactor);\r\n    \t\t}\r\n    \r\n    \r\n    \t\t@Override\r\n    \t\tpublic void keyTyped(KeyEvent e) {\r\n    \t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void keyPressed(KeyEvent e) {\r\n    \t\t\tswitch(e.getKeyCode()) {\r\n    \t\t\tcase 38 : if(zoomerValue &lt; 1000) { zoomerValue+=5; Cartographer.setZoomerValue(zoomerValue);} \r\n    \t\t\t\trepaint();\r\n    \t\t\tbreak;\r\n    \t\t\tcase 40 : if(zoomerValue &gt; -1000) {zoomerValue-=5; Cartographer.setZoomerValue(zoomerValue);} \r\n    \t\t\t\tSystem.out.println(zoomerValue);\r\n    \t\t\t\trepaint();\r\n    \t\t\tbreak;\r\n    \t\t\tdefault: repaint();\r\n    \t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void keyReleased(KeyEvent e) {\r\n    \t\t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"I&#39;m trying to add key listeners to a JPanel in Java","body":"<p>There's a lot to understand, so stick with me. I have a JPanel inside a JScrollPane, which is inside a JTabbedPane, which is inside a JFrame. Somewhere in that process, I'm losing the ability to add key listeners.</p>\n<p>I have this to set up my JFrame</p>\n<pre><code>public class Cartographer {\n\n    private final JFrame frmMyWorld = new JFrame();\n    /**\n     * set up our toolbar\n     */\n    private final JButton addTabb = new JButton(&quot;Create New Workspace&quot;);\n    \n    \n    //this is where I create the new tabbed pane\n    private static JTabbedPane tabbedPane;\n    private int numberOfTabbs;\n    public static boolean isScrolling;\n    private static JSlider zoomer;\n    \n    \n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    Cartographer window = new Cartographer();\n                    window.frmMyWorld.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n    public Cartographer() { \n        initialize();\n        createEvents();\n    }\n</code></pre>\n<p>I then initialize:</p>\n<pre><code>private void initialize() {\n        \n        frmMyWorld.setTitle(&quot;My World&quot;);\n        frmMyWorld.setBounds(0, 0, 1450, 805);\n        frmMyWorld.getContentPane().setBackground(new Color(100,100,100));\n        frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        tabbedPane = new JTabbedPane(JTabbedPane.TOP);\n        newTab();\n        isScrolling = true;\n\n        //this sets up my slider which I'm using to zoom\n        zoomer = new JSlider();\n        zoomer.setMinimum(-1000);\n        zoomer.setMaximum(1000);\n        zoomer.setValue(1000);\n        zoomer.setOrientation(SwingConstants.VERTICAL);\n        zoomer.addChangeListener(new ChangeListener() {\n            public void stateChanged(ChangeEvent e) {\n                if(isScrolling) {\n                    hPortion = getHPortion();\n                    vPortion = getVPortion();\n                }\n                isScrolling = false;\n                int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\n                int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\n                getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/250 - 4));\n                getSelectedSpace().setZoomerValue(zoomer.getValue());\n                getSelectedSpace().repaint();\n                getSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\n                getSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \n                getSelectedPane().addNotify();\n                getSelectedPane().revalidate();\n                getSelectedPane().setDoubleBuffered(true);\n                getSelectedPane().getHorizontalScrollBar().revalidate();\n                getSelectedPane().getVerticalScrollBar().revalidate();\n                getSelectedSpace().repaint();\n            }\n        });\n        \n        \n        \n        \n        \n        /**and using a group layout, we add a new tab to our JFrame\n                 * my original code was using buttons I'm just simplifying the code to make it                  .                */easier to read,that's why I'm using group layour     ,          \n        GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\n        groupLayout.setHorizontalGroup(\n            groupLayout.createParallelGroup(Alignment.LEADING)\n                .addGroup(groupLayout.createSequentialGroup()\n                    .addContainerGap()\n                    .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\n                    .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                    .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\n                    .addGap(28))\n        );\n        groupLayout.setVerticalGroup(\n            groupLayout.createParallelGroup(Alignment.LEADING)\n                .addGroup(groupLayout.createSequentialGroup()\n                    .addContainerGap()\n                    .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\n                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\n                    .addGap(18))\n        );\n        groupSettingManager(groupLayout);\n        \n        \n        \n    }\n</code></pre>\n<p>And the newTab() function is what we do when we create a new tab</p>\n<pre><code>void newTab() {\n        //We first create a new workspace with the given dimentions \n        Workspace workSpace = new Workspace(1295*256, 592*256);\n//request focus so we can add key listeners\n        workSpace.requestFocus();\n        //Our workspace sits inside a scroll pane\n        JScrollPane scrollPane = new JScrollPane(workSpace);\n        numberOfTabbs++;\n        //our scroll pane sits inside a tabbed pane\n        tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\n        tabbedPane.setSelectedIndex(numberOfTabbs-1);\n        scrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n            @Override\n            public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n        });\n        scrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n            @Override\n            public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n        });\n        \n        \n    }\n</code></pre>\n<p>As you may have noticed, we're requesting focus from the new workspace as soon as it's created, however, that doesn't seem to give it focus</p>\n<p>I've tried adding key listeners to the workspace, like so</p>\n<pre><code>public class Workspace extends JPanel implements KeyListener{\n        //we keep every landmass that will appear in the workspace stored in this array\n        public ArrayList&lt;Node&gt; protoLandmass = new ArrayList&lt;Node&gt;();\n        \n        private static Color backGroundColor;\n        private int zoomerValue;\n        private static double zoomFactor; \n        private static int width;\n        private static int height;\n        private static boolean zooming = false;\n\n        /**\n         * \n         */\n        private static final long serialVersionUID = 1L;\n        \n        public Workspace(int w, int h) {\n            eventHandlers();\n            this.setPreferredSize(new Dimension(w,h));\n            \n            backGroundColor = new Color(0,120,255);\n            this.setBackground(backGroundColor);\n            zoomFactor = 1;\n            width = w;\n            height = h;\n            zoomerValue = 1000;\n            this.setFocusable(true);\n                        //I've also tried to request focus here, that didn't work either\n            //this.requestFocus();\n            this.addKeyListener(this);\n            //this.requestFocusInWindow();\n            repaint();\n        }\n\n                ...\n\n                @Override\n        public void keyTyped(KeyEvent e) {\n            ... \n        }\n        @Override\n        public void keyPressed(KeyEvent e) {\n            ...\n            }   \n        }\n        @Override\n        public void keyReleased(KeyEvent e) {\n            ...\n        }\n</code></pre>\n<p>The key listeners here don't work, even though I have tried requesting focus in multiple places</p>\n<p>The mouse listeners seem to work when I create events here:</p>\n<pre><code>private void eventHandlers() {\n            this.addMouseListener(new MouseAdapter() {  \n                @Override\n                public void mousePressed(MouseEvent e) {\n                        ...\n                    repaint();\n                }\n                \n                public void mouseClicked(MouseEvent e) {\n                                ...\n                }\n                public void mouseReleased(MouseEvent e) {\n                                ...\n                }\n                public void mouseExited(MouseEvent e) {\n                                        ...\n                    repaint();\n                }\n                public void mouseEntered(MouseEvent e) {\n                    ...\n                    repaint();\n                }\n            });\n            \n            this.addMouseMotionListener(new MouseMotionAdapter() {\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                        repaint();\n                }\n                public void mouseDragged(MouseEvent e) {\n                    repaint();\n                }\n            \n                public void mouseWheelMoved(MouseEvent e) {\n                                       // this one doesn't work either\n                        Cartographer.isScrolling = true;\n                }\n            });\n                \n                this.addKeyListener(new KeyAdapter(){\n\n               @Override\n        public void keyTyped(KeyEvent e) {\n            ...\n            \n        }\n                @override\n        public void keyPressed(KeyEvent e) {\n            ...\n            }\n                \n                \n            \n        }\n                @override\n        public void keyReleased(KeyEvent e) {\n            ... \n        }       \n            \n    }\n</code></pre>\n<p>I tried adding key listeners here, but they didn't work either. I never tried having key listeners in both places at the same time, I'm just showing all the places they have been to make it easier for you.</p>\n<p>Minimal reproducible example:</p>\n<pre><code>  import java.awt.Color;  \n    import java.awt.EventQueue;\n    import java.awt.event.MouseEvent;\n    import java.awt.event.MouseListener;\n    \n    import javax.swing.JFrame;\n    import javax.swing.JScrollPane;\n    import javax.swing.JTabbedPane;\n    import javax.swing.GroupLayout;\n    import javax.swing.GroupLayout.Alignment;\n    import javax.swing.LayoutStyle.ComponentPlacement;\n    import javax.swing.JSlider;\n    import javax.swing.SwingConstants;\n    import javax.swing.event.ChangeListener;\n    import javax.swing.event.ChangeEvent;\n    \n    \n    \n    public class Cartographer {\n    \n        private final JFrame frmMyWorld = new JFrame();\n        /**\n         * set up our toolbar\n         */\n        double hPortion = 0;\n        double vPortion = 0;\n        \n        \n        //the space that will contain everything that is drawn\n        private static JTabbedPane tabbedPane;\n        private int numberOfTabbs;\n        public static boolean isScrolling;\n        private static JSlider zoomer;\n        \n        \n        public static void main(String[] args) {\n            EventQueue.invokeLater(new Runnable() {\n                public void run() {\n                    try {\n                        Cartographer window = new Cartographer();\n                        window.frmMyWorld.setVisible(true);\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n                }\n            });\n        }\n    \n        /**\n         * Create the application.\n         */\n        public Cartographer() { \n            initialize();\n        }\n    \n        /**\n         * Initialise the contents of the frame.\n         */\n        private void initialize() {\n            \n            frmMyWorld.setTitle(&quot;My World&quot;);\n            frmMyWorld.setBounds(0, 0, 1450, 805);\n            frmMyWorld.getContentPane().setBackground(new Color(100,100,100));\n            frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            \n            tabbedPane = new JTabbedPane(JTabbedPane.TOP);\n            newTab();\n            isScrolling = true;\n    \n            /**\n             * give everything its position in the window, we're using a group layout\n             */\n            zoomer = new JSlider();\n            zoomer.setMinimum(-1000);\n            zoomer.setMaximum(1000);\n            zoomer.setValue(1000);\n            zoomer.setOrientation(SwingConstants.VERTICAL);\n            zoomer.addChangeListener(new ChangeListener() {\n                public void stateChanged(ChangeEvent e) {\n                    if(isScrolling) {\n                        hPortion = getHPortion();\n                        vPortion = getVPortion();\n                    }\n                    isScrolling = false;\n                    int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\n                    int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\n                    getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/1000 - 1));\n                    getSelectedSpace().setZoomerValue(zoomer.getValue());\n                    getSelectedSpace().repaint();\n                    getSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\n                    getSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \n                    getSelectedPane().addNotify();\n                    getSelectedPane().revalidate();\n                    getSelectedPane().setDoubleBuffered(true);\n                    getSelectedPane().getHorizontalScrollBar().revalidate();\n                    getSelectedPane().getVerticalScrollBar().revalidate();\n                    getSelectedSpace().repaint();\n                }\n            });\n            \n            \n            \n            \n            \n            \n            GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\n            groupLayout.setHorizontalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                    .addGroup(groupLayout.createSequentialGroup()\n                        .addContainerGap()\n                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\n                        .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                            .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\n                        .addGap(28))\n            );\n            groupLayout.setVerticalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                    .addGroup(groupLayout.createSequentialGroup()\n                        .addContainerGap()\n                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                            .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\n                            .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\n                        .addGap(18))\n            );\n            groupSettingManager(groupLayout);\n            \n            \n            \n        }\n        \n    \n    \n        void groupSettingManager(GroupLayout groupLayout) {\n                frmMyWorld.getContentPane().setLayout(groupLayout);\n        }\n    \n    \n        void newTab() {\n            //We first create a new workspace with the given dimentions \n            Workspace workSpace = new Workspace(1295*4, 592*4);\n            //we need to focus on this new workspace for key listeners to work\n            //Our workspace sits inside a scroll pane\n            JScrollPane scrollPane = new JScrollPane(workSpace);\n            numberOfTabbs++;\n            //our scroll pane sits inside a tabbed pane\n            tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\n            workSpace.requestFocus();\n            tabbedPane.setSelectedIndex(numberOfTabbs-1);\n            scrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\n                @Override\n                public void mousePressed(MouseEvent e) {\n                    isScrolling = true;\n                }\n                @Override\n                public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n            });\n            scrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\n                @Override\n                public void mousePressed(MouseEvent e) {\n                    isScrolling = true;\n                }\n                @Override\n                public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n            });\n            \n            \n        }\n        \n        \n        static Workspace getSelectedSpace() {\n            return ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\n        }\n        JScrollPane getSelectedPane() {\n            return (JScrollPane) tabbedPane.getSelectedComponent();\n        }\n        Workspace getSpace(int i) {\n            return ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\n        }\n        JScrollPane getPane(int i) {\n            return (JScrollPane) tabbedPane.getComponent(i);\n        }\n        \n        \n        \n         static void setZoomerValue(int i) {\n            if(-1000 &lt;= i &amp;&amp; i &lt;= 1000)\n                zoomer.setValue(i);\n        }\n        int getZoomerValue() {\n            return zoomer.getValue();   \n        }\n        \n        public double getHPortion() {\n            int m = getSelectedPane().getHorizontalScrollBar().getMaximum();\n            int v = getSelectedPane().getHorizontalScrollBar().getValue();\n            double a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount()/2;\n            return (v + a)/m;\n        }\n        public double getVPortion() {\n            int m = getSelectedPane().getVerticalScrollBar().getMaximum();\n            int v = getSelectedPane().getVerticalScrollBar().getValue();\n            double a = getSelectedPane().getVerticalScrollBar().getVisibleAmount()/2;\n            return (v +a)/m;\n        }\n        public int hVisible() {\n            return getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\n        }\n        public int vVisible() {\n            return getSelectedPane().getVerticalScrollBar().getVisibleAmount();\n        }\n    \n    \n    }\n\n    import java.awt.Color; \n    import java.awt.Dimension;\n    import java.awt.Graphics;\n    import java.awt.Graphics2D;\n    import java.awt.LayoutManager;\nimport java.awt.event.KeyAdapter;\nimport java.awt.event.KeyEvent;\n    import java.awt.event.KeyListener;\n    import java.awt.event.MouseAdapter;\n    import java.awt.event.MouseEvent;\n    import java.awt.event.MouseMotionAdapter;\n\n    import javax.swing.JPanel;\n\n    public class Workspace extends JPanel implements KeyListener{\n        //we keep every landmass that will appear in the workspace stored in this array\n        \n        private static Color backGroundColor;\n        private static Color foreGroundColor;\n        private int zoomerValue;\n        private static double zoomFactor; \n        private static int width;\n        private static int height;\n\n        /**\n         * \n         */\n        private static final long serialVersionUID = 1L;\n        \n        public Workspace(int w, int h) {\n            eventHandlers();\n            this.setPreferredSize(new Dimension(w,h));\n            \n            backGroundColor = Color.BLACK;\n            foreGroundColor = Color.WHITE;\n            this.setBackground(backGroundColor);\n            zoomFactor = 1;\n            width = w;\n            height = h;\n            zoomerValue = 1000;\n            this.setFocusable(true);\n            this.requestFocus();\n            this.addKeyListener(this);\n            //this.requestFocusInWindow();\n            repaint();\n        }\n        \n\n\n\n\n        public Workspace(LayoutManager layout) {\n            super(layout);\n            \n        }\n\n        public Workspace(boolean isDoubleBuffered) {\n            super(isDoubleBuffered);\n            \n        }\n\n        public Workspace(LayoutManager layout, boolean isDoubleBuffered) {\n            super(layout, isDoubleBuffered);\n            \n        }\n        \n        public double getZoomFactor() {\n            return zoomFactor;\n        }\n        public void setZoomFactor(double z) {\n            zoomFactor = z;\n            repaint();\n        }\n        public void adjustZoomFactor(int z) {\n            zoomFactor = Math.pow(2, z);\n            repaint();\n        }\n        \n        \n        public int getZoomerValue() {\n            return zoomerValue;\n        }\n        public void setZoomerValue(int i) {\n            zoomerValue = i;\n        }\n        \n        \n        \n        \n        \n        \n        \n        /**\n         * Paint Function and supplement functions \n         */\n        public void paint(Graphics g)\n        {\n            Graphics2D g2= (Graphics2D) g;\n            zoom(g2);\n            //a for loop to run the same function on each of the landmasses to draw them all    \n            for(int i = 0; i &lt; 35; i++)\n                for(int j = Math.floorMod(i, 2); j &lt; 16; j+=2) {\n                    g2.setColor(foreGroundColor);\n                    g2.fillRect(148*i, 148*j, 148, 148);\n                    g2.setColor(Color.GREEN);\n                    g2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;,148*i+66,148*j+72);\n                }\n            this.setBackground(backGroundColor);\n            \n        }\n        private void zoom(Graphics2D g) {\n            //if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\n            g.scale(zoomFactor,zoomFactor);\n            this.setPreferredSize(new Dimension((int) Math.round(width*zoomFactor), (int) Math.round(height*zoomFactor)));\n            this.validate();\n            //if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\n\n        }\n        \n        \n        \n        /**\n         * Any events that occur within the workspace happen here\n         */\n        private void eventHandlers() {\n            this.addMouseListener(new MouseAdapter() {  \n                @Override\n                public void mousePressed(MouseEvent e) {\n                    foreGroundColor = Color.BLUE;\n                    repaint();\n                }\n                \n                public void mouseClicked(MouseEvent e) {\n                    backGroundColor = Color.GRAY;\n                    repaint();\n                }\n                public void mouseReleased(MouseEvent e) {\n                    foreGroundColor = Color.WHITE;\n                    repaint();\n                }\n                public void mouseExited(MouseEvent e) {\n                    backGroundColor = Color.BLACK;\n                    repaint();\n                }\n                public void mouseEntered(MouseEvent e) {\n                    Cartographer.setZoomerValue(zoomerValue);\n                    repaint();\n                }\n            });\n            \n            this.addMouseMotionListener(new MouseMotionAdapter() {\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                        repaint();\n                }\n                public void mouseDragged(MouseEvent e) {\n                    repaint();\n                }\n            \n                public void mouseWheelMoved(MouseEvent e) {\n                        Cartographer.isScrolling = true;\n                }\n            });\n            \n            this.addKeyListener(new KeyAdapter() {\n                public void keyPressed(KeyEvent e) {\n                    foreGroundColor = Color.RED;\n                }\n            });\n            \n            \n        }\n        \n        \n        public int mousePositionX() {\n            return (int) Math.round(getMousePosition().x/zoomFactor);\n        }\n        public int mousePositionY() {\n            return (int) Math.round(getMousePosition().y/zoomFactor);\n        }\n\n\n        @Override\n        public void keyTyped(KeyEvent e) {\n            // TODO Auto-generated method stub\n            \n        }\n\n        @Override\n        public void keyPressed(KeyEvent e) {\n            switch(e.getKeyCode()) {\n            case 38 : if(zoomerValue &lt; 1000) { zoomerValue+=5; Cartographer.setZoomerValue(zoomerValue);} \n                repaint();\n            break;\n            case 40 : if(zoomerValue &gt; -1000) {zoomerValue-=5; Cartographer.setZoomerValue(zoomerValue);} \n                System.out.println(zoomerValue);\n                repaint();\n            break;\n            default: repaint();\n            }\n                \n                \n            \n        }\n\n        @Override\n        public void keyReleased(KeyEvent e) {\n                \n        }\n        \n        \n        \n\n}\n</code></pre>\n"},{"tags":["java","ssl","sslhandshakeexception","ssl-handshake"],"comments":[{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":1,"creation_date":1683223137,"post_id":76176047,"comment_id":134337658,"body_markdown":"Strange. Seems as if the server does not support the TLS protocols that are sent int the CH. It seems to be a server issue. Check it&#39;s configuration for what protocols and cipher suites it supports.","body":"Strange. Seems as if the server does not support the TLS protocols that are sent int the CH. It seems to be a server issue. Check it&#39;s configuration for what protocols and cipher suites it supports."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1683223384,"post_id":76176047,"comment_id":134337716,"body_markdown":"Have you troubleshot, e.g., https://dzone.com/articles/troubleshooting-javaxnetsslsslhandshakeexception-r","body":"Have you troubleshot, e.g., <a href=\"https://dzone.com/articles/troubleshooting-javaxnetsslsslhandshakeexception-r\" rel=\"nofollow noreferrer\">dzone.com/articles/&hellip;</a>"},{"owner":{"account_id":3829506,"reputation":197,"user_id":3175474,"display_name":"Jeff C Johnson"},"score":0,"creation_date":1683224193,"post_id":76176047,"comment_id":134337877,"body_markdown":"Ugh, this is embarrasing, I thought I had changed it to .gov and tested it but I was still looking at the .com, which does indeed work.  So, PEBKAC, problem exists between keyboard and chair.  Sorry for the bother and thanks for the help!","body":"Ugh, this is embarrasing, I thought I had changed it to .gov and tested it but I was still looking at the .com, which does indeed work.  So, PEBKAC, problem exists between keyboard and chair.  Sorry for the bother and thanks for the help!"}],"answers":[{"tags":[],"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683223563,"creation_date":1683223563,"answer_id":76176181,"question_id":76176047,"body_markdown":"TL;DR: use .gov not .com in your Java code. The .com site does not even work with HTTPS in the browser.\r\n\r\n&gt; The site works in browsers so their admins don&#39;t see a problem and won&#39;t help.\r\n\r\nIt does not work in the browser. When trying to access `https://www.hudhomestore.com` in a fresh browser profile (without any cached information) it shows:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut, `https://www.hudhomestore.gov` (.gov not .com) works and an insecure request to `http://www.hudhomestore.com` (note: http instead of https) works too. The latter returns a permanent redirect (code 301) to (the working) `https://www.hudhomestore.gov`. Since a permanent redirect is cached by the browser it might be that a previous access to (the now non-working) `https://www.hudhomestore.com` also returned the same 301 redirect to the gov site and that when you try to access the non-working site it will use the redirect target from the cache and not actually visit the entered URL first.\r\n\r\n  [1]: https://i.stack.imgur.com/gGj5k.png","title":"Why can&#39;t Java 11 connect to web site that browsers can?","body":"<p>TL;DR: use .gov not .com in your Java code. The .com site does not even work with HTTPS in the browser.</p>\n<blockquote>\n<p>The site works in browsers so their admins don't see a problem and won't help.</p>\n</blockquote>\n<p>It does not work in the browser. When trying to access <code>https://www.hudhomestore.com</code> in a fresh browser profile (without any cached information) it shows:</p>\n<p><a href=\"https://i.stack.imgur.com/gGj5k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gGj5k.png\" alt=\"enter image description here\" /></a></p>\n<p>But, <code>https://www.hudhomestore.gov</code> (.gov not .com) works and an insecure request to <code>http://www.hudhomestore.com</code> (note: http instead of https) works too. The latter returns a permanent redirect (code 301) to (the working) <code>https://www.hudhomestore.gov</code>. Since a permanent redirect is cached by the browser it might be that a previous access to (the now non-working) <code>https://www.hudhomestore.com</code> also returned the same 301 redirect to the gov site and that when you try to access the non-working site it will use the redirect target from the cache and not actually visit the entered URL first.</p>\n"}],"owner":{"account_id":3829506,"reputation":197,"user_id":3175474,"display_name":"Jeff C Johnson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76176181,"answer_count":1,"score":0,"last_activity_date":1683223902,"creation_date":1683222470,"question_id":76176047,"body_markdown":"I&#39;m trying to connect connect to a website that recently changed their TLS configuration.  It no longer works from Java 11 (nor 17).  It fails at the handshake but the error message doesn&#39;t say exactly what went wrong.  The site works in browsers so their admins don&#39;t see a problem and won&#39;t help.\r\n\r\nIs there anything I can do on the Java side to fix this?\r\n\r\n```\r\nimport java.net.URL\r\n\r\n// nmap --script ssl-enum-ciphers -p 443 www.hudhomestore.gov\r\n\r\nfun main(args: Array&lt;String&gt;) {\r\n    // System.setProperty(&quot;javax.net.debug&quot;, &quot;all&quot;)\r\n    System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl:handshake&quot;)\r\n    URL(&quot;https://www.hudhomestore.com/Home/Index.aspx&quot;)\r\n        .openStream()\r\n        .use { println(it.readBytes().size) }\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.036 EDT|SSLCipher.java:464|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = 137438953472\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.319 EDT|Utilities.java:73|the previous server name in SNI (type=host_name (0), value=www.hudhomestore.com) was replaced with (type=host_name (0), value=www.hudhomestore.com)\r\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.371 EDT|SignatureScheme.java:295|Signature algorithm, ed25519, is not supported by the underlying providers\r\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.372 EDT|SignatureScheme.java:295|Signature algorithm, ed448, is not supported by the underlying providers\r\njavax.net.ssl|INFO|01|main|2023-05-04 13:32:40.382 EDT|AlpnExtension.java:178|No available application protocols\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.382 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: application_layer_protocol_negotiation\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.384 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: cookie\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.457 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: renegotiation_info\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|PreSharedKeyExtension.java:633|No session to resume.\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: pre_shared_key\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.468 EDT|ClientHello.java:642|Produced ClientHello handshake message (\r\n&quot;ClientHello&quot;: {\r\n  &quot;client version&quot;      : &quot;TLSv1.2&quot;,\r\n  &quot;random&quot;              : &quot;90 C5 39 A6 86 30 CF 64 9A 11 07 3E D1 7E A9 6E CD 61 9C 29 0D E7 64 C3 EA 1F 14 88 F6 01 30 20&quot;,\r\n  &quot;session id&quot;          : &quot;87 AC EA CD C3 8D E5 83 30 15 9F 64 28 AE 8A F3 BC 9E A3 23 81 A1 29 4B 41 FE D5 E7 0C BE 07 2A&quot;,\r\n  &quot;cipher suites&quot;       : &quot;[TLS_AES_256_GCM_SHA384(0x1302), TLS_AES_128_GCM_SHA256(0x1301), TLS_CHACHA20_POLY1305_SHA256(0x1303), TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384(0xC02C), TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256(0xC02B), TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA9), TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384(0xC030), TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA8), TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256(0xC02F), TLS_DHE_RSA_WITH_AES_256_GCM_SHA384(0x009F), TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCAA), TLS_DHE_DSS_WITH_AES_256_GCM_SHA384(0x00A3), TLS_DHE_RSA_WITH_AES_128_GCM_SHA256(0x009E), TLS_DHE_DSS_WITH_AES_128_GCM_SHA256(0x00A2), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384(0xC024), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384(0xC028), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256(0xC023), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256(0xC027), TLS_DHE_RSA_WITH_AES_256_CBC_SHA256(0x006B), TLS_DHE_DSS_WITH_AES_256_CBC_SHA256(0x006A), TLS_DHE_RSA_WITH_AES_128_CBC_SHA256(0x0067), TLS_DHE_DSS_WITH_AES_128_CBC_SHA256(0x0040), TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384(0xC02E), TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384(0xC032), TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256(0xC02D), TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256(0xC031), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384(0xC026), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384(0xC02A), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256(0xC025), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256(0xC029), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_GCM_SHA384(0x009D), TLS_RSA_WITH_AES_128_GCM_SHA256(0x009C), TLS_RSA_WITH_AES_256_CBC_SHA256(0x003D), TLS_RSA_WITH_AES_128_CBC_SHA256(0x003C), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\r\n  &quot;compression methods&quot; : &quot;00&quot;,\r\n  &quot;extensions&quot;          : [\r\n    &quot;server_name (0)&quot;: {\r\n      type=host_name (0), value=www.hudhomestore.com\r\n    },\r\n    &quot;status_request (5)&quot;: {\r\n      &quot;certificate status type&quot;: ocsp\r\n      &quot;OCSP status request&quot;: {\r\n        &quot;responder_id&quot;: &lt;empty&gt;\r\n        &quot;request extensions&quot;: {\r\n          &lt;empty&gt;\r\n        }\r\n      }\r\n    },\r\n    &quot;supported_groups (10)&quot;: {\r\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\r\n    },\r\n    &quot;ec_point_formats (11)&quot;: {\r\n      &quot;formats&quot;: [uncompressed]\r\n    },\r\n    &quot;signature_algorithms (13)&quot;: {\r\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\r\n    },\r\n    &quot;signature_algorithms_cert (50)&quot;: {\r\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\r\n    },\r\n    &quot;status_request_v2 (17)&quot;: {\r\n      &quot;cert status request&quot;: {\r\n        &quot;certificate status type&quot;: ocsp_multi\r\n        &quot;OCSP status request&quot;: {\r\n          &quot;responder_id&quot;: &lt;empty&gt;\r\n          &quot;request extensions&quot;: {\r\n            &lt;empty&gt;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    &quot;extended_master_secret (23)&quot;: {\r\n      &lt;empty&gt;\r\n    },\r\n    &quot;supported_versions (43)&quot;: {\r\n      &quot;versions&quot;: [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1]\r\n    },\r\n    &quot;psk_key_exchange_modes (45)&quot;: {\r\n      &quot;ke_modes&quot;: [psk_dhe_ke]\r\n    },\r\n    &quot;key_share (51)&quot;: {\r\n      &quot;client_shares&quot;: [  \r\n        {\r\n          &quot;named group&quot;: x25519\r\n          &quot;key_exchange&quot;: {\r\n            0000: 69 7F BD A5 0C 85 0B 8C   21 09 1E 6E 6B 98 57 EF  i.......!..nk.W.\r\n            0010: 26 3A 77 BE 0B 67 71 5C   9E 02 76 82 38 D2 56 00  &amp;:w..gq\\..v.8.V.\r\n          }\r\n        },\r\n      ]\r\n    }\r\n  ]\r\n}\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.511 EDT|Alert.java:238|Received alert message (\r\n&quot;Alert&quot;: {\r\n  &quot;level&quot;      : &quot;fatal&quot;,\r\n  &quot;description&quot;: &quot;handshake_failure&quot;\r\n}\r\n)\r\njavax.net.ssl|ERROR|01|main|2023-05-04 13:32:40.514 EDT|TransportContext.java:352|Fatal (HANDSHAKE_FAILURE): Received fatal alert: handshake_failure (\r\n&quot;throwable&quot; : {\r\n  javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n  \tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n  \tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\r\n  \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\r\n  \tat java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\r\n  \tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\r\n  \tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\r\n  \tat java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\r\n  \tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\r\n  \tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\r\n  \tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\r\n  \tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\r\n  \tat java.base/java.net.URL.openStream(URL.java:1165)\r\n  \tat TLSTestKt.main(TLSTest.kt:7)}\r\n\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1737|close the underlying socket\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1756|close the SSL connection (initiative)\r\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\r\n\tat java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\r\n\tat java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\r\n\tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\r\n\tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\r\n\tat java.base/java.net.URL.openStream(URL.java:1165)\r\n\tat TLSTestKt.main(TLSTest.kt:7)\r\n\r\nProcess finished with exit code 1\r\n```","title":"Why can&#39;t Java 11 connect to web site that browsers can?","body":"<p>I'm trying to connect connect to a website that recently changed their TLS configuration.  It no longer works from Java 11 (nor 17).  It fails at the handshake but the error message doesn't say exactly what went wrong.  The site works in browsers so their admins don't see a problem and won't help.</p>\n<p>Is there anything I can do on the Java side to fix this?</p>\n<pre><code>import java.net.URL\n\n// nmap --script ssl-enum-ciphers -p 443 www.hudhomestore.gov\n\nfun main(args: Array&lt;String&gt;) {\n    // System.setProperty(&quot;javax.net.debug&quot;, &quot;all&quot;)\n    System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl:handshake&quot;)\n    URL(&quot;https://www.hudhomestore.com/Home/Index.aspx&quot;)\n        .openStream()\n        .use { println(it.readBytes().size) }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>javax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.036 EDT|SSLCipher.java:464|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = 137438953472\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.319 EDT|Utilities.java:73|the previous server name in SNI (type=host_name (0), value=www.hudhomestore.com) was replaced with (type=host_name (0), value=www.hudhomestore.com)\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.371 EDT|SignatureScheme.java:295|Signature algorithm, ed25519, is not supported by the underlying providers\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.372 EDT|SignatureScheme.java:295|Signature algorithm, ed448, is not supported by the underlying providers\njavax.net.ssl|INFO|01|main|2023-05-04 13:32:40.382 EDT|AlpnExtension.java:178|No available application protocols\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.382 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: application_layer_protocol_negotiation\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.384 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: cookie\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.457 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: renegotiation_info\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|PreSharedKeyExtension.java:633|No session to resume.\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: pre_shared_key\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.468 EDT|ClientHello.java:642|Produced ClientHello handshake message (\n&quot;ClientHello&quot;: {\n  &quot;client version&quot;      : &quot;TLSv1.2&quot;,\n  &quot;random&quot;              : &quot;90 C5 39 A6 86 30 CF 64 9A 11 07 3E D1 7E A9 6E CD 61 9C 29 0D E7 64 C3 EA 1F 14 88 F6 01 30 20&quot;,\n  &quot;session id&quot;          : &quot;87 AC EA CD C3 8D E5 83 30 15 9F 64 28 AE 8A F3 BC 9E A3 23 81 A1 29 4B 41 FE D5 E7 0C BE 07 2A&quot;,\n  &quot;cipher suites&quot;       : &quot;[TLS_AES_256_GCM_SHA384(0x1302), TLS_AES_128_GCM_SHA256(0x1301), TLS_CHACHA20_POLY1305_SHA256(0x1303), TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384(0xC02C), TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256(0xC02B), TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA9), TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384(0xC030), TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA8), TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256(0xC02F), TLS_DHE_RSA_WITH_AES_256_GCM_SHA384(0x009F), TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCAA), TLS_DHE_DSS_WITH_AES_256_GCM_SHA384(0x00A3), TLS_DHE_RSA_WITH_AES_128_GCM_SHA256(0x009E), TLS_DHE_DSS_WITH_AES_128_GCM_SHA256(0x00A2), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384(0xC024), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384(0xC028), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256(0xC023), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256(0xC027), TLS_DHE_RSA_WITH_AES_256_CBC_SHA256(0x006B), TLS_DHE_DSS_WITH_AES_256_CBC_SHA256(0x006A), TLS_DHE_RSA_WITH_AES_128_CBC_SHA256(0x0067), TLS_DHE_DSS_WITH_AES_128_CBC_SHA256(0x0040), TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384(0xC02E), TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384(0xC032), TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256(0xC02D), TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256(0xC031), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384(0xC026), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384(0xC02A), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256(0xC025), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256(0xC029), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_GCM_SHA384(0x009D), TLS_RSA_WITH_AES_128_GCM_SHA256(0x009C), TLS_RSA_WITH_AES_256_CBC_SHA256(0x003D), TLS_RSA_WITH_AES_128_CBC_SHA256(0x003C), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\n  &quot;compression methods&quot; : &quot;00&quot;,\n  &quot;extensions&quot;          : [\n    &quot;server_name (0)&quot;: {\n      type=host_name (0), value=www.hudhomestore.com\n    },\n    &quot;status_request (5)&quot;: {\n      &quot;certificate status type&quot;: ocsp\n      &quot;OCSP status request&quot;: {\n        &quot;responder_id&quot;: &lt;empty&gt;\n        &quot;request extensions&quot;: {\n          &lt;empty&gt;\n        }\n      }\n    },\n    &quot;supported_groups (10)&quot;: {\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\n    },\n    &quot;ec_point_formats (11)&quot;: {\n      &quot;formats&quot;: [uncompressed]\n    },\n    &quot;signature_algorithms (13)&quot;: {\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\n    },\n    &quot;signature_algorithms_cert (50)&quot;: {\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\n    },\n    &quot;status_request_v2 (17)&quot;: {\n      &quot;cert status request&quot;: {\n        &quot;certificate status type&quot;: ocsp_multi\n        &quot;OCSP status request&quot;: {\n          &quot;responder_id&quot;: &lt;empty&gt;\n          &quot;request extensions&quot;: {\n            &lt;empty&gt;\n          }\n        }\n      }\n    },\n    &quot;extended_master_secret (23)&quot;: {\n      &lt;empty&gt;\n    },\n    &quot;supported_versions (43)&quot;: {\n      &quot;versions&quot;: [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1]\n    },\n    &quot;psk_key_exchange_modes (45)&quot;: {\n      &quot;ke_modes&quot;: [psk_dhe_ke]\n    },\n    &quot;key_share (51)&quot;: {\n      &quot;client_shares&quot;: [  \n        {\n          &quot;named group&quot;: x25519\n          &quot;key_exchange&quot;: {\n            0000: 69 7F BD A5 0C 85 0B 8C   21 09 1E 6E 6B 98 57 EF  i.......!..nk.W.\n            0010: 26 3A 77 BE 0B 67 71 5C   9E 02 76 82 38 D2 56 00  &amp;:w..gq\\..v.8.V.\n          }\n        },\n      ]\n    }\n  ]\n}\n)\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.511 EDT|Alert.java:238|Received alert message (\n&quot;Alert&quot;: {\n  &quot;level&quot;      : &quot;fatal&quot;,\n  &quot;description&quot;: &quot;handshake_failure&quot;\n}\n)\njavax.net.ssl|ERROR|01|main|2023-05-04 13:32:40.514 EDT|TransportContext.java:352|Fatal (HANDSHAKE_FAILURE): Received fatal alert: handshake_failure (\n&quot;throwable&quot; : {\n  javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\n    at java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\n    at java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\n    at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\n    at java.base/java.net.URL.openStream(URL.java:1165)\n    at TLSTestKt.main(TLSTest.kt:7)}\n\n)\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1737|close the underlying socket\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1756|close the SSL connection (initiative)\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\n    at java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\n    at java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\n    at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\n    at java.base/java.net.URL.openStream(URL.java:1165)\n    at TLSTestKt.main(TLSTest.kt:7)\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","android","spring","spring-boot","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":26043625,"reputation":61,"user_id":19747944,"display_name":"Amit Bhatiwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683223280,"creation_date":1683223280,"answer_id":76176149,"question_id":76171312,"body_markdown":"It was a bucket Name issue due to this code \r\n\r\n    String uri = request.getRequestURI();\r\n    String uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\r\n    String bucket = uriParts[0];\r\n    String key = uriParts[1];\r\n\r\n,need to make sure bucket name is key is proper before accessing it \r\n\r\n ","title":"Getting Wrong bucket region error while streaming video in spring boot with client android","body":"<p>It was a bucket Name issue due to this code</p>\n<pre><code>String uri = request.getRequestURI();\nString uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\nString bucket = uriParts[0];\nString key = uriParts[1];\n</code></pre>\n<p>,need to make sure bucket name is key is proper before accessing it</p>\n"}],"owner":{"account_id":26043625,"reputation":61,"user_id":19747944,"display_name":"Amit Bhatiwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683223280,"creation_date":1683190505,"question_id":76171312,"body_markdown":"I am trying to create Video streaming app with backend in spring boot. I have created two apis for downloading video file and streaming video file.\r\n\r\nFor downloading video file  \r\n\r\n    @PostMapping(&quot;/api/v1/downloadVideoAWS&quot;)\r\n    public ResponseEntity&lt;ByteArrayResource&gt; downloadFile(@RequestBody FileSnapshot fileSnapshot) {\r\n        byte[] data = fileSnapshotService.downloadVideoAWS(fileSnapshot);\r\n        ByteArrayResource resource = new ByteArrayResource(data);\r\n        return ResponseEntity.ok().contentLength(data.length)\r\n                .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\r\n                .header(&quot;Content-disposition&quot;, &quot;attachement; filename=\\&quot;&quot; + fileSnapshot.getFileName() + &quot;\\&quot;&quot;)\r\n                .body(resource);\r\n    }\r\n\r\nits client request in android retrofit\r\n\r\n    @HTTP(method = &quot;POST&quot;, hasBody = true,path = &quot;/api/v1/downloadVideoAWS&quot;)\r\n    Call &lt;ResponseBody&gt; getVideoFile(@Body FileSnapshot fileSnapshot);\r\n\r\n\r\n\r\nfor streaming video file \r\n\r\n\r\n    @GetMapping(value = &quot;/api/v1/streamVideo/**&quot;, produces = { MediaType.APPLICATION_OCTET_STREAM_VALUE })\r\n    public ResponseEntity&lt;StreamingResponseBody&gt; getObject(HttpServletRequest request) {\r\n        try {\r\n\r\n            String uri = request.getRequestURI();\r\n            String uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\r\n            String bucket = uriParts[0];\r\n            String key = uriParts[1];\r\n            System.out.println(&quot;Fetching &quot; + uri);\r\n            AmazonS3 s3client = fileSnapshotService.getS3Client();\r\n            S3Object object = s3client.getObject(bucket, key);\r\n            S3ObjectInputStream finalObject = object.getObjectContent();\r\n\r\n            final StreamingResponseBody body = outputStream -&gt; {\r\n                int numberOfBytesToWrite = 0;\r\n                byte[] data = new byte[1024];\r\n                while ((numberOfBytesToWrite = finalObject.read(data, 0, data.length)) != -1) {\r\n                    outputStream.write(data, 0, numberOfBytesToWrite);\r\n                }\r\n                finalObject.close();\r\n            };\r\n            return new ResponseEntity&lt;StreamingResponseBody&gt;(body, HttpStatus.OK);\r\n        } catch (Exception e) {\r\n            System.err.println(&quot;Error &quot;+ e.getMessage());\r\n            return new ResponseEntity&lt;StreamingResponseBody&gt;(HttpStatus.BAD_REQUEST);\r\n        }\r\n\r\n    }\r\n\r\nits client request in android retrofit \r\n\r\n     @GET(&quot;/api/v1/streamVideo/{bucketName}/{fileName}&quot;)\r\n    Call&lt;ResponseBody&gt; getStreamingObject(@Path(&quot;bucketName&quot;) String bucketName,@Path(&quot;fileName&quot;)String fileName);\r\n\r\nAmazonS3 client \r\n\r\n    @Bean\r\n    public AmazonS3 gennerateS3Client() {\r\n        AWSCredentials credentials = new BasicAWSCredentials(accessKey,secretKey);\r\n        return  AmazonS3ClientBuilder.standard()\r\n                .withRegion(regionCode)\r\n                .withCredentials(new AWSStaticCredentialsProvider(credentials))\r\n                .build();\r\n\r\n    }\r\nwhere regionCode = &quot;ap-south-1&quot;;\r\n\r\nnow problem is that I am able to download video file without any issue .but when I am trying to stream video file from the API I am getting this error in spring boot \r\n\r\nError The bucket is in this region: eu-west-1. Please use this region to retry the request (Service: Amazon S3; Status Code: 301; Error Code: PermanentRedirect; Request ID: XXXXXXXXXXXXXXXX; S3 Extended Request ID: /XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=; Proxy: null)\r\n\r\nplease help me resolve the issue \r\n","title":"Getting Wrong bucket region error while streaming video in spring boot with client android","body":"<p>I am trying to create Video streaming app with backend in spring boot. I have created two apis for downloading video file and streaming video file.</p>\n<p>For downloading video file</p>\n<pre><code>@PostMapping(&quot;/api/v1/downloadVideoAWS&quot;)\npublic ResponseEntity&lt;ByteArrayResource&gt; downloadFile(@RequestBody FileSnapshot fileSnapshot) {\n    byte[] data = fileSnapshotService.downloadVideoAWS(fileSnapshot);\n    ByteArrayResource resource = new ByteArrayResource(data);\n    return ResponseEntity.ok().contentLength(data.length)\n            .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\n            .header(&quot;Content-disposition&quot;, &quot;attachement; filename=\\&quot;&quot; + fileSnapshot.getFileName() + &quot;\\&quot;&quot;)\n            .body(resource);\n}\n</code></pre>\n<p>its client request in android retrofit</p>\n<pre><code>@HTTP(method = &quot;POST&quot;, hasBody = true,path = &quot;/api/v1/downloadVideoAWS&quot;)\nCall &lt;ResponseBody&gt; getVideoFile(@Body FileSnapshot fileSnapshot);\n</code></pre>\n<p>for streaming video file</p>\n<pre><code>@GetMapping(value = &quot;/api/v1/streamVideo/**&quot;, produces = { MediaType.APPLICATION_OCTET_STREAM_VALUE })\npublic ResponseEntity&lt;StreamingResponseBody&gt; getObject(HttpServletRequest request) {\n    try {\n\n        String uri = request.getRequestURI();\n        String uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\n        String bucket = uriParts[0];\n        String key = uriParts[1];\n        System.out.println(&quot;Fetching &quot; + uri);\n        AmazonS3 s3client = fileSnapshotService.getS3Client();\n        S3Object object = s3client.getObject(bucket, key);\n        S3ObjectInputStream finalObject = object.getObjectContent();\n\n        final StreamingResponseBody body = outputStream -&gt; {\n            int numberOfBytesToWrite = 0;\n            byte[] data = new byte[1024];\n            while ((numberOfBytesToWrite = finalObject.read(data, 0, data.length)) != -1) {\n                outputStream.write(data, 0, numberOfBytesToWrite);\n            }\n            finalObject.close();\n        };\n        return new ResponseEntity&lt;StreamingResponseBody&gt;(body, HttpStatus.OK);\n    } catch (Exception e) {\n        System.err.println(&quot;Error &quot;+ e.getMessage());\n        return new ResponseEntity&lt;StreamingResponseBody&gt;(HttpStatus.BAD_REQUEST);\n    }\n\n}\n</code></pre>\n<p>its client request in android retrofit</p>\n<pre><code> @GET(&quot;/api/v1/streamVideo/{bucketName}/{fileName}&quot;)\nCall&lt;ResponseBody&gt; getStreamingObject(@Path(&quot;bucketName&quot;) String bucketName,@Path(&quot;fileName&quot;)String fileName);\n</code></pre>\n<p>AmazonS3 client</p>\n<pre><code>@Bean\npublic AmazonS3 gennerateS3Client() {\n    AWSCredentials credentials = new BasicAWSCredentials(accessKey,secretKey);\n    return  AmazonS3ClientBuilder.standard()\n            .withRegion(regionCode)\n            .withCredentials(new AWSStaticCredentialsProvider(credentials))\n            .build();\n\n}\n</code></pre>\n<p>where regionCode = &quot;ap-south-1&quot;;</p>\n<p>now problem is that I am able to download video file without any issue .but when I am trying to stream video file from the API I am getting this error in spring boot</p>\n<p>Error The bucket is in this region: eu-west-1. Please use this region to retry the request (Service: Amazon S3; Status Code: 301; Error Code: PermanentRedirect; Request ID: XXXXXXXXXXXXXXXX; S3 Extended Request ID: /XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=; Proxy: null)</p>\n<p>please help me resolve the issue</p>\n"},{"tags":["java","spring-boot","kotlin","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":18129664,"reputation":131,"user_id":13184890,"display_name":"Someone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683222819,"creation_date":1683222819,"answer_id":76176095,"question_id":76175867,"body_markdown":"In Kotlin you can just add extension function like this:\r\n\r\n```kotlin\r\nfun &lt;T, ID&gt; SomeSpecificationExecutorRepository&lt;T, ID&gt;.myCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T? {\r\n    // Your implementation\r\n}\r\n```\r\n\r\nAnd everything will be fine with this","title":"Generic implementation for custom method in @NoRepositoryBean repository Spring Boot","body":"<p>In Kotlin you can just add extension function like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;T, ID&gt; SomeSpecificationExecutorRepository&lt;T, ID&gt;.myCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T? {\n    // Your implementation\n}\n</code></pre>\n<p>And everything will be fine with this</p>\n"}],"owner":{"account_id":18129664,"reputation":131,"user_id":13184890,"display_name":"Someone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683222819,"creation_date":1683221131,"question_id":76175867,"body_markdown":"I have a repository which can execute generic specifications:\r\n\r\n```kotlin\r\n@NoRepositoryBean\r\ninterface SomeSpecificationExecutorRepository&lt;T, ID&gt; :\r\n    JpaRepository&lt;T, ID&gt;,\r\n    JpaSpecificationExecutor&lt;T&gt;\r\n\r\n```\r\n\r\nAnd several target repositories which looks like:\r\n\r\n```kotlin\r\n@Repository\r\ninterface SomeViewRepository : SomeSpecificationExecutorRepository&lt;SomeViewEntity, Long&gt;\r\n```\r\n\r\nNow I want to add a generic\r\n```kotlin\r\nmyCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T?\r\n```\r\nmethod which makes some search according to provided specification and extends this specification predicate with some id-specific clauses.\r\n\r\n\r\nThe problem is that if I want to add some custom methods to `SomeSpecificationExecutorRepository` via one more interface it&#39;s implementation will be also generic one and I couldn&#39;t `SomeSpecificationExecutorRepository` there it to reuse `findAll(specification)` methods.\r\n\r\nIs there any ideas how can I solve this case and add som methods to this `@NoRepositoryBean` repository which will be available in all repositories that use this one?","title":"Generic implementation for custom method in @NoRepositoryBean repository Spring Boot","body":"<p>I have a repository which can execute generic specifications:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@NoRepositoryBean\ninterface SomeSpecificationExecutorRepository&lt;T, ID&gt; :\n    JpaRepository&lt;T, ID&gt;,\n    JpaSpecificationExecutor&lt;T&gt;\n\n</code></pre>\n<p>And several target repositories which looks like:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Repository\ninterface SomeViewRepository : SomeSpecificationExecutorRepository&lt;SomeViewEntity, Long&gt;\n</code></pre>\n<p>Now I want to add a generic</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>myCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T?\n</code></pre>\n<p>method which makes some search according to provided specification and extends this specification predicate with some id-specific clauses.</p>\n<p>The problem is that if I want to add some custom methods to <code>SomeSpecificationExecutorRepository</code> via one more interface it's implementation will be also generic one and I couldn't <code>SomeSpecificationExecutorRepository</code> there it to reuse <code>findAll(specification)</code> methods.</p>\n<p>Is there any ideas how can I solve this case and add som methods to this <code>@NoRepositoryBean</code> repository which will be available in all repositories that use this one?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1683115877,"post_id":76163443,"comment_id":134316433,"body_markdown":"I wouldn&#39;t be iterating through 1 to n in unit steps since &#39;most&#39; of the values will not be selected.  I&#39;d just generate the values that will match - e.g. `for (i=divisor; i&lt;=n; i+=divisor) storeResult(i)`. I&#39;d have one thread per unique divisor 3,5,7. Eliminate duplicates as before.","body":"I wouldn&#39;t be iterating through 1 to n in unit steps since &#39;most&#39; of the values will not be selected.  I&#39;d just generate the values that will match - e.g. <code>for (i=divisor; i&lt;=n; i+=divisor) storeResult(i)</code>. I&#39;d have one thread per unique divisor 3,5,7. Eliminate duplicates as before."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1683120022,"post_id":76163443,"comment_id":134317548,"body_markdown":"my understanding of &quot;multithreaded program that finds all integers in the range [1, n] that are divisible by 3, 5, or 7&quot; is: you need write program using something like: int stream &gt; range &gt; parallel &gt; filter &gt; sum. That would be the only solution which actually makes sense.","body":"my understanding of &quot;multithreaded program that finds all integers in the range [1, n] that are divisible by 3, 5, or 7&quot; is: you need write program using something like: int stream &gt; range &gt; parallel &gt; filter &gt; sum. That would be the only solution which actually makes sense."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1683120232,"post_id":76163443,"comment_id":134317617,"body_markdown":"`IntStream.range(1, n).parallel().filter(i -&gt; i % 3 == 0 || i % 5 == 0 || i % 7 == 0).sum()`","body":"<code>IntStream.range(1, n).parallel().filter(i -&gt; i % 3 == 0 || i % 5 == 0 || i % 7 == 0).sum()</code>"}],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683114963,"creation_date":1683114963,"answer_id":76163523,"question_id":76163443,"body_markdown":"The main solution to your problem is to lose `static` everywhere. Never use `static` unless you have a very good reason to. In this case, you do not. Generally speaking, it will be a few years of programming in Java before you will encounter your first situation where you may legitimately use `static`. Until then, just don&#39;t.\r\n\r\nAs a bonus thought, you could perhaps greatly reduce the amount of work you have to do by not creating a thread for each divisor and instead creating threads for different ranges of integers that you want to process. So, for example, for `n = 1000` you might create two threads, one that will process numbers from 1 to 500 and another that will process numbers from 501 to 1000. This way, each thread is guaranteed to yield numbers that will not be yielded by the other thread.\r\n","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>The main solution to your problem is to lose <code>static</code> everywhere. Never use <code>static</code> unless you have a very good reason to. In this case, you do not. Generally speaking, it will be a few years of programming in Java before you will encounter your first situation where you may legitimately use <code>static</code>. Until then, just don't.</p>\n<p>As a bonus thought, you could perhaps greatly reduce the amount of work you have to do by not creating a thread for each divisor and instead creating threads for different ranges of integers that you want to process. So, for example, for <code>n = 1000</code> you might create two threads, one that will process numbers from 1 to 500 and another that will process numbers from 501 to 1000. This way, each thread is guaranteed to yield numbers that will not be yielded by the other thread.</p>\n"},{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683116825,"creation_date":1683116825,"answer_id":76163819,"question_id":76163443,"body_markdown":"Your problem is the shared variable `temp` which is expected to hold the same value across several statements.\r\n\r\n    public static int temp = 0;\r\n    public static synchronized void increment() {\r\n        dividends.add(temp);\r\n    }\r\n   \r\nIn each thread:\r\n\r\n    temp=i;\r\n    increment();\r\n\r\nSo if thread1 sets &#39;temp&#39;, it can be changed by another thread before thread1 gets to use it in increment.\r\n\r\nBut it&#39;s not necessary anyway.\r\n\r\n    public static synchronized void increment(int x) {\r\n        dividends.add(X);\r\n    }\r\n\r\nthen\r\n\r\n    increment(i);\r\n\r\nOther answers talk about eliminating unnecessary static, which is valid design criticism, but that in itself does not fix your &#39;temp&#39; problem.  Even a non-static &#39;temp&#39; is still shared across threads - there&#39;s one instance of FindMultiples shared by all of the thread instances.\r\n\r\nThis answer addresses the question of why you&#39;re getting variable results.  In comments I&#39;ve noted that efficiency can be improved.\r\n","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>Your problem is the shared variable <code>temp</code> which is expected to hold the same value across several statements.</p>\n<pre><code>public static int temp = 0;\npublic static synchronized void increment() {\n    dividends.add(temp);\n}\n</code></pre>\n<p>In each thread:</p>\n<pre><code>temp=i;\nincrement();\n</code></pre>\n<p>So if thread1 sets 'temp', it can be changed by another thread before thread1 gets to use it in increment.</p>\n<p>But it's not necessary anyway.</p>\n<pre><code>public static synchronized void increment(int x) {\n    dividends.add(X);\n}\n</code></pre>\n<p>then</p>\n<pre><code>increment(i);\n</code></pre>\n<p>Other answers talk about eliminating unnecessary static, which is valid design criticism, but that in itself does not fix your 'temp' problem.  Even a non-static 'temp' is still shared across threads - there's one instance of FindMultiples shared by all of the thread instances.</p>\n<p>This answer addresses the question of why you're getting variable results.  In comments I've noted that efficiency can be improved.</p>\n"},{"tags":[],"owner":{"account_id":15831863,"reputation":36,"user_id":13157139,"display_name":"Mukhtar Amirkhanov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683219928,"creation_date":1683117589,"answer_id":76163931,"question_id":76163443,"body_markdown":"Most likely your main problem is that you are synchronizing the increment() method, and not synchronizing the temp variable.\r\nWhile one thread is trying to execute the increment() method, the second thread is changing the value of the temp variable. Run your code in debug and check it out.\r\n\r\nIt&#39;s better to send the value directly to increment() than store it in temp.\r\nSee my edited code:\r\n\r\n    import java.util.*;\r\n    public class FindMultiples\r\n    {\r\n\r\n      public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\r\n      public static synchronized void increment(int temp){\r\n         dividends.add(temp);\r\n      }\r\n      \r\n      public static class MyThread implements Runnable{\r\n\r\n        public int divisor;\r\n        public int n;\r\n\r\n        public MyThread(int n , int divisor){\r\n            this.n=n;\r\n            this.divisor=divisor;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n\r\n            for (int i=1 ; i&lt;=n ; i++){\r\n                if (i%divisor==0){\r\n                    increment(i);\r\n                }\r\n            }\r\n        }\r\n      }\r\n\r\n      public int getSum(int n) {\r\n        int sum = 0;\r\n        Thread thread1 = new Thread(new MyThread(n,3));\r\n        Thread thread2 = new Thread(new MyThread(n,7));\r\n        Thread thread3 = new Thread(new MyThread(n,5));\r\n\r\n        thread3.start();\r\n        thread2.start();\r\n        thread1.start();\r\n        try {\r\n            thread3.join();\r\n            thread2.join();\r\n            thread1.join();\r\n        }catch (InterruptedException e){\r\n            System.out.println(e.getMessage());\r\n        }\r\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\r\n        dividends.clear();\r\n        dividends.addAll(set);\r\n\r\n        for (int i : dividends){\r\n            sum+=i;\r\n        }\r\n\r\n        return sum;\r\n      }\r\n\r\n      public static void main(String[] args) {\r\n        FindMultiples findMultiples = new FindMultiples();\r\n        System.out.println(findMultiples.getSum(1000));\r\n      }\r\n    }","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>Most likely your main problem is that you are synchronizing the increment() method, and not synchronizing the temp variable.\nWhile one thread is trying to execute the increment() method, the second thread is changing the value of the temp variable. Run your code in debug and check it out.</p>\n<p>It's better to send the value directly to increment() than store it in temp.\nSee my edited code:</p>\n<pre><code>import java.util.*;\npublic class FindMultiples\n{\n\n  public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\n  public static synchronized void increment(int temp){\n     dividends.add(temp);\n  }\n  \n  public static class MyThread implements Runnable{\n\n    public int divisor;\n    public int n;\n\n    public MyThread(int n , int divisor){\n        this.n=n;\n        this.divisor=divisor;\n    }\n\n    @Override\n    public void run() {\n\n        for (int i=1 ; i&lt;=n ; i++){\n            if (i%divisor==0){\n                increment(i);\n            }\n        }\n    }\n  }\n\n  public int getSum(int n) {\n    int sum = 0;\n    Thread thread1 = new Thread(new MyThread(n,3));\n    Thread thread2 = new Thread(new MyThread(n,7));\n    Thread thread3 = new Thread(new MyThread(n,5));\n\n    thread3.start();\n    thread2.start();\n    thread1.start();\n    try {\n        thread3.join();\n        thread2.join();\n        thread1.join();\n    }catch (InterruptedException e){\n        System.out.println(e.getMessage());\n    }\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\n    dividends.clear();\n    dividends.addAll(set);\n\n    for (int i : dividends){\n        sum+=i;\n    }\n\n    return sum;\n  }\n\n  public static void main(String[] args) {\n    FindMultiples findMultiples = new FindMultiples();\n    System.out.println(findMultiples.getSum(1000));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683145699,"creation_date":1683118249,"answer_id":76164034,"question_id":76163443,"body_markdown":"### See mine\r\n#### For `n ~= 100,000`, better use `long getSum(int n)`\r\n...and we need to adjust.\r\n\r\nComments inline:\r\n```lang-java\r\npackage com.example;\r\n\r\nimport java.util.BitSet;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.ExecutorCompletionService;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class Test {\r\n    // Our thread pool (e.g...):\r\n    static final ExecutorService THREAD_POOL = Executors.newFixedThreadPool(3);\r\n    // to complete our &quot;tasks&quot; (see javadoc):\r\n    static final ExecutorCompletionService&lt;BitSet&gt; ECS = new ExecutorCompletionService&lt;&gt;(THREAD_POOL);\r\n\r\n    static long getSum(int n) throws InterruptedException, ExecutionException { // for brevity: throw\r\n        // start &quot;3 job&quot;:\r\n        ECS.submit(() -&gt; findDivisors(3, n));\r\n        // start &quot;5 job&quot;:\r\n        ECS.submit(() -&gt; findDivisors(5, n));\r\n        // start &quot;7 job&quot;:\r\n        ECS.submit(() -&gt; findDivisors(7, n));\r\n\r\n        // collect result:\r\n        BitSet collect = new BitSet(n + 1);\r\n        for (int i = 3; i &gt; 0; i--) { // complete all jobs ...\r\n            BitSet tmpResult = ECS.take().get(); // see javadoc\r\n            if (tmpResult != null) // &quot;or&#39;ing&quot; their results into &quot;collect&quot;:\r\n                collect.or(tmpResult);\r\n        }\r\n\r\n        // stream over &quot;all set indices&quot; in &quot;collect&quot; and return ...\r\n        return collect.stream()\r\n                // ... (as a long;) their sum \r\n                .mapToLong(i -&gt; (long) i).sum();\r\n    }\r\n\r\n    static BitSet findDivisors(int d, int n) { // MAIN JOB:\r\n        BitSet mem = new BitSet(n + 1); // ignore 0th bit\r\n        for (int i = d; i &lt;= n; i += d) { // set i(th) index to true:\r\n            mem.set(i);\r\n        }\r\n        return mem; // done!\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException, ExecutionException {\r\n        // do I/O, more tests...:\r\n        System.out.println(getSum(10));\r\n        System.out.println(getSum(100));\r\n        System.out.println(getSum(1_000));\r\n        System.out.println(getSum(10_000));\r\n        System.out.println(getSum(100_000));\r\n        System.out.println(getSum(1_000_000));\r\n        System.out.println(getSum(10_000_000));\r\n        System.out.println(getSum(100_000_000));\r\n        System.out.println(getSum(1_000_000_000));\r\n        // System.out.println(getSum(2_000_000_000)); // oh-oh\r\n        // finally: release resources:\r\n        THREAD_POOL.shutdown();\r\n    }\r\n}\r\n```\r\n#### Prints:\r\n```lang-text\r\n40\r\n2838\r\n272066\r\n27152139\r\n2714364277\r\n271428928569\r\n27142867857145\r\n2714285835714288\r\n271428572071428566\r\n1085714285285714288 # ?? &lt;- this looks like (long!) overflow ;(\r\n```\r\n\r\n### References\r\n- [`ExecutorCompletionService`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorCompletionService.html) + linked (since java 1.5)\r\n- [`BitSet`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html) (since java 1.0;)\r\n- [`Executor`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html)\r\n- [`ExecutorService`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html)\r\n\r\n### Key Points\r\n- BitSet as &quot;data structure&quot;:\r\n  - similar to `boolean[]([])`, but:\r\n    - better memory efficience (a `boolean` costs 1 byte of memory (in current hw architecture), whereas BitSet can do better (backed by a `long[]|byte[]`))\r\n    - advanced API (`or, and, xor, cardinality, stream, ...`)\r\n  - to overcome its lack of multi-thread support we can:\r\n    - &quot;synchronize&quot;\r\n    - use multiple BitSets to join/or/and/... them together\r\n- `i`th index in bitSet_x (3/5/7) set, means: `i` is divisible by x (3/5/7)\r\n- challenges start from `n~=100000`\r\n\r\n\r\n----------\r\n\r\n\r\nAnd the &quot;ultra-light&quot; version (regarding the lines of code, performance is another chapter), inspired by Andrey B.P.:\r\n```lang-java\r\n[static] long getSum(int n) {\r\n  return IntStream.rangeClosed(1, n) // rangeClosed not range (or +/-1;)\r\n    .parallel() // ok\r\n    .filter(i -&gt;\r\n         (i % 3 == 0 &amp;&amp; i % 15 &gt; 0 &amp;&amp; i % 21 &gt; 0) // 1.\r\n      || (i % 5 == 0 &amp;&amp; i % 35 &gt; 0) // 2.\r\n      || (i % 7 == 0) // 3.\r\n    )\r\n    .mapToLong(i -&gt; (long) i) // for bigger input\r\n    .sum(); // #\r\n}\r\n```\r\n","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<h3>See mine</h3>\n<h4>For <code>n ~= 100,000</code>, better use <code>long getSum(int n)</code></h4>\n<p>...and we need to adjust.</p>\n<p>Comments inline:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport java.util.BitSet;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorCompletionService;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class Test {\n    // Our thread pool (e.g...):\n    static final ExecutorService THREAD_POOL = Executors.newFixedThreadPool(3);\n    // to complete our &quot;tasks&quot; (see javadoc):\n    static final ExecutorCompletionService&lt;BitSet&gt; ECS = new ExecutorCompletionService&lt;&gt;(THREAD_POOL);\n\n    static long getSum(int n) throws InterruptedException, ExecutionException { // for brevity: throw\n        // start &quot;3 job&quot;:\n        ECS.submit(() -&gt; findDivisors(3, n));\n        // start &quot;5 job&quot;:\n        ECS.submit(() -&gt; findDivisors(5, n));\n        // start &quot;7 job&quot;:\n        ECS.submit(() -&gt; findDivisors(7, n));\n\n        // collect result:\n        BitSet collect = new BitSet(n + 1);\n        for (int i = 3; i &gt; 0; i--) { // complete all jobs ...\n            BitSet tmpResult = ECS.take().get(); // see javadoc\n            if (tmpResult != null) // &quot;or'ing&quot; their results into &quot;collect&quot;:\n                collect.or(tmpResult);\n        }\n\n        // stream over &quot;all set indices&quot; in &quot;collect&quot; and return ...\n        return collect.stream()\n                // ... (as a long;) their sum \n                .mapToLong(i -&gt; (long) i).sum();\n    }\n\n    static BitSet findDivisors(int d, int n) { // MAIN JOB:\n        BitSet mem = new BitSet(n + 1); // ignore 0th bit\n        for (int i = d; i &lt;= n; i += d) { // set i(th) index to true:\n            mem.set(i);\n        }\n        return mem; // done!\n    }\n\n    public static void main(String[] args) throws InterruptedException, ExecutionException {\n        // do I/O, more tests...:\n        System.out.println(getSum(10));\n        System.out.println(getSum(100));\n        System.out.println(getSum(1_000));\n        System.out.println(getSum(10_000));\n        System.out.println(getSum(100_000));\n        System.out.println(getSum(1_000_000));\n        System.out.println(getSum(10_000_000));\n        System.out.println(getSum(100_000_000));\n        System.out.println(getSum(1_000_000_000));\n        // System.out.println(getSum(2_000_000_000)); // oh-oh\n        // finally: release resources:\n        THREAD_POOL.shutdown();\n    }\n}\n</code></pre>\n<h4>Prints:</h4>\n<pre class=\"lang-text prettyprint-override\"><code>40\n2838\n272066\n27152139\n2714364277\n271428928569\n27142867857145\n2714285835714288\n271428572071428566\n1085714285285714288 # ?? &lt;- this looks like (long!) overflow ;(\n</code></pre>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorCompletionService.html\" rel=\"nofollow noreferrer\"><code>ExecutorCompletionService</code></a> + linked (since java 1.5)</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> (since java 1.0;)</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html\" rel=\"nofollow noreferrer\"><code>Executor</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\"><code>ExecutorService</code></a></li>\n</ul>\n<h3>Key Points</h3>\n<ul>\n<li>BitSet as &quot;data structure&quot;:\n<ul>\n<li>similar to <code>boolean[]([])</code>, but:\n<ul>\n<li>better memory efficience (a <code>boolean</code> costs 1 byte of memory (in current hw architecture), whereas BitSet can do better (backed by a <code>long[]|byte[]</code>))</li>\n<li>advanced API (<code>or, and, xor, cardinality, stream, ...</code>)</li>\n</ul>\n</li>\n<li>to overcome its lack of multi-thread support we can:\n<ul>\n<li>&quot;synchronize&quot;</li>\n<li>use multiple BitSets to join/or/and/... them together</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>i</code>th index in bitSet_x (3/5/7) set, means: <code>i</code> is divisible by x (3/5/7)</li>\n<li>challenges start from <code>n~=100000</code></li>\n</ul>\n<hr />\n<p>And the &quot;ultra-light&quot; version (regarding the lines of code, performance is another chapter), inspired by Andrey B.P.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>[static] long getSum(int n) {\n  return IntStream.rangeClosed(1, n) // rangeClosed not range (or +/-1;)\n    .parallel() // ok\n    .filter(i -&gt;\n         (i % 3 == 0 &amp;&amp; i % 15 &gt; 0 &amp;&amp; i % 21 &gt; 0) // 1.\n      || (i % 5 == 0 &amp;&amp; i % 35 &gt; 0) // 2.\n      || (i % 7 == 0) // 3.\n    )\n    .mapToLong(i -&gt; (long) i) // for bigger input\n    .sum(); // #\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683146997,"creation_date":1683146997,"answer_id":76167884,"question_id":76163443,"body_markdown":"Well, I believe solution below is the most optimal, cause it is just an arithmetic formula:\r\n\r\n```java\r\nBiFunction&lt;Integer, Integer, Long&gt; sumDivInRange = (to, div) -&gt; {\r\n    int first = (1 / div) * div;\r\n    int last = (to / div) * div;\r\n\r\n    return ((long) first + last) * ((last - first) / div + 1) / 2;\r\n};\r\n\r\nint n = 100000000;\r\n\r\n// not sure we need parallel that\r\nreturn sumDivInRange.apply(n, 3)\r\n        + sumDivInRange.apply(n, 5)\r\n        + sumDivInRange.apply(n, 7)\r\n        - sumDivInRange.apply(n, 15)\r\n        - sumDivInRange.apply(n, 21)\r\n        - sumDivInRange.apply(n, 35)\r\n        + sumDivInRange.apply(n, 105);\r\n```","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>Well, I believe solution below is the most optimal, cause it is just an arithmetic formula:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BiFunction&lt;Integer, Integer, Long&gt; sumDivInRange = (to, div) -&gt; {\n    int first = (1 / div) * div;\n    int last = (to / div) * div;\n\n    return ((long) first + last) * ((last - first) / div + 1) / 2;\n};\n\nint n = 100000000;\n\n// not sure we need parallel that\nreturn sumDivInRange.apply(n, 3)\n        + sumDivInRange.apply(n, 5)\n        + sumDivInRange.apply(n, 7)\n        - sumDivInRange.apply(n, 15)\n        - sumDivInRange.apply(n, 21)\n        - sumDivInRange.apply(n, 35)\n        + sumDivInRange.apply(n, 105);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":435105,"reputation":6948,"user_id":821497,"accept_rate":60,"display_name":"ciamej"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683222619,"creation_date":1683219555,"answer_id":76175658,"question_id":76163443,"body_markdown":"When your goal is to parallelize computations you should make sure that your solution is actually faster than a serial (single threaded) one. Unfortunately your code (fixed by Mukhtar Amirkhanov) is probably much slower than a naive loop going through 1 to n. This is because a naive solution does not have to store the actual dividends anywhere. Also your multithreaded program synchronizes on each step, which means it won&#39;t actually make much progress in parallel. Finally, after the threads join your program removes duplicates in the main thread - that step alone take probably way more time than the naive loop.\r\n\r\nUnfortunately, the task is poorly defined, because the fastest solution is just a formula (as shown by @Andrey B. Panfilov) which can be computed in constant time `O(1)` and which cannot be sped up by multithreading. Probably your teacher meant to speed the computations by using multithreading compared to the naive solution, so you should settle for &quot;second-best&quot; approach.\r\n\r\nA meaningful approach to parallelizing such tasks is described by @Mike Nakis in his answer. You should split the work between threads not by the divisor, but by ranges of dividends. You can define separate threads do the work, and after joining them just add their results, or you can simply use a parallel stream (as shown by @Andrey B. Panfilov in a comment, just use a LongStream instead of an IntStream) to the same effect (if streams are allowed in your assignment).\r\n\r\n\r\n    import java.util.*;\r\n    public class FindMultiples\r\n    {\r\n      public static final int numberOfThreads = 3;\r\n      public static long[] partialResults = new long[numberOfThreads];\r\n\r\n      public static class MyThread implements Runnable{\r\n        public int threadNumber;\r\n        public int n;\r\n\r\n        public MyThread(int threadNumber, int n) {\r\n            this.threadNumber = threadNumber;\r\n            this.n = n;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            int start = ((threadNumber - 1) * n / numberOfThreads) + 1;\r\n            int end = threadNumber * n / numberOfThreads;\r\n            long result = 0;\r\n            for (int i = start; i &lt;= end; i++)\r\n                if (i % 3 == 0 || i % 5 == 0 || i % 7 == 0)\r\n                    result += i;\r\n            partialResults[threadNumber - 1] = result;\r\n        }\r\n      }\r\n\r\n      public long getSum(int n) {\r\n        Thread[] threads = new Thread[numberOfThreads];\r\n        for (int i = 1; i &lt;= numberOfThreads; i++)\r\n            threads[i - 1] = new Thread(new MyThread(i, n));\r\n\r\n        for (int i = 1; i &lt;= numberOfThreads; i++)\r\n            threads[i - 1].start();\r\n\r\n        try {\r\n            for (int i = 1; i &lt;= numberOfThreads; i++)\r\n                threads[i - 1].join();\r\n        } catch (InterruptedException e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n        \r\n        long sum = 0;\r\n        for (int i = 1; i &lt;= numberOfThreads; i++)\r\n            sum += partialResults[i - 1];\r\n\r\n        return sum;\r\n      }\r\n\r\n      public static void main(String[] args) {\r\n        FindMultiples findMultiples = new FindMultiples();\r\n        System.out.println(findMultiples.getSum(1000));\r\n      }\r\n    }","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>When your goal is to parallelize computations you should make sure that your solution is actually faster than a serial (single threaded) one. Unfortunately your code (fixed by Mukhtar Amirkhanov) is probably much slower than a naive loop going through 1 to n. This is because a naive solution does not have to store the actual dividends anywhere. Also your multithreaded program synchronizes on each step, which means it won't actually make much progress in parallel. Finally, after the threads join your program removes duplicates in the main thread - that step alone take probably way more time than the naive loop.</p>\n<p>Unfortunately, the task is poorly defined, because the fastest solution is just a formula (as shown by @Andrey B. Panfilov) which can be computed in constant time <code>O(1)</code> and which cannot be sped up by multithreading. Probably your teacher meant to speed the computations by using multithreading compared to the naive solution, so you should settle for &quot;second-best&quot; approach.</p>\n<p>A meaningful approach to parallelizing such tasks is described by @Mike Nakis in his answer. You should split the work between threads not by the divisor, but by ranges of dividends. You can define separate threads do the work, and after joining them just add their results, or you can simply use a parallel stream (as shown by @Andrey B. Panfilov in a comment, just use a LongStream instead of an IntStream) to the same effect (if streams are allowed in your assignment).</p>\n<pre><code>import java.util.*;\npublic class FindMultiples\n{\n  public static final int numberOfThreads = 3;\n  public static long[] partialResults = new long[numberOfThreads];\n\n  public static class MyThread implements Runnable{\n    public int threadNumber;\n    public int n;\n\n    public MyThread(int threadNumber, int n) {\n        this.threadNumber = threadNumber;\n        this.n = n;\n    }\n\n    @Override\n    public void run() {\n        int start = ((threadNumber - 1) * n / numberOfThreads) + 1;\n        int end = threadNumber * n / numberOfThreads;\n        long result = 0;\n        for (int i = start; i &lt;= end; i++)\n            if (i % 3 == 0 || i % 5 == 0 || i % 7 == 0)\n                result += i;\n        partialResults[threadNumber - 1] = result;\n    }\n  }\n\n  public long getSum(int n) {\n    Thread[] threads = new Thread[numberOfThreads];\n    for (int i = 1; i &lt;= numberOfThreads; i++)\n        threads[i - 1] = new Thread(new MyThread(i, n));\n\n    for (int i = 1; i &lt;= numberOfThreads; i++)\n        threads[i - 1].start();\n\n    try {\n        for (int i = 1; i &lt;= numberOfThreads; i++)\n            threads[i - 1].join();\n    } catch (InterruptedException e) {\n        System.out.println(e.getMessage());\n    }\n    \n    long sum = 0;\n    for (int i = 1; i &lt;= numberOfThreads; i++)\n        sum += partialResults[i - 1];\n\n    return sum;\n  }\n\n  public static void main(String[] args) {\n    FindMultiples findMultiples = new FindMultiples();\n    System.out.println(findMultiples.getSum(1000));\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":27810500,"reputation":83,"user_id":21232984,"display_name":"Phantom"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":76163931,"answer_count":6,"score":6,"last_activity_date":1683222619,"creation_date":1683114406,"question_id":76163443,"body_markdown":"\r\nexplanation of the question:\r\nyou must write a multithreaded program that finds all \r\nintegers in the range [1, n] that are divisible by 3, 5, or 7. Return the\r\nsum of all unique integers as your answer.\r\nNote that an integer such as 15 (which is a multiple of 3 and 5) is only\r\ncounted once.\r\nThe Positive integer n &gt; 0 is given to you as input. Create as many threads as\r\nyou need to solve the problem. You can use a Thread Pool for bonus points.\r\n\r\n    Example:\r\n    Input: n = 10\r\n    Output: sum = 40\r\n    Explanation: Numbers in the range [1, 10] that are divisible by 3, 5, or 7 are:\r\n    3, 5, 6, 7, 9, 10. The sum of these numbers is 40.\r\n\r\nMy solution and problem that I faced:\r\nin this program I created three threads each for finding the integers that are divided by 3,5 and 7 separately then it will store them all in the dividends array list and by the following code it will remove the repeated ones in the array list:\r\n\r\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\r\n        dividends.clear();\r\n        dividends.addAll(set);\r\n\r\n\r\nI used some test cases that were provided by our teacher and the problem is that in the testcases that n=1000 and n=76293 sum won&#39;t show the amount that was expected:\r\n    \r\n    n=1000\r\n    expected sum:272066\r\n    actual sum:247377\r\n\r\nand the other problem is that the actual sum keeps changing every time I run the testcase.\r\ncan someone tell me what the problem of my code is and how I can fix it\r\n\r\nmy code:\r\n\r\n    import java.util.*;\r\n    public class FindMultiples\r\n    {\r\n\r\n    public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\r\n    public static int temp = 0;\r\n    public static synchronized void increment(){\r\n        dividends.add(temp);\r\n    }\r\n    public static class thread implements Runnable{\r\n\r\n        public int divisor;\r\n        public int n;\r\n\r\n        public thread(int n , int divisor){\r\n            this.n=n;\r\n            this.divisor=divisor;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n\r\n            for (int i=1 ; i&lt;=n ; i++){\r\n                if (i%divisor==0){\r\n                    temp=i;\r\n                    increment();\r\n                }\r\n            }\r\n        }\r\n    }\r\n   \r\n    public int getSum(int n) {\r\n        int sum = 0;\r\n        Thread thread1 = new Thread(new thread(n,3));\r\n        Thread thread2 = new Thread(new thread(n,7));\r\n        Thread thread3 = new Thread(new thread(n,5));\r\n        \r\n        thread3.start();\r\n        thread2.start();\r\n        thread1.start();\r\n        try {\r\n            thread3.join();\r\n            thread2.join();\r\n            thread1.join();\r\n        }catch (InterruptedException e){\r\n\r\n        }\r\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\r\n        dividends.clear();\r\n        dividends.addAll(set);\r\n\r\n        for (int i : dividends){\r\n            sum+=i;\r\n        }\r\n\r\n        return sum;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n    }\r\n    }","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>explanation of the question:\nyou must write a multithreaded program that finds all\nintegers in the range [1, n] that are divisible by 3, 5, or 7. Return the\nsum of all unique integers as your answer.\nNote that an integer such as 15 (which is a multiple of 3 and 5) is only\ncounted once.\nThe Positive integer n &gt; 0 is given to you as input. Create as many threads as\nyou need to solve the problem. You can use a Thread Pool for bonus points.</p>\n<pre><code>Example:\nInput: n = 10\nOutput: sum = 40\nExplanation: Numbers in the range [1, 10] that are divisible by 3, 5, or 7 are:\n3, 5, 6, 7, 9, 10. The sum of these numbers is 40.\n</code></pre>\n<p>My solution and problem that I faced:\nin this program I created three threads each for finding the integers that are divided by 3,5 and 7 separately then it will store them all in the dividends array list and by the following code it will remove the repeated ones in the array list:</p>\n<pre><code>Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\n    dividends.clear();\n    dividends.addAll(set);\n</code></pre>\n<p>I used some test cases that were provided by our teacher and the problem is that in the testcases that n=1000 and n=76293 sum won't show the amount that was expected:</p>\n<pre><code>n=1000\nexpected sum:272066\nactual sum:247377\n</code></pre>\n<p>and the other problem is that the actual sum keeps changing every time I run the testcase.\ncan someone tell me what the problem of my code is and how I can fix it</p>\n<p>my code:</p>\n<pre><code>import java.util.*;\npublic class FindMultiples\n{\n\npublic static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\npublic static int temp = 0;\npublic static synchronized void increment(){\n    dividends.add(temp);\n}\npublic static class thread implements Runnable{\n\n    public int divisor;\n    public int n;\n\n    public thread(int n , int divisor){\n        this.n=n;\n        this.divisor=divisor;\n    }\n\n    @Override\n    public void run() {\n\n        for (int i=1 ; i&lt;=n ; i++){\n            if (i%divisor==0){\n                temp=i;\n                increment();\n            }\n        }\n    }\n}\n\npublic int getSum(int n) {\n    int sum = 0;\n    Thread thread1 = new Thread(new thread(n,3));\n    Thread thread2 = new Thread(new thread(n,7));\n    Thread thread3 = new Thread(new thread(n,5));\n    \n    thread3.start();\n    thread2.start();\n    thread1.start();\n    try {\n        thread3.join();\n        thread2.join();\n        thread1.join();\n    }catch (InterruptedException e){\n\n    }\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\n    dividends.clear();\n    dividends.addAll(set);\n\n    for (int i : dividends){\n        sum+=i;\n    }\n\n    return sum;\n}\n\npublic static void main(String[] args) {\n}\n}\n</code></pre>\n"},{"tags":["java","mutiny","quarkus-hibernate-reactive"],"answers":[{"tags":[],"owner":{"account_id":6338401,"reputation":86,"user_id":4921147,"display_name":"alliancecoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683209555,"creation_date":1683209555,"answer_id":76174174,"question_id":76168467,"body_markdown":"Much like promises in JS, passing the Uni is part of the issue, and I need to **return** from within the chain.\r\n\r\n    return seatsAvailable.onItem().transformToUni(result -&gt; {\r\n\r\nI could then handle the check on the result as a boolean and continue by **returning** the following:\r\n\r\n    return sf.withTransaction((s, t) -&gt; s.persist(selection))","title":"How do I conditionally post using hibernate-reactive based on the result of a different NamedQuery","body":"<p>Much like promises in JS, passing the Uni is part of the issue, and I need to <strong>return</strong> from within the chain.</p>\n<pre><code>return seatsAvailable.onItem().transformToUni(result -&gt; {\n</code></pre>\n<p>I could then handle the check on the result as a boolean and continue by <strong>returning</strong> the following:</p>\n<pre><code>return sf.withTransaction((s, t) -&gt; s.persist(selection))\n</code></pre>\n"}],"owner":{"account_id":6338401,"reputation":86,"user_id":4921147,"display_name":"alliancecoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76174174,"answer_count":1,"score":0,"last_activity_date":1683222573,"creation_date":1683154476,"question_id":76168467,"body_markdown":"I have a POST operation that should only occur if the result of another NamedQuery has a row count Greater Than &quot;&gt;&quot; than a known value.\r\n\r\nI am new to Mutiny and moreso hibernate-reactive. My current catastrophe looks like this:\r\n\r\n```\r\npackage org.electricaltrainingalliance.attendees.selections.boundary;\r\n\r\nimport java.util.UUID;\r\n\r\nimport javax.enterprise.context.ApplicationScoped;\r\nimport javax.inject.Inject;\r\nimport javax.ws.rs.Consumes;\r\nimport javax.ws.rs.DELETE;\r\nimport javax.ws.rs.GET;\r\nimport javax.ws.rs.POST;\r\nimport javax.ws.rs.PUT;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.Produces;\r\nimport javax.ws.rs.QueryParam;\r\nimport javax.ws.rs.WebApplicationException;\r\nimport javax.ws.rs.core.Response;\r\nimport javax.ws.rs.core.Response.Status;\r\n\r\nimport org.electricaltrainingalliance.attendees.selections.entity.AttendeeSelection;\r\nimport org.hibernate.reactive.mutiny.Mutiny.SessionFactory;\r\nimport org.jboss.logging.Logger;\r\nimport org.jboss.logging.Logger.Level;\r\nimport org.jboss.resteasy.reactive.RestPath;\r\n\r\nimport io.smallrye.mutiny.Uni;\r\n\r\n@Path(&quot;selections&quot;)\r\n@ApplicationScoped\r\n@Produces(&quot;application/json&quot;)\r\n@Consumes(&quot;application/json&quot;)\r\npublic class AttendeeSelectionsService {\r\n\r\n    private static final Logger LOGGER = Logger.getLogger(AttendeeSelectionsService.class.getName());\r\n\r\n    @Inject\r\n    SessionFactory sf;\r\n\r\n    @POST\r\n    public Uni&lt;Response&gt; create(AttendeeSelection selection) {\r\n        if (selection == null || !selection.isValid()) {\r\n            return Uni.createFrom()\r\n                    .item(Response.status(400)\r\n                            .entity(&quot;The Selection is not valid, please refer to the API Documentation.&quot;)::build);\r\n        }\r\n\r\n        Uni&lt;Boolean&gt; seatsAvailable = sf.withSession((s) -&gt; s\r\n                .createNamedQuery(AttendeeSelection.findByOfferingId, AttendeeSelection.class)\r\n                .setParameter(&quot;offeringId&quot;, selection.getOffering().getOfferingId())\r\n                .getResultList()).onItem()\r\n                .transform(entity -&gt; entity.size() &gt;= selection.getOffering().getCapacity() ? Boolean.FALSE : Boolean.TRUE);\r\n\r\n        seatsAvailable.onItem().transformToUni(result -&gt; {\r\n            if (!result) {\r\n                return Uni.createFrom()\r\n                        .item(Response.status(409)\r\n                                .entity(&quot;The Offering is no longer available.&quot;)::build);\r\n            } else {\r\n                sf.withTransaction((s, t) -&gt; s.persist(selection))\r\n                        .replaceWith(Response.ok(selection).status(Status.CREATED)::build)\r\n                        .onFailure().transform(failure -&gt; {\r\n                            if (failure.getMessage().toLowerCase().contains(&quot;uk_unique_selection&quot;)) {\r\n                                throw new WebApplicationException(\r\n                                        &quot;A Selection with this information already exists.&quot;,\r\n                                        Status.CONFLICT);\r\n                            } else {\r\n                                LOGGER.log(Level.DEBUG, failure.getMessage(), failure);\r\n                                throw new WebApplicationException(failure.getMessage(),\r\n                                        Status.INTERNAL_SERVER_ERROR);\r\n                            }\r\n                        });\r\n            }\r\n        });\r\n        \r\n    }\r\n...\r\n}\r\n```\r\n\r\nEssentily, I have a query that returns a list of elements. The item being created, has a value that handles the maximum allowed.\r\n\r\nI would like to:\r\n- first call the NamedQuery that provides the list\r\n- compare the size of the resulting list to the capacity allowed\r\n- if there are &quot;seats available&quot; perform the POST operation\r\n- If there are &quot;no seats available&quot; return a CONFLICT\r\n\r\nI have tried an .await() on the NamedQuery to get a Boolean. I get the error `This method should exclusively be invoked from a Vert.x EventLoop thread; currently running on thread &#39;executor-thread-0`\r\n\r\nI have tried in place of .transform as well as .transformToUni but it provides the context error `This method must return a result of type Uni&lt;Response&gt;` of which all paths do, confusingly.","title":"How do I conditionally post using hibernate-reactive based on the result of a different NamedQuery","body":"<p>I have a POST operation that should only occur if the result of another NamedQuery has a row count Greater Than &quot;&gt;&quot; than a known value.</p>\n<p>I am new to Mutiny and moreso hibernate-reactive. My current catastrophe looks like this:</p>\n<pre><code>package org.electricaltrainingalliance.attendees.selections.boundary;\n\nimport java.util.UUID;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.inject.Inject;\nimport javax.ws.rs.Consumes;\nimport javax.ws.rs.DELETE;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.PUT;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.QueryParam;\nimport javax.ws.rs.WebApplicationException;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.core.Response.Status;\n\nimport org.electricaltrainingalliance.attendees.selections.entity.AttendeeSelection;\nimport org.hibernate.reactive.mutiny.Mutiny.SessionFactory;\nimport org.jboss.logging.Logger;\nimport org.jboss.logging.Logger.Level;\nimport org.jboss.resteasy.reactive.RestPath;\n\nimport io.smallrye.mutiny.Uni;\n\n@Path(&quot;selections&quot;)\n@ApplicationScoped\n@Produces(&quot;application/json&quot;)\n@Consumes(&quot;application/json&quot;)\npublic class AttendeeSelectionsService {\n\n    private static final Logger LOGGER = Logger.getLogger(AttendeeSelectionsService.class.getName());\n\n    @Inject\n    SessionFactory sf;\n\n    @POST\n    public Uni&lt;Response&gt; create(AttendeeSelection selection) {\n        if (selection == null || !selection.isValid()) {\n            return Uni.createFrom()\n                    .item(Response.status(400)\n                            .entity(&quot;The Selection is not valid, please refer to the API Documentation.&quot;)::build);\n        }\n\n        Uni&lt;Boolean&gt; seatsAvailable = sf.withSession((s) -&gt; s\n                .createNamedQuery(AttendeeSelection.findByOfferingId, AttendeeSelection.class)\n                .setParameter(&quot;offeringId&quot;, selection.getOffering().getOfferingId())\n                .getResultList()).onItem()\n                .transform(entity -&gt; entity.size() &gt;= selection.getOffering().getCapacity() ? Boolean.FALSE : Boolean.TRUE);\n\n        seatsAvailable.onItem().transformToUni(result -&gt; {\n            if (!result) {\n                return Uni.createFrom()\n                        .item(Response.status(409)\n                                .entity(&quot;The Offering is no longer available.&quot;)::build);\n            } else {\n                sf.withTransaction((s, t) -&gt; s.persist(selection))\n                        .replaceWith(Response.ok(selection).status(Status.CREATED)::build)\n                        .onFailure().transform(failure -&gt; {\n                            if (failure.getMessage().toLowerCase().contains(&quot;uk_unique_selection&quot;)) {\n                                throw new WebApplicationException(\n                                        &quot;A Selection with this information already exists.&quot;,\n                                        Status.CONFLICT);\n                            } else {\n                                LOGGER.log(Level.DEBUG, failure.getMessage(), failure);\n                                throw new WebApplicationException(failure.getMessage(),\n                                        Status.INTERNAL_SERVER_ERROR);\n                            }\n                        });\n            }\n        });\n        \n    }\n...\n}\n</code></pre>\n<p>Essentily, I have a query that returns a list of elements. The item being created, has a value that handles the maximum allowed.</p>\n<p>I would like to:</p>\n<ul>\n<li>first call the NamedQuery that provides the list</li>\n<li>compare the size of the resulting list to the capacity allowed</li>\n<li>if there are &quot;seats available&quot; perform the POST operation</li>\n<li>If there are &quot;no seats available&quot; return a CONFLICT</li>\n</ul>\n<p>I have tried an .await() on the NamedQuery to get a Boolean. I get the error <code>This method should exclusively be invoked from a Vert.x EventLoop thread; currently running on thread 'executor-thread-0</code></p>\n<p>I have tried in place of .transform as well as .transformToUni but it provides the context error <code>This method must return a result of type Uni&lt;Response&gt;</code> of which all paths do, confusingly.</p>\n"},{"tags":["java","spring-boot","eclipse"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1683109810,"post_id":76162783,"comment_id":134315070,"body_markdown":"Do you actually have this class: com.pafproject.foodieapp.Repository.UserRepo? I don&#39;t see any code for it in your question. Can it be autowired?","body":"Do you actually have this class: com.pafproject.foodieapp.Repository.UserRepo? I don&#39;t see any code for it in your question. Can it be autowired?"},{"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"score":1,"creation_date":1683112735,"post_id":76162783,"comment_id":134315660,"body_markdown":"It looks like the repository bean is not registered in the spring context.","body":"It looks like the repository bean is not registered in the spring context."},{"owner":{"account_id":26318201,"reputation":5076,"user_id":19980636,"display_name":"Krokomot"},"score":0,"creation_date":1683222476,"post_id":76162783,"comment_id":134337522,"body_markdown":"Would you please consider to tell us what you *have* tried to solve the pretty straightforward error message? You can&#39;t expect people to read a bunch of code without assisting to narrow the number of possible problems.","body":"Would you please consider to tell us what you <i>have</i> tried to solve the pretty straightforward error message? You can&#39;t expect people to read a bunch of code without assisting to narrow the number of possible problems."}],"owner":{"account_id":28397225,"reputation":1,"user_id":21722269,"display_name":"Sonal Liyanage"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683222216,"creation_date":1683109522,"question_id":76162783,"body_markdown":"I tried several solutions from this platform and other sources as well but none of them worked.\r\n\r\n#### Application failed to start ####\r\n\r\nDescription:\r\n```\r\nField userRepo in\r\ncom.pafproject.foodieapp.Service.UserService\r\nrequired a bean of type\r\n&#39;com.pafproject.foodieapp.Repository.UserRepo&#39;\r\nthat could not be found.\r\n```\r\n\r\nThe injection point has the following annotations:\r\n```\r\n@org.springframework.beans.factory.annotation.Autowired(required=true)\r\n```\r\n\r\nAction:\r\n```\r\nConsider defining a bean of type\r\n&#39;com.pafproject.foodieapp.Repository.UserRepo&#39;\r\nin your configuration.\r\n```\r\n\r\nThis is my main class\r\n```\r\npackage com.pafproject.foodieapp;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class FoodieappApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(FoodieappApplication.class, args);\r\n\t}\r\n}\r\n```\r\n\r\nThis is my UserController.java class\r\n```\r\npackage com.pafproject.foodieapp.Controller;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.pafproject.foodieapp.Entity.Users;\r\nimport com.pafproject.foodieapp.Service.UserService;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/users&quot;)\r\npublic class UserController {\r\n\t\r\n\t@Autowired\r\n\tUserService userService;\r\n\r\n\t@PostMapping(&quot;&quot;)\r\n\tprivate Users submitUser(@RequestBody Users users) {\r\n\t\treturn userService.submitMetaDataOfUser(users);\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/{userid}&quot;)\r\n\tprivate Users getUserDetails(@PathVariable(&quot;userid&quot;) String userId) {\r\n\t\treturn userService.displayUserMetaData(userId);\r\n\t}\r\n}\r\n```\r\n\r\nThis is my UserService.java class:\r\n```\r\npackage com.pafproject.foodieapp.Service;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport com.pafproject.foodieapp.Entity.Users;\r\nimport com.pafproject.foodieapp.Repository.UserRepo;\r\n\r\n@Service\r\npublic class UserService {\r\n\r\n\t@Autowired\r\n\tUserRepo userRepo;\r\n\t\r\n\tpublic Users submitMetaDataOfUser(Users user) {\r\n\t\treturn userRepo.save(user);\r\n\t}\r\n\t\r\n\tpublic Users displayUserMetaData(String userid) {\r\n\t\treturn userRepo.findByUserId(userid);\r\n\t}\r\n}\r\n```\r\n\r\nThis is my UserRepo.java class:\r\n```\r\npackage com.pafproject.foodieapp.Repository;\r\n\r\nimport org.springframework.data.repository.CrudRepository;\r\nimport org.springframework.stereotype.Repository;\r\nimport com.pafproject.foodieapp.Entity.Users;\r\n\r\n@Repository\r\npublic interface UserRepo extends CrudRepository&lt;Users, Integer&gt;{\r\n\r\n\tUsers save(Users user);\r\n\tUsers findByUserId(String userId);\r\n}\r\n```\r\n\r\nThis is my Users class:\r\n```\r\npackage com.pafproject.foodieapp.Entity;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.Id;\r\nimport com.sun.istack.NotNull;\r\n\r\n@Entity(name=&quot;Users&quot;)\r\npublic class Users {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue\r\n\tprivate int id;\r\n\t\r\n\t@NotNull\r\n\tprivate String userID;\r\n\tprivate String userName;\r\n\tprivate String name;\r\n\tprivate String profileImage;\r\n\tpublic Users() {\r\n\t\tsuper();\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\tpublic Users(int id, String userID, String userName, String name, String profileImage) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.userID = userID;\r\n\t\tthis.userName = userName;\r\n\t\tthis.name = name;\r\n\t\tthis.profileImage = profileImage;\r\n\t}\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\tpublic String getUserID() {\r\n\t\treturn userID;\r\n\t}\r\n\tpublic void setUserID(String userID) {\r\n\t\tthis.userID = userID;\r\n\t}\r\n\tpublic String getUserName() {\r\n\t\treturn userName;\r\n\t}\r\n\tpublic void setUserName(String userName) {\r\n\t\tthis.userName = userName;\r\n\t}\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\tpublic String getProfileImage() {\r\n\t\treturn profileImage;\r\n\t}\r\n\tpublic void setProfileImage(String profileImage) {\r\n\t\tthis.profileImage = profileImage;\r\n\t}\r\n}\r\n```","title":"Field in required a bean of type that could not be found","body":"<p>I tried several solutions from this platform and other sources as well but none of them worked.</p>\n<h4>Application failed to start</h4>\n<p>Description:</p>\n<pre><code>Field userRepo in\ncom.pafproject.foodieapp.Service.UserService\nrequired a bean of type\n'com.pafproject.foodieapp.Repository.UserRepo'\nthat could not be found.\n</code></pre>\n<p>The injection point has the following annotations:</p>\n<pre><code>@org.springframework.beans.factory.annotation.Autowired(required=true)\n</code></pre>\n<p>Action:</p>\n<pre><code>Consider defining a bean of type\n'com.pafproject.foodieapp.Repository.UserRepo'\nin your configuration.\n</code></pre>\n<p>This is my main class</p>\n<pre><code>package com.pafproject.foodieapp;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class FoodieappApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(FoodieappApplication.class, args);\n    }\n}\n</code></pre>\n<p>This is my UserController.java class</p>\n<pre><code>package com.pafproject.foodieapp.Controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\n\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.pafproject.foodieapp.Entity.Users;\nimport com.pafproject.foodieapp.Service.UserService;\n\n@RestController\n@RequestMapping(&quot;/users&quot;)\npublic class UserController {\n    \n    @Autowired\n    UserService userService;\n\n    @PostMapping(&quot;&quot;)\n    private Users submitUser(@RequestBody Users users) {\n        return userService.submitMetaDataOfUser(users);\n    }\n    \n    @GetMapping(&quot;/{userid}&quot;)\n    private Users getUserDetails(@PathVariable(&quot;userid&quot;) String userId) {\n        return userService.displayUserMetaData(userId);\n    }\n}\n</code></pre>\n<p>This is my UserService.java class:</p>\n<pre><code>package com.pafproject.foodieapp.Service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport com.pafproject.foodieapp.Entity.Users;\nimport com.pafproject.foodieapp.Repository.UserRepo;\n\n@Service\npublic class UserService {\n\n    @Autowired\n    UserRepo userRepo;\n    \n    public Users submitMetaDataOfUser(Users user) {\n        return userRepo.save(user);\n    }\n    \n    public Users displayUserMetaData(String userid) {\n        return userRepo.findByUserId(userid);\n    }\n}\n</code></pre>\n<p>This is my UserRepo.java class:</p>\n<pre><code>package com.pafproject.foodieapp.Repository;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\nimport com.pafproject.foodieapp.Entity.Users;\n\n@Repository\npublic interface UserRepo extends CrudRepository&lt;Users, Integer&gt;{\n\n    Users save(Users user);\n    Users findByUserId(String userId);\n}\n</code></pre>\n<p>This is my Users class:</p>\n<pre><code>package com.pafproject.foodieapp.Entity;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport com.sun.istack.NotNull;\n\n@Entity(name=&quot;Users&quot;)\npublic class Users {\n    \n    @Id\n    @GeneratedValue\n    private int id;\n    \n    @NotNull\n    private String userID;\n    private String userName;\n    private String name;\n    private String profileImage;\n    public Users() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n    public Users(int id, String userID, String userName, String name, String profileImage) {\n        super();\n        this.id = id;\n        this.userID = userID;\n        this.userName = userName;\n        this.name = name;\n        this.profileImage = profileImage;\n    }\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getUserID() {\n        return userID;\n    }\n    public void setUserID(String userID) {\n        this.userID = userID;\n    }\n    public String getUserName() {\n        return userName;\n    }\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public String getProfileImage() {\n        return profileImage;\n    }\n    public void setProfileImage(String profileImage) {\n        this.profileImage = profileImage;\n    }\n}\n</code></pre>\n"},{"tags":["java","aws-device-farm","playwright-java"],"owner":{"account_id":28503362,"reputation":1,"user_id":21814329,"display_name":"shweta gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683221891,"creation_date":1683192956,"question_id":76171698,"body_markdown":"I want to run my playwright script written in java on AWS device farm browser.\r\nHow can I achieve that in java?\r\n\r\nSelenium Example is pretty simpler by passing device farm detail in to Remote Webdriver.\r\n\r\nnot getting enough supporting document for device farm with playwright.","title":"How to run playwright java test case on AWS Device Farm","body":"<p>I want to run my playwright script written in java on AWS device farm browser.\nHow can I achieve that in java?</p>\n<p>Selenium Example is pretty simpler by passing device farm detail in to Remote Webdriver.</p>\n<p>not getting enough supporting document for device farm with playwright.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9537,"page":455,"page_size":100}
