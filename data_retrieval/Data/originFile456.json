{"items":[{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1683035295,"post_id":76154723,"comment_id":134302491,"body_markdown":"Unless your pdf is properly tagged, it is unclear for a content extractor whether an image is associated with the text above, the text below, or both. If you know that in your case images always are associated with the text above, you merely need to extract both text and images with coordinates and try to match them by those coordinates.","body":"Unless your pdf is properly tagged, it is unclear for a content extractor whether an image is associated with the text above, the text below, or both. If you know that in your case images always are associated with the text above, you merely need to extract both text and images with coordinates and try to match them by those coordinates."},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683054736,"post_id":76154723,"comment_id":134307030,"body_markdown":"@mkl I&#39;m a beginner at this and can&#39;t figure out how to extract text coordinates","body":"@mkl I&#39;m a beginner at this and can&#39;t figure out how to extract text coordinates"},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683097006,"post_id":76154723,"comment_id":134312286,"body_markdown":"@KJ I have a 2049-page pdf that describes car repair procedures. I have parsed this pdf into steps. Where one item is, for example, “2. Remove the battery and battery tray(A).” is one step. If the step has a picture, I need to find this picture and add its ID to the mediaRef field (List&lt;Media&gt;). I uploaded the images earlier. I named the images with the page number + the sequence number of the image on the page (81_image_1). Now, I think that the images should be loaded at the moment when you attach it to the step.","body":"@KJ I have a 2049-page pdf that describes car repair procedures. I have parsed this pdf into steps. Where one item is, for example, “2. Remove the battery and battery tray(A).” is one step. If the step has a picture, I need to find this picture and add its ID to the mediaRef field (List&lt;Media&gt;). I uploaded the images earlier. I named the images with the page number + the sequence number of the image on the page (81_image_1). Now, I think that the images should be loaded at the moment when you attach it to the step."},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683130843,"post_id":76154723,"comment_id":134320442,"body_markdown":"@KJ I found the coordinates of a picture on a page.\nCould you please tell me which character coordinates I need to look for to compare with the coordinator of the image?","body":"@KJ I found the coordinates of a picture on a page. Could you please tell me which character coordinates I need to look for to compare with the coordinator of the image?"},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683195156,"post_id":76154723,"comment_id":134330573,"body_markdown":"I was able to find a link to the last character of the string and a link to a picture to see what I&#39;m talking about. \nhttps://i.postimg.cc/JzFXCWYq/1234.jpg","body":"I was able to find a link to the last character of the string and a link to a picture to see what I&#39;m talking about.  <a href=\"https://i.postimg.cc/JzFXCWYq/1234.jpg\" rel=\"nofollow noreferrer\">i.postimg.cc/JzFXCWYq/1234.jpg</a>"}],"answers":[{"tags":[],"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683229926,"creation_date":1683229926,"answer_id":76176927,"question_id":76154723,"body_markdown":"I solved the problem. I found the coordinates of all the last characters of the text lines on the page and compared them with the coordinates of the picture. If the Y coordinates of the image are less than the Y coordinates of the previous line and greater than the next line, then the image must be between these lines :)","title":"How to extract text and images from a pdf file and link them together in PDFbox 2.0.27?","body":"<p>I solved the problem. I found the coordinates of all the last characters of the text lines on the page and compared them with the coordinates of the picture. If the Y coordinates of the image are less than the Y coordinates of the previous line and greater than the next line, then the image must be between these lines :)</p>\n"}],"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683229926,"creation_date":1683029573,"question_id":76154723,"body_markdown":"everyone! \r\nCould you please help me figure out how to extract text and attach images to it? For example, in a file there is text describing a picture, and a picture under the text. There are many pictures in a PDF file, they can be of different sizes. There can also be several pictures with descriptions on one page.\r\n[![enter image description here](https://i.stack.imgur.com/yao37.jpg)](https://i.stack.imgur.com/yao37.jpg)\r\n\r\n\r\n\r\nFirst I extracted all the text, then I extracted all the images with reference to the page. And now I can&#39;t figure out how to link them. \r\nI have a theory that I need to use the metadata of the text and images, but I can&#39;t figure out how to do it. \r\n\r\nI use Java 11, PDFbox 2.0.27\r\n\r\n```\r\npublic class PdfFileReaderService implements FileReaderService {\r\n    @Override\r\n    public String getAllTextFromFile(String filepath) {\r\n        try (PDDocument document = PDDocument.load(new File(filepath))) {\r\n            PDFTextStripper stripper = new PDFTextStripper();\r\n            return stripper.getText(document);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Can&#39;t get text from file: &quot; + filepath, e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;Integer, List&lt;RenderedImage&gt;&gt; getAllImageFromFile(String pathToFile) {\r\n        Map&lt;Integer, List&lt;RenderedImage&gt;&gt; images = new HashMap&lt;&gt;();\r\n        try (PDDocument document = PDDocument.load(new File(pathToFile))) {\r\n            for (int i = 0; i &lt; document.getNumberOfPages(); i++) {\r\n                PDPage page = document.getPage(i);\r\n                List&lt;RenderedImage&gt; pageImages = getImagesFromResources(page.getResources());\r\n                images.put(i, pageImages.isEmpty() ? new ArrayList&lt;&gt;() : pageImages);\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Can&#39;t get images from file: &quot; + pathToFile);\r\n        }\r\n        return images;\r\n    }\r\n\r\n\r\n    private List&lt;RenderedImage&gt; getImagesFromResources(PDResources resources) throws IOException {\r\n        List&lt;RenderedImage&gt; images = new ArrayList&lt;&gt;();\r\n        for (COSName xObjectName : resources.getXObjectNames()) {\r\n            PDXObject xObject = resources.getXObject(xObjectName);\r\n            if (xObject instanceof PDFormXObject) {\r\n                images.addAll(getImagesFromResources(((PDFormXObject) xObject).getResources()));\r\n            } else if (xObject instanceof PDImageXObject) {\r\n                BufferedImage image = ((PDImageXObject) xObject).getImage();\r\n                images.add(image);\r\n            }\r\n        }\r\n        return images;\r\n    }\r\n}\r\n```\r\n","title":"How to extract text and images from a pdf file and link them together in PDFbox 2.0.27?","body":"<p>everyone!\nCould you please help me figure out how to extract text and attach images to it? For example, in a file there is text describing a picture, and a picture under the text. There are many pictures in a PDF file, they can be of different sizes. There can also be several pictures with descriptions on one page.\n<a href=\"https://i.stack.imgur.com/yao37.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yao37.jpg\" alt=\"enter image description here\" /></a></p>\n<p>First I extracted all the text, then I extracted all the images with reference to the page. And now I can't figure out how to link them.\nI have a theory that I need to use the metadata of the text and images, but I can't figure out how to do it.</p>\n<p>I use Java 11, PDFbox 2.0.27</p>\n<pre><code>public class PdfFileReaderService implements FileReaderService {\n    @Override\n    public String getAllTextFromFile(String filepath) {\n        try (PDDocument document = PDDocument.load(new File(filepath))) {\n            PDFTextStripper stripper = new PDFTextStripper();\n            return stripper.getText(document);\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Can't get text from file: &quot; + filepath, e);\n        }\n    }\n\n    @Override\n    public Map&lt;Integer, List&lt;RenderedImage&gt;&gt; getAllImageFromFile(String pathToFile) {\n        Map&lt;Integer, List&lt;RenderedImage&gt;&gt; images = new HashMap&lt;&gt;();\n        try (PDDocument document = PDDocument.load(new File(pathToFile))) {\n            for (int i = 0; i &lt; document.getNumberOfPages(); i++) {\n                PDPage page = document.getPage(i);\n                List&lt;RenderedImage&gt; pageImages = getImagesFromResources(page.getResources());\n                images.put(i, pageImages.isEmpty() ? new ArrayList&lt;&gt;() : pageImages);\n            }\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Can't get images from file: &quot; + pathToFile);\n        }\n        return images;\n    }\n\n\n    private List&lt;RenderedImage&gt; getImagesFromResources(PDResources resources) throws IOException {\n        List&lt;RenderedImage&gt; images = new ArrayList&lt;&gt;();\n        for (COSName xObjectName : resources.getXObjectNames()) {\n            PDXObject xObject = resources.getXObject(xObjectName);\n            if (xObject instanceof PDFormXObject) {\n                images.addAll(getImagesFromResources(((PDFormXObject) xObject).getResources()));\n            } else if (xObject instanceof PDImageXObject) {\n                BufferedImage image = ((PDImageXObject) xObject).getImage();\n                images.add(image);\n            }\n        }\n        return images;\n    }\n}\n</code></pre>\n"},{"tags":["java","file","mockito"],"comments":[{"owner":{"account_id":417955,"reputation":18564,"user_id":794242,"accept_rate":80,"display_name":"Wand Maker"},"score":0,"creation_date":1373991729,"post_id":17681708,"comment_id":25759675,"body_markdown":"What is the objective of the test?  WHy not mock the BufferedWriter?","body":"What is the objective of the test?  WHy not mock the BufferedWriter?"},{"owner":{"account_id":2939897,"reputation":607,"user_id":2518037,"accept_rate":100,"display_name":"Matej"},"score":0,"creation_date":1374002642,"post_id":17681708,"comment_id":25765572,"body_markdown":"BufferedWriter was to write files into the file so that the mocked file could be processed by another class. The other test is for testing and grading the contents of the html file.","body":"BufferedWriter was to write files into the file so that the mocked file could be processed by another class. The other test is for testing and grading the contents of the html file."},{"owner":{"account_id":14448,"reputation":5643,"user_id":29734,"accept_rate":77,"display_name":"Chris Kessel"},"score":1,"creation_date":1374021644,"post_id":17681708,"comment_id":25773171,"body_markdown":"Rather than mocking File, try spy(new File(...)). Then you can when() only the behavior you really want to change rather than having to deal with the entire API.","body":"Rather than mocking File, try spy(new File(...)). Then you can when() only the behavior you really want to change rather than having to deal with the entire API."},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":15,"creation_date":1374051912,"post_id":17681708,"comment_id":25783638,"body_markdown":"**DON&#39;T mock or spy a File!** This is not the proper way to do it. It&#39;s a test anti-pattern. More generally **Don&#39;t mock types you don&#39;t own!**. Instead focus a splitting the functionality between the code that access the file and the code that process the content. Jeff&#39;s answer is the way to go !","body":"<b>DON&#39;T mock or spy a File!</b> This is not the proper way to do it. It&#39;s a test anti-pattern. More generally <b>Don&#39;t mock types you don&#39;t own!</b>. Instead focus a splitting the functionality between the code that access the file and the code that process the content. Jeff&#39;s answer is the way to go !"},{"owner":{"account_id":448569,"reputation":3796,"user_id":842832,"accept_rate":33,"display_name":"demaniak"},"score":0,"creation_date":1520399349,"post_id":17681708,"comment_id":85294199,"body_markdown":"I would say you absolute can (and should under certain circumstances) mock code you don&#39;t own - BUT ONLY  the interfaces! Your code should be working against interfaces anyway, not concrete implementations, where possible. java.io.File does not meet the interface requirement though. So BAD candidate for mocking.","body":"I would say you absolute can (and should under certain circumstances) mock code you don&#39;t own - BUT ONLY  the interfaces! Your code should be working against interfaces anyway, not concrete implementations, where possible. java.io.File does not meet the interface requirement though. So BAD candidate for mocking."}],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":0,"up_vote_count":81,"is_accepted":true,"score":81,"last_activity_date":1374187856,"creation_date":1374030164,"answer_id":17690371,"question_id":17681708,"body_markdown":"You seem to be after contradictory goals. On the one hand, you&#39;re trying to avoid writing data to disk, which isn&#39;t a bad goal in tests. On the other, you&#39;re trying to test your I/O-handling class, which means you&#39;ll be working with system utilities that assume that your `File` will work with native calls. As such, here&#39;s my guidance:\r\n\r\n  - Don&#39;t try to mock a `File`. Just don&#39;t. Too many native things depend on it.\r\n  - If you can, split your I/O-handling code into the half that opens a `File` and turns it into a `Reader`, and the half that parses HTML out of the `Reader`.\r\n  - At that point, you don&#39;t need a mock at all--just construct a [`StringReader`][2] to simulate the data source.\r\n  - While that handles your unit tests pretty well, you may also want to write an _integration test_ that uses a [temporary file][1] and ensure that it reads right. (Thanks Brice for adding that tip!)\r\n\r\nDon&#39;t be afraid to refactor your class to make testing easier, as here:\r\n\r\n    class YourClass {\r\n      public int method(File file) {\r\n        // do everything here, which is why it requires a mock\r\n      }   \r\n    }   \r\n\r\n    class YourRefactoredClass {\r\n      public int method(File file) {\r\n        return methodForTest(file.getName(), file.isFile(),\r\n            file.isAbsolute(), new FileReader(file));\r\n      }   \r\n\r\n      /** For testing only. */\r\n      int methodForTest(\r\n          String name, boolean isFile, boolean isAbsolute, Reader fileContents) {\r\n        // actually do the calculation here\r\n      }   \r\n    }   \r\n\r\n    class YourTest {\r\n      @Test public int methodShouldParseBadHtml() {\r\n        YourRefactoredClass yrc = new YourRefactoredClass();\r\n        assertEquals(42, yrc.methodForTest(\r\n            &quot;bad.html&quot;, true, false, new StringReader(badHTMLText));\r\n      }   \r\n    }   \r\n\r\n\r\nAt this point the logic in `method` is so straightforward it&#39;s not worth testing,\r\nand the logic in `methodForTest` is so easy to access that you can test it heavily.\r\n\r\n[1]: https://stackoverflow.com/questions/876816/open-temp-file-in-java\r\n[2]: http://docs.oracle.com/javase/6/docs/api/java/io/StringReader.html","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>You seem to be after contradictory goals. On the one hand, you're trying to avoid writing data to disk, which isn't a bad goal in tests. On the other, you're trying to test your I/O-handling class, which means you'll be working with system utilities that assume that your <code>File</code> will work with native calls. As such, here's my guidance:</p>\n\n<ul>\n<li>Don't try to mock a <code>File</code>. Just don't. Too many native things depend on it.</li>\n<li>If you can, split your I/O-handling code into the half that opens a <code>File</code> and turns it into a <code>Reader</code>, and the half that parses HTML out of the <code>Reader</code>.</li>\n<li>At that point, you don't need a mock at all--just construct a <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/StringReader.html\" rel=\"noreferrer\"><code>StringReader</code></a> to simulate the data source.</li>\n<li>While that handles your unit tests pretty well, you may also want to write an <em>integration test</em> that uses a <a href=\"https://stackoverflow.com/questions/876816/open-temp-file-in-java\">temporary file</a> and ensure that it reads right. (Thanks Brice for adding that tip!)</li>\n</ul>\n\n<p>Don't be afraid to refactor your class to make testing easier, as here:</p>\n\n<pre><code>class YourClass {\n  public int method(File file) {\n    // do everything here, which is why it requires a mock\n  }   \n}   \n\nclass YourRefactoredClass {\n  public int method(File file) {\n    return methodForTest(file.getName(), file.isFile(),\n        file.isAbsolute(), new FileReader(file));\n  }   \n\n  /** For testing only. */\n  int methodForTest(\n      String name, boolean isFile, boolean isAbsolute, Reader fileContents) {\n    // actually do the calculation here\n  }   \n}   \n\nclass YourTest {\n  @Test public int methodShouldParseBadHtml() {\n    YourRefactoredClass yrc = new YourRefactoredClass();\n    assertEquals(42, yrc.methodForTest(\n        \"bad.html\", true, false, new StringReader(badHTMLText));\n  }   \n}   \n</code></pre>\n\n<p>At this point the logic in <code>method</code> is so straightforward it's not worth testing,\nand the logic in <code>methodForTest</code> is so easy to access that you can test it heavily.</p>\n"},{"tags":[],"owner":{"account_id":1474584,"reputation":876,"user_id":1385310,"accept_rate":63,"display_name":"Tian Na"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1526331237,"creation_date":1526330480,"answer_id":50338695,"question_id":17681708,"body_markdown":"One way to mock I/O calls (with Java 7 it would be the NIO final class `java.nio.file.Files`) is to wrap the needed calls in your own class and mock it:\r\n\r\n\r\n    public class FileHelper {\r\n    \r\n        public Path createDirectory(String directoryName) throws IOException {\r\n            return Files.createDirectory(Paths.get(directoryName));\r\n        }\r\n    \r\n        public boolean exists(String name) throws IOException {\r\n            return Files.exists(Paths.get(name), LinkOption.NOFOLLOW_LINKS);\r\n        }\r\n    \r\n    }\r\n\r\nThe business logic is located in the `ImageManager`: \r\n\r\n    FileHelper fileHelperMock = Mockito.mock(new FileHelper());\r\n    ImageManager imageManager = new ImageManagerImpl(fileHelperMock);\r\n    \r\n\r\nThe test will verify the call to `createDirectory()` method on your mock:\r\n\r\n    imageManager.save(&quot;directory&quot;);\r\n    Mockito.verify(fileHelperMock).createDirectory(&quot;directory&quot;);\r\n\r\nI would use this method during test driven development where I do not want to pollute testing with real file management (e.g. delete created directories/files in a finally block in each unit test).\r\n\r\nThen I would have acceptance tests covering every use case with real file handling.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>One way to mock I/O calls (with Java 7 it would be the NIO final class <code>java.nio.file.Files</code>) is to wrap the needed calls in your own class and mock it:</p>\n\n<pre><code>public class FileHelper {\n\n    public Path createDirectory(String directoryName) throws IOException {\n        return Files.createDirectory(Paths.get(directoryName));\n    }\n\n    public boolean exists(String name) throws IOException {\n        return Files.exists(Paths.get(name), LinkOption.NOFOLLOW_LINKS);\n    }\n\n}\n</code></pre>\n\n<p>The business logic is located in the <code>ImageManager</code>: </p>\n\n<pre><code>FileHelper fileHelperMock = Mockito.mock(new FileHelper());\nImageManager imageManager = new ImageManagerImpl(fileHelperMock);\n</code></pre>\n\n<p>The test will verify the call to <code>createDirectory()</code> method on your mock:</p>\n\n<pre><code>imageManager.save(\"directory\");\nMockito.verify(fileHelperMock).createDirectory(\"directory\");\n</code></pre>\n\n<p>I would use this method during test driven development where I do not want to pollute testing with real file management (e.g. delete created directories/files in a finally block in each unit test).</p>\n\n<p>Then I would have acceptance tests covering every use case with real file handling.</p>\n"},{"tags":[],"owner":{"account_id":15327413,"reputation":309,"user_id":11058155,"display_name":"Alan Hernandez"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1626280627,"creation_date":1626280627,"answer_id":68381979,"question_id":17681708,"body_markdown":"Another aproach is to generate a temporary file in an `@Before` block and then delete it in a `@After` method.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>Another aproach is to generate a temporary file in an <code>@Before</code> block and then delete it in a <code>@After</code> method.</p>\n"},{"tags":[],"owner":{"account_id":1660869,"reputation":5417,"user_id":1529195,"accept_rate":92,"display_name":"Patrick Goley"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683229776,"creation_date":1683226451,"answer_id":76176516,"question_id":17681708,"body_markdown":"This is not technically a mock but I have had success using a `File` reference to `/dev/null` which can be used in test code without performing any actual I/O (see [this answer on Unix SE][1]). Of course, it will always read as an empty file and writes to it will not be persisted, but it can otherwise act as a valid file, open streams, etc.\r\n\r\n\r\n  [1]: https://unix.stackexchange.com/questions/90162/io-utilization-for-dev-null-redirection#:~:text=If%20a%20program%20writes%20to,the%20hardware%27s%20point%20of%20view.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>This is not technically a mock but I have had success using a <code>File</code> reference to <code>/dev/null</code> which can be used in test code without performing any actual I/O (see <a href=\"https://unix.stackexchange.com/questions/90162/io-utilization-for-dev-null-redirection#:%7E:text=If%20a%20program%20writes%20to,the%20hardware%27s%20point%20of%20view.\">this answer on Unix SE</a>). Of course, it will always read as an empty file and writes to it will not be persisted, but it can otherwise act as a valid file, open streams, etc.</p>\n"}],"owner":{"account_id":2939897,"reputation":607,"user_id":2518037,"accept_rate":100,"display_name":"Matej"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155301,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":17690371,"answer_count":4,"score":48,"last_activity_date":1683229776,"creation_date":1373991089,"question_id":17681708,"body_markdown":"I&#39;m pretty new to mocking, and I&#39;ve been trying to mock the actual contents (essentially create a virtual file in memory alone) so that no data is written to disk at any point.\r\n\r\nI&#39;ve tried solutions like mocking the file and mocking as many of the properties that I can figure out as much as possible, an then also writing into it with a filewriter/bufferedwriter, but those don&#39;t work well, since they need canonical paths. Anyone found a solution other than this or similar, but that I&#39;m approaching this wrong?\r\n\r\nI&#39;ve been doing it like this:\r\n             \r\n    private void mocking(){\r\n        File badHTML = mock(File.class);\r\n        //setting the properties of badHTML\r\n        when(badHTML.canExecute()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.canRead()).thenReturn(Boolean.TRUE);\r\n        when(badHTML.canWrite()).thenReturn(Boolean.TRUE);\r\n        when(badHTML.compareTo(badHTML)).thenReturn(Integer.SIZE);\r\n        when(badHTML.delete()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.getFreeSpace()).thenReturn(0l);\r\n        when(badHTML.getName()).thenReturn(&quot;bad.html&quot;);\r\n        when(badHTML.getParent()).thenReturn(null);\r\n        when(badHTML.getPath()).thenReturn(&quot;bad.html&quot;);\r\n        when(badHTML.getParentFile()).thenReturn(null);\r\n        when(badHTML.getTotalSpace()).thenReturn(0l);\r\n        when(badHTML.isAbsolute()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.isDirectory()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.isFile()).thenReturn(Boolean.TRUE);\r\n        when(badHTML.isHidden()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.lastModified()).thenReturn(System.currentTimeMillis());\r\n        when(badHTML.mkdir()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.mkdirs()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.setExecutable(true)).thenReturn(Boolean.FALSE);\r\n        when(badHTML.setExecutable(false)).thenReturn(Boolean.TRUE);\r\n        when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\r\n        \r\n        try {\r\n            BufferedWriter bw = new BufferedWriter(new FileWriter(badHTML));\r\n            /*\r\n              badHTMLText is a string with the contents i want to put into the file, \r\n              can be just about whatever you want\r\n             */\r\n            bw.append(badHTMLText);\r\n            bw.close();\r\n            \r\n        } catch (IOException ex) {\r\n            System.err.println(ex);\r\n        }\r\n    }\r\n\r\nAny ideas or guidance would be very helpful.\r\nSomewhere after this i basically try to read from the file using another class. I would try to mock some sort of input stream, but the other class doesn&#39;t take an inputstream, since it&#39;s the io handling class for the project.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>I'm pretty new to mocking, and I've been trying to mock the actual contents (essentially create a virtual file in memory alone) so that no data is written to disk at any point.</p>\n\n<p>I've tried solutions like mocking the file and mocking as many of the properties that I can figure out as much as possible, an then also writing into it with a filewriter/bufferedwriter, but those don't work well, since they need canonical paths. Anyone found a solution other than this or similar, but that I'm approaching this wrong?</p>\n\n<p>I've been doing it like this:</p>\n\n<pre><code>private void mocking(){\n    File badHTML = mock(File.class);\n    //setting the properties of badHTML\n    when(badHTML.canExecute()).thenReturn(Boolean.FALSE);\n    when(badHTML.canRead()).thenReturn(Boolean.TRUE);\n    when(badHTML.canWrite()).thenReturn(Boolean.TRUE);\n    when(badHTML.compareTo(badHTML)).thenReturn(Integer.SIZE);\n    when(badHTML.delete()).thenReturn(Boolean.FALSE);\n    when(badHTML.getFreeSpace()).thenReturn(0l);\n    when(badHTML.getName()).thenReturn(\"bad.html\");\n    when(badHTML.getParent()).thenReturn(null);\n    when(badHTML.getPath()).thenReturn(\"bad.html\");\n    when(badHTML.getParentFile()).thenReturn(null);\n    when(badHTML.getTotalSpace()).thenReturn(0l);\n    when(badHTML.isAbsolute()).thenReturn(Boolean.FALSE);\n    when(badHTML.isDirectory()).thenReturn(Boolean.FALSE);\n    when(badHTML.isFile()).thenReturn(Boolean.TRUE);\n    when(badHTML.isHidden()).thenReturn(Boolean.FALSE);\n    when(badHTML.lastModified()).thenReturn(System.currentTimeMillis());\n    when(badHTML.mkdir()).thenReturn(Boolean.FALSE);\n    when(badHTML.mkdirs()).thenReturn(Boolean.FALSE);\n    when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\n    when(badHTML.setExecutable(true)).thenReturn(Boolean.FALSE);\n    when(badHTML.setExecutable(false)).thenReturn(Boolean.TRUE);\n    when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\n\n    try {\n        BufferedWriter bw = new BufferedWriter(new FileWriter(badHTML));\n        /*\n          badHTMLText is a string with the contents i want to put into the file, \n          can be just about whatever you want\n         */\n        bw.append(badHTMLText);\n        bw.close();\n\n    } catch (IOException ex) {\n        System.err.println(ex);\n    }\n}\n</code></pre>\n\n<p>Any ideas or guidance would be very helpful.\nSomewhere after this i basically try to read from the file using another class. I would try to mock some sort of input stream, but the other class doesn't take an inputstream, since it's the io handling class for the project.</p>\n"},{"tags":["java","sql","sql-server","mssql-jdbc"],"comments":[{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":2,"creation_date":1677639411,"post_id":75599157,"comment_id":133376460,"body_markdown":"SQL doesn&#39;t work like that, its a static language, you can&#39;t use variables in place of object names. You need dynamic SQL if you really must do it that way, but its not recommended.","body":"SQL doesn&#39;t work like that, its a static language, you can&#39;t use variables in place of object names. You need dynamic SQL if you really must do it that way, but its not recommended."},{"owner":{"account_id":19237226,"reputation":15,"user_id":14057941,"display_name":"stuckherenthere"},"score":0,"creation_date":1677639719,"post_id":75599157,"comment_id":133376502,"body_markdown":"so it can&#39;t be used as a global procedure ? since i will need to copy multiple tables","body":"so it can&#39;t be used as a global procedure ? since i will need to copy multiple tables"},{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":0,"creation_date":1677640043,"post_id":75599157,"comment_id":133376542,"body_markdown":"The *normal* design method with SQL is you create specific procedures for specific tables. As I said if you really must do it this way you can use dynamic sql (there are plenty of tutorials out there), but its highly recommended not to do it that way.","body":"The <i>normal</i> design method with SQL is you create specific procedures for specific tables. As I said if you really must do it this way you can use dynamic sql (there are plenty of tutorials out there), but its highly recommended not to do it that way."}],"answers":[{"tags":[],"owner":{"account_id":1854123,"reputation":79,"user_id":1680071,"display_name":"EbrahimFarahmand"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683228749,"creation_date":1677654430,"answer_id":75600507,"question_id":75599157,"body_markdown":"Please change the body of the stored procedure as follows:\r\n\r\n    ALTER PROCEDURE callProcedure\r\n        (@newTable varchar(100),\r\n         @tableField varchar(8000),\r\n         @table varchar(100))\r\n    AS\r\n    BEGIN\r\n        DECLARE @query NVARCHAR(MAX)\r\n\r\n        SET @query = &#39;DELETE FROM &#39; + @newTable + &#39;;&#39;;\r\n    \r\n        SET @query += &#39;SET IDENTITY_INSERT &#39; + @newTable + &#39; ON;&#39;;\r\n    \r\n        SET @query += &#39;INSERT INTO &#39; + @newTable + &#39;(&#39; + @tableField + &#39;) SELECT &#39; + @tableField + &#39; FROM &#39; + @table + &#39;;&#39;;\r\n    \r\n        SET @query += &#39;SET IDENTITY_INSERT &#39; + @newTable + &#39; OFF;&#39;;\r\n\r\n        EXEC (@query)\r\n    END","title":"Stored Procedure with Multiple Queries and Parameters","body":"<p>Please change the body of the stored procedure as follows:</p>\n<pre><code>ALTER PROCEDURE callProcedure\n    (@newTable varchar(100),\n     @tableField varchar(8000),\n     @table varchar(100))\nAS\nBEGIN\n    DECLARE @query NVARCHAR(MAX)\n\n    SET @query = 'DELETE FROM ' + @newTable + ';';\n\n    SET @query += 'SET IDENTITY_INSERT ' + @newTable + ' ON;';\n\n    SET @query += 'INSERT INTO ' + @newTable + '(' + @tableField + ') SELECT ' + @tableField + ' FROM ' + @table + ';';\n\n    SET @query += 'SET IDENTITY_INSERT ' + @newTable + ' OFF;';\n\n    EXEC (@query)\nEND\n</code></pre>\n"}],"owner":{"account_id":19237226,"reputation":15,"user_id":14057941,"display_name":"stuckherenthere"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683228749,"creation_date":1677638987,"question_id":75599157,"body_markdown":"I&#39;m using Microsoft SQL Server and Java for this.\r\n\r\nI&#39;m intending to create a global procedure function, in which it will copy the records from 1 table to another table.\r\n\r\nMy current procedure:\r\n\r\n```\r\ncreate procedure callProcedure(@newTable varchar(100),\r\n@tableField varchar(8000),\r\n@table varchar(100))\r\nas\r\nbegin\r\nDELETE FROM @newTable;\r\n\r\nSET IDENTITY_INSERT @newTable ON;\r\n\r\nINSERT INTO @newTable(@tableField) SELECT @tableField FROM @table\r\n\r\nSET IDENTITY_INSERT @newTable OFF;\r\nend\r\n```\r\n\r\nWhen I execute the procedure.\r\nThis is the error that I received.\r\n&gt; SQL Error [102] [S0001]: Incorrect syntax near &#39;@newTable&#39;.\r\n\r\n\r\nSample final queries after being replaced with parameters\r\n\r\n```\r\nEXEC callProcedure(@newTable = &#39;EMPLOYEE_1&#39;, @tableField = &#39;ID, NAME, STATUS&#39;, @table = &#39;EMPLOYEE&#39;)\r\n```\r\n\r\nPlease help with this.\r\n\r\nThank you.\r\n\r\n\r\n\r\n```\r\nEXEC callProcedure(@newTable = &#39;EMPLOYEE_1&#39;, @tableField = &#39;ID, NAME, STATUS&#39;, @table = &#39;EMPLOYEE&#39;)\r\n```\r\n\r\nwill return the result.","title":"Stored Procedure with Multiple Queries and Parameters","body":"<p>I'm using Microsoft SQL Server and Java for this.</p>\n<p>I'm intending to create a global procedure function, in which it will copy the records from 1 table to another table.</p>\n<p>My current procedure:</p>\n<pre><code>create procedure callProcedure(@newTable varchar(100),\n@tableField varchar(8000),\n@table varchar(100))\nas\nbegin\nDELETE FROM @newTable;\n\nSET IDENTITY_INSERT @newTable ON;\n\nINSERT INTO @newTable(@tableField) SELECT @tableField FROM @table\n\nSET IDENTITY_INSERT @newTable OFF;\nend\n</code></pre>\n<p>When I execute the procedure.\nThis is the error that I received.</p>\n<blockquote>\n<p>SQL Error [102] [S0001]: Incorrect syntax near '@newTable'.</p>\n</blockquote>\n<p>Sample final queries after being replaced with parameters</p>\n<pre><code>EXEC callProcedure(@newTable = 'EMPLOYEE_1', @tableField = 'ID, NAME, STATUS', @table = 'EMPLOYEE')\n</code></pre>\n<p>Please help with this.</p>\n<p>Thank you.</p>\n<pre><code>EXEC callProcedure(@newTable = 'EMPLOYEE_1', @tableField = 'ID, NAME, STATUS', @table = 'EMPLOYEE')\n</code></pre>\n<p>will return the result.</p>\n"},{"tags":["java","windows","maven"],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683225995,"creation_date":1683225995,"answer_id":76176455,"question_id":76176304,"body_markdown":"On windows the default location for the &quot;local&quot; repository is `C:\\Users\\&lt;User_Name&gt;\\.m2`.\r\n\r\nCalling `mvn clean install` in &quot;parent-util&quot; should cause both `parent-util` AND `math-util` to be installed locally.\r\n\r\nThere is no need to install the artifact or it&#39;s parent into your demo and you don&#39;t have to add `repositories` and `file://${project.basedir}/lib` etc..","title":"Maven on Windows not able to resolve parent POM from a custom library added as a dependency","body":"<p>On windows the default location for the &quot;local&quot; repository is <code>C:\\Users\\&lt;User_Name&gt;\\.m2</code>.</p>\n<p>Calling <code>mvn clean install</code> in &quot;parent-util&quot; should cause both <code>parent-util</code> AND <code>math-util</code> to be installed locally.</p>\n<p>There is no need to install the artifact or it's parent into your demo and you don't have to add <code>repositories</code> and <code>file://${project.basedir}/lib</code> etc..</p>\n"}],"owner":{"account_id":23636334,"reputation":11,"user_id":17667325,"display_name":"Javier Meza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683228485,"creation_date":1683224658,"question_id":76176304,"body_markdown":"I&#39;m testing a multi module project on maven and also creating custom libraries to include in other Maven projects, and Im building a math-util lib, which is one of the modules of my project, so I have this folder structure\r\n\r\n```\r\n/parent-util\r\n    /math-util\r\n        pom.xml\r\npom.xml\r\n```\r\nThis is the `pom.xml` of `parent-utl`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.javi&lt;/groupId&gt;\r\n    &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;modules&gt;\r\n        &lt;module&gt;math-util&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd this is the `pom.xml` of `math-util`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.javi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;math-util&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAfter running `mvn clean install` I get the following jar file for my `math-util` library `math-util-1.0-SNAPSHOT.jar`\r\n\r\nThen I created another maven project, which I named `demo` my idea was to include the `math-util` library as a dependency, using a local repository inside `demo` (think about this as a customer who we are only providing the `math-util` jar file), so this is my folder structure for the `demo` project (I just copied and pasted the `math-util-1.0-SNAPSHOT.jar` inside so I can install it)\r\n\r\n\r\n```\r\n/demo\r\n    /lib\r\n    /src/java/...\r\n    math-util-1.0-SNAPSHOT.jar\r\n    pom.xml\r\n```\r\n\r\nBy using `mvn install` I installed my `math-lib` dependency inside the `lib` folder:\r\n\r\n```\r\nmvn install:install-file -Dfile=&#39;math-util-1.0-SNAPSHOT.jar&#39; -DgroupId=&#39;com.javi&#39; -DartifactId=&#39;math-util&#39; -Dversion=&#39;1.0-SNAPSHOT&#39; -DlocalRepositoryPath=&#39;lib&#39;\r\n```\r\n\r\nWhich works fine and I actually see the folders now inside `lib`, this is the output\r\n```\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\r\n[INFO] Building demo 1.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- install:3.1.0:install-file (default-cli) @ demo ---\r\n[INFO] Installing C:\\Users\\jmeza\\IdeaProjects\\demo\\math-util-1.0-SNAPSHOT.jar to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.jar\r\n[INFO] Installing C:\\Users\\jmeza\\AppData\\Local\\Temp\\math-util-1.0-SNAPSHOT973893646697774711.pom to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.pom\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.499 s\r\n[INFO] Finished at: 2023-05-04T10:05:30-06:00\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\nNow my `pom.xml` for `demo` is the following, adding the `lib` folder as a repository and the `math-util` as a dependency\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;lib&lt;/id&gt;\r\n            &lt;name&gt;Local Maven Repository&lt;/name&gt;\r\n            &lt;url&gt;file://${project.basedir}/lib&lt;/url&gt;\r\n            &lt;releases&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;checksumPolicy&gt;ignore&lt;/checksumPolicy&gt;\r\n            &lt;/releases&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.javi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;math-util&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nBut I dont know why, and this is only failing for me on Windows (tried it on Ubuntu and Mac) when I try to do `mvn clean install` I get the following issue\r\n\r\n```\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\r\n[INFO] Building demo 1.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.394 s\r\n[INFO] Finished at: 2023-05-04T10:26:06-06:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal on project demo: Could not resolve dependencies for project org.example:demo:jar:1.0-SNAPSHOT: Failed to collect dependencies at com.javi:math-util:jar:1.0-SNAPSHOT: Failed to read arti\r\nfact descriptor for com.javi:math-util:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: com.javi:parent-util:pom:1.0-SNAPSHOT (absent): com.javi:parent-util:pom:1.0-SNAPSHOT was not found in file://C:\r\n\\Users\\jmeza\\IdeaProjects\\demo/lib during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of lib has elapsed or updates are forced -&gt; [Help 1]\r\n[ERROR]\r\n```\r\nWhich indicates maven is not able to resolve the parent POM file in this case `parent-util`, the weird thing is this is only failing for me on Windows\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI have tried using `&lt;relativePath&gt;` on the `math-util` pom.xml file but it didnt work, also I tried changing the `&lt;url&gt;` inside the `demo` pom.xml thinking if this is an issue with the `file://` protocol but even if I add a full path this does not work.&lt;/code&gt;","title":"Maven on Windows not able to resolve parent POM from a custom library added as a dependency","body":"<p>I'm testing a multi module project on maven and also creating custom libraries to include in other Maven projects, and Im building a math-util lib, which is one of the modules of my project, so I have this folder structure</p>\n<pre><code>/parent-util\n    /math-util\n        pom.xml\npom.xml\n</code></pre>\n<p>This is the <code>pom.xml</code> of <code>parent-utl</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.javi&lt;/groupId&gt;\n    &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;modules&gt;\n        &lt;module&gt;math-util&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>And this is the <code>pom.xml</code> of <code>math-util</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.javi&lt;/groupId&gt;\n        &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;math-util&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>After running <code>mvn clean install</code> I get the following jar file for my <code>math-util</code> library <code>math-util-1.0-SNAPSHOT.jar</code></p>\n<p>Then I created another maven project, which I named <code>demo</code> my idea was to include the <code>math-util</code> library as a dependency, using a local repository inside <code>demo</code> (think about this as a customer who we are only providing the <code>math-util</code> jar file), so this is my folder structure for the <code>demo</code> project (I just copied and pasted the <code>math-util-1.0-SNAPSHOT.jar</code> inside so I can install it)</p>\n<pre><code>/demo\n    /lib\n    /src/java/...\n    math-util-1.0-SNAPSHOT.jar\n    pom.xml\n</code></pre>\n<p>By using <code>mvn install</code> I installed my <code>math-lib</code> dependency inside the <code>lib</code> folder:</p>\n<pre><code>mvn install:install-file -Dfile='math-util-1.0-SNAPSHOT.jar' -DgroupId='com.javi' -DartifactId='math-util' -Dversion='1.0-SNAPSHOT' -DlocalRepositoryPath='lib'\n</code></pre>\n<p>Which works fine and I actually see the folders now inside <code>lib</code>, this is the output</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\n[INFO] Building demo 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- install:3.1.0:install-file (default-cli) @ demo ---\n[INFO] Installing C:\\Users\\jmeza\\IdeaProjects\\demo\\math-util-1.0-SNAPSHOT.jar to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.jar\n[INFO] Installing C:\\Users\\jmeza\\AppData\\Local\\Temp\\math-util-1.0-SNAPSHOT973893646697774711.pom to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.pom\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.499 s\n[INFO] Finished at: 2023-05-04T10:05:30-06:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>Now my <code>pom.xml</code> for <code>demo</code> is the following, adding the <code>lib</code> folder as a repository and the <code>math-util</code> as a dependency</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;lib&lt;/id&gt;\n            &lt;name&gt;Local Maven Repository&lt;/name&gt;\n            &lt;url&gt;file://${project.basedir}/lib&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;checksumPolicy&gt;ignore&lt;/checksumPolicy&gt;\n            &lt;/releases&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.javi&lt;/groupId&gt;\n            &lt;artifactId&gt;math-util&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>But I dont know why, and this is only failing for me on Windows (tried it on Ubuntu and Mac) when I try to do <code>mvn clean install</code> I get the following issue</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\n[INFO] Building demo 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.394 s\n[INFO] Finished at: 2023-05-04T10:26:06-06:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal on project demo: Could not resolve dependencies for project org.example:demo:jar:1.0-SNAPSHOT: Failed to collect dependencies at com.javi:math-util:jar:1.0-SNAPSHOT: Failed to read arti\nfact descriptor for com.javi:math-util:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: com.javi:parent-util:pom:1.0-SNAPSHOT (absent): com.javi:parent-util:pom:1.0-SNAPSHOT was not found in file://C:\n\\Users\\jmeza\\IdeaProjects\\demo/lib during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of lib has elapsed or updates are forced -&gt; [Help 1]\n[ERROR]\n</code></pre>\n<p>Which indicates maven is not able to resolve the parent POM file in this case <code>parent-util</code>, the weird thing is this is only failing for me on Windows</p>\n<p>I have tried using <code>&lt;relativePath&gt;</code> on the <code>math-util</code> pom.xml file but it didnt work, also I tried changing the <code>&lt;url&gt;</code> inside the <code>demo</code> pom.xml thinking if this is an issue with the <code>file://</code> protocol but even if I add a full path this does not work.</p>\n"},{"tags":["java","php"],"answers":[{"tags":[],"owner":{"account_id":378910,"reputation":2990,"user_id":731931,"display_name":"xs0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1511111110,"creation_date":1511111110,"answer_id":47379541,"question_id":47379426,"body_markdown":"There are several bugs, but most of all you&#39;re just overcomplicating things. Simply use base64 encoding and built-in functions. On PHP side:\r\n\r\n    $ctx = hash_init(&#39;md5&#39;);\r\n    hash_update($ctx, $header);\r\n    hash_update($ctx, $serial);\r\n    $raw = hash_final($ctx, true);\r\n    $out = substr(base64_encode($raw), 0, 10);\r\n\r\nOn Java side:\r\n\r\n    // ...\r\n    raw = md.digest();\r\n    out = Base64.getEncoder().encodeToString(raw).substring(0, 10);","title":"Java message digest update converted in PHP","body":"<p>There are several bugs, but most of all you're just overcomplicating things. Simply use base64 encoding and built-in functions. On PHP side:</p>\n\n<pre><code>$ctx = hash_init('md5');\nhash_update($ctx, $header);\nhash_update($ctx, $serial);\n$raw = hash_final($ctx, true);\n$out = substr(base64_encode($raw), 0, 10);\n</code></pre>\n\n<p>On Java side:</p>\n\n<pre><code>// ...\nraw = md.digest();\nout = Base64.getEncoder().encodeToString(raw).substring(0, 10);\n</code></pre>\n"}],"owner":{"account_id":2664419,"reputation":1,"user_id":2303282,"display_name":"AlberAls"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":47379541,"answer_count":1,"score":-1,"last_activity_date":1683228469,"creation_date":1511110447,"question_id":47379426,"body_markdown":"I have this code in Java [Pastebin link][1]. Sorry for pastebin link but SO doesn&#39;t allow me to paste that much code\r\n\r\nWhich outputs &quot;Ap1pAXP8yS&quot;\r\n\r\nI&#39;m trying to convert the code in PHP. Till now I have converted some but its not working OK ( not getting Ap1pAXP8yS in PHP ). \r\n\r\nThe main problem seems to be the md.update \r\n\r\nHere the code in PHP \r\n\r\n    function bin2print($hex)\r\n    {\r\n\t    $out = &quot;&quot;;\r\n        $mapping = [ &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;, &#39;$&#39;, &#39;j&#39;, &#39;k&#39;, &#39;-&#39;, &#39;m&#39;, &#39;n&#39;, &#39;o&#39;, &#39;p&#39;, &#39;q&#39;, &#39;r&#39;, &#39;s&#39;, &#39;t&#39;, &#39;u&#39;, &#39;v&#39;, &#39;w&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;=&#39;, &#39;J&#39;, &#39;K&#39;, &#39;L&#39;, &#39;M&#39;, &#39;N&#39;, &#39;O&#39;, &#39;P&#39;, &#39;Q&#39;, &#39;R&#39;, &#39;S&#39;, &#39;T&#39;, &#39;U&#39;, &#39;V&#39;, &#39;W&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;.&#39;, &#39;/&#39;, &#39;%&#39; ];\r\n        for ($i = 0; $i &lt; count($hex); $i++) {\r\n\t\t\r\n            $j = $hex[$i];\r\n\t\t\t\r\n\t\t\tif ($j &lt; 0) {\r\n\t\t\t\t$j = 256 + $j;\r\n\t\t\t}\r\n\r\n\t\t\t$out.=  $mapping [($j % count($mapping)) ];\r\n        }\r\n\t\treturn $out;\r\n\t}\r\n\r\n\tfunction byteStr2byteArray($s)\r\n    {\r\n\t\treturn array_slice(unpack(&quot;C*&quot;, &quot;\\0&quot;.$s), 1);\r\n\t} \r\n\t \r\n\t \r\n\tfunction getBytes($string)\r\n    {\r\n\t \r\n\t\t$bytes = array();\r\n\t\tfor($i = 0; $i &lt; strlen($string); $i++) {\r\n\t\t\t$bytes[] = ord($string[$i]);\r\n\t\t}\r\n\r\n\t\t$out = &#39;&#39;;\r\n\t\tforeach($bytes as $single) {\r\n\t\t\t$out.=$single ;\r\n\t\t}\r\n\t\treturn ($out);\r\n\t}\r\n\t \r\n\t$serial = &#39;111111111111&#39;;\r\n\t$header = &#39;cow&#39;;\r\n\r\n\t$ctx = hash_init(&#39;md5&#39; );\r\n\thash_update($ctx, getBytes($header));\r\n\thash_update($ctx, getBytes($serial));\r\n\t$raw = hash_final($ctx,true);\r\n\r\n\t$out = bin2print(byteStr2byteArray($raw));\r\n\r\n\techo substr($out,0,10);\r\n\r\nWhich outputs &quot;-fjk7WCU2E&quot;\r\n\r\nWhat am I doing wrong?\r\n\r\n\r\n  [1]: https://pastebin.com/Z08w46ut","title":"Java message digest update converted in PHP","body":"<p>I have this code in Java <a href=\"https://pastebin.com/Z08w46ut\" rel=\"nofollow noreferrer\">Pastebin link</a>. Sorry for pastebin link but SO doesn't allow me to paste that much code</p>\n<p>Which outputs &quot;Ap1pAXP8yS&quot;</p>\n<p>I'm trying to convert the code in PHP. Till now I have converted some but its not working OK ( not getting Ap1pAXP8yS in PHP ).</p>\n<p>The main problem seems to be the md.update</p>\n<p>Here the code in PHP</p>\n<pre><code>function bin2print($hex)\n{\n    $out = &quot;&quot;;\n    $mapping = [ '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', '$', 'j', 'k', '-', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', '=', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '.', '/', '%' ];\n    for ($i = 0; $i &lt; count($hex); $i++) {\n    \n        $j = $hex[$i];\n        \n        if ($j &lt; 0) {\n            $j = 256 + $j;\n        }\n\n        $out.=  $mapping [($j % count($mapping)) ];\n    }\n    return $out;\n}\n\nfunction byteStr2byteArray($s)\n{\n    return array_slice(unpack(&quot;C*&quot;, &quot;\\0&quot;.$s), 1);\n} \n \n \nfunction getBytes($string)\n{\n \n    $bytes = array();\n    for($i = 0; $i &lt; strlen($string); $i++) {\n        $bytes[] = ord($string[$i]);\n    }\n\n    $out = '';\n    foreach($bytes as $single) {\n        $out.=$single ;\n    }\n    return ($out);\n}\n \n$serial = '111111111111';\n$header = 'cow';\n\n$ctx = hash_init('md5' );\nhash_update($ctx, getBytes($header));\nhash_update($ctx, getBytes($serial));\n$raw = hash_final($ctx,true);\n\n$out = bin2print(byteStr2byteArray($raw));\n\necho substr($out,0,10);\n</code></pre>\n<p>Which outputs &quot;-fjk7WCU2E&quot;</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","jmx"],"owner":{"account_id":16720084,"reputation":31,"user_id":12085258,"display_name":"manikanta Nangunuri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683228447,"creation_date":1683228447,"question_id":76176750,"body_markdown":"We have our app running using jmx properties , which are passed in the command line arguments while starting the app as systempropties.\r\nThere are couple of properties which are having plain text passwords \r\n\r\n    -Djmxremote.password having file contains plain text passwords.\r\n    -Djavax.net.ssl.keystorePassword\r\n    -Djavax.net.ssl.TrustStorepassword.\r\n\r\nI have my own encryption logic and am passing a encrypted values to them. Now I want to understand if we decrypt in the code those propertis and set them back to the systemproperties,  how can we make jmx to pick the latest values. \r\nAny leads on this is much appreciated.","title":"How to pass encypted values to jmx properties","body":"<p>We have our app running using jmx properties , which are passed in the command line arguments while starting the app as systempropties.\nThere are couple of properties which are having plain text passwords</p>\n<pre><code>-Djmxremote.password having file contains plain text passwords.\n-Djavax.net.ssl.keystorePassword\n-Djavax.net.ssl.TrustStorepassword.\n</code></pre>\n<p>I have my own encryption logic and am passing a encrypted values to them. Now I want to understand if we decrypt in the code those propertis and set them back to the systemproperties,  how can we make jmx to pick the latest values.\nAny leads on this is much appreciated.</p>\n"},{"tags":["java","lambda","java-stream"],"answers":[{"tags":[],"owner":{"account_id":27784879,"reputation":389,"user_id":21212553,"display_name":"galalem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683219278,"creation_date":1683219278,"answer_id":76175616,"question_id":76175532,"body_markdown":"Try this\r\n```java\r\nstatic String shortestPerson(List&lt;Person&gt; ps) {\r\n    return ps.stream().min(Comparator.comparing(Person::height)).orElse(new Person(&quot;No One&quot;, 0)).name;\r\n}\r\n```","title":"How to return a value based on a property of a list of objects using streams","body":"<p>Try this</p>\n<pre class=\"lang-java prettyprint-override\"><code>static String shortestPerson(List&lt;Person&gt; ps) {\n    return ps.stream().min(Comparator.comparing(Person::height)).orElse(new Person(&quot;No One&quot;, 0)).name;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683228189,"creation_date":1683228189,"answer_id":76176718,"question_id":76175532,"body_markdown":"In your `shortestPerson` method, you can do it like this. `Map` is a method of `Optional` which will take the `Object` and extract a different value.\r\n```\r\nstatic String shortestPerson(List&lt;Person&gt; ps) {\r\n     return ps.stream().min(Comparator.comparingInt(Person::height))\r\n             .map(Person::name).get();\r\n    \r\n }","title":"How to return a value based on a property of a list of objects using streams","body":"<p>In your <code>shortestPerson</code> method, you can do it like this. <code>Map</code> is a method of <code>Optional</code> which will take the <code>Object</code> and extract a different value.</p>\n<pre><code>static String shortestPerson(List&lt;Person&gt; ps) {\n     return ps.stream().min(Comparator.comparingInt(Person::height))\n             .map(Person::name).get();\n    \n }\n</code></pre>\n"}],"owner":{"account_id":22367061,"reputation":11,"user_id":16582657,"display_name":"Andy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683228189,"creation_date":1683218705,"question_id":76175532,"body_markdown":"I need to return the name (String) of the Person record with shortest height using streams.\r\n\r\nI have searched online but all i could find that kind of worked was finding the actual lowest int value, not the name of the Person with the lowest height. i just started learning streams and i find them so hard to understand. Any help is appreciated.\r\n\r\n\r\n```\r\n\r\n//Can not use for/while/if/shortestPerson\r\nimport java.util.List;\r\nimport java.util.ArrayList;\r\nimport java.util.Comparator;\r\nimport java.util.function.*;\r\n\r\nrecord Person(String name, int height) {\r\n}\r\n\r\npublic class Exercise {\r\n\t// this is where the implementation goes \r\n\tstatic String shortestPerson(List&lt;Person&gt; ps) {\r\n               String name= ps.stream().map.name.\r\n    \r\n  }\r\n\r\n\tstatic Person p(String name, int height) {\r\n\t\treturn new Person(name, height);\r\n\t}\r\n\r\n\tstatic void test(String expected, List&lt;Person&gt; input) {\r\n\t\tString res = shortestPerson(input);\r\n\t\tassert res.equals(expected) : &quot;For input &quot; + input + &quot; we get &quot; + res + &quot; instead of &quot; + expected;\r\n\t}\r\n\r\n\tpublic static void main(String[] a) {\r\n\t\ttry {\r\n\t\t\tshortestPerson(List.of());\r\n\t\t\tassert false;\r\n\t\t} catch (IllegalArgumentException iae) {\r\n\t\t}\r\n\r\n\t\ttest(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 190)));\r\n\t\ttest(&quot;Adam&quot;, List.of(p(&quot;Adam&quot;, 220)));\r\n\t\ttest(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 190), p(&quot;Alice&quot;, 170)));\r\n\t\ttest(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 170), p(&quot;Alice&quot;, 190)));\r\n\t\ttest(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 1), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 3)));\r\n\t\ttest(&quot;Dany&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 1)));\r\n\t\ttest(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 5)));\r\n\t}\r\n}\r\n\r\n```\r\n","title":"How to return a value based on a property of a list of objects using streams","body":"<p>I need to return the name (String) of the Person record with shortest height using streams.</p>\n<p>I have searched online but all i could find that kind of worked was finding the actual lowest int value, not the name of the Person with the lowest height. i just started learning streams and i find them so hard to understand. Any help is appreciated.</p>\n<pre><code>\n//Can not use for/while/if/shortestPerson\nimport java.util.List;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.function.*;\n\nrecord Person(String name, int height) {\n}\n\npublic class Exercise {\n    // this is where the implementation goes \n    static String shortestPerson(List&lt;Person&gt; ps) {\n               String name= ps.stream().map.name.\n    \n  }\n\n    static Person p(String name, int height) {\n        return new Person(name, height);\n    }\n\n    static void test(String expected, List&lt;Person&gt; input) {\n        String res = shortestPerson(input);\n        assert res.equals(expected) : &quot;For input &quot; + input + &quot; we get &quot; + res + &quot; instead of &quot; + expected;\n    }\n\n    public static void main(String[] a) {\n        try {\n            shortestPerson(List.of());\n            assert false;\n        } catch (IllegalArgumentException iae) {\n        }\n\n        test(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 190)));\n        test(&quot;Adam&quot;, List.of(p(&quot;Adam&quot;, 220)));\n        test(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 190), p(&quot;Alice&quot;, 170)));\n        test(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 170), p(&quot;Alice&quot;, 190)));\n        test(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 1), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 3)));\n        test(&quot;Dany&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 1)));\n        test(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 5)));\n    }\n}\n\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1683222573,"post_id":76175919,"comment_id":134337544,"body_markdown":"Are there no clues in the remainder of the stacktrace? Is this ZipException the root cause, or caused by some other exception? And where is this exception thrown? The stack trace would tell you (or us, if you included the relevant part) all that.","body":"Are there no clues in the remainder of the stacktrace? Is this ZipException the root cause, or caused by some other exception? And where is this exception thrown? The stack trace would tell you (or us, if you included the relevant part) all that."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683223066,"post_id":76175919,"comment_id":134337646,"body_markdown":"add pic with stacktrace","body":"add pic with stacktrace"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1683223622,"post_id":76175919,"comment_id":134337757,"body_markdown":"The ZIP file your server reads is corrupted. Or, possibly, &#39;corrupted&#39; - zip is a container format with a billion variations, but there is a standard &#39;just choose these for it to be universally readable zip file&#39; - and it isn&#39;t one of those.","body":"The ZIP file your server reads is corrupted. Or, possibly, &#39;corrupted&#39; - zip is a container format with a billion variations, but there is a standard &#39;just choose these for it to be universally readable zip file&#39; - and it isn&#39;t one of those."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683223818,"post_id":76175919,"comment_id":134337799,"body_markdown":"Vary strange , if it corrupted why i dnt have any trable with read it on my PC.  And how to fix that?","body":"Vary strange , if it corrupted why i dnt have any trable with read it on my PC.  And how to fix that?"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":4,"creation_date":1683223833,"post_id":76175919,"comment_id":134337805,"body_markdown":"&quot;i get file from **ftp server**&quot; - the typical issue is ascii mode transfer.","body":"&quot;i get file from <b>ftp server</b>&quot; - the typical issue is ascii mode transfer."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683223966,"post_id":76175919,"comment_id":134337833,"body_markdown":"i retrieve not file but byte[] using FtpClient.retirievFileBytes(path to file). How to fix it Andey?","body":"i retrieve not file but byte[] using FtpClient.retirievFileBytes(path to file). How to fix it Andey?"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":1,"creation_date":1683224211,"post_id":76175919,"comment_id":134337880,"body_markdown":"`FtpClient.setFileType(FTP.BINARY_FILE_TYPE)`","body":"<code>FtpClient.setFileType(FTP.BINARY_FILE_TYPE)</code>"},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683226880,"post_id":76175919,"comment_id":134338466,"body_markdown":"not working - FtpClient.setFileType(FTP.BINARY_FILE_TYPE) set it when connect to Ftp and still get this exception","body":"not working - FtpClient.setFileType(FTP.BINARY_FILE_TYPE) set it when connect to Ftp and still get this exception"},{"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"score":0,"creation_date":1683227154,"post_id":76175919,"comment_id":134338530,"body_markdown":"Use some tool to get a hash/checksum of the file on each computer and make sure it&#39;s the same. If your server is on Linux, you probably have a tool such as `md5sum`/`sha1sum`/`sha256sum` (e.g. in [Debian&#39;s coreutils](https://packages.debian.org/bullseye/coreutils)) that you can run from the command line.","body":"Use some tool to get a hash/checksum of the file on each computer and make sure it&#39;s the same. If your server is on Linux, you probably have a tool such as <code>md5sum</code>/<code>sha1sum</code>/<code>sha256sum</code> (e.g. in <a href=\"https://packages.debian.org/bullseye/coreutils\" rel=\"nofollow noreferrer\">Debian&#39;s coreutils</a>) that you can run from the command line."}],"answers":[{"tags":[],"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683228170,"creation_date":1683228170,"answer_id":76176714,"question_id":76175919,"body_markdown":"finally found solution \r\nbefore retrieve every file i put this function\r\n\r\n    ftp.setFileType(FTP.BINARY_FILE_TYPE);\r\n\r\nand then \r\n\r\n    InputStream inputStream = ftp.retrieveFileStream(path)\r\n\r\nand everything going good at local PC and server with linux","title":"How to split ZipInputStream into Inputstreams","body":"<p>finally found solution\nbefore retrieve every file i put this function</p>\n<pre><code>ftp.setFileType(FTP.BINARY_FILE_TYPE);\n</code></pre>\n<p>and then</p>\n<pre><code>InputStream inputStream = ftp.retrieveFileStream(path)\n</code></pre>\n<p>and everything going good at local PC and server with linux</p>\n"}],"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76176714,"answer_count":1,"score":0,"last_activity_date":1683228170,"creation_date":1683221470,"question_id":76175919,"body_markdown":"i get file from ftp server and parse it to some java class\r\n\r\n  \r\n\r\n     wrapper.connect();\r\n                byte[] archiveBytes = wrapper.retrieveFileBytes(&quot;some path&quot;);\r\n                try (ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(archiveBytes))) {\r\n                    ZipEntry entry;\r\n                    while ((entry = zis.getNextEntry()) != null) {\r\n                        byte[] fileBytes = FileUtils.readZipEntry(zis);\r\n                        if (fileBytes.length == 0) {\r\n                            continue;\r\n                        }\r\n                        try (InputStream inputStream = new ByteArrayInputStream(fileBytes)) {\r\n                            var model =  ftpFileReader.read(inputStream);\r\n                           \r\n                            domains.add(model);\r\n                        } \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return domains;\r\n        }\r\n\r\nand util method\r\n\r\n \r\n\r\n     public static byte[] readZipEntry(ZipInputStream zis) throws IOException {\r\n            try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {\r\n                byte[] buffer = new byte[1024];\r\n                int count;\r\n                while ((count = zis.read(buffer)) &gt; -1) {\r\n                    outputStream.write(buffer, 0, count);\r\n                }\r\n                return outputStream.toByteArray();\r\n            } finally {\r\n                zis.closeEntry();\r\n        \r\n\r\n    }\r\n    }\r\n\r\neverything works good on my local PC with windows, but if i deploy it on server i got \r\n\r\n    java.util.zip.ZipException: invalid distance too far back\r\n\r\ndont understand what is going wrong and how to fix i. Please help\r\n\r\n\r\nps. stacktrace\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RiOqe.png\r\n\r\n    org.springframework.retry.RetryException: Non-skippable exception in recoverer while processing; nested exception is java.util.zip.ZipException: invalid distance too far back\r\n            at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor$2.recover(FaultTolerantChunkProcessor.java:299) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.retry.support.RetryTemplate.handleRetryExhausted(RetryTemplate.java:539) ~[spring-retry-1.3.3.jar!/:na]\r\n            at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:387) ~[spring-retry-1.3.3.jar!/:na]\r\n            at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:255) ~[spring-retry-1.3.3.jar!/:na]\r\n            at org.springframework.batch.core.step.item.BatchRetryTemplate.execute(BatchRetryTemplate.java:217) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor.transform(FaultTolerantChunkProcessor.java:308) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.23.jar!/:5.3.23]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:139) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\n    Caused by: java.util.zip.ZipException: invalid distance too far back\r\n            at java.base/java.util.zip.InflaterInputStream.read(Unknown Source) ~[na:na]\r\n            at java.base/java.util.zip.ZipInputStream.read(Unknown Source) ~[na:na]\r\n            at java.base/java.util.zip.ZipInputStream.closeEntry(Unknown Source) ~[na:na]\r\n            at ftp.utils.FileUtils.readZipEntry(FileUtils.java:18)","title":"How to split ZipInputStream into Inputstreams","body":"<p>i get file from ftp server and parse it to some java class</p>\n<pre><code> wrapper.connect();\n            byte[] archiveBytes = wrapper.retrieveFileBytes(&quot;some path&quot;);\n            try (ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(archiveBytes))) {\n                ZipEntry entry;\n                while ((entry = zis.getNextEntry()) != null) {\n                    byte[] fileBytes = FileUtils.readZipEntry(zis);\n                    if (fileBytes.length == 0) {\n                        continue;\n                    }\n                    try (InputStream inputStream = new ByteArrayInputStream(fileBytes)) {\n                        var model =  ftpFileReader.read(inputStream);\n                       \n                        domains.add(model);\n                    } \n                    }\n                }\n            }\n        }\n        return domains;\n    }\n</code></pre>\n<p>and util method</p>\n<pre><code> public static byte[] readZipEntry(ZipInputStream zis) throws IOException {\n        try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {\n            byte[] buffer = new byte[1024];\n            int count;\n            while ((count = zis.read(buffer)) &gt; -1) {\n                outputStream.write(buffer, 0, count);\n            }\n            return outputStream.toByteArray();\n        } finally {\n            zis.closeEntry();\n    \n\n}\n}\n</code></pre>\n<p>everything works good on my local PC with windows, but if i deploy it on server i got</p>\n<pre><code>java.util.zip.ZipException: invalid distance too far back\n</code></pre>\n<p>dont understand what is going wrong and how to fix i. Please help</p>\n<p>ps. stacktrace</p>\n<p><a href=\"https://i.stack.imgur.com/RiOqe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RiOqe.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>org.springframework.retry.RetryException: Non-skippable exception in recoverer while processing; nested exception is java.util.zip.ZipException: invalid distance too far back\n        at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor$2.recover(FaultTolerantChunkProcessor.java:299) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.retry.support.RetryTemplate.handleRetryExhausted(RetryTemplate.java:539) ~[spring-retry-1.3.3.jar!/:na]\n        at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:387) ~[spring-retry-1.3.3.jar!/:na]\n        at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:255) ~[spring-retry-1.3.3.jar!/:na]\n        at org.springframework.batch.core.step.item.BatchRetryTemplate.execute(BatchRetryTemplate.java:217) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor.transform(FaultTolerantChunkProcessor.java:308) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.23.jar!/:5.3.23]\n        at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:139) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\nCaused by: java.util.zip.ZipException: invalid distance too far back\n        at java.base/java.util.zip.InflaterInputStream.read(Unknown Source) ~[na:na]\n        at java.base/java.util.zip.ZipInputStream.read(Unknown Source) ~[na:na]\n        at java.base/java.util.zip.ZipInputStream.closeEntry(Unknown Source) ~[na:na]\n        at ftp.utils.FileUtils.readZipEntry(FileUtils.java:18)\n</code></pre>\n"},{"tags":["java","spring","grpc"],"answers":[{"tags":[],"owner":{"account_id":27985045,"reputation":1,"user_id":21372081,"display_name":"付后钰"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678464929,"creation_date":1678464682,"answer_id":75698462,"question_id":75498501,"body_markdown":"Since autoconfiguration changed in springboot 3, META-INF/spring.factories was updated to META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports.\r\nThe update prevented grpc-client from autowiring.\r\nOn the latest master branch, the automatic assembly of springboot3 has been added. You can download the source code and compile and install it.\r\n\r\n[source code][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0yQ4z.jpg","title":"@GrpcClient is null spring boot 3","body":"<p>Since autoconfiguration changed in springboot 3, META-INF/spring.factories was updated to META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports.\nThe update prevented grpc-client from autowiring.\nOn the latest master branch, the automatic assembly of springboot3 has been added. You can download the source code and compile and install it.</p>\n<p><a href=\"https://i.stack.imgur.com/0yQ4z.jpg\" rel=\"nofollow noreferrer\">source code</a></p>\n"},{"tags":[],"owner":{"account_id":12614140,"reputation":66,"user_id":9172198,"display_name":"Moh3n Sadeghi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1683228055,"creation_date":1683103885,"answer_id":76162025,"question_id":75498501,"body_markdown":"Based on [this issue][1] you must use the following configuration in your project :\r\n\r\n    import org.springframework.boot.autoconfigure.ImportAutoConfiguration;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    @ImportAutoConfiguration({\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientMetricAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientHealthAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientSecurityAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientTraceAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcDiscoveryClientAutoConfiguration.class,\r\n    \r\n            net.devh.boot.grpc.common.autoconfigure.GrpcCommonCodecAutoConfiguration.class,\r\n            net.devh.boot.grpc.common.autoconfigure.GrpcCommonTraceAutoConfiguration.class,\r\n    \r\n            net.devh.boot.grpc.server.autoconfigure.GrpcAdviceAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcHealthServiceAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataConsulConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataEurekaConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataNacosConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataZookeeperConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcReflectionServiceAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerFactoryAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerMetricAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerSecurityAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerTraceAutoConfiguration.class\r\n    })\r\n    public class GrpcConfig {\r\n    }\r\n\r\n\r\n  [1]: https://github.com/yidongnan/grpc-spring-boot-starter/issues/823","title":"@GrpcClient is null spring boot 3","body":"<p>Based on <a href=\"https://github.com/yidongnan/grpc-spring-boot-starter/issues/823\" rel=\"noreferrer\">this issue</a> you must use the following configuration in your project :</p>\n<pre><code>import org.springframework.boot.autoconfigure.ImportAutoConfiguration;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ImportAutoConfiguration({\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientMetricAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientHealthAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientSecurityAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientTraceAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcDiscoveryClientAutoConfiguration.class,\n\n        net.devh.boot.grpc.common.autoconfigure.GrpcCommonCodecAutoConfiguration.class,\n        net.devh.boot.grpc.common.autoconfigure.GrpcCommonTraceAutoConfiguration.class,\n\n        net.devh.boot.grpc.server.autoconfigure.GrpcAdviceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcHealthServiceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataConsulConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataEurekaConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataNacosConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataZookeeperConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcReflectionServiceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerFactoryAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerMetricAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerSecurityAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerTraceAutoConfiguration.class\n})\npublic class GrpcConfig {\n}\n</code></pre>\n"}],"owner":{"account_id":21417136,"reputation":2183,"user_id":15777370,"display_name":"vszholobov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1691,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76162025,"answer_count":2,"score":3,"last_activity_date":1683228055,"creation_date":1676790067,"question_id":75498501,"body_markdown":"I am making grpc client using `net.devh.grpc-client-spring-boot-starter`\r\n\r\nClient:\r\n```\r\n@Service\r\npublic class SystemService {\r\n    @GrpcClient(&quot;handyman-client&quot;)\r\n    StatusServiceGrpc.StatusServiceBlockingStub handymanClient;\r\n\r\n    public VersionResponse getHandymanVersion() {\r\n        return handymanClient.getVersion(Empty.newBuilder().build());\r\n    }\r\n}\r\n```\r\napplication.yaml:\r\n```\r\ngrpc:\r\n  client:\r\n    handyman-client:\r\n      address: static://localhost:8080\r\n      negotiationType: plaintext\r\n```\r\n\r\nIn runtime `handymanClient` is `null`. Tried spring boot versions from `3.0.0` to `3.0.2`. Lowering the spring boot version to `2.7.0` solves the problem - the client is being created now. \r\n\r\nIs there a workaround to make it work on spring boot 3?\r\n\r\nbuild.gradle:\r\n&lt;!-- begin snippet: js hide: true console: true babel: false --&gt;\r\n&lt;!-- language: lang-js --&gt;\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.0.0&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n    id &quot;com.google.protobuf&quot; version &quot;0.9.2&quot;\r\n}\r\n\r\ngroup = &#39;hello.grpc&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    implementation &#39;io.micrometer:micrometer-registry-prometheus&#39;\r\n    implementation &#39;javax.annotation:javax.annotation-api:1.3.2&#39;\r\n\r\n    implementation group: &#39;net.devh&#39;, name: &#39;grpc-client-spring-boot-starter&#39;, version: &#39;2.13.0.RELEASE&#39;\r\n    implementation group: &#39;io.grpc&#39;, name: &#39;grpc-stub&#39;, version: &#39;1.53.0&#39;\r\n    implementation group: &#39;io.grpc&#39;, name: &#39;grpc-protobuf&#39;, version: &#39;1.53.0&#39;\r\n\r\n}\r\n\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDirs &#39;build/generated/source/proto/main/grpc&#39;\r\n            srcDirs &#39;build/generated/source/proto/main/java&#39;\r\n        }\r\n    }\r\n}\r\n\r\nprotobuf {\r\n    protoc {\r\n        artifact = &#39;com.google.protobuf:protoc:4.0.0-rc-2&#39;\r\n    }\r\n    plugins {\r\n        grpc {\r\n            artifact = &#39;io.grpc:protoc-gen-grpc-java:1.53.0&#39;\r\n        }\r\n    }\r\n    generateProtoTasks {\r\n        all()*.plugins {\r\n\t\t\tgrpc {}\r\n        }\r\n    }\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\nspringBoot {\r\n    buildInfo()\r\n}\r\n&lt;!-- end snippet --&gt;","title":"@GrpcClient is null spring boot 3","body":"<p>I am making grpc client using <code>net.devh.grpc-client-spring-boot-starter</code></p>\n<p>Client:</p>\n<pre><code>@Service\npublic class SystemService {\n    @GrpcClient(&quot;handyman-client&quot;)\n    StatusServiceGrpc.StatusServiceBlockingStub handymanClient;\n\n    public VersionResponse getHandymanVersion() {\n        return handymanClient.getVersion(Empty.newBuilder().build());\n    }\n}\n</code></pre>\n<p>application.yaml:</p>\n<pre><code>grpc:\n  client:\n    handyman-client:\n      address: static://localhost:8080\n      negotiationType: plaintext\n</code></pre>\n<p>In runtime <code>handymanClient</code> is <code>null</code>. Tried spring boot versions from <code>3.0.0</code> to <code>3.0.2</code>. Lowering the spring boot version to <code>2.7.0</code> solves the problem - the client is being created now.</p>\n<p>Is there a workaround to make it work on spring boot 3?</p>\n<p>build.gradle:\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>plugins {\nid 'java'\nid 'org.springframework.boot' version '3.0.0'\nid 'io.spring.dependency-management' version '1.1.0'\nid \"com.google.protobuf\" version \"0.9.2\"\n}\n\ngroup = 'hello.grpc'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nconfigurations {\ncompileOnly {\n    extendsFrom annotationProcessor\n}\n}\n\nrepositories {\nmavenCentral()\n}\n\ndependencies {\nimplementation 'org.springframework.boot:spring-boot-starter-actuator'\nimplementation 'org.springframework.boot:spring-boot-starter-web'\ncompileOnly 'org.projectlombok:lombok'\nannotationProcessor 'org.projectlombok:lombok'\ntestImplementation 'org.springframework.boot:spring-boot-starter-test'\nimplementation 'io.micrometer:micrometer-registry-prometheus'\nimplementation 'javax.annotation:javax.annotation-api:1.3.2'\n\nimplementation group: 'net.devh', name: 'grpc-client-spring-boot-starter', version: '2.13.0.RELEASE'\nimplementation group: 'io.grpc', name: 'grpc-stub', version: '1.53.0'\nimplementation group: 'io.grpc', name: 'grpc-protobuf', version: '1.53.0'\n\n}\n\nsourceSets {\nmain {\n    java {\n        srcDirs 'build/generated/source/proto/main/grpc'\n        srcDirs 'build/generated/source/proto/main/java'\n    }\n}\n}\n\nprotobuf {\nprotoc {\n    artifact = 'com.google.protobuf:protoc:4.0.0-rc-2'\n}\nplugins {\n    grpc {\n        artifact = 'io.grpc:protoc-gen-grpc-java:1.53.0'\n    }\n}\ngenerateProtoTasks {\n    all()*.plugins {\n        grpc {}\n    }\n}\n}\n\ntasks.named('test') {\nuseJUnitPlatform()\n}\n\nspringBoot {\nbuildInfo()\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","internet-explorer","applet"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683181239,"post_id":76170081,"comment_id":134327556,"body_markdown":"Maybe JRE (Java Runtime Environment) might not have been set-up properly on your machine.  Try links on this test page - https://www.w3.org/People/mimasa/test/object/java/ - Do those links show up the details as expected, if not, definitely some JRE related issue is there.  Uninstall Java and install JRE again.","body":"Maybe JRE (Java Runtime Environment) might not have been set-up properly on your machine.  Try links on this test page - <a href=\"https://www.w3.org/People/mimasa/test/object/java/\" rel=\"nofollow noreferrer\">w3.org/People/mimasa/test/object/java</a> - Do those links show up the details as expected, if not, definitely some JRE related issue is there.  Uninstall Java and install JRE again."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683181325,"post_id":76170081,"comment_id":134327566,"body_markdown":"Also, Internet Explorer is an out-dated browser.  Try using Edge, Chrome, &amp; Firefox, etc. actively managed browsers.","body":"Also, Internet Explorer is an out-dated browser.  Try using Edge, Chrome, &amp; Firefox, etc. actively managed browsers."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683202726,"post_id":76170081,"comment_id":134332305,"body_markdown":"Java applets are deprecated technology.  They were officially deprecated by Oracle in Java 9, and well know to be problematic for a long time before that.  The only browser that still supports Applets is Internet Explorer, and IE has been EOL since June 14, 2022.  You really should stop using applets ...","body":"Java applets are deprecated technology.  They were officially deprecated by Oracle in Java 9, and well know to be problematic for a long time before that.  The only browser that still supports Applets is Internet Explorer, and IE has been EOL since June 14, 2022.  You really should stop using applets ..."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683202812,"post_id":76170081,"comment_id":134332331,"body_markdown":"https://www.java.com/en/download/help/enable_browser.html explains how to enable Java in IE.","body":"<a href=\"https://www.java.com/en/download/help/enable_browser.html\" rel=\"nofollow noreferrer\">java.com/en/download/help/enable_browser.html</a> explains how to enable Java in IE."}],"owner":{"account_id":26814570,"reputation":1,"user_id":20404688,"display_name":"Yu Sinae"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683227975,"creation_date":1683180985,"question_id":76170081,"body_markdown":"I got this message when I tried to open a Java applet page in IE.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nalert message for running applet\r\n\r\nI set internet option settings, and checked Java(JRE), and script, HTML applet code, file existing on directory.\r\n\r\nBut it is not working. Something strange is.  In some desktops, it&#39;s working.\r\n\r\nI compared setting options(window control \\&gt; JAVA, browser settings), but it looks the same.\r\n\r\nWhat is the problem and solution?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CC9OP.jpg","title":"Java applet is not working in Internet Explorer","body":"<p>I got this message when I tried to open a Java applet page in IE.</p>\n<p><a href=\"https://i.stack.imgur.com/CC9OP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CC9OP.jpg\" alt=\"enter image description here\" /></a></p>\n<p>alert message for running applet</p>\n<p>I set internet option settings, and checked Java(JRE), and script, HTML applet code, file existing on directory.</p>\n<p>But it is not working. Something strange is.  In some desktops, it's working.</p>\n<p>I compared setting options(window control &gt; JAVA, browser settings), but it looks the same.</p>\n<p>What is the problem and solution?</p>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683165722,"post_id":76169063,"comment_id":134325992,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":5849714,"reputation":86,"user_id":5362509,"display_name":"Lakshmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683216153,"creation_date":1683216153,"answer_id":76175153,"question_id":76169063,"body_markdown":"Yes. It can be a cardview.\r\nHere is the .xml code for each item in the list.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n        &lt;androidx.cardview.widget.CardView\r\n            android:elevation=&quot;5dp&quot;\r\n            app:cardUseCompatPadding=&quot;true&quot;\r\n            app:cardCornerRadius=&quot;10dp&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;horizontal&quot;\r\n                android:padding=&quot;5dp&quot;&gt;\r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/imageView&quot;\r\n                    android:src=&quot;@drawable/ic_time&quot;\r\n                    android:layout_gravity=&quot;start&quot;\r\n                    android:layout_width=&quot;60dp&quot;\r\n                    android:layout_height=&quot;60dp&quot;/&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/textView&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Time&quot;\r\n                    android:paddingHorizontal=&quot;20dp&quot;\r\n                    android:layout_gravity=&quot;end|center_vertical&quot;\r\n                    android:textSize=&quot;20dp&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nYou can work on the aesthetics. I have just added a &#39;Time&#39; icon and text &quot;Time&quot; as an example. \r\n\r\nThen add a RecyclerView in your Activity layout and create an Adapter with the above layout for each item in the list. Lastly, set the RecyclerView to that adapter.\r\n","title":"Box option how to create this like Telegram","body":"<p>Yes. It can be a cardview.\nHere is the .xml code for each item in the list.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n    &lt;androidx.cardview.widget.CardView\n        android:elevation=&quot;5dp&quot;\n        app:cardUseCompatPadding=&quot;true&quot;\n        app:cardCornerRadius=&quot;10dp&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;horizontal&quot;\n            android:padding=&quot;5dp&quot;&gt;\n            &lt;ImageView\n                android:id=&quot;@+id/imageView&quot;\n                android:src=&quot;@drawable/ic_time&quot;\n                android:layout_gravity=&quot;start&quot;\n                android:layout_width=&quot;60dp&quot;\n                android:layout_height=&quot;60dp&quot;/&gt;\n            &lt;TextView\n                android:id=&quot;@+id/textView&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;Time&quot;\n                android:paddingHorizontal=&quot;20dp&quot;\n                android:layout_gravity=&quot;end|center_vertical&quot;\n                android:textSize=&quot;20dp&quot;/&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/androidx.cardview.widget.CardView&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>You can work on the aesthetics. I have just added a 'Time' icon and text &quot;Time&quot; as an example.</p>\n<p>Then add a RecyclerView in your Activity layout and create an Adapter with the above layout for each item in the list. Lastly, set the RecyclerView to that adapter.</p>\n"}],"owner":{"account_id":7091991,"reputation":3,"user_id":19001425,"display_name":"Hamza Aladwan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76175153,"answer_count":1,"score":-1,"last_activity_date":1683227861,"creation_date":1683165297,"question_id":76169063,"body_markdown":"![enter image description here](https://i.stack.imgur.com/x1h55.png)\r\n\r\n\r\n\r\nHow do I design like this (options box) when I click on a message in my application, please write the XML part \r\n\r\nCan it be a card View that carries several elements? ","title":"Box option how to create this like Telegram","body":"<p><img src=\"https://i.stack.imgur.com/x1h55.png\" alt=\"enter image description here\" /></p>\n<p>How do I design like this (options box) when I click on a message in my application, please write the XML part</p>\n<p>Can it be a card View that carries several elements?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683025010,"post_id":76154088,"comment_id":134300091,"body_markdown":"Please read: [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question)","body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why not upload images of code/errors when asking a question?</a>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683025077,"post_id":76154088,"comment_id":134300095,"body_markdown":"&quot;*`logging.level.=DEBUG`*&quot; - The trailing `.` before the `=` seems wrong.","body":"&quot;<i><code>logging.level.=DEBUG</code></i>&quot; - The trailing <code>.</code> before the <code>=</code> seems wrong."},{"owner":{"account_id":28003343,"reputation":47,"user_id":21387155,"display_name":"cokachi"},"score":0,"creation_date":1683027174,"post_id":76154088,"comment_id":134300511,"body_markdown":"anyone here to sort this out?","body":"anyone here to sort this out?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683040128,"post_id":76154088,"comment_id":134303799,"body_markdown":"&quot;*Also i have another issue with this docker file ...*&quot; - Please read: [Can I ask only one question per post?](https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post)","body":"&quot;<i>Also i have another issue with this docker file ...</i>&quot; - Please read: <a href=\"https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post\">Can I ask only one question per post?</a>"}],"answers":[{"tags":[],"owner":{"account_id":28003343,"reputation":47,"user_id":21387155,"display_name":"cokachi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683227735,"creation_date":1683039417,"answer_id":76156182,"question_id":76154088,"body_markdown":"```\r\nFROM maven:3.8.3-openjdk-8-slim\r\n\r\nWORKDIR /app\r\n\r\nCOPY src /app/src\r\nCOPY pom.xml /app\r\nRUN mvn -f pom.xml clean package\r\n\r\nWORKDIR /app/target\r\nEXPOSE 8080 \r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/target/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\r\n\r\n```\r\n\r\nThis docker file resolved my build failure issue after some trial and error.","title":"error during input validation with log4j2 dependecy","body":"<pre><code>FROM maven:3.8.3-openjdk-8-slim\n\nWORKDIR /app\n\nCOPY src /app/src\nCOPY pom.xml /app\nRUN mvn -f pom.xml clean package\n\nWORKDIR /app/target\nEXPOSE 8080 \nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/target/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\n\n</code></pre>\n<p>This docker file resolved my build failure issue after some trial and error.</p>\n"}],"owner":{"account_id":28003343,"reputation":47,"user_id":21387155,"display_name":"cokachi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76156182,"answer_count":1,"score":0,"last_activity_date":1683227735,"creation_date":1683024535,"question_id":76154088,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\ni was wonder how to change to debug so that i can get the stacktrace,\r\n\r\n\r\n\r\n\r\n\r\ni have tried various properties to get it but none of them is working.\r\nthe project is a sample restcontroller that takes usersid as input and logs it in the console.\r\ni have dockerized this appilcation.\r\ni want to know what java version and other versions so that i can learn about the logging cve&#39;s\r\n\r\nAlso i have another issue with this docker file\r\n\r\n```\r\nFROM maven:3.8.3-openjdk-8-slim\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nWORKDIR /app\r\n\r\n\r\nCOPY src /app\r\nCOPY mvnw /app\r\nCOPY pom.xml /app\r\nCOPY mvnw.cmd /app\r\nRUN mvn clean package spring-boot:repackage\r\n\r\nWORKDIR /app/target\r\nEXPOSE 8080 \r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\r\n\r\n```\r\n\r\ni am getting build error in this particular case.\r\n\r\n```\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  01:00 min\r\n[INFO] Finished at: 2023-05-02T11:06:47Z\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage (repackage) on project log4jexample: Execution repackage of goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage failed: Unable to find main class -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\r\nThe command &#39;/bin/sh -c mvn clean package spring-boot:repackage&#39; returned a non-zero code: 1\r\n```","title":"error during input validation with log4j2 dependecy","body":"<p>[![enter image description here][1]][1]</p>\n<p>i was wonder how to change to debug so that i can get the stacktrace,</p>\n<p>i have tried various properties to get it but none of them is working.\nthe project is a sample restcontroller that takes usersid as input and logs it in the console.\ni have dockerized this appilcation.\ni want to know what java version and other versions so that i can learn about the logging cve's</p>\n<p>Also i have another issue with this docker file</p>\n<pre><code>FROM maven:3.8.3-openjdk-8-slim\n\n\n\n\n\n\n\nWORKDIR /app\n\n\nCOPY src /app\nCOPY mvnw /app\nCOPY pom.xml /app\nCOPY mvnw.cmd /app\nRUN mvn clean package spring-boot:repackage\n\nWORKDIR /app/target\nEXPOSE 8080 \nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\n\n</code></pre>\n<p>i am getting build error in this particular case.</p>\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  01:00 min\n[INFO] Finished at: 2023-05-02T11:06:47Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage (repackage) on project log4jexample: Execution repackage of goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage failed: Unable to find main class -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\nThe command '/bin/sh -c mvn clean package spring-boot:repackage' returned a non-zero code: 1\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":5730202,"reputation":1185,"user_id":4525976,"display_name":"Theo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439242080,"creation_date":1439241338,"answer_id":31929321,"question_id":31929118,"body_markdown":"First of all, where is your button onClick listener? This is where you should add your methods.\r\n\r\n    Button button = (Button)this.findViewById(R.id.funny_sayings_button);\r\n    \r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n       \r\n                     changeFunnySayingsButton (v);\r\n                }\r\n            }); \r\n\r\nTo continue with you could create an ArrayList of Strings. You add all of your strings and then simply pick one at random from the list. Hint:\r\n\r\n    //will choose a random number between 0 and the length of the list - 1\r\n    int i = rand.nextInt(yourList.size()); \r\n    String yourFunnyString=yourList.get(i);\r\n\r\nIf you also want to display an image alongside with the String you should also create a map. Use the String as a key. When you select from yourList then use this key to select the value (your image) from the map. \r\n\r\nIt should be fairly straightforward to do.","title":"Android: Making a Button Display Silly Text","body":"<p>First of all, where is your button onClick listener? This is where you should add your methods.</p>\n\n<pre><code>Button button = (Button)this.findViewById(R.id.funny_sayings_button);\n\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                 changeFunnySayingsButton (v);\n            }\n        }); \n</code></pre>\n\n<p>To continue with you could create an ArrayList of Strings. You add all of your strings and then simply pick one at random from the list. Hint:</p>\n\n<pre><code>//will choose a random number between 0 and the length of the list - 1\nint i = rand.nextInt(yourList.size()); \nString yourFunnyString=yourList.get(i);\n</code></pre>\n\n<p>If you also want to display an image alongside with the String you should also create a map. Use the String as a key. When you select from yourList then use this key to select the value (your image) from the map. </p>\n\n<p>It should be fairly straightforward to do.</p>\n"},{"tags":[],"owner":{"account_id":6734695,"reputation":734,"user_id":5189887,"display_name":"Bobby StJacques"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439241503,"creation_date":1439241503,"answer_id":31929365,"question_id":31929118,"body_markdown":"I think that you&#39;re on the right track thinking about using a data structure like an `ArrayList`.\r\n\r\nI&#39;d start by making a class to represent each funny thing, e.g. \r\n\r\n    public class FunnyThing {\r\n      private String phrase; // I&#39;d use a resource ID here\r\n      private int drawableResourceId;\r\n    }\r\n\r\nThen it&#39;s a matter of initializing the set of `FunnyThing` objects and storing them in your data structure.  You could do this in the `onCreate` method of your activity, but you may want to consider writing a factory method somewhere else (e.g. the `FunnyThing` class) that your activity just calls to keep the code from getting cluttered when there are more than 2-3 funny things.\r\n\r\nFinally, on each button press you can choose a random index in your collection of `FunnyThing`s and display that, e.g. \r\n\r\n    private void displayRandomFunnyThing() {\r\n      // assumes you have a java.util.Random instance vairable named mRandom\r\n      FunnyThing ft = mFunnyThings.get( mRandom.nextInt( mFunnyThings.size());\r\n      displayAnswer( ft.phrase );\r\n      displayImage( ft.drawableResourceId);\r\n    }\r\n\r\nOf course you&#39;ll need to add an `onClickListener` to your button, but I&#39;m assuming that you left that code out for brevity.\r\n\r\nYou&#39;ll also have the problem that the phrase selection is random, so you may get the same phrase many times before you see all of them.  If you want to prevent duplicates, well, that will take more code.","title":"Android: Making a Button Display Silly Text","body":"<p>I think that you're on the right track thinking about using a data structure like an <code>ArrayList</code>.</p>\n\n<p>I'd start by making a class to represent each funny thing, e.g. </p>\n\n<pre><code>public class FunnyThing {\n  private String phrase; // I'd use a resource ID here\n  private int drawableResourceId;\n}\n</code></pre>\n\n<p>Then it's a matter of initializing the set of <code>FunnyThing</code> objects and storing them in your data structure.  You could do this in the <code>onCreate</code> method of your activity, but you may want to consider writing a factory method somewhere else (e.g. the <code>FunnyThing</code> class) that your activity just calls to keep the code from getting cluttered when there are more than 2-3 funny things.</p>\n\n<p>Finally, on each button press you can choose a random index in your collection of <code>FunnyThing</code>s and display that, e.g. </p>\n\n<pre><code>private void displayRandomFunnyThing() {\n  // assumes you have a java.util.Random instance vairable named mRandom\n  FunnyThing ft = mFunnyThings.get( mRandom.nextInt( mFunnyThings.size());\n  displayAnswer( ft.phrase );\n  displayImage( ft.drawableResourceId);\n}\n</code></pre>\n\n<p>Of course you'll need to add an <code>onClickListener</code> to your button, but I'm assuming that you left that code out for brevity.</p>\n\n<p>You'll also have the problem that the phrase selection is random, so you may get the same phrase many times before you see all of them.  If you want to prevent duplicates, well, that will take more code.</p>\n"}],"owner":{"account_id":6484194,"reputation":21,"user_id":5020301,"display_name":"Deborah Hearne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683227699,"creation_date":1439240578,"question_id":31929118,"body_markdown":"I am creating an app in Android where I have a button that displays silly phrases when pressed.\r\n\r\nI figured out how to get it to say two phrases but I can&#39;t figure out how to make it do more.\r\n\r\nI also want to add in a feature to have the button pick phrases at random instead of going in the order I set.\r\n\r\nI am thinking of using an array list for this.\r\n\r\nHow do I set the button to cycle through different methods in Android Studio?  \r\n\r\nI also want you to know that I am a beginner so please don&#39;t be too hard on me.\r\n\r\nThis is my XML:\r\n\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\r\n        android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;ImageView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/funny_imageview&quot;\r\n            android:scaleType=&quot;fitCenter&quot; /&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/funny_textview&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:text=&quot;&quot;/&gt;\r\n        &lt;Button\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/funny_sayings_button&quot;\r\n            android:text=&quot;Click Me!&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:onClick=&quot;changeFunnySayingsButton&quot;/&gt;\r\n    &lt;/LinearLayout&gt; \r\n\r\nThis is my Java:\r\n\r\n    package com.example.android.funnysayingsbutton;\r\n    \r\n    import android.os.Bundle;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.view.View;\r\n    import android.widget.ImageView;\r\n    import android.widget.TextView;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    boolean clicked = false;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n        }\r\n    \r\n        /**\r\n         * This method changes the funny text and image on the screen when the button is clicked.\r\n         */\r\n        public void changeFunnySayingsButton (View view){\r\n            if (clicked){\r\n                funnySayingOne();\r\n                clicked = false;\r\n            }\r\n            else {\r\n                funnySayingTwo();\r\n                clicked = true;\r\n            }\r\n    \r\n        }\r\n    \r\n        /**\r\n         * This method is for the first funny expression.\r\n         */\r\n        public void funnySayingOne(){\r\n            displayAnswer(&quot;Time to Monkey Around&quot;);\r\n            displayImage(R.drawable.monkey);\r\n        }\r\n        /**\r\n         * This method is for the second funny expression.\r\n         */\r\n        public void funnySayingTwo(){\r\n            displayAnswer(&quot;Penguin Party Time&quot;);\r\n            displayImage(R.drawable.penguin);\r\n        }\r\n    \r\n        /**\r\n         * This method is for the third funny expression.\r\n         */\r\n        public void funnySayingThree(){\r\n            displayAnswer(&quot;It&#39;s Rabbit Season.&quot;);\r\n            displayImage(R.drawable.rabbit);\r\n        }\r\n    \r\n        /**\r\n         * This method displays the funny text on the screen.\r\n         */\r\n        private void displayAnswer(String answer) {\r\n            TextView questionTextView = (TextView)    findViewById(R.id.funny_textview);\r\n            questionTextView.setText(answer);\r\n        }\r\n    \r\n        /**\r\n         * This method displays the funny image on the screen.\r\n         */\r\n        private void displayImage(int picture) {\r\n            ImageView questionTextView = (ImageView)    findViewById(R.id.funny_imageview);\r\n            questionTextView.setImageResource(picture);\r\n        }\r\n    \r\n    \r\n    }\r\n\r\n   ","title":"Android: Making a Button Display Silly Text","body":"<p>I am creating an app in Android where I have a button that displays silly phrases when pressed.</p>\n<p>I figured out how to get it to say two phrases but I can't figure out how to make it do more.</p>\n<p>I also want to add in a feature to have the button pick phrases at random instead of going in the order I set.</p>\n<p>I am thinking of using an array list for this.</p>\n<p>How do I set the button to cycle through different methods in Android Studio?</p>\n<p>I also want you to know that I am a beginner so please don't be too hard on me.</p>\n<p>This is my XML:</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\n    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\n    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\n    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;ImageView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/funny_imageview&quot;\n        android:scaleType=&quot;fitCenter&quot; /&gt;\n    &lt;TextView\n        android:id=&quot;@+id/funny_textview&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        android:text=&quot;&quot;/&gt;\n    &lt;Button\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/funny_sayings_button&quot;\n        android:text=&quot;Click Me!&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        android:onClick=&quot;changeFunnySayingsButton&quot;/&gt;\n&lt;/LinearLayout&gt; \n</code></pre>\n<p>This is my Java:</p>\n<pre><code>package com.example.android.funnysayingsbutton;\n\nimport android.os.Bundle;\nimport android.support.v7.app.AppCompatActivity;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.TextView;\n\npublic class MainActivity extends AppCompatActivity {\nboolean clicked = false;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    /**\n     * This method changes the funny text and image on the screen when the button is clicked.\n     */\n    public void changeFunnySayingsButton (View view){\n        if (clicked){\n            funnySayingOne();\n            clicked = false;\n        }\n        else {\n            funnySayingTwo();\n            clicked = true;\n        }\n\n    }\n\n    /**\n     * This method is for the first funny expression.\n     */\n    public void funnySayingOne(){\n        displayAnswer(&quot;Time to Monkey Around&quot;);\n        displayImage(R.drawable.monkey);\n    }\n    /**\n     * This method is for the second funny expression.\n     */\n    public void funnySayingTwo(){\n        displayAnswer(&quot;Penguin Party Time&quot;);\n        displayImage(R.drawable.penguin);\n    }\n\n    /**\n     * This method is for the third funny expression.\n     */\n    public void funnySayingThree(){\n        displayAnswer(&quot;It's Rabbit Season.&quot;);\n        displayImage(R.drawable.rabbit);\n    }\n\n    /**\n     * This method displays the funny text on the screen.\n     */\n    private void displayAnswer(String answer) {\n        TextView questionTextView = (TextView)    findViewById(R.id.funny_textview);\n        questionTextView.setText(answer);\n    }\n\n    /**\n     * This method displays the funny image on the screen.\n     */\n    private void displayImage(int picture) {\n        ImageView questionTextView = (ImageView)    findViewById(R.id.funny_imageview);\n        questionTextView.setImageResource(picture);\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":2,"creation_date":1683226394,"post_id":76176475,"comment_id":134338359,"body_markdown":"I&#39;m having trouble understanding how you expect to continue performing reads during your upgrade, either.  One would ordinarily take the whole application down during such a maintenance operation.","body":"I&#39;m having trouble understanding how you expect to continue performing reads during your upgrade, either.  One would ordinarily take the whole application down during such a maintenance operation."},{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":1,"creation_date":1683226424,"post_id":76176475,"comment_id":134338365,"body_markdown":"It&#39;s not easy to do with JPA, but you can change the database user&#39;s grant to insert, update and delete rows. If you are using JDBC, most database also accept a readonly parameter to prevent alterations.","body":"It&#39;s not easy to do with JPA, but you can change the database user&#39;s grant to insert, update and delete rows. If you are using JDBC, most database also accept a readonly parameter to prevent alterations."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1683226878,"post_id":76176475,"comment_id":134338465,"body_markdown":"You could also revoke data modification privileges from the user the application authenticates with. However changing the application to not go wild when intended db modifications are requested is the bigger task.","body":"You could also revoke data modification privileges from the user the application authenticates with. However changing the application to not go wild when intended db modifications are requested is the bigger task."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1683228060,"post_id":76176475,"comment_id":134338754,"body_markdown":"https://github.com/alexandre-touret/maintenance-mode   `I_AM_A_TEAPOT` LOL","body":"<a href=\"https://github.com/alexandre-touret/maintenance-mode\" rel=\"nofollow noreferrer\">github.com/alexandre-touret/maintenance-mode</a>   <code>I_AM_A_TEAPOT</code> LOL"},{"owner":{"account_id":4849802,"reputation":1540,"user_id":3912417,"accept_rate":89,"display_name":"joshuatvernon"},"score":0,"creation_date":1683230259,"post_id":76176475,"comment_id":134339163,"body_markdown":"@JohnBollinger I think I was thinking I could use read replicas to keep allowing reads whilst preventing writes","body":"@JohnBollinger I think I was thinking I could use read replicas to keep allowing reads whilst preventing writes"}],"answers":[{"tags":[],"owner":{"account_id":5934812,"reputation":132,"user_id":4668201,"display_name":"L&#233;o"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683227498,"creation_date":1683227498,"answer_id":76176657,"question_id":76176475,"body_markdown":"Not on the application side, but on the database side, you can put a lock on your databases so that the current operations end, but there are no new operations.\r\nhttps://docs.postgresql.fr/15/sql-lock.html\r\n\r\nTo automate this, you can look at the pg_catalog to list the tables to lock","title":"How to prevent JPA saves during database upgrade?","body":"<p>Not on the application side, but on the database side, you can put a lock on your databases so that the current operations end, but there are no new operations.\n<a href=\"https://docs.postgresql.fr/15/sql-lock.html\" rel=\"nofollow noreferrer\">https://docs.postgresql.fr/15/sql-lock.html</a></p>\n<p>To automate this, you can look at the pg_catalog to list the tables to lock</p>\n"}],"owner":{"account_id":4849802,"reputation":1540,"user_id":3912417,"accept_rate":89,"display_name":"joshuatvernon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683227498,"creation_date":1683226202,"question_id":76176475,"body_markdown":"I would like to upgrade my database. It will cause downtime. So I would like to disable JPA saves temporarily using a feature flag. How can I enforce prevention of saves e.g. throw DataIntegrityViolationException whenever code makes it to a save.","title":"How to prevent JPA saves during database upgrade?","body":"<p>I would like to upgrade my database. It will cause downtime. So I would like to disable JPA saves temporarily using a feature flag. How can I enforce prevention of saves e.g. throw DataIntegrityViolationException whenever code makes it to a save.</p>\n"},{"tags":["java","spring","tomcat","catalina","zkteco"],"answers":[{"tags":[],"owner":{"account_id":673865,"reputation":5306,"user_id":889053,"accept_rate":38,"display_name":"Christian Bongiorno"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683227283,"creation_date":1683227283,"answer_id":76176634,"question_id":76176548,"body_markdown":"It&#39;s pretty clear: You don&#39;t have that property defined in any of the typical ways/locations that spring looks. If you were using spring boot, you could put it right on the cli (and, I&#39;d suggest that instead of using tomcat like this).   \r\n\r\nThe simplest way to solve this is to make sure that in the `resources/` directory of your project that gets bundled up into you WAR, you include `application.properties` with this value set:\r\n\r\n```\r\ndatasource.driverClassName=org.mysql.Driver\r\n```\r\n\r\nOr whatever DB you&#39;re using. You also obviously need to make sure you include the dependency for that driver in your project so when the war is build, it&#39;s included\r\n\r\nIf you&#39;ve done this correctly, when you actually deploy you&#39;ll notice that in your `WEBAPPS/${YOUR_APP}` you&#39;ll see the `application.properties` file in the root along with your class files.\r\n\r\nThis should do the trick","title":"Tomcat/Spring webapp running on Windows 10 is unable to start","body":"<p>It's pretty clear: You don't have that property defined in any of the typical ways/locations that spring looks. If you were using spring boot, you could put it right on the cli (and, I'd suggest that instead of using tomcat like this).</p>\n<p>The simplest way to solve this is to make sure that in the <code>resources/</code> directory of your project that gets bundled up into you WAR, you include <code>application.properties</code> with this value set:</p>\n<pre><code>datasource.driverClassName=org.mysql.Driver\n</code></pre>\n<p>Or whatever DB you're using. You also obviously need to make sure you include the dependency for that driver in your project so when the war is build, it's included</p>\n<p>If you've done this correctly, when you actually deploy you'll notice that in your <code>WEBAPPS/${YOUR_APP}</code> you'll see the <code>application.properties</code> file in the root along with your class files.</p>\n<p>This should do the trick</p>\n"}],"owner":{"account_id":28507428,"reputation":11,"user_id":21817903,"display_name":"Chu N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683227283,"creation_date":1683226652,"question_id":76176548,"body_markdown":"ZKTeco BioSecurity (Access Control web based application) running on `java/Tomcat/Spring` is unable to launch.\r\n\r\n$PATH = C:\\Program Files\\BioSecurity\\MainResource\\\r\n\r\nFrom the log files located at `$PATH/tomcat/logs/`, I see the following error:\r\n`org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name &#39;dataSource&#39; defined in class path resource [applicationContext.xml]: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;`\r\n\r\nHowever, I&#39;m a noob at java/Tomcat/Spring and I can&#39;t seem to find the &quot;applicationContext.xml&quot; file in question.\r\nI see &quot;applicationcontext.xml&quot; mentioned in the webapps web.xml file.\r\n\r\n```\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.util.IntrospectorCleanupListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\t&lt;context-param&gt;\r\n\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n\t\t&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\r\n\t&lt;/context-param&gt;\r\n```\r\n\r\n\r\nPlease see the logs below:\r\n\r\n- /tomcat/logs/localhost.2023-05-04.log\r\n  \r\n```\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: No Spring WebApplicationInitializer types detected on classpath\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: excute WebFilterInitializer...\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init shiroFilter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init langSessionFilter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init OAuth2Filter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init OAuth2Filter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init CheckFilter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: Initializing Spring root WebApplicationContext\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext listenerStart\r\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name &#39;dataSource&#39; defined in class path resource [applicationContext.xml]: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;\r\n\tat org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:211)\r\n\tat org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:223)\r\n\tat com.zk.common.util.PropertiesUtil.processProperties(PropertiesUtil.java:88)\r\n\tat org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:86)\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:162)\r\n\tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:611)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\r\n\tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\r\n\tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\r\n\tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\r\n\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1017)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:993)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652)\r\n\tat org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1296)\r\n\tat org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:2039)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:744)\r\nCaused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;\r\n\tat org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:174)\r\n\tat org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126)\r\n\tat org.springframework.beans.factory.config.PropertyPlaceholderConfigurer$PlaceholderResolvingStringValueResolver.resolveStringValue(PropertyPlaceholderConfigurer.java:259)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveStringValue(BeanDefinitionVisitor.java:282)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveValue(BeanDefinitionVisitor.java:204)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.visitPropertyValues(BeanDefinitionVisitor.java:141)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.visitBeanDefinition(BeanDefinitionVisitor.java:82)\r\n\tat org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:208)\r\n\t... 23 more\r\n\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: Closing Spring root WebApplicationContext\r\n```\r\n\r\n- /tomcat/logs/commons-daemon.2023-05-04.log\r\n  \r\n```\r\n[2023-05-04 12:42:05] [info]  [ 6748] Stopping service...\r\n[2023-05-04 12:42:06] [info]  [ 6748] Service stop thread completed.\r\n[2023-05-04 12:42:07] [info]  [ 6008] Run service finished.\r\n[2023-05-04 12:42:07] [info]  [ 6008] Commons Daemon procrun finished\r\n[2023-05-04 12:45:57] [info]  [ 6688] Commons Daemon procrun (1.0.15.0 32-bit) started\r\n[2023-05-04 12:45:57] [info]  [ 6688] Running &#39;BioSecurityTomcat&#39; Service...\r\n[2023-05-04 12:45:57] [info]  [ 2860] Starting service...\r\n[2023-05-04 12:45:58] [info]  [ 2860] Service started in 1356 ms.\r\n```\r\n\r\n- /tomcat/logs/biosecuritytomcat-stderr.2023-05-04.log\r\n  \r\n```\r\n2023-05-04 12:45:57 Commons Daemon procrun stderr initialized\r\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\nINFO: Loaded APR based Apache Tomcat Native library 1.2.16 using APR version 1.6.3.\r\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\r\nINFO: OpenSSL successfully initialized (OpenSSL 1.0.2m  2 Nov 2017)\r\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\r\nINFO: Initializing ProtocolHandler [&quot;http-apr-8088&quot;]\r\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\r\nINFO: Initializing ProtocolHandler [&quot;ajp-apr-8019&quot;]\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.Catalina load\r\nINFO: Initialization processed in 1952 ms\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardService startInternal\r\nINFO: Starting service Catalina\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardEngine startInternal\r\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.88\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.HostConfig deployDirectory\r\nINFO: Deploying web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TaglibUriRule body\r\nINFO: TLD skipped. URI: urn:com:sun:jersey:api:view is already defined\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TldConfig execute\r\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\r\nSEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\r\nSEVERE: Context [] startup failed due to previous errors\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-2] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-3] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-4] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-5] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-6] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-7] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-8] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-9] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-10] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_QuartzSchedulerThread] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.HostConfig deployDirectory\r\nINFO: Deployment of web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT has finished in 30,018 ms\r\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [&quot;http-apr-8088&quot;]\r\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [&quot;ajp-apr-8019&quot;]\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.Catalina start\r\nINFO: Server startup in 30121 ms\r\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\r\nWARNING: Character [[] is not allowed and will continue to be rejected.\r\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\r\nWARNING: Character []] is not allowed and will continue to be rejected.\r\n```\r\n\r\n- /tomcat/logs/biosecuritytomcat-stdout.2023-05-04.log \r\nLeaving out the contents of this log file as it&#39;s chatty. If required please let me know and I&#39;ll post it.\r\n\r\n\r\nI tried restarting the application and capturing the logs. After that, I couldn&#39;t figure out how to resolve it.","title":"Tomcat/Spring webapp running on Windows 10 is unable to start","body":"<p>ZKTeco BioSecurity (Access Control web based application) running on <code>java/Tomcat/Spring</code> is unable to launch.</p>\n<p>$PATH = C:\\Program Files\\BioSecurity\\MainResource\\</p>\n<p>From the log files located at <code>$PATH/tomcat/logs/</code>, I see the following error:\n<code>org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [applicationContext.xml]: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;</code></p>\n<p>However, I'm a noob at java/Tomcat/Spring and I can't seem to find the &quot;applicationContext.xml&quot; file in question.\nI see &quot;applicationcontext.xml&quot; mentioned in the webapps web.xml file.</p>\n<pre><code>    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.util.IntrospectorCleanupListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n</code></pre>\n<p>Please see the logs below:</p>\n<ul>\n<li>/tomcat/logs/localhost.2023-05-04.log</li>\n</ul>\n<pre><code>May 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\nINFO: No Spring WebApplicationInitializer types detected on classpath\nMay 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\nINFO: excute WebFilterInitializer...\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init shiroFilter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init langSessionFilter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init OAuth2Filter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init OAuth2Filter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init CheckFilter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: Initializing Spring root WebApplicationContext\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [applicationContext.xml]: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;\n    at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:211)\n    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:223)\n    at com.zk.common.util.PropertiesUtil.processProperties(PropertiesUtil.java:88)\n    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:86)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:162)\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:611)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1017)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:993)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652)\n    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1296)\n    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:2039)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;\n    at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:174)\n    at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126)\n    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer$PlaceholderResolvingStringValueResolver.resolveStringValue(PropertyPlaceholderConfigurer.java:259)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveStringValue(BeanDefinitionVisitor.java:282)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveValue(BeanDefinitionVisitor.java:204)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.visitPropertyValues(BeanDefinitionVisitor.java:141)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.visitBeanDefinition(BeanDefinitionVisitor.java:82)\n    at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:208)\n    ... 23 more\n\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.ApplicationContext log\nINFO: Closing Spring root WebApplicationContext\n</code></pre>\n<ul>\n<li>/tomcat/logs/commons-daemon.2023-05-04.log</li>\n</ul>\n<pre><code>[2023-05-04 12:42:05] [info]  [ 6748] Stopping service...\n[2023-05-04 12:42:06] [info]  [ 6748] Service stop thread completed.\n[2023-05-04 12:42:07] [info]  [ 6008] Run service finished.\n[2023-05-04 12:42:07] [info]  [ 6008] Commons Daemon procrun finished\n[2023-05-04 12:45:57] [info]  [ 6688] Commons Daemon procrun (1.0.15.0 32-bit) started\n[2023-05-04 12:45:57] [info]  [ 6688] Running 'BioSecurityTomcat' Service...\n[2023-05-04 12:45:57] [info]  [ 2860] Starting service...\n[2023-05-04 12:45:58] [info]  [ 2860] Service started in 1356 ms.\n</code></pre>\n<ul>\n<li>/tomcat/logs/biosecuritytomcat-stderr.2023-05-04.log</li>\n</ul>\n<pre><code>2023-05-04 12:45:57 Commons Daemon procrun stderr initialized\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: Loaded APR based Apache Tomcat Native library 1.2.16 using APR version 1.6.3.\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\nINFO: OpenSSL successfully initialized (OpenSSL 1.0.2m  2 Nov 2017)\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;http-apr-8088&quot;]\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;ajp-apr-8019&quot;]\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 1952 ms\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service Catalina\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.88\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: urn:com:sun:jersey:api:view is already defined\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TldConfig execute\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: Context [] startup failed due to previous errors\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-2] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-3] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-4] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-5] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-6] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-7] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-8] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-9] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-10] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_QuartzSchedulerThread] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deployment of web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT has finished in 30,018 ms\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;http-apr-8088&quot;]\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;ajp-apr-8019&quot;]\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 30121 ms\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\nWARNING: Character [[] is not allowed and will continue to be rejected.\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\nWARNING: Character []] is not allowed and will continue to be rejected.\n</code></pre>\n<ul>\n<li>/tomcat/logs/biosecuritytomcat-stdout.2023-05-04.log\nLeaving out the contents of this log file as it's chatty. If required please let me know and I'll post it.</li>\n</ul>\n<p>I tried restarting the application and capturing the logs. After that, I couldn't figure out how to resolve it.</p>\n"},{"tags":["java","c#","ikvm"],"comments":[{"owner":{"account_id":1036128,"reputation":16307,"user_id":1043380,"accept_rate":80,"display_name":"gunr2171"},"score":2,"creation_date":1683218695,"post_id":76175502,"comment_id":134336690,"body_markdown":"Take a moment to read through the [editing help](/editing-help) in the help center. Formatting on Stack Overflow is different than on other sites. The better your post looks, the easier it is for others to read and understand it.","body":"Take a moment to read through the <a href=\"/editing-help\">editing help</a> in the help center. Formatting on Stack Overflow is different than on other sites. The better your post looks, the easier it is for others to read and understand it."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1683220381,"post_id":76175502,"comment_id":134337083,"body_markdown":"ikvm-7.2.4630.5 and JavaSE-1.7 are old versions, released more than 10 years ago. Is there any particular reason to use them instead of current versions? They are probably full of security vulnerabilities at this time.","body":"ikvm-7.2.4630.5 and JavaSE-1.7 are old versions, released more than 10 years ago. Is there any particular reason to use them instead of current versions? They are probably full of security vulnerabilities at this time."},{"owner":{"account_id":28498287,"reputation":1,"user_id":21809854,"display_name":"Jannat"},"score":1,"creation_date":1683222112,"post_id":76175502,"comment_id":134337459,"body_markdown":"I was directed to this version ikvm-7.2.4630.5 just by searching for solution. Most of the postings are old and I ended up to this old version. I will try the latest versions.","body":"I was directed to this version ikvm-7.2.4630.5 just by searching for solution. Most of the postings are old and I ended up to this old version. I will try the latest versions."}],"owner":{"account_id":28498287,"reputation":1,"user_id":21809854,"display_name":"Jannat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683227103,"creation_date":1683218487,"question_id":76175502,"body_markdown":"I need to use a java jar file in my c# (VS 2019) console application. OS is Windows 10.   \r\nI use **ikvm-7.2.4630.5** and the **dll** file is generated without error. I added reference to  **dll** and **KVM.Open.JDK.Core.dll** ,in **C#** application.  \r\nThe issue happens when using  “**using** ” keyword to import the package. I get the error &quot;*Type or namespace name cannot be found*&quot;.\r\n\r\nI did the following steps:\r\n\r\n1)I wrote a test code to see if I can make it work.\r\n\r\nSimple java class file:\r\n\r\n    package Msg;\r\n    \r\n    public class MyMessage {\r\n  \r\n        public static void WelcomMsg(String msg) {\r\n            System.out.println(&quot;Welcom &quot; + msg);\r\n        }\r\n    \r\n        public static void GoodByMsg(String msg) {\r\n        \tSystem.out.println(&quot;Good Bye &quot; + msg);\r\n        }\r\n    \r\n    }\r\n\r\n2)The jar (msg.jar) file created in JavaSE-1.7 environment (using eclipse )\r\n\r\n3)I can run either of these commands without error to generate dll (in `folder ikvm-7.2.4630.5\\\\bin`):\r\n\r\n    ikvmc -target:library -out:msg.dll -recurse:”./\\*.jar\r\n\r\nor\r\n\r\n    ikvmc -target:library msg.jar\r\n\r\n\\--message after dll is generated ---------------  \r\nIKVM.NET Compiler version 7.2.4630.5  \r\nCopyright (C) 2002-2012 Jeroen Frijters  \r\nhttp://www.ikvm.net/\r\n\r\nmsg.dll is generated.\r\n\r\n4)Added reference to **msg.dll** and **IKVM.Open.JDK.Core.dll** in C# console project (VS 2019).\r\n\r\n5)&quot;using&quot; directive (using Msg;) generating error: **Type or namespace name cannot be found**\r\n\r\nBasically the dll file seems empty.  \r\nAny help will be appreciated. \r\n\r\nthanks\r\n","title":"Why the DLL generated from Java jar file doesn&#39;t show namespace","body":"<p>I need to use a java jar file in my c# (VS 2019) console application. OS is Windows 10.<br />\nI use <strong>ikvm-7.2.4630.5</strong> and the <strong>dll</strong> file is generated without error. I added reference to  <strong>dll</strong> and <strong>KVM.Open.JDK.Core.dll</strong> ,in <strong>C#</strong> application.<br />\nThe issue happens when using  “<strong>using</strong> ” keyword to import the package. I get the error &quot;<em>Type or namespace name cannot be found</em>&quot;.</p>\n<p>I did the following steps:</p>\n<p>1)I wrote a test code to see if I can make it work.</p>\n<p>Simple java class file:</p>\n<pre><code>package Msg;\n\npublic class MyMessage {\n\n    public static void WelcomMsg(String msg) {\n        System.out.println(&quot;Welcom &quot; + msg);\n    }\n\n    public static void GoodByMsg(String msg) {\n        System.out.println(&quot;Good Bye &quot; + msg);\n    }\n\n}\n</code></pre>\n<p>2)The jar (msg.jar) file created in JavaSE-1.7 environment (using eclipse )</p>\n<p>3)I can run either of these commands without error to generate dll (in <code>folder ikvm-7.2.4630.5\\\\bin</code>):</p>\n<pre><code>ikvmc -target:library -out:msg.dll -recurse:”./\\*.jar\n</code></pre>\n<p>or</p>\n<pre><code>ikvmc -target:library msg.jar\n</code></pre>\n<p>--message after dll is generated ---------------<br />\nIKVM.NET Compiler version 7.2.4630.5<br />\nCopyright (C) 2002-2012 Jeroen Frijters<br />\n<a href=\"http://www.ikvm.net/\" rel=\"nofollow noreferrer\">http://www.ikvm.net/</a></p>\n<p>msg.dll is generated.</p>\n<p>4)Added reference to <strong>msg.dll</strong> and <strong>IKVM.Open.JDK.Core.dll</strong> in C# console project (VS 2019).</p>\n<p>5)&quot;using&quot; directive (using Msg;) generating error: <strong>Type or namespace name cannot be found</strong></p>\n<p>Basically the dll file seems empty.<br />\nAny help will be appreciated.</p>\n<p>thanks</p>\n"},{"tags":["java","android","sqlite"],"answers":[{"tags":[],"owner":{"account_id":7162415,"reputation":121,"user_id":5472740,"display_name":"Youssef Wagih"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681996120,"creation_date":1681996120,"answer_id":76064442,"question_id":76059362,"body_markdown":"First, you need to fix the URL of database\r\n\r\n    this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\r\n\r\nto be like below\r\n\r\n    this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3/&quot; + &quot;databases/&quot;\r\n\r\nSecond, you forgot to add the command to create the table itself first **Dictionary** so you need to add on the **void onCreate(SQLiteDatabase sqLiteDatabase)**  the below creation sql command for the table \r\n\r\n        sqLiteDatabase.execSQL(&quot;CREATE TABLE &quot; + tableName + &quot; (&quot;\r\n                + ArabicCol +&quot; TEXT not null);&quot;);","title":"No Such Table Fatal Exception: SQLite","body":"<p>First, you need to fix the URL of database</p>\n<pre><code>this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\n</code></pre>\n<p>to be like below</p>\n<pre><code>this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3/&quot; + &quot;databases/&quot;\n</code></pre>\n<p>Second, you forgot to add the command to create the table itself first <strong>Dictionary</strong> so you need to add on the <strong>void onCreate(SQLiteDatabase sqLiteDatabase)</strong>  the below creation sql command for the table</p>\n<pre><code>    sqLiteDatabase.execSQL(&quot;CREATE TABLE &quot; + tableName + &quot; (&quot;\n            + ArabicCol +&quot; TEXT not null);&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5849714,"reputation":86,"user_id":5362509,"display_name":"Lakshmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683226859,"creation_date":1683226439,"answer_id":76176512,"question_id":76059362,"body_markdown":"Before finding out where the problem is, one mistake you have done. Pls correct it.\r\n\r\nThe path of the database folder is wrong. \r\n\r\n    this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;; \r\n \r\nshould be changed to\r\n\r\n    this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;/databases&quot;;\r\n\r\nAnd I am assuming that you have the file &#39;sample.db&#39; in your resources/assets. Can you cross check if you have it?","title":"No Such Table Fatal Exception: SQLite","body":"<p>Before finding out where the problem is, one mistake you have done. Pls correct it.</p>\n<p>The path of the database folder is wrong.</p>\n<pre><code>this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;; \n</code></pre>\n<p>should be changed to</p>\n<pre><code>this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;/databases&quot;;\n</code></pre>\n<p>And I am assuming that you have the file 'sample.db' in your resources/assets. Can you cross check if you have it?</p>\n"}],"owner":{"account_id":28354311,"reputation":1,"user_id":21685296,"display_name":"new S_N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683226859,"creation_date":1681944643,"question_id":76059362,"body_markdown":"I am beginner in Android. I am making a database through SQLite. I created the Arabic database file and put it in assets folder with the name `sample.db`. Now I am trying to read the database from the assets folder but I&#39;m getting an error and app is crushing. What&#39;s the best way to do this? Any help would be appreciated.\r\n\r\nthis is the code in DbHelper.java\r\n\r\n```\r\npackage ...\r\nimport ...\r\n\r\npublic class DbHelper extends SQLiteOpenHelper {\r\n    String dbName;\r\n    Context context;\r\n    String dbPath;\r\n\r\n    String tableName = &quot;Dictionary&quot;;\r\n    String ArabicCol = &quot;Arabic&quot;;\r\n\r\n    public DbHelper(MainActivity mcontext, String name, int version) {\r\n        super(mcontext, name, null, version);\r\n\r\n\r\n        this.context = mcontext;\r\n        this.dbName = name;\r\n        this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\r\n    }\r\n    @Override\r\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n        if(newVersion&gt;oldVersion)\r\n            CopyDatabase();\r\n    }\r\n    public void CheckDb(){\r\n    SQLiteDatabase CheckDb =  null;\r\n            try {\r\n                String filePath = dbPath + dbName;\r\n\r\n                CheckDb = SQLiteDatabase.openDatabase(filePath, null, 0);\r\n            }catch (Exception e) {\r\n            }\r\n\r\n            if (CheckDb != null) {\r\n                Log.d(&quot;CheckDb&quot;, &quot;Database already exists&quot;);\r\n                CheckDb.close();\r\n            } else {\r\n                CopyDatabase();\r\n            }\r\n        }\r\n        public void CopyDatabase() {\r\n            this.getReadableDatabase();\r\n            try{\r\n                InputStream is = context.getAssets().open(dbName);\r\n                OutputStream os = new FileOutputStream(dbPath + dbName);\r\n\r\n                byte[] buffer = new byte[1024];\r\n\r\n                int len;\r\n                while((len = is.read(buffer))&gt;0){\r\n                    os.write(buffer,0,len);\r\n                }\r\n                os.flush();\r\n                is.close();\r\n                os.close();\r\n            }catch (Exception e) {e.printStackTrace();}\r\n            Log.d(&quot;CopyDb&quot;, &quot;Database Copied&quot;);\r\n        }\r\n        public void OpenDatabase(){\r\n            String filepath = dbPath + dbName;\r\n            SQLiteDatabase.openDatabase(filepath,null,0);\r\n        }\r\n        public ArrayList&lt;String&gt; getArabicWord(String query){\r\n        ArrayList&lt;String&gt; arabicList = new ArrayList&lt;&gt;();\r\n\r\n        SQLiteDatabase sqLiteDatabase = this.getReadableDatabase();\r\n\r\n            Cursor cursor;\r\n            cursor = sqLiteDatabase.query(\r\n                    tableName,\r\n                    new String[]{ArabicCol},\r\n                    ArabicCol + &quot; LIKE ? &quot;,\r\n                    new String[]{query + &quot;%&quot;},\r\n                    null, null,\r\n                    ArabicCol\r\n            );\r\n            int index = cursor.getColumnIndex(ArabicCol);\r\n            while (cursor.moveToNext()){\r\n                arabicList.add(cursor.getString(index));\r\n            }\r\n\r\n            sqLiteDatabase.close();\r\n            cursor.close();\r\n            return arabicList;\r\n        }\r\n}\r\n```\r\n\r\nMainActivity.java\r\n\r\n\r\n```\r\npackage ...\r\nimport ...\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    AutoCompleteTextView autoCompleteTextView;\r\n    DbHelper dbHelper;\r\n\r\n    ArrayList&lt;String&gt; newList;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        autoCompleteTextView = findViewById(R.id.autotxt);\r\n        dbHelper = new DbHelper(this,&quot;sample.db&quot;,1);\r\n        try{\r\n           dbHelper.CheckDb();\r\n           dbHelper.OpenDatabase();\r\n        }catch(Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        newList = new ArrayList&lt;&gt;();\r\n\r\n        autoCompleteTextView.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int i, int i1, int i2) {\r\n                if(s.length() &gt; 0 ){\r\n                    newList.addAll(dbHelper.getArabicWord(s.toString()));\r\n\r\n                    autoCompleteTextView.setAdapter(new ArrayAdapter&lt;&gt;(MainActivity.this, android.R.layout.simple_list_item_1, newList));\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\n```\r\n\r\nthis is part of my logcat\r\n\r\n\r\n\r\n```\r\n(1) no such table: Dictionary in &quot;SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic&quot;\r\n2023-04-20 03:27:40.261 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     D  Shutting down VM\r\n2023-04-20 03:27:40.264 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     E  FATAL EXCEPTION: main\r\n                                                                                                    Process: com.example.e_qtishaddictionary3, PID: 17406\r\n                                                                                                    android.database.sqlite.SQLiteException: no such table: Dictionary (code 1 SQLITE_ERROR[1]): , while compiling: SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic\r\n                                                                                                    \tat \r\n```\r\nand the line concerned\r\n\r\n```\r\nat com.example.e_qtishaddictionary3.DbHelper.getArabicWord(DbHelper.java:84)\r\n                                                                                                    \tat com.example.e_qtishaddictionary3.MainActivity$1.onTextChanged(MainActivity.java:44)\r\n```\r\n\r\n\r\n\r\nI&#39;ve read my code 2 days, but I can&#39;t figure out where I&#39;m wrong. Can you help me? Thanks before. ","title":"No Such Table Fatal Exception: SQLite","body":"<p>I am beginner in Android. I am making a database through SQLite. I created the Arabic database file and put it in assets folder with the name <code>sample.db</code>. Now I am trying to read the database from the assets folder but I'm getting an error and app is crushing. What's the best way to do this? Any help would be appreciated.</p>\n<p>this is the code in DbHelper.java</p>\n<pre><code>package ...\nimport ...\n\npublic class DbHelper extends SQLiteOpenHelper {\n    String dbName;\n    Context context;\n    String dbPath;\n\n    String tableName = &quot;Dictionary&quot;;\n    String ArabicCol = &quot;Arabic&quot;;\n\n    public DbHelper(MainActivity mcontext, String name, int version) {\n        super(mcontext, name, null, version);\n\n\n        this.context = mcontext;\n        this.dbName = name;\n        this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\n    }\n    @Override\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\n\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        if(newVersion&gt;oldVersion)\n            CopyDatabase();\n    }\n    public void CheckDb(){\n    SQLiteDatabase CheckDb =  null;\n            try {\n                String filePath = dbPath + dbName;\n\n                CheckDb = SQLiteDatabase.openDatabase(filePath, null, 0);\n            }catch (Exception e) {\n            }\n\n            if (CheckDb != null) {\n                Log.d(&quot;CheckDb&quot;, &quot;Database already exists&quot;);\n                CheckDb.close();\n            } else {\n                CopyDatabase();\n            }\n        }\n        public void CopyDatabase() {\n            this.getReadableDatabase();\n            try{\n                InputStream is = context.getAssets().open(dbName);\n                OutputStream os = new FileOutputStream(dbPath + dbName);\n\n                byte[] buffer = new byte[1024];\n\n                int len;\n                while((len = is.read(buffer))&gt;0){\n                    os.write(buffer,0,len);\n                }\n                os.flush();\n                is.close();\n                os.close();\n            }catch (Exception e) {e.printStackTrace();}\n            Log.d(&quot;CopyDb&quot;, &quot;Database Copied&quot;);\n        }\n        public void OpenDatabase(){\n            String filepath = dbPath + dbName;\n            SQLiteDatabase.openDatabase(filepath,null,0);\n        }\n        public ArrayList&lt;String&gt; getArabicWord(String query){\n        ArrayList&lt;String&gt; arabicList = new ArrayList&lt;&gt;();\n\n        SQLiteDatabase sqLiteDatabase = this.getReadableDatabase();\n\n            Cursor cursor;\n            cursor = sqLiteDatabase.query(\n                    tableName,\n                    new String[]{ArabicCol},\n                    ArabicCol + &quot; LIKE ? &quot;,\n                    new String[]{query + &quot;%&quot;},\n                    null, null,\n                    ArabicCol\n            );\n            int index = cursor.getColumnIndex(ArabicCol);\n            while (cursor.moveToNext()){\n                arabicList.add(cursor.getString(index));\n            }\n\n            sqLiteDatabase.close();\n            cursor.close();\n            return arabicList;\n        }\n}\n</code></pre>\n<p>MainActivity.java</p>\n<pre><code>package ...\nimport ...\n\npublic class MainActivity extends AppCompatActivity {\n    AutoCompleteTextView autoCompleteTextView;\n    DbHelper dbHelper;\n\n    ArrayList&lt;String&gt; newList;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        autoCompleteTextView = findViewById(R.id.autotxt);\n        dbHelper = new DbHelper(this,&quot;sample.db&quot;,1);\n        try{\n           dbHelper.CheckDb();\n           dbHelper.OpenDatabase();\n        }catch(Exception e) {\n            e.printStackTrace();\n        }\n\n        newList = new ArrayList&lt;&gt;();\n\n        autoCompleteTextView.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence s, int i, int i1, int i2) {\n\n            }\n\n            @Override\n            public void onTextChanged(CharSequence s, int i, int i1, int i2) {\n                if(s.length() &gt; 0 ){\n                    newList.addAll(dbHelper.getArabicWord(s.toString()));\n\n                    autoCompleteTextView.setAdapter(new ArrayAdapter&lt;&gt;(MainActivity.this, android.R.layout.simple_list_item_1, newList));\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable s) {\n\n            }\n        });\n\n    }\n}\n</code></pre>\n<p>this is part of my logcat</p>\n<pre><code>(1) no such table: Dictionary in &quot;SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic&quot;\n2023-04-20 03:27:40.261 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     D  Shutting down VM\n2023-04-20 03:27:40.264 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     E  FATAL EXCEPTION: main\n                                                                                                    Process: com.example.e_qtishaddictionary3, PID: 17406\n                                                                                                    android.database.sqlite.SQLiteException: no such table: Dictionary (code 1 SQLITE_ERROR[1]): , while compiling: SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic\n                                                                                                        at \n</code></pre>\n<p>and the line concerned</p>\n<pre><code>at com.example.e_qtishaddictionary3.DbHelper.getArabicWord(DbHelper.java:84)\n                                                                                                        at com.example.e_qtishaddictionary3.MainActivity$1.onTextChanged(MainActivity.java:44)\n</code></pre>\n<p>I've read my code 2 days, but I can't figure out where I'm wrong. Can you help me? Thanks before.</p>\n"},{"tags":["java","multithreading","invoke"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1683221396,"post_id":76175843,"comment_id":134337315,"body_markdown":"The issue is that there&#39;s no synchronization between loading the books and updating the UI.","body":"The issue is that there&#39;s no synchronization between loading the books and updating the UI."},{"owner":{"account_id":27086739,"reputation":67,"user_id":20635129,"display_name":"KazlLaur"},"score":0,"creation_date":1683221530,"post_id":76175843,"comment_id":134337344,"body_markdown":"How could I do that?","body":"How could I do that?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1683225445,"post_id":76175843,"comment_id":134338152,"body_markdown":"**Never** write an empty `catch` block.  At the very least, a catch block should contain `e.printStackTrace();`.  If something goes wrong, you do want to know what happened and where, right?","body":"<b>Never</b> write an empty <code>catch</code> block.  At the very least, a catch block should contain <code>e.printStackTrace();</code>.  If something goes wrong, you do want to know what happened and where, right?"}],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683225238,"creation_date":1683225238,"answer_id":76176375,"question_id":76175843,"body_markdown":"Suppose you are going to make a meal, but you&#39;ve come to a step where you need flour, and when you look in the pantry there is none. So, you ask your friend who was busy working in the garden to stop what they&#39;re doing and run out to buy some flour. Then, the very moment your friend steps out the door, you try to proceed with making the recipe, but What the ???? There&#39;s no flour! How can there be no flour when I just sent him out the door to get some?\r\n\r\nYou&#39;re going to have to wait for the flour.\r\n\r\nYour program is trying to do the same thing. It&#39;s trying to use the books when it&#39;s only just sent the `LoadBooks` thread out to fetch them. You&#39;re going to need some way for the LoadBooks thread to signal when the books have been loaded, and you need some way for the GUI thread to wait until the signal is delivered.\r\n\r\nA [`Semaphore`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html) would be good for that. The LoadBooks thread could call `semaphore.release()` to signal that the books have been loaded, and the GUI thread could call `semaphore.acquire()` to await the signal.\r\n\r\n-----------\r\n\r\nBut Wait!!\r\n\r\nIs there something else you could be doing in the kitchen while your friend is shopping for flour? If there is not—if you are not going to do anything at all except sit there and wait—then you might just as well have gone for the flour yourself and not interrupted your friend&#39;s work.\r\n\r\nThere is practically _never_ any reason for some thread A to give a task to some other thread B if thread A is going to do nothing but wait until the task is finished. It that&#39;s all you want to do, then you might as well just do the task in thread A.\r\n\r\n-----------\r\n\r\nIt&#39;s tricker with a GUI, because maybe you are trying to prevent the GUI from &quot;freezing up&quot; while the books are being loaded. The thing is, in that case, if the GUI doesn&#39;t freeze up, what _does_ it do instead?\r\n\r\nThe simplest answer to that question is to have the GUI put up a [_modal dialog_](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Dialog.html) box that says something like, &quot;loading books,&quot; and not show any controls that let the user do anything else until the books are loaded. Maybe if you&#39;re nice, you&#39;ll show a progress bar in the dialog to show them how long they will have to wait. Maybe if you are really nice, you could even give them an &quot;abort&quot; button to quit out of the program if they decide not to wait.\r\n\r\nUnfortunately, I can&#39;t say much about _how_ to do those things. I&#39;ve never been much of a GUI programmer, and it&#39;s been maybe a decade since I did any in Java.","title":"Thread that loads data from file","body":"<p>Suppose you are going to make a meal, but you've come to a step where you need flour, and when you look in the pantry there is none. So, you ask your friend who was busy working in the garden to stop what they're doing and run out to buy some flour. Then, the very moment your friend steps out the door, you try to proceed with making the recipe, but What the ???? There's no flour! How can there be no flour when I just sent him out the door to get some?</p>\n<p>You're going to have to wait for the flour.</p>\n<p>Your program is trying to do the same thing. It's trying to use the books when it's only just sent the <code>LoadBooks</code> thread out to fetch them. You're going to need some way for the LoadBooks thread to signal when the books have been loaded, and you need some way for the GUI thread to wait until the signal is delivered.</p>\n<p>A <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html\" rel=\"nofollow noreferrer\"><code>Semaphore</code></a> would be good for that. The LoadBooks thread could call <code>semaphore.release()</code> to signal that the books have been loaded, and the GUI thread could call <code>semaphore.acquire()</code> to await the signal.</p>\n<hr />\n<p>But Wait!!</p>\n<p>Is there something else you could be doing in the kitchen while your friend is shopping for flour? If there is not—if you are not going to do anything at all except sit there and wait—then you might just as well have gone for the flour yourself and not interrupted your friend's work.</p>\n<p>There is practically <em>never</em> any reason for some thread A to give a task to some other thread B if thread A is going to do nothing but wait until the task is finished. It that's all you want to do, then you might as well just do the task in thread A.</p>\n<hr />\n<p>It's tricker with a GUI, because maybe you are trying to prevent the GUI from &quot;freezing up&quot; while the books are being loaded. The thing is, in that case, if the GUI doesn't freeze up, what <em>does</em> it do instead?</p>\n<p>The simplest answer to that question is to have the GUI put up a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Dialog.html\" rel=\"nofollow noreferrer\"><em>modal dialog</em></a> box that says something like, &quot;loading books,&quot; and not show any controls that let the user do anything else until the books are loaded. Maybe if you're nice, you'll show a progress bar in the dialog to show them how long they will have to wait. Maybe if you are really nice, you could even give them an &quot;abort&quot; button to quit out of the program if they decide not to wait.</p>\n<p>Unfortunately, I can't say much about <em>how</em> to do those things. I've never been much of a GUI programmer, and it's been maybe a decade since I did any in Java.</p>\n"}],"owner":{"account_id":27086739,"reputation":67,"user_id":20635129,"display_name":"KazlLaur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76176375,"answer_count":1,"score":0,"last_activity_date":1683225238,"creation_date":1683220972,"question_id":76175843,"body_markdown":"I want to make a thread, that loads data from the file. I was thinking of using the invokeLater() method. But I think I messed up somewhere and can&#39;t figure out where.\r\n\r\n**This is my thread:**\r\n```\r\npublic class LoadBooks extends Thread{\r\n    private ArrayList&lt;Book&gt; books;\r\n\r\n    @Override\r\n    public void run() {\r\n        try\r\n        {\r\n            FileInputStream fis = new FileInputStream(&quot;SaveBooks.ser&quot;);\r\n            ObjectInputStream ois = new ObjectInputStream(fis);\r\n            books = (ArrayList&lt;Book&gt;) ois.readObject();\r\n            fis.close();\r\n            ois.close();\r\n        }catch(Exception e)\r\n        {\r\n        }\r\n    }\r\n\r\n    public ArrayList&lt;Book&gt; getBook() {\r\n        return books;\r\n    }\r\n}\r\n```\r\n**I am using thread like this:**\r\n```\r\nif(e.getSource() == loadBookButton){\r\n    LoadBooks loadBooks = new LoadBooks();\r\n    loadBooks.start();\r\n\r\n    EventQueue.invokeLater(() -&gt; books = loadBooks.getBook());\r\n    EventQueue.invokeLater(() -&gt; updateUI(books));\r\n}\r\n```\r\n**How I think that should work:** Books will be loaded from the file in another thread. When books are loaded, I will get them from my thread and then I will update my GUI.\r\n\r\n**What is the problem?:** GUI is not updating, because *ArrayList* ```books``` is empty. So there is a problem somewhere. I think that maybe I do not understand fully, how the invokeLater works. I was looking up in [java docs][1] but didn&#39;t get much help.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingUtilities.html#invokeLater-java.lang.Runnable-","title":"Thread that loads data from file","body":"<p>I want to make a thread, that loads data from the file. I was thinking of using the invokeLater() method. But I think I messed up somewhere and can't figure out where.</p>\n<p><strong>This is my thread:</strong></p>\n<pre><code>public class LoadBooks extends Thread{\n    private ArrayList&lt;Book&gt; books;\n\n    @Override\n    public void run() {\n        try\n        {\n            FileInputStream fis = new FileInputStream(&quot;SaveBooks.ser&quot;);\n            ObjectInputStream ois = new ObjectInputStream(fis);\n            books = (ArrayList&lt;Book&gt;) ois.readObject();\n            fis.close();\n            ois.close();\n        }catch(Exception e)\n        {\n        }\n    }\n\n    public ArrayList&lt;Book&gt; getBook() {\n        return books;\n    }\n}\n</code></pre>\n<p><strong>I am using thread like this:</strong></p>\n<pre><code>if(e.getSource() == loadBookButton){\n    LoadBooks loadBooks = new LoadBooks();\n    loadBooks.start();\n\n    EventQueue.invokeLater(() -&gt; books = loadBooks.getBook());\n    EventQueue.invokeLater(() -&gt; updateUI(books));\n}\n</code></pre>\n<p><strong>How I think that should work:</strong> Books will be loaded from the file in another thread. When books are loaded, I will get them from my thread and then I will update my GUI.</p>\n<p><strong>What is the problem?:</strong> GUI is not updating, because <em>ArrayList</em> <code>books</code> is empty. So there is a problem somewhere. I think that maybe I do not understand fully, how the invokeLater works. I was looking up in <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingUtilities.html#invokeLater-java.lang.Runnable-\" rel=\"nofollow noreferrer\">java docs</a> but didn't get much help.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"score":0,"creation_date":1683180754,"post_id":76170037,"comment_id":134327474,"body_markdown":"several things you want to check: 1. where is that dependency defined? In your parent project or in module?  2. where were you running the dependency-tree? in root project or module?  3. Are there other dependecies/dependencyManagement dependency defined for this group + artifactId?    You should be able to create a MRE to demonstrate your problem.","body":"several things you want to check: 1. where is that dependency defined? In your parent project or in module?  2. where were you running the dependency-tree? in root project or module?  3. Are there other dependecies/dependencyManagement dependency defined for this group + artifactId?    You should be able to create a MRE to demonstrate your problem."},{"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"score":0,"creation_date":1683183624,"post_id":76170037,"comment_id":134328041,"body_markdown":"@AdrianShum I did CMD + SHIFT + F and searched all files and made sure there&#39;s no 2.3 anywhere. I ran the dependency tree in the module. There&#39;s no dependencyManagement in the current module or the parent module, only in other modules, and they don&#39;t have json-smart 2.3. MRE as in you&#39;d like the dependency tree output?","body":"@AdrianShum I did CMD + SHIFT + F and searched all files and made sure there&#39;s no 2.3 anywhere. I ran the dependency tree in the module. There&#39;s no dependencyManagement in the current module or the parent module, only in other modules, and they don&#39;t have json-smart 2.3. MRE as in you&#39;d like the dependency tree output?"},{"owner":{"account_id":6062199,"reputation":1160,"user_id":4733652,"display_name":"Iske"},"score":2,"creation_date":1683189880,"post_id":76170037,"comment_id":134329323,"body_markdown":"Try running dependency tree with  [-Dverbose](https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html#verbose) parameter to see full output with omitted entries. It should give you an answer on what is going on...","body":"Try running dependency tree with  <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html#verbose\" rel=\"nofollow noreferrer\">-Dverbose</a> parameter to see full output with omitted entries. It should give you an answer on what is going on..."}],"answers":[{"tags":[],"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683224218,"creation_date":1683224218,"answer_id":76176247,"question_id":76170037,"body_markdown":"The issue was that there&#39;s a transitive dependency that was overwriting the root dependency. Removing the root dependency exposed where the transitive dependency was, then excluding it. This resolved it.","title":"I have json-smart 2.4.10 but in dependency tree, it shows 2.3","body":"<p>The issue was that there's a transitive dependency that was overwriting the root dependency. Removing the root dependency exposed where the transitive dependency was, then excluding it. This resolved it.</p>\n"}],"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":638,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1683224218,"creation_date":1683180587,"question_id":76170037,"body_markdown":"I&#39;m in a module with \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.minidev&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json-smart&lt;/artifactId&gt;\r\n        &lt;version&gt;2.4.10&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nHowever, when I do `mvn dependency:tree` it&#39;s still showing `2.3`:\r\n\r\n    [INFO] +- net.minidev:json-smart:jar:2.3:compile\r\n    [INFO] |  \\- net.minidev:accessors-smart:jar:1.2:compile\r\n\r\nThere&#39;s no other spot where I can find json-smart 2.3, I checked the entire multi module project, but nowhere it shows 2.3. I&#39;m not sure what I&#39;m missing.","title":"I have json-smart 2.4.10 but in dependency tree, it shows 2.3","body":"<p>I'm in a module with</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.minidev&lt;/groupId&gt;\n    &lt;artifactId&gt;json-smart&lt;/artifactId&gt;\n    &lt;version&gt;2.4.10&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>However, when I do <code>mvn dependency:tree</code> it's still showing <code>2.3</code>:</p>\n<pre><code>[INFO] +- net.minidev:json-smart:jar:2.3:compile\n[INFO] |  \\- net.minidev:accessors-smart:jar:1.2:compile\n</code></pre>\n<p>There's no other spot where I can find json-smart 2.3, I checked the entire multi module project, but nowhere it shows 2.3. I'm not sure what I'm missing.</p>\n"},{"tags":["java","swing","event-handling","jpanel","keylistener"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1683211776,"post_id":76174493,"comment_id":134334934,"body_markdown":"If you&#39;ve done any searching on this, especially on this site, you&#39;ll see that most will recommend that you *shouldn&#39;t* use KeyListeners for something like this. Try key bindings instead, as it won&#39;t give you all the same focus requirement issues that KeyListeners do. Also, for better answers, best to create and post a valid [mre] with your question. Please read the link to see what this is and how it can help you and us.","body":"If you&#39;ve done any searching on this, especially on this site, you&#39;ll see that most will recommend that you <i>shouldn&#39;t</i> use KeyListeners for something like this. Try key bindings instead, as it won&#39;t give you all the same focus requirement issues that KeyListeners do. Also, for better answers, best to create and post a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your question. Please read the link to see what this is and how it can help you and us."},{"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"score":0,"creation_date":1683212592,"post_id":76174493,"comment_id":134335124,"body_markdown":"I&#39;ve taken away a lot from my code, but because I&#39;m placing a Jpanel inside a JScrollPane inside a JTabbedPane inside a JFrame, I feel like adding all of those things are necessary. I also want to add that my mouseListeners work for some reason to see if that had anything to do with it.","body":"I&#39;ve taken away a lot from my code, but because I&#39;m placing a Jpanel inside a JScrollPane inside a JTabbedPane inside a JFrame, I feel like adding all of those things are necessary. I also want to add that my mouseListeners work for some reason to see if that had anything to do with it."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683212798,"post_id":76174493,"comment_id":134335186,"body_markdown":"Only you can decide what is necessary or not, but I am saying that no one here can compile or run your or test your code. ***Again***, please look at the [mre] link to see why you really should be posting one of these in your question and not the snippets of unrunnable code that you&#39;re currently posting. Note also that this is not a request for the entire program, but likely you&#39;ll want to create a new small program that runs and that reproduces the problem.","body":"Only you can decide what is necessary or not, but I am saying that no one here can compile or run your or test your code. <b><i>Again</i></b>, please look at the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> link to see why you really should be posting one of these in your question and not the snippets of unrunnable code that you&#39;re currently posting. Note also that this is not a request for the entire program, but likely you&#39;ll want to create a new small program that runs and that reproduces the problem."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683213222,"post_id":76174493,"comment_id":134335292,"body_markdown":"If you get a decent answer soon without creating an MRE, then feel free to ignore my suggestion. But myself, given what I see, I again can only give broad recommendations that you try [Key Bindings](https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) (tutorial link) to see if that would work. Another unrelated issue: you look to be over-using the `static` modifier, and this can come back to bite you.","body":"If you get a decent answer soon without creating an MRE, then feel free to ignore my suggestion. But myself, given what I see, I again can only give broad recommendations that you try <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html\" rel=\"nofollow noreferrer\">Key Bindings</a> (tutorial link) to see if that would work. Another unrelated issue: you look to be over-using the <code>static</code> modifier, and this can come back to bite you."},{"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"score":0,"creation_date":1683213852,"post_id":76174493,"comment_id":134335466,"body_markdown":"So you mean, produce code that can be tested? Where would submit that code?","body":"So you mean, produce code that can be tested? Where would submit that code?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1683215745,"post_id":76174493,"comment_id":134335980,"body_markdown":"Where? Here of course, as code-formatted text. Please read the link, as I&#39;ve mentioned several times; it will explain much.","body":"Where? Here of course, as code-formatted text. Please read the link, as I&#39;ve mentioned several times; it will explain much."}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683223975,"creation_date":1683223975,"answer_id":76176232,"question_id":76174493,"body_markdown":"So, using your code, I can demonstrate that Key Bindings does in fact work inside of a nested component, here the bindings are on the g-key, for &quot;green&quot;. When the key is pressed, the foreground color of the component changes to green.\r\n\r\nThe bindings:\r\n```\r\nprivate void eventHandlers() {\r\n\t\r\n\t// .......\r\n\r\n\t// add some key bindings to test that they work\r\n\tInputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\r\n\tActionMap actionMap = getActionMap();\r\n\r\n\t// when the g-key is pressed, the foreground color is set to green\r\n\tKeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\r\n\tKeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\r\n\r\n\tinputMap.put(gDownKey, &quot;gDown&quot;);\r\n\tactionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\r\n\r\n\tinputMap.put(gUpKey, &quot;gUp&quot;);\r\n\tactionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\r\n}\r\n\r\nprivate class ForeGroundColorAction extends AbstractAction {\r\n\tprivate Color color;\r\n\r\n\tpublic ForeGroundColorAction(Color color) {\r\n\t\tthis.color = color;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\tforeGroundColor = color;\r\n\t\trepaint();\r\n\t}\r\n}\r\n```\r\n\r\nAnd my MRE demonstration program:\r\n\r\n\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\nimport javax.swing.GroupLayout.Alignment;\r\nimport javax.swing.LayoutStyle.ComponentPlacement;\r\nimport javax.swing.event.*;\r\n\r\npublic class Cartographer {\r\n    private final JFrame frmMyWorld = new JFrame();\r\n    double hPortion = 0;\r\n    double vPortion = 0;\r\n    private JTabbedPane tabbedPane;\r\n    private int numberOfTabbs;\r\n    public boolean isScrolling;\r\n    private JSlider zoomer;\r\n\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    Cartographer window = new Cartographer();\r\n                    window.frmMyWorld.setVisible(true);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public Cartographer() {\r\n        initialize();\r\n    }\r\n\r\n    private void initialize() {\r\n        frmMyWorld.setTitle(&quot;My World&quot;);\r\n        frmMyWorld.setBounds(0, 0, 1450, 805);\r\n        frmMyWorld.getContentPane().setBackground(new Color(100, 100, 100));\r\n        frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        tabbedPane = new JTabbedPane(JTabbedPane.TOP);\r\n        newTab();\r\n        isScrolling = true;\r\n        zoomer = new JSlider();\r\n        zoomer.setMinimum(-1000);\r\n        zoomer.setMaximum(1000);\r\n        zoomer.setValue(1000);\r\n        zoomer.setOrientation(SwingConstants.VERTICAL);\r\n        zoomer.addChangeListener(new ChangeListener() {\r\n            public void stateChanged(ChangeEvent e) {\r\n                if (isScrolling) {\r\n                    hPortion = getHPortion();\r\n                    vPortion = getVPortion();\r\n                }\r\n                isScrolling = false;\r\n                int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n                int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\r\n                getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue() / 1000 - 1));\r\n                getSelectedSpace().setZoomerValue(zoomer.getValue());\r\n                getSelectedSpace().repaint();\r\n                getSelectedPane().getHorizontalScrollBar()\r\n                        .setValue((int) Math.round(hPortion * hScale - (hVisible() / 2)));\r\n                getSelectedPane().getVerticalScrollBar()\r\n                        .setValue((int) Math.round(vPortion * vScale - (vVisible() / 2)));\r\n                getSelectedPane().addNotify();\r\n                getSelectedPane().revalidate();\r\n                getSelectedPane().setDoubleBuffered(true);\r\n                getSelectedPane().getHorizontalScrollBar().revalidate();\r\n                getSelectedPane().getVerticalScrollBar().revalidate();\r\n                getSelectedSpace().repaint();\r\n            }\r\n        });\r\n        GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\r\n        groupLayout.setHorizontalGroup(\r\n                groupLayout.createParallelGroup(Alignment.LEADING)\r\n                        .addGroup(groupLayout.createSequentialGroup()\r\n                                .addContainerGap()\r\n                                .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\r\n                                .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335,\r\n                                                GroupLayout.PREFERRED_SIZE))\r\n                                .addGap(28)));\r\n        groupLayout.setVerticalGroup(\r\n                groupLayout.createParallelGroup(Alignment.LEADING)\r\n                        .addGroup(groupLayout.createSequentialGroup()\r\n                                .addContainerGap()\r\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n                                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624,\r\n                                                GroupLayout.PREFERRED_SIZE)\r\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642,\r\n                                                GroupLayout.PREFERRED_SIZE))\r\n                                .addGap(18)));\r\n        groupSettingManager(groupLayout);\r\n    }\r\n\r\n    void groupSettingManager(GroupLayout groupLayout) {\r\n        frmMyWorld.getContentPane().setLayout(groupLayout);\r\n    }\r\n\r\n    void newTab() {\r\n        // We first create a new workspace with the given dimentions\r\n        Workspace workSpace = new Workspace(1295 * 4, 592 * 4, this);\r\n        // we need to focus on this new workspace for key listeners to work\r\n        // Our workspace sits inside a scroll pane\r\n        JScrollPane scrollPane = new JScrollPane(workSpace);\r\n        numberOfTabbs++;\r\n        // our scroll pane sits inside a tabbed pane\r\n        tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\r\n        workSpace.requestFocus();\r\n        tabbedPane.setSelectedIndex(numberOfTabbs - 1);\r\n        scrollPane.getHorizontalScrollBar().addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                isScrolling = true;\r\n            }\r\n\r\n        });\r\n        scrollPane.getVerticalScrollBar().addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                isScrolling = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    Workspace getSelectedSpace() {\r\n        return ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\r\n    }\r\n\r\n    JScrollPane getSelectedPane() {\r\n        return (JScrollPane) tabbedPane.getSelectedComponent();\r\n    }\r\n\r\n    Workspace getSpace(int i) {\r\n        return ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\r\n    }\r\n\r\n    JScrollPane getPane(int i) {\r\n        return (JScrollPane) tabbedPane.getComponent(i);\r\n    }\r\n\r\n    void setZoomerValue(int i) {\r\n        if (-1000 &lt;= i &amp;&amp; i &lt;= 1000)\r\n            zoomer.setValue(i);\r\n    }\r\n\r\n    int getZoomerValue() {\r\n        return zoomer.getValue();\r\n    }\r\n\r\n    public double getHPortion() {\r\n        int m = getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n        int v = getSelectedPane().getHorizontalScrollBar().getValue();\r\n        double a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount() / 2;\r\n        return (v + a) / m;\r\n    }\r\n\r\n    public double getVPortion() {\r\n        int m = getSelectedPane().getVerticalScrollBar().getMaximum();\r\n        int v = getSelectedPane().getVerticalScrollBar().getValue();\r\n        double a = getSelectedPane().getVerticalScrollBar().getVisibleAmount() / 2;\r\n        return (v + a) / m;\r\n    }\r\n\r\n    public int hVisible() {\r\n        return getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\r\n    }\r\n\r\n    public int vVisible() {\r\n        return getSelectedPane().getVerticalScrollBar().getVisibleAmount();\r\n    }\r\n}\r\n\r\nclass Workspace extends JPanel implements KeyListener {\r\n    // we keep every landmass that will appear in the workspace stored in this array\r\n    private Color backGroundColor;\r\n    private Color foreGroundColor;\r\n    private int zoomerValue;\r\n    private Cartographer cartographer;\r\n    private double zoomFactor;\r\n    private int width;\r\n    private int height;\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    public Workspace(int w, int h, Cartographer cartographer) {\r\n        this.cartographer = cartographer;\r\n        eventHandlers();\r\n        this.setPreferredSize(new Dimension(w, h));\r\n        backGroundColor = Color.BLACK;\r\n        foreGroundColor = Color.WHITE;\r\n        this.setBackground(backGroundColor);\r\n        zoomFactor = 1;\r\n        width = w;\r\n        height = h;\r\n        zoomerValue = 1000;\r\n        this.setFocusable(true);\r\n        this.requestFocus();\r\n        this.addKeyListener(this);\r\n        setBackground(backGroundColor); // !!s\r\n    }\r\n\r\n    public Workspace(LayoutManager layout) {\r\n        super(layout);\r\n    }\r\n\r\n    public Workspace(boolean isDoubleBuffered) {\r\n        super(isDoubleBuffered);\r\n    }\r\n\r\n    public Workspace(LayoutManager layout, boolean isDoubleBuffered) {\r\n        super(layout, isDoubleBuffered);\r\n    }\r\n\r\n    public double getZoomFactor() {\r\n        return zoomFactor;\r\n    }\r\n\r\n    public void setZoomFactor(double z) {\r\n        zoomFactor = z;\r\n        repaint();\r\n    }\r\n\r\n    public void adjustZoomFactor(int z) {\r\n        zoomFactor = Math.pow(2, z);\r\n        repaint();\r\n    }\r\n\r\n    public int getZoomerValue() {\r\n        return zoomerValue;\r\n    }\r\n\r\n    public void setZoomerValue(int i) {\r\n        zoomerValue = i;\r\n    }\r\n\r\n    @Override // must override paintComponent, not paint\r\n    protected void paintComponent(Graphics g) {\r\n        super.paintComponent(g); // never forget this!\r\n\r\n        // best to only scale a copy of the Graphics object so as not to break the painting chain\r\n        Graphics2D g2 = (Graphics2D) g.create();\r\n        zoom(g2);\r\n        for (int i = 0; i &lt; 35; i++) {\r\n            for (int j = Math.floorMod(i, 2); j &lt; 16; j += 2) {\r\n                g2.setColor(foreGroundColor);\r\n                g2.fillRect(148 * i, 148 * j, 148, 148);\r\n                g2.setColor(Color.GREEN);\r\n                g2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;, 148 * i + 66, 148 * j + 72);\r\n            }\r\n        }\r\n        g2.dispose();  // dispose of copy\r\n\r\n        // this.setBackground(backGroundColor); // !! does not belong in painting method\r\n    }\r\n\r\n    private void zoom(Graphics2D g) {\r\n        // if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\r\n        g.scale(zoomFactor, zoomFactor);\r\n        this.setPreferredSize(\r\n                new Dimension((int) Math.round(width * zoomFactor), (int) Math.round(height * zoomFactor)));\r\n        this.validate();\r\n        // if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\r\n    }\r\n\r\n    /**\r\n     * Any events that occur within the workspace happen here\r\n     */\r\n    private void eventHandlers() {\r\n        this.addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                foreGroundColor = Color.BLUE;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseClicked(MouseEvent e) {\r\n                backGroundColor = Color.GRAY;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseReleased(MouseEvent e) {\r\n                foreGroundColor = Color.WHITE;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseExited(MouseEvent e) {\r\n                backGroundColor = Color.BLACK;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseEntered(MouseEvent e) {\r\n                cartographer.setZoomerValue(zoomerValue);\r\n                repaint();\r\n            }\r\n        });\r\n        this.addMouseMotionListener(new MouseMotionAdapter() {\r\n            @Override\r\n            public void mouseMoved(MouseEvent e) {\r\n                repaint();\r\n            }\r\n\r\n            public void mouseDragged(MouseEvent e) {\r\n                repaint();\r\n            }\r\n\r\n            public void mouseWheelMoved(MouseEvent e) {\r\n                cartographer.isScrolling = true;\r\n            }\r\n        });\r\n        this.addKeyListener(new KeyAdapter() {\r\n            public void keyPressed(KeyEvent e) {\r\n                foreGroundColor = Color.RED;\r\n            }\r\n        });\r\n\r\n        // add some key bindings to test that they work\r\n        InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\r\n        ActionMap actionMap = getActionMap();\r\n\r\n        // when the g-key is pressed, the foreground color is set to green\r\n        KeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\r\n        KeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\r\n\r\n        inputMap.put(gDownKey, &quot;gDown&quot;);\r\n        actionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\r\n\r\n        inputMap.put(gUpKey, &quot;gUp&quot;);\r\n        actionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\r\n    }\r\n\r\n    private class ForeGroundColorAction extends AbstractAction {\r\n        private Color color;\r\n\r\n        public ForeGroundColorAction(Color color) {\r\n            this.color = color;\r\n        }\r\n\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            foreGroundColor = color;\r\n            repaint();\r\n        }\r\n    }\r\n\r\n    public int mousePositionX() {\r\n        return (int) Math.round(getMousePosition().x / zoomFactor);\r\n    }\r\n\r\n    public int mousePositionY() {\r\n        return (int) Math.round(getMousePosition().y / zoomFactor);\r\n    }\r\n\r\n    @Override\r\n    public void keyTyped(KeyEvent e) {\r\n        // TODO Auto-generated method stub\r\n    }\r\n\r\n    @Override\r\n    public void keyPressed(KeyEvent e) {\r\n        switch (e.getKeyCode()) {\r\n            case 38:\r\n                if (zoomerValue &lt; 1000) {\r\n                    zoomerValue += 5;\r\n                    cartographer.setZoomerValue(zoomerValue);\r\n                }\r\n                repaint();\r\n                break;\r\n            case 40:\r\n                if (zoomerValue &gt; -1000) {\r\n                    zoomerValue -= 5;\r\n                    cartographer.setZoomerValue(zoomerValue);\r\n                }\r\n                System.out.println(zoomerValue);\r\n                repaint();\r\n                break;\r\n            default:\r\n                repaint();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void keyReleased(KeyEvent e) {\r\n    }\r\n}\r\n```\r\n\r\nNote my removal of many static modifiers. Also, you shouldn&#39;t draw in paint but in paintComponent and don&#39;t forget to call the super&#39;s method for housekeeping painting. Also, scaling should usually be done on a copy of the Graphics object given by the JVM. ","title":"I&#39;m trying to add key listeners to a JPanel in Java","body":"<p>So, using your code, I can demonstrate that Key Bindings does in fact work inside of a nested component, here the bindings are on the g-key, for &quot;green&quot;. When the key is pressed, the foreground color of the component changes to green.</p>\n<p>The bindings:</p>\n<pre><code>private void eventHandlers() {\n    \n    // .......\n\n    // add some key bindings to test that they work\n    InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\n    ActionMap actionMap = getActionMap();\n\n    // when the g-key is pressed, the foreground color is set to green\n    KeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\n    KeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\n\n    inputMap.put(gDownKey, &quot;gDown&quot;);\n    actionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\n\n    inputMap.put(gUpKey, &quot;gUp&quot;);\n    actionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\n}\n\nprivate class ForeGroundColorAction extends AbstractAction {\n    private Color color;\n\n    public ForeGroundColorAction(Color color) {\n        this.color = color;\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        foreGroundColor = color;\n        repaint();\n    }\n}\n</code></pre>\n<p>And my MRE demonstration program:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.GroupLayout.Alignment;\nimport javax.swing.LayoutStyle.ComponentPlacement;\nimport javax.swing.event.*;\n\npublic class Cartographer {\n    private final JFrame frmMyWorld = new JFrame();\n    double hPortion = 0;\n    double vPortion = 0;\n    private JTabbedPane tabbedPane;\n    private int numberOfTabbs;\n    public boolean isScrolling;\n    private JSlider zoomer;\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    Cartographer window = new Cartographer();\n                    window.frmMyWorld.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    public Cartographer() {\n        initialize();\n    }\n\n    private void initialize() {\n        frmMyWorld.setTitle(&quot;My World&quot;);\n        frmMyWorld.setBounds(0, 0, 1450, 805);\n        frmMyWorld.getContentPane().setBackground(new Color(100, 100, 100));\n        frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        tabbedPane = new JTabbedPane(JTabbedPane.TOP);\n        newTab();\n        isScrolling = true;\n        zoomer = new JSlider();\n        zoomer.setMinimum(-1000);\n        zoomer.setMaximum(1000);\n        zoomer.setValue(1000);\n        zoomer.setOrientation(SwingConstants.VERTICAL);\n        zoomer.addChangeListener(new ChangeListener() {\n            public void stateChanged(ChangeEvent e) {\n                if (isScrolling) {\n                    hPortion = getHPortion();\n                    vPortion = getVPortion();\n                }\n                isScrolling = false;\n                int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\n                int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\n                getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue() / 1000 - 1));\n                getSelectedSpace().setZoomerValue(zoomer.getValue());\n                getSelectedSpace().repaint();\n                getSelectedPane().getHorizontalScrollBar()\n                        .setValue((int) Math.round(hPortion * hScale - (hVisible() / 2)));\n                getSelectedPane().getVerticalScrollBar()\n                        .setValue((int) Math.round(vPortion * vScale - (vVisible() / 2)));\n                getSelectedPane().addNotify();\n                getSelectedPane().revalidate();\n                getSelectedPane().setDoubleBuffered(true);\n                getSelectedPane().getHorizontalScrollBar().revalidate();\n                getSelectedPane().getVerticalScrollBar().revalidate();\n                getSelectedSpace().repaint();\n            }\n        });\n        GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\n        groupLayout.setHorizontalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addGroup(groupLayout.createSequentialGroup()\n                                .addContainerGap()\n                                .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\n                                .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335,\n                                                GroupLayout.PREFERRED_SIZE))\n                                .addGap(28)));\n        groupLayout.setVerticalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addGroup(groupLayout.createSequentialGroup()\n                                .addContainerGap()\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624,\n                                                GroupLayout.PREFERRED_SIZE)\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642,\n                                                GroupLayout.PREFERRED_SIZE))\n                                .addGap(18)));\n        groupSettingManager(groupLayout);\n    }\n\n    void groupSettingManager(GroupLayout groupLayout) {\n        frmMyWorld.getContentPane().setLayout(groupLayout);\n    }\n\n    void newTab() {\n        // We first create a new workspace with the given dimentions\n        Workspace workSpace = new Workspace(1295 * 4, 592 * 4, this);\n        // we need to focus on this new workspace for key listeners to work\n        // Our workspace sits inside a scroll pane\n        JScrollPane scrollPane = new JScrollPane(workSpace);\n        numberOfTabbs++;\n        // our scroll pane sits inside a tabbed pane\n        tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\n        workSpace.requestFocus();\n        tabbedPane.setSelectedIndex(numberOfTabbs - 1);\n        scrollPane.getHorizontalScrollBar().addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n\n        });\n        scrollPane.getVerticalScrollBar().addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n        });\n    }\n\n    Workspace getSelectedSpace() {\n        return ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\n    }\n\n    JScrollPane getSelectedPane() {\n        return (JScrollPane) tabbedPane.getSelectedComponent();\n    }\n\n    Workspace getSpace(int i) {\n        return ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\n    }\n\n    JScrollPane getPane(int i) {\n        return (JScrollPane) tabbedPane.getComponent(i);\n    }\n\n    void setZoomerValue(int i) {\n        if (-1000 &lt;= i &amp;&amp; i &lt;= 1000)\n            zoomer.setValue(i);\n    }\n\n    int getZoomerValue() {\n        return zoomer.getValue();\n    }\n\n    public double getHPortion() {\n        int m = getSelectedPane().getHorizontalScrollBar().getMaximum();\n        int v = getSelectedPane().getHorizontalScrollBar().getValue();\n        double a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount() / 2;\n        return (v + a) / m;\n    }\n\n    public double getVPortion() {\n        int m = getSelectedPane().getVerticalScrollBar().getMaximum();\n        int v = getSelectedPane().getVerticalScrollBar().getValue();\n        double a = getSelectedPane().getVerticalScrollBar().getVisibleAmount() / 2;\n        return (v + a) / m;\n    }\n\n    public int hVisible() {\n        return getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\n    }\n\n    public int vVisible() {\n        return getSelectedPane().getVerticalScrollBar().getVisibleAmount();\n    }\n}\n\nclass Workspace extends JPanel implements KeyListener {\n    // we keep every landmass that will appear in the workspace stored in this array\n    private Color backGroundColor;\n    private Color foreGroundColor;\n    private int zoomerValue;\n    private Cartographer cartographer;\n    private double zoomFactor;\n    private int width;\n    private int height;\n    private static final long serialVersionUID = 1L;\n\n    public Workspace(int w, int h, Cartographer cartographer) {\n        this.cartographer = cartographer;\n        eventHandlers();\n        this.setPreferredSize(new Dimension(w, h));\n        backGroundColor = Color.BLACK;\n        foreGroundColor = Color.WHITE;\n        this.setBackground(backGroundColor);\n        zoomFactor = 1;\n        width = w;\n        height = h;\n        zoomerValue = 1000;\n        this.setFocusable(true);\n        this.requestFocus();\n        this.addKeyListener(this);\n        setBackground(backGroundColor); // !!s\n    }\n\n    public Workspace(LayoutManager layout) {\n        super(layout);\n    }\n\n    public Workspace(boolean isDoubleBuffered) {\n        super(isDoubleBuffered);\n    }\n\n    public Workspace(LayoutManager layout, boolean isDoubleBuffered) {\n        super(layout, isDoubleBuffered);\n    }\n\n    public double getZoomFactor() {\n        return zoomFactor;\n    }\n\n    public void setZoomFactor(double z) {\n        zoomFactor = z;\n        repaint();\n    }\n\n    public void adjustZoomFactor(int z) {\n        zoomFactor = Math.pow(2, z);\n        repaint();\n    }\n\n    public int getZoomerValue() {\n        return zoomerValue;\n    }\n\n    public void setZoomerValue(int i) {\n        zoomerValue = i;\n    }\n\n    @Override // must override paintComponent, not paint\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g); // never forget this!\n\n        // best to only scale a copy of the Graphics object so as not to break the painting chain\n        Graphics2D g2 = (Graphics2D) g.create();\n        zoom(g2);\n        for (int i = 0; i &lt; 35; i++) {\n            for (int j = Math.floorMod(i, 2); j &lt; 16; j += 2) {\n                g2.setColor(foreGroundColor);\n                g2.fillRect(148 * i, 148 * j, 148, 148);\n                g2.setColor(Color.GREEN);\n                g2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;, 148 * i + 66, 148 * j + 72);\n            }\n        }\n        g2.dispose();  // dispose of copy\n\n        // this.setBackground(backGroundColor); // !! does not belong in painting method\n    }\n\n    private void zoom(Graphics2D g) {\n        // if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\n        g.scale(zoomFactor, zoomFactor);\n        this.setPreferredSize(\n                new Dimension((int) Math.round(width * zoomFactor), (int) Math.round(height * zoomFactor)));\n        this.validate();\n        // if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\n    }\n\n    /**\n     * Any events that occur within the workspace happen here\n     */\n    private void eventHandlers() {\n        this.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                foreGroundColor = Color.BLUE;\n                repaint();\n            }\n\n            public void mouseClicked(MouseEvent e) {\n                backGroundColor = Color.GRAY;\n                repaint();\n            }\n\n            public void mouseReleased(MouseEvent e) {\n                foreGroundColor = Color.WHITE;\n                repaint();\n            }\n\n            public void mouseExited(MouseEvent e) {\n                backGroundColor = Color.BLACK;\n                repaint();\n            }\n\n            public void mouseEntered(MouseEvent e) {\n                cartographer.setZoomerValue(zoomerValue);\n                repaint();\n            }\n        });\n        this.addMouseMotionListener(new MouseMotionAdapter() {\n            @Override\n            public void mouseMoved(MouseEvent e) {\n                repaint();\n            }\n\n            public void mouseDragged(MouseEvent e) {\n                repaint();\n            }\n\n            public void mouseWheelMoved(MouseEvent e) {\n                cartographer.isScrolling = true;\n            }\n        });\n        this.addKeyListener(new KeyAdapter() {\n            public void keyPressed(KeyEvent e) {\n                foreGroundColor = Color.RED;\n            }\n        });\n\n        // add some key bindings to test that they work\n        InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\n        ActionMap actionMap = getActionMap();\n\n        // when the g-key is pressed, the foreground color is set to green\n        KeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\n        KeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\n\n        inputMap.put(gDownKey, &quot;gDown&quot;);\n        actionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\n\n        inputMap.put(gUpKey, &quot;gUp&quot;);\n        actionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\n    }\n\n    private class ForeGroundColorAction extends AbstractAction {\n        private Color color;\n\n        public ForeGroundColorAction(Color color) {\n            this.color = color;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            foreGroundColor = color;\n            repaint();\n        }\n    }\n\n    public int mousePositionX() {\n        return (int) Math.round(getMousePosition().x / zoomFactor);\n    }\n\n    public int mousePositionY() {\n        return (int) Math.round(getMousePosition().y / zoomFactor);\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e) {\n        // TODO Auto-generated method stub\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e) {\n        switch (e.getKeyCode()) {\n            case 38:\n                if (zoomerValue &lt; 1000) {\n                    zoomerValue += 5;\n                    cartographer.setZoomerValue(zoomerValue);\n                }\n                repaint();\n                break;\n            case 40:\n                if (zoomerValue &gt; -1000) {\n                    zoomerValue -= 5;\n                    cartographer.setZoomerValue(zoomerValue);\n                }\n                System.out.println(zoomerValue);\n                repaint();\n                break;\n            default:\n                repaint();\n        }\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e) {\n    }\n}\n</code></pre>\n<p>Note my removal of many static modifiers. Also, you shouldn't draw in paint but in paintComponent and don't forget to call the super's method for housekeeping painting. Also, scaling should usually be done on a copy of the Graphics object given by the JVM.</p>\n"}],"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76176232,"answer_count":1,"score":1,"last_activity_date":1683223975,"creation_date":1683211668,"question_id":76174493,"body_markdown":"There&#39;s a lot to understand, so stick with me. I have a JPanel inside a JScrollPane, which is inside a JTabbedPane, which is inside a JFrame. Somewhere in that process, I&#39;m losing the ability to add key listeners. \r\n\r\nI have this to set up my JFrame\r\n```\r\npublic class Cartographer {\r\n\r\n\tprivate final JFrame frmMyWorld = new JFrame();\r\n\t/**\r\n\t * set up our toolbar\r\n\t */\r\n\tprivate final JButton addTabb = new JButton(&quot;Create New Workspace&quot;);\r\n\t\r\n\t\r\n\t//this is where I create the new tabbed pane\r\n\tprivate static JTabbedPane tabbedPane;\r\n\tprivate int numberOfTabbs;\r\n\tpublic static boolean isScrolling;\r\n\tprivate static JSlider zoomer;\r\n\t\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tCartographer window = new Cartographer();\r\n\t\t\t\t\twindow.frmMyWorld.setVisible(true);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tpublic Cartographer() {\t\r\n\t\tinitialize();\r\n\t\tcreateEvents();\r\n\t}\r\n```\r\nI then initialize:\r\n\r\n```\r\nprivate void initialize() {\r\n\t\t\r\n\t\tfrmMyWorld.setTitle(&quot;My World&quot;);\r\n\t\tfrmMyWorld.setBounds(0, 0, 1450, 805);\r\n\t\tfrmMyWorld.getContentPane().setBackground(new Color(100,100,100));\r\n\t\tfrmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\r\n\t\ttabbedPane = new JTabbedPane(JTabbedPane.TOP);\r\n\t\tnewTab();\r\n\t\tisScrolling = true;\r\n\r\n\t\t//this sets up my slider which I&#39;m using to zoom\r\n\t\tzoomer = new JSlider();\r\n\t\tzoomer.setMinimum(-1000);\r\n\t\tzoomer.setMaximum(1000);\r\n\t\tzoomer.setValue(1000);\r\n\t\tzoomer.setOrientation(SwingConstants.VERTICAL);\r\n\t\tzoomer.addChangeListener(new ChangeListener() {\r\n\t\t\tpublic void stateChanged(ChangeEvent e) {\r\n\t\t\t\tif(isScrolling) {\r\n\t\t\t\t\thPortion = getHPortion();\r\n\t\t\t\t\tvPortion = getVPortion();\r\n\t\t\t\t}\r\n\t\t\t\tisScrolling = false;\r\n\t\t\t\tint hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n\t\t\t\tint vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\r\n\t\t\t\tgetSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/250 - 4));\r\n\t\t\t\tgetSelectedSpace().setZoomerValue(zoomer.getValue());\r\n\t\t\t\tgetSelectedSpace().repaint();\r\n\t\t\t\tgetSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\r\n\t\t\t\tgetSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \r\n\t\t\t\tgetSelectedPane().addNotify();\r\n\t\t\t\tgetSelectedPane().revalidate();\r\n\t\t\t\tgetSelectedPane().setDoubleBuffered(true);\r\n\t\t\t\tgetSelectedPane().getHorizontalScrollBar().revalidate();\r\n\t\t\t\tgetSelectedPane().getVerticalScrollBar().revalidate();\r\n\t\t\t\tgetSelectedSpace().repaint();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t/**and using a group layout, we add a new tab to our JFrame\r\n                 * my original code was using buttons I&#39;m just simplifying the code to make it                  .                */easier to read,that&#39;s why I&#39;m using group layour     ,          \r\n\t\tGroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\r\n\t\tgroupLayout.setHorizontalGroup(\r\n\t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n\t\t\t\t\t.addContainerGap()\r\n\t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\r\n\t\t\t\t\t.addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n\t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\r\n\t\t\t\t\t.addGap(28))\r\n\t\t);\r\n\t\tgroupLayout.setVerticalGroup(\r\n\t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n\t\t\t\t\t.addContainerGap()\r\n\t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\r\n\t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\r\n\t\t\t\t\t.addGap(18))\r\n\t\t);\r\n\t\tgroupSettingManager(groupLayout);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n```\r\nAnd the newTab() function is what we do when we create a new tab\r\n\t\r\n```\r\nvoid newTab() {\r\n\t\t//We first create a new workspace with the given dimentions \r\n\t\tWorkspace workSpace = new Workspace(1295*256, 592*256);\r\n//request focus so we can add key listeners\r\n\t\tworkSpace.requestFocus();\r\n\t\t//Our workspace sits inside a scroll pane\r\n\t\tJScrollPane scrollPane = new JScrollPane(workSpace);\r\n\t\tnumberOfTabbs++;\r\n\t\t//our scroll pane sits inside a tabbed pane\r\n\t\ttabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\r\n\t\ttabbedPane.setSelectedIndex(numberOfTabbs-1);\r\n\t\tscrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\r\n\t\t\t@Override\r\n\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\tisScrolling = true;\r\n\t\t\t}\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n\t\t});\r\n\t\tscrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\r\n\t\t\t@Override\r\n\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\tisScrolling = true;\r\n\t\t\t}\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t}\r\n```\r\nAs you may have noticed, we&#39;re requesting focus from the new workspace as soon as it&#39;s created, however, that doesn&#39;t seem to give it focus\r\n\r\n\r\nI&#39;ve tried adding key listeners to the workspace, like so\r\n```\r\npublic class Workspace extends JPanel implements KeyListener{\r\n\t\t//we keep every landmass that will appear in the workspace stored in this array\r\n\t\tpublic ArrayList&lt;Node&gt; protoLandmass = new ArrayList&lt;Node&gt;();\r\n\t\t\r\n\t\tprivate static Color backGroundColor;\r\n\t\tprivate int zoomerValue;\r\n\t\tprivate static double zoomFactor; \r\n\t\tprivate static int width;\r\n\t\tprivate static int height;\r\n\t\tprivate static boolean zooming = false;\r\n\r\n\t\t/**\r\n\t\t * \r\n\t\t */\r\n\t\tprivate static final long serialVersionUID = 1L;\r\n\t\t\r\n\t\tpublic Workspace(int w, int h) {\r\n\t\t\teventHandlers();\r\n\t\t\tthis.setPreferredSize(new Dimension(w,h));\r\n\t\t\t\r\n\t\t\tbackGroundColor = new Color(0,120,255);\r\n\t\t\tthis.setBackground(backGroundColor);\r\n\t\t\tzoomFactor = 1;\r\n\t\t\twidth = w;\r\n\t\t\theight = h;\r\n\t\t\tzoomerValue = 1000;\r\n\t\t\tthis.setFocusable(true);\r\n                        //I&#39;ve also tried to request focus here, that didn&#39;t work either\r\n\t\t\t//this.requestFocus();\r\n\t\t\tthis.addKeyListener(this);\r\n\t\t\t//this.requestFocusInWindow();\r\n\t\t\trepaint();\r\n\t\t}\r\n\r\n                ...\r\n\r\n                @Override\r\n\t\tpublic void keyTyped(KeyEvent e) {\r\n\t\t\t...\t\r\n\t\t}\r\n\t\t@Override\r\n\t\tpublic void keyPressed(KeyEvent e) {\r\n\t\t\t...\r\n\t\t\t}\t\r\n\t\t}\r\n\t\t@Override\r\n\t\tpublic void keyReleased(KeyEvent e) {\r\n\t\t\t...\r\n\t\t}\r\n```\r\nThe key listeners here don&#39;t work, even though I have tried requesting focus in multiple places\r\n\r\n\r\nThe mouse listeners seem to work when I create events here:\r\n\r\n```\r\nprivate void eventHandlers() {\r\n\t\t\tthis.addMouseListener(new MouseAdapter() {\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\t        ...\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n                                ...\r\n\t\t\t\t}\r\n\t\t\t\tpublic void mouseReleased(MouseEvent e) {\r\n                                ...\r\n\t\t\t\t}\r\n\t\t\t\tpublic void mouseExited(MouseEvent e) {\r\n                                        ...\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t}\r\n\t\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n\t\t\t\t\t...\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.addMouseMotionListener(new MouseMotionAdapter() {\r\n\t        \t@Override\r\n\t        \tpublic void mouseMoved(MouseEvent e) {\r\n\t            \t\trepaint();\r\n\t        \t}\r\n\t        \tpublic void mouseDragged(MouseEvent e) {\r\n\t        \t\trepaint();\r\n\t        \t}\r\n\t        \r\n\t        \tpublic void mouseWheelMoved(MouseEvent e) {\r\n                                       // this one doesn&#39;t work either\r\n\t        \t\t\tCartographer.isScrolling = true;\r\n\t        \t}\r\n\t        });\r\n                \r\n                this.addKeyListener(new KeyAdapter(){\r\n\r\n\t           @Override\r\n\t\tpublic void keyTyped(KeyEvent e) {\r\n\t\t\t...\r\n\t\t\t\r\n\t\t}\r\n                @override\r\n\t\tpublic void keyPressed(KeyEvent e) {\r\n\t\t\t...\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t}\r\n                @override\r\n\t\tpublic void keyReleased(KeyEvent e) {\r\n\t\t\t...\t\r\n\t\t}\t\t\r\n\t\t\t\r\n\t}\r\n```\r\nI tried adding key listeners here, but they didn&#39;t work either. I never tried having key listeners in both places at the same time, I&#39;m just showing all the places they have been to make it easier for you. \r\n\r\nMinimal reproducible example:\r\n\r\n  \r\n\r\n      import java.awt.Color;  \r\n        import java.awt.EventQueue;\r\n        import java.awt.event.MouseEvent;\r\n        import java.awt.event.MouseListener;\r\n        \r\n        import javax.swing.JFrame;\r\n        import javax.swing.JScrollPane;\r\n        import javax.swing.JTabbedPane;\r\n        import javax.swing.GroupLayout;\r\n        import javax.swing.GroupLayout.Alignment;\r\n        import javax.swing.LayoutStyle.ComponentPlacement;\r\n        import javax.swing.JSlider;\r\n        import javax.swing.SwingConstants;\r\n        import javax.swing.event.ChangeListener;\r\n        import javax.swing.event.ChangeEvent;\r\n        \r\n        \r\n        \r\n        public class Cartographer {\r\n        \r\n        \tprivate final JFrame frmMyWorld = new JFrame();\r\n        \t/**\r\n        \t * set up our toolbar\r\n        \t */\r\n        \tdouble hPortion = 0;\r\n        \tdouble vPortion = 0;\r\n        \t\r\n        \t\r\n        \t//the space that will contain everything that is drawn\r\n        \tprivate static JTabbedPane tabbedPane;\r\n        \tprivate int numberOfTabbs;\r\n        \tpublic static boolean isScrolling;\r\n        \tprivate static JSlider zoomer;\r\n        \t\r\n        \t\r\n        \tpublic static void main(String[] args) {\r\n        \t\tEventQueue.invokeLater(new Runnable() {\r\n        \t\t\tpublic void run() {\r\n        \t\t\t\ttry {\r\n        \t\t\t\t\tCartographer window = new Cartographer();\r\n        \t\t\t\t\twindow.frmMyWorld.setVisible(true);\r\n        \t\t\t\t} catch (Exception e) {\r\n        \t\t\t\t\te.printStackTrace();\r\n        \t\t\t\t}\r\n        \t\t\t}\r\n        \t\t});\r\n        \t}\r\n        \r\n        \t/**\r\n        \t * Create the application.\r\n        \t */\r\n        \tpublic Cartographer() {\t\r\n        \t\tinitialize();\r\n        \t}\r\n        \r\n        \t/**\r\n        \t * Initialise the contents of the frame.\r\n        \t */\r\n        \tprivate void initialize() {\r\n        \t\t\r\n        \t\tfrmMyWorld.setTitle(&quot;My World&quot;);\r\n        \t\tfrmMyWorld.setBounds(0, 0, 1450, 805);\r\n        \t\tfrmMyWorld.getContentPane().setBackground(new Color(100,100,100));\r\n        \t\tfrmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        \t\t\r\n        \t\ttabbedPane = new JTabbedPane(JTabbedPane.TOP);\r\n        \t\tnewTab();\r\n        \t\tisScrolling = true;\r\n        \r\n        \t\t/**\r\n        \t\t * give everything its position in the window, we&#39;re using a group layout\r\n        \t\t */\r\n        \t\tzoomer = new JSlider();\r\n        \t\tzoomer.setMinimum(-1000);\r\n        \t\tzoomer.setMaximum(1000);\r\n        \t\tzoomer.setValue(1000);\r\n        \t\tzoomer.setOrientation(SwingConstants.VERTICAL);\r\n        \t\tzoomer.addChangeListener(new ChangeListener() {\r\n        \t\t\tpublic void stateChanged(ChangeEvent e) {\r\n        \t\t\t\tif(isScrolling) {\r\n        \t\t\t\t\thPortion = getHPortion();\r\n        \t\t\t\t\tvPortion = getVPortion();\r\n        \t\t\t\t}\r\n        \t\t\t\tisScrolling = false;\r\n        \t\t\t\tint hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n        \t\t\t\tint vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\r\n        \t\t\t\tgetSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/1000 - 1));\r\n        \t\t\t\tgetSelectedSpace().setZoomerValue(zoomer.getValue());\r\n        \t\t\t\tgetSelectedSpace().repaint();\r\n        \t\t\t\tgetSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\r\n        \t\t\t\tgetSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \r\n        \t\t\t\tgetSelectedPane().addNotify();\r\n        \t\t\t\tgetSelectedPane().revalidate();\r\n        \t\t\t\tgetSelectedPane().setDoubleBuffered(true);\r\n        \t\t\t\tgetSelectedPane().getHorizontalScrollBar().revalidate();\r\n        \t\t\t\tgetSelectedPane().getVerticalScrollBar().revalidate();\r\n        \t\t\t\tgetSelectedSpace().repaint();\r\n        \t\t\t}\r\n        \t\t});\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\tGroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\r\n        \t\tgroupLayout.setHorizontalGroup(\r\n        \t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n        \t\t\t\t\t.addContainerGap()\r\n        \t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\r\n        \t\t\t\t\t.addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n        \t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\r\n        \t\t\t\t\t.addGap(28))\r\n        \t\t);\r\n        \t\tgroupLayout.setVerticalGroup(\r\n        \t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n        \t\t\t\t\t.addContainerGap()\r\n        \t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\r\n        \t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\r\n        \t\t\t\t\t.addGap(18))\r\n        \t\t);\r\n        \t\tgroupSettingManager(groupLayout);\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t}\r\n        \t\r\n        \r\n        \r\n        \tvoid groupSettingManager(GroupLayout groupLayout) {\r\n        \t\t\tfrmMyWorld.getContentPane().setLayout(groupLayout);\r\n        \t}\r\n        \r\n        \r\n        \tvoid newTab() {\r\n        \t\t//We first create a new workspace with the given dimentions \r\n        \t\tWorkspace workSpace = new Workspace(1295*4, 592*4);\r\n        \t\t//we need to focus on this new workspace for key listeners to work\r\n        \t\t//Our workspace sits inside a scroll pane\r\n        \t\tJScrollPane scrollPane = new JScrollPane(workSpace);\r\n        \t\tnumberOfTabbs++;\r\n        \t\t//our scroll pane sits inside a tabbed pane\r\n        \t\ttabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\r\n        \t\tworkSpace.requestFocus();\r\n        \t\ttabbedPane.setSelectedIndex(numberOfTabbs-1);\r\n        \t\tscrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mousePressed(MouseEvent e) {\r\n        \t\t\t\tisScrolling = true;\r\n        \t\t\t}\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n        \t\t});\r\n        \t\tscrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mousePressed(MouseEvent e) {\r\n        \t\t\t\tisScrolling = true;\r\n        \t\t\t}\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n        \t\t});\r\n        \t\t\r\n        \t\t\r\n        \t}\r\n        \t\r\n        \t\r\n        \tstatic Workspace getSelectedSpace() {\r\n        \t\treturn ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\r\n        \t}\r\n        \tJScrollPane getSelectedPane() {\r\n        \t\treturn (JScrollPane) tabbedPane.getSelectedComponent();\r\n        \t}\r\n        \tWorkspace getSpace(int i) {\r\n        \t\treturn ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\r\n        \t}\r\n        \tJScrollPane getPane(int i) {\r\n        \t\treturn (JScrollPane) tabbedPane.getComponent(i);\r\n        \t}\r\n        \t\r\n        \t\r\n        \t\r\n        \t static void setZoomerValue(int i) {\r\n        \t\tif(-1000 &lt;= i &amp;&amp; i &lt;= 1000)\r\n        \t\t\tzoomer.setValue(i);\r\n        \t}\r\n        \tint getZoomerValue() {\r\n        \t\treturn zoomer.getValue();\t\r\n        \t}\r\n        \t\r\n        \tpublic double getHPortion() {\r\n        \t\tint m = getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n        \t\tint v = getSelectedPane().getHorizontalScrollBar().getValue();\r\n        \t\tdouble a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount()/2;\r\n        \t\treturn (v + a)/m;\r\n        \t}\r\n        \tpublic double getVPortion() {\r\n        \t\tint m = getSelectedPane().getVerticalScrollBar().getMaximum();\r\n        \t\tint v = getSelectedPane().getVerticalScrollBar().getValue();\r\n        \t\tdouble a = getSelectedPane().getVerticalScrollBar().getVisibleAmount()/2;\r\n        \t\treturn (v +a)/m;\r\n        \t}\r\n        \tpublic int hVisible() {\r\n        \t\treturn getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\r\n        \t}\r\n        \tpublic int vVisible() {\r\n        \t\treturn getSelectedPane().getVerticalScrollBar().getVisibleAmount();\r\n        \t}\r\n        \r\n        \r\n        }\r\n    \r\n    \timport java.awt.Color; \r\n    \timport java.awt.Dimension;\r\n    \timport java.awt.Graphics;\r\n    \timport java.awt.Graphics2D;\r\n    \timport java.awt.LayoutManager;\r\n    import java.awt.event.KeyAdapter;\r\n    import java.awt.event.KeyEvent;\r\n    \timport java.awt.event.KeyListener;\r\n    \timport java.awt.event.MouseAdapter;\r\n    \timport java.awt.event.MouseEvent;\r\n    \timport java.awt.event.MouseMotionAdapter;\r\n    \r\n    \timport javax.swing.JPanel;\r\n    \r\n    \tpublic class Workspace extends JPanel implements KeyListener{\r\n    \t\t//we keep every landmass that will appear in the workspace stored in this array\r\n    \t\t\r\n    \t\tprivate static Color backGroundColor;\r\n    \t\tprivate static Color foreGroundColor;\r\n    \t\tprivate int zoomerValue;\r\n    \t\tprivate static double zoomFactor; \r\n    \t\tprivate static int width;\r\n    \t\tprivate static int height;\r\n    \r\n    \t\t/**\r\n    \t\t * \r\n    \t\t */\r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \t\t\r\n    \t\tpublic Workspace(int w, int h) {\r\n    \t\t\teventHandlers();\r\n    \t\t\tthis.setPreferredSize(new Dimension(w,h));\r\n    \t\t\t\r\n    \t\t\tbackGroundColor = Color.BLACK;\r\n    \t\t\tforeGroundColor = Color.WHITE;\r\n    \t\t\tthis.setBackground(backGroundColor);\r\n    \t\t\tzoomFactor = 1;\r\n    \t\t\twidth = w;\r\n    \t\t\theight = h;\r\n    \t\t\tzoomerValue = 1000;\r\n    \t\t\tthis.setFocusable(true);\r\n    \t\t\tthis.requestFocus();\r\n    \t\t\tthis.addKeyListener(this);\r\n    \t\t\t//this.requestFocusInWindow();\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t\t\r\n    \r\n    \r\n    \r\n    \r\n    \t\tpublic Workspace(LayoutManager layout) {\r\n    \t\t\tsuper(layout);\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\tpublic Workspace(boolean isDoubleBuffered) {\r\n    \t\t\tsuper(isDoubleBuffered);\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\tpublic Workspace(LayoutManager layout, boolean isDoubleBuffered) {\r\n    \t\t\tsuper(layout, isDoubleBuffered);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic double getZoomFactor() {\r\n    \t\t\treturn zoomFactor;\r\n    \t\t}\r\n    \t\tpublic void setZoomFactor(double z) {\r\n    \t\t\tzoomFactor = z;\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t\tpublic void adjustZoomFactor(int z) {\r\n    \t\t\tzoomFactor = Math.pow(2, z);\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\tpublic int getZoomerValue() {\r\n    \t\t\treturn zoomerValue;\r\n    \t\t}\r\n    \t\tpublic void setZoomerValue(int i) {\r\n    \t\t\tzoomerValue = i;\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Paint Function and supplement functions \r\n    \t\t */\r\n    \t\tpublic void paint(Graphics g)\r\n    \t\t{\r\n    \t\t\tGraphics2D g2= (Graphics2D) g;\r\n    \t\t\tzoom(g2);\r\n    \t\t\t//a for loop to run the same function on each of the landmasses to draw them all\t\r\n    \t\t\tfor(int i = 0; i &lt; 35; i++)\r\n    \t\t\t\tfor(int j = Math.floorMod(i, 2); j &lt; 16; j+=2) {\r\n    \t\t\t\t\tg2.setColor(foreGroundColor);\r\n    \t\t\t\t\tg2.fillRect(148*i, 148*j, 148, 148);\r\n    \t\t\t\t\tg2.setColor(Color.GREEN);\r\n    \t\t\t\t\tg2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;,148*i+66,148*j+72);\r\n    \t\t\t\t}\r\n    \t\t\tthis.setBackground(backGroundColor);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\tprivate void zoom(Graphics2D g) {\r\n    \t\t\t//if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\r\n    \t\t\tg.scale(zoomFactor,zoomFactor);\r\n    \t\t\tthis.setPreferredSize(new Dimension((int) Math.round(width*zoomFactor), (int) Math.round(height*zoomFactor)));\r\n    \t\t\tthis.validate();\r\n    \t\t\t//if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\r\n    \r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Any events that occur within the workspace happen here\r\n    \t\t */\r\n    \t\tprivate void eventHandlers() {\r\n    \t\t\tthis.addMouseListener(new MouseAdapter() {\t\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void mousePressed(MouseEvent e) {\r\n    \t\t\t\t\tforeGroundColor = Color.BLUE;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n    \t\t\t\t\tbackGroundColor = Color.GRAY;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void mouseReleased(MouseEvent e) {\r\n    \t\t\t\t\tforeGroundColor = Color.WHITE;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void mouseExited(MouseEvent e) {\r\n    \t\t\t\t\tbackGroundColor = Color.BLACK;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n    \t\t\t\t\tCartographer.setZoomerValue(zoomerValue);\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\t\r\n    \t\t\tthis.addMouseMotionListener(new MouseMotionAdapter() {\r\n    \t        \t@Override\r\n    \t        \tpublic void mouseMoved(MouseEvent e) {\r\n    \t            \t\trepaint();\r\n    \t        \t}\r\n    \t        \tpublic void mouseDragged(MouseEvent e) {\r\n    \t        \t\trepaint();\r\n    \t        \t}\r\n    \t        \r\n    \t        \tpublic void mouseWheelMoved(MouseEvent e) {\r\n    \t        \t\t\tCartographer.isScrolling = true;\r\n    \t        \t}\r\n    \t        });\r\n    \t\t\t\r\n    \t\t\tthis.addKeyListener(new KeyAdapter() {\r\n    \t\t\t\tpublic void keyPressed(KeyEvent e) {\r\n    \t\t\t\t\tforeGroundColor = Color.RED;\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\tpublic int mousePositionX() {\r\n    \t\t\treturn (int) Math.round(getMousePosition().x/zoomFactor);\r\n    \t\t}\r\n    \t\tpublic int mousePositionY() {\r\n    \t\t\treturn (int) Math.round(getMousePosition().y/zoomFactor);\r\n    \t\t}\r\n    \r\n    \r\n    \t\t@Override\r\n    \t\tpublic void keyTyped(KeyEvent e) {\r\n    \t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void keyPressed(KeyEvent e) {\r\n    \t\t\tswitch(e.getKeyCode()) {\r\n    \t\t\tcase 38 : if(zoomerValue &lt; 1000) { zoomerValue+=5; Cartographer.setZoomerValue(zoomerValue);} \r\n    \t\t\t\trepaint();\r\n    \t\t\tbreak;\r\n    \t\t\tcase 40 : if(zoomerValue &gt; -1000) {zoomerValue-=5; Cartographer.setZoomerValue(zoomerValue);} \r\n    \t\t\t\tSystem.out.println(zoomerValue);\r\n    \t\t\t\trepaint();\r\n    \t\t\tbreak;\r\n    \t\t\tdefault: repaint();\r\n    \t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void keyReleased(KeyEvent e) {\r\n    \t\t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"I&#39;m trying to add key listeners to a JPanel in Java","body":"<p>There's a lot to understand, so stick with me. I have a JPanel inside a JScrollPane, which is inside a JTabbedPane, which is inside a JFrame. Somewhere in that process, I'm losing the ability to add key listeners.</p>\n<p>I have this to set up my JFrame</p>\n<pre><code>public class Cartographer {\n\n    private final JFrame frmMyWorld = new JFrame();\n    /**\n     * set up our toolbar\n     */\n    private final JButton addTabb = new JButton(&quot;Create New Workspace&quot;);\n    \n    \n    //this is where I create the new tabbed pane\n    private static JTabbedPane tabbedPane;\n    private int numberOfTabbs;\n    public static boolean isScrolling;\n    private static JSlider zoomer;\n    \n    \n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    Cartographer window = new Cartographer();\n                    window.frmMyWorld.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n    public Cartographer() { \n        initialize();\n        createEvents();\n    }\n</code></pre>\n<p>I then initialize:</p>\n<pre><code>private void initialize() {\n        \n        frmMyWorld.setTitle(&quot;My World&quot;);\n        frmMyWorld.setBounds(0, 0, 1450, 805);\n        frmMyWorld.getContentPane().setBackground(new Color(100,100,100));\n        frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        tabbedPane = new JTabbedPane(JTabbedPane.TOP);\n        newTab();\n        isScrolling = true;\n\n        //this sets up my slider which I'm using to zoom\n        zoomer = new JSlider();\n        zoomer.setMinimum(-1000);\n        zoomer.setMaximum(1000);\n        zoomer.setValue(1000);\n        zoomer.setOrientation(SwingConstants.VERTICAL);\n        zoomer.addChangeListener(new ChangeListener() {\n            public void stateChanged(ChangeEvent e) {\n                if(isScrolling) {\n                    hPortion = getHPortion();\n                    vPortion = getVPortion();\n                }\n                isScrolling = false;\n                int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\n                int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\n                getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/250 - 4));\n                getSelectedSpace().setZoomerValue(zoomer.getValue());\n                getSelectedSpace().repaint();\n                getSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\n                getSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \n                getSelectedPane().addNotify();\n                getSelectedPane().revalidate();\n                getSelectedPane().setDoubleBuffered(true);\n                getSelectedPane().getHorizontalScrollBar().revalidate();\n                getSelectedPane().getVerticalScrollBar().revalidate();\n                getSelectedSpace().repaint();\n            }\n        });\n        \n        \n        \n        \n        \n        /**and using a group layout, we add a new tab to our JFrame\n                 * my original code was using buttons I'm just simplifying the code to make it                  .                */easier to read,that's why I'm using group layour     ,          \n        GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\n        groupLayout.setHorizontalGroup(\n            groupLayout.createParallelGroup(Alignment.LEADING)\n                .addGroup(groupLayout.createSequentialGroup()\n                    .addContainerGap()\n                    .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\n                    .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                    .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\n                    .addGap(28))\n        );\n        groupLayout.setVerticalGroup(\n            groupLayout.createParallelGroup(Alignment.LEADING)\n                .addGroup(groupLayout.createSequentialGroup()\n                    .addContainerGap()\n                    .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\n                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\n                    .addGap(18))\n        );\n        groupSettingManager(groupLayout);\n        \n        \n        \n    }\n</code></pre>\n<p>And the newTab() function is what we do when we create a new tab</p>\n<pre><code>void newTab() {\n        //We first create a new workspace with the given dimentions \n        Workspace workSpace = new Workspace(1295*256, 592*256);\n//request focus so we can add key listeners\n        workSpace.requestFocus();\n        //Our workspace sits inside a scroll pane\n        JScrollPane scrollPane = new JScrollPane(workSpace);\n        numberOfTabbs++;\n        //our scroll pane sits inside a tabbed pane\n        tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\n        tabbedPane.setSelectedIndex(numberOfTabbs-1);\n        scrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n            @Override\n            public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n        });\n        scrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n            @Override\n            public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n        });\n        \n        \n    }\n</code></pre>\n<p>As you may have noticed, we're requesting focus from the new workspace as soon as it's created, however, that doesn't seem to give it focus</p>\n<p>I've tried adding key listeners to the workspace, like so</p>\n<pre><code>public class Workspace extends JPanel implements KeyListener{\n        //we keep every landmass that will appear in the workspace stored in this array\n        public ArrayList&lt;Node&gt; protoLandmass = new ArrayList&lt;Node&gt;();\n        \n        private static Color backGroundColor;\n        private int zoomerValue;\n        private static double zoomFactor; \n        private static int width;\n        private static int height;\n        private static boolean zooming = false;\n\n        /**\n         * \n         */\n        private static final long serialVersionUID = 1L;\n        \n        public Workspace(int w, int h) {\n            eventHandlers();\n            this.setPreferredSize(new Dimension(w,h));\n            \n            backGroundColor = new Color(0,120,255);\n            this.setBackground(backGroundColor);\n            zoomFactor = 1;\n            width = w;\n            height = h;\n            zoomerValue = 1000;\n            this.setFocusable(true);\n                        //I've also tried to request focus here, that didn't work either\n            //this.requestFocus();\n            this.addKeyListener(this);\n            //this.requestFocusInWindow();\n            repaint();\n        }\n\n                ...\n\n                @Override\n        public void keyTyped(KeyEvent e) {\n            ... \n        }\n        @Override\n        public void keyPressed(KeyEvent e) {\n            ...\n            }   \n        }\n        @Override\n        public void keyReleased(KeyEvent e) {\n            ...\n        }\n</code></pre>\n<p>The key listeners here don't work, even though I have tried requesting focus in multiple places</p>\n<p>The mouse listeners seem to work when I create events here:</p>\n<pre><code>private void eventHandlers() {\n            this.addMouseListener(new MouseAdapter() {  \n                @Override\n                public void mousePressed(MouseEvent e) {\n                        ...\n                    repaint();\n                }\n                \n                public void mouseClicked(MouseEvent e) {\n                                ...\n                }\n                public void mouseReleased(MouseEvent e) {\n                                ...\n                }\n                public void mouseExited(MouseEvent e) {\n                                        ...\n                    repaint();\n                }\n                public void mouseEntered(MouseEvent e) {\n                    ...\n                    repaint();\n                }\n            });\n            \n            this.addMouseMotionListener(new MouseMotionAdapter() {\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                        repaint();\n                }\n                public void mouseDragged(MouseEvent e) {\n                    repaint();\n                }\n            \n                public void mouseWheelMoved(MouseEvent e) {\n                                       // this one doesn't work either\n                        Cartographer.isScrolling = true;\n                }\n            });\n                \n                this.addKeyListener(new KeyAdapter(){\n\n               @Override\n        public void keyTyped(KeyEvent e) {\n            ...\n            \n        }\n                @override\n        public void keyPressed(KeyEvent e) {\n            ...\n            }\n                \n                \n            \n        }\n                @override\n        public void keyReleased(KeyEvent e) {\n            ... \n        }       \n            \n    }\n</code></pre>\n<p>I tried adding key listeners here, but they didn't work either. I never tried having key listeners in both places at the same time, I'm just showing all the places they have been to make it easier for you.</p>\n<p>Minimal reproducible example:</p>\n<pre><code>  import java.awt.Color;  \n    import java.awt.EventQueue;\n    import java.awt.event.MouseEvent;\n    import java.awt.event.MouseListener;\n    \n    import javax.swing.JFrame;\n    import javax.swing.JScrollPane;\n    import javax.swing.JTabbedPane;\n    import javax.swing.GroupLayout;\n    import javax.swing.GroupLayout.Alignment;\n    import javax.swing.LayoutStyle.ComponentPlacement;\n    import javax.swing.JSlider;\n    import javax.swing.SwingConstants;\n    import javax.swing.event.ChangeListener;\n    import javax.swing.event.ChangeEvent;\n    \n    \n    \n    public class Cartographer {\n    \n        private final JFrame frmMyWorld = new JFrame();\n        /**\n         * set up our toolbar\n         */\n        double hPortion = 0;\n        double vPortion = 0;\n        \n        \n        //the space that will contain everything that is drawn\n        private static JTabbedPane tabbedPane;\n        private int numberOfTabbs;\n        public static boolean isScrolling;\n        private static JSlider zoomer;\n        \n        \n        public static void main(String[] args) {\n            EventQueue.invokeLater(new Runnable() {\n                public void run() {\n                    try {\n                        Cartographer window = new Cartographer();\n                        window.frmMyWorld.setVisible(true);\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n                }\n            });\n        }\n    \n        /**\n         * Create the application.\n         */\n        public Cartographer() { \n            initialize();\n        }\n    \n        /**\n         * Initialise the contents of the frame.\n         */\n        private void initialize() {\n            \n            frmMyWorld.setTitle(&quot;My World&quot;);\n            frmMyWorld.setBounds(0, 0, 1450, 805);\n            frmMyWorld.getContentPane().setBackground(new Color(100,100,100));\n            frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            \n            tabbedPane = new JTabbedPane(JTabbedPane.TOP);\n            newTab();\n            isScrolling = true;\n    \n            /**\n             * give everything its position in the window, we're using a group layout\n             */\n            zoomer = new JSlider();\n            zoomer.setMinimum(-1000);\n            zoomer.setMaximum(1000);\n            zoomer.setValue(1000);\n            zoomer.setOrientation(SwingConstants.VERTICAL);\n            zoomer.addChangeListener(new ChangeListener() {\n                public void stateChanged(ChangeEvent e) {\n                    if(isScrolling) {\n                        hPortion = getHPortion();\n                        vPortion = getVPortion();\n                    }\n                    isScrolling = false;\n                    int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\n                    int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\n                    getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/1000 - 1));\n                    getSelectedSpace().setZoomerValue(zoomer.getValue());\n                    getSelectedSpace().repaint();\n                    getSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\n                    getSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \n                    getSelectedPane().addNotify();\n                    getSelectedPane().revalidate();\n                    getSelectedPane().setDoubleBuffered(true);\n                    getSelectedPane().getHorizontalScrollBar().revalidate();\n                    getSelectedPane().getVerticalScrollBar().revalidate();\n                    getSelectedSpace().repaint();\n                }\n            });\n            \n            \n            \n            \n            \n            \n            GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\n            groupLayout.setHorizontalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                    .addGroup(groupLayout.createSequentialGroup()\n                        .addContainerGap()\n                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\n                        .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                            .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\n                        .addGap(28))\n            );\n            groupLayout.setVerticalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                    .addGroup(groupLayout.createSequentialGroup()\n                        .addContainerGap()\n                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                            .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\n                            .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\n                        .addGap(18))\n            );\n            groupSettingManager(groupLayout);\n            \n            \n            \n        }\n        \n    \n    \n        void groupSettingManager(GroupLayout groupLayout) {\n                frmMyWorld.getContentPane().setLayout(groupLayout);\n        }\n    \n    \n        void newTab() {\n            //We first create a new workspace with the given dimentions \n            Workspace workSpace = new Workspace(1295*4, 592*4);\n            //we need to focus on this new workspace for key listeners to work\n            //Our workspace sits inside a scroll pane\n            JScrollPane scrollPane = new JScrollPane(workSpace);\n            numberOfTabbs++;\n            //our scroll pane sits inside a tabbed pane\n            tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\n            workSpace.requestFocus();\n            tabbedPane.setSelectedIndex(numberOfTabbs-1);\n            scrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\n                @Override\n                public void mousePressed(MouseEvent e) {\n                    isScrolling = true;\n                }\n                @Override\n                public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n            });\n            scrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\n                @Override\n                public void mousePressed(MouseEvent e) {\n                    isScrolling = true;\n                }\n                @Override\n                public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n            });\n            \n            \n        }\n        \n        \n        static Workspace getSelectedSpace() {\n            return ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\n        }\n        JScrollPane getSelectedPane() {\n            return (JScrollPane) tabbedPane.getSelectedComponent();\n        }\n        Workspace getSpace(int i) {\n            return ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\n        }\n        JScrollPane getPane(int i) {\n            return (JScrollPane) tabbedPane.getComponent(i);\n        }\n        \n        \n        \n         static void setZoomerValue(int i) {\n            if(-1000 &lt;= i &amp;&amp; i &lt;= 1000)\n                zoomer.setValue(i);\n        }\n        int getZoomerValue() {\n            return zoomer.getValue();   \n        }\n        \n        public double getHPortion() {\n            int m = getSelectedPane().getHorizontalScrollBar().getMaximum();\n            int v = getSelectedPane().getHorizontalScrollBar().getValue();\n            double a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount()/2;\n            return (v + a)/m;\n        }\n        public double getVPortion() {\n            int m = getSelectedPane().getVerticalScrollBar().getMaximum();\n            int v = getSelectedPane().getVerticalScrollBar().getValue();\n            double a = getSelectedPane().getVerticalScrollBar().getVisibleAmount()/2;\n            return (v +a)/m;\n        }\n        public int hVisible() {\n            return getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\n        }\n        public int vVisible() {\n            return getSelectedPane().getVerticalScrollBar().getVisibleAmount();\n        }\n    \n    \n    }\n\n    import java.awt.Color; \n    import java.awt.Dimension;\n    import java.awt.Graphics;\n    import java.awt.Graphics2D;\n    import java.awt.LayoutManager;\nimport java.awt.event.KeyAdapter;\nimport java.awt.event.KeyEvent;\n    import java.awt.event.KeyListener;\n    import java.awt.event.MouseAdapter;\n    import java.awt.event.MouseEvent;\n    import java.awt.event.MouseMotionAdapter;\n\n    import javax.swing.JPanel;\n\n    public class Workspace extends JPanel implements KeyListener{\n        //we keep every landmass that will appear in the workspace stored in this array\n        \n        private static Color backGroundColor;\n        private static Color foreGroundColor;\n        private int zoomerValue;\n        private static double zoomFactor; \n        private static int width;\n        private static int height;\n\n        /**\n         * \n         */\n        private static final long serialVersionUID = 1L;\n        \n        public Workspace(int w, int h) {\n            eventHandlers();\n            this.setPreferredSize(new Dimension(w,h));\n            \n            backGroundColor = Color.BLACK;\n            foreGroundColor = Color.WHITE;\n            this.setBackground(backGroundColor);\n            zoomFactor = 1;\n            width = w;\n            height = h;\n            zoomerValue = 1000;\n            this.setFocusable(true);\n            this.requestFocus();\n            this.addKeyListener(this);\n            //this.requestFocusInWindow();\n            repaint();\n        }\n        \n\n\n\n\n        public Workspace(LayoutManager layout) {\n            super(layout);\n            \n        }\n\n        public Workspace(boolean isDoubleBuffered) {\n            super(isDoubleBuffered);\n            \n        }\n\n        public Workspace(LayoutManager layout, boolean isDoubleBuffered) {\n            super(layout, isDoubleBuffered);\n            \n        }\n        \n        public double getZoomFactor() {\n            return zoomFactor;\n        }\n        public void setZoomFactor(double z) {\n            zoomFactor = z;\n            repaint();\n        }\n        public void adjustZoomFactor(int z) {\n            zoomFactor = Math.pow(2, z);\n            repaint();\n        }\n        \n        \n        public int getZoomerValue() {\n            return zoomerValue;\n        }\n        public void setZoomerValue(int i) {\n            zoomerValue = i;\n        }\n        \n        \n        \n        \n        \n        \n        \n        /**\n         * Paint Function and supplement functions \n         */\n        public void paint(Graphics g)\n        {\n            Graphics2D g2= (Graphics2D) g;\n            zoom(g2);\n            //a for loop to run the same function on each of the landmasses to draw them all    \n            for(int i = 0; i &lt; 35; i++)\n                for(int j = Math.floorMod(i, 2); j &lt; 16; j+=2) {\n                    g2.setColor(foreGroundColor);\n                    g2.fillRect(148*i, 148*j, 148, 148);\n                    g2.setColor(Color.GREEN);\n                    g2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;,148*i+66,148*j+72);\n                }\n            this.setBackground(backGroundColor);\n            \n        }\n        private void zoom(Graphics2D g) {\n            //if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\n            g.scale(zoomFactor,zoomFactor);\n            this.setPreferredSize(new Dimension((int) Math.round(width*zoomFactor), (int) Math.round(height*zoomFactor)));\n            this.validate();\n            //if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\n\n        }\n        \n        \n        \n        /**\n         * Any events that occur within the workspace happen here\n         */\n        private void eventHandlers() {\n            this.addMouseListener(new MouseAdapter() {  \n                @Override\n                public void mousePressed(MouseEvent e) {\n                    foreGroundColor = Color.BLUE;\n                    repaint();\n                }\n                \n                public void mouseClicked(MouseEvent e) {\n                    backGroundColor = Color.GRAY;\n                    repaint();\n                }\n                public void mouseReleased(MouseEvent e) {\n                    foreGroundColor = Color.WHITE;\n                    repaint();\n                }\n                public void mouseExited(MouseEvent e) {\n                    backGroundColor = Color.BLACK;\n                    repaint();\n                }\n                public void mouseEntered(MouseEvent e) {\n                    Cartographer.setZoomerValue(zoomerValue);\n                    repaint();\n                }\n            });\n            \n            this.addMouseMotionListener(new MouseMotionAdapter() {\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                        repaint();\n                }\n                public void mouseDragged(MouseEvent e) {\n                    repaint();\n                }\n            \n                public void mouseWheelMoved(MouseEvent e) {\n                        Cartographer.isScrolling = true;\n                }\n            });\n            \n            this.addKeyListener(new KeyAdapter() {\n                public void keyPressed(KeyEvent e) {\n                    foreGroundColor = Color.RED;\n                }\n            });\n            \n            \n        }\n        \n        \n        public int mousePositionX() {\n            return (int) Math.round(getMousePosition().x/zoomFactor);\n        }\n        public int mousePositionY() {\n            return (int) Math.round(getMousePosition().y/zoomFactor);\n        }\n\n\n        @Override\n        public void keyTyped(KeyEvent e) {\n            // TODO Auto-generated method stub\n            \n        }\n\n        @Override\n        public void keyPressed(KeyEvent e) {\n            switch(e.getKeyCode()) {\n            case 38 : if(zoomerValue &lt; 1000) { zoomerValue+=5; Cartographer.setZoomerValue(zoomerValue);} \n                repaint();\n            break;\n            case 40 : if(zoomerValue &gt; -1000) {zoomerValue-=5; Cartographer.setZoomerValue(zoomerValue);} \n                System.out.println(zoomerValue);\n                repaint();\n            break;\n            default: repaint();\n            }\n                \n                \n            \n        }\n\n        @Override\n        public void keyReleased(KeyEvent e) {\n                \n        }\n        \n        \n        \n\n}\n</code></pre>\n"},{"tags":["java","ssl","sslhandshakeexception","ssl-handshake"],"comments":[{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":1,"creation_date":1683223137,"post_id":76176047,"comment_id":134337658,"body_markdown":"Strange. Seems as if the server does not support the TLS protocols that are sent int the CH. It seems to be a server issue. Check it&#39;s configuration for what protocols and cipher suites it supports.","body":"Strange. Seems as if the server does not support the TLS protocols that are sent int the CH. It seems to be a server issue. Check it&#39;s configuration for what protocols and cipher suites it supports."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1683223384,"post_id":76176047,"comment_id":134337716,"body_markdown":"Have you troubleshot, e.g., https://dzone.com/articles/troubleshooting-javaxnetsslsslhandshakeexception-r","body":"Have you troubleshot, e.g., <a href=\"https://dzone.com/articles/troubleshooting-javaxnetsslsslhandshakeexception-r\" rel=\"nofollow noreferrer\">dzone.com/articles/&hellip;</a>"},{"owner":{"account_id":3829506,"reputation":197,"user_id":3175474,"display_name":"Jeff C Johnson"},"score":0,"creation_date":1683224193,"post_id":76176047,"comment_id":134337877,"body_markdown":"Ugh, this is embarrasing, I thought I had changed it to .gov and tested it but I was still looking at the .com, which does indeed work.  So, PEBKAC, problem exists between keyboard and chair.  Sorry for the bother and thanks for the help!","body":"Ugh, this is embarrasing, I thought I had changed it to .gov and tested it but I was still looking at the .com, which does indeed work.  So, PEBKAC, problem exists between keyboard and chair.  Sorry for the bother and thanks for the help!"}],"answers":[{"tags":[],"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683223563,"creation_date":1683223563,"answer_id":76176181,"question_id":76176047,"body_markdown":"TL;DR: use .gov not .com in your Java code. The .com site does not even work with HTTPS in the browser.\r\n\r\n&gt; The site works in browsers so their admins don&#39;t see a problem and won&#39;t help.\r\n\r\nIt does not work in the browser. When trying to access `https://www.hudhomestore.com` in a fresh browser profile (without any cached information) it shows:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut, `https://www.hudhomestore.gov` (.gov not .com) works and an insecure request to `http://www.hudhomestore.com` (note: http instead of https) works too. The latter returns a permanent redirect (code 301) to (the working) `https://www.hudhomestore.gov`. Since a permanent redirect is cached by the browser it might be that a previous access to (the now non-working) `https://www.hudhomestore.com` also returned the same 301 redirect to the gov site and that when you try to access the non-working site it will use the redirect target from the cache and not actually visit the entered URL first.\r\n\r\n  [1]: https://i.stack.imgur.com/gGj5k.png","title":"Why can&#39;t Java 11 connect to web site that browsers can?","body":"<p>TL;DR: use .gov not .com in your Java code. The .com site does not even work with HTTPS in the browser.</p>\n<blockquote>\n<p>The site works in browsers so their admins don't see a problem and won't help.</p>\n</blockquote>\n<p>It does not work in the browser. When trying to access <code>https://www.hudhomestore.com</code> in a fresh browser profile (without any cached information) it shows:</p>\n<p><a href=\"https://i.stack.imgur.com/gGj5k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gGj5k.png\" alt=\"enter image description here\" /></a></p>\n<p>But, <code>https://www.hudhomestore.gov</code> (.gov not .com) works and an insecure request to <code>http://www.hudhomestore.com</code> (note: http instead of https) works too. The latter returns a permanent redirect (code 301) to (the working) <code>https://www.hudhomestore.gov</code>. Since a permanent redirect is cached by the browser it might be that a previous access to (the now non-working) <code>https://www.hudhomestore.com</code> also returned the same 301 redirect to the gov site and that when you try to access the non-working site it will use the redirect target from the cache and not actually visit the entered URL first.</p>\n"}],"owner":{"account_id":3829506,"reputation":197,"user_id":3175474,"display_name":"Jeff C Johnson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76176181,"answer_count":1,"score":0,"last_activity_date":1683223902,"creation_date":1683222470,"question_id":76176047,"body_markdown":"I&#39;m trying to connect connect to a website that recently changed their TLS configuration.  It no longer works from Java 11 (nor 17).  It fails at the handshake but the error message doesn&#39;t say exactly what went wrong.  The site works in browsers so their admins don&#39;t see a problem and won&#39;t help.\r\n\r\nIs there anything I can do on the Java side to fix this?\r\n\r\n```\r\nimport java.net.URL\r\n\r\n// nmap --script ssl-enum-ciphers -p 443 www.hudhomestore.gov\r\n\r\nfun main(args: Array&lt;String&gt;) {\r\n    // System.setProperty(&quot;javax.net.debug&quot;, &quot;all&quot;)\r\n    System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl:handshake&quot;)\r\n    URL(&quot;https://www.hudhomestore.com/Home/Index.aspx&quot;)\r\n        .openStream()\r\n        .use { println(it.readBytes().size) }\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.036 EDT|SSLCipher.java:464|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = 137438953472\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.319 EDT|Utilities.java:73|the previous server name in SNI (type=host_name (0), value=www.hudhomestore.com) was replaced with (type=host_name (0), value=www.hudhomestore.com)\r\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.371 EDT|SignatureScheme.java:295|Signature algorithm, ed25519, is not supported by the underlying providers\r\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.372 EDT|SignatureScheme.java:295|Signature algorithm, ed448, is not supported by the underlying providers\r\njavax.net.ssl|INFO|01|main|2023-05-04 13:32:40.382 EDT|AlpnExtension.java:178|No available application protocols\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.382 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: application_layer_protocol_negotiation\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.384 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: cookie\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.457 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: renegotiation_info\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|PreSharedKeyExtension.java:633|No session to resume.\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: pre_shared_key\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.468 EDT|ClientHello.java:642|Produced ClientHello handshake message (\r\n&quot;ClientHello&quot;: {\r\n  &quot;client version&quot;      : &quot;TLSv1.2&quot;,\r\n  &quot;random&quot;              : &quot;90 C5 39 A6 86 30 CF 64 9A 11 07 3E D1 7E A9 6E CD 61 9C 29 0D E7 64 C3 EA 1F 14 88 F6 01 30 20&quot;,\r\n  &quot;session id&quot;          : &quot;87 AC EA CD C3 8D E5 83 30 15 9F 64 28 AE 8A F3 BC 9E A3 23 81 A1 29 4B 41 FE D5 E7 0C BE 07 2A&quot;,\r\n  &quot;cipher suites&quot;       : &quot;[TLS_AES_256_GCM_SHA384(0x1302), TLS_AES_128_GCM_SHA256(0x1301), TLS_CHACHA20_POLY1305_SHA256(0x1303), TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384(0xC02C), TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256(0xC02B), TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA9), TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384(0xC030), TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA8), TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256(0xC02F), TLS_DHE_RSA_WITH_AES_256_GCM_SHA384(0x009F), TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCAA), TLS_DHE_DSS_WITH_AES_256_GCM_SHA384(0x00A3), TLS_DHE_RSA_WITH_AES_128_GCM_SHA256(0x009E), TLS_DHE_DSS_WITH_AES_128_GCM_SHA256(0x00A2), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384(0xC024), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384(0xC028), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256(0xC023), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256(0xC027), TLS_DHE_RSA_WITH_AES_256_CBC_SHA256(0x006B), TLS_DHE_DSS_WITH_AES_256_CBC_SHA256(0x006A), TLS_DHE_RSA_WITH_AES_128_CBC_SHA256(0x0067), TLS_DHE_DSS_WITH_AES_128_CBC_SHA256(0x0040), TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384(0xC02E), TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384(0xC032), TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256(0xC02D), TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256(0xC031), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384(0xC026), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384(0xC02A), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256(0xC025), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256(0xC029), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_GCM_SHA384(0x009D), TLS_RSA_WITH_AES_128_GCM_SHA256(0x009C), TLS_RSA_WITH_AES_256_CBC_SHA256(0x003D), TLS_RSA_WITH_AES_128_CBC_SHA256(0x003C), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\r\n  &quot;compression methods&quot; : &quot;00&quot;,\r\n  &quot;extensions&quot;          : [\r\n    &quot;server_name (0)&quot;: {\r\n      type=host_name (0), value=www.hudhomestore.com\r\n    },\r\n    &quot;status_request (5)&quot;: {\r\n      &quot;certificate status type&quot;: ocsp\r\n      &quot;OCSP status request&quot;: {\r\n        &quot;responder_id&quot;: &lt;empty&gt;\r\n        &quot;request extensions&quot;: {\r\n          &lt;empty&gt;\r\n        }\r\n      }\r\n    },\r\n    &quot;supported_groups (10)&quot;: {\r\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\r\n    },\r\n    &quot;ec_point_formats (11)&quot;: {\r\n      &quot;formats&quot;: [uncompressed]\r\n    },\r\n    &quot;signature_algorithms (13)&quot;: {\r\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\r\n    },\r\n    &quot;signature_algorithms_cert (50)&quot;: {\r\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\r\n    },\r\n    &quot;status_request_v2 (17)&quot;: {\r\n      &quot;cert status request&quot;: {\r\n        &quot;certificate status type&quot;: ocsp_multi\r\n        &quot;OCSP status request&quot;: {\r\n          &quot;responder_id&quot;: &lt;empty&gt;\r\n          &quot;request extensions&quot;: {\r\n            &lt;empty&gt;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    &quot;extended_master_secret (23)&quot;: {\r\n      &lt;empty&gt;\r\n    },\r\n    &quot;supported_versions (43)&quot;: {\r\n      &quot;versions&quot;: [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1]\r\n    },\r\n    &quot;psk_key_exchange_modes (45)&quot;: {\r\n      &quot;ke_modes&quot;: [psk_dhe_ke]\r\n    },\r\n    &quot;key_share (51)&quot;: {\r\n      &quot;client_shares&quot;: [  \r\n        {\r\n          &quot;named group&quot;: x25519\r\n          &quot;key_exchange&quot;: {\r\n            0000: 69 7F BD A5 0C 85 0B 8C   21 09 1E 6E 6B 98 57 EF  i.......!..nk.W.\r\n            0010: 26 3A 77 BE 0B 67 71 5C   9E 02 76 82 38 D2 56 00  &amp;:w..gq\\..v.8.V.\r\n          }\r\n        },\r\n      ]\r\n    }\r\n  ]\r\n}\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.511 EDT|Alert.java:238|Received alert message (\r\n&quot;Alert&quot;: {\r\n  &quot;level&quot;      : &quot;fatal&quot;,\r\n  &quot;description&quot;: &quot;handshake_failure&quot;\r\n}\r\n)\r\njavax.net.ssl|ERROR|01|main|2023-05-04 13:32:40.514 EDT|TransportContext.java:352|Fatal (HANDSHAKE_FAILURE): Received fatal alert: handshake_failure (\r\n&quot;throwable&quot; : {\r\n  javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n  \tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n  \tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\r\n  \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\r\n  \tat java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\r\n  \tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\r\n  \tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\r\n  \tat java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\r\n  \tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\r\n  \tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\r\n  \tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\r\n  \tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\r\n  \tat java.base/java.net.URL.openStream(URL.java:1165)\r\n  \tat TLSTestKt.main(TLSTest.kt:7)}\r\n\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1737|close the underlying socket\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1756|close the SSL connection (initiative)\r\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\r\n\tat java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\r\n\tat java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\r\n\tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\r\n\tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\r\n\tat java.base/java.net.URL.openStream(URL.java:1165)\r\n\tat TLSTestKt.main(TLSTest.kt:7)\r\n\r\nProcess finished with exit code 1\r\n```","title":"Why can&#39;t Java 11 connect to web site that browsers can?","body":"<p>I'm trying to connect connect to a website that recently changed their TLS configuration.  It no longer works from Java 11 (nor 17).  It fails at the handshake but the error message doesn't say exactly what went wrong.  The site works in browsers so their admins don't see a problem and won't help.</p>\n<p>Is there anything I can do on the Java side to fix this?</p>\n<pre><code>import java.net.URL\n\n// nmap --script ssl-enum-ciphers -p 443 www.hudhomestore.gov\n\nfun main(args: Array&lt;String&gt;) {\n    // System.setProperty(&quot;javax.net.debug&quot;, &quot;all&quot;)\n    System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl:handshake&quot;)\n    URL(&quot;https://www.hudhomestore.com/Home/Index.aspx&quot;)\n        .openStream()\n        .use { println(it.readBytes().size) }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>javax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.036 EDT|SSLCipher.java:464|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = 137438953472\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.319 EDT|Utilities.java:73|the previous server name in SNI (type=host_name (0), value=www.hudhomestore.com) was replaced with (type=host_name (0), value=www.hudhomestore.com)\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.371 EDT|SignatureScheme.java:295|Signature algorithm, ed25519, is not supported by the underlying providers\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.372 EDT|SignatureScheme.java:295|Signature algorithm, ed448, is not supported by the underlying providers\njavax.net.ssl|INFO|01|main|2023-05-04 13:32:40.382 EDT|AlpnExtension.java:178|No available application protocols\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.382 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: application_layer_protocol_negotiation\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.384 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: cookie\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.457 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: renegotiation_info\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|PreSharedKeyExtension.java:633|No session to resume.\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: pre_shared_key\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.468 EDT|ClientHello.java:642|Produced ClientHello handshake message (\n&quot;ClientHello&quot;: {\n  &quot;client version&quot;      : &quot;TLSv1.2&quot;,\n  &quot;random&quot;              : &quot;90 C5 39 A6 86 30 CF 64 9A 11 07 3E D1 7E A9 6E CD 61 9C 29 0D E7 64 C3 EA 1F 14 88 F6 01 30 20&quot;,\n  &quot;session id&quot;          : &quot;87 AC EA CD C3 8D E5 83 30 15 9F 64 28 AE 8A F3 BC 9E A3 23 81 A1 29 4B 41 FE D5 E7 0C BE 07 2A&quot;,\n  &quot;cipher suites&quot;       : &quot;[TLS_AES_256_GCM_SHA384(0x1302), TLS_AES_128_GCM_SHA256(0x1301), TLS_CHACHA20_POLY1305_SHA256(0x1303), TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384(0xC02C), TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256(0xC02B), TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA9), TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384(0xC030), TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA8), TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256(0xC02F), TLS_DHE_RSA_WITH_AES_256_GCM_SHA384(0x009F), TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCAA), TLS_DHE_DSS_WITH_AES_256_GCM_SHA384(0x00A3), TLS_DHE_RSA_WITH_AES_128_GCM_SHA256(0x009E), TLS_DHE_DSS_WITH_AES_128_GCM_SHA256(0x00A2), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384(0xC024), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384(0xC028), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256(0xC023), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256(0xC027), TLS_DHE_RSA_WITH_AES_256_CBC_SHA256(0x006B), TLS_DHE_DSS_WITH_AES_256_CBC_SHA256(0x006A), TLS_DHE_RSA_WITH_AES_128_CBC_SHA256(0x0067), TLS_DHE_DSS_WITH_AES_128_CBC_SHA256(0x0040), TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384(0xC02E), TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384(0xC032), TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256(0xC02D), TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256(0xC031), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384(0xC026), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384(0xC02A), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256(0xC025), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256(0xC029), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_GCM_SHA384(0x009D), TLS_RSA_WITH_AES_128_GCM_SHA256(0x009C), TLS_RSA_WITH_AES_256_CBC_SHA256(0x003D), TLS_RSA_WITH_AES_128_CBC_SHA256(0x003C), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\n  &quot;compression methods&quot; : &quot;00&quot;,\n  &quot;extensions&quot;          : [\n    &quot;server_name (0)&quot;: {\n      type=host_name (0), value=www.hudhomestore.com\n    },\n    &quot;status_request (5)&quot;: {\n      &quot;certificate status type&quot;: ocsp\n      &quot;OCSP status request&quot;: {\n        &quot;responder_id&quot;: &lt;empty&gt;\n        &quot;request extensions&quot;: {\n          &lt;empty&gt;\n        }\n      }\n    },\n    &quot;supported_groups (10)&quot;: {\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\n    },\n    &quot;ec_point_formats (11)&quot;: {\n      &quot;formats&quot;: [uncompressed]\n    },\n    &quot;signature_algorithms (13)&quot;: {\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\n    },\n    &quot;signature_algorithms_cert (50)&quot;: {\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\n    },\n    &quot;status_request_v2 (17)&quot;: {\n      &quot;cert status request&quot;: {\n        &quot;certificate status type&quot;: ocsp_multi\n        &quot;OCSP status request&quot;: {\n          &quot;responder_id&quot;: &lt;empty&gt;\n          &quot;request extensions&quot;: {\n            &lt;empty&gt;\n          }\n        }\n      }\n    },\n    &quot;extended_master_secret (23)&quot;: {\n      &lt;empty&gt;\n    },\n    &quot;supported_versions (43)&quot;: {\n      &quot;versions&quot;: [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1]\n    },\n    &quot;psk_key_exchange_modes (45)&quot;: {\n      &quot;ke_modes&quot;: [psk_dhe_ke]\n    },\n    &quot;key_share (51)&quot;: {\n      &quot;client_shares&quot;: [  \n        {\n          &quot;named group&quot;: x25519\n          &quot;key_exchange&quot;: {\n            0000: 69 7F BD A5 0C 85 0B 8C   21 09 1E 6E 6B 98 57 EF  i.......!..nk.W.\n            0010: 26 3A 77 BE 0B 67 71 5C   9E 02 76 82 38 D2 56 00  &amp;:w..gq\\..v.8.V.\n          }\n        },\n      ]\n    }\n  ]\n}\n)\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.511 EDT|Alert.java:238|Received alert message (\n&quot;Alert&quot;: {\n  &quot;level&quot;      : &quot;fatal&quot;,\n  &quot;description&quot;: &quot;handshake_failure&quot;\n}\n)\njavax.net.ssl|ERROR|01|main|2023-05-04 13:32:40.514 EDT|TransportContext.java:352|Fatal (HANDSHAKE_FAILURE): Received fatal alert: handshake_failure (\n&quot;throwable&quot; : {\n  javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\n    at java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\n    at java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\n    at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\n    at java.base/java.net.URL.openStream(URL.java:1165)\n    at TLSTestKt.main(TLSTest.kt:7)}\n\n)\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1737|close the underlying socket\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1756|close the SSL connection (initiative)\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\n    at java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\n    at java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\n    at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\n    at java.base/java.net.URL.openStream(URL.java:1165)\n    at TLSTestKt.main(TLSTest.kt:7)\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","android","spring","spring-boot","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":26043625,"reputation":61,"user_id":19747944,"display_name":"Amit Bhatiwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683223280,"creation_date":1683223280,"answer_id":76176149,"question_id":76171312,"body_markdown":"It was a bucket Name issue due to this code \r\n\r\n    String uri = request.getRequestURI();\r\n    String uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\r\n    String bucket = uriParts[0];\r\n    String key = uriParts[1];\r\n\r\n,need to make sure bucket name is key is proper before accessing it \r\n\r\n ","title":"Getting Wrong bucket region error while streaming video in spring boot with client android","body":"<p>It was a bucket Name issue due to this code</p>\n<pre><code>String uri = request.getRequestURI();\nString uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\nString bucket = uriParts[0];\nString key = uriParts[1];\n</code></pre>\n<p>,need to make sure bucket name is key is proper before accessing it</p>\n"}],"owner":{"account_id":26043625,"reputation":61,"user_id":19747944,"display_name":"Amit Bhatiwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683223280,"creation_date":1683190505,"question_id":76171312,"body_markdown":"I am trying to create Video streaming app with backend in spring boot. I have created two apis for downloading video file and streaming video file.\r\n\r\nFor downloading video file  \r\n\r\n    @PostMapping(&quot;/api/v1/downloadVideoAWS&quot;)\r\n    public ResponseEntity&lt;ByteArrayResource&gt; downloadFile(@RequestBody FileSnapshot fileSnapshot) {\r\n        byte[] data = fileSnapshotService.downloadVideoAWS(fileSnapshot);\r\n        ByteArrayResource resource = new ByteArrayResource(data);\r\n        return ResponseEntity.ok().contentLength(data.length)\r\n                .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\r\n                .header(&quot;Content-disposition&quot;, &quot;attachement; filename=\\&quot;&quot; + fileSnapshot.getFileName() + &quot;\\&quot;&quot;)\r\n                .body(resource);\r\n    }\r\n\r\nits client request in android retrofit\r\n\r\n    @HTTP(method = &quot;POST&quot;, hasBody = true,path = &quot;/api/v1/downloadVideoAWS&quot;)\r\n    Call &lt;ResponseBody&gt; getVideoFile(@Body FileSnapshot fileSnapshot);\r\n\r\n\r\n\r\nfor streaming video file \r\n\r\n\r\n    @GetMapping(value = &quot;/api/v1/streamVideo/**&quot;, produces = { MediaType.APPLICATION_OCTET_STREAM_VALUE })\r\n    public ResponseEntity&lt;StreamingResponseBody&gt; getObject(HttpServletRequest request) {\r\n        try {\r\n\r\n            String uri = request.getRequestURI();\r\n            String uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\r\n            String bucket = uriParts[0];\r\n            String key = uriParts[1];\r\n            System.out.println(&quot;Fetching &quot; + uri);\r\n            AmazonS3 s3client = fileSnapshotService.getS3Client();\r\n            S3Object object = s3client.getObject(bucket, key);\r\n            S3ObjectInputStream finalObject = object.getObjectContent();\r\n\r\n            final StreamingResponseBody body = outputStream -&gt; {\r\n                int numberOfBytesToWrite = 0;\r\n                byte[] data = new byte[1024];\r\n                while ((numberOfBytesToWrite = finalObject.read(data, 0, data.length)) != -1) {\r\n                    outputStream.write(data, 0, numberOfBytesToWrite);\r\n                }\r\n                finalObject.close();\r\n            };\r\n            return new ResponseEntity&lt;StreamingResponseBody&gt;(body, HttpStatus.OK);\r\n        } catch (Exception e) {\r\n            System.err.println(&quot;Error &quot;+ e.getMessage());\r\n            return new ResponseEntity&lt;StreamingResponseBody&gt;(HttpStatus.BAD_REQUEST);\r\n        }\r\n\r\n    }\r\n\r\nits client request in android retrofit \r\n\r\n     @GET(&quot;/api/v1/streamVideo/{bucketName}/{fileName}&quot;)\r\n    Call&lt;ResponseBody&gt; getStreamingObject(@Path(&quot;bucketName&quot;) String bucketName,@Path(&quot;fileName&quot;)String fileName);\r\n\r\nAmazonS3 client \r\n\r\n    @Bean\r\n    public AmazonS3 gennerateS3Client() {\r\n        AWSCredentials credentials = new BasicAWSCredentials(accessKey,secretKey);\r\n        return  AmazonS3ClientBuilder.standard()\r\n                .withRegion(regionCode)\r\n                .withCredentials(new AWSStaticCredentialsProvider(credentials))\r\n                .build();\r\n\r\n    }\r\nwhere regionCode = &quot;ap-south-1&quot;;\r\n\r\nnow problem is that I am able to download video file without any issue .but when I am trying to stream video file from the API I am getting this error in spring boot \r\n\r\nError The bucket is in this region: eu-west-1. Please use this region to retry the request (Service: Amazon S3; Status Code: 301; Error Code: PermanentRedirect; Request ID: XXXXXXXXXXXXXXXX; S3 Extended Request ID: /XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=; Proxy: null)\r\n\r\nplease help me resolve the issue \r\n","title":"Getting Wrong bucket region error while streaming video in spring boot with client android","body":"<p>I am trying to create Video streaming app with backend in spring boot. I have created two apis for downloading video file and streaming video file.</p>\n<p>For downloading video file</p>\n<pre><code>@PostMapping(&quot;/api/v1/downloadVideoAWS&quot;)\npublic ResponseEntity&lt;ByteArrayResource&gt; downloadFile(@RequestBody FileSnapshot fileSnapshot) {\n    byte[] data = fileSnapshotService.downloadVideoAWS(fileSnapshot);\n    ByteArrayResource resource = new ByteArrayResource(data);\n    return ResponseEntity.ok().contentLength(data.length)\n            .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\n            .header(&quot;Content-disposition&quot;, &quot;attachement; filename=\\&quot;&quot; + fileSnapshot.getFileName() + &quot;\\&quot;&quot;)\n            .body(resource);\n}\n</code></pre>\n<p>its client request in android retrofit</p>\n<pre><code>@HTTP(method = &quot;POST&quot;, hasBody = true,path = &quot;/api/v1/downloadVideoAWS&quot;)\nCall &lt;ResponseBody&gt; getVideoFile(@Body FileSnapshot fileSnapshot);\n</code></pre>\n<p>for streaming video file</p>\n<pre><code>@GetMapping(value = &quot;/api/v1/streamVideo/**&quot;, produces = { MediaType.APPLICATION_OCTET_STREAM_VALUE })\npublic ResponseEntity&lt;StreamingResponseBody&gt; getObject(HttpServletRequest request) {\n    try {\n\n        String uri = request.getRequestURI();\n        String uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\n        String bucket = uriParts[0];\n        String key = uriParts[1];\n        System.out.println(&quot;Fetching &quot; + uri);\n        AmazonS3 s3client = fileSnapshotService.getS3Client();\n        S3Object object = s3client.getObject(bucket, key);\n        S3ObjectInputStream finalObject = object.getObjectContent();\n\n        final StreamingResponseBody body = outputStream -&gt; {\n            int numberOfBytesToWrite = 0;\n            byte[] data = new byte[1024];\n            while ((numberOfBytesToWrite = finalObject.read(data, 0, data.length)) != -1) {\n                outputStream.write(data, 0, numberOfBytesToWrite);\n            }\n            finalObject.close();\n        };\n        return new ResponseEntity&lt;StreamingResponseBody&gt;(body, HttpStatus.OK);\n    } catch (Exception e) {\n        System.err.println(&quot;Error &quot;+ e.getMessage());\n        return new ResponseEntity&lt;StreamingResponseBody&gt;(HttpStatus.BAD_REQUEST);\n    }\n\n}\n</code></pre>\n<p>its client request in android retrofit</p>\n<pre><code> @GET(&quot;/api/v1/streamVideo/{bucketName}/{fileName}&quot;)\nCall&lt;ResponseBody&gt; getStreamingObject(@Path(&quot;bucketName&quot;) String bucketName,@Path(&quot;fileName&quot;)String fileName);\n</code></pre>\n<p>AmazonS3 client</p>\n<pre><code>@Bean\npublic AmazonS3 gennerateS3Client() {\n    AWSCredentials credentials = new BasicAWSCredentials(accessKey,secretKey);\n    return  AmazonS3ClientBuilder.standard()\n            .withRegion(regionCode)\n            .withCredentials(new AWSStaticCredentialsProvider(credentials))\n            .build();\n\n}\n</code></pre>\n<p>where regionCode = &quot;ap-south-1&quot;;</p>\n<p>now problem is that I am able to download video file without any issue .but when I am trying to stream video file from the API I am getting this error in spring boot</p>\n<p>Error The bucket is in this region: eu-west-1. Please use this region to retry the request (Service: Amazon S3; Status Code: 301; Error Code: PermanentRedirect; Request ID: XXXXXXXXXXXXXXXX; S3 Extended Request ID: /XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=; Proxy: null)</p>\n<p>please help me resolve the issue</p>\n"},{"tags":["java","spring-boot","kotlin","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":18129664,"reputation":131,"user_id":13184890,"display_name":"Someone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683222819,"creation_date":1683222819,"answer_id":76176095,"question_id":76175867,"body_markdown":"In Kotlin you can just add extension function like this:\r\n\r\n```kotlin\r\nfun &lt;T, ID&gt; SomeSpecificationExecutorRepository&lt;T, ID&gt;.myCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T? {\r\n    // Your implementation\r\n}\r\n```\r\n\r\nAnd everything will be fine with this","title":"Generic implementation for custom method in @NoRepositoryBean repository Spring Boot","body":"<p>In Kotlin you can just add extension function like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;T, ID&gt; SomeSpecificationExecutorRepository&lt;T, ID&gt;.myCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T? {\n    // Your implementation\n}\n</code></pre>\n<p>And everything will be fine with this</p>\n"}],"owner":{"account_id":18129664,"reputation":131,"user_id":13184890,"display_name":"Someone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683222819,"creation_date":1683221131,"question_id":76175867,"body_markdown":"I have a repository which can execute generic specifications:\r\n\r\n```kotlin\r\n@NoRepositoryBean\r\ninterface SomeSpecificationExecutorRepository&lt;T, ID&gt; :\r\n    JpaRepository&lt;T, ID&gt;,\r\n    JpaSpecificationExecutor&lt;T&gt;\r\n\r\n```\r\n\r\nAnd several target repositories which looks like:\r\n\r\n```kotlin\r\n@Repository\r\ninterface SomeViewRepository : SomeSpecificationExecutorRepository&lt;SomeViewEntity, Long&gt;\r\n```\r\n\r\nNow I want to add a generic\r\n```kotlin\r\nmyCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T?\r\n```\r\nmethod which makes some search according to provided specification and extends this specification predicate with some id-specific clauses.\r\n\r\n\r\nThe problem is that if I want to add some custom methods to `SomeSpecificationExecutorRepository` via one more interface it&#39;s implementation will be also generic one and I couldn&#39;t `SomeSpecificationExecutorRepository` there it to reuse `findAll(specification)` methods.\r\n\r\nIs there any ideas how can I solve this case and add som methods to this `@NoRepositoryBean` repository which will be available in all repositories that use this one?","title":"Generic implementation for custom method in @NoRepositoryBean repository Spring Boot","body":"<p>I have a repository which can execute generic specifications:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@NoRepositoryBean\ninterface SomeSpecificationExecutorRepository&lt;T, ID&gt; :\n    JpaRepository&lt;T, ID&gt;,\n    JpaSpecificationExecutor&lt;T&gt;\n\n</code></pre>\n<p>And several target repositories which looks like:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Repository\ninterface SomeViewRepository : SomeSpecificationExecutorRepository&lt;SomeViewEntity, Long&gt;\n</code></pre>\n<p>Now I want to add a generic</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>myCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T?\n</code></pre>\n<p>method which makes some search according to provided specification and extends this specification predicate with some id-specific clauses.</p>\n<p>The problem is that if I want to add some custom methods to <code>SomeSpecificationExecutorRepository</code> via one more interface it's implementation will be also generic one and I couldn't <code>SomeSpecificationExecutorRepository</code> there it to reuse <code>findAll(specification)</code> methods.</p>\n<p>Is there any ideas how can I solve this case and add som methods to this <code>@NoRepositoryBean</code> repository which will be available in all repositories that use this one?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1683115877,"post_id":76163443,"comment_id":134316433,"body_markdown":"I wouldn&#39;t be iterating through 1 to n in unit steps since &#39;most&#39; of the values will not be selected.  I&#39;d just generate the values that will match - e.g. `for (i=divisor; i&lt;=n; i+=divisor) storeResult(i)`. I&#39;d have one thread per unique divisor 3,5,7. Eliminate duplicates as before.","body":"I wouldn&#39;t be iterating through 1 to n in unit steps since &#39;most&#39; of the values will not be selected.  I&#39;d just generate the values that will match - e.g. <code>for (i=divisor; i&lt;=n; i+=divisor) storeResult(i)</code>. I&#39;d have one thread per unique divisor 3,5,7. Eliminate duplicates as before."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1683120022,"post_id":76163443,"comment_id":134317548,"body_markdown":"my understanding of &quot;multithreaded program that finds all integers in the range [1, n] that are divisible by 3, 5, or 7&quot; is: you need write program using something like: int stream &gt; range &gt; parallel &gt; filter &gt; sum. That would be the only solution which actually makes sense.","body":"my understanding of &quot;multithreaded program that finds all integers in the range [1, n] that are divisible by 3, 5, or 7&quot; is: you need write program using something like: int stream &gt; range &gt; parallel &gt; filter &gt; sum. That would be the only solution which actually makes sense."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1683120232,"post_id":76163443,"comment_id":134317617,"body_markdown":"`IntStream.range(1, n).parallel().filter(i -&gt; i % 3 == 0 || i % 5 == 0 || i % 7 == 0).sum()`","body":"<code>IntStream.range(1, n).parallel().filter(i -&gt; i % 3 == 0 || i % 5 == 0 || i % 7 == 0).sum()</code>"}],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683114963,"creation_date":1683114963,"answer_id":76163523,"question_id":76163443,"body_markdown":"The main solution to your problem is to lose `static` everywhere. Never use `static` unless you have a very good reason to. In this case, you do not. Generally speaking, it will be a few years of programming in Java before you will encounter your first situation where you may legitimately use `static`. Until then, just don&#39;t.\r\n\r\nAs a bonus thought, you could perhaps greatly reduce the amount of work you have to do by not creating a thread for each divisor and instead creating threads for different ranges of integers that you want to process. So, for example, for `n = 1000` you might create two threads, one that will process numbers from 1 to 500 and another that will process numbers from 501 to 1000. This way, each thread is guaranteed to yield numbers that will not be yielded by the other thread.\r\n","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>The main solution to your problem is to lose <code>static</code> everywhere. Never use <code>static</code> unless you have a very good reason to. In this case, you do not. Generally speaking, it will be a few years of programming in Java before you will encounter your first situation where you may legitimately use <code>static</code>. Until then, just don't.</p>\n<p>As a bonus thought, you could perhaps greatly reduce the amount of work you have to do by not creating a thread for each divisor and instead creating threads for different ranges of integers that you want to process. So, for example, for <code>n = 1000</code> you might create two threads, one that will process numbers from 1 to 500 and another that will process numbers from 501 to 1000. This way, each thread is guaranteed to yield numbers that will not be yielded by the other thread.</p>\n"},{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683116825,"creation_date":1683116825,"answer_id":76163819,"question_id":76163443,"body_markdown":"Your problem is the shared variable `temp` which is expected to hold the same value across several statements.\r\n\r\n    public static int temp = 0;\r\n    public static synchronized void increment() {\r\n        dividends.add(temp);\r\n    }\r\n   \r\nIn each thread:\r\n\r\n    temp=i;\r\n    increment();\r\n\r\nSo if thread1 sets &#39;temp&#39;, it can be changed by another thread before thread1 gets to use it in increment.\r\n\r\nBut it&#39;s not necessary anyway.\r\n\r\n    public static synchronized void increment(int x) {\r\n        dividends.add(X);\r\n    }\r\n\r\nthen\r\n\r\n    increment(i);\r\n\r\nOther answers talk about eliminating unnecessary static, which is valid design criticism, but that in itself does not fix your &#39;temp&#39; problem.  Even a non-static &#39;temp&#39; is still shared across threads - there&#39;s one instance of FindMultiples shared by all of the thread instances.\r\n\r\nThis answer addresses the question of why you&#39;re getting variable results.  In comments I&#39;ve noted that efficiency can be improved.\r\n","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>Your problem is the shared variable <code>temp</code> which is expected to hold the same value across several statements.</p>\n<pre><code>public static int temp = 0;\npublic static synchronized void increment() {\n    dividends.add(temp);\n}\n</code></pre>\n<p>In each thread:</p>\n<pre><code>temp=i;\nincrement();\n</code></pre>\n<p>So if thread1 sets 'temp', it can be changed by another thread before thread1 gets to use it in increment.</p>\n<p>But it's not necessary anyway.</p>\n<pre><code>public static synchronized void increment(int x) {\n    dividends.add(X);\n}\n</code></pre>\n<p>then</p>\n<pre><code>increment(i);\n</code></pre>\n<p>Other answers talk about eliminating unnecessary static, which is valid design criticism, but that in itself does not fix your 'temp' problem.  Even a non-static 'temp' is still shared across threads - there's one instance of FindMultiples shared by all of the thread instances.</p>\n<p>This answer addresses the question of why you're getting variable results.  In comments I've noted that efficiency can be improved.</p>\n"},{"tags":[],"owner":{"account_id":15831863,"reputation":36,"user_id":13157139,"display_name":"Mukhtar Amirkhanov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683219928,"creation_date":1683117589,"answer_id":76163931,"question_id":76163443,"body_markdown":"Most likely your main problem is that you are synchronizing the increment() method, and not synchronizing the temp variable.\r\nWhile one thread is trying to execute the increment() method, the second thread is changing the value of the temp variable. Run your code in debug and check it out.\r\n\r\nIt&#39;s better to send the value directly to increment() than store it in temp.\r\nSee my edited code:\r\n\r\n    import java.util.*;\r\n    public class FindMultiples\r\n    {\r\n\r\n      public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\r\n      public static synchronized void increment(int temp){\r\n         dividends.add(temp);\r\n      }\r\n      \r\n      public static class MyThread implements Runnable{\r\n\r\n        public int divisor;\r\n        public int n;\r\n\r\n        public MyThread(int n , int divisor){\r\n            this.n=n;\r\n            this.divisor=divisor;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n\r\n            for (int i=1 ; i&lt;=n ; i++){\r\n                if (i%divisor==0){\r\n                    increment(i);\r\n                }\r\n            }\r\n        }\r\n      }\r\n\r\n      public int getSum(int n) {\r\n        int sum = 0;\r\n        Thread thread1 = new Thread(new MyThread(n,3));\r\n        Thread thread2 = new Thread(new MyThread(n,7));\r\n        Thread thread3 = new Thread(new MyThread(n,5));\r\n\r\n        thread3.start();\r\n        thread2.start();\r\n        thread1.start();\r\n        try {\r\n            thread3.join();\r\n            thread2.join();\r\n            thread1.join();\r\n        }catch (InterruptedException e){\r\n            System.out.println(e.getMessage());\r\n        }\r\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\r\n        dividends.clear();\r\n        dividends.addAll(set);\r\n\r\n        for (int i : dividends){\r\n            sum+=i;\r\n        }\r\n\r\n        return sum;\r\n      }\r\n\r\n      public static void main(String[] args) {\r\n        FindMultiples findMultiples = new FindMultiples();\r\n        System.out.println(findMultiples.getSum(1000));\r\n      }\r\n    }","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>Most likely your main problem is that you are synchronizing the increment() method, and not synchronizing the temp variable.\nWhile one thread is trying to execute the increment() method, the second thread is changing the value of the temp variable. Run your code in debug and check it out.</p>\n<p>It's better to send the value directly to increment() than store it in temp.\nSee my edited code:</p>\n<pre><code>import java.util.*;\npublic class FindMultiples\n{\n\n  public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\n  public static synchronized void increment(int temp){\n     dividends.add(temp);\n  }\n  \n  public static class MyThread implements Runnable{\n\n    public int divisor;\n    public int n;\n\n    public MyThread(int n , int divisor){\n        this.n=n;\n        this.divisor=divisor;\n    }\n\n    @Override\n    public void run() {\n\n        for (int i=1 ; i&lt;=n ; i++){\n            if (i%divisor==0){\n                increment(i);\n            }\n        }\n    }\n  }\n\n  public int getSum(int n) {\n    int sum = 0;\n    Thread thread1 = new Thread(new MyThread(n,3));\n    Thread thread2 = new Thread(new MyThread(n,7));\n    Thread thread3 = new Thread(new MyThread(n,5));\n\n    thread3.start();\n    thread2.start();\n    thread1.start();\n    try {\n        thread3.join();\n        thread2.join();\n        thread1.join();\n    }catch (InterruptedException e){\n        System.out.println(e.getMessage());\n    }\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\n    dividends.clear();\n    dividends.addAll(set);\n\n    for (int i : dividends){\n        sum+=i;\n    }\n\n    return sum;\n  }\n\n  public static void main(String[] args) {\n    FindMultiples findMultiples = new FindMultiples();\n    System.out.println(findMultiples.getSum(1000));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683145699,"creation_date":1683118249,"answer_id":76164034,"question_id":76163443,"body_markdown":"### See mine\r\n#### For `n ~= 100,000`, better use `long getSum(int n)`\r\n...and we need to adjust.\r\n\r\nComments inline:\r\n```lang-java\r\npackage com.example;\r\n\r\nimport java.util.BitSet;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.ExecutorCompletionService;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class Test {\r\n    // Our thread pool (e.g...):\r\n    static final ExecutorService THREAD_POOL = Executors.newFixedThreadPool(3);\r\n    // to complete our &quot;tasks&quot; (see javadoc):\r\n    static final ExecutorCompletionService&lt;BitSet&gt; ECS = new ExecutorCompletionService&lt;&gt;(THREAD_POOL);\r\n\r\n    static long getSum(int n) throws InterruptedException, ExecutionException { // for brevity: throw\r\n        // start &quot;3 job&quot;:\r\n        ECS.submit(() -&gt; findDivisors(3, n));\r\n        // start &quot;5 job&quot;:\r\n        ECS.submit(() -&gt; findDivisors(5, n));\r\n        // start &quot;7 job&quot;:\r\n        ECS.submit(() -&gt; findDivisors(7, n));\r\n\r\n        // collect result:\r\n        BitSet collect = new BitSet(n + 1);\r\n        for (int i = 3; i &gt; 0; i--) { // complete all jobs ...\r\n            BitSet tmpResult = ECS.take().get(); // see javadoc\r\n            if (tmpResult != null) // &quot;or&#39;ing&quot; their results into &quot;collect&quot;:\r\n                collect.or(tmpResult);\r\n        }\r\n\r\n        // stream over &quot;all set indices&quot; in &quot;collect&quot; and return ...\r\n        return collect.stream()\r\n                // ... (as a long;) their sum \r\n                .mapToLong(i -&gt; (long) i).sum();\r\n    }\r\n\r\n    static BitSet findDivisors(int d, int n) { // MAIN JOB:\r\n        BitSet mem = new BitSet(n + 1); // ignore 0th bit\r\n        for (int i = d; i &lt;= n; i += d) { // set i(th) index to true:\r\n            mem.set(i);\r\n        }\r\n        return mem; // done!\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException, ExecutionException {\r\n        // do I/O, more tests...:\r\n        System.out.println(getSum(10));\r\n        System.out.println(getSum(100));\r\n        System.out.println(getSum(1_000));\r\n        System.out.println(getSum(10_000));\r\n        System.out.println(getSum(100_000));\r\n        System.out.println(getSum(1_000_000));\r\n        System.out.println(getSum(10_000_000));\r\n        System.out.println(getSum(100_000_000));\r\n        System.out.println(getSum(1_000_000_000));\r\n        // System.out.println(getSum(2_000_000_000)); // oh-oh\r\n        // finally: release resources:\r\n        THREAD_POOL.shutdown();\r\n    }\r\n}\r\n```\r\n#### Prints:\r\n```lang-text\r\n40\r\n2838\r\n272066\r\n27152139\r\n2714364277\r\n271428928569\r\n27142867857145\r\n2714285835714288\r\n271428572071428566\r\n1085714285285714288 # ?? &lt;- this looks like (long!) overflow ;(\r\n```\r\n\r\n### References\r\n- [`ExecutorCompletionService`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorCompletionService.html) + linked (since java 1.5)\r\n- [`BitSet`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html) (since java 1.0;)\r\n- [`Executor`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html)\r\n- [`ExecutorService`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html)\r\n\r\n### Key Points\r\n- BitSet as &quot;data structure&quot;:\r\n  - similar to `boolean[]([])`, but:\r\n    - better memory efficience (a `boolean` costs 1 byte of memory (in current hw architecture), whereas BitSet can do better (backed by a `long[]|byte[]`))\r\n    - advanced API (`or, and, xor, cardinality, stream, ...`)\r\n  - to overcome its lack of multi-thread support we can:\r\n    - &quot;synchronize&quot;\r\n    - use multiple BitSets to join/or/and/... them together\r\n- `i`th index in bitSet_x (3/5/7) set, means: `i` is divisible by x (3/5/7)\r\n- challenges start from `n~=100000`\r\n\r\n\r\n----------\r\n\r\n\r\nAnd the &quot;ultra-light&quot; version (regarding the lines of code, performance is another chapter), inspired by Andrey B.P.:\r\n```lang-java\r\n[static] long getSum(int n) {\r\n  return IntStream.rangeClosed(1, n) // rangeClosed not range (or +/-1;)\r\n    .parallel() // ok\r\n    .filter(i -&gt;\r\n         (i % 3 == 0 &amp;&amp; i % 15 &gt; 0 &amp;&amp; i % 21 &gt; 0) // 1.\r\n      || (i % 5 == 0 &amp;&amp; i % 35 &gt; 0) // 2.\r\n      || (i % 7 == 0) // 3.\r\n    )\r\n    .mapToLong(i -&gt; (long) i) // for bigger input\r\n    .sum(); // #\r\n}\r\n```\r\n","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<h3>See mine</h3>\n<h4>For <code>n ~= 100,000</code>, better use <code>long getSum(int n)</code></h4>\n<p>...and we need to adjust.</p>\n<p>Comments inline:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport java.util.BitSet;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorCompletionService;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class Test {\n    // Our thread pool (e.g...):\n    static final ExecutorService THREAD_POOL = Executors.newFixedThreadPool(3);\n    // to complete our &quot;tasks&quot; (see javadoc):\n    static final ExecutorCompletionService&lt;BitSet&gt; ECS = new ExecutorCompletionService&lt;&gt;(THREAD_POOL);\n\n    static long getSum(int n) throws InterruptedException, ExecutionException { // for brevity: throw\n        // start &quot;3 job&quot;:\n        ECS.submit(() -&gt; findDivisors(3, n));\n        // start &quot;5 job&quot;:\n        ECS.submit(() -&gt; findDivisors(5, n));\n        // start &quot;7 job&quot;:\n        ECS.submit(() -&gt; findDivisors(7, n));\n\n        // collect result:\n        BitSet collect = new BitSet(n + 1);\n        for (int i = 3; i &gt; 0; i--) { // complete all jobs ...\n            BitSet tmpResult = ECS.take().get(); // see javadoc\n            if (tmpResult != null) // &quot;or'ing&quot; their results into &quot;collect&quot;:\n                collect.or(tmpResult);\n        }\n\n        // stream over &quot;all set indices&quot; in &quot;collect&quot; and return ...\n        return collect.stream()\n                // ... (as a long;) their sum \n                .mapToLong(i -&gt; (long) i).sum();\n    }\n\n    static BitSet findDivisors(int d, int n) { // MAIN JOB:\n        BitSet mem = new BitSet(n + 1); // ignore 0th bit\n        for (int i = d; i &lt;= n; i += d) { // set i(th) index to true:\n            mem.set(i);\n        }\n        return mem; // done!\n    }\n\n    public static void main(String[] args) throws InterruptedException, ExecutionException {\n        // do I/O, more tests...:\n        System.out.println(getSum(10));\n        System.out.println(getSum(100));\n        System.out.println(getSum(1_000));\n        System.out.println(getSum(10_000));\n        System.out.println(getSum(100_000));\n        System.out.println(getSum(1_000_000));\n        System.out.println(getSum(10_000_000));\n        System.out.println(getSum(100_000_000));\n        System.out.println(getSum(1_000_000_000));\n        // System.out.println(getSum(2_000_000_000)); // oh-oh\n        // finally: release resources:\n        THREAD_POOL.shutdown();\n    }\n}\n</code></pre>\n<h4>Prints:</h4>\n<pre class=\"lang-text prettyprint-override\"><code>40\n2838\n272066\n27152139\n2714364277\n271428928569\n27142867857145\n2714285835714288\n271428572071428566\n1085714285285714288 # ?? &lt;- this looks like (long!) overflow ;(\n</code></pre>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorCompletionService.html\" rel=\"nofollow noreferrer\"><code>ExecutorCompletionService</code></a> + linked (since java 1.5)</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> (since java 1.0;)</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html\" rel=\"nofollow noreferrer\"><code>Executor</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\"><code>ExecutorService</code></a></li>\n</ul>\n<h3>Key Points</h3>\n<ul>\n<li>BitSet as &quot;data structure&quot;:\n<ul>\n<li>similar to <code>boolean[]([])</code>, but:\n<ul>\n<li>better memory efficience (a <code>boolean</code> costs 1 byte of memory (in current hw architecture), whereas BitSet can do better (backed by a <code>long[]|byte[]</code>))</li>\n<li>advanced API (<code>or, and, xor, cardinality, stream, ...</code>)</li>\n</ul>\n</li>\n<li>to overcome its lack of multi-thread support we can:\n<ul>\n<li>&quot;synchronize&quot;</li>\n<li>use multiple BitSets to join/or/and/... them together</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>i</code>th index in bitSet_x (3/5/7) set, means: <code>i</code> is divisible by x (3/5/7)</li>\n<li>challenges start from <code>n~=100000</code></li>\n</ul>\n<hr />\n<p>And the &quot;ultra-light&quot; version (regarding the lines of code, performance is another chapter), inspired by Andrey B.P.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>[static] long getSum(int n) {\n  return IntStream.rangeClosed(1, n) // rangeClosed not range (or +/-1;)\n    .parallel() // ok\n    .filter(i -&gt;\n         (i % 3 == 0 &amp;&amp; i % 15 &gt; 0 &amp;&amp; i % 21 &gt; 0) // 1.\n      || (i % 5 == 0 &amp;&amp; i % 35 &gt; 0) // 2.\n      || (i % 7 == 0) // 3.\n    )\n    .mapToLong(i -&gt; (long) i) // for bigger input\n    .sum(); // #\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683146997,"creation_date":1683146997,"answer_id":76167884,"question_id":76163443,"body_markdown":"Well, I believe solution below is the most optimal, cause it is just an arithmetic formula:\r\n\r\n```java\r\nBiFunction&lt;Integer, Integer, Long&gt; sumDivInRange = (to, div) -&gt; {\r\n    int first = (1 / div) * div;\r\n    int last = (to / div) * div;\r\n\r\n    return ((long) first + last) * ((last - first) / div + 1) / 2;\r\n};\r\n\r\nint n = 100000000;\r\n\r\n// not sure we need parallel that\r\nreturn sumDivInRange.apply(n, 3)\r\n        + sumDivInRange.apply(n, 5)\r\n        + sumDivInRange.apply(n, 7)\r\n        - sumDivInRange.apply(n, 15)\r\n        - sumDivInRange.apply(n, 21)\r\n        - sumDivInRange.apply(n, 35)\r\n        + sumDivInRange.apply(n, 105);\r\n```","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>Well, I believe solution below is the most optimal, cause it is just an arithmetic formula:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BiFunction&lt;Integer, Integer, Long&gt; sumDivInRange = (to, div) -&gt; {\n    int first = (1 / div) * div;\n    int last = (to / div) * div;\n\n    return ((long) first + last) * ((last - first) / div + 1) / 2;\n};\n\nint n = 100000000;\n\n// not sure we need parallel that\nreturn sumDivInRange.apply(n, 3)\n        + sumDivInRange.apply(n, 5)\n        + sumDivInRange.apply(n, 7)\n        - sumDivInRange.apply(n, 15)\n        - sumDivInRange.apply(n, 21)\n        - sumDivInRange.apply(n, 35)\n        + sumDivInRange.apply(n, 105);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":435105,"reputation":6948,"user_id":821497,"accept_rate":60,"display_name":"ciamej"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683222619,"creation_date":1683219555,"answer_id":76175658,"question_id":76163443,"body_markdown":"When your goal is to parallelize computations you should make sure that your solution is actually faster than a serial (single threaded) one. Unfortunately your code (fixed by Mukhtar Amirkhanov) is probably much slower than a naive loop going through 1 to n. This is because a naive solution does not have to store the actual dividends anywhere. Also your multithreaded program synchronizes on each step, which means it won&#39;t actually make much progress in parallel. Finally, after the threads join your program removes duplicates in the main thread - that step alone take probably way more time than the naive loop.\r\n\r\nUnfortunately, the task is poorly defined, because the fastest solution is just a formula (as shown by @Andrey B. Panfilov) which can be computed in constant time `O(1)` and which cannot be sped up by multithreading. Probably your teacher meant to speed the computations by using multithreading compared to the naive solution, so you should settle for &quot;second-best&quot; approach.\r\n\r\nA meaningful approach to parallelizing such tasks is described by @Mike Nakis in his answer. You should split the work between threads not by the divisor, but by ranges of dividends. You can define separate threads do the work, and after joining them just add their results, or you can simply use a parallel stream (as shown by @Andrey B. Panfilov in a comment, just use a LongStream instead of an IntStream) to the same effect (if streams are allowed in your assignment).\r\n\r\n\r\n    import java.util.*;\r\n    public class FindMultiples\r\n    {\r\n      public static final int numberOfThreads = 3;\r\n      public static long[] partialResults = new long[numberOfThreads];\r\n\r\n      public static class MyThread implements Runnable{\r\n        public int threadNumber;\r\n        public int n;\r\n\r\n        public MyThread(int threadNumber, int n) {\r\n            this.threadNumber = threadNumber;\r\n            this.n = n;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            int start = ((threadNumber - 1) * n / numberOfThreads) + 1;\r\n            int end = threadNumber * n / numberOfThreads;\r\n            long result = 0;\r\n            for (int i = start; i &lt;= end; i++)\r\n                if (i % 3 == 0 || i % 5 == 0 || i % 7 == 0)\r\n                    result += i;\r\n            partialResults[threadNumber - 1] = result;\r\n        }\r\n      }\r\n\r\n      public long getSum(int n) {\r\n        Thread[] threads = new Thread[numberOfThreads];\r\n        for (int i = 1; i &lt;= numberOfThreads; i++)\r\n            threads[i - 1] = new Thread(new MyThread(i, n));\r\n\r\n        for (int i = 1; i &lt;= numberOfThreads; i++)\r\n            threads[i - 1].start();\r\n\r\n        try {\r\n            for (int i = 1; i &lt;= numberOfThreads; i++)\r\n                threads[i - 1].join();\r\n        } catch (InterruptedException e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n        \r\n        long sum = 0;\r\n        for (int i = 1; i &lt;= numberOfThreads; i++)\r\n            sum += partialResults[i - 1];\r\n\r\n        return sum;\r\n      }\r\n\r\n      public static void main(String[] args) {\r\n        FindMultiples findMultiples = new FindMultiples();\r\n        System.out.println(findMultiples.getSum(1000));\r\n      }\r\n    }","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>When your goal is to parallelize computations you should make sure that your solution is actually faster than a serial (single threaded) one. Unfortunately your code (fixed by Mukhtar Amirkhanov) is probably much slower than a naive loop going through 1 to n. This is because a naive solution does not have to store the actual dividends anywhere. Also your multithreaded program synchronizes on each step, which means it won't actually make much progress in parallel. Finally, after the threads join your program removes duplicates in the main thread - that step alone take probably way more time than the naive loop.</p>\n<p>Unfortunately, the task is poorly defined, because the fastest solution is just a formula (as shown by @Andrey B. Panfilov) which can be computed in constant time <code>O(1)</code> and which cannot be sped up by multithreading. Probably your teacher meant to speed the computations by using multithreading compared to the naive solution, so you should settle for &quot;second-best&quot; approach.</p>\n<p>A meaningful approach to parallelizing such tasks is described by @Mike Nakis in his answer. You should split the work between threads not by the divisor, but by ranges of dividends. You can define separate threads do the work, and after joining them just add their results, or you can simply use a parallel stream (as shown by @Andrey B. Panfilov in a comment, just use a LongStream instead of an IntStream) to the same effect (if streams are allowed in your assignment).</p>\n<pre><code>import java.util.*;\npublic class FindMultiples\n{\n  public static final int numberOfThreads = 3;\n  public static long[] partialResults = new long[numberOfThreads];\n\n  public static class MyThread implements Runnable{\n    public int threadNumber;\n    public int n;\n\n    public MyThread(int threadNumber, int n) {\n        this.threadNumber = threadNumber;\n        this.n = n;\n    }\n\n    @Override\n    public void run() {\n        int start = ((threadNumber - 1) * n / numberOfThreads) + 1;\n        int end = threadNumber * n / numberOfThreads;\n        long result = 0;\n        for (int i = start; i &lt;= end; i++)\n            if (i % 3 == 0 || i % 5 == 0 || i % 7 == 0)\n                result += i;\n        partialResults[threadNumber - 1] = result;\n    }\n  }\n\n  public long getSum(int n) {\n    Thread[] threads = new Thread[numberOfThreads];\n    for (int i = 1; i &lt;= numberOfThreads; i++)\n        threads[i - 1] = new Thread(new MyThread(i, n));\n\n    for (int i = 1; i &lt;= numberOfThreads; i++)\n        threads[i - 1].start();\n\n    try {\n        for (int i = 1; i &lt;= numberOfThreads; i++)\n            threads[i - 1].join();\n    } catch (InterruptedException e) {\n        System.out.println(e.getMessage());\n    }\n    \n    long sum = 0;\n    for (int i = 1; i &lt;= numberOfThreads; i++)\n        sum += partialResults[i - 1];\n\n    return sum;\n  }\n\n  public static void main(String[] args) {\n    FindMultiples findMultiples = new FindMultiples();\n    System.out.println(findMultiples.getSum(1000));\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":27810500,"reputation":83,"user_id":21232984,"display_name":"Phantom"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":76163931,"answer_count":6,"score":6,"last_activity_date":1683222619,"creation_date":1683114406,"question_id":76163443,"body_markdown":"\r\nexplanation of the question:\r\nyou must write a multithreaded program that finds all \r\nintegers in the range [1, n] that are divisible by 3, 5, or 7. Return the\r\nsum of all unique integers as your answer.\r\nNote that an integer such as 15 (which is a multiple of 3 and 5) is only\r\ncounted once.\r\nThe Positive integer n &gt; 0 is given to you as input. Create as many threads as\r\nyou need to solve the problem. You can use a Thread Pool for bonus points.\r\n\r\n    Example:\r\n    Input: n = 10\r\n    Output: sum = 40\r\n    Explanation: Numbers in the range [1, 10] that are divisible by 3, 5, or 7 are:\r\n    3, 5, 6, 7, 9, 10. The sum of these numbers is 40.\r\n\r\nMy solution and problem that I faced:\r\nin this program I created three threads each for finding the integers that are divided by 3,5 and 7 separately then it will store them all in the dividends array list and by the following code it will remove the repeated ones in the array list:\r\n\r\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\r\n        dividends.clear();\r\n        dividends.addAll(set);\r\n\r\n\r\nI used some test cases that were provided by our teacher and the problem is that in the testcases that n=1000 and n=76293 sum won&#39;t show the amount that was expected:\r\n    \r\n    n=1000\r\n    expected sum:272066\r\n    actual sum:247377\r\n\r\nand the other problem is that the actual sum keeps changing every time I run the testcase.\r\ncan someone tell me what the problem of my code is and how I can fix it\r\n\r\nmy code:\r\n\r\n    import java.util.*;\r\n    public class FindMultiples\r\n    {\r\n\r\n    public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\r\n    public static int temp = 0;\r\n    public static synchronized void increment(){\r\n        dividends.add(temp);\r\n    }\r\n    public static class thread implements Runnable{\r\n\r\n        public int divisor;\r\n        public int n;\r\n\r\n        public thread(int n , int divisor){\r\n            this.n=n;\r\n            this.divisor=divisor;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n\r\n            for (int i=1 ; i&lt;=n ; i++){\r\n                if (i%divisor==0){\r\n                    temp=i;\r\n                    increment();\r\n                }\r\n            }\r\n        }\r\n    }\r\n   \r\n    public int getSum(int n) {\r\n        int sum = 0;\r\n        Thread thread1 = new Thread(new thread(n,3));\r\n        Thread thread2 = new Thread(new thread(n,7));\r\n        Thread thread3 = new Thread(new thread(n,5));\r\n        \r\n        thread3.start();\r\n        thread2.start();\r\n        thread1.start();\r\n        try {\r\n            thread3.join();\r\n            thread2.join();\r\n            thread1.join();\r\n        }catch (InterruptedException e){\r\n\r\n        }\r\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\r\n        dividends.clear();\r\n        dividends.addAll(set);\r\n\r\n        for (int i : dividends){\r\n            sum+=i;\r\n        }\r\n\r\n        return sum;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n    }\r\n    }","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>explanation of the question:\nyou must write a multithreaded program that finds all\nintegers in the range [1, n] that are divisible by 3, 5, or 7. Return the\nsum of all unique integers as your answer.\nNote that an integer such as 15 (which is a multiple of 3 and 5) is only\ncounted once.\nThe Positive integer n &gt; 0 is given to you as input. Create as many threads as\nyou need to solve the problem. You can use a Thread Pool for bonus points.</p>\n<pre><code>Example:\nInput: n = 10\nOutput: sum = 40\nExplanation: Numbers in the range [1, 10] that are divisible by 3, 5, or 7 are:\n3, 5, 6, 7, 9, 10. The sum of these numbers is 40.\n</code></pre>\n<p>My solution and problem that I faced:\nin this program I created three threads each for finding the integers that are divided by 3,5 and 7 separately then it will store them all in the dividends array list and by the following code it will remove the repeated ones in the array list:</p>\n<pre><code>Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\n    dividends.clear();\n    dividends.addAll(set);\n</code></pre>\n<p>I used some test cases that were provided by our teacher and the problem is that in the testcases that n=1000 and n=76293 sum won't show the amount that was expected:</p>\n<pre><code>n=1000\nexpected sum:272066\nactual sum:247377\n</code></pre>\n<p>and the other problem is that the actual sum keeps changing every time I run the testcase.\ncan someone tell me what the problem of my code is and how I can fix it</p>\n<p>my code:</p>\n<pre><code>import java.util.*;\npublic class FindMultiples\n{\n\npublic static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\npublic static int temp = 0;\npublic static synchronized void increment(){\n    dividends.add(temp);\n}\npublic static class thread implements Runnable{\n\n    public int divisor;\n    public int n;\n\n    public thread(int n , int divisor){\n        this.n=n;\n        this.divisor=divisor;\n    }\n\n    @Override\n    public void run() {\n\n        for (int i=1 ; i&lt;=n ; i++){\n            if (i%divisor==0){\n                temp=i;\n                increment();\n            }\n        }\n    }\n}\n\npublic int getSum(int n) {\n    int sum = 0;\n    Thread thread1 = new Thread(new thread(n,3));\n    Thread thread2 = new Thread(new thread(n,7));\n    Thread thread3 = new Thread(new thread(n,5));\n    \n    thread3.start();\n    thread2.start();\n    thread1.start();\n    try {\n        thread3.join();\n        thread2.join();\n        thread1.join();\n    }catch (InterruptedException e){\n\n    }\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\n    dividends.clear();\n    dividends.addAll(set);\n\n    for (int i : dividends){\n        sum+=i;\n    }\n\n    return sum;\n}\n\npublic static void main(String[] args) {\n}\n}\n</code></pre>\n"},{"tags":["java","mutiny","quarkus-hibernate-reactive"],"answers":[{"tags":[],"owner":{"account_id":6338401,"reputation":86,"user_id":4921147,"display_name":"alliancecoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683209555,"creation_date":1683209555,"answer_id":76174174,"question_id":76168467,"body_markdown":"Much like promises in JS, passing the Uni is part of the issue, and I need to **return** from within the chain.\r\n\r\n    return seatsAvailable.onItem().transformToUni(result -&gt; {\r\n\r\nI could then handle the check on the result as a boolean and continue by **returning** the following:\r\n\r\n    return sf.withTransaction((s, t) -&gt; s.persist(selection))","title":"How do I conditionally post using hibernate-reactive based on the result of a different NamedQuery","body":"<p>Much like promises in JS, passing the Uni is part of the issue, and I need to <strong>return</strong> from within the chain.</p>\n<pre><code>return seatsAvailable.onItem().transformToUni(result -&gt; {\n</code></pre>\n<p>I could then handle the check on the result as a boolean and continue by <strong>returning</strong> the following:</p>\n<pre><code>return sf.withTransaction((s, t) -&gt; s.persist(selection))\n</code></pre>\n"}],"owner":{"account_id":6338401,"reputation":86,"user_id":4921147,"display_name":"alliancecoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76174174,"answer_count":1,"score":0,"last_activity_date":1683222573,"creation_date":1683154476,"question_id":76168467,"body_markdown":"I have a POST operation that should only occur if the result of another NamedQuery has a row count Greater Than &quot;&gt;&quot; than a known value.\r\n\r\nI am new to Mutiny and moreso hibernate-reactive. My current catastrophe looks like this:\r\n\r\n```\r\npackage org.electricaltrainingalliance.attendees.selections.boundary;\r\n\r\nimport java.util.UUID;\r\n\r\nimport javax.enterprise.context.ApplicationScoped;\r\nimport javax.inject.Inject;\r\nimport javax.ws.rs.Consumes;\r\nimport javax.ws.rs.DELETE;\r\nimport javax.ws.rs.GET;\r\nimport javax.ws.rs.POST;\r\nimport javax.ws.rs.PUT;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.Produces;\r\nimport javax.ws.rs.QueryParam;\r\nimport javax.ws.rs.WebApplicationException;\r\nimport javax.ws.rs.core.Response;\r\nimport javax.ws.rs.core.Response.Status;\r\n\r\nimport org.electricaltrainingalliance.attendees.selections.entity.AttendeeSelection;\r\nimport org.hibernate.reactive.mutiny.Mutiny.SessionFactory;\r\nimport org.jboss.logging.Logger;\r\nimport org.jboss.logging.Logger.Level;\r\nimport org.jboss.resteasy.reactive.RestPath;\r\n\r\nimport io.smallrye.mutiny.Uni;\r\n\r\n@Path(&quot;selections&quot;)\r\n@ApplicationScoped\r\n@Produces(&quot;application/json&quot;)\r\n@Consumes(&quot;application/json&quot;)\r\npublic class AttendeeSelectionsService {\r\n\r\n    private static final Logger LOGGER = Logger.getLogger(AttendeeSelectionsService.class.getName());\r\n\r\n    @Inject\r\n    SessionFactory sf;\r\n\r\n    @POST\r\n    public Uni&lt;Response&gt; create(AttendeeSelection selection) {\r\n        if (selection == null || !selection.isValid()) {\r\n            return Uni.createFrom()\r\n                    .item(Response.status(400)\r\n                            .entity(&quot;The Selection is not valid, please refer to the API Documentation.&quot;)::build);\r\n        }\r\n\r\n        Uni&lt;Boolean&gt; seatsAvailable = sf.withSession((s) -&gt; s\r\n                .createNamedQuery(AttendeeSelection.findByOfferingId, AttendeeSelection.class)\r\n                .setParameter(&quot;offeringId&quot;, selection.getOffering().getOfferingId())\r\n                .getResultList()).onItem()\r\n                .transform(entity -&gt; entity.size() &gt;= selection.getOffering().getCapacity() ? Boolean.FALSE : Boolean.TRUE);\r\n\r\n        seatsAvailable.onItem().transformToUni(result -&gt; {\r\n            if (!result) {\r\n                return Uni.createFrom()\r\n                        .item(Response.status(409)\r\n                                .entity(&quot;The Offering is no longer available.&quot;)::build);\r\n            } else {\r\n                sf.withTransaction((s, t) -&gt; s.persist(selection))\r\n                        .replaceWith(Response.ok(selection).status(Status.CREATED)::build)\r\n                        .onFailure().transform(failure -&gt; {\r\n                            if (failure.getMessage().toLowerCase().contains(&quot;uk_unique_selection&quot;)) {\r\n                                throw new WebApplicationException(\r\n                                        &quot;A Selection with this information already exists.&quot;,\r\n                                        Status.CONFLICT);\r\n                            } else {\r\n                                LOGGER.log(Level.DEBUG, failure.getMessage(), failure);\r\n                                throw new WebApplicationException(failure.getMessage(),\r\n                                        Status.INTERNAL_SERVER_ERROR);\r\n                            }\r\n                        });\r\n            }\r\n        });\r\n        \r\n    }\r\n...\r\n}\r\n```\r\n\r\nEssentily, I have a query that returns a list of elements. The item being created, has a value that handles the maximum allowed.\r\n\r\nI would like to:\r\n- first call the NamedQuery that provides the list\r\n- compare the size of the resulting list to the capacity allowed\r\n- if there are &quot;seats available&quot; perform the POST operation\r\n- If there are &quot;no seats available&quot; return a CONFLICT\r\n\r\nI have tried an .await() on the NamedQuery to get a Boolean. I get the error `This method should exclusively be invoked from a Vert.x EventLoop thread; currently running on thread &#39;executor-thread-0`\r\n\r\nI have tried in place of .transform as well as .transformToUni but it provides the context error `This method must return a result of type Uni&lt;Response&gt;` of which all paths do, confusingly.","title":"How do I conditionally post using hibernate-reactive based on the result of a different NamedQuery","body":"<p>I have a POST operation that should only occur if the result of another NamedQuery has a row count Greater Than &quot;&gt;&quot; than a known value.</p>\n<p>I am new to Mutiny and moreso hibernate-reactive. My current catastrophe looks like this:</p>\n<pre><code>package org.electricaltrainingalliance.attendees.selections.boundary;\n\nimport java.util.UUID;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.inject.Inject;\nimport javax.ws.rs.Consumes;\nimport javax.ws.rs.DELETE;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.PUT;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.QueryParam;\nimport javax.ws.rs.WebApplicationException;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.core.Response.Status;\n\nimport org.electricaltrainingalliance.attendees.selections.entity.AttendeeSelection;\nimport org.hibernate.reactive.mutiny.Mutiny.SessionFactory;\nimport org.jboss.logging.Logger;\nimport org.jboss.logging.Logger.Level;\nimport org.jboss.resteasy.reactive.RestPath;\n\nimport io.smallrye.mutiny.Uni;\n\n@Path(&quot;selections&quot;)\n@ApplicationScoped\n@Produces(&quot;application/json&quot;)\n@Consumes(&quot;application/json&quot;)\npublic class AttendeeSelectionsService {\n\n    private static final Logger LOGGER = Logger.getLogger(AttendeeSelectionsService.class.getName());\n\n    @Inject\n    SessionFactory sf;\n\n    @POST\n    public Uni&lt;Response&gt; create(AttendeeSelection selection) {\n        if (selection == null || !selection.isValid()) {\n            return Uni.createFrom()\n                    .item(Response.status(400)\n                            .entity(&quot;The Selection is not valid, please refer to the API Documentation.&quot;)::build);\n        }\n\n        Uni&lt;Boolean&gt; seatsAvailable = sf.withSession((s) -&gt; s\n                .createNamedQuery(AttendeeSelection.findByOfferingId, AttendeeSelection.class)\n                .setParameter(&quot;offeringId&quot;, selection.getOffering().getOfferingId())\n                .getResultList()).onItem()\n                .transform(entity -&gt; entity.size() &gt;= selection.getOffering().getCapacity() ? Boolean.FALSE : Boolean.TRUE);\n\n        seatsAvailable.onItem().transformToUni(result -&gt; {\n            if (!result) {\n                return Uni.createFrom()\n                        .item(Response.status(409)\n                                .entity(&quot;The Offering is no longer available.&quot;)::build);\n            } else {\n                sf.withTransaction((s, t) -&gt; s.persist(selection))\n                        .replaceWith(Response.ok(selection).status(Status.CREATED)::build)\n                        .onFailure().transform(failure -&gt; {\n                            if (failure.getMessage().toLowerCase().contains(&quot;uk_unique_selection&quot;)) {\n                                throw new WebApplicationException(\n                                        &quot;A Selection with this information already exists.&quot;,\n                                        Status.CONFLICT);\n                            } else {\n                                LOGGER.log(Level.DEBUG, failure.getMessage(), failure);\n                                throw new WebApplicationException(failure.getMessage(),\n                                        Status.INTERNAL_SERVER_ERROR);\n                            }\n                        });\n            }\n        });\n        \n    }\n...\n}\n</code></pre>\n<p>Essentily, I have a query that returns a list of elements. The item being created, has a value that handles the maximum allowed.</p>\n<p>I would like to:</p>\n<ul>\n<li>first call the NamedQuery that provides the list</li>\n<li>compare the size of the resulting list to the capacity allowed</li>\n<li>if there are &quot;seats available&quot; perform the POST operation</li>\n<li>If there are &quot;no seats available&quot; return a CONFLICT</li>\n</ul>\n<p>I have tried an .await() on the NamedQuery to get a Boolean. I get the error <code>This method should exclusively be invoked from a Vert.x EventLoop thread; currently running on thread 'executor-thread-0</code></p>\n<p>I have tried in place of .transform as well as .transformToUni but it provides the context error <code>This method must return a result of type Uni&lt;Response&gt;</code> of which all paths do, confusingly.</p>\n"},{"tags":["java","spring-boot","eclipse"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1683109810,"post_id":76162783,"comment_id":134315070,"body_markdown":"Do you actually have this class: com.pafproject.foodieapp.Repository.UserRepo? I don&#39;t see any code for it in your question. Can it be autowired?","body":"Do you actually have this class: com.pafproject.foodieapp.Repository.UserRepo? I don&#39;t see any code for it in your question. Can it be autowired?"},{"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"score":1,"creation_date":1683112735,"post_id":76162783,"comment_id":134315660,"body_markdown":"It looks like the repository bean is not registered in the spring context.","body":"It looks like the repository bean is not registered in the spring context."},{"owner":{"account_id":26318201,"reputation":5076,"user_id":19980636,"display_name":"Krokomot"},"score":0,"creation_date":1683222476,"post_id":76162783,"comment_id":134337522,"body_markdown":"Would you please consider to tell us what you *have* tried to solve the pretty straightforward error message? You can&#39;t expect people to read a bunch of code without assisting to narrow the number of possible problems.","body":"Would you please consider to tell us what you <i>have</i> tried to solve the pretty straightforward error message? You can&#39;t expect people to read a bunch of code without assisting to narrow the number of possible problems."}],"owner":{"account_id":28397225,"reputation":1,"user_id":21722269,"display_name":"Sonal Liyanage"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683222216,"creation_date":1683109522,"question_id":76162783,"body_markdown":"I tried several solutions from this platform and other sources as well but none of them worked.\r\n\r\n#### Application failed to start ####\r\n\r\nDescription:\r\n```\r\nField userRepo in\r\ncom.pafproject.foodieapp.Service.UserService\r\nrequired a bean of type\r\n&#39;com.pafproject.foodieapp.Repository.UserRepo&#39;\r\nthat could not be found.\r\n```\r\n\r\nThe injection point has the following annotations:\r\n```\r\n@org.springframework.beans.factory.annotation.Autowired(required=true)\r\n```\r\n\r\nAction:\r\n```\r\nConsider defining a bean of type\r\n&#39;com.pafproject.foodieapp.Repository.UserRepo&#39;\r\nin your configuration.\r\n```\r\n\r\nThis is my main class\r\n```\r\npackage com.pafproject.foodieapp;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class FoodieappApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(FoodieappApplication.class, args);\r\n\t}\r\n}\r\n```\r\n\r\nThis is my UserController.java class\r\n```\r\npackage com.pafproject.foodieapp.Controller;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.pafproject.foodieapp.Entity.Users;\r\nimport com.pafproject.foodieapp.Service.UserService;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/users&quot;)\r\npublic class UserController {\r\n\t\r\n\t@Autowired\r\n\tUserService userService;\r\n\r\n\t@PostMapping(&quot;&quot;)\r\n\tprivate Users submitUser(@RequestBody Users users) {\r\n\t\treturn userService.submitMetaDataOfUser(users);\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/{userid}&quot;)\r\n\tprivate Users getUserDetails(@PathVariable(&quot;userid&quot;) String userId) {\r\n\t\treturn userService.displayUserMetaData(userId);\r\n\t}\r\n}\r\n```\r\n\r\nThis is my UserService.java class:\r\n```\r\npackage com.pafproject.foodieapp.Service;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport com.pafproject.foodieapp.Entity.Users;\r\nimport com.pafproject.foodieapp.Repository.UserRepo;\r\n\r\n@Service\r\npublic class UserService {\r\n\r\n\t@Autowired\r\n\tUserRepo userRepo;\r\n\t\r\n\tpublic Users submitMetaDataOfUser(Users user) {\r\n\t\treturn userRepo.save(user);\r\n\t}\r\n\t\r\n\tpublic Users displayUserMetaData(String userid) {\r\n\t\treturn userRepo.findByUserId(userid);\r\n\t}\r\n}\r\n```\r\n\r\nThis is my UserRepo.java class:\r\n```\r\npackage com.pafproject.foodieapp.Repository;\r\n\r\nimport org.springframework.data.repository.CrudRepository;\r\nimport org.springframework.stereotype.Repository;\r\nimport com.pafproject.foodieapp.Entity.Users;\r\n\r\n@Repository\r\npublic interface UserRepo extends CrudRepository&lt;Users, Integer&gt;{\r\n\r\n\tUsers save(Users user);\r\n\tUsers findByUserId(String userId);\r\n}\r\n```\r\n\r\nThis is my Users class:\r\n```\r\npackage com.pafproject.foodieapp.Entity;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.Id;\r\nimport com.sun.istack.NotNull;\r\n\r\n@Entity(name=&quot;Users&quot;)\r\npublic class Users {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue\r\n\tprivate int id;\r\n\t\r\n\t@NotNull\r\n\tprivate String userID;\r\n\tprivate String userName;\r\n\tprivate String name;\r\n\tprivate String profileImage;\r\n\tpublic Users() {\r\n\t\tsuper();\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\tpublic Users(int id, String userID, String userName, String name, String profileImage) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.userID = userID;\r\n\t\tthis.userName = userName;\r\n\t\tthis.name = name;\r\n\t\tthis.profileImage = profileImage;\r\n\t}\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\tpublic String getUserID() {\r\n\t\treturn userID;\r\n\t}\r\n\tpublic void setUserID(String userID) {\r\n\t\tthis.userID = userID;\r\n\t}\r\n\tpublic String getUserName() {\r\n\t\treturn userName;\r\n\t}\r\n\tpublic void setUserName(String userName) {\r\n\t\tthis.userName = userName;\r\n\t}\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\tpublic String getProfileImage() {\r\n\t\treturn profileImage;\r\n\t}\r\n\tpublic void setProfileImage(String profileImage) {\r\n\t\tthis.profileImage = profileImage;\r\n\t}\r\n}\r\n```","title":"Field in required a bean of type that could not be found","body":"<p>I tried several solutions from this platform and other sources as well but none of them worked.</p>\n<h4>Application failed to start</h4>\n<p>Description:</p>\n<pre><code>Field userRepo in\ncom.pafproject.foodieapp.Service.UserService\nrequired a bean of type\n'com.pafproject.foodieapp.Repository.UserRepo'\nthat could not be found.\n</code></pre>\n<p>The injection point has the following annotations:</p>\n<pre><code>@org.springframework.beans.factory.annotation.Autowired(required=true)\n</code></pre>\n<p>Action:</p>\n<pre><code>Consider defining a bean of type\n'com.pafproject.foodieapp.Repository.UserRepo'\nin your configuration.\n</code></pre>\n<p>This is my main class</p>\n<pre><code>package com.pafproject.foodieapp;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class FoodieappApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(FoodieappApplication.class, args);\n    }\n}\n</code></pre>\n<p>This is my UserController.java class</p>\n<pre><code>package com.pafproject.foodieapp.Controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\n\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.pafproject.foodieapp.Entity.Users;\nimport com.pafproject.foodieapp.Service.UserService;\n\n@RestController\n@RequestMapping(&quot;/users&quot;)\npublic class UserController {\n    \n    @Autowired\n    UserService userService;\n\n    @PostMapping(&quot;&quot;)\n    private Users submitUser(@RequestBody Users users) {\n        return userService.submitMetaDataOfUser(users);\n    }\n    \n    @GetMapping(&quot;/{userid}&quot;)\n    private Users getUserDetails(@PathVariable(&quot;userid&quot;) String userId) {\n        return userService.displayUserMetaData(userId);\n    }\n}\n</code></pre>\n<p>This is my UserService.java class:</p>\n<pre><code>package com.pafproject.foodieapp.Service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport com.pafproject.foodieapp.Entity.Users;\nimport com.pafproject.foodieapp.Repository.UserRepo;\n\n@Service\npublic class UserService {\n\n    @Autowired\n    UserRepo userRepo;\n    \n    public Users submitMetaDataOfUser(Users user) {\n        return userRepo.save(user);\n    }\n    \n    public Users displayUserMetaData(String userid) {\n        return userRepo.findByUserId(userid);\n    }\n}\n</code></pre>\n<p>This is my UserRepo.java class:</p>\n<pre><code>package com.pafproject.foodieapp.Repository;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\nimport com.pafproject.foodieapp.Entity.Users;\n\n@Repository\npublic interface UserRepo extends CrudRepository&lt;Users, Integer&gt;{\n\n    Users save(Users user);\n    Users findByUserId(String userId);\n}\n</code></pre>\n<p>This is my Users class:</p>\n<pre><code>package com.pafproject.foodieapp.Entity;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport com.sun.istack.NotNull;\n\n@Entity(name=&quot;Users&quot;)\npublic class Users {\n    \n    @Id\n    @GeneratedValue\n    private int id;\n    \n    @NotNull\n    private String userID;\n    private String userName;\n    private String name;\n    private String profileImage;\n    public Users() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n    public Users(int id, String userID, String userName, String name, String profileImage) {\n        super();\n        this.id = id;\n        this.userID = userID;\n        this.userName = userName;\n        this.name = name;\n        this.profileImage = profileImage;\n    }\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getUserID() {\n        return userID;\n    }\n    public void setUserID(String userID) {\n        this.userID = userID;\n    }\n    public String getUserName() {\n        return userName;\n    }\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public String getProfileImage() {\n        return profileImage;\n    }\n    public void setProfileImage(String profileImage) {\n        this.profileImage = profileImage;\n    }\n}\n</code></pre>\n"},{"tags":["java","aws-device-farm","playwright-java"],"owner":{"account_id":28503362,"reputation":1,"user_id":21814329,"display_name":"shweta gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683221891,"creation_date":1683192956,"question_id":76171698,"body_markdown":"I want to run my playwright script written in java on AWS device farm browser.\r\nHow can I achieve that in java?\r\n\r\nSelenium Example is pretty simpler by passing device farm detail in to Remote Webdriver.\r\n\r\nnot getting enough supporting document for device farm with playwright.","title":"How to run playwright java test case on AWS Device Farm","body":"<p>I want to run my playwright script written in java on AWS device farm browser.\nHow can I achieve that in java?</p>\n<p>Selenium Example is pretty simpler by passing device farm detail in to Remote Webdriver.</p>\n<p>not getting enough supporting document for device farm with playwright.</p>\n"},{"tags":["java","neovim"],"comments":[{"owner":{"account_id":10775944,"reputation":1137,"user_id":7927982,"accept_rate":62,"display_name":"Auryn"},"score":0,"creation_date":1690228193,"post_id":76170551,"comment_id":135321287,"body_markdown":"I have the same issue. would love to see the solution if found :/","body":"I have the same issue. would love to see the solution if found :/"}],"owner":{"account_id":28502107,"reputation":21,"user_id":21813215,"display_name":"4Gettt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":503,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683221770,"creation_date":1683185101,"question_id":76170551,"body_markdown":"I&#39;m currently trying to get jdtls in my neovim config to work but everytime I open a java file it doesnt start right \r\n\r\nthe lsp.log says the following: \r\n```\r\n[START][2023-04-20 14:25:54] LSP logging initiated\r\n[ERROR][2023-04-20 14:25:54] .../vim/lsp/rpc.lua:734\t&quot;rpc&quot;\t&quot;jdtls&quot;\t&quot;stderr&quot;\t&quot;WARNING: Using incubator modules: jdk.incubator.concurrent, jdk.incubator.vector\\n&quot;\r\n[WARN][2023-04-20 14:26:13] ...lsp/handlers.lua:137\t&quot;The language server jdtls triggers a registerCapability handler despite dynamicRegistration set to false. Report upstream, this warning is harmless&quot;\r\n[WARN][2023-04-20 14:26:13] .../lua/vim/lsp.lua:1073\t&quot;server_request: no handler found for&quot;\t&quot;workspace/executeClientCommand&quot;\r\n[ERROR][2023-04-20 14:26:16] ...lsp/handlers.lua:535\t&quot;Apr 20, 2023, 2:26:16 PM org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\norg.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\njava.util.concurrent.CompletionException: org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\n\\tat java.base/java.util.concurrent.CompletableFuture.reportJoin(CompletableFuture.java:413)\\n\\tat java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2118)\\n\\tat org.eclipse.jdt.ls.core.internal.JavaClientConnection.executeClientCommand(JavaClientConnection.java:93)\\n\\tat org.eclipse.jdt.ls.core.internal.handlers.JDTLanguageServer.synchronizeBundles(JDTLanguageServer.java:414)\\n\\tat org.eclipse.jdt.ls.core.internal.handlers.JDTLanguageServer$2.run(JDTLanguageServer.java:301)\\n\\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)\\nCaused by: org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\n\\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.handleResponse(RemoteEndpoint.java:209)\\n\\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.consume(RemoteEndpoint.java:193)\\n\\tat org.eclipse.jdt.ls.core.internal.ParentProcessWatcher.lambda$1(ParentProcessWatcher.java:144)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.handleMessage(StreamMessageProducer.java:194)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:94)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:113)\\n\\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577)\\n\\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\\n\\tat java.base/java.lang.Thread.run(Thread.java:1623)\\n&quot;\r\n```\r\n- I tried changing my jdk version from the latest to 17\r\n- I tried manually installing jdtls and configuring it without the lsp and mason plugin","title":"can&#39;t get jdtls to work in neovim with LspInstall","body":"<p>I'm currently trying to get jdtls in my neovim config to work but everytime I open a java file it doesnt start right</p>\n<p>the lsp.log says the following:</p>\n<pre><code>[START][2023-04-20 14:25:54] LSP logging initiated\n[ERROR][2023-04-20 14:25:54] .../vim/lsp/rpc.lua:734    &quot;rpc&quot;   &quot;jdtls&quot; &quot;stderr&quot;    &quot;WARNING: Using incubator modules: jdk.incubator.concurrent, jdk.incubator.vector\\n&quot;\n[WARN][2023-04-20 14:26:13] ...lsp/handlers.lua:137 &quot;The language server jdtls triggers a registerCapability handler despite dynamicRegistration set to false. Report upstream, this warning is harmless&quot;\n[WARN][2023-04-20 14:26:13] .../lua/vim/lsp.lua:1073    &quot;server_request: no handler found for&quot;  &quot;workspace/executeClientCommand&quot;\n[ERROR][2023-04-20 14:26:16] ...lsp/handlers.lua:535    &quot;Apr 20, 2023, 2:26:16 PM org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\norg.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\njava.util.concurrent.CompletionException: org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\n\\tat java.base/java.util.concurrent.CompletableFuture.reportJoin(CompletableFuture.java:413)\\n\\tat java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2118)\\n\\tat org.eclipse.jdt.ls.core.internal.JavaClientConnection.executeClientCommand(JavaClientConnection.java:93)\\n\\tat org.eclipse.jdt.ls.core.internal.handlers.JDTLanguageServer.synchronizeBundles(JDTLanguageServer.java:414)\\n\\tat org.eclipse.jdt.ls.core.internal.handlers.JDTLanguageServer$2.run(JDTLanguageServer.java:301)\\n\\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)\\nCaused by: org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\n\\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.handleResponse(RemoteEndpoint.java:209)\\n\\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.consume(RemoteEndpoint.java:193)\\n\\tat org.eclipse.jdt.ls.core.internal.ParentProcessWatcher.lambda$1(ParentProcessWatcher.java:144)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.handleMessage(StreamMessageProducer.java:194)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:94)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:113)\\n\\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577)\\n\\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\\n\\tat java.base/java.lang.Thread.run(Thread.java:1623)\\n&quot;\n</code></pre>\n<ul>\n<li>I tried changing my jdk version from the latest to 17</li>\n<li>I tried manually installing jdtls and configuring it without the lsp and mason plugin</li>\n</ul>\n"},{"tags":["java","hibernate","sqlite","gradle","intellij-idea"],"comments":[{"owner":{"account_id":1327194,"reputation":1809,"user_id":1271785,"accept_rate":67,"display_name":"pfurbacher"},"score":2,"creation_date":1683257008,"post_id":76175872,"comment_id":134342457,"body_markdown":"The Baeldung article on [Spring Boot With SQLite](https://www.baeldung.com/spring-boot-sqlite#sqlite-dialect) suggests that for Hibernate 6, the SQLite dialect is a part of Hibernate&#39;s community supported dialects. Therefore, you have to add the following dependency: `implementation &#39;org.hibernate.orm:hibernate-community-dialects:6.2.2.Final&#39;` to your build file.","body":"The Baeldung article on <a href=\"https://www.baeldung.com/spring-boot-sqlite#sqlite-dialect\" rel=\"nofollow noreferrer\">Spring Boot With SQLite</a> suggests that for Hibernate 6, the SQLite dialect is a part of Hibernate&#39;s community supported dialects. Therefore, you have to add the following dependency: <code>implementation &#39;org.hibernate.orm:hibernate-community-dialects:6.2.2.Final&#39;</code> to your build file."},{"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"score":0,"creation_date":1683282211,"post_id":76175872,"comment_id":134346325,"body_markdown":"That is correct.","body":"That is correct."}],"owner":{"account_id":27454054,"reputation":11,"user_id":20945806,"display_name":"randomnamme"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":472,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683221153,"creation_date":1683221153,"question_id":76175872,"body_markdown":"I&#39;m trying for 2 hours to configure Hibernate for my JavaFX project in Intellij IDEA, that uses a SQLite database. I&#39;ve been searching on the internet how to do this and I also checked the official documentation, but they are all useless and do not offer any help at all.\r\n\r\nI added this in the &#39;dependecies&#39; part of build.gradle: \r\n```\r\nimplementation &#39;org.hibernate:hibernate-core:6.2.2.Final&#39;\r\nruntimeOnly group: &#39;org.xerial&#39;, name: &#39;sqlite-jdbc&#39;, version: &#39;3.40.1.0&#39;\r\n```\r\nI also saw that a &#39;hibernate.cfg.xml&#39; file is required under the &#39;resources&#39; folder.\r\nI created it, but I hardly found any help with what is supposed to be in there. I added this:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration SYSTEM &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;!-- Database connection settings --&gt;\r\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.sqlite.JDBC&lt;/property&gt;\r\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:sqlite:/path/to/database&lt;/property&gt;\r\n\r\n        &lt;!-- SQL dialect --&gt;\r\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.SQLiteDialect&lt;/property&gt;\r\n\r\n        &lt;!-- Echo all executed SQL to stdout --&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n\r\n        &lt;!-- Auto-create/update database schema --&gt;\r\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n\r\n        &lt;!-- Mapping files\r\n        &lt;mapping class=&quot;com.example.User&quot;/&gt; --&gt;\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\nHowever, I have this issue in this file: &#39;Cannot resolve class &#39;SQLiteDialect&#39;:10.\r\nI suppose I have to add a new dependency that supports SQLite for Hibernate, however I don&#39;t know what name it would have, because every official &#39;documentation&#39; and &#39;tutorial&#39; is a complete waste of time and does not address this.\r\n\r\nI probably expect to not find any help here as well, because 99% of the times the answers that a question gets are not helpful at all, but I will try my luck.","title":"How to configure Hibernate for a SQLite database in a JavaFX project?","body":"<p>I'm trying for 2 hours to configure Hibernate for my JavaFX project in Intellij IDEA, that uses a SQLite database. I've been searching on the internet how to do this and I also checked the official documentation, but they are all useless and do not offer any help at all.</p>\n<p>I added this in the 'dependecies' part of build.gradle:</p>\n<pre><code>implementation 'org.hibernate:hibernate-core:6.2.2.Final'\nruntimeOnly group: 'org.xerial', name: 'sqlite-jdbc', version: '3.40.1.0'\n</code></pre>\n<p>I also saw that a 'hibernate.cfg.xml' file is required under the 'resources' folder.\nI created it, but I hardly found any help with what is supposed to be in there. I added this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration SYSTEM &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;!-- Database connection settings --&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.sqlite.JDBC&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:sqlite:/path/to/database&lt;/property&gt;\n\n        &lt;!-- SQL dialect --&gt;\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.SQLiteDialect&lt;/property&gt;\n\n        &lt;!-- Echo all executed SQL to stdout --&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n\n        &lt;!-- Auto-create/update database schema --&gt;\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n\n        &lt;!-- Mapping files\n        &lt;mapping class=&quot;com.example.User&quot;/&gt; --&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>However, I have this issue in this file: 'Cannot resolve class 'SQLiteDialect':10.\nI suppose I have to add a new dependency that supports SQLite for Hibernate, however I don't know what name it would have, because every official 'documentation' and 'tutorial' is a complete waste of time and does not address this.</p>\n<p>I probably expect to not find any help here as well, because 99% of the times the answers that a question gets are not helpful at all, but I will try my luck.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":18559672,"reputation":300,"user_id":13523946,"display_name":"notAPPP"},"score":0,"creation_date":1683218858,"post_id":76175491,"comment_id":134336741,"body_markdown":"mvn clean install should fix this","body":"mvn clean install should fix this"},{"owner":{"account_id":16654350,"reputation":11,"user_id":12036204,"display_name":"Tablesalt"},"score":0,"creation_date":1683257573,"post_id":76175491,"comment_id":134342489,"body_markdown":"where do I run that?","body":"where do I run that?"}],"answers":[{"tags":[],"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683219016,"creation_date":1683219016,"answer_id":76175584,"question_id":76175491,"body_markdown":"from your log &quot;Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa&quot;\r\n\r\nlooks like you don&#39;t have driver jar on your classpath ","title":"Spring Boot API not starting","body":"<p>from your log &quot;Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa&quot;</p>\n<p>looks like you don't have driver jar on your classpath</p>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683220262,"creation_date":1683220262,"answer_id":76175741,"question_id":76175491,"body_markdown":"I don&#39;t see the Postgres JDBC driver in your Maven pom.xml.  I&#39;d recommend adding it unless I missed it:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;version&gt;42.6.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI went back and saw that you have the driver, but there&#39;s no version.  I&#39;m not sure why you made the scope runtime.  I&#39;d change that.  Make sure you see the JAR in the package after you create it.\r\n\r\n","title":"Spring Boot API not starting","body":"<p>I don't see the Postgres JDBC driver in your Maven pom.xml.  I'd recommend adding it unless I missed it:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;version&gt;42.6.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I went back and saw that you have the driver, but there's no version.  I'm not sure why you made the scope runtime.  I'd change that.  Make sure you see the JAR in the package after you create it.</p>\n"}],"owner":{"account_id":16654350,"reputation":11,"user_id":12036204,"display_name":"Tablesalt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683220262,"creation_date":1683218426,"question_id":76175491,"body_markdown":"I am creating a basic API to send sudoku puzzles and I am having trouble running the API. This is my first time trying to use Spring on my own and I followed the same steps as I did when I did the tutorial but it keeps crashing.\r\n\r\nHere are the logs.\r\n\r\n```\r\n2023-05-04T12:34:40.727-04:00  INFO 21276 --- [           main] com.sudoku.SudokuApplication             : Starting SudokuApplication using Java 17.0.6 with PID 21276 (C:\\Users\\olive\\Downloads\\sudokuApi\\demo\\target\\classes started by olive in C:\\Users\\olive\\Downloads\\sudokuApi\\demo)\r\n2023-05-04T12:34:40.734-04:00  INFO 21276 --- [           main] com.sudoku.SudokuApplication             : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-05-04T12:34:42.424-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-05-04T12:34:42.424-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.8]\r\n2023-05-04T12:34:42.546-04:00  INFO 21276 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-05-04T12:34:42.658-04:00 ERROR 21276 --- [           main] com.zaxxer.hikari.HikariConfig           : Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa\r\n2023-05-04T12:34:42.666-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-05-04T12:34:42.719-04:00 ERROR 21276 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n```\r\n\r\nMy application properties are below, I changed the username and password but I know for sure I have the right ones.\r\n\r\n```\r\nspring.main.banner-mode=off\r\nlogging.level.org.springframework=ERROR\r\n\r\nspring.jpa.hibernate.ddl-auto=none\r\n\r\nspring.datasource.initialization-mode=always\r\nspring.datasource.platform=postgres\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/sudoku\r\nspring.datasource.username=CHANGED\r\nspring.datasource.password=CHANGED\r\n\r\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\r\n```\r\n\r\nmy pom.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.6&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;Sudoku&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nI am not really sure how to read these kind of error codes so I copy pasted them and tried to find anything but nothing seems to work.\r\n\r\nIs there something I am missing?","title":"Spring Boot API not starting","body":"<p>I am creating a basic API to send sudoku puzzles and I am having trouble running the API. This is my first time trying to use Spring on my own and I followed the same steps as I did when I did the tutorial but it keeps crashing.</p>\n<p>Here are the logs.</p>\n<pre><code>2023-05-04T12:34:40.727-04:00  INFO 21276 --- [           main] com.sudoku.SudokuApplication             : Starting SudokuApplication using Java 17.0.6 with PID 21276 (C:\\Users\\olive\\Downloads\\sudokuApi\\demo\\target\\classes started by olive in C:\\Users\\olive\\Downloads\\sudokuApi\\demo)\n2023-05-04T12:34:40.734-04:00  INFO 21276 --- [           main] com.sudoku.SudokuApplication             : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-05-04T12:34:42.424-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-05-04T12:34:42.424-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.8]\n2023-05-04T12:34:42.546-04:00  INFO 21276 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-05-04T12:34:42.658-04:00 ERROR 21276 --- [           main] com.zaxxer.hikari.HikariConfig           : Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa\n2023-05-04T12:34:42.666-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-05-04T12:34:42.719-04:00 ERROR 21276 --- [           main] o.s.boot.SpringApplication               : Application run failed\n</code></pre>\n<p>My application properties are below, I changed the username and password but I know for sure I have the right ones.</p>\n<pre><code>spring.main.banner-mode=off\nlogging.level.org.springframework=ERROR\n\nspring.jpa.hibernate.ddl-auto=none\n\nspring.datasource.initialization-mode=always\nspring.datasource.platform=postgres\nspring.datasource.url=jdbc:postgresql://localhost:5432/sudoku\nspring.datasource.username=CHANGED\nspring.datasource.password=CHANGED\n\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\n</code></pre>\n<p>my pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Sudoku&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I am not really sure how to read these kind of error codes so I copy pasted them and tried to find anything but nothing seems to work.</p>\n<p>Is there something I am missing?</p>\n"},{"tags":["java"],"owner":{"account_id":1674568,"reputation":59,"user_id":1540385,"display_name":"user1540385"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683220193,"creation_date":1683220193,"question_id":76175729,"body_markdown":"In Java rest server we are using truststore. But certificates will expire every 4 hour. Is there any way to update truststore with new certificate without restarting web server in spring framework?","title":"Updating truststore without webserver restart","body":"<p>In Java rest server we are using truststore. But certificates will expire every 4 hour. Is there any way to update truststore with new certificate without restarting web server in spring framework?</p>\n"},{"tags":["java","zip"],"comments":[{"owner":{"account_id":1643900,"reputation":13042,"user_id":1515834,"accept_rate":82,"display_name":"Bobulous"},"score":1,"creation_date":1343935009,"post_id":11784102,"comment_id":15653590,"body_markdown":"ZipEntry can represent a directory too. See the [isDirectory()](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipEntry.html#isDirectory()) method.","body":"ZipEntry can represent a directory too. See the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipEntry.html#isDirectory()\" rel=\"nofollow noreferrer\">isDirectory()</a> method."}],"answers":[{"tags":[],"owner":{"account_id":1707747,"reputation":635,"user_id":1566473,"display_name":"Manisha Mahawar"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1495037619,"creation_date":1343934801,"answer_id":11784238,"question_id":11784102,"body_markdown":"Yes. It will print the folder name too, since it&#39;s also an entry within the zip. It will also print in the same order as it is displayed inside the zip. You can use below test to verify your output.\r\n\r\n    public class TestZipOrder {\r\n    \t@Test\r\n    \tpublic void testZipOrder() throws Exception {\r\n    \t\tFile file = new File(&quot;/Project/test.zip&quot;);\r\n    \t\tZipInputStream zis = new ZipInputStream(new FileInputStream(file));\r\n    \t\tZipEntry entry = null;\r\n    \t\twhile ( (entry = zis.getNextEntry()) != null ) {\r\n    \t\t System.out.println( entry.getName());\r\n    \t\t}\r\n        }\r\n    }\r\n\r\n","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>Yes. It will print the folder name too, since it's also an entry within the zip. It will also print in the same order as it is displayed inside the zip. You can use below test to verify your output.</p>\n\n<pre><code>public class TestZipOrder {\n    @Test\n    public void testZipOrder() throws Exception {\n        File file = new File(\"/Project/test.zip\");\n        ZipInputStream zis = new ZipInputStream(new FileInputStream(file));\n        ZipEntry entry = null;\n        while ( (entry = zis.getNextEntry()) != null ) {\n         System.out.println( entry.getName());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":175234,"reputation":4172,"user_id":405117,"accept_rate":74,"display_name":"Vikram"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1343935823,"creation_date":1343934810,"answer_id":11784242,"question_id":11784102,"body_markdown":"Excerpt from: https://blogs.oracle.com/CoreJavaTechTips/entry/creating_zip_and_jar_files\r\n\r\njava.util.zip libraries offer some level of control for the added entries of the ZipOutputStream. \r\n\r\nFirst, **the order you add entries to the ZipOutputStream is the order they are physically located in the .zip file**. \r\n\r\n**You can manipulate the enumeration of entries returned back by the entries() method of ZipFile to produce a list in alphabetical or size order, but the entries are still stored in the order they were written to the output stream.**\r\n\r\nSo I would believe that you have to use the entries() method to see the order in which it will be iterated through. \r\n\r\n\r\n\r\n     ZipFile zf = new ZipFile(&quot;your file path with file name&quot;);\r\n\t\tfor (Enumeration&lt;? extends ZipEntry&gt; e = zf.entries();\r\n        e.hasMoreElements();) {\r\n\t\t  System.out.println(e.nextElement().getName());\r\n\t\t}","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>Excerpt from: <a href=\"https://blogs.oracle.com/CoreJavaTechTips/entry/creating_zip_and_jar_files\" rel=\"noreferrer\">https://blogs.oracle.com/CoreJavaTechTips/entry/creating_zip_and_jar_files</a></p>\n\n<p>java.util.zip libraries offer some level of control for the added entries of the ZipOutputStream. </p>\n\n<p>First, <strong>the order you add entries to the ZipOutputStream is the order they are physically located in the .zip file</strong>. </p>\n\n<p><strong>You can manipulate the enumeration of entries returned back by the entries() method of ZipFile to produce a list in alphabetical or size order, but the entries are still stored in the order they were written to the output stream.</strong></p>\n\n<p>So I would believe that you have to use the entries() method to see the order in which it will be iterated through. </p>\n\n<pre><code> ZipFile zf = new ZipFile(\"your file path with file name\");\n    for (Enumeration&lt;? extends ZipEntry&gt; e = zf.entries();\n    e.hasMoreElements();) {\n      System.out.println(e.nextElement().getName());\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1643518,"reputation":656,"user_id":1515522,"display_name":"Zoop"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1343935147,"creation_date":1343935147,"answer_id":11784325,"question_id":11784102,"body_markdown":"Well... Lets see:\r\n\r\n            ZipInputStream zis = new ZipInputStream(new FileInputStream(&quot;C:\\\\New Folder.zip&quot;));\r\n            try\r\n            {\r\n                ZipEntry temp = null;\r\n                while ( (temp = zis.getNextEntry()) != null ) \r\n                {\r\n                 System.out.println( temp.getName());\r\n                }\r\n            }\r\n\r\nOutput:\r\n\r\n&gt; New Folder/\r\n&gt; \r\n&gt; New Folder/folder1/\r\n&gt; \r\n&gt; New Folder/folder1/bar.java\r\n&gt; \r\n&gt; New Folder/folder1/foo.c\r\n&gt; \r\n&gt; New Folder/foobar.c\r\n&gt; \r\n&gt; New Folder/hello.c\r\n&gt; \r\n&gt; New Folder/world.java","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>Well... Lets see:</p>\n\n<pre><code>        ZipInputStream zis = new ZipInputStream(new FileInputStream(\"C:\\\\New Folder.zip\"));\n        try\n        {\n            ZipEntry temp = null;\n            while ( (temp = zis.getNextEntry()) != null ) \n            {\n             System.out.println( temp.getName());\n            }\n        }\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>New Folder/</p>\n  \n  <p>New Folder/folder1/</p>\n  \n  <p>New Folder/folder1/bar.java</p>\n  \n  <p>New Folder/folder1/foo.c</p>\n  \n  <p>New Folder/foobar.c</p>\n  \n  <p>New Folder/hello.c</p>\n  \n  <p>New Folder/world.java</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343935149,"creation_date":1343935149,"answer_id":11784326,"question_id":11784102,"body_markdown":"The zip file internal directory is a &quot;flat&quot; list of all the files and directories in the zip.  `getNextEntry` will iterate through the list and sequentially identify every file and directory in the zip file.\r\n\r\nThere is a variant of the zip file format that has no central directory, in which case (if it&#39;s handled at all) I suspect you&#39;d iterate through all actual files in the zip, skipping directories (but not skipping files in directories).","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>The zip file internal directory is a \"flat\" list of all the files and directories in the zip.  <code>getNextEntry</code> will iterate through the list and sequentially identify every file and directory in the zip file.</p>\n\n<p>There is a variant of the zip file format that has no central directory, in which case (if it's handled at all) I suspect you'd iterate through all actual files in the zip, skipping directories (but not skipping files in directories).</p>\n"},{"tags":[],"owner":{"account_id":5809798,"reputation":68,"user_id":4581268,"display_name":"Jeremy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683219616,"creation_date":1683219616,"answer_id":76175664,"question_id":11784102,"body_markdown":"I&#39;d like to explain in more details why [Vikram&#39;s answer][1] is correct and the [accepted][2] and [highest scoring][3] answers are potentially misleading or incomplete.\r\n\r\nAs Vikram stated (correctly)\r\n\r\n&gt; The order you add entries to the `ZipOutputStream` is the order they are physically located in the .zip file.\r\n\r\n\r\nI found this part of the accepted answer to be potentially misleading:\r\n&gt; It will also print in the same order as it is displayed inside the zip.\r\n\r\nOne gotcha I&#39;d like to note is that **files within a folder are not guaranteed to be returned in succession.**\r\n\r\nDifferent tools display zip file contents in different orders. In particular any tools with a GUI will show all files in a folder together whereas the actual files within the zip they may be scattered throughout.\r\n\r\nLet&#39;s walk through the two scenarios below.\r\n\r\n---\r\n### Scenario 1: Files in Tree Order\r\n\r\nStarting with a file tree like this\r\n```\r\n$ tree\r\n├── folder1\r\n│&#160;&#160; ├── bar.java\r\n│&#160;&#160; └── foo.c\r\n├── foobar.c\r\n├── hello.c\r\n└── world.java\r\n```\r\n\r\nNow let&#39;s create a zip from this directory using the Linux `zip` command.\r\n```\r\n$ zip -r zip1.zip ./*\r\n  adding: folder1/ (stored 0%)\r\n  adding: folder1/foo.c (stored 0%)\r\n  adding: folder1/bar.java (stored 0%)\r\n  adding: foobar.c (stored 0%)\r\n  adding: hello.c (stored 0%)\r\n  adding: world.java (stored 0%)\r\n```\r\nNote the order these files were added. This is the same order that they will be iterated through when using `ZipOutputStream`. Test that with the following script (borrowed from Zoop&#39;s answer)\r\n```\r\njshell&gt; import java.util.zip.*;\r\n   ...&gt; ZipInputStream zis = new ZipInputStream(new FileInputStream(&quot;./zip1.zip&quot;));\r\n   ...&gt; ZipEntry temp = null;\r\n   ...&gt; while ( (temp = zis.getNextEntry()) != null )\r\n   ...&gt; {\r\n   ...&gt;     System.out.println(temp.getName());\r\n   ...&gt; }\r\n```\r\n```\r\nfolder1/\r\nfolder1/foo.c\r\nfolder1/bar.java\r\nfoobar.c\r\nhello.c\r\nworld.java\r\n```\r\n---\r\n### Scenario 2: Files Scattered\r\n\r\nIf we add the files in a different order then they will be iterated through in a different order. Let&#39;s try that by using the zip command to create a new file which we add files to 1-by-1:\r\n```\r\nzip -m zip1.zip ./hello.c\r\nzip -m zip1.zip ./folder1\r\nzip -m zip2.zip ./folder1/foo.c\r\nzip -m zip1.zip ./world.java\r\nzip -m zip1.zip ./foobar.c\r\nzip -m zip1.zip ./folder1/bar.java # Notice we&#39;re adding this LAST\r\n```\r\nNow if we iterate through the files you&#39;ll see that `folder1/bar.java` is the last entry because it was added last. It will not be returned alongside the other folder contents. The directory entry will not be duplicated or immediately precede it.\r\n```\r\nhello.c\r\nfolder1/\r\nfolder1/foo.c\r\nworld.java\r\nfoobar.c\r\nfolder1/bar.java\r\n```\r\n\r\nThe zip spec is quite complex so be very careful when using ZipInputStream.\r\n\r\n  [1]: https://stackoverflow.com/a/11784242/4581268\r\n  [2]: https://stackoverflow.com/a/11784238/4581268\r\n  [3]: https://stackoverflow.com/a/11784325/4581268","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>I'd like to explain in more details why <a href=\"https://stackoverflow.com/a/11784242/4581268\">Vikram's answer</a> is correct and the <a href=\"https://stackoverflow.com/a/11784238/4581268\">accepted</a> and <a href=\"https://stackoverflow.com/a/11784325/4581268\">highest scoring</a> answers are potentially misleading or incomplete.</p>\n<p>As Vikram stated (correctly)</p>\n<blockquote>\n<p>The order you add entries to the <code>ZipOutputStream</code> is the order they are physically located in the .zip file.</p>\n</blockquote>\n<p>I found this part of the accepted answer to be potentially misleading:</p>\n<blockquote>\n<p>It will also print in the same order as it is displayed inside the zip.</p>\n</blockquote>\n<p>One gotcha I'd like to note is that <strong>files within a folder are not guaranteed to be returned in succession.</strong></p>\n<p>Different tools display zip file contents in different orders. In particular any tools with a GUI will show all files in a folder together whereas the actual files within the zip they may be scattered throughout.</p>\n<p>Let's walk through the two scenarios below.</p>\n<hr />\n<h3>Scenario 1: Files in Tree Order</h3>\n<p>Starting with a file tree like this</p>\n<pre><code>$ tree\n├── folder1\n│   ├── bar.java\n│   └── foo.c\n├── foobar.c\n├── hello.c\n└── world.java\n</code></pre>\n<p>Now let's create a zip from this directory using the Linux <code>zip</code> command.</p>\n<pre><code>$ zip -r zip1.zip ./*\n  adding: folder1/ (stored 0%)\n  adding: folder1/foo.c (stored 0%)\n  adding: folder1/bar.java (stored 0%)\n  adding: foobar.c (stored 0%)\n  adding: hello.c (stored 0%)\n  adding: world.java (stored 0%)\n</code></pre>\n<p>Note the order these files were added. This is the same order that they will be iterated through when using <code>ZipOutputStream</code>. Test that with the following script (borrowed from Zoop's answer)</p>\n<pre><code>jshell&gt; import java.util.zip.*;\n   ...&gt; ZipInputStream zis = new ZipInputStream(new FileInputStream(&quot;./zip1.zip&quot;));\n   ...&gt; ZipEntry temp = null;\n   ...&gt; while ( (temp = zis.getNextEntry()) != null )\n   ...&gt; {\n   ...&gt;     System.out.println(temp.getName());\n   ...&gt; }\n</code></pre>\n<pre><code>folder1/\nfolder1/foo.c\nfolder1/bar.java\nfoobar.c\nhello.c\nworld.java\n</code></pre>\n<hr />\n<h3>Scenario 2: Files Scattered</h3>\n<p>If we add the files in a different order then they will be iterated through in a different order. Let's try that by using the zip command to create a new file which we add files to 1-by-1:</p>\n<pre><code>zip -m zip1.zip ./hello.c\nzip -m zip1.zip ./folder1\nzip -m zip2.zip ./folder1/foo.c\nzip -m zip1.zip ./world.java\nzip -m zip1.zip ./foobar.c\nzip -m zip1.zip ./folder1/bar.java # Notice we're adding this LAST\n</code></pre>\n<p>Now if we iterate through the files you'll see that <code>folder1/bar.java</code> is the last entry because it was added last. It will not be returned alongside the other folder contents. The directory entry will not be duplicated or immediately precede it.</p>\n<pre><code>hello.c\nfolder1/\nfolder1/foo.c\nworld.java\nfoobar.c\nfolder1/bar.java\n</code></pre>\n<p>The zip spec is quite complex so be very careful when using ZipInputStream.</p>\n"}],"owner":{"account_id":1714555,"reputation":2080,"user_id":1571933,"accept_rate":59,"display_name":"joshualan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26753,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":11784238,"answer_count":5,"score":20,"last_activity_date":1683219616,"creation_date":1343934224,"question_id":11784102,"body_markdown":"Say we have code like:\r\n\r\n    File file = new File(&quot;zip1.zip&quot;);\r\n    ZipInputStream zis = new ZipInputStream(new FileInputStream(file));\r\n\r\nLet&#39;s assume you have a .zip file that contains the following:\r\n\r\n - zip1.zip\r\n  - hello.c\r\n  - world.java\r\n  - folder1\r\n     - foo.c\r\n     - bar.java\r\n  - foobar.c\r\n\r\nHow would zis.getNextEntry() iterate through that? \r\n\r\nWould it return hello.c, world.java, folder1, foobar.c and completely ignore the files in folder1?\r\n\r\nOr would it return hello.c, world.java, folder1, foo.c, bar.java, and then foobar.c?\r\n\r\nWould it even return folder1 since it&#39;s technically a folder and not a file?\r\n\r\nThanks!\r\n\r\n","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>Say we have code like:</p>\n\n<pre><code>File file = new File(\"zip1.zip\");\nZipInputStream zis = new ZipInputStream(new FileInputStream(file));\n</code></pre>\n\n<p>Let's assume you have a .zip file that contains the following:</p>\n\n<ul>\n<li>zip1.zip\n<ul>\n<li>hello.c</li>\n<li>world.java</li>\n<li>folder1\n<ul>\n<li>foo.c</li>\n<li>bar.java</li>\n</ul></li>\n<li>foobar.c</li>\n</ul></li>\n</ul>\n\n<p>How would zis.getNextEntry() iterate through that? </p>\n\n<p>Would it return hello.c, world.java, folder1, foobar.c and completely ignore the files in folder1?</p>\n\n<p>Or would it return hello.c, world.java, folder1, foo.c, bar.java, and then foobar.c?</p>\n\n<p>Would it even return folder1 since it's technically a folder and not a file?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","generics","reflection","java-8","annotations"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1510144421,"post_id":47175573,"comment_id":81308483,"body_markdown":"never actually needed to do this... but a very good question!","body":"never actually needed to do this... but a very good question!"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1587362275,"creation_date":1510154832,"answer_id":47183550,"question_id":47175573,"body_markdown":"All type annotations can be retrieved through the `AnnotatedType` hierarchy, except for the `TypeVariable`, whose annotations can be retrieve through `AnnotatedTypeVariable.getType()` which will be an instance of `TypeVariable` which extends `AnnotatedElement` now and happens to be identical with the object returned by `Method.getGenericReturnType()`.\r\n\r\nSo you can retrieve all information, e.g.\r\n\r\n    AnnotatedType art = myMethod.getAnnotatedReturnType();\r\n    System.out.print(\r\n        Arrays.toString(art.getAnnotations())+&quot; &quot;+art.getType().getTypeName()+&quot; -&gt; &quot;);\r\n    final boolean typeVariable = art instanceof AnnotatedTypeVariable;\r\n    if (typeVariable) System.out.print(&#39;&lt;&#39;);\r\n    System.out.print(Arrays.toString(((AnnotatedElement)art.getType()).getAnnotations()) + &quot; &quot;);\r\n    System.out.print(art.getType().getTypeName());\r\n    if (typeVariable) {\r\n        AnnotatedTypeVariable atv = (AnnotatedTypeVariable)art;\r\n        AnnotatedType[] annotatedBounds = atv.getAnnotatedBounds();\r\n        if (annotatedBounds.length &gt; 0) {\r\n            System.out.print(&quot; extends &quot;);\r\n            for (AnnotatedType aBound: annotatedBounds) {\r\n                System.out.print(Arrays.toString(aBound.getAnnotations()) + &quot; &quot;);\r\n                System.out.print(aBound.getType().getTypeName() + &quot;, &quot;);\r\n            }\r\n        }\r\n        System.out.println(&quot;&gt;&quot;);\r\n    }\r\n\r\nwill print\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    [@A3()] S -&gt; &lt;[@A1()] S extends [@A2()] T, &gt;\r\n\r\nWhen your invocation of `((AnnotatedTypeVariable)myMethod.getAnnotatedReturnType()) .getAnnotatedBounds()[0].getAnnotations()` does not provide `@A2`, you should recheck that `A2` truly has `@Retention(RetentionPolicy.RUNTIME) @Target(ElementType.TYPE_USE)`.\r\n\r\nOf course, that’s the “simplified” version handling only your specific method.\r\n\r\nTo handle all possible cases, you will need much more `instanceof`s, dealing with these disjunct type hierarchies of `Type` and `AnnotatedType`, especially when processing annotated parameterized types and annotated generic array types.\r\n\r\nAs said, `TypeVariable` is different, as it extends `AnnotatedElement` and also has the `getAnnotatedBounds()` method. So in this specific case, an alternative way to process the method is\r\n\r\n    List&lt;TypeVariable&lt;?&gt;&gt; typeParameters = Arrays.asList(myMethod.getTypeParameters());\r\n\r\n    for (TypeVariable&lt;?&gt; tv: typeParameters) {\r\n        System.out.print(&quot;&lt; &quot;+Arrays.toString(tv.getAnnotations())+&quot; &quot;+tv.getName());\r\n        AnnotatedType[] annotatedBounds = tv.getAnnotatedBounds();\r\n        if (annotatedBounds.length &gt; 0) {\r\n            System.out.print(&quot; extends &quot;);\r\n            for (AnnotatedType aBound: annotatedBounds) {\r\n                System.out.print(Arrays.toString(aBound.getAnnotations()) + &quot; &quot;);\r\n                System.out.print(aBound.getType().getTypeName() + &quot;, &quot;);\r\n            }\r\n        }\r\n        System.out.print(&quot;&gt; &quot;);\r\n    }\r\n\r\n    AnnotatedType art = myMethod.getAnnotatedReturnType();\r\n    System.out.print(Arrays.toString(art.getAnnotations()) + &quot; &quot;);\r\n    int ix = typeParameters.indexOf(art.getType());\r\n    if (ix &gt;= 0) System.out.print(&quot;[ref to type parameter #&quot; + ix + &quot;] &quot;);\r\n    System.out.println(art.getType().getTypeName());\r\n","title":"How to get TYPE_USE annotations on a generic bound","body":"<p>All type annotations can be retrieved through the <code>AnnotatedType</code> hierarchy, except for the <code>TypeVariable</code>, whose annotations can be retrieve through <code>AnnotatedTypeVariable.getType()</code> which will be an instance of <code>TypeVariable</code> which extends <code>AnnotatedElement</code> now and happens to be identical with the object returned by <code>Method.getGenericReturnType()</code>.</p>\n\n<p>So you can retrieve all information, e.g.</p>\n\n<pre><code>AnnotatedType art = myMethod.getAnnotatedReturnType();\nSystem.out.print(\n    Arrays.toString(art.getAnnotations())+\" \"+art.getType().getTypeName()+\" -&gt; \");\nfinal boolean typeVariable = art instanceof AnnotatedTypeVariable;\nif (typeVariable) System.out.print('&lt;');\nSystem.out.print(Arrays.toString(((AnnotatedElement)art.getType()).getAnnotations()) + \" \");\nSystem.out.print(art.getType().getTypeName());\nif (typeVariable) {\n    AnnotatedTypeVariable atv = (AnnotatedTypeVariable)art;\n    AnnotatedType[] annotatedBounds = atv.getAnnotatedBounds();\n    if (annotatedBounds.length &gt; 0) {\n        System.out.print(\" extends \");\n        for (AnnotatedType aBound: annotatedBounds) {\n            System.out.print(Arrays.toString(aBound.getAnnotations()) + \" \");\n            System.out.print(aBound.getType().getTypeName() + \", \");\n        }\n    }\n    System.out.println(\"&gt;\");\n}\n</code></pre>\n\n<p>will print</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[@A3()] S -&gt; &lt;[@A1()] S extends [@A2()] T, &gt;\n</code></pre>\n\n<p>When your invocation of <code>((AnnotatedTypeVariable)myMethod.getAnnotatedReturnType()) .getAnnotatedBounds()[0].getAnnotations()</code> does not provide <code>@A2</code>, you should recheck that <code>A2</code> truly has <code>@Retention(RetentionPolicy.RUNTIME) @Target(ElementType.TYPE_USE)</code>.</p>\n\n<p>Of course, that’s the “simplified” version handling only your specific method.</p>\n\n<p>To handle all possible cases, you will need much more <code>instanceof</code>s, dealing with these disjunct type hierarchies of <code>Type</code> and <code>AnnotatedType</code>, especially when processing annotated parameterized types and annotated generic array types.</p>\n\n<p>As said, <code>TypeVariable</code> is different, as it extends <code>AnnotatedElement</code> and also has the <code>getAnnotatedBounds()</code> method. So in this specific case, an alternative way to process the method is</p>\n\n<pre><code>List&lt;TypeVariable&lt;?&gt;&gt; typeParameters = Arrays.asList(myMethod.getTypeParameters());\n\nfor (TypeVariable&lt;?&gt; tv: typeParameters) {\n    System.out.print(\"&lt; \"+Arrays.toString(tv.getAnnotations())+\" \"+tv.getName());\n    AnnotatedType[] annotatedBounds = tv.getAnnotatedBounds();\n    if (annotatedBounds.length &gt; 0) {\n        System.out.print(\" extends \");\n        for (AnnotatedType aBound: annotatedBounds) {\n            System.out.print(Arrays.toString(aBound.getAnnotations()) + \" \");\n            System.out.print(aBound.getType().getTypeName() + \", \");\n        }\n    }\n    System.out.print(\"&gt; \");\n}\n\nAnnotatedType art = myMethod.getAnnotatedReturnType();\nSystem.out.print(Arrays.toString(art.getAnnotations()) + \" \");\nint ix = typeParameters.indexOf(art.getType());\nif (ix &gt;= 0) System.out.print(\"[ref to type parameter #\" + ix + \"] \");\nSystem.out.println(art.getType().getTypeName());\n</code></pre>\n"}],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1095,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":47183550,"answer_count":1,"score":5,"last_activity_date":1683219434,"creation_date":1510132159,"question_id":47175573,"body_markdown":"I have this case:\r\n\r\n    public class SomeClass&lt;T&gt; {\r\n        public &lt;@A1 S extends @A2 T&gt; @A3 S myMethod() { ...}\r\n    }\r\n\r\nand I&#39;m trying to get the `@A2` annotation on the bound `T`.  \r\nThis is what I&#39;m seeing, assuming `myMethod` is `SomeClass.class.getDeclaredMethod(&quot;myMethod&quot;)`. Type casts removed for readability.\r\n\r\n - `myMethod.getGenericReturnType().getAnnotations()` returns `@A1` (as expected, I guess)\r\n - `myMethod.getGenericReturnType().getBounds()[0].getAnnotations()` returns *nothing* (?? shoudn&#39;t it be `@A2` ??)\r\n - `myMethod.getAnnotatedReturnType().getAnnotations()` returns `@A3` (as expected, I guess)\r\n - `myMethod.getAnnotatedReturnType().getAnnotatedBounds()[0].getAnnotations()` returns *nothing* (as excepted, I guess)\r\n\r\nIt seems like `@A2` got lost... and that doesn&#39;t sound sensible. Am I doing something wrong or is this indeed some bizarre behavior?\r\n\r\nUPDATE:\r\nIt is indeed a JDK bug, which I reported and it got accepted as [JDK-8191466][1]\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=8191466","title":"How to get TYPE_USE annotations on a generic bound","body":"<p>I have this case:</p>\n<pre><code>public class SomeClass&lt;T&gt; {\n    public &lt;@A1 S extends @A2 T&gt; @A3 S myMethod() { ...}\n}\n</code></pre>\n<p>and I'm trying to get the <code>@A2</code> annotation on the bound <code>T</code>.<br />\nThis is what I'm seeing, assuming <code>myMethod</code> is <code>SomeClass.class.getDeclaredMethod(&quot;myMethod&quot;)</code>. Type casts removed for readability.</p>\n<ul>\n<li><code>myMethod.getGenericReturnType().getAnnotations()</code> returns <code>@A1</code> (as expected, I guess)</li>\n<li><code>myMethod.getGenericReturnType().getBounds()[0].getAnnotations()</code> returns <em>nothing</em> (?? shoudn't it be <code>@A2</code> ??)</li>\n<li><code>myMethod.getAnnotatedReturnType().getAnnotations()</code> returns <code>@A3</code> (as expected, I guess)</li>\n<li><code>myMethod.getAnnotatedReturnType().getAnnotatedBounds()[0].getAnnotations()</code> returns <em>nothing</em> (as excepted, I guess)</li>\n</ul>\n<p>It seems like <code>@A2</code> got lost... and that doesn't sound sensible. Am I doing something wrong or is this indeed some bizarre behavior?</p>\n<p>UPDATE:\nIt is indeed a JDK bug, which I reported and it got accepted as <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=8191466\" rel=\"nofollow noreferrer\">JDK-8191466</a></p>\n"},{"tags":["java","spring","mongodb"],"comments":[{"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"score":0,"creation_date":1683036262,"post_id":76155590,"comment_id":134302759,"body_markdown":"Update: I tried to change the type of &quot;clicks&quot; and &quot;views&quot; to Float, but it didn&#39;t help.","body":"Update: I tried to change the type of &quot;clicks&quot; and &quot;views&quot; to Float, but it didn&#39;t help."},{"owner":{"account_id":2638471,"reputation":25863,"user_id":2282634,"display_name":"Joe"},"score":1,"creation_date":1683046457,"post_id":76155590,"comment_id":134305330,"body_markdown":"$divide is an aggregation operator, not an update operator.  You may be able to use [update with aggregation pipeline](https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/#updates-with-aggregation-pipeline), but I don&#39;t know how to do that with spring","body":"$divide is an aggregation operator, not an update operator.  You may be able to use <a href=\"https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/#updates-with-aggregation-pipeline\" rel=\"nofollow noreferrer\">update with aggregation pipeline</a>, but I don&#39;t know how to do that with spring"}],"answers":[{"tags":[],"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683218996,"creation_date":1683218996,"answer_id":76175579,"question_id":76155590,"body_markdown":"I ended up using the following solution:\r\n\r\n```\r\nMnoCampaignEntity campaign = new MnoCampaignEntity();\r\ncampaign.setClicks(29);\r\ncampaign.setViews(5);\r\ncampaignRepository.save(campaign);\r\n\r\nString query1 = &quot;{$match: {_id: ObjectId(\\&quot;&quot; + campaign.getId() + &quot;\\&quot;)}}&quot;;\r\nString query2 = &quot;{$project: {views: 1, clicks: {$add: [\\&quot;$clicks\\&quot;, 1]}}}&quot;;\r\nString query3 = &quot;{$project: {views: 1, clicks: 1, conversionRate: {$cond: [{$eq: [\\&quot;$views\\&quot;, 0]}, 0, {$divide: [\\&quot;$clicks\\&quot;, \\&quot;$views\\&quot;]}]}}}&quot;;\r\nString query4 = &quot;{$merge: \\&quot;campaigns\\&quot;}&quot;;\r\n\r\nTypedAggregation&lt;MnoCampaignEntity&gt; aggregation = Aggregation.newAggregation(\r\n    MnoCampaignEntity.class,\r\n    new CustomAggregationOperation(query1),\r\n    new CustomAggregationOperation(query2),\r\n    new CustomAggregationOperation(query3),\r\n    new CustomAggregationOperation(query4)\r\n);\r\n\r\nmongoTemplate.aggregate(aggregation.withOptions(new AggregationOptions.Builder()\r\n    .skipOutput()\r\n    .allowDiskUse(true)\r\n    .build()),\r\n    &quot;campaigns&quot;, MnoCampaignEntity.class);\r\n\r\nCampaignEntity updated = campaignService.findById(campaign.getId().toString());\r\nSystem.out.println(&quot;CONVERSION RATE: &quot; + updated.getConversionRate());\r\n```\r\n\r\nNote: the CustomAggregationOperation class is from [this SO answer][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/59726492/50335","title":"Why is this mongodb search failing in Spring application?","body":"<p>I ended up using the following solution:</p>\n<pre><code>MnoCampaignEntity campaign = new MnoCampaignEntity();\ncampaign.setClicks(29);\ncampaign.setViews(5);\ncampaignRepository.save(campaign);\n\nString query1 = &quot;{$match: {_id: ObjectId(\\&quot;&quot; + campaign.getId() + &quot;\\&quot;)}}&quot;;\nString query2 = &quot;{$project: {views: 1, clicks: {$add: [\\&quot;$clicks\\&quot;, 1]}}}&quot;;\nString query3 = &quot;{$project: {views: 1, clicks: 1, conversionRate: {$cond: [{$eq: [\\&quot;$views\\&quot;, 0]}, 0, {$divide: [\\&quot;$clicks\\&quot;, \\&quot;$views\\&quot;]}]}}}&quot;;\nString query4 = &quot;{$merge: \\&quot;campaigns\\&quot;}&quot;;\n\nTypedAggregation&lt;MnoCampaignEntity&gt; aggregation = Aggregation.newAggregation(\n    MnoCampaignEntity.class,\n    new CustomAggregationOperation(query1),\n    new CustomAggregationOperation(query2),\n    new CustomAggregationOperation(query3),\n    new CustomAggregationOperation(query4)\n);\n\nmongoTemplate.aggregate(aggregation.withOptions(new AggregationOptions.Builder()\n    .skipOutput()\n    .allowDiskUse(true)\n    .build()),\n    &quot;campaigns&quot;, MnoCampaignEntity.class);\n\nCampaignEntity updated = campaignService.findById(campaign.getId().toString());\nSystem.out.println(&quot;CONVERSION RATE: &quot; + updated.getConversionRate());\n</code></pre>\n<p>Note: the CustomAggregationOperation class is from <a href=\"https://stackoverflow.com/a/59726492/50335\">this SO answer</a>.</p>\n"}],"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76175579,"answer_count":1,"score":1,"last_activity_date":1683218996,"creation_date":1683035704,"question_id":76155590,"body_markdown":"I&#39;m doing the following search with mongodb in a Spring application:\r\n\r\n```\r\nimport org.bson.Document;\r\nimport org.bson.types.ObjectId;\r\nimport org.springframework.data.mongodb.core.FindAndModifyOptions;\r\nimport org.springframework.data.mongodb.core.MongoTemplate;\r\nimport org.springframework.data.mongodb.core.query.Criteria;\r\nimport org.springframework.data.mongodb.core.query.Query;\r\nimport org.springframework.data.mongodb.core.query.Update;\r\n\r\nprivate CampaignEntity incrByWithConversionRate(ObjectId campaignId, String key) {\r\n    Query query = new Query();\r\n    query.addCriteria(Criteria.where(&quot;id&quot;).is(campaignId));\r\n\r\n    Update update = new Update();\r\n    update.inc(key);\r\n    update.set(&quot;conversionRate&quot;, new Document(&quot;$divide&quot;, Arrays.asList(&quot;$clicks&quot;, &quot;$views&quot;)));\r\n\r\n    return mongoTemplate.findAndModify(\r\n        query, update,\r\n        new FindAndModifyOptions().returnNew(true), CampaignEntity.class);\r\n}\r\n```\r\n\r\nThe problem is that it fails with the following error:\r\n```\r\norg.springframework.data.mapping.MappingException: Expected to read Document Document{{$divide=[$clicks, $views]}} into type class java.lang.Float but didn&#39;t find a PersistentEntity for the latter!\r\n```\r\n\r\nNote: The CampaignEntity class is defined as follows:\r\n```\r\n@Data\r\n@Document(collection = &quot;campaigns&quot;)\r\npublic abstract class CampaignEntity extends BaseEntity {\r\n    private Integer clicks = 0;\r\n    private Integer views = 0;\r\n    private Float conversionRate;\r\n}\r\n```","title":"Why is this mongodb search failing in Spring application?","body":"<p>I'm doing the following search with mongodb in a Spring application:</p>\n<pre><code>import org.bson.Document;\nimport org.bson.types.ObjectId;\nimport org.springframework.data.mongodb.core.FindAndModifyOptions;\nimport org.springframework.data.mongodb.core.MongoTemplate;\nimport org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.data.mongodb.core.query.Query;\nimport org.springframework.data.mongodb.core.query.Update;\n\nprivate CampaignEntity incrByWithConversionRate(ObjectId campaignId, String key) {\n    Query query = new Query();\n    query.addCriteria(Criteria.where(&quot;id&quot;).is(campaignId));\n\n    Update update = new Update();\n    update.inc(key);\n    update.set(&quot;conversionRate&quot;, new Document(&quot;$divide&quot;, Arrays.asList(&quot;$clicks&quot;, &quot;$views&quot;)));\n\n    return mongoTemplate.findAndModify(\n        query, update,\n        new FindAndModifyOptions().returnNew(true), CampaignEntity.class);\n}\n</code></pre>\n<p>The problem is that it fails with the following error:</p>\n<pre><code>org.springframework.data.mapping.MappingException: Expected to read Document Document{{$divide=[$clicks, $views]}} into type class java.lang.Float but didn't find a PersistentEntity for the latter!\n</code></pre>\n<p>Note: The CampaignEntity class is defined as follows:</p>\n<pre><code>@Data\n@Document(collection = &quot;campaigns&quot;)\npublic abstract class CampaignEntity extends BaseEntity {\n    private Integer clicks = 0;\n    private Integer views = 0;\n    private Float conversionRate;\n}\n</code></pre>\n"},{"tags":["java","arrays","backwards-compatibility","variadic-functions"],"comments":[{"owner":{"account_id":89739,"reputation":1020,"user_id":247413,"display_name":"kamasheto"},"score":8,"creation_date":1275000451,"post_id":2925153,"comment_id":2978610,"body_markdown":"I can&#39;t help but wonder why this question is a &quot;is this valid&quot; kind of question. Couldn&#39;t you have just tried it? Don&#39;t overdo asking, you&#39;ll do yourself more harm than good.","body":"I can&#39;t help but wonder why this question is a &quot;is this valid&quot; kind of question. Couldn&#39;t you have just tried it? Don&#39;t overdo asking, you&#39;ll do yourself more harm than good."},{"owner":{"account_id":36166,"reputation":38839,"user_id":103043,"display_name":"akf"},"score":39,"creation_date":1275022547,"post_id":2925153,"comment_id":2979844,"body_markdown":"true enough, this could have been easily tested. however, the nice thing about a question like this is that it exposes the topic and solicits interesting answers.","body":"true enough, this could have been easily tested. however, the nice thing about a question like this is that it exposes the topic and solicits interesting answers."},{"owner":{"account_id":143786,"reputation":3994,"user_id":352382,"display_name":"user362382"},"score":4,"creation_date":1275034932,"post_id":2925153,"comment_id":2980800,"body_markdown":"I actually tried the code above, with the intention to pass the array args as arguments to the method. However, I didn&#39;t realize that I should&#39;ve prepended extraVar to args first. When you know that variable arguments are treated as an array (even outside the method), this is of course quite logical.","body":"I actually tried the code above, with the intention to pass the array args as arguments to the method. However, I didn&#39;t realize that I should&#39;ve prepended extraVar to args first. When you know that variable arguments are treated as an array (even outside the method), this is of course quite logical."}],"answers":[{"tags":[],"owner":{"account_id":60189,"reputation":6759,"user_id":179878,"display_name":"jasonmp85"},"down_vote_count":1,"up_vote_count":209,"is_accepted":true,"score":208,"last_activity_date":1613019484,"creation_date":1274997521,"answer_id":2925300,"question_id":2925153,"body_markdown":"The underlying type of a [variadic][1] method `function(Object... args)` *is* `function(Object[] args)`. Sun added varargs in this manner to preserve backwards compatibility.\r\n\r\nSo you should just be able to prepend `extraVar` to `args` and call `String.format(format, args)`.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Variadic","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>The underlying type of a <a href=\"https://en.wikipedia.org/wiki/Variadic\" rel=\"noreferrer\">variadic</a> method <code>function(Object... args)</code> <em>is</em> <code>function(Object[] args)</code>. Sun added varargs in this manner to preserve backwards compatibility.</p>\n<p>So you should just be able to prepend <code>extraVar</code> to <code>args</code> and call <code>String.format(format, args)</code>.</p>\n"},{"tags":[],"owner":{"account_id":128551,"reputation":57229,"user_id":326480,"accept_rate":82,"display_name":"mdma"},"down_vote_count":2,"up_vote_count":32,"is_accepted":false,"score":30,"last_activity_date":1274998667,"creation_date":1274997628,"answer_id":2925314,"question_id":2925153,"body_markdown":"It&#39;s ok to pass an array - in fact it amounts to the same thing\r\n\r\n    String.format(&quot;%s %s&quot;, &quot;hello&quot;, &quot;world!&quot;);\r\n\r\nis the same as\r\n\r\n    String.format(&quot;%s %s&quot;, new Object[] { &quot;hello&quot;, &quot;world!&quot;});\r\n\r\nIt&#39;s just syntactic sugar - the compiler converts the first one into the second, since the underlying method is expecting an array for the [vararg][1] parameter.\r\n\r\nSee\r\n\r\n- [Varargs - J2SE 1.5 Documentation][2]\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html\r\n  [2]: http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>It's ok to pass an array - in fact it amounts to the same thing</p>\n\n<pre><code>String.format(\"%s %s\", \"hello\", \"world!\");\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>String.format(\"%s %s\", new Object[] { \"hello\", \"world!\"});\n</code></pre>\n\n<p>It's just syntactic sugar - the compiler converts the first one into the second, since the underlying method is expecting an array for the <a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html\" rel=\"noreferrer\">vararg</a> parameter.</p>\n\n<p>See</p>\n\n<ul>\n<li><a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html\" rel=\"noreferrer\">Varargs - J2SE 1.5 Documentation</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":143232,"reputation":1187,"user_id":351427,"display_name":"ebelisle"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1394656577,"creation_date":1275020383,"answer_id":2926621,"question_id":2925153,"body_markdown":"jasonmp85 is right about passing a different array to `String.format`. The size of an array can&#39;t be changed once constructed, so you&#39;d have to pass a new array instead of modifying the existing one.\r\n\r\n    Object newArgs = new Object[args.length+1];\r\n    System.arraycopy(args, 0, newArgs, 1, args.length);\r\n    newArgs[0] = extraVar; \r\n    String.format(format, extraVar, args);","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>jasonmp85 is right about passing a different array to <code>String.format</code>. The size of an array can't be changed once constructed, so you'd have to pass a new array instead of modifying the existing one.</p>\n\n<pre><code>Object newArgs = new Object[args.length+1];\nSystem.arraycopy(args, 0, newArgs, 1, args.length);\nnewArgs[0] = extraVar; \nString.format(format, extraVar, args);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":1,"up_vote_count":385,"is_accepted":false,"score":384,"last_activity_date":1481805398,"creation_date":1275021129,"answer_id":2926653,"question_id":2925153,"body_markdown":"Yes, a `T...` is only a syntactic sugar for a `T[]`.\n\n### [JLS 8.4.1 Format parameters][1]\n\n&gt; The last formal parameter in a list is special; it may be a _variable arity_ parameter, indicated by an elipsis following the type.\n&gt;\n&gt; If the last formal parameter is a variable arity parameter of type `T`, it is considered to define a formal parameter of type `T[]`. The method is then a _variable arity_ method. Otherwise, it is a _fixed arity_ method. Invocations of a variable arity method may contain more actual argument expressions than formal parameters. All the actual argument expressions that do not correspond to the formal parameters preceding the variable arity parameter will be evaluated and the results stored into an array that will be passed to the method invocation.\n\nHere&#39;s an example to illustrate:\n\n    public static String ezFormat(Object... args) {\n        String format = new String(new char[args.length])\n            .replace(&quot;\\0&quot;, &quot;[ %s ]&quot;);\n        return String.format(format, args);\n    }\n    public static void main(String... args) {\n        System.out.println(ezFormat(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;));\n        // prints &quot;[ A ][ B ][ C ]&quot;\n    }\n\nAnd yes, the above `main` method is valid, because again, `String...` is just `String[]`. Also, because arrays are covariant, a `String[]` is an `Object[]`, so you can also call `ezFormat(args)` either way.\n\n### See also\n\n* [Java language guide/varargs](http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html)\n\n---\n\n### Varargs gotchas #1: passing `null`\n\nHow varargs are resolved is quite complicated, and sometimes it does things that may surprise you.\n\nConsider this example:\n\n    static void count(Object... objs) {\n        System.out.println(objs.length);\n    }\n\n    count(null, null, null); // prints &quot;3&quot;\n    count(null, null); // prints &quot;2&quot;\n    count(null); // throws java.lang.NullPointerException!!!\n\nDue to how varargs are resolved, the last statement invokes with `objs = null`, which of course would cause `NullPointerException` with `objs.length`. If you want to give one `null` argument to a varargs parameter, you can do either of the following:\n\n    count(new Object[] { null }); // prints &quot;1&quot;\n    count((Object) null); // prints &quot;1&quot;\n\n### Related questions\n\nThe following is a sample of some of the questions people have asked when dealing with varargs:\n\n* [bug with varargs and overloading?](https://stackoverflow.com/questions/2521293/bug-with-varargs-and-overloading)\n* [How to work with varargs and reflection](https://stackoverflow.com/questions/2600854/how-to-work-with-varargs-and-reflection)\n* [Most specific method with matches of both fixed/variable arity (varargs)](https://stackoverflow.com/questions/1321657/most-specific-method-with-matches-of-both-fixed-variable-arity-varargs)\n\n---\n\n### Vararg gotchas #2: adding extra arguments\n\nAs you&#39;ve found out, the following doesn&#39;t &quot;work&quot;:\n\n        String[] myArgs = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\n        System.out.println(ezFormat(myArgs, &quot;Z&quot;));\n        // prints &quot;[ [Ljava.lang.String;@13c5982 ][ Z ]&quot;\n\nBecause of the way varargs work, `ezFormat` actually gets 2 arguments, the first being a `String[]`, the second being a `String`. If you&#39;re passing an array to varargs, and you want its elements to be recognized as individual arguments, and you also need to add an extra argument, then you have no choice but to create _another array_ that accommodates the extra element.\n\nHere are some useful helper methods:\n\n    static &lt;T&gt; T[] append(T[] arr, T lastElement) {\n        final int N = arr.length;\n        arr = java.util.Arrays.copyOf(arr, N+1);\n        arr[N] = lastElement;\n        return arr;\n    }\n    static &lt;T&gt; T[] prepend(T[] arr, T firstElement) {\n        final int N = arr.length;\n        arr = java.util.Arrays.copyOf(arr, N+1);\n        System.arraycopy(arr, 0, arr, 1, N);\n        arr[0] = firstElement;\n        return arr;\n    }\n\nNow you can do the following:\n\n        String[] myArgs = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\n        System.out.println(ezFormat(append(myArgs, &quot;Z&quot;)));\n        // prints &quot;[ A ][ B ][ C ][ Z ]&quot;\n\n        System.out.println(ezFormat(prepend(myArgs, &quot;Z&quot;)));\n        // prints &quot;[ Z ][ A ][ B ][ C ]&quot;\n\n---\n\n### Varargs gotchas #3: passing an array of primitives\n\nIt doesn&#39;t &quot;work&quot;:\n\n        int[] myNumbers = { 1, 2, 3 };\n        System.out.println(ezFormat(myNumbers));\n        // prints &quot;[ [I@13c5982 ]&quot;\n\nVarargs only works with reference types. Autoboxing does not apply to array of primitives. The following works:\n\n        Integer[] myNumbers = { 1, 2, 3 };\n        System.out.println(ezFormat(myNumbers));\n        // prints &quot;[ 1 ][ 2 ][ 3 ]&quot;\n\n\n  [1]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>Yes, a <code>T...</code> is only a syntactic sugar for a <code>T[]</code>.</p>\n<h3><a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1\" rel=\"noreferrer\">JLS 8.4.1 Format parameters</a></h3>\n<blockquote>\n<p>The last formal parameter in a list is special; it may be a <em>variable arity</em> parameter, indicated by an elipsis following the type.</p>\n<p>If the last formal parameter is a variable arity parameter of type <code>T</code>, it is considered to define a formal parameter of type <code>T[]</code>. The method is then a <em>variable arity</em> method. Otherwise, it is a <em>fixed arity</em> method. Invocations of a variable arity method may contain more actual argument expressions than formal parameters. All the actual argument expressions that do not correspond to the formal parameters preceding the variable arity parameter will be evaluated and the results stored into an array that will be passed to the method invocation.</p>\n</blockquote>\n<p>Here's an example to illustrate:</p>\n<pre><code>public static String ezFormat(Object... args) {\n    String format = new String(new char[args.length])\n        .replace(&quot;\\0&quot;, &quot;[ %s ]&quot;);\n    return String.format(format, args);\n}\npublic static void main(String... args) {\n    System.out.println(ezFormat(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;));\n    // prints &quot;[ A ][ B ][ C ]&quot;\n}\n</code></pre>\n<p>And yes, the above <code>main</code> method is valid, because again, <code>String...</code> is just <code>String[]</code>. Also, because arrays are covariant, a <code>String[]</code> is an <code>Object[]</code>, so you can also call <code>ezFormat(args)</code> either way.</p>\n<h3>See also</h3>\n<ul>\n<li><a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html\" rel=\"noreferrer\">Java language guide/varargs</a></li>\n</ul>\n<hr />\n<h3>Varargs gotchas #1: passing <code>null</code></h3>\n<p>How varargs are resolved is quite complicated, and sometimes it does things that may surprise you.</p>\n<p>Consider this example:</p>\n<pre><code>static void count(Object... objs) {\n    System.out.println(objs.length);\n}\n\ncount(null, null, null); // prints &quot;3&quot;\ncount(null, null); // prints &quot;2&quot;\ncount(null); // throws java.lang.NullPointerException!!!\n</code></pre>\n<p>Due to how varargs are resolved, the last statement invokes with <code>objs = null</code>, which of course would cause <code>NullPointerException</code> with <code>objs.length</code>. If you want to give one <code>null</code> argument to a varargs parameter, you can do either of the following:</p>\n<pre><code>count(new Object[] { null }); // prints &quot;1&quot;\ncount((Object) null); // prints &quot;1&quot;\n</code></pre>\n<h3>Related questions</h3>\n<p>The following is a sample of some of the questions people have asked when dealing with varargs:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2521293/bug-with-varargs-and-overloading\">bug with varargs and overloading?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2600854/how-to-work-with-varargs-and-reflection\">How to work with varargs and reflection</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1321657/most-specific-method-with-matches-of-both-fixed-variable-arity-varargs\">Most specific method with matches of both fixed/variable arity (varargs)</a></li>\n</ul>\n<hr />\n<h3>Vararg gotchas #2: adding extra arguments</h3>\n<p>As you've found out, the following doesn't &quot;work&quot;:</p>\n<pre><code>    String[] myArgs = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\n    System.out.println(ezFormat(myArgs, &quot;Z&quot;));\n    // prints &quot;[ [Ljava.lang.String;@13c5982 ][ Z ]&quot;\n</code></pre>\n<p>Because of the way varargs work, <code>ezFormat</code> actually gets 2 arguments, the first being a <code>String[]</code>, the second being a <code>String</code>. If you're passing an array to varargs, and you want its elements to be recognized as individual arguments, and you also need to add an extra argument, then you have no choice but to create <em>another array</em> that accommodates the extra element.</p>\n<p>Here are some useful helper methods:</p>\n<pre><code>static &lt;T&gt; T[] append(T[] arr, T lastElement) {\n    final int N = arr.length;\n    arr = java.util.Arrays.copyOf(arr, N+1);\n    arr[N] = lastElement;\n    return arr;\n}\nstatic &lt;T&gt; T[] prepend(T[] arr, T firstElement) {\n    final int N = arr.length;\n    arr = java.util.Arrays.copyOf(arr, N+1);\n    System.arraycopy(arr, 0, arr, 1, N);\n    arr[0] = firstElement;\n    return arr;\n}\n</code></pre>\n<p>Now you can do the following:</p>\n<pre><code>    String[] myArgs = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\n    System.out.println(ezFormat(append(myArgs, &quot;Z&quot;)));\n    // prints &quot;[ A ][ B ][ C ][ Z ]&quot;\n\n    System.out.println(ezFormat(prepend(myArgs, &quot;Z&quot;)));\n    // prints &quot;[ Z ][ A ][ B ][ C ]&quot;\n</code></pre>\n<hr />\n<h3>Varargs gotchas #3: passing an array of primitives</h3>\n<p>It doesn't &quot;work&quot;:</p>\n<pre><code>    int[] myNumbers = { 1, 2, 3 };\n    System.out.println(ezFormat(myNumbers));\n    // prints &quot;[ [I@13c5982 ]&quot;\n</code></pre>\n<p>Varargs only works with reference types. Autoboxing does not apply to array of primitives. The following works:</p>\n<pre><code>    Integer[] myNumbers = { 1, 2, 3 };\n    System.out.println(ezFormat(myNumbers));\n    // prints &quot;[ 1 ][ 2 ][ 3 ]&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4995710,"reputation":51,"user_id":4888072,"display_name":"Srijit Paul"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1513691562,"creation_date":1513691562,"answer_id":47888502,"question_id":2925153,"body_markdown":"I was having same issue.\r\n\r\n    String[] arr= new String[] { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\r\n    Object obj = arr;\r\n\r\nAnd then passed the obj as varargs argument.\r\nIt worked.","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>I was having same issue.</p>\n\n<pre><code>String[] arr= new String[] { \"A\", \"B\", \"C\" };\nObject obj = arr;\n</code></pre>\n\n<p>And then passed the obj as varargs argument.\nIt worked.</p>\n"},{"tags":[],"owner":{"account_id":7072149,"reputation":91,"user_id":5413405,"display_name":"fozzybear"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683218662,"creation_date":1683218662,"answer_id":76175523,"question_id":2925153,"body_markdown":"In addition to #2 of @genelubricant - in case read-only is enough and if you want to swap a little extra effort for gaining some of the conveniences of a `List` - copying the array is not necessarily required and wrapping it, plus injecting the desired extra value at an arbitrary index at access time, can be achieved like this:\r\n\r\n    public static &lt;T&gt; List&lt;Object&gt; wrappedUnmodfiableListInsertion(final T insert, final Integer insertIdx, final T... source) {\r\n      final boolean isInsertion = insertIdx != null;\r\n      return new AbstractList&lt;Object&gt;() {\r\n        @Override\r\n        public int size() {\r\n          return source != null ? isInsertion ? source.length + 1 : source.length : 0;\r\n        }\r\n        @Override\r\n        public Object get(int index) {\r\n          if (source == null) {\r\n            if (isInsertion) {\r\n              return index == insertIdx &amp;&amp; index == 0 ? insert : null;\r\n            }\r\n            return EMPTY_LIST;\r\n          } \r\n          if (isInsertion) {\r\n            if (index == insertIdx) {\r\n              return insert;\r\n            } \r\n            return source[insertIdx &gt; index ? index : index - 1];\r\n          }\r\n          return source[index];\r\n        }\r\n      };\r\n    }","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>In addition to #2 of @genelubricant - in case read-only is enough and if you want to swap a little extra effort for gaining some of the conveniences of a <code>List</code> - copying the array is not necessarily required and wrapping it, plus injecting the desired extra value at an arbitrary index at access time, can be achieved like this:</p>\n<pre><code>public static &lt;T&gt; List&lt;Object&gt; wrappedUnmodfiableListInsertion(final T insert, final Integer insertIdx, final T... source) {\n  final boolean isInsertion = insertIdx != null;\n  return new AbstractList&lt;Object&gt;() {\n    @Override\n    public int size() {\n      return source != null ? isInsertion ? source.length + 1 : source.length : 0;\n    }\n    @Override\n    public Object get(int index) {\n      if (source == null) {\n        if (isInsertion) {\n          return index == insertIdx &amp;&amp; index == 0 ? insert : null;\n        }\n        return EMPTY_LIST;\n      } \n      if (isInsertion) {\n        if (index == insertIdx) {\n          return insert;\n        } \n        return source[insertIdx &gt; index ? index : index - 1];\n      }\n      return source[index];\n    }\n  };\n}\n</code></pre>\n"}],"owner":{"account_id":143786,"reputation":3994,"user_id":352382,"display_name":"user362382"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":297945,"favorite_count":0,"down_vote_count":1,"up_vote_count":365,"accepted_answer_id":2925300,"answer_count":6,"score":364,"last_activity_date":1683218662,"creation_date":1274996198,"question_id":2925153,"body_markdown":"I&#39;d like to be able to create a function like:\r\n\r\n    class A {\r\n      private String extraVar;\r\n      public String myFormat(String format, Object ... args){\r\n        return String.format(format, extraVar, args);\r\n      }\r\n    }\r\n\r\nThe problem here is that `args` is treated as `Object[]` in the method `myFormat`, and thus is a single argument to `String.format`, while I&#39;d like every single `Object` in `args` to be passed as a new argument. Since `String.format` is also a method with variable arguments, this should be possible.\r\n\r\nIf this is not possible, is there a method like `String.format(String format, Object[] args)`? In that case I could prepend `extraVar` to `args` using a new array and pass it to that method.\r\n","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>I'd like to be able to create a function like:</p>\n\n<pre><code>class A {\n  private String extraVar;\n  public String myFormat(String format, Object ... args){\n    return String.format(format, extraVar, args);\n  }\n}\n</code></pre>\n\n<p>The problem here is that <code>args</code> is treated as <code>Object[]</code> in the method <code>myFormat</code>, and thus is a single argument to <code>String.format</code>, while I'd like every single <code>Object</code> in <code>args</code> to be passed as a new argument. Since <code>String.format</code> is also a method with variable arguments, this should be possible.</p>\n\n<p>If this is not possible, is there a method like <code>String.format(String format, Object[] args)</code>? In that case I could prepend <code>extraVar</code> to <code>args</code> using a new array and pass it to that method.</p>\n"},{"tags":["java","multithreading","asynchronous","executorservice","executor"],"comments":[{"owner":{"account_id":5652874,"reputation":5552,"user_id":4472840,"accept_rate":83,"display_name":"Yosef Weiner"},"score":16,"creation_date":1435430397,"post_id":31092067,"comment_id":50200875,"body_markdown":"The idea is that you would submit multiple tasks and then wait. You are right that if you wait for the result in between submitting each task, then they will be processed in serial and you won&#39;t gain anything.","body":"The idea is that you would submit multiple tasks and then wait. You are right that if you wait for the result in between submitting each task, then they will be processed in serial and you won&#39;t gain anything."},{"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"score":2,"creation_date":1435430653,"post_id":31092067,"comment_id":50200961,"body_markdown":"@SkinnyJ If multiple tasks are submitted, how do you know the result returned is for which task? And how do i wait for multiple tasks?","body":"@SkinnyJ If multiple tasks are submitted, how do you know the result returned is for which task? And how do i wait for multiple tasks?"},{"owner":{"account_id":4092618,"reputation":5227,"user_id":3360241,"accept_rate":91,"display_name":"John"},"score":3,"creation_date":1435430848,"post_id":31092067,"comment_id":50201005,"body_markdown":"@VishalP You will then have list of Futures which you could check with isDone() or fetch result with get()","body":"@VishalP You will then have list of Futures which you could check with isDone() or fetch result with get()"},{"owner":{"account_id":5652874,"reputation":5552,"user_id":4472840,"accept_rate":83,"display_name":"Yosef Weiner"},"score":2,"creation_date":1435432245,"post_id":31092067,"comment_id":50201435,"body_markdown":"The simplest is to use [invokeAll](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection)). Otherwise, you can keep track of each future as you submit its Callable, and get the results one after the other. Either way, the processing is happening in parallel.","body":"The simplest is to use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection)\" rel=\"nofollow noreferrer\">invokeAll</a>. Otherwise, you can keep track of each future as you submit its Callable, and get the results one after the other. Either way, the processing is happening in parallel."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1509613210,"post_id":31092067,"comment_id":81090410,"body_markdown":"@TheMonk What made you you accept the answer? Is it because observer pattern is the solution to wait asynchronously?","body":"@TheMonk What made you you accept the answer? Is it because observer pattern is the solution to wait asynchronously?"},{"owner":{"account_id":184631,"reputation":4733,"user_id":420803,"accept_rate":65,"display_name":"Enrique"},"score":7,"creation_date":1531354192,"post_id":31092067,"comment_id":89568869,"body_markdown":"The important thing is that &quot;get&quot; is not starting the execution, &quot;submit&quot; is, get is only &quot;waiting&quot; the result. So we could start multiple tasks (multiple executors) and then use get on every one. In that way all the executors will run in parallel. If you can continue without the result instead of get you could use the Observer pattern","body":"The important thing is that &quot;get&quot; is not starting the execution, &quot;submit&quot; is, get is only &quot;waiting&quot; the result. So we could start multiple tasks (multiple executors) and then use get on every one. In that way all the executors will run in parallel. If you can continue without the result instead of get you could use the Observer pattern"},{"owner":{"account_id":3053810,"reputation":403,"user_id":2587883,"accept_rate":0,"display_name":"Bishnu"},"score":0,"creation_date":1600669312,"post_id":31092067,"comment_id":113148537,"body_markdown":"I was wondering how get(..) would be working, but looking at the source code it just yields the processor for a preemption but literally doesn&#39;t release thread in the worst case. Anyone has worked with C++ (or other langs) which supports non-blocking wait with timeout feature","body":"I was wondering how get(..) would be working, but looking at the source code it just yields the processor for a preemption but literally doesn&#39;t release thread in the worst case. Anyone has worked with C++ (or other langs) which supports non-blocking wait with timeout feature"}],"answers":[{"tags":[],"owner":{"account_id":4092618,"reputation":5227,"user_id":3360241,"accept_rate":91,"display_name":"John"},"down_vote_count":0,"up_vote_count":84,"is_accepted":true,"score":84,"last_activity_date":1481118126,"creation_date":1435430377,"answer_id":31092208,"question_id":31092067,"body_markdown":"`Future` offers you method `isDone()` which is not blocking and returns true if computation has completed, false otherwise.\r\n\r\n\r\n`Future.get()` is used to retrieve the result of computation.\r\n\r\nYou have a couple of options:\r\n\r\n- call `isDone()` and if the result is ready ask for it by invoking `get()`, notice how there is no blocking\r\n- block indefinitely with `get()`\r\n- block for specified timeout with `get(long timeout, TimeUnit unit)`\r\n\r\nThe whole `Future API` thing is there to have easy way obtaining values from threads executing parallel tasks. This can be done synchronously or asynchronously if you prefer, as described in bullets above.\r\n\r\n**UPDATE WITH CACHE EXAMPLE**\r\n\r\nHere is a cache implementation from *Java Concurrency In Practice*, an excellent use case for `Future`.\r\n\r\n - If the computation is already running, caller interested in result of computation will wait for computation to finish\r\n - If the result is ready in the cache, caller will collect it\r\n - if the result is not ready and computation has not started yet, caller will start computation and wrap result in `Future` for other callers. \r\n\r\nThis is all easily achieved with `Future` API. \r\n\r\n    package net.jcip.examples;\r\n\r\n    import java.util.concurrent.*;\r\n    /**\r\n     * Memoizer\r\n     * &lt;p/&gt;\r\n     * Final implementation of Memoizer\r\n     *\r\n     * @author Brian Goetz and Tim Peierls\r\n     */\r\n    public class Memoizer &lt;A, V&gt; implements Computable&lt;A, V&gt; {\r\n        private final ConcurrentMap&lt;A, Future&lt;V&gt;&gt; cache\r\n                = new ConcurrentHashMap&lt;A, Future&lt;V&gt;&gt;();\r\n        private final Computable&lt;A, V&gt; c;\r\n\r\n    public Memoizer(Computable&lt;A, V&gt; c) {\r\n        this.c = c;\r\n    }\r\n\r\n    public V compute(final A arg) throws InterruptedException {\r\n        while (true) {\r\n\r\n            Future&lt;V&gt; f = cache.get(arg);\r\n            // computation not started\r\n            if (f == null) {\r\n                Callable&lt;V&gt; eval = new Callable&lt;V&gt;() {\r\n                    public V call() throws InterruptedException {\r\n                        return c.compute(arg);\r\n                    }\r\n                };\r\n \r\n                FutureTask&lt;V&gt; ft = new FutureTask&lt;V&gt;(eval);\r\n                f = cache.putIfAbsent(arg, ft);\r\n                // start computation if it&#39;s not started in the meantime\r\n                if (f == null) {\r\n                    f = ft;\r\n                    ft.run();\r\n                }\r\n            }\r\n\r\n            // get result if ready, otherwise block and wait\r\n            try {\r\n                return f.get();\r\n            } catch (CancellationException e) {\r\n                cache.remove(arg, f);\r\n            } catch (ExecutionException e) {\r\n                throw LaunderThrowable.launderThrowable(e.getCause());\r\n            }\r\n        }\r\n      }\r\n    }\r\n","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p><code>Future</code> offers you method <code>isDone()</code> which is not blocking and returns true if computation has completed, false otherwise.</p>\n\n<p><code>Future.get()</code> is used to retrieve the result of computation.</p>\n\n<p>You have a couple of options:</p>\n\n<ul>\n<li>call <code>isDone()</code> and if the result is ready ask for it by invoking <code>get()</code>, notice how there is no blocking</li>\n<li>block indefinitely with <code>get()</code></li>\n<li>block for specified timeout with <code>get(long timeout, TimeUnit unit)</code></li>\n</ul>\n\n<p>The whole <code>Future API</code> thing is there to have easy way obtaining values from threads executing parallel tasks. This can be done synchronously or asynchronously if you prefer, as described in bullets above.</p>\n\n<p><strong>UPDATE WITH CACHE EXAMPLE</strong></p>\n\n<p>Here is a cache implementation from <em>Java Concurrency In Practice</em>, an excellent use case for <code>Future</code>.</p>\n\n<ul>\n<li>If the computation is already running, caller interested in result of computation will wait for computation to finish</li>\n<li>If the result is ready in the cache, caller will collect it</li>\n<li>if the result is not ready and computation has not started yet, caller will start computation and wrap result in <code>Future</code> for other callers. </li>\n</ul>\n\n<p>This is all easily achieved with <code>Future</code> API. </p>\n\n<pre><code>package net.jcip.examples;\n\nimport java.util.concurrent.*;\n/**\n * Memoizer\n * &lt;p/&gt;\n * Final implementation of Memoizer\n *\n * @author Brian Goetz and Tim Peierls\n */\npublic class Memoizer &lt;A, V&gt; implements Computable&lt;A, V&gt; {\n    private final ConcurrentMap&lt;A, Future&lt;V&gt;&gt; cache\n            = new ConcurrentHashMap&lt;A, Future&lt;V&gt;&gt;();\n    private final Computable&lt;A, V&gt; c;\n\npublic Memoizer(Computable&lt;A, V&gt; c) {\n    this.c = c;\n}\n\npublic V compute(final A arg) throws InterruptedException {\n    while (true) {\n\n        Future&lt;V&gt; f = cache.get(arg);\n        // computation not started\n        if (f == null) {\n            Callable&lt;V&gt; eval = new Callable&lt;V&gt;() {\n                public V call() throws InterruptedException {\n                    return c.compute(arg);\n                }\n            };\n\n            FutureTask&lt;V&gt; ft = new FutureTask&lt;V&gt;(eval);\n            f = cache.putIfAbsent(arg, ft);\n            // start computation if it's not started in the meantime\n            if (f == null) {\n                f = ft;\n                ft.run();\n            }\n        }\n\n        // get result if ready, otherwise block and wait\n        try {\n            return f.get();\n        } catch (CancellationException e) {\n            cache.remove(arg, f);\n        } catch (ExecutionException e) {\n            throw LaunderThrowable.launderThrowable(e.getCause());\n        }\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":73745,"reputation":20493,"user_id":212211,"accept_rate":89,"display_name":"ring bearer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1435430391,"creation_date":1435430391,"answer_id":31092213,"question_id":31092067,"body_markdown":"In the example you have given you might as well run everything in your `main()` method and go your merry way.\r\n\r\nBut let us assume you have three steps of computation that you are currently running sequentially. Just for understanding let us assume that step1 takes t1 seconds, step2 takes t2 seconds, and step3 takes t3 seconds to complete. So total computation time is `t1+t2+t3`. Also, let us assume that `t2&gt;t1&gt;=t3`.\r\n\r\nNow let us consider a scenario when we executed these three steps in parallel using `Future` to hold each computational results. You can check if each task is done using non-blocking `isDone()` call on corresponding futures. Now what happens? theoretically your execution is as fast as how `t2` completes right? So we *did* gain some benefits from parallelism.\r\n\r\nAlso, in Java8 , there is `CompletableFuture` that supports functional style call backs.","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p>In the example you have given you might as well run everything in your <code>main()</code> method and go your merry way.</p>\n\n<p>But let us assume you have three steps of computation that you are currently running sequentially. Just for understanding let us assume that step1 takes t1 seconds, step2 takes t2 seconds, and step3 takes t3 seconds to complete. So total computation time is <code>t1+t2+t3</code>. Also, let us assume that <code>t2&gt;t1&gt;=t3</code>.</p>\n\n<p>Now let us consider a scenario when we executed these three steps in parallel using <code>Future</code> to hold each computational results. You can check if each task is done using non-blocking <code>isDone()</code> call on corresponding futures. Now what happens? theoretically your execution is as fast as how <code>t2</code> completes right? So we <em>did</em> gain some benefits from parallelism.</p>\n\n<p>Also, in Java8 , there is <code>CompletableFuture</code> that supports functional style call backs.</p>\n"},{"tags":[],"owner":{"account_id":5968065,"reputation":14213,"user_id":4691279,"accept_rate":58,"display_name":"hagrawal7777"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435431605,"creation_date":1435431605,"answer_id":31092433,"question_id":31092067,"body_markdown":"If you don&#39;t care about the results, then spawn a new thread and from that thread use `ExectorService` API for task submission. In that way, your parent thread i.e `main` thread will not be blocking in any way, it would simply spawn a new thread and then will start further execution, while the new thread will submit your tasks.\r\n\r\nFor creating new thread - either do it yourself by having a `ThreadFactory` for your async thread creation or use some implementation of `java.util.concurrent.Executor`.\r\n\r\nIf this is in a JEE application and you are using Spring framework then you can easily create a new asynchronous thread using `@async` annotation.\r\n\r\nHope this helps!","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p>If you don't care about the results, then spawn a new thread and from that thread use <code>ExectorService</code> API for task submission. In that way, your parent thread i.e <code>main</code> thread will not be blocking in any way, it would simply spawn a new thread and then will start further execution, while the new thread will submit your tasks.</p>\n\n<p>For creating new thread - either do it yourself by having a <code>ThreadFactory</code> for your async thread creation or use some implementation of <code>java.util.concurrent.Executor</code>.</p>\n\n<p>If this is in a JEE application and you are using Spring framework then you can easily create a new asynchronous thread using <code>@async</code> annotation.</p>\n\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1521818021,"creation_date":1482749516,"answer_id":41330116,"question_id":31092067,"body_markdown":"&gt; Below is the snippet of the pseudo code. My question is- Does the below code not defeat the very notion of parallel asynchronous processing?\n\nIt all depends on your use case:\n\n1. If you really want to block till you get the result, use blocking `get()`\n2. If you can wait for a specific period to know the status instead of infinite blocking duration, use `get()` with time-out\n3. If you can continue without analysing the result immediately and inspect the result at future time, use [CompletableFuture][1] (java 8)\n\n   &gt; A Future that may be explicitly completed (setting its value and status), and may be used as a CompletionStage, supporting dependent functions and actions that trigger upon its completion.\n\n4. You can implement callback mechanism from your Runnable/Callable. Have a look at below SE question:\n\n   https://stackoverflow.com/questions/826212/java-executors-how-to-be-notified-without-blocking-when-a-task-completes\n\n\n\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<blockquote>\n<p>Below is the snippet of the pseudo code. My question is- Does the below code not defeat the very notion of parallel asynchronous processing?</p>\n</blockquote>\n<p>It all depends on your use case:</p>\n<ol>\n<li><p>If you really want to block till you get the result, use blocking <code>get()</code></p>\n</li>\n<li><p>If you can wait for a specific period to know the status instead of infinite blocking duration, use <code>get()</code> with time-out</p>\n</li>\n<li><p>If you can continue without analysing the result immediately and inspect the result at future time, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">CompletableFuture</a> (java 8)</p>\n<blockquote>\n<p>A Future that may be explicitly completed (setting its value and status), and may be used as a CompletionStage, supporting dependent functions and actions that trigger upon its completion.</p>\n</blockquote>\n</li>\n<li><p>You can implement callback mechanism from your Runnable/Callable. Have a look at below SE question:</p>\n<p><a href=\"https://stackoverflow.com/questions/826212/java-executors-how-to-be-notified-without-blocking-when-a-task-completes\">Java executors: how to be notified, without blocking, when a task completes?</a></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1471892,"reputation":9718,"user_id":1383240,"accept_rate":38,"display_name":"NiVeR"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1536765012,"creation_date":1526056198,"answer_id":50296580,"question_id":31092067,"body_markdown":"I would like to give my share on this one, more on theoretical point of view as there are some technical answers already. I would like to base my answer on the comment:\r\n\r\n&gt; Let me give you my example. The tasks I submit to the service end up\r\n&gt; raising HTTP requests, The result of the HTTP request can take a lot\r\n&gt; of time. But I do need the result of each HTTP request. The tasks are\r\n&gt; submitted in a loop. If I wait for each task to return (get), then I\r\n&gt; am loosing parallelism here, ain&#39;t I?\r\n\r\nwhich agrees with what is said in the question.\r\n\r\nSay you have three kids, and you want to make a cake, for your birthday. Since you want to make the greatest of cakes you need a lot of different stuff to prepare it. So what you do is split the ingredients on three different lists,  because where you live there exist just 3 supermarkets that sell different products, and assign each of your kids a single task, `simultaneously`. \r\n\r\nNow, before you can start preparing the cake (let&#39;s assume again, that you need all the ingredients beforehand) you will have to wait for the kid that have to do the longest route. Now, the fact that you need to wait for all the ingredients before starting to make the cake is *your* necessity, not a dependency among tasks. Your kids have been working on the tasks simoultaneously as long as they could (e.g: until the first kid completed the task). So, to conclude, here you have the paralelilsm.\r\n\r\nThe sequential example is described when you have 1 kid and you assign all three tasks to him/her.","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p>I would like to give my share on this one, more on theoretical point of view as there are some technical answers already. I would like to base my answer on the comment:</p>\n\n<blockquote>\n  <p>Let me give you my example. The tasks I submit to the service end up\n  raising HTTP requests, The result of the HTTP request can take a lot\n  of time. But I do need the result of each HTTP request. The tasks are\n  submitted in a loop. If I wait for each task to return (get), then I\n  am loosing parallelism here, ain't I?</p>\n</blockquote>\n\n<p>which agrees with what is said in the question.</p>\n\n<p>Say you have three kids, and you want to make a cake, for your birthday. Since you want to make the greatest of cakes you need a lot of different stuff to prepare it. So what you do is split the ingredients on three different lists,  because where you live there exist just 3 supermarkets that sell different products, and assign each of your kids a single task, <code>simultaneously</code>. </p>\n\n<p>Now, before you can start preparing the cake (let's assume again, that you need all the ingredients beforehand) you will have to wait for the kid that have to do the longest route. Now, the fact that you need to wait for all the ingredients before starting to make the cake is <em>your</em> necessity, not a dependency among tasks. Your kids have been working on the tasks simoultaneously as long as they could (e.g: until the first kid completed the task). So, to conclude, here you have the paralelilsm.</p>\n\n<p>The sequential example is described when you have 1 kid and you assign all three tasks to him/her.</p>\n"}],"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104291,"favorite_count":0,"down_vote_count":3,"up_vote_count":93,"accepted_answer_id":31092208,"answer_count":5,"score":90,"last_activity_date":1683218540,"creation_date":1435429623,"question_id":31092067,"body_markdown":"Below is the snippet of the pseudo code. \r\nDoes the below code not defeat the very notion of parallel asynchronous processing? \r\n\r\nThe reason I ask this is because in the below code the main thread would submit a task to be executed in a different thread. After submitting the task in the queue, it blocks on Future.get() method for the task to return the value. I would rather have the task executed in the main thread rather than submitting to a different thread and waiting for the results. What is that I gained by executing the task in a new thread? \r\n\r\nI am aware that you could wait for a limited time etc, but then what if I really care about the result? The problem gets worse if there are multiple tasks to be executed. It seems to me that we are just doing the work synchronously. I am aware of the Guava library which provides a non blocking listener interface. But I am interested to know if my understanding is correct for the Future.get() API. If it is correct, why is the Future.get() designed to block thereby defeating the whole process of parallel processing?\r\n\r\nI use Java 6.\r\n\r\n\r\n    public static void main(String[] args){\r\n    \r\n    private ExectorService executorService = ...\r\n    \r\n    Future future = executorService.submit(new Callable(){\r\n        public Object call() throws Exception {\r\n            System.out.println(&quot;Asynchronous Callable&quot;);\r\n            return &quot;Callable Result&quot;;\r\n        }\r\n    });\r\n    \r\n    System.out.println(&quot;future.get() = &quot; + future.get());\r\n    }","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p>Below is the snippet of the pseudo code.\nDoes the below code not defeat the very notion of parallel asynchronous processing?</p>\n<p>The reason I ask this is because in the below code the main thread would submit a task to be executed in a different thread. After submitting the task in the queue, it blocks on Future.get() method for the task to return the value. I would rather have the task executed in the main thread rather than submitting to a different thread and waiting for the results. What is that I gained by executing the task in a new thread?</p>\n<p>I am aware that you could wait for a limited time etc, but then what if I really care about the result? The problem gets worse if there are multiple tasks to be executed. It seems to me that we are just doing the work synchronously. I am aware of the Guava library which provides a non blocking listener interface. But I am interested to know if my understanding is correct for the Future.get() API. If it is correct, why is the Future.get() designed to block thereby defeating the whole process of parallel processing?</p>\n<p>I use Java 6.</p>\n<pre><code>public static void main(String[] args){\n\nprivate ExectorService executorService = ...\n\nFuture future = executorService.submit(new Callable(){\n    public Object call() throws Exception {\n        System.out.println(&quot;Asynchronous Callable&quot;);\n        return &quot;Callable Result&quot;;\n    }\n});\n\nSystem.out.println(&quot;future.get() = &quot; + future.get());\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security","spring-cloud"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1683218495,"post_id":76170589,"comment_id":134336643,"body_markdown":"Why do you remove Spring Security, if you want to use it? Add it back.","body":"Why do you remove Spring Security, if you want to use it? Add it back."},{"owner":{"account_id":28501901,"reputation":1,"user_id":21813033,"display_name":"fsjyz"},"score":0,"creation_date":1683248529,"post_id":76170589,"comment_id":134341715,"body_markdown":"I didn&#39;t remove it ,it&#39;s just not in the same module so, the functions were separated to run independently so it doesn&#39;t work anymore","body":"I didn&#39;t remove it ,it&#39;s just not in the same module so, the functions were separated to run independently so it doesn&#39;t work anymore"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1683272583,"post_id":76170589,"comment_id":134344443,"body_markdown":"What module? Show your dependencies. However, you could allway add it back.","body":"What module? Show your dependencies. However, you could allway add it back."}],"owner":{"account_id":28501901,"reputation":1,"user_id":21813033,"display_name":"fsjyz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683218463,"creation_date":1683185404,"question_id":76170589,"body_markdown":"I&#39;ve upgraded a Spring Cloud project from a Spring Boot project, which the Spring Security module has been extracted from other modules and now the annotation `@PreAuthorize` is useless.\r\n\r\nHow to resume the `@PreAuthorize` or is there another way to accomplish the authorization?\r\n\r\n```java\r\n@PreAuthorize(&quot;@el.check(&#39;student:del&#39;)&quot;)\r\npublic ResponseEntity&lt;Object&gt; delete(@RequestBody Set&lt;Long&gt; schoolId) {\r\n        return studentService.delete(schoolId);\r\n}\r\n```\r\n\r\nThe annotation is active only if the class extends `WebSecurityConfigurerAdapter` and has an annotation `@EnableGlobalMethodSecurity(prePostEnabled = true)`.","title":"Spring Cloud security issues","body":"<p>I've upgraded a Spring Cloud project from a Spring Boot project, which the Spring Security module has been extracted from other modules and now the annotation <code>@PreAuthorize</code> is useless.</p>\n<p>How to resume the <code>@PreAuthorize</code> or is there another way to accomplish the authorization?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PreAuthorize(&quot;@el.check('student:del')&quot;)\npublic ResponseEntity&lt;Object&gt; delete(@RequestBody Set&lt;Long&gt; schoolId) {\n        return studentService.delete(schoolId);\n}\n</code></pre>\n<p>The annotation is active only if the class extends <code>WebSecurityConfigurerAdapter</code> and has an annotation <code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code>.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":0,"creation_date":1627740838,"post_id":68602821,"comment_id":121239888,"body_markdown":"It was working fine but i dont know what happened now","body":"It was working fine but i dont know what happened now"},{"owner":{"account_id":19020553,"reputation":675,"user_id":13884720,"display_name":"Abdalrhman Alkraien"},"score":0,"creation_date":1627740872,"post_id":68602821,"comment_id":121239896,"body_markdown":"you have one or more relation is null  you have field in database dont has forigen key check the filed in database or delete the relation result into dto","body":"you have one or more relation is null  you have field in database dont has forigen key check the filed in database or delete the relation result into dto"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1627740956,"post_id":68602821,"comment_id":121239915,"body_markdown":"Show us `RoleDomain.hashCode`","body":"Show us <code>RoleDomain.hashCode</code>"},{"owner":{"account_id":19020553,"reputation":675,"user_id":13884720,"display_name":"Abdalrhman Alkraien"},"score":0,"creation_date":1627740984,"post_id":68602821,"comment_id":121239927,"body_markdown":"in dto you have object has null when transfer from entity to dto","body":"in dto you have object has null when transfer from entity to dto"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1627741041,"post_id":68602821,"comment_id":121239940,"body_markdown":"Also show `UserRoleDomain.hashCode`","body":"Also show <code>UserRoleDomain.hashCode</code>"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1627741156,"post_id":68602821,"comment_id":121239966,"body_markdown":"I bet your `RoleDomain` have field with type `UserRoleDomain` and vice versa. Both of those classes use its corresponding field in `hashCode` calculation.","body":"I bet your <code>RoleDomain</code> have field with type <code>UserRoleDomain</code> and vice versa. Both of those classes use its corresponding field in <code>hashCode</code> calculation."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1627760755,"post_id":68602821,"comment_id":121244309,"body_markdown":"It&#39;s a good thing you came to Stack Overflow and reported this error to us. ;)\n\nBack on topic- a Stack overflow error in java means you&#39;ve called too many methods without returning and your call stack has become too large. It can happen when your code is in an infinite loop calling a method over and over.","body":"It&#39;s a good thing you came to Stack Overflow and reported this error to us. ;)  Back on topic- a Stack overflow error in java means you&#39;ve called too many methods without returning and your call stack has become too large. It can happen when your code is in an infinite loop calling a method over and over."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1627762960,"post_id":68602821,"comment_id":121244756,"body_markdown":"Does this answer help you? https://stackoverflow.com/a/40694643/4425643","body":"Does this answer help you? <a href=\"https://stackoverflow.com/a/40694643/4425643\">stackoverflow.com/a/40694643/4425643</a>"},{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":0,"creation_date":1627770658,"post_id":68602821,"comment_id":121246047,"body_markdown":"You can check the other classes of my application here for having a clear understanding about the issue  https://github.com/iqbalrohail/Exam-portal-backend","body":"You can check the other classes of my application here for having a clear understanding about the issue  <a href=\"https://github.com/iqbalrohail/Exam-portal-backend\" rel=\"nofollow noreferrer\">github.com/iqbalrohail/Exam-portal-backend</a>"},{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":0,"creation_date":1627822677,"post_id":68602821,"comment_id":121253758,"body_markdown":"The problem was with @Data annotation which I were using earlier ..","body":"The problem was with @Data annotation which I were using earlier .."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1627850977,"post_id":68602821,"comment_id":121260440,"body_markdown":"It&#39;s recommended to post a [minimum reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) when asking for help. Furthermore, please place the contents of `RoleDomain.java` into your question since it was required to understand the problem and was part of the solution.","body":"It&#39;s recommended to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimum reproducible example</a> when asking for help. Furthermore, please place the contents of <code>RoleDomain.java</code> into your question since it was required to understand the problem and was part of the solution."}],"answers":[{"tags":[],"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1627775183,"creation_date":1627762848,"answer_id":68605588,"question_id":68602821,"body_markdown":"A Stack Overflow error happens when your code has called too many methods without returning and there are too many methods in the stack, causing it to overflow. This commonly happens when you have an infinite loop where a method calls itself repeatedly.\r\n\r\nThere is a loop happening in your `hashCode` method in `com.examportal.examportalapi.domain.UserRoleDomain` which calls `com.examportal.examportalapi.domain.RoleDomain.hashCode`.\r\n\r\nYou have the [@Data lombok annotation][1] in these two classes. Replace the @Data annotation with *just* the features you need in the classes. \r\n@Data generates hashCode methods that cause your problem. See the documentation: https://projectlombok.org/features/Data\r\n \r\n\r\n\r\n  [1]: https://github.com/iqbalrohail/Exam-portal-backend/blob/43346cc6f6ff28e9c4df54fa616d8990a9c1358b/src/main/java/com/examportal/examportalapi/domain/RoleDomain.java","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>A Stack Overflow error happens when your code has called too many methods without returning and there are too many methods in the stack, causing it to overflow. This commonly happens when you have an infinite loop where a method calls itself repeatedly.</p>\n<p>There is a loop happening in your <code>hashCode</code> method in <code>com.examportal.examportalapi.domain.UserRoleDomain</code> which calls <code>com.examportal.examportalapi.domain.RoleDomain.hashCode</code>.</p>\n<p>You have the <a href=\"https://github.com/iqbalrohail/Exam-portal-backend/blob/43346cc6f6ff28e9c4df54fa616d8990a9c1358b/src/main/java/com/examportal/examportalapi/domain/RoleDomain.java\" rel=\"noreferrer\">@Data lombok annotation</a> in these two classes. Replace the @Data annotation with <em>just</em> the features you need in the classes.\n@Data generates hashCode methods that cause your problem. See the documentation: <a href=\"https://projectlombok.org/features/Data\" rel=\"noreferrer\">https://projectlombok.org/features/Data</a></p>\n"},{"tags":[],"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1627822839,"creation_date":1627822839,"answer_id":68610660,"question_id":68602821,"body_markdown":"Changed **@Data** annotation with the following Lombok annotations and it worked for me \r\n\r\n@Setter\r\n\r\n@Getter\r\n\r\n@AllArgsConstructor\r\n\r\n@NoArgsConstructor\r\n\r\n@ToString\r\n\r\n@Entity","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>Changed <strong>@Data</strong> annotation with the following Lombok annotations and it worked for me</p>\n<p>@Setter</p>\n<p>@Getter</p>\n<p>@AllArgsConstructor</p>\n<p>@NoArgsConstructor</p>\n<p>@ToString</p>\n<p>@Entity</p>\n"},{"tags":[],"owner":{"account_id":4094046,"reputation":1930,"user_id":3361335,"accept_rate":15,"display_name":"fresko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659694934,"creation_date":1659633464,"answer_id":73239960,"question_id":68602821,"body_markdown":"may be useful.\r\nToday I lost a lot of time because i tried to print a List&lt;blablabla&gt; object. It was calling implicitely toString(), but the error came from Unit tests and it was not pointing directly to the class with the problem\r\n\r\n\tList&lt;ArticoliDto&gt; articoli = articoliService.SelByDescrizione(&quot;blabla&quot;); //return a List&lt;xxx&gt;\r\n\tlogger.info(&quot;Trovati articoli: &quot; + articoli); //this causes the error!!\r\n    \r\nThe exception was (partially):\r\n\r\n    org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.StackOverflowError\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1082)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n    \tat org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n    \tat org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\r\n    \tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\r\n    \tat org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:199)\r\n    \tat com.xantrix.webapp.UnitTest.ControllerTest.SelectArtTest.listArtByDesc(SelectArtTest.java:174)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n    \tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>may be useful.\nToday I lost a lot of time because i tried to print a List object. It was calling implicitely toString(), but the error came from Unit tests and it was not pointing directly to the class with the problem</p>\n<pre><code>List&lt;ArticoliDto&gt; articoli = articoliService.SelByDescrizione(&quot;blabla&quot;); //return a List&lt;xxx&gt;\nlogger.info(&quot;Trovati articoli: &quot; + articoli); //this causes the error!!\n</code></pre>\n<p>The exception was (partially):</p>\n<pre><code>org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.StackOverflowError\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1082)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\n    at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:199)\n    at com.xantrix.webapp.UnitTest.ControllerTest.SelectArtTest.listArtByDesc(SelectArtTest.java:174)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13329989,"reputation":131,"user_id":9621686,"display_name":"Meriem Bader"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668442004,"creation_date":1668442004,"answer_id":74434578,"question_id":68602821,"body_markdown":"You have to delete the annotation of Lambok `@Data`","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>You have to delete the annotation of Lambok <code>@Data</code></p>\n"},{"tags":[],"owner":{"account_id":17803224,"reputation":73,"user_id":12929442,"display_name":"raghurajj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675159938,"creation_date":1675153429,"answer_id":75294372,"question_id":68602821,"body_markdown":"I faced the same issue. after debugging found out that there was a cycle in my code. after fixing that the error was solved. Please, check for the cycle in your code too. maybe that&#39;s the issue.","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>I faced the same issue. after debugging found out that there was a cycle in my code. after fixing that the error was solved. Please, check for the cycle in your code too. maybe that's the issue.</p>\n"},{"tags":[],"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678184319,"creation_date":1678184319,"answer_id":75660662,"question_id":68602821,"body_markdown":"I encounter this problem and solved this problem with `@Data` annotation only so that you can solve this problem only `@Data` annotation as well. you have add `@EqualsAndHashCode.Exclude` and `@ToString.Exclude` in your entities.","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>I encounter this problem and solved this problem with <code>@Data</code> annotation only so that you can solve this problem only <code>@Data</code> annotation as well. you have add <code>@EqualsAndHashCode.Exclude</code> and <code>@ToString.Exclude</code> in your entities.</p>\n"}],"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52200,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":6,"score":5,"last_activity_date":1683218437,"creation_date":1627740248,"question_id":68602821,"body_markdown":"Getting this error when jpa tries to fetch the object from database.\r\n\r\nError : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.StackOverflowError] with root cause\r\n\r\n**UserController**\r\nIn this the getUsers method doesn&#39;t work and caused error \r\n\r\n```\r\n\r\n@RestController\r\n@RequestMapping(&quot;user&quot;)\r\npublic class UserController {\r\n\r\n    private final Logger log = LoggerFactory.getLogger(UserController.class);\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    @Autowired\r\n    private RoleService roleService;\r\n\r\n    @PostMapping(&quot;/add&quot;)\r\n    public MessageDto addUser(@RequestBody UserDto userDto)\r\n    {\r\n        log.info(&quot;Post call have been received at user/add with DTO &quot; + userDto);\r\n                                             //Set&lt;UserRoleDomain&gt;\r\n        UserDomain userDomain = userService.mapUserDtoToDomain(userDto);\r\n        return userService.add(userDomain, roleService.add(userDomain));\r\n    }\r\n\r\n    @GetMapping(&quot;/get/{userName}&quot;)\r\n    public UserDto getUsers(@PathVariable(&quot;userName&quot;) String userName)\r\n    {\r\n        log.info(&quot;Get call have been received at user/get/ &quot;+userName);\r\n        return userService.getById(userName);\r\n    }\r\n\r\n}\r\n```\r\n**UserService**\r\n```\r\n\r\n@Service\r\n@Transactional\r\npublic class UserService {\r\n\r\n    private final Logger log = LoggerFactory.getLogger(UserService.class);\r\n\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    private RoleRepository roleRepository;\r\n\r\n    @Autowired\r\n    private UserRoleRepository userRoleRepository;\r\n\r\n    public MessageDto add(UserDomain userDomain , Set&lt;UserRoleDomain&gt; userRoles)\r\n    {\r\n            // UserDomain userDomain = mapUserDtoToDomain(userDto);\r\n            if( userRepository.findByUserName(userDomain.getUserName())!=null) // causing error\r\n            {\r\n                String responseMessage = &quot;User is already register with name ! &quot;+userDomain.getUserName();\r\n                MessageDto messageDto = new MessageDto(responseMessage);\r\n                log.info(responseMessage);\r\n                return messageDto;\r\n            }\r\n            else {\r\n\r\n                for (UserRoleDomain userRoleDomain: userRoles) {\r\n                    System.out.println(&quot;result : &quot;+userRoleDomain.getRoleDomain());\r\n                    roleRepository.save(userRoleDomain.getRoleDomain());\r\n                }\r\n\r\n                userDomain.getUserRoleDomains().addAll(userRoles);\r\n                userRepository.save(userDomain);\r\n                String responseMessage = &quot;User has been added with Id &quot; + userDomain.getUserId();\r\n                MessageDto messageDto = new MessageDto(responseMessage);\r\n                log.info(responseMessage);\r\n                return messageDto;\r\n            }\r\n    }\r\n\r\n    public UserDto getById(String userName)\r\n    {\r\n       UserDomain userDomain =  userRepository.findByUserName(userName);\r\n       return mapUserDomainToDto(userDomain);\r\n    }\r\n\r\n    public UserDomain mapUserDtoToDomain(UserDto userDto)\r\n    {\r\n        return objectMapper.convertValue(userDto , UserDomain.class);\r\n    }\r\n\r\n    public UserDto mapUserDomainToDto(UserDomain userDomain)\r\n    {\r\n        return objectMapper.convertValue(userDomain , UserDto.class);\r\n    }\r\n\r\n}\r\n```\r\n**This is my terminal**\r\n\r\n```\r\n2021-07-31 13:57:50.549  WARN 13691 --- [nio-8881-exec-1] o.h.e.loading.internal.LoadContexts      : HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.CollectionLoadContext@17f80723&lt;rs=HikariProxyResultSet@763024380 wrapping Result set representing update count of -1&gt;\r\n2021-07-31 13:57:50.549  WARN 13691 --- [nio-8881-exec-1] o.h.e.loading.internal.LoadContexts      : HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.CollectionLoadContext@38b516d2&lt;rs=HikariProxyResultSet@1651373951 wrapping Result set representing update count of -1&gt;\r\n2021-07-31 13:57:50.558 ERROR 13691 --- [nio-8881-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.StackOverflowError] with root cause\r\n\r\njava.lang.StackOverflowError: null\r\n\tat java.base/java.lang.String.indexOf(String.java:1578) ~[na:na]\r\n\tat java.base/java.lang.String.indexOf(String.java:1535) ~[na:na]\r\n\tat java.base/java.net.URLStreamHandler.parseURL(URLStreamHandler.java:143) ~[na:na]\r\n\tat java.base/sun.net.www.protocol.file.Handler.parseURL(Handler.java:67) ~[na:na]\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:674) ~[na:na]\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:541) ~[na:na]\r\n\tat java.base/jdk.internal.loader.URLClassPath$FileLoader.getResource(URLClassPath.java:1221) ~[na:na]\r\n\tat java.base/jdk.internal.loader.URLClassPath.getResource(URLClassPath.java:314) ~[na:na]\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:695) ~[na:na]\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621) ~[na:na]\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1020) ~[mysql-connector-java-8.0.25.jar:8.0.25]\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-4.0.3.jar:na]\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.getResultSet(AbstractLoadPlanBasedLoader.java:390) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeQueryStatement(AbstractLoadPlanBasedLoader.java:163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:104) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\tat java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\r\n\tat org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\tat java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\r\n\tat org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\tat java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\r\n\tat org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\tat java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\r\n\tat org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\r\n```\r\n","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>Getting this error when jpa tries to fetch the object from database.</p>\n<p>Error : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.StackOverflowError] with root cause</p>\n<p><strong>UserController</strong>\nIn this the getUsers method doesn't work and caused error</p>\n<pre><code>\n@RestController\n@RequestMapping(&quot;user&quot;)\npublic class UserController {\n\n    private final Logger log = LoggerFactory.getLogger(UserController.class);\n\n    @Autowired\n    private UserService userService;\n\n    @Autowired\n    private RoleService roleService;\n\n    @PostMapping(&quot;/add&quot;)\n    public MessageDto addUser(@RequestBody UserDto userDto)\n    {\n        log.info(&quot;Post call have been received at user/add with DTO &quot; + userDto);\n                                             //Set&lt;UserRoleDomain&gt;\n        UserDomain userDomain = userService.mapUserDtoToDomain(userDto);\n        return userService.add(userDomain, roleService.add(userDomain));\n    }\n\n    @GetMapping(&quot;/get/{userName}&quot;)\n    public UserDto getUsers(@PathVariable(&quot;userName&quot;) String userName)\n    {\n        log.info(&quot;Get call have been received at user/get/ &quot;+userName);\n        return userService.getById(userName);\n    }\n\n}\n</code></pre>\n<p><strong>UserService</strong></p>\n<pre><code>\n@Service\n@Transactional\npublic class UserService {\n\n    private final Logger log = LoggerFactory.getLogger(UserService.class);\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private RoleRepository roleRepository;\n\n    @Autowired\n    private UserRoleRepository userRoleRepository;\n\n    public MessageDto add(UserDomain userDomain , Set&lt;UserRoleDomain&gt; userRoles)\n    {\n            // UserDomain userDomain = mapUserDtoToDomain(userDto);\n            if( userRepository.findByUserName(userDomain.getUserName())!=null) // causing error\n            {\n                String responseMessage = &quot;User is already register with name ! &quot;+userDomain.getUserName();\n                MessageDto messageDto = new MessageDto(responseMessage);\n                log.info(responseMessage);\n                return messageDto;\n            }\n            else {\n\n                for (UserRoleDomain userRoleDomain: userRoles) {\n                    System.out.println(&quot;result : &quot;+userRoleDomain.getRoleDomain());\n                    roleRepository.save(userRoleDomain.getRoleDomain());\n                }\n\n                userDomain.getUserRoleDomains().addAll(userRoles);\n                userRepository.save(userDomain);\n                String responseMessage = &quot;User has been added with Id &quot; + userDomain.getUserId();\n                MessageDto messageDto = new MessageDto(responseMessage);\n                log.info(responseMessage);\n                return messageDto;\n            }\n    }\n\n    public UserDto getById(String userName)\n    {\n       UserDomain userDomain =  userRepository.findByUserName(userName);\n       return mapUserDomainToDto(userDomain);\n    }\n\n    public UserDomain mapUserDtoToDomain(UserDto userDto)\n    {\n        return objectMapper.convertValue(userDto , UserDomain.class);\n    }\n\n    public UserDto mapUserDomainToDto(UserDomain userDomain)\n    {\n        return objectMapper.convertValue(userDomain , UserDto.class);\n    }\n\n}\n</code></pre>\n<p><strong>This is my terminal</strong></p>\n<pre><code>2021-07-31 13:57:50.549  WARN 13691 --- [nio-8881-exec-1] o.h.e.loading.internal.LoadContexts      : HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.CollectionLoadContext@17f80723&lt;rs=HikariProxyResultSet@763024380 wrapping Result set representing update count of -1&gt;\n2021-07-31 13:57:50.549  WARN 13691 --- [nio-8881-exec-1] o.h.e.loading.internal.LoadContexts      : HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.CollectionLoadContext@38b516d2&lt;rs=HikariProxyResultSet@1651373951 wrapping Result set representing update count of -1&gt;\n2021-07-31 13:57:50.558 ERROR 13691 --- [nio-8881-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.StackOverflowError] with root cause\n\njava.lang.StackOverflowError: null\n    at java.base/java.lang.String.indexOf(String.java:1578) ~[na:na]\n    at java.base/java.lang.String.indexOf(String.java:1535) ~[na:na]\n    at java.base/java.net.URLStreamHandler.parseURL(URLStreamHandler.java:143) ~[na:na]\n    at java.base/sun.net.www.protocol.file.Handler.parseURL(Handler.java:67) ~[na:na]\n    at java.base/java.net.URL.&lt;init&gt;(URL.java:674) ~[na:na]\n    at java.base/java.net.URL.&lt;init&gt;(URL.java:541) ~[na:na]\n    at java.base/jdk.internal.loader.URLClassPath$FileLoader.getResource(URLClassPath.java:1221) ~[na:na]\n    at java.base/jdk.internal.loader.URLClassPath.getResource(URLClassPath.java:314) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:695) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1020) ~[mysql-connector-java-8.0.25.jar:8.0.25]\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-4.0.3.jar:na]\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.getResultSet(AbstractLoadPlanBasedLoader.java:390) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeQueryStatement(AbstractLoadPlanBasedLoader.java:163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:104) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n    at java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\n    at org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n    at java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\n    at org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n    at java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\n    at org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n    at java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\n    at org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-webflux","reactive"],"owner":{"account_id":9729816,"reputation":99,"user_id":7215277,"display_name":"Pankaj Chouhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683218399,"creation_date":1683218399,"question_id":76175484,"body_markdown":"Here is the return code where am using aggregation to get data from MongoDB using Spring Webflux. When I try for records more than 15000, it looks like after around 6000 records doOnNext halts and next one is coming after a minute. So is there any way to check what is going in background or is this a common issue that streaming halts and resumes after a minute?\r\n\r\n``` return mongoTemplateReactive.aggregate(\r\n    \t    aggregation.withOptions(AggregationOptions.builder().allowDiskUse(true).build()),\r\n    \t    &quot;my_collection&quot;, Document.class).\r\n    \t    doOnNext(value -&gt; {\r\n    \t\tlog.info(&quot;-----------doOnNext-------------&quot;);\r\n    \t    }).\r\n    \t    doOnCancel(()-&gt;{\r\n    \t\tlog.info(&quot;-----------doOnCancel-------------&quot;);\r\n    \t    }).\t\r\n    \t    doOnError(ex-&gt;{\r\n    \t\tlog.info(&quot;-----------doOnError-------------&quot;);\r\n    \t\tthrow new IllegalStateException(ex);\r\n    \t    }).\r\n    \t    onBackpressureBuffer(1000, BufferOverflowStrategy.DROP_OLDEST).\r\n    \t    doOnComplete(()-&gt;{\r\n    \t\tlog.info(&quot;-----------doOnComplete-------------&quot;);\r\n    \t    })\r\n    \t    ;```","title":"Why does Spring Webflux streaming halts for sometime in between and then resumes","body":"<p>Here is the return code where am using aggregation to get data from MongoDB using Spring Webflux. When I try for records more than 15000, it looks like after around 6000 records doOnNext halts and next one is coming after a minute. So is there any way to check what is going in background or is this a common issue that streaming halts and resumes after a minute?</p>\n<pre><code>            aggregation.withOptions(AggregationOptions.builder().allowDiskUse(true).build()),\n            &quot;my_collection&quot;, Document.class).\n            doOnNext(value -&gt; {\n            log.info(&quot;-----------doOnNext-------------&quot;);\n            }).\n            doOnCancel(()-&gt;{\n            log.info(&quot;-----------doOnCancel-------------&quot;);\n            }). \n            doOnError(ex-&gt;{\n            log.info(&quot;-----------doOnError-------------&quot;);\n            throw new IllegalStateException(ex);\n            }).\n            onBackpressureBuffer(1000, BufferOverflowStrategy.DROP_OLDEST).\n            doOnComplete(()-&gt;{\n            log.info(&quot;-----------doOnComplete-------------&quot;);\n            })\n            ;```\n</code></pre>\n"},{"tags":["python","java","android","chaquopy","tabula-py"],"comments":[{"owner":{"account_id":77317,"reputation":7311,"user_id":220765,"display_name":"mhsmith"},"score":0,"creation_date":1683312397,"post_id":76175476,"comment_id":134353213,"body_markdown":"Unfortunately none of the things you&#39;ve mentioned will provide a `java` command on the Android device or emulator itself. Android does not come with such a command, and neither does Chaquopy. You may be able to use Termux instead.","body":"Unfortunately none of the things you&#39;ve mentioned will provide a <code>java</code> command on the Android device or emulator itself. Android does not come with such a command, and neither does Chaquopy. You may be able to use Termux instead."}],"owner":{"account_id":27015040,"reputation":11,"user_id":20574043,"display_name":"mranderson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683218330,"creation_date":1683218330,"question_id":76175476,"body_markdown":"I am using chaqoupy and building an android app in kotlin using python scripts. I am trying to use the tabula-py module however I am getting java not found exception in my Logcat\r\n\r\n```\r\ncom.chaquo.python.PyException: JavaNotFoundError: `java` command is not found from this Python process.Please ensure Java is installed and PATH is set for `java`\r\n```\r\n\r\nI have set the JAVA_HOME correctly and everything. Here is my python script\r\n\r\n```py\r\nimport tabula\r\nfrom io import BytesIO\r\ndef main(pdf_data):\r\n\r\n    tables = tabula.read_pdf(BytesIO(pdf_data))\r\n    tables = str(tables)\r\n    return tables\r\n```\r\n\r\nIve tried changing JAVA_HOME paths, reinstalled JDK. Tried adding a JRE to my Android Studio Project, tried changing to embedded JDK in my gradle settings.","title":"Java not found for Tabula-py with chaquopy inside an Android Studio Kotlin project","body":"<p>I am using chaqoupy and building an android app in kotlin using python scripts. I am trying to use the tabula-py module however I am getting java not found exception in my Logcat</p>\n<pre><code>com.chaquo.python.PyException: JavaNotFoundError: `java` command is not found from this Python process.Please ensure Java is installed and PATH is set for `java`\n</code></pre>\n<p>I have set the JAVA_HOME correctly and everything. Here is my python script</p>\n<pre class=\"lang-py prettyprint-override\"><code>import tabula\nfrom io import BytesIO\ndef main(pdf_data):\n\n    tables = tabula.read_pdf(BytesIO(pdf_data))\n    tables = str(tables)\n    return tables\n</code></pre>\n<p>Ive tried changing JAVA_HOME paths, reinstalled JDK. Tried adding a JRE to my Android Studio Project, tried changing to embedded JDK in my gradle settings.</p>\n"},{"tags":["java","selenium-webdriver","automated-tests","cucumber","scenarios"],"comments":[{"owner":{"account_id":1976379,"reputation":608,"user_id":1774084,"display_name":"M. Yousfi"},"score":2,"creation_date":1683218880,"post_id":76175473,"comment_id":134336746,"body_markdown":"Welcome to StackOverflow. There is no dumb question, but yours need more precisions. In particular you must show us what you have tried so far and not expect people do the work.","body":"Welcome to StackOverflow. There is no dumb question, but yours need more precisions. In particular you must show us what you have tried so far and not expect people do the work."},{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1683222183,"post_id":76175473,"comment_id":134337475,"body_markdown":"Are you using Cucumber with JUnit 5? If so, see https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#exclusive-resources but there are some limitations inherited from JUnit.","body":"Are you using Cucumber with JUnit 5? If so, see <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#exclusive-resources\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber-jvm/tree/main/&hellip;</a> but there are some limitations inherited from JUnit."},{"owner":{"account_id":6774719,"reputation":1,"user_id":21818091,"display_name":"shugo0000"},"score":0,"creation_date":1683554155,"post_id":76175473,"comment_id":134380171,"body_markdown":"we are using Cucumber Selenium. I had tried researching it for quite a while but have not figured out where the list of tests are or how to access them, I have not found anyone who has made any attempt to access it either. While I have spent quite a while on it, there really is not any fruits of my efforts to show sadly, I do apologize for that, but would appreciate some hints or examples of how to manipulate this.","body":"we are using Cucumber Selenium. I had tried researching it for quite a while but have not figured out where the list of tests are or how to access them, I have not found anyone who has made any attempt to access it either. While I have spent quite a while on it, there really is not any fruits of my efforts to show sadly, I do apologize for that, but would appreciate some hints or examples of how to manipulate this."}],"owner":{"account_id":6774719,"reputation":1,"user_id":21818091,"display_name":"shugo0000"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683218295,"creation_date":1683218295,"question_id":76175473,"body_markdown":"Sorry if this question sounds dumb, still learning new ways of improving my tests.\r\n\r\nSay I am running a random parallel test on 4 threads and a new scenario B is to be started on thread 4 but thread 2 already has a test scenario A running that shares a resource that is locked during the test. Is there a way to get the next scenario in line and push scenario B back one on the queue? (possibly using the scenario @ tags)\r\n\r\nIs there a way to access the test lineup directly during the test to manipulate it like this?\r\n\r\nLet me know if I should give any more info or a clearer statement on it.\r\n\r\n\r\n\r\nI have Investigated it for a few days myself as well as searching here to no avail.","title":"In Cucumber Is there a way to reorder test Scenarios during a test","body":"<p>Sorry if this question sounds dumb, still learning new ways of improving my tests.</p>\n<p>Say I am running a random parallel test on 4 threads and a new scenario B is to be started on thread 4 but thread 2 already has a test scenario A running that shares a resource that is locked during the test. Is there a way to get the next scenario in line and push scenario B back one on the queue? (possibly using the scenario @ tags)</p>\n<p>Is there a way to access the test lineup directly during the test to manipulate it like this?</p>\n<p>Let me know if I should give any more info or a clearer statement on it.</p>\n<p>I have Investigated it for a few days myself as well as searching here to no avail.</p>\n"},{"tags":["java","html","netbeans","web-applications"],"answers":[{"tags":[],"owner":{"account_id":10997415,"reputation":93,"user_id":8079084,"display_name":"Adam Hanek"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1683218120,"creation_date":1602637989,"answer_id":64345239,"question_id":61468328,"body_markdown":"On each app you make: Go to the application setting by right click - properties. Under Build uncheck compile on save.","title":"Netbeans &quot;Run File&quot; doesn&#39;t work on HTML or JSP (Java Web Application)","body":"<p>On each app you make: Go to the application setting by right click - properties. Under Build uncheck compile on save.</p>\n"},{"tags":[],"owner":{"account_id":27370929,"reputation":1,"user_id":20876983,"display_name":"bhargav vicharapu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672206835,"creation_date":1672206835,"answer_id":74936710,"question_id":61468328,"body_markdown":"Yes the above solution worked for me ","title":"Netbeans &quot;Run File&quot; doesn&#39;t work on HTML or JSP (Java Web Application)","body":"<p>Yes the above solution worked for me</p>\n"}],"owner":{"account_id":11315094,"reputation":41,"user_id":8297072,"display_name":"Nicholas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3963,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1683218120,"creation_date":1588021065,"question_id":61468328,"body_markdown":"I recently downloaded and installed Netbeans 11, JDK 13 and Apache Tomcat 9 (from the official sites). Soon I noticed that when you press &quot;Run File&quot; or Shift+F6 on a html file in a java web application, it does absolutely nothing. No response, no output, nothing. JSP files won&#39;t run as well. Unexplicably, if you select the project and press &quot;Run&quot; or the &quot;Run Project&quot; button (F6), the index.html file shows in the browser as expected, but no other pages (obviously).\r\n\r\nSo far, I&#39;ve tried the following things:\r\n\r\n - Uninstalling, deleting the cache and reinstalling in different locations (C: , D: , etc.).\r\n - Creating multiple web applications with different names in different locations.\r\n - Tried with different versions (Netbeans 10 and JDK 12). Same problem.\r\n - If you create a Java Application, the &quot;Run File&quot; option does work on Java Main Classes. Apparently, the problem is exclusive to WEB applications.","title":"Netbeans &quot;Run File&quot; doesn&#39;t work on HTML or JSP (Java Web Application)","body":"<p>I recently downloaded and installed Netbeans 11, JDK 13 and Apache Tomcat 9 (from the official sites). Soon I noticed that when you press \"Run File\" or Shift+F6 on a html file in a java web application, it does absolutely nothing. No response, no output, nothing. JSP files won't run as well. Unexplicably, if you select the project and press \"Run\" or the \"Run Project\" button (F6), the index.html file shows in the browser as expected, but no other pages (obviously).</p>\n\n<p>So far, I've tried the following things:</p>\n\n<ul>\n<li>Uninstalling, deleting the cache and reinstalling in different locations (C: , D: , etc.).</li>\n<li>Creating multiple web applications with different names in different locations.</li>\n<li>Tried with different versions (Netbeans 10 and JDK 12). Same problem.</li>\n<li>If you create a Java Application, the \"Run File\" option does work on Java Main Classes. Apparently, the problem is exclusive to WEB applications.</li>\n</ul>\n"},{"tags":["java","file","io","deprecated"],"comments":[{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":3,"creation_date":1432997983,"post_id":30547589,"comment_id":49167592,"body_markdown":"Java is extremely conservative about deprecation.","body":"Java is extremely conservative about deprecation."},{"owner":{"account_id":2049682,"reputation":7411,"user_id":1828937,"accept_rate":56,"display_name":"Dmitry Ginzburg"},"score":0,"creation_date":1432998023,"post_id":30547589,"comment_id":49167604,"body_markdown":"@Radiodef if it&#39;s not about dates :)","body":"@Radiodef if it&#39;s not about dates :)"},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":1,"creation_date":1432998176,"post_id":30547589,"comment_id":49167647,"body_markdown":"Related: http://stackoverflow.com/questions/6903335/java-7-path-vs-file","body":"Related: <a href=\"http://stackoverflow.com/questions/6903335/java-7-path-vs-file\">stackoverflow.com/questions/6903335/java-7-path-vs-file</a>"},{"owner":{"account_id":9052,"reputation":11722,"user_id":16549,"accept_rate":75,"display_name":"kervin"},"score":0,"creation_date":1433001001,"post_id":30547589,"comment_id":49168555,"body_markdown":"@Radiodef different questions.  This is &quot;NIO.File&quot; versus &quot;IO.File&quot;, the link is &quot;File&quot; versus &quot;Path&quot;.  Both interesting questions but different.","body":"@Radiodef different questions.  This is &quot;NIO.File&quot; versus &quot;IO.File&quot;, the link is &quot;File&quot; versus &quot;Path&quot;.  Both interesting questions but different."},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1433001294,"post_id":30547589,"comment_id":49168654,"body_markdown":"@kervin `Path`/`Files` are the replacement for `File` so it&#39;s very much related. There is some discussion over there about deprecation, but not so much with respect to &quot;why&quot;. This question is like a follow-up to that one.","body":"@kervin <code>Path</code>/<code>Files</code> are the replacement for <code>File</code> so it&#39;s very much related. There is some discussion over there about deprecation, but not so much with respect to &quot;why&quot;. This question is like a follow-up to that one."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1593991108,"creation_date":1432998412,"answer_id":30547703,"question_id":30547589,"body_markdown":"It is not deprecated because it is not broken.  Or more precisely, because the Java team and/or Oracle management do not think it is sufficiently broken to warrant the level of disruption and pushback that deprecation of `File` would cause&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\nOracle (and Sun before them) reserved deprecation for APIs that were deemed to be harmful / dangerous to use, and impossible to fix without breaking binary (or semantic) compatibility.\r\n\r\nThe `java.io.File` API is merely old-fashioned and clunky&lt;sup&gt;2&lt;/sup&gt;, but not directly harmful.  There are other standard APIs that depend on `File`, not to mention many 3rd party APIs and (probably) 100&#39;s of millions of lines of customer code.  There is no need to signal to the world that all of that code needs to be overhauled.\r\n\r\n------------\r\n\r\n&lt;sup&gt;1 - Obviously, some people will disagree with that.&lt;/sup&gt;\r\n \r\n&lt;sup&gt;2 - @fge points out that some File methods don&#39;t behave correctly on some platforms (particularly Windows / AD) in some versions of Java.  However, those were / are implementation bugs, not fundamental API flaws.  On UNIX / Linux platforms, the methods semantics are more or less correct&lt;sup&gt;2&lt;/sup&gt;.&lt;/sup&gt;\r\n\r\n&lt;sup&gt;3 - A couple of &quot;less correct&quot; aspects are that `File.length()` returns zero for files in the &quot;/proc&quot; tree, and that strange things happen when you access a FAT file system mounted on Linux and try to access if from Java.&lt;/sup&gt;","title":"Why isn&#39;t java.io.File deprecated?","body":"<p>It is not deprecated because it is not broken.  Or more precisely, because the Java team and/or Oracle management do not think it is sufficiently broken to warrant the level of disruption and pushback that deprecation of <code>File</code> would cause<sup>1</sup>.</p>\n<p>Oracle (and Sun before them) reserved deprecation for APIs that were deemed to be harmful / dangerous to use, and impossible to fix without breaking binary (or semantic) compatibility.</p>\n<p>The <code>java.io.File</code> API is merely old-fashioned and clunky<sup>2</sup>, but not directly harmful.  There are other standard APIs that depend on <code>File</code>, not to mention many 3rd party APIs and (probably) 100's of millions of lines of customer code.  There is no need to signal to the world that all of that code needs to be overhauled.</p>\n<hr />\n<p><sup>1 - Obviously, some people will disagree with that.</sup></p>\n<p><sup>2 - @fge points out that some File methods don't behave correctly on some platforms (particularly Windows / AD) in some versions of Java.  However, those were / are implementation bugs, not fundamental API flaws.  On UNIX / Linux platforms, the methods semantics are more or less correct<sup>2</sup>.</sup></p>\n<p><sup>3 - A couple of &quot;less correct&quot; aspects are that <code>File.length()</code> returns zero for files in the &quot;/proc&quot; tree, and that strange things happen when you access a FAT file system mounted on Linux and try to access if from Java.</sup></p>\n"},{"tags":[],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683218104,"creation_date":1432999289,"answer_id":30547863,"question_id":30547589,"body_markdown":"Because it is too ingrained within the JDK.\r\n\r\nFile has been there since the early days of Java; and in spite of its innumerable flaws ([some of them listed here](https://web.archive.org/web/20170102181548/https://java7fs.wikia.com/wiki/Why_File_sucks#mw-content-text), but there are others), the amount of effort required to migrate all the code to the &quot;new&quot; JSR 203 API (which is already 4 years old!!) is immense.\r\n\r\nThe main problem is in fact the awareness of JSR 203, or lack thereof; even today, the vast majority of tutorials on the net still use File; the best one can do is write more tutorials using JSR 203, more code using it etc etc.\r\n\r\nI am in fact one of the main proponents of the new API, to the point of being annoying on this aspect :), but I do have code to prove my point:\r\n\r\n* a [filesystem over FTP](https://github.com/fge/java7-fs-ftp),\r\n* [another over dropbox](https://github.com/fge/java7-fs-dropbox),\r\n* [another over box.com](https://github.com/fge/java7-fs-box),\r\n* a [helper library to develop new filesystems](https://github.com/fge/java7-fs-base),\r\n* and finally a [helper library complementing the JDK&#39;s `Files`](https://github.com/fge/java7-fs-more) (and fixing a few bugs in the process).\r\n\r\nAt this stage, it is a matter of patience; answering questions on SO using the new way, or even old questions etc. And it&#39;s an uphill battle.\r\n","title":"Why isn&#39;t java.io.File deprecated?","body":"<p>Because it is too ingrained within the JDK.</p>\n<p>File has been there since the early days of Java; and in spite of its innumerable flaws (<a href=\"https://web.archive.org/web/20170102181548/https://java7fs.wikia.com/wiki/Why_File_sucks#mw-content-text\" rel=\"nofollow noreferrer\">some of them listed here</a>, but there are others), the amount of effort required to migrate all the code to the &quot;new&quot; JSR 203 API (which is already 4 years old!!) is immense.</p>\n<p>The main problem is in fact the awareness of JSR 203, or lack thereof; even today, the vast majority of tutorials on the net still use File; the best one can do is write more tutorials using JSR 203, more code using it etc etc.</p>\n<p>I am in fact one of the main proponents of the new API, to the point of being annoying on this aspect :), but I do have code to prove my point:</p>\n<ul>\n<li>a <a href=\"https://github.com/fge/java7-fs-ftp\" rel=\"nofollow noreferrer\">filesystem over FTP</a>,</li>\n<li><a href=\"https://github.com/fge/java7-fs-dropbox\" rel=\"nofollow noreferrer\">another over dropbox</a>,</li>\n<li><a href=\"https://github.com/fge/java7-fs-box\" rel=\"nofollow noreferrer\">another over box.com</a>,</li>\n<li>a <a href=\"https://github.com/fge/java7-fs-base\" rel=\"nofollow noreferrer\">helper library to develop new filesystems</a>,</li>\n<li>and finally a <a href=\"https://github.com/fge/java7-fs-more\" rel=\"nofollow noreferrer\">helper library complementing the JDK's <code>Files</code></a> (and fixing a few bugs in the process).</li>\n</ul>\n<p>At this stage, it is a matter of patience; answering questions on SO using the new way, or even old questions etc. And it's an uphill battle.</p>\n"},{"tags":[],"owner":{"account_id":9052,"reputation":11722,"user_id":16549,"accept_rate":75,"display_name":"kervin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1433009762,"creation_date":1433009762,"answer_id":30549693,"question_id":30547589,"body_markdown":"It&#39;s not just legacy.  Newer APIs continue to use the **File** object over the **(** *Path* **+** *NIO.Files* **+** *Channel* **)** combination because it&#39;s a lot simpler API to understand.\r\n\r\nI am **not** advocating its use.  But just pointing out that the single old *File* Object API provides a single point for exposing the API that some developers seeking simplicity gravitate towards.\r\n\r\nIt is harder for many developers to grasp the difference between a *Path* and a *File*.  They are two different things, that&#39;s why we still have java.nio.file.**Files** right alongside java.nio.file.**Paths**.  A Path is like a URI, a locator, it doesn&#39;t have to point to anything.  While a File is a concrete representation of a File-System object.  \r\n\r\nNIO separates these concepts, while the old API held them all in a single object.  I don&#39;t think that&#39;s *necessarily* wrong per se.  It just traps a lot of useful Path related API in a *File* object, where that API is useful beyond these objects.\r\n\r\nSo I suspect the way forward might be **&quot;How much API do you need?&quot;** If you need the improved functionality of Channels, increased independence of Paths, etc. then NIO is definitely the way to go without option really.  \r\n\r\nIf you&#39;re a junior developer or a student who needs a quick and basic Object-oriented way for opening a File-System object and running a few standard FS API calls before closing, why not use a simpler **File** object?  Java isn&#39;t just for experts after all.","title":"Why isn&#39;t java.io.File deprecated?","body":"<p>It's not just legacy.  Newer APIs continue to use the <strong>File</strong> object over the <strong>(</strong> <em>Path</em> <strong>+</strong> <em>NIO.Files</em> <strong>+</strong> <em>Channel</em> <strong>)</strong> combination because it's a lot simpler API to understand.</p>\n\n<p>I am <strong>not</strong> advocating its use.  But just pointing out that the single old <em>File</em> Object API provides a single point for exposing the API that some developers seeking simplicity gravitate towards.</p>\n\n<p>It is harder for many developers to grasp the difference between a <em>Path</em> and a <em>File</em>.  They are two different things, that's why we still have java.nio.file.<strong>Files</strong> right alongside java.nio.file.<strong>Paths</strong>.  A Path is like a URI, a locator, it doesn't have to point to anything.  While a File is a concrete representation of a File-System object.  </p>\n\n<p>NIO separates these concepts, while the old API held them all in a single object.  I don't think that's <em>necessarily</em> wrong per se.  It just traps a lot of useful Path related API in a <em>File</em> object, where that API is useful beyond these objects.</p>\n\n<p>So I suspect the way forward might be <strong>\"How much API do you need?\"</strong> If you need the improved functionality of Channels, increased independence of Paths, etc. then NIO is definitely the way to go without option really.  </p>\n\n<p>If you're a junior developer or a student who needs a quick and basic Object-oriented way for opening a File-System object and running a few standard FS API calls before closing, why not use a simpler <strong>File</strong> object?  Java isn't just for experts after all.</p>\n"}],"owner":{"account_id":3205177,"reputation":4088,"user_id":2706344,"accept_rate":46,"display_name":"principal-ideal-domain"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3342,"favorite_count":0,"down_vote_count":2,"up_vote_count":7,"answer_count":3,"score":5,"last_activity_date":1683218104,"creation_date":1432997721,"question_id":30547589,"body_markdown":"Since Java 7 there the `java.nio.file` package. So why is `java.io.File`still not deprecated in Java 8?","title":"Why isn&#39;t java.io.File deprecated?","body":"<p>Since Java 7 there the <code>java.nio.file</code> package. So why is <code>java.io.File</code>still not deprecated in Java 8?</p>\n"},{"tags":["java","jpa","lazy-loading"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1682873678,"post_id":76142372,"comment_id":134280130,"body_markdown":"Try changing `JOIN FETCH` to `LEFT JOIN FETCH` and `findByIdWithMoves` to `findById_WithMoves`","body":"Try changing <code>JOIN FETCH</code> to <code>LEFT JOIN FETCH</code> and <code>findByIdWithMoves</code> to <code>findById_WithMoves</code>"},{"owner":{"account_id":19485923,"reputation":61,"user_id":14255305,"display_name":"rbrewster"},"score":0,"creation_date":1682874161,"post_id":76142372,"comment_id":134280189,"body_markdown":"@AndreyB.Panfilov Thanks! Changing it to LEFT JOIN FETCH solved my problem. I&#39;ll accept if you want to post this as the answer","body":"@AndreyB.Panfilov Thanks! Changing it to LEFT JOIN FETCH solved my problem. I&#39;ll accept if you want to post this as the answer"}],"answers":[{"tags":[],"owner":{"account_id":19485923,"reputation":61,"user_id":14255305,"display_name":"rbrewster"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683217509,"creation_date":1683129465,"answer_id":76165936,"question_id":76142372,"body_markdown":"The problem arose from the fact that ```List&lt;String&gt; Moves``` is empty for the initial database fetch. So even though moves had been initialized, there was nothing for ```Game``` to join to and the standard JOIN will not return items without the specified association.\r\n\r\nWhat I needed was a LEFT JOIN because they always returns all rows of the left side (```Game```) entity. \r\n\r\n```@Query(&quot;SELECT g FROM Game g LEFT JOIN FETCH g.moves WHERE g.id = :id&quot;)```\r\n\r\n","title":"Issue using @Query to fetch lazy loaded association in JPA","body":"<p>The problem arose from the fact that <code>List&lt;String&gt; Moves</code> is empty for the initial database fetch. So even though moves had been initialized, there was nothing for <code>Game</code> to join to and the standard JOIN will not return items without the specified association.</p>\n<p>What I needed was a LEFT JOIN because they always returns all rows of the left side (<code>Game</code>) entity.</p>\n<p><code>@Query(&quot;SELECT g FROM Game g LEFT JOIN FETCH g.moves WHERE g.id = :id&quot;)</code></p>\n"}],"owner":{"account_id":19485923,"reputation":61,"user_id":14255305,"display_name":"rbrewster"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76165936,"answer_count":1,"score":0,"last_activity_date":1683217509,"creation_date":1682872693,"question_id":76142372,"body_markdown":"So I have an entity **Game** which contains \r\n```\r\n    @ElementCollection\r\n    private List&lt;String&gt; moves;\r\n```\r\nI only require this field for one specific call so the default behavior of Lazy fetching is the best choice. I don&#39;t have much experience with lazy loading so I looked around and it seems like the two preferred choices for implementing lazy loading are @EntityGraph and @Query. I looked into both and while I don&#39;t have a great understanding for the best use cases for each, I decided to use @Query.\r\n\r\n```\r\npublic interface GameRepository extends CrudRepository&lt;Game, Long&gt; {\r\n    @Query(&quot;SELECT g FROM Game g JOIN FETCH g.moves WHERE g.id = :id&quot;)\r\n    Optional&lt;Game&gt; findByIdWithMoves(@Param(&quot;id&quot;) Long id);\r\n}\r\n```\r\n\r\nSeems simple and straight forward but this method does not find anything. The regular findById method returns the Game but my custom query does not find anything. I&#39;ve looked up other examples like this one https://stackoverflow.com/questions/15359306/how-to-fetch-fetchtype-lazy-associations-with-jpa-and-hibernate-in-a-spring-cont and made minor changes like changing ***long*** to ***Long*** and tried the query without the Optional container so that it fits exactly but its still not working and I&#39;m stuck.","title":"Issue using @Query to fetch lazy loaded association in JPA","body":"<p>So I have an entity <strong>Game</strong> which contains</p>\n<pre><code>    @ElementCollection\n    private List&lt;String&gt; moves;\n</code></pre>\n<p>I only require this field for one specific call so the default behavior of Lazy fetching is the best choice. I don't have much experience with lazy loading so I looked around and it seems like the two preferred choices for implementing lazy loading are @EntityGraph and @Query. I looked into both and while I don't have a great understanding for the best use cases for each, I decided to use @Query.</p>\n<pre><code>public interface GameRepository extends CrudRepository&lt;Game, Long&gt; {\n    @Query(&quot;SELECT g FROM Game g JOIN FETCH g.moves WHERE g.id = :id&quot;)\n    Optional&lt;Game&gt; findByIdWithMoves(@Param(&quot;id&quot;) Long id);\n}\n</code></pre>\n<p>Seems simple and straight forward but this method does not find anything. The regular findById method returns the Game but my custom query does not find anything. I've looked up other examples like this one <a href=\"https://stackoverflow.com/questions/15359306/how-to-fetch-fetchtype-lazy-associations-with-jpa-and-hibernate-in-a-spring-cont\">How to fetch FetchType.LAZY associations with JPA and Hibernate in a Spring Controller</a> and made minor changes like changing <em><strong>long</strong></em> to <em><strong>Long</strong></em> and tried the query without the Optional container so that it fits exactly but its still not working and I'm stuck.</p>\n"},{"tags":["java","spring","easypost"],"answers":[{"tags":[],"owner":{"account_id":19041612,"reputation":74,"user_id":13901580,"display_name":"Logan Simonsen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683217045,"creation_date":1683217045,"answer_id":76175307,"question_id":76039688,"body_markdown":"A `refund.successful` Event is created whenever a refund is successfully processed on the EasyPost backend. This can happen days or weeks after the refund is requested. USPS specifically takes up to 15-30 days to refund labels. Unfortunately I don&#39;t believe there is a way to mock this behavior in the `test` environment. \r\n\r\nhttps://www.easypost.com/docs/api#events\r\n&gt;Refund\r\nA &quot;refund.successful&quot; Event is created whenever a non-instantaneous Refund request is completed. USPS is the best example of this, as USPS postage takes 15+ days to be refunded after the initial refund creation.","title":"Easypost webhook refund event","body":"<p>A <code>refund.successful</code> Event is created whenever a refund is successfully processed on the EasyPost backend. This can happen days or weeks after the refund is requested. USPS specifically takes up to 15-30 days to refund labels. Unfortunately I don't believe there is a way to mock this behavior in the <code>test</code> environment.</p>\n<p><a href=\"https://www.easypost.com/docs/api#events\" rel=\"nofollow noreferrer\">https://www.easypost.com/docs/api#events</a></p>\n<blockquote>\n<p>Refund\nA &quot;refund.successful&quot; Event is created whenever a non-instantaneous Refund request is completed. USPS is the best example of this, as USPS postage takes 15+ days to be refunded after the initial refund creation.</p>\n</blockquote>\n"}],"owner":{"account_id":21023381,"reputation":23,"user_id":15449203,"display_name":"Johni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683217045,"creation_date":1681769710,"question_id":76039688,"body_markdown":"What webhook event should i listen to to know that the refund of a shipment label was accepted by the carrier?\r\n\r\nHere&#39;s how I do it now, but unfortunately when I run the easypost webhook locally, it does not emit the event even though a refund is submitted. I never get &#39;return_update&quot; in statusDetail. Here&#39;s my code:\r\n\r\n    if (statusDetail.equals(&quot;status_update&quot;) || statusDetail.equals(&quot;out_for_delivery&quot;) || statusDetail.equals(&quot;arrived_at_destination&quot;)) {\r\n        String easypostShipmentId = (String) result.get(&quot;shipmentId&quot;);\r\n    \r\n        Shipment userShipment = shipmentService.retrieveShipmentFromEasypostId(easypostShipmentId);\r\n    \r\n        if (statusDetail.equals(&quot;arrived_at_destination&quot;)) {\r\n            userShipment.setEasypostStatus(EasypostShipmentStatus.DELIVERED);\r\n            userShipment.setStatus(ShipmentStatus.DELIVERED);\r\n            userShipment.setDeliveryDate(Instant.now());\r\n        } else {\r\n            String shipmentStatus = (String) result.get(&quot;status&quot;);\r\n            userShipment.setEasypostStatus(EasypostShipmentStatus.valueOf(shipmentStatus.toUpperCase()));\r\n            Long estDeliveryDateMillis = (Long) result.get(&quot;estDeliveryDate&quot;);\r\n            userShipment.setDeliveryDate(Instant.ofEpochMilli(estDeliveryDateMillis));\r\n        }\r\n    \r\n        shipmentService.updateShipment(userShipment);\r\n        activityLoggerService.insert(userShipment.getUser(), userShipment, activityLoggerService.getShipmentStatusChangeMessage(userShipment), ActivityMessageType.STATUS_UPDATE);\r\n    } else if (statusDetail.equals(&quot;return_update&quot;)) {\r\n        String easypostShipmentId = (String) result.get(&quot;shipmentId&quot;);\r\n        Shipment userShipment = shipmentService.retrieveShipmentFromEasypostId(easypostShipmentId);\r\n        String shipmentStatus = (String) result.get(&quot;status&quot;);\r\n    \r\n        String chargeId = userShipment.getStripeChargeId();\r\n        try {\r\n            // Refund successful\r\n            Refund refund = stripeService.refund(chargeId);\r\n            userShipment.setStripeRefundId(refund.getId());\r\n            userShipment.setStatus(ShipmentStatus.REFUND_PROCESSED);\r\n            userShipment.setEasypostStatus(EasypostShipmentStatus.valueOf(shipmentStatus.toUpperCase()));\r\n    \r\n            shipmentService.updateShipment(userShipment);\r\n            double refundAmount = stripeService.getRefundAmount(refund);\r\n            activityLoggerService.insert(userShipment.getUser(), userShipment, activityLoggerService.getShipmentReturnProcessed(userShipment, refundAmount), ActivityMessageType.RETURN_PROCESSED);\r\n        } catch (StripeException e) {\r\n            System.err.println(&quot;Error issuing refund: &quot; + e.getMessage());\r\n        }\r\n    }","title":"Easypost webhook refund event","body":"<p>What webhook event should i listen to to know that the refund of a shipment label was accepted by the carrier?</p>\n<p>Here's how I do it now, but unfortunately when I run the easypost webhook locally, it does not emit the event even though a refund is submitted. I never get 'return_update&quot; in statusDetail. Here's my code:</p>\n<pre><code>if (statusDetail.equals(&quot;status_update&quot;) || statusDetail.equals(&quot;out_for_delivery&quot;) || statusDetail.equals(&quot;arrived_at_destination&quot;)) {\n    String easypostShipmentId = (String) result.get(&quot;shipmentId&quot;);\n\n    Shipment userShipment = shipmentService.retrieveShipmentFromEasypostId(easypostShipmentId);\n\n    if (statusDetail.equals(&quot;arrived_at_destination&quot;)) {\n        userShipment.setEasypostStatus(EasypostShipmentStatus.DELIVERED);\n        userShipment.setStatus(ShipmentStatus.DELIVERED);\n        userShipment.setDeliveryDate(Instant.now());\n    } else {\n        String shipmentStatus = (String) result.get(&quot;status&quot;);\n        userShipment.setEasypostStatus(EasypostShipmentStatus.valueOf(shipmentStatus.toUpperCase()));\n        Long estDeliveryDateMillis = (Long) result.get(&quot;estDeliveryDate&quot;);\n        userShipment.setDeliveryDate(Instant.ofEpochMilli(estDeliveryDateMillis));\n    }\n\n    shipmentService.updateShipment(userShipment);\n    activityLoggerService.insert(userShipment.getUser(), userShipment, activityLoggerService.getShipmentStatusChangeMessage(userShipment), ActivityMessageType.STATUS_UPDATE);\n} else if (statusDetail.equals(&quot;return_update&quot;)) {\n    String easypostShipmentId = (String) result.get(&quot;shipmentId&quot;);\n    Shipment userShipment = shipmentService.retrieveShipmentFromEasypostId(easypostShipmentId);\n    String shipmentStatus = (String) result.get(&quot;status&quot;);\n\n    String chargeId = userShipment.getStripeChargeId();\n    try {\n        // Refund successful\n        Refund refund = stripeService.refund(chargeId);\n        userShipment.setStripeRefundId(refund.getId());\n        userShipment.setStatus(ShipmentStatus.REFUND_PROCESSED);\n        userShipment.setEasypostStatus(EasypostShipmentStatus.valueOf(shipmentStatus.toUpperCase()));\n\n        shipmentService.updateShipment(userShipment);\n        double refundAmount = stripeService.getRefundAmount(refund);\n        activityLoggerService.insert(userShipment.getUser(), userShipment, activityLoggerService.getShipmentReturnProcessed(userShipment, refundAmount), ActivityMessageType.RETURN_PROCESSED);\n    } catch (StripeException e) {\n        System.err.println(&quot;Error issuing refund: &quot; + e.getMessage());\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","tensorflow","ocr"],"owner":{"account_id":404833,"reputation":1416,"user_id":773371,"accept_rate":82,"display_name":"gcdev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683216964,"creation_date":1683208581,"question_id":76174004,"body_markdown":"I&#39;m working on a Java Android project that needs to OCR bitmaps with `width=1887` and `height=1061`.\r\n\r\nI&#39;ve managed to do this successfully with both [MLKit][1] and also [TessTwo][2].\r\n\r\nI&#39;d like to do the same thing with [TensorFlow][3].\r\n\r\nI&#39;ve downloaded the [recommended git repo][4] with its Kotlin code. Kotlin is not my language though, so I&#39;m struggling to figure things out in it. But I was able to get that sample running and working fine via Android Studio on my Android device.\r\n\r\nThen, once I knew the sample worked, in my own project, I imported the following files:\r\n\r\n - ImageUtils.kt\r\n - ModelExecutionResult.kt\r\n - OCRModelExecutor.kt\r\n - text_detection.tflite\r\n - text_recognition.tflite\r\n\r\nI then wrote the following Java code and was able to get the process working successfully in my own app.\r\n\r\n    public static void ocrViaTensorFlow(Bitmap myBmp, Context context)\r\n    {\r\n        try\r\n        {\r\n            OCRModelExecutor tfOcrExe = null;\r\n            try\r\n            {\r\n                Lock lock = new ReentrantLock();\r\n                lock.lock();\r\n                try {\r\n                    if (tfOcrExe != null) {\r\n                        tfOcrExe.close();\r\n                        tfOcrExe = null;\r\n                    }\r\n                    try {\r\n                        tfOcrExe = new OCRModelExecutor(context, false);\r\n                    } catch (Exception e) {\r\n                        Log.e(&quot;ocrViaTensorFlow-ERR-00&quot;, e.getMessage(), e);\r\n                    }\r\n                } finally {\r\n                    lock.unlock();\r\n                }\r\n    \r\n                lock.lock();\r\n                try {\r\n                    if (tfOcrExe != null) {\r\n                        try {\r\n                            Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;About to do TensorFlow OCR...&quot;);\r\n                            ModelExecutionResult tfResult = tfOcrExe.execute(myBmp);\r\n                            Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;Items: &quot; + tfResult.getItemsFound());\r\n                            Map&lt;String, Integer&gt; itms = tfResult.getItemsFound();\r\n                            StringBuilder output = new StringBuilder();\r\n                            for (Map.Entry&lt;String, Integer&gt; itm : itms.entrySet())\r\n                            {\r\n                                String wrd = itm.getKey();\r\n                                Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;Item: &quot; + itm.getKey());\r\n                                output.append(&quot; &quot;).append(wrd);\r\n                            }\r\n                            Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;TensorFlow Text: &quot; + output.toString().trim());\r\n                        } catch (Exception e) {\r\n                            Log.e(&quot;ocrViaTensorFlow-ERR-01&quot;, e.getMessage(), e);\r\n                        }\r\n                    }\r\n                } finally {\r\n                    lock.unlock();\r\n                }\r\n            }\r\n            catch (Exception ex)\r\n            {\r\n                Log.e(&quot;ocrViaTensorFlow-ERR-02&quot;, ex.getMessage(), ex);\r\n            }\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            Log.e(&quot;ocrViaTensorFlow-ERR-03&quot;, ex.getMessage(), ex);\r\n        }\r\n        myBmp.recycle();\r\n    }\r\n\r\nHowever, the results were terribly subpar (words run together, missing words and letters, confusing order) and very, very, very slow (30-40 seconds).\r\n\r\nHere is an example of an image being passed in to the process:\r\n\r\n[![Initial bitmap][5]][5]\r\n\r\nObviously, the text I would like get from this is something like the following:\r\n\r\n**Try &quot;Alexa, play the trailer&quot; Top Gun: Maverick (91512) IMDb 8.3/10 2 hr 13 min 2022 PG-13 X-Ray CC After thirty years, Maverick (Tom Cruise) is still pushing the envelope as a top naval aviator, but must confront ghosts of his past wen he leads TOP GUN&#39;s elite graduates on a mission that demands the ultimate sacrifice from ... Starring: Tom Cruise, Val Kilmer, Miles Teller Director: Joseph Kosinski Audio: Spanish, Japanese, Tamil, French, Portuguese, Kannada, Malayalam, German, Hindi, Polish, Italia... Resume Watch from Watch Add to More Ways Beginning Trailer Watchlist to Watch 1 hour 45 minutes remaining JOSEPH KOSINSKI AS DIRECTOR TOM CRUISE TOP GUN MAVERICK**\r\n\r\nInstead, I get this image back:\r\n\r\n[![enter image description here][6]][6]\r\n\r\nAnd the OCR text results are as follows:\r\n\r\n**resume beginning krk yalexaplaythetrailer erthirtyyears 2hrizmin2o22 tomcruisevalkilme josephkosinski 1915127 gune too watch elitegraduates edirector watchlist maverick**\r\n\r\nI suspect these problems are at least partly because the Kotlin code from the Git repo appears to resize my bitmap from 1887x1061 to 200x31 for text recognition, and elsewhere appears to resize it to 320x320 for text detection.\r\n\r\nI&#39;m still struggling to understand the Kotlin code and what it does, but I tried changing those resizing variables to match the proportions of my images and got the following error:\r\n\r\n    Cannot copy to a TensorFlowLite tensor (input_images) with 1228800 bytes from a Java Buffer with 5334000 bytes.\r\n\r\nI&#39;m frankly surprised at how much more difficult this has been to implement than TessTwo or MLKit. Is there an easy way to adjust the `detectionImageHeight` and `detectionImageWidth` constants from the Git code without breaking the process? Is there an easy way to adjust `recognitionImageHeight` and `recognitionImageWidth` without breaking the process?\r\n\r\nOr is there a better sample (preferably of Java code) that&#39;s more easily customizable out there somewhere?\r\n\r\nOr, more directly, how can I get better TensorFlow OCR results for my bitmaps and also speed up the process?\r\n\r\nIn answer, I would really appreciate code samples, or links to code samples. Thanks!\r\n\r\n\r\n  [1]: https://developers.google.com/ml-kit/vision/text-recognition/v2/android\r\n  [2]: https://github.com/rmtheis/tess-two\r\n  [3]: https://www.tensorflow.org/lite/examples/optical_character_recognition/overview\r\n  [4]: https://github.com/tensorflow/examples/tree/master/lite/examples/optical_character_recognition/android\r\n  [5]: https://i.stack.imgur.com/HtdXv.png\r\n  [6]: https://i.stack.imgur.com/EmjR5.png","title":"How to use larger images in TensorFlow OCR in Android?","body":"<p>I'm working on a Java Android project that needs to OCR bitmaps with <code>width=1887</code> and <code>height=1061</code>.</p>\n<p>I've managed to do this successfully with both <a href=\"https://developers.google.com/ml-kit/vision/text-recognition/v2/android\" rel=\"nofollow noreferrer\">MLKit</a> and also <a href=\"https://github.com/rmtheis/tess-two\" rel=\"nofollow noreferrer\">TessTwo</a>.</p>\n<p>I'd like to do the same thing with <a href=\"https://www.tensorflow.org/lite/examples/optical_character_recognition/overview\" rel=\"nofollow noreferrer\">TensorFlow</a>.</p>\n<p>I've downloaded the <a href=\"https://github.com/tensorflow/examples/tree/master/lite/examples/optical_character_recognition/android\" rel=\"nofollow noreferrer\">recommended git repo</a> with its Kotlin code. Kotlin is not my language though, so I'm struggling to figure things out in it. But I was able to get that sample running and working fine via Android Studio on my Android device.</p>\n<p>Then, once I knew the sample worked, in my own project, I imported the following files:</p>\n<ul>\n<li>ImageUtils.kt</li>\n<li>ModelExecutionResult.kt</li>\n<li>OCRModelExecutor.kt</li>\n<li>text_detection.tflite</li>\n<li>text_recognition.tflite</li>\n</ul>\n<p>I then wrote the following Java code and was able to get the process working successfully in my own app.</p>\n<pre><code>public static void ocrViaTensorFlow(Bitmap myBmp, Context context)\n{\n    try\n    {\n        OCRModelExecutor tfOcrExe = null;\n        try\n        {\n            Lock lock = new ReentrantLock();\n            lock.lock();\n            try {\n                if (tfOcrExe != null) {\n                    tfOcrExe.close();\n                    tfOcrExe = null;\n                }\n                try {\n                    tfOcrExe = new OCRModelExecutor(context, false);\n                } catch (Exception e) {\n                    Log.e(&quot;ocrViaTensorFlow-ERR-00&quot;, e.getMessage(), e);\n                }\n            } finally {\n                lock.unlock();\n            }\n\n            lock.lock();\n            try {\n                if (tfOcrExe != null) {\n                    try {\n                        Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;About to do TensorFlow OCR...&quot;);\n                        ModelExecutionResult tfResult = tfOcrExe.execute(myBmp);\n                        Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;Items: &quot; + tfResult.getItemsFound());\n                        Map&lt;String, Integer&gt; itms = tfResult.getItemsFound();\n                        StringBuilder output = new StringBuilder();\n                        for (Map.Entry&lt;String, Integer&gt; itm : itms.entrySet())\n                        {\n                            String wrd = itm.getKey();\n                            Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;Item: &quot; + itm.getKey());\n                            output.append(&quot; &quot;).append(wrd);\n                        }\n                        Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;TensorFlow Text: &quot; + output.toString().trim());\n                    } catch (Exception e) {\n                        Log.e(&quot;ocrViaTensorFlow-ERR-01&quot;, e.getMessage(), e);\n                    }\n                }\n            } finally {\n                lock.unlock();\n            }\n        }\n        catch (Exception ex)\n        {\n            Log.e(&quot;ocrViaTensorFlow-ERR-02&quot;, ex.getMessage(), ex);\n        }\n    }\n    catch (Exception ex)\n    {\n        Log.e(&quot;ocrViaTensorFlow-ERR-03&quot;, ex.getMessage(), ex);\n    }\n    myBmp.recycle();\n}\n</code></pre>\n<p>However, the results were terribly subpar (words run together, missing words and letters, confusing order) and very, very, very slow (30-40 seconds).</p>\n<p>Here is an example of an image being passed in to the process:</p>\n<p><a href=\"https://i.stack.imgur.com/HtdXv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HtdXv.png\" alt=\"Initial bitmap\" /></a></p>\n<p>Obviously, the text I would like get from this is something like the following:</p>\n<p><strong>Try &quot;Alexa, play the trailer&quot; Top Gun: Maverick (91512) IMDb 8.3/10 2 hr 13 min 2022 PG-13 X-Ray CC After thirty years, Maverick (Tom Cruise) is still pushing the envelope as a top naval aviator, but must confront ghosts of his past wen he leads TOP GUN's elite graduates on a mission that demands the ultimate sacrifice from ... Starring: Tom Cruise, Val Kilmer, Miles Teller Director: Joseph Kosinski Audio: Spanish, Japanese, Tamil, French, Portuguese, Kannada, Malayalam, German, Hindi, Polish, Italia... Resume Watch from Watch Add to More Ways Beginning Trailer Watchlist to Watch 1 hour 45 minutes remaining JOSEPH KOSINSKI AS DIRECTOR TOM CRUISE TOP GUN MAVERICK</strong></p>\n<p>Instead, I get this image back:</p>\n<p><a href=\"https://i.stack.imgur.com/EmjR5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EmjR5.png\" alt=\"enter image description here\" /></a></p>\n<p>And the OCR text results are as follows:</p>\n<p><strong>resume beginning krk yalexaplaythetrailer erthirtyyears 2hrizmin2o22 tomcruisevalkilme josephkosinski 1915127 gune too watch elitegraduates edirector watchlist maverick</strong></p>\n<p>I suspect these problems are at least partly because the Kotlin code from the Git repo appears to resize my bitmap from 1887x1061 to 200x31 for text recognition, and elsewhere appears to resize it to 320x320 for text detection.</p>\n<p>I'm still struggling to understand the Kotlin code and what it does, but I tried changing those resizing variables to match the proportions of my images and got the following error:</p>\n<pre><code>Cannot copy to a TensorFlowLite tensor (input_images) with 1228800 bytes from a Java Buffer with 5334000 bytes.\n</code></pre>\n<p>I'm frankly surprised at how much more difficult this has been to implement than TessTwo or MLKit. Is there an easy way to adjust the <code>detectionImageHeight</code> and <code>detectionImageWidth</code> constants from the Git code without breaking the process? Is there an easy way to adjust <code>recognitionImageHeight</code> and <code>recognitionImageWidth</code> without breaking the process?</p>\n<p>Or is there a better sample (preferably of Java code) that's more easily customizable out there somewhere?</p>\n<p>Or, more directly, how can I get better TensorFlow OCR results for my bitmaps and also speed up the process?</p>\n<p>In answer, I would really appreciate code samples, or links to code samples. Thanks!</p>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1683167552,"post_id":76168896,"comment_id":134326141,"body_markdown":"I am afraid your research is correct. Mockito can&#39;t mock private field or method. without refactoring or using powermockito you could try to use old fashioned java java reflection to setup a test case.","body":"I am afraid your research is correct. Mockito can&#39;t mock private field or method. without refactoring or using powermockito you could try to use old fashioned java java reflection to setup a test case."},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":3,"creation_date":1683180720,"post_id":76168896,"comment_id":134327465,"body_markdown":"Why &quot;is it not possible&quot; to pass in the values? The code as presented is not testable and its design needs to be changed, to account for testability. https://stackoverflow.com/q/74027324/112968 more or less describes the same problem and suggests several possible solutions.","body":"Why &quot;is it not possible&quot; to pass in the values? The code as presented is not testable and its design needs to be changed, to account for testability. <a href=\"https://stackoverflow.com/q/74027324/112968\">stackoverflow.com/q/74027324/112968</a> more or less describes the same problem and suggests several possible solutions."}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683205150,"creation_date":1683205150,"answer_id":76173491,"question_id":76168896,"body_markdown":"You&#39;ll need to make `MyClass` a wrapper class, and not test it, which is OK because it will be trivial:\r\n```\r\nclass MyClass {\r\n  private final MyTestableClass myTestableClass;\r\n\r\n  public MyClass() {\r\n    myTestableClass = new MyTestableClass(setupClient());\r\n  }\r\n\r\n  public void methodIWantToTest() {\r\n    myTestableClass.methodIWantToTest();\r\n  }\r\n}\r\n```\r\nThen you can write a unit test for `MyTestableClass`, passing a mock `Client` to it&#39;s constructor.\r\n\r\n(of course `setupClient()` is not trivial, but that wasn&#39;t being tested in your original test anyway.)","title":"Mocking behavior without passing in mock objects Mockito","body":"<p>You'll need to make <code>MyClass</code> a wrapper class, and not test it, which is OK because it will be trivial:</p>\n<pre><code>class MyClass {\n  private final MyTestableClass myTestableClass;\n\n  public MyClass() {\n    myTestableClass = new MyTestableClass(setupClient());\n  }\n\n  public void methodIWantToTest() {\n    myTestableClass.methodIWantToTest();\n  }\n}\n</code></pre>\n<p>Then you can write a unit test for <code>MyTestableClass</code>, passing a mock <code>Client</code> to it's constructor.</p>\n<p>(of course <code>setupClient()</code> is not trivial, but that wasn't being tested in your original test anyway.)</p>\n"},{"tags":[],"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683216910,"creation_date":1683216910,"answer_id":76175288,"question_id":76168896,"body_markdown":"\r\nConfiguring your dependency within the dependent class can be problematic.  Depending on the complexity of your system you may want to explore dependency injection.  Ignoring that..\r\n\r\nProvide an alternate constructor that includes the dependency(ies) as a parameter.\r\n\r\n    public class MyClass {\r\n      private Client someClient;\r\n\r\n      public MyClass() {\r\n        this(setupClient());\r\n      }\r\n      protected MyClass(Client client) {\r\n        this.someClient = client;\r\n      }\r\n\r\n      private Client setupClient() {...}\r\n\r\n      public methodIWantToTest() {\r\n        this.someClient.makeApiCall(String requestString);\r\n        // do stuff\r\n      }\r\n      ...\r\n    }\r\n\r\nDefine the mock in your test and pass it as an argument to the constructor.\r\n\r\n    public class MyClassTest {\r\n      private MyClass SUT;\r\n      // Dependencies\r\n      private Client client = Mockito.mock(Client.class);\r\n\r\n      @Before\r\n      public void beforeTest() {\r\n        SUT = new MyClass(client);\r\n      }\r\n\r\n      @Test\r\n      public void testMethodIWantToTest() {\r\n        Mockito.when(client.makeApiCall(Mockito.anyString())).thenDoSomething();\r\n        .. test stuff\r\n      }\r\n    }\r\n","title":"Mocking behavior without passing in mock objects Mockito","body":"<p>Configuring your dependency within the dependent class can be problematic.  Depending on the complexity of your system you may want to explore dependency injection.  Ignoring that..</p>\n<p>Provide an alternate constructor that includes the dependency(ies) as a parameter.</p>\n<pre><code>public class MyClass {\n  private Client someClient;\n\n  public MyClass() {\n    this(setupClient());\n  }\n  protected MyClass(Client client) {\n    this.someClient = client;\n  }\n\n  private Client setupClient() {...}\n\n  public methodIWantToTest() {\n    this.someClient.makeApiCall(String requestString);\n    // do stuff\n  }\n  ...\n}\n</code></pre>\n<p>Define the mock in your test and pass it as an argument to the constructor.</p>\n<pre><code>public class MyClassTest {\n  private MyClass SUT;\n  // Dependencies\n  private Client client = Mockito.mock(Client.class);\n\n  @Before\n  public void beforeTest() {\n    SUT = new MyClass(client);\n  }\n\n  @Test\n  public void testMethodIWantToTest() {\n    Mockito.when(client.makeApiCall(Mockito.anyString())).thenDoSomething();\n    .. test stuff\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2996819,"reputation":2582,"user_id":2543209,"accept_rate":59,"display_name":"Jeremy Fisher"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76175288,"answer_count":2,"score":-1,"last_activity_date":1683216910,"creation_date":1683162181,"question_id":76168896,"body_markdown":"I have a java class and methods that I want to test with Mockito. These classes in their constructors or in other methods will construct objects and then use those objects in other methods. \r\n\r\nI want to mock the behavior of those objects being used. The important thing is that none of these objects are being passed into the class. Rather, they are generated within the class itself. For example lets pretend this is a class I have:\r\n\r\n```\r\nprivate Client someClient;\r\n\r\npublic MyClass() {\r\n    this.someClient = setupClient();\r\n}\r\n\r\nprivate setupClient() {...}\r\n\r\npublic methodIWantToTest() {\r\n    this.someClient.makeApiCall(String requestString);\r\n    // do stuff\r\n}\r\n```\r\n\r\nIn my test class and tests I want to be able to do something like:\r\n\r\n```\r\n// test class\r\n...\r\nMyClass classImGoingToTest; \r\n\r\n@Test\r\npublic void testMethodIWantToTest() {\r\n    Mockito.when(Client.class).makeApiCall(Mockito.anyString()).thenDoSomething();\r\n    ...\r\n}\r\n```\r\n\r\nOf course Mockito needs to make frustratingly difficult to do basic things. So how can this be done in Mockito?\r\n\r\nOther answers I read are either of the form &quot;use powermockito&quot; which i want to avoid right now, or &quot;you shouldn&#39;t be testing this&quot; which isn&#39;t an answer to my question, or they say &quot;well you should pass in the values&quot;, which as I explained above is not possible. ","title":"Mocking behavior without passing in mock objects Mockito","body":"<p>I have a java class and methods that I want to test with Mockito. These classes in their constructors or in other methods will construct objects and then use those objects in other methods.</p>\n<p>I want to mock the behavior of those objects being used. The important thing is that none of these objects are being passed into the class. Rather, they are generated within the class itself. For example lets pretend this is a class I have:</p>\n<pre><code>private Client someClient;\n\npublic MyClass() {\n    this.someClient = setupClient();\n}\n\nprivate setupClient() {...}\n\npublic methodIWantToTest() {\n    this.someClient.makeApiCall(String requestString);\n    // do stuff\n}\n</code></pre>\n<p>In my test class and tests I want to be able to do something like:</p>\n<pre><code>// test class\n...\nMyClass classImGoingToTest; \n\n@Test\npublic void testMethodIWantToTest() {\n    Mockito.when(Client.class).makeApiCall(Mockito.anyString()).thenDoSomething();\n    ...\n}\n</code></pre>\n<p>Of course Mockito needs to make frustratingly difficult to do basic things. So how can this be done in Mockito?</p>\n<p>Other answers I read are either of the form &quot;use powermockito&quot; which i want to avoid right now, or &quot;you shouldn't be testing this&quot; which isn't an answer to my question, or they say &quot;well you should pass in the values&quot;, which as I explained above is not possible.</p>\n"},{"tags":["java","selenium-webdriver"],"owner":{"account_id":7300508,"reputation":13,"user_id":5563467,"display_name":"Nomula Lenin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683216613,"creation_date":1683216613,"question_id":76175241,"body_markdown":"this is the basetest class am using to invoke the webdriver and driving to another class called landing page. Am trying different classes instead of one, when i debug this code it says illeagal invocation while am sending the driver argument right, at every driver invocation i was able to see the driver instance i have attached the pictures as well, i could use a static keyword and initialize but i want to know why this method is not working.\r\n\r\n      public class BaseTest {\r\n\t\r\n\t WebDriver driver;\r\n\t\r\n\tpublic  WebDriver InitDriver() throws IOException {\r\n\t\t\r\n\t\tProperties props = new Properties();\r\n\t\t\r\n\t\tFileInputStream fis = new FileInputStream(&quot;//filepath&quot;);\r\n\t\tprops.load(fis);\r\n\t\t\r\n\t\tString browserName = props.getProperty(&quot;BROWSER&quot;);\r\n\t\t\r\n\t\tif(browserName.equalsIgnoreCase(&quot;chrome&quot;)) {\r\n\t\t\tWebDriverManager.chromedriver().setup();\r\n\t\t\tdriver = new ChromeDriver();\r\n\t\t}else if(browserName.equalsIgnoreCase(&quot;firefox&quot;)) {\r\n\t\t\tWebDriverManager.firefoxdriver().setup();\r\n\t\t\tdriver= new FirefoxDriver();\r\n\t\t}\r\n\t\t\r\n\t\tdriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\r\n\t\t\r\n\t\t\r\n\t\treturn driver;\r\n\t}\r\n\t\r\n\t\r\n\tpublic  LandingPage launchApplication() throws IOException {\r\n\t\tdriver = InitDriver();\r\n\t\tLandingPage lp = new LandingPage(driver);\r\n\t\tlp.goTo();\r\n\t\t\r\n\t\treturn lp;\r\n\t\t\r\n\t}\r\n\r\n     }\r\n\r\n\r\n     //this is my landing page\r\n      public class LandingPage extends AbstractComponent{\r\n \r\n\r\n      public String email = &quot;----&quot;;\r\n      public String password = &quot;-----&quot;;\r\n      WebDriver driver;\r\n\r\n\r\n     @FindBy(css=&quot;#userEmail&quot;)\r\n     WebElement UserEmail;\r\n\r\n\r\n     @FindBy(css=&quot;#userPassword&quot;)\r\n     WebElement UserPassword;\r\n\r\n     @FindBy(id=&quot;login&quot;)\r\n     WebElement Login;\r\n\r\n\r\n\r\n      public LandingPage(WebDriver driver) {\r\n\tsuper(driver);\r\n\tthis.driver = driver;\r\n     }\r\n\r\n\r\n      public void goTo() {\r\n\tdriver.get(&quot;https://rahulshettyacademy.com/client&quot;);\r\n     }\r\n\r\n\t\r\n\tpublic void loginApplication() {\r\n\t\t\r\n\t\t\r\n\t\tUserEmail.sendKeys(email);\r\n\t\tUserPassword.sendKeys(password);\r\n\t\tLogin.click();\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n       }\r\n\r\n      //this is an another class where i have some resuable components\r\n       public class AbstractComponent {\r\n\tpublic WebDriver driver;\r\n\r\n\tpublic AbstractComponent(WebDriver driver) {\r\n\r\n/* this is where i get illegal invocation error while debugging, code doesn&#39;t enter into this constructor */\r\n\t\tthis.driver = driver;\r\n\t}\r\n\t\r\n\r\n\t// By productsBy = By.cssSelector(&quot;.mb-3&quot;);\r\n\r\n\tWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\r\n\r\n\t\r\n\r\n\tpublic void waitForElementToApper(By findBy) {\r\n\r\n\t\twait.until(ExpectedConditions.visibilityOfElementLocated(findBy));\r\n\r\n\t}\r\n\r\n\tpublic void waitForElementToInvisible(By findBy) {\r\n\r\n\t\twait.until(ExpectedConditions.invisibilityOfElementLocated(findBy));\r\n\r\n\t}\r\n\r\n        }\r\n\r\n\r\n\r\n     Am trying to invoke the inherited class constructor with super keyword in the child class and am     also passing the right arguments. I tried to debug to see if the argument passed is right.\r\n\r\n[![driver as an argument for landing page object](https://i.stack.imgur.com/11MX1.png)](https://i.stack.imgur.com/11MX1.png)\r\n\r\n[![driver in the landing page class super keyword](https://i.stack.imgur.com/lzaFm.png)](https://i.stack.imgur.com/lzaFm.png)\r\n\r\n[![driver in the parentclass component](https://i.stack.imgur.com/CdLtL.png)](https://i.stack.imgur.com/CdLtL.png)\r\n\r\n\r\n\r\n","title":"coudn&#39;t assign the driver value to an local variable using the constructor, it says illegal invocation","body":"<p>this is the basetest class am using to invoke the webdriver and driving to another class called landing page. Am trying different classes instead of one, when i debug this code it says illeagal invocation while am sending the driver argument right, at every driver invocation i was able to see the driver instance i have attached the pictures as well, i could use a static keyword and initialize but i want to know why this method is not working.</p>\n<pre><code>  public class BaseTest {\n\n WebDriver driver;\n\npublic  WebDriver InitDriver() throws IOException {\n    \n    Properties props = new Properties();\n    \n    FileInputStream fis = new FileInputStream(&quot;//filepath&quot;);\n    props.load(fis);\n    \n    String browserName = props.getProperty(&quot;BROWSER&quot;);\n    \n    if(browserName.equalsIgnoreCase(&quot;chrome&quot;)) {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n    }else if(browserName.equalsIgnoreCase(&quot;firefox&quot;)) {\n        WebDriverManager.firefoxdriver().setup();\n        driver= new FirefoxDriver();\n    }\n    \n    driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n    \n    \n    return driver;\n}\n\n\npublic  LandingPage launchApplication() throws IOException {\n    driver = InitDriver();\n    LandingPage lp = new LandingPage(driver);\n    lp.goTo();\n    \n    return lp;\n    \n}\n\n }\n\n\n //this is my landing page\n  public class LandingPage extends AbstractComponent{\n\n\n  public String email = &quot;----&quot;;\n  public String password = &quot;-----&quot;;\n  WebDriver driver;\n\n\n @FindBy(css=&quot;#userEmail&quot;)\n WebElement UserEmail;\n\n\n @FindBy(css=&quot;#userPassword&quot;)\n WebElement UserPassword;\n\n @FindBy(id=&quot;login&quot;)\n WebElement Login;\n\n\n\n  public LandingPage(WebDriver driver) {\nsuper(driver);\nthis.driver = driver;\n }\n\n\n  public void goTo() {\ndriver.get(&quot;https://rahulshettyacademy.com/client&quot;);\n }\n\n\npublic void loginApplication() {\n    \n    \n    UserEmail.sendKeys(email);\n    UserPassword.sendKeys(password);\n    Login.click();\n    \n    \n}\n\n   }\n\n  //this is an another class where i have some resuable components\n   public class AbstractComponent {\npublic WebDriver driver;\n\npublic AbstractComponent(WebDriver driver) {\n</code></pre>\n<p>/* this is where i get illegal invocation error while debugging, code doesn't enter into this constructor */\nthis.driver = driver;\n}</p>\n<pre><code>// By productsBy = By.cssSelector(&quot;.mb-3&quot;);\n\nWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\n\n\n\npublic void waitForElementToApper(By findBy) {\n\n    wait.until(ExpectedConditions.visibilityOfElementLocated(findBy));\n\n}\n\npublic void waitForElementToInvisible(By findBy) {\n\n    wait.until(ExpectedConditions.invisibilityOfElementLocated(findBy));\n\n}\n\n    }\n\n\n\n Am trying to invoke the inherited class constructor with super keyword in the child class and am     also passing the right arguments. I tried to debug to see if the argument passed is right.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/11MX1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/11MX1.png\" alt=\"driver as an argument for landing page object\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/lzaFm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lzaFm.png\" alt=\"driver in the landing page class super keyword\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/CdLtL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CdLtL.png\" alt=\"driver in the parentclass component\" /></a></p>\n"},{"tags":["java","sql","hibernate","jsqlparser"],"comments":[{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1683215853,"post_id":76174965,"comment_id":134336005,"body_markdown":"can you add a semicolon before the select?","body":"can you add a semicolon before the select?"},{"owner":{"account_id":4910838,"reputation":357,"user_id":3956189,"accept_rate":30,"display_name":"Gilles"},"score":0,"creation_date":1683216000,"post_id":76174965,"comment_id":134336034,"body_markdown":"Unfortunately not, this code is automatically generated by hibernate","body":"Unfortunately not, this code is automatically generated by hibernate"},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1683216049,"post_id":76174965,"comment_id":134336046,"body_markdown":"please show the code you have already","body":"please show the code you have already"},{"owner":{"account_id":4910838,"reputation":357,"user_id":3956189,"accept_rate":30,"display_name":"Gilles"},"score":0,"creation_date":1683216692,"post_id":76174965,"comment_id":134336204,"body_markdown":"Thank you. I have added the code in my description. At the moment I am only test if it starts by insert.  I could split the statement in two. But I have to be carefull on how I discriminate the select. Because it should work if the select was included in the &quot;values&quot;: insert into MYTABLE(LOG_ACTION, LOG_APPLICATION, LOG_CATEGORY) values (?, select aValue from aTable, ?). If I split in two and parse only the insert that should be ok. But before doing it I&#39;d like to know if there is no other way to achieve it","body":"Thank you. I have added the code in my description. At the moment I am only test if it starts by insert.  I could split the statement in two. But I have to be carefull on how I discriminate the select. Because it should work if the select was included in the &quot;values&quot;: insert into MYTABLE(LOG_ACTION, LOG_APPLICATION, LOG_CATEGORY) values (?, select aValue from aTable, ?). If I split in two and parse only the insert that should be ok. But before doing it I&#39;d like to know if there is no other way to achieve it"}],"owner":{"account_id":4910838,"reputation":357,"user_id":3956189,"accept_rate":30,"display_name":"Gilles"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683216587,"creation_date":1683214770,"question_id":76174965,"body_markdown":"I am using JSQLParser to select a set of SQL queries. These queries and generated by hibernate.\r\n\r\nI have an issue when Hibernate generates an insert query followed by select scope_identity().\r\nBecause JSQLParser is parsing the insert part, and then generates an exception\r\n\r\n    insert into MYTABLE(LOG_ACTION, LOG_APPLICATION, LOG_CATEGORY) values (?, ?, ?) select scope_identity().\r\n\r\nThe following exception is thrown:\r\n    Encountered unexpected token: &quot;select&quot; &lt;K_SELECT&gt;\r\n    at line 1, column 338.\r\n\r\n    Was expecting one of:\r\n\r\n    &quot;,&quot;\r\n    &quot;;&quot;\r\n    &quot;ON&quot;\r\n    &quot;RETURNING&quot;\r\n    &lt;EOF&gt;\r\n\r\nHow could I parse such a query without getting this error?\r\n\r\nI have the following code:\r\n\r\n    if (sqlStatement.toLowerCase().startsWith(INSERT)) {\r\n                return new InsertParser(sqlStatement);\r\n\r\nAnd then in InsertParser:\r\n\r\n    private void preprocessInsert() {\r\n        try {\r\n            Insert insert = (Insert) CCJSqlParserUtil.parse(sqlStatement);\r\n            // Set the table\r\n            Table table = new Table();\r\n            table.setName(insert.getTable().getName());\r\n            // Now get the parameters\r\n            List&lt;net.sf.jsqlparser.schema.Column&gt; columns = insert.getColumns();\r\n            for (net.sf.jsqlparser.schema.Column column : columns) {\r\n                Parameter parameter = new Parameter();\r\n                mycompany.jdbc.parser.Column pColumn = new mycompany.jdbc.parser.Column();\r\n                pColumn.setName(column.getColumnName());\r\n                pColumn.setTable(table);\r\n                parameter.setColumn(pColumn);\r\n                parameters.add(parameter);\r\n            }\r\n        } catch (JSQLParserException e) {\r\n            LOGGER.error(&quot;Preprocesing error: &quot; + e.getMessage());\r\n        }\r\n    }","title":"JSQLParser. How to parse an insert followed by select scope_identity()","body":"<p>I am using JSQLParser to select a set of SQL queries. These queries and generated by hibernate.</p>\n<p>I have an issue when Hibernate generates an insert query followed by select scope_identity().\nBecause JSQLParser is parsing the insert part, and then generates an exception</p>\n<pre><code>insert into MYTABLE(LOG_ACTION, LOG_APPLICATION, LOG_CATEGORY) values (?, ?, ?) select scope_identity().\n</code></pre>\n<p>The following exception is thrown:\nEncountered unexpected token: &quot;select&quot; &lt;K_SELECT&gt;\nat line 1, column 338.</p>\n<pre><code>Was expecting one of:\n\n&quot;,&quot;\n&quot;;&quot;\n&quot;ON&quot;\n&quot;RETURNING&quot;\n&lt;EOF&gt;\n</code></pre>\n<p>How could I parse such a query without getting this error?</p>\n<p>I have the following code:</p>\n<pre><code>if (sqlStatement.toLowerCase().startsWith(INSERT)) {\n            return new InsertParser(sqlStatement);\n</code></pre>\n<p>And then in InsertParser:</p>\n<pre><code>private void preprocessInsert() {\n    try {\n        Insert insert = (Insert) CCJSqlParserUtil.parse(sqlStatement);\n        // Set the table\n        Table table = new Table();\n        table.setName(insert.getTable().getName());\n        // Now get the parameters\n        List&lt;net.sf.jsqlparser.schema.Column&gt; columns = insert.getColumns();\n        for (net.sf.jsqlparser.schema.Column column : columns) {\n            Parameter parameter = new Parameter();\n            mycompany.jdbc.parser.Column pColumn = new mycompany.jdbc.parser.Column();\n            pColumn.setName(column.getColumnName());\n            pColumn.setTable(table);\n            parameter.setColumn(pColumn);\n            parameters.add(parameter);\n        }\n    } catch (JSQLParserException e) {\n        LOGGER.error(&quot;Preprocesing error: &quot; + e.getMessage());\n    }\n}\n</code></pre>\n"},{"tags":["java","mockito","junit5","powermock","powermockito"],"comments":[{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1683095032,"post_id":76159443,"comment_id":134311898,"body_markdown":"Does this answer your question? https://stackoverflow.com/questions/75873664/how-to-unit-test-static-methods-with-custom-object-as-return-type-using-junit-5/75874320#75874320","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75873664/how-to-unit-test-static-methods-with-custom-object-as-return-type-using-junit-5/75874320#75874320\" title=\"how to unit test static methods with custom object as return type using junit 5\">stackoverflow.com/questions/75873664/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683212954,"creation_date":1683212954,"answer_id":76174715,"question_id":76159443,"body_markdown":"Firstly, I would try doing it without mocks (if possible). For instance, when is `someException` being thrown in the by b.externalMethod()? \r\nMaybe you can cause this to happen through the `x` and `y` params or some test configuration: this will allow you to have a mock-free test. :)\r\n\r\n\r\n----------\r\n\r\n\r\nIf this isn&#39;t possible, I would start looking at the design of this class, which makes it hard to test. The easiest thing you can do would be to use dependency injection and add a constructor of A which receives an instance of B as parameter:\r\n\r\n```java\r\nclass A {\r\n    private final B b;\r\n\r\n    public A(String x, String y){\r\n        this(new B(x,y));\r\n    }\r\n\t\t\r\n    public A(B b){\r\n        this.b = b;\r\n    }\r\n\t// ...\r\n}\r\n```\r\n\r\nThis way, in the test, you&#39;ll be able to easily inject the mock:\r\n\r\nB mockedB = Mockito.mock(B.class);\r\nA testedA = new A(mockedB);\r\n\r\nwhen(mockedB.externalMethod()).thenThrow(someException);\r\n\r\n\r\nIf you don&#39;t like the idea of another public constructor, you can consider at least a package-protected one. But overall, I think a second public constructor would be the way to go, you can use `@RequiredArgConstructor` if you are using Lombok.","title":"How do I mock methods of a private final client that&#39;s being initialized inside a dependency class?","body":"<p>Firstly, I would try doing it without mocks (if possible). For instance, when is <code>someException</code> being thrown in the by b.externalMethod()?\nMaybe you can cause this to happen through the <code>x</code> and <code>y</code> params or some test configuration: this will allow you to have a mock-free test. :)</p>\n<hr />\n<p>If this isn't possible, I would start looking at the design of this class, which makes it hard to test. The easiest thing you can do would be to use dependency injection and add a constructor of A which receives an instance of B as parameter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n    private final B b;\n\n    public A(String x, String y){\n        this(new B(x,y));\n    }\n        \n    public A(B b){\n        this.b = b;\n    }\n    // ...\n}\n</code></pre>\n<p>This way, in the test, you'll be able to easily inject the mock:</p>\n<p>B mockedB = Mockito.mock(B.class);\nA testedA = new A(mockedB);</p>\n<p>when(mockedB.externalMethod()).thenThrow(someException);</p>\n<p>If you don't like the idea of another public constructor, you can consider at least a package-protected one. But overall, I think a second public constructor would be the way to go, you can use <code>@RequiredArgConstructor</code> if you are using Lombok.</p>\n"}],"owner":{"account_id":16753503,"reputation":33,"user_id":12110061,"display_name":"abhi gang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683216424,"creation_date":1683068896,"question_id":76159443,"body_markdown":"I have a class that looks like this : \r\n\r\n    class A {\r\n        private final B b;\r\n    \r\n        public A(String x, String y){\r\n            b = new B(x,y);\r\n        }\r\n    \r\n    \r\n        public void someMethod() {\r\n            b.externalMethod();\r\n        }\r\n    }\r\n\r\nNow I&#39;m instantiating A inside a drools rule and calling `someMethod()` but I want to avoid call to `externalMethod()`. Is there a way to achieve this ?\r\n\r\nI&#39;ve tried using `mockedConstruction` for `B` but with that I&#39;m facing 2 issues : \r\n\r\n 1. Mockito only allows 1 static mock per thread, so it won&#39;t be feasible if I had multiple clients (of type A) inside a single rule.\r\n 2. I am not able to assert exceptions using this as `mockedConstruction` uses a lambda function and doing something like `doThrow(someException).when(b).externalMethod()` would give exception on mock creation itself rather than the method call.\r\n\r\nAny help is appreciated. I apologise if language is not clear or I&#39;ve missed any detail (please mention if any).","title":"How do I mock methods of a private final client that&#39;s being initialized inside a dependency class?","body":"<p>I have a class that looks like this :</p>\n<pre><code>class A {\n    private final B b;\n\n    public A(String x, String y){\n        b = new B(x,y);\n    }\n\n\n    public void someMethod() {\n        b.externalMethod();\n    }\n}\n</code></pre>\n<p>Now I'm instantiating A inside a drools rule and calling <code>someMethod()</code> but I want to avoid call to <code>externalMethod()</code>. Is there a way to achieve this ?</p>\n<p>I've tried using <code>mockedConstruction</code> for <code>B</code> but with that I'm facing 2 issues :</p>\n<ol>\n<li>Mockito only allows 1 static mock per thread, so it won't be feasible if I had multiple clients (of type A) inside a single rule.</li>\n<li>I am not able to assert exceptions using this as <code>mockedConstruction</code> uses a lambda function and doing something like <code>doThrow(someException).when(b).externalMethod()</code> would give exception on mock creation itself rather than the method call.</li>\n</ol>\n<p>Any help is appreciated. I apologise if language is not clear or I've missed any detail (please mention if any).</p>\n"},{"tags":["java","option-type"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1512602700,"post_id":47685157,"comment_id":82329963,"body_markdown":"Why aren&#39;t you throwing `KException`?","body":"Why aren&#39;t you throwing <code>KException</code>?"},{"owner":{"account_id":10081074,"reputation":1138,"user_id":9040373,"display_name":"whatamidoingwithmylife"},"score":0,"creation_date":1512602752,"post_id":47685157,"comment_id":82329977,"body_markdown":"You can convert it only if it&#39;s extending MyException.","body":"You can convert it only if it&#39;s extending MyException."},{"owner":{"account_id":190177,"reputation":10331,"user_id":429972,"accept_rate":67,"display_name":"jontro"},"score":0,"creation_date":1512602801,"post_id":47685157,"comment_id":82329994,"body_markdown":"Just throw a new exception like done here https://stackoverflow.com/questions/11972765/rethrow-exception-in-java","body":"Just throw a new exception like done here <a href=\"https://stackoverflow.com/questions/11972765/rethrow-exception-in-java\" title=\"rethrow exception in java\">stackoverflow.com/questions/11972765/rethrow-exception-in-ja&zwnj;&#8203;va</a>"},{"owner":{"account_id":6760471,"reputation":468,"user_id":5207458,"accept_rate":74,"display_name":"Pardha.Saradhi"},"score":0,"creation_date":1512602829,"post_id":47685157,"comment_id":82330007,"body_markdown":"KException is from an External library. I have various handlers and logic on MyException.","body":"KException is from an External library. I have various handlers and logic on MyException."},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":1,"creation_date":1512602843,"post_id":47685157,"comment_id":82330016,"body_markdown":"...and you can&#39;t extend `KException`?","body":"...and you can&#39;t extend <code>KException</code>?"},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1512603068,"post_id":47685157,"comment_id":82330112,"body_markdown":"wrap your `return` statement in `try-catch` and throw whatever you need.","body":"wrap your <code>return</code> statement in <code>try-catch</code> and throw whatever you need."},{"owner":{"account_id":6760471,"reputation":468,"user_id":5207458,"accept_rate":74,"display_name":"Pardha.Saradhi"},"score":0,"creation_date":1512603085,"post_id":47685157,"comment_id":82330121,"body_markdown":"it already extends it. Updated the question","body":"it already extends it. Updated the question"},{"owner":{"account_id":6760471,"reputation":468,"user_id":5207458,"accept_rate":74,"display_name":"Pardha.Saradhi"},"score":0,"creation_date":1512603438,"post_id":47685157,"comment_id":82330250,"body_markdown":"Tried it. Wrapping return in try catch doesn&#39;t work as p-&gt;p.getOrders()  throws the exception which should be handled first.","body":"Tried it. Wrapping return in try catch doesn&#39;t work as p-&gt;p.getOrders()  throws the exception which should be handled first."},{"owner":{"account_id":9071789,"reputation":4069,"user_id":6754706,"accept_rate":38,"display_name":"RAZ_Muh_Taz"},"score":0,"creation_date":1512603976,"post_id":47685157,"comment_id":82330452,"body_markdown":"catch(KException e){ throw new MyException(e.message, e.code);}?","body":"catch(KException e){ throw new MyException(e.message, e.code);}?"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":2,"creation_date":1512604912,"post_id":47685157,"comment_id":82330778,"body_markdown":"What does it mean to return an empty `Optional&lt;List&lt;Order&gt;&gt;`? Would it really have a different meaning from an empty `List&lt;Order&gt;`? You should avoid wrapping collections into optionals (and vice versa), as this is quite cumbersome to use for the caller.","body":"What does it mean to return an empty <code>Optional&lt;List&lt;Order&gt;&gt;</code>? Would it really have a different meaning from an empty <code>List&lt;Order&gt;</code>? You should avoid wrapping collections into optionals (and vice versa), as this is quite cumbersome to use for the caller."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1512605279,"post_id":47685157,"comment_id":82330871,"body_markdown":"Possible duplicate of [Java 8 Lambda function that throws exception?](https://stackoverflow.com/questions/18198176/java-8-lambda-function-that-throws-exception)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/18198176/java-8-lambda-function-that-throws-exception\">Java 8 Lambda function that throws exception?</a>"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1512605388,"post_id":47685157,"comment_id":82330908,"body_markdown":"Also [Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?](https://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-why-mandato)","body":"Also <a href=\"https://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-why-mandato\">Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?</a>"},{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1512608638,"post_id":47685157,"comment_id":82331681,"body_markdown":"`Optional` and lambdas are a poor fit here.","body":"<code>Optional</code> and lambdas are a poor fit here."},{"owner":{"account_id":10377194,"reputation":4505,"user_id":7653073,"display_name":"Malte Hartwig"},"score":0,"creation_date":1512640290,"post_id":47685157,"comment_id":82343263,"body_markdown":"This is pretty much the same issue as with your other question from yesterday: [Handling exceptions while returning values by Optional flatmap](https://stackoverflow.com/questions/47661370/handling-exceptions-while-returning-values-by-optional-flatmap). The solutions are similar: catch KException in the lambda, re-throw as RuntimeException, catch that one outside the lamba, re-throw as MyException.","body":"This is pretty much the same issue as with your other question from yesterday: <a href=\"https://stackoverflow.com/questions/47661370/handling-exceptions-while-returning-values-by-optional-flatmap\">Handling exceptions while returning values by Optional flatmap</a>. The solutions are similar: catch KException in the lambda, re-throw as RuntimeException, catch that one outside the lamba, re-throw as MyException."}],"answers":[{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1512604403,"creation_date":1512602736,"answer_id":47685180,"question_id":47685157,"body_markdown":"as suggested by some of the comments, you can trap the exception within the `map` operation and then perform any further logic you need to do:\r\n\r\n    return getConnection(authDTO).map(p -&gt; {\r\n            try {\r\n                return p.getOrders();\r\n            } catch (KException e) {\r\n                // perform some other logic\r\n            }\r\n    });\r\n        ","title":"Handling exceptions from methods in map of Optional","body":"<p>as suggested by some of the comments, you can trap the exception within the <code>map</code> operation and then perform any further logic you need to do:</p>\n\n<pre><code>return getConnection(authDTO).map(p -&gt; {\n        try {\n            return p.getOrders();\n        } catch (KException e) {\n            // perform some other logic\n        }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13338050,"reputation":484,"user_id":9627242,"display_name":"ajain"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1673037327,"creation_date":1673037327,"answer_id":75035848,"question_id":47685157,"body_markdown":"Cant you just do like this?\r\n\r\n```\r\n@Override\r\npublic Optional&lt;List&lt;Order&gt;&gt; getPendingOrders(AuthDTO authDTO) throws MyException {\r\n    return connector.getConnection(authDTO)\r\n            .map(p-&gt;p.getOrders())\r\n            .orElseThrow(MyException::new));\r\n            \r\n}","title":"Handling exceptions from methods in map of Optional","body":"<p>Cant you just do like this?</p>\n<pre><code>@Override\npublic Optional&lt;List&lt;Order&gt;&gt; getPendingOrders(AuthDTO authDTO) throws MyException {\n    return connector.getConnection(authDTO)\n            .map(p-&gt;p.getOrders())\n            .orElseThrow(MyException::new));\n            \n}\n</code></pre>\n"}],"owner":{"account_id":6760471,"reputation":468,"user_id":5207458,"accept_rate":74,"display_name":"Pardha.Saradhi"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9580,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1683216300,"creation_date":1512602540,"question_id":47685157,"body_markdown":"I have a method like this.\r\n\r\n    @Override\r\n    public Optional&lt;List&lt;Order&gt;&gt; getPendingOrders(AuthDTO authDTO) throws MyException {\r\n        return connector.getConnection(authDTO).map(p-&gt;p.getOrders());\r\n    }\r\n\r\n\r\nHere \r\n\r\n    connector.getConnection(authDTO)\r\n\r\nreturns an Optional of Connection and \r\n\r\n    p-&gt;p.getOrders() \r\nthrows KException which I cannot change and is of the form\r\n\r\n    public class KException extends Throwable {\r\n    \r\n        // variables\r\n        public String message;\r\n        public int code;\r\n    \r\n        // constructor that sets the message\r\n        public KException(String message){\r\n            this.message = message;\r\n        }\r\n    \r\n        // constructor that sets the message and code\r\n        public KException(String message, int code){\r\n            this.message = message;\r\n            this.code = code;\r\n        }\r\n    }\r\n\r\nand this the strucute of MyException\r\n\r\n\r\n    public class MyException extends KException {\r\n    \r\n        public MyException(String message, int code) {\r\n            super(message, code);\r\n        }\r\n    }\r\n\r\nThe code is not compiling with the below error\r\n\r\n    unreported exception com.something.exceptions.KException; must be caught or declared to be thrown\r\n\r\n\r\nI want to convert this KException to MyException. Is there are an elegant way to do this? PLease help.\r\n","title":"Handling exceptions from methods in map of Optional","body":"<p>I have a method like this.</p>\n\n<pre><code>@Override\npublic Optional&lt;List&lt;Order&gt;&gt; getPendingOrders(AuthDTO authDTO) throws MyException {\n    return connector.getConnection(authDTO).map(p-&gt;p.getOrders());\n}\n</code></pre>\n\n<p>Here </p>\n\n<pre><code>connector.getConnection(authDTO)\n</code></pre>\n\n<p>returns an Optional of Connection and </p>\n\n<pre><code>p-&gt;p.getOrders() \n</code></pre>\n\n<p>throws KException which I cannot change and is of the form</p>\n\n<pre><code>public class KException extends Throwable {\n\n    // variables\n    public String message;\n    public int code;\n\n    // constructor that sets the message\n    public KException(String message){\n        this.message = message;\n    }\n\n    // constructor that sets the message and code\n    public KException(String message, int code){\n        this.message = message;\n        this.code = code;\n    }\n}\n</code></pre>\n\n<p>and this the strucute of MyException</p>\n\n<pre><code>public class MyException extends KException {\n\n    public MyException(String message, int code) {\n        super(message, code);\n    }\n}\n</code></pre>\n\n<p>The code is not compiling with the below error</p>\n\n<pre><code>unreported exception com.something.exceptions.KException; must be caught or declared to be thrown\n</code></pre>\n\n<p>I want to convert this KException to MyException. Is there are an elegant way to do this? PLease help.</p>\n"},{"tags":["java","selenium-webdriver","automation","testng"],"owner":{"account_id":14957548,"reputation":51,"user_id":10798352,"display_name":"AbdulQASDET"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683215367,"creation_date":1683214820,"question_id":76174970,"body_markdown":"As shown below I have a TestNG selenium project which has BaseTest class which is extended to TestClass and there are 2 tests/methods TestA and TestB. When I run testng.xml file I am able to run suite successfully but running test individually on TestA or TestB or TestClass level, tests are not running\r\n\r\nProject structure:\r\n\r\n - Tests/TestClass (it has 2 methods TestA and TestB)\r\n - pom.xml\r\n - testng.xml\r\n - PageObjects\r\n - Reports\r\n - Base/BaseTest\r\n\r\n**testng.xml file:**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;&gt;\r\n&lt;suite name=&quot;Automation Test Suite&quot;&gt;\r\n\t&lt;listeners&gt;\r\n\t\t&lt;listener\r\n\t\t\tclass-name=&quot;com.listeners.TestListener&quot; /&gt;\r\n\t&lt;/listeners&gt;\r\n\t\t\r\n    &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot;/&gt;\r\n    &lt;parameter name=&quot;env&quot; value=&quot;QA&quot;/&gt;\r\n  \r\n    &lt;test name=&quot;Functional Tests&quot;&gt;\r\n\t  &lt;classes&gt;\r\n\t\t  &lt;class name=&quot;com.tests.functional.TestScenario_001&quot;/&gt;\r\n\t  &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n&lt;/suite&gt;\r\n```\r\n\r\n\r\n**BaseClass:**\r\n\r\n```\r\npublic class BaseTest extends BaseClass\r\n{\r\n    @Parameters({&quot;browser&quot;,&quot;env&quot;})\r\n    @BeforeClass(alwaysRun = true)\r\n    public void setUp(String browser, String env) throws IOException\r\n    {\r\n      startSession(browser,env);\r\n    }\r\n\r\n    @AfterClass(alwaysRun = true)\r\n    public void tearDown() throws IOException\r\n    {\r\n      endSession();\r\n    }\r\n}\r\n```\r\n\r\nI tried adding `alwaysRun = true` at Before/After class methods but no luck. `startSession` and `endSession` methods will create driver instance and kill driver instance\r\n\r\n**Getting error on console as below:**\r\n````\r\nFAILED CONFIGURATION: @BeforeClass com.base.BaseTest.setUp\r\norg.testng.TestNGException: \r\nParameter &#39;browser&#39; is required by BeforeClass on method setUp but has not been marked @Optional or defined\r\nin /private/var/folders/0l/8yzm1t0d6dv86g62b9g27sc80000gp/T/testng-eclipse-421234397/testng-customsuite.xml\r\n\r\nFAILED CONFIGURATION: @AfterClass com.base.BaseTest.tearDown\r\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.close()&quot; because &quot;com.wrappers.BaseClass.driver&quot; is null\r\n\r\nFAILED: com.tests.functional.TestScenario_001.HelloWorld1\r\n        Test description of HelloWorld1\r\njava.lang.RuntimeException: java.lang.ExceptionInInitializerError\r\n````","title":"Testng.xml file is able to run tests as suite but running individual tests inside class file is failing to run","body":"<p>As shown below I have a TestNG selenium project which has BaseTest class which is extended to TestClass and there are 2 tests/methods TestA and TestB. When I run testng.xml file I am able to run suite successfully but running test individually on TestA or TestB or TestClass level, tests are not running</p>\n<p>Project structure:</p>\n<ul>\n<li>Tests/TestClass (it has 2 methods TestA and TestB)</li>\n<li>pom.xml</li>\n<li>testng.xml</li>\n<li>PageObjects</li>\n<li>Reports</li>\n<li>Base/BaseTest</li>\n</ul>\n<p><strong>testng.xml file:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;&gt;\n&lt;suite name=&quot;Automation Test Suite&quot;&gt;\n    &lt;listeners&gt;\n        &lt;listener\n            class-name=&quot;com.listeners.TestListener&quot; /&gt;\n    &lt;/listeners&gt;\n        \n    &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot;/&gt;\n    &lt;parameter name=&quot;env&quot; value=&quot;QA&quot;/&gt;\n  \n    &lt;test name=&quot;Functional Tests&quot;&gt;\n      &lt;classes&gt;\n          &lt;class name=&quot;com.tests.functional.TestScenario_001&quot;/&gt;\n      &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n<p><strong>BaseClass:</strong></p>\n<pre><code>public class BaseTest extends BaseClass\n{\n    @Parameters({&quot;browser&quot;,&quot;env&quot;})\n    @BeforeClass(alwaysRun = true)\n    public void setUp(String browser, String env) throws IOException\n    {\n      startSession(browser,env);\n    }\n\n    @AfterClass(alwaysRun = true)\n    public void tearDown() throws IOException\n    {\n      endSession();\n    }\n}\n</code></pre>\n<p>I tried adding <code>alwaysRun = true</code> at Before/After class methods but no luck. <code>startSession</code> and <code>endSession</code> methods will create driver instance and kill driver instance</p>\n<p><strong>Getting error on console as below:</strong></p>\n<pre><code>FAILED CONFIGURATION: @BeforeClass com.base.BaseTest.setUp\norg.testng.TestNGException: \nParameter 'browser' is required by BeforeClass on method setUp but has not been marked @Optional or defined\nin /private/var/folders/0l/8yzm1t0d6dv86g62b9g27sc80000gp/T/testng-eclipse-421234397/testng-customsuite.xml\n\nFAILED CONFIGURATION: @AfterClass com.base.BaseTest.tearDown\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.close()&quot; because &quot;com.wrappers.BaseClass.driver&quot; is null\n\nFAILED: com.tests.functional.TestScenario_001.HelloWorld1\n        Test description of HelloWorld1\njava.lang.RuntimeException: java.lang.ExceptionInInitializerError\n</code></pre>\n"},{"tags":["java","spring","caching","ehcache"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1309865997,"creation_date":1309865997,"answer_id":6582055,"question_id":6581891,"body_markdown":"Upgrade to the latest spring 3.1 milestone - it has built-in cache support through annotations - [see here][1]\r\n\r\nApart from that, you can always use the [`EhCacheFactoryBean`][2]\r\n\r\n\r\n  [1]: http://blog.springsource.com/2011/02/23/spring-3-1-m1-caching/\r\n  [2]: http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/cache/ehcache/EhCacheFactoryBean.html","title":"Integrating ehcache with spring 3.0","body":"<p>Upgrade to the latest spring 3.1 milestone - it has built-in cache support through annotations - <a href=\"http://blog.springsource.com/2011/02/23/spring-3-1-m1-caching/\" rel=\"nofollow\">see here</a></p>\n\n<p>Apart from that, you can always use the <a href=\"http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/cache/ehcache/EhCacheFactoryBean.html\" rel=\"nofollow\"><code>EhCacheFactoryBean</code></a></p>\n"},{"tags":[],"owner":{"account_id":128351,"reputation":1497,"user_id":326120,"accept_rate":50,"display_name":"Andreas Krueger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1309866005,"creation_date":1309866005,"answer_id":6582057,"question_id":6581891,"body_markdown":"To implement this in your application, follow these steps:\r\n\r\nStep 1:\r\n\r\nAdd the jars to your application as listed on the [Ehcache Annotations for Spring project site][1].\r\n\r\nStep 2:\r\n\r\nAdd the Annotation to methods you would like to cache. Lets assume you are using the Dog getDog(String name) method from above:\r\n\r\n    @Cacheable(name=&quot;getDog&quot;)\r\n    Dog getDog(String name)\r\n    {\r\n        ....\r\n    }\r\n\r\nStep 3:\r\n\r\nConfigure Spring. You must add the following to your Spring configuration file in the beans declaration section:\r\n\r\n    &lt;ehcache:annotation-driven cache-manager=&quot;ehCacheManager&quot; /&gt;\r\n\r\nPlease refer to [Ehcache site][2] for complete details.\r\n\r\n\r\n  [1]: http://code.google.com/p/ehcache-spring-annotations/\r\n  [2]: http://ehcache.org/recipes/spring-annotations.html\r\n","title":"Integrating ehcache with spring 3.0","body":"<p>To implement this in your application, follow these steps:</p>\n\n<p>Step 1:</p>\n\n<p>Add the jars to your application as listed on the <a href=\"http://code.google.com/p/ehcache-spring-annotations/\" rel=\"nofollow\">Ehcache Annotations for Spring project site</a>.</p>\n\n<p>Step 2:</p>\n\n<p>Add the Annotation to methods you would like to cache. Lets assume you are using the Dog getDog(String name) method from above:</p>\n\n<pre><code>@Cacheable(name=\"getDog\")\nDog getDog(String name)\n{\n    ....\n}\n</code></pre>\n\n<p>Step 3:</p>\n\n<p>Configure Spring. You must add the following to your Spring configuration file in the beans declaration section:</p>\n\n<pre><code>&lt;ehcache:annotation-driven cache-manager=\"ehCacheManager\" /&gt;\n</code></pre>\n\n<p>Please refer to <a href=\"http://ehcache.org/recipes/spring-annotations.html\" rel=\"nofollow\">Ehcache site</a> for complete details.</p>\n"},{"tags":[],"owner":{"account_id":261513,"reputation":717,"user_id":545734,"display_name":"Jeet Singh Parmar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536648574,"creation_date":1492777355,"answer_id":43542640,"question_id":6581891,"body_markdown":"To integrate Ehcache just follow below steps \r\n\r\n1 - Add Dependency in pom XML file\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\r\n       &lt;artifactId&gt;ehcache-core&lt;/artifactId&gt;\r\n       &lt;version&gt;2.6.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n2 - create an xml file called spring-cache.xml put it in the resources folder\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:cache=&quot;http://www.springframework.org/schema/cache&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n    \t\thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \t\thttp://www.springframework.org/schema/cache \r\n    \t\thttp://www.springframework.org/schema/cache/spring-cache.xsd&quot;&gt;\r\n    \r\n    \t&lt;cache:annotation-driven/&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;cacheManager&quot; class=&quot;org.springframework.cache.ehcache.EhCacheCacheManager&quot;&gt;\r\n    \t\t&lt;property name=&quot;cacheManager&quot; ref=&quot;ehcache&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean id=&quot;ehcache&quot; class=&quot;org.springframework.cache.ehcache.EhCacheManagerFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;configLocation&quot; value=&quot;classpath:ehcache.xml&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    &lt;/beans&gt;\r\n\r\n3 - as you can see we are using reference of ehcache.xml so create file and put it in resources folder\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:noNamespaceSchemaLocation=&quot;http://ehcache.org/ehcache.xsd&quot; updateCheck=&quot;true&quot;\r\n    \tmonitoring=&quot;autodetect&quot; dynamicConfig=&quot;true&quot;&gt;\r\n    \t&lt;cache name=&quot;users&quot; maxEntriesLocalHeap=&quot;5000&quot;\r\n    \t\tmaxEntriesLocalDisk=&quot;1000&quot; eternal=&quot;false&quot; diskSpoolBufferSizeMB=&quot;20&quot;\r\n    \t\ttimeToIdleSeconds=&quot;200&quot; timeToLiveSeconds=&quot;500&quot;\r\n    \t\tmemoryStoreEvictionPolicy=&quot;LFU&quot; transactionalMode=&quot;off&quot;&gt;\r\n    \t\t&lt;persistence strategy=&quot;localTempSwap&quot; /&gt;\r\n    \t&lt;/cache&gt;\r\n    &lt;/ehcache&gt;\r\n\r\nso can see create a cache for &quot;users&quot; so that can use wherever user list is queried from the database\r\n\r\n4 - use it like below code\r\n\r\n    @Cacheable(value=&quot;users&quot;)\r\n    public List&lt;User&gt; userList() {\r\n    \treturn userDao.findAll();\r\n    }\r\n\r\nso that&#39;s it the same way you can implement cache wherever is required\r\n\r\nstill have some doubt or confusion see live demo\r\n\r\n[Integrate EhCache in Spring MVC ][1]\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=a7DFBvCTuHg","title":"Integrating ehcache with spring 3.0","body":"<p>To integrate Ehcache just follow below steps </p>\n\n<p>1 - Add Dependency in pom XML file</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\n   &lt;artifactId&gt;ehcache-core&lt;/artifactId&gt;\n   &lt;version&gt;2.6.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>2 - create an xml file called spring-cache.xml put it in the resources folder</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:p=\"http://www.springframework.org/schema/p\" xmlns:cache=\"http://www.springframework.org/schema/cache\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/cache \n        http://www.springframework.org/schema/cache/spring-cache.xsd\"&gt;\n\n    &lt;cache:annotation-driven/&gt;\n\n    &lt;bean id=\"cacheManager\" class=\"org.springframework.cache.ehcache.EhCacheCacheManager\"&gt;\n        &lt;property name=\"cacheManager\" ref=\"ehcache\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"ehcache\" class=\"org.springframework.cache.ehcache.EhCacheManagerFactoryBean\"&gt;\n        &lt;property name=\"configLocation\" value=\"classpath:ehcache.xml\" /&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>3 - as you can see we are using reference of ehcache.xml so create file and put it in resources folder</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ehcache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:noNamespaceSchemaLocation=\"http://ehcache.org/ehcache.xsd\" updateCheck=\"true\"\n    monitoring=\"autodetect\" dynamicConfig=\"true\"&gt;\n    &lt;cache name=\"users\" maxEntriesLocalHeap=\"5000\"\n        maxEntriesLocalDisk=\"1000\" eternal=\"false\" diskSpoolBufferSizeMB=\"20\"\n        timeToIdleSeconds=\"200\" timeToLiveSeconds=\"500\"\n        memoryStoreEvictionPolicy=\"LFU\" transactionalMode=\"off\"&gt;\n        &lt;persistence strategy=\"localTempSwap\" /&gt;\n    &lt;/cache&gt;\n&lt;/ehcache&gt;\n</code></pre>\n\n<p>so can see create a cache for \"users\" so that can use wherever user list is queried from the database</p>\n\n<p>4 - use it like below code</p>\n\n<pre><code>@Cacheable(value=\"users\")\npublic List&lt;User&gt; userList() {\n    return userDao.findAll();\n}\n</code></pre>\n\n<p>so that's it the same way you can implement cache wherever is required</p>\n\n<p>still have some doubt or confusion see live demo</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=a7DFBvCTuHg\" rel=\"nofollow noreferrer\">Integrate EhCache in Spring MVC </a></p>\n"}],"owner":{"account_id":777980,"reputation":21,"user_id":829586,"display_name":"shashikanth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6330,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1683215350,"creation_date":1309865131,"question_id":6581891,"body_markdown":"I have an application in which I use spring 3.0.2 and ibatis. Now, I need to integrate ehcache with my code. I tried  [this link](http://code.google.com/p/ehcache-spring-annotations) but couldnt get it working. I would prefer someone to give me the details of the jars required, xml configurations to be done and code changes if required.  \r\n","title":"Integrating ehcache with spring 3.0","body":"<p>I have an application in which I use spring 3.0.2 and ibatis. Now, I need to integrate ehcache with my code. I tried  <a href=\"http://code.google.com/p/ehcache-spring-annotations\" rel=\"nofollow\">this link</a> but couldnt get it working. I would prefer someone to give me the details of the jars required, xml configurations to be done and code changes if required.  </p>\n"},{"tags":["java","unit-testing","naming-conventions"],"answers":[{"tags":[],"owner":{"account_id":6358,"reputation":386072,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683214599,"creation_date":1274213585,"answer_id":2860774,"question_id":2860747,"body_markdown":"I ran across two good suggestions. Links here:\r\n\r\n- [Unit Test Naming](https://slott-softwarearchitect.blogspot.com/2009/10/unit-test-naming.html)\r\n- [Naming standards for unit tests](https://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html)\r\n- [Unit Testing With at-should Annotation](https://wiki.openmrs.org/display/docs/Unit%20Testing%20With%20at-should%20Annotation)","title":"Best practice for naming unit and integration test methods?","body":"<p>I ran across two good suggestions. Links here:</p>\n<ul>\n<li><a href=\"https://slott-softwarearchitect.blogspot.com/2009/10/unit-test-naming.html\" rel=\"nofollow noreferrer\">Unit Test Naming</a></li>\n<li><a href=\"https://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html\" rel=\"nofollow noreferrer\">Naming standards for unit tests</a></li>\n<li><a href=\"https://wiki.openmrs.org/display/docs/Unit%20Testing%20With%20at-should%20Annotation\" rel=\"nofollow noreferrer\">Unit Testing With at-should Annotation</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1274213612,"creation_date":1274213612,"answer_id":2860778,"question_id":2860747,"body_markdown":"In that situation I&#39;d probably find the naming convention that was used the most and refactor the rest of the code to use that.  If the one that was used the most is truly horrid, I&#39;d still look to the existing code and try to find one that I could live with.  Consistency is more important than arbitrary conventions.","title":"Best practice for naming unit and integration test methods?","body":"<p>In that situation I'd probably find the naming convention that was used the most and refactor the rest of the code to use that.  If the one that was used the most is truly horrid, I'd still look to the existing code and try to find one that I could live with.  Consistency is more important than arbitrary conventions.</p>\n"},{"tags":[],"owner":{"account_id":104904,"reputation":68149,"user_id":280222,"accept_rate":92,"display_name":"Anders Abel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1274213660,"creation_date":1274213660,"answer_id":2860785,"question_id":2860747,"body_markdown":"I use a `FunctionTestCondition` construct. If I have two methods, `Get` and `Set` I would maybe create the following test methods:\r\n\r\n* `GetTest` being a positive test (everything is ok).\r\n* `GetTestInvalidIndex` to test an invalid index being passed to the method.\r\n* `GetTestNotInitialized` to test when the data is not inited before use.\r\n* `SetTest`\r\n* `SetTestInvalidIndex`\r\n* `SetTestTooLargeValue`\r\n* `SetTestTooLongString`","title":"Best practice for naming unit and integration test methods?","body":"<p>I use a <code>FunctionTestCondition</code> construct. If I have two methods, <code>Get</code> and <code>Set</code> I would maybe create the following test methods:</p>\n\n<ul>\n<li><code>GetTest</code> being a positive test (everything is ok).</li>\n<li><code>GetTestInvalidIndex</code> to test an invalid index being passed to the method.</li>\n<li><code>GetTestNotInitialized</code> to test when the data is not inited before use.</li>\n<li><code>SetTest</code></li>\n<li><code>SetTestInvalidIndex</code></li>\n<li><code>SetTestTooLargeValue</code></li>\n<li><code>SetTestTooLongString</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1274214458,"creation_date":1274213980,"answer_id":2860814,"question_id":2860747,"body_markdown":"It&#39;s instructive to look at BDD (behavioural driven development) and [this blog post][1] in particular.\r\n\r\nBDD is essentially focusing on components and what they *should* do. Consequently it impacts directly on how you name/structure your tests, and the code they use to set up conditions and validate. BDD allows not only the developers to read/write the tests, but non-technical members of the team (business analysts etc.) can contribute by specifying the tests and validating them.\r\n\r\n  [1]: http://blog.dannorth.net/introducing-bdd/","title":"Best practice for naming unit and integration test methods?","body":"<p>It's instructive to look at BDD (behavioural driven development) and <a href=\"http://blog.dannorth.net/introducing-bdd/\" rel=\"nofollow noreferrer\">this blog post</a> in particular.</p>\n\n<p>BDD is essentially focusing on components and what they <em>should</em> do. Consequently it impacts directly on how you name/structure your tests, and the code they use to set up conditions and validate. BDD allows not only the developers to read/write the tests, but non-technical members of the team (business analysts etc.) can contribute by specifying the tests and validating them.</p>\n"},{"tags":[],"owner":{"account_id":1146,"reputation":49086,"user_id":1527,"accept_rate":92,"display_name":"Pete Kirkham"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1274214387,"creation_date":1274214387,"answer_id":2860866,"question_id":2860747,"body_markdown":"I just write what it&#39;s for. It&#39;s not like you&#39;re going to have to type the names in anywhere else, so having a `testWibbleDoesNotThrowAnExceptionIfPassedAFrobulator` isn&#39;t a problem. Anything which is a test begins with &#39;test&#39;, obviously.","title":"Best practice for naming unit and integration test methods?","body":"<p>I just write what it's for. It's not like you're going to have to type the names in anywhere else, so having a <code>testWibbleDoesNotThrowAnExceptionIfPassedAFrobulator</code> isn't a problem. Anything which is a test begins with 'test', obviously.</p>\n"},{"tags":[],"owner":{"account_id":7421,"reputation":20226,"user_id":12890,"accept_rate":83,"display_name":"Arne Burmeister"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1274216414,"creation_date":1274216414,"answer_id":2861137,"question_id":2860747,"body_markdown":"Group your tests by setup, make a test class around this setup and name is with suffix Test or IntegrationTest. Using a test framework like [JUnit][1] or [TestNG][2] you can name your test methods as you want. I would name the method as what it tests, a sentence in camel case, not test prefix. The frameworks use a `@Test` annotation to mark a method as test.\r\n\r\n\r\n  [1]: http://junit.org/\r\n  [2]: http://testng.org/","title":"Best practice for naming unit and integration test methods?","body":"<p>Group your tests by setup, make a test class around this setup and name is with suffix Test or IntegrationTest. Using a test framework like <a href=\"http://junit.org/\" rel=\"nofollow noreferrer\">JUnit</a> or <a href=\"http://testng.org/\" rel=\"nofollow noreferrer\">TestNG</a> you can name your test methods as you want. I would name the method as what it tests, a sentence in camel case, not test prefix. The frameworks use a <code>@Test</code> annotation to mark a method as test.</p>\n"},{"tags":[],"owner":{"account_id":105042,"reputation":582,"user_id":280532,"accept_rate":100,"display_name":"Duncan"},"down_vote_count":1,"up_vote_count":11,"is_accepted":true,"score":10,"last_activity_date":1274217105,"creation_date":1274217105,"answer_id":2861186,"question_id":2860747,"body_markdown":"Assuming NUnit:\r\n\r\n    [Test]\r\n    public void ObjectUnderTest_StateChanged_Consequence()\r\n    {\r\n        Assert.That(tra_la_la);\r\n    }\r\n\r\n    [Test]\r\n    public void ObjectUnderTest_Behaviour_Consequence()\r\n    {\r\n        Assert.That(tra_la_la);\r\n    }\r\n\r\nfor example:\r\n\r\n    [Test]\r\n    public void WifeIsTired_TakeWifeToDinner_WifeIsGrateful()\r\n    {\r\n        Assert.That(tra_la_la);\r\n    }\r\n\r\n    [Test]\r\n    public void WifeIsTired_MentionNewGirlfriend_WifeGetsHalf()\r\n    {\r\n        Assert.That(tra_la_la);\r\n    }\r\n\r\n","title":"Best practice for naming unit and integration test methods?","body":"<p>Assuming NUnit:</p>\n\n<pre><code>[Test]\npublic void ObjectUnderTest_StateChanged_Consequence()\n{\n    Assert.That(tra_la_la);\n}\n\n[Test]\npublic void ObjectUnderTest_Behaviour_Consequence()\n{\n    Assert.That(tra_la_la);\n}\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>[Test]\npublic void WifeIsTired_TakeWifeToDinner_WifeIsGrateful()\n{\n    Assert.That(tra_la_la);\n}\n\n[Test]\npublic void WifeIsTired_MentionNewGirlfriend_WifeGetsHalf()\n{\n    Assert.That(tra_la_la);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":36035,"reputation":15548,"user_id":102482,"accept_rate":91,"display_name":"Finglas"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1274266216,"creation_date":1274265843,"answer_id":2864748,"question_id":2860747,"body_markdown":"There is no standard as such, different people/places will have different schemes. The important thing is you *stick* to a standard.\r\n\r\nPersonally I&#39;m a fan of the following - example code in C#, but very close to Java, same rules apply:\r\n\r\n    [Test]\r\n    public void person_should_say_hello()\r\n    {\r\n         // Arrange\r\n         var person = new Person();\r\n         // Act\r\n         string result = person.SayHello();\r\n         // Assert\r\n         Assert(..., &quot;The person did not say hello correctly!&quot;);\r\n    }\r\n\r\n**Explicit**\r\n\r\nThe test name should give the name of the class under test. In this example, the class being tested is `Person`. The test name should also have the name of the method that is being tested. This way, if the test was to fail, you&#39;ll at least know where to look to solve it. I&#39;d also recommend following the [AAA - Arrange, Act, Assert][1] rule, it will ensures your tests are easy to read and follow.\r\n\r\n**Friendly fail messages**\r\n\r\nWhen it comes to asserting a result/state, its useful to include an optional message. This makes it easier when a test fails, especially when run as part of a build process or via an external tool. \r\n\r\n**Underscores**\r\n\r\nThe final (though optional) stance I follow is using underscores for tests names. While I&#39;m no fan of underscores in production code, their use in test names is useful as test names are often much longer. Quickly glancing at a test name that uses underscores proves to be much more readable, though this is subjective and the source of much debate with regards unit testing practices.\r\n\r\n**Integration Tests**\r\n\r\nThe same standards apply to integration tests, the only difference being the location of such tests *should* be separate from unit tests. In the example code above, the test class would be called `PersonTests` and located in a file called `PersonTests.cs`. The integration tests would be named in a similar manner - `PersonIntegrationTests`, located in `PersonIntegrationTests.cs`. The same project can be used for these tests, but ensure they are located in separate directories.\r\n\r\n\r\n  [1]: http://agileinaflash.blogspot.com/2009/03/arrange-act-assert.html","title":"Best practice for naming unit and integration test methods?","body":"<p>There is no standard as such, different people/places will have different schemes. The important thing is you <em>stick</em> to a standard.</p>\n\n<p>Personally I'm a fan of the following - example code in C#, but very close to Java, same rules apply:</p>\n\n<pre><code>[Test]\npublic void person_should_say_hello()\n{\n     // Arrange\n     var person = new Person();\n     // Act\n     string result = person.SayHello();\n     // Assert\n     Assert(..., \"The person did not say hello correctly!\");\n}\n</code></pre>\n\n<p><strong>Explicit</strong></p>\n\n<p>The test name should give the name of the class under test. In this example, the class being tested is <code>Person</code>. The test name should also have the name of the method that is being tested. This way, if the test was to fail, you'll at least know where to look to solve it. I'd also recommend following the <a href=\"http://agileinaflash.blogspot.com/2009/03/arrange-act-assert.html\" rel=\"noreferrer\">AAA - Arrange, Act, Assert</a> rule, it will ensures your tests are easy to read and follow.</p>\n\n<p><strong>Friendly fail messages</strong></p>\n\n<p>When it comes to asserting a result/state, its useful to include an optional message. This makes it easier when a test fails, especially when run as part of a build process or via an external tool. </p>\n\n<p><strong>Underscores</strong></p>\n\n<p>The final (though optional) stance I follow is using underscores for tests names. While I'm no fan of underscores in production code, their use in test names is useful as test names are often much longer. Quickly glancing at a test name that uses underscores proves to be much more readable, though this is subjective and the source of much debate with regards unit testing practices.</p>\n\n<p><strong>Integration Tests</strong></p>\n\n<p>The same standards apply to integration tests, the only difference being the location of such tests <em>should</em> be separate from unit tests. In the example code above, the test class would be called <code>PersonTests</code> and located in a file called <code>PersonTests.cs</code>. The integration tests would be named in a similar manner - <code>PersonIntegrationTests</code>, located in <code>PersonIntegrationTests.cs</code>. The same project can be used for these tests, but ensure they are located in separate directories.</p>\n"}],"owner":{"account_id":76076,"reputation":21604,"user_id":218028,"accept_rate":84,"display_name":"Dave"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16062,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":2861186,"answer_count":8,"score":18,"last_activity_date":1683214599,"creation_date":1274213422,"question_id":2860747,"body_markdown":"I&#39;ve recently inherited an application that is written by different people at different times and looking for guidance on how to standardize.","title":"Best practice for naming unit and integration test methods?","body":"<p>I've recently inherited an application that is written by different people at different times and looking for guidance on how to standardize.</p>\n"},{"tags":["java","static","constructor","final"],"answers":[{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1454592433,"creation_date":1298478709,"answer_id":5093791,"question_id":5093744,"body_markdown":"static final variables are initialized when the class is loaded. The constructor may be called much later, or not at all. Also, the constructor will be called multiple times (with each new object ), so the field could no longer be final.\r\n\r\nIf you need custom logic to initialize your static final field, put that in a static block","title":"Initialize a static final field in the constructor","body":"<p>static final variables are initialized when the class is loaded. The constructor may be called much later, or not at all. Also, the constructor will be called multiple times (with each new object ), so the field could no longer be final.</p>\n\n<p>If you need custom logic to initialize your static final field, put that in a static block</p>\n"},{"tags":[],"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"down_vote_count":0,"up_vote_count":202,"is_accepted":true,"score":202,"last_activity_date":1415357131,"creation_date":1298478733,"answer_id":5093797,"question_id":5093744,"body_markdown":"A constructor will be called each time an instance of the class is created. Thus, the above code means that the value of x will be re-initialized each time an instance is created. But because the variable is declared final (and static), you can only do this\r\n\r\n    class A {    \r\n        private static final int x;\r\n        \r\n        static {\r\n        \tx = 5;\r\n        }\r\n    }\r\n\r\nBut, if you remove static, you are allowed to do this:\r\n\r\n    class A {    \r\n        private final int x;\r\n        \r\n        public A() {\r\n        \tx = 5;\r\n        }\r\n    }\r\n\r\nOR this:\r\n\r\n    class A {    \r\n        private final int x;\r\n        \r\n        {\r\n        \tx = 5;\r\n        }\r\n    }","title":"Initialize a static final field in the constructor","body":"<p>A constructor will be called each time an instance of the class is created. Thus, the above code means that the value of x will be re-initialized each time an instance is created. But because the variable is declared final (and static), you can only do this</p>\n\n<pre><code>class A {    \n    private static final int x;\n\n    static {\n        x = 5;\n    }\n}\n</code></pre>\n\n<p>But, if you remove static, you are allowed to do this:</p>\n\n<pre><code>class A {    \n    private final int x;\n\n    public A() {\n        x = 5;\n    }\n}\n</code></pre>\n\n<p>OR this:</p>\n\n<pre><code>class A {    \n    private final int x;\n\n    {\n        x = 5;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":268636,"reputation":8124,"user_id":557500,"display_name":"rfeak"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1298478748,"creation_date":1298478748,"answer_id":5093804,"question_id":5093744,"body_markdown":"Think about what happens the second time you instantiate an object. It tries to set it AGAIN, which is expressly prohibited by being a static final. It can only be set one time for the entire class, not instance.\r\n\r\nYou should set the value when you declare it\r\n\r\n    private static final x=5;\r\n\r\nIf you need additional logic, or more complex instantiation, this can be done in a static initializer block.","title":"Initialize a static final field in the constructor","body":"<p>Think about what happens the second time you instantiate an object. It tries to set it AGAIN, which is expressly prohibited by being a static final. It can only be set one time for the entire class, not instance.</p>\n\n<p>You should set the value when you declare it</p>\n\n<pre><code>private static final x=5;\n</code></pre>\n\n<p>If you need additional logic, or more complex instantiation, this can be done in a static initializer block.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1298478836,"creation_date":1298478836,"answer_id":5093819,"question_id":5093744,"body_markdown":"Think about it. You could do this with your code:\r\n\r\n    A a = new A();\r\n    A b = new A(); // Wrong... x is already initialised\r\n\r\nThe correct ways to initialise x are:\r\n\r\n    public class A \r\n    {    \r\n        private static final int x = 5;\r\n    }\r\n\r\nor\r\n\r\n    public class A \r\n    {    \r\n        private static final int x;\r\n\r\n        static\r\n        {\r\n            x = 5;\r\n        }\r\n    }\r\n","title":"Initialize a static final field in the constructor","body":"<p>Think about it. You could do this with your code:</p>\n\n<pre><code>A a = new A();\nA b = new A(); // Wrong... x is already initialised\n</code></pre>\n\n<p>The correct ways to initialise x are:</p>\n\n<pre><code>public class A \n{    \n    private static final int x = 5;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>public class A \n{    \n    private static final int x;\n\n    static\n    {\n        x = 5;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":312777,"reputation":69,"user_id":627044,"display_name":"ap2cu"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1298478838,"creation_date":1298478838,"answer_id":5093820,"question_id":5093744,"body_markdown":"`static` means that the variable is unique on the application.\r\n`final` means that it should be set only once.\r\n\r\nIf you set it in your constructor, you allow to set the variable more than once.\r\n\r\nHence you should intialize it directly or propose a static method to initialize it.","title":"Initialize a static final field in the constructor","body":"<p><code>static</code> means that the variable is unique on the application.\n<code>final</code> means that it should be set only once.</p>\n\n<p>If you set it in your constructor, you allow to set the variable more than once.</p>\n\n<p>Hence you should intialize it directly or propose a static method to initialize it.</p>\n"},{"tags":[],"owner":{"account_id":314953,"reputation":10311,"user_id":630443,"accept_rate":62,"display_name":"i.am.michiel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1521837003,"creation_date":1298479119,"answer_id":5093883,"question_id":5093744,"body_markdown":"**Final** doesn&#39;t mean that is has to be initialized in the constructor. \r\nGenerally this is what is done : \r\n\r\n     private static final int x = 5;\r\n\r\n\r\n**static** instead means that the variable will be shared through multiple instances of the class. For example : \r\n\r\n    public class Car {\r\n       static String name;\r\n       public Car(String name) {\r\n          this.name = name;\r\n       }\r\n    }\r\n\r\n    ...\r\n\r\n    Car a = new Car(&quot;Volkswagen&quot;);\r\n    System.out.println(a.name); // Produces Volkswagen\r\n\r\n    Car b = new Car(&quot;Mercedes&quot;);\r\n    System.out.println(b.name); // Produces Mercedes\r\n    System.out.println(a.name); // Produces Mercedes\r\n\r\n\r\n\r\n\r\n\r\n\r\n ","title":"Initialize a static final field in the constructor","body":"<p><strong>Final</strong> doesn't mean that is has to be initialized in the constructor. \nGenerally this is what is done : </p>\n\n<pre><code> private static final int x = 5;\n</code></pre>\n\n<p><strong>static</strong> instead means that the variable will be shared through multiple instances of the class. For example : </p>\n\n<pre><code>public class Car {\n   static String name;\n   public Car(String name) {\n      this.name = name;\n   }\n}\n\n...\n\nCar a = new Car(\"Volkswagen\");\nSystem.out.println(a.name); // Produces Volkswagen\n\nCar b = new Car(\"Mercedes\");\nSystem.out.println(b.name); // Produces Mercedes\nSystem.out.println(a.name); // Produces Mercedes\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11223764,"reputation":1,"user_id":8234104,"display_name":"Kush"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522925996,"creation_date":1522925996,"answer_id":49670729,"question_id":5093744,"body_markdown":"        public class StaticFinalExample {\r\n      /*\r\n       * Static final fields should be initialized either in\r\n       * static blocks or at the time of declaration only\r\n       * Reason : They variables are like the utility fields which should be accessible\r\n       * before object creation only once.\r\n       */\r\n      static final int x;\r\n    \r\n      /*\r\n       * Final variables shuould be initialized either at the time of declaration or\r\n       * in initialization block or constructor only as they are not accessible in static block\r\n       */\r\n      final int y;\r\n    \r\n      /*\r\n       * Static variables can be initialized either at the time of declaration or\r\n       * in initialization or constructor or static block. Since the default value is given to the\r\n       * static variables by compiler, so it depends on when you need the value\r\n       * depending on that you can initialize the variable appropriately\r\n       * An example of this is shown below in the main method\r\n       */\r\n      static int z;\r\n    \r\n      static {\r\n        x = 20; // Correct\r\n      }\r\n      {\r\n        y = 40; // Correct\r\n      }\r\n      StaticFinalExample() {\r\n        z = 50; // Correct\r\n      }\r\n      public static void main (String args[]) {\r\n        System.out.println(&quot;Before Initialization in Constructor&quot; + z);   // It will print 0\r\n        System.out.println(&quot;After Initializtion in Constructor&quot; + new StaticFinalExample().z); // It will print 50\r\n      }\r\n    }\r\n\r\n","title":"Initialize a static final field in the constructor","body":"<pre><code>    public class StaticFinalExample {\n  /*\n   * Static final fields should be initialized either in\n   * static blocks or at the time of declaration only\n   * Reason : They variables are like the utility fields which should be accessible\n   * before object creation only once.\n   */\n  static final int x;\n\n  /*\n   * Final variables shuould be initialized either at the time of declaration or\n   * in initialization block or constructor only as they are not accessible in static block\n   */\n  final int y;\n\n  /*\n   * Static variables can be initialized either at the time of declaration or\n   * in initialization or constructor or static block. Since the default value is given to the\n   * static variables by compiler, so it depends on when you need the value\n   * depending on that you can initialize the variable appropriately\n   * An example of this is shown below in the main method\n   */\n  static int z;\n\n  static {\n    x = 20; // Correct\n  }\n  {\n    y = 40; // Correct\n  }\n  StaticFinalExample() {\n    z = 50; // Correct\n  }\n  public static void main (String args[]) {\n    System.out.println(\"Before Initialization in Constructor\" + z);   // It will print 0\n    System.out.println(\"After Initializtion in Constructor\" + new StaticFinalExample().z); // It will print 50\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3512449,"reputation":3956,"user_id":2936460,"accept_rate":83,"display_name":"SQB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683214598,"creation_date":1577199147,"answer_id":59470454,"question_id":5093744,"body_markdown":"### Static\r\nThe keyword `static` means that a member of an object, in this case a field, is not tied to an instance of a class, but is a member of the class in general instead. If the static member is a field, it is initialised during loading of a class.\r\n\r\nIt is accessible through the class rather than through an instance (though the latter is not impossible, it is considered bad form), so it is accessible without the constructor having ran at all — ever.\r\n\r\n### Final\r\nThe keyword `final`, when applied to a field of an object, means that it can be assigned to only once, and that it _has_ to be assigned to during initialisation.\r\n\r\n### Static Final\r\nTaken together, these two keywords effectively define a constant: it can be assigned to only once, _has_ to be assigned to, and is the same for all instances of that class.\r\n\r\nSince the static field is initialised during class loading, it has to be initialised then, either at declaration, or in a static initialiser block.\r\n\r\nThis means that if and when you reach the constructor, it will already have been initialised, because it _needed_ to already have been initialised.\r\n\r\n### Singleton\r\nIf you&#39;re looking for a class member that you only assign to once, but read many times, you&#39;re dealing with [a _singleton_][singleton]. The singleton pattern is commonly used for access to a shared resource.\r\n\r\nThe field is made static but not final; instead when accessing the field, the code checks whether it has been initialised already, if not, it is done then and there. Note that in environments with multiple threads, you need to synchronise access to the field, to avoid accessing it while it is initialising.\r\n\r\n\r\n[tutorial]: https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\r\n[singleton]: https://www.baeldung.com/java-singleton","title":"Initialize a static final field in the constructor","body":"<h3>Static</h3>\n<p>The keyword <code>static</code> means that a member of an object, in this case a field, is not tied to an instance of a class, but is a member of the class in general instead. If the static member is a field, it is initialised during loading of a class.</p>\n<p>It is accessible through the class rather than through an instance (though the latter is not impossible, it is considered bad form), so it is accessible without the constructor having ran at all — ever.</p>\n<h3>Final</h3>\n<p>The keyword <code>final</code>, when applied to a field of an object, means that it can be assigned to only once, and that it <em>has</em> to be assigned to during initialisation.</p>\n<h3>Static Final</h3>\n<p>Taken together, these two keywords effectively define a constant: it can be assigned to only once, <em>has</em> to be assigned to, and is the same for all instances of that class.</p>\n<p>Since the static field is initialised during class loading, it has to be initialised then, either at declaration, or in a static initialiser block.</p>\n<p>This means that if and when you reach the constructor, it will already have been initialised, because it <em>needed</em> to already have been initialised.</p>\n<h3>Singleton</h3>\n<p>If you're looking for a class member that you only assign to once, but read many times, you're dealing with <a href=\"https://www.baeldung.com/java-singleton\" rel=\"nofollow noreferrer\">a <em>singleton</em></a>. The singleton pattern is commonly used for access to a shared resource.</p>\n<p>The field is made static but not final; instead when accessing the field, the code checks whether it has been initialised already, if not, it is done then and there. Note that in environments with multiple threads, you need to synchronise access to the field, to avoid accessing it while it is initialising.</p>\n"}],"owner":{"account_id":179971,"reputation":12625,"user_id":412992,"accept_rate":63,"display_name":"Yaron Levi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109525,"favorite_count":0,"down_vote_count":2,"up_vote_count":92,"accepted_answer_id":5093797,"answer_count":8,"score":90,"last_activity_date":1683214598,"creation_date":1298478526,"question_id":5093744,"body_markdown":"    public class A \r\n    {    \r\n        private static final int x;\r\n    \r\n        public A() \r\n        {\r\n            x = 5;\r\n        }\r\n    }\r\n\r\n* `final` means the variable can only be assigned once (in the constructor).\r\n* `static` means it&#39;s a class instance.\r\n\r\nI can&#39;t see why this is prohibited. Where do those keywords interfere with each other?","title":"Initialize a static final field in the constructor","body":"<pre><code>public class A \n{    \n    private static final int x;\n\n    public A() \n    {\n        x = 5;\n    }\n}\n</code></pre>\n\n<ul>\n<li><code>final</code> means the variable can only be assigned once (in the constructor).</li>\n<li><code>static</code> means it's a class instance.</li>\n</ul>\n\n<p>I can't see why this is prohibited. Where do those keywords interfere with each other?</p>\n"},{"tags":["java","rest","error-handling","swagger","swagger-codegen"],"answers":[{"tags":[],"owner":{"account_id":26528740,"reputation":367,"user_id":20161294,"display_name":"v-g"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1683214415,"creation_date":1683214415,"answer_id":76174919,"question_id":68925665,"body_markdown":"According to Swagger official [documentation][1]:\r\n\r\n&gt; Swagger is a set of open-source tools built around the OpenAPI Specification that can help you design, build, document and consume REST APIs.\r\n\r\nRepresentational state transfert architectural style enforce a set of several constraints. One of them is having a uniform interface, which itself involve several other constraints, especialy resource manipulation through representations of effective server data. \r\n\r\nThe way Swagger is built is to enforce at best thoses constraints for building REST APIs, it would violate REST principles if the API would return a representation of another resource if the original request was to create, read, modify or suppress a ressource from the original server.\r\n\r\nThere is therfore no proper way to return different objects for different response codes in Swagger-generated REST API.\r\n\r\n  [1]: https://swagger.io/docs/specification/about/","title":"How to return different objects for different response codes in Swagger-generated REST API?","body":"<p>According to Swagger official <a href=\"https://swagger.io/docs/specification/about/\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>Swagger is a set of open-source tools built around the OpenAPI Specification that can help you design, build, document and consume REST APIs.</p>\n</blockquote>\n<p>Representational state transfert architectural style enforce a set of several constraints. One of them is having a uniform interface, which itself involve several other constraints, especialy resource manipulation through representations of effective server data.</p>\n<p>The way Swagger is built is to enforce at best thoses constraints for building REST APIs, it would violate REST principles if the API would return a representation of another resource if the original request was to create, read, modify or suppress a ressource from the original server.</p>\n<p>There is therfore no proper way to return different objects for different response codes in Swagger-generated REST API.</p>\n"}],"owner":{"account_id":23088,"reputation":22410,"user_id":57601,"accept_rate":100,"display_name":"Kosi2801"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1008,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1683214415,"creation_date":1629904960,"question_id":68925665,"body_markdown":"I want to respond with different result objects in a Swagger generated API. The type of object is dependent on the result code.\r\nBut it seems that the Swagger codegen generates only code that allows the first defined/used type to be returned.\r\n\r\nAn example Swagger definition that returns different objects in the OK and error case is like:\r\n```\r\nswagger: &quot;2.0&quot;\r\ninfo:\r\n  description: &quot;API&quot;\r\n  version: 1.0.0\r\n  title: Example\r\nhost: localhost:8080\r\n\r\nschemes:\r\n  - http\r\n\r\npaths:\r\n  /exampleCall:\r\n    get:\r\n      operationId: exampleCall\r\n      produces:\r\n        -  application/json\r\n      responses:\r\n        200:\r\n          description: OK\r\n          schema:\r\n            $ref: &#39;#/definitions/exampleResponse&#39;\r\n        400:\r\n          description: Error\r\n          schema:\r\n            $ref: &#39;#/definitions/exampleError&#39;\r\ndefinitions:\r\n  exampleResponse:\r\n    type: object\r\n    properties:\r\n      result:\r\n        type: string\r\n  exampleError:\r\n    type: object\r\n    properties:\r\n      code:\r\n        type: string\r\n```\r\n\r\nThis then gets generated by the SwaggerCodeGen into following API interface\r\n```\r\n@Validated\r\n@Api(value = &quot;exampleCall&quot;, description = &quot;the exampleCall API&quot;)\r\n@RequestMapping(value = &quot;&quot;)\r\npublic interface ExampleCallApi {\r\n\r\n    ExampleCallApiDelegate getDelegate();\r\n\r\n    @ApiOperation(value = &quot;&quot;, nickname = &quot;exampleCall&quot;, notes = &quot;&quot;, response = ExampleResponse.class, tags={  })\r\n    @ApiResponses(value = { \r\n        @ApiResponse(code = 200, message = &quot;OK&quot;, response = ExampleResponse.class),\r\n        @ApiResponse(code = 400, message = &quot;Error&quot;, response = ExampleError.class) })\r\n    @RequestMapping(value = &quot;/exampleCall&quot;,\r\n        produces = { &quot;application/json&quot; }, \r\n        method = RequestMethod.GET)\r\n    default ResponseEntity&lt;ExampleResponse&gt; exampleCall() {\r\n        return getDelegate().exampleCall();\r\n    }\r\n}\r\n\r\n```\r\n\r\nBut when I try to implement the delegate like this\r\n```\r\npublic class ExampleCallApiDelegateImpl implements ExampleCallApiDelegate {\r\n\r\n    @Override\r\n    public ResponseEntity&lt;ExampleResponse&gt; exampleCall() {\r\n        ExampleError error = new ExampleError();\r\n        error.setCode(&quot;123&quot;);\r\n        return new ResponseEntity&lt;ExampleError&gt;(error, HttpStatus.BAD_REQUEST);\r\n    }\r\n}\r\n```\r\nit of course fails to compile because of incorrect return types.\r\n\r\nWhat would be the proper way to implement different return objects per response code with that Swagger generated API?\r\nIs there even a proper way?\r\n","title":"How to return different objects for different response codes in Swagger-generated REST API?","body":"<p>I want to respond with different result objects in a Swagger generated API. The type of object is dependent on the result code.\nBut it seems that the Swagger codegen generates only code that allows the first defined/used type to be returned.</p>\n<p>An example Swagger definition that returns different objects in the OK and error case is like:</p>\n<pre><code>swagger: &quot;2.0&quot;\ninfo:\n  description: &quot;API&quot;\n  version: 1.0.0\n  title: Example\nhost: localhost:8080\n\nschemes:\n  - http\n\npaths:\n  /exampleCall:\n    get:\n      operationId: exampleCall\n      produces:\n        -  application/json\n      responses:\n        200:\n          description: OK\n          schema:\n            $ref: '#/definitions/exampleResponse'\n        400:\n          description: Error\n          schema:\n            $ref: '#/definitions/exampleError'\ndefinitions:\n  exampleResponse:\n    type: object\n    properties:\n      result:\n        type: string\n  exampleError:\n    type: object\n    properties:\n      code:\n        type: string\n</code></pre>\n<p>This then gets generated by the SwaggerCodeGen into following API interface</p>\n<pre><code>@Validated\n@Api(value = &quot;exampleCall&quot;, description = &quot;the exampleCall API&quot;)\n@RequestMapping(value = &quot;&quot;)\npublic interface ExampleCallApi {\n\n    ExampleCallApiDelegate getDelegate();\n\n    @ApiOperation(value = &quot;&quot;, nickname = &quot;exampleCall&quot;, notes = &quot;&quot;, response = ExampleResponse.class, tags={  })\n    @ApiResponses(value = { \n        @ApiResponse(code = 200, message = &quot;OK&quot;, response = ExampleResponse.class),\n        @ApiResponse(code = 400, message = &quot;Error&quot;, response = ExampleError.class) })\n    @RequestMapping(value = &quot;/exampleCall&quot;,\n        produces = { &quot;application/json&quot; }, \n        method = RequestMethod.GET)\n    default ResponseEntity&lt;ExampleResponse&gt; exampleCall() {\n        return getDelegate().exampleCall();\n    }\n}\n\n</code></pre>\n<p>But when I try to implement the delegate like this</p>\n<pre><code>public class ExampleCallApiDelegateImpl implements ExampleCallApiDelegate {\n\n    @Override\n    public ResponseEntity&lt;ExampleResponse&gt; exampleCall() {\n        ExampleError error = new ExampleError();\n        error.setCode(&quot;123&quot;);\n        return new ResponseEntity&lt;ExampleError&gt;(error, HttpStatus.BAD_REQUEST);\n    }\n}\n</code></pre>\n<p>it of course fails to compile because of incorrect return types.</p>\n<p>What would be the proper way to implement different return objects per response code with that Swagger generated API?\nIs there even a proper way?</p>\n"},{"tags":["java","spring-batch"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683159254,"post_id":76168187,"comment_id":134325329,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":13775925,"reputation":71,"user_id":9942276,"display_name":"Atul Lohiya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683214354,"creation_date":1683150324,"question_id":76168187,"body_markdown":"**My usecase**:\r\nI need to read data from an oracle database and load it to multiple SQL server DBs located on different servers. To keep the design and code generic and scalable, the list of tables to read and the list of servers where they should be loaded is kept in DB.\r\n\r\n**Note that there are multiple servers involved and not just multiple DBs on a single server**. So datasource would be different for each writer. \r\n\r\n**My strategy**:\r\nMy strategy was to create a job with one step each for a table. Each step thus reads one table&#39;s data in chunks then writes it to all servers. Thus when one step completes, its data would have been loaded on all servers. This way each step would load one table data to all servers.\r\n\r\n```\r\nStep1: read table1&#39;s chunks -&gt; write each chunk to multiple servers\r\nStep2: read table2&#39;s chunks -&gt; write each chunk to multiple servers\r\n.\r\n.\r\n.\r\nStepN: read tableN&#39;s chunks -&gt; write each chunk to multiple servers\r\n```\r\n\r\n**How to implement above strategy**:\r\nFor this I could use CompositeItemWriter with delegate writers each having its own datasource instance pointing to individual servers. \r\nThus I was thinking and hoping that I would be able to write a single chunk to multiple servers from a single step. But that does not work!\r\n\r\n**The problem with above strategy**:\r\nThe problem is **one step can have only one transaction manager which can have only one datasource**. That means no matter how many writers I have per step, all should be working with the same datasource to connect to the same single server!\r\n\r\nFrom what I have observed so far, if the datasource &quot;**instance**&quot; in transaction manager of step is different from datasource &quot;**instance**&quot; of writer, rollback does not work even if it is just a single writer. With multiple writers having different datasources, rollback only works for the writer whose data source &quot;instance&quot; is same as the one assigned to step&#39;s transaction manager. All other weriters don&#39;t get rolled back leaving DB in insconsistent state. \r\n\r\nJust using same configuration and creating a new datasource instance for manager and writer does not work. The same instance must be used for both.\r\n\r\nBecause of this issue, I am unable to use above strategy.\r\n\r\n**What options do I have for this usecase**?\r\nI came across the ChainedTransactionManager but that can also leave the DB in inconsistent state plus that is deprecated anyway so I cannot use it.\r\n\r\n**What else can I do to ensure all the data is read only once and gets written to all servers**?\r\n\r\n**Constraints**:\r\n1. Data can be read only once from the oracle source DB\r\n2. Please note **I CANNOT use beans** to initialize any datasources/job/steps etc since I don&#39;t know in advance how many tables and servers would be involved. All that is created dynamically for scalability reading needed information from DB.\r\n\r\n\r\n**Sample code explaination**:\r\nFor the POC, I am reading only 15 records from a single table in source DB with a chunk size of 5. Now in SourceRowMapper, for a specific row, I set col3 to null. This column in target SQL server DB is not-null so the insert fails as expected. The write failure should rollback the entire chunk and none of the records from that chunk should be inserted. I would be enabling skipping here so that only the failed records are not written but rest of the records get written to all the servers and which records failed are available for reports.\r\n\r\nAs I explained above, that only works when the data source instance (and not just the configuration) of the step&#39;s transaction manager is same as that was assigned to the writer. If they are not same on a writer, all records from the failing chunk except the problem record get inserted in the table of that server. Only the matching datasource writer gets rolled back correctly.\r\n\r\nNow, if I try to add a skip policy, above issue causes all except problem record to be inserted twice due to chunk scanning after the chunk has failed on first attempt.\r\n\r\nThis only happens when DBMS itself throws some exception. If I try to simulate the failure in code ( search for “Simulating write error” in SampleJob), it all works fine!\r\n\r\nBelow are the code details. I have simplified the code to remove loops etc to load the data to multiple servers.\r\n\r\n**Batch configurer**:\r\n```\r\n@Slf4j\r\n@Configuration\r\n@EnableBatchProcessing\r\npublic class SpringBatchConfig implements BatchConfigurer{\r\n\t\r\n\t@Value(&quot;${spring.datasource.dest.url}&quot;)\r\n\tprivate String destDbUrl;\r\n\r\n\t@Value(&quot;${spring.datasource.dest.driverClassName}&quot;)\r\n\tprivate String destDbDriverClassName;\r\n\t\r\n\t@Value(&quot;${spring.profiles.active:default}&quot;)\r\n\tprivate String activeProfile;\r\n\t\r\n\t@Value(&quot;${spring.batch.use.in-mem.db:false}&quot;)\r\n\tprivate Boolean useInMemDb;\r\n\t\r\n\t@Autowired\r\n\tprivate DataSource dbDataSource;\r\n\t\r\n\tprivate JobRepository jobRepo;\r\n\tprivate PlatformTransactionManager transactionMgr;\r\n\tprivate JobLauncher jobLauncher;\r\n\tprivate JobExplorer jobExplorer;\r\n\t\r\n\t@SuppressWarnings(&quot;deprecation&quot;)\r\n\t@Bean\r\n\t@Override\r\n\tpublic JobRepository getJobRepository() throws Exception {\r\n\r\n\t\tlog.info(&quot;Active profile: {}&quot;, activeProfile);\r\n\t\tPlatformTransactionManager transMgr = getTransactionManager();\r\n\t\t\r\n\t\tif(jobRepo != null)\r\n\t\t\treturn jobRepo;\r\n\t\t\r\n\t\tif(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\r\n\t\t{\r\n\t\t\tlog.info(&quot;Creating in-mem jobRepository bean for SpringBatchConfig with destDbUrl: {}&quot;, destDbUrl); \r\n\t\t\tMapJobRepositoryFactoryBean jobRepoFactory = new MapJobRepositoryFactoryBean(transMgr);\r\n\t\t\tjobRepoFactory.afterPropertiesSet();\r\n\t\t\treturn jobRepo = (JobRepository) jobRepoFactory.getObject();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlog.info(&quot;Creating SQL jobRepository bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\r\n\t\t\t\r\n\t\t\tJobRepositoryFactoryBean factory = new JobRepositoryFactoryBean();\r\n\t\t\tfactory.setDataSource(dbDataSource);\r\n\t\t\tfactory.setTransactionManager(transMgr);\r\n\t\t\tfactory.afterPropertiesSet();\r\n\t\t\tfactory.setDatabaseType(&quot;SQLSERVER&quot;);\r\n\t\t\tfactory.setTablePrefix(&quot;dbo.BATCH_&quot;);\r\n\t\t\tfactory.setIsolationLevelForCreate(&quot;ISOLATION_SERIALIZABLE&quot;);\r\n\t\t\treturn jobRepo = (JobRepository) factory.getObject();\r\n\t\t}\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic PlatformTransactionManager getTransactionManager() throws SQLException {\r\n\t\t\r\n\t\tif(transactionMgr != null)\r\n\t\t\treturn transactionMgr;\r\n\t\t\r\n\t\tif(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\r\n\t\t{\r\n\t\t\tlog.info(&quot;Getting resourceless transaction manager for in-mem jobRepository&quot;);\r\n\t\t\treturn transactionMgr = new ResourcelessTransactionManager();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlog.info(&quot;Getting transaction manager for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\r\n\t\t\treturn transactionMgr = new DataSourceTransactionManager(dbDataSource);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\t@Bean(name = &quot;jobLauncher&quot;)\r\n\tpublic JobLauncher getJobLauncher() throws Exception {\r\n\t\tlog.info(&quot;Creating jobLauncher bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\r\n\t\t\r\n\t\tif(this.jobLauncher != null)\r\n\t\t\treturn this.jobLauncher;\r\n\t\t\r\n\t\tSimpleJobLauncher jobLauncher = new SimpleJobLauncher();\r\n\t\tjobLauncher.setJobRepository(getJobRepository());\r\n\t\tjobLauncher.afterPropertiesSet();\r\n\t\treturn this.jobLauncher = jobLauncher;\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;deprecation&quot;)\r\n\t@Override\r\n\t@Bean(name = &quot;jobExplorer&quot;)\r\n\tpublic JobExplorer getJobExplorer() throws Exception {\r\n\t\t\r\n\t\tif(jobExplorer != null)\r\n\t\t\treturn jobExplorer;\r\n\t\t\r\n\t\tif(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\r\n\t\t{\r\n\t\t\tlog.info(&quot;Creating jobExplorer bean for in-mem repo&quot;);\r\n\t\t\tMapJobRepositoryFactoryBean jobRepoFactory = new MapJobRepositoryFactoryBean(getTransactionManager());\r\n\t\t\tjobRepoFactory.afterPropertiesSet();\r\n\t\t\t\r\n\t\t\tMapJobExplorerFactoryBean explorerFactory = new MapJobExplorerFactoryBean(jobRepoFactory);\r\n\t\t\texplorerFactory.afterPropertiesSet();\r\n\t\t\t\r\n\t\t\treturn jobExplorer = explorerFactory.getObject();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlog.info(&quot;Creating jobExplorer bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\r\n\t\t\tJobExplorerFactoryBean explorerFactory = new JobExplorerFactoryBean();\r\n\t\t\texplorerFactory.setDataSource(dbDataSource);\r\n\t\t\texplorerFactory.afterPropertiesSet();\r\n\t\t\treturn jobExplorer = explorerFactory.getObject();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n**Job/Step creation for the strategy I explained above**:\r\n```\r\n@Slf4j\r\n@Configuration\r\npublic class SampleJob {\r\n\r\n\t@Autowired\r\n\tprivate JobBuilderFactory jobBuilderFactory;\r\n\r\n\t@Autowired\r\n\tprivate StepBuilderFactory stepBuilderFactory;\r\n\r\n\t@Autowired\r\n\t@Qualifier(&quot;sourceDBTemplate&quot;)\r\n\tprivate JdbcTemplate sourceDBTemplate;\r\n\t\r\n\t@Value(&quot;${spring.datasource.src.schema}&quot;)\r\n\tprivate String schema;\r\n\r\n\t@Autowired\r\n\t@Qualifier(&quot;jobLauncher&quot;)\r\n\tprivate JobLauncher jobLauncher;\r\n\t\r\n\t@Autowired\r\n\tprivate DatabaseConfigurations dbConfig;\r\n\t\r\n\t@Autowired\r\n\tprivate DBJobExecutionListener jobExecutionListener;\r\n\r\n\tpublic void startJob() throws Exception {\r\n\t\t\r\n\t\tMap&lt;String, JobParameter&gt; jobConfigMap = new HashMap&lt;&gt;();\r\n\t\tjobConfigMap.put(&quot;time&quot;, new JobParameter(System.currentTimeMillis()));\r\n\t\tJobParameters parameters = new JobParameters(jobConfigMap);\r\n\r\n\t\ttry \r\n\t\t{\t\t\t\t\t\t\r\n\t\t\tjobLauncher.run(getJob(), parameters);\r\n\t\t\t\r\n\t\t}catch (JobExecutionAlreadyRunningException | JobRestartException | JobInstanceAlreadyCompleteException\r\n\t\t\t\t| JobParametersInvalidException e) {\r\n\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic Job getJob(List&lt;Table&gt; tables) throws Exception {\r\n\t\tClock currentClock = Clock.systemUTC();\r\n\t\tOffsetDateTime odt = OffsetDateTime.ofInstant(Instant.now(currentClock), currentClock.getZone());\r\n\t\tString jobName = &quot;DataRep_&quot;+odt.format(DateTimeFormatter.ofPattern(&quot;yyyyMMddhhmmss&quot;));\r\n\t\t\r\n\t\tlog.info(&quot;Creating job {}; timezone: {}&quot;, jobName, currentClock.getZone().toString() + &quot;--&quot; + currentClock.getZone().getId() + &quot;--&quot; + currentClock.getZone().getDisplayName(TextStyle.FULL, Locale.getDefault()));\r\n\t\t\r\n\t\tJobBuilder builder = jobBuilderFactory.get(jobName).listener(jobExecutionListener);\r\n\t\t\r\n\t\tSimpleJobBuilder sjb = builder.start(getStep(&quot;sourceTable&quot;));\r\n\t\t\r\n\t\t//loop through list of tables to add a step per table; this is the reason I need to do things dynamically without beans; this is non-negotiable. I have simplified the code here to remove complex loops etc for clarity. It is just that whatever code has been presented here would just run in loop and a few other things that get some meta info dynamically to create the steps.\r\n\t\t/*for(int index = 1; index &lt; tables.size(); index++)\r\n\t\t{\r\n\t\t\tsjb.next(getStep(tables.get(index)));\r\n\t\t}*/\r\n\t\t\r\n\t\treturn sjb.build();\r\n\t}\r\n\r\n\tprivate Step getStep(String table) throws Exception {\r\n\t\tlog.info(&quot;Getting step for table {}&quot;, table);\r\n\r\n\t\t//needed to ensure same datasource instance from writer is assigned to transaction manager. This is still a problem as multiple writers would have different datasources for different servers! So what options do I have?\r\n\t\tDataSourceWrapper dsw = new DataSourceWrapper();\r\n\t\t\r\n\t\tSimpleStepBuilder&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt; sb = stepBuilderFactory.get(&quot;Copy &quot;+table)\r\n\t\t\t\t.&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;chunk(5)\r\n\t\t\t\t.reader(getItemReader(table))\r\n\t\t\t\t.writer(getItemWriter(table, dsw));\t//this should write the same chunk to multiple servers; If not then what options do I have?\r\n//\t\t\t\t.faultTolerant()\r\n//\t\t\t\t.noRetry(Exception.class);\r\n//\t\t\t\t.retryPolicy( new NeverRetryPolicy());\r\n//\t\t\t\t.skip(Exception.class)\r\n//\t\t\t\t.skipLimit(Integer.MAX_VALUE)\r\n//\t\t\t\t.skipPolicy(new AlwaysSkipItemSkipPolicy())\r\n//\t\t\t\t.listener(new DBReplicationSkipListener&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;());\r\n\t\t\r\n//\t\tsb.listener(new DBStepExecutionListener());\r\n//\t\tsb.listener(new DBItemReadListener&lt;Map&lt;String, Object&gt;&gt;())\r\n//\t\t\t.listener(new DBItemProcessListener&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;())\r\n//\t\t\t.listener(new DBItemWriteListener&lt;Map&lt;String, Object&gt;&gt;())\r\n//\t\t\t.listener(new DBChunkListener());\r\n\r\n\t\t//use same datasource from writer\r\n\t\tsb.transactionManager(new DataSourceTransactionManager(dsw.ds));\r\n\t\treturn sb.build();\r\n\r\n\t}\r\n\r\n\tpublic JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt; getItemReader(String table) {\r\n\t\tlog.info(&quot;Creating item reader for table {}&quot;, table);\r\n\r\n\t\tJdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt; jdbcCIR = new JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt;();\r\n\t\tjdbcCIR.setDataSource(sourceDBTemplate.getDataSource());\r\n\t\tjdbcCIR.setSql(String.format(&quot;select col1, col2, col3, col4, col5 from %1$s order by col1 asc&quot;, table));\r\n\t\tjdbcCIR.setRowMapper(new SourceRowMapper());\r\n\t\tjdbcCIR.setMaxItemCount(15);\t//with chunk size of 5, 3 chunks would be created\r\n\r\n\t\treturn jdbcCIR;\r\n\t}\r\n\t\t\r\n\r\n\t//THis function would loop through the list of servers to create a CompositeItemWriter. Below code is simplified for clarity here.\r\n\tpublic JdbcBatchItemWriter&lt;Map&lt;String, Object&gt;&gt; getItemWriter(String sourceTable, String table, DataSourceWrapper dsw) {\r\n\t\tlog.info(&quot;Creating item writer for table {}&quot;, sourceTable);\r\n\r\n\t\tJdbcBatchItemWriterBuilder&lt;Map&lt;String, Object&gt;&gt; jdbcBatchItemWriter = new JdbcBatchItemWriterBuilder&lt;Map&lt;String, Object&gt;&gt;();\r\n\t\t\t\t\r\n\t\tDataSource destinationDataSource = dbConfig.getDestinationDataSource(table);\r\n\t\t\r\n\t\tString query = String.format(&quot;insert into %1$s(col_1, col_2, col_3, col_4, col_5) values(:col1, :col2, :col3, :col4, :col5)&quot;, table);\r\n\t\tlog.info(&quot;Insert query: {}&quot;,query);\r\n\t\t\r\n\t\t//here would be the loop for multiple servers; here I have removed it for clarity\r\n\t\tjdbcBatchItemWriter\r\n\t\t\t.dataSource(dsw.ds = destinationDataSource)\r\n\t\t\t.sql(query)\r\n\t\t\t.itemSqlParameterSourceProvider(item -&gt; {\r\n\t\t\t\t\tMapSqlParameterSource paramSource = new MapSqlParameterSource();\r\n\t\t\t\t\tparamSource.addValues(item);\r\n\t\t\t\t\t\r\n\t\t\t\t\tint id = (int)item.get(&quot;col1&quot;);\r\n\t\t\t\t\tlog.info(&quot;Getting sql param source for writing item {}&quot;, id);\r\n\r\n//\t\t\t\t\tif(id == 45678)\r\n//\t\t\t\t\t{\r\n//\t\t\t\t\t\tlog.info(&quot;Simulating write error for item {}&quot;, id);\r\n//\t\t\t\t\t\tObject tempObj = null;\r\n//\t\t\t\t\t\tlog.info(&quot;Id is {}&quot;, tempObj.toString())\r\n//\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn paramSource;\r\n\t\t\t\t});\r\n\r\n\t\tJdbcBatchItemWriter&lt;Map&lt;String, Object&gt;&gt; writer = jdbcBatchItemWriter.build();\r\n\t\twriter.afterPropertiesSet();\r\n\t\t\r\n\t\treturn writer;\r\n\t}\r\n\t\r\n\tprivate static class DataSourceWrapper\r\n\t{\r\n\t\tpublic DataSource ds;\r\n\t\tpublic DataSourceWrapper()\r\n\t\t{}\r\n\t\tpublic DataSourceWrapper(DataSource ds)\r\n\t\t{\r\n\t\t\tthis.ds = ds;\r\n\t\t}\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n@Slf4j\r\npublic class SourceRowMapper implements RowMapper&lt;Map&lt;String, Object&gt;&gt;{\r\n\t\r\n\t@Override\r\n\tpublic Map&lt;String, Object&gt; mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n\t\t\r\n\t\tlog.info(String.format(&quot;Reading row# %1$s&quot;, rowNum));\r\n\r\n\t\tMap&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\r\n\t\t\r\n\t\tString column;\r\n\t\tObject id = null, val = null;\r\n\t\t\t\r\n\t\tcolumn = &quot;col1&quot;;\r\n\t\tval = rs.getObject(column);\r\n\t\tid = val;\r\n\t\tmap.put(column, val);\r\n\r\n\t\tcolumn = &quot;col2&quot;;\r\n\t\tval = rs.getObject(column);\r\n\t\tmap.put(column, val);\r\n\r\n\t\tcolumn = &quot;col3&quot;;\r\n\t\tval = rs.getObject(column);\r\n\r\n\t\tif(id.toString().equals(&quot;78787&quot;))\r\n\t\t{\r\n\t\t\tlog.info(&quot;setting val to null for non-null column col3 for id {}&quot;, id.toString());\r\n\t\t\tval = null;\r\n\t\t}\r\n\t\tmap.put(column, val);\r\n\r\n\t\tcolumn = &quot;col4&quot;;\r\n\t\tval = rs.getObject(column);\r\n\t\tmap.put(column, val);\r\n\r\n\t\tcolumn = &quot;col5&quot;;\r\n\t\tval = rs.getObject(column);\r\n\t\tmap.put(column, val);\r\n\t\t\r\n\t\treturn map;\r\n\t}\t\r\n}\r\n```\r\n\r\n**What I have tried**:\r\nI have tried various combinations of lines that I commented while creating the step in above sample. I even debugged batch code itself but can&#39;t get to the root of it nor can I find a solution to it. I checked the FaultTolerantChunkProcessor as explained in one of the links below. But my problem happens even when I have not called faultTolerant() on step!\r\n\r\nA few links from a lot of them that I tried to figure out why transaction was not getting rolled back even when there was just one server (different datasource instance issue) and for multiple server handling:\r\n1. https://stackoverflow.com/questions/57793522/how-do-i-prevent-rollback-when-exception-occurs-in-itemwriter#:~:text=If%20exception%20occurs%20on%20any,successfully%20written%20to%20the%20database.\r\n2. https://stackoverflow.com/questions/54628388/spring-batch-rollbacks-the-inserts\r\n3. https://stackoverflow.com/questions/22522681/spring-batch-skip-exception-for-itemwriter\r\n4. https://stackoverflow.com/questions/16567432/how-is-the-skipping-implemented-in-spring-batch\r\n5. https://stackoverflow.com/questions/14115013/can-you-explain-why-transactional-not-rolling-back\r\n6. https://stackoverflow.com/questions/40173587/spring-transaction-not-rolling-back\r\n\r\n7. https://medium.com/swlh/working-with-spring-batch-and-distributed-transaction-772de2219e60\r\n8. https://stackoverflow.com/questions/39629012/parallel-item-writers-in-spring-batch\r\n9. https://stackoverflow.com/questions/75558066/spring-batch-multiple-operations-in-writer","title":"In spring batch, need to write one chunk to mutiple DB servers","body":"<p><strong>My usecase</strong>:\nI need to read data from an oracle database and load it to multiple SQL server DBs located on different servers. To keep the design and code generic and scalable, the list of tables to read and the list of servers where they should be loaded is kept in DB.</p>\n<p><strong>Note that there are multiple servers involved and not just multiple DBs on a single server</strong>. So datasource would be different for each writer.</p>\n<p><strong>My strategy</strong>:\nMy strategy was to create a job with one step each for a table. Each step thus reads one table's data in chunks then writes it to all servers. Thus when one step completes, its data would have been loaded on all servers. This way each step would load one table data to all servers.</p>\n<pre><code>Step1: read table1's chunks -&gt; write each chunk to multiple servers\nStep2: read table2's chunks -&gt; write each chunk to multiple servers\n.\n.\n.\nStepN: read tableN's chunks -&gt; write each chunk to multiple servers\n</code></pre>\n<p><strong>How to implement above strategy</strong>:\nFor this I could use CompositeItemWriter with delegate writers each having its own datasource instance pointing to individual servers.\nThus I was thinking and hoping that I would be able to write a single chunk to multiple servers from a single step. But that does not work!</p>\n<p><strong>The problem with above strategy</strong>:\nThe problem is <strong>one step can have only one transaction manager which can have only one datasource</strong>. That means no matter how many writers I have per step, all should be working with the same datasource to connect to the same single server!</p>\n<p>From what I have observed so far, if the datasource &quot;<strong>instance</strong>&quot; in transaction manager of step is different from datasource &quot;<strong>instance</strong>&quot; of writer, rollback does not work even if it is just a single writer. With multiple writers having different datasources, rollback only works for the writer whose data source &quot;instance&quot; is same as the one assigned to step's transaction manager. All other weriters don't get rolled back leaving DB in insconsistent state.</p>\n<p>Just using same configuration and creating a new datasource instance for manager and writer does not work. The same instance must be used for both.</p>\n<p>Because of this issue, I am unable to use above strategy.</p>\n<p><strong>What options do I have for this usecase</strong>?\nI came across the ChainedTransactionManager but that can also leave the DB in inconsistent state plus that is deprecated anyway so I cannot use it.</p>\n<p><strong>What else can I do to ensure all the data is read only once and gets written to all servers</strong>?</p>\n<p><strong>Constraints</strong>:</p>\n<ol>\n<li>Data can be read only once from the oracle source DB</li>\n<li>Please note <strong>I CANNOT use beans</strong> to initialize any datasources/job/steps etc since I don't know in advance how many tables and servers would be involved. All that is created dynamically for scalability reading needed information from DB.</li>\n</ol>\n<p><strong>Sample code explaination</strong>:\nFor the POC, I am reading only 15 records from a single table in source DB with a chunk size of 5. Now in SourceRowMapper, for a specific row, I set col3 to null. This column in target SQL server DB is not-null so the insert fails as expected. The write failure should rollback the entire chunk and none of the records from that chunk should be inserted. I would be enabling skipping here so that only the failed records are not written but rest of the records get written to all the servers and which records failed are available for reports.</p>\n<p>As I explained above, that only works when the data source instance (and not just the configuration) of the step's transaction manager is same as that was assigned to the writer. If they are not same on a writer, all records from the failing chunk except the problem record get inserted in the table of that server. Only the matching datasource writer gets rolled back correctly.</p>\n<p>Now, if I try to add a skip policy, above issue causes all except problem record to be inserted twice due to chunk scanning after the chunk has failed on first attempt.</p>\n<p>This only happens when DBMS itself throws some exception. If I try to simulate the failure in code ( search for “Simulating write error” in SampleJob), it all works fine!</p>\n<p>Below are the code details. I have simplified the code to remove loops etc to load the data to multiple servers.</p>\n<p><strong>Batch configurer</strong>:</p>\n<pre><code>@Slf4j\n@Configuration\n@EnableBatchProcessing\npublic class SpringBatchConfig implements BatchConfigurer{\n    \n    @Value(&quot;${spring.datasource.dest.url}&quot;)\n    private String destDbUrl;\n\n    @Value(&quot;${spring.datasource.dest.driverClassName}&quot;)\n    private String destDbDriverClassName;\n    \n    @Value(&quot;${spring.profiles.active:default}&quot;)\n    private String activeProfile;\n    \n    @Value(&quot;${spring.batch.use.in-mem.db:false}&quot;)\n    private Boolean useInMemDb;\n    \n    @Autowired\n    private DataSource dbDataSource;\n    \n    private JobRepository jobRepo;\n    private PlatformTransactionManager transactionMgr;\n    private JobLauncher jobLauncher;\n    private JobExplorer jobExplorer;\n    \n    @SuppressWarnings(&quot;deprecation&quot;)\n    @Bean\n    @Override\n    public JobRepository getJobRepository() throws Exception {\n\n        log.info(&quot;Active profile: {}&quot;, activeProfile);\n        PlatformTransactionManager transMgr = getTransactionManager();\n        \n        if(jobRepo != null)\n            return jobRepo;\n        \n        if(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\n        {\n            log.info(&quot;Creating in-mem jobRepository bean for SpringBatchConfig with destDbUrl: {}&quot;, destDbUrl); \n            MapJobRepositoryFactoryBean jobRepoFactory = new MapJobRepositoryFactoryBean(transMgr);\n            jobRepoFactory.afterPropertiesSet();\n            return jobRepo = (JobRepository) jobRepoFactory.getObject();\n        }\n        else\n        {\n            log.info(&quot;Creating SQL jobRepository bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\n            \n            JobRepositoryFactoryBean factory = new JobRepositoryFactoryBean();\n            factory.setDataSource(dbDataSource);\n            factory.setTransactionManager(transMgr);\n            factory.afterPropertiesSet();\n            factory.setDatabaseType(&quot;SQLSERVER&quot;);\n            factory.setTablePrefix(&quot;dbo.BATCH_&quot;);\n            factory.setIsolationLevelForCreate(&quot;ISOLATION_SERIALIZABLE&quot;);\n            return jobRepo = (JobRepository) factory.getObject();\n        }\n    }\n    \n    @Override\n    public PlatformTransactionManager getTransactionManager() throws SQLException {\n        \n        if(transactionMgr != null)\n            return transactionMgr;\n        \n        if(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\n        {\n            log.info(&quot;Getting resourceless transaction manager for in-mem jobRepository&quot;);\n            return transactionMgr = new ResourcelessTransactionManager();\n        }\n        else\n        {\n            log.info(&quot;Getting transaction manager for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\n            return transactionMgr = new DataSourceTransactionManager(dbDataSource);\n        }\n    }\n\n    @Override\n    @Bean(name = &quot;jobLauncher&quot;)\n    public JobLauncher getJobLauncher() throws Exception {\n        log.info(&quot;Creating jobLauncher bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\n        \n        if(this.jobLauncher != null)\n            return this.jobLauncher;\n        \n        SimpleJobLauncher jobLauncher = new SimpleJobLauncher();\n        jobLauncher.setJobRepository(getJobRepository());\n        jobLauncher.afterPropertiesSet();\n        return this.jobLauncher = jobLauncher;\n    }\n\n    @SuppressWarnings(&quot;deprecation&quot;)\n    @Override\n    @Bean(name = &quot;jobExplorer&quot;)\n    public JobExplorer getJobExplorer() throws Exception {\n        \n        if(jobExplorer != null)\n            return jobExplorer;\n        \n        if(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\n        {\n            log.info(&quot;Creating jobExplorer bean for in-mem repo&quot;);\n            MapJobRepositoryFactoryBean jobRepoFactory = new MapJobRepositoryFactoryBean(getTransactionManager());\n            jobRepoFactory.afterPropertiesSet();\n            \n            MapJobExplorerFactoryBean explorerFactory = new MapJobExplorerFactoryBean(jobRepoFactory);\n            explorerFactory.afterPropertiesSet();\n            \n            return jobExplorer = explorerFactory.getObject();\n        }\n        else\n        {\n            log.info(&quot;Creating jobExplorer bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\n            JobExplorerFactoryBean explorerFactory = new JobExplorerFactoryBean();\n            explorerFactory.setDataSource(dbDataSource);\n            explorerFactory.afterPropertiesSet();\n            return jobExplorer = explorerFactory.getObject();\n        }\n    }\n\n}\n</code></pre>\n<p><strong>Job/Step creation for the strategy I explained above</strong>:</p>\n<pre><code>@Slf4j\n@Configuration\npublic class SampleJob {\n\n    @Autowired\n    private JobBuilderFactory jobBuilderFactory;\n\n    @Autowired\n    private StepBuilderFactory stepBuilderFactory;\n\n    @Autowired\n    @Qualifier(&quot;sourceDBTemplate&quot;)\n    private JdbcTemplate sourceDBTemplate;\n    \n    @Value(&quot;${spring.datasource.src.schema}&quot;)\n    private String schema;\n\n    @Autowired\n    @Qualifier(&quot;jobLauncher&quot;)\n    private JobLauncher jobLauncher;\n    \n    @Autowired\n    private DatabaseConfigurations dbConfig;\n    \n    @Autowired\n    private DBJobExecutionListener jobExecutionListener;\n\n    public void startJob() throws Exception {\n        \n        Map&lt;String, JobParameter&gt; jobConfigMap = new HashMap&lt;&gt;();\n        jobConfigMap.put(&quot;time&quot;, new JobParameter(System.currentTimeMillis()));\n        JobParameters parameters = new JobParameters(jobConfigMap);\n\n        try \n        {                       \n            jobLauncher.run(getJob(), parameters);\n            \n        }catch (JobExecutionAlreadyRunningException | JobRestartException | JobInstanceAlreadyCompleteException\n                | JobParametersInvalidException e) {\n\n            e.printStackTrace();\n        }\n    }\n\n    public Job getJob(List&lt;Table&gt; tables) throws Exception {\n        Clock currentClock = Clock.systemUTC();\n        OffsetDateTime odt = OffsetDateTime.ofInstant(Instant.now(currentClock), currentClock.getZone());\n        String jobName = &quot;DataRep_&quot;+odt.format(DateTimeFormatter.ofPattern(&quot;yyyyMMddhhmmss&quot;));\n        \n        log.info(&quot;Creating job {}; timezone: {}&quot;, jobName, currentClock.getZone().toString() + &quot;--&quot; + currentClock.getZone().getId() + &quot;--&quot; + currentClock.getZone().getDisplayName(TextStyle.FULL, Locale.getDefault()));\n        \n        JobBuilder builder = jobBuilderFactory.get(jobName).listener(jobExecutionListener);\n        \n        SimpleJobBuilder sjb = builder.start(getStep(&quot;sourceTable&quot;));\n        \n        //loop through list of tables to add a step per table; this is the reason I need to do things dynamically without beans; this is non-negotiable. I have simplified the code here to remove complex loops etc for clarity. It is just that whatever code has been presented here would just run in loop and a few other things that get some meta info dynamically to create the steps.\n        /*for(int index = 1; index &lt; tables.size(); index++)\n        {\n            sjb.next(getStep(tables.get(index)));\n        }*/\n        \n        return sjb.build();\n    }\n\n    private Step getStep(String table) throws Exception {\n        log.info(&quot;Getting step for table {}&quot;, table);\n\n        //needed to ensure same datasource instance from writer is assigned to transaction manager. This is still a problem as multiple writers would have different datasources for different servers! So what options do I have?\n        DataSourceWrapper dsw = new DataSourceWrapper();\n        \n        SimpleStepBuilder&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt; sb = stepBuilderFactory.get(&quot;Copy &quot;+table)\n                .&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;chunk(5)\n                .reader(getItemReader(table))\n                .writer(getItemWriter(table, dsw)); //this should write the same chunk to multiple servers; If not then what options do I have?\n//              .faultTolerant()\n//              .noRetry(Exception.class);\n//              .retryPolicy( new NeverRetryPolicy());\n//              .skip(Exception.class)\n//              .skipLimit(Integer.MAX_VALUE)\n//              .skipPolicy(new AlwaysSkipItemSkipPolicy())\n//              .listener(new DBReplicationSkipListener&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;());\n        \n//      sb.listener(new DBStepExecutionListener());\n//      sb.listener(new DBItemReadListener&lt;Map&lt;String, Object&gt;&gt;())\n//          .listener(new DBItemProcessListener&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;())\n//          .listener(new DBItemWriteListener&lt;Map&lt;String, Object&gt;&gt;())\n//          .listener(new DBChunkListener());\n\n        //use same datasource from writer\n        sb.transactionManager(new DataSourceTransactionManager(dsw.ds));\n        return sb.build();\n\n    }\n\n    public JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt; getItemReader(String table) {\n        log.info(&quot;Creating item reader for table {}&quot;, table);\n\n        JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt; jdbcCIR = new JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt;();\n        jdbcCIR.setDataSource(sourceDBTemplate.getDataSource());\n        jdbcCIR.setSql(String.format(&quot;select col1, col2, col3, col4, col5 from %1$s order by col1 asc&quot;, table));\n        jdbcCIR.setRowMapper(new SourceRowMapper());\n        jdbcCIR.setMaxItemCount(15);    //with chunk size of 5, 3 chunks would be created\n\n        return jdbcCIR;\n    }\n        \n\n    //THis function would loop through the list of servers to create a CompositeItemWriter. Below code is simplified for clarity here.\n    public JdbcBatchItemWriter&lt;Map&lt;String, Object&gt;&gt; getItemWriter(String sourceTable, String table, DataSourceWrapper dsw) {\n        log.info(&quot;Creating item writer for table {}&quot;, sourceTable);\n\n        JdbcBatchItemWriterBuilder&lt;Map&lt;String, Object&gt;&gt; jdbcBatchItemWriter = new JdbcBatchItemWriterBuilder&lt;Map&lt;String, Object&gt;&gt;();\n                \n        DataSource destinationDataSource = dbConfig.getDestinationDataSource(table);\n        \n        String query = String.format(&quot;insert into %1$s(col_1, col_2, col_3, col_4, col_5) values(:col1, :col2, :col3, :col4, :col5)&quot;, table);\n        log.info(&quot;Insert query: {}&quot;,query);\n        \n        //here would be the loop for multiple servers; here I have removed it for clarity\n        jdbcBatchItemWriter\n            .dataSource(dsw.ds = destinationDataSource)\n            .sql(query)\n            .itemSqlParameterSourceProvider(item -&gt; {\n                    MapSqlParameterSource paramSource = new MapSqlParameterSource();\n                    paramSource.addValues(item);\n                    \n                    int id = (int)item.get(&quot;col1&quot;);\n                    log.info(&quot;Getting sql param source for writing item {}&quot;, id);\n\n//                  if(id == 45678)\n//                  {\n//                      log.info(&quot;Simulating write error for item {}&quot;, id);\n//                      Object tempObj = null;\n//                      log.info(&quot;Id is {}&quot;, tempObj.toString())\n//                  }\n                    \n                    return paramSource;\n                });\n\n        JdbcBatchItemWriter&lt;Map&lt;String, Object&gt;&gt; writer = jdbcBatchItemWriter.build();\n        writer.afterPropertiesSet();\n        \n        return writer;\n    }\n    \n    private static class DataSourceWrapper\n    {\n        public DataSource ds;\n        public DataSourceWrapper()\n        {}\n        public DataSourceWrapper(DataSource ds)\n        {\n            this.ds = ds;\n        }\n    }\n\n\n}\n\n\n\n\n\n\n\n\n@Slf4j\npublic class SourceRowMapper implements RowMapper&lt;Map&lt;String, Object&gt;&gt;{\n    \n    @Override\n    public Map&lt;String, Object&gt; mapRow(ResultSet rs, int rowNum) throws SQLException {\n        \n        log.info(String.format(&quot;Reading row# %1$s&quot;, rowNum));\n\n        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n        \n        String column;\n        Object id = null, val = null;\n            \n        column = &quot;col1&quot;;\n        val = rs.getObject(column);\n        id = val;\n        map.put(column, val);\n\n        column = &quot;col2&quot;;\n        val = rs.getObject(column);\n        map.put(column, val);\n\n        column = &quot;col3&quot;;\n        val = rs.getObject(column);\n\n        if(id.toString().equals(&quot;78787&quot;))\n        {\n            log.info(&quot;setting val to null for non-null column col3 for id {}&quot;, id.toString());\n            val = null;\n        }\n        map.put(column, val);\n\n        column = &quot;col4&quot;;\n        val = rs.getObject(column);\n        map.put(column, val);\n\n        column = &quot;col5&quot;;\n        val = rs.getObject(column);\n        map.put(column, val);\n        \n        return map;\n    }   \n}\n</code></pre>\n<p><strong>What I have tried</strong>:\nI have tried various combinations of lines that I commented while creating the step in above sample. I even debugged batch code itself but can't get to the root of it nor can I find a solution to it. I checked the FaultTolerantChunkProcessor as explained in one of the links below. But my problem happens even when I have not called faultTolerant() on step!</p>\n<p>A few links from a lot of them that I tried to figure out why transaction was not getting rolled back even when there was just one server (different datasource instance issue) and for multiple server handling:</p>\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/57793522/how-do-i-prevent-rollback-when-exception-occurs-in-itemwriter#:%7E:text=If%20exception%20occurs%20on%20any,successfully%20written%20to%20the%20database\">https://stackoverflow.com/questions/57793522/how-do-i-prevent-rollback-when-exception-occurs-in-itemwriter#:~:text=If%20exception%20occurs%20on%20any,successfully%20written%20to%20the%20database</a>.</p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/54628388/spring-batch-rollbacks-the-inserts\">Spring batch rollbacks the inserts</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/22522681/spring-batch-skip-exception-for-itemwriter\">Spring Batch skip exception for ItemWriter</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/16567432/how-is-the-skipping-implemented-in-spring-batch\">How is the skipping implemented in Spring Batch?</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/14115013/can-you-explain-why-transactional-not-rolling-back\">Can you explain why @Transactional not rolling back</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/40173587/spring-transaction-not-rolling-back\">Spring Transaction not rolling back</a></p>\n</li>\n<li><p><a href=\"https://medium.com/swlh/working-with-spring-batch-and-distributed-transaction-772de2219e60\" rel=\"nofollow noreferrer\">https://medium.com/swlh/working-with-spring-batch-and-distributed-transaction-772de2219e60</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/39629012/parallel-item-writers-in-spring-batch\">Parallel Item Writers in Spring batch</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/75558066/spring-batch-multiple-operations-in-writer\">Spring batch: multiple operations in writer</a></p>\n</li>\n</ol>\n"},{"tags":["java","eclipse","tomcat","xerces"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1542211438,"post_id":53299280,"comment_id":93489360,"body_markdown":"`xercesImpl-2.8.0.jar:?`? Do you have a copy of Xerces in your web app?","body":"<code>xercesImpl-2.8.0.jar:?</code>? Do you have a copy of Xerces in your web app?"},{"owner":{"account_id":7361469,"reputation":175,"user_id":5604617,"display_name":"Bia"},"score":0,"creation_date":1542282881,"post_id":53299280,"comment_id":93517770,"body_markdown":"yes, I have. I even tried to change priorities in Eclipse Build Path Section, using XercesImpl before JRE System Library.","body":"yes, I have. I even tried to change priorities in Eclipse Build Path Section, using XercesImpl before JRE System Library."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1542406902,"post_id":53299280,"comment_id":93571215,"body_markdown":"That might work for a regular Java application, but Tomcat has to load classes from you web app&#39;s jars. Tricks like that won&#39;t work.","body":"That might work for a regular Java application, but Tomcat has to load classes from you web app&#39;s jars. Tricks like that won&#39;t work."},{"owner":{"account_id":14848436,"reputation":156,"user_id":10723168,"display_name":"Chamlal"},"score":0,"creation_date":1581941548,"post_id":53299280,"comment_id":106593413,"body_markdown":"You can check the answer provided in this [post](https://stackoverflow.com/questions/60190084/android-studio-cant-find-property-xmlconstants-access-external-dtd/60253367#60253367)","body":"You can check the answer provided in this <a href=\"https://stackoverflow.com/questions/60190084/android-studio-cant-find-property-xmlconstants-access-external-dtd/60253367#60253367\">post</a>"}],"answers":[{"tags":[],"owner":{"account_id":7330139,"reputation":1030,"user_id":5583341,"display_name":"Michael Glavassevich"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1543003864,"creation_date":1543003864,"answer_id":53452450,"question_id":53299280,"body_markdown":"Apache Xerces-J 2.12.0 and earlier implement older versions of JAXP that do not support either of the properties that you are trying to set. To block access to external entities, you could write an EntityResolver (that always throws a SAXException) and register that EntityResolver with the DocumentBuilder. See documentation here [1].\r\n\r\n[1] http://xerces.apache.org/xerces2-j/javadocs/api/javax/xml/parsers/DocumentBuilder.html#setEntityResolver(org.xml.sax.EntityResolver)","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p>Apache Xerces-J 2.12.0 and earlier implement older versions of JAXP that do not support either of the properties that you are trying to set. To block access to external entities, you could write an EntityResolver (that always throws a SAXException) and register that EntityResolver with the DocumentBuilder. See documentation here [1].</p>\n\n<p>[1] <a href=\"http://xerces.apache.org/xerces2-j/javadocs/api/javax/xml/parsers/DocumentBuilder.html#setEntityResolver(org.xml.sax.EntityResolver)\" rel=\"nofollow noreferrer\">http://xerces.apache.org/xerces2-j/javadocs/api/javax/xml/parsers/DocumentBuilder.html#setEntityResolver(org.xml.sax.EntityResolver)</a></p>\n"},{"tags":[],"owner":{"account_id":15623101,"reputation":2772,"user_id":11271432,"display_name":"Cray"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1591617610,"creation_date":1591617610,"answer_id":62261587,"question_id":53299280,"body_markdown":"`javax.xml.XMLConstants.ACCESS_EXTERNAL_DTD` is defined in [JAXP 1.5][1], but Xerces does not support it. If you can&#39;t remove Xerces dependency, you should add another implementation to your classpath before Xerces. \r\n\r\nAlternatively, since JDK contains an implementation of Xerces you can [configure][2] `DocumentBuilderFactory` to return the JDK version using `System.properties`.\r\n\r\n    System.setProperty(&quot;javax.xml.parsers.DocumentBuilderFactory&quot;,\r\n\t\t\t&quot;com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl&quot;);\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/jaxp/properties/properties.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/DocumentBuilderFactory.html","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p><code>javax.xml.XMLConstants.ACCESS_EXTERNAL_DTD</code> is defined in <a href=\"https://docs.oracle.com/javase/tutorial/jaxp/properties/properties.html\" rel=\"noreferrer\">JAXP 1.5</a>, but Xerces does not support it. If you can't remove Xerces dependency, you should add another implementation to your classpath before Xerces. </p>\n\n<p>Alternatively, since JDK contains an implementation of Xerces you can <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/DocumentBuilderFactory.html\" rel=\"noreferrer\">configure</a> <code>DocumentBuilderFactory</code> to return the JDK version using <code>System.properties</code>.</p>\n\n<pre><code>System.setProperty(\"javax.xml.parsers.DocumentBuilderFactory\",\n        \"com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3267198,"reputation":181,"user_id":2751466,"display_name":"munish sharma"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1595570534,"creation_date":1595570534,"answer_id":63067717,"question_id":53299280,"body_markdown":"The issue is coming due to Xerces/XercesImpl in classpath. Xerces doesn&#39;t provide support for ACCESS_EXTERNAL_DTD property.\r\n\r\nSolution 1. If possible, remove xerces jar from the class path.\r\n\r\nSolution 2. Use JDK default implementation \r\n\r\nDocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance(&quot;com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl&quot;, null);\r\n\r\n\r\n","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p>The issue is coming due to Xerces/XercesImpl in classpath. Xerces doesn't provide support for ACCESS_EXTERNAL_DTD property.</p>\n<p>Solution 1. If possible, remove xerces jar from the class path.</p>\n<p>Solution 2. Use JDK default implementation</p>\n<p>DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance(&quot;com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl&quot;, null);</p>\n"},{"tags":[],"owner":{"account_id":15338321,"reputation":36,"user_id":11066016,"display_name":"Escobar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614094307,"creation_date":1614093991,"answer_id":66336038,"question_id":53299280,"body_markdown":"Our Java project was being built with [Maven][1]. As the team decided to integrate [SonarQube][2] in the pipeline, we faced something similar. &quot;SonarQube doesn&#39;t run your tests or generate reports. It only imports pre-generated reports&quot; (more on that [here][3]). In the case of Java/Kotlin/Scala/JVM, SonarQube needs some &quot;[JaCoCo][4] XML coverage report&quot;. So, we had to add a dependency to our pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;${jacoco.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAfter some tweaking, we had it all up and running. But some tests were failing with &quot;java.lang.IllegalArgumentException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.\r\nat org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(Unknown Source)...&quot;.\r\n\r\nLong story short, the solution was to leave xerces out of the picture, as already stated in other answers:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;${jacoco.version}&lt;/version&gt;\r\n      &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;xerces&lt;/groupId&gt;\r\n          &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\n\r\n  [1]: https://maven.apache.org/\r\n  [2]: https://www.sonarqube.org/\r\n  [3]: https://docs.sonarqube.org/latest/analysis/coverage/\r\n  [4]: https://www.jacoco.org/","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p>Our Java project was being built with <a href=\"https://maven.apache.org/\" rel=\"nofollow noreferrer\">Maven</a>. As the team decided to integrate <a href=\"https://www.sonarqube.org/\" rel=\"nofollow noreferrer\">SonarQube</a> in the pipeline, we faced something similar. &quot;SonarQube doesn't run your tests or generate reports. It only imports pre-generated reports&quot; (more on that <a href=\"https://docs.sonarqube.org/latest/analysis/coverage/\" rel=\"nofollow noreferrer\">here</a>). In the case of Java/Kotlin/Scala/JVM, SonarQube needs some &quot;<a href=\"https://www.jacoco.org/\" rel=\"nofollow noreferrer\">JaCoCo</a> XML coverage report&quot;. So, we had to add a dependency to our pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${jacoco.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>After some tweaking, we had it all up and running. But some tests were failing with &quot;java.lang.IllegalArgumentException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.\nat org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(Unknown Source)...&quot;.</p>\n<p>Long story short, the solution was to leave xerces out of the picture, as already stated in other answers:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${jacoco.version}&lt;/version&gt;\n  &lt;exclusions&gt;\n    &lt;exclusion&gt;\n      &lt;groupId&gt;xerces&lt;/groupId&gt;\n      &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n  &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":7361469,"reputation":175,"user_id":5604617,"display_name":"Bia"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27497,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":4,"score":11,"last_activity_date":1683213832,"creation_date":1542195271,"question_id":53299280,"body_markdown":"I looked for similar posts on this blog, but couldn&#39;t find an answer to my question, so I decided to ask for help.\r\n\r\nI wrote this simple function in Java:\r\n\r\n     public void open(InputStream stream) throws FoliumFatalException {\r\n            try {\r\n                InputSource is = new InputSource(stream);\r\n                DocumentBuilderFactory dfact = DocumentBuilderFactory.newInstance();\r\n                \r\n    //            /* OWASP: inhibit access to External Entities */\r\n                dfact.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;); \r\n                dfact.setAttribute(XMLConstants.ACCESS_EXTERNAL_SCHEMA, &quot;&quot;); \r\n                \r\n                _doc = dfact.newDocumentBuilder().parse(is);\r\n    \r\n            } catch (Throwable t) {\r\n                _logger.error(t, t);\r\n                throw new FoliumFatalException(&quot;ENG-0017&quot;, &quot;Errore di parsing su stream&quot;, t);\r\n            }\r\n    \r\n        }\r\n\r\nMy goal is applying OWASP standards as exposed [here][1], but I get the following error:\r\n\r\n     java.lang.IllegalArgumentException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.\r\n    java.lang.IllegalArgumentException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.\r\n    \tat org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(Unknown Source) ~[xercesImpl-2.8.0.jar:?]\r\n    \tat agora.folium.engine.impl.j2ee.FoliumJ2eeXmlParserImpl.open(FoliumJ2eeXmlParserImpl.java:108) [classes/:?]\r\n    \tat agora.folium.engine.impl.FoliumAbstractEngine.loadServices(FoliumAbstractEngine.java:268) [classes/:?]\r\n    \tat agora.folium.engine.impl.j2ee.FoliumJ2eeEngineImpl.startup(FoliumJ2eeEngineImpl.java:110) [classes/:?]\r\n    \tat agora.folium.engine.Folium.startup(Folium.java:258) [classes/:?]\r\n    \tat agora.folium.control.impl.j2ee.FoliumActionServlet.init(FoliumActionServlet.java:94) [classes/:?]\r\n    \tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1230) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1174) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1066) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5370) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5668) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1015) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:991) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:712) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:2002) [catalina.jar:7.0.85]\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_141]\r\n    \tat java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_141]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [?:1.8.0_141]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [?:1.8.0_141]\r\n    \tat java.lang.Thread.run(Unknown Source) [?:1.8.0_141]\r\n\r\nI&#39;m using Eclipse Oxygen, Tomcat 7 and Java 1.8.\r\n\r\n\r\n  [1]: https://www.owasp.org/index.php/XML_External_Entity_(XXE)_Prevention_Cheat_Sheet#JAXB_Unmarshaller","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p>I looked for similar posts on this blog, but couldn't find an answer to my question, so I decided to ask for help.</p>\n<p>I wrote this simple function in Java:</p>\n<pre><code> public void open(InputStream stream) throws FoliumFatalException {\n        try {\n            InputSource is = new InputSource(stream);\n            DocumentBuilderFactory dfact = DocumentBuilderFactory.newInstance();\n            \n//            /* OWASP: inhibit access to External Entities */\n            dfact.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;); \n            dfact.setAttribute(XMLConstants.ACCESS_EXTERNAL_SCHEMA, &quot;&quot;); \n            \n            _doc = dfact.newDocumentBuilder().parse(is);\n\n        } catch (Throwable t) {\n            _logger.error(t, t);\n            throw new FoliumFatalException(&quot;ENG-0017&quot;, &quot;Errore di parsing su stream&quot;, t);\n        }\n\n    }\n</code></pre>\n<p>My goal is applying OWASP standards as exposed <a href=\"https://www.owasp.org/index.php/XML_External_Entity_(XXE)_Prevention_Cheat_Sheet#JAXB_Unmarshaller\" rel=\"nofollow noreferrer\">here</a>, but I get the following error:</p>\n<pre><code> java.lang.IllegalArgumentException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.\njava.lang.IllegalArgumentException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.\n    at org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(Unknown Source) ~[xercesImpl-2.8.0.jar:?]\n    at agora.folium.engine.impl.j2ee.FoliumJ2eeXmlParserImpl.open(FoliumJ2eeXmlParserImpl.java:108) [classes/:?]\n    at agora.folium.engine.impl.FoliumAbstractEngine.loadServices(FoliumAbstractEngine.java:268) [classes/:?]\n    at agora.folium.engine.impl.j2ee.FoliumJ2eeEngineImpl.startup(FoliumJ2eeEngineImpl.java:110) [classes/:?]\n    at agora.folium.engine.Folium.startup(Folium.java:258) [classes/:?]\n    at agora.folium.control.impl.j2ee.FoliumActionServlet.init(FoliumActionServlet.java:94) [classes/:?]\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1230) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1174) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1066) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5370) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5668) [catalina.jar:7.0.85]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1015) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:991) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) [catalina.jar:7.0.85]\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:712) [catalina.jar:7.0.85]\n    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:2002) [catalina.jar:7.0.85]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_141]\n    at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_141]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [?:1.8.0_141]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [?:1.8.0_141]\n    at java.lang.Thread.run(Unknown Source) [?:1.8.0_141]\n</code></pre>\n<p>I'm using Eclipse Oxygen, Tomcat 7 and Java 1.8.</p>\n"},{"tags":["java","multithreading","deadlock","named-pipes"],"comments":[{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297469511,"post_id":4974989,"comment_id":5554867,"body_markdown":"...and you cannot switch off and not switch off reading? read only if the file is not at the end, otherwise block on `poll` a blocking queue to wait for writes; and ultimately use a single thread. if you are interested i can show a snippet; however I have no xp w/ named pipes like that and a simple socket is 10 times easy to manage","body":"...and you cannot switch off and not switch off reading? read only if the file is not at the end, otherwise block on <code>poll</code> a blocking queue to wait for writes; and ultimately use a single thread. if you are interested i can show a snippet; however I have no xp w/ named pipes like that and a simple socket is 10 times easy to manage"},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":0,"creation_date":1297477731,"post_id":4974989,"comment_id":5555620,"body_markdown":"It might help to use JVisualVM to see whether you thread(s) are blocked at the O/S level or on a Java synchronization acquisition.","body":"It might help to use JVisualVM to see whether you thread(s) are blocked at the O/S level or on a Java synchronization acquisition."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1297502480,"post_id":4974989,"comment_id":5557472,"body_markdown":"Rather than using a named pipe, you might find using sockets is more scalable (named pipes are implemented using sockets in Windows anyway)  You will find more examples of how to use them (as they used more often) which should help you.","body":"Rather than using a named pipe, you might find using sockets is more scalable (named pipes are implemented using sockets in Windows anyway)  You will find more examples of how to use them (as they used more often) which should help you."},{"owner":{"account_id":235404,"reputation":12034,"user_id":502194,"display_name":"Chris Dickson"},"score":0,"creation_date":1297766872,"post_id":4974989,"comment_id":5590919,"body_markdown":"@Peter Lawrey: Named pipes in Windows are NOT implemented using sockets. When both client and server are on the same machine, they use shared memory for IPC and are extremely fast.","body":"@Peter Lawrey: Named pipes in Windows are NOT implemented using sockets. When both client and server are on the same machine, they use shared memory for IPC and are extremely fast."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1297774386,"post_id":4974989,"comment_id":5592347,"body_markdown":"@Chris, I must have been reading bad/old information. Has this always been the case in Windows?  Using them in Java on Vista doesn&#39;t appear to be faster.","body":"@Chris, I must have been reading bad/old information. Has this always been the case in Windows?  Using them in Java on Vista doesn&#39;t appear to be faster."},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":1,"creation_date":1299265820,"post_id":4974989,"comment_id":5843122,"body_markdown":"@Peter, Java pipes (nio ones) are implemented via sockets on Windows and with OS pipes on Linux. Windows native named pipes are not sockets and their impl. does not depend on winsock. It&#39;s just java that doesn&#39;t use them since it&#39;s not possible to register the same selector for sockets and windows pipes.","body":"@Peter, Java pipes (nio ones) are implemented via sockets on Windows and with OS pipes on Linux. Windows native named pipes are not sockets and their impl. does not depend on winsock. It&#39;s just java that doesn&#39;t use them since it&#39;s not possible to register the same selector for sockets and windows pipes."},{"owner":{"account_id":135358,"reputation":31,"user_id":1844109,"display_name":"Mayank Varshney"},"score":0,"creation_date":1353564882,"post_id":4974989,"comment_id":75713633,"body_markdown":"This is the link which you can use for Named pipe implementation :\nhttp://sonalimendis.blogspot.in/2010/10/named-pipes-for-inter-process.html","body":"This is the link which you can use for Named pipe implementation : <a href=\"http://sonalimendis.blogspot.in/2010/10/named-pipes-for-inter-process.html\" rel=\"nofollow noreferrer\">sonalimendis.blogspot.in/2010/10/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1297476052,"creation_date":1297476052,"answer_id":4975840,"question_id":4974989,"body_markdown":"I suppose that `RandomAccessFile` is not the right API here. Try a FileInputStream + FileOutputStream on the Java side. But that is only a guess, as I last used the Windows API in times when named pipes didn&#39;t yet exist.","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>I suppose that <code>RandomAccessFile</code> is not the right API here. Try a FileInputStream + FileOutputStream on the Java side. But that is only a guess, as I last used the Windows API in times when named pipes didn't yet exist.</p>\n"},{"tags":[],"owner":{"account_id":756311,"reputation":31,"user_id":764361,"display_name":"Eagle"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1306021060,"creation_date":1306021060,"answer_id":6085104,"question_id":4974989,"body_markdown":"This is expected behaviour of pipes. It is supposed to hang untill other process connects to the pipe and reads it.","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>This is expected behaviour of pipes. It is supposed to hang untill other process connects to the pipe and reads it.</p>\n"},{"tags":[],"owner":{"account_id":1211734,"reputation":29,"user_id":1180144,"display_name":"Andrey"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1328007901,"creation_date":1328007901,"answer_id":9078438,"question_id":4974989,"body_markdown":"I have a same problem -- communication between a C#/Python app and a Java app on windows using named pipes:\r\n\r\nWe have example of Client Code written on Java, but in line `String echoResponse = pipe.readLine();` tread waits forever.\r\n    \r\n    try {\r\n        // Connect to the pipe\r\n        RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe&quot;, &quot;rw&quot;);\r\n        String echoText = &quot;Hello word\\n&quot;;\r\n        // write to pipe\r\n        pipe.write ( echoText.getBytes() );\r\n        // read response\r\n        String echoResponse = pipe.readLine();\r\n        System.out.println(&quot;Response: &quot; + echoResponse );\r\n        pipe.close();\r\n        \r\n        } catch (Exception e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n        }\r\n\r\nSolution of problem:\r\nI have a ServerPipe code written on Python from here [Example Code - Named Pipes][1]:\r\nand run its on Python 2.6.6\r\n\r\n    from ctypes import *\r\n    \r\n    PIPE_ACCESS_DUPLEX = 0x3\r\n    PIPE_TYPE_MESSAGE = 0x4\r\n    PIPE_READMODE_MESSAGE = 0x2\r\n    PIPE_WAIT = 0\r\n    PIPE_UNLIMITED_INSTANCES = 255\r\n    BUFSIZE = 4096\r\n    NMPWAIT_USE_DEFAULT_WAIT = 0\r\n    INVALID_HANDLE_VALUE = -1\r\n    ERROR_PIPE_CONNECTED = 535\r\n    \r\n    MESSAGE = &quot;Default answer from server\\0&quot;\r\n    szPipename = &quot;\\\\\\\\.\\\\pipe\\\\mynamedpipe&quot;\r\n    \r\n    \r\n    def ReadWrite_ClientPipe_Thread(hPipe):\r\n        chBuf = create_string_buffer(BUFSIZE)\r\n        cbRead = c_ulong(0)\r\n        while 1:\r\n            fSuccess = windll.kernel32.ReadFile(hPipe, chBuf, BUFSIZE,\r\n    byref(cbRead), None)\r\n            if ((fSuccess ==1) or (cbRead.value != 0)):\r\n                print chBuf.value\r\n                cbWritten = c_ulong(0)\r\n                fSuccess = windll.kernel32.WriteFile(hPipe,\r\n                                                     c_char_p(MESSAGE),\r\n                                                     len(MESSAGE),\r\n                                                     byref(cbWritten),\r\n                                                     None\r\n                                                    )\r\n            else:\r\n                break\r\n            if ( (not fSuccess) or (len(MESSAGE) != cbWritten.value)):\r\n                print &quot;Could not reply to the client&#39;s request from the\r\n    pipe&quot;\r\n                break\r\n            else:\r\n                print &quot;Number of bytes written:&quot;, cbWritten.value\r\n    \r\n        windll.kernel32.FlushFileBuffers(hPipe)\r\n        windll.kernel32.DisconnectNamedPipe(hPipe)\r\n        windll.kernel32.CloseHandle(hPipe)\r\n        return 0\r\n    \r\n    def main():\r\n        THREADFUNC = CFUNCTYPE(c_int, c_int)\r\n        thread_func = THREADFUNC(ReadWrite_ClientPipe_Thread)\r\n        while 1:\r\n            hPipe = windll.kernel32.CreateNamedPipeA(szPipename,\r\n                                                     PIPE_ACCESS_DUPLEX,\r\n                                                     PIPE_TYPE_MESSAGE |\r\n                                                     PIPE_READMODE_MESSAGE\r\n    |\r\n                                                     PIPE_WAIT,\r\n    \r\n    PIPE_UNLIMITED_INSTANCES,\r\n                                                     BUFSIZE, BUFSIZE,\r\n    \r\n    NMPWAIT_USE_DEFAULT_WAIT,\r\n                                                     None\r\n                                                    )\r\n            if (hPipe == INVALID_HANDLE_VALUE):\r\n                print &quot;Error in creating Named Pipe&quot;\r\n                return 0\r\n    \r\n            fConnected = windll.kernel32.ConnectNamedPipe(hPipe, None)\r\n            if ((fConnected == 0) and (windll.kernel32.GetLastError() ==\r\n    ERROR_PIPE_CONNECTED)):\r\n                fConnected = 1\r\n            if (fConnected == 1):\r\n                dwThreadId = c_ulong(0)\r\n                hThread = windll.kernel32.CreateThread(None, 0,\r\n    thread_func, hPipe, 0, byref(dwThreadId))\r\n                if (hThread == -1):\r\n                    print &quot;Create Thread failed&quot;\r\n                    return 0\r\n                else:\r\n                    windll.kernel32.CloseHandle(hThread)\r\n            else:\r\n                print &quot;Could not connect to the Named Pipe&quot;\r\n                windll.kernel32.CloseHandle(hPipe)\r\n        return 0\r\n    \r\n    \r\n    if __name__ == &quot;__main__&quot;:\r\n        main()\r\n\r\nAfter server have start you can use slightly modified version of the Java Client code:\r\n\r\n    try {\r\n        // Connect to the pipe\r\n        RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\mynamedpipe&quot;, &quot;rw&quot;);\r\n        String echoText = &quot;Hello world\\n&quot;;\r\n        // write to pipe\r\n        pipe.write(echoText.getBytes());\r\n        \r\n        //String aChar;\r\n        StringBuffer fullString = new StringBuffer();\r\n\r\n        while(true){\r\n            int charCode = pipe.read();\r\n            if(charCode == 0) break;\r\n            //aChar = new Character((char)charCode).toString();\r\n            fullString.append((char)charCode);\r\n        }\r\n\r\n        System.out.println(&quot;Response: &quot; + fullString);\r\n        pipe.close();\r\n    }\r\n    catch (Exception e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    }\r\n\r\nIt works well in NetBeans 6.9.1.\r\n\r\n  [1]: http://mail.python.org/pipermail/python-list/2005-March/312152.html\r\n\r\n","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>I have a same problem -- communication between a C#/Python app and a Java app on windows using named pipes:</p>\n\n<p>We have example of Client Code written on Java, but in line <code>String echoResponse = pipe.readLine();</code> tread waits forever.</p>\n\n<pre><code>try {\n    // Connect to the pipe\n    RandomAccessFile pipe = new RandomAccessFile(\"\\\\\\\\.\\\\pipe\\\\testpipe\", \"rw\");\n    String echoText = \"Hello word\\n\";\n    // write to pipe\n    pipe.write ( echoText.getBytes() );\n    // read response\n    String echoResponse = pipe.readLine();\n    System.out.println(\"Response: \" + echoResponse );\n    pipe.close();\n\n    } catch (Exception e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n    }\n</code></pre>\n\n<p>Solution of problem:\nI have a ServerPipe code written on Python from here <a href=\"http://mail.python.org/pipermail/python-list/2005-March/312152.html\" rel=\"nofollow\">Example Code - Named Pipes</a>:\nand run its on Python 2.6.6</p>\n\n<pre><code>from ctypes import *\n\nPIPE_ACCESS_DUPLEX = 0x3\nPIPE_TYPE_MESSAGE = 0x4\nPIPE_READMODE_MESSAGE = 0x2\nPIPE_WAIT = 0\nPIPE_UNLIMITED_INSTANCES = 255\nBUFSIZE = 4096\nNMPWAIT_USE_DEFAULT_WAIT = 0\nINVALID_HANDLE_VALUE = -1\nERROR_PIPE_CONNECTED = 535\n\nMESSAGE = \"Default answer from server\\0\"\nszPipename = \"\\\\\\\\.\\\\pipe\\\\mynamedpipe\"\n\n\ndef ReadWrite_ClientPipe_Thread(hPipe):\n    chBuf = create_string_buffer(BUFSIZE)\n    cbRead = c_ulong(0)\n    while 1:\n        fSuccess = windll.kernel32.ReadFile(hPipe, chBuf, BUFSIZE,\nbyref(cbRead), None)\n        if ((fSuccess ==1) or (cbRead.value != 0)):\n            print chBuf.value\n            cbWritten = c_ulong(0)\n            fSuccess = windll.kernel32.WriteFile(hPipe,\n                                                 c_char_p(MESSAGE),\n                                                 len(MESSAGE),\n                                                 byref(cbWritten),\n                                                 None\n                                                )\n        else:\n            break\n        if ( (not fSuccess) or (len(MESSAGE) != cbWritten.value)):\n            print \"Could not reply to the client's request from the\npipe\"\n            break\n        else:\n            print \"Number of bytes written:\", cbWritten.value\n\n    windll.kernel32.FlushFileBuffers(hPipe)\n    windll.kernel32.DisconnectNamedPipe(hPipe)\n    windll.kernel32.CloseHandle(hPipe)\n    return 0\n\ndef main():\n    THREADFUNC = CFUNCTYPE(c_int, c_int)\n    thread_func = THREADFUNC(ReadWrite_ClientPipe_Thread)\n    while 1:\n        hPipe = windll.kernel32.CreateNamedPipeA(szPipename,\n                                                 PIPE_ACCESS_DUPLEX,\n                                                 PIPE_TYPE_MESSAGE |\n                                                 PIPE_READMODE_MESSAGE\n|\n                                                 PIPE_WAIT,\n\nPIPE_UNLIMITED_INSTANCES,\n                                                 BUFSIZE, BUFSIZE,\n\nNMPWAIT_USE_DEFAULT_WAIT,\n                                                 None\n                                                )\n        if (hPipe == INVALID_HANDLE_VALUE):\n            print \"Error in creating Named Pipe\"\n            return 0\n\n        fConnected = windll.kernel32.ConnectNamedPipe(hPipe, None)\n        if ((fConnected == 0) and (windll.kernel32.GetLastError() ==\nERROR_PIPE_CONNECTED)):\n            fConnected = 1\n        if (fConnected == 1):\n            dwThreadId = c_ulong(0)\n            hThread = windll.kernel32.CreateThread(None, 0,\nthread_func, hPipe, 0, byref(dwThreadId))\n            if (hThread == -1):\n                print \"Create Thread failed\"\n                return 0\n            else:\n                windll.kernel32.CloseHandle(hThread)\n        else:\n            print \"Could not connect to the Named Pipe\"\n            windll.kernel32.CloseHandle(hPipe)\n    return 0\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>After server have start you can use slightly modified version of the Java Client code:</p>\n\n<pre><code>try {\n    // Connect to the pipe\n    RandomAccessFile pipe = new RandomAccessFile(\"\\\\\\\\.\\\\pipe\\\\mynamedpipe\", \"rw\");\n    String echoText = \"Hello world\\n\";\n    // write to pipe\n    pipe.write(echoText.getBytes());\n\n    //String aChar;\n    StringBuffer fullString = new StringBuffer();\n\n    while(true){\n        int charCode = pipe.read();\n        if(charCode == 0) break;\n        //aChar = new Character((char)charCode).toString();\n        fullString.append((char)charCode);\n    }\n\n    System.out.println(\"Response: \" + fullString);\n    pipe.close();\n}\ncatch (Exception e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>It works well in NetBeans 6.9.1.</p>\n"},{"tags":[],"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1345074835,"creation_date":1345006065,"answer_id":11964258,"question_id":4974989,"body_markdown":"Don&#39;t worry, using `RandomAccessFile` to access a *named pipe* is correct. A named pipe is a file system object. Under Linux/Unix it is also called &quot;fifo&quot;. Those objects are readable just like a file. (and not the same as pipes used between processes which are abstracted by Java Pipe class).\r\n\r\nHowever I see two problems with your program. I cannot test it currently as I would need your test server (feel free to publish). Your reader thread waits for answers from the other side (i.e. the server). It uses readLine(), I would use a different method (for debugging reading char by char might be the best).\r\n\r\nWith Java (without JNI) you cannot actually create a named pipe (server side). Opening a named pipe with the generic method used by RandomAccessFile you will get a byte-type stream which can be one-way or duplex.\r\n\r\nBTW: JTDS (the free JDBC driver for SQL Server) can optionally use a named pipe to access SQL server, even over the network. And it is using exactly the `RandomAccessFile` method.\r\n\r\nBTW2: there is a makepipe.exe test server on older MS SQL Server installation media, however I did not find a trusted source to get that file.","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>Don't worry, using <code>RandomAccessFile</code> to access a <em>named pipe</em> is correct. A named pipe is a file system object. Under Linux/Unix it is also called \"fifo\". Those objects are readable just like a file. (and not the same as pipes used between processes which are abstracted by Java Pipe class).</p>\n\n<p>However I see two problems with your program. I cannot test it currently as I would need your test server (feel free to publish). Your reader thread waits for answers from the other side (i.e. the server). It uses readLine(), I would use a different method (for debugging reading char by char might be the best).</p>\n\n<p>With Java (without JNI) you cannot actually create a named pipe (server side). Opening a named pipe with the generic method used by RandomAccessFile you will get a byte-type stream which can be one-way or duplex.</p>\n\n<p>BTW: JTDS (the free JDBC driver for SQL Server) can optionally use a named pipe to access SQL server, even over the network. And it is using exactly the <code>RandomAccessFile</code> method.</p>\n\n<p>BTW2: there is a makepipe.exe test server on older MS SQL Server installation media, however I did not find a trusted source to get that file.</p>\n"},{"tags":[],"owner":{"account_id":1904990,"reputation":9,"user_id":1720043,"display_name":"StanBell"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1349369265,"creation_date":1349354335,"answer_id":12727502,"question_id":4974989,"body_markdown":"I&#39;m not familiar with JAVA, and my C# is pretty elementary too. However I&#39;m had a similar problem with a multithreaded C++ client that I fixed by opening the pipe for overlapped IO. Until I did this, Windows serialized reads and writes, effectively causing an unsatisfied (blocking) ReadFile to prevent completion of a subsequent WriteFile until the read was done.\r\n\r\nSee [CreateFile function][1]  \r\nFILE_FLAG_OVERLAPPED\r\n\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx.","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>I'm not familiar with JAVA, and my C# is pretty elementary too. However I'm had a similar problem with a multithreaded C++ client that I fixed by opening the pipe for overlapped IO. Until I did this, Windows serialized reads and writes, effectively causing an unsatisfied (blocking) ReadFile to prevent completion of a subsequent WriteFile until the read was done.</p>\n\n<p>See <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx.\" rel=\"nofollow\">CreateFile function</a><br>\nFILE_FLAG_OVERLAPPED</p>\n"},{"tags":[],"owner":{"account_id":22372905,"reputation":492,"user_id":16587692,"display_name":"Teodor Mihail"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683213302,"creation_date":1683155358,"answer_id":76168523,"question_id":4974989,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\nPipes are uni-directional meaning, a pipe can do only child to parent read operations and parent to child write operations, or vice-versa, not both. You need to use two pipes for this, on both the C# and Java side, in order for both of them to perform read and write operations. \r\n\r\nPipes vs Sockets: https://www.baeldung.com/cs/pipes-vs-sockets\r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[ EDIT ]**\r\n&lt;br&gt;\r\nAs a result, you cannot perform read and write operations on the same pipe. Some languages like C# provide duplex-pipes, which can perform read and write operations on the same pipe, but surely these are two pipes &quot;under the hood&quot; that are used for read and write operations respectively. So as long as is an abstraction and you do not really know what is happening &quot;under the hood&quot;, you are better off segmenting the read and write operations between two pipes. Another factor that may cause the issue is that Java cannot officially support pipe servers, in order to do that you will need to use the Java Native Access library: https://github.com/java-native-access/jna. The RandomAccessFile Java implementation is using the OS file system in order to perform read write operations on the pipe, so as a result it has some limitations and as a result, reading and writing asynchronously within the OS file system object may result in a thread to be locked if two threads are accessing a block of memory, and could result even in memory corruption (Race Condition). Another issue is when I tried to perform two read operations on a pipe from a different thread, I got the ```\\\\.\\pipe\\testpipe1 (All pipe instances are busy)``` exception. This means that most probably, in your scenario, your pipe may be busy and got locked in a waiting for a response state when performing the write operation. As a result of the previous factors, the best option is to perform synchronous Read/Write operations on the pipe, preferably using two pipes, in order to have maximum control over the performed read and write operations.\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[C# Application]**\r\n\r\n```\r\nusing System;\r\nusing System.IO;\r\nusing System.IO.Pipes;\r\n\r\nclass C_Sharp_Pipe\r\n{\r\n    static void Main()\r\n    {\r\n        Write_Pipe();\r\n        Read_Pipe();\r\n\r\n        Console.ReadLine();\r\n    }\r\n\r\n\r\n    static async void Write_Pipe()\r\n    {\r\n        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(&quot;testpipe1&quot;, PipeDirection.Out))\r\n        {\r\n            try\r\n            {\r\n                pipeServer.WaitForConnection();\r\n\r\n                using (StreamWriter sw = new StreamWriter(pipeServer))\r\n                {\r\n                    sw.WriteLine(&quot;Hello Java process&quot;);\r\n                    Console.WriteLine(&quot;Message sent to testpipe1 Java client: &quot; + &quot;\\&quot;Hello\\&quot;&quot;);\r\n\r\n                    await sw.FlushAsync();\r\n                }\r\n\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                Console.WriteLine(&quot;ERROR: &quot; + e.Message);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    static async void Read_Pipe()\r\n    {\r\n        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(&quot;testpipe2&quot;, PipeDirection.InOut))\r\n        {\r\n            try\r\n            {\r\n                pipeServer.WaitForConnection();\r\n\r\n                using (StreamReader sr = new StreamReader(pipeServer))\r\n                {\r\n                    string received_message = await sr.ReadLineAsync();\r\n                    Console.WriteLine(&quot;Message received from Java testpipe2 server: &quot; + received_message);\r\n\r\n                }\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                Console.WriteLine(&quot;ERROR: &quot; + e.Message);\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[Java Application]**\r\n```\r\npackage com.algorithms;\r\n\r\nimport java.io.RandomAccessFile;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        Read_Pipe();\r\n        Write_Pipe();\r\n\r\n        Scanner s = new Scanner(System.in);\r\n        s.nextLine();\r\n    }\r\n\r\n\r\n    private static void Read_Pipe()\r\n    {\r\n        try\r\n        {\r\n            RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe1&quot;, &quot;r&quot;);\r\n            byte[] buffer = new byte[1024];\r\n\r\n            pipe.read(buffer);\r\n\r\n            System.out.println(&quot;Response from C# testpipe1 pipe server: &quot; + new String(buffer, StandardCharsets.UTF_8) );\r\n            pipe.close();\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private static void Write_Pipe()\r\n    {\r\n        try\r\n        {\r\n            RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe2&quot;, &quot;rw&quot;);\r\n            String buffer = &quot;Hello C# process&quot;;\r\n\r\n            pipe.write(buffer.getBytes(StandardCharsets.UTF_8));\r\n\r\n            System.out.println(&quot;Message sent to C# testpipe2 pipe client: &quot; + buffer);\r\n            pipe.close();\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n```\r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[ C# Inter-Process Communication Result ]**\r\n[![enter image description here][2]][2]\r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[Java Inter-Process Communication Result]**\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rzkRe.jpg\r\n  [2]: https://i.stack.imgur.com/vZAum.jpg\r\n  [3]: https://i.stack.imgur.com/1z6O8.jpg","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p><a href=\"https://i.stack.imgur.com/rzkRe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rzkRe.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Pipes are uni-directional meaning, a pipe can do only child to parent read operations and parent to child write operations, or vice-versa, not both. You need to use two pipes for this, on both the C# and Java side, in order for both of them to perform read and write operations.</p>\n<p>Pipes vs Sockets: <a href=\"https://www.baeldung.com/cs/pipes-vs-sockets\" rel=\"nofollow noreferrer\">https://www.baeldung.com/cs/pipes-vs-sockets</a></p>\n<br>\n<br>\n<p><strong>[ EDIT ]</strong>\n<br>\nAs a result, you cannot perform read and write operations on the same pipe. Some languages like C# provide duplex-pipes, which can perform read and write operations on the same pipe, but surely these are two pipes &quot;under the hood&quot; that are used for read and write operations respectively. So as long as is an abstraction and you do not really know what is happening &quot;under the hood&quot;, you are better off segmenting the read and write operations between two pipes. Another factor that may cause the issue is that Java cannot officially support pipe servers, in order to do that you will need to use the Java Native Access library: <a href=\"https://github.com/java-native-access/jna\" rel=\"nofollow noreferrer\">https://github.com/java-native-access/jna</a>. The RandomAccessFile Java implementation is using the OS file system in order to perform read write operations on the pipe, so as a result it has some limitations and as a result, reading and writing asynchronously within the OS file system object may result in a thread to be locked if two threads are accessing a block of memory, and could result even in memory corruption (Race Condition). Another issue is when I tried to perform two read operations on a pipe from a different thread, I got the <code>\\\\.\\pipe\\testpipe1 (All pipe instances are busy)</code> exception. This means that most probably, in your scenario, your pipe may be busy and got locked in a waiting for a response state when performing the write operation. As a result of the previous factors, the best option is to perform synchronous Read/Write operations on the pipe, preferably using two pipes, in order to have maximum control over the performed read and write operations.\n<br>\n<br></p>\n<p><strong>[C# Application]</strong></p>\n<pre><code>using System;\nusing System.IO;\nusing System.IO.Pipes;\n\nclass C_Sharp_Pipe\n{\n    static void Main()\n    {\n        Write_Pipe();\n        Read_Pipe();\n\n        Console.ReadLine();\n    }\n\n\n    static async void Write_Pipe()\n    {\n        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(&quot;testpipe1&quot;, PipeDirection.Out))\n        {\n            try\n            {\n                pipeServer.WaitForConnection();\n\n                using (StreamWriter sw = new StreamWriter(pipeServer))\n                {\n                    sw.WriteLine(&quot;Hello Java process&quot;);\n                    Console.WriteLine(&quot;Message sent to testpipe1 Java client: &quot; + &quot;\\&quot;Hello\\&quot;&quot;);\n\n                    await sw.FlushAsync();\n                }\n\n            }\n            catch (Exception e)\n            {\n                Console.WriteLine(&quot;ERROR: &quot; + e.Message);\n            }\n        }\n    }\n\n\n    static async void Read_Pipe()\n    {\n        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(&quot;testpipe2&quot;, PipeDirection.InOut))\n        {\n            try\n            {\n                pipeServer.WaitForConnection();\n\n                using (StreamReader sr = new StreamReader(pipeServer))\n                {\n                    string received_message = await sr.ReadLineAsync();\n                    Console.WriteLine(&quot;Message received from Java testpipe2 server: &quot; + received_message);\n\n                }\n            }\n            catch (Exception e)\n            {\n                Console.WriteLine(&quot;ERROR: &quot; + e.Message);\n            }\n        }\n\n    }\n}\n</code></pre>\n<br>\n<br>\n<br>\n<p><strong>[Java Application]</strong></p>\n<pre><code>package com.algorithms;\n\nimport java.io.RandomAccessFile;\nimport java.nio.charset.StandardCharsets;\nimport java.util.Scanner;\n\npublic class Main {\n\n    public static void main(String[] args)\n    {\n        Read_Pipe();\n        Write_Pipe();\n\n        Scanner s = new Scanner(System.in);\n        s.nextLine();\n    }\n\n\n    private static void Read_Pipe()\n    {\n        try\n        {\n            RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe1&quot;, &quot;r&quot;);\n            byte[] buffer = new byte[1024];\n\n            pipe.read(buffer);\n\n            System.out.println(&quot;Response from C# testpipe1 pipe server: &quot; + new String(buffer, StandardCharsets.UTF_8) );\n            pipe.close();\n        }\n        catch (Exception e)\n        {\n            System.out.println(e.getMessage());\n        }\n    }\n\n\n\n    private static void Write_Pipe()\n    {\n        try\n        {\n            RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe2&quot;, &quot;rw&quot;);\n            String buffer = &quot;Hello C# process&quot;;\n\n            pipe.write(buffer.getBytes(StandardCharsets.UTF_8));\n\n            System.out.println(&quot;Message sent to C# testpipe2 pipe client: &quot; + buffer);\n            pipe.close();\n        }\n        catch (Exception e)\n        {\n            System.out.println(e.getMessage());\n        }\n    }\n\n\n\n}\n</code></pre>\n<br>\n<br>\n<p><strong>[ C# Inter-Process Communication Result ]</strong>\n<a href=\"https://i.stack.imgur.com/vZAum.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vZAum.jpg\" alt=\"enter image description here\" /></a></p>\n<br>\n<br>\n<p><strong>[Java Inter-Process Communication Result]</strong></p>\n<p><a href=\"https://i.stack.imgur.com/1z6O8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1z6O8.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":39968,"reputation":7040,"user_id":115563,"accept_rate":80,"display_name":"takteek"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15157,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":6,"score":4,"last_activity_date":1683213302,"creation_date":1297465945,"question_id":4974989,"body_markdown":"I&#39;m trying to provide communication between a C# app and a Java app on windows using named pipes with the method described by v01ver in this question: https://stackoverflow.com/questions/634564/how-to-open-a-windows-named-pipe-from-java\r\n\r\nI&#39;m running into a problem on the Java side because I have a reader thread constantly waiting for input on the pipe and when I try to write to the pipe from my main thread it gets stuck forever.\r\n\r\n    final RandomAccessFile pipe;\r\n    try {\r\n       pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\mypipe&quot;, &quot;rw&quot;);\r\n    }\r\n    catch (FileNotFoundException ex) {\r\n       ex.printStackTrace();\r\n       return;\r\n    }\r\n      \r\n    Thread readerThread = new Thread(new Runnable() {\r\n       @Override\r\n       public void run() {\r\n          String line = null;\r\n          try {\r\n             while (null != (line = pipe.readLine())) {\r\n                System.out.println(line);\r\n             }\r\n          }\r\n          catch (IOException ex) {\r\n             ex.printStackTrace();\r\n          }\r\n       }\r\n    });\r\n    readerThread.start();\r\n    \r\n    try { Thread.sleep(500); } catch (InterruptedException e) {}\r\n    \r\n    try {\r\n       System.out.println(&quot;Writing a message...&quot;);\r\n       pipe.write(&quot;Hello there.\\n&quot;.getBytes());\r\n       System.out.println(&quot;Finished.&quot;);\r\n    }\r\n    catch (IOException ex) {\r\n       ex.printStackTrace();\r\n    }\r\n\r\nThe output is: &lt;pre&gt;Writing a message...&lt;/pre&gt;\r\nand then it waits forever.\r\n\r\nHow can I write to a named pipe while waiting for input in another thread?","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>I'm trying to provide communication between a C# app and a Java app on windows using named pipes with the method described by v01ver in this question: <a href=\"https://stackoverflow.com/questions/634564/how-to-open-a-windows-named-pipe-from-java\">How to open a Windows named pipe from Java?</a></p>\n\n<p>I'm running into a problem on the Java side because I have a reader thread constantly waiting for input on the pipe and when I try to write to the pipe from my main thread it gets stuck forever.</p>\n\n<pre><code>final RandomAccessFile pipe;\ntry {\n   pipe = new RandomAccessFile(\"\\\\\\\\.\\\\pipe\\\\mypipe\", \"rw\");\n}\ncatch (FileNotFoundException ex) {\n   ex.printStackTrace();\n   return;\n}\n\nThread readerThread = new Thread(new Runnable() {\n   @Override\n   public void run() {\n      String line = null;\n      try {\n         while (null != (line = pipe.readLine())) {\n            System.out.println(line);\n         }\n      }\n      catch (IOException ex) {\n         ex.printStackTrace();\n      }\n   }\n});\nreaderThread.start();\n\ntry { Thread.sleep(500); } catch (InterruptedException e) {}\n\ntry {\n   System.out.println(\"Writing a message...\");\n   pipe.write(\"Hello there.\\n\".getBytes());\n   System.out.println(\"Finished.\");\n}\ncatch (IOException ex) {\n   ex.printStackTrace();\n}\n</code></pre>\n\n<p>The output is: <pre>Writing a message...</pre>\nand then it waits forever.</p>\n\n<p>How can I write to a named pipe while waiting for input in another thread?</p>\n"},{"tags":["java","database","erp","jvx"],"answers":[{"tags":[],"owner":{"account_id":7016963,"reputation":453,"user_id":5377961,"display_name":"rjahn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683212952,"creation_date":1681759251,"answer_id":76038598,"question_id":76037923,"body_markdown":"You&#39;re right, the LabelControl is a good option, but not in your case.\r\n\r\nSo, simply use the cell editor and format the value:\r\n\r\n    Object value = dataRow.getValue(columnName);\r\n        \r\n    String text;\r\n        \r\n    if (value instanceof String)\r\n    {\r\n        text = (String)value;\r\n    }\r\n    else\r\n    {\r\n        ICellEditor cellEditor = UICellEditor.getCellEditor(dataRow, columnName);\r\n        \r\n        if (value instanceof Number &amp;&amp; cellEditor instanceof INumberCellEditor)\r\n        {\r\n            if (numberUtil == null)\r\n            {\r\n                numberUtil = new NumberUtil();\r\n            }\r\n     \r\n            numberUtil.setNumberPattern(\r\n                         ((INumberCellEditor)cellEditor).getNumberFormat());\r\n            \r\n            text = numberUtil.format((Number)value);\r\n        }\r\n        else if (value instanceof Date &amp;&amp; cellEditor instanceof IDateCellEditor)\r\n        {\r\n            if (dateUtil == null)\r\n            {\r\n                dateUtil = new DateUtil();\r\n            }\r\n            \r\n            dateUtil.setDatePattern(\r\n                       ((IDateCellEditor)cellEditor).getDateFormat());\r\n            \r\n            text = dateUtil.format((Date)value);\r\n        }\r\n        else\r\n        {\r\n            text = dataRow.getValueAsString(columnName);\r\n        }\r\n    }\r\n\r\nIt&#39;s important to create new NumberUtil and DateUtil, because the format can be different for every date or number column. There&#39;s also a utility class for formatting.\r\n\r\n    text = DataBookUtil.getValueAsString(dataRow, columnName);\r\n","title":"Get display value of cell editor in JVx","body":"<p>You're right, the LabelControl is a good option, but not in your case.</p>\n<p>So, simply use the cell editor and format the value:</p>\n<pre><code>Object value = dataRow.getValue(columnName);\n    \nString text;\n    \nif (value instanceof String)\n{\n    text = (String)value;\n}\nelse\n{\n    ICellEditor cellEditor = UICellEditor.getCellEditor(dataRow, columnName);\n    \n    if (value instanceof Number &amp;&amp; cellEditor instanceof INumberCellEditor)\n    {\n        if (numberUtil == null)\n        {\n            numberUtil = new NumberUtil();\n        }\n \n        numberUtil.setNumberPattern(\n                     ((INumberCellEditor)cellEditor).getNumberFormat());\n        \n        text = numberUtil.format((Number)value);\n    }\n    else if (value instanceof Date &amp;&amp; cellEditor instanceof IDateCellEditor)\n    {\n        if (dateUtil == null)\n        {\n            dateUtil = new DateUtil();\n        }\n        \n        dateUtil.setDatePattern(\n                   ((IDateCellEditor)cellEditor).getDateFormat());\n        \n        text = dateUtil.format((Date)value);\n    }\n    else\n    {\n        text = dataRow.getValueAsString(columnName);\n    }\n}\n</code></pre>\n<p>It's important to create new NumberUtil and DateUtil, because the format can be different for every date or number column. There's also a utility class for formatting.</p>\n<pre><code>text = DataBookUtil.getValueAsString(dataRow, columnName);\n</code></pre>\n"}],"owner":{"account_id":28167502,"reputation":90,"user_id":21526498,"display_name":"Robosch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76038598,"answer_count":1,"score":0,"last_activity_date":1683212952,"creation_date":1681753735,"question_id":76037923,"body_markdown":"I have a simple work-screen (JVx application framework) which shows records of a database table. The table contains number and formatted date values. The number and date formats are configured with cell editors as usual. It works without problems in the table and bound editor controls. So the table shows a formatted number/date and the editor as well.\r\n\r\nMy problem is that I want to show a label with the same number or date. The raw values (`datarow.getValue(&quot;DATECOL&quot;)`, `datarow.getValue(&quot;NUMBERCOL&quot;)`) are `java.sql.Timestamp` or `java.math.BigDecimal` objects. If I try to get a string (`datarow.getValueAsString(&quot;DATECOL&quot;)`, datarow.getValueAsString(&quot;NUMBERCOL&quot;)`) it&#39;s an unformatted string - clear.\r\n\r\nSo, is it possible to get the text, formatted with the same settings as defined for cell editors?\r\n\r\nI found that the framework contains a class `LabelControl` class which can be bound to a column. But in my case, I need the text for a specific report and not for the UI.\r\n\r\nAny help appreciated!\r\n\r\nIs there an API for e.g. `Util.getText(datarow, &quot;NUMBERCOL&quot;)`?","title":"Get display value of cell editor in JVx","body":"<p>I have a simple work-screen (JVx application framework) which shows records of a database table. The table contains number and formatted date values. The number and date formats are configured with cell editors as usual. It works without problems in the table and bound editor controls. So the table shows a formatted number/date and the editor as well.</p>\n<p>My problem is that I want to show a label with the same number or date. The raw values (<code>datarow.getValue(&quot;DATECOL&quot;)</code>, <code>datarow.getValue(&quot;NUMBERCOL&quot;)</code>) are <code>java.sql.Timestamp</code> or <code>java.math.BigDecimal</code> objects. If I try to get a string (<code>datarow.getValueAsString(&quot;DATECOL&quot;)</code>, datarow.getValueAsString(&quot;NUMBERCOL&quot;)`) it's an unformatted string - clear.</p>\n<p>So, is it possible to get the text, formatted with the same settings as defined for cell editors?</p>\n<p>I found that the framework contains a class <code>LabelControl</code> class which can be bound to a column. But in my case, I need the text for a specific report and not for the UI.</p>\n<p>Any help appreciated!</p>\n<p>Is there an API for e.g. <code>Util.getText(datarow, &quot;NUMBERCOL&quot;)</code>?</p>\n"},{"tags":["java","jar","executable-jar"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683212780,"post_id":76174591,"comment_id":134335179,"body_markdown":"The standard Java classloaders do not know how to read classes from a JAR file *inside* another JAR file.  Nested JARs don&#39;t work.   The second duplink talks about 3rd-party classloaders that solve this problem.","body":"The standard Java classloaders do not know how to read classes from a JAR file <i>inside</i> another JAR file.  Nested JARs don&#39;t work.   The second duplink talks about 3rd-party classloaders that solve this problem."}],"owner":{"account_id":15342083,"reputation":11,"user_id":11068786,"display_name":"Shubham P"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683212894,"answer_count":0,"score":0,"last_activity_date":1683212946,"creation_date":1683212242,"question_id":76174591,"body_markdown":"I have 3 jars a,b,c A is dependent on B and B has one jar let&#39;s call it jar c inside it i.e nested Jar.\r\nGetting error when B is trying to access class of Jar C.\r\nI have added the jar C in the class path of B.\r\n\r\n\r\n\r\nAlso when I extract the Jar B I can see that jar C is present inside the extracted folder of B.\r\nBut still getting error.","title":"Getting java.lang.NoClassDefFoundError error while running a JAR","body":"<p>I have 3 jars a,b,c A is dependent on B and B has one jar let's call it jar c inside it i.e nested Jar.\nGetting error when B is trying to access class of Jar C.\nI have added the jar C in the class path of B.</p>\n<p>Also when I extract the Jar B I can see that jar C is present inside the extracted folder of B.\nBut still getting error.</p>\n"},{"tags":["java","hibernate","quarkus","hibernate-reactive","quarkus-hibernate-reactive"],"owner":{"account_id":27652339,"reputation":23,"user_id":21106947,"display_name":"jf743"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683212711,"creation_date":1683212711,"question_id":76174676,"body_markdown":"I&#39;m trying to create a data model using hibernate reactive where one entity owns two other entities and each of those two entities have a one-to-many relationship with a fourth entity. Here is an example of how the tables would be set up:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;OBJECT_A&quot;)\r\npublic class ObjectA {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;ID&quot;)\r\n    public Long id;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;OBJECT_A_ID&quot;)\r\n    public Set&lt;ObjectB&gt; objectBs;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;OBJECT_A_ID&quot;)\r\n    public Set&lt;ObjectC&gt; objectCs;\r\n\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;OBJECT_B&quot;)\r\npublic class ObjectB {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;ID&quot;)\r\n    public Long id;\r\n\r\n    @OneToMany(mappedBy = &quot;objectB&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    public Set&lt;ObjectD&gt; objectDs;\r\n\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;OBJECT_C&quot;)\r\npublic class ObjectC {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;ID&quot;)\r\n    public Long id;\r\n\r\n    @NotBlank\r\n    @Column(name = &quot;NAME&quot;)\r\n    public String name;\r\n\r\n    @OneToMany(mappedBy = &quot;objectC&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    public Set&lt;ObjectD&gt; objectDs;\r\n\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;OBJECT_D&quot;)\r\npublic class ObjectD {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;ID&quot;)\r\n    public Long id;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;OBJECT_B_ID&quot;, nullable = false)\r\n    public ObjectB objectB;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;OBJECT_C_ID&quot;, nullable = false)\r\n    public ObjectC objectC;\r\n\r\n}\r\n```\r\n\r\nI think this table structure works fine. I just can&#39;t figure out how to actually persist data following this model into the database. Normally, I would just get an ObjectA from the API layer and call session.persist on that, and due to everything being CascadeType.ALL it would just persist all of the child objects. The problem I&#39;m having is that with a JSON Rest API you can&#39;t really represent the idea of an ObjectD having two different parent objects. In the JSON structure, ObjectD is a child of ObjectB and then I have a reference back to ObjectC as a part of ObjectD. Here is an example of an objectA in JSON:\r\n\r\n```\r\n{\r\n    &quot;objectBs&quot;: [\r\n        {\r\n            &quot;objectDs&quot;: [\r\n                {\r\n                    &quot;objectC&quot;: {\r\n                        &quot;name&quot;: &quot;example_name&quot;\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ],\r\n    &quot;objectCs&quot;: [\r\n        {\r\n            &quot;name&quot;: &quot;example_name&quot;\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nAs you can see, the ObjectC in the top level objectCs list and the one that is a part of the ObjectD are really the same object. How would I persist the JSON representation above into the database using hibernate? I appreciate any help. Sorry if this contrived example is a little hard to follow.","title":"How do I create an entity with multiple parent entities using Hibernate reactive?","body":"<p>I'm trying to create a data model using hibernate reactive where one entity owns two other entities and each of those two entities have a one-to-many relationship with a fourth entity. Here is an example of how the tables would be set up:</p>\n<pre><code>@Entity\n@Table(name = &quot;OBJECT_A&quot;)\npublic class ObjectA {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;)\n    public Long id;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;OBJECT_A_ID&quot;)\n    public Set&lt;ObjectB&gt; objectBs;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;OBJECT_A_ID&quot;)\n    public Set&lt;ObjectC&gt; objectCs;\n\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;OBJECT_B&quot;)\npublic class ObjectB {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;)\n    public Long id;\n\n    @OneToMany(mappedBy = &quot;objectB&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    public Set&lt;ObjectD&gt; objectDs;\n\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;OBJECT_C&quot;)\npublic class ObjectC {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;)\n    public Long id;\n\n    @NotBlank\n    @Column(name = &quot;NAME&quot;)\n    public String name;\n\n    @OneToMany(mappedBy = &quot;objectC&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    public Set&lt;ObjectD&gt; objectDs;\n\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;OBJECT_D&quot;)\npublic class ObjectD {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;)\n    public Long id;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;OBJECT_B_ID&quot;, nullable = false)\n    public ObjectB objectB;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;OBJECT_C_ID&quot;, nullable = false)\n    public ObjectC objectC;\n\n}\n</code></pre>\n<p>I think this table structure works fine. I just can't figure out how to actually persist data following this model into the database. Normally, I would just get an ObjectA from the API layer and call session.persist on that, and due to everything being CascadeType.ALL it would just persist all of the child objects. The problem I'm having is that with a JSON Rest API you can't really represent the idea of an ObjectD having two different parent objects. In the JSON structure, ObjectD is a child of ObjectB and then I have a reference back to ObjectC as a part of ObjectD. Here is an example of an objectA in JSON:</p>\n<pre><code>{\n    &quot;objectBs&quot;: [\n        {\n            &quot;objectDs&quot;: [\n                {\n                    &quot;objectC&quot;: {\n                        &quot;name&quot;: &quot;example_name&quot;\n                    }\n                }\n            ]\n        }\n    ],\n    &quot;objectCs&quot;: [\n        {\n            &quot;name&quot;: &quot;example_name&quot;\n        }\n    ]\n}\n</code></pre>\n<p>As you can see, the ObjectC in the top level objectCs list and the one that is a part of the ObjectD are really the same object. How would I persist the JSON representation above into the database using hibernate? I appreciate any help. Sorry if this contrived example is a little hard to follow.</p>\n"},{"tags":["java","spring-boot","validation","interceptor"],"owner":{"account_id":324230,"reputation":6336,"user_id":644686,"accept_rate":60,"display_name":"victorio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683212366,"creation_date":1683212366,"question_id":76174610,"body_markdown":"In my Spring Boot app I have a controller, which has and endpoint which receives a request object.\r\n\r\nThis object has @Valid annotation on it (inside the object there are some @NotNull annotation on some fields).\r\n\r\nI want to register an interceptor, which:\r\n\r\n 1. first waits for annotation validation to be executed on the request object\r\n 2. if there were no validation error then the interceptor content is executed\r\n 3. after interceptor, the code of endpont method in the controller is executed\r\n\r\nHow can I do this with interceptor? Or should I use some other solutions?","title":"How can I add an interceptor in Spring Boot application which is activated after annotation validation and before controller call?","body":"<p>In my Spring Boot app I have a controller, which has and endpoint which receives a request object.</p>\n<p>This object has @Valid annotation on it (inside the object there are some @NotNull annotation on some fields).</p>\n<p>I want to register an interceptor, which:</p>\n<ol>\n<li>first waits for annotation validation to be executed on the request object</li>\n<li>if there were no validation error then the interceptor content is executed</li>\n<li>after interceptor, the code of endpont method in the controller is executed</li>\n</ol>\n<p>How can I do this with interceptor? Or should I use some other solutions?</p>\n"},{"tags":["java","selenium","parallel-processing","testng","testng-dataprovider"],"answers":[{"tags":[],"owner":{"account_id":13973715,"reputation":2843,"user_id":10091597,"display_name":"Muzzamil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579461868,"creation_date":1579461868,"answer_id":59813589,"question_id":59813281,"body_markdown":"You need to use `dataproviderthreadcount`. The `thread-count` values is not required. See details [here][1].\r\n\r\nYou can use `Tesng.xml` as mentioned below :\r\n\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    &lt;suite name=&quot;My Sample Suite&quot; parallel=&quot;methods&quot; data-provider-thread-count=&quot;3&quot;&gt;\r\n    \r\n    \r\n    &lt;test name=&quot;Amazon test&quot;&gt;\r\n        &lt;classes&gt;\r\n            &lt;class name=&quot;com.mycompany.app.testTab&quot;&gt;&lt;/class&gt;  \r\n        &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n    \r\n    \r\n    &lt;/suite&gt;\r\n\r\n  [1]: https://testng.org/doc/documentation-main.html#running-testng\r\n","title":"TestNG parallel DataProvider in tabs","body":"<p>You need to use <code>dataproviderthreadcount</code>. The <code>thread-count</code> values is not required. See details <a href=\"https://testng.org/doc/documentation-main.html#running-testng\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>You can use <code>Tesng.xml</code> as mentioned below :</p>\n\n<pre><code>&lt;!DOCTYPE suite SYSTEM \"http://testng.org/testng-1.0.dtd\"&gt;\n&lt;suite name=\"My Sample Suite\" parallel=\"methods\" data-provider-thread-count=\"3\"&gt;\n\n\n&lt;test name=\"Amazon test\"&gt;\n    &lt;classes&gt;\n        &lt;class name=\"com.mycompany.app.testTab\"&gt;&lt;/class&gt;  \n    &lt;/classes&gt;\n&lt;/test&gt;\n\n\n&lt;/suite&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":346350,"reputation":14221,"user_id":679824,"accept_rate":40,"display_name":"Krishnan Mahadevan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579667922,"creation_date":1579667922,"answer_id":59852703,"question_id":59813281,"body_markdown":"There are a few issues with your test code.\r\n\r\n - You have a class level data member `WebDriver` which gets shared across all `@Test` methods in the same test class and also across all iterations of a data driven `@Test` method.\r\n - You are making use of a `@BeforeTest` method to initialise your webdriver instance, which means that it gets initialised ONLY once per `&lt;test&gt;` tag and if there are any other downstream test classes that extend this test class, they will face `NullPointerException`.\r\n\r\n&gt; Is there a way to create a webdriver for each test?\r\n\r\nYes its very much possible. You need to work with `ThreadLocal` wherein you instantiate the `WebDriver` either in a TestNG listener (or) in a `@BeforeMethod` method (because the `@BeforeMethod` is guaranteed to run on the same thread as the `@Test`)\r\n\r\nHere&#39;s how you go about doing this.\r\n\r\nFirst create a driver factory that can produce `WebDriver` instances for you.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    import org.openqa.selenium.ie.InternetExplorerDriver;\r\n     \r\n    class LocalDriverFactory {\r\n        static WebDriver createInstance(String browserName) {\r\n            WebDriver driver = null;\r\n            if (browserName.toLowerCase().contains(&quot;firefox&quot;)) {\r\n                driver = new FirefoxDriver();\r\n                return driver;\r\n            }\r\n            if (browserName.toLowerCase().contains(&quot;internet&quot;)) {\r\n                driver = new InternetExplorerDriver();\r\n                return driver;\r\n            }\r\n            if (browserName.toLowerCase().contains(&quot;chrome&quot;)) {\r\n                driver = new ChromeDriver();\r\n                return driver;\r\n            }\r\n            return driver;\r\n        }\r\n    }\r\n\r\nNow lets create a driver manager, that acts as means to interact with the instantiated webdriver\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import org.openqa.selenium.WebDriver;\r\n    \r\n    public class LocalDriverManager {\r\n      private static ThreadLocal&lt;WebDriver&gt; webDriver = new ThreadLocal&lt;&gt;();\r\n    \r\n      public static WebDriver getDriver() {\r\n        return webDriver.get();\r\n      }\r\n    \r\n      static void setWebDriver(WebDriver driver) {\r\n        webDriver.set(driver);\r\n      }\r\n    \r\n      public static void cleanupDriver() {\r\n        webDriver.get().quit();\r\n        webDriver.remove();\r\n      }\r\n    }\r\n\r\nHere&#39;s how your test class would now look like\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.Keys;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.testng.annotations.AfterMethod;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.DataProvider;\r\n    import org.testng.annotations.Test;\r\n    \r\n    public class TestTab {\r\n    \r\n      @BeforeMethod\r\n      public void beforeMethod() {\r\n        LocalDriverManager.setWebDriver(LocalDriverFactory.createInstance(&quot;chrome&quot;));\r\n      }\r\n    \r\n      @Test(dataProvider = &quot;dp&quot;)\r\n      public void testMethod(String searchWord) {\r\n        WebDriver driver = LocalDriverManager.getDriver();\r\n        driver.get(&quot;https://www.google.com/&quot;);\r\n        driver.findElement(By.xpath(&quot;//input[@name=&#39;q&#39;]&quot;)).sendKeys(searchWord + (Keys.RETURN));\r\n      }\r\n    \r\n      @DataProvider(name = &quot;dp&quot;, parallel = true)\r\n      public Object[][] getData() {\r\n        return new Object[][] {{&quot;bihi&quot;}, {&quot;boutfounast&quot;}, {&quot;hmad l9rran&quot;}};\r\n      }\r\n    \r\n      @AfterMethod\r\n      public void afterMethod() {\r\n        LocalDriverManager.cleanupDriver();\r\n      }\r\n    }\r\n\r\nI created a detailed blog that explains all of this. You can read more about it [here][1]\r\n\r\nAs an improvisation, I also created a simple maven library called `autospawn` that abstracts out all of this browser instantiation and clean up logic from you and lets you work with a webdriver by using a custom annotation.\r\n\r\nYou can get more information about it from here: https://github.com/RationaleEmotions/autospawn\r\n\r\n\r\n  [1]: https://rationaleemotions.com/parallel_webdriver_executions_using_testng/","title":"TestNG parallel DataProvider in tabs","body":"<p>There are a few issues with your test code.</p>\n\n<ul>\n<li>You have a class level data member <code>WebDriver</code> which gets shared across all <code>@Test</code> methods in the same test class and also across all iterations of a data driven <code>@Test</code> method.</li>\n<li>You are making use of a <code>@BeforeTest</code> method to initialise your webdriver instance, which means that it gets initialised ONLY once per <code>&lt;test&gt;</code> tag and if there are any other downstream test classes that extend this test class, they will face <code>NullPointerException</code>.</li>\n</ul>\n\n<blockquote>\n  <p>Is there a way to create a webdriver for each test?</p>\n</blockquote>\n\n<p>Yes its very much possible. You need to work with <code>ThreadLocal</code> wherein you instantiate the <code>WebDriver</code> either in a TestNG listener (or) in a <code>@BeforeMethod</code> method (because the <code>@BeforeMethod</code> is guaranteed to run on the same thread as the <code>@Test</code>)</p>\n\n<p>Here's how you go about doing this.</p>\n\n<p>First create a driver factory that can produce <code>WebDriver</code> instances for you.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.ie.InternetExplorerDriver;\n\nclass LocalDriverFactory {\n    static WebDriver createInstance(String browserName) {\n        WebDriver driver = null;\n        if (browserName.toLowerCase().contains(\"firefox\")) {\n            driver = new FirefoxDriver();\n            return driver;\n        }\n        if (browserName.toLowerCase().contains(\"internet\")) {\n            driver = new InternetExplorerDriver();\n            return driver;\n        }\n        if (browserName.toLowerCase().contains(\"chrome\")) {\n            driver = new ChromeDriver();\n            return driver;\n        }\n        return driver;\n    }\n}\n</code></pre>\n\n<p>Now lets create a driver manager, that acts as means to interact with the instantiated webdriver</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.openqa.selenium.WebDriver;\n\npublic class LocalDriverManager {\n  private static ThreadLocal&lt;WebDriver&gt; webDriver = new ThreadLocal&lt;&gt;();\n\n  public static WebDriver getDriver() {\n    return webDriver.get();\n  }\n\n  static void setWebDriver(WebDriver driver) {\n    webDriver.set(driver);\n  }\n\n  public static void cleanupDriver() {\n    webDriver.get().quit();\n    webDriver.remove();\n  }\n}\n</code></pre>\n\n<p>Here's how your test class would now look like</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.openqa.selenium.By;\nimport org.openqa.selenium.Keys;\nimport org.openqa.selenium.WebDriver;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Test;\n\npublic class TestTab {\n\n  @BeforeMethod\n  public void beforeMethod() {\n    LocalDriverManager.setWebDriver(LocalDriverFactory.createInstance(\"chrome\"));\n  }\n\n  @Test(dataProvider = \"dp\")\n  public void testMethod(String searchWord) {\n    WebDriver driver = LocalDriverManager.getDriver();\n    driver.get(\"https://www.google.com/\");\n    driver.findElement(By.xpath(\"//input[@name='q']\")).sendKeys(searchWord + (Keys.RETURN));\n  }\n\n  @DataProvider(name = \"dp\", parallel = true)\n  public Object[][] getData() {\n    return new Object[][] {{\"bihi\"}, {\"boutfounast\"}, {\"hmad l9rran\"}};\n  }\n\n  @AfterMethod\n  public void afterMethod() {\n    LocalDriverManager.cleanupDriver();\n  }\n}\n</code></pre>\n\n<p>I created a detailed blog that explains all of this. You can read more about it <a href=\"https://rationaleemotions.com/parallel_webdriver_executions_using_testng/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>As an improvisation, I also created a simple maven library called <code>autospawn</code> that abstracts out all of this browser instantiation and clean up logic from you and lets you work with a webdriver by using a custom annotation.</p>\n\n<p>You can get more information about it from here: <a href=\"https://github.com/RationaleEmotions/autospawn\" rel=\"nofollow noreferrer\">https://github.com/RationaleEmotions/autospawn</a></p>\n"}],"owner":{"account_id":17545100,"reputation":11,"user_id":12726564,"display_name":"moad hamouch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1490,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683212348,"creation_date":1579459819,"question_id":59813281,"body_markdown":"I&#39;m very new using TestNG and Java programming in general and I have a question in regards to runing testcases with **dataprovider** in **parallel**,\r\n\r\nin order to run dataprovider test cases in multiple tabs in a single  chrome window instead of many windows, I used selenium 4 which allows to open and switch to new tab using the folowing code\r\n\r\n    driver.switchTo().newWindow(WindowType.TAB);\r\n\r\nso, I wrote this code which is successfully run the test cases in sequence mode, but when i run it in parallel mode, it implements each line separately, before moving on to the other line,\r\n\r\nconsequently, it opens the 3 tabs at the same time, afterwards, it opens the link in the last tab 3 times, and finally it tries to do the 3 searches at the same time, and therefore it cannot execute them.\r\n\r\nI find as a result that testNG create a single webdriver to control all the tabs, which is logical to cause the failure of the tests in parallel mode.\r\n\r\n[https://i.stack.imgur.com/LV5KS.jpg][1]\r\n\r\nThis is the code:\r\n\r\n    package com.mycompany.app;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.Keys;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WindowType;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.BeforeTest;\r\n    import org.testng.annotations.DataProvider;\r\n    import org.testng.annotations.Test;\r\n    \r\n    public class testTab {\r\n    \r\n    \tWebDriver driver;\r\n    \r\n    \t@BeforeTest\r\n    \tpublic void beforeTest() {\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Browsers drivers\\\\chromedriver.exe&quot;);\r\n    \t\tdriver = new ChromeDriver();\r\n    \t}\r\n    \r\n    \t@BeforeMethod\r\n    \tpublic void newTab() {\r\n    \t\tdriver.switchTo().newWindow(WindowType.TAB);\r\n    \t}\r\n    \r\n    \t@Test(dataProvider = &quot;getData&quot;)\r\n    \tpublic void testAmazon1(String search_word) {\r\n    \t\tdriver.get(&quot;https://www.google.com/&quot;);\r\n    \t\tdriver.findElement(By.xpath(&quot;//input[@name=&#39;q&#39;]&quot;)).sendKeys(search_word + (Keys.RETURN));\r\n    \t}\r\n    \r\n    \t@DataProvider(parallel=true)\r\n    \tpublic Object[][] getData() {\r\n    \t\tObject[][] data = new Object[3][1];\r\n    \t\tdata[0][0] = &quot;bihi&quot;;\r\n    \t\tdata[1][0] = &quot;boutfounast&quot;;\r\n    \t\tdata[2][0] = &quot;hmad l9rran&quot;;\r\n    \t\treturn data;\r\n    \t}\r\n    \r\n    }\r\n\r\nThis is XML file\r\n\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    &lt;suite name=&quot;My Sample Suite&quot; parallel=&quot;methods&quot; thread-count=&quot;3&quot;&gt;\r\n    \r\n    \r\n    &lt;test name=&quot;Amazon test&quot;&gt;\r\n        &lt;classes&gt;\r\n            &lt;class name=&quot;com.mycompany.app.testTab&quot;&gt;&lt;/class&gt;  \r\n        &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n    \r\n    \r\n    &lt;/suite&gt;\r\n\r\n\r\nIs there a way to create a webdriver for each test?\r\nI am sorry for not being precise and thank you for your answers.\r\n\r\n  [1]: https://i.stack.imgur.com/LV5KS.jpg","title":"TestNG parallel DataProvider in tabs","body":"<p>I'm very new using TestNG and Java programming in general and I have a question in regards to runing testcases with <strong>dataprovider</strong> in <strong>parallel</strong>,</p>\n\n<p>in order to run dataprovider test cases in multiple tabs in a single  chrome window instead of many windows, I used selenium 4 which allows to open and switch to new tab using the folowing code</p>\n\n<pre><code>driver.switchTo().newWindow(WindowType.TAB);\n</code></pre>\n\n<p>so, I wrote this code which is successfully run the test cases in sequence mode, but when i run it in parallel mode, it implements each line separately, before moving on to the other line,</p>\n\n<p>consequently, it opens the 3 tabs at the same time, afterwards, it opens the link in the last tab 3 times, and finally it tries to do the 3 searches at the same time, and therefore it cannot execute them.</p>\n\n<p>I find as a result that testNG create a single webdriver to control all the tabs, which is logical to cause the failure of the tests in parallel mode.</p>\n\n<p><a href=\"https://i.stack.imgur.com/LV5KS.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/LV5KS.jpg</a></p>\n\n<p>This is the code:</p>\n\n<pre><code>package com.mycompany.app;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.Keys;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WindowType;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.BeforeTest;\nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Test;\n\npublic class testTab {\n\n    WebDriver driver;\n\n    @BeforeTest\n    public void beforeTest() {\n        System.setProperty(\"webdriver.chrome.driver\", \"C:\\\\Browsers drivers\\\\chromedriver.exe\");\n        driver = new ChromeDriver();\n    }\n\n    @BeforeMethod\n    public void newTab() {\n        driver.switchTo().newWindow(WindowType.TAB);\n    }\n\n    @Test(dataProvider = \"getData\")\n    public void testAmazon1(String search_word) {\n        driver.get(\"https://www.google.com/\");\n        driver.findElement(By.xpath(\"//input[@name='q']\")).sendKeys(search_word + (Keys.RETURN));\n    }\n\n    @DataProvider(parallel=true)\n    public Object[][] getData() {\n        Object[][] data = new Object[3][1];\n        data[0][0] = \"bihi\";\n        data[1][0] = \"boutfounast\";\n        data[2][0] = \"hmad l9rran\";\n        return data;\n    }\n\n}\n</code></pre>\n\n<p>This is XML file</p>\n\n<pre><code>&lt;!DOCTYPE suite SYSTEM \"http://testng.org/testng-1.0.dtd\"&gt;\n&lt;suite name=\"My Sample Suite\" parallel=\"methods\" thread-count=\"3\"&gt;\n\n\n&lt;test name=\"Amazon test\"&gt;\n    &lt;classes&gt;\n        &lt;class name=\"com.mycompany.app.testTab\"&gt;&lt;/class&gt;  \n    &lt;/classes&gt;\n&lt;/test&gt;\n\n\n&lt;/suite&gt;\n</code></pre>\n\n<p>Is there a way to create a webdriver for each test?\nI am sorry for not being precise and thank you for your answers.</p>\n"},{"tags":["java","http","get","access-token"],"comments":[{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":2,"creation_date":1682324608,"post_id":76089767,"comment_id":134191314,"body_markdown":"please attach more lines from the stacktrace. Please include the imports which you are using and which version of libriaries.","body":"please attach more lines from the stacktrace. Please include the imports which you are using and which version of libriaries."}],"answers":[{"tags":[],"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682325689,"creation_date":1682325089,"answer_id":76090012,"question_id":76089767,"body_markdown":"     java.lang.IllegalArgumentException: method GET must not have a request body.\r\n\r\nThis error means in your request can&#39;t send body with **get** method, you need to use **post** method for sending body with data. With **get** you can only take data.\r\n\r\nPlease read this page about Get VS Post methods, for introducing to get and post methods.\r\nhttps://www.javatpoint.com/get-vs-post\r\n\r\n\r\n    URL url = new URL(&quot;// Your web request&quot;);\r\n        \r\n    HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n    conn.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;); // if need spesify request type\r\n    conn.setRequestProperty(&quot;Authorization&quot;,&quot;Bearer TOKEN HERE&quot;);\r\n        \r\n    //e.g. bearer token=token is here\r\n\r\n    //conn.setRequestProperty(&quot;Content-Type&quot;,&quot;application/json&quot;);\r\n        \r\n    conn.setRequestMethod(&quot;GET&quot;);\r\n        ","title":"How to send http get with access token in java","body":"<pre><code> java.lang.IllegalArgumentException: method GET must not have a request body.\n</code></pre>\n<p>This error means in your request can't send body with <strong>get</strong> method, you need to use <strong>post</strong> method for sending body with data. With <strong>get</strong> you can only take data.</p>\n<p>Please read this page about Get VS Post methods, for introducing to get and post methods.\n<a href=\"https://www.javatpoint.com/get-vs-post\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/get-vs-post</a></p>\n<pre><code>URL url = new URL(&quot;// Your web request&quot;);\n    \nHttpURLConnection conn = (HttpURLConnection) url.openConnection();\nconn.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;); // if need spesify request type\nconn.setRequestProperty(&quot;Authorization&quot;,&quot;Bearer TOKEN HERE&quot;);\n    \n//e.g. bearer token=token is here\n\n//conn.setRequestProperty(&quot;Content-Type&quot;,&quot;application/json&quot;);\n    \nconn.setRequestMethod(&quot;GET&quot;);\n    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":28506661,"reputation":1,"user_id":21817243,"display_name":"Jo&#227;o Bonif&#225;cio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683212217,"creation_date":1683212217,"answer_id":76174586,"question_id":76089767,"body_markdown":"Your request can&#39;t send body with get, so you can turn the request into something like this: \r\n\r\nrequest.method(&quot;GET&quot;, null)\r\n\r\nThe request GET is now sending null, so you don&#39;t have to change it to POST anymore.\r\n\r\nI recommend you to use postman before go into real code, you can easily test things there, and if this didn&#39;t help try to use the lib okhttp/okio it should fit on your code.\r\n\r\nSee ya","title":"How to send http get with access token in java","body":"<p>Your request can't send body with get, so you can turn the request into something like this:</p>\n<p>request.method(&quot;GET&quot;, null)</p>\n<p>The request GET is now sending null, so you don't have to change it to POST anymore.</p>\n<p>I recommend you to use postman before go into real code, you can easily test things there, and if this didn't help try to use the lib okhttp/okio it should fit on your code.</p>\n<p>See ya</p>\n"}],"owner":{"account_id":28137419,"reputation":13,"user_id":21500965,"display_name":"ציפי גולדברג"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683212217,"creation_date":1682323248,"question_id":76089767,"body_markdown":"I received a valid token from the server, and now I want to send a GET request with the token.\r\n&lt;br&gt;\r\nmy libary:\r\n```\r\nimport java.io.IOException;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.URL;\r\nimport java.security.cert.X509Certificate;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport javax.net.ssl.SSLContext;\r\nimport org.apache.commons.io.IOUtils;\r\nimport org.apache.http.Consts;\r\nimport org.apache.http.HttpResponse;\r\nimport org.apache.http.NameValuePair;\r\nimport org.apache.http.client.entity.UrlEncodedFormEntity;\r\nimport org.apache.http.client.methods.CloseableHttpResponse;\r\nimport org.apache.http.client.methods.HttpGet;\r\nimport org.apache.http.client.methods.HttpPost;\r\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\nimport org.apache.http.impl.client.CloseableHttpClient;\r\nimport org.apache.http.impl.client.HttpClients;\r\nimport org.apache.http.message.BasicNameValuePair;\r\nimport org.apache.http.ssl.TrustStrategy;\r\nimport org.json.JSONObject;\r\n```\r\nmy code:\r\n\r\n```\r\n//My site is set as insecure, so I set the following setting\r\n\t\t\tTrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true;\r\n\r\n\t\t\tSSLContext sslContext = org.apache.http.ssl.SSLContexts.custom()\r\n\t\t\t\t\t.loadTrustMaterial(null, acceptingTrustStrategy)\r\n\t\t\t\t\t.build();\r\n\r\n\t\t\tSSLConnectionSocketFactory csf = new SSLConnectionSocketFactory(sslContext);\r\n\r\n\t\t\tCloseableHttpClient httpClient = HttpClients.custom()\r\n\t\t\t\t\t.setSSLSocketFactory(csf)\r\n\t\t\t\t\t.build();\r\n\t\t\t\r\n\t\t\tHttpGet request = new HttpGet(&quot;https://xxxxxxxxxxxxxxxxx&quot;);\r\n\t\t\trequest.addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + access_token);\r\n\t\t\tCloseableHttpResponse response = httpClient.execute(request);\r\n```\r\nbut i get eror:\r\n\r\n```\r\n java.lang.IllegalArgumentException: method GET must not have a request body.\r\n```\r\n\r\nI am new to HTTP calls,\r\nAnd I would be happy for help and a solution.","title":"How to send http get with access token in java","body":"<p>I received a valid token from the server, and now I want to send a GET request with the token.\n<br>\nmy libary:</p>\n<pre><code>import java.io.IOException;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.security.cert.X509Certificate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.net.ssl.SSLContext;\nimport org.apache.commons.io.IOUtils;\nimport org.apache.http.Consts;\nimport org.apache.http.HttpResponse;\nimport org.apache.http.NameValuePair;\nimport org.apache.http.client.entity.UrlEncodedFormEntity;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.message.BasicNameValuePair;\nimport org.apache.http.ssl.TrustStrategy;\nimport org.json.JSONObject;\n</code></pre>\n<p>my code:</p>\n<pre><code>//My site is set as insecure, so I set the following setting\n            TrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true;\n\n            SSLContext sslContext = org.apache.http.ssl.SSLContexts.custom()\n                    .loadTrustMaterial(null, acceptingTrustStrategy)\n                    .build();\n\n            SSLConnectionSocketFactory csf = new SSLConnectionSocketFactory(sslContext);\n\n            CloseableHttpClient httpClient = HttpClients.custom()\n                    .setSSLSocketFactory(csf)\n                    .build();\n            \n            HttpGet request = new HttpGet(&quot;https://xxxxxxxxxxxxxxxxx&quot;);\n            request.addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + access_token);\n            CloseableHttpResponse response = httpClient.execute(request);\n</code></pre>\n<p>but i get eror:</p>\n<pre><code> java.lang.IllegalArgumentException: method GET must not have a request body.\n</code></pre>\n<p>I am new to HTTP calls,\nAnd I would be happy for help and a solution.</p>\n"},{"tags":["java","spring-webflux","junit5"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1683212924,"post_id":76159842,"comment_id":134335220,"body_markdown":"Please add some example code for the question.","body":"Please add some example code for the question."}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683212184,"creation_date":1683212184,"answer_id":76174578,"question_id":76159842,"body_markdown":"If you have are writing a test that is starting the spring context (for example, the one annotated with `@SpringBootTest`), you&#39;ll be able to @Autowire beans from the context. This will give you actual (real) objects. \r\n\r\nOn the other hand, mocks are &#39;fake&#39; objects that look like real ones, but they do nothing - if you don&#39;t specify a clear behavior, they just return null.\r\n\r\nSo, when you mocked your WebClient, a code like this might throw an exception:\r\n```java\r\nwebClient.get()\r\n  .uri(&quot;/api/users/123&quot;)\r\n  .exchange()\r\n  ...etc\r\n```\r\nThat&#39;s because WebClient is using this fluent API which might be harder to mock. The return of the `.get()` will be null and therefore, the `.uri(...)` will throw an exception.\r\n\r\n\r\n----------\r\n\r\nSo, they provided some alternatives for mocking. As you mentioned in the question, there is this `WebTestClient`,  an object which follows the same interface but it&#39;s created specifically for unit testing. Since you ae already using this WebTestClient, there is no point in trying to mock it:  being a test object, it will not perform the actual HTTP call.\r\n ","title":"Should I use @Autowired annotation in java test classes?","body":"<p>If you have are writing a test that is starting the spring context (for example, the one annotated with <code>@SpringBootTest</code>), you'll be able to @Autowire beans from the context. This will give you actual (real) objects.</p>\n<p>On the other hand, mocks are 'fake' objects that look like real ones, but they do nothing - if you don't specify a clear behavior, they just return null.</p>\n<p>So, when you mocked your WebClient, a code like this might throw an exception:</p>\n<pre class=\"lang-java prettyprint-override\"><code>webClient.get()\n  .uri(&quot;/api/users/123&quot;)\n  .exchange()\n  ...etc\n</code></pre>\n<p>That's because WebClient is using this fluent API which might be harder to mock. The return of the <code>.get()</code> will be null and therefore, the <code>.uri(...)</code> will throw an exception.</p>\n<hr />\n<p>So, they provided some alternatives for mocking. As you mentioned in the question, there is this <code>WebTestClient</code>,  an object which follows the same interface but it's created specifically for unit testing. Since you ae already using this WebTestClient, there is no point in trying to mock it:  being a test object, it will not perform the actual HTTP call.</p>\n"}],"owner":{"account_id":21182175,"reputation":19,"user_id":15576348,"display_name":"MissConfusion"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76174578,"answer_count":1,"score":0,"last_activity_date":1683212184,"creation_date":1683076421,"question_id":76159842,"body_markdown":"I have always used @Mock and @injectMock in java test classes. I came in a weird situation today. When I do @mock for WebTestClient then it gives me null pointer exception saying that it has a possibility to be null.\r\n\r\nAnd when I change the annotation to @Autowire, it works as expected.\r\n\r\nPls let me know why is @mock not working in above case. I apologize if the question is really stupid to ask here.\r\n\r\nI am trying to test a controller that returns Flux\\&lt;Integer\\&gt;.\r\n\r\nAlso pls answer this for me:\r\n\r\n- Is it a good practice to use @Autowired in test classes or we only use it in special cases?\r\n\r\nI was expecting using mock should not give me NPE.","title":"Should I use @Autowired annotation in java test classes?","body":"<p>I have always used @Mock and @injectMock in java test classes. I came in a weird situation today. When I do @mock for WebTestClient then it gives me null pointer exception saying that it has a possibility to be null.</p>\n<p>And when I change the annotation to @Autowire, it works as expected.</p>\n<p>Pls let me know why is @mock not working in above case. I apologize if the question is really stupid to ask here.</p>\n<p>I am trying to test a controller that returns Flux&lt;Integer&gt;.</p>\n<p>Also pls answer this for me:</p>\n<ul>\n<li>Is it a good practice to use @Autowired in test classes or we only use it in special cases?</li>\n</ul>\n<p>I was expecting using mock should not give me NPE.</p>\n"},{"tags":["java","android","android-fragments","lightbox"],"owner":{"account_id":25384487,"reputation":47,"user_id":19196450,"display_name":"Denis De Pauli "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683212042,"creation_date":1683212042,"question_id":76174551,"body_markdown":"Searched everywhere with no results\r\n(Android studio 2022.1.1 + java + Material 3) \r\nI wanna obtain a sort of lightbox effect on tapping an image (or pressing a button), I&#39;ve tryied to create a fragment with a full screen with no header but I don&#236;t know how to obtain the semi-trasparency on the parts of the screen not covered by the image..\r\nMaybe FragmentDialog? but can&#39;t set effect on background, I obtain an opaque form (as all the others)","title":"&quot;Lightbox effect&quot; on app (android studio + java)","body":"<p>Searched everywhere with no results\n(Android studio 2022.1.1 + java + Material 3)\nI wanna obtain a sort of lightbox effect on tapping an image (or pressing a button), I've tryied to create a fragment with a full screen with no header but I donìt know how to obtain the semi-trasparency on the parts of the screen not covered by the image..\nMaybe FragmentDialog? but can't set effect on background, I obtain an opaque form (as all the others)</p>\n"},{"tags":["java","spring-boot","enums"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1683211665,"post_id":76165880,"comment_id":134334909,"body_markdown":"I think it would be better to use an `EnumSet` instead of an `int`.","body":"I think it would be better to use an <code>EnumSet</code> instead of an <code>int</code>."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1683211919,"post_id":76165880,"comment_id":134334957,"body_markdown":"You are describing bit flags. Now that you know the term, you can google for it ;) You can use bitwise operations to check if a specific value is included in the `int` that contains the flags.","body":"You are describing bit flags. Now that you know the term, you can google for it ;) You can use bitwise operations to check if a specific value is included in the <code>int</code> that contains the flags."},{"owner":{"account_id":6547329,"reputation":843,"user_id":6492006,"accept_rate":83,"display_name":"cd491415"},"score":0,"creation_date":1683217610,"post_id":76165880,"comment_id":134336423,"body_markdown":"Yup, figured that out.  I find once you figure out the name of the term, then it gets easier.  Already provided my solution in answer below.  It uses bitwise operations.  Not sure if it is what is considered by &quot;flags&quot; term.  Mind taking look at my answer and thanks","body":"Yup, figured that out.  I find once you figure out the name of the term, then it gets easier.  Already provided my solution in answer below.  It uses bitwise operations.  Not sure if it is what is considered by &quot;flags&quot; term.  Mind taking look at my answer and thanks"}],"answers":[{"tags":[],"owner":{"account_id":6547329,"reputation":843,"user_id":6492006,"accept_rate":83,"display_name":"cd491415"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683141201,"creation_date":1683141201,"answer_id":76167293,"question_id":76165880,"body_markdown":"I came up with another approach by using **EnumSet**\r\n\r\n```java\r\npublic boolean isValid(Integer value) {\r\n\r\n    EnumSet&lt;CarTypeEnum&gt; enumSet = EnumSet.noneOf(CarTypeEnum.class);\r\n\r\n    for(CarTypeEnum carType: CarTypeEnum.values()) {\r\n        if ((value &amp; carType.getRequestType()) == carType.getRequestType())\r\n            enumSet.add(carType);\r\n\r\n    }\r\n\r\n    return enumSet.isEmpty() ? false : true;\r\n}\r\n```\r\n\r\nIn this approach, I create an empty `enumSet` first.\r\n\r\nNext I navigate through all existing values in my `CarTypeEnum` and do a bitwise AND (&amp;) operation to determine if a given value is a match and if so, I add it to `enumSet`.\r\n\r\nThen simply check if `enumSet` is empty or not.","title":"Check any combination of defined enum constant is valid","body":"<p>I came up with another approach by using <strong>EnumSet</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean isValid(Integer value) {\n\n    EnumSet&lt;CarTypeEnum&gt; enumSet = EnumSet.noneOf(CarTypeEnum.class);\n\n    for(CarTypeEnum carType: CarTypeEnum.values()) {\n        if ((value &amp; carType.getRequestType()) == carType.getRequestType())\n            enumSet.add(carType);\n\n    }\n\n    return enumSet.isEmpty() ? false : true;\n}\n</code></pre>\n<p>In this approach, I create an empty <code>enumSet</code> first.</p>\n<p>Next I navigate through all existing values in my <code>CarTypeEnum</code> and do a bitwise AND (&amp;) operation to determine if a given value is a match and if so, I add it to <code>enumSet</code>.</p>\n<p>Then simply check if <code>enumSet</code> is empty or not.</p>\n"}],"owner":{"account_id":6547329,"reputation":843,"user_id":6492006,"accept_rate":83,"display_name":"cd491415"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76167293,"answer_count":1,"score":-1,"last_activity_date":1683211615,"creation_date":1683129112,"question_id":76165880,"body_markdown":"Given I have enum type defined as below\r\n\r\n```java\r\npublic enum CarTypeEnum {\r\n    SEDAN(1),\r\n    CABRIO(2),\r\n    ELECTRIC(4),\r\n    ...;\r\n\r\n    private final int carType;\r\n\r\n    private CarType(int carType) {\r\n        this.carype = carType;\r\n    }\r\n\r\n    public int getCarType() {\r\n        return carType;\r\n    }\r\n}\r\n```\r\n\r\nAnd a class with an int value representing carType:\r\n\r\n```java\r\npublic class Car {\r\n\r\n    private String id;\r\n\r\n    private int carType;\r\n}\r\n```\r\n\r\nI know how to check for either one of the defined values in `CarTypeEnum`:\r\n\r\n```java\r\npublic boolean isValid(int carType) {\r\n\r\n   return value == CardType.SEDAN.getType()\r\n      || value == CardType.CABRIO.getCarType()\r\n      || value == CardType.ELECTRIC.getCarType();\r\n}\r\n```\r\n\r\nHowever, I need to ensure that the `carType` int value can be **any** combination of valid enum values defined in `CarTypeEnum`:\r\n\r\nSo, it could be 1, 2, 3=(2+1), 4, 5=(4+1), 6=(4+2), 7=(4+2+1), ...\r\n\r\n\r\n\r\n","title":"Check any combination of defined enum constant is valid","body":"<p>Given I have enum type defined as below</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum CarTypeEnum {\n    SEDAN(1),\n    CABRIO(2),\n    ELECTRIC(4),\n    ...;\n\n    private final int carType;\n\n    private CarType(int carType) {\n        this.carype = carType;\n    }\n\n    public int getCarType() {\n        return carType;\n    }\n}\n</code></pre>\n<p>And a class with an int value representing carType:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Car {\n\n    private String id;\n\n    private int carType;\n}\n</code></pre>\n<p>I know how to check for either one of the defined values in <code>CarTypeEnum</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean isValid(int carType) {\n\n   return value == CardType.SEDAN.getType()\n      || value == CardType.CABRIO.getCarType()\n      || value == CardType.ELECTRIC.getCarType();\n}\n</code></pre>\n<p>However, I need to ensure that the <code>carType</code> int value can be <strong>any</strong> combination of valid enum values defined in <code>CarTypeEnum</code>:</p>\n<p>So, it could be 1, 2, 3=(2+1), 4, 5=(4+1), 6=(4+2), 7=(4+2+1), ...</p>\n"},{"tags":["java","mariadb","minecraft","bukkit","hikaricp"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1683269664,"post_id":76174455,"comment_id":134343825,"body_markdown":"Are you sure the mariadb driver are well exporter into the jar?","body":"Are you sure the mariadb driver are well exporter into the jar?"},{"owner":{"account_id":28506459,"reputation":11,"user_id":21817052,"display_name":"Tom&#225;š Weglarz"},"score":0,"creation_date":1683312299,"post_id":76174455,"comment_id":134353197,"body_markdown":"I compile all in. So should be fine. You can check the GitHub if you want","body":"I compile all in. So should be fine. You can check the GitHub if you want"},{"owner":{"account_id":5553349,"reputation":123,"user_id":4405673,"accept_rate":0,"display_name":"LoreSchaeffer"},"score":0,"creation_date":1684530008,"post_id":76174455,"comment_id":134535981,"body_markdown":"Open the jar with any zip program and check if the dependencies are present. Usually you should shade them using maven","body":"Open the jar with any zip program and check if the dependencies are present. Usually you should shade them using maven"}],"owner":{"account_id":28506459,"reputation":11,"user_id":21817052,"display_name":"Tom&#225;š Weglarz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683211439,"creation_date":1683211392,"question_id":76174455,"body_markdown":"I am really struggling with this exception for quite a while now.\r\n\r\nI have a java program (TG-Toolkit), where I have classes to manage common stuff used for both proxy and backend plugins. One of the main usages is database. I use HikariCP with MariaDB combo. Everything works fine, but sometimes (like 30% of restarts) I get this exception. Everything still works fine after that and as I said, I get this exception only sometimes.\r\n\r\nMariaDB version 3.1.4\r\nHikariCP version 5.0.1\r\n\r\nI use try-with-resource for handling connections and resultsets\r\n\r\n\r\n```\r\n[12:05:27] [Server thread/INFO]: [Core] [STDOUT] BEFORE CLOSE\r\n[12:05:27] [Server thread/WARN]: Nag author(s): &#39;[Wega]&#39; of &#39;Core&#39; about their usage of System.out/err.print. Please use your plugin&#39;s logger instead (JavaPlugin#getLogger).\r\n[12:05:27] [Server thread/WARN]: [Toolkit] HikariCP activity connections: 0\r\n[12:05:27] [Server thread/INFO]: [com.zaxxer.hikari.HikariDataSource] HikariPool-1 - Shutdown initiated...\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at org.bukkit.plugin.java.PluginClassLoader.loadClass0(PluginClassLoader.java:177)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at org.bukkit.plugin.java.PluginClassLoader.loadClass(PluginClassLoader.java:124)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[12:05:27] [Server thread/INFO]: [com.zaxxer.hikari.HikariDataSource] HikariPool-1 - Shutdown completed.\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\r\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\r\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\r\n[code][12:05:27] [Server thread/INFO]: [Core] [STDOUT] AFTER CLOSE\r\n```\r\n\r\nThis is the code I use:\r\n\r\n```\r\npackage net.trustgames.toolkit.managers;\r\n\r\nimport com.zaxxer.hikari.HikariConfig;\r\nimport com.zaxxer.hikari.HikariDataSource;\r\nimport net.trustgames.toolkit.Toolkit;\r\nimport org.jetbrains.annotations.NotNull;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.SQLException;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport java.util.concurrent.TimeUnit;\r\nimport java.util.logging.Logger;\r\n\r\n/**\r\n * This class handles the basic MariaDB and HikariCP methods such as getting connection,\r\n * creating the database, table (if not exists) and closing the hikari connection. Note that the\r\n * plugin#getLogger is used instead of Bukkit#getLogger, because async methods should not access Bukkit API\r\n */\r\npublic final class HikariManager {\r\n\r\n    private static final Logger logger = Toolkit.getLogger();\r\n    private static HikariDataSource dataSource;\r\n\r\n    /**\r\n     * Sets parameters and creates new pool.\r\n     * (is run async)\r\n     */\r\n    public HikariManager(@NotNull String user,\r\n                         @NotNull String password,\r\n                         @NotNull String ip,\r\n                         @NotNull String port,\r\n                         @NotNull String database,\r\n                         @NotNull Integer poolSize) {\r\n        HikariConfig hikariConfig = new HikariConfig();\r\n        hikariConfig.setDriverClassName(&quot;org.mariadb.jdbc.Driver&quot;);\r\n        hikariConfig.setJdbcUrl(&quot;jdbc:mariadb://&quot; + ip + &quot;:&quot; + port + &quot;/&quot; + database);\r\n        hikariConfig.addDataSourceProperty(&quot;user&quot;, user);\r\n        hikariConfig.addDataSourceProperty(&quot;password&quot;, password);\r\n        hikariConfig.setMaximumPoolSize(poolSize);\r\n\r\n        dataSource = new HikariDataSource(hikariConfig);\r\n    }\r\n\r\n    /**\r\n     * gets a new connection from the hikaricp pool\r\n     */\r\n    public Connection getConnection() {\r\n        try {\r\n            return dataSource.getConnection();\r\n        } catch (SQLException e) {\r\n            System.out.println(&quot;RUNTIME EXCEPTION 1&quot;);\r\n            throw new RuntimeException(&quot;Getting a new connection from HikariCP&quot;, e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param callback When datasource is initialized\r\n     */\r\n    public void onDataSourceInitialized(Runnable callback) {\r\n        CompletableFuture.runAsync(() -&gt; {\r\n                    if (dataSource != null) {\r\n                        callback.run();\r\n                    } else {\r\n                        // if dataSource is null, schedule the callback to be run when it is initialized\r\n                        try {\r\n                            Thread.sleep(500L);\r\n                            onDataSourceInitialized(callback);\r\n                        } catch (InterruptedException e) {\r\n                            System.out.println(&quot;RUNTIME EXCEPTION 10&quot;);\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    }\r\n                }).orTimeout(10L, TimeUnit.SECONDS)\r\n                .exceptionally(throwable -&gt; {\r\n                    Toolkit.getLogger().severe(&quot;HikariCP data source initialization timed out!&quot;);\r\n                    return null;\r\n                });\r\n    }\r\n\r\n    /**\r\n     * @return\r\n     * true - if datasource is initialized&lt;p&gt;\r\n     * false - if datasource is not initialized\r\n     */\r\n    public boolean isDataSourceInitialized() {\r\n        return dataSource != null;\r\n    }\r\n\r\n    /**\r\n     * checks if the table exists, if it doesn&#39;t, it creates one using the given SQL statement\r\n     * (is run async)\r\n     *\r\n     * @param tableName       The name of the table\r\n     * @param stringStatement The SQL statement in String\r\n     */\r\n    public void initializeTable(@NotNull String tableName, @NotNull String stringStatement) {\r\n        CompletableFuture.runAsync(() -&gt; {\r\n            try (Connection connection = getConnection()) {\r\n                try (PreparedStatement statement = connection.prepareStatement(stringStatement)) {\r\n                    statement.executeUpdate();\r\n                }\r\n            } catch (SQLException e) {\r\n                System.out.println(&quot;RUNTIME EXCEPTION 11&quot;);\r\n                throw new RuntimeException(&quot;Unable to create missing &quot; + tableName + &quot; table in the database!&quot;, e);\r\n            }\r\n        });\r\n    }\r\n\r\n    public void close() {\r\n        Toolkit.getLogger().warning(&quot;HikariCP activity connections: &quot; + dataSource.getHikariPoolMXBean().getActiveConnections());\r\n        dataSource.close();\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis is how I close the pool in onDisable method of my spigot plugin.\r\n\r\n```\r\npublic void closeConnections() {\r\n        if (hikariManager.isDataSourceInitialized())\r\n            hikariManager.close();\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nHere is also a link to the full code on github. Shouldn&#39;t be relevent to this, but if anyone wants to take a deeper look, be my guest.\r\nhttps://github.com/ThomasWega/TG-Toolkit/\r\nhttps://github.com/ThomasWega/TG-Core/\r\n\r\n\r\nI thought that I might still have some open connections when I close the pool, so I am printing it to the console, but it shows 0 connections active at the time of the spigot server shutdown, so that shouldn&#39;t be the issue. I&#180;ve also tried adding some printing to relevant methods, but no luck there as well. It really seems like it is causes just by closing the pool, altough I can&#39;t figure out why is that.","title":"&quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket","body":"<p>I am really struggling with this exception for quite a while now.</p>\n<p>I have a java program (TG-Toolkit), where I have classes to manage common stuff used for both proxy and backend plugins. One of the main usages is database. I use HikariCP with MariaDB combo. Everything works fine, but sometimes (like 30% of restarts) I get this exception. Everything still works fine after that and as I said, I get this exception only sometimes.</p>\n<p>MariaDB version 3.1.4\nHikariCP version 5.0.1</p>\n<p>I use try-with-resource for handling connections and resultsets</p>\n<pre><code>[12:05:27] [Server thread/INFO]: [Core] [STDOUT] BEFORE CLOSE\n[12:05:27] [Server thread/WARN]: Nag author(s): '[Wega]' of 'Core' about their usage of System.out/err.print. Please use your plugin's logger instead (JavaPlugin#getLogger).\n[12:05:27] [Server thread/WARN]: [Toolkit] HikariCP activity connections: 0\n[12:05:27] [Server thread/INFO]: [com.zaxxer.hikari.HikariDataSource] HikariPool-1 - Shutdown initiated...\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\n[12:05:27] [HikariPool-1 connection closer/WARN]: java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at org.bukkit.plugin.java.PluginClassLoader.loadClass0(PluginClassLoader.java:177)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at org.bukkit.plugin.java.PluginClassLoader.loadClass(PluginClassLoader.java:124)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\n[12:05:27] [HikariPool-1 connection closer/WARN]: java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\n[12:05:27] [HikariPool-1 connection closer/WARN]: Exception in thread &quot;HikariPool-1 connection closer&quot; java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n[12:05:27] [Server thread/INFO]: [com.zaxxer.hikari.HikariDataSource] HikariPool-1 - Shutdown completed.\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\n[12:05:27] [HikariPool-1 connection closer/WARN]: java.lang.NoClassDefFoundError: org/mariadb/jdbc/message/client/QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.client.impl.StandardClient.close(StandardClient.java:1003)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//org.mariadb.jdbc.Connection.close(Connection.java:235)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.PoolBase.quietlyCloseConnection(PoolBase.java:137)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at core-0.2-SNAPSHOT.jar//com.zaxxer.hikari.pool.HikariPool.lambda$closeConnection$1(HikariPool.java:444)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n[12:05:27] [HikariPool-1 connection closer/WARN]:     at java.base/java.lang.Thread.run(Thread.java:833)\n[12:05:27] [HikariPool-1 connection closer/WARN]: Caused by: java.lang.ClassNotFoundException: org.mariadb.jdbc.message.client.QuitPacket\n[12:05:27] [HikariPool-1 connection closer/WARN]:     ... 7 more\n[code][12:05:27] [Server thread/INFO]: [Core] [STDOUT] AFTER CLOSE\n</code></pre>\n<p>This is the code I use:</p>\n<pre><code>package net.trustgames.toolkit.managers;\n\nimport com.zaxxer.hikari.HikariConfig;\nimport com.zaxxer.hikari.HikariDataSource;\nimport net.trustgames.toolkit.Toolkit;\nimport org.jetbrains.annotations.NotNull;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.TimeUnit;\nimport java.util.logging.Logger;\n\n/**\n * This class handles the basic MariaDB and HikariCP methods such as getting connection,\n * creating the database, table (if not exists) and closing the hikari connection. Note that the\n * plugin#getLogger is used instead of Bukkit#getLogger, because async methods should not access Bukkit API\n */\npublic final class HikariManager {\n\n    private static final Logger logger = Toolkit.getLogger();\n    private static HikariDataSource dataSource;\n\n    /**\n     * Sets parameters and creates new pool.\n     * (is run async)\n     */\n    public HikariManager(@NotNull String user,\n                         @NotNull String password,\n                         @NotNull String ip,\n                         @NotNull String port,\n                         @NotNull String database,\n                         @NotNull Integer poolSize) {\n        HikariConfig hikariConfig = new HikariConfig();\n        hikariConfig.setDriverClassName(&quot;org.mariadb.jdbc.Driver&quot;);\n        hikariConfig.setJdbcUrl(&quot;jdbc:mariadb://&quot; + ip + &quot;:&quot; + port + &quot;/&quot; + database);\n        hikariConfig.addDataSourceProperty(&quot;user&quot;, user);\n        hikariConfig.addDataSourceProperty(&quot;password&quot;, password);\n        hikariConfig.setMaximumPoolSize(poolSize);\n\n        dataSource = new HikariDataSource(hikariConfig);\n    }\n\n    /**\n     * gets a new connection from the hikaricp pool\n     */\n    public Connection getConnection() {\n        try {\n            return dataSource.getConnection();\n        } catch (SQLException e) {\n            System.out.println(&quot;RUNTIME EXCEPTION 1&quot;);\n            throw new RuntimeException(&quot;Getting a new connection from HikariCP&quot;, e);\n        }\n    }\n\n    /**\n     * @param callback When datasource is initialized\n     */\n    public void onDataSourceInitialized(Runnable callback) {\n        CompletableFuture.runAsync(() -&gt; {\n                    if (dataSource != null) {\n                        callback.run();\n                    } else {\n                        // if dataSource is null, schedule the callback to be run when it is initialized\n                        try {\n                            Thread.sleep(500L);\n                            onDataSourceInitialized(callback);\n                        } catch (InterruptedException e) {\n                            System.out.println(&quot;RUNTIME EXCEPTION 10&quot;);\n                            throw new RuntimeException(e);\n                        }\n                    }\n                }).orTimeout(10L, TimeUnit.SECONDS)\n                .exceptionally(throwable -&gt; {\n                    Toolkit.getLogger().severe(&quot;HikariCP data source initialization timed out!&quot;);\n                    return null;\n                });\n    }\n\n    /**\n     * @return\n     * true - if datasource is initialized&lt;p&gt;\n     * false - if datasource is not initialized\n     */\n    public boolean isDataSourceInitialized() {\n        return dataSource != null;\n    }\n\n    /**\n     * checks if the table exists, if it doesn't, it creates one using the given SQL statement\n     * (is run async)\n     *\n     * @param tableName       The name of the table\n     * @param stringStatement The SQL statement in String\n     */\n    public void initializeTable(@NotNull String tableName, @NotNull String stringStatement) {\n        CompletableFuture.runAsync(() -&gt; {\n            try (Connection connection = getConnection()) {\n                try (PreparedStatement statement = connection.prepareStatement(stringStatement)) {\n                    statement.executeUpdate();\n                }\n            } catch (SQLException e) {\n                System.out.println(&quot;RUNTIME EXCEPTION 11&quot;);\n                throw new RuntimeException(&quot;Unable to create missing &quot; + tableName + &quot; table in the database!&quot;, e);\n            }\n        });\n    }\n\n    public void close() {\n        Toolkit.getLogger().warning(&quot;HikariCP activity connections: &quot; + dataSource.getHikariPoolMXBean().getActiveConnections());\n        dataSource.close();\n    }\n}\n\n</code></pre>\n<p>This is how I close the pool in onDisable method of my spigot plugin.</p>\n<pre><code>public void closeConnections() {\n        if (hikariManager.isDataSourceInitialized())\n            hikariManager.close();\n}\n</code></pre>\n<p>Here is also a link to the full code on github. Shouldn't be relevent to this, but if anyone wants to take a deeper look, be my guest.\n<a href=\"https://github.com/ThomasWega/TG-Toolkit/\" rel=\"nofollow noreferrer\">https://github.com/ThomasWega/TG-Toolkit/</a>\n<a href=\"https://github.com/ThomasWega/TG-Core/\" rel=\"nofollow noreferrer\">https://github.com/ThomasWega/TG-Core/</a></p>\n<p>I thought that I might still have some open connections when I close the pool, so I am printing it to the console, but it shows 0 connections active at the time of the spigot server shutdown, so that shouldn't be the issue. I´ve also tried adding some printing to relevant methods, but no luck there as well. It really seems like it is causes just by closing the pool, altough I can't figure out why is that.</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1683205535,"post_id":76173525,"comment_id":134333116,"body_markdown":"Override the `cell.setCellValue` calls to check the value  and apply the safe style whenever a new cell is populated?","body":"Override the <code>cell.setCellValue</code> calls to check the value  and apply the safe style whenever a new cell is populated?"},{"owner":{"account_id":3444838,"reputation":840,"user_id":2885897,"display_name":"fiffy"},"score":0,"creation_date":1683205681,"post_id":76173525,"comment_id":134333167,"body_markdown":"Yeah but how? I could of course write a utility method that does that checking and applies the style, but i&#39;d have to implement it all over our codebase, and if a new dev creates an excel-export he&#39;s prune to forget about this.","body":"Yeah but how? I could of course write a utility method that does that checking and applies the style, but i&#39;d have to implement it all over our codebase, and if a new dev creates an excel-export he&#39;s prune to forget about this."},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1683206325,"post_id":76173525,"comment_id":134333366,"body_markdown":"Have your own wrapper around SXSSF that implements this, and make sure that your developers only ever pull in your version and not the vanilla Apache POI?","body":"Have your own wrapper around SXSSF that implements this, and make sure that your developers only ever pull in your version and not the vanilla Apache POI?"}],"owner":{"account_id":3444838,"reputation":840,"user_id":2885897,"display_name":"fiffy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683211147,"creation_date":1683205366,"question_id":76173525,"body_markdown":"We have a project with quite a big code base and I&#39;m looking for a way to implement a security-feature, where the `setQuotePrefixed(true);` style-flag is automatically applied to cells with content that starts with a `=` (as these contents would be interpreted as formulas once Excel is opened and the cell value is changed or pressed enter on unchanged).\r\n\r\nWe already have a class that produces &quot;clean&quot; instances of XSSFWorkbook (with some core properties nilled out). There I&#39;ve implemented a method to create autofixing workbooks, but this is not working for streaming workbooks (SXSSFWorkbook), because these are already streamed out before the &quot;commit&quot; method is called.\r\n\r\nDo you know how I could implement such a behaviour for SXSSFWorkbooks?\r\n\r\nHere&#39;s my code for XSSFWorkbooks:\r\n\r\n```java\r\npublic static XSSFWorkbook createCleanXSSFWorkbook(InputStream is) throws IOException\r\n{\r\n\tXSSFWorkbook wb=new XSSFWorkbook(is){\r\n\t\t@Override\r\n\t\tprotected void commit() throws IOException\r\n\t\t{\r\n\t\t\tapplySafeCellStyles(this);\r\n\t\t\tsuper.commit();\r\n\t\t}\r\n\t};\r\n\tcleanXSSFMetaInformation(wb);\r\n\treturn wb;\r\n}\r\n\r\nprivate static void applySafeCellStyles(Workbook wb)\r\n{\r\n\tint sheets = wb.getNumberOfSheets();\r\n\tMap&lt;CellStyle, CellStyle&gt; styleToSafeStyleMap = new HashMap&lt;&gt;();\r\n\tfor (int sheetNumber = 0; sheetNumber &lt; sheets; sheetNumber++)\r\n\t{\r\n\t\tSheet sheet = wb.getSheetAt(sheetNumber);\r\n\t\tfor (Row row : sheet)\r\n\t\t{\r\n\t\t\tfor (Cell cell : row)\r\n\t\t\t{\r\n\t\t\t\tif (cell.getCellType() == CellType.STRING)\r\n\t\t\t\t{\r\n\t\t\t\t\tString cellValue = cell.getStringCellValue();\r\n\t\t\t\t\tif (cellValue.startsWith(&quot;=&quot;))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tCellStyle thisCellStyle = cell.getCellStyle();\r\n\t\t\t\t\t\tCellStyle safeCellStyle = styleToSafeStyleMap.get(thisCellStyle);\r\n\t\t\t\t\t\tif (safeCellStyle == null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsafeCellStyle = wb.createCellStyle();\r\n\t\t\t\t\t\t\tsafeCellStyle.cloneStyleFrom(thisCellStyle);\r\n\t\t\t\t\t\t\tsafeCellStyle.setQuotePrefixed(true);\r\n\t\t\t\t\t\t\tstyleToSafeStyleMap.put(thisCellStyle, safeCellStyle);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcell.setCellStyle(safeCellStyle);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n","title":"Apply &quot;setQuotePrefixed(true)&quot; automatically","body":"<p>We have a project with quite a big code base and I'm looking for a way to implement a security-feature, where the <code>setQuotePrefixed(true);</code> style-flag is automatically applied to cells with content that starts with a <code>=</code> (as these contents would be interpreted as formulas once Excel is opened and the cell value is changed or pressed enter on unchanged).</p>\n<p>We already have a class that produces &quot;clean&quot; instances of XSSFWorkbook (with some core properties nilled out). There I've implemented a method to create autofixing workbooks, but this is not working for streaming workbooks (SXSSFWorkbook), because these are already streamed out before the &quot;commit&quot; method is called.</p>\n<p>Do you know how I could implement such a behaviour for SXSSFWorkbooks?</p>\n<p>Here's my code for XSSFWorkbooks:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static XSSFWorkbook createCleanXSSFWorkbook(InputStream is) throws IOException\n{\n    XSSFWorkbook wb=new XSSFWorkbook(is){\n        @Override\n        protected void commit() throws IOException\n        {\n            applySafeCellStyles(this);\n            super.commit();\n        }\n    };\n    cleanXSSFMetaInformation(wb);\n    return wb;\n}\n\nprivate static void applySafeCellStyles(Workbook wb)\n{\n    int sheets = wb.getNumberOfSheets();\n    Map&lt;CellStyle, CellStyle&gt; styleToSafeStyleMap = new HashMap&lt;&gt;();\n    for (int sheetNumber = 0; sheetNumber &lt; sheets; sheetNumber++)\n    {\n        Sheet sheet = wb.getSheetAt(sheetNumber);\n        for (Row row : sheet)\n        {\n            for (Cell cell : row)\n            {\n                if (cell.getCellType() == CellType.STRING)\n                {\n                    String cellValue = cell.getStringCellValue();\n                    if (cellValue.startsWith(&quot;=&quot;))\n                    {\n                        CellStyle thisCellStyle = cell.getCellStyle();\n                        CellStyle safeCellStyle = styleToSafeStyleMap.get(thisCellStyle);\n                        if (safeCellStyle == null)\n                        {\n                            safeCellStyle = wb.createCellStyle();\n                            safeCellStyle.cloneStyleFrom(thisCellStyle);\n                            safeCellStyle.setQuotePrefixed(true);\n                            styleToSafeStyleMap.put(thisCellStyle, safeCellStyle);\n                        }\n                        \n                        cell.setCellStyle(safeCellStyle);\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1637033613,"post_id":69983438,"comment_id":123710922,"body_markdown":"IMHO you should learn not to rely on `while (true)` style loops, it&#39;s lazy and can cause lots of unintended issues and can be difficult to ascertain the conditions under which the loop should exit.  Instead you should have an &quot;exit&quot; value which you can toggle based on the user input","body":"IMHO you should learn not to rely on <code>while (true)</code> style loops, it&#39;s lazy and can cause lots of unintended issues and can be difficult to ascertain the conditions under which the loop should exit.  Instead you should have an &quot;exit&quot; value which you can toggle based on the user input"},{"owner":{"account_id":23350243,"reputation":29,"user_id":17423907,"display_name":"JOEGREEN"},"score":0,"creation_date":1637034012,"post_id":69983438,"comment_id":123710979,"body_markdown":"@MadProgrammer I was using `while(true)` because I was tired of re-running the code every single time I use it","body":"@MadProgrammer I was using <code>while(true)</code> because I was tired of re-running the code every single time I use it"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1637034162,"post_id":69983438,"comment_id":123710997,"body_markdown":"Yes, so now try and use a `exit` value to control when the loop should exit based on your requirements","body":"Yes, so now try and use a <code>exit</code> value to control when the loop should exit based on your requirements"}],"answers":[{"tags":[],"owner":{"account_id":23350408,"reputation":11,"user_id":17424043,"display_name":"zera"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1637093214,"creation_date":1637034377,"answer_id":69983531,"question_id":69983438,"body_markdown":"Add your console code to the while-loop; press &#39;a&#39; or &#39;A&#39; to exit.\r\n\r\n       Scanner sc = new Scanner(System.in);\r\n       //Type in &quot;a&quot; to end\r\n        while (!sc.next().equalsIgnoreCase(&quot;a&quot;)) {\r\n              // console code here\r\n        }\r\n        System.out.println(&quot;Exiting&quot;);","title":"How to terminate an infinite console loop by letting the user press a specific key on the keyboard in java?","body":"<p>Add your console code to the while-loop; press 'a' or 'A' to exit.</p>\n<pre><code>   Scanner sc = new Scanner(System.in);\n   //Type in &quot;a&quot; to end\n    while (!sc.next().equalsIgnoreCase(&quot;a&quot;)) {\n          // console code here\n    }\n    System.out.println(&quot;Exiting&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":449176,"reputation":126,"user_id":843811,"display_name":"Jorge Duarte"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637036708,"creation_date":1637036708,"answer_id":69983742,"question_id":69983438,"body_markdown":"Two examples of doing what you want:\r\n\r\nFirst example:\r\n\r\n        Scanner sc = new Scanner(System.in);\r\n\t\tString input = null;\r\n\t\t\r\n\t\tdo {\r\n\t\t\tSystem.out.println(&quot;Type X to exit and hit enter&quot;);\r\n\t\t\tinput = sc.next();\r\n\t\t} while(!input.equalsIgnoreCase(&quot;x&quot;));\r\n\t\t\r\n\t\tsc.close();\r\n\r\n\r\n\r\nSecond example:\r\n\r\n        Scanner sc = new Scanner(System.in);\r\n\t\tString input = null;\r\n\t\tdo {\r\n\r\n\t\t\tSystem.out.println(&quot;Type X to exit and hit enter&quot;);\r\n\t\t\tinput = sc.next();\r\n\t\t\t\r\n\t\t\tif (input.equalsIgnoreCase(&quot;x&quot;)) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} while(true);\r\n\r\n        sc.close();","title":"How to terminate an infinite console loop by letting the user press a specific key on the keyboard in java?","body":"<p>Two examples of doing what you want:</p>\n<p>First example:</p>\n<pre><code>    Scanner sc = new Scanner(System.in);\n    String input = null;\n    \n    do {\n        System.out.println(&quot;Type X to exit and hit enter&quot;);\n        input = sc.next();\n    } while(!input.equalsIgnoreCase(&quot;x&quot;));\n    \n    sc.close();\n</code></pre>\n<p>Second example:</p>\n<pre><code>    Scanner sc = new Scanner(System.in);\n    String input = null;\n    do {\n\n        System.out.println(&quot;Type X to exit and hit enter&quot;);\n        input = sc.next();\n        \n        if (input.equalsIgnoreCase(&quot;x&quot;)) {\n            break;\n        }\n    } while(true);\n\n    sc.close();\n</code></pre>\n"}],"owner":{"account_id":23350243,"reputation":29,"user_id":17423907,"display_name":"JOEGREEN"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":398,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1683211120,"creation_date":1637033364,"question_id":69983438,"body_markdown":"As you can see, it is an infinite loop, and I want to know if I could assign a key on the keyboard that terminates and stops this loop whenever the user presses this key.\r\n \r\nNOTE that I am trying to do that in the console, not a UI\r\n\r\n    do{\r\n      //some calculations here\r\n    }while(true);\r\n\r\n\r\n","title":"How to terminate an infinite console loop by letting the user press a specific key on the keyboard in java?","body":"<p>As you can see, it is an infinite loop, and I want to know if I could assign a key on the keyboard that terminates and stops this loop whenever the user presses this key.</p>\n<p>NOTE that I am trying to do that in the console, not a UI</p>\n<pre><code>do{\n  //some calculations here\n}while(true);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","elasticsearch"],"owner":{"account_id":28506528,"reputation":1,"user_id":21817122,"display_name":"William Goss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683211094,"creation_date":1683211094,"question_id":76174405,"body_markdown":"I just shifted from 7.6.2 to 8.6.2 with Elasticsearch, and I wanted to continue to use the RestHighLevelClient. After doing some research, I found out about compatibility mode, and read that this was a way to make it all work. After transitioning over, I created 2 beans that set up RestHighLevelClient in compatibility mode, but I keep getting an error message on build talking about syncedFlushRequest class not being found. After searching through the files there was no direct use that I could see, and the stack trace brought me to the .build() line from the RestHighLevelClientBuilder. Could you explain why I keep getting this error? I even tried setting an enviornment variable called ELASTIC_CLIENT_APIVERSIONING to true.\r\n\r\nNothing seems to be working and I have been stuck trying to get this issue fixed for almost a week, can you help me with this? If you guys need any more information or resources please let me know and I will provide any details as needed.\r\n\r\nFor more context:\r\n\r\n\r\nError creating bean with name &#39;rhlClient&#39; defined in class path resource [reasourcename] : failed to initiate [org.elastocsearch.client.resthighlevelclient]:\r\n\r\nFactory method &#39;rhlClient&#39; threw exception with message: org/elasticsearch/action/admin/indices/flush/SyncedFlushRequest\r\n\r\nI tried searching for all flushes used, and there is no direct use of a syncedFlush.\r\n\r\nI tried compatibility modes and looking through and updating all POM.xml dependencies to newest version.","title":"SyncedFlush and RestHighLevelClient","body":"<p>I just shifted from 7.6.2 to 8.6.2 with Elasticsearch, and I wanted to continue to use the RestHighLevelClient. After doing some research, I found out about compatibility mode, and read that this was a way to make it all work. After transitioning over, I created 2 beans that set up RestHighLevelClient in compatibility mode, but I keep getting an error message on build talking about syncedFlushRequest class not being found. After searching through the files there was no direct use that I could see, and the stack trace brought me to the .build() line from the RestHighLevelClientBuilder. Could you explain why I keep getting this error? I even tried setting an enviornment variable called ELASTIC_CLIENT_APIVERSIONING to true.</p>\n<p>Nothing seems to be working and I have been stuck trying to get this issue fixed for almost a week, can you help me with this? If you guys need any more information or resources please let me know and I will provide any details as needed.</p>\n<p>For more context:</p>\n<p>Error creating bean with name 'rhlClient' defined in class path resource [reasourcename] : failed to initiate [org.elastocsearch.client.resthighlevelclient]:</p>\n<p>Factory method 'rhlClient' threw exception with message: org/elasticsearch/action/admin/indices/flush/SyncedFlushRequest</p>\n<p>I tried searching for all flushes used, and there is no direct use of a syncedFlush.</p>\n<p>I tried compatibility modes and looking through and updating all POM.xml dependencies to newest version.</p>\n"},{"tags":["java","static","oop","language-features","restriction"],"comments":[{"owner":{"account_id":6118,"reputation":2882,"user_id":10166,"accept_rate":50,"display_name":"Javamann"},"score":0,"creation_date":1231189831,"post_id":413898,"comment_id":79227400,"body_markdown":"Once again remember that there is one instance of a static per class per CLASSLOADER.","body":"Once again remember that there is one instance of a static per class per CLASSLOADER."},{"owner":{"account_id":5372615,"reputation":1585,"user_id":7389293,"display_name":"carloswm85"},"score":0,"creation_date":1604322354,"post_id":413898,"comment_id":114303785,"body_markdown":"What’s classloader?","body":"What’s classloader?"}],"answers":[{"tags":[],"owner":{"account_id":15778,"reputation":416386,"user_id":33708,"accept_rate":83,"display_name":"Mehrdad Afshari"},"down_vote_count":0,"up_vote_count":653,"is_accepted":true,"score":653,"last_activity_date":1541846080,"creation_date":1231177471,"answer_id":413904,"question_id":413898,"body_markdown":"`static` members belong to the class instead of a specific instance.\r\n\r\nIt means that &lt;b&gt;only one instance of a `static` field exists&lt;/b&gt;&lt;sup&gt;[1]&lt;/sup&gt; even if you create a million instances of the class or you don&#39;t create any. It will be shared by all instances.\r\n\r\nSince `static` methods also do not belong to a specific instance, they can&#39;t refer to instance members. In the example given, `main` does not know which instance of the `Hello` class (and therefore which instance of the `Clock` class) it should refer to. `static` members can only refer to `static` members. Instance members can, of course access `static` members.\r\n\r\n&lt;i&gt;Side note:&lt;/i&gt; Of course, `static` members can access instance members &lt;b&gt;through an object reference&lt;/b&gt;.\r\n\r\nExample:\r\n   \r\n    public class Example {\r\n        private static boolean staticField;\r\n        private boolean instanceField;\r\n        public static void main(String[] args) {\r\n            // a static method can access static fields\r\n            staticField = true;\r\n\r\n            // a static method can access instance fields through an object reference\r\n            Example instance = new Example();\r\n            instance.instanceField = true;\r\n        }\r\n\r\n[1]: Depending on the runtime characteristics, it can be one per ClassLoader or AppDomain or thread, but that is beside the point.","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p><code>static</code> members belong to the class instead of a specific instance.</p>\n\n<p>It means that <b>only one instance of a <code>static</code> field exists</b><sup>[1]</sup> even if you create a million instances of the class or you don't create any. It will be shared by all instances.</p>\n\n<p>Since <code>static</code> methods also do not belong to a specific instance, they can't refer to instance members. In the example given, <code>main</code> does not know which instance of the <code>Hello</code> class (and therefore which instance of the <code>Clock</code> class) it should refer to. <code>static</code> members can only refer to <code>static</code> members. Instance members can, of course access <code>static</code> members.</p>\n\n<p><i>Side note:</i> Of course, <code>static</code> members can access instance members <b>through an object reference</b>.</p>\n\n<p>Example:</p>\n\n<pre><code>public class Example {\n    private static boolean staticField;\n    private boolean instanceField;\n    public static void main(String[] args) {\n        // a static method can access static fields\n        staticField = true;\n\n        // a static method can access instance fields through an object reference\n        Example instance = new Example();\n        instance.instanceField = true;\n    }\n</code></pre>\n\n<p>[1]: Depending on the runtime characteristics, it can be one per ClassLoader or AppDomain or thread, but that is beside the point.</p>\n"},{"tags":[],"owner":{"account_id":11936,"reputation":13753,"user_id":23249,"accept_rate":85,"display_name":"Elie"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1522575293,"creation_date":1231177552,"answer_id":413906,"question_id":413898,"body_markdown":"Static means that you don&#39;t have to create an instance of the class to use the methods or variables associated with the class. In your example, you could call:\r\n\r\n    Hello.main(new String[]()) //main(...) is declared as a static function in the Hello class\r\n\r\ndirectly, instead of:\r\n\r\n    Hello h = new Hello();\r\n    h.main(new String[]()); //main(...) is a non-static function linked with the &quot;h&quot; variable\r\n\r\nFrom inside a static method (which belongs to a class) you cannot access any members which are not static, since their values depend on your instantiation of the class. A non-static Clock object, which is an instance member, would have a different value/reference for each instance of your Hello class, and therefore you could not access it from the static portion of the class.","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>Static means that you don't have to create an instance of the class to use the methods or variables associated with the class. In your example, you could call:</p>\n\n<pre><code>Hello.main(new String[]()) //main(...) is declared as a static function in the Hello class\n</code></pre>\n\n<p>directly, instead of:</p>\n\n<pre><code>Hello h = new Hello();\nh.main(new String[]()); //main(...) is a non-static function linked with the \"h\" variable\n</code></pre>\n\n<p>From inside a static method (which belongs to a class) you cannot access any members which are not static, since their values depend on your instantiation of the class. A non-static Clock object, which is an instance member, would have a different value/reference for each instance of your Hello class, and therefore you could not access it from the static portion of the class.</p>\n"},{"tags":[],"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"down_vote_count":1,"up_vote_count":134,"is_accepted":false,"score":133,"last_activity_date":1482339465,"creation_date":1231177556,"answer_id":413907,"question_id":413898,"body_markdown":"It means that there is only one instance of &quot;clock&quot; in Hello, not one per each separate instance of the &quot;Hello&quot; class, or more-so, it means that there will be one commonly shared &quot;clock&quot; reference among all instances of the &quot;Hello&quot; class.\r\n\r\nSo if you were to do a &quot;new Hello&quot; anywhere in your code:\r\nA- in the first scenario (before the change, without using &quot;static&quot;), it would make a new clock every time a &quot;new Hello&quot; is called, but \r\nB- in the second scenario (after the change, using &quot;static&quot;), every &quot;new Hello&quot; instance would still share and use the initial and same &quot;clock&quot; reference first created.\r\n\r\nUnless you needed &quot;clock&quot; somewhere outside of main, this would work just as well:\r\n\r\n    package hello;\r\n    public class Hello\r\n    {\r\n        public static void main(String args[])\r\n        {\r\n          Clock clock=new Clock();\r\n          clock.sayTime();    \r\n        }\r\n    }","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>It means that there is only one instance of \"clock\" in Hello, not one per each separate instance of the \"Hello\" class, or more-so, it means that there will be one commonly shared \"clock\" reference among all instances of the \"Hello\" class.</p>\n\n<p>So if you were to do a \"new Hello\" anywhere in your code:\nA- in the first scenario (before the change, without using \"static\"), it would make a new clock every time a \"new Hello\" is called, but \nB- in the second scenario (after the change, using \"static\"), every \"new Hello\" instance would still share and use the initial and same \"clock\" reference first created.</p>\n\n<p>Unless you needed \"clock\" somewhere outside of main, this would work just as well:</p>\n\n<pre><code>package hello;\npublic class Hello\n{\n    public static void main(String args[])\n    {\n      Clock clock=new Clock();\n      clock.sayTime();    \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21247,"reputation":3744,"user_id":51488,"display_name":"Stephen Doyle"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1231177558,"creation_date":1231177558,"answer_id":413908,"question_id":413898,"body_markdown":"Static makes the clock member a class member instead of an instance member. Without the static keyword you would need to create an instance of the Hello class (which has a clock member variable) - e.g.\r\n\r\n    Hello hello = new Hello();\r\n    hello.clock.sayTime();\r\n\r\n","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>Static makes the clock member a class member instead of an instance member. Without the static keyword you would need to create an instance of the Hello class (which has a clock member variable) - e.g.</p>\n\n<pre><code>Hello hello = new Hello();\nhello.clock.sayTime();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13446,"reputation":44828,"user_id":27020,"accept_rate":100,"display_name":"Marc Novakowski"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1231177558,"creation_date":1231177558,"answer_id":413909,"question_id":413898,"body_markdown":"static methods don&#39;t use any instance variables of the class they are defined in.  A very good explanation of the difference can be found on [this page][1]\r\n\r\n\r\n  [1]: http://leepoint.net/notes-java/flow/methods/50static-methods.html","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>static methods don't use any instance variables of the class they are defined in.  A very good explanation of the difference can be found on <a href=\"http://leepoint.net/notes-java/flow/methods/50static-methods.html\" rel=\"noreferrer\">this page</a></p>\n"},{"tags":[],"owner":{"account_id":3393,"reputation":60796,"user_id":4893,"accept_rate":64,"display_name":"sblundy"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1231177721,"creation_date":1231177721,"answer_id":413915,"question_id":413898,"body_markdown":"A field can be assigned to either the class or an instance of a class. By default fields are instance variables. By using `static` the field becomes a class variable, thus there is one and only one `clock`. If you make a changes in one place, it&#39;s visible everywhere. Instance varables are changed independently of one another.","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>A field can be assigned to either the class or an instance of a class. By default fields are instance variables. By using <code>static</code> the field becomes a class variable, thus there is one and only one <code>clock</code>. If you make a changes in one place, it's visible everywhere. Instance varables are changed independently of one another.</p>\n"},{"tags":[],"owner":{"account_id":15307,"reputation":17620,"user_id":32174,"accept_rate":71,"display_name":"Julien Chastang"},"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1231179243,"creation_date":1231179243,"answer_id":413999,"question_id":413898,"body_markdown":"This discussion has so far ignored classloader considerations. Strictly speaking, Java static fields are shared between all instances of a class for a given **classloader**.","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>This discussion has so far ignored classloader considerations. Strictly speaking, Java static fields are shared between all instances of a class for a given <strong>classloader</strong>.</p>\n"},{"tags":[],"owner":{"account_id":18889,"reputation":28733,"user_id":43756,"accept_rate":63,"display_name":"kal"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1231184182,"creation_date":1231184182,"answer_id":414233,"question_id":413898,"body_markdown":"Can also think of static members not having a &quot;this&quot; pointer. They are shared among all instances.","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>Can also think of static members not having a \"this\" pointer. They are shared among all instances.</p>\n"},{"tags":[],"owner":{"account_id":20857,"reputation":40703,"user_id":50214,"accept_rate":97,"display_name":"geowa4"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1246689994,"creation_date":1246688767,"answer_id":1081651,"question_id":413898,"body_markdown":"The `static` keyword in Java means that the variable or function is shared between all instances of that class as it belongs to the *type*, not the actual objects themselves.\r\n\r\nSo if you have a variable: `private static int i = 0;` and you increment it (`i++`) in one instance, the change will be reflected in all instances. `i` will now be 1 in all instances.\r\n\r\nStatic methods can be used without instantiating an object.","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>The <code>static</code> keyword in Java means that the variable or function is shared between all instances of that class as it belongs to the <em>type</em>, not the actual objects themselves.</p>\n\n<p>So if you have a variable: <code>private static int i = 0;</code> and you increment it (<code>i++</code>) in one instance, the change will be reflected in all instances. <code>i</code> will now be 1 in all instances.</p>\n\n<p>Static methods can be used without instantiating an object.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":98,"is_accepted":false,"score":98,"last_activity_date":1429915154,"creation_date":1246689347,"answer_id":1081664,"question_id":413898,"body_markdown":"The `static` keyword means that something (a field, method or nested class) is related to the *type* rather than any particular *instance* of the type. So for example, one calls `Math.sin(...)` without any instance of the `Math` class, and indeed you *can&#39;t* create an instance of the `Math` class.\r\n\r\nFor more information, see the [relevant bit of Oracle&#39;s Java Tutorial][1].\r\n\r\n***\r\n\r\n**Sidenote**\r\n\r\nJava unfortunately *allows* you to access static members as if they were instance members, e.g.\r\n\r\n    // Bad code!\r\n    Thread.currentThread().sleep(5000);\r\n    someOtherThread.sleep(5000);\r\n\r\nThat makes it *look* as if `sleep` is an instance method, but it&#39;s actually a static method - it *always* makes the current thread sleep. It&#39;s better practice to make this clear in the calling code:\r\n\r\n    // Clearer\r\n    Thread.sleep(5000);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>The <code>static</code> keyword means that something (a field, method or nested class) is related to the <em>type</em> rather than any particular <em>instance</em> of the type. So for example, one calls <code>Math.sin(...)</code> without any instance of the <code>Math</code> class, and indeed you <em>can't</em> create an instance of the <code>Math</code> class.</p>\n\n<p>For more information, see the <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"noreferrer\">relevant bit of Oracle's Java Tutorial</a>.</p>\n\n<hr>\n\n<p><strong>Sidenote</strong></p>\n\n<p>Java unfortunately <em>allows</em> you to access static members as if they were instance members, e.g.</p>\n\n<pre><code>// Bad code!\nThread.currentThread().sleep(5000);\nsomeOtherThread.sleep(5000);\n</code></pre>\n\n<p>That makes it <em>look</em> as if <code>sleep</code> is an instance method, but it's actually a static method - it <em>always</em> makes the current thread sleep. It's better practice to make this clear in the calling code:</p>\n\n<pre><code>// Clearer\nThread.sleep(5000);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2155852,"reputation":61,"user_id":1911115,"display_name":"javaguy"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1355777686,"creation_date":1355776444,"answer_id":13921728,"question_id":413898,"body_markdown":"I have developed a liking for static methods (only, if possible) in &quot;helper&quot; classes.\r\n\r\nThe calling class need not create another member (instance) variable of the helper class. You just call the methods of the helper class. Also the helper class is improved because you no longer need a constructor, and you need no member (instance) variables.\r\n\r\nThere are probably other advantages.","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>I have developed a liking for static methods (only, if possible) in \"helper\" classes.</p>\n\n<p>The calling class need not create another member (instance) variable of the helper class. You just call the methods of the helper class. Also the helper class is improved because you no longer need a constructor, and you need no member (instance) variables.</p>\n\n<p>There are probably other advantages.</p>\n"},{"tags":[],"owner":{"account_id":1858359,"reputation":5739,"user_id":1683466,"accept_rate":96,"display_name":"Vasil Valchev"},"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1449577369,"creation_date":1394735201,"answer_id":22387663,"question_id":413898,"body_markdown":"Basic usage of static members...\r\n\r\n    public class Hello\r\n    {\r\n        // value / method\r\n        public static String staticValue;\r\n        public String nonStaticValue;\r\n    }\r\n    \r\n    class A\r\n    {\r\n        Hello hello = new Hello();\r\n        hello.staticValue = &quot;abc&quot;;\r\n        hello.nonStaticValue = &quot;xyz&quot;;\r\n    }\r\n\r\n    class B\r\n    {\r\n        Hello hello2 = new Hello(); // here staticValue = &quot;abc&quot;\r\n        hello2.staticValue; // will have value of &quot;abc&quot;\r\n        hello2.nonStaticValue; // will have value of null\r\n    }\r\n    \r\n\r\nThat&#39;s how you can have values shared in all class members without sending class instance Hello to other class. And whit static you don&#39;t need to create class instance.\r\n\r\n\r\n    Hello hello = new Hello();\r\n    hello.staticValue = &quot;abc&quot;;\r\n\r\n\r\nYou can just call static values or methods by class name:\r\n\r\n\r\n    Hello.staticValue = &quot;abc&quot;;","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>Basic usage of static members...</p>\n\n<pre><code>public class Hello\n{\n    // value / method\n    public static String staticValue;\n    public String nonStaticValue;\n}\n\nclass A\n{\n    Hello hello = new Hello();\n    hello.staticValue = \"abc\";\n    hello.nonStaticValue = \"xyz\";\n}\n\nclass B\n{\n    Hello hello2 = new Hello(); // here staticValue = \"abc\"\n    hello2.staticValue; // will have value of \"abc\"\n    hello2.nonStaticValue; // will have value of null\n}\n</code></pre>\n\n<p>That's how you can have values shared in all class members without sending class instance Hello to other class. And whit static you don't need to create class instance.</p>\n\n<pre><code>Hello hello = new Hello();\nhello.staticValue = \"abc\";\n</code></pre>\n\n<p>You can just call static values or methods by class name:</p>\n\n<pre><code>Hello.staticValue = \"abc\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1647459243,"creation_date":1415821825,"answer_id":26895335,"question_id":413898,"body_markdown":"The keyword `static` is used to denote a field or a method as belonging to the class itself and not to any particular instance.  Using your code, if the object `Clock` is static, all of the instances of the `Hello` class will share this `Clock` data member (field) in common.  If you make it non-static, each individual instance of `Hello` will have a unique `Clock`.\r\n\r\nYou added a *main* method to your class `Hello` so that you could run the code.  The problem with that is that the *main* method is static and as such, it cannot refer to non-static fields or methods inside of it.  You can resolve this in two ways:\r\n\r\n 1. Make all fields and methods of the `Hello` class static so that they could be referred to inside the *main* method.  This is not a good thing to do (or the wrong reason to make a field and/or a method static)\r\n 2. Create an instance of your `Hello` class inside the main method and access all its fields and methods the way they were intended to be accessed and used in the first place.\r\n\r\nFor you, this means the following change to your code:\r\n```\r\npackage hello;\r\n\r\npublic class Hello {\r\n    private Clock clock = new Clock();\r\n\r\n    public Clock getClock() {\r\n        return clock;\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n        Hello hello = new Hello();\r\n        hello.getClock().sayTime();\r\n    }\r\n}\r\n```","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>The keyword <code>static</code> is used to denote a field or a method as belonging to the class itself and not to any particular instance.  Using your code, if the object <code>Clock</code> is static, all of the instances of the <code>Hello</code> class will share this <code>Clock</code> data member (field) in common.  If you make it non-static, each individual instance of <code>Hello</code> will have a unique <code>Clock</code>.</p>\n<p>You added a <em>main</em> method to your class <code>Hello</code> so that you could run the code.  The problem with that is that the <em>main</em> method is static and as such, it cannot refer to non-static fields or methods inside of it.  You can resolve this in two ways:</p>\n<ol>\n<li>Make all fields and methods of the <code>Hello</code> class static so that they could be referred to inside the <em>main</em> method.  This is not a good thing to do (or the wrong reason to make a field and/or a method static)</li>\n<li>Create an instance of your <code>Hello</code> class inside the main method and access all its fields and methods the way they were intended to be accessed and used in the first place.</li>\n</ol>\n<p>For you, this means the following change to your code:</p>\n<pre><code>package hello;\n\npublic class Hello {\n    private Clock clock = new Clock();\n\n    public Clock getClock() {\n        return clock;\n    }\n\n    public static void main(String args[]) {\n        Hello hello = new Hello();\n        hello.getClock().sayTime();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2936144,"reputation":1478,"user_id":2514978,"accept_rate":58,"display_name":"Bharthan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683211028,"creation_date":1431524196,"answer_id":30216548,"question_id":413898,"body_markdown":"`main()` is a static method which has two fundamental restrictions:\r\n\r\n1. The static method cannot use a non-static data member or directly call non-static method.\r\n2. `this()` and `super()` cannot be used in static context.\r\n\r\n\r\n        class A {  \r\n            int a = 40; //non static\r\n            public static void main(String args[]) {  \r\n                System.out.println(a);  \r\n            }  \r\n        }\r\n\r\nOutput: \r\n\r\n    Compile Time Error\r\n\r\n\r\n    ","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p><code>main()</code> is a static method which has two fundamental restrictions:</p>\n<ol>\n<li><p>The static method cannot use a non-static data member or directly call non-static method.</p>\n</li>\n<li><p><code>this()</code> and <code>super()</code> cannot be used in static context.</p>\n<pre><code> class A {  \n     int a = 40; //non static\n     public static void main(String args[]) {  \n         System.out.println(a);  \n     }  \n }\n</code></pre>\n</li>\n</ol>\n<p>Output:</p>\n<pre><code>Compile Time Error\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6505024,"reputation":39,"user_id":5034305,"display_name":"Bala Krishna"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1478898916,"creation_date":1435164442,"answer_id":31032423,"question_id":413898,"body_markdown":"\r\n\r\n\r\n\r\n\r\n\r\nStatic Variables Can only be accessed only in static methods, so when we declare the static variables those getter and setter methods will be static methods\r\n\r\nstatic methods is a class level we can access using class name\r\n\r\n\r\nThe following is  example for Static Variables Getters And Setters:\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    public class Static \r\n    {\r\n    \r\n    \tprivate static String owner;\r\n    \tprivate static int rent;\r\n    \tprivate String car;\r\n    \tpublic String getCar() {\r\n    \t\treturn car;\r\n    \t}\r\n    \tpublic void setCar(String car) {\r\n    \t\tthis.car = car;\r\n    \t}\r\n    \tpublic static int getRent() {\r\n    \t\treturn rent;\r\n    \t}\r\n    \tpublic static void setRent(int rent) {\r\n    \t\tStatic.rent = rent;\r\n    \t}\r\n    \tpublic static String getOwner() {\r\n    \t\treturn owner;\r\n    \t}\r\n    \r\n    \tpublic static void setOwner(String owner) {\r\n    \t\tStatic.owner = owner;\r\n    \t}\r\n    \r\n    }","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>Static Variables Can only be accessed only in static methods, so when we declare the static variables those getter and setter methods will be static methods</p>\n\n<p>static methods is a class level we can access using class name</p>\n\n<p>The following is  example for Static Variables Getters And Setters:</p>\n\n<pre><code>public class Static \n{\n\n    private static String owner;\n    private static int rent;\n    private String car;\n    public String getCar() {\n        return car;\n    }\n    public void setCar(String car) {\n        this.car = car;\n    }\n    public static int getRent() {\n        return rent;\n    }\n    public static void setRent(int rent) {\n        Static.rent = rent;\n    }\n    public static String getOwner() {\n        return owner;\n    }\n\n    public static void setOwner(String owner) {\n        Static.owner = owner;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1443888932,"creation_date":1443888932,"answer_id":32924702,"question_id":413898,"body_markdown":"In Java, the `static` keyword can be simply regarded as indicating the following:\r\n\r\n&gt; &quot;without regard or relationship to any particular instance&quot;\r\n\r\nIf you think of `static` in this way, it becomes easier to understand its use in the various contexts in which it is encountered:\r\n\r\n - A `static` field is a field that belongs to the class rather than to any particular instance\r\n\r\n - A `static` method is a method that has no notion of `this`; it is defined on the class and doesn&#39;t know about any particular instance of that class unless a reference is passed to it\r\n\r\n - A `static` member class is a nested class without any notion or knowledge of an instance of its enclosing class (unless a reference to an enclosing class instance is passed to it)","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>In Java, the <code>static</code> keyword can be simply regarded as indicating the following:</p>\n\n<blockquote>\n  <p>\"without regard or relationship to any particular instance\"</p>\n</blockquote>\n\n<p>If you think of <code>static</code> in this way, it becomes easier to understand its use in the various contexts in which it is encountered:</p>\n\n<ul>\n<li><p>A <code>static</code> field is a field that belongs to the class rather than to any particular instance</p></li>\n<li><p>A <code>static</code> method is a method that has no notion of <code>this</code>; it is defined on the class and doesn't know about any particular instance of that class unless a reference is passed to it</p></li>\n<li><p>A <code>static</code> member class is a nested class without any notion or knowledge of an instance of its enclosing class (unless a reference to an enclosing class instance is passed to it)</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3313963,"reputation":11003,"user_id":2786733,"accept_rate":95,"display_name":"Andrejs"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1513112416,"creation_date":1468827174,"answer_id":38430960,"question_id":413898,"body_markdown":"To add to existing answers, let me try with a picture:\r\n\r\nAn interest rate of 2% is applied to ALL savings accounts. Hence it is **static**.\r\n\r\nA balance should be **individual**, so it is **not** static.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/zMvZr.png","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>To add to existing answers, let me try with a picture:</p>\n\n<p>An interest rate of 2% is applied to ALL savings accounts. Hence it is <strong>static</strong>.</p>\n\n<p>A balance should be <strong>individual</strong>, so it is <strong>not</strong> static.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zMvZr.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zMvZr.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":1750637,"reputation":2903,"user_id":1599792,"accept_rate":100,"display_name":"Aftab"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1471179803,"creation_date":1471179803,"answer_id":38942508,"question_id":413898,"body_markdown":"**Static in Java:**\r\n\r\nStatic is a Non Access Modifier.\r\nThe static keyword belongs to the class than instance of the class.\r\ncan be used to attach a Variable or Method to a Class.\r\n\r\n**Static keyword CAN be used with:**\r\n\r\nMethod\r\n\r\nVariable\r\n\r\nClass nested within another Class\r\n\r\nInitialization Block\r\n\r\n**CAN&#39;T be used with:**\r\n\r\nClass (Not Nested)\r\n\r\nConstructor\r\n\r\nInterfaces\r\n\r\nMethod Local Inner Class(Difference then  nested class)\r\n\r\nInner Class methods\r\n\r\nInstance Variables\r\n\r\nLocal Variables\r\n\r\n\r\n\r\n**Example:**\r\n\r\nImagine the following example which has an **instance variable named count** which in incremented in the constructor:\r\n\r\n\r\n    package pkg;\r\n    \r\n    class StaticExample {\r\n    \tint count = 0;// will get memory when instance is created\r\n    \r\n    \tStaticExample() {\r\n    \t\tcount++;\r\n    \t\tSystem.out.println(count);\r\n    \t}\r\n    \r\n    \tpublic static void main(String args[]) {\r\n    \r\n    \t\tStaticExample c1 = new StaticExample();\r\n    \t\tStaticExample c2 = new StaticExample();\r\n    \t\tStaticExample c3 = new StaticExample();\r\n    \r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n&gt; 1 1 1\r\n\r\n\r\nSince instance variable gets the memory at the time of object creation, each object will have the copy of the instance variable, if it is incremented, it won&#39;t reflect to other objects. \r\n\r\nNow if we **change the instance variable count to a static** one then the program will produce different output:\r\n\r\n    package pkg;\r\n    \r\n    class StaticExample {\r\n    \tstatic int count = 0;// will get memory when instance is created\r\n    \r\n    \tStaticExample() {\r\n    \t\tcount++;\r\n    \t\tSystem.out.println(count);\r\n    \t}\r\n    \r\n    \tpublic static void main(String args[]) {\r\n    \r\n    \t\tStaticExample c1 = new StaticExample();\r\n    \t\tStaticExample c2 = new StaticExample();\r\n    \t\tStaticExample c3 = new StaticExample();\r\n    \r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n&gt; 1 2 3\r\n\r\nIn this case static variable will get the memory only once, if any object changes the value of the static variable, it will retain its value.\r\n\r\n**Static with Final:**\r\n\r\nThe global variable which is declared as **final and static** remains unchanged for the whole execution. Because, Static members are stored in the class memory and they are loaded only once in the whole execution. They are common to all objects of the class. If you declare static variables as final, any of the objects can’t change their value as it is final. Therefore, variables declared as final and static are sometimes referred to as Constants. All fields of interfaces are referred as constants, because they are final and static by default.\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n\r\nPicture Resource : [Final Static][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/g7Hng.png\r\n  [2]: http://javaconceptoftheday.com/final-keyword-in-java/","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p><strong>Static in Java:</strong></p>\n\n<p>Static is a Non Access Modifier.\nThe static keyword belongs to the class than instance of the class.\ncan be used to attach a Variable or Method to a Class.</p>\n\n<p><strong>Static keyword CAN be used with:</strong></p>\n\n<p>Method</p>\n\n<p>Variable</p>\n\n<p>Class nested within another Class</p>\n\n<p>Initialization Block</p>\n\n<p><strong>CAN'T be used with:</strong></p>\n\n<p>Class (Not Nested)</p>\n\n<p>Constructor</p>\n\n<p>Interfaces</p>\n\n<p>Method Local Inner Class(Difference then  nested class)</p>\n\n<p>Inner Class methods</p>\n\n<p>Instance Variables</p>\n\n<p>Local Variables</p>\n\n<p><strong>Example:</strong></p>\n\n<p>Imagine the following example which has an <strong>instance variable named count</strong> which in incremented in the constructor:</p>\n\n<pre><code>package pkg;\n\nclass StaticExample {\n    int count = 0;// will get memory when instance is created\n\n    StaticExample() {\n        count++;\n        System.out.println(count);\n    }\n\n    public static void main(String args[]) {\n\n        StaticExample c1 = new StaticExample();\n        StaticExample c2 = new StaticExample();\n        StaticExample c3 = new StaticExample();\n\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n  <p>1 1 1</p>\n</blockquote>\n\n<p>Since instance variable gets the memory at the time of object creation, each object will have the copy of the instance variable, if it is incremented, it won't reflect to other objects. </p>\n\n<p>Now if we <strong>change the instance variable count to a static</strong> one then the program will produce different output:</p>\n\n<pre><code>package pkg;\n\nclass StaticExample {\n    static int count = 0;// will get memory when instance is created\n\n    StaticExample() {\n        count++;\n        System.out.println(count);\n    }\n\n    public static void main(String args[]) {\n\n        StaticExample c1 = new StaticExample();\n        StaticExample c2 = new StaticExample();\n        StaticExample c3 = new StaticExample();\n\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n  <p>1 2 3</p>\n</blockquote>\n\n<p>In this case static variable will get the memory only once, if any object changes the value of the static variable, it will retain its value.</p>\n\n<p><strong>Static with Final:</strong></p>\n\n<p>The global variable which is declared as <strong>final and static</strong> remains unchanged for the whole execution. Because, Static members are stored in the class memory and they are loaded only once in the whole execution. They are common to all objects of the class. If you declare static variables as final, any of the objects can’t change their value as it is final. Therefore, variables declared as final and static are sometimes referred to as Constants. All fields of interfaces are referred as constants, because they are final and static by default.</p>\n\n<p><a href=\"https://i.stack.imgur.com/g7Hng.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/g7Hng.png\" alt=\"enter image description here\"></a></p>\n\n<p>Picture Resource : <a href=\"http://javaconceptoftheday.com/final-keyword-in-java/\" rel=\"noreferrer\">Final Static</a></p>\n"},{"tags":[],"owner":{"account_id":9755346,"reputation":7480,"user_id":7232295,"accept_rate":86,"display_name":"Uddhav P. Gautam"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1491284882,"creation_date":1491284882,"answer_id":43199184,"question_id":413898,"body_markdown":"**Understanding Static concepts** \r\n\r\n    public class StaticPractise1 {\r\n        public static void main(String[] args) {\r\n            StaticPractise2 staticPractise2 = new StaticPractise2();\r\n            staticPractise2.printUddhav(); //true\r\n            StaticPractise2.printUddhav(); /* false, because printUddhav() is although inside StaticPractise2, but it is where exactly depends on PC program counter on runtime. */\r\n    \r\n            StaticPractise2.printUddhavsStatic1(); //true\r\n            staticPractise2.printUddhavsStatic1(); /*false, because, when staticPractise2 is blueprinted, it tracks everything other than static  things and it organizes in its own heap. So, class static methods, object can&#39;t reference */\r\n    \r\n        }\r\n    }\r\n \r\n\r\n Second Class\r\n\r\n    public class StaticPractise2 {\r\n        public static void printUddhavsStatic1() {\r\n            System.out.println(&quot;Uddhav&quot;);\r\n        }\r\n    \r\n        public void printUddhav() {\r\n            System.out.println(&quot;Uddhav&quot;);\r\n        }\r\n    }\r\n","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p><strong>Understanding Static concepts</strong> </p>\n\n<pre><code>public class StaticPractise1 {\n    public static void main(String[] args) {\n        StaticPractise2 staticPractise2 = new StaticPractise2();\n        staticPractise2.printUddhav(); //true\n        StaticPractise2.printUddhav(); /* false, because printUddhav() is although inside StaticPractise2, but it is where exactly depends on PC program counter on runtime. */\n\n        StaticPractise2.printUddhavsStatic1(); //true\n        staticPractise2.printUddhavsStatic1(); /*false, because, when staticPractise2 is blueprinted, it tracks everything other than static  things and it organizes in its own heap. So, class static methods, object can't reference */\n\n    }\n}\n</code></pre>\n\n<p>Second Class</p>\n\n<pre><code>public class StaticPractise2 {\n    public static void printUddhavsStatic1() {\n        System.out.println(\"Uddhav\");\n    }\n\n    public void printUddhav() {\n        System.out.println(\"Uddhav\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3027934,"reputation":409,"user_id":2567803,"display_name":"Mohammad Parvez"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1537275573,"creation_date":1537275573,"answer_id":52387178,"question_id":413898,"body_markdown":"    //Here is an example \r\n    \r\n    public class StaticClass \r\n    {\r\n        static int version;\r\n        public void printVersion() {\r\n             System.out.println(version);\r\n        }\r\n    }\r\n    \r\n    public class MainClass \r\n    {\r\n        public static void main(String args[]) {  \r\n    \t\tStaticClass staticVar1 = new StaticClass();\r\n    \t\tstaticVar1.version = 10;\r\n    \t\tstaticVar1.printVersion() // Output 10\r\n    \t\t\r\n    \t\tStaticClass staticVar2 = new StaticClass();\r\n    \t\tstaticVar2.printVersion() // Output 10\r\n    \t\tstaticVar2.version = 20;\r\n    \t\tstaticVar2.printVersion() // Output 20\r\n    \t\tstaticVar1.printVersion() // Output 20\r\n    \t}\r\n    }\r\n\r\n","title":"What does the &#39;static&#39; keyword do in a class?","body":"<pre><code>//Here is an example \n\npublic class StaticClass \n{\n    static int version;\n    public void printVersion() {\n         System.out.println(version);\n    }\n}\n\npublic class MainClass \n{\n    public static void main(String args[]) {  \n        StaticClass staticVar1 = new StaticClass();\n        staticVar1.version = 10;\n        staticVar1.printVersion() // Output 10\n\n        StaticClass staticVar2 = new StaticClass();\n        staticVar2.printVersion() // Output 10\n        staticVar2.version = 20;\n        staticVar2.printVersion() // Output 20\n        staticVar1.printVersion() // Output 20\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17981955,"reputation":51,"user_id":13068046,"display_name":"user13068046"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1584800282,"creation_date":1584800282,"answer_id":60788885,"question_id":413898,"body_markdown":"A question was asked [here](https://stackoverflow.com/questions/60788631/whats-the-etymology-of-static-method) about the choice of the word &#39;static&#39; for this concept.  It was dup&#39;d to this question, but I don&#39;t think the etymology has been clearly addressed. So...\r\n\r\n------\r\nIt&#39;s due to keyword reuse, starting with C.\r\n\r\nConsider data declarations in C (inside a function body):\r\n```\r\n    void f() {\r\n        int foo = 1;\r\n        static int bar = 2;\r\n         :\r\n    }\r\n```\r\n\r\nThe variable foo is created on the stack when the function is entered (and destroyed when the function terminates).  By contrast, bar is always there, so it&#39;s &#39;static&#39; in the sense of common English - it&#39;s not going anywhere.\r\n\r\nJava, and similar languages, have the same concept for data. Data can either be allocated per instance of the class (per object) or once for the entire class. Since Java aims to have familiar syntax for C/C++ programmers, the &#39;static&#39; keyword is appropriate here.\r\n\r\n```\r\n    class C {\r\n        int foo = 1;\r\n        static int bar = 2;\r\n         :\r\n    }\r\n``` \r\nLastly, we come to methods.\r\n\r\n```\r\n    class C {\r\n        int foo() { ... }\r\n        static int bar() { ... }\r\n         :\r\n    }\r\n``` \r\n\r\nThere is, conceptually speaking, an instance of foo() for every instance of class C.  There is only one instance of bar() for the entire class C. This is parallel to the case we discussed for data, and therefore using &#39;static&#39; is again a sensible choice, especially if you don&#39;t want to add more reserved keywords to your language.\r\n\r\n\r\n","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>A question was asked <a href=\"https://stackoverflow.com/questions/60788631/whats-the-etymology-of-static-method\">here</a> about the choice of the word 'static' for this concept.  It was dup'd to this question, but I don't think the etymology has been clearly addressed. So...</p>\n\n<hr>\n\n<p>It's due to keyword reuse, starting with C.</p>\n\n<p>Consider data declarations in C (inside a function body):</p>\n\n<pre><code>    void f() {\n        int foo = 1;\n        static int bar = 2;\n         :\n    }\n</code></pre>\n\n<p>The variable foo is created on the stack when the function is entered (and destroyed when the function terminates).  By contrast, bar is always there, so it's 'static' in the sense of common English - it's not going anywhere.</p>\n\n<p>Java, and similar languages, have the same concept for data. Data can either be allocated per instance of the class (per object) or once for the entire class. Since Java aims to have familiar syntax for C/C++ programmers, the 'static' keyword is appropriate here.</p>\n\n<pre><code>    class C {\n        int foo = 1;\n        static int bar = 2;\n         :\n    }\n</code></pre>\n\n<p>Lastly, we come to methods.</p>\n\n<pre><code>    class C {\n        int foo() { ... }\n        static int bar() { ... }\n         :\n    }\n</code></pre>\n\n<p>There is, conceptually speaking, an instance of foo() for every instance of class C.  There is only one instance of bar() for the entire class C. This is parallel to the case we discussed for data, and therefore using 'static' is again a sensible choice, especially if you don't want to add more reserved keywords to your language.</p>\n"},{"tags":[],"owner":{"account_id":9221177,"reputation":2302,"user_id":6850561,"display_name":"Partho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633790581,"creation_date":1633790581,"answer_id":69507749,"question_id":413898,"body_markdown":"A member in a Java program can be declared as static using the keyword “static” preceding its declaration/definition. When a member is declared static, then it essentially means that the member is shared by all the instances of a class without making copies of per instance.\r\n\r\n**Thus static is a non-class modifier used in Java and can be applied to the following members:**\r\n\r\n - Variables\r\n - Methods\r\n - Blocks\r\n - Classes (more specifically, nested classes)\r\n\r\nWhen a member is declared static, then it can be accessed without using an object. This means that before a class is instantiated, the static member is active and accessible. Unlike other non-static class members that cease to exist when the object of the class goes out of scope, the static member is still obviously active.\r\n\r\n**Static Variable in Java**\r\n\r\nA member variable of a class that is declared as static is called the Static Variable. It is also called as the “Class variable”. Once the variable is declared as static, memory is allocated only once and not every time when a class is instantiated. Hence you can access the static variable without a reference to an object.\r\n\r\n**The following Java program depicts the usage of Static variables:**\r\n\r\n    class Main\r\n    {\r\n    // static variables a and b\r\n    static int a = 10;\r\n    static int b;\r\n \r\n    static void printStatic()\r\n    {\r\n        a = a /2;\r\n        b = a;\r\n \r\n        System.out.println(&quot;printStatic::Value of a : &quot;+a + &quot; Value of b : \r\n     &quot;+b);\r\n    }  \r\n \r\n    public static void main(String[] args)\r\n    {\r\n       printStatic();\r\n       b = a*5;\r\n       a++;\r\n \r\n    System.out.println(&quot;main::Value of a : &quot;+a + &quot; Value of b : &quot;+b);\r\n       }\r\n     }\r\n\r\n**output::**\r\n\r\n    printStatic::Value of a : Value of b : 5\r\n    main::Value of a : 6 Value of b : 25\r\n\r\nIn the above program, we have two static variables i.e. a and b. We modify these variables in a function “printStatic” as well as in “main”. Note that the values of these static variables are preserved across the functions even when the scope of the function ends. The output shows the values of variables in two functions.\r\n\r\n\r\n**Static Method**\r\n\r\nA method in Java is static when it is preceded by the keyword “static”.\r\n\r\n**Some points that you need to remember about the static method include:**\r\n\r\n - A static method belongs to the class as against other non-static\r\n   methods that are invoked using the instance of a class.\r\n - To invoke a static method, you don’t need a class object.\r\n - The static data members of the class are accessible to the static\r\n   method. The static method can even change the values of the static\r\n   data member.\r\n - A static method cannot have a reference to ‘this’ or ‘super’ members.\r\n   Even if a static method tries to refer them, it will be a compiler\r\n   error.\r\n - Just like static data, the static method can also call other static\r\n   methods. A static method cannot refer to non-static data members or\r\n   variables and cannot call non-static methods too.\r\n\r\n**The following program shows the implementation of the static method in Java:**\r\n\r\n    class Main\r\n    {\r\n      // static method\r\n      static void static_method()\r\n    {\r\n        System.out.println(&quot;Static method in Java...called without any \r\n    object&quot;);\r\n    }\r\n \r\n    public static void main(String[] args)\r\n    {\r\n        static_method();\r\n       }\r\n     }\r\n\r\n**output:**\r\n\r\n    Static method in Java...called without any object\r\n\r\n**Static Block In Java**\r\n\r\nJust as you have function blocks in programming languages like C++, C#, etc. in Java also, there is a special block called “static” block that usually includes a block of code related to static data.\r\n\r\nThis static block is executed at the moment when the first object of the class is created (precisely at the time of classloading) or when the static member inside the block is used.\r\n\r\n**The following program shows the usage of a static block.**\r\n\r\n    class Main\r\n    {\r\n      static int sum = 0;\r\n      static int val1 = 5;\r\n      static int val2;\r\n \r\n    // static block\r\n     static {\r\n        sum = val1 + val2;\r\n        System.out.println(&quot;In static block, val1: &quot; + val1  + &quot; val2: &quot;+ \r\n    val2 + &quot; sum:&quot; + sum);\r\n        val2 = val1 * 3;\r\n        sum = val1 + val2;\r\n    }\r\n \r\n     public static void main(String[] args)\r\n    {\r\n        System.out.println(&quot;In main function, val1: &quot; + val1  + &quot; val2: &quot;+ val2 + &quot; sum:&quot; + sum);\r\n      }\r\n    }\r\n**output:**\r\n\r\n    In static block, val1: 5 val2: 0 sum:5\r\n    In main function, val1: val2: 15 sum:20\r\n\r\n**Static Class**\r\n\r\nIn Java, you have static blocks, static methods, and even static variables. Hence it’s obvious that you can also have static classes. In Java, it is possible to have a class inside another class and this is called a Nested class. The class that encloses the nested class is called the Outer class.\r\n\r\nIn Java, although you can declare a nested class as Static it is not possible to have the outer class as Static.\r\n\r\nLet’s now explore the static nested classes in Java.\r\n\r\n**Static Nested Class**\r\n\r\nAs already mentioned, you can have a nested class in Java declared as static. The static nested class differs from the non-static nested class(inner class) in certain aspects as listed below.\r\n\r\nUnlike the non-static nested class, the nested static class doesn’t need an outer class reference.\r\n\r\nA static nested class can access only static members of the outer class as against the non-static classes that can access static as well as non-static members of the outer class.\r\n\r\nAn example of a static nested class is given below.\r\n\r\n\r\n----------\r\n\r\n\r\n    class Main{\r\n      private static String str = &quot;SoftwareTestingHelp&quot;;\r\n \r\n         //Static nested class\r\n         static class NestedClass{\r\n            //non-static method\r\n                public void display() {\r\n \r\n                System.out.println(&quot;Static string in OuterClass: &quot; + str);\r\n                }\r\n \r\n        }\r\n       public static void main(String args[])\r\n       {\r\n                Main.NestedClassobj = new Main.NestedClass();\r\n                obj.display();\r\n       }\r\n    }\r\n\r\n**output**\r\n\r\n    Static string in OuterClass: SoftwareTestingHelp\r\n\r\n\r\n**I think this is how static keyword works in java.**","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>A member in a Java program can be declared as static using the keyword “static” preceding its declaration/definition. When a member is declared static, then it essentially means that the member is shared by all the instances of a class without making copies of per instance.</p>\n<p><strong>Thus static is a non-class modifier used in Java and can be applied to the following members:</strong></p>\n<ul>\n<li>Variables</li>\n<li>Methods</li>\n<li>Blocks</li>\n<li>Classes (more specifically, nested classes)</li>\n</ul>\n<p>When a member is declared static, then it can be accessed without using an object. This means that before a class is instantiated, the static member is active and accessible. Unlike other non-static class members that cease to exist when the object of the class goes out of scope, the static member is still obviously active.</p>\n<p><strong>Static Variable in Java</strong></p>\n<p>A member variable of a class that is declared as static is called the Static Variable. It is also called as the “Class variable”. Once the variable is declared as static, memory is allocated only once and not every time when a class is instantiated. Hence you can access the static variable without a reference to an object.</p>\n<p><strong>The following Java program depicts the usage of Static variables:</strong></p>\n<pre><code>class Main\n{\n// static variables a and b\nstatic int a = 10;\nstatic int b;\n\nstatic void printStatic()\n{\n    a = a /2;\n    b = a;\n\n    System.out.println(&quot;printStatic::Value of a : &quot;+a + &quot; Value of b : \n &quot;+b);\n}  \n\npublic static void main(String[] args)\n{\n   printStatic();\n   b = a*5;\n   a++;\n\nSystem.out.println(&quot;main::Value of a : &quot;+a + &quot; Value of b : &quot;+b);\n   }\n }\n</code></pre>\n<p><strong>output::</strong></p>\n<pre><code>printStatic::Value of a : Value of b : 5\nmain::Value of a : 6 Value of b : 25\n</code></pre>\n<p>In the above program, we have two static variables i.e. a and b. We modify these variables in a function “printStatic” as well as in “main”. Note that the values of these static variables are preserved across the functions even when the scope of the function ends. The output shows the values of variables in two functions.</p>\n<p><strong>Static Method</strong></p>\n<p>A method in Java is static when it is preceded by the keyword “static”.</p>\n<p><strong>Some points that you need to remember about the static method include:</strong></p>\n<ul>\n<li>A static method belongs to the class as against other non-static\nmethods that are invoked using the instance of a class.</li>\n<li>To invoke a static method, you don’t need a class object.</li>\n<li>The static data members of the class are accessible to the static\nmethod. The static method can even change the values of the static\ndata member.</li>\n<li>A static method cannot have a reference to ‘this’ or ‘super’ members.\nEven if a static method tries to refer them, it will be a compiler\nerror.</li>\n<li>Just like static data, the static method can also call other static\nmethods. A static method cannot refer to non-static data members or\nvariables and cannot call non-static methods too.</li>\n</ul>\n<p><strong>The following program shows the implementation of the static method in Java:</strong></p>\n<pre><code>class Main\n{\n  // static method\n  static void static_method()\n{\n    System.out.println(&quot;Static method in Java...called without any \nobject&quot;);\n}\n\npublic static void main(String[] args)\n{\n    static_method();\n   }\n }\n</code></pre>\n<p><strong>output:</strong></p>\n<pre><code>Static method in Java...called without any object\n</code></pre>\n<p><strong>Static Block In Java</strong></p>\n<p>Just as you have function blocks in programming languages like C++, C#, etc. in Java also, there is a special block called “static” block that usually includes a block of code related to static data.</p>\n<p>This static block is executed at the moment when the first object of the class is created (precisely at the time of classloading) or when the static member inside the block is used.</p>\n<p><strong>The following program shows the usage of a static block.</strong></p>\n<pre><code>class Main\n{\n  static int sum = 0;\n  static int val1 = 5;\n  static int val2;\n\n// static block\n static {\n    sum = val1 + val2;\n    System.out.println(&quot;In static block, val1: &quot; + val1  + &quot; val2: &quot;+ \nval2 + &quot; sum:&quot; + sum);\n    val2 = val1 * 3;\n    sum = val1 + val2;\n}\n\n public static void main(String[] args)\n{\n    System.out.println(&quot;In main function, val1: &quot; + val1  + &quot; val2: &quot;+ val2 + &quot; sum:&quot; + sum);\n  }\n}\n</code></pre>\n<p><strong>output:</strong></p>\n<pre><code>In static block, val1: 5 val2: 0 sum:5\nIn main function, val1: val2: 15 sum:20\n</code></pre>\n<p><strong>Static Class</strong></p>\n<p>In Java, you have static blocks, static methods, and even static variables. Hence it’s obvious that you can also have static classes. In Java, it is possible to have a class inside another class and this is called a Nested class. The class that encloses the nested class is called the Outer class.</p>\n<p>In Java, although you can declare a nested class as Static it is not possible to have the outer class as Static.</p>\n<p>Let’s now explore the static nested classes in Java.</p>\n<p><strong>Static Nested Class</strong></p>\n<p>As already mentioned, you can have a nested class in Java declared as static. The static nested class differs from the non-static nested class(inner class) in certain aspects as listed below.</p>\n<p>Unlike the non-static nested class, the nested static class doesn’t need an outer class reference.</p>\n<p>A static nested class can access only static members of the outer class as against the non-static classes that can access static as well as non-static members of the outer class.</p>\n<p>An example of a static nested class is given below.</p>\n<hr />\n<pre><code>class Main{\n  private static String str = &quot;SoftwareTestingHelp&quot;;\n\n     //Static nested class\n     static class NestedClass{\n        //non-static method\n            public void display() {\n\n            System.out.println(&quot;Static string in OuterClass: &quot; + str);\n            }\n\n    }\n   public static void main(String args[])\n   {\n            Main.NestedClassobj = new Main.NestedClass();\n            obj.display();\n   }\n}\n</code></pre>\n<p><strong>output</strong></p>\n<pre><code>Static string in OuterClass: SoftwareTestingHelp\n</code></pre>\n<p><strong>I think this is how static keyword works in java.</strong></p>\n"}],"owner":{"account_id":20530,"reputation":263492,"user_id":49153,"accept_rate":91,"display_name":"Ali"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":843602,"favorite_count":0,"down_vote_count":4,"up_vote_count":476,"accepted_answer_id":413904,"answer_count":22,"score":472,"last_activity_date":1683211028,"creation_date":1231177298,"question_id":413898,"body_markdown":"To be specific, I was trying this code:\r\n\r\n    package hello;\r\n\r\n    public class Hello {\r\n\r\n        Clock clock = new Clock();\r\n\r\n        public static void main(String args[]) {\r\n            clock.sayTime();\r\n        }\r\n    }\r\n\r\nBut it gave the error \r\n\r\n&gt; Cannot access non-static field in static method main\r\n\r\nSo I changed the declaration of `clock` to this:\r\n\r\n    static Clock clock = new Clock();\r\n\r\nAnd it worked. What does it mean to put that keyword before the declaration? What exactly will it do and/or restrict in terms of what can be done to that object?","title":"What does the &#39;static&#39; keyword do in a class?","body":"<p>To be specific, I was trying this code:</p>\n\n<pre><code>package hello;\n\npublic class Hello {\n\n    Clock clock = new Clock();\n\n    public static void main(String args[]) {\n        clock.sayTime();\n    }\n}\n</code></pre>\n\n<p>But it gave the error </p>\n\n<blockquote>\n  <p>Cannot access non-static field in static method main</p>\n</blockquote>\n\n<p>So I changed the declaration of <code>clock</code> to this:</p>\n\n<pre><code>static Clock clock = new Clock();\n</code></pre>\n\n<p>And it worked. What does it mean to put that keyword before the declaration? What exactly will it do and/or restrict in terms of what can be done to that object?</p>\n"},{"tags":["java","gradle","intellij-idea","swagger"],"comments":[{"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"score":0,"creation_date":1683217419,"post_id":76174379,"comment_id":134336376,"body_markdown":"Why do you have a snapshot dependency instead of a project dependency, if they live in the same multi-project? Have you tried `implementation(project(&quot;clevergift-core&quot;))` instead of `compile &#39;com.cb:clevergift-core:3.20.853-SNAPSHOT&#39;`. Which Gradle version and swagger-generator are you using. Can you share a [Build Scan](https://scans.gradle.com/)?","body":"Why do you have a snapshot dependency instead of a project dependency, if they live in the same multi-project? Have you tried <code>implementation(project(&quot;clevergift-core&quot;))</code> instead of <code>compile &#39;com.cb:clevergift-core:3.20.853-SNAPSHOT&#39;</code>. Which Gradle version and swagger-generator are you using. Can you share a <a href=\"https://scans.gradle.com/\" rel=\"nofollow noreferrer\">Build Scan</a>?"},{"owner":{"account_id":1294821,"reputation":4548,"user_id":1246159,"accept_rate":71,"display_name":"Mark"},"score":0,"creation_date":1683275011,"post_id":76174379,"comment_id":134344895,"body_markdown":"turned out invalidating the cache in Intellij fixed it","body":"turned out invalidating the cache in Intellij fixed it"}],"owner":{"account_id":1294821,"reputation":4548,"user_id":1246159,"accept_rate":71,"display_name":"Mark"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683210861,"creation_date":1683210861,"question_id":76174379,"body_markdown":"I have a Gradle project called **clevergift-core** with all my API service files. In the project I have 2 swagger files that define models. I use [Gradle Swagger Generator Plugin][1] to generate models from these 2 files. The code in build.gradle to generate these models is:\r\n\r\n\r\n\tswaggerSources {\r\n\t    clevergift {\r\n\t        inputFile = file(&#39;src/main/resources/models.yaml&#39;)\r\n\t        code {\r\n\t            language = &#39;java&#39;\r\n\t            configFile = file(&#39;config.json&#39;)\r\n\t            components = [&#39;models&#39;]\r\n\t        }\r\n\t    }\r\n\t    businesscard {\r\n\t        inputFile = file(&#39;src/main/resources/businesscardmodels.yaml&#39;)\r\n\t        code {\r\n\t            language = &#39;java&#39;\r\n\t            configFile = file(&#39;businesscardsconfig.json&#39;)\r\n\t            components = [&#39;models&#39;]\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\n\tcompileJava.dependsOn swaggerSources.clevergift.code , swaggerSources.businesscard.code\r\n\tsourceSets.main.java.srcDirs &quot;${swaggerSources.clevergift.code.outputDir}/src/main/java&quot;, &quot;${swaggerSources.businesscard.code.outputDir}/src/main/java&quot;\r\n\tsourceSets\r\n\r\nIn the project I run: `./gradlew generateSwaggerCode `\r\n\r\nand this generates the models in `clevergift-core/build/swagger-code-businesscard/` and `clevergift-core/build/swagger-code-clevergift/`. Heres what it looks like in IntelliJ:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThe business card models have the package `com.clevercards.businesscardmodels` and the clevergift models have the package `com.clevergift.models`.\r\n\r\n\r\nI also have 2 other Gradle projects - `clevergift-api` and `clevercards-business-api`. These import clevergift-core as a dependancy:\r\n\r\n    dependencies {\r\n        compile &#39;com.cb:clevergift-core:3.20.853-SNAPSHOT&#39;\r\n        ...\r\n\r\n\r\nIn IntelliJ I see this for clevergift-api\r\n[![enter image description here][3]][3]\r\n\r\nand this for clevercards-business-api:\r\n[![enter image description here][4]][4]\r\n\r\nIn `clevergift-api` I can import models from `com.clevergift.models` and from `com.clevercards.businesscardmodels`.\r\n\r\nHowever in `clevercards-business-api` I can only import models from `com.clevergift.models`, but not `com.clevercards.businesscardmodels`:\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n\r\nWhat am I doing wrong? Is there some setting I have set for `clevergift-api` but not for `clevercards-business-api` in IntelliJ?\r\n\r\n  [1]: https://github.com/int128/gradle-swagger-generator-plugin/blob/master/README.md\r\n  [2]: https://i.stack.imgur.com/2cOUF.png\r\n  [3]: https://i.stack.imgur.com/MJ9Fh.png\r\n  [4]: https://i.stack.imgur.com/E4V7y.png\r\n  [5]: https://i.stack.imgur.com/Wd6iH.png","title":"2 gradle projects using a local gradle dependancy in IntelliJ, but one cannot call models in the dependancy","body":"<p>I have a Gradle project called <strong>clevergift-core</strong> with all my API service files. In the project I have 2 swagger files that define models. I use <a href=\"https://github.com/int128/gradle-swagger-generator-plugin/blob/master/README.md\" rel=\"nofollow noreferrer\">Gradle Swagger Generator Plugin</a> to generate models from these 2 files. The code in build.gradle to generate these models is:</p>\n<pre><code>swaggerSources {\n    clevergift {\n        inputFile = file('src/main/resources/models.yaml')\n        code {\n            language = 'java'\n            configFile = file('config.json')\n            components = ['models']\n        }\n    }\n    businesscard {\n        inputFile = file('src/main/resources/businesscardmodels.yaml')\n        code {\n            language = 'java'\n            configFile = file('businesscardsconfig.json')\n            components = ['models']\n        }\n    }\n}\n\ncompileJava.dependsOn swaggerSources.clevergift.code , swaggerSources.businesscard.code\nsourceSets.main.java.srcDirs &quot;${swaggerSources.clevergift.code.outputDir}/src/main/java&quot;, &quot;${swaggerSources.businesscard.code.outputDir}/src/main/java&quot;\nsourceSets\n</code></pre>\n<p>In the project I run: <code>./gradlew generateSwaggerCode </code></p>\n<p>and this generates the models in <code>clevergift-core/build/swagger-code-businesscard/</code> and <code>clevergift-core/build/swagger-code-clevergift/</code>. Heres what it looks like in IntelliJ:</p>\n<p><a href=\"https://i.stack.imgur.com/2cOUF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2cOUF.png\" alt=\"enter image description here\" /></a></p>\n<p>The business card models have the package <code>com.clevercards.businesscardmodels</code> and the clevergift models have the package <code>com.clevergift.models</code>.</p>\n<p>I also have 2 other Gradle projects - <code>clevergift-api</code> and <code>clevercards-business-api</code>. These import clevergift-core as a dependancy:</p>\n<pre><code>dependencies {\n    compile 'com.cb:clevergift-core:3.20.853-SNAPSHOT'\n    ...\n</code></pre>\n<p>In IntelliJ I see this for clevergift-api\n<a href=\"https://i.stack.imgur.com/MJ9Fh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MJ9Fh.png\" alt=\"enter image description here\" /></a></p>\n<p>and this for clevercards-business-api:\n<a href=\"https://i.stack.imgur.com/E4V7y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E4V7y.png\" alt=\"enter image description here\" /></a></p>\n<p>In <code>clevergift-api</code> I can import models from <code>com.clevergift.models</code> and from <code>com.clevercards.businesscardmodels</code>.</p>\n<p>However in <code>clevercards-business-api</code> I can only import models from <code>com.clevergift.models</code>, but not <code>com.clevercards.businesscardmodels</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/Wd6iH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wd6iH.png\" alt=\"enter image description here\" /></a></p>\n<p>What am I doing wrong? Is there some setting I have set for <code>clevergift-api</code> but not for <code>clevercards-business-api</code> in IntelliJ?</p>\n"},{"tags":["java","android","docker","testcontainers","android-instrumentation"],"comments":[{"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"score":0,"creation_date":1683300904,"post_id":76172879,"comment_id":134350829,"body_markdown":"I think the webView.loadUrl(&quot;http://my-web-server/&quot;); should be webView.loadUrl(&quot;http://&quot;+webServer.getHost()+&quot;:&quot;+webServer.getMappedPort(80)+&quot;/&quot;);","body":"I think the webView.loadUrl(&quot;<a href=\"http://my-web-server/&quot;\" rel=\"nofollow noreferrer\">my-web-server/&quot;</a>); should be webView.loadUrl(&quot;http://&quot;+webServer.getHost()+&quot;:&quot;+webServer.&zwnj;&#8203;getMappedPort(80)+&quot;/&zwnj;&#8203;&quot;);"}],"answers":[{"tags":[],"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683210470,"creation_date":1683210470,"answer_id":76174325,"question_id":76172879,"body_markdown":"The solution here is to write a separate script (bash or PowerShell, for example) that starts the webserver docker container and waits for it. Once the server starts, you can then launch your Android tests.","title":"Android Instrumentation Test: Run code on host machine (not on device)","body":"<p>The solution here is to write a separate script (bash or PowerShell, for example) that starts the webserver docker container and waits for it. Once the server starts, you can then launch your Android tests.</p>\n"}],"owner":{"account_id":28120044,"reputation":1,"user_id":21486421,"display_name":"fauess"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683210470,"creation_date":1683201192,"question_id":76172879,"body_markdown":"I&#39;m trying to use [Testcontainers](https://www.testcontainers.org/) in my Android instrumentation tests because I want to start a webserver before the tests which my app is using.\r\n\r\nThe problem is that all code that is executed in the instrumentation test runs on the Android device or emulator and thus it can&#39;t access the docker daemon running on my host machine which leads to this exception when I run the tests and try to start a container with Testcontainers library:\r\n\r\n&gt; java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration\r\n\r\n\r\nSo is it somehow possible to execute the code for starting Testcontainers on my machine instead of in the Android device/emulator or is there a good workaround for this scenario?\r\n\r\n\r\n\r\nHere&#39;s an example class showing of what I&#39;m trying to achieve:\r\n\r\n```\r\nimport static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\r\nimport static org.junit.Assert.assertTrue;\r\n\r\nimport org.junit.AfterClass;\r\nimport org.junit.BeforeClass;\r\nimport org.junit.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.testcontainers.containers.GenericContainer;\r\nimport org.testcontainers.containers.Network;\r\nimport org.testcontainers.containers.wait.strategy.Wait;\r\nimport org.testcontainers.utility.DockerImageName;\r\nimport android.webkit.WebView;\r\nimport androidx.test.ext.junit.runners.AndroidJUnit4;\r\n\r\n\r\n@RunWith(AndroidJUnit4.class)\r\npublic class MyIntegrationTest\r\n{\r\n\r\n    private GenericContainer&lt;?&gt; webServer;\r\n\r\n    @BeforeClass\r\n    public void\r\n    startServer() {\r\n\r\n        Network network = Network.newNetwork();\r\n\r\n        webServer = new GenericContainer&lt;&gt;(DockerImageName.parse(&quot;nginx:latest&quot;))\r\n        .withExposedPorts(80)\r\n        .withNetwork(network)\r\n        .withNetworkAliases(&quot;my-web-server&quot;)\r\n        .withCommand(&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;)\r\n        .waitingFor(Wait.forHttp(&quot;/&quot;));\r\n\r\n        webServer.start();\r\n    }\r\n\r\n\r\n\r\n    @Test\r\n    public void testMyWebApp() {\r\n\r\n        // Load the web application in an Android WebView\r\n\r\n        getInstrumentation().runOnMainSync(() -&gt; {\r\n            WebView webView = new WebView(getInstrumentation().getContext());\r\n            webView.getSettings().setJavaScriptEnabled(true);\r\n            webView.loadUrl(&quot;http://my-web-server/&quot;);\r\n            assertTrue(webView.getTitle().contains(&quot;Welcome to nginx!&quot;));\r\n        });\r\n    }\r\n\r\n\r\n\r\n    @AfterClass\r\n    public void stopServer() {\r\n        webServer.stop();\r\n    }\r\n\r\n}\r\n```","title":"Android Instrumentation Test: Run code on host machine (not on device)","body":"<p>I'm trying to use <a href=\"https://www.testcontainers.org/\" rel=\"nofollow noreferrer\">Testcontainers</a> in my Android instrumentation tests because I want to start a webserver before the tests which my app is using.</p>\n<p>The problem is that all code that is executed in the instrumentation test runs on the Android device or emulator and thus it can't access the docker daemon running on my host machine which leads to this exception when I run the tests and try to start a container with Testcontainers library:</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration</p>\n</blockquote>\n<p>So is it somehow possible to execute the code for starting Testcontainers on my machine instead of in the Android device/emulator or is there a good workaround for this scenario?</p>\n<p>Here's an example class showing of what I'm trying to achieve:</p>\n<pre><code>import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;\nimport static org.junit.Assert.assertTrue;\n\nimport org.junit.AfterClass;\nimport org.junit.BeforeClass;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.testcontainers.containers.GenericContainer;\nimport org.testcontainers.containers.Network;\nimport org.testcontainers.containers.wait.strategy.Wait;\nimport org.testcontainers.utility.DockerImageName;\nimport android.webkit.WebView;\nimport androidx.test.ext.junit.runners.AndroidJUnit4;\n\n\n@RunWith(AndroidJUnit4.class)\npublic class MyIntegrationTest\n{\n\n    private GenericContainer&lt;?&gt; webServer;\n\n    @BeforeClass\n    public void\n    startServer() {\n\n        Network network = Network.newNetwork();\n\n        webServer = new GenericContainer&lt;&gt;(DockerImageName.parse(&quot;nginx:latest&quot;))\n        .withExposedPorts(80)\n        .withNetwork(network)\n        .withNetworkAliases(&quot;my-web-server&quot;)\n        .withCommand(&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;)\n        .waitingFor(Wait.forHttp(&quot;/&quot;));\n\n        webServer.start();\n    }\n\n\n\n    @Test\n    public void testMyWebApp() {\n\n        // Load the web application in an Android WebView\n\n        getInstrumentation().runOnMainSync(() -&gt; {\n            WebView webView = new WebView(getInstrumentation().getContext());\n            webView.getSettings().setJavaScriptEnabled(true);\n            webView.loadUrl(&quot;http://my-web-server/&quot;);\n            assertTrue(webView.getTitle().contains(&quot;Welcome to nginx!&quot;));\n        });\n    }\n\n\n\n    @AfterClass\n    public void stopServer() {\n        webServer.stop();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","axon"],"comments":[{"owner":{"account_id":391039,"reputation":17255,"user_id":751484,"accept_rate":86,"display_name":"Jonathan M"},"score":0,"creation_date":1551392455,"post_id":54933692,"comment_id":96634721,"body_markdown":"@Allard, I&#39;m hoping you or someone from your team will see this. I appreciate any help. Thanks.","body":"@Allard, I&#39;m hoping you or someone from your team will see this. I appreciate any help. Thanks."},{"owner":{"account_id":2552081,"reputation":7045,"user_id":2215649,"display_name":"Steven"},"score":1,"creation_date":1551424353,"post_id":54933692,"comment_id":96642475,"body_markdown":"And I can guarantee you, someone on his team has seen it. I hope I can clarify some things for you @Jonathan M :-)","body":"And I can guarantee you, someone on his team has seen it. I hope I can clarify some things for you @Jonathan M :-)"}],"answers":[{"tags":[],"owner":{"account_id":2552081,"reputation":7045,"user_id":2215649,"display_name":"Steven"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1683210199,"creation_date":1551426228,"answer_id":54940065,"question_id":54933692,"body_markdown":"I hope I can help you out with this question!\r\n\r\nThe short answer would be:\r\nThe necessity of using the `@EventSourcingHandler` really depends on how you want to model your application.\r\n\r\nNow, that doesn&#39;t say much, so let me elaborate a little why I am stating this.\r\nIn answering your questions I am assuming that your desire is to create an application where you follow the ideas of DDD, CQRS and Event Sourcing. Thus, the concepts which Axon tries to simplify for you whilst building your application.\r\n\r\nLet me go over your numbered questions from here:\r\n\r\n1. The reason you&#39;d need `@EventSourcingHandler` annotated functions in your Aggregate, is to (1) update the Aggregate state based on the (2) events **it** has published. To go to point 1, why would you update the state of your Aggregate? As your Aggregate is the Command Model of your application, it is tasked with making the decisions based on the commands it receives. To be able to make decisions, sometimes an Aggregate needs state, but sometimes it does not. So in the `Widget` example you&#39;ve shared, I&#39;d assume that the `color` field is no used at all to drive business logic later on, hence you could perfectly omit this state from the Aggregate without any problems. With the second point of my response I try to point out that an Aggregate will only ever handle the events which originate from itself. This is as the events are the source of your Aggregate, as the events constitute all the delta&#39;s which have occurred on that given model.\r\n2. Your following questions fits nicely with proceeding the explanation I&#39;ve started in point 1. The answer is quite simple, your `Widget` Aggregate is not stored anywhere, not *as is*. Every time you&#39;d retrieve your Aggregate from the `Repository` (this is done automatically for you in Axon), which defaults to an `EventSourcingRepository` in Axon, all the Events for that given Aggregate will be retrieved from the Event Store. Than, an *empty* Aggregate instance is created and the framework will replay all the events it has found for that exact Aggregate instance. You&#39;re thus effectively Event Sourcing your Aggregate every time a new command comes in. This might sound a little overkill, as the number of events for a given Aggregate might grow to quite a large set. This can be solved by doing things like making [snapshots][1] of the Aggregate.\r\n3. If this form of splitting your application in a dedicated part which deals with your business logic, the Command Model, and the part which simply returns a Query Model as an answer, the Query Model, then you could decide to have a [State Stored Aggregate][2]. So note, your are not required, at all, to do Event Sourcing when using Axon; it&#39;s just the default modus operandi for the framework. Thus I understand the felt concern from your part, that you&#39;re duplicating your logic. You can however strictly separate the part which makes all the decisions to be held in your Aggregate.\r\nThe Query Model (in your example the `ProjectedWidget`) can be stored in what ever format and in what ever database/tool you&#39;d like, ideally without any business logic.\r\nIf you do find yourself adding business logic in the Query side of your application, this might suggest you should upgrade this bit as an event originating from your Aggregate&#39;s.\r\n\r\nI hope this brings you some insights into why you&#39;d go for Event Sourcing to begin with. This article describes [CQRS][3] in a little more detail than I could do here, and [this][4] link for Event Sourcing; hope they might serve as a more thorough explanation than I just gave you.\r\n\r\n  [1]: https://docs.axoniq.io/reference-guide/axon-framework/tuning/event-snapshots\r\n  [2]: https://docs.axoniq.io/reference-guide/implementing-domain-logic/command-handling/state-stored-aggregates\r\n  [3]: https://axoniq.io/resources/cqrs\r\n  [4]: https://axoniq.io/resources/event-sourcing","title":"Why is EventSourcingHandler (in aggregate object) needed?","body":"<p>I hope I can help you out with this question!</p>\n<p>The short answer would be:\nThe necessity of using the <code>@EventSourcingHandler</code> really depends on how you want to model your application.</p>\n<p>Now, that doesn't say much, so let me elaborate a little why I am stating this.\nIn answering your questions I am assuming that your desire is to create an application where you follow the ideas of DDD, CQRS and Event Sourcing. Thus, the concepts which Axon tries to simplify for you whilst building your application.</p>\n<p>Let me go over your numbered questions from here:</p>\n<ol>\n<li>The reason you'd need <code>@EventSourcingHandler</code> annotated functions in your Aggregate, is to (1) update the Aggregate state based on the (2) events <strong>it</strong> has published. To go to point 1, why would you update the state of your Aggregate? As your Aggregate is the Command Model of your application, it is tasked with making the decisions based on the commands it receives. To be able to make decisions, sometimes an Aggregate needs state, but sometimes it does not. So in the <code>Widget</code> example you've shared, I'd assume that the <code>color</code> field is no used at all to drive business logic later on, hence you could perfectly omit this state from the Aggregate without any problems. With the second point of my response I try to point out that an Aggregate will only ever handle the events which originate from itself. This is as the events are the source of your Aggregate, as the events constitute all the delta's which have occurred on that given model.</li>\n<li>Your following questions fits nicely with proceeding the explanation I've started in point 1. The answer is quite simple, your <code>Widget</code> Aggregate is not stored anywhere, not <em>as is</em>. Every time you'd retrieve your Aggregate from the <code>Repository</code> (this is done automatically for you in Axon), which defaults to an <code>EventSourcingRepository</code> in Axon, all the Events for that given Aggregate will be retrieved from the Event Store. Than, an <em>empty</em> Aggregate instance is created and the framework will replay all the events it has found for that exact Aggregate instance. You're thus effectively Event Sourcing your Aggregate every time a new command comes in. This might sound a little overkill, as the number of events for a given Aggregate might grow to quite a large set. This can be solved by doing things like making <a href=\"https://docs.axoniq.io/reference-guide/axon-framework/tuning/event-snapshots\" rel=\"nofollow noreferrer\">snapshots</a> of the Aggregate.</li>\n<li>If this form of splitting your application in a dedicated part which deals with your business logic, the Command Model, and the part which simply returns a Query Model as an answer, the Query Model, then you could decide to have a <a href=\"https://docs.axoniq.io/reference-guide/implementing-domain-logic/command-handling/state-stored-aggregates\" rel=\"nofollow noreferrer\">State Stored Aggregate</a>. So note, your are not required, at all, to do Event Sourcing when using Axon; it's just the default modus operandi for the framework. Thus I understand the felt concern from your part, that you're duplicating your logic. You can however strictly separate the part which makes all the decisions to be held in your Aggregate.\nThe Query Model (in your example the <code>ProjectedWidget</code>) can be stored in what ever format and in what ever database/tool you'd like, ideally without any business logic.\nIf you do find yourself adding business logic in the Query side of your application, this might suggest you should upgrade this bit as an event originating from your Aggregate's.</li>\n</ol>\n<p>I hope this brings you some insights into why you'd go for Event Sourcing to begin with. This article describes <a href=\"https://axoniq.io/resources/cqrs\" rel=\"nofollow noreferrer\">CQRS</a> in a little more detail than I could do here, and <a href=\"https://axoniq.io/resources/event-sourcing\" rel=\"nofollow noreferrer\">this</a> link for Event Sourcing; hope they might serve as a more thorough explanation than I just gave you.</p>\n"}],"owner":{"account_id":391039,"reputation":17255,"user_id":751484,"accept_rate":86,"display_name":"Jonathan M"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2866,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":54940065,"answer_count":1,"score":7,"last_activity_date":1683210199,"creation_date":1551385516,"question_id":54933692,"body_markdown":"Fair warning: I have no idea what I&#39;m doing, so even the asking of this question may go awry.\r\n\r\nI&#39;m wanting to update state on a simple object (the Aggregate) and then provide the UI with a projection of the changed object. Here&#39;s my aggregate object (command handler exists, but not shown here).\r\n\r\n    @Aggregate\r\n    public class Widget {\r\n        @AggregateIdentifier\r\n        private String id;\r\n        private String color;\r\n    ...\r\n        @EventSourcingHandler\r\n        public void on(ChangeColorEvt evt) {\r\n            color = evt.getColor();\r\n        }\r\n    ... \r\n    }\r\n\r\n...and here is my projection:\r\n\r\n    public class WidgetProjection {\r\n        private final EntityManager entityManager;\r\n        private final QueryUpdateEmitter queryUpdateEmitter;\r\n    ...\r\n        @EventHandler\r\n        public void on(ChangeColorEvt evt) {\r\n            ProjectedWidget projection = entityManager.find(ProjectedWidget.class, evt.getId());\r\n            projection.setColor(evt.getColor());\r\n            queryUpdateEmitter.emit(FetchWidget.class, query -&gt; evt.getId().startsWith(query.getFilter().getIdStartsWith()), projection);\r\n        }\r\n    ...\r\n    }\r\n\r\n\r\nThe QueryHandler does what you would expect, finding the instance and returning it.\r\n\r\nSo here are my questions:\r\n\r\n 1. Why do I need the EventSourcingHandler in the Aggregate? That is, it\r\n    appears to do work, but the result isn&#39;t stored or sent anywhere.\r\n 2. So, that becomes my next question: After executing the EventSourcing\r\n    Handler, is the resulting instance of Widget (not the projection)\r\n    stored, seen, or sent anywhere?\r\n 3. If EventSourcingHandler is indeed needed, is there any way to avoid\r\n    having two independent copies of my business logic (one in\r\n    EventSourcingHandler, and one EventHandler)? I really hate the idea\r\n    of having to update the same business logic in two places.\r\n\r\nI appreciate any clarity the group can provide. Thanks for your help!\r\n","title":"Why is EventSourcingHandler (in aggregate object) needed?","body":"<p>Fair warning: I have no idea what I'm doing, so even the asking of this question may go awry.</p>\n\n<p>I'm wanting to update state on a simple object (the Aggregate) and then provide the UI with a projection of the changed object. Here's my aggregate object (command handler exists, but not shown here).</p>\n\n<pre><code>@Aggregate\npublic class Widget {\n    @AggregateIdentifier\n    private String id;\n    private String color;\n...\n    @EventSourcingHandler\n    public void on(ChangeColorEvt evt) {\n        color = evt.getColor();\n    }\n... \n}\n</code></pre>\n\n<p>...and here is my projection:</p>\n\n<pre><code>public class WidgetProjection {\n    private final EntityManager entityManager;\n    private final QueryUpdateEmitter queryUpdateEmitter;\n...\n    @EventHandler\n    public void on(ChangeColorEvt evt) {\n        ProjectedWidget projection = entityManager.find(ProjectedWidget.class, evt.getId());\n        projection.setColor(evt.getColor());\n        queryUpdateEmitter.emit(FetchWidget.class, query -&gt; evt.getId().startsWith(query.getFilter().getIdStartsWith()), projection);\n    }\n...\n}\n</code></pre>\n\n<p>The QueryHandler does what you would expect, finding the instance and returning it.</p>\n\n<p>So here are my questions:</p>\n\n<ol>\n<li>Why do I need the EventSourcingHandler in the Aggregate? That is, it\nappears to do work, but the result isn't stored or sent anywhere.</li>\n<li>So, that becomes my next question: After executing the EventSourcing\nHandler, is the resulting instance of Widget (not the projection)\nstored, seen, or sent anywhere?</li>\n<li>If EventSourcingHandler is indeed needed, is there any way to avoid\nhaving two independent copies of my business logic (one in\nEventSourcingHandler, and one EventHandler)? I really hate the idea\nof having to update the same business logic in two places.</li>\n</ol>\n\n<p>I appreciate any clarity the group can provide. Thanks for your help!</p>\n"},{"tags":["java","blockchain","corda","corda-flow"],"comments":[{"owner":{"account_id":25967935,"reputation":41,"user_id":19683633,"display_name":"Smog"},"score":0,"creation_date":1683431644,"post_id":76174149,"comment_id":134364719,"body_markdown":"I managed to solve this by adding the corda.finance module in the classpaths of all the build.gradle files (root, contracts, workflows and client). Adding this note in case if there is anyone else stuck like me!","body":"I managed to solve this by adding the corda.finance module in the classpaths of all the build.gradle files (root, contracts, workflows and client). Adding this note in case if there is anyone else stuck like me!"}],"owner":{"account_id":25967935,"reputation":41,"user_id":19683633,"display_name":"Smog"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683210101,"creation_date":1683209440,"question_id":76174149,"body_markdown":"I am trying to add cash flow to the example corda app, however I am unable to import the net.corda.finance packages in the clients/controller file (referring 1st screenshot attached). It does not resolve through the import from web option. Not able to get to it by searching either.\r\n\r\nI&#39;ve updated the dependencies in the build.gradle file at the app level (referring 2nd screenshot attached) and the libraries are getting downloaded in the nodes folders and in the external dependencies (referring 3rd screenshot attached).\r\n\r\n[![enter image description here](https://i.stack.imgur.com/PoppO.png)](https://i.stack.imgur.com/PoppO.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/aMwqY.png)](https://i.stack.imgur.com/aMwqY.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/9oY1l.png)](https://i.stack.imgur.com/9oY1l.png)\r\n\r\nCan someone please guide if I have missed any steps?","title":"Unable to import the net.corda.finance modules in corda","body":"<p>I am trying to add cash flow to the example corda app, however I am unable to import the net.corda.finance packages in the clients/controller file (referring 1st screenshot attached). It does not resolve through the import from web option. Not able to get to it by searching either.</p>\n<p>I've updated the dependencies in the build.gradle file at the app level (referring 2nd screenshot attached) and the libraries are getting downloaded in the nodes folders and in the external dependencies (referring 3rd screenshot attached).</p>\n<p><a href=\"https://i.stack.imgur.com/PoppO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PoppO.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/aMwqY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aMwqY.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/9oY1l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9oY1l.png\" alt=\"enter image description here\" /></a></p>\n<p>Can someone please guide if I have missed any steps?</p>\n"},{"tags":["java","swing","windowbuilder"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1683218356,"post_id":76174169,"comment_id":134336609,"body_markdown":"1) Class names SHOULD start with an upper case character. Have you ever seen a class in the Java API that doesn&#39;t? Learn and follow Java naming conventions. 2) *The Jframe can&#39;t resize.* - because it is shown in the extended state. You need to either a) drag the frame so you can access the resizing border or b) click on the &quot;iconify&quot; icon first.","body":"1) Class names SHOULD start with an upper case character. Have you ever seen a class in the Java API that doesn&#39;t? Learn and follow Java naming conventions. 2) <i>The Jframe can&#39;t resize.</i> - because it is shown in the extended state. You need to either a) drag the frame so you can access the resizing border or b) click on the &quot;iconify&quot; icon first."}],"owner":{"account_id":22754486,"reputation":11,"user_id":16914146,"display_name":"YI Chen Wang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683209525,"creation_date":1683209525,"question_id":76174169,"body_markdown":"Please help ! \r\nI have three problems:\r\n1. The Jframe can&#39;t resize.\r\n2. How can I make the frame 100% fit in the design tab ? \r\n3. How can I avoid the following items in the picture to be cropped[![the following items ][1]][1]\r\n\r\n\r\n```\r\nimport java.awt.EventQueue;\r\nimport java.awt.Toolkit;\r\n\r\nimport javax.swing.JFrame;\r\n\r\npublic class home0504 extends JFrame {\r\n\r\n\t/**\r\n\t * Launch the application.\r\n\t */\r\n\tpublic static void main(String[] args) {\r\n\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\thome0504 frame = new home0504();\r\n\t\t\t\t\tframe.setVisible(true);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Create the frame.\r\n\t */\r\n\tpublic home0504() {\r\n\t\t//setBounds(100, 100, 392, 328);\r\n\t\tsetExtendedState(JFrame.MAXIMIZED_BOTH); \r\n\t\tsetSize((int)Toolkit.getDefaultToolkit().getScreenSize().getWidth(), (int)Toolkit.getDefaultToolkit().getScreenSize().getHeight());\r\n\t\tsetResizable(true);\r\n\t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n\t}\r\n\r\n} \r\n```\r\n\r\nHere&#39;s a look in my design tab :\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/v8VNw.png\r\n  [2]: https://i.stack.imgur.com/X7ud6.png","title":"Java swing window builder : Jframe resize and setsize problems","body":"<p>Please help !\nI have three problems:</p>\n<ol>\n<li>The Jframe can't resize.</li>\n<li>How can I make the frame 100% fit in the design tab ?</li>\n<li>How can I avoid the following items in the picture to be cropped<a href=\"https://i.stack.imgur.com/v8VNw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v8VNw.png\" alt=\"the following items \" /></a></li>\n</ol>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.Toolkit;\n\nimport javax.swing.JFrame;\n\npublic class home0504 extends JFrame {\n\n    /**\n     * Launch the application.\n     */\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    home0504 frame = new home0504();\n                    frame.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    /**\n     * Create the frame.\n     */\n    public home0504() {\n        //setBounds(100, 100, 392, 328);\n        setExtendedState(JFrame.MAXIMIZED_BOTH); \n        setSize((int)Toolkit.getDefaultToolkit().getScreenSize().getWidth(), (int)Toolkit.getDefaultToolkit().getScreenSize().getHeight());\n        setResizable(true);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n    }\n\n} \n</code></pre>\n<p>Here's a look in my design tab :\n<a href=\"https://i.stack.imgur.com/X7ud6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X7ud6.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","security","authorization"],"comments":[{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":0,"creation_date":1683211264,"post_id":76174087,"comment_id":134334798,"body_markdown":"Maybe keycloak ? https://www.keycloak.org/docs/latest/authorization_services/index.html","body":"Maybe keycloak ? <a href=\"https://www.keycloak.org/docs/latest/authorization_services/index.html\" rel=\"nofollow noreferrer\">keycloak.org/docs/latest/authorization_services/index.html</a>"},{"owner":{"account_id":3068449,"reputation":2571,"user_id":2599657,"accept_rate":60,"display_name":"sashok_bg"},"score":0,"creation_date":1683212113,"post_id":76174087,"comment_id":134335007,"body_markdown":"Hello @TacheDeChoco yes we are looking at keycloak but we had really bad experience when we tested Authz - it is not very mature. We wanted to implement authz inside our application thus the need to find some framework that is not tied to a whole software solution like keycloak","body":"Hello @TacheDeChoco yes we are looking at keycloak but we had really bad experience when we tested Authz - it is not very mature. We wanted to implement authz inside our application thus the need to find some framework that is not tied to a whole software solution like keycloak"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1683249190,"post_id":76174087,"comment_id":134341753,"body_markdown":"Spring security is not bound to HTTP requests. You can write expressions on any kind of `@Component` (including `@Service` or `@Repository`) using SpEL in `@PreAuthorize` and alike. Sample in this tutorial: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_specialized_oauthentication","body":"Spring security is not bound to HTTP requests. You can write expressions on any kind of <code>@Component</code> (including <code>@Service</code> or <code>@Repository</code>) using SpEL in <code>@PreAuthorize</code> and alike. Sample in this tutorial: <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_specialized_oauthentication\" rel=\"nofollow noreferrer\">github.com/ch4mpy/spring-addons/tree/master/samples/tutorial&zwnj;&#8203;s/&hellip;</a>"}],"owner":{"account_id":3068449,"reputation":2571,"user_id":2599657,"accept_rate":60,"display_name":"sashok_bg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683209039,"creation_date":1683209039,"question_id":76174087,"body_markdown":"I am searching for an authorization framework written if possible in Java that provides somewhat similar functionaility as AWS IAM.\r\nExample:\r\n- PRINCIPAL CAN/CANNOT do ACTION on RESOURCE\r\n\r\nWhere all of the params can be expressions like: Principal(*) CAN do (mail:*) on (/server/A/*)\r\n\r\nI am having hard time finding anything because the search engine always return Spring Security and the likes - in which I am not interested.\r\nI want to implement purely busness logic permissions and not any HTTP request related security etc.\r\n\r\nThe closest things I found are: Keycloak&#39;s Authz framework and [Cerbos][1] (written in go\r\n\r\nAny ideas are greatly appreciated.\r\n\r\n  [1]: https://docs.cerbos.dev/cerbos/latest/glossary/index.html","title":"Authorization Framework for Java","body":"<p>I am searching for an authorization framework written if possible in Java that provides somewhat similar functionaility as AWS IAM.\nExample:</p>\n<ul>\n<li>PRINCIPAL CAN/CANNOT do ACTION on RESOURCE</li>\n</ul>\n<p>Where all of the params can be expressions like: Principal(<em>) CAN do (mail:</em>) on (/server/A/*)</p>\n<p>I am having hard time finding anything because the search engine always return Spring Security and the likes - in which I am not interested.\nI want to implement purely busness logic permissions and not any HTTP request related security etc.</p>\n<p>The closest things I found are: Keycloak's Authz framework and <a href=\"https://docs.cerbos.dev/cerbos/latest/glossary/index.html\" rel=\"nofollow noreferrer\">Cerbos</a> (written in go</p>\n<p>Any ideas are greatly appreciated.</p>\n"},{"tags":["java","spring","nullpointerexception","jdbctemplate"],"answers":[{"tags":[],"owner":{"account_id":116580,"reputation":118703,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1338564374,"creation_date":1338564374,"answer_id":10853122,"question_id":10853053,"body_markdown":"in your class `myObj`, the values for `val1` and `val2` are never initialized.","title":"spring jdbctemplate: null pointer exception in set values","body":"<p>in your class <code>myObj</code>, the values for <code>val1</code> and <code>val2</code> are never initialized.</p>\n"},{"tags":[],"owner":{"account_id":217708,"reputation":23000,"user_id":473637,"accept_rate":88,"display_name":"Jeshurun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1338564409,"creation_date":1338564409,"answer_id":10853127,"question_id":10853053,"body_markdown":"Are you sure `myObj` is not null? It looks like it could be the only object that could be null in that statement. Could you do a simple null check on the object inside the method to confirm?","title":"spring jdbctemplate: null pointer exception in set values","body":"<p>Are you sure <code>myObj</code> is not null? It looks like it could be the only object that could be null in that statement. Could you do a simple null check on the object inside the method to confirm?</p>\n"},{"tags":[],"owner":{"account_id":13261077,"reputation":2382,"user_id":9575631,"display_name":"Ousama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683208998,"creation_date":1683208998,"answer_id":76174076,"question_id":10853053,"body_markdown":"I fixed this issue by using `setObject` instead of `setBoolean` and `setString` :\r\n\r\n    this.jdbcTemplate.update(SOME_SQL_UPDATE, new PreparedStatementSetter() {\r\n      public void setValues(PreparedStatement ps) throws SQLException {\r\n        ps.setObject(1, myObj.isVal1() ? 1 : 0, Types.NUMERIC);\r\n        ps.setObject(2, myObj.getVal2().toString(), Types.VARCHAR);\r\n      }\r\n    });\r\n\r\nNB: In my case, I&#39;m working with Oracle 12c, boolean is stocked as a number (true =&gt; 1, false =&gt; 0)","title":"spring jdbctemplate: null pointer exception in set values","body":"<p>I fixed this issue by using <code>setObject</code> instead of <code>setBoolean</code> and <code>setString</code> :</p>\n<pre><code>this.jdbcTemplate.update(SOME_SQL_UPDATE, new PreparedStatementSetter() {\n  public void setValues(PreparedStatement ps) throws SQLException {\n    ps.setObject(1, myObj.isVal1() ? 1 : 0, Types.NUMERIC);\n    ps.setObject(2, myObj.getVal2().toString(), Types.VARCHAR);\n  }\n});\n</code></pre>\n<p>NB: In my case, I'm working with Oracle 12c, boolean is stocked as a number (true =&gt; 1, false =&gt; 0)</p>\n"}],"owner":{"account_id":281997,"reputation":3899,"user_id":578635,"accept_rate":66,"display_name":"Chun ping Wang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2343,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":10853127,"answer_count":3,"score":0,"last_activity_date":1683208998,"creation_date":1338564099,"question_id":10853053,"body_markdown":"my error \r\n\r\n     java.lang.NullPointerException.\r\n     MyDAO$2.setValues\r\n        org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:680)\r\n        org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:454)\r\n        org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:676)\r\n        org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:738)\r\n    \r\n    net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)\r\n    org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:694)\r\n    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:122)\r\n    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:144)\r\n    org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:639)\r\n\r\nmy code is \r\n\r\n         this.jdbcTemplate.update(SOME_SQL_UPDATE, new PreparedStatementSetter() {\r\n                        public void setValues(PreparedStatement ps) throws SQLException {\r\n                            ps.setBoolean(1, myObj.isVal1());\r\n                            ps.setString(2, myObj.getVal2().toString());\r\n                        }\r\n                    });\r\n    \r\n    public class myObj {\r\n        private boolean val1;\r\n        private Enum val2;\r\n    }\r\n\r\nmy db column for boolean is number(1,0) and my set string column is varchar. \r\n\r\nNote: I am using spring 1.2 and currently upgrading to spring 3. \r\n\r\n\r\nWhat could be wrong? \r\n\r\nHow can i fix this? ","title":"spring jdbctemplate: null pointer exception in set values","body":"<p>my error </p>\n\n<pre><code> java.lang.NullPointerException.\n MyDAO$2.setValues\n    org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:680)\n    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:454)\n    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:676)\n    org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:738)\n\nnet.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)\norg.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:694)\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:122)\norg.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:144)\norg.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:639)\n</code></pre>\n\n<p>my code is </p>\n\n<pre><code>     this.jdbcTemplate.update(SOME_SQL_UPDATE, new PreparedStatementSetter() {\n                    public void setValues(PreparedStatement ps) throws SQLException {\n                        ps.setBoolean(1, myObj.isVal1());\n                        ps.setString(2, myObj.getVal2().toString());\n                    }\n                });\n\npublic class myObj {\n    private boolean val1;\n    private Enum val2;\n}\n</code></pre>\n\n<p>my db column for boolean is number(1,0) and my set string column is varchar. </p>\n\n<p>Note: I am using spring 1.2 and currently upgrading to spring 3. </p>\n\n<p>What could be wrong? </p>\n\n<p>How can i fix this? </p>\n"},{"tags":["java","graphql","graphql-java"],"answers":[{"tags":[],"owner":{"account_id":16504965,"reputation":676,"user_id":11925221,"display_name":"Malaury Boudon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683208608,"creation_date":1683208608,"answer_id":76174012,"question_id":76127869,"body_markdown":"The code is currently fine, the error lies in the application startup. We don&#39;t do &quot;mvn clean install&quot; + IntelliJ startup of the main class. But rather, &quot;mvn spring-boot:run&quot;.","title":"Why isn&#39;t GraphQL launching?","body":"<p>The code is currently fine, the error lies in the application startup. We don't do &quot;mvn clean install&quot; + IntelliJ startup of the main class. But rather, &quot;mvn spring-boot:run&quot;.</p>\n"}],"owner":{"account_id":16504965,"reputation":676,"user_id":11925221,"display_name":"Malaury Boudon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1683208608,"creation_date":1682671982,"question_id":76127869,"body_markdown":"Could you explain to me why GraphQL does not launch?\r\nI followed this tutorial: https://blog.devgenius.io/graphql-with-spring-boot-starter-graphql-7b406998c0b5\r\n\r\nWhen I start the spring app I have no logs about Graphql...\r\nNo errors, nothing, so it&#39;s hard to know what&#39;s wrong.\r\nMy app starts well:\r\n[![enter image description here][1]][1]\r\n\r\nWhen I go on this url: http://localhost:8080/graphiql\r\n\r\nI see this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIf I try to request this:\r\n````\r\ncurl --location --request POST &#39;http://localhost:8080/graphql&#39; \\\r\n--header &#39;Content-Type: application/json&#39; \\\r\n--data-raw &#39;{&quot;query&quot;:&quot;query {\\r\\n  getAll {\\r\\n    id\\r\\n    title\\r\\n    author\\r\\n    content\\r\\n  }\\r\\n}&quot;,&quot;variables&quot;:{}}&#39;\r\n````\r\nI have a 404 error:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nCould you help me pls?\r\n\r\n\r\nThis is my schema:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nquery.graphqls:\r\n```javascript\r\ntype Query {\r\n    getById(id: String): Article,\r\n    getAll: [Article],\r\n    getAllByClient: [Article]\r\n}\r\n\r\ntype Mutation {\r\n    add(id: String, idClient: String): Article,\r\n    update( title : String, category: String, content: String, planningTime: String): Article,\r\n    publish(id: String): Boolean,\r\n}\r\n```\r\n\r\narticle.graphqls:\r\n```javascript\r\ntype Article {\r\n    id: String,\r\n    title: String,\r\n    category: String,\r\n    content: String,\r\n    planningTime: String,\r\n    idClient: String,\r\n    status: String\r\n}\r\n```\r\n\r\nThis is my controller:\r\n```java\r\npackage org.qaravelle.technical.graphql;\r\n...\r\n\r\n@Controller\r\n@RequiredArgsConstructor\r\npublic class ArticleController {\r\n\r\n    private final ArticleService articleService;\r\n\r\n    private final ArticleMapper articleMapper = Mappers.getMapper(ArticleMapper.class);\r\n\r\n    @MutationMapping\r\n    public Article add(@Argument String id, @Argument String idClient) {\r\n        try {\r\n            return articleService.creerArticle(ArticleImpl.builder().id(UUID.fromString(id)).build());\r\n        } catch (RuntimeException | ArticleNotInsertedException e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    @QueryMapping\r\n    public Article getById(@Argument String id) {\r\n        try {\r\n            Optional&lt;Article&gt; article = articleService.getById(UUID.fromString(id));\r\n            if(article.isPresent()){\r\n                return article.get();\r\n            } else{\r\n                return null;\r\n            }\r\n        } catch (RuntimeException e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    @MutationMapping\r\n    public Article update(@Argument String title, @Argument String category, @Argument String content, @Argument String planningTime) {\r\n        try {\r\n            return articleService.updateArticle(articleMapper.toDomain(title, content, category, planningTime));\r\n        } catch (RuntimeException | ArticleNotUpdatedException e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    @QueryMapping\r\n    public Iterable&lt;Article&gt; getAll() {\r\n        try {\r\n            return articleService.articles();\r\n        } catch (RuntimeException e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    @MutationMapping\r\n    public Boolean publish(@Argument String id) throws ArticleNotFoundException, ArticleNotUpdatedException {\r\n        try {\r\n            articleService.publish(UUID.fromString(id));\r\n            return true;\r\n        } catch (RuntimeException e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    @QueryMapping\r\n    public Iterable&lt;Article&gt; getAllByClient(@Argument String id) {\r\n        try {\r\n           return articleService.findByClient(UUID.fromString(id));\r\n        } catch (RuntimeException e) {\r\n            return null;\r\n        }\r\n    }\r\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;title&quot;)\r\n    public String getTitle(Article article){\r\n        return article.getTitle().getValue();\r\n    }\r\n\r\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;id&quot;)\r\n    public String getId(Article article){ return article.getId().toString();}\r\n\r\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;category&quot;)\r\n    public String getCategory(Article article){ return article.getCategory().getValue().getValue();}\r\n\r\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;planningTime&quot;)\r\n    public String getPlanningTime(Article article){\r\n        return article.getPlanningTime().getValue().toString();\r\n    }\r\n\r\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;idClient&quot;)\r\n    public String getIdClient(Article article){\r\n        return article.getIdClient().toString();\r\n    }\r\n\r\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;status&quot;)\r\n    public String getStatus(Article article){\r\n        return article.getStatus().getValue();\r\n    }\r\n}\r\n\r\n```\r\n\r\nI added this dependecies in my pom.xml:\r\n```xml\r\n&lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.6&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n...\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-graphql&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/watk4.png\r\n  [2]: https://i.stack.imgur.com/xRgZc.png\r\n  [3]: https://i.stack.imgur.com/Clcyk.png\r\n  [4]: https://i.stack.imgur.com/mJQKI.png","title":"Why isn&#39;t GraphQL launching?","body":"<p>Could you explain to me why GraphQL does not launch?\nI followed this tutorial: <a href=\"https://blog.devgenius.io/graphql-with-spring-boot-starter-graphql-7b406998c0b5\" rel=\"nofollow noreferrer\">https://blog.devgenius.io/graphql-with-spring-boot-starter-graphql-7b406998c0b5</a></p>\n<p>When I start the spring app I have no logs about Graphql...\nNo errors, nothing, so it's hard to know what's wrong.\nMy app starts well:\n<a href=\"https://i.stack.imgur.com/watk4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/watk4.png\" alt=\"enter image description here\" /></a></p>\n<p>When I go on this url: http://localhost:8080/graphiql</p>\n<p>I see this:</p>\n<p><a href=\"https://i.stack.imgur.com/xRgZc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xRgZc.png\" alt=\"enter image description here\" /></a></p>\n<p>If I try to request this:</p>\n<pre><code>curl --location --request POST 'http://localhost:8080/graphql' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{&quot;query&quot;:&quot;query {\\r\\n  getAll {\\r\\n    id\\r\\n    title\\r\\n    author\\r\\n    content\\r\\n  }\\r\\n}&quot;,&quot;variables&quot;:{}}'\n</code></pre>\n<p>I have a 404 error:</p>\n<p><a href=\"https://i.stack.imgur.com/Clcyk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Clcyk.png\" alt=\"enter image description here\" /></a></p>\n<p>Could you help me pls?</p>\n<p>This is my schema:</p>\n<p><a href=\"https://i.stack.imgur.com/mJQKI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mJQKI.png\" alt=\"enter image description here\" /></a></p>\n<p>query.graphqls:</p>\n<pre class=\"lang-js prettyprint-override\"><code>type Query {\n    getById(id: String): Article,\n    getAll: [Article],\n    getAllByClient: [Article]\n}\n\ntype Mutation {\n    add(id: String, idClient: String): Article,\n    update( title : String, category: String, content: String, planningTime: String): Article,\n    publish(id: String): Boolean,\n}\n</code></pre>\n<p>article.graphqls:</p>\n<pre class=\"lang-js prettyprint-override\"><code>type Article {\n    id: String,\n    title: String,\n    category: String,\n    content: String,\n    planningTime: String,\n    idClient: String,\n    status: String\n}\n</code></pre>\n<p>This is my controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.qaravelle.technical.graphql;\n...\n\n@Controller\n@RequiredArgsConstructor\npublic class ArticleController {\n\n    private final ArticleService articleService;\n\n    private final ArticleMapper articleMapper = Mappers.getMapper(ArticleMapper.class);\n\n    @MutationMapping\n    public Article add(@Argument String id, @Argument String idClient) {\n        try {\n            return articleService.creerArticle(ArticleImpl.builder().id(UUID.fromString(id)).build());\n        } catch (RuntimeException | ArticleNotInsertedException e) {\n            return null;\n        }\n    }\n\n    @QueryMapping\n    public Article getById(@Argument String id) {\n        try {\n            Optional&lt;Article&gt; article = articleService.getById(UUID.fromString(id));\n            if(article.isPresent()){\n                return article.get();\n            } else{\n                return null;\n            }\n        } catch (RuntimeException e) {\n            return null;\n        }\n    }\n\n    @MutationMapping\n    public Article update(@Argument String title, @Argument String category, @Argument String content, @Argument String planningTime) {\n        try {\n            return articleService.updateArticle(articleMapper.toDomain(title, content, category, planningTime));\n        } catch (RuntimeException | ArticleNotUpdatedException e) {\n            return null;\n        }\n    }\n\n    @QueryMapping\n    public Iterable&lt;Article&gt; getAll() {\n        try {\n            return articleService.articles();\n        } catch (RuntimeException e) {\n            return null;\n        }\n    }\n\n    @MutationMapping\n    public Boolean publish(@Argument String id) throws ArticleNotFoundException, ArticleNotUpdatedException {\n        try {\n            articleService.publish(UUID.fromString(id));\n            return true;\n        } catch (RuntimeException e) {\n            return false;\n        }\n    }\n\n    @QueryMapping\n    public Iterable&lt;Article&gt; getAllByClient(@Argument String id) {\n        try {\n           return articleService.findByClient(UUID.fromString(id));\n        } catch (RuntimeException e) {\n            return null;\n        }\n    }\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;title&quot;)\n    public String getTitle(Article article){\n        return article.getTitle().getValue();\n    }\n\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;id&quot;)\n    public String getId(Article article){ return article.getId().toString();}\n\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;category&quot;)\n    public String getCategory(Article article){ return article.getCategory().getValue().getValue();}\n\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;planningTime&quot;)\n    public String getPlanningTime(Article article){\n        return article.getPlanningTime().getValue().toString();\n    }\n\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;idClient&quot;)\n    public String getIdClient(Article article){\n        return article.getIdClient().toString();\n    }\n\n    @SchemaMapping(typeName=&quot;Article&quot;, field=&quot;status&quot;)\n    public String getStatus(Article article){\n        return article.getStatus().getValue();\n    }\n}\n\n</code></pre>\n<p>I added this dependecies in my pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n            &lt;version&gt;3.0.6&lt;/version&gt;\n    &lt;/parent&gt;\n...\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-graphql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","android","character-encoding","android-4.2-jelly-bean"],"comments":[{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":2,"creation_date":1467629982,"post_id":38183027,"comment_id":63792008,"body_markdown":"https://developer.android.com/reference/java/nio/charset/StandardCharsets.html It was added in API Level 19 ( Android 4.4 )","body":"<a href=\"https://developer.android.com/reference/java/nio/charset/StandardCharsets.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/java/nio/charset/&hellip;</a> It was added in API Level 19 ( Android 4.4 )"},{"owner":{"account_id":85903,"reputation":33427,"user_id":239219,"accept_rate":69,"display_name":"J&#225;nos"},"score":0,"creation_date":1467630057,"post_id":38183027,"comment_id":63792057,"body_markdown":"What can I use insead of `StandardCharsets`?","body":"What can I use insead of <code>StandardCharsets</code>?"},{"owner":{"account_id":3046198,"reputation":2660,"user_id":2581783,"display_name":"Rene M."},"score":0,"creation_date":1467630066,"post_id":38183027,"comment_id":63792062,"body_markdown":"Fidor ist right! StandardCharset doesn&#39;t exist in Jelly Bean.","body":"Fidor ist right! StandardCharset doesn&#39;t exist in Jelly Bean."},{"owner":{"account_id":3046198,"reputation":2660,"user_id":2581783,"display_name":"Rene M."},"score":0,"creation_date":1467630092,"post_id":38183027,"comment_id":63792078,"body_markdown":"I would always use UTF-8","body":"I would always use UTF-8"}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1467630064,"creation_date":1467630064,"answer_id":38183103,"question_id":38183027,"body_markdown":"`StandardCharsets` [was added in API Level 19][1]. It is not available for any of the Jelly Bean versions of Android.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/java/nio/charset/StandardCharsets.html","title":"java.lang.NoClassDefFoundError: java.nio.charset.StandardCharsets","body":"<p><code>StandardCharsets</code> <a href=\"https://developer.android.com/reference/java/nio/charset/StandardCharsets.html\" rel=\"noreferrer\">was added in API Level 19</a>. It is not available for any of the Jelly Bean versions of Android.</p>\n"},{"tags":[],"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467630771,"creation_date":1467630771,"answer_id":38183323,"question_id":38183027,"body_markdown":"The question is: Do you want to support Jelly Bean?\r\n\r\nIf yes: You can instead use the String-Parameterized version of the `getBytes` Method. You could even split codelines to use one version over the other depended on API Version running. (I do **not** recommend this!)\r\n\r\nIf no: Just restrict your app to a minimum API-Version equal to or higher than 19.","title":"java.lang.NoClassDefFoundError: java.nio.charset.StandardCharsets","body":"<p>The question is: Do you want to support Jelly Bean?</p>\n\n<p>If yes: You can instead use the String-Parameterized version of the <code>getBytes</code> Method. You could even split codelines to use one version over the other depended on API Version running. (I do <strong>not</strong> recommend this!)</p>\n\n<p>If no: Just restrict your app to a minimum API-Version equal to or higher than 19.</p>\n"},{"tags":[],"owner":{"account_id":5694623,"reputation":6528,"user_id":4501480,"accept_rate":55,"display_name":"Vikrant Kashyap"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1467630890,"creation_date":1467630890,"answer_id":38183361,"question_id":38183027,"body_markdown":"There are various overloaded `.getBytes()` method is declared in `String` Class.\r\n\r\n \r\n\r\n      public void getBytes(int, int, byte[], int);\r\n      public byte[] getBytes(java.lang.String) throws java.io.UnsupportedEncodingException;\r\n      public byte[] getBytes(java.nio.charset.Charset);\r\n      public byte[] getBytes();\r\n\r\nYou can use any of it. but you should try this..\r\n\r\n     byte[] out = str.getBytes(&quot;UTF-8&quot;);\r\n\r\ninstead of\r\n\r\n    byte[] out = str.getBytes(StandardCharsets.UTF_8);","title":"java.lang.NoClassDefFoundError: java.nio.charset.StandardCharsets","body":"<p>There are various overloaded <code>.getBytes()</code> method is declared in <code>String</code> Class.</p>\n\n<pre><code>  public void getBytes(int, int, byte[], int);\n  public byte[] getBytes(java.lang.String) throws java.io.UnsupportedEncodingException;\n  public byte[] getBytes(java.nio.charset.Charset);\n  public byte[] getBytes();\n</code></pre>\n\n<p>You can use any of it. but you should try this..</p>\n\n<pre><code> byte[] out = str.getBytes(\"UTF-8\");\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>byte[] out = str.getBytes(StandardCharsets.UTF_8);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5530214,"reputation":2694,"user_id":4722577,"accept_rate":0,"display_name":"CAMD_3441"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683208099,"creation_date":1683208099,"answer_id":76173937,"question_id":38183027,"body_markdown":"As many mentioned, you can just use `&quot;UTF-8&quot;` in place of `StandardCharsets.UTF_8`\r\n\r\nIf you right click and &#39;go to source&#39; on that variable you&#39;ll see this, where you see that the variable UTF_8 is tied to the string value &quot;UTF_8&quot;\r\n\r\nYou can see the other charsets string variables as well.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/avRLW.png","title":"java.lang.NoClassDefFoundError: java.nio.charset.StandardCharsets","body":"<p>As many mentioned, you can just use <code>&quot;UTF-8&quot;</code> in place of <code>StandardCharsets.UTF_8</code></p>\n<p>If you right click and 'go to source' on that variable you'll see this, where you see that the variable UTF_8 is tied to the string value &quot;UTF_8&quot;</p>\n<p>You can see the other charsets string variables as well.</p>\n<p><a href=\"https://i.stack.imgur.com/avRLW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/avRLW.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":85903,"reputation":33427,"user_id":239219,"accept_rate":69,"display_name":"J&#225;nos"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8599,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":38183103,"answer_count":4,"score":12,"last_activity_date":1683208099,"creation_date":1467629842,"question_id":38183027,"body_markdown":"In simulator I can run my app, but on device with Jelly Bean OS I get a crash. Any idea why?\r\n\r\n    07-04 12:51:57.576 18243-18279/com.j4nos.moviebuffs6 E/AndroidRuntime: FATAL EXCEPTION: Thread-7940\r\n              java.lang.NoClassDefFoundError: java.nio.charset.StandardCharsets\r\n              at com.j4nos.moviebuffs6.Utility$1.run(Utility.java:52)\r\n              at java.lang.Thread.run(Thread.java:838)\r\n\r\nThis is the line I need character encoding:\r\n\r\n`byte[] out = str.getBytes(StandardCharsets.UTF_8);`","title":"java.lang.NoClassDefFoundError: java.nio.charset.StandardCharsets","body":"<p>In simulator I can run my app, but on device with Jelly Bean OS I get a crash. Any idea why?</p>\n\n<pre><code>07-04 12:51:57.576 18243-18279/com.j4nos.moviebuffs6 E/AndroidRuntime: FATAL EXCEPTION: Thread-7940\n          java.lang.NoClassDefFoundError: java.nio.charset.StandardCharsets\n          at com.j4nos.moviebuffs6.Utility$1.run(Utility.java:52)\n          at java.lang.Thread.run(Thread.java:838)\n</code></pre>\n\n<p>This is the line I need character encoding:</p>\n\n<p><code>byte[] out = str.getBytes(StandardCharsets.UTF_8);</code></p>\n"},{"tags":["java","ssl","okhttp"],"comments":[{"owner":{"account_id":7767429,"reputation":674,"user_id":5878215,"display_name":"Zorglube"},"score":0,"creation_date":1683042966,"post_id":76156346,"comment_id":134304509,"body_markdown":"For the runtime, or test-runtime, your `Path` can&#39;t be `src/test/resources/...`, if you sun some Maven app, your path should be something like `Path.of(&quot;./resources/...&quot;)`. Have look on how maven package runnable code.","body":"For the runtime, or test-runtime, your <code>Path</code> can&#39;t be <code>src&#47;test&#47;resources&#47;...</code>, if you sun some Maven app, your path should be something like <code>Path.of(&quot;.&#47;resources&#47;...&quot;)</code>. Have look on how maven package runnable code."},{"owner":{"account_id":3765931,"reputation":247,"user_id":3129480,"display_name":"Nik"},"score":0,"creation_date":1683043138,"post_id":76156346,"comment_id":134304548,"body_markdown":"Thanks a lot but the problem is not the way the keystore files are read.  \nThis is just a proof of concept, not definitive code in any sense. My concern is to establish the connection with this service in java .... Once I get this I will refactor the code","body":"Thanks a lot but the problem is not the way the keystore files are read.   This is just a proof of concept, not definitive code in any sense. My concern is to establish the connection with this service in java .... Once I get this I will refactor the code"},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":0,"creation_date":1683050424,"post_id":76156346,"comment_id":134306188,"body_markdown":"Have you tried the pemutils of the same library? Then you can use the same files as which you have used for curl","body":"Have you tried the pemutils of the same library? Then you can use the same files as which you have used for curl"},{"owner":{"account_id":3765931,"reputation":247,"user_id":3129480,"display_name":"Nik"},"score":0,"creation_date":1683097433,"post_id":76156346,"comment_id":134312368,"body_markdown":"Thanks for the suggestion, going to try","body":"Thanks for the suggestion, going to try"},{"owner":{"account_id":3765931,"reputation":247,"user_id":3129480,"display_name":"Nik"},"score":0,"creation_date":1683100695,"post_id":76156346,"comment_id":134313058,"body_markdown":"No luck .. I&#39;ve tried building key and trust manager from pem but with no success...","body":"No luck .. I&#39;ve tried building key and trust manager from pem but with no success..."},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":0,"creation_date":1683139686,"post_id":76156346,"comment_id":134322265,"body_markdown":"Can you try to add `.withUnsafeTrustMaterial()` to the sslfactory to see what your error will be if we disable the validation. Can you retry and share your result and if there is an error can you paste the stacktrace?","body":"Can you try to add <code>.withUnsafeTrustMaterial()</code> to the sslfactory to see what your error will be if we disable the validation. Can you retry and share your result and if there is an error can you paste the stacktrace?"},{"owner":{"account_id":3765931,"reputation":247,"user_id":3129480,"display_name":"Nik"},"score":0,"creation_date":1683143202,"post_id":76156346,"comment_id":134322862,"body_markdown":"I have tried already that option but result is the same. \nI don&#39;t get any exception, the authentication simply fails.","body":"I have tried already that option but result is the same.  I don&#39;t get any exception, the authentication simply fails."},{"owner":{"account_id":3765931,"reputation":247,"user_id":3129480,"display_name":"Nik"},"score":0,"creation_date":1683143994,"post_id":76156346,"comment_id":134323011,"body_markdown":"could be the same problem as in https://stackoverflow.com/questions/9299133/why-doesnt-java-send-the-client-certificate-during-ssl-handshake ?","body":"could be the same problem as in <a href=\"https://stackoverflow.com/questions/9299133/why-doesnt-java-send-the-client-certificate-during-ssl-handshake\" title=\"why doesnt java send the client certificate during ssl handshake\">stackoverflow.com/questions/9299133/&hellip;</a> ?"},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":1,"creation_date":1683151689,"post_id":76156346,"comment_id":134324395,"body_markdown":"Well in java there is a key manager and that one is picking up the first key matching based on keytype and some other properties. What you can do is to add a breakpoint on the method chooseClientAlias within your actual keymanager implementation and discover why it is returning empty instead of a value","body":"Well in java there is a key manager and that one is picking up the first key matching based on keytype and some other properties. What you can do is to add a breakpoint on the method chooseClientAlias within your actual keymanager implementation and discover why it is returning empty instead of a value"}],"answers":[{"tags":[],"owner":{"account_id":3765931,"reputation":247,"user_id":3129480,"display_name":"Nik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683207995,"creation_date":1683207995,"answer_id":76173920,"question_id":76156346,"body_markdown":"I eventually succeed in making this call.\r\nFollowing the advice by @Hakan54 to debug KeyManager I found that, in my IntelliJ ide, there was a mismatch of JDK versions.\r\nMy project was targeted to JDK11 (pom.xml and in SDK target in project settings) BUT, in project modules there was a JDK17 which apparently caused this error.\r\nI noticed it because, during debugging, I got the IntelliJ warning that &quot;source code does not match compiled code&quot;.\r\nSo I started investigating and, once I changed JDK17 to JDK11 in the modules section, the connection starts working.\r\n","title":"Java OkHttpClient mutual authentication","body":"<p>I eventually succeed in making this call.\nFollowing the advice by @Hakan54 to debug KeyManager I found that, in my IntelliJ ide, there was a mismatch of JDK versions.\nMy project was targeted to JDK11 (pom.xml and in SDK target in project settings) BUT, in project modules there was a JDK17 which apparently caused this error.\nI noticed it because, during debugging, I got the IntelliJ warning that &quot;source code does not match compiled code&quot;.\nSo I started investigating and, once I changed JDK17 to JDK11 in the modules section, the connection starts working.</p>\n"}],"owner":{"account_id":3765931,"reputation":247,"user_id":3129480,"display_name":"Nik"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683207995,"creation_date":1683040496,"question_id":76156346,"body_markdown":"I am trying to port to java some php code that connects to a remote web service which uses SSL mutual authentication.\r\nThe service owner has given to me \r\n- the server certificate\r\n- the client certificate and private key I have to use in the calls\r\n\r\nThis is what I did:\r\n- I created a truststore with the given server certificate in this way:\r\n```\r\nkeytool -import -alias WS_SERVER -file WS_SERVER_CERT.pem -keystore truststore.jks -deststorepass somepassword\r\n```\r\n- then I created a keystore with the client certificate. Before doing it I converted the certificate into pkcs12 format\r\n```\r\nopenssl pkcs12 -export -in CLIENT_CERT.pem -inkey CLIENT_PK.pem -out certificate.p12 -name client_certificate\r\n```\r\nthen I created a keystore:\r\n```\r\nkeytool -importkeystore -srckeystore certificate.p12 -srcstoretype pkcs12 -destkeystore cert.jks\r\n```\r\n\r\nFinally I tried this code snippet to try connect to the web service:\r\n\r\n```\r\n        SSLFactory sslFactory = SSLFactory.builder()\r\n                .withIdentityMaterial(Path.of(&quot;src/main/resources/cert/cert.jks&quot;), &quot;somepassword&quot;.toCharArray())\r\n                .withTrustMaterial(Path.of(&quot;src/main/resources/cert/truststore.jks&quot;), &quot;somepassword&quot;.toCharArray())\r\n                .build();\r\n\r\n        OkHttpClient httpClient = new OkHttpClient.Builder()\r\n                .sslSocketFactory(sslFactory.getSslSocketFactory(), sslFactory.getTrustManager().orElseThrow())\r\n                .hostnameVerifier(sslFactory.getHostnameVerifier())\r\n                .build();\r\n\r\n        final String payload = Files.readString(Path.of(&quot;src/test/resources/payload.xml&quot;));\r\n\r\n        String wsUrl = &quot;https://server.ws&quot;;\r\n\r\n        final Request request = new Request.Builder()\r\n                .url(wsUrl)\r\n                .post(RequestBody.create(payload, MediaType.parse(&quot;text/xml&quot;)))\r\n                .build();\r\n\r\n        final Call call = httpClient.newCall(request);\r\n\r\n        final Response response = call.execute();\r\n\r\n        System.out.println(&quot;Response: &quot; + response.body().string());\r\n```\r\n\r\nbut I get an authentication error.\r\nWhat could be wrong in this procedure?\r\nPlease note that this curl command works:\r\n```\r\ncurl --cert CLIENT_CERT.pem --key CLIENT_CERT_PK.pem --cacert WS_SERVER_CERT.pem -H &quot;Content-type: text/xml&quot; https://server.ws -d &#39;some payload&#39;\r\n```\r\n\r\nUPDATE\r\n\r\nI&#39;ve tried to load directly the PEM files (as allowed by the library https://github.com/Hakky54/sslcontext-kickstart) but with no success.\r\nThe code I used is this:\r\n\r\n```\r\n        X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;src/main/resources/cert/CLIENT_CERT.pem&quot;), Paths.get(&quot;src/main/resources/cert/CLIENT_PK.pem&quot;));\r\n        X509ExtendedTrustManager trustManager = PemUtils.loadTrustMaterial(Paths.get(&quot;src/main/resources/cert/SERVER_CERT.pem&quot;));\r\n        SSLFactory sslFactory = SSLFactory.builder()\r\n                .withIdentityMaterial(keyManager)\r\n                .withTrustMaterial(trustManager)\r\n                .build();\r\n\r\n        ConnectionSpec requireTls12 = new ConnectionSpec.Builder(ConnectionSpec.MODERN_TLS)\r\n                .tlsVersions(TlsVersion.TLS_1_2)\r\n                .build();\r\n\r\n        OkHttpClient httpClient = new OkHttpClient.Builder()\r\n                .sslSocketFactory(sslFactory.getSslSocketFactory(), sslFactory.getTrustManager().orElseThrow())\r\n                .connectionSpecs(Arrays.asList(requireTls12))\r\n                .hostnameVerifier(sslFactory.getHostnameVerifier())\r\n                .build();\r\n\r\n```\r\nUPDATE2\r\n\r\nI have issued the curl command with -v option to see a trace of the handshake.\r\nI see this:\r\n\r\n```\r\n TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (IN), TLS handshake, Unknown (8):\r\n* TLSv1.3 (IN), TLS handshake, Request CERT (13):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Client hello (1):\r\n* TLSv1.3 (OUT), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (OUT), TLS handshake, Certificate (11):\r\n* TLSv1.3 (OUT), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (OUT), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (OUT), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384\r\n```\r\n\r\nSo I&#39;ve tried to force the same TLS and cipher versions in java code, but I still get the error \r\n\r\nUPDATE 3\r\n\r\nI&#39;ve tried to debug the TLS handshake adding the flag\r\n-Djavax.net.debug=all \r\nto the command line\r\n\r\nBut the output I get is not so clear to understand..\r\nI don&#39;t post it here since I don&#39;t know if it can contain sensitive information...\r\n\r\nperhaps this part could be safe:\r\n\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.814 CEST|ServerHelloDone.java:151|Consuming ServerHelloDone handshake message (\r\n&lt;empty&gt;\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.815 CEST|CertificateMessage.java:299|No X.509 certificate for client authentication, use empty Certificate message instead\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.815 CEST|CertificateMessage.java:330|Produced client Certificate handshake message (\r\n&quot;Certificates&quot;: &lt;empty list&gt;\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.815 CEST|SSLSocketOutputRecord.java:261|WRITE: TLSv1.2 handshake, length = 7\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.816 CEST|SSLSocketOutputRecord.java:275|Raw write (\r\n  0000: 16 03 03 00 07 0B 00 00   03 00 00 00              ............\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.832 CEST|ECDHClientKeyExchange.java:410|Produced ECDHE ClientKeyExchange handshake message (\r\n&quot;ECDH ClientKeyExchange&quot;: {\r\n  &quot;ecdh public&quot;: {\r\n    0000: 21 64 95 80 D9 B2 AC 8D   A3 50 37 03 85 09 97 8C  !d.......P7.....\r\n    0010: 93 8F F9 27 D8 93 C4 68   84 8C C7 C7 59 4F 33 36  ...&#39;...h....YO36\r\n  },\r\n}\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.833 CEST|SSLSocketOutputRecord.java:261|WRITE: TLSv1.2 handshake, length = 37\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.833 CEST|SSLSocketOutputRecord.java:275|Raw write (\r\n  0000: 16 03 03 00 25 10 00 00   21 20 21 64 95 80 D9 B2  ....%...! !d....\r\n  0010: AC 8D A3 50 37 03 85 09   97 8C 93 8F F9 27 D8 93  ...P7........&#39;..\r\n  0020: C4 68 84 8C C7 C7 59 4F   33 36                    .h....YO36\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.849 CEST|ChangeCipherSpec.java:115|Produced ChangeCipherSpec message\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.850 CEST|SSLSocketOutputRecord.java:235|Raw write (\r\n  0000: 14 03 03 00 01 01                                  ......\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.850 CEST|Finished.java:398|Produced client Finished handshake message (\r\n&quot;Finished&quot;: {\r\n  &quot;verify data&quot;: {\r\n    0000: 56 33 5E 9F 3B 1B 8B 35   D7 56 61 82 \r\n  }&#39;}\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.850 CEST|SSLSocketOutputRecord.java:261|WRITE: TLSv1.2 handshake, length = 24\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.852 CEST|SSLCipher.java:1769|Plaintext before ENCRYPTION (\r\n  0000: 14 00 00 0C 56 33 5E 9F   3B 1B 8B 35 D7 56 61 82  ....V3^.;..5.Va.\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.853 CEST|SSLSocketOutputRecord.java:275|Raw write (\r\n  0000: 16 03 03 00 28 00 00 00   00 00 00 00 00 9C B0 33  ....(..........3\r\n  0010: FB 03 04 56 6C 98 72 AF   86 CF A2 55 47 D9 1B B6  ...Vl.r....UG...\r\n  0020: A3 0E 60 FA 15 2E 60 A2   AD 5B 8E 0B 24           ..`...`..[..$\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.899 CEST|SSLSocketInputRecord.java:494|Raw read (\r\n  0000: 14 03 03 00 01                                     .....\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.900 CEST|SSLSocketInputRecord.java:214|READ: TLSv1.2 change_cipher_spec, length = 1\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.900 CEST|SSLSocketInputRecord.java:494|Raw read (\r\n  0000: 01                                                 .\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.900 CEST|SSLSocketInputRecord.java:247|READ: TLSv1.2 change_cipher_spec, length = 1\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.900 CEST|ChangeCipherSpec.java:149|Consuming ChangeCipherSpec message\r\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.901 CEST|SSLSocketInputRecord.java:494|Raw read (\r\n  0000: 16 03 03 00 28                                     ....(\r\n)\r\n\r\nafter ServerHelloDone there is a message &lt;empty&gt; could be it the problem?\r\n\r\nwhy it tells &quot;No X.509 certificate for client authentication, use empty Certificate message instead&quot; ??","title":"Java OkHttpClient mutual authentication","body":"<p>I am trying to port to java some php code that connects to a remote web service which uses SSL mutual authentication.\nThe service owner has given to me</p>\n<ul>\n<li>the server certificate</li>\n<li>the client certificate and private key I have to use in the calls</li>\n</ul>\n<p>This is what I did:</p>\n<ul>\n<li>I created a truststore with the given server certificate in this way:</li>\n</ul>\n<pre><code>keytool -import -alias WS_SERVER -file WS_SERVER_CERT.pem -keystore truststore.jks -deststorepass somepassword\n</code></pre>\n<ul>\n<li>then I created a keystore with the client certificate. Before doing it I converted the certificate into pkcs12 format</li>\n</ul>\n<pre><code>openssl pkcs12 -export -in CLIENT_CERT.pem -inkey CLIENT_PK.pem -out certificate.p12 -name client_certificate\n</code></pre>\n<p>then I created a keystore:</p>\n<pre><code>keytool -importkeystore -srckeystore certificate.p12 -srcstoretype pkcs12 -destkeystore cert.jks\n</code></pre>\n<p>Finally I tried this code snippet to try connect to the web service:</p>\n<pre><code>        SSLFactory sslFactory = SSLFactory.builder()\n                .withIdentityMaterial(Path.of(&quot;src/main/resources/cert/cert.jks&quot;), &quot;somepassword&quot;.toCharArray())\n                .withTrustMaterial(Path.of(&quot;src/main/resources/cert/truststore.jks&quot;), &quot;somepassword&quot;.toCharArray())\n                .build();\n\n        OkHttpClient httpClient = new OkHttpClient.Builder()\n                .sslSocketFactory(sslFactory.getSslSocketFactory(), sslFactory.getTrustManager().orElseThrow())\n                .hostnameVerifier(sslFactory.getHostnameVerifier())\n                .build();\n\n        final String payload = Files.readString(Path.of(&quot;src/test/resources/payload.xml&quot;));\n\n        String wsUrl = &quot;https://server.ws&quot;;\n\n        final Request request = new Request.Builder()\n                .url(wsUrl)\n                .post(RequestBody.create(payload, MediaType.parse(&quot;text/xml&quot;)))\n                .build();\n\n        final Call call = httpClient.newCall(request);\n\n        final Response response = call.execute();\n\n        System.out.println(&quot;Response: &quot; + response.body().string());\n</code></pre>\n<p>but I get an authentication error.\nWhat could be wrong in this procedure?\nPlease note that this curl command works:</p>\n<pre><code>curl --cert CLIENT_CERT.pem --key CLIENT_CERT_PK.pem --cacert WS_SERVER_CERT.pem -H &quot;Content-type: text/xml&quot; https://server.ws -d 'some payload'\n</code></pre>\n<p>UPDATE</p>\n<p>I've tried to load directly the PEM files (as allowed by the library <a href=\"https://github.com/Hakky54/sslcontext-kickstart\" rel=\"nofollow noreferrer\">https://github.com/Hakky54/sslcontext-kickstart</a>) but with no success.\nThe code I used is this:</p>\n<pre><code>        X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;src/main/resources/cert/CLIENT_CERT.pem&quot;), Paths.get(&quot;src/main/resources/cert/CLIENT_PK.pem&quot;));\n        X509ExtendedTrustManager trustManager = PemUtils.loadTrustMaterial(Paths.get(&quot;src/main/resources/cert/SERVER_CERT.pem&quot;));\n        SSLFactory sslFactory = SSLFactory.builder()\n                .withIdentityMaterial(keyManager)\n                .withTrustMaterial(trustManager)\n                .build();\n\n        ConnectionSpec requireTls12 = new ConnectionSpec.Builder(ConnectionSpec.MODERN_TLS)\n                .tlsVersions(TlsVersion.TLS_1_2)\n                .build();\n\n        OkHttpClient httpClient = new OkHttpClient.Builder()\n                .sslSocketFactory(sslFactory.getSslSocketFactory(), sslFactory.getTrustManager().orElseThrow())\n                .connectionSpecs(Arrays.asList(requireTls12))\n                .hostnameVerifier(sslFactory.getHostnameVerifier())\n                .build();\n\n</code></pre>\n<p>UPDATE2</p>\n<p>I have issued the curl command with -v option to see a trace of the handshake.\nI see this:</p>\n<pre><code> TLSv1.3 (OUT), TLS handshake, Client hello (1):\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (IN), TLS handshake, Unknown (8):\n* TLSv1.3 (IN), TLS handshake, Request CERT (13):\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\n* TLSv1.3 (IN), TLS handshake, Finished (20):\n* TLSv1.3 (OUT), TLS change cipher, Client hello (1):\n* TLSv1.3 (OUT), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (OUT), TLS handshake, Certificate (11):\n* TLSv1.3 (OUT), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (OUT), TLS handshake, CERT verify (15):\n* TLSv1.3 (OUT), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384\n</code></pre>\n<p>So I've tried to force the same TLS and cipher versions in java code, but I still get the error</p>\n<p>UPDATE 3</p>\n<p>I've tried to debug the TLS handshake adding the flag\n-Djavax.net.debug=all\nto the command line</p>\n<p>But the output I get is not so clear to understand..\nI don't post it here since I don't know if it can contain sensitive information...</p>\n<p>perhaps this part could be safe:</p>\n<p>javax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.814 CEST|ServerHelloDone.java:151|Consuming ServerHelloDone handshake message (\n\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.815 CEST|CertificateMessage.java:299|No X.509 certificate for client authentication, use empty Certificate message instead\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.815 CEST|CertificateMessage.java:330|Produced client Certificate handshake message (\n&quot;Certificates&quot;: \n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.815 CEST|SSLSocketOutputRecord.java:261|WRITE: TLSv1.2 handshake, length = 7\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.816 CEST|SSLSocketOutputRecord.java:275|Raw write (\n0000: 16 03 03 00 07 0B 00 00   03 00 00 00              ............\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.832 CEST|ECDHClientKeyExchange.java:410|Produced ECDHE ClientKeyExchange handshake message (\n&quot;ECDH ClientKeyExchange&quot;: {\n&quot;ecdh public&quot;: {\n0000: 21 64 95 80 D9 B2 AC 8D   A3 50 37 03 85 09 97 8C  !d.......P7.....\n0010: 93 8F F9 27 D8 93 C4 68   84 8C C7 C7 59 4F 33 36  ...'...h....YO36\n},\n}\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.833 CEST|SSLSocketOutputRecord.java:261|WRITE: TLSv1.2 handshake, length = 37\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.833 CEST|SSLSocketOutputRecord.java:275|Raw write (\n0000: 16 03 03 00 25 10 00 00   21 20 21 64 95 80 D9 B2  ....%...! !d....\n0010: AC 8D A3 50 37 03 85 09   97 8C 93 8F F9 27 D8 93  ...P7........'..\n0020: C4 68 84 8C C7 C7 59 4F   33 36                    .h....YO36\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.849 CEST|ChangeCipherSpec.java:115|Produced ChangeCipherSpec message\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.850 CEST|SSLSocketOutputRecord.java:235|Raw write (\n0000: 14 03 03 00 01 01                                  ......\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.850 CEST|Finished.java:398|Produced client Finished handshake message (\n&quot;Finished&quot;: {\n&quot;verify data&quot;: {\n0000: 56 33 5E 9F 3B 1B 8B 35   D7 56 61 82\n}'}\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.850 CEST|SSLSocketOutputRecord.java:261|WRITE: TLSv1.2 handshake, length = 24\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.852 CEST|SSLCipher.java:1769|Plaintext before ENCRYPTION (\n0000: 14 00 00 0C 56 33 5E 9F   3B 1B 8B 35 D7 56 61 82  ....V3^.;..5.Va.\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.853 CEST|SSLSocketOutputRecord.java:275|Raw write (\n0000: 16 03 03 00 28 00 00 00   00 00 00 00 00 9C B0 33  ....(..........3\n0010: FB 03 04 56 6C 98 72 AF   86 CF A2 55 47 D9 1B B6  ...Vl.r....UG...\n0020: A3 0E 60 FA 15 2E 60 A2   AD 5B 8E 0B 24           ..<code>...</code>..[..$\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.899 CEST|SSLSocketInputRecord.java:494|Raw read (\n0000: 14 03 03 00 01                                     .....\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.900 CEST|SSLSocketInputRecord.java:214|READ: TLSv1.2 change_cipher_spec, length = 1\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.900 CEST|SSLSocketInputRecord.java:494|Raw read (\n0000: 01                                                 .\n)\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.900 CEST|SSLSocketInputRecord.java:247|READ: TLSv1.2 change_cipher_spec, length = 1\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.900 CEST|ChangeCipherSpec.java:149|Consuming ChangeCipherSpec message\njavax.net.ssl|DEBUG|01|main|2023-05-03 21:45:56.901 CEST|SSLSocketInputRecord.java:494|Raw read (\n0000: 16 03 03 00 28                                     ....(\n)</p>\n<p>after ServerHelloDone there is a message  could be it the problem?</p>\n<p>why it tells &quot;No X.509 certificate for client authentication, use empty Certificate message instead&quot; ??</p>\n"},{"tags":["java","android","kotlin","kiosk-mode"],"answers":[{"tags":[],"owner":{"account_id":18383054,"reputation":142,"user_id":13390747,"display_name":"Larvouu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683207416,"creation_date":1683207416,"answer_id":76173827,"question_id":76170115,"body_markdown":"In Android kiosk mode, it is possible to control Wi-Fi settings with an admin app. However, you need to set the necessary permissions and use appropriate APIs to achieve this.\r\n\r\nTo enable Wi-Fi control in kiosk mode, you can use the DevicePolicyManager class, which provides APIs to manage device policies and settings, including Wi-Fi configuration. You can use the setWifiEnabled() method to enable or disable Wi-Fi, and the setWifiApEnabled() method to enable or disable Wi-Fi hotspot.\r\n\r\nHere&#39;s an example code snippet to enable/disable Wi-Fi in kiosk mode:\r\n\r\n```\r\nDevicePolicyManager devicePolicyManager = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);\r\n\r\n// Check if the admin app is active\r\nComponentName adminComponent = new ComponentName(this, MyAdminReceiver.class);\r\nif (devicePolicyManager.isAdminActive(adminComponent)) {\r\n    // Enable Wi-Fi\r\n    devicePolicyManager.setWifiEnabled(adminComponent, true);\r\n\r\n    // Disable Wi-Fi\r\n    devicePolicyManager.setWifiEnabled(adminComponent, false);\r\n}\r\n\r\n```\r\n\r\nNote that to use these APIs, your admin app needs to have the necessary permissions, such as android.permission.MANAGE_DEVICE_ADMINS and android.permission.WRITE_SETTINGS. Also, make sure that the app is registered as a device administrator and that the necessary policies are enabled for Wi-Fi control.","title":"How to enable Wi-Fi control in kiosk mode android","body":"<p>In Android kiosk mode, it is possible to control Wi-Fi settings with an admin app. However, you need to set the necessary permissions and use appropriate APIs to achieve this.</p>\n<p>To enable Wi-Fi control in kiosk mode, you can use the DevicePolicyManager class, which provides APIs to manage device policies and settings, including Wi-Fi configuration. You can use the setWifiEnabled() method to enable or disable Wi-Fi, and the setWifiApEnabled() method to enable or disable Wi-Fi hotspot.</p>\n<p>Here's an example code snippet to enable/disable Wi-Fi in kiosk mode:</p>\n<pre><code>DevicePolicyManager devicePolicyManager = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);\n\n// Check if the admin app is active\nComponentName adminComponent = new ComponentName(this, MyAdminReceiver.class);\nif (devicePolicyManager.isAdminActive(adminComponent)) {\n    // Enable Wi-Fi\n    devicePolicyManager.setWifiEnabled(adminComponent, true);\n\n    // Disable Wi-Fi\n    devicePolicyManager.setWifiEnabled(adminComponent, false);\n}\n\n</code></pre>\n<p>Note that to use these APIs, your admin app needs to have the necessary permissions, such as android.permission.MANAGE_DEVICE_ADMINS and android.permission.WRITE_SETTINGS. Also, make sure that the app is registered as a device administrator and that the necessary policies are enabled for Wi-Fi control.</p>\n"}],"owner":{"account_id":26607579,"reputation":11,"user_id":20228175,"display_name":"SGE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683207416,"creation_date":1683181293,"question_id":76170115,"body_markdown":"How to enable Wi-Fi control in kiosk mode for android. My application is registered as an admin app, If I want to switch the Wi-Fi settings, every time I&#39;m removing the admin mode.\r\n\r\nIs it possible to change the network settings in admin/kiosk mode?","title":"How to enable Wi-Fi control in kiosk mode android","body":"<p>How to enable Wi-Fi control in kiosk mode for android. My application is registered as an admin app, If I want to switch the Wi-Fi settings, every time I'm removing the admin mode.</p>\n<p>Is it possible to change the network settings in admin/kiosk mode?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683097558,"post_id":76160803,"comment_id":134312387,"body_markdown":"What is the error?","body":"What is the error?"}],"answers":[{"tags":[],"owner":{"account_id":28020964,"reputation":1205,"user_id":21401783,"display_name":"Dinux"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683207333,"creation_date":1683094937,"answer_id":76160954,"question_id":76160803,"body_markdown":"The language you have used for coding is Java and not Javascript(JS). The application is crashing, because if no text is entered, then, the `Double.parseDouble()` function is used on an empty string. To solve that, replace your `calculateButton.setOnClickListener()` with this:\r\n~~~\r\ncalculateButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n            //Check if text fields are empty\r\n            if (!velocityEditText.getText().toString().equals(&quot;&quot;) &amp;&amp; !angleEditText.getText().toString().equals(&quot;&quot;)){\r\n                    double velocity = Double.parseDouble(velocityEditText.getText().toString());\r\n                    double angle = Double.parseDouble(angleEditText.getText().toString());\r\n                    double radians = Math.toRadians(angle);\r\n                    double range = ((Math.pow(velocity, 2)) * (Math.pow(Math.sin(radians), 2))) / (2 * 9.81);\r\n                    resultTextView.setText(&quot;Altura M&#225;xima: &quot; + String.format(&quot;%.2f&quot;, range) + &quot; m&quot;);\r\n            }\r\n            else{\r\n             //Show message to user if no text is entered\r\n             Toast.makeText(getApplicationContext(), &quot;Please fill in the text fields&quot;, Toast.LENGTH_SHORT).show()\r\n            }\r\n        }\r\n    });\r\n~~~\r\nIn the above code, we first check if the strings are not empty and then we pass the strings to the `Double.parseDouble()` function. If the text fields are empty, then, we show a message to the user.","title":"I have to measure the maximum height but error in one button,","body":"<p>The language you have used for coding is Java and not Javascript(JS). The application is crashing, because if no text is entered, then, the <code>Double.parseDouble()</code> function is used on an empty string. To solve that, replace your <code>calculateButton.setOnClickListener()</code> with this:</p>\n<pre><code>calculateButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n            //Check if text fields are empty\n            if (!velocityEditText.getText().toString().equals(&quot;&quot;) &amp;&amp; !angleEditText.getText().toString().equals(&quot;&quot;)){\n                    double velocity = Double.parseDouble(velocityEditText.getText().toString());\n                    double angle = Double.parseDouble(angleEditText.getText().toString());\n                    double radians = Math.toRadians(angle);\n                    double range = ((Math.pow(velocity, 2)) * (Math.pow(Math.sin(radians), 2))) / (2 * 9.81);\n                    resultTextView.setText(&quot;Altura Máxima: &quot; + String.format(&quot;%.2f&quot;, range) + &quot; m&quot;);\n            }\n            else{\n             //Show message to user if no text is entered\n             Toast.makeText(getApplicationContext(), &quot;Please fill in the text fields&quot;, Toast.LENGTH_SHORT).show()\n            }\n        }\n    });\n</code></pre>\n<p>In the above code, we first check if the strings are not empty and then we pass the strings to the <code>Double.parseDouble()</code> function. If the text fields are empty, then, we show a message to the user.</p>\n"}],"owner":{"account_id":28490066,"reputation":11,"user_id":21802825,"display_name":"phoett"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1683190718,"accepted_answer_id":76160954,"answer_count":1,"score":-1,"last_activity_date":1683207333,"creation_date":1683093309,"question_id":76160803,"body_markdown":"I&#39;m in the last grade of high school and they let me as a project to measure the maximum height of a parabolic shot. I already have the program and it works fine but the error happens when I don&#39;t put information in the PlainText and the program closes (Android Studio). I saw that I could do something with the button &quot;FloatingActionButton&quot;, but I do not know how to place that in my java code.\r\n\r\nHere is my Java code:\r\n```java\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private EditText velocityEditText;\r\n    private EditText angleEditText;\r\n    private Button calculateButton;\r\n    private TextView resultTextView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        velocityEditText = findViewById(R.id.velocity_edit_text);\r\n        angleEditText = findViewById(R.id.angle_edit_text);\r\n       calculateButton=findViewById(R.id.calculateButton);\r\n        resultTextView = findViewById(R.id.result_text_view);\r\n\r\n        calculateButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                    double velocity = Double.parseDouble(velocityEditText.getText().toString());\r\n                    double angle = Double.parseDouble(angleEditText.getText().toString());\r\n                    double radians = Math.toRadians(angle);\r\n                    double range = ((Math.pow(velocity, 2)) * (Math.pow(Math.sin(radians), 2))) / (2 * 9.81);\r\n                    resultTextView.setText(&quot;Altura M&#225;xima: &quot; + String.format(&quot;%.2f&quot;, range) + &quot; m&quot;);\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\nMy XML file:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;#EFECAF&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:padding=&quot;16dp&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:fontFamily=&quot;sans-serif-black&quot;\r\n        android:text=&quot;Velocidad inicial (m/s):&quot;\r\n        android:textColor=&quot;#100F0F&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/velocity_edit_text&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:inputType=&quot;numberDecimal&quot;\r\n        android:textColor=&quot;#0E0E0E&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:fontFamily=&quot;sans-serif-black&quot;\r\n        android:text=&quot;&#193;ngulo de lanzamiento (grados):&quot;\r\n        android:textColor=&quot;#121111&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/angle_edit_text&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:inputType=&quot;numberDecimal&quot;\r\n        android:textColor=&quot;#0E0E0E&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/calculateButton&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:backgroundTint=&quot;#FF9800&quot;\r\n        android:text=&quot;Calcular altura m&#225;xima&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/result_text_view&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;16dp&quot;\r\n        android:textAlignment=&quot;center&quot;\r\n        android:textColor=&quot;#100F0F&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        android:textStyle=&quot;italic&quot; /&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/imageView2&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:srcCompat=&quot;@drawable/altura&quot; /&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\nI&#39;m sorry if I didn&#39;t put the code information correctly, but this is the first time I&#39;m asking a question here. \r\n\r\nIf I leave the text fields empty and click the button, then the app is crashing.","title":"I have to measure the maximum height but error in one button,","body":"<p>I'm in the last grade of high school and they let me as a project to measure the maximum height of a parabolic shot. I already have the program and it works fine but the error happens when I don't put information in the PlainText and the program closes (Android Studio). I saw that I could do something with the button &quot;FloatingActionButton&quot;, but I do not know how to place that in my java code.</p>\n<p>Here is my Java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainActivity extends AppCompatActivity {\n\n    private EditText velocityEditText;\n    private EditText angleEditText;\n    private Button calculateButton;\n    private TextView resultTextView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        velocityEditText = findViewById(R.id.velocity_edit_text);\n        angleEditText = findViewById(R.id.angle_edit_text);\n       calculateButton=findViewById(R.id.calculateButton);\n        resultTextView = findViewById(R.id.result_text_view);\n\n        calculateButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                    double velocity = Double.parseDouble(velocityEditText.getText().toString());\n                    double angle = Double.parseDouble(angleEditText.getText().toString());\n                    double radians = Math.toRadians(angle);\n                    double range = ((Math.pow(velocity, 2)) * (Math.pow(Math.sin(radians), 2))) / (2 * 9.81);\n                    resultTextView.setText(&quot;Altura Máxima: &quot; + String.format(&quot;%.2f&quot;, range) + &quot; m&quot;);\n\n            }\n        });\n    }\n}\n</code></pre>\n<p>My XML file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;#EFECAF&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;16dp&quot;&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:fontFamily=&quot;sans-serif-black&quot;\n        android:text=&quot;Velocidad inicial (m/s):&quot;\n        android:textColor=&quot;#100F0F&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/velocity_edit_text&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:inputType=&quot;numberDecimal&quot;\n        android:textColor=&quot;#0E0E0E&quot; /&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:fontFamily=&quot;sans-serif-black&quot;\n        android:text=&quot;Ángulo de lanzamiento (grados):&quot;\n        android:textColor=&quot;#121111&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/angle_edit_text&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:inputType=&quot;numberDecimal&quot;\n        android:textColor=&quot;#0E0E0E&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/calculateButton&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:backgroundTint=&quot;#FF9800&quot;\n        android:text=&quot;Calcular altura máxima&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/result_text_view&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;16dp&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textColor=&quot;#100F0F&quot;\n        android:textSize=&quot;20sp&quot;\n        android:textStyle=&quot;italic&quot; /&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/imageView2&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:srcCompat=&quot;@drawable/altura&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>I'm sorry if I didn't put the code information correctly, but this is the first time I'm asking a question here.</p>\n<p>If I leave the text fields empty and click the button, then the app is crashing.</p>\n"},{"tags":["java","amazon-ecs"],"owner":{"account_id":2086125,"reputation":2413,"user_id":1857083,"accept_rate":60,"display_name":"steamrolla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683207319,"creation_date":1683206687,"question_id":76173721,"body_markdown":"I have an ECS task definition with a task execution role declared that has read/write access to an S3 bucket. This seems to happen irregularly, and, I am not sure what is triggering it, but I have seen errors come out of the container in regards to the token being expired:\r\n\r\n```\r\ncom.amazonaws.services.s3.model.AmazonS3Exception: The provided token has expired.\r\n```\r\n\r\nIs something defined incorrectly in the building of the S3 client? From the Spring configuration:\r\n\r\n```\r\n@Bean\r\npublic AmazonS3 amazonS3Client() {\r\n  return AmazonS3ClientBuilder.standard().withRegion(Regions.US_EAST_1).build();\r\n}\r\n```\r\n\r\nFrom [AWS][1]:\r\n\r\n&gt; Newer versions of the AWS SDKs automatically fetch these credentials from the AWS_CONTAINER_CREDENTIALS_RELATIVE_URI environment variable when making AWS API calls. \r\n\r\n&gt; The output includes an access key-pair consisting of a secret access key ID and a secret key which your application uses to access AWS resources. It also includes a token that AWS uses to verify that the credentials are valid. By default, credentials assigned to tasks using task roles are valid for six hours. After that, they are automatically rotated by the Amazon ECS container agent.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/security-iam-roles.html","title":"ECS task with execution role - token expired","body":"<p>I have an ECS task definition with a task execution role declared that has read/write access to an S3 bucket. This seems to happen irregularly, and, I am not sure what is triggering it, but I have seen errors come out of the container in regards to the token being expired:</p>\n<pre><code>com.amazonaws.services.s3.model.AmazonS3Exception: The provided token has expired.\n</code></pre>\n<p>Is something defined incorrectly in the building of the S3 client? From the Spring configuration:</p>\n<pre><code>@Bean\npublic AmazonS3 amazonS3Client() {\n  return AmazonS3ClientBuilder.standard().withRegion(Regions.US_EAST_1).build();\n}\n</code></pre>\n<p>From <a href=\"https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/security-iam-roles.html\" rel=\"nofollow noreferrer\">AWS</a>:</p>\n<blockquote>\n<p>Newer versions of the AWS SDKs automatically fetch these credentials from the AWS_CONTAINER_CREDENTIALS_RELATIVE_URI environment variable when making AWS API calls.</p>\n</blockquote>\n<blockquote>\n<p>The output includes an access key-pair consisting of a secret access key ID and a secret key which your application uses to access AWS resources. It also includes a token that AWS uses to verify that the credentials are valid. By default, credentials assigned to tasks using task roles are valid for six hours. After that, they are automatically rotated by the Amazon ECS container agent.</p>\n</blockquote>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1683173849,"post_id":76169531,"comment_id":134326666,"body_markdown":"What do you mean &quot;restart the fragment&quot;? Better yet, what should the user see? If you can describe the user experience from the user&#39;s point of view, we will probably be able to better answer your question. In writing this, don&#39;t use words like &quot;fragment&quot; that the user doesn&#39;t know about.","body":"What do you mean &quot;restart the fragment&quot;? Better yet, what should the user see? If you can describe the user experience from the user&#39;s point of view, we will probably be able to better answer your question. In writing this, don&#39;t use words like &quot;fragment&quot; that the user doesn&#39;t know about."},{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":0,"creation_date":1683175853,"post_id":76169531,"comment_id":134326838,"body_markdown":"Just to reset some textfields and checks on the screen , It is not good idea to restart your fragment as android system is going to recreate your fragment which is leading to memory consumption and bad user experience . It is better to reset by your code","body":"Just to reset some textfields and checks on the screen , It is not good idea to restart your fragment as android system is going to recreate your fragment which is leading to memory consumption and bad user experience . It is better to reset by your code"}],"answers":[{"tags":[],"owner":{"account_id":21584472,"reputation":690,"user_id":15915172,"display_name":"Rakesh Saini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683174202,"creation_date":1683174202,"answer_id":76169580,"question_id":76169531,"body_markdown":"You can call that fragment again by using the following code\r\n\r\n      FragmentManager fragmentManager = getSupportFragmentManager();\r\n      MyFragment myFragment = new MyFragment();\r\n      fragmentManager.beginTransaction()\r\n               .replace(R.id.fragment_container, myFragment)\r\n               .commit();\r\n\r\n\r\nInstead of &#39;MyFragment&#39; use your fragment","title":"How to restart a fragment in java?","body":"<p>You can call that fragment again by using the following code</p>\n<pre><code>  FragmentManager fragmentManager = getSupportFragmentManager();\n  MyFragment myFragment = new MyFragment();\n  fragmentManager.beginTransaction()\n           .replace(R.id.fragment_container, myFragment)\n           .commit();\n</code></pre>\n<p>Instead of 'MyFragment' use your fragment</p>\n"},{"tags":[],"owner":{"account_id":28020964,"reputation":1205,"user_id":21401783,"display_name":"Dinux"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683180716,"creation_date":1683180716,"answer_id":76170052,"question_id":76169531,"body_markdown":"You can use the following code to restart a fragment:\r\n~~~\r\nFragmentManager fm = getSupportFragmentManager();\r\nYourFragment yf = new YourFragment();\r\nfm.beginTransaction().replace(R.id.YOUR_FRAGMENT_CONTAINER, yf).commit();\r\n~~~\r\nYou have to replace YOUR_FRAGMENT_CONTAINER with your fragment container and YourFragment with the name of your fragment.","title":"How to restart a fragment in java?","body":"<p>You can use the following code to restart a fragment:</p>\n<pre><code>FragmentManager fm = getSupportFragmentManager();\nYourFragment yf = new YourFragment();\nfm.beginTransaction().replace(R.id.YOUR_FRAGMENT_CONTAINER, yf).commit();\n</code></pre>\n<p>You have to replace YOUR_FRAGMENT_CONTAINER with your fragment container and YourFragment with the name of your fragment.</p>\n"},{"tags":[],"owner":{"account_id":28491420,"reputation":3,"user_id":21804011,"display_name":"Madeeha Shahid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683182390,"creation_date":1683182390,"answer_id":76170242,"question_id":76169531,"body_markdown":"when you are performing the task you can simply remove the fragment by using the followig line of code:\r\n// Remove the current fragment\r\n\r\n    ft.remove(currentFragment);\r\n\r\n and then again add the fragment by writing code:\r\n\r\n    YourFragment fragment = new YourFragment();\r\n    ft.add(R.id.fragment_container, fragment, &quot;YOUR_OWN_FRAGMENT_TAG&quot;);\r\n    ft.commit();\r\nso the data you updated will be fetched again\r\nor you can simply create a function for updating data by passing and call it when your task is done","title":"How to restart a fragment in java?","body":"<p>when you are performing the task you can simply remove the fragment by using the followig line of code:\n// Remove the current fragment</p>\n<pre><code>ft.remove(currentFragment);\n</code></pre>\n<p>and then again add the fragment by writing code:</p>\n<pre><code>YourFragment fragment = new YourFragment();\nft.add(R.id.fragment_container, fragment, &quot;YOUR_OWN_FRAGMENT_TAG&quot;);\nft.commit();\n</code></pre>\n<p>so the data you updated will be fetched again\nor you can simply create a function for updating data by passing and call it when your task is done</p>\n"}],"owner":{"account_id":28496270,"reputation":1,"user_id":21808125,"display_name":"Bhupender"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1683207120,"creation_date":1683173415,"question_id":76169531,"body_markdown":"I have a fragment in android and I want to restart the fragment after a certain task so that if I have some text feild and checks on the screen so that they will get their initial state.\r\n\r\n\r\n\r\n```\r\npublic class upload_notice_fragment extends Fragment {\r\n\r\n    public upload_notice_fragment(Activity activity) {\r\n        this.activity = activity;\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View fragment = inflater.inflate(R.layout.upload_notice_fragment, container, false);\r\n        uploadData();\r\n        return fragment;\r\n    }\r\n\r\n    private void uploadData() {\r\n        FirebaseFirestore storeReference = FirebaseFirestore.getInstance();\r\n        HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n        map.put(&quot;date&quot;, new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault()).format(new Date()));\r\n        map.put(&quot;time&quot;, new SimpleDateFormat(&quot;hh:mm a&quot;, Locale.getDefault()).format(new Date()));\r\n        storeReference.collection(&quot;date-time&quot;).add(map)\r\n                .addOnSuccessListener(documentReference -&gt; {\r\n                    // Restart the fragment here......\r\n                    FragmentManager fragmentManager = getSupportFragmentManager();\r\n                    MyFragment myFragment = new MyFragment();\r\n                    fragmentManager.beginTransaction()\r\n                                   .replace(R.id.fragment_container, myFragment)\r\n                                   .commit();\r\n                })\r\n                .addOnFailureListener(e -&gt; {\r\n                    Toast.makeText(getContext(), &quot;Something Went Wrong!&quot;, Toast.LENGTH_SHORT).show();\r\n                });\r\n    }\r\n}\r\n```\r\n\r\nHere is what I want to do in this.\r\n\r\n\r\ni have tried to implement the code you provided but it is resulting in [Image For Reference](https://i.stack.imgur.com/Wk8jT.jpg)","title":"How to restart a fragment in java?","body":"<p>I have a fragment in android and I want to restart the fragment after a certain task so that if I have some text feild and checks on the screen so that they will get their initial state.</p>\n<pre><code>public class upload_notice_fragment extends Fragment {\n\n    public upload_notice_fragment(Activity activity) {\n        this.activity = activity;\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        View fragment = inflater.inflate(R.layout.upload_notice_fragment, container, false);\n        uploadData();\n        return fragment;\n    }\n\n    private void uploadData() {\n        FirebaseFirestore storeReference = FirebaseFirestore.getInstance();\n        HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;date&quot;, new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault()).format(new Date()));\n        map.put(&quot;time&quot;, new SimpleDateFormat(&quot;hh:mm a&quot;, Locale.getDefault()).format(new Date()));\n        storeReference.collection(&quot;date-time&quot;).add(map)\n                .addOnSuccessListener(documentReference -&gt; {\n                    // Restart the fragment here......\n                    FragmentManager fragmentManager = getSupportFragmentManager();\n                    MyFragment myFragment = new MyFragment();\n                    fragmentManager.beginTransaction()\n                                   .replace(R.id.fragment_container, myFragment)\n                                   .commit();\n                })\n                .addOnFailureListener(e -&gt; {\n                    Toast.makeText(getContext(), &quot;Something Went Wrong!&quot;, Toast.LENGTH_SHORT).show();\n                });\n    }\n}\n</code></pre>\n<p>Here is what I want to do in this.</p>\n<p>i have tried to implement the code you provided but it is resulting in <a href=\"https://i.stack.imgur.com/Wk8jT.jpg\" rel=\"nofollow noreferrer\">Image For Reference</a></p>\n"},{"tags":["java",".net","dll","jar","ikvm"],"owner":{"account_id":13446244,"reputation":57,"user_id":9702104,"display_name":"Ali Raza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683207098,"creation_date":1683207098,"question_id":76173787,"body_markdown":"I have created a simple class in JAVA, created its jar, and converted jar to dll via IKVM version **7.2.4630.5**. I added its reference and also added IKVM.OpenJDK.Core.dll reference to the project to the project but I am getting the following error:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nfollowing is my java class:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7KlTF.png\r\n  [2]: https://i.stack.imgur.com/AIuw6.png\r\n\r\nWhat I am doing wrong?","title":".Net dll created via IKVM is not showing any namespace in Visual Studio&#39;s Object Explorer","body":"<p>I have created a simple class in JAVA, created its jar, and converted jar to dll via IKVM version <strong>7.2.4630.5</strong>. I added its reference and also added IKVM.OpenJDK.Core.dll reference to the project to the project but I am getting the following error:</p>\n<p><a href=\"https://i.stack.imgur.com/7KlTF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7KlTF.png\" alt=\"enter image description here\" /></a></p>\n<p>following is my java class:</p>\n<p><a href=\"https://i.stack.imgur.com/AIuw6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AIuw6.png\" alt=\"enter image description here\" /></a></p>\n<p>What I am doing wrong?</p>\n"},{"tags":["java","spring-boot","spring-security","junit","bearer-token"],"answers":[{"tags":[],"owner":{"account_id":9911313,"reputation":31,"user_id":7337932,"display_name":"Adrian Challinor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683206590,"creation_date":1683206590,"answer_id":76173704,"question_id":76172699,"body_markdown":"I am not sure if you have this or not in your code, it could be that you have it but not copied it here. \r\n\r\nIn the code you need to catch the request that contains the bearer token and translate that into a Sping Authentication object. This is done in a special flter that will run prior to the standard auth filkters. Its sole job is to setup the authentication. We use three components to do this: \r\n\r\n - A filter to intercept the HTTP request, This is a component class that extends the OncePerSession class. You override the  method &quot;doFilterInternal&quot; to find the token. \r\n - A utility that decodes the token and ensures it is valid. We have a component called JWTUtilities to do this. We alsoi use this to generate tokens, rather than construct them manually as you do. So Our first call is to get the token, then we use that to test the endpoints. \r\n - We use our standard Session UserDetails class to cross reference a token user to a database user. We supply our users with an APIKEY and APISECRET.  The key translates to a user in the database, and by looking up the user we get a list or roles they are suppose to have. This code is largely shared with the end user login that we get from ThymeLeaf and our web pages login. \r\n \r\nAs an example, here is what we use for the JWT Token Filter. \r\n\r\n\r\n    \r\n    @Component\r\n    @RequiredArgsConstructor\r\n    @Slf4j\r\n    public class JwtTokenFilter extends OncePerRequestFilter {\r\n    \t\r\n    \t@NonNull private JwtUtils jwtUtil;\r\n    \t@NonNull private SessionUserDetails sessionUserDetails; \r\n    \t\r\n    \t/**\r\n    \t * Do filter internal.\r\n    \t *\r\n    \t * @param request     the http request\r\n    \t * @param response    the http response\r\n    \t * @param filterChain the filter chain \r\n    \t * @throws ServletException the servlet exception\r\n    \t * @throws IOException      Signals that an I/O exception has occurred.\r\n    \t */\r\n    \t@Override\r\n    \tprotected void doFilterInternal(HttpServletRequest request, \r\n    \t\t\t\tHttpServletResponse response, FilterChain filterChain)\r\n    \t\t\tthrows ServletException, IOException {\r\n    \r\n    \t\tString header = request.getHeader(&quot;Authorization&quot;);\r\n    \r\n    \t\tif (!ObjectUtils.isEmpty(header) &amp;&amp; header.startsWith(&quot;Bearer&quot;)) {\r\n    \t\t\tString token = header.split(&quot; &quot;)[1].trim();\r\n    \t\t\tif (jwtUtil.validateJwtToken(token)) {\r\n    \t\t\t\t// We have a bearer token and it is valid. \r\n    \t\t\t\t// Decode the token to get the username and then construct \r\n    \t\t\t\t// an authentication token. \r\n    \t\t\t\t\r\n    \t\t\t\tClaims claims = jwtUtil.parseClaims(token);\r\n    \t\t\t\tString userName = (String) claims.get(Claims.SUBJECT);\r\n    \t\t\t\tlog.debug(&quot;Username subject {} &quot; , userName);\r\n    \r\n    \t\t\t\tUserDetails userDetails = sessionUserDetails.loadUserByUsername(userName);\r\n    \r\n    \t\t\t\tUsernamePasswordAuthenticationToken \r\n    \t\t\t\t\tauthentication = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\r\n    \r\n    \t\t\t\tauthentication.setDetails(\r\n    \t\t\t\t\t\tnew WebAuthenticationDetailsSource().buildDetails(request));\r\n    \r\n    \t\t\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tfilterChain.doFilter(request, response);\r\n    \t}\r\n    }\r\n\r\n \r\n\r\n ","title":"How to write Integration Test with the usage of Bearer Token in Spring Boot (throw An Authentication object was not found in the SecurityContext)","body":"<p>I am not sure if you have this or not in your code, it could be that you have it but not copied it here.</p>\n<p>In the code you need to catch the request that contains the bearer token and translate that into a Sping Authentication object. This is done in a special flter that will run prior to the standard auth filkters. Its sole job is to setup the authentication. We use three components to do this:</p>\n<ul>\n<li>A filter to intercept the HTTP request, This is a component class that extends the OncePerSession class. You override the  method &quot;doFilterInternal&quot; to find the token.</li>\n<li>A utility that decodes the token and ensures it is valid. We have a component called JWTUtilities to do this. We alsoi use this to generate tokens, rather than construct them manually as you do. So Our first call is to get the token, then we use that to test the endpoints.</li>\n<li>We use our standard Session UserDetails class to cross reference a token user to a database user. We supply our users with an APIKEY and APISECRET.  The key translates to a user in the database, and by looking up the user we get a list or roles they are suppose to have. This code is largely shared with the end user login that we get from ThymeLeaf and our web pages login.</li>\n</ul>\n<p>As an example, here is what we use for the JWT Token Filter.</p>\n<pre><code>@Component\n@RequiredArgsConstructor\n@Slf4j\npublic class JwtTokenFilter extends OncePerRequestFilter {\n    \n    @NonNull private JwtUtils jwtUtil;\n    @NonNull private SessionUserDetails sessionUserDetails; \n    \n    /**\n     * Do filter internal.\n     *\n     * @param request     the http request\n     * @param response    the http response\n     * @param filterChain the filter chain \n     * @throws ServletException the servlet exception\n     * @throws IOException      Signals that an I/O exception has occurred.\n     */\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, \n                HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n\n        String header = request.getHeader(&quot;Authorization&quot;);\n\n        if (!ObjectUtils.isEmpty(header) &amp;&amp; header.startsWith(&quot;Bearer&quot;)) {\n            String token = header.split(&quot; &quot;)[1].trim();\n            if (jwtUtil.validateJwtToken(token)) {\n                // We have a bearer token and it is valid. \n                // Decode the token to get the username and then construct \n                // an authentication token. \n                \n                Claims claims = jwtUtil.parseClaims(token);\n                String userName = (String) claims.get(Claims.SUBJECT);\n                log.debug(&quot;Username subject {} &quot; , userName);\n\n                UserDetails userDetails = sessionUserDetails.loadUserByUsername(userName);\n\n                UsernamePasswordAuthenticationToken \n                    authentication = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n\n                authentication.setDetails(\n                        new WebAuthenticationDetailsSource().buildDetails(request));\n\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":601,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683206590,"creation_date":1683199882,"question_id":76172699,"body_markdown":"I have a problem to write Integration Test in my Spring Boot example.\r\nIn my UserController class, every methods are defined with @PreAuthorize with roles.\r\n\r\nHere is my code snippets shown below\r\n\r\nHere is the AbstractRestControllerTest  shown below\r\n\r\n    @SpringBootTest\r\n    @ExtendWith(MockitoExtension.class)\r\n    @ActiveProfiles(value = &quot;test&quot;)\r\n    @AutoConfigureMockMvc(addFilters = false)\r\n    public abstract class AbstractRestControllerTest {\r\n    \r\n        @Autowired\r\n        protected MockMvc mockMvc;\r\n    \r\n    }\r\n\r\nHere is the Controller in my Spring Boot Project\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/v1/user&quot;)\r\n    @RequiredArgsConstructor\r\n    @Validated\r\n    class UserController {\r\n    \r\n        private final UserService userService;\r\n    \r\n        private final UserToUserResponseMapper userToUserResponseMapper = UserToUserResponseMapper.initialize();\r\n        private final UserToUsersResponseMapper userToUsersResponseMapper = UserToUsersResponseMapper.initialize();\r\n    \r\n        @PostMapping\r\n        @PreAuthorize(&quot;hasAnyAuthority(&#39;ADMIN&#39;)&quot;)\r\n        public Response&lt;Void&gt; saveUser(@RequestBody @Valid UserSaveRequest saveRequest) {\r\n            userService.saveUser(saveRequest);\r\n            return Response.SUCCESS;\r\n        }\r\n\r\nHere is my IntegrationTest Class shown below\r\n\r\n    class UserControllerTest extends AbstractRestControllerTest {\r\n    \r\n         @MockBean\r\n        private UserService userService;\r\n    \r\n        private static final String BASE_PATH = &quot;/api/v1/user&quot;;\r\n    \r\n        @Test\r\n        void saveUserRequestWithAdminRole_ReturnSuccess() throws Exception {\r\n            // Given\r\n            UserSaveRequest mockUserSaveRequest = new UserSaveRequestBuilder()\r\n                    .withFirstName(&quot;First Name&quot;)\r\n                    .build();\r\n            Token mockToken = TokenBuilder.VALID_FOR_ADMIN;\r\n            Response&lt;Void&gt; mockResponse = ResponseBuilder.SUCCESS;\r\n    \r\n            // When\r\n            Mockito.doNothing().when(userService).saveUser(mockUserSaveRequest);\r\n    \r\n            // Then\r\n            mockMvc.perform(MockMvcRequestBuilders\r\n                            .post(BASE_PATH, mockToken.getAccessToken(), mockUserSaveRequest))\r\n                    .andDo(print())\r\n                    .andExpect(status().isOk())\r\n                    .andExpect(jsonPath(&quot;$.time&quot;).isNotEmpty())              .andExpect(jsonPath(&quot;$.httpStatus&quot;).value(mockResponse.getHttpStatus().getReasonPhrase()))\r\n                    .andExpect(jsonPath(&quot;$.isSuccess&quot;).value(mockResponse.getIsSuccess()))\r\n                    .andExpect(jsonPath(&quot;$.response&quot;).doesNotExist());\r\n    \r\n            Mockito.verify(userService, Mockito.times(1)).saveUser(Mockito.any());\r\n    \r\n        }\r\n    }\r\n\r\nHere is the TokenBuilder class shown below\r\n\r\n    public class TokenBuilder {\r\n    \r\n        public static final Token VALID_FOR_ADMIN = Token.builder()\r\n                .accessToken(&quot;ACCESS_TOKEN&quot;)\r\n                .accessTokenExpiresAt(LONG_VALUE)\r\n                .refreshToken(&quot;REFRESH_TOKEN&quot;)\r\n                .build();\r\n    \r\n        public static final Token VALID_FOR_USER = Token.builder()\r\n                .accessToken(&quot;ACCESS_TOKEN&quot;)\r\n                .accessTokenExpiresAt(LONG_VALUE)\r\n                .refreshToken(&quot;REFRESH_TOKEN&quot;)\r\n                .build();\r\n    \r\n    }\r\n\r\nHere is the MockMvcRequestBuilders class shown below\r\n\r\n    @Slf4j\r\n    @UtilityClass\r\n    public class MockMvcRequestBuilders {\r\n    \r\n    public MockHttpServletRequestBuilder post(String endpoint, String token, Object requestBody) {\r\n            return MockMvcRequestBuilders.post(endpoint)\r\n                    .header(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot; + token)\r\n                    .content(GSON.toJson(requestBody))\r\n                    .contentType(MediaType.APPLICATION_JSON);\r\n          }\r\n    }\r\n\r\nI got this issue shown below when I run saveUserRequestWithAdminRole_ReturnSuccess\r\n\r\n    jakarta.servlet.ServletException: Request processing failed: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: An Authentication object was not found in the SecurityContext\r\n\r\nHow can I fix the test method in IntegrationTest of Controller?\r\n\r\n","title":"How to write Integration Test with the usage of Bearer Token in Spring Boot (throw An Authentication object was not found in the SecurityContext)","body":"<p>I have a problem to write Integration Test in my Spring Boot example.\nIn my UserController class, every methods are defined with @PreAuthorize with roles.</p>\n<p>Here is my code snippets shown below</p>\n<p>Here is the AbstractRestControllerTest  shown below</p>\n<pre><code>@SpringBootTest\n@ExtendWith(MockitoExtension.class)\n@ActiveProfiles(value = &quot;test&quot;)\n@AutoConfigureMockMvc(addFilters = false)\npublic abstract class AbstractRestControllerTest {\n\n    @Autowired\n    protected MockMvc mockMvc;\n\n}\n</code></pre>\n<p>Here is the Controller in my Spring Boot Project</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/v1/user&quot;)\n@RequiredArgsConstructor\n@Validated\nclass UserController {\n\n    private final UserService userService;\n\n    private final UserToUserResponseMapper userToUserResponseMapper = UserToUserResponseMapper.initialize();\n    private final UserToUsersResponseMapper userToUsersResponseMapper = UserToUsersResponseMapper.initialize();\n\n    @PostMapping\n    @PreAuthorize(&quot;hasAnyAuthority('ADMIN')&quot;)\n    public Response&lt;Void&gt; saveUser(@RequestBody @Valid UserSaveRequest saveRequest) {\n        userService.saveUser(saveRequest);\n        return Response.SUCCESS;\n    }\n</code></pre>\n<p>Here is my IntegrationTest Class shown below</p>\n<pre><code>class UserControllerTest extends AbstractRestControllerTest {\n\n     @MockBean\n    private UserService userService;\n\n    private static final String BASE_PATH = &quot;/api/v1/user&quot;;\n\n    @Test\n    void saveUserRequestWithAdminRole_ReturnSuccess() throws Exception {\n        // Given\n        UserSaveRequest mockUserSaveRequest = new UserSaveRequestBuilder()\n                .withFirstName(&quot;First Name&quot;)\n                .build();\n        Token mockToken = TokenBuilder.VALID_FOR_ADMIN;\n        Response&lt;Void&gt; mockResponse = ResponseBuilder.SUCCESS;\n\n        // When\n        Mockito.doNothing().when(userService).saveUser(mockUserSaveRequest);\n\n        // Then\n        mockMvc.perform(MockMvcRequestBuilders\n                        .post(BASE_PATH, mockToken.getAccessToken(), mockUserSaveRequest))\n                .andDo(print())\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(&quot;$.time&quot;).isNotEmpty())              .andExpect(jsonPath(&quot;$.httpStatus&quot;).value(mockResponse.getHttpStatus().getReasonPhrase()))\n                .andExpect(jsonPath(&quot;$.isSuccess&quot;).value(mockResponse.getIsSuccess()))\n                .andExpect(jsonPath(&quot;$.response&quot;).doesNotExist());\n\n        Mockito.verify(userService, Mockito.times(1)).saveUser(Mockito.any());\n\n    }\n}\n</code></pre>\n<p>Here is the TokenBuilder class shown below</p>\n<pre><code>public class TokenBuilder {\n\n    public static final Token VALID_FOR_ADMIN = Token.builder()\n            .accessToken(&quot;ACCESS_TOKEN&quot;)\n            .accessTokenExpiresAt(LONG_VALUE)\n            .refreshToken(&quot;REFRESH_TOKEN&quot;)\n            .build();\n\n    public static final Token VALID_FOR_USER = Token.builder()\n            .accessToken(&quot;ACCESS_TOKEN&quot;)\n            .accessTokenExpiresAt(LONG_VALUE)\n            .refreshToken(&quot;REFRESH_TOKEN&quot;)\n            .build();\n\n}\n</code></pre>\n<p>Here is the MockMvcRequestBuilders class shown below</p>\n<pre><code>@Slf4j\n@UtilityClass\npublic class MockMvcRequestBuilders {\n\npublic MockHttpServletRequestBuilder post(String endpoint, String token, Object requestBody) {\n        return MockMvcRequestBuilders.post(endpoint)\n                .header(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot; + token)\n                .content(GSON.toJson(requestBody))\n                .contentType(MediaType.APPLICATION_JSON);\n      }\n}\n</code></pre>\n<p>I got this issue shown below when I run saveUserRequestWithAdminRole_ReturnSuccess</p>\n<pre><code>jakarta.servlet.ServletException: Request processing failed: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: An Authentication object was not found in the SecurityContext\n</code></pre>\n<p>How can I fix the test method in IntegrationTest of Controller?</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":64324,"reputation":76480,"user_id":189950,"accept_rate":79,"display_name":"Kirk Woll"},"score":8,"creation_date":1335318867,"post_id":10308356,"comment_id":13267843,"body_markdown":"What do you mean it&#39;s &quot;not accurate&quot;?","body":"What do you mean it&#39;s &quot;not accurate&quot;?"},{"owner":{"account_id":419726,"reputation":92910,"user_id":797049,"accept_rate":91,"display_name":"Mark Reed"},"score":0,"creation_date":1335319078,"post_id":10308356,"comment_id":13267879,"body_markdown":"What&#39;s wrong with the code?  What are you getting that you don&#39;t expect?  What time zone do you want your days to start and end according to?","body":"What&#39;s wrong with the code?  What are you getting that you don&#39;t expect?  What time zone do you want your days to start and end according to?"},{"owner":{"account_id":1009841,"reputation":447,"user_id":1022678,"display_name":"Jerry Destremps"},"score":5,"creation_date":1381378406,"post_id":10308356,"comment_id":28559326,"body_markdown":"The code above does not even use the date passed into the method.  It should be doing: calendar.setTime( date ) after the calendar is created.","body":"The code above does not even use the date passed into the method.  It should be doing: calendar.setTime( date ) after the calendar is created."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1411144265,"post_id":10308356,"comment_id":40607415,"body_markdown":"This question assumes date-time values have a resolution of milliseconds. True for java.util.Date and Joda-Time. But False for java.time package in Java 8 (nanoseconds), some databases such as [Postgres](http://www.postgresql.org/docs/current/static/datatype-datetime.html) (microseconds), unix libraries (whole seconds), and perhaps others. See [my answer](http://stackoverflow.com/a/20536041/642706) for safer approach using Half-Open.","body":"This question assumes date-time values have a resolution of milliseconds. True for java.util.Date and Joda-Time. But False for java.time package in Java 8 (nanoseconds), some databases such as <a href=\"http://www.postgresql.org/docs/current/static/datatype-datetime.html\" rel=\"nofollow noreferrer\">Postgres</a> (microseconds), unix libraries (whole seconds), and perhaps others. See <a href=\"http://stackoverflow.com/a/20536041/642706\">my answer</a> for safer approach using Half-Open."},{"owner":{"account_id":1565422,"reputation":1256,"user_id":1454347,"accept_rate":50,"display_name":"astryk"},"score":0,"creation_date":1474689644,"post_id":10308356,"comment_id":66645794,"body_markdown":"The start of day is totally accurate to the mili. FOr the end of day why not just to TimeUnit.DAYS.toMiliseconds(1) - 1l to get the end of the day. Quite literally &#39;start of next day minus one&#39; . Easy.","body":"The start of day is totally accurate to the mili. FOr the end of day why not just to TimeUnit.DAYS.toMiliseconds(1) - 1l to get the end of the day. Quite literally &#39;start of next day minus one&#39; . Easy."},{"owner":{"account_id":103538,"reputation":13824,"user_id":277267,"accept_rate":69,"display_name":"Daniel F"},"score":2,"creation_date":1475573776,"post_id":10308356,"comment_id":66985916,"body_markdown":"Actually you should get the beginning of the next day and when iterating the items in that day (assuming you want to do that) you will specify the upper bound by using &lt; instead of &lt;=. That would exclude the next day but include all of the previous day down to the nanosecond.","body":"Actually you should get the beginning of the next day and when iterating the items in that day (assuming you want to do that) you will specify the upper bound by using &lt; instead of &lt;=. That would exclude the next day but include all of the previous day down to the nanosecond."},{"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"score":0,"creation_date":1565117622,"post_id":10308356,"comment_id":101248948,"body_markdown":"new Date(epochMillis).toInstant().truncatedTo(ChronoUnit.DAYS).plus(1, ChronoUnit.DAYS)","body":"new Date(epochMillis).toInstant().truncatedTo(ChronoUnit.DAYS).p&zwnj;&#8203;lus(1, ChronoUnit.DAYS)"}],"answers":[{"tags":[],"owner":{"account_id":1339399,"reputation":21672,"user_id":1281407,"accept_rate":93,"display_name":"mprivat"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1335319501,"creation_date":1335319501,"answer_id":10308430,"question_id":10308356,"body_markdown":"in getEndOfDay, you can add:\r\n\r\n    calendar.set(Calendar.MILLISECOND, 999);\r\n\r\nAlthough mathematically speaking, you can&#39;t specify the end of a day other than by saying it&#39;s &quot;before the beginning of the next day&quot;. \r\n\r\nSo instead of saying, `if(date &gt;= getStartOfDay(today) &amp;&amp; date &lt;= getEndOfDay(today))`, you should say: `if(date &gt;= getStartOfDay(today) &amp;&amp; date &lt; getStartOfDay(tomorrow))`. That is a much more solid definition (and you don&#39;t have to worry about millisecond precision).","title":"How to obtain the start time and end time of a day?","body":"<p>in getEndOfDay, you can add:</p>\n\n<pre><code>calendar.set(Calendar.MILLISECOND, 999);\n</code></pre>\n\n<p>Although mathematically speaking, you can't specify the end of a day other than by saying it's \"before the beginning of the next day\". </p>\n\n<p>So instead of saying, <code>if(date &gt;= getStartOfDay(today) &amp;&amp; date &lt;= getEndOfDay(today))</code>, you should say: <code>if(date &gt;= getStartOfDay(today) &amp;&amp; date &lt; getStartOfDay(tomorrow))</code>. That is a much more solid definition (and you don't have to worry about millisecond precision).</p>\n"},{"tags":[],"owner":{"account_id":191463,"reputation":2807,"user_id":1660607,"display_name":"RKumsher"},"down_vote_count":2,"up_vote_count":233,"is_accepted":false,"score":231,"last_activity_date":1521319451,"creation_date":1349118586,"answer_id":12679472,"question_id":10308356,"body_markdown":"Java 8\r\n------\r\n------\r\n\r\n\tpublic static Date atStartOfDay(Date date) {\r\n\t\tLocalDateTime localDateTime = dateToLocalDateTime(date);\r\n\t\tLocalDateTime startOfDay = localDateTime.with(LocalTime.MIN);\r\n\t\treturn localDateTimeToDate(startOfDay);\r\n\t}\r\n\r\n\tpublic static Date atEndOfDay(Date date) {\r\n\t\tLocalDateTime localDateTime = dateToLocalDateTime(date);\r\n\t\tLocalDateTime endOfDay = localDateTime.with(LocalTime.MAX);\r\n\t\treturn localDateTimeToDate(endOfDay);\r\n\t}\r\n\r\n\tprivate static LocalDateTime dateToLocalDateTime(Date date) {\r\n\t\treturn LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());\r\n\t}\r\n\r\n\tprivate static Date localDateTimeToDate(LocalDateTime localDateTime) {\r\n\t\treturn Date.from(localDateTime.atZone(ZoneId.systemDefault()).toInstant());\r\n\t}\r\n\r\n**Update**: I&#39;ve added these 2 methods to my Java Utility Classes [here][1]\r\n\r\n - [DateUtils.atStartOfDay][2]\r\n - [DateUtils.atEndOfDay][3]\r\n\r\nIt is in the Maven Central Repository at:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.github.rkumsher&lt;/groupId&gt;\r\n      &lt;artifactId&gt;utils&lt;/artifactId&gt;\r\n      &lt;version&gt;1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nJava 7 and Earlier\r\n------------------\r\n------------------\r\n\r\nWith Apache Commons\r\n-------------------\r\n\r\n    public static Date atEndOfDay(Date date) {\r\n        return DateUtils.addMilliseconds(DateUtils.ceiling(date, Calendar.DATE), -1);\r\n    }\r\n\r\n    public static Date atStartOfDay(Date date) {\r\n        return DateUtils.truncate(date, Calendar.DATE);\r\n    }\r\n\r\nWithout Apache Commons\r\n----------------------\r\n\r\n    \r\n    public Date atEndOfDay(Date date) {\r\n        Calendar calendar = Calendar.getInstance();\r\n        calendar.setTime(date);\r\n        calendar.set(Calendar.HOUR_OF_DAY, 23);\r\n        calendar.set(Calendar.MINUTE, 59);\r\n        calendar.set(Calendar.SECOND, 59);\r\n        calendar.set(Calendar.MILLISECOND, 999);\r\n        return calendar.getTime();\r\n    }\r\n\r\n    public Date atStartOfDay(Date date) {\r\n        Calendar calendar = Calendar.getInstance();\r\n        calendar.setTime(date);\r\n        calendar.set(Calendar.HOUR_OF_DAY, 0);\r\n        calendar.set(Calendar.MINUTE, 0);\r\n        calendar.set(Calendar.SECOND, 0);\r\n        calendar.set(Calendar.MILLISECOND, 0);\r\n        return calendar.getTime();\r\n    }\r\n\r\n\r\n  [1]: https://github.com/RKumsher/utils\r\n  [2]: https://github.com/RKumsher/utils/blob/master/src/main/java/com/github/rkumsher/date/DateUtils.java#L47\r\n  [3]: https://github.com/RKumsher/utils/blob/master/src/main/java/com/github/rkumsher/date/DateUtils.java#L61","title":"How to obtain the start time and end time of a day?","body":"<h2>Java 8</h2>\n\n<hr>\n\n<pre><code>public static Date atStartOfDay(Date date) {\n    LocalDateTime localDateTime = dateToLocalDateTime(date);\n    LocalDateTime startOfDay = localDateTime.with(LocalTime.MIN);\n    return localDateTimeToDate(startOfDay);\n}\n\npublic static Date atEndOfDay(Date date) {\n    LocalDateTime localDateTime = dateToLocalDateTime(date);\n    LocalDateTime endOfDay = localDateTime.with(LocalTime.MAX);\n    return localDateTimeToDate(endOfDay);\n}\n\nprivate static LocalDateTime dateToLocalDateTime(Date date) {\n    return LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());\n}\n\nprivate static Date localDateTimeToDate(LocalDateTime localDateTime) {\n    return Date.from(localDateTime.atZone(ZoneId.systemDefault()).toInstant());\n}\n</code></pre>\n\n<p><strong>Update</strong>: I've added these 2 methods to my Java Utility Classes <a href=\"https://github.com/RKumsher/utils\" rel=\"noreferrer\">here</a></p>\n\n<ul>\n<li><a href=\"https://github.com/RKumsher/utils/blob/master/src/main/java/com/github/rkumsher/date/DateUtils.java#L47\" rel=\"noreferrer\">DateUtils.atStartOfDay</a></li>\n<li><a href=\"https://github.com/RKumsher/utils/blob/master/src/main/java/com/github/rkumsher/date/DateUtils.java#L61\" rel=\"noreferrer\">DateUtils.atEndOfDay</a></li>\n</ul>\n\n<p>It is in the Maven Central Repository at:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.github.rkumsher&lt;/groupId&gt;\n  &lt;artifactId&gt;utils&lt;/artifactId&gt;\n  &lt;version&gt;1.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<h2>Java 7 and Earlier</h2>\n\n<hr>\n\n<h2>With Apache Commons</h2>\n\n<pre><code>public static Date atEndOfDay(Date date) {\n    return DateUtils.addMilliseconds(DateUtils.ceiling(date, Calendar.DATE), -1);\n}\n\npublic static Date atStartOfDay(Date date) {\n    return DateUtils.truncate(date, Calendar.DATE);\n}\n</code></pre>\n\n<h2>Without Apache Commons</h2>\n\n<pre><code>public Date atEndOfDay(Date date) {\n    Calendar calendar = Calendar.getInstance();\n    calendar.setTime(date);\n    calendar.set(Calendar.HOUR_OF_DAY, 23);\n    calendar.set(Calendar.MINUTE, 59);\n    calendar.set(Calendar.SECOND, 59);\n    calendar.set(Calendar.MILLISECOND, 999);\n    return calendar.getTime();\n}\n\npublic Date atStartOfDay(Date date) {\n    Calendar calendar = Calendar.getInstance();\n    calendar.setTime(date);\n    calendar.set(Calendar.HOUR_OF_DAY, 0);\n    calendar.set(Calendar.MINUTE, 0);\n    calendar.set(Calendar.SECOND, 0);\n    calendar.set(Calendar.MILLISECOND, 0);\n    return calendar.getTime();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":2,"up_vote_count":175,"is_accepted":true,"score":173,"last_activity_date":1595278710,"creation_date":1386827652,"answer_id":20536041,"question_id":10308356,"body_markdown":"# tl;dr\r\n\r\n    LocalDate                       // Represents an entire day, without time-of-day and without time zone.\r\n    .now(                           // Capture the current date.\r\n        ZoneId.of( &quot;Asia/Tokyo&quot; )   // Returns a `ZoneId` object.\r\n    )                               // Returns a `LocalDate` object.\r\n    .atStartOfDay(                  // Determines the first moment of the day as seen on that date in that time zone. Not all days start at 00:00!\r\n        ZoneId.of( &quot;Asia/Tokyo&quot; ) \r\n    )                               // Returns a `ZonedDateTime` object.\r\n\r\n\r\n\r\n\r\n\r\n# Start of day\r\n\r\nGet the full length of the today as seen in a time zone. \r\n\r\nUsing Half-Open approach, where the beginning is *inclusive* while the ending is *exclusive*. This approach solves the flaw in your code that fails to account for the very last second of the day.\r\n\r\n    ZoneId zoneId = ZoneId.of( &quot;Africa/Tunis&quot; ) ;\r\n    LocalDate today = LocalDate.now( zoneId  ) ;\r\n\r\n    ZonedDateTime zdtStart = today.atStartOfDay( zoneId ) ;\r\n    ZonedDateTime zdtStop = today.plusDays( 1 ).atStartOfDay( zoneId ) ;\r\n\r\n&gt;zdtStart.toString() = 2020-01-30T00:00+01:00[Africa/Tunis]\r\n\r\n&gt;zdtStop.toString() = 2020-01-31T00:00+01:00[Africa/Tunis]\r\n\r\nSee the same moments in UTC. \r\n\r\n    Instant start = zdtStart.toInstant() ;\r\n    Instant stop = zdtStop.toInstant() ;\r\n\r\n&gt;start.toString() = 2020-01-29T23:00:00Z\r\n\r\n&gt;stop.toString() = 2020-01-30T23:00:00Z\r\n\r\nIf you want the entire day of a date as seen in UTC rather than in a time zone, use `OffsetDateTime`.\r\n\r\n    LocalDate today = LocalDate.now( ZoneOffset.UTC  ) ;\r\n\r\n    OffsetDateTime odtStart = today.atTime( OffsetTime.MIN ) ;\r\n    OffsetDateTime odtStop = today.plusDays( 1 ).atTime( OffsetTime.MIN ) ;\r\n\r\n&gt;odtStart.toString() = 2020-01-30T00:00+18:00\r\n\r\n&gt;odtStop.toString() = 2020-01-31T00:00+18:00\r\n\r\n\r\nThese `OffsetDateTime ` objects will already be in UTC, but you can call `toInstant` if you need such objects which are always in UTC by definition.\r\n\r\n    Instant start = odtStart.toInstant() ;\r\n    Instant stop = odtStop.toInstant() ;\r\n\r\n&gt;start.toString() = 2020-01-29T06:00:00Z\r\n\r\n&gt;stop.toString() = 2020-01-30T06:00:00Z\r\n\r\n\r\n\r\nTip: You may be interested in adding the [*ThreeTen-Extra*](https://www.threeten.org/threeten-extra/) library to your project to use its [`Interval`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/Interval.html) class to represent this pair of `Instant` objects. This class offers useful methods for comparison such as `abuts`, `overlaps`, `contains`, and more.\r\n\r\n    Interval interval = Interval.of( start , stop ) ;\r\n\r\n&gt;interval.toString() = 2020-01-29T06:00:00Z/2020-01-30T06:00:00Z\r\n\r\n\r\n\r\n# Half-Open\r\n\r\nThe [answer by mprivat][2] is correct. His point is to not try to obtain end of a day, but rather compare to &quot;before start of next day&quot;. His idea is known as the &quot;Half-Open&quot; approach where a span of time has a **beginning that is inclusive** while the **ending is exclusive**.\r\n\r\n - The current date-time frameworks of Java (java.util.Date/Calendar and [Joda-Time][3]) both use milliseconds from the [epoch][4]. But in Java 8, the new JSR 310 java.time.* classes use nanoseconds resolution. Any code you wrote based on forcing the milliseconds count of last moment of day would be incorrect if switched to the new classes.\r\n - Comparing data from other sources becomes faulty if they employ other resolutions. For example, Unix libraries typically employ whole seconds, and databases such as [Postgres][5] resolve date-time to microseconds.\r\n - Some Daylight Saving Time changes happen over midnight which might further confuse things.\r\n\r\n![enter image description here][6]\r\n\r\n[Joda-Time][3] 2.3 offers a method for this very purpose, to obtain first moment of the day: [`withTimeAtStartOfDay()`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#withTimeAtStartOfDay()). Similarly in java.time, `LocalDate::atStartOfDay`.\r\n\r\n[Search StackOverflow for &quot;joda half-open&quot;](https://stackoverflow.com/search?q=joda+half-open) to see more discussion and examples.\r\n\r\nSee this post, [Time intervals and other ranges should be half-open](http://wrschneider.blogspot.com/2014/01/time-intervals-and-other-ranges-should.html), by Bill Schneider.\r\n\r\n# Avoid legacy date-time classes\r\n\r\nThe java.util.Date and .Calendar classes are notoriously troublesome. Avoid them. \r\n\r\nUse [*java.time*][7] classes. The *java.time* framework is the official successor of the highly successful [*Joda-Time*][8] library.\r\n\r\n# java.time\r\n\r\nThe java.time framework is built into Java 8 and later. Back-ported to Java 6 &amp; 7 in the [ThreeTen-Backport][9] project, further adapted to Android in the [ThreeTenABP][10] project.\r\n\r\nAn [`Instant`][11] is a moment on the timeline in [UTC][12] with a resolution of [nanoseconds][13]. \r\n\r\n    Instant instant = Instant.now();\r\n\r\nApply a time zone to get the [wall-clock time][14] for some locality. \r\n\r\n    ZoneId zoneId = ZoneId.of( &quot;America/Montreal&quot; );\r\n    ZonedDateTime zdt = ZonedDateTime.ofInstant( instant , zoneId );\r\n\r\nTo get the first moment of the day go through the [`LocalDate`][15] class and its [`atStartOfDay`][16] method.\r\n\r\n    ZonedDateTime zdtStart = zdt.toLocalDate().atStartOfDay( zoneId );\r\n\r\nUsing Half-Open approach, get first moment of following day.\r\n\r\n    ZonedDateTime zdtTomorrowStart = zdtStart.plusDays( 1 );\r\n\r\n[![Table of all date-time types in Java, both modern and legacy][1]][1]\r\n\r\nCurrently the java.time framework lacks an `Interval` class as described below for Joda-Time. However, the [ThreeTen-Extra][18] project extends java.time with additional classes. This project is the proving ground for possible future additions to java.time. Among its classes is [`Interval`][19]. Construct an `Interval` by passing a pair of `Instant` objects. We can extract an `Instant` from our `ZonedDateTime` objects.\r\n\r\n    Interval today = Interval.of( zdtStart.toInstant() , zdtTomorrowStart.toInstant() );\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html), [`Calendar`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html), &amp; [`SimpleDateFormat`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes. Hibernate 5 &amp; JPA 2.2 support *java.time*. \r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n   - [**Java 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9) brought some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n   - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n   - Later versions of Android (26+) bundle implementations of the *java.time* classes.\r\n   - For earlier Android (&lt;26), a process known as [*API desugaring*](https://developer.android.com/studio/write/java8-support#library-desugaring) brings a [subset of the *java.time*](https://developer.android.com/studio/write/java8-support-table) functionality not originally built into Android.\r\n     - If the desugaring does not offer what you need, the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above) to Android. See [*How to use ThreeTenABP…*](http://stackoverflow.com/q/38922754/642706).\r\n\r\n\r\n----------\r\n\r\n\r\n# Joda-Time\r\n\r\nUPDATE: The Joda-Time project is now in maintenance-mode, and advises migration to the *java.time* classes. I am leaving this section intact for history. \r\n\r\nJoda-Time has three classes to represent a span of time in various ways: `Interval`, `Period`, and `Duration`. An `Interval` has a specific beginning and ending on the timeline of the Universe. This fits our need to represent &quot;a day&quot;.\r\n\r\nWe call the method `withTimeAtStartOfDay` rather than set time of day to zeros. Because of Daylight Saving Time and other anomalies the first moment of the day may not be `00:00:00`.\r\n\r\nExample code using Joda-Time 2.3.\r\n\r\n    DateTimeZone timeZone = DateTimeZone.forID( &quot;America/Montreal&quot; );\r\n    DateTime now = DateTime.now( timeZone );\r\n    DateTime todayStart = now.withTimeAtStartOfDay();\r\n    DateTime tomorrowStart = now.plusDays( 1 ).withTimeAtStartOfDay();\r\n    Interval today = new Interval( todayStart, tomorrowStart );\r\n\r\nIf you must, you can convert to a java.util.Date.\r\n\r\n    java.util.Date date = todayStart.toDate();\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WyAl2.png\r\n  [2]: https://stackoverflow.com/a/10308430/642706\r\n  [3]: http://www.joda.org/joda-time/\r\n  [4]: https://en.wikipedia.org/wiki/Epoch_%28reference_date%29\r\n  [5]: http://www.postgresql.org/docs/current/static/datatype-datetime.html\r\n  [6]: http://i.stack.imgur.com/kE3r8.png\r\n  [7]: http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [8]: https://www.joda.org/joda-time/\r\n  [9]: http://www.threeten.org/threetenbp/\r\n  [10]: https://github.com/JakeWharton/ThreeTenABP\r\n  [11]: http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\r\n  [12]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time\r\n  [13]: https://en.wikipedia.org/wiki/Nanosecond\r\n  [14]: https://en.wikipedia.org/wiki/Wall-clock_time\r\n  [15]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [16]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#atStartOfDay-java.time.ZoneId-\r\n  [17]: https://i.stack.imgur.com/YTnDA.png\r\n  [18]: http://www.threeten.org/threeten-extra/\r\n  [19]: http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html","title":"How to obtain the start time and end time of a day?","body":"<h1>tl;dr</h1>\n<pre><code>LocalDate                       // Represents an entire day, without time-of-day and without time zone.\n.now(                           // Capture the current date.\n    ZoneId.of( &quot;Asia/Tokyo&quot; )   // Returns a `ZoneId` object.\n)                               // Returns a `LocalDate` object.\n.atStartOfDay(                  // Determines the first moment of the day as seen on that date in that time zone. Not all days start at 00:00!\n    ZoneId.of( &quot;Asia/Tokyo&quot; ) \n)                               // Returns a `ZonedDateTime` object.\n</code></pre>\n<h1>Start of day</h1>\n<p>Get the full length of the today as seen in a time zone.</p>\n<p>Using Half-Open approach, where the beginning is <em>inclusive</em> while the ending is <em>exclusive</em>. This approach solves the flaw in your code that fails to account for the very last second of the day.</p>\n<pre><code>ZoneId zoneId = ZoneId.of( &quot;Africa/Tunis&quot; ) ;\nLocalDate today = LocalDate.now( zoneId  ) ;\n\nZonedDateTime zdtStart = today.atStartOfDay( zoneId ) ;\nZonedDateTime zdtStop = today.plusDays( 1 ).atStartOfDay( zoneId ) ;\n</code></pre>\n<blockquote>\n<p>zdtStart.toString() = 2020-01-30T00:00+01:00[Africa/Tunis]</p>\n</blockquote>\n<blockquote>\n<p>zdtStop.toString() = 2020-01-31T00:00+01:00[Africa/Tunis]</p>\n</blockquote>\n<p>See the same moments in UTC.</p>\n<pre><code>Instant start = zdtStart.toInstant() ;\nInstant stop = zdtStop.toInstant() ;\n</code></pre>\n<blockquote>\n<p>start.toString() = 2020-01-29T23:00:00Z</p>\n</blockquote>\n<blockquote>\n<p>stop.toString() = 2020-01-30T23:00:00Z</p>\n</blockquote>\n<p>If you want the entire day of a date as seen in UTC rather than in a time zone, use <code>OffsetDateTime</code>.</p>\n<pre><code>LocalDate today = LocalDate.now( ZoneOffset.UTC  ) ;\n\nOffsetDateTime odtStart = today.atTime( OffsetTime.MIN ) ;\nOffsetDateTime odtStop = today.plusDays( 1 ).atTime( OffsetTime.MIN ) ;\n</code></pre>\n<blockquote>\n<p>odtStart.toString() = 2020-01-30T00:00+18:00</p>\n</blockquote>\n<blockquote>\n<p>odtStop.toString() = 2020-01-31T00:00+18:00</p>\n</blockquote>\n<p>These <code>OffsetDateTime </code> objects will already be in UTC, but you can call <code>toInstant</code> if you need such objects which are always in UTC by definition.</p>\n<pre><code>Instant start = odtStart.toInstant() ;\nInstant stop = odtStop.toInstant() ;\n</code></pre>\n<blockquote>\n<p>start.toString() = 2020-01-29T06:00:00Z</p>\n</blockquote>\n<blockquote>\n<p>stop.toString() = 2020-01-30T06:00:00Z</p>\n</blockquote>\n<p>Tip: You may be interested in adding the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"noreferrer\"><em>ThreeTen-Extra</em></a> library to your project to use its <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/Interval.html\" rel=\"noreferrer\"><code>Interval</code></a> class to represent this pair of <code>Instant</code> objects. This class offers useful methods for comparison such as <code>abuts</code>, <code>overlaps</code>, <code>contains</code>, and more.</p>\n<pre><code>Interval interval = Interval.of( start , stop ) ;\n</code></pre>\n<blockquote>\n<p>interval.toString() = 2020-01-29T06:00:00Z/2020-01-30T06:00:00Z</p>\n</blockquote>\n<h1>Half-Open</h1>\n<p>The <a href=\"https://stackoverflow.com/a/10308430/642706\">answer by mprivat</a> is correct. His point is to not try to obtain end of a day, but rather compare to &quot;before start of next day&quot;. His idea is known as the &quot;Half-Open&quot; approach where a span of time has a <strong>beginning that is inclusive</strong> while the <strong>ending is exclusive</strong>.</p>\n<ul>\n<li>The current date-time frameworks of Java (java.util.Date/Calendar and <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a>) both use milliseconds from the <a href=\"https://en.wikipedia.org/wiki/Epoch_%28reference_date%29\" rel=\"noreferrer\">epoch</a>. But in Java 8, the new JSR 310 java.time.* classes use nanoseconds resolution. Any code you wrote based on forcing the milliseconds count of last moment of day would be incorrect if switched to the new classes.</li>\n<li>Comparing data from other sources becomes faulty if they employ other resolutions. For example, Unix libraries typically employ whole seconds, and databases such as <a href=\"http://www.postgresql.org/docs/current/static/datatype-datetime.html\" rel=\"noreferrer\">Postgres</a> resolve date-time to microseconds.</li>\n<li>Some Daylight Saving Time changes happen over midnight which might further confuse things.</li>\n</ul>\n<p><img src=\"https://i.stack.imgur.com/kE3r8.png\" alt=\"enter image description here\" /></p>\n<p><a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a> 2.3 offers a method for this very purpose, to obtain first moment of the day: <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#withTimeAtStartOfDay()\" rel=\"noreferrer\"><code>withTimeAtStartOfDay()</code></a>. Similarly in java.time, <code>LocalDate::atStartOfDay</code>.</p>\n<p><a href=\"https://stackoverflow.com/search?q=joda+half-open\">Search StackOverflow for &quot;joda half-open&quot;</a> to see more discussion and examples.</p>\n<p>See this post, <a href=\"http://wrschneider.blogspot.com/2014/01/time-intervals-and-other-ranges-should.html\" rel=\"noreferrer\">Time intervals and other ranges should be half-open</a>, by Bill Schneider.</p>\n<h1>Avoid legacy date-time classes</h1>\n<p>The java.util.Date and .Calendar classes are notoriously troublesome. Avoid them.</p>\n<p>Use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> classes. The <em>java.time</em> framework is the official successor of the highly successful <a href=\"https://www.joda.org/joda-time/\" rel=\"noreferrer\"><em>Joda-Time</em></a> library.</p>\n<h1>java.time</h1>\n<p>The java.time framework is built into Java 8 and later. Back-ported to Java 6 &amp; 7 in the <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\">ThreeTen-Backport</a> project, further adapted to Android in the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\">ThreeTenABP</a> project.</p>\n<p>An <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"noreferrer\"><code>Instant</code></a> is a moment on the timeline in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">UTC</a> with a resolution of <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"noreferrer\">nanoseconds</a>.</p>\n<pre><code>Instant instant = Instant.now();\n</code></pre>\n<p>Apply a time zone to get the <a href=\"https://en.wikipedia.org/wiki/Wall-clock_time\" rel=\"noreferrer\">wall-clock time</a> for some locality.</p>\n<pre><code>ZoneId zoneId = ZoneId.of( &quot;America/Montreal&quot; );\nZonedDateTime zdt = ZonedDateTime.ofInstant( instant , zoneId );\n</code></pre>\n<p>To get the first moment of the day go through the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"noreferrer\"><code>LocalDate</code></a> class and its <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#atStartOfDay-java.time.ZoneId-\" rel=\"noreferrer\"><code>atStartOfDay</code></a> method.</p>\n<pre><code>ZonedDateTime zdtStart = zdt.toLocalDate().atStartOfDay( zoneId );\n</code></pre>\n<p>Using Half-Open approach, get first moment of following day.</p>\n<pre><code>ZonedDateTime zdtTomorrowStart = zdtStart.plusDays( 1 );\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/WyAl2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/WyAl2.png\" alt=\"Table of all date-time types in Java, both modern and legacy\" /></a></p>\n<p>Currently the java.time framework lacks an <code>Interval</code> class as described below for Joda-Time. However, the <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"noreferrer\">ThreeTen-Extra</a> project extends java.time with additional classes. This project is the proving ground for possible future additions to java.time. Among its classes is <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html\" rel=\"noreferrer\"><code>Interval</code></a>. Construct an <code>Interval</code> by passing a pair of <code>Instant</code> objects. We can extract an <code>Instant</code> from our <code>ZonedDateTime</code> objects.</p>\n<pre><code>Interval today = Interval.of( zdtStart.toInstant() , zdtTomorrowStart.toInstant() );\n</code></pre>\n<hr />\n<h1>About <em>java.time</em></h1>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> classes.</p>\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes. Hibernate 5 &amp; JPA 2.2 support <em>java.time</em>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java 9</strong></a> brought some minor features and fixes.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>Java SE 7</strong></a>\n<ul>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a>\n<ul>\n<li>Later versions of Android (26+) bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), a process known as <a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"noreferrer\"><em>API desugaring</em></a> brings a <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"noreferrer\">subset of the <em>java.time</em></a> functionality not originally built into Android.\n<ul>\n<li>If the desugaring does not offer what you need, the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><em><strong>ThreeTenABP</strong></em></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> (mentioned above) to Android. See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP…</em></a>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr />\n<h1>Joda-Time</h1>\n<p>UPDATE: The Joda-Time project is now in maintenance-mode, and advises migration to the <em>java.time</em> classes. I am leaving this section intact for history.</p>\n<p>Joda-Time has three classes to represent a span of time in various ways: <code>Interval</code>, <code>Period</code>, and <code>Duration</code>. An <code>Interval</code> has a specific beginning and ending on the timeline of the Universe. This fits our need to represent &quot;a day&quot;.</p>\n<p>We call the method <code>withTimeAtStartOfDay</code> rather than set time of day to zeros. Because of Daylight Saving Time and other anomalies the first moment of the day may not be <code>00:00:00</code>.</p>\n<p>Example code using Joda-Time 2.3.</p>\n<pre><code>DateTimeZone timeZone = DateTimeZone.forID( &quot;America/Montreal&quot; );\nDateTime now = DateTime.now( timeZone );\nDateTime todayStart = now.withTimeAtStartOfDay();\nDateTime tomorrowStart = now.plusDays( 1 ).withTimeAtStartOfDay();\nInterval today = new Interval( todayStart, tomorrowStart );\n</code></pre>\n<p>If you must, you can convert to a java.util.Date.</p>\n<pre><code>java.util.Date date = todayStart.toDate();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2248845,"reputation":7211,"user_id":1981559,"accept_rate":100,"display_name":"Przemek"},"down_vote_count":3,"up_vote_count":24,"is_accepted":false,"score":21,"last_activity_date":1461145659,"creation_date":1447958918,"answer_id":33812041,"question_id":10308356,"body_markdown":"# java.time\r\n\r\nUsing `java.time` framework built into Java 8.\r\n\r\n    import java.time.LocalTime;\r\n    import java.time.LocalDateTime;\r\n\r\n    LocalDateTime now = LocalDateTime.now(); // 2015-11-19T19:42:19.224\r\n    // start of a day\r\n    now.with(LocalTime.MIN); // 2015-11-19T00:00\r\n    now.with(LocalTime.MIDNIGHT); // 2015-11-19T00:00\r\n    // end of a day\r\n    now.with(LocalTime.MAX); // 2015-11-19T23:59:59.999999999","title":"How to obtain the start time and end time of a day?","body":"<h1>java.time</h1>\n\n<p>Using <code>java.time</code> framework built into Java 8.</p>\n\n<pre><code>import java.time.LocalTime;\nimport java.time.LocalDateTime;\n\nLocalDateTime now = LocalDateTime.now(); // 2015-11-19T19:42:19.224\n// start of a day\nnow.with(LocalTime.MIN); // 2015-11-19T00:00\nnow.with(LocalTime.MIDNIGHT); // 2015-11-19T00:00\n// end of a day\nnow.with(LocalTime.MAX); // 2015-11-19T23:59:59.999999999\n</code></pre>\n"},{"tags":[],"owner":{"account_id":233512,"reputation":1264,"user_id":499059,"accept_rate":33,"display_name":"jack jin"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1480140432,"creation_date":1480140432,"answer_id":40815506,"question_id":10308356,"body_markdown":"    public static Date beginOfDay(Date date) {\r\n        Calendar cal = Calendar.getInstance();\r\n        cal.setTime(date);\r\n        cal.set(Calendar.HOUR_OF_DAY, 0);\r\n        cal.set(Calendar.MINUTE, 0);\r\n        cal.set(Calendar.SECOND, 0);\r\n        cal.set(Calendar.MILLISECOND, 0);\r\n        \r\n        return cal.getTime();\r\n\t}\r\n\r\n\tpublic static Date endOfDay(Date date) {\r\n        Calendar cal = Calendar.getInstance();\r\n        cal.setTime(date);\r\n        cal.set(Calendar.HOUR_OF_DAY, 23);\r\n        cal.set(Calendar.MINUTE, 59);\r\n        cal.set(Calendar.SECOND, 59);\r\n        cal.set(Calendar.MILLISECOND, 999);\r\n        \r\n        return cal.getTime();\r\n\t}","title":"How to obtain the start time and end time of a day?","body":"<pre><code>public static Date beginOfDay(Date date) {\n    Calendar cal = Calendar.getInstance();\n    cal.setTime(date);\n    cal.set(Calendar.HOUR_OF_DAY, 0);\n    cal.set(Calendar.MINUTE, 0);\n    cal.set(Calendar.SECOND, 0);\n    cal.set(Calendar.MILLISECOND, 0);\n\n    return cal.getTime();\n}\n\npublic static Date endOfDay(Date date) {\n    Calendar cal = Calendar.getInstance();\n    cal.setTime(date);\n    cal.set(Calendar.HOUR_OF_DAY, 23);\n    cal.set(Calendar.MINUTE, 59);\n    cal.set(Calendar.SECOND, 59);\n    cal.set(Calendar.MILLISECOND, 999);\n\n    return cal.getTime();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":53471,"reputation":5683,"user_id":159837,"accept_rate":75,"display_name":"Fırat K&#252;&#231;&#252;k"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500277007,"creation_date":1500049438,"answer_id":45107643,"question_id":10308356,"body_markdown":"For java 8 the following single line statements are working. In this example I use UTC timezone. Please consider to change TimeZone that you currently used.\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    System.out.println(new Date());\r\n\r\n    final LocalDateTime endOfDay       = LocalDateTime.of(LocalDate.now(), LocalTime.MAX);\r\n    final Date          endOfDayAsDate = Date.from(endOfDay.toInstant(ZoneOffset.UTC));\r\n\r\n    System.out.println(endOfDayAsDate);\r\n\r\n    final LocalDateTime startOfDay       = LocalDateTime.of(LocalDate.now(), LocalTime.MIN);\r\n    final Date          startOfDayAsDate = Date.from(startOfDay.toInstant(ZoneOffset.UTC));\r\n\r\n    System.out.println(startOfDayAsDate);\r\n\r\nIf no time difference with output. Try: `ZoneOffset.ofHours(0)`","title":"How to obtain the start time and end time of a day?","body":"<p>For java 8 the following single line statements are working. In this example I use UTC timezone. Please consider to change TimeZone that you currently used.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>System.out.println(new Date());\n\nfinal LocalDateTime endOfDay       = LocalDateTime.of(LocalDate.now(), LocalTime.MAX);\nfinal Date          endOfDayAsDate = Date.from(endOfDay.toInstant(ZoneOffset.UTC));\n\nSystem.out.println(endOfDayAsDate);\n\nfinal LocalDateTime startOfDay       = LocalDateTime.of(LocalDate.now(), LocalTime.MIN);\nfinal Date          startOfDayAsDate = Date.from(startOfDay.toInstant(ZoneOffset.UTC));\n\nSystem.out.println(startOfDayAsDate);\n</code></pre>\n\n<p>If no time difference with output. Try: <code>ZoneOffset.ofHours(0)</code></p>\n"},{"tags":[],"owner":{"account_id":2016446,"reputation":508,"user_id":1803648,"accept_rate":54,"display_name":"laur"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1501692319,"creation_date":1501692319,"answer_id":45466580,"question_id":10308356,"body_markdown":"Additional way of finding start of day with java8 java.time.ZonedDateTime instead of going through `LocalDateTime` is simply truncating the input ZonedDateTime to DAYS:\r\n\r\n    zonedDateTimeInstance.truncatedTo( ChronoUnit.DAYS );","title":"How to obtain the start time and end time of a day?","body":"<p>Additional way of finding start of day with java8 java.time.ZonedDateTime instead of going through <code>LocalDateTime</code> is simply truncating the input ZonedDateTime to DAYS:</p>\n\n<pre><code>zonedDateTimeInstance.truncatedTo( ChronoUnit.DAYS );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4148905,"reputation":394,"user_id":3401913,"display_name":"Alexander Chingarev"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1517409069,"creation_date":1517409069,"answer_id":48544603,"question_id":10308356,"body_markdown":"Another one solution which does not depend on any framework is:\r\n\r\n    static public Date getStartOfADay(Date day) {\r\n        final long oneDayInMillis = 24 * 60 * 60 * 1000;\r\n        return new Date(day.getTime() / oneDayInMillis * oneDayInMillis);\r\n    }\r\n\r\n    static public Date getEndOfADay(Date day) {\r\n        final long oneDayInMillis = 24 * 60 * 60 * 1000;\r\n        return new Date((day.getTime() / oneDayInMillis + 1) * oneDayInMillis - 1);\r\n    }\r\n\r\nNote that it returns UTC based time\r\n","title":"How to obtain the start time and end time of a day?","body":"<p>Another one solution which does not depend on any framework is:</p>\n\n<pre><code>static public Date getStartOfADay(Date day) {\n    final long oneDayInMillis = 24 * 60 * 60 * 1000;\n    return new Date(day.getTime() / oneDayInMillis * oneDayInMillis);\n}\n\nstatic public Date getEndOfADay(Date day) {\n    final long oneDayInMillis = 24 * 60 * 60 * 1000;\n    return new Date((day.getTime() / oneDayInMillis + 1) * oneDayInMillis - 1);\n}\n</code></pre>\n\n<p>Note that it returns UTC based time</p>\n"},{"tags":[],"owner":{"account_id":1825287,"reputation":21566,"user_id":1658268,"accept_rate":72,"display_name":"SudoPlz"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1683206526,"creation_date":1526590290,"answer_id":50400321,"question_id":10308356,"body_markdown":"#Java 8 or ThreeTenABP\r\n\r\n\r\n\r\n###ZonedDateTime\r\n\r\n\r\n    ZonedDateTime curDate = ZonedDateTime.now();\r\n\r\n    public ZonedDateTime startOfDay() {\r\n        return curDate\r\n        .toLocalDate()\r\n        .atStartOfDay()\r\n        .atZone(curDate.getZone())\r\n        .withEarlierOffsetAtOverlap();\r\n    }\r\n\r\n    public ZonedDateTime endOfDay() {\r\n\r\n        ZonedDateTime startOfTomorrow =\r\n            curDate\r\n            .toLocalDate()\r\n            .plusDays(1)\r\n            .atStartOfDay()\r\n            .atZone(curDate.getZone())\r\n            .withEarlierOffsetAtOverlap();\r\n\r\n        return startOfTomorrow.minusSeconds(1);\r\n    }\r\n\r\n    // based on https://stackoverflow.com/a/29145886/1658268\r\n\r\n###LocalDateTime\r\n\r\n\r\n    LocalDateTime curDate = LocalDateTime.now();\r\n\r\n    public LocalDateTime startOfDay() {\r\n        return curDate.atStartOfDay();\r\n    }\r\n\r\n    public LocalDateTime endOfDay() {\r\n        return curDate.atTime(LocalTime.MAX);  //23:59:59.999999999;\r\n    }\r\n\r\n    // based on https://stackoverflow.com/a/36408726/1658268\r\n\r\n\r\nI hope that helps someone.","title":"How to obtain the start time and end time of a day?","body":"<p>#Java 8 or ThreeTenABP</p>\n<p>###ZonedDateTime</p>\n<pre><code>ZonedDateTime curDate = ZonedDateTime.now();\n\npublic ZonedDateTime startOfDay() {\n    return curDate\n    .toLocalDate()\n    .atStartOfDay()\n    .atZone(curDate.getZone())\n    .withEarlierOffsetAtOverlap();\n}\n\npublic ZonedDateTime endOfDay() {\n\n    ZonedDateTime startOfTomorrow =\n        curDate\n        .toLocalDate()\n        .plusDays(1)\n        .atStartOfDay()\n        .atZone(curDate.getZone())\n        .withEarlierOffsetAtOverlap();\n\n    return startOfTomorrow.minusSeconds(1);\n}\n\n// based on https://stackoverflow.com/a/29145886/1658268\n</code></pre>\n<p>###LocalDateTime</p>\n<pre><code>LocalDateTime curDate = LocalDateTime.now();\n\npublic LocalDateTime startOfDay() {\n    return curDate.atStartOfDay();\n}\n\npublic LocalDateTime endOfDay() {\n    return curDate.atTime(LocalTime.MAX);  //23:59:59.999999999;\n}\n\n// based on https://stackoverflow.com/a/36408726/1658268\n</code></pre>\n<p>I hope that helps someone.</p>\n"},{"tags":[],"owner":{"account_id":13246682,"reputation":61,"user_id":9565586,"display_name":"Siddhey Sankhe"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1534576233,"creation_date":1533018650,"answer_id":51606759,"question_id":10308356,"body_markdown":"I tried this code and it works well!\r\n\r\n    final ZonedDateTime now = ZonedDateTime.now(ZoneOffset.UTC);\r\n    final ZonedDateTime startofDay =\r\n        now.toLocalDate().atStartOfDay(ZoneOffset.UTC);\r\n    final ZonedDateTime endOfDay =\r\n        now.toLocalDate().atTime(LocalTime.MAX).atZone(ZoneOffset.UTC);\r\n\r\n   ","title":"How to obtain the start time and end time of a day?","body":"<p>I tried this code and it works well!</p>\n\n<pre><code>final ZonedDateTime now = ZonedDateTime.now(ZoneOffset.UTC);\nfinal ZonedDateTime startofDay =\n    now.toLocalDate().atStartOfDay(ZoneOffset.UTC);\nfinal ZonedDateTime endOfDay =\n    now.toLocalDate().atTime(LocalTime.MAX).atZone(ZoneOffset.UTC);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4970483,"reputation":21,"user_id":3998453,"display_name":"Florin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1567195183,"creation_date":1567195183,"answer_id":57732611,"question_id":10308356,"body_markdown":"I know it&#39;s a bit late, but in case of Java 8, if you are using OffsetDateTime (which offers a lot of advantages, such as TimeZone, Nanoseconds, etc.), you can use the following code:\r\n\r\n    OffsetDateTime reallyEndOfDay = someDay.withHour(23).withMinute(59).withSecond(59).withNano(999999999);\r\n    // output: 2019-01-10T23:59:59.999999999Z\r\n\r\n","title":"How to obtain the start time and end time of a day?","body":"<p>I know it's a bit late, but in case of Java 8, if you are using OffsetDateTime (which offers a lot of advantages, such as TimeZone, Nanoseconds, etc.), you can use the following code:</p>\n\n<pre><code>OffsetDateTime reallyEndOfDay = someDay.withHour(23).withMinute(59).withSecond(59).withNano(999999999);\n// output: 2019-01-10T23:59:59.999999999Z\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7184343,"reputation":850,"user_id":5486945,"display_name":"yOshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580398865,"creation_date":1580398865,"answer_id":59989560,"question_id":10308356,"body_markdown":"I had several inconveniences with all the solutions because I needed the type of **Instant** variable and the Time Zone always interfered changing everything, then combining solutions I saw that this is a good option.\r\n\r\n    \r\n            LocalDate today = LocalDate.now();\r\n            Instant startDate = Instant.parse(today.toString()+&quot;T00:00:00Z&quot;);\r\n            Instant endDate = Instant.parse(today.toString()+&quot;T23:59:59Z&quot;);\r\n\r\nand we have as a result\r\n\r\n            startDate = 2020-01-30T00:00:00Z\r\n            endDate = 2020-01-30T23:59:59Z\r\n\r\nI hope it helps you","title":"How to obtain the start time and end time of a day?","body":"<p>I had several inconveniences with all the solutions because I needed the type of <strong>Instant</strong> variable and the Time Zone always interfered changing everything, then combining solutions I saw that this is a good option.</p>\n\n<pre><code>        LocalDate today = LocalDate.now();\n        Instant startDate = Instant.parse(today.toString()+\"T00:00:00Z\");\n        Instant endDate = Instant.parse(today.toString()+\"T23:59:59Z\");\n</code></pre>\n\n<p>and we have as a result</p>\n\n<pre><code>        startDate = 2020-01-30T00:00:00Z\n        endDate = 2020-01-30T23:59:59Z\n</code></pre>\n\n<p>I hope it helps you</p>\n"},{"tags":[],"owner":{"account_id":8899931,"reputation":39,"user_id":10138519,"display_name":"manik venkat"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1580463311,"creation_date":1580463311,"answer_id":60001245,"question_id":10308356,"body_markdown":"    private Date getStartOfDay(Date date) {\r\n        Calendar calendar = Calendar.getInstance();\r\n        int year = calendar.get(Calendar.YEAR);\r\n        int month = calendar.get(Calendar.MONTH);\r\n        int day = calendar.get(Calendar.DATE);\r\n        calendar.setTimeInMillis(0);\r\n        calendar.set(year, month, day, 0, 0, 0);\r\n        return calendar.getTime();\r\n        }\r\n    \r\n    private Date getEndOfDay(Date date) {\r\n        Calendar calendar = Calendar.getInstance();\r\n        int year = calendar.get(Calendar.YEAR);\r\n        int month = calendar.get(Calendar.MONTH);\r\n        int day = calendar.get(Calendar.DATE);\r\n        calendar.setTimeInMillis(0);\r\n        calendar.set(year, month, day, 23, 59, 59);\r\n        return calendar.getTime();\r\n        }\r\n\r\n**calendar.setTimeInMillis(0);** gives you accuracy upto milliseconds","title":"How to obtain the start time and end time of a day?","body":"<pre><code>private Date getStartOfDay(Date date) {\n    Calendar calendar = Calendar.getInstance();\n    int year = calendar.get(Calendar.YEAR);\n    int month = calendar.get(Calendar.MONTH);\n    int day = calendar.get(Calendar.DATE);\n    calendar.setTimeInMillis(0);\n    calendar.set(year, month, day, 0, 0, 0);\n    return calendar.getTime();\n    }\n\nprivate Date getEndOfDay(Date date) {\n    Calendar calendar = Calendar.getInstance();\n    int year = calendar.get(Calendar.YEAR);\n    int month = calendar.get(Calendar.MONTH);\n    int day = calendar.get(Calendar.DATE);\n    calendar.setTimeInMillis(0);\n    calendar.set(year, month, day, 23, 59, 59);\n    return calendar.getTime();\n    }\n</code></pre>\n\n<p><strong>calendar.setTimeInMillis(0);</strong> gives you accuracy upto milliseconds</p>\n"},{"tags":[],"owner":{"account_id":3698895,"reputation":279,"user_id":3079309,"accept_rate":100,"display_name":"happyvirus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585219651,"creation_date":1585219651,"answer_id":60865514,"question_id":10308356,"body_markdown":"I think the easiest would be something like:\r\n\r\n    // Joda Time\r\n    \r\n    DateTime dateTime=new DateTime(); \r\n    \r\n    StartOfDayMillis = dateTime.withMillis(System.currentTimeMillis()).withTimeAtStartOfDay().getMillis();\r\n    EndOfDayMillis = dateTime.withMillis(StartOfDayMillis).plusDays(1).minusSeconds(1).getMillis();\r\n\r\nThese millis can be then converted into Calendar,Instant or LocalDate as per your requirement with Joda Time.\r\n\r\n","title":"How to obtain the start time and end time of a day?","body":"<p>I think the easiest would be something like:</p>\n\n<pre><code>// Joda Time\n\nDateTime dateTime=new DateTime(); \n\nStartOfDayMillis = dateTime.withMillis(System.currentTimeMillis()).withTimeAtStartOfDay().getMillis();\nEndOfDayMillis = dateTime.withMillis(StartOfDayMillis).plusDays(1).minusSeconds(1).getMillis();\n</code></pre>\n\n<p>These millis can be then converted into Calendar,Instant or LocalDate as per your requirement with Joda Time.</p>\n"},{"tags":[],"owner":{"account_id":18061748,"reputation":11,"user_id":13128710,"display_name":"Jessica Long"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612018534,"creation_date":1612018534,"answer_id":65969397,"question_id":10308356,"body_markdown":"The following code takes the OP&#39;s original formula, and adjusts for the ms inexactness:\r\n\r\n```\r\n    private static Date getStartOfDay() {\r\n        Calendar calendar = Calendar.getInstance();\r\n        int year = calendar.get(Calendar.YEAR);\r\n        int month = calendar.get(Calendar.MONTH);\r\n        int day = calendar.get(Calendar.DATE);\r\n        calendar.set(year, month, day, 0, 0, 0);\r\n        long approximateTimestamp = calendar.getTime().getTime();\r\n        long extraMillis = (approximateTimestamp % 1000);\r\n        long exactTimestamp = approximateTimestamp - extraMillis;\r\n        return new Date(exactTimestamp);\r\n    }\r\n\r\n    private static Date getEndOfDay() {\r\n        Calendar calendar = Calendar.getInstance();\r\n        int year = calendar.get(Calendar.YEAR);\r\n        int month = calendar.get(Calendar.MONTH);\r\n        int day = calendar.get(Calendar.DATE);\r\n        calendar.set(year, month, day, 23, 59, 59);\r\n        long approximateTimestamp = calendar.getTime().getTime();\r\n        long extraMillis = (approximateTimestamp % 1000);\r\n        long exactTimestamp = approximateTimestamp - extraMillis + 999;\r\n        return new Date(exactTimestamp);\r\n    }\r\n```\r\n\r\nUnlike many other answers on this thread, it is compatible with older versions of Java and Android APIs.","title":"How to obtain the start time and end time of a day?","body":"<p>The following code takes the OP's original formula, and adjusts for the ms inexactness:</p>\n<pre><code>    private static Date getStartOfDay() {\n        Calendar calendar = Calendar.getInstance();\n        int year = calendar.get(Calendar.YEAR);\n        int month = calendar.get(Calendar.MONTH);\n        int day = calendar.get(Calendar.DATE);\n        calendar.set(year, month, day, 0, 0, 0);\n        long approximateTimestamp = calendar.getTime().getTime();\n        long extraMillis = (approximateTimestamp % 1000);\n        long exactTimestamp = approximateTimestamp - extraMillis;\n        return new Date(exactTimestamp);\n    }\n\n    private static Date getEndOfDay() {\n        Calendar calendar = Calendar.getInstance();\n        int year = calendar.get(Calendar.YEAR);\n        int month = calendar.get(Calendar.MONTH);\n        int day = calendar.get(Calendar.DATE);\n        calendar.set(year, month, day, 23, 59, 59);\n        long approximateTimestamp = calendar.getTime().getTime();\n        long extraMillis = (approximateTimestamp % 1000);\n        long exactTimestamp = approximateTimestamp - extraMillis + 999;\n        return new Date(exactTimestamp);\n    }\n</code></pre>\n<p>Unlike many other answers on this thread, it is compatible with older versions of Java and Android APIs.</p>\n"},{"tags":[],"owner":{"account_id":19306875,"reputation":27,"user_id":14113500,"display_name":"Captain K"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1614381078,"creation_date":1614359761,"answer_id":66390149,"question_id":10308356,"body_markdown":"Shortest answer, given your timezone being `TZ`:\r\n\r\n    LocalDateTime start = LocalDate.now(TZ).atStartOfDay()\r\n    LocalDateTime end = start.plusDays(1)\r\n\r\nCompare using `isAfter()` and `isBefore()` methods, or convert it using `toEpochSecond()` or `toInstant()` methods.","title":"How to obtain the start time and end time of a day?","body":"<p>Shortest answer, given your timezone being <code>TZ</code>:</p>\n<pre><code>LocalDateTime start = LocalDate.now(TZ).atStartOfDay()\nLocalDateTime end = start.plusDays(1)\n</code></pre>\n<p>Compare using <code>isAfter()</code> and <code>isBefore()</code> methods, or convert it using <code>toEpochSecond()</code> or <code>toInstant()</code> methods.</p>\n"},{"tags":[],"owner":{"account_id":6467614,"reputation":300,"user_id":6191695,"display_name":"Sahi Repswal"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1631705440,"creation_date":1631705440,"answer_id":69192291,"question_id":10308356,"body_markdown":"    Date date = new Date();\r\n    LocalDateTime localDateTime = LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());\r\n    LocalDateTime startOfDay = localDateTime.with(LocalTime.MIN);\r\n    LocalDateTime endOfDay = localDateTime.with(LocalTime.MAX);\r\n\r\nTimestamp:\r\n\r\n    Timestamp startTs = Timestamp.valueOf(startOfDay);\r\n    Timestamp endTs = Timestamp.valueOf(endOfDay);","title":"How to obtain the start time and end time of a day?","body":"<pre><code>Date date = new Date();\nLocalDateTime localDateTime = LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());\nLocalDateTime startOfDay = localDateTime.with(LocalTime.MIN);\nLocalDateTime endOfDay = localDateTime.with(LocalTime.MAX);\n</code></pre>\n<p>Timestamp:</p>\n<pre><code>Timestamp startTs = Timestamp.valueOf(startOfDay);\nTimestamp endTs = Timestamp.valueOf(endOfDay);\n</code></pre>\n"}],"owner":{"account_id":243408,"reputation":1810,"user_id":515561,"display_name":"kalman03"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303671,"favorite_count":0,"down_vote_count":0,"up_vote_count":174,"accepted_answer_id":20536041,"answer_count":17,"score":174,"last_activity_date":1683206526,"creation_date":1335318780,"question_id":10308356,"body_markdown":"How to obtain the start time and end time of a day?\r\n\r\ncode like this is not accurate:\r\n\r\n     private Date getStartOfDay(Date date) {\r\n\t\tCalendar calendar = Calendar.getInstance();\r\n\t\tint year = calendar.get(Calendar.YEAR);\r\n\t\tint month = calendar.get(Calendar.MONTH);\r\n\t\tint day = calendar.get(Calendar.DATE);\r\n\t\tcalendar.set(year, month, day, 0, 0, 0);\r\n\t\treturn calendar.getTime();\r\n\t}\r\n\r\n\tprivate Date getEndOfDay(Date date) {\r\n\t\tCalendar calendar = Calendar.getInstance();\r\n\t\tint year = calendar.get(Calendar.YEAR);\r\n\t\tint month = calendar.get(Calendar.MONTH);\r\n\t\tint day = calendar.get(Calendar.DATE);\r\n\t\tcalendar.set(year, month, day, 23, 59, 59);\r\n\t\treturn calendar.getTime();\r\n\t}\r\n\r\nIt is not accurate to the millisecond.\r\n","title":"How to obtain the start time and end time of a day?","body":"<p>How to obtain the start time and end time of a day?</p>\n\n<p>code like this is not accurate:</p>\n\n<pre><code> private Date getStartOfDay(Date date) {\n    Calendar calendar = Calendar.getInstance();\n    int year = calendar.get(Calendar.YEAR);\n    int month = calendar.get(Calendar.MONTH);\n    int day = calendar.get(Calendar.DATE);\n    calendar.set(year, month, day, 0, 0, 0);\n    return calendar.getTime();\n}\n\nprivate Date getEndOfDay(Date date) {\n    Calendar calendar = Calendar.getInstance();\n    int year = calendar.get(Calendar.YEAR);\n    int month = calendar.get(Calendar.MONTH);\n    int day = calendar.get(Calendar.DATE);\n    calendar.set(year, month, day, 23, 59, 59);\n    return calendar.getTime();\n}\n</code></pre>\n\n<p>It is not accurate to the millisecond.</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux","spring-data-mongodb-reactive"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1683206931,"post_id":76173465,"comment_id":134333551,"body_markdown":"I guess you need only one EnableReactiveMongoRepositories annotation.","body":"I guess you need only one EnableReactiveMongoRepositories annotation."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1683207269,"post_id":76173465,"comment_id":134333655,"body_markdown":"..trick (assuming/preserving the same model): you have to separate repository *packages* [1](https://www.baeldung.com/mongodb-multiple-databases-spring-data), [2](https://hasangalakdinu.medium.com/how-to-connect-multiple-mongo-db-databases-with-spring-boot-239cb464a114), ...","body":"..trick (assuming/preserving the same model): you have to separate repository <i>packages</i> <a href=\"https://www.baeldung.com/mongodb-multiple-databases-spring-data\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://hasangalakdinu.medium.com/how-to-connect-multiple-mongo-db-databases-with-spring-boot-239cb464a114\" rel=\"nofollow noreferrer\">2</a>, ..."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683207400,"post_id":76173465,"comment_id":134333692,"body_markdown":"... or: deactivate auto configuration &amp; wire manually :) https://frandorado.github.io/spring/2020/12/14/spring-multiple-mongo-database.html","body":"... or: deactivate auto configuration &amp; wire manually :) <a href=\"https://frandorado.github.io/spring/2020/12/14/spring-multiple-mongo-database.html\" rel=\"nofollow noreferrer\">frandorado.github.io/spring/2020/12/14/&hellip;</a>"}],"owner":{"account_id":1705601,"reputation":547,"user_id":1564698,"accept_rate":82,"display_name":"Shourya Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683205640,"creation_date":1683204969,"question_id":76173465,"body_markdown":"I need to configure 2 MongoDB databases with my Spring Boot v3.0.5 application.\r\n\r\nI have made 2 MongoDB configurations as follows:\r\n\r\n**RemindersConfig.java**\r\n\r\n    @Configuration\r\n    @EnableReactiveMongoRepositories(basePackages = &quot;com.shourya.learn.repository&quot;)\r\n    public class RemindersConfig extends AbstractReactiveMongoConfiguration {\r\n        @Value(&quot;${mongodb.reminders.database}&quot;)\r\n        private String database;\r\n    \r\n        @Bean(name = &quot;reminders&quot;)\r\n        public MongoClient mongoClient() {\r\n            String uri = &quot;mongodb://localhost:27017/&quot; + database;\r\n            return MongoClients.create(uri);\r\n        }\r\n    \r\n        @Override\r\n        protected String getDatabaseName() {\r\n            return database;\r\n        }\r\n    }\r\n\r\n**NotificationsConfig.java**\r\n\r\n    @Configuration\r\n    @EnableReactiveMongoRepositories(basePackages = &quot;com.shourya.learn.repository&quot;)\r\n    public class NotificationsConfig extends AbstractReactiveMongoConfiguration {\r\n        @Value(&quot;${mongodb.notifications.database}&quot;)\r\n        private String database;\r\n    \r\n        @Bean(name = &quot;notifications&quot;)\r\n        public MongoClient mongoClient() {\r\n            String uri = &quot;mongodb://localhost:27017/&quot; + database;\r\n            return MongoClients.create(uri);\r\n        }\r\n    \r\n        @Override\r\n        protected String getDatabaseName() {\r\n            return database;\r\n        }\r\n    }\r\n\r\nRepositories:\r\n\r\n**NotificationRepository.java**\r\n\r\n    @Repository\r\n    public interface NotificationRepository extends ReactiveMongoRepository&lt;NotificationModel, String&gt; {\r\n    }\r\n\r\n**ReminderRepository.java**\r\n\r\n    @Repository(&quot;reminderRepository&quot;)\r\n    public interface ReminderRepository extends ReactiveMongoRepository&lt;ReminderModel, String&gt; {\r\n    }\r\n\r\nThey run fine individually but when run together they give the following error:\r\n\r\n&gt; **Description:**\r\n&gt; \r\n&gt; The bean &#39;reminderRepository&#39;, defined in\r\n&gt; com.shourya.learn.repository.ReminderRepository defined in\r\n&gt; @EnableReactiveMongoRepositories declared on RemindersConfig, could\r\n&gt; not be registered. A bean with that name has already been defined in\r\n&gt; com.shourya.learn.repository.ReminderRepository defined in\r\n&gt; @EnableReactiveMongoRepositories declared on NotificationsConfig and\r\n&gt; overriding is disabled.\r\n&gt; \r\n&gt; **Action:**\r\n&gt; \r\n&gt; Consider renaming one of the beans or enabling overriding by setting\r\n&gt; spring.main.allow-bean-definition-overriding=true","title":"Multiple Database Configurations in Spring Boot","body":"<p>I need to configure 2 MongoDB databases with my Spring Boot v3.0.5 application.</p>\n<p>I have made 2 MongoDB configurations as follows:</p>\n<p><strong>RemindersConfig.java</strong></p>\n<pre><code>@Configuration\n@EnableReactiveMongoRepositories(basePackages = &quot;com.shourya.learn.repository&quot;)\npublic class RemindersConfig extends AbstractReactiveMongoConfiguration {\n    @Value(&quot;${mongodb.reminders.database}&quot;)\n    private String database;\n\n    @Bean(name = &quot;reminders&quot;)\n    public MongoClient mongoClient() {\n        String uri = &quot;mongodb://localhost:27017/&quot; + database;\n        return MongoClients.create(uri);\n    }\n\n    @Override\n    protected String getDatabaseName() {\n        return database;\n    }\n}\n</code></pre>\n<p><strong>NotificationsConfig.java</strong></p>\n<pre><code>@Configuration\n@EnableReactiveMongoRepositories(basePackages = &quot;com.shourya.learn.repository&quot;)\npublic class NotificationsConfig extends AbstractReactiveMongoConfiguration {\n    @Value(&quot;${mongodb.notifications.database}&quot;)\n    private String database;\n\n    @Bean(name = &quot;notifications&quot;)\n    public MongoClient mongoClient() {\n        String uri = &quot;mongodb://localhost:27017/&quot; + database;\n        return MongoClients.create(uri);\n    }\n\n    @Override\n    protected String getDatabaseName() {\n        return database;\n    }\n}\n</code></pre>\n<p>Repositories:</p>\n<p><strong>NotificationRepository.java</strong></p>\n<pre><code>@Repository\npublic interface NotificationRepository extends ReactiveMongoRepository&lt;NotificationModel, String&gt; {\n}\n</code></pre>\n<p><strong>ReminderRepository.java</strong></p>\n<pre><code>@Repository(&quot;reminderRepository&quot;)\npublic interface ReminderRepository extends ReactiveMongoRepository&lt;ReminderModel, String&gt; {\n}\n</code></pre>\n<p>They run fine individually but when run together they give the following error:</p>\n<blockquote>\n<p><strong>Description:</strong></p>\n<p>The bean 'reminderRepository', defined in\ncom.shourya.learn.repository.ReminderRepository defined in\n@EnableReactiveMongoRepositories declared on RemindersConfig, could\nnot be registered. A bean with that name has already been defined in\ncom.shourya.learn.repository.ReminderRepository defined in\n@EnableReactiveMongoRepositories declared on NotificationsConfig and\noverriding is disabled.</p>\n<p><strong>Action:</strong></p>\n<p>Consider renaming one of the beans or enabling overriding by setting\nspring.main.allow-bean-definition-overriding=true</p>\n</blockquote>\n"},{"tags":["java","uuid"],"comments":[{"owner":{"display_name":"user972946"},"score":13,"creation_date":1389181688,"post_id":20994768,"comment_id":31548526,"body_markdown":"A &quot;shorter UUID&quot; is no longer a UUID, by the way.","body":"A &quot;shorter UUID&quot; is no longer a UUID, by the way."},{"owner":{"account_id":793,"reputation":24042,"user_id":1035,"accept_rate":92,"display_name":"GaryF"},"score":0,"creation_date":1389181734,"post_id":20994768,"comment_id":31548554,"body_markdown":"possible duplicate of [generating UUID but only for 8 characters](http://stackoverflow.com/questions/4267475/generating-uuid-but-only-for-8-characters)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/4267475/generating-uuid-but-only-for-8-characters\">generating UUID but only for 8 characters</a>"},{"owner":{"account_id":401940,"reputation":13996,"user_id":768795,"display_name":"Thomas W"},"score":1,"creation_date":1598505926,"post_id":20994768,"comment_id":112481821,"body_markdown":"The avoidance of Hash or UUID collisions is proportional to the size the value space and the square of the number of elements. Decreasing to 16 random hex characters would most likely lose a UUID&#39;s effective guarantee of uniqueness.","body":"The avoidance of Hash or UUID collisions is proportional to the size the value space and the square of the number of elements. Decreasing to 16 random hex characters would most likely lose a UUID&#39;s effective guarantee of uniqueness."}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1389182615,"creation_date":1389182615,"answer_id":20995129,"question_id":20994768,"body_markdown":"If you don&#39;t need it to be unique, you can use any length you like.\r\n\r\nFor example, you can do this.\r\n\r\n    Random rand = new Random();\r\n    char[] chars = new char[16];\r\n    for(int i=0;i&lt;chars.length;i++) {\r\n        chars[i] = (char) rand.nextInt(65536);\r\n        if (!Character.isValidCodePoint(chars[i]))\r\n            i--;\r\n    }\r\n    String s = new String(chars);\r\n\r\nThis will give you almost the same degree of randomness but will use every possible character between `\\u0000` and `\\ufffd`\r\n\r\nIf you need printable ASCII characters you can make it as short as you like but the likelihood of uniqueness drops significantly. What can do is use base 36 instead of base 16\r\n\r\n    UUID uuid = UUID.randomUUID();\r\n    String s = Long.toString(uuid.getMostSignificantBits(), 36) + &#39;-&#39; + Long.toString(uuid.getLeastSignificantBits(), 36);\r\n\r\nThis will 26 characters on average, at most 27 character.\r\n\r\nYou can use base64 encoding and reduce it to 22 characters.\r\n\r\nIf you use base94 you can get it does to 20 characters.\r\n\r\nIf you use the whole range of valid chars fro \\u0000 to \\ufffd you can reduce it to just 9 characters or 17 bytes.\r\n\r\nIf you don&#39;t care about Strings you can use 16, 8-bit bytes.\r\n\r\n","title":"how to reduce length of UUID generated using randomUUID( )","body":"<p>If you don't need it to be unique, you can use any length you like.</p>\n\n<p>For example, you can do this.</p>\n\n<pre><code>Random rand = new Random();\nchar[] chars = new char[16];\nfor(int i=0;i&lt;chars.length;i++) {\n    chars[i] = (char) rand.nextInt(65536);\n    if (!Character.isValidCodePoint(chars[i]))\n        i--;\n}\nString s = new String(chars);\n</code></pre>\n\n<p>This will give you almost the same degree of randomness but will use every possible character between <code>\\u0000</code> and <code>\\ufffd</code></p>\n\n<p>If you need printable ASCII characters you can make it as short as you like but the likelihood of uniqueness drops significantly. What can do is use base 36 instead of base 16</p>\n\n<pre><code>UUID uuid = UUID.randomUUID();\nString s = Long.toString(uuid.getMostSignificantBits(), 36) + '-' + Long.toString(uuid.getLeastSignificantBits(), 36);\n</code></pre>\n\n<p>This will 26 characters on average, at most 27 character.</p>\n\n<p>You can use base64 encoding and reduce it to 22 characters.</p>\n\n<p>If you use base94 you can get it does to 20 characters.</p>\n\n<p>If you use the whole range of valid chars fro \\u0000 to \\ufffd you can reduce it to just 9 characters or 17 bytes.</p>\n\n<p>If you don't care about Strings you can use 16, 8-bit bytes.</p>\n"},{"tags":[],"owner":{"account_id":10459485,"reputation":39,"user_id":7710717,"display_name":"Pritam Panja"},"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1499149437,"creation_date":1495540892,"answer_id":44134279,"question_id":20994768,"body_markdown":"Yes,You can create by using this function.\r\n\r\n    public static String shortUUID() {\r\n      UUID uuid = UUID.randomUUID();\r\n      long l = ByteBuffer.wrap(uuid.toString().getBytes()).getLong();\r\n      return Long.toString(l, Character.MAX_RADIX);\r\n    }","title":"how to reduce length of UUID generated using randomUUID( )","body":"<p>Yes,You can create by using this function.</p>\n\n<pre><code>public static String shortUUID() {\n  UUID uuid = UUID.randomUUID();\n  long l = ByteBuffer.wrap(uuid.toString().getBytes()).getLong();\n  return Long.toString(l, Character.MAX_RADIX);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8465868,"reputation":136,"user_id":6350057,"display_name":"Pramin Senapati"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1683205596,"creation_date":1570782798,"answer_id":58337262,"question_id":20994768,"body_markdown":"    String uuid = String.format(&quot;%040d&quot;, new BigInteger(UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;), 16));\r\n    \r\n    String uuid16digits = uuid.substring(uuid.length() - 16);\r\n\r\nThis will return the last 16 digits of actual uuid.","title":"how to reduce length of UUID generated using randomUUID( )","body":"<pre><code>String uuid = String.format(&quot;%040d&quot;, new BigInteger(UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;), 16));\n\nString uuid16digits = uuid.substring(uuid.length() - 16);\n</code></pre>\n<p>This will return the last 16 digits of actual uuid.</p>\n"},{"tags":[],"owner":{"account_id":1423057,"reputation":39,"user_id":1347272,"display_name":"Joaqu&#237;n Figueroa Arru&#233;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632943097,"creation_date":1632943097,"answer_id":69382262,"question_id":20994768,"body_markdown":"You could evaluate using the `${__time()}` function","title":"how to reduce length of UUID generated using randomUUID( )","body":"<p>You could evaluate using the <code>${__time()}</code> function</p>\n"},{"tags":[],"owner":{"account_id":11844660,"reputation":514,"user_id":9708285,"display_name":"baradhili"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634255318,"creation_date":1634255318,"answer_id":69578522,"question_id":20994768,"body_markdown":"Convert it from base 16(0-9,A-F) to base 36(0-9,A-Z).. You could go to base 62 (0-9, A-Z, a-z) but if you need to read it over a phone or something then this can be error prone.\r\nhttps://github.com/salieri/uuid-encoder is a lib that might work for you...\r\n\r\nAlso this means you still have a GUID -you haven&#39;t truncated it like the other answers","title":"how to reduce length of UUID generated using randomUUID( )","body":"<p>Convert it from base 16(0-9,A-F) to base 36(0-9,A-Z).. You could go to base 62 (0-9, A-Z, a-z) but if you need to read it over a phone or something then this can be error prone.\n<a href=\"https://github.com/salieri/uuid-encoder\" rel=\"nofollow noreferrer\">https://github.com/salieri/uuid-encoder</a> is a lib that might work for you...</p>\n<p>Also this means you still have a GUID -you haven't truncated it like the other answers</p>\n"},{"tags":[],"owner":{"account_id":19370048,"reputation":659,"user_id":14163532,"display_name":"PKS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669716413,"creation_date":1669716413,"answer_id":74612308,"question_id":20994768,"body_markdown":"The following snippet is a dynamic UUID code. By default, the legth of the UUID depends on bits but the function randomly chooses characters from the UUID\r\n\r\n \r\n\r\n     public String myUUID(int length) {\r\n        String allChars = UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;);\r\n        Random random = new Random();\r\n        char[] otp = new char[length];\r\n        for (int i = 0; i &lt; length; i++) {\r\n          otp[i] =\r\n              allChars.charAt(random.nextInt(allChars.length()));\r\n        }\r\n        return String.valueOf(otp);\r\n      }\r\n\r\n","title":"how to reduce length of UUID generated using randomUUID( )","body":"<p>The following snippet is a dynamic UUID code. By default, the legth of the UUID depends on bits but the function randomly chooses characters from the UUID</p>\n<pre><code> public String myUUID(int length) {\n    String allChars = UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;);\n    Random random = new Random();\n    char[] otp = new char[length];\n    for (int i = 0; i &lt; length; i++) {\n      otp[i] =\n          allChars.charAt(random.nextInt(allChars.length()));\n    }\n    return String.valueOf(otp);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26625119,"reputation":19,"user_id":20243284,"display_name":"21TK505 MadhU AsyLuM"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1673732105,"creation_date":1670225818,"answer_id":74684743,"question_id":20994768,"body_markdown":"You can use the substring method to decrease the string length while generating uuid. \r\n\r\n    UUID.randomUUID().toString().substring(0, 5)","title":"how to reduce length of UUID generated using randomUUID( )","body":"<p>You can use the substring method to decrease the string length while generating uuid.</p>\n<pre><code>UUID.randomUUID().toString().substring(0, 5)\n</code></pre>\n"}],"owner":{"account_id":3135892,"reputation":1501,"user_id":2652405,"accept_rate":38,"display_name":"AppleBud"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97543,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":20995129,"answer_count":7,"score":27,"last_activity_date":1683205596,"creation_date":1389181599,"question_id":20994768,"body_markdown":"I have a short utility in which I am generating a UUID using randomUUID(). \r\n\r\n    String uuid = UUID.randomUUID().toString();\r\n\r\nHowever, the uuid generated is too long which is 36 in length.\r\n\r\nIs there any way I can reduce the length of the UUID from 36 to near 16 or make the UUID length dynamic?","title":"how to reduce length of UUID generated using randomUUID( )","body":"<p>I have a short utility in which I am generating a UUID using randomUUID().</p>\n<pre><code>String uuid = UUID.randomUUID().toString();\n</code></pre>\n<p>However, the uuid generated is too long which is 36 in length.</p>\n<p>Is there any way I can reduce the length of the UUID from 36 to near 16 or make the UUID length dynamic?</p>\n"},{"tags":["java","throwable","unchecked-exception"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1568831980,"post_id":57998978,"comment_id":102403853,"body_markdown":"You know that RuntimeException extends Throwable?","body":"You know that RuntimeException extends Throwable?"},{"owner":{"account_id":1998072,"reputation":4342,"user_id":2288986,"accept_rate":71,"display_name":"Gordon Bean"},"score":0,"creation_date":1568832160,"post_id":57998978,"comment_id":102403923,"body_markdown":"Yes - I was avoiding extending `RuntimeException` because 1) my throwable is not an exception, and 2) I want to avoid my throwable getting caught by `catch(Exception e) { }` blocks.","body":"Yes - I was avoiding extending <code>RuntimeException</code> because 1) my throwable is not an exception, and 2) I want to avoid my throwable getting caught by <code>catch(Exception e) { }</code> blocks."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1568832623,"post_id":57998978,"comment_id":102404103,"body_markdown":"Throwables are unchecked (or rather do not need to be declared).  The link you refer to, is about fooling the compiler about checked _exceptions_ which does not apply to Throwables (and Word of God explicitly says it is a Bad Idea (TM)).  Have you tried just throwing CustomThrowable directly?","body":"Throwables are unchecked (or rather do not need to be declared).  The link you refer to, is about fooling the compiler about checked <i>exceptions</i> which does not apply to Throwables (and Word of God explicitly says it is a Bad Idea (TM)).  Have you tried just throwing CustomThrowable directly?"},{"owner":{"account_id":1998072,"reputation":4342,"user_id":2288986,"accept_rate":71,"display_name":"Gordon Bean"},"score":4,"creation_date":1568833436,"post_id":57998978,"comment_id":102404465,"body_markdown":"I cannot reconcile your statement &quot;Throwables are unchecked&quot; with the compiler errors I see &quot;Unhandled exception&quot;. Unless there is a bizarre bug in IntelliJ, I have empirical evidence that Throwables are checked.","body":"I cannot reconcile your statement &quot;Throwables are unchecked&quot; with the compiler errors I see &quot;Unhandled exception&quot;. Unless there is a bizarre bug in IntelliJ, I have empirical evidence that Throwables are checked."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1568834117,"post_id":57998978,"comment_id":102404769,"body_markdown":"Show your complete code.  Please make it as brief as possible while stil showing your problem.","body":"Show your complete code.  Please make it as brief as possible while stil showing your problem."},{"owner":{"account_id":2203408,"reputation":5012,"user_id":1947216,"display_name":"mentallurg"},"score":3,"creation_date":1568834534,"post_id":57998978,"comment_id":102404911,"body_markdown":"@Thorbj&#248;rnRavnAndersen: Throwable are checked. See Java Doc: *For the purposes of compile-time checking of exceptions, Throwable and any subclass of Throwable that is not also a subclass of either RuntimeException or Error are regarded as **checked** exceptions.*","body":"@Thorbj&#248;rnRavnAndersen: Throwable are checked. See Java Doc: <i>For the purposes of compile-time checking of exceptions, Throwable and any subclass of Throwable that is not also a subclass of either RuntimeException or Error are regarded as <b>checked</b> exceptions.</i>"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1568835686,"post_id":57998978,"comment_id":102405350,"body_markdown":"It appears I got Throwable mixed up with Error (which is unchecked) in my mind.  My bad for not actually checking before sounding knowledgeable.","body":"It appears I got Throwable mixed up with Error (which is unchecked) in my mind.  My bad for not actually checking before sounding knowledgeable."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1568838814,"post_id":57998978,"comment_id":102406541,"body_markdown":"What is the point of this whole exercise?","body":"What is the point of this whole exercise?"},{"owner":{"account_id":1881735,"reputation":7688,"user_id":1701776,"accept_rate":71,"display_name":"BambooleanLogic"},"score":1,"creation_date":1568839610,"post_id":57998978,"comment_id":102406818,"body_markdown":"&quot;I had wanted to avoid inheriting from RuntimeException because my throwable is not an exception, but instead a yield instruction.&quot; - Using exceptions/throwables for cases that are _expected to occur during normal operation_, rather than to handle errors and other exceptional circumstances, is not recommended. This includes flow control and &quot;returning from multiple methods in one go&quot;. One of the reasons why is because throwing a Throwable is considerably slower than, say, returning a value.","body":"&quot;I had wanted to avoid inheriting from RuntimeException because my throwable is not an exception, but instead a yield instruction.&quot; - Using exceptions/throwables for cases that are <i>expected to occur during normal operation</i>, rather than to handle errors and other exceptional circumstances, is not recommended. This includes flow control and &quot;returning from multiple methods in one go&quot;. One of the reasons why is because throwing a Throwable is considerably slower than, say, returning a value."}],"answers":[{"tags":[],"owner":{"account_id":2203408,"reputation":5012,"user_id":1947216,"display_name":"mentallurg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568844072,"creation_date":1568835719,"answer_id":57999767,"question_id":57998978,"body_markdown":"`Throwable` is a **checked** error and actually it *should* be impossible to throw such errors, except of cases when it is a RuntimeException or an Error.\r\n\r\nBut actually it is possible. Here is an example.\r\n\r\nHere is a utility that throws **any** unchecked exception as checked:\r\n\r\n```Java\r\npackage org.mentallurg;\r\n\r\npublic class ExceptionUtil {\r\n\r\n\tprivate static class ThrowableWrapper extends Throwable {\r\n\r\n\t\tprivate Throwable throwable;\r\n\r\n\t\tpublic ThrowableWrapper(Throwable throwable) {\r\n\t\t\tsuper();\r\n\t\t\tthis.throwable = throwable;\r\n\t\t}\r\n\r\n\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\tpublic &lt;T extends Throwable&gt; T throwNested() throws T {\r\n\t\t\tthrow (T) throwable;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static &lt;T extends Throwable&gt; T throwThis(T throwable) throws T {\r\n\t\tthrow throwable;\r\n\t}\r\n\r\n\tpublic static &lt;T extends Throwable&gt; void throwUnchecked(T throwable) {\r\n\t\tnew ThrowableWrapper(throwable).throwNested();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nHere is an example of usage:\r\n\r\n```Java\r\npackage org.mentallurg;\r\n\r\npublic class Test {\r\n\r\n\tprivate static void doSomething() {\r\n\t\tException checkedException = new Exception(&quot;I am checked exception&quot;);\r\n\t\tExceptionUtil.throwUnchecked(checkedException);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tdoSomething();\r\n\t}\r\n\r\n}\r\n```\r\nPay attention that there is no `throws Throwable` clause, neither in `main` not in `doSomething`. And there is no compile error. In case of `RuntimeException` it would be understandable, but not in case of `Throwable`.\r\n\r\nIf we execute it, we get following:\r\n```\r\nException in thread &quot;main&quot; java.lang.Exception: I am checked exception\r\n\tat org.mentallurg.Test.doSomething(Test.java:6)\r\n\tat org.mentallurg.Test.main(Test.java:11)\r\n```\r\n\r\nHow it works?\r\n\r\nThe most important part is this one:\r\n```Java\r\nnew ThrowableWrapper(throwable).throwNested();\r\n```\r\n\r\nActually method `throwNested` here *can* throw a `Throwable`. That&#39;s why Java compiler *should* raise an error and *should* require that this line of code is either surrounded with try/catch or `Throwable` clause should be added. But it doesn&#39;t. Why? I believe this is a flaw in Java compiler. Some comments on SO in other threads refer to type erasure, but they are incorrect, because type erasure is relevant during the *run* time, where as we are talking about the *compile* time.\r\n\r\nIt is interesting that the decompiled code shows that here a `Throwable` (not `RuntimeException`, not `Error`) will be thrown:\r\n```\r\n  public static &lt;T extends java.lang.Throwable&gt; void throwUnchecked(T);\r\n    Code:\r\n       0: new           #28                 // class org/mentallurg/ExceptionUtil$ThrowableWrapper\r\n       3: dup\r\n       4: aload_0\r\n       5: invokespecial #30                 // Method org/mentallurg/ExceptionUtil$ThrowableWrapper.&quot;&lt;init&gt;&quot;:(Ljava/lang/Throwable;)V\r\n       8: invokevirtual #32                 // Method org/mentallurg/ExceptionUtil$ThrowableWrapper.throwNested:()Ljava/lang/Throwable;\r\n      11: pop\r\n      12: return\r\n```\r\n\r\nThis behaviour is not specific for `Throwable`. We can replace it with a checked `Exception` and will get the same result:\r\n```Java\r\npublic &lt;T extends Exception&gt; T throwNested() throws T {\r\n```\r\n\r\nIn all such cases if we replace generics with particular classes, then Java compiler will report an error, which is correct. In cases with generics Java compiler ignores checked exceptions and doesn&#39;t reports any error. That&#39;s why I believe that this is a **bug in Java compiler**.\r\n","title":"How to write an unchecked Throwable in java","body":"<p><code>Throwable</code> is a <strong>checked</strong> error and actually it <em>should</em> be impossible to throw such errors, except of cases when it is a RuntimeException or an Error.</p>\n\n<p>But actually it is possible. Here is an example.</p>\n\n<p>Here is a utility that throws <strong>any</strong> unchecked exception as checked:</p>\n\n<pre><code>package org.mentallurg;\n\npublic class ExceptionUtil {\n\n    private static class ThrowableWrapper extends Throwable {\n\n        private Throwable throwable;\n\n        public ThrowableWrapper(Throwable throwable) {\n            super();\n            this.throwable = throwable;\n        }\n\n        @SuppressWarnings(\"unchecked\")\n        public &lt;T extends Throwable&gt; T throwNested() throws T {\n            throw (T) throwable;\n        }\n    }\n\n    private static &lt;T extends Throwable&gt; T throwThis(T throwable) throws T {\n        throw throwable;\n    }\n\n    public static &lt;T extends Throwable&gt; void throwUnchecked(T throwable) {\n        new ThrowableWrapper(throwable).throwNested();\n    }\n\n}\n</code></pre>\n\n<p>Here is an example of usage:</p>\n\n<pre><code>package org.mentallurg;\n\npublic class Test {\n\n    private static void doSomething() {\n        Exception checkedException = new Exception(\"I am checked exception\");\n        ExceptionUtil.throwUnchecked(checkedException);\n    }\n\n    public static void main(String[] args) {\n        doSomething();\n    }\n\n}\n</code></pre>\n\n<p>Pay attention that there is no <code>throws Throwable</code> clause, neither in <code>main</code> not in <code>doSomething</code>. And there is no compile error. In case of <code>RuntimeException</code> it would be understandable, but not in case of <code>Throwable</code>.</p>\n\n<p>If we execute it, we get following:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.Exception: I am checked exception\n    at org.mentallurg.Test.doSomething(Test.java:6)\n    at org.mentallurg.Test.main(Test.java:11)\n</code></pre>\n\n<p>How it works?</p>\n\n<p>The most important part is this one:</p>\n\n<pre><code>new ThrowableWrapper(throwable).throwNested();\n</code></pre>\n\n<p>Actually method <code>throwNested</code> here <em>can</em> throw a <code>Throwable</code>. That's why Java compiler <em>should</em> raise an error and <em>should</em> require that this line of code is either surrounded with try/catch or <code>Throwable</code> clause should be added. But it doesn't. Why? I believe this is a flaw in Java compiler. Some comments on SO in other threads refer to type erasure, but they are incorrect, because type erasure is relevant during the <em>run</em> time, where as we are talking about the <em>compile</em> time.</p>\n\n<p>It is interesting that the decompiled code shows that here a <code>Throwable</code> (not <code>RuntimeException</code>, not <code>Error</code>) will be thrown:</p>\n\n<pre><code>  public static &lt;T extends java.lang.Throwable&gt; void throwUnchecked(T);\n    Code:\n       0: new           #28                 // class org/mentallurg/ExceptionUtil$ThrowableWrapper\n       3: dup\n       4: aload_0\n       5: invokespecial #30                 // Method org/mentallurg/ExceptionUtil$ThrowableWrapper.\"&lt;init&gt;\":(Ljava/lang/Throwable;)V\n       8: invokevirtual #32                 // Method org/mentallurg/ExceptionUtil$ThrowableWrapper.throwNested:()Ljava/lang/Throwable;\n      11: pop\n      12: return\n</code></pre>\n\n<p>This behaviour is not specific for <code>Throwable</code>. We can replace it with a checked <code>Exception</code> and will get the same result:</p>\n\n<pre><code>public &lt;T extends Exception&gt; T throwNested() throws T {\n</code></pre>\n\n<p>In all such cases if we replace generics with particular classes, then Java compiler will report an error, which is correct. In cases with generics Java compiler ignores checked exceptions and doesn't reports any error. That's why I believe that this is a <strong>bug in Java compiler</strong>.</p>\n"},{"tags":[],"owner":{"account_id":2977588,"reputation":1839,"user_id":2741114,"display_name":"Nathaniel Jones"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1568838808,"creation_date":1568838808,"answer_id":58000381,"question_id":57998978,"body_markdown":"You can extend `Error` rather than `Throwable`. The Java `Error` class is an unchecked `Throwable`.","title":"How to write an unchecked Throwable in java","body":"<p>You can extend <code>Error</code> rather than <code>Throwable</code>. The Java <code>Error</code> class is an unchecked <code>Throwable</code>.</p>\n"},{"tags":[],"owner":{"account_id":1998072,"reputation":4342,"user_id":2288986,"accept_rate":71,"display_name":"Gordon Bean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1568846167,"creation_date":1568846167,"answer_id":58001549,"question_id":57998978,"body_markdown":"Per https://stackoverflow.com/questions/11547914/why-runtime-exception-is-unchecked-exception (and the unquestionable authority of Jon Skeet ;), it appears that unchecked-exception support is built into the java compiler, and is probably not something I can plug into. \r\n\r\nQuoting from Jon&#39;s post: \r\n\r\n&gt; It&#39;s explicitly in the specification, section 11.1.1:\r\n&gt; \r\n&gt; RuntimeException and all its subclasses are, collectively, the runtime\r\n&gt; exception classes.\r\n&gt; \r\n&gt; The unchecked exception classes are the runtime exception classes and\r\n&gt; the error classes.\r\n&gt; \r\n&gt; The checked exception classes are all exception classes other than the\r\n&gt; unchecked exception classes. That is, the checked exception classes\r\n&gt; are all subclasses of Throwable other than RuntimeException and its\r\n&gt; subclasses and Error and its subclasses.\r\n&gt;\r\n&gt; So yes, the compiler definitely knows about RuntimeException.\r\n\r\nI&#39;m still hoping that someone else will come up with a &quot;yes you can&quot; answer, so I&#39;ll wait a few more days before closing this question.","title":"How to write an unchecked Throwable in java","body":"<p>Per <a href=\"https://stackoverflow.com/questions/11547914/why-runtime-exception-is-unchecked-exception\">Why runtime exception is unchecked exception?</a> (and the unquestionable authority of Jon Skeet ;), it appears that unchecked-exception support is built into the java compiler, and is probably not something I can plug into. </p>\n\n<p>Quoting from Jon's post: </p>\n\n<blockquote>\n  <p>It's explicitly in the specification, section 11.1.1:</p>\n  \n  <p>RuntimeException and all its subclasses are, collectively, the runtime\n  exception classes.</p>\n  \n  <p>The unchecked exception classes are the runtime exception classes and\n  the error classes.</p>\n  \n  <p>The checked exception classes are all exception classes other than the\n  unchecked exception classes. That is, the checked exception classes\n  are all subclasses of Throwable other than RuntimeException and its\n  subclasses and Error and its subclasses.</p>\n  \n  <p>So yes, the compiler definitely knows about RuntimeException.</p>\n</blockquote>\n\n<p>I'm still hoping that someone else will come up with a \"yes you can\" answer, so I'll wait a few more days before closing this question.</p>\n"},{"tags":[],"owner":{"account_id":13113492,"reputation":1198,"user_id":10082531,"display_name":"Michael Pfaff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683204837,"creation_date":1657924899,"answer_id":73000222,"question_id":57998978,"body_markdown":"This approach is fundamentally the same as mentallurg&#39;s but it avoids the unnecessary wrapper class.\r\n\r\n```java\r\npublic final class ThrowUtil {\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tprivate static &lt;T extends Throwable&gt; void throwUnchecked0(Throwable t) throws T {\r\n\t\t// because `T` is a generic it will be erased at compile time\r\n\t\t// the cast will be replaced with `(Throwable) t` which will always succeed\r\n\t\tthrow (T) t;\r\n\t}\r\n\r\n\tpublic static void throwUnchecked(Throwable t) {\r\n\t\tthrowUnchecked0(t);\r\n\t}\r\n\r\n\tprivate ThrowUtil() {}\r\n}\r\n```\r\n\r\nIn your code:\r\n\r\n```java\r\n// no throws clause\r\npublic void foo() {\r\n\tThrowUtil.throwUnchecked(new IllegalAccessException(&quot;you are not allowed to call foo&quot;));\r\n}\r\n```\r\n\r\nAnd for the sake of completeness, here&#39;s the generated bytecode for comparison:\r\n```\r\n  private static &lt;T extends java.lang.Throwable&gt; void throwUnchecked0(java.lang.Throwable) throws T;\r\n    Code:\r\n       0: aload_0\r\n       1: athrow\r\n\r\n  public static void throwUnchecked(java.lang.Throwable);\r\n    Code:\r\n       0: aload_0\r\n       1: invokestatic  #1                  // Method throwUnchecked0:(Ljava/lang/Throwable;)V\r\n       4: return\r\n```\r\n\r\nIf `throwUnchecked0` is made to take a parameter of type `T` instead of any `Throwable` then the requirement for either a throws clause or a try/catch statement will be propagated to callers&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\nInterestingly, this is very different behaviour from generics in most contexts. For example, if the code is changed so that the internal method returns `T` instead of throwing `T` and then the public method throws that return value, the type of `T` is inferred to be `Throwable` and the throws clause requirement will be propagated. Therefore it does seem likely that this is a bug in the Java compiler, albeit one that I would like to see remain since it would still be possible directly in bytecode (and other JVM languages like Kotlin use this extensively) and can be useful in some cases.\r\n\r\nThe unchecked cast to `T` is completely&lt;sup&gt;2&lt;/sup&gt; safe because `T` is erased at compile time and replaced with `Throwable`, which will always succeed because the parameter is a `Throwable`.\r\n\r\nHiding the real implementation from the public api is not strictly necessary. It simply serves to make clear to readers (and enforce) that the generic type is intended to be completely ignored and omitted from call-sites.\r\n\r\n&lt;hr&gt;\r\n\r\n&lt;sup&gt;1&lt;/sup&gt; The caller could also explicitly specify a type for the generic parameter and cause the requirement for a throws clause to propagate. That&#39;s part of the reason for the public wrapper method.\r\n\r\n&lt;sup&gt;2&lt;/sup&gt; Well, only in the sense that it will never fail at runtime. After all, we are throwing unchecked exceptions.","title":"How to write an unchecked Throwable in java","body":"<p>This approach is fundamentally the same as mentallurg's but it avoids the unnecessary wrapper class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class ThrowUtil {\n    @SuppressWarnings(&quot;unchecked&quot;)\n    private static &lt;T extends Throwable&gt; void throwUnchecked0(Throwable t) throws T {\n        // because `T` is a generic it will be erased at compile time\n        // the cast will be replaced with `(Throwable) t` which will always succeed\n        throw (T) t;\n    }\n\n    public static void throwUnchecked(Throwable t) {\n        throwUnchecked0(t);\n    }\n\n    private ThrowUtil() {}\n}\n</code></pre>\n<p>In your code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// no throws clause\npublic void foo() {\n    ThrowUtil.throwUnchecked(new IllegalAccessException(&quot;you are not allowed to call foo&quot;));\n}\n</code></pre>\n<p>And for the sake of completeness, here's the generated bytecode for comparison:</p>\n<pre><code>  private static &lt;T extends java.lang.Throwable&gt; void throwUnchecked0(java.lang.Throwable) throws T;\n    Code:\n       0: aload_0\n       1: athrow\n\n  public static void throwUnchecked(java.lang.Throwable);\n    Code:\n       0: aload_0\n       1: invokestatic  #1                  // Method throwUnchecked0:(Ljava/lang/Throwable;)V\n       4: return\n</code></pre>\n<p>If <code>throwUnchecked0</code> is made to take a parameter of type <code>T</code> instead of any <code>Throwable</code> then the requirement for either a throws clause or a try/catch statement will be propagated to callers<sup>1</sup>.</p>\n<p>Interestingly, this is very different behaviour from generics in most contexts. For example, if the code is changed so that the internal method returns <code>T</code> instead of throwing <code>T</code> and then the public method throws that return value, the type of <code>T</code> is inferred to be <code>Throwable</code> and the throws clause requirement will be propagated. Therefore it does seem likely that this is a bug in the Java compiler, albeit one that I would like to see remain since it would still be possible directly in bytecode (and other JVM languages like Kotlin use this extensively) and can be useful in some cases.</p>\n<p>The unchecked cast to <code>T</code> is completely<sup>2</sup> safe because <code>T</code> is erased at compile time and replaced with <code>Throwable</code>, which will always succeed because the parameter is a <code>Throwable</code>.</p>\n<p>Hiding the real implementation from the public api is not strictly necessary. It simply serves to make clear to readers (and enforce) that the generic type is intended to be completely ignored and omitted from call-sites.</p>\n<hr>\n<p><sup>1</sup> The caller could also explicitly specify a type for the generic parameter and cause the requirement for a throws clause to propagate. That's part of the reason for the public wrapper method.</p>\n<p><sup>2</sup> Well, only in the sense that it will never fail at runtime. After all, we are throwing unchecked exceptions.</p>\n"}],"owner":{"account_id":1998072,"reputation":4342,"user_id":2288986,"accept_rate":71,"display_name":"Gordon Bean"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1130,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":58001549,"answer_count":4,"score":3,"last_activity_date":1683204837,"creation_date":1568831783,"question_id":57998978,"body_markdown":"I want to write a custom Throwable that is unchecked.\r\n\r\nThere are ways to trick the compiler at throw time (e.g. https://stackoverflow.com/questions/13528624/utility-class-that-re-throws-a-throwable-as-unchecked), which I have implemented thus:\r\n\r\n```java\r\npublic class CustomThrowable extends Throwable {\r\n    public CustomThrowable(String message) {\r\n        super(message);\r\n    }\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public &lt;T extends Throwable&gt; T unchecked() throws T {\r\n        throw (T) this;\r\n    }\r\n}\r\n```\r\n but I&#39;m running into issues at &quot;catch time&quot;:\r\n\r\n```java\r\ntry { \r\n    throw new CustomThrowable(&quot;foo&quot;).unchecked();\r\n}\r\ncatch (CustomThrowable t) { } // &lt;- compiler error because the try block does not &quot;throw&quot; a CustomThrowable\r\n```\r\nIs there a way to simply implement an unchecked `Throwable`, or is `RuntimeException` the only way to do that? I had wanted to avoid inheriting from `RuntimeException` because my throwable is not an exception, but instead a yield instruction.\r\n\r\n**Update**:\r\nAnother reason to avoid extending `RuntimeException` is that my `CustomThrowable` will get caught by generic `catch (Exception ex) { }` blocks. Thus, if I want to communicate information from within the stack, each layer needs to potentially be aware that `CustomThrowable` might come through and explicitly catch-rethrow it; this awareness is a large part of what one is trying to avoid when using the `Throwable` design.","title":"How to write an unchecked Throwable in java","body":"<p>I want to write a custom Throwable that is unchecked.</p>\n\n<p>There are ways to trick the compiler at throw time (e.g. <a href=\"https://stackoverflow.com/questions/13528624/utility-class-that-re-throws-a-throwable-as-unchecked\">Utility class that re-throws a throwable as unchecked?</a>), which I have implemented thus:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomThrowable extends Throwable {\n    public CustomThrowable(String message) {\n        super(message);\n    }\n    @SuppressWarnings(\"unchecked\")\n    public &lt;T extends Throwable&gt; T unchecked() throws T {\n        throw (T) this;\n    }\n}\n</code></pre>\n\n<p>but I'm running into issues at \"catch time\":</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>try { \n    throw new CustomThrowable(\"foo\").unchecked();\n}\ncatch (CustomThrowable t) { } // &lt;- compiler error because the try block does not \"throw\" a CustomThrowable\n</code></pre>\n\n<p>Is there a way to simply implement an unchecked <code>Throwable</code>, or is <code>RuntimeException</code> the only way to do that? I had wanted to avoid inheriting from <code>RuntimeException</code> because my throwable is not an exception, but instead a yield instruction.</p>\n\n<p><strong>Update</strong>:\nAnother reason to avoid extending <code>RuntimeException</code> is that my <code>CustomThrowable</code> will get caught by generic <code>catch (Exception ex) { }</code> blocks. Thus, if I want to communicate information from within the stack, each layer needs to potentially be aware that <code>CustomThrowable</code> might come through and explicitly catch-rethrow it; this awareness is a large part of what one is trying to avoid when using the <code>Throwable</code> design.</p>\n"},{"tags":["java","linux","debian","apt","openjdk-8"],"answers":[{"tags":[],"owner":{"account_id":17497314,"reputation":244,"user_id":12688301,"display_name":"Xiao Yu"},"down_vote_count":2,"up_vote_count":9,"is_accepted":true,"score":7,"last_activity_date":1683204389,"creation_date":1584925944,"answer_id":60806789,"question_id":60806605,"body_markdown":" 1. add the following line to `/etc/apt/sources.list`\r\n\r\n    `deb http://deb.debian.org/debian/ sid main`\r\n\r\n 2. install openjdk8\r\n\r\n    ```\r\n    //Update the repositories&lt;br/&gt;\r\n    $ sudo apt-get update&lt;br/&gt;\r\n    $ sudo apt-get install -y openjdk-8-jdk\r\n    ```\r\n\r\nIn fact, I think it is better to search for your question first before ask.&lt;br/&gt;\r\n\r\n[https://stackoverflow.com/questions/57031649/how-to-install-openjdk-8-jdk-on-debian-10-buster][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/57031649/how-to-install-openjdk-8-jdk-on-debian-10-buster","title":"debian apt cant find openjdk-8-jdk","body":"<ol>\n<li><p>add the following line to <code>/etc/apt/sources.list</code></p>\n<p><code>deb http://deb.debian.org/debian/ sid main</code></p>\n</li>\n<li><p>install openjdk8</p>\n<pre><code>//Update the repositories&lt;br/&gt;\n$ sudo apt-get update&lt;br/&gt;\n$ sudo apt-get install -y openjdk-8-jdk\n</code></pre>\n</li>\n</ol>\n<p>In fact, I think it is better to search for your question first before ask.<br/></p>\n<p><a href=\"https://stackoverflow.com/questions/57031649/how-to-install-openjdk-8-jdk-on-debian-10-buster\">How to install openjdk-8-jdk on Debian 10 (Buster)?</a></p>\n"}],"owner":{"account_id":16443769,"reputation":213,"user_id":11879204,"display_name":"Flowly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20119,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":60806789,"answer_count":1,"score":4,"last_activity_date":1683204389,"creation_date":1584923941,"question_id":60806605,"body_markdown":"im trying to install openjdk-8-jdk as suggested [here](https://openjdk.java.net/install/) with the command:\r\n```\r\nsudo apt-get install openjdk-8-jdk\r\n```\r\nbut apt dosnt find the package. i did find it at [packages.debian.org](https://packages.debian.org/de/sid/amd64/java/openjdk-8-jdk) manualy and tried to tell apt to also load from there, as suggested on the [mirrors page](https://packages.debian.org/de/sid/amd64/openjdk-8-jdk/download) of that package by adding the following line to /etc/apt/sources.list\r\n```\r\ndeb http://ftp.de.debian.org/debian sid main\r\n```\r\nbut apt still cant find the package. i also tried to change the\r\n\r\n - url to http://deb.debian.org/debian\r\n - sid to buster or buster-backports \r\n - main to unstable, non-free, contrib (or a list of some or all of those)\r\n - combinations of all of the above\r\n\r\nstill no luck.","title":"debian apt cant find openjdk-8-jdk","body":"<p>im trying to install openjdk-8-jdk as suggested <a href=\"https://openjdk.java.net/install/\" rel=\"nofollow noreferrer\">here</a> with the command:</p>\n\n<pre><code>sudo apt-get install openjdk-8-jdk\n</code></pre>\n\n<p>but apt dosnt find the package. i did find it at <a href=\"https://packages.debian.org/de/sid/amd64/java/openjdk-8-jdk\" rel=\"nofollow noreferrer\">packages.debian.org</a> manualy and tried to tell apt to also load from there, as suggested on the <a href=\"https://packages.debian.org/de/sid/amd64/openjdk-8-jdk/download\" rel=\"nofollow noreferrer\">mirrors page</a> of that package by adding the following line to /etc/apt/sources.list</p>\n\n<pre><code>deb http://ftp.de.debian.org/debian sid main\n</code></pre>\n\n<p>but apt still cant find the package. i also tried to change the</p>\n\n<ul>\n<li>url to <a href=\"http://deb.debian.org/debian\" rel=\"nofollow noreferrer\">http://deb.debian.org/debian</a></li>\n<li>sid to buster or buster-backports </li>\n<li>main to unstable, non-free, contrib (or a list of some or all of those)</li>\n<li>combinations of all of the above</li>\n</ul>\n\n<p>still no luck.</p>\n"},{"tags":["java","apache-kafka","quarkus"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1683204248,"post_id":76170451,"comment_id":134332742,"body_markdown":"Clarify &quot;doesn&#39;t work&quot;. You shouldn&#39;t be able to import NewTopic from Spring in Quarkus","body":"Clarify &quot;doesn&#39;t work&quot;. You shouldn&#39;t be able to import NewTopic from Spring in Quarkus"}],"answers":[{"tags":[],"owner":{"account_id":7236580,"reputation":16350,"user_id":5521607,"accept_rate":25,"display_name":"Olivier Boiss&#233;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683185542,"creation_date":1683185542,"answer_id":76170608,"question_id":76170451,"body_markdown":"Probably not the easiest solution but you can create an [`AdminClient`](https://quarkus.io/guides/kafka#kafka-bare-clients) by yourself\r\n\r\n```java\r\n@Produces\r\nAdminClient getAdmin() {\r\n  Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n  ...\r\n  return KafkaAdminClient.create(props);\r\n}\r\n```\r\n\r\nand use [`AdminClient.createTopics`](https://kafka.apache.org/30/javadoc/org/apache/kafka/clients/admin/Admin.html#createTopics(java.util.Collection)) method to create your topics programatically\r\n\r\n","title":"How to create topic kafka quarkus?","body":"<p>Probably not the easiest solution but you can create an <a href=\"https://quarkus.io/guides/kafka#kafka-bare-clients\" rel=\"nofollow noreferrer\"><code>AdminClient</code></a> by yourself</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Produces\nAdminClient getAdmin() {\n  Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n  ...\n  return KafkaAdminClient.create(props);\n}\n</code></pre>\n<p>and use <a href=\"https://kafka.apache.org/30/javadoc/org/apache/kafka/clients/admin/Admin.html#createTopics(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>AdminClient.createTopics</code></a> method to create your topics programatically</p>\n"}],"owner":{"account_id":22140032,"reputation":23,"user_id":16390219,"display_name":"Andrew Samoilov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683204166,"creation_date":1683184205,"question_id":76170451,"body_markdown":"Using Spring to create a topic, it is enough to create such a bean.\r\n\r\n\r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\n@EnableKafka\r\n@EnableConfigurationProperties(KafkaProperties.class)\r\npublic class KafkaConfig {\r\n    private final KafkaProperties kafkaProperties;\r\n\r\n    @Bean\r\n    public NewTopic requestTopic() {\r\n        Map&lt;String, String&gt; configs = new HashMap&lt;&gt;();\r\n        configs.put(&quot;retention.ms&quot;, kafkaProperties.getStartReport().getRequestReplyTimeOut().toString());\r\n        return new NewTopic(kafkaProperties.getStartReport().getTopicName(), kafkaProperties.getStartReport().getTopicPartitions(), kafkaProperties.getStartReport().getReplicationFactor()).configs(configs);\r\n    }\r\n\r\n```\r\n\r\n\r\nHow can I create a topic with the required number of partitions and replication factor from the Quarkus code?\r\n\r\n\r\n\r\n```\r\n@Slf4j\r\n@Startup\r\n@ApplicationScoped\r\npublic class KafkaConfig {\r\n\r\n    @Inject\r\n    @ConfigProperty(name = &quot;kafka.bootstrap.servers&quot;)\r\n    String kafkaHost;\r\n\r\n    @Inject\r\n    KafkaOutgoingProperties kafkaOutgoingProperties;\r\n\r\n\r\n    @Produces\r\n    public NewTopic requestTopic() {\r\n        Map&lt;String, String&gt; configs = new HashMap&lt;&gt;();\r\n        return new NewTopic(kafkaOutgoingProperties.finishReportChannel().topic(),\r\n                kafkaOutgoingProperties.finishReportChannel().partitions(),\r\n                kafkaOutgoingProperties.finishReportChannel().replicationFactor()).configs(configs);\r\n    }\r\n    \r\n}\r\n```\r\n\r\nI tried to create the same in quarkus but it doesn&#39;t work.","title":"How to create topic kafka quarkus?","body":"<p>Using Spring to create a topic, it is enough to create such a bean.</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\n@EnableKafka\n@EnableConfigurationProperties(KafkaProperties.class)\npublic class KafkaConfig {\n    private final KafkaProperties kafkaProperties;\n\n    @Bean\n    public NewTopic requestTopic() {\n        Map&lt;String, String&gt; configs = new HashMap&lt;&gt;();\n        configs.put(&quot;retention.ms&quot;, kafkaProperties.getStartReport().getRequestReplyTimeOut().toString());\n        return new NewTopic(kafkaProperties.getStartReport().getTopicName(), kafkaProperties.getStartReport().getTopicPartitions(), kafkaProperties.getStartReport().getReplicationFactor()).configs(configs);\n    }\n\n</code></pre>\n<p>How can I create a topic with the required number of partitions and replication factor from the Quarkus code?</p>\n<pre><code>@Slf4j\n@Startup\n@ApplicationScoped\npublic class KafkaConfig {\n\n    @Inject\n    @ConfigProperty(name = &quot;kafka.bootstrap.servers&quot;)\n    String kafkaHost;\n\n    @Inject\n    KafkaOutgoingProperties kafkaOutgoingProperties;\n\n\n    @Produces\n    public NewTopic requestTopic() {\n        Map&lt;String, String&gt; configs = new HashMap&lt;&gt;();\n        return new NewTopic(kafkaOutgoingProperties.finishReportChannel().topic(),\n                kafkaOutgoingProperties.finishReportChannel().partitions(),\n                kafkaOutgoingProperties.finishReportChannel().replicationFactor()).configs(configs);\n    }\n    \n}\n</code></pre>\n<p>I tried to create the same in quarkus but it doesn't work.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1683200377,"post_id":76172590,"comment_id":134331723,"body_markdown":"what is the actual line of code you get an error?","body":"what is the actual line of code you get an error?"},{"owner":{"account_id":22368250,"reputation":11,"user_id":16583686,"display_name":"Stefancic Samuel"},"score":0,"creation_date":1683200446,"post_id":76172590,"comment_id":134331741,"body_markdown":"Hi @Stultuske, the actual error i&#39;m getting an error on is :             secretSantaGroup.addMember(creator) in my createSecretSantaGroup method","body":"Hi @Stultuske, the actual error i&#39;m getting an error on is :             secretSantaGroup.addMember(creator) in my createSecretSantaGroup method"},{"owner":{"account_id":22368250,"reputation":11,"user_id":16583686,"display_name":"Stefancic Samuel"},"score":0,"creation_date":1683200496,"post_id":76172590,"comment_id":134331752,"body_markdown":"I i can add another comment, the add basic method was throwing the exact same error","body":"I i can add another comment, the add basic method was throwing the exact same error"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1683200503,"post_id":76172590,"comment_id":134331755,"body_markdown":"yes, I get that, but to what line of your code causes the issue? have you debugged your code?","body":"yes, I get that, but to what line of your code causes the issue? have you debugged your code?"},{"owner":{"account_id":22368250,"reputation":11,"user_id":16583686,"display_name":"Stefancic Samuel"},"score":0,"creation_date":1683200774,"post_id":76172590,"comment_id":134331806,"body_markdown":"It&#39;s this particular line\nThe creator have the full Users objet in it, but the debugger is running indefinitely while passing this particular line, could be the issue ...","body":"It&#39;s this particular line The creator have the full Users objet in it, but the debugger is running indefinitely while passing this particular line, could be the issue ..."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1683201518,"post_id":76172590,"comment_id":134332015,"body_markdown":"saying &quot;it&#39;s this particular line&quot; without showing an actual line isn&#39;t all that helpful, I&#39;m afraid","body":"saying &quot;it&#39;s this particular line&quot; without showing an actual line isn&#39;t all that helpful, I&#39;m afraid"},{"owner":{"account_id":22368250,"reputation":11,"user_id":16583686,"display_name":"Stefancic Samuel"},"score":0,"creation_date":1683201704,"post_id":76172590,"comment_id":134332054,"body_markdown":"Sorry ! I thought i had pasted it in.\nTo be more precise, this is the following line :             secretSantaGroup.addMember(creator); \nwho&#39;s causing the infinite loop in the debugger, also, it&#39;s using the normal add method but with different methods in my entities :   \n\n public void addGroup(SecretSantaGroup group) {\n        groups.add(group);\n        group.addMember(this);\n    }\n\n    public void addMember(Users user) {\n        this.members.add(user);\n        user.addGroup(this);\n    }\n\nI do not know what else to say about it ...","body":"Sorry ! I thought i had pasted it in. To be more precise, this is the following line :             secretSantaGroup.addMember(creator);  who&#39;s causing the infinite loop in the debugger, also, it&#39;s using the normal add method but with different methods in my entities :      public void addGroup(SecretSantaGroup group) {         groups.add(group);         group.addMember(this);     }      public void addMember(Users user) {         this.members.add(user);         user.addGroup(this);     }  I do not know what else to say about it ..."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1683202963,"post_id":76172590,"comment_id":134332372,"body_markdown":"just follow the code that is triggered there. you are calling method a from method b, and method b from method a, that is what is causing your loop","body":"just follow the code that is triggered there. you are calling method a from method b, and method b from method a, that is what is causing your loop"}],"owner":{"account_id":22368250,"reputation":11,"user_id":16583686,"display_name":"Stefancic Samuel"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683204025,"creation_date":1683199055,"question_id":76172590,"body_markdown":"I am currently building an application based on the SantaSecret (or drawnames) and this app is currently in the testing phase.&lt;br&gt;\r\nThe application is using Hibernate and JPA.&lt;br&gt;\r\nMy project is built with a ManyToMany relations between the entity &quot;Users&quot; and the entity &quot;SecretSantaGroup&quot;.&lt;br&gt;\r\nI want to add a new group to the user and update the user list of groups as well, but while trying to add the creator of the group in the group newly created, i&#39;m getting the following error :\r\n\r\n\r\nSolved ! Here is the changes i made : &lt;br&gt;\r\nI started to manually add Getters to overpass the immutable ArrayLists : \r\n\r\nUsers and SecretSantaGroup : \r\n\r\n```   \r\n public List&lt;SecretSantaGroup&gt; getGroups() {\r\n        if (groups == null) {\r\n            groups = new ArrayList&lt;&gt;();\r\n        }\r\n        return groups;\r\n    }\r\n\r\n    public List&lt;Users&gt; getMembers() {\r\n        if (members == null) {\r\n            members = new ArrayList&lt;&gt;();\r\n        }\r\n        return members;\r\n    }\r\n\r\n```\r\n\r\nAnd i changed my create method to this, with the adding line change :\r\n\r\n```\r\n public SecretSantaGroup createSecretSantaGroup(SecretSantaGroup secretSantaGroup, UUID creatorId) {\r\n        try {\r\n            secretSantaGroupRepository.save(secretSantaGroup);\r\n            // Validate if the creator user has the appropriate role (admin)\r\n            Users creator = userRepository.findById(creatorId)\r\n                    .orElseThrow(() -&gt; new SecretSantaGroupException(&quot;User not found&quot;, HttpStatus.NOT_FOUND));\r\n            creator.setRole(Role.ADMIN);\r\n\r\n            // Define the group creator as admin\r\n            secretSantaGroup.setAdmin(creator);\r\n            String uniqueUrl = generateUniqueGroupUrl(secretSantaGroup.getName(), secretSantaGroup.getId());\r\n            secretSantaGroup.setUrl(uniqueUrl);\r\n\r\n            // Add the creator as a group member\r\n            SecretSantaGroup createdGroup = secretSantaGroupRepository.save(secretSantaGroup);\r\n            This line : createdGroup.setMembers(userRepository.findAllById(Collections.singleton(creatorId)));\r\n\r\n            secretSantaGroupRepository.save(createdGroup);\r\n            userRepository.save(creator);\r\n\r\n            if (!creator.getRole().equals(Role.ADMIN)) {\r\n                throw new SecretSantaGroupException(&quot;User does not have the appropriate role to create a group&quot;, HttpStatus.FORBIDDEN);\r\n            }\r\n\r\n            // Add the groups in the List of groups of the creator\r\n            creator.getGroups().add(createdGroup);\r\n            userRepository.save(creator);\r\n\r\n            if (createdGroup.getId() == null) {\r\n                throw new SecretSantaGroupException(&quot;Failed to create Secret Santa Group: group id is null&quot;, HttpStatus.INTERNAL_SERVER_ERROR);\r\n            }\r\n            return createdGroup;\r\n        } catch (DataAccessException | ConstraintViolationException e) {\r\n            throw new SecretSantaGroupException(&quot;Failed to create Secret Santa Group: &quot; + e.getMessage(), HttpStatus.INTERNAL_SERVER_ERROR);\r\n        }\r\n    }\r\n```\r\n\r\n```\r\n2023-05-04T13:05:29.534+02:00 ERROR 12272 --- [nio-5757-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.UnsupportedOperationException] with root cause\r\n\r\njava.lang.UnsupportedOperationException: null\r\n\tat java.base/java.util.AbstractList.add(AbstractList.java:155) ~[na:na]\r\n\tat java.base/java.util.AbstractList.add(AbstractList.java:113) ~[na:na]\r\n\tat org.hibernate.collection.spi.PersistentBag.add(PersistentBag.java:386) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\r\n\tat com.santa.work.entity.SecretSantaGroup.addMember(SecretSantaGroup.java:80) ~[classes/:na]\r\n\tat com.santa.work.service.secretSantaGroup.SecretSantaGroupServiceImpl.createSecretSantaGroup(SecretSantaGroupServiceImpl.java:59) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.8.jar:6.0.8]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.8.jar:6.0.8]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.8.jar:6.0.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\tat com.santa.work.service.secretSantaGroup.SecretSantaGroupServiceImpl$$SpringCGLIB$$1.createSecretSantaGroup(&lt;generated&gt;) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\tat com.santa.work.service.secretSantaGroup.SecretSantaGroupServiceImpl$$SpringCGLIB$$0.createSecretSantaGroup(&lt;generated&gt;) ~[classes/:na]\r\n\tat com.santa.work.controller.SecretSantaGroupController.createSecretSantaGroup(SecretSantaGroupController.java:40) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.8.jar:6.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.8.jar:6.0]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1623) ~[na:na]\r\n\r\n```\r\n\r\nAlso, here are the files defined in the error and other ones to give you more context : \r\n\r\nUsers : \r\n```@Entity\r\n@Table(name = &quot;users&quot;)\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\npublic class Users {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;UUID&quot;)\r\n    @SequenceGenerator(name=&quot;UUID&quot;, sequenceName = &quot;sequence_user&quot;, allocationSize = 1)\r\n    @GenericGenerator(\r\n            name = &quot;UUID&quot;,\r\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\r\n    )\r\n    @Column(name = &quot;id_user&quot;, nullable = false, unique = true)\r\n    private UUID id;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;role&quot;, nullable = false)\r\n    private Role role;\r\n\r\n    @Column(name = &quot;firstname&quot;, nullable = false)\r\n    private String firstname;\r\n\r\n    @Column(name=&quot;lastname&quot;, nullable = false)\r\n    private String lastname;\r\n\r\n    @Column(name=&quot;login&quot;, nullable = false, unique = true)\r\n    private String login;\r\n\r\n    @Column(name=&quot;password&quot;, nullable = false)\r\n    private String password;\r\n\r\n    @Column(name =&quot;email&quot;, nullable = false, unique = true)\r\n    private String email;\r\n\r\n    @OneToMany(mappedBy = &quot;users&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n    private List&lt;Wish&gt; wishList = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;members&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    private List&lt;SecretSantaGroup&gt; groups = new ArrayList&lt;&gt;();\r\n\r\n    @OneToMany(mappedBy = &quot;invitedUser&quot;)\r\n    private Set&lt;Invitation&gt; invitations;\r\n\r\n    public void addGroup(SecretSantaGroup group) {\r\n        groups.add(group);\r\n        group.getMembers().add(this);\r\n    }\r\n}\r\n```\r\n\r\nSecretSantaGroup : \r\n```\r\n@Entity\r\n@Table(name = &quot;santa_group&quot;)\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class SecretSantaGroup {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO, generator=&quot;UUID&quot;)\r\n    @SequenceGenerator(name=&quot;UUID&quot;, sequenceName = &quot;sequence_santa&quot;)\r\n    @GenericGenerator(\r\n            name = &quot;UUID&quot;,\r\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\r\n    )\r\n    @Column(name =&quot;id_santa_group&quot;, nullable = false, unique = true)\r\n    private UUID id;\r\n\r\n    @Column(name = &quot;secret_santa_group_name&quot;, nullable = false)\r\n    private String name;\r\n\r\n    @ManyToOne(fetch= FetchType.LAZY)\r\n    @JoinColumn(name = &quot;admin_id&quot;)\r\n    private Users admin;\r\n\r\n    @Column(name = &quot;group_url&quot;, unique = true)\r\n    private String url;\r\n\r\n    @Column(name = &quot;matches_generated&quot;, nullable = false)\r\n    private boolean matchesGenerated = false;\r\n\r\n    //List des membres du groupe\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    @JoinTable(\r\n            name = &quot;group_members&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;group_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;member_id&quot;)\r\n    )\r\n    private List&lt;Users&gt; members = new ArrayList&lt;&gt;();\r\n\r\n    //List invitation groupe secretsanta, invitation li&#233;e &#224; un groupe\r\n    @OneToMany(mappedBy = &quot;group&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n    private List&lt;Invitation&gt; invitations = new ArrayList&lt;&gt;();\r\n\r\n    //Liste de correspondance pour membre de chaque groupe, match associ&#233; &#224; un groupe santa sp&#233;cifique\r\n    @OneToMany(mappedBy = &quot;group&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n    private List&lt;Match&gt; matches = new ArrayList&lt;&gt;();\r\n\r\n    public void addInvitation(Invitation invitation) {\r\n        invitations.add(invitation);\r\n        invitation.setGroup(this);\r\n    }\r\n    public void addMatch(Match match) {\r\n        matches.add(match);\r\n        match.setGroup(this);\r\n    }\r\n    public boolean allInvitationsAccepted() {\r\n        for (Invitation invitation : this.invitations) {\r\n            if (invitation.getStatus() != InvitationStatus.ACCEPTED) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    public void addMember(Users user) {\r\n        this.members.add(user);\r\n        user.addGroup(this);\r\n    }\r\n}\r\n```\r\n\r\nThe method to create (messy i know but I&#39;m improving !)\r\n```\r\n public SecretSantaGroup createSecretSantaGroup(SecretSantaGroup secretSantaGroup, UUID creatorId) {\r\n        try {\r\n            secretSantaGroupRepository.save(secretSantaGroup);\r\n            // Validate if the creator user has the appropriate role (admin)\r\n            Users creator = userRepository.findById(creatorId)\r\n                    .orElseThrow(() -&gt; new SecretSantaGroupException(&quot;User not found&quot;, HttpStatus.NOT_FOUND));\r\n            creator.setRole(Role.ADMIN);\r\n\r\n            // Define the group creator as admin\r\n            secretSantaGroup.setAdmin(creator);\r\n            String uniqueUrl = generateUniqueGroupUrl(secretSantaGroup.getName(), secretSantaGroup.getId());\r\n            secretSantaGroup.setUrl(uniqueUrl);\r\n\r\n            // Add the creator as a group member\r\n            secretSantaGroup.addMember(creator);\r\n\r\n            SecretSantaGroup createdGroup = secretSantaGroupRepository.save(secretSantaGroup);\r\n\r\n            if (!creator.getRole().equals(Role.ADMIN)) {\r\n                throw new SecretSantaGroupException(&quot;User does not have the appropriate role to create a group&quot;, HttpStatus.FORBIDDEN);\r\n            }\r\n\r\n            // Add the groups in the List of groups of the creator\r\n            creator.getGroups().add(createdGroup);\r\n            userRepository.save(creator);\r\n\r\n            if (createdGroup.getId() == null) {\r\n                throw new SecretSantaGroupException(&quot;Failed to create Secret Santa Group: group id is null&quot;, HttpStatus.INTERNAL_SERVER_ERROR);\r\n            }\r\n            return createdGroup;\r\n        } catch (DataAccessException | ConstraintViolationException e) {\r\n            throw new SecretSantaGroupException(&quot;Failed to create Secret Santa Group: &quot; + e.getMessage(), HttpStatus.INTERNAL_SERVER_ERROR);\r\n        }\r\n    }\r\n```\r\n\r\nThanks in advance, and due to my karma i might not be able to upvote your answer or answer it","title":"Adding a new group to user - java.lang.UnsupporterOperationException for a List that is not accepting the adding in herself","body":"<p>I am currently building an application based on the SantaSecret (or drawnames) and this app is currently in the testing phase.<br>\nThe application is using Hibernate and JPA.<br>\nMy project is built with a ManyToMany relations between the entity &quot;Users&quot; and the entity &quot;SecretSantaGroup&quot;.<br>\nI want to add a new group to the user and update the user list of groups as well, but while trying to add the creator of the group in the group newly created, i'm getting the following error :</p>\n<p>Solved ! Here is the changes i made : <br>\nI started to manually add Getters to overpass the immutable ArrayLists :</p>\n<p>Users and SecretSantaGroup :</p>\n<pre><code> public List&lt;SecretSantaGroup&gt; getGroups() {\n        if (groups == null) {\n            groups = new ArrayList&lt;&gt;();\n        }\n        return groups;\n    }\n\n    public List&lt;Users&gt; getMembers() {\n        if (members == null) {\n            members = new ArrayList&lt;&gt;();\n        }\n        return members;\n    }\n\n</code></pre>\n<p>And i changed my create method to this, with the adding line change :</p>\n<pre><code> public SecretSantaGroup createSecretSantaGroup(SecretSantaGroup secretSantaGroup, UUID creatorId) {\n        try {\n            secretSantaGroupRepository.save(secretSantaGroup);\n            // Validate if the creator user has the appropriate role (admin)\n            Users creator = userRepository.findById(creatorId)\n                    .orElseThrow(() -&gt; new SecretSantaGroupException(&quot;User not found&quot;, HttpStatus.NOT_FOUND));\n            creator.setRole(Role.ADMIN);\n\n            // Define the group creator as admin\n            secretSantaGroup.setAdmin(creator);\n            String uniqueUrl = generateUniqueGroupUrl(secretSantaGroup.getName(), secretSantaGroup.getId());\n            secretSantaGroup.setUrl(uniqueUrl);\n\n            // Add the creator as a group member\n            SecretSantaGroup createdGroup = secretSantaGroupRepository.save(secretSantaGroup);\n            This line : createdGroup.setMembers(userRepository.findAllById(Collections.singleton(creatorId)));\n\n            secretSantaGroupRepository.save(createdGroup);\n            userRepository.save(creator);\n\n            if (!creator.getRole().equals(Role.ADMIN)) {\n                throw new SecretSantaGroupException(&quot;User does not have the appropriate role to create a group&quot;, HttpStatus.FORBIDDEN);\n            }\n\n            // Add the groups in the List of groups of the creator\n            creator.getGroups().add(createdGroup);\n            userRepository.save(creator);\n\n            if (createdGroup.getId() == null) {\n                throw new SecretSantaGroupException(&quot;Failed to create Secret Santa Group: group id is null&quot;, HttpStatus.INTERNAL_SERVER_ERROR);\n            }\n            return createdGroup;\n        } catch (DataAccessException | ConstraintViolationException e) {\n            throw new SecretSantaGroupException(&quot;Failed to create Secret Santa Group: &quot; + e.getMessage(), HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n    }\n</code></pre>\n<pre><code>2023-05-04T13:05:29.534+02:00 ERROR 12272 --- [nio-5757-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.UnsupportedOperationException] with root cause\n\njava.lang.UnsupportedOperationException: null\n    at java.base/java.util.AbstractList.add(AbstractList.java:155) ~[na:na]\n    at java.base/java.util.AbstractList.add(AbstractList.java:113) ~[na:na]\n    at org.hibernate.collection.spi.PersistentBag.add(PersistentBag.java:386) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at com.santa.work.entity.SecretSantaGroup.addMember(SecretSantaGroup.java:80) ~[classes/:na]\n    at com.santa.work.service.secretSantaGroup.SecretSantaGroupServiceImpl.createSecretSantaGroup(SecretSantaGroupServiceImpl.java:59) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.8.jar:6.0.8]\n    at com.santa.work.service.secretSantaGroup.SecretSantaGroupServiceImpl$$SpringCGLIB$$1.createSecretSantaGroup(&lt;generated&gt;) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698) ~[spring-aop-6.0.8.jar:6.0.8]\n    at com.santa.work.service.secretSantaGroup.SecretSantaGroupServiceImpl$$SpringCGLIB$$0.createSecretSantaGroup(&lt;generated&gt;) ~[classes/:na]\n    at com.santa.work.controller.SecretSantaGroupController.createSecretSantaGroup(SecretSantaGroupController.java:40) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.8.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.8.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at java.base/java.lang.Thread.run(Thread.java:1623) ~[na:na]\n\n</code></pre>\n<p>Also, here are the files defined in the error and other ones to give you more context :</p>\n<p>Users :</p>\n<pre><code>@Table(name = &quot;users&quot;)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@EqualsAndHashCode\npublic class Users {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;UUID&quot;)\n    @SequenceGenerator(name=&quot;UUID&quot;, sequenceName = &quot;sequence_user&quot;, allocationSize = 1)\n    @GenericGenerator(\n            name = &quot;UUID&quot;,\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\n    )\n    @Column(name = &quot;id_user&quot;, nullable = false, unique = true)\n    private UUID id;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;role&quot;, nullable = false)\n    private Role role;\n\n    @Column(name = &quot;firstname&quot;, nullable = false)\n    private String firstname;\n\n    @Column(name=&quot;lastname&quot;, nullable = false)\n    private String lastname;\n\n    @Column(name=&quot;login&quot;, nullable = false, unique = true)\n    private String login;\n\n    @Column(name=&quot;password&quot;, nullable = false)\n    private String password;\n\n    @Column(name =&quot;email&quot;, nullable = false, unique = true)\n    private String email;\n\n    @OneToMany(mappedBy = &quot;users&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    private List&lt;Wish&gt; wishList = new ArrayList&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;members&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private List&lt;SecretSantaGroup&gt; groups = new ArrayList&lt;&gt;();\n\n    @OneToMany(mappedBy = &quot;invitedUser&quot;)\n    private Set&lt;Invitation&gt; invitations;\n\n    public void addGroup(SecretSantaGroup group) {\n        groups.add(group);\n        group.getMembers().add(this);\n    }\n}\n</code></pre>\n<p>SecretSantaGroup :</p>\n<pre><code>@Entity\n@Table(name = &quot;santa_group&quot;)\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class SecretSantaGroup {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO, generator=&quot;UUID&quot;)\n    @SequenceGenerator(name=&quot;UUID&quot;, sequenceName = &quot;sequence_santa&quot;)\n    @GenericGenerator(\n            name = &quot;UUID&quot;,\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\n    )\n    @Column(name =&quot;id_santa_group&quot;, nullable = false, unique = true)\n    private UUID id;\n\n    @Column(name = &quot;secret_santa_group_name&quot;, nullable = false)\n    private String name;\n\n    @ManyToOne(fetch= FetchType.LAZY)\n    @JoinColumn(name = &quot;admin_id&quot;)\n    private Users admin;\n\n    @Column(name = &quot;group_url&quot;, unique = true)\n    private String url;\n\n    @Column(name = &quot;matches_generated&quot;, nullable = false)\n    private boolean matchesGenerated = false;\n\n    //List des membres du groupe\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    @JoinTable(\n            name = &quot;group_members&quot;,\n            joinColumns = @JoinColumn(name = &quot;group_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;member_id&quot;)\n    )\n    private List&lt;Users&gt; members = new ArrayList&lt;&gt;();\n\n    //List invitation groupe secretsanta, invitation liée à un groupe\n    @OneToMany(mappedBy = &quot;group&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\n    private List&lt;Invitation&gt; invitations = new ArrayList&lt;&gt;();\n\n    //Liste de correspondance pour membre de chaque groupe, match associé à un groupe santa spécifique\n    @OneToMany(mappedBy = &quot;group&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\n    private List&lt;Match&gt; matches = new ArrayList&lt;&gt;();\n\n    public void addInvitation(Invitation invitation) {\n        invitations.add(invitation);\n        invitation.setGroup(this);\n    }\n    public void addMatch(Match match) {\n        matches.add(match);\n        match.setGroup(this);\n    }\n    public boolean allInvitationsAccepted() {\n        for (Invitation invitation : this.invitations) {\n            if (invitation.getStatus() != InvitationStatus.ACCEPTED) {\n                return false;\n            }\n        }\n        return true;\n    }\n    public void addMember(Users user) {\n        this.members.add(user);\n        user.addGroup(this);\n    }\n}\n</code></pre>\n<p>The method to create (messy i know but I'm improving !)</p>\n<pre><code> public SecretSantaGroup createSecretSantaGroup(SecretSantaGroup secretSantaGroup, UUID creatorId) {\n        try {\n            secretSantaGroupRepository.save(secretSantaGroup);\n            // Validate if the creator user has the appropriate role (admin)\n            Users creator = userRepository.findById(creatorId)\n                    .orElseThrow(() -&gt; new SecretSantaGroupException(&quot;User not found&quot;, HttpStatus.NOT_FOUND));\n            creator.setRole(Role.ADMIN);\n\n            // Define the group creator as admin\n            secretSantaGroup.setAdmin(creator);\n            String uniqueUrl = generateUniqueGroupUrl(secretSantaGroup.getName(), secretSantaGroup.getId());\n            secretSantaGroup.setUrl(uniqueUrl);\n\n            // Add the creator as a group member\n            secretSantaGroup.addMember(creator);\n\n            SecretSantaGroup createdGroup = secretSantaGroupRepository.save(secretSantaGroup);\n\n            if (!creator.getRole().equals(Role.ADMIN)) {\n                throw new SecretSantaGroupException(&quot;User does not have the appropriate role to create a group&quot;, HttpStatus.FORBIDDEN);\n            }\n\n            // Add the groups in the List of groups of the creator\n            creator.getGroups().add(createdGroup);\n            userRepository.save(creator);\n\n            if (createdGroup.getId() == null) {\n                throw new SecretSantaGroupException(&quot;Failed to create Secret Santa Group: group id is null&quot;, HttpStatus.INTERNAL_SERVER_ERROR);\n            }\n            return createdGroup;\n        } catch (DataAccessException | ConstraintViolationException e) {\n            throw new SecretSantaGroupException(&quot;Failed to create Secret Santa Group: &quot; + e.getMessage(), HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n    }\n</code></pre>\n<p>Thanks in advance, and due to my karma i might not be able to upvote your answer or answer it</p>\n"},{"tags":["java","selenium-webdriver","microsoft-edge","cucumber-serenity"],"answers":[{"tags":[],"owner":{"account_id":28505208,"reputation":1,"user_id":21815951,"display_name":"Denisas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683203734,"creation_date":1683203659,"answer_id":76173244,"question_id":75988043,"body_markdown":"How I resolved my issue with chrome and edge, maybe you can do similar approach.if web driver setup class\r\noption.addArguments(&quot;--remote-allow-origins=*&quot;);(&quot;--remote-allow-origins=*&quot;);\r\n       \r\n            &quot;Chrome&quot;:\r\n                ChromeOptions options = new ChromeOptions();\r\n                options.addArguments(&quot;start-maximized&quot;);\r\n                options.addArguments(&quot;allow-running-insecure-content&quot;);\r\n                options.addArguments(&quot;--ignore-certificate-errors&quot;);\r\n                // in Chrome\r\n                options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n                WebDriverManager.chromedriver().setup();\r\n                webDriver = new ChromeDriver(options);\r\n              \r\n           &quot;Edge&quot;:\r\n                EdgeOptions option = new EdgeOptions();\r\n                option.setCapability(CapabilityType.ACCEPT_INSECURE_CERTS, true);\r\n                // in Edge\r\n                option.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n                WebDriverManager.edgedriver().setup();\r\n                webDriver = new EdgeDriver(option);\r\n               \r\n","title":"JAVA Could not instantiate class org.openqa.selenium.edge.EdgeDriver","body":"<p>How I resolved my issue with chrome and edge, maybe you can do similar approach.if web driver setup class\noption.addArguments(&quot;--remote-allow-origins=<em>&quot;);(&quot;--remote-allow-origins=</em>&quot;);</p>\n<pre><code>        &quot;Chrome&quot;:\n            ChromeOptions options = new ChromeOptions();\n            options.addArguments(&quot;start-maximized&quot;);\n            options.addArguments(&quot;allow-running-insecure-content&quot;);\n            options.addArguments(&quot;--ignore-certificate-errors&quot;);\n            // in Chrome\n            options.addArguments(&quot;--remote-allow-origins=*&quot;);\n            WebDriverManager.chromedriver().setup();\n            webDriver = new ChromeDriver(options);\n          \n       &quot;Edge&quot;:\n            EdgeOptions option = new EdgeOptions();\n            option.setCapability(CapabilityType.ACCEPT_INSECURE_CERTS, true);\n            // in Edge\n            option.addArguments(&quot;--remote-allow-origins=*&quot;);\n            WebDriverManager.edgedriver().setup();\n            webDriver = new EdgeDriver(option);\n           \n</code></pre>\n"}],"owner":{"account_id":6445824,"reputation":1,"user_id":4994361,"display_name":"Job46"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683203734,"creation_date":1681229674,"question_id":75988043,"body_markdown":"Hello I am using Java/selenium for test automation and starting from today I am having this error while using Edge. Everything was working just fine.\r\nIt started with Chrome 4 weeks ago then I used -Dchrome.switches=&quot;--remote-allow-origins=*&quot; to solve it.\r\nBut now with Edge I have no idea how to solve it.\r\n\r\nI would really appreciate your help, thank you !\r\n\r\n\r\n\r\n\r\n&gt; Microsoft Edge WebDriver was started successfully.\r\n&gt; avr. 11, 2023 5:59:48 PM org.openqa.selenium.remote.ProtocolHandshake createSession\r\n&gt; INFOS: Detected dialect: W3C\r\n&gt; avr. 11, 2023 5:59:48 PM org.openqa.selenium.remote.http.WebSocket$Listener onError\r\n&gt; AVERTISSEMENT: Invalid Status code=403 text=Forbidden\r\n\r\n\r\n\r\n```\r\nwebdriver.driver=Edge\r\nserenity.keep.unscaled.screenshots = true\r\nserenity.project.name = Socle Automate Cucumber\r\nserenity.use.unique.browser = false\r\nserenity.batch.count=1\r\nserenity.batch.number=1\r\nwebdriver.timeouts.implicitlywait 10000\r\nserenity.console.colors = true\r\nwebdriver.autodownload=true\r\n```","title":"JAVA Could not instantiate class org.openqa.selenium.edge.EdgeDriver","body":"<p>Hello I am using Java/selenium for test automation and starting from today I am having this error while using Edge. Everything was working just fine.\nIt started with Chrome 4 weeks ago then I used -Dchrome.switches=&quot;--remote-allow-origins=*&quot; to solve it.\nBut now with Edge I have no idea how to solve it.</p>\n<p>I would really appreciate your help, thank you !</p>\n<blockquote>\n<p>Microsoft Edge WebDriver was started successfully.\navr. 11, 2023 5:59:48 PM org.openqa.selenium.remote.ProtocolHandshake createSession\nINFOS: Detected dialect: W3C\navr. 11, 2023 5:59:48 PM org.openqa.selenium.remote.http.WebSocket$Listener onError\nAVERTISSEMENT: Invalid Status code=403 text=Forbidden</p>\n</blockquote>\n<pre><code>webdriver.driver=Edge\nserenity.keep.unscaled.screenshots = true\nserenity.project.name = Socle Automate Cucumber\nserenity.use.unique.browser = false\nserenity.batch.count=1\nserenity.batch.number=1\nwebdriver.timeouts.implicitlywait 10000\nserenity.console.colors = true\nwebdriver.autodownload=true\n</code></pre>\n"},{"tags":["java","android","character-encoding","http-post"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1302266636,"creation_date":1302266636,"answer_id":5595206,"question_id":5594826,"body_markdown":"It&#39;s not in `UTF-8` encoding, it&#39;s likely in `Big5` encoding (your question history confirms that you&#39;re from China / Hong Kong).\r\n\r\n&gt; Mytest簿翹癡職疇繡矇簿翹疇簞簣癡瞽竄疆癡穠矇簡疇瞼矇罈疇簫矇繕瓣罈繞癟糧罈癟繕簣瓣繡瓣繙矇癟瞼疇簧瞽疆繞\r\n\r\nYou should be able to determine that by reading `HttpEntity#getContentType()` yourself. It should return something like\r\n\r\n    text/html;charset=Big5","title":"ByteArrayOutputStream encoding issue","body":"<p>It's not in <code>UTF-8</code> encoding, it's likely in <code>Big5</code> encoding (your question history confirms that you're from China / Hong Kong).</p>\n\n<blockquote>\n  <p>Mytest簿翹癡職疇繡矇簿翹疇簞簣癡瞽竄疆癡穠矇簡疇瞼矇罈疇簫矇繕瓣罈繞癟糧罈癟繕簣瓣繡瓣繙矇癟瞼疇簧瞽疆繞</p>\n</blockquote>\n\n<p>You should be able to determine that by reading <code>HttpEntity#getContentType()</code> yourself. It should return something like</p>\n\n<pre><code>text/html;charset=Big5\n</code></pre>\n"}],"owner":{"account_id":266239,"reputation":210,"user_id":553710,"accept_rate":31,"display_name":"user553710"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10692,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":5595206,"answer_count":1,"score":1,"last_activity_date":1683203648,"creation_date":1302264519,"question_id":5594826,"body_markdown":"I have issue on encoding, after i download data of rss feed from website. Some character does not interpret properly. \r\nI use `HttpResponse.getEntity()` and put in loop read inputStream and write in `ByteArrayOutPutStream`.\r\n\r\nE.g. ByteArrayOutPutStream bs;\r\n after write on &quot;bs&quot;, i use \r\n\r\n`String test = bs.toString(&quot;UTF-8&quot;);`\r\n\r\nhowever some character comes like this: \r\n\r\n&gt; Mytest&#239;&#188;&#232;&#190;&#229;&#184;&#233;&#239;&#188;&#229;&#176;&#177;&#232;&#162;&#171;&#230;&#232;&#170;&#233;&#178;&#229;&#165;&#233;&#187;&#229;&#173;&#233;&#181;&#228;&#187;&#182;&#231;&#179;&#187;&#231;&#181;&#177;&#228;&#184;&#228;&#186;&#233;&#231;&#165;&#229;&#174;&#162;&#230;&#182;\r\n\r\nI cannot convert those character, any idea.\r\n\r\n\r\nThank you\r\n\r\n","title":"ByteArrayOutputStream encoding issue","body":"<p>I have issue on encoding, after i download data of rss feed from website. Some character does not interpret properly.\nI use <code>HttpResponse.getEntity()</code> and put in loop read inputStream and write in <code>ByteArrayOutPutStream</code>.</p>\n<p>E.g. ByteArrayOutPutStream bs;\nafter write on &quot;bs&quot;, i use</p>\n<p><code>String test = bs.toString(&quot;UTF-8&quot;);</code></p>\n<p>however some character comes like this:</p>\n<blockquote>\n<p>Mytestï¼è¾å¸éï¼å°±è¢«æèªé²å¥é»å­éµä»¶ç³»çµ±ä¸äºéç¥å®¢æ¶</p>\n</blockquote>\n<p>I cannot convert those character, any idea.</p>\n<p>Thank you</p>\n"},{"tags":["java","mongodb","spring-boot","rest","spring-data"],"comments":[{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1661347958,"post_id":73473785,"comment_id":129750742,"body_markdown":"Empty list means there is no data in the collection.","body":"Empty list means there is no data in the collection."},{"owner":{"account_id":8467230,"reputation":459,"user_id":6351048,"display_name":"Nipuna Jayawardana"},"score":0,"creation_date":1661348036,"post_id":73473785,"comment_id":129750784,"body_markdown":"there are data in the collection. api to get the number of documents in the collection works fine.","body":"there are data in the collection. api to get the number of documents in the collection works fine."},{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1661348163,"post_id":73473785,"comment_id":129750849,"body_markdown":"What code is used for counting?","body":"What code is used for counting?"},{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1661348258,"post_id":73473785,"comment_id":129750898,"body_markdown":"can you check connection details as well if they are correct","body":"can you check connection details as well if they are correct"},{"owner":{"account_id":8467230,"reputation":459,"user_id":6351048,"display_name":"Nipuna Jayawardana"},"score":0,"creation_date":1661348330,"post_id":73473785,"comment_id":129750942,"body_markdown":"public int getAuthScopesCount() {\n        return  (int) authScopeRepository.count();\n  } \nthis works fine. so connections details cannot be incorrect","body":"public int getAuthScopesCount() {         return  (int) authScopeRepository.count();   }  this works fine. so connections details cannot be incorrect"},{"owner":{"account_id":8467230,"reputation":459,"user_id":6351048,"display_name":"Nipuna Jayawardana"},"score":0,"creation_date":1661348772,"post_id":73473785,"comment_id":129751196,"body_markdown":"named queries also working","body":"named queries also working"}],"answers":[{"tags":[],"owner":{"account_id":8467230,"reputation":459,"user_id":6351048,"display_name":"Nipuna Jayawardana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661415044,"creation_date":1661415044,"answer_id":73484040,"question_id":73473785,"body_markdown":"found the issue. in order to findAll() to work, the model has to have deleted status.\r\n\r\nI&#39;ve updated the model as follows\r\n```\r\n@Data\r\n@Document(&quot;auth-scopes&quot;)\r\npublic class AuthScope  {\r\n    @Id\r\n    private String scope;\r\n    private String belongsToApi;\r\n    private String belongsToApiTitle;\r\n    private String description;\r\n    private boolean deleted;\r\n\r\n}\r\n```","title":"Springboot MongoRepository findAll() method returns an empty list, But other Methods return valid results","body":"<p>found the issue. in order to findAll() to work, the model has to have deleted status.</p>\n<p>I've updated the model as follows</p>\n<pre><code>@Data\n@Document(&quot;auth-scopes&quot;)\npublic class AuthScope  {\n    @Id\n    private String scope;\n    private String belongsToApi;\n    private String belongsToApiTitle;\n    private String description;\n    private boolean deleted;\n\n}\n</code></pre>\n"}],"owner":{"account_id":8467230,"reputation":459,"user_id":6351048,"display_name":"Nipuna Jayawardana"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683203168,"creation_date":1661346494,"question_id":73473785,"body_markdown":"`findAll()` method of mongoRepository returns an empty list. what is wrong with the below code?\r\nAPI used for counting the number of documents in the collection works fine and because of that, `findAll()` also should return a valid result.\r\n\r\nController\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/api-management/scopes&quot;)\r\npublic class AuthScopesController {\r\n    private final ScopesService scopesService;\r\n\r\n    @Autowired\r\n    AuthScopesController(ScopesService scopesService) {\r\n        this.scopesService = scopesService;\r\n    }\r\n\r\n    @PostMapping(&quot;/&quot;)\r\n    public AuthScope createScope(@RequestBody AuthScope authScope) {\r\n        return scopesService.createAuthScope(authScope);\r\n    }\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public List&lt;AuthScope&gt; getAllScopes() {\r\n        return scopesService.getAuthScopes();\r\n    }\r\n}\r\n```\r\nservice\r\n\r\n```\r\n@Service\r\npublic class ScopesService {\r\n\r\n    private final AuthScopeRepository authScopeRepository;\r\n\r\n    public ScopesService(AuthScopeRepository authScopeRepository) {\r\n        this.authScopeRepository = authScopeRepository;\r\n    }\r\n\r\n    public AuthScope createAuthScope(AuthScope authScope) {\r\n        return authScopeRepository.save(authScope);\r\n    }\r\n    //TODO: recheck\r\n    public List&lt;AuthScope&gt; getAuthScopes() {\r\n        return authScopeRepository.findAll();\r\n    }\r\n}\r\n```\r\n\r\nrepository\r\n```\r\n@Repository\r\npublic interface AuthScopeRepository extends MongoRepository&lt;AuthScope, String&gt; {\r\n    Optional&lt;AuthScope&gt; findByScope(String id);\r\n}\r\n \r\n```\r\nmodel is as follows\r\n\r\n```\r\n@Data\r\n@Document(&quot;auth-scopes&quot;)\r\npublic class AuthScope  {\r\n    @Id\r\n    private String scope;\r\n    private String belongsToApi;\r\n    private String belongsToApiTitle;\r\n    private String description;\r\n}\r\n```","title":"Springboot MongoRepository findAll() method returns an empty list, But other Methods return valid results","body":"<p><code>findAll()</code> method of mongoRepository returns an empty list. what is wrong with the below code?\nAPI used for counting the number of documents in the collection works fine and because of that, <code>findAll()</code> also should return a valid result.</p>\n<p>Controller</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/api-management/scopes&quot;)\npublic class AuthScopesController {\n    private final ScopesService scopesService;\n\n    @Autowired\n    AuthScopesController(ScopesService scopesService) {\n        this.scopesService = scopesService;\n    }\n\n    @PostMapping(&quot;/&quot;)\n    public AuthScope createScope(@RequestBody AuthScope authScope) {\n        return scopesService.createAuthScope(authScope);\n    }\n\n    @GetMapping(&quot;/&quot;)\n    public List&lt;AuthScope&gt; getAllScopes() {\n        return scopesService.getAuthScopes();\n    }\n}\n</code></pre>\n<p>service</p>\n<pre><code>@Service\npublic class ScopesService {\n\n    private final AuthScopeRepository authScopeRepository;\n\n    public ScopesService(AuthScopeRepository authScopeRepository) {\n        this.authScopeRepository = authScopeRepository;\n    }\n\n    public AuthScope createAuthScope(AuthScope authScope) {\n        return authScopeRepository.save(authScope);\n    }\n    //TODO: recheck\n    public List&lt;AuthScope&gt; getAuthScopes() {\n        return authScopeRepository.findAll();\n    }\n}\n</code></pre>\n<p>repository</p>\n<pre><code>@Repository\npublic interface AuthScopeRepository extends MongoRepository&lt;AuthScope, String&gt; {\n    Optional&lt;AuthScope&gt; findByScope(String id);\n}\n \n</code></pre>\n<p>model is as follows</p>\n<pre><code>@Data\n@Document(&quot;auth-scopes&quot;)\npublic class AuthScope  {\n    @Id\n    private String scope;\n    private String belongsToApi;\n    private String belongsToApiTitle;\n    private String description;\n}\n</code></pre>\n"},{"tags":["java","scala","ssh","jsch","ssh-tunnel"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683038596,"creation_date":1681827173,"answer_id":76045670,"question_id":76038189,"body_markdown":"It looks like you expect the `direct-tcpip` to be somehow magically connected to the `setPortForwardingL`. I&#39;m quite sure it won&#39;t. You are basically trying twice the same thing, but in neither case you do all that is needed.\r\n\r\nEither:\r\n\r\n- Use `Session.setPortForwardingL` to forward a local port and connect `Socket` to `localhost:tunnelLocalPort` and talk to the remote side over it. That&#39;s an overkill, but maybe easier to implement.\r\n\r\n- Or correctly setup the `tunnelChannel` (by calling `setHost` and `setPort`). Or rather use `Session.getStreamForwarder` that does exactly that. And talk to the remote side directly over the channel, without need for a physical local port. The local port is only needed as an interface to another process. If you have everything within one process, you do not need the port. It would be just an additional useless layer.","title":"Communicate through JSch SSH tunnel with remote process/server","body":"<p>It looks like you expect the <code>direct-tcpip</code> to be somehow magically connected to the <code>setPortForwardingL</code>. I'm quite sure it won't. You are basically trying twice the same thing, but in neither case you do all that is needed.</p>\n<p>Either:</p>\n<ul>\n<li><p>Use <code>Session.setPortForwardingL</code> to forward a local port and connect <code>Socket</code> to <code>localhost:tunnelLocalPort</code> and talk to the remote side over it. That's an overkill, but maybe easier to implement.</p>\n</li>\n<li><p>Or correctly setup the <code>tunnelChannel</code> (by calling <code>setHost</code> and <code>setPort</code>). Or rather use <code>Session.getStreamForwarder</code> that does exactly that. And talk to the remote side directly over the channel, without need for a physical local port. The local port is only needed as an interface to another process. If you have everything within one process, you do not need the port. It would be just an additional useless layer.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":32473,"reputation":2320,"user_id":90173,"accept_rate":72,"display_name":"gknauth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683203089,"creation_date":1681756112,"question_id":76038189,"body_markdown":"I&#39;m trying to do programmatically in `JSch` what works fine in Bash.  I set up an SSH tunnel and then communicate through the tunnel.  I&#39;m supposed to send an authentication string every 10 seconds or so, and in return I will get from the remote host a steady stream of lines.  In `JSch` I&#39;ve established the connection to the remote host Ok, but when I try to set up a channel with the `direct-tcpip` option, reading and writing the channel&#39;s `getInputStream` and `getOutputStream`, it throws an exception `failed to initialize the channel`.  After reading what people wrote in other SO answers regarding `JSch`, I did `channel.connect()` before I tried to write to the outputStream.  This is what works in Bash:\r\n\r\nIn one shell:\r\n\r\n    ssh -l username -L LOCALPORT:127.0.0.1:REMOTEPORT REMOTEHOST\r\n\r\nIn another shell:\r\n\r\n    ID=&#39;{ &quot;id&quot;: 1234, &quot;auth&quot;: &quot;abcdefhijklmnopqrstuvwxyz&quot; }&#39;\r\n    while true; do echo $ID; sleep 10; done | nc localhost LOCALPORT\r\n\r\n\r\n**Attempted/failing bugfix code commenter requested I show:**\r\n\r\nWhen I try **session.setPortForwardingL** and open a Socket to `localhost:tunnelLocalPort`, the session says it is connected and the socket says it is connected but before I can even use the socket, the `DirectTCPIP thread remoteIp` throws `JSchException(&quot;channel is not opened&quot;) // SSH_MSG_CHANNEL_OPEN_FAILURE` at the bottom of `sendChannelOpen()` in `Channel.java`.\r\n\r\n    JSch.setConfig(&quot;server_host_key&quot;, JSch.getConfig(&quot;server_host_key&quot;) + &quot;,ssh-rsa&quot;)\r\n    JSch.setConfig(&quot;PubkeyAcceptedAlgorithms&quot;, JSch.getConfig(&quot;PubkeyAcceptedAlgorithms&quot;) + &quot;,ssh-rsa&quot;)\r\n    val jsch = new JSch()\r\n    jsch.addIdentity(relPathPrivateKey)\r\n    val session = jsch.getSession(usernameAtRemote, remoteIp, 22)\r\n    session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;)\r\n    session.connect()   // session is verified connected &amp; authenticated after this call\r\n    val assignedPort: Int = session.setPortForwardingL(tunnelLocalPort, localhost, remotePort)\r\n    val socket = new Socket(localhost, assignedPort)\r\n    val inputStream = socket.getInputStream\r\n    val outputStream = socket.getOutputStream\r\n    val bufferedReader = new BufferedReader(new InputStreamReader(inputStream, StandardCharsets.UTF_8))\r\n    val writer = new PrintWriter(outputStream)\r\n    writer.println(auth)\r\n    readLines(bufferedReader)\r\n    socket.close()\r\n    session.disconnect()\r\n\r\n    // com.jcraft.jsch.Channel\r\n    protected void sendChannelOpen() throws Exception {\r\n      // ... lines 819-821 below ...\r\n      if (this.open_confirmation == false) { // SSH_MSG_CHANNEL_OPEN_FAILURE\r\n        throw new JSchException(&quot;channel is not opened.&quot;);  // &lt;== FAILS HERE in DirectTCPIP thread\r\n      }\r\n      // ...\r\n    }\r\n\r\nWhen I try **session.getStreamForwarder** and I try `channel.connect()`, it throws `JSchException(&quot;session is down&quot;)` at the end of `sendChannelOpen` in `Channel.java` in the main thread.\r\n\r\n    JSch.setConfig(&quot;server_host_key&quot;, JSch.getConfig(&quot;server_host_key&quot;) + &quot;,ssh-rsa&quot;)\r\n    JSch.setConfig(&quot;PubkeyAcceptedAlgorithms&quot;, JSch.getConfig(&quot;PubkeyAcceptedAlgorithms&quot;) + &quot;,ssh-rsa&quot;)\r\n    val jsch = new JSch()\r\n    jsch.addIdentity(relPathPrivateKey)\r\n    val session = jsch.getSession(usernameAtRemote, remoteIp, 22)\r\n    session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;)\r\n    session.connect()   // session is verified connected &amp; authenticated after this call\r\n    val channel = session.getStreamForwarder(remoteIp, remotePort)\r\n    channel.connect()   // this FAILS\r\n    val inputStream = channel.getInputStream\r\n    val outputStream = channel.getOutputStream\r\n    val bufferedReader = new BufferedReader(new InputStreamReader(inputStream, StandardCharsets.UTF_8))\r\n    val writer = new PrintWriter(outputStream)\r\n    writer.println(auth)\r\n    readLines(bufferedReader)\r\n    channel.disconnect()\r\n    session.disconnect()\r\n\r\n    // com.jcraft.jsch.Channel\r\n    protected void sendChannelOpen() throws Exception {\r\n      // ... lines 816-818 below ...\r\n      if (!_session.isConnected()) {\r\n\t    throw new JSchException(&quot;session is down&quot;);  // &lt;== FAILS HERE in main thread\r\n      }\r\n      // ...\r\n    }\r\n\r\n\r\n**Code below is from original post, here for original discussion context only, and can be ignored for now. Instead see the code segments inserted above, as a commenter requested I show new code.**\r\n\r\nHere is some test code in Scala calling JSch. I realize it&#39;s rough. I&#39;m just trying to get JSch to work for me.\r\n\r\n    import com.jcraft.jsch._\r\n    \r\n    object Main extends Log4JLogging {\r\n      def main(args: Array[String]): Unit = {\r\n        // $ ssh -l username -L LOCALPORT:127.0.0.1:REMOTEPORT REMOTEHOST\r\n        // $ ID=&#39;{ &quot;id&quot;: 1234, &quot;auth&quot;: &quot;abcdefghijklmnopqrstuvwxyz&quot; }&#39;\r\n        // $ while true; do echo $ID; sleep 10; done | nc localhost LOCALPORT\r\n    \r\n        val remoteIpaddr = &quot;123.45.54.321&quot;\r\n        val localhost = &quot;127.0.0.1&quot;\r\n        val sshPort = 22\r\n        val tunnelLocalPort = LOCALPORT\r\n        val tunnelRemotePort = REMOTEPORT\r\n    \r\n        val usernameAtRemoteHost = &quot;username&quot;\r\n        val privateKeyForRemoteHost = &quot;ssh/for-remotehost/id_rsa&quot;\r\n    \r\n        val auth = &quot;{ \\&quot;id\\&quot;: 1234, \\&quot;auth\\&quot;: \\&quot;abcdefghijklmnopqrstuvwxyz\\&quot; }\\n&quot;\r\n        try {\r\n          val currentWorkingDirectory: String = System.getProperty(&quot;user.dir&quot;)\r\n          val pathPrivateKeyForRemoteHost: String = s&quot;$currentWorkingDirectory/$privateKeyForRemoteHost&quot;\r\n          JSch.setConfig(&quot;server_host_key&quot;, JSch.getConfig(&quot;server_host_key&quot;) + &quot;,ssh-rsa&quot;)\r\n          JSch.setConfig(&quot;PubkeyAcceptedAlgorithms&quot;, JSch.getConfig(&quot;PubkeyAcceptedAlgorithms&quot;) + &quot;,ssh-rsa&quot;)\r\n          val tunnelJSch = new JSch()\r\n          tunnelJSch.addIdentity(pathPrivateKeyForRemoteHost)\r\n          val tunnelSessionPort = sshPort\r\n          val tunnelSession = tunnelJSch.getSession(usernameAtRemoteHost, remoteIpaddr, tunnelSessionPort)\r\n          tunnelSession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;) // yes I know this is bad, will change once things work\r\n          tunnelSession.setPortForwardingL(tunnelLocalPort, localhost, tunnelRemotePort)\r\n          tunnelSession.connect()\r\n    \r\n          val tunnelChannel = tunnelSession.openChannel(&quot;direct-tcpip&quot;)\r\n          val input = tunnelChannel.getInputStream()\r\n          val output = tunnelChannel.getOutputStream()\r\n          tunnelChannel.connect()\r\n    //      tunnelChannel.setInputStream(System.in)\r\n    //      tunnelChannel.setOutputStream(System.out)\r\n          output.write(auth.getBytes(StandardCharsets.UTF_8))\r\n          val buffer = new Array[Byte](1024)\r\n          var n = input.read(buffer)\r\n          while (n &gt; 0) {\r\n            n = input.read(buffer)\r\n          }\r\n    //      val dataJsch = new JSch()\r\n    //      dataJsch.addIdentity(pathPrivateKeyForRemoteHost)\r\n    //      val dataSession = dataJsch.getSession(usernameAtRemoteHost, localhost, tunnelLocalPort)\r\n    //      dataSession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;) // yes I know this is bad, will change once things work\r\n    //\r\n    //      val dataChannel = dataSession.openChannel(&quot;forwarded-tcpip&quot;)\r\n    //      dataChannel.setInputStream(System.in)\r\n    //      dataChannel.setOutputStream(System.out)\r\n    //      dataChannel.connect()\r\n    //\r\n    //      val input = dataChannel.getInputStream()\r\n    //      val output = dataChannel.getOutputStream()\r\n    //      output.write(auth.getBytes(StandardCharsets.UTF_8))\r\n    //      val buffer = new Array[Byte](1024)\r\n    //      var n = input.read(buffer)\r\n    //      while (n &gt; 0) {\r\n    //        n = input.read(buffer)\r\n    //      }\r\n    //      dataChannel.disconnect()\r\n          tunnelSession.disconnect()\r\n        } catch {\r\n          case e: Exception =&gt;\r\n            logStackTrace(e)\r\n    \tSystem.exit(1)\r\n        }\r\n      }\r\n    }\r\n","title":"Communicate through JSch SSH tunnel with remote process/server","body":"<p>I'm trying to do programmatically in <code>JSch</code> what works fine in Bash.  I set up an SSH tunnel and then communicate through the tunnel.  I'm supposed to send an authentication string every 10 seconds or so, and in return I will get from the remote host a steady stream of lines.  In <code>JSch</code> I've established the connection to the remote host Ok, but when I try to set up a channel with the <code>direct-tcpip</code> option, reading and writing the channel's <code>getInputStream</code> and <code>getOutputStream</code>, it throws an exception <code>failed to initialize the channel</code>.  After reading what people wrote in other SO answers regarding <code>JSch</code>, I did <code>channel.connect()</code> before I tried to write to the outputStream.  This is what works in Bash:</p>\n<p>In one shell:</p>\n<pre><code>ssh -l username -L LOCALPORT:127.0.0.1:REMOTEPORT REMOTEHOST\n</code></pre>\n<p>In another shell:</p>\n<pre><code>ID='{ &quot;id&quot;: 1234, &quot;auth&quot;: &quot;abcdefhijklmnopqrstuvwxyz&quot; }'\nwhile true; do echo $ID; sleep 10; done | nc localhost LOCALPORT\n</code></pre>\n<p><strong>Attempted/failing bugfix code commenter requested I show:</strong></p>\n<p>When I try <strong>session.setPortForwardingL</strong> and open a Socket to <code>localhost:tunnelLocalPort</code>, the session says it is connected and the socket says it is connected but before I can even use the socket, the <code>DirectTCPIP thread remoteIp</code> throws <code>JSchException(&quot;channel is not opened&quot;) // SSH_MSG_CHANNEL_OPEN_FAILURE</code> at the bottom of <code>sendChannelOpen()</code> in <code>Channel.java</code>.</p>\n<pre><code>JSch.setConfig(&quot;server_host_key&quot;, JSch.getConfig(&quot;server_host_key&quot;) + &quot;,ssh-rsa&quot;)\nJSch.setConfig(&quot;PubkeyAcceptedAlgorithms&quot;, JSch.getConfig(&quot;PubkeyAcceptedAlgorithms&quot;) + &quot;,ssh-rsa&quot;)\nval jsch = new JSch()\njsch.addIdentity(relPathPrivateKey)\nval session = jsch.getSession(usernameAtRemote, remoteIp, 22)\nsession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;)\nsession.connect()   // session is verified connected &amp; authenticated after this call\nval assignedPort: Int = session.setPortForwardingL(tunnelLocalPort, localhost, remotePort)\nval socket = new Socket(localhost, assignedPort)\nval inputStream = socket.getInputStream\nval outputStream = socket.getOutputStream\nval bufferedReader = new BufferedReader(new InputStreamReader(inputStream, StandardCharsets.UTF_8))\nval writer = new PrintWriter(outputStream)\nwriter.println(auth)\nreadLines(bufferedReader)\nsocket.close()\nsession.disconnect()\n\n// com.jcraft.jsch.Channel\nprotected void sendChannelOpen() throws Exception {\n  // ... lines 819-821 below ...\n  if (this.open_confirmation == false) { // SSH_MSG_CHANNEL_OPEN_FAILURE\n    throw new JSchException(&quot;channel is not opened.&quot;);  // &lt;== FAILS HERE in DirectTCPIP thread\n  }\n  // ...\n}\n</code></pre>\n<p>When I try <strong>session.getStreamForwarder</strong> and I try <code>channel.connect()</code>, it throws <code>JSchException(&quot;session is down&quot;)</code> at the end of <code>sendChannelOpen</code> in <code>Channel.java</code> in the main thread.</p>\n<pre><code>JSch.setConfig(&quot;server_host_key&quot;, JSch.getConfig(&quot;server_host_key&quot;) + &quot;,ssh-rsa&quot;)\nJSch.setConfig(&quot;PubkeyAcceptedAlgorithms&quot;, JSch.getConfig(&quot;PubkeyAcceptedAlgorithms&quot;) + &quot;,ssh-rsa&quot;)\nval jsch = new JSch()\njsch.addIdentity(relPathPrivateKey)\nval session = jsch.getSession(usernameAtRemote, remoteIp, 22)\nsession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;)\nsession.connect()   // session is verified connected &amp; authenticated after this call\nval channel = session.getStreamForwarder(remoteIp, remotePort)\nchannel.connect()   // this FAILS\nval inputStream = channel.getInputStream\nval outputStream = channel.getOutputStream\nval bufferedReader = new BufferedReader(new InputStreamReader(inputStream, StandardCharsets.UTF_8))\nval writer = new PrintWriter(outputStream)\nwriter.println(auth)\nreadLines(bufferedReader)\nchannel.disconnect()\nsession.disconnect()\n\n// com.jcraft.jsch.Channel\nprotected void sendChannelOpen() throws Exception {\n  // ... lines 816-818 below ...\n  if (!_session.isConnected()) {\n    throw new JSchException(&quot;session is down&quot;);  // &lt;== FAILS HERE in main thread\n  }\n  // ...\n}\n</code></pre>\n<p><strong>Code below is from original post, here for original discussion context only, and can be ignored for now. Instead see the code segments inserted above, as a commenter requested I show new code.</strong></p>\n<p>Here is some test code in Scala calling JSch. I realize it's rough. I'm just trying to get JSch to work for me.</p>\n<pre><code>import com.jcraft.jsch._\n\nobject Main extends Log4JLogging {\n  def main(args: Array[String]): Unit = {\n    // $ ssh -l username -L LOCALPORT:127.0.0.1:REMOTEPORT REMOTEHOST\n    // $ ID='{ &quot;id&quot;: 1234, &quot;auth&quot;: &quot;abcdefghijklmnopqrstuvwxyz&quot; }'\n    // $ while true; do echo $ID; sleep 10; done | nc localhost LOCALPORT\n\n    val remoteIpaddr = &quot;123.45.54.321&quot;\n    val localhost = &quot;127.0.0.1&quot;\n    val sshPort = 22\n    val tunnelLocalPort = LOCALPORT\n    val tunnelRemotePort = REMOTEPORT\n\n    val usernameAtRemoteHost = &quot;username&quot;\n    val privateKeyForRemoteHost = &quot;ssh/for-remotehost/id_rsa&quot;\n\n    val auth = &quot;{ \\&quot;id\\&quot;: 1234, \\&quot;auth\\&quot;: \\&quot;abcdefghijklmnopqrstuvwxyz\\&quot; }\\n&quot;\n    try {\n      val currentWorkingDirectory: String = System.getProperty(&quot;user.dir&quot;)\n      val pathPrivateKeyForRemoteHost: String = s&quot;$currentWorkingDirectory/$privateKeyForRemoteHost&quot;\n      JSch.setConfig(&quot;server_host_key&quot;, JSch.getConfig(&quot;server_host_key&quot;) + &quot;,ssh-rsa&quot;)\n      JSch.setConfig(&quot;PubkeyAcceptedAlgorithms&quot;, JSch.getConfig(&quot;PubkeyAcceptedAlgorithms&quot;) + &quot;,ssh-rsa&quot;)\n      val tunnelJSch = new JSch()\n      tunnelJSch.addIdentity(pathPrivateKeyForRemoteHost)\n      val tunnelSessionPort = sshPort\n      val tunnelSession = tunnelJSch.getSession(usernameAtRemoteHost, remoteIpaddr, tunnelSessionPort)\n      tunnelSession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;) // yes I know this is bad, will change once things work\n      tunnelSession.setPortForwardingL(tunnelLocalPort, localhost, tunnelRemotePort)\n      tunnelSession.connect()\n\n      val tunnelChannel = tunnelSession.openChannel(&quot;direct-tcpip&quot;)\n      val input = tunnelChannel.getInputStream()\n      val output = tunnelChannel.getOutputStream()\n      tunnelChannel.connect()\n//      tunnelChannel.setInputStream(System.in)\n//      tunnelChannel.setOutputStream(System.out)\n      output.write(auth.getBytes(StandardCharsets.UTF_8))\n      val buffer = new Array[Byte](1024)\n      var n = input.read(buffer)\n      while (n &gt; 0) {\n        n = input.read(buffer)\n      }\n//      val dataJsch = new JSch()\n//      dataJsch.addIdentity(pathPrivateKeyForRemoteHost)\n//      val dataSession = dataJsch.getSession(usernameAtRemoteHost, localhost, tunnelLocalPort)\n//      dataSession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;) // yes I know this is bad, will change once things work\n//\n//      val dataChannel = dataSession.openChannel(&quot;forwarded-tcpip&quot;)\n//      dataChannel.setInputStream(System.in)\n//      dataChannel.setOutputStream(System.out)\n//      dataChannel.connect()\n//\n//      val input = dataChannel.getInputStream()\n//      val output = dataChannel.getOutputStream()\n//      output.write(auth.getBytes(StandardCharsets.UTF_8))\n//      val buffer = new Array[Byte](1024)\n//      var n = input.read(buffer)\n//      while (n &gt; 0) {\n//        n = input.read(buffer)\n//      }\n//      dataChannel.disconnect()\n      tunnelSession.disconnect()\n    } catch {\n      case e: Exception =&gt;\n        logStackTrace(e)\n    System.exit(1)\n    }\n  }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9536,"page":456,"page_size":100}
